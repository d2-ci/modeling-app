import{P as pe,c as Ve,e as yg,l as lT,s as XA,a as Gt,b as KA,t as Jt,r as Be,R as Te,_ as Dt,d as an,m as QA,f as Cs,L as Iv,g as Cf,C as Yo,I as cT,h as JA,S as hT,i as Je,F as eM,B as xg,j as uT,n as qp,k as B_,o as tM,Q as iM,p as rM,q as nM,u as ad,v as sM,w as aM,x as oM,y as lM,z as cM,A as dT,D as F_,E as U_,G as hM,H as uM,J as dM,K as pM,M as pT,N as fM,O as od,T as ka,U as Ch,V as Dv,W as by,X as Lv,Y as Rv,Z as Wr,$ as _y,a0 as wy,a1 as Ef,a2 as zv,a3 as $u,a4 as mM,a5 as gM,a6 as Fo,a7 as Yp,a8 as yM,a9 as se,aa as un,ab as ld,ac as xM,ad as vM,ae as Ty,af as Nv,ag as cd,ah as fT,ai as bM,aj as _M,ak as $0,al as wM}from"./main-BYM__Pvl.js";const TM=i=>typeof i>"u"||i===null||i==="",$_=(i,e,t)=>(s,a,l)=>{const h=s[a];return t?new Error(`Property \`${a}\` on component \`${l}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(s)&&TM(h)?new Error(`Invalid prop \`${a}\` supplied to \`${l}\`, this prop is conditionally required but has value \`${h}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(pe.checkPropTypes({[a]:e},s,"prop",l),null)};function Sl(i,e){const t=$_(i,e,!1);return t.isRequired=$_(i,e,!0),t}const CM=Object.freeze(Object.defineProperty({__proto__:null,colors:Ve,elevations:yg,layers:lT,sharedPropTypes:XA,spacers:Gt,spacersNum:KA,theme:Jt},Symbol.toStringTag,{value:"Module"}));function Ov(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}Ov.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function jv(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}jv.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function mT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}mT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function gT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M7.354 2.646a.5.5 0 01.057.638l-.057.07L3.207 7.5H14a.5.5 0 01.09.992L14 8.5H3.207l4.147 4.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-5-5a.5.5 0 01-.057-.638l.057-.07 5-5a.5.5 0 01.708 0z",fill:"currentColor"}))}gT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function yT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M9.284 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0114.5 8v.02a.503.503 0 01-.005.052L14.5 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L12.793 8.5H2a.5.5 0 01-.09-.992L2 7.5h10.793L8.646 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}yT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function Cy(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}Cy.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function Bv(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}Bv.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function xT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}xT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function vT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M13.293 6.293a1 1 0 011.497 1.32l-.083.094L10.415 12l4.292 4.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.32.083l-.094-.083-5-5a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}vT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function bT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}bT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function _T(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}_T.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function wT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}wT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function TT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}TT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function CT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}CT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function Fv(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}Fv.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function ET(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}ET.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function Uv(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}Uv.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function ST(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}ST.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function V0(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}V0.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function kT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}kT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function AT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Be.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}AT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function MT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Be.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.92 3.606l2.498 5.831 3.757-2.819 4 5.001L20.4 11.2l1.2 1.6-4.775 3.582-4-5.001-4.243 3.182-3.501-8.17 1.838-.787z"}))}MT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function PT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Be.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.91 1.586L8.898 7.96l2.313-2.774 1.94 3.882 2.743-4.936 2.968 4.155 1.228-2.7 1.82.828-1.706 3.752 1.61 2.253-1.628 1.162-.938-1.313-3.205 7.054-2.985-5.968-2.147 3.866-2.516-5.533-1.627 1.953-1.536-1.28 2.244-2.695L5.09 4.414l1.82-.828zm9.196 4.282l-1.871 3.367 1.722 3.442 1.949-4.289-1.8-2.52zm-5.317.947l-.972 1.166 1.272 2.798.885-1.593-1.185-2.371z"}))}PT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function IT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}IT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};function DT(i){let{color:e,dataTest:t,ariaLabel:s}=i;return Be.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Be.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}DT.propTypes={color:pe.string,dataTest:pe.string,ariaLabel:pe.string};const ha=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${Ve.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${Ve.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${Ve.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${Ve.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${Ve.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${Ve.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${Ve.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${Ve.white};}`];ha.__hash="4069423049";function LT(i){let{className:e}=i;return Te.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ha.__hash} `+Dt.dynamic([["2753140462",[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]]])+" "+(e||"")},Te.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${ha.__hash} `+Dt.dynamic([["2753140462",[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]]])+" background"}),Te.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${ha.__hash} `+Dt.dynamic([["2753140462",[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]]])+" border"}),Te.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${ha.__hash} `+Dt.dynamic([["2753140462",[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]]])+" checkmark"}),Te.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${ha.__hash} `+Dt.dynamic([["2753140462",[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]]])+" indeterminate"}),Te.createElement(Dt,{id:ha.__hash},ha),Te.createElement(Dt,{id:"2753140462",dynamic:[Ve.grey300,Ve.grey400,Ve.blue600,Ve.blue700,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Ve.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.red700};}`]))}LT.propTypes={className:pe.string};function RT(i){let{className:e}=i;return Te.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ha.__hash} `+Dt.dynamic([["86695588",[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]]])+" "+(e||"")},Te.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${ha.__hash} `+Dt.dynamic([["86695588",[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]]])+" background"}),Te.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${ha.__hash} `+Dt.dynamic([["86695588",[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]]])+" border"}),Te.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${ha.__hash} `+Dt.dynamic([["86695588",[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]]])+" checkmark"}),Te.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${ha.__hash} `+Dt.dynamic([["86695588",[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]]])+" indeterminate"}),Te.createElement(Dt,{id:ha.__hash},ha),Te.createElement(Dt,{id:"86695588",dynamic:[Ve.grey400,Ve.grey400,Ve.grey500,Ve.blue600,Ve.blue800,Ve.yellow700,Ve.yellow800,Ve.red500,Ve.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Ve.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Ve.red800};}`]))}RT.propTypes={className:pe.string};function Nu(i,e,t){return(e=EM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function EM(i){var e=SM(i,"string");return typeof e=="symbol"?e:e+""}function SM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class Sf extends Be.Component{constructor(){super(...arguments),Nu(this,"ref",Be.createRef()),Nu(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),Nu(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),Nu(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),Nu(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:s,disabled:a,error:l,label:h,name:r,tabIndex:p,valid:m,value:g,warning:v,dense:y,dataTest:C="dhis2-uicore-checkbox"}=this.props,b=an({checked:e,indeterminate:t,disabled:a,valid:m,error:l,warning:v});return Te.createElement("label",{"data-test":C,className:Dt.dynamic([["1252368010",[Ve.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])+" "+(an(s,{disabled:a,dense:y})||"")},Te.createElement("input",{type:"checkbox",ref:this.ref,name:r,value:g,checked:e,disabled:a,tabIndex:p,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:Dt.dynamic([["1252368010",[Ve.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])}),Te.createElement("div",{className:Dt.dynamic([["1252368010",[Ve.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])+" "+(an("icon",{dense:y})||"")},y?Te.createElement(RT,{className:b}):Te.createElement(LT,{className:b})),h,Te.createElement(Dt,{id:"1252368010",dynamic:[Ve.grey900,Jt.disabled,Gt.dp4,Jt.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${Ve.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${Jt.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Gt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${Jt.focus};outline-offset:-3px;}`]))}}Nu(Sf,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const V_=QA(["checked","indeterminate"],pe.bool);Sf.propTypes={checked:V_,className:pe.string,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,error:Cs,indeterminate:V_,initialFocus:pe.bool,label:pe.node,name:pe.string,tabIndex:pe.string,valid:Cs,value:pe.string,warning:Cs,onBlur:pe.func,onChange:pe.func,onFocus:pe.func,onKeyDown:pe.func};var kM=void 0;const AM=(i,e,t)=>{let s;return function(){for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];const r=kM,p=()=>{s=null,i.apply(r,l)};clearTimeout(s),s=setTimeout(p,e)}},zT=i=>{let{dataTest:e,onToggle:t,children:s,tabIndex:a="0",error:l,warning:h,valid:r,disabled:p,dense:m,className:g,inputRef:v}=i;const y=an(g,"root",{error:l,warning:h,valid:r,disabled:p,dense:m});return Te.createElement("div",{onClick:t,tabIndex:a,ref:v,"data-test":e,className:Dt.dynamic([["1568723238",[Ve.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Ve.grey100,Ve.grey500,Jt.disabled]]])+" "+(y||"")},Te.createElement("div",{className:Dt.dynamic([["1568723238",[Ve.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Ve.grey100,Ve.grey500,Jt.disabled]]])+" root-children"},s),Te.createElement("div",{className:Dt.dynamic([["1568723238",[Ve.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Ve.grey100,Ve.grey500,Jt.disabled]]])+" root-right"},Te.createElement(Bv,null)),Te.createElement(Dt,{id:"1568723238",dynamic:[Ve.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Ve.grey100,Ve.grey500,Jt.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${Ve.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${Jt.focus};border-color:${Jt.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${Jt.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${Jt.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${Jt.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${Ve.grey100};border-color:${Ve.grey500};color:${Jt.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:8px;}"]))};zT.propTypes={dataTest:pe.string.isRequired,inputRef:pe.object.isRequired,onToggle:pe.func.isRequired,children:pe.element,className:pe.string,dense:pe.bool,disabled:pe.bool,error:Cs,tabIndex:pe.string,valid:Cs,warning:Cs};const NT=i=>{let{children:e,dataTest:t,maxHeight:s="280px",menuWidth:a,onClick:l,selectRef:h}=i;return Te.createElement(Iv,{onBackdropClick:l,transparent:!0},Te.createElement(Cf,{reference:h,placement:"bottom-start",observeReferenceResize:!0},Te.createElement("div",{"data-test":`${t}-menuwrapper`,className:Dt.dynamic([["1363246346",[a,s,Ve.white,Ve.grey200,yg.e300]]])},e,Te.createElement(Dt,{id:"1363246346",dynamic:[a,s,Ve.white,Ve.grey200,yg.e300]},[`div.__jsx-style-dynamic-selector{width:${a};height:auto;max-height:${s};overflow:auto;background:${Ve.white};border:1px solid ${Ve.grey200};border-radius:3px;box-shadow:${yg.e300};}`]))))};NT.propTypes={dataTest:pe.string.isRequired,menuWidth:pe.string.isRequired,selectRef:pe.object.isRequired,children:pe.node,maxHeight:pe.string,onClick:pe.func};function Xa(i,e,t){return(e=MM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function MM(i){var e=PM(i,"string");return typeof e=="symbol"?e:e+""}function PM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const IM=27,DM=32,LM=38,RM=40;class Ey extends Be.Component{constructor(){super(...arguments),Xa(this,"state",{open:!1,menuWidth:"auto"}),Xa(this,"selectRef",Te.createRef()),Xa(this,"inputRef",Te.createRef()),Xa(this,"onResize",AM(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),Xa(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),Xa(this,"onFocus",e=>{const{onFocus:t,disabled:s,selected:a}=this.props;s||!t||t({selected:a},e)}),Xa(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),Xa(this,"handleClose",()=>{this.setState({open:!1})}),Xa(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),Xa(this,"onOutsideClick",e=>{const{onBlur:t,disabled:s,selected:a}=this.props;s||(this.handleClose(),t&&t({selected:a},e))}),Xa(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:s,selected:a}=this.props;if(s||(t&&t({selected:a},e),e.defaultPrevented))return;e.stopPropagation();const{open:l}=this.state,{keyCode:h}=e,r=!l&&(h===DM||h===LM||h===RM);if(l&&h===IM)return this.handleClose();if(r)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:s,className:a,selected:l,onChange:h,tabIndex:r,maxHeight:p,error:m,warning:g,valid:v,disabled:y,dense:C,dataTest:b}=this.props,T={selected:l,onChange:h,options:s,disabled:y},S=Te.cloneElement(this.props.input,T),k={selected:l,onChange:h,options:s,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},x=Te.cloneElement(this.props.menu,k);return Te.createElement("div",{className:a,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":b},Te.createElement(zT,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:y?"-1":r,error:m,warning:g,valid:v,disabled:y,dense:C,dataTest:`${b}-input`},S),e&&Te.createElement(NT,{onClick:this.onOutsideClick,maxHeight:p,selectRef:this.selectRef,menuWidth:t,dataTest:`${b}-menu`},x))}}Xa(Ey,"defaultProps",{dataTest:"dhis2-uicore-select"});Ey.propTypes={input:pe.element.isRequired,menu:pe.element.isRequired,selected:pe.oneOfType([pe.string,pe.arrayOf(pe.string)]).isRequired,children:pe.node,className:pe.string,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,error:Cs,initialFocus:pe.bool,maxHeight:pe.string,tabIndex:pe.string,valid:Cs,warning:Cs,onBlur:pe.func,onChange:pe.func,onFocus:pe.func,onKeyDown:pe.func};const $v=i=>{let{message:e,className:t,dataTest:s}=i;return Te.createElement("div",{"data-test":s,className:Dt.dynamic([["3603755746",[Gt.dp16,Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(an(t,"container")||"")},Te.createElement("div",{className:Dt.dynamic([["3603755746",[Gt.dp16,Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])},Te.createElement(Yo,{small:!0})),e,Te.createElement(Dt,{id:"3603755746",dynamic:[Gt.dp16,Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${Ve.grey700};font-family:${Jt.fonts};font-size:13px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};}`]))};$v.propTypes={dataTest:pe.string.isRequired,className:pe.string,message:pe.string};const G0=i=>{let{value:e,onChange:t,placeholder:s,className:a,dataTest:l}=i;return Te.createElement("div",{className:Dt.dynamic([["730881408",[Ve.white,Gt.dp8,Gt.dp8,Gt.dp4,Gt.dp8]]])+" "+(a||"")},Te.createElement(cT,{dense:!0,dataTest:l,value:e,onChange:t,type:"text",name:"filter",placeholder:s,initialFocus:!0}),Te.createElement(Dt,{id:"730881408",dynamic:[Ve.white,Gt.dp8,Gt.dp8,Gt.dp4,Gt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${Ve.white};padding-block-start:${Gt.dp8};padding-inline-end:${Gt.dp8};padding-block-end:${Gt.dp4};padding-inline-start:${Gt.dp8};z-index:1;}`]))};G0.propTypes={dataTest:pe.string.isRequired,value:pe.string.isRequired,className:pe.string,placeholder:pe.string,onChange:pe.func};const OT=i=>{let{message:e,className:t}=i;return Te.createElement("div",{className:Dt.dynamic([["3788156646",[Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(t||"")},e,Te.createElement(Dt,{id:"3788156646",dynamic:[Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Ve.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};text-align:center;}`]))};OT.propTypes={message:pe.string.isRequired,className:pe.string};const Vv=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,Gv=i=>Te.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),jT=(i,e)=>Te.Children.toArray(e).find(t=>t.props?i===t.props.value:!1),zM=(i,e)=>e.find(t=>i===t),BT=(i,e)=>e.filter(t=>t!==i);function Ng(){return Ng=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Ng.apply(null,arguments)}function G_(i,e,t){return(e=NM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function NM(i){var e=OM(i,"string");return typeof e=="symbol"?e:e+""}function OM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let Hv=class extends Be.Component{constructor(){super(...arguments),G_(this,"state",{filter:""}),G_(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,placeholder:p,noMatchText:m,Menu:g}=this.props,{filter:v}=this.state,y={onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,dataTest:e},C=Gv(t);if(Te.Children.count(C)===0||!v)return Te.createElement(Te.Fragment,null,Te.createElement(G0,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),Te.createElement(g,Ng({},y,{options:t})));const b=Te.Children.map(t,S=>{if(!Vv(S))return null;const{label:x}=S.props;return x.toLowerCase().includes(v.toLowerCase())?S:null}),T=Te.Children.count(b)>0;return Te.createElement(Te.Fragment,null,Te.createElement(G0,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),T?Te.createElement(g,Ng({},y,{options:b})):Te.createElement(OT,{message:m}))}};Hv.propTypes={Menu:pe.elementType.isRequired,dataTest:pe.string.isRequired,noMatchText:pe.string.isRequired,selected:pe.oneOfType([pe.string,pe.arrayOf(pe.string)]).isRequired,empty:pe.node,handleClose:pe.func,handleFocusInput:pe.func,options:pe.node,placeholder:pe.string,onChange:pe.func};const Wv=i=>{let{message:e,className:t,dataTest:s}=i;return Te.createElement("div",{"data-test":s,className:Dt.dynamic([["3788156646",[Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(t||"")},e,Te.createElement(Dt,{id:"3788156646",dynamic:[Ve.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Ve.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};text-align:center;}`]))};Wv.propTypes={dataTest:pe.string.isRequired,message:pe.string.isRequired,className:pe.string};const jM=4,H_={styles:Te.createElement(Dt,{id:"1892168270"},[`.jsx-1892168270{z-index:${lT.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},BM={name:"offset",options:{offset:[0,jM]}},FM={name:"hide"},UM={name:"flip",options:{altBoundary:!0}},Sy=i=>{let{children:e,className:t,closeDelay:s=200,content:a,dataTest:l="dhis2-uicore-tooltip",maxWidth:h=300,openDelay:r=200,placement:p="top"}=i;const[m,g]=Be.useState(!1),v=Be.useRef(),y=Be.useRef(null),C=Be.useRef(null),b=()=>{clearTimeout(C.current),y.current=setTimeout(()=>{g(!0)},r)},T=()=>{clearTimeout(y.current),C.current=setTimeout(()=>{g(!1)},s)},S=()=>{clearTimeout(C.current),y.current=setTimeout(()=>{g(!0)},r)},k=()=>{clearTimeout(y.current),C.current=setTimeout(()=>{g(!1)},s)},x=A=>{A.key==="Escape"&&(C.current=setTimeout(()=>{g(!1)},s))};return Be.useEffect(()=>(document.addEventListener("keydown",x),()=>{clearTimeout(y.current),clearTimeout(C.current),document.removeEventListener("keydown",x)}),[]),Te.createElement(Te.Fragment,null,typeof e=="function"?e({onMouseOver:b,onMouseOut:T,onFocus:S,onBlur:k,ref:v}):Te.createElement("span",{onMouseOver:b,onMouseOut:T,onFocus:S,onBlur:k,ref:v,tabIndex:0,"aria-describedby":m?"tooltipContenDhis2Ui":"","data-test":`${l}-reference`,className:Dt.dynamic([["3515683788",[h,Ve.grey900,Ve.white]]])},e),m&&Te.createElement(JA,null,Te.createElement(Cf,{className:H_.className,placement:p,reference:v,modifiers:[BM,UM,FM]},Te.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:b,onMouseOut:T,"data-test":`${l}-content`,role:"tooltip",className:Dt.dynamic([["3515683788",[h,Ve.grey900,Ve.white]]])+" "+(t||"")},a))),H_.styles,Te.createElement(Dt,{id:"3515683788",dynamic:[h,Ve.grey900,Ve.white]},[`div.__jsx-style-dynamic-selector{max-width:${h}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${Ve.grey900};border-radius:3px;color:${Ve.white};font-size:13px;line-height:17px;}`]))};Sy.propTypes={children:pe.oneOfType([pe.node,pe.func]),className:pe.string,closeDelay:pe.number,content:pe.node,dataTest:pe.string,maxWidth:pe.number,openDelay:pe.number,placement:pe.oneOf(["top","right","bottom","left"])};const qv=i=>{let{onClear:e,clearText:t,className:s,dataTest:a}=i;return Te.createElement(Sy,{openDelay:500,content:t},Te.createElement("button",{"data-test":a,onClick:e,type:"button",className:Dt.dynamic([["2606883952",[Ve.grey500,Ve.grey800,Ve.grey200,Jt.focus]]])+" "+(s||"")},Te.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Dt.dynamic([["2606883952",[Ve.grey500,Ve.grey800,Ve.grey200,Jt.focus]]])},Te.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:Dt.dynamic([["2606883952",[Ve.grey500,Ve.grey800,Ve.grey200,Jt.focus]]])})),Te.createElement(Dt,{id:"2606883952",dynamic:[Ve.grey500,Ve.grey800,Ve.grey200,Jt.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Ve.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Ve.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${Ve.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${Jt.focus};}`])))};qv.propTypes={clearText:pe.string.isRequired,dataTest:pe.string.isRequired,onClear:pe.func.isRequired,className:pe.string};const Yv=i=>{let{placeholder:e,className:t,dataTest:s}=i;return e?Te.createElement("div",{"data-test":s,className:Dt.dynamic([["1027033961",[Ve.grey600]]])+" "+(t||"")},e,Te.createElement(Dt,{id:"1027033961",dynamic:[Ve.grey600]},[`div.__jsx-style-dynamic-selector{color:${Ve.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};Yv.propTypes={dataTest:pe.string.isRequired,className:pe.string,placeholder:pe.string};const Zv=i=>{let{prefix:e,className:t,dataTest:s}=i;return e?Te.createElement("div",{"data-test":s,className:Dt.dynamic([["1343055987",[Ve.grey600,Gt.dp12]]])+" "+(t||"")},e,Te.createElement(Dt,{id:"1343055987",dynamic:[Ve.grey600,Gt.dp12]},[`div.__jsx-style-dynamic-selector{color:${Ve.grey600};padding-inline-end:${Gt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};Zv.propTypes={dataTest:pe.string.isRequired,className:pe.string,prefix:pe.string};const $M=(i,e)=>{e.stopPropagation(),e.preventDefault()},VM=i=>{let{isActive:e,onChange:t,selected:s,value:a}=i;return(l,h)=>{if(h.stopPropagation(),e){const m={selected:BT(a,s)};return t(m,h)}const r={selected:s.concat([a])};return t(r,h)}},Xv=i=>{let{options:e,onChange:t,selected:s,empty:a="",dataTest:l}=i;const h=Gv(e);if(Te.Children.count(h)===0)return typeof a=="string"?Te.createElement(Wv,{message:a,dataTest:`${l}-empty`}):a;const r=Te.Children.map(e,p=>{if(!Vv(p))return p;const{value:g,label:v,disabled:y}=p.props,C=!!zM(g,s),b=y?$M:VM({isActive:C,onChange:t,selected:s,value:g,label:v});return Te.cloneElement(p,{...p.props,onClick:b,active:C})});return Te.createElement(Te.Fragment,null,r)};Xv.propTypes={dataTest:pe.string.isRequired,empty:pe.node,options:pe.node,selected:pe.arrayOf(pe.string),onChange:pe.func};const FT=i=>{let{dataTest:e,options:t,onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,placeholder:p,noMatchText:m}=i;return Te.createElement(Hv,{dataTest:e,options:t,onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,placeholder:p,noMatchText:m,Menu:Xv})};FT.propTypes={dataTest:pe.string.isRequired,noMatchText:pe.string.isRequired,empty:pe.node,handleClose:pe.func,handleFocusInput:pe.func,options:pe.node,placeholder:pe.string,selected:pe.arrayOf(pe.string),onChange:pe.func};const UT=i=>{let{children:e,overflow:t}=i;return Te.createElement("span",{className:Dt.dynamic([["765109298",[Gt.dp12]]])+" "+(an({overflow:t})||"")},e,Te.createElement(Dt,{id:"765109298",dynamic:[Gt.dp12]},[`span.__jsx-style-dynamic-selector{margin:0 ${Gt.dp12};color:inherit;white-space:nowrap;}`,".overflow.__jsx-style-dynamic-selector{max-width:150px;overflow:hidden;text-overflow:ellipsis;}"]))};UT.propTypes={children:pe.any,overflow:pe.bool};const $T=i=>{let{icon:e,dataTest:t}=i;return e?Te.createElement("span",{"data-test":t,className:Dt.dynamic([["1889825154",[Gt.dp4]]])},e,Te.createElement(Dt,{id:"1889825154",dynamic:[Gt.dp4]},[`span.__jsx-style-dynamic-selector{width:24px;height:24px;margin-inline-start:${Gt.dp4};margin-inline-end:-6px;border-radius:50%;overflow:hidden;}`,"span.__jsx-style-dynamic-selector>*{max-height:24px;max-width:24px;}"])):null};$T.propTypes={dataTest:pe.string.isRequired,icon:pe.element};function VT(i){let{className:e}=i;return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"jsx-2898942518 "+(e||"")},Te.createElement("path",{d:"M11.2928932,3.29289322 L12.7071068,4.70710678 L9.41389322,7.99989322 L12.7071068,11.2928932 L11.2928932,12.7071068 L7.99989322,9.41389322 L4.70710678,12.7071068 L3.29289322,11.2928932 L6.58589322,7.99989322 L3.29289322,4.70710678 L4.70710678,3.29289322 L7.99989322,6.58589322 L11.2928932,3.29289322 Z",className:"jsx-2898942518"}),Te.createElement(Dt,{id:"2898942518"},["svg.jsx-2898942518{fill:inherit;height:16px;width:16px;vertical-align:middle;pointer-events:none;}"]))}VT.propTypes={className:pe.string};const vg=["span.jsx-2824632002{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;width:20px;margin-inline-end:4px;border-radius:12px;margin-inline-start:-8px;}",`span.jsx-2824632002:hover{background:${Ve.grey400};}`];vg.__hash="2824632002";const W_={styles:Te.createElement(Dt,{id:"2658726446"},[`svg.jsx-2658726446{fill:${Ve.grey600};height:16px;width:16px;cursor:pointer;opacity:1;pointer-events:all;}`]),className:"jsx-2658726446"},GT=i=>{let{onRemove:e,dataTest:t}=i;return e?Te.createElement("span",{onClick:s=>{s.stopPropagation(),e({},s)},"data-test":t,className:`jsx-${vg.__hash}`},Te.createElement(VT,{className:W_.className}),W_.styles,Te.createElement(Dt,{id:vg.__hash},vg)):null};GT.propTypes={dataTest:pe.string.isRequired,onRemove:pe.func};const ku="4",HT=i=>{var e,t,s,a;let{selected:l,dense:h,disabled:r,dragging:p,overflow:m,className:g,children:v,onRemove:y,onClick:C,icon:b,dataTest:T="dhis2-uicore-chip",marginBottom:S=4,marginLeft:k,marginRight:x,marginTop:A=4,marginInlineStart:D,marginInlineEnd:w}=i;return Te.createElement("span",{onClick:I=>{!r&&C&&C({},I)},"data-test":T,className:Dt.dynamic([["3780556490",[Ve.grey200,Ve.grey900,Ve.grey300,Jt.secondary600,Ve.white]],["1687525377",[S&&`margin-bottom: ${S}px;`,(e=D??k)!==null&&e!==void 0?e:ku,(t=w??x)!==null&&t!==void 0?t:ku,A&&`margin-top: ${A}px`]]])+" "+(an(g,{selected:l,dense:h,disabled:r,dragging:p})||"")},Te.createElement($T,{icon:b,dataTest:`${T}-icon`}),Te.createElement(UT,{overflow:m},v),Te.createElement(GT,{onRemove:y,dataTest:`${T}-remove`}),Te.createElement(Dt,{id:"3780556490",dynamic:[Ve.grey200,Ve.grey900,Ve.grey300,Jt.secondary600,Ve.white]},[`span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;border-radius:16px;background-color:${Ve.grey200};font-size:14px;line-height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:${Ve.grey900};}`,".dense.__jsx-style-dynamic-selector{height:24px;font-size:13px;line-height:15px;}",`span.__jsx-style-dynamic-selector:hover{background-color:${Ve.grey300};}`,`.selected.__jsx-style-dynamic-selector{background-color:${Jt.secondary600};font-weight:500;}`,".selected.__jsx-style-dynamic-selector:hover{background-color:#00695c;}",`.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{color:${Ve.white};}`,".disabled.__jsx-style-dynamic-selector{cursor:not-allowed;opacity:0.3;}",".disabled.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{pointer-events:none;}",".dragging.__jsx-style-dynamic-selector{box-shadow:0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);}"]),Te.createElement(Dt,{id:"1687525377",dynamic:[S&&`margin-bottom: ${S}px;`,(e=D??k)!==null&&e!==void 0?e:ku,(t=w??x)!==null&&t!==void 0?t:ku,A&&`margin-top: ${A}px`]},[`span.__jsx-style-dynamic-selector{${S&&`margin-bottom: ${S}px;`} margin-inline-start:${(s=D??k)!==null&&s!==void 0?s:ku}px;margin-inline-end:${(a=w??x)!==null&&a!==void 0?a:ku}px;${A&&`margin-top: ${A}px`};}`]))};HT.propTypes={children:pe.any,className:pe.string,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,dragging:pe.bool,icon:pe.element,marginBottom:pe.number,marginInlineEnd:pe.number,marginInlineStart:pe.number,marginLeft:pe.number,marginRight:pe.number,marginTop:pe.number,overflow:pe.bool,selected:pe.bool,onClick:pe.func,onRemove:pe.func};const GM=i=>{let{selected:e,onChange:t,value:s}=i;return(a,l)=>{const r={selected:BT(s,e)};t(r,l)}},WT=i=>{let{selected:e,onChange:t,disabled:s,options:a}=i;return Te.createElement(Te.Fragment,null,e.map(l=>{const h=jT(l,a);if(!h){const g=`There is no option with the value: "${l}". Make sure that all the values passed to the selected prop match the value of an existing option.`;console.error(g)}const r=h&&h.props.disabled||s,p=h?h.props.label:l,m=r?void 0:GM({selected:e,onChange:t,value:l});return Te.createElement(HT,{key:l,onRemove:m,disabled:r,marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,overflow:!0,dense:!0},p)}))};WT.propTypes={disabled:pe.bool,options:pe.node,selected:pe.arrayOf(pe.string),onChange:pe.func};const qT=i=>{let{selected:e,onChange:t,clearable:s,clearText:a,placeholder:l,dataTest:h,prefix:r,options:p,className:m,disabled:g,inputMaxHeight:v="100px"}=i;const y=e.length>0,C=b=>{const T={selected:[]};b.stopPropagation(),t(T,b)};return Te.createElement("div",{className:Dt.dynamic([["64009541",[Ve.grey900]],["1331770409",[v]]])+" "+(an("root",m)||"")},Te.createElement(Zv,{prefix:r,dataTest:`${h}-prefix`}),!y&&!r&&Te.createElement(Yv,{placeholder:l,dataTest:`${h}-placeholder`}),y&&Te.createElement("div",{className:Dt.dynamic([["64009541",[Ve.grey900]],["1331770409",[v]]])+" root-input"},Te.createElement(WT,{selected:e,onChange:t,options:p,disabled:g})),y&&s&&!g&&Te.createElement("div",{className:Dt.dynamic([["64009541",[Ve.grey900]],["1331770409",[v]]])+" root-right"},Te.createElement(qv,{onClear:C,clearText:a,dataTest:`${h}-clear`})),Te.createElement(Dt,{id:"64009541",dynamic:[Ve.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Ve.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;gap:4px;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),Te.createElement(Dt,{id:"1331770409",dynamic:[v]},[`.root-input.__jsx-style-dynamic-selector{max-height:${v};}`]))};qT.propTypes={dataTest:pe.string.isRequired,className:pe.string,clearText:Sl(i=>i.clearable,pe.string),clearable:pe.bool,disabled:pe.bool,inputMaxHeight:pe.string,options:pe.node,placeholder:pe.string,prefix:pe.string,selected:pe.arrayOf(pe.string),onChange:pe.func};const HM=[],YT=i=>{let{className:e,selected:t=HM,tabIndex:s,maxHeight:a,inputMaxHeight:l,onChange:h,onFocus:r,onKeyDown:p,onBlur:m,loading:g,error:v,warning:y,valid:C,disabled:b,children:T,clearable:S,clearText:k,filterable:x,filterPlaceholder:A,placeholder:D,prefix:w,empty:I,loadingText:N,noMatchText:q,initialFocus:Y,dense:X,dataTest:B="dhis2-uicore-multiselect"}=i;const j=x?Te.createElement(FT,{dataTest:B,empty:I,noMatchText:q,placeholder:A}):Te.createElement(Xv,{empty:I,dataTest:B});return Te.createElement("div",{"data-test":B,className:Dt.dynamic([["2180377457",[Gt.dp8]]])+" root"},Te.createElement("div",{className:Dt.dynamic([["2180377457",[Gt.dp8]]])+" root-input"},Te.createElement(Ey,{className:e,selected:t,input:Te.createElement(qT,{clearable:S,clearText:k,dataTest:B,placeholder:D,prefix:w,inputMaxHeight:l}),menu:j,tabIndex:s,maxHeight:a,onChange:h,onFocus:r,onKeyDown:p,onBlur:m,error:v,warning:y,valid:C,disabled:b,initialFocus:Y,dense:X},T,g&&Te.createElement($v,{message:N,dataTest:`${B}-loading`}))),Te.createElement(hT,{error:v,valid:C,warning:y}),Te.createElement(Dt,{id:"2180377457",dynamic:[Gt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};YT.propTypes={children:pe.node,className:pe.string,clearText:Sl(i=>i.clearable,pe.string),clearable:pe.bool,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,empty:pe.node,error:Cs,filterPlaceholder:pe.string,filterable:pe.bool,initialFocus:pe.bool,inputMaxHeight:pe.string,loading:pe.bool,loadingText:pe.string,maxHeight:pe.string,noMatchText:Sl(i=>i.filterable,pe.string),placeholder:pe.string,prefix:pe.string,selected:pe.arrayOf(pe.string),tabIndex:pe.string,valid:Cs,warning:Cs,onBlur:pe.func,onChange:pe.func,onFocus:pe.func,onKeyDown:pe.func};const WM="",qM={Clear:WM,"No data found":"   ","Type to filter options":"  ","Loading options":" ","No options found":"    "},YM="",ZM={Clear:YM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},XM="",KM={Clear:XM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},QM="Vyistit",JM={Clear:QM,"No data found":"Nenalezena dn data","Type to filter options":"Zadnm filtrujete monosti","Loading options":"Monosti natn","No options found":"Nenalezeny dn monosti"},e5="Clear",t5={Clear:e5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},i5="",r5={Clear:i5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},n5="Limpiar",s5={Clear:n5,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opcin"},a5="Limpiar",o5={Clear:a5,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},l5="Effacer",c5={Clear:l5,"No data found":"Aucune valeur trouve","Type to filter options":"","Loading options":"Chargement des options","No options found":""},h5="Hapus",u5={Clear:h5,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},d5="",p5={Clear:d5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},f5="",m5={Clear:f5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},g5="",y5={Clear:g5,"No data found":"data ","Type to filter options":"","Loading options":"","No options found":""},x5="Fjern",v5={Clear:x5,"No data found":"Ingen data funnet","Type to filter options":"Skriv for  filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},b5="Duidelijk",_5={Clear:b5,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},w5=" ",T5={Clear:w5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},C5="  ",E5={Clear:C5,"No data found":"      ","Type to filter options":"","Loading options":"","No options found":""},S5="Limpar",k5={Clear:S5,"No data found":"Dado no encontrado","Type to filter options":"Tipo de opes de filtros","Loading options":"","No options found":""},A5="Limpar",M5={Clear:A5,"No data found":"Dado no encontrado","Type to filter options":"","Loading options":"","No options found":""},P5="",I5={Clear:P5,"No data found":"  ","Type to filter options":"    ","Loading options":" ","No options found":"  "},D5="Klar",L5={Clear:D5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},R5="Hams",z5={Clear:R5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},N5=" ",O5={Clear:N5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},j5="",B5={Clear:j5,"No data found":"  ","Type to filter options":"  ","Loading options":" ","No options found":"  "},F5="",U5={Clear:F5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},$5="",V5={Clear:$5,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},G5="",H5={Clear:G5,"No data found":" ","Type to filter options":"","Loading options":" ","No options found":""},W5="",q5={Clear:W5,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},Y5="Xa",Z5={Clear:Y5,"No data found":"Khng tm thy d liu","Type to filter options":"Nhp  lc ty chn","Loading options":"","No options found":""},X5="",K5={Clear:X5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},Q5="",J5={Clear:Q5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},Gr="default";Je.addResources("ar",Gr,qM);Je.addResources("ar_IQ",Gr,ZM);Je.addResources("ckb",Gr,KM);Je.addResources("cs",Gr,JM);Je.addResources("da",Gr,t5);Je.addResources("en",Gr,r5);Je.addResources("es",Gr,s5);Je.addResources("es_419",Gr,o5);Je.addResources("fr",Gr,c5);Je.addResources("id",Gr,u5);Je.addResources("km",Gr,p5);Je.addResources("lo",Gr,m5);Je.addResources("my",Gr,y5);Je.addResources("nb",Gr,v5);Je.addResources("nl",Gr,_5);Je.addResources("prs",Gr,T5);Je.addResources("ps",Gr,E5);Je.addResources("pt",Gr,k5);Je.addResources("pt_BR",Gr,M5);Je.addResources("ru",Gr,I5);Je.addResources("sv",Gr,L5);Je.addResources("tet",Gr,z5);Je.addResources("tg",Gr,O5);Je.addResources("uk",Gr,B5);Je.addResources("ur",Gr,U5);Je.addResources("uz_Latn",Gr,V5);Je.addResources("uz_UZ_Cyrl",Gr,H5);Je.addResources("uz_UZ_Latn",Gr,q5);Je.addResources("vi",Gr,Z5);Je.addResources("zh",Gr,K5);Je.addResources("zh_CN",Gr,J5);const{styles:eP,className:tP}={styles:Te.createElement(Dt,{id:"2013783366"},[`.jsx-2013783366{padding:${Gt.dp8} ${Gt.dp12};}`]),className:"jsx-2013783366"},ZT=i=>{let{label:e,active:t,disabled:s,onClick:a,className:l,dataTest:h="dhis2-uicore-multiselectoption",value:r}=i;return Te.createElement("div",{"data-test":h,"data-value":r,"data-label":e,className:Dt.dynamic([["3813980210",[Ve.grey200]]])+" "+(an(l,{disabled:s})||"")},Te.createElement(Sf,{name:e,className:tP,checked:t,label:e,onChange:a,disabled:s,dense:!0}),eP,Te.createElement(Dt,{id:"3813980210",dynamic:[Ve.grey200]},[`div.__jsx-style-dynamic-selector:hover{background-color:${Ve.grey200};}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};ZT.propTypes={label:pe.string.isRequired,value:pe.string.isRequired,active:pe.bool,className:pe.string,dataTest:pe.string,disabled:pe.bool,onClick:pe.func};const iP=(i,e)=>{e.stopPropagation(),e.preventDefault()},Kv=i=>{let{options:e,onChange:t,selected:s,empty:a="",handleFocusInput:l,handleClose:h,dataTest:r}=i;const p=Gv(e);if(Te.Children.count(p)===0)return typeof a=="string"?Te.createElement(Wv,{message:a,dataTest:`${r}-empty`}):a;const m=Te.Children.map(e,g=>{if(!Vv(g))return g;const{value:y,disabled:C}=g.props,b=y===s,T=(k,x)=>{const A={selected:y};x.stopPropagation(),t(A,x),h(),l()},S=b||C;return Te.cloneElement(g,{...g.props,onClick:S?iP:T,active:b})});return Te.createElement(Te.Fragment,null,m)};Kv.propTypes={dataTest:pe.string.isRequired,empty:pe.node,handleClose:pe.func,handleFocusInput:pe.func,options:pe.node,selected:pe.string,onChange:pe.func};const XT=i=>{let{dataTest:e,options:t,onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,placeholder:p,noMatchText:m}=i;return Te.createElement(Hv,{dataTest:e,options:t,onChange:s,selected:a,empty:l,handleClose:h,handleFocusInput:r,placeholder:p,noMatchText:m,Menu:Kv})};XT.propTypes={dataTest:pe.string.isRequired,noMatchText:pe.string.isRequired,empty:pe.node,handleClose:pe.func,handleFocusInput:pe.func,options:pe.node,placeholder:pe.string,selected:pe.string,onChange:pe.func};const KT=i=>{let{options:e,selected:t,className:s}=i;const a=jT(t,e);if(!a){const r=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(r)}const l=a&&a.props.icon,h=a?a.props.label:t;return Te.createElement("div",{className:Dt.dynamic([["1914911415",[Gt.dp8,Gt.dp16,Gt.dp16]]])+" "+(an(s,"root")||"")},l&&Te.createElement("div",{className:Dt.dynamic([["1914911415",[Gt.dp8,Gt.dp16,Gt.dp16]]])+" root-icon"},l),h,Te.createElement(Dt,{id:"1914911415",dynamic:[Gt.dp8,Gt.dp16,Gt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Gt.dp8};width:${Gt.dp16};height:${Gt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};KT.propTypes={className:pe.string,options:pe.node,selected:pe.string};const QT=i=>{let{selected:e,onChange:t,clearable:s,clearText:a,placeholder:l,dataTest:h,prefix:r,options:p,className:m,disabled:g,inputMaxHeight:v="100px"}=i;const y=e&&typeof e=="string",C=b=>{const T={selected:""};b.stopPropagation(),t(T,b)};return Te.createElement("div",{className:Dt.dynamic([["2186325794",[Ve.grey900]],["1331770409",[v]]])+" "+(an("root",m)||"")},Te.createElement(Zv,{prefix:r,dataTest:`${h}-prefix`}),!y&&!r&&Te.createElement(Yv,{placeholder:l,dataTest:`${h}-placeholder`}),y&&Te.createElement("div",{className:Dt.dynamic([["2186325794",[Ve.grey900]],["1331770409",[v]]])+" root-input"},Te.createElement(KT,{selected:e,options:p})),y&&s&&!g&&Te.createElement("div",{className:Dt.dynamic([["2186325794",[Ve.grey900]],["1331770409",[v]]])+" root-right"},Te.createElement(qv,{onClear:C,clearText:a,dataTest:`${h}-clear`})),Te.createElement(Dt,{id:"2186325794",dynamic:[Ve.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Ve.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),Te.createElement(Dt,{id:"1331770409",dynamic:[v]},[`.root-input.__jsx-style-dynamic-selector{max-height:${v};}`]))};QT.propTypes={dataTest:pe.string.isRequired,className:pe.string,clearText:Sl(i=>i.clearable,pe.string),clearable:pe.bool,disabled:pe.bool,inputMaxHeight:pe.string,options:pe.node,placeholder:pe.string,prefix:pe.string,selected:pe.string,onChange:pe.func};const Qv=i=>{let{className:e,selected:t="",tabIndex:s,maxHeight:a,inputMaxHeight:l,onChange:h,onFocus:r,onKeyDown:p,onBlur:m,loading:g,error:v,warning:y,valid:C,disabled:b,children:T,clearable:S,clearText:k,filterable:x,filterPlaceholder:A,placeholder:D,prefix:w,empty:I,loadingText:N,noMatchText:q,initialFocus:Y,dense:X,dataTest:B="dhis2-uicore-singleselect"}=i;const j=x?Te.createElement(XT,{dataTest:B,empty:I,noMatchText:q,placeholder:A}):Te.createElement(Kv,{empty:I,dataTest:B});return Te.createElement("div",{"data-test":B,className:Dt.dynamic([["2180377457",[Gt.dp8]]])+" root"},Te.createElement("div",{className:Dt.dynamic([["2180377457",[Gt.dp8]]])+" root-input"},Te.createElement(Ey,{className:e,selected:t,input:Te.createElement(QT,{clearable:S,clearText:k,dataTest:B,placeholder:D,prefix:w,inputMaxHeight:l}),menu:j,tabIndex:s,maxHeight:a,onChange:h,onFocus:r,onKeyDown:p,onBlur:m,error:v,warning:y,valid:C,disabled:b,initialFocus:Y,dense:X},T,g&&Te.createElement($v,{message:N,dataTest:`${B}-loading`}))),Te.createElement(hT,{error:v,valid:C,warning:y}),Te.createElement(Dt,{id:"2180377457",dynamic:[Gt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};Qv.propTypes={children:pe.node,className:pe.string,clearText:Sl(i=>i.clearable,pe.string),clearable:pe.bool,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,empty:pe.node,error:Cs,filterPlaceholder:pe.string,filterable:pe.bool,initialFocus:pe.bool,inputMaxHeight:pe.string,loading:pe.bool,loadingText:pe.string,maxHeight:pe.string,noMatchText:Sl(i=>i.filterable,pe.string),placeholder:pe.string,prefix:pe.string,selected:pe.string,tabIndex:pe.string,valid:Cs,warning:Cs,onBlur:pe.func,onChange:pe.func,onFocus:pe.func,onKeyDown:pe.func};function rP(i,e,t){return(e=nP(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function nP(i){var e=sP(i,"string");return typeof e=="symbol"?e:e+""}function sP(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const bp=(i,e)=>typeof i=="function"?i(e):i;class ds extends Te.Component{render(){const{className:e,onChange:t,onFocus:s,onKeyDown:a,onBlur:l,required:h,label:r,valid:p,error:m,warning:g,disabled:v,loading:y,selected:C=ds.defaultProps.selected,tabIndex:b,helpText:T,validationText:S,maxHeight:k,inputMaxHeight:x,inputWidth:A,children:D,clearable:w,clearText:I=ds.defaultProps.clearText,filterable:N,filterPlaceholder:q=ds.defaultProps.filterPlaceholder,placeholder:Y,prefix:X,empty:B=ds.defaultProps.empty,loadingText:j=ds.defaultProps.loadingText,noMatchText:O=ds.defaultProps.noMatchText,initialFocus:R,dense:L,dataTest:G=ds.defaultProps.dataTest}=this.props;return Te.createElement(eM,{className:e,dataTest:G,disabled:v,required:h,label:r,helpText:T,validationText:S,error:m,warning:g,valid:p},Te.createElement(xg,{width:A,minWidth:"100px"},Te.createElement(Qv,{selected:C,tabIndex:b,maxHeight:k,inputMaxHeight:x,onChange:t,onFocus:s,onKeyDown:a,onBlur:l,loading:y,error:m,warning:g,valid:p,disabled:v,clearable:w,clearText:bp(I),filterable:N,filterPlaceholder:bp(q),placeholder:Y,prefix:X,empty:bp(B),loadingText:bp(j),noMatchText:bp(O),initialFocus:R,dense:L},D)))}}rP(ds,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>Je.t("Clear"),empty:()=>Je.t("No data found"),filterPlaceholder:()=>Je.t("Type to filter options"),loadingText:()=>Je.t("Loading options"),noMatchText:()=>Je.t("No options found")});ds.propTypes={children:pe.node,className:pe.string,clearText:pe.oneOfType([pe.string,pe.func]),clearable:pe.bool,dataTest:pe.string,dense:pe.bool,disabled:pe.bool,empty:pe.oneOfType([pe.node,pe.func]),error:Cs,filterPlaceholder:pe.oneOfType([pe.node,pe.func]),filterable:pe.bool,helpText:pe.string,initialFocus:pe.bool,inputMaxHeight:pe.string,inputWidth:pe.string,label:pe.string,loading:pe.bool,loadingText:pe.oneOfType([pe.string,pe.func]),maxHeight:pe.string,noMatchText:pe.oneOfType([pe.string,pe.func]),placeholder:pe.string,prefix:pe.string,required:pe.bool,selected:pe.string,tabIndex:pe.string,valid:Cs,validationText:pe.string,warning:Cs,onBlur:pe.func,onChange:pe.func,onFocus:pe.func,onKeyDown:pe.func};const io=i=>{let{label:e,active:t,disabled:s,onClick:a,className:l,dataTest:h="dhis2-uicore-singleselectoption",value:r}=i;return Te.createElement("div",{onClick:p=>a({},p),"data-test":h,"data-value":r,"data-label":e,className:Dt.dynamic([["3808134379",[Ve.grey900,Gt.dp8,Gt.dp12,Ve.grey200,Ve.teal700,Ve.white,Ve.grey500]]])+" "+(an(l,{disabled:s,active:t})||"")},e,Te.createElement(Dt,{id:"3808134379",dynamic:[Ve.grey900,Gt.dp8,Gt.dp12,Ve.grey200,Ve.teal700,Ve.white,Ve.grey500]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Ve.grey900};padding-block:${Gt.dp8};padding-inline:${Gt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Ve.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${Ve.teal700};color:${Ve.white};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${Ve.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};io.propTypes={label:pe.string.isRequired,value:pe.string.isRequired,active:pe.bool,className:pe.string,dataTest:pe.string,disabled:pe.bool,onClick:pe.func};class de extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,de.prototype),e>de.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,s=Number.isFinite;if(typeof e=="number"){if(e===0)return de.__zero();if(de.__isOneDigitInt(e))return 0>e?de.__oneDigit(-e,!0):de.__oneDigit(e,!1);if(!s(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return de.__fromDouble(e)}if(typeof e=="string"){const a=de.__fromString(e);if(a===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return a}if(typeof e=="boolean")return e===!0?de.__oneDigit(1,!1):de.__zero();if(typeof e=="object"){if(e.constructor===de)return e;const a=de.__toPrimitive(e);return de.BigInt(a)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?de.__toStringGeneric(this,e,!1):de.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const S=e.__unsignedDigit(0);return e.sign?-S:S}const s=e.__digit(t-1),a=de.__clz30(s),l=30*t-a;if(1024<l)return e.sign?-1/0:1/0;let h=l-1,r=s,p=t-1;const m=a+3;let g=m===32?0:r<<m;g>>>=12;const v=m-12;let y=12<=m?0:r<<20+m,C=20+m;for(0<v&&0<p&&(p--,r=e.__digit(p),g|=r>>>30-v,y=r<<v+2,C=v+2);0<C&&0<p;)p--,r=e.__digit(p),y|=30<=C?r<<C-30:r>>>30-C,C-=30;const b=de.__decideRounding(e,C,p,r);if((b===1||b===0&&(1&y)==1)&&(y=y+1>>>0,y===0&&(g++,g>>>20!=0&&(g=0,h++,1023<h))))return e.sign?-1/0:1/0;const T=e.sign?-2147483648:0;return h=h+1023<<20,de.__kBitConversionInts[1]=T|h|g,de.__kBitConversionInts[0]=y,de.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?de.__absoluteSubOne(e).__trim():de.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return de.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?de.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let s=t.__unsignedDigit(0);if(s===1)return e;if(s>=de.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const h=1+(0|s/30),r=e.sign&&(1&s)!=0,p=new de(h,r);p.__initializeDigits();const m=1<<s%30;return p.__setDigit(h-1,m),p}let a=null,l=e;for(1&s&&(a=e),s>>=1;s!==0;s>>=1)l=de.multiply(l,l),1&s&&(a===null?a=l:a=de.multiply(a,l));return a}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let s=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&s--;const a=new de(s,e.sign!==t.sign);a.__initializeDigits();for(let l=0;l<e.length;l++)de.__multiplyAccumulate(t,e.__digit(l),a,l);return a.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return de.__zero();const s=e.sign!==t.sign,a=t.__unsignedDigit(0);let l;if(t.length===1&&32767>=a){if(a===1)return s===e.sign?e:de.unaryMinus(e);l=de.__absoluteDivSmall(e,a,null)}else l=de.__absoluteDivLarge(e,t,!0,!1);return l.sign=s,l.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return e;const s=t.__unsignedDigit(0);if(t.length===1&&32767>=s){if(s===1)return de.__zero();const l=de.__absoluteModSmall(e,s);return l===0?de.__zero():de.__oneDigit(l,e.sign)}const a=de.__absoluteDivLarge(e,t,!1,!0);return a.sign=e.sign,a.__trim()}static add(e,t){const s=e.sign;return s===t.sign?de.__absoluteAdd(e,t,s):0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,s):de.__absoluteSub(t,e,!s)}static subtract(e,t){const s=e.sign;return s===t.sign?0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,s):de.__absoluteSub(t,e,!s):de.__absoluteAdd(e,t,s)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__rightShiftByAbsolute(e,t):de.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__leftShiftByAbsolute(e,t):de.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>de.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=de.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<de.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=de.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e.__digit(s)!==t.__digit(s))return!1;return!0}static notEqual(e,t){return!de.equal(e,t)}static bitwiseAnd(e,t){var s=Math.max;if(!e.sign&&!t.sign)return de.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const a=s(e.length,t.length)+1;let l=de.__absoluteSubOne(e,a);const h=de.__absoluteSubOne(t);return l=de.__absoluteOr(l,h,l),de.__absoluteAddOne(l,!0,l).__trim()}return e.sign&&([e,t]=[t,e]),de.__absoluteAndNot(e,de.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var s=Math.max;if(!e.sign&&!t.sign)return de.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const h=s(e.length,t.length),r=de.__absoluteSubOne(e,h),p=de.__absoluteSubOne(t);return de.__absoluteXor(r,p,r).__trim()}const a=s(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let l=de.__absoluteSubOne(t,a);return l=de.__absoluteXor(l,e,l),de.__absoluteAddOne(l,!0,l).__trim()}static bitwiseOr(e,t){var s=Math.max;const a=s(e.length,t.length);if(!e.sign&&!t.sign)return de.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let h=de.__absoluteSubOne(e,a);const r=de.__absoluteSubOne(t);return h=de.__absoluteAnd(h,r,h),de.__absoluteAddOne(h,!0,h).__trim()}e.sign&&([e,t]=[t,e]);let l=de.__absoluteSubOne(t,a);return l=de.__absoluteAndNot(l,e,l),de.__absoluteAddOne(l,!0,l).__trim()}static asIntN(e,t){var s=Math.floor;if(t.length===0)return t;if(e=s(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(e>=de.__kMaxLengthBits)return t;const a=0|(e+29)/30;if(t.length<a)return t;const l=t.__unsignedDigit(a-1),h=1<<(e-1)%30;if(t.length===a&&l<h)return t;if((l&h)!==h)return de.__truncateToNBits(e,t);if(!t.sign)return de.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(l&h-1)){for(let r=a-2;0<=r;r--)if(t.__digit(r)!==0)return de.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===a&&l===h?t:de.__truncateToNBits(e,t)}return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var s=Math.floor;if(t.length===0)return t;if(e=s(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(t.sign){if(e>de.__kMaxLengthBits)throw new RangeError("BigInt too big");return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=de.__kMaxLengthBits)return t;const a=0|(e+29)/30;if(t.length<a)return t;const l=e%30;return t.length==a&&(l===0||!(t.__digit(a-1)>>>l))?t:de.__truncateToNBits(e,t)}static ADD(e,t){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)&&de.__isBigInt(t))return de.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return de.__compare(e,t,0)}static LE(e,t){return de.__compare(e,t,1)}static GT(e,t){return de.__compare(e,t,2)}static GE(e,t){return de.__compare(e,t,3)}static EQ(e,t){for(;;){if(de.__isBigInt(e))return de.__isBigInt(t)?de.equal(e,t):de.EQ(t,e);if(typeof e=="number"){if(de.__isBigInt(t))return de.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="string"){if(de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.equal(e,t);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="boolean"){if(de.__isBigInt(t))return de.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="symbol"){if(de.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==de)return e==t;e=de.__toPrimitive(e)}else return e==t}}static NE(e,t){return!de.EQ(e,t)}static DataViewGetBigInt64(e,t,s=!1){return de.asIntN(64,de.DataViewGetBigUint64(e,t,s))}static DataViewGetBigUint64(e,t,s=!1){const[a,l]=s?[4,0]:[0,4],h=e.getUint32(t+a,s),r=e.getUint32(t+l,s),p=new de(3,!1);return p.__setDigit(0,1073741823&r),p.__setDigit(1,(268435455&h)<<2|r>>>30),p.__setDigit(2,h>>>28),p.__trim()}static DataViewSetBigInt64(e,t,s,a=!1){de.DataViewSetBigUint64(e,t,s,a)}static DataViewSetBigUint64(e,t,s,a=!1){s=de.asUintN(64,s);let l=0,h=0;if(0<s.length&&(h=s.__digit(0),1<s.length)){const m=s.__digit(1);h|=m<<30,l=m>>>2,2<s.length&&(l|=s.__digit(2)<<28)}const[r,p]=a?[4,0]:[0,4];e.setUint32(t+r,l,a),e.setUint32(t+p,h,a)}static __zero(){return new de(0,!1)}static __oneDigit(e,t){const s=new de(1,t);return s.__setDigit(0,e),s}__copy(){const e=new de(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,s,a){if(0<t)return-1;let l;if(0>t)l=-t-1;else{if(s===0)return-1;s--,a=e.__digit(s),l=29}let h=1<<l;if(!(a&h))return-1;if(h-=1,(a&h)!=0)return 1;for(;0<s;)if(s--,e.__digit(s)!==0)return 1;return 0}static __fromDouble(e){de.__kBitConversionDouble[0]=e;const t=2047&de.__kBitConversionInts[1]>>>20,s=t-1023,a=(0|s/30)+1,l=new de(a,0>e);let h=1048575&de.__kBitConversionInts[1]|1048576,r=de.__kBitConversionInts[0];const p=20,m=s%30;let g,v=0;if(m<20){const y=p-m;v=y+32,g=h>>>y,h=h<<32-y|r>>>y,r<<=32-y}else if(m===20)v=32,g=h,h=r,r=0;else{const y=m-p;v=32-y,g=h<<y|r>>>32-y,h=r<<y,r=0}l.__setDigit(a-1,g);for(let y=a-2;0<=y;y--)0<v?(v-=30,g=h>>>2,h=h<<30|r>>>2,r<<=30):g=0,l.__setDigit(y,g);return l.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let s=0;const a=e.length;let l=0;if(l===a)return de.__zero();let h=e.charCodeAt(l);for(;de.__isWhitespace(h);){if(++l===a)return de.__zero();h=e.charCodeAt(l)}if(h===43){if(++l===a)return null;h=e.charCodeAt(l),s=1}else if(h===45){if(++l===a)return null;h=e.charCodeAt(l),s=-1}if(t===0){if(t=10,h===48){if(++l===a)return de.__zero();if(h=e.charCodeAt(l),h===88||h===120){if(t=16,++l===a)return null;h=e.charCodeAt(l)}else if(h===79||h===111){if(t=8,++l===a)return null;h=e.charCodeAt(l)}else if(h===66||h===98){if(t=2,++l===a)return null;h=e.charCodeAt(l)}}}else if(t===16&&h===48){if(++l===a)return de.__zero();if(h=e.charCodeAt(l),h===88||h===120){if(++l===a)return null;h=e.charCodeAt(l)}}if(s!=0&&t!==10)return null;for(;h===48;){if(++l===a)return de.__zero();h=e.charCodeAt(l)}const r=a-l;let p=de.__kMaxBitsPerChar[t],m=de.__kBitsPerCharTableMultiplier-1;if(r>1073741824/p)return null;const g=p*r+m>>>de.__kBitsPerCharTableShift,v=new de(0|(g+29)/30,!1),y=10>t?t:10,C=10<t?t-10:0;if(t&t-1){v.__initializeDigits();let b=!1,T=0;do{let S=0,k=1;for(;;){let A;if(h-48>>>0<y)A=h-48;else if((32|h)-97>>>0<C)A=(32|h)-87;else{b=!0;break}const D=k*t;if(1073741823<D)break;if(k=D,S=S*t+A,T++,++l===a){b=!0;break}h=e.charCodeAt(l)}m=30*de.__kBitsPerCharTableMultiplier-1;const x=0|(p*T+m>>>de.__kBitsPerCharTableShift)/30;v.__inplaceMultiplyAdd(k,S,x)}while(!b)}else{p>>=de.__kBitsPerCharTableShift;const b=[],T=[];let S=!1;do{let k=0,x=0;for(;;){let A;if(h-48>>>0<y)A=h-48;else if((32|h)-97>>>0<C)A=(32|h)-87;else{S=!0;break}if(x+=p,k=k<<p|A,++l===a){S=!0;break}if(h=e.charCodeAt(l),30<x+p)break}b.push(k),T.push(x)}while(!S);de.__fillFromParts(v,b,T)}if(l!==a){if(!de.__isWhitespace(h))return null;for(l++;l<a;l++)if(h=e.charCodeAt(l),!de.__isWhitespace(h))return null}return v.sign=s==-1,v.__trim()}static __fillFromParts(e,t,s){let a=0,l=0,h=0;for(let r=t.length-1;0<=r;r--){const p=t[r],m=s[r];l|=p<<h,h+=m,h===30?(e.__setDigit(a++,l),h=0,l=0):30<h&&(e.__setDigit(a++,1073741823&l),h-=30,l=p>>>m-h)}if(l!==0){if(a>=e.length)throw new Error("implementation bug");e.__setDigit(a++,l)}for(;a<e.length;a++)e.__setDigit(a,0)}static __toStringBasePowerOfTwo(e,t){const s=e.length;let a=t-1;a=(85&a>>>1)+(85&a),a=(51&a>>>2)+(51&a),a=(15&a>>>4)+(15&a);const l=a,h=t-1,r=e.__digit(s-1),p=de.__clz30(r);let m=0|(30*s-p+l-1)/l;if(e.sign&&m++,268435456<m)throw new Error("string too long");const g=Array(m);let v=m-1,y=0,C=0;for(let T=0;T<s-1;T++){const S=e.__digit(T),k=(y|S<<C)&h;g[v--]=de.__kConversionChars[k];const x=l-C;for(y=S>>>x,C=30-x;C>=l;)g[v--]=de.__kConversionChars[y&h],y>>>=l,C-=l}const b=(y|r<<C)&h;for(g[v--]=de.__kConversionChars[b],y=r>>>l-C;y!==0;)g[v--]=de.__kConversionChars[y&h],y>>>=l;if(e.sign&&(g[v--]="-"),v!=-1)throw new Error("implementation bug");return g.join("")}static __toStringGeneric(e,t,s){const a=e.length;if(a===0)return"";if(a===1){let T=e.__unsignedDigit(0).toString(t);return s===!1&&e.sign&&(T="-"+T),T}const l=30*a-de.__clz30(e.__digit(a-1)),h=de.__kMaxBitsPerChar[t],r=h-1;let p=l*de.__kBitsPerCharTableMultiplier;p+=r-1,p=0|p/r;const m=p+1>>1,g=de.exponentiate(de.__oneDigit(t,!1),de.__oneDigit(m,!1));let v,y;const C=g.__unsignedDigit(0);if(g.length===1&&32767>=C){v=new de(e.length,!1),v.__initializeDigits();let T=0;for(let S=2*e.length-1;0<=S;S--){const k=T<<15|e.__halfDigit(S);v.__setHalfDigit(S,0|k/C),T=0|k%C}y=T.toString(t)}else{const T=de.__absoluteDivLarge(e,g,!0,!0);v=T.quotient;const S=T.remainder.__trim();y=de.__toStringGeneric(S,t,!0)}v.__trim();let b=de.__toStringGeneric(v,t,!0);for(;y.length<m;)y="0"+y;return s===!1&&e.sign&&(b="-"+b),b+y}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const s=e.sign;if(s!==t.sign)return de.__unequalSign(s);const a=de.__absoluteCompare(e,t);return 0<a?de.__absoluteGreater(s):0>a?de.__absoluteLess(s):0}static __compareToNumber(e,t){if(de.__isOneDigitInt(t)){const s=e.sign,a=0>t;if(s!==a)return de.__unequalSign(s);if(e.length===0){if(a)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return de.__absoluteGreater(s);const l=Math.abs(t),h=e.__unsignedDigit(0);return h>l?de.__absoluteGreater(s):h<l?de.__absoluteLess(s):0}return de.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const s=e.sign;if(s!==0>t)return de.__unequalSign(s);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;de.__kBitConversionDouble[0]=t;const a=2047&de.__kBitConversionInts[1]>>>20;if(a==2047)throw new Error("implementation bug: handled elsewhere");const l=a-1023;if(0>l)return de.__absoluteGreater(s);const h=e.length;let r=e.__digit(h-1);const p=de.__clz30(r),m=30*h-p,g=l+1;if(m<g)return de.__absoluteLess(s);if(m>g)return de.__absoluteGreater(s);let v=1048576|1048575&de.__kBitConversionInts[1],y=de.__kBitConversionInts[0];const C=20,b=29-p;if(b!==(0|(m-1)%30))throw new Error("implementation bug");let T,S=0;if(20>b){const k=C-b;S=k+32,T=v>>>k,v=v<<32-k|y>>>k,y<<=32-k}else if(b===20)S=32,T=v,v=y,y=0;else{const k=b-C;S=32-k,T=v<<k|y>>>32-k,v=y<<k,y=0}if(r>>>=0,T>>>=0,r>T)return de.__absoluteGreater(s);if(r<T)return de.__absoluteLess(s);for(let k=h-2;0<=k;k--){0<S?(S-=30,T=v>>>2,v=v<<30|y>>>2,y<<=30):T=0;const x=e.__unsignedDigit(k);if(x>T)return de.__absoluteGreater(s);if(x<T)return de.__absoluteLess(s)}if(v!==0||y!==0){if(S===0)throw new Error("implementation bug");return de.__absoluteLess(s)}return 0}static __equalToNumber(e,t){var s=Math.abs;return de.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===s(t):de.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,s){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(s){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(de.__isBigInt(e)&&typeof t=="string")return t=de.__fromString(t),t!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),s);if(typeof e=="string"&&de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),s);if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)){if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToBigInt(e,t),s);if(typeof t!="number")throw new Error("implementation bug");return de.__comparisonResultToBool(de.__compareToNumber(e,t),s)}if(typeof e!="number")throw new Error("implementation bug");if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToNumber(t,e),2^s);if(typeof t!="number")throw new Error("implementation bug");return s===0?e<t:s===1?e<=t:s===2?e>t:s===3?e>=t:void 0}__clzmsd(){return de.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,s){if(e.length<t.length)return de.__absoluteAdd(t,e,s);if(e.length===0)return e;if(t.length===0)return e.sign===s?e:de.unaryMinus(e);let a=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&a++;const l=new de(a,s);let h=0,r=0;for(;r<t.length;r++){const p=e.__digit(r)+t.__digit(r)+h;h=p>>>30,l.__setDigit(r,1073741823&p)}for(;r<e.length;r++){const p=e.__digit(r)+h;h=p>>>30,l.__setDigit(r,1073741823&p)}return r<l.length&&l.__setDigit(r,h),l.__trim()}static __absoluteSub(e,t,s){if(e.length===0)return e;if(t.length===0)return e.sign===s?e:de.unaryMinus(e);const a=new de(e.length,s);let l=0,h=0;for(;h<t.length;h++){const r=e.__digit(h)-t.__digit(h)-l;l=1&r>>>30,a.__setDigit(h,1073741823&r)}for(;h<e.length;h++){const r=e.__digit(h)-l;l=1&r>>>30,a.__setDigit(h,1073741823&r)}return a.__trim()}static __absoluteAddOne(e,t,s=null){const a=e.length;s===null?s=new de(a,t):s.sign=t;let l=1;for(let h=0;h<a;h++){const r=e.__digit(h)+l;l=r>>>30,s.__setDigit(h,1073741823&r)}return l!=0&&s.__setDigitGrow(a,1),s}static __absoluteSubOne(e,t){const s=e.length;t=t||s;const a=new de(t,!1);let l=1;for(let h=0;h<s;h++){const r=e.__digit(h)-l;l=1&r>>>30,a.__setDigit(h,1073741823&r)}if(l!=0)throw new Error("implementation bug");for(let h=s;h<t;h++)a.__setDigit(h,0);return a}static __absoluteAnd(e,t,s=null){let a=e.length,l=t.length,h=l;if(a<l){h=a;const m=e,g=a;e=t,a=l,t=m,l=g}let r=h;s===null?s=new de(r,!1):r=s.length;let p=0;for(;p<h;p++)s.__setDigit(p,e.__digit(p)&t.__digit(p));for(;p<r;p++)s.__setDigit(p,0);return s}static __absoluteAndNot(e,t,s=null){const a=e.length,l=t.length;let h=l;a<l&&(h=a);let r=a;s===null?s=new de(r,!1):r=s.length;let p=0;for(;p<h;p++)s.__setDigit(p,e.__digit(p)&~t.__digit(p));for(;p<a;p++)s.__setDigit(p,e.__digit(p));for(;p<r;p++)s.__setDigit(p,0);return s}static __absoluteOr(e,t,s=null){let a=e.length,l=t.length,h=l;if(a<l){h=a;const m=e,g=a;e=t,a=l,t=m,l=g}let r=a;s===null?s=new de(r,!1):r=s.length;let p=0;for(;p<h;p++)s.__setDigit(p,e.__digit(p)|t.__digit(p));for(;p<a;p++)s.__setDigit(p,e.__digit(p));for(;p<r;p++)s.__setDigit(p,0);return s}static __absoluteXor(e,t,s=null){let a=e.length,l=t.length,h=l;if(a<l){h=a;const m=e,g=a;e=t,a=l,t=m,l=g}let r=a;s===null?s=new de(r,!1):r=s.length;let p=0;for(;p<h;p++)s.__setDigit(p,e.__digit(p)^t.__digit(p));for(;p<a;p++)s.__setDigit(p,e.__digit(p));for(;p<r;p++)s.__setDigit(p,0);return s}static __absoluteCompare(e,t){const s=e.length-t.length;if(s!=0)return s;let a=e.length-1;for(;0<=a&&e.__digit(a)===t.__digit(a);)a--;return 0>a?0:e.__unsignedDigit(a)>t.__unsignedDigit(a)?1:-1}static __multiplyAccumulate(e,t,s,a){if(t===0)return;const l=32767&t,h=t>>>15;let r=0,p=0;for(let m,g=0;g<e.length;g++,a++){m=s.__digit(a);const v=e.__digit(g),y=32767&v,C=v>>>15,b=de.__imul(y,l),T=de.__imul(y,h),S=de.__imul(C,l),k=de.__imul(C,h);m+=p+b+r,r=m>>>30,m&=1073741823,m+=((32767&T)<<15)+((32767&S)<<15),r+=m>>>30,p=k+(T>>>15)+(S>>>15),s.__setDigit(a,1073741823&m)}for(;r!=0||p!==0;a++){let m=s.__digit(a);m+=r+p,p=0,r=m>>>30,s.__setDigit(a,1073741823&m)}}static __internalMultiplyAdd(e,t,s,a,l){let h=s,r=0;for(let p=0;p<a;p++){const m=e.__digit(p),g=de.__imul(32767&m,t),v=de.__imul(m>>>15,t),y=g+((32767&v)<<15)+r+h;h=y>>>30,r=v>>>15,l.__setDigit(p,1073741823&y)}if(l.length>a)for(l.__setDigit(a++,h+r);a<l.length;)l.__setDigit(a++,0);else if(h+r!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,s){s>this.length&&(s=this.length);const a=32767&e,l=e>>>15;let h=0,r=t;for(let p=0;p<s;p++){const m=this.__digit(p),g=32767&m,v=m>>>15,y=de.__imul(g,a),C=de.__imul(g,l),b=de.__imul(v,a),T=de.__imul(v,l);let S=r+y+h;h=S>>>30,S&=1073741823,S+=((32767&C)<<15)+((32767&b)<<15),h+=S>>>30,r=T+(C>>>15)+(b>>>15),this.__setDigit(p,1073741823&S)}if(h!=0||r!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,s=null){s===null&&(s=new de(e.length,!1));let a=0;for(let l,h=2*e.length-1;0<=h;h-=2){l=(a<<15|e.__halfDigit(h))>>>0;const r=0|l/t;a=0|l%t,l=(a<<15|e.__halfDigit(h-1))>>>0;const p=0|l/t;a=0|l%t,s.__setDigit(h>>>1,r<<15|p)}return s}static __absoluteModSmall(e,t){let s=0;for(let a=2*e.length-1;0<=a;a--)s=0|((s<<15|e.__halfDigit(a))>>>0)%t;return s}static __absoluteDivLarge(e,t,s,a){const l=t.__halfDigitLength(),h=t.length,r=e.__halfDigitLength()-l;let p=null;s&&(p=new de(r+2>>>1,!1),p.__initializeDigits());const m=new de(l+2>>>1,!1);m.__initializeDigits();const g=de.__clz15(t.__halfDigit(l-1));0<g&&(t=de.__specialLeftShift(t,g,0));const v=de.__specialLeftShift(e,g,1),y=t.__halfDigit(l-1);let C=0;for(let b,T=r;0<=T;T--){b=32767;const S=v.__halfDigit(T+l);if(S!==y){const x=(S<<15|v.__halfDigit(T+l-1))>>>0;b=0|x/y;let A=0|x%y;const D=t.__halfDigit(l-2),w=v.__halfDigit(T+l-2);for(;de.__imul(b,D)>>>0>(A<<16|w)>>>0&&(b--,A+=y,!(32767<A)););}de.__internalMultiplyAdd(t,b,0,h,m);let k=v.__inplaceSub(m,T,l+1);k!==0&&(k=v.__inplaceAdd(t,T,l),v.__setHalfDigit(T+l,32767&v.__halfDigit(T+l)+k),b--),s&&(1&T?C=b<<15:p.__setDigit(T>>>1,C|b))}if(a)return v.__inplaceRightShift(g),s?{quotient:p,remainder:v}:v;if(s)return p;throw new Error("unreachable")}static __clz15(e){return de.__clz30(e)-15}__inplaceAdd(e,t,s){let a=0;for(let l=0;l<s;l++){const h=this.__halfDigit(t+l)+e.__halfDigit(l)+a;a=h>>>15,this.__setHalfDigit(t+l,32767&h)}return a}__inplaceSub(e,t,s){let a=0;if(1&t){t>>=1;let l=this.__digit(t),h=32767&l,r=0;for(;r<s-1>>>1;r++){const g=e.__digit(r),v=(l>>>15)-(32767&g)-a;a=1&v>>>15,this.__setDigit(t+r,(32767&v)<<15|32767&h),l=this.__digit(t+r+1),h=(32767&l)-(g>>>15)-a,a=1&h>>>15}const p=e.__digit(r),m=(l>>>15)-(32767&p)-a;if(a=1&m>>>15,this.__setDigit(t+r,(32767&m)<<15|32767&h),t+r+1>=this.length)throw new RangeError("out of bounds");!(1&s)&&(l=this.__digit(t+r+1),h=(32767&l)-(p>>>15)-a,a=1&h>>>15,this.__setDigit(t+e.length,1073709056&l|32767&h))}else{t>>=1;let l=0;for(;l<e.length-1;l++){const g=this.__digit(t+l),v=e.__digit(l),y=(32767&g)-(32767&v)-a;a=1&y>>>15;const C=(g>>>15)-(v>>>15)-a;a=1&C>>>15,this.__setDigit(t+l,(32767&C)<<15|32767&y)}const h=this.__digit(t+l),r=e.__digit(l),p=(32767&h)-(32767&r)-a;a=1&p>>>15;let m=0;!(1&s)&&(m=(h>>>15)-(r>>>15)-a,a=1&m>>>15),this.__setDigit(t+l,(32767&m)<<15|32767&p)}return a}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const s=this.length-1;for(let a=0;a<s;a++){const l=this.__digit(a+1);this.__setDigit(a,1073741823&l<<30-e|t),t=l>>>e}this.__setDigit(s,t)}static __specialLeftShift(e,t,s){const a=e.length,l=new de(a+s,!1);if(t===0){for(let r=0;r<a;r++)l.__setDigit(r,e.__digit(r));return 0<s&&l.__setDigit(a,0),l}let h=0;for(let r=0;r<a;r++){const p=e.__digit(r);l.__setDigit(r,1073741823&p<<t|h),h=p>>>30-t}return 0<s&&l.__setDigit(a,h),l}static __leftShiftByAbsolute(e,t){const s=de.__toShiftAmount(t);if(0>s)throw new RangeError("BigInt too big");const a=0|s/30,l=s%30,h=e.length,r=l!==0&&e.__digit(h-1)>>>30-l!=0,p=h+a+(r?1:0),m=new de(p,e.sign);if(l===0){let g=0;for(;g<a;g++)m.__setDigit(g,0);for(;g<p;g++)m.__setDigit(g,e.__digit(g-a))}else{let g=0;for(let v=0;v<a;v++)m.__setDigit(v,0);for(let v=0;v<h;v++){const y=e.__digit(v);m.__setDigit(v+a,1073741823&y<<l|g),g=y>>>30-l}if(r)m.__setDigit(h+a,g);else if(g!==0)throw new Error("implementation bug")}return m.__trim()}static __rightShiftByAbsolute(e,t){const s=e.length,a=e.sign,l=de.__toShiftAmount(t);if(0>l)return de.__rightShiftByMaximum(a);const h=0|l/30,r=l%30;let p=s-h;if(0>=p)return de.__rightShiftByMaximum(a);let m=!1;if(a){if(e.__digit(h)&(1<<r)-1)m=!0;else for(let v=0;v<h;v++)if(e.__digit(v)!==0){m=!0;break}}m&&r===0&&!~e.__digit(s-1)&&p++;let g=new de(p,a);if(r===0){g.__setDigit(p-1,0);for(let v=h;v<s;v++)g.__setDigit(v-h,e.__digit(v))}else{let v=e.__digit(h)>>>r;const y=s-h-1;for(let C=0;C<y;C++){const b=e.__digit(C+h+1);g.__setDigit(C,1073741823&b<<30-r|v),v=b>>>r}g.__setDigit(y,v)}return m&&(g=de.__absoluteAddOne(g,!0,g)),g.__trim()}static __rightShiftByMaximum(e){return e?de.__oneDigit(1,!0):de.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>de.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===de)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const l=e[Symbol.toPrimitive];if(l){const h=l(t);if(typeof h!="object")return h;throw new TypeError("Cannot convert object to primitive value")}}const s=e.valueOf;if(s){const l=s.call(e);if(typeof l!="object")return l}const a=e.toString;if(a){const l=a.call(e);if(typeof l!="object")return l}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return de.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===de}static __truncateToNBits(e,t){const s=0|(e+29)/30,a=new de(s,t.sign),l=s-1;for(let r=0;r<l;r++)a.__setDigit(r,t.__digit(r));let h=t.__digit(l);if(e%30!=0){const r=32-e%30;h=h<<r>>>r}return a.__setDigit(l,h),a.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,s){var a=Math.min;const l=0|(e+29)/30,h=new de(l,s);let r=0;const p=l-1;let m=0;for(const C=a(p,t.length);r<C;r++){const b=0-t.__digit(r)-m;m=1&b>>>30,h.__setDigit(r,1073741823&b)}for(;r<p;r++)h.__setDigit(r,0|1073741823&-m);let g=p<t.length?t.__digit(p):0;const v=e%30;let y;if(v==0)y=0-g-m,y&=1073741823;else{const C=32-v;g=g<<C>>>C;const b=1<<32-C;y=b-g-m,y&=b-1}return h.__setDigit(p,y),h.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const s=e>>>1,a=this.__digit(s),l=1&e?32767&a|t<<15:1073709056&a|32767&t;this.__setDigit(s,l)}static __digitPow(e,t){let s=1;for(;0<t;)1&t&&(s*=e),t>>>=1,e*=e;return s}static __isOneDigitInt(e){return(1073741823&e)===e}}de.__kMaxLength=33554432,de.__kMaxLengthBits=de.__kMaxLength<<5,de.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],de.__kBitsPerCharTableShift=5,de.__kBitsPerCharTableMultiplier=1<<de.__kBitsPerCharTableShift,de.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],de.__kBitConversionBuffer=new ArrayBuffer(8),de.__kBitConversionDouble=new Float64Array(de.__kBitConversionBuffer),de.__kBitConversionInts=new Int32Array(de.__kBitConversionBuffer),de.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},de.__imul=Math.imul||function(i,e){return 0|i*e};const H0={};function Zo(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const s=Object.getOwnPropertyDescriptor(i,t);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(i,t,s))}for(const t of Object.getOwnPropertyNames(i.prototype)){const s=Object.getOwnPropertyDescriptor(i.prototype,t);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(i.prototype,t,s))}W0(e,i),W0(`${e}.prototype`,i.prototype)}function W0(i,e){const t=`%${i}%`;if(H0[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);H0[t]=e}function zi(i){return H0[i]}const Ri="slot-epochNanoSeconds",ic="slot-timezone-identifier",ni="slot-year",hi="slot-month",gi="slot-day",Gi="slot-hour",Hi="slot-minute",Wi="slot-second",qi="slot-millisecond",Yi="slot-microsecond",Zi="slot-nanosecond",St="slot-calendar",Ts="slot-cached-instant",Mr="slot-time-zone",Ps="slot-years",es="slot-months",qs="slot-weeks",Is="slot-days",Ds="slot-hours",Ls="slot-minutes",Rs="slot-seconds",zs="slot-milliseconds",Ns="slot-microseconds",Os="slot-nanoseconds",Tn="slot-calendar-identifier",JT=new WeakMap;function Xo(i){JT.set(i,Object.create(null))}function Jv(i){return JT.get(i)}function Kn(i,...e){if(!i||typeof i!="object")return!1;const t=Jv(i);return!!t&&e.reduce((s,a)=>s&&a in t,!0)}function Z(i,e){const t=Jv(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function Ji(i,e,t){Jv(i)[e]=t}const q_=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,aP=new RegExp(`(?:(?:${q_.source})(?:\\/(?:${q_.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),Y_=/[A-Za-z0-9]{3,8}/,oP=new RegExp(`(?:${Y_.source}(?:-${Y_.source})*)`),eC=/(?:[+\u2212-]\d{6}|\d{4})/,Og=/(?:0[1-9]|1[0-2])/,q0=/(?:0[1-9]|[12]\d|3[01])/,lP=new RegExp(`(${eC.source})(?:-(${Og.source})-(${q0.source})|(${Og.source})(${q0.source}))`),tC=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,iC=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,rC=new RegExp(`(?:([zZ])|(?:${iC.source})?)(?:\\[(${aP.source})\\])?`),nC=new RegExp(`\\[u-ca=(${oP.source})\\]`),cP=new RegExp(`^${lP.source}(?:(?:T|\\s+)${tC.source})?${rC.source}(?:${nC.source})?$`,"i"),hP=new RegExp(`^T?${tC.source}(?:${rC.source})?(?:${nC.source})?$`,"i"),uP=new RegExp(`^(${eC.source})-?(${Og.source})$`),dP=new RegExp(`^(?:--)?(${Og.source})-?(${q0.source})$`),a0=/(\d+)(?:[.,](\d{1,9}))?/,pP=new RegExp(`(?:${a0.source}H)?(?:${a0.source}M)?(?:${a0.source}S)?`),fP=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${pP.source})?$`,"i"),sC=Array.prototype.includes,eb=Array.prototype.push,aC=globalThis.Intl.DateTimeFormat,mP=Math.min,gP=Math.max,_r=Math.abs,Yn=Math.floor,Zp=Math.sign,Ou=Math.trunc,kf=Number.isNaN,is=Number.isFinite,yP=Number,Af=String,xP=Number.MAX_SAFE_INTEGER,oC=Object.assign,ms=Object.create,vP=Object.getOwnPropertyDescriptor,bP=Object.is,tb=Reflect.apply,En=de.BigInt(0),ib=de.BigInt(1),mh=de.BigInt(60),Pr=de.BigInt(1e3),Ua=de.BigInt(1e6),kl=de.BigInt(1e9),_P=de.BigInt(-1),pc=de.multiply(de.BigInt(86400),kl),Xp=de.multiply(de.BigInt(-86400),de.BigInt(1e17)),Kp=de.multiply(de.BigInt(86400),de.BigInt(1e17)),lC=de.multiply(de.BigInt(-388152),de.BigInt(1e13)),wP=de.multiply(pc,de.BigInt(3660)),cC=de.multiply(pc,de.BigInt(366)),hC=de.multiply(pc,de.BigInt(14)),TP=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function uC(i){if(typeof i!="number"||!is(i))return!1;const e=_r(i);return Yn(e)===e}function qr(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Qp(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return yP(i)}function Ir(i){const e=Qp(i);if(kf(e))return 0;const t=Ou(e);return e===0?0:t}function Fi(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return Af(i)}function Ur(i){const e=Ir(i);if(!is(e))throw new RangeError("infinity is out of range");return e}function Jp(i,e){const t=Ir(i);if(!is(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Wn(i){const e=Qp(i);if(kf(e))return 0;if(!is(e))throw new RangeError("infinity is out of range");if(!uC(e))throw new RangeError(`unsupported fractional value ${e}`);return Ir(e)}function Hn(i,e){return{quotient:de.divide(i,e),remainder:de.remainder(i,e)}}function rb(i){return de.lessThan(i,En)?de.multiply(i,_P):i}function Y0(i,...e){return eb.apply(i,e),i}const Z_=new Map([["year",Ur],["month",Jp],["monthCode",Fi],["day",Jp],["hour",Ur],["minute",Ur],["second",Ur],["millisecond",Ur],["microsecond",Ur],["nanosecond",Ur],["years",Wn],["months",Wn],["weeks",Wn],["days",Wn],["hours",Wn],["minutes",Wn],["seconds",Wn],["milliseconds",Wn],["microseconds",Wn],["nanoseconds",Wn],["era",Fi],["eraYear",Ir],["offset",Fi]]),CP=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),hd=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],jg=new Map(hd.map(i=>[i[0],i[1]])),EP=new Map(hd.map(([i,e])=>[e,i])),X_=hd.map(([,i])=>i),K_=Array.from(jg.keys()).sort(),Q_=new Map;function dC(i){let e=Q_.get(i);return e===void 0&&(e=new aC("en-us",{timeZone:Af(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Q_.set(i,e)),e}function Fn(i){return Kn(i,Ri)&&!Kn(i,Mr,St)}function Io(i){return Kn(i,ic)}function wn(i){return Kn(i,Tn)}function gn(i){return Kn(i,Ps,es,Is,Ds,Ls,Rs,zs,Ns,Os)}function pr(i){return Kn(i,"slot-date-brand")}function yn(i){return Kn(i,Gi,Hi,Wi,qi,Yi,Zi)&&!Kn(i,ni,hi,gi)}function Qi(i){return Kn(i,ni,hi,gi,Gi,Hi,Wi,qi,Yi,Zi)}function Er(i){return Kn(i,"slot-year-month-brand")}function ts(i){return Kn(i,"slot-month-day-brand")}function wi(i){return Kn(i,Ri,Mr,St)}function ud(i){if(Kn(i,St)||Kn(i,Mr))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function pC(i){let{ianaName:e,offset:t,z:s}=function(l){try{let h=hb(l);if(h)return{ianaName:h.toString()}}catch{}try{const h=Ko(l);if(h.z||h.offset||h.ianaName)return h}catch{}throw new RangeError(`Invalid time zone: ${l}`)}(i);return e||(s?"UTC":t)}function Mf(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function Ko(i){const e=cP.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]===""&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const s=Ir(t),a=Ir(e[2]||e[4]),l=Ir(e[3]||e[5]),h=Ir(e[6]),r=e[6]!==void 0,p=Ir(e[7]||e[10]);let m=Ir(e[8]||e[11]);m===60&&(m=59);const g=(e[9]||e[12])+"000000000",v=Ir(g.slice(0,3)),y=Ir(g.slice(3,6)),C=Ir(g.slice(6,9));let b,T=!1;if(e[13])b=void 0,T=!0;else if(e[14]&&e[15]){const x=e[14]==="-"||e[14]===""?"-":"+",A=e[15]||"00",D=e[16]||"00",w=e[17]||"00";let I=e[18]||"0";if(b=`${x}${A}:${D}`,+I){for(;I.endsWith("0");)I=I.slice(0,-1);b+=`:${w}.${I}`}else+w&&(b+=`:${w}`);b==="-00:00"&&(b="+00:00")}let S=e[19];if(S)try{S=hb(S).toString()}catch{}const k=e[20];return fb(s,a,l,h,p,m,v,y,C),{year:s,month:a,day:l,hasTime:r,hour:h,minute:p,second:m,millisecond:v,microsecond:y,nanosecond:C,ianaName:S,offset:b,z:T,calendar:k}}function fC(i){const e=uP.exec(i);let t,s,a,l;if(e){let h=e[1];if(h[0]===""&&(h=`-${h.slice(1)}`),h==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=Ir(h),s=Ir(e[2]),a=e[3]}else{let h;if({year:t,month:s,calendar:a,day:l,z:h}=Ko(i),h)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:s,calendar:a,referenceISODay:l}}function mC(i){const e=dP.exec(i);let t,s,a,l;if(e)t=Ir(e[1]),s=Ir(e[2]);else{let h;if({month:t,day:s,calendar:a,year:l,z:h}=Ko(i),h)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:s,calendar:a,referenceISOYear:l}}function SP(i){const e=fP.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(S=>S===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]===""?-1:1,s=Ir(e[2])*t,a=Ir(e[3])*t,l=Ir(e[4])*t,h=Ir(e[5])*t,r=Ir(e[6])*t;let p=e[7],m=Ir(e[8])*t,g=e[9],v=Ir(e[10])*t;const y=e[11]+"000000000";let C=Ir(y.slice(0,3))*t,b=Ir(y.slice(3,6))*t,T=Ir(y.slice(6,9))*t;return p=p?t*Ir(p)/10**p.length:0,g=g?t*Ir(g)/10**g.length:0,{minutes:m,seconds:v,milliseconds:C,microseconds:b,nanoseconds:T}=function(k,x,A,D,w,I,N){let q=k,Y=x,X=A,B=D,j=w,O=I,R=N;if(q!==0){[Y,X,B,j,O,R].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*q;Y=Ou(L),X=L%1}if(X!==0){[B,j,O,R].forEach($=>{if($!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*X;B=Ou(L);const G=L%1;if(G!==0){const $=1e3*G;j=Ou($);const F=$%1;if(F!==0){const H=1e3*F;O=Ou(H);const W=H%1;W!==0&&(R=Ou(1e3*W))}}}return{minutes:Y,seconds:B,milliseconds:j,microseconds:O,nanoseconds:R}}(p,m,g,v,C,b,T),Fy(s,a,l,h,r,m,v,C,b,T),{years:s,months:a,weeks:l,days:h,hours:r,minutes:m,seconds:v,milliseconds:C,microseconds:b,nanoseconds:T}}function kP(i){let{year:e,month:t,day:s,hour:a,minute:l,second:h,millisecond:r,microsecond:p,nanosecond:m,offset:g,z:v}=function(T){const S=Ko(T);if(!S.z&&!S.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return S}(i);if(!v&&!g)throw new RangeError("Temporal.Instant requires a time zone offset");const y=v?0:Ah(g);({year:e,month:t,day:s,hour:a,minute:l,second:h,millisecond:r,microsecond:p,nanosecond:m}=db(e,t,s,a,l,h,r,p,m-y));const C=gc(e,t,s,a,l,h,r,p,m);if(C===null)throw new RangeError("DateTime outside of supported range");return C}function Bg(i,e,t,s){let a=i,l=e,h=t;switch(s){case"reject":Uo(a,l,h);break;case"constrain":({year:a,month:l,day:h}=PC(a,l,h))}return{year:a,month:l,day:h}}function ky(i,e,t,s,a,l,h){let r=i,p=e,m=t,g=s,v=a,y=l;switch(h){case"reject":By(r,p,m,g,v,y);break;case"constrain":({hour:r,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=function(b,T,S,k,x,A){const D=da(b,0,23),w=da(T,0,59),I=da(S,0,59),N=da(k,0,999),q=da(x,0,999),Y=da(A,0,999);return{hour:D,minute:w,second:I,millisecond:N,microsecond:q,nanosecond:Y}}(r,p,m,g,v,y))}return{hour:r,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}}function Lh(i){if(!qr(i))return SP(Fi(i));if(gn(i))return{years:Z(i,Ps),months:Z(i,es),weeks:Z(i,qs),days:Z(i,Is),hours:Z(i,Ds),minutes:Z(i,Ls),seconds:Z(i,Rs),milliseconds:Z(i,zs),microseconds:Z(i,Ns),nanoseconds:Z(i,Os)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(b){if(!qr(b))throw new TypeError("invalid duration-like");const T={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let S=!1;for(const k of K_){const x=b[k];x!==void 0&&(S=!0,T[k]=Wn(x))}if(!S)throw new TypeError("invalid duration-like");return T}(i);for(const C of K_){const b=t[C];b!==void 0&&(e[C]=b)}let{years:s,months:a,weeks:l,days:h,hours:r,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}=e;return Fy(s,a,l,h,r,p,m,g,v,y),{years:s,months:a,weeks:l,days:h,hours:r,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}}function kn(i){return i===void 0?"constrain":xc(i,"overflow",["constrain","reject"],"constrain")}function ef(i){return i===void 0?"compatible":xc(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Zs(i,e){return xc(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Pf(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function Z0(i,e){return i===void 0?e:xc(i,"offset",["prefer","use","ignore","reject"],e)}function If(i){return xc(i,"calendarName",["auto","always","never"],"auto")}function Dl(i,e,t){let s=1/0;e!==void 0&&(s=e),t||e===void 0||(s=e>1?e-1:1);const a=function(h,r,p,m,g){let v=h[r];if(v===void 0)return g;const y=Qp(v);if(kf(y)||y<p||y>m)throw new RangeError(`${String(r)} must be between ${p} and ${m}, not ${y}`);return Yn(y)}(i,"roundingIncrement",1,s,1);if(e!==void 0&&e%a!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return a}function nb(i,e){return Dl(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Df(i){const e=Zn(i,"smallestUnit","time",void 0);if(e==="hour"){const a=hd.reduce((l,[h,r,p])=>(p==="time"&&r!=="hour"&&l.push(r,h),l),[]);throw new RangeError(`smallestUnit must be one of ${a.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const a=Fi(t);if(a==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${a}`)}if(kf(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const s=Yn(t);switch(s){case 0:return{precision:s,unit:"second",increment:1};case 1:case 2:case 3:return{precision:s,unit:"millisecond",increment:10**(3-s)};case 4:case 5:case 6:return{precision:s,unit:"microsecond",increment:10**(6-s)};case 7:case 8:case 9:return{precision:s,unit:"nanosecond",increment:10**(9-s)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Eh=Symbol("~required~");function Zn(i,e,t,s,a=[]){const l=[];for(const[,m,g]of hd)t!=="datetime"&&t!==g||l.push(m);l.push(...a);let h=s;h===Eh?h=void 0:h!==void 0&&l.push(h);const r=[...l];for(const m of l){const g=EP.get(m);g!==void 0&&r.push(g)}let p=xc(i,e,r,h);if(p===void 0&&s===Eh)throw new RangeError(`${e} is required`);return jg.has(p)?jg.get(p):p}function bg(i){const e=i.relativeTo;if(e===void 0)return e;let t,s,a,l,h,r,p,m,g,v,y,C,b="option",T=!1;if(qr(e)){if(wi(e)||pr(e))return e;if(Qi(e))return Xu(e);v=dd(e);const S=rr(e,Rn(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),k=ms(null);k.overflow="constrain",{year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g}=Lf(v,S,k),C=e.offset,C===void 0&&(b="wall"),y=e.timeZone}else{let S,k;({year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g,calendar:v,ianaName:S,offset:C,z:k}=Ko(Fi(e))),S&&(y=S),k?b="exact":C||(b="wall"),v||(v=An()),v=ns(v),T=!0}if(y!==void 0){y=Fs(y);let S=0;return b==="option"&&(S=Ah(Fi(C))),hs(Ug(t,s,a,l,h,r,p,m,g,b,S,y,"compatible","reject",T),y,v)}return ro(t,s,a,v)}function X0(i,e,t,s,a,l,h,r,p,m){for(const[g,v]of[["years",i],["months",e],["weeks",t],["days",s],["hours",a],["minutes",l],["seconds",h],["milliseconds",r],["microseconds",p],["nanoseconds",m]])if(v!==0)return jg.get(g);return"nanosecond"}function ga(i,e){return X_.indexOf(i)>X_.indexOf(e)?e:i}function Ay(i,e){let t=i;return t===void 0&&(t=ms(null)),oC(ms(null),t,{largestUnit:e})}function rr(i,e,t,{emptySourceErrorMessage:s}={emptySourceErrorMessage:"no supported properties found"}){const a=ms(null);let l=!1;for(const h of e){let r=i[h];if(r!==void 0)l=!0,Z_.has(h)&&(r=Z_.get(h)(r)),a[h]=r;else if(t!=="partial"){if(sC.call(t,h))throw new TypeError(`required property '${h}' missing or undefined`);r=CP.get(h),a[h]=r}}if(t==="partial"&&!l)throw new TypeError(s);if(a.era===void 0!=(a.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return a}function Fg(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],s=rr(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),a={};for(const l of t){const h=vP(s,l);h!==void 0?a[l]=h.value:e==="complete"&&(a[l]=0)}return a}function Fr(i,e){let t=i;if(qr(t)){if(pr(t))return t;if(wi(t)&&(kn(e),t=Sa(Z(t,Mr),Z(t,Ts),Z(t,St))),Qi(t))return kn(e),ro(Z(t,ni),Z(t,hi),Z(t,gi),Z(t,St));const p=dd(t);return mc(p,rr(t,Rn(p,["day","month","monthCode","year"]),[]),e)}kn(e);const{year:s,month:a,day:l,calendar:h,z:r}=function(m){return Ko(m)}(Fi(t));if(r)throw new RangeError("Z designator not supported for PlainDate");return new(zi("%Temporal.PlainDate%"))(s,a,l,h)}function Lf(i,e,t){let{hour:s,minute:a,second:l,millisecond:h,microsecond:r,nanosecond:p}=Fg(e);const m=kn(t),g=mc(i,e,t),v=Z(g,ni),y=Z(g,hi),C=Z(g,gi);return{hour:s,minute:a,second:l,millisecond:h,microsecond:r,nanosecond:p}=ky(s,a,l,h,r,p,m),{year:v,month:y,day:C,hour:s,minute:a,second:l,millisecond:h,microsecond:r,nanosecond:p}}function uh(i,e){let t,s,a,l,h,r,p,m,g,v;if(qr(i)){if(Qi(i))return i;if(wi(i))return kn(e),Sa(Z(i,Mr),Z(i,Ts),Z(i,St));if(pr(i))return kn(e),ua(Z(i,ni),Z(i,hi),Z(i,gi),0,0,0,0,0,0,Z(i,St));v=dd(i);const y=rr(i,Rn(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g}=Lf(v,y,e))}else{let y;if(kn(e),{year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g,calendar:v,z:y}=function(b){return Ko(b)}(Fi(i)),y)throw new RangeError("Z designator not supported for PlainDateTime");fb(t,s,a,l,h,r,p,m,g),v===void 0&&(v=An()),v=ns(v)}return ua(t,s,a,l,h,r,p,m,g,v)}function Vu(i){if(gn(i))return i;let{years:e,months:t,weeks:s,days:a,hours:l,minutes:h,seconds:r,milliseconds:p,microseconds:m,nanoseconds:g}=Lh(i);return new(zi("%Temporal.Duration%"))(e,t,s,a,l,h,r,p,m,g)}function Lo(i){if(Fn(i))return i;if(wi(i))return new(zi("%Temporal.Instant%"))(Z(i,Ri));const e=kP(Fi(i));return new(zi("%Temporal.Instant%"))(e)}function J_(i,e){let t=i;if(qr(t)){if(ts(t))return t;let p,m;if(Kn(t,St))p=Z(t,St),m=!1;else{let v=t.calendar;m=v===void 0,v===void 0&&(v=An()),p=ns(v)}t=t;const g=rr(t,Rn(p,["day","month","monthCode","year"]),[]);return m&&g.month!==void 0&&g.monthCode===void 0&&g.year===void 0&&(g.year=1972),Zu(p,g,e)}kn(e);let{month:s,day:a,referenceISOYear:l,calendar:h}=mC(Fi(t)),r=h;return r===void 0&&(r=An()),r=ns(r),l===void 0?(Uo(1972,s,a),tf(s,a,r)):Zu(r,tf(s,a,r,l))}function El(i,e="constrain"){let t,s,a,l,h,r,p,m=i;if(qr(m)){if(yn(m))return m;if(wi(m)&&(m=Sa(Z(m,Mr),Z(m,Ts),Z(m,St))),Qi(m))return new(zi("%Temporal.PlainTime%"))(Z(m,Gi),Z(m,Hi),Z(m,Wi),Z(m,qi),Z(m,Yi),Z(m,Zi));if(p=dd(m),Fi(p)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:s,second:a,millisecond:l,microsecond:h,nanosecond:r}=Fg(m)),{hour:t,minute:s,second:a,millisecond:l,microsecond:h,nanosecond:r}=ky(t,s,a,l,h,r,e)}else if({hour:t,minute:s,second:a,millisecond:l,microsecond:h,nanosecond:r,calendar:p}=function(v){const y=hP.exec(v);let C,b,T,S,k,x,A;if(y){C=Ir(y[1]),b=Ir(y[2]||y[5]),T=Ir(y[3]||y[6]),T===60&&(T=59);const D=(y[4]||y[7])+"000000000";S=Ir(D.slice(0,3)),k=Ir(D.slice(3,6)),x=Ir(D.slice(6,9)),A=y[15]}else{let D,w;if({hasTime:w,hour:C,minute:b,second:T,millisecond:S,microsecond:k,nanosecond:x,calendar:A,z:D}=Ko(v),!w)throw new RangeError(`time is missing in string: ${v}`);if(D)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(v))return{hour:C,minute:b,second:T,millisecond:S,microsecond:k,nanosecond:x,calendar:A};try{const{month:D,day:w}=mC(v);Uo(1972,D,w)}catch{try{const{year:D,month:w}=fC(v);Uo(D,w,1)}catch{return{hour:C,minute:b,second:T,millisecond:S,microsecond:k,nanosecond:x,calendar:A}}}throw new RangeError(`invalid ISO 8601 time-only string ${v}; may need a T prefix`)}(Fi(m)),By(t,s,a,l,h,r),p!==void 0&&p!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(zi("%Temporal.PlainTime%"))(t,s,a,l,h,r)}function Dp(i,e){if(qr(i)){if(Er(i))return i;const r=dd(i);return kh(r,rr(i,Rn(r,["month","monthCode","year"]),[]),e)}kn(e);let{year:t,month:s,referenceISODay:a,calendar:l}=fC(Fi(i)),h=l;return h===void 0&&(h=An()),h=ns(h),a===void 0?(Uo(t,s,1),rf(t,s,h)):kh(h,rf(t,s,h,a))}function Ug(i,e,t,s,a,l,h,r,p,m,g,v,y,C,b){const T=new(zi("%Temporal.PlainDateTime%"))(i,e,t,s,a,l,h,r,p);if(m==="wall"||C==="ignore")return Z(Bs(v,T,y),Ri);if(m==="exact"||C==="use"){const k=gc(i,e,t,s,a,l,h,r,p);if(k===null)throw new RangeError("ZonedDateTime outside of supported range");return de.subtract(k,de.BigInt(g))}const S=$g(v,T);for(const k of S){const x=go(v,k),A=de.toNumber(oa(de.BigInt(x),6e10,"halfExpand"));if(x===g||b&&A===g)return Z(k,Ri)}if(C==="reject"){const k=ub(g),x=Io(v)?Z(v,ic):"time zone";throw new RangeError(`Offset ${k} is invalid for ${T.toString()} in ${x}`)}return Z(TC(S,v,T,y),Ri)}function Lp(i,e){let t,s,a,l,h,r,p,m,g,v,y,C,b=!1,T="option";if(qr(i)){if(wi(i))return i;C=dd(i);const k=rr(i,Y0(Rn(C,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g}=Lf(C,k,e)),v=Fs(k.timeZone),y=k.offset,y===void 0?T="wall":y=Fi(y)}else{let k,x;if(kn(e),{year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g,ianaName:k,offset:y,z:x,calendar:C}=function(D){const w=Ko(D);if(!w.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return w}(Fi(i)),!k)throw new RangeError("time zone ID required in brackets");x?T="exact":y||(T="wall"),v=new(zi("%Temporal.TimeZone%"))(k),C||(C=An()),C=ns(C),b=!0}let S=0;return T==="option"&&(S=Ah(y)),hs(Ug(t,s,a,l,h,r,p,m,g,T,S,v,ef(e),Z0(e,"reject"),b),v,C)}function gC(i,e,t,s,a){Uo(e,t,s),IC(e,t,s),Xo(i),Ji(i,ni,e),Ji(i,hi,t),Ji(i,gi,s),Ji(i,St,a),Ji(i,"slot-date-brand",!0)}function ro(i,e,t,s=An()){const a=zi("%Temporal.PlainDate%"),l=ms(a.prototype);return gC(l,i,e,t,s),l}function yC(i,e,t,s,a,l,h,r,p,m,g){fb(e,t,s,a,l,h,r,p,m),DC(e,t,s,a,l,h,r,p,m),Xo(i),Ji(i,ni,e),Ji(i,hi,t),Ji(i,gi,s),Ji(i,Gi,a),Ji(i,Hi,l),Ji(i,Wi,h),Ji(i,qi,r),Ji(i,Yi,p),Ji(i,Zi,m),Ji(i,St,g)}function ua(i,e,t,s,a,l,h,r,p,m=An()){const g=zi("%Temporal.PlainDateTime%"),v=ms(g.prototype);return yC(v,i,e,t,s,a,l,h,r,p,m),v}function xC(i,e,t,s,a){Uo(a,e,t),IC(a,e,t),Xo(i),Ji(i,hi,e),Ji(i,gi,t),Ji(i,ni,a),Ji(i,St,s),Ji(i,"slot-month-day-brand",!0)}function tf(i,e,t=An(),s=1972){const a=zi("%Temporal.PlainMonthDay%"),l=ms(a.prototype);return xC(l,i,e,t,s),l}function vC(i,e,t,s,a){Uo(e,t,a),function(h,r){ps(h,-271821,275760),h===-271821?ps(r,4,12):h===275760&&ps(r,1,9)}(e,t),Xo(i),Ji(i,ni,e),Ji(i,hi,t),Ji(i,gi,a),Ji(i,St,s),Ji(i,"slot-year-month-brand",!0)}function rf(i,e,t=An(),s=1){const a=zi("%Temporal.PlainYearMonth%"),l=ms(a.prototype);return vC(l,i,e,t,s),l}function bC(i,e,t,s){ch(e),Xo(i),Ji(i,Ri,e),Ji(i,Mr,t),Ji(i,St,s);const a=new(zi("%Temporal.Instant%"))(Z(i,Ri));Ji(i,Ts,a)}function hs(i,e,t=An()){const s=zi("%Temporal.ZonedDateTime%"),a=ms(s.prototype);return bC(a,i,e,t),a}function An(){return new(zi("%Temporal.Calendar%"))("iso8601")}function Rn(i,e){let t=e;i.fields&&(t=i.fields(t));const s=[];for(const a of t){if(typeof a!="string")throw new TypeError("bad return from calendar.fields()");eb.call(s,a)}return s}function Sh(i,e,t){const s=i.mergeFields;if(!s)return{...e,...t};const a=Reflect.apply(s,i,[e,t]);if(!qr(a))throw new TypeError("bad return from calendar.mergeFields()");return a}function js(i,e,t,s,a){let l=a;l===void 0&&(l=i.dateAdd);const h=tb(l,i,[e,t,s]);if(!pr(h))throw new TypeError("invalid result");return h}function fc(i,e,t,s,a){let l=a;l===void 0&&(l=i.dateUntil);const h=tb(l,i,[e,t,s]);if(!gn(h))throw new TypeError("invalid result");return h}function My(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Ur(t)}function Py(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return Jp(t)}function Rf(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Fi(t)}function Iy(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return Jp(t)}function Dy(i,e){let t=i.era(e);return t!==void 0&&(t=Fi(t)),t}function Ly(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Ur(t)),t}function sb(i,e){return i.dayOfWeek(e)}function ab(i,e){return i.dayOfYear(e)}function ob(i,e){return i.weekOfYear(e)}function lb(i,e){return i.daysInWeek(e)}function zf(i,e){return i.daysInMonth(e)}function Ry(i,e){return i.daysInYear(e)}function zy(i,e){return i.monthsInYear(e)}function Ny(i,e){return i.inLeapYear(e)}function ns(i){let e=i;if(qr(e)){if(Kn(e,St))return Z(e,St);if(!("calendar"in e)||(e=e.calendar,qr(e)&&!("calendar"in e)))return e}const t=Fi(e),s=zi("%Temporal.Calendar%");if(jC(t))return new s(t);let a;try{({calendar:a}=Ko(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return a||(a="iso8601"),new s(a)}function dd(i){if(Kn(i,St))return Z(i,St);const{calendar:e}=i;return e===void 0?An():ns(e)}function Nf(i,e){return i===e?!0:Fi(i)===Fi(e)}function _C(i,e){if(i===e)return e;const t=Fi(i),s=Fi(e);if(t===s||t==="iso8601")return e;if(s==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function mc(i,e,t){const s=i.dateFromFields(e,t);if(!pr(s))throw new TypeError("invalid result");return s}function kh(i,e,t){const s=i.yearMonthFromFields(e,t);if(!Er(s))throw new TypeError("invalid result");return s}function Zu(i,e,t){const s=i.monthDayFromFields(e,t);if(!ts(s))throw new TypeError("invalid result");return s}function Fs(i){let e=i;if(qr(e)){if(wi(e))return Z(e,Mr);if(!("timeZone"in e)||(e=e.timeZone,qr(e)&&!("timeZone"in e)))return e}const t=pC(Fi(e));return new(zi("%Temporal.TimeZone%"))(t)}function wC(i,e){return i===e?!0:Fi(i)===Fi(e)}function Xu(i){return ro(Z(i,ni),Z(i,hi),Z(i,gi),Z(i,St))}function cb(i){return new(zi("%Temporal.PlainTime%"))(Z(i,Gi),Z(i,Hi),Z(i,Wi),Z(i,qi),Z(i,Yi),Z(i,Zi))}function go(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const s=Reflect.apply(t,i,[e]);if(typeof s!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!uC(s)||_r(s)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return s}function K0(i,e){return ub(go(i,e))}function Sa(i,e,t){const s=Z(e,Ri),a=go(i,e);let{year:l,month:h,day:r,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:C}=EC(s);return{year:l,month:h,day:r,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:C}=db(l,h,r,p,m,g,v,y,C+a),ua(l,h,r,p,m,g,v,y,C,t)}function Bs(i,e,t){return TC($g(i,e),i,e,t)}function TC(i,e,t,s){const a=zi("%Temporal.Instant%"),l=i.length;if(l===1)return i[0];if(l)switch(s){case"compatible":case"earlier":return i[0];case"later":return i[l-1];case"reject":throw new RangeError("multiple instants found")}const h=Z(t,ni),r=Z(t,hi),p=Z(t,gi),m=Z(t,Gi),g=Z(t,Hi),v=Z(t,Wi),y=Z(t,qi),C=Z(t,Yi),b=Z(t,Zi),T=gc(h,r,p,m,g,v,y,C,b);if(T===null)throw new RangeError("DateTime outside of supported range");const S=new a(de.subtract(T,pc)),k=new a(de.add(T,pc)),x=go(e,S),A=go(e,k)-x;switch(s){case"earlier":{const D=Z(t,St),w=zi("%Temporal.PlainDateTime%"),I=J0(h,r,p,m,g,v,y,C,b,D,0,0,0,0,0,0,0,0,0,-A,void 0);return $g(e,new w(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D))[0]}case"compatible":case"later":{const D=Z(t,St),w=zi("%Temporal.PlainDateTime%"),I=J0(h,r,p,m,g,v,y,C,b,D,0,0,0,0,0,0,0,0,0,A,void 0),N=$g(e,new w(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function $g(i,e){const t=i.getPossibleInstantsFor(e),s=[];for(const a of t){if(!Fn(a))throw new TypeError("bad return from getPossibleInstantsFor");eb.call(s,a)}return s}function Rh(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${_r(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function sn(i){return`00${i}`.slice(-2)}function Oy(i,e,t,s,a){if(a==="minute")return"";const l=`:${sn(i)}`;let h,r=1e6*e+1e3*t+s;if(a==="auto"){if(r===0)return l;for(h=`${r}`.padStart(9,"0");h[h.length-1]==="0";)h=h.slice(0,-1)}else{if(a===0)return l;h=`${r}`.padStart(9,"0").slice(0,a)}return`${l}.${h}`}function ew(i,e,t){let s=e;s===void 0&&(s=new(zi("%Temporal.TimeZone%"))("UTC"));const a=Sa(s,i,An()),l=Rh(Z(a,ni)),h=sn(Z(a,hi)),r=sn(Z(a,gi)),p=sn(Z(a,Gi)),m=sn(Z(a,Hi)),g=Oy(Z(a,Wi),Z(a,qi),Z(a,Yi),Z(a,Zi),t);let v="Z";return e!==void 0&&(v=CC(go(s,i))),`${l}-${h}-${r}T${p}:${m}${g}${v}`}function o0(i,e="auto",t){function s(Y){return Y<=xP?Y.toString(10):de.BigInt(Y).toString(10)}const a=Z(i,Ps),l=Z(i,es),h=Z(i,qs),r=Z(i,Is),p=Z(i,Ds),m=Z(i,Ls);let g=Z(i,Rs),v=Z(i,zs),y=Z(i,Ns),C=Z(i,Os);const b=No(a,l,h,r,p,m,g,v,y,C);if(t){const{unit:Y,increment:X,roundingMode:B}=t;({seconds:g,milliseconds:v,microseconds:y,nanoseconds:C}=yc(0,0,0,0,0,0,g,v,y,C,X,Y,B))}const T=[];a&&T.push(`${s(_r(a))}Y`),l&&T.push(`${s(_r(l))}M`),h&&T.push(`${s(_r(h))}W`),r&&T.push(`${s(_r(r))}D`);const S=[];p&&S.push(`${s(_r(p))}H`),m&&S.push(`${s(_r(m))}M`);const k=[];let x,A,D,w,I=Ku(0,0,0,g,v,y,C,0);({quotient:I,remainder:x}=Hn(I,Pr)),{quotient:I,remainder:A}=Hn(I,Pr),{quotient:w,remainder:D}=Hn(I,Pr);const N=1e6*_r(de.toNumber(D))+1e3*_r(de.toNumber(A))+_r(de.toNumber(x));let q;if(e==="auto"){if(N!==0)for(q=`${N}`.padStart(9,"0");q[q.length-1]==="0";)q=q.slice(0,-1)}else e!==0&&(q=`${N}`.padStart(9,"0").slice(0,e));return q&&k.unshift(".",q),de.equal(w,En)&&!k.length&&e==="auto"||k.unshift(rb(w).toString()),k.length&&S.push(`${k.join("")}S`),S.length&&S.unshift("T"),T.length||S.length?`${b<0?"-":""}P${T.join("")}${S.join("")}`:"PT0S"}function tw(i,e="auto"){return`${Rh(Z(i,ni))}-${sn(Z(i,hi))}-${sn(Z(i,gi))}${Mf(Fi(Z(i,St)),e)}`}function iw(i,e,t="auto",s){let a=Z(i,ni),l=Z(i,hi),h=Z(i,gi),r=Z(i,Gi),p=Z(i,Hi),m=Z(i,Wi),g=Z(i,qi),v=Z(i,Yi),y=Z(i,Zi);if(s){const{unit:C,increment:b,roundingMode:T}=s;({year:a,month:l,day:h,hour:r,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=xb(a,l,h,r,p,m,g,v,y,b,C,T))}return`${Rh(a)}-${sn(l)}-${sn(h)}T${sn(r)}:${sn(p)}${Oy(m,g,v,y,e)}${Mf(Fi(Z(i,St)),t)}`}function rw(i,e="auto"){let t=`${sn(Z(i,hi))}-${sn(Z(i,gi))}`;const s=Fi(Z(i,St));(e==="always"||s!=="iso8601")&&(t=`${Rh(Z(i,ni))}-${t}`);const a=Mf(s,e);return a&&(t+=a),t}function nw(i,e="auto"){let t=`${Rh(Z(i,ni))}-${sn(Z(i,hi))}`;const s=Fi(Z(i,St));(e==="always"||s!=="iso8601")&&(t+=`-${sn(Z(i,gi))}`);const a=Mf(s,e);return a&&(t+=a),t}function sw(i,e,t="auto",s="auto",a="auto",l){let h=Z(i,Ts);if(l){const{unit:g,increment:v,roundingMode:y}=l,C=Gg(Z(i,Ri),v,g,y);h=new(zi("%Temporal.Instant%"))(C)}const r=Z(i,Mr),p=Sa(r,h,An());let m=`${Rh(Z(p,ni))}-${sn(Z(p,hi))}-${sn(Z(p,gi))}T${sn(Z(p,Gi))}:${sn(Z(p,Hi))}${Oy(Z(p,Wi),Z(p,qi),Z(p,Yi),Z(p,Zi),e)}`;return a!=="never"&&(m+=CC(go(r,h))),s!=="never"&&(m+=`[${r}]`),m+=Mf(Fi(Z(i,St)),t),m}function Rp(i){return BC.test(Af(i))}function Ah(i){const e=BC.exec(Af(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]===""?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function hb(i){return Rp(i)?ub(Ah(i)):dC(Af(i)).resolvedOptions().timeZone}function _l(i,e){const{year:t,month:s,day:a,hour:l,minute:h,second:r,millisecond:p,microsecond:m,nanosecond:g}=SC(i,e),v=gc(t,s,a,l,h,r,p,m,g);if(v===null)throw new RangeError("Date outside of supported range");return de.toNumber(de.subtract(v,i))}function ub(i){const e=i<0?"-":"+",t=_r(i),s=t%1e9,a=Yn(t/1e9)%60,l=Yn(t/6e10)%60,h=sn(Yn(t/36e11)),r=sn(l),p=sn(a);let m="";if(s){let g=`${s}`.padStart(9,"0");for(;g[g.length-1]==="0";)g=g.slice(0,-1);m=`:${p}.${g}`}else a&&(m=`:${p}`);return`${e}${h}:${r}${m}`}function CC(i){let e=de.toNumber(oa(de.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=_r(e);const s=e/6e10%60;return`${t}${sn(Yn(e/36e11))}:${sn(s)}`}function gc(i,e,t,s,a,l,h,r,p){const m=new Date;m.setUTCHours(s,a,l,h),m.setUTCFullYear(i,e-1,t);const g=m.getTime();if(kf(g))return null;let v=de.multiply(de.BigInt(g),Ua);return v=de.add(v,de.multiply(de.BigInt(r),Pr)),v=de.add(v,de.BigInt(p)),de.lessThan(v,Xp)||de.greaterThan(v,Kp)?null:v}function EC(i){const{quotient:e,remainder:t}=Hn(i,Ua);let s=de.toNumber(e),a=de.toNumber(t);a<0&&(a+=1e6,s-=1);const l=Yn(a/1e3)%1e3,h=a%1e3,r=new Date(s);return{epochMilliseconds:s,year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds(),microsecond:l,nanosecond:h}}function SC(i,e){const{epochMilliseconds:t,millisecond:s,microsecond:a,nanosecond:l}=EC(i),{year:h,month:r,day:p,hour:m,minute:g,second:v}=function(C,b){const T=dC(C);return function(k){const x=k.split(/[^\w]+/);if(x.length!==7)throw new RangeError(`expected 7 parts in "${k}`);const A=+x[0],D=+x[1];let w=+x[2];const I=x[3].toUpperCase();if(I==="B"||I==="BC")w=1-w;else if(I!=="A"&&I!=="AD")throw new RangeError(`Unknown era ${I} in "${k}`);let N=+x[4];N===24&&(N=0);const q=+x[5],Y=+x[6];if(!(is(w)&&is(A)&&is(D)&&is(N)&&is(q)&&is(Y)))throw new RangeError(`Invalid number in "${k}`);return{year:w,month:A,day:D,hour:N,minute:q,second:Y}}(T.format(new Date(b)))}(e,t);return db(h,r,p,m,g,v,s,a,l)}function aw(i,e){return de.lessThan(i,e)?e:i}function kC(){return de.add(bb(),wP)}function AC(i,e){const t=kC(),s=de.greaterThan(i,t),a=s?de.subtract(i,cC):lC;let l=de.subtract(i,ib);const h=_l(l,e);let r=l,p=h;for(;h===p&&de.greaterThan(l,a);)r=de.subtract(l,hC),p=_l(r,e),h===p&&(l=r);return h===p?s?AC(de.subtract(t,pc),e):null:FC(m=>_l(m,e),r,l,p,h)}function lc(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function Al(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[lc(i)?"leapyear":"standard"][e-1]}function l0(i,e,t){const s=e+(e<3?10:-2),a=i-(e<3?1:0),l=Yn(a/100),h=a-100*l,r=(t+Yn(2.6*s-.2)+(h+Yn(h/4))+(Yn(l/4)-2*l))%7;return r+(r<=0?7:0)}function Vg(i,e,t){let s=t;for(let a=e-1;a>0;a--)s+=Al(i,a);return s}function No(i,e,t,s,a,l,h,r,p,m){for(const g of[i,e,t,s,a,l,h,r,p,m])if(g!==0)return g<0?-1:1;return 0}function _g(i,e){let t=i,s=e;if(!is(t)||!is(s))throw new RangeError("infinity is out of range");return s-=1,t+=Yn(s/12),s%=12,s<0&&(s+=12),s+=1,{year:t,month:s}}function jy(i,e,t){let s=i,a=e,l=t;if(!is(l))throw new RangeError("infinity is out of range");({year:s,month:a}=_g(s,a));let h=0,r=a>2?s:s-1;for(;h=lc(r)?366:365,l<-h;)s-=1,r-=1,l+=h;for(r+=1;h=lc(r)?366:365,l>h;)s+=1,r+=1,l-=h;for(;l<1;)({year:s,month:a}=_g(s,a-1)),l+=Al(s,a);for(;l>Al(s,a);)l-=Al(s,a),{year:s,month:a}=_g(s,a+1);return{year:s,month:a,day:l}}function db(i,e,t,s,a,l,h,r,p){const{deltaDays:m,hour:g,minute:v,second:y,millisecond:C,microsecond:b,nanosecond:T}=wl(s,a,l,h,r,p),{year:S,month:k,day:x}=jy(i,e,t+m);return{year:S,month:k,day:x,hour:g,minute:v,second:y,millisecond:C,microsecond:b,nanosecond:T}}function wl(i,e,t,s,a,l){let h=i,r=e,p=t,m=s,g=a,v=l;if(!(is(h)&&is(r)&&is(p)&&is(m)&&is(g)&&is(v)))throw new RangeError("infinity is out of range");g+=Yn(v/1e3),v=Au(v,1e3),m+=Yn(g/1e3),g=Au(g,1e3),p+=Yn(m/1e3),m=Au(m,1e3),r+=Yn(p/60),p=Au(p,60),h+=Yn(r/60),r=Au(r,60);const y=Yn(h/24);return h=Au(h,24),{deltaDays:y,hour:h,minute:r,second:p,millisecond:m,microsecond:g,nanosecond:v}}function Ku(i,e,t,s,a,l,h,r){const p=de.BigInt(i);let m=de.BigInt(h);i!==0&&(m=de.subtract(de.BigInt(h),de.BigInt(r)));const g=de.add(de.BigInt(e),de.multiply(p,de.BigInt(24))),v=de.add(de.BigInt(t),de.multiply(g,mh)),y=de.add(de.BigInt(s),de.multiply(v,mh)),C=de.add(de.BigInt(a),de.multiply(y,Pr)),b=de.add(de.BigInt(l),de.multiply(C,Pr));return de.add(de.BigInt(m),de.multiply(b,Pr))}function pb(i,e){const t=zi("%Temporal.Instant%"),s=Zp(de.toNumber(i));let a=de.BigInt(i),l=864e11;if(s===0)return{days:0,nanoseconds:En,dayLengthNs:l};if(!wi(e)){let x;return{quotient:x,remainder:a}=Hn(a,de.BigInt(l)),{days:de.toNumber(x),nanoseconds:a,dayLengthNs:l}}const h=Z(e,Ri),r=Z(e,Ts),p=de.add(h,a),m=new t(p),g=Z(e,Mr),v=Z(e,St),y=Sa(g,r,v),C=Sa(g,m,v);let{days:b}=yb(Z(y,ni),Z(y,hi),Z(y,gi),Z(y,Gi),Z(y,Hi),Z(y,Wi),Z(y,qi),Z(y,Yi),Z(y,Zi),Z(C,ni),Z(C,hi),Z(C,gi),Z(C,Gi),Z(C,Hi),Z(C,Wi),Z(C,qi),Z(C,Yi),Z(C,Zi),v,"day",ms(null)),T=$a(r,g,v,0,0,0,b,0,0,0,0,0,0);if(s===1)for(;b>0&&de.greaterThan(T,p);)--b,T=$a(r,g,v,0,0,0,b,0,0,0,0,0,0);a=de.subtract(p,T);let S=!1,k=new t(T);do{const x=$a(k,g,v,0,0,0,s,0,0,0,0,0,0),A=Z(k,Ri);l=de.toNumber(de.subtract(x,A)),S=de.greaterThan(de.multiply(de.subtract(a,de.BigInt(l)),de.BigInt(s)),En),S&&(a=de.subtract(a,de.BigInt(l)),k=new t(x),b+=s)}while(S);return{days:b,nanoseconds:a,dayLengthNs:_r(l)}}function ma(i,e,t,s,a,l,h,r,p){let m,g,v,y,C,b,T=i;if(wi(p)){const k=$a(Z(p,Ts),Z(p,Mr),Z(p,St),0,0,0,T,e,t,s,a,l,h),x=Z(p,Ri);m=de.subtract(k,x)}else m=Ku(T,e,t,s,a,l,h,0);r==="year"||r==="month"||r==="week"||r==="day"?{days:T,nanoseconds:m}=pb(m,p):T=0;const S=de.lessThan(m,En)?-1:1;switch(m=rb(m),g=v=y=C=b=En,r){case"year":case"month":case"week":case"day":case"hour":({quotient:g,remainder:m}=Hn(m,Pr)),{quotient:v,remainder:g}=Hn(g,Pr),{quotient:y,remainder:v}=Hn(v,Pr),{quotient:C,remainder:y}=Hn(y,mh),{quotient:b,remainder:C}=Hn(C,mh);break;case"minute":({quotient:g,remainder:m}=Hn(m,Pr)),{quotient:v,remainder:g}=Hn(g,Pr),{quotient:y,remainder:v}=Hn(v,Pr),{quotient:C,remainder:y}=Hn(y,mh);break;case"second":({quotient:g,remainder:m}=Hn(m,Pr)),{quotient:v,remainder:g}=Hn(g,Pr),{quotient:y,remainder:v}=Hn(v,Pr);break;case"millisecond":({quotient:g,remainder:m}=Hn(m,Pr)),{quotient:v,remainder:g}=Hn(g,Pr);break;case"microsecond":({quotient:g,remainder:m}=Hn(m,Pr));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:T,hours:de.toNumber(b)*S,minutes:de.toNumber(C)*S,seconds:de.toNumber(y)*S,milliseconds:de.toNumber(v)*S,microseconds:de.toNumber(g)*S,nanoseconds:de.toNumber(m)*S}}function eg(i,e,t,s,a,l){let h=i,r=e,p=t,m=s;const g=zi("%Temporal.Duration%"),v=No(h,r,p,m,0,0,0,0,0,0);let y,C;l&&(C=Fr(l),y=Z(C,St));const b=new g(v),T=new g(0,v),S=new g(0,0,v);switch(a){case"year":break;case"month":{if(!y)throw new RangeError("a starting point is required for months balancing");const k=y.dateAdd,x=y.dateUntil;let A=C;for(;_r(h)>0;){const D=js(y,A,b,void 0,k),w=ms(null);w.largestUnit="month";const I=Z(fc(y,A,D,w,x),es);A=D,r+=I,h-=v}}break;case"week":if(!y)throw new RangeError("a starting point is required for weeks balancing");for(;_r(h)>0;){let k;({relativeTo:C,days:k}=ws(y,C,b)),m+=k,h-=v}for(;_r(r)>0;){let k;({relativeTo:C,days:k}=ws(y,C,T)),m+=k,r-=v}break;default:for(;_r(h)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:C,days:k}=ws(y,C,b)),m+=k,h-=v}for(;_r(r)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:C,days:k}=ws(y,C,T)),m+=k,r-=v}for(;_r(p)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:C,days:k}=ws(y,C,S)),m+=k,p-=v}}return{years:h,months:r,weeks:p,days:m}}function ow(i,e,t,s,a){if(wi(i)){const l=Z(i,Ts),h=Z(i,Mr),r=Z(i,St),p=go(h,l),m=$a(l,h,r,e,t,s,a,0,0,0,0,0,0);return go(h,new(zi("%Temporal.Instant%"))(m))-p}return 0}function MC(i){return new(zi("%Temporal.Duration%"))(-Z(i,Ps),-Z(i,es),-Z(i,qs),-Z(i,Is),-Z(i,Ds),-Z(i,Ls),-Z(i,Rs),-Z(i,zs),-Z(i,Ns),-Z(i,Os))}function da(i,e,t){return mP(t,gP(e,i))}function PC(i,e,t){const s=da(e,1,12);return{year:i,month:s,day:da(t,1,Al(i,s))}}function ps(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function Uo(i,e,t){ps(e,1,12),ps(t,1,Al(i,e))}function IC(i,e,t){DC(i,e,t,12,0,0,0,0,0)}function By(i,e,t,s,a,l){ps(i,0,23),ps(e,0,59),ps(t,0,59),ps(s,0,999),ps(a,0,999),ps(l,0,999)}function fb(i,e,t,s,a,l,h,r,p){Uo(i,e,t),By(s,a,l,h,r,p)}function DC(i,e,t,s,a,l,h,r,p){if(ps(i,-271821,275760),i===-271821&&gc(i,e,t+1,s,a,l,h,r,p-1)==null||i===275760&&gc(i,e,t-1,s,a,l,h,r,p+1)==null)throw new RangeError("DateTime outside of supported range")}function ch(i){if(de.lessThan(i,Xp)||de.greaterThan(i,Kp))throw new RangeError("Instant outside of supported range")}function Fy(i,e,t,s,a,l,h,r,p,m){const g=No(i,e,t,s,a,l,h,r,p,m);for(const v of[i,e,t,s,a,l,h,r,p,m]){if(!is(v))throw new RangeError("infinite values not allowed as duration fields");const y=Zp(v);if(y!==0&&y!==g)throw new RangeError("mixed-sign values not allowed as duration fields")}}function mb(i,e,t,s,a,l,h){switch(h){case"year":case"month":{const r=-cc(i,e,t,s,a,l);if(r===0)return{years:0,months:0,weeks:0,days:0};const p={year:i,month:e,day:t},m={year:s,month:a,day:l};let g=m.year-p.year,v=gh(i,e,t,g,0,0,0,"constrain"),y=-cc(v.year,v.month,v.day,s,a,l);if(y===0)return h==="year"?{years:g,months:0,weeks:0,days:0}:{years:0,months:12*g,weeks:0,days:0};let C=m.month-p.month;if(y!==r&&(g-=r,C+=12*r),v=gh(i,e,t,g,C,0,0,"constrain"),y=-cc(v.year,v.month,v.day,s,a,l),y===0)return h==="year"?{years:g,months:C,weeks:0,days:0}:{years:0,months:C+12*g,weeks:0,days:0};y!==r&&(C-=r,C===-r&&(g-=r,C=11*r),v=gh(i,e,t,g,C,0,0,"constrain"));let b=0;return b=v.month===m.month?m.day-v.day:r<0?-v.day-(Al(m.year,m.month)-m.day):m.day+(Al(v.year,v.month)-v.day),h==="month"&&(C+=12*g,g=0),{years:g,months:C,weeks:0,days:b}}case"week":case"day":{let r,p,m;cc(i,e,t,s,a,l)<0?(p={year:i,month:e,day:t},r={year:s,month:a,day:l},m=1):(p={year:s,month:a,day:l},r={year:i,month:e,day:t},m=-1);let g=Vg(r.year,r.month,r.day)-Vg(p.year,p.month,p.day);for(let y=p.year;y<r.year;++y)g+=lc(y)?366:365;let v=0;return h==="week"&&(v=Yn(g/7),g%=7),v*=m,g*=m,{years:0,months:0,weeks:v,days:g}}default:throw new Error("assert not reached")}}function LC(i,e,t,s,a,l,h,r,p,m,g,v){let y=h-i,C=r-e,b=p-t,T=m-s,S=g-a,k=v-l;const x=No(0,0,0,0,y,C,b,T,S,k);y*=x,C*=x,b*=x,T*=x,S*=x,k*=x;let A=0;if({deltaDays:A,hour:y,minute:C,second:b,millisecond:T,microsecond:S,nanosecond:k}=wl(y,C,b,T,S,k),A!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return y*=x,C*=x,b*=x,T*=x,S*=x,k*=x,{hours:y,minutes:C,seconds:b,milliseconds:T,microseconds:S,nanoseconds:k}}function gb(i,e,t,s,a){const l=de.subtract(e,i),h=de.remainder(l,de.BigInt(864e11)),r=de.subtract(l,h),p=oa(h,_b[s]*t,a),m=de.add(r,p),g=de.toNumber(de.remainder(m,Pr)),v=de.toNumber(de.remainder(de.divide(m,Pr),Pr)),y=de.toNumber(de.remainder(de.divide(m,Ua),Pr));return{seconds:de.toNumber(de.divide(m,kl)),milliseconds:y,microseconds:v,nanoseconds:g}}function yb(i,e,t,s,a,l,h,r,p,m,g,v,y,C,b,T,S,k,x,A,D){let w=i,I=e,N=t,{hours:q,minutes:Y,seconds:X,milliseconds:B,microseconds:j,nanoseconds:O}=LC(s,a,l,h,r,p,y,C,b,T,S,k);const R=No(0,0,0,0,q,Y,X,B,j,O);cc(m,g,v,w,I,N)===-R&&({year:w,month:I,day:N}=jy(w,I,N-R),{hours:q,minutes:Y,seconds:X,milliseconds:B,microseconds:j,nanoseconds:O}=ma(-R,q,Y,X,B,j,O,A));const L=ro(w,I,N,x),G=ro(m,g,v,x),$=Ay(D,ga("day",A));let{years:F,months:H,weeks:W,days:re}=fc(x,L,G,$);return{days:re,hours:q,minutes:Y,seconds:X,milliseconds:B,microseconds:j,nanoseconds:O}=ma(re,q,Y,X,B,j,O,A),{years:F,months:H,weeks:W,days:re,hours:q,minutes:Y,seconds:X,milliseconds:B,microseconds:j,nanoseconds:O}}function RC(i,e,t,s,a,l){const h=de.subtract(e,i);if(de.equal(h,En))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const r=zi("%Temporal.Instant%"),p=new r(i),m=new r(e),g=Sa(t,p,s),v=Sa(t,m,s);let{years:y,months:C,weeks:b,days:T}=yb(Z(g,ni),Z(g,hi),Z(g,gi),Z(g,Gi),Z(g,Hi),Z(g,Wi),Z(g,qi),Z(g,Yi),Z(g,Zi),Z(v,ni),Z(v,hi),Z(v,gi),Z(v,Gi),Z(v,Hi),Z(v,Wi),Z(v,qi),Z(v,Yi),Z(v,Zi),s,a,l);const S=$a(p,t,s,y,C,b,0,0,0,0,0,0,0);let k=de.subtract(e,S);const x=hs(S,t,s);({nanoseconds:k,days:T}=pb(k,x));const{hours:A,minutes:D,seconds:w,milliseconds:I,microseconds:N,nanoseconds:q}=ma(0,0,0,0,0,0,de.toNumber(k),"hour");return{years:y,months:C,weeks:b,days:T,hours:A,minutes:D,seconds:w,milliseconds:I,microseconds:N,nanoseconds:q}}function lw(i,e,t,s){const a=Lo(t);let l,h;[l,h]=i==="until"?[e,a]:[a,e];const r=sr(s),p=Zn(r,"smallestUnit","time","nanosecond"),m=ga("second",p);let g=Zn(r,"largestUnit","time","auto");if(g==="auto"&&(g=m),ga(g,p)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${p}`);const v=Zs(r,"trunc"),y=Dl(r,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1),C=Z(l,Ri),b=Z(h,Ri);let T,S,{seconds:k,milliseconds:x,microseconds:A,nanoseconds:D}=gb(C,b,y,p,v);return{hours:T,minutes:S,seconds:k,milliseconds:x,microseconds:A,nanoseconds:D}=ma(0,0,0,k,x,A,D,g),new(zi("%Temporal.Duration%"))(0,0,0,0,T,S,k,x,A,D)}function cw(i,e,t,s){const a=i==="since"?-1:1,l=Fr(t),h=Z(e,St),r=Z(l,St),p=Fi(h),m=Fi(r);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(s),v=Zn(g,"smallestUnit","date","day"),y=ga("day",v);let C=Zn(g,"largestUnit","date","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let b=Zs(g,"trunc");i==="since"&&(b=Pf(b));const T=Dl(g,void 0,!1),S=Ay(g,C);let{years:k,months:x,weeks:A,days:D}=fc(h,e,l,S);return v==="day"&&T===1||({years:k,months:x,weeks:A,days:D}=yc(k,x,A,D,0,0,0,0,0,0,T,v,b,e)),new(zi("%Temporal.Duration%"))(a*k,a*x,a*A,a*D,0,0,0,0,0,0)}function hw(i,e,t,s){const a=i==="since"?-1:1,l=uh(t),h=Z(e,St),r=Z(l,St),p=Fi(h),m=Fi(r);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(s),v=Zn(g,"smallestUnit","datetime","nanosecond"),y=ga("day",v);let C=Zn(g,"largestUnit","datetime","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let b=Zs(g,"trunc");i==="since"&&(b=Pf(b));const T=nb(g,v);let{years:S,months:k,weeks:x,days:A,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Y}=yb(Z(e,ni),Z(e,hi),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi),Z(l,ni),Z(l,hi),Z(l,gi),Z(l,Gi),Z(l,Hi),Z(l,Wi),Z(l,qi),Z(l,Yi),Z(l,Zi),h,C,g);const X=Xu(e);return{years:S,months:k,weeks:x,days:A,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Y}=yc(S,k,x,A,D,w,I,N,q,Y,T,v,b,X),{days:A,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Y}=ma(A,D,w,I,N,q,Y,C),new(zi("%Temporal.Duration%"))(a*S,a*k,a*x,a*A,a*D,a*w,a*I,a*N,a*q,a*Y)}function uw(i,e,t,s){const a=i==="since"?-1:1,l=El(t),h=sr(s);let r=Zn(h,"largestUnit","time","auto");r==="auto"&&(r="hour");const p=Zn(h,"smallestUnit","time","nanosecond");if(ga(r,p)!==r)throw new RangeError(`largestUnit ${r} cannot be smaller than smallestUnit ${p}`);let m=Zs(h,"trunc");i==="since"&&(m=Pf(m));const g=Dl(h,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1);let{hours:v,minutes:y,seconds:C,milliseconds:b,microseconds:T,nanoseconds:S}=LC(Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi),Z(l,Gi),Z(l,Hi),Z(l,Wi),Z(l,qi),Z(l,Yi),Z(l,Zi));return{hours:v,minutes:y,seconds:C,milliseconds:b,microseconds:T,nanoseconds:S}=yc(0,0,0,0,v,y,C,b,T,S,g,p,m),{hours:v,minutes:y,seconds:C,milliseconds:b,microseconds:T,nanoseconds:S}=ma(0,v,y,C,b,T,S,r),new(zi("%Temporal.Duration%"))(0,0,0,0,a*v,a*y,a*C,a*b,a*T,a*S)}function dw(i,e,t,s){const a=i==="since"?-1:1,l=Dp(t),h=Z(e,St),r=Z(l,St),p=Fi(h),m=Fi(r);if(p!==m)throw new RangeError(`cannot compute difference between months of ${p} and ${m} calendars`);const g=sr(s),v=hd.reduce((q,[Y,X,B])=>(B==="date"&&X!=="week"&&X!=="day"&&q.push(X,Y),q),[]),y=Zn(g,"smallestUnit","date","month");if(y==="week"||y==="day")throw new RangeError(`smallestUnit must be one of ${v.join(", ")}, not ${y}`);let C=Zn(g,"largestUnit","date","auto");if(C==="week"||C==="day")throw new RangeError(`largestUnit must be one of ${v.join(", ")}, not ${C}`);if(C==="auto"&&(C="year"),ga(C,y)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${y}`);let b=Zs(g,"trunc");i==="since"&&(b=Pf(b));const T=Dl(g,void 0,!1),S=Rn(h,["monthCode","year"]),k=rr(l,S,[]);k.day=1;const x=rr(e,S,[]);x.day=1;const A=mc(h,k),D=mc(h,x),w=Ay(g,C);let{years:I,months:N}=fc(h,D,A,w);return y==="month"&&T===1||({years:I,months:N}=yc(I,N,0,0,0,0,0,0,0,0,T,y,b,D)),new(zi("%Temporal.Duration%"))(a*I,a*N,0,0,0,0,0,0,0,0)}function pw(i,e,t,s){const a=i==="since"?-1:1,l=Lp(t),h=Z(e,St),r=Z(l,St),p=Fi(h),m=Fi(r);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(s),v=Zn(g,"smallestUnit","datetime","nanosecond"),y=ga("hour",v);let C=Zn(g,"largestUnit","datetime","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let b=Zs(g,"trunc");i==="since"&&(b=Pf(b));const T=nb(g,v),S=Z(e,Ri),k=Z(l,Ri);let x,A,D,w,I,N,q,Y,X,B;if(C!=="year"&&C!=="month"&&C!=="week"&&C!=="day")x=0,A=0,D=0,w=0,{seconds:q,milliseconds:Y,microseconds:X,nanoseconds:B}=gb(S,k,T,v,b),{hours:I,minutes:N,seconds:q,milliseconds:Y,microseconds:X,nanoseconds:B}=ma(0,0,0,q,Y,X,B,C);else{const j=Z(e,Mr);if(!wC(j,Z(l,Mr)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const O=Ay(g,C);({years:x,months:A,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Y,microseconds:X,nanoseconds:B}=RC(S,k,j,h,C,O)),{years:x,months:A,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Y,microseconds:X,nanoseconds:B}=yc(x,A,D,w,I,N,q,Y,X,B,T,v,b,e),{years:x,months:A,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Y,microseconds:X,nanoseconds:B}=OC(x,A,D,w,I,N,q,Y,X,B,T,v,b,e)}return new(zi("%Temporal.Duration%"))(a*x,a*A,a*D,a*w,a*I,a*N,a*q,a*Y,a*X,a*B)}function gh(i,e,t,s,a,l,h,r){let p=i,m=e,g=t,v=l,y=h;return p+=s,m+=a,{year:p,month:m}=_g(p,m),{year:p,month:m,day:g}=Bg(p,m,g,r),y+=7*v,g+=y,{year:p,month:m,day:g}=jy(p,m,g),{year:p,month:m,day:g}}function zC(i,e,t,s,a,l,h,r,p,m,g,v){let y=i,C=e,b=t,T=s,S=a,k=l;y+=h,C+=r,b+=p,T+=m,S+=g,k+=v;let x=0;return{deltaDays:x,hour:y,minute:C,second:b,millisecond:T,microsecond:S,nanosecond:k}=wl(y,C,b,T,S,k),{deltaDays:x,hour:y,minute:C,second:b,millisecond:T,microsecond:S,nanosecond:k}}function NC(i,e,t,s,a,l,h,r,p,m,g,v,y,C,b,T,S,k,x,A,D){const w=ga(X0(i,e,t,s,a,l,h,r,p,m),X0(g,v,y,C,b,T,S,k,x,A));let I,N,q,Y,X,B,j,O,R,L;if(D)if(pr(D)){const G=zi("%Temporal.Duration%"),$=Z(D,St),F=new G(i,e,t,s,0,0,0,0,0,0),H=new G(g,v,y,C,0,0,0,0,0,0),W=$.dateAdd,re=js($,D,F,void 0,W),he=js($,re,H,void 0,W),ie=ga("day",w),ae=ms(null);ae.largestUnit=ie,{years:I,months:N,weeks:q,days:Y}=fc($,D,he,ae),{days:Y,hours:X,minutes:B,seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}=ma(Y,a+b,l+T,h+S,r+k,p+x,m+A,w)}else{const G=zi("%Temporal.Instant%"),$=Z(D,Mr),F=Z(D,St),H=$a(Z(D,Ts),$,F,i,e,t,s,a,l,h,r,p,m),W=$a(new G(H),$,F,g,v,y,C,b,T,S,k,x,A);w!=="year"&&w!=="month"&&w!=="week"&&w!=="day"?(I=0,N=0,q=0,Y=0,{seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}=gb(Z(D,Ri),W,1,"nanosecond","halfExpand"),{hours:X,minutes:B,seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}=ma(0,0,0,j,O,R,L,w)):{years:I,months:N,weeks:q,days:Y,hours:X,minutes:B,seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}=RC(Z(D,Ri),W,$,F,w,ms(null))}else{if(w==="year"||w==="month"||w==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");I=N=q=0,{days:Y,hours:X,minutes:B,seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}=ma(s+C,a+b,l+T,h+S,r+k,p+x,m+A,w)}return Fy(I,N,q,Y,X,B,j,O,R,L),{years:I,months:N,weeks:q,days:Y,hours:X,minutes:B,seconds:j,milliseconds:O,microseconds:R,nanoseconds:L}}function Q0(i,e,t,s,a,l,h){let r=En;r=de.add(r,de.BigInt(h)),r=de.add(r,de.multiply(de.BigInt(l),Pr)),r=de.add(r,de.multiply(de.BigInt(a),Ua)),r=de.add(r,de.multiply(de.BigInt(s),kl)),r=de.add(r,de.multiply(de.BigInt(t),de.BigInt(6e10))),r=de.add(r,de.multiply(de.BigInt(e),de.BigInt(36e11)));const p=de.add(i,r);return ch(p),p}function J0(i,e,t,s,a,l,h,r,p,m,g,v,y,C,b,T,S,k,x,A,D){let w=C,{deltaDays:I,hour:N,minute:q,second:Y,millisecond:X,microsecond:B,nanosecond:j}=zC(s,a,l,h,r,p,b,T,S,k,x,A);w+=I;const O=zi("%Temporal.Duration%"),R=js(m,ro(i,e,t,m),new O(g,v,y,w,0,0,0,0,0,0),D);return{year:Z(R,ni),month:Z(R,hi),day:Z(R,gi),hour:N,minute:q,second:Y,millisecond:X,microsecond:B,nanosecond:j}}function $a(i,e,t,s,a,l,h,r,p,m,g,v,y,C){const b=zi("%Temporal.Duration%");if(No(s,a,l,h,0,0,0,0,0,0)===0)return Q0(Z(i,Ri),r,p,m,g,v,y);const T=Sa(e,i,t),S=js(t,ro(Z(T,ni),Z(T,hi),Z(T,gi),t),new b(s,a,l,h,0,0,0,0,0,0),C),k=ua(Z(S,ni),Z(S,hi),Z(S,gi),Z(T,Gi),Z(T,Hi),Z(T,Wi),Z(T,qi),Z(T,Yi),Z(T,Zi),t);return Q0(Z(Bs(e,k,"compatible"),Ri),r,p,m,g,v,y)}function fw(i,e,t,s){const a=i==="subtract"?-1:1;let{years:l,months:h,weeks:r,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:b}=Lh(t);const T=bg(sr(s));return{years:l,months:h,weeks:r,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:b}=NC(Z(e,Ps),Z(e,es),Z(e,qs),Z(e,Is),Z(e,Ds),Z(e,Ls),Z(e,Rs),Z(e,zs),Z(e,Ns),Z(e,Os),a*l,a*h,a*r,a*p,a*m,a*g,a*v,a*y,a*C,a*b,T),new(zi("%Temporal.Duration%"))(l,h,r,p,m,g,v,y,C,b)}function mw(i,e,t){const s=i==="subtract"?-1:1,{hours:a,minutes:l,seconds:h,milliseconds:r,microseconds:p,nanoseconds:m}=function(y,C){let b=Lh(y);for(const T of C)if(b[T]!==0)throw new RangeError(`Duration field ${T} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return b}(t,["years","months","weeks","days"]),g=Q0(Z(e,Ri),s*a,s*l,s*h,s*r,s*p,s*m);return new(zi("%Temporal.Instant%"))(g)}function gw(i,e,t,s){const a=i==="subtract"?-1:1,{years:l,months:h,weeks:r,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:b}=Lh(t),T=sr(s),S=Z(e,St),{year:k,month:x,day:A,hour:D,minute:w,second:I,millisecond:N,microsecond:q,nanosecond:Y}=J0(Z(e,ni),Z(e,hi),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi),S,a*l,a*h,a*r,a*p,a*m,a*g,a*v,a*y,a*C,a*b,T);return ua(k,x,A,D,w,I,N,q,Y,S)}function yw(i,e,t){const s=i==="subtract"?-1:1,{hours:a,minutes:l,seconds:h,milliseconds:r,microseconds:p,nanoseconds:m}=Lh(t);let{hour:g,minute:v,second:y,millisecond:C,microsecond:b,nanosecond:T}=zC(Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi),s*a,s*l,s*h,s*r,s*p,s*m);return{hour:g,minute:v,second:y,millisecond:C,microsecond:b,nanosecond:T}=ky(g,v,y,C,b,T,"reject"),new(zi("%Temporal.PlainTime%"))(g,v,y,C,b,T)}function xw(i,e,t,s){let a=Lh(t);i==="subtract"&&(a={years:-a.years,months:-a.months,weeks:-a.weeks,days:-a.days,hours:-a.hours,minutes:-a.minutes,seconds:-a.seconds,milliseconds:-a.milliseconds,microseconds:-a.microseconds,nanoseconds:-a.nanoseconds});let{years:l,months:h,weeks:r,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:b}=a;({days:p}=ma(p,m,g,v,y,C,b,"day"));const T=sr(s),S=Z(e,St),k=Rn(S,["monthCode","year"]),x=rr(e,k,[]),A=No(l,h,r,p,0,0,0,0,0,0);x.day=A<0?Jp(zf(S,e)):1;const D=mc(S,x),w=new(zi("%Temporal.Duration%"))(l,h,r,p,0,0,0,0,0,0),I=oC(ms(null),T);return kh(S,rr(js(S,D,w,T),k,[]),I)}function vw(i,e,t,s){const a=i==="subtract"?-1:1,{years:l,months:h,weeks:r,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:b}=Lh(t),T=sr(s),S=Z(e,Mr),k=Z(e,St);return hs($a(Z(e,Ts),S,k,a*l,a*h,a*r,a*p,a*m,a*g,a*v,a*y,a*C,a*b,T),S,k)}function oa(i,e,t){if(e===1)return i;let{quotient:s,remainder:a}=Hn(i,de.BigInt(e));if(de.equal(a,En))return i;const l=de.lessThan(a,En)?-1:1;switch(t){case"ceil":l>0&&(s=de.add(s,de.BigInt(l)));break;case"floor":l<0&&(s=de.add(s,de.BigInt(l)));break;case"trunc":break;case"halfExpand":de.toNumber(rb(de.multiply(a,de.BigInt(2))))>=e&&(s=de.add(s,de.BigInt(l)))}return de.multiply(s,de.BigInt(e))}function Gg(i,e,t,s){let a=de.remainder(i,de.BigInt(864e11));de.lessThan(a,En)&&(a=de.add(a,de.BigInt(864e11)));const l=de.subtract(i,a),h=oa(a,_b[t]*e,s);return de.add(l,h)}function xb(i,e,t,s,a,l,h,r,p,m,g,v,y=864e11){const{deltaDays:C,hour:b,minute:T,second:S,millisecond:k,microsecond:x,nanosecond:A}=vb(s,a,l,h,r,p,m,g,v,y),{year:D,month:w,day:I}=jy(i,e,t+C);return{year:D,month:w,day:I,hour:b,minute:T,second:S,millisecond:k,microsecond:x,nanosecond:A}}function vb(i,e,t,s,a,l,h,r,p,m=864e11){let g=En;switch(r){case"day":case"hour":g=de.BigInt(i);case"minute":g=de.add(de.multiply(g,mh),de.BigInt(e));case"second":g=de.add(de.multiply(g,mh),de.BigInt(t));case"millisecond":g=de.add(de.multiply(g,Pr),de.BigInt(s));case"microsecond":g=de.add(de.multiply(g,Pr),de.BigInt(a));case"nanosecond":g=de.add(de.multiply(g,Pr),de.BigInt(l))}const v=r==="day"?m:_b[r],y=oa(g,v*h,p),C=de.toNumber(de.divide(y,de.BigInt(v)));switch(r){case"day":return{deltaDays:C,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return wl(C,0,0,0,0,0);case"minute":return wl(i,C,0,0,0,0);case"second":return wl(i,e,C,0,0,0);case"millisecond":return wl(i,e,t,C,0,0);case"microsecond":return wl(i,e,t,s,C,0);case"nanosecond":return wl(i,e,t,s,a,C);default:throw new Error(`Invalid unit ${r}`)}}function wg(i,e){return mb(Z(i,ni),Z(i,hi),Z(i,gi),Z(e,ni),Z(e,hi),Z(e,gi),"day").days}function ws(i,e,t){const s=js(i,e,t,void 0);return{relativeTo:s,days:wg(e,s)}}function ev(i,e,t,s,a){const l=Z(i,Mr),h=Z(i,St);return hs($a(Z(i,Ts),l,h,e,t,s,a,0,0,0,0,0,0),l,h)}function OC(i,e,t,s,a,l,h,r,p,m,g,v,y,C){let b=i,T=e,S=t,k=s,x=a,A=l,D=h,w=r,I=p,N=m;if(!wi(C)||v==="year"||v==="month"||v==="week"||v==="day"||v==="nanosecond"&&g===1)return{years:b,months:T,weeks:S,days:k,hours:x,minutes:A,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N};let q=Ku(0,x,A,D,w,I,N,0);const Y=Zp(de.toNumber(q)),X=Z(C,Mr),B=Z(C,St),j=$a(Z(C,Ts),X,B,b,T,S,k,0,0,0,0,0,0),O=$a(new(zi("%Temporal.Instant%"))(j),X,B,0,0,0,Y,0,0,0,0,0,0),R=de.subtract(O,j);return de.greaterThanOrEqual(de.multiply(de.subtract(q,R),de.BigInt(Y)),En)&&({years:b,months:T,weeks:S,days:k}=NC(b,T,S,k,0,0,0,0,0,0,0,0,0,Y,0,0,0,0,0,0,C),q=Gg(de.subtract(q,R),g,v,y),{hours:x,minutes:A,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N}=ma(0,0,0,0,0,0,de.toNumber(q),"hour")),{years:b,months:T,weeks:S,days:k,hours:x,minutes:A,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N}}function yc(i,e,t,s,a,l,h,r,p,m,g,v,y,C){let b=i,T=e,S=t,k=s,x=a,A=l,D=h,w=r,I=p,N=de.BigInt(m);const q=zi("%Temporal.Duration%");let Y,X,B,j,O=C;if(O){if(wi(O))X=O,O=Fr(O);else if(!pr(O))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Y=Z(O,St)}if(v==="year"||v==="month"||v==="week"||v==="day"){let R,L,G;N=Ku(0,x,A,D,w,I,m,0),X&&(R=ev(X,b,T,S,k)),{days:L,nanoseconds:N,dayLengthNs:G}=pb(N,R),B=de.BigInt(G),k+=L,x=A=D=w=I=0}switch(v){case"year":{if(!Y)throw new RangeError("A starting point is required for years rounding");const R=new q(b),L=Y.dateAdd,G=js(Y,O,R,void 0,L),$=js(Y,O,new q(b,T,S),void 0,L);O=G,k+=wg(G,$);const F=js(Y,O,{days:k},void 0,L),H=ms(null);H.largestUnit="year";const W=fc(Y,O,F,H).years;b+=W;const re=O;O=js(Y,O,{years:W},void 0,L),k-=wg(re,O);const he=new q(k<0?-1:1);let{days:ie}=ws(Y,O,he);ie=_r(ie);const ae=de.multiply(de.BigInt(ie),B);N=de.add(de.add(de.multiply(ae,de.BigInt(b)),de.multiply(de.BigInt(k),B)),N);const Ce=oa(N,de.toNumber(de.multiply(ae,de.BigInt(g))),y);j=de.toNumber(N)/de.toNumber(ae),b=de.toNumber(de.divide(Ce,ae)),N=En,T=S=k=0;break}case"month":{if(!Y)throw new RangeError("A starting point is required for months rounding");const R=new q(b,T),L=Y.dateAdd,G=js(Y,O,R,void 0,L),$=js(Y,O,new q(b,T,S),void 0,L);O=G,k+=wg(G,$);const F=Zp(k),H=new q(0,k<0?-1:1);let W;for({relativeTo:O,days:W}=ws(Y,O,H);_r(k)>=_r(W);)T+=F,k-=W,{relativeTo:O,days:W}=ws(Y,O,H);W=_r(W);const re=de.multiply(de.BigInt(W),B);N=de.add(de.add(de.multiply(re,de.BigInt(T)),de.multiply(de.BigInt(k),B)),N);const he=oa(N,de.toNumber(de.multiply(re,de.BigInt(g))),y);j=de.toNumber(N)/de.toNumber(re),T=de.toNumber(de.divide(he,re)),N=En,S=k=0;break}case"week":{if(!Y)throw new RangeError("A starting point is required for weeks rounding");const R=Zp(k),L=new q(0,0,k<0?-1:1);let G;for({relativeTo:O,days:G}=ws(Y,O,L);_r(k)>=_r(G);)S+=R,k-=G,{relativeTo:O,days:G}=ws(Y,O,L);G=_r(G);const $=de.multiply(de.BigInt(G),B);N=de.add(de.add(de.multiply($,de.BigInt(S)),de.multiply(de.BigInt(k),B)),N);const F=oa(N,de.toNumber(de.multiply($,de.BigInt(g))),y);j=de.toNumber(N)/de.toNumber($),S=de.toNumber(de.divide(F,$)),N=En,k=0;break}case"day":{const R=B;N=de.add(de.multiply(R,de.BigInt(k)),N);const L=oa(N,de.toNumber(de.multiply(R,de.BigInt(g))),y);j=de.toNumber(N)/de.toNumber(R),k=de.toNumber(de.divide(L,R)),N=En;break}case"hour":{let L=de.multiply(de.BigInt(x),de.BigInt(36e11));L=de.add(L,de.multiply(de.BigInt(A),de.BigInt(6e10))),L=de.add(L,de.multiply(de.BigInt(D),kl)),L=de.add(L,de.multiply(de.BigInt(w),Ua)),L=de.add(L,de.multiply(de.BigInt(I),Pr)),L=de.add(L,N),j=de.toNumber(L)/36e11;const G=oa(L,36e11*g,y);x=de.toNumber(de.divide(G,de.BigInt(36e11))),N=En,A=D=w=I=0;break}case"minute":{let L=de.multiply(de.BigInt(A),de.BigInt(6e10));L=de.add(L,de.multiply(de.BigInt(D),kl)),L=de.add(L,de.multiply(de.BigInt(w),Ua)),L=de.add(L,de.multiply(de.BigInt(I),Pr)),L=de.add(L,N),j=de.toNumber(L)/6e10;const G=oa(L,6e10*g,y);A=de.toNumber(de.divide(G,de.BigInt(6e10))),N=En,D=w=I=0;break}case"second":{let L=de.multiply(de.BigInt(D),kl);L=de.add(L,de.multiply(de.BigInt(w),Ua)),L=de.add(L,de.multiply(de.BigInt(I),Pr)),L=de.add(L,N),j=de.toNumber(L)/1e9;const G=oa(L,1e9*g,y);D=de.toNumber(de.divide(G,de.BigInt(1e9))),N=En,w=I=0;break}case"millisecond":{let L=de.multiply(de.BigInt(w),Ua);L=de.add(L,de.multiply(de.BigInt(I),Pr)),L=de.add(L,N),j=de.toNumber(L)/1e6;const G=oa(L,1e6*g,y);w=de.toNumber(de.divide(G,de.BigInt(1e6))),N=En,I=0;break}case"microsecond":{let L=de.multiply(de.BigInt(I),Pr);L=de.add(L,N),j=de.toNumber(L)/1e3;const G=oa(L,1e3*g,y);I=de.toNumber(de.divide(G,de.BigInt(1e3))),N=En;break}case"nanosecond":j=de.toNumber(N),N=oa(N,g,y)}return{years:b,months:T,weeks:S,days:k,hours:x,minutes:A,seconds:D,milliseconds:w,microseconds:I,nanoseconds:de.toNumber(N),total:j}}function cc(i,e,t,s,a,l){for(const[h,r]of[[i,s],[e,a],[t,l]])if(h!==r)return yh(h-r);return 0}function Au(i,e){let t=i%e;return bP(t,-0)?0:(t<0&&(t+=e),t)}function Hg(i){const e=jp(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function jp(i){if(i instanceof de)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=tb(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return de.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?ib:En}}const bb=(()=>{let i=de.BigInt(Date.now()%1e6);return()=>{const e=de.BigInt(Date.now()),t=de.add(de.multiply(e,Ua),i);return i=de.remainder(e,Ua),de.greaterThan(t,Kp)?Kp:de.lessThan(t,Xp)?Xp:t}})();function yh(i){return i<0?-1:i>0?1:i}function sr(i){if(i===void 0)return ms(null);if(qr(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function Qu(i,e){const t=ms(null);return t[i]=e,t}function xc(i,e,t,s){let a=i[e];if(a!==void 0){if(a=Fi(a),!t.includes(a))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${a}`);return a}return s}function jC(i){return sC.call(TP,i)}const BC=new RegExp(`^${iC.source}$`);function FC(i,e,t,s=i(e),a=i(t)){let l=de.BigInt(e),h=de.BigInt(t),r=s,p=a;for(;de.greaterThan(de.subtract(h,l),ib);){const m=de.divide(de.add(l,h),de.BigInt(2)),g=i(m);if(g===r)l=m,r=g;else{if(g!==p)throw new Error(`invalid state in bisection ${r} - ${g} - ${p}`);h=m,p=g}}return h}const _b={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},UC=Symbol("date"),$C=Symbol("ym"),VC=Symbol("md"),GC=Symbol("time"),HC=Symbol("datetime"),WC=Symbol("zoneddatetime"),qC=Symbol("instant"),Gu=Symbol("original"),tv=Symbol("timezone"),Tg=Symbol("timezone-id-given"),wa=Symbol("calendar-id"),YC=Symbol("locale"),iv=Symbol("options"),Bp=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),xh=globalThis.Intl.DateTimeFormat,$o=Object.assign,AP=Object.prototype.hasOwnProperty,MP=Reflect.apply;function nh(i,e){let t=i[e];return typeof t=="function"&&(t=new xh(i[YC],t(i[iv])),i[e]=t),t}function _p(i){let e=i[tv];return typeof e=="string"&&(e=Fs(e),i[tv]=e),e}function Mh(i,e={}){if(!(this instanceof Mh))return new Mh(i,e);const t=e!==void 0,s=t?$o({},e):{},a=new xh(i,s),l=a.resolvedOptions();if(t){const h=$o({},l);for(const r in h)MP(AP,s,[r])||delete h[r];this[iv]=h}else this[iv]=s;this[Tg]=s.timeZone?s.timeZone:null,this[YC]=l.locale,this[Gu]=a,this[tv]=l.timeZone,this[wa]=l.calendar,this[UC]=LP,this[$C]=IP,this[VC]=DP,this[GC]=PP,this[HC]=RP,this[WC]=zP,this[qC]=NP}Object.defineProperty(Mh,"name",{writable:!0,value:"DateTimeFormat"}),Mh.supportedLocalesOf=function(i,e){return xh.supportedLocalesOf(i,e)};const c0={resolvedOptions:Bp(function(){return this[Gu].resolvedOptions()}),format:Bp(function(e,...t){let{instant:s,formatter:a,timeZone:l}=Hu(e,this);return s&&a?(a=Wg(a,l),a.format(s.epochMilliseconds)):this[Gu].format(e,...t)}),formatRange:Bp(function(e,t){if(Ju(e)||Ju(t)){if(!ZC(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:s,formatter:a,timeZone:l}=Hu(e,this),{instant:h,formatter:r,timeZone:p}=Hu(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(s&&h&&a&&r&&a===r)return Wg(a,l).formatRange(s.epochMilliseconds,h.epochMilliseconds)}return this[Gu].formatRange(e,t)})};"formatToParts"in xh.prototype&&(c0.formatToParts=Bp(function(e,...t){let{instant:s,formatter:a,timeZone:l}=Hu(e,this);return s&&a?(a=Wg(a,l),a.formatToParts(s.epochMilliseconds)):this[Gu].formatToParts(e,...t)})),"formatRangeToParts"in xh.prototype&&(c0.formatRangeToParts=Bp(function(e,t){if(Ju(e)||Ju(t)){if(!ZC(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:s,formatter:a,timeZone:l}=Hu(e,this),{instant:h,formatter:r,timeZone:p}=Hu(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(s&&h&&a&&r&&a===r)return Wg(a,l).formatRangeToParts(s.epochMilliseconds,h.epochMilliseconds)}return this[Gu].formatRangeToParts(e,t)})),Mh.prototype=Object.create(xh.prototype,c0),Object.defineProperty(Mh,"prototype",{writable:!1,enumerable:!1,configurable:!1});const zh=Mh;function Wg(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new xh(t.locale,{...t,timeZone:e}))}function Of(i={},e={}){const t=$o({},i);for(const s of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[s]=s in e?e[s]:t[s],t[s]!==!1&&t[s]!==void 0||delete t[s];return t}function PP(i){let e=Of(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return $y(e)||(e=$o({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function IP(i){let e=Of(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=$o(e,{year:"numeric",month:"numeric"})),e}function DP(i){let e=Of(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=$o({},e,{month:"numeric",day:"numeric"})),e}function LP(i){let e=Of(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Uy(e)||(e=$o({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function RP(i){let e=Of(i,{timeZoneName:!1});return $y(e)||Uy(e)||(e=$o({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function zP(i){let e=i;return $y(e)||Uy(e)||(e=$o({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function NP(i){let e=i;return $y(e)||Uy(e)||(e=$o({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Uy(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function $y(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function Ju(i){return pr(i)||yn(i)||Qi(i)||wi(i)||Er(i)||ts(i)||Fn(i)}function ZC(i,e){return!(!Ju(i)||!Ju(e))&&!(yn(i)&&!yn(e))&&!(pr(i)&&!pr(e))&&!(Qi(i)&&!Qi(e))&&!(wi(i)&&!wi(e))&&!(Er(i)&&!Er(e))&&!(ts(i)&&!ts(e))&&!(Fn(i)&&!Fn(e))}function Hu(i,e){const t=zi("%Temporal.PlainDateTime%");if(yn(i)){const s=new t(1970,1,1,Z(i,Gi),Z(i,Hi),Z(i,Wi),Z(i,qi),Z(i,Yi),Z(i,Zi),e[wa]);return{instant:Bs(_p(e),s,"compatible"),formatter:nh(e,GC)}}if(Er(i)){const s=Z(i,ni),a=Z(i,hi),l=Z(i,gi),h=Fi(Z(i,St));if(h!==e[wa])throw new RangeError(`cannot format PlainYearMonth with calendar ${h} in locale with calendar ${e[wa]}`);const r=new t(s,a,l,12,0,0,0,0,0,h);return{instant:Bs(_p(e),r,"compatible"),formatter:nh(e,$C)}}if(ts(i)){const s=Z(i,ni),a=Z(i,hi),l=Z(i,gi),h=Fi(Z(i,St));if(h!==e[wa])throw new RangeError(`cannot format PlainMonthDay with calendar ${h} in locale with calendar ${e[wa]}`);const r=new t(s,a,l,12,0,0,0,0,0,h);return{instant:Bs(_p(e),r,"compatible"),formatter:nh(e,VC)}}if(pr(i)){const s=Z(i,ni),a=Z(i,hi),l=Z(i,gi),h=Fi(Z(i,St));if(h!=="iso8601"&&h!==e[wa])throw new RangeError(`cannot format PlainDate with calendar ${h} in locale with calendar ${e[wa]}`);const r=new t(s,a,l,12,0,0,0,0,0,e[wa]);return{instant:Bs(_p(e),r,"compatible"),formatter:nh(e,UC)}}if(Qi(i)){const s=Z(i,ni),a=Z(i,hi),l=Z(i,gi),h=Z(i,Gi),r=Z(i,Hi),p=Z(i,Wi),m=Z(i,qi),g=Z(i,Yi),v=Z(i,Zi),y=Fi(Z(i,St));if(y!=="iso8601"&&y!==e[wa])throw new RangeError(`cannot format PlainDateTime with calendar ${y} in locale with calendar ${e[wa]}`);let C=i;return y==="iso8601"&&(C=new t(s,a,l,h,r,p,m,g,v,e[wa])),{instant:Bs(_p(e),C,"compatible"),formatter:nh(e,HC)}}if(wi(i)){const s=Fi(Z(i,St));if(s!=="iso8601"&&s!==e[wa])throw new RangeError(`cannot format ZonedDateTime with calendar ${s} in locale with calendar ${e[wa]}`);const a=Fi(Z(i,Mr));if(e[Tg]&&e[Tg]!==a)throw new RangeError(`timeZone option ${e[Tg]} doesn't match actual time zone ${a}`);return{instant:Z(i,Ts),formatter:nh(e,WC),timeZone:a}}return Fn(i)?{instant:i,formatter:nh(e,qC)}:{}}class co{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=jp(e);ch(t),Xo(this),Ji(this,Ri,t)}get epochSeconds(){if(!Fn(this))throw new TypeError("invalid receiver");const e=Z(this,Ri);return de.toNumber(de.divide(e,kl))}get epochMilliseconds(){if(!Fn(this))throw new TypeError("invalid receiver");const e=de.BigInt(Z(this,Ri));return de.toNumber(de.divide(e,Ua))}get epochMicroseconds(){if(!Fn(this))throw new TypeError("invalid receiver");const e=de.BigInt(Z(this,Ri));return Hg(de.divide(e,Pr))}get epochNanoseconds(){if(!Fn(this))throw new TypeError("invalid receiver");return Hg(de.BigInt(Z(this,Ri)))}add(e){if(!Fn(this))throw new TypeError("invalid receiver");return mw("add",this,e)}subtract(e){if(!Fn(this))throw new TypeError("invalid receiver");return mw("subtract",this,e)}until(e,t){if(!Fn(this))throw new TypeError("invalid receiver");return lw("until",this,e,t)}since(e,t){if(!Fn(this))throw new TypeError("invalid receiver");return lw("since",this,e,t)}round(e){if(!Fn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Qu("smallestUnit",e):sr(e),s=Zn(t,"smallestUnit","time",Eh),a=Zs(t,"halfExpand"),l=Dl(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[s],!0),h=Gg(Z(this,Ri),l,s,a);return new co(h)}equals(e){if(!Fn(this))throw new TypeError("invalid receiver");const t=Lo(e),s=Z(this,Ri),a=Z(t,Ri);return de.equal(de.BigInt(s),de.BigInt(a))}toString(e){if(!Fn(this))throw new TypeError("invalid receiver");const t=sr(e);let s=t.timeZone;s!==void 0&&(s=Fs(s));const{precision:a,unit:l,increment:h}=Df(t),r=Zs(t,"trunc"),p=Gg(Z(this,Ri),h,l,r);return ew(new co(p),s,a)}toJSON(){if(!Fn(this))throw new TypeError("invalid receiver");return ew(this,void 0,"auto")}toLocaleString(e,t){if(!Fn(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Fn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const s=ns(t),a=e.timeZone;if(a===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const l=Fs(a);return hs(Z(this,Ri),l,s)}toZonedDateTimeISO(e){let t=e;if(!Fn(this))throw new TypeError("invalid receiver");if(qr(t)){const l=t.timeZone;l!==void 0&&(t=l)}const s=Fs(t),a=An();return hs(Z(this,Ri),s,a)}static fromEpochSeconds(e){const t=Qp(e),s=de.multiply(de.BigInt(t),kl);return ch(s),new co(s)}static fromEpochMilliseconds(e){const t=Qp(e),s=de.multiply(de.BigInt(t),Ua);return ch(s),new co(s)}static fromEpochMicroseconds(e){const t=jp(e),s=de.multiply(t,Pr);return ch(s),new co(s)}static fromEpochNanoseconds(e){const t=jp(e);return ch(t),new co(t)}static from(e){return Fn(e)?new co(Z(e,Ri)):Lo(e)}static compare(e,t){const s=Lo(e),a=Lo(t),l=Z(s,Ri),h=Z(a,Ri);return de.lessThan(l,h)?-1:de.greaterThan(l,h)?1:0}}Zo(co,"Temporal.Instant");const qg=Array.prototype.includes,OP=Array.prototype.push,jP=globalThis.Intl.DateTimeFormat,BP=Array.prototype.sort,FP=Math.abs,UP=Math.floor,rv=Object.entries,bw=Object.keys,xn={};class Yg{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Fi(e);if(!jC(t))throw new RangeError(`invalid calendar identifier ${t}`);Xo(this),Ji(this,Tn,t)}get id(){if(!wn(this))throw new TypeError("invalid receiver");return Fi(this)}dateFromFields(e,t){if(!wn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid fields");const s=sr(t);return xn[Z(this,Tn)].dateFromFields(e,s,this)}yearMonthFromFields(e,t){if(!wn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid fields");const s=sr(t);return xn[Z(this,Tn)].yearMonthFromFields(e,s,this)}monthDayFromFields(e,t){if(!wn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid fields");const s=sr(t);return xn[Z(this,Tn)].monthDayFromFields(e,s,this)}fields(e){if(!wn(this))throw new TypeError("invalid receiver");const t=[],s=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const a of e){if(typeof a!="string")throw new TypeError("invalid fields");if(!s.has(a))throw new RangeError(`invalid field name ${a}`);s.delete(a),OP.call(t,a)}return xn[Z(this,Tn)].fields(t)}mergeFields(e,t){if(!wn(this))throw new TypeError("invalid receiver");return xn[Z(this,Tn)].mergeFields(e,t)}dateAdd(e,t,s){if(!wn(this))throw new TypeError("invalid receiver");const a=Fr(e),l=Vu(t),h=kn(sr(s)),{days:r}=ma(Z(l,Is),Z(l,Ds),Z(l,Ls),Z(l,Rs),Z(l,zs),Z(l,Ns),Z(l,Os),"day");return xn[Z(this,Tn)].dateAdd(a,Z(l,Ps),Z(l,es),Z(l,qs),r,h,this)}dateUntil(e,t,s){if(!wn(this))throw new TypeError("invalid receiver");const a=Fr(e),l=Fr(t);let h=Zn(sr(s),"largestUnit","date","auto");h==="auto"&&(h="day");const{years:r,months:p,weeks:m,days:g}=xn[Z(this,Tn)].dateUntil(a,l,h);return new(zi("%Temporal.Duration%"))(r,p,m,g,0,0,0,0,0,0)}year(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].year(t)}month(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");if(ts(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].month(t)}monthCode(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||ts(t)||(t=Fr(t)),xn[Z(this,Tn)].monthCode(t)}day(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return ts(t)||(t=Fr(t)),xn[Z(this,Tn)].day(t)}era(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].era(t)}eraYear(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].eraYear(t)}dayOfWeek(e){if(!wn(this))throw new TypeError("invalid receiver");const t=Fr(e);return xn[Z(this,Tn)].dayOfWeek(t)}dayOfYear(e){if(!wn(this))throw new TypeError("invalid receiver");const t=Fr(e);return xn[Z(this,Tn)].dayOfYear(t)}weekOfYear(e){if(!wn(this))throw new TypeError("invalid receiver");const t=Fr(e);return xn[Z(this,Tn)].weekOfYear(t)}daysInWeek(e){if(!wn(this))throw new TypeError("invalid receiver");const t=Fr(e);return xn[Z(this,Tn)].daysInWeek(t)}daysInMonth(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].daysInMonth(t)}daysInYear(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].daysInYear(t)}monthsInYear(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].monthsInYear(t)}inLeapYear(e){let t=e;if(!wn(this))throw new TypeError("invalid receiver");return Er(t)||(t=Fr(t)),xn[Z(this,Tn)].inLeapYear(t)}toString(){if(!wn(this))throw new TypeError("invalid receiver");return Z(this,Tn)}toJSON(){if(!wn(this))throw new TypeError("invalid receiver");return Fi(this)}static from(e){return ns(e)}}function wb(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function Ml(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function Cg(i,e,t=12){let{month:s,monthCode:a}=i;if(a===void 0){if(s===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ps(s,1,t),e==="constrain"&&(s=da(s,1,t)),a=Ml(s)}else{const l=wb(a);if(s!==void 0&&s!==l)throw new RangeError(`monthCode ${a} and month ${s} must match if both are present`);if(a!==Ml(l))throw new RangeError(`Invalid month code: ${a}`);if(s=l,s<1||s>t)throw new RangeError(`Invalid monthCode: ${a}`)}return{...i,month:s,monthCode:a}}Zo(Yg,"Temporal.Calendar"),W0("Temporal.Calendar.from",Yg.from),xn.iso8601={dateFromFields(i,e,t){const s=kn(e);let a=rr(i,["day","month","monthCode","year"],["year","day"]);a=Cg(a);let{year:l,month:h,day:r}=a;return{year:l,month:h,day:r}=Bg(l,h,r,s),ro(l,h,r,t)},yearMonthFromFields(i,e,t){const s=kn(e);let a=rr(i,["month","monthCode","year"],["year"]);a=Cg(a);let{year:l,month:h}=a;return{year:l,month:h}=function(p,m,g){let v=p,y=m;switch(g){case"reject":Uo(v,y,1);break;case"constrain":({year:v,month:y}=PC(v,y))}return{year:v,month:y}}(l,h,s),rf(l,h,t,1)},monthDayFromFields(i,e,t){const s=kn(e);let a=rr(i,["day","month","monthCode","year"],["day"]);if(a.month!==void 0&&a.year===void 0&&a.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const l=a.monthCode===void 0;a=Cg(a);let{month:h,day:r,year:p}=a;return{month:h,day:r}=Bg(l?p:1972,h,r,s),tf(h,r,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const a of bw(i))a!=="month"&&a!=="monthCode"&&(t[a]=i[a]);const s=bw(e);for(const a of s)t[a]=e[a];if(!qg.call(s,"month")&&!qg.call(s,"monthCode")){const{month:a,monthCode:l}=i;a!==void 0&&(t.month=a),l!==void 0&&(t.monthCode=l)}return t},dateAdd(i,e,t,s,a,l,h){let r=Z(i,ni),p=Z(i,hi),m=Z(i,gi);return{year:r,month:p,day:m}=gh(r,p,m,e,t,s,a,l),ro(r,p,m,h)},dateUntil:(i,e,t)=>mb(Z(i,ni),Z(i,hi),Z(i,gi),Z(e,ni),Z(e,hi),Z(e,gi),t),year:i=>Z(i,ni),era(){},eraYear(){},month:i=>Z(i,hi),monthCode:i=>Ml(Z(i,hi)),day:i=>Z(i,gi),dayOfWeek:i=>l0(Z(i,ni),Z(i,hi),Z(i,gi)),dayOfYear:i=>Vg(Z(i,ni),Z(i,hi),Z(i,gi)),weekOfYear:i=>function(t,s,a){const l=Vg(t,s,a),h=l0(t,s,a)||7,r=l0(t,1,1),p=Yn((l-h+10)/7);return p<1?r===5||r===6&&lc(t-1)?53:52:p===53&&(lc(t)?366:365)-l<4-h?1:p}(Z(i,ni),Z(i,hi),Z(i,gi)),daysInWeek:()=>7,daysInMonth:i=>Al(Z(i,ni),Z(i,hi)),daysInYear(i){let e=i;return Kn(e,ni)||(e=Fr(e)),lc(Z(e,ni))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return Kn(e,ni)||(e=Fr(e)),lc(Z(e,ni))}};class hn{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const s of e.map.entries()){if(++t>hn.MAX_CACHE_ENTRIES)break;this.map.set(...s)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(hn.objectMap.get(e))throw new RangeError("object already cached");hn.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=hn.objectMap.get(e);return t||(t=new hn,hn.objectMap.set(e,t)),t}}function XC({isoYear:i,isoMonth:e,isoDay:t}){return`${Rh(i)}-${sn(e)}-${sn(t)}T00:00Z`}function h0(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}hn.objectMap=new WeakMap,hn.MAX_CACHE_ENTRIES=1e3;class pd{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new jP(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:s,month:a,day:l}=e,h=JSON.stringify({func:"isoToCalendarDate",isoYear:s,isoMonth:a,isoDay:l,id:this.id}),r=t.get(h);if(r)return r;const p=this.getFormatter();let m,g;try{g=XC({isoYear:s,isoMonth:a,isoDay:l}),m=p.formatToParts(new Date(g))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:s,isoMonth:a,isoDay:l})}`)}const v={};for(let{type:C,value:b}of m){if(C==="year"&&(v.eraYear=+b),C==="relatedYear"&&(v.eraYear=+b),C==="month"){const T=/^([0-9]*)(.*?)$/.exec(b);if(!T||T.length!=3||!T[1]&&!T[2])throw new RangeError(`Unexpected month: ${b}`);if(v.month=T[1]?+T[1]:1,v.month<1)throw new RangeError(`Invalid month ${b} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(v.month>13)throw new RangeError(`Invalid month ${b} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);T[2]&&(v.monthExtra=T[2])}C==="day"&&(v.day=+b),this.hasEra&&C==="era"&&b!=null&&b!==""&&(b=b.split(" (")[0],v.era=b.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(v.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:C,eraYear:b}=this.reviseIntlEra(v,e);v.era=C,v.eraYear=b}this.checkIcuBugs&&this.checkIcuBugs(e);const y=this.adjustCalendarDate(v,t,"constrain",!0);if(y.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(y.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(y.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(h,y),["constrain","reject"].forEach(C=>{const b=JSON.stringify({func:"calendarToIsoDate",year:y.year,month:y.month,day:y.day,overflow:C,id:this.id});t.set(b,e)}),y}validateCalendarDate(e){const{era:t,month:s,year:a,day:l,eraYear:h,monthCode:r,monthExtra:p}=e;if(p!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(a===void 0&&h===void 0)throw new TypeError("year or eraYear is required");if(s===void 0&&r===void 0)throw new TypeError("month or monthCode is required");if(l===void 0)throw new RangeError("Missing day");if(r!==void 0){if(typeof r!="string")throw new RangeError("monthCode must be a string, not "+typeof r);if(!/^M([01]?\d)(L?)$/.test(r))throw new RangeError(`Invalid monthCode: ${r}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(h!==void 0&&a!==void 0&&h!==a)throw new RangeError(`eraYear ${h} does not match year ${a}`)}}adjustCalendarDate(e,t,s="constrain",a=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let l=e;if(this.validateCalendarDate(l),this.constantEra){const{year:m,eraYear:g}=l;l={...l,era:this.constantEra,year:m!==void 0?m:g,eraYear:g!==void 0?g:m}}const h=this.monthsInYear(l,t);let{month:r,monthCode:p}=l;return{month:r,monthCode:p}=Cg(l,s,h),{...l,month:r,monthCode:p}}regulateMonthDayNaive(e,t,s){const a=this.monthsInYear(e,s);let{month:l,day:h}=e;return t==="reject"?(ps(l,1,a),ps(h,1,this.maximumMonthLength(e))):(l=da(l,1,a),h=da(h,1,this.maximumMonthLength({...e,month:l}))),{...e,month:l,day:h}}calendarToIsoDate(e,t="constrain",s){const a=e;let l=this.adjustCalendarDate(e,s,t,!1);l=this.regulateMonthDayNaive(l,t,s);const{year:h,month:r,day:p}=l,m=JSON.stringify({func:"calendarToIsoDate",year:h,month:r,day:p,overflow:t,id:this.id});let g,v=s.get(m);if(v||a.year!==void 0&&a.month!==void 0&&a.day!==void 0&&(a.year!==l.year||a.month!==l.month||a.day!==l.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:a.year,month:a.month,day:a.day,overflow:t,id:this.id}),v=s.get(g),v))return v;let y=this.estimateIsoDate({year:h,month:r,day:p});const C=A=>{let D=this.addDaysIso(y,A);if(l.day>this.minimumMonthLength(l)){let w=this.isoToCalendarDate(D,s);for(;w.month!==r||w.year!==h;){if(t==="reject")throw new RangeError(`day ${p} does not exist in month ${r} of year ${h}`);D=this.addDaysIso(D,-1),w=this.isoToCalendarDate(D,s)}}return D};let b=0,T=this.isoToCalendarDate(y,s),S=h0(l,T);if(S.years!==0||S.months!==0||S.days!==0){const A=365*S.years+30*S.months+S.days;y=this.addDaysIso(y,A),T=this.isoToCalendarDate(y,s),S=h0(l,T),S.years===0&&S.months===0?y=C(S.days):b=this.compareCalendarDates(l,T)}let k=8,x=!1;for(;b;){y=this.addDaysIso(y,b*k);const A=T;T=this.isoToCalendarDate(y,s);const D=b;if(b=this.compareCalendarDates(l,T),b){if(S=h0(l,T),S.years===0&&S.months===0)y=C(S.days),b=0,x=l.day>this.minimumMonthLength(l);else if(D&&b!==D)if(k>1)k/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...a})}`);this.compareCalendarDates(T,A)>0&&(y=this.addDaysIso(y,-1)),x=!0,b=0}}}if(s.set(m,y),g&&s.set(g,y),l.year===void 0||l.month===void 0||l.day===void 0||l.monthCode===void 0||this.hasEra&&(l.era===void 0||l.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!x){const A=JSON.stringify({func:"isoToCalendarDate",isoYear:y.year,isoMonth:y.month,isoDay:y.day,id:this.id});s.set(A,l)}return y}temporalToCalendarDate(e,t){const s={year:Z(e,ni),month:Z(e,hi),day:Z(e,gi)};return this.isoToCalendarDate(s,t)}compareCalendarDates(e,t){const s=rr(e,["day","month","year"],["day","month","year"]),a=rr(t,["day","month","year"],["day","month","year"]);return s.year!==a.year?yh(s.year-a.year):s.month!==a.month?yh(s.month-a.month):s.day!==a.day?yh(s.day-a.day):0}regulateDate(e,t="constrain",s){const a=this.calendarToIsoDate(e,t,s);return this.isoToCalendarDate(a,s)}addDaysIso(e,t){return gh(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,s){const a=this.calendarToIsoDate(e,"constrain",s),l=this.addDaysIso(a,t);return this.isoToCalendarDate(l,s)}addMonthsCalendar(e,t,s,a){let l=e;const{day:h}=l;for(let r=0,p=FP(t);r<p;r++){const{month:m}=l,g=l,v=t<0?-Math.max(h,this.daysInPreviousMonth(l,a)):this.daysInMonth(l,a),y=this.calendarToIsoDate(l,"constrain",a);let C=this.addDaysIso(y,v);if(l=this.isoToCalendarDate(C,a),t>0){const b=this.monthsInYear(g,a);for(;l.month-1!=m%b;)C=this.addDaysIso(C,-1),l=this.isoToCalendarDate(C,a)}l.day!==h&&(l=this.regulateDate({...l,day:h},"constrain",a))}if(s==="reject"&&l.day!==h)throw new RangeError(`Day ${h} does not exist in resulting calendar month`);return l}addCalendar(e,{years:t=0,months:s=0,weeks:a=0,days:l=0},h,r){const{year:p,day:m,monthCode:g}=e,v=this.adjustCalendarDate({year:p+t,monthCode:g,day:m},r),y=this.addMonthsCalendar(v,s,h,r),C=l+7*a;return this.addDaysCalendar(y,C,r)}untilCalendar(e,t,s,a){let l=0,h=0,r=0,p=0;switch(s){case"day":l=this.calendarDaysUntil(e,t,a);break;case"week":{const m=this.calendarDaysUntil(e,t,a);l=m%7,h=(m-l)/7;break}case"month":case"year":{const m=t.year-e.year,g=t.month-e.month,v=t.day-e.day,y=this.compareCalendarDates(t,e);if(!y)return{years:0,months:0,weeks:0,days:0};s==="year"&&m&&(p=g*y<0||g===0&&v*y<0?m-y:m);let C,b=p?this.addCalendar(e,{years:p},"constrain",a):e;do r+=y,C=b,b=this.addMonthsCalendar(C,y,"constrain",a),b.day!==e.day&&(b=this.regulateDate({...b,day:e.day},"constrain",a));while(this.compareCalendarDates(t,b)*y>=0);r-=y,l=this.calendarDaysUntil(C,t,a);break}}return{years:p,months:r,weeks:h,days:l}}daysInMonth(e,t){const{day:s}=e,a=this.maximumMonthLength(e),l=this.minimumMonthLength(e);if(l===a)return l;const h=s<=a-l?a:l,r=this.calendarToIsoDate(e,"constrain",t),p=this.addDaysIso(r,h),m=this.isoToCalendarDate(p,t),g=this.addDaysIso(p,-m.day);return this.isoToCalendarDate(g,t).day}daysInPreviousMonth(e,t){const{day:s,month:a,year:l}=e;let h={year:a>1?l:l-1,month:a,day:1};const r=a>1?a-1:this.monthsInYear(h,t);h={...h,month:r};const p=this.minimumMonthLength(h),m=this.maximumMonthLength(h);if(p===m)return m;const g=this.calendarToIsoDate(e,"constrain",t),v=this.addDaysIso(g,-s);return this.isoToCalendarDate(v,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,s){const a=this.calendarToIsoDate(e,"constrain",s),l=this.calendarToIsoDate(t,"constrain",s);return this.isoDaysUntil(a,l)}isoDaysUntil(e,t){return mb(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,s){let a,l,h,r,p,{year:m,month:g,monthCode:v,day:y,era:C,eraYear:b}=e;if(v===void 0){if(m===void 0&&(C===void 0||b===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:v,year:m}=this.adjustCalendarDate({year:m,month:g,monthCode:v,day:y,era:C,eraYear:b},s,t))}const{year:T}=this.isoToCalendarDate({year:1972,month:1,day:1},s);for(let S=0;S<100;S++){const k=this.adjustCalendarDate({day:y,monthCode:v,year:T-S},s),x=this.calendarToIsoDate(k,"constrain",s),A=this.isoToCalendarDate(x,s);if({year:a,month:l,day:h}=x,A.monthCode===v&&A.day===y)return{month:l,day:h,year:a};t==="constrain"&&(r===void 0||A.monthCode===r.monthCode&&A.day>r.day)&&(r=A,p=x)}if(t==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${v} and day ${y}`)}}class $P extends pd{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:s,year:a}=e,l=this.getMonthCode(a,s),h=rv(this.months).find(p=>p[1].monthCode===l);if(h===void 0)throw new RangeError(`unmatched Hebrew month: ${s}`);const r=h[1].days;return typeof r=="number"?r:r[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?Ml(5,!0):Ml(t<6?t:t-1):Ml(t)}adjustCalendarDate(e,t,s="constrain",a=!1){let{year:l,eraYear:h,month:r,monthCode:p,day:m,monthExtra:g}=e;if(l===void 0&&h!==void 0&&(l=h),h===void 0&&l!==void 0&&(h=l),a){if(g){const v=this.months[g];if(!v)throw new RangeError(`Unrecognized month from formatToParts: ${g}`);r=this.inLeapYear({year:l})?v.leap:v.regular}return p=this.getMonthCode(l,r),{year:l,month:r,day:m,era:void 0,eraYear:h,monthCode:p}}if(this.validateCalendarDate(e),r===void 0)if(p.endsWith("L")){if(p!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${p}`);if(r=6,!this.inLeapYear({year:l})){if(s==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${l} which is not a leap year`);r=5,m=30,p="M05"}}else{r=wb(p),this.inLeapYear({year:l})&&r>=6&&r++;const v=this.monthsInYear({year:l});if(r<1||r>v)throw new RangeError(`Invalid monthCode: ${p}`)}else if(s==="reject"?(ps(r,1,this.monthsInYear({year:l})),ps(m,1,this.maximumMonthLength({year:l,month:r}))):(r=da(r,1,this.monthsInYear({year:l})),m=da(m,1,this.maximumMonthLength({year:l,month:r}))),p===void 0)p=this.getMonthCode(l,r);else if(this.getMonthCode(l,r)!==p)throw new RangeError(`monthCode ${p} doesn't correspond to month ${r} in Hebrew year ${l}`);return{...e,day:m,month:r,monthCode:p,year:l,eraYear:h}}}class fd extends pd{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:UP(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class KC extends fd{constructor(){super(...arguments),this.id="islamic"}}class VP extends fd{constructor(){super(...arguments),this.id="islamic-umalqura"}}class GP extends fd{constructor(){super(...arguments),this.id="islamic-tbla"}}class HP extends fd{constructor(){super(...arguments),this.id="islamic-civil"}}class WP extends fd{constructor(){super(...arguments),this.id="islamic-rgsa"}}class qP extends fd{constructor(){super(...arguments),this.id="islamicc"}}class YP extends pd{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return KC.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class ZP extends pd{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return QC(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let s=this.months[t];if(s===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&s.leap&&(s=s.leap),s}estimateIsoDate(e){const t=this.adjustCalendarDate(e),s=this.getMonthInfo(t);return gh(t.year+78+(s.nextYear?1:0),s.month,s.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function QC(i){return i%4==0&&(i%100!=0||i%400==0)}class jf extends pd{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:s,anchorEra:a}=function(h){let r,p=h;if(p.length===0)throw new RangeError("Invalid era data: eras are required");if(p.length===1&&p[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(p.length===1&&!p[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(p.filter(g=>g.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");p.forEach(g=>{if(g.isAnchor||!g.anchorEpoch&&!g.reverseOf){if(r)throw new RangeError("Invalid era data: cannot have multiple anchor eras");r=g,g.anchorEpoch={year:g.hasYearZero?0:1}}else if(!g.name)throw new RangeError("If era name is blank, it must be the anchor era")}),p=p.filter(g=>g.name),p.forEach(g=>{const{reverseOf:v}=g;if(v){const y=p.find(C=>C.name===v);if(y===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${v}`);g.reverseOf=y,g.anchorEpoch=y.anchorEpoch,g.isoEpoch=y.isoEpoch}g.anchorEpoch.month===void 0&&(g.anchorEpoch.month=1),g.anchorEpoch.day===void 0&&(g.anchorEpoch.day=1)}),BP.call(p,(g,v)=>{if(g.reverseOf)return 1;if(v.reverseOf)return-1;if(!g.isoEpoch||!v.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return v.isoEpoch.year-g.isoEpoch.year});const m=p[p.length-1].reverseOf;if(m&&m!==p[p.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return p.forEach((g,v)=>{g.genericName="era"+(p.length-1-v)}),{eras:p,anchorEra:r||p[0]}}(t);this.anchorEra=a,this.eras=s}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return QC(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(r,p)=>{const m=e[r];if(m!=null&&m!=p)throw new RangeError(`Input ${r} ${m} doesn't match calculated value ${p}`)},s=r=>{let p;const m={...e,year:r},g=this.eras.find((v,y)=>{if(y===this.eras.length-1){if(v.reverseOf){if(r>0)throw new RangeError(`Signed year ${r} is invalid for era ${v.name}`);return p=v.anchorEpoch.year-r,!0}return p=r-v.anchorEpoch.year+(v.hasYearZero?0:1),!0}return this.compareCalendarDates(m,v.anchorEpoch)>=0&&(p=r-v.anchorEpoch.year+(v.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${r} was not matched by any era`);return{eraYear:p,era:g.name}};let{year:a,eraYear:l,era:h}=e;if(a!=null)({eraYear:l,era:h}=s(a)),t("era",h),t("eraYear",l);else{if(l==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const r=h===void 0?void 0:this.eras.find(p=>p.name===h||p.genericName===h);if(!r)throw new RangeError(`Era ${h} (ISO year ${l}) was not matched by any era`);if(l<1&&r.reverseOf)throw new RangeError(`Years in ${h} era must be positive, not ${a}`);a=r.reverseOf?r.anchorEpoch.year-l:l+r.anchorEpoch.year-(r.hasYearZero?0:1),t("year",a),{eraYear:l,era:h}=s(a)}}return{...e,year:a,eraYear:l,era:h}}adjustCalendarDate(e,t,s="constrain"){let a=e;const{month:l,monthCode:h}=a;return l===void 0&&(a={...a,month:wb(h)}),this.validateCalendarDate(a),a=this.completeEraYear(a),super.adjustCalendarDate(a,t,s)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:s,month:a,day:l}=t,{anchorEra:h}=this;return Bg(s+h.isoEpoch.year-(h.hasYearZero?0:1),a,l,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&cc(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class Tb extends jf{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class XP extends Tb{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class KP extends Tb{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class QP extends Tb{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class JP extends jf{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class eI extends jf{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class tI extends jf{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:s}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:s}}}class iI extends jf{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:s,eraYear:a}=e,{year:l}=t;return this.eras.find(h=>h.name===s)?{era:s,eraYear:a}:l<1?{era:"bce",eraYear:1-l}:{era:"ce",eraYear:l}}}class JC extends pd{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const s=this.getMonthList(e.year,t);return rv(s).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const s=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),a=t.get(s);if(a)return a;const l=this.getFormatter(),h=(S,k)=>{const x=XC({isoYear:S,isoMonth:2,isoDay:1}),A=new Date(x);A.setUTCDate(k+1);const D=l.formatToParts(A),w=D.find(q=>q.type==="month").value,I=+D.find(q=>q.type==="day").value;let N=D.find(q=>q.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:w,calendarDay:I,calendarYearToVerify:N}};let r=17,{calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=h(e,r);p!=="1"&&(r+=29,{calendarMonthString:p,calendarDay:m}=h(e,r)),r-=m-5;const v={};let y,C,b=1,T=!1;do({calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=h(e,r)),y&&(v[C].daysInMonth=y+30-m),g!==e?T=!0:(v[p]={monthIndex:b++},r+=30),y=m,C=p;while(!T);return v[C].daysInMonth=y+30-m,t.set(s,v),v}estimateIsoDate(e){const{year:t,month:s}=e;return{year:t,month:s>=12?12:s+1,day:1}}adjustCalendarDate(e,t,s="constrain",a=!1){let{year:l,month:h,monthExtra:r,day:p,monthCode:m,eraYear:g}=e;if(a){if(l=g,r&&r!=="bis")throw new RangeError(`Unexpected leap month suffix: ${r}`);const v=Ml(h,r!==void 0),y=`${h}${r||""}`,C=this.getMonthList(l,t)[y];if(C===void 0)throw new RangeError(`Unmatched month ${y} in Chinese year ${l}`);return h=C.monthIndex,{year:l,month:h,day:p,era:void 0,eraYear:g,monthCode:v}}if(this.validateCalendarDate(e),l===void 0&&(l=g),g===void 0&&(g=l),h===void 0){const v=this.getMonthList(l,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));let C=v[y];if(h=C&&C.monthIndex,h===void 0&&m.endsWith("L")&&!qg.call(["M01L","M12L","M13L"],m)&&s==="constrain"){let b=m.slice(1,-1);b[0]==="0"&&(b=b.slice(1)),C=v[b],C&&({daysInMonth:p,monthIndex:h}=C,m=Ml(b))}if(h===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${l}`)}else if(m===void 0){const v=this.getMonthList(l,t),y=rv(v),C=y.length;s==="reject"?(ps(h,1,C),ps(p,1,this.maximumMonthLength())):(h=da(h,1,C),p=da(p,1,this.maximumMonthLength()));const b=y.find(([,T])=>T.monthIndex===h);if(b===void 0)throw new RangeError(`Invalid month ${h} in Chinese year ${l}`);m=Ml(b[0].replace("bis",""),b[0].indexOf("bis")!==-1)}else{const v=this.getMonthList(l,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));const C=v[y];if(!C)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${l}`);if(h!==C.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${h} in Chinese year ${l}`)}return{...e,year:l,eraYear:g,month:h,monthCode:m,day:p}}}class rI extends JC{constructor(){super(...arguments),this.id="chinese"}}class nI extends JC{constructor(){super(...arguments),this.id="dangi"}}const sI={helper:void 0,dateFromFields(i,e,t){const s=kn(e),a=new hn,l=rr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:h,month:r,day:p}=this.helper.calendarToIsoDate(l,s,a),m=ro(h,r,p,t);return a.setObject(m),m},yearMonthFromFields(i,e,t){const s=kn(e),a=new hn,l=rr(i,["era","eraYear","month","monthCode","year"],[]),{year:h,month:r,day:p}=this.helper.calendarToIsoDate({...l,day:1},s,a),m=rf(h,r,t,p);return a.setObject(m),m},monthDayFromFields(i,e,t){const s=kn(e),a=new hn,l=rr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:h,month:r,day:p}=this.helper.monthDayFromFields(l,s,a),m=tf(r,p,t,h);return a.setObject(m),m},fields(i){let e=i;return qg.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},s={...e},{month:a,monthCode:l,year:h,era:r,eraYear:p,...m}=t,{month:g,monthCode:v,year:y,era:C,eraYear:b}=s;return g===void 0&&v===void 0&&(m.month=a,m.monthCode=l),y===void 0&&C===void 0&&b===void 0&&(m.year=h),{...m,...s}},dateAdd(i,e,t,s,a,l,h){const r=hn.getCacheForObject(i),p=this.helper.temporalToCalendarDate(i,r),m=this.helper.addCalendar(p,{years:e,months:t,weeks:s,days:a},l,r),g=this.helper.calendarToIsoDate(m,"constrain",r),{year:v,month:y,day:C}=g,b=ro(v,y,C,h);return new hn(r).setObject(b),b},dateUntil(i,e,t){const s=hn.getCacheForObject(i),a=hn.getCacheForObject(e),l=this.helper.temporalToCalendarDate(i,s),h=this.helper.temporalToCalendarDate(e,a);return this.helper.untilCalendar(l,h,t,s)},year(i){const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=hn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>xn.iso8601.dayOfWeek(i),dayOfYear(i){const e=hn.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),s=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(s,t,e)+1},weekOfYear:i=>xn.iso8601.weekOfYear(i),daysInWeek:i=>xn.iso8601.daysInWeek(i),daysInMonth(i){const e=hn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),s=this.helper.maximumMonthLength(t);if(s===this.helper.minimumMonthLength(t))return s;const a=this.helper.startOfCalendarMonth(t),l=this.helper.addMonthsCalendar(a,1,"constrain",e);return this.helper.calendarDaysUntil(a,l,e)},daysInYear(i){let e=i;Kn(e,ni)||(e=Fr(e));const t=hn.getCacheForObject(e),s=this.helper.temporalToCalendarDate(e,t),a=this.helper.startOfCalendarYear(s),l=this.helper.addCalendar(a,{years:1},"constrain",t);return this.helper.calendarDaysUntil(a,l,t)},monthsInYear(i){const e=hn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;Kn(e,ni)||(e=Fr(e));const t=hn.getCacheForObject(e),s=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(s,t)}};for(const i of[$P,YP,QP,XP,KP,rI,nI,JP,ZP,eI,tI,iI,KC,VP,GP,HP,WP,qP]){const e=new i;xn[e.id]={...sI,helper:e}}class Bf{constructor(e,t,s,a=An()){const l=Ur(e),h=Ur(t),r=Ur(s),p=ns(a);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");gC(this,l,h,r,p)}get calendar(){if(!pr(this))throw new TypeError("invalid receiver");return Z(this,St)}get era(){if(!pr(this))throw new TypeError("invalid receiver");return Dy(Z(this,St),this)}get eraYear(){if(!pr(this))throw new TypeError("invalid receiver");return Ly(Z(this,St),this)}get year(){if(!pr(this))throw new TypeError("invalid receiver");return My(Z(this,St),this)}get month(){if(!pr(this))throw new TypeError("invalid receiver");return Py(Z(this,St),this)}get monthCode(){if(!pr(this))throw new TypeError("invalid receiver");return Rf(Z(this,St),this)}get day(){if(!pr(this))throw new TypeError("invalid receiver");return Iy(Z(this,St),this)}get dayOfWeek(){if(!pr(this))throw new TypeError("invalid receiver");return sb(Z(this,St),this)}get dayOfYear(){if(!pr(this))throw new TypeError("invalid receiver");return ab(Z(this,St),this)}get weekOfYear(){if(!pr(this))throw new TypeError("invalid receiver");return ob(Z(this,St),this)}get daysInWeek(){if(!pr(this))throw new TypeError("invalid receiver");return lb(Z(this,St),this)}get daysInMonth(){if(!pr(this))throw new TypeError("invalid receiver");return zf(Z(this,St),this)}get daysInYear(){if(!pr(this))throw new TypeError("invalid receiver");return Ry(Z(this,St),this)}get monthsInYear(){if(!pr(this))throw new TypeError("invalid receiver");return zy(Z(this,St),this)}get inLeapYear(){if(!pr(this))throw new TypeError("invalid receiver");return Ny(Z(this,St),this)}with(e,t){if(!pr(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");ud(e);const s=Z(this,St),a=Rn(s,["day","month","monthCode","year"]),l=rr(e,a,"partial");if(!l)throw new TypeError("invalid date-like");let h=rr(this,a,[]);return h=Sh(s,h,l),h=rr(h,a,[]),mc(s,h,sr(t))}withCalendar(e){if(!pr(this))throw new TypeError("invalid receiver");const t=ns(e);return new Bf(Z(this,ni),Z(this,hi),Z(this,gi),t)}add(e,t){if(!pr(this))throw new TypeError("invalid receiver");const s=Vu(e),a=sr(t);return js(Z(this,St),this,s,a)}subtract(e,t){if(!pr(this))throw new TypeError("invalid receiver");const s=MC(Vu(e)),a=sr(t);return js(Z(this,St),this,s,a)}until(e,t){if(!pr(this))throw new TypeError("invalid receiver");return cw("until",this,e,t)}since(e,t){if(!pr(this))throw new TypeError("invalid receiver");return cw("since",this,e,t)}equals(e){if(!pr(this))throw new TypeError("invalid receiver");const t=Fr(e);for(const s of[ni,hi,gi])if(Z(this,s)!==Z(t,s))return!1;return Nf(Z(this,St),Z(t,St))}toString(e){if(!pr(this))throw new TypeError("invalid receiver");return tw(this,If(sr(e)))}toJSON(){if(!pr(this))throw new TypeError("invalid receiver");return tw(this)}toLocaleString(e,t){if(!pr(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!pr(this))throw new TypeError("invalid receiver");const t=Z(this,ni),s=Z(this,hi),a=Z(this,gi),l=Z(this,St);if(e===void 0)return ua(t,s,a,0,0,0,0,0,0,l);const h=El(e);return ua(t,s,a,Z(h,Gi),Z(h,Hi),Z(h,Wi),Z(h,qi),Z(h,Yi),Z(h,Zi),l)}toZonedDateTime(e){if(!pr(this))throw new TypeError("invalid receiver");let t,s;if(qr(e)){const b=e.timeZone;b===void 0?t=Fs(e):(t=Fs(b),s=e.plainTime)}else t=Fs(e);const a=Z(this,ni),l=Z(this,hi),h=Z(this,gi),r=Z(this,St);let p=0,m=0,g=0,v=0,y=0,C=0;return s!==void 0&&(s=El(s),p=Z(s,Gi),m=Z(s,Hi),g=Z(s,Wi),v=Z(s,qi),y=Z(s,Yi),C=Z(s,Zi)),hs(Z(Bs(t,ua(a,l,h,p,m,g,v,y,C,r),"compatible"),Ri),t,r)}toPlainYearMonth(){if(!pr(this))throw new TypeError("invalid receiver");const e=Z(this,St);return kh(e,rr(this,Rn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!pr(this))throw new TypeError("invalid receiver");const e=Z(this,St);return Zu(e,rr(this,Rn(e,["day","monthCode"]),[]))}getISOFields(){if(!pr(this))throw new TypeError("invalid receiver");return{calendar:Z(this,St),isoDay:Z(this,gi),isoMonth:Z(this,hi),isoYear:Z(this,ni)}}static from(e,t){const s=sr(t);return pr(e)?(kn(s),ro(Z(e,ni),Z(e,hi),Z(e,gi),Z(e,St))):Fr(e,s)}static compare(e,t){const s=Fr(e),a=Fr(t);return cc(Z(s,ni),Z(s,hi),Z(s,gi),Z(a,ni),Z(a,hi),Z(a,gi))}}Zo(Bf,"Temporal.PlainDate");class Ff{constructor(e,t,s,a=0,l=0,h=0,r=0,p=0,m=0,g=An()){const v=Ur(e),y=Ur(t),C=Ur(s),b=Ur(a),T=Ur(l),S=Ur(h),k=Ur(r),x=Ur(p),A=Ur(m),D=ns(g);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");yC(this,v,y,C,b,T,S,k,x,A,D)}get calendar(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,St)}get year(){if(!Qi(this))throw new TypeError("invalid receiver");return My(Z(this,St),this)}get month(){if(!Qi(this))throw new TypeError("invalid receiver");return Py(Z(this,St),this)}get monthCode(){if(!Qi(this))throw new TypeError("invalid receiver");return Rf(Z(this,St),this)}get day(){if(!Qi(this))throw new TypeError("invalid receiver");return Iy(Z(this,St),this)}get hour(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Gi)}get minute(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Hi)}get second(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Wi)}get millisecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,qi)}get microsecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Yi)}get nanosecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Zi)}get era(){if(!Qi(this))throw new TypeError("invalid receiver");return Dy(Z(this,St),this)}get eraYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Ly(Z(this,St),this)}get dayOfWeek(){if(!Qi(this))throw new TypeError("invalid receiver");return sb(Z(this,St),this)}get dayOfYear(){if(!Qi(this))throw new TypeError("invalid receiver");return ab(Z(this,St),this)}get weekOfYear(){if(!Qi(this))throw new TypeError("invalid receiver");return ob(Z(this,St),this)}get daysInWeek(){if(!Qi(this))throw new TypeError("invalid receiver");return lb(Z(this,St),this)}get daysInYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Ry(Z(this,St),this)}get daysInMonth(){if(!Qi(this))throw new TypeError("invalid receiver");return zf(Z(this,St),this)}get monthsInYear(){if(!Qi(this))throw new TypeError("invalid receiver");return zy(Z(this,St),this)}get inLeapYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Ny(Z(this,St),this)}with(e,t){if(!Qi(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");ud(e);const s=sr(t),a=Z(this,St),l=Rn(a,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),h=rr(e,l,"partial");if(!h)throw new TypeError("invalid date-time-like");let r=rr(this,l,[]);r=Sh(a,r,h),r=rr(r,l,[]);const{year:p,month:m,day:g,hour:v,minute:y,second:C,millisecond:b,microsecond:T,nanosecond:S}=Lf(a,r,s);return ua(p,m,g,v,y,C,b,T,S,a)}withPlainTime(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=Z(this,ni),s=Z(this,hi),a=Z(this,gi),l=Z(this,St);if(e===void 0)return ua(t,s,a,0,0,0,0,0,0,l);const h=El(e);return ua(t,s,a,Z(h,Gi),Z(h,Hi),Z(h,Wi),Z(h,qi),Z(h,Yi),Z(h,Zi),l)}withPlainDate(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=Fr(e),s=Z(t,ni),a=Z(t,hi),l=Z(t,gi);let h=Z(t,St);const r=Z(this,Gi),p=Z(this,Hi),m=Z(this,Wi),g=Z(this,qi),v=Z(this,Yi),y=Z(this,Zi);return h=_C(Z(this,St),h),ua(s,a,l,r,p,m,g,v,y,h)}withCalendar(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=ns(e);return new Ff(Z(this,ni),Z(this,hi),Z(this,gi),Z(this,Gi),Z(this,Hi),Z(this,Wi),Z(this,qi),Z(this,Yi),Z(this,Zi),t)}add(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return gw("add",this,e,t)}subtract(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return gw("subtract",this,e,t)}until(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return hw("until",this,e,t)}since(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return hw("since",this,e,t)}round(e){if(!Qi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Qu("smallestUnit",e):sr(e),s=Zn(t,"smallestUnit","time",Eh,["day"]),a=Zs(t,"halfExpand"),l=Dl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s],!1);let h=Z(this,ni),r=Z(this,hi),p=Z(this,gi),m=Z(this,Gi),g=Z(this,Hi),v=Z(this,Wi),y=Z(this,qi),C=Z(this,Yi),b=Z(this,Zi);return{year:h,month:r,day:p,hour:m,minute:g,second:v,millisecond:y,microsecond:C,nanosecond:b}=xb(h,r,p,m,g,v,y,C,b,l,s,a),ua(h,r,p,m,g,v,y,C,b,Z(this,St))}equals(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=uh(e);for(const s of[ni,hi,gi,Gi,Hi,Wi,qi,Yi,Zi])if(Z(this,s)!==Z(t,s))return!1;return Nf(Z(this,St),Z(t,St))}toString(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:s,unit:a,increment:l}=Df(t);return iw(this,s,If(t),{unit:a,increment:l,roundingMode:Zs(t,"trunc")})}toJSON(){if(!Qi(this))throw new TypeError("invalid receiver");return iw(this,"auto")}toLocaleString(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!Qi(this))throw new TypeError("invalid receiver");const s=Fs(e);return hs(Z(Bs(s,this,ef(sr(t))),Ri),s,Z(this,St))}toPlainDate(){if(!Qi(this))throw new TypeError("invalid receiver");return Xu(this)}toPlainYearMonth(){if(!Qi(this))throw new TypeError("invalid receiver");const e=Z(this,St);return kh(e,rr(this,Rn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Qi(this))throw new TypeError("invalid receiver");const e=Z(this,St);return Zu(e,rr(this,Rn(e,["day","monthCode"]),[]))}toPlainTime(){if(!Qi(this))throw new TypeError("invalid receiver");return cb(this)}getISOFields(){if(!Qi(this))throw new TypeError("invalid receiver");return{calendar:Z(this,St),isoDay:Z(this,gi),isoHour:Z(this,Gi),isoMicrosecond:Z(this,Yi),isoMillisecond:Z(this,qi),isoMinute:Z(this,Hi),isoMonth:Z(this,hi),isoNanosecond:Z(this,Zi),isoSecond:Z(this,Wi),isoYear:Z(this,ni)}}static from(e,t){const s=sr(t);return Qi(e)?(kn(s),ua(Z(e,ni),Z(e,hi),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi),Z(e,St))):uh(e,s)}static compare(e,t){const s=uh(e),a=uh(t);for(const l of[ni,hi,gi,Gi,Hi,Wi,qi,Yi,Zi]){const h=Z(s,l),r=Z(a,l);if(h!==r)return yh(h-r)}return 0}}Zo(Ff,"Temporal.PlainDateTime");class hc{constructor(e=0,t=0,s=0,a=0,l=0,h=0,r=0,p=0,m=0,g=0){const v=Wn(e),y=Wn(t),C=Wn(s),b=Wn(a),T=Wn(l),S=Wn(h),k=Wn(r),x=Wn(p),A=Wn(m),D=Wn(g);Fy(v,y,C,b,T,S,k,x,A,D),Xo(this),Ji(this,Ps,v),Ji(this,es,y),Ji(this,qs,C),Ji(this,Is,b),Ji(this,Ds,T),Ji(this,Ls,S),Ji(this,Rs,k),Ji(this,zs,x),Ji(this,Ns,A),Ji(this,Os,D)}get years(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Ps)}get months(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,es)}get weeks(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,qs)}get days(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Is)}get hours(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Ds)}get minutes(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Ls)}get seconds(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Rs)}get milliseconds(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,zs)}get microseconds(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Ns)}get nanoseconds(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,Os)}get sign(){if(!gn(this))throw new TypeError("invalid receiver");return No(Z(this,Ps),Z(this,es),Z(this,qs),Z(this,Is),Z(this,Ds),Z(this,Ls),Z(this,Rs),Z(this,zs),Z(this,Ns),Z(this,Os))}get blank(){if(!gn(this))throw new TypeError("invalid receiver");return No(Z(this,Ps),Z(this,es),Z(this,qs),Z(this,Is),Z(this,Ds),Z(this,Ls),Z(this,Rs),Z(this,zs),Z(this,Ns),Z(this,Os))===0}with(e){if(!gn(this))throw new TypeError("invalid receiver");const t=rr(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:s=Z(this,Ps),months:a=Z(this,es),weeks:l=Z(this,qs),days:h=Z(this,Is),hours:r=Z(this,Ds),minutes:p=Z(this,Ls),seconds:m=Z(this,Rs),milliseconds:g=Z(this,zs),microseconds:v=Z(this,Ns),nanoseconds:y=Z(this,Os)}=t;return new hc(s,a,l,h,r,p,m,g,v,y)}negated(){if(!gn(this))throw new TypeError("invalid receiver");return MC(this)}abs(){if(!gn(this))throw new TypeError("invalid receiver");return new hc(Math.abs(Z(this,Ps)),Math.abs(Z(this,es)),Math.abs(Z(this,qs)),Math.abs(Z(this,Is)),Math.abs(Z(this,Ds)),Math.abs(Z(this,Ls)),Math.abs(Z(this,Rs)),Math.abs(Z(this,zs)),Math.abs(Z(this,Ns)),Math.abs(Z(this,Os)))}add(e,t){if(!gn(this))throw new TypeError("invalid receiver");return fw("add",this,e,t)}subtract(e,t){if(!gn(this))throw new TypeError("invalid receiver");return fw("subtract",this,e,t)}round(e){if(!gn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Z(this,Ps),s=Z(this,es),a=Z(this,qs),l=Z(this,Is),h=Z(this,Ds),r=Z(this,Ls),p=Z(this,Rs),m=Z(this,zs),g=Z(this,Ns),v=Z(this,Os),y=X0(t,s,a,l,h,r,p,m,g,v);const C=typeof e=="string"?Qu("smallestUnit",e):sr(e);let b=Zn(C,"smallestUnit","datetime",void 0),T=!0;b||(T=!1,b="nanosecond"),y=ga(y,b);let S=Zn(C,"largestUnit","datetime",void 0,["auto"]),k=!0;if(S||(k=!1,S=y),S==="auto"&&(S=y),!T&&!k)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(ga(S,b)!==S)throw new RangeError(`largestUnit ${S} cannot be smaller than smallestUnit ${b}`);const x=Zs(C,"halfExpand"),A=nb(C,b);let D=bg(C);return{years:t,months:s,weeks:a,days:l}=eg(t,s,a,l,S,D),{years:t,months:s,weeks:a,days:l,hours:h,minutes:r,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=yc(t,s,a,l,h,r,p,m,g,v,A,b,x,D),{years:t,months:s,weeks:a,days:l,hours:h,minutes:r,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=OC(t,s,a,l,h,r,p,m,g,v,A,b,x,D),{years:t,months:s,weeks:a,days:l}=function(I,N,q,Y,X,B){let j=I,O=N,R=q,L=Y;const G=zi("%Temporal.Duration%"),$=No(j,O,R,L,0,0,0,0,0,0);if($===0)return{years:j,months:O,weeks:R,days:L};let F,H;B&&(H=Fr(B),F=Z(H,St));const W=new G($),re=new G(0,$),he=new G(0,0,$);switch(X){case"year":{if(!F)throw new RangeError("a starting point is required for years balancing");let ie,ae,Ce;for({relativeTo:ie,days:ae}=ws(F,H,W);_r(L)>=_r(ae);)L-=ae,j+=$,H=ie,{relativeTo:ie,days:ae}=ws(F,H,W);for({relativeTo:ie,days:Ce}=ws(F,H,re);_r(L)>=_r(Ce);)L-=Ce,O+=$,H=ie,{relativeTo:ie,days:Ce}=ws(F,H,re);const ge=F.dateAdd;ie=js(F,H,W,void 0,ge);const ke=F.dateUntil,K=ms(null);K.largestUnit="month";let Q=fc(F,H,ie,K,ke),le=Z(Q,es);for(;_r(O)>=_r(le);){O-=le,j+=$,H=ie,ie=js(F,H,W,void 0,ge);const _e=ms(null);_e.largestUnit="month",Q=fc(F,H,ie,_e,ke),le=Z(Q,es)}break}case"month":{if(!F)throw new RangeError("a starting point is required for months balancing");let ie,ae;for({relativeTo:ie,days:ae}=ws(F,H,re);_r(L)>=_r(ae);)L-=ae,O+=$,H=ie,{relativeTo:ie,days:ae}=ws(F,H,re);break}case"week":{if(!F)throw new RangeError("a starting point is required for weeks balancing");let ie,ae;for({relativeTo:ie,days:ae}=ws(F,H,he);_r(L)>=_r(ae);)L-=ae,R+=$,H=ie,{relativeTo:ie,days:ae}=ws(F,H,he);break}}return{years:j,months:O,weeks:R,days:L}}(t,s,a,l,S,D),wi(D)&&(D=ev(D,t,s,a,0)),{days:l,hours:h,minutes:r,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=ma(l,h,r,p,m,g,v,S,D),new hc(t,s,a,l,h,r,p,m,g,v)}total(e){if(!gn(this))throw new TypeError("invalid receiver");let t=Z(this,Ps),s=Z(this,es),a=Z(this,qs),l=Z(this,Is),h=Z(this,Ds),r=Z(this,Ls),p=Z(this,Rs),m=Z(this,zs),g=Z(this,Ns),v=Z(this,Os);if(e===void 0)throw new TypeError("options argument is required");const y=typeof e=="string"?Qu("unit",e):sr(e),C=Zn(y,"unit","datetime",Eh),b=bg(y);let T;({years:t,months:s,weeks:a,days:l}=eg(t,s,a,l,C,b)),wi(b)&&(T=ev(b,t,s,a,0)),{days:l,hours:h,minutes:r,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=ma(l,h,r,p,m,g,v,C,T);const{total:S}=yc(t,s,a,l,h,r,p,m,g,v,1,C,"trunc",b);return S}toString(e){if(!gn(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:s,unit:a,increment:l}=Df(t);if(s==="minute")throw new RangeError('smallestUnit must not be "minute"');return o0(this,s,{unit:a,increment:l,roundingMode:Zs(t,"trunc")})}toJSON(){if(!gn(this))throw new TypeError("invalid receiver");return o0(this)}toLocaleString(e,t){if(!gn(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),o0(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return gn(e)?new hc(Z(e,Ps),Z(e,es),Z(e,qs),Z(e,Is),Z(e,Ds),Z(e,Ls),Z(e,Rs),Z(e,zs),Z(e,Ns),Z(e,Os)):Vu(e)}static compare(e,t,s){const a=Vu(e),l=Vu(t),h=bg(sr(s)),r=Z(a,Ps),p=Z(a,es),m=Z(a,qs);let g=Z(a,Is);const v=Z(a,Ds),y=Z(a,Ls),C=Z(a,Rs),b=Z(a,zs),T=Z(a,Ns);let S=Z(a,Os);const k=Z(l,Ps),x=Z(l,es),A=Z(l,qs);let D=Z(l,Is);const w=Z(l,Ds),I=Z(l,Ls),N=Z(l,Rs),q=Z(l,zs),Y=Z(l,Ns);let X=Z(l,Os);const B=ow(h,r,p,m,g),j=ow(h,k,x,A,D);r===0&&k===0&&p===0&&x===0&&m===0&&A===0||({days:g}=eg(r,p,m,g,"day",h),{days:D}=eg(k,x,A,D,"day",h));const O=Ku(g,v,y,C,b,T,S,B),R=Ku(D,w,I,N,q,Y,X,j);return yh(de.toNumber(de.subtract(O,R)))}}Zo(hc,"Temporal.Duration");const aI=Object.create;class Cb{constructor(e,t,s=An(),a=1972){const l=Ur(e),h=Ur(t),r=ns(s),p=Ur(a);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");xC(this,l,h,r,p)}get monthCode(){if(!ts(this))throw new TypeError("invalid receiver");return Rf(Z(this,St),this)}get day(){if(!ts(this))throw new TypeError("invalid receiver");return Iy(Z(this,St),this)}get calendar(){if(!ts(this))throw new TypeError("invalid receiver");return Z(this,St)}with(e,t){if(!ts(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");ud(e);const s=Z(this,St),a=Rn(s,["day","month","monthCode","year"]),l=rr(e,a,"partial");if(!l)throw new TypeError("invalid month-day-like");let h=rr(this,a,[]);return h=Sh(s,h,l),h=rr(h,a,[]),Zu(s,h,sr(t))}equals(e){if(!ts(this))throw new TypeError("invalid receiver");const t=J_(e);for(const s of[hi,gi,ni])if(Z(this,s)!==Z(t,s))return!1;return Nf(Z(this,St),Z(t,St))}toString(e){if(!ts(this))throw new TypeError("invalid receiver");return rw(this,If(sr(e)))}toJSON(){if(!ts(this))throw new TypeError("invalid receiver");return rw(this)}toLocaleString(e,t){if(!ts(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!ts(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("argument should be an object");const t=Z(this,St),s=Rn(t,["day","monthCode"]),a=rr(this,s,[]),l=Rn(t,["year"]);let h=Sh(t,a,rr(e,l,[]));h=rr(h,[...new Set([...s,...l])],[]);const r=aI(null);return r.overflow="reject",mc(t,h,r)}getISOFields(){if(!ts(this))throw new TypeError("invalid receiver");return{calendar:Z(this,St),isoDay:Z(this,gi),isoMonth:Z(this,hi),isoYear:Z(this,ni)}}static from(e,t){const s=sr(t);return ts(e)?(kn(s),tf(Z(e,hi),Z(e,gi),Z(e,St),Z(e,ni))):J_(e,s)}}Zo(Cb,"Temporal.PlainMonthDay");const Eb=()=>new(zi("%Temporal.Instant%"))(bb()),_w=(i,e=sc())=>{const t=Fs(e),s=ns(i);return Sa(t,Eb(),s)},u0=(i=sc())=>{const e=Fs(i),t=An();return Sa(e,Eb(),t)},ww=(i,e=sc())=>{const t=Fs(e),s=ns(i);return hs(bb(),t,s)},sc=()=>function(){const e=new aC("en-us");return new(zi("%Temporal.TimeZone%"))(pC(e.resolvedOptions().timeZone))}(),eE={instant:Eb,plainDateTime:_w,plainDateTimeISO:u0,plainDate:(i,e=sc())=>Xu(_w(i,e)),plainDateISO:(i=sc())=>Xu(u0(i)),plainTimeISO:(i=sc())=>cb(u0(i)),timeZone:sc,zonedDateTime:ww,zonedDateTimeISO:(i=sc())=>ww(An(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(eE,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const oI=Object.assign;function Tw(i,e,t){let s=Z(i,Gi),a=Z(i,Hi),l=Z(i,Wi),h=Z(i,qi),r=Z(i,Yi),p=Z(i,Zi);if(t){const{unit:m,increment:g,roundingMode:v}=t;({hour:s,minute:a,second:l,millisecond:h,microsecond:r,nanosecond:p}=vb(s,a,l,h,r,p,g,m,v))}return`${sn(s)}:${sn(a)}${Oy(l,h,r,p,e)}`}class vh{constructor(e=0,t=0,s=0,a=0,l=0,h=0){const r=Ur(e),p=Ur(t),m=Ur(s),g=Ur(a),v=Ur(l),y=Ur(h);By(r,p,m,g,v,y),Xo(this),Ji(this,Gi,r),Ji(this,Hi,p),Ji(this,Wi,m),Ji(this,qi,g),Ji(this,Yi,v),Ji(this,Zi,y),Ji(this,St,An())}get calendar(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,St)}get hour(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,Gi)}get minute(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,Hi)}get second(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,Wi)}get millisecond(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,qi)}get microsecond(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,Yi)}get nanosecond(){if(!yn(this))throw new TypeError("invalid receiver");return Z(this,Zi)}with(e,t){if(!yn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");ud(e);const s=Fg(e,"partial"),a=kn(sr(t)),l=Fg(this);let{hour:h,minute:r,second:p,millisecond:m,microsecond:g,nanosecond:v}=oI(l,s);return{hour:h,minute:r,second:p,millisecond:m,microsecond:g,nanosecond:v}=ky(h,r,p,m,g,v,a),new vh(h,r,p,m,g,v)}add(e){if(!yn(this))throw new TypeError("invalid receiver");return yw("add",this,e)}subtract(e){if(!yn(this))throw new TypeError("invalid receiver");return yw("subtract",this,e)}until(e,t){if(!yn(this))throw new TypeError("invalid receiver");return uw("until",this,e,t)}since(e,t){if(!yn(this))throw new TypeError("invalid receiver");return uw("since",this,e,t)}round(e){if(!yn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Qu("smallestUnit",e):sr(e),s=Zn(t,"smallestUnit","time",Eh),a=Zs(t,"halfExpand"),l=Dl(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s],!1);let h=Z(this,Gi),r=Z(this,Hi),p=Z(this,Wi),m=Z(this,qi),g=Z(this,Yi),v=Z(this,Zi);return{hour:h,minute:r,second:p,millisecond:m,microsecond:g,nanosecond:v}=vb(h,r,p,m,g,v,l,s,a),new vh(h,r,p,m,g,v)}equals(e){if(!yn(this))throw new TypeError("invalid receiver");const t=El(e);for(const s of[Gi,Hi,Wi,qi,Yi,Zi])if(Z(this,s)!==Z(t,s))return!1;return!0}toString(e){if(!yn(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:s,unit:a,increment:l}=Df(t);return Tw(this,s,{unit:a,increment:l,roundingMode:Zs(t,"trunc")})}toJSON(){if(!yn(this))throw new TypeError("invalid receiver");return Tw(this,"auto")}toLocaleString(e,t){if(!yn(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!yn(this))throw new TypeError("invalid receiver");const t=Fr(e),s=Z(t,ni),a=Z(t,hi),l=Z(t,gi),h=Z(t,St);return ua(s,a,l,Z(this,Gi),Z(this,Hi),Z(this,Wi),Z(this,qi),Z(this,Yi),Z(this,Zi),h)}toZonedDateTime(e){if(!yn(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const s=Fr(t),a=e.timeZone;if(a===void 0)throw new TypeError("missing timeZone property");const l=Fs(a),h=Z(s,ni),r=Z(s,hi),p=Z(s,gi),m=Z(s,St),g=Z(this,Gi),v=Z(this,Hi),y=Z(this,Wi),C=Z(this,qi),b=Z(this,Yi),T=Z(this,Zi);return hs(Z(Bs(l,new(zi("%Temporal.PlainDateTime%"))(h,r,p,g,v,y,C,b,T,m),"compatible"),Ri),l,m)}getISOFields(){if(!yn(this))throw new TypeError("invalid receiver");return{calendar:Z(this,St),isoHour:Z(this,Gi),isoMicrosecond:Z(this,Yi),isoMillisecond:Z(this,qi),isoMinute:Z(this,Hi),isoNanosecond:Z(this,Zi),isoSecond:Z(this,Wi)}}static from(e,t){const s=kn(sr(t));return yn(e)?new vh(Z(e,Gi),Z(e,Hi),Z(e,Wi),Z(e,qi),Z(e,Yi),Z(e,Zi)):El(e,s)}static compare(e,t){const s=El(e),a=El(t);for(const l of[Gi,Hi,Wi,qi,Yi,Zi]){const h=Z(s,l),r=Z(a,l);if(h!==r)return yh(h-r)}return 0}}Zo(vh,"Temporal.PlainTime");class Sb{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=hb(e);Xo(this),Ji(this,ic,t)}get id(){if(!Io(this))throw new TypeError("invalid receiver");return Fi(this)}getOffsetNanosecondsFor(e){if(!Io(this))throw new TypeError("invalid receiver");const t=Lo(e),s=Z(this,ic);return Rp(s)?Ah(s):_l(Z(t,Ri),s)}getOffsetStringFor(e){if(!Io(this))throw new TypeError("invalid receiver");return K0(this,Lo(e))}getPlainDateTimeFor(e,t=An()){return Sa(this,Lo(e),ns(t))}getInstantFor(e,t){if(!Io(this))throw new TypeError("invalid receiver");return Bs(this,uh(e),ef(sr(t)))}getPossibleInstantsFor(e){if(!Io(this))throw new TypeError("invalid receiver");const t=uh(e),s=zi("%Temporal.Instant%"),a=Z(this,ic);if(Rp(a)){const l=gc(Z(t,ni),Z(t,hi),Z(t,gi),Z(t,Gi),Z(t,Hi),Z(t,Wi),Z(t,qi),Z(t,Yi),Z(t,Zi));if(l===null)throw new RangeError("DateTime outside of supported range");const h=Ah(a);return[new s(de.subtract(l,de.BigInt(h)))]}return function(h,r,p,m,g,v,y,C,b,T){const S=gc(r,p,m,g,v,y,C,b,T);if(S===null)throw new RangeError("DateTime outside of supported range");let k=de.subtract(S,pc);de.lessThan(k,Xp)&&(k=S);let x=de.add(S,pc);de.greaterThan(x,Kp)&&(x=S);const A=_l(k,h),D=_l(x,h);return(A===D?[A]:[A,D]).map(w=>{const I=de.subtract(S,de.BigInt(w)),N=SC(I,h);if(r===N.year&&p===N.month&&m===N.day&&g===N.hour&&v===N.minute&&y===N.second&&C===N.millisecond&&b===N.microsecond&&T===N.nanosecond)return I}).filter(w=>w!==void 0)}(a,Z(t,ni),Z(t,hi),Z(t,gi),Z(t,Gi),Z(t,Hi),Z(t,Wi),Z(t,qi),Z(t,Yi),Z(t,Zi)).map(l=>new s(l))}getNextTransition(e){if(!Io(this))throw new TypeError("invalid receiver");const t=Lo(e),s=Z(this,ic);if(Rp(s)||s==="UTC")return null;let a=Z(t,Ri);const l=zi("%Temporal.Instant%");return a=function(r,p){const m=de.add(r,cC),g=aw(kC(),m);let v=aw(lC,r);const y=_l(v,p);let C=v,b=y;for(;y===b&&de.lessThan(de.BigInt(v),g);)C=de.add(v,hC),b=_l(C,p),y===b&&(v=C);return y===b?null:FC(T=>_l(T,p),v,C,y,b)}(a,s),a===null?null:new l(a)}getPreviousTransition(e){if(!Io(this))throw new TypeError("invalid receiver");const t=Lo(e),s=Z(this,ic);if(Rp(s)||s==="UTC")return null;let a=Z(t,Ri);const l=zi("%Temporal.Instant%");return a=AC(a,s),a===null?null:new l(a)}toString(){if(!Io(this))throw new TypeError("invalid receiver");return Fi(Z(this,ic))}toJSON(){if(!Io(this))throw new TypeError("invalid receiver");return Fi(this)}static from(e){return Fs(e)}}Zo(Sb,"Temporal.TimeZone");const lI=Object.create;class kb{constructor(e,t,s=An(),a=1){const l=Ur(e),h=Ur(t),r=ns(s),p=Ur(a);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");vC(this,l,h,r,p)}get year(){if(!Er(this))throw new TypeError("invalid receiver");return My(Z(this,St),this)}get month(){if(!Er(this))throw new TypeError("invalid receiver");return Py(Z(this,St),this)}get monthCode(){if(!Er(this))throw new TypeError("invalid receiver");return Rf(Z(this,St),this)}get calendar(){if(!Er(this))throw new TypeError("invalid receiver");return Z(this,St)}get era(){if(!Er(this))throw new TypeError("invalid receiver");return Dy(Z(this,St),this)}get eraYear(){if(!Er(this))throw new TypeError("invalid receiver");return Ly(Z(this,St),this)}get daysInMonth(){if(!Er(this))throw new TypeError("invalid receiver");return zf(Z(this,St),this)}get daysInYear(){if(!Er(this))throw new TypeError("invalid receiver");return Ry(Z(this,St),this)}get monthsInYear(){if(!Er(this))throw new TypeError("invalid receiver");return zy(Z(this,St),this)}get inLeapYear(){if(!Er(this))throw new TypeError("invalid receiver");return Ny(Z(this,St),this)}with(e,t){if(!Er(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid argument");ud(e);const s=Z(this,St),a=Rn(s,["month","monthCode","year"]),l=rr(e,a,"partial");if(!l)throw new TypeError("invalid year-month-like");let h=rr(this,a,[]);return h=Sh(s,h,l),h=rr(h,a,[]),kh(s,h,sr(t))}add(e,t){if(!Er(this))throw new TypeError("invalid receiver");return xw("add",this,e,t)}subtract(e,t){if(!Er(this))throw new TypeError("invalid receiver");return xw("subtract",this,e,t)}until(e,t){if(!Er(this))throw new TypeError("invalid receiver");return dw("until",this,e,t)}since(e,t){if(!Er(this))throw new TypeError("invalid receiver");return dw("since",this,e,t)}equals(e){if(!Er(this))throw new TypeError("invalid receiver");const t=Dp(e);for(const s of[ni,hi,gi])if(Z(this,s)!==Z(t,s))return!1;return Nf(Z(this,St),Z(t,St))}toString(e){if(!Er(this))throw new TypeError("invalid receiver");return nw(this,If(sr(e)))}toJSON(){if(!Er(this))throw new TypeError("invalid receiver");return nw(this)}toLocaleString(e,t){if(!Er(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Er(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("argument should be an object");const t=Z(this,St),s=Rn(t,["monthCode","year"]),a=rr(this,s,[]),l=Rn(t,["day"]);let h=Sh(t,a,rr(e,l,[]));h=rr(h,[...new Set([...s,...l])],[]);const r=lI(null);return r.overflow="reject",mc(t,h,r)}getISOFields(){if(!Er(this))throw new TypeError("invalid receiver");return{calendar:Z(this,St),isoDay:Z(this,gi),isoMonth:Z(this,hi),isoYear:Z(this,ni)}}static from(e,t){const s=sr(t);return Er(e)?(kn(s),rf(Z(e,ni),Z(e,hi),Z(e,St),Z(e,gi))):Dp(e,s)}static compare(e,t){const s=Dp(e),a=Dp(t);return cc(Z(s,ni),Z(s,hi),Z(s,gi),Z(a,ni),Z(a,hi),Z(a,gi))}}Zo(kb,"Temporal.PlainYearMonth");class Ab{constructor(e,t,s=An()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");bC(this,jp(e),Fs(t),ns(s))}get calendar(){if(!wi(this))throw new TypeError("invalid receiver");return Z(this,St)}get timeZone(){if(!wi(this))throw new TypeError("invalid receiver");return Z(this,Mr)}get year(){if(!wi(this))throw new TypeError("invalid receiver");return My(Z(this,St),Yr(this))}get month(){if(!wi(this))throw new TypeError("invalid receiver");return Py(Z(this,St),Yr(this))}get monthCode(){if(!wi(this))throw new TypeError("invalid receiver");return Rf(Z(this,St),Yr(this))}get day(){if(!wi(this))throw new TypeError("invalid receiver");return Iy(Z(this,St),Yr(this))}get hour(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),Gi)}get minute(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),Hi)}get second(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),Wi)}get millisecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),qi)}get microsecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),Yi)}get nanosecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Yr(this),Zi)}get era(){if(!wi(this))throw new TypeError("invalid receiver");return Dy(Z(this,St),Yr(this))}get eraYear(){if(!wi(this))throw new TypeError("invalid receiver");return Ly(Z(this,St),Yr(this))}get epochSeconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Ri);return de.toNumber(de.divide(e,kl))}get epochMilliseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Ri);return de.toNumber(de.divide(e,Ua))}get epochMicroseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Ri);return Hg(de.divide(e,Pr))}get epochNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return Hg(Z(this,Ri))}get dayOfWeek(){if(!wi(this))throw new TypeError("invalid receiver");return sb(Z(this,St),Yr(this))}get dayOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return ab(Z(this,St),Yr(this))}get weekOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return ob(Z(this,St),Yr(this))}get hoursInDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Yr(this),t=zi("%Temporal.PlainDateTime%"),s=Z(e,ni),a=Z(e,hi),l=Z(e,gi),h=new t(s,a,l,0,0,0,0,0,0),r=gh(s,a,l,0,0,0,1,"reject"),p=new t(r.year,r.month,r.day,0,0,0,0,0,0),m=Z(this,Mr),g=Z(Bs(m,h,"compatible"),Ri),v=Z(Bs(m,p,"compatible"),Ri);return de.toNumber(de.subtract(v,g))/36e11}get daysInWeek(){if(!wi(this))throw new TypeError("invalid receiver");return lb(Z(this,St),Yr(this))}get daysInMonth(){if(!wi(this))throw new TypeError("invalid receiver");return zf(Z(this,St),Yr(this))}get daysInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Ry(Z(this,St),Yr(this))}get monthsInYear(){if(!wi(this))throw new TypeError("invalid receiver");return zy(Z(this,St),Yr(this))}get inLeapYear(){if(!wi(this))throw new TypeError("invalid receiver");return Ny(Z(this,St),Yr(this))}get offset(){if(!wi(this))throw new TypeError("invalid receiver");return K0(Z(this,Mr),Z(this,Ts))}get offsetNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return go(Z(this,Mr),Z(this,Ts))}with(e,t){if(!wi(this))throw new TypeError("invalid receiver");if(!qr(e))throw new TypeError("invalid zoned-date-time-like");ud(e);const s=sr(t),a=ef(s),l=Z0(s,"prefer"),h=Z(this,Mr),r=Z(this,St),p=Y0(Rn(r,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),m=rr(e,p,"partial"),g=Y0(p,"timeZone");let v=rr(this,g,["timeZone","offset"]);v=Sh(r,v,m),v=rr(v,g,["timeZone","offset"]);let{year:y,month:C,day:b,hour:T,minute:S,second:k,millisecond:x,microsecond:A,nanosecond:D}=Lf(r,v,s);return hs(Ug(y,C,b,T,S,k,x,A,D,"option",Ah(v.offset),h,a,l,!1),Z(this,Mr),r)}withPlainDate(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Fr(e),s=Z(t,ni),a=Z(t,hi),l=Z(t,gi);let h=Z(t,St);const r=Yr(this),p=Z(r,Gi),m=Z(r,Hi),g=Z(r,Wi),v=Z(r,qi),y=Z(r,Yi),C=Z(r,Zi);h=_C(Z(this,St),h);const b=Z(this,Mr);return hs(Z(Bs(b,new(zi("%Temporal.PlainDateTime%"))(s,a,l,p,m,g,v,y,C,h),"compatible"),Ri),b,h)}withPlainTime(e){if(!wi(this))throw new TypeError("invalid receiver");const t=zi("%Temporal.PlainTime%"),s=e===void 0?new t:El(e),a=Yr(this),l=Z(a,ni),h=Z(a,hi),r=Z(a,gi),p=Z(this,St),m=Z(s,Gi),g=Z(s,Hi),v=Z(s,Wi),y=Z(s,qi),C=Z(s,Yi),b=Z(s,Zi),T=Z(this,Mr);return hs(Z(Bs(T,new(zi("%Temporal.PlainDateTime%"))(l,h,r,m,g,v,y,C,b,p),"compatible"),Ri),T,p)}withTimeZone(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Fs(e);return hs(Z(this,Ri),t,Z(this,St))}withCalendar(e){if(!wi(this))throw new TypeError("invalid receiver");const t=ns(e);return hs(Z(this,Ri),Z(this,Mr),t)}add(e,t){if(!wi(this))throw new TypeError("invalid receiver");return vw("add",this,e,t)}subtract(e,t){if(!wi(this))throw new TypeError("invalid receiver");return vw("subtract",this,e,t)}until(e,t){if(!wi(this))throw new TypeError("invalid receiver");return pw("until",this,e,t)}since(e,t){if(!wi(this))throw new TypeError("invalid receiver");return pw("since",this,e,t)}round(e){if(!wi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Qu("smallestUnit",e):sr(e),s=Zn(t,"smallestUnit","time",Eh,["day"]),a=Zs(t,"halfExpand"),l=Dl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s],!1),h=Yr(this);let r=Z(h,ni),p=Z(h,hi),m=Z(h,gi),g=Z(h,Gi),v=Z(h,Hi),y=Z(h,Wi),C=Z(h,qi),b=Z(h,Yi),T=Z(h,Zi);const S=zi("%Temporal.PlainDateTime%"),k=Z(this,Mr),x=Z(this,St),A=Bs(k,new S(Z(h,ni),Z(h,hi),Z(h,gi),0,0,0,0,0,0),"compatible"),D=$a(A,k,x,0,0,0,1,0,0,0,0,0,0),w=de.subtract(D,de.BigInt(Z(A,Ri)));if(de.equal(w,En))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:r,month:p,day:m,hour:g,minute:v,second:y,millisecond:C,microsecond:b,nanosecond:T}=xb(r,p,m,g,v,y,C,b,T,l,s,a,de.toNumber(w)),hs(Ug(r,p,m,g,v,y,C,b,T,"option",go(k,Z(this,Ts)),k,"compatible","prefer",!1),k,Z(this,St))}equals(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Lp(e),s=Z(this,Ri),a=Z(t,Ri);return!!de.equal(de.BigInt(s),de.BigInt(a))&&!!wC(Z(this,Mr),Z(t,Mr))&&Nf(Z(this,St),Z(t,St))}toString(e){if(!wi(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:s,unit:a,increment:l}=Df(t),h=Zs(t,"trunc");return sw(this,s,If(t),function(p){return xc(p,"timeZoneName",["auto","never"],"auto")}(t),function(p){return xc(p,"offset",["auto","never"],"auto")}(t),{unit:a,increment:l,roundingMode:h})}toLocaleString(e,t){if(!wi(this))throw new TypeError("invalid receiver");return new zh(e,t).format(this)}toJSON(){if(!wi(this))throw new TypeError("invalid receiver");return sw(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Yr(this),t=zi("%Temporal.PlainDateTime%"),s=Z(this,St),a=new t(Z(e,ni),Z(e,hi),Z(e,gi),0,0,0,0,0,0,s),l=Z(this,Mr);return hs(Z(Bs(l,a,"compatible"),Ri),l,s)}toInstant(){if(!wi(this))throw new TypeError("invalid receiver");return new(zi("%Temporal.Instant%"))(Z(this,Ri))}toPlainDate(){if(!wi(this))throw new TypeError("invalid receiver");return Xu(Yr(this))}toPlainTime(){if(!wi(this))throw new TypeError("invalid receiver");return cb(Yr(this))}toPlainDateTime(){if(!wi(this))throw new TypeError("invalid receiver");return Yr(this)}toPlainYearMonth(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,St);return kh(e,rr(this,Rn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,St);return Zu(e,rr(this,Rn(e,["day","monthCode"]),[]))}getISOFields(){if(!wi(this))throw new TypeError("invalid receiver");const e=Yr(this),t=Z(this,Mr);return{calendar:Z(this,St),isoDay:Z(e,gi),isoHour:Z(e,Gi),isoMicrosecond:Z(e,Yi),isoMillisecond:Z(e,qi),isoMinute:Z(e,Hi),isoMonth:Z(e,hi),isoNanosecond:Z(e,Zi),isoSecond:Z(e,Wi),isoYear:Z(e,ni),offset:K0(t,Z(this,Ts)),timeZone:t}}static from(e,t){const s=sr(t);return wi(e)?(kn(s),ef(s),Z0(s,"reject"),hs(Z(e,Ri),Z(e,Mr),Z(e,St))):Lp(e,s)}static compare(e,t){const s=Lp(e),a=Lp(t),l=Z(s,Ri),h=Z(a,Ri);return de.lessThan(de.BigInt(l),de.BigInt(h))?-1:de.greaterThan(de.BigInt(l),de.BigInt(h))?1:0}}function Yr(i){return Sa(Z(i,Mr),Z(i,Ts),Z(i,St))}Zo(Ab,"Temporal.ZonedDateTime");var Ln=Object.freeze({__proto__:null,Instant:co,Calendar:Yg,PlainDate:Bf,PlainDateTime:Ff,Duration:hc,PlainMonthDay:Cb,Now:eE,PlainTime:vh,TimeZone:Sb,PlainYearMonth:kb,ZonedDateTime:Ab});const cI=[co,Yg,Bf,Ff,hc,Cb,vh,Sb,kb,Ab];for(const i of cI){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}const hI=i=>Object.entries(CM[i]).reduce((e,t)=>{let[s,a]=t;return e[`${i}-${s}`]=a,e},{}),uI=i=>Object.entries(i).map(e=>{let[t,s]=e;return`--${t}: ${s};`}).join(`
`),tE=i=>{let{colors:e=!1,theme:t=!1,layers:s=!1,spacers:a=!1,elevations:l=!1}=i;const h={colors:e,theme:t,layers:s,spacers:a,elevations:l},r=Object.keys(h).filter(p=>h[p]).map(hI).map(uI).join(`
`);return Te.createElement(Dt,{id:"3443925957",dynamic:[r]},[`html{${r};}`])};tE.propTypes={colors:pe.bool,elevations:pe.bool,layers:pe.bool,spacers:pe.bool,theme:pe.bool};class dI extends uT{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,qp.batch(()=>{const s=this.observers,a=this.findMatchingObservers(this.queries);a.forEach(m=>m.observer.setOptions(m.defaultedQueryOptions,t));const l=a.map(m=>m.observer),h=Object.fromEntries(l.map(m=>[m.options.queryHash,m])),r=l.map(m=>m.getCurrentResult()),p=l.some((m,g)=>m!==s[g]);s.length===l.length&&!p||(this.observers=l,this.observersMap=h,this.result=r,this.hasListeners()&&(B_(s,l).forEach(m=>{m.destroy()}),B_(l,s).forEach(m=>{m.subscribe(g=>{this.onUpdate(m,g)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,s=new Map(t.map(C=>[C.options.queryHash,C])),a=e.map(C=>this.client.defaultQueryOptions(C)),l=a.flatMap(C=>{const b=s.get(C.queryHash);return b!=null?[{defaultedQueryOptions:C,observer:b}]:[]}),h=new Set(l.map(C=>C.defaultedQueryOptions.queryHash)),r=a.filter(C=>!h.has(C.queryHash)),p=new Set(l.map(C=>C.observer)),m=t.filter(C=>!p.has(C)),g=C=>{const b=this.client.defaultQueryOptions(C),T=this.observersMap[b.queryHash];return T??new iM(this.client,b)},v=r.map((C,b)=>{if(C.keepPreviousData){const T=m[b];if(T!==void 0)return{defaultedQueryOptions:C,observer:T}}return{defaultedQueryOptions:C,observer:g(C)}}),y=(C,b)=>a.indexOf(C.defaultedQueryOptions)-a.indexOf(b.defaultedQueryOptions);return l.concat(v).sort(y)}onUpdate(e,t){const s=this.observers.indexOf(e);s!==-1&&(this.result=tM(this.result,s,t),this.notify())}notify(){qp.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}let pI=class extends uT{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=this.client.defaultMutationOptions(e),rM(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:nM(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){qp.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,s,a,l;(t=(s=this.mutateOptions).onSuccess)==null||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(a=(l=this.mutateOptions).onSettled)==null||a.call(l,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var h,r,p,m;(h=(r=this.mutateOptions).onError)==null||h.call(r,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(p=(m=this.mutateOptions).onSettled)==null||p.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:g})=>{g(this.currentResult)})})}};function fI({queries:i,context:e}){const t=ad({context:e}),s=sM(),a=aM(),l=Be.useMemo(()=>i.map(y=>{const C=t.defaultQueryOptions(y);return C._optimisticResults=s?"isRestoring":"optimistic",C}),[i,t,s]);l.forEach(y=>{oM(y),lM(y,a)}),cM(a);const[h]=Be.useState(()=>new dI(t,l)),r=h.getOptimisticResult(l);dT(Be.useCallback(y=>s?()=>{}:h.subscribe(qp.batchCalls(y)),[h,s]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Be.useEffect(()=>{h.setQueries(l,{listeners:!1})},[l,h]);const m=r.some((y,C)=>F_(l[C],y,s))?r.flatMap((y,C)=>{const b=l[C],T=h.getObservers()[C];if(b&&T){if(F_(b,y,s))return U_(b,T,a);hM(y,s)&&U_(b,T,a)}return[]}):[];if(m.length>0)throw Promise.all(m);const g=h.getQueries(),v=r.find((y,C)=>{var b,T;return uM({result:y,errorResetBoundary:a,useErrorBoundary:(b=(T=l[C])==null?void 0:T.useErrorBoundary)!=null?b:!1,query:g[C]})});if(v!=null&&v.error)throw v.error;return r}function iE(i,e,t){const s=dM(i,e,t),a=ad({context:s.context}),[l]=Be.useState(()=>new pI(a,s));Be.useEffect(()=>{l.setOptions(s)},[l,s]);const h=dT(Be.useCallback(p=>l.subscribe(qp.batchCalls(p)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r=Be.useCallback((p,m)=>{l.mutate(p,m).catch(mI)},[l]);if(h.error&&pM(l.options.useErrorBoundary,[h.error]))throw h.error;return{...h,mutate:r,mutateAsync:h.mutate}}function mI(){}const gI=i=>{let{execute:e,variables:t,singular:s,immediate:a,onComplete:l,onError:h}=i;const[r]=pT(e),[p,m]=Be.useState({called:!!a,loading:!!a}),g=Be.useRef(t),v=Be.useRef([]),y=Be.useCallback(()=>{v.current.forEach(T=>T.abort()),v.current=[]},[]),C=Be.useCallback(()=>{y(),m(T=>({called:T.called,loading:!1,error:new fM({type:"aborted",message:"Aborted"})}))},[y]),b=Be.useCallback(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m(x=>!x.called||!x.loading?{called:!0,loading:!0}:x),s&&y();const S=new AbortController;v.current.push(S),g.current={...g.current,...T};const k={variables:g.current,signal:S.signal,onComplete:l,onError:h};return r(k).then(x=>S.signal.aborted?new Promise(()=>{}):(m({called:!0,loading:!1,data:x}),x)).catch(x=>(S.signal.aborted||m({called:!0,loading:!1,error:x}),new Promise(()=>{})))},[y,l,h,s,r]);return Be.useEffect(()=>(a&&b(),y),[]),{refetch:b,abort:C,...p}},yI={},rE=function(i){let{onComplete:e,onError:t,variables:s=yI,lazy:a=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=od(),[h]=pT(i,{warn:!0,name:"mutation"}),r=Be.useCallback(C=>l.mutate(h,C),[l,h]),{refetch:p,called:m,loading:g,error:v,data:y}=gI({execute:r,variables:s,singular:!1,immediate:!a,onComplete:e,onError:t});return[p,{engine:l,called:m,loading:g,error:v,data:y}]},nE=i=>{let{children:e,open:t,dataTest:s}=i;return Te.createElement("div",{"data-test":s,className:"jsx-3677374542 "+(an({open:t})||"")},e,Te.createElement(Dt,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};nE.propTypes={children:pe.node,dataTest:pe.string,open:pe.bool};const xI=()=>Te.createElement("div",{className:"jsx-2503342345"},Te.createElement(Dt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),vI=()=>Te.createElement("div",{className:"nodeArrow"},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},Te.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),Te.createElement(Dt,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),sE=i=>{let{open:e,onOpen:t,onClose:s,dataTest:a}=i;const l=e?s:t;return Te.createElement("div",{"data-test":a,onClick:h=>l&&l({open:!e},h),className:Dt.dynamic([["375729792",[Ve.grey400,Ve.grey900,Ve.grey100]]])+" "+(an({open:e})||"")},Te.createElement("span",{className:Dt.dynamic([["375729792",[Ve.grey400,Ve.grey900,Ve.grey100]]])},Te.createElement(vI,null)),Te.createElement(Dt,{id:"375729792",dynamic:[Ve.grey400,Ve.grey900,Ve.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${Ve.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${Ve.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${Ve.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};sE.propTypes={dataTest:pe.string.isRequired,open:pe.bool,onClose:pe.func,onOpen:pe.func};const aE=i=>{let{open:e,className:t,component:s,children:a,icon:l,onOpen:h,onClose:r,dataTest:p="dhis2-uicore-node"}=i;const m=!!Te.Children.toArray(a).filter(y=>y).length,g=!l&&m,v=!l&&!m;return Te.createElement("div",{"data-test":p,className:"jsx-1433072554 "+(an("node",t)||"")},l&&Te.createElement("div",{"data-test":`${p}-icon`,className:"jsx-1433072554"},l),g&&Te.createElement(sE,{open:e,onOpen:h,onClose:r,dataTest:`${p}-toggle`}),v&&Te.createElement(xI,null),Te.createElement("div",{"data-test":`${p}-content`,className:"jsx-1433072554"},Te.createElement("div",{"data-test":`${p}-label`,className:"jsx-1433072554"},s),Te.createElement(nE,{open:e,dataTest:`${p}-leaves`},a)),Te.createElement(Dt,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};aE.propTypes={children:pe.node,className:pe.string,component:pe.element,dataTest:pe.string,icon:pe.node,open:pe.bool,onClose:pe.func,onOpen:pe.func};const oE=(i,e)=>i.some(s=>e===s?!0:s.startsWith(`${e}/`)),bI=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),_I=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),wI={"No children match filter":"","Could not load children":"  ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},TI={"No children match filter":"Filtru neodpovdaj dn podzen","Could not load children":"Nelze nast podazen","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},CI={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},EI={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},SI={"No children match filter":"Ningn descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},kI={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},AI={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":" {{ ERRORMESSAGE }}"},MI={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},PI={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},II={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"No foi possvel carregar as crianas","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},DI={"No children match filter":"  ,  ","Could not load children":"    ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},LI={"No children match filter":"  ',   ","Could not load children":"    '","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},RI={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},zI={"No children match filter":"     ","Could not load children":" ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},NI={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},OI={"No children match filter":"Khng c n v con ph hp vi b lc","Could not load children":"Khng th ti n v con","Error: {{ ERRORMESSAGE }}":"Li: {{ ERRORMESSAGE }}"},jI={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"{{ ERRORMESSAGE }}"},BI={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":""},Es="default";Je.addResources("ar",Es,wI);Je.addResources("cs",Es,TI);Je.addResources("en",Es,CI);Je.addResources("es",Es,EI);Je.addResources("es_419",Es,SI);Je.addResources("fr",Es,kI);Je.addResources("lo",Es,AI);Je.addResources("nb",Es,MI);Je.addResources("nl",Es,PI);Je.addResources("pt",Es,II);Je.addResources("ru",Es,DI);Je.addResources("uk",Es,LI);Je.addResources("uz_Latn",Es,RI);Je.addResources("uz_UZ_Cyrl",Es,zI);Je.addResources("uz_UZ_Latn",Es,NI);Je.addResources("vi",Es,OI);Je.addResources("zh",Es,jI);Je.addResources("zh_CN",Es,BI);const FI="[a-zA-Z][a-zA-Z0-9]{10}",UI=new RegExp(`(/${FI})+`),Ea=(i,e,t,s,a)=>{if(!UI.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${a}\``)},lE=i=>{let{children:e,dataTest:t}=i;return Te.createElement("span",{"data-test":`${t}-error`,className:Dt.dynamic([["3198585030",[Ve.grey800,Gt.dp4,Jt.error]]])},e,Te.createElement(Dt,{id:"3198585030",dynamic:[Ve.grey800,Gt.dp4,Jt.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${Ve.grey800};margin:${Gt.dp4};color:${Jt.error};}`]))};lE.propTypes={children:pe.any.isRequired,dataTest:pe.string.isRequired};const $I=(i,e)=>e.some(t=>{const s=!t.match(new RegExp(`${i}$`)),a=t.match(new RegExp(i));return s&&a}),Mb=i=>{let{checked:e,children:t,onChange:s,loading:a}=i;return Te.createElement("span",{onClick:l=>{s({checked:!e},l)},className:Dt.dynamic([["321503310",[Ve.grey900,Ve.teal700]]])+" "+(an({checked:e,loading:a})||"")},t,Te.createElement(Dt,{id:"321503310",dynamic:[Ve.grey900,Ve.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${Ve.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${Ve.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};Mb.propTypes={children:pe.any.isRequired,checked:pe.bool,loading:pe.bool,onChange:pe.func};const cE=i=>{let{children:e,loading:t,onToggleOpen:s}=i;return Te.createElement(Mb,{checked:!1,loading:t,onChange:s},e)};cE.propTypes={children:pe.any.isRequired,onToggleOpen:pe.func.isRequired,loading:pe.bool};const hE=i=>{let{dataTest:e}=i;return Te.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},Te.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),Te.createElement(Dt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};hE.propTypes={dataTest:pe.string.isRequired};const uE=i=>{let{dataTest:e}=i;return Te.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},Te.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},Te.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),Te.createElement(Dt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};uE.propTypes={dataTest:pe.string.isRequired};const dE=i=>{let{dataTest:e}=i;return Te.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},Te.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},Te.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},Te.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),Te.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),Te.createElement(Dt,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};dE.propTypes={dataTest:pe.string.isRequired};const pE=i=>{let{dataTest:e}=i;return Te.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},Te.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},Te.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),Te.createElement(Dt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};pE.propTypes={dataTest:pe.string.isRequired};const fE=i=>{let{loading:e,hasChildren:t,open:s,dataTest:a}=i;return e?Te.createElement(hE,{dataTest:a}):t?s?Te.createElement(dE,{dataTest:a}):Te.createElement(uE,{dataTest:a}):Te.createElement(pE,{dataTest:a})};fE.propTypes={dataTest:pe.string.isRequired,hasChildren:pe.bool,loading:pe.bool,open:pe.bool};const mE=i=>{let{checked:e,dataTest:t,hasChildren:s,indeterminate:a,children:l,loading:h,name:r,open:p,value:m,onChange:g}=i;const v=Te.createElement(fE,{loading:h,open:p,hasChildren:s,dataTest:t}),y=Te.createElement(Te.Fragment,null,Te.createElement("span",{className:"jsx-1000763175"},v),l,Te.createElement(Dt,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return Te.createElement(Te.Fragment,null,Te.createElement(Sf,{dense:!0,checked:e,name:r,value:m,label:y,indeterminate:a,onChange:g}))};mE.propTypes={checked:pe.bool.isRequired,children:pe.any.isRequired,dataTest:pe.string.isRequired,hasChildren:pe.bool.isRequired,indeterminate:pe.bool.isRequired,loading:pe.bool.isRequired,name:pe.string.isRequired,open:pe.bool.isRequired,value:pe.string.isRequired,onChange:pe.func.isRequired};const Eg=i=>{let{highlighted:e,children:t}=i;return Te.createElement("div",{className:Dt.dynamic([["1387769986",[Ve.teal200]]])+" "+(an({highlighted:e})||"")},Te.createElement("span",{className:Dt.dynamic([["1387769986",[Ve.teal200]]])},t),Te.createElement(Dt,{id:"1387769986",dynamic:[Ve.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${Ve.teal200};padding-inline-end:4px;}`]))};Eg.propTypes={children:pe.node,highlighted:pe.bool};const VI=i=>{let{selected:e,path:t,checked:s,singleSelection:a}=i;const l=e.indexOf(t);if(s&&l!==-1)return e;if(a&&s)return[t];if(s)return[...e,t];if(l===-1)return e;if(a)return[];if(e.indexOf(t)===0)return e.slice(1);const h=e.slice(0,l),r=e.slice(l+1);return[...h,...r]},gE=i=>{let{checked:e,children:t,dataTest:s,disableSelection:a,fullPath:l,hasChildren:h,hasSelectedDescendants:r,highlighted:p,loading:m,node:g,onChange:v,onToggleOpen:y,open:C,rootId:b,selected:T,singleSelection:S}=i;const k=(x,A)=>{let{checked:D}=x;const w=VI({path:l,selected:T,checked:D,singleSelection:S,rootId:b}),I={...g,path:l,checked:D,selected:w};v(I,A)};return a?Te.createElement(Eg,{highlighted:p},Te.createElement(cE,{loading:m,onToggleOpen:y},t)):S?Te.createElement(Eg,{highlighted:p},Te.createElement(Mb,{checked:e,onChange:k,loading:m},t)):Te.createElement(Eg,{highlighted:p},Te.createElement(mE,{dataTest:s,checked:e,name:"org-unit",value:g.id,loading:m,indeterminate:!e&&r,onChange:k,open:C,hasChildren:h},t))};gE.propTypes={children:pe.any.isRequired,dataTest:pe.string.isRequired,fullPath:pe.string.isRequired,hasChildren:pe.bool.isRequired,loading:pe.bool.isRequired,node:pe.shape({displayName:pe.string.isRequired,id:pe.string.isRequired,children:pe.number,path:pe.string}).isRequired,open:pe.bool.isRequired,rootId:pe.string.isRequired,onChange:pe.func.isRequired,onToggleOpen:pe.func.isRequired,checked:pe.bool,disableSelection:pe.bool,hasSelectedDescendants:pe.bool,highlighted:pe.bool,selected:pe.arrayOf(Ea),singleSelection:pe.bool};const Cw={styles:Te.createElement(Dt,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},yE=()=>Te.createElement("div",{className:"jsx-2503342345"},Te.createElement(Yo,{extrasmall:!0,className:Cw.className}),Te.createElement("style",null,Cw.styles),Te.createElement(Dt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),GI={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},HI=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:s}=i;const a=Be.useRef(!1),{called:l,loading:h,error:r,data:p}=ka(GI,{variables:{id:e.id}}),m=Be.useMemo(()=>{if(!p)return;if(!e.children)return[];const{orgUnit:g}=p;return t?g.children:_I(g.children)},[p,t]);return Be.useEffect(()=>{s&&m&&!a.current&&(s({...e,children:m}),a.current=!0)},[s,m,a]),{called:l,loading:h,error:r||null,data:m}},WI=i=>{let{orgChildren:e,filter:t,node:s}=i;return t!=null&&t.length?e.filter(a=>oE(t,`${s.path}/${a.id}`)):e},xE=i=>{let{node:e,autoExpandLoadingError:t,dataTest:s,disableSelection:a,expanded:l,filter:h,highlighted:r,isUserDataViewFallback:p,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,parentPath:C,renderNodeLabel:b,rootId:T,selected:S,singleSelection:k,suppressAlphabeticalSorting:x,OrganisationUnitNode:A}=i;const D=HI({node:e,isUserDataViewFallback:p,suppressAlphabeticalSorting:x,onComplete:g}),w=D.called&&!D.loading&&!D.error,I=w?WI({orgChildren:D.data,filter:h,node:e}):[];return Te.createElement(Te.Fragment,null,D.loading&&Te.createElement(yE,null),D.error&&`Error: ${D.error}`,w&&!I.length&&Je.t("No children match filter"),!!I.length&&I.map(N=>{const q=`${C}/${N.id}`;return Te.createElement(A,{autoExpandLoadingError:t,dataTest:s,disableSelection:a,displayName:N.displayName,expanded:l,filter:h,highlighted:r,id:N.id,isUserDataViewFallback:p,key:q,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,path:q,renderNodeLabel:b,rootId:T,selected:S,singleSelection:k,suppressAlphabeticalSorting:x})}))};xE.propTypes={OrganisationUnitNode:pe.func.isRequired,dataTest:pe.string.isRequired,node:pe.object.isRequired,parentPath:pe.string.isRequired,renderNodeLabel:pe.func.isRequired,rootId:pe.string.isRequired,onChange:pe.func.isRequired,autoExpandLoadingError:pe.bool,disableSelection:pe.bool,expanded:pe.arrayOf(Ea),filter:pe.arrayOf(Ea),highlighted:pe.arrayOf(Ea),isUserDataViewFallback:pe.bool,selected:pe.arrayOf(Ea),singleSelection:pe.bool,suppressAlphabeticalSorting:pe.bool,onChildrenLoaded:pe.func,onCollapse:pe.func,onExpand:pe.func};const qI=i=>{let{path:e,expanded:t,onExpand:s,onCollapse:a,errorMessage:l,autoExpandLoadingError:h}=i;const r=h&&!!l,[p,m]=Be.useState(!!l);Be.useEffect(()=>{r&&!p&&(s({path:e}),m(!0))},[r,p]);const g=r&&!p||!!t.includes(e);return{open:g,onToggleOpen:()=>g?a({path:e}):s({path:e}),openedOnceDueToError:p}},YI={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},ZI=(i,e)=>{let{displayName:t,isUserDataViewFallback:s}=e;if(!t)throw new Error('"displayName" is required');const a={id:i,isUserDataViewFallback:s},{loading:l,error:h,data:r={}}=ka(YI,{variables:a});return{loading:l,error:h||null,data:{id:i,displayName:t,...r.orgUnit}}},Pb=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:s,displayName:a,expanded:l,highlighted:h,id:r,isUserDataViewFallback:p,path:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:C,filter:b,suppressAlphabeticalSorting:T,onChange:S,onChildrenLoaded:k,onCollapse:x,onExpand:A}=i;const D=ZI(r,{isUserDataViewFallback:p,displayName:a}),w=bI(m,v),I={displayName:a,id:r,...D.data,path:w},N=!!I.children&&I.children>0,q=$I(w,y),Y=h.includes(m),{open:X,onToggleOpen:B}=qI({autoExpandLoadingError:e,errorMessage:D.error&&D.error.toString(),path:w,expanded:l,onExpand:A,onCollapse:x}),j=!!y.find($=>$.match(new RegExp(`${w}$`))),O=g({disableSelection:s,hasChildren:N,hasSelectedDescendants:q,loading:D.loading,error:D.error,selected:y,open:X,path:m,singleSelection:C,node:I,label:a,checked:j,highlighted:Y}),R=Te.createElement(gE,{node:I,fullPath:m,open:X,loading:D.loading,checked:j,rootId:v,onChange:S,dataTest:`${t}-label`,selected:y,hasChildren:N,highlighted:Y,onToggleOpen:B,disableSelection:s,singleSelection:C,hasSelectedDescendants:q},O),L=N&&!X&&!D.error,G=N&&X&&!D.error;return Te.createElement(aE,{dataTest:`${t}-node`,open:X,onOpen:B,onClose:B,component:R,icon:D.loading&&Te.createElement(yE,null)},D.error&&Te.createElement(lE,{dataTest:t},Je.t("Could not load children")),L&&Te.createElement("span",{"data-test":`${t}-placeholder`}),G&&Te.createElement(xE,{OrganisationUnitNode:Pb,node:I,autoExpandLoadingError:e,dataTest:t,disableSelection:s,expanded:l,filter:b,highlighted:h,isUserDataViewFallback:p,onChange:S,onChildrenLoaded:k,onCollapse:x,onExpand:A,parentPath:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:C,suppressAlphabeticalSorting:T}))};Pb.propTypes={dataTest:pe.string.isRequired,id:pe.string.isRequired,renderNodeLabel:pe.func.isRequired,rootId:pe.string.isRequired,onChange:pe.func.isRequired,autoExpandLoadingError:pe.bool,disableSelection:pe.bool,displayName:pe.string,expanded:pe.arrayOf(Ea),filter:pe.arrayOf(Ea),highlighted:pe.arrayOf(Ea),isUserDataViewFallback:pe.bool,path:Ea,selected:pe.arrayOf(Ea),singleSelection:pe.bool,suppressAlphabeticalSorting:pe.bool,onChildrenLoaded:pe.func,onCollapse:pe.func,onExpand:pe.func};const XI=i=>{let{label:e}=i;return e},KI=(i,e)=>i!=null&&i.length?e.filter(t=>oE(i,`/${t}`)):e,vE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return Te.createElement("div",{"data-test":e},Je.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};vE.propTypes={error:pe.string.isRequired,dataTest:pe.string};const bE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return Te.createElement("div",{"data-test":e,className:"jsx-814846266"},Te.createElement(Yo,{small:!0}),Te.createElement(Dt,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};bE.propTypes={dataTest:pe.string};const QI=i=>Array.from(new Set(i)),JI=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((s,a)=>`/${e.slice(0,a+1).join("/")}`);return QI(t)},eD=i=>i.reduce((e,t)=>{const s=JI(t);return[...e,...s]},[]),tD=i=>{let{expanded:e,setExpanded:t,onExpand:s,onCollapse:a}=i;return{handleExpand:r=>{let{path:p,...m}=r;e.includes(p)||(t([...e,p]),s&&s({path:p,...m}))},handleCollapse:r=>{let{path:p,...m}=r;const g=e.indexOf(p);if(g!==-1){const v=g===0?e.slice(1):[...e.slice(0,g),...e.slice(g+1)];t(v),a&&a({path:p,...m})}}}},iD=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:s,expandedControlled:a,handleExpandControlled:l,handleCollapseControlled:h}=i;const r=!!a,p=r?[]:eD(e),[m,g]=Be.useState(p);if(r)return{expanded:a,handleExpand:l,handleCollapse:h};const{handleExpand:v,handleCollapse:y}=tD({expanded:m,setExpanded:g,onExpand:t,onCollapse:s});return{expanded:m,handleExpand:v,handleCollapse:y}},rD=i=>{const[e,t]=Be.useState(0);return Be.useEffect(()=>{const s=e+1;i===!0&&t(s)},[i]),e},nD=i=>{const t=Object.entries(i).map(s=>{let[a,l]=s;const h=l.displayName||"";return[a,{...l,displayName:h}]});return Object.fromEntries(t)},sD=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:s=>{let{isUserDataViewFallback:a}=s;return{isUserDataViewFallback:a,fields:["displayName","path","id"]}}}}),{}),aD=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=Be.useMemo(()=>sD(i),[i]),a=ka(t,{variables:{isUserDataViewFallback:e}}),{called:l,loading:h,error:r,data:p,refetch:m}=a,g=Be.useMemo(()=>p&&nD(p),[p]);return{called:l,loading:h,error:r||null,data:g||null,refetch:m}},tg=[],_E=i=>{let{onChange:e,roots:t,autoExpandLoadingError:s,dataTest:a="dhis2-uiwidgets-orgunittree",disableSelection:l,forceReload:h,highlighted:r=tg,isUserDataViewFallback:p,initiallyExpanded:m=tg,filter:g=tg,renderNodeLabel:v=XI,selected:y=tg,singleSelection:C,suppressAlphabeticalSorting:b,expanded:T,handleExpand:S,handleCollapse:k,onExpand:x,onCollapse:A,onChildrenLoaded:D}=i;const w=KI(g,Array.isArray(t)?t:[t]),I=rD(h),[N,q]=Be.useState(I),{called:Y,loading:X,error:B,data:j,refetch:O}=aD(w,{isUserDataViewFallback:p,suppressAlphabeticalSorting:b}),{expanded:R,handleExpand:L,handleCollapse:G}=iD({initiallyExpanded:m,onExpand:x,onCollapse:A,expandedControlled:T,handleExpandControlled:S,handleCollapseControlled:k});Be.useEffect(()=>(O&&I>0&&I!==N&&(O(),q(I)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[I,N,O]);const $=!Y||X;return Te.createElement("div",{"data-test":a},$&&Te.createElement(bE,null),B&&Te.createElement(vE,{error:B}),!B&&!$&&w.map(F=>{const H=j[F];return Te.createElement(Pb,{key:H.path,rootId:F,autoExpandLoadingError:s,dataTest:a,disableSelection:l,displayName:H.displayName,expanded:R,highlighted:r,id:F,isUserDataViewFallback:p,filter:g,path:H.path,renderNodeLabel:v,selected:y,singleSelection:C,suppressAlphabeticalSorting:b,onChange:e,onChildrenLoaded:D,onCollapse:G,onExpand:L})}))};_E.propTypes={roots:pe.oneOfType([pe.string,pe.arrayOf(pe.string)]).isRequired,onChange:pe.func.isRequired,autoExpandLoadingError:pe.bool,dataTest:pe.string,disableSelection:pe.bool,expanded:Sl(i=>!!i.handleExpand||!!i.handleCollapse,pe.arrayOf(pe.string)),filter:pe.arrayOf(Ea),forceReload:pe.bool,handleCollapse:Sl(i=>!!i.expanded||!!i.handleExpand,pe.func),handleExpand:Sl(i=>!!i.expanded||!!i.handleCollapse,pe.func),highlighted:pe.arrayOf(Ea),initiallyExpanded:pe.arrayOf(Ea),isUserDataViewFallback:pe.bool,renderNodeLabel:pe.func,selected:pe.arrayOf(Ea),singleSelection:pe.bool,suppressAlphabeticalSorting:pe.bool,onChildrenLoaded:pe.func,onCollapse:pe.func,onExpand:pe.func};const gr="ACCESS_NONE",Xr="ACCESS_VIEW_ONLY",nn="ACCESS_VIEW_AND_EDIT",Ib="SHARE_TARGET_EXTERNAL",Nh="SHARE_TARGET_PUBLIC",Oh="SHARE_TARGET_USER",md="SHARE_TARGET_GROUP",wE={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},TE=Object.values(wE),Zg=Be.createContext(!1);var oD=void 0;const lD=(i,e,t)=>{let s;return function(){for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];const r=oD,p=()=>{s=null,i.apply(r,l)};clearTimeout(s),s=setTimeout(p,e)}},d0=i=>i===void 0?gr:typeof i=="boolean"?i?Xr:gr:i.startsWith("rw")?nn:i.startsWith("r-")?Xr:gr,CE=i=>{if(typeof i=="boolean")return{data:gr,metadata:d0(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:d0(t),metadata:d0(e)}},Ew=i=>{switch(i){case gr:return"--";case Xr:return"r-";case nn:return"rw";default:return"--"}},Fp=i=>`${Ew(i.metadata)}${Ew(i.data)}----`,ig=i=>{let{access:e,...t}=i;return{...t,access:CE(e)}},cD=[Ib,Nh],Sw=i=>!cD.includes(i),hD=i=>{let{object:e,type:t,access:s,id:a}=i;switch(t){case"public":return{object:{...e,publicAccess:Fp(s)}};case"group":{const l=e.userGroupAccesses.map(r=>r.id!==a?r:{...r,access:Fp(s)}),h={object:{...e,userGroupAccesses:l}};return console.log(h),h}case"user":{const l=e.userAccesses.map(r=>r.id!==a?r:{...r,access:Fp(s)});return{object:{...e,userAccesses:l}}}}},uD=i=>{let{object:e,type:t,id:s,access:a,name:l}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:s,name:l,access:Fp(a)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:s,name:l,access:Fp(a)}]}}}},dD=i=>{let{object:e,type:t,id:s}=i;switch(t){case"group":{const a=e.userGroupAccesses.filter(h=>h.id!==s);return{object:{...e,userGroupAccesses:a}}}case"user":{const a=e.userAccesses.filter(h=>h.id!==s);return{object:{...e,userAccesses:a}}}}},pD="",fD="",mD=" ",gD="",yD="",xD={"View only":" ","View and edit":" ","No access":"  ","Give access to a user or group":"      ","Data access level":"","Choose a level":"","Not available offline":"     ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"      ","User / Group":"","All users":" ","Anyone logged in":"","User group":" ",User:pD,Data:fD,"Remove access":" ",Metadata:mD,"User or group":"  ",Search:gD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:yD,"Dashboard sharing":""},vD="",bD="",_D="",wD="",TD="",CD={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:vD,Data:bD,"Remove access":"",Metadata:_D,"User or group":"",Search:wD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TD,"Dashboard sharing":""},ED=" ",SD="",kD="",AD={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:ED,"Remove access":"","User or group":"",Search:SD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:kD,"Dashboard sharing":""},MD="Uivatel",PD="Data",ID="Metadata",DD="Hledat",LD="Zavt",RD={"View only":"Pouze zobrazen","View and edit":"Zobrazen a pravy","No access":"dn pstup","Give access to a user or group":"Udlte pstup uivateli nebo skupin","Data access level":"","Choose a level":"","Not available offline":"Nen k dispozici offline","Metadata access level":"","Access level":"rove pstupu","Give access":"Povolit pstup","Users and groups that currently have access":"Uivatel a skupiny, kte maj aktuln pstup","User / Group":"Uivatel / Skupina","All users":"Vichni uivatel","Anyone logged in":"","User group":"Uivatelsk skupina",User:MD,Data:PD,"Remove access":"Odebrat pstup",Metadata:ID,"User or group":"Uivatel nebo skupina",Search:DD,"Apply dashboard sharing settings to visualizations":"Na vizualizace pouijte nastaven sdlen ovldacho panelu","Something went wrong":"Nco se pokazilo","Apply sharing to dashboard visualizations":"Pout sdlen na vizualizace ovldacho panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovny dn vizualizace. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne vechny vizualizace bylo mon spn aktualizovat. {{ success }} aktualizovno spn, {{ failed }} se nepodailo aktualizovat. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovny dn vizualizace, protoe nastaven sdlen je ji dostaujc.","Successfully updated sharing for all visualizations.":"spn aktualizovno sdlen pro vechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne vechna nastaven sdlen vizualizac bylo nutn aktualizovat. {{ updated }} aktualizovno, {{ skipped }} ji m dostaten nastaven sdlen.","There are no users or groups to apply sharing settings for.":"Nejsou dn uivatel ani skupiny, pro kter by bylo mon pout nastaven sdlen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Poet vizualizac na tomto dicm panelu, kter potenciln zskaj aktualizovan nastaven sdlen: {{ visualizationsCount }}. Poet uivatel nebo skupin, na kter se tato aktualizovan nastaven budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Pouit stejnch nastaven sdlen zajist, e uivatel a skupiny, kter maj pstup k dicmu panelu, budou mt tak pstup k jeho vizualizacm (grafy, tabulky, mapy, grafy udlost a zprvy o udlostech) alespo Pouze zobrazen.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uivatel nebo skupina ji m k vizualizaci pstup Zobrazen a pravy, nebude to omezeno na Pouze zobrazen. rove pstupu Vichni uivatel nebude aktualizovna ani zmnna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Pouit sdlen nelze vrtit zpt a je nutn jej provst znovu, pokud na ovldac panel pidte nov vizualizace nebo se zmn jeho nastaven sdlen.","Sharing and access: {{- objectName}}":"Sdlen a pstup: {{- objectName}}","Sharing and access":"Sdlen a pstup",Close:LD,"Dashboard sharing":"Sdlen ovldacho panelu"},zD="",ND="",OD="",jD="",BD="Close",FD={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:zD,Data:ND,"Remove access":"",Metadata:OD,"User or group":"",Search:jD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:BD,"Dashboard sharing":""},UD="User",$D="Data",VD="Metadata",GD="Search",HD="Close",WD={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:UD,Data:$D,"Remove access":"Remove access",Metadata:VD,"User or group":"User or group",Search:GD,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:HD,"Dashboard sharing":"Dashboard sharing"},qD="Usuario",YD="Datos",ZD="Metadatos",XD="Buscar",KD="Cerrar",QD={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:qD,Data:YD,"Remove access":"Eliminar acceso",Metadata:ZD,"User or group":"Usuario o Grupo",Search:XD,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuracin compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con xito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuracin de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuracin para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuracin de uso compartido actualizado con xito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualizacin. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuracin de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este tablero que potencialmente actualizarn su confugiracin de uso compartido: {{ visualizationsCount }}. El nmero de usuarios o grupos a los que se aplicarn estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicacin de la misma configuracin para compartir garantiza que los usuarios y grupos que tienen acceso al tablero tambin tienen al menos acceso de "Solo lectura" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, este no se reducir a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuracin de uso compartido no puede deshacerse, y debers hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuracin de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:KD,"Dashboard sharing":"Compartir tablero"},JD="",eL="Datos",tL="Metadatos",iL="Buscar",rL="Cerrar",nL={"View only":"Ver slo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:JD,Data:eL,"Remove access":"Eliminar el acceso",Metadata:tL,"User or group":"Usuario o grupo",Search:iL,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la comparticin a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualizacin. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la comparticin de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualizacin porque los ajustes de comparticin ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con xito la comparticin de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de comparticin de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tena suficientes ajustes de comparticin.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuracin de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este cuadro de mando que potencialmente obtendrn ajustes de uso compartido actualizados: {{ visualizationsCount }}. Nmero de usuarios o grupos a los que se aplicarn estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuracin de comparticin se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando tambin tienen al menos acceso de "slo visualizacin" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, ste no se reducir a "Slo ver". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicacin de la comparticin no puede deshacerse, y debe hacerse de nuevo si se aaden nuevas visualizaciones al cuadro de mandos o se cambia su configuracin de comparticin.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:rL,"Dashboard sharing":"Compartir el cuadro de mandos"},sL="",aL="",oL="",lL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:sL,"Remove access":"","User or group":"",Search:aL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:oL,"Dashboard sharing":""},cL="Utilisateur",hL="Donnes",uL="Mtadonnes",dL="Chercher",pL="Fermer",fL={"View only":"","View and edit":"","No access":"Pas d'accs","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accs","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:cL,Data:hL,"Remove access":"",Metadata:uL,"User or group":"",Search:dL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourn","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:pL,"Dashboard sharing":""},mL="",gL="Data",yL="Metadata",xL="Pencarian",vL="Tutup",bL={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:mL,Data:gL,"Remove access":"",Metadata:yL,"User or group":"",Search:xL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:vL,"Dashboard sharing":""},_L="",wL="Data",TL="",CL="",EL="",SL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:_L,Data:wL,"Remove access":"",Metadata:TL,"User or group":"",Search:CL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:EL,"Dashboard sharing":""},kL="",AL="",ML="",PL="",IL="",DL={"View only":"","View and edit":"  ","No access":"","Give access to a user or group":"  ","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"  ","User / Group":" / ","All users":"","Anyone logged in":"","User group":"",User:kL,Data:AL,"Remove access":"",Metadata:ML,"User or group":"  ",Search:PL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":". .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":".  {{ success }} , {{ failed }} . .","No visualizations were updated because sharing settings are already sufficient.":".","Successfully updated sharing for all visualizations.":".","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":". {{ updated }} , {{ skipped }} .","There are no users or groups to apply sharing settings for.":"  .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":": {{ visualizationsCount }}.  : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'   ""  (, , ,   ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'   " "  "".  ""   .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":",    .","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:IL,"Dashboard sharing":""},LL="",RL="",zL="",NL="",OL="",jL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:LL,Data:RL,"Remove access":"",Metadata:zL,"User or group":"",Search:NL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:OL,"Dashboard sharing":""},BL="Bruker",FL="Data",UL="Metadata",$L="Sk",VL="Lukk",GL={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsniv","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:BL,Data:FL,"Remove access":"",Metadata:UL,"User or group":"",Search:$L,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:VL,"Dashboard sharing":""},HL="",WL="",qL="",YL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:HL,"Remove access":"","User or group":"",Search:WL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:qL,"Dashboard sharing":""},ZL="Gebruiker",XL="Gegevens",KL="Metagegevens",QL="Zoek",JL="Sluit",eR={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:ZL,Data:XL,"Remove access":"Toegang verwijderen",Metadata:KL,"User or group":"Gebruiker of groep",Search:QL,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is gepdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk gepdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:JL,"Dashboard sharing":"Dashboard delen"},tR=" ",iR="",rR="",nR="",sR="",aR={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"  ",User:tR,Data:iR,"Remove access":"",Metadata:rR,"User or group":"",Search:nR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:sR,"Dashboard sharing":""},oR="",lR=" ()",cR="",hR="",uR="  ",dR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:oR,Data:lR,"Remove access":"",Metadata:cR,"User or group":"",Search:hR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:uR,"Dashboard sharing":""},pR="Utilizador",fR="Dados",mR="Metadados",gR="Pesquisar",yR="Fechar",xR={"View only":"Ver apenas","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"No disponvel offline","Metadata access level":"","Access level":"Niveis de acesso ","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:pR,Data:fR,"Remove access":"",Metadata:mR,"User or group":"",Search:gR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:yR,"Dashboard sharing":""},vR="Usurio",bR="Dados",_R="Metadados",wR="Pesquisar",TR="Fechar",CR={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:vR,Data:bR,"Remove access":"",Metadata:_R,"User or group":"",Search:wR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TR,"Dashboard sharing":""},ER="",SR="Cutare",kR="nchidere",AR={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:ER,"Remove access":"","User or group":"",Search:SR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:kR,"Dashboard sharing":""},MR="",PR="",IR="",DR="",LR="",RR={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:MR,Data:PR,"Remove access":" ",Metadata:IR,"User or group":"  ",Search:DR,"Apply dashboard sharing settings to visualizations":"      ","Something went wrong":"-   ","Apply sharing to dashboard visualizations":"     ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"   . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"     . : {{ success }},  : {{ failed }} . ,             .","No visualizations were updated because sharing settings are already sufficient.":"   ,     .","Successfully updated sharing for all visualizations.":"     ","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"       . : {{ updated }},   : {{ skipped }}.","There are no users or groups to apply sharing settings for.":"        .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"    ,      : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"       ,    ,  (   )    (, , ,    ).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'        "  "  ,      " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"   .    ,          .","Sharing and access: {{- objectName}}":": {{- objectName}}","Sharing and access":"   ",Close:LR,"Dashboard sharing":"  "},zR="",NR="",OR="",jR="",BR="",FR={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"  ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:zR,Data:NR,"Remove access":"",Metadata:OR,"User or group":"",Search:jR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:BR,"Dashboard sharing":""},UR="",$R="Data",VR="Metadata",GR="Sk",HR="Stnga",WR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:UR,Data:$R,"Remove access":"",Metadata:VR,"User or group":"",Search:GR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ngot gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:HR,"Dashboard sharing":""},qR="",YR="Dadus",ZR="",XR="",KR="Taka",QR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:qR,Data:YR,"Remove access":"",Metadata:ZR,"User or group":"",Search:XR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:KR,"Dashboard sharing":""},JR="",e4="",t4="",i4="",r4="",n4={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:JR,Data:e4,"Remove access":"",Metadata:t4,"User or group":"",Search:i4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:r4,"Dashboard sharing":""},s4="",a4="",o4="",l4="",c4="",h4={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"  ,    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:s4,Data:a4,"Remove access":" ",Metadata:o4,"User or group":"  ",Search:l4,"Apply dashboard sharing settings to visualizations":"        ","Something went wrong":" ","Apply sharing to dashboard visualizations":"      ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"  . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"    . {{ success }}  , {{ failed }}   . ,            .","No visualizations were updated because sharing settings are already sufficient.":"  ,      .","Successfully updated sharing for all visualizations.":"      .","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"         . {{ updated }} , {{ skipped }}      .","There are no users or groups to apply sharing settings for.":"   ,       .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"     ,       : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'     ,    ,      ,     " "    (, , ,      ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'         "  ",       " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"    ,     ,            .","Sharing and access: {{- objectName}}":" : {{- objectName}}","Sharing and access":" ",Close:c4,"Dashboard sharing":"    "},u4="",d4="",p4=" ",f4=" ",m4="",g4={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":" ",User:u4,Data:d4,"Remove access":"",Metadata:p4,"User or group":"",Search:f4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:m4,"Dashboard sharing":""},y4="Metadata",x4="Izlash",v4="Yopmoq",b4={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taqiqlangan","Can view":" ","Can view and edit":"",Metadata:y4,"Remove access":"","User or group":"",Search:x4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:v4,"Dashboard sharing":""},_4="",w4="",T4="",C4="",E4="",S4={"View only":"  ","View and edit":"  ","No access":"   ","Give access to a user or group":"     ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":"   ","Give access":" ","Users and groups that currently have access":"     ","User / Group":"/","All users":" ","Anyone logged in":"","User group":" ",User:_4,Data:w4,"Remove access":"  ",Metadata:T4,"User or group":"  ",Search:C4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:E4,"Dashboard sharing":"  "},k4="Foydalanuvchi",A4="",M4="Metadata",P4="Izlash",I4="Yopmoq",D4={"View only":"","View and edit":"","No access":"Kirish taqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:k4,Data:A4,"Remove access":"",Metadata:M4,"User or group":"",Search:P4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:I4,"Dashboard sharing":""},L4="Ngi dng",R4="D liu",z4="Siu d liu",N4="Tm kim",O4="ng li",j4={"View only":"Ch xem","View and edit":"","No access":"Khng truy cp","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Khng c cho ngoi tuyn","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhm Ngi Dng",User:L4,Data:R4,"Remove access":"",Metadata:z4,"User or group":"",Search:N4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"C li","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:O4,"Dashboard sharing":""},B4="",F4="",U4="",$4="",V4="",G4={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"/","All users":"","Anyone logged in":"","User group":"",User:B4,Data:F4,"Remove access":"",Metadata:U4,"User or group":"",Search:$4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":" {{ success }}{{ failed }}","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":" {{ updated }}{{ skipped }}","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"{{ visualizationsCount }}{{ entityAmount }}",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':" ","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"{{- objectName}}","Sharing and access":"",Close:V4,"Dashboard sharing":""},H4="",W4="",q4="",Y4="",Z4="",X4={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User",User:H4,Data:W4,"Remove access":"",Metadata:q4,"User or group":"",Search:Y4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Z4,"Dashboard sharing":""},Dr="default";Je.addResources("ar",Dr,xD);Je.addResources("ar_IQ",Dr,CD);Je.addResources("ckb",Dr,AD);Je.addResources("cs",Dr,RD);Je.addResources("da",Dr,FD);Je.addResources("en",Dr,WD);Je.addResources("es",Dr,QD);Je.addResources("es_419",Dr,nL);Je.addResources("fi",Dr,lL);Je.addResources("fr",Dr,fL);Je.addResources("id",Dr,bL);Je.addResources("km",Dr,SL);Je.addResources("lo",Dr,DL);Je.addResources("my",Dr,jL);Je.addResources("nb",Dr,GL);Je.addResources("ne",Dr,YL);Je.addResources("nl",Dr,eR);Je.addResources("prs",Dr,aR);Je.addResources("ps",Dr,dR);Je.addResources("pt",Dr,xR);Je.addResources("pt_BR",Dr,CR);Je.addResources("ro",Dr,AR);Je.addResources("ru",Dr,RR);Je.addResources("si",Dr,FR);Je.addResources("sv",Dr,WR);Je.addResources("tet",Dr,QR);Je.addResources("tg",Dr,n4);Je.addResources("uk",Dr,h4);Je.addResources("ur",Dr,g4);Je.addResources("uz_Latn",Dr,b4);Je.addResources("uz_UZ_Cyrl",Dr,S4);Je.addResources("uz_UZ_Latn",Dr,D4);Je.addResources("vi",Dr,j4);Je.addResources("zh",Dr,G4);Je.addResources("zh_CN",Dr,X4);const nv=i=>{let{onClose:e,name:t,children:s,dataTest:a="dhis2-uicore-sharingdialog-modal"}=i;const l=t?Je.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):Je.t("Sharing and access");return Te.createElement(Ch,{large:!0,position:"top",onClose:e,dataTest:a},Te.createElement(Dv,null,l),Te.createElement(by,null,s),Te.createElement(Lv,null,Te.createElement(Rv,{end:!0},Te.createElement(Wr,{type:"button",secondary:!0,onClick:e},Je.t("Close")))))};nv.propTypes={children:pe.node.isRequired,dataTest:pe.string,name:pe.string,onClose:pe.func};const ed=Te.forwardRef((i,e)=>{let{icon:t,onClick:s,selected:a,disabled:l,children:h,className:r,dataTest:p="dhis2-uicore-tab"}=i,m=Be.useRef(null);e&&(m=e);const[g,v]=Be.useState(!1);return Be.useEffect(()=>{(()=>{const C=m.current.scrollWidth>m.current.clientWidth;v(C)})()},[]),Te.createElement("button",{onClick:l?void 0:y=>s({},y),"data-test":p,ref:m,role:"tab","aria-selected":a?"true":"false","aria-disabled":l?"true":"false",onFocus:l?void 0:y=>s({},y),tabIndex:-1,className:Dt.dynamic([["2433456263",[Ve.grey400,Ve.grey600,Jt.focus,Ve.grey600,Ve.grey900,Ve.grey600,Ve.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Ve.grey500,Ve.grey500]]])+` ${an("tab",r,{selected:a,disabled:l})}`},t,g?Te.createElement(Sy,{content:h,maxWidth:"100%"},Te.createElement("span",{ref:m,className:Dt.dynamic([["2433456263",[Ve.grey400,Ve.grey600,Jt.focus,Ve.grey600,Ve.grey900,Ve.grey600,Ve.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Ve.grey500,Ve.grey500]]])},h)):Te.createElement("span",{ref:m,className:Dt.dynamic([["2433456263",[Ve.grey400,Ve.grey600,Jt.focus,Ve.grey600,Ve.grey900,Ve.grey600,Ve.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Ve.grey500,Ve.grey500]]])},h),Te.createElement(Dt,{id:"2433456263",dynamic:[Ve.grey400,Ve.grey600,Jt.focus,Ve.grey600,Ve.grey900,Ve.grey600,Ve.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Ve.grey500,Ve.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${Ve.grey400};color:${Ve.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${Jt.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${Ve.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${Ve.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Ve.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${Ve.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${Jt.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${Jt.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${Ve.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${Ve.grey500};}`]))});ed.propTypes={children:pe.node,className:pe.string,dataTest:pe.string,disabled:pe.bool,icon:pe.element,selected:pe.bool,onClick:pe.func};ed.displayName="Tab";const sv=250,K4=.5;function Q4(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=i.scrollLeft,a=J4(i,s,t),l=a-s,h=ez({scrollBox:i,callback:e,startValue:s,endValue:a,change:l});window.requestAnimationFrame(h)}function J4(i,e,t){const s=i.clientWidth*K4;return Math.floor(e+s*(t?-1:1))}function ez(i){let{scrollBox:e,callback:t,startValue:s,endValue:a,change:l}=i,h,r,p;return function m(g){h||(h=g),r=g-h,p=tz({currentTime:r,DURATION:sv,startValue:s,change:l}),r>=sv?(p!==a&&(e.scrollLeft=a),t&&t()):(e.scrollLeft=p,window.requestAnimationFrame(m))}}function tz(i){let{currentTime:e,startValue:t,change:s}=i;return(e/=sv/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t}let rg;const av="__vertical-scrollbar-height-test__",iz=`
    .${av} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${av}::-webkit-scrollbar {
        display: none;
    }
`;function rz(){if(rg)return rg;const i=document.createElement("style");i.innerHTML=iz;const e=document.createElement("div");return e.classList.add(av),document.body.appendChild(i),document.body.appendChild(e),rg=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),rg}const Xg=i=>{let{children:e,disabled:t,hidden:s,onClick:a}=i;return Te.createElement("button",{onClick:t?void 0:a,className:Dt.dynamic([["2701682090",[Ve.white,Ve.grey400,Ve.grey600,Ve.grey100,Ve.grey200,Ve.grey500]]])+" "+(an("scroll-button",{disabled:t,hidden:s})||"")},e,Te.createElement(Dt,{id:"2701682090",dynamic:[Ve.white,Ve.grey400,Ve.grey600,Ve.grey100,Ve.grey200,Ve.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${Ve.white};border:none;border-bottom:1px solid ${Ve.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${Ve.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${Ve.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${Ve.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${Ve.grey500};}`]))};Xg.displayName="ScrollButton";Xg.propTypes={children:pe.any.isRequired,disabled:pe.bool,hidden:pe.bool,onClick:pe.func};function ml(i,e,t){return(e=nz(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function nz(i){var e=sz(i,"string");return typeof e=="symbol"?e:e+""}function sz(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class EE extends Be.Component{constructor(e){super(e),ml(this,"scrollBox",Be.createRef()),ml(this,"scrollArea",Be.createRef()),ml(this,"horizontalScrollBarHeight",rz()),ml(this,"scrollBoxResizeObserver",null),ml(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:s}=this.scrollArea,a=s.offsetWidth,l=t.offsetWidth,h=a<=l;this.setState({hideScrollButtons:h}),h||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),ml(this,"scrollRight",()=>this.scroll()),ml(this,"scrollLeft",()=>this.scroll(!0)),ml(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),ml(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:s}=this.scrollBox.current,{offsetWidth:a}=this.scrollArea.current,l=t<=0,h=t+s>=a;(this.state.scrolledToStart!==l||this.state.scrolledToEnd!==h)&&this.setState({scrolledToStart:l,scrolledToEnd:h})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),Q4(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const s=t.offsetLeft+t.offsetWidth;s>e.offsetWidth&&(e.scrollLeft=s-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:s,hideScrollButtons:a}=this.state,{children:l,className:h,dataTest:r}=this.props,p=!s||a;return Te.createElement("div",{"data-test":r,className:"jsx-191575146 "+Dt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(an("scroll-bar",h)||"")},Te.createElement(Xg,{disabled:e,onClick:this.scrollLeft,hidden:p},Te.createElement(xT,null)),Te.createElement("div",{className:"jsx-191575146 "+Dt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},Te.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+Dt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},Te.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+Dt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},l))),Te.createElement(Xg,{disabled:t,onClick:this.scrollRight,hidden:p},Te.createElement(bT,null)),Te.createElement(Dt,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),Te.createElement(Dt,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}EE.propTypes={children:pe.node.isRequired,dataTest:pe.string.isRequired,className:pe.string};const ov=i=>{let{children:e,fixed:t,dataTest:s}=i;const a=Be.useRef(null),l=Be.useMemo(()=>Te.Children.map(e,()=>Te.createRef()),[e]),h=r=>{const p=document.activeElement;if(a.current&&a.current===p){l.length>0&&l[0].current&&l[0].current.focus();return}const m=l.findIndex(g=>g.current===p);if(m!==-1){if(r.key==="ArrowRight"){r.preventDefault();const g=(m+1)%l.length;l[g].current.focus()}if(r.key==="ArrowLeft"){r.preventDefault();const g=(m-1+l.length)%l.length;l[g].current.focus()}}};return Te.createElement("div",{ref:a,"data-test":s,role:"tablist",tabIndex:0,onKeyDown:h,className:Dt.dynamic([["771129571",[Ve.grey400,Ve.white]]])+" "+(an({fixed:t})||"")},Te.Children.map(e,(r,p)=>Te.isValidElement(r)?Te.cloneElement(r,{ref:l[p]}):Te.createElement("span",{ref:l[p],tabIndex:-1,className:Dt.dynamic([["771129571",[Ve.grey400,Ve.white]]])},r)),Te.createElement(Dt,{id:"771129571",dynamic:[Ve.grey400,Ve.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${Ve.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${Ve.white};}`]))};ov.propTypes={dataTest:pe.string.isRequired,children:pe.node,fixed:pe.bool};const Db=i=>{let{fixed:e,children:t,className:s,scrollable:a,dataTest:l="dhis2-uicore-tabbar"}=i;return a?Te.createElement("div",{className:s,"data-test":l},Te.createElement(EE,{dataTest:`${l}-scrollbar`},Te.createElement(ov,{fixed:e,dataTest:`${l}-tabs`},t))):Te.createElement("div",{className:s,"data-test":l},Te.createElement(ov,{fixed:e,dataTest:`${l}-tabs`},t))};Db.propTypes={children:pe.node,className:pe.string,dataTest:pe.string,fixed:pe.bool,scrollable:pe.bool};var bh=[],az=function(){return bh.some(function(i){return i.activeTargets.length>0})},oz=function(){return bh.some(function(i){return i.skippedTargets.length>0})},kw="ResizeObserver loop completed with undelivered notifications.",lz=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:kw}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=kw),window.dispatchEvent(i)},nf;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(nf||(nf={}));var _h=function(i){return Object.freeze(i)},cz=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,_h(this)}return i}(),SE=function(){function i(e,t,s,a){return this.x=e,this.y=t,this.width=s,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,_h(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,s=e.y,a=e.top,l=e.right,h=e.bottom,r=e.left,p=e.width,m=e.height;return{x:t,y:s,top:a,right:l,bottom:h,left:r,width:p,height:m}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),Lb=function(i){return i instanceof SVGElement&&"getBBox"in i},kE=function(i){if(Lb(i)){var e=i.getBBox(),t=e.width,s=e.height;return!t&&!s}var a=i,l=a.offsetWidth,h=a.offsetHeight;return!(l||h||i.getClientRects().length)},Aw=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},hz=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Up=typeof window<"u"?window:{},ng=new WeakMap,Mw=/auto|scroll/,uz=/^tb|vertical/,dz=/msie|trident/i.test(Up.navigator&&Up.navigator.userAgent),Ao=function(i){return parseFloat(i||"0")},Wu=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new cz((t?e:i)||0,(t?i:e)||0)},Pw=_h({devicePixelContentBoxSize:Wu(),borderBoxSize:Wu(),contentBoxSize:Wu(),contentRect:new SE(0,0,0,0)}),AE=function(i,e){if(e===void 0&&(e=!1),ng.has(i)&&!e)return ng.get(i);if(kE(i))return ng.set(i,Pw),Pw;var t=getComputedStyle(i),s=Lb(i)&&i.ownerSVGElement&&i.getBBox(),a=!dz&&t.boxSizing==="border-box",l=uz.test(t.writingMode||""),h=!s&&Mw.test(t.overflowY||""),r=!s&&Mw.test(t.overflowX||""),p=s?0:Ao(t.paddingTop),m=s?0:Ao(t.paddingRight),g=s?0:Ao(t.paddingBottom),v=s?0:Ao(t.paddingLeft),y=s?0:Ao(t.borderTopWidth),C=s?0:Ao(t.borderRightWidth),b=s?0:Ao(t.borderBottomWidth),T=s?0:Ao(t.borderLeftWidth),S=v+m,k=p+g,x=T+C,A=y+b,D=r?i.offsetHeight-A-i.clientHeight:0,w=h?i.offsetWidth-x-i.clientWidth:0,I=a?S+x:0,N=a?k+A:0,q=s?s.width:Ao(t.width)-I-w,Y=s?s.height:Ao(t.height)-N-D,X=q+S+w+x,B=Y+k+D+A,j=_h({devicePixelContentBoxSize:Wu(Math.round(q*devicePixelRatio),Math.round(Y*devicePixelRatio),l),borderBoxSize:Wu(X,B,l),contentBoxSize:Wu(q,Y,l),contentRect:new SE(v,p,q,Y)});return ng.set(i,j),j},ME=function(i,e,t){var s=AE(i,t),a=s.borderBoxSize,l=s.contentBoxSize,h=s.devicePixelContentBoxSize;switch(e){case nf.DEVICE_PIXEL_CONTENT_BOX:return h;case nf.BORDER_BOX:return a;default:return l}},pz=function(){function i(e){var t=AE(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=_h([t.borderBoxSize]),this.contentBoxSize=_h([t.contentBoxSize]),this.devicePixelContentBoxSize=_h([t.devicePixelContentBoxSize])}return i}(),PE=function(i){if(kE(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},fz=function(){var i=1/0,e=[];bh.forEach(function(h){if(h.activeTargets.length!==0){var r=[];h.activeTargets.forEach(function(m){var g=new pz(m.target),v=PE(m.target);r.push(g),m.lastReportedSize=ME(m.target,m.observedBox),v<i&&(i=v)}),e.push(function(){h.callback.call(h.observer,r,h.observer)}),h.activeTargets.splice(0,h.activeTargets.length)}});for(var t=0,s=e;t<s.length;t++){var a=s[t];a()}return i},Iw=function(i){bh.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(a){a.isActive()&&(PE(a.target)>i?t.activeTargets.push(a):t.skippedTargets.push(a))})})},mz=function(){var i=0;for(Iw(i);az();)i=fz(),Iw(i);return oz()&&lz(),i>0},p0,IE=[],gz=function(){return IE.splice(0).forEach(function(i){return i()})},yz=function(i){if(!p0){var e=0,t=document.createTextNode(""),s={characterData:!0};new MutationObserver(function(){return gz()}).observe(t,s),p0=function(){t.textContent="".concat(e?e--:e++)}}IE.push(i),p0()},xz=function(i){yz(function(){requestAnimationFrame(i)})},Sg=0,vz=function(){return!!Sg},bz=250,_z={attributes:!0,characterData:!0,childList:!0,subtree:!0},Dw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Lw=function(i){return i===void 0&&(i=0),Date.now()+i},f0=!1,wz=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=bz),!f0){f0=!0;var s=Lw(e);xz(function(){var a=!1;try{a=mz()}finally{if(f0=!1,e=s-Lw(),!vz())return;a?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,_z)};document.body?t():Up.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Dw.forEach(function(t){return Up.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Dw.forEach(function(t){return Up.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),lv=new wz,Rw=function(i){!Sg&&i>0&&lv.start(),Sg+=i,!Sg&&lv.stop()},Tz=function(i){return!Lb(i)&&!hz(i)&&getComputedStyle(i).display==="inline"},Cz=function(){function i(e,t){this.target=e,this.observedBox=t||nf.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=ME(this.target,this.observedBox,!0);return Tz(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),Ez=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),sg=new WeakMap,zw=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},ag=function(){function i(){}return i.connect=function(e,t){var s=new Ez(e,t);sg.set(e,s)},i.observe=function(e,t,s){var a=sg.get(e),l=a.observationTargets.length===0;zw(a.observationTargets,t)<0&&(l&&bh.push(a),a.observationTargets.push(new Cz(t,s&&s.box)),Rw(1),lv.schedule())},i.unobserve=function(e,t){var s=sg.get(e),a=zw(s.observationTargets,t),l=s.observationTargets.length===1;a>=0&&(l&&bh.splice(bh.indexOf(s),1),s.observationTargets.splice(a,1),Rw(-1))},i.disconnect=function(e){var t=this,s=sg.get(e);s.observationTargets.slice().forEach(function(a){return t.unobserve(e,a.target)}),s.activeTargets.splice(0,s.activeTargets.length)},i}(),Sz=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ag.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Aw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ag.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Aw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ag.unobserve(this,e)},i.prototype.disconnect=function(){ag.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const DE=Te[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],kz=i=>{const e=Be.useRef(i);return Be.useEffect(()=>{e.current=i}),e},Az=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:Sz;function Mz(){}function Pz(i,e){const t=Dz(),s=kz(e);return DE(()=>{let a=!1;const l=i&&"current"in i?i.current:i;if(!l)return Mz;function h(r,p){a||s.current(r,p)}return t.subscribe(l,h),()=>{a=!0,t.unsubscribe(l,h)}},[i,t,s]),t.observer}function Iz(){let i=!1,e=[];const t=new Map,s=new Az((a,l)=>{e=e.concat(a);function h(){const r=new Set;for(let p=0;p<e.length;p++){if(r.has(e[p].target))continue;r.add(e[p].target);const m=t.get(e[p].target);m==null||m.forEach(g=>g(e[p],l))}e=[],i=!1}i||window.requestAnimationFrame(h),i=!0});return{observer:s,subscribe(a,l){var h;s.observe(a);const r=(h=t.get(a))!==null&&h!==void 0?h:[];r.push(l),t.set(a,r)},unsubscribe(a,l){var h;const r=(h=t.get(a))!==null&&h!==void 0?h:[];if(r.length===1){s.unobserve(a),t.delete(a);return}const p=r.indexOf(l);p!==-1&&r.splice(p,1),t.set(a,r)}}}let m0;const Dz=()=>m0||(m0=Iz()),Lz=(i,e)=>{const[t,s]=Be.useState(()=>{var a,l;const h=i&&"current"in i?i.current:i;return h?[h.offsetWidth,h.offsetHeight]:[(a=void 0)!==null&&a!==void 0?a:0,(l=void 0)!==null&&l!==void 0?l:0]});return DE(()=>{const a=i&&"current"in i?i.current:i;a&&s([a.offsetWidth,a.offsetHeight])},[i]),Pz(i,a=>{const l=a.target;s([l.offsetWidth,l.offsetHeight])}),t},LE=i=>{let{children:e,dataTest:t,maxHeight:s="280px",menuWidth:a,onClick:l,menuRef:h}=i;return Te.createElement(Iv,{onBackdropClick:l,transparent:!0},Te.createElement(Cf,{reference:h,placement:"bottom",observeReferenceResize:!0},Te.createElement("div",{"data-test":`${t}-menuwrapper`,className:Dt.dynamic([["1686499909",[a,s]]])+" card"},Te.createElement(_y,null,e))),Te.createElement(Dt,{id:"1686499909",dynamic:[a,s]},[`.card.__jsx-style-dynamic-selector{width:${a};max-height:${s};}`]))};LE.propTypes={dataTest:pe.string.isRequired,menuRef:pe.object.isRequired,menuWidth:pe.string.isRequired,children:pe.node,maxHeight:pe.string,onClick:pe.func};const RE=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:s,loading:a,onClose:l,onSearch:h,onSelect:r,placeholder:p,search:m,searchResults:g}=i;const v=Be.useRef(null),[y]=Lz(v),{isDisconnected:C}=wy();return Te.createElement(Te.Fragment,null,Te.createElement("div",{ref:v},Te.createElement(Ef,{label:s,loading:a,placeholder:p,onChange:b=>{let{value:T}=b;return h(T)},value:m,inputWidth:t,disabled:C,helpText:C?Je.t("Not available offline"):""})),g.length>0&&Te.createElement(LE,{onClick:l,menuWidth:`${y}px`,menuRef:v,dataTest:`${e}-menu`},Te.createElement(zv,null,g.map(b=>Te.createElement($u,{key:b.id,label:b.displayName,value:b.id,onClick:T=>{let{value:S}=T;return r(S)}})))))};RE.propTypes={searchResults:pe.arrayOf(pe.shape({displayName:pe.string,id:pe.string})).isRequired,dataTest:pe.string,inputWidth:pe.string,label:pe.string,loading:pe.bool,placeholder:pe.string,search:pe.string,onClose:pe.func,onSearch:pe.func,onSelect:pe.func};const Rz={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},zE=i=>{var e,t;let{selected:s,onSelection:a}=i;const[l,h]=Be.useState(""),[r,p]=Be.useState(!1),{data:m,refetch:g,fetching:v}=ka(Rz,{lazy:!0,onComplete:()=>p(!0)});Be.useEffect(()=>h(s),[s]);const y=Be.useCallback(lD(g,250),[g]);Be.useEffect(()=>{l&&l===s||(l?y({search:l}):(a(null),p(!1)))},[l]);let C=[];if(m!=null&&(e=m.search)!==null&&e!==void 0&&e.users){const b=m.search.users.map(T=>({...T,type:"user"}));C=C.concat(b)}if(m!=null&&(t=m.search)!==null&&t!==void 0&&t.userGroups){const b=m.search.userGroups.map(T=>({...T,type:"group"}));C=C.concat(b)}return Te.createElement(RE,{inputWidth:"100%",label:Je.t("User or group"),loading:v,placeholder:Je.t("Search"),search:l,searchResults:r?C:[],onClose:()=>p(!1),onSearch:h,onSelect:b=>{a(C.find(T=>T.id===b)),p(!1)}})};zE.propTypes={onSelection:pe.func.isRequired,selected:pe.string};const Vy=i=>{let{children:e}=i;return Te.createElement(Te.Fragment,null,Te.createElement("h2",{className:Dt.dynamic([["2416527184",[Ve.grey900]]])},e),Te.createElement(Dt,{id:"2416527184",dynamic:[Ve.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${Ve.grey900};}`]))};Vy.propTypes={children:pe.node.isRequired};const cv=i=>{let{onAdd:e,dataSharing:t}=i;const s=Be.useContext(Zg),[a,l]=Be.useState(null),[h,r]=Be.useState(""),[p,m]=Be.useState(""),{isDisconnected:g}=wy(),v=b=>{b.preventDefault(),e({type:a.type,id:a.id,name:a.displayName||a.name,access:{data:h,metadata:p}}),l(null),r(""),m("")},y=[{value:Xr,label:Je.t("View only")},{value:nn,label:Je.t("View and edit")}],C=[...y,{value:gr,label:Je.t("No access")}];return Te.createElement(Te.Fragment,null,Te.createElement(Vy,null,Je.t("Give access to a user or group")),Te.createElement("form",{onSubmit:v,className:Dt.dynamic([["3476690250",[Ve.grey100,Ve.grey900,Gt.dp8]]])},Te.createElement("div",{className:Dt.dynamic([["3476690250",[Ve.grey100,Ve.grey900,Gt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},Te.createElement(zE,{selected:(a==null?void 0:a.displayName)||(a==null?void 0:a.name),onSelection:l})),Te.createElement("div",{className:Dt.dynamic([["3476690250",[Ve.grey100,Ve.grey900,Gt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&Te.createElement("div",{className:Dt.dynamic([["3476690250",[Ve.grey100,Ve.grey900,Gt.dp8]]])+" select-wrapper"},Te.createElement(ds,{label:Je.t("Data access level"),placeholder:Je.t("Choose a level"),disabled:g,selected:h,helpText:g?Je.t("Not available offline"):"",onChange:b=>{let{selected:T}=b;return r(T)}},C.map(b=>{let{value:T,label:S}=b;return Te.createElement(io,{key:T,label:S,value:T,active:T===h})}))),Te.createElement("div",{className:Dt.dynamic([["3476690250",[Ve.grey100,Ve.grey900,Gt.dp8]]])+" select-wrapper"},Te.createElement(ds,{label:t?Je.t("Metadata access level"):Je.t("Access level"),placeholder:Je.t("Choose a level"),disabled:g,selected:p,helpText:g?Je.t("Not available offline"):"",onChange:b=>{let{selected:T}=b;return m(T)}},(t?C:y).map(b=>{let{value:T,label:S}=b;return Te.createElement(io,{key:T,label:S,value:T,active:T===p})}))),Te.createElement(Wr,{type:"submit",disabled:g||s||!a||t&&!h||!p||h===gr&&p===gr},Je.t("Give access")))),Te.createElement(Dt,{id:"3476690250",dynamic:[Ve.grey100,Ve.grey900,Gt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${Ve.grey100};color:${Ve.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Gt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};cv.propTypes={onAdd:pe.func.isRequired,dataSharing:pe.bool};const hv=i=>{let{label:e,onClick:t}=i;return Te.createElement("div",{onClick:t,className:Dt.dynamic([["1009072197",[Ve.red700,Gt.dp8,Gt.dp12,Ve.red050]]])},e,Te.createElement(Dt,{id:"1009072197",dynamic:[Ve.red700,Gt.dp8,Gt.dp12,Ve.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Ve.red700};padding:${Gt.dp8} ${Gt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Ve.red050};}`]))};hv.propTypes={label:pe.string.isRequired,onClick:pe.func.isRequired};const zz={[Nh]:Je.t("Anyone logged in"),[md]:Je.t("User group"),[Oh]:Je.t("User")},NE=i=>{var e;let{target:t,id:s}=i;return Te.createElement(Te.Fragment,null,Te.createElement("p",{className:Dt.dynamic([["2525483302",[Ve.grey700]]])},t===Oh?s:(e=zz[t])!==null&&e!==void 0?e:""),Te.createElement(Dt,{id:"2525483302",dynamic:[Ve.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${Ve.grey700};margin:6px 0 0 0;padding:0;}`]))};NE.propTypes={target:pe.oneOf([Nh,md,Oh]).isRequired,id:pe.string};const OE=i=>{let{target:e,name:t}=i;switch(e){case Ib:return Te.createElement(DT,{color:Ve.grey600});case Nh:case md:return Te.createElement(kT,{color:Ve.grey600});case Oh:return Te.createElement(mM,{name:t,small:!0});default:return null}};OE.propTypes={target:pe.oneOf([Ib,Nh,Oh,md]).isRequired,name:pe.string};const Nw=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===gr:!0},kg=i=>{let{name:e,id:t,target:s,access:a,accessOptions:l,disabled:h,onChange:r,onRemove:p,dataSharing:m,allUsersItem:g=!1}=i;const v=Be.useContext(Zg),{isDisconnected:y}=wy(),C={ACCESS_NONE:Je.t("No access"),ACCESS_VIEW_ONLY:Je.t("View only"),ACCESS_VIEW_AND_EDIT:Je.t("View and edit")};return Te.createElement(Te.Fragment,null,Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" wrapper"},Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" "+((m?"detailsWithData":"detailsMetadata")||"")},Te.createElement(OE,{target:s,name:e}),Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" details-text"},Te.createElement("p",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" details-name"},e),Te.createElement(NE,{target:s,id:t}))),Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" "+((m?"selectWrapperWithData":"selectWrapperMetadata")||"")},m&&Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" select"},Te.createElement(ds,{disabled:h||y||v,prefix:Je.t("Data"),selected:a.data,helpText:y?Je.t("Not available offline"):"",onChange:b=>{let{selected:T}=b;return r({...a,data:T})}},l.map(b=>Te.createElement(io,{key:b,label:C[b],value:b,active:b===a.data})),Sw(s)&&Nw({accessOtherField:a.metadata,dataSharing:m})&&Te.createElement(hv,{onClick:p,label:Je.t("Remove access")}))),Te.createElement("div",{className:Dt.dynamic([["650548845",[Ve.grey900]]])+" select"},Te.createElement(ds,{disabled:h||y||v,prefix:Je.t("Metadata"),selected:a.metadata,helpText:y?Je.t("Not available offline"):"",onChange:b=>{let{selected:T}=b;return r({...a,metadata:T})}},l.map(b=>Te.createElement(io,{key:b,label:C[b],value:b,active:b===a.metadata,disabled:!g&&b===gr&&!m})),Sw(s)&&Nw({accessOtherField:a.data,dataSharing:m})&&Te.createElement(hv,{onClick:p,label:Je.t("Remove access")}))))),Te.createElement(gM,null),Te.createElement(Dt,{id:"650548845",dynamic:[Ve.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${Ve.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};kg.propTypes={access:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,accessOptions:pe.arrayOf(pe.oneOf([gr,Xr,nn])).isRequired,dataSharing:pe.bool.isRequired,name:pe.string.isRequired,target:pe.oneOf([Nh,md,Oh]).isRequired,onChange:pe.func.isRequired,allUsersItem:pe.bool,disabled:pe.bool,id:pe.string,onRemove:pe.func};const uv=i=>{let{onChange:e,onRemove:t,publicAccess:s,allowPublicAccess:a,users:l,groups:h,dataSharing:r}=i;const p=[gr,Xr,nn];return Te.createElement(Te.Fragment,null,Te.createElement(Vy,null,Je.t("Users and groups that currently have access")),Te.createElement("div",{className:Dt.dynamic([["3415079234",[Ve.grey200,Ve.grey900]]])+" header"},Te.createElement("div",{className:Dt.dynamic([["3415079234",[Ve.grey200,Ve.grey900]]])+" "+((r?"header-start-column-data":"header-start-column-metadata")||"")},Je.t("User / Group")),Te.createElement("div",{className:Dt.dynamic([["3415079234",[Ve.grey200,Ve.grey900]]])+" "+((r?"header-end-column-data":"header-end-column-metadata")||"")},Te.createElement("span",{className:Dt.dynamic([["3415079234",[Ve.grey200,Ve.grey900]]])+" hea"},Je.t("Access level")))),Te.createElement("div",{className:Dt.dynamic([["3415079234",[Ve.grey200,Ve.grey900]]])+" list"},Te.createElement(kg,{name:Je.t("All users"),target:Nh,access:s,accessOptions:p,disabled:!a,onChange:m=>e({type:"public",access:m}),dataSharing:r,allUsersItem:!0}),h.map(m=>{let{id:g,name:v,access:y}=m;return Te.createElement(kg,{key:g,name:v,target:md,access:y,accessOptions:p,onChange:C=>e({type:"group",id:g,access:C}),onRemove:()=>t({type:"group",id:g}),dataSharing:r})}),l.map(m=>{let{id:g,name:v,access:y}=m;return y&&Te.createElement(kg,{key:g,id:g,name:v,target:Oh,access:y,accessOptions:p,onChange:C=>e({type:"user",id:g,access:C}),onRemove:()=>t({type:"user",id:g}),dataSharing:r})})),Te.createElement(Dt,{id:"3415079234",dynamic:[Ve.grey200,Ve.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${Ve.grey200};color:${Ve.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};uv.propTypes={allowPublicAccess:pe.bool.isRequired,dataSharing:pe.bool.isRequired,groups:pe.arrayOf(pe.shape({id:pe.string.isRequired,name:pe.string.isRequired,access:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])})})).isRequired,publicAccess:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,users:pe.arrayOf(pe.shape({access:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,id:pe.string.isRequired,name:pe.string.isRequired})).isRequired,onChange:pe.func.isRequired,onRemove:pe.func.isRequired};const jE=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},Nz=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:s,updatedItems:a}=i;if(s){if(a===0)return Je.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(a&&e)return Je.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:a,failed:t-a})}return a===0?Je.t("No visualizations were updated because sharing settings are already sufficient."):a===t?Je.t("Successfully updated sharing for all visualizations."):a<t?Je.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:a,skipped:t-a}):""},Oz=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?Je.t("There are no users or groups to apply sharing settings for."):Je.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},BE=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:s,itemsCount:a}=i;const l=jE(s);if(!l)return null;const h=Nz({visualizationsCount:l,itemsCount:a,hasErrors:e,updatedItems:t});return Te.createElement(Fo,null,h)};BE.propTypes={dashboardItems:pe.array.isRequired,hasErrors:pe.bool.isRequired,itemsCount:pe.number.isRequired,updatedItems:pe.number.isRequired};const jz={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},FE=i=>{let{id:e,entityAmount:t}=i;const{data:s,loading:a}=ka(jz,{variables:{id:e}});if(a)return null;const{dashboard:l}=s,h=jE(l.dashboardItems);if(!h)return null;const r=Oz({visualizationsCount:h,entityAmount:t});return Te.createElement(Fo,null,r)};FE.propTypes={entityAmount:pe.number.isRequired,id:pe.string.isRequired};const Bz={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},UE=i=>{var e;let{id:t,entityAmount:s}=i;const{isDisconnected:a}=wy(),{data:l,refetch:h}=ka(Bz,{variables:{id:t}});Be.useEffect(()=>{h({id:t})},[h,t]);const r=od(),[p,m]=Be.useState(!1),[g,v]=Be.useState(!1),[y,C]=Be.useState(null),[b,T]=Be.useState(null),S={resource:`dashboards/cascadeSharing/${t}`,type:"create"},k=()=>{m(!0),v(!0),T(null),C(null),r.mutate(S).then(D=>{T(D)}).catch(D=>{C(D.message||Je.t("Something went wrong"))}).finally(()=>{v(!1)})},x=(b==null||(e=b.errorReports)===null||e===void 0?void 0:e.length)>0,A=b==null?void 0:b.countUpdatedDashboardItems;return Te.createElement(Te.Fragment,null,!p&&Te.createElement(FE,{id:t,entityAmount:s}),y&&Te.createElement(xg,{marginTop:Gt.dp12},Te.createElement(Fo,{error:!0},y)),l&&b&&Te.createElement(xg,{marginTop:Gt.dp12},Te.createElement(BE,{hasErrors:x,updatedItems:A,dashboardItems:l.dashboard.dashboardItems,itemsCount:l.dashboard.itemsCount})),Te.createElement(xg,{marginTop:Gt.dp12},Te.createElement(Wr,{type:"button",disabled:a||g||!s,loading:g,secondary:!0,onClick:k},Je.t("Apply sharing to dashboard visualizations"))))};UE.propTypes={entityAmount:pe.number.isRequired,id:pe.string.isRequired};const Fz=()=>Te.createElement(Te.Fragment,null,Te.createElement("p",{className:Dt.dynamic([["3321084332",[Ve.grey800]]])},Je.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),Te.createElement("p",{className:Dt.dynamic([["3321084332",[Ve.grey800]]])},Je.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),Te.createElement("p",{className:Dt.dynamic([["3321084332",[Ve.grey800]]])},Je.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),Te.createElement(Dt,{id:"3321084332",dynamic:[Ve.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${Ve.grey800};}`])),$E=i=>{let{id:e,entityAmount:t}=i;return Te.createElement(Te.Fragment,null,Te.createElement(Vy,null,Je.t("Apply dashboard sharing settings to visualizations")),Te.createElement(Fz,null),Te.createElement(UE,{id:e,entityAmount:t}))};$E.propTypes={entityAmount:pe.number.isRequired,id:pe.string.isRequired};const dv=i=>{let{type:e,users:t,groups:s,publicAccess:a,allowPublicAccess:l,id:h,onAdd:r,onChange:p,onRemove:m,dataSharing:g}=i;const[v,y]=Be.useState(0);return e===wE.DASHBOARD?Te.createElement(Te.Fragment,null,Te.createElement(Db,null,Te.createElement(ed,{onClick:()=>y(0),selected:v===0},Je.t("Dashboard sharing")),Te.createElement(ed,{onClick:()=>y(1),selected:v===1},Je.t("Apply sharing to dashboard visualizations"))),Te.createElement("div",null,v===0&&Te.createElement(Te.Fragment,null,Te.createElement(cv,{onAdd:r,dataSharing:g}),Te.createElement(uv,{users:t,groups:s,publicAccess:a,allowPublicAccess:l,onChange:p,onRemove:m,dataSharing:g})),v===1&&Te.createElement($E,{id:h,entityAmount:t.length+s.length}))):Te.createElement(Te.Fragment,null,Te.createElement(cv,{onAdd:r,dataSharing:g}),Te.createElement(uv,{users:t,groups:s,publicAccess:a,allowPublicAccess:l,onChange:p,onRemove:m,dataSharing:g}))};dv.propTypes={allowPublicAccess:pe.bool.isRequired,dataSharing:pe.bool.isRequired,groups:pe.arrayOf(pe.shape({access:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,id:pe.string.isRequired,name:pe.string.isRequired})).isRequired,id:pe.string.isRequired,publicAccess:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,type:pe.oneOf(TE).isRequired,users:pe.arrayOf(pe.shape({access:pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}).isRequired,id:pe.string.isRequired,name:pe.string.isRequired})).isRequired,onAdd:pe.func.isRequired,onChange:pe.func.isRequired,onRemove:pe.func.isRequired};const Uz={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},$z={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},g0=()=>{},Vz={name:"",allowPublic:!0,public:{data:gr,metadata:gr},groups:[],users:[]},Gz=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:gr,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:gr,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:gr,metadata:t.access}}:t),e},VE=i=>{let{id:e,type:t,onClose:s=g0,onError:a=g0,onSave:l=g0,initialSharingSettings:h=Vz,dataTest:r="dhis2-uicore-sharingdialog",dataSharing:p=!1}=i;const{show:m}=Yp(Y=>Y,{critical:!0}),g=Gz(h),{data:v,refetch:y,loading:C,fetching:b}=ka(Uz,{variables:{id:e,type:t},onError:Y=>{m(Y),a(Y)}}),[T,{loading:S}]=rE($z,{variables:{type:t,id:e},onError:Y=>{m(Y),a(Y),y()},onComplete:()=>{y(),l()}});if(Be.useEffect(()=>{y({type:t,id:e})},[t,e]),C){const Y=Object.keys(h.users).map(ig),X=Object.keys(h.groups).map(ig);return Te.createElement(Zg.Provider,{value:!0},Te.createElement(nv,{onClose:s},Te.createElement(dv,{id:e,users:Y,groups:X,publicAccess:g.public,allowPublicAccess:g.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:p})))}const{object:k,meta:x}=v.sharing,A=CE(k.publicAccess),D=k.userAccesses.map(ig),w=k.userGroupAccesses.map(ig),I=Y=>{let{type:X,id:B,access:j,name:O}=Y;const R=uD({object:k,type:X,access:j,id:B,name:O});T({data:R,type:t,id:e})},N=Y=>{let{type:X,id:B,access:j}=Y;const O=hD({object:k,type:X,access:j,id:B});T({data:O,type:t,id:e})},q=Y=>{let{type:X,id:B}=Y;const j=dD({object:k,type:X,id:B});T({data:j,type:t,id:e})};return Te.createElement(Zg.Provider,{value:S||b},Te.createElement(nv,{onClose:s,name:k.displayName||k.name,dataTest:r},Te.createElement(dv,{id:e,users:D,groups:w,publicAccess:A,allowPublicAccess:x.allowPublicAccess,type:t,onAdd:I,onChange:N,onRemove:q,dataSharing:p})))};VE.propTypes={id:pe.string.isRequired,type:pe.oneOf(TE).isRequired,dataSharing:pe.bool,dataTest:pe.string,initialSharingSettings:pe.shape({allowPublic:pe.bool.isRequired,groups:pe.objectOf(pe.shape({id:pe.string.isRequired,name:pe.string.isRequired,access:pe.oneOfType([pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}),pe.oneOf([gr,Xr,nn])])})),name:pe.string,public:pe.oneOfType([pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}),pe.oneOf([gr,Xr,nn])]),users:pe.objectOf(pe.shape({id:pe.string.isRequired,name:pe.string.isRequired,access:pe.oneOfType([pe.shape({data:pe.oneOf([gr,Xr,nn]),metadata:pe.oneOf([gr,Xr,nn])}),pe.oneOf([gr,Xr,nn])])}))}),onClose:pe.func,onError:pe.func,onSave:pe.func};var Rb={};Object.defineProperty(Rb,"__esModule",{value:!0});Rb.parse=Kz;Rb.serialize=Qz;const Hz=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Wz=/^[\u0021-\u003A\u003C-\u007E]*$/,qz=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Yz=/^[\u0020-\u003A\u003D-\u007E]*$/,Zz=Object.prototype.toString,Xz=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function Kz(i,e){const t=new Xz,s=i.length;if(s<2)return t;const a=(e==null?void 0:e.decode)||Jz;let l=0;do{const h=i.indexOf("=",l);if(h===-1)break;const r=i.indexOf(";",l),p=r===-1?s:r;if(h>p){l=i.lastIndexOf(";",h-1)+1;continue}const m=Ow(i,l,h),g=jw(i,h,m),v=i.slice(m,g);if(t[v]===void 0){let y=Ow(i,h+1,p),C=jw(i,p,y);const b=a(i.slice(y,C));t[v]=b}l=p+1}while(l<s);return t}function Ow(i,e,t){do{const s=i.charCodeAt(e);if(s!==32&&s!==9)return e}while(++e<t);return t}function jw(i,e,t){for(;e>t;){const s=i.charCodeAt(--e);if(s!==32&&s!==9)return e+1}return t}function Qz(i,e,t){const s=(t==null?void 0:t.encode)||encodeURIComponent;if(!Hz.test(i))throw new TypeError(`argument name is invalid: ${i}`);const a=s(e);if(!Wz.test(a))throw new TypeError(`argument val is invalid: ${e}`);let l=i+"="+a;if(!t)return l;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);l+="; Max-Age="+t.maxAge}if(t.domain){if(!qz.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);l+="; Domain="+t.domain}if(t.path){if(!Yz.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);l+="; Path="+t.path}if(t.expires){if(!e6(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);l+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(l+="; HttpOnly"),t.secure&&(l+="; Secure"),t.partitioned&&(l+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return l}function Jz(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function e6(i){return Zz.call(i)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bw="popstate";function t6(i={}){function e(a,l){let{pathname:h="/",search:r="",hash:p=""}=Ll(a.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),sf("",{pathname:h,search:r,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let h=a.document.querySelector("base"),r="";if(h&&h.getAttribute("href")){let p=a.location.href,m=p.indexOf("#");r=m===-1?p:p.slice(0,m)}return r+"#"+(typeof l=="string"?l:vc(l))}function s(a,l){rs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return r6(e,t,s,i)}function kr(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function rs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function i6(){return Math.random().toString(36).substring(2,10)}function Fw(i,e){return{usr:i.state,key:i.key,idx:e}}function sf(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:t,key:e&&e.key||s||i6()}}function vc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ll(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function r6(i,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,r="POP",p=null,m=g();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function g(){return(h.state||{idx:null}).idx}function v(){r="POP";let S=g(),k=S==null?null:S-m;m=S,p&&p({action:r,location:T.location,delta:k})}function y(S,k){r="PUSH";let x=sf(T.location,S,k);t(x,S),m=g()+1;let A=Fw(x,m),D=T.createHref(x);try{h.pushState(A,"",D)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(D)}l&&p&&p({action:r,location:T.location,delta:1})}function C(S,k){r="REPLACE";let x=sf(T.location,S,k);t(x,S),m=g();let A=Fw(x,m),D=T.createHref(x);h.replaceState(A,"",D),l&&p&&p({action:r,location:T.location,delta:0})}function b(S){let k=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof S=="string"?S:vc(S);return x=x.replace(/ $/,"%20"),kr(k,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,k)}let T={get action(){return r},get location(){return i(a,h)},listen(S){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Bw,v),p=S,()=>{a.removeEventListener(Bw,v),p=null}},createHref(S){return e(a,S)},createURL:b,encodeLocation(S){let k=b(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:C,go(S){return h.go(S)}};return T}var n6=new Set(["lazy","caseSensitive","path","id","index","children"]);function s6(i){return i.index===!0}function Kg(i,e,t=[],s={}){return i.map((a,l)=>{let h=[...t,String(l)],r=typeof a.id=="string"?a.id:h.join("-");if(kr(a.index!==!0||!a.children,"Cannot specify children on an index route"),kr(!s[r],`Found a route id collision on id "${r}".  Route id's must be globally unique within Data Router usages`),s6(a)){let p={...a,...e(a),id:r};return s[r]=p,p}else{let p={...a,...e(a),id:r,children:void 0};return s[r]=p,a.children&&(p.children=Kg(a.children,e,h,s)),p}})}function ac(i,e,t="/"){return Ag(i,e,t,!1)}function Ag(i,e,t,s){let a=typeof e=="string"?Ll(e):e,l=yo(a.pathname||"/",t);if(l==null)return null;let h=HE(i);a6(h);let r=null;for(let p=0;r==null&&p<h.length;++p){let m=y6(l);r=m6(h[p],m,s)}return r}function GE(i,e){let{route:t,pathname:s,params:a}=i;return{id:t.id,pathname:s,params:a,data:e[t.id],handle:t.handle}}function HE(i,e=[],t=[],s=""){let a=(l,h,r)=>{let p={relativePath:r===void 0?l.path||"":r,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(kr(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let m=Oo([s,p.relativePath]),g=t.concat(p);l.children&&l.children.length>0&&(kr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),HE(l.children,e,g,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:p6(m,l.index),routesMeta:g})};return i.forEach((l,h)=>{var r;if(l.path===""||!((r=l.path)!=null&&r.includes("?")))a(l,h);else for(let p of WE(l.path))a(l,h,p)}),e}function WE(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=WE(s.join("/")),r=[];return r.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&r.push(...h),r.map(p=>i.startsWith("/")&&p===""?"/":p)}function a6(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:f6(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var o6=/^:[\w-]+$/,l6=3,c6=2,h6=1,u6=10,d6=-2,Uw=i=>i==="*";function p6(i,e){let t=i.split("/"),s=t.length;return t.some(Uw)&&(s+=d6),e&&(s+=c6),t.filter(a=>!Uw(a)).reduce((a,l)=>a+(o6.test(l)?l6:l===""?h6:u6),s)}function f6(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function m6(i,e,t=!1){let{routesMeta:s}=i,a={},l="/",h=[];for(let r=0;r<s.length;++r){let p=s[r],m=r===s.length-1,g=l==="/"?e:e.slice(l.length)||"/",v=Qg({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),y=p.route;if(!v&&m&&t&&!s[s.length-1].route.index&&(v=Qg({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!v)return null;Object.assign(a,v.params),h.push({params:a,pathname:Oo([l,v.pathname]),pathnameBase:b6(Oo([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=Oo([l,v.pathnameBase]))}return h}function Qg(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=g6(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),r=a.slice(1);return{params:s.reduce((m,{paramName:g,isOptional:v},y)=>{if(g==="*"){let b=r[y]||"";h=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const C=r[y];return v&&!C?m[g]=void 0:m[g]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:h,pattern:i}}function g6(i,e=!1,t=!0){rs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,r,p)=>(s.push({paramName:r,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function y6(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function yo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function x6(i,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof i=="string"?Ll(i):i;return{pathname:t?t.startsWith("/")?t:v6(t,e):e,search:_6(s),hash:w6(a)}}function v6(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function y0(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qE(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gy(i){let e=qE(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Hy(i,e,t,s=!1){let a;typeof i=="string"?a=Ll(i):(a={...i},kr(!a.pathname||!a.pathname.includes("?"),y0("?","pathname","search",a)),kr(!a.pathname||!a.pathname.includes("#"),y0("#","pathname","hash",a)),kr(!a.search||!a.search.includes("#"),y0("#","search","hash",a)));let l=i===""||a.pathname==="",h=l?"/":a.pathname,r;if(h==null)r=t;else{let v=e.length-1;if(!s&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),v-=1;a.pathname=y.join("/")}r=v>=0?e[v]:"/"}let p=x6(a,r),m=h&&h!=="/"&&h.endsWith("/"),g=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}var Oo=i=>i.join("/").replace(/\/\/+/g,"/"),b6=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),_6=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,w6=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Jg=class{constructor(i,e,t,s=!1){this.status=i,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Uf(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var YE=["POST","PUT","PATCH","DELETE"],T6=new Set(YE),C6=["GET",...YE],E6=new Set(C6),S6=new Set([301,302,303,307,308]),k6=new Set([307,308]),x0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},A6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M6=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),ZE="remix-router-transitions",XE=Symbol("ResetLoaderData");function P6(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";kr(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=i.mapRouteProperties||M6,a={},l=Kg(i.routes,s,void 0,a),h,r=i.basename||"/",p=i.dataStrategy||z6,m=i.patchRoutesOnNavigation,g={...i.future},v=null,y=new Set,C=null,b=null,T=null,S=i.hydrationData!=null,k=ac(l,i.history.location,r),x=null;if(k==null&&!m){let ut=Ka(404,{pathname:i.history.location.pathname}),{matches:vt,route:Pt}=Qw(l);k=vt,x={[Pt.id]:ut}}k&&!i.hydrationData&&Xi(k,l,i.history.location.pathname).active&&(k=null);let A;if(k)if(k.some(ut=>ut.route.lazy))A=!1;else if(!k.some(ut=>ut.route.loader))A=!0;else{let ut=i.hydrationData?i.hydrationData.loaderData:null,vt=i.hydrationData?i.hydrationData.errors:null;if(vt){let Pt=k.findIndex(Bt=>vt[Bt.route.id]!==void 0);A=k.slice(0,Pt+1).every(Bt=>!fv(Bt.route,ut,vt))}else A=k.every(Pt=>!fv(Pt.route,ut,vt))}else{A=!1,k=[];let ut=Xi(null,l,i.history.location.pathname);ut.active&&ut.matches&&(k=ut.matches)}let D,w={historyAction:i.history.action,location:i.history.location,matches:k,initialized:A,navigation:x0,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I="POP",N=!1,q,Y=!1,X=new Map,B=null,j=!1,O=!1,R=new Set,L=new Map,G=0,$=-1,F=new Map,H=new Set,W=new Map,re=new Map,he=new Set,ie=new Map,ae,Ce=null;function ge(){if(v=i.history.listen(({action:ut,location:vt,delta:Pt})=>{if(ae){ae(),ae=void 0;return}rs(ie.size===0||Pt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Bt=Et({currentLocation:w.location,nextLocation:vt,historyAction:ut});if(Bt&&Pt!=null){let Yt=new Promise(vi=>{ae=vi});i.history.go(Pt*-1),ft(Bt,{state:"blocked",location:vt,proceed(){ft(Bt,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),Yt.then(()=>i.history.go(Pt))},reset(){let vi=new Map(w.blockers);vi.set(Bt,wp),Q({blockers:vi})}});return}return ne(ut,vt)}),t){W6(e,X);let ut=()=>q6(e,X);e.addEventListener("pagehide",ut),B=()=>e.removeEventListener("pagehide",ut)}return w.initialized||ne("POP",w.location,{initialHydration:!0}),D}function ke(){v&&v(),B&&B(),y.clear(),q&&q.abort(),w.fetchers.forEach((ut,vt)=>je(vt)),w.blockers.forEach((ut,vt)=>Rt(vt))}function K(ut){return y.add(ut),()=>y.delete(ut)}function Q(ut,vt={}){w={...w,...ut};let Pt=[],Bt=[];w.fetchers.forEach((Yt,vi)=>{Yt.state==="idle"&&(he.has(vi)?Pt.push(vi):Bt.push(vi))}),he.forEach(Yt=>{!w.fetchers.has(Yt)&&!L.has(Yt)&&Pt.push(Yt)}),[...y].forEach(Yt=>Yt(w,{deletedFetchers:Pt,viewTransitionOpts:vt.viewTransitionOpts,flushSync:vt.flushSync===!0})),Pt.forEach(Yt=>je(Yt)),Bt.forEach(Yt=>w.fetchers.delete(Yt))}function le(ut,vt,{flushSync:Pt}={}){var ve,Re;let Bt=w.actionData!=null&&w.navigation.formMethod!=null&&ho(w.navigation.formMethod)&&w.navigation.state==="loading"&&((ve=ut.state)==null?void 0:ve._isRedirect)!==!0,Yt;vt.actionData?Object.keys(vt.actionData).length>0?Yt=vt.actionData:Yt=null:Bt?Yt=w.actionData:Yt=null;let vi=vt.loaderData?Xw(w.loaderData,vt.loaderData,vt.matches||[],vt.errors):w.loaderData,Oi=w.blockers;Oi.size>0&&(Oi=new Map(Oi),Oi.forEach(($e,Ke)=>Oi.set(Ke,wp)));let di=N===!0||w.navigation.formMethod!=null&&ho(w.navigation.formMethod)&&((Re=ut.state)==null?void 0:Re._isRedirect)!==!0;h&&(l=h,h=void 0),j||I==="POP"||(I==="PUSH"?i.history.push(ut,ut.state):I==="REPLACE"&&i.history.replace(ut,ut.state));let We;if(I==="POP"){let $e=X.get(w.location.pathname);$e&&$e.has(ut.pathname)?We={currentLocation:w.location,nextLocation:ut}:X.has(ut.pathname)&&(We={currentLocation:ut,nextLocation:w.location})}else if(Y){let $e=X.get(w.location.pathname);$e?$e.add(ut.pathname):($e=new Set([ut.pathname]),X.set(w.location.pathname,$e)),We={currentLocation:w.location,nextLocation:ut}}Q({...vt,actionData:Yt,loaderData:vi,historyAction:I,location:ut,initialized:!0,navigation:x0,revalidation:"idle",restoreScrollPosition:ar(ut,vt.matches||w.matches),preventScrollReset:di,blockers:Oi},{viewTransitionOpts:We,flushSync:Pt===!0}),I="POP",N=!1,Y=!1,j=!1,O=!1,Ce==null||Ce.resolve(),Ce=null}async function _e(ut,vt){if(typeof ut=="number"){i.history.go(ut);return}let Pt=pv(w.location,w.matches,r,ut,vt==null?void 0:vt.fromRouteId,vt==null?void 0:vt.relative),{path:Bt,submission:Yt,error:vi}=$w(!1,Pt,vt),Oi=w.location,di=sf(w.location,Bt,vt&&vt.state);di={...di,...i.history.encodeLocation(di)};let We=vt&&vt.replace!=null?vt.replace:void 0,ve="PUSH";We===!0?ve="REPLACE":We===!1||Yt!=null&&ho(Yt.formMethod)&&Yt.formAction===w.location.pathname+w.location.search&&(ve="REPLACE");let Re=vt&&"preventScrollReset"in vt?vt.preventScrollReset===!0:void 0,$e=(vt&&vt.flushSync)===!0,Ke=Et({currentLocation:Oi,nextLocation:di,historyAction:ve});if(Ke){ft(Ke,{state:"blocked",location:di,proceed(){ft(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:di}),_e(ut,vt)},reset(){let st=new Map(w.blockers);st.set(Ke,wp),Q({blockers:st})}});return}await ne(ve,di,{submission:Yt,pendingError:vi,preventScrollReset:Re,replace:vt&&vt.replace,enableViewTransition:vt&&vt.viewTransition,flushSync:$e})}function J(){Ce||(Ce=Y6()),me(),Q({revalidation:"loading"});let ut=Ce.promise;return w.navigation.state==="submitting"?ut:w.navigation.state==="idle"?(ne(w.historyAction,w.location,{startUninterruptedRevalidation:!0}),ut):(ne(I||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:Y===!0}),ut)}async function ne(ut,vt,Pt){q&&q.abort(),q=null,I=ut,j=(Pt&&Pt.startUninterruptedRevalidation)===!0,Wt(w.location,w.matches),N=(Pt&&Pt.preventScrollReset)===!0,Y=(Pt&&Pt.enableViewTransition)===!0;let Bt=h||l,Yt=Pt&&Pt.overrideNavigation,vi=ac(Bt,vt,r),Oi=(Pt&&Pt.flushSync)===!0,di=Xi(vi,Bt,vt.pathname);if(di.active&&di.matches&&(vi=di.matches),!vi){let{error:ct,notFoundMatches:ot,route:nt}=Tt(vt.pathname);le(vt,{matches:ot,loaderData:{},errors:{[nt.id]:ct}},{flushSync:Oi});return}if(w.initialized&&!O&&U6(w.location,vt)&&!(Pt&&Pt.submission&&ho(Pt.submission.formMethod))){le(vt,{matches:vi},{flushSync:Oi});return}q=new AbortController;let We=Mu(i.history,vt,q.signal,Pt&&Pt.submission),ve;if(Pt&&Pt.pendingError)ve=[hh(vi).route.id,{type:"error",error:Pt.pendingError}];else if(Pt&&Pt.submission&&ho(Pt.submission.formMethod)){let ct=await ue(We,vt,Pt.submission,vi,di.active,{replace:Pt.replace,flushSync:Oi});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[ot,nt]=ct.pendingActionResult;if(ja(nt)&&Uf(nt.error)&&nt.error.status===404){q=null,le(vt,{matches:ct.matches,loaderData:{},errors:{[ot]:nt.error}});return}}vi=ct.matches||vi,ve=ct.pendingActionResult,Yt=v0(vt,Pt.submission),Oi=!1,di.active=!1,We=Mu(i.history,We.url,We.signal)}let{shortCircuited:Re,matches:$e,loaderData:Ke,errors:st}=await ye(We,vt,vi,di.active,Yt,Pt&&Pt.submission,Pt&&Pt.fetcherSubmission,Pt&&Pt.replace,Pt&&Pt.initialHydration===!0,Oi,ve);Re||(q=null,le(vt,{matches:$e||vi,...Kw(ve),loaderData:Ke,errors:st}))}async function ue(ut,vt,Pt,Bt,Yt,vi={}){me();let Oi=G6(vt,Pt);if(Q({navigation:Oi},{flushSync:vi.flushSync===!0}),Yt){let ve=await mr(Bt,vt.pathname,ut.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let Re=hh(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[Re,{type:"error",error:ve.error}]}}else if(ve.matches)Bt=ve.matches;else{let{notFoundMatches:Re,error:$e,route:Ke}=Tt(vt.pathname);return{matches:Re,pendingActionResult:[Ke.id,{type:"error",error:$e}]}}}let di,We=zp(Bt,vt);if(!We.route.action&&!We.route.lazy)di={type:"error",error:Ka(405,{method:ut.method,pathname:vt.pathname,routeId:We.route.id})};else if(di=(await Ae("action",w,ut,[We],Bt,null))[We.route.id],ut.signal.aborted)return{shortCircuited:!0};if(dh(di)){let ve;return vi&&vi.replace!=null?ve=vi.replace:ve=qw(di.response.headers.get("Location"),new URL(ut.url),r)===w.location.pathname+w.location.search,await He(ut,di,!0,{submission:Pt,replace:ve}),{shortCircuited:!0}}if(ja(di)){let ve=hh(Bt,We.route.id);return(vi&&vi.replace)!==!0&&(I="PUSH"),{matches:Bt,pendingActionResult:[ve.route.id,di]}}return{matches:Bt,pendingActionResult:[We.route.id,di]}}async function ye(ut,vt,Pt,Bt,Yt,vi,Oi,di,We,ve,Re){let $e=Yt||v0(vt,vi),Ke=vi||Oi||e2($e),st=!j&&!We;if(Bt){if(st){let Pi=we(Re);Q({navigation:$e,...Pi!==void 0?{actionData:Pi}:{}},{flushSync:ve})}let _i=await mr(Pt,vt.pathname,ut.signal);if(_i.type==="aborted")return{shortCircuited:!0};if(_i.type==="error"){let Pi=hh(_i.partialMatches).route.id;return{matches:_i.partialMatches,loaderData:{},errors:{[Pi]:_i.error}}}else if(_i.matches)Pt=_i.matches;else{let{error:Pi,notFoundMatches:$i,route:ji}=Tt(vt.pathname);return{matches:$i,loaderData:{},errors:{[ji.id]:Pi}}}}let ct=h||l,[ot,nt]=Gw(i.history,w,Pt,Ke,vt,We===!0,O,R,he,W,H,ct,r,Re);if($=++G,ot.length===0&&nt.length===0){let _i=dt();return le(vt,{matches:Pt,loaderData:{},errors:Re&&ja(Re[1])?{[Re[0]]:Re[1].error}:null,...Kw(Re),..._i?{fetchers:new Map(w.fetchers)}:{}},{flushSync:ve}),{shortCircuited:!0}}if(st){let _i={};if(!Bt){_i.navigation=$e;let Pi=we(Re);Pi!==void 0&&(_i.actionData=Pi)}nt.length>0&&(_i.fetchers=ze(nt)),Q(_i,{flushSync:ve})}nt.forEach(_i=>{tt(_i.key),_i.controller&&L.set(_i.key,_i.controller)});let mt=()=>nt.forEach(_i=>tt(_i.key));q&&q.signal.addEventListener("abort",mt);let{loaderResults:kt,fetcherResults:Nt}=await xe(w,Pt,ot,nt,ut);if(ut.signal.aborted)return{shortCircuited:!0};q&&q.signal.removeEventListener("abort",mt),nt.forEach(_i=>L.delete(_i.key));let Lt=og(kt);if(Lt)return await He(ut,Lt.result,!0,{replace:di}),{shortCircuited:!0};if(Lt=og(Nt),Lt)return H.add(Lt.key),await He(ut,Lt.result,!0,{replace:di}),{shortCircuited:!0};let{loaderData:oi,errors:Qt}=Zw(w,Pt,kt,Re,nt,Nt);We&&w.errors&&(Qt={...w.errors,...Qt});let pi=dt(),bi=gt($),Ui=pi||bi||nt.length>0;return{matches:Pt,loaderData:oi,errors:Qt,...Ui?{fetchers:new Map(w.fetchers)}:{}}}function we(ut){if(ut&&!ja(ut[1]))return{[ut[0]]:ut[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function ze(ut){return ut.forEach(vt=>{let Pt=w.fetchers.get(vt.key),Bt=Tp(void 0,Pt?Pt.data:void 0);w.fetchers.set(vt.key,Bt)}),new Map(w.fetchers)}async function Ee(ut,vt,Pt,Bt){tt(ut);let Yt=(Bt&&Bt.flushSync)===!0,vi=h||l,Oi=pv(w.location,w.matches,r,Pt,vt,Bt==null?void 0:Bt.relative),di=ac(vi,Oi,r),We=Xi(di,vi,Oi);if(We.active&&We.matches&&(di=We.matches),!di){De(ut,vt,Ka(404,{pathname:Oi}),{flushSync:Yt});return}let{path:ve,submission:Re,error:$e}=$w(!0,Oi,Bt);if($e){De(ut,vt,$e,{flushSync:Yt});return}let Ke=zp(di,ve),st=(Bt&&Bt.preventScrollReset)===!0;if(Re&&ho(Re.formMethod)){await Ie(ut,vt,ve,Ke,di,We.active,Yt,st,Re);return}W.set(ut,{routeId:vt,path:ve}),await Fe(ut,vt,ve,Ke,di,We.active,Yt,st,Re)}async function Ie(ut,vt,Pt,Bt,Yt,vi,Oi,di,We){me(),W.delete(ut);function ve(hr){if(!hr.route.action&&!hr.route.lazy){let $r=Ka(405,{method:We.formMethod,pathname:Pt,routeId:vt});return De(ut,vt,$r,{flushSync:Oi}),!0}return!1}if(!vi&&ve(Bt))return;let Re=w.fetchers.get(ut);Me(ut,H6(We,Re),{flushSync:Oi});let $e=new AbortController,Ke=Mu(i.history,Pt,$e.signal,We);if(vi){let hr=await mr(Yt,Pt,Ke.signal);if(hr.type==="aborted")return;if(hr.type==="error"){De(ut,vt,hr.error,{flushSync:Oi});return}else if(hr.matches){if(Yt=hr.matches,Bt=zp(Yt,Pt),ve(Bt))return}else{De(ut,vt,Ka(404,{pathname:Pt}),{flushSync:Oi});return}}L.set(ut,$e);let st=G,ot=(await Ae("action",w,Ke,[Bt],Yt,ut))[Bt.route.id];if(Ke.signal.aborted){L.get(ut)===$e&&L.delete(ut);return}if(he.has(ut)){if(dh(ot)||ja(ot)){Me(ut,tc(void 0));return}}else{if(dh(ot))if(L.delete(ut),$>st){Me(ut,tc(void 0));return}else return H.add(ut),Me(ut,Tp(We)),He(Ke,ot,!1,{fetcherSubmission:We,preventScrollReset:di});if(ja(ot)){De(ut,vt,ot.error);return}}let nt=w.navigation.location||w.location,mt=Mu(i.history,nt,$e.signal),kt=h||l,Nt=w.navigation.state!=="idle"?ac(kt,w.navigation.location,r):w.matches;kr(Nt,"Didn't find any matches after fetcher action");let Lt=++G;F.set(ut,Lt);let oi=Tp(We,ot.data);w.fetchers.set(ut,oi);let[Qt,pi]=Gw(i.history,w,Nt,We,nt,!1,O,R,he,W,H,kt,r,[Bt.route.id,ot]);pi.filter(hr=>hr.key!==ut).forEach(hr=>{let $r=hr.key,vn=w.fetchers.get($r),Un=Tp(void 0,vn?vn.data:void 0);w.fetchers.set($r,Un),tt($r),hr.controller&&L.set($r,hr.controller)}),Q({fetchers:new Map(w.fetchers)});let bi=()=>pi.forEach(hr=>tt(hr.key));$e.signal.addEventListener("abort",bi);let{loaderResults:Ui,fetcherResults:_i}=await xe(w,Nt,Qt,pi,mt);if($e.signal.aborted)return;$e.signal.removeEventListener("abort",bi),F.delete(ut),L.delete(ut),pi.forEach(hr=>L.delete(hr.key));let Pi=og(Ui);if(Pi)return He(mt,Pi.result,!1,{preventScrollReset:di});if(Pi=og(_i),Pi)return H.add(Pi.key),He(mt,Pi.result,!1,{preventScrollReset:di});let{loaderData:$i,errors:ji}=Zw(w,Nt,Ui,void 0,pi,_i);if(w.fetchers.has(ut)){let hr=tc(ot.data);w.fetchers.set(ut,hr)}gt(Lt),w.navigation.state==="loading"&&Lt>$?(kr(I,"Expected pending action"),q&&q.abort(),le(w.navigation.location,{matches:Nt,loaderData:$i,errors:ji,fetchers:new Map(w.fetchers)})):(Q({errors:ji,loaderData:Xw(w.loaderData,$i,Nt,ji),fetchers:new Map(w.fetchers)}),O=!1)}async function Fe(ut,vt,Pt,Bt,Yt,vi,Oi,di,We){let ve=w.fetchers.get(ut);Me(ut,Tp(We,ve?ve.data:void 0),{flushSync:Oi});let Re=new AbortController,$e=Mu(i.history,Pt,Re.signal);if(vi){let ot=await mr(Yt,Pt,$e.signal);if(ot.type==="aborted")return;if(ot.type==="error"){De(ut,vt,ot.error,{flushSync:Oi});return}else if(ot.matches)Yt=ot.matches,Bt=zp(Yt,Pt);else{De(ut,vt,Ka(404,{pathname:Pt}),{flushSync:Oi});return}}L.set(ut,Re);let Ke=G,ct=(await Ae("loader",w,$e,[Bt],Yt,ut))[Bt.route.id];if(L.get(ut)===Re&&L.delete(ut),!$e.signal.aborted){if(he.has(ut)){Me(ut,tc(void 0));return}if(dh(ct))if($>Ke){Me(ut,tc(void 0));return}else{H.add(ut),await He($e,ct,!1,{preventScrollReset:di});return}if(ja(ct)){De(ut,vt,ct.error);return}Me(ut,tc(ct.data))}}async function He(ut,vt,Pt,{submission:Bt,fetcherSubmission:Yt,preventScrollReset:vi,replace:Oi}={}){vt.response.headers.has("X-Remix-Revalidate")&&(O=!0);let di=vt.response.headers.get("Location");kr(di,"Expected a Location header on the redirect Response"),di=qw(di,new URL(ut.url),r);let We=sf(w.location,di,{_isRedirect:!0});if(t){let ct=!1;if(vt.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(zb.test(di)){const ot=i.history.createURL(di);ct=ot.origin!==e.location.origin||yo(ot.pathname,r)==null}if(ct){Oi?e.location.replace(di):e.location.assign(di);return}}q=null;let ve=Oi===!0||vt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Re,formAction:$e,formEncType:Ke}=w.navigation;!Bt&&!Yt&&Re&&$e&&Ke&&(Bt=e2(w.navigation));let st=Bt||Yt;if(k6.has(vt.response.status)&&st&&ho(st.formMethod))await ne(ve,We,{submission:{...st,formAction:di},preventScrollReset:vi||N,enableViewTransition:Pt?Y:void 0});else{let ct=v0(We,Bt);await ne(ve,We,{overrideNavigation:ct,fetcherSubmission:Yt,preventScrollReset:vi||N,enableViewTransition:Pt?Y:void 0})}}async function Ae(ut,vt,Pt,Bt,Yt,vi){let Oi,di={};try{Oi=await N6(p,ut,vt,Pt,Bt,Yt,vi,a,s)}catch(We){return Bt.forEach(ve=>{di[ve.route.id]={type:"error",error:We}}),di}for(let[We,ve]of Object.entries(Oi))if($6(ve)){let Re=ve.result;di[We]={type:"redirect",response:B6(Re,Pt,We,Yt,r)}}else di[We]=await j6(ve);return di}async function xe(ut,vt,Pt,Bt,Yt){let vi=Ae("loader",ut,Yt,Pt,vt,null),Oi=Promise.all(Bt.map(async ve=>{if(ve.matches&&ve.match&&ve.controller){let $e=(await Ae("loader",ut,Mu(i.history,ve.path,ve.controller.signal),[ve.match],ve.matches,ve.key))[ve.match.route.id];return{[ve.key]:$e}}else return Promise.resolve({[ve.key]:{type:"error",error:Ka(404,{pathname:ve.path})}})})),di=await vi,We=(await Oi).reduce((ve,Re)=>Object.assign(ve,Re),{});return{loaderResults:di,fetcherResults:We}}function me(){O=!0,W.forEach((ut,vt)=>{L.has(vt)&&R.add(vt),tt(vt)})}function Me(ut,vt,Pt={}){w.fetchers.set(ut,vt),Q({fetchers:new Map(w.fetchers)},{flushSync:(Pt&&Pt.flushSync)===!0})}function De(ut,vt,Pt,Bt={}){let Yt=hh(w.matches,vt);je(ut),Q({errors:{[Yt.route.id]:Pt},fetchers:new Map(w.fetchers)},{flushSync:(Bt&&Bt.flushSync)===!0})}function Pe(ut){return re.set(ut,(re.get(ut)||0)+1),he.has(ut)&&he.delete(ut),w.fetchers.get(ut)||A6}function je(ut){let vt=w.fetchers.get(ut);L.has(ut)&&!(vt&&vt.state==="loading"&&F.has(ut))&&tt(ut),W.delete(ut),F.delete(ut),H.delete(ut),he.delete(ut),R.delete(ut),w.fetchers.delete(ut)}function Xe(ut){let vt=(re.get(ut)||0)-1;vt<=0?(re.delete(ut),he.add(ut)):re.set(ut,vt),Q({fetchers:new Map(w.fetchers)})}function tt(ut){let vt=L.get(ut);vt&&(vt.abort(),L.delete(ut))}function rt(ut){for(let vt of ut){let Pt=Pe(vt),Bt=tc(Pt.data);w.fetchers.set(vt,Bt)}}function dt(){let ut=[],vt=!1;for(let Pt of H){let Bt=w.fetchers.get(Pt);kr(Bt,`Expected fetcher: ${Pt}`),Bt.state==="loading"&&(H.delete(Pt),ut.push(Pt),vt=!0)}return rt(ut),vt}function gt(ut){let vt=[];for(let[Pt,Bt]of F)if(Bt<ut){let Yt=w.fetchers.get(Pt);kr(Yt,`Expected fetcher: ${Pt}`),Yt.state==="loading"&&(tt(Pt),F.delete(Pt),vt.push(Pt))}return rt(vt),vt.length>0}function wt(ut,vt){let Pt=w.blockers.get(ut)||wp;return ie.get(ut)!==vt&&ie.set(ut,vt),Pt}function Rt(ut){w.blockers.delete(ut),ie.delete(ut)}function ft(ut,vt){let Pt=w.blockers.get(ut)||wp;kr(Pt.state==="unblocked"&&vt.state==="blocked"||Pt.state==="blocked"&&vt.state==="blocked"||Pt.state==="blocked"&&vt.state==="proceeding"||Pt.state==="blocked"&&vt.state==="unblocked"||Pt.state==="proceeding"&&vt.state==="unblocked",`Invalid blocker state transition: ${Pt.state} -> ${vt.state}`);let Bt=new Map(w.blockers);Bt.set(ut,vt),Q({blockers:Bt})}function Et({currentLocation:ut,nextLocation:vt,historyAction:Pt}){if(ie.size===0)return;ie.size>1&&rs(!1,"A router only supports one blocker at a time");let Bt=Array.from(ie.entries()),[Yt,vi]=Bt[Bt.length-1],Oi=w.blockers.get(Yt);if(!(Oi&&Oi.state==="proceeding")&&vi({currentLocation:ut,nextLocation:vt,historyAction:Pt}))return Yt}function Tt(ut){let vt=Ka(404,{pathname:ut}),Pt=h||l,{matches:Bt,route:Yt}=Qw(Pt);return{notFoundMatches:Bt,route:Yt,error:vt}}function si(ut,vt,Pt){if(C=ut,T=vt,b=Pt||null,!S&&w.navigation===x0){S=!0;let Bt=ar(w.location,w.matches);Bt!=null&&Q({restoreScrollPosition:Bt})}return()=>{C=null,T=null,b=null}}function ui(ut,vt){return b&&b(ut,vt.map(Bt=>GE(Bt,w.loaderData)))||ut.key}function Wt(ut,vt){if(C&&T){let Pt=ui(ut,vt);C[Pt]=T()}}function ar(ut,vt){if(C){let Pt=ui(ut,vt),Bt=C[Pt];if(typeof Bt=="number")return Bt}return null}function Xi(ut,vt,Pt){if(m)if(ut){if(Object.keys(ut[0].params).length>0)return{active:!0,matches:Ag(vt,Pt,r,!0)}}else return{active:!0,matches:Ag(vt,Pt,r,!0)||[]};return{active:!1,matches:null}}async function mr(ut,vt,Pt){if(!m)return{type:"success",matches:ut};let Bt=ut;for(;;){let Yt=h==null,vi=h||l,Oi=a;try{await m({path:vt,matches:Bt,patch:(ve,Re)=>{Pt.aborted||Ww(ve,Re,vi,Oi,s)}})}catch(ve){return{type:"error",error:ve,partialMatches:Bt}}finally{Yt&&!Pt.aborted&&(l=[...l])}if(Pt.aborted)return{type:"aborted"};let di=ac(vi,vt,r);if(di)return{type:"success",matches:di};let We=Ag(vi,vt,r,!0);if(!We||Bt.length===We.length&&Bt.every((ve,Re)=>ve.route.id===We[Re].route.id))return{type:"success",matches:null};Bt=We}}function Nr(ut){a={},h=Kg(ut,s,void 0,a)}function ir(ut,vt){let Pt=h==null;Ww(ut,vt,h||l,a,s),Pt&&(l=[...l],Q({}))}return D={get basename(){return r},get future(){return g},get state(){return w},get routes(){return l},get window(){return e},initialize:ge,subscribe:K,enableScrollRestoration:si,navigate:_e,fetch:Ee,revalidate:J,createHref:ut=>i.history.createHref(ut),encodeLocation:ut=>i.history.encodeLocation(ut),getFetcher:Pe,deleteFetcher:Xe,dispose:ke,getBlocker:wt,deleteBlocker:Rt,patchRoutes:ir,_internalFetchControllers:L,_internalSetRoutes:Nr},D}function I6(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function pv(i,e,t,s,a,l){let h,r;if(a){h=[];for(let m of e)if(h.push(m),m.route.id===a){r=m;break}}else h=e,r=e[e.length-1];let p=Hy(s||".",Gy(h),yo(i.pathname,t)||i.pathname,l==="path");if(s==null&&(p.search=i.search,p.hash=i.hash),(s==null||s===""||s===".")&&r){let m=Nb(p.search);if(r.route.index&&!m)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!r.route.index&&m){let g=new URLSearchParams(p.search),v=g.getAll("index");g.delete("index"),v.filter(C=>C).forEach(C=>g.append("index",C));let y=g.toString();p.search=y?`?${y}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:Oo([t,p.pathname])),vc(p)}function $w(i,e,t){if(!t||!I6(t))return{path:e};if(t.formMethod&&!V6(t.formMethod))return{path:e,error:Ka(405,{method:t.formMethod})};let s=()=>({path:e,error:Ka(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),h=QE(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ho(l))return s();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[C,b])=>`${y}${C}=${b}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:h,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!ho(l))return s();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:h,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return s()}}}kr(typeof FormData=="function","FormData is not available in this environment");let r,p;if(t.formData)r=mv(t.formData),p=t.formData;else if(t.body instanceof FormData)r=mv(t.body),p=t.body;else if(t.body instanceof URLSearchParams)r=t.body,p=Yw(r);else if(t.body==null)r=new URLSearchParams,p=new FormData;else try{r=new URLSearchParams(t.body),p=Yw(r)}catch{return s()}let m={formMethod:l,formAction:h,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(ho(m.formMethod))return{path:e,submission:m};let g=Ll(e);return i&&g.search&&Nb(g.search)&&r.append("index",""),g.search=`?${r}`,{path:vc(g),submission:m}}function Vw(i,e,t=!1){let s=i.findIndex(a=>a.route.id===e);return s>=0?i.slice(0,t?s+1:s):i}function Gw(i,e,t,s,a,l,h,r,p,m,g,v,y,C){let b=C?ja(C[1])?C[1].error:C[1].data:void 0,T=i.createURL(e.location),S=i.createURL(a),k=t;l&&e.errors?k=Vw(t,Object.keys(e.errors)[0],!0):C&&ja(C[1])&&(k=Vw(t,C[0]));let x=C?C[1].statusCode:void 0,A=x&&x>=400,D=k.filter((I,N)=>{let{route:q}=I;if(q.lazy)return!0;if(q.loader==null)return!1;if(l)return fv(q,e.loaderData,e.errors);if(D6(e.loaderData,e.matches[N],I))return!0;let Y=e.matches[N],X=I;return Hw(I,{currentUrl:T,currentParams:Y.params,nextUrl:S,nextParams:X.params,...s,actionResult:b,actionStatus:x,defaultShouldRevalidate:A?!1:h||T.pathname+T.search===S.pathname+S.search||T.search!==S.search||L6(Y,X)})}),w=[];return m.forEach((I,N)=>{if(l||!t.some(j=>j.route.id===I.routeId)||p.has(N))return;let q=ac(v,I.path,y);if(!q){w.push({key:N,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let Y=e.fetchers.get(N),X=zp(q,I.path),B=!1;g.has(N)?B=!1:r.has(N)?(r.delete(N),B=!0):Y&&Y.state!=="idle"&&Y.data===void 0?B=h:B=Hw(X,{currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:t[t.length-1].params,...s,actionResult:b,actionStatus:x,defaultShouldRevalidate:A?!1:h}),B&&w.push({key:N,routeId:I.routeId,path:I.path,matches:q,match:X,controller:new AbortController})}),[D,w]}function fv(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let s=e!=null&&e[i.id]!==void 0,a=t!=null&&t[i.id]!==void 0;return!s&&a?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!s&&!a}function D6(i,e,t){let s=!e||t.route.id!==e.route.id,a=!i.hasOwnProperty(t.route.id);return s||a}function L6(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function Hw(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Ww(i,e,t,s,a){let l;if(i){let p=s[i];kr(p,`No route found to patch children into: routeId = ${i}`),p.children||(p.children=[]),l=p.children}else l=t;let h=e.filter(p=>!l.some(m=>KE(p,m))),r=Kg(h,a,[i||"_","patch",String((l==null?void 0:l.length)||"0")],s);l.push(...r)}function KE(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,s)=>{var a;return(a=e.children)==null?void 0:a.some(l=>KE(t,l))}):!1}async function R6(i,e,t){if(!i.lazy)return;let s=await i.lazy();if(!i.lazy)return;let a=t[i.id];kr(a,"No route found in manifest");let l={};for(let h in s){let p=a[h]!==void 0&&h!=="hasErrorBoundary";rs(!p,`Route "${a.id}" has a static property "${h}" defined but its lazy function is also returning a value for this property. The lazy route property "${h}" will be ignored.`),!p&&!n6.has(h)&&(l[h]=s[h])}Object.assign(a,l),Object.assign(a,{...e(a),lazy:void 0})}async function z6({matches:i}){let e=i.filter(s=>s.shouldLoad);return(await Promise.all(e.map(s=>s.resolve()))).reduce((s,a,l)=>Object.assign(s,{[e[l].route.id]:a}),{})}async function N6(i,e,t,s,a,l,h,r,p,m){let g=l.map(C=>C.route.lazy?R6(C.route,p,r):void 0),v=l.map((C,b)=>{let T=g[b],S=a.some(x=>x.route.id===C.route.id);return{...C,shouldLoad:S,resolve:async x=>(x&&s.method==="GET"&&(C.route.lazy||C.route.loader)&&(S=!0),S?O6(e,s,C,T,x,m):Promise.resolve({type:"data",result:void 0}))}}),y=await i({matches:v,request:s,params:l[0].params,fetcherKey:h,context:m});try{await Promise.all(g)}catch{}return y}async function O6(i,e,t,s,a,l){let h,r,p=m=>{let g,v=new Promise((b,T)=>g=T);r=()=>g(),e.signal.addEventListener("abort",r);let y=b=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:l},...b!==void 0?[b]:[]),C=(async()=>{try{return{type:"data",result:await(a?a(T=>y(T)):y())}}catch(b){return{type:"error",result:b}}})();return Promise.race([C,v])};try{let m=t.route[i];if(s)if(m){let g,[v]=await Promise.all([p(m).catch(y=>{g=y}),s]);if(g!==void 0)throw g;h=v}else if(await s,m=t.route[i],m)h=await p(m);else if(i==="action"){let g=new URL(e.url),v=g.pathname+g.search;throw Ka(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)h=await p(m);else{let g=new URL(e.url),v=g.pathname+g.search;throw Ka(404,{pathname:v})}}catch(m){return{type:"error",result:m}}finally{r&&e.signal.removeEventListener("abort",r)}return h}async function j6(i){var s,a,l,h;let{result:e,type:t}=i;if(JE(e)){let r;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?r=null:r=await e.json():r=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Jg(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}if(t==="error"){if(Jw(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(s=e.init)==null?void 0:s.status};e=new Jg(((a=e.init)==null?void 0:a.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Uf(e)?e.status:void 0}}return Jw(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function B6(i,e,t,s,a){let l=i.headers.get("Location");if(kr(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!zb.test(l)){let h=s.slice(0,s.findIndex(r=>r.route.id===t)+1);l=pv(new URL(e.url),h,a,l),i.headers.set("Location",l)}return i}function qw(i,e,t){if(zb.test(i)){let s=i,a=s.startsWith("//")?new URL(e.protocol+s):new URL(s),l=yo(a.pathname,t)!=null;if(a.origin===e.origin&&l)return a.pathname+a.search+a.hash}return i}function Mu(i,e,t,s){let a=i.createURL(QE(e)).toString(),l={signal:t};if(s&&ho(s.formMethod)){let{formMethod:h,formEncType:r}=s;l.method=h.toUpperCase(),r==="application/json"?(l.headers=new Headers({"Content-Type":r}),l.body=JSON.stringify(s.json)):r==="text/plain"?l.body=s.text:r==="application/x-www-form-urlencoded"&&s.formData?l.body=mv(s.formData):l.body=s.formData}return new Request(a,l)}function mv(i){let e=new URLSearchParams;for(let[t,s]of i.entries())e.append(t,typeof s=="string"?s:s.name);return e}function Yw(i){let e=new FormData;for(let[t,s]of i.entries())e.append(t,s);return e}function F6(i,e,t,s=!1,a=!1){let l={},h=null,r,p=!1,m={},g=t&&ja(t[1])?t[1].error:void 0;return i.forEach(v=>{if(!(v.route.id in e))return;let y=v.route.id,C=e[y];if(kr(!dh(C),"Cannot handle redirect results in processLoaderData"),ja(C)){let b=C.error;if(g!==void 0&&(b=g,g=void 0),h=h||{},a)h[y]=b;else{let T=hh(i,y);h[T.route.id]==null&&(h[T.route.id]=b)}s||(l[y]=XE),p||(p=!0,r=Uf(C.error)?C.error.status:500),C.headers&&(m[y]=C.headers)}else l[y]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(r=C.statusCode),C.headers&&(m[y]=C.headers)}),g!==void 0&&t&&(h={[t[0]]:g},l[t[0]]=void 0),{loaderData:l,errors:h,statusCode:r||200,loaderHeaders:m}}function Zw(i,e,t,s,a,l){let{loaderData:h,errors:r}=F6(e,t,s);return a.forEach(p=>{let{key:m,match:g,controller:v}=p,y=l[m];if(kr(y,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(ja(y)){let C=hh(i.matches,g==null?void 0:g.route.id);r&&r[C.route.id]||(r={...r,[C.route.id]:y.error}),i.fetchers.delete(m)}else if(dh(y))kr(!1,"Unhandled fetcher revalidation redirect");else{let C=tc(y.data);i.fetchers.set(m,C)}}),{loaderData:h,errors:r}}function Xw(i,e,t,s){let a=Object.entries(e).filter(([,l])=>l!==XE).reduce((l,[h,r])=>(l[h]=r,l),{});for(let l of t){let h=l.route.id;if(!e.hasOwnProperty(h)&&i.hasOwnProperty(h)&&l.route.loader&&(a[h]=i[h]),s&&s.hasOwnProperty(h))break}return a}function Kw(i){return i?ja(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function hh(i,e){return(e?i.slice(0,i.findIndex(s=>s.route.id===e)+1):[...i]).reverse().find(s=>s.route.hasErrorBoundary===!0)||i[0]}function Qw(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ka(i,{pathname:e,routeId:t,method:s,type:a,message:l}={}){let h="Unknown Server Error",r="Unknown @remix-run/router error";return i===400?(h="Bad Request",s&&e&&t?r=`You made a ${s} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(r="Unable to encode submission body")):i===403?(h="Forbidden",r=`Route "${t}" does not match URL "${e}"`):i===404?(h="Not Found",r=`No route matches URL "${e}"`):i===405&&(h="Method Not Allowed",s&&e&&t?r=`You made a ${s.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:s&&(r=`Invalid request method "${s.toUpperCase()}"`)),new Jg(i||500,h,new Error(r),!0)}function og(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[s,a]=e[t];if(dh(a))return{key:s,result:a}}}function QE(i){let e=typeof i=="string"?Ll(i):i;return vc({...e,hash:""})}function U6(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function $6(i){return JE(i.result)&&S6.has(i.result.status)}function ja(i){return i.type==="error"}function dh(i){return(i&&i.type)==="redirect"}function Jw(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function JE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function V6(i){return E6.has(i.toUpperCase())}function ho(i){return T6.has(i.toUpperCase())}function Nb(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function zp(i,e){let t=typeof e=="string"?Ll(e).search:e.search;if(i[i.length-1].route.index&&Nb(t||""))return i[i.length-1];let s=qE(i);return s[s.length-1]}function e2(i){let{formMethod:e,formAction:t,formEncType:s,text:a,formData:l,json:h}=i;if(!(!e||!t||!s)){if(a!=null)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:s,formData:l,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:h,text:void 0}}}function v0(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function G6(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Tp(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function H6(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function tc(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function W6(i,e){try{let t=i.sessionStorage.getItem(ZE);if(t){let s=JSON.parse(t);for(let[a,l]of Object.entries(s||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function q6(i,e){if(e.size>0){let t={};for(let[s,a]of e)t[s]=[...a];try{i.sessionStorage.setItem(ZE,JSON.stringify(t))}catch(s){rs(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function Y6(){let i,e,t=new Promise((s,a)=>{i=async l=>{s(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var jh=Be.createContext(null);jh.displayName="DataRouter";var $f=Be.createContext(null);$f.displayName="DataRouterState";var Ob=Be.createContext({isTransitioning:!1});Ob.displayName="ViewTransition";var eS=Be.createContext(new Map);eS.displayName="Fetchers";var Z6=Be.createContext(null);Z6.displayName="Await";var bo=Be.createContext(null);bo.displayName="Navigation";var Wy=Be.createContext(null);Wy.displayName="Location";var _o=Be.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var jb=Be.createContext(null);jb.displayName="RouteError";function X6(i,{relative:e}={}){kr(gd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=Be.useContext(bo),{hash:a,pathname:l,search:h}=Gf(i,{relative:e}),r=l;return t!=="/"&&(r=l==="/"?t:Oo([t,l])),s.createHref({pathname:r,search:h,hash:a})}function gd(){return Be.useContext(Wy)!=null}function Qo(){return kr(gd(),"useLocation() may be used only in the context of a <Router> component."),Be.useContext(Wy).location}var tS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iS(i){Be.useContext(bo).static||Be.useLayoutEffect(i)}function Vf(){let{isDataRoute:i}=Be.useContext(_o);return i?hN():K6()}function K6(){kr(gd(),"useNavigate() may be used only in the context of a <Router> component.");let i=Be.useContext(jh),{basename:e,navigator:t}=Be.useContext(bo),{matches:s}=Be.useContext(_o),{pathname:a}=Qo(),l=JSON.stringify(Gy(s)),h=Be.useRef(!1);return iS(()=>{h.current=!0}),Be.useCallback((p,m={})=>{if(rs(h.current,tS),!h.current)return;if(typeof p=="number"){t.go(p);return}let g=Hy(p,JSON.parse(l),a,m.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Oo([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,a,i])}var Q6=Be.createContext(null);function J6(i){let e=Be.useContext(_o).outlet;return e&&Be.createElement(Q6.Provider,{value:i},e)}function Gf(i,{relative:e}={}){let{matches:t}=Be.useContext(_o),{pathname:s}=Qo(),a=JSON.stringify(Gy(t));return Be.useMemo(()=>Hy(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function eN(i,e,t,s){kr(gd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Be.useContext(bo),{matches:l}=Be.useContext(_o),h=l[l.length-1],r=h?h.params:{},p=h?h.pathname:"/",m=h?h.pathnameBase:"/",g=h&&h.route;{let k=g&&g.path||"";sS(p,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=Qo(),y;y=v;let C=y.pathname||"/",b=C;if(m!=="/"){let k=m.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=ac(i,{pathname:b});return rs(g||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),rs(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),sN(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},r,k.params),pathname:Oo([m,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:Oo([m,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),l,t,s)}function tN(){let i=nS(),e=Uf(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=Be.createElement(Be.Fragment,null,Be.createElement("p",null," Hey developer "),Be.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Be.createElement("code",{style:l},"ErrorBoundary")," or"," ",Be.createElement("code",{style:l},"errorElement")," prop on your route.")),Be.createElement(Be.Fragment,null,Be.createElement("h2",null,"Unexpected Application Error!"),Be.createElement("h3",{style:{fontStyle:"italic"}},e),t?Be.createElement("pre",{style:a},t):null,h)}var iN=Be.createElement(tN,null),rN=class extends Be.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Be.createElement(_o.Provider,{value:this.props.routeContext},Be.createElement(jb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nN({routeContext:i,match:e,children:t}){let s=Be.useContext(jh);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),Be.createElement(_o.Provider,{value:i},t)}function sN(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);kr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,r=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(r=p),m.route.id){let{loaderData:g,errors:v}=t,y=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||y){h=!0,r>=0?a=a.slice(0,r+1):a=[a[0]];break}}}return a.reduceRight((p,m,g)=>{let v,y=!1,C=null,b=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||iN,h&&(r<0&&g===0?(sS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):r===g&&(y=!0,b=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,g+1)),S=()=>{let k;return v?k=C:y?k=b:m.route.Component?k=Be.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=p,Be.createElement(nN,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:k})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?Be.createElement(rN,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}function Bb(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aN(i){let e=Be.useContext(jh);return kr(e,Bb(i)),e}function rS(i){let e=Be.useContext($f);return kr(e,Bb(i)),e}function oN(i){let e=Be.useContext(_o);return kr(e,Bb(i)),e}function Fb(i){let e=oN(i),t=e.matches[e.matches.length-1];return kr(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function lN(){return Fb("useRouteId")}function cN(){let{matches:i,loaderData:e}=rS("useMatches");return Be.useMemo(()=>i.map(t=>GE(t,e)),[i,e])}function nS(){var s;let i=Be.useContext(jb),e=rS("useRouteError"),t=Fb("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function hN(){let{router:i}=aN("useNavigate"),e=Fb("useNavigate"),t=Be.useRef(!1);return iS(()=>{t.current=!0}),Be.useCallback(async(a,l={})=>{rs(t.current,tS),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var t2={};function sS(i,e,t){!e&&!t2[i]&&(t2[i]=!0,rs(!1,t))}var i2={};function r2(i,e){!i&&!i2[e]&&(i2[e]=!0,console.warn(e))}function uN(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&rs(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Be.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&rs(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Be.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&rs(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Be.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var dN=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function pN({router:i,flushSync:e}){let[t,s]=Be.useState(i.state),[a,l]=Be.useState(),[h,r]=Be.useState({isTransitioning:!1}),[p,m]=Be.useState(),[g,v]=Be.useState(),[y,C]=Be.useState(),b=Be.useRef(new Map),T=Be.useCallback((A,{deletedFetchers:D,flushSync:w,viewTransitionOpts:I})=>{A.fetchers.forEach((q,Y)=>{q.data!==void 0&&b.current.set(Y,q.data)}),D.forEach(q=>b.current.delete(q)),r2(w===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(r2(I==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!N){e&&w?e(()=>s(A)):Be.startTransition(()=>s(A));return}if(e&&w){e(()=>{g&&(p&&p.resolve(),g.skipTransition()),r({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let q=i.window.document.startViewTransition(()=>{e(()=>s(A))});q.finished.finally(()=>{e(()=>{m(void 0),v(void 0),l(void 0),r({isTransitioning:!1})})}),e(()=>v(q));return}g?(p&&p.resolve(),g.skipTransition(),C({state:A,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(l(A),r({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[i.window,e,g,p]);Be.useLayoutEffect(()=>i.subscribe(T),[i,T]),Be.useEffect(()=>{h.isTransitioning&&!h.flushSync&&m(new dN)},[h]),Be.useEffect(()=>{if(p&&a&&i.window){let A=a,D=p.promise,w=i.window.document.startViewTransition(async()=>{Be.startTransition(()=>s(A)),await D});w.finished.finally(()=>{m(void 0),v(void 0),l(void 0),r({isTransitioning:!1})}),v(w)}},[a,p,i.window]),Be.useEffect(()=>{p&&a&&t.location.key===a.location.key&&p.resolve()},[p,g,t.location,a]),Be.useEffect(()=>{!h.isTransitioning&&y&&(l(y.state),r({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),C(void 0))},[h.isTransitioning,y]);let S=Be.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:A=>i.navigate(A),push:(A,D,w)=>i.navigate(A,{state:D,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(A,D,w)=>i.navigate(A,{replace:!0,state:D,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[i]),k=i.basename||"/",x=Be.useMemo(()=>({router:i,navigator:S,static:!1,basename:k}),[i,S,k]);return Be.createElement(Be.Fragment,null,Be.createElement(jh.Provider,{value:x},Be.createElement($f.Provider,{value:t},Be.createElement(eS.Provider,{value:b.current},Be.createElement(Ob.Provider,{value:h},Be.createElement(yN,{basename:k,location:t.location,navigationType:t.historyAction,navigator:S},Be.createElement(fN,{routes:i.routes,future:i.future,state:t})))))),null)}var fN=Be.memo(mN);function mN({routes:i,future:e,state:t}){return eN(i,void 0,t,e)}function gN({to:i,replace:e,state:t,relative:s}){kr(gd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=Be.useContext(bo);rs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=Be.useContext(_o),{pathname:h}=Qo(),r=Vf(),p=Hy(i,Gy(l),h,s==="path"),m=JSON.stringify(p);return Be.useEffect(()=>{r(JSON.parse(m),{replace:e,state:t,relative:s})},[r,m,s,e,t]),null}function aS(i){return J6(i.context)}function yN({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){kr(!gd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),r=Be.useMemo(()=>({basename:h,navigator:a,static:l,future:{}}),[h,a,l]);typeof t=="string"&&(t=Ll(t));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=t,C=Be.useMemo(()=>{let b=yo(p,h);return b==null?null:{location:{pathname:b,search:m,hash:g,state:v,key:y},navigationType:s}},[h,p,m,g,v,y,s]);return rs(C!=null,`<Router basename="${h}"> is not able to match the URL "${p}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:Be.createElement(bo.Provider,{value:r},Be.createElement(Wy.Provider,{children:e,value:C}))}var Mg="get",Pg="application/x-www-form-urlencoded";function qy(i){return i!=null&&typeof i.tagName=="string"}function xN(i){return qy(i)&&i.tagName.toLowerCase()==="button"}function vN(i){return qy(i)&&i.tagName.toLowerCase()==="form"}function bN(i){return qy(i)&&i.tagName.toLowerCase()==="input"}function _N(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function wN(i,e){return i.button===0&&(!e||e==="_self")&&!_N(i)}function gv(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let s=i[t];return e.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function TN(i,e){let t=gv(i);return e&&e.forEach((s,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var lg=null;function CN(){if(lg===null)try{new FormData(document.createElement("form"),0),lg=!1}catch{lg=!0}return lg}var EN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b0(i){return i!=null&&!EN.has(i)?(rs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pg}"`),null):i}function SN(i,e){let t,s,a,l,h;if(vN(i)){let r=i.getAttribute("action");s=r?yo(r,e):null,t=i.getAttribute("method")||Mg,a=b0(i.getAttribute("enctype"))||Pg,l=new FormData(i)}else if(xN(i)||bN(i)&&(i.type==="submit"||i.type==="image")){let r=i.form;if(r==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||r.getAttribute("action");if(s=p?yo(p,e):null,t=i.getAttribute("formmethod")||r.getAttribute("method")||Mg,a=b0(i.getAttribute("formenctype"))||b0(r.getAttribute("enctype"))||Pg,l=new FormData(r,i),!CN()){let{name:m,type:g,value:v}=i;if(g==="image"){let y=m?`${m}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else m&&l.append(m,v)}}else{if(qy(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Mg,s=null,a=Pg,h=i}return l&&a==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:h}}function Ub(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function kN(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AN(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function MN(i,e,t){let s=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let h=await kN(l,t);return h.links?h.links():[]}return[]}));return LN(s.flat(1).filter(AN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function n2(i,e,t,s,a,l){let h=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,r=(p,m)=>{var g;return t[m].pathname!==p.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,m)=>h(p,m)||r(p,m)):l==="data"?e.filter((p,m)=>{var v;let g=s.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(h(p,m)||r(p,m))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function PN(i,e){return IN(i.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let a=[s.module];return s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function IN(i){return[...new Set(i)]}function DN(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function LN(i,e){let t=new Set;return new Set(e),i.reduce((s,a)=>{let l=JSON.stringify(DN(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}function RN(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function zN(){let i=Be.useContext(jh);return Ub(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function NN(){let i=Be.useContext($f);return Ub(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var $b=Be.createContext(void 0);$b.displayName="FrameworkContext";function oS(){let i=Be.useContext($b);return Ub(i,"You must render this element inside a <HydratedRouter> element"),i}function ON(i,e){let t=Be.useContext($b),[s,a]=Be.useState(!1),[l,h]=Be.useState(!1),{onFocus:r,onBlur:p,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,y=Be.useRef(null);Be.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let T=k=>{k.forEach(x=>{h(x.isIntersecting)})},S=new IntersectionObserver(T,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[i]),Be.useEffect(()=>{if(s){let T=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(T)}}},[s]);let C=()=>{a(!0)},b=()=>{a(!1),h(!1)};return t?i!=="intent"?[l,y,{}]:[l,y,{onFocus:Cp(r,C),onBlur:Cp(p,b),onMouseEnter:Cp(m,C),onMouseLeave:Cp(g,b),onTouchStart:Cp(v,C)}]:[!1,y,{}]}function Cp(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function jN({page:i,...e}){let{router:t}=zN(),s=Be.useMemo(()=>ac(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?Be.createElement(FN,{page:i,matches:s,...e}):null}function BN(i){let{manifest:e,routeModules:t}=oS(),[s,a]=Be.useState([]);return Be.useEffect(()=>{let l=!1;return MN(i,e,t).then(h=>{l||a(h)}),()=>{l=!0}},[i,e,t]),s}function FN({page:i,matches:e,...t}){let s=Qo(),{manifest:a,routeModules:l}=oS(),{loaderData:h,matches:r}=NN(),p=Be.useMemo(()=>n2(i,e,r,a,s,"data"),[i,e,r,a,s]),m=Be.useMemo(()=>n2(i,e,r,a,s,"assets"),[i,e,r,a,s]),g=Be.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let C=new Set,b=!1;if(e.forEach(S=>{var x;let k=a.routes[S.route.id];!k||!k.hasLoader||(!p.some(A=>A.route.id===S.route.id)&&S.route.id in h&&((x=l[S.route.id])!=null&&x.shouldRevalidate)||k.hasClientLoader?b=!0:C.add(S.route.id))}),C.size===0)return[];let T=RN(i);return b&&C.size>0&&T.searchParams.set("_routes",e.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[h,s,a,p,e,i,l]),v=Be.useMemo(()=>PN(m,a),[m,a]),y=BN(m);return Be.createElement(Be.Fragment,null,g.map(C=>Be.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>Be.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),y.map(({key:C,link:b})=>Be.createElement("link",{key:C,...b})))}function UN(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lS&&(window.__reactRouterVersion="7.1.3")}catch{}function $N(i,e){return P6({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:t6({window:e==null?void 0:e.window}),hydrationData:VN(),routes:i,mapRouteProperties:uN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function VN(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:GN(i.errors)}),i}function GN(i){if(!i)return null;let e=Object.entries(i),t={};for(let[s,a]of e)if(a&&a.__type==="RouteErrorResponse")t[s]=new Jg(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let h=new l(a.message);h.stack="",t[s]=h}catch{}}if(t[s]==null){let l=new Error(a.message);l.stack="",t[s]=l}}else t[s]=a;return t}var cS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hS=Be.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:h,state:r,target:p,to:m,preventScrollReset:g,viewTransition:v,...y},C){let{basename:b}=Be.useContext(bo),T=typeof m=="string"&&cS.test(m),S,k=!1;if(typeof m=="string"&&T&&(S=m,lS))try{let Y=new URL(window.location.href),X=m.startsWith("//")?new URL(Y.protocol+m):new URL(m),B=yo(X.pathname,b);X.origin===Y.origin&&B!=null?m=B+X.search+X.hash:k=!0}catch{rs(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=X6(m,{relative:a}),[A,D,w]=ON(s,y),I=qN(m,{replace:h,state:r,target:p,preventScrollReset:g,relative:a,viewTransition:v});function N(Y){e&&e(Y),Y.defaultPrevented||I(Y)}let q=Be.createElement("a",{...y,...w,href:S||x,onClick:k||l?e:N,ref:UN(C,D),target:p,"data-discover":!T&&t==="render"?"true":void 0});return A&&!T?Be.createElement(Be.Fragment,null,q,Be.createElement(jN,{page:x})):q});hS.displayName="Link";var uS=Be.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:h,viewTransition:r,children:p,...m},g){let v=Gf(h,{relative:m.relative}),y=Qo(),C=Be.useContext($f),{navigator:b,basename:T}=Be.useContext(bo),S=C!=null&&QN(v)&&r===!0,k=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,x=y.pathname,A=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(x=x.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&T&&(A=yo(A,T)||A);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let w=x===k||!a&&x.startsWith(k)&&x.charAt(D)==="/",I=A!=null&&(A===k||!a&&A.startsWith(k)&&A.charAt(k.length)==="/"),N={isActive:w,isPending:I,isTransitioning:S},q=w?e:void 0,Y;typeof s=="function"?Y=s(N):Y=[s,w?"active":null,I?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let X=typeof l=="function"?l(N):l;return Be.createElement(hS,{...m,"aria-current":q,className:Y,ref:g,style:X,to:h,viewTransition:r},typeof p=="function"?p(N):p)});uS.displayName="NavLink";var HN=Be.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:h=Mg,action:r,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:v,...y},C)=>{let b=XN(),T=KN(r,{relative:m}),S=h.toLowerCase()==="get"?"get":"post",k=typeof r=="string"&&cS.test(r),x=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,w=(D==null?void 0:D.getAttribute("formmethod"))||h;b(D||A.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:a,state:l,relative:m,preventScrollReset:g,viewTransition:v})};return Be.createElement("form",{ref:C,method:S,action:T,onSubmit:s?p:x,...y,"data-discover":!k&&i==="render"?"true":void 0})});HN.displayName="Form";function WN(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dS(i){let e=Be.useContext(jh);return kr(e,WN(i)),e}function qN(i,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:h}={}){let r=Vf(),p=Qo(),m=Gf(i,{relative:l});return Be.useCallback(g=>{if(wN(g,e)){g.preventDefault();let v=t!==void 0?t:vc(p)===vc(m);r(i,{replace:v,state:s,preventScrollReset:a,relative:l,viewTransition:h})}},[p,r,m,t,s,e,i,a,l,h])}function Vb(i){rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Be.useRef(gv(i)),t=Be.useRef(!1),s=Qo(),a=Be.useMemo(()=>TN(s.search,t.current?null:e.current),[s.search]),l=Vf(),h=Be.useCallback((r,p)=>{const m=gv(typeof r=="function"?r(a):r);t.current=!0,l("?"+m,p)},[l,a]);return[a,h]}var YN=0,ZN=()=>`__${String(++YN)}__`;function XN(){let{router:i}=dS("useSubmit"),{basename:e}=Be.useContext(bo),t=lN();return Be.useCallback(async(s,a={})=>{let{action:l,method:h,encType:r,formData:p,body:m}=SN(s,e);if(a.navigate===!1){let g=a.fetcherKey||ZN();await i.fetch(g,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||r,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||r,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function KN(i,{relative:e}={}){let{basename:t}=Be.useContext(bo),s=Be.useContext(_o);kr(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Gf(i||".",{relative:e})},h=Qo();if(i==null){l.search=h.search;let r=new URLSearchParams(l.search),p=r.getAll("index");if(p.some(g=>g==="")){r.delete("index"),p.filter(v=>v).forEach(v=>r.append("index",v));let g=r.toString();l.search=g?`?${g}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Oo([t,l.pathname])),vc(l)}function QN(i,e={}){let t=Be.useContext(Ob);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dS("useViewTransitionState"),a=Gf(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=yo(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=yo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Qg(a.pathname,h)!=null||Qg(a.pathname,l)!=null}new TextEncoder;/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JN(i){return Be.createElement(pN,{flushSync:yM.flushSync,...i})}const s2=()=>{const i=nS();return console.error(i),Uf(i)?se.jsxs("div",{id:"error-page",children:[se.jsx("h1",{children:Je.t("Oops!")}),se.jsx("p",{children:Je.t("Sorry, an unexpected error has occurred.")}),se.jsx("p",{children:se.jsx("i",{children:i.statusText})})]}):se.jsxs("div",{id:"error-page",children:[se.jsx("h1",{children:Je.t("Oops!")}),se.jsx("p",{children:Je.t("Sorry, an unexpected error has occurred.")})]})},pS="1400px",eO={maxWidth:pS,marginLeft:"auto",marginRight:"auto",padding:"20px 16px",width:"100%"},a2=({children:i,maxWidth:e})=>{const t=cN().some(s=>{var a;return!!((a=s.handle)!=null&&a.fullWidth)});return se.jsx("div",{style:{...eO,maxWidth:t?"none":e||pS,width:"100%"},children:i})},tO="_drawerWrapper_1jnc9_1",iO={drawerWrapper:tO};function yv(){return yv=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},yv.apply(this,arguments)}var rO=function(e,t){var s={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return s[e]},Gb=function(e){var t=e.open,s=e.onClose,a=s===void 0?function(){}:s,l=e.children,h=e.style,r=e.enableOverlay,p=r===void 0?!0:r,m=e.overlayColor,g=m===void 0?"#000":m,v=e.overlayOpacity,y=v===void 0?.4:v,C=e.zIndex,b=C===void 0?100:C,T=e.duration,S=T===void 0?500:T,k=e.direction,x=e.size,A=x===void 0?250:x,D=e.className,w=e.customIdSuffix,I=e.lockBackgroundScroll,N=I===void 0?!1:I,q=e.overlayClassName,Y=q===void 0?"":q,X=Be.useRef(null);Be.useEffect(function(){var R=function(){X.current=window.document.querySelector("body"),X.current&&N&&(X.current.style.overflow=t?"hidden":"")};R()},[t]);var B=Be.useMemo(function(){return w||(Math.random()+1).toString(36).substring(7)},[w]),j={backgroundColor:g.toString(),opacity:y,zIndex:b},O=yv({zIndex:b+1,transitionDuration:S+"ms"},rO(k,A),h);return Te.createElement("div",{id:"EZDrawer"+B,className:"EZDrawer"},Te.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+B,className:"EZDrawer__checkbox",onChange:a,checked:t}),Te.createElement("nav",{role:"navigation",id:"EZDrawer__container"+B,style:O,className:"EZDrawer__container "+D},l),p&&Te.createElement("label",{htmlFor:"EZDrawer__checkbox"+B,id:"EZDrawer__overlay"+B,className:"EZDrawer__overlay "+Y,style:j}))};const nO="_formWrapper_6d4wk_1",sO={formWrapper:nO},aO=({value:i,onChange:e})=>se.jsx("div",{children:se.jsxs(ds,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[se.jsx(io,{value:"week",label:"Weekly"}),se.jsx(io,{value:"month",label:"Monthly"})]})}),oO="_datePicker_1yiz7_1",lO="_label_1yiz7_5",cO="_content_1yiz7_14",hO="_box_1yiz7_18",uO="_inputDiv_1yiz7_23",dO="_input_1yiz7_23",Pu={datePicker:oO,label:lO,content:cO,box:hO,inputDiv:uO,input:dO},o2=({label:i,name:e,onChange:t,periodeType:s})=>{const a=Be.useRef(null);return se.jsxs("div",{className:Pu.datePicker,style:{opacity:s===""?.6:1},children:[se.jsx("label",{className:Pu.label,children:i}),se.jsx("div",{className:Pu.content,children:se.jsx("div",{className:Pu.box,children:se.jsx("div",{className:Pu.inputDiv,children:se.jsx("input",{disabled:s==="",className:Pu.input,ref:a,type:s,name:e,onChange:l=>t(l.target.value)})})})})]})},pO="_timePeriodeSelector_fpkps_1",fO="_timePeriodeSelectorInputFields_fpkps_7",mO="_timePeriodeSelectorInputFieldsChild_fpkps_13",cg={timePeriodeSelector:pO,timePeriodeSelectorInputFields:fO,timePeriodeSelectorInputFieldsChild:mO},gO=(i,e,t)=>t==="week"?yO(i,e):t==="month"?bO(i,e):[],yO=(i,e)=>{let[t,s]=i.split("-W").map(Number),[a,l]=e.split("-W").map(Number);if(a-t>100)return[];let h=[];for(let r=t;r<=a;r++){let p=vO(r),m=r===t?s:1,g=r===a?l:p;for(let v=m;v<=g;v++){let y=`${r}W${String(v).padStart(2,"0")}`;h.push({endDate:void 0,startDate:void 0,id:y})}}return h},xO=i=>{i=new Date(+i),i.setHours(0,0,0,0),i.setDate(i.getDate()+4-(i.getDay()||7));var e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+1)/7);return[i.getFullYear(),t]},vO=i=>{var e=new Date(i,11,31),t=xO(e)[1];return t==1?52:t},bO=(i,e)=>{const[t,s]=i.split("-").map(Number),[a,l]=e.split("-").map(Number);if(a-t>100)return[];let h=[],r=t,p=s;for(;r<a||r===a&&p<=l;){let m=String(p).padStart(2,"0");h.push({id:`${r}${m}`,endDate:void 0,startDate:void 0}),p++,p>12&&(p=1,r++)}return h},fS=({setTimePeriods:i})=>{const[e,t]=Be.useState(""),[s,a]=Be.useState(""),[l,h]=Be.useState(""),r=p=>{a(""),h(""),t(p)};return Be.useEffect(()=>{i(gO(s,l,e))},[s,l]),se.jsxs("div",{children:[se.jsx("h3",{children:"Period"}),se.jsxs("div",{className:cg.timePeriodeSelector,children:[se.jsx(aO,{value:e,onChange:r}),se.jsxs("div",{className:cg.timePeriodeSelectorInputFields,children:[se.jsx("div",{className:cg.timePeriodeSelectorInputFieldsChild,children:se.jsx(o2,{periodeType:e,label:"Dateset start:",name:"",onChange:a})}),se.jsx("div",{className:cg.timePeriodeSelectorInputFieldsChild,children:se.jsx(o2,{periodeType:e,label:"Dateset end:",name:"",onChange:h})})]})]})]})},_O="_error_1rljs_1",wO={error:_O},TO={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},CO=()=>{var s;const{loading:i,error:e,data:t}=ka(TO);return{roots:(s=t==null?void 0:t.roots)==null?void 0:s.organisationUnits,error:e,loading:i}},EO=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:s}=CO();return Be.useEffect(()=>{if(t&&!i){const[a]=t;e({...a,selected:[a.path]})}},[t]),t?se.jsxs("div",{children:[se.jsx("h3",{children:Je.t("Organisation units")}),se.jsx(_E,{roots:t.map(a=>a.id),selected:i==null?void 0:i.map(a=>a.path),onChange:e,initiallyExpanded:t.map(a=>a.path)})]}):s?se.jsx("div",{children:s.message}):null},SO={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},kO=()=>{var s;const{loading:i,error:e,data:t}=ka(SO);return{levels:(s=t==null?void 0:t.levels)==null?void 0:s.organisationUnitLevels,error:e,loading:i}},AO="_selectField_2clxr_1",MO={selectField:AO},PO=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:s,error:a}=kO(),l=h=>{const r={id:h.selected,level:t.find(p=>p.id===h.selected).level};e(r)};return Be.useEffect(()=>{var h;(t==null?void 0:t.length)>2&&!i&&e({id:(h=t[1])==null?void 0:h.id,level:t[1].level})},[t,i,e]),t?se.jsx("div",{className:MO.selectField,children:se.jsx(ds,{label:Je.t("Organisation unit level"),helpText:Je.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:s,error:!!a,onChange:l,children:t.map((h,r)=>se.jsx(io,{value:h.id,label:h.name},h.id))})}):null},mS=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:s})=>{const a=h=>{h.checked?i([...e,h]):i(e.filter(r=>r.path!==h.path))};function l(){if(e.length===0)return!0;const h=e[0].path.split("/").length;return e.every(r=>r.path.split("/").length===h)}return se.jsxs(se.Fragment,{children:[se.jsx(EO,{selectedOrgUnits:e,onChange:h=>{a(h)}}),!l()&&se.jsx("p",{className:wO.error,children:"Only select organization units that are one the same level."}),se.jsx(PO,{orgUnitLevels:t,onChange:s})]})},IO=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),DO=(i,e,t)=>{var r,p,m;const s=i.map(g=>g.dataSource);if(s.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:a,error:l,data:h}=ka(IO({dataElements:s,periodes:e,orgUnit:t}));return!a&&h&&!l?{data:(r=h==null?void 0:h.request)==null?void 0:r.rows,metaData:(m=(p=h==null?void 0:h.request)==null?void 0:p.metaData)==null?void 0:m.items,error:l,loading:a}:{data:h,metaData:{},error:l,loading:a}},LO={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},RO=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:s,properties:a})=>({type:e,id:t,properties:a,geometry:s})),...i}),zO=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(s=>s.id===t.id||t.properties.parentGraph.includes(s.id)))}),NO=(i,e)=>{const{data:t,loading:s,error:a}=ka(LO,{variables:{level:i}});return{data:t&&zO(RO(t),e),error:a,loading:s}},OO="_text_b9rbg_1",jO={text:OO},BO=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:s,setAnalyticsMetaData:a,setStartDownload:l,orgUnitLevel:h,selectedOrgUnits:r,analyticsDataLayers:p,setErrorMessages:m})=>{if(h==null)return se.jsx(se.Fragment,{});const g="LEVEL-"+h.id+";"+r.map(w=>w.id).join(";"),v=w=>w.map(I=>I.id),{data:y,error:C,loading:b,metaData:T}=DO(p,v(i),g),{data:S,error:k,loading:x}=NO(h.level,r),A=w=>w.map(I=>({featureName:p.filter(N=>N.dataSource===I)[0].feature,dataItemId:I})),D=w=>{const I=[...new Set(w.map(q=>q[0]))],N=A(I);return s(N),w.map(q=>({featureName:N.filter(Y=>Y.dataItemId===q[0])[0].featureName,orgUnit:q[1],period:q[2],value:parseFloat(q[3])}))};return Be.useEffect(()=>{if(!(b||x)&&(y&&S&&(m([]),e(S),t(D(y)),a(T)),C||k)){const w=[];C&&w.push({description:JSON.stringify(C),title:"Analytics request failed"}),k&&w.push({description:JSON.stringify(k),title:"OrgUnits request failed"}),m(w),l(I=>({...I,startDownload:!1}))}},[b,x]),se.jsx("p",{className:jO.text,children:"Downloading data.."})};var gS={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:un,function(e){var t={};function s(a,l,h,r){!a.hasOwnProperty(l)&&(a[l]=r.apply(null,h),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:a[l]}})))}return s(t,"Core/Globals.js",[],function(){var a,l;return(l=a||(a={})).SVG_NS="http://www.w3.org/2000/svg",l.product="Highcharts",l.version="11.4.8",l.win=e!==void 0?e:{},l.doc=l.win.document,l.svg=l.doc&&l.doc.createElementNS&&!!l.doc.createElementNS(l.SVG_NS,"svg").createSVGRect,l.userAgent=l.win.navigator&&l.win.navigator.userAgent||"",l.isChrome=l.win.chrome,l.isFirefox=l.userAgent.indexOf("Firefox")!==-1,l.isMS=/(edge|msie|trident)/i.test(l.userAgent)&&!l.win.opera,l.isSafari=!l.isChrome&&l.userAgent.indexOf("Safari")!==-1,l.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(l.userAgent),l.isWebKit=l.userAgent.indexOf("AppleWebKit")!==-1,l.deg2rad=2*Math.PI/360,l.hasBidiBug=l.isFirefox&&4>parseInt(l.userAgent.split("Firefox/")[1],10),l.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],l.noop=function(){},l.supportsPassiveEvents=function(){let h=!1;if(!l.isMS){let r=Object.defineProperty({},"passive",{get:function(){h=!0}});l.win.addEventListener&&l.win.removeEventListener&&(l.win.addEventListener("testPassive",l.noop,r),l.win.removeEventListener("testPassive",l.noop,r))}return h}(),l.charts=[],l.composed=[],l.dateFormats={},l.seriesTypes={},l.symbolSizes={},l.chartCount=0,a}),s(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(a){let l,{charts:h,doc:r,win:p}=a;function m(R,L,G,$){let F=L?"Highcharts error":"Highcharts warning";R===32&&(R=`${F}: Deprecated member`);let H=S(R),W=H?`${F} #${R}: www.highcharts.com/errors/${R}/`:R.toString();if($!==void 0){let re="";H&&(W+="?"),X($,function(he,ie){re+=`
 - ${ie}: ${he}`,H&&(W+=encodeURI(ie)+"="+encodeURI(he))}),W+=re}j(a,"displayError",{chart:G,code:R,message:W,params:$},function(){if(L)throw Error(W);p.console&&m.messages.indexOf(W)===-1&&console.warn(W)}),m.messages.push(W)}function g(R,L){return parseInt(R,L||10)}function v(R){return typeof R=="string"}function y(R){let L=Object.prototype.toString.call(R);return L==="[object Array]"||L==="[object Array Iterator]"}function C(R,L){return!!R&&typeof R=="object"&&(!L||!y(R))}function b(R){return C(R)&&typeof R.nodeType=="number"}function T(R){let L=R&&R.constructor;return!!(C(R,!0)&&!b(R)&&L&&L.name&&L.name!=="Object")}function S(R){return typeof R=="number"&&!isNaN(R)&&R<1/0&&R>-1/0}function k(R){return R!=null}function x(R,L,G){let $,F=v(L)&&!k(G),H=(W,re)=>{k(W)?R.setAttribute(re,W):F?($=R.getAttribute(re))||re!=="class"||($=R.getAttribute(re+"Name")):R.removeAttribute(re)};return v(L)?H(G,L):X(L,H),$}function A(R){return y(R)?R:[R]}function D(R,L){let G;for(G in R||(R={}),L)R[G]=L[G];return R}function w(){let R=arguments,L=R.length;for(let G=0;G<L;G++){let $=R[G];if($!=null)return $}}function I(R,L){D(R.style,L)}function N(R){return Math.pow(10,Math.floor(Math.log(R)/Math.LN10))}function q(R,L){return R>1e14?R:parseFloat(R.toPrecision(L||14))}m.messages=[],Math.easeInOutSine=function(R){return-.5*(Math.cos(Math.PI*R)-1)};let Y=Array.prototype.find?function(R,L){return R.find(L)}:function(R,L){let G,$=R.length;for(G=0;G<$;G++)if(L(R[G],G))return R[G]};function X(R,L,G){for(let $ in R)Object.hasOwnProperty.call(R,$)&&L.call(G||R[$],R[$],$,R)}function B(R,L,G){function $(W,re){let he=R.removeEventListener;he&&he.call(R,W,re,!1)}function F(W){let re,he;R.nodeName&&(L?(re={})[L]=!0:re=W,X(re,function(ie,ae){if(W[ae])for(he=W[ae].length;he--;)$(ae,W[ae][he].fn)}))}let H=typeof R=="function"&&R.prototype||R;if(Object.hasOwnProperty.call(H,"hcEvents")){let W=H.hcEvents;if(L){let re=W[L]||[];G?(W[L]=re.filter(function(he){return G!==he.fn}),$(L,G)):(F(W),W[L]=[])}else F(W),delete H.hcEvents}}function j(R,L,G,$){if(G=G||{},r.createEvent&&(R.dispatchEvent||R.fireEvent&&R!==a)){let F=r.createEvent("Events");F.initEvent(L,!0,!0),G=D(F,G),R.dispatchEvent?R.dispatchEvent(G):R.fireEvent(L,G)}else if(R.hcEvents){G.target||D(G,{preventDefault:function(){G.defaultPrevented=!0},target:R,type:L});let F=[],H=R,W=!1;for(;H.hcEvents;)Object.hasOwnProperty.call(H,"hcEvents")&&H.hcEvents[L]&&(F.length&&(W=!0),F.unshift.apply(F,H.hcEvents[L])),H=Object.getPrototypeOf(H);W&&F.sort((re,he)=>re.order-he.order),F.forEach(re=>{re.fn.call(R,G)===!1&&G.preventDefault()})}$&&!G.defaultPrevented&&$.call(R,G)}X({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(R,L){a[L]=function(G){return m(32,!1,void 0,{[`Highcharts.${L}`]:`use Array.${R}`}),Array.prototype[R].apply(G,[].slice.call(arguments,1))}});let O=function(){let R=Math.random().toString(36).substring(2,9)+"-",L=0;return function(){return"highcharts-"+(l?"":R)+L++}}();return p.jQuery&&(p.jQuery.fn.highcharts=function(){let R=[].slice.call(arguments);if(this[0])return R[0]?(new a[v(R[0])?R.shift():"Chart"](this[0],R[0],R[1]),this):h[x(this[0],"data-highcharts-chart")]}),{addEvent:function(R,L,G,$={}){let F=typeof R=="function"&&R.prototype||R;Object.hasOwnProperty.call(F,"hcEvents")||(F.hcEvents={});let H=F.hcEvents;a.Point&&R instanceof a.Point&&R.series&&R.series.chart&&(R.series.chart.runTrackerClick=!0);let W=R.addEventListener;W&&W.call(R,L,G,!!a.supportsPassiveEvents&&{passive:$.passive===void 0?L.indexOf("touch")!==-1:$.passive,capture:!1}),H[L]||(H[L]=[]);let re={fn:G,order:typeof $.order=="number"?$.order:1/0};return H[L].push(re),H[L].sort((he,ie)=>he.order-ie.order),function(){B(R,L,G)}},arrayMax:function(R){let L=R.length,G=R[0];for(;L--;)R[L]>G&&(G=R[L]);return G},arrayMin:function(R){let L=R.length,G=R[0];for(;L--;)R[L]<G&&(G=R[L]);return G},attr:x,clamp:function(R,L,G){return R>L?R<G?R:G:L},clearTimeout:function(R){k(R)&&clearTimeout(R)},correctFloat:q,createElement:function(R,L,G,$,F){let H=r.createElement(R);return L&&D(H,L),F&&I(H,{padding:"0",border:"none",margin:"0"}),G&&I(H,G),$&&$.appendChild(H),H},crisp:(R,L=0,G)=>{let $=L%2/2,F=G?-1:1;return(Math.round(R*F-$)+$)*F},css:I,defined:k,destroyObjectProperties:function(R,L,G){X(R,function($,F){$!==L&&($!=null&&$.destroy)&&$.destroy(),($!=null&&$.destroy||!G)&&delete R[F]})},diffObjects:function(R,L,G,$){let F={};return function H(W,re,he,ie){let ae=G?re:W;X(W,function(Ce,ge){if(!ie&&$&&$.indexOf(ge)>-1&&re[ge]){Ce=A(Ce),he[ge]=[];for(let ke=0;ke<Math.max(Ce.length,re[ge].length);ke++)re[ge][ke]&&(Ce[ke]===void 0?he[ge][ke]=re[ge][ke]:(he[ge][ke]={},H(Ce[ke],re[ge][ke],he[ge][ke],ie+1)))}else C(Ce,!0)&&!Ce.nodeType?(he[ge]=y(Ce)?[]:{},H(Ce,re[ge]||{},he[ge],ie+1),Object.keys(he[ge]).length!==0||ge==="colorAxis"&&ie===0||delete he[ge]):(W[ge]!==re[ge]||ge in W&&!(ge in re))&&ge!=="__proto__"&&ge!=="constructor"&&(he[ge]=ae[ge])})}(R,L,F,0),F},discardElement:function(R){R&&R.parentElement&&R.parentElement.removeChild(R)},erase:function(R,L){let G=R.length;for(;G--;)if(R[G]===L){R.splice(G,1);break}},error:m,extend:D,extendClass:function(R,L){let G=function(){};return G.prototype=new R,D(G.prototype,L),G},find:Y,fireEvent:j,getClosestDistance:function(R,L){let G,$,F,H=!L;return R.forEach(W=>{if(W.length>1)for(F=W.length-1;F>0;F--)($=W[F]-W[F-1])<0&&!H?(L==null||L(),L=void 0):$&&(G===void 0||$<G)&&(G=$)}),G},getMagnitude:N,getNestedProperty:function(R,L){let G=R.split(".");for(;G.length&&k(L);){let $=G.shift();if($===void 0||$==="__proto__")return;if($==="this"){let H;return C(L)&&(H=L["@this"]),H??L}let F=L[$];if(!k(F)||typeof F=="function"||typeof F.nodeType=="number"||F===p)return;L=F}return L},getStyle:function R(L,G,$){let F;if(G==="width"){let W=Math.min(L.offsetWidth,L.scrollWidth),re=L.getBoundingClientRect&&L.getBoundingClientRect().width;return re<W&&re>=W-1&&(W=Math.floor(re)),Math.max(0,W-(R(L,"padding-left",!0)||0)-(R(L,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(L.offsetHeight,L.scrollHeight)-(R(L,"padding-top",!0)||0)-(R(L,"padding-bottom",!0)||0));let H=p.getComputedStyle(L,void 0);return H&&(F=H.getPropertyValue(G),w($,G!=="opacity")&&(F=g(F))),F},inArray:function(R,L,G){return m(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),L.indexOf(R,G)},insertItem:function(R,L){let G,$=R.options.index,F=L.length;for(G=R.options.isInternal?F:0;G<F+1;G++)if(!L[G]||S($)&&$<w(L[G].options.index,L[G]._i)||L[G].options.isInternal){L.splice(G,0,R);break}return G},isArray:y,isClass:T,isDOMElement:b,isFunction:function(R){return typeof R=="function"},isNumber:S,isObject:C,isString:v,keys:function(R){return m(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(R)},merge:function(){let R,L=arguments,G={},$=function(H,W){return typeof H!="object"&&(H={}),X(W,function(re,he){he!=="__proto__"&&he!=="constructor"&&(!C(re,!0)||T(re)||b(re)?H[he]=W[he]:H[he]=$(H[he]||{},re))}),H};L[0]===!0&&(G=L[1],L=Array.prototype.slice.call(L,2));let F=L.length;for(R=0;R<F;R++)G=$(G,L[R]);return G},normalizeTickInterval:function(R,L,G,$,F){let H,W=R;G=w(G,N(R));let re=R/G;for(!L&&(L=F?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],$===!1&&(G===1?L=L.filter(function(he){return he%1==0}):G<=.1&&(L=[1/G]))),H=0;H<L.length&&(W=L[H],(!F||!(W*G>=R))&&(F||!(re<=(L[H]+(L[H+1]||L[H]))/2)));H++);return q(W*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:X,offset:function(R){let L=r.documentElement,G=R.parentElement||R.parentNode?R.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(p.pageYOffset||L.scrollTop)-(L.clientTop||0),left:G.left+(p.pageXOffset||L.scrollLeft)-(L.clientLeft||0),width:G.width,height:G.height}},pad:function(R,L,G){return Array((L||2)+1-String(R).replace("-","").length).join(G||"0")+R},pick:w,pInt:g,pushUnique:function(R,L){return 0>R.indexOf(L)&&!!R.push(L)},relativeLength:function(R,L,G){return/%$/.test(R)?L*parseFloat(R)/100+(G||0):parseFloat(R)},removeEvent:B,replaceNested:function(R,...L){let G,$;do for($ of(G=R,L))R=R.replace($[0],$[1]);while(R!==G);return R},splat:A,stableSort:function(R,L){let G,$,F=R.length;for($=0;$<F;$++)R[$].safeI=$;for(R.sort(function(H,W){return(G=L(H,W))===0?H.safeI-W.safeI:G}),$=0;$<F;$++)delete R[$].safeI},syncTimeout:function(R,L,G){return L>0?setTimeout(R,L,G):(R.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:O,useSerialIds:function(R){return l=w(R,l)},wrap:function(R,L,G){let $=R[L];R[L]=function(){let F=arguments,H=this;return G.apply(this,[function(){return $.apply(H,arguments.length?arguments:F)}].concat([].slice.call(arguments)))}}}}),s(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),s(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),s(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{win:h}=a,{defined:r,error:p,extend:m,isNumber:g,isObject:v,merge:y,objectEach:C,pad:b,pick:T,splat:S,timeUnits:k}=l,x=a.isSafari&&h.Intl&&h.Intl.DateTimeFormat.prototype.formatRange,A=a.isSafari&&h.Intl&&!h.Intl.DateTimeFormat.prototype.formatRange;class D{constructor(I){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=h.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(I)}get(I,N){if(this.variableTimezone||this.timezoneOffset){let q=N.getTime(),Y=q-this.getTimezoneOffset(N);N.setTime(Y);let X=N["getUTC"+I]();return N.setTime(q),X}return this.useUTC?N["getUTC"+I]():N["get"+I]()}set(I,N,q){if(this.variableTimezone||this.timezoneOffset){if(I==="Milliseconds"||I==="Seconds"||I==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+I](q);let Y=this.getTimezoneOffset(N),X=N.getTime()-Y;N.setTime(X),N["setUTC"+I](q);let B=this.getTimezoneOffset(N);return X=N.getTime()+B,N.setTime(X)}return this.useUTC||x&&I==="FullYear"?N["setUTC"+I](q):N["set"+I](q)}update(I={}){let N=T(I.useUTC,!0);this.options=I=y(!0,this.options,I),this.Date=I.Date||h.Date||Date,this.useUTC=N,this.timezoneOffset=N&&I.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(I.getTimezoneOffset||I.timezone)}makeTime(I,N,q,Y,X,B){let j,O,R;return this.useUTC?(j=this.Date.UTC.apply(0,arguments),O=this.getTimezoneOffset(j),j+=O,O!==(R=this.getTimezoneOffset(j))?j+=R-O:O-36e5!==this.getTimezoneOffset(j-36e5)||A||(j-=36e5)):j=new this.Date(I,N,T(q,1),T(Y,0),T(X,0),T(B,0)).getTime(),j}timezoneOffsetFunction(){let I=this,N=this.options,q=N.getTimezoneOffset;return this.useUTC?N.timezone?Y=>{try{let X=`shortOffset,${N.timezone||""}`,[B,j,O,R,L=0]=(D.formatCache[X]=D.formatCache[X]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Y).split(/(GMT|:)/).map(Number),G=-(36e5*(O+L/60));if(g(G))return G}catch{p(34)}return 0}:this.useUTC&&q?Y=>6e4*q(Y.valueOf()):()=>6e4*(I.timezoneOffset||0):Y=>6e4*new Date(Y.toString()).getTimezoneOffset()}dateFormat(I,N,q){if(!r(N)||isNaN(N))return a.defaultOptions.lang&&a.defaultOptions.lang.invalidDate||"";I=T(I,"%Y-%m-%d %H:%M:%S");let Y=this,X=new this.Date(N),B=this.get("Hours",X),j=this.get("Day",X),O=this.get("Date",X),R=this.get("Month",X),L=this.get("FullYear",X),G=a.defaultOptions.lang,$=G&&G.weekdays,F=G&&G.shortWeekdays;return C(m({a:F?F[j]:$[j].substr(0,3),A:$[j],d:b(O),e:b(O,2," "),w:j,b:G.shortMonths[R],B:G.months[R],m:b(R+1),o:R+1,y:L.toString().substr(2,2),Y:L,H:b(B),k:B,I:b(B%12||12),l:B%12||12,M:b(this.get("Minutes",X)),p:B<12?"AM":"PM",P:B<12?"am":"pm",S:b(this.get("Seconds",X)),L:b(Math.floor(N%1e3),3)},a.dateFormats),function(H,W){for(;I.indexOf("%"+W)!==-1;)I=I.replace("%"+W,typeof H=="function"?H.call(Y,N):H)}),q?I.substr(0,1).toUpperCase()+I.substr(1):I}resolveDTLFormat(I){return v(I,!0)?I:{main:(I=S(I))[0],from:I[1],to:I[2]}}getTimeTicks(I,N,q,Y){let X,B,j,O,R=this,L=R.Date,G=[],$={},F=new L(N),H=I.unitRange,W=I.count||1;if(Y=T(Y,1),r(N)){R.set("Milliseconds",F,H>=k.second?0:W*Math.floor(R.get("Milliseconds",F)/W)),H>=k.second&&R.set("Seconds",F,H>=k.minute?0:W*Math.floor(R.get("Seconds",F)/W)),H>=k.minute&&R.set("Minutes",F,H>=k.hour?0:W*Math.floor(R.get("Minutes",F)/W)),H>=k.hour&&R.set("Hours",F,H>=k.day?0:W*Math.floor(R.get("Hours",F)/W)),H>=k.day&&R.set("Date",F,H>=k.month?1:Math.max(1,W*Math.floor(R.get("Date",F)/W))),H>=k.month&&(R.set("Month",F,H>=k.year?0:W*Math.floor(R.get("Month",F)/W)),B=R.get("FullYear",F)),H>=k.year&&(B-=B%W,R.set("FullYear",F,B)),H===k.week&&(O=R.get("Day",F),R.set("Date",F,R.get("Date",F)-O+Y+(O<Y?-7:0))),B=R.get("FullYear",F);let re=R.get("Month",F),he=R.get("Date",F),ie=R.get("Hours",F);N=F.getTime(),(R.variableTimezone||!R.useUTC)&&r(q)&&(j=q-N>4*k.month||R.getTimezoneOffset(N)!==R.getTimezoneOffset(q));let ae=F.getTime();for(X=1;ae<q;)G.push(ae),H===k.year?ae=R.makeTime(B+X*W,0):H===k.month?ae=R.makeTime(B,re+X*W):j&&(H===k.day||H===k.week)?ae=R.makeTime(B,re,he+X*W*(H===k.day?1:7)):j&&H===k.hour&&W>1?ae=R.makeTime(B,re,he,ie+X*W):ae+=H*W,X++;G.push(ae),H<=k.hour&&G.length<1e4&&G.forEach(function(Ce){Ce%18e5==0&&R.dateFormat("%H%M%S%L",Ce)==="000000000"&&($[Ce]="day")})}return G.info=m(I,{higherRanks:$,totalRange:H*W}),G}getDateFormat(I,N,q,Y){let X=this.dateFormat("%m-%d %H:%M:%S.%L",N),B="01-01 00:00:00.000",j={millisecond:15,second:12,minute:9,hour:6,day:3},O="millisecond",R=O;for(O in k){if(I===k.week&&+this.dateFormat("%w",N)===q&&X.substr(6)===B.substr(6)){O="week";break}if(k[O]>I){O=R;break}if(j[O]&&X.substr(j[O])!==B.substr(j[O]))break;O!=="week"&&(R=O)}return this.resolveDTLFormat(Y[O]).main}}return D.formatCache={},D}),s(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{isTouchDevice:m}=l,{fireEvent:g,merge:v}=p,y={colors:h.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:a,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:b=>Math.sqrt(1-Math.pow(b-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:m?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};y.chart.styledMode=!1;let C=new r(y.time);return{defaultOptions:y,defaultTime:C,getOptions:function(){return y},setOptions:function(b){return g(l,"setOptions",{options:b}),v(!0,y,b),(b.time||b.global)&&(l.time?l.time.update(v(y.global,y.time,b.global,b.time)):l.time=C),y}}}),s(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{isNumber:h,merge:r,pInt:p}=l;class m{static parse(v){return v?new m(v):m.None}constructor(v){let y,C,b,T;this.rgba=[NaN,NaN,NaN,NaN],this.input=v;let S=a.Color;if(S&&S!==m)return new S(v);if(typeof v=="object"&&v.stops!==void 0)this.stops=v.stops.map(k=>new m(k[1]));else if(typeof v=="string"){if(this.input=v=m.names[v.toLowerCase()]||v,v.charAt(0)==="#"){let k=v.length,x=parseInt(v.substr(1),16);k===7?C=[(16711680&x)>>16,(65280&x)>>8,255&x,1]:k===4&&(C=[(3840&x)>>4|(3840&x)>>8,(240&x)>>4|240&x,(15&x)<<4|15&x,1])}if(!C)for(b=m.parsers.length;b--&&!C;)(y=(T=m.parsers[b]).regex.exec(v))&&(C=T.parse(y))}C&&(this.rgba=C)}get(v){let y=this.input,C=this.rgba;if(typeof y=="object"&&this.stops!==void 0){let b=r(y);return b.stops=[].slice.call(b.stops),this.stops.forEach((T,S)=>{b.stops[S]=[b.stops[S][0],T.get(v)]}),b}return C&&h(C[0])?v!=="rgb"&&(v||C[3]!==1)?v==="a"?`${C[3]}`:"rgba("+C.join(",")+")":"rgb("+C[0]+","+C[1]+","+C[2]+")":y}brighten(v){let y=this.rgba;if(this.stops)this.stops.forEach(function(C){C.brighten(v)});else if(h(v)&&v!==0)for(let C=0;C<3;C++)y[C]+=p(255*v),y[C]<0&&(y[C]=0),y[C]>255&&(y[C]=255);return this}setOpacity(v){return this.rgba[3]=v,this}tweenTo(v,y){let C=this.rgba,b=v.rgba;if(!h(C[0])||!h(b[0]))return v.input||"none";let T=b[3]!==1||C[3]!==1;return(T?"rgba(":"rgb(")+Math.round(b[0]+(C[0]-b[0])*(1-y))+","+Math.round(b[1]+(C[1]-b[1])*(1-y))+","+Math.round(b[2]+(C[2]-b[2])*(1-y))+(T?","+(b[3]+(C[3]-b[3])*(1-y)):"")+")"}}return m.names={white:"#ffffff",black:"#000000"},m.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),parseFloat(g[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),1]}}],m.None=new m(""),m}),s(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{parse:r}=a,{win:p}=l,{isNumber:m,objectEach:g}=h;class v{constructor(C,b,T){this.pos=NaN,this.options=b,this.elem=C,this.prop=T}dSetter(){let C=this.paths,b=C&&C[0],T=C&&C[1],S=this.now||0,k=[];if(S!==1&&b&&T)if(b.length===T.length&&S<1)for(let x=0;x<T.length;x++){let A=b[x],D=T[x],w=[];for(let I=0;I<D.length;I++){let N=A[I],q=D[I];m(N)&&m(q)&&!(D[0]==="A"&&(I===4||I===5))?w[I]=N+S*(q-N):w[I]=q}k.push(w)}else k=T;else k=this.toD||[];this.elem.attr("d",k,void 0,!0)}update(){let C=this.elem,b=this.prop,T=this.now,S=this.options.step;this[b+"Setter"]?this[b+"Setter"]():C.attr?C.element&&C.attr(b,T,null,!0):C.style[b]=T+this.unit,S&&S.call(C,T,this)}run(C,b,T){let S=this,k=S.options,x=function(w){return!x.stopped&&S.step(w)},A=p.requestAnimationFrame||function(w){setTimeout(w,13)},D=function(){for(let w=0;w<v.timers.length;w++)v.timers[w]()||v.timers.splice(w--,1);v.timers.length&&A(D)};C!==b||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=C,this.end=b,this.unit=T,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&v.timers.push(x)===1&&A(D)):(delete k.curAnim[this.prop],k.complete&&Object.keys(k.curAnim).length===0&&k.complete.call(this.elem))}step(C){let b,T,S=+new Date,k=this.options,x=this.elem,A=k.complete,D=k.duration,w=k.curAnim;return x.attr&&!x.element?b=!1:C||S>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),w[this.prop]=!0,T=!0,g(w,function(I){I!==!0&&(T=!1)}),T&&A&&A.call(x),b=!1):(this.pos=k.easing((S-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),b=!0),b}initPath(C,b,T){let S=C.startX,k=C.endX,x=T.slice(),A=C.isArea,D=A?2:1,w=b&&T.length>b.length&&T.hasStackedCliffs,I,N,q,Y,X=b&&b.slice();if(!X||w)return[x,x];function B(O,R){for(;O.length<N;){let L=O[0],G=R[N-O.length];if(G&&L[0]==="M"&&(G[0]==="C"?O[0]=["C",L[1],L[2],L[1],L[2],L[1],L[2]]:O[0]=["L",L[1],L[2]]),O.unshift(L),A){let $=O.pop();O.push(O[O.length-1],$)}}}function j(O){for(;O.length<N;){let R=O[Math.floor(O.length/D)-1].slice();if(R[0]==="C"&&(R[1]=R[5],R[2]=R[6]),A){let L=O[Math.floor(O.length/D)].slice();O.splice(O.length/2,0,R,L)}else O.push(R)}}if(S&&k&&k.length){for(q=0;q<S.length;q++){if(S[q]===k[0]){I=q;break}if(S[0]===k[k.length-S.length+q]){I=q,Y=!0;break}if(S[S.length-1]===k[k.length-S.length+q]){I=S.length-q;break}}I===void 0&&(X=[])}return X.length&&m(I)&&(N=x.length+I*D,Y?(B(X,x),j(x)):(B(x,X),j(X))),[X,x]}fillSetter(){v.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,r(this.start).tweenTo(r(this.end),this.pos),void 0,!0)}}return v.timers=[],v}),s(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(a,l){let{defined:h,getStyle:r,isArray:p,isNumber:m,isObject:g,merge:v,objectEach:y,pick:C}=l;function b(S){return g(S)?v({duration:500,defer:0},S):{duration:S?500:0,defer:0}}function T(S,k){let x=a.timers.length;for(;x--;)a.timers[x].elem!==S||k&&k!==a.timers[x].prop||(a.timers[x].stopped=!0)}return{animate:function(S,k,x){let A,D="",w,I,N;g(x)||(N=arguments,x={duration:N[2],easing:N[3],complete:N[4]}),m(x.duration)||(x.duration=400),x.easing=typeof x.easing=="function"?x.easing:Math[x.easing]||Math.easeInOutSine,x.curAnim=v(k),y(k,function(q,Y){T(S,Y),I=new a(S,x,Y),w=void 0,Y==="d"&&p(k.d)?(I.paths=I.initPath(S,S.pathArray,k.d),I.toD=k.d,A=0,w=1):S.attr?A=S.attr(Y):(A=parseFloat(r(S,Y))||0,Y!=="opacity"&&(D="px")),w||(w=q),typeof w=="string"&&w.match("px")&&(w=w.replace(/px/g,"")),I.run(A,w,D)})},animObject:b,getDeferredAnimation:function(S,k,x){let A=b(k),D=x?[x]:S.series,w=0,I=0;return D.forEach(N=>{let q=b(N.options.animation);w=g(k)&&h(k.defer)?A.defer:Math.max(w,q.duration+q.defer),I=Math.min(A.duration,q.duration)}),S.renderer.forExport&&(w=0),{defer:Math.max(0,w-I),duration:Math.min(w,I)}},setAnimation:function(S,k){k.renderer.globalAnimation=C(S,k.options.chart.animation,!0)},stop:T}}),s(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{SVG_NS:h,win:r}=a,{attr:p,createElement:m,css:g,error:v,isFunction:y,isString:C,objectEach:b,splat:T}=l,{trustedTypes:S}=r,k=S&&y(S.createPolicy)&&S.createPolicy("highcharts",{createHTML:w=>w}),x=k?k.createHTML(""):"",A=function(){try{return!!new DOMParser().parseFromString(x,"text/html")}catch{return!1}}();class D{static filterUserAttributes(I){return b(I,(N,q)=>{let Y=!0;D.allowedAttributes.indexOf(q)===-1&&(Y=!1),["background","dynsrc","href","lowsrc","src"].indexOf(q)!==-1&&(Y=C(N)&&D.allowedReferences.some(X=>N.indexOf(X)===0)),Y||(v(33,!1,void 0,{"Invalid attribute in config":`${q}`}),delete I[q]),C(N)&&I[q]&&(I[q]=N.replace(/</g,"&lt;"))}),I}static parseStyle(I){return I.split(";").reduce((N,q)=>{let Y=q.split(":").map(B=>B.trim()),X=Y.shift();return X&&Y.length&&(N[X.replace(/-([a-z])/g,B=>B[1].toUpperCase())]=Y.join(":")),N},{})}static setElementHTML(I,N){I.innerHTML=D.emptyHTML,N&&new D(N).addToDOM(I)}constructor(I){this.nodes=typeof I=="string"?this.parseMarkup(I):I}addToDOM(I){return function N(q,Y){let X;return T(q).forEach(function(B){let j,O=B.tagName,R=B.textContent?a.doc.createTextNode(B.textContent):void 0,L=D.bypassHTMLFiltering;if(O)if(O==="#text")j=R;else if(D.allowedTags.indexOf(O)!==-1||L){let G=O==="svg"?h:Y.namespaceURI||h,$=a.doc.createElementNS(G,O),F=B.attributes||{};b(B,function(H,W){W!=="tagName"&&W!=="attributes"&&W!=="children"&&W!=="style"&&W!=="textContent"&&(F[W]=H)}),p($,L?F:D.filterUserAttributes(F)),B.style&&g($,B.style),R&&$.appendChild(R),N(B.children||[],$),j=$}else v(33,!1,void 0,{"Invalid tagName in config":O});j&&Y.appendChild(j),X=j}),X}(this.nodes,I)}parseMarkup(I){let N,q=[];if(I=I.trim().replace(/ style=(["'])/g," data-style=$1"),A)N=new DOMParser().parseFromString(k?k.createHTML(I):I,"text/html");else{let X=m("div");X.innerHTML=I,N={body:X}}let Y=(X,B)=>{let j=X.nodeName.toLowerCase(),O={tagName:j};j==="#text"&&(O.textContent=X.textContent||"");let R=X.attributes;if(R){let L={};[].forEach.call(R,G=>{G.name==="data-style"?O.style=D.parseStyle(G.value):L[G.name]=G.value}),O.attributes=L}if(X.childNodes.length){let L=[];[].forEach.call(X.childNodes,G=>{Y(G,L)}),L.length&&(O.children=L)}B.push(O)};return[].forEach.call(N.body.childNodes,X=>Y(X,q)),q}}return D.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],D.allowedReferences=["https://","http://","mailto:","/","../","./","#"],D.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],D.emptyHTML=x,D.bypassHTMLFiltering=!1,D}),s(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(a,l){let{defaultOptions:h,defaultTime:r}=a,{extend:p,getNestedProperty:m,isArray:g,isNumber:v,isObject:y,pick:C,pInt:b}=l,T={add:(x,A)=>x+A,divide:(x,A)=>A!==0?x/A:"",eq:(x,A)=>x==A,each:function(x){let A=arguments[arguments.length-1];return!!g(x)&&x.map((D,w)=>S(A.body,p(y(D)?D:{"@this":D},{"@index":w,"@first":w===0,"@last":w===x.length-1}))).join("")},ge:(x,A)=>x>=A,gt:(x,A)=>x>A,if:x=>!!x,le:(x,A)=>x<=A,lt:(x,A)=>x<A,multiply:(x,A)=>x*A,ne:(x,A)=>x!=A,subtract:(x,A)=>x-A,unless:x=>!x};function S(x="",A,D){let w=/\{([\w\:\.\,;\-\/<>%@"'= #\(\)]+)\}/g,I=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],q=/f$/,Y=/\.(\d)/,X=h.lang,B=D&&D.time||r,j=D&&D.numberFormatter||k,O=(F="")=>{let H;return F==="true"||F!=="false"&&((H=Number(F)).toString()===F?H:m(F,A))},R,L,G=0,$;for(;(R=w.exec(x))!==null;){let F=I.exec(R[1]);F&&(R=F,$=!0),L&&L.isBlock||(L={ctx:A,expression:R[1],find:R[0],isBlock:R[1].charAt(0)==="#",start:R.index,startInner:R.index+R[0].length,length:R[0].length});let H=R[1].split(" ")[0].replace("#","");T[H]&&(L.isBlock&&H===L.fn&&G++,L.fn||(L.fn=H));let W=R[1]==="else";if(L.isBlock&&L.fn&&(R[1]===`/${L.fn}`||W))if(G)!W&&G--;else{let re=L.startInner,he=x.substr(re,R.index-re);L.body===void 0?(L.body=he,L.startInner=R.index+R[0].length):L.elseBody=he,L.find+=he+R[0],W||(N.push(L),L=void 0)}else L.isBlock||N.push(L);if(F&&!(L!=null&&L.isBlock))break}return N.forEach(F=>{let H,W,{body:re,elseBody:he,expression:ie,fn:ae}=F;if(ae){let Ce=[F],ge=ie.split(" ");for(W=T[ae].length;W--;)Ce.unshift(O(ge[W+1]));H=T[ae].apply(A,Ce),F.isBlock&&typeof H=="boolean"&&(H=S(H?re:he,A,D))}else{let Ce=ie.split(":");if(H=O(Ce.shift()||""),Ce.length&&typeof H=="number"){let ge=Ce.join(":");if(q.test(ge)){let ke=parseInt((ge.match(Y)||["","-1"])[1],10);H!==null&&(H=j(H,ke,X.decimalPoint,ge.indexOf(",")>-1?X.thousandsSep:""))}else H=B.dateFormat(ge,H)}}x=x.replace(F.find,C(H,""))}),$?S(x,A,D):x}function k(x,A,D,w){let I,N;x=+x||0,A=+A;let q=h.lang,Y=(x.toString().split(".")[1]||"").split("e")[0].length,X=x.toString().split("e"),B=A;A===-1?A=Math.min(Y,20):v(A)?A&&X[1]&&X[1]<0&&((N=A+ +X[1])>=0?(X[0]=(+X[0]).toExponential(N).split("e")[0],A=N):(X[0]=X[0].split(".")[0]||0,x=A<20?(X[0]*Math.pow(10,X[1])).toFixed(A):0,X[1]=0)):A=2;let j=(Math.abs(X[1]?X[0]:x)+Math.pow(10,-Math.max(A,Y)-1)).toFixed(A),O=String(b(j)),R=O.length>3?O.length%3:0;return D=C(D,q.decimalPoint),w=C(w,q.thousandsSep),I=(x<0?"-":"")+(R?O.substr(0,R)+w:""),0>+X[1]&&!B?I="0":I+=O.substr(R).replace(/(\d{3})(?=\d)/g,"$1"+w),A?I+=D+j.slice(-A):+I==0&&(I="0"),X[1]&&+I!=0&&(I+="e"+X[1]),I}return{dateFormat:function(x,A,D){return r.dateFormat(x,A,D)},format:S,helpers:T,numberFormat:k}}),s(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(a){var l,h;let r;return(h=l||(l={})).rendererTypes={},h.getRendererType=function(p=r){return h.rendererTypes[p]||h.rendererTypes[r]},h.registerRendererType=function(p,m,g){h.rendererTypes[p]=m,(!r||g)&&(r=p,a.Renderer=m)},l}),s(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(a){var l;let{clamp:h,pick:r,pushUnique:p,stableSort:m}=a;return(l||(l={})).distribute=function g(v,y,C){let b=v,T=b.reducedLen||y,S=(O,R)=>O.target-R.target,k=[],x=v.length,A=[],D=k.push,w,I,N,q=!0,Y,X,B=0,j;for(w=x;w--;)B+=v[w].size;if(B>T){for(m(v,(O,R)=>(R.rank||0)-(O.rank||0)),N=(j=v[0].rank===v[v.length-1].rank)?x/2:-1,I=j?N:x-1;N&&B>T;)Y=v[w=Math.floor(I)],p(A,w)&&(B-=Y.size),I+=N,j&&I>=v.length&&(N/=2,I=N);A.sort((O,R)=>R-O).forEach(O=>D.apply(k,v.splice(O,1)))}for(m(v,S),v=v.map(O=>({size:O.size,targets:[O.target],align:r(O.align,.5)}));q;){for(w=v.length;w--;)Y=v[w],X=(Math.min.apply(0,Y.targets)+Math.max.apply(0,Y.targets))/2,Y.pos=h(X-Y.size*Y.align,0,y-Y.size);for(w=v.length,q=!1;w--;)w>0&&v[w-1].pos+v[w-1].size>v[w].pos&&(v[w-1].size+=v[w].size,v[w-1].targets=v[w-1].targets.concat(v[w].targets),v[w-1].align=.5,v[w-1].pos+v[w-1].size>y&&(v[w-1].pos=y-v[w-1].size),v.splice(w,1),q=!0)}return D.apply(b,k),w=0,v.some(O=>{let R=0;return(O.targets||[]).some(()=>(b[w].pos=O.pos+R,C!==void 0&&Math.abs(b[w].pos-b[w].target)>C?(b.slice(0,w+1).forEach(L=>delete L.pos),b.reducedLen=(b.reducedLen||y)-.1*y,b.reducedLen>.1*y&&g(b,y,C),!0):(R+=b[w].size,w++,!1)))}),m(b,S),b},l}),s(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{animate:p,animObject:m,stop:g}=a,{deg2rad:v,doc:y,svg:C,SVG_NS:b,win:T}=h,{addEvent:S,attr:k,createElement:x,crisp:A,css:D,defined:w,erase:I,extend:N,fireEvent:q,isArray:Y,isFunction:X,isObject:B,isString:j,merge:O,objectEach:R,pick:L,pInt:G,pushUnique:$,replaceNested:F,syncTimeout:H,uniqueKey:W}=r;class re{_defaultGetter(ie){let ae=L(this[ie+"Value"],this[ie],this.element?this.element.getAttribute(ie):null,0);return/^-?[\d\.]+$/.test(ae)&&(ae=parseFloat(ae)),ae}_defaultSetter(ie,ae,Ce){Ce.setAttribute(ae,ie)}add(ie){let ae,Ce=this.renderer,ge=this.element;return ie&&(this.parentGroup=ie),this.textStr!==void 0&&this.element.nodeName==="text"&&Ce.buildText(this),this.added=!0,(!ie||ie.handleZ||this.zIndex)&&(ae=this.zIndexSetter()),ae||(ie?ie.element:Ce.box).appendChild(ge),this.onAdd&&this.onAdd(),this}addClass(ie,ae){let Ce=ae?"":this.attr("class")||"";return(ie=(ie||"").split(/ /g).reduce(function(ge,ke){return Ce.indexOf(ke)===-1&&ge.push(ke),ge},Ce?[Ce]:[]).join(" "))!==Ce&&this.attr("class",ie),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(ie,ae,Ce,ge=!0){let ke,K,Q,le,_e={},J=this.renderer,ne=J.alignedObjects,ue=!!ie;ie?(this.alignOptions=ie,this.alignByTranslate=ae,this.alignTo=Ce):(ie=this.alignOptions||{},ae=this.alignByTranslate,Ce=this.alignTo);let ye=!Ce||j(Ce)?Ce||"renderer":void 0;ye&&(ue&&$(ne,this),Ce=void 0);let we=L(Ce,J[ye],J),ze=ie.align,Ee=ie.verticalAlign;return ke=(we.x||0)+(ie.x||0),K=(we.y||0)+(ie.y||0),ze==="right"?Q=1:ze==="center"&&(Q=2),Q&&(ke+=((we.width||0)-(ie.width||0))/Q),_e[ae?"translateX":"x"]=Math.round(ke),Ee==="bottom"?le=1:Ee==="middle"&&(le=2),le&&(K+=((we.height||0)-(ie.height||0))/le),_e[ae?"translateY":"y"]=Math.round(K),ge&&(this[this.placed?"animate":"attr"](_e),this.placed=!0),this.alignAttr=_e,this}alignSetter(ie){let ae={left:"start",center:"middle",right:"end"};ae[ie]&&(this.alignValue=ie,this.element.setAttribute("text-anchor",ae[ie]))}animate(ie,ae,Ce){let ge=m(L(ae,this.renderer.globalAnimation,!0)),ke=ge.defer;return y.hidden&&(ge.duration=0),ge.duration!==0?(Ce&&(ge.complete=Ce),H(()=>{this.element&&p(this,ie,ge)},ke)):(this.attr(ie,void 0,Ce||ge.complete),R(ie,function(K,Q){ge.step&&ge.step.call(this,K,{prop:Q,pos:1,elem:this})},this)),this}applyTextOutline(ie){let ae=this.element;ie.indexOf("contrast")!==-1&&(ie=ie.replace(/contrast/g,this.renderer.getContrast(ae.style.fill)));let Ce=ie.split(" "),ge=Ce[Ce.length-1],ke=Ce[0];if(ke&&ke!=="none"&&h.svg){this.fakeTS=!0,ke=ke.replace(/(^[\d\.]+)(.*?)$/g,function(J,ne,ue){return 2*Number(ne)+ue}),this.removeTextOutline();let K=y.createElementNS(b,"tspan");k(K,{class:"highcharts-text-outline",fill:ge,stroke:ge,"stroke-width":ke,"stroke-linejoin":"round"});let Q=ae.querySelector("textPath")||ae;[].forEach.call(Q.childNodes,J=>{let ne=J.cloneNode(!0);ne.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ue=>ne.removeAttribute(ue)),K.appendChild(ne)});let le=0;[].forEach.call(Q.querySelectorAll("text tspan"),J=>{le+=Number(J.getAttribute("dy"))});let _e=y.createElementNS(b,"tspan");_e.textContent="",k(_e,{x:Number(ae.getAttribute("x")),dy:-le}),K.appendChild(_e),Q.insertBefore(K,Q.firstChild)}}attr(ie,ae,Ce,ge){let{element:ke}=this,K=re.symbolCustomAttribs,Q,le,_e=this,J;return typeof ie=="string"&&ae!==void 0&&(Q=ie,(ie={})[Q]=ae),typeof ie=="string"?_e=(this[ie+"Getter"]||this._defaultGetter).call(this,ie,ke):(R(ie,function(ne,ue){J=!1,ge||g(this,ue),this.symbolName&&K.indexOf(ue)!==-1&&(le||(this.symbolAttr(ie),le=!0),J=!0),this.rotation&&(ue==="x"||ue==="y")&&(this.doTransform=!0),J||(this[ue+"Setter"]||this._defaultSetter).call(this,ne,ue,ke)},this),this.afterSetters()),Ce&&Ce.call(this),_e}clip(ie){if(ie&&!ie.clipPath){let ae=W()+"-",Ce=this.renderer.createElement("clipPath").attr({id:ae}).add(this.renderer.defs);N(ie,{clipPath:Ce,id:ae,count:0}),ie.add(Ce)}return this.attr("clip-path",ie?`url(${this.renderer.url}#${ie.id})`:"none")}crisp(ie,ae){ae=Math.round(ae||ie.strokeWidth||0);let Ce=ie.x||this.x||0,ge=ie.y||this.y||0,ke=(ie.width||this.width||0)+Ce,K=(ie.height||this.height||0)+ge,Q=A(Ce,ae),le=A(ge,ae);return N(ie,{x:Q,y:le,width:A(ke,ae)-Q,height:A(K,ae)-le}),w(ie.strokeWidth)&&(ie.strokeWidth=ae),ie}complexColor(ie,ae,Ce){let ge=this.renderer,ke,K,Q,le,_e,J,ne,ue,ye,we,ze=[],Ee;q(this.renderer,"complexColor",{args:arguments},function(){if(ie.radialGradient?K="radialGradient":ie.linearGradient&&(K="linearGradient"),K){if(Q=ie[K],_e=ge.gradients,J=ie.stops,ye=Ce.radialReference,Y(Q)&&(ie[K]=Q={x1:Q[0],y1:Q[1],x2:Q[2],y2:Q[3],gradientUnits:"userSpaceOnUse"}),K==="radialGradient"&&ye&&!w(Q.gradientUnits)&&(le=Q,Q=O(Q,ge.getRadialAttr(ye,le),{gradientUnits:"userSpaceOnUse"})),R(Q,function(Ie,Fe){Fe!=="id"&&ze.push(Fe,Ie)}),R(J,function(Ie){ze.push(Ie)}),_e[ze=ze.join(",")])we=_e[ze].attr("id");else{Q.id=we=W();let Ie=_e[ze]=ge.createElement(K).attr(Q).add(ge.defs);Ie.radAttr=le,Ie.stops=[],J.forEach(function(Fe){Fe[1].indexOf("rgba")===0?(ne=(ke=l.parse(Fe[1])).get("rgb"),ue=ke.get("a")):(ne=Fe[1],ue=1);let He=ge.createElement("stop").attr({offset:Fe[0],"stop-color":ne,"stop-opacity":ue}).add(Ie);Ie.stops.push(He)})}Ee="url("+ge.url+"#"+we+")",Ce.setAttribute(ae,Ee),Ce.gradient=ze,ie.toString=function(){return Ee}}})}css(ie){let ae=this.styles,Ce={},ge=this.element,ke,K=!ae;if(ae&&R(ie,function(Q,le){ae&&ae[le]!==Q&&(Ce[le]=Q,K=!0)}),K){ae&&(ie=N(ae,Ce)),ie.width===null||ie.width==="auto"?delete this.textWidth:ge.nodeName.toLowerCase()==="text"&&ie.width&&(ke=this.textWidth=G(ie.width)),N(this.styles,ie),ke&&!C&&this.renderer.forExport&&delete ie.width;let Q=O(ie);ge.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(le=>Q&&delete Q[le]),Q.color&&(Q.fill=Q.color)),D(ge,Q)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),ie.textOutline&&this.applyTextOutline(ie.textOutline)),this}dashstyleSetter(ie){let ae,Ce=this["stroke-width"];if(Ce==="inherit"&&(Ce=1),ie=ie&&ie.toLowerCase()){let ge=ie.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(ae=ge.length;ae--;)ge[ae]=""+G(ge[ae])*L(Ce,NaN);ie=ge.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",ie)}}destroy(){var le;let ie=this,ae=ie.element||{},Ce=ie.renderer,ge=ae.ownerSVGElement,ke=ae.nodeName==="SPAN"&&ie.parentGroup||void 0,K,Q;if(ae.onclick=ae.onmouseout=ae.onmouseover=ae.onmousemove=ae.point=null,g(ie),ie.clipPath&&ge){let _e=ie.clipPath;[].forEach.call(ge.querySelectorAll("[clip-path],[CLIP-PATH]"),function(J){J.getAttribute("clip-path").indexOf(_e.element.id)>-1&&J.removeAttribute("clip-path")}),ie.clipPath=_e.destroy()}if(ie.connector=(le=ie.connector)==null?void 0:le.destroy(),ie.stops){for(Q=0;Q<ie.stops.length;Q++)ie.stops[Q].destroy();ie.stops.length=0,ie.stops=void 0}for(ie.safeRemoveChild(ae);ke&&ke.div&&ke.div.childNodes.length===0;)K=ke.parentGroup,ie.safeRemoveChild(ke.div),delete ke.div,ke=K;ie.alignOptions&&I(Ce.alignedObjects,ie),R(ie,function(_e,J){ie[J]&&ie[J].parentGroup===ie&&ie[J].destroy&&ie[J].destroy(),delete ie[J]})}dSetter(ie,ae,Ce){Y(ie)&&(typeof ie[0]=="string"&&(ie=this.renderer.pathToSegments(ie)),this.pathArray=ie,ie=ie.reduce((ge,ke,K)=>ke&&ke.join?(K?ge+" ":"")+ke.join(" "):(ke||"").toString(),"")),/(NaN| {2}|^$)/.test(ie)&&(ie="M 0 0"),this[ae]!==ie&&(Ce.setAttribute(ae,ie),this[ae]=ie)}fillSetter(ie,ae,Ce){typeof ie=="string"?Ce.setAttribute(ae,ie):ie&&this.complexColor(ie,ae,Ce)}hrefSetter(ie,ae,Ce){Ce.setAttributeNS("http://www.w3.org/1999/xlink",ae,ie)}getBBox(ie,ae){let Ce,ge,ke,K,{alignValue:Q,element:le,renderer:_e,styles:J,textStr:ne}=this,{cache:ue,cacheKeys:ye}=_e,we=le.namespaceURI===this.SVG_NS,ze=L(ae,this.rotation,0),Ee=_e.styledMode?le&&re.prototype.getStyle.call(le,"font-size"):J.fontSize;if(w(ne)&&((K=ne.toString()).indexOf("<")===-1&&(K=K.replace(/\d/g,"0")),K+=["",_e.rootFontSize,Ee,ze,this.textWidth,Q,J.textOverflow,J.fontWeight].join(",")),K&&!ie&&(Ce=ue[K]),!Ce||Ce.polygon){if(we||_e.forExport){try{ke=this.fakeTS&&function(Fe){let He=le.querySelector(".highcharts-text-outline");He&&D(He,{display:Fe})},X(ke)&&ke("none"),Ce=le.getBBox?N({},le.getBBox()):{width:le.offsetWidth,height:le.offsetHeight,x:0,y:0},X(ke)&&ke("")}catch{}(!Ce||Ce.width<0)&&(Ce={x:0,y:0,width:0,height:0})}else Ce=this.htmlGetBBox();ge=Ce.height,we&&(Ce.height=ge={"11px,17":14,"13px,20":16}[`${Ee||""},${Math.round(ge)}`]||ge),ze&&(Ce=this.getRotatedBox(Ce,ze));let Ie={bBox:Ce};q(this,"afterGetBBox",Ie),Ce=Ie.bBox}if(K&&(ne===""||Ce.height>0)){for(;ye.length>250;)delete ue[ye.shift()];ue[K]||ye.push(K),ue[K]=Ce}return Ce}getRotatedBox(ie,ae){let{x:Ce,y:ge,width:ke,height:K}=ie,{alignValue:Q,translateY:le,rotationOriginX:_e=0,rotationOriginY:J=0}=this,ne={right:1,center:.5}[Q||0]||0,ue=Number(this.element.getAttribute("y")||0)-(le?0:ge),ye=ae*v,we=(ae-90)*v,ze=Math.cos(ye),Ee=Math.sin(ye),Ie=ke*ze,Fe=ke*Ee,He=Math.cos(we),Ae=Math.sin(we),[[xe,me],[Me,De]]=[_e,J].map(si=>[si-si*ze,si*Ee]),Pe=Ce+ne*(ke-Ie)+xe+De+ue*He,je=Pe+Ie,Xe=je-K*He,tt=Xe-Ie,rt=ge+ue-ne*Fe-me+Me+ue*Ae,dt=rt+Fe,gt=dt-K*Ae,wt=gt-Fe,Rt=Math.min(Pe,je,Xe,tt),ft=Math.min(rt,dt,gt,wt),Et=Math.max(Pe,je,Xe,tt)-Rt,Tt=Math.max(rt,dt,gt,wt)-ft;return{x:Rt,y:ft,width:Et,height:Tt,polygon:[[Pe,rt],[je,dt],[Xe,gt],[tt,wt]]}}getStyle(ie){return T.getComputedStyle(this.element||this,"").getPropertyValue(ie)}hasClass(ie){return(""+this.attr("class")).split(" ").indexOf(ie)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(ie,ae){this.onEvents={},this.opacity=1,this.SVG_NS=b,this.element=ae==="span"||ae==="body"?x(ae):y.createElementNS(this.SVG_NS,ae),this.renderer=ie,this.styles={},q(this,"afterInit")}on(ie,ae){let{onEvents:Ce}=this;return Ce[ie]&&Ce[ie](),Ce[ie]=S(this.element,ie,ae),this}opacitySetter(ie,ae,Ce){let ge=Number(Number(ie).toFixed(3));this.opacity=ge,Ce.setAttribute(ae,ge)}reAlign(){var ie;(ie=this.alignOptions)!=null&&ie.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(ie){return this.attr("class",(""+this.attr("class")).replace(j(ie)?RegExp(`(^| )${ie}( |$)`):ie," ").replace(/ +/g," ").trim())}removeTextOutline(){let ie=this.element.querySelector("tspan.highcharts-text-outline");ie&&this.safeRemoveChild(ie)}safeRemoveChild(ie){let ae=ie.parentNode;ae&&ae.removeChild(ie)}setRadialReference(ie){let ae=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=ie,ae&&ae.radAttr&&ae.animate(this.renderer.getRadialAttr(ie,ae.radAttr)),this}shadow(ie){var ke;let{renderer:ae}=this,Ce=O(((ke=this.parentGroup)==null?void 0:ke.rotation)===90?{offsetX:-1,offsetY:-1}:{},B(ie)?ie:{}),ge=ae.shadowDefinition(Ce);return this.attr({filter:ie?`url(${ae.url}#${ge})`:"none"})}show(ie=!0){return this.attr({visibility:ie?"inherit":"visible"})}"stroke-widthSetter"(ie,ae,Ce){this[ae]=ie,Ce.setAttribute(ae,ie)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let ie=this.getStyle("stroke-width"),ae=0,Ce;return/px$/.test(ie)?ae=G(ie):ie!==""&&(k(Ce=y.createElementNS(b,"rect"),{width:ie,"stroke-width":0}),this.element.parentNode.appendChild(Ce),ae=Ce.getBBox().width,Ce.parentNode.removeChild(Ce)),ae}symbolAttr(ie){let ae=this;re.symbolCustomAttribs.forEach(function(Ce){ae[Ce]=L(ie[Ce],ae[Ce])}),ae.attr({d:ae.renderer.symbols[ae.symbolName](ae.x,ae.y,ae.width,ae.height,ae)})}textSetter(ie){ie!==this.textStr&&(delete this.textPxLength,this.textStr=ie,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(ie){let ae=this.element,Ce=ae.getElementsByTagName("title")[0]||y.createElementNS(this.SVG_NS,"title");ae.insertBefore?ae.insertBefore(Ce,ae.firstChild):ae.appendChild(Ce),Ce.textContent=F(L(ie,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let ie=this.element;return ie.parentNode.appendChild(ie),this}translate(ie,ae){return this.attr({translateX:ie,translateY:ae})}updateTransform(ie="transform"){var ue;let{element:ae,matrix:Ce,rotation:ge=0,rotationOriginX:ke,rotationOriginY:K,scaleX:Q,scaleY:le,translateX:_e=0,translateY:J=0}=this,ne=["translate("+_e+","+J+")"];w(Ce)&&ne.push("matrix("+Ce.join(",")+")"),ge&&(ne.push("rotate("+ge+" "+L(ke,ae.getAttribute("x"),0)+" "+L(K,ae.getAttribute("y")||0)+")"),((ue=this.text)==null?void 0:ue.element.tagName)==="SPAN"&&this.text.attr({rotation:ge,rotationOriginX:(ke||0)-this.padding,rotationOriginY:(K||0)-this.padding})),(w(Q)||w(le))&&ne.push("scale("+L(Q,1)+" "+L(le,1)+")"),ne.length&&!(this.text||this).textPath&&ae.setAttribute(ie,ne.join(" "))}visibilitySetter(ie,ae,Ce){ie==="inherit"?Ce.removeAttribute(ae):this[ae]!==ie&&Ce.setAttribute(ae,ie),this[ae]=ie}xGetter(ie){return this.element.nodeName==="circle"&&(ie==="x"?ie="cx":ie==="y"&&(ie="cy")),this._defaultGetter(ie)}zIndexSetter(ie,ae){let Ce=this.renderer,ge=this.parentGroup,ke=(ge||Ce).element||Ce.box,K=this.element,Q=ke===Ce.box,le,_e,J,ne=!1,ue,ye=this.added,we;if(w(ie)?(K.setAttribute("data-z-index",ie),ie=+ie,this[ae]===ie&&(ye=!1)):w(this[ae])&&K.removeAttribute("data-z-index"),this[ae]=ie,ye){for((ie=this.zIndex)&&ge&&(ge.handleZ=!0),we=(le=ke.childNodes).length-1;we>=0&&!ne;we--)ue=!w(J=(_e=le[we]).getAttribute("data-z-index")),_e!==K&&(ie<0&&ue&&!Q&&!we?(ke.insertBefore(K,le[we]),ne=!0):(G(J)<=ie||ue&&(!w(ie)||ie>=0))&&(ke.insertBefore(K,le[we+1]),ne=!0));ne||(ke.insertBefore(K,le[Q?3:0]),ne=!0)}return ne}}return re.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],re.prototype.strokeSetter=re.prototype.fillSetter,re.prototype.yGetter=re.prototype.xGetter,re.prototype.matrixSetter=re.prototype.rotationOriginXSetter=re.prototype.rotationOriginYSetter=re.prototype.rotationSetter=re.prototype.scaleXSetter=re.prototype.scaleYSetter=re.prototype.translateXSetter=re.prototype.translateYSetter=re.prototype.verticalAlignSetter=function(he,ie){this[ie]=he,this.doTransform=!0},re}),s(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,l){let{defined:h,extend:r,isNumber:p,merge:m,pick:g,removeEvent:v}=l;class y extends a{constructor(b,T,S,k,x,A,D,w,I,N){let q;super(b,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=T,this.x=S,this.y=k,this.anchorX=A,this.anchorY=D,this.baseline=I,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=b.text(void 0,0,0,w).attr({zIndex:1}),typeof x=="string"&&((q=/^url\((.*?)\)$/.test(x))||this.renderer.symbols[x])&&(this.symbolKey=x),this.bBox=y.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=b.styledMode||q,this.deferredAttr={},this.alignFactor=0}alignSetter(b){let T={left:0,center:.5,right:1}[b];T!==this.alignFactor&&(this.alignFactor=T,this.bBox&&p(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(b,T){this.anchorX=b,this.boxAttr(T,Math.round(b)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(b,T){this.anchorY=b,this.boxAttr(T,b-this.ySetting)}boxAttr(b,T){this.box?this.box.attr(b,T):this.deferredAttr[b]=T}css(b){if(b){let T={};b=m(b),y.textProps.forEach(S=>{b[S]!==void 0&&(T[S]=b[S],delete b[S])}),this.text.css(T),"fontSize"in T||"fontWeight"in T?this.updateTextPadding():("width"in T||"textOverflow"in T)&&this.updateBoxSize()}return a.prototype.css.call(this,b)}destroy(){v(this.element,"mouseenter"),v(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),a.prototype.destroy.call(this)}fillSetter(b,T){b&&(this.needsBox=!0),this.fill=b,this.boxAttr(T,b)}getBBox(b,T){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:S,height:k=0,translateX:x=0,translateY:A=0,width:D=0}=this,w=g(this.paddingLeft,S),I=T??(this.rotation||0),N={width:D,height:k,x:x+this.bBox.x-w,y:A+this.bBox.y-S+this.baselineOffset};return I&&(N=this.getRotatedBox(N,I)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(b){this.heightSetting=b,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:g(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&h(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(b,T){p(b)?b!==this[T]&&(this[T]=b,this.updateTextPadding()):this[T]=void 0}rSetter(b,T){this.boxAttr(T,b)}strokeSetter(b,T){this.stroke=b,this.boxAttr(T,b)}"stroke-widthSetter"(b,T){b&&(this.needsBox=!0),this["stroke-width"]=b,this.boxAttr(T,b)}"text-alignSetter"(b){this.textAlign=b}textSetter(b){b!==void 0&&this.text.attr({text:b}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let b,T=this.text,S={},k=this.padding,x=this.bBox=(!p(this.widthSetting)||!p(this.heightSetting)||this.textAlign)&&h(T.textStr)?T.getBBox(void 0,0):y.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||x.height||0)+2*k;let A=this.renderer.fontMetrics(T);if(this.baselineOffset=k+Math.min((this.text.firstLineMetrics||A).b,x.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-A.h)/2),this.needsBox&&!T.textPath){if(!this.box){let D=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();D.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),D.add(this)}b=this.getCrispAdjust(),S.x=b,S.y=(this.baseline?-this.baselineOffset:0)+b,S.width=Math.round(this.width),S.height=Math.round(this.height),this.box.attr(r(S,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let b=this.text;if(!b.textPath){this.updateBoxSize();let T=this.baseline?0:this.baselineOffset,S=g(this.paddingLeft,this.padding);h(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(S+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(S!==b.x||T!==b.y)&&(b.attr("x",S),b.hasBoxWidthChanged&&(this.bBox=b.getBBox(!0)),T!==void 0&&b.attr("y",T)),b.x=S,b.y=T}}widthSetter(b){this.widthSetting=p(b)?b:void 0,this.doUpdate=!0}getPaddedWidth(){let b=this.padding,T=g(this.paddingLeft,b),S=g(this.paddingRight,b);return(this.widthSetting||this.bBox.width||0)+T+S}xSetter(b){this.x=b,this.alignFactor&&(b-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(b),this.attr("translateX",this.xSetting)}ySetter(b){this.ySetting=this.y=Math.round(b),this.attr("translateY",this.ySetting)}}return y.emptyBBox={width:0,height:0,x:0,y:0},y.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],y}),s(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(a){let{defined:l,isNumber:h,pick:r}=a;function p(v,y,C,b,T){let S=[];if(T){let k=T.start||0,x=r(T.r,C),A=r(T.r,b||C),D=2e-4/(T.borderRadius?1:Math.max(x,1)),w=Math.abs((T.end||0)-k-2*Math.PI)<D,I=(T.end||0)-(w?D:0),N=T.innerR,q=r(T.open,w),Y=Math.cos(k),X=Math.sin(k),B=Math.cos(I),j=Math.sin(I),O=r(T.longArc,I-k-Math.PI<D?0:1),R=["A",x,A,0,O,r(T.clockwise,1),v+x*B,y+A*j];R.params={start:k,end:I,cx:v,cy:y},S.push(["M",v+x*Y,y+A*X],R),l(N)&&((R=["A",N,N,0,O,l(T.clockwise)?1-T.clockwise:0,v+N*Y,y+N*X]).params={start:I,end:k,cx:v,cy:y},S.push(q?["M",v+N*B,y+N*j]:["L",v+N*B,y+N*j],R)),q||S.push(["Z"])}return S}function m(v,y,C,b,T){return T&&T.r?g(v,y,C,b,T):[["M",v,y],["L",v+C,y],["L",v+C,y+b],["L",v,y+b],["Z"]]}function g(v,y,C,b,T){let S=(T==null?void 0:T.r)||0;return[["M",v+S,y],["L",v+C-S,y],["A",S,S,0,0,1,v+C,y+S],["L",v+C,y+b-S],["A",S,S,0,0,1,v+C-S,y+b],["L",v+S,y+b],["A",S,S,0,0,1,v,y+b-S],["L",v,y+S],["A",S,S,0,0,1,v+S,y],["Z"]]}return{arc:p,callout:function(v,y,C,b,T){let S=Math.min(T&&T.r||0,C,b),k=S+6,x=T&&T.anchorX,A=T&&T.anchorY||0,D=g(v,y,C,b,{r:S});if(!h(x)||x<C&&x>0&&A<b&&A>0)return D;if(v+x>C-k)if(A>y+k&&A<y+b-k)D.splice(3,1,["L",v+C,A-6],["L",v+C+6,A],["L",v+C,A+6],["L",v+C,y+b-S]);else if(x<C){let w=A<y+k,I=w?y:y+b;D.splice(w?2:5,0,["L",x,A],["L",v+C-S,I])}else D.splice(3,1,["L",v+C,b/2],["L",x,A],["L",v+C,b/2],["L",v+C,y+b-S]);else if(v+x<k)if(A>y+k&&A<y+b-k)D.splice(7,1,["L",v,A+6],["L",v-6,A],["L",v,A-6],["L",v,y+S]);else if(x>0){let w=A<y+k,I=w?y:y+b;D.splice(w?1:6,0,["L",x,A],["L",v+S,I])}else D.splice(7,1,["L",v,b/2],["L",x,A],["L",v,b/2],["L",v,y+S]);else A>b&&x<C-k?D.splice(5,1,["L",x+6,y+b],["L",x,y+b+6],["L",x-6,y+b],["L",v+S,y+b]):A<0&&x>k&&D.splice(1,1,["L",x-6,y],["L",x,y-6],["L",x+6,y],["L",C-S,y]);return D},circle:function(v,y,C,b){return p(v+C/2,y+b/2,C/2,b/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(v,y,C,b){return[["M",v+C/2,y],["L",v+C,y+b/2],["L",v+C/2,y+b],["L",v,y+b/2],["Z"]]},rect:m,roundedRect:g,square:m,triangle:function(v,y,C,b){return[["M",v+C/2,y],["L",v+C,y+b],["L",v,y+b],["Z"]]},"triangle-down":function(v,y,C,b){return[["M",v,y],["L",v+C,y],["L",v+C/2,y+b],["Z"]]}}}),s(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{doc:r,SVG_NS:p,win:m}=l,{attr:g,extend:v,fireEvent:y,isString:C,objectEach:b,pick:T}=h;return class{constructor(S){let k=S.styles;this.renderer=S.renderer,this.svgElement=S,this.width=S.textWidth,this.textLineHeight=k&&k.lineHeight,this.textOutline=k&&k.textOutline,this.ellipsis=!!(k&&k.textOverflow==="ellipsis"),this.noWrap=!!(k&&k.whiteSpace==="nowrap")}buildSVG(){let S=this.svgElement,k=S.element,x=S.renderer,A=T(S.textStr,"").toString(),D=A.indexOf("<")!==-1,w=k.childNodes,I=!S.added&&x.box,N=[A,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,S.getStyle("font-size"),this.width].join(",");if(N!==S.textCache){S.textCache=N,delete S.actualWidth;for(let q=w.length;q--;)k.removeChild(w[q]);if(D||this.ellipsis||this.width||S.textPath||A.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(A))){if(A!==""){I&&I.appendChild(k);let q=new a(A);this.modifyTree(q.nodes),q.addToDOM(k),this.modifyDOM(),this.ellipsis&&(k.textContent||"").indexOf("")!==-1&&S.attr("title",this.unescapeEntities(S.textStr||"",["&lt;","&gt;"])),I&&I.removeChild(k)}}else k.appendChild(r.createTextNode(this.unescapeEntities(A)));C(this.textOutline)&&S.applyTextOutline&&S.applyTextOutline(this.textOutline)}}modifyDOM(){let S,k=this.svgElement,x=g(k.element,"x");for(k.firstLineMetrics=void 0;(S=k.element.firstChild)&&/^[\s\u200B]*$/.test(S.textContent||" ");)k.element.removeChild(S);[].forEach.call(k.element.querySelectorAll("tspan.highcharts-br"),(I,N)=>{I.nextSibling&&I.previousSibling&&(N===0&&I.previousSibling.nodeType===1&&(k.firstLineMetrics=k.renderer.fontMetrics(I.previousSibling)),g(I,{dy:this.getLineHeight(I.nextSibling),x}))});let A=this.width||0;if(!A)return;let D=(I,N)=>{let q=I.textContent||"",Y=q.replace(/([^\^])-/g,"$1- ").split(" "),X=!this.noWrap&&(Y.length>1||k.element.childNodes.length>1),B=this.getLineHeight(N),j=0,O=k.actualWidth;if(this.ellipsis)q&&this.truncate(I,q,void 0,0,Math.max(0,A-.8*B),(R,L)=>R.substring(0,L)+"");else if(X){let R=[],L=[];for(;N.firstChild&&N.firstChild!==I;)L.push(N.firstChild),N.removeChild(N.firstChild);for(;Y.length;)Y.length&&!this.noWrap&&j>0&&(R.push(I.textContent||""),I.textContent=Y.join(" ").replace(/- /g,"-")),this.truncate(I,void 0,Y,j===0&&O||0,A,(G,$)=>Y.slice(0,$).join(" ").replace(/- /g,"-")),O=k.actualWidth,j++;L.forEach(G=>{N.insertBefore(G,I)}),R.forEach(G=>{N.insertBefore(r.createTextNode(G),I);let $=r.createElementNS(p,"tspan");$.textContent="",g($,{dy:B,x}),N.insertBefore($,I)})}},w=I=>{[].slice.call(I.childNodes).forEach(N=>{N.nodeType===m.Node.TEXT_NODE?D(N,I):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(k.actualWidth=0),w(N))})};w(k.element)}getLineHeight(S){let k=S.nodeType===m.Node.TEXT_NODE?S.parentElement:S;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(k||this.svgElement.element).h}modifyTree(S){let k=(x,A)=>{let{attributes:D={},children:w,style:I={},tagName:N}=x,q=this.renderer.styledMode;if(N==="b"||N==="strong"?q?D.class="highcharts-strong":I.fontWeight="bold":(N==="i"||N==="em")&&(q?D.class="highcharts-emphasized":I.fontStyle="italic"),I&&I.color&&(I.fill=I.color),N==="br"){D.class="highcharts-br",x.textContent="";let Y=S[A+1];Y&&Y.textContent&&(Y.textContent=Y.textContent.replace(/^ +/gm,""))}else N==="a"&&w&&w.some(Y=>Y.tagName==="#text")&&(x.children=[{children:w,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(x.tagName="tspan"),v(x,{attributes:D,style:I}),w&&w.filter(Y=>Y.tagName!=="#text").forEach(k)};S.forEach(k),y(this.svgElement,"afterModifyTree",{nodes:S})}truncate(S,k,x,A,D,w){let I,N,q=this.svgElement,{rotation:Y}=q,X=[],B=x?1:0,j=(k||x||"").length,O=j,R=function(L,G){let $=G||L,F=S.parentNode;if(F&&X[$]===void 0&&F.getSubStringLength)try{X[$]=A+F.getSubStringLength(0,x?$+1:$)}catch{}return X[$]};if(q.rotation=0,A+(N=R(S.textContent.length))>D){for(;B<=j;)O=Math.ceil((B+j)/2),x&&(I=w(x,O)),N=R(O,I&&I.length-1),B===j?B=j+1:N>D?j=O-1:B=O;j===0?S.textContent="":k&&j===k.length-1||(S.textContent=I||w(k||x,O))}x&&x.splice(0,O),q.actualWidth=N,q.rotation=Y}unescapeEntities(S,k){return b(this.renderer.escapes,function(x,A){k&&k.indexOf(x)!==-1||(S=S.toString().replace(RegExp(x,"g"),A))}),S}}}),s(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y,C){let b,{defaultOptions:T}=l,{charts:S,deg2rad:k,doc:x,isFirefox:A,isMS:D,isWebKit:w,noop:I,SVG_NS:N,symbolSizes:q,win:Y}=r,{addEvent:X,attr:B,createElement:j,crisp:O,css:R,defined:L,destroyObjectProperties:G,extend:$,isArray:F,isNumber:H,isObject:W,isString:re,merge:he,pick:ie,pInt:ae,replaceNested:Ce,uniqueKey:ge}=C;class ke{constructor(Q,le,_e,J,ne,ue,ye){let we,ze,Ee=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Ie=Ee.element;ye||Ee.css(this.getStyle(J||{})),Q.appendChild(Ie),B(Q,"dir","ltr"),Q.innerHTML.indexOf("xmlns")===-1&&B(Ie,"xmlns",this.SVG_NS),this.box=Ie,this.boxWrapper=Ee,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ue,this.forExport=ne,this.styledMode=ye,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Ee.getStyle("font-size"),this.setSize(le,_e,!1),A&&Q.getBoundingClientRect&&((we=function(){R(Q,{left:0,top:0}),ze=Q.getBoundingClientRect(),R(Q,{left:Math.ceil(ze.left)-ze.left+"px",top:Math.ceil(ze.top)-ze.top+"px"})})(),this.unSubPixelFix=X(Y,"resize",we))}definition(Q){return new a([Q]).addToDOM(this.defs.element)}getReferenceURL(){if((A||w)&&x.getElementsByTagName("base").length){if(!L(b)){let Q=ge(),le=new a([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:Q},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${Q})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(x.body);R(le,{position:"fixed",top:0,left:0,zIndex:9e5});let _e=x.elementFromPoint(6,6);b=(_e&&_e.id)==="hitme",x.body.removeChild(le)}if(b)return Ce(Y.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(Q){return this.style=$({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},Q),this.style}setStyle(Q){this.boxWrapper.css(this.getStyle(Q))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let Q=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=Q.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(Q){return new this.Element(this,Q)}getRadialAttr(Q,le){return{cx:Q[0]-Q[2]/2+(le.cx||0)*Q[2],cy:Q[1]-Q[2]/2+(le.cy||0)*Q[2],r:(le.r||0)*Q[2]}}shadowDefinition(Q){let le=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(Q).map(J=>`${J}-${Q[J]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),_e=he({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},Q);return this.defs.element.querySelector(`#${le}`)||this.definition({tagName:"filter",attributes:{id:le,filterUnits:_e.filterUnits},children:this.getShadowFilterContent(_e)}),le}getShadowFilterContent(Q){return[{tagName:"feDropShadow",attributes:{dx:Q.offsetX,dy:Q.offsetY,"flood-color":Q.color,"flood-opacity":Math.min(5*Q.opacity,1),stdDeviation:Q.width/2}}]}buildText(Q){new y(Q).buildSVG()}getContrast(Q){let le=h.parse(Q).rgba.map(J=>{let ne=J/255;return ne<=.03928?ne/12.92:Math.pow((ne+.055)/1.055,2.4)}),_e=.2126*le[0]+.7152*le[1]+.0722*le[2];return 1.05/(_e+.05)>(_e+.05)/.05?"#FFFFFF":"#000000"}button(Q,le,_e,J,ne={},ue,ye,we,ze,Ee){let Ie=this.label(Q,le,_e,ze,void 0,void 0,Ee,void 0,"button"),Fe=this.styledMode,He=arguments,Ae=0;ne=he(T.global.buttonTheme,ne),Fe&&(delete ne.fill,delete ne.stroke,delete ne["stroke-width"]);let xe=ne.states||{},me=ne.style||{};delete ne.states,delete ne.style;let Me=[a.filterUserAttributes(ne)],De=[me];return Fe||["hover","select","disabled"].forEach((Pe,je)=>{Me.push(he(Me[0],a.filterUserAttributes(He[je+5]||xe[Pe]||{}))),De.push(Me[je+1].style),delete Me[je+1].style}),X(Ie.element,D?"mouseover":"mouseenter",function(){Ae!==3&&Ie.setState(1)}),X(Ie.element,D?"mouseout":"mouseleave",function(){Ae!==3&&Ie.setState(Ae)}),Ie.setState=(Pe=0)=>{if(Pe!==1&&(Ie.state=Ae=Pe),Ie.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Pe]),!Fe){Ie.attr(Me[Pe]);let je=De[Pe];W(je)&&Ie.css(je)}},Ie.attr(Me[0]),!Fe&&(Ie.css($({cursor:"default"},me)),Ee&&Ie.text.css({pointerEvents:"none"})),Ie.on("touchstart",Pe=>Pe.stopPropagation()).on("click",function(Pe){Ae!==3&&J.call(Ie,Pe)})}crispLine(Q,le){let[_e,J]=Q;return L(_e[1])&&_e[1]===J[1]&&(_e[1]=J[1]=O(_e[1],le)),L(_e[2])&&_e[2]===J[2]&&(_e[2]=J[2]=O(_e[2],le)),Q}path(Q){let le=this.styledMode?{}:{fill:"none"};return F(Q)?le.d=Q:W(Q)&&$(le,Q),this.createElement("path").attr(le)}circle(Q,le,_e){let J=W(Q)?Q:Q===void 0?{}:{x:Q,y:le,r:_e},ne=this.createElement("circle");return ne.xSetter=ne.ySetter=function(ue,ye,we){we.setAttribute("c"+ye,ue)},ne.attr(J)}arc(Q,le,_e,J,ne,ue){let ye;W(Q)?(le=(ye=Q).y,_e=ye.r,J=ye.innerR,ne=ye.start,ue=ye.end,Q=ye.x):ye={innerR:J,start:ne,end:ue};let we=this.symbol("arc",Q,le,_e,_e,ye);return we.r=_e,we}rect(Q,le,_e,J,ne,ue){let ye=W(Q)?Q:Q===void 0?{}:{x:Q,y:le,r:ne,width:Math.max(_e||0,0),height:Math.max(J||0,0)},we=this.createElement("rect");return this.styledMode||(ue!==void 0&&(ye["stroke-width"]=ue,$(ye,we.crisp(ye))),ye.fill="none"),we.rSetter=function(ze,Ee,Ie){we.r=ze,B(Ie,{rx:ze,ry:ze})},we.rGetter=function(){return we.r||0},we.attr(ye)}roundedRect(Q){return this.symbol("roundedRect").attr(Q)}setSize(Q,le,_e){this.width=Q,this.height=le,this.boxWrapper.animate({width:Q,height:le},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ie(_e,!0)?void 0:0}),this.alignElements()}g(Q){let le=this.createElement("g");return Q?le.attr({class:"highcharts-"+Q}):le}image(Q,le,_e,J,ne,ue){let ye={preserveAspectRatio:"none"};H(le)&&(ye.x=le),H(_e)&&(ye.y=_e),H(J)&&(ye.width=J),H(ne)&&(ye.height=ne);let we=this.createElement("image").attr(ye),ze=function(Ee){we.attr({href:Q}),ue.call(we,Ee)};if(ue){we.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Ee=new Y.Image;X(Ee,"load",ze),Ee.src=Q,Ee.complete&&ze({})}else we.attr({href:Q});return we}symbol(Q,le,_e,J,ne,ue){let ye,we,ze,Ee,Ie=this,Fe=/^url\((.*?)\)$/,He=Fe.test(Q),Ae=!He&&(this.symbols[Q]?Q:"circle"),xe=Ae&&this.symbols[Ae];if(xe)typeof le=="number"&&(we=xe.call(this.symbols,le||0,_e||0,J||0,ne||0,ue)),ye=this.path(we),Ie.styledMode||ye.attr("fill","none"),$(ye,{symbolName:Ae||void 0,x:le,y:_e,width:J,height:ne}),ue&&$(ye,ue);else if(He){ze=Q.match(Fe)[1];let me=ye=this.image(ze);me.imgwidth=ie(ue&&ue.width,q[ze]&&q[ze].width),me.imgheight=ie(ue&&ue.height,q[ze]&&q[ze].height),Ee=Me=>Me.attr({width:Me.width,height:Me.height}),["width","height"].forEach(Me=>{me[`${Me}Setter`]=function(De,Pe){this[Pe]=De;let{alignByTranslate:je,element:Xe,width:tt,height:rt,imgwidth:dt,imgheight:gt}=this,wt=Pe==="width"?dt:gt,Rt=1;ue&&ue.backgroundSize==="within"&&tt&&rt&&dt&&gt?(Rt=Math.min(tt/dt,rt/gt),B(Xe,{width:Math.round(dt*Rt),height:Math.round(gt*Rt)})):Xe&&wt&&Xe.setAttribute(Pe,wt),!je&&dt&&gt&&this.translate(((tt||0)-dt*Rt)/2,((rt||0)-gt*Rt)/2)}}),L(le)&&me.attr({x:le,y:_e}),me.isImg=!0,me.symbolUrl=Q,L(me.imgwidth)&&L(me.imgheight)?Ee(me):(me.attr({width:0,height:0}),j("img",{onload:function(){let Me=S[Ie.chartIndex];this.width===0&&(R(this,{position:"absolute",top:"-999em"}),x.body.appendChild(this)),q[ze]={width:this.width,height:this.height},me.imgwidth=this.width,me.imgheight=this.height,me.element&&Ee(me),this.parentNode&&this.parentNode.removeChild(this),Ie.imgCount--,Ie.imgCount||!Me||Me.hasLoaded||Me.onload()},src:ze}),this.imgCount++)}return ye}clipRect(Q,le,_e,J){return this.rect(Q,le,_e,J,0)}text(Q,le,_e,J){let ne={};if(J&&(this.allowHTML||!this.forExport))return this.html(Q,le,_e);ne.x=Math.round(le||0),_e&&(ne.y=Math.round(_e)),L(Q)&&(ne.text=Q);let ue=this.createElement("text").attr(ne);return J&&(!this.forExport||this.allowHTML)||(ue.xSetter=function(ye,we,ze){let Ee=ze.getElementsByTagName("tspan"),Ie=ze.getAttribute(we);for(let Fe=0,He;Fe<Ee.length;Fe++)(He=Ee[Fe]).getAttribute(we)===Ie&&He.setAttribute(we,ye);ze.setAttribute(we,ye)}),ue}fontMetrics(Q){let le=ae(m.prototype.getStyle.call(Q,"font-size")||0),_e=le<24?le+3:Math.round(1.2*le),J=Math.round(.8*_e);return{h:_e,b:J,f:le}}rotCorr(Q,le,_e){let J=Q;return le&&_e&&(J=Math.max(J*Math.cos(le*k),4)),{x:-Q/3*Math.sin(le*k),y:J}}pathToSegments(Q){let le=[],_e=[],J={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let ne=0;ne<Q.length;ne++)re(_e[0])&&H(Q[ne])&&_e.length===J[_e[0].toUpperCase()]&&Q.splice(ne,0,_e[0].replace("M","L").replace("m","l")),typeof Q[ne]=="string"&&(_e.length&&le.push(_e.slice(0)),_e.length=0),_e.push(Q[ne]);return le.push(_e.slice(0)),le}label(Q,le,_e,J,ne,ue,ye,we,ze){return new g(this,Q,le,_e,J,ne,ue,ye,we,ze)}alignElements(){this.alignedObjects.forEach(Q=>Q.align())}}return $(ke.prototype,{Element:m,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:v,draw:I}),p.registerRendererType("svg",ke,!0),ke}),s(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{composed:p}=l,{attr:m,css:g,createElement:v,defined:y,extend:C,pInt:b,pushUnique:T}=r;function S(D,w,I){var q;let N=((q=this.div)==null?void 0:q.style)||I.style;h.prototype[`${w}Setter`].call(this,D,w,I),N&&(N[w]=D)}let k=(D,w)=>{var I;if(!D.div){let N=m(D.element,"class"),q=D.css,Y=v("div",N?{className:N}:void 0,{position:"absolute",left:`${D.translateX||0}px`,top:`${D.translateY||0}px`,...D.styles,display:D.display,opacity:D.opacity,visibility:D.visibility},((I=D.parentGroup)==null?void 0:I.div)||w);D.classSetter=(X,B,j)=>{j.setAttribute("class",X),Y.className=X},D.translateXSetter=D.translateYSetter=(X,B)=>{D[B]=X,Y.style[B==="translateX"?"left":"top"]=`${X}px`,D.doTransform=!0},D.opacitySetter=D.visibilitySetter=S,D.css=X=>(q.call(D,X),X.cursor&&(Y.style.cursor=X.cursor),X.pointerEvents&&(Y.style.pointerEvents=X.pointerEvents),D),D.on=function(){return h.prototype.on.apply({element:Y,onEvents:D.onEvents},arguments),D},D.div=Y}return D.div};class x extends h{static compose(w){T(p,this.compose)&&(w.prototype.html=function(I,N,q){return new x(this,"span").attr({text:I,x:Math.round(N),y:Math.round(q)})})}constructor(w,I){super(w,I),this.css({position:"absolute",...w.styledMode?{}:{fontFamily:w.style.fontFamily,fontSize:w.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(w,I,N){this.xCorr=-w*N,this.yCorr=-I}css(w){let I,{element:N}=this,q=N.tagName==="SPAN"&&w&&"width"in w,Y=q&&w.width;return q&&(delete w.width,this.textWidth=b(Y)||void 0,I=!0),(w==null?void 0:w.textOverflow)==="ellipsis"&&(w.whiteSpace="nowrap",w.overflow="hidden"),C(this.styles,w),g(N,w),I&&this.updateTransform(),this}htmlGetBBox(){let{element:w}=this;return{x:w.offsetLeft,y:w.offsetTop,width:w.offsetWidth,height:w.offsetHeight}}updateTransform(){var H;if(!this.added){this.alignOnAdd=!0;return}let{element:w,renderer:I,rotation:N,rotationOriginX:q,rotationOriginY:Y,styles:X,textAlign:B="left",textWidth:j,translateX:O=0,translateY:R=0,x:L=0,y:G=0}=this,$={left:0,center:.5,right:1}[B],F=X.whiteSpace;if(g(w,{marginLeft:`${O}px`,marginTop:`${R}px`}),w.tagName==="SPAN"){let W=[N,B,w.innerHTML,j,this.textAlign].join(","),re=-(((H=this.parentGroup)==null?void 0:H.padding)*1)||0,he,ie=!1;if(j!==this.oldTextWidth){let K=this.textPxLength?this.textPxLength:(g(w,{width:"",whiteSpace:F||"nowrap"}),w.offsetWidth),Q=j||0;(Q>this.oldTextWidth||K>Q)&&(/[ \-]/.test(w.textContent||w.innerText)||w.style.textOverflow==="ellipsis")&&(g(w,{width:K>Q||N?j+"px":"auto",display:"block",whiteSpace:F||"normal"}),this.oldTextWidth=j,ie=!0)}this.hasBoxWidthChanged=ie,W!==this.cTT&&(he=I.fontMetrics(w).b,y(N)&&(N!==(this.oldRotation||0)||B!==this.oldAlign)&&this.setSpanRotation(N,re,re),this.getSpanCorrection(!y(N)&&this.textPxLength||w.offsetWidth,he,$));let{xCorr:ae=0,yCorr:Ce=0}=this,ge=(q??L)-ae-L-re,ke=(Y??G)-Ce-G-re;g(w,{left:`${L+ae}px`,top:`${G+Ce}px`,transformOrigin:`${ge}px ${ke}px`}),this.cTT=W,this.oldRotation=N,this.oldAlign=B}}setSpanRotation(w,I,N){g(this.element,{transform:`rotate(${w}deg)`,transformOrigin:`${I}% ${N}px`})}add(w){let I,N=this.renderer.box.parentNode,q=[];if(this.parentGroup=w,w&&!(I=w.div)){let Y=w;for(;Y;)q.push(Y),Y=Y.parentGroup;for(let X of q.reverse())I=k(X,N)}return(I||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(w){w!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,a.setElementHTML(this.element,w??""),this.textStr=w,this.doTransform=!0)}alignSetter(w){this.alignValue=this.textAlign=w,this.doTransform=!0}xSetter(w,I){this[I]=w,this.doTransform=!0}}let A=x.prototype;return A.visibilitySetter=A.opacitySetter=S,A.ySetter=A.rotationSetter=A.rotationOriginXSetter=A.rotationOriginYSetter=A.xSetter,x}),s(t,"Core/Axis/AxisDefaults.js",[],function(){var a,l;return(l=a||(a={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},l.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:h}=this.axis.chart;return h(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},a}),s(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(a){var l;let{addEvent:h,isFunction:r,objectEach:p,removeEvent:m}=a;return(l||(l={})).registerEventOptions=function(g,v){g.eventOptions=g.eventOptions||{},p(v.events,function(y,C){g.eventOptions[C]!==y&&(g.eventOptions[C]&&(m(g,C,g.eventOptions[C]),delete g.eventOptions[C]),r(y)&&(g.eventOptions[C]=y,h(g,C,y,{order:0})))})},l}),s(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{deg2rad:r}=l,{clamp:p,correctFloat:m,defined:g,destroyObjectProperties:v,extend:y,fireEvent:C,isNumber:b,merge:T,objectEach:S,pick:k}=h;return class{constructor(x,A,D,w,I){this.isNew=!0,this.isNewLabel=!0,this.axis=x,this.pos=A,this.type=D||"",this.parameters=I||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,C(this,"init"),D||w||this.addLabel()}addLabel(){let x=this,A=x.axis,D=A.options,w=A.chart,I=A.categories,N=A.logarithmic,q=A.names,Y=x.pos,X=k(x.options&&x.options.labels,D.labels),B=A.tickPositions,j=Y===B[0],O=Y===B[B.length-1],R=(!X.step||X.step===1)&&A.tickInterval===1,L=B.info,G=x.label,$,F,H,W=this.parameters.category||(I?k(I[Y],q[Y],Y):Y);N&&b(W)&&(W=m(N.lin2log(W))),A.dateTime&&(L?$=(F=w.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&L.higherRanks[Y]||L.unitName])).main:b(W)&&($=A.dateTime.getXDateFormat(W,D.dateTimeLabelFormats||{}))),x.isFirst=j,x.isLast=O;let re={axis:A,chart:w,dateTimeLabelFormat:$,isFirst:j,isLast:O,pos:Y,tick:x,tickPositionInfo:L,value:W};C(this,"labelFormat",re);let he=Ce=>X.formatter?X.formatter.call(Ce,Ce):X.format?(Ce.text=A.defaultLabelFormatter.call(Ce),a.format(X.format,Ce,w)):A.defaultLabelFormatter.call(Ce),ie=he.call(re,re),ae=F&&F.list;ae?x.shortenLabel=function(){for(H=0;H<ae.length;H++)if(y(re,{dateTimeLabelFormat:ae[H]}),G.attr({text:he.call(re,re)}),G.getBBox().width<A.getSlotWidth(x)-2*(X.padding||0))return;G.attr({text:""})}:x.shortenLabel=void 0,R&&A._addedPlotLB&&x.moveLabel(ie,X),g(G)||x.movedLabel?G&&G.textStr!==ie&&!R&&(!G.textWidth||X.style.width||G.styles.width||G.css({width:null}),G.attr({text:ie}),G.textPxLength=G.getBBox().width):(x.label=G=x.createLabel(ie,X),x.rotation=0)}createLabel(x,A,D){let w=this.axis,I=w.chart,N=g(x)&&A.enabled?I.renderer.text(x,D==null?void 0:D.x,D==null?void 0:D.y,A.useHTML).add(w.labelGroup):void 0;return N&&(I.styledMode||N.css(T(A.style)),N.textPxLength=N.getBBox().width),N}destroy(){v(this,this.axis)}getPosition(x,A,D,w){let I=this.axis,N=I.chart,q=w&&N.oldChartHeight||N.chartHeight,Y={x:x?m(I.translate(A+D,void 0,void 0,w)+I.transB):I.left+I.offset+(I.opposite?(w&&N.oldChartWidth||N.chartWidth)-I.right-I.left:0),y:x?q-I.bottom+I.offset-(I.opposite?I.height:0):m(q-I.translate(A+D,void 0,void 0,w)-I.transB)};return Y.y=p(Y.y,-1e9,1e9),C(this,"afterGetPosition",{pos:Y}),Y}getLabelPosition(x,A,D,w,I,N,q,Y){let X,B,j=this.axis,O=j.transA,R=j.isLinked&&j.linkedParent?j.linkedParent.reversed:j.reversed,L=j.staggerLines,G=j.tickRotCorr||{x:0,y:0},$=w||j.reserveSpaceDefault?0:-j.labelOffset*(j.labelAlign==="center"?.5:1),F=I.distance,H={};return X=j.side===0?D.rotation?-F:-D.getBBox().height:j.side===2?G.y+F:Math.cos(D.rotation*r)*(G.y-D.getBBox(!1,0).height/2),g(I.y)&&(X=j.side===0&&j.horiz?I.y+X:I.y),x=x+k(I.x,[0,1,0,-1][j.side]*F)+$+G.x-(N&&w?N*O*(R?-1:1):0),A=A+X-(N&&!w?N*O*(R?1:-1):0),L&&(B=q/(Y||1)%L,j.opposite&&(B=L-B-1),A+=B*(j.labelOffset/L)),H.x=x,H.y=Math.round(A),C(this,"afterGetLabelPosition",{pos:H,tickmarkOffset:N,index:q}),H}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(x,A,D,w,I=!1,N){return N.crispLine([["M",x,A],["L",x+(I?0:-D),A+(I?D:0)]],w)}handleOverflow(x){let A=this.axis,D=A.options.labels,w=x.x,I=A.chart.chartWidth,N=A.chart.spacing,q=k(A.labelLeft,Math.min(A.pos,N[3])),Y=k(A.labelRight,Math.max(A.isRadial?0:A.pos+A.len,I-N[1])),X=this.label,B=this.rotation,j={left:0,center:.5,right:1}[A.labelAlign||X.attr("align")],O=X.getBBox().width,R=A.getSlotWidth(this),L={},G=R,$=1,F,H,W;B||D.overflow!=="justify"?B<0&&w-j*O<q?W=Math.round(w/Math.cos(B*r)-q):B>0&&w+j*O>Y&&(W=Math.round((I-w)/Math.cos(B*r))):(F=w-j*O,H=w+(1-j)*O,F<q?G=x.x+G*(1-j)-q:H>Y&&(G=Y-x.x+G*j,$=-1),(G=Math.min(R,G))<R&&A.labelAlign==="center"&&(x.x+=$*(R-G-j*(R-Math.min(O,G)))),(O>G||A.autoRotation&&(X.styles||{}).width)&&(W=G)),W&&(this.shortenLabel?this.shortenLabel():(L.width=Math.floor(W)+"px",(D.style||{}).textOverflow||(L.textOverflow="ellipsis"),X.css(L)))}moveLabel(x,A){let D=this,w=D.label,I=D.axis,N=!1,q;w&&w.textStr===x?(D.movedLabel=w,N=!0,delete D.label):S(I.ticks,function(Y){N||Y.isNew||Y===D||!Y.label||Y.label.textStr!==x||(D.movedLabel=Y.label,N=!0,Y.labelPos=D.movedLabel.xy,delete Y.label)}),!N&&(D.labelPos||w)&&(q=D.labelPos||w.xy,D.movedLabel=D.createLabel(x,A,q),D.movedLabel&&D.movedLabel.attr({opacity:0}))}render(x,A,D){let w=this.axis,I=w.horiz,N=this.pos,q=k(this.tickmarkOffset,w.tickmarkOffset),Y=this.getPosition(I,N,q,A),X=Y.x,B=Y.y,j=w.pos,O=j+w.len,R=I?X:B;!w.chart.polar&&this.isNew&&(m(R)<j||R>O)&&(D=0);let L=k(D,this.label&&this.label.newOpacity,1);D=k(D,1),this.isActive=!0,this.renderGridLine(A,D),this.renderMark(Y,D),this.renderLabel(Y,A,L,x),this.isNew=!1,C(this,"afterRender")}renderGridLine(x,A){let D=this.axis,w=D.options,I={},N=this.pos,q=this.type,Y=k(this.tickmarkOffset,D.tickmarkOffset),X=D.chart.renderer,B=this.gridLine,j,O=w.gridLineWidth,R=w.gridLineColor,L=w.gridLineDashStyle;this.type==="minor"&&(O=w.minorGridLineWidth,R=w.minorGridLineColor,L=w.minorGridLineDashStyle),B||(D.chart.styledMode||(I.stroke=R,I["stroke-width"]=O||0,I.dashstyle=L),q||(I.zIndex=1),x&&(A=0),this.gridLine=B=X.path().attr(I).addClass("highcharts-"+(q?q+"-":"")+"grid-line").add(D.gridGroup)),B&&(j=D.getPlotLinePath({value:N+Y,lineWidth:B.strokeWidth(),force:"pass",old:x,acrossPanes:!1}))&&B[x||this.isNew?"attr":"animate"]({d:j,opacity:A})}renderMark(x,A){let D=this.axis,w=D.options,I=D.chart.renderer,N=this.type,q=D.tickSize(N?N+"Tick":"tick"),Y=x.x,X=x.y,B=k(w[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&D.isXAxis?1:0),j=w[N!=="minor"?"tickColor":"minorTickColor"],O=this.mark,R=!O;q&&(D.opposite&&(q[0]=-q[0]),O||(this.mark=O=I.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(D.axisGroup),D.chart.styledMode||O.attr({stroke:j,"stroke-width":B})),O[R?"attr":"animate"]({d:this.getMarkPath(Y,X,q[0],O.strokeWidth(),D.horiz,I),opacity:A}))}renderLabel(x,A,D,w){let I=this.axis,N=I.horiz,q=I.options,Y=this.label,X=q.labels,B=X.step,j=k(this.tickmarkOffset,I.tickmarkOffset),O=x.x,R=x.y,L=!0;Y&&b(O)&&(Y.xy=x=this.getLabelPosition(O,R,Y,N,X,j,w,B),(!this.isFirst||this.isLast||q.showFirstLabel)&&(!this.isLast||this.isFirst||q.showLastLabel)?!N||X.step||X.rotation||A||D===0||this.handleOverflow(x):L=!1,B&&w%B&&(L=!1),L&&b(x.y)?(x.opacity=D,Y[this.isNewLabel?"attr":"animate"](x).show(!0),this.isNewLabel=!1):(Y.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let x=this.label,A=this.axis;x&&!this.isNew&&(x.animate({opacity:0},void 0,x.destroy),delete this.label),A.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),s(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v){let{animObject:y}=a,{xAxis:C,yAxis:b}=l,{defaultOptions:T}=r,{registerEventOptions:S}=p,{deg2rad:k}=m,{arrayMax:x,arrayMin:A,clamp:D,correctFloat:w,defined:I,destroyObjectProperties:N,erase:q,error:Y,extend:X,fireEvent:B,getClosestDistance:j,insertItem:O,isArray:R,isNumber:L,isString:G,merge:$,normalizeTickInterval:F,objectEach:H,pick:W,relativeLength:re,removeEvent:he,splat:ie,syncTimeout:ae}=v,Ce=(ke,K)=>F(K,void 0,void 0,W(ke.options.allowDecimals,K<.5||ke.tickAmount!==void 0),!!ke.tickAmount);X(T,{xAxis:C,yAxis:$(C,b)});class ge{constructor(K,Q,le){this.init(K,Q,le)}init(K,Q,le=this.coll){let _e=le==="xAxis",J=this.isZAxis||(K.inverted?!_e:_e);this.chart=K,this.horiz=J,this.isXAxis=_e,this.coll=le,B(this,"init",{userOptions:Q}),this.opposite=W(Q.opposite,this.opposite),this.side=W(Q.side,this.side,J?this.opposite?0:2:this.opposite?1:3),this.setOptions(Q);let ne=this.options,ue=ne.labels;this.type??(this.type=ne.type||"linear"),this.uniqueNames??(this.uniqueNames=ne.uniqueNames??!0),B(this,"afterSetType"),this.userOptions=Q,this.minPixelPadding=0,this.reversed=W(ne.reversed,this.reversed),this.visible=ne.visible,this.zoomEnabled=ne.zoomEnabled,this.hasNames=this.type==="category"||ne.categories===!0,this.categories=R(ne.categories)&&ne.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=I(ne.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=ne.minRange||ne.maxZoom,this.range=ne.range,this.offset=ne.offset||0,this.max=void 0,this.min=void 0;let ye=W(ne.crosshair,ie(K.options.tooltip.crosshairs)[_e?0:1]);this.crosshair=ye===!0?{}:ye,K.axes.indexOf(this)===-1&&(_e?K.axes.splice(K.xAxis.length,0,this):K.axes.push(this),O(this,K[this.coll])),K.orderItems(this.coll),this.series=this.series||[],K.inverted&&!this.isZAxis&&_e&&!I(this.reversed)&&(this.reversed=!0),this.labelRotation=L(ue.rotation)?ue.rotation:void 0,S(this,ne),B(this,"afterInit")}setOptions(K){let Q=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=$(Q,T[this.coll],K),B(this,"afterSetOptions",{userOptions:K})}defaultLabelFormatter(){let K=this.axis,{numberFormatter:Q}=this.chart,le=L(this.value)?this.value:NaN,_e=K.chart.time,J=K.categories,ne=this.dateTimeLabelFormat,ue=T.lang,ye=ue.numericSymbols,we=ue.numericSymbolMagnitude||1e3,ze=K.logarithmic?Math.abs(le):K.tickInterval,Ee=ye&&ye.length,Ie,Fe;if(J)Fe=`${this.value}`;else if(ne)Fe=_e.dateFormat(ne,le);else if(Ee&&ye&&ze>=1e3)for(;Ee--&&Fe===void 0;)ze>=(Ie=Math.pow(we,Ee+1))&&10*le%Ie==0&&ye[Ee]!==null&&le!==0&&(Fe=Q(le/Ie,-1)+ye[Ee]);return Fe===void 0&&(Fe=Math.abs(le)>=1e4?Q(le,-1):Q(le,-1,void 0,"")),Fe}getSeriesExtremes(){let K,Q=this;B(this,"getSeriesExtremes",null,function(){Q.hasVisibleSeries=!1,Q.dataMin=Q.dataMax=Q.threshold=void 0,Q.softThreshold=!Q.isXAxis,Q.series.forEach(le=>{if(le.reserveSpace()){let _e=le.options,J,ne=_e.threshold,ue,ye;if(Q.hasVisibleSeries=!0,Q.positiveValuesOnly&&0>=(ne||0)&&(ne=void 0),Q.isXAxis)(J=le.xData)&&J.length&&(J=Q.logarithmic?J.filter(we=>we>0):J,ue=(K=le.getXExtremes(J)).min,ye=K.max,L(ue)||ue instanceof Date||(J=J.filter(L),ue=(K=le.getXExtremes(J)).min,ye=K.max),J.length&&(Q.dataMin=Math.min(W(Q.dataMin,ue),ue),Q.dataMax=Math.max(W(Q.dataMax,ye),ye)));else{let we=le.applyExtremes();L(we.dataMin)&&(ue=we.dataMin,Q.dataMin=Math.min(W(Q.dataMin,ue),ue)),L(we.dataMax)&&(ye=we.dataMax,Q.dataMax=Math.max(W(Q.dataMax,ye),ye)),I(ne)&&(Q.threshold=ne),(!_e.softThreshold||Q.positiveValuesOnly)&&(Q.softThreshold=!1)}}})}),B(this,"afterGetSeriesExtremes")}translate(K,Q,le,_e,J,ne){var Ae;let ue=this.linkedParent||this,ye=_e&&ue.old?ue.old.min:ue.min;if(!L(ye))return NaN;let we=ue.minPixelPadding,ze=(ue.isOrdinal||((Ae=ue.brokenAxis)==null?void 0:Ae.hasBreaks)||ue.logarithmic&&J)&&ue.lin2val,Ee=1,Ie=0,Fe=_e&&ue.old?ue.old.transA:ue.transA,He=0;return Fe||(Fe=ue.transA),le&&(Ee*=-1,Ie=ue.len),ue.reversed&&(Ee*=-1,Ie-=Ee*(ue.sector||ue.len)),Q?(He=(K=K*Ee+Ie-we)/Fe+ye,ze&&(He=ue.lin2val(He))):(ze&&(K=ue.val2lin(K)),He=Ee*(K-ye)*Fe+Ie+Ee*we+(L(ne)?Fe*ne:0),ue.isRadial||(He=w(He))),He}toPixels(K,Q){return this.translate(K,!1,!this.horiz,void 0,!0)+(Q?0:this.pos)}toValue(K,Q){return this.translate(K-(Q?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(K){let Q=this,le=Q.chart,_e=Q.left,J=Q.top,ne=K.old,ue=K.value,ye=K.lineWidth,we=ne&&le.oldChartHeight||le.chartHeight,ze=ne&&le.oldChartWidth||le.chartWidth,Ee=Q.transB,Ie=K.translatedValue,Fe=K.force,He,Ae,xe,me,Me;function De(je,Xe,tt){return Fe!=="pass"&&(je<Xe||je>tt)&&(Fe?je=D(je,Xe,tt):Me=!0),je}let Pe={value:ue,lineWidth:ye,old:ne,force:Fe,acrossPanes:K.acrossPanes,translatedValue:Ie};return B(this,"getPlotLinePath",Pe,function(je){He=xe=(Ie=D(Ie=W(Ie,Q.translate(ue,void 0,void 0,ne)),-1e9,1e9))+Ee,Ae=me=we-Ie-Ee,L(Ie)?Q.horiz?(Ae=J,me=we-Q.bottom+(Q.options.isInternal?0:le.scrollablePixelsY||0),He=xe=De(He,_e,_e+Q.width)):(He=_e,xe=ze-Q.right+(le.scrollablePixelsX||0),Ae=me=De(Ae,J,J+Q.height)):(Me=!0,Fe=!1),je.path=Me&&!Fe?void 0:le.renderer.crispLine([["M",He,Ae],["L",xe,me]],ye||1)}),Pe.path}getLinearTickPositions(K,Q,le){let _e,J,ne,ue=w(Math.floor(Q/K)*K),ye=w(Math.ceil(le/K)*K),we=[];if(w(ue+K)===ue&&(ne=20),this.single)return[Q];for(_e=ue;_e<=ye&&(we.push(_e),(_e=w(_e+K,ne))!==J);)J=_e;return we}getMinorTickInterval(){let{minorTicks:K,minorTickInterval:Q}=this.options;return K===!0?W(Q,"auto"):K!==!1?Q:void 0}getMinorTickPositions(){let K=this.options,Q=this.tickPositions,le=this.minorTickInterval,_e=this.pointRangePadding||0,J=(this.min||0)-_e,ne=(this.max||0)+_e,ue=ne-J,ye=[],we;if(ue&&ue/le<this.len/3){let ze=this.logarithmic;if(ze)this.paddedTicks.forEach(function(Ee,Ie,Fe){Ie&&ye.push.apply(ye,ze.getLogTickPositions(le,Fe[Ie-1],Fe[Ie],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")ye=ye.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(le),J,ne,K.startOfWeek));else for(we=J+(Q[0]-J)%le;we<=ne&&we!==ye[0];we+=le)ye.push(we)}return ye.length!==0&&this.trimTicks(ye),ye}adjustForMinRange(){let K=this.options,Q=this.logarithmic,{max:le,min:_e,minRange:J}=this,ne,ue,ye,we;this.isXAxis&&J===void 0&&!Q&&(J=I(K.min)||I(K.max)||I(K.floor)||I(K.ceiling)?null:Math.min(5*(j(this.series.map(ze=>{var Ee;return(ze.xIncrement?(Ee=ze.xData)==null?void 0:Ee.slice(0,2):ze.xData)||[]}))||0),this.dataMax-this.dataMin)),L(le)&&L(_e)&&L(J)&&le-_e<J&&(ue=this.dataMax-this.dataMin>=J,ne=(J-le+_e)/2,ye=[_e-ne,W(K.min,_e-ne)],ue&&(ye[2]=Q?Q.log2lin(this.dataMin):this.dataMin),we=[(_e=x(ye))+J,W(K.max,_e+J)],ue&&(we[2]=Q?Q.log2lin(this.dataMax):this.dataMax),(le=A(we))-_e<J&&(ye[0]=le-J,ye[1]=W(K.min,le-J),_e=x(ye))),this.minRange=J,this.min=_e,this.max=le}getClosest(){let K,Q;if(this.categories)Q=1;else{let le=[];this.series.forEach(function(_e){var ne;let J=_e.closestPointRange;((ne=_e.xData)==null?void 0:ne.length)===1?le.push(_e.xData[0]):!_e.noSharedTooltip&&I(J)&&_e.reserveSpace()&&(Q=I(Q)?Math.min(Q,J):J)}),le.length&&(le.sort((_e,J)=>_e-J),K=j([le]))}return K&&Q?Math.min(K,Q):K||Q}nameToX(K){let Q=R(this.options.categories),le=Q?this.categories:this.names,_e=K.options.x,J;return K.series.requireSorting=!1,I(_e)||(_e=this.uniqueNames&&le?Q?le.indexOf(K.name):W(le.keys[K.name],-1):K.series.autoIncrement()),_e===-1?!Q&&le&&(J=le.length):J=_e,J!==void 0?(this.names[J]=K.name,this.names.keys[K.name]=J):K.x&&(J=K.x),J}updateNames(){let K=this,Q=this.names;Q.length>0&&(Object.keys(Q.keys).forEach(function(le){delete Q.keys[le]}),Q.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(le=>{le.xIncrement=null,(!le.points||le.isDirtyData)&&(K.max=Math.max(K.max,le.xData.length-1),le.processData(),le.generatePoints()),le.data.forEach(function(_e,J){let ne;_e!=null&&_e.options&&_e.name!==void 0&&(ne=K.nameToX(_e))!==void 0&&ne!==_e.x&&(_e.x=ne,le.xData[J]=ne)})}))}setAxisTranslation(){let K=this,Q=K.max-K.min,le=K.linkedParent,_e=!!K.categories,J=K.isXAxis,ne=K.axisPointRange||0,ue,ye=0,we=0,ze,Ee=K.transA;(J||_e||ne)&&(ue=K.getClosest(),le?(ye=le.minPointOffset,we=le.pointRangePadding):K.series.forEach(function(Ie){let Fe=_e?1:J?W(Ie.options.pointRange,ue,0):K.axisPointRange||0,He=Ie.options.pointPlacement;if(ne=Math.max(ne,Fe),!K.single||_e){let Ae=Ie.is("xrange")?!J:J;ye=Math.max(ye,Ae&&G(He)?0:Fe/2),we=Math.max(we,Ae&&He==="on"?0:Fe)}}),ze=K.ordinal&&K.ordinal.slope&&ue?K.ordinal.slope/ue:1,K.minPointOffset=ye*=ze,K.pointRangePadding=we*=ze,K.pointRange=Math.min(ne,K.single&&_e?1:Q),J&&ue&&(K.closestPointRange=ue)),K.translationSlope=K.transA=Ee=K.staticScale||K.len/(Q+we||1),K.transB=K.horiz?K.left:K.bottom,K.minPixelPadding=Ee*ye,B(this,"afterSetAxisTranslation")}minFromRange(){let{max:K,min:Q}=this;return L(K)&&L(Q)&&K-Q||void 0}setTickInterval(K){var Et,Tt,si,ui;let{categories:Q,chart:le,dataMax:_e,dataMin:J,dateTime:ne,isXAxis:ue,logarithmic:ye,options:we,softThreshold:ze}=this,Ee=L(this.threshold)?this.threshold:void 0,Ie=this.minRange||0,{ceiling:Fe,floor:He,linkedTo:Ae,softMax:xe,softMin:me}=we,Me=L(Ae)&&((Et=le[this.coll])==null?void 0:Et[Ae]),De=we.tickPixelInterval,Pe=we.maxPadding,je=we.minPadding,Xe=0,tt,rt=L(we.tickInterval)&&we.tickInterval>=0?we.tickInterval:void 0,dt,gt,wt,Rt;if(ne||Q||Me||this.getTickAmount(),wt=W(this.userMin,we.min),Rt=W(this.userMax,we.max),Me?(this.linkedParent=Me,tt=Me.getExtremes(),this.min=W(tt.min,tt.dataMin),this.max=W(tt.max,tt.dataMax),this.type!==Me.type&&Y(11,!0,le)):(ze&&I(Ee)&&L(_e)&&L(J)&&(J>=Ee?(dt=Ee,je=0):_e<=Ee&&(gt=Ee,Pe=0)),this.min=W(wt,dt,J),this.max=W(Rt,gt,_e)),L(this.max)&&L(this.min)&&(ye&&(this.positiveValuesOnly&&!K&&0>=Math.min(this.min,W(J,this.min))&&Y(10,!0,le),this.min=w(ye.log2lin(this.min),16),this.max=w(ye.log2lin(this.max),16)),this.range&&L(J)&&(this.userMin=this.min=wt=Math.max(J,this.minFromRange()||0),this.userMax=Rt=this.max,this.range=void 0)),B(this,"foundExtremes"),this.adjustForMinRange(),L(this.min)&&L(this.max)){if(!L(this.userMin)&&L(me)&&me<this.min&&(this.min=wt=me),!L(this.userMax)&&L(xe)&&xe>this.max&&(this.max=Rt=xe),Q||this.axisPointRange||(Tt=this.stacking)!=null&&Tt.usePercentage||Me||!(Xe=this.max-this.min)||(!I(wt)&&je&&(this.min-=Xe*je),I(Rt)||!Pe||(this.max+=Xe*Pe)),!L(this.userMin)&&L(He)&&(this.min=Math.max(this.min,He)),!L(this.userMax)&&L(Fe)&&(this.max=Math.min(this.max,Fe)),ze&&L(J)&&L(_e)){let Wt=Ee||0;!I(wt)&&this.min<Wt&&J>=Wt?this.min=we.minRange?Math.min(Wt,this.max-Ie):Wt:!I(Rt)&&this.max>Wt&&_e<=Wt&&(this.max=we.minRange?Math.max(Wt,this.min+Ie):Wt)}!le.polar&&this.min>this.max&&(I(we.min)?this.max=this.min:I(we.max)&&(this.min=this.max)),Xe=this.max-this.min}if(this.min!==this.max&&L(this.min)&&L(this.max)?Me&&!rt&&De===Me.options.tickPixelInterval?this.tickInterval=rt=Me.tickInterval:this.tickInterval=W(rt,this.tickAmount?Xe/Math.max(this.tickAmount-1,1):void 0,Q?1:Xe*De/Math.max(this.len,De)):this.tickInterval=1,ue&&!K){let Wt=this.min!==((si=this.old)==null?void 0:si.min)||this.max!==((ui=this.old)==null?void 0:ui.max);this.series.forEach(function(ar){var Xi;ar.forceCrop=(Xi=ar.forceCropping)==null?void 0:Xi.call(ar),ar.processData(Wt)}),B(this,"postProcessData",{hasExtremesChanged:Wt})}this.setAxisTranslation(),B(this,"initialAxisTranslation"),this.pointRange&&!rt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let ft=W(we.minTickInterval,ne&&!this.series.some(Wt=>Wt.noSharedTooltip)?this.closestPointRange:0);!rt&&this.tickInterval<ft&&(this.tickInterval=ft),ne||ye||rt||(this.tickInterval=Ce(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var ze,Ee;let K=this.options,Q=K.tickPositions,le=K.tickPositioner,_e=this.getMinorTickInterval(),J=!this.isPanning,ne=J&&K.startOnTick,ue=J&&K.endOnTick,ye=[],we;if(this.tickmarkOffset=this.categories&&K.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&I(this.min)&&!this.tickAmount&&(this.min%1==0||K.allowDecimals!==!1),Q)ye=Q.slice();else if(L(this.min)&&L(this.max)){if(!((ze=this.ordinal)!=null&&ze.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))ye=[this.min,this.max],Y(19,!1,this.chart);else if(this.dateTime)ye=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,K.units),this.min,this.max,K.startOfWeek,(Ee=this.ordinal)==null?void 0:Ee.positions,this.closestPointRange,!0);else if(this.logarithmic)ye=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Ie=this.tickInterval,Fe=Ie;for(;Fe<=2*Ie&&(ye=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&ye.length>this.tickAmount);)this.tickInterval=Ce(this,Fe*=1.1)}ye.length>this.len&&(ye=[ye[0],ye[ye.length-1]])[0]===ye[1]&&(ye.length=1),le&&(this.tickPositions=ye,(we=le.apply(this,[this.min,this.max]))&&(ye=we))}this.tickPositions=ye,this.minorTickInterval=_e==="auto"&&this.tickInterval?this.tickInterval/K.minorTicksPerMajor:_e,this.paddedTicks=ye.slice(0),this.trimTicks(ye,ne,ue),!this.isLinked&&L(this.min)&&L(this.max)&&(this.single&&ye.length<2&&!this.categories&&!this.series.some(Ie=>Ie.is("heatmap")&&Ie.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),Q||we||this.adjustTickAmount()),B(this,"afterSetTickPositions")}trimTicks(K,Q,le){let _e=K[0],J=K[K.length-1],ne=!this.isOrdinal&&this.minPointOffset||0;if(B(this,"trimTicks"),!this.isLinked){if(Q&&_e!==-1/0)this.min=_e;else for(;this.min-ne>K[0];)K.shift();if(le)this.max=J;else for(;this.max+ne<K[K.length-1];)K.pop();K.length===0&&I(_e)&&!this.options.tickPositions&&K.push((J+_e)/2)}}alignToOthers(){let K,Q=this,le=Q.chart,_e=[this],J=Q.options,ne=le.options.chart,ue=this.coll==="yAxis"&&ne.alignThresholds,ye=[];if(Q.thresholdAlignment=void 0,(ne.alignTicks!==!1&&J.alignTicks||ue)&&J.startOnTick!==!1&&J.endOnTick!==!1&&!Q.logarithmic){let we=Ee=>{let{horiz:Ie,options:Fe}=Ee;return[Ie?Fe.left:Fe.top,Fe.width,Fe.height,Fe.pane].join(",")},ze=we(this);le[this.coll].forEach(function(Ee){let{series:Ie}=Ee;Ie.length&&Ie.some(Fe=>Fe.visible)&&Ee!==Q&&we(Ee)===ze&&(K=!0,_e.push(Ee))})}if(K&&ue){_e.forEach(ze=>{let Ee=ze.getThresholdAlignment(Q);L(Ee)&&ye.push(Ee)});let we=ye.length>1?ye.reduce((ze,Ee)=>ze+=Ee,0)/ye.length:void 0;_e.forEach(ze=>{ze.thresholdAlignment=we})}return K}getThresholdAlignment(K){if((!L(this.dataMin)||this!==K&&this.series.some(Q=>Q.isDirty||Q.isDirtyData))&&this.getSeriesExtremes(),L(this.threshold)){let Q=D((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(Q=1-Q),Q}}getTickAmount(){let K=this.options,Q=K.tickPixelInterval,le=K.tickAmount;I(K.tickInterval)||le||!(this.len<Q)||this.isRadial||this.logarithmic||!K.startOnTick||!K.endOnTick||(le=2),!le&&this.alignToOthers()&&(le=Math.ceil(this.len/Q)+1),le<4&&(this.finalTickAmt=le,le=5),this.tickAmount=le}adjustTickAmount(){let K=this,{finalTickAmt:Q,max:le,min:_e,options:J,tickPositions:ne,tickAmount:ue,thresholdAlignment:ye}=K,we=ne==null?void 0:ne.length,ze=W(K.threshold,K.softThreshold?0:null),Ee,Ie,Fe=K.tickInterval,He,Ae=()=>ne.push(w(ne[ne.length-1]+Fe)),xe=()=>ne.unshift(w(ne[0]-Fe));if(L(ye)&&(He=ye<.5?Math.ceil(ye*(ue-1)):Math.floor(ye*(ue-1)),J.reversed&&(He=ue-1-He)),K.hasData()&&L(_e)&&L(le)){let me=()=>{K.transA*=(we-1)/(ue-1),K.min=J.startOnTick?ne[0]:Math.min(_e,ne[0]),K.max=J.endOnTick?ne[ne.length-1]:Math.max(le,ne[ne.length-1])};if(L(He)&&L(K.threshold)){for(;ne[He]!==ze||ne.length!==ue||ne[0]>_e||ne[ne.length-1]<le;){for(ne.length=0,ne.push(K.threshold);ne.length<ue;)ne[He]===void 0||ne[He]>K.threshold?xe():Ae();if(Fe>8*K.tickInterval)break;Fe*=2}me()}else if(we<ue){for(;ne.length<ue;)ne.length%2||_e===ze?Ae():xe();me()}if(I(Q)){for(Ie=Ee=ne.length;Ie--;)(Q===3&&Ie%2==1||Q<=2&&Ie>0&&Ie<Ee-1)&&ne.splice(Ie,1);K.finalTickAmt=void 0}}}setScale(){var ne,ue;let{coll:K,stacking:Q}=this,le=!1,_e=!1;this.series.forEach(ye=>{le=le||ye.isDirtyData||ye.isDirty,_e=_e||ye.xAxis&&ye.xAxis.isDirty||!1}),this.setAxisSize();let J=this.len!==(this.old&&this.old.len);J||le||_e||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(Q&&K==="yAxis"&&Q.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),Q&&K==="xAxis"&&Q.buildStacks(),this.isDirty||(this.isDirty=J||this.min!==((ne=this.old)==null?void 0:ne.min)||this.max!==((ue=this.old)==null?void 0:ue.max))):Q&&Q.cleanStacks(),le&&delete this.allExtremes,B(this,"afterSetScale")}setExtremes(K,Q,le=!0,_e,J){this.series.forEach(ne=>{delete ne.kdTree}),B(this,"setExtremes",J=X(J,{min:K,max:Q}),ne=>{this.userMin=ne.min,this.userMax=ne.max,this.eventArgs=ne,le&&this.chart.redraw(_e)})}setAxisSize(){let K=this.chart,Q=this.options,le=Q.offsets||[0,0,0,0],_e=this.horiz,J=this.width=Math.round(re(W(Q.width,K.plotWidth-le[3]+le[1]),K.plotWidth)),ne=this.height=Math.round(re(W(Q.height,K.plotHeight-le[0]+le[2]),K.plotHeight)),ue=this.top=Math.round(re(W(Q.top,K.plotTop+le[0]),K.plotHeight,K.plotTop)),ye=this.left=Math.round(re(W(Q.left,K.plotLeft+le[3]),K.plotWidth,K.plotLeft));this.bottom=K.chartHeight-ne-ue,this.right=K.chartWidth-J-ye,this.len=Math.max(_e?J:ne,0),this.pos=_e?ye:ue}getExtremes(){let K=this.logarithmic;return{min:K?w(K.lin2log(this.min)):this.min,max:K?w(K.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(K){let Q=this.logarithmic,le=Q?Q.lin2log(this.min):this.min,_e=Q?Q.lin2log(this.max):this.max;return K===null||K===-1/0?K=le:K===1/0?K=_e:le>K?K=le:_e<K&&(K=_e),this.translate(K,0,1,0,1)}autoLabelAlign(K){let Q=(W(K,0)-90*this.side+720)%360,le={align:"center"};return B(this,"autoLabelAlign",le,function(_e){Q>15&&Q<165?_e.align="right":Q>195&&Q<345&&(_e.align="left")}),le.align}tickSize(K){let Q=this.options,le=W(Q[K==="tick"?"tickWidth":"minorTickWidth"],K==="tick"&&this.isXAxis&&!this.categories?1:0),_e=Q[K==="tick"?"tickLength":"minorTickLength"],J;le&&_e&&(Q[K+"Position"]==="inside"&&(_e=-_e),J=[_e,le]);let ne={tickSize:J};return B(this,"afterTickSize",ne),ne.tickSize}labelMetrics(){let K=this.chart.renderer,Q=this.ticks,le=Q[Object.keys(Q)[0]]||{};return this.chart.renderer.fontMetrics(le.label||le.movedLabel||K.box)}unsquish(){let K=this.options.labels,Q=K.padding||0,le=this.horiz,_e=this.tickInterval,J=this.len/(((this.categories?1:0)+this.max-this.min)/_e),ne=K.rotation,ue=w(.8*this.labelMetrics().h),ye=Math.max(this.max-this.min,0),we=function(He){let Ae=(He+2*Q)/(J||1);return(Ae=Ae>1?Math.ceil(Ae):1)*_e>ye&&He!==1/0&&J!==1/0&&ye&&(Ae=Math.ceil(ye/_e)),w(Ae*_e)},ze=_e,Ee,Ie=Number.MAX_VALUE,Fe;if(le){if(!K.staggerLines&&(L(ne)?Fe=[ne]:J<K.autoRotationLimit&&(Fe=K.autoRotation)),Fe){let He,Ae;for(let xe of Fe)(xe===ne||xe&&xe>=-90&&xe<=90)&&(Ae=(He=we(Math.abs(ue/Math.sin(k*xe))))+Math.abs(xe/360))<Ie&&(Ie=Ae,Ee=xe,ze=He)}}else ze=we(.75*ue);return this.autoRotation=Fe,this.labelRotation=W(Ee,L(ne)?ne:0),K.step?_e:ze}getSlotWidth(K){let Q=this.chart,le=this.horiz,_e=this.options.labels,J=Math.max(this.tickPositions.length-(this.categories?0:1),1),ne=Q.margin[3];if(K&&L(K.slotWidth))return K.slotWidth;if(le&&_e.step<2)return _e.rotation?0:(this.staggerLines||1)*this.len/J;if(!le){let ue=_e.style.width;if(ue!==void 0)return parseInt(String(ue),10);if(ne)return ne-Q.spacing[3]}return .33*Q.chartWidth}renderUnsquish(){let K=this.chart,Q=K.renderer,le=this.tickPositions,_e=this.ticks,J=this.options.labels,ne=J.style,ue=this.horiz,ye=this.getSlotWidth(),we=Math.max(1,Math.round(ye-(ue?2*(J.padding||0):J.distance||0))),ze={},Ee=this.labelMetrics(),Ie=ne.textOverflow,Fe,He,Ae=0,xe,me;if(G(J.rotation)||(ze.rotation=J.rotation||0),le.forEach(function(Me){let De=_e[Me];De.movedLabel&&De.replaceMovedLabel(),De&&De.label&&De.label.textPxLength>Ae&&(Ae=De.label.textPxLength)}),this.maxLabelLength=Ae,this.autoRotation)Ae>we&&Ae>Ee.h?ze.rotation=this.labelRotation:this.labelRotation=0;else if(ye&&(Fe=we,!Ie))for(He="clip",me=le.length;!ue&&me--;)(xe=_e[le[me]].label)&&(xe.styles.textOverflow==="ellipsis"?xe.css({textOverflow:"clip"}):xe.textPxLength>ye&&xe.css({width:ye+"px"}),xe.getBBox().height>this.len/le.length-(Ee.h-Ee.f)&&(xe.specificTextOverflow="ellipsis"));ze.rotation&&(Fe=Ae>.5*K.chartHeight?.33*K.chartHeight:Ae,Ie||(He="ellipsis")),this.labelAlign=J.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(ze.align=this.labelAlign),le.forEach(function(Me){let De=_e[Me],Pe=De&&De.label,je=ne.width,Xe={};Pe&&(Pe.attr(ze),De.shortenLabel?De.shortenLabel():Fe&&!je&&ne.whiteSpace!=="nowrap"&&(Fe<Pe.textPxLength||Pe.element.tagName==="SPAN")?(Xe.width=Fe+"px",Ie||(Xe.textOverflow=Pe.specificTextOverflow||He),Pe.css(Xe)):!Pe.styles.width||Xe.width||je||Pe.css({width:null}),delete Pe.specificTextOverflow,De.rotation=ze.rotation)},this),this.tickRotCorr=Q.rotCorr(Ee.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(K){return K.hasData()})||this.options.showEmpty&&I(this.min)&&I(this.max)}addTitle(K){let Q,le=this.chart.renderer,_e=this.horiz,J=this.opposite,ne=this.options.title,ue=this.chart.styledMode;this.axisTitle||((Q=ne.textAlign)||(Q=(_e?{low:"left",middle:"center",high:"right"}:{low:J?"right":"left",middle:"center",high:J?"left":"right"})[ne.align]),this.axisTitle=le.text(ne.text||"",0,0,ne.useHTML).attr({zIndex:7,rotation:ne.rotation||0,align:Q}).addClass("highcharts-axis-title"),ue||this.axisTitle.css($(ne.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ue||ne.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[K?"show":"hide"](K)}generateTick(K){let Q=this.ticks;Q[K]?Q[K].addLabel():Q[K]=new g(this,K)}createGroups(){let{axisParent:K,chart:Q,coll:le,options:_e}=this,J=Q.renderer,ne=(ue,ye,we)=>J.g(ue).attr({zIndex:we}).addClass(`highcharts-${le.toLowerCase()}${ye} `+(this.isRadial?`highcharts-radial-axis${ye} `:"")+(_e.className||"")).add(K);this.axisGroup||(this.gridGroup=ne("grid","-grid",_e.gridZIndex),this.axisGroup=ne("axis","",_e.zIndex),this.labelGroup=ne("axis-labels","-labels",_e.labels.zIndex))}getOffset(){let K=this,{chart:Q,horiz:le,options:_e,side:J,ticks:ne,tickPositions:ue,coll:ye}=K,we=Q.inverted&&!K.isZAxis?[1,0,3,2][J]:J,ze=K.hasData(),Ee=_e.title,Ie=_e.labels,Fe=L(_e.crossing),He=Q.axisOffset,Ae=Q.clipOffset,xe=[-1,1,1,-1][J],me,Me=0,De,Pe=0,je=0,Xe,tt;if(K.showAxis=me=ze||_e.showEmpty,K.staggerLines=K.horiz&&Ie.staggerLines||void 0,K.createGroups(),ze||K.isLinked?(ue.forEach(function(rt){K.generateTick(rt)}),K.renderUnsquish(),K.reserveSpaceDefault=J===0||J===2||{1:"left",3:"right"}[J]===K.labelAlign,W(Ie.reserveSpace,!Fe&&null,K.labelAlign==="center"||null,K.reserveSpaceDefault)&&ue.forEach(function(rt){je=Math.max(ne[rt].getLabelSize(),je)}),K.staggerLines&&(je*=K.staggerLines),K.labelOffset=je*(K.opposite?-1:1)):H(ne,function(rt,dt){rt.destroy(),delete ne[dt]}),Ee!=null&&Ee.text&&Ee.enabled!==!1&&(K.addTitle(me),me&&!Fe&&Ee.reserveSpace!==!1&&(K.titleOffset=Me=K.axisTitle.getBBox()[le?"height":"width"],Pe=I(De=Ee.offset)?0:W(Ee.margin,le?5:10))),K.renderLine(),K.offset=xe*W(_e.offset,He[J]?He[J]+(_e.margin||0):0),K.tickRotCorr=K.tickRotCorr||{x:0,y:0},tt=J===0?-K.labelMetrics().h:J===2?K.tickRotCorr.y:0,Xe=Math.abs(je)+Pe,je&&(Xe-=tt,Xe+=xe*(le?W(Ie.y,K.tickRotCorr.y+xe*Ie.distance):W(Ie.x,xe*Ie.distance))),K.axisTitleMargin=W(De,Xe),K.getMaxLabelDimensions&&(K.maxLabelDimensions=K.getMaxLabelDimensions(ne,ue)),ye!=="colorAxis"&&Ae){let rt=this.tickSize("tick");He[J]=Math.max(He[J],(K.axisTitleMargin||0)+Me+xe*K.offset,Xe,ue&&ue.length&&rt?rt[0]+xe*K.offset:0);let dt=!K.axisLine||_e.offset?0:K.axisLine.strokeWidth()/2;Ae[we]=Math.max(Ae[we],dt)}B(this,"afterGetOffset")}getLinePath(K){let Q=this.chart,le=this.opposite,_e=this.offset,J=this.horiz,ne=this.left+(le?this.width:0)+_e,ue=Q.chartHeight-this.bottom-(le?this.height:0)+_e;return le&&(K*=-1),Q.renderer.crispLine([["M",J?this.left:ne,J?ue:this.top],["L",J?Q.chartWidth-this.right:ne,J?ue:Q.chartHeight-this.bottom]],K)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(K){let Q=this.horiz,le=this.left,_e=this.top,J=this.len,ne=this.options.title,ue=Q?le:_e,ye=this.opposite,we=this.offset,ze=ne.x,Ee=ne.y,Ie=this.chart.renderer.fontMetrics(K),Fe=K?Math.max(K.getBBox(!1,0).height-Ie.h-1,0):0,He={low:ue+(Q?0:J),middle:ue+J/2,high:ue+(Q?J:0)}[ne.align],Ae=(Q?_e+this.height:le)+(Q?1:-1)*(ye?-1:1)*(this.axisTitleMargin||0)+[-Fe,Fe,Ie.f,-Fe][this.side],xe={x:Q?He+ze:Ae+(ye?this.width:0)+we+ze,y:Q?Ae+Ee-(ye?this.height:0)+we:He+Ee};return B(this,"afterGetTitlePosition",{titlePosition:xe}),xe}renderMinorTick(K,Q){let le=this.minorTicks;le[K]||(le[K]=new g(this,K,"minor")),Q&&le[K].isNew&&le[K].render(null,!0),le[K].render(null,!1,1)}renderTick(K,Q,le){let _e=this.isLinked,J=this.ticks;(!_e||K>=this.min&&K<=this.max||this.grid&&this.grid.isColumn)&&(J[K]||(J[K]=new g(this,K)),le&&J[K].isNew&&J[K].render(Q,!0,-1),J[K].render(Q))}render(){let K,Q,le=this,_e=le.chart,J=le.logarithmic,ne=_e.renderer,ue=le.options,ye=le.isLinked,we=le.tickPositions,ze=le.axisTitle,Ee=le.ticks,Ie=le.minorTicks,Fe=le.alternateBands,He=ue.stackLabels,Ae=ue.alternateGridColor,xe=ue.crossing,me=le.tickmarkOffset,Me=le.axisLine,De=le.showAxis,Pe=y(ne.globalAnimation);if(le.labelEdge.length=0,le.overlap=!1,[Ee,Ie,Fe].forEach(function(je){H(je,function(Xe){Xe.isActive=!1})}),L(xe)){let je=this.isXAxis?_e.yAxis[0]:_e.xAxis[0],Xe=[1,-1,-1,1][this.side];if(je){let tt=je.toPixels(xe,!0);le.horiz&&(tt=je.len-tt),le.offset=Xe*tt}}if(le.hasData()||ye){let je=le.chart.hasRendered&&le.old&&L(le.old.min);le.minorTickInterval&&!le.categories&&le.getMinorTickPositions().forEach(function(Xe){le.renderMinorTick(Xe,je)}),we.length&&(we.forEach(function(Xe,tt){le.renderTick(Xe,tt,je)}),me&&(le.min===0||le.single)&&(Ee[-1]||(Ee[-1]=new g(le,-1,null,!0)),Ee[-1].render(-1))),Ae&&we.forEach(function(Xe,tt){Q=we[tt+1]!==void 0?we[tt+1]+me:le.max-me,tt%2==0&&Xe<le.max&&Q<=le.max+(_e.polar?-me:me)&&(Fe[Xe]||(Fe[Xe]=new m.PlotLineOrBand(le,{})),K=Xe+me,Fe[Xe].options={from:J?J.lin2log(K):K,to:J?J.lin2log(Q):Q,color:Ae,className:"highcharts-alternate-grid"},Fe[Xe].render(),Fe[Xe].isActive=!0)}),le._addedPlotLB||(le._addedPlotLB=!0,(ue.plotLines||[]).concat(ue.plotBands||[]).forEach(function(Xe){le.addPlotBandOrLine(Xe)}))}[Ee,Ie,Fe].forEach(function(je){let Xe=[],tt=Pe.duration;H(je,function(rt,dt){rt.isActive||(rt.render(dt,!1,0),rt.isActive=!1,Xe.push(dt))}),ae(function(){let rt=Xe.length;for(;rt--;)je[Xe[rt]]&&!je[Xe[rt]].isActive&&(je[Xe[rt]].destroy(),delete je[Xe[rt]])},je!==Fe&&_e.hasRendered&&tt?tt:0)}),Me&&(Me[Me.isPlaced?"animate":"attr"]({d:this.getLinePath(Me.strokeWidth())}),Me.isPlaced=!0,Me[De?"show":"hide"](De)),ze&&De&&(ze[ze.isNew?"attr":"animate"](le.getTitlePosition(ze)),ze.isNew=!1),He&&He.enabled&&le.stacking&&le.stacking.renderStackTotals(),le.old={len:le.len,max:le.max,min:le.min,transA:le.transA,userMax:le.userMax,userMin:le.userMin},le.isDirty=!1,B(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(K){K.render()})),this.series.forEach(function(K){K.isDirty=!0})}getKeepProps(){return this.keepProps||ge.keepProps}destroy(K){let Q=this,le=Q.plotLinesAndBands,_e=this.eventOptions;if(B(this,"destroy",{keepEvents:K}),K||he(Q),[Q.ticks,Q.minorTicks,Q.alternateBands].forEach(function(J){N(J)}),le){let J=le.length;for(;J--;)le[J].destroy()}for(let J in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(ne){Q[ne]&&(Q[ne]=Q[ne].destroy())}),Q.plotLinesAndBandsGroups)Q.plotLinesAndBandsGroups[J]=Q.plotLinesAndBandsGroups[J].destroy();H(Q,function(J,ne){Q.getKeepProps().indexOf(ne)===-1&&delete Q[ne]}),this.eventOptions=_e}drawCrosshair(K,Q){let le=this.crosshair,_e=W(le&&le.snap,!0),J=this.chart,ne,ue,ye,we=this.cross,ze;if(B(this,"drawCrosshair",{e:K,point:Q}),K||(K=this.cross&&this.cross.e),le&&(I(Q)||!_e)!==!1){if(_e?I(Q)&&(ue=W(this.coll!=="colorAxis"?Q.crosshairPos:null,this.isXAxis?Q.plotX:this.len-Q.plotY)):ue=K&&(this.horiz?K.chartX-this.pos:this.len-K.chartY+this.pos),I(ue)&&(ze={value:Q&&(this.isXAxis?Q.x:W(Q.stackY,Q.y)),translatedValue:ue},J.polar&&X(ze,{isCrosshair:!0,chartX:K&&K.chartX,chartY:K&&K.chartY,point:Q}),ne=this.getPlotLinePath(ze)||null),!I(ne)){this.hideCrosshair();return}ye=this.categories&&!this.isRadial,we||(this.cross=we=J.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(ye?"category ":"thin ")+(le.className||"")).attr({zIndex:W(le.zIndex,2)}).add(),!J.styledMode&&(we.attr({stroke:le.color||(ye?h.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":W(le.width,1)}).css({"pointer-events":"none"}),le.dashStyle&&we.attr({dashstyle:le.dashStyle}))),we.show().attr({d:ne}),ye&&!le.width&&we.attr({"stroke-width":this.transA}),this.cross.e=K}else this.hideCrosshair();B(this,"afterDrawCrosshair",{e:K,point:Q})}hideCrosshair(){this.cross&&this.cross.hide(),B(this,"afterHideCrosshair")}update(K,Q){let le=this.chart;K=$(this.userOptions,K),this.destroy(!0),this.init(le,K),le.isDirtyBox=!0,W(Q,!0)&&le.redraw()}remove(K){let Q=this.chart,le=this.coll,_e=this.series,J=_e.length;for(;J--;)_e[J]&&_e[J].remove(!1);q(Q.axes,this),q(Q[le]||[],this),Q.orderItems(le),this.destroy(),Q.isDirtyBox=!0,W(K,!0)&&Q.redraw()}setTitle(K,Q){this.update({title:K},Q)}setCategories(K,Q){this.update({categories:K},Q)}}return ge.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],ge}),s(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(a){var l;let{addEvent:h,getMagnitude:r,normalizeTickInterval:p,timeUnits:m}=a;return function(g){function v(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function y(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new C(this))}g.compose=function(b){return b.keepProps.includes("dateTime")||(b.keepProps.push("dateTime"),b.prototype.getTimeTicks=v,h(b,"afterSetType",y)),b};class C{constructor(T){this.axis=T}normalizeTimeTickInterval(T,S){let k=S||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],x=k[k.length-1],A=m[x[0]],D=x[1],w;for(w=0;w<k.length&&(A=m[(x=k[w])[0]],D=x[1],!k[w+1]||!(T<=(A*D[D.length-1]+m[k[w+1][0]])/2));w++);A===m.year&&T<5*A&&(D=[1,2,5]);let I=p(T/A,D,x[0]==="year"?Math.max(r(T/A),1):1);return{unitRange:A,count:I,unitName:x[0]}}getXDateFormat(T,S){let{axis:k}=this,x=k.chart.time;return k.closestPointRange?x.getDateFormat(k.closestPointRange,T,k.options.startOfWeek,S)||x.resolveDTLFormat(S.year).main:x.resolveDTLFormat(S.day).main}}g.Additions=C}(l||(l={})),l}),s(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(a){var l;let{addEvent:h,normalizeTickInterval:r,pick:p}=a;return function(m){function g(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new y(this))}function v(){let C=this.logarithmic;C&&(this.lin2val=function(b){return C.lin2log(b)},this.val2lin=function(b){return C.log2lin(b)})}m.compose=function(C){return C.keepProps.includes("logarithmic")||(C.keepProps.push("logarithmic"),h(C,"afterSetType",g),h(C,"afterInit",v)),C};class y{constructor(b){this.axis=b}getLogTickPositions(b,T,S,k){let x=this.axis,A=x.len,D=x.options,w=[];if(k||(this.minorAutoInterval=void 0),b>=.5)b=Math.round(b),w=x.getLinearTickPositions(b,T,S);else if(b>=.08){let I,N,q,Y,X,B,j,O=Math.floor(T);for(I=b>.3?[1,2,4]:b>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=O;N<S+1&&!j;N++)for(q=0,Y=I.length;q<Y&&!j;q++)(X=this.log2lin(this.lin2log(N)*I[q]))>T&&(!k||B<=S)&&B!==void 0&&w.push(B),B>S&&(j=!0),B=X}else{let I=this.lin2log(T),N=this.lin2log(S),q=k?x.getMinorTickInterval():D.tickInterval,Y=D.tickPixelInterval/(k?5:1),X=k?A/x.tickPositions.length:A;b=r(b=p(q==="auto"?null:q,this.minorAutoInterval,(N-I)*Y/(X||1))),w=x.getLinearTickPositions(b,I,N).map(this.log2lin),k||(this.minorAutoInterval=b/5)}return k||(x.tickInterval=b),w}lin2log(b){return Math.pow(10,b)}log2lin(b){return Math.log(b)/Math.LN10}}m.Additions=y}(l||(l={})),l}),s(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(a){var l;let{erase:h,extend:r,isNumber:p}=a;return function(m){let g;function v(x){return this.addPlotBandOrLine(x,"plotBands")}function y(x,A){let D=this.userOptions,w=new g(this,x);if(this.visible&&(w=w.render()),w){if(this._addedPlotLB||(this._addedPlotLB=!0,(D.plotLines||[]).concat(D.plotBands||[]).forEach(I=>{this.addPlotBandOrLine(I)})),A){let I=D[A]||[];I.push(x),D[A]=I}this.plotLinesAndBands.push(w)}return w}function C(x){return this.addPlotBandOrLine(x,"plotLines")}function b(x,A,D){D=D||this.options;let w=this.getPlotLinePath({value:A,force:!0,acrossPanes:D.acrossPanes}),I=[],N=this.horiz,q=!p(this.min)||!p(this.max)||x<this.min&&A<this.min||x>this.max&&A>this.max,Y=this.getPlotLinePath({value:x,force:!0,acrossPanes:D.acrossPanes}),X,B=1,j;if(Y&&w)for(q&&(j=Y.toString()===w.toString(),B=0),X=0;X<Y.length;X+=2){let O=Y[X],R=Y[X+1],L=w[X],G=w[X+1];(O[0]==="M"||O[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&L[1]===O[1]?(L[1]+=B,G[1]+=B):N||L[2]!==O[2]||(L[2]+=B,G[2]+=B),I.push(["M",O[1],O[2]],["L",R[1],R[2]],["L",G[1],G[2]],["L",L[1],L[2]],["Z"])),I.isFlat=j}return I}function T(x){this.removePlotBandOrLine(x)}function S(x){let A=this.plotLinesAndBands,D=this.options,w=this.userOptions;if(A){let I=A.length;for(;I--;)A[I].id===x&&A[I].destroy();[D.plotLines||[],w.plotLines||[],D.plotBands||[],w.plotBands||[]].forEach(function(N){for(I=N.length;I--;)(N[I]||{}).id===x&&h(N,N[I])})}}function k(x){this.removePlotBandOrLine(x)}m.compose=function(x,A){let D=A.prototype;return D.addPlotBand||(g=x,r(D,{addPlotBand:v,addPlotLine:C,addPlotBandOrLine:y,getPlotBandPath:b,removePlotBand:T,removePlotLine:k,removePlotBandOrLine:S})),A}}(l||(l={})),l}),s(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(a,l){let{addEvent:h,arrayMax:r,arrayMin:p,defined:m,destroyObjectProperties:g,erase:v,fireEvent:y,merge:C,objectEach:b,pick:T}=l;class S{static compose(x,A){return h(x,"afterInit",function(){this.labelCollectors.push(()=>{var w;let D=[];for(let I of this.axes)for(let{label:N,options:q}of I.plotLinesAndBands)N&&!((w=q==null?void 0:q.label)!=null&&w.allowOverlap)&&D.push(N);return D})}),a.compose(S,A)}constructor(x,A){this.axis=x,this.options=A,this.id=A.id}render(){y(this,"render");let{axis:x,options:A}=this,{horiz:D,logarithmic:w}=x,{color:I,events:N,zIndex:q=0}=A,Y={},X=x.chart.renderer,B=A.to,j=A.from,O=A.value,R=A.borderWidth,L=A.label,{label:G,svgElem:$}=this,F=[],H,W=m(j)&&m(B),re=m(O),he=!$,ie={class:"highcharts-plot-"+(W?"band ":"line ")+(A.className||"")},ae=W?"bands":"lines";if(!x.chart.styledMode&&(re?(ie.stroke=I||"#999999",ie["stroke-width"]=T(A.width,1),A.dashStyle&&(ie.dashstyle=A.dashStyle)):W&&(ie.fill=I||"#e6e9ff",R&&(ie.stroke=A.borderColor,ie["stroke-width"]=R))),Y.zIndex=q,ae+="-"+q,(H=x.plotLinesAndBandsGroups[ae])||(x.plotLinesAndBandsGroups[ae]=H=X.g("plot-"+ae).attr(Y).add()),$||(this.svgElem=$=X.path().attr(ie).add(H)),m(O))F=x.getPlotLinePath({value:(w==null?void 0:w.log2lin(O))??O,lineWidth:$.strokeWidth(),acrossPanes:A.acrossPanes});else{if(!(m(j)&&m(B)))return;F=x.getPlotBandPath((w==null?void 0:w.log2lin(j))??j,(w==null?void 0:w.log2lin(B))??B,A)}return!this.eventsAdded&&N&&(b(N,(Ce,ge)=>{$==null||$.on(ge,ke=>{N[ge].apply(this,[ke])})}),this.eventsAdded=!0),(he||!$.d)&&(F!=null&&F.length)?$.attr({d:F}):$&&(F?($.show(),$.animate({d:F})):$.d&&($.hide(),G&&(this.label=G=G.destroy()))),L&&(m(L.text)||m(L.formatter))&&(F!=null&&F.length)&&x.width>0&&x.height>0&&!F.isFlat?(L=C({align:D&&W?"center":void 0,x:D?!W&&4:10,verticalAlign:!D&&W?"middle":void 0,y:D?W?16:10:W?6:-4,rotation:D&&!W?90:0,...W?{inside:!0}:{}},L),this.renderLabel(L,F,W,q)):G&&G.hide(),this}renderLabel(x,A,D,w){var L;let I=this.axis,N=I.chart.renderer,q=x.inside,Y=this.label;Y||(this.label=Y=N.text(this.getLabelText(x),0,0,x.useHTML).attr({align:x.textAlign||x.align,rotation:x.rotation,class:"highcharts-plot-"+(D?"band":"line")+"-label "+(x.className||""),zIndex:w}),I.chart.styledMode||Y.css(C({fontSize:"0.8em",textOverflow:D&&!q?"":"ellipsis"},x.style)),Y.add());let X=A.xBounds||[A[0][1],A[1][1],D?A[2][1]:A[0][1]],B=A.yBounds||[A[0][2],A[1][2],D?A[2][2]:A[0][2]],j=p(X),O=p(B),R=r(X)-j;Y.align(x,!1,{x:j,y:O,width:R,height:r(B)-O}),(!Y.alignValue||Y.alignValue==="left"||m(q))&&Y.css({width:(((L=x.style)==null?void 0:L.width)||(D&&q?R:Y.rotation===90?I.height-(Y.alignAttr.y-I.top):(x.clip?I.width:I.chart.chartWidth)-(Y.alignAttr.x-I.left)))+"px"}),Y.show(!0)}getLabelText(x){return m(x.formatter)?x.formatter.call(this):x.text}destroy(){v(this.axis.plotLinesAndBands,this),delete this.axis,g(this)}}return S}),s(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m){var g;let{animObject:v}=a,{format:y}=l,{composed:C,doc:b,isSafari:T}=h,{distribute:S}=r,{addEvent:k,clamp:x,css:A,discardElement:D,extend:w,fireEvent:I,isArray:N,isNumber:q,isString:Y,merge:X,pick:B,pushUnique:j,splat:O,syncTimeout:R}=m;class L{constructor($,F,H){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=$,this.init($,F),this.pointer=H}bodyFormatter($){return $.map(function(F){let H=F.series.tooltipOptions;return(H[(F.point.formatPrefix||"point")+"Formatter"]||F.point.tooltipFormatter).call(F.point,H[(F.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit($){this.chart.series.forEach(function(F){let H=F&&F.tt;H&&(!H.isActive||$?F.tt=H.destroy():H.isActive=!1)})}defaultFormatter($){let F,H=this.points||O(this);return(F=(F=[$.tooltipFooterHeaderFormatter(H[0])]).concat($.bodyFormatter(H))).push($.tooltipFooterHeaderFormatter(H[0],!0)),F}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),m.clearTimeout(this.hideTimer)}getAnchor($,F){let H,{chart:W,pointer:re}=this,he=W.inverted,ie=W.plotTop,ae=W.plotLeft;if(($=O($))[0].series&&$[0].series.yAxis&&!$[0].series.yAxis.options.reversedStacks&&($=$.slice().reverse()),this.followPointer&&F)F.chartX===void 0&&(F=re.normalize(F)),H=[F.chartX-ae,F.chartY-ie];else if($[0].tooltipPos)H=$[0].tooltipPos;else{let Ce=0,ge=0;$.forEach(function(ke){let K=ke.pos(!0);K&&(Ce+=K[0],ge+=K[1])}),Ce/=$.length,ge/=$.length,this.shared&&$.length>1&&F&&(he?Ce=F.chartX:ge=F.chartY),H=[Ce-ae,ge-ie]}return H.map(Math.round)}getClassName($,F,H){let W=this.options,re=$.series,he=re.options;return[W.className,"highcharts-label",H&&"highcharts-tooltip-header",F?"highcharts-tooltip-box":"highcharts-tooltip",!H&&"highcharts-color-"+B($.colorIndex,re.colorIndex),he&&he.className].filter(Y).join(" ")}getLabel({anchorX:$,anchorY:F}={anchorX:0,anchorY:0}){let H=this,W=this.chart.styledMode,re=this.options,he=this.split&&this.allowShared,ie=this.container,ae=this.chart.renderer;if(this.label){let Ce=!this.label.hasClass("highcharts-label");(!he&&Ce||he&&!Ce)&&this.destroy()}if(!this.label){if(this.outside){let Ce=this.chart.options.chart.style,ge=p.getRendererType();this.container=ie=h.doc.createElement("div"),ie.className="highcharts-tooltip-container",A(ie,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(Ce&&Ce.zIndex||0)+3)}),this.renderer=ae=new ge(ie,0,0,Ce,void 0,void 0,ae.styledMode)}if(he?this.label=ae.g("tooltip"):(this.label=ae.label("",$,F,re.shape,void 0,void 0,re.useHTML,void 0,"tooltip").attr({padding:re.padding,r:re.borderRadius}),W||this.label.attr({fill:re.backgroundColor,"stroke-width":re.borderWidth||0}).css(re.style).css({pointerEvents:re.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),H.outside){let Ce=this.label;[Ce.xSetter,Ce.ySetter].forEach((ge,ke)=>{Ce[ke?"ySetter":"xSetter"]=K=>{ge.call(Ce,H.distance),Ce[ke?"y":"x"]=K,ie&&(ie.style[ke?"top":"left"]=`${K}px`)}})}this.label.attr({zIndex:8}).shadow(re.shadow).add()}return ie&&!ie.parentElement&&h.doc.body.appendChild(ie),this.label}getPlayingField(){let{body:$,documentElement:F}=b,{chart:H,distance:W,outside:re}=this;return{width:re?Math.max($.scrollWidth,F.scrollWidth,$.offsetWidth,F.offsetWidth,F.clientWidth)-2*W:H.chartWidth,height:re?Math.max($.scrollHeight,F.scrollHeight,$.offsetHeight,F.offsetHeight,F.clientHeight):H.chartHeight}}getPosition($,F,H){var Pe,je;let{distance:W,chart:re,outside:he,pointer:ie}=this,{inverted:ae,plotLeft:Ce,plotTop:ge,polar:ke}=re,{plotX:K=0,plotY:Q=0}=H,le={},_e=ae&&H.h||0,{height:J,width:ne}=this.getPlayingField(),ue=ie.getChartPosition(),ye=Xe=>Xe*ue.scaleX,we=Xe=>Xe*ue.scaleY,ze=Xe=>{let tt=Xe==="x";return[Xe,tt?ne:J,tt?$:F].concat(he?[tt?ye($):we(F),tt?ue.left-W+ye(K+Ce):ue.top-W+we(Q+ge),0,tt?ne:J]:[tt?$:F,tt?K+Ce:Q+ge,tt?Ce:ge,tt?Ce+re.plotWidth:ge+re.plotHeight])},Ee=ze("y"),Ie=ze("x"),Fe,He=!!H.negative;!ke&&((je=(Pe=re.hoverSeries)==null?void 0:Pe.yAxis)!=null&&je.reversed)&&(He=!He);let Ae=!this.followPointer&&B(H.ttBelow,!ke&&!ae===He),xe=function(Xe,tt,rt,dt,gt,wt,Rt){let ft=he?Xe==="y"?we(W):ye(W):W,Et=(rt-dt)/2,Tt=dt<gt-W,si=gt+W+dt<tt,ui=gt-ft-rt+Et,Wt=gt+ft-Et;if(Ae&&si)le[Xe]=Wt;else if(!Ae&&Tt)le[Xe]=ui;else if(Tt)le[Xe]=Math.min(Rt-dt,ui-_e<0?ui:ui-_e);else{if(!si)return!1;le[Xe]=Math.max(wt,Wt+_e+rt>tt?Wt:Wt+_e)}},me=function(Xe,tt,rt,dt,gt){if(gt<W||gt>tt-W)return!1;gt<rt/2?le[Xe]=1:gt>tt-dt/2?le[Xe]=tt-dt-2:le[Xe]=gt-rt/2},Me=function(Xe){[Ee,Ie]=[Ie,Ee],Fe=Xe},De=()=>{xe.apply(0,Ee)!==!1?me.apply(0,Ie)!==!1||Fe||(Me(!0),De()):Fe?le.x=le.y=0:(Me(!0),De())};return(ae&&!ke||this.len>1)&&Me(),De(),le}hide($){let F=this;m.clearTimeout(this.hideTimer),$=B($,this.options.hideDelay),this.isHidden||(this.hideTimer=R(function(){let H=F.getLabel();F.getLabel().animate({opacity:0},{duration:$&&150,complete:()=>{H.hide(),F.container&&F.container.remove()}}),F.isHidden=!0},$))}init($,F){this.chart=$,this.options=F,this.crosshairs=[],this.isHidden=!0,this.split=F.split&&!$.inverted&&!$.polar,this.shared=F.shared||this.split,this.outside=B(F.outside,!!($.scrollablePixelsX||$.scrollablePixelsY))}shouldStickOnContact($){return!!(!this.followPointer&&this.options.stickOnContact&&(!$||this.pointer.inClass($.target,"highcharts-tooltip")))}move($,F,H,W){let re=this,he=v(!re.isHidden&&re.options.animation),ie=re.followPointer||(re.len||0)>1,ae={x:$,y:F};ie||(ae.anchorX=H,ae.anchorY=W),he.step=()=>re.drawTracker(),re.getLabel().animate(ae,he)}refresh($,F){let{chart:H,options:W,pointer:re,shared:he}=this,ie=O($),ae=ie[0],Ce=[],ge=W.format,ke=W.formatter||this.defaultFormatter,K=H.styledMode,Q={},le=this.allowShared;if(!W.enabled||!ae.series)return;m.clearTimeout(this.hideTimer),this.allowShared=!(!N($)&&$.series&&$.series.noSharedTooltip),le=le&&!this.allowShared,this.followPointer=!this.split&&ae.series.tooltipOptions.followPointer;let _e=this.getAnchor($,F),J=_e[0],ne=_e[1];he&&this.allowShared?(re.applyInactiveState(ie),ie.forEach(function(we){we.setState("hover"),Ce.push(we.getLabelConfig())}),(Q=ae.getLabelConfig()).points=Ce):Q=ae.getLabelConfig(),this.len=Ce.length;let ue=Y(ge)?y(ge,Q,H):ke.call(Q,this),ye=ae.series;if(this.distance=B(ye.tooltipOptions.distance,16),ue===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ue,ie);else{let we=J,ze=ne;if(F&&re.isDirectTouch&&(we=F.chartX-H.plotLeft,ze=F.chartY-H.plotTop),H.polar||ye.options.clip===!1||ie.some(Ee=>re.isDirectTouch||Ee.series.shouldShowTooltip(we,ze))){let Ee=this.getLabel(le&&this.tt||{});(!W.style.width||K)&&Ee.css({width:(this.outside?this.getPlayingField():H.spacingBox).width+"px"}),Ee.attr({class:this.getClassName(ae),text:ue&&ue.join?ue.join(""):ue}),this.outside&&Ee.attr({x:x(Ee.x||0,0,this.getPlayingField().width-(Ee.width||0))}),K||Ee.attr({stroke:W.borderColor||ae.color||ye.color||"#666666"}),this.updatePosition({plotX:J,plotY:ne,negative:ae.negative,ttBelow:ae.ttBelow,h:_e[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}I(this,"refresh")}renderSplit($,F){var tt;let H=this,{chart:W,chart:{chartWidth:re,chartHeight:he,plotHeight:ie,plotLeft:ae,plotTop:Ce,scrollablePixelsY:ge=0,scrollablePixelsX:ke,styledMode:K},distance:Q,options:le,options:{positioner:_e},pointer:J}=H,{scrollLeft:ne=0,scrollTop:ue=0}=((tt=W.scrollablePlotArea)==null?void 0:tt.scrollingContainer)||{},ye=H.outside&&typeof ke!="number"?b.documentElement.getBoundingClientRect():{left:ne,right:ne+re,top:ue,bottom:ue+he},we=H.getLabel(),ze=this.renderer||W.renderer,Ee=!!(W.xAxis[0]&&W.xAxis[0].opposite),{left:Ie,top:Fe}=J.getChartPosition(),He=Ce+ue,Ae=0,xe=ie-ge;function me(rt,dt,gt,wt,Rt=!0){let ft,Et;return gt?(ft=Ee?0:xe,Et=x(rt-wt/2,ye.left,ye.right-wt-(H.outside?Ie:0))):(ft=dt-He,Et=x(Et=Rt?rt-wt-Q:rt+Q,Rt?Et:ye.left,ye.right)),{x:Et,y:ft}}Y($)&&($=[!1,$]);let Me=$.slice(0,F.length+1).reduce(function(rt,dt,gt){if(dt!==!1&&dt!==""){let wt=F[gt-1]||{isHeader:!0,plotX:F[0].plotX,plotY:ie,series:{}},Rt=wt.isHeader,ft=Rt?H:wt.series,Et=ft.tt=function(ar,Xi,mr){let Nr=ar,{isHeader:ir,series:ut}=Xi;if(!Nr){let vt={padding:le.padding,r:le.borderRadius};K||(vt.fill=le.backgroundColor,vt["stroke-width"]=le.borderWidth??1),Nr=ze.label("",0,0,le[ir?"headerShape":"shape"],void 0,void 0,le.useHTML).addClass(H.getClassName(Xi,!0,ir)).attr(vt).add(we)}return Nr.isActive=!0,Nr.attr({text:mr}),K||Nr.css(le.style).attr({stroke:le.borderColor||Xi.color||ut.color||"#333333"}),Nr}(ft.tt,wt,dt.toString()),Tt=Et.getBBox(),si=Tt.width+Et.strokeWidth();Rt&&(Ae=Tt.height,xe+=Ae,Ee&&(He-=Ae));let{anchorX:ui,anchorY:Wt}=function(ar){let Xi,mr,{isHeader:Nr,plotX:ir=0,plotY:ut=0,series:vt}=ar;if(Nr)Xi=Math.max(ae+ir,ae),mr=Ce+ie/2;else{let{xAxis:Pt,yAxis:Bt}=vt;Xi=Pt.pos+x(ir,-Q,Pt.len+Q),vt.shouldShowTooltip(0,Bt.pos-Ce+ut,{ignoreX:!0})&&(mr=Bt.pos+ut)}return{anchorX:Xi=x(Xi,ye.left-Q,ye.right+Q),anchorY:mr}}(wt);if(typeof Wt=="number"){let ar=Tt.height+1,Xi=_e?_e.call(H,si,ar,wt):me(ui,Wt,Rt,si);rt.push({align:_e?0:void 0,anchorX:ui,anchorY:Wt,boxWidth:si,point:wt,rank:B(Xi.rank,Rt?1:0),size:ar,target:Xi.y,tt:Et,x:Xi.x})}else Et.isActive=!1}return rt},[]);!_e&&Me.some(rt=>{let{outside:dt}=H,gt=(dt?Ie:0)+rt.anchorX;return gt<ye.left&&gt+rt.boxWidth<ye.right||gt<Ie-ye.left+rt.boxWidth&&ye.right-gt>gt})&&(Me=Me.map(rt=>{let{x:dt,y:gt}=me(rt.anchorX,rt.anchorY,rt.point.isHeader,rt.boxWidth,!1);return w(rt,{target:gt,x:dt})})),H.cleanSplit(),S(Me,xe);let De={left:Ie,right:Ie};Me.forEach(function(rt){let{x:dt,boxWidth:gt,isHeader:wt}=rt;!wt&&(H.outside&&Ie+dt<De.left&&(De.left=Ie+dt),!wt&&H.outside&&De.left+gt>De.right&&(De.right=Ie+dt))}),Me.forEach(function(rt){let{x:dt,anchorX:gt,anchorY:wt,pos:Rt,point:{isHeader:ft}}=rt,Et={visibility:Rt===void 0?"hidden":"inherit",x:dt,y:(Rt||0)+He,anchorX:gt,anchorY:wt};if(H.outside&&dt<gt){let Tt=Ie-De.left;Tt>0&&(ft||(Et.x=dt+Tt,Et.anchorX=gt+Tt),ft&&(Et.x=(De.right-De.left)/2,Et.anchorX=gt+Tt))}rt.tt.attr(Et)});let{container:Pe,outside:je,renderer:Xe}=H;if(je&&Pe&&Xe){let{width:rt,height:dt,x:gt,y:wt}=we.getBBox();Xe.setSize(rt+gt,dt+wt,!1),Pe.style.left=De.left+"px",Pe.style.top=Fe+"px"}T&&we.attr({opacity:we.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let $=this.chart,F=this.label,H=this.shared?$.hoverPoints:$.hoverPoint;if(!F||!H)return;let W={x:0,y:0,width:0,height:0},re=this.getAnchor(H),he=F.getBBox();re[0]+=$.plotLeft-(F.translateX||0),re[1]+=$.plotTop-(F.translateY||0),W.x=Math.min(0,re[0]),W.y=Math.min(0,re[1]),W.width=re[0]<0?Math.max(Math.abs(re[0]),he.width-re[0]):Math.max(Math.abs(re[0]),he.width),W.height=re[1]<0?Math.max(Math.abs(re[1]),he.height-Math.abs(re[1])):Math.max(Math.abs(re[1]),he.height),this.tracker?this.tracker.attr(W):(this.tracker=F.renderer.rect(W).addClass("highcharts-tracker").add(F),$.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat($){return $.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter($,F){let H=$.series,W=H.tooltipOptions,re=H.xAxis,he=re&&re.dateTime,ie={isFooter:F,labelConfig:$},ae=W.xDateFormat,Ce=W[F?"footerFormat":"headerFormat"];return I(this,"headerFormatter",ie,function(ge){he&&!ae&&q($.key)&&(ae=he.getXDateFormat($.key,W.dateTimeLabelFormats)),he&&ae&&($.point&&$.point.tooltipDateKeys||["key"]).forEach(function(ke){Ce=Ce.replace("{point."+ke+"}","{point."+ke+":"+ae+"}")}),H.chart.styledMode&&(Ce=this.styledModeFormat(Ce)),ge.text=y(Ce,{point:$,series:H},this.chart)}),ie.text}update($){this.destroy(),this.init(this.chart,X(!0,this.options,$))}updatePosition($){let{chart:F,container:H,distance:W,options:re,pointer:he,renderer:ie}=this,{height:ae=0,width:Ce=0}=this.getLabel(),{left:ge,top:ke,scaleX:K,scaleY:Q}=he.getChartPosition(),le=(re.positioner||this.getPosition).call(this,Ce,ae,$),_e=($.plotX||0)+F.plotLeft,J=($.plotY||0)+F.plotTop,ne;ie&&H&&(re.positioner&&(le.x+=ge-W,le.y+=ke-W),ne=(re.borderWidth||0)+2*W+2,ie.setSize(Ce+ne,ae+ne,!1),(K!==1||Q!==1)&&(A(H,{transform:`scale(${K}, ${Q})`}),_e*=K,J*=Q),_e+=ge-le.x,J+=ke-le.y),this.move(Math.round(le.x),Math.round(le.y||0),_e,J)}}return(g=L).compose=function(G){j(C,"Core.Tooltip")&&k(G,"afterInit",function(){let $=this.chart;$.options.tooltip&&($.tooltip=new g($,$.options.tooltip,this))})},L}),s(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{animObject:m}=l,{defaultOptions:g}=h,{format:v}=r,{addEvent:y,crisp:C,erase:b,extend:T,fireEvent:S,getNestedProperty:k,isArray:x,isFunction:A,isNumber:D,isObject:w,merge:I,pick:N,syncTimeout:q,removeEvent:Y,uniqueKey:X}=p;class B{animateBeforeDestroy(){let O=this,R={x:O.startXPos,opacity:0},L=O.getGraphicalProps();L.singular.forEach(function(G){O[G]=O[G].animate(G==="dataLabel"?{x:O[G].startXPos,y:O[G].startYPos,opacity:0}:R)}),L.plural.forEach(function(G){O[G].forEach(function($){$.element&&$.animate(T({x:O.startXPos},$.startYPos?{x:$.startXPos,y:$.startYPos}:{}))})})}applyOptions(O,R){let L=this.series,G=L.options.pointValKey||L.pointValKey;return T(this,O=B.prototype.optionsToObject.call(this,O)),this.options=this.options?T(this.options,O):O,O.group&&delete this.group,O.dataLabels&&delete this.dataLabels,G&&(this.y=B.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&R===void 0&&L.xAxis&&L.xAxis.hasNames&&(this.x=L.xAxis.nameToX(this)),this.x===void 0&&L?this.x=R??L.autoIncrement():D(O.x)&&L.options.relativeXValue&&(this.x=L.autoIncrement(O.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let O=this,R=O.series,L=R.chart,G=R.options.dataSorting,$=L.hoverPoints,F=m(O.series.chart.renderer.globalAnimation),H=()=>{for(let W in(O.graphic||O.graphics||O.dataLabel||O.dataLabels)&&(Y(O),O.destroyElements()),O)delete O[W]};O.legendItem&&L.legend.destroyItem(O),$&&(O.setState(),b($,O),$.length||(L.hoverPoints=null)),O===L.hoverPoint&&O.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),q(H,F.duration)):H(),L.pointCount--}this.destroyed=!0}destroyElements(O){let R=this,L=R.getGraphicalProps(O);L.singular.forEach(function(G){R[G]=R[G].destroy()}),L.plural.forEach(function(G){R[G].forEach(function($){$&&$.element&&$.destroy()}),delete R[G]})}firePointEvent(O,R,L){let G=this,$=this.series.options;G.manageEvent(O),O==="click"&&$.allowPointSelect&&(L=function(F){!G.destroyed&&G.select&&G.select(null,F.ctrlKey||F.metaKey||F.shiftKey)}),S(G,O,R,L)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(O){let R,L,G=this,$=[],F={singular:[],plural:[]};for((O=O||{graphic:1,dataLabel:1}).graphic&&$.push("graphic","connector"),O.dataLabel&&$.push("dataLabel","dataLabelPath","dataLabelUpper"),L=$.length;L--;)G[R=$[L]]&&F.singular.push(R);return["graphic","dataLabel"].forEach(function(H){let W=H+"s";O[H]&&G[W]&&F.plural.push(W)}),F}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(O){return O?O.indexOf("custom.")===0?k(O,this.options):this[O]:void 0}getZone(){let O=this.series,R=O.zones,L=O.zoneAxis||"y",G,$=0;for(G=R[0];this[L]>=G.value;)G=R[++$];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(O,R,L){this.formatPrefix="point",this.visible=!0,this.series=O,this.applyOptions(R,L),this.id??(this.id=X()),this.resolveColor(),O.chart.pointCount++,S(this,"afterInit")}isValid(){return(D(this.x)||this.x instanceof Date)&&D(this.y)}optionsToObject(O){let R=this.series,L=R.options.keys,G=L||R.pointArrayMap||["y"],$=G.length,F={},H,W=0,re=0;if(D(O)||O===null)F[G[0]]=O;else if(x(O))for(!L&&O.length>$&&((H=typeof O[0])=="string"?F.name=O[0]:H==="number"&&(F.x=O[0]),W++);re<$;)L&&O[W]===void 0||(G[re].indexOf(".")>0?B.prototype.setNestedProperty(F,O[W],G[re]):F[G[re]]=O[W]),W++,re++;else typeof O=="object"&&(F=O,O.dataLabels&&(R.hasDataLabels=()=>!0),O.marker&&(R._hasPointMarkers=!0));return F}pos(O,R=this.plotY){if(!this.destroyed){let{plotX:L,series:G}=this,{chart:$,xAxis:F,yAxis:H}=G,W=0,re=0;if(D(L)&&D(R))return O&&(W=F?F.pos:$.plotLeft,re=H?H.pos:$.plotTop),$.inverted&&F&&H?[H.len-R+re,F.len-L+W]:[L+W,R+re]}}resolveColor(){let O=this.series,R=O.chart.options.chart,L=O.chart.styledMode,G,$,F=R.colorCount,H;delete this.nonZonedColor,O.options.colorByPoint?(L||(G=($=O.options.colors||O.chart.options.colors)[O.colorCounter],F=$.length),H=O.colorCounter,O.colorCounter++,O.colorCounter===F&&(O.colorCounter=0)):(L||(G=O.color),H=O.colorIndex),this.colorIndex=N(this.options.colorIndex,H),this.color=N(this.options.color,G)}setNestedProperty(O,R,L){return L.split(".").reduce(function(G,$,F,H){let W=H.length-1===F;return G[$]=W?R:w(G[$],!0)?G[$]:{},G[$]},O),O}shouldDraw(){return!this.isNull}tooltipFormatter(O){let R=this.series,L=R.tooltipOptions,G=N(L.valueDecimals,""),$=L.valuePrefix||"",F=L.valueSuffix||"";return R.chart.styledMode&&(O=R.chart.tooltip.styledModeFormat(O)),(R.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,($||F)&&(O=O.replace(RegExp(H+"}","g"),$+H+"}"+F)),O=O.replace(RegExp(H+"}","g"),H+":,."+G+"f}")}),v(O,{point:this,series:this.series},R.chart)}update(O,R,L,G){let $,F=this,H=F.series,W=F.graphic,re=H.chart,he=H.options;function ie(){F.applyOptions(O);let ae=W&&F.hasMockGraphic,Ce=F.y===null?!ae:ae;W&&Ce&&(F.graphic=W.destroy(),delete F.hasMockGraphic),w(O,!0)&&(W&&W.element&&O&&O.marker&&O.marker.symbol!==void 0&&(F.graphic=W.destroy()),O!=null&&O.dataLabels&&F.dataLabel&&(F.dataLabel=F.dataLabel.destroy())),$=F.index,H.updateParallelArrays(F,$),he.data[$]=w(he.data[$],!0)||w(O,!0)?F.options:N(O,he.data[$]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(re.isDirtyBox=!0),he.legendType==="point"&&(re.isDirtyLegend=!0),R&&re.redraw(L)}R=N(R,!0),G===!1?ie():F.firePointEvent("update",{options:O},ie)}remove(O,R){this.series.removePoint(this.series.data.indexOf(this),O,R)}select(O,R){let L=this,G=L.series,$=G.chart;O=N(O,!L.selected),this.selectedStaging=O,L.firePointEvent(O?"select":"unselect",{accumulate:R},function(){L.selected=L.options.selected=O,G.options.data[G.data.indexOf(L)]=L.options,L.setState(O&&"select"),R||$.getSelectedPoints().forEach(function(F){let H=F.series;F.selected&&F!==L&&(F.selected=F.options.selected=!1,H.options.data[H.data.indexOf(F)]=F.options,F.setState($.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),F.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(O){let{inverted:R,pointer:L}=this.series.chart;L&&(O=O?L.normalize(O):L.getChartCoordinatesFromPoint(this,R),L.runPointActions(O,this))}onMouseOut(){let O=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(O.hoverPoints||[]).forEach(function(R){R.setState()}),O.hoverPoints=O.hoverPoint=null}manageEvent(O){var G,$,F,H,W,re;let R=I(this.series.options.point,this.options),L=(G=R.events)==null?void 0:G[O];A(L)&&(!(($=this.hcEvents)!=null&&$[O])||((H=(F=this.hcEvents)==null?void 0:F[O])==null?void 0:H.map(he=>he.fn).indexOf(L))===-1)?((W=this.importedUserEvent)==null||W.call(this),this.importedUserEvent=y(this,O,L)):this.importedUserEvent&&!L&&((re=this.hcEvents)!=null&&re[O])&&(Y(this,O),delete this.hcEvents[O],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(O,R){var ue;let L=this.series,G=this.state,$=L.options.states[O||"normal"]||{},F=g.plotOptions[L.type].marker&&L.options.marker,H=F&&F.enabled===!1,W=F&&F.states&&F.states[O||"normal"]||{},re=W.enabled===!1,he=this.marker||{},ie=L.chart,ae=F&&L.markerAttribs,Ce=L.halo,ge,ke,K,Q=L.stateMarkerGraphic,le;if((O=O||"")===this.state&&!R||this.selected&&O!=="select"||$.enabled===!1||O&&(re||H&&W.enabled===!1)||O&&he.states&&he.states[O]&&he.states[O].enabled===!1)return;if(this.state=O,ae&&(ge=L.markerAttribs(this,O)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),O&&this.graphic.addClass("highcharts-point-"+O),!ie.styledMode){ke=L.pointAttribs(this,O),K=N(ie.options.chart.animation,$.animation);let ye=ke.opacity;L.options.inactiveOtherPoints&&D(ye)&&(this.dataLabels||[]).forEach(function(we){we&&!we.hasClass("highcharts-data-label-hidden")&&(we.animate({opacity:ye},K),we.connector&&we.connector.animate({opacity:ye},K))}),this.graphic.animate(ke,K)}ge&&this.graphic.animate(ge,N(ie.options.chart.animation,W.animation,F.animation)),Q&&Q.hide()}else O&&W&&(le=he.symbol||L.symbol,Q&&Q.currentSymbol!==le&&(Q=Q.destroy()),ge&&(Q?Q[R?"animate":"attr"]({x:ge.x,y:ge.y}):le&&(L.stateMarkerGraphic=Q=ie.renderer.symbol(le,ge.x,ge.y,ge.width,ge.height).add(L.markerGroup),Q.currentSymbol=le)),!ie.styledMode&&Q&&this.state!=="inactive"&&Q.attr(L.pointAttribs(this,O))),Q&&(Q[O&&this.isInside?"show":"hide"](),Q.element.point=this,Q.addClass(this.getClassName(),!0));let _e=$.halo,J=this.graphic||Q,ne=J&&J.visibility||"inherit";_e&&_e.size&&J&&ne!=="hidden"&&!this.isCluster?(Ce||(L.halo=Ce=ie.renderer.path().add(J.parentGroup)),Ce.show()[R?"animate":"attr"]({d:this.haloPath(_e.size)}),Ce.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,L.colorIndex)+(this.className?" "+this.className:""),visibility:ne,zIndex:-1}),Ce.point=this,ie.styledMode||Ce.attr(T({fill:this.color||L.color,"fill-opacity":_e.opacity},a.filterUserAttributes(_e.attributes||{})))):(ue=Ce==null?void 0:Ce.point)!=null&&ue.haloPath&&!Ce.point.destroyed&&Ce.animate({d:Ce.point.haloPath(0)},null,Ce.hide),S(this,"afterSetState",{state:O})}haloPath(O){let R=this.pos();return R?this.series.chart.renderer.symbols.circle(C(R[0],1)-O,R[1]-O,2*O,2*O):[]}}return B}),s(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){var r;let{parse:p}=a,{charts:m,composed:g,isTouchDevice:v}=l,{addEvent:y,attr:C,css:b,extend:T,find:S,fireEvent:k,isNumber:x,isObject:A,objectEach:D,offset:w,pick:I,pushUnique:N,splat:q}=h;class Y{applyInactiveState(B){let j=[],O;(B||[]).forEach(function(R){O=R.series,j.push(O),O.linkedParent&&j.push(O.linkedParent),O.linkedSeries&&(j=j.concat(O.linkedSeries)),O.navigatorSeries&&j.push(O.navigatorSeries)}),this.chart.series.forEach(function(R){j.indexOf(R)===-1?R.setState("inactive",!0):R.options.inactiveOtherPoints&&R.setAllPointsToState("inactive")})}destroy(){let B=this;this.eventsToUnbind.forEach(j=>j()),this.eventsToUnbind=[],!l.chartCount&&(Y.unbindDocumentMouseUp&&Y.unbindDocumentMouseUp.forEach(j=>j()),Y.unbindDocumentTouchEnd&&(Y.unbindDocumentTouchEnd=Y.unbindDocumentTouchEnd())),clearInterval(B.tooltipTimeout),D(B,function(j,O){B[O]=void 0})}getSelectionMarkerAttrs(B,j){let O={args:{chartX:B,chartY:j},attrs:{},shapeType:"rect"};return k(this,"getSelectionMarkerAttrs",O,R=>{let L,{chart:G,zoomHor:$,zoomVert:F}=this,{mouseDownX:H=0,mouseDownY:W=0}=G,re=R.attrs;re.x=G.plotLeft,re.y=G.plotTop,re.width=$?1:G.plotWidth,re.height=F?1:G.plotHeight,$&&(L=B-H,re.width=Math.max(1,Math.abs(L)),re.x=(L>0?0:L)+H),F&&(L=j-W,re.height=Math.max(1,Math.abs(L)),re.y=(L>0?0:L)+W)}),O}drag(B){let{chart:j}=this,{mouseDownX:O=0,mouseDownY:R=0}=j,{panning:L,panKey:G,selectionMarkerFill:$}=j.options.chart,F=j.plotLeft,H=j.plotTop,W=j.plotWidth,re=j.plotHeight,he=A(L)?L.enabled:L,ie=G&&B[`${G}Key`],ae=B.chartX,Ce=B.chartY,ge,ke=this.selectionMarker;if((!ke||!ke.touch)&&(ae<F?ae=F:ae>F+W&&(ae=F+W),Ce<H?Ce=H:Ce>H+re&&(Ce=H+re),this.hasDragged=Math.sqrt(Math.pow(O-ae,2)+Math.pow(R-Ce,2)),this.hasDragged>10)){ge=j.isInsidePlot(O-F,R-H,{visiblePlotOnly:!0});let{shapeType:K,attrs:Q}=this.getSelectionMarkerAttrs(ae,Ce);(j.hasCartesianSeries||j.mapView)&&this.hasZoom&&ge&&!ie&&!ke&&(this.selectionMarker=ke=j.renderer[K](),ke.attr({class:"highcharts-selection-marker",zIndex:7}).add(),j.styledMode||ke.attr({fill:$||p("#334eff").setOpacity(.25).get()})),ke&&ke.attr(Q),ge&&!ke&&he&&j.pan(B,L)}}dragStart(B){let j=this.chart;j.mouseIsDown=B.type,j.cancelClick=!1,j.mouseDownX=B.chartX,j.mouseDownY=B.chartY}getSelectionBox(B){let j={args:{marker:B},result:B.getBBox()};return k(this,"getSelectionBox",j),j.result}drop(B){let j,{chart:O,selectionMarker:R}=this;for(let L of O.axes)L.isPanning&&(L.isPanning=!1,(L.options.startOnTick||L.options.endOnTick||L.series.some(G=>G.boosted))&&(L.forceRedraw=!0,L.setExtremes(L.userMin,L.userMax,!1),j=!0));if(j&&O.redraw(),R&&B){if(this.hasDragged){let L=this.getSelectionBox(R);O.transform({axes:O.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:B,xAxis:[],yAxis:[],...L},from:L})}x(O.index)&&(this.selectionMarker=R.destroy())}O&&x(O.index)&&(b(O.container,{cursor:O._cursor}),O.cancelClick=this.hasDragged>10,O.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(B,j,O){let R;return B.forEach(function(L){let G=!(L.noSharedTooltip&&j)&&0>L.options.findNearestPointBy.indexOf("y"),$=L.searchPoint(O,G);A($,!0)&&$.series&&(!A(R,!0)||function(F,H){var ie,ae;let W=F.distX-H.distX,re=F.dist-H.dist,he=((ie=H.series.group)==null?void 0:ie.zIndex)-((ae=F.series.group)==null?void 0:ae.zIndex);return W!==0&&j?W:re!==0?re:he!==0?he:F.series.index>H.series.index?-1:1}(R,$)>0)&&(R=$)}),R}getChartCoordinatesFromPoint(B,j){let{xAxis:O,yAxis:R}=B.series,L=B.shapeArgs;if(O&&R){let G=B.clientX??B.plotX??0,$=B.plotY||0;return B.isNode&&L&&x(L.x)&&x(L.y)&&(G=L.x,$=L.y),j?{chartX:R.len+R.pos-$,chartY:O.len+O.pos-G}:{chartX:G+O.pos,chartY:$+R.pos}}if(L&&L.x&&L.y)return{chartX:L.x,chartY:L.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:B}=this.chart,j=w(B);this.chartPosition={left:j.left,top:j.top,scaleX:1,scaleY:1};let{offsetHeight:O,offsetWidth:R}=B;return R>2&&O>2&&(this.chartPosition.scaleX=j.width/R,this.chartPosition.scaleY=j.height/O),this.chartPosition}getCoordinates(B){let j={xAxis:[],yAxis:[]};for(let O of this.chart.axes)j[O.isXAxis?"xAxis":"yAxis"].push({axis:O,value:O.toValue(B[O.horiz?"chartX":"chartY"])});return j}getHoverData(B,j,O,R,L,G){let $=[],F=function(ie){return ie.visible&&!(!L&&ie.directTouch)&&I(ie.options.enableMouseTracking,!0)},H=j,W,re={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:L};k(this,"beforeGetHoverData",re),W=H&&!H.stickyTracking?[H]:O.filter(ie=>ie.stickyTracking&&(re.filter||F)(ie));let he=R&&B||!G?B:this.findNearestKDPoint(W,L,G);return H=he&&he.series,he&&(L&&!H.noSharedTooltip?(W=O.filter(function(ie){return re.filter?re.filter(ie):F(ie)&&!ie.noSharedTooltip})).forEach(function(ie){let ae=S(ie.points,function(Ce){return Ce.x===he.x&&!Ce.isNull});A(ae)&&(ie.boosted&&ie.boost&&(ae=ie.boost.getPoint(ae)),$.push(ae))}):$.push(he)),k(this,"afterGetHoverData",re={hoverPoint:he}),{hoverPoint:re.hoverPoint,hoverSeries:H,hoverPoints:$}}getPointFromEvent(B){let j=B.target,O;for(;j&&!O;)O=j.point,j=j.parentNode;return O}onTrackerMouseOut(B){let j=this.chart,O=B.relatedTarget,R=j.hoverSeries;this.isDirectTouch=!1,!R||!O||R.stickyTracking||this.inClass(O,"highcharts-tooltip")||this.inClass(O,"highcharts-series-"+R.index)&&this.inClass(O,"highcharts-tracker")||R.onMouseOut()}inClass(B,j){let O=B,R;for(;O;){if(R=C(O,"class")){if(R.indexOf(j)!==-1)return!0;if(R.indexOf("highcharts-container")!==-1)return!1}O=O.parentElement}}constructor(B,j){var O;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=j,this.chart=B,this.runChartClick=!!((O=j.chart.events)!=null&&O.click),this.pinchDown=[],this.setDOMEvents(),k(this,"afterInit")}normalize(B,j){let O=B.touches,R=O?O.length?O.item(0):I(O.changedTouches,B.changedTouches)[0]:B;j||(j=this.getChartPosition());let L=R.pageX-j.left,G=R.pageY-j.top;return T(B,{chartX:Math.round(L/=j.scaleX),chartY:Math.round(G/=j.scaleY)})}onContainerClick(B){let j=this.chart,O=j.hoverPoint,R=this.normalize(B),L=j.plotLeft,G=j.plotTop;!j.cancelClick&&(O&&this.inClass(R.target,"highcharts-tracker")?(k(O.series,"click",T(R,{point:O})),j.hoverPoint&&O.firePointEvent("click",R)):(T(R,this.getCoordinates(R)),j.isInsidePlot(R.chartX-L,R.chartY-G,{visiblePlotOnly:!0})&&k(j,"click",R)))}onContainerMouseDown(B){var O;let j=(1&(B.buttons||B.button))==1;B=this.normalize(B),l.isFirefox&&B.button!==0&&this.onContainerMouseMove(B),(B.button===void 0||j)&&(this.zoomOption(B),j&&((O=B.preventDefault)==null||O.call(B)),this.dragStart(B))}onContainerMouseLeave(B){let{pointer:j}=m[I(Y.hoverChartIndex,-1)]||{};B=this.normalize(B),this.onContainerMouseMove(B),j&&!this.inClass(B.relatedTarget,"highcharts-tooltip")&&(j.reset(),j.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(B){let j=this.chart,O=j.tooltip,R=this.normalize(B);this.setHoverChartIndex(B),(j.mouseIsDown==="mousedown"||this.touchSelect(R))&&this.drag(R),!j.openMenu&&(this.inClass(R.target,"highcharts-tracker")||j.isInsidePlot(R.chartX-j.plotLeft,R.chartY-j.plotTop,{visiblePlotOnly:!0}))&&!(O&&O.shouldStickOnContact(R))&&(this.inClass(R.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(R))}onDocumentTouchEnd(B){this.onDocumentMouseUp(B)}onContainerTouchMove(B){this.touchSelect(B)?this.onContainerMouseMove(B):this.touch(B)}onContainerTouchStart(B){this.touchSelect(B)?this.onContainerMouseDown(B):(this.zoomOption(B),this.touch(B,!0))}onDocumentMouseMove(B){let j=this.chart,O=j.tooltip,R=this.chartPosition,L=this.normalize(B,R);!R||j.isInsidePlot(L.chartX-j.plotLeft,L.chartY-j.plotTop,{visiblePlotOnly:!0})||O&&O.shouldStickOnContact(L)||L.target!==j.container.ownerDocument&&this.inClass(L.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(B){var j,O;(O=(j=m[I(Y.hoverChartIndex,-1)])==null?void 0:j.pointer)==null||O.drop(B)}pinch(B){let j=this,{chart:O,hasZoom:R,lastTouches:L}=j,G=[].map.call(B.touches||[],re=>j.normalize(re)),$=G.length,F=$===1&&(j.inClass(B.target,"highcharts-tracker")&&O.runTrackerClick||j.runChartClick),H=O.tooltip,W=$===1&&I(H==null?void 0:H.options.followTouchMove,!0);$>1?j.initiated=!0:W&&(j.initiated=!1),R&&j.initiated&&!F&&B.cancelable!==!1&&B.preventDefault(),B.type==="touchstart"?(j.pinchDown=G,j.res=!0,O.mouseDownX=B.chartX):W?this.runPointActions(j.normalize(B)):L&&(k(O,"touchpan",{originalEvent:B,touches:G},()=>{let re=he=>{let ie=he[0],ae=he[1]||ie;return{x:ie.chartX,y:ie.chartY,width:ae.chartX-ie.chartX,height:ae.chartY-ie.chartY}};O.transform({axes:O.axes.filter(he=>he.zoomEnabled&&(this.zoomHor&&he.horiz||this.zoomVert&&!he.horiz)),to:re(G),from:re(L),trigger:B.type})}),j.res&&(j.res=!1,this.reset(!1,0))),j.lastTouches=G}reset(B,j){let O=this.chart,R=O.hoverSeries,L=O.hoverPoint,G=O.hoverPoints,$=O.tooltip,F=$&&$.shared?G:L;B&&F&&q(F).forEach(function(H){H.series.isCartesian&&H.plotX===void 0&&(B=!1)}),B?$&&F&&q(F).length&&($.refresh(F),$.shared&&G?G.forEach(function(H){H.setState(H.state,!0),H.series.isCartesian&&(H.series.xAxis.crosshair&&H.series.xAxis.drawCrosshair(null,H),H.series.yAxis.crosshair&&H.series.yAxis.drawCrosshair(null,H))}):L&&(L.setState(L.state,!0),O.axes.forEach(function(H){H.crosshair&&L.series[H.coll]===H&&H.drawCrosshair(null,L)}))):(L&&L.onMouseOut(),G&&G.forEach(function(H){H.setState()}),R&&R.onMouseOut(),$&&$.hide(j),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),O.axes.forEach(function(H){H.hideCrosshair()}),O.hoverPoints=O.hoverPoint=void 0)}runPointActions(B,j,O){let R=this.chart,L=R.series,G=R.tooltip&&R.tooltip.options.enabled?R.tooltip:void 0,$=!!G&&G.shared,F=j||R.hoverPoint,H=F&&F.series||R.hoverSeries,W=(!B||B.type!=="touchmove")&&(!!j||H&&H.directTouch&&this.isDirectTouch),re=this.getHoverData(F,H,L,W,$,B);F=re.hoverPoint,H=re.hoverSeries;let he=re.hoverPoints,ie=H&&H.tooltipOptions.followPointer&&!H.tooltipOptions.split,ae=$&&H&&!H.noSharedTooltip;if(F&&(O||F!==R.hoverPoint||G&&G.isHidden)){if((R.hoverPoints||[]).forEach(function(Ce){he.indexOf(Ce)===-1&&Ce.setState()}),R.hoverSeries!==H&&H.onMouseOver(),this.applyInactiveState(he),(he||[]).forEach(function(Ce){Ce.setState("hover")}),R.hoverPoint&&R.hoverPoint.firePointEvent("mouseOut"),!F.series)return;R.hoverPoints=he,R.hoverPoint=F,F.firePointEvent("mouseOver",void 0,()=>{G&&F&&G.refresh(ae?he:F,B)})}else if(ie&&G&&!G.isHidden){let Ce=G.getAnchor([{}],B);R.isInsidePlot(Ce[0],Ce[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:Ce[0],plotY:Ce[1]})}this.unDocMouseMove||(this.unDocMouseMove=y(R.container.ownerDocument,"mousemove",Ce=>{var ge,ke;return(ke=(ge=m[Y.hoverChartIndex??-1])==null?void 0:ge.pointer)==null?void 0:ke.onDocumentMouseMove(Ce)}),this.eventsToUnbind.push(this.unDocMouseMove)),R.axes.forEach(function(Ce){let ge,ke=I((Ce.crosshair||{}).snap,!0);!ke||(ge=R.hoverPoint)&&ge.series[Ce.coll]===Ce||(ge=S(he,K=>K.series&&K.series[Ce.coll]===Ce)),ge||!ke?Ce.drawCrosshair(B,ge):Ce.hideCrosshair()})}setDOMEvents(){let B=this.chart.container,j=B.ownerDocument;B.onmousedown=this.onContainerMouseDown.bind(this),B.onmousemove=this.onContainerMouseMove.bind(this),B.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(y(B,"mouseenter",this.onContainerMouseEnter.bind(this)),y(B,"mouseleave",this.onContainerMouseLeave.bind(this))),Y.unbindDocumentMouseUp||(Y.unbindDocumentMouseUp=[]),Y.unbindDocumentMouseUp.push(y(j,"mouseup",this.onDocumentMouseUp.bind(this)));let O=this.chart.renderTo.parentElement;for(;O&&O.tagName!=="BODY";)this.eventsToUnbind.push(y(O,"scroll",()=>{delete this.chartPosition})),O=O.parentElement;this.eventsToUnbind.push(y(B,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),y(B,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Y.unbindDocumentTouchEnd||(Y.unbindDocumentTouchEnd=y(j,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),y(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var L,G;if(!v)return;let B=this.pointerCaptureEventsToUnbind,j=this.chart,O=j.container,R=I((L=j.options.tooltip)==null?void 0:L.followTouchMove,!0)&&j.series.some($=>$.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&R?(B.push(y(O,"pointerdown",$=>{var F,H;(F=$.target)!=null&&F.hasPointerCapture($.pointerId)&&((H=$.target)==null||H.releasePointerCapture($.pointerId))}),y(O,"pointermove",$=>{var F,H;(H=(F=j.pointer)==null?void 0:F.getPointFromEvent($))==null||H.onMouseOver($)})),j.styledMode||b(O,{"touch-action":"none"}),O.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!R&&(B.forEach($=>$()),B.length=0,j.styledMode||b(O,{"touch-action":I((G=j.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),O.className=O.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(B){var R;let j=this.chart,O=l.charts[I(Y.hoverChartIndex,-1)];if(O&&O!==j){let L={relatedTarget:j.container};B&&!(B!=null&&B.relatedTarget)&&(B={...L,...B}),(R=O.pointer)==null||R.onContainerMouseLeave(B||L)}O&&O.mouseIsDown||(Y.hoverChartIndex=j.index)}touch(B,j){let O,{chart:R,pinchDown:L=[]}=this;this.setHoverChartIndex(),(B=this.normalize(B)).touches.length===1?R.isInsidePlot(B.chartX-R.plotLeft,B.chartY-R.plotTop,{visiblePlotOnly:!0})&&!R.openMenu?(j&&this.runPointActions(B),B.type==="touchmove"&&(O=!!L[0]&&Math.pow(L[0].chartX-B.chartX,2)+Math.pow(L[0].chartY-B.chartY,2)>=16),I(O,!0)&&this.pinch(B)):j&&this.reset():B.touches.length===2&&this.pinch(B)}touchSelect(B){return!!(this.chart.zooming.singleTouch&&B.touches&&B.touches.length===1)}zoomOption(B){let j=this.chart,O=j.inverted,R=j.zooming.type||"",L,G;/touch/.test(B.type)&&(R=I(j.zooming.pinchType,R)),this.zoomX=L=/x/.test(R),this.zoomY=G=/y/.test(R),this.zoomHor=L&&!O||G&&O,this.zoomVert=G&&!O||L&&O,this.hasZoom=L||G}}return(r=Y).compose=function(X){N(g,"Core.Pointer")&&y(X,"beforeRender",function(){this.pointer=new r(this,this.options)})},Y}),s(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(a){var l;let{extend:h,merge:r,pick:p}=a;return function(m){function g(v,y,C){var O,R;let b=this.legendItem=this.legendItem||{},{chart:T,options:S}=this,{baseline:k=0,symbolWidth:x,symbolHeight:A}=v,D=this.symbol||"circle",w=A/2,I=T.renderer,N=b.group,q=k-Math.round((((O=v.fontMetrics)==null?void 0:O.b)||A)*(C?.4:.3)),Y={},X,B=S.marker,j=0;if(T.styledMode||(Y["stroke-width"]=Math.min(S.lineWidth||0,24),S.dashStyle?Y.dashstyle=S.dashStyle:S.linecap==="square"||(Y["stroke-linecap"]="round")),b.line=I.path().addClass("highcharts-graph").attr(Y).add(N),C&&(b.area=I.path().addClass("highcharts-area").add(N)),Y["stroke-linecap"]&&(j=Math.min(b.line.strokeWidth(),x)/2),x){let L=[["M",j,q],["L",x-j,q]];b.line.attr({d:L}),(R=b.area)==null||R.attr({d:[...L,["L",x-j,k],["L",j,k]]})}if(B&&B.enabled!==!1&&x){let L=Math.min(p(B.radius,w),w);D.indexOf("url")===0&&(B=r(B,{width:A,height:A}),L=0),b.symbol=X=I.symbol(D,x/2-L,q-L,2*L,2*L,h({context:"legend"},B)).addClass("highcharts-point").add(N),X.isMarker=!0}}m.areaMarker=function(v,y){g.call(this,v,y,!0)},m.lineMarker=g,m.rectangle=function(v,y){let C=y.legendItem||{},b=v.options,T=v.symbolHeight,S=b.squareSymbol,k=S?T:v.symbolWidth;C.symbol=this.chart.renderer.rect(S?(v.symbolWidth-T)/2:0,v.baseline-T+1,k,T,p(v.options.symbolRadius,T/2)).addClass("highcharts-point").attr({zIndex:3}).add(C.group)}}(l||(l={})),l}),s(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:a}=this.series.chart;return typeof this.y!="number"?"":a(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),s(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,l,h,r){var p;let{defaultOptions:m}=l,{extend:g,extendClass:v,merge:y}=r;return function(C){function b(T,S){let k=m.plotOptions||{},x=S.defaultOptions,A=S.prototype;return A.type=T,A.pointClass||(A.pointClass=h),!C.seriesTypes[T]&&(x&&(k[T]=x),C.seriesTypes[T]=S,!0)}C.seriesTypes=a.seriesTypes,C.registerSeriesType=b,C.seriesType=function(T,S,k,x,A){let D=m.plotOptions||{};if(S=S||"",D[T]=y(D[S],k),delete C.seriesTypes[T],b(T,v(C.seriesTypes[S]||function(){},x)),C.seriesTypes[T].prototype.type=T,A){class w extends h{}g(w.prototype,A),C.seriesTypes[T].prototype.pointClass=w}return C.seriesTypes[T]}}(p||(p={})),p}),s(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y,C){let{animObject:b,setAnimation:T}=a,{defaultOptions:S}=l,{registerEventOptions:k}=h,{svg:x,win:A}=r,{seriesTypes:D}=v,{arrayMax:w,arrayMin:I,clamp:N,correctFloat:q,crisp:Y,defined:X,destroyObjectProperties:B,diffObjects:j,erase:O,error:R,extend:L,find:G,fireEvent:$,getClosestDistance:F,getNestedProperty:H,insertItem:W,isArray:re,isNumber:he,isString:ie,merge:ae,objectEach:Ce,pick:ge,removeEvent:ke,splat:K,syncTimeout:Q}=C;class le{constructor(){this.zoneAxis="y"}init(J,ne){let ue;$(this,"init",{options:ne});let ye=this,we=J.series;this.eventsToUnbind=[],ye.chart=J,ye.options=ye.setOptions(ne);let ze=ye.options,Ee=ze.visible!==!1;ye.linkedSeries=[],ye.bindAxes(),L(ye,{name:ze.name,state:"",visible:Ee,selected:ze.selected===!0}),k(this,ze);let Ie=ze.events;(Ie&&Ie.click||ze.point&&ze.point.events&&ze.point.events.click||ze.allowPointSelect)&&(J.runTrackerClick=!0),ye.getColor(),ye.getSymbol(),ye.parallelArrays.forEach(function(Fe){ye[Fe+"Data"]||(ye[Fe+"Data"]=[])}),ye.isCartesian&&(J.hasCartesianSeries=!0),we.length&&(ue=we[we.length-1]),ye._i=ge(ue&&ue._i,-1)+1,ye.opacity=ye.options.opacity,J.orderItems("series",W(this,we)),ze.dataSorting&&ze.dataSorting.enabled?ye.setDataSortingOptions():ye.points||ye.data||ye.setData(ze.data,!1),$(this,"afterInit")}is(J){return D[J]&&this instanceof D[J]}bindAxes(){let J,ne=this,ue=ne.options,ye=ne.chart;$(this,"bindAxes",null,function(){(ne.axisTypes||[]).forEach(function(we){(ye[we]||[]).forEach(function(ze){J=ze.options,(ge(ue[we],0)===ze.index||ue[we]!==void 0&&ue[we]===J.id)&&(W(ne,ze.series),ne[we]=ze,ze.isDirty=!0)}),ne[we]||ne.optionalAxis===we||R(18,!0,ye)})}),$(this,"afterBindAxes")}updateParallelArrays(J,ne,ue){let ye=J.series,we=he(ne)?function(ze){let Ee=ze==="y"&&ye.toYData?ye.toYData(J):J[ze];ye[ze+"Data"][ne]=Ee}:function(ze){Array.prototype[ne].apply(ye[ze+"Data"],ue)};ye.parallelArrays.forEach(we)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(J,ne){let ue=J.marker,ye=ne.marker||{};return ue&&(ye.enabled&&!ue.enabled||ye.symbol!==ue.symbol||ye.height!==ue.height||ye.width!==ue.width)}autoIncrement(J){let ne=this.options,ue=ne.pointIntervalUnit,ye=ne.relativeXValue,we=this.chart.time,ze=this.xIncrement,Ee,Ie;return ze=ge(ze,ne.pointStart,0),this.pointInterval=Ie=ge(this.pointInterval,ne.pointInterval,1),ye&&he(J)&&(Ie*=J),ue&&(Ee=new we.Date(ze),ue==="day"?we.set("Date",Ee,we.get("Date",Ee)+Ie):ue==="month"?we.set("Month",Ee,we.get("Month",Ee)+Ie):ue==="year"&&we.set("FullYear",Ee,we.get("FullYear",Ee)+Ie),Ie=Ee.getTime()-ze),ye&&he(J)?ze+Ie:(this.xIncrement=ze+Ie,ze)}setDataSortingOptions(){let J=this.options;L(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),X(J.pointRange)||(J.pointRange=1)}setOptions(J){var Pe,je;let ne,ue=this.chart,ye=ue.options.plotOptions,we=ue.userOptions||{},ze=ae(J),Ee=ue.styledMode,Ie={plotOptions:ye,userOptions:ze};$(this,"setOptions",Ie);let Fe=Ie.plotOptions[this.type],He=we.plotOptions||{},Ae=He.series||{},xe=S.plotOptions[this.type]||{},me=He[this.type]||{};this.userOptions=Ie.userOptions;let Me=ae(Fe,ye.series,me,ze);this.tooltipOptions=ae(S.tooltip,(Pe=S.plotOptions.series)==null?void 0:Pe.tooltip,xe==null?void 0:xe.tooltip,ue.userOptions.tooltip,(je=He.series)==null?void 0:je.tooltip,me.tooltip,ze.tooltip),this.stickyTracking=ge(ze.stickyTracking,me.stickyTracking,Ae.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Me.stickyTracking),Fe.marker===null&&delete Me.marker,this.zoneAxis=Me.zoneAxis||"y";let De=this.zones=(Me.zones||[]).map(Xe=>({...Xe}));return(Me.negativeColor||Me.negativeFillColor)&&!Me.zones&&(ne={value:Me[this.zoneAxis+"Threshold"]||Me.threshold||0,className:"highcharts-negative"},Ee||(ne.color=Me.negativeColor,ne.fillColor=Me.negativeFillColor),De.push(ne)),De.length&&X(De[De.length-1].value)&&De.push(Ee?{}:{color:this.color,fillColor:this.fillColor}),$(this,"afterSetOptions",{options:Me}),Me}getName(){return ge(this.options.name,"Series "+(this.index+1))}getCyclic(J,ne,ue){let ye,we,ze=this.chart,Ee=`${J}Index`,Ie=`${J}Counter`,Fe=(ue==null?void 0:ue.length)||ze.options.chart.colorCount;!ne&&(X(we=ge(J==="color"?this.options.colorIndex:void 0,this[Ee]))?ye=we:(ze.series.length||(ze[Ie]=0),ye=ze[Ie]%Fe,ze[Ie]+=1),ue&&(ne=ue[ye])),ye!==void 0&&(this[Ee]=ye),this[J]=ne}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||S.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let J=this.options.marker;this.getCyclic("symbol",J.symbol,this.chart.options.symbols)}findPointIndex(J,ne){let ue,ye,we,ze=J.id,Ee=J.x,Ie=this.points,Fe=this.options.dataSorting;if(ze){let He=this.chart.get(ze);He instanceof m&&(ue=He)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let He=Ae=>!Ae.touched&&Ae.index===J.index;if(Fe&&Fe.matchByName?He=Ae=>!Ae.touched&&Ae.name===J.name:this.options.relativeXValue&&(He=Ae=>!Ae.touched&&Ae.options.x===J.x),!(ue=G(Ie,He)))return}return ue&&(we=ue&&ue.index)!==void 0&&(ye=!0),we===void 0&&he(Ee)&&(we=this.xData.indexOf(Ee,ne)),we!==-1&&we!==void 0&&this.cropped&&(we=we>=this.cropStart?we-this.cropStart:we),!ye&&he(we)&&Ie[we]&&Ie[we].touched&&(we=void 0),we}updateData(J,ne){let ue=this.options,ye=ue.dataSorting,we=this.points,ze=[],Ee=this.requireSorting,Ie=J.length===we.length,Fe,He,Ae,xe,me=!0;if(this.xIncrement=null,J.forEach(function(Me,De){let Pe,je=X(Me)&&this.pointClass.prototype.optionsToObject.call({series:this},Me)||{},Xe=je.x;je.id||he(Xe)?((Pe=this.findPointIndex(je,xe))===-1||Pe===void 0?ze.push(Me):we[Pe]&&Me!==ue.data[Pe]?(we[Pe].update(Me,!1,null,!1),we[Pe].touched=!0,Ee&&(xe=Pe+1)):we[Pe]&&(we[Pe].touched=!0),(!Ie||De!==Pe||ye&&ye.enabled||this.hasDerivedData)&&(Fe=!0)):ze.push(Me)},this),Fe)for(He=we.length;He--;)(Ae=we[He])&&!Ae.touched&&Ae.remove&&Ae.remove(!1,ne);else!Ie||ye&&ye.enabled?me=!1:(J.forEach(function(Me,De){Me===we[De].y||we[De].destroyed||we[De].update(Me,!1,null,!1)}),ze.length=0);return we.forEach(function(Me){Me&&(Me.touched=!1)}),!!me&&(ze.forEach(function(Me){this.addPoint(Me,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=w(this.xData),this.autoIncrement()),!0)}setData(J,ne=!0,ue,ye){var ft;let we=this,ze=we.points,Ee=ze&&ze.length||0,Ie=we.options,Fe=we.chart,He=Ie.dataSorting,Ae=we.xAxis,xe=Ie.turboThreshold,me=this.xData,Me=this.yData,De=we.pointArrayMap,Pe=De&&De.length,je=Ie.keys,Xe,tt,rt,dt=0,gt=1,wt;Fe.options.chart.allowMutatingData||(Ie.data&&delete we.options.data,we.userOptions.data&&delete we.userOptions.data,wt=ae(!0,J));let Rt=(J=wt||J||[]).length;if(He&&He.enabled&&(J=this.sortData(J)),Fe.options.chart.allowMutatingData&&ye!==!1&&Rt&&Ee&&!we.cropped&&!we.hasGroupedData&&we.visible&&!we.boosted&&(rt=this.updateData(J,ue)),!rt){we.xIncrement=null,we.colorCounter=0,this.parallelArrays.forEach(function(Tt){we[Tt+"Data"].length=0});let Et=xe&&Rt>xe;if(Et){let Tt=we.getFirstValidPoint(J),si=we.getFirstValidPoint(J,Rt-1,-1),ui=Wt=>!!(re(Wt)&&(je||he(Wt[0])));if(he(Tt)&&he(si))for(Xe=0;Xe<Rt;Xe++)me[Xe]=this.autoIncrement(),Me[Xe]=J[Xe];else if(ui(Tt)&&ui(si))if(Pe)if(Tt.length===Pe)for(Xe=0;Xe<Rt;Xe++)me[Xe]=this.autoIncrement(),Me[Xe]=J[Xe];else for(Xe=0;Xe<Rt;Xe++)tt=J[Xe],me[Xe]=tt[0],Me[Xe]=tt.slice(1,Pe+1);else if(je&&(dt=je.indexOf("x"),gt=je.indexOf("y"),dt=dt>=0?dt:0,gt=gt>=0?gt:1),Tt.length===1&&(gt=0),dt===gt)for(Xe=0;Xe<Rt;Xe++)me[Xe]=this.autoIncrement(),Me[Xe]=J[Xe][gt];else for(Xe=0;Xe<Rt;Xe++)tt=J[Xe],me[Xe]=tt[dt],Me[Xe]=tt[gt];else Et=!1}if(!Et)for(Xe=0;Xe<Rt;Xe++)tt={series:we},we.pointClass.prototype.applyOptions.apply(tt,[J[Xe]]),we.updateParallelArrays(tt,Xe);for(Me&&ie(Me[0])&&R(14,!0,Fe),we.data=[],we.options.data=we.userOptions.data=J,Xe=Ee;Xe--;)(ft=ze[Xe])==null||ft.destroy();Ae&&(Ae.minRange=Ae.userMinRange),we.isDirty=Fe.isDirtyBox=!0,we.isDirtyData=!!ze,ue=!1}Ie.legendType==="point"&&(this.processData(),this.generatePoints()),ne&&Fe.redraw(ue)}sortData(J){let ne=this,ue=ne.options.dataSorting.sortKey||"y",ye=function(we,ze){return X(ze)&&we.pointClass.prototype.optionsToObject.call({series:we},ze)||{}};return J.forEach(function(we,ze){J[ze]=ye(ne,we),J[ze].index=ze},this),J.concat().sort((we,ze)=>{let Ee=H(ue,we),Ie=H(ue,ze);return Ie<Ee?-1:Ie>Ee?1:0}).forEach(function(we,ze){we.x=ze},this),ne.linkedSeries&&ne.linkedSeries.forEach(function(we){let ze=we.options,Ee=ze.data;ze.dataSorting&&ze.dataSorting.enabled||!Ee||(Ee.forEach(function(Ie,Fe){Ee[Fe]=ye(we,Ie),J[Fe]&&(Ee[Fe].x=J[Fe].x,Ee[Fe].index=Fe)}),we.setData(Ee,!1))}),J}getProcessedData(J){let ne=this,ue=ne.xAxis,ye=ne.options.cropThreshold,we=ue==null?void 0:ue.logarithmic,ze=ne.isCartesian,Ee,Ie,Fe=0,He,Ae,xe,me=ne.xData,Me=ne.yData,De=!1,Pe=me.length;ue&&(Ae=(He=ue.getExtremes()).min,xe=He.max,De=!!(ue.categories&&!ue.names.length)),ze&&ne.sorted&&!J&&(!ye||Pe>ye||ne.forceCrop)&&(me[Pe-1]<Ae||me[0]>xe?(me=[],Me=[]):ne.yData&&(me[0]<Ae||me[Pe-1]>xe)&&(me=(Ee=this.cropData(ne.xData,ne.yData,Ae,xe)).xData,Me=Ee.yData,Fe=Ee.start,Ie=!0));let je=F([we?me.map(we.log2lin):me],()=>ne.requireSorting&&!De&&R(15,!1,ne.chart));return{xData:me,yData:Me,cropped:Ie,cropStart:Fe,closestPointRange:je}}processData(J){let ne=this.xAxis;if(this.isCartesian&&!this.isDirty&&!ne.isDirty&&!this.yAxis.isDirty&&!J)return!1;let ue=this.getProcessedData();this.cropped=ue.cropped,this.cropStart=ue.cropStart,this.processedXData=ue.xData,this.processedYData=ue.yData,this.closestPointRange=this.basePointRange=ue.closestPointRange,$(this,"afterProcessData")}cropData(J,ne,ue,ye){let we=J.length,ze,Ee,Ie=0,Fe=we;for(ze=0;ze<we;ze++)if(J[ze]>=ue){Ie=Math.max(0,ze-1);break}for(Ee=ze;Ee<we;Ee++)if(J[Ee]>ye){Fe=Ee+1;break}return{xData:J.slice(Ie,Fe),yData:ne.slice(Ie,Fe),start:Ie,end:Fe}}generatePoints(){let J=this.options,ne=this.processedData||J.data,ue=this.processedXData,ye=this.processedYData,we=this.pointClass,ze=ue.length,Ee=this.cropStart||0,Ie=this.hasGroupedData,Fe=J.keys,He=[],Ae=J.dataGrouping&&J.dataGrouping.groupAll?Ee:0,xe,me,Me,De,Pe=this.data;if(!Pe&&!Ie){let je=[];je.length=ne.length,Pe=this.data=je}for(Fe&&Ie&&(this.options.keys=!1),De=0;De<ze;De++)me=Ee+De,Ie?((Me=new we(this,[ue[De]].concat(K(ye[De])))).dataGroup=this.groupMap[Ae+De],Me.dataGroup.options&&(Me.options=Me.dataGroup.options,L(Me,Me.dataGroup.options),delete Me.dataLabels)):(Me=Pe[me])||ne[me]===void 0||(Pe[me]=Me=new we(this,ne[me],ue[De])),Me&&(Me.index=Ie?Ae+De:me,He[De]=Me);if(this.options.keys=Fe,Pe&&(ze!==(xe=Pe.length)||Ie))for(De=0;De<xe;De++)De!==Ee||Ie||(De+=ze),Pe[De]&&(Pe[De].destroyElements(),Pe[De].plotX=void 0);this.data=Pe,this.points=He,$(this,"afterGeneratePoints")}getXExtremes(J){return{min:I(J),max:w(J)}}getExtremes(J,ne){let ue=this.xAxis,ye=this.yAxis,we=[],ze=this.requireSorting&&!this.is("column")?1:0,Ee=!!ye&&ye.positiveValuesOnly,Ie=ne||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:Fe,processedYData:He}=this,Ae,xe,me,Me,De,Pe,je,Xe=0,tt=0,rt=0;if(this.cropped&&Ie){let Rt=this.getProcessedData(!0);Fe=Rt.xData,He=Rt.yData}let dt=(J=J||this.stackedYData||He||[]).length,gt=Fe||this.xData;for(ue&&(Xe=(Ae=ue.getExtremes()).min,tt=Ae.max),Pe=0;Pe<dt;Pe++)if(Me=gt[Pe],xe=(he(De=J[Pe])||re(De))&&((he(De)?De>0:De.length)||!Ee),me=ne||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ue||(gt[Pe+ze]||Me)>=Xe&&(gt[Pe-ze]||Me)<=tt,xe&&me)if(je=De.length)for(;je--;)he(De[je])&&(we[rt++]=De[je]);else we[rt++]=De;let wt={activeYData:we,dataMin:I(we),dataMax:w(we)};return $(this,"afterGetExtremes",{dataExtremes:wt}),wt}applyExtremes(){let J=this.getExtremes();return this.dataMin=J.dataMin,this.dataMax=J.dataMax,J}getFirstValidPoint(J,ne=0,ue=1){let ye=J.length,we=ne;for(;we>=0&&we<ye;){if(X(J[we]))return J[we];we+=ue}}translate(){var tt;this.processedXData||this.processData(),this.generatePoints();let J=this.options,ne=J.stacking,ue=this.xAxis,ye=ue.categories,we=this.enabledDataSorting,ze=this.yAxis,Ee=this.points,Ie=Ee.length,Fe=this.pointPlacementToXValue(),He=!!Fe,Ae=J.threshold,xe=J.startFromThreshold?Ae:0,me,Me,De,Pe,je=Number.MAX_VALUE;function Xe(rt){return N(rt,-1e9,1e9)}for(me=0;me<Ie;me++){let rt,dt=Ee[me],gt=dt.x,wt,Rt,ft=dt.y,Et=dt.low,Tt=ne&&((tt=ze.stacking)==null?void 0:tt.stacks[(this.negStacks&&ft<(xe?0:Ae)?"-":"")+this.stackKey]);Me=ue.translate(gt,!1,!1,!1,!0,Fe),dt.plotX=he(Me)?q(Xe(Me)):void 0,ne&&this.visible&&Tt&&Tt[gt]&&(Pe=this.getStackIndicator(Pe,gt,this.index),!dt.isNull&&Pe.key&&(Rt=(wt=Tt[gt]).points[Pe.key]),wt&&re(Rt)&&(Et=Rt[0],ft=Rt[1],Et===xe&&Pe.key===Tt[gt].base&&(Et=ge(he(Ae)?Ae:ze.min)),ze.positiveValuesOnly&&X(Et)&&Et<=0&&(Et=void 0),dt.total=dt.stackTotal=ge(wt.total),dt.percentage=X(dt.y)&&wt.total?dt.y/wt.total*100:void 0,dt.stackY=ft,this.irregularWidths||wt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),dt.yBottom=X(Et)?Xe(ze.translate(Et,!1,!0,!1,!0)):void 0,this.dataModify&&(ft=this.dataModify.modifyValue(ft,me)),he(ft)&&dt.plotX!==void 0&&(rt=he(rt=ze.translate(ft,!1,!0,!1,!0))?Xe(rt):void 0),dt.plotY=rt,dt.isInside=this.isPointInside(dt),dt.clientX=He?q(ue.translate(gt,!1,!1,!1,!0,Fe)):Me,dt.negative=(dt.y||0)<(Ae||0),dt.category=ge(ye&&ye[dt.x],dt.x),dt.isNull||dt.visible===!1||(De!==void 0&&(je=Math.min(je,Math.abs(Me-De))),De=Me),dt.zone=this.zones.length?dt.getZone():void 0,!dt.graphic&&this.group&&we&&(dt.isNew=!0)}this.closestPointRangePx=je,$(this,"afterTranslate")}getValidPoints(J,ne,ue){let ye=this.chart;return(J||this.points||[]).filter(function(we){let{plotX:ze,plotY:Ee}=we;return!!((ue||!we.isNull&&he(Ee))&&(!ne||ye.isInsidePlot(ze,Ee,{inverted:ye.inverted})))&&we.visible!==!1})}getClipBox(){let{chart:J,xAxis:ne,yAxis:ue}=this,{x:ye,y:we,width:ze,height:Ee}=ae(J.clipBox);return ne&&ne.len!==J.plotSizeX&&(ze=ne.len),ue&&ue.len!==J.plotSizeY&&(Ee=ue.len),J.inverted&&!this.invertible&&([ze,Ee]=[Ee,ze]),{x:ye,y:we,width:ze,height:Ee}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:J,group:ne,markerGroup:ue}=this,ye=J.sharedClips,we=J.renderer,ze=this.getClipBox(),Ee=this.getSharedClipKey(),Ie=ye[Ee];Ie?Ie.animate(ze):ye[Ee]=Ie=we.clipRect(ze),ne&&ne.clip(this.options.clip===!1?void 0:Ie),ue&&ue.clip()}animate(J){let{chart:ne,group:ue,markerGroup:ye}=this,we=ne.inverted,ze=b(this.options.animation),Ee=[this.getSharedClipKey(),ze.duration,ze.easing,ze.defer].join(","),Ie=ne.sharedClips[Ee],Fe=ne.sharedClips[Ee+"m"];if(J&&ue){let He=this.getClipBox();if(Ie)Ie.attr("height",He.height);else{He.width=0,we&&(He.x=ne.plotHeight),Ie=ne.renderer.clipRect(He),ne.sharedClips[Ee]=Ie;let Ae={x:-99,y:-99,width:we?ne.plotWidth+199:99,height:we?99:ne.plotHeight+199};Fe=ne.renderer.clipRect(Ae),ne.sharedClips[Ee+"m"]=Fe}ue.clip(Ie),ye==null||ye.clip(Fe)}else if(Ie&&!Ie.hasClass("highcharts-animating")){let He=this.getClipBox(),Ae=ze.step;(ye!=null&&ye.element.childNodes.length||ne.series.length>1)&&(ze.step=function(xe,me){Ae&&Ae.apply(me,arguments),me.prop==="width"&&(Fe!=null&&Fe.element)&&Fe.attr(we?"height":"width",xe+99)}),Ie.addClass("highcharts-animating").animate(He,ze)}}afterAnimate(){this.setClip(),Ce(this.chart.sharedClips,(J,ne,ue)=>{J&&!this.chart.container.querySelector(`[clip-path="url(#${J.id})"]`)&&(J.destroy(),delete ue[ne])}),this.finishedAnimating=!0,$(this,"afterAnimate")}drawPoints(J=this.points){let ne,ue,ye,we,ze,Ee,Ie,Fe=this.chart,He=Fe.styledMode,{colorAxis:Ae,options:xe}=this,me=xe.marker,Me=this[this.specialGroup||"markerGroup"],De=this.xAxis,Pe=ge(me.enabled,!De||!!De.isRadial||null,this.closestPointRangePx>=me.enabledThreshold*me.radius);if(me.enabled!==!1||this._hasPointMarkers)for(ne=0;ne<J.length;ne++)if(we=(ye=(ue=J[ne]).graphic)?"animate":"attr",ze=ue.marker||{},Ee=!!ue.marker,(Pe&&ze.enabled===void 0||ze.enabled)&&!ue.isNull&&ue.visible!==!1){let je=ge(ze.symbol,this.symbol,"rect");Ie=this.markerAttribs(ue,ue.selected&&"select"),this.enabledDataSorting&&(ue.startXPos=De.reversed?-(Ie.width||0):De.width);let Xe=ue.isInside!==!1;if(!ye&&Xe&&((Ie.width||0)>0||ue.hasImage)&&(ue.graphic=ye=Fe.renderer.symbol(je,Ie.x,Ie.y,Ie.width,Ie.height,Ee?ze:me).add(Me),this.enabledDataSorting&&Fe.hasRendered&&(ye.attr({x:ue.startXPos}),we="animate")),ye&&we==="animate"&&ye[Xe?"show":"hide"](Xe).animate(Ie),ye){let tt=this.pointAttribs(ue,He||!ue.selected?void 0:"select");He?Ae&&ye.css({fill:tt.fill}):ye[we](tt)}ye&&ye.addClass(ue.getClassName(),!0)}else ye&&(ue.graphic=ye.destroy())}markerAttribs(J,ne){let ue=this.options,ye=ue.marker,we=J.marker||{},ze=we.symbol||ye.symbol,Ee={},Ie,Fe,He=ge(we.radius,ye&&ye.radius);ne&&(Ie=ye.states[ne],He=ge((Fe=we.states&&we.states[ne])&&Fe.radius,Ie&&Ie.radius,He&&He+(Ie&&Ie.radiusPlus||0))),J.hasImage=ze&&ze.indexOf("url")===0,J.hasImage&&(He=0);let Ae=J.pos();return he(He)&&Ae&&(ue.crisp&&(Ae[0]=Y(Ae[0],J.hasImage?0:ze==="rect"?(ye==null?void 0:ye.lineWidth)||0:1)),Ee.x=Ae[0]-He,Ee.y=Ae[1]-He),He&&(Ee.width=Ee.height=2*He),Ee}pointAttribs(J,ne){let ue=this.options.marker,ye=J&&J.options,we=ye&&ye.marker||{},ze=ye&&ye.color,Ee=J&&J.color,Ie=J&&J.zone&&J.zone.color,Fe,He,Ae=this.color,xe,me,Me=ge(we.lineWidth,ue.lineWidth),De=1;return Ae=ze||Ie||Ee||Ae,xe=we.fillColor||ue.fillColor||Ae,me=we.lineColor||ue.lineColor||Ae,ne=ne||"normal",Fe=ue.states[ne]||{},Me=ge((He=we.states&&we.states[ne]||{}).lineWidth,Fe.lineWidth,Me+ge(He.lineWidthPlus,Fe.lineWidthPlus,0)),xe=He.fillColor||Fe.fillColor||xe,{stroke:me=He.lineColor||Fe.lineColor||me,"stroke-width":Me,fill:xe,opacity:De=ge(He.opacity,Fe.opacity,De)}}destroy(J){let ne,ue,ye,we=this,ze=we.chart,Ee=/AppleWebKit\/533/.test(A.navigator.userAgent),Ie=we.data||[];for($(we,"destroy",{keepEventsForUpdate:J}),this.removeEvents(J),(we.axisTypes||[]).forEach(function(Fe){(ye=we[Fe])&&ye.series&&(O(ye.series,we),ye.isDirty=ye.forceRedraw=!0)}),we.legendItem&&we.chart.legend.destroyItem(we),ne=Ie.length;ne--;)(ue=Ie[ne])&&ue.destroy&&ue.destroy();for(let Fe of we.zones)B(Fe,void 0,!0);C.clearTimeout(we.animationTimeout),Ce(we,function(Fe,He){Fe instanceof y&&!Fe.survive&&Fe[Ee&&He==="group"?"hide":"destroy"]()}),ze.hoverSeries===we&&(ze.hoverSeries=void 0),O(ze.series,we),ze.orderItems("series"),Ce(we,function(Fe,He){J&&He==="hcEvents"||delete we[He]})}applyZones(){let{area:J,chart:ne,graph:ue,zones:ye,points:we,xAxis:ze,yAxis:Ee,zoneAxis:Ie}=this,{inverted:Fe,renderer:He}=ne,Ae=this[`${Ie}Axis`],{isXAxis:xe,len:me=0}=Ae||{},Me=((ue==null?void 0:ue.strokeWidth())||0)/2+1,De=(Pe,je=0,Xe=0)=>{Fe&&(Xe=me-Xe);let{translated:tt=0,lineClip:rt}=Pe,dt=Xe-tt;rt==null||rt.push(["L",je,Math.abs(dt)<Me?Xe-Me*(dt<=0?-1:1):tt])};if(ye.length&&(ue||J)&&Ae&&he(Ae.min)){let Pe=Ae.getExtremes().max,je=rt=>{rt.forEach((dt,gt)=>{(dt[0]==="M"||dt[0]==="L")&&(rt[gt]=[dt[0],xe?me-dt[1]:dt[1],xe?dt[2]:me-dt[2]])})};if(ye.forEach(rt=>{rt.lineClip=[],rt.translated=N(Ae.toPixels(ge(rt.value,Pe),!0)||0,0,me)}),ue&&!this.showLine&&ue.hide(),J&&J.hide(),Ie==="y"&&we.length<ze.len)for(let rt of we){let{plotX:dt,plotY:gt,zone:wt}=rt,Rt=wt&&ye[ye.indexOf(wt)-1];wt&&De(wt,dt,gt),Rt&&De(Rt,dt,gt)}let Xe=[],tt=Ae.toPixels(Ae.getExtremes().min,!0);ye.forEach(rt=>{var ar,Xi;let dt=rt.lineClip||[],gt=Math.round(rt.translated||0);ze.reversed&&dt.reverse();let{clip:wt,simpleClip:Rt}=rt,ft=0,Et=0,Tt=ze.len,si=Ee.len;xe?(ft=gt,Tt=tt):(Et=gt,si=tt);let ui=[["M",ft,Et],["L",Tt,Et],["L",Tt,si],["L",ft,si],["Z"]],Wt=[ui[0],...dt,ui[1],ui[2],...Xe,ui[3],ui[4]];Xe=dt.reverse(),tt=gt,Fe&&(je(Wt),J&&je(ui)),wt?(wt.animate({d:Wt}),Rt==null||Rt.animate({d:ui})):(wt=rt.clip=He.path(Wt),J&&(Rt=rt.simpleClip=He.path(ui))),ue&&((ar=rt.graph)==null||ar.clip(wt)),J&&((Xi=rt.area)==null||Xi.clip(Rt))})}else this.visible&&(ue&&ue.show(),J&&J.show())}plotGroup(J,ne,ue,ye,we){let ze=this[J],Ee=!ze,Ie={visibility:ue,zIndex:ye||.1};return X(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Ie.opacity=this.opacity),ze||(this[J]=ze=this.chart.renderer.g().add(we)),ze.addClass("highcharts-"+ne+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(X(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(ze.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),ze.attr(Ie)[Ee?"attr":"animate"](this.getPlotBox(ne)),ze}getPlotBox(J){let ne=this.xAxis,ue=this.yAxis,ye=this.chart,we=ye.inverted&&!ye.polar&&ne&&this.invertible&&J==="series";return ye.inverted&&(ne=ue,ue=this.xAxis),{translateX:ne?ne.left:ye.plotLeft,translateY:ue?ue.top:ye.plotTop,rotation:we?90:0,rotationOriginX:we?(ne.len-ue.len)/2:0,rotationOriginY:we?(ne.len+ue.len)/2:0,scaleX:we?-1:1,scaleY:1}}removeEvents(J){let{eventsToUnbind:ne}=this;J||ke(this),ne.length&&(ne.forEach(ue=>{ue()}),ne.length=0)}render(){var He,Ae,xe,me,Me;let J=this,{chart:ne,options:ue,hasRendered:ye}=J,we=b(ue.animation),ze=J.visible?"inherit":"hidden",Ee=ue.zIndex,Ie=ne.seriesGroup,Fe=J.finishedAnimating?0:we.duration;$(this,"render"),J.plotGroup("group","series",ze,Ee,Ie),J.markerGroup=J.plotGroup("markerGroup","markers",ze,Ee,Ie),ue.clip!==!1&&J.setClip(),Fe&&((He=J.animate)==null||He.call(J,!0)),J.drawGraph&&(J.drawGraph(),J.applyZones()),J.visible&&J.drawPoints(),(Ae=J.drawDataLabels)==null||Ae.call(J),(xe=J.redrawPoints)==null||xe.call(J),ue.enableMouseTracking&&((me=J.drawTracker)==null||me.call(J)),Fe&&((Me=J.animate)==null||Me.call(J)),ye||(Fe&&we.defer&&(Fe+=we.defer),J.animationTimeout=Q(()=>{J.afterAnimate()},Fe||0)),J.isDirty=!1,J.hasRendered=!0,$(J,"afterRender")}redraw(){let J=this.isDirty||this.isDirtyData;this.translate(),this.render(),J&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(J,ne){let{xAxis:ue,yAxis:ye}=this,we=this.chart.inverted;return this.searchKDTree({clientX:we?ue.len-J.chartY+ue.pos:J.chartX-ue.pos,plotY:we?ye.len-J.chartX+ye.pos:J.chartY-ye.pos},ne,J)}buildKDTree(J){this.buildingKdTree=!0;let ne=this,ue=ne.options.findNearestPointBy.indexOf("y")>-1?2:1;delete ne.kdTree,Q(function(){ne.kdTree=function ye(we,ze,Ee){let Ie,Fe,He=we==null?void 0:we.length;if(He)return Ie=ne.kdAxisArray[ze%Ee],we.sort((Ae,xe)=>(Ae[Ie]||0)-(xe[Ie]||0)),{point:we[Fe=Math.floor(He/2)],left:ye(we.slice(0,Fe),ze+1,Ee),right:ye(we.slice(Fe+1),ze+1,Ee)}}(ne.getValidPoints(void 0,!ne.directTouch),ue,ue),ne.buildingKdTree=!1},ne.options.kdNow||(J==null?void 0:J.type)==="touchstart"?0:1)}searchKDTree(J,ne,ue){let ye=this,[we,ze]=this.kdAxisArray,Ee=ne?"distX":"dist",Ie=(ye.options.findNearestPointBy||"").indexOf("y")>-1?2:1,Fe=!!ye.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ue),this.kdTree)return function He(Ae,xe,me,Me){var wt;let De=xe.point,Pe=ye.kdAxisArray[me%Me],je,Xe,tt=De;(function(Rt,ft){var mr;let Et=Rt[we],Tt=ft[we],si=X(Et)&&X(Tt)?Et-Tt:null,ui=Rt[ze],Wt=ft[ze],ar=X(ui)&&X(Wt)?ui-Wt:0,Xi=Fe&&((mr=ft.marker)==null?void 0:mr.radius)||0;ft.dist=Math.sqrt((si&&si*si||0)+ar*ar)-Xi,ft.distX=X(si)?Math.abs(si)-Xi:Number.MAX_VALUE})(Ae,De);let rt=(Ae[Pe]||0)-(De[Pe]||0)+(Fe&&((wt=De.marker)==null?void 0:wt.radius)||0),dt=rt<0?"left":"right",gt=rt<0?"right":"left";return xe[dt]&&(tt=(je=He(Ae,xe[dt],me+1,Me))[Ee]<tt[Ee]?je:De),xe[gt]&&Math.sqrt(rt*rt)<tt[Ee]&&(tt=(Xe=He(Ae,xe[gt],me+1,Me))[Ee]<tt[Ee]?Xe:tt),tt}(J,this.kdTree,Ie,Ie)}pointPlacementToXValue(){let{options:J,xAxis:ne}=this,ue=J.pointPlacement;return ue==="between"&&(ue=ne.reversed?-.5:.5),he(ue)?ue*(J.pointRange||ne.pointRange):0}isPointInside(J){let{chart:ne,xAxis:ue,yAxis:ye}=this,{plotX:we=-1,plotY:ze=-1}=J;return ze>=0&&ze<=(ye?ye.len:ne.plotHeight)&&we>=0&&we<=(ue?ue.len:ne.plotWidth)}drawTracker(){var xe;let J=this,ne=J.options,ue=ne.trackByArea,ye=[].concat((ue?J.areaPath:J.graphPath)||[]),we=J.chart,ze=we.pointer,Ee=we.renderer,Ie=((xe=we.options.tooltip)==null?void 0:xe.snap)||0,Fe=()=>{ne.enableMouseTracking&&we.hoverSeries!==J&&J.onMouseOver()},He="rgba(192,192,192,"+(x?1e-4:.002)+")",Ae=J.tracker;Ae?Ae.attr({d:ye}):J.graph&&(J.tracker=Ae=Ee.path(ye).attr({visibility:J.visible?"inherit":"hidden",zIndex:2}).addClass(ue?"highcharts-tracker-area":"highcharts-tracker-line").add(J.group),we.styledMode||Ae.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:He,fill:ue?He:"none","stroke-width":J.graph.strokeWidth()+(ue?0:2*Ie)}),[J.tracker,J.markerGroup,J.dataLabelsGroup].forEach(me=>{me&&(me.addClass("highcharts-tracker").on("mouseover",Fe).on("mouseout",Me=>{ze==null||ze.onTrackerMouseOut(Me)}),ne.cursor&&!we.styledMode&&me.css({cursor:ne.cursor}),me.on("touchstart",Fe))})),$(this,"afterDrawTracker")}addPoint(J,ne,ue,ye,we){let ze,Ee,Ie=this.options,Fe=this.data,He=this.chart,Ae=this.xAxis,xe=Ae&&Ae.hasNames&&Ae.names,me=Ie.data,Me=this.xData;ne=ge(ne,!0);let De={series:this};this.pointClass.prototype.applyOptions.apply(De,[J]);let Pe=De.x;if(Ee=Me.length,this.requireSorting&&Pe<Me[Ee-1])for(ze=!0;Ee&&Me[Ee-1]>Pe;)Ee--;this.updateParallelArrays(De,"splice",[Ee,0,0]),this.updateParallelArrays(De,Ee),xe&&De.name&&(xe[Pe]=De.name),me.splice(Ee,0,J),(ze||this.processedData)&&(this.data.splice(Ee,0,null),this.processData()),Ie.legendType==="point"&&this.generatePoints(),ue&&(Fe[0]&&Fe[0].remove?Fe[0].remove(!1):(Fe.shift(),this.updateParallelArrays(De,"shift"),me.shift())),we!==!1&&$(this,"addPoint",{point:De}),this.isDirty=!0,this.isDirtyData=!0,ne&&He.redraw(ye)}removePoint(J,ne,ue){let ye=this,we=ye.data,ze=we[J],Ee=ye.points,Ie=ye.chart,Fe=function(){Ee&&Ee.length===we.length&&Ee.splice(J,1),we.splice(J,1),ye.options.data.splice(J,1),ye.updateParallelArrays(ze||{series:ye},"splice",[J,1]),ze&&ze.destroy(),ye.isDirty=!0,ye.isDirtyData=!0,ne&&Ie.redraw()};T(ue,Ie),ne=ge(ne,!0),ze?ze.firePointEvent("remove",null,Fe):Fe()}remove(J,ne,ue,ye){let we=this,ze=we.chart;function Ee(){we.destroy(ye),ze.isDirtyLegend=ze.isDirtyBox=!0,ze.linkSeries(ye),ge(J,!0)&&ze.redraw(ne)}ue!==!1?$(we,"remove",null,Ee):Ee()}update(J,ne){var je,Xe,tt;$(this,"update",{options:J=j(J,this.userOptions)});let ue=this,ye=ue.chart,we=ue.userOptions,ze=ue.initialType||ue.type,Ee=ye.options.plotOptions,Ie=D[ze].prototype,Fe=ue.finishedAnimating&&{animation:!1},He={},Ae,xe,me=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Me=J.type||we.type||ye.options.chart.type,De=!(this.hasDerivedData||Me&&Me!==this.type||J.pointStart!==void 0||J.pointInterval!==void 0||J.relativeXValue!==void 0||J.joinBy||J.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(rt=>ue.hasOptionChanged(rt)));Me=Me||ze,De&&(me.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),J.visible!==!1&&me.push("area","graph"),ue.parallelArrays.forEach(function(rt){me.push(rt+"Data")}),J.data&&(J.dataSorting&&L(ue.options.dataSorting,J.dataSorting),this.setData(J.data,!1))),J=ae(we,{index:we.index===void 0?ue.index:we.index,pointStart:((je=Ee==null?void 0:Ee.series)==null?void 0:je.pointStart)??we.pointStart??((Xe=ue.xData)==null?void 0:Xe[0])},!De&&{data:ue.options.data},J,Fe),De&&J.data&&(J.data=ue.options.data),(me=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(me)).forEach(function(rt){me[rt]=ue[rt],delete ue[rt]});let Pe=!1;if(D[Me]){if(Pe=Me!==ue.type,ue.remove(!1,!1,!1,!0),Pe)if(ye.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ue,D[Me].prototype);else{let rt=Object.hasOwnProperty.call(ue,"hcEvents")&&ue.hcEvents;for(xe in Ie)ue[xe]=void 0;L(ue,D[Me].prototype),rt?ue.hcEvents=rt:delete ue.hcEvents}}else R(17,!0,ye,{missingModuleFor:Me});if(me.forEach(function(rt){ue[rt]=me[rt]}),ue.init(ye,J),De&&this.points)for(let rt of((Ae=ue.options).visible===!1?(He.graphic=1,He.dataLabel=1):(this.hasMarkerChanged(Ae,we)&&(He.graphic=1),(tt=ue.hasDataLabels)!=null&&tt.call(ue)||(He.dataLabel=1)),this.points))rt&&rt.series&&(rt.resolveColor(),Object.keys(He).length&&rt.destroyElements(He),Ae.showInLegend===!1&&rt.legendItem&&ye.legend.destroyItem(rt));ue.initialType=ze,ye.linkSeries(),ye.setSortedData(),Pe&&ue.linkedSeries.length&&(ue.isDirtyData=!0),$(this,"afterUpdate"),ge(ne,!0)&&ye.redraw(!!De&&void 0)}setName(J){this.name=this.options.name=this.userOptions.name=J,this.chart.isDirtyLegend=!0}hasOptionChanged(J){var Ee,Ie;let ne=this.chart,ue=this.options[J],ye=ne.options.plotOptions,we=this.userOptions[J],ze=ge((Ee=ye==null?void 0:ye[this.type])==null?void 0:Ee[J],(Ie=ye==null?void 0:ye.series)==null?void 0:Ie[J]);return we&&!X(ze)?ue!==we:ue!==ge(ze,ue)}onMouseOver(){let J=this.chart,ne=J.hoverSeries,ue=J.pointer;ue==null||ue.setHoverChartIndex(),ne&&ne!==this&&ne.onMouseOut(),this.options.events.mouseOver&&$(this,"mouseOver"),this.setState("hover"),J.hoverSeries=this}onMouseOut(){let J=this.options,ne=this.chart,ue=ne.tooltip,ye=ne.hoverPoint;ne.hoverSeries=null,ye&&ye.onMouseOut(),this&&J.events.mouseOut&&$(this,"mouseOut"),ue&&!this.stickyTracking&&(!ue.shared||this.noSharedTooltip)&&ue.hide(),ne.series.forEach(function(we){we.setState("",!0)})}setState(J,ne){let ue=this,ye=ue.options,we=ue.graph,ze=ye.inactiveOtherPoints,Ee=ye.states,Ie=ge(Ee[J||"normal"]&&Ee[J||"normal"].animation,ue.chart.options.chart.animation),Fe=ye.lineWidth,He=ye.opacity;if(J=J||"",ue.state!==J&&([ue.group,ue.markerGroup,ue.dataLabelsGroup].forEach(function(Ae){Ae&&(ue.state&&Ae.removeClass("highcharts-series-"+ue.state),J&&Ae.addClass("highcharts-series-"+J))}),ue.state=J,!ue.chart.styledMode)){if(Ee[J]&&Ee[J].enabled===!1)return;if(J&&(Fe=Ee[J].lineWidth||Fe+(Ee[J].lineWidthPlus||0),He=ge(Ee[J].opacity,He)),we&&!we.dashstyle&&he(Fe))for(let Ae of[we,...this.zones.map(xe=>xe.graph)])Ae==null||Ae.animate({"stroke-width":Fe},Ie);ze||[ue.group,ue.markerGroup,ue.dataLabelsGroup,ue.labelBySeries].forEach(function(Ae){Ae&&Ae.animate({opacity:He},Ie)})}ne&&ze&&ue.points&&ue.setAllPointsToState(J||void 0)}setAllPointsToState(J){this.points.forEach(function(ne){ne.setState&&ne.setState(J)})}setVisible(J,ne){var Ie;let ue=this,ye=ue.chart,we=ye.options.chart.ignoreHiddenSeries,ze=ue.visible;ue.visible=J=ue.options.visible=ue.userOptions.visible=J===void 0?!ze:J;let Ee=J?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(Fe=>{var He;(He=ue[Fe])==null||He[Ee]()}),(ye.hoverSeries===ue||((Ie=ye.hoverPoint)==null?void 0:Ie.series)===ue)&&ue.onMouseOut(),ue.legendItem&&ye.legend.colorizeItem(ue,J),ue.isDirty=!0,ue.options.stacking&&ye.series.forEach(Fe=>{Fe.options.stacking&&Fe.visible&&(Fe.isDirty=!0)}),ue.linkedSeries.forEach(Fe=>{Fe.setVisible(J,!1)}),we&&(ye.isDirtyBox=!0),$(ue,Ee),ne!==!1&&ye.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(J){this.selected=J=this.options.selected=J===void 0?!this.selected:J,this.checkbox&&(this.checkbox.checked=J),$(this,J?"select":"unselect")}shouldShowTooltip(J,ne,ue={}){return ue.series=this,ue.visiblePlotOnly=!0,this.chart.isInsidePlot(J,ne,ue)}drawLegendSymbol(J,ne){var ue;(ue=p[this.options.legendSymbol||"rectangle"])==null||ue.call(this,J,ne)}}return le.defaultOptions=g,le.types=v.seriesTypes,le.registerType=v.registerSeriesType,L(le.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:m,requireSorting:!0,sorted:!0}),v.series=le,le}),s(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v){var y;let{animObject:C,setAnimation:b}=a,{registerEventOptions:T}=l,{composed:S,marginNames:k}=h,{distribute:x}=m,{format:A}=g,{addEvent:D,createElement:w,css:I,defined:N,discardElement:q,find:Y,fireEvent:X,isNumber:B,merge:j,pick:O,pushUnique:R,relativeLength:L,stableSort:G,syncTimeout:$}=v;class F{constructor(W,re){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=W,this.setOptions(re),re.enabled&&(this.render(),T(this,re),D(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),D(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(W){let re=O(W.padding,8);this.options=W,this.chart.styledMode||(this.itemStyle=W.itemStyle,this.itemHiddenStyle=j(this.itemStyle,W.itemHiddenStyle)),this.itemMarginTop=W.itemMarginTop,this.itemMarginBottom=W.itemMarginBottom,this.padding=re,this.initialItemY=re-5,this.symbolWidth=O(W.symbolWidth,16),this.pages=[],this.proximate=W.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(W,re){let he=this.chart;this.setOptions(j(!0,this.options,W)),"events"in this.options&&T(this,this.options),this.destroy(),he.isDirtyLegend=he.isDirtyBox=!0,O(re,!0)&&he.redraw(),X(this,"afterUpdate",{redraw:re})}colorizeItem(W,re){let{area:he,group:ie,label:ae,line:Ce,symbol:ge}=W.legendItem||{};if(ie==null||ie[re?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:ke={}}=this,K=ke.color,{fillColor:Q,fillOpacity:le,lineColor:_e,marker:J}=W.options,ne=ue=>(!re&&(ue.fill&&(ue.fill=K),ue.stroke&&(ue.stroke=K)),ue);ae==null||ae.css(j(re?this.itemStyle:ke)),Ce==null||Ce.attr(ne({stroke:_e||W.color})),ge&&ge.attr(ne(J&&ge.isMarker?W.pointAttribs():{fill:W.color})),he==null||he.attr(ne({fill:Q||W.color,"fill-opacity":Q?1:le??.75}))}X(this,"afterColorizeItem",{item:W,visible:re})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(W){let{group:re,x:he=0,y:ie=0}=W.legendItem||{},ae=this.options,Ce=ae.symbolPadding,ge=!ae.rtl,ke=W.checkbox;if(re&&re.element){let K={translateX:ge?he:this.legendWidth-he-2*Ce-4,translateY:ie};re[N(re.translateY)?"animate":"attr"](K,void 0,()=>{X(this,"afterPositionItem",{item:W})})}ke&&(ke.x=he,ke.y=ie)}destroyItem(W){let re=W.checkbox,he=W.legendItem||{};for(let ie of["group","label","line","symbol"])he[ie]&&(he[ie]=he[ie].destroy());re&&q(re),W.legendItem=void 0}destroy(){for(let W of this.getAllItems())this.destroyItem(W);for(let W of["clipRect","up","down","pager","nav","box","title","group"])this[W]&&(this[W]=this[W].destroy());this.display=null}positionCheckboxes(){let W,re=this.group&&this.group.alignAttr,he=this.clipHeight||this.legendHeight,ie=this.titleHeight;re&&(W=re.translateY,this.allItems.forEach(function(ae){let Ce,ge=ae.checkbox;ge&&(Ce=W+ie+ge.y+(this.scrollOffset||0)+3,I(ge,{left:re.translateX+ae.checkboxOffset+ge.x-20+"px",top:Ce+"px",display:this.proximate||Ce>W-6&&Ce<W+he-6?"":"none"}))},this))}renderTitle(){let W=this.options,re=this.padding,he=W.title,ie,ae=0;he.text&&(this.title||(this.title=this.chart.renderer.label(he.text,re-3,re-4,void 0,void 0,void 0,W.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(he.style),this.title.add(this.group)),he.width||this.title.css({width:this.maxLegendWidth+"px"}),ae=(ie=this.title.getBBox()).height,this.offsetWidth=ie.width,this.contentGroup.attr({translateY:ae})),this.titleHeight=ae}setText(W){let re=this.options;W.legendItem.label.attr({text:re.labelFormat?A(re.labelFormat,W,this.chart):re.labelFormatter.call(W)})}renderItem(W){let re=W.legendItem=W.legendItem||{},he=this.chart,ie=he.renderer,ae=this.options,Ce=ae.layout==="horizontal",ge=this.symbolWidth,ke=ae.symbolPadding||0,K=this.itemStyle,Q=this.itemHiddenStyle,le=Ce?O(ae.itemDistance,20):0,_e=!ae.rtl,J=!W.series,ne=!J&&W.series.drawLegendSymbol?W.series:W,ue=ne.options,ye=!!this.createCheckboxForItem&&ue&&ue.showCheckbox,we=ae.useHTML,ze=W.options.className,Ee=re.label,Ie=ge+ke+le+(ye?20:0);!Ee&&(re.group=ie.g("legend-item").addClass("highcharts-"+ne.type+"-series highcharts-color-"+W.colorIndex+(ze?" "+ze:"")+(J?" highcharts-series-"+W.index:"")).attr({zIndex:1}).add(this.scrollGroup),re.label=Ee=ie.text("",_e?ge+ke:-ke,this.baseline||0,we),he.styledMode||Ee.css(j(W.visible?K:Q)),Ee.attr({align:_e?"left":"right",zIndex:2}).add(re.group),!this.baseline&&(this.fontMetrics=ie.fontMetrics(Ee),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Ee.attr("y",this.baseline),this.symbolHeight=O(ae.symbolHeight,this.fontMetrics.f),ae.squareSymbol&&(this.symbolWidth=O(ae.symbolWidth,Math.max(this.symbolHeight,16)),Ie=this.symbolWidth+ke+le+(ye?20:0),_e&&Ee.attr("x",this.symbolWidth+ke))),ne.drawLegendSymbol(this,W),this.setItemEvents&&this.setItemEvents(W,Ee,we)),ye&&!W.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(W),this.colorizeItem(W,W.visible),(he.styledMode||!K.width)&&Ee.css({width:(ae.itemWidth||this.widthOption||he.spacingBox.width)-Ie+"px"}),this.setText(W);let Fe=Ee.getBBox(),He=this.fontMetrics&&this.fontMetrics.h||0;W.itemWidth=W.checkboxOffset=ae.itemWidth||re.labelWidth||Fe.width+Ie,this.maxItemWidth=Math.max(this.maxItemWidth,W.itemWidth),this.totalItemWidth+=W.itemWidth,this.itemHeight=W.itemHeight=Math.round(re.labelHeight||(Fe.height>1.5*He?Fe.height:He))}layoutItem(W){let re=this.options,he=this.padding,ie=re.layout==="horizontal",ae=W.itemHeight,Ce=this.itemMarginBottom,ge=this.itemMarginTop,ke=ie?O(re.itemDistance,20):0,K=this.maxLegendWidth,Q=re.alignColumns&&this.totalItemWidth>K?this.maxItemWidth:W.itemWidth,le=W.legendItem||{};ie&&this.itemX-he+Q>K&&(this.itemX=he,this.lastLineHeight&&(this.itemY+=ge+this.lastLineHeight+Ce),this.lastLineHeight=0),this.lastItemY=ge+this.itemY+Ce,this.lastLineHeight=Math.max(ae,this.lastLineHeight),le.x=this.itemX,le.y=this.itemY,ie?this.itemX+=Q:(this.itemY+=ge+ae+Ce,this.lastLineHeight=ae),this.offsetWidth=this.widthOption||Math.max((ie?this.itemX-he-(W.checkbox?0:ke):Q)+he,this.offsetWidth)}getAllItems(){let W=[];return this.chart.series.forEach(function(re){let he=re&&re.options;re&&O(he.showInLegend,!N(he.linkedTo)&&void 0,!0)&&(W=W.concat((re.legendItem||{}).labels||(he.legendType==="point"?re.data:re)))}),X(this,"afterGetAllItems",{allItems:W}),W}getAlignment(){let W=this.options;return this.proximate?W.align.charAt(0)+"tv":W.floating?"":W.align.charAt(0)+W.verticalAlign.charAt(0)+W.layout.charAt(0)}adjustMargins(W,re){let he=this.chart,ie=this.options,ae=this.getAlignment();ae&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(Ce,ge){Ce.test(ae)&&!N(W[ge])&&(he[k[ge]]=Math.max(he[k[ge]],he.legend[(ge+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][ge]*ie[ge%2?"x":"y"]+O(ie.margin,12)+re[ge]+(he.titleOffset[ge]||0)))})}proximatePositions(){let W,re=this.chart,he=[],ie=this.options.align==="left";for(let ae of(this.allItems.forEach(function(Ce){let ge,ke,K=ie,Q,le;Ce.yAxis&&(Ce.xAxis.options.reversed&&(K=!K),Ce.points&&(ge=Y(K?Ce.points:Ce.points.slice(0).reverse(),function(_e){return B(_e.plotY)})),ke=this.itemMarginTop+Ce.legendItem.label.getBBox().height+this.itemMarginBottom,le=Ce.yAxis.top-re.plotTop,Q=Ce.visible?(ge?ge.plotY:Ce.yAxis.height)+(le-.3*ke):le+Ce.yAxis.height,he.push({target:Q,size:ke,item:Ce}))},this),x(he,re.plotHeight)))W=ae.item.legendItem||{},B(ae.pos)&&(W.y=re.plotTop-re.spacing[0]+ae.pos)}render(){let W=this.chart,re=W.renderer,he=this.options,ie=this.padding,ae=this.getAllItems(),Ce,ge,ke,K=this.group,Q,le=this.box;this.itemX=ie,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=L(he.width,W.spacingBox.width-ie),Q=W.spacingBox.width-2*ie-he.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(Q/=2),this.maxLegendWidth=this.widthOption||Q,K||(this.group=K=re.g("legend").addClass(he.className||"").attr({zIndex:7}).add(),this.contentGroup=re.g().attr({zIndex:1}).add(K),this.scrollGroup=re.g().add(this.contentGroup)),this.renderTitle(),G(ae,(_e,J)=>(_e.options&&_e.options.legendIndex||0)-(J.options&&J.options.legendIndex||0)),he.reversed&&ae.reverse(),this.allItems=ae,this.display=Ce=!!ae.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,ae.forEach(this.renderItem,this),ae.forEach(this.layoutItem,this),ge=(this.widthOption||this.offsetWidth)+ie,ke=this.lastItemY+this.lastLineHeight+this.titleHeight,ke=this.handleOverflow(ke)+ie,le||(this.box=le=re.rect().addClass("highcharts-legend-box").attr({r:he.borderRadius}).add(K)),W.styledMode||le.attr({stroke:he.borderColor,"stroke-width":he.borderWidth||0,fill:he.backgroundColor||"none"}).shadow(he.shadow),ge>0&&ke>0&&le[le.placed?"animate":"attr"](le.crisp.call({},{x:0,y:0,width:ge,height:ke},le.strokeWidth())),K[Ce?"show":"hide"](),W.styledMode&&K.getStyle("display")==="none"&&(ge=ke=0),this.legendWidth=ge,this.legendHeight=ke,Ce&&this.align(),this.proximate||this.positionItems(),X(this,"afterRender")}align(W=this.chart.spacingBox){let re=this.chart,he=this.options,ie=W.y;/(lth|ct|rth)/.test(this.getAlignment())&&re.titleOffset[0]>0?ie+=re.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&re.titleOffset[2]>0&&(ie-=re.titleOffset[2]),ie!==W.y&&(W=j(W,{y:ie})),re.hasRendered||(this.group.placed=!1),this.group.align(j(he,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":he.verticalAlign}),!0,W)}handleOverflow(W){let re=this,he=this.chart,ie=he.renderer,ae=this.options,Ce=ae.y,ge=ae.verticalAlign==="top",ke=this.padding,K=ae.maxHeight,Q=ae.navigation,le=O(Q.animation,!0),_e=Q.arrowSize||12,J=this.pages,ne=this.allItems,ue=function(Ae){typeof Ae=="number"?He.attr({height:Ae}):He&&(re.clipRect=He.destroy(),re.contentGroup.clip()),re.contentGroup.div&&(re.contentGroup.div.style.clip=Ae?"rect("+ke+"px,9999px,"+(ke+Ae)+"px,0)":"auto")},ye=function(Ae){return re[Ae]=ie.circle(0,0,1.3*_e).translate(_e/2,_e/2).add(Fe),he.styledMode||re[Ae].attr("fill","rgba(0,0,0,0.0001)"),re[Ae]},we,ze,Ee,Ie=he.spacingBox.height+(ge?-Ce:Ce)-ke,Fe=this.nav,He=this.clipRect;return ae.layout!=="horizontal"||ae.verticalAlign==="middle"||ae.floating||(Ie/=2),K&&(Ie=Math.min(Ie,K)),J.length=0,W&&Ie>0&&W>Ie&&Q.enabled!==!1?(this.clipHeight=we=Math.max(Ie-20-this.titleHeight-ke,0),this.currentPage=O(this.currentPage,1),this.fullHeight=W,ne.forEach((Ae,xe)=>{let me=(Ee=Ae.legendItem||{}).y||0,Me=Math.round(Ee.label.getBBox().height),De=J.length;(!De||me-J[De-1]>we&&(ze||me)!==J[De-1])&&(J.push(ze||me),De++),Ee.pageIx=De-1,ze&&((ne[xe-1].legendItem||{}).pageIx=De-1),xe===ne.length-1&&me+Me-J[De-1]>we&&me>J[De-1]&&(J.push(me),Ee.pageIx=De),me!==ze&&(ze=me)}),He||(He=re.clipRect=ie.clipRect(0,ke-2,9999,0),re.contentGroup.clip(He)),ue(we),Fe||(this.nav=Fe=ie.g().attr({zIndex:1}).add(this.group),this.up=ie.symbol("triangle",0,0,_e,_e).add(Fe),ye("upTracker").on("click",function(){re.scroll(-1,le)}),this.pager=ie.text("",15,10).addClass("highcharts-legend-navigation"),!he.styledMode&&Q.style&&this.pager.css(Q.style),this.pager.add(Fe),this.down=ie.symbol("triangle-down",0,0,_e,_e).add(Fe),ye("downTracker").on("click",function(){re.scroll(1,le)})),re.scroll(0),W=Ie):Fe&&(ue(),this.nav=Fe.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),W}scroll(W,re){let he=this.chart,ie=this.pages,ae=ie.length,Ce=this.clipHeight,ge=this.options.navigation,ke=this.pager,K=this.padding,Q=this.currentPage+W;Q>ae&&(Q=ae),Q>0&&(re!==void 0&&b(re,he),this.nav.attr({translateX:K,translateY:Ce+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(le){le.attr({class:Q===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),ke.attr({text:Q+"/"+ae}),[this.down,this.downTracker].forEach(function(le){le.attr({x:18+this.pager.getBBox().width,class:Q===ae?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),he.styledMode||(this.up.attr({fill:Q===1?ge.inactiveColor:ge.activeColor}),this.upTracker.css({cursor:Q===1?"default":"pointer"}),this.down.attr({fill:Q===ae?ge.inactiveColor:ge.activeColor}),this.downTracker.css({cursor:Q===ae?"default":"pointer"})),this.scrollOffset=-ie[Q-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=Q,this.positionCheckboxes(),$(()=>{X(this,"afterScroll",{currentPage:Q})},C(O(re,he.renderer.globalAnimation,!0)).duration))}setItemEvents(W,re,he){let ie=this,ae=W.legendItem||{},Ce=ie.chart.renderer.boxWrapper,ge=W instanceof p,ke=W instanceof r,K="highcharts-legend-"+(ge?"point":"series")+"-active",Q=ie.chart.styledMode,le=he?[re,ae.symbol]:[ae.group],_e=J=>{ie.allItems.forEach(ne=>{W!==ne&&[ne].concat(ne.linkedSeries||[]).forEach(ue=>{ue.setState(J,!ge)})})};for(let J of le)J&&J.on("mouseover",function(){W.visible&&_e("inactive"),W.setState("hover"),W.visible&&Ce.addClass(K),Q||re.css(ie.options.itemHoverStyle)}).on("mouseout",function(){ie.chart.styledMode||re.css(j(W.visible?ie.itemStyle:ie.itemHiddenStyle)),_e(""),Ce.removeClass(K),W.setState()}).on("click",function(ne){let ue=function(){W.setVisible&&W.setVisible(),_e(W.visible?"inactive":"")};Ce.removeClass(K),X(ie,"itemClick",{browserEvent:ne,legendItem:W},ue),ge?W.firePointEvent("legendItemClick",{browserEvent:ne}):ke&&X(W,"legendItemClick",{browserEvent:ne})})}createCheckboxForItem(W){W.checkbox=w("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:W.selected,defaultChecked:W.selected},this.options.itemCheckboxStyle,this.chart.container),D(W.checkbox,"click",function(re){let he=re.target;X(W.series||W,"checkboxClick",{checked:he.checked,item:W},function(){W.select()})})}}return(y=F).compose=function(H){R(S,"Core.Legend")&&D(H,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})},F}),s(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(a,l,h,r,p,m,g,v,y,C,b,T,S,k){let{animate:x,animObject:A,setAnimation:D}=a,{defaultOptions:w,defaultTime:I}=h,{numberFormat:N}=r,{registerEventOptions:q}=p,{charts:Y,doc:X,marginNames:B,svg:j,win:O}=m,{seriesTypes:R}=y,{addEvent:L,attr:G,createElement:$,css:F,defined:H,diffObjects:W,discardElement:re,erase:he,error:ie,extend:ae,find:Ce,fireEvent:ge,getStyle:ke,isArray:K,isNumber:Q,isObject:le,isString:_e,merge:J,objectEach:ne,pick:ue,pInt:ye,relativeLength:we,removeEvent:ze,splat:Ee,syncTimeout:Ie,uniqueKey:Fe}=T;class He{static chart(xe,me,Me){return new He(xe,me,Me)}constructor(xe,me,Me){this.sharedClips={};let De=[...arguments];(_e(xe)||xe.nodeName)&&(this.renderTo=De.shift()),this.init(De[0],De[1])}setZoomOptions(){let xe=this.options.chart,me=xe.zooming;this.zooming={...me,type:ue(xe.zoomType,me.type),key:ue(xe.zoomKey,me.key),pinchType:ue(xe.pinchType,me.pinchType),singleTouch:ue(xe.zoomBySingleTouch,me.singleTouch,!1),resetButton:J(me.resetButton,xe.resetZoomButton)}}init(xe,me){ge(this,"init",{args:arguments},function(){let Me=J(w,xe),De=Me.chart;this.userOptions=ae({},xe),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=me,this.isResizing=0,this.options=Me,this.axes=[],this.series=[],this.time=xe.time&&Object.keys(xe.time).length?new b(xe.time):m.time,this.numberFormatter=De.numberFormatter||N,this.styledMode=De.styledMode,this.hasCartesianSeries=De.showAxes,this.index=Y.length,Y.push(this),m.chartCount++,q(this,De),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),ge(this,"afterInit"),this.firstRender()})}initSeries(xe){let me=this.options.chart,Me=xe.type||me.type,De=R[Me];De||ie(17,!0,this,{missingModuleFor:Me});let Pe=new De;return typeof Pe.init=="function"&&Pe.init(this,xe),Pe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(xe){xe.points||xe.data||!xe.enabledDataSorting||xe.setData(xe.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(xe,me){return xe.linkedSeries.length||me.linkedSeries.length?me.linkedSeries.length-xe.linkedSeries.length:0})}orderItems(xe,me=0){let Me=this[xe],De=this.options[xe]=Ee(this.options[xe]).slice(),Pe=this.userOptions[xe]=this.userOptions[xe]?Ee(this.userOptions[xe]).slice():[];if(this.hasRendered&&(De.splice(me),Pe.splice(me)),Me)for(let je=me,Xe=Me.length;je<Xe;++je){let tt=Me[je];tt&&(tt.index=je,tt instanceof v&&(tt.name=tt.getName()),tt.options.isInternal||(De[je]=tt.options,Pe[je]=tt.userOptions))}}isInsidePlot(xe,me,Me={}){var Tt;let{inverted:De,plotBox:Pe,plotLeft:je,plotTop:Xe,scrollablePlotBox:tt}=this,{scrollLeft:rt=0,scrollTop:dt=0}=Me.visiblePlotOnly&&((Tt=this.scrollablePlotArea)==null?void 0:Tt.scrollingContainer)||{},gt=Me.series,wt=Me.visiblePlotOnly&&tt||Pe,Rt=Me.inverted?me:xe,ft=Me.inverted?xe:me,Et={x:Rt,y:ft,isInsidePlot:!0,options:Me};if(!Me.ignoreX){let si=gt&&(De&&!this.polar?gt.yAxis:gt.xAxis)||{pos:je,len:1/0},ui=Me.paneCoordinates?si.pos+Rt:je+Rt;ui>=Math.max(rt+je,si.pos)&&ui<=Math.min(rt+je+wt.width,si.pos+si.len)||(Et.isInsidePlot=!1)}if(!Me.ignoreY&&Et.isInsidePlot){let si=!De&&Me.axis&&!Me.axis.isXAxis&&Me.axis||gt&&(De?gt.xAxis:gt.yAxis)||{pos:Xe,len:1/0},ui=Me.paneCoordinates?si.pos+ft:Xe+ft;ui>=Math.max(dt+Xe,si.pos)&&ui<=Math.min(dt+Xe+wt.height,si.pos+si.len)||(Et.isInsidePlot=!1)}return ge(this,"afterIsInsidePlot",Et),Et.isInsidePlot}redraw(xe){ge(this,"beforeRedraw");let me=this.hasCartesianSeries?this.axes:this.colorAxis||[],Me=this.series,De=this.pointer,Pe=this.legend,je=this.userOptions.legend,Xe=this.renderer,tt=Xe.isHidden(),rt=[],dt,gt,wt,Rt=this.isDirtyBox,ft=this.isDirtyLegend,Et;for(Xe.rootFontSize=Xe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&xe,this),tt&&this.temporaryDisplay(),this.layOutTitles(!1),wt=Me.length;wt--;)if(((Et=Me[wt]).options.stacking||Et.options.centerInCategory)&&(gt=!0,Et.isDirty)){dt=!0;break}if(dt)for(wt=Me.length;wt--;)(Et=Me[wt]).options.stacking&&(Et.isDirty=!0);Me.forEach(function(Tt){Tt.isDirty&&(Tt.options.legendType==="point"?(typeof Tt.updateTotals=="function"&&Tt.updateTotals(),ft=!0):je&&(je.labelFormatter||je.labelFormat)&&(ft=!0)),Tt.isDirtyData&&ge(Tt,"updatedData")}),ft&&Pe&&Pe.options.enabled&&(Pe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),me.forEach(function(Tt){Tt.updateNames(),Tt.setScale()}),this.getMargins(),me.forEach(function(Tt){Tt.isDirty&&(Rt=!0)}),me.forEach(function(Tt){let si=Tt.min+","+Tt.max;Tt.extKey!==si&&(Tt.extKey=si,rt.push(function(){ge(Tt,"afterSetExtremes",ae(Tt.eventArgs,Tt.getExtremes())),delete Tt.eventArgs})),(Rt||gt)&&Tt.redraw()}),Rt&&this.drawChartBox(),ge(this,"predraw"),Me.forEach(function(Tt){(Rt||Tt.isDirty)&&Tt.visible&&Tt.redraw(),Tt.isDirtyData=!1}),De&&De.reset(!0),Xe.draw(),ge(this,"redraw"),ge(this,"render"),tt&&this.temporaryDisplay(!0),rt.forEach(function(Tt){Tt.call()})}get(xe){let me=this.series;function Me(Pe){return Pe.id===xe||Pe.options&&Pe.options.id===xe}let De=Ce(this.axes,Me)||Ce(this.series,Me);for(let Pe=0;!De&&Pe<me.length;Pe++)De=Ce(me[Pe].points||[],Me);return De}getAxes(){let xe=this.userOptions;for(let me of(ge(this,"getAxes"),["xAxis","yAxis"]))for(let Me of xe[me]=Ee(xe[me]||{}))new l(this,Me,me);ge(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((xe,me)=>(me.getPointsCollection().forEach(Me=>{ue(Me.selectedStaging,Me.selected)&&xe.push(Me)}),xe),[])}getSelectedSeries(){return this.series.filter(function(xe){return xe.selected})}setTitle(xe,me,Me){this.applyDescription("title",xe),this.applyDescription("subtitle",me),this.applyDescription("caption",void 0),this.layOutTitles(Me)}applyDescription(xe,me){let Me=this,De=this.options[xe]=J(this.options[xe],me),Pe=this[xe];Pe&&me&&(this[xe]=Pe=Pe.destroy()),De&&!Pe&&((Pe=this.renderer.text(De.text,0,0,De.useHTML).attr({align:De.align,class:"highcharts-"+xe,zIndex:De.zIndex||4}).add()).update=function(je,Xe){Me.applyDescription(xe,je),Me.layOutTitles(Xe)},this.styledMode||Pe.css(ae(xe==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},De.style)),this[xe]=Pe)}layOutTitles(xe=!0){let me=[0,0,0],Me=this.renderer,De=this.spacingBox;["title","subtitle","caption"].forEach(function(je){let Xe=this[je],tt=this.options[je],rt=tt.verticalAlign||"top",dt=je==="title"?rt==="top"?-3:0:rt==="top"?me[0]+2:0;if(Xe){Xe.css({width:(tt.width||De.width+(tt.widthAdjust||0))+"px"});let gt=Me.fontMetrics(Xe).b,wt=Math.round(Xe.getBBox(tt.useHTML).height);Xe.align(ae({y:rt==="bottom"?gt:dt+gt,height:wt},tt),!1,"spacingBox"),tt.floating||(rt==="top"?me[0]=Math.ceil(me[0]+wt):rt==="bottom"&&(me[2]=Math.ceil(me[2]+wt)))}},this),me[0]&&(this.options.title.verticalAlign||"top")==="top"&&(me[0]+=this.options.title.margin),me[2]&&this.options.caption.verticalAlign==="bottom"&&(me[2]+=this.options.caption.margin);let Pe=!this.titleOffset||this.titleOffset.join(",")!==me.join(",");this.titleOffset=me,ge(this,"afterLayOutTitles"),!this.isDirtyBox&&Pe&&(this.isDirtyBox=this.isDirtyLegend=Pe,this.hasRendered&&xe&&this.isDirtyBox&&this.redraw())}getContainerBox(){let xe=[].map.call(this.renderTo.children,Me=>{if(Me!==this.container){let De=Me.style.display;return Me.style.display="none",[Me,De]}}),me={width:ke(this.renderTo,"width",!0)||0,height:ke(this.renderTo,"height",!0)||0};return xe.filter(Boolean).forEach(([Me,De])=>{Me.style.display=De}),me}getChartSize(){var je;let xe=this.options.chart,me=xe.width,Me=xe.height,De=this.getContainerBox(),Pe=De.height>1&&!(!((je=this.renderTo.parentElement)!=null&&je.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,me||De.width||600),this.chartHeight=Math.max(0,we(Me,this.chartWidth)||(Pe?De.height:400)),this.containerBox=De}temporaryDisplay(xe){let me=this.renderTo,Me;if(xe)for(;me&&me.style;)me.hcOrigStyle&&(F(me,me.hcOrigStyle),delete me.hcOrigStyle),me.hcOrigDetached&&(X.body.removeChild(me),me.hcOrigDetached=!1),me=me.parentNode;else for(;me&&me.style&&(X.body.contains(me)||me.parentNode||(me.hcOrigDetached=!0,X.body.appendChild(me)),(ke(me,"display",!1)==="none"||me.hcOricDetached)&&(me.hcOrigStyle={display:me.style.display,height:me.style.height,overflow:me.style.overflow},Me={display:"block",overflow:"hidden"},me!==this.renderTo&&(Me.height=0),F(me,Me),me.offsetWidth||me.style.setProperty("display","block","important")),(me=me.parentNode)!==X.body););}setClassName(xe){this.container.className="highcharts-container "+(xe||"")}getContainer(){var wt;let xe=this.options,me=xe.chart,Me="data-highcharts-chart",De=Fe(),Pe,je=this.renderTo;je||(this.renderTo=je=me.renderTo),_e(je)&&(this.renderTo=je=X.getElementById(je)),je||ie(13,!0,this);let Xe=ye(G(je,Me));Q(Xe)&&Y[Xe]&&Y[Xe].hasRendered&&Y[Xe].destroy(),G(je,Me,this.index),je.innerHTML=S.emptyHTML,me.skipClone||je.offsetWidth||this.temporaryDisplay(),this.getChartSize();let tt=this.chartHeight,rt=this.chartWidth;F(je,{overflow:"hidden"}),this.styledMode||(Pe=ae({position:"relative",overflow:"hidden",width:rt+"px",height:tt+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},me.style||{}));let dt=$("div",{id:De},Pe,je);this.container=dt,this.getChartSize(),rt===this.chartWidth||(rt=this.chartWidth,this.styledMode||F(dt,{width:ue((wt=me.style)==null?void 0:wt.width,rt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=dt.style.cursor;let gt=me.renderer||!j?g.getRendererType(me.renderer):C;if(this.renderer=new gt(dt,rt,tt,void 0,me.forExport,xe.exporting&&xe.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(me.className),this.styledMode)for(let Rt in xe.defs)this.renderer.definition(xe.defs[Rt]);else this.renderer.setStyle(me.style);this.renderer.chartIndex=this.index,ge(this,"afterGetContainer")}getMargins(xe){let{spacing:me,margin:Me,titleOffset:De}=this;this.resetMargins(),De[0]&&!H(Me[0])&&(this.plotTop=Math.max(this.plotTop,De[0]+me[0])),De[2]&&!H(Me[2])&&(this.marginBottom=Math.max(this.marginBottom,De[2]+me[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Me,me),ge(this,"getMargins"),xe||this.getAxisMargins()}getAxisMargins(){let xe=this,me=xe.axisOffset=[0,0,0,0],Me=xe.colorAxis,De=xe.margin,Pe=function(je){je.forEach(function(Xe){Xe.visible&&Xe.getOffset()})};xe.hasCartesianSeries?Pe(xe.axes):Me&&Me.length&&Pe(Me),B.forEach(function(je,Xe){H(De[Xe])||(xe[je]+=me[Xe])}),xe.setChartSize()}getOptions(){return W(this.userOptions,w)}reflow(xe){var Pe;let me=this,Me=me.containerBox,De=me.getContainerBox();(Pe=me.pointer)==null||delete Pe.chartPosition,!me.isPrinting&&!me.isResizing&&Me&&De.width&&((De.width!==Me.width||De.height!==Me.height)&&(T.clearTimeout(me.reflowTimeout),me.reflowTimeout=Ie(function(){me.container&&me.setSize(void 0,void 0,!1)},xe?100:0)),me.containerBox=De)}setReflow(){let xe=this,me=Me=>{var De;(De=xe.options)!=null&&De.chart.reflow&&xe.hasLoaded&&xe.reflow(Me)};if(typeof ResizeObserver=="function")new ResizeObserver(me).observe(xe.renderTo);else{let Me=L(O,"resize",me);L(this,"destroy",Me)}}setSize(xe,me,Me){let De=this,Pe=De.renderer;De.isResizing+=1,D(Me,De);let je=Pe.globalAnimation;De.oldChartHeight=De.chartHeight,De.oldChartWidth=De.chartWidth,xe!==void 0&&(De.options.chart.width=xe),me!==void 0&&(De.options.chart.height=me),De.getChartSize();let{chartWidth:Xe,chartHeight:tt,scrollablePixelsX:rt=0,scrollablePixelsY:dt=0}=De;(De.isDirtyBox||Xe!==De.oldChartWidth||tt!==De.oldChartHeight)&&(De.styledMode||(je?x:F)(De.container,{width:`${Xe+rt}px`,height:`${tt+dt}px`},je),De.setChartSize(!0),Pe.setSize(Xe,tt,je),De.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),De.isDirtyLegend=!0,De.isDirtyBox=!0,De.layOutTitles(),De.getMargins(),De.redraw(je),De.oldChartHeight=void 0,ge(De,"resize"),setTimeout(()=>{De&&ge(De,"endResize")},A(je).duration)),De.isResizing-=1}setChartSize(xe){let me,Me,De,Pe,{chartHeight:je,chartWidth:Xe,inverted:tt,spacing:rt,renderer:dt}=this,gt=this.clipOffset,wt=Math[tt?"floor":"round"];this.plotLeft=me=Math.round(this.plotLeft),this.plotTop=Me=Math.round(this.plotTop),this.plotWidth=De=Math.max(0,Math.round(Xe-me-this.marginRight)),this.plotHeight=Pe=Math.max(0,Math.round(je-Me-this.marginBottom)),this.plotSizeX=tt?Pe:De,this.plotSizeY=tt?De:Pe,this.spacingBox=dt.spacingBox={x:rt[3],y:rt[0],width:Xe-rt[3]-rt[1],height:je-rt[0]-rt[2]},this.plotBox=dt.plotBox={x:me,y:Me,width:De,height:Pe},gt&&(this.clipBox={x:wt(gt[3]),y:wt(gt[0]),width:wt(this.plotSizeX-gt[1]-gt[3]),height:wt(this.plotSizeY-gt[0]-gt[2])}),xe||(this.axes.forEach(function(Rt){Rt.setAxisSize(),Rt.setAxisTranslation()}),dt.alignElements()),ge(this,"afterSetChartSize",{skipAxes:xe})}resetMargins(){ge(this,"resetMargins");let xe=this,me=xe.options.chart,Me=me.plotBorderWidth||0,De=Me/2;["margin","spacing"].forEach(function(Pe){let je=me[Pe],Xe=le(je)?je:[je,je,je,je];["Top","Right","Bottom","Left"].forEach(function(tt,rt){xe[Pe][rt]=ue(me[Pe+tt],Xe[rt])})}),B.forEach(function(Pe,je){xe[Pe]=ue(xe.margin[je],xe.spacing[je])}),xe.axisOffset=[0,0,0,0],xe.clipOffset=[De,De,De,De],xe.plotBorderWidth=Me}drawChartBox(){let xe=this.options.chart,me=this.renderer,Me=this.chartWidth,De=this.chartHeight,Pe=this.styledMode,je=this.plotBGImage,Xe=xe.backgroundColor,tt=xe.plotBackgroundColor,rt=xe.plotBackgroundImage,dt=this.plotLeft,gt=this.plotTop,wt=this.plotWidth,Rt=this.plotHeight,ft=this.plotBox,Et=this.clipRect,Tt=this.clipBox,si=this.chartBackground,ui=this.plotBackground,Wt=this.plotBorder,ar,Xi,mr,Nr="animate";si||(this.chartBackground=si=me.rect().addClass("highcharts-background").add(),Nr="attr"),Pe?ar=Xi=si.strokeWidth():(Xi=(ar=xe.borderWidth||0)+(xe.shadow?8:0),mr={fill:Xe||"none"},(ar||si["stroke-width"])&&(mr.stroke=xe.borderColor,mr["stroke-width"]=ar),si.attr(mr).shadow(xe.shadow)),si[Nr]({x:Xi/2,y:Xi/2,width:Me-Xi-ar%2,height:De-Xi-ar%2,r:xe.borderRadius}),Nr="animate",ui||(Nr="attr",this.plotBackground=ui=me.rect().addClass("highcharts-plot-background").add()),ui[Nr](ft),!Pe&&(ui.attr({fill:tt||"none"}).shadow(xe.plotShadow),rt&&(je?(rt!==je.attr("href")&&je.attr("href",rt),je.animate(ft)):this.plotBGImage=me.image(rt,dt,gt,wt,Rt).add())),Et?Et.animate({width:Tt.width,height:Tt.height}):this.clipRect=me.clipRect(Tt),Nr="animate",Wt||(Nr="attr",this.plotBorder=Wt=me.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Pe||Wt.attr({stroke:xe.plotBorderColor,"stroke-width":xe.plotBorderWidth||0,fill:"none"}),Wt[Nr](Wt.crisp({x:dt,y:gt,width:wt,height:Rt},-Wt.strokeWidth())),this.isDirtyBox=!1,ge(this,"afterDrawChartBox")}propFromSeries(){let xe,me,Me,De=this,Pe=De.options.chart,je=De.options.series;["inverted","angular","polar"].forEach(function(Xe){for(me=R[Pe.type],Me=Pe[Xe]||me&&me.prototype[Xe],xe=je&&je.length;!Me&&xe--;)(me=R[je[xe].type])&&me.prototype[Xe]&&(Me=!0);De[Xe]=Me})}linkSeries(xe){let me=this,Me=me.series;Me.forEach(function(De){De.linkedSeries.length=0}),Me.forEach(function(De){let{linkedTo:Pe}=De.options;if(_e(Pe)){let je;(je=Pe===":previous"?me.series[De.index-1]:me.get(Pe))&&je.linkedParent!==De&&(je.linkedSeries.push(De),De.linkedParent=je,je.enabledDataSorting&&De.setDataSortingOptions(),De.visible=ue(De.options.visible,je.options.visible,De.visible))}}),ge(this,"afterLinkSeries",{isUpdating:xe})}renderSeries(){this.series.forEach(function(xe){xe.translate(),xe.render()})}render(){var dt;let xe=this.axes,me=this.colorAxis,Me=this.renderer,De=this.options.chart.axisLayoutRuns||2,Pe=gt=>{gt.forEach(wt=>{wt.visible&&wt.render()})},je=0,Xe=!0,tt,rt=0;for(let gt of(this.setTitle(),ge(this,"beforeMargins"),(dt=this.getStacks)==null||dt.call(this),this.getMargins(!0),this.setChartSize(),xe)){let{options:wt}=gt,{labels:Rt}=wt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Rt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){je=wt.tickLength,gt.createGroups();let ft=new k(gt,0,"",!0),Et=ft.createLabel("x",Rt);if(ft.destroy(),Et&&ue(Rt.reserveSpace,!Q(wt.crossing))&&(je=Et.getBBox().height+Rt.distance+Math.max(wt.offset||0,0)),je){Et==null||Et.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-je,0);(Xe||tt||De>1)&&rt<De;){let gt=this.plotWidth,wt=this.plotHeight;for(let Rt of xe)rt===0?Rt.setScale():(Rt.horiz&&Xe||!Rt.horiz&&tt)&&Rt.setTickInterval(!0);rt===0?this.getAxisMargins():this.getMargins(),Xe=gt/this.plotWidth>(rt?1:1.1),tt=wt/this.plotHeight>(rt?1:1.05),rt++}this.drawChartBox(),this.hasCartesianSeries?Pe(xe):me&&me.length&&Pe(me),this.seriesGroup||(this.seriesGroup=Me.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(xe){let me=this,Me=J(!0,this.options.credits,xe);Me.enabled&&!this.credits&&(this.credits=this.renderer.text(Me.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Me.href&&(O.location.href=Me.href)}).attr({align:Me.position.align,zIndex:8}),me.styledMode||this.credits.css(Me.style),this.credits.add().align(Me.position),this.credits.update=function(De){me.credits=me.credits.destroy(),me.addCredits(De)})}destroy(){let xe,me=this,Me=me.axes,De=me.series,Pe=me.container,je=Pe&&Pe.parentNode;for(ge(me,"destroy"),me.renderer.forExport?he(Y,me):Y[me.index]=void 0,m.chartCount--,me.renderTo.removeAttribute("data-highcharts-chart"),ze(me),xe=Me.length;xe--;)Me[xe]=Me[xe].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),xe=De.length;xe--;)De[xe]=De[xe].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Xe){let tt=me[Xe];tt&&tt.destroy&&(me[Xe]=tt.destroy())}),Pe&&(Pe.innerHTML=S.emptyHTML,ze(Pe),je&&re(Pe)),ne(me,function(Xe,tt){delete me[tt]})}firstRender(){var De;let xe=this,me=xe.options;xe.getContainer(),xe.resetMargins(),xe.setChartSize(),xe.propFromSeries(),xe.getAxes();let Me=K(me.series)?me.series:[];me.series=[],Me.forEach(function(Pe){xe.initSeries(Pe)}),xe.linkSeries(),xe.setSortedData(),ge(xe,"beforeRender"),xe.render(),(De=xe.pointer)==null||De.getChartPosition(),xe.renderer.imgCount||xe.hasLoaded||xe.onload(),xe.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(xe){xe&&this.index!==void 0&&xe.apply(this,[this])},this),ge(this,"load"),ge(this,"render"),H(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:xe,title:me}=this;!xe||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(me&&me.element.textContent||"").replace(/</g,"&lt;")}),xe.accessibility&&xe.accessibility.enabled===!1||ie('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(xe,me,Me){let De,Pe=this;return xe&&(me=ue(me,!0),ge(Pe,"addSeries",{options:xe},function(){De=Pe.initSeries(xe),Pe.isDirtyLegend=!0,Pe.linkSeries(),De.enabledDataSorting&&De.setData(xe.data,!1),ge(Pe,"afterAddSeries",{series:De}),me&&Pe.redraw(Me)})),De}addAxis(xe,me,Me,De){return this.createAxis(me?"xAxis":"yAxis",{axis:xe,redraw:Me,animation:De})}addColorAxis(xe,me,Me){return this.createAxis("colorAxis",{axis:xe,redraw:me,animation:Me})}createAxis(xe,me){let Me=new l(this,me.axis,xe);return ue(me.redraw,!0)&&this.redraw(me.animation),Me}showLoading(xe){let me=this,Me=me.options,De=Me.loading,Pe=function(){je&&F(je,{left:me.plotLeft+"px",top:me.plotTop+"px",width:me.plotWidth+"px",height:me.plotHeight+"px"})},je=me.loadingDiv,Xe=me.loadingSpan;je||(me.loadingDiv=je=$("div",{className:"highcharts-loading highcharts-loading-hidden"},null,me.container)),Xe||(me.loadingSpan=Xe=$("span",{className:"highcharts-loading-inner"},null,je),L(me,"redraw",Pe)),je.className="highcharts-loading",S.setElementHTML(Xe,ue(xe,Me.lang.loading,"")),me.styledMode||(F(je,ae(De.style,{zIndex:10})),F(Xe,De.labelStyle),me.loadingShown||(F(je,{opacity:0,display:""}),x(je,{opacity:De.style.opacity||.5},{duration:De.showDuration||0}))),me.loadingShown=!0,Pe()}hideLoading(){let xe=this.options,me=this.loadingDiv;me&&(me.className="highcharts-loading highcharts-loading-hidden",this.styledMode||x(me,{opacity:0},{duration:xe.loading.hideDuration||100,complete:function(){F(me,{display:"none"})}})),this.loadingShown=!1}update(xe,me,Me,De){let Pe,je,Xe,tt=this,rt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},dt=xe.isResponsiveOptions,gt=[];ge(tt,"update",{options:xe}),dt||tt.setResponsive(!1,!0),xe=W(xe,tt.options),tt.userOptions=J(tt.userOptions,xe);let wt=xe.chart;wt&&(J(!0,tt.options.chart,wt),this.setZoomOptions(),"className"in wt&&tt.setClassName(wt.className),("inverted"in wt||"polar"in wt||"type"in wt)&&(tt.propFromSeries(),Pe=!0),"alignTicks"in wt&&(Pe=!0),"events"in wt&&q(this,wt),ne(wt,function(Et,Tt){tt.propsRequireUpdateSeries.indexOf("chart."+Tt)!==-1&&(je=!0),tt.propsRequireDirtyBox.indexOf(Tt)!==-1&&(tt.isDirtyBox=!0),tt.propsRequireReflow.indexOf(Tt)===-1||(tt.isDirtyBox=!0,dt||(Xe=!0))}),!tt.styledMode&&wt.style&&tt.renderer.setStyle(tt.options.chart.style||{})),!tt.styledMode&&xe.colors&&(this.options.colors=xe.colors),xe.time&&(this.time===I&&(this.time=new b(xe.time)),J(!0,tt.options.time,xe.time)),ne(xe,function(Et,Tt){tt[Tt]&&typeof tt[Tt].update=="function"?tt[Tt].update(Et,!1):typeof tt[rt[Tt]]=="function"?tt[rt[Tt]](Et):Tt!=="colors"&&tt.collectionsWithUpdate.indexOf(Tt)===-1&&J(!0,tt.options[Tt],xe[Tt]),Tt!=="chart"&&tt.propsRequireUpdateSeries.indexOf(Tt)!==-1&&(je=!0)}),this.collectionsWithUpdate.forEach(function(Et){xe[Et]&&(Ee(xe[Et]).forEach(function(Tt,si){let ui,Wt=H(Tt.id);Wt&&(ui=tt.get(Tt.id)),!ui&&tt[Et]&&(ui=tt[Et][ue(Tt.index,si)])&&(Wt&&H(ui.options.id)||ui.options.isInternal)&&(ui=void 0),ui&&ui.coll===Et&&(ui.update(Tt,!1),Me&&(ui.touched=!0)),!ui&&Me&&tt.collectionsWithInit[Et]&&(tt.collectionsWithInit[Et][0].apply(tt,[Tt].concat(tt.collectionsWithInit[Et][1]||[]).concat([!1])).touched=!0)}),Me&&tt[Et].forEach(function(Tt){Tt.touched||Tt.options.isInternal?delete Tt.touched:gt.push(Tt)}))}),gt.forEach(function(Et){Et.chart&&Et.remove&&Et.remove(!1)}),Pe&&tt.axes.forEach(function(Et){Et.update({},!1)}),je&&tt.getSeriesOrderByLinks().forEach(function(Et){Et.chart&&Et.update({},!1)},this);let Rt=wt&&wt.width,ft=wt&&(_e(wt.height)?we(wt.height,Rt||tt.chartWidth):wt.height);Xe||Q(Rt)&&Rt!==tt.chartWidth||Q(ft)&&ft!==tt.chartHeight?tt.setSize(Rt,ft,De):ue(me,!0)&&tt.redraw(De),ge(tt,"afterUpdate",{options:xe,redraw:me,animation:De})}setSubtitle(xe,me){this.applyDescription("subtitle",xe),this.layOutTitles(me)}setCaption(xe,me){this.applyDescription("caption",xe),this.layOutTitles(me)}showResetZoom(){let xe=this,me=w.lang,Me=xe.zooming.resetButton,De=Me.theme,Pe=Me.relativeTo==="chart"||Me.relativeTo==="spacingBox"?null:"plotBox";function je(){xe.zoomOut()}ge(this,"beforeShowResetZoom",null,function(){xe.resetZoomButton=xe.renderer.button(me.resetZoom,null,null,je,De).attr({align:Me.position.align,title:me.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Me.position,!1,Pe)}),ge(this,"afterShowResetZoom")}zoomOut(){ge(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(xe,me){let Me=this,De=typeof me=="object"?me:{enabled:me,type:"x"},Pe=De.type,je=Pe&&Me[{x:"xAxis",xy:"axes",y:"yAxis"}[Pe]].filter(tt=>tt.options.panningEnabled&&!tt.options.isInternal),Xe=Me.options.chart;Xe!=null&&Xe.panning&&(Xe.panning=De),ge(this,"pan",{originalEvent:xe},()=>{Me.transform({axes:je,event:xe,to:{x:xe.chartX-(Me.mouseDownX||0),y:xe.chartY-(Me.mouseDownY||0)},trigger:"pan"}),F(Me.container,{cursor:"move"})})}transform(xe){var Rt;let{axes:me=this.axes,event:Me,from:De={},reset:Pe,selection:je,to:Xe={},trigger:tt}=xe,{inverted:rt}=this,dt=!1,gt,wt;for(let ft of((Rt=this.hoverPoints)==null||Rt.forEach(Et=>Et.setState()),me)){let{horiz:Et,len:Tt,minPointOffset:si=0,options:ui,reversed:Wt}=ft,ar=Et?"width":"height",Xi=Et?"x":"y",mr=ue(Xe[ar],ft.len),Nr=ue(De[ar],ft.len),ir=10>Math.abs(mr)?1:mr/Nr,ut=(De[Xi]||0)+Nr/2-ft.pos,vt=ut-((Xe[Xi]??ft.pos)+mr/2-ft.pos)/ir,Pt=Wt&&!rt||!Wt&&rt?-1:1;if(!Pe&&(ut<0||ut>ft.len))continue;let Bt=ft.toValue(vt,!0)+(je||ft.isOrdinal?0:si*Pt),Yt=ft.toValue(vt+Tt/ir,!0)-(je||ft.isOrdinal?0:si*Pt||0),vi=ft.allExtremes;if(Bt>Yt&&([Bt,Yt]=[Yt,Bt]),ir===1&&!Pe&&ft.coll==="yAxis"&&!vi){for(let Nt of ft.series){let Lt=Nt.getExtremes(Nt.getProcessedData(!0).yData,!0);vi??(vi={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Q(Lt.dataMin)&&Q(Lt.dataMax)&&(vi.dataMin=Math.min(Lt.dataMin,vi.dataMin),vi.dataMax=Math.max(Lt.dataMax,vi.dataMax))}ft.allExtremes=vi}let{dataMin:Oi,dataMax:di,min:We,max:ve}=ae(ft.getExtremes(),vi||{}),Re=Oi??ui.min,$e=di??ui.max,Ke=Yt-Bt,st=ft.categories?0:Math.min(Ke,$e-Re),ct=Re-st*(H(ui.min)?0:ui.minPadding),ot=$e+st*(H(ui.max)?0:ui.maxPadding),nt=ft.allowZoomOutside||ir===1||tt!=="zoom"&&ir>1,mt=Math.min(ui.min??ct,ct,nt?We:ct),kt=Math.max(ui.max??ot,ot,nt?ve:ot);(!ft.isOrdinal||ft.options.overscroll||ir!==1||Pe)&&(Bt<mt&&(Bt=mt,ir>=1&&(Yt=Bt+Ke)),Yt>kt&&(Yt=kt,ir>=1&&(Bt=Yt-Ke)),(Pe||ft.series.length&&(Bt!==We||Yt!==ve)&&Bt>=mt&&Yt<=kt)&&(je?je[ft.coll].push({axis:ft,min:Bt,max:Yt}):(ft.isPanning=tt!=="zoom",ft.isPanning&&(wt=!0),ft.setExtremes(Pe?void 0:Bt,Pe?void 0:Yt,!1,!1,{move:vt,trigger:tt,scale:ir}),!Pe&&(Bt>mt||Yt<kt)&&tt!=="mousewheel"&&(gt=!0)),dt=!0),Me&&(this[Et?"mouseDownX":"mouseDownY"]=Me[Et?"chartX":"chartY"]))}return dt&&(je?ge(this,"selection",je,()=>{delete xe.selection,xe.trigger="zoom",this.transform(xe)}):(!gt||wt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(tt==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),dt}}return ae(He.prototype,{callbacks:[],collectionsWithInit:{xAxis:[He.prototype.addAxis,[!0]],yAxis:[He.prototype.addAxis,[!1]],series:[He.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),He}),s(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{stop:p}=a,{composed:m}=l,{addEvent:g,createElement:v,css:y,defined:C,merge:b,pushUnique:T}=r;function S(){let A=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!A&&(this.scrollablePlotArea=A=new x(this)),A==null||A.applyFixed()}function k(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class x{static compose(D,w,I){T(m,this.compose)&&(g(D,"afterInit",k),g(w,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),g(w,"render",S),g(I,"show",k))}static afterSetSize(D,w){let I,N,q,{minWidth:Y,minHeight:X}=D.options.chart.scrollablePlotArea||{},{clipBox:B,plotBox:j,inverted:O,renderer:R}=D;if(!R.forExport&&(Y?(D.scrollablePixelsX=I=Math.max(0,Y-D.chartWidth),I&&(D.scrollablePlotBox=b(D.plotBox),j.width=D.plotWidth+=I,B[O?"height":"width"]+=I,q=!0)):X&&(D.scrollablePixelsY=N=Math.max(0,X-D.chartHeight),C(N)&&(D.scrollablePlotBox=b(D.plotBox),j.height=D.plotHeight+=N,B[O?"width":"height"]+=N,q=!1)),C(q)&&!w.skipAxes))for(let L of D.axes)L.horiz===q&&(L.setAxisSize(),L.setAxisTranslation())}constructor(D){var G;let w,I=D.options.chart,N=h.getRendererType(),q=I.scrollablePlotArea||{},Y=this.moveFixedElements.bind(this),X={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};D.scrollablePixelsX&&(X.overflowX="auto"),D.scrollablePixelsY&&(X.overflowY="auto"),this.chart=D;let B=this.parentDiv=v("div",{className:"highcharts-scrolling-parent"},{position:"relative"},D.renderTo),j=this.scrollingContainer=v("div",{className:"highcharts-scrolling"},X,B),O=this.innerContainer=v("div",{className:"highcharts-inner-container"},void 0,j),R=this.fixedDiv=v("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=I.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),L=this.fixedRenderer=new N(R,D.chartWidth,D.chartHeight,I.style);this.mask=L.path().attr({fill:I.backgroundColor||"#fff","fill-opacity":q.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),j.parentNode.insertBefore(R,j),y(D.renderTo,{overflow:"visible"}),g(D,"afterShowResetZoom",Y),g(D,"afterApplyDrilldown",Y),g(D,"afterLayOutTitles",Y),g(j,"scroll",()=>{let{pointer:$,hoverPoint:F}=D;$&&(delete $.chartPosition,F&&(w=F),$.runPointActions(void 0,w,!0))}),O.appendChild(D.container)}applyFixed(){var Q;let{chart:D,fixedRenderer:w,isDirty:I,scrollingContainer:N}=this,{axisOffset:q,chartWidth:Y,chartHeight:X,container:B,plotHeight:j,plotLeft:O,plotTop:R,plotWidth:L,scrollablePixelsX:G=0,scrollablePixelsY:$=0}=D,{scrollPositionX:F=0,scrollPositionY:H=0}=D.options.chart.scrollablePlotArea||{},W=Y+G,re=X+$;w.setSize(Y,X),(I??!0)&&(this.isDirty=!1,this.moveFixedElements()),p(D.container),y(B,{width:`${W}px`,height:`${re}px`}),D.renderer.boxWrapper.attr({width:W,height:re,viewBox:[0,0,W,re].join(" ")}),(Q=D.chartBackground)==null||Q.attr({width:W,height:re}),y(N,{width:`${Y}px`,height:`${X}px`}),C(I)||(N.scrollLeft=G*F,N.scrollTop=$*H);let he=R-q[0]-1,ie=O-q[3]-1,ae=R+j+q[2]+1,Ce=O+L+q[1]+1,ge=O+L-G,ke=R+j-$,K=[["M",0,0]];G?K=[["M",0,he],["L",O-1,he],["L",O-1,ae],["L",0,ae],["Z"],["M",ge,he],["L",Y,he],["L",Y,ae],["L",ge,ae],["Z"]]:$&&(K=[["M",ie,0],["L",ie,R-1],["L",Ce,R-1],["L",Ce,0],["Z"],["M",ie,ke],["L",ie,X],["L",Ce,X],["L",Ce,ke],["Z"]]),D.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:K})}moveFixedElements(){let D,{container:w,inverted:I,scrollablePixelsX:N,scrollablePixelsY:q}=this.chart,Y=this.fixedRenderer,X=x.fixedSelectors;for(let B of(N&&!I?D=".highcharts-yaxis":N&&I||q&&!I?D=".highcharts-xaxis":q&&I&&(D=".highcharts-yaxis"),D&&X.push(`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`),X))[].forEach.call(w.querySelectorAll(B),j=>{(j.namespaceURI===Y.SVG_NS?Y.box:Y.box.parentNode).appendChild(j),j.style.pointerEvents="auto"})}}return x.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],x}),s(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{format:r}=a,{series:p}=l,{destroyObjectProperties:m,fireEvent:g,isNumber:v,pick:y}=h;return class{constructor(C,b,T,S,k){let x=C.chart.inverted,A=C.reversed;this.axis=C;let D=this.isNegative=!!T!=!!A;this.options=b=b||{},this.x=S,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=k,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:b.align||(x?D?"left":"right":"center"),verticalAlign:b.verticalAlign||(x?"middle":D?"bottom":"top"),y:b.y,x:b.x},this.textAlign=b.textAlign||(x?D?"right":"left":"center")}destroy(){m(this,this.axis)}render(C){let b=this.axis.chart,T=this.options,S=T.format,k=S?r(S,this,b):T.formatter.call(this);if(this.label)this.label.attr({text:k,visibility:"hidden"});else{this.label=b.renderer.label(k,null,void 0,T.shape,void 0,void 0,T.useHTML,!1,"stack-labels");let x={r:T.borderRadius||0,text:k,padding:y(T.padding,5),visibility:"hidden"};b.styledMode||(x.fill=T.backgroundColor,x.stroke=T.borderColor,x["stroke-width"]=T.borderWidth,this.label.css(T.style||{})),this.label.attr(x),this.label.added||this.label.add(C)}this.label.labelrank=b.plotSizeY,g(this,"afterRender")}setOffset(C,b,T,S,k,x){let{alignOptions:A,axis:D,label:w,options:I,textAlign:N}=this,q=D.chart,Y=this.getStackBox({xOffset:C,width:b,boxBottom:T,boxTop:S,defaultX:k,xAxis:x}),{verticalAlign:X}=A;if(w&&Y){let B=w.getBBox(void 0,0),j=w.padding,O=y(I.overflow,"justify")==="justify",R;A.x=I.x||0,A.y=I.y||0;let{x:L,y:G}=this.adjustStackPosition({labelBox:B,verticalAlign:X,textAlign:N});Y.x-=L,Y.y-=G,w.align(A,!1,Y),(R=q.isInsidePlot(w.alignAttr.x+A.x+L,w.alignAttr.y+A.y+G))||(O=!1),O&&p.prototype.justifyDataLabel.call(D,w,A,w.alignAttr,B,Y),w.attr({x:w.alignAttr.x,y:w.alignAttr.y,rotation:I.rotation,rotationOriginX:B.width*{left:0,center:.5,right:1}[I.textAlign||"center"],rotationOriginY:B.height/2}),y(!O&&I.crop,!0)&&(R=v(w.x)&&v(w.y)&&q.isInsidePlot(w.x-j+(w.width||0),w.y)&&q.isInsidePlot(w.x+j,w.y)),w[R?"show":"hide"]()}g(this,"afterSetOffset",{xOffset:C,width:b})}adjustStackPosition({labelBox:C,verticalAlign:b,textAlign:T}){let S={bottom:0,middle:1,top:2,right:1,center:0,left:-1},k=S[b],x=S[T];return{x:C.width/2+C.width/2*x,y:C.height/2*k}}getStackBox(C){let b=this.axis,T=b.chart,{boxTop:S,defaultX:k,xOffset:x,width:A,boxBottom:D}=C,w=b.stacking.usePercentage?100:y(S,this.total,0),I=b.toPixels(w),N=C.xAxis||T.xAxis[0],q=y(k,N.translate(this.x))+x,Y=Math.abs(I-b.toPixels(D||v(b.min)&&b.logarithmic&&b.logarithmic.lin2log(b.min)||0)),X=T.inverted,B=this.isNegative;return X?{x:(B?I:I-Y)-T.plotLeft,y:N.height-q-A+N.top-T.plotTop,width:Y,height:A}:{x:q+N.transB-T.plotLeft,y:(B?I-Y:I)-T.plotTop,width:A,height:Y}}}}),s(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){var m;let{getDeferredAnimation:g}=a,{series:{prototype:v}}=h,{addEvent:y,correctFloat:C,defined:b,destroyObjectProperties:T,fireEvent:S,isArray:k,isNumber:x,objectEach:A,pick:D}=p;function w(){let R=this.inverted;this.axes.forEach(L=>{L.stacking&&L.stacking.stacks&&L.hasVisibleSeries&&(L.stacking.oldStacks=L.stacking.stacks)}),this.series.forEach(L=>{let G=L.xAxis&&L.xAxis.options||{};L.options.stacking&&L.reserveSpace()&&(L.stackKey=[L.type,D(L.options.stack,""),R?G.top:G.left,R?G.height:G.width].join(","))})}function I(){var L;let R=this.stacking;if(R){let G=R.stacks;A(G,($,F)=>{T($),delete G[F]}),(L=R.stackTotalGroup)==null||L.destroy()}}function N(){this.stacking||(this.stacking=new O(this))}function q(R,L,G,$){return!b(R)||R.x!==L||$&&R.stackKey!==$?R={x:L,index:0,key:$,stackKey:$}:R.index++,R.key=[G,L,R.index].join(","),R}function Y(){let R,L=this,G=L.yAxis,$=L.stackKey||"",F=G.stacking.stacks,H=L.processedXData,W=L.options.stacking,re=L[W+"Stacker"];re&&[$,"-"+$].forEach(he=>{var ke;let ie=H.length,ae,Ce,ge;for(;ie--;)ae=H[ie],R=L.getStackIndicator(R,ae,L.index,he),Ce=(ke=F[he])==null?void 0:ke[ae],(ge=Ce==null?void 0:Ce.points[R.key||""])&&re.call(L,ge,Ce,ie)})}function X(R,L,G){let $=L.total?100/L.total:0;R[0]=C(R[0]*$),R[1]=C(R[1]*$),this.stackedYData[G]=R[1]}function B(R){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?v.setStackedPoints.call(this,R,"group"):R.stacking.resetStacks())}function j(R,L){var Fe,He;let G,$,F,H,W,re,he,ie,ae,Ce=L||this.options.stacking;if(!Ce||!this.reserveSpace()||({group:"xAxis"}[Ce]||"yAxis")!==R.coll)return;let ge=this.processedXData,ke=this.processedYData,K=[],Q=ke.length,le=this.options,_e=le.threshold||0,J=le.startFromThreshold?_e:0,ne=le.stack,ue=L?`${this.type},${Ce}`:this.stackKey||"",ye="-"+ue,we=this.negStacks,ze=R.stacking,Ee=ze.stacks,Ie=ze.oldStacks;for(ze.stacksTouched+=1,he=0;he<Q;he++){ie=ge[he],ae=ke[he],re=(G=this.getStackIndicator(G,ie,this.index)).key||"",Ee[W=($=we&&ae<(J?0:_e))?ye:ue]||(Ee[W]={}),Ee[W][ie]||((Fe=Ie[W])!=null&&Fe[ie]?(Ee[W][ie]=Ie[W][ie],Ee[W][ie].total=null):Ee[W][ie]=new r(R,R.options.stackLabels,!!$,ie,ne)),F=Ee[W][ie],ae!==null?(F.points[re]=F.points[this.index]=[D(F.cumulative,J)],b(F.cumulative)||(F.base=re),F.touched=ze.stacksTouched,G.index>0&&this.singleStacks===!1&&(F.points[re][0]=F.points[this.index+","+ie+",0"][0])):(delete F.points[re],delete F.points[this.index]);let Ae=F.total||0;Ce==="percent"?(H=$?ue:ye,Ae=we&&((He=Ee[H])!=null&&He[ie])?(H=Ee[H][ie]).total=Math.max(H.total||0,Ae)+Math.abs(ae)||0:C(Ae+(Math.abs(ae)||0))):Ce==="group"?(k(ae)&&(ae=ae[0]),ae!==null&&Ae++):Ae=C(Ae+(ae||0)),Ce==="group"?F.cumulative=(Ae||1)-1:F.cumulative=C(D(F.cumulative,J)+(ae||0)),F.total=Ae,ae!==null&&(F.points[re].push(F.cumulative),K[he]=F.cumulative,F.hasValidPoints=!0)}Ce==="percent"&&(ze.usePercentage=!0),Ce!=="group"&&(this.stackedYData=K),ze.oldStacks={}}class O{constructor(L){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=L}buildStacks(){let L,G,$=this.axis,F=$.series,H=$.coll==="xAxis",W=$.options.reversedStacks,re=F.length;for(this.resetStacks(),this.usePercentage=!1,G=re;G--;)L=F[W?G:re-G-1],H&&L.setGroupedPoints($),L.setStackedPoints($);if(!H)for(G=0;G<re;G++)F[G].modifyStacks();S($,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,A(this.stacks,L=>{A(L,G=>{G.cumulative=G.total})}))}resetStacks(){A(this.stacks,L=>{A(L,(G,$)=>{x(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete L[$]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var re;let L=this.axis,G=L.chart,$=G.renderer,F=this.stacks,H=g(G,((re=L.options.stackLabels)==null?void 0:re.animation)||!1),W=this.stackTotalGroup=this.stackTotalGroup||$.g("stack-labels").attr({zIndex:6,opacity:0}).add();W.translate(G.plotLeft,G.plotTop),A(F,he=>{A(he,ie=>{ie.render(W)})}),W.animate({opacity:1},H)}}return(m||(m={})).compose=function(R,L,G){let $=L.prototype,F=G.prototype;$.getStacks||(y(R,"init",N),y(R,"destroy",I),$.getStacks=w,F.getStackIndicator=q,F.modifyStacks=Y,F.percentStacker=X,F.setGroupedPoints=B,F.setStackedPoints=j)},m}),s(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{defined:r,merge:p,isObject:m}=h;class g extends a{drawGraph(){let y=this.options,C=(this.gappedPath||this.getGraphPath).call(this),b=this.chart.styledMode;[this,...this.zones].forEach((T,S)=>{let k,x=T.graph,A=x?"animate":"attr",D=T.dashStyle||y.dashStyle;x?(x.endX=this.preventGraphAnimation?null:C.xMap,x.animate({d:C})):C.length&&(T.graph=x=this.chart.renderer.path(C).addClass("highcharts-graph"+(S?` highcharts-zone-graph-${S-1} `:" ")+(S&&T.className||"")).attr({zIndex:1}).add(this.group)),x&&!b&&(k={stroke:!S&&y.lineColor||T.color||this.color||"#cccccc","stroke-width":y.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?k.dashstyle=D:y.linecap!=="square"&&(k["stroke-linecap"]=k["stroke-linejoin"]="round"),x[A](k).shadow(S<2&&y.shadow&&p({filterUnits:"userSpaceOnUse"},m(y.shadow)?y.shadow:{}))),x&&(x.startX=C.xMap,x.isArea=C.isArea)})}getGraphPath(y,C,b){let T=this,S=T.options,k=[],x=[],A,D=S.step,w=(y=y||T.points).reversed;return w&&y.reverse(),(D={right:1,center:2}[D]||D&&3)&&w&&(D=4-D),(y=this.getValidPoints(y,!1,!(S.connectNulls&&!C&&!b))).forEach(function(I,N){let q,Y=I.plotX,X=I.plotY,B=y[N-1],j=I.isNull||typeof X!="number";(I.leftCliff||B&&B.rightCliff)&&!b&&(A=!0),j&&!r(C)&&N>0?A=!S.connectNulls:j&&!C?A=!0:(N===0||A?q=[["M",I.plotX,I.plotY]]:T.getPointSpline?q=[T.getPointSpline(y,I,N)]:D?(q=D===1?[["L",B.plotX,X]]:D===2?[["L",(B.plotX+Y)/2,B.plotY],["L",(B.plotX+Y)/2,X]]:[["L",Y,B.plotY]]).push(["L",Y,X]):q=[["L",Y,X]],x.push(I.x),D&&(x.push(I.x),D===2&&x.push(I.x)),k.push.apply(k,q),A=!1)}),k.xMap=x,T.graphPath=k,k}}return g.defaultOptions=p(a.defaultOptions,{legendSymbol:"lineMarker"}),l.registerSeriesType("line",g),g}),s(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),s(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{seriesTypes:{line:r}}=l,{extend:p,merge:m,objectEach:g,pick:v}=h;class y extends r{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:b,options:T}=this;[this,...this.zones].forEach((S,k)=>{let x={},A=S.fillColor||T.fillColor,D=S.area,w=D?"animate":"attr";D?(D.endX=this.preventGraphAnimation?null:b.xMap,D.animate({d:b})):(x.zIndex=0,(D=S.area=this.chart.renderer.path(b).addClass("highcharts-area"+(k?` highcharts-zone-area-${k-1} `:" ")+(k&&S.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(x.fill=A||S.color||this.color,x["fill-opacity"]=A?1:T.fillOpacity??.75,D.css({pointerEvents:this.stickyTracking?"none":"auto"})),D[w](x),D.startX=b.xMap,D.shiftUnit=T.step?2:1})}getGraphPath(b){let T,S,k,x=r.prototype.getGraphPath,A=this.options,D=A.stacking,w=this.yAxis,I=[],N=[],q=this.index,Y=w.stacking.stacks[this.stackKey],X=A.threshold,B=Math.round(w.getThreshold(A.threshold)),j=v(A.connectNulls,D==="percent"),O=function(H,W,re){let he=b[H],ie=D&&Y[he.x].points[q],ae=he[re+"Null"]||0,Ce=he[re+"Cliff"]||0,ge,ke,K=!0;Ce||ae?(ge=(ae?ie[0]:ie[1])+Ce,ke=ie[0]+Ce,K=!!ae):!D&&b[W]&&b[W].isNull&&(ge=ke=X),ge!==void 0&&(N.push({plotX:T,plotY:ge===null?B:w.getThreshold(ge),isNull:K,isCliff:!0}),I.push({plotX:T,plotY:ke===null?B:w.getThreshold(ke),doCurve:!1}))};b=b||this.points,D&&(b=this.getStackPoints(b));for(let H=0,W=b.length;H<W;++H)D||(b[H].leftCliff=b[H].rightCliff=b[H].leftNull=b[H].rightNull=void 0),S=b[H].isNull,T=v(b[H].rectPlotX,b[H].plotX),k=D?v(b[H].yBottom,B):B,S&&!j||(j||O(H,H-1,"left"),S&&!D&&j||(N.push(b[H]),I.push({x:H,plotX:T,plotY:k})),j||O(H,H+1,"right"));let R=x.call(this,N,!0,!0);I.reversed=!0;let L=x.call(this,I,!0,!0),G=L[0];G&&G[0]==="M"&&(L[0]=["L",G[1],G[2]]);let $=R.concat(L);$.length&&$.push(["Z"]);let F=x.call(this,N,!1,j);return this.chart.series.length>1&&D&&N.some(H=>H.isCliff)&&($.hasStackedCliffs=F.hasStackedCliffs=!0),$.xMap=R.xMap,this.areaPath=$,F}getStackPoints(b){let T=this,S=[],k=[],x=this.xAxis,A=this.yAxis,D=A.stacking.stacks[this.stackKey],w={},I=A.series,N=I.length,q=A.options.reversedStacks?1:-1,Y=I.indexOf(T);if(b=b||this.points,this.options.stacking){for(let B=0;B<b.length;B++)b[B].leftNull=b[B].rightNull=void 0,w[b[B].x]=b[B];g(D,function(B,j){B.total!==null&&k.push(j)}),k.sort(function(B,j){return B-j});let X=I.map(B=>B.visible);k.forEach(function(B,j){let O=0,R,L;if(w[B]&&!w[B].isNull)S.push(w[B]),[-1,1].forEach(function(G){let $=G===1?"rightNull":"leftNull",F=D[k[j+G]],H=0;if(F){let W=Y;for(;W>=0&&W<N;){let re=I[W].index;!(R=F.points[re])&&(re===T.index?w[B][$]=!0:X[W]&&(L=D[B].points[re])&&(H-=L[1]-L[0])),W+=q}}w[B][G===1?"rightCliff":"leftCliff"]=H});else{let G=Y;for(;G>=0&&G<N;){let $=I[G].index;if(R=D[B].points[$]){O=R[1];break}G+=q}O=v(O,0),O=A.translate(O,0,1,0,1),S.push({isNull:!0,plotX:x.translate(B,0,0,0,1),x:B,plotY:O,yBottom:O})}})}return S}}return y.defaultOptions=m(r.defaultOptions,a),p(y.prototype,{singleStacks:!1}),l.registerSeriesType("area",y),y}),s(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l){let{line:h}=a.seriesTypes,{merge:r,pick:p}=l;class m extends h{getPointSpline(v,y,C){let b,T,S,k,x=y.plotX||0,A=y.plotY||0,D=v[C-1],w=v[C+1];function I(q){return q&&!q.isNull&&q.doCurve!==!1&&!y.isCliff}if(I(D)&&I(w)){let q=D.plotX||0,Y=D.plotY||0,X=w.plotX||0,B=w.plotY||0,j=0;b=(1.5*x+q)/2.5,T=(1.5*A+Y)/2.5,S=(1.5*x+X)/2.5,k=(1.5*A+B)/2.5,S!==b&&(j=(k-T)*(S-x)/(S-b)+A-k),T+=j,k+=j,T>Y&&T>A?(T=Math.max(Y,A),k=2*A-T):T<Y&&T<A&&(T=Math.min(Y,A),k=2*A-T),k>B&&k>A?(k=Math.max(B,A),T=2*A-k):k<B&&k<A&&(k=Math.min(B,A),T=2*A-k),y.rightContX=S,y.rightContY=k,y.controlPoints={low:[b,T],high:[S,k]}}let N=["C",p(D.rightContX,D.plotX,0),p(D.rightContY,D.plotY,0),p(b,x,0),p(T,A,0),x,A];return D.rightContX=D.rightContY=void 0,N}}return m.defaultOptions=r(h.defaultOptions),a.registerSeriesType("spline",m),m}),s(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{area:r,area:{prototype:p}}=l.seriesTypes,{extend:m,merge:g}=h;class v extends a{}return v.defaultOptions=g(a.defaultOptions,r.defaultOptions),m(v.prototype,{getGraphPath:p.getGraphPath,getStackPoints:p.getStackPoints,drawGraph:p.drawGraph}),l.registerSeriesType("areaspline",v),v}),s(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),s(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g){let{animObject:v}=a,{parse:y}=l,{noop:C}=r,{clamp:b,crisp:T,defined:S,extend:k,fireEvent:x,isArray:A,isNumber:D,merge:w,pick:I,objectEach:N}=g;class q extends p{animate(X){let B,j,O=this,R=this.yAxis,L=R.pos,G=R.reversed,$=O.options,{clipOffset:F,inverted:H}=this.chart,W={},re=H?"translateX":"translateY";X&&F?(W.scaleY=.001,j=b(R.toPixels($.threshold),L,L+R.len),H?(j+=G?-Math.floor(F[0]):Math.ceil(F[2]),W.translateX=j-R.len):(j+=G?Math.ceil(F[0]):-Math.floor(F[2]),W.translateY=j),O.clipBox&&O.setClip(),O.group.attr(W)):(B=Number(O.group.attr(re)),O.group.animate({scaleY:1},k(v(O.options.animation),{step:function(he,ie){O.group&&(W[re]=B+ie.pos*(L-B),O.group.attr(W))}})))}init(X,B){super.init.apply(this,arguments);let j=this;(X=j.chart).hasRendered&&X.series.forEach(function(O){O.type===j.type&&(O.isDirty=!0)})}getColumnMetrics(){var ae,Ce;let X=this,B=X.options,j=X.xAxis,O=X.yAxis,R=j.options.reversedStacks,L=j.reversed&&!R||!j.reversed&&R,G={},$,F=0;B.grouping===!1?F=1:X.chart.series.forEach(function(ge){let ke,K=ge.yAxis,Q=ge.options;ge.type===X.type&&ge.reserveSpace()&&O.len===K.len&&O.pos===K.pos&&(Q.stacking&&Q.stacking!=="group"?(G[$=ge.stackKey]===void 0&&(G[$]=F++),ke=G[$]):Q.grouping!==!1&&(ke=F++),ge.columnIndex=ke)});let H=Math.min(Math.abs(j.transA)*(!((ae=j.brokenAxis)!=null&&ae.hasBreaks)&&((Ce=j.ordinal)==null?void 0:Ce.slope)||B.pointRange||j.closestPointRange||j.tickInterval||1),j.len),W=H*B.groupPadding,re=(H-2*W)/(F||1),he=Math.min(B.maxPointWidth||j.len,I(B.pointWidth,re*(1-2*B.pointPadding))),ie=(X.columnIndex||0)+(L?1:0);return X.columnMetrics={width:he,offset:(re-he)/2+(W+ie*re-H/2)*(L?-1:1),paddedWidth:re,columnCount:F},X.columnMetrics}crispCol(X,B,j,O){let R=this.borderWidth,L=this.chart.inverted;return O=T(B+O,R,L)-(B=T(B,R,L)),this.options.crisp&&(j=T(X+j,R)-(X=T(X,R))),{x:X,y:B,width:j,height:O}}adjustForMissingColumns(X,B,j,O){var R;if(!j.isNull&&O.columnCount>1){let L=this.xAxis.series.filter(H=>H.visible).map(H=>H.index),G=0,$=0;N((R=this.xAxis.stacking)==null?void 0:R.stacks,H=>{if(typeof j.x=="number"){let W=H[j.x.toString()];if(W&&A(W.points[this.index])){let re=Object.keys(W.points).filter(he=>!he.match(",")&&W.points[he]&&W.points[he].length>1).map(parseFloat).filter(he=>L.indexOf(he)!==-1).sort((he,ie)=>ie-he);G=re.indexOf(this.index),$=re.length}}}),G=this.xAxis.reversed?$-1-G:G;let F=($-1)*O.paddedWidth+B;X=(j.plotX||0)+F/2-B-G*O.paddedWidth}return X}translate(){let X=this,B=X.chart,j=X.options,O=X.dense=X.closestPointRange*X.xAxis.transA<2,R=X.borderWidth=I(j.borderWidth,O?0:1),L=X.xAxis,G=X.yAxis,$=j.threshold,F=I(j.minPointLength,5),H=X.getColumnMetrics(),W=H.width,re=X.pointXOffset=H.offset,he=X.dataMin,ie=X.dataMax,ae=X.translatedThreshold=G.getThreshold($),Ce=X.barW=Math.max(W,1+2*R);j.pointPadding&&(Ce=Math.ceil(Ce)),p.prototype.translate.apply(X),X.points.forEach(function(ge){let ke=I(ge.yBottom,ae),K=999+Math.abs(ke),Q=ge.plotX||0,le=b(ge.plotY,-K,G.len+K),_e,J=Math.min(le,ke),ne=Math.max(le,ke)-J,ue=W,ye=Q+re,we=Ce;F&&Math.abs(ne)<F&&(ne=F,_e=!G.reversed&&!ge.negative||G.reversed&&ge.negative,D($)&&D(ie)&&ge.y===$&&ie<=$&&(G.min||0)<$&&(he!==ie||(G.max||0)<=$)&&(_e=!_e,ge.negative=!ge.negative),J=Math.abs(J-ae)>F?ke-F:ae-(_e?F:0)),S(ge.options.pointWidth)&&(ye-=Math.round(((ue=we=Math.ceil(ge.options.pointWidth))-W)/2)),j.centerInCategory&&!j.stacking&&(ye=X.adjustForMissingColumns(ye,ue,ge,H)),ge.barX=ye,ge.pointWidth=ue,ge.tooltipPos=B.inverted?[b(G.len+G.pos-B.plotLeft-le,G.pos-B.plotLeft,G.len+G.pos-B.plotLeft),L.len+L.pos-B.plotTop-ye-we/2,ne]:[L.left-B.plotLeft+ye+we/2,b(le+G.pos-B.plotTop,G.pos-B.plotTop,G.len+G.pos-B.plotTop),ne],ge.shapeType=X.pointClass.prototype.shapeType||"roundedRect",ge.shapeArgs=X.crispCol(ye,ge.isNull?ae:J,we,ge.isNull?0:ne)}),x(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(X,B){let j=this.options,O=this.pointAttrToOptions||{},R=O.stroke||"borderColor",L=O["stroke-width"]||"borderWidth",G,$,F,H=X&&X.color||this.color,W=X&&X[R]||j[R]||H,re=X&&X.options.dashStyle||j.dashStyle,he=X&&X[L]||j[L]||this[L]||0,ie=I(X&&X.opacity,j.opacity,1);X&&this.zones.length&&($=X.getZone(),H=X.options.color||$&&($.color||X.nonZonedColor)||this.color,$&&(W=$.borderColor||W,re=$.dashStyle||re,he=$.borderWidth||he)),B&&X&&(F=(G=w(j.states[B],X.options.states&&X.options.states[B]||{})).brightness,H=G.color||F!==void 0&&y(H).brighten(G.brightness).get()||H,W=G[R]||W,he=G[L]||he,re=G.dashStyle||re,ie=I(G.opacity,ie));let ae={fill:H,stroke:W,"stroke-width":he,opacity:ie};return re&&(ae.dashstyle=re),ae}drawPoints(X=this.points){let B,j=this,O=this.chart,R=j.options,L=O.renderer,G=R.animationLimit||250;X.forEach(function($){let F=$.plotY,H=$.graphic,W=!!H,re=H&&O.pointCount<G?"animate":"attr";D(F)&&$.y!==null?(B=$.shapeArgs,H&&$.hasNewShapeType()&&(H=H.destroy()),j.enabledDataSorting&&($.startXPos=j.xAxis.reversed?-(B&&B.width||0):j.xAxis.width),!H&&($.graphic=H=L[$.shapeType](B).add($.group||j.group),H&&j.enabledDataSorting&&O.hasRendered&&O.pointCount<G&&(H.attr({x:$.startXPos}),W=!0,re="animate")),H&&W&&H[re](w(B)),O.styledMode||H[re](j.pointAttribs($,$.selected&&"select")).shadow($.allowShadow!==!1&&R.shadow),H&&(H.addClass($.getClassName(),!0),H.attr({visibility:$.visible?"inherit":"hidden"}))):H&&($.graphic=H.destroy())})}drawTracker(X=this.points){let B,j=this,O=j.chart,R=O.pointer,L=function(G){let $=R==null?void 0:R.getPointFromEvent(G);R&&$&&j.options.enableMouseTracking&&(R.isDirectTouch=!0,$.onMouseOver(G))};X.forEach(function(G){B=A(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),B.forEach(function($){($.div||$.element).point=G})}),j._hasTracking||(j.trackerGroups.forEach(function(G){j[G]&&(j[G].addClass("highcharts-tracker").on("mouseover",L).on("mouseout",function($){R==null||R.onTrackerMouseOut($)}).on("touchstart",L),!O.styledMode&&j.options.cursor&&j[G].css({cursor:j.options.cursor}))}),j._hasTracking=!0),x(this,"afterDrawTracker")}remove(){let X=this,B=X.chart;B.hasRendered&&B.series.forEach(function(j){j.type===X.type&&(j.isDirty=!0)}),p.prototype.remove.apply(X,arguments)}}return q.defaultOptions=w(p.defaultOptions,h),k(q.prototype,{directTouch:!0,getSymbol:C,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("column",q),q}),s(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,l,h){var r;let{getDeferredAnimation:p}=a,{format:m}=l,{defined:g,extend:v,fireEvent:y,isArray:C,isString:b,merge:T,objectEach:S,pick:k,pInt:x,splat:A}=h;return function(D){function w(){return j(this).some(R=>R==null?void 0:R.enabled)}function I(R,L,G,$,F){var le;let{chart:H,enabledDataSorting:W}=this,re=this.isCartesian&&H.inverted,he=R.plotX,ie=R.plotY,ae=G.rotation||0,Ce=g(he)&&g(ie)&&H.isInsidePlot(he,Math.round(ie),{inverted:re,paneCoordinates:!0,series:this}),ge=ae===0&&k(G.overflow,W?"none":"justify")==="justify",ke=this.visible&&R.visible!==!1&&g(he)&&(R.series.forceDL||W&&!ge||Ce||k(G.inside,!!this.options.stacking)&&$&&H.isInsidePlot(he,re?$.x+1:$.y+$.height-1,{inverted:re,paneCoordinates:!0,series:this})),K=R.pos();if(ke&&K){var Q;let _e=L.getBBox(),J=L.getBBox(void 0,0),ne={right:1,center:.5}[G.align||0]||0,ue={bottom:1,middle:.5}[G.verticalAlign||0]||0;if($=v({x:K[0],y:Math.round(K[1]),width:0,height:0},$||{}),G.alignTo==="plotEdges"&&this.isCartesian&&($[re?"x":"y"]=0,$[re?"width":"height"]=((le=this.yAxis)==null?void 0:le.len)||0),v(G,{width:_e.width,height:_e.height}),Q=$,W&&this.xAxis&&!ge&&this.setDataLabelStartPos(R,L,F,Ce,Q),L.align(T(G,{width:J.width,height:J.height}),!1,$,!1),L.alignAttr.x+=ne*(J.width-_e.width),L.alignAttr.y+=ue*(J.height-_e.height),L[L.placed?"animate":"attr"]({x:L.alignAttr.x+(_e.width-J.width)/2,y:L.alignAttr.y+(_e.height-J.height)/2,rotationOriginX:(L.width||0)/2,rotationOriginY:(L.height||0)/2}),ge&&$.height>=0)this.justifyDataLabel(L,G,L.alignAttr,_e,$,F);else if(k(G.crop,!0)){let{x:ye,y:we}=L.alignAttr;ke=H.isInsidePlot(ye,we,{paneCoordinates:!0,series:this})&&H.isInsidePlot(ye+_e.width-1,we+_e.height-1,{paneCoordinates:!0,series:this})}G.shape&&!ae&&L[F?"attr":"animate"]({anchorX:K[0],anchorY:K[1]})}F&&W&&(L.placed=!1),ke||W&&!ge?(L.show(),L.placed=!0):(L.hide(),L.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function q(R){let L=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+L});return!L&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},R):G.attr({opacity:1})),G}function Y(R){var ke;let L;R=R||this.points;let G=this,$=G.chart,F=G.options,H=$.renderer,{backgroundColor:W,plotBackgroundColor:re}=$.options.chart,he=H.getContrast(b(re)&&re||b(W)&&W||"#000000"),ie=j(G),{animation:ae,defer:Ce}=ie[0],ge=Ce?p($,ae,G):{defer:0,duration:0};y(this,"drawDataLabels"),(ke=G.hasDataLabels)!=null&&ke.call(G)&&(L=this.initDataLabels(ge),R.forEach(K=>{var _e,J;let Q=K.dataLabels||[];A(B(ie,K.dlOptions||((_e=K.options)==null?void 0:_e.dataLabels))).forEach((ne,ue)=>{let ye=ne.enabled&&(K.visible||K.dataLabelOnHidden)&&(!K.isNull||K.dataLabelOnNull)&&function(je,Xe){let tt=Xe.filter;if(tt){let rt=tt.operator,dt=je[tt.property],gt=tt.value;return rt===">"&&dt>gt||rt==="<"&&dt<gt||rt===">="&&dt>=gt||rt==="<="&&dt<=gt||rt==="=="&&dt==gt||rt==="==="&&dt===gt||rt==="!="&&dt!=gt||rt==="!=="&&dt!==gt}return!0}(K,ne),{backgroundColor:we,borderColor:ze,distance:Ee,style:Ie={}}=ne,Fe,He,Ae,xe,me={},Me=Q[ue],De=!Me,Pe;ye&&(He=k(ne[K.formatPrefix+"Format"],ne.format),Fe=K.getLabelConfig(),Ae=g(He)?m(He,Fe,$):(ne[K.formatPrefix+"Formatter"]||ne.formatter).call(Fe,ne),xe=ne.rotation,!$.styledMode&&(Ie.color=k(ne.color,Ie.color,b(G.color)?G.color:void 0,"#000000"),Ie.color==="contrast"?(we!=="none"&&(Pe=we),K.contrastColor=H.getContrast(Pe!=="auto"&&Pe||K.color||G.color),Ie.color=Pe||!g(Ee)&&ne.inside||0>x(Ee||0)||F.stacking?K.contrastColor:he):delete K.contrastColor,F.cursor&&(Ie.cursor=F.cursor)),me={r:ne.borderRadius||0,rotation:xe,padding:ne.padding,zIndex:1},$.styledMode||(me.fill=we==="auto"?K.color:we,me.stroke=ze==="auto"?K.color:ze,me["stroke-width"]=ne.borderWidth),S(me,(je,Xe)=>{je===void 0&&delete me[Xe]})),!Me||ye&&g(Ae)&&!!Me.div==!!ne.useHTML&&(Me.rotation&&ne.rotation||Me.rotation===ne.rotation)||(Me=void 0,De=!0),ye&&g(Ae)&&(Me?me.text=Ae:(Me=H.label(Ae,0,0,ne.shape,void 0,void 0,ne.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+K.colorIndex+" "+(ne.className||"")+(ne.useHTML?" highcharts-tracker":"")),Me&&(Me.options=ne,Me.attr(me),$.styledMode?Ie.width&&Me.css({width:Ie.width,textOverflow:Ie.textOverflow}):Me.css(Ie).shadow(ne.shadow),y(Me,"beforeAddingDataLabel",{labelOptions:ne,point:K}),Me.added||Me.add(L),G.alignDataLabel(K,Me,ne,void 0,De),Me.isActive=!0,Q[ue]&&Q[ue]!==Me&&Q[ue].destroy(),Q[ue]=Me))});let le=Q.length;for(;le--;)Q[le]&&Q[le].isActive?Q[le].isActive=!1:((J=Q[le])==null||J.destroy(),Q.splice(le,1));K.dataLabel=Q[0],K.dataLabels=Q})),y(this,"afterDrawDataLabels")}function X(R,L,G,$,F,H){let W=this.chart,re=L.align,he=L.verticalAlign,ie=R.box?0:R.padding||0,ae=W.inverted?this.yAxis:this.xAxis,Ce=ae?ae.left-W.plotLeft:0,ge=W.inverted?this.xAxis:this.yAxis,ke=ge?ge.top-W.plotTop:0,{x:K=0,y:Q=0}=L,le,_e;return(le=(G.x||0)+ie+Ce)<0&&(re==="right"&&K>=0?(L.align="left",L.inside=!0):K-=le,_e=!0),(le=(G.x||0)+$.width-ie+Ce)>W.plotWidth&&(re==="left"&&K<=0?(L.align="right",L.inside=!0):K+=W.plotWidth-le,_e=!0),(le=G.y+ie+ke)<0&&(he==="bottom"&&Q>=0?(L.verticalAlign="top",L.inside=!0):Q-=le,_e=!0),(le=(G.y||0)+$.height-ie+ke)>W.plotHeight&&(he==="top"&&Q<=0?(L.verticalAlign="bottom",L.inside=!0):Q+=W.plotHeight-le,_e=!0),_e&&(L.x=K,L.y=Q,R.placed=!H,R.align(L,void 0,F)),_e}function B(R,L){let G=[],$;if(C(R)&&!C(L))G=R.map(function(F){return T(F,L)});else if(C(L)&&!C(R))G=L.map(function(F){return T(R,F)});else if(C(R)||C(L)){if(C(R)&&C(L))for($=Math.max(R.length,L.length);$--;)G[$]=T(R[$],L[$])}else G=T(R,L);return G}function j(R){var G,$;let L=R.chart.options.plotOptions;return A(B(B((G=L==null?void 0:L.series)==null?void 0:G.dataLabels,($=L==null?void 0:L[R.type])==null?void 0:$.dataLabels),R.options.dataLabels))}function O(R,L,G,$,F){let H=this.chart,W=H.inverted,re=this.xAxis,he=re.reversed,ie=((W?L.height:L.width)||0)/2,ae=R.pointWidth,Ce=ae?ae/2:0;L.startXPos=W?F.x:he?-ie-Ce:re.width-ie+Ce,L.startYPos=W?he?this.yAxis.height-ie+Ce:-ie-Ce:F.y,$?L.visibility==="hidden"&&(L.show(),L.attr({opacity:0}).animate({opacity:1})):L.attr({opacity:1}).animate({opacity:0},void 0,L.hide),H.hasRendered&&(G&&L.attr({x:L.startXPos,y:L.startYPos}),L.placed=!0)}D.compose=function(R){let L=R.prototype;L.initDataLabels||(L.initDataLabels=q,L.initDataLabelsGroup=N,L.alignDataLabel=I,L.drawDataLabels=Y,L.justifyDataLabel=X,L.setDataLabelStartPos=O,L.hasDataLabels=w)}}(r||(r={})),r}),s(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){var p;let{composed:m}=l,{series:g}=h,{merge:v,pick:y,pushUnique:C}=r;return function(b){function T(S,k,x,A,D){let w=this.chart.inverted,I=S.series,N=(I.xAxis?I.xAxis.len:this.chart.plotSizeX)||0,q=(I.yAxis?I.yAxis.len:this.chart.plotSizeY)||0,Y=S.dlBox||S.shapeArgs,X=y(S.below,S.plotY>y(this.translatedThreshold,q)),B=y(x.inside,!!this.options.stacking);if(Y){if(A=v(Y),!(x.overflow==="allow"&&x.crop===!1)){A.y<0&&(A.height+=A.y,A.y=0);let j=A.y+A.height-q;j>0&&j<A.height-1&&(A.height-=j)}w&&(A={x:q-A.y-A.height,y:N-A.x-A.width,width:A.height,height:A.width}),B||(w?(A.x+=X?0:A.width,A.width=0):(A.y+=X?A.height:0,A.height=0))}x.align=y(x.align,!w||B?"center":X?"right":"left"),x.verticalAlign=y(x.verticalAlign,w||B?"middle":X?"top":"bottom"),g.prototype.alignDataLabel.call(this,S,k,x,A,D),x.inside&&S.contrastColor&&k.css({color:S.contrastColor})}b.compose=function(S){a.compose(g),C(m,"ColumnDataLabel")&&(S.prototype.alignDataLabel=T)}}(p||(p={})),p}),s(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{extend:r,merge:p}=h;class m extends a{}return m.defaultOptions=p(a.defaultOptions,{}),r(m.prototype,{inverted:!0}),l.registerSeriesType("bar",m),m}),s(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),s(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{column:r,line:p}=l.seriesTypes,{addEvent:m,extend:g,merge:v}=h;class y extends p{applyJitter(){let b=this,T=this.options.jitter,S=this.points.length;T&&this.points.forEach(function(k,x){["x","y"].forEach(function(A,D){if(T[A]&&!k.isNull){let w=`plot${A.toUpperCase()}`,I=b[`${A}Axis`],N=T[A]*I.transA;if(I&&!I.logarithmic){let q=Math.max(0,(k[w]||0)-N),Y=Math.min(I.len,(k[w]||0)+N);k[w]=q+(Y-q)*function(X){let B=1e4*Math.sin(X);return B-Math.floor(B)}(x+D*S),A==="x"&&(k.clientX=k.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return y.defaultOptions=v(p.defaultOptions,a),g(y.prototype,{drawTracker:r.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),m(y,"afterTranslate",function(){this.applyJitter()}),l.registerSeriesType("scatter",y),y}),s(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(a,l,h){var r,p;let{deg2rad:m}=a,{fireEvent:g,isNumber:v,pick:y,relativeLength:C}=h;return(p=r||(r={})).getCenter=function(){let b=this.options,T=this.chart,S=2*(b.slicedOffset||0),k=T.plotWidth-2*S,x=T.plotHeight-2*S,A=b.center,D=Math.min(k,x),w=b.thickness,I,N=b.size,q=b.innerSize||0,Y,X;typeof N=="string"&&(N=parseFloat(N)),typeof q=="string"&&(q=parseFloat(q));let B=[y(A[0],"50%"),y(A[1],"50%"),y(N&&N<0?void 0:b.size,"100%"),y(q&&q<0?void 0:b.innerSize||0,"0%")];for(!T.angular||this instanceof l||(B[3]=0),Y=0;Y<4;++Y)X=B[Y],I=Y<2||Y===2&&/%$/.test(X),B[Y]=C(X,[k,x,D,B[2]][Y])+(I?S:0);return B[3]>B[2]&&(B[3]=B[2]),v(w)&&2*w<B[2]&&w>0&&(B[3]=B[2]-2*w),g(this,"afterGetCenter",{positions:B}),B},p.getStartAndEndRadians=function(b,T){let S=v(b)?b:0,k=v(T)&&T>S&&T-S<360?T:S+360;return{start:m*(S+-90),end:m*(k+-90)}},r}),s(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,l,h){let{setAnimation:r}=a,{addEvent:p,defined:m,extend:g,isNumber:v,pick:y,relativeLength:C}=h;class b extends l{getConnectorPath(S){let k=S.dataLabelPosition,x=S.options||{},A=x.connectorShape,D=this.connectorShapes[A]||A;return k&&D.call(this,{...k.computed,alignment:k.alignment},k.connectorPosition,x)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(S){let k=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(k.x,k.y,k.r+S,k.r+S,{innerR:k.r-1,start:k.start,end:k.end,borderRadius:k.borderRadius})}constructor(S,k,x){super(S,k,x),this.half=0,this.name??(this.name="Slice");let A=D=>{this.slice(D.type==="select")};p(this,"select",A),p(this,"unselect",A)}isValid(){return v(this.y)&&this.y>=0}setVisible(S,k=!0){S!==this.visible&&this.update({visible:S??!this.visible},k,void 0,!1)}slice(S,k,x){let A=this.series;r(x,A.chart),k=y(k,!0),this.sliced=this.options.sliced=S=m(S)?S:!this.sliced,A.options.data[A.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return g(b.prototype,{connectorShapes:{fixedOffset:function(T,S,k){let x=S.breakAt,A=S.touchingSliceAt,D=k.softConnector?["C",T.x+(T.alignment==="left"?-5:5),T.y,2*x.x-A.x,2*x.y-A.y,x.x,x.y]:["L",x.x,x.y];return[["M",T.x,T.y],D,["L",A.x,A.y]]},straight:function(T,S){let k=S.touchingSliceAt;return[["M",T.x,T.y],["L",k.x,k.y]]},crookedLine:function(T,S,k){let{breakAt:x,touchingSliceAt:A}=S,{series:D}=this,[w,I,N]=D.center,q=N/2,{plotLeft:Y,plotWidth:X}=D.chart,B=T.alignment==="left",{x:j,y:O}=T,R=x.x;if(k.crookDistance){let G=C(k.crookDistance,1);R=B?w+q+(X+Y-w-q)*(1-G):Y+(w-q)*G}else R=w+(I-O)*Math.tan((this.angle||0)-Math.PI/2);let L=[["M",j,O]];return(B?R<=j&&R>=x.x:R>=j&&R<=x.x)&&L.push(["L",R,O]),L.push(["L",x.x,x.y],["L",A.x,A.y]),L}}}),b}),s(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),s(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y){let{getStartAndEndRadians:C}=a,{noop:b}=h,{clamp:T,extend:S,fireEvent:k,merge:x,pick:A}=y;class D extends m{animate(I){let N=this,q=N.points,Y=N.startAngleRad;I||q.forEach(function(X){let B=X.graphic,j=X.shapeArgs;B&&j&&(B.attr({r:A(X.startR,N.center&&N.center[3]/2),start:Y,end:Y}),B.animate({r:j.r,start:j.start,end:j.end},N.options.animation))})}drawEmpty(){let I,N,q=this.startAngleRad,Y=this.endAngleRad,X=this.options;this.total===0&&this.center?(I=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(I,N,this.center[1]/2,0,q,Y).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:v.arc(I,N,this.center[2]/2,0,{start:q,end:Y,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":X.borderWidth,fill:X.fillColor||"none",stroke:X.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let I=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=I[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(I,N,q,Y){let X=this.center,B=this.radii?this.radii[q.index]||0:X[2]/2,j=Y.dataLabelPosition,O=(j==null?void 0:j.distance)||0,R=Math.asin(T((I-X[1])/(B+O),-1,1));return X[0]+Math.cos(R)*(B+O)*(N?-1:1)+(O>0?(N?-1:1)*(Y.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let I,N,q,Y,X=this,B=X.chart;this.drawEmpty(),X.group&&!B.styledMode&&X.group.shadow(X.options.shadow),X.points.forEach(function(j){let O={};N=j.graphic,!j.isNull&&N?(Y=j.shapeArgs,I=j.getTranslate(),B.styledMode||(q=X.pointAttribs(j,j.selected&&"select")),j.delayedRendering?(N.setRadialReference(X.center).attr(Y).attr(I),B.styledMode||N.attr(q).attr({"stroke-linejoin":"round"}),j.delayedRendering=!1):(N.setRadialReference(X.center),B.styledMode||x(!0,O,q),x(!0,O,Y,I),N.animate(O)),N.attr({visibility:j.visible?"inherit":"hidden"}),N.addClass(j.getClassName(),!0)):N&&(j.graphic=N.destroy())})}sortByAngle(I,N){I.sort(function(q,Y){return q.angle!==void 0&&(Y.angle-q.angle)*N})}translate(I){k(this,"translate"),this.generatePoints();let N=this.options,q=N.slicedOffset,Y=C(N.startAngle,N.endAngle),X=this.startAngleRad=Y.start,B=(this.endAngleRad=Y.end)-X,j=this.points,O=N.ignoreHiddenPoint,R=j.length,L,G,$,F,H,W,re,he=0;for(I||(this.center=I=this.getCenter()),W=0;W<R;W++){re=j[W],L=X+he*B,re.isValid()&&(!O||re.visible)&&(he+=re.percentage/100),G=X+he*B;let ie={x:I[0],y:I[1],r:I[2]/2,innerR:I[3]/2,start:Math.round(1e3*L)/1e3,end:Math.round(1e3*G)/1e3};re.shapeType="arc",re.shapeArgs=ie,($=(G+L)/2)>1.5*Math.PI?$-=2*Math.PI:$<-Math.PI/2&&($+=2*Math.PI),re.slicedTranslation={translateX:Math.round(Math.cos($)*q),translateY:Math.round(Math.sin($)*q)},F=Math.cos($)*I[2]/2,H=Math.sin($)*I[2]/2,re.tooltipPos=[I[0]+.7*F,I[1]+.7*H],re.half=$<-Math.PI/2||$>Math.PI/2?1:0,re.angle=$}k(this,"afterTranslate")}updateTotals(){let I=this.points,N=I.length,q=this.options.ignoreHiddenPoint,Y,X,B=0;for(Y=0;Y<N;Y++)(X=I[Y]).isValid()&&(!q||X.visible)&&(B+=X.y);for(Y=0,this.total=B;Y<N;Y++)(X=I[Y]).percentage=B>0&&(X.visible||!q)?X.y/B*100:0,X.total=B}}return D.defaultOptions=x(m.defaultOptions,p),S(D.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:l.prototype.drawTracker,getCenter:a.getCenter,getSymbol:b,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:l.prototype.pointAttribs,pointClass:r,requireSorting:!1,searchPoint:b,trackerGroups:["group","dataLabelsGroup"]}),g.registerSeriesType("pie",D),D}),s(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){var m;let{composed:g,noop:v}=l,{distribute:y}=h,{series:C}=r,{arrayMax:b,clamp:T,defined:S,pick:k,pushUnique:x,relativeLength:A}=p;return function(D){let w={radialDistributionY:function(X,B){var j;return(((j=B.dataLabelPosition)==null?void 0:j.top)||0)+X.distributeBox.pos},radialDistributionX:function(X,B,j,O,R){let L=R.dataLabelPosition;return X.getX(j<((L==null?void 0:L.top)||0)+2||j>((L==null?void 0:L.bottom)||0)-2?O:j,B.half,B,R)},justify:function(X,B,j,O){var R;return O[0]+(X.half?-1:1)*(j+(((R=B.dataLabelPosition)==null?void 0:R.distance)||0))},alignToPlotEdges:function(X,B,j,O){let R=X.getBBox().width;return B?R+O:j-R-O},alignToConnectors:function(X,B,j,O){let R=0,L;return X.forEach(function(G){(L=G.dataLabel.getBBox().width)>R&&(R=L)}),B?R+O:j-R-O}};function I(X,B){let{center:j,options:O}=this,R=j[2]/2,L=X.angle||0,G=Math.cos(L),$=Math.sin(L),F=j[0]+G*R,H=j[1]+$*R,W=Math.min((O.slicedOffset||0)+(O.borderWidth||0),B/5);return{natural:{x:F+G*B,y:H+$*B},computed:{},alignment:B<0?"center":X.half?"right":"left",connectorPosition:{breakAt:{x:F+G*W,y:H+$*W},touchingSliceAt:{x:F,y:H}},distance:B}}function N(){var ke;let X=this,B=X.points,j=X.chart,O=j.plotWidth,R=j.plotHeight,L=j.plotLeft,G=Math.round(j.chartWidth/3),$=X.center,F=$[2]/2,H=$[1],W=[[],[]],re=[0,0,0,0],he=X.dataLabelPositioners,ie,ae,Ce,ge=0;X.visible&&((ke=X.hasDataLabels)!=null&&ke.call(X))&&(B.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{Q.shortened&&(Q.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),Q.shortened=!1)})}),C.prototype.drawDataLabels.apply(X),B.forEach(K=>{(K.dataLabels||[]).forEach((Q,le)=>{var ue;let _e=$[2]/2,J=Q.options,ne=A((J==null?void 0:J.distance)||0,_e);le===0&&W[K.half].push(K),!S((ue=J==null?void 0:J.style)==null?void 0:ue.width)&&Q.getBBox().width>G&&(Q.css({width:Math.round(.7*G)+"px"}),Q.shortened=!0),Q.dataLabelPosition=this.getDataLabelPosition(K,ne),ge=Math.max(ge,ne)})}),W.forEach((K,Q)=>{let le=K.length,_e=[],J,ne,ue=0,ye;le&&(X.sortByAngle(K,Q-.5),ge>0&&(J=Math.max(0,H-F-ge),ne=Math.min(H+F+ge,j.plotHeight),K.forEach(we=>{(we.dataLabels||[]).forEach(ze=>{var Ie;let Ee=ze.dataLabelPosition;Ee&&Ee.distance>0&&(Ee.top=Math.max(0,H-F-Ee.distance),Ee.bottom=Math.min(H+F+Ee.distance,j.plotHeight),ue=ze.getBBox().height||21,ze.lineHeight=j.renderer.fontMetrics(ze.text||ze).h+2*ze.padding,we.distributeBox={target:(((Ie=ze.dataLabelPosition)==null?void 0:Ie.natural.y)||0)-Ee.top+ze.lineHeight/2,size:ue,rank:we.y},_e.push(we.distributeBox))})}),y(_e,ye=ne+ue-J,ye/5)),K.forEach(we=>{(we.dataLabels||[]).forEach(ze=>{let Ee=ze.options||{},Ie=we.distributeBox,Fe=ze.dataLabelPosition,He=(Fe==null?void 0:Fe.natural.y)||0,Ae=Ee.connectorPadding||0,xe=ze.lineHeight||21,me=(xe-ze.getBBox().height)/2,Me=0,De=He,Pe="inherit";if(Fe){if(S(Ie)&&Fe.distance>0&&(Ie.pos===void 0?Pe="hidden":(Ce=Ie.size,De=he.radialDistributionY(we,ze))),Ee.justify)Me=he.justify(we,ze,F,$);else switch(Ee.alignTo){case"connectors":Me=he.alignToConnectors(K,Q,O,L);break;case"plotEdges":Me=he.alignToPlotEdges(ze,Q,O,L);break;default:Me=he.radialDistributionX(X,we,De-me,He,ze)}if(Fe.attribs={visibility:Pe,align:Fe.alignment},Fe.posAttribs={x:Me+(Ee.x||0)+({left:Ae,right:-Ae}[Fe.alignment]||0),y:De+(Ee.y||0)-xe/2},Fe.computed.x=Me,Fe.computed.y=De-me,k(Ee.crop,!0)){let je;Me-(ae=ze.getBBox().width)<Ae&&Q===1?(je=Math.round(ae-Me+Ae),re[3]=Math.max(je,re[3])):Me+ae>O-Ae&&Q===0&&(je=Math.round(Me+ae-O+Ae),re[1]=Math.max(je,re[1])),De-Ce/2<0?re[0]=Math.max(Math.round(-De+Ce/2),re[0]):De+Ce/2>R&&(re[2]=Math.max(Math.round(De+Ce/2-R),re[2])),Fe.sideOverflow=je}}})}))}),(b(re)===0||this.verifyDataLabelOverflow(re))&&(this.placeDataLabels(),this.points.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{var ne;let{connectorColor:le,connectorWidth:_e=1}=Q.options||{},J=Q.dataLabelPosition;if(_e){let ue;ie=Q.connector,J&&J.distance>0?(ue=!ie,ie||(Q.connector=ie=j.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+K.colorIndex+(K.className?" "+K.className:"")).add(X.dataLabelsGroup)),j.styledMode||ie.attr({"stroke-width":_e,stroke:le||K.color||"#666666"}),ie[ue?"attr":"animate"]({d:K.getConnectorPath(Q)}),ie.attr({visibility:(ne=J.attribs)==null?void 0:ne.visibility})):ie&&(Q.connector=ie.destroy())}})})))}function q(){this.points.forEach(X=>{(X.dataLabels||[]).forEach(B=>{var O;let j=B.dataLabelPosition;j?(j.sideOverflow&&(B.css({width:Math.max(B.getBBox().width-j.sideOverflow,0)+"px",textOverflow:(((O=B.options)==null?void 0:O.style)||{}).textOverflow||"ellipsis"}),B.shortened=!0),B.attr(j.attribs),B[B.moved?"animate":"attr"](j.posAttribs),B.moved=!0):B&&B.attr({y:-9999})}),delete X.distributeBox},this)}function Y(X){let B=this.center,j=this.options,O=j.center,R=j.minSize||80,L=R,G=j.size!==null;return!G&&(O[0]!==null?L=Math.max(B[2]-Math.max(X[1],X[3]),R):(L=Math.max(B[2]-X[1]-X[3],R),B[0]+=(X[3]-X[1])/2),O[1]!==null?L=T(L,R,B[2]-Math.max(X[0],X[2])):(L=T(L,R,B[2]-X[0]-X[2]),B[1]+=(X[0]-X[2])/2),L<B[2]?(B[2]=L,B[3]=Math.min(j.thickness?Math.max(0,L-2*j.thickness):Math.max(0,A(j.innerSize||0,L)),L),this.translate(B),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}D.compose=function(X){if(a.compose(C),x(g,"PieDataLabel")){let B=X.prototype;B.dataLabelPositioners=w,B.alignDataLabel=v,B.drawDataLabels=N,B.getDataLabelPosition=I,B.placeDataLabels=q,B.verifyDataLabelOverflow=Y}}}(m||(m={})),m}),s(t,"Core/Geometry/GeometryUtilities.js",[],function(){var a,l;return(l=a||(a={})).getCenterOfPoints=function(h){let r=h.reduce((p,m)=>(p.x+=m.x,p.y+=m.y,p),{x:0,y:0});return{x:r.x/h.length,y:r.y/h.length}},l.getDistanceBetweenPoints=function(h,r){return Math.sqrt(Math.pow(r.x-h.x,2)+Math.pow(r.y-h.y,2))},l.getAngleBetweenPoints=function(h,r){return Math.atan2(r.x-h.x,r.y-h.y)},l.pointInPolygon=function({x:h,y:r},p){let m=p.length,g,v,y=!1;for(g=0,v=m-1;g<m;v=g++){let[C,b]=p[g],[T,S]=p[v];b>r!=S>r&&h<(T-C)*(r-b)/(S-b)+C&&(y=!y)}return y},a}),s(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(a,l){let{pointInPolygon:h}=a,{addEvent:r,fireEvent:p,objectEach:m,pick:g}=l;function v(b){let T=b.length,S=(q,Y)=>!(Y.x>=q.x+q.width||Y.x+Y.width<=q.x||Y.y>=q.y+q.height||Y.y+Y.height<=q.y),k=(q,Y)=>{for(let X of q)if(h({x:X[0],y:X[1]},Y))return!0;return!1},x,A,D,w,I,N=!1;for(let q=0;q<T;q++)(x=b[q])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=function(Y){var X,B;if(Y&&(!Y.alignAttr||Y.placed)){let j=Y.box?0:Y.padding||0,O=Y.alignAttr||{x:Y.attr("x"),y:Y.attr("y")},R=Y.getBBox();return Y.width=R.width,Y.height=R.height,{x:O.x+(((X=Y.parentGroup)==null?void 0:X.translateX)||0)+j,y:O.y+(((B=Y.parentGroup)==null?void 0:B.translateY)||0)+j,width:(Y.width||0)-2*j,height:(Y.height||0)-2*j,polygon:R==null?void 0:R.polygon}}}(x));b.sort((q,Y)=>(Y.labelrank||0)-(q.labelrank||0));for(let q=0;q<T;++q){w=(A=b[q])&&A.absoluteBox;let Y=w==null?void 0:w.polygon;for(let X=q+1;X<T;++X){I=(D=b[X])&&D.absoluteBox;let B=!1;if(w&&I&&A!==D&&A.newOpacity!==0&&D.newOpacity!==0&&A.visibility!=="hidden"&&D.visibility!=="hidden"){let j=I.polygon;if(Y&&j&&Y!==j?k(Y,j)&&(B=!0):S(w,I)&&(B=!0),B){let O=A.labelrank<D.labelrank?A:D,R=O.text;O.newOpacity=0,R!=null&&R.element.querySelector("textPath")&&R.hide()}}}}for(let q of b)y(q,this)&&(N=!0);N&&p(this,"afterHideAllOverlappingLabels")}function y(b,T){let S,k,x=!1;return b&&(k=b.newOpacity,b.oldOpacity!==k&&(b.hasClass("highcharts-data-label")?(b[k?"removeClass":"addClass"]("highcharts-data-label-hidden"),S=function(){T.styledMode||b.css({pointerEvents:k?"auto":"none"})},x=!0,b[b.isOld?"animate":"attr"]({opacity:k},void 0,S),p(T,"afterHideOverlappingLabel")):b.attr({opacity:k})),b.isOld=!0),x}function C(){var S;let b=this,T=[];for(let k of b.labelCollectors||[])T=T.concat(k());for(let k of b.yAxis||[])k.stacking&&k.options.stackLabels&&!k.options.stackLabels.allowOverlap&&m(k.stacking.stacks,x=>{m(x,A=>{A.label&&T.push(A.label)})});for(let k of b.series||[])if(k.visible&&((S=k.hasDataLabels)!=null&&S.call(k))){let x=A=>{for(let D of A)D.visible&&(D.dataLabels||[]).forEach(w=>{var N;let I=w.options||{};w.labelrank=g(I.labelrank,D.labelrank,(N=D.shapeArgs)==null?void 0:N.height),I.allowOverlap??Number(I.distance)>0?(w.oldOpacity=w.opacity,w.newOpacity=1,y(w,b)):T.push(w)})};x(k.nodes||[]),x(k.points)}this.hideOverlappingLabels(T)}return{compose:function(b){let T=b.prototype;T.hideOverlappingLabels||(T.hideOverlappingLabels=v,r(b,"render",C))}}}),s(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{defaultOptions:r}=a,{noop:p}=l,{addEvent:m,extend:g,isObject:v,merge:y,relativeLength:C}=h,b={radius:0,scope:"stack",where:void 0},T=p,S=p;function k(I,N,q,Y,X={}){let B=T(I,N,q,Y,X),{innerR:j=0,r:O=q,start:R=0,end:L=0}=X;if(X.open||!X.borderRadius)return B;let G=L-R,$=Math.sin(G/2),F=Math.max(Math.min(C(X.borderRadius||0,O-j),(O-j)/2,O*$/(1+$)),0),H=Math.min(F,G/Math.PI*2*j),W=B.length-1;for(;W--;)(function(re,he,ie){let ae,Ce,ge,ke=re[he],K=re[he+1];if(K[0]==="Z"&&(K=re[0]),(ke[0]==="M"||ke[0]==="L")&&K[0]==="A"?(ae=ke,Ce=K,ge=!0):ke[0]==="A"&&(K[0]==="M"||K[0]==="L")&&(ae=K,Ce=ke),ae&&Ce&&Ce.params){let Q=Ce[1],le=Ce[5],_e=Ce.params,{start:J,end:ne,cx:ue,cy:ye}=_e,we=le?Q-ie:Q+ie,ze=we?Math.asin(ie/we):0,Ee=le?ze:-ze,Ie=Math.cos(ze)*we;ge?(_e.start=J+Ee,ae[1]=ue+Ie*Math.cos(J),ae[2]=ye+Ie*Math.sin(J),re.splice(he+1,0,["A",ie,ie,0,0,1,ue+Q*Math.cos(_e.start),ye+Q*Math.sin(_e.start)])):(_e.end=ne-Ee,Ce[6]=ue+Q*Math.cos(_e.end),Ce[7]=ye+Q*Math.sin(_e.end),re.splice(he+1,0,["A",ie,ie,0,0,1,ue+Ie*Math.cos(ne),ye+Ie*Math.sin(ne)])),Ce[4]=Math.abs(_e.end-_e.start)<Math.PI?0:1}})(B,W,W>1?H:F);return B}function x(){var I,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:q,yAxis:Y}=this,X=q.stacking==="percent",B=(N=(I=r.plotOptions)==null?void 0:I[this.type])==null?void 0:N.borderRadius,j=A(q.borderRadius,v(B)?B:{}),O=Y.options.reversed;for(let R of this.points){let{shapeArgs:L}=R;if(R.shapeType==="roundedRect"&&L){let{width:G=0,height:$=0,y:F=0}=L,H=F,W=$;if(j.scope==="stack"&&R.stackTotal){let ae=Y.translate(X?100:R.stackTotal,!1,!0,!1,!0),Ce=Y.translate(q.threshold||0,!1,!0,!1,!0),ge=this.crispCol(0,Math.min(ae,Ce),0,Math.abs(ae-Ce));H=ge.y,W=ge.height}let re=(R.negative?-1:1)*(O?-1:1)==-1,he=j.where;!he&&this.is("waterfall")&&Math.abs((R.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(he="all"),he||(he="end");let ie=Math.min(C(j.radius,G),G/2,he==="all"?$/2:1/0)||0;he==="end"&&(re&&(H-=ie),W+=ie),g(L,{brBoxHeight:W,brBoxY:H,r:ie})}}}}function A(I,N){return v(I)||(I={radius:I||0}),y(b,N,I)}function D(){let I=A(this.options.borderRadius);for(let N of this.points){let q=N.shapeArgs;q&&(q.borderRadius=C(I.radius,(q.r||0)-(q.innerR||0)))}}function w(I,N,q,Y,X={}){let B=S(I,N,q,Y,X),{r:j=0,brBoxHeight:O=Y,brBoxY:R=N}=X,L=N-R,G=R+O-(N+Y),$=L-j>-.1?0:j,F=G-j>-.1?0:j,H=Math.max($&&L,0),W=Math.max(F&&G,0),re=[I+$,N],he=[I+q-$,N],ie=[I+q,N+$],ae=[I+q,N+Y-F],Ce=[I+q-F,N+Y],ge=[I+F,N+Y],ke=[I,N+Y-F],K=[I,N+$],Q=(le,_e)=>Math.sqrt(Math.pow(le,2)-Math.pow(_e,2));if(H){let le=Q($,$-H);re[0]-=le,he[0]+=le,ie[1]=K[1]=N+$-H}if(Y<$-H){let le=Q($,$-H-Y);ie[0]=ae[0]=I+q-$+le,Ce[0]=Math.min(ie[0],Ce[0]),ge[0]=Math.max(ae[0],ge[0]),ke[0]=K[0]=I+$-le,ie[1]=K[1]=N+Y}if(W){let le=Q(F,F-W);Ce[0]+=le,ge[0]-=le,ae[1]=ke[1]=N+Y-F+W}if(Y<F-W){let le=Q(F,F-W-Y);ie[0]=ae[0]=I+q-F+le,he[0]=Math.min(ie[0],he[0]),re[0]=Math.max(ae[0],re[0]),ke[0]=K[0]=I+F-le,ae[1]=ke[1]=N}return B.length=0,B.push(["M",...re],["L",...he],["A",$,$,0,0,1,...ie],["L",...ae],["A",F,F,0,0,1,...Ce],["L",...ge],["A",F,F,0,0,1,...ke],["L",...K],["A",$,$,0,0,1,...re],["Z"]),B}return{compose:function(I,N,q){let Y=I.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let X=q.prototype.symbols;m(I,"afterColumnTranslate",x,{order:9}),m(Y,"afterTranslate",D),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),T=X.arc,S=X.roundedRect,X.arc=k,X.roundedRect=w}},optionsToObject:A}}),s(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(a){var l;let{diffObjects:h,extend:r,find:p,merge:m,pick:g,uniqueKey:v}=a;return function(y){function C(T,S){let k=T.condition;(k.callback||function(){return this.chartWidth<=g(k.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=g(k.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=g(k.minWidth,0)&&this.chartHeight>=g(k.minHeight,0)}).call(this)&&S.push(T._id)}function b(T,S){let k=this.options.responsive,x=this.currentResponsive,A=[],D;!S&&k&&k.rules&&k.rules.forEach(N=>{N._id===void 0&&(N._id=v()),this.matchResponsiveRule(N,A)},this);let w=m(...A.map(N=>p((k||{}).rules||[],q=>q._id===N)).map(N=>N&&N.chartOptions));w.isResponsiveOptions=!0,A=A.toString()||void 0;let I=x&&x.ruleIds;A===I||(x&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(x.undoOptions,T,!0),this.updatingResponsive=!1),A?((D=h(w,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:A,mergedOptions:w,undoOptions:D},this.updatingResponsive||this.update(w,T,!0)):this.currentResponsive=void 0)}y.compose=function(T){let S=T.prototype;return S.matchResponsiveRule||r(S,{matchResponsiveRule:C,setResponsive:b}),T}}(l||(l={})),l}),s(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(a,l,h,r,p,m,g,v,y,C,b,T,S,k,x,A,D,w,I,N,q,Y,X,B,j,O,R,L,G,$,F,H,W,re,he,ie){return a.AST=m,a.Axis=S,a.Chart=X,a.Color=he,a.DataLabel=F,a.Fx=r,a.HTMLElement=T,a.Legend=q,a.LegendSymbol=Y,a.OverlappingDataLabels=a.OverlappingDataLabels||H,a.PlotLineOrBand=A,a.Point=I,a.Pointer=N,a.RendererRegistry=v,a.Series=R,a.SeriesRegistry=L,a.StackItem=O,a.SVGElement=C,a.SVGRenderer=b,a.Templating=g,a.Tick=D,a.Time=ie,a.Tooltip=w,a.animate=p.animate,a.animObject=p.animObject,a.chart=X.chart,a.color=he.parse,a.dateFormat=g.dateFormat,a.defaultOptions=h.defaultOptions,a.distribute=y.distribute,a.format=g.format,a.getDeferredAnimation=p.getDeferredAnimation,a.getOptions=h.getOptions,a.numberFormat=g.numberFormat,a.seriesType=L.seriesType,a.setAnimation=p.setAnimation,a.setOptions=h.setOptions,a.stop=p.stop,a.time=h.defaultTime,a.timers=r.timers,W.compose(a.Series,a.SVGElement,a.SVGRenderer),G.compose(a.Series.types.column),F.compose(a.Series),k.compose(a.Axis),T.compose(a.SVGRenderer),q.compose(a.Chart),x.compose(a.Axis),H.compose(a.Chart),$.compose(a.Series.types.pie),A.compose(a.Chart,a.Axis),N.compose(a.Chart),re.compose(a.Chart),B.compose(a.Axis,a.Chart,a.Series),j.compose(a.Axis,a.Chart,a.Series),w.compose(a.Pointer),l.extend(a,l),a}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(gS);var FO=gS.exports;const Bh=ld(FO);var yS={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function s(a,l,h,r){a.hasOwnProperty(l)||(a[l]=r.apply(null,h),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:a[l]}})))}s(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{doc:h,win:r}=a,{css:p}=l,m=r.EventTarget&&new r.EventTarget||"none";function g(y){if(typeof r.MouseEvent=="function")return new r.MouseEvent(y.type,y);if(h.createEvent){let C=h.createEvent("MouseEvent");if(C.initMouseEvent)return C.initMouseEvent(y.type,y.bubbles,y.cancelable,y.view||r,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),C}return v(y.type)}function v(y,C,b){let T=C||{x:0,y:0};if(typeof r.MouseEvent=="function")return new r.MouseEvent(y,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:b||m,view:r,detail:y==="click"?1:0,screenX:T.x,screenY:T.y,clientX:T.x,clientY:T.y});if(h.createEvent){let S=h.createEvent("MouseEvent");if(S.initMouseEvent)return S.initMouseEvent(y,!0,!0,r,y==="click"?1:0,T.x,T.y,T.x,T.y,!1,!1,!1,!1,0,null),S}return{type:y}}return{addClass:function(y,C){y.classList?y.classList.add(C):0>y.className.indexOf(C)&&(y.className+=" "+C)},cloneMouseEvent:g,cloneTouchEvent:function(y){let C=T=>{let S=[];for(let k=0;k<T.length;++k){let x=T.item(k);x&&S.push(x)}return S};if(typeof r.TouchEvent=="function"){let T=new r.TouchEvent(y.type,{touches:C(y.touches),targetTouches:C(y.targetTouches),changedTouches:C(y.changedTouches),ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,altKey:y.altKey,metaKey:y.metaKey,bubbles:y.bubbles,cancelable:y.cancelable,composed:y.composed,detail:y.detail,view:y.view});return y.defaultPrevented&&T.preventDefault(),T}let b=g(y);return b.touches=y.touches,b.changedTouches=y.changedTouches,b.targetTouches=y.targetTouches,b},escapeStringForHTML:function(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(y){return h.getElementById(y)},getFakeMouseEvent:v,getHeadingTagNameForElement:function(y){let C=k=>"h"+Math.min(6,parseInt(k.slice(1),10)+1),b=k=>/^H[1-6]$/i.test(k),T=k=>{let x=k;for(;x=x.previousSibling;){let A=x.tagName||"";if(b(A))return A}return""},S=k=>{let x=T(k);if(x)return C(x);let A=k.parentElement;if(!A)return"p";let D=A.tagName;return b(D)?C(D):S(A)};return S(y)},removeChildNodes:function(y){for(;y.lastChild;)y.removeChild(y.lastChild)},removeClass:function(y,C){y.classList?y.classList.remove(C):y.className=y.className.replace(RegExp(C,"g"),"")},removeElement:function(y){y&&y.parentNode&&y.parentNode.removeChild(y)},reverseChildNodes:function(y){let C=y.childNodes.length;for(;C--;)y.appendChild(y.childNodes[C])},simulatedEventTarget:m,stripHTMLTagsFromString:function(y,C=!1){return typeof y=="string"?C?y.replace(/<\/?[^>]+(>|$)/g,""):y.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):y},visuallyHideElement:function(y){p(y,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),s(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,l){var h;let{format:r}=a,{getNestedProperty:p,pick:m}=l;return function(g){function v(C,b,T){let S=(w,I)=>{let N=w.slice(I||0),q=N.indexOf("{"),Y=N.indexOf("}");if(q>-1&&Y>q)return{statement:N.substring(q+1,Y),begin:I+q+1,end:I+Y}},k=[],x,A,D=0;do x=S(C,D),(A=C.substring(D,x&&x.begin-1)).length&&k.push({value:A,type:"constant"}),x&&k.push({value:x.statement,type:"statement"}),D=x?x.end+1:D+1;while(x);return k.forEach(w=>{w.type==="statement"&&(w.value=function(I,N){let q,Y,X=I.indexOf("#each("),B=I.indexOf("#plural("),j=I.indexOf("["),O=I.indexOf("]");if(X>-1){let L=I.slice(X).indexOf(")")+X,G=I.substring(0,X),$=I.substring(L+1),F=I.substring(X+6,L).split(","),H=Number(F[1]),W;if(Y="",q=p(F[0],N)){W=(H=isNaN(H)?q.length:H)<0?q.length+H:Math.min(H,q.length);for(let re=0;re<W;++re)Y+=G+q[re]+$}return Y.length?Y:""}if(B>-1){var R;let L=I.slice(B).indexOf(")")+B,G=I.substring(B+8,L).split(",");switch(Number(p(G[0],N))){case 0:Y=m(G[4],G[1]);break;case 1:Y=m(G[2],G[1]);break;case 2:Y=m(G[3],G[1]);break;default:Y=G[1]}return Y?(R=Y).trim&&R.trim()||R.replace(/^\s+|\s+$/g,""):""}if(j>-1){let L,G=I.substring(0,j),$=Number(I.substring(j+1,O));return q=p(G,N),!isNaN($)&&q&&($<0?(L=q[q.length+$])===void 0&&(L=q[0]):(L=q[$])===void 0&&(L=q[q.length-1])),L!==void 0?L:""}return"{"+I+"}"}(w.value,b))}),r(k.reduce((w,I)=>w+I.value,""),b,T)}function y(C,b){let T=C.split("."),S=this.options.lang,k=0;for(;k<T.length;++k)S=S&&S[T[k]];return typeof S=="string"?v(S,b,this):""}g.compose=function(C){let b=C.prototype;b.langFormat||(b.langFormat=y)},g.i18nFormat=v}(h||(h={})),h}),s(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,l,h){let{doc:r}=a,{stripHTMLTagsFromString:p}=l,{defined:m,find:g,fireEvent:v}=h;function y(b){if(b.points&&b.points.length){let T=g(b.points,S=>!!S.graphic);return T&&T.graphic&&T.graphic.element}}function C(b){let T=y(b);return T&&T.parentNode||b.graph&&b.graph.element||b.group&&b.group.element}return{fireEventOnWrappedOrUnwrappedElement:function b(T,S){let k=S.type,x=T.hcEvents;r.createEvent&&(T.dispatchEvent||T.fireEvent)?T.dispatchEvent?T.dispatchEvent(S):T.fireEvent(k,S):x&&x[k]?v(T,k,S):T.element&&b(T.element,S)},getChartTitle:function(b){return p(b.options.title.text||b.langFormat("accessibility.defaultChartTitle",{chart:b}),b.renderer.forExport)},getAxisDescription:function(b){var T,S;return b&&(((T=b.options.accessibility)==null?void 0:T.description)||((S=b.axisTitle)==null?void 0:S.textStr)||b.options.id||b.categories&&"categories"||b.dateTime&&"Time"||"values")},getAxisRangeDescription:function(b){let T=b.options||{};return T.accessibility&&T.accessibility.rangeDescription!==void 0?T.accessibility.rangeDescription:b.categories?function(S){let k=S.chart;return S.dataMax&&S.dataMin?k.langFormat("accessibility.axis.rangeCategories",{chart:k,axis:S,numCategories:S.dataMax-S.dataMin+1}):""}(b):b.dateTime&&(b.min===0||b.dataMin===0)?function(S){let k=S.chart,x={},A=S.dataMin||S.min||0,D=S.dataMax||S.max||0,w="Seconds";x.Seconds=(D-A)/1e3,x.Minutes=x.Seconds/60,x.Hours=x.Minutes/60,x.Days=x.Hours/24,["Minutes","Hours","Days"].forEach(function(N){x[N]>2&&(w=N)});let I=x[w].toFixed(w!=="Seconds"&&w!=="Minutes"?1:0);return k.langFormat("accessibility.axis.timeRange"+w,{chart:k,axis:S,range:I.replace(".0","")})}(b):function(S){let k=S.chart,x=k.options,A=x&&x.accessibility&&x.accessibility.screenReaderSection.axisRangeDateFormat||"",D={min:S.dataMin||S.min||0,max:S.dataMax||S.max||0},w=function(I){return S.dateTime?k.time.dateFormat(A,D[I]):D[I].toString()};return k.langFormat("accessibility.axis.rangeFromTo",{chart:k,axis:S,rangeFrom:w("min"),rangeTo:w("max")})}(b)},getPointFromXY:function(b,T,S){let k=b.length,x;for(;k--;)if(x=g(b[k].points||[],function(A){return A.x===T&&A.y===S}))return x},getSeriesFirstPointElement:y,getSeriesFromName:function(b,T){return T?(b.series||[]).filter(function(S){return S.name===T}):b.series},getSeriesA11yElement:C,unhideChartElementFromAT:function b(T,S){S.setAttribute("aria-hidden",!1),S!==T.renderTo&&S.parentNode&&S.parentNode!==r.body&&(Array.prototype.forEach.call(S.parentNode.childNodes,function(k){k.hasAttribute("aria-hidden")||k.setAttribute("aria-hidden",!0)}),b(T,S.parentNode))},hideSeriesFromAT:function(b){let T=C(b);T&&T.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(b){let T=b.series.xAxis,S=b.series.yAxis,k=T&&T.scrollbar?T:S,x=k&&k.scrollbar;if(x&&m(x.to)&&m(x.from)){let A=x.to-x.from,D=function(w,I){if(!m(w.dataMin)||!m(w.dataMax))return 0;let N=w.toPixels(w.dataMin),q=w.toPixels(w.dataMax),Y=w.coll==="xAxis"?"x":"y";return(w.toPixels(I[Y]||0)-N)/(q-N)}(k,b);x.updatePosition(D-A/2,D+A/2),v(x,"changed",{from:x.from,to:x.to,trigger:"scrollbar",DOMEvent:null})}}}}),s(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l){let{doc:h}=a,{removeElement:r}=l;return class{constructor(){this.elements=[]}createElement(){let p=h.createElement.apply(h,arguments);return this.elements.push(p),p}removeElement(p){r(p),this.elements.splice(this.elements.indexOf(p),1)}destroyCreatedElements(){this.elements.forEach(function(p){r(p)}),this.elements=[]}}}),s(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{addEvent:h}=l;return class{constructor(){this.eventRemovers=[]}addEvent(){let r=h.apply(a,arguments);return this.eventRemovers.push({element:arguments[0],remover:r}),r}removeEvent(r){let p=this.eventRemovers.map(m=>m.remover).indexOf(r);this.eventRemovers[p].remover(),this.eventRemovers.splice(p,1)}removeAddedEvents(){this.eventRemovers.map(r=>r.remover).forEach(r=>r()),this.eventRemovers=[]}}}),s(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r){let{fireEventOnWrappedOrUnwrappedElement:p}=a,{getFakeMouseEvent:m}=r;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(g,v){this.chart=g,this.eventProvider=new h,this.domElementProvider=new l,this.proxyProvider=v,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(g,v,y,C){return this.eventProvider.addEvent(g,v,y,C)}createElement(g,v){return this.domElementProvider.createElement(g,v)}fakeClickEvent(g){p(g,m("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),s(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(a){let{find:l}=a;return class{constructor(h,r){this.chart=h,this.keyCodeMap=r.keyCodeMap||[],this.validate=r.validate,this.init=r.init,this.terminate=r.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(h){let r=h.which||h.keyCode,p=this.response.noHandler,m=l(this.keyCodeMap,function(g){return g[0].indexOf(r)>-1});return m?p=m[1].call(this,r,h):r===9&&(p=this.response[h.shiftKey?"prev":"next"]),p}}}),s(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r,p){let{unhideChartElementFromAT:m,getChartTitle:g}=h,{doc:v}=r,{stripHTMLTagsFromString:y}=p;return class extends a{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let C=this.chart,b="highcharts-title-"+C.index,T=y(C.langFormat("accessibility.svgContainerTitle",{chartTitle:g(C)}));if(T.length){let S=this.svgTitleElement=this.svgTitleElement||v.createElementNS("http://www.w3.org/2000/svg","title");S.textContent=T,S.id=b,C.renderTo.insertBefore(S,C.renderTo.firstChild)}}setSVGContainerLabel(){let C=this.chart,b=C.langFormat("accessibility.svgContainerLabel",{chartTitle:g(C)});C.renderer.box&&b.length&&C.renderer.box.setAttribute("aria-label",b)}setGraphicContainerAttrs(){let C=this.chart,b=C.langFormat("accessibility.graphicContainerLabel",{chartTitle:g(C)});b.length&&C.container.setAttribute("aria-label",b)}setRenderToAttrs(){let C=this.chart,b=C.options.accessibility.landmarkVerbosity!=="disabled",T=C.langFormat("accessibility.chartContainerLabel",{title:g(C),chart:C});T&&(C.renderTo.setAttribute("role",b?"region":"group"),C.renderTo.setAttribute("aria-label",T))}makeCreditsAccessible(){let C=this.chart,b=C.credits;b&&(b.textStr&&b.element.setAttribute("aria-label",C.langFormat("accessibility.credits",{creditsStr:y(b.textStr,C.renderer.forExport)})),m(C,b.element))}getKeyboardNavigation(){let C=this.chart;return new l(C,{keyCodeMap:[],validate:function(){return!0},init:function(){let b=C.accessibility;b&&b.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),s(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(a){var l;let{addEvent:h,pick:r}=a;return function(p){let m=["x","y","transform","width","height","r","d","stroke-width"];function g(){let b=this.focusElement,T=this.options.accessibility.keyboardNavigation.focusBorder;b&&(b.removeFocusBorder(),T.enabled&&b.addFocusBorder(T.margin,{stroke:T.style.color,strokeWidth:T.style.lineWidth,r:T.style.borderRadius}))}function v(b,T){let S=this.options.accessibility.keyboardNavigation.focusBorder,k=T||b.element;k&&k.focus&&(k.hcEvents&&k.hcEvents.focusin||h(k,"focusin",function(){}),k.focus(),S.hideBrowserFocusOutline&&(k.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=b,this.renderFocusBorder()}function y(b,T){this.focusBorder&&this.removeFocusBorder();let S=this.getBBox(),k=r(b,3),x=this.parentGroup,A=this.scaleX||x&&x.scaleX,D=this.scaleY||x&&x.scaleY,w=(A?!D:D)?Math.abs(A||D||1):(Math.abs(A||1)+Math.abs(D||1))/2;S.x+=this.translateX?this.translateX:0,S.y+=this.translateY?this.translateY:0;let I=S.x-k,N=S.y-k,q=S.width+2*k,Y=S.height+2*k,X=!!this.text;if(this.element.nodeName==="text"||X){let B,j,O=!!this.rotation,R=X?{x:O?1:0,y:0}:(B=0,j=0,this.attr("text-anchor")==="middle"?B=j=.5:this.rotation?B=.25:j=.75,{x:B,y:j}),L=+this.attr("x"),G=+this.attr("y");if(isNaN(L)||(I=L-S.width*R.x-k),isNaN(G)||(N=G-S.height*R.y-k),X&&O){let $=q;q=Y,Y=$,isNaN(L)||(I=L-S.height*R.x-k),isNaN(G)||(N=G-S.width*R.y-k)}}this.focusBorder=this.renderer.rect(I,N,q,Y,parseInt((T&&T.r||0).toString(),10)/w).addClass("highcharts-focus-border").attr({zIndex:99}).add(x),this.renderer.styledMode||this.focusBorder.attr({stroke:T&&T.stroke,"stroke-width":(T&&T.strokeWidth||0)/w}),function(B,...j){B.focusBorderUpdateHooks||(B.focusBorderUpdateHooks={},m.forEach(O=>{let R=O+"Setter",L=B[R]||B._defaultSetter;B.focusBorderUpdateHooks[R]=L,B[R]=function(){let G=L.apply(B,arguments);return B.addFocusBorder.apply(B,j),G}}))}(this,b,T),function(B){if(B.focusBorderDestroyHook)return;let j=B.destroy;B.destroy=function(){return B.focusBorder&&B.focusBorder.destroy&&B.focusBorder.destroy(),j.apply(B,arguments)},B.focusBorderDestroyHook=j}(this)}function C(){var b;b=this,b.focusBorderUpdateHooks&&(Object.keys(b.focusBorderUpdateHooks).forEach(T=>{let S=b.focusBorderUpdateHooks[T];S===b._defaultSetter?delete b[T]:b[T]=S}),delete b.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}p.compose=function(b,T){let S=b.prototype,k=T.prototype;S.renderFocusBorder||(S.renderFocusBorder=g,S.setFocusToElement=v),k.addFocusBorder||(k.addFocusBorder=y,k.removeFocusBorder=C)}}(l||(l={})),l}),s(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{doc:m}=h,{addClass:g,visuallyHideElement:v}=r,{attr:y}=p;return class{constructor(C,b){this.chart=C,this.domElementProvider=new l,this.announceRegion=this.addAnnounceRegion(b)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(C){a.setElementHTML(this.announceRegion,C),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=a.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(C){let b=this.chart.announcerContainer||this.createAnnouncerContainer(),T=this.domElementProvider.createElement("div");return y(T,{"aria-hidden":!1,"aria-live":C,"aria-atomic":!0}),this.chart.styledMode?g(T,"highcharts-visually-hidden"):v(T),b.appendChild(T),T}createAnnouncerContainer(){let C=this.chart,b=m.createElement("div");return y(b,{"aria-hidden":!1,class:"highcharts-announcer-container"}),b.style.position="relative",C.renderTo.insertBefore(b,C.renderTo.firstChild),C.announcerContainer=b,b}}}),s(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(a){let{escapeStringForHTML:l,stripHTMLTagsFromString:h}=a;function r(v){return(v.annotations||[]).reduce((y,C)=>(C.options&&C.options.visible!==!1&&(y=y.concat(C.labels)),y),[])}function p(v){return v.options&&v.options.accessibility&&v.options.accessibility.description||v.graphic&&v.graphic.text&&v.graphic.text.textStr||""}function m(v){let y=v.options&&v.options.accessibility&&v.options.accessibility.description;if(y)return y;let C=v.chart,b=p(v),T=v.points,S=w=>w.graphic&&w.graphic.element&&w.graphic.element.getAttribute("aria-label")||"",k=T.filter(w=>!!w.graphic).map(w=>{let I=w.accessibility&&w.accessibility.valueDescription||S(w),N=w&&w.series.name||"";return(N?N+", ":"")+"data point "+I}).filter(w=>!!w),x=k.length,A=x>1?"MultiplePoints":x?"SinglePoint":"NoPoints",D={annotationText:b,annotation:v,numPoints:x,annotationPoint:k[0],additionalAnnotationPoints:k.slice(1)};return C.langFormat("accessibility.screenReaderSection.annotations.description"+A,D)}function g(v){return r(v).map(y=>{let C=l(h(m(y),v.renderer.forExport));return C?`<li>${C}</li>`:""})}return{getAnnotationsInfoHTML:function(v){let y=v.annotations;return y&&y.length?`<ul style="list-style-type: none">${g(v).join(" ")}</ul>`:""},getAnnotationLabelDescription:m,getAnnotationListItems:g,getPointAnnotationTexts:function(v){let y=r(v.series.chart).filter(C=>C.points.indexOf(v)>-1);return y.length?y.map(C=>`${p(C)}`):[]}}}),s(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y,C){let{getAnnotationsInfoHTML:b}=r,{getAxisDescription:T,getAxisRangeDescription:S,getChartTitle:k,unhideChartElementFromAT:x}=m,{format:A}=g,{doc:D}=v,{addClass:w,getElement:I,getHeadingTagNameForElement:N,stripHTMLTagsFromString:q,visuallyHideElement:Y}=y,{attr:X,pick:B,replaceNested:j}=C;function O(R){return j(R,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends l{constructor(){super(...arguments),this.screenReaderSections={}}init(){let R=this.chart,L=this;this.initRegionsDefinitions(),this.addEvent(R,"aftergetTableAST",function(G){L.onDataTableCreated(G)}),this.addEvent(R,"afterViewData",function(G){G.wasHidden&&(L.dataTableDiv=G.element,setTimeout(function(){L.focusDataTable()},300))}),this.addEvent(R,"afterHideData",function(){L.viewDataTableButton&&L.viewDataTableButton.setAttribute("aria-expanded","false")}),R.exporting&&this.addEvent(R,"afterPrint",function(){L.updateAllScreenReaderSections()}),this.announcer=new h(R,"assertive")}initRegionsDefinitions(){let R=this,L=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let $=L.screenReaderSection.beforeChartFormatter;return $?$(G):R.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,$){$.renderTo.insertBefore(G,$.renderTo.firstChild)},afterInserted:function(){R.sonifyButtonId!==void 0&&R.initSonifyButton(R.sonifyButtonId),R.dataTableButtonId!==void 0&&R.initDataTableButton(R.dataTableButtonId)}},after:{element:null,buildContent:function(G){let $=L.screenReaderSection.afterChartFormatter;return $?$(G):R.defaultAfterChartFormatter()},insertIntoDOM:function(G,$){$.renderTo.insertBefore(G,$.container.nextSibling)},afterInserted:function(){R.chart.accessibility&&L.keyboardNavigation.enabled&&R.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let R=this;Object.keys(this.screenReaderSections).forEach(function(L){R.updateScreenReaderSection(L)})}getLinkedDescriptionElement(){let R=this.chart.options.accessibility.linkedDescription;if(!R)return;if(typeof R!="string")return R;let L=A(R,this.chart),G=D.querySelectorAll(L);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let R=this.linkedDescriptionElement;R&&(R.setAttribute("aria-hidden","true"),w(R,"highcharts-linked-description"))}updateScreenReaderSection(R){let L=this.chart,G=this.screenReaderSections[R],$=G.buildContent(L),F=G.element=G.element||this.createElement("div"),H=F.firstChild||this.createElement("div");$?(this.setScreenReaderSectionAttribs(F,R),p.setElementHTML(H,$),F.appendChild(H),G.insertIntoDOM(F,L),L.styledMode?w(H,"highcharts-visually-hidden"):Y(H),x(L,H),G.afterInserted&&G.afterInserted()):(F.parentNode&&F.parentNode.removeChild(F),G.element=null)}setScreenReaderSectionAttribs(R,L){let G=this.chart,$=G.langFormat("accessibility.screenReaderSection."+L+"RegionLabel",{chart:G,chartTitle:k(G)});X(R,{id:`highcharts-screen-reader-region-${L}-${G.index}`,"aria-label":$||void 0}),R.style.position="relative",$&&R.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.beforeChartFormat;if(!L)return"";let G=this.getAxesDescription(),$=R.sonify&&R.options.sonification&&R.options.sonification.enabled,F="highcharts-a11y-sonify-data-btn-"+R.index,H="hc-linkto-highcharts-data-table-"+R.index,W=b(R),re=R.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:R}),he={headingTagName:N(R.renderTo),chartTitle:k(R),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:$?this.getSonifyButtonText(F):"",viewTableButton:R.getCSV?this.getDataTableButtonText(H):"",annotationsTitle:W?re:"",annotationsList:W},ie=a.i18nFormat(L,he,R);return this.dataTableButtonId=H,this.sonifyButtonId=F,O(ie)}defaultAfterChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.afterChartFormat;if(!L)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return O(a.i18nFormat(L,G,R))}getLinkedDescription(){let R=this.linkedDescriptionElement;return q(R&&R.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let R=this.chart.options,L=R.caption,G=L&&L.text,$=this.getLinkedDescription();return R.accessibility.description||$||G||""}getTypeDescriptionText(){let R=this.chart;return R.types?R.options.accessibility.typeDescription||function(L,G){let $=G[0],F=L.series&&L.series[0]||{},H=L.mapView&&L.mapView.geoMap&&L.mapView.geoMap.title,W={numSeries:L.series.length,numPoints:F.points&&F.points.length,chart:L,mapTitle:H};return $?$==="map"||$==="tiledwebmap"?W.mapTitle?L.langFormat("accessibility.chartTypes.mapTypeDescription",W):L.langFormat("accessibility.chartTypes.unknownMap",W):L.types.length>1?L.langFormat("accessibility.chartTypes.combinationChart",W):function(re,he,ie){let ae=he[0],Ce=re.langFormat("accessibility.seriesTypeDescriptions."+ae,ie),ge=re.series&&re.series.length<2?"Single":"Multiple";return(re.langFormat("accessibility.chartTypes."+ae+ge,ie)||re.langFormat("accessibility.chartTypes.default"+ge,ie))+(Ce?" "+Ce:"")}(L,G,W):L.langFormat("accessibility.chartTypes.emptyChart",W)}(R,R.types):""}getDataTableButtonText(R){let L=this.chart;return'<button id="'+R+'">'+L.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSonifyButtonText(R){let L=this.chart;return L.options.sonification&&L.options.sonification.enabled===!1?"":'<button id="'+R+'">'+L.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSubtitleText(){let R=this.chart.options.subtitle;return q(R&&R.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let R=I(`highcharts-end-of-chart-marker-${this.chart.index}`);if(R)return R.outerHTML;let L=this.chart,G=L.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:L});return'<div id="highcharts-end-of-chart-marker-'+L.index+'">'+G+"</div>"}onDataTableCreated(R){let L=this.chart;if(L.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=R.tree.attributes||{};G.tabindex=-1,G.summary=L.langFormat("accessibility.table.tableSummary",{chart:L}),R.tree.attributes=G}}focusDataTable(){let R=this.dataTableDiv,L=R&&R.getElementsByTagName("table")[0];L&&L.focus&&L.focus()}initSonifyButton(R){let L=this.sonifyButton=I(R),G=this.chart,$=F=>{L&&(L.setAttribute("aria-hidden","true"),L.setAttribute("aria-label","")),F.preventDefault(),F.stopPropagation();let H=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(H),setTimeout(()=>{L&&(L.removeAttribute("aria-hidden"),L.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};L&&G&&(L.setAttribute("tabindex",-1),L.onclick=function(F){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||$).call(this,F,G)})}initDataTableButton(R){let L=this.viewDataTableButton=I(R),G=this.chart,$=R.replace("hc-linkto-","");L&&(X(L,{tabindex:-1,"aria-expanded":!!I($)}),L.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let R=this.chart,L=function(re,he){let ie=R[re];return ie.length>1||ie[0]&&B(ie[0].options.accessibility&&ie[0].options.accessibility.enabled,he)},G=!!R.types&&0>R.types.indexOf("map")&&0>R.types.indexOf("treemap")&&0>R.types.indexOf("tilemap"),$=!!R.hasCartesianSeries,F=L("xAxis",!R.angular&&$&&G),H=L("yAxis",$&&G),W={};return F&&(W.xAxis=this.getAxisDescriptionText("xAxis")),H&&(W.yAxis=this.getAxisDescriptionText("yAxis")),W}getAxisDescriptionText(R){let L=this.chart,G=L[R];return L.langFormat("accessibility.axis."+R+"Description"+(G.length>1?"Plural":"Singular"),{chart:L,names:G.map(function($){return T($)}),ranges:G.map(function($){return S($)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),s(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r,p){let{attr:m}=a,{getChartTitle:g,unhideChartElementFromAT:v}=r,{getFakeMouseEvent:y}=p;function C(T){return T.exportSVGElements&&T.exportSVGElements[0]}class b extends l{init(){let S=this.chart,k=this;this.addEvent(S,"exportMenuShown",function(){k.onMenuShown()}),this.addEvent(S,"exportMenuHidden",function(){k.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let S=this.chart.exportContextMenu;S&&S.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let S=this.chart,k=S.exportContextMenu;k&&(this.addAccessibleContextMenuAttribs(),v(S,k)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(S){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",S)}onChartRender(){let S=this.chart,k=S.focusElement,x=S.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&k&&k===S.exportingGroup&&(k.focusBorder?S.setFocusToElement(k,this.exportButtonProxy.innerElement):x&&x.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let S=this.chart,k=this.proxyProvider,x=C(S);(function(A){let D=A.options.exporting,w=C(A);return!!(D&&D.enabled!==!1&&D.accessibility&&D.accessibility.enabled&&w&&w.element)})(S)&&x&&(this.exportButtonProxy=k.addProxyElement("chartMenu",{click:x},"button",{"aria-label":S.langFormat("accessibility.exporting.menuButtonLabel",{chart:S,chartTitle:g(S)}),"aria-expanded":!1,title:S.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let S=this.chart,k=S.exportDivElements;if(k&&k.length){k.forEach(A=>{A&&(A.tagName!=="LI"||A.children&&A.children.length?A.setAttribute("aria-hidden","true"):A.setAttribute("tabindex",-1))});let x=k[0]&&k[0].parentNode;x&&m(x,{"aria-hidden":void 0,"aria-label":S.langFormat("accessibility.exporting.chartMenuLabel",{chart:S}),role:"list"})}}getKeyboardNavigation(){let S=this.keyCodes,k=this.chart,x=this;return new h(k,{keyCodeMap:[[[S.left,S.up],function(){return x.onKbdPrevious(this)}],[[S.right,S.down],function(){return x.onKbdNext(this)}],[[S.enter,S.space],function(){return x.onKbdClick(this)}]],validate:function(){return!!k.exporting&&k.options.exporting.enabled!==!1&&k.options.exporting.accessibility.enabled!==!1},init:function(){let A=x.exportButtonProxy,D=x.chart.exportingGroup;A&&D&&k.setFocusToElement(D,A.innerElement)},terminate:function(){k.hideExportMenu()}})}onKbdPrevious(S){let k=this.chart,x=k.options.accessibility,A=S.response,D=k.highlightedExportItemIx||0;for(;D--;)if(k.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(k.highlightLastExportItem(),A.success):A.prev}onKbdNext(S){let k=this.chart,x=k.options.accessibility,A=S.response;for(let D=(k.highlightedExportItemIx||0)+1;D<k.exportDivElements.length;++D)if(k.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(k.highlightExportItem(0),A.success):A.next}onKbdClick(S){let k=this.chart,x=k.exportDivElements[k.highlightedExportItemIx],A=C(k).element;return k.openMenu?this.fakeClickEvent(x):(this.fakeClickEvent(A),k.highlightExportItem(0)),S.response.success}}return function(T){function S(){let D=C(this);if(D){let w=D.element;w.onclick&&w.onclick(y("click"))}}function k(){let D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(w=>{w&&w.className==="highcharts-menu-item"&&w.onmouseout&&w.onmouseout(y("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(D){let w=this.exportDivElements&&this.exportDivElements[D],I=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(w&&w.tagName==="LI"&&!(w.children&&w.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return w.focus&&N&&w.focus(),I&&I.onmouseout&&I.onmouseout(y("mouseout")),w.onmouseover&&w.onmouseover(y("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function A(){if(this.exportDivElements){let D=this.exportDivElements.length;for(;D--;)if(this.highlightExportItem(D))return!0}return!1}T.compose=function(D){let w=D.prototype;w.hideExportMenu||(w.hideExportMenu=k,w.highlightExportItem=x,w.highlightLastExportItem=A,w.showExportMenu=S)}}(b),b}),s(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r,p){let{doc:m,win:g}=a,{addEvent:v,defined:y,fireEvent:C}=h,{getElement:b,simulatedEventTarget:T}=p;class S{constructor(x,A){this.currentModuleIx=NaN,this.modules=[],this.init(x,A)}init(x,A){let D=this.eventProvider=new r;this.chart=x,this.components=A,this.modules=[],this.currentModuleIx=0,this.update(),D.addEvent(this.tabindexContainer,"keydown",w=>this.onKeydown(w)),D.addEvent(this.tabindexContainer,"focus",w=>this.onFocus(w)),["mouseup","touchend"].forEach(w=>D.addEvent(m,w,I=>this.onMouseUp(I))),["mousedown","touchstart"].forEach(w=>D.addEvent(x.renderTo,w,()=>{this.isClickingChart=!0}))}update(x){let A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,w=this.components;this.updateContainerTabindex(),D&&D.enabled&&x&&x.length?(this.modules=x.reduce(function(I,N){let q=w[N].getKeyboardNavigation();return I.concat(q)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let x=b(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),x?(this.makeElementAnExitAnchor(x),this.exitAnchor=x):this.createExitAnchor()}move(x){let A=this.modules&&this.modules[this.currentModuleIx];A&&A.terminate&&A.terminate(x),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=x;let D=this.modules&&this.modules[this.currentModuleIx];if(D){if(D.validate&&!D.validate())return this.move(x);if(D.init)return D.init(x),!0}return this.currentModuleIx=0,this.exiting=!0,x>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(x){let A=this.chart,D=x.relatedTarget&&A.container.contains(x.relatedTarget),w=A.options.accessibility,I=w&&w.keyboardNavigation;if(I&&I.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!D){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(x){if(delete this.isClickingChart,!this.keyboardReset&&x.relatedTarget!==T){let A=this.chart;if(!x.target||!A.container.contains(x.target)){let D=this.modules&&this.modules[this.currentModuleIx||0];D&&D.terminate&&D.terminate(),this.currentModuleIx=0}A.focusElement&&(A.focusElement.removeFocusBorder(),delete A.focusElement),this.keyboardReset=!0}}onKeydown(x){let A,D=x||g.event,w=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],I=D.target;if((!I||I.nodeName!=="INPUT"||I.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,w)){let N=w.run(D);N===w.response.success?A=!0:N===w.response.prev?A=this.move(-1):N===w.response.next&&(A=this.move(1)),A&&(D.preventDefault(),D.stopPropagation())}}updateContainerTabindex(){let x,A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,w=!(D&&D.enabled===!1),I=this.chart,N=I.container;I.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),x=I.renderTo):x=N,this.tabindexContainer=x;let q=x.getAttribute("tabindex");w&&!q?x.setAttribute("tabindex","0"):w||I.container.removeAttribute("tabindex")}createExitAnchor(){let x=this.chart,A=this.exitAnchor=m.createElement("div");x.renderTo.appendChild(A),this.makeElementAnExitAnchor(A)}makeElementAnExitAnchor(x){let A=this.tabindexContainer.getAttribute("tabindex")||0;x.setAttribute("class","highcharts-exit-anchor"),x.setAttribute("tabindex",A),x.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(x)}removeExitAnchor(){if(this.exitAnchor){let x=this.eventProvider.eventRemovers.find(A=>A.element===this.exitAnchor);x&&y(x.remover)&&this.eventProvider.removeEvent(x.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(x){let A=this.chart,D=this;this.eventProvider.addEvent(x,"focus",function(w){let I=w||g.event,N=!(I.relatedTarget&&A.container.contains(I.relatedTarget)||D.exiting);if(A.focusElement&&delete A.focusElement,N){if(D.tabbingInBackwards=!0,D.tabindexContainer.focus(),delete D.tabbingInBackwards,I.preventDefault(),D.modules&&D.modules.length){D.currentModuleIx=D.modules.length-1;let q=D.modules[D.currentModuleIx];q&&q.validate&&!q.validate()?D.move(-1):q&&q.init(-1)}}else D.exiting=!1})}getFirstValidModuleIx(){let x=this.modules.length;for(let A=0;A<x;++A){let D=this.modules[A];if(!D.validate||D.validate())return A}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(k){function x(){let D=this;C(this,"dismissPopupContent",{},function(){D.tooltip&&D.tooltip.hide(0),D.hideExportMenu()})}function A(D){(D.which||D.keyCode)===27&&a.charts&&a.charts.forEach(w=>{w&&w.dismissPopupContent&&w.dismissPopupContent()})}k.compose=function(D){l.compose(D);let w=D.prototype;return w.dismissPopupContent||(w.dismissPopupContent=x,v(m,"keydown",A)),D}}(S),S}),s(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r,p,m,g,v){let{animObject:y}=a,{doc:C}=l,{addEvent:b,fireEvent:T,isNumber:S,pick:k,syncTimeout:x}=r,{getChartTitle:A}=g,{stripHTMLTagsFromString:D,addClass:w,removeClass:I}=v;function N(X){let B=X.legend&&X.legend.allItems,j=X.options.legend.accessibility||{},O=X.colorAxis&&X.colorAxis.some(R=>!R.dataClasses||!R.dataClasses.length);return!!(B&&B.length&&!O&&j.enabled!==!1)}function q(X,B){let j=B.legendItem||{};for(let O of(B.setState(X?"hover":"",!0),["group","label","symbol"])){let R=j[O],L=R&&R.element||R;L&&T(L,X?"mouseover":"mouseout")}}class Y extends p{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let B=this;this.recreateProxies(),this.addEvent(h,"afterScroll",function(){this.chart===B.chart&&(B.proxyProvider.updateGroupProxyElementPositions("legend"),B.updateLegendItemProxyVisibility(),B.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(B.highlightedLegendItemIx))}),this.addEvent(h,"afterPositionItem",function(j){this.chart===B.chart&&this.chart.renderer&&B.updateProxyPositionForItem(j.item)}),this.addEvent(h,"afterRender",function(){this.chart===B.chart&&this.chart.renderer&&B.recreateProxies()&&x(()=>B.proxyProvider.updateGroupProxyElementPositions("legend"),y(k(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let B,j=this.chart,O=j.legend,R=O.allItems||[],L=O.currentPage||1,G=O.clipHeight||0;R.forEach($=>{if($.a11yProxyElement){let F=O.pages&&O.pages.length,H=$.a11yProxyElement.element,W=!1;if(B=$.legendItem||{},F){let re=B.pageIx||0;W=(B.y||0)+(B.label?Math.round(B.label.getBBox().height):0)-O.pages[re]>G||re!==L-1}W?j.styledMode?w(H,"highcharts-a11y-invisible"):H.style.visibility="hidden":(I(H,"highcharts-a11y-invisible"),H.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(B){let j=this.chart,O=j.legend,R=(O.currentPage||1)+B,L=O.pages||[];if(R>0&&R<=L.length){let G=0;for(let $ of O.allItems)(($.legendItem||{}).pageIx||0)+1===R&&j.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(B){B.a11yProxyElement&&B.a11yProxyElement.refreshPosition()}recreateProxies(){let B=C.activeElement,j=this.proxyGroup,O=B&&j&&j.contains(B);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),O&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let B=this.chart,j=D((B.legend&&B.legend.options.title&&B.legend.options.title.text||"").replace(/<br ?\/?>/g," "),B.renderer.forExport),O=B.langFormat("accessibility.legend.legendLabel"+(j?"":"NoTitle"),{chart:B,legendTitle:j,chartTitle:A(B)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":O})}addLegendProxyGroup(){let B=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:B})}proxyLegendItems(){let B,j=this;((this.chart.legend||{}).allItems||[]).forEach(O=>{(B=O.legendItem||{}).label&&B.label.element&&j.proxyLegendItem(O)})}proxyLegendItem(B){let j=B.legendItem||{};if(!j.label||!j.group)return;let O=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:D(B.name,this.chart.renderer.forExport),item:B}),R={tabindex:-1,"aria-pressed":B.visible,"aria-label":O},L=j.group.div?j.label:j.group;B.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:j.label,visual:L.element},"button",R)}getKeyboardNavigation(){let B=this.keyCodes,j=this,O=this.chart;return new m(O,{keyCodeMap:[[[B.left,B.right,B.up,B.down],function(R){return j.onKbdArrowKey(this,R)}],[[B.enter,B.space],function(){return j.onKbdClick(this)}],[[B.pageDown,B.pageUp],function(R){let L=R===B.pageDown?1:-1;return j.highlightAdjacentLegendPage(L),this.response.success}]],validate:function(){return j.shouldHaveLegendNavigation()},init:function(){O.highlightLegendItem(0),j.highlightedLegendItemIx=0},terminate:function(){j.highlightedLegendItemIx=-1,O.legend.allItems.forEach(R=>q(!1,R))}})}onKbdArrowKey(B,j){let{keyCodes:{left:O,up:R},highlightedLegendItemIx:L,chart:G}=this,$=G.legend.allItems.length,F=G.options.accessibility.keyboardNavigation.wrapAround,H=j===O||j===R?-1:1;return G.highlightLegendItem(L+H)?this.highlightedLegendItemIx+=H:F&&$>1&&(this.highlightedLegendItemIx=H>0?0:$-1,G.highlightLegendItem(this.highlightedLegendItemIx)),B.response.success}onKbdClick(B){let j=this.chart.legend.allItems[this.highlightedLegendItemIx];return j&&j.a11yProxyElement&&j.a11yProxyElement.click(),B.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let B=this.chart,j=(B.options.legend||{}).accessibility||{};return!!(B.legend.display&&j.keyboardNavigation&&j.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(X){function B(O){let R=this.legend.allItems,L=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=R[O],$=(G==null?void 0:G.legendItem)||{};if(G){S(L)&&R[L]&&q(!1,R[L]),function(W,re){let he=(W.allItems[re].legendItem||{}).pageIx,ie=W.currentPage;he!==void 0&&he+1!==ie&&W.scroll(1+he-ie)}(this.legend,O);let F=$.label,H=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return F&&F.element&&H&&this.setFocusToElement(F,H),q(!0,G),!0}return!1}function j(O){let R=this.chart.options.accessibility,L=O.item;R.enabled&&L&&L.a11yProxyElement&&L.a11yProxyElement.innerElement.setAttribute("aria-pressed",O.visible?"true":"false")}X.compose=function(O,R){let L=O.prototype;L.highlightLegendItem||(L.highlightLegendItem=B,b(R,"afterColorizeItem",j))}}(Y),Y}),s(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let h,{isTouchDevice:r}=a,{addEvent:p,merge:m,pick:g}=l,v=[];function y(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function C(){var q;let A,D,w,I=this.legend,N=this.navigator;if(N){A=I&&I.options,D=N.xAxis,w=N.yAxis;let{scrollbarHeight:Y,scrollButtonSize:X}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Y-N.height:this.spacing[3]+Y,N.top=this.plotTop+X):(N.left=g(D.left,this.plotLeft+X),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Y-(((q=this.scrollbar)==null?void 0:q.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(A&&A.verticalAlign==="bottom"&&A.layout!=="proximate"&&A.enabled&&!A.floating?I.legendHeight+g(A.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&w&&(this.inverted?D.options.left=w.options.left=N.left:D.options.top=w.options.top=N.top,D.setAxisSize(),w.setAxisSize())}}function b(A){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new h(this),g(A.redraw,!0)&&this.redraw(A.animation))}function T(){let A=this.options;(A.navigator.enabled||A.scrollbar.enabled)&&(this.scroller=this.navigator=new h(this))}function S(){let A=this.options,D=A.navigator,w=A.rangeSelector;if((D&&D.enabled||w&&w.enabled)&&(!r&&this.zooming.type==="x"||r&&this.zooming.pinchType==="x"))return!1}function k(A){let D=A.navigator;if(D&&A.xAxis[0]){let w=A.xAxis[0].getExtremes();D.render(w.min,w.max)}}function x(A){let D=A.options.navigator||{},w=A.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||w.enabled)&&(m(!0,this.options.navigator,D),m(!0,this.options.scrollbar,w),delete A.options.navigator,delete A.options.scrollbar)}return{compose:function(A,D){if(l.pushUnique(v,A)){let w=A.prototype;h=D,w.callbacks.push(k),p(A,"afterAddSeries",y),p(A,"afterSetChartSize",C),p(A,"afterUpdate",b),p(A,"beforeRender",T),p(A,"beforeShowResetZoom",S),p(A,"update",x)}}}}),s(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{isTouchDevice:h}=a,{addEvent:r,correctFloat:p,defined:m,isNumber:g,pick:v}=l;function y(){this.navigatorAxis||(this.navigatorAxis=new b(this))}function C(T){let S,k=this.chart,x=k.options,A=x.navigator,D=this.navigatorAxis,w=k.zooming.pinchType,I=x.rangeSelector,N=k.zooming.type;if(this.isXAxis&&(A!=null&&A.enabled||I!=null&&I.enabled)){if(N==="y"&&T.trigger==="zoom")S=!1;else if((T.trigger==="zoom"&&N==="xy"||h&&w==="xy")&&this.options.range){let q=D.previousZoom;m(T.min)?D.previousZoom=[this.min,this.max]:q&&(T.min=q[0],T.max=q[1],D.previousZoom=void 0)}}S!==void 0&&T.preventDefault()}class b{static compose(S){S.keepProps.includes("navigatorAxis")||(S.keepProps.push("navigatorAxis"),r(S,"init",y),r(S,"setExtremes",C))}constructor(S){this.axis=S}destroy(){this.axis=void 0}toFixedRange(S,k,x,A){let D=this.axis,w=(D.pointRange||0)/2,I=v(x,D.translate(S,!0,!D.horiz)),N=v(A,D.translate(k,!0,!D.horiz));return m(x)||(I=p(I+w)),m(A)||(N=p(N-w)),g(I)&&g(N)||(I=N=void 0),{min:I,max:N}}}return b}),s(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(a,l){let{parse:h}=a,{seriesTypes:r}=l;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:h("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:r.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),s(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(a,l){let{relativeLength:h}=l;return{"navigator-handle":function(r,p,m,g,v={}){let y=v.width?v.width/2:m,C=h(v.borderRadius||0,Math.min(2*y,g));return[["M",-1.5,(g=v.height||g)/2-3.5],["L",-1.5,g/2+4.5],["M",.5,g/2-3.5],["L",.5,g/2+4.5],...a.rect(-y-1,.5,2*y+1,g,{r:C})]}}}),s(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(a){let{defined:l}=a;return{setFixedRange:function(h){let r=this.xAxis[0];l(r.dataMax)&&l(r.dataMin)&&h?this.fixedRange=Math.min(h,r.dataMax-r.dataMin):this.fixedRange=h}}}),s(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v){let{setOptions:y}=a,{composed:C}=l,{getRendererType:b}=m,{setFixedRange:T}=g,{addEvent:S,extend:k,pushUnique:x}=v;function A(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,w,I){h.compose(w),x(C,"Navigator")&&(D.prototype.setFixedRange=T,k(b().prototype.symbols,p),S(I,"afterUpdate",A),y({navigator:r}))}}}),s(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){var h;let{composed:r}=a,{addEvent:p,defined:m,pick:g,pushUnique:v}=l;return function(y){let C;function b(x){let A=g(x.options&&x.options.min,x.min),D=g(x.options&&x.options.max,x.max);return{axisMin:A,axisMax:D,scrollMin:m(x.dataMin)?Math.min(A,x.min,x.dataMin,g(x.threshold,1/0)):A,scrollMax:m(x.dataMax)?Math.max(D,x.max,x.dataMax,g(x.threshold,-1/0)):D}}function T(){let x=this.scrollbar,A=x&&!x.options.opposite,D=this.horiz?2:A?3:1;x&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=x.size+(x.options.margin||0))}function S(){let x=this;x.options&&x.options.scrollbar&&x.options.scrollbar.enabled&&(x.options.scrollbar.vertical=!x.horiz,x.options.startOnTick=x.options.endOnTick=!1,x.scrollbar=new C(x.chart.renderer,x.options.scrollbar,x.chart),p(x.scrollbar,"changed",function(A){let D,w,{axisMin:I,axisMax:N,scrollMin:q,scrollMax:Y}=b(x),X=Y-q;if(m(I)&&m(N))if(x.horiz&&!x.reversed||!x.horiz&&x.reversed?(D=q+X*this.to,w=q+X*this.from):(D=q+X*(1-this.from),w=q+X*(1-this.to)),this.shouldUpdateExtremes(A.DOMType)){let B=A.DOMType!=="mousemove"&&A.DOMType!=="touchmove"&&void 0;x.setExtremes(w,D,!0,B,A)}else this.setRange(this.from,this.to)}))}function k(){let x,A,D,{scrollMin:w,scrollMax:I}=b(this),N=this.scrollbar,q=this.axisTitleMargin+(this.titleOffset||0),Y=this.chart.scrollbarsOffsets,X=this.options.margin||0;if(N&&Y){if(this.horiz)this.opposite||(Y[1]+=q),N.position(this.left,this.top+this.height+2+Y[1]-(this.opposite?X:0),this.width,this.height),this.opposite||(Y[1]+=X),x=1;else{let B;this.opposite&&(Y[0]+=q),B=N.options.opposite?this.left+this.width+2+Y[0]-(this.opposite?0:X):this.opposite?0:X,N.position(B,this.top,this.width,this.height),this.opposite&&(Y[0]+=X),x=0}if(Y[x]+=N.size+(N.options.margin||0),isNaN(w)||isNaN(I)||!m(this.min)||!m(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let B=this.pointRange/(this.dataMax+1);A=B*this.min,D=B*(this.max+1),N.setRange(A,D)}else A=(this.min-w)/(I-w),D=(this.max-w)/(I-w),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(A,D):N.setRange(1-D,1-A)}}y.compose=function(x,A){v(r,"Axis.Scrollbar")&&(C=A,p(x,"afterGetOffset",T),p(x,"afterInit",S),p(x,"afterRender",k))}}(h||(h={})),h}),s(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),s(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{defaultOptions:m}=a,{addEvent:g,correctFloat:v,crisp:y,defined:C,destroyObjectProperties:b,fireEvent:T,merge:S,pick:k,removeEvent:x}=p;class A{static compose(w){h.compose(w,A)}static swapXY(w,I){return I&&w.forEach(N=>{let q,Y=N.length;for(let X=0;X<Y;X+=2)typeof(q=N[X+1])=="number"&&(N[X+1]=N[X+2],N[X+2]=q)}),w}constructor(w,I,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(w,I,N)}addEvents(){let w=this.options.inverted?[1,0]:[0,1],I=this.scrollbarButtons,N=this.scrollbarGroup.element,q=this.track.element,Y=this.mouseDownHandler.bind(this),X=this.mouseMoveHandler.bind(this),B=this.mouseUpHandler.bind(this),j=[[I[w[0]].element,"click",this.buttonToMinClick.bind(this)],[I[w[1]].element,"click",this.buttonToMaxClick.bind(this)],[q,"click",this.trackClick.bind(this)],[N,"mousedown",Y],[N.ownerDocument,"mousemove",X],[N.ownerDocument,"mouseup",B],[N,"touchstart",Y],[N.ownerDocument,"touchmove",X],[N.ownerDocument,"touchend",B]];j.forEach(function(O){g.apply(null,O)}),this._events=j}buttonToMaxClick(w){let I=(this.to-this.from)*k(this.options.step,.2);this.updatePosition(this.from+I,this.to+I),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}buttonToMinClick(w){let I=v(this.to-this.from)*k(this.options.step,.2);this.updatePosition(v(this.from-I),v(this.to-I)),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}cursorToScrollbarPosition(w){let I=this.options,N=I.minWidth>this.calculatedWidth?I.minWidth:0;return{chartX:(w.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(w.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let w=this,I=w.chart.scroller;w.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){w[N]&&w[N].destroy&&(w[N]=w[N].destroy())}),I&&w===I.scrollbar&&(I.scrollbar=null,b(I.scrollbarButtons))}drawScrollbarButton(w){let I=this.renderer,N=this.scrollbarButtons,q=this.options,Y=this.size,X=I.g().add(this.group);if(N.push(X),q.buttonsEnabled){let B=I.rect().addClass("highcharts-scrollbar-button").add(X);this.chart.styledMode||B.attr({stroke:q.buttonBorderColor,"stroke-width":q.buttonBorderWidth,fill:q.buttonBackgroundColor}),B.attr(B.crisp({x:-.5,y:-.5,width:Y,height:Y,r:q.buttonBorderRadius},B.strokeWidth()));let j=I.path(A.swapXY([["M",Y/2+(w?-1:1),Y/2-3],["L",Y/2+(w?-1:1),Y/2+3],["L",Y/2+(w?2:-2),Y/2]],q.vertical)).addClass("highcharts-scrollbar-arrow").add(N[w]);this.chart.styledMode||j.attr({fill:q.buttonArrowColor})}}init(w,I,N){this.scrollbarButtons=[],this.renderer=w,this.userOptions=I,this.options=S(r,m.scrollbar,I),this.options.margin=k(this.options.margin,10),this.chart=N,this.size=k(this.options.size,this.options.height),I.enabled&&(this.render(),this.addEvents())}mouseDownHandler(w){var q;let I=((q=this.chart.pointer)==null?void 0:q.normalize(w))||w,N=this.cursorToScrollbarPosition(I);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(w){var X;let I,N=((X=this.chart.pointer)==null?void 0:X.normalize(w))||w,q=this.options.vertical?"chartY":"chartX",Y=this.initPositions||[];this.grabbedCenter&&(!w.touches||w.touches[0][q]!==0)&&(I=this.cursorToScrollbarPosition(N)[q]-this[q],this.hasDragged=!0,this.updatePosition(Y[0]+I,Y[1]+I),this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:w.type,DOMEvent:w}))}mouseUpHandler(w){this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:w.type,DOMEvent:w}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(w,I,N,q){let{buttonsEnabled:Y,margin:X=0,vertical:B}=this.options,j=this.rendered?"animate":"attr",O=q,R=0;this.group.show(),this.x=w,this.y=I+this.trackBorderWidth,this.width=N,this.height=q,this.xOffset=O,this.yOffset=R,B?(this.width=this.yOffset=N=R=this.size,this.xOffset=O=0,this.yOffset=R=Y?this.size:0,this.barWidth=q-(Y?2*N:0),this.x=w+=X):(this.height=q=this.size,this.xOffset=O=Y?this.size:0,this.barWidth=N-(Y?2*q:0),this.y=this.y+X),this.group[j]({translateX:w,translateY:this.y}),this.track[j]({width:N,height:q}),this.scrollbarButtons[1][j]({translateX:B?0:N-O,translateY:B?q-R:0})}removeEvents(){this._events.forEach(function(w){x.apply(null,w)}),this._events.length=0}render(){let w=this.renderer,I=this.options,N=this.size,q=this.chart.styledMode,Y=w.g("scrollbar").attr({zIndex:I.zIndex}).hide().add();this.group=Y,this.track=w.rect().addClass("highcharts-scrollbar-track").attr({r:I.trackBorderRadius||0,height:N,width:N}).add(Y),q||this.track.attr({fill:I.trackBackgroundColor,stroke:I.trackBorderColor,"stroke-width":I.trackBorderWidth});let X=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-y(0,X),y:-y(0,X)}),this.scrollbarGroup=w.g().add(Y),this.scrollbar=w.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-X,width:N-X,r:I.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=w.path(A.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],I.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),q||(this.scrollbar.attr({fill:I.barBackgroundColor,stroke:I.barBorderColor,"stroke-width":I.barBorderWidth}),this.scrollbarRifles.attr({stroke:I.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-y(0,this.scrollbarStrokeWidth),-y(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(w,I){let N,q,Y=this.options,X=Y.vertical,B=Y.minWidth,j=this.barWidth,O=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!C(j))return;let R=j*Math.min(I,1);N=Math.ceil(j*(w=Math.max(w,0))),this.calculatedWidth=q=v(R-N),q<B&&(N=(j-B+q)*w,q=B);let L=Math.floor(N+this.xOffset+this.yOffset),G=q/2-.5;this.from=w,this.to=I,X?(this.scrollbarGroup[O]({translateY:L}),this.scrollbar[O]({height:q}),this.scrollbarRifles[O]({translateY:G}),this.scrollbarTop=L,this.scrollbarLeft=0):(this.scrollbarGroup[O]({translateX:L}),this.scrollbar[O]({width:q}),this.scrollbarRifles[O]({translateX:G}),this.scrollbarLeft=L,this.scrollbarTop=0),q<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Y.showFull===!1&&(w<=0&&I>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(w){return k(this.options.liveRedraw,l.svg&&!l.isTouchDevice&&!this.chart.boosted)||w==="mouseup"||w==="touchend"||!C(w)}trackClick(w){var X;let I=((X=this.chart.pointer)==null?void 0:X.normalize(w))||w,N=this.to-this.from,q=this.y+this.scrollbarTop,Y=this.x+this.scrollbarLeft;this.options.vertical&&I.chartY>q||!this.options.vertical&&I.chartX>Y?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}update(w){this.destroy(),this.init(this.chart.renderer,S(!0,this.options,w),this.chart)}updatePosition(w,I){I>1&&(w=v(1-v(I-w)),I=1),w<0&&(I=v(I-w),w=0),this.from=w,this.to=I}}return A.defaultOptions=r,m.scrollbar=S(!0,A.defaultOptions,m.scrollbar),A}),s(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y){let{defaultOptions:C}=h,{isTouchDevice:b}=r,{prototype:{symbols:T}}=v,{addEvent:S,clamp:k,correctFloat:x,defined:A,destroyObjectProperties:D,erase:w,extend:I,find:N,fireEvent:q,isArray:Y,isNumber:X,merge:B,pick:j,removeEvent:O,splat:R}=y;function L($,...F){let H=[].filter.call(F,X);if(H.length)return Math[$].apply(0,H)}class G{static compose(F,H,W){l.compose(F,G),m.compose(F,H,W)}constructor(F){this.isDirty=!1,this.scrollbarHeight=0,this.init(F)}drawHandle(F,H,W,re){let he=this.navigatorOptions.handles.height;this.handles[H][re](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(F,10)+.5-he)}:{translateX:Math.round(this.left+parseInt(F,10)),translateY:Math.round(this.top+this.height/2-he/2-1)})}drawOutline(F,H,W,re){let he=this.navigatorOptions.maskInside,ie=this.outline.strokeWidth(),ae=ie/2,Ce=ie%2/2,ge=this.scrollButtonSize,ke=this.size,K=this.top,Q=this.height,le=K-ae,_e=K+Q,J=this.left,ne,ue;W?(ne=K+H+Ce,H=K+F+Ce,ue=[["M",J+Q,K-ge-Ce],["L",J+Q,ne],["L",J,ne],["M",J,H],["L",J+Q,H],["L",J+Q,K+ke+ge]],he&&ue.push(["M",J+Q,ne-ae],["L",J+Q,H+ae])):(J-=ge,F+=J+ge-Ce,H+=J+ge-Ce,ue=[["M",J,le],["L",F,le],["L",F,_e],["M",H,_e],["L",H,le],["L",J+ke+2*ge,le]],he&&ue.push(["M",F-ae,le],["L",H+ae,le])),this.outline[re]({d:ue})}drawMasks(F,H,W,re){let he,ie,ae,Ce,ge=this.left,ke=this.top,K=this.height;W?(ae=[ge,ge,ge],Ce=[ke,ke+F,ke+H],ie=[K,K,K],he=[F,H-F,this.size-H]):(ae=[ge,ge+F,ge+H],Ce=[ke,ke,ke],ie=[F,H-F,this.size-H],he=[K,K,K]),this.shades.forEach((Q,le)=>{Q[re]({x:ae[le],y:Ce[le],width:ie[le],height:he[le]})})}renderElements(){var ge;let F=this,H=F.navigatorOptions,W=H.maskInside,re=F.chart,he=re.inverted,ie=re.renderer,ae={cursor:he?"ns-resize":"ew-resize"},Ce=F.navigatorGroup??(F.navigatorGroup=ie.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((ke,K)=>{let Q=F.shades[K]??(F.shades[K]=ie.rect().addClass("highcharts-navigator-mask"+(K===1?"-inside":"-outside")).add(Ce));re.styledMode||(Q.attr({fill:ke?H.maskFill:"rgba(0,0,0,0)"}),K===1&&Q.css(ae))}),F.outline||(F.outline=ie.path().addClass("highcharts-navigator-outline").add(Ce)),re.styledMode||F.outline.attr({"stroke-width":H.outlineWidth,stroke:H.outlineColor}),(ge=H.handles)==null?void 0:ge.enabled){let ke=H.handles,{height:K,width:Q}=ke;[0,1].forEach(le=>{var J;let _e=ke.symbols[le];if(F.handles[le]&&F.handles[le].symbolUrl===_e){if(!F.handles[le].isImg&&F.handles[le].symbolName!==_e){let ne=T[_e].call(T,-Q/2-1,0,Q,K);F.handles[le].attr({d:ne}),F.handles[le].symbolName=_e}}else(J=F.handles[le])==null||J.destroy(),F.handles[le]=ie.symbol(_e,-Q/2-1,0,Q,K,ke),F.handles[le].attr({zIndex:7-le}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][le]).add(Ce),F.addMouseEvents();re.inverted&&F.handles[le].attr({rotation:90,rotationOriginX:Math.floor(-Q/2),rotationOriginY:(K+Q)/2}),re.styledMode||F.handles[le].attr({fill:ke.backgroundColor,stroke:ke.borderColor,"stroke-width":ke.lineWidth,width:ke.width,height:ke.height,x:-Q/2-1,y:0}).css(ae)})}}update(F,H=!1){var he;let W=this.chart,re=W.options.chart.inverted!==((he=W.scrollbar)==null?void 0:he.options.vertical);if(B(!0,W.options.navigator,F),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),A(F.enabled)||re)return this.destroy(),this.navigatorEnabled=F.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,F.adaptToUpdatedData===!1&&this.baseSeries.forEach(ie=>{O(ie,"updatedData",this.updatedDataHandler)},this),F.adaptToUpdatedData&&this.baseSeries.forEach(ie=>{ie.eventsToUnbind.push(S(ie,"updatedData",this.updatedDataHandler))},this),(F.series||F.baseSeries)&&this.setBaseSeries(void 0,!1),F.height||F.xAxis||F.yAxis)){this.height=F.height??this.height;let ie=this.getXAxisOffsets();this.xAxis.update({...F.xAxis,offsets:ie,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...F.yAxis,[W.inverted?"width":"height"]:this.height},!1)}H&&W.redraw()}render(F,H,W,re){let he=this.chart,ie=this.xAxis,ae=ie.pointRange||0,Ce=ie.navigatorAxis.fake?he.xAxis[0]:ie,ge=this.navigatorEnabled,ke=this.rendered,K=he.inverted,Q=he.xAxis[0].minRange,le=he.xAxis[0].options.maxRange,_e=this.scrollButtonSize,J,ne,ue,ye=this.scrollbarHeight,we,ze;if(this.hasDragged&&!A(W))return;if(this.isDirty&&this.renderElements(),F=x(F-ae/2),H=x(H+ae/2),!X(F)||!X(H)){if(!ke)return;W=0,re=j(ie.width,Ce.width)}this.left=j(ie.left,he.plotLeft+_e+(K?he.plotWidth:0));let Ee=this.size=we=j(ie.len,(K?he.plotHeight:he.plotWidth)-2*_e);J=K?ye:we+2*_e,W=j(W,ie.toPixels(F,!0)),re=j(re,ie.toPixels(H,!0)),X(W)&&Math.abs(W)!==1/0||(W=0,re=J);let Ie=ie.toValue(W,!0),Fe=ie.toValue(re,!0),He=Math.abs(x(Fe-Ie));He<Q?this.grabbedLeft?W=ie.toPixels(Fe-Q-ae,!0):this.grabbedRight&&(re=ie.toPixels(Ie+Q+ae,!0)):A(le)&&x(He-ae)>le&&(this.grabbedLeft?W=ie.toPixels(Fe-le-ae,!0):this.grabbedRight&&(re=ie.toPixels(Ie+le+ae,!0))),this.zoomedMax=k(Math.max(W,re),0,Ee),this.zoomedMin=k(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,re),0,Ee),this.range=this.zoomedMax-this.zoomedMin,Ee=Math.round(this.zoomedMax);let Ae=Math.round(this.zoomedMin);ge&&(this.navigatorGroup.attr({visibility:"inherit"}),ze=ke&&!this.hasDragged?"animate":"attr",this.drawMasks(Ae,Ee,K,ze),this.drawOutline(Ae,Ee,K,ze),this.navigatorOptions.handles.enabled&&(this.drawHandle(Ae,0,K,ze),this.drawHandle(Ee,1,K,ze))),this.scrollbar&&(K?(ue=this.top-_e,ne=this.left-ye+(ge||!Ce.opposite?0:(Ce.titleOffset||0)+Ce.axisTitleMargin),ye=we+2*_e):(ue=this.top+(ge?this.height:-ye),ne=this.left-_e),this.scrollbar.position(ne,ue,J,ye),this.scrollbar.setRange(this.zoomedMin/(we||1),this.zoomedMax/(we||1))),this.rendered=!0,this.isDirty=!1,q(this,"afterRender")}addMouseEvents(){let F=this,H=F.chart,W=H.container,re=[],he,ie;F.mouseMoveHandler=he=function(ae){F.onMouseMove(ae)},F.mouseUpHandler=ie=function(ae){F.onMouseUp(ae)},(re=F.getPartsEvents("mousedown")).push(S(H.renderTo,"mousemove",he),S(W.ownerDocument,"mouseup",ie),S(H.renderTo,"touchmove",he),S(W.ownerDocument,"touchend",ie)),re.concat(F.getPartsEvents("touchstart")),F.eventsToUnbind=re,F.series&&F.series[0]&&re.push(S(F.series[0].xAxis,"foundExtremes",function(){H.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(F){let H=this,W=[];return["shades","handles"].forEach(function(re){H[re].forEach(function(he,ie){W.push(S(he.element,F,function(ae){H[re+"Mousedown"](ae,ie)}))})}),W}shadesMousedown(F,H){var _e;F=((_e=this.chart.pointer)==null?void 0:_e.normalize(F))||F;let W=this.chart,re=this.xAxis,he=this.zoomedMin,ie=this.size,ae=this.range,Ce=this.left,ge=F.chartX,ke,K,Q,le;W.inverted&&(ge=F.chartY,Ce=this.top),H===1?(this.grabbedCenter=ge,this.fixedWidth=ae,this.dragOffset=ge-he):(le=ge-Ce-ae/2,H===0?le=Math.max(0,le):H===2&&le+ae>=ie&&(le=ie-ae,this.reversedExtremes?(le-=ae,K=this.getUnionExtremes().dataMin):ke=this.getUnionExtremes().dataMax),le!==he&&(this.fixedWidth=ae,A((Q=re.navigatorAxis.toFixedRange(le,le+ae,K,ke)).min)&&q(this,"setRange",{min:Math.min(Q.min,Q.max),max:Math.max(Q.min,Q.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(F,H){var ie;F=((ie=this.chart.pointer)==null?void 0:ie.normalize(F))||F;let W=this.chart,re=W.xAxis[0],he=this.reversedExtremes;H===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=he?re.min:re.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=he?re.max:re.min),W.setFixedRange(void 0)}onMouseMove(F){var ke;let H=this,W=H.chart,re=H.navigatorSize,he=H.range,ie=H.dragOffset,ae=W.inverted,Ce=H.left,ge;(!F.touches||F.touches[0].pageX!==0)&&(ge=(F=((ke=W.pointer)==null?void 0:ke.normalize(F))||F).chartX,ae&&(Ce=H.top,ge=F.chartY),H.grabbedLeft?(H.hasDragged=!0,H.render(0,0,ge-Ce,H.otherHandlePos)):H.grabbedRight?(H.hasDragged=!0,H.render(0,0,H.otherHandlePos,ge-Ce)):H.grabbedCenter&&(H.hasDragged=!0,ge<ie?ge=ie:ge>re+ie-he&&(ge=re+ie-he),H.render(0,0,ge-ie,ge-ie+he)),H.hasDragged&&H.scrollbar&&j(H.scrollbar.options.liveRedraw,!b&&!this.chart.boosted)&&(F.DOMType=F.type,setTimeout(function(){H.onMouseUp(F)},0)))}onMouseUp(F){let H,W,re,he,ie,ae,Ce=this.chart,ge=this.xAxis,ke=this.scrollbar,K=F.DOMEvent||F,Q=Ce.inverted,le=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!ke||!ke.hasDragged)||F.trigger==="scrollbar")&&(re=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?he=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ie=this.fixedExtreme),this.zoomedMax===this.size&&(ie=this.reversedExtremes?re.dataMin:re.dataMax),this.zoomedMin===0&&(he=this.reversedExtremes?re.dataMax:re.dataMin),A((ae=ge.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,he,ie)).min)&&q(this,"setRange",{min:Math.min(ae.min,ae.max),max:Math.max(ae.min,ae.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:K}})),F.DOMType!=="mousemove"&&F.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&X(this.zoomedMin)&&X(this.zoomedMax)&&(W=Math.round(this.zoomedMin),H=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,H,Q,le),this.outline&&this.drawOutline(W,H,Q,le),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,Q,le),this.drawHandle(H,1,Q,le)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(F){F()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let F=this.baseSeries||[];this.navigatorEnabled&&F[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&F.forEach(function(H){O(H,"updatedData",this.updatedDataHandler)},this),F[0].xAxis&&O(F[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(F){var J;let H=F.options,W=H.navigator||{},re=W.enabled,he=H.scrollbar||{},ie=he.enabled,ae=re&&W.height||0,Ce=ie&&he.height||0,ge=he.buttonsEnabled&&Ce||0;this.handles=[],this.shades=[],this.chart=F,this.setBaseSeries(),this.height=ae,this.scrollbarHeight=Ce,this.scrollButtonSize=ge,this.scrollbarEnabled=ie,this.navigatorEnabled=re,this.navigatorOptions=W,this.scrollbarOptions=he,this.setOpposite();let ke=this,K=ke.baseSeries,Q=F.xAxis.length,le=F.yAxis.length,_e=K&&K[0]&&K[0].xAxis||F.xAxis[0]||{options:{}};if(F.isDirtyBox=!0,ke.navigatorEnabled){let ne=this.getXAxisOffsets();ke.xAxis=new a(F,B({breaks:_e.options.breaks,ordinal:_e.options.ordinal,overscroll:_e.options.overscroll},W.xAxis,{type:"datetime",yAxis:(J=W.yAxis)==null?void 0:J.id,index:Q,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:_e.options.ordinal?0:_e.options.minPadding,maxPadding:_e.options.ordinal?0:_e.options.maxPadding,zoomEnabled:!1},F.inverted?{offsets:ne,width:ae}:{offsets:ne,height:ae}),"xAxis"),ke.yAxis=new a(F,B(W.yAxis,{alignTicks:!1,offset:0,index:le,isInternal:!0,reversed:j(W.yAxis&&W.yAxis.reversed,F.yAxis[0]&&F.yAxis[0].reversed,!1),zoomEnabled:!1},F.inverted?{width:ae}:{height:ae}),"yAxis"),K||W.series.data?ke.updateNavigatorSeries(!1):F.series.length===0&&(ke.unbindRedraw=S(F,"beforeRedraw",function(){F.series.length>0&&!ke.series&&(ke.setBaseSeries(),ke.unbindRedraw())})),ke.reversedExtremes=F.inverted&&!ke.xAxis.reversed||!F.inverted&&ke.xAxis.reversed,ke.renderElements(),ke.addMouseEvents()}else ke.xAxis={chart:F,navigatorAxis:{fake:!0},translate:function(ne,ue){let ye=F.xAxis[0],we=ye.getExtremes(),ze=ye.len-2*ge,Ee=L("min",ye.options.min,we.dataMin),Ie=L("max",ye.options.max,we.dataMax)-Ee;return ue?ne*Ie/ze+Ee:ze*(ne-Ee)/Ie},toPixels:function(ne){return this.translate(ne)},toValue:function(ne){return this.translate(ne,!0)}},ke.xAxis.navigatorAxis.axis=ke.xAxis,ke.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(ke.xAxis.navigatorAxis);if(F.options.scrollbar.enabled){let ne=B(F.options.scrollbar,{vertical:F.inverted});!X(ne.margin)&&ke.navigatorEnabled&&(ne.margin=F.inverted?-3:3),F.scrollbar=ke.scrollbar=new g(F.renderer,ne,F),S(ke.scrollbar,"changed",function(ue){let ye=ke.size,we=ye*this.to,ze=ye*this.from;ke.hasDragged=ke.scrollbar.hasDragged,ke.render(0,0,ze,we),this.shouldUpdateExtremes(ue.DOMType)&&setTimeout(function(){ke.onMouseUp(ue)})})}ke.addBaseSeriesEvents(),ke.addChartEvents()}setOpposite(){let F=this.navigatorOptions,H=this.navigatorEnabled,W=this.chart;this.opposite=j(F.opposite,!!(!H&&W.inverted))}getUnionExtremes(F){let H,W=this.chart.xAxis[0],re=this.xAxis,he=re.options,ie=W.options;return F&&W.dataMin===null||(H={dataMin:j(he&&he.min,L("min",ie.min,W.dataMin,re.dataMin,re.min)),dataMax:j(he&&he.max,L("max",ie.max,W.dataMax,re.dataMax,re.max))}),H}setBaseSeries(F,H){let W=this.chart,re=this.baseSeries=[];F=F||W.options&&W.options.navigator.baseSeries||(W.series.length?N(W.series,he=>!he.options.isInternal).index:0),(W.series||[]).forEach((he,ie)=>{!he.options.isInternal&&(he.options.showInNavigator||(ie===F||he.options.id===F)&&he.options.showInNavigator!==!1)&&re.push(he)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,H)}updateNavigatorSeries(F,H){var Q,le;let W=this,re=W.chart,he=W.baseSeries,ie={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(Q=this.navigatorOptions.xAxis)==null?void 0:Q.id,yAxis:(le=this.navigatorOptions.yAxis)==null?void 0:le.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},ae=W.series=(W.series||[]).filter(_e=>{let J=_e.baseSeries;return!(0>he.indexOf(J))||(J&&(O(J,"updatedData",W.updatedDataHandler),delete J.navigatorSeries),_e.chart&&_e.destroy(),!1)}),Ce,ge,ke=W.navigatorOptions.series,K;he&&he.length&&he.forEach(_e=>{let J=_e.navigatorSeries,ne=I({color:_e.color,visible:_e.visible},Y(ke)?C.navigator.series:ke);if(J&&W.navigatorOptions.adaptToUpdatedData===!1)return;ie.name="Navigator "+he.length,K=(Ce=_e.options||{}).navigatorOptions||{},ne.dataLabels=R(ne.dataLabels),(ge=B(Ce,ie,ne,K)).pointRange=j(ne.pointRange,K.pointRange,C.plotOptions[ge.type||"line"].pointRange);let ue=K.data||ne.data;W.hasNavigatorData=W.hasNavigatorData||!!ue,ge.data=ue||Ce.data&&Ce.data.slice(0),J&&J.options?J.update(ge,H):(_e.navigatorSeries=re.initSeries(ge),re.setSortedData(),_e.navigatorSeries.baseSeries=_e,ae.push(_e.navigatorSeries))}),(ke.data&&!(he&&he.length)||Y(ke))&&(W.hasNavigatorData=!1,(ke=R(ke)).forEach((_e,J)=>{ie.name="Navigator "+(ae.length+1),(ge=B(C.navigator.series,{color:re.series[J]&&!re.series[J].options.isInternal&&re.series[J].color||re.options.colors[J]||re.options.colors[0]},ie,_e)).data=_e.data,ge.data&&(W.hasNavigatorData=!0,ae.push(re.initSeries(ge)))})),F&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let F=this,H=F.baseSeries||[];H[0]&&H[0].xAxis&&H[0].eventsToUnbind.push(S(H[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),H.forEach(W=>{W.eventsToUnbind.push(S(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(S(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(S(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(S(W,"remove",function(){w(H,W),this.navigatorSeries&&(w(F.series,this.navigatorSeries),A(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(F){return this.baseSeries.reduce(function(H,W){return Math.min(H,W.xData&&W.xData.length?W.xData[0]:H)},F)}modifyNavigatorAxisExtremes(){let F=this.xAxis;if(F.getExtremes!==void 0){let H=this.getUnionExtremes(!0);H&&(H.dataMin!==F.min||H.dataMax!==F.max)&&(F.min=H.dataMin,F.max=H.dataMax)}}modifyBaseAxisExtremes(){var J;let F,H,W=this.chart.navigator,re=this.getExtremes(),he=re.min,ie=re.max,ae=re.dataMin,Ce=re.dataMax,ge=ie-he,ke=W.stickToMin,K=W.stickToMax,Q=j((J=this.ordinal)==null?void 0:J.convertOverscroll(this.options.overscroll),0),le=W.series&&W.series[0],_e=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(ke&&(F=(H=ae)+ge),K&&(F=Ce+Q,ke||(H=Math.max(ae,F-ge,W.getBaseSeriesMin(le&&le.xData?le.xData[0]:-Number.MAX_VALUE)))),_e&&(ke||K)&&X(H)&&(this.min=this.userMin=H,this.max=this.userMax=F)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let F=this.chart.navigator,H=this.navigatorSeries,W=F.reversedExtremes?Math.round(F.zoomedMin)===0:Math.round(F.zoomedMax)>=Math.round(F.size);F.stickToMax=j(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),F.stickToMin=F.shouldStickToMin(this,F),H&&!F.hasNavigatorData&&(H.options.pointStart=this.xData[0],H.setData(this.options.data,!1,null,!1))}shouldStickToMin(F,H){let W=H.getBaseSeriesMin(F.xData[0]),re=F.xAxis,he=re.max,ie=re.min,ae=re.options.range;return!!(X(he)&&X(ie))&&(ae&&he-W>0?he-W<ae:ie<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(S(this.chart,"redraw",function(){let F=this.navigator,H=F&&(F.baseSeries&&F.baseSeries[0]&&F.baseSeries[0].xAxis||this.xAxis[0]);H&&F.render(H.min,H.max)}),S(this.chart,"getMargins",function(){let F=this.navigator,H=F.opposite?"plotTop":"marginBottom";this.inverted&&(H=F.opposite?"marginRight":"plotLeft"),this[H]=(this[H]||0)+(F.navigatorEnabled||!this.inverted?F.height+F.scrollbarHeight:0)+F.navigatorOptions.margin}),S(G,"setRange",function(F){this.chart.xAxis[0].setExtremes(F.min,F.max,F.redraw,F.animation,F.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(w(this.chart.xAxis,this.xAxis),w(this.chart.axes,this.xAxis)),this.yAxis&&(w(this.chart.yAxis,this.yAxis),w(this.chart.axes,this.yAxis)),(this.series||[]).forEach(F=>{F.destroy&&F.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(F=>{this[F]&&this[F].destroy&&this[F].destroy(),this[F]=null}),[this.handles].forEach(F=>{D(F)}),this.navigatorEnabled=!1}}return G}),s(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(a,l,h,r,p,m,g,v,y){let{animObject:C}=p,{format:b}=m,{clamp:T,pick:S,syncTimeout:k}=g,{getFakeMouseEvent:x}=v,{getAxisRangeDescription:A,fireEventOnWrappedOrUnwrappedElement:D}=y;return class extends a{init(){let w=this.chart,I=this;this.announcer=new l(w,"polite"),this.addEvent(r,"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&k(()=>{I.proxyProvider.updateGroupProxyElementPositions("navigator"),I.updateHandleValues()},C(S(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var q,Y,X;let w=this.chart,I=w.options,N=I.navigator;if(N.enabled&&((q=N.accessibility)!=null&&q.enabled)){let B=I.accessibility.landmarkVerbosity,j=(Y=I.lang.accessibility)==null?void 0:Y.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:B==="all"?"region":"group","aria-label":b(j,{chart:w},w)});let O=(X=I.lang.accessibility)==null?void 0:X.navigator.handleLabel;[0,1].forEach(R=>{let L=this.getHandleByIx(R);if(L){let G=this.proxyProvider.addProxyElement("navigator",{click:L},"input",{type:"range","aria-label":b(O,{handleIx:R,chart:w},w)});this[R?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(w){let I=this,N=this.chart,q=w?this.maxHandleProxy:this.minHandleProxy,Y=this.keyCodes;return new h(N,{keyCodeMap:[[[Y.left,Y.right,Y.up,Y.down],function(X){if(q){let B=X===Y.left||X===Y.up?-1:1;q.value=""+T(parseFloat(q.value)+B,0,100),I.updateNavigator(()=>{let j=I.getHandleByIx(w);j&&N.setFocusToElement(j,q)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(w),q)},validate:()=>{var X;return!!(this.getHandleByIx(w)&&q&&((X=N.options.navigator.accessibility)!=null&&X.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let w=this.chart.navigator;if(w&&this.minHandleProxy&&this.maxHandleProxy){let I=w.size;this.minHandleProxy.value=""+Math.round(w.zoomedMin/I*100),this.maxHandleProxy.value=""+Math.round(w.zoomedMax/I*100)}}getHandleByIx(w){let I=this.chart.navigator;return I&&I.handles&&I.handles[w]}updateNavigator(w){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((I=>{var X;let N=this.chart,{navigator:q,pointer:Y}=N;if(q&&Y&&this.minHandleProxy&&this.maxHandleProxy){let B=Y.getChartPosition(),j=parseFloat(this.minHandleProxy.value)/100*q.size,O=parseFloat(this.maxHandleProxy.value)/100*q.size;[[0,"mousedown",q.zoomedMin],[0,"mousemove",j],[0,"mouseup",j],[1,"mousedown",q.zoomedMax],[1,"mousemove",O],[1,"mouseup",O]].forEach(([G,$,F])=>{var W;let H=(W=this.getHandleByIx(G))==null?void 0:W.element;H&&D(H,x($,{x:B.left+q.left+F,y:B.top+q.top},H))}),I&&I();let R=(X=N.options.lang.accessibility)==null?void 0:X.navigator.changeAnnouncement,L=A(N.xAxis[0]);this.announcer.announce(b(R,{axisRangeDescription:L,chart:N},N))}}).bind(this,w),20)}}}),s(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{getPointAnnotationTexts:m}=a,{getAxisDescription:g,getSeriesFirstPointElement:v,getSeriesA11yElement:y,unhideChartElementFromAT:C}=l,{format:b,numberFormat:T}=h,{reverseChildNodes:S,stripHTMLTagsFromString:k}=r,{find:x,isNumber:A,isString:D,pick:w,defined:I}=p;function N(j){let O=j.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(O!==!1&&j.points&&j.points.length>=+O)}function q(j,O){let R=j.series,L=R.chart,G=L.options.accessibility.point||{},$=R.options.accessibility&&R.options.accessibility.point||{},F=R.tooltipOptions||{},H=L.options.lang;return A(O)?T(O,$.valueDecimals||G.valueDecimals||F.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):O}function Y(j,O){let R=j[O];return j.chart.langFormat("accessibility.series."+O+"Description",{name:g(R),series:j})}function X(j){let O=j.series,R=O.chart.series.length>1||O.options.name,L=function(H){let W=H.series,re=W.chart,he=W.options.accessibility,ie=he&&he.point&&he.point.valueDescriptionFormat||re.options.accessibility.point.valueDescriptionFormat,ae=w(W.xAxis&&W.xAxis.options.accessibility&&W.xAxis.options.accessibility.enabled,!re.angular&&W.type!=="flowmap"),Ce=ae?function(ge){let ke=function(_e){let J=_e.series,ne=J.chart,ue=J.options.accessibility&&J.options.accessibility.point||{},ye=ne.options.accessibility.point||{},we=J.xAxis&&J.xAxis.dateTime;if(we){let ze=we.getXDateFormat(_e.x||0,ne.options.tooltip.dateTimeLabelFormats),Ee=ue.dateFormatter&&ue.dateFormatter(_e)||ye.dateFormatter&&ye.dateFormatter(_e)||ue.dateFormat||ye.dateFormat||ze;return ne.time.dateFormat(Ee,_e.x||0,void 0)}}(ge),K=(ge.series.xAxis||{}).categories&&I(ge.category)&&(""+ge.category).replace("<br/>"," "),Q=I(ge.id)&&0>(""+ge.id).indexOf("highcharts-"),le="x, "+ge.x;return ge.name||ke||K||(Q?ge.id:le)}(H):"";return b(ie,{point:H,index:I(H.index)?H.index+1:"",xDescription:Ce,value:function(ge){let ke=ge.series,K=ke.chart.options.accessibility.point||{},Q=ke.chart.options.accessibility&&ke.chart.options.accessibility.point||{},le=ke.tooltipOptions||{},_e=Q.valuePrefix||K.valuePrefix||le.valuePrefix||"",J=Q.valueSuffix||K.valueSuffix||le.valueSuffix||"",ne=ge.value!==void 0?"value":"y",ue=q(ge,ge[ne]);return ge.isNull?ke.chart.langFormat("accessibility.series.nullPointValue",{point:ge}):ke.pointArrayMap?function(ye,we,ze){let Ee=we||"",Ie=ze||"",Fe=function(He){let Ae=q(ye,w(ye[He],ye.options[He]));return Ae!==void 0?He+": "+Ee+Ae+Ie:Ae};return ye.series.pointArrayMap.reduce(function(He,Ae){let xe=Fe(Ae);return xe?He+(He.length?", ":"")+xe:He},"")}(ge,_e,J):_e+ue+J}(H),separator:ae?", ":""},re)}(j),G=j.options&&j.options.accessibility&&j.options.accessibility.description,$=R?" "+O.name+".":"",F=function(H){let W=H.series.chart,re=m(H);return re.length?W.langFormat("accessibility.series.pointAnnotationsDescription",{point:H,annotations:re}):""}(j);return j.accessibility=j.accessibility||{},j.accessibility.valueDescription=L,L+(G?" "+G:"")+$+(F?" "+F:"")}function B(j){let O=j.chart,R=O.types||[],L=function(ae){let Ce=(ae.options.accessibility||{}).description;return Ce&&ae.chart.langFormat("accessibility.series.description",{description:Ce,series:ae})||""}(j),G=function(ae){return O[ae]&&O[ae].length>1&&j[ae]},$=j.index+1,F=Y(j,"xAxis"),H=Y(j,"yAxis"),W={seriesNumber:$,series:j,chart:O},re=R.length>1?"Combination":"",he=O.langFormat("accessibility.series.summary."+j.type+re,W)||O.langFormat("accessibility.series.summary.default"+re,W),ie=(G("yAxis")?" "+H+".":"")+(G("xAxis")?" "+F+".":"");return b(w(j.options.accessibility&&j.options.accessibility.descriptionFormat,O.options.accessibility.series.descriptionFormat,""),{seriesDescription:he,authorDescription:L?" "+L:"",axisDescription:ie,series:j,chart:O,seriesNumber:$},void 0)}return{defaultPointDescriptionFormatter:X,defaultSeriesDescriptionFormatter:B,describeSeries:function(j){let O=j.chart,R=v(j),L=y(j),G=O.is3d&&O.is3d();L&&(L.lastChild!==R||G||S(L),function($){let F=function(re){let he=re.options.accessibility||{};return!N(re)&&!he.exposeAsGroupOnly}($),H=function(re){let he=re.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(re.points&&(re.points.length<+he.pointNavigationEnabledThreshold||he.pointNavigationEnabledThreshold===!1))}($),W=$.chart.options.accessibility.point.describeNull;(F||H)&&$.points.forEach(re=>{let he=re.graphic&&re.graphic.element||function(ae){let Ce=ae.series,ge=Ce&&Ce.chart,ke=Ce&&Ce.is("sunburst"),K=ae.isNull,Q=ge&&ge.options.accessibility.point.describeNull;return K&&!ke&&Q}(re)&&function(ae){let Ce=ae.series,ge=function(_e){let J=_e.index;return _e.series&&_e.series.data&&I(J)&&x(_e.series.data,function(ne){return!!(ne&&ne.index!==void 0&&ne.index>J&&ne.graphic&&ne.graphic.element)})||null}(ae),ke=ge&&ge.graphic,K=ke?ke.parentGroup:Ce.graph||Ce.group,Q=ge?{x:w(ae.plotX,ge.plotX,0),y:w(ae.plotY,ge.plotY,0)}:{x:w(ae.plotX,0),y:w(ae.plotY,0)},le=function(_e,J){let ne=_e.series.chart.renderer.rect(J.x,J.y,1,1);return ne.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),ne}(ae,Q);if(K&&K.element)return ae.graphic=le,ae.hasMockGraphic=!0,le.add(K),K.element.insertBefore(le.element,ke?ke.element:null),le.element}(re),ie=re.options&&re.options.accessibility&&re.options.accessibility.enabled===!1;if(he){if(re.isNull&&!W){he.setAttribute("aria-hidden",!0);return}he.setAttribute("tabindex","-1"),$.chart.styledMode||(he.style.outline="none"),F&&!ie?function(ae,Ce){var le,_e,J;let ge=ae.series,ke=((le=ge.options.accessibility)==null?void 0:le.point)||{},K=ge.chart.options.accessibility.point||{},Q=k(D(ke.descriptionFormat)&&b(ke.descriptionFormat,ae,ge.chart)||((_e=ke.descriptionFormatter)==null?void 0:_e.call(ke,ae))||D(K.descriptionFormat)&&b(K.descriptionFormat,ae,ge.chart)||((J=K.descriptionFormatter)==null?void 0:J.call(K,ae))||X(ae),ge.chart.renderer.forExport);Ce.setAttribute("role","img"),Ce.setAttribute("aria-label",Q)}(re,he):he.setAttribute("aria-hidden",!0)}})}(j),C(O,L),function($){let F=$.chart,H=F.options.chart,W=H.options3d&&H.options3d.enabled,re=F.series.length>1,he=F.options.accessibility.series.describeSingleSeries,ie=($.options.accessibility||{}).exposeAsGroupOnly;return!(W&&re)&&(re||he||ie||N($))}(j)?function($,F){let H=$.options.accessibility||{},W=$.chart.options.accessibility,re=W.landmarkVerbosity;H.exposeAsGroupOnly?F.setAttribute("role","img"):re==="all"?F.setAttribute("role","region"):F.setAttribute("role","group"),F.setAttribute("tabindex","-1"),$.chart.styledMode||(F.style.outline="none"),F.setAttribute("aria-label",k(W.series.descriptionFormatter&&W.series.descriptionFormatter($)||B($),$.chart.renderer.forExport))}(j,L):L.removeAttribute("aria-label"))}}}),s(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,l,h,r,p,m){let{composed:g}=a,{addEvent:v,defined:y,pushUnique:C}=l,{getChartTitle:b}=r,{defaultPointDescriptionFormatter:T,defaultSeriesDescriptionFormatter:S}=m;function k(A){return!!A.options.accessibility.announceNewData.enabled}class x{constructor(D){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=D}init(){let D=this.chart,w=D.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new p,this.announcer=new h(D,w),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let D=this,w=this.chart,I=this.eventProvider;I.addEvent(w,"afterApplyDrilldown",function(){D.lastAnnouncementTime=0}),I.addEvent(w,"afterAddSeries",function(N){D.onSeriesAdded(N.series)}),I.addEvent(w,"redraw",function(){D.announceDirtyData()})}onSeriesAdded(D){k(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[D.name+D.index]=D,this.dirty.newSeries=y(this.dirty.newSeries)?void 0:D)}announceDirtyData(){let D=this.chart,w=this;if(D.options.accessibility.announceNewData&&this.dirty.hasDirty){let I=this.dirty.newPoint;I&&(I=function(N){let q=N.series.data.filter(Y=>N.x===Y.x&&N.y===Y.y);return q.length===1?q[0]:N}(I)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>w.dirty.allSeries[N]),this.dirty.newSeries,I),this.dirty={allSeries:{}}}}queueAnnouncement(D,w,I){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let q=+new Date,Y=q-this.lastAnnouncementTime,X=Math.max(0,N.minAnnounceInterval-Y),B=function(O,R){let L=(O||[]).concat(R||[]).reduce((G,$)=>(G[$.name+$.index]=$,G),{});return Object.keys(L).map(G=>L[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,D),j=this.buildAnnouncementMessage(B,w,I);j&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:q,message:j,series:B},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},X))}}buildAnnouncementMessage(D,w,I){let N=this.chart,q=N.options.accessibility.announceNewData;if(q.announcementFormatter){let j=q.announcementFormatter(D,w,I);if(j!==!1)return j.length?j:null}let Y=a.charts&&a.charts.length>1?"Multiple":"Single",X=w?"newSeriesAnnounce"+Y:I?"newPointAnnounce"+Y:"newDataAnnounce",B=b(N);return N.langFormat("accessibility.announceNewData."+X,{chartTitle:B,seriesDesc:w?S(w):null,pointDesc:I?T(I):null,point:I,series:w})}}return function(A){function D(I){var Y;let N=this.chart,q=(Y=N.accessibility)==null?void 0:Y.components.series.newDataAnnouncer;q&&q.chart===N&&k(N)&&(q.dirty.newPoint=y(q.dirty.newPoint)?void 0:I.point)}function w(){var q;let I=this.chart,N=(q=I.accessibility)==null?void 0:q.components.series.newDataAnnouncer;N&&N.chart===I&&k(I)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}A.compose=function(I){C(g,"A11y.NDA")&&(v(I,"addPoint",D),v(I,"updatedData",w))}}(x),x}),s(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,l,h,r,p){let{doc:m}=a,{attr:g,css:v,merge:y}=l,{fireEventOnWrappedOrUnwrappedElement:C}=r,{cloneMouseEvent:b,cloneTouchEvent:T,getFakeMouseEvent:S,removeElement:k}=p;return class{constructor(x,A,D="button",w,I){this.chart=x,this.target=A,this.eventProvider=new h;let N=this.innerElement=m.createElement(D),q=this.element=w?m.createElement(w):N;x.styledMode||this.hideElementVisually(N),w&&(w!=="li"||x.styledMode||(q.style.listStyle="none"),q.appendChild(N),this.element=q),this.updateTarget(A,I)}click(){let x=this.getTargetPosition();x.x+=x.width/2,x.y+=x.height/2;let A=S("click",x);C(this.target.click,A)}updateTarget(x,A){this.target=x,this.updateCSSClassName();let D=A||{};Object.keys(D).forEach(I=>{D[I]===null&&delete D[I]});let w=this.getTargetAttr(x.click,"aria-label");g(this.innerElement,y(w?{"aria-label":w}:{},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,x.click),this.refreshPosition()}refreshPosition(){let x=this.getTargetPosition();v(this.innerElement,{width:(x.width||1)+"px",height:(x.height||1)+"px",left:(Math.round(x.x)||0)+"px",top:(Math.round(x.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),k(this.element)}updateCSSClassName(){let x=N=>N.indexOf("highcharts-no-tooltip")>-1,A=this.chart.legend,D=A.group&&A.group.div,w=x(D&&D.className||""),I=x(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=w||I?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(x,A){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(D=>{let w=D.indexOf("touch")===0;this.eventProvider.addEvent(x,D,I=>{let N=w?T(I):b(I);A&&C(A,N),I.stopPropagation(),w||I.preventDefault()},{passive:!1})})}hideElementVisually(x){v(x,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let x=this.target.click,A=x.element?x.element:x,D=this.target.visual||A,w=this.chart.renderTo,I=this.chart.pointer;if(w&&(D!=null&&D.getBoundingClientRect)&&I){let N=D.getBoundingClientRect(),q=I.getChartPosition();return{x:(N.left-q.left)/q.scaleX,y:(N.top-q.top)/q.scaleY,width:N.right/q.scaleX-N.left/q.scaleX,height:N.bottom/q.scaleY-N.top/q.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(x,A){return x.element?x.element.getAttribute(A):x.getAttribute(A)}}}),s(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(a,l,h,r,p,m){let{doc:g}=a,{attr:v,css:y}=l,{unhideChartElementFromAT:C}=h,{removeChildNodes:b}=p;return class{constructor(T){this.chart=T,this.domElementProvider=new r,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(T,S,k="button",x){let A=this.groups[T];if(!A)throw Error("ProxyProvider.addProxyElement: Invalid group key "+T);let D=A.type==="ul"||A.type==="ol"?"li":void 0,w=new m(this.chart,S,k,D,x);return A.proxyContainerElement.appendChild(w.element),A.proxyElements.push(w),w}addGroup(T,S="div",k){let x,A=this.groups[T];if(A)return A.groupElement;let D=this.domElementProvider.createElement(S);return k&&k.role&&S!=="div"?(x=this.domElementProvider.createElement("div")).appendChild(D):x=D,x.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+T.replace(/\W/g,"-"),this.groups[T]={proxyContainerElement:D,groupElement:x,type:S,proxyElements:[]},v(x,k||{}),S==="ul"&&D.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(x),this.updateGroupOrder(this.groupOrder),x}updateGroupAttrs(T,S){let k=this.groups[T];if(!k)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+T);v(k.groupElement,S)}updateGroupOrder(T){if(this.groupOrder=T.slice(),this.isDOMOrderGroupOrder())return;let S=T.indexOf("series"),k=S>-1?T.slice(0,S):T,x=S>-1?T.slice(S+1):[],A=g.activeElement;["before","after"].forEach(D=>{let w=this[D==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];b(w),(D==="before"?k:x).forEach(I=>{let N=this.groups[I];N&&w.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(A)||this.afterChartProxyPosContainer.contains(A))&&A&&A.focus&&A.focus()}clearGroup(T){let S=this.groups[T];if(!S)throw Error("ProxyProvider.clearGroup: Invalid group key "+T);b(S.proxyContainerElement)}removeGroup(T){let S=this.groups[T];S&&(this.domElementProvider.removeElement(S.groupElement),S.groupElement!==S.proxyContainerElement&&this.domElementProvider.removeElement(S.proxyContainerElement),delete this.groups[T])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(T){let S=this.groups[T];S&&S.proxyElements.forEach(k=>k.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(T){let S=this.domElementProvider.createElement("div");return S.setAttribute("aria-hidden","false"),S.className="highcharts-a11y-proxy-container"+(T?"-"+T:""),y(S,{top:"0",left:"0"}),this.chart.styledMode||(S.style.whiteSpace="nowrap",S.style.position="absolute"),S}getCurrentGroupOrderInDOM(){let T=A=>{let D=Object.keys(this.groups),w=D.length;for(;w--;){let I=D[w],N=this.groups[I];if(N&&A===N.groupElement)return I}},S=A=>{let D=[],w=A.children;for(let I=0;I<w.length;++I){let N=T(w[I]);N&&D.push(N)}return D},k=S(this.beforeChartProxyPosContainer),x=S(this.afterChartProxyPosContainer);return k.push("series"),k.concat(x)}isDOMOrderGroupOrder(){let T=this.getCurrentGroupOrderInDOM(),S=this.groupOrder.filter(x=>x==="series"||!!this.groups[x]),k=T.length;if(k!==S.length)return!1;for(;k--;)if(T[k]!==S[k])return!1;return!0}updatePosContainerPositions(){let T=this.chart;if(T.renderer.forExport)return;let S=T.renderer.box;T.container.insertBefore(this.afterChartProxyPosContainer,S.nextSibling),T.container.insertBefore(this.beforeChartProxyPosContainer,S),C(this.chart,this.afterChartProxyPosContainer),C(this.chart,this.beforeChartProxyPosContainer)}}}),s(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{unhideChartElementFromAT:m,getAxisRangeDescription:g}=h,{addEvent:v,attr:y}=p;class C extends a{init(){let T=this.chart;this.announcer=new l(T,"polite")}onChartUpdate(){let T=this.chart,S=this,k=T.rangeSelector;k&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),k.buttons&&k.buttons.length&&k.buttons.forEach(x=>{S.setRangeButtonAttrs(x)}),k.maxInput&&k.minInput&&["minInput","maxInput"].forEach(function(x,A){let D=k[x];D&&(m(T,D),S.setRangeInputAttrs(D,"accessibility.rangeSelector."+(A?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let T=this.chart,S=T.rangeSelector,k=S&&S.dropdown,x=S&&S.buttons||[],A=D=>D.setAttribute("aria-hidden",!0);S&&S.hasVisibleDropdown&&k?(m(T,k),x.forEach(D=>A(D.element))):(k&&A(k),x.forEach(D=>m(T,D.element)))}setDropdownAttrs(){let T=this.chart,S=T.rangeSelector&&T.rangeSelector.dropdown;if(S){let k=T.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:T.options.lang.rangeSelectorZoom});S.setAttribute("aria-label",k),S.setAttribute("tabindex",-1)}}setRangeButtonAttrs(T){y(T.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(T,S){let k=this.chart;y(T,{tabindex:-1,"aria-label":k.langFormat(S,{chart:k})})}onButtonNavKbdArrowKey(T,S){let k=T.response,x=this.keyCodes,A=this.chart,D=A.options.accessibility.keyboardNavigation.wrapAround,w=S===x.left||S===x.up?-1:1;return A.highlightRangeSelectorButton(A.highlightedRangeSelectorItemIx+w)?k.success:D?(T.init(w),k.success):k[w>0?"next":"prev"]}onButtonNavKbdClick(T){let S=T.response,k=this.chart;return k.oldRangeSelectorItemState!==3&&this.fakeClickEvent(k.rangeSelector.buttons[k.highlightedRangeSelectorItemIx].element),S.success}onAfterBtnClick(){let T=this.chart,S=g(T.xAxis[0]),k=T.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:T,axisRangeDescription:S});k&&this.announcer.announce(k)}onInputKbdMove(T){let S=this.chart,k=S.rangeSelector,x=S.highlightedInputRangeIx=(S.highlightedInputRangeIx||0)+T;if(x>1||x<0){if(S.accessibility)return S.accessibility.keyboardNavigation.exiting=!0,S.accessibility.keyboardNavigation.tabindexContainer.focus(),S.accessibility.keyboardNavigation.move(T)}else if(k){let A=k[x?"maxDateBox":"minDateBox"],D=k[x?"maxInput":"minInput"];A&&D&&S.setFocusToElement(A,D)}return!0}onInputNavInit(T){let S=this,k=this.chart,x=T>0?0:1,A=k.rangeSelector,D=A&&A[x?"maxDateBox":"minDateBox"],w=A&&A.minInput,I=A&&A.maxInput;if(k.highlightedInputRangeIx=x,D&&w&&I){k.setFocusToElement(D,x?I:w),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=X=>{(X.which||X.keyCode)===this.keyCodes.tab&&S.onInputKbdMove(X.shiftKey?-1:1)&&(X.preventDefault(),X.stopPropagation())},q=v(w,"keydown",N),Y=v(I,"keydown",N);this.removeInputKeydownHandler=()=>{q(),Y()}}}onInputNavTerminate(){let T=this.chart.rangeSelector||{};T.maxInput&&T.hideInput("max"),T.minInput&&T.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let T=this.chart,S=T.rangeSelector,k=S&&S.dropdown;S&&k&&(T.setFocusToElement(S.buttonGroup,k),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=v(k,"keydown",x=>{let A=(x.which||x.keyCode)===this.keyCodes.tab,D=T.accessibility;A&&(x.preventDefault(),x.stopPropagation(),D&&(D.keyboardNavigation.tabindexContainer.focus(),D.keyboardNavigation.move(x.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let T=this.chart,S=this.keyCodes,k=this;return new r(T,{keyCodeMap:[[[S.left,S.right,S.up,S.down],function(x){return k.onButtonNavKbdArrowKey(this,x)}],[[S.enter,S.space],function(){return k.onButtonNavKbdClick(this)}]],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.buttons&&T.rangeSelector.buttons.length)},init:function(x){let A=T.rangeSelector;if(A&&A.hasVisibleDropdown)k.initDropdownNav();else if(A){let D=A.buttons.length-1;T.highlightRangeSelectorButton(x>0?0:D)}},terminate:function(){k.removeDropdownKeydownHandler&&(k.removeDropdownKeydownHandler(),delete k.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let T=this.chart,S=this;return new r(T,{keyCodeMap:[],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.inputGroup&&T.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&T.options.rangeSelector.inputEnabled!==!1&&T.rangeSelector.minInput&&T.rangeSelector.maxInput)},init:function(k){S.onInputNavInit(k)},terminate:function(){S.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(b){function T(k){let x=this.rangeSelector&&this.rangeSelector.buttons||[],A=this.highlightedRangeSelectorItemIx,D=this.rangeSelector&&this.rangeSelector.selected;return A!==void 0&&x[A]&&A!==D&&x[A].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=k,!!x[k]&&(this.setFocusToElement(x[k].box,x[k].element),k!==D&&(this.oldRangeSelectorItemState=x[k].state,x[k].setState(1)),!0)}function S(){let k=this.chart.accessibility;if(k&&k.components.rangeSelector)return k.components.rangeSelector.onAfterBtnClick()}b.compose=function(k,x){let A=k.prototype;A.highlightRangeSelectorButton||(A.highlightRangeSelectorButton=T,v(x,"afterBtnClick",S))}}(C),C}),s(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){var h;let{composed:r}=a,{addEvent:p,merge:m,pushUnique:g}=l;return function(v){function y(A){m(!0,A,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function C(A){return A.marker.states&&A.marker.states.normal&&A.marker.states.normal.opacity}function b(A){return!!(A._hasPointMarkers&&A.points&&A.points.length)}function T(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),b(this)&&this.points.forEach(A=>{A.graphic&&(A.graphic[A.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),A.graphic[A.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function S(A){this.resetA11yMarkerOptions=m(A.options.marker||{},this.userOptions.marker||{})}function k(){let A=this.options;(function(D){let w=D.chart.options.accessibility.enabled,I=(D.options.accessibility&&D.options.accessibility.enabled)!==!1;return w&&I&&function(N){let q=N.chart.options.accessibility;return N.points.length<q.series.pointDescriptionEnabledThreshold||q.series.pointDescriptionEnabledThreshold===!1}(D)})(this)?(A.marker&&A.marker.enabled===!1&&(this.a11yMarkersForced=!0,y(this.options)),b(this)&&function(D){let w=D.points.length;for(;w--;){let I=D.points[w],N=I.options,q=I.hasForcedA11yMarker;if(delete I.hasForcedA11yMarker,N.marker){let Y=q&&C(N)===0;N.marker.enabled&&!Y?(m(!0,N.marker,{states:{normal:{opacity:C(N)||1}}}),I.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(y(N),I.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(D){let w=D.resetA11yMarkerOptions;if(w){let I=w.states&&w.states.normal&&w.states.normal.opacity;D.userOptions&&D.userOptions.marker&&(D.userOptions.marker.enabled=!0),D.update({marker:{enabled:w.enabled,states:{normal:{opacity:I}}}})}}(this),delete this.resetA11yMarkerOptions)}function x(){this.boosted&&this.a11yMarkersForced&&(m(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}v.compose=function(A){g(r,"A11y.FM")&&(p(A,"afterSetOptions",S),p(A,"render",k),p(A,"afterRender",T),p(A,"renderCanvas",x))}}(h||(h={})),h}),s(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(a,l,h,r,p,m,g,v){let{seriesTypes:y}=h,{doc:C}=r,{defined:b,fireEvent:T}=p,{getPointFromXY:S,getSeriesFromName:k,scrollAxisToPoint:x}=v;function A(X){let B=X.index,j=X.series.points,O=j.length;if(j[B]===X)return B;for(;O--;)if(j[O]===X)return O}function D(X){let B=X.chart.options.accessibility.keyboardNavigation.seriesNavigation,j=X.options.accessibility||{},O=j.keyboardNavigation;return O&&O.enabled===!1||j.enabled===!1||X.options.enableMouseTracking===!1||!X.visible||B.pointNavigationEnabledThreshold&&+B.pointNavigationEnabledThreshold<=X.points.length}function w(X){let B=X.series.chart.options.accessibility,j=X.options.accessibility&&X.options.accessibility.enabled===!1;return X.isNull&&B.keyboardNavigation.seriesNavigation.skipNullPoints||X.visible===!1||X.isInside===!1||j||D(X.series)}function I(X){let B=X.series||[],j=B.length;for(let O=0;O<j;++O)if(!D(B[O])){let R=function(L){let G=L.points||[],$=G.length;for(let F=0;F<$;++F)if(!w(G[F]))return G[F];return null}(B[O]);if(R)return R}return null}function N(X){let B=X.series.length,j=!1;for(;B--&&(X.highlightedPoint=X.series[B].points[X.series[B].points.length-1],!(j=X.series[B].highlightNextValidPoint())););return j}function q(X){delete X.highlightedPoint;let B=I(X);return!!B&&B.highlight()}class Y{constructor(B,j){this.keyCodes=j,this.chart=B}init(){let B=this,j=this.chart,O=this.eventProvider=new g;O.addEvent(l,"destroy",function(){return B.onSeriesDestroy(this)}),O.addEvent(j,"afterApplyDrilldown",function(){(function(R){let L=I(R);L&&L.highlight(!1)})(this)}),O.addEvent(j,"drilldown",function(R){let L=R.point,G=L.series;B.lastDrilledDownPoint={x:L.x,y:L.y,seriesName:G?G.name:""}}),O.addEvent(j,"drillupall",function(){setTimeout(function(){B.onDrillupAll()},10)}),O.addEvent(a,"afterSetState",function(){let R=this.graphic&&this.graphic.element,L=C.activeElement,G=L&&L.getAttribute("class"),$=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;j.highlightedPoint===this&&L!==R&&!$&&R&&R.focus&&R.focus()})}onDrillupAll(){let B,j=this.lastDrilledDownPoint,O=this.chart,R=j&&k(O,j.seriesName);j&&R&&b(j.x)&&b(j.y)&&(B=S(R,j.x,j.y)),B=B||I(O),O.container&&O.container.focus(),B&&B.highlight&&B.highlight(!1)}getKeyboardNavigationHandler(){let B=this,j=this.keyCodes,O=this.chart,R=O.inverted;return new m(O,{keyCodeMap:[[R?[j.up,j.down]:[j.left,j.right],function(L){return B.onKbdSideways(this,L)}],[R?[j.left,j.right]:[j.up,j.down],function(L){return B.onKbdVertical(this,L)}],[[j.enter,j.space],function(L,G){var F;let $=O.highlightedPoint;if($){let{plotLeft:H,plotTop:W}=this.chart,{plotX:re=0,plotY:he=0}=$;G={...G,chartX:H+re,chartY:W+he,point:$,target:((F=$.graphic)==null?void 0:F.element)||G.target},T($.series,"click",G),$.firePointEvent("click",G)}return this.response.success}],[[j.home],function(){return q(O),this.response.success}],[[j.end],function(){return N(O),this.response.success}],[[j.pageDown,j.pageUp],function(L){return O.highlightAdjacentSeries(L===j.pageDown),this.response.success}]],init:function(){return B.onHandlerInit(this)},validate:function(){return!!I(O)},terminate:function(){return B.onHandlerTerminate()}})}onKbdSideways(B,j){let O=this.keyCodes,R=j===O.right||j===O.down;return this.attemptHighlightAdjacentPoint(B,R)}onHandlerInit(B){let j=this.chart;return j.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&j.highlightedPoint?j.highlightedPoint.highlight():q(j),B.response.success}onKbdVertical(B,j){let O=this.chart,R=this.keyCodes,L=j===R.down||j===R.right,G=O.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(B,L);let $=O.highlightedPoint&&O.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return O[$](L),B.response.success}onHandlerTerminate(){let B=this.chart,j=B.options.accessibility.keyboardNavigation;B.tooltip&&B.tooltip.hide(0);let O=B.highlightedPoint&&B.highlightedPoint.series;O&&O.onMouseOut&&O.onMouseOut(),B.highlightedPoint&&B.highlightedPoint.onMouseOut&&B.highlightedPoint.onMouseOut(),j.seriesNavigation.rememberPointFocus||delete B.highlightedPoint}attemptHighlightAdjacentPoint(B,j){let O=this.chart,R=O.options.accessibility.keyboardNavigation.wrapAround;return O.highlightAdjacentPoint(j)||R&&(j?q(O):N(O))?B.response.success:B.response[j?"next":"prev"]}onSeriesDestroy(B){let j=this.chart;j.highlightedPoint&&j.highlightedPoint.series===B&&(delete j.highlightedPoint,j.focusElement&&j.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(X){function B(G){let $,F,H=this.series,W=this.highlightedPoint,re=W&&A(W)||0,he=W&&W.series.points||[],ie=this.series&&this.series[this.series.length-1],ae=ie&&ie.points&&ie.points[ie.points.length-1];if(!H[0]||!H[0].points)return!1;if(W){if($=H[W.series.index+(G?1:-1)],(F=he[re+(G?1:-1)])||!$||(F=$.points[G?0:$.points.length-1]),!F)return!1}else F=G?H[0].points[0]:ae;return w(F)?(D($=F.series)?this.highlightedPoint=G?$.points[$.points.length-1]:$.points[0]:this.highlightedPoint=F,this.highlightAdjacentPoint(G)):F.highlight()}function j(G){let $=this.highlightedPoint,F=1/0,H;return!!(b($.plotX)&&b($.plotY))&&(this.series.forEach(W=>{D(W)||W.points.forEach(re=>{if(!b(re.plotY)||!b(re.plotX)||re===$)return;let he=re.plotY-$.plotY,ie=Math.abs(re.plotX-$.plotX),ae=Math.abs(he)*Math.abs(he)+ie*ie*4;W.yAxis&&W.yAxis.reversed&&(he*=-1),!(he<=0&&G||he>=0&&!G||ae<5||w(re))&&ae<F&&(F=ae,H=re)})}),!!H&&H.highlight())}function O(G){let $,F,H,W=this.highlightedPoint,re=this.series&&this.series[this.series.length-1],he=re&&re.points&&re.points[re.points.length-1];return this.highlightedPoint?!!(($=this.series[W.series.index+(G?-1:1)])&&(F=function(ie,ae,Ce,ge){let ke=1/0,K,Q,le,_e=ae.points.length,J=ne=>!(b(ne.plotX)&&b(ne.plotY));if(!J(ie)){for(;_e--;)!J(K=ae.points[_e])&&(le=(ie.plotX-K.plotX)*(ie.plotX-K.plotX)*4+(ie.plotY-K.plotY)*(ie.plotY-K.plotY)*1)<ke&&(ke=le,Q=_e);return b(Q)?ae.points[Q]:void 0}}(W,$)))&&(D($)?(F.highlight(),(H=this.highlightAdjacentSeries(G))?H:(W.highlight(),!1)):(F.highlight(),F.series.highlightNextValidPoint())):($=G?this.series&&this.series[0]:re,!!(F=G?$&&$.points&&$.points[0]:he)&&F.highlight())}function R(G=!0){var W,re;let $=this.series.chart,F=(re=(W=$.tooltip)==null?void 0:W.label)==null?void 0:re.element;!this.isNull&&G?this.onMouseOver():$.tooltip&&$.tooltip.hide(0),x(this),this.graphic&&($.setFocusToElement(this.graphic),!G&&$.focusElement&&$.focusElement.removeFocusBorder()),$.highlightedPoint=this;let H=F==null?void 0:F.getBoundingClientRect().top;if(F&&H&&H<0){let he=window.scrollY;window.scrollTo({behavior:"smooth",top:he+H})}return this}function L(){let G=this.chart.highlightedPoint,$=(G&&G.series)===this?A(G):0,F=this.points,H=F.length;if(F&&H){for(let W=$;W<H;++W)if(!w(F[W]))return F[W].highlight();for(let W=$;W>=0;--W)if(!w(F[W]))return F[W].highlight()}return!1}X.compose=function(G,$,F){let H=G.prototype,W=$.prototype,re=F.prototype;H.highlightAdjacentPoint||(H.highlightAdjacentPoint=B,H.highlightAdjacentPointVertical=j,H.highlightAdjacentSeries=O,W.highlight=R,re.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(he=>{y[he]&&(y[he].prototype.keyboardMoveVertical=!1)}),re.highlightNextValidPoint=L)}}(Y),Y}),s(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(a,l,h,r,p,m){let{hideSeriesFromAT:g}=l,{describeSeries:v}=p;return class extends a{static compose(y,C,b){r.compose(b),h.compose(b),m.compose(y,C,b)}init(){this.newDataAnnouncer=new r(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new m(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let y=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===y.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(y){y.labelBySeries&&y.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(y){(y.options.accessibility&&y.options.accessibility.enabled)!==!1&&y.visible&&y.getPointsCollection().length!==0?v(y):g(y)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),s(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{unhideChartElementFromAT:m}=l,{getFakeMouseEvent:g}=h,{attr:v,pick:y}=p;return class extends a{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let C=this,b=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(T=>{C.addEvent(b,T,function(){C.updateProxyOverlays()})})}onChartUpdate(){let C=this.chart,b=this;C.mapNavigation&&C.mapNavigation.navButtons.forEach((T,S)=>{m(C,T.element),b.setMapNavButtonAttrs(T.element,"accessibility.zoom.mapZoom"+(S?"Out":"In"))})}setMapNavButtonAttrs(C,b){let T=this.chart;v(C,{tabindex:-1,role:"button","aria-label":T.langFormat(b,{chart:T})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let C=this.chart;if(this.proxyProvider.clearGroup("zoom"),C.resetZoomButton&&this.createZoomProxyButton(C.resetZoomButton,"resetZoomProxyButton",C.langFormat("accessibility.zoom.resetZoomButton",{chart:C})),C.drillUpButton&&C.breadcrumbs&&C.breadcrumbs.list){let b=C.breadcrumbs.list[C.breadcrumbs.list.length-1];this.createZoomProxyButton(C.drillUpButton,"drillUpProxyButton",C.langFormat("accessibility.drillUpButton",{chart:C,buttonText:C.breadcrumbs.getButtonText(b)}))}}createZoomProxyButton(C,b,T){this[b]=this.proxyProvider.addProxyElement("zoom",{click:C},"button",{"aria-label":T,tabindex:-1})}getMapZoomNavigation(){let C=this.keyCodes,b=this.chart,T=this;return new r(b,{keyCodeMap:[[[C.up,C.down,C.left,C.right],function(S){return T.onMapKbdArrow(this,S)}],[[C.tab],function(S,k){return T.onMapKbdTab(this,k)}],[[C.space,C.enter],function(){return T.onMapKbdClick(this)}]],validate:function(){return!!(b.mapView&&b.mapNavigation&&b.mapNavigation.navButtons.length)},init:function(S){return T.onMapNavInit(S)}})}onMapKbdArrow(C,b){let T=this.chart,S=this.keyCodes,k=T.container,x=b===S.up||b===S.down,A=b===S.left||b===S.up?1:-1,D=(x?T.plotHeight:T.plotWidth)/10*A,w=10*Math.random(),I={x:k.offsetLeft+T.plotLeft+T.plotWidth/2+w,y:k.offsetTop+T.plotTop+T.plotHeight/2+w},N=x?{x:I.x,y:I.y+D}:{x:I.x+D,y:I.y};return[g("mousedown",I),g("mousemove",N),g("mouseup",N)].forEach(q=>k.dispatchEvent(q)),C.response.success}onMapKbdTab(C,b){let T=this.chart,S=C.response,k=b.shiftKey,x=k&&!this.focusedMapNavButtonIx||!k&&this.focusedMapNavButtonIx;if(T.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),x)return T.mapView&&T.mapView.zoomBy(),S[k?"prev":"next"];this.focusedMapNavButtonIx+=k?-1:1;let A=T.mapNavigation.navButtons[this.focusedMapNavButtonIx];return T.setFocusToElement(A.box,A.element),A.setState(2),S.success}onMapKbdClick(C){let b=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(b),C.response.success}onMapNavInit(C){let b=this.chart,T=b.mapNavigation.navButtons[0],S=b.mapNavigation.navButtons[1],k=C>0?T:S;b.setFocusToElement(k.box,k.element),k.setState(2),this.focusedMapNavButtonIx=C>0?0:1}simpleButtonNavigation(C,b,T){let S=this.keyCodes,k=this,x=this.chart;return new r(x,{keyCodeMap:[[[S.tab,S.up,S.down,S.left,S.right],function(A,D){let w=A===S.tab&&D.shiftKey||A===S.left||A===S.up;return this.response[w?"prev":"next"]}],[[S.space,S.enter],function(){return y(T(this,x),this.response.success)}]],validate:function(){return x[C]&&x[C].box&&k[b].innerElement},init:function(){x.setFocusToElement(x[C].box,k[b].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(C,b){b.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(C,b){return b.drillUp(),C.response.prev}),this.getMapZoomNavigation()]}}}),s(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(a){let{doc:l,isMS:h,win:r}=a;return{isHighContrastModeActive:function(){let p=/(Edg)/.test(r.navigator.userAgent);if(r.matchMedia&&p)return r.matchMedia("(-ms-high-contrast: active)").matches;if(h&&r.getComputedStyle){let m=l.createElement("div");m.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",l.body.appendChild(m);let g=(m.currentStyle||r.getComputedStyle(m)).backgroundImage;return l.body.removeChild(m),g==="none"}return r.matchMedia&&r.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(p){var v;p.highContrastModeActive=!0;let m=p.options.accessibility.highContrastTheme;p.update(m,!1);let g=((v=m.colors)==null?void 0:v.length)>1;p.series.forEach(function(y){let C=m.plotOptions[y.type]||{},b=g&&y.colorIndex!==void 0?m.colors[y.colorIndex]:C.color||"window",T={color:C.color||"windowText",colors:g?m.colors:[C.color||"windowText"],borderColor:C.borderColor||"window",fillColor:b};y.update(T,!1),y.points&&y.points.forEach(function(S){S.options&&S.options.color&&S.update({color:C.color||"windowText",borderColor:C.borderColor||"window"},!1)})}),p.redraw()}}}),s(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),s(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),s(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),s(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(a){let{error:l,pick:h}=a;function r(m,g,v){let y=m,C,b=0;for(;b<g.length-1;++b)y=y[C=g[b]]=h(y[C],{});y[g[g.length-1]]=v}function p(m,g,v,y){function C(S,k){return k.reduce(function(x,A){return x[A]},S)}let b=C(m.options,g),T=C(m.options,v);Object.keys(y).forEach(function(S){let k=b[S];k!==void 0&&(r(T,y[S],k),l(32,!1,m,{[g.join(".")+"."+S]:v.join(".")+"."+y[S].join(".")}))})}return function(m){(function(g){let v=g.options.chart,y=g.options.accessibility||{};["description","typeDescription"].forEach(function(C){v[C]&&(y[C]=v[C],l(32,!1,g,{[`chart.${C}`]:`use accessibility.${C}`}))})})(m),function(g){g.axes.forEach(function(v){let y=v.options;y&&y.description&&(y.accessibility=y.accessibility||{},y.accessibility.description=y.description,l(32,!1,g,{"axis.description":"use axis.accessibility.description"}))})}(m),m.series&&function(g){let v={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};g.series.forEach(function(y){Object.keys(v).forEach(function(C){let b=y.options[C];C==="accessibility.pointDescriptionFormatter"&&(b=y.options.accessibility&&y.options.accessibility.pointDescriptionFormatter),b!==void 0&&(r(y.options,v[C],C==="skipKeyboardNavigation"?!b:b),l(32,!1,g,{[`series.${C}`]:"series."+v[C].join(".")}))})})}(m),p(m,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),p(m,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),p(m,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),s(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(a,l,h,r,p,m,g,v,y,C,b,T,S,k,x,A,D,w,I,N,q,Y){let{defaultOptions:X}=a,{doc:B}=l,{addEvent:j,extend:O,fireEvent:R,merge:L}=h,{removeElement:G}=r;class ${constructor(H){this.init(H)}init(H){if(this.chart=H,!B.addEventListener){this.zombie=!0,this.components={},H.renderTo.setAttribute("aria-hidden",!0);return}Y(H),this.proxyProvider=new k(this.chart),this.initComponents(),this.keyboardNavigation=new y(H,this.components)}initComponents(){let H=this.chart,W=this.proxyProvider,re=H.options.accessibility;this.components={container:new m,infoRegions:new v,legend:new C,chartMenu:new b,rangeSelector:new x,series:new A,zoom:new D,navigator:new T},re.customComponents&&O(this.components,re.customComponents);let he=this.components;this.getComponentOrder().forEach(function(ie){he[ie].initBase(H,W),he[ie].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(H=>H!=="series")):Object.keys(this.components):[]}update(){let H=this.components,W=this.chart,re=W.options.accessibility;R(W,"beforeA11yUpdate"),W.types=this.getChartTypes();let he=re.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(he),this.getComponentOrder().forEach(function(ie){H[ie].onChartUpdate(),R(W,"afterA11yComponentUpdate",{name:ie,component:H[ie]})}),this.keyboardNavigation.update(he),!W.highContrastModeActive&&re.highContrastMode!==!1&&(w.isHighContrastModeActive()||re.highContrastMode===!0)&&w.setHighContrastTheme(W),R(W,"afterA11yUpdate",{accessibility:this})}destroy(){let H=this.chart||{},W=this.components;Object.keys(W).forEach(function(re){W[re].destroy(),W[re].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),H.announcerContainer&&G(H.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),H.renderTo&&H.renderTo.setAttribute("aria-hidden",!0),H.focusElement&&H.focusElement.removeFocusBorder()}getChartTypes(){let H={};return this.chart.series.forEach(function(W){H[W.type]=1}),Object.keys(H)}}return function(F){function H(){this.accessibility&&this.accessibility.destroy()}function W(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let ae=this.accessibility;ae&&!ae.zombie&&(ae.proxyProvider.updateProxyElementPositions(),ae.getComponentOrder().forEach(function(Ce){ae.components[Ce].onChartRender()}))}function re(ae){let Ce=ae.options.accessibility;Ce&&(Ce.customComponents&&(this.options.accessibility.customComponents=Ce.customComponents,delete Ce.customComponents),L(!0,this.options.accessibility,Ce),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function he(){let ae=this.accessibility,Ce=this.options.accessibility,ge=this.renderer.boxWrapper.element,ke=this.title;if(Ce&&Ce.enabled)ae&&!ae.zombie?ae.update():(this.accessibility=ae=new F(this),ae&&!ae.zombie&&ae.update(),ge.getAttribute("role")==="img"&&ge.removeAttribute("role"));else if(ae)ae.destroy&&ae.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(ke&&ke.element.textContent||"").replace(/</g,"&lt;")),ge.setAttribute("aria-hidden",!0);let K=document.getElementsByClassName("highcharts-description")[0];K&&(K.setAttribute("aria-hidden",!1),K.classList.remove("highcharts-linked-description"))}}function ie(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}F.i18nFormat=p.i18nFormat,F.compose=function(ae,Ce,ge,ke,K,Q){y.compose(ae),S.compose(ke),C.compose(ae,Ce),b.compose(ae),A.compose(ae,ge,ke),p.compose(ae),g.compose(ae,K),Q&&x.compose(ae,Q);let le=ae.prototype;le.updateA11yEnabled||(le.updateA11yEnabled=he,j(ae,"destroy",H),j(ae,"render",W),j(ae,"update",re),["addSeries","init"].forEach(_e=>{j(ae,_e,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(_e=>{j(ae,_e,function(){let J=this.accessibility;J&&!J.zombie&&J.update()})}),j(ge,"update",ie),["update","updatedData","remove"].forEach(_e=>{j(ke,_e,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}($),L(!0,X,N,{accessibility:{highContrastTheme:I},lang:q}),$}),s(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,l,h,r,p,m,g){return a.i18nFormat=l.i18nFormat,a.A11yChartUtilities=r,a.A11yHTMLUtilities=p,a.AccessibilityComponent=h,a.KeyboardNavigationHandler=m,a.SeriesAccessibilityDescriber=g,l.compose(a.Chart,a.Legend,a.Point,a.Series,a.SVGElement,a.RangeSelector),a})})})(yS);var UO=yS.exports;const $O=ld(UO);var xS={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function s(a,l,h,r){a.hasOwnProperty(l)||(a[l]=r.apply(null,h),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:a[l]}})))}s(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(a){let{addEvent:l,correctFloat:h,defined:r,pick:p}=a;function m(b){let T,S=this;return b&&S.pane.forEach(k=>{g(b.chartX-S.plotLeft,b.chartY-S.plotTop,k.center)&&(T=k)}),T}function g(b,T,S,k,x){let A=!0,D=S[0],w=S[1],I=Math.sqrt(Math.pow(b-D,2)+Math.pow(T-w,2));if(r(k)&&r(x)){let N=Math.atan2(h(T-w,8),h(b-D,8));x!==k&&(A=k>x?N>=k&&N<=Math.PI||N<=x&&N>=-Math.PI:N>=k&&N<=h(x,8))}return I<=Math.ceil(S[2]/2)&&A}function v(b){this.polar&&(b.options.inverted&&([b.x,b.y]=[b.y,b.x]),b.isInsidePlot=this.pane.some(T=>g(b.x,b.y,T.center,T.axis&&T.axis.normalizedStartAngleRad,T.axis&&T.axis.normalizedEndAngleRad)))}function y(b){let T=this.chart;b.hoverPoint&&b.hoverPoint.plotX&&b.hoverPoint.plotY&&T.hoverPane&&!g(b.hoverPoint.plotX,b.hoverPoint.plotY,T.hoverPane.center)&&(b.hoverPoint=void 0)}function C(b){let T=this.chart;T.polar?(T.hoverPane=T.getHoverPane(b),b.filter=function(S){return S.visible&&!(!b.shared&&S.directTouch)&&p(S.options.enableMouseTracking,!0)&&(!T.hoverPane||S.xAxis.pane===T.hoverPane)}):T.hoverPane=void 0}return{compose:function(b,T){let S=b.prototype;S.getHoverPane||(S.collectionsWithUpdate.push("pane"),S.getHoverPane=m,l(b,"afterIsInsidePlot",v),l(T,"afterGetHoverData",y),l(T,"beforeGetHoverData",C))}}}),s(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),s(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{extend:p,merge:m,splat:g}=r;class v{constructor(C,b){this.coll="pane",this.init(C,b)}init(C,b){this.chart=b,this.background=[],b.pane.push(this),this.setOptions(C)}setOptions(C){this.options=C=m(h.pane,this.chart.angular?{background:{}}:void 0,C)}render(){let C=this.options,b=this.chart.renderer;this.group||(this.group=b.g("pane-group").attr({zIndex:C.zIndex||0}).add()),this.updateCenter();let T=this.options.background;if(T){let S=Math.max((T=g(T)).length,this.background.length||0);for(let k=0;k<S;k++)T[k]&&this.axis?this.renderBackground(m(h.background,T[k]),k):this.background[k]&&(this.background[k]=this.background[k].destroy(),this.background.splice(k,1))}}renderBackground(C,b){let T={class:"highcharts-pane "+(C.className||"")},S="animate";this.chart.styledMode||p(T,{fill:C.backgroundColor,stroke:C.borderColor,"stroke-width":C.borderWidth}),this.background[b]||(this.background[b]=this.chart.renderer.path().add(this.group),S="attr"),this.background[b][S]({d:this.axis.getPlotBandPath(C.from,C.to,C)}).attr(T)}updateCenter(C){this.center=(C||this.axis||{}).center=a.getCenter.call(this)}update(C,b){m(!0,this.options,C),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(T){T.pane===this&&(T.pane=null,T.update({},b))},this)}}return v.compose=l.compose,v}),s(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l){let{area:{prototype:{pointClass:h,pointClass:{prototype:r}}}}=a.seriesTypes,{defined:p,isNumber:m}=l;return class extends h{setState(){let g=this.state,v=this.series,y=v.chart.polar;p(this.plotHigh)||(this.plotHigh=v.yAxis.toPixels(this.high,!0)),p(this.plotLow)||(this.plotLow=this.plotY=v.yAxis.toPixels(this.low,!0)),v.lowerStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,y&&m(this.plotHighX)&&(this.plotX=this.plotHighX),r.setState.apply(this,arguments),this.state=g,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],y&&m(this.plotLowX)&&(this.plotX=this.plotLowX),v.upperStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.lowerStateMarkerGraphic,v.lowerStateMarkerGraphic=void 0;let C=v.modifyMarkerSettings();r.setState.apply(this,arguments),v.restoreMarkerSettings(C)}haloPath(){let g=this.series.chart.polar,v=[];return this.plotY=this.plotLow,g&&m(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(v=r.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,g&&m(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(v=v.concat(r.haloPath.apply(this,arguments))),v}isValid(){return m(this.low)&&m(this.high)}}}),s(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{noop:p}=l,{area:m,area:{prototype:g},column:{prototype:v}}=h.seriesTypes,{addEvent:y,defined:C,extend:b,isArray:T,isNumber:S,pick:k,merge:x}=r;class A extends m{toYData(w){return[w.low,w.high]}highToXY(w){let I=this.chart,N=this.xAxis.postTranslate(w.rectPlotX||0,this.yAxis.len-(w.plotHigh||0));w.plotHighX=N.x-I.plotLeft,w.plotHigh=N.y-I.plotTop,w.plotLowX=w.plotX}getGraphPath(w){let I=[],N=[],q=g.getGraphPath,Y=this.options,X=this.chart.polar,B=X&&Y.connectEnds!==!1,j=Y.connectNulls,O,R,L,G=Y.step;for(O=(w=w||this.points).length;O--;){R=w[O];let re=X?{plotX:R.rectPlotX,plotY:R.yBottom,doCurve:!1}:{plotX:R.plotX,plotY:R.plotY,doCurve:!1};R.isNull||B||j||w[O+1]&&!w[O+1].isNull||N.push(re),L={polarPlotY:R.polarPlotY,rectPlotX:R.rectPlotX,yBottom:R.yBottom,plotX:k(R.plotHighX,R.plotX),plotY:R.plotHigh,isNull:R.isNull},N.push(L),I.push(L),R.isNull||B||j||w[O-1]&&!w[O-1].isNull||N.push(re)}let $=q.call(this,w);G&&(G===!0&&(G="left"),Y.step={left:"right",center:"center",right:"left"}[G]);let F=q.call(this,I),H=q.call(this,N);Y.step=G;let W=[].concat($,F);return!this.chart.polar&&H[0]&&H[0][0]==="M"&&(H[0]=["L",H[0][1],H[0][2]]),this.graphPath=W,this.areaPath=$.concat(H),W.isArea=!0,W.xMap=$.xMap,this.areaPath.xMap=$.xMap,W}drawDataLabels(){var L,G;let w,I,N,q,Y,X=this.points,B=X.length,j=[],O=this.options.dataLabels,R=this.chart.inverted;if(O){if(T(O)?(q=O[0]||{enabled:!1},Y=O[1]||{enabled:!1}):((q=b({},O)).x=O.xHigh,q.y=O.yHigh,(Y=b({},O)).x=O.xLow,Y.y=O.yLow),q.enabled||((L=this.hasDataLabels)==null?void 0:L.call(this))){for(w=B;w--;)if(I=X[w]){let{plotHigh:$=0,plotLow:F=0}=I;N=q.inside?$<F:$>F,I.y=I.high,I._plotY=I.plotY,I.plotY=$,j[w]=I.dataLabel,I.dataLabel=I.dataLabelUpper,I.below=N,R?q.align||(q.align=N?"right":"left"):q.verticalAlign||(q.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=q,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments),w=B;w--;)(I=X[w])&&(I.dataLabelUpper=I.dataLabel,I.dataLabel=j[w],delete I.dataLabels,I.y=I.low,I.plotY=I._plotY)}if(Y.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(w=B;w--;)if(I=X[w]){let{plotHigh:$=0,plotLow:F=0}=I;N=Y.inside?$<F:$>F,I.below=!N,R?Y.align||(Y.align=N?"left":"right"):Y.verticalAlign||(Y.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Y,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments)}if(q.enabled)for(w=B;w--;)(I=X[w])&&(I.dataLabels=[I.dataLabelUpper,I.dataLabel].filter(function($){return!!$}));this.options.dataLabels=O}}alignDataLabel(){v.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let w={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:I,lowMarker:N}}=this;this.options.marker=x(I,N),N.symbol&&(this.symbol=N.symbol)}return w}restoreMarkerSettings(w){this.options.marker=w.marker,this.symbol=w.symbol}drawPoints(){let w,I,N=this.points.length,q=this.modifyMarkerSettings();for(g.drawPoints.apply(this,arguments),this.restoreMarkerSettings(q),w=0;w<N;)(I=this.points[w]).graphics=I.graphics||[],I.origProps={plotY:I.plotY,plotX:I.plotX,isInside:I.isInside,negative:I.negative,zone:I.zone,y:I.y},(I.graphic||I.graphics[0])&&(I.graphics[0]=I.graphic),I.graphic=I.graphics[1],I.plotY=I.plotHigh,C(I.plotHighX)&&(I.plotX=I.plotHighX),I.y=k(I.high,I.origProps.y),I.negative=I.y<(this.options.threshold||0),this.zones.length&&(I.zone=I.getZone()),this.chart.polar||(I.isInside=I.isTopInside=I.plotY!==void 0&&I.plotY>=0&&I.plotY<=this.yAxis.len&&I.plotX>=0&&I.plotX<=this.xAxis.len),w++;for(g.drawPoints.apply(this,arguments),w=0;w<N;)(I=this.points[w]).graphics=I.graphics||[],(I.graphic||I.graphics[1])&&(I.graphics[1]=I.graphic),I.graphic=I.graphics[0],I.origProps&&(b(I,I.origProps),delete I.origProps),w++}hasMarkerChanged(w,I){let N=w.lowMarker,q=I.lowMarker||{};return N&&(N.enabled===!1||q.symbol!==N.symbol||q.height!==N.height||q.width!==N.width)||super.hasMarkerChanged(w,I)}}return A.defaultOptions=x(m.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),y(A,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(D=>{let w=D.high,I=D.plotY;D.isNull?D.plotY=void 0:(D.plotLow=I,D.plotHigh=S(w)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(w):w,!1,!0,void 0,!0):void 0,this.dataModify&&(D.yBottom=D.plotHigh))})},{order:0}),y(A,"afterTranslate",function(){this.points.forEach(D=>{if(this.chart.polar)this.highToXY(D),D.plotLow=D.plotY,D.tooltipPos=[((D.plotHighX||0)+(D.plotLowX||0))/2,((D.plotHigh||0)+(D.plotLow||0))/2];else{let w=D.pos(!1,D.plotLow),I=D.pos(!1,D.plotHigh);w&&I&&(w[0]=(w[0]+I[0])/2,w[1]=(w[1]+I[1])/2),D.tooltipPos=w}})},{order:3}),b(A.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:a,pointValKey:"low",setStackedPoints:p}),h.registerSeriesType("arearange",A),A}),s(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{spline:{prototype:r}}=l.seriesTypes,{merge:p,extend:m}=h;class g extends a{}return g.defaultOptions=p(a.defaultOptions),m(g.prototype,{getPointSpline:r.getPointSpline}),l.registerSeriesType("areasplinerange",g),g}),s(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}"></span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),s(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{noop:m}=h,{crisp:g,extend:v,merge:y,pick:C}=p;class b extends l{pointAttribs(){return{}}translate(){let S=this.yAxis,k=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(x){k.forEach(function(A){x[A]!==null&&(x[A+"Plot"]=S.translate(x[A],0,1,0,1))}),x.plotHigh=x.highPlot})}drawPoints(){let S,k,x,A,D,w,I,N,q,Y,X,B,j,O=this.points,R=this.options,L=this.chart,G=L.renderer,$=this.doQuartiles!==!1,F=this.options.whiskerLength;for(let H of O){let W=(N=H.graphic)?"animate":"attr",re=H.shapeArgs,he={},ie={},ae={},Ce={},ge=H.color||this.color;if(H.plotY!==void 0){let ke;q=re.width,X=(Y=re.x)+q,B=q/2,S=$?H.q1Plot:H.lowPlot,k=$?H.q3Plot:H.lowPlot,x=H.highPlot,A=H.lowPlot,N||(H.graphic=N=G.g("point").add(this.group),H.stem=G.path().addClass("highcharts-boxplot-stem").add(N),F&&(H.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),$&&(H.box=G.path(I).addClass("highcharts-boxplot-box").add(N)),H.medianShape=G.path(w).addClass("highcharts-boxplot-median").add(N)),L.styledMode||(ie.stroke=H.stemColor||R.stemColor||ge,ie["stroke-width"]=C(H.stemWidth,R.stemWidth,R.lineWidth),ie.dashstyle=H.stemDashStyle||R.stemDashStyle||R.dashStyle,H.stem.attr(ie),F&&(ae.stroke=H.whiskerColor||R.whiskerColor||ge,ae["stroke-width"]=C(H.whiskerWidth,R.whiskerWidth,R.lineWidth),ae.dashstyle=H.whiskerDashStyle||R.whiskerDashStyle||R.dashStyle,H.whiskers.attr(ae)),$&&(he.fill=H.fillColor||R.fillColor||ge,he.stroke=R.lineColor||ge,he["stroke-width"]=R.lineWidth||0,he.dashstyle=H.boxDashStyle||R.boxDashStyle||R.dashStyle,H.box.attr(he)),Ce.stroke=H.medianColor||R.medianColor||ge,Ce["stroke-width"]=C(H.medianWidth,R.medianWidth,R.lineWidth),Ce.dashstyle=H.medianDashStyle||R.medianDashStyle||R.dashStyle,H.medianShape.attr(Ce));let K=g((H.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,H.stem.strokeWidth());if(ke=[["M",K,k],["L",K,x],["M",K,S],["L",K,A]],H.stem[W]({d:ke}),$){let Q=H.box.strokeWidth();S=g(S,Q),k=g(k,Q),ke=[["M",Y=g(Y,Q),k],["L",Y,S],["L",X=g(X,Q),S],["L",X,k],["L",Y,k],["Z"]],H.box[W]({d:ke})}if(F){let Q=H.whiskers.strokeWidth();x=g(H.highPlot,Q),A=g(H.lowPlot,Q),ke=[["M",g(K-(j=typeof F=="string"&&/%$/.test(F)?B*parseFloat(F)/100:Number(F)/2)),x],["L",g(K+j),x],["M",g(K-j),A],["L",g(K+j),A]],H.whiskers[W]({d:ke})}ke=[["M",Y,D=g(H.medianPlot,H.medianShape.strokeWidth())],["L",X,D]],H.medianShape[W]({d:ke})}}}toYData(S){return[S.low,S.q1,S.median,S.q3,S.high]}}return b.defaultOptions=y(l.defaultOptions,a),v(b.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:m,setStackedPoints:m}),r.registerSeriesType("boxplot",b),b}),s(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),s(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{parse:p}=a,{noop:m}=h,{arrayMax:g,arrayMin:v,isNumber:y,merge:C,pick:b,stableSort:T}=r;return class{constructor(S,k){this.setState=m,this.init(S,k)}init(S,k){this.options=S,this.visible=!0,this.chart=k.chart,this.legend=k}addToLegend(S){S.splice(this.options.legendIndex,0,this)}drawLegendSymbol(S){let k,x=b(S.options.itemDistance,20),A=this.legendItem||{},D=this.options,w=D.ranges,I=D.connectorDistance;if(!w||!w.length||!y(w[0].value)){S.options.bubbleLegend.autoRanges=!0;return}T(w,function(X,B){return B.value-X.value}),this.ranges=w,this.setOptions(),this.render();let N=this.getMaxLabelSize(),q=this.ranges[0].radius,Y=2*q;k=(k=I-q+N.width)>0?k:0,this.maxLabel=N,this.movementX=D.labels.align==="left"?k:0,A.labelWidth=Y+k+x,A.labelHeight=Y+N.height/2}setOptions(){let S=this.ranges,k=this.options,x=this.chart.series[k.seriesIndex],A=this.legend.baseline,D={zIndex:k.zIndex,"stroke-width":k.borderWidth},w={zIndex:k.zIndex,"stroke-width":k.connectorWidth},I={align:this.legend.options.rtl||k.labels.align==="left"?"right":"left",zIndex:k.zIndex},N=x.options.marker.fillOpacity,q=this.chart.styledMode;S.forEach(function(Y,X){q||(D.stroke=b(Y.borderColor,k.borderColor,x.color),D.fill=b(Y.color,k.color,N!==1?p(x.color).setOpacity(N).get("rgba"):x.color),w.stroke=b(Y.connectorColor,k.connectorColor,x.color)),S[X].radius=this.getRangeRadius(Y.value),S[X]=C(S[X],{center:S[0].radius-S[X].radius+A}),q||C(!0,S[X],{bubbleAttribs:C(D),connectorAttribs:C(w),labelAttribs:I})},this)}getRangeRadius(S){let k=this.options,x=this.options.seriesIndex,A=this.chart.series[x],D=k.ranges[0].value,w=k.ranges[k.ranges.length-1].value,I=k.minSize,N=k.maxSize;return A.getRadius.call(this,w,D,I,N,S)}render(){let S=this.legendItem||{},k=this.chart.renderer,x=this.options.zThreshold;for(let A of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),S.symbol=k.g("bubble-legend"),S.label=k.g("bubble-legend-item").css(this.legend.itemStyle||{}),S.symbol.translateX=0,S.symbol.translateY=0,S.symbol.add(S.label),S.label.add(S.group),this.ranges))A.value>=x&&this.renderRange(A);this.hideOverlappingLabels()}renderRange(S){let k=this.ranges[0],x=this.legend,A=this.options,D=A.labels,w=this.chart,I=w.series[A.seriesIndex],N=w.renderer,q=this.symbols,Y=q.labels,X=S.center,B=Math.abs(S.radius),j=A.connectorDistance||0,O=D.align,R=x.options.rtl,L=A.borderWidth,G=A.connectorWidth,$=k.radius||0,F=X-B-L/2+G/2,H=(F%1?1:.5)-(G%2?0:.5),W=N.styledMode,re=R||O==="left"?-j:j;O==="center"&&(re=0,A.connectorDistance=0,S.labelAttribs.align="center"),q.bubbleItems.push(N.circle($,X+H,B).attr(W?{}:S.bubbleAttribs).addClass((W?"highcharts-color-"+I.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(A.className||"")).add(this.legendItem.symbol)),q.connectors.push(N.path(N.crispLine([["M",$,F],["L",$+re,F]],A.connectorWidth)).attr(W?{}:S.connectorAttribs).addClass((W?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(A.connectorClassName||"")).add(this.legendItem.symbol));let he=N.text(this.formatLabel(S)).attr(W?{}:S.labelAttribs).css(W?{}:D.style).addClass("highcharts-bubble-legend-labels "+(A.labels.className||"")).add(this.legendItem.symbol),ie={x:$+re+A.labels.x,y:F+A.labels.y+.4*he.getBBox().height};he.attr(ie),Y.push(he),he.placed=!0,he.alignAttr=ie}getMaxLabelSize(){let S,k;return this.symbols.labels.forEach(function(x){k=x.getBBox(!0),S=S?k.width>S.width?k:S:k}),S||{}}formatLabel(S){let k=this.options,x=k.labels.formatter,A=k.labels.format,{numberFormatter:D}=this.chart;return A?l.format(A,S):x?x.call(S):D(S.value,1)}hideOverlappingLabels(){let S=this.chart,k=this.options.labels.allowOverlap,x=this.symbols;!k&&x&&(S.hideOverlappingLabels(x.labels),x.labels.forEach(function(A,D){A.newOpacity?A.newOpacity!==A.oldOpacity&&x.connectors[D].show():x.connectors[D].hide()}))}getRanges(){let S=this.legend.bubbleLegend,k=S.chart.series,x=S.options.ranges,A,D,w=Number.MAX_VALUE,I=-Number.MAX_VALUE;return k.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(D=N.zData.filter(y)).length&&(w=b(N.options.zMin,Math.min(w,Math.max(v(D),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),I=b(N.options.zMax,Math.max(I,g(D))))}),A=w===I?[{value:I}]:[{value:w},{value:(w+I)/2},{value:I,autoRanges:!0}],x.length&&x[0].radius&&A.reverse(),A.forEach(function(N,q){x&&x[q]&&(A[q]=C(x[q],N))}),A}predictBubbleSizes(){let S=this.chart,k=S.legend.options,x=k.floating,A=k.layout==="horizontal",D=A?S.legend.lastLineHeight:0,w=S.plotSizeX,I=S.plotSizeY,N=S.series[this.options.seriesIndex],q=N.getPxExtremes(),Y=Math.ceil(q.minPxSize),X=Math.ceil(q.maxPxSize),B=Math.min(I,w),j,O=N.options.maxSize;return x||!/%$/.test(O)?j=X:(j=(B+D)*(O=parseFloat(O))/100/(O/100+1),(A&&I-j>=w||!A&&w-j>=I)&&(j=X)),[Y,Math.ceil(j)]}updateRanges(S,k){let x=this.legend.options.bubbleLegend;x.minSize=S,x.maxSize=k,x.ranges=this.getRanges()}correctSizes(){let S=this.legend,k=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(k.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,k.maxPxSize),S.render())}}}),s(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{setOptions:m}=h,{composed:g}=r,{addEvent:v,objectEach:y,pushUnique:C,wrap:b}=p;function T(w,I,N){let q,Y,X,B=this.legend,j=S(this)>=0;B&&B.options.enabled&&B.bubbleLegend&&B.options.bubbleLegend.autoRanges&&j?(q=B.bubbleLegend.options,Y=B.bubbleLegend.predictBubbleSizes(),B.bubbleLegend.updateRanges(Y[0],Y[1]),q.placed||(B.group.placed=!1,B.allItems.forEach(O=>{(X=O.legendItem||{}).group&&(X.group.translateY=void 0)})),B.render(),q.placed||(this.getMargins(),this.axes.forEach(function(O){O.visible&&O.render(),q.placed||(O.setScale(),O.updateNames(),y(O.ticks,function(R){R.isNew=!0,R.isNewLabel=!0}))}),this.getMargins()),q.placed=!0,w.call(this,I,N),B.bubbleLegend.correctSizes(),D(B,k(B))):(w.call(this,I,N),B&&B.options.enabled&&B.bubbleLegend&&(B.render(),D(B,k(B))))}function S(w){let I=w.series,N=0;for(;N<I.length;){if(I[N]&&I[N].isBubble&&I[N].visible&&I[N].zData.length)return N;N++}return-1}function k(w){let I=w.allItems,N=[],q=I.length,Y,X,B,j=0,O=0;for(j=0;j<q;j++)if(X=I[j].legendItem||{},B=(I[j+1]||{}).legendItem||{},X.labelHeight&&(I[j].itemHeight=X.labelHeight),I[j]===I[q-1]||X.y!==B.y){for(N.push({height:0}),Y=N[N.length-1];O<=j;O++)I[O].itemHeight>Y.height&&(Y.height=I[O].itemHeight);Y.step=j}return N}function x(w){let I=this.bubbleLegend,N=this.options,q=N.bubbleLegend,Y=S(this.chart);I&&I.ranges&&I.ranges.length&&(q.ranges.length&&(q.autoRanges=!!q.ranges[0].autoRanges),this.destroyItem(I)),Y>=0&&N.enabled&&q.enabled&&(q.seriesIndex=Y,this.bubbleLegend=new l(q,this),this.bubbleLegend.addToLegend(w.allItems))}function A(w){let I;if(w.defaultPrevented)return!1;let N=w.legendItem,q=this.chart,Y=N.visible;this&&this.bubbleLegend&&(N.visible=!Y,N.ignoreSeries=Y,I=S(q)>=0,this.bubbleLegend.visible!==I&&(this.update({bubbleLegend:{enabled:I}}),this.bubbleLegend.visible=I),N.visible=Y)}function D(w,I){let N=w.allItems,q=w.options.rtl,Y,X,B,j,O=0;N.forEach((R,L)=>{(j=R.legendItem||{}).group&&(Y=j.group.translateX||0,X=j.y||0,((B=R.movementX)||q&&R.ranges)&&(B=q?Y-R.options.maxSize/2:Y+B,j.group.attr({translateX:B})),L>I[O].step&&O++,j.group.attr({translateY:Math.round(X+I[O].height/2)}),j.y=X+I[O].height/2)})}return{compose:function(w,I){C(g,"Series.BubbleLegend")&&(m({legend:{bubbleLegend:a}}),b(w.prototype,"drawChartBox",T),v(I,"afterGetAllItems",x),v(I,"itemClick",A))}}}),s(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{seriesTypes:{scatter:{prototype:{pointClass:r}}}}=l,{extend:p}=h;class m extends r{haloPath(v){let y=(v&&this.marker&&this.marker.radius||0)+v;if(this.series.chart.inverted){let C=this.pos()||[0,0],{xAxis:b,yAxis:T,chart:S}=this.series;return S.renderer.symbols.circle(b.len-C[1]-y,T.len-C[0]-y,2*y,2*y)}return a.prototype.haloPath.call(this,y)}}return p(m.prototype,{ttBelow:!1}),m}),s(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m){let{parse:g}=h,{composed:v,noop:y}=r,{series:C,seriesTypes:{column:{prototype:b},scatter:T}}=p,{addEvent:S,arrayMax:k,arrayMin:x,clamp:A,extend:D,isNumber:w,merge:I,pick:N,pushUnique:q}=m;function Y(){let B=this.len,{coll:j,isXAxis:O,min:R}=this,L=O?"xData":"yData",G=(this.max||0)-(R||0),$=0,F=B,H=B/G,W;(j==="xAxis"||j==="yAxis")&&(this.series.forEach(re=>{if(re.bubblePadding&&re.reserveSpace()){this.allowZoomOutside=!0,W=!0;let he=re[L];if(O&&((re.onPoint||re).getRadii(0,0,re),re.onPoint&&(re.radii=re.onPoint.radii)),G>0){let ie=he.length;for(;ie--;)if(w(he[ie])&&this.dataMin<=he[ie]&&he[ie]<=this.max){let ae=re.radii&&re.radii[ie]||0;$=Math.min((he[ie]-R)*H-ae,$),F=Math.max((he[ie]-R)*H+ae,F)}}}}),W&&G>0&&!this.logarithmic&&(F-=B,H*=(B+Math.max(0,$)-Math.min(F,B))/B,[["min","userMin",$],["max","userMax",F]].forEach(re=>{N(this.options[re[0]],this[re[1]])===void 0&&(this[re[0]]+=re[2]/H)})))}class X extends T{static compose(j,O,R){a.compose(O,R),q(v,"Series.Bubble")&&S(j,"foundExtremes",Y)}animate(j){!j&&this.points.length<this.options.animationLimit&&this.points.forEach(function(O){let{graphic:R,plotX:L=0,plotY:G=0}=O;R&&R.width&&(this.hasRendered||R.attr({x:L,y:G,width:1,height:1}),R.animate(this.markerAttribs(O),this.options.animation))},this)}getRadii(){let j=this.zData,O=this.yData,R=[],L,G,$,F=this.chart.bubbleZExtremes,{minPxSize:H,maxPxSize:W}=this.getPxExtremes();if(!F){let re,he=Number.MAX_VALUE,ie=-Number.MAX_VALUE;this.chart.series.forEach(ae=>{if(ae.bubblePadding&&ae.reserveSpace()){let Ce=(ae.onPoint||ae).getZExtremes();Ce&&(he=Math.min(N(he,Ce.zMin),Ce.zMin),ie=Math.max(N(ie,Ce.zMax),Ce.zMax),re=!0)}}),re?(F={zMin:he,zMax:ie},this.chart.bubbleZExtremes=F):F={zMin:0,zMax:0}}for(G=0,L=j.length;G<L;G++)$=j[G],R.push(this.getRadius(F.zMin,F.zMax,H,W,$,O&&O[G]));this.radii=R}getRadius(j,O,R,L,G,$){let F=this.options,H=F.sizeBy!=="width",W=F.zThreshold,re=O-j,he=.5;if($===null||G===null)return null;if(w(G)){if(F.sizeByAbsoluteValue&&(G=Math.abs(G-W),O=re=Math.max(O-W,Math.abs(j-W)),j=0),G<j)return R/2-1;re>0&&(he=(G-j)/re)}return H&&he>=0&&(he=Math.sqrt(he)),Math.ceil(R+he*(L-R))/2}hasData(){return!!this.processedXData.length}markerAttribs(j,O){let R=super.markerAttribs(j,O),{height:L=0,width:G=0}=R;return this.chart.inverted?D(R,{x:(j.plotX||0)-G/2,y:(j.plotY||0)-L/2}):R}pointAttribs(j,O){let R=this.options.marker.fillOpacity,L=C.prototype.pointAttribs.call(this,j,O);return R!==1&&(L.fill=g(L.fill).setOpacity(R).get("rgba")),L}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:j,options:O,radii:R}=this,{minPxSize:L}=this.getPxExtremes(),G=j.length;for(;G--;){let $=j[G],F=R?R[G]:0;this.zoneAxis==="z"&&($.negative=($.z||0)<(O.zThreshold||0)),w(F)&&F>=L/2?($.marker=D($.marker,{radius:F,width:2*F,height:2*F}),$.dlBox={x:$.plotX-F,y:$.plotY-F,width:2*F,height:2*F}):($.shapeArgs=$.plotY=$.dlBox=void 0,$.isInside=!1)}}getPxExtremes(){let j=Math.min(this.chart.plotWidth,this.chart.plotHeight),O=G=>{let $;return typeof G=="string"&&($=/%$/.test(G),G=parseInt(G,10)),$?j*G/100:G},R=O(N(this.options.minSize,8)),L=Math.max(O(N(this.options.maxSize,"20%")),R);return{minPxSize:R,maxPxSize:L}}getZExtremes(){let j=this.options,O=(this.zData||[]).filter(w);if(O.length){let R=N(j.zMin,A(x(O),j.displayNegative===!1?j.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),L=N(j.zMax,k(O));if(w(R)&&w(L))return{zMin:R,zMax:L}}}}return X.defaultOptions=I(T.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:B}=this.series.chart,{z:j}=this.point;return w(j)?B(j,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),D(X.prototype,{alignDataLabel:b.alignDataLabel,applyZones:y,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:l,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),S(X,"updatedData",B=>{delete B.target.chart.bubbleZExtremes}),S(X,"remove",B=>{delete B.target.chart.bubbleZExtremes}),p.registerSeriesType("bubble",X),X}),s(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l){let{seriesTypes:{column:{prototype:{pointClass:{prototype:h}}},arearange:{prototype:{pointClass:r}}}}=a,{extend:p,isNumber:m}=l;class g extends r{isValid(){return m(this.low)}}return p(g.prototype,{setState:h.setState}),g}),s(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{noop:p}=l,{seriesTypes:{arearange:m,column:g,column:{prototype:v}}}=h,{addEvent:y,clamp:C,extend:b,isNumber:T,merge:S,pick:k}=r;class x extends m{setOptions(){return S(!0,arguments[0],{stacking:void 0}),m.prototype.setOptions.apply(this,arguments)}translate(){return v.translate.apply(this)}pointAttribs(){return v.pointAttribs.apply(this,arguments)}translate3dPoints(){return v.translate3dPoints.apply(this,arguments)}translate3dShapes(){return v.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let D,w,I,N,q=this.yAxis,Y=this.xAxis,X=Y.startAngleRad,B=this.chart,j=this.xAxis.isRadial,O=Math.max(B.chartWidth,B.chartHeight)+999;this.points.forEach(R=>{let L=R.shapeArgs||{},G=this.options.minPointLength,$=R.plotY,F=q.translate(R.high,0,1,0,1);if(T(F)&&T($))if(R.plotHigh=C(F,-O,O),R.plotLow=C($,-O,O),N=R.plotHigh,Math.abs(D=k(R.rectPlotY,R.plotY)-R.plotHigh)<G?(w=G-D,D+=w,N-=w/2):D<0&&(D*=-1,N-=D),j&&this.polar)I=R.barX+X,R.shapeType="arc",R.shapeArgs=this.polar.arc(N+D,N,I,I+R.pointWidth);else{L.height=D,L.y=N;let{x:H=0,width:W=0}=L;R.shapeArgs=S(R.shapeArgs,this.crispCol(H,N,W,D)),R.tooltipPos=B.inverted?[q.len+q.pos-B.plotLeft-N-D/2,Y.len+Y.pos-B.plotTop-H-W/2,D]:[Y.left-B.plotLeft+H+W/2,q.pos-B.plotTop+N+D/2,D]}})}}return x.defaultOptions=S(g.defaultOptions,m.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),y(x,"afterColumnTranslate",function(){x.prototype.afterColumnTranslate.apply(this)},{order:5}),b(x.prototype,{directTouch:!0,pointClass:a,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:v.adjustForMissingColumns,animate:v.animate,crispCol:v.crispCol,drawGraph:p,drawPoints:v.drawPoints,getSymbol:p,drawTracker:v.drawTracker,getColumnMetrics:v.getColumnMetrics}),h.registerSeriesType("columnrange",x),x}),s(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),s(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h){let{column:r}=l.seriesTypes,{clamp:p,merge:m,pick:g}=h;class v extends r{translate(){let C=this.chart,b=this.options,T=this.dense=this.closestPointRange*this.xAxis.transA<2,S=this.borderWidth=g(b.borderWidth,T?0:1),k=this.yAxis,x=b.threshold,A=g(b.minPointLength,5),D=this.getColumnMetrics(),w=D.width,I=this.pointXOffset=D.offset,N=this.translatedThreshold=k.getThreshold(x),q=this.barW=Math.max(w,1+2*S);for(let Y of(C.inverted&&(N-=.5),b.pointPadding&&(q=Math.ceil(q)),super.translate(),this.points)){let X=g(Y.yBottom,N),B=999+Math.abs(X),j=p(Y.plotY,-B,k.len+B),O=q/2,R=Math.min(j,X),L=Math.max(j,X)-R,G=Y.plotX+I,$,F,H,W,re,he,ie,ae,Ce,ge,ke;b.centerInCategory&&(G=this.adjustForMissingColumns(G,w,Y,D)),Y.barX=G,Y.pointWidth=w,Y.tooltipPos=C.inverted?[k.len+k.pos-C.plotLeft-j,this.xAxis.len-G-O,L]:[G+O,j+k.pos-C.plotTop,L],$=x+(Y.total||Y.y),b.stacking==="percent"&&($=x+(Y.y<0)?-100:100);let K=k.toPixels($,!0);H=(F=C.plotHeight-K-(C.plotHeight-N))?O*(R-K)/F:0,W=F?O*(R+L-K)/F:0,he=G-H+O,ie=G+H+O,ae=G+W+O,Ce=G-W+O,ge=R-A,ke=R+L,Y.y<0&&(ge=R,ke=R+L+A),C.inverted&&(re=k.width-R,F=K-(k.width-N),H=O*(K-re)/F,W=O*(K-(re-L))/F,ie=(he=G+O+H)-2*H,ae=G-W+O,Ce=G+W+O,ge=R,ke=R+L-A,Y.y<0&&(ke=R+L+A)),Y.shapeType="path",Y.shapeArgs={x:he,y:ge,width:ie-he,height:L,d:[["M",he,ge],["L",ie,ge],["L",ae,ke],["L",Ce,ke],["Z"]]}}}}return v.defaultOptions=m(r.defaultOptions,a),l.registerSeriesType("columnpyramid",v),v}),s(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),s(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r,p){let{arearange:m}=r.seriesTypes,{addEvent:g,merge:v,extend:y}=p;class C extends a{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||l.prototype.getColumnMetrics.call(this)}drawDataLabels(){let T=this.pointValKey;if(m)for(let S of(m.prototype.drawDataLabels.call(this),this.points))S.y=S[T]}toYData(T){return[T.low,T.high]}}return C.defaultOptions=v(a.defaultOptions,h),g(C,"afterTranslate",function(){for(let b of this.points)b.plotLow=b.plotY},{order:0}),y(C.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),r.registerSeriesType("errorbar",C),C}),s(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(a){let{series:{prototype:{pointClass:l}}}=a;return class extends l{setState(h){this.state=h}}}),s(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{noop:p}=l,{series:m,seriesTypes:{column:g}}=h,{clamp:v,isNumber:y,extend:C,merge:b,pick:T,pInt:S,defined:k}=r;class x extends m{translate(){let D=this.yAxis,w=this.options,I=D.center;this.generatePoints(),this.points.forEach(N=>{let q=b(w.dial,N.dial),Y=S(q.radius)*I[2]/200,X=S(q.baseLength)*Y/100,B=S(q.rearLength)*Y/100,j=q.baseWidth,O=q.topWidth,R=w.overshoot,L=D.startAngleRad+D.translate(N.y,void 0,void 0,void 0,!0);(y(R)||w.wrap===!1)&&(R=y(R)?R/180*Math.PI:0,L=v(L,D.startAngleRad-R,D.endAngleRad+R)),L=180*L/Math.PI,N.shapeType="path";let G=q.path||[["M",-B,-j/2],["L",X,-j/2],["L",Y,-O/2],["L",Y,O/2],["L",X,j/2],["L",-B,j/2],["Z"]];N.shapeArgs={d:G,translateX:I[0],translateY:I[1],rotation:L},N.plotX=I[0],N.plotY=I[1],k(N.y)&&D.max-D.min&&(N.percentage=(N.y-D.min)/(D.max-D.min)*100)})}drawPoints(){let D=this,w=D.chart,I=D.yAxis.center,N=D.pivot,q=D.options,Y=q.pivot,X=w.renderer;D.points.forEach(B=>{let j=B.graphic,O=B.shapeArgs,R=O.d,L=b(q.dial,B.dial);j?(j.animate(O),O.d=R):B.graphic=X[B.shapeType](O).addClass("highcharts-dial").add(D.group),w.styledMode||B.graphic[j?"animate":"attr"]({stroke:L.borderColor,"stroke-width":L.borderWidth,fill:L.backgroundColor})}),N?N.animate({translateX:I[0],translateY:I[1]}):Y&&(D.pivot=X.circle(0,0,Y.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(I[0],I[1]).add(D.group),w.styledMode||D.pivot.attr({fill:Y.backgroundColor,stroke:Y.borderColor,"stroke-width":Y.borderWidth}))}animate(D){let w=this;D||w.points.forEach(I=>{let N=I.graphic;N&&(N.attr({rotation:180*w.yAxis.startAngleRad/Math.PI}),N.animate({rotation:I.shapeArgs.rotation},w.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),m.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(D,w){m.prototype.setData.call(this,D,!1),this.processData(),this.generatePoints(),T(w,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return x.defaultOptions=b(m.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),C(x.prototype,{angular:!0,directTouch:!0,drawGraph:p,drawTracker:g.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:a,trackerGroups:["group","dataLabelsGroup"]}),h.registerSeriesType("gauge",x),x}),s(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{composed:h}=a,{addEvent:r,pushUnique:p}=l;function m(){let g,v,y,C=this;C.container&&(g=r(C.container,"mousedown",b=>{let T=C.hoverPoint;T&&T.series&&T.series.hasDraggableNodes&&T.series.options.draggable&&(T.series.onMouseDown(T,b),v=r(C.container,"mousemove",S=>T&&T.series&&T.series.onMouseMove(T,S)),y=r(C.container.ownerDocument,"mouseup",S=>(v(),y(),T&&T.series&&T.series.onMouseUp(T,S))))})),r(C,"destroy",function(){g()})}return{compose:function(g){p(h,"DragNodes")&&r(g,"load",m)},onMouseDown:function(g,v){var C;let y=((C=this.chart.pointer)==null?void 0:C.normalize(v))||v;g.fixedPosition={chartX:y.chartX,chartY:y.chartY,plotX:g.plotX,plotY:g.plotY},g.inDragMode=!0},onMouseMove:function(g,v){var y;if(g.fixedPosition&&g.inDragMode){let C,b,T=this.chart,S=((y=T.pointer)==null?void 0:y.normalize(v))||v,k=g.fixedPosition.chartX-S.chartX,x=g.fixedPosition.chartY-S.chartY,A=T.graphLayoutsLookup;(Math.abs(k)>5||Math.abs(x)>5)&&(C=g.fixedPosition.plotX-k,b=g.fixedPosition.plotY-x,T.isInsidePlot(C,b)&&(g.plotX=C,g.plotY=b,g.hasDragged=!0,this.redrawHalo(g),A.forEach(D=>{D.restartSimulation()})))}},onMouseUp:function(g){g.fixedPosition&&(g.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),g.inDragMode=g.hasDragged=!1,this.options.fixedDraggable||delete g.fixedPosition)},redrawHalo:function(g){g&&this.halo&&this.halo.attr({d:g.haloPath(this.options.states.hover.halo.size)})}}}),s(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{setAnimation:r}=a,{composed:p}=l,{addEvent:m,pushUnique:g}=h;function v(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation()}),this.redraw())}function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation(!1)}),this.redraw())}function C(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(T=>{T.stop()})}function b(){let T,S=!1,k=x=>{x.maxIterations--&&isFinite(x.temperature)&&!x.isStable()&&!x.enableSimulation&&(x.beforeStep&&x.beforeStep(),x.step(),T=!1,S=!0)};if(this.graphLayoutsLookup){for(r(!1,this),this.graphLayoutsLookup.forEach(x=>x.start());!T;)T=!0,this.graphLayoutsLookup.forEach(k);S&&this.series.forEach(x=>{x&&x.layout&&x.render()})}}return{compose:function(T){g(p,"GraphLayout")&&(m(T,"afterPrint",v),m(T,"beforePrint",y),m(T,"predraw",C),m(T,"render",b))},integrations:{},layouts:{}}}),s(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(a,l,h){let{seriesTypes:{bubble:{prototype:{pointClass:r}}}}=h;return class extends r{destroy(){var p;return(p=this.series)!=null&&p.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),l.prototype.destroy.apply(this,arguments)}firePointEvent(){let p=this.series.options;if(this.isParentNode&&p.parentNode){let m=p.allowPointSelect;p.allowPointSelect=p.parentNode.allowPointSelect,l.prototype.firePointEvent.apply(this,arguments),p.allowPointSelect=m}else l.prototype.firePointEvent.apply(this,arguments)}select(){let p=this.series.chart;this.isParentNode?(p.getSelectedPoints=p.getSelectedParentNodes,l.prototype.select.apply(this,arguments),p.getSelectedPoints=a.prototype.getSelectedPoints):l.prototype.select.apply(this,arguments)}}}),s(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(a){let{isNumber:l}=a;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:h}=this.series.chart,{value:r}=this.point;return l(r)?h(r,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),s(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(a,l,h){let r=a.getMass(),p=-h.x*l*this.diffTemperature,m=-h.y*l*this.diffTemperature;a.fromNode.fixedPosition||(a.fromNode.plotX-=p*r.fromNode/a.fromNode.degree,a.fromNode.plotY-=m*r.fromNode/a.fromNode.degree),a.toNode.fixedPosition||(a.toNode.plotX+=p*r.toNode/a.toNode.degree,a.toNode.plotY+=m*r.toNode/a.toNode.degree)},attractiveForceFunction:function(a,l){return(l-a)/a},barycenter:function(){let a=this.options.gravitationalConstant||0,l=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*a,h=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*a;this.nodes.forEach(function(r){r.fixedPosition||(r.plotX-=l/r.mass/r.degree,r.plotY-=h/r.mass/r.degree)})},getK:function(a){return Math.pow(a.box.width*a.box.height/a.nodes.length,.5)},integrate:function(a,l){let h=-a.options.friction,r=a.options.maxSpeed,p=l.prevX,m=l.prevY,g=(l.plotX+l.dispX-p)*h,v=(l.plotY+l.dispY-m)*h,y=Math.abs,C=y(g)/(g||1),b=y(v)/(v||1),T=C*Math.min(r,Math.abs(g)),S=b*Math.min(r,Math.abs(v));l.prevX=l.plotX+l.dispX,l.prevY=l.plotY+l.dispY,l.plotX+=T,l.plotY+=S,l.temperature=a.vectorLength({x:T,y:S})},repulsive:function(a,l,h){let r=l*this.diffTemperature/a.mass/a.degree;a.fixedPosition||(a.plotX+=h.x*r,a.plotY+=h.y*r)},repulsiveForceFunction:function(a,l){return(l-a)/a*(l>a?1:0)}}}),s(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(a,l){let{noop:h}=a;return{barycenter:function(){let r,p,m=this.options.gravitationalConstant,g=this.box,v=this.nodes;for(let y of v)this.options.splitSeries&&!y.isParentNode?(r=y.series.parentNode.plotX,p=y.series.parentNode.plotY):(r=g.width/2,p=g.height/2),y.fixedPosition||(y.plotX-=(y.plotX-r)*m/(y.mass*Math.sqrt(v.length)),y.plotY-=(y.plotY-p)*m/(y.mass*Math.sqrt(v.length)))},getK:h,integrate:l.integrate,repulsive:function(r,p,m,g){let v=p*this.diffTemperature/r.mass/r.degree,y=m.x*v,C=m.y*v;r.fixedPosition||(r.plotX+=y,r.plotY+=C),g.fixedPosition||(g.plotX-=y,g.plotY-=C)},repulsiveForceFunction:function(r,p,m,g){return Math.min(r,(m.marker.radius+g.marker.radius)/2)}}}),s(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(a,l,h,r){let p=a.getMass(),m=h.x/r*l,g=h.y/r*l;a.fromNode.fixedPosition||(a.fromNode.dispX-=m*p.fromNode/a.fromNode.degree,a.fromNode.dispY-=g*p.fromNode/a.fromNode.degree),a.toNode.fixedPosition||(a.toNode.dispX+=m*p.toNode/a.toNode.degree,a.toNode.dispY+=g*p.toNode/a.toNode.degree)},attractiveForceFunction:function(a,l){return a*a/l},barycenter:function(){let a=this.options.gravitationalConstant,l=this.barycenter.xFactor,h=this.barycenter.yFactor;this.nodes.forEach(function(r){if(!r.fixedPosition){let p=r.getDegree(),m=p*(1+p/2);r.dispX+=(l-r.plotX)*a*m/r.degree,r.dispY+=(h-r.plotY)*a*m/r.degree}})},getK:function(a){return Math.pow(a.box.width*a.box.height/a.nodes.length,.3)},integrate:function(a,l){l.dispX+=l.dispX*a.options.friction,l.dispY+=l.dispY*a.options.friction;let h=l.temperature=a.vectorLength({x:l.dispX,y:l.dispY});h!==0&&(l.plotX+=l.dispX/h*Math.min(Math.abs(l.dispX),a.temperature),l.plotY+=l.dispY/h*Math.min(Math.abs(l.dispY),a.temperature))},repulsive:function(a,l,h,r){a.dispX+=h.x/r*l/a.degree,a.dispY+=h.y/r*l/a.degree},repulsiveForceFunction:function(a,l){return l*l/a}}}),s(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class a{constructor(h){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=h,this.boxSize=Math.min(h.width,h.height)}divideBox(){let h=this.box.width/2,r=this.box.height/2;this.nodes[0]=new a({left:this.box.left,top:this.box.top,width:h,height:r}),this.nodes[1]=new a({left:this.box.left+h,top:this.box.top,width:h,height:r}),this.nodes[2]=new a({left:this.box.left+h,top:this.box.top+r,width:h,height:r}),this.nodes[3]=new a({left:this.box.left,top:this.box.top+r,width:h,height:r})}getBoxPosition(h){let r=h.plotX<this.box.left+this.box.width/2,p=h.plotY<this.box.top+this.box.height/2;return r?p?0:3:p?1:2}insert(h,r){let p;this.isInternal?this.nodes[this.getBoxPosition(h)].insert(h,r-1):(this.isEmpty=!1,this.body?r?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,r-1),this.body=!0),this.nodes[this.getBoxPosition(h)].insert(h,r-1)):((p=new a({top:h.plotX||NaN,left:h.plotY||NaN,width:.1,height:.1})).body=h,p.isInternal=!1,this.nodes.push(p)):(this.isInternal=!1,this.body=h))}updateMassAndCenter(){let h=0,r=0,p=0;if(this.isInternal){for(let m of this.nodes)m.isEmpty||(h+=m.mass,r+=m.plotX*m.mass,p+=m.plotY*m.mass);r/=h,p/=h}else this.body&&(h=this.body.mass,r=this.body.plotX,p=this.body.plotY);this.mass=h,this.plotX=r,this.plotY=p}}return a}),s(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(a){return class{constructor(l,h,r,p){this.box={left:l,top:h,width:r,height:p},this.maxDepth=25,this.root=new a(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(l){l.updateMassAndCenter()})}insertNodes(l){for(let h of l)this.root.insert(h,this.maxDepth)}visitNodeRecursive(l,h,r){let p;if(l||(l=this.root),l===this.root&&h&&(p=h(l)),p!==!1){for(let m of l.nodes){if(m.isInternal){if(h&&(p=h(m)),p===!1)continue;this.visitNodeRecursive(m,h,r)}else m.body&&h&&h(m.body);r&&r(m)}l===this.root&&r&&r(l)}}}}),s(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(a,l,h,r,p,m){let{win:g}=l,{clamp:v,defined:y,isFunction:C,fireEvent:b,pick:T}=p;class S{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(x){h.compose(x),h.integrations.euler=a,h.integrations.verlet=m,h.layouts["reingold-fruchterman"]=S}init(x){this.options=x,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=h.integrations[x.integration],this.enableSimulation=x.enableSimulation,this.attractiveForce=T(x.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=T(x.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=x.approximation}updateSimulation(x){this.enableSimulation=T(x,this.options.enableSimulation)}start(){let x=this.series,A=this.options;this.currentStep=0,this.forces=x[0]&&x[0].forces||[],this.chart=x[0]&&x[0].chart,this.initialRendering&&(this.initPositions(),x.forEach(function(D){D.finishedAnimating=!0,D.render()})),this.setK(),this.resetSimulation(A),this.enableSimulation&&this.step()}step(){let x=this.series;for(let A of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[A+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let A of x)A.chart&&A.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&g.cancelAnimationFrame(this.simulation),this.simulation=g.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(A=>{b(A,"afterSimulation")}))}}stop(){this.simulation&&g.cancelAnimationFrame(this.simulation)}setArea(x,A,D,w){this.box={left:x,top:A,width:D,height:w}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(x,A){for(let D of x)A.indexOf(D)===-1&&A.push(D)}removeElementFromCollection(x,A){let D=A.indexOf(x);D!==-1&&A.splice(D,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(x){this.maxIterations=T(x,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(x){this.initialRendering=x}createQuadTree(){this.quadTree=new r(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let x=this.options.initialPositions;if(C(x))for(let A of(x.call(this),this.nodes))y(A.prevX)||(A.prevX=A.plotX),y(A.prevY)||(A.prevY=A.plotY),A.dispX=0,A.dispY=0;else x==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let x,A=this.box,D=this.nodes,w=2*Math.PI/(D.length+1),I=D.filter(function(B){return B.linksTo.length===0}),N={},q=this.options.initialPositionRadius,Y=B=>{for(let j of B.linksFrom||[])N[j.toNode.id]||(N[j.toNode.id]=!0,X.push(j.toNode),Y(j.toNode))},X=[];for(let B of I)X.push(B),Y(B);if(X.length)for(let B of D)X.indexOf(B)===-1&&X.push(B);else X=D;for(let B=0,j=X.length;B<j;++B)(x=X[B]).plotX=x.prevX=T(x.plotX,A.width/2+q*Math.cos(B*w)),x.plotY=x.prevY=T(x.plotY,A.height/2+q*Math.sin(B*w)),x.dispX=0,x.dispY=0}setRandomPositions(){let x,A=this.box,D=this.nodes,w=D.length+1,I=N=>{let q=N*N/Math.PI;return q-Math.floor(q)};for(let N=0,q=D.length;N<q;++N)(x=D[N]).plotX=x.prevX=T(x.plotX,A.width*I(N)),x.plotY=x.prevY=T(x.plotY,A.height*I(w+N)),x.dispX=0,x.dispY=0}force(x,...A){this.integration[x].apply(this,A)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let x=0,A=0,D=0;for(let w of this.nodes)A+=w.plotX*w.mass,D+=w.plotY*w.mass,x+=w.mass;return this.barycenter={x:A,y:D,xFactor:A/x,yFactor:D/x},this.barycenter}barnesHutApproximation(x,A){let D,w,I=this.getDistXY(x,A),N=this.vectorLength(I);return x!==A&&N!==0&&(A.isInternal?A.boxSize/N<this.options.theta&&N!==0?(w=this.repulsiveForce(N,this.k),this.force("repulsive",x,w*A.mass,I,N),D=!1):D=!0:(w=this.repulsiveForce(N,this.k),this.force("repulsive",x,w*A.mass,I,N))),D}repulsiveForces(){if(this.approximation==="barnes-hut")for(let x of this.nodes)this.quadTree.visitNodeRecursive(null,A=>this.barnesHutApproximation(x,A));else{let x,A,D;for(let w of this.nodes)for(let I of this.nodes)w===I||w.fixedPosition||(D=this.getDistXY(w,I),(A=this.vectorLength(D))!==0&&(x=this.repulsiveForce(A,this.k),this.force("repulsive",w,x*I.mass,D,A)))}}attractiveForces(){let x,A,D;for(let w of this.links)w.fromNode&&w.toNode&&(x=this.getDistXY(w.fromNode,w.toNode),(A=this.vectorLength(x))!==0&&(D=this.attractiveForce(A,this.k),this.force("attractive",w,D,x,A)))}applyLimits(){for(let x of this.nodes)x.fixedPosition||(this.integration.integrate(this,x),this.applyLimitBox(x,this.box),x.dispX=0,x.dispY=0)}applyLimitBox(x,A){let D=x.radius;x.plotX=v(x.plotX,A.left+D,A.width-D),x.plotY=v(x.plotY,A.top+D,A.height-D)}coolDown(x,A,D){return x-A*D}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let x=0;for(let A of this.nodes)x+=A.temperature;return x}vectorLength(x){return Math.sqrt(x.x*x.x+x.y*x.y)}getDistR(x,A){let D=this.getDistXY(x,A);return this.vectorLength(D)}getDistXY(x,A){let D=x.plotX-A.plotX,w=x.plotY-A.plotY;return{x:D,y:w,absX:Math.abs(D),absY:Math.abs(w)}}}return S}),s(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{addEvent:p,pick:m}=r;function g(){let C=this.series,b=[];return C.forEach(T=>{T.parentNode&&T.parentNode.selected&&b.push(T.parentNode)}),b}function v(){this.allDataPoints&&delete this.allDataPoints}class y extends h{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(b){h.compose(b),a.integrations.packedbubble=l,a.layouts.packedbubble=y;let T=b.prototype;T.getSelectedParentNodes||(p(b,"beforeRedraw",v),T.getSelectedParentNodes=g)}beforeStep(){this.options.marker&&this.series.forEach(b=>{b&&b.calculateParentRadius()})}isStable(){let b=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&b<1e-5||this.temperature<=0}setCircularPositions(){let b=this.box,T=this.nodes,S=2*Math.PI/(T.length+1),k=this.options.initialPositionRadius,x,A,D=0;for(let w of T)this.options.splitSeries&&!w.isParentNode?(x=w.series.parentNode.plotX,A=w.series.parentNode.plotY):(x=b.width/2,A=b.height/2),w.plotX=w.prevX=m(w.plotX,x+k*Math.cos(w.index||D*S)),w.plotY=w.prevY=m(w.plotY,A+k*Math.sin(w.index||D*S)),w.dispX=0,w.dispY=0,D++}repulsiveForces(){let b,T,S,k=this,x=k.options.bubblePadding,A=k.nodes;A.forEach(D=>{D.degree=D.mass,D.neighbours=0,A.forEach(w=>{b=0,D!==w&&!D.fixedPosition&&(k.options.seriesInteraction||D.series===w.series)&&(S=k.getDistXY(D,w),(T=k.vectorLength(S)-(D.marker.radius+w.marker.radius+x))<0&&(D.degree+=.01,D.neighbours++,b=k.repulsiveForce(-T/Math.sqrt(D.neighbours),k.k,D,w)),k.force("repulsive",D,b*w.mass,S,w,T))})})}applyLimitBox(b,T){let S,k;this.options.splitSeries&&!b.isParentNode&&this.options.parentNodeLimit&&(S=this.getDistXY(b,b.series.parentNode),(k=b.series.parentNodeRadius-b.marker.radius-this.vectorLength(S))<0&&k>-2*b.marker.radius&&(b.plotX-=.01*S.x,b.plotY-=.01*S.y)),super.applyLimitBox(b,T)}}return a.layouts.packedbubble=y,y}),s(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(a,l){let{merge:h,syncTimeout:r}=a,{animObject:p}=l;return{initDataLabels:function(){let m=this.options.dataLabels;if(!this.dataLabelsGroup){let g=this.initDataLabelsGroup();return!this.chart.styledMode&&(m!=null&&m.style)&&g.css(m.style),g.attr({opacity:0}),this.visible&&g.show(),g}return this.dataLabelsGroup.attr(h({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var g;let m=this.options.dataLabels;m!=null&&m.defer&&((g=this.options.layoutAlgorithm)!=null&&g.enableSimulation)?r(()=>{this.deferDataLabels=!1},m?p(m.animation).defer:0):this.deferDataLabels=!1}}}),s(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{deg2rad:h}=a,{addEvent:r,merge:p,uniqueKey:m,defined:g,extend:v}=l;function y(T,S){S=p(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},S);let k=this.renderer.url,x=this.text||this,A=x.textPath,{attributes:D,enabled:w}=S;if(T=T||A&&A.path,A&&A.undo(),T&&w){let I=r(x,"afterModifyTree",N=>{if(T&&w){let q=T.attr("id");q||T.attr("id",q=m());let Y={x:0,y:0};g(D.dx)&&(Y.dx=D.dx,delete D.dx),g(D.dy)&&(Y.dy=D.dy,delete D.dy),x.attr(Y),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let X=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:v(D,{"text-anchor":D.textAnchor,href:`${k}#${q}`}),children:X}}});x.textPath={path:T,undo:I}}else x.attr({dx:0,dy:0}),delete x.textPath;return this.added&&(x.textCache="",this.renderer.buildText(x)),this}function C(T){var x;let S=T.bBox,k=(x=this.element)==null?void 0:x.querySelector("textPath");if(k){let A=[],{b:D,h:w}=this.renderer.fontMetrics(this.element),I=w-D,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),q=k.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Y=q.length,X=(B,j)=>{let{x:O,y:R}=j,L=(k.getRotationOfChar(B)-90)*h,G=Math.cos(L),$=Math.sin(L);return[[O-I*G,R-I*$],[O+D*G,R+D*$]]};for(let B=0,j=0;j<Y;j++){let O=q[j].length;for(let R=0;R<O;R+=5)try{let L=B+R+j,[G,$]=X(L,k.getStartPositionOfChar(L));R===0?(A.push($),A.push(G)):(j===0&&A.unshift($),j===Y-1&&A.push(G))}catch{break}B+=O-1;try{let R=B+j,L=k.getEndPositionOfChar(R),[G,$]=X(R,L);A.unshift($),A.unshift(G)}catch{break}}A.length&&A.push(A[0].slice()),S.polygon=A}return S}function b(T){var A;let S=T.labelOptions,k=T.point,x=S[k.formatPrefix+"TextPath"]||S.textPath;x&&!S.useHTML&&(this.setTextPath(((A=k.getDataLabelPath)==null?void 0:A.call(k,this))||k.graphic,x),k.dataLabelPath&&!x.enabled&&(k.dataLabelPath=k.dataLabelPath.destroy()))}return{compose:function(T){r(T,"afterGetBBox",C),r(T,"beforeAddingDataLabel",b);let S=T.prototype;S.setTextPath||(S.setTextPath=y)}}}),s(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(a,l,h,r,p,m,g,v,y,C,b,T){let{parse:S}=a,{noop:k}=r,{series:{prototype:x},seriesTypes:{bubble:A}}=v,{initDataLabels:D,initDataLabelsDefer:w}=y,{addEvent:I,clamp:N,defined:q,extend:Y,fireEvent:X,isArray:B,isNumber:j,merge:O,pick:R}=C;T.compose(b);class L extends A{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose($,F,H){A.compose($,F,H),l.compose(F),g.compose(F)}accumulateAllPoints(){let $,F=this.chart,H=[];for(let W of F.series)if(W.is("packedbubble")&&W.reserveSpace()){$=W.yData||[];for(let re=0;re<$.length;re++)H.push([null,null,$[re],W.index,re,{id:re,marker:{radius:0}}])}return H}addLayout(){let $=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},F=$.type||"packedbubble",H=this.chart.options.chart,W=this.chart.graphLayoutsStorage,re=this.chart.graphLayoutsLookup,he;W||(this.chart.graphLayoutsStorage=W={},this.chart.graphLayoutsLookup=re=[]),(he=W[F])||($.enableSimulation=q(H.forExport)?!H.forExport:$.enableSimulation,W[F]=he=new h.layouts[F],he.init($),re.splice(he.index,0,he)),this.layout=he,this.points.forEach(ie=>{ie.mass=2,ie.degree=1,ie.collisionNmb=1}),he.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),he.addElementsToCollection([this],he.series),he.addElementsToCollection(this.points,he.nodes)}addSeriesLayout(){let $=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},F=$.type||"packedbubble",H=this.chart.graphLayoutsStorage,W=this.chart.graphLayoutsLookup,re=O($,$.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),he=H[F+"-series"];he||(H[F+"-series"]=he=new h.layouts[F],he.init(re),W.splice(he.index,0,he)),this.parentNodeLayout=he,this.createParentNodes()}calculateParentRadius(){let $=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,$?Math.max(Math.sqrt(Math.pow($.width,2)+Math.pow($.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let $=this.chart.series,F=this.options.zMin,H=this.options.zMax,W=1/0,re=-1/0;return F&&H?[F,H]:($.forEach(he=>{he.yData.forEach(ie=>{q(ie)&&(ie>re&&(re=ie),ie<W&&(W=ie))})}),[F=R(F,W),H=R(H,re)])}checkOverlap($,F){let H=$[0]-F[0],W=$[1]-F[1];return Math.sqrt(H*H+W*W)-Math.abs($[2]+F[2])<-.001}createParentNodes(){let $=this.pointClass,F=this.chart,H=this.parentNodeLayout,W=this.layout.options,re,he=this.parentNode,ie={radius:this.parentNodeRadius,lineColor:this.color,fillColor:S(this.color).brighten(.4).get()};W.parentNodeOptions&&(ie=O(W.parentNodeOptions.marker||{},ie)),this.parentNodeMass=0,this.points.forEach(ae=>{this.parentNodeMass+=Math.PI*Math.pow(ae.marker.radius,2)}),this.calculateParentRadius(),H.nodes.forEach(ae=>{ae.seriesIndex===this.index&&(re=!0)}),H.setArea(0,0,F.plotWidth,F.plotHeight),re||(he||(he=new $(this,{mass:this.parentNodeRadius/2,marker:ie,dataLabels:{inside:!1},states:{normal:{marker:ie},hover:{marker:ie}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(he.plotX=this.parentNode.plotX,he.plotY=this.parentNode.plotY),this.parentNode=he,H.addElementsToCollection([this],H.series),H.addElementsToCollection([he],H.nodes))}deferLayout(){let $=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),$.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach($=>{$.removeElementFromCollection(this,$.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),x.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(x.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",x.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var re;if(!this.layout||!this.layout.options.splitSeries)return;let $=this.chart,F=this.layout.options.parentNodeOptions.marker,H={fill:F.fillColor||S(this.color).brighten(.4).get(),opacity:F.fillOpacity,stroke:F.lineColor||this.color,"stroke-width":R(F.lineWidth,this.options.lineWidth)},W={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,$.seriesGroup),(re=this.group)==null||re.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&q(this.parentNode.plotX)&&q(this.parentNode.plotY)&&q(this.parentNodeRadius)&&(W=O({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},H),this.parentNode.graphic||(this.graph=this.parentNode.graphic=$.renderer.symbol(H.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(W))}drawTracker(){let $,F=this.parentNode;super.drawTracker(),F&&($=B(F.dataLabels)?F.dataLabels:F.dataLabel?[F.dataLabel]:[],F.graphic&&(F.graphic.element.point=F),$.forEach(H=>{(H.div||H.element).point=F}))}getPointRadius(){let $,F,H,W,re=this.chart,he=re.plotWidth,ie=re.plotHeight,ae=this.options,Ce=ae.useSimulation,ge=Math.min(he,ie),ke={},K=[],Q=re.allDataPoints||[],le=Q.length;["minSize","maxSize"].forEach(J=>{let ne=parseInt(ae[J],10),ue=/%$/.test(ae[J]);ke[J]=ue?ge*ne/100:ne*Math.sqrt(le)}),re.minRadius=$=ke.minSize/Math.sqrt(le),re.maxRadius=F=ke.maxSize/Math.sqrt(le);let _e=Ce?this.calculateZExtremes():[$,F];Q.forEach((J,ne)=>{H=Ce?N(J[2],_e[0],_e[1]):J[2],(W=this.getRadius(_e[0],_e[1],$,F,H))===0&&(W=null),Q[ne][2]=W,K.push(W)}),this.radii=K}init(){return x.init.apply(this,arguments),w.call(this),this.eventsToUnbind.push(I(this,"updatedData",function(){this.chart.series.forEach($=>{$.type===this.type&&($.isDirty=!0)},this)})),this}onMouseUp($){if($.fixedPosition&&!$.removed){let F,H=this.layout,W=this.parentNodeLayout;W&&H.options.dragBetweenSeries&&W.nodes.forEach(re=>{$&&$.marker&&re!==$.series.parentNode&&(F=H.getDistXY($,re),H.vectorLength(F)-re.marker.radius-$.marker.radius<0&&(re.series.addPoint(O($.options,{plotX:$.plotX,plotY:$.plotY}),!1),H.removeElementFromCollection($,H.nodes),$.remove()))}),l.onMouseUp.apply(this,arguments)}}placeBubbles($){let F=this.checkOverlap,H=this.positionBubble,W=[],re=1,he=0,ie=0,ae,Ce=[],ge,ke=$.sort((K,Q)=>Q[2]-K[2]);if(ke.length){if(W.push([[0,0,ke[0][2],ke[0][3],ke[0][4]]]),ke.length>1)for(W.push([[0,0-ke[1][2]-ke[0][2],ke[1][2],ke[1][3],ke[1][4]]]),ge=2;ge<ke.length;ge++)ke[ge][2]=ke[ge][2]||1,F(ae=H(W[re][he],W[re-1][ie],ke[ge]),W[re][0])?(W.push([]),ie=0,W[re+1].push(H(W[re][he],W[re][0],ke[ge])),re++,he=0):re>1&&W[re-1][ie+1]&&F(ae,W[re-1][ie+1])?(ie++,W[re].push(H(W[re][he],W[re-1][ie],ke[ge])),he++):(he++,W[re].push(ae));this.chart.stages=W,this.chart.rawPositions=[].concat.apply([],W),this.resizeRadius(),Ce=this.chart.rawPositions}return Ce}pointAttribs($,F){let H=this.options,W=$&&$.isParentNode,re=H.marker;W&&H.layoutAlgorithm&&H.layoutAlgorithm.parentNodeOptions&&(re=H.layoutAlgorithm.parentNodeOptions.marker);let he=re.fillOpacity,ie=x.pointAttribs.call(this,$,F);return he!==1&&(ie["fill-opacity"]=he),ie}positionBubble($,F,H){let W=Math.asin,re=Math.acos,he=Math.pow,ie=Math.abs,ae=(0,Math.sqrt)(he($[0]-F[0],2)+he($[1]-F[1],2)),Ce=re((he(ae,2)+he(H[2]+F[2],2)-he(H[2]+$[2],2))/(2*(H[2]+F[2])*ae)),ge=W(ie($[0]-F[0])/ae),ke=($[1]-F[1]<0?0:Math.PI)+Ce+ge*(($[0]-F[0])*($[1]-F[1])<0?1:-1),K=Math.cos(ke),Q=Math.sin(ke);return[F[0]+(F[2]+H[2])*Q,F[1]-(F[2]+H[2])*K,H[2],H[3],H[4]]}render(){let $=[];x.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(F=>{B(F.dataLabels)&&F.dataLabels.forEach(H=>{$.push(H)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels($))}resizeRadius(){let $,F,H,W,re,he=this.chart,ie=he.rawPositions,ae=Math.min,Ce=Math.max,ge=he.plotLeft,ke=he.plotTop,K=he.plotHeight,Q=he.plotWidth;for(let ne of($=H=Number.POSITIVE_INFINITY,F=W=Number.NEGATIVE_INFINITY,ie))re=ne[2],$=ae($,ne[0]-re),F=Ce(F,ne[0]+re),H=ae(H,ne[1]-re),W=Ce(W,ne[1]+re);let le=[F-$,W-H],_e=[(Q-ge)/le[0],(K-ke)/le[1]],J=ae.apply([],_e);if(Math.abs(J-1)>1e-10){for(let ne of ie)ne[2]*=J;this.placeBubbles(ie)}else he.diffY=K/2+ke-H-(W-H)/2,he.diffX=Q/2+ge-$-(F-$)/2}seriesBox(){let $,F=this.chart,H=this.data,W=Math.max,re=Math.min,he=[F.plotLeft,F.plotLeft+F.plotWidth,F.plotTop,F.plotTop+F.plotHeight];return H.forEach(ie=>{q(ie.plotX)&&q(ie.plotY)&&ie.marker.radius&&($=ie.marker.radius,he[0]=re(he[0],ie.plotX-$),he[1]=W(he[1],ie.plotX+$),he[2]=re(he[2],ie.plotY-$),he[3]=W(he[3],ie.plotY+$))}),j(he.width/he.height)?he:null}setVisible(){let $=this;x.setVisible.apply($,arguments),$.parentNodeLayout&&$.graph?$.visible?($.graph.show(),$.parentNode.dataLabel&&$.parentNode.dataLabel.show()):($.graph.hide(),$.parentNodeLayout.removeElementFromCollection($.parentNode,$.parentNodeLayout.nodes),$.parentNode.dataLabel&&$.parentNode.dataLabel.hide()):$.layout&&($.visible?$.layout.addElementsToCollection($.points,$.layout.nodes):$.points.forEach(F=>{$.layout.removeElementFromCollection(F,$.layout.nodes)}))}translate(){let $,F,H,W=this.chart,re=this.data,he=this.index,ie=this.options.useSimulation;for(let ae of(this.processedXData=this.xData,this.generatePoints(),q(W.allDataPoints)||(W.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ie?H=W.allDataPoints:(H=this.placeBubbles(W.allDataPoints),this.options.draggable=!1),H))ae[3]===he&&($=re[ae[4]],F=R(ae[2],void 0),ie||($.plotX=ae[0]-W.plotLeft+W.diffX,$.plotY=ae[1]-W.plotTop+W.diffY),j(F)&&($.marker=Y($.marker,{radius:F,width:2*F,height:2*F}),$.radius=F));ie&&this.deferLayout(),X(this,"afterTranslate")}}return L.defaultOptions=O(A.defaultOptions,m),Y(L.prototype,{pointClass:p,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:D,alignDataLabel:x.alignDataLabel,indexateNodes:k,onMouseDown:l.onMouseDown,onMouseMove:l.onMouseMove,redrawHalo:l.redrawHalo,searchPoint:k}),v.registerSeriesType("packedbubble",L),L}),s(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),s(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,l,h,r){let{noop:p}=a,{area:m,line:g,scatter:v}=h.seriesTypes,{extend:y,merge:C}=r;class b extends v{getGraphPath(){let S=g.prototype.getGraphPath.call(this),k=S.length+1;for(;k--;)(k===S.length||S[k][0]==="M")&&k>0&&S.splice(k,0,["Z"]);return this.areaPath=S,S}drawGraph(){this.options.fillColor=this.color,m.prototype.drawGraph.call(this)}}return b.defaultOptions=C(v.defaultOptions,l),y(b.prototype,{type:"polygon",drawTracker:g.prototype.drawTracker,setStackedPoints:p}),h.registerSeriesType("polygon",b),b}),s(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),s(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h,r){var p;let{defaultOptions:m}=l,{composed:g,noop:v}=h,{addEvent:y,correctFloat:C,defined:b,extend:T,fireEvent:S,isObject:k,merge:x,pick:A,pushUnique:D,relativeLength:w,wrap:I}=r;return function(N){function q(){this.autoConnect=this.isCircular&&A(this.userMax,this.options.max)===void 0&&C(this.endAngleRad-this.startAngleRad)===C(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Y(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ne=>this.ticks[ne]&&this.ticks[ne].label).filter(ne=>!!ne)}}function X(){return v}function B(ne,ue,ye){let we=this.pane.center,ze=ne.value,Ee,Ie,Fe;return this.isCircular?(b(ze)?ne.point&&(ne.point.shapeArgs||{}).start&&(ze=this.chart.inverted?this.translate(ne.point.rectPlotY,!0):ne.point.x):(Ie=ne.chartX||0,Fe=ne.chartY||0,ze=this.translate(Math.atan2(Fe-ye,Ie-ue)-this.startAngleRad,!0)),Ie=(Ee=this.getPosition(ze)).x,Fe=Ee.y):(b(ze)||(Ie=ne.chartX,Fe=ne.chartY),b(Ie)&&b(Fe)&&(ye=we[1]+this.chart.plotTop,ze=this.translate(Math.min(Math.sqrt(Math.pow(Ie-ue,2)+Math.pow(Fe-ye,2)),we[2]/2)-we[3]/2,!0))),[ze,Ie||0,Fe||0]}function j(ne,ue,ye){let we=this.pane.center,ze=this.chart,Ee=this.left||0,Ie=this.top||0,Fe,He=A(ue,we[2]/2-this.offset),Ae;return ye===void 0&&(ye=this.horiz?0:this.center&&-this.center[3]/2),ye&&(He+=ye),this.isCircular||ue!==void 0?((Ae=this.chart.renderer.symbols.arc(Ee+we[0],Ie+we[1],He,He,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Ee+we[0]],Ae.yBounds=[Ie+we[1]-He]):(Fe=this.postTranslate(this.angleRad,He),Ae=[["M",this.center[0]+ze.plotLeft,this.center[1]+ze.plotTop],["L",Fe.x,Fe.y]]),Ae}function O(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function R(ne,ue,ye){let we=this.chart,ze=Rt=>{if(typeof Rt=="string"){let ft=parseInt(Rt,10);return me.test(Rt)&&(ft=ft*Fe/100),ft}return Rt},Ee=this.center,Ie=this.startAngleRad,Fe=Ee[2]/2,He=Math.min(this.offset,0),Ae=this.left||0,xe=this.top||0,me=/%$/,Me=this.isCircular,De,Pe,je,Xe,tt,rt,dt=A(ze(ye.outerRadius),Fe),gt=ze(ye.innerRadius),wt=A(ze(ye.thickness),10);if(this.options.gridLineInterpolation==="polygon")rt=this.getPlotLinePath({value:ne}).concat(this.getPlotLinePath({value:ue,reverse:!0}));else{ne=Math.max(ne,this.min),ue=Math.min(ue,this.max);let Rt=this.translate(ne),ft=this.translate(ue);Me||(dt=Rt||0,gt=ft||0),ye.shape!=="circle"&&Me?(De=Ie+(Rt||0),Pe=Ie+(ft||0)):(De=-Math.PI/2,Pe=1.5*Math.PI,tt=!0),dt-=He,wt-=He,rt=we.renderer.symbols.arc(Ae+Ee[0],xe+Ee[1],dt,dt,{start:Math.min(De,Pe),end:Math.max(De,Pe),innerR:A(gt,dt-wt),open:tt,borderRadius:ye.borderRadius}),Me&&(je=(Pe+De)/2,Xe=Ae+Ee[0]+Ee[2]/2*Math.cos(je),rt.xBounds=je>-Math.PI/2&&je<Math.PI/2?[Xe,we.plotWidth]:[0,Xe],rt.yBounds=[xe+Ee[1]+Ee[2]/2*Math.sin(je)],rt.yBounds[0]+=je>-Math.PI&&je<0||je>Math.PI?-10:10)}return rt}function L(ne){let ue=this.pane.center,ye=this.chart,we=ye.inverted,ze=ne.reverse,Ee=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Ie=Ee.innerRadius||"0%",Fe=Ee.outerRadius||"100%",He=ue[0]+ye.plotLeft,Ae=ue[1]+ye.plotTop,xe=this.height,me=ne.isCrosshair,Me=ue[3]/2,De=ne.value,Pe,je,Xe,tt,rt,dt,gt,wt,Rt,ft=this.getPosition(De),Et=ft.x,Tt=ft.y;if(me&&(De=(wt=this.getCrosshairPosition(ne,He,Ae))[0],Et=wt[1],Tt=wt[2]),this.isCircular)je=Math.sqrt(Math.pow(Et-He,2)+Math.pow(Tt-Ae,2)),Xe=typeof Ie=="string"?w(Ie,1):Ie/je,tt=typeof Fe=="string"?w(Fe,1):Fe/je,ue&&Me&&(Xe<(Pe=Me/je)&&(Xe=Pe),tt<Pe&&(tt=Pe)),Rt=[["M",He+Xe*(Et-He),Ae-Xe*(Ae-Tt)],["L",Et-(1-tt)*(Et-He),Tt+(1-tt)*(Ae-Tt)]];else if((De=this.translate(De))&&(De<0||De>xe)&&(De=0),this.options.gridLineInterpolation==="circle")Rt=this.getLinePath(0,De,Me);else if(Rt=[],ye[we?"yAxis":"xAxis"].forEach(si=>{si.pane===this.pane&&(rt=si)}),rt){gt=rt.tickPositions,rt.autoConnect&&(gt=gt.concat([gt[0]])),ze&&(gt=gt.slice().reverse()),De&&(De+=Me);for(let si=0;si<gt.length;si++)dt=rt.getPosition(gt[si],De),Rt.push(si?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Rt}function G(ne,ue){let ye=this.translate(ne);return this.postTranslate(this.isCircular?ye:this.angleRad,A(this.isCircular?ue:ye<0?0:ye,this.center[2]/2)-this.offset)}function $(){let ne=this.center,ue=this.chart,ye=this.options.title;return{x:ue.plotLeft+ne[0]+(ye.x||0),y:ue.plotTop+ne[1]-{high:.5,middle:.25,low:0}[ye.align]*ne[2]+(ye.y||0)}}function F(ne){ne.beforeSetTickPositions=q,ne.createLabelCollector=Y,ne.getCrosshairPosition=B,ne.getLinePath=j,ne.getOffset=O,ne.getPlotBandPath=R,ne.getPlotLinePath=L,ne.getPosition=G,ne.getTitlePosition=$,ne.postTranslate=ke,ne.setAxisSize=Q,ne.setAxisTranslation=le,ne.setOptions=_e}function H(){let ne=this.chart,ue=this.options,ye=ne.angular&&this.isXAxis,we=this.pane,ze=we&&we.options;if(!ye&&we&&(ne.angular||ne.polar)){let Ee=2*Math.PI,Ie=(A(ze.startAngle,0)-90)*Math.PI/180,Fe=(A(ze.endAngle,A(ze.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ue.angle||0)*Math.PI/180,this.startAngleRad=Ie,this.endAngleRad=Fe,this.offset=ue.offset||0;let He=(Ie%Ee+Ee)%Ee,Ae=(Fe%Ee+Ee)%Ee;He>Math.PI&&(He-=Ee),Ae>Math.PI&&(Ae-=Ee),this.normalizedStartAngleRad=He,this.normalizedEndAngleRad=Ae}}function W(ne){this.isRadial&&(ne.align=void 0,ne.preventDefault())}function re(){if(this.chart&&this.chart.labelCollectors){let ne=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ne>=0&&this.chart.labelCollectors.splice(ne,1)}}function he(ne){let ue,ye=this.chart,we=ye.angular,ze=ye.polar,Ee=this.isXAxis,Ie=this.coll,Fe=ne.userOptions.pane||0,He=this.pane=ye.pane&&ye.pane[Fe];if(Ie==="colorAxis"){this.isRadial=!1;return}we?(we&&Ee?(this.isHidden=!0,this.createLabelCollector=X,this.getOffset=v,this.redraw=K,this.render=K,this.setScale=v,this.setCategories=v,this.setTitle=v):F(this),ue=!Ee):ze&&(F(this),ue=this.horiz),we||ze?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&ye.labelCollectors.push(this.labelCollector)):this.isRadial=!1,He&&ue&&(He.axis=this),this.isCircular=ue}function ie(){this.isRadial&&this.beforeSetTickPositions()}function ae(ne){let ue=this.label;if(!ue)return;let ye=this.axis,we=ue.getBBox(),ze=ye.options.labels,Ee=(ye.translate(this.pos)+ye.startAngleRad+Math.PI/2)/Math.PI*180%360,Ie=Math.round(Ee),Fe=b(ze.y)?0:-(.3*we.height),He=ze.y,Ae,xe=20,me=ze.align,Me="end",De=Ie<0?Ie+360:Ie,Pe=De,je=0,Xe=0;ye.isRadial&&(Ae=ye.getPosition(this.pos,ye.center[2]/2+w(A(ze.distance,-25),ye.center[2]/2,-ye.center[2]/2)),ze.rotation==="auto"?ue.attr({rotation:Ee}):b(He)||(He=ye.chart.renderer.fontMetrics(ue).b-we.height/2),b(me)||(ye.isCircular?(we.width>ye.len*ye.tickInterval/(ye.max-ye.min)&&(xe=0),me=Ee>xe&&Ee<180-xe?"left":Ee>180+xe&&Ee<360-xe?"right":"center"):me="center",ue.attr({align:me})),me==="auto"&&ye.tickPositions.length===2&&ye.isCircular&&(De>90&&De<180?De=180-De:De>270&&De<=360&&(De=540-De),Pe>180&&Pe<=360&&(Pe=360-Pe),(ye.pane.options.startAngle===Ie||ye.pane.options.startAngle===Ie+360||ye.pane.options.startAngle===Ie-360)&&(Me="start"),me=Ie>=-90&&Ie<=90||Ie>=-360&&Ie<=-270||Ie>=270&&Ie<=360?Me==="start"?"right":"left":Me==="start"?"left":"right",Pe>70&&Pe<110&&(me="center"),De<15||De>=180&&De<195?je=.3*we.height:De>=15&&De<=35?je=Me==="start"?0:.75*we.height:De>=195&&De<=215?je=Me==="start"?.75*we.height:0:De>35&&De<=90?je=Me==="start"?-(.25*we.height):we.height:De>215&&De<=270&&(je=Me==="start"?we.height:-(.25*we.height)),Pe<15?Xe=Me==="start"?-(.15*we.height):.15*we.height:Pe>165&&Pe<=180&&(Xe=Me==="start"?.15*we.height:-(.15*we.height)),ue.attr({align:me}),ue.translate(Xe,je+Fe)),ne.pos.x=Ae.x+(ze.x||0),ne.pos.y=Ae.y+(He||0))}function Ce(ne){this.axis.getPosition&&T(ne.pos,this.axis.getPosition(this.pos))}function ge({options:ne}){ne.xAxis&&x(!0,N.radialDefaultOptions.circular,ne.xAxis),ne.yAxis&&x(!0,N.radialDefaultOptions.radialGauge,ne.yAxis)}function ke(ne,ue){let ye=this.chart,we=this.center;return ne=this.startAngleRad+ne,{x:ye.plotLeft+we[0]+Math.cos(ne)*ue,y:ye.plotTop+we[1]+Math.sin(ne)*ue}}function K(){this.isDirty=!1}function Q(){let ne,ue;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ne=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ue=this.postTranslate(this.angleRad,ne[3]/2),ne[0]=ue.x-this.chart.plotLeft,ne[1]=ue.y-this.chart.plotTop),this.len=this.width=this.height=(ne[2]-ne[3])*A(this.sector,1)/2)}function le(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function _e(ne){let{coll:ue}=this,{angular:ye,inverted:we,polar:ze}=this.chart,Ee={};ye?this.isXAxis||(Ee=x(m.yAxis,N.radialDefaultOptions.radialGauge)):ze&&(Ee=this.horiz?x(m.xAxis,N.radialDefaultOptions.circular):x(ue==="xAxis"?m.xAxis:m.yAxis,N.radialDefaultOptions.radial)),we&&ue==="yAxis"&&(Ee.stackLabels=k(m.yAxis,!0)?m.yAxis.stackLabels:{},Ee.reversedStacks=!0);let Ie=this.options=x(Ee,ne);Ie.plotBands||(Ie.plotBands=[]),S(this,"afterSetOptions")}function J(ne,ue,ye,we,ze,Ee,Ie){let Fe,He=this.axis;return He.isRadial?["M",ue,ye,"L",(Fe=He.getPosition(this.pos,He.center[2]/2+we)).x,Fe.y]:ne.call(this,ue,ye,we,ze,Ee,Ie)}N.radialDefaultOptions=x(a),N.compose=function(ne,ue){return D(g,"Axis.Radial")&&(y(ne,"afterInit",H),y(ne,"autoLabelAlign",W),y(ne,"destroy",re),y(ne,"init",he),y(ne,"initialAxisTranslation",ie),y(ue,"afterGetLabelPosition",ae),y(ue,"afterGetPosition",Ce),y(h,"setOptions",ge),I(ue.prototype,"getMarkPath",J)),ne}}(p||(p={})),p}),s(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m){let{animObject:g}=a,{composed:v}=l,{addEvent:y,defined:C,find:b,isNumber:T,merge:S,pick:k,pushUnique:x,relativeLength:A,splat:D,uniqueKey:w,wrap:I}=m;function N(){(this.pane||[]).forEach(ge=>{ge.render()})}function q(ge){let ke=ge.args[0].xAxis,K=ge.args[0].yAxis,Q=ge.args[0].chart;ke&&K&&(K.gridLineInterpolation==="polygon"?(ke.startOnTick=!0,ke.endOnTick=!0):ke.gridLineInterpolation==="polygon"&&Q.inverted&&(K.startOnTick=!0,K.endOnTick=!0))}function Y(){this.pane||(this.pane=[]),this.options.pane=D(this.options.pane),this.options.pane.forEach(ge=>{new r(ge,this)},this)}function X(ge){let ke=ge.args.marker,K=this.chart.xAxis[0],Q=this.chart.yAxis[0],le=this.chart.inverted,_e=le?Q:K,J=le?K:Q;if(this.chart.polar){ge.preventDefault();let ne=(ke.attr?ke.attr("start"):ke.start)-_e.startAngleRad,ue=ke.attr?ke.attr("r"):ke.r,ye=(ke.attr?ke.attr("end"):ke.end)-_e.startAngleRad,we=ke.attr?ke.attr("innerR"):ke.innerR;ge.result.x=ne+_e.pos,ge.result.width=ye-ne,ge.result.y=J.len+J.pos-ue,ge.result.height=ue-we}}function B(ge){let ke=this.chart;if(ke.polar&&ke.hoverPane&&ke.hoverPane.axis){ge.preventDefault();let K=ke.hoverPane.center,Q=ke.mouseDownX||0,le=ke.mouseDownY||0,_e=ge.args.chartY,J=ge.args.chartX,ne=2*Math.PI,ue=ke.hoverPane.axis.startAngleRad,ye=ke.hoverPane.axis.endAngleRad,we=ke.inverted?ke.xAxis[0]:ke.yAxis[0],ze={},Ee="arc";if(ze.x=K[0]+ke.plotLeft,ze.y=K[1]+ke.plotTop,this.zoomHor){let Ie=ue>0?ye-ue:Math.abs(ue)+Math.abs(ye),Fe=Math.atan2(le-ke.plotTop-K[1],Q-ke.plotLeft-K[0])-ue,He=Math.atan2(_e-ke.plotTop-K[1],J-ke.plotLeft-K[0])-ue;ze.r=K[2]/2,ze.innerR=K[3]/2,Fe<=0&&(Fe+=ne),He<=0&&(He+=ne),He<Fe&&(He=[Fe,Fe=He][0]),Ie<ne&&ue+He>ye+(ne-Ie)/2&&(He=Fe,Fe=ue<=0?ue:0);let Ae=ze.start=Math.max(Fe+ue,ue),xe=ze.end=Math.min(He+ue,ye);if(we.options.gridLineInterpolation==="polygon"){let me=ke.hoverPane.axis,Me=Ae-me.startAngleRad+me.pos,De=we.getPlotLinePath({value:we.max}),Pe=me.toValue(Me),je=me.toValue(Me+(xe-Ae));if(Pe<me.getExtremes().min){let{min:Xe,max:tt}=me.getExtremes();Pe=tt-(Xe-Pe)}if(je<me.getExtremes().min){let{min:Xe,max:tt}=me.getExtremes();je=tt-(Xe-je)}je<Pe&&(je=[Pe,Pe=je][0]),(De=L(De,Pe,je,me)).push(["L",K[0]+ke.plotLeft,ke.plotTop+K[1]]),ze.d=De,Ee="path"}}if(this.zoomVert){let Ie=ke.inverted?ke.xAxis[0]:ke.yAxis[0],Fe=Math.sqrt(Math.pow(Q-ke.plotLeft-K[0],2)+Math.pow(le-ke.plotTop-K[1],2)),He=Math.sqrt(Math.pow(J-ke.plotLeft-K[0],2)+Math.pow(_e-ke.plotTop-K[1],2));if(He<Fe&&(Fe=[He,He=Fe][0]),He>K[2]/2&&(He=K[2]/2),Fe<K[3]/2&&(Fe=K[3]/2),this.zoomHor||(ze.start=ue,ze.end=ye),ze.r=He,ze.innerR=Fe,Ie.options.gridLineInterpolation==="polygon"){let Ae=Ie.toValue(Ie.len+Ie.pos-Fe),xe=Ie.toValue(Ie.len+Ie.pos-He),me=Ie.getPlotLinePath({value:xe}).concat(Ie.getPlotLinePath({value:Ae,reverse:!0}));ze.d=me,Ee="path"}}if(this.zoomHor&&this.zoomVert&&we.options.gridLineInterpolation==="polygon"){let Ie=ke.hoverPane.axis,Fe=ze.start||0,He=ze.end||0,Ae=Fe-Ie.startAngleRad+Ie.pos,xe=Ie.toValue(Ae),me=Ie.toValue(Ae+(He-Fe));if(ze.d instanceof Array){let Me=ze.d.slice(0,ze.d.length/2),De=ze.d.slice(ze.d.length/2,ze.d.length);De=[...De].reverse();let Pe=ke.hoverPane.axis;Me=L(Me,xe,me,Pe),(De=L(De,xe,me,Pe))&&(De[0][0]="L"),De=[...De].reverse(),ze.d=Me.concat(De),Ee="path"}}ge.attrs=ze,ge.shapeType=Ee}}function j(){let ge=this.chart;ge.polar&&(this.polar=new Ce(this),ge.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function O(){if(this.chart.polar&&this.xAxis){let{xAxis:ge,yAxis:ke}=this,K=this.chart;this.kdByAngle=K.tooltip&&K.tooltip.shared,this.kdByAngle||K.inverted?this.searchPoint=R:this.options.findNearestPointBy="xy";let Q=this.points,le=Q.length;for(;le--;)this.is("column")||this.is("columnrange")||this.polar.toXY(Q[le]),K.hasParallelCoordinates||this.yAxis.reversed||(k(Q[le].y,Number.MIN_VALUE)<ke.min||Q[le].x<ge.min||Q[le].x>ge.max?(Q[le].isNull=!0,Q[le].plotY=NaN):Q[le].isNull=Q[le].isValid&&!Q[le].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(y(this,"afterRender",function(){let _e;K.polar&&this.options.clip!==!1&&(_e=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:_e[0],y:_e[1],r:_e[2]/2,innerR:_e[3]/2}):this.clipCircle=function(J,ne,ue,ye,we){let ze=w(),Ee=J.createElement("clipPath").attr({id:ze}).add(J.defs),Ie=we?J.arc(ne,ue,ye,we,0,2*Math.PI).add(Ee):J.circle(ne,ue,ye).add(Ee);return Ie.id=ze,Ie.clipPath=Ee,Ie}(K.renderer,_e[0],_e[1],_e[2]/2,_e[3]/2),this.group.clip(this.clipCircle),this.setClip=l.noop)})))}}function R(ge){let ke=this.chart,K=this.xAxis,Q=this.yAxis,le=K.pane&&K.pane.center,_e=ge.chartX-(le&&le[0]||0)-ke.plotLeft,J=ge.chartY-(le&&le[1]||0)-ke.plotTop,ne=ke.inverted?{clientX:ge.chartX-Q.pos,plotY:ge.chartY-K.pos}:{clientX:180+-180/Math.PI*Math.atan2(_e,J)};return this.searchKDTree(ne)}function L(ge,ke,K,Q){let le=Q.tickInterval,_e=Q.tickPositions,J=b(_e,ue=>ue>=K),ne=b([..._e].reverse(),ue=>ue<=ke);return C(J)||(J=_e[_e.length-1]),C(ne)||(ne=_e[0],J+=le,ge[0][0]="L",ge.unshift(ge[ge.length-3])),(ge=ge.slice(_e.indexOf(ne),_e.indexOf(J)+1))[0][0]="M",ge}function G(ge,ke){return b(this.pane||[],K=>K.options.id===ke)||ge.call(this,ke)}function $(ge,ke,K,Q,le,_e){let J,ne,ue,ye=this.chart,we=k(Q.inside,!!this.options.stacking);if(ye.polar){if(J=ke.rectPlotX/Math.PI*180,ye.inverted)this.forceDL=ye.isInsidePlot(ke.plotX,ke.plotY),we&&ke.shapeArgs?(ne=ke.shapeArgs,le=S(le,{x:(ue=this.yAxis.postTranslate(((ne.start||0)+(ne.end||0))/2-this.xAxis.startAngleRad,ke.barX+ke.pointWidth/2)).x-ye.plotLeft,y:ue.y-ye.plotTop})):ke.tooltipPos&&(le=S(le,{x:ke.tooltipPos[0],y:ke.tooltipPos[1]})),Q.align=k(Q.align,"center"),Q.verticalAlign=k(Q.verticalAlign,"middle");else{var ze;let Ee,Ie;(ze=Q).align===null&&(Ee=J>20&&J<160?"left":J>200&&J<340?"right":"center",ze.align=Ee),ze.verticalAlign===null&&(Ie=J<45||J>315?"bottom":J>135&&J<225?"top":"middle",ze.verticalAlign=Ie),Q=ze}h.prototype.alignDataLabel.call(this,ke,K,Q,le,_e),this.isRadialBar&&ke.shapeArgs&&ke.shapeArgs.start===ke.shapeArgs.end?K.hide():K.show()}else ge.call(this,ke,K,Q,le,_e)}function F(){let ge=this.options,ke=ge.stacking,K=this.chart,Q=this.xAxis,le=this.yAxis,_e=le.reversed,J=le.center,ne=Q.startAngleRad,ue=Q.endAngleRad-ne,ye=ge.threshold,we=0,ze,Ee,Ie,Fe,He,Ae=0,xe=0,me,Me,De,Pe,je,Xe,tt,rt;if(Q.isRadial)for(Ie=(ze=this.points).length,Fe=le.translate(le.min),He=le.translate(le.max),ye=ge.threshold||0,K.inverted&&T(ye)&&C(we=le.translate(ye))&&(we<0?we=0:we>ue&&(we=ue),this.translatedThreshold=we+ne);Ie--;){if(Xe=(Ee=ze[Ie]).barX,Me=Ee.x,De=Ee.y,Ee.shapeType="arc",K.inverted){Ee.plotY=le.translate(De),ke&&le.stacking?(je=le.stacking.stacks[(De<0?"-":"")+this.stackKey],this.visible&&je&&je[Me]&&!Ee.isNull&&(Pe=je[Me].points[this.getStackIndicator(void 0,Me,this.index).key],Ae=le.translate(Pe[0]),xe=le.translate(Pe[1]),C(Ae)&&(Ae=m.clamp(Ae,0,ue)))):(Ae=we,xe=Ee.plotY),Ae>xe&&(xe=[Ae,Ae=xe][0]),_e?xe>Fe?xe=Fe:Ae<He?Ae=He:(Ae>Fe||xe<He)&&(Ae=xe=ue):Ae<Fe?Ae=Fe:xe>He?xe=He:(xe<Fe||Ae>He)&&(Ae=xe=0),le.min>le.max&&(Ae=xe=_e?ue:0),Ae+=ne,xe+=ne,J&&(Ee.barX=Xe+=J[3]/2),tt=Math.max(Xe,0),rt=Math.max(Xe+Ee.pointWidth,0);let dt=ge.borderRadius,gt=A((typeof dt=="object"?dt.radius:dt)||0,rt-tt);Ee.shapeArgs={x:J[0],y:J[1],r:rt,innerR:tt,start:Ae,end:xe,borderRadius:gt},Ee.opacity=Ae===xe?0:void 0,Ee.plotY=(C(this.translatedThreshold)&&(Ae<this.translatedThreshold?Ae:xe))-ne}else Ae=Xe+ne,Ee.shapeArgs=this.polar.arc(Ee.yBottom,Ee.plotY,Ae,Ae+Ee.pointWidth),Ee.shapeArgs.borderRadius=0;this.polar.toXY(Ee),K.inverted?(me=le.postTranslate(Ee.rectPlotY,Xe+Ee.pointWidth/2),Ee.tooltipPos=[me.x-K.plotLeft,me.y-K.plotTop]):Ee.tooltipPos=[Ee.plotX,Ee.plotY],J&&(Ee.ttBelow=Ee.plotY>J[1])}}function H(ge,ke){let K,Q,le=this;if(this.chart.polar){ke=ke||this.points;for(let J=0;J<ke.length;J++)if(!ke[J].isNull){K=J;break}this.options.connectEnds!==!1&&K!==void 0&&(this.connectEnds=!0,ke.splice(ke.length,0,ke[K]),Q=!0),ke.forEach(J=>{J.polarPlotY===void 0&&le.polar.toXY(J)})}let _e=ge.apply(this,[].slice.call(arguments,1));return Q&&ke.pop(),_e}function W(ge,ke){let K=this.chart,Q={xAxis:[],yAxis:[]};return K.polar?K.axes.forEach(le=>{if(le.coll==="colorAxis")return;let _e=le.isXAxis,J=le.center,ne=ke.chartX-J[0]-K.plotLeft,ue=ke.chartY-J[1]-K.plotTop;Q[_e?"xAxis":"yAxis"].push({axis:le,value:le.translate(_e?Math.PI-Math.atan2(ne,ue):Math.sqrt(Math.pow(ne,2)+Math.pow(ue,2)),!0)})}):Q=ge.call(this,ke),Q}function re(ge,ke){this.chart.polar||ge.call(this,ke)}function he(ge,ke){let K=this,Q=this.chart,le=this.group,_e=this.markerGroup,J=this.xAxis&&this.xAxis.center,ne=Q.plotLeft,ue=Q.plotTop,ye=this.options.animation,we,ze,Ee,Ie,Fe,He;Q.polar?K.isRadialBar?ke||(K.startAngleRad=k(K.translatedThreshold,K.xAxis.startAngleRad),l.seriesTypes.pie.prototype.animate.call(K,ke)):(ye=g(ye),K.is("column")?ke||(ze=J[3]/2,K.points.forEach(Ae=>{Ee=Ae.graphic,Fe=(Ie=Ae.shapeArgs)&&Ie.r,He=Ie&&Ie.innerR,Ee&&Ie&&(Ee.attr({r:ze,innerR:ze}),Ee.animate({r:Fe,innerR:He},K.options.animation))})):ke?(we={translateX:J[0]+ne,translateY:J[1]+ue,scaleX:.001,scaleY:.001},le.attr(we),_e&&_e.attr(we)):(we={translateX:ne,translateY:ue,scaleX:1,scaleY:1},le.animate(we,ye),_e&&_e.animate(we,ye))):ge.call(this,ke)}function ie(ge,ke,K,Q){let le,_e;if(this.chart.polar)if(Q){let J=(_e=function ue(ye,we,ze,Ee){let Ie,Fe,He,Ae,xe,me,Me=Ee?1:0,De=(Ie=we>=0&&we<=ye.length-1?we:we<0?ye.length-1+we:0)-1<0?ye.length-(1+Me):Ie-1,Pe=Ie+1>ye.length-1?Me:Ie+1,je=ye[De],Xe=ye[Pe],tt=je.plotX,rt=je.plotY,dt=Xe.plotX,gt=Xe.plotY,wt=ye[Ie].plotX,Rt=ye[Ie].plotY;Fe=(1.5*wt+tt)/2.5,He=(1.5*Rt+rt)/2.5,Ae=(1.5*wt+dt)/2.5,xe=(1.5*Rt+gt)/2.5;let ft=Math.sqrt(Math.pow(Fe-wt,2)+Math.pow(He-Rt,2)),Et=Math.sqrt(Math.pow(Ae-wt,2)+Math.pow(xe-Rt,2)),Tt=Math.atan2(He-Rt,Fe-wt);me=Math.PI/2+(Tt+Math.atan2(xe-Rt,Ae-wt))/2,Math.abs(Tt-me)>Math.PI/2&&(me-=Math.PI),Fe=wt+Math.cos(me)*ft,He=Rt+Math.sin(me)*ft;let si={rightContX:Ae=wt+Math.cos(Math.PI+me)*Et,rightContY:xe=Rt+Math.sin(Math.PI+me)*Et,leftContX:Fe,leftContY:He,plotX:wt,plotY:Rt};return ze&&(si.prevPointCont=ue(ye,De,!1,Ee)),si}(ke,Q,!0,this.connectEnds)).prevPointCont&&_e.prevPointCont.rightContX,ne=_e.prevPointCont&&_e.prevPointCont.rightContY;le=["C",T(J)?J:_e.plotX,T(ne)?ne:_e.plotY,T(_e.leftContX)?_e.leftContX:_e.plotX,T(_e.leftContY)?_e.leftContY:_e.plotY,_e.plotX,_e.plotY]}else le=["M",K.plotX,K.plotY];else le=ge.call(this,ke,K,Q);return le}function ae(ge,ke,K=this.plotY){if(!this.destroyed){let{plotX:Q,series:le}=this,{chart:_e}=le;return _e.polar&&T(Q)&&T(K)?[Q+(ke?_e.plotLeft:0),K+(ke?_e.plotTop:0)]:ge.call(this,ke,K)}}class Ce{static compose(ke,K,Q,le,_e,J,ne,ue,ye,we){if(r.compose(K,Q),p.compose(ke,_e),x(v,"Polar")){let ze=K.prototype,Ee=J.prototype,Ie=Q.prototype,Fe=le.prototype;if(y(K,"afterDrawChartBox",N),y(K,"getAxes",Y),y(K,"init",q),I(ze,"get",G),I(Ie,"getCoordinates",W),I(Ie,"pinch",re),y(Q,"getSelectionMarkerAttrs",B),y(Q,"getSelectionBox",X),y(le,"afterInit",j),y(le,"afterTranslate",O,{order:2}),y(le,"afterColumnTranslate",F,{order:4}),I(Fe,"animate",he),I(Ee,"pos",ae),ue){let He=ue.prototype;I(He,"alignDataLabel",$),I(He,"animate",he)}if(ye&&I(ye.prototype,"getGraphPath",H),we){let He=we.prototype;I(He,"getPointSpline",ie),ne&&(ne.prototype.getPointSpline=He.getPointSpline)}}}constructor(ke){this.series=ke}arc(ke,K,Q,le){let _e=this.series,J=_e.xAxis.center,ne=_e.yAxis.len,ue=J[3]/2,ye=ne-K+ue,we=ne-k(ke,ne)+ue;return _e.yAxis.reversed&&(ye<0&&(ye=ue),we<0&&(we=ue)),{x:J[0],y:J[1],r:ye,innerR:we,start:Q,end:le}}toXY(ke){let K=this.series,Q=K.chart,le=K.xAxis,_e=K.yAxis,J=ke.plotX,ne=Q.inverted,ue=ke.y,ye=ke.plotY,we=ne?J:_e.len-ye,ze;if(ne&&K&&!K.isRadialBar&&(ke.plotY=ye=T(ue)?_e.translate(ue):0),ke.rectPlotX=J,ke.rectPlotY=ye,_e.center&&(we+=_e.center[3]/2),T(ye)){let Ee=ne?_e.postTranslate(ye,we):le.postTranslate(J,we);ke.plotX=ke.polarPlotX=Ee.x-Q.plotLeft,ke.plotY=ke.polarPlotY=Ee.y-Q.plotTop}K.kdByAngle?((ze=(J/Math.PI*180+le.pane.options.startAngle)%360)<0&&(ze+=360),ke.clientX=ze):ke.clientX=ke.plotX}}return Ce}),s(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(a,l,h){var r;let{composed:p}=a,{addEvent:m,objectEach:g,pushUnique:v}=h;return function(y){function C(){let x=this.waterfall.stacks;x&&(x.changed=!1,delete x.alreadyChanged)}function b(){let x=this.options.stackLabels;x&&x.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function T(){this.waterfall||(this.waterfall=new k(this))}function S(){let x=this.axes;for(let A of this.series)if(A.options.stacking){for(let D of x)D.isXAxis||(D.waterfall.stacks.changed=!0);break}}y.compose=function(x,A){v(p,"Axis.Waterfall")&&(m(x,"init",T),m(x,"afterBuildStacks",C),m(x,"afterRender",b),m(A,"beforeRedraw",S))};class k{constructor(A){this.axis=A,this.stacks={changed:!1}}renderStackTotals(){let A=this.axis,D=A.waterfall.stacks,w=A.stacking&&A.stacking.stackTotalGroup,I=new l(A,A.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=I,w&&g(D,N=>{g(N,(q,Y)=>{I.total=q.stackTotal,I.x=+Y,q.label&&(I.label=q.label),l.prototype.render.call(I,w),q.label=I.label,delete I.label})}),I.total=null}}y.Composition=k}(r||(r={})),r}),s(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,l,h){let{isNumber:r}=h;class p extends a.prototype.pointClass{getClassName(){let g=l.prototype.getClassName.call(this);return this.isSum?g+=" highcharts-sum":this.isIntermediateSum&&(g+=" highcharts-intermediate-sum"),g}isValid(){return r(this.y)||this.isSum||!!this.isIntermediateSum}}return p}),s(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),s(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(a,l,h,r,p){let{column:m,line:g}=a.seriesTypes,{addEvent:v,arrayMax:y,arrayMin:C,correctFloat:b,crisp:T,extend:S,isNumber:k,merge:x,objectEach:A,pick:D}=l;function w(N,q){return Object.hasOwnProperty.call(N,q)}class I extends m{generatePoints(){m.prototype.generatePoints.apply(this);for(let q=0,Y=this.points.length;q<Y;q++){let X=this.points[q],B=this.processedYData[q];k(B)&&(X.isIntermediateSum||X.isSum)&&(X.y=b(B))}}processData(q){let Y,X,B,j,O,R,L=this.options,G=this.yData,$=L.data,F=G.length,H=L.threshold||0;B=X=j=O=0;for(let W=0;W<F;W++)R=G[W],Y=$&&$[W]?$[W]:{},R==="sum"||Y.isSum?G[W]=b(B):R==="intermediateSum"||Y.isIntermediateSum?(G[W]=b(X),X=0):(B+=R,X+=R),j=Math.min(B,j),O=Math.max(B,O);super.processData.call(this,q),L.stacking||(this.dataMin=j+H,this.dataMax=O)}toYData(q){return q.isSum?"sum":q.isIntermediateSum?"intermediateSum":q.y}updateParallelArrays(q,Y){super.updateParallelArrays.call(this,q,Y),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(q,Y){let X=this.options.upColor;X&&!q.options.color&&k(q.y)&&(q.color=q.y>0?X:void 0);let B=m.prototype.pointAttribs.call(this,q,Y);return delete B.dashstyle,B}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let q=this.data.filter($=>k($.y)),Y=this.yAxis,X=q.length,B=((G=this.graph)==null?void 0:G.strokeWidth())||0,j=this.xAxis.reversed,O=this.yAxis.reversed,R=this.options.stacking,L=[];for(let $=1;$<X;$++){if(!(this.options.connectNulls||k(this.data[q[$].index-1].y)))continue;let F=q[$].box,H=q[$-1],W=H.y||0,re=q[$-1].box;if(!F||!re)continue;let he=Y.waterfall.stacks[this.stackKey],ie=W>0?-re.height:0;if(he&&re&&F){let ae,Ce=he[$-1];if(R){let ge=Ce.connectorThreshold;ae=T(Y.translate(ge,!1,!0,!1,!0)+(O?ie:0),B)}else ae=T(re.y+(H.minPointLengthOffset||0),B);L.push(["M",(re.x||0)+(j?0:re.width||0),ae],["L",(F.x||0)+(j&&F.width||0),ae])}if(re&&L.length&&(!R&&W<0&&!O||W>0&&O)){let ae=L[L.length-2];ae&&typeof ae[2]=="number"&&(ae[2]+=re.height||0);let Ce=L[L.length-1];Ce&&typeof Ce[2]=="number"&&(Ce[2]+=re.height||0)}}return L}drawGraph(){g.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(q){var le;let Y=this.options,X=(le=q.waterfall)==null?void 0:le.stacks,B=Y.threshold||0,j=this.stackKey,O=this.xData,R=O.length,L=B,G=L,$,F=0,H=0,W=0,re,he,ie,ae,Ce,ge,ke,K,Q=(_e,J,ne,ue)=>{if($){if(re)for(;ne<re;ne++)$.stackState[ne]+=ue;else $.stackState[0]=_e,re=$.stackState.length;$.stackState.push($.stackState[re-1]+J)}};if(q.stacking&&X&&this.reserveSpace()){K=X.changed,(ke=X.alreadyChanged)&&0>ke.indexOf(j)&&(K=!0),X[j]||(X[j]={});let _e=X[j];if(_e)for(let J=0;J<R;J++)(!_e[ge=O[J]]||K)&&(_e[ge]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:K&&_e[ge]?_e[ge].label:void 0}),$=_e[ge],(Ce=this.yData[J])>=0?$.posTotal+=Ce:$.negTotal+=Ce,ae=Y.data[J],he=$.absolutePos=$.posTotal,ie=$.absoluteNeg=$.negTotal,$.stackTotal=he+ie,re=$.stackState.length,ae&&ae.isIntermediateSum?(Q(W,H,0,W),W=H,H=B,L^=G,G^=L,L^=G):ae&&ae.isSum?(Q(B,F,re,0),L=B):(Q(L,Ce,0,F),ae&&(F+=Ce,H+=Ce)),$.stateIndex++,$.threshold=L,L+=$.stackTotal;X.changed=!1,X.alreadyChanged||(X.alreadyChanged=[]),X.alreadyChanged.push(j)}}getExtremes(){let q,Y,X,B=this.options.stacking;return B?(q=this.yAxis.waterfall.stacks,Y=this.stackedYNeg=[],X=this.stackedYPos=[],B==="overlap"?A(q[this.stackKey],function(j){Y.push(C(j.stackState)),X.push(y(j.stackState))}):A(q[this.stackKey],function(j){Y.push(j.negTotal+j.threshold),X.push(j.posTotal+j.threshold)}),{dataMin:C(Y),dataMax:y(X)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return I.defaultOptions=x(m.defaultOptions,p),I.compose=h.compose,S(I.prototype,{pointValKey:"y",showLine:!0,pointClass:r}),v(I,"afterColumnTranslate",function(){let{options:N,points:q,yAxis:Y}=this,X=D(N.minPointLength,5),B=X/2,j=N.threshold||0,O=N.stacking,R=Y.waterfall.stacks[this.stackKey],L=j,G=j,$,F,H,W;for(let re=0;re<q.length;re++){let he=q[re],ie=this.processedYData[re],ae=S({x:0,y:0,width:0,height:0},he.shapeArgs||{});he.box=ae;let Ce=[0,ie],ge=he.y||0;if(O){if(R){let Q=R[re];O==="overlap"?(F=Q.stackState[Q.stateIndex--],$=ge>=0?F:F-ge,w(Q,"absolutePos")&&delete Q.absolutePos,w(Q,"absoluteNeg")&&delete Q.absoluteNeg):(ge>=0?(F=Q.threshold+Q.posTotal,Q.posTotal-=ge,$=F):(F=Q.threshold+Q.negTotal,Q.negTotal-=ge,$=F-ge),!Q.posTotal&&k(Q.absolutePos)&&w(Q,"absolutePos")&&(Q.posTotal=Q.absolutePos,delete Q.absolutePos),!Q.negTotal&&k(Q.absoluteNeg)&&w(Q,"absoluteNeg")&&(Q.negTotal=Q.absoluteNeg,delete Q.absoluteNeg)),he.isSum||(Q.connectorThreshold=Q.threshold+Q.stackTotal),Y.reversed?(H=ge>=0?$-ge:$+ge,W=$):(H=$,W=$-ge),he.below=H<=j,ae.y=Y.translate(H,!1,!0,!1,!0),ae.height=Math.abs(ae.y-Y.translate(W,!1,!0,!1,!0));let le=Y.waterfall.dummyStackItem;le&&(le.x=re,le.label=R[re].label,le.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[re],this.stackedYPos[re],void 0,this.xAxis))}}else $=Math.max(G,G+ge)+Ce[0],ae.y=Y.translate($,!1,!0,!1,!0),he.isSum?(ae.y=Y.translate(Ce[1],!1,!0,!1,!0),ae.height=Math.min(Y.translate(Ce[0],!1,!0,!1,!0),Y.len)-ae.y,he.below=Ce[1]<=j):he.isIntermediateSum?(ge>=0?(H=Ce[1]+L,W=L):(H=L,W=Ce[1]+L),Y.reversed&&(H^=W,W^=H,H^=W),ae.y=Y.translate(H,!1,!0,!1,!0),ae.height=Math.abs(ae.y-Math.min(Y.translate(W,!1,!0,!1,!0),Y.len)),L+=Ce[1],he.below=H<=j):(ae.height=ie>0?Y.translate(G,!1,!0,!1,!0)-ae.y:Y.translate(G,!1,!0,!1,!0)-Y.translate(G-ie,!1,!0,!1,!0),G+=ie,he.below=G<j),ae.height<0&&(ae.y+=ae.height,ae.height*=-1);he.plotY=ae.y,he.yBottom=ae.y+ae.height,ae.height<=X&&!he.isNull?(ae.height=X,ae.y-=B,he.yBottom=ae.y+ae.height,he.plotY=ae.y,ge<0?he.minPointLengthOffset=-B:he.minPointLengthOffset=B):(he.isNull&&(ae.width=0),he.minPointLengthOffset=0);let ke=he.plotY+(he.negative?ae.height:0);he.below&&(he.plotY+=ae.height),he.tooltipPos&&(this.chart.inverted?he.tooltipPos[0]=Y.len-ke:he.tooltipPos[1]=ke),he.isInside=this.isPointInside(he);let K=T(he.yBottom,this.borderWidth);ae.y=T(ae.y,this.borderWidth),ae.height=K-ae.y,x(!0,he.shapeArgs,ae)}},{order:2}),a.registerSeriesType("waterfall",I),I}),s(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(a,l,h,r,p,m,g,v){return a.RadialAxis=g,r.compose(a.Axis,a.Chart,a.Legend),p.compose(a.Axis,a.Chart,a.Legend),h.compose(a.Chart,a.Pointer),m.compose(a.Axis,a.Chart,a.Pointer,a.Series,a.Tick,a.Point,l.seriesTypes.areasplinerange,l.seriesTypes.column,l.seriesTypes.line,l.seriesTypes.spline),v.compose(a.Axis,a.Chart),a})})})(xS);var VO=xS.exports;const GO=ld(VO);var vS={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function s(a,l,h,r){a.hasOwnProperty(l)||(a[l]=r.apply(null,h),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:a[l]}})))}s(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var a;return function(l){l.compose=function(r){return r.navigation||(r.navigation=new h(r)),r};class h{constructor(p){this.updates=[],this.chart=p}addUpdate(p){this.chart.navigation.updates.push(p)}update(p,m){this.updates.forEach(g=>{g.call(this.chart,p,m)})}}l.Additions=h}(a||(a={})),a}),s(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(a){let{isTouchDevice:l}=a;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:l?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),s(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var a;return function(l){let h=[];function r(m,g,v,y){return[["M",m,g+2.5],["L",m+v,g+2.5],["M",m,g+y/2+.5],["L",m+v,g+y/2+.5],["M",m,g+y-1.5],["L",m+v,g+y-1.5]]}function p(m,g,v,y){let C=y/3-2;return[].concat(this.circle(v-C,g,C,C),this.circle(v-C,g+C+4,C,C),this.circle(v-C,g+2*(C+4),C,C))}l.compose=function(m){if(h.indexOf(m)===-1){h.push(m);let g=m.prototype.symbols;g.menu=r,g.menuball=p.bind(g)}}}(a||(a={})),a}),s(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,h){let{composed:r}=l,{addEvent:p,fireEvent:m,pushUnique:g}=h;function v(){this.fullscreen=new y(this)}class y{static compose(b){g(r,"Fullscreen")&&p(b,"beforeRender",v)}constructor(b){this.chart=b,this.isOpen=!1;let T=b.renderTo;!this.browserProps&&(typeof T.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:T.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:T.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:T.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let b=this,T=b.chart,S=T.options.chart;m(T,"fullscreenClose",null,function(){b.isOpen&&b.browserProps&&T.container.ownerDocument instanceof Document&&T.container.ownerDocument[b.browserProps.exitFullscreen](),b.unbindFullscreenEvent&&(b.unbindFullscreenEvent=b.unbindFullscreenEvent()),T.setSize(b.origWidth,b.origHeight,!1),b.origWidth=void 0,b.origHeight=void 0,S.width=b.origWidthOption,S.height=b.origHeightOption,b.origWidthOption=void 0,b.origHeightOption=void 0,b.isOpen=!1,b.setButtonText()})}open(){let b=this,T=b.chart,S=T.options.chart;m(T,"fullscreenOpen",null,function(){if(S&&(b.origWidthOption=S.width,b.origHeightOption=S.height),b.origWidth=T.chartWidth,b.origHeight=T.chartHeight,b.browserProps){let k=p(T.container.ownerDocument,b.browserProps.fullscreenChange,function(){b.isOpen?(b.isOpen=!1,b.close()):(T.setSize(null,null,!1),b.isOpen=!0,b.setButtonText())}),x=p(T,"destroy",k);b.unbindFullscreenEvent=()=>{k(),x()};let A=T.renderTo[b.browserProps.requestFullscreen]();A&&A.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let b=this.chart,T=b.exportDivElements,S=b.options.exporting,k=S&&S.buttons&&S.buttons.contextButton.menuItems,x=b.options.lang;if(S&&S.menuItemDefinitions&&x&&x.exitFullscreen&&x.viewFullscreen&&k&&T){let A=T[k.indexOf("viewFullscreen")];A&&a.setElementHTML(A,this.isOpen?x.exitFullscreen:S.menuItemDefinitions.viewFullscreen.text||x.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return y}),s(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l){let{win:h}=a,{discardElement:r,objectEach:p}=l,m={ajax:function(g){let v={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},y=new XMLHttpRequest;function C(b,T){g.error&&g.error(b,T)}if(!g.url)return!1;y.open((g.type||"get").toUpperCase(),g.url,!0),g.headers&&g.headers["Content-Type"]||y.setRequestHeader("Content-Type",v[g.dataType||"json"]||v.text),p(g.headers,function(b,T){y.setRequestHeader(T,b)}),g.responseType&&(y.responseType=g.responseType),y.onreadystatechange=function(){let b;if(y.readyState===4){if(y.status===200){if(g.responseType!=="blob"&&(b=y.responseText,g.dataType==="json"))try{b=JSON.parse(b)}catch(T){if(T instanceof Error)return C(y,T)}return g.success&&g.success(b,y)}C(y,y.responseText)}},g.data&&typeof g.data!="string"&&(g.data=JSON.stringify(g.data)),y.send(g.data)},getJSON:function(g,v){m.ajax({url:g,success:v,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(g,v,y){let C=new h.FormData;p(v,function(S,k){C.append(k,S)}),C.append("b64","true");let{filename:b,type:T}=v;return h.fetch(g,{method:"POST",body:C,...y}).then(S=>{S.ok&&S.text().then(k=>{let x=document.createElement("a");x.href=`data:${T};base64,${k}`,x.download=b,x.click(),r(x)})})}};return m}),s(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(a,l,h,r,p,m,g,v,y,C){var b;let{defaultOptions:T}=r,{doc:S,SVG_NS:k,win:x}=v,{addEvent:A,css:D,createElement:w,discardElement:I,extend:N,find:q,fireEvent:Y,isObject:X,merge:B,objectEach:j,pick:O,removeEvent:R,uniqueKey:L}=C;return function(G){let $,F=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],H=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let W=["clipPath","defs","desc"];function re(Ee){let Ie,Fe,He=this,Ae=He.renderer,xe=B(He.options.navigation.buttonOptions,Ee),me=xe.onclick,Me=xe.menuItems,De=xe.symbolSize||12;if(He.btnCount||(He.btnCount=0),He.exportDivElements||(He.exportDivElements=[],He.exportSVGElements=[]),xe.enabled===!1||!xe.theme)return;let Pe=He.styledMode?{}:xe.theme;me?Fe=function(Xe){Xe&&Xe.stopPropagation(),me.call(He,Xe)}:Me&&(Fe=function(Xe){Xe&&Xe.stopPropagation(),He.contextMenu(je.menuClassName,Me,je.translateX||0,je.translateY||0,je.width||0,je.height||0,je),je.setState(2)}),xe.text&&xe.symbol?Pe.paddingLeft=O(Pe.paddingLeft,30):xe.text||N(Pe,{width:xe.width,height:xe.height,padding:0});let je=Ae.button(xe.text,0,0,Fe,Pe,void 0,void 0,void 0,void 0,xe.useHTML).addClass(Ee.className).attr({title:O(He.options.lang[xe._titleKey||xe.titleKey],"")});je.menuClassName=Ee.menuClassName||"highcharts-menu-"+He.btnCount++,xe.symbol&&(Ie=Ae.symbol(xe.symbol,Math.round((xe.symbolX||0)-De/2),Math.round((xe.symbolY||0)-De/2),De,De,{width:De,height:De}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(je),He.styledMode||Ie.attr({stroke:xe.symbolStroke,fill:xe.symbolFill,"stroke-width":xe.symbolStrokeWidth||1})),je.add(He.exportingGroup).align(N(xe,{width:je.width,x:O(xe.x,He.buttonOffset)}),!0,"spacingBox"),He.buttonOffset+=((je.width||0)+xe.buttonSpacing)*(xe.align==="right"?-1:1),He.exportSVGElements.push(je,Ie)}function he(){if(!this.printReverseInfo)return;let{childNodes:Ee,origDisplay:Ie,resetParams:Fe}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Ee,function(He,Ae){He.nodeType===1&&(He.style.display=Ie[Ae]||"")}),this.isPrinting=!1,Fe&&this.setSize.apply(this,Fe),delete this.printReverseInfo,$=void 0,Y(this,"afterPrint")}function ie(){var He;let Ee=S.body,Ie=this.options.exporting.printMaxWidth,Fe={childNodes:Ee.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(He=this.pointer)==null||He.reset(void 0,0),Y(this,"beforePrint"),Ie&&this.chartWidth>Ie&&(Fe.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Ie,void 0,!1)),[].forEach.call(Fe.childNodes,function(Ae,xe){Ae.nodeType===1&&(Fe.origDisplay[xe]=Ae.style.display,Ae.style.display="none")}),this.moveContainers(Ee),this.printReverseInfo=Fe}function ae(Ee){Ee.renderExporting(),A(Ee,"redraw",Ee.renderExporting),A(Ee,"destroy",Ee.destroyExport)}function Ce(Ee,Ie,Fe,He,Ae,xe,me){var wt,Rt;let Me=this,De=Me.options.navigation,Pe=Me.chartWidth,je=Me.chartHeight,Xe="cache-"+Ee,tt=Math.max(Ae,xe),rt,dt=Me[Xe];dt||(Me.exportContextMenu=Me[Xe]=dt=w("div",{className:Ee},{position:"absolute",zIndex:1e3,padding:tt+"px",pointerEvents:"auto",...Me.renderer.style},((wt=Me.scrollablePlotArea)==null?void 0:wt.fixedDiv)||Me.container),rt=w("ul",{className:"highcharts-menu"},Me.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),Me.styledMode||D(rt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},De.menuStyle)),dt.hideMenu=function(){D(dt,{display:"none"}),me&&me.setState(0),Me.openMenu=!1,D(Me.renderTo,{overflow:"hidden"}),D(Me.container,{overflow:"hidden"}),C.clearTimeout(dt.hideTimer),Y(Me,"exportMenuHidden")},Me.exportEvents.push(A(dt,"mouseleave",function(){dt.hideTimer=x.setTimeout(dt.hideMenu,500)}),A(dt,"mouseenter",function(){C.clearTimeout(dt.hideTimer)}),A(S,"mouseup",function(ft){var Et;(Et=Me.pointer)!=null&&Et.inClass(ft.target,Ee)||dt.hideMenu()}),A(dt,"click",function(){Me.openMenu&&dt.hideMenu()})),Ie.forEach(function(ft){if(typeof ft=="string"&&(ft=Me.options.exporting.menuItemDefinitions[ft]),X(ft,!0)){let Et;ft.separator?Et=w("hr",void 0,void 0,rt):(ft.textKey==="viewData"&&Me.isDataTableVisible&&(ft.textKey="hideData"),Et=w("li",{className:"highcharts-menu-item",onclick:function(Tt){Tt&&Tt.stopPropagation(),dt.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(Me,arguments)}},void 0,rt),a.setElementHTML(Et,ft.text||Me.options.lang[ft.textKey]),Me.styledMode||(Et.onmouseover=function(){D(this,De.menuItemHoverStyle)},Et.onmouseout=function(){D(this,De.menuItemStyle)},D(Et,N({cursor:"pointer"},De.menuItemStyle||{})))),Me.exportDivElements.push(Et)}}),Me.exportDivElements.push(rt,dt),Me.exportMenuWidth=dt.offsetWidth,Me.exportMenuHeight=dt.offsetHeight);let gt={display:"block"};Fe+(Me.exportMenuWidth||0)>Pe?gt.right=Pe-Fe-Ae-tt+"px":gt.left=Fe-tt+"px",He+xe+(Me.exportMenuHeight||0)>je&&((Rt=me.alignOptions)==null?void 0:Rt.verticalAlign)!=="top"?gt.bottom=je-He-tt+"px":gt.top=He+xe-tt+"px",D(dt,gt),D(Me.renderTo,{overflow:""}),D(Me.container,{overflow:""}),Me.openMenu=!0,Y(Me,"exportMenuShown")}function ge(Ee){let Ie,Fe=Ee?Ee.target:this,He=Fe.exportSVGElements,Ae=Fe.exportDivElements,xe=Fe.exportEvents;He&&(He.forEach((me,Me)=>{me&&(me.onclick=me.ontouchstart=null,Fe[Ie="cache-"+me.menuClassName]&&delete Fe[Ie],He[Me]=me.destroy())}),He.length=0),Fe.exportingGroup&&(Fe.exportingGroup.destroy(),delete Fe.exportingGroup),Ae&&(Ae.forEach(function(me,Me){me&&(C.clearTimeout(me.hideTimer),R(me,"mouseleave"),Ae[Me]=me.onmouseout=me.onmouseover=me.ontouchstart=me.onclick=null,I(me))}),Ae.length=0),xe&&(xe.forEach(function(me){me()}),xe.length=0)}function ke(Ee,Ie){let Fe=this.getSVGForExport(Ee,Ie);Ee=B(this.options.exporting,Ee),y.post(Ee.url,{filename:Ee.filename?Ee.filename.replace(/\//g,"-"):this.getFilename(),type:Ee.type,width:Ee.width,scale:Ee.scale,svg:Fe},Ee.fetchOptions)}function K(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function Q(){let Ee=this.userOptions.title&&this.userOptions.title.text,Ie=this.options.exporting.filename;return Ie?Ie.replace(/\//g,"-"):(typeof Ee=="string"&&(Ie=Ee.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Ie||Ie.length<5)&&(Ie="chart"),Ie)}function le(Ee){let Ie,Fe,He=B(this.options,Ee);He.plotOptions=B(this.userOptions.plotOptions,Ee&&Ee.plotOptions),He.time=B(this.userOptions.time,Ee&&Ee.time);let Ae=w("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},S.body),xe=this.renderTo.style.width,me=this.renderTo.style.height,Me=He.exporting.sourceWidth||He.chart.width||/px$/.test(xe)&&parseInt(xe,10)||(He.isGantt?800:600),De=He.exporting.sourceHeight||He.chart.height||/px$/.test(me)&&parseInt(me,10)||400;N(He.chart,{animation:!1,renderTo:Ae,forExport:!0,renderer:"SVGRenderer",width:Me,height:De}),He.exporting.enabled=!1,delete He.data,He.series=[],this.series.forEach(function(Xe){(Fe=B(Xe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Xe.visible})).isInternal||He.series.push(Fe)});let Pe={};this.axes.forEach(function(Xe){Xe.userOptions.internalKey||(Xe.userOptions.internalKey=L()),Xe.options.isInternal||(Pe[Xe.coll]||(Pe[Xe.coll]=!0,He[Xe.coll]=[]),He[Xe.coll].push(B(Xe.userOptions,{visible:Xe.visible,type:Xe.type,uniqueNames:Xe.uniqueNames})))}),He.colorAxis=this.userOptions.colorAxis;let je=new this.constructor(He,this.callback);return Ee&&["xAxis","yAxis","series"].forEach(function(Xe){let tt={};Ee[Xe]&&(tt[Xe]=Ee[Xe],je.update(tt))}),this.axes.forEach(function(Xe){let tt=q(je.axes,function(wt){return wt.options.internalKey===Xe.userOptions.internalKey}),rt=Xe.getExtremes(),dt=rt.userMin,gt=rt.userMax;tt&&(dt!==void 0&&dt!==tt.min||gt!==void 0&&gt!==tt.max)&&tt.setExtremes(dt,gt,!0,!1)}),Ie=je.getChartHTML(),Y(this,"getSVG",{chartCopy:je}),Ie=this.sanitizeSVG(Ie,He),He=null,je.destroy(),I(Ae),Ie}function _e(Ee,Ie){let Fe=this.options.exporting;return this.getSVG(B({chart:{borderRadius:0}},Fe.chartOptions,Ie,{exporting:{sourceWidth:Ee&&Ee.sourceWidth||Fe.sourceWidth,sourceHeight:Ee&&Ee.sourceHeight||Fe.sourceHeight}}))}function J(){let Ee,Ie=G.inlineAllowlist,Fe={},He=S.createElement("iframe");D(He,{width:"1px",height:"1px",visibility:"hidden"}),S.body.appendChild(He);let Ae=He.contentWindow&&He.contentWindow.document;Ae&&Ae.body.appendChild(Ae.createElementNS(k,"svg")),function xe(me){let Me,De,Pe,je,Xe,tt,rt={};if(Ae&&me.nodeType===1&&W.indexOf(me.nodeName)===-1){if(Me=x.getComputedStyle(me,null),De=me.nodeName==="svg"?{}:x.getComputedStyle(me.parentNode,null),!Fe[me.nodeName]){Ee=Ae.getElementsByTagName("svg")[0],Pe=Ae.createElementNS(me.namespaceURI,me.nodeName),Ee.appendChild(Pe);let dt=x.getComputedStyle(Pe,null),gt={};for(let wt in dt)wt.length<1e3&&typeof dt[wt]=="string"&&!/^\d+$/.test(wt)&&(gt[wt]=dt[wt]);Fe[me.nodeName]=gt,me.nodeName==="text"&&delete Fe.text.fill,Ee.removeChild(Pe)}for(let dt in Me)(v.isFirefox||v.isMS||v.isSafari||Object.hasOwnProperty.call(Me,dt))&&function(gt,wt){if(je=Xe=!1,Ie.length){for(tt=Ie.length;tt--&&!Xe;)Xe=Ie[tt].test(wt);je=!Xe}for(wt==="transform"&&gt==="none"&&(je=!0),tt=F.length;tt--&&!je;){if(wt.length>1e3)throw Error("Input too long");je=F[tt].test(wt)||typeof gt=="function"}!je&&(De[wt]!==gt||me.nodeName==="svg")&&Fe[me.nodeName][wt]!==gt&&(H.indexOf(wt)===-1?rt[wt]=gt:gt&&me.setAttribute(wt.replace(/[A-Z]/g,function(Rt){return"-"+Rt.toLowerCase()}),gt))}(Me[dt],dt);if(D(me,rt),me.nodeName==="svg"&&me.setAttribute("stroke-width","1px"),me.nodeName==="text")return;[].forEach.call(me.children||me.childNodes,xe)}}(this.container.querySelector("svg")),Ee.parentNode.removeChild(Ee),He.parentNode.removeChild(He)}function ne(Ee){let{scrollablePlotArea:Ie}=this;(Ie?[Ie.fixedDiv,Ie.scrollingContainer]:[this.container]).forEach(function(Fe){Ee.appendChild(Fe)})}function ue(){let Ee=this,Ie=(Fe,He,Ae)=>{Ee.isDirtyExporting=!0,B(!0,Ee.options[Fe],He),O(Ae,!0)&&Ee.redraw()};Ee.exporting={update:function(Fe,He){Ie("exporting",Fe,He)}},h.compose(Ee).navigation.addUpdate((Fe,He)=>{Ie("navigation",Fe,He)})}function ye(){let Ee=this;Ee.isPrinting||($=Ee,v.isSafari||Ee.beforePrint(),setTimeout(()=>{x.focus(),x.print(),v.isSafari||setTimeout(()=>{Ee.afterPrint()},1e3)},1))}function we(){let Ee=this,Ie=Ee.options.exporting,Fe=Ie.buttons,He=Ee.isDirtyExporting||!Ee.exportSVGElements;Ee.buttonOffset=0,Ee.isDirtyExporting&&Ee.destroyExport(),He&&Ie.enabled!==!1&&(Ee.exportEvents=[],Ee.exportingGroup=Ee.exportingGroup||Ee.renderer.g("exporting-group").attr({zIndex:3}).add(),j(Fe,function(Ae){Ee.addButton(Ae)}),Ee.isDirtyExporting=!1)}function ze(Ee,Ie){let Fe=Ee.indexOf("</svg>")+6,He=Ee.substr(Fe);return Ee=Ee.substr(0,Fe),Ie&&Ie.exporting&&Ie.exporting.allowHTML&&He&&(He='<foreignObject x="0" y="0" width="'+Ie.chart.width+'" height="'+Ie.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+He.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Ee=Ee.replace("</svg>",He+"</svg>")),Ee=Ee.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"")}G.compose=function(Ee,Ie){m.compose(Ie),g.compose(Ee);let Fe=Ee.prototype;Fe.exportChart||(Fe.afterPrint=he,Fe.exportChart=ke,Fe.inlineStyles=J,Fe.print=ye,Fe.sanitizeSVG=ze,Fe.getChartHTML=K,Fe.getSVG=le,Fe.getSVGForExport=_e,Fe.getFilename=Q,Fe.moveContainers=ne,Fe.beforePrint=ie,Fe.contextMenu=Ce,Fe.addButton=re,Fe.destroyExport=ge,Fe.renderExporting=we,Fe.callbacks.push(ae),A(Ee,"init",ue),v.isSafari&&x.matchMedia("print").addListener(function(He){$&&(He.matches?$.beforePrint():$.afterPrint())}),T.exporting=B(p.exporting,T.exporting),T.lang=B(p.lang,T.lang),T.navigation=B(p.navigation,T.navigation))}}(b||(b={})),b}),s(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(a,l,h){return a.HttpUtilities=a.HttpUtilities||h,a.ajax=a.HttpUtilities.ajax,a.getJSON=a.HttpUtilities.getJSON,a.post=a.HttpUtilities.post,l.compose(a.Chart,a.Renderer),a})})})(vS);var HO=vS.exports;const WO=ld(HO);var bS={exports:{}};(function(i,e){(function(t,s){i.exports=s(Be)})(typeof self<"u"?self:un,function(t){return function(s){function a(h){if(l[h])return l[h].exports;var r=l[h]={i:h,l:!1,exports:{}};return s[h].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var l={};return a.m=s,a.c=l,a.d=function(h,r,p){a.o(h,r)||Object.defineProperty(h,r,{configurable:!1,enumerable:!0,get:p})},a.n=function(h){var r=h&&h.__esModule?function(){return h.default}:function(){return h};return a.d(r,"a",r),r},a.o=function(h,r){return Object.prototype.hasOwnProperty.call(h,r)},a.p="",a(a.s=0)}([function(s,a,l){function h(){return h=Object.assign?Object.assign.bind():function(x){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var w in D)Object.prototype.hasOwnProperty.call(D,w)&&(x[w]=D[w])}return x},h.apply(this,arguments)}function r(x){return v(x)||g(x)||m(x)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(x,A){{if(typeof x=="string")return y(x,A);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?y(x,A):void 0}}function g(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function v(x){if(Array.isArray(x))return y(x)}function y(x,A){(A==null||A>x.length)&&(A=x.length);for(var D=0,w=new Array(A);D<A;D++)w[D]=x[D];return w}function C(x){"@babel/helpers - typeof";return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(x)}Object.defineProperty(a,"__esModule",{value:!0}),l.d(a,"HighchartsReact",function(){return k});var b=l(1),T=l.n(b),S=typeof window<"u"?b.useLayoutEffect:b.useEffect,k=Object(b.memo)(Object(b.forwardRef)(function(x,A){var D=Object(b.useRef)(),w=Object(b.useRef)(),I=Object(b.useRef)(x.constructorType),N=Object(b.useRef)(x.highcharts);return S(function(){function q(){var X=x.highcharts||(typeof window>"u"?"undefined":C(window))==="object"&&window.Highcharts,B=x.constructorType||"chart";X?X[B]?x.options?w.current=X[B](D.current,x.options,x.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(w.current){if(x.allowChartUpdate!==!1)if(x.constructorType!==I.current||x.highcharts!==N.current)I.current=x.constructorType,N.current=x.highcharts,q();else if(!x.immutable&&w.current){var Y;(Y=w.current).update.apply(Y,[x.options].concat(r(x.updateArgs||[!0,!0])))}else q()}else q()},[x.options,x.allowChartUpdate,x.updateArgs,x.containerProps,x.highcharts,x.constructorType]),S(function(){return function(){w.current&&(w.current.destroy(),w.current=null)}},[]),Object(b.useImperativeHandle)(A,function(){return{get chart(){return w.current},container:D}},[]),T.a.createElement("div",h({},x.containerProps,{ref:D}))}));a.default=k},function(s,a){s.exports=t}])})})(bS);var qO=bS.exports;const _S=ld(qO),YO="_chartContainer_1sr1q_1",ZO="_chart_1sr1q_1",XO="_menu_1sr1q_10",_0={chartContainer:YO,chart:ZO,menu:XO},KO="",QO={"Bi-Week":" ",Week:KO},JO="Tden",e9={"Bi-Week":"Dvoutden",Week:JO},t9="Week",i9={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:t9,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},r9="Semana",n9={"Bi-Week":"Quincenal",Week:r9},s9="Semana",a9={"Bi-Week":"Cada dos semanas",Week:s9},o9="Semaine",l9={"Bi-Week":"Bi-hebdomadaire",Week:o9},c9="Minggu",h9={"Bi-Week":"",Week:c9},u9="",d9={"Bi-Week":"",Week:u9},p9="Uke",f9={"Bi-Week":"Toukentlig",Week:p9},m9="Week",g9={"Bi-Week":"",Week:m9},y9="",x9={"Bi-Week":"",Week:y9},v9="",b9={"Bi-Week":"",Week:v9},_9="Semana",w9={"Bi-Week":"Bimensal",Week:_9},T9="Semana",C9={"Bi-Week":"",Week:T9},E9="",S9={"Bi-Week":"",Week:E9},k9="",A9={"Bi-Week":"",Week:k9},M9="",P9={"Bi-Week":"",Week:M9},I9="",D9={"Bi-Week":"",Week:I9},L9="",R9={"Bi-Week":"-",Week:L9},z9="Hafta",N9={"Bi-Week":"Juft-Hafta",Week:z9},O9="Tun",j9={"Bi-Week":"K 2 tun ny",Week:O9},B9="",F9={"Bi-Week":"",Week:B9},U9="",$9={"Bi-Week":"",Week:U9},zn="default";Je.addResources("ar",zn,QO);Je.addResources("cs",zn,e9);Je.addResources("en",zn,i9);Je.addResources("es",zn,n9);Je.addResources("es_419",zn,a9);Je.addResources("fr",zn,l9);Je.addResources("id",zn,h9);Je.addResources("lo",zn,d9);Je.addResources("nb",zn,f9);Je.addResources("nl",zn,g9);Je.addResources("prs",zn,x9);Je.addResources("ps",zn,b9);Je.addResources("pt",zn,w9);Je.addResources("pt_BR",zn,C9);Je.addResources("ru",zn,S9);Je.addResources("si",zn,A9);Je.addResources("uk",zn,P9);Je.addResources("ur",zn,D9);Je.addResources("uz_UZ_Cyrl",zn,R9);Je.addResources("uz_UZ_Latn",zn,N9);Je.addResources("vi",zn,j9);Je.addResources("zh",zn,F9);Je.addResources("zh_CN",zn,$9);const wS={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},V9={nepali:{"ne-NP":{monthNames:["","","","","","","","","","","",""],dayNamesShort:["","","","","","",""],numbers:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},Ca={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class G9 extends Ln.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:s,isoMonth:a,isoDay:l}=e.getISOFields();return(t=T0({year:s,month:a,day:l}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:s}=e;return Ca[t][s]}month(e){var t;const{isoYear:s,isoMonth:a,isoDay:l}=e.getISOFields();return(t=T0({year:s,month:a,day:l}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return TS(t)}day(e){const{isoYear:t,isoMonth:s,isoDay:a}=e.getISOFields(),{day:l}=T0({year:t,month:s,day:a});return l}dateFromFields(e,t){const{year:s,day:a,month:l}=w0({year:e.year,month:e.month,day:e.day},t);return new Ln.PlainDate(s,l,a,this)}yearMonthFromFields(e){const{year:t,day:s,month:a}=w0({year:e.year,month:e.month,day:e.day});return new Ln.PlainYearMonth(t,a,this,s)}monthDayFromFields(e){const{year:t,day:s,month:a}=w0({year:e.year,month:e.month,day:e.day});return new Ln.PlainMonthDay(s,a,this,t)}}const xv=Object.keys(Ca),ey=Number(xv[0]),ty=Number(xv[xv.length-1]),w0=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<ey||t>ty)throw new Error(`Conversions are only possible between ${ey} and ${ty} in Nepali calendar`);const{month:s,day:a=1}=i;if(e==="reject"&&(s<1||s>12||a>Ca[t][s]))throw new Error("Invalid date in Nepali calendar");let l=0,h=s;const r=t-(s>9||h===9&&a>=Ca[t][0]?56:57);for(s!==9&&(l=a,h--);h!==9;)h<=0&&(h=12,t--),l+=Ca[t][h],h--;s===9?(l+=a-Ca[t][0],l<0&&(l+=Ln.PlainDate.from({year:r,day:1,month:1}).daysInYear)):l+=Ca[t][9]-Ca[t][0];const p=Ln.PlainDate.from({year:r,month:1,day:1}).add({days:l});return{year:p.year,month:p.month,monthCode:TS(p.month),day:p.day}},T0=i=>{const e=Ln.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,s=e.dayOfYear;let a=t+56;if(!Ca[a])throw new Error(`Conversions are only possible between ${ey} and ${ty} in Nepali calendar`);let l=9;const h=Ca[a][0];let r=Ca[a][l]-h+1;for(;s>r;){var p;l++,l>12&&(l=1,a++),r+=(p=Ca[a])===null||p===void 0?void 0:p[l]}if(!Ca[a])throw new Error(`Conversions are only possible between ${ey} and ${ty} in Nepali calendar`);const m=Ca[a][l]-(r-s);return{year:a,month:l,day:m}};function TS(i){return`M${i.toString().padStart(2,"0")}`}const Hb={nepali:{calendar:new G9,locales:V9.nepali,defaultLocale:"en-NP"}},H9=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function W9(i,e){const t=i.match(H9);if(!t)throw new Error(Je.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let s,a,l,h;t[1]?(s=t[1],a=t[3],l=t[5],h="YYYY-MM-DD"):(l=t[6],a=t[8],s=t[10],h="DD-MM-YYYY");const r=parseInt(s,10),p=parseInt(a,10),m=parseInt(l,10);return{year:r,month:p,day:m,format:h}}let l2;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(l2||(l2={}));const Ec=i=>!!Hb[i],uc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},Qa=(i,e,t)=>{var s;const a=(s=i.eraYear)!==null&&s!==void 0?s:i.year,l=uc(i.month);let h=i.day;e==="endOfMonth"?h=i.daysInMonth:e==="startOfMonth"&&(h=1);const r=uc(h);return t==="DD-MM-YYYY"?`${r}-${l}-${a}`:`${a}-${l}-${r}`},CS=i=>{var e;if(!Ec(i))return i;const s=(e=Hb[i])===null||e===void 0?void 0:e.calendar;if(!s)throw new Error(`No implemenation found for custom calendar ${i}`);return s},q9=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],Y9=(i,e)=>{const t=Object.keys(i).find(s=>{var a,l;return((a=s.split("-"))===null||a===void 0||(l=a[0])===null||l===void 0?void 0:l.toLowerCase())===e});if(t)return i[t]},Wb=(i,e)=>{var t,s;const a=Hb[i];if(!a)return;const l=a.locales||{},h=(t=(s=e&&(l==null?void 0:l[e]))!==null&&s!==void 0?s:Y9(l,e))!==null&&t!==void 0?t:l==null?void 0:l[a.defaultLocale];if(!h)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${a.defaultLocale}`);return h},Z9=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const s=Ec(e.calendar),a=i instanceof Ln.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return s?Qa(i):a.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},X9=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const s=Ec(e.calendar),a=Wb(e.calendar,e.locale);return s?(a==null||(t=a.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:q9.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},K9=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const s=Ec(e.calendar),a=Wb(e.calendar,e.locale);return s?a==null?void 0:a.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},Q9=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=Ec(e.calendar),s=Wb(e.calendar,e.locale),a=s==null?void 0:s.dayNamesShort[i.dayOfWeek-1];return t&&a?a:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},J9=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return Ec(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},wh={localiseYear:J9,localiseDateLabel:Z9,localiseWeekLabel:X9,localiseMonth:K9,localiseWeekDayLabel:Q9},ES=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,s]=i.replace(/_/g,"-").split("-");let a=e;s&&(a=`${a}-${s}`),t&&(a=`${a}-${t}`);try{const l=Intl.DateTimeFormat.supportedLocalesOf(a);return l&&l.length===1?a:void 0}catch{return}},ej=i=>{let{date:e,calendar:t}=i;const{year:s,month:a,day:l}=W9(e);return Ln.PlainDate.from({year:s,month:a,day:l,calendar:t})},Pl=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return ej({date:e,calendar:t});if(e instanceof Date)return Ln.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Ln.PlainDate)return Ln.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(Je.t('Unrecognized date, received "{{date}}"',{date:e}))},ss=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],tj=ss.filter(i=>i.match(/WEEKLY/)),SS=ss.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),Hf=ss.filter(i=>i.match(/QUARTERLY/)),Wf=ss.filter(i=>i.match(/SIXMONTHLY/)),ij=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],rj=ss.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),kS=SS.filter(i=>i!=="MONTHLY"),nj=ss.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),sj=ss.filter(i=>i.match(/^FY[A-Z]{3}$/));[...ij,...ss.filter(i=>i.match(/JAN$/))];const aj=ss.filter(i=>i.match(/FEB$/)),oj=ss.filter(i=>i.match(/MAR$/)),lj=ss.filter(i=>i.match(/APR$/)),cj=ss.filter(i=>i.match(/MAY$/)),hj=ss.filter(i=>i.match(/JUN$/)),uj=ss.filter(i=>i.match(/JUL$/)),dj=ss.filter(i=>i.match(/AUG$/)),pj=ss.filter(i=>i.match(/SEP$/)),fj=ss.filter(i=>i.match(/OCT$/)),mj=ss.filter(i=>i.match(/NOV$/)),gj=ss.filter(i=>i.match(/DEC/)),{localiseDateLabel:yj}=wh,AS=i=>{let{date:e,calendar:t,locale:s}=i;const a=e.year,l=String(e.month).padStart(2,"0"),h=String(e.day).padStart(2,"0"),r=`${a}${l}${h}`,p=yj(e,{calendar:t,locale:s},{dateStyle:"long"});return{periodType:"DAILY",id:r,iso:r,displayName:p,name:Qa(e),startDate:Qa(e),endDate:Qa(e)}},xj=i=>{let{year:e,calendar:t,endsBefore:s,locale:a}=i;const l=s?Pl({calendar:t,date:s}):null,h=Ln.PlainDate.from({year:e,month:1,day:1,calendar:t}),r=[];for(let p=0;p<h.daysInYear;p++){const m=h.add({days:p});if(l&&Ln.PlainDate.compare(m,l)>-1)break;const g=AS({date:m,calendar:t,locale:a});r.push(g)}return r},td=i=>aj.includes(i)?"FEB":oj.includes(i)?"MAR":lj.includes(i)?"APR":cj.includes(i)?"MAY":hj.includes(i)?"JUN":uj.includes(i)?"JUL":dj.includes(i)?"AUG":pj.includes(i)?"SEP":fj.includes(i)?"OCT":mj.includes(i)?"NOV":gj.includes(i)?"DEC":"JAN",Vo={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},vj=i=>{let{periodType:e,month:t,year:s,calendar:a,locale:l}=i;const h=Cj({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),r=_j(e),p=t.add({months:r}),m=bj({periodType:e,currentMonth:t,year:s,index:h});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const g=Ln.PlainDate.from({year:p.year,month:p.month,day:1,calendar:p.calendar}).subtract({days:1}),v=wj({periodType:e,month:t,locale:l,calendar:a,nextMonth:p.subtract({months:1}),index:h});return{periodType:e,id:m,iso:m,name:v,displayName:v,startDate:Qa(t,"startOfMonth"),endDate:Qa(g,"endOfMonth")}},bj=i=>{let{periodType:e,currentMonth:t,year:s,index:a}=i;if(e==="BIMONTHLY")return`${s}${uc(a)}B`;if(e==="QUARTERLY")return`${s}Q${a}`;if(e==="SIXMONTHLY")return`${s}S${a}`;if(Hf.includes(e)){const l=Vo[td(e)].name;return`${s}${l}Q${a}`}if(Wf.includes(e)){const l=Vo[td(e)].name;return`${s}${l}S${a}`}return`${s}${uc(t.month)}`},_j=i=>{if(Wf.includes(i))return 6;if(Hf.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},wj=i=>{const{periodType:e,month:t,nextMonth:s,calendar:a,locale:l}=i;if(Ec(a))return Tj(i);const h={month:"long",year:"numeric",calendar:a},r={month:"long",calendar:a};let p="";if(kS.includes(e)){const m=t.year===s.year?r:h;p=`${t.toLocaleString(l,m)} - ${s.toLocaleString(l,h)}`}else p=`${t.toLocaleString(l,h)}`;return p=p.replace(/ERA\d+\s*/g,"").trim(),p},Tj=i=>{let{periodType:e,month:t,nextMonth:s,calendar:a,locale:l}=i,h="";if(kS.includes(e)){const r=t.year!==s.year;h=`${wh.localiseMonth(t,{locale:l,calendar:a},{})}${r?` ${t.year}`:""} - ${wh.localiseMonth(s,{locale:l,calendar:a},{})} ${s.year}`}else h=`${wh.localiseMonth(t,{locale:l,calendar:a},{})} ${s.year}`;return h},Cj=i=>{let{periodType:e,month:t,monthsInYear:s}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(Hf.includes(e))return Sj(e,t,s);if(Wf.includes(e))return Ej(e,t,s);throw new Error(`Unrecognized period type "${e}"`)},MS=(i,e)=>[...Array(e-i+1).fill(null).map((s,a)=>a+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),PS=(i,e)=>{const t=[];for(let s=0;s<12;s+=e)t.push(i.slice(s,s+e));return t},Ej=(i,e,t)=>{const s=td(i),a=Vo[s].value,l=MS(a,t);return PS(l,6)[1].includes(e)?2:1},Sj=(i,e,t)=>{const s=td(i),a=Vo[s].value,l=MS(a,t),h=PS(l,3);return h[1].includes(e)?2:h[2].includes(e)?3:h[3].includes(e)?4:1},qb=i=>{let{period:e,date:t,calendar:s}=i;const a=Pl({calendar:s,date:e.startDate}),l=Pl({calendar:s,date:e.endDate}),h=Ln.PlainDate.compare(t,a)<1,r=Ln.PlainDate.compare(a,t)===-1,p=Ln.PlainDate.compare(t,l)<1;return h||r&&p},kj=i=>{let{year:e,calendar:t,periodType:s,endsBefore:a,locale:l}=i,h=Ln.PlainDate.from({year:e,month:Mj(s),day:t.toString()==="nepali"?14:1,calendar:t});const r=[];for(;h.year===e||Pj(s,r.length);){const p=Ij({periodType:s,currentMonth:h.month,year:e,calendar:t});if(!Aj(t,h)){const v=vj({periodType:s,month:h,year:e,calendar:t,locale:l});if(a&&qb({period:v,date:a,calendar:t}))break;r.push(v)}const g=h.add({months:p});h=Pl({date:g,calendar:t})}return r},Aj=(i,e)=>i==="ethiopic"&&e.month===13,Mj=i=>{if(rj.includes(i)){const e=td(i);return Vo[e].value}return 1},Pj=(i,e)=>Wf.includes(i)?e<2:Hf.includes(i)?e<4:!1,Ij=i=>{let{periodType:e}=i;if(Wf.includes(e))return 6;if(Hf.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},Kl={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},Dj=i=>{let{year:e,calendar:t,periodType:s,startingDay:a,endsBefore:l}=i;const h=Lj(s,a);let r=Rj({year:e,calendar:t,periodType:s,startingDay:h});const p=[];let m=1;const g=s==="BIWEEKLY"?13:6;do{const v=r.add({days:g});if(l&&qb({period:{startDate:Qa(r),endDate:Qa(v)},date:l,calendar:t}))break;const y=Nj({periodType:s,startingDay:h,year:e,weekIndex:m});if(!(v.year===e+1&&v.day>=4)){const C=Oj({periodType:s,date:r,nextWeek:v,weekIndex:m});p.push({periodType:s,id:y,iso:y,name:C,displayName:C,startDate:Qa(r),endDate:Qa(v)})}r=Pl({date:v,calendar:t}).add({days:1}),m++}while(r.year===e);return p},Lj=(i,e)=>{switch(i){case"WEEKLYMON":return Kl.Monday;case"WEEKLYTUE":return Kl.Tuesday;case"WEEKLYWED":return Kl.Wednesday;case"WEEKLYTHU":return Kl.Thursday;case"WEEKLYFRI":return Kl.Friday;case"WEEKLYSAT":return Kl.Saturday;case"WEEKLYSUN":return Kl.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||Kl.Monday}},Rj=i=>{const{year:e,calendar:t,startingDay:s}=i,a=Ln.PlainDate.from({year:e,month:1,day:4,calendar:t}),l=a.dayOfWeek-s;return l>0?a.subtract({days:l}):l<0?a.subtract({days:l+7}):a},zj={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},Nj=i=>{let{startingDay:e,periodType:t,year:s,weekIndex:a}=i;const l=t==="BIWEEKLY"?"BiW":"W";return`${s}${zj[e]}${l}${a}`},Oj=i=>{let{periodType:e,date:t,nextWeek:s,weekIndex:a}=i;const{year:l,month:h,day:r}=t,{year:p,month:m,day:g}=s;return`${e==="BIWEEKLY"?Je.t("Bi-Week"):Je.t("Week")} ${a} - ${l}-${uc(h)}-${uc(r)} - ${p}-${uc(m)}-${uc(g)}`},IS=i=>{if(i==="YEARLY")return 1;const e=td(i),t=Vo[e];return(t==null?void 0:t.value)||1},DS={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},LS=i=>{let{periodType:e,year:t,locale:s,calendar:a}=i;const l=IS(e),h=jj({periodType:e,year:t,month:l}),r=l.toString().padStart(2,"0"),p=Pl({date:`${t}-${r}-01`,calendar:a}),m=Pl({date:`${t+1}-${r}-01`,calendar:a}).subtract({days:1}),g=Fj(e,p,{locale:s,calendar:a});return{periodType:e,id:h,iso:h,name:g,displayName:g,startDate:Qa(p,"startOfMonth"),endDate:Qa(m,"endOfMonth")}},jj=i=>{let{periodType:e,year:t,month:s}=i;if(e==="YEARLY")return t.toString();if(Bj(e)){const a=DS[s];return`${t}${a}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},Bj=i=>sj.includes(i),Fj=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(Ec(t.calendar))return Uj(e,t);const s={month:"long",year:"numeric",calendar:t.calendar},a=wh.localiseMonth(e,t,s),l=wh.localiseMonth(e.add({months:e.monthsInYear-1}),t,s);let h=`${a} - ${l}`;return h=h.replace(/ERA\d+\s*/g,"").trim(),h},Uj=(i,e)=>{const t=l=>`${wh.localiseMonth(l,e,{})} ${l.year}`,s=Ln.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(s)}`},$j=i=>{let{year:e,calendar:t,periodType:s,endsBefore:a,yearsCount:l,locale:h}=i;const r=IS(s),p=Ln.PlainDate.from({year:e,month:r,day:t.toString()==="nepali"?14:1,calendar:t}),m=Ln.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),g=m.eraYear||m.year,v=[],y=l??e-g+1;for(let C=0;C<y;C++){const b=p.year-C,T=LS({periodType:s,year:b,locale:h,calendar:t});a&&qb({period:T,date:a,calendar:t})||v.push(T)}return v},hg=i=>{var e,t;let{periodType:s,year:a,endsBefore:l,calendar:h,locale:r="en",yearsCount:p=10,startingDay:m=1}=i,g;if(typeof a=="number")g=a;else if(!isNaN(a)&&!isNaN(parseInt(a)))g=parseInt(a);else throw new Error("year must be a number");const v=CS((e=wS[h])!==null&&e!==void 0?e:h),y=(t=ES(r))!==null&&t!==void 0?t:"en",C=l?Pl({calendar:v,date:l}):void 0;if(tj.includes(s))return Dj({year:g,periodType:s,calendar:v,startingDay:m,endsBefore:C});if(nj.includes(s))return $j({year:g,periodType:s,locale:y,calendar:v,endsBefore:C,yearsCount:p});if(SS.includes(s))return kj({year:g,periodType:s,locale:y,calendar:v,endsBefore:C});if(s==="DAILY")return xj({year:g,locale:y,calendar:v,endsBefore:C});throw new Error(`can not generate period for unrecognised period type "${s}"`)},Vj=new RegExp("^([0-9]{4})W([0-9]+)$"),Gj=new RegExp("^([0-9]{4})BiW([0-9]+)$"),Hj=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),Wj=new RegExp("^([0-9]{4})([0-9]{2})$"),qj=new RegExp("^([0-9]{4})([0-9]{2})B$"),Yj=new RegExp("^([0-9]{4})Q([0-9])$"),Zj=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),Xj=new RegExp("^([0-9]{4})S([0-9])$"),Kj=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),Qj=new RegExp("^([0-9]{4})$"),Jj=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),e8=Object.values(DS).slice(1).join("|"),t8=new RegExp(`^[0-9]{4}(${e8})?$`),i8=i=>t8.test(i),c2=Object.values(Vo).map(i=>{let{name:e}=i;return e}).join("|"),r8=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${c2})?Q[0-9]$`,`^[0-9]{4}(${c2})?S[0-9]$`].join("|"),n8=new RegExp(r8),s8=i=>n8.test(i),a8=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),o8=i=>/^[0-9]{8}$/.test(i),l8=i=>{if(Wj.test(i))return"MONTHLY";if(qj.test(i))return"BIMONTHLY";if(Yj.test(i))return"QUARTERLY";const e=i.match(Zj);if(e){const s=e[2],a=Object.entries(Vo).find(h=>{let[,{name:r}]=h;return r===s});if(!a)throw new Error("@TODO");const[l]=a;return`QUARTERLY${l}`}if(Xj.test(i))return"SIXMONTHLY";const t=i.match(Kj);if(t){const s=t[2],a=Object.entries(Vo).find(h=>{let[,{name:r}]=h;return r===s});if(!a)throw new Error("@TODO");const[l]=a;return`SIXMONTHLY${l}`}throw new Error(Je.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},c8=i=>{if(Vj.test(i))return"WEEKLY";if(Gj.test(i))return"BIWEEKLY";const e=i.match(Hj);if(e){const[,,t]=e,s=`WEEKLY${t.toUpperCase()}`;if(!ss.includes(s))throw new Error(Je.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return s}throw new Error(Je.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},h8=i=>{if(Qj.test(i))return"YEARLY";const e=i.match(Jj);if(e){const t=e[2].slice(0,3),s=Object.entries(Vo).find(l=>{let[,{name:h}]=l;return h.startsWith(t)});if(!s)throw new Error("@TODO");const[a]=s;return`FY${a}`}throw new Error(Je.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},Yb=i=>{var e,t;let{periodId:s,calendar:a,locale:l="en"}=i;const h=CS((e=wS[a])!==null&&e!==void 0?e:a),r=(t=ES(l))!==null&&t!==void 0?t:"en";if(i8(s)){const p=parseInt(s.substring(0,4),10),m=h8(s);return LS({year:p,periodType:m,calendar:h,locale:l})}if(s8(s)){const p=l8(s),m=parseInt(s.substring(0,4),10),v=hg({periodType:p,year:m,calendar:h,locale:r}).find(b=>{let{id:T}=b;return T===s});if(v)return v;const C=hg({year:m+1,periodType:p,calendar:h,locale:r}).slice(-1).find(b=>{let{id:T}=b;return T===s});if(!C)throw new Error(Je.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:s}));return C}if(a8(s)){const p=parseInt(s.substring(0,4),10),m=c8(s),v=hg({year:p,periodType:m,calendar:h,locale:l}).find(C=>{let{id:b}=C;return b===s});if(v)return v;const[y]=hg({year:p-1,periodType:m,calendar:h,locale:l}).slice(-1);if(y.id===s)return y;throw new Error(Je.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:s}))}if(o8(s)){const p=s.substring(0,4),m=s.substring(4,6),g=s.substring(6),v=Pl({date:`${p}-${m}-${g}`,calendar:h});return AS({date:v,locale:l,calendar:h})}throw new Error(Je.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:s}))};$O(Bh);WO(Bh);GO(Bh);const h2=(i,e)=>{Bh.getOptions().colors;const t=i.filter(a=>a.dataElement==="median").map(a=>[a.period,a.value]),s=i.filter(a=>a.dataElement==="quantile_low").map(a=>[a.period,a.value,i.filter(l=>l.dataElement==="quantile_high"&&l.period===a.period)[0].value]);return{title:{text:Je.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return Yb({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:Je.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:Je.t("Range"),data:s,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function u8(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(s=>s.orgUnit===t))}const d8=i=>{let{data:e,predictionTargetName:t}=i;const s=u8(e.dataValues),[a,l]=Be.useState(h2(s[0],t)),[h,r]=Be.useState(0),p=m=>{r(m),l(h2(s[m],t))};return Te.createElement(Te.Fragment,null,Te.createElement("div",{className:_0.chartContainer},Te.createElement("div",null,Te.createElement(zv,{dense:!0},s.map((m,g)=>Te.createElement($u,{className:_0.menu,active:h==g,key:g,label:m[0].displayName,onClick:()=>p(g)})))),Te.createElement("div",{className:_0.chart},Te.createElement(_S,{highcharts:Bh,constructorType:"chart",options:a}))))};function Ep(i,e,t){return(e=p8(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function p8(i){var e=f8(i,"string");return typeof e=="symbol"?e:e+""}function f8(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class u2 extends Error{constructor(e,t,s){super(s),Ep(this,"url",void 0),Ep(this,"status",void 0),Ep(this,"statusText",void 0),Ep(this,"body",void 0),Ep(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function sh(i,e,t){m8(i,e),e.set(i,t)}function m8(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zr(i,e){return i.get(RS(i,e))}function Mo(i,e,t){return i.set(RS(i,e),t),t}function RS(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class g8 extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var Ql=new WeakMap,Jl=new WeakMap,gl=new WeakMap,Iu=new WeakMap,Sp=new WeakMap,ug=new WeakMap,Du=new WeakMap;class y8{constructor(e){sh(this,Ql,void 0),sh(this,Jl,void 0),sh(this,gl,void 0),sh(this,Iu,void 0),sh(this,Sp,void 0),sh(this,ug,void 0),sh(this,Du,void 0),Mo(Ql,this,!1),Mo(Jl,this,!1),Mo(gl,this,!1),Mo(Iu,this,[]),Mo(Sp,this,new Promise((t,s)=>{Mo(ug,this,t),Mo(Du,this,s);const a=r=>{Zr(Ql,this)||Zr(Jl,this)||Zr(gl,this)||(Mo(Ql,this,!0),Zr(ug,this)&&Zr(ug,this).call(this,r))},l=r=>{Zr(Ql,this)||Zr(Jl,this)||Zr(gl,this)||(Mo(Jl,this,!0),Zr(Du,this)&&Zr(Du,this).call(this,r))},h=r=>{Zr(Ql,this)||Zr(Jl,this)||Zr(gl,this)||Zr(Iu,this).push(r)};return Object.defineProperty(h,"isResolved",{get:()=>Zr(Ql,this)}),Object.defineProperty(h,"isRejected",{get:()=>Zr(Jl,this)}),Object.defineProperty(h,"isCancelled",{get:()=>Zr(gl,this)}),e(a,l,h)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Zr(Sp,this).then(e,t)}catch(e){return Zr(Sp,this).catch(e)}finally(e){return Zr(Sp,this).finally(e)}cancel(){if(!(Zr(Ql,this)||Zr(Jl,this)||Zr(gl,this))){if(Mo(gl,this,!0),Zr(Iu,this).length)try{for(const e of Zr(Iu,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}Zr(Iu,this).length=0,Zr(Du,this)&&Zr(Du,this).call(this,new g8("Request aborted"))}}get isCancelled(){return Zr(gl,this)}}const Bi={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Zb=i=>i!=null,qf=i=>typeof i=="string",C0=i=>qf(i)&&i!=="",Xb=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),zS=i=>i instanceof FormData,x8=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},v8=i=>{const e=[],t=(a,l)=>{e.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(l))}`)},s=(a,l)=>{Zb(l)&&(Array.isArray(l)?l.forEach(h=>{s(a,h)}):typeof l=="object"?Object.entries(l).forEach(h=>{let[r,p]=h;s(`${a}[${r}]`,p)}):t(a,l))};return Object.entries(i).forEach(a=>{let[l,h]=a;s(l,h)}),e.length>0?`?${e.join("&")}`:""},b8=(i,e)=>{const t=encodeURI,s=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(l,h)=>{var r;return(r=e.path)!==null&&r!==void 0&&r.hasOwnProperty(h)?t(String(e.path[h])):l}),a=`${i.BASE}${s}`;return e.query?`${a}${v8(e.query)}`:a},_8=i=>{if(i.formData){const e=new FormData,t=(s,a)=>{qf(a)||Xb(a)?e.append(s,a):e.append(s,JSON.stringify(a))};return Object.entries(i.formData).filter(s=>{let[a,l]=s;return Zb(l)}).forEach(s=>{let[a,l]=s;Array.isArray(l)?l.forEach(h=>t(a,h)):t(a,l)}),e}},dg=async(i,e)=>e,w8=async(i,e)=>{const[t,s,a,l]=await Promise.all([dg(e,i.TOKEN),dg(e,i.USERNAME),dg(e,i.PASSWORD),dg(e,i.HEADERS)]),h=Object.entries({Accept:"application/json",...l,...e.headers}).filter(r=>{let[p,m]=r;return Zb(m)}).reduce((r,p)=>{let[m,g]=p;return{...r,[m]:String(g)}},{});if(C0(t)&&(h.Authorization=`Bearer ${t}`),C0(s)&&C0(a)){const r=x8(`${s}:${a}`);h.Authorization=`Basic ${r}`}return e.body!==void 0&&(e.mediaType?h["Content-Type"]=e.mediaType:Xb(e.body)?h["Content-Type"]=e.body.type||"application/octet-stream":qf(e.body)?h["Content-Type"]="text/plain":zS(e.body)||(h["Content-Type"]="application/json")),new Headers(h)},T8=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):qf(i.body)||Xb(i.body)||zS(i.body)?i.body:JSON.stringify(i.body)}},C8=async(i,e,t,s,a,l,h)=>{const r=new AbortController,p={headers:l,body:s??a,method:e.method,signal:r.signal};return i.WITH_CREDENTIALS&&(p.credentials=i.CREDENTIALS),h(()=>r.abort()),await fetch(t,p)},E8=(i,e)=>{if(e){const t=i.headers.get(e);if(qf(t))return t}},S8=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(a=>e.toLowerCase().startsWith(a))?await i.json():await i.text()}catch(e){console.error(e)}},k8=(i,e)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(s)throw new u2(i,e,s);if(!e.ok){var a,l;const h=(a=e.status)!==null&&a!==void 0?a:"unknown",r=(l=e.statusText)!==null&&l!==void 0?l:"unknown",p=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new u2(i,e,`Generic Error: status: ${h}; status text: ${r}; body: ${p}`)}},Vi=(i,e)=>new y8(async(t,s,a)=>{try{const l=b8(i,e),h=_8(e),r=T8(e),p=await w8(i,e);if(!a.isCancelled){const m=await C8(i,e,l,r,h,p,a),g=await S8(m),v=E8(m,e.responseHeader),y={url:l,ok:m.ok,status:m.status,statusText:m.statusText,body:v??g};k8(e,y),t(y.body)}}catch(l){s(l)}});class Go{static makeDatasetAnalyticsMakeDatasetPost(e){return Vi(Bi,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(e){return Vi(Bi,{method:"GET",url:"/analytics/compatible-backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t){return Vi(Bi,{method:"GET",url:"/analytics/backtest-overlap/{backtestId1}/{backtestId2}",path:{backtestId1:e,backtestId2:t},errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t,s,a){return Vi(Bi,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t,splitPeriod:s,orgUnits:a},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return Vi(Bi,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return Vi(Bi,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return Vi(Bi,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e,t){return Vi(Bi,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},query:{orgUnits:t},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return Vi(Bi,{method:"GET",url:"/analytics/data-sources"})}static createBacktestWithDataAnalyticsCreateBacktestWithDataPost(e){return Vi(Bi,{method:"POST",url:"/analytics/create-backtest-with-data",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}}class to{static getBacktestsCrudBacktestsGet(){return Vi(Bi,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return Vi(Bi,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return Vi(Bi,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return Vi(Bi,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static updateBacktestCrudBacktestsBacktestIdPatch(e,t){return Vi(Bi,{method:"PATCH",url:"/crud/backtests/{backtestId}",path:{backtestId:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return Vi(Bi,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return Vi(Bi,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return Vi(Bi,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return Vi(Bi,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return Vi(Bi,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return Vi(Bi,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return Vi(Bi,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return Vi(Bi,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return Vi(Bi,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return Vi(Bi,{method:"GET",url:"/crud/models"})}static debugEntryCrudDebugPost(){return Vi(Bi,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return Vi(Bi,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}static listFeatureTypesCrudFeatureSourcesGet(){return Vi(Bi,{method:"GET",url:"/crud/feature-sources"})}static addConfiguredModelCrudconfiguredModelPost(e){return Vi(Bi,{method:"POST",url:"/crudconfigured-model",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}}class NS{static faviconfaviconIcoGet(){return Vi(Bi,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return Vi(Bi,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Vi(Bi,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:s},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return Vi(Bi,{method:"GET",url:"/list-models"})}static listModelTemplatesListModelTemplatesGet(){return Vi(Bi,{method:"GET",url:"/list-model-templates"})}static listFeaturesListFeaturesGet(){return Vi(Bi,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return Vi(Bi,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return Vi(Bi,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return Vi(Bi,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return Vi(Bi,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return Vi(Bi,{method:"GET",url:"/status"})}static healthHealthGet(){return Vi(Bi,{method:"GET",url:"/health"})}static versionVersionGet(){return Vi(Bi,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return Vi(Bi,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return Vi(Bi,{method:"GET",url:"/system-info"})}}class Kb{static listJobsJobsGet(){return Vi(Bi,{method:"GET",url:"/jobs"})}static getJobStatusJobsJobIdGet(e){return Vi(Bi,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return Vi(Bi,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return Vi(Bi,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return Vi(Bi,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return Vi(Bi,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return Vi(Bi,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function OS(i,e){const t=s=>{if(s.includes("W")){const[a,l]=s.split("W").map(Number),h=new Date(a,0,1),r=(l-1)*7;return new Date(h.setDate(h.getDate()+r))}else{const a=Number(s.slice(0,4)),l=Number(s.slice(4,6))-1;return new Date(a,l)}};return t(i).getTime()-t(e).getTime()}function A8(i,e){var t;const s=e.map(C=>C.pe).sort(OS),a=s.map(C=>{var b,T;return(b=(T=e.find(S=>S.pe===C))===null||T===void 0?void 0:T.value)!==null&&b!==void 0?b:null}),l=(C,b)=>{if(!b)return new Map;const T=new Map;for(let S=0;S<C.length;S++)T.set(C[S],b[S]);return T},h=l(i.periods,i.averages.slice()),r=l(i.periods,i.ranges.slice()),p=l(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),m=(C,b)=>C.map(T=>{var S;return(S=b.get(T))!==null&&S!==void 0?S:null}),g=m(s,h),v=m(s,r),y=m(s,p);return{periods:s,ranges:v,averages:g,realValues:a,midranges:y}}const jS=(i,e,t)=>{const s=Array.from(new Set(i.map(g=>g.quantile))).sort(),a=s[0],l=s[1],h=s[s.length-2],r=s[s.length-1],p=g=>g.quantile===a?"quantile_low":g.quantile===r?"quantile_high":g.quantile===.5?"median":g.quantile===l?"quantile_mid_low":g.quantile===h?"quantile_mid_high":"unknown",m=Array.from(new Set(i.map(g=>g.modelName||t)));return Array.from(new Set(i.map(g=>g.splitPeriod))).map(g=>({splitPoint:g,evaluation:Array.from(new Set(i.map(v=>v.orgUnit))).map(v=>({orgUnitName:v,orgUnitId:v,models:m.map(y=>{const C=M8(i.filter(T=>T.orgUnit===v&&T.splitPeriod===g&&((T==null?void 0:T.modelName)||t)===y),p),b=A8(C,e.filter(T=>T.ou===v));return{modelName:y,data:b}})}))}))};function M8(i,e){const t=Array.from(new Set(i.map(r=>r.period))).sort(OS),s=[],a=[],l=[];return t.forEach(r=>{var p,m,g,v,y;const C=((p=i.find(x=>x.period===r&&e(x)==="quantile_low"))===null||p===void 0?void 0:p.value)||0,b=((m=i.find(x=>x.period===r&&e(x)==="quantile_high"))===null||m===void 0?void 0:m.value)||0,T=((g=i.find(x=>x.period===r&&e(x)==="median"))===null||g===void 0?void 0:g.value)||0,S=((v=i.find(x=>x.period===r&&e(x)==="quantile_mid_high"))===null||v===void 0?void 0:v.value)||0,k=((y=i.find(x=>x.period===r&&e(x)==="quantile_mid_low"))===null||y===void 0?void 0:y.value)||0;s.push([C,b]),a.push([T]),l.push([k,S])}),{periods:t,ranges:s,averages:a,midranges:l}}function BS(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const P8=i=>{const{enabled:e,wrapperClassName:t,children:s,...a}=i;return e?Te.createElement(Sy,a,l=>{let{onMouseOver:h,onMouseOut:r,ref:p}=l;return Te.createElement("span",{className:t,ref:m=>{m&&(m.onpointerenter=h,m.onpointerleave=r,p.current=m)}},s)}):s},FS=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}};function I8(i){Bh.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const D8=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],L8=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return FS(this.value)},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:I8},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:D8(i)}),R8=i=>{let{data:e,modelName:t,syncZoom:s}=i;return Te.createElement(Te.Fragment,null,Te.createElement(_S,{highcharts:Bh,options:L8(e,t,s)}))},z8="_title_4ki8g_1",N8="_comparionBox_4ki8g_7",O8="_comparionBoxSideBySide_4ki8g_15",j8="_comparionBoxSideBySideItem_4ki8g_22",pg={title:z8,comparionBox:N8,comparionBoxSideBySide:O8,comparionBoxSideBySideItem:j8},d2=i=>{let{orgUnitsData:e}=i;return Te.createElement("div",{className:pg.comparionBox},Te.createElement("div",{className:pg.title},e.orgUnitName),Te.createElement("div",{className:pg.comparionBoxSideBySide},e.models.map((t,s)=>Te.createElement("div",{key:s,className:pg.comparionBoxSideBySideItem},Te.createElement(R8,{syncZoom:e.models.length>1,data:t.data,modelName:t.modelName})))))},Yy=0,Sc=1,yd=2,US=4;function $S(i,e){return t=>i(e(t))}function B8(i,e){return e(i)}function VS(i,e){return t=>i(e,t)}function p2(i,e){return()=>i(e)}function Zy(i,e){return e(i),i}function Mn(...i){return i}function F8(i){i()}function f2(i){return()=>i}function U8(...i){return()=>{i.map(F8)}}function Qb(i){return i!==void 0}function xd(){}function Kr(i,e){return i(Sc,e)}function vr(i,e){i(Yy,e)}function Jb(i){i(yd)}function Ys(i){return i(US)}function Ni(i,e){return Kr(i,VS(e,Yy))}function Ho(i,e){const t=i(Sc,s=>{t(),e(s)});return t}function Rr(){const i=[];return(e,t)=>{switch(e){case yd:i.splice(0,i.length);return;case Sc:return i.push(t),()=>{const s=i.indexOf(t);s>-1&&i.splice(s,1)};case Yy:i.slice().forEach(s=>{s(t)});return;default:throw new Error(`unrecognized action ${e}`)}}}function ci(i){let e=i;const t=Rr();return(s,a)=>{switch(s){case Sc:a(e);break;case Yy:e=a;break;case US:return e}return t(s,a)}}function $8(i){let e,t;const s=()=>e&&e();return function(a,l){switch(a){case Sc:return l?t===l?void 0:(s(),t=l,e=Kr(i,l),e):(s(),xd);case yd:s(),t=null;return;default:throw new Error(`unrecognized action ${a}`)}}}function Va(i){return Zy(Rr(),e=>Ni(i,e))}function fa(i,e){return Zy(ci(e),t=>Ni(i,t))}function V8(...i){return e=>i.reduceRight(B8,e)}function qt(i,...e){const t=V8(...e);return(s,a)=>{switch(s){case Sc:return Kr(i,t(a));case yd:Jb(i);return}}}function GS(i,e){return i===e}function Sn(i=GS){let e;return t=>s=>{i(e,s)||(e=s,t(s))}}function nr(i){return e=>t=>{i(t)&&e(t)}}function Ai(i){return e=>$S(e,i)}function Do(i){return e=>()=>e(i)}function Ro(i,e){return t=>s=>t(e=i(e,s))}function id(i){return e=>t=>{i>0?i--:e(t)}}function dc(i){let e=null,t;return s=>a=>{e=a,!t&&(t=setTimeout(()=>{t=void 0,s(e)},i))}}function m2(i){let e,t;return s=>a=>{e=a,t&&clearTimeout(t),t=setTimeout(()=>{s(e)},i)}}function wr(...i){const e=new Array(i.length);let t=0,s=null;const a=Math.pow(2,i.length)-1;return i.forEach((l,h)=>{const r=Math.pow(2,h);Kr(l,p=>{const m=t;t=t|r,e[h]=p,m!==a&&t===a&&s&&(s(),s=null)})}),l=>h=>{const r=()=>l([h].concat(e));t===a?r():s=r}}function g2(...i){return function(e,t){switch(e){case Sc:return U8(...i.map(s=>Kr(s,t)));case yd:return;default:throw new Error(`unrecognized action ${e}`)}}}function cr(i,e=GS){return qt(i,Sn(e))}function fs(...i){const e=Rr(),t=new Array(i.length);let s=0;const a=Math.pow(2,i.length)-1;return i.forEach((l,h)=>{const r=Math.pow(2,h);Kr(l,p=>{t[h]=p,s=s|r,s===a&&vr(e,t)})}),function(l,h){switch(l){case Sc:return s===a&&h(t),Kr(e,h);case yd:return Jb(e);default:throw new Error(`unrecognized action ${l}`)}}}function Qr(i,e=[],{singleton:t}={singleton:!0}){return{id:G8(),constructor:i,dependencies:e,singleton:t}}const G8=()=>Symbol();function H8(i){const e=new Map,t=({id:s,constructor:a,dependencies:l,singleton:h})=>{if(h&&e.has(s))return e.get(s);const r=a(l.map(p=>t(p)));return h&&e.set(s,r),r};return t(i)}function W8(i,e){const t={},s={};let a=0;const l=i.length;for(;a<l;)s[i[a]]=1,a+=1;for(const h in e)s.hasOwnProperty(h)||(t[h]=e[h]);return t}const fg=typeof document<"u"?Te.useLayoutEffect:Te.useEffect;function HS(i,e,t){const s=Object.keys(e.required||{}),a=Object.keys(e.optional||{}),l=Object.keys(e.methods||{}),h=Object.keys(e.events||{}),r=Te.createContext({});function p(k,x){k.propsReady&&vr(k.propsReady,!1);for(const A of s){const D=k[e.required[A]];vr(D,x[A])}for(const A of a)if(A in x){const D=k[e.optional[A]];vr(D,x[A])}k.propsReady&&vr(k.propsReady,!0)}function m(k){return l.reduce((x,A)=>(x[A]=D=>{const w=k[e.methods[A]];vr(w,D)},x),{})}function g(k){return h.reduce((x,A)=>(x[A]=$8(k[e.events[A]]),x),{})}const v=Te.forwardRef((k,x)=>{const{children:A,...D}=k,[w]=Te.useState(()=>Zy(H8(i),q=>p(q,D))),[I]=Te.useState(p2(g,w));fg(()=>{for(const q of h)q in D&&Kr(I[q],D[q]);return()=>{Object.values(I).map(Jb)}},[D,I,w]),fg(()=>{p(w,D)}),Te.useImperativeHandle(x,f2(m(w)));const N=t;return se.jsx(r.Provider,{value:w,children:t?se.jsx(N,{...W8([...s,...a,...h],D),children:A}):A})}),y=k=>Te.useCallback(VS(vr,Te.useContext(r)[k]),[k]),C=k=>{const A=Te.useContext(r)[k],D=Te.useCallback(w=>Kr(A,w),[A]);return Te.useSyncExternalStore(D,()=>Ys(A),()=>Ys(A))},b=k=>{const A=Te.useContext(r)[k],[D,w]=Te.useState(p2(Ys,A));return fg(()=>Kr(A,I=>{I!==D&&w(f2(I))}),[A,D]),D},T=Te.version.startsWith("18")?C:b;return{Component:v,usePublisher:y,useEmitterValue:T,useEmitter:(k,x)=>{const D=Te.useContext(r)[k];fg(()=>Kr(D,x),[x,D])}}}const WS=typeof document<"u"?Te.useLayoutEffect:Te.useEffect;var Ga=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Ga||{});const q8={0:"debug",1:"log",2:"warn",3:"error"},Y8=()=>typeof globalThis>"u"?window:globalThis,kc=Qr(()=>{const i=ci(3);return{log:ci((t,s,a=1)=>{var l;const h=(l=Y8().VIRTUOSO_LOG_LEVEL)!=null?l:Ys(i);a>=h&&console[q8[a]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,s)}),logLevel:i}},[],{singleton:!0});function e1(i,e,t){const s=Te.useRef(null);let a=l=>{};if(typeof ResizeObserver<"u"){const l=Te.useMemo(()=>new ResizeObserver(h=>{const r=()=>{const p=h[0].target;p.offsetParent!==null&&i(p)};t?r():requestAnimationFrame(r)}),[i]);a=h=>{h&&e?(l.observe(h),s.current=h):(s.current&&l.unobserve(s.current),s.current=null)}}return{ref:s,callbackRef:a}}function Fh(i,e,t){return e1(i,e,t).callbackRef}function Z8(i,e,t,s,a,l,h,r,p){const m=Te.useCallback(g=>{const v=X8(g.children,e,r?"offsetWidth":"offsetHeight",a);let y=g.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const C=y.lastElementChild.dataset.viewportType==="window",b=h?r?h.scrollLeft:h.scrollTop:C?r?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:r?y.scrollLeft:y.scrollTop,T=h?r?h.scrollWidth:h.scrollHeight:C?r?document.documentElement.scrollWidth:document.documentElement.scrollHeight:r?y.scrollWidth:y.scrollHeight,S=h?r?h.offsetWidth:h.offsetHeight:C?r?window.innerWidth:window.innerHeight:r?y.offsetWidth:y.offsetHeight;s({scrollTop:Math.max(b,0),scrollHeight:T,viewportHeight:S}),l==null||l(r?y2("column-gap",getComputedStyle(g).columnGap,a):y2("row-gap",getComputedStyle(g).rowGap,a)),v!==null&&i(v)},[i,e,a,l,h,s]);return e1(m,t,p)}function X8(i,e,t,s){const a=i.length;if(a===0)return null;const l=[];for(let h=0;h<a;h++){const r=i.item(h);if(!r||r.dataset.index===void 0)continue;const p=parseInt(r.dataset.index),m=parseFloat(r.dataset.knownSize),g=e(r,t);if(g===0&&s("Zero-sized element, this should not happen",{child:r},Ga.ERROR),g===m)continue;const v=l[l.length-1];l.length===0||v.size!==g||v.endIndex!==p-1?l.push({startIndex:p,endIndex:p,size:g}):l[l.length-1].endIndex++}return l}function y2(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ga.WARN),e==="normal"?0:parseInt(e??"0",10)}function bc(i,e){return Math.round(i.getBoundingClientRect()[e])}function qS(i,e){return Math.abs(i-e)<1.01}function YS(i,e,t,s=xd,a,l){const h=Te.useRef(null),r=Te.useRef(null),p=Te.useRef(null),m=Te.useCallback(y=>{const C=y.target,b=C===window||C===document,T=l?b?window.pageXOffset||document.documentElement.scrollLeft:C.scrollLeft:b?window.pageYOffset||document.documentElement.scrollTop:C.scrollTop,S=l?b?document.documentElement.scrollWidth:C.scrollWidth:b?document.documentElement.scrollHeight:C.scrollHeight,k=l?b?window.innerWidth:C.offsetWidth:b?window.innerHeight:C.offsetHeight,x=()=>{i({scrollTop:Math.max(T,0),scrollHeight:S,viewportHeight:k})};y.suppressFlushSync?x():xM.flushSync(x),r.current!==null&&(T===r.current||T<=0||T===S-k)&&(r.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[i,e]);Te.useEffect(()=>{const y=a||h.current;return s(a||h.current),m({target:y,suppressFlushSync:!0}),y.addEventListener("scroll",m,{passive:!0}),()=>{s(null),y.removeEventListener("scroll",m)}},[h,m,t,s,a]);function g(y){const C=h.current;if(!C||(l?"offsetWidth"in C&&C.offsetWidth===0:"offsetHeight"in C&&C.offsetHeight===0))return;const b=y.behavior==="smooth";let T,S,k;C===window?(S=Math.max(bc(document.documentElement,l?"width":"height"),l?document.documentElement.scrollWidth:document.documentElement.scrollHeight),T=l?window.innerWidth:window.innerHeight,k=l?document.documentElement.scrollLeft:document.documentElement.scrollTop):(S=C[l?"scrollWidth":"scrollHeight"],T=bc(C,l?"width":"height"),k=C[l?"scrollLeft":"scrollTop"]);const x=S-T;if(y.top=Math.ceil(Math.max(Math.min(x,y.top),0)),qS(T,S)||y.top===k){i({scrollTop:k,scrollHeight:S,viewportHeight:T}),b&&e(!0);return}b?(r.current=y.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,r.current=null,e(!0)},1e3)):r.current=null,l&&(y={left:y.top,behavior:y.behavior}),C.scrollTo(y)}function v(y){l&&(y={left:y.top,behavior:y.behavior}),h.current.scrollBy(y)}return{scrollerRef:h,scrollByCallback:v,scrollToCallback:g}}const xa=Qr(()=>{const i=Rr(),e=Rr(),t=ci(0),s=Rr(),a=ci(0),l=Rr(),h=Rr(),r=ci(0),p=ci(0),m=ci(0),g=ci(0),v=Rr(),y=Rr(),C=ci(!1),b=ci(!1),T=ci(!1);return Ni(qt(i,Ai(({scrollTop:S})=>S)),e),Ni(qt(i,Ai(({scrollHeight:S})=>S)),h),Ni(e,a),{scrollContainerState:i,scrollTop:e,viewportHeight:l,headerHeight:r,fixedHeaderHeight:p,fixedFooterHeight:m,footerHeight:g,scrollHeight:h,smoothScrollTargetReached:s,horizontalDirection:b,skipAnimationFrameInResizeObserver:T,scrollTo:v,scrollBy:y,statefulScrollTop:a,deviation:t,scrollingInProgress:C}},[],{singleton:!0}),af={lvl:0};function ZS(i,e,t,s=af,a=af){return{k:i,v:e,lvl:t,l:s,r:a}}function dn(i){return i===af}function qu(){return af}function vv(i,e){if(dn(i))return af;const{k:t,l:s,r:a}=i;if(e===t){if(dn(s))return a;if(dn(a))return s;{const[l,h]=XS(s);return Ig(us(i,{k:l,v:h,l:KS(s)}))}}else return e<t?Ig(us(i,{l:vv(s,e)})):Ig(us(i,{r:vv(a,e)}))}function of(i,e){if(!dn(i))return e===i.k?i.v:e<i.k?of(i.l,e):of(i.r,e)}function xo(i,e,t="k"){if(dn(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const s=xo(i.r,e,t);return s[0]===-1/0?[i.k,i.v]:s}return xo(i.l,e,t)}function Fa(i,e,t){return dn(i)?ZS(e,t,1):e===i.k?us(i,{k:e,v:t}):e<i.k?x2(us(i,{l:Fa(i.l,e,t)})):x2(us(i,{r:Fa(i.r,e,t)}))}function bv(i,e,t){if(dn(i))return[];const{k:s,v:a,l,r:h}=i;let r=[];return s>e&&(r=r.concat(bv(l,e,t))),s>=e&&s<=t&&r.push({k:s,v:a}),s<=t&&(r=r.concat(bv(h,e,t))),r}function ph(i){return dn(i)?[]:[...ph(i.l),{k:i.k,v:i.v},...ph(i.r)]}function XS(i){return dn(i.r)?[i.k,i.v]:XS(i.r)}function KS(i){return dn(i.r)?i.l:Ig(us(i,{r:KS(i.r)}))}function us(i,e){return ZS(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function E0(i){return dn(i)||i.lvl>i.r.lvl}function x2(i){return _v(JS(i))}function Ig(i){const{l:e,r:t,lvl:s}=i;if(t.lvl>=s-1&&e.lvl>=s-1)return i;if(s>t.lvl+1){if(E0(e))return JS(us(i,{lvl:s-1}));if(!dn(e)&&!dn(e.r))return us(e.r,{l:us(e,{r:e.r.l}),r:us(i,{l:e.r.r,lvl:s-1}),lvl:s});throw new Error("Unexpected empty nodes")}else{if(E0(i))return _v(us(i,{lvl:s-1}));if(!dn(t)&&!dn(t.l)){const a=t.l,l=E0(a)?t.lvl-1:t.lvl;return us(a,{l:us(i,{r:a.l,lvl:s-1}),r:_v(us(t,{l:a.r,lvl:l})),lvl:a.lvl+1})}else throw new Error("Unexpected empty nodes")}}function Xy(i,e,t){if(dn(i))return[];const s=xo(i,e)[0];return K8(bv(i,s,t))}function QS(i,e){const t=i.length;if(t===0)return[];let{index:s,value:a}=e(i[0]);const l=[];for(let h=1;h<t;h++){const{index:r,value:p}=e(i[h]);l.push({start:s,end:r-1,value:a}),s=r,a=p}return l.push({start:s,end:1/0,value:a}),l}function K8(i){return QS(i,({k:e,v:t})=>({index:e,value:t}))}function _v(i){const{r:e,lvl:t}=i;return!dn(e)&&!dn(e.r)&&e.lvl===t&&e.r.lvl===t?us(e,{l:us(i,{r:e.l}),lvl:t+1}):i}function JS(i){const{l:e}=i;return!dn(e)&&e.lvl===i.lvl?us(e,{r:us(i,{l:e.r})}):i}function iy(i,e,t,s=0){let a=i.length-1;for(;s<=a;){const l=Math.floor((s+a)/2),h=i[l],r=t(h,e);if(r===0)return l;if(r===-1){if(a-s<2)return l-1;a=l-1}else{if(a===s)return l;s=l+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function e3(i,e,t){return i[iy(i,e,t)]}function Q8(i,e,t,s){const a=iy(i,e,s),l=iy(i,t,s,a);return i.slice(a,l+1)}const t1=Qr(()=>({recalcInProgress:ci(!1)}),[],{singleton:!0});function J8(i){const{size:e,startIndex:t,endIndex:s}=i;return a=>a.start===t&&(a.end===s||a.end===1/0)&&a.value===e}function v2(i,e){let t=0,s=0;for(;t<i;)t+=e[s+1]-e[s]-1,s++;return s-(t===i?0:1)}function eB(i,e){let t=dn(i)?0:1/0;for(const s of e){const{size:a,startIndex:l,endIndex:h}=s;if(t=Math.min(t,l),dn(i)){i=Fa(i,0,a);continue}const r=Xy(i,l-1,h+1);if(r.some(J8(s)))continue;let p=!1,m=!1;for(const{start:g,end:v,value:y}of r)p?(h>=g||a===y)&&(i=vv(i,g)):(m=y!==a,p=!0),v>h&&h>=g&&y!==a&&(i=Fa(i,h+1,y));m&&(i=Fa(i,l,a))}return[i,t]}function tB(){return{offsetTree:[],sizeTree:qu(),groupOffsetTree:qu(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function i1({index:i},e){return e===i?0:e<i?-1:1}function iB({offset:i},e){return e===i?0:e<i?-1:1}function rB(i){return{index:i.index,value:i}}function nB(i,e,t,s=0){return s>0&&(e=Math.max(e,e3(i,s,i1).offset)),QS(Q8(i,e,t,iB),rB)}function wv(i,e,t,s){let a=i,l=0,h=0,r=0,p=0;if(e!==0){p=iy(a,e-1,i1),r=a[p].offset;const g=xo(t,e-1);l=g[0],h=g[1],a.length&&a[p].size===xo(t,e)[1]&&(p-=1),a=a.slice(0,p+1)}else a=[];for(const{start:m,value:g}of Xy(t,e,1/0)){const v=m-l,y=v*h+r+v*s;a.push({offset:y,size:g,index:m}),l=m,r=y,h=g}return{offsetTree:a,lastIndex:l,lastOffset:r,lastSize:h}}function sB(i,[e,t,s,a]){e.length>0&&s("received item sizes",e,Ga.DEBUG);const l=i.sizeTree;let h=l,r=0;if(t.length>0&&dn(l)&&e.length===2){const y=e[0].size,C=e[1].size;h=t.reduce((b,T)=>Fa(Fa(b,T,y),T+1,C),h)}else[h,r]=eB(h,e);if(h===l)return i;const{offsetTree:p,lastIndex:m,lastSize:g,lastOffset:v}=wv(i.offsetTree,r,h,a);return{sizeTree:h,offsetTree:p,lastIndex:m,lastOffset:v,lastSize:g,groupOffsetTree:t.reduce((y,C)=>Fa(y,C,lf(C,p,a)),qu()),groupIndices:t}}function lf(i,e,t){if(e.length===0)return 0;const{offset:s,index:a,size:l}=e3(e,i,i1),h=i-a,r=l*h+(h-1)*t+s;return r>0?r+t:r}function aB(i){return typeof i.groupIndex<"u"}function t3(i,e,t){if(aB(i))return e.groupIndices[i.groupIndex]+1;{const s=i.index==="LAST"?t:i.index;let a=i3(s,e);return a=Math.max(0,a,Math.min(t,a)),a}}function i3(i,e){if(!Ky(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function Ky(i){return!dn(i.groupOffsetTree)}function oB(i){return ph(i).map(({k:e,v:t},s,a)=>{const l=a[s+1],h=l?l.k-1:1/0;return{startIndex:e,endIndex:h,size:t}})}const lB={offsetHeight:"height",offsetWidth:"width"},Jo=Qr(([{log:i},{recalcInProgress:e}])=>{const t=Rr(),s=Rr(),a=fa(s,0),l=Rr(),h=Rr(),r=ci(0),p=ci([]),m=ci(void 0),g=ci(void 0),v=ci((w,I)=>bc(w,lB[I])),y=ci(void 0),C=ci(0),b=tB(),T=fa(qt(t,wr(p,i,C),Ro(sB,b),Sn()),b),S=fa(qt(p,Sn(),Ro((w,I)=>({prev:w.current,current:I}),{prev:[],current:[]}),Ai(({prev:w})=>w)),[]);Ni(qt(p,nr(w=>w.length>0),wr(T,C),Ai(([w,I,N])=>{const q=w.reduce((Y,X,B)=>Fa(Y,X,lf(X,I.offsetTree,N)||B),qu());return{...I,groupIndices:w,groupOffsetTree:q}})),T),Ni(qt(s,wr(T),nr(([w,{lastIndex:I}])=>w<I),Ai(([w,{lastIndex:I,lastSize:N}])=>[{startIndex:w,endIndex:I,size:N}])),t),Ni(m,g);const k=fa(qt(m,Ai(w=>w===void 0)),!0);Ni(qt(g,nr(w=>w!==void 0&&dn(Ys(T).sizeTree)),Ai(w=>[{startIndex:0,endIndex:0,size:w}])),t);const x=Va(qt(t,wr(T),Ro(({sizes:w},[I,N])=>({changed:N!==w,sizes:N}),{changed:!1,sizes:b}),Ai(w=>w.changed)));Kr(qt(r,Ro((w,I)=>({diff:w.prev-I,prev:I}),{diff:0,prev:0}),Ai(w=>w.diff)),w=>{const{groupIndices:I}=Ys(T);if(w>0)vr(e,!0),vr(l,w+v2(w,I));else if(w<0){const N=Ys(S);N.length>0&&(w-=v2(-w,N)),vr(h,w)}}),Kr(qt(r,wr(i)),([w,I])=>{w<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:r},Ga.ERROR)});const A=Va(l);Ni(qt(l,wr(T),Ai(([w,I])=>{const N=I.groupIndices.length>0,q=[],Y=I.lastSize;if(N){const X=of(I.sizeTree,0);let B=0,j=0;for(;B<w;){const L=I.groupIndices[j],G=I.groupIndices.length===j+1?1/0:I.groupIndices[j+1]-L-1;q.push({startIndex:L,endIndex:L,size:X}),q.push({startIndex:L+1,endIndex:L+1+G-1,size:Y}),j++,B+=G+1}const O=ph(I.sizeTree);return B!==w&&O.shift(),O.reduce((L,{k:G,v:$})=>{let F=L.ranges;return L.prevSize!==0&&(F=[...L.ranges,{startIndex:L.prevIndex,endIndex:G+w-1,size:L.prevSize}]),{ranges:F,prevIndex:G+w,prevSize:$}},{ranges:q,prevIndex:w,prevSize:0}).ranges}return ph(I.sizeTree).reduce((X,{k:B,v:j})=>({ranges:[...X.ranges,{startIndex:X.prevIndex,endIndex:B+w-1,size:X.prevSize}],prevIndex:B+w,prevSize:j}),{ranges:[],prevIndex:0,prevSize:Y}).ranges})),t);const D=Va(qt(h,wr(T,C),Ai(([w,{offsetTree:I},N])=>{const q=-w;return lf(q,I,N)})));return Ni(qt(h,wr(T,C),Ai(([w,I,N])=>{if(I.groupIndices.length>0){if(dn(I.sizeTree))return I;let Y=qu();const X=Ys(S);let B=0,j=0,O=0;for(;B<-w;){O=X[j];const L=X[j+1]-O-1;j++,B+=L+1}if(Y=ph(I.sizeTree).reduce((L,{k:G,v:$})=>Fa(L,Math.max(0,G+w),$),Y),B!==-w){const L=of(I.sizeTree,O);Y=Fa(Y,0,L);const G=xo(I.sizeTree,-w+1)[1];Y=Fa(Y,1,G)}return{...I,sizeTree:Y,...wv(I.offsetTree,0,Y,N)}}else{const Y=ph(I.sizeTree).reduce((X,{k:B,v:j})=>Fa(X,Math.max(0,B+w),j),qu());return{...I,sizeTree:Y,...wv(I.offsetTree,0,Y,N)}}})),T),{data:y,totalCount:s,sizeRanges:t,groupIndices:p,defaultItemSize:g,fixedItemSize:m,unshiftWith:l,shiftWith:h,shiftWithOffset:D,beforeUnshiftWith:A,firstItemIndex:r,gap:C,sizes:T,listRefresh:x,statefulTotalCount:a,trackItemSizes:k,itemSize:v}},Mn(kc,t1),{singleton:!0}),cB=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function r3(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!cB)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Yf=Qr(([{sizes:i,totalCount:e,listRefresh:t,gap:s},{scrollingInProgress:a,viewportHeight:l,scrollTo:h,smoothScrollTargetReached:r,headerHeight:p,footerHeight:m,fixedHeaderHeight:g,fixedFooterHeight:v},{log:y}])=>{const C=Rr(),b=Rr(),T=ci(0);let S=null,k=null,x=null;function A(){S&&(S(),S=null),x&&(x(),x=null),k&&(clearTimeout(k),k=null),vr(a,!1)}return Ni(qt(C,wr(i,l,e,T,p,m,y),wr(s,g,v),Ai(([[D,w,I,N,q,Y,X,B],j,O,R])=>{const L=r3(D),{align:G,behavior:$,offset:F}=L,H=N-1,W=t3(L,w,H);let re=lf(W,w.offsetTree,j)+Y;G==="end"?(re+=O+xo(w.sizeTree,W)[1]-I+R,W===H&&(re+=X)):G==="center"?re+=(O+xo(w.sizeTree,W)[1]-I+R)/2:re-=q,F&&(re+=F);const he=ie=>{A(),ie?(B("retrying to scroll to",{location:D},Ga.DEBUG),vr(C,D)):(vr(b,!0),B("list did not change, scroll successful",{},Ga.DEBUG))};if(A(),$==="smooth"){let ie=!1;x=Kr(t,ae=>{ie=ie||ae}),S=Ho(r,()=>{he(ie)})}else S=Ho(qt(t,hB(150)),he);return k=setTimeout(()=>{A()},1200),vr(a,!0),B("scrolling from index to",{index:W,top:re,behavior:$},Ga.DEBUG),{top:re,behavior:$}})),h),{scrollToIndex:C,scrollTargetReached:b,topListHeight:T}},Mn(Jo,xa,kc),{singleton:!0});function hB(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return s=>{s&&(e(!0),clearTimeout(t))}}}const cf="up",$p="down",uB="none",dB={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},pB=0,Zf=Qr(([{scrollContainerState:i,scrollTop:e,viewportHeight:t,headerHeight:s,footerHeight:a,scrollBy:l}])=>{const h=ci(!1),r=ci(!0),p=Rr(),m=Rr(),g=ci(4),v=ci(pB),y=fa(qt(g2(qt(cr(e),id(1),Do(!0)),qt(cr(e),id(1),Do(!1),m2(100))),Sn()),!1),C=fa(qt(g2(qt(l,Do(!0)),qt(l,Do(!1),m2(200))),Sn()),!1);Ni(qt(fs(cr(e),cr(v)),Ai(([x,A])=>x<=A),Sn()),r),Ni(qt(r,dc(50)),m);const b=Va(qt(fs(i,cr(t),cr(s),cr(a),cr(g)),Ro((x,[{scrollTop:A,scrollHeight:D},w,I,N,q])=>{const Y=A+w-D>-q,X={viewportHeight:w,scrollTop:A,scrollHeight:D};if(Y){let j,O;return A>x.state.scrollTop?(j="SCROLLED_DOWN",O=x.state.scrollTop-A):(j="SIZE_DECREASED",O=x.state.scrollTop-A||x.scrollTopDelta),{atBottom:!0,state:X,atBottomBecause:j,scrollTopDelta:O}}let B;return X.scrollHeight>x.state.scrollHeight?B="SIZE_INCREASED":w<x.state.viewportHeight?B="VIEWPORT_HEIGHT_DECREASING":A<x.state.scrollTop?B="SCROLLING_UPWARDS":B="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:B,state:X}},dB),Sn((x,A)=>x&&x.atBottom===A.atBottom))),T=fa(qt(i,Ro((x,{scrollTop:A,scrollHeight:D,viewportHeight:w})=>{if(qS(x.scrollHeight,D))return{scrollTop:A,scrollHeight:D,jump:0,changed:!1};{const I=D-(A+w)<1;return x.scrollTop!==A&&I?{scrollHeight:D,scrollTop:A,jump:x.scrollTop-A,changed:!0}:{scrollHeight:D,scrollTop:A,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),nr(x=>x.changed),Ai(x=>x.jump)),0);Ni(qt(b,Ai(x=>x.atBottom)),h),Ni(qt(h,dc(50)),p);const S=ci($p);Ni(qt(i,Ai(({scrollTop:x})=>x),Sn(),Ro((x,A)=>Ys(C)?{direction:x.direction,prevScrollTop:A}:{direction:A<x.prevScrollTop?cf:$p,prevScrollTop:A},{direction:$p,prevScrollTop:0}),Ai(x=>x.direction)),S),Ni(qt(i,dc(50),Do(uB)),S);const k=ci(0);return Ni(qt(y,nr(x=>!x),Do(0)),k),Ni(qt(e,dc(100),wr(y),nr(([x,A])=>!!A),Ro(([x,A],[D])=>[A,D],[0,0]),Ai(([x,A])=>A-x)),k),{isScrolling:y,isAtTop:r,isAtBottom:h,atBottomState:b,atTopStateChange:m,atBottomStateChange:p,scrollDirection:S,atBottomThreshold:g,atTopThreshold:v,scrollVelocity:k,lastJumpDueToItemResize:T}},Mn(xa)),Ac=Qr(([{log:i}])=>{const e=ci(!1),t=Va(qt(e,nr(s=>s),Sn()));return Kr(e,s=>{s&&Ys(i)("props updated",{},Ga.DEBUG)}),{propsReady:e,didMount:t}},Mn(kc),{singleton:!0});function r1(i,e){i==0?e():requestAnimationFrame(()=>r1(i-1,e))}function n1(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const Xf=Qr(([{sizes:i,listRefresh:e,defaultItemSize:t},{scrollTop:s},{scrollToIndex:a,scrollTargetReached:l},{didMount:h}])=>{const r=ci(!0),p=ci(0),m=ci(!0);return Ni(qt(h,wr(p),nr(([g,v])=>!!v),Do(!1)),r),Ni(qt(h,wr(p),nr(([g,v])=>!!v),Do(!1)),m),Kr(qt(fs(e,h),wr(r,i,t,m),nr(([[,g],v,{sizeTree:y},C,b])=>g&&(!dn(y)||Qb(C))&&!v&&!b),wr(p)),([,g])=>{Ho(l,()=>{vr(m,!0)}),r1(4,()=>{Ho(s,()=>{vr(r,!0)}),vr(a,g)})}),{scrolledToInitialItem:r,initialTopMostItemIndex:p,initialItemFinalLocationReached:m}},Mn(Jo,xa,Yf,Ac),{singleton:!0});function b2(i){return i?i==="smooth"?"smooth":"auto":!1}const fB=(i,e)=>typeof i=="function"?b2(i(e)):e&&b2(i),mB=Qr(([{totalCount:i,listRefresh:e},{isAtBottom:t,atBottomState:s},{scrollToIndex:a},{scrolledToInitialItem:l},{propsReady:h,didMount:r},{log:p},{scrollingInProgress:m}])=>{const g=ci(!1),v=Rr();let y=null;function C(T){vr(a,{index:"LAST",align:"end",behavior:T})}Kr(qt(fs(qt(cr(i),id(1)),r),wr(cr(g),t,l,m),Ai(([[T,S],k,x,A,D])=>{let w=S&&A,I="auto";return w&&(I=fB(k,x||D),w=w&&!!I),{totalCount:T,shouldFollow:w,followOutputBehavior:I}}),nr(({shouldFollow:T})=>T)),({totalCount:T,followOutputBehavior:S})=>{y&&(y(),y=null),y=Ho(e,()=>{Ys(p)("following output to ",{totalCount:T},Ga.DEBUG),C(S),y=null})});function b(T){const S=Ho(s,k=>{T&&!k.atBottom&&k.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(Ys(p)("scrolling to bottom due to increased size",{},Ga.DEBUG),C("auto"))});setTimeout(S,100)}return Kr(qt(fs(cr(g),i,h),nr(([T,,S])=>T&&S),Ro(({value:T},[,S])=>({refreshed:T===S,value:S}),{refreshed:!1,value:0}),nr(({refreshed:T})=>T),wr(g,i)),([,T])=>{Ys(l)&&b(T!==!1)}),Kr(v,()=>{b(Ys(g)!==!1)}),Kr(fs(cr(g),s),([T,S])=>{T&&!S.atBottom&&S.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&C("auto")}),{followOutput:g,autoscrollToBottom:v}},Mn(Jo,Zf,Yf,Xf,Ac,kc,xa));function gB(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}const n3=Qr(([{totalCount:i,groupIndices:e,sizes:t},{scrollTop:s,headerHeight:a}])=>{const l=Rr(),h=Rr(),r=Va(qt(l,Ai(gB)));return Ni(qt(r,Ai(p=>p.totalCount)),i),Ni(qt(r,Ai(p=>p.groupIndices)),e),Ni(qt(fs(s,t,a),nr(([p,m])=>Ky(m)),Ai(([p,m,g])=>xo(m.groupOffsetTree,Math.max(p-g,0),"v")[0]),Sn(),Ai(p=>[p])),h),{groupCounts:l,topItemsIndexes:h}},Mn(Jo,xa));function hf(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}function s3(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}const ry="top",ny="bottom",_2="none";function w2(i,e,t){return typeof i=="number"?t===cf&&e===ry||t===$p&&e===ny?i:0:t===cf?e===ry?i.main:i.reverse:e===ny?i.main:i.reverse}function T2(i,e){return typeof i=="number"?i:i[e]||0}const s1=Qr(([{scrollTop:i,viewportHeight:e,deviation:t,headerHeight:s,fixedHeaderHeight:a}])=>{const l=Rr(),h=ci(0),r=ci(0),p=ci(0),m=fa(qt(fs(cr(i),cr(e),cr(s),cr(l,hf),cr(p),cr(h),cr(a),cr(t),cr(r)),Ai(([g,v,y,[C,b],T,S,k,x,A])=>{const D=g-x,w=S+k,I=Math.max(y-D,0);let N=_2;const q=T2(A,ry),Y=T2(A,ny);return C-=x,C+=y+k,b+=y+k,b-=x,C>g+w-q&&(N=cf),b<g-I+v+Y&&(N=$p),N!==_2?[Math.max(D-y-w2(T,ry,N)-q,0),D-I-k+v+w2(T,ny,N)+Y]:null}),nr(g=>g!=null),Sn(hf)),[0,0]);return{listBoundary:l,overscan:p,topListHeight:h,increaseViewportBy:r,visibleRange:m}},Mn(xa),{singleton:!0});function yB(i,e,t){if(Ky(e)){const s=i3(i,e);return[{index:xo(e.groupOffsetTree,s)[0],size:0,offset:0},{index:s,size:0,offset:0,data:t&&t[0]}]}return[{index:i,size:0,offset:0,data:t&&t[0]}]}const S0={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function C2(i,e,t){if(i.length===0)return[];if(!Ky(e))return i.map(m=>({...m,index:m.index+t,originalIndex:m.index}));const s=i[0].index,a=i[i.length-1].index,l=[],h=Xy(e.groupOffsetTree,s,a);let r,p=0;for(const m of i){(!r||r.end<m.index)&&(r=h.shift(),p=e.groupIndices.indexOf(r.start));let g;m.index===r.start?g={type:"group",index:p}:g={index:m.index-(p+1)+t,groupIndex:p},l.push({...g,size:m.size,offset:m.offset,originalIndex:m.index,data:m.data})}return l}function Dg(i,e,t,s,a,l){const{lastSize:h,lastOffset:r,lastIndex:p}=a;let m=0,g=0;if(i.length>0){m=i[0].offset;const T=i[i.length-1];g=T.offset+T.size}const v=t-p,y=r+v*h+(v-1)*s,C=m,b=y-g;return{items:C2(i,a,l),topItems:C2(e,a,l),topListHeight:e.reduce((T,S)=>S.size+T,0),offsetTop:m,offsetBottom:b,top:C,bottom:g,totalCount:t,firstItemIndex:l}}function a3(i,e,t,s,a,l){let h=0;if(t.groupIndices.length>0)for(const g of t.groupIndices){if(g-h>=i)break;h++}const r=i+h,p=n1(e,r),m=Array.from({length:r}).map((g,v)=>({index:v+p,size:0,offset:0,data:l[v+p]}));return Dg(m,[],r,a,t,s)}const Uh=Qr(([{sizes:i,totalCount:e,data:t,firstItemIndex:s,gap:a},l,{visibleRange:h,listBoundary:r,topListHeight:p},{scrolledToInitialItem:m,initialTopMostItemIndex:g},{topListHeight:v},y,{didMount:C},{recalcInProgress:b}])=>{const T=ci([]),S=ci(0),k=Rr();Ni(l.topItemsIndexes,T);const x=fa(qt(fs(C,b,cr(h,hf),cr(e),cr(i),cr(g),m,cr(T),cr(s),cr(a),t),nr(([I,N,,q,,,,,,,Y])=>{const X=Y&&Y.length!==q;return I&&!N&&!X}),Ai(([,,[I,N],q,Y,X,B,j,O,R,L])=>{const G=Y,{sizeTree:$,offsetTree:F}=G,H=Ys(S);if(q===0)return{...S0,totalCount:q};if(I===0&&N===0)return H===0?{...S0,totalCount:q}:a3(H,X,Y,O,R,L||[]);if(dn($))return H>0?null:Dg(yB(n1(X,q),G,L),[],q,R,G,O);const W=[];if(j.length>0){const Ce=j[0],ge=j[j.length-1];let ke=0;for(const K of Xy($,Ce,ge)){const Q=K.value,le=Math.max(K.start,Ce),_e=Math.min(K.end,ge);for(let J=le;J<=_e;J++)W.push({index:J,size:Q,offset:ke,data:L&&L[J]}),ke+=Q}}if(!B)return Dg([],W,q,R,G,O);const re=j.length>0?j[j.length-1]+1:0,he=nB(F,I,N,re);if(he.length===0)return null;const ie=q-1,ae=Zy([],Ce=>{for(const ge of he){const ke=ge.value;let K=ke.offset,Q=ge.start;const le=ke.size;if(ke.offset<I){Q+=Math.floor((I-ke.offset+R)/(le+R));const J=Q-ge.start;K+=J*le+J*R}Q<re&&(K+=(re-Q)*le,Q=re);const _e=Math.min(ge.end,ie);for(let J=Q;J<=_e&&!(K>=N);J++)Ce.push({index:J,size:le,offset:K,data:L&&L[J]}),K+=le+R}});return Dg(ae,W,q,R,G,O)}),nr(I=>I!==null),Sn()),S0);Ni(qt(t,nr(Qb),Ai(I=>I==null?void 0:I.length)),e),Ni(qt(x,Ai(I=>I.topListHeight)),v),Ni(v,p),Ni(qt(x,Ai(I=>[I.top,I.bottom])),r),Ni(qt(x,Ai(I=>I.items)),k);const A=Va(qt(x,nr(({items:I})=>I.length>0),wr(e,t),nr(([{items:I},N])=>I[I.length-1].originalIndex===N-1),Ai(([,I,N])=>[I-1,N]),Sn(hf),Ai(([I])=>I))),D=Va(qt(x,dc(200),nr(({items:I,topItems:N})=>I.length>0&&I[0].originalIndex===N.length),Ai(({items:I})=>I[0].index),Sn())),w=Va(qt(x,nr(({items:I})=>I.length>0),Ai(({items:I})=>{let N=0,q=I.length-1;for(;I[N].type==="group"&&N<q;)N++;for(;I[q].type==="group"&&q>N;)q--;return{startIndex:I[N].index,endIndex:I[q].index}}),Sn(s3)));return{listState:x,topItemsIndexes:T,endReached:A,startReached:D,rangeChanged:w,itemsRendered:k,initialItemCount:S,...y}},Mn(Jo,n3,s1,Xf,Yf,Zf,Ac,t1),{singleton:!0}),xB=Qr(([{sizes:i,firstItemIndex:e,data:t,gap:s},{initialTopMostItemIndex:a},{initialItemCount:l,listState:h},{didMount:r}])=>(Ni(qt(r,wr(l),nr(([,p])=>p!==0),wr(a,i,e,s,t),Ai(([[,p],m,g,v,y,C=[]])=>a3(p,m,g,v,y,C))),h),{}),Mn(Jo,Xf,Uh,Ac),{singleton:!0}),o3=Qr(([{scrollVelocity:i}])=>{const e=ci(!1),t=Rr(),s=ci(!1);return Ni(qt(i,wr(s,e,t),nr(([a,l])=>!!l),Ai(([a,l,h,r])=>{const{exit:p,enter:m}=l;if(h){if(p(a,r))return!1}else if(m(a,r))return!0;return h}),Sn()),e),Kr(qt(fs(e,i,t),wr(s)),([[a,l,h],r])=>a&&r&&r.change&&r.change(l,h)),{isSeeking:e,scrollSeekConfiguration:s,scrollVelocity:i,scrollSeekRangeChanged:t}},Mn(Zf),{singleton:!0}),vB=Qr(([{topItemsIndexes:i}])=>{const e=ci(0);return Ni(qt(e,nr(t=>t>=0),Ai(t=>Array.from({length:t}).map((s,a)=>a))),i),{topItemCount:e}},Mn(Uh)),l3=Qr(([{footerHeight:i,headerHeight:e,fixedHeaderHeight:t,fixedFooterHeight:s},{listState:a}])=>{const l=Rr(),h=fa(qt(fs(i,s,e,t,a),Ai(([r,p,m,g,v])=>r+p+m+g+v.offsetBottom+v.bottom)),0);return Ni(cr(h),l),{totalListHeight:h,totalListHeightChanged:l}},Mn(xa,Uh),{singleton:!0});function c3(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const bB=c3(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),_B=Qr(([{scrollBy:i,scrollTop:e,deviation:t,scrollingInProgress:s},{isScrolling:a,isAtBottom:l,scrollDirection:h,lastJumpDueToItemResize:r},{listState:p},{beforeUnshiftWith:m,shiftWithOffset:g,sizes:v,gap:y},{log:C},{recalcInProgress:b}])=>{const T=Va(qt(p,wr(r),Ro(([,k,x,A],[{items:D,totalCount:w,bottom:I,offsetBottom:N},q])=>{const Y=I+N;let X=0;return x===w&&k.length>0&&D.length>0&&(D[0].originalIndex===0&&k[0].originalIndex===0||(X=Y-A,X!==0&&(X+=q))),[X,D,w,Y]},[0,[],0,0]),nr(([k])=>k!==0),wr(e,h,s,l,C,b),nr(([,k,x,A,,,D])=>!D&&!A&&k!==0&&x===cf),Ai(([[k],,,,,x])=>(x("Upward scrolling compensation",{amount:k},Ga.DEBUG),k))));function S(k){k>0?(vr(i,{top:-k,behavior:"auto"}),vr(t,0)):(vr(t,0),vr(i,{top:-k,behavior:"auto"}))}return Kr(qt(T,wr(t,a)),([k,x,A])=>{A&&bB()?vr(t,x-k):S(-k)}),Kr(qt(fs(fa(a,!1),t,b),nr(([k,x,A])=>!k&&!A&&x!==0),Ai(([k,x])=>x),dc(1)),S),Ni(qt(g,Ai(k=>({top:-k}))),i),Kr(qt(m,wr(v,y),Ai(([k,{lastSize:x,groupIndices:A,sizeTree:D},w])=>{function I(N){return N*(x+w)}if(A.length===0)return I(k);{let N=0;const q=of(D,0);let Y=0,X=0;for(;Y<k;){Y++,N+=q;let B=A.length===X+1?1/0:A[X+1]-A[X]-1;Y+B>k&&(N-=q,B=k-Y+1),Y+=B,N+=I(B),X++}return N}})),k=>{vr(t,k),requestAnimationFrame(()=>{vr(i,{top:k}),requestAnimationFrame(()=>{vr(t,0),vr(b,!1)})})}),{deviation:t}},Mn(xa,Zf,Uh,Jo,kc,t1)),wB=Qr(([{didMount:i},{scrollTo:e},{listState:t}])=>{const s=ci(0);return Kr(qt(i,wr(s),nr(([,a])=>a!==0),Ai(([,a])=>({top:a}))),a=>{Ho(qt(t,id(1),nr(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{vr(e,a)})})}),{initialScrollTop:s}},Mn(Ac,xa,Uh),{singleton:!0}),TB=Qr(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ci(!1),s=fa(qt(fs(t,i,e),nr(([a])=>a),Ai(([,a,l])=>Math.max(0,a-l)),dc(0),Sn()),0);return{alignToBottom:t,paddingTopAddition:s}},Mn(xa,l3),{singleton:!0}),a1=Qr(([{scrollTo:i,scrollContainerState:e}])=>{const t=Rr(),s=Rr(),a=Rr(),l=ci(!1),h=ci(void 0);return Ni(qt(fs(t,s),Ai(([{viewportHeight:r,scrollTop:p,scrollHeight:m},{offsetTop:g}])=>({scrollTop:Math.max(0,p-g),scrollHeight:m,viewportHeight:r}))),e),Ni(qt(i,wr(s),Ai(([r,{offsetTop:p}])=>({...r,top:r.top+p}))),a),{useWindowScroll:l,customScrollParent:h,windowScrollContainerState:t,windowViewportRect:s,windowScrollTo:a}},Mn(xa)),CB=({itemTop:i,itemBottom:e,viewportTop:t,viewportBottom:s,locationParams:{behavior:a,align:l,...h}})=>i<t?{...h,behavior:a,align:l??"start"}:e>s?{...h,behavior:a,align:l??"end"}:null,EB=Qr(([{sizes:i,totalCount:e,gap:t},{scrollTop:s,viewportHeight:a,headerHeight:l,fixedHeaderHeight:h,fixedFooterHeight:r,scrollingInProgress:p},{scrollToIndex:m}])=>{const g=Rr();return Ni(qt(g,wr(i,a,e,l,h,r,s),wr(t),Ai(([[v,y,C,b,T,S,k,x],A])=>{const{done:D,behavior:w,align:I,calculateViewLocation:N=CB,...q}=v,Y=t3(v,y,b-1),X=lf(Y,y.offsetTree,A)+T+S,B=X+xo(y.sizeTree,Y)[1],j=x+S,O=x+C-k,R=N({itemTop:X,itemBottom:B,viewportTop:j,viewportBottom:O,locationParams:{behavior:w,align:I,...q}});return R?D&&Ho(qt(p,nr(L=>L===!1),id(Ys(p)?1:2)),D):D&&D(),R}),nr(v=>v!==null)),m),{scrollIntoView:g}},Mn(Jo,xa,Yf,Uh,kc),{singleton:!0}),SB=Qr(([{sizes:i,sizeRanges:e},{scrollTop:t,headerHeight:s},{initialTopMostItemIndex:a},{didMount:l},{useWindowScroll:h,windowScrollContainerState:r,windowViewportRect:p}])=>{const m=Rr(),g=ci(void 0),v=ci(null),y=ci(null);return Ni(r,v),Ni(p,y),Kr(qt(m,wr(i,t,h,v,y,s)),([C,b,T,S,k,x,A])=>{const D=oB(b.sizeTree);S&&k!==null&&x!==null&&(T=k.scrollTop-x.offsetTop),T-=A,C({ranges:D,scrollTop:T})}),Ni(qt(g,nr(Qb),Ai(kB)),a),Ni(qt(l,wr(g),nr(([,C])=>C!==void 0),Sn(),Ai(([,C])=>C.ranges)),e),{getState:m,restoreStateFrom:g}},Mn(Jo,xa,Xf,Ac,a1));function kB(i){return{offset:i.scrollTop,index:0,align:"start"}}const AB=Qr(([i,e,t,s,a,l,h,r,p,m])=>({...i,...e,...t,...s,...a,...l,...h,...r,...p,...m}),Mn(s1,xB,Ac,o3,l3,wB,TB,a1,EB,kc)),MB=Qr(([{totalCount:i,sizeRanges:e,fixedItemSize:t,defaultItemSize:s,trackItemSizes:a,itemSize:l,data:h,firstItemIndex:r,groupIndices:p,statefulTotalCount:m,gap:g,sizes:v},{initialTopMostItemIndex:y,scrolledToInitialItem:C,initialItemFinalLocationReached:b},T,S,k,{listState:x,topItemsIndexes:A,...D},{scrollToIndex:w},I,{topItemCount:N},{groupCounts:q},Y])=>(Ni(D.rangeChanged,Y.scrollSeekRangeChanged),Ni(qt(Y.windowViewportRect,Ai(X=>X.visibleHeight)),T.viewportHeight),{totalCount:i,data:h,firstItemIndex:r,sizeRanges:e,initialTopMostItemIndex:y,scrolledToInitialItem:C,initialItemFinalLocationReached:b,topItemsIndexes:A,topItemCount:N,groupCounts:q,fixedItemHeight:t,defaultItemHeight:s,gap:g,...k,statefulTotalCount:m,listState:x,scrollToIndex:w,trackItemSizes:a,itemSize:l,groupIndices:p,...D,...Y,...T,sizes:v,...S}),Mn(Jo,Xf,xa,SB,mB,Uh,Yf,_B,vB,n3,AB)),k0="-webkit-sticky",E2="sticky",h3=c3(()=>{if(typeof document>"u")return E2;const i=document.createElement("div");return i.style.position=k0,i.style.position===k0?k0:E2});function u3(i,e,t){const s=Te.useRef(null),a=Te.useCallback(p=>{if(p===null||!p.offsetParent)return;const m=p.getBoundingClientRect(),g=m.width;let v,y;if(e){const C=e.getBoundingClientRect(),b=m.top-C.top;v=C.height-Math.max(0,b),y=b+e.scrollTop}else v=window.innerHeight-Math.max(0,m.top),y=m.top+window.pageYOffset;s.current={offsetTop:y,visibleHeight:v,visibleWidth:g},i(s.current)},[i,e]),{callbackRef:l,ref:h}=e1(a,!0,t),r=Te.useCallback(()=>{a(h.current)},[a,h]);return Te.useEffect(()=>{if(e){e.addEventListener("scroll",r);const p=new ResizeObserver(()=>{requestAnimationFrame(r)});return p.observe(e),()=>{e.removeEventListener("scroll",r),p.unobserve(e)}}else return window.addEventListener("scroll",r),window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[r,e]),l}const d3=Te.createContext(void 0),p3=Te.createContext(void 0);function f3(i){return i}const PB=Qr(()=>{const i=ci(p=>`Item ${p}`),e=ci(null),t=ci(p=>`Group ${p}`),s=ci({}),a=ci(f3),l=ci("div"),h=ci(xd),r=(p,m=null)=>fa(qt(s,Ai(g=>g[p]),Sn()),m);return{context:e,itemContent:i,groupContent:t,components:s,computeItemKey:a,HeaderFooterTag:l,scrollerRef:h,FooterComponent:r("Footer"),HeaderComponent:r("Header"),TopItemListComponent:r("TopItemList"),ListComponent:r("List","div"),ItemComponent:r("Item","div"),GroupComponent:r("Group","div"),ScrollerComponent:r("Scroller","div"),EmptyPlaceholder:r("EmptyPlaceholder"),ScrollSeekPlaceholder:r("ScrollSeekPlaceholder")}}),IB=Qr(([i,e])=>({...i,...e}),Mn(MB,PB)),DB=({height:i})=>se.jsx("div",{style:{height:i}}),LB={position:h3(),zIndex:1,overflowAnchor:"none"},m3={overflowAnchor:"none"},RB={...m3,display:"inline-block",height:"100%"},S2=Te.memo(function({showTopList:e=!1}){const t=ur("listState"),s=Ja("sizeRanges"),a=ur("useWindowScroll"),l=ur("customScrollParent"),h=Ja("windowScrollContainerState"),r=Ja("scrollContainerState"),p=l||a?h:r,m=ur("itemContent"),g=ur("context"),v=ur("groupContent"),y=ur("trackItemSizes"),C=ur("itemSize"),b=ur("log"),T=Ja("gap"),S=ur("horizontalDirection"),{callbackRef:k}=Z8(s,C,y,e?xd:p,b,T,l,S,ur("skipAnimationFrameInResizeObserver")),[x,A]=Te.useState(0);o1("deviation",L=>{x!==L&&A(L)});const D=ur("EmptyPlaceholder"),w=ur("ScrollSeekPlaceholder")||DB,I=ur("ListComponent"),N=ur("ItemComponent"),q=ur("GroupComponent"),Y=ur("computeItemKey"),X=ur("isSeeking"),B=ur("groupIndices").length>0,j=ur("alignToBottom"),O=ur("initialItemFinalLocationReached"),R=e?{}:{boxSizing:"border-box",...S?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:x!==0?x:j?"auto":0}:{marginTop:x!==0?x:j?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...O?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&D?se.jsx(D,{...pa(D,g)}):se.jsx(I,{...pa(I,g),ref:k,style:R,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(L=>{const G=L.originalIndex,$=Y(G+t.firstItemIndex,L.data,g);return X?Be.createElement(w,{...pa(w,g),key:$,index:L.index,height:L.size,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?Be.createElement(q,{...pa(q,g),key:$,"data-index":G,"data-known-size":L.size,"data-item-index":L.index,style:LB},v(L.index,g)):Be.createElement(N,{...pa(N,g),...jB(N,L.data),key:$,"data-index":G,"data-known-size":L.size,"data-item-index":L.index,"data-item-group-index":L.groupIndex,style:S?RB:m3},B?m(L.index,L.groupIndex,L.data,g):m(L.index,L.data,g))})})}),zB={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},NB={outline:"none",overflowX:"auto",position:"relative"},Qy=i=>({width:"100%",height:"100%",position:"absolute",top:0,...i?{display:"flex",flexDirection:"column"}:{}}),OB={width:"100%",position:h3(),top:0,zIndex:1};function pa(i,e){if(typeof i!="string")return{context:e}}function jB(i,e){return{item:typeof i=="string"?void 0:e}}const BB=Te.memo(function(){const e=ur("HeaderComponent"),t=Ja("headerHeight"),s=ur("HeaderFooterTag"),a=Fh(Te.useMemo(()=>h=>t(bc(h,"height")),[t]),!0,ur("skipAnimationFrameInResizeObserver")),l=ur("context");return e?se.jsx(s,{ref:a,children:se.jsx(e,{...pa(e,l)})}):null}),FB=Te.memo(function(){const e=ur("FooterComponent"),t=Ja("footerHeight"),s=ur("HeaderFooterTag"),a=Fh(Te.useMemo(()=>h=>t(bc(h,"height")),[t]),!0,ur("skipAnimationFrameInResizeObserver")),l=ur("context");return e?se.jsx(s,{ref:a,children:se.jsx(e,{...pa(e,l)})}):null});function g3({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Te.memo(function({style:l,children:h,...r}){const p=i("scrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("scrollerRef"),y=t("context"),C=t("horizontalDirection")||!1,{scrollerRef:b,scrollByCallback:T,scrollToCallback:S}=YS(p,g,m,v,void 0,C);e("scrollTo",S),e("scrollBy",T);const k=C?NB:zB;return se.jsx(m,{ref:b,style:{...k,...l},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...r,...pa(m,y),children:h})})}function y3({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Te.memo(function({style:l,children:h,...r}){const p=i("windowScrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("totalListHeight"),y=t("deviation"),C=t("customScrollParent"),b=t("context"),{scrollerRef:T,scrollByCallback:S,scrollToCallback:k}=YS(p,g,m,xd,C);return WS(()=>(T.current=C||window,()=>{T.current=null}),[T,C]),e("windowScrollTo",k),e("scrollBy",S),se.jsx(m,{style:{position:"relative",...l,...v!==0?{height:v+y}:{}},"data-virtuoso-scroller":!0,...r,...pa(m,b),children:h})})}const UB=({children:i})=>{const e=Te.useContext(d3),t=Ja("viewportHeight"),s=Ja("fixedItemHeight"),a=ur("alignToBottom"),l=ur("horizontalDirection"),h=Te.useMemo(()=>$S(t,p=>bc(p,l?"width":"height")),[t,l]),r=Fh(h,!0,ur("skipAnimationFrameInResizeObserver"));return Te.useEffect(()=>{e&&(t(e.viewportHeight),s(e.itemHeight))},[e,t,s]),se.jsx("div",{style:Qy(a),ref:r,"data-viewport-type":"element",children:i})},$B=({children:i})=>{const e=Te.useContext(d3),t=Ja("windowViewportRect"),s=Ja("fixedItemHeight"),a=ur("customScrollParent"),l=u3(t,a,ur("skipAnimationFrameInResizeObserver")),h=ur("alignToBottom");return Te.useEffect(()=>{e&&(s(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,s]),se.jsx("div",{ref:l,style:Qy(h),"data-viewport-type":"window",children:i})},VB=({children:i})=>{const e=ur("TopItemListComponent")||"div",t=ur("headerHeight"),s={...OB,marginTop:`${t}px`},a=ur("context");return se.jsx(e,{style:s,...pa(e,a),children:i})},GB=Te.memo(function(e){const t=ur("useWindowScroll"),s=ur("topItemsIndexes").length>0,a=ur("customScrollParent"),l=a||t?qB:WB,h=a||t?$B:UB;return se.jsxs(l,{...e,children:[s&&se.jsx(VB,{children:se.jsx(S2,{showTopList:!0})}),se.jsxs(h,{children:[se.jsx(BB,{}),se.jsx(S2,{}),se.jsx(FB,{})]})]})}),{Component:HB,usePublisher:Ja,useEmitterValue:ur,useEmitter:o1}=HS(IB,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},GB),WB=g3({usePublisher:Ja,useEmitterValue:ur,useEmitter:o1}),qB=y3({usePublisher:Ja,useEmitterValue:ur,useEmitter:o1}),YB=HB,k2={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},ZB={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:A2,ceil:M2,floor:sy,min:A0,max:Vp}=Math;function XB(i){return{...ZB,items:i}}function P2(i,e,t){return Array.from({length:e-i+1}).map((s,a)=>{const l=t===null?null:t[a+i];return{index:a+i,data:l}})}function KB(i,e){return i&&i.column===e.column&&i.row===e.row}function mg(i,e){return i&&i.width===e.width&&i.height===e.height}const QB=Qr(([{overscan:i,visibleRange:e,listBoundary:t,increaseViewportBy:s},{scrollTop:a,viewportHeight:l,scrollBy:h,scrollTo:r,smoothScrollTargetReached:p,scrollContainerState:m,footerHeight:g,headerHeight:v},y,C,{propsReady:b,didMount:T},{windowViewportRect:S,useWindowScroll:k,customScrollParent:x,windowScrollContainerState:A,windowScrollTo:D},w])=>{const I=ci(0),N=ci(0),q=ci(k2),Y=ci({height:0,width:0}),X=ci({height:0,width:0}),B=Rr(),j=Rr(),O=ci(0),R=ci(null),L=ci({row:0,column:0}),G=Rr(),$=Rr(),F=ci(!1),H=ci(0),W=ci(!0),re=ci(!1),he=ci(!1);Kr(qt(T,wr(H),nr(([K,Q])=>!!Q)),()=>{vr(W,!1)}),Kr(qt(fs(T,W,X,Y,H,re),nr(([K,Q,le,_e,,J])=>K&&!Q&&le.height!==0&&_e.height!==0&&!J)),([,,,,K])=>{vr(re,!0),r1(1,()=>{vr(B,K)}),Ho(qt(a),()=>{vr(t,[0,0]),vr(W,!0)})}),Ni(qt($,nr(K=>K!=null&&K.scrollTop>0),Do(0)),N),Kr(qt(T,wr($),nr(([,K])=>K!=null)),([,K])=>{K&&(vr(Y,K.viewport),vr(X,K==null?void 0:K.item),vr(L,K.gap),K.scrollTop>0&&(vr(F,!0),Ho(qt(a,id(1)),Q=>{vr(F,!1)}),vr(r,{top:K.scrollTop})))}),Ni(qt(Y,Ai(({height:K})=>K)),l),Ni(qt(fs(cr(Y,mg),cr(X,mg),cr(L,(K,Q)=>K&&K.column===Q.column&&K.row===Q.row),cr(a)),Ai(([K,Q,le,_e])=>({viewport:K,item:Q,gap:le,scrollTop:_e}))),G),Ni(qt(fs(cr(I),e,cr(L,KB),cr(X,mg),cr(Y,mg),cr(R),cr(N),cr(F),cr(W),cr(H)),nr(([,,,,,,,K])=>!K),Ai(([K,[Q,le],_e,J,ne,ue,ye,,we,ze])=>{const{row:Ee,column:Ie}=_e,{height:Fe,width:He}=J,{width:Ae}=ne;if(ye===0&&(K===0||Ae===0))return k2;if(He===0){const dt=n1(ze,K),gt=dt+Math.max(ye-1,0);return XB(P2(dt,gt,ue))}const xe=x3(Ae,He,Ie);let me,Me;we?Q===0&&le===0&&ye>0?(me=0,Me=ye-1):(me=xe*sy((Q+Ee)/(Fe+Ee)),Me=xe*M2((le+Ee)/(Fe+Ee))-1,Me=A0(K-1,Vp(Me,xe-1)),me=A0(Me,Vp(0,me))):(me=0,Me=-1);const De=P2(me,Me,ue),{top:Pe,bottom:je}=I2(ne,_e,J,De),Xe=M2(K/xe),rt=Xe*Fe+(Xe-1)*Ee-je;return{items:De,offsetTop:Pe,offsetBottom:rt,top:Pe,bottom:je,itemHeight:Fe,itemWidth:He}})),q),Ni(qt(R,nr(K=>K!==null),Ai(K=>K.length)),I),Ni(qt(fs(Y,X,q,L),nr(([K,Q,{items:le}])=>le.length>0&&Q.height!==0&&K.height!==0),Ai(([K,Q,{items:le},_e])=>{const{top:J,bottom:ne}=I2(K,_e,Q,le);return[J,ne]}),Sn(hf)),t);const ie=ci(!1);Ni(qt(a,wr(ie),Ai(([K,Q])=>Q||K!==0)),ie);const ae=Va(qt(fs(q,I),nr(([{items:K}])=>K.length>0),wr(ie),nr(([[K,Q],le])=>{const J=K.items[K.items.length-1].index===Q-1;return(le||K.bottom>0&&K.itemHeight>0&&K.offsetBottom===0&&K.items.length===Q)&&J}),Ai(([[,K]])=>K-1),Sn())),Ce=Va(qt(cr(q),nr(({items:K})=>K.length>0&&K[0].index===0),Do(0),Sn())),ge=Va(qt(cr(q),wr(F),nr(([{items:K},Q])=>K.length>0&&!Q),Ai(([{items:K}])=>({startIndex:K[0].index,endIndex:K[K.length-1].index})),Sn(s3),dc(0)));Ni(ge,C.scrollSeekRangeChanged),Ni(qt(B,wr(Y,X,I,L),Ai(([K,Q,le,_e,J])=>{const ne=r3(K),{align:ue,behavior:ye,offset:we}=ne;let ze=ne.index;ze==="LAST"&&(ze=_e-1),ze=Vp(0,ze,A0(_e-1,ze));let Ee=Tv(Q,J,le,ze);return ue==="end"?Ee=A2(Ee-Q.height+le.height):ue==="center"&&(Ee=A2(Ee-Q.height/2+le.height/2)),we&&(Ee+=we),{top:Ee,behavior:ye}})),r);const ke=fa(qt(q,Ai(K=>K.offsetBottom+K.bottom)),0);return Ni(qt(S,Ai(K=>({width:K.visibleWidth,height:K.visibleHeight}))),Y),{data:R,totalCount:I,viewportDimensions:Y,itemDimensions:X,scrollTop:a,scrollHeight:j,overscan:i,increaseViewportBy:s,scrollBy:h,scrollTo:r,scrollToIndex:B,smoothScrollTargetReached:p,windowViewportRect:S,windowScrollTo:D,useWindowScroll:k,customScrollParent:x,windowScrollContainerState:A,deviation:O,scrollContainerState:m,footerHeight:g,headerHeight:v,initialItemCount:N,gap:L,restoreStateFrom:$,...C,initialTopMostItemIndex:H,horizontalDirection:he,gridState:q,totalListHeight:ke,...y,startReached:Ce,endReached:ae,rangeChanged:ge,stateChanged:G,propsReady:b,stateRestoreInProgress:F,...w}},Mn(s1,xa,Zf,o3,Ac,a1,kc));function I2(i,e,t,s){const{height:a}=t;if(a===void 0||s.length===0)return{top:0,bottom:0};const l=Tv(i,e,t,s[0].index),h=Tv(i,e,t,s[s.length-1].index)+a;return{top:l,bottom:h}}function Tv(i,e,t,s){const a=x3(i.width,t.width,e.column),l=sy(s/a),h=l*t.height+Vp(0,l-1)*e.row;return h>0?h+e.row:h}function x3(i,e,t){return Vp(1,sy((i+t)/(sy(e)+t)))}const JB=Qr(()=>{const i=ci(v=>`Item ${v}`),e=ci({}),t=ci(null),s=ci("virtuoso-grid-item"),a=ci("virtuoso-grid-list"),l=ci(f3),h=ci("div"),r=ci(xd),p=(v,y=null)=>fa(qt(e,Ai(C=>C[v]),Sn()),y),m=ci(!1),g=ci(!1);return Ni(cr(g),m),{readyStateChanged:m,reportReadyState:g,context:t,itemContent:i,components:e,computeItemKey:l,itemClassName:s,listClassName:a,headerFooterTag:h,scrollerRef:r,FooterComponent:p("Footer"),HeaderComponent:p("Header"),ListComponent:p("List","div"),ItemComponent:p("Item","div"),ScrollerComponent:p("Scroller","div"),ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),e7=Qr(([i,e])=>({...i,...e}),Mn(QB,JB)),t7=Te.memo(function(){const e=In("gridState"),t=In("listClassName"),s=In("itemClassName"),a=In("itemContent"),l=In("computeItemKey"),h=In("isSeeking"),r=eo("scrollHeight"),p=In("ItemComponent"),m=In("ListComponent"),g=In("ScrollSeekPlaceholder"),v=In("context"),y=eo("itemDimensions"),C=eo("gap"),b=In("log"),T=In("stateRestoreInProgress"),S=eo("reportReadyState"),k=Fh(Te.useMemo(()=>x=>{const A=x.parentElement.parentElement.scrollHeight;r(A);const D=x.firstChild;if(D){const{width:w,height:I}=D.getBoundingClientRect();y({width:w,height:I})}C({row:D2("row-gap",getComputedStyle(x).rowGap,b),column:D2("column-gap",getComputedStyle(x).columnGap,b)})},[r,y,C,b]),!0,!1);return WS(()=>{e.itemHeight>0&&e.itemWidth>0&&S(!0)},[e]),T?null:se.jsx(m,{ref:k,className:t,...pa(m,v),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(x=>{const A=l(x.index,x.data,v);return h?se.jsx(g,{...pa(g,v),index:x.index,height:e.itemHeight,width:e.itemWidth},A):Be.createElement(p,{...pa(p,v),className:s,"data-index":x.index,key:A},a(x.index,x.data,v))})})}),i7=Te.memo(function(){const e=In("HeaderComponent"),t=eo("headerHeight"),s=In("headerFooterTag"),a=Fh(Te.useMemo(()=>h=>t(bc(h,"height")),[t]),!0,!1),l=In("context");return e?se.jsx(s,{ref:a,children:se.jsx(e,{...pa(e,l)})}):null}),r7=Te.memo(function(){const e=In("FooterComponent"),t=eo("footerHeight"),s=In("headerFooterTag"),a=Fh(Te.useMemo(()=>h=>t(bc(h,"height")),[t]),!0,!1),l=In("context");return e?se.jsx(s,{ref:a,children:se.jsx(e,{...pa(e,l)})}):null}),n7=({children:i})=>{const e=Te.useContext(p3),t=eo("itemDimensions"),s=eo("viewportDimensions"),a=Fh(Te.useMemo(()=>l=>{s(l.getBoundingClientRect())},[s]),!0,!1);return Te.useEffect(()=>{e&&(s({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,s,t]),se.jsx("div",{style:Qy(!1),ref:a,children:i})},s7=({children:i})=>{const e=Te.useContext(p3),t=eo("windowViewportRect"),s=eo("itemDimensions"),a=In("customScrollParent"),l=u3(t,a,!1);return Te.useEffect(()=>{e&&(s({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,s]),se.jsx("div",{ref:l,style:Qy(!1),children:i})},a7=Te.memo(function({...e}){const t=In("useWindowScroll"),s=In("customScrollParent"),a=s||t?l7:o7,l=s||t?s7:n7;return se.jsx(a,{...e,children:se.jsxs(l,{children:[se.jsx(i7,{}),se.jsx(t7,{}),se.jsx(r7,{})]})})}),{Component:fq,usePublisher:eo,useEmitterValue:In,useEmitter:v3}=HS(e7,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},a7),o7=g3({usePublisher:eo,useEmitterValue:In,useEmitter:v3}),l7=y3({usePublisher:eo,useEmitterValue:In,useEmitter:v3});function D2(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ga.WARN),e==="normal"?0:parseInt(e??"0",10)}const b3=i=>{let{evaluationPerOrgUnits:e,useVirtuoso:t=!0,useVirtuosoWindowScroll:s=!1}=i;function a(){return l=>{const h=e[l];return h&&Te.createElement("div",{key:h.orgUnitId},Te.createElement(d2,{orgUnitsData:h}))}}return t?Te.createElement("div",null,Te.createElement(YB,{style:{height:"60vh"},useWindowScroll:s,totalCount:e.length,itemContent:a()})):Te.createElement(Te.Fragment,null,e.map((l,h)=>Te.createElement(d2,{orgUnitsData:l,key:l.orgUnitId})))};function Cv(){return Cv=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Cv.apply(null,arguments)}const c7=i=>{let{splitPeriods:e,setSelectedSplitPeriod:t,selectedSplitPeriod:s,...a}=i;const l=e.includes(s);return Te.createElement("div",null,Te.createElement("div",null,Te.createElement(ds,Cv({},a,{selected:l?s:void 0,onChange:h=>t(h.selected)}),e.map((h,r)=>Te.createElement(io,{key:r,label:FS(h),value:h})))))},h7="_orgUnitsSelction_1ir4t_1",u7="_wrapper_1ir4t_7",d7="_filterCheckbox_1ir4t_14",p7="_filter_1ir4t_14",f7="_plots_1ir4t_25",m7="_searchInput_1ir4t_29",g7="_filterTitle_1ir4t_34",ah={orgUnitsSelction:h7,wrapper:u7,filterCheckbox:d7,filter:p7,plots:f7,searchInput:m7,filterTitle:g7},y7=i=>{var e;let{evaluationName:t,modelName:s,evaluations:a,splitPeriods:l}=i;const[h,r]=Be.useState([]),[p,m]=Be.useState(),[g,v]=Be.useState([]),[y,C]=Be.useState([]),[b,T]=Be.useState(l[0]);Be.useEffect(()=>{const k=a[0];v(k.evaluation.map(x=>x.orgUnitId)),C(k.evaluation.map(x=>({name:x.orgUnitName,id:x.orgUnitId}))),T(k.splitPoint),r(k.evaluation)},[a,l]),Be.useEffect(()=>{const k=a.find(A=>A.splitPoint===b),x=g==null?void 0:g.map(A=>k.evaluation.find(D=>D.orgUnitId===A&&D.orgUnitName.toLocaleLowerCase().includes(p?p.toLocaleLowerCase():"")));r(x)},[b,g,p]);const S=k=>{const x=k.checked?[...g,k.value]:g.filter(A=>A!==k.value);v(x)};return Te.createElement(Te.Fragment,null,Te.createElement("div",{className:ah.wrapper},Te.createElement("div",{className:ah.filter},Te.createElement("div",null,Te.createElement("h2",null,"Evaluation: ",t)),Te.createElement("div",null,Te.createElement("div",{className:ah.filterTitle},"Split period:"),Te.createElement(c7,{splitPeriods:l,setSelectedSplitPeriod:T,selectedSplitPeriod:b})),Te.createElement("div",null,Te.createElement("div",{className:ah.filterTitle},"Organization units:"),Te.createElement("div",{className:ah.filterCheckbox},y.map((k,x)=>Te.createElement(Sf,{checked:g.filter(A=>A==k.id).length>0,onChange:S,label:k.name,key:k.id,value:k.id}))))),Te.createElement("div",{className:ah.plots},Te.createElement("div",null,Te.createElement("h3",null,"Model: ",s)),Te.createElement("div",{className:ah.searchInput},Te.createElement(Ef,{label:"Search for organization units:",placeholder:((e=y[0])===null||e===void 0?void 0:e.name)+"..",onChange:k=>m(k.value),value:p})),Te.createElement(b3,{evaluationPerOrgUnits:h,useVirtuoso:!0}))))},x7="_table_11vie_1",v7="_quantile_low_11vie_22",b7="_quantile_high_11vie_26",_7={table:x7,quantile_low:v7,quantile_high:b7},L2=i=>[...new Set(i.map(e=>e.period))],w7=i=>[...new Set(i.map(e=>e.orgUnit))],T7=i=>[...new Set(i.map(e=>e.dataElement))],C7=(i,e)=>{var t;return(t=e.find(s=>s.orgUnit===i))===null||t===void 0?void 0:t.displayName},E7=i=>{let{data:e}=i;const t=e.dataValues;return Te.createElement(Te.Fragment,null,w7(t).map(s=>Te.createElement("div",{key:s},Te.createElement("h3",null,Je.t("Prediction for {{orgUnitName}}",{orgUnitName:C7(s,t)})),Te.createElement("table",{className:_7.table},Te.createElement("thead",null,Te.createElement("tr",null,Te.createElement("th",null,"Quantiles"),L2(t).map(a=>Te.createElement("th",{key:a},Yb({periodId:a,calendar:"gregory"}).displayName)))),Te.createElement("tbody",null,T7(t).map(a=>Te.createElement("tr",{key:a},Te.createElement("td",null,a.replaceAll("_"," ")),L2(t).map(l=>Te.createElement("td",{key:l},t.filter(h=>h.dataElement===a&&h.orgUnit===s&&h.period===l)[0].value)))))))))};var S7={exports:{}};(function(i,e){(function(t,s){i.exports=s()})(un,function(){var t,s,a;function l(r,p){if(!t)t=p;else if(!s)s=p;else{var m="var sharedChunk = {}; ("+t+")(sharedChunk); ("+s+")(sharedChunk);",g={};t(g),a=p(g),typeof window<"u"&&(a.workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"})))}}l(["exports"],function(r){var p=m;function m(c,n,u,f){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=n,this.p2x=u,this.p2y=f}function g(c,n,u,f){const M=new p(c,n,u,f);return function(z){return M.solve(z)}}m.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,n){if(n===void 0&&(n=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,f=0;f<8;f++){var M=this.sampleCurveX(u)-c;if(Math.abs(M)<n)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=M/z}var V=0,te=1;for(u=c,f=0;f<20&&(M=this.sampleCurveX(u),!(Math.abs(M-c)<n));f++)c>M?V=u:te=u,u=.5*(te-V)+V;return u},solve:function(c,n){return this.sampleCurveY(this.solveCurveX(c,n))}};const v=g(.25,.1,.25,1);function y(c,n,u){return Math.min(u,Math.max(n,c))}function C(c,n,u){const f=u-n,M=((c-n)%f+f)%f+n;return M===n?u:M}function b(c,...n){for(const u of n)for(const f in u)c[f]=u[f];return c}let T=1;function S(c,n){c.forEach(u=>{n[u]&&(n[u]=n[u].bind(n))})}function k(c,n,u){const f={};for(const M in c)f[M]=n.call(u||this,c[M],M,c);return f}function x(c,n,u){const f={};for(const M in c)n.call(u||this,c[M],M,c)&&(f[M]=c[M]);return f}function A(c){return Array.isArray(c)?c.map(A):typeof c=="object"&&c?k(c,A):c}const D={};function w(c){D[c]||(typeof console<"u"&&console.warn(c),D[c]=!0)}function I(c,n,u){return(u.y-c.y)*(n.x-c.x)>(n.y-c.y)*(u.x-c.x)}function N(c){let n=0;for(let u,f,M=0,z=c.length,V=z-1;M<z;V=M++)u=c[M],f=c[V],n+=(f.x-u.x)*(u.y+f.y);return n}function q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Y(c){const n={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,M,z)=>{const V=M||z;return n[f]=!V||V.toLowerCase(),""}),n["max-age"]){const u=parseInt(n["max-age"],10);isNaN(u)?delete n["max-age"]:n["max-age"]=u}return n}let X,B,j=null;function O(c){if(j==null){const n=c.navigator?c.navigator.userAgent:null;j=!!c.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return j}function R(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const n=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(c,n=0){const u=window.document.createElement("canvas"),f=u.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return u.width=c.width,u.height=c.height,f.drawImage(c,0,0,c.width,c.height),f.getImageData(-n,-n,c.width+2*n,c.height+2*n)},resolveURL:c=>(X||(X=document.createElement("a")),X.href=c,X.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};var G=$;function $(c,n){this.x=c,this.y=n}$.prototype={clone:function(){return new $(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,n){return this.clone()._rotateAround(c,n)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var n=c.x-this.x,u=c.y-this.y;return n*n+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,n){return Math.atan2(this.x*n-this.y*c,this.x*c+this.y*n)},_matMult:function(c){var n=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=n,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var n=Math.cos(c),u=Math.sin(c),f=u*this.x+n*this.y;return this.x=n*this.x-u*this.y,this.y=f,this},_rotateAround:function(c,n){var u=Math.cos(c),f=Math.sin(c),M=n.y+f*(this.x-n.x)+u*(this.y-n.y);return this.x=n.x+u*(this.x-n.x)-f*(this.y-n.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$.convert=function(c){return c instanceof $?c:Array.isArray(c)?new $(c[0],c[1]):c};const F={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},H="mapbox-tiles";let W,re=500,he=50;function ie(){typeof caches>"u"||W||(W=caches.open(H))}let ae=1/0;const Ce={supported:!1,testSupport:function(c){!K&&ke&&(Q?le(c):ge=c)}};let ge,ke,K=!1,Q=!1;function le(c){const n=c.createTexture();c.bindTexture(c.TEXTURE_2D,n);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,ke),c.isContextLost())return;Ce.supported=!0}catch{}c.deleteTexture(n),K=!0}typeof document<"u"&&(ke=document.createElement("img"),ke.onload=function(){ge&&le(ge),ge=null,Q=!0},ke.onerror=function(){K=!0,ge=null},ke.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const _e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(_e);class J extends Error{constructor(n,u,f,M){super(`AJAXError: ${u} (${n}): ${f}`),this.status=n,this.statusText=u,this.url=f,this.body=M}}const ne=q()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ue(c,n){const u=new AbortController,f=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:ne(),signal:u.signal});let M=!1,z=!1;return c.type==="json"&&f.headers.set("Accept","application/json"),((V,te,oe)=>{z||fetch(f).then(be=>be.ok?((Le,Oe,Ge)=>{(c.type==="arrayBuffer"?Le.arrayBuffer():c.type==="json"?Le.json():Le.text()).then(Ye=>{z||(M=!0,n(null,Ye,Le.headers.get("Cache-Control"),Le.headers.get("Expires")))}).catch(Ye=>{z||n(new Error(Ye.message))})})(be):be.blob().then(Le=>n(new J(be.status,be.statusText,c.url,Le)))).catch(be=>{be.code!==20&&n(new Error(be.message))})})(),{cancel:()=>{z=!0,M||u.abort()}}}const ye=function(c,n){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,n);if(!q()){const f=c.url.substring(0,c.url.indexOf("://"));return(F.REGISTERED_PROTOCOLS[f]||ue)(c,n)}}if(!(/^file:/.test(u=c.url)||/^file:/.test(ne())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ue(c,n);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,n,void 0,!0)}var u;return function(f,M){const z=new XMLHttpRequest;z.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const V in f.headers)z.setRequestHeader(V,f.headers[V]);return f.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=f.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let V=z.response;if(f.type==="json")try{V=JSON.parse(z.response)}catch(te){return M(te)}M(null,V,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const V=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new J(z.status,z.statusText,f.url,V))}},z.send(f.body),{cancel:()=>z.abort()}}(c,n)},we=function(c,n){return ye(b(c,{type:"arrayBuffer"}),n)};function ze(c){const n=window.document.createElement("a");return n.href=c,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Fe;Ie=[],Fe=0;const He=function(c,n){if(Ce.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Fe>=F.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:c,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(z),z}Fe++;let u=!1;const f=()=>{if(!u)for(u=!0,Fe--;Ie.length&&Fe<F.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ie.shift(),{requestParameters:V,callback:te,cancelled:oe}=z;oe||(z.cancel=He(V,te).cancel)}},M=we(c,(z,V,te,oe)=>{f(),z?n(z):V&&function(be,Le){typeof createImageBitmap=="function"?function(Oe,Ge){const Ye=new Blob([new Uint8Array(Oe)],{type:"image/png"});createImageBitmap(Ye).then(Ze=>{Ge(null,Ze)}).catch(Ze=>{Ge(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(be,Le):function(Oe,Ge){const Ye=new Image;Ye.onload=()=>{Ge(null,Ye),URL.revokeObjectURL(Ye.src),Ye.onload=null,window.requestAnimationFrame(()=>{Ye.src=Ee})},Ye.onerror=()=>Ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ze=new Blob([new Uint8Array(Oe)],{type:"image/png"});Ye.src=Oe.byteLength?URL.createObjectURL(Ze):Ee}(be,Le)}(V,(be,Le)=>{be!=null?n(be):Le!=null&&n(null,Le,{cacheControl:te,expires:oe})})});return{cancel:()=>{M.cancel(),f()}}};function Ae(c,n,u){u[c]&&u[c].indexOf(n)!==-1||(u[c]=u[c]||[],u[c].push(n))}function xe(c,n,u){if(u&&u[c]){const f=u[c].indexOf(n);f!==-1&&u[c].splice(f,1)}}class me{constructor(n,u={}){b(this,u),this.type=n}}class Me extends me{constructor(n,u={}){super("error",b({error:n},u))}}class De{on(n,u){return this._listeners=this._listeners||{},Ae(n,u,this._listeners),this}off(n,u){return xe(n,u,this._listeners),xe(n,u,this._oneTimeListeners),this}once(n,u){return this._oneTimeListeners=this._oneTimeListeners||{},Ae(n,u,this._oneTimeListeners),this}fire(n,u){typeof n=="string"&&(n=new me(n,u||{}));const f=n.type;if(this.listens(f)){n.target=this;const M=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const te of M)te.call(this,n);const z=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const te of z)xe(f,te,this._oneTimeListeners),te.call(this,n);const V=this._eventedParent;V&&(b(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(n))}else n instanceof Me&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,u){return this._eventedParent=n,this._eventedParentData=u,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class je{constructor(n,u,f,M){this.message=(n?`${n}: `:"")+f,M&&(this.identifier=M),u!=null&&u.__line__&&(this.line=u.__line__)}}function Xe(c){const n=c.value;return n?[new je(c.key,n,"constants have been deprecated as of v8")]:[]}function tt(c,...n){for(const u of n)for(const f in u)c[f]=u[f];return c}function rt(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function dt(c){if(Array.isArray(c))return c.map(dt);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const n={};for(const u in c)n[u]=dt(c[u]);return n}return rt(c)}class gt extends Error{constructor(n,u){super(u),this.message=u,this.key=n}}class wt{constructor(n,u=[]){this.parent=n,this.bindings={};for(const[f,M]of u)this.bindings[f]=M}concat(n){return new wt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Rt={kind:"null"},ft={kind:"number"},Et={kind:"string"},Tt={kind:"boolean"},si={kind:"color"},ui={kind:"object"},Wt={kind:"value"},ar={kind:"collator"},Xi={kind:"formatted"},mr={kind:"padding"},Nr={kind:"resolvedImage"};function ir(c,n){return{kind:"array",itemType:c,N:n}}function ut(c){if(c.kind==="array"){const n=ut(c.itemType);return typeof c.N=="number"?`array<${n}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${n}>`}return c.kind}const vt=[Rt,ft,Et,Tt,si,Xi,ui,ir(Wt),mr,Nr];function Pt(c,n){if(n.kind==="error")return null;if(c.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Pt(c.itemType,n.itemType))&&(typeof c.N!="number"||c.N===n.N))return null}else{if(c.kind===n.kind)return null;if(c.kind==="value"){for(const u of vt)if(!Pt(u,n))return null}}return`Expected ${ut(c)} but found ${ut(n)} instead.`}function Bt(c,n){return n.some(u=>u.kind===c.kind)}function Yt(c,n){return n.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}var vi,Oi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function di(c){return(c=Math.round(c))<0?0:c>255?255:c}function We(c){return di(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function ve(c){return(n=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:n>1?1:n;var n}function Re(c,n,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?c+(n-c)*u*6:2*u<1?n:3*u<2?c+(n-c)*(2/3-u)*6:c}try{vi={}.parseCSSColor=function(c){var n,u=c.replace(/ /g,"").toLowerCase();if(u in Oi)return Oi[u].slice();if(u[0]==="#")return u.length===4?(n=parseInt(u.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:u.length===7&&(n=parseInt(u.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var f=u.indexOf("("),M=u.indexOf(")");if(f!==-1&&M+1===u.length){var z=u.substr(0,f),V=u.substr(f+1,M-(f+1)).split(","),te=1;switch(z){case"rgba":if(V.length!==4)return null;te=ve(V.pop());case"rgb":return V.length!==3?null:[We(V[0]),We(V[1]),We(V[2]),te];case"hsla":if(V.length!==4)return null;te=ve(V.pop());case"hsl":if(V.length!==3)return null;var oe=(parseFloat(V[0])%360+360)%360/360,be=ve(V[1]),Le=ve(V[2]),Oe=Le<=.5?Le*(be+1):Le+be-Le*be,Ge=2*Le-Oe;return[di(255*Re(Ge,Oe,oe+1/3)),di(255*Re(Ge,Oe,oe)),di(255*Re(Ge,Oe,oe-1/3)),te];default:return null}}return null}}catch{}class $e{constructor(n,u,f,M=1){this.r=n,this.g=u,this.b=f,this.a=M}static parse(n){if(!n)return;if(n instanceof $e)return n;if(typeof n!="string")return;const u=vi(n);return u?new $e(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[n,u,f,M]=this.toArray();return`rgba(${Math.round(n)},${Math.round(u)},${Math.round(f)},${M})`}toArray(){const{r:n,g:u,b:f,a:M}=this;return M===0?[0,0,0,0]:[255*n/M,255*u/M,255*f/M,M]}}$e.black=new $e(0,0,0,1),$e.white=new $e(1,1,1,1),$e.transparent=new $e(0,0,0,0),$e.red=new $e(1,0,0,1);class Ke{constructor(n,u,f){this.sensitivity=n?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,u){return this.collator.compare(n,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class st{constructor(n,u,f,M,z){this.text=n,this.image=u,this.scale=f,this.fontStack=M,this.textColor=z}}class ct{constructor(n){this.sections=n}static fromString(n){return new ct([new st(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ct?n:ct.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ot{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ot)return n;if(typeof n=="number")return new ot([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const u of n)if(typeof u!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ot(n)}}toString(){return JSON.stringify(this.values)}}class nt{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new nt({name:n,available:!1}):null}}function mt(c,n,u,f){return typeof c=="number"&&c>=0&&c<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,n,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,n,u,f]:[c,n,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kt(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof $e||c instanceof Ke||c instanceof ct||c instanceof ot||c instanceof nt)return!0;if(Array.isArray(c)){for(const n of c)if(!kt(n))return!1;return!0}if(typeof c=="object"){for(const n in c)if(!kt(c[n]))return!1;return!0}return!1}function Nt(c){if(c===null)return Rt;if(typeof c=="string")return Et;if(typeof c=="boolean")return Tt;if(typeof c=="number")return ft;if(c instanceof $e)return si;if(c instanceof Ke)return ar;if(c instanceof ct)return Xi;if(c instanceof ot)return mr;if(c instanceof nt)return Nr;if(Array.isArray(c)){const n=c.length;let u;for(const f of c){const M=Nt(f);if(u){if(u===M)continue;u=Wt;break}u=M}return ir(u||Wt,n)}return ui}function Lt(c){const n=typeof c;return c===null?"":n==="string"||n==="number"||n==="boolean"?String(c):c instanceof $e||c instanceof ct||c instanceof ot||c instanceof nt?c.toString():JSON.stringify(c)}class oi{constructor(n,u){this.type=n,this.value=u}static parse(n,u){if(n.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!kt(n[1]))return u.error("invalid value");const f=n[1];let M=Nt(f);const z=u.expectedType;return M.kind!=="array"||M.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(M=z),new oi(M,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qt{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const pi={string:Et,number:ft,boolean:Tt,object:ui};class bi{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");let f,M=1;const z=n[0];if(z==="array"){let te,oe;if(n.length>2){const be=n[1];if(typeof be!="string"||!(be in pi)||be==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);te=pi[be],M++}else te=Wt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return u.error('The length argument to "array" must be a positive integer literal',2);oe=n[2],M++}f=ir(te,oe)}else{if(!pi[z])throw new Error(`Types doesn't contain name = ${z}`);f=pi[z]}const V=[];for(;M<n.length;M++){const te=u.parse(n[M],M,Wt);if(!te)return null;V.push(te)}return new bi(f,V)}evaluate(n){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(n);if(!Pt(this.type,Nt(f)))return f;if(u===this.args.length-1)throw new Qt(`Expected value to be of type ${ut(this.type)}, but found ${ut(Nt(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Ui={"to-boolean":Tt,"to-color":si,"to-number":ft,"to-string":Et};class _i{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const f=n[0];if(!Ui[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return u.error("Expected one argument.");const M=Ui[f],z=[];for(let V=1;V<n.length;V++){const te=u.parse(n[V],V,Wt);if(!te)return null;z.push(te)}return new _i(M,z)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let u,f;for(const M of this.args){if(u=M.evaluate(n),f=null,u instanceof $e)return u;if(typeof u=="string"){const z=n.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:mt(u[0],u[1],u[2],u[3]),!f))return new $e(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Qt(f||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="padding"){let u;for(const f of this.args){u=f.evaluate(n);const M=ot.parse(u);if(M)return M}throw new Qt(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(n),u===null)return 0;const M=Number(u);if(!isNaN(M))return M}throw new Qt(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Lt(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?nt.fromString(Lt(this.args[0].evaluate(n))):Lt(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Pi=["Unknown","Point","LineString","Polygon"];class $i{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let u=this._parseColorCache[n];return u||(u=this._parseColorCache[n]=$e.parse(n)),u}}class ji{constructor(n,u,f,M){this.name=n,this.type=u,this._evaluate=f,this.args=M}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,u){const f=n[0],M=ji.definitions[f];if(!M)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(M)?M[0]:M.type,V=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,te=V.filter(([be])=>!Array.isArray(be)||be.length===n.length-1);let oe=null;for(const[be,Le]of te){oe=new Hh(u.registry,u.path,null,u.scope);const Oe=[];let Ge=!1;for(let Ye=1;Ye<n.length;Ye++){const Ze=n[Ye],ht=Array.isArray(be)?be[Ye-1]:be.type,lt=oe.parse(Ze,1+Oe.length,ht);if(!lt){Ge=!0;break}Oe.push(lt)}if(!Ge)if(Array.isArray(be)&&be.length!==Oe.length)oe.error(`Expected ${be.length} arguments, but found ${Oe.length} instead.`);else{for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Array.isArray(be)?be[Ye]:be.type,ht=Oe[Ye];oe.concat(Ye+1).checkSubtype(Ze,ht.type)}if(oe.errors.length===0)return new ji(f,z,Le,Oe)}}if(te.length===1)u.errors.push(...oe.errors);else{const be=(te.length?te:V).map(([Oe])=>{return Ge=Oe,Array.isArray(Ge)?`(${Ge.map(ut).join(", ")})`:`(${ut(Ge.type)}...)`;var Ge}).join(" | "),Le=[];for(let Oe=1;Oe<n.length;Oe++){const Ge=u.parse(n[Oe],1+Le.length);if(!Ge)return null;Le.push(ut(Ge.type))}u.error(`Expected arguments of type ${be}, but found (${Le.join(", ")}) instead.`)}return null}static register(n,u){ji.definitions=u;for(const f in u)n[f]=ji}}class hr{constructor(n,u,f){this.type=ar,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=u}static parse(n,u){if(n.length!==2)return u.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const M=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Tt);if(!M)return null;const z=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Tt);if(!z)return null;let V=null;return f.locale&&(V=u.parse(f.locale,1,Et),!V)?null:new hr(M,z,V)}evaluate(n){return new Ke(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const $r=8192;function vn(c,n){c[0]=Math.min(c[0],n[0]),c[1]=Math.min(c[1],n[1]),c[2]=Math.max(c[2],n[0]),c[3]=Math.max(c[3],n[1])}function Un(c,n){return!(c[0]<=n[0]||c[2]>=n[2]||c[1]<=n[1]||c[3]>=n[3])}function _d(c,n){const u=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,M=Math.pow(2,n.z);return[Math.round(u*M*$r),Math.round(f*M*$r)]}function Mc(c,n,u){const f=c[0]-n[0],M=c[1]-n[1],z=c[0]-u[0],V=c[1]-u[1];return f*V-z*M==0&&f*z<=0&&M*V<=0}function Or(c,n){let u=!1;for(let V=0,te=n.length;V<te;V++){const oe=n[V];for(let be=0,Le=oe.length;be<Le-1;be++){if(Mc(c,oe[be],oe[be+1]))return!1;(M=oe[be])[1]>(f=c)[1]!=(z=oe[be+1])[1]>f[1]&&f[0]<(z[0]-M[0])*(f[1]-M[1])/(z[1]-M[1])+M[0]&&(u=!u)}}var f,M,z;return u}function tx(c,n){for(let u=0;u<n.length;u++)if(Or(c,n[u]))return!0;return!1}function $h(c,n,u,f){const M=f[0]-u[0],z=f[1]-u[1],V=(c[0]-u[0])*z-M*(c[1]-u[1]),te=(n[0]-u[0])*z-M*(n[1]-u[1]);return V>0&&te<0||V<0&&te>0}function ix(c,n,u){for(const be of u)for(let Le=0;Le<be.length-1;++Le)if((te=[(V=be[Le+1])[0]-(z=be[Le])[0],V[1]-z[1]])[0]*(oe=[(M=n)[0]-(f=c)[0],M[1]-f[1]])[1]-te[1]*oe[0]!=0&&$h(f,M,z,V)&&$h(z,V,f,M))return!0;var f,M,z,V,te,oe;return!1}function wd(c,n){for(let u=0;u<c.length;++u)if(!Or(c[u],n))return!1;for(let u=0;u<c.length-1;++u)if(ix(c[u],c[u+1],n))return!1;return!0}function Jf(c,n){for(let u=0;u<n.length;u++)if(wd(c,n[u]))return!0;return!1}function Td(c,n,u){const f=[];for(let M=0;M<c.length;M++){const z=[];for(let V=0;V<c[M].length;V++){const te=_d(c[M][V],u);vn(n,te),z.push(te)}f.push(z)}return f}function Cd(c,n,u){const f=[];for(let M=0;M<c.length;M++){const z=Td(c[M],n,u);f.push(z)}return f}function Ed(c,n,u,f){if(c[0]<u[0]||c[0]>u[2]){const M=.5*f;let z=c[0]-u[0]>M?-f:u[0]-c[0]>M?f:0;z===0&&(z=c[0]-u[2]>M?-f:u[2]-c[0]>M?f:0),c[0]+=z}vn(n,c)}function em(c,n,u,f){const M=Math.pow(2,f.z)*$r,z=[f.x*$r,f.y*$r],V=[];for(const te of c)for(const oe of te){const be=[oe.x+z[0],oe.y+z[1]];Ed(be,n,u,M),V.push(be)}return V}function tm(c,n,u,f){const M=Math.pow(2,f.z)*$r,z=[f.x*$r,f.y*$r],V=[];for(const oe of c){const be=[];for(const Le of oe){const Oe=[Le.x+z[0],Le.y+z[1]];vn(n,Oe),be.push(Oe)}V.push(be)}if(n[2]-n[0]<=M/2){(te=n)[0]=te[1]=1/0,te[2]=te[3]=-1/0;for(const oe of V)for(const be of oe)Ed(be,n,u,M)}var te;return V}class el{constructor(n,u){this.type=Tt,this.geojson=n,this.geometries=u}static parse(n,u){if(n.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(kt(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let M=0;M<f.features.length;++M){const z=f.features[M].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new el(f,f.features[M].geometry)}else if(f.type==="Feature"){const M=f.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new el(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new el(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(u,f){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],V=u.canonicalID();if(f.type==="Polygon"){const te=Td(f.coordinates,z,V),oe=em(u.geometry(),M,z,V);if(!Un(M,z))return!1;for(const be of oe)if(!Or(be,te))return!1}if(f.type==="MultiPolygon"){const te=Cd(f.coordinates,z,V),oe=em(u.geometry(),M,z,V);if(!Un(M,z))return!1;for(const be of oe)if(!tx(be,te))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(u,f){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],V=u.canonicalID();if(f.type==="Polygon"){const te=Td(f.coordinates,z,V),oe=tm(u.geometry(),M,z,V);if(!Un(M,z))return!1;for(const be of oe)if(!wd(be,te))return!1}if(f.type==="MultiPolygon"){const te=Cd(f.coordinates,z,V),oe=tm(u.geometry(),M,z,V);if(!Un(M,z))return!1;for(const be of oe)if(!Jf(be,te))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Vh(c){if(c instanceof ji&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof el)return!1;let n=!0;return c.eachChild(u=>{n&&!Vh(u)&&(n=!1)}),n}function Rl(c){if(c instanceof ji&&c.name==="feature-state")return!1;let n=!0;return c.eachChild(u=>{n&&!Rl(u)&&(n=!1)}),n}function Pc(c,n){if(c instanceof ji&&n.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(f=>{u&&!Pc(f,n)&&(u=!1)}),u}class Gh{constructor(n,u){this.type=u.type,this.name=n,this.boundExpression=u}static parse(n,u){if(n.length!==2||typeof n[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=n[1];return u.scope.has(f)?new Gh(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Hh{constructor(n,u=[],f,M=new wt,z=[]){this.registry=n,this.path=u,this.key=u.map(V=>`[${V}]`).join(""),this.scope=M,this.errors=z,this.expectedType=f}parse(n,u,f,M,z={}){return u?this.concat(u,f,M)._parse(n,z):this._parse(n,z)}_parse(n,u){function f(M,z,V){return V==="assert"?new bi(z,[M]):V==="coerce"?new _i(z,[M]):M}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=n[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[M];if(z){let V=z.parse(n,this);if(!V)return null;if(this.expectedType){const te=this.expectedType,oe=V.type;if(te.kind!=="string"&&te.kind!=="number"&&te.kind!=="boolean"&&te.kind!=="object"&&te.kind!=="array"||oe.kind!=="value")if(te.kind!=="color"&&te.kind!=="formatted"&&te.kind!=="resolvedImage"||oe.kind!=="value"&&oe.kind!=="string")if(te.kind!=="padding"||oe.kind!=="value"&&oe.kind!=="number"&&oe.kind!=="array"){if(this.checkSubtype(te,oe))return null}else V=f(V,te,u.typeAnnotation||"coerce");else V=f(V,te,u.typeAnnotation||"coerce");else V=f(V,te,u.typeAnnotation||"assert")}if(!(V instanceof oi)&&V.type.kind!=="resolvedImage"&&Ic(V)){const te=new $i;try{V=new oi(V.type,V.evaluate(te))}catch(oe){return this.error(oe.message),null}}return V}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,u,f){const M=typeof n=="number"?this.path.concat(n):this.path,z=f?this.scope.concat(f):this.scope;return new Hh(this.registry,M,u||null,z,this.errors)}error(n,...u){const f=`${this.key}${u.map(M=>`[${M}]`).join("")}`;this.errors.push(new gt(f,n))}checkSubtype(n,u){const f=Pt(n,u);return f&&this.error(f),f}}function Ic(c){if(c instanceof Gh)return Ic(c.boundExpression);if(c instanceof ji&&c.name==="error"||c instanceof hr||c instanceof el)return!1;const n=c instanceof _i||c instanceof bi;let u=!0;return c.eachChild(f=>{u=n?u&&Ic(f):u&&f instanceof oi}),!!u&&Vh(c)&&Pc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Wh(c,n){const u=c.length-1;let f,M,z=0,V=u,te=0;for(;z<=V;)if(te=Math.floor((z+V)/2),f=c[te],M=c[te+1],f<=n){if(te===u||n<M)return te;z=te+1}else{if(!(f>n))throw new Qt("Input is not a number.");V=te-1}return 0}class Dc{constructor(n,u,f){this.type=n,this.input=u,this.labels=[],this.outputs=[];for(const[M,z]of f)this.labels.push(M),this.outputs.push(z)}static parse(n,u){if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(n[1],1,ft);if(!f)return null;const M=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let V=1;V<n.length;V+=2){const te=V===1?-1/0:n[V],oe=n[V+1],be=V,Le=V+1;if(typeof te!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(M.length&&M[M.length-1][0]>=te)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);const Oe=u.parse(oe,Le,z);if(!Oe)return null;z=z||Oe.type,M.push([te,Oe])}return new Dc(z,f,M)}evaluate(n){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(n);const M=this.input.evaluate(n);if(M<=u[0])return f[0].evaluate(n);const z=u.length;return M>=u[z-1]?f[z-1].evaluate(n):f[Wh(u,M)].evaluate(n)}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function pn(c,n,u){return c*(1-u)+n*u}var Lc=Object.freeze({__proto__:null,number:pn,color:function(c,n,u){return new $e(pn(c.r,n.r,u),pn(c.g,n.g,u),pn(c.b,n.b,u),pn(c.a,n.a,u))},array:function(c,n,u){return c.map((f,M)=>pn(f,n[M],u))},padding:function(c,n,u){const f=c.values,M=n.values;return new ot([pn(f[0],M[0],u),pn(f[1],M[1],u),pn(f[2],M[2],u),pn(f[3],M[3],u)])}});const Sd=.95047,im=1.08883,rm=4/29,qh=6/29,kd=3*qh*qh,rx=Math.PI/180,nx=180/Math.PI;function Ad(c){return c>.008856451679035631?Math.pow(c,1/3):c/kd+rm}function Md(c){return c>qh?c*c*c:kd*(c-rm)}function Pd(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Id(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function nm(c){const n=Id(c.r),u=Id(c.g),f=Id(c.b),M=Ad((.4124564*n+.3575761*u+.1804375*f)/Sd),z=Ad((.2126729*n+.7151522*u+.072175*f)/1);return{l:116*z-16,a:500*(M-z),b:200*(z-Ad((.0193339*n+.119192*u+.9503041*f)/im)),alpha:c.a}}function Ar(c){let n=(c.l+16)/116,u=isNaN(c.a)?n:n+c.a/500,f=isNaN(c.b)?n:n-c.b/200;return n=1*Md(n),u=Sd*Md(u),f=im*Md(f),new $e(Pd(3.2404542*u-1.5371385*n-.4985314*f),Pd(-.969266*u+1.8760108*n+.041556*f),Pd(.0556434*u-.2040259*n+1.0572252*f),c.alpha)}function sx(c,n,u){const f=n-c;return c+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Rc={forward:nm,reverse:Ar,interpolate:function(c,n,u){return{l:pn(c.l,n.l,u),a:pn(c.a,n.a,u),b:pn(c.b,n.b,u),alpha:pn(c.alpha,n.alpha,u)}}},zc={forward:function(c){const{l:n,a:u,b:f}=nm(c),M=Math.atan2(f,u)*nx;return{h:M<0?M+360:M,c:Math.sqrt(u*u+f*f),l:n,alpha:c.a}},reverse:function(c){const n=c.h*rx,u=c.c;return Ar({l:c.l,a:Math.cos(n)*u,b:Math.sin(n)*u,alpha:c.alpha})},interpolate:function(c,n,u){return{h:sx(c.h,n.h,u),c:pn(c.c,n.c,u),l:pn(c.l,n.l,u),alpha:pn(c.alpha,n.alpha,u)}}};var sm=Object.freeze({__proto__:null,lab:Rc,hcl:zc});class Qs{constructor(n,u,f,M,z){this.type=n,this.operator=u,this.interpolation=f,this.input=M,this.labels=[],this.outputs=[];for(const[V,te]of z)this.labels.push(V),this.outputs.push(te)}static interpolationFactor(n,u,f,M){let z=0;if(n.name==="exponential")z=Dd(u,n.base,f,M);else if(n.name==="linear")z=Dd(u,1,f,M);else if(n.name==="cubic-bezier"){const V=n.controlPoints;z=new p(V[0],V[1],V[2],V[3]).solve(Dd(u,1,f,M))}return z}static parse(n,u){let[f,M,z,...V]=n;if(!Array.isArray(M)||M.length===0)return u.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const be=M[1];if(typeof be!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:be}}else{if(M[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const be=M.slice(1);if(be.length!==4||be.some(Le=>typeof Le!="number"||Le<0||Le>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:be}}}if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,ft),!z)return null;const te=[];let oe=null;f==="interpolate-hcl"||f==="interpolate-lab"?oe=si:u.expectedType&&u.expectedType.kind!=="value"&&(oe=u.expectedType);for(let be=0;be<V.length;be+=2){const Le=V[be],Oe=V[be+1],Ge=be+3,Ye=be+4;if(typeof Le!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ge);if(te.length&&te[te.length-1][0]>=Le)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ge);const Ze=u.parse(Oe,Ye,oe);if(!Ze)return null;oe=oe||Ze.type,te.push([Le,Ze])}return oe.kind==="number"||oe.kind==="color"||oe.kind==="padding"||oe.kind==="array"&&oe.itemType.kind==="number"&&typeof oe.N=="number"?new Qs(oe,f,M,z,te):u.error(`Type ${ut(oe)} is not interpolatable.`)}evaluate(n){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(n);const M=this.input.evaluate(n);if(M<=u[0])return f[0].evaluate(n);const z=u.length;if(M>=u[z-1])return f[z-1].evaluate(n);const V=Wh(u,M),te=Qs.interpolationFactor(this.interpolation,M,u[V],u[V+1]),oe=f[V].evaluate(n),be=f[V+1].evaluate(n);return this.operator==="interpolate"?Lc[this.type.kind.toLowerCase()](oe,be,te):this.operator==="interpolate-hcl"?zc.reverse(zc.interpolate(zc.forward(oe),zc.forward(be),te)):Rc.reverse(Rc.interpolate(Rc.forward(oe),Rc.forward(be),te))}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Dd(c,n,u,f){const M=f-u,z=c-u;return M===0?0:n===1?z/M:(Math.pow(n,z)-1)/(Math.pow(n,M)-1)}class Yh{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expectected at least one argument.");let f=null;const M=u.expectedType;M&&M.kind!=="value"&&(f=M);const z=[];for(const te of n.slice(1)){const oe=u.parse(te,1+z.length,f,void 0,{typeAnnotation:"omit"});if(!oe)return null;f=f||oe.type,z.push(oe)}if(!f)throw new Error("No output type");const V=M&&z.some(te=>Pt(M,te.type));return new Yh(V?Wt:f,z)}evaluate(n){let u,f=null,M=0;for(const z of this.args)if(M++,f=z.evaluate(n),f&&f instanceof nt&&!f.available&&(u||(u=f.name),f=null,M===this.args.length&&(f=u)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Zh{constructor(n,u){this.type=u.type,this.bindings=[].concat(n),this.result=u}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const u of this.bindings)n(u[1]);n(this.result)}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let z=1;z<n.length-1;z+=2){const V=n[z];if(typeof V!="string")return u.error(`Expected string, but found ${typeof V} instead.`,z);if(/[^a-zA-Z0-9_]/.test(V))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const te=u.parse(n[z+1],z+1);if(!te)return null;f.push([V,te])}const M=u.parse(n[n.length-1],n.length-1,u.expectedType,f);return M?new Zh(f,M):null}outputDefined(){return this.result.outputDefined()}}class Ld{constructor(n,u,f){this.type=n,this.index=u,this.input=f}static parse(n,u){if(n.length!==3)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=u.parse(n[1],1,ft),M=u.parse(n[2],2,ir(u.expectedType||Wt));return f&&M?new Ld(M.type.itemType,f,M):null}evaluate(n){const u=this.index.evaluate(n),f=this.input.evaluate(n);if(u<0)throw new Qt(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new Qt(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new Qt(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Rd{constructor(n,u){this.type=Tt,this.needle=n,this.haystack=u}static parse(n,u){if(n.length!==3)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=u.parse(n[1],1,Wt),M=u.parse(n[2],2,Wt);return f&&M?Bt(f.type,[Tt,Et,ft,Rt,Wt])?new Rd(f,M):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ut(f.type)} instead`):null}evaluate(n){const u=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Yt(u,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${ut(Nt(u))} instead.`);if(!Yt(f,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${ut(Nt(f))} instead.`);return f.indexOf(u)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Xh{constructor(n,u,f){this.type=ft,this.needle=n,this.haystack=u,this.fromIndex=f}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=u.parse(n[1],1,Wt),M=u.parse(n[2],2,Wt);if(!f||!M)return null;if(!Bt(f.type,[Tt,Et,ft,Rt,Wt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ut(f.type)} instead`);if(n.length===4){const z=u.parse(n[3],3,ft);return z?new Xh(f,M,z):null}return new Xh(f,M)}evaluate(n){const u=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Yt(u,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${ut(Nt(u))} instead.`);if(!Yt(f,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${ut(Nt(f))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(n);return f.indexOf(u,M)}return f.indexOf(u)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class zd{constructor(n,u,f,M,z,V){this.inputType=n,this.type=u,this.input=f,this.cases=M,this.outputs=z,this.otherwise=V}static parse(n,u){if(n.length<5)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return u.error("Expected an even number of arguments.");let f,M;u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType);const z={},V=[];for(let be=2;be<n.length-1;be+=2){let Le=n[be];const Oe=n[be+1];Array.isArray(Le)||(Le=[Le]);const Ge=u.concat(be);if(Le.length===0)return Ge.error("Expected at least one branch label.");for(const Ze of Le){if(typeof Ze!="number"&&typeof Ze!="string")return Ge.error("Branch labels must be numbers or strings.");if(typeof Ze=="number"&&Math.abs(Ze)>Number.MAX_SAFE_INTEGER)return Ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ze=="number"&&Math.floor(Ze)!==Ze)return Ge.error("Numeric branch labels must be integer values.");if(f){if(Ge.checkSubtype(f,Nt(Ze)))return null}else f=Nt(Ze);if(z[String(Ze)]!==void 0)return Ge.error("Branch labels must be unique.");z[String(Ze)]=V.length}const Ye=u.parse(Oe,be,M);if(!Ye)return null;M=M||Ye.type,V.push(Ye)}const te=u.parse(n[1],1,Wt);if(!te)return null;const oe=u.parse(n[n.length-1],n.length-1,M);return oe?te.type.kind!=="value"&&u.concat(1).checkSubtype(f,te.type)?null:new zd(f,M,te,z,V,oe):null}evaluate(n){const u=this.input.evaluate(n);return(Nt(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Nd{constructor(n,u,f){this.type=n,this.branches=u,this.otherwise=f}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const M=[];for(let V=1;V<n.length-1;V+=2){const te=u.parse(n[V],V,Tt);if(!te)return null;const oe=u.parse(n[V+1],V+1,f);if(!oe)return null;M.push([te,oe]),f=f||oe.type}const z=u.parse(n[n.length-1],n.length-1,f);if(!z)return null;if(!f)throw new Error("Can't infer output type");return new Nd(f,M,z)}evaluate(n){for(const[u,f]of this.branches)if(u.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[u,f]of this.branches)n(u),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Kh{constructor(n,u,f,M){this.type=n,this.input=u,this.beginIndex=f,this.endIndex=M}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=u.parse(n[1],1,Wt),M=u.parse(n[2],2,ft);if(!f||!M)return null;if(!Bt(f.type,[ir(Wt),Et,Wt]))return u.error(`Expected first argument to be of type array or string, but found ${ut(f.type)} instead`);if(n.length===4){const z=u.parse(n[3],3,ft);return z?new Kh(f.type,f,M,z):null}return new Kh(f.type,f,M)}evaluate(n){const u=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!Yt(u,["string","array"]))throw new Qt(`Expected first argument to be of type array or string, but found ${ut(Nt(u))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(n);return u.slice(f,M)}return u.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function am(c,n){return c==="=="||c==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function om(c,n,u,f){return f.compare(n,u)===0}function zl(c,n,u){const f=c!=="=="&&c!=="!=";return class _3{constructor(z,V,te){this.type=Tt,this.lhs=z,this.rhs=V,this.collator=te,this.hasUntypedArgument=z.type.kind==="value"||V.type.kind==="value"}static parse(z,V){if(z.length!==3&&z.length!==4)return V.error("Expected two or three arguments.");const te=z[0];let oe=V.parse(z[1],1,Wt);if(!oe)return null;if(!am(te,oe.type))return V.concat(1).error(`"${te}" comparisons are not supported for type '${ut(oe.type)}'.`);let be=V.parse(z[2],2,Wt);if(!be)return null;if(!am(te,be.type))return V.concat(2).error(`"${te}" comparisons are not supported for type '${ut(be.type)}'.`);if(oe.type.kind!==be.type.kind&&oe.type.kind!=="value"&&be.type.kind!=="value")return V.error(`Cannot compare types '${ut(oe.type)}' and '${ut(be.type)}'.`);f&&(oe.type.kind==="value"&&be.type.kind!=="value"?oe=new bi(be.type,[oe]):oe.type.kind!=="value"&&be.type.kind==="value"&&(be=new bi(oe.type,[be])));let Le=null;if(z.length===4){if(oe.type.kind!=="string"&&be.type.kind!=="string"&&oe.type.kind!=="value"&&be.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(Le=V.parse(z[3],3,ar),!Le)return null}return new _3(oe,be,Le)}evaluate(z){const V=this.lhs.evaluate(z),te=this.rhs.evaluate(z);if(f&&this.hasUntypedArgument){const oe=Nt(V),be=Nt(te);if(oe.kind!==be.kind||oe.kind!=="string"&&oe.kind!=="number")throw new Qt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${oe.kind}, ${be.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const oe=Nt(V),be=Nt(te);if(oe.kind!=="string"||be.kind!=="string")return n(z,V,te)}return this.collator?u(z,V,te,this.collator.evaluate(z)):n(z,V,te)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const ax=zl("==",function(c,n,u){return n===u},om),ox=zl("!=",function(c,n,u){return n!==u},function(c,n,u,f){return!om(0,n,u,f)}),lx=zl("<",function(c,n,u){return n<u},function(c,n,u,f){return f.compare(n,u)<0}),cx=zl(">",function(c,n,u){return n>u},function(c,n,u,f){return f.compare(n,u)>0}),hx=zl("<=",function(c,n,u){return n<=u},function(c,n,u,f){return f.compare(n,u)<=0}),ux=zl(">=",function(c,n,u){return n>=u},function(c,n,u,f){return f.compare(n,u)>=0});class Od{constructor(n,u,f,M,z){this.type=Et,this.number=n,this.locale=u,this.currency=f,this.minFractionDigits=M,this.maxFractionDigits=z}static parse(n,u){if(n.length!==3)return u.error("Expected two arguments.");const f=u.parse(n[1],1,ft);if(!f)return null;const M=n[2];if(typeof M!="object"||Array.isArray(M))return u.error("NumberFormat options argument must be an object.");let z=null;if(M.locale&&(z=u.parse(M.locale,1,Et),!z))return null;let V=null;if(M.currency&&(V=u.parse(M.currency,1,Et),!V))return null;let te=null;if(M["min-fraction-digits"]&&(te=u.parse(M["min-fraction-digits"],1,ft),!te))return null;let oe=null;return M["max-fraction-digits"]&&(oe=u.parse(M["max-fraction-digits"],1,ft),!oe)?null:new Od(f,z,V,te,oe)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Qh{constructor(n){this.type=Xi,this.sections=n}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const M=[];let z=!1;for(let V=1;V<=n.length-1;++V){const te=n[V];if(z&&typeof te=="object"&&!Array.isArray(te)){z=!1;let oe=null;if(te["font-scale"]&&(oe=u.parse(te["font-scale"],1,ft),!oe))return null;let be=null;if(te["text-font"]&&(be=u.parse(te["text-font"],1,ir(Et)),!be))return null;let Le=null;if(te["text-color"]&&(Le=u.parse(te["text-color"],1,si),!Le))return null;const Oe=M[M.length-1];Oe.scale=oe,Oe.font=be,Oe.textColor=Le}else{const oe=u.parse(n[V],1,Wt);if(!oe)return null;const be=oe.type.kind;if(be!=="string"&&be!=="value"&&be!=="null"&&be!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,M.push({content:oe,scale:null,font:null,textColor:null})}}return new Qh(M)}evaluate(n){return new ct(this.sections.map(u=>{const f=u.content.evaluate(n);return Nt(f)===Nr?new st("",f,null,null,null):new st(Lt(f),null,u.scale?u.scale.evaluate(n):null,u.font?u.font.evaluate(n).join(","):null,u.textColor?u.textColor.evaluate(n):null)}))}eachChild(n){for(const u of this.sections)n(u.content),u.scale&&n(u.scale),u.font&&n(u.font),u.textColor&&n(u.textColor)}outputDefined(){return!1}}class jd{constructor(n){this.type=Nr,this.input=n}static parse(n,u){if(n.length!==2)return u.error("Expected two arguments.");const f=u.parse(n[1],1,Et);return f?new jd(f):u.error("No image name provided.")}evaluate(n){const u=this.input.evaluate(n),f=nt.fromString(u);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(u)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class Bd{constructor(n){this.type=ft,this.input=n}static parse(n,u){if(n.length!==2)return u.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=u.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ut(f.type)} instead.`):new Bd(f):null}evaluate(n){const u=this.input.evaluate(n);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Qt(`Expected value to be of type string or array, but found ${ut(Nt(u))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Nl={"==":ax,"!=":ox,">":cx,"<":lx,">=":ux,"<=":hx,array:bi,at:Ld,boolean:bi,case:Nd,coalesce:Yh,collator:hr,format:Qh,image:jd,in:Rd,"index-of":Xh,interpolate:Qs,"interpolate-hcl":Qs,"interpolate-lab":Qs,length:Bd,let:Zh,literal:oi,match:zd,number:bi,"number-format":Od,object:bi,slice:Kh,step:Dc,string:bi,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:Gh,within:el};function lm(c,[n,u,f,M]){n=n.evaluate(c),u=u.evaluate(c),f=f.evaluate(c);const z=M?M.evaluate(c):1,V=mt(n,u,f,z);if(V)throw new Qt(V);return new $e(n/255*z,u/255*z,f/255*z,z)}function cm(c,n){return c in n}function Fd(c,n){const u=n[c];return u===void 0?null:u}function wo(c){return{type:c}}function hm(c){return{result:"success",value:c}}function Ol(c){return{result:"error",value:c}}function jl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function bn(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ud(c){return!!c.expression&&c.expression.interpolated}function Ti(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Bl(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function fn(c){return c}function Jr(c,n){const u=n.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",M=f||!(f||c.property!==void 0),z=c.type||(Ud(n)?"exponential":"interval");if(u||n.type==="padding"){const be=u?$e.parse:ot.parse;(c=tt({},c)).stops&&(c.stops=c.stops.map(Le=>[Le[0],be(Le[1])])),c.default=be(c.default?c.default:n.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!sm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let V,te,oe;if(z==="exponential")V=dm;else if(z==="interval")V=dx;else if(z==="categorical"){V=um,te=Object.create(null);for(const be of c.stops)te[be[0]]=be[1];oe=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);V=px}if(f){const be={},Le=[];for(let Ye=0;Ye<c.stops.length;Ye++){const Ze=c.stops[Ye],ht=Ze[0].zoom;be[ht]===void 0&&(be[ht]={zoom:ht,type:c.type,property:c.property,default:c.default,stops:[]},Le.push(ht)),be[ht].stops.push([Ze[0].value,Ze[1]])}const Oe=[];for(const Ye of Le)Oe.push([be[Ye].zoom,Jr(be[Ye],n)]);const Ge={name:"linear"};return{kind:"composite",interpolationType:Ge,interpolationFactor:Qs.interpolationFactor.bind(void 0,Ge),zoomStops:Oe.map(Ye=>Ye[0]),evaluate:({zoom:Ye},Ze)=>dm({stops:Oe,base:c.base},n,Ye).evaluate(Ye,Ze)}}if(M){const be=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Qs.interpolationFactor.bind(void 0,be),zoomStops:c.stops.map(Le=>Le[0]),evaluate:({zoom:Le})=>V(c,n,Le,te,oe)}}return{kind:"source",evaluate(be,Le){const Oe=Le&&Le.properties?Le.properties[c.property]:void 0;return Oe===void 0?To(c.default,n.default):V(c,n,Oe,te,oe)}}}function To(c,n,u){return c!==void 0?c:n!==void 0?n:u!==void 0?u:void 0}function um(c,n,u,f,M){return To(typeof u===M?f[u]:void 0,c.default,n.default)}function dx(c,n,u){if(Ti(u)!=="number")return To(c.default,n.default);const f=c.stops.length;if(f===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[f-1][0])return c.stops[f-1][1];const M=Wh(c.stops.map(z=>z[0]),u);return c.stops[M][1]}function dm(c,n,u){const f=c.base!==void 0?c.base:1;if(Ti(u)!=="number")return To(c.default,n.default);const M=c.stops.length;if(M===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[M-1][0])return c.stops[M-1][1];const z=Wh(c.stops.map(Le=>Le[0]),u),V=function(Le,Oe,Ge,Ye){const Ze=Ye-Ge,ht=Le-Ge;return Ze===0?0:Oe===1?ht/Ze:(Math.pow(Oe,ht)-1)/(Math.pow(Oe,Ze)-1)}(u,f,c.stops[z][0],c.stops[z+1][0]),te=c.stops[z][1],oe=c.stops[z+1][1];let be=Lc[n.type]||fn;if(c.colorSpace&&c.colorSpace!=="rgb"){const Le=sm[c.colorSpace];be=(Oe,Ge)=>Le.reverse(Le.interpolate(Le.forward(Oe),Le.forward(Ge),V))}return typeof te.evaluate=="function"?{evaluate(...Le){const Oe=te.evaluate.apply(void 0,Le),Ge=oe.evaluate.apply(void 0,Le);if(Oe!==void 0&&Ge!==void 0)return be(Oe,Ge,V)}}:be(te,oe,V)}function px(c,n,u){switch(n.type){case"color":u=$e.parse(u);break;case"formatted":u=ct.fromString(u.toString());break;case"resolvedImage":u=nt.fromString(u.toString());break;case"padding":u=ot.parse(u);break;default:Ti(u)===n.type||n.type==="enum"&&n.values[u]||(u=void 0)}return To(u,c.default,n.default)}ji.register(Nl,{error:[{kind:"error"},[Et],(c,[n])=>{throw new Qt(n.evaluate(c))}],typeof:[Et,[Wt],(c,[n])=>ut(Nt(n.evaluate(c)))],"to-rgba":[ir(ft,4),[si],(c,[n])=>n.evaluate(c).toArray()],rgb:[si,[ft,ft,ft],lm],rgba:[si,[ft,ft,ft,ft],lm],has:{type:Tt,overloads:[[[Et],(c,[n])=>cm(n.evaluate(c),c.properties())],[[Et,ui],(c,[n,u])=>cm(n.evaluate(c),u.evaluate(c))]]},get:{type:Wt,overloads:[[[Et],(c,[n])=>Fd(n.evaluate(c),c.properties())],[[Et,ui],(c,[n,u])=>Fd(n.evaluate(c),u.evaluate(c))]]},"feature-state":[Wt,[Et],(c,[n])=>Fd(n.evaluate(c),c.featureState||{})],properties:[ui,[],c=>c.properties()],"geometry-type":[Et,[],c=>c.geometryType()],id:[Wt,[],c=>c.id()],zoom:[ft,[],c=>c.globals.zoom],"heatmap-density":[ft,[],c=>c.globals.heatmapDensity||0],"line-progress":[ft,[],c=>c.globals.lineProgress||0],accumulated:[Wt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ft,wo(ft),(c,n)=>{let u=0;for(const f of n)u+=f.evaluate(c);return u}],"*":[ft,wo(ft),(c,n)=>{let u=1;for(const f of n)u*=f.evaluate(c);return u}],"-":{type:ft,overloads:[[[ft,ft],(c,[n,u])=>n.evaluate(c)-u.evaluate(c)],[[ft],(c,[n])=>-n.evaluate(c)]]},"/":[ft,[ft,ft],(c,[n,u])=>n.evaluate(c)/u.evaluate(c)],"%":[ft,[ft,ft],(c,[n,u])=>n.evaluate(c)%u.evaluate(c)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(c,[n,u])=>Math.pow(n.evaluate(c),u.evaluate(c))],sqrt:[ft,[ft],(c,[n])=>Math.sqrt(n.evaluate(c))],log10:[ft,[ft],(c,[n])=>Math.log(n.evaluate(c))/Math.LN10],ln:[ft,[ft],(c,[n])=>Math.log(n.evaluate(c))],log2:[ft,[ft],(c,[n])=>Math.log(n.evaluate(c))/Math.LN2],sin:[ft,[ft],(c,[n])=>Math.sin(n.evaluate(c))],cos:[ft,[ft],(c,[n])=>Math.cos(n.evaluate(c))],tan:[ft,[ft],(c,[n])=>Math.tan(n.evaluate(c))],asin:[ft,[ft],(c,[n])=>Math.asin(n.evaluate(c))],acos:[ft,[ft],(c,[n])=>Math.acos(n.evaluate(c))],atan:[ft,[ft],(c,[n])=>Math.atan(n.evaluate(c))],min:[ft,wo(ft),(c,n)=>Math.min(...n.map(u=>u.evaluate(c)))],max:[ft,wo(ft),(c,n)=>Math.max(...n.map(u=>u.evaluate(c)))],abs:[ft,[ft],(c,[n])=>Math.abs(n.evaluate(c))],round:[ft,[ft],(c,[n])=>{const u=n.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[ft,[ft],(c,[n])=>Math.floor(n.evaluate(c))],ceil:[ft,[ft],(c,[n])=>Math.ceil(n.evaluate(c))],"filter-==":[Tt,[Et,Wt],(c,[n,u])=>c.properties()[n.value]===u.value],"filter-id-==":[Tt,[Wt],(c,[n])=>c.id()===n.value],"filter-type-==":[Tt,[Et],(c,[n])=>c.geometryType()===n.value],"filter-<":[Tt,[Et,Wt],(c,[n,u])=>{const f=c.properties()[n.value],M=u.value;return typeof f==typeof M&&f<M}],"filter-id-<":[Tt,[Wt],(c,[n])=>{const u=c.id(),f=n.value;return typeof u==typeof f&&u<f}],"filter->":[Tt,[Et,Wt],(c,[n,u])=>{const f=c.properties()[n.value],M=u.value;return typeof f==typeof M&&f>M}],"filter-id->":[Tt,[Wt],(c,[n])=>{const u=c.id(),f=n.value;return typeof u==typeof f&&u>f}],"filter-<=":[Tt,[Et,Wt],(c,[n,u])=>{const f=c.properties()[n.value],M=u.value;return typeof f==typeof M&&f<=M}],"filter-id-<=":[Tt,[Wt],(c,[n])=>{const u=c.id(),f=n.value;return typeof u==typeof f&&u<=f}],"filter->=":[Tt,[Et,Wt],(c,[n,u])=>{const f=c.properties()[n.value],M=u.value;return typeof f==typeof M&&f>=M}],"filter-id->=":[Tt,[Wt],(c,[n])=>{const u=c.id(),f=n.value;return typeof u==typeof f&&u>=f}],"filter-has":[Tt,[Wt],(c,[n])=>n.value in c.properties()],"filter-has-id":[Tt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Tt,[ir(Et)],(c,[n])=>n.value.indexOf(c.geometryType())>=0],"filter-id-in":[Tt,[ir(Wt)],(c,[n])=>n.value.indexOf(c.id())>=0],"filter-in-small":[Tt,[Et,ir(Wt)],(c,[n,u])=>u.value.indexOf(c.properties()[n.value])>=0],"filter-in-large":[Tt,[Et,ir(Wt)],(c,[n,u])=>function(f,M,z,V){for(;z<=V;){const te=z+V>>1;if(M[te]===f)return!0;M[te]>f?V=te-1:z=te+1}return!1}(c.properties()[n.value],u.value,0,u.value.length-1)],all:{type:Tt,overloads:[[[Tt,Tt],(c,[n,u])=>n.evaluate(c)&&u.evaluate(c)],[wo(Tt),(c,n)=>{for(const u of n)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],(c,[n,u])=>n.evaluate(c)||u.evaluate(c)],[wo(Tt),(c,n)=>{for(const u of n)if(u.evaluate(c))return!0;return!1}]]},"!":[Tt,[Tt],(c,[n])=>!n.evaluate(c)],"is-supported-script":[Tt,[Et],(c,[n])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(n.evaluate(c))}],upcase:[Et,[Et],(c,[n])=>n.evaluate(c).toUpperCase()],downcase:[Et,[Et],(c,[n])=>n.evaluate(c).toLowerCase()],concat:[Et,wo(Wt),(c,n)=>n.map(u=>Lt(u.evaluate(c))).join("")],"resolved-locale":[Et,[ar],(c,[n])=>n.evaluate(c).resolvedLocale()]});class $d{constructor(n,u){this.expression=n,this._warningHistory={},this._evaluator=new $i,this._defaultValue=u?function(f){return f.type==="color"&&Bl(f.default)?new $e(0,0,0,0):f.type==="color"?$e.parse(f.default)||null:f.type==="padding"?ot.parse(f.default)||null:f.default===void 0?null:f.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(n,u,f,M,z,V){return this._evaluator.globals=n,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(n,u,f,M,z,V){this._evaluator.globals=n,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=V||null;try{const te=this.expression.evaluate(this._evaluator);if(te==null||typeof te=="number"&&te!=te)return this._defaultValue;if(this._enumValues&&!(te in this._enumValues))throw new Qt(`Expected value to be one of ${Object.keys(this._enumValues).map(oe=>JSON.stringify(oe)).join(", ")}, but found ${JSON.stringify(te)} instead.`);return te}catch(te){return this._warningHistory[te.message]||(this._warningHistory[te.message]=!0,typeof console<"u"&&console.warn(te.message)),this._defaultValue}}}function Nc(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Nl}function Oc(c,n){const u=new Hh(Nl,[],n?function(M){const z={color:si,string:Et,number:ft,enum:Et,boolean:Tt,formatted:Xi,padding:mr,resolvedImage:Nr};return M.type==="array"?ir(z[M.value]||Wt,M.length):z[M.type]}(n):void 0),f=u.parse(c,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?hm(new $d(f,n)):Ol(u.errors)}class Jh{constructor(n,u){this.kind=n,this._styleExpression=u,this.isStateDependent=n!=="constant"&&!Rl(u.expression)}evaluateWithoutErrorHandling(n,u,f,M,z,V){return this._styleExpression.evaluateWithoutErrorHandling(n,u,f,M,z,V)}evaluate(n,u,f,M,z,V){return this._styleExpression.evaluate(n,u,f,M,z,V)}}class jc{constructor(n,u,f,M){this.kind=n,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=n!=="camera"&&!Rl(u.expression),this.interpolationType=M}evaluateWithoutErrorHandling(n,u,f,M,z,V){return this._styleExpression.evaluateWithoutErrorHandling(n,u,f,M,z,V)}evaluate(n,u,f,M,z,V){return this._styleExpression.evaluate(n,u,f,M,z,V)}interpolationFactor(n,u,f){return this.interpolationType?Qs.interpolationFactor(this.interpolationType,n,u,f):0}}function pm(c,n){const u=Oc(c,n);if(u.result==="error")return u;const f=u.value.expression,M=Vh(f);if(!M&&!jl(n))return Ol([new gt("","data expressions not supported")]);const z=Pc(f,["zoom"]);if(!z&&!bn(n))return Ol([new gt("","zoom expressions not supported")]);const V=tu(f);return V||z?V instanceof gt?Ol([V]):V instanceof Qs&&!Ud(n)?Ol([new gt("",'"interpolate" expressions cannot be used with this property')]):hm(V?new jc(M?"camera":"composite",u.value,V.labels,V instanceof Qs?V.interpolation:void 0):new Jh(M?"constant":"source",u.value)):Ol([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eu{constructor(n,u){this._parameters=n,this._specification=u,tt(this,Jr(this._parameters,this._specification))}static deserialize(n){return new eu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function tu(c){let n=null;if(c instanceof Zh)n=tu(c.result);else if(c instanceof Yh){for(const u of c.args)if(n=tu(u),n)break}else(c instanceof Dc||c instanceof Qs)&&c.input instanceof ji&&c.input.name==="zoom"&&(n=c);return n instanceof gt||c.eachChild(u=>{const f=tu(u);f instanceof gt?n=f:!n&&f?n=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ma(c){const n=c.key,u=c.value,f=c.valueSpec||{},M=c.objectElementValidators||{},z=c.style,V=c.styleSpec;let te=[];const oe=Ti(u);if(oe!=="object")return[new je(n,u,`object expected, ${oe} found`)];for(const be in u){const Le=be.split(".")[0],Oe=f[Le]||f["*"];let Ge;if(M[Le])Ge=M[Le];else if(f[Le])Ge=gs;else if(M["*"])Ge=M["*"];else{if(!f["*"]){te.push(new je(n,u[be],`unknown property "${be}"`));continue}Ge=gs}te=te.concat(Ge({key:(n&&`${n}.`)+be,value:u[be],valueSpec:Oe,style:z,styleSpec:V,object:u,objectKey:be},u))}for(const be in f)M[be]||f[be].required&&f[be].default===void 0&&u[be]===void 0&&te.push(new je(n,u,`missing required property "${be}"`));return te}function fm(c){const n=c.value,u=c.valueSpec,f=c.style,M=c.styleSpec,z=c.key,V=c.arrayElementValidator||gs;if(Ti(n)!=="array")return[new je(z,n,`array expected, ${Ti(n)} found`)];if(u.length&&n.length!==u.length)return[new je(z,n,`array length ${u.length} expected, length ${n.length} found`)];if(u["min-length"]&&n.length<u["min-length"])return[new je(z,n,`array length at least ${u["min-length"]} expected, length ${n.length} found`)];let te={type:u.value,values:u.values};M.$version<7&&(te.function=u.function),Ti(u.value)==="object"&&(te=u.value);let oe=[];for(let be=0;be<n.length;be++)oe=oe.concat(V({array:n,arrayIndex:be,value:n[be],valueSpec:te,style:f,styleSpec:M,key:`${z}[${be}]`}));return oe}function Vd(c){const n=c.key,u=c.value,f=c.valueSpec;let M=Ti(u);return M==="number"&&u!=u&&(M="NaN"),M!=="number"?[new je(n,u,`number expected, ${M} found`)]:"minimum"in f&&u<f.minimum?[new je(n,u,`${u} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&u>f.maximum?[new je(n,u,`${u} is greater than the maximum value ${f.maximum}`)]:[]}function mm(c){const n=c.valueSpec,u=rt(c.value.type);let f,M,z,V={};const te=u!=="categorical"&&c.value.property===void 0,oe=!te,be=Ti(c.value.stops)==="array"&&Ti(c.value.stops[0])==="array"&&Ti(c.value.stops[0][0])==="object",Le=Ma({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Ye){if(u==="identity")return[new je(Ye.key,Ye.value,'identity function may not have a "stops" property')];let Ze=[];const ht=Ye.value;return Ze=Ze.concat(fm({key:Ye.key,value:ht,valueSpec:Ye.valueSpec,style:Ye.style,styleSpec:Ye.styleSpec,arrayElementValidator:Oe})),Ti(ht)==="array"&&ht.length===0&&Ze.push(new je(Ye.key,ht,"array must have at least one stop")),Ze},default:function(Ye){return gs({key:Ye.key,value:Ye.value,valueSpec:n,style:Ye.style,styleSpec:Ye.styleSpec})}}});return u==="identity"&&te&&Le.push(new je(c.key,c.value,'missing required property "property"')),u==="identity"||c.value.stops||Le.push(new je(c.key,c.value,'missing required property "stops"')),u==="exponential"&&c.valueSpec.expression&&!Ud(c.valueSpec)&&Le.push(new je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(oe&&!jl(c.valueSpec)?Le.push(new je(c.key,c.value,"property functions not supported")):te&&!bn(c.valueSpec)&&Le.push(new je(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!be||c.value.property!==void 0||Le.push(new je(c.key,c.value,'"property" property is required')),Le;function Oe(Ye){let Ze=[];const ht=Ye.value,lt=Ye.key;if(Ti(ht)!=="array")return[new je(lt,ht,`array expected, ${Ti(ht)} found`)];if(ht.length!==2)return[new je(lt,ht,`array length 2 expected, length ${ht.length} found`)];if(be){if(Ti(ht[0])!=="object")return[new je(lt,ht,`object expected, ${Ti(ht[0])} found`)];if(ht[0].zoom===void 0)return[new je(lt,ht,"object stop key must have zoom")];if(ht[0].value===void 0)return[new je(lt,ht,"object stop key must have value")];if(z&&z>rt(ht[0].zoom))return[new je(lt,ht[0].zoom,"stop zoom values must appear in ascending order")];rt(ht[0].zoom)!==z&&(z=rt(ht[0].zoom),M=void 0,V={}),Ze=Ze.concat(Ma({key:`${lt}[0]`,value:ht[0],valueSpec:{zoom:{}},style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{zoom:Vd,value:Ge}}))}else Ze=Ze.concat(Ge({key:`${lt}[0]`,value:ht[0],valueSpec:{},style:Ye.style,styleSpec:Ye.styleSpec},ht));return Nc(dt(ht[1]))?Ze.concat([new je(`${lt}[1]`,ht[1],"expressions are not allowed in function stops.")]):Ze.concat(gs({key:`${lt}[1]`,value:ht[1],valueSpec:n,style:Ye.style,styleSpec:Ye.styleSpec}))}function Ge(Ye,Ze){const ht=Ti(Ye.value),lt=rt(Ye.value),bt=Ye.value!==null?Ye.value:Ze;if(f){if(ht!==f)return[new je(Ye.key,bt,`${ht} stop domain type must match previous stop domain type ${f}`)]}else f=ht;if(ht!=="number"&&ht!=="string"&&ht!=="boolean")return[new je(Ye.key,bt,"stop domain value must be a number, string, or boolean")];if(ht!=="number"&&u!=="categorical"){let It=`number expected, ${ht} found`;return jl(n)&&u===void 0&&(It+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(Ye.key,bt,It)]}return u!=="categorical"||ht!=="number"||isFinite(lt)&&Math.floor(lt)===lt?u!=="categorical"&&ht==="number"&&M!==void 0&&lt<M?[new je(Ye.key,bt,"stop domain values must appear in ascending order")]:(M=lt,u==="categorical"&&lt in V?[new je(Ye.key,bt,"stop domain values must be unique")]:(V[lt]=!0,[])):[new je(Ye.key,bt,`integer expected, found ${lt}`)]}}function Fl(c){const n=(c.expressionContext==="property"?pm:Oc)(dt(c.value),c.valueSpec);if(n.result==="error")return n.value.map(f=>new je(`${c.key}${f.key}`,c.value,f.message));const u=n.value.expression||n.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Rl(u))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Rl(u))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Pc(u,["zoom","feature-state"]))return[new je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Vh(u))return[new je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bc(c){const n=c.key,u=c.value,f=c.valueSpec,M=[];return Array.isArray(f.values)?f.values.indexOf(rt(u))===-1&&M.push(new je(n,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(rt(u))===-1&&M.push(new je(n,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),M}function iu(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const n of c.slice(1))if(!iu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ru={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gd(c){if(c==null)return{filter:()=>!0,needGeometry:!1};iu(c)||(c=nu(c));const n=Oc(c,ru);if(n.result==="error")throw new Error(n.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,f,M)=>n.value.evaluate(u,f,{},M),needGeometry:Hd(c)}}function gm(c,n){return c<n?-1:c>n?1:0}function Hd(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let n=1;n<c.length;n++)if(Hd(c[n]))return!0;return!1}function nu(c){if(!c)return!0;const n=c[0];return c.length<=1?n!=="any":n==="=="?su(c[1],c[2],"=="):n==="!="?tl(su(c[1],c[2],"==")):n==="<"||n===">"||n==="<="||n===">="?su(c[1],c[2],n):n==="any"?(u=c.slice(1),["any"].concat(u.map(nu))):n==="all"?["all"].concat(c.slice(1).map(nu)):n==="none"?["all"].concat(c.slice(1).map(nu).map(tl)):n==="in"?ym(c[1],c.slice(2)):n==="!in"?tl(ym(c[1],c.slice(2))):n==="has"?au(c[1]):n==="!has"?tl(au(c[1])):n!=="within"||c;var u}function su(c,n,u){switch(c){case"$type":return[`filter-type-${u}`,n];case"$id":return[`filter-id-${u}`,n];default:return[`filter-${u}`,c,n]}}function ym(c,n){if(n.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(u=>typeof u!=typeof n[0])?["filter-in-large",c,["literal",n.sort(gm)]]:["filter-in-small",c,["literal",n]]}}function au(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function tl(c){return["!",c]}function Fc(c){return iu(dt(c.value))?Fl(tt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ou(c)}function ou(c){const n=c.value,u=c.key;if(Ti(n)!=="array")return[new je(u,n,`array expected, ${Ti(n)} found`)];const f=c.styleSpec;let M,z=[];if(n.length<1)return[new je(u,n,"filter array must have at least 1 element")];switch(z=z.concat(Bc({key:`${u}[0]`,value:n[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),rt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&rt(n[1])==="$type"&&z.push(new je(u,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&z.push(new je(u,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(M=Ti(n[1]),M!=="string"&&z.push(new je(`${u}[1]`,n[1],`string expected, ${M} found`)));for(let V=2;V<n.length;V++)M=Ti(n[V]),rt(n[1])==="$type"?z=z.concat(Bc({key:`${u}[${V}]`,value:n[V],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&z.push(new je(`${u}[${V}]`,n[V],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let V=1;V<n.length;V++)z=z.concat(ou({key:`${u}[${V}]`,value:n[V],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":M=Ti(n[1]),n.length!==2?z.push(new je(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):M!=="string"&&z.push(new je(`${u}[1]`,n[1],`string expected, ${M} found`));break;case"within":M=Ti(n[1]),n.length!==2?z.push(new je(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):M!=="object"&&z.push(new je(`${u}[1]`,n[1],`object expected, ${M} found`))}return z}function xm(c,n){const u=c.key,f=c.style,M=c.styleSpec,z=c.value,V=c.objectKey,te=M[`${n}_${c.layerType}`];if(!te)return[];const oe=V.match(/^(.*)-transition$/);if(n==="paint"&&oe&&te[oe[1]]&&te[oe[1]].transition)return gs({key:u,value:z,valueSpec:M.transition,style:f,styleSpec:M});const be=c.valueSpec||te[V];if(!be)return[new je(u,z,`unknown property "${V}"`)];let Le;if(Ti(z)==="string"&&jl(be)&&!be.tokens&&(Le=/^{([^}]+)}$/.exec(z)))return[new je(u,z,`"${V}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Le[1])} }\`.`)];const Oe=[];return c.layerType==="symbol"&&(V==="text-field"&&f&&!f.glyphs&&Oe.push(new je(u,z,'use of "text-field" requires a style "glyphs" property')),V==="text-font"&&Bl(dt(z))&&rt(z.type)==="identity"&&Oe.push(new je(u,z,'"text-font" does not support identity functions'))),Oe.concat(gs({key:c.key,value:z,valueSpec:be,style:f,styleSpec:M,expressionContext:"property",propertyType:n,propertyKey:V}))}function Uc(c){return xm(c,"paint")}function vm(c){return xm(c,"layout")}function bm(c){let n=[];const u=c.value,f=c.key,M=c.style,z=c.styleSpec;u.type||u.ref||n.push(new je(f,u,'either "type" or "ref" is required'));let V=rt(u.type);const te=rt(u.ref);if(u.id){const oe=rt(u.id);for(let be=0;be<c.arrayIndex;be++){const Le=M.layers[be];rt(Le.id)===oe&&n.push(new je(f,u.id,`duplicate layer id "${u.id}", previously used at line ${Le.id.__line__}`))}}if("ref"in u){let oe;["type","source","source-layer","filter","layout"].forEach(be=>{be in u&&n.push(new je(f,u[be],`"${be}" is prohibited for ref layers`))}),M.layers.forEach(be=>{rt(be.id)===te&&(oe=be)}),oe?oe.ref?n.push(new je(f,u.ref,"ref cannot reference another ref layer")):V=rt(oe.type):n.push(new je(f,u.ref,`ref layer "${te}" not found`))}else if(V!=="background")if(u.source){const oe=M.sources&&M.sources[u.source],be=oe&&rt(oe.type);oe?be==="vector"&&V==="raster"?n.push(new je(f,u.source,`layer "${u.id}" requires a raster source`)):be==="raster"&&V!=="raster"?n.push(new je(f,u.source,`layer "${u.id}" requires a vector source`)):be!=="vector"||u["source-layer"]?be==="raster-dem"&&V!=="hillshade"?n.push(new je(f,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!u.paint||!u.paint["line-gradient"]||be==="geojson"&&oe.lineMetrics||n.push(new je(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(f,u,`layer "${u.id}" must specify a "source-layer"`)):n.push(new je(f,u.source,`source "${u.source}" not found`))}else n.push(new je(f,u,'missing required property "source"'));return n=n.concat(Ma({key:f,value:u,valueSpec:z.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>gs({key:`${f}.type`,value:u.type,valueSpec:z.layer.type,style:c.style,styleSpec:c.styleSpec,object:u,objectKey:"type"}),filter:Fc,layout:oe=>Ma({layer:u,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":be=>vm(tt({layerType:V},be))}}),paint:oe=>Ma({layer:u,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":be=>Uc(tt({layerType:V},be))}})}})),n}function Ul(c){const n=c.value,u=c.key,f=Ti(n);return f!=="string"?[new je(u,n,`string expected, ${f} found`)]:[]}const _m={promoteId:function({key:c,value:n}){if(Ti(n)==="string")return Ul({key:c,value:n});{const u=[];for(const f in n)u.push(...Ul({key:`${c}.${f}`,value:n[f]}));return u}}};function wm(c){const n=c.value,u=c.key,f=c.styleSpec,M=c.style;if(!n.type)return[new je(u,n,'"type" is required')];const z=rt(n.type);let V;switch(z){case"vector":case"raster":case"raster-dem":return V=Ma({key:u,value:n,valueSpec:f[`source_${z.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:_m}),V;case"geojson":if(V=Ma({key:u,value:n,valueSpec:f.source_geojson,style:M,styleSpec:f,objectElementValidators:_m}),n.cluster)for(const te in n.clusterProperties){const[oe,be]=n.clusterProperties[te],Le=typeof oe=="string"?[oe,["accumulated"],["get",te]]:oe;V.push(...Fl({key:`${u}.${te}.map`,value:be,expressionContext:"cluster-map"})),V.push(...Fl({key:`${u}.${te}.reduce`,value:Le,expressionContext:"cluster-reduce"}))}return V;case"video":return Ma({key:u,value:n,valueSpec:f.source_video,style:M,styleSpec:f});case"image":return Ma({key:u,value:n,valueSpec:f.source_image,style:M,styleSpec:f});case"canvas":return[new je(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bc({key:`${u}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,styleSpec:f})}}function $c(c){const n=c.value,u=c.styleSpec,f=u.light,M=c.style;let z=[];const V=Ti(n);if(n===void 0)return z;if(V!=="object")return z=z.concat([new je("light",n,`object expected, ${V} found`)]),z;for(const te in n){const oe=te.match(/^(.*)-transition$/);z=z.concat(oe&&f[oe[1]]&&f[oe[1]].transition?gs({key:te,value:n[te],valueSpec:u.transition,style:M,styleSpec:u}):f[te]?gs({key:te,value:n[te],valueSpec:f[te],style:M,styleSpec:u}):[new je(te,n[te],`unknown property "${te}"`)])}return z}function Vc(c){const n=c.value,u=c.styleSpec,f=u.terrain,M=c.style;let z=[];const V=Ti(n);if(n===void 0)return z;if(V!=="object")return z=z.concat([new je("terrain",n,`object expected, ${V} found`)]),z;for(const te in n)z=z.concat(f[te]?gs({key:te,value:n[te],valueSpec:f[te],style:M,styleSpec:u}):[new je(te,n[te],`unknown property "${te}"`)]);return z}const Js={"*":()=>[],array:fm,boolean:function(c){const n=c.value,u=c.key,f=Ti(n);return f!=="boolean"?[new je(u,n,`boolean expected, ${f} found`)]:[]},number:Vd,color:function(c){const n=c.key,u=c.value,f=Ti(u);return f!=="string"?[new je(n,u,`color expected, ${f} found`)]:vi(u)===null?[new je(n,u,`color expected, "${u}" found`)]:[]},constants:Xe,enum:Bc,filter:Fc,function:mm,layer:bm,object:Ma,source:wm,light:$c,terrain:Vc,string:Ul,formatted:function(c){return Ul(c).length===0?[]:Fl(c)},resolvedImage:function(c){return Ul(c).length===0?[]:Fl(c)},padding:function(c){const n=c.key,u=c.value;if(Ti(u)==="array"){if(u.length<1||u.length>4)return[new je(n,u,`padding requires 1 to 4 values; ${u.length} values found`)];const f={type:"number"};let M=[];for(let z=0;z<u.length;z++)M=M.concat(gs({key:`${n}[${z}]`,value:u[z],valueSpec:f}));return M}return Vd({key:n,value:u,valueSpec:{}})}};function gs(c){const n=c.value,u=c.valueSpec,f=c.styleSpec;return u.expression&&Bl(rt(n))?mm(c):u.expression&&Nc(dt(n))?Fl(c):u.type&&Js[u.type]?Js[u.type](c):Ma(tt({},c,{valueSpec:u.type?f[u.type]:u}))}function fx(c){const n=c.value,u=c.key,f=Ul(c);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new je(u,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new je(u,n,'"glyphs" url must include a "{range}" token'))),f}function Co(c,n=Pe){let u=[];return u=u.concat(gs({key:"",value:c,valueSpec:n.$root,styleSpec:n,style:c,objectElementValidators:{glyphs:fx,"*":()=>[]}})),c.constants&&(u=u.concat(Xe({key:"constants",value:c.constants,style:c,styleSpec:n}))),Tm(u)}function Tm(c){return[].concat(c).sort((n,u)=>n.line-u.line)}function il(c){return function(...n){return Tm(c.apply(this,n))}}Co.source=il(wm),Co.light=il($c),Co.terrain=il(Vc),Co.layer=il(bm),Co.filter=il(Fc),Co.paintProperty=il(Uc),Co.layoutProperty=il(vm);const rl=Co,mx=rl.light,Wd=rl.paintProperty,gx=rl.layoutProperty;function Cm(c,n){let u=!1;if(n&&n.length)for(const f of n)c.fire(new Me(new Error(f.message))),u=!0;return u}class nl{constructor(n,u,f){const M=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const V=new Int32Array(this.arrayBuffer);n=V[0],this.d=(u=V[1])+2*(f=V[2]);for(let oe=0;oe<this.d*this.d;oe++){const be=V[3+oe],Le=V[3+oe+1];M.push(be===Le?null:V.subarray(be,Le))}const te=V[3+M.length+1];this.keys=V.subarray(V[3+M.length],te),this.bboxes=V.subarray(te),this.insert=this._insertReadonly}else{this.d=u+2*f;for(let V=0;V<this.d*this.d;V++)M.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=n,this.padding=f,this.scale=u/n,this.uid=0;const z=f/u*n;this.min=-z,this.max=n+z}insert(n,u,f,M,z){this._forEachCell(u,f,M,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(M),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,u,f,M,z,V){this.cells[z].push(V)}query(n,u,f,M,z){const V=this.min,te=this.max;if(n<=V&&u<=V&&te<=f&&te<=M&&!z)return Array.prototype.slice.call(this.keys);{const oe=[];return this._forEachCell(n,u,f,M,this._queryCell,oe,{},z),oe}}_queryCell(n,u,f,M,z,V,te,oe){const be=this.cells[z];if(be!==null){const Le=this.keys,Oe=this.bboxes;for(let Ge=0;Ge<be.length;Ge++){const Ye=be[Ge];if(te[Ye]===void 0){const Ze=4*Ye;(oe?oe(Oe[Ze+0],Oe[Ze+1],Oe[Ze+2],Oe[Ze+3]):n<=Oe[Ze+2]&&u<=Oe[Ze+3]&&f>=Oe[Ze+0]&&M>=Oe[Ze+1])?(te[Ye]=!0,V.push(Le[Ye])):te[Ye]=!1}}}}_forEachCell(n,u,f,M,z,V,te,oe){const be=this._convertToCellCoord(n),Le=this._convertToCellCoord(u),Oe=this._convertToCellCoord(f),Ge=this._convertToCellCoord(M);for(let Ye=be;Ye<=Oe;Ye++)for(let Ze=Le;Ze<=Ge;Ze++){const ht=this.d*Ze+Ye;if((!oe||oe(this._convertFromCellCoord(Ye),this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ye+1),this._convertFromCellCoord(Ze+1)))&&z.call(this,n,u,f,M,ht,V,te,oe))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,u=3+this.cells.length+1+1;let f=0;for(let V=0;V<this.cells.length;V++)f+=this.cells[V].length;const M=new Int32Array(u+f+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let z=u;for(let V=0;V<n.length;V++){const te=n[V];M[3+V]=z,M.set(te,z),z+=te.length}return M[3+n.length]=z,M.set(this.keys,z),z+=this.keys.length,M[3+n.length+1]=z,M.set(this.bboxes,z),z+=this.bboxes.length,M.buffer}static serialize(n,u){const f=n.toArrayBuffer();return u&&u.push(f),{buffer:f}}static deserialize(n){return new nl(n.buffer)}}const Eo={};function fi(c,n,u={}){if(Eo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:c,writeable:!1}),Eo[c]={klass:n,omit:u.omit||[],shallow:u.shallow||[]}}fi("Object",Object),fi("TransferableGridIndex",nl),fi("Color",$e),fi("Error",Error),fi("AJAXError",J),fi("ResolvedImage",nt),fi("StylePropertyFunction",eu),fi("StyleExpression",$d,{omit:["_evaluator"]}),fi("ZoomDependentExpression",jc),fi("ZoomConstantExpression",Jh),fi("CompoundExpression",ji,{omit:["_evaluate"]});for(const c in Nl)Nl[c]._classRegistryKey||fi(`Expression_${c}`,Nl[c]);function qd(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Gc(c,n){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(qd(c)||R(c))return n&&n.push(c),c;if(ArrayBuffer.isView(c)){const u=c;return n&&n.push(u.buffer),u}if(c instanceof ImageData)return n&&n.push(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const f of c)u.push(Gc(f,n));return u}if(typeof c=="object"){const u=c.constructor,f=u._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Eo[f])throw new Error(`${f} is not registered.`);const M=u.serialize?u.serialize(c,n):{};if(u.serialize){if(n&&M===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in c){if(!c.hasOwnProperty(z)||Eo[f].omit.indexOf(z)>=0)continue;const V=c[z];M[z]=Eo[f].shallow.indexOf(z)>=0?V:Gc(V,n)}c instanceof Error&&(M.message=c.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(M.$name=f),M}throw new Error("can't serialize object of type "+typeof c)}function sl(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||qd(c)||R(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(sl);if(typeof c=="object"){const n=c.$name||"Object";if(!Eo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:u}=Eo[n];if(!u)throw new Error(`can't deserialize unregistered class ${n}`);if(u.deserialize)return u.deserialize(c);const f=Object.create(u.prototype);for(const M of Object.keys(c)){if(M==="$name")continue;const z=c[M];f[M]=Eo[n].shallow.indexOf(M)>=0?z:sl(z)}return f}throw new Error("can't deserialize object of type "+typeof c)}class Hc{constructor(){this.first=!0}update(n,u){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const ti={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Yd(c){for(const n of c)if(Wc(n.charCodeAt(0)))return!0;return!1}function Em(c){for(const n of c)if(!yx(n.charCodeAt(0)))return!1;return!0}function yx(c){return!(ti.Arabic(c)||ti["Arabic Supplement"](c)||ti["Arabic Extended-A"](c)||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c))}function Wc(c){return!(c!==746&&c!==747&&(c<4352||!(ti["Bopomofo Extended"](c)||ti.Bopomofo(c)||ti["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||ti["CJK Compatibility Ideographs"](c)||ti["CJK Compatibility"](c)||ti["CJK Radicals Supplement"](c)||ti["CJK Strokes"](c)||!(!ti["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||ti["CJK Unified Ideographs Extension A"](c)||ti["CJK Unified Ideographs"](c)||ti["Enclosed CJK Letters and Months"](c)||ti["Hangul Compatibility Jamo"](c)||ti["Hangul Jamo Extended-A"](c)||ti["Hangul Jamo Extended-B"](c)||ti["Hangul Jamo"](c)||ti["Hangul Syllables"](c)||ti.Hiragana(c)||ti["Ideographic Description Characters"](c)||ti.Kanbun(c)||ti["Kangxi Radicals"](c)||ti["Katakana Phonetic Extensions"](c)||ti.Katakana(c)&&c!==12540||!(!ti["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!ti["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||ti["Unified Canadian Aboriginal Syllabics"](c)||ti["Unified Canadian Aboriginal Syllabics Extended"](c)||ti["Vertical Forms"](c)||ti["Yijing Hexagram Symbols"](c)||ti["Yi Syllables"](c)||ti["Yi Radicals"](c))))}function Sm(c){return!(Wc(c)||function(n){return!!(ti["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||ti["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||ti["Letterlike Symbols"](n)||ti["Number Forms"](n)||ti["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||ti["Control Pictures"](n)&&n!==9251||ti["Optical Character Recognition"](n)||ti["Enclosed Alphanumerics"](n)||ti["Geometric Shapes"](n)||ti["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||ti["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ti["CJK Symbols and Punctuation"](n)||ti.Katakana(n)||ti["Private Use Area"](n)||ti["CJK Compatibility Forms"](n)||ti["Small Form Variants"](n)||ti["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(c))}function km(c){return c>=1424&&c<=2303||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c)}function xx(c,n){return!(!n&&km(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||ti.Khmer(c))}function vx(c){for(const n of c)if(km(n.charCodeAt(0)))return!0;return!1}const lu="deferred",Zd="loading",Xd="loaded";let Kd=null,Us="unavailable",So=null;const Am=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Us="error"),Kd&&Kd(c)};function Qd(){$l.fire(new me("pluginStateChange",{pluginStatus:Us,pluginURL:So}))}const $l=new De,Jd=function(){return Us},cu=function(){if(Us!==lu||!So)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Us=Zd,Qd(),So&&we({url:So},c=>{c?Am(c):(Us=Xd,Qd())})},va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Us===Xd||va.applyArabicShaping!=null,isLoading:()=>Us===Zd,setState(c){if(!q())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Us=c.pluginStatus,So=c.pluginURL},isParsed(){if(!q())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return va.applyArabicShaping!=null&&va.processBidirectionalText!=null&&va.processStyledBidirectionalText!=null},getPluginURL(){if(!q())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return So}};class on{constructor(n,u){this.zoom=n,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hc,this.transition={})}isSupportedScript(n){return function(u,f){for(const M of u)if(!xx(M.charCodeAt(0),f))return!1;return!0}(n,va.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,u=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}}}class hu{constructor(n,u){this.property=n,this.value=u,this.expression=function(f,M){if(Bl(f))return new eu(f,M);if(Nc(f)){const z=pm(f,M);if(z.result==="error")throw new Error(z.value.map(V=>`${V.key}: ${V.message}`).join(", "));return z.value}{let z=f;return M.type==="color"&&typeof f=="string"?z=$e.parse(f):M.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(z=ot.parse(f)),{kind:"constant",evaluate:()=>z}}}(u===void 0?n.specification.default:u,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,u,f){return this.property.possiblyEvaluate(this,n,u,f)}}class uu{constructor(n){this.property=n,this.value=new hu(n,void 0)}transitioned(n,u){return new Mm(this.property,this.value,u,b({},n.transition,this.transition),n.now)}untransitioned(){return new Mm(this.property,this.value,null,{},0)}}class ep{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return A(this._values[n].value.value)}setValue(n,u){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new uu(this._values[n].property)),this._values[n].value=new hu(this._values[n].property,u===null?void 0:A(u))}getTransition(n){return A(this._values[n].transition)}setTransition(n,u){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new uu(this._values[n].property)),this._values[n].transition=A(u)||void 0}serialize(){const n={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(n[u]=f);const M=this.getTransition(u);M!==void 0&&(n[`${u}-transition`]=M)}return n}transitioned(n,u){const f=new Pm(this._properties);for(const M of Object.keys(this._values))f._values[M]=this._values[M].transitioned(n,u._values[M]);return f}untransitioned(){const n=new Pm(this._properties);for(const u of Object.keys(this._values))n._values[u]=this._values[u].untransitioned();return n}}class Mm{constructor(n,u,f,M,z){this.property=n,this.value=u,this.begin=z+M.delay||0,this.end=this.begin+M.duration||0,n.specification.transition&&(M.delay||M.duration)&&(this.prior=f)}possiblyEvaluate(n,u,f){const M=n.now||0,z=this.value.possiblyEvaluate(n,u,f),V=this.prior;if(V){if(M>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(M<this.begin)return V.possiblyEvaluate(n,u,f);{const te=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(n,u,f),z,function(oe){if(oe<=0)return 0;if(oe>=1)return 1;const be=oe*oe,Le=be*oe;return 4*(oe<.5?Le:3*(oe-be)+Le-.75)}(te))}}return z}}class Pm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,u,f){const M=new du(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(n,u,f);return M}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class bx{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return A(this._values[n].value)}setValue(n,u){this._values[n]=new hu(this._values[n].property,u===null?void 0:A(u))}serialize(){const n={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(n[u]=f)}return n}possiblyEvaluate(n,u,f){const M=new du(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(n,u,f);return M}}class Wa{constructor(n,u,f){this.property=n,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,u,f,M){return this.property.evaluate(this.value,this.parameters,n,u,f,M)}}class du{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Si{constructor(n){this.specification=n}possiblyEvaluate(n,u){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(u)}interpolate(n,u,f){const M=Lc[this.specification.type];return M?M(n,u,f):n}}class Di{constructor(n,u){this.specification=n,this.overrides=u}possiblyEvaluate(n,u,f,M){return new Wa(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(u,null,{},f,M)}:n.expression,u)}interpolate(n,u,f){if(n.value.kind!=="constant"||u.value.kind!=="constant")return n;if(n.value.value===void 0||u.value.value===void 0)return new Wa(this,{kind:"constant",value:void 0},n.parameters);const M=Lc[this.specification.type];return M?new Wa(this,{kind:"constant",value:M(n.value.value,u.value.value,f)},n.parameters):n}evaluate(n,u,f,M,z,V){return n.kind==="constant"?n.value:n.evaluate(u,f,M,z,V)}}class qc extends Di{possiblyEvaluate(n,u,f,M){if(n.value===void 0)return new Wa(this,{kind:"constant",value:void 0},u);if(n.expression.kind==="constant"){const z=n.expression.evaluate(u,null,{},f,M),V=n.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,te=this._calculate(V,V,V,u);return new Wa(this,{kind:"constant",value:te},u)}if(n.expression.kind==="camera"){const z=this._calculate(n.expression.evaluate({zoom:u.zoom-1}),n.expression.evaluate({zoom:u.zoom}),n.expression.evaluate({zoom:u.zoom+1}),u);return new Wa(this,{kind:"constant",value:z},u)}return new Wa(this,n.expression,u)}evaluate(n,u,f,M,z,V){if(n.kind==="source"){const te=n.evaluate(u,f,M,z,V);return this._calculate(te,te,te,u)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(u.zoom)-1},f,M),n.evaluate({zoom:Math.floor(u.zoom)},f,M),n.evaluate({zoom:Math.floor(u.zoom)+1},f,M),u):n.value}_calculate(n,u,f,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:f,to:u}}interpolate(n){return n}}class Yc{constructor(n){this.specification=n}possiblyEvaluate(n,u,f,M){if(n.value!==void 0){if(n.expression.kind==="constant"){const z=n.expression.evaluate(u,null,{},f,M);return this._calculate(z,z,z,u)}return this._calculate(n.expression.evaluate(new on(Math.floor(u.zoom-1),u)),n.expression.evaluate(new on(Math.floor(u.zoom),u)),n.expression.evaluate(new on(Math.floor(u.zoom+1),u)),u)}}_calculate(n,u,f,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:f,to:u}}interpolate(n){return n}}class tp{constructor(n){this.specification=n}possiblyEvaluate(n,u,f,M){return!!n.expression.evaluate(u,null,{},f,M)}interpolate(){return!1}}class $n{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in n){const f=n[u];f.specification.overridable&&this.overridableProperties.push(u);const M=this.defaultPropertyValues[u]=new hu(f,void 0),z=this.defaultTransitionablePropertyValues[u]=new uu(f);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=M.possiblyEvaluate({})}}}fi("DataDrivenProperty",Di),fi("DataConstantProperty",Si),fi("CrossFadedDataDrivenProperty",qc),fi("CrossFadedProperty",Yc),fi("ColorRampProperty",tp);const al="-transition";class $s extends De{constructor(n,u){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new bx(u.layout)),u.paint)){this._transitionablePaint=new ep(u.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new du(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,u,f={}){u!=null&&this._validate(gx,`layers.${this.id}.layout.${n}`,n,u,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,u):this.visibility=u)}getPaintProperty(n){return n.endsWith(al)?this._transitionablePaint.getTransition(n.slice(0,-al.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,u,f={}){if(u!=null&&this._validate(Wd,`layers.${this.id}.paint.${n}`,n,u,f))return!1;if(n.endsWith(al))return this._transitionablePaint.setTransition(n.slice(0,-al.length),u||void 0),!1;{const M=this._transitionablePaint._values[n],z=M.property.specification["property-type"]==="cross-faded-data-driven",V=M.value.isDataDriven(),te=M.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);const oe=this._transitionablePaint._values[n].value;return oe.isDataDriven()||V||z||this._handleOverridablePaintPropertyUpdate(n,te,oe)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,u,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,u){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),x(n,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(n,u,f,M,z={}){return(!z||z.validate!==!1)&&Cm(this,n.call(rl,{key:u,layerType:this.type,objectKey:f,value:M,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const u=this.paint.get(n);if(u instanceof Wa&&jl(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const _x={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zc{constructor(n,u){this._structArray=n,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class en{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,u){return n._trim(),u&&(n.isTransferred=!0,u.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const u=Object.create(this.prototype);return u.arrayBuffer=n.arrayBuffer,u.length=n.length,u.capacity=n.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Nn(c,n=1){let u=0,f=0;return{members:c.map(M=>{const z=_x[M.type].BYTES_PER_ELEMENT,V=u=Im(u,Math.max(n,z)),te=M.components||1;return f=Math.max(f,z),u+=z*te,{name:M.name,type:M.type,components:te,offset:V}}),size:Im(u,Math.max(f,n)),alignment:n}}function Im(c,n){return Math.ceil(c/n)*n}class Vl extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,u)}emplace(n,u,f){const M=2*n;return this.int16[M+0]=u,this.int16[M+1]=f,n}}Vl.prototype.bytesPerElement=4,fi("StructArrayLayout2i4",Vl);class Xc extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f,M){const z=this.length;return this.resize(z+1),this.emplace(z,n,u,f,M)}emplace(n,u,f,M,z){const V=4*n;return this.int16[V+0]=u,this.int16[V+1]=f,this.int16[V+2]=M,this.int16[V+3]=z,n}}Xc.prototype.bytesPerElement=8,fi("StructArrayLayout4i8",Xc);class E extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V){const te=this.length;return this.resize(te+1),this.emplace(te,n,u,f,M,z,V)}emplace(n,u,f,M,z,V,te){const oe=6*n;return this.int16[oe+0]=u,this.int16[oe+1]=f,this.int16[oe+2]=M,this.int16[oe+3]=z,this.int16[oe+4]=V,this.int16[oe+5]=te,n}}E.prototype.bytesPerElement=12,fi("StructArrayLayout2i4i12",E);class o extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V){const te=this.length;return this.resize(te+1),this.emplace(te,n,u,f,M,z,V)}emplace(n,u,f,M,z,V,te){const oe=4*n,be=8*n;return this.int16[oe+0]=u,this.int16[oe+1]=f,this.uint8[be+4]=M,this.uint8[be+5]=z,this.uint8[be+6]=V,this.uint8[be+7]=te,n}}o.prototype.bytesPerElement=8,fi("StructArrayLayout2i4ub8",o);class d extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,u)}emplace(n,u,f){const M=2*n;return this.float32[M+0]=u,this.float32[M+1]=f,n}}d.prototype.bytesPerElement=8,fi("StructArrayLayout2f8",d);class _ extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V,te,oe,be,Le){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,n,u,f,M,z,V,te,oe,be,Le)}emplace(n,u,f,M,z,V,te,oe,be,Le,Oe){const Ge=10*n;return this.uint16[Ge+0]=u,this.uint16[Ge+1]=f,this.uint16[Ge+2]=M,this.uint16[Ge+3]=z,this.uint16[Ge+4]=V,this.uint16[Ge+5]=te,this.uint16[Ge+6]=oe,this.uint16[Ge+7]=be,this.uint16[Ge+8]=Le,this.uint16[Ge+9]=Oe,n}}_.prototype.bytesPerElement=20,fi("StructArrayLayout10ui20",_);class P extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge)}emplace(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye){const Ze=12*n;return this.int16[Ze+0]=u,this.int16[Ze+1]=f,this.int16[Ze+2]=M,this.int16[Ze+3]=z,this.uint16[Ze+4]=V,this.uint16[Ze+5]=te,this.uint16[Ze+6]=oe,this.uint16[Ze+7]=be,this.int16[Ze+8]=Le,this.int16[Ze+9]=Oe,this.int16[Ze+10]=Ge,this.int16[Ze+11]=Ye,n}}P.prototype.bytesPerElement=24,fi("StructArrayLayout4i4ui4i24",P);class U extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,f){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,f)}emplace(n,u,f,M){const z=3*n;return this.float32[z+0]=u,this.float32[z+1]=f,this.float32[z+2]=M,n}}U.prototype.bytesPerElement=12,fi("StructArrayLayout3f12",U);class ee extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint32[1*n+0]=u,n}}ee.prototype.bytesPerElement=4,fi("StructArrayLayout1ul4",ee);class ce extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V,te,oe,be){const Le=this.length;return this.resize(Le+1),this.emplace(Le,n,u,f,M,z,V,te,oe,be)}emplace(n,u,f,M,z,V,te,oe,be,Le){const Oe=10*n,Ge=5*n;return this.int16[Oe+0]=u,this.int16[Oe+1]=f,this.int16[Oe+2]=M,this.int16[Oe+3]=z,this.int16[Oe+4]=V,this.int16[Oe+5]=te,this.uint32[Ge+3]=oe,this.uint16[Oe+8]=be,this.uint16[Oe+9]=Le,n}}ce.prototype.bytesPerElement=20,fi("StructArrayLayout6i1ul2ui20",ce);class fe extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V){const te=this.length;return this.resize(te+1),this.emplace(te,n,u,f,M,z,V)}emplace(n,u,f,M,z,V,te){const oe=6*n;return this.int16[oe+0]=u,this.int16[oe+1]=f,this.int16[oe+2]=M,this.int16[oe+3]=z,this.int16[oe+4]=V,this.int16[oe+5]=te,n}}fe.prototype.bytesPerElement=12,fi("StructArrayLayout2i2i2i12",fe);class Se extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z){const V=this.length;return this.resize(V+1),this.emplace(V,n,u,f,M,z)}emplace(n,u,f,M,z,V){const te=4*n,oe=8*n;return this.float32[te+0]=u,this.float32[te+1]=f,this.float32[te+2]=M,this.int16[oe+6]=z,this.int16[oe+7]=V,n}}Se.prototype.bytesPerElement=16,fi("StructArrayLayout2f1f2i16",Se);class Ne extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,f,M){const z=this.length;return this.resize(z+1),this.emplace(z,n,u,f,M)}emplace(n,u,f,M,z){const V=12*n,te=3*n;return this.uint8[V+0]=u,this.uint8[V+1]=f,this.float32[te+1]=M,this.float32[te+2]=z,n}}Ne.prototype.bytesPerElement=12,fi("StructArrayLayout2ub2f12",Ne);class Ue extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,f){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,f)}emplace(n,u,f,M){const z=3*n;return this.uint16[z+0]=u,this.uint16[z+1]=f,this.uint16[z+2]=M,n}}Ue.prototype.bytesPerElement=6,fi("StructArrayLayout3ui6",Ue);class qe extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt){const It=this.length;return this.resize(It+1),this.emplace(It,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt)}emplace(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt,It){const xt=24*n,Mt=12*n,Ut=48*n;return this.int16[xt+0]=u,this.int16[xt+1]=f,this.uint16[xt+2]=M,this.uint16[xt+3]=z,this.uint32[Mt+2]=V,this.uint32[Mt+3]=te,this.uint32[Mt+4]=oe,this.uint16[xt+10]=be,this.uint16[xt+11]=Le,this.uint16[xt+12]=Oe,this.float32[Mt+7]=Ge,this.float32[Mt+8]=Ye,this.uint8[Ut+36]=Ze,this.uint8[Ut+37]=ht,this.uint8[Ut+38]=lt,this.uint32[Mt+10]=bt,this.int16[xt+22]=It,n}}qe.prototype.bytesPerElement=48,fi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);class it extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt,It,xt,Mt,Ut,Ft,xi,Ci,ii,Kt,Zt,ri){const ei=this.length;return this.resize(ei+1),this.emplace(ei,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt,It,xt,Mt,Ut,Ft,xi,Ci,ii,Kt,Zt,ri)}emplace(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht,lt,bt,It,xt,Mt,Ut,Ft,xi,Ci,ii,Kt,Zt,ri,ei){const Vt=34*n,Mi=17*n;return this.int16[Vt+0]=u,this.int16[Vt+1]=f,this.int16[Vt+2]=M,this.int16[Vt+3]=z,this.int16[Vt+4]=V,this.int16[Vt+5]=te,this.int16[Vt+6]=oe,this.int16[Vt+7]=be,this.uint16[Vt+8]=Le,this.uint16[Vt+9]=Oe,this.uint16[Vt+10]=Ge,this.uint16[Vt+11]=Ye,this.uint16[Vt+12]=Ze,this.uint16[Vt+13]=ht,this.uint16[Vt+14]=lt,this.uint16[Vt+15]=bt,this.uint16[Vt+16]=It,this.uint16[Vt+17]=xt,this.uint16[Vt+18]=Mt,this.uint16[Vt+19]=Ut,this.uint16[Vt+20]=Ft,this.uint16[Vt+21]=xi,this.uint16[Vt+22]=Ci,this.uint32[Mi+12]=ii,this.float32[Mi+13]=Kt,this.float32[Mi+14]=Zt,this.float32[Mi+15]=ri,this.float32[Mi+16]=ei,n}}it.prototype.bytesPerElement=68,fi("StructArrayLayout8i15ui1ul4f68",it);class Qe extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.float32[1*n+0]=u,n}}Qe.prototype.bytesPerElement=4,fi("StructArrayLayout1f4",Qe);class et extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,f){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,f)}emplace(n,u,f,M){const z=3*n;return this.int16[z+0]=u,this.int16[z+1]=f,this.int16[z+2]=M,n}}et.prototype.bytesPerElement=6,fi("StructArrayLayout3i6",et);class pt extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,f){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,f)}emplace(n,u,f,M){const z=4*n;return this.uint32[2*n+0]=u,this.uint16[z+2]=f,this.uint16[z+3]=M,n}}pt.prototype.bytesPerElement=8,fi("StructArrayLayout1ul2ui8",pt);class yt extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,u)}emplace(n,u,f){const M=2*n;return this.uint16[M+0]=u,this.uint16[M+1]=f,n}}yt.prototype.bytesPerElement=4,fi("StructArrayLayout2ui4",yt);class _t extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint16[1*n+0]=u,n}}_t.prototype.bytesPerElement=2,fi("StructArrayLayout1ui2",_t);class at extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,f,M){const z=this.length;return this.resize(z+1),this.emplace(z,n,u,f,M)}emplace(n,u,f,M,z){const V=4*n;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=M,this.float32[V+3]=z,n}}at.prototype.bytesPerElement=16,fi("StructArrayLayout4f16",at);class At extends Zc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}At.prototype.size=20;class Ct extends ce{get(n){return new At(this,n)}}fi("CollisionBoxArray",Ct);class Ot extends Zc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ot.prototype.size=48;class jt extends qe{get(n){return new Ot(this,n)}}fi("PlacedSymbolArray",jt);class $t extends Zc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}$t.prototype.size=68;class zt extends it{get(n){return new $t(this,n)}}fi("SymbolInstanceArray",zt);class ai extends Qe{getoffsetX(n){return this.float32[1*n+0]}}fi("GlyphOffsetArray",ai);class Xt extends et{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}fi("SymbolLineVertexArray",Xt);class li extends Zc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class Ki extends pt{get(n){return new li(this,n)}}fi("FeatureIndexArray",Ki);class or extends Vl{}class Ii extends Vl{}class jr extends Vl{}class Br extends E{}class xr extends o{}class br extends d{}class Tr extends _{}class ea extends P{}class qa extends U{}class Pa extends ee{}class Ia extends fe{}class ol extends Ne{}class as extends Ue{}class Da extends yt{}const ll=Nn([{name:"a_pos",components:2,type:"Int16"}],4),{members:pu}=ll;class Cr{constructor(n=[]){this.segments=n}prepareSegment(n,u,f,M){let z=this.segments[this.segments.length-1];return n>Cr.MAX_VERTEX_ARRAY_LENGTH&&w(`Max vertices per segment is ${Cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!z||z.vertexLength+n>Cr.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==M)&&(z={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},M!==void 0&&(z.sortKey=M),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const n of this.segments)for(const u in n.vaos)n.vaos[u].destroy()}static simpleSegment(n,u,f,M){return new Cr([{vertexOffset:n,primitiveOffset:u,vertexLength:f,primitiveLength:M,vaos:{},sortKey:0}])}}function tn(c,n){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(n),0,255)}Cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fi("SegmentVector",Cr);const Sr=Nn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var On={exports:{}},Vs={exports:{}};Vs.exports=function(c,n){var u,f,M,z,V,te,oe,be;for(f=c.length-(u=3&c.length),M=n,V=3432918353,te=461845907,be=0;be<f;)oe=255&c.charCodeAt(be)|(255&c.charCodeAt(++be))<<8|(255&c.charCodeAt(++be))<<16|(255&c.charCodeAt(++be))<<24,++be,M=27492+(65535&(z=5*(65535&(M=(M^=oe=(65535&(oe=(oe=(65535&oe)*V+(((oe>>>16)*V&65535)<<16)&4294967295)<<15|oe>>>17))*te+(((oe>>>16)*te&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(oe=0,u){case 3:oe^=(255&c.charCodeAt(be+2))<<16;case 2:oe^=(255&c.charCodeAt(be+1))<<8;case 1:M^=oe=(65535&(oe=(oe=(65535&(oe^=255&c.charCodeAt(be)))*V+(((oe>>>16)*V&65535)<<16)&4294967295)<<15|oe>>>17))*te+(((oe>>>16)*te&65535)<<16)&4294967295}return M^=c.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var ln={exports:{}};ln.exports=function(c,n){for(var u,f=c.length,M=n^f,z=0;f>=4;)u=1540483477*(65535&(u=255&c.charCodeAt(z)|(255&c.charCodeAt(++z))<<8|(255&c.charCodeAt(++z))<<16|(255&c.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++z;switch(f){case 3:M^=(255&c.charCodeAt(z+2))<<16;case 2:M^=(255&c.charCodeAt(z+1))<<8;case 1:M=1540483477*(65535&(M^=255&c.charCodeAt(z)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var ba=Vs.exports,Gl=ln.exports;On.exports=ba,On.exports.murmur3=ba,On.exports.murmur2=Gl;class Hl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,u,f,M){this.ids.push(fu(n)),this.positions.push(u,f,M)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=fu(n);let f=0,M=this.ids.length-1;for(;f<M;){const V=f+M>>1;this.ids[V]>=u?M=V:f=V+1}const z=[];for(;this.ids[f]===u;)z.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return z}static serialize(n,u){const f=new Float64Array(n.ids),M=new Uint32Array(n.positions);return ip(f,M,0,f.length-1),u&&u.push(f.buffer,M.buffer),{ids:f,positions:M}}static deserialize(n){const u=new Hl;return u.ids=n.ids,u.positions=n.positions,u.indexed=!0,u}}function fu(c){const n=+c;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:On.exports(String(c))}function ip(c,n,u,f){for(;u<f;){const M=c[u+f>>1];let z=u-1,V=f+1;for(;;){do z++;while(c[z]<M);do V--;while(c[V]>M);if(z>=V)break;mu(c,z,V),mu(n,3*z,3*V),mu(n,3*z+1,3*V+1),mu(n,3*z+2,3*V+2)}V-u<f-V?(ip(c,n,u,V),u=V+1):(ip(c,n,V+1,f),f=V)}}function mu(c,n,u){const f=c[n];c[n]=c[u],c[u]=f}fi("FeaturePositionMap",Hl);class La{constructor(n,u){this.gl=n.gl,this.location=u}}class gu extends La{constructor(n,u){super(n,u),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Kc extends La{constructor(n,u){super(n,u),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class yu extends La{constructor(n,u){super(n,u),this.current=$e.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const ck=new Float32Array(16);function wx(c){return[tn(255*c.r,255*c.g),tn(255*c.b,255*c.a)]}class rp{constructor(n,u,f){this.value=n,this.uniformNames=u.map(M=>`u_${M}`),this.type=f}setUniform(n,u,f){n.set(f.constantOr(this.value))}getBinding(n,u,f){return this.type==="color"?new yu(n,u):new gu(n,u)}}class xu{constructor(n,u){this.uniformNames=u.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=n.tlbr}setUniform(n,u,f,M){const z=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&n.set(z)}getBinding(n,u,f){return f.substr(0,9)==="u_pattern"?new Kc(n,u):new gu(n,u)}}class cl{constructor(n,u,f,M){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(n,u,f,M,z){const V=this.paintVertexArray.length,te=this.expression.evaluate(new on(0),u,{},M,[],z);this.paintVertexArray.resize(n),this._setPaintValue(V,n,te)}updatePaintArray(n,u,f,M){const z=this.expression.evaluate({zoom:0},f,M);this._setPaintValue(n,u,z)}_setPaintValue(n,u,f){if(this.type==="color"){const M=wx(f);for(let z=n;z<u;z++)this.paintVertexArray.emplace(z,M[0],M[1])}else{for(let M=n;M<u;M++)this.paintVertexArray.emplace(M,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class no{constructor(n,u,f,M,z,V){this.expression=n,this.uniformNames=u.map(te=>`u_${te}_t`),this.type=f,this.useIntegerZoom=M,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map(te=>({name:`a_${te}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(n,u,f,M,z){const V=this.expression.evaluate(new on(this.zoom),u,{},M,[],z),te=this.expression.evaluate(new on(this.zoom+1),u,{},M,[],z),oe=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(oe,n,V,te)}updatePaintArray(n,u,f,M){const z=this.expression.evaluate({zoom:this.zoom},f,M),V=this.expression.evaluate({zoom:this.zoom+1},f,M);this._setPaintValue(n,u,z,V)}_setPaintValue(n,u,f,M){if(this.type==="color"){const z=wx(f),V=wx(M);for(let te=n;te<u;te++)this.paintVertexArray.emplace(te,z[0],z[1],V[0],V[1])}else{for(let z=n;z<u;z++)this.paintVertexArray.emplace(z,f,M);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(M))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,u){const f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,M=y(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(M)}getBinding(n,u,f){return new gu(n,u)}}class Wl{constructor(n,u,f,M,z,V){this.expression=n,this.type=u,this.useIntegerZoom=f,this.zoom=M,this.layerId=V,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(n,u,f){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(M,n,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(n,u,f,M,z){this._setPaintValues(n,u,f.patterns&&f.patterns[this.layerId],z)}_setPaintValues(n,u,f,M){if(!M||!f)return;const{min:z,mid:V,max:te}=f,oe=M[z],be=M[V],Le=M[te];if(oe&&be&&Le)for(let Oe=n;Oe<u;Oe++)this.zoomInPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],be.pixelRatio,oe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],Le.tl[0],Le.tl[1],Le.br[0],Le.br[1],be.pixelRatio,Le.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Sr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Sr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class x1{constructor(n,u,f){this.binders={},this._buffers=[];const M=[];for(const z in n.paint._values){if(!f(z))continue;const V=n.paint.get(z);if(!(V instanceof Wa&&jl(V.property.specification)))continue;const te=hk(z,n.type),oe=V.value,be=V.property.specification.type,Le=V.property.useIntegerZoom,Oe=V.property.specification["property-type"],Ge=Oe==="cross-faded"||Oe==="cross-faded-data-driven";if(oe.kind==="constant")this.binders[z]=Ge?new xu(oe.value,te):new rp(oe.value,te,be),M.push(`/u_${z}`);else if(oe.kind==="source"||Ge){const Ye=v1(z,be,"source");this.binders[z]=Ge?new Wl(oe,be,Le,u,Ye,n.id):new cl(oe,te,be,Ye),M.push(`/a_${z}`)}else{const Ye=v1(z,be,"composite");this.binders[z]=new no(oe,te,be,Le,u,Ye),M.push(`/z_${z}`)}}this.cacheKey=M.sort().join("")}getMaxValue(n){const u=this.binders[n];return u instanceof cl||u instanceof no?u.maxValue:0}populatePaintArrays(n,u,f,M,z){for(const V in this.binders){const te=this.binders[V];(te instanceof cl||te instanceof no||te instanceof Wl)&&te.populatePaintArray(n,u,f,M,z)}}setConstantPatternPositions(n,u){for(const f in this.binders){const M=this.binders[f];M instanceof xu&&M.setConstantPatternPositions(n,u)}}updatePaintArrays(n,u,f,M,z){let V=!1;for(const te in n){const oe=u.getPositions(te);for(const be of oe){const Le=f.feature(be.index);for(const Oe in this.binders){const Ge=this.binders[Oe];if((Ge instanceof cl||Ge instanceof no||Ge instanceof Wl)&&Ge.expression.isStateDependent===!0){const Ye=M.paint.get(Oe);Ge.expression=Ye.value,Ge.updatePaintArray(be.start,be.end,Le,n[te],z),V=!0}}}}return V}defines(){const n=[];for(const u in this.binders){const f=this.binders[u];(f instanceof rp||f instanceof xu)&&n.push(...f.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return n}getBinderAttributes(){const n=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof cl||f instanceof no)for(let M=0;M<f.paintVertexAttributes.length;M++)n.push(f.paintVertexAttributes[M].name);else if(f instanceof Wl)for(let M=0;M<Sr.members.length;M++)n.push(Sr.members[M].name)}return n}getBinderUniforms(){const n=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof rp||f instanceof xu||f instanceof no)for(const M of f.uniformNames)n.push(M)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,u){const f=[];for(const M in this.binders){const z=this.binders[M];if(z instanceof rp||z instanceof xu||z instanceof no){for(const V of z.uniformNames)if(u[V]){const te=z.getBinding(n,u[V],V);f.push({name:V,property:M,binding:te})}}}return f}setUniforms(n,u,f,M){for(const{name:z,property:V,binding:te}of u)this.binders[V].setUniform(te,M,f.get(V),z)}updatePaintBuffers(n){this._buffers=[];for(const u in this.binders){const f=this.binders[u];if(n&&f instanceof Wl){const M=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(f instanceof cl||f instanceof no)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const u in this.binders){const f=this.binders[u];(f instanceof cl||f instanceof no||f instanceof Wl)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const u=this.binders[n];(u instanceof cl||u instanceof no||u instanceof Wl)&&u.destroy()}}}class Qc{constructor(n,u,f=()=>!0){this.programConfigurations={};for(const M of n)this.programConfigurations[M.id]=new x1(M,u,f);this.needsUpload=!1,this._featureMap=new Hl,this._bufferOffset=0}populatePaintArrays(n,u,f,M,z,V){for(const te in this.programConfigurations)this.programConfigurations[te].populatePaintArrays(n,u,M,z,V);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,u,f,M){for(const z of f)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(n,this._featureMap,u,z,M)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function hk(c,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${n}-`,"").replace(/-/g,"_")]}function v1(c,n,u){const f={color:{source:d,composite:at},number:{source:Qe,composite:d}},M=function(z){return{"line-pattern":{source:Tr,composite:Tr},"fill-pattern":{source:Tr,composite:Tr},"fill-extrusion-pattern":{source:Tr,composite:Tr}}[z]}(c);return M&&M[u]||f[n][u]}fi("ConstantBinder",rp),fi("CrossFadedConstantBinder",xu),fi("SourceExpressionBinder",cl),fi("CrossFadedCompositeBinder",Wl),fi("CompositeExpressionBinder",no),fi("ProgramConfiguration",x1,{omit:["_buffers"]}),fi("ProgramConfigurationSet",Qc);var Vn=8192;const Tx=Math.pow(2,14)-1,b1=-Tx-1;function Jc(c){const n=Vn/c.extent,u=c.loadGeometry();for(let f=0;f<u.length;f++){const M=u[f];for(let z=0;z<M.length;z++){const V=M[z],te=Math.round(V.x*n),oe=Math.round(V.y*n);V.x=y(te,b1,Tx),V.y=y(oe,b1,Tx),(te<V.x||te>V.x+1||oe<V.y||oe>V.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function eh(c,n){return{type:c.type,id:c.id,properties:c.properties,geometry:n?Jc(c):[]}}function Dm(c,n,u,f,M){c.emplaceBack(2*n+(f+1)/2,2*u+(M+1)/2)}class Cx{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new as,this.segments=new Cr,this.programConfigurations=new Qc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,f){const M=this.layers[0],z=[];let V=null,te=!1;M.type==="circle"&&(V=M.layout.get("circle-sort-key"),te=!V.isConstant());for(const{feature:oe,id:be,index:Le,sourceLayerIndex:Oe}of n){const Ge=this.layers[0]._featureFilter.needGeometry,Ye=eh(oe,Ge);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),Ye,f))continue;const Ze=te?V.evaluate(Ye,{},f):void 0,ht={id:be,properties:oe.properties,type:oe.type,sourceLayerIndex:Oe,index:Le,geometry:Ge?Ye.geometry:Jc(oe),patterns:{},sortKey:Ze};z.push(ht)}te&&z.sort((oe,be)=>oe.sortKey-be.sortKey);for(const oe of z){const{geometry:be,index:Le,sourceLayerIndex:Oe}=oe,Ge=n[Le].feature;this.addFeature(oe,be,Le,f),u.featureIndex.insert(Ge,be,Le,Oe,this.index)}}update(n,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pu),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,u,f,M){for(const z of u)for(const V of z){const te=V.x,oe=V.y;if(te<0||te>=Vn||oe<0||oe>=Vn)continue;const be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Le=be.vertexLength;Dm(this.layoutVertexArray,te,oe,-1,-1),Dm(this.layoutVertexArray,te,oe,1,-1),Dm(this.layoutVertexArray,te,oe,1,1),Dm(this.layoutVertexArray,te,oe,-1,1),this.indexArray.emplaceBack(Le,Le+1,Le+2),this.indexArray.emplaceBack(Le,Le+3,Le+2),be.vertexLength+=4,be.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},M)}}function _1(c,n){for(let u=0;u<c.length;u++)if(vu(n,c[u]))return!0;for(let u=0;u<n.length;u++)if(vu(c,n[u]))return!0;return!!Ex(c,n)}function uk(c,n,u){return!!vu(c,n)||!!Sx(n,c,u)}function w1(c,n){if(c.length===1)return C1(n,c[0]);for(let u=0;u<n.length;u++){const f=n[u];for(let M=0;M<f.length;M++)if(vu(c,f[M]))return!0}for(let u=0;u<c.length;u++)if(C1(n,c[u]))return!0;for(let u=0;u<n.length;u++)if(Ex(c,n[u]))return!0;return!1}function dk(c,n,u){if(c.length>1){if(Ex(c,n))return!0;for(let f=0;f<n.length;f++)if(Sx(n[f],c,u))return!0}for(let f=0;f<c.length;f++)if(Sx(c[f],n,u))return!0;return!1}function Ex(c,n){if(c.length===0||n.length===0)return!1;for(let u=0;u<c.length-1;u++){const f=c[u],M=c[u+1];for(let z=0;z<n.length-1;z++)if(pk(f,M,n[z],n[z+1]))return!0}return!1}function pk(c,n,u,f){return I(c,u,f)!==I(n,u,f)&&I(c,n,u)!==I(c,n,f)}function Sx(c,n,u){const f=u*u;if(n.length===1)return c.distSqr(n[0])<f;for(let M=1;M<n.length;M++)if(T1(c,n[M-1],n[M])<f)return!0;return!1}function T1(c,n,u){const f=n.distSqr(u);if(f===0)return c.distSqr(n);const M=((c.x-n.x)*(u.x-n.x)+(c.y-n.y)*(u.y-n.y))/f;return c.distSqr(M<0?n:M>1?u:u.sub(n)._mult(M)._add(n))}function C1(c,n){let u,f,M,z=!1;for(let V=0;V<c.length;V++){u=c[V];for(let te=0,oe=u.length-1;te<u.length;oe=te++)f=u[te],M=u[oe],f.y>n.y!=M.y>n.y&&n.x<(M.x-f.x)*(n.y-f.y)/(M.y-f.y)+f.x&&(z=!z)}return z}function vu(c,n){let u=!1;for(let f=0,M=c.length-1;f<c.length;M=f++){const z=c[f],V=c[M];z.y>n.y!=V.y>n.y&&n.x<(V.x-z.x)*(n.y-z.y)/(V.y-z.y)+z.x&&(u=!u)}return u}function fk(c,n,u){const f=u[0],M=u[2];if(c.x<f.x&&n.x<f.x||c.x>M.x&&n.x>M.x||c.y<f.y&&n.y<f.y||c.y>M.y&&n.y>M.y)return!1;const z=I(c,n,u[0]);return z!==I(c,n,u[1])||z!==I(c,n,u[2])||z!==I(c,n,u[3])}function np(c,n,u){const f=n.paint.get(c).value;return f.kind==="constant"?f.value:u.programConfigurations.get(n.id).getMaxValue(c)}function Lm(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Rm(c,n,u,f,M){if(!n[0]&&!n[1])return c;const z=G.convert(n)._mult(M);u==="viewport"&&z._rotate(-f);const V=[];for(let te=0;te<c.length;te++)V.push(c[te].sub(z));return V}fi("CircleBucket",Cx,{omit:["layers"]});const mk=new $n({"circle-sort-key":new Di(Pe.layout_circle["circle-sort-key"])});var gk={paint:new $n({"circle-radius":new Di(Pe.paint_circle["circle-radius"]),"circle-color":new Di(Pe.paint_circle["circle-color"]),"circle-blur":new Di(Pe.paint_circle["circle-blur"]),"circle-opacity":new Di(Pe.paint_circle["circle-opacity"]),"circle-translate":new Si(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Si(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Si(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Si(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Pe.paint_circle["circle-stroke-opacity"])}),layout:mk},Gs=1e-6,Hs=typeof Float32Array<"u"?Float32Array:Array;function E1(){var c=new Hs(9);return Hs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function kx(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function S1(c,n,u){var f=n[0],M=n[1],z=n[2],V=n[3],te=n[4],oe=n[5],be=n[6],Le=n[7],Oe=n[8],Ge=n[9],Ye=n[10],Ze=n[11],ht=n[12],lt=n[13],bt=n[14],It=n[15],xt=u[0],Mt=u[1],Ut=u[2],Ft=u[3];return c[0]=xt*f+Mt*te+Ut*Oe+Ft*ht,c[1]=xt*M+Mt*oe+Ut*Ge+Ft*lt,c[2]=xt*z+Mt*be+Ut*Ye+Ft*bt,c[3]=xt*V+Mt*Le+Ut*Ze+Ft*It,c[4]=(xt=u[4])*f+(Mt=u[5])*te+(Ut=u[6])*Oe+(Ft=u[7])*ht,c[5]=xt*M+Mt*oe+Ut*Ge+Ft*lt,c[6]=xt*z+Mt*be+Ut*Ye+Ft*bt,c[7]=xt*V+Mt*Le+Ut*Ze+Ft*It,c[8]=(xt=u[8])*f+(Mt=u[9])*te+(Ut=u[10])*Oe+(Ft=u[11])*ht,c[9]=xt*M+Mt*oe+Ut*Ge+Ft*lt,c[10]=xt*z+Mt*be+Ut*Ye+Ft*bt,c[11]=xt*V+Mt*Le+Ut*Ze+Ft*It,c[12]=(xt=u[12])*f+(Mt=u[13])*te+(Ut=u[14])*Oe+(Ft=u[15])*ht,c[13]=xt*M+Mt*oe+Ut*Ge+Ft*lt,c[14]=xt*z+Mt*be+Ut*Ye+Ft*bt,c[15]=xt*V+Mt*Le+Ut*Ze+Ft*It,c}Math.hypot||(Math.hypot=function(){for(var c=0,n=arguments.length;n--;)c+=arguments[n]*arguments[n];return Math.sqrt(c)});var sp,yk=S1;function k1(){var c=new Hs(3);return Hs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function A1(c,n,u){var f=new Hs(3);return f[0]=c,f[1]=n,f[2]=u,f}function zm(c,n,u){var f=n[0],M=n[1],z=n[2],V=n[3];return c[0]=u[0]*f+u[4]*M+u[8]*z+u[12]*V,c[1]=u[1]*f+u[5]*M+u[9]*z+u[13]*V,c[2]=u[2]*f+u[6]*M+u[10]*z+u[14]*V,c[3]=u[3]*f+u[7]*M+u[11]*z+u[15]*V,c}function M1(){var c=new Hs(4);return Hs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function P1(c,n){const u=zm([],[c.x,c.y,0,1],n);return new G(u[0]/u[3],u[1]/u[3])}k1(),sp=new Hs(4),Hs!=Float32Array&&(sp[0]=0,sp[1]=0,sp[2]=0,sp[3]=0),k1(),A1(1,0,0),A1(0,1,0),M1(),M1(),E1(),function(){var c;c=new Hs(2),Hs!=Float32Array&&(c[0]=0,c[1]=0)}();class I1 extends Cx{}fi("HeatmapBucket",I1,{omit:["layers"]});var xk={paint:new $n({"heatmap-radius":new Di(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Si(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tp(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Si(Pe.paint_heatmap["heatmap-opacity"])})};function Ax(c,{width:n,height:u},f,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==n*u*f)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${n*u*f}`)}else M=new Uint8Array(n*u*f);return c.width=n,c.height=u,c.data=M,c}function D1(c,{width:n,height:u},f){if(n===c.width&&u===c.height)return;const M=Ax({},{width:n,height:u},f);Mx(c,M,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,n),height:Math.min(c.height,u)},f),c.width=n,c.height=u,c.data=M.data}function Mx(c,n,u,f,M,z){if(M.width===0||M.height===0)return n;if(M.width>c.width||M.height>c.height||u.x>c.width-M.width||u.y>c.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>n.width||M.height>n.height||f.x>n.width-M.width||f.y>n.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const V=c.data,te=n.data;if(V===te)throw new Error("srcData equals dstData, so image is already copied");for(let oe=0;oe<M.height;oe++){const be=((u.y+oe)*c.width+u.x)*z,Le=((f.y+oe)*n.width+f.x)*z;for(let Oe=0;Oe<M.width*z;Oe++)te[Le+Oe]=V[be+Oe]}return n}class ap{constructor(n,u){Ax(this,n,1,u)}resize(n){D1(this,n,1)}clone(){return new ap({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,f,M,z){Mx(n,u,f,M,z,1)}}class Ra{constructor(n,u){Ax(this,n,4,u)}resize(n){D1(this,n,4)}replace(n,u){u?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,f,M,z){Mx(n,u,f,M,z,4)}}function L1(c){const n={},u=c.resolution||256,f=c.clips?c.clips.length:1,M=c.image||new Ra({width:u,height:f});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(V,te,oe)=>{n[c.evaluationKey]=oe;const be=c.expression.evaluate(n);M.data[V+te+0]=Math.floor(255*be.r/be.a),M.data[V+te+1]=Math.floor(255*be.g/be.a),M.data[V+te+2]=Math.floor(255*be.b/be.a),M.data[V+te+3]=Math.floor(255*be.a)};if(c.clips)for(let V=0,te=0;V<f;++V,te+=4*u)for(let oe=0,be=0;oe<u;oe++,be+=4){const Le=oe/(u-1),{start:Oe,end:Ge}=c.clips[V];z(te,be,Oe*(1-Le)+Ge*Le)}else for(let V=0,te=0;V<u;V++,te+=4)z(0,te,V/(u-1));return M}fi("AlphaImage",ap),fi("RGBAImage",Ra);var vk={paint:new $n({"hillshade-illumination-direction":new Si(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Si(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Si(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Si(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Si(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Si(Pe.paint_hillshade["hillshade-accent-color"])})};const bk=Nn([{name:"a_pos",components:2,type:"Int16"}],4),{members:_k}=bk;var Nm={exports:{}};function Om(c,n,u){u=u||2;var f,M,z,V,te,oe,be,Le=n&&n.length,Oe=Le?n[0]*u:c.length,Ge=R1(c,0,Oe,u,!0),Ye=[];if(!Ge||Ge.next===Ge.prev)return Ye;if(Le&&(Ge=function(ht,lt,bt,It){var xt,Mt,Ut,Ft=[];for(xt=0,Mt=lt.length;xt<Mt;xt++)(Ut=R1(ht,lt[xt]*It,xt<Mt-1?lt[xt+1]*It:ht.length,It,!1))===Ut.next&&(Ut.steiner=!0),Ft.push(Mk(Ut));for(Ft.sort(Sk),xt=0;xt<Ft.length;xt++)bt=kk(Ft[xt],bt);return bt}(c,n,Ge,u)),c.length>80*u){f=z=c[0],M=V=c[1];for(var Ze=u;Ze<Oe;Ze+=u)(te=c[Ze])<f&&(f=te),(oe=c[Ze+1])<M&&(M=oe),te>z&&(z=te),oe>V&&(V=oe);be=(be=Math.max(z-f,V-M))!==0?32767/be:0}return op(Ge,Ye,u,f,M,be,0),Ye}function R1(c,n,u,f,M){var z,V;if(M===Dx(c,n,u,f)>0)for(z=n;z<u;z+=f)V=O1(z,c[z],c[z+1],V);else for(z=u-f;z>=n;z-=f)V=O1(z,c[z],c[z+1],V);return V&&jm(V,V.next)&&(cp(V),V=V.next),V}function th(c,n){if(!c)return c;n||(n=c);var u,f=c;do if(u=!1,f.steiner||!jm(f,f.next)&&Pn(f.prev,f,f.next)!==0)f=f.next;else{if(cp(f),(f=n=f.prev)===f.next)break;u=!0}while(u||f!==n);return n}function op(c,n,u,f,M,z,V){if(c){!V&&z&&function(Le,Oe,Ge,Ye){var Ze=Le;do Ze.z===0&&(Ze.z=Px(Ze.x,Ze.y,Oe,Ge,Ye)),Ze.prevZ=Ze.prev,Ze.nextZ=Ze.next,Ze=Ze.next;while(Ze!==Le);Ze.prevZ.nextZ=null,Ze.prevZ=null,function(ht){var lt,bt,It,xt,Mt,Ut,Ft,xi,Ci=1;do{for(bt=ht,ht=null,Mt=null,Ut=0;bt;){for(Ut++,It=bt,Ft=0,lt=0;lt<Ci&&(Ft++,It=It.nextZ);lt++);for(xi=Ci;Ft>0||xi>0&&It;)Ft!==0&&(xi===0||!It||bt.z<=It.z)?(xt=bt,bt=bt.nextZ,Ft--):(xt=It,It=It.nextZ,xi--),Mt?Mt.nextZ=xt:ht=xt,xt.prevZ=Mt,Mt=xt;bt=It}Mt.nextZ=null,Ci*=2}while(Ut>1)}(Ze)}(c,f,M,z);for(var te,oe,be=c;c.prev!==c.next;)if(te=c.prev,oe=c.next,z?Tk(c,f,M,z):wk(c))n.push(te.i/u|0),n.push(c.i/u|0),n.push(oe.i/u|0),cp(c),c=oe.next,be=oe.next;else if((c=oe)===be){V?V===1?op(c=Ck(th(c),n,u),n,u,f,M,z,2):V===2&&Ek(c,n,u,f,M,z):op(th(c),n,u,f,M,z,1);break}}}function wk(c){var n=c.prev,u=c,f=c.next;if(Pn(n,u,f)>=0)return!1;for(var M=n.x,z=u.x,V=f.x,te=n.y,oe=u.y,be=f.y,Le=M<z?M<V?M:V:z<V?z:V,Oe=te<oe?te<be?te:be:oe<be?oe:be,Ge=M>z?M>V?M:V:z>V?z:V,Ye=te>oe?te>be?te:be:oe>be?oe:be,Ze=f.next;Ze!==n;){if(Ze.x>=Le&&Ze.x<=Ge&&Ze.y>=Oe&&Ze.y<=Ye&&bu(M,te,z,oe,V,be,Ze.x,Ze.y)&&Pn(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.next}return!0}function Tk(c,n,u,f){var M=c.prev,z=c,V=c.next;if(Pn(M,z,V)>=0)return!1;for(var te=M.x,oe=z.x,be=V.x,Le=M.y,Oe=z.y,Ge=V.y,Ye=te<oe?te<be?te:be:oe<be?oe:be,Ze=Le<Oe?Le<Ge?Le:Ge:Oe<Ge?Oe:Ge,ht=te>oe?te>be?te:be:oe>be?oe:be,lt=Le>Oe?Le>Ge?Le:Ge:Oe>Ge?Oe:Ge,bt=Px(Ye,Ze,n,u,f),It=Px(ht,lt,n,u,f),xt=c.prevZ,Mt=c.nextZ;xt&&xt.z>=bt&&Mt&&Mt.z<=It;){if(xt.x>=Ye&&xt.x<=ht&&xt.y>=Ze&&xt.y<=lt&&xt!==M&&xt!==V&&bu(te,Le,oe,Oe,be,Ge,xt.x,xt.y)&&Pn(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Mt.x>=Ye&&Mt.x<=ht&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==M&&Mt!==V&&bu(te,Le,oe,Oe,be,Ge,Mt.x,Mt.y)&&Pn(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;xt&&xt.z>=bt;){if(xt.x>=Ye&&xt.x<=ht&&xt.y>=Ze&&xt.y<=lt&&xt!==M&&xt!==V&&bu(te,Le,oe,Oe,be,Ge,xt.x,xt.y)&&Pn(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Mt&&Mt.z<=It;){if(Mt.x>=Ye&&Mt.x<=ht&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==M&&Mt!==V&&bu(te,Le,oe,Oe,be,Ge,Mt.x,Mt.y)&&Pn(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function Ck(c,n,u){var f=c;do{var M=f.prev,z=f.next.next;!jm(M,z)&&z1(M,f,f.next,z)&&lp(M,z)&&lp(z,M)&&(n.push(M.i/u|0),n.push(f.i/u|0),n.push(z.i/u|0),cp(f),cp(f.next),f=c=z),f=f.next}while(f!==c);return th(f)}function Ek(c,n,u,f,M,z){var V=c;do{for(var te=V.next.next;te!==V.prev;){if(V.i!==te.i&&Pk(V,te)){var oe=N1(V,te);return V=th(V,V.next),oe=th(oe,oe.next),op(V,n,u,f,M,z,0),void op(oe,n,u,f,M,z,0)}te=te.next}V=V.next}while(V!==c)}function Sk(c,n){return c.x-n.x}function kk(c,n){var u=function(M,z){var V,te=z,oe=M.x,be=M.y,Le=-1/0;do{if(be<=te.y&&be>=te.next.y&&te.next.y!==te.y){var Oe=te.x+(be-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(Oe<=oe&&Oe>Le&&(Le=Oe,V=te.x<te.next.x?te:te.next,Oe===oe))return V}te=te.next}while(te!==z);if(!V)return null;var Ge,Ye=V,Ze=V.x,ht=V.y,lt=1/0;te=V;do oe>=te.x&&te.x>=Ze&&oe!==te.x&&bu(be<ht?oe:Le,be,Ze,ht,be<ht?Le:oe,be,te.x,te.y)&&(Ge=Math.abs(be-te.y)/(oe-te.x),lp(te,M)&&(Ge<lt||Ge===lt&&(te.x>V.x||te.x===V.x&&Ak(V,te)))&&(V=te,lt=Ge)),te=te.next;while(te!==Ye);return V}(c,n);if(!u)return n;var f=N1(u,c);return th(f,f.next),th(u,u.next)}function Ak(c,n){return Pn(c.prev,c,n.prev)<0&&Pn(n.next,c,c.next)<0}function Px(c,n,u,f,M){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*M|0)|c<<8))|c<<4))|c<<2))|c<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*M|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Mk(c){var n=c,u=c;do(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next;while(n!==c);return u}function bu(c,n,u,f,M,z,V,te){return(M-V)*(n-te)>=(c-V)*(z-te)&&(c-V)*(f-te)>=(u-V)*(n-te)&&(u-V)*(z-te)>=(M-V)*(f-te)}function Pk(c,n){return c.next.i!==n.i&&c.prev.i!==n.i&&!function(u,f){var M=u;do{if(M.i!==u.i&&M.next.i!==u.i&&M.i!==f.i&&M.next.i!==f.i&&z1(M,M.next,u,f))return!0;M=M.next}while(M!==u);return!1}(c,n)&&(lp(c,n)&&lp(n,c)&&function(u,f){var M=u,z=!1,V=(u.x+f.x)/2,te=(u.y+f.y)/2;do M.y>te!=M.next.y>te&&M.next.y!==M.y&&V<(M.next.x-M.x)*(te-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==u);return z}(c,n)&&(Pn(c.prev,c,n.prev)||Pn(c,n.prev,n))||jm(c,n)&&Pn(c.prev,c,c.next)>0&&Pn(n.prev,n,n.next)>0)}function Pn(c,n,u){return(n.y-c.y)*(u.x-n.x)-(n.x-c.x)*(u.y-n.y)}function jm(c,n){return c.x===n.x&&c.y===n.y}function z1(c,n,u,f){var M=Fm(Pn(c,n,u)),z=Fm(Pn(c,n,f)),V=Fm(Pn(u,f,c)),te=Fm(Pn(u,f,n));return M!==z&&V!==te||!(M!==0||!Bm(c,u,n))||!(z!==0||!Bm(c,f,n))||!(V!==0||!Bm(u,c,f))||!(te!==0||!Bm(u,n,f))}function Bm(c,n,u){return n.x<=Math.max(c.x,u.x)&&n.x>=Math.min(c.x,u.x)&&n.y<=Math.max(c.y,u.y)&&n.y>=Math.min(c.y,u.y)}function Fm(c){return c>0?1:c<0?-1:0}function lp(c,n){return Pn(c.prev,c,c.next)<0?Pn(c,n,c.next)>=0&&Pn(c,c.prev,n)>=0:Pn(c,n,c.prev)<0||Pn(c,c.next,n)<0}function N1(c,n){var u=new Ix(c.i,c.x,c.y),f=new Ix(n.i,n.x,n.y),M=c.next,z=n.prev;return c.next=n,n.prev=c,u.next=M,M.prev=u,f.next=u,u.prev=f,z.next=f,f.prev=z,f}function O1(c,n,u,f){var M=new Ix(c,n,u);return f?(M.next=f.next,M.prev=f,f.next.prev=M,f.next=M):(M.prev=M,M.next=M),M}function cp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Ix(c,n,u){this.i=c,this.x=n,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dx(c,n,u,f){for(var M=0,z=n,V=u-f;z<u;z+=f)M+=(c[V]-c[z])*(c[z+1]+c[V+1]),V=z;return M}function Ik(c,n,u,f,M){j1(c,n,u,f||c.length-1,M)}function j1(c,n,u,f,M){for(;f>u;){if(f-u>600){var z=f-u+1,V=n-u+1,te=Math.log(z),oe=.5*Math.exp(2*te/3),be=.5*Math.sqrt(te*oe*(z-oe)/z)*(V-z/2<0?-1:1);j1(c,n,Math.max(u,Math.floor(n-V*oe/z+be)),Math.min(f,Math.floor(n+(z-V)*oe/z+be)),M)}var Le=c[n],Oe=u,Ge=f;for(hp(c,u,n),M(c[f],Le)>0&&hp(c,u,f);Oe<Ge;){for(hp(c,Oe,Ge),Oe++,Ge--;M(c[Oe],Le)<0;)Oe++;for(;M(c[Ge],Le)>0;)Ge--}M(c[u],Le)===0?hp(c,u,Ge):hp(c,++Ge,f),Ge<=n&&(u=Ge+1),n<=Ge&&(f=Ge-1)}}function hp(c,n,u){var f=c[n];c[n]=c[u],c[u]=f}function Lx(c,n){const u=c.length;if(u<=1)return[c];const f=[];let M,z;for(let V=0;V<u;V++){const te=N(c[V]);te!==0&&(c[V].area=Math.abs(te),z===void 0&&(z=te<0),z===te<0?(M&&f.push(M),M=[c[V]]):M.push(c[V]))}if(M&&f.push(M),n>1)for(let V=0;V<f.length;V++)f[V].length<=n||(Ik(f[V],n,1,f[V].length-1,Dk),f[V]=f[V].slice(0,n));return f}function Dk(c,n){return n.area-c.area}function Rx(c,n,u){const f=u.patternDependencies;let M=!1;for(const z of n){const V=z.paint.get(`${c}-pattern`);V.isConstant()||(M=!0);const te=V.constantOr(null);te&&(M=!0,f[te.to]=!0,f[te.from]=!0)}return M}function zx(c,n,u,f,M){const z=M.patternDependencies;for(const V of n){const te=V.paint.get(`${c}-pattern`).value;if(te.kind!=="constant"){let oe=te.evaluate({zoom:f-1},u,{},M.availableImages),be=te.evaluate({zoom:f},u,{},M.availableImages),Le=te.evaluate({zoom:f+1},u,{},M.availableImages);oe=oe&&oe.name?oe.name:oe,be=be&&be.name?be.name:be,Le=Le&&Le.name?Le.name:Le,z[oe]=!0,z[be]=!0,z[Le]=!0,u.patterns[V.id]={min:oe,mid:be,max:Le}}}return u}Nm.exports=Om,Nm.exports.default=Om,Om.deviation=function(c,n,u,f){var M=n&&n.length,z=Math.abs(Dx(c,0,M?n[0]*u:c.length,u));if(M)for(var V=0,te=n.length;V<te;V++)z-=Math.abs(Dx(c,n[V]*u,V<te-1?n[V+1]*u:c.length,u));var oe=0;for(V=0;V<f.length;V+=3){var be=f[V]*u,Le=f[V+1]*u,Oe=f[V+2]*u;oe+=Math.abs((c[be]-c[Oe])*(c[Le+1]-c[be+1])-(c[be]-c[Le])*(c[Oe+1]-c[be+1]))}return z===0&&oe===0?0:Math.abs((oe-z)/z)},Om.flatten=function(c){for(var n=c[0][0].length,u={vertices:[],holes:[],dimensions:n},f=0,M=0;M<c.length;M++){for(var z=0;z<c[M].length;z++)for(var V=0;V<n;V++)u.vertices.push(c[M][z][V]);M>0&&u.holes.push(f+=c[M-1].length)}return u};class Nx{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jr,this.indexArray=new as,this.indexArray2=new Da,this.programConfigurations=new Qc(n.layers,n.zoom),this.segments=new Cr,this.segments2=new Cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,f){this.hasPattern=Rx("fill",this.layers,u);const M=this.layers[0].layout.get("fill-sort-key"),z=!M.isConstant(),V=[];for(const{feature:te,id:oe,index:be,sourceLayerIndex:Le}of n){const Oe=this.layers[0]._featureFilter.needGeometry,Ge=eh(te,Oe);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),Ge,f))continue;const Ye=z?M.evaluate(Ge,{},f,u.availableImages):void 0,Ze={id:oe,properties:te.properties,type:te.type,sourceLayerIndex:Le,index:be,geometry:Oe?Ge.geometry:Jc(te),patterns:{},sortKey:Ye};V.push(Ze)}z&&V.sort((te,oe)=>te.sortKey-oe.sortKey);for(const te of V){const{geometry:oe,index:be,sourceLayerIndex:Le}=te;if(this.hasPattern){const Oe=zx("fill",this.layers,te,this.zoom,u);this.patternFeatures.push(Oe)}else this.addFeature(te,oe,be,f,{});u.featureIndex.insert(n[be].feature,oe,be,Le,this.index)}}update(n,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,f)}addFeatures(n,u,f){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_k),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,u,f,M,z){for(const V of Lx(u,500)){let te=0;for(const Ye of V)te+=Ye.length;const oe=this.segments.prepareSegment(te,this.layoutVertexArray,this.indexArray),be=oe.vertexLength,Le=[],Oe=[];for(const Ye of V){if(Ye.length===0)continue;Ye!==V[0]&&Oe.push(Le.length/2);const Ze=this.segments2.prepareSegment(Ye.length,this.layoutVertexArray,this.indexArray2),ht=Ze.vertexLength;this.layoutVertexArray.emplaceBack(Ye[0].x,Ye[0].y),this.indexArray2.emplaceBack(ht+Ye.length-1,ht),Le.push(Ye[0].x),Le.push(Ye[0].y);for(let lt=1;lt<Ye.length;lt++)this.layoutVertexArray.emplaceBack(Ye[lt].x,Ye[lt].y),this.indexArray2.emplaceBack(ht+lt-1,ht+lt),Le.push(Ye[lt].x),Le.push(Ye[lt].y);Ze.vertexLength+=Ye.length,Ze.primitiveLength+=Ye.length}const Ge=Nm.exports(Le,Oe);for(let Ye=0;Ye<Ge.length;Ye+=3)this.indexArray.emplaceBack(be+Ge[Ye],be+Ge[Ye+1],be+Ge[Ye+2]);oe.vertexLength+=te,oe.primitiveLength+=Ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,z,M)}}fi("FillBucket",Nx,{omit:["layers","patternFeatures"]});const Lk=new $n({"fill-sort-key":new Di(Pe.layout_fill["fill-sort-key"])});var Rk={paint:new $n({"fill-antialias":new Si(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Di(Pe.paint_fill["fill-opacity"]),"fill-color":new Di(Pe.paint_fill["fill-color"]),"fill-outline-color":new Di(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Si(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Si(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new qc(Pe.paint_fill["fill-pattern"])}),layout:Lk};const zk=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Nk=Nn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ok}=zk;var ql={},jk=G,B1=_u;function _u(c,n,u,f,M){this.properties={},this.extent=u,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=M,c.readFields(Bk,this,n)}function Bk(c,n,u){c==1?n.id=u.readVarint():c==2?function(f,M){for(var z=f.readVarint()+f.pos;f.pos<z;){var V=M._keys[f.readVarint()],te=M._values[f.readVarint()];M.properties[V]=te}}(u,n):c==3?n.type=u.readVarint():c==4&&(n._geometry=u.pos)}function Fk(c){for(var n,u,f=0,M=0,z=c.length,V=z-1;M<z;V=M++)f+=((u=c[V]).x-(n=c[M]).x)*(n.y+u.y);return f}_u.types=["Unknown","Point","LineString","Polygon"],_u.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var n,u=c.readVarint()+c.pos,f=1,M=0,z=0,V=0,te=[];c.pos<u;){if(M<=0){var oe=c.readVarint();f=7&oe,M=oe>>3}if(M--,f===1||f===2)z+=c.readSVarint(),V+=c.readSVarint(),f===1&&(n&&te.push(n),n=[]),n.push(new jk(z,V));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&te.push(n),te},_u.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var n=c.readVarint()+c.pos,u=1,f=0,M=0,z=0,V=1/0,te=-1/0,oe=1/0,be=-1/0;c.pos<n;){if(f<=0){var Le=c.readVarint();u=7&Le,f=Le>>3}if(f--,u===1||u===2)(M+=c.readSVarint())<V&&(V=M),M>te&&(te=M),(z+=c.readSVarint())<oe&&(oe=z),z>be&&(be=z);else if(u!==7)throw new Error("unknown command "+u)}return[V,oe,te,be]},_u.prototype.toGeoJSON=function(c,n,u){var f,M,z=this.extent*Math.pow(2,u),V=this.extent*c,te=this.extent*n,oe=this.loadGeometry(),be=_u.types[this.type];function Le(Ye){for(var Ze=0;Ze<Ye.length;Ze++){var ht=Ye[Ze];Ye[Ze]=[360*(ht.x+V)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ht.y+te)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(f=0;f<oe.length;f++)Oe[f]=oe[f][0];Le(oe=Oe);break;case 2:for(f=0;f<oe.length;f++)Le(oe[f]);break;case 3:for(oe=function(Ye){var Ze=Ye.length;if(Ze<=1)return[Ye];for(var ht,lt,bt=[],It=0;It<Ze;It++){var xt=Fk(Ye[It]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ht&&bt.push(ht),ht=[Ye[It]]):ht.push(Ye[It]))}return ht&&bt.push(ht),bt}(oe),f=0;f<oe.length;f++)for(M=0;M<oe[f].length;M++)Le(oe[f][M])}oe.length===1?oe=oe[0]:be="Multi"+be;var Ge={type:"Feature",geometry:{type:be,coordinates:oe},properties:this.properties};return"id"in this&&(Ge.id=this.id),Ge};var Uk=B1,F1=U1;function U1(c,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields($k,this,n),this.length=this._features.length}function $k(c,n,u){c===15?n.version=u.readVarint():c===1?n.name=u.readString():c===5?n.extent=u.readVarint():c===2?n._features.push(u.pos):c===3?n._keys.push(u.readString()):c===4&&n._values.push(function(f){for(var M=null,z=f.readVarint()+f.pos;f.pos<z;){var V=f.readVarint()>>3;M=V===1?f.readString():V===2?f.readFloat():V===3?f.readDouble():V===4?f.readVarint64():V===5?f.readVarint():V===6?f.readSVarint():V===7?f.readBoolean():null}return M}(u))}U1.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var n=this._pbf.readVarint()+this._pbf.pos;return new Uk(this._pbf,n,this.extent,this._keys,this._values)};var Vk=F1;function Gk(c,n,u){if(c===3){var f=new Vk(u,u.readVarint()+u.pos);f.length&&(n[f.name]=f)}}ql.VectorTile=function(c,n){this.layers=c.readFields(Gk,{},n)},ql.VectorTileFeature=B1,ql.VectorTileLayer=F1;const Hk=ql.VectorTileFeature.types,Ox=Math.pow(2,13);function up(c,n,u,f,M,z,V,te){c.emplaceBack(n,u,2*Math.floor(f*Ox)+V,M*Ox*2,z*Ox*2,Math.round(te))}class jx{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.centroidVertexArray=new or,this.indexArray=new as,this.programConfigurations=new Qc(n.layers,n.zoom),this.segments=new Cr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,f){this.features=[],this.hasPattern=Rx("fill-extrusion",this.layers,u);for(const{feature:M,id:z,index:V,sourceLayerIndex:te}of n){const oe=this.layers[0]._featureFilter.needGeometry,be=eh(M,oe);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),be,f))continue;const Le={id:z,sourceLayerIndex:te,index:V,geometry:oe?be.geometry:Jc(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(zx("fill-extrusion",this.layers,Le,this.zoom,u)):this.addFeature(Le,Le.geometry,V,f,{}),u.featureIndex.insert(M,Le.geometry,V,te,this.index,!0)}}addFeatures(n,u,f){for(const M of this.features){const{geometry:z}=M;this.addFeature(M,z,M.index,u,f)}}update(n,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ok),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Nk.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,u,f,M,z){const V={x:0,y:0,vertexCount:0};for(const te of Lx(u,500)){let oe=0;for(const Ze of te)oe+=Ze.length;let be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ze of te){if(Ze.length===0||qk(Ze))continue;let ht=0;for(let lt=0;lt<Ze.length;lt++){const bt=Ze[lt];if(lt>=1){const It=Ze[lt-1];if(!Wk(bt,It)){be.vertexLength+4>Cr.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=bt.sub(It)._perp()._unit(),Mt=It.dist(bt);ht+Mt>32768&&(ht=0),up(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,0,ht),up(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,1,ht),V.x+=2*bt.x,V.y+=2*bt.y,V.vertexCount+=2,ht+=Mt,up(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,0,ht),up(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,1,ht),V.x+=2*It.x,V.y+=2*It.y,V.vertexCount+=2;const Ut=be.vertexLength;this.indexArray.emplaceBack(Ut,Ut+2,Ut+1),this.indexArray.emplaceBack(Ut+1,Ut+2,Ut+3),be.vertexLength+=4,be.primitiveLength+=2}}}}if(be.vertexLength+oe>Cr.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray)),Hk[n.type]!=="Polygon")continue;const Le=[],Oe=[],Ge=be.vertexLength;for(const Ze of te)if(Ze.length!==0){Ze!==te[0]&&Oe.push(Le.length/2);for(let ht=0;ht<Ze.length;ht++){const lt=Ze[ht];up(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),V.x+=lt.x,V.y+=lt.y,V.vertexCount+=1,Le.push(lt.x),Le.push(lt.y)}}const Ye=Nm.exports(Le,Oe);for(let Ze=0;Ze<Ye.length;Ze+=3)this.indexArray.emplaceBack(Ge+Ye[Ze],Ge+Ye[Ze+2],Ge+Ye[Ze+1]);be.primitiveLength+=Ye.length/3,be.vertexLength+=oe}for(let te=0;te<V.vertexCount;te++)this.centroidVertexArray.emplaceBack(Math.floor(V.x/V.vertexCount),Math.floor(V.y/V.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,z,M)}}function Wk(c,n){return c.x===n.x&&(c.x<0||c.x>Vn)||c.y===n.y&&(c.y<0||c.y>Vn)}function qk(c){return c.every(n=>n.x<0)||c.every(n=>n.x>Vn)||c.every(n=>n.y<0)||c.every(n=>n.y>Vn)}fi("FillExtrusionBucket",jx,{omit:["layers","features"]});var Yk={paint:new $n({"fill-extrusion-opacity":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function dp(c,n){return c.x*n.x+c.y*n.y}function $1(c,n){if(c.length===1){let u=0;const f=n[u++];let M;for(;!M||f.equals(M);)if(M=n[u++],!M)return 1/0;for(;u<n.length;u++){const z=n[u],V=c[0],te=M.sub(f),oe=z.sub(f),be=V.sub(f),Le=dp(te,te),Oe=dp(te,oe),Ge=dp(oe,oe),Ye=dp(be,te),Ze=dp(be,oe),ht=Le*Ge-Oe*Oe,lt=(Ge*Ye-Oe*Ze)/ht,bt=(Le*Ze-Oe*Ye)/ht,It=f.z*(1-lt-bt)+M.z*lt+z.z*bt;if(isFinite(It))return It}return 1/0}{let u=1/0;for(const f of n)u=Math.min(u,f.z);return u}}const Zk=Nn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Xk}=Zk,Kk=Nn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qk}=Kk,Jk=ql.VectorTileFeature.types,eA=Math.cos(Math.PI/180*37.5),V1=Math.pow(2,14)/.5;class Bx{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new xr,this.layoutVertexArray2=new br,this.indexArray=new as,this.programConfigurations=new Qc(n.layers,n.zoom),this.segments=new Cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,f){this.hasPattern=Rx("line",this.layers,u);const M=this.layers[0].layout.get("line-sort-key"),z=!M.isConstant(),V=[];for(const{feature:te,id:oe,index:be,sourceLayerIndex:Le}of n){const Oe=this.layers[0]._featureFilter.needGeometry,Ge=eh(te,Oe);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),Ge,f))continue;const Ye=z?M.evaluate(Ge,{},f):void 0,Ze={id:oe,properties:te.properties,type:te.type,sourceLayerIndex:Le,index:be,geometry:Oe?Ge.geometry:Jc(te),patterns:{},sortKey:Ye};V.push(Ze)}z&&V.sort((te,oe)=>te.sortKey-oe.sortKey);for(const te of V){const{geometry:oe,index:be,sourceLayerIndex:Le}=te;if(this.hasPattern){const Oe=zx("line",this.layers,te,this.zoom,u);this.patternFeatures.push(Oe)}else this.addFeature(te,oe,be,f,{});u.featureIndex.insert(n[be].feature,oe,be,Le,this.index)}}update(n,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,f)}addFeatures(n,u,f){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Qk)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xk),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,u,f,M,z){const V=this.layers[0].layout,te=V.get("line-join").evaluate(n,{}),oe=V.get("line-cap"),be=V.get("line-miter-limit"),Le=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Oe of u)this.addLine(Oe,n,te,oe,be,Le);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,z,M)}addLine(n,u,f,M,z,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let bt=0;bt<n.length-1;bt++)this.totalDistance+=n[bt].dist(n[bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const te=Jk[u.type]==="Polygon";let oe=n.length;for(;oe>=2&&n[oe-1].equals(n[oe-2]);)oe--;let be=0;for(;be<oe-1&&n[be].equals(n[be+1]);)be++;if(oe<(te?3:2))return;f==="bevel"&&(z=1.05);const Le=this.overscaling<=16?122880/(512*this.overscaling):0,Oe=this.segments.prepareSegment(10*oe,this.layoutVertexArray,this.indexArray);let Ge,Ye,Ze,ht,lt;this.e1=this.e2=-1,te&&(Ge=n[oe-2],lt=n[be].sub(Ge)._unit()._perp());for(let bt=be;bt<oe;bt++){if(Ze=bt===oe-1?te?n[be+1]:void 0:n[bt+1],Ze&&n[bt].equals(Ze))continue;lt&&(ht=lt),Ge&&(Ye=Ge),Ge=n[bt],lt=Ze?Ze.sub(Ge)._unit()._perp():ht,ht=ht||lt;let It=ht.add(lt);It.x===0&&It.y===0||It._unit();const xt=ht.x*lt.x+ht.y*lt.y,Mt=It.x*lt.x+It.y*lt.y,Ut=Mt!==0?1/Mt:1/0,Ft=2*Math.sqrt(2-2*Mt),xi=Mt<eA&&Ye&&Ze,Ci=ht.x*lt.y-ht.y*lt.x>0;if(xi&&bt>be){const Zt=Ge.dist(Ye);if(Zt>2*Le){const ri=Ge.sub(Ge.sub(Ye)._mult(Le/Zt)._round());this.updateDistance(Ye,ri),this.addCurrentVertex(ri,ht,0,0,Oe),Ye=ri}}const ii=Ye&&Ze;let Kt=ii?f:te?"butt":M;if(ii&&Kt==="round"&&(Ut<V?Kt="miter":Ut<=2&&(Kt="fakeround")),Kt==="miter"&&Ut>z&&(Kt="bevel"),Kt==="bevel"&&(Ut>2&&(Kt="flipbevel"),Ut<z&&(Kt="miter")),Ye&&this.updateDistance(Ye,Ge),Kt==="miter")It._mult(Ut),this.addCurrentVertex(Ge,It,0,0,Oe);else if(Kt==="flipbevel"){if(Ut>100)It=lt.mult(-1);else{const Zt=Ut*ht.add(lt).mag()/ht.sub(lt).mag();It._perp()._mult(Zt*(Ci?-1:1))}this.addCurrentVertex(Ge,It,0,0,Oe),this.addCurrentVertex(Ge,It.mult(-1),0,0,Oe)}else if(Kt==="bevel"||Kt==="fakeround"){const Zt=-Math.sqrt(Ut*Ut-1),ri=Ci?Zt:0,ei=Ci?0:Zt;if(Ye&&this.addCurrentVertex(Ge,ht,ri,ei,Oe),Kt==="fakeround"){const Vt=Math.round(180*Ft/Math.PI/20);for(let Mi=1;Mi<Vt;Mi++){let ki=Mi/Vt;if(ki!==.5){const rn=ki-.5;ki+=ki*rn*(ki-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*rn*rn+(.848013+xt*(.215638*xt-1.06021)))}const lr=lt.sub(ht)._mult(ki)._add(ht)._unit()._mult(Ci?-1:1);this.addHalfVertex(Ge,lr.x,lr.y,!1,Ci,0,Oe)}}Ze&&this.addCurrentVertex(Ge,lt,-ri,-ei,Oe)}else if(Kt==="butt")this.addCurrentVertex(Ge,It,0,0,Oe);else if(Kt==="square"){const Zt=Ye?1:-1;this.addCurrentVertex(Ge,It,Zt,Zt,Oe)}else Kt==="round"&&(Ye&&(this.addCurrentVertex(Ge,ht,0,0,Oe),this.addCurrentVertex(Ge,ht,1,1,Oe,!0)),Ze&&(this.addCurrentVertex(Ge,lt,-1,-1,Oe,!0),this.addCurrentVertex(Ge,lt,0,0,Oe)));if(xi&&bt<oe-1){const Zt=Ge.dist(Ze);if(Zt>2*Le){const ri=Ge.add(Ze.sub(Ge)._mult(Le/Zt)._round());this.updateDistance(Ge,ri),this.addCurrentVertex(ri,lt,0,0,Oe),Ge=ri}}}}addCurrentVertex(n,u,f,M,z,V=!1){const te=u.y*M-u.x,oe=-u.y-u.x*M;this.addHalfVertex(n,u.x+u.y*f,u.y-u.x*f,V,!1,f,z),this.addHalfVertex(n,te,oe,V,!0,-M,z),this.distance>V1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,u,f,M,z,V))}addHalfVertex({x:n,y:u},f,M,z,V,te,oe){const be=.5*(this.lineClips?this.scaledDistance*(V1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(z?1:0),(u<<1)+(V?1:0),Math.round(63*f)+128,Math.round(63*M)+128,1+(te===0?0:te<0?-1:1)|(63&be)<<2,be>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Le=oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Le),oe.primitiveLength++),V?this.e2=Le:this.e1=Le}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,u){this.distance+=n.dist(u),this.updateScaledDistance()}}fi("LineBucket",Bx,{omit:["layers","patternFeatures"]});const tA=new $n({"line-cap":new Si(Pe.layout_line["line-cap"]),"line-join":new Di(Pe.layout_line["line-join"]),"line-miter-limit":new Si(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Si(Pe.layout_line["line-round-limit"]),"line-sort-key":new Di(Pe.layout_line["line-sort-key"])});var G1={paint:new $n({"line-opacity":new Di(Pe.paint_line["line-opacity"]),"line-color":new Di(Pe.paint_line["line-color"]),"line-translate":new Si(Pe.paint_line["line-translate"]),"line-translate-anchor":new Si(Pe.paint_line["line-translate-anchor"]),"line-width":new Di(Pe.paint_line["line-width"]),"line-gap-width":new Di(Pe.paint_line["line-gap-width"]),"line-offset":new Di(Pe.paint_line["line-offset"]),"line-blur":new Di(Pe.paint_line["line-blur"]),"line-dasharray":new Yc(Pe.paint_line["line-dasharray"]),"line-pattern":new qc(Pe.paint_line["line-pattern"]),"line-gradient":new tp(Pe.paint_line["line-gradient"])}),layout:tA};const H1=new class extends Di{possiblyEvaluate(c,n){return n=new on(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(c,n)}evaluate(c,n,u,f){return n=b({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(c,n,u,f)}}(G1.paint.properties["line-width"].specification);function W1(c,n){return n>0?n+2*c:c}H1.useIntegerZoom=!0;const iA=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rA=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nA=Nn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const q1=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sA=Nn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function aA(c,n,u){return c.sections.forEach(f=>{f.text=function(M,z,V){const te=z.layout.get("text-transform").evaluate(V,{});return te==="uppercase"?M=M.toLocaleUpperCase():te==="lowercase"&&(M=M.toLocaleLowerCase()),va.applyArabicShaping&&(M=va.applyArabicShaping(M)),M}(f.text,n,u)}),c}Nn([{name:"triangle",components:3,type:"Uint16"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const pp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var os=24,Fx=Vr,Y1=function(c,n,u,f,M){var z,V,te=8*M-f-1,oe=(1<<te)-1,be=oe>>1,Le=-7,Oe=M-1,Ge=-1,Ye=c[n+Oe];for(Oe+=Ge,z=Ye&(1<<-Le)-1,Ye>>=-Le,Le+=te;Le>0;z=256*z+c[n+Oe],Oe+=Ge,Le-=8);for(V=z&(1<<-Le)-1,z>>=-Le,Le+=f;Le>0;V=256*V+c[n+Oe],Oe+=Ge,Le-=8);if(z===0)z=1-be;else{if(z===oe)return V?NaN:1/0*(Ye?-1:1);V+=Math.pow(2,f),z-=be}return(Ye?-1:1)*V*Math.pow(2,z-f)},Z1=function(c,n,u,f,M,z){var V,te,oe,be=8*z-M-1,Le=(1<<be)-1,Oe=Le>>1,Ge=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ye=0,Ze=1,ht=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(te=isNaN(n)?1:0,V=Le):(V=Math.floor(Math.log(n)/Math.LN2),n*(oe=Math.pow(2,-V))<1&&(V--,oe*=2),(n+=V+Oe>=1?Ge/oe:Ge*Math.pow(2,1-Oe))*oe>=2&&(V++,oe/=2),V+Oe>=Le?(te=0,V=Le):V+Oe>=1?(te=(n*oe-1)*Math.pow(2,M),V+=Oe):(te=n*Math.pow(2,Oe-1)*Math.pow(2,M),V=0));M>=8;c[u+Ye]=255&te,Ye+=Ze,te/=256,M-=8);for(V=V<<M|te,be+=M;be>0;c[u+Ye]=255&V,Ye+=Ze,V/=256,be-=8);c[u+Ye-Ze]|=128*ht};function Vr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Yl,Ux=4294967296,X1=1/Ux,K1=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function hl(c){return c.type===Vr.Bytes?c.readVarint()+c.pos:c.pos+1}function wu(c,n,u){return u?4294967296*n+(c>>>0):4294967296*(n>>>0)+(c>>>0)}function Q1(c,n,u){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));u.realloc(f);for(var M=u.pos-1;M>=c;M--)u.buf[M+f]=u.buf[M]}function oA(c,n){for(var u=0;u<c.length;u++)n.writeVarint(c[u])}function lA(c,n){for(var u=0;u<c.length;u++)n.writeSVarint(c[u])}function cA(c,n){for(var u=0;u<c.length;u++)n.writeFloat(c[u])}function hA(c,n){for(var u=0;u<c.length;u++)n.writeDouble(c[u])}function uA(c,n){for(var u=0;u<c.length;u++)n.writeBoolean(c[u])}function dA(c,n){for(var u=0;u<c.length;u++)n.writeFixed32(c[u])}function pA(c,n){for(var u=0;u<c.length;u++)n.writeSFixed32(c[u])}function fA(c,n){for(var u=0;u<c.length;u++)n.writeFixed64(c[u])}function mA(c,n){for(var u=0;u<c.length;u++)n.writeSFixed64(c[u])}function Um(c,n){return(c[n]|c[n+1]<<8|c[n+2]<<16)+16777216*c[n+3]}function Tu(c,n,u){c[u]=n,c[u+1]=n>>>8,c[u+2]=n>>>16,c[u+3]=n>>>24}function J1(c,n){return(c[n]|c[n+1]<<8|c[n+2]<<16)+(c[n+3]<<24)}function gA(c,n,u){c===1&&u.readMessage(yA,n)}function yA(c,n,u){if(c===3){const{id:f,bitmap:M,width:z,height:V,left:te,top:oe,advance:be}=u.readMessage(xA,{});n.push({id:f,bitmap:new ap({width:z+6,height:V+6},M),metrics:{width:z,height:V,left:te,top:oe,advance:be}})}}function xA(c,n,u){c===1?n.id=u.readVarint():c===2?n.bitmap=u.readBytes():c===3?n.width=u.readVarint():c===4?n.height=u.readVarint():c===5?n.left=u.readSVarint():c===6?n.top=u.readSVarint():c===7&&(n.advance=u.readVarint())}function e_(c){let n=0,u=0;for(const V of c)n+=V.w*V.h,u=Math.max(u,V.w);c.sort((V,te)=>te.h-V.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),u),h:1/0}];let M=0,z=0;for(const V of c)for(let te=f.length-1;te>=0;te--){const oe=f[te];if(!(V.w>oe.w||V.h>oe.h)){if(V.x=oe.x,V.y=oe.y,z=Math.max(z,V.y+V.h),M=Math.max(M,V.x+V.w),V.w===oe.w&&V.h===oe.h){const be=f.pop();te<f.length&&(f[te]=be)}else V.h===oe.h?(oe.x+=V.w,oe.w-=V.w):V.w===oe.w?(oe.y+=V.h,oe.h-=V.h):(f.push({x:oe.x+V.w,y:oe.y,w:oe.w-V.w,h:V.h}),oe.y+=V.h,oe.h-=V.h);break}}return{w:M,h:z,fill:n/(M*z)||0}}Vr.prototype={destroy:function(){this.buf=null},readFields:function(c,n,u){for(u=u||this.length;this.pos<u;){var f=this.readVarint(),M=f>>3,z=this.pos;this.type=7&f,c(M,n,this),this.pos===z&&this.skip(f)}return n},readMessage:function(c,n){return this.readFields(c,n,this.readVarint()+this.pos)},readFixed32:function(){var c=Um(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=J1(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Um(this.buf,this.pos)+Um(this.buf,this.pos+4)*Ux;return this.pos+=8,c},readSFixed64:function(){var c=Um(this.buf,this.pos)+J1(this.buf,this.pos+4)*Ux;return this.pos+=8,c},readFloat:function(){var c=Y1(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Y1(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var n,u,f=this.buf;return n=127&(u=f[this.pos++]),u<128?n:(n|=(127&(u=f[this.pos++]))<<7,u<128?n:(n|=(127&(u=f[this.pos++]))<<14,u<128?n:(n|=(127&(u=f[this.pos++]))<<21,u<128?n:function(M,z,V){var te,oe,be=V.buf;if(te=(112&(oe=be[V.pos++]))>>4,oe<128||(te|=(127&(oe=be[V.pos++]))<<3,oe<128)||(te|=(127&(oe=be[V.pos++]))<<10,oe<128)||(te|=(127&(oe=be[V.pos++]))<<17,oe<128)||(te|=(127&(oe=be[V.pos++]))<<24,oe<128)||(te|=(1&(oe=be[V.pos++]))<<31,oe<128))return wu(M,te,z);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(u=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,n=this.pos;return this.pos=c,c-n>=12&&K1?function(u,f,M){return K1.decode(u.subarray(f,M))}(this.buf,n,c):function(u,f,M){for(var z="",V=f;V<M;){var te,oe,be,Le=u[V],Oe=null,Ge=Le>239?4:Le>223?3:Le>191?2:1;if(V+Ge>M)break;Ge===1?Le<128&&(Oe=Le):Ge===2?(192&(te=u[V+1]))==128&&(Oe=(31&Le)<<6|63&te)<=127&&(Oe=null):Ge===3?(oe=u[V+2],(192&(te=u[V+1]))==128&&(192&oe)==128&&((Oe=(15&Le)<<12|(63&te)<<6|63&oe)<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null)):Ge===4&&(oe=u[V+2],be=u[V+3],(192&(te=u[V+1]))==128&&(192&oe)==128&&(192&be)==128&&((Oe=(15&Le)<<18|(63&te)<<12|(63&oe)<<6|63&be)<=65535||Oe>=1114112)&&(Oe=null)),Oe===null?(Oe=65533,Ge=1):Oe>65535&&(Oe-=65536,z+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),z+=String.fromCharCode(Oe),V+=Ge}return z}(this.buf,n,c)},readBytes:function(){var c=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,c);return this.pos=c,n},readPackedVarint:function(c,n){if(this.type!==Vr.Bytes)return c.push(this.readVarint(n));var u=hl(this);for(c=c||[];this.pos<u;)c.push(this.readVarint(n));return c},readPackedSVarint:function(c){if(this.type!==Vr.Bytes)return c.push(this.readSVarint());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Vr.Bytes)return c.push(this.readBoolean());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Vr.Bytes)return c.push(this.readFloat());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Vr.Bytes)return c.push(this.readDouble());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Vr.Bytes)return c.push(this.readFixed32());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Vr.Bytes)return c.push(this.readSFixed32());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Vr.Bytes)return c.push(this.readFixed64());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Vr.Bytes)return c.push(this.readSFixed64());var n=hl(this);for(c=c||[];this.pos<n;)c.push(this.readSFixed64());return c},skip:function(c){var n=7&c;if(n===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Vr.Fixed32)this.pos+=4;else{if(n!==Vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(c,n){this.writeVarint(c<<3|n)},realloc:function(c){for(var n=this.length||16;n<this.pos+c;)n*=2;if(n!==this.length){var u=new Uint8Array(n);u.set(this.buf),this.buf=u,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Tu(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Tu(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Tu(this.buf,-1&c,this.pos),Tu(this.buf,Math.floor(c*X1),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Tu(this.buf,-1&c,this.pos),Tu(this.buf,Math.floor(c*X1),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(n,u){var f,M;if(n>=0?(f=n%4294967296|0,M=n/4294967296|0):(M=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,M=M+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,V,te){te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,te.buf[te.pos]=127&(z>>>=7)}(f,0,u),function(z,V){var te=(7&z)<<4;V.buf[V.pos++]|=te|((z>>>=3)?128:0),z&&(V.buf[V.pos++]=127&z|((z>>>=7)?128:0),z&&(V.buf[V.pos++]=127&z|((z>>>=7)?128:0),z&&(V.buf[V.pos++]=127&z|((z>>>=7)?128:0),z&&(V.buf[V.pos++]=127&z|((z>>>=7)?128:0),z&&(V.buf[V.pos++]=127&z)))))}(M,u)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var n=this.pos;this.pos=function(f,M,z){for(var V,te,oe=0;oe<M.length;oe++){if((V=M.charCodeAt(oe))>55295&&V<57344){if(!te){V>56319||oe+1===M.length?(f[z++]=239,f[z++]=191,f[z++]=189):te=V;continue}if(V<56320){f[z++]=239,f[z++]=191,f[z++]=189,te=V;continue}V=te-55296<<10|V-56320|65536,te=null}else te&&(f[z++]=239,f[z++]=191,f[z++]=189,te=null);V<128?f[z++]=V:(V<2048?f[z++]=V>>6|192:(V<65536?f[z++]=V>>12|224:(f[z++]=V>>18|240,f[z++]=V>>12&63|128),f[z++]=V>>6&63|128),f[z++]=63&V|128)}return z}(this.buf,c,this.pos);var u=this.pos-n;u>=128&&Q1(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeFloat:function(c){this.realloc(4),Z1(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Z1(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var n=c.length;this.writeVarint(n),this.realloc(n);for(var u=0;u<n;u++)this.buf[this.pos++]=c[u]},writeRawMessage:function(c,n){this.pos++;var u=this.pos;c(n,this);var f=this.pos-u;f>=128&&Q1(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,n,u){this.writeTag(c,Vr.Bytes),this.writeRawMessage(n,u)},writePackedVarint:function(c,n){n.length&&this.writeMessage(c,oA,n)},writePackedSVarint:function(c,n){n.length&&this.writeMessage(c,lA,n)},writePackedBoolean:function(c,n){n.length&&this.writeMessage(c,uA,n)},writePackedFloat:function(c,n){n.length&&this.writeMessage(c,cA,n)},writePackedDouble:function(c,n){n.length&&this.writeMessage(c,hA,n)},writePackedFixed32:function(c,n){n.length&&this.writeMessage(c,dA,n)},writePackedSFixed32:function(c,n){n.length&&this.writeMessage(c,pA,n)},writePackedFixed64:function(c,n){n.length&&this.writeMessage(c,fA,n)},writePackedSFixed64:function(c,n){n.length&&this.writeMessage(c,mA,n)},writeBytesField:function(c,n){this.writeTag(c,Vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(c,n){this.writeTag(c,Vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(c,n){this.writeTag(c,Vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(c,n){this.writeTag(c,Vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(c,n){this.writeTag(c,Vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(c,n){this.writeTag(c,Vr.Varint),this.writeVarint(n)},writeSVarintField:function(c,n){this.writeTag(c,Vr.Varint),this.writeSVarint(n)},writeStringField:function(c,n){this.writeTag(c,Vr.Bytes),this.writeString(n)},writeFloatField:function(c,n){this.writeTag(c,Vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(c,n){this.writeTag(c,Vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(c,n){this.writeVarintField(c,!!n)}};class $x{constructor(n,{pixelRatio:u,version:f,stretchX:M,stretchY:z,content:V}){this.paddedRect=n,this.pixelRatio=u,this.stretchX=M,this.stretchY=z,this.content=V,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class t_{constructor(n,u){const f={},M={};this.haveRenderCallbacks=[];const z=[];this.addImages(n,f,z),this.addImages(u,M,z);const{w:V,h:te}=e_(z),oe=new Ra({width:V||1,height:te||1});for(const be in n){const Le=n[be],Oe=f[be].paddedRect;Ra.copy(Le.data,oe,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},Le.data)}for(const be in u){const Le=u[be],Oe=M[be].paddedRect,Ge=Oe.x+1,Ye=Oe.y+1,Ze=Le.data.width,ht=Le.data.height;Ra.copy(Le.data,oe,{x:0,y:0},{x:Ge,y:Ye},Le.data),Ra.copy(Le.data,oe,{x:0,y:ht-1},{x:Ge,y:Ye-1},{width:Ze,height:1}),Ra.copy(Le.data,oe,{x:0,y:0},{x:Ge,y:Ye+ht},{width:Ze,height:1}),Ra.copy(Le.data,oe,{x:Ze-1,y:0},{x:Ge-1,y:Ye},{width:1,height:ht}),Ra.copy(Le.data,oe,{x:0,y:0},{x:Ge+Ze,y:Ye},{width:1,height:ht})}this.image=oe,this.iconPositions=f,this.patternPositions=M}addImages(n,u,f){for(const M in n){const z=n[M],V={x:0,y:0,w:z.data.width+2,h:z.data.height+2};f.push(V),u[M]=new $x(V,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(n,u){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),u)}patchUpdatedImage(n,u,f){if(!n||!u||n.version===u.version)return;n.version=u.version;const[M,z]=n.tl;f.update(u.data,void 0,{x:M,y:z})}}fi("ImagePosition",$x),fi("ImageAtlas",t_),r.WritingMode=void 0,(Yl=r.WritingMode||(r.WritingMode={}))[Yl.none=0]="none",Yl[Yl.horizontal=1]="horizontal",Yl[Yl.vertical=2]="vertical",Yl[Yl.horizontalOnly=3]="horizontalOnly";const $m=-17;class fp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,u){const f=new fp;return f.scale=n||1,f.fontStack=u,f}static forImage(n){const u=new fp;return u.imageName=n,u}}class Cu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,u){const f=new Cu;for(let M=0;M<n.sections.length;M++){const z=n.sections[M];z.image?f.addImageSection(z):f.addTextSection(z,u)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let u="";for(let f=0;f<n.length;f++){const M=n.charCodeAt(f+1)||null,z=n.charCodeAt(f-1)||null;u+=M&&Sm(M)&&!pp[n[f+1]]||z&&Sm(z)&&!pp[n[f-1]]||!pp[n[f]]?n[f]:pp[n[f]]}return u}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Gm[this.text.charCodeAt(f)];f++)n++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Gm[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(n,u),this.sectionIndex=this.sectionIndex.slice(n,u)}substring(n,u){const f=new Cu;return f.text=this.text.substring(n,u),f.sectionIndex=this.sectionIndex.slice(n,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,u)=>Math.max(n,this.sections[u].scale),0)}addTextSection(n,u){this.text+=n.text,this.sections.push(fp.forText(n.scale,n.fontStack||u));const f=this.sections.length-1;for(let M=0;M<n.text.length;++M)this.sectionIndex.push(f)}addImageSection(n){const u=n.image?n.image.name:"";if(u.length===0)return void w("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(fp.forImage(u)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vm(c,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht){const lt=Cu.fromFeature(c,M);let bt;Oe===r.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:It,processStyledBidirectionalText:xt}=va;if(It&&lt.sections.length===1){bt=[];const Ft=It(lt.toString(),Vx(lt,be,z,n,f,Ye,Ze));for(const xi of Ft){const Ci=new Cu;Ci.text=xi,Ci.sections=lt.sections;for(let ii=0;ii<xi.length;ii++)Ci.sectionIndex.push(0);bt.push(Ci)}}else if(xt){bt=[];const Ft=xt(lt.text,lt.sectionIndex,Vx(lt,be,z,n,f,Ye,Ze));for(const xi of Ft){const Ci=new Cu;Ci.text=xi[0],Ci.sectionIndex=xi[1],Ci.sections=lt.sections,bt.push(Ci)}}else bt=function(Ft,xi){const Ci=[],ii=Ft.text;let Kt=0;for(const Zt of xi)Ci.push(Ft.substring(Kt,Zt)),Kt=Zt;return Kt<ii.length&&Ci.push(Ft.substring(Kt,ii.length)),Ci}(lt,Vx(lt,be,z,n,f,Ye,Ze));const Mt=[],Ut={positionedLines:Mt,text:lt.toString(),top:Le[1],bottom:Le[1],left:Le[0],right:Le[0],writingMode:Oe,iconsInText:!1,verticalizable:!1};return function(Ft,xi,Ci,ii,Kt,Zt,ri,ei,Vt,Mi,ki,lr){let rn=0,cn=$m,Gn=0,Na=0;const ys=ei==="right"?1:ei==="left"?0:.5;let jn=0;for(const Bn of Kt){Bn.trim();const vs=Bn.getMaxScale(),ks=(vs-1)*os,Ws={positionedGlyphs:[],lineOffset:0};Ft.positionedLines[jn]=Ws;const ia=Ws.positionedGlyphs;let ra=0;if(!Bn.length()){cn+=Zt,++jn;continue}for(let Jn=0;Jn<Bn.length();Jn++){const dr=Bn.getSection(Jn),_a=Bn.getSectionIndex(Jn),bs=Bn.getCharCode(Jn);let As=0,Ya=null,so=null,ao=null,dl=os;const Za=!(Vt===r.WritingMode.horizontal||!ki&&!Wc(bs)||ki&&(Gm[bs]||(Qn=bs,ti.Arabic(Qn)||ti["Arabic Supplement"](Qn)||ti["Arabic Extended-A"](Qn)||ti["Arabic Presentation Forms-A"](Qn)||ti["Arabic Presentation Forms-B"](Qn))));if(dr.imageName){const Oa=ii[dr.imageName];if(!Oa)continue;ao=dr.imageName,Ft.iconsInText=Ft.iconsInText||!0,so=Oa.paddedRect;const na=Oa.displaySize;dr.scale=dr.scale*os/lr,Ya={width:na[0],height:na[1],left:1,top:-3,advance:Za?na[1]:na[0]},As=ks+(os-na[1]*dr.scale),dl=Ya.advance;const pl=Za?na[0]*dr.scale-os*vs:na[1]*dr.scale-os*vs;pl>0&&pl>ra&&(ra=pl)}else{const Oa=Ci[dr.fontStack],na=Oa&&Oa[bs];if(na&&na.rect)so=na.rect,Ya=na.metrics;else{const pl=xi[dr.fontStack],yp=pl&&pl[bs];if(!yp)continue;Ya=yp.metrics}As=(vs-dr.scale)*os}Za?(Ft.verticalizable=!0,ia.push({glyph:bs,imageName:ao,x:rn,y:cn+As,vertical:Za,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:_a,metrics:Ya,rect:so}),rn+=dl*dr.scale+Mi):(ia.push({glyph:bs,imageName:ao,x:rn,y:cn+As,vertical:Za,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:_a,metrics:Ya,rect:so}),rn+=Ya.advance*dr.scale+Mi)}ia.length!==0&&(Gn=Math.max(rn-Mi,Gn),_A(ia,0,ia.length-1,ys,ra)),rn=0;const mn=Zt*vs+ra;Ws.lineOffset=Math.max(ra,ks),cn+=mn,Na=Math.max(mn,Na),++jn}var Qn;const xs=cn-$m,{horizontalAlign:Ss,verticalAlign:ta}=Gx(ri);(function(Bn,vs,ks,Ws,ia,ra,mn,Jn,dr){const _a=(vs-ks)*ia;let bs=0;bs=ra!==mn?-Jn*Ws-$m:(-Ws*dr+.5)*mn;for(const As of Bn)for(const Ya of As.positionedGlyphs)Ya.x+=_a,Ya.y+=bs})(Ft.positionedLines,ys,Ss,ta,Gn,Na,Zt,xs,Kt.length),Ft.top+=-ta*xs,Ft.bottom=Ft.top+xs,Ft.left+=-Ss*Gn,Ft.right=Ft.left+Gn}(Ut,n,u,f,bt,V,te,oe,Oe,be,Ge,ht),!function(Ft){for(const xi of Ft)if(xi.positionedGlyphs.length!==0)return!1;return!0}(Mt)&&Ut}const Gm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function i_(c,n,u,f,M,z){if(n.imageName){const V=f[n.imageName];return V?V.displaySize[0]*n.scale*os/z+M:0}{const V=u[n.fontStack],te=V&&V[c];return te?te.metrics.advance*n.scale+M:0}}function r_(c,n,u,f){const M=Math.pow(c-n,2);return f?c<n?M/2:2*M:M+Math.abs(u)*u}function bA(c,n,u){let f=0;return c===10&&(f-=1e4),u&&(f+=150),c!==40&&c!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function n_(c,n,u,f,M,z){let V=null,te=r_(n,u,M,z);for(const oe of f){const be=r_(n-oe.x,u,M,z)+oe.badness;be<=te&&(V=oe,te=be)}return{index:c,x:n,priorBreak:V,badness:te}}function s_(c){return c?s_(c.priorBreak).concat(c.index):[]}function Vx(c,n,u,f,M,z,V){if(z!=="point")return[];if(!c)return[];const te=[],oe=function(Ge,Ye,Ze,ht,lt,bt){let It=0;for(let xt=0;xt<Ge.length();xt++){const Mt=Ge.getSection(xt);It+=i_(Ge.getCharCode(xt),Mt,ht,lt,Ye,bt)}return It/Math.max(1,Math.ceil(It/Ze))}(c,n,u,f,M,V),be=c.text.indexOf("")>=0;let Le=0;for(let Ge=0;Ge<c.length();Ge++){const Ye=c.getSection(Ge),Ze=c.getCharCode(Ge);if(Gm[Ze]||(Le+=i_(Ze,Ye,f,M,n,V)),Ge<c.length()-1){const ht=!((Oe=Ze)<11904||!(ti["Bopomofo Extended"](Oe)||ti.Bopomofo(Oe)||ti["CJK Compatibility Forms"](Oe)||ti["CJK Compatibility Ideographs"](Oe)||ti["CJK Compatibility"](Oe)||ti["CJK Radicals Supplement"](Oe)||ti["CJK Strokes"](Oe)||ti["CJK Symbols and Punctuation"](Oe)||ti["CJK Unified Ideographs Extension A"](Oe)||ti["CJK Unified Ideographs"](Oe)||ti["Enclosed CJK Letters and Months"](Oe)||ti["Halfwidth and Fullwidth Forms"](Oe)||ti.Hiragana(Oe)||ti["Ideographic Description Characters"](Oe)||ti["Kangxi Radicals"](Oe)||ti["Katakana Phonetic Extensions"](Oe)||ti.Katakana(Oe)||ti["Vertical Forms"](Oe)||ti["Yi Radicals"](Oe)||ti["Yi Syllables"](Oe)));(vA[Ze]||ht||Ye.imageName)&&te.push(n_(Ge+1,Le,oe,te,bA(Ze,c.getCharCode(Ge+1),ht&&be),!1))}}var Oe;return s_(n_(c.length(),Le,oe,te,0,!0))}function Gx(c){let n=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:n,verticalAlign:u}}function _A(c,n,u,f,M){if(!f&&!M)return;const z=c[u],V=(c[u].x+z.metrics.advance*z.scale)*f;for(let te=n;te<=u;te++)c[te].x-=V,c[te].y+=M}function wA(c,n,u){const{horizontalAlign:f,verticalAlign:M}=Gx(u),z=n[0]-c.displaySize[0]*f,V=n[1]-c.displaySize[1]*M;return{image:c,top:V,bottom:V+c.displaySize[1],left:z,right:z+c.displaySize[0]}}function a_(c,n,u,f,M,z){const V=c.image;let te;if(V.content){const lt=V.content,bt=V.pixelRatio||1;te=[lt[0]/bt,lt[1]/bt,V.displaySize[0]-lt[2]/bt,V.displaySize[1]-lt[3]/bt]}const oe=n.left*z,be=n.right*z;let Le,Oe,Ge,Ye;u==="width"||u==="both"?(Ye=M[0]+oe-f[3],Oe=M[0]+be+f[1]):(Ye=M[0]+(oe+be-V.displaySize[0])/2,Oe=Ye+V.displaySize[0]);const Ze=n.top*z,ht=n.bottom*z;return u==="height"||u==="both"?(Le=M[1]+Ze-f[0],Ge=M[1]+ht+f[2]):(Le=M[1]+(Ze+ht-V.displaySize[1])/2,Ge=Le+V.displaySize[1]),{image:V,top:Le,right:Oe,bottom:Ge,left:Ye,collisionPadding:te}}const ul=128;function o_(c,n){const{expression:u}=n;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new on(c+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:M}=u;let z=0;for(;z<f.length&&f[z]<=c;)z++;z=Math.max(0,z-1);let V=z;for(;V<f.length&&f[V]<c+1;)V++;V=Math.min(f.length-1,V);const te=f[z],oe=f[V];return u.kind==="composite"?{kind:"composite",minZoom:te,maxZoom:oe,interpolationType:M}:{kind:"camera",minZoom:te,maxZoom:oe,minSize:u.evaluate(new on(te)),maxSize:u.evaluate(new on(oe)),interpolationType:M}}}class Zl extends G{constructor(n,u,f,M){super(n,u),this.angle=f,M!==void 0&&(this.segment=M)}clone(){return new Zl(this.x,this.y,this.angle,this.segment)}}function l_(c,n,u,f,M){if(n.segment===void 0)return!0;let z=n,V=n.segment+1,te=0;for(;te>-u/2;){if(V--,V<0)return!1;te-=c[V].dist(z),z=c[V]}te+=c[V].dist(c[V+1]),V++;const oe=[];let be=0;for(;te<u/2;){const Le=c[V],Oe=c[V+1];if(!Oe)return!1;let Ge=c[V-1].angleTo(Le)-Le.angleTo(Oe);for(Ge=Math.abs((Ge+3*Math.PI)%(2*Math.PI)-Math.PI),oe.push({distance:te,angleDelta:Ge}),be+=Ge;te-oe[0].distance>f;)be-=oe.shift().angleDelta;if(be>M)return!1;V++,te+=Le.dist(Oe)}return!0}function c_(c){let n=0;for(let u=0;u<c.length-1;u++)n+=c[u].dist(c[u+1]);return n}function h_(c,n,u){return c?.6*n*u:0}function u_(c,n){return Math.max(c?c.right-c.left:0,n?n.right-n.left:0)}function TA(c,n,u,f,M,z){const V=h_(u,M,z),te=u_(u,f)*z;let oe=0;const be=c_(c)/2;for(let Le=0;Le<c.length-1;Le++){const Oe=c[Le],Ge=c[Le+1],Ye=Oe.dist(Ge);if(oe+Ye>be){const Ze=(be-oe)/Ye,ht=pn(Oe.x,Ge.x,Ze),lt=pn(Oe.y,Ge.y,Ze),bt=new Zl(ht,lt,Ge.angleTo(Oe),Le);return bt._round(),!V||l_(c,bt,te,V,n)?bt:void 0}oe+=Ye}}function CA(c,n,u,f,M,z,V,te,oe){const be=h_(f,z,V),Le=u_(f,M),Oe=Le*V,Ge=c[0].x===0||c[0].x===oe||c[0].y===0||c[0].y===oe;return n-Oe<n/4&&(n=Oe+n/4),d_(c,Ge?n/2*te%n:(Le/2+2*z)*V*te%n,n,be,u,Oe,Ge,!1,oe)}function d_(c,n,u,f,M,z,V,te,oe){const be=z/2,Le=c_(c);let Oe=0,Ge=n-u,Ye=[];for(let Ze=0;Ze<c.length-1;Ze++){const ht=c[Ze],lt=c[Ze+1],bt=ht.dist(lt),It=lt.angleTo(ht);for(;Ge+u<Oe+bt;){Ge+=u;const xt=(Ge-Oe)/bt,Mt=pn(ht.x,lt.x,xt),Ut=pn(ht.y,lt.y,xt);if(Mt>=0&&Mt<oe&&Ut>=0&&Ut<oe&&Ge-be>=0&&Ge+be<=Le){const Ft=new Zl(Mt,Ut,It,Ze);Ft._round(),f&&!l_(c,Ft,z,f,M)||Ye.push(Ft)}}Oe+=bt}return te||Ye.length||V||(Ye=d_(c,Oe/2,u,f,M,z,V,!0,oe)),Ye}function p_(c,n,u,f,M){const z=[];for(let V=0;V<c.length;V++){const te=c[V];let oe;for(let be=0;be<te.length-1;be++){let Le=te[be],Oe=te[be+1];Le.x<n&&Oe.x<n||(Le.x<n?Le=new G(n,Le.y+(n-Le.x)/(Oe.x-Le.x)*(Oe.y-Le.y))._round():Oe.x<n&&(Oe=new G(n,Le.y+(n-Le.x)/(Oe.x-Le.x)*(Oe.y-Le.y))._round()),Le.y<u&&Oe.y<u||(Le.y<u?Le=new G(Le.x+(u-Le.y)/(Oe.y-Le.y)*(Oe.x-Le.x),u)._round():Oe.y<u&&(Oe=new G(Le.x+(u-Le.y)/(Oe.y-Le.y)*(Oe.x-Le.x),u)._round()),Le.x>=f&&Oe.x>=f||(Le.x>=f?Le=new G(f,Le.y+(f-Le.x)/(Oe.x-Le.x)*(Oe.y-Le.y))._round():Oe.x>=f&&(Oe=new G(f,Le.y+(f-Le.x)/(Oe.x-Le.x)*(Oe.y-Le.y))._round()),Le.y>=M&&Oe.y>=M||(Le.y>=M?Le=new G(Le.x+(M-Le.y)/(Oe.y-Le.y)*(Oe.x-Le.x),M)._round():Oe.y>=M&&(Oe=new G(Le.x+(M-Le.y)/(Oe.y-Le.y)*(Oe.x-Le.x),M)._round()),oe&&Le.equals(oe[oe.length-1])||(oe=[Le],z.push(oe)),oe.push(Oe)))))}}return z}function f_(c,n,u,f){const M=[],z=c.image,V=z.pixelRatio,te=z.paddedRect.w-2,oe=z.paddedRect.h-2,be=c.right-c.left,Le=c.bottom-c.top,Oe=z.stretchX||[[0,te]],Ge=z.stretchY||[[0,oe]],Ye=(Zt,ri)=>Zt+ri[1]-ri[0],Ze=Oe.reduce(Ye,0),ht=Ge.reduce(Ye,0),lt=te-Ze,bt=oe-ht;let It=0,xt=Ze,Mt=0,Ut=ht,Ft=0,xi=lt,Ci=0,ii=bt;if(z.content&&f){const Zt=z.content;It=Hm(Oe,0,Zt[0]),Mt=Hm(Ge,0,Zt[1]),xt=Hm(Oe,Zt[0],Zt[2]),Ut=Hm(Ge,Zt[1],Zt[3]),Ft=Zt[0]-It,Ci=Zt[1]-Mt,xi=Zt[2]-Zt[0]-xt,ii=Zt[3]-Zt[1]-Ut}const Kt=(Zt,ri,ei,Vt)=>{const Mi=Wm(Zt.stretch-It,xt,be,c.left),ki=qm(Zt.fixed-Ft,xi,Zt.stretch,Ze),lr=Wm(ri.stretch-Mt,Ut,Le,c.top),rn=qm(ri.fixed-Ci,ii,ri.stretch,ht),cn=Wm(ei.stretch-It,xt,be,c.left),Gn=qm(ei.fixed-Ft,xi,ei.stretch,Ze),Na=Wm(Vt.stretch-Mt,Ut,Le,c.top),ys=qm(Vt.fixed-Ci,ii,Vt.stretch,ht),jn=new G(Mi,lr),Qn=new G(cn,lr),xs=new G(cn,Na),Ss=new G(Mi,Na),ta=new G(ki/V,rn/V),Bn=new G(Gn/V,ys/V),vs=n*Math.PI/180;if(vs){const ia=Math.sin(vs),ra=Math.cos(vs),mn=[ra,-ia,ia,ra];jn._matMult(mn),Qn._matMult(mn),Ss._matMult(mn),xs._matMult(mn)}const ks=Zt.stretch+Zt.fixed,Ws=ri.stretch+ri.fixed;return{tl:jn,tr:Qn,bl:Ss,br:xs,tex:{x:z.paddedRect.x+1+ks,y:z.paddedRect.y+1+Ws,w:ei.stretch+ei.fixed-ks,h:Vt.stretch+Vt.fixed-Ws},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ta,pixelOffsetBR:Bn,minFontScaleX:xi/V/be,minFontScaleY:ii/V/Le,isSDF:u}};if(f&&(z.stretchX||z.stretchY)){const Zt=m_(Oe,lt,Ze),ri=m_(Ge,bt,ht);for(let ei=0;ei<Zt.length-1;ei++){const Vt=Zt[ei],Mi=Zt[ei+1];for(let ki=0;ki<ri.length-1;ki++)M.push(Kt(Vt,ri[ki],Mi,ri[ki+1]))}}else M.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:te+1},{fixed:0,stretch:oe+1}));return M}function Hm(c,n,u){let f=0;for(const M of c)f+=Math.max(n,Math.min(u,M[1]))-Math.max(n,Math.min(u,M[0]));return f}function m_(c,n,u){const f=[{fixed:-1,stretch:0}];for(const[M,z]of c){const V=f[f.length-1];f.push({fixed:M-V.stretch,stretch:V.stretch}),f.push({fixed:M-V.stretch,stretch:V.stretch+(z-M)})}return f.push({fixed:n+1,stretch:u}),f}function Wm(c,n,u,f){return c/n*u+f}function qm(c,n,u,f){return c-n*u/f}fi("Anchor",Zl);class Ym{constructor(n,u,f,M,z,V,te,oe,be,Le){if(this.boxStartIndex=n.length,be){let Oe=V.top,Ge=V.bottom;const Ye=V.collisionPadding;Ye&&(Oe-=Ye[1],Ge+=Ye[3]);let Ze=Ge-Oe;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{let Oe=V.top*te-oe[0],Ge=V.bottom*te+oe[2],Ye=V.left*te-oe[3],Ze=V.right*te+oe[1];const ht=V.collisionPadding;if(ht&&(Ye-=ht[0]*te,Oe-=ht[1]*te,Ze+=ht[2]*te,Ge+=ht[3]*te),Le){const lt=new G(Ye,Oe),bt=new G(Ze,Oe),It=new G(Ye,Ge),xt=new G(Ze,Ge),Mt=Le*Math.PI/180;lt._rotate(Mt),bt._rotate(Mt),It._rotate(Mt),xt._rotate(Mt),Ye=Math.min(lt.x,bt.x,It.x,xt.x),Ze=Math.max(lt.x,bt.x,It.x,xt.x),Oe=Math.min(lt.y,bt.y,It.y,xt.y),Ge=Math.max(lt.y,bt.y,It.y,xt.y)}n.emplaceBack(u.x,u.y,Ye,Oe,Ze,Ge,f,M,z)}this.boxEndIndex=n.length}}class EA{constructor(n=[],u=SA){if(this.data=n,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:u,compare:f}=this,M=u[n];for(;n>0;){const z=n-1>>1,V=u[z];if(f(M,V)>=0)break;u[n]=V,n=z}u[n]=M}_down(n){const{data:u,compare:f}=this,M=this.length>>1,z=u[n];for(;n<M;){let V=1+(n<<1),te=u[V];const oe=V+1;if(oe<this.length&&f(u[oe],te)<0&&(V=oe,te=u[oe]),f(te,z)>=0)break;u[n]=te,n=V}u[n]=z}}function SA(c,n){return c<n?-1:c>n?1:0}function kA(c,n=1,u=!1){let f=1/0,M=1/0,z=-1/0,V=-1/0;const te=c[0];for(let Ye=0;Ye<te.length;Ye++){const Ze=te[Ye];(!Ye||Ze.x<f)&&(f=Ze.x),(!Ye||Ze.y<M)&&(M=Ze.y),(!Ye||Ze.x>z)&&(z=Ze.x),(!Ye||Ze.y>V)&&(V=Ze.y)}const oe=Math.min(z-f,V-M);let be=oe/2;const Le=new EA([],AA);if(oe===0)return new G(f,M);for(let Ye=f;Ye<z;Ye+=oe)for(let Ze=M;Ze<V;Ze+=oe)Le.push(new Eu(Ye+be,Ze+be,be,c));let Oe=function(Ye){let Ze=0,ht=0,lt=0;const bt=Ye[0];for(let It=0,xt=bt.length,Mt=xt-1;It<xt;Mt=It++){const Ut=bt[It],Ft=bt[Mt],xi=Ut.x*Ft.y-Ft.x*Ut.y;ht+=(Ut.x+Ft.x)*xi,lt+=(Ut.y+Ft.y)*xi,Ze+=3*xi}return new Eu(ht/Ze,lt/Ze,0,Ye)}(c),Ge=Le.length;for(;Le.length;){const Ye=Le.pop();(Ye.d>Oe.d||!Oe.d)&&(Oe=Ye,u&&console.log("found best %d after %d probes",Math.round(1e4*Ye.d)/1e4,Ge)),Ye.max-Oe.d<=n||(be=Ye.h/2,Le.push(new Eu(Ye.p.x-be,Ye.p.y-be,be,c)),Le.push(new Eu(Ye.p.x+be,Ye.p.y-be,be,c)),Le.push(new Eu(Ye.p.x-be,Ye.p.y+be,be,c)),Le.push(new Eu(Ye.p.x+be,Ye.p.y+be,be,c)),Ge+=4)}return u&&(console.log(`num probes: ${Ge}`),console.log(`best distance: ${Oe.d}`)),Oe.p}function AA(c,n){return n.max-c.max}function Eu(c,n,u,f){this.p=new G(c,n),this.h=u,this.d=function(M,z){let V=!1,te=1/0;for(let oe=0;oe<z.length;oe++){const be=z[oe];for(let Le=0,Oe=be.length,Ge=Oe-1;Le<Oe;Ge=Le++){const Ye=be[Le],Ze=be[Ge];Ye.y>M.y!=Ze.y>M.y&&M.x<(Ze.x-Ye.x)*(M.y-Ye.y)/(Ze.y-Ye.y)+Ye.x&&(V=!V),te=Math.min(te,T1(M,Ye,Ze))}}return(V?1:-1)*Math.sqrt(te)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Hx=Number.POSITIVE_INFINITY;function g_(c,n){return n[1]!==Hx?function(u,f,M){let z=0,V=0;switch(f=Math.abs(f),M=Math.abs(M),u){case"top-right":case"top-left":case"top":V=M-7;break;case"bottom-right":case"bottom-left":case"bottom":V=7-M}switch(u){case"top-right":case"bottom-right":case"right":z=-f;break;case"top-left":case"bottom-left":case"left":z=f}return[z,V]}(c,n[0],n[1]):function(u,f){let M=0,z=0;f<0&&(f=0);const V=f/Math.sqrt(2);switch(u){case"top-right":case"top-left":z=V-7;break;case"bottom-right":case"bottom-left":z=7-V;break;case"bottom":z=7-f;break;case"top":z=f-7}switch(u){case"top-right":case"bottom-right":M=-V;break;case"top-left":case"bottom-left":M=V;break;case"left":M=f;break;case"right":M=-f}return[M,z]}(c,n[0])}function Wx(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function MA(c,n,u,f,M,z,V,te,oe,be,Le){let Oe=z.textMaxSize.evaluate(n,{});Oe===void 0&&(Oe=V);const Ge=c.layers[0].layout,Ye=Ge.get("icon-offset").evaluate(n,{},Le),Ze=x_(u.horizontal),ht=V/24,lt=c.tilePixelRatio*ht,bt=c.tilePixelRatio*Oe/24,It=c.tilePixelRatio*te,xt=c.tilePixelRatio*Ge.get("symbol-spacing"),Mt=Ge.get("text-padding")*c.tilePixelRatio,Ut=function(Vt,Mi,ki,lr=1){const rn=Vt.get("icon-padding").evaluate(Mi,{},ki),cn=rn&&rn.values;return[cn[0]*lr,cn[1]*lr,cn[2]*lr,cn[3]*lr]}(Ge,n,Le,c.tilePixelRatio),Ft=Ge.get("text-max-angle")/180*Math.PI,xi=Ge.get("text-rotation-alignment")!=="viewport"&&Ge.get("symbol-placement")!=="point",Ci=Ge.get("icon-rotation-alignment")==="map"&&Ge.get("symbol-placement")!=="point",ii=Ge.get("symbol-placement"),Kt=xt/2,Zt=Ge.get("icon-text-fit");let ri;f&&Zt!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(ri=a_(f,u.vertical,Zt,Ge.get("icon-text-fit-padding"),Ye,ht)),Ze&&(f=a_(f,Ze,Zt,Ge.get("icon-text-fit-padding"),Ye,ht)));const ei=(Vt,Mi)=>{Mi.x<0||Mi.x>=Vn||Mi.y<0||Mi.y>=Vn||function(ki,lr,rn,cn,Gn,Na,ys,jn,Qn,xs,Ss,ta,Bn,vs,ks,Ws,ia,ra,mn,Jn,dr,_a,bs,As,Ya){const so=ki.addToLineVertexArray(lr,rn);let ao,dl,Za,Oa,na=0,pl=0,yp=0,R_=0,i0=-1,r0=-1;const fl={};let z_=On.exports(""),n0=0,s0=0;if(jn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[n0,s0]=jn.layout.get("text-offset").evaluate(dr,{},As).map(sa=>sa*os):(n0=jn.layout.get("text-radial-offset").evaluate(dr,{},As)*os,s0=Hx),ki.allowVerticalPlacement&&cn.vertical){const sa=jn.layout.get("text-rotate").evaluate(dr,{},As)+90;Za=new Ym(Qn,lr,xs,Ss,ta,cn.vertical,Bn,vs,ks,sa),ys&&(Oa=new Ym(Qn,lr,xs,Ss,ta,ys,ia,ra,ks,sa))}if(Gn){const sa=jn.layout.get("icon-rotate").evaluate(dr,{}),ko=jn.layout.get("icon-text-fit")!=="none",xp=f_(Gn,sa,bs,ko),vp=ys?f_(ys,sa,bs,ko):void 0;dl=new Ym(Qn,lr,xs,Ss,ta,Gn,ia,ra,!1,sa),na=4*xp.length;const j_=ki.iconSizeData;let rh=null;j_.kind==="source"?(rh=[ul*jn.layout.get("icon-size").evaluate(dr,{})],rh[0]>Xl&&w(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):j_.kind==="composite"&&(rh=[ul*_a.compositeIconSizes[0].evaluate(dr,{},As),ul*_a.compositeIconSizes[1].evaluate(dr,{},As)],(rh[0]>Xl||rh[1]>Xl)&&w(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ki.addSymbols(ki.icon,xp,rh,Jn,mn,dr,r.WritingMode.none,lr,so.lineStartIndex,so.lineLength,-1,As),i0=ki.icon.placedSymbolArray.length-1,vp&&(pl=4*vp.length,ki.addSymbols(ki.icon,vp,rh,Jn,mn,dr,r.WritingMode.vertical,lr,so.lineStartIndex,so.lineLength,-1,As),r0=ki.icon.placedSymbolArray.length-1)}const N_=Object.keys(cn.horizontal);for(const sa of N_){const ko=cn.horizontal[sa];if(!ao){z_=On.exports(ko.text);const vp=jn.layout.get("text-rotate").evaluate(dr,{},As);ao=new Ym(Qn,lr,xs,Ss,ta,ko,Bn,vs,ks,vp)}const xp=ko.positionedLines.length===1;if(yp+=y_(ki,lr,ko,Na,jn,ks,dr,Ws,so,cn.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,xp?N_:[sa],fl,i0,_a,As),xp)break}cn.vertical&&(R_+=y_(ki,lr,cn.vertical,Na,jn,ks,dr,Ws,so,r.WritingMode.vertical,["vertical"],fl,r0,_a,As));const $A=ao?ao.boxStartIndex:ki.collisionBoxArray.length,VA=ao?ao.boxEndIndex:ki.collisionBoxArray.length,GA=Za?Za.boxStartIndex:ki.collisionBoxArray.length,HA=Za?Za.boxEndIndex:ki.collisionBoxArray.length,WA=dl?dl.boxStartIndex:ki.collisionBoxArray.length,qA=dl?dl.boxEndIndex:ki.collisionBoxArray.length,YA=Oa?Oa.boxStartIndex:ki.collisionBoxArray.length,ZA=Oa?Oa.boxEndIndex:ki.collisionBoxArray.length;let oo=-1;const Jm=(sa,ko)=>sa&&sa.circleDiameter?Math.max(sa.circleDiameter,ko):ko;oo=Jm(ao,oo),oo=Jm(Za,oo),oo=Jm(dl,oo),oo=Jm(Oa,oo);const O_=oo>-1?1:0;O_&&(oo*=Ya/os),ki.glyphOffsetArray.length>=Su.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),dr.sortKey!==void 0&&ki.addToSortKeyRanges(ki.symbolInstances.length,dr.sortKey),ki.symbolInstances.emplaceBack(lr.x,lr.y,fl.right>=0?fl.right:-1,fl.center>=0?fl.center:-1,fl.left>=0?fl.left:-1,fl.vertical||-1,i0,r0,z_,$A,VA,GA,HA,WA,qA,YA,ZA,xs,yp,R_,na,pl,O_,0,Bn,n0,s0,oo)}(c,Mi,Vt,u,f,M,ri,c.layers[0],c.collisionBoxArray,n.index,n.sourceLayerIndex,c.index,lt,[Mt,Mt,Mt,Mt],xi,oe,It,Ut,Ci,Ye,n,z,be,Le,V)};if(ii==="line")for(const Vt of p_(n.geometry,0,0,Vn,Vn)){const Mi=CA(Vt,xt,Ft,u.vertical||Ze,f,24,bt,c.overscaling,Vn);for(const ki of Mi){const lr=Ze;lr&&PA(c,lr.text,Kt,ki)||ei(Vt,ki)}}else if(ii==="line-center"){for(const Vt of n.geometry)if(Vt.length>1){const Mi=TA(Vt,Ft,u.vertical||Ze,f,24,bt);Mi&&ei(Vt,Mi)}}else if(n.type==="Polygon")for(const Vt of Lx(n.geometry,0)){const Mi=kA(Vt,16);ei(Vt[0],new Zl(Mi.x,Mi.y,0))}else if(n.type==="LineString")for(const Vt of n.geometry)ei(Vt,new Zl(Vt[0].x,Vt[0].y,0));else if(n.type==="Point")for(const Vt of n.geometry)for(const Mi of Vt)ei([Mi],new Zl(Mi.x,Mi.y,0))}const Xl=32640;function y_(c,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze){const ht=function(It,xt,Mt,Ut,Ft,xi,Ci,ii){const Kt=Ut.layout.get("text-rotate").evaluate(xi,{})*Math.PI/180,Zt=[];for(const ri of xt.positionedLines)for(const ei of ri.positionedGlyphs){if(!ei.rect)continue;const Vt=ei.rect||{};let Mi=4,ki=!0,lr=1,rn=0;const cn=(Ft||ii)&&ei.vertical,Gn=ei.metrics.advance*ei.scale/2;if(ii&&xt.verticalizable){const mn=(ei.scale-1)*os,Jn=(os-ei.metrics.width*ei.scale)/2;rn=ri.lineOffset/2-(ei.imageName?-Jn:mn)}if(ei.imageName){const mn=Ci[ei.imageName];ki=mn.sdf,lr=mn.pixelRatio,Mi=1/lr}const Na=Ft?[ei.x+Gn,ei.y]:[0,0];let ys=Ft?[0,0]:[ei.x+Gn+Mt[0],ei.y+Mt[1]-rn],jn=[0,0];cn&&(jn=ys,ys=[0,0]);const Qn=(ei.metrics.left-Mi)*ei.scale-Gn+ys[0],xs=(-ei.metrics.top-Mi)*ei.scale+ys[1],Ss=Qn+Vt.w*ei.scale/lr,ta=xs+Vt.h*ei.scale/lr,Bn=new G(Qn,xs),vs=new G(Ss,xs),ks=new G(Qn,ta),Ws=new G(Ss,ta);if(cn){const mn=new G(-Gn,Gn-$m),Jn=-Math.PI/2,dr=12-Gn,_a=new G(22-dr,-(ei.imageName?dr:0)),bs=new G(...jn);Bn._rotateAround(Jn,mn)._add(_a)._add(bs),vs._rotateAround(Jn,mn)._add(_a)._add(bs),ks._rotateAround(Jn,mn)._add(_a)._add(bs),Ws._rotateAround(Jn,mn)._add(_a)._add(bs)}if(Kt){const mn=Math.sin(Kt),Jn=Math.cos(Kt),dr=[Jn,-mn,mn,Jn];Bn._matMult(dr),vs._matMult(dr),ks._matMult(dr),Ws._matMult(dr)}const ia=new G(0,0),ra=new G(0,0);Zt.push({tl:Bn,tr:vs,bl:ks,br:Ws,tex:Vt,writingMode:xt.writingMode,glyphOffset:Na,sectionIndex:ei.sectionIndex,isSDF:ki,pixelOffsetTL:ia,pixelOffsetBR:ra,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,u,te,M,z,V,f,c.allowVerticalPlacement),lt=c.textSizeData;let bt=null;lt.kind==="source"?(bt=[ul*M.layout.get("text-size").evaluate(V,{})],bt[0]>Xl&&w(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(bt=[ul*Ye.compositeTextSizes[0].evaluate(V,{},Ze),ul*Ye.compositeTextSizes[1].evaluate(V,{},Ze)],(bt[0]>Xl||bt[1]>Xl)&&w(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ht,bt,te,z,V,be,n,oe.lineStartIndex,oe.lineLength,Ge,Ze);for(const It of Le)Oe[It]=c.text.placedSymbolArray.length-1;return 4*ht.length}function x_(c){for(const n in c)return c[n];return null}function PA(c,n,u,f){const M=c.compareText;if(n in M){const z=M[n];for(let V=z.length-1;V>=0;V--)if(f.dist(z[V])<u)return!0}else M[n]=[];return M[n].push(f),!1}const IA=ql.VectorTileFeature.types,DA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zm(c,n,u,f,M,z,V,te,oe,be,Le,Oe,Ge){const Ye=te?Math.min(Xl,Math.round(te[0])):0,Ze=te?Math.min(Xl,Math.round(te[1])):0;c.emplaceBack(n,u,Math.round(32*f),Math.round(32*M),z,V,(Ye<<1)+(oe?1:0),Ze,16*be,16*Le,256*Oe,256*Ge)}function qx(c,n,u){c.emplaceBack(n.x,n.y,u),c.emplaceBack(n.x,n.y,u),c.emplaceBack(n.x,n.y,u),c.emplaceBack(n.x,n.y,u)}function LA(c){for(const n of c.sections)if(vx(n.text))return!0;return!1}class Yx{constructor(n){this.layoutVertexArray=new ea,this.indexArray=new as,this.programConfigurations=n,this.segments=new Cr,this.dynamicLayoutVertexArray=new qa,this.opacityVertexArray=new Pa,this.placedSymbolArray=new jt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,u,f,M){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,iA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,rA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,DA,!0),this.opacityVertexBuffer.itemSize=1),(f||M)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fi("SymbolBuffers",Yx);class Zx{constructor(n,u,f){this.layoutVertexArray=new n,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Cr,this.collisionVertexArray=new ol}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,nA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fi("CollisionBuffers",Zx);class Su{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(V=>V.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kx([]),this.placementViewportMatrix=kx([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o_(this.zoom,u["text-size"]),this.iconSizeData=o_(this.zoom,u["icon-size"]);const f=this.layers[0].layout,M=f.get("symbol-sort-key"),z=f.get("symbol-z-order");this.canOverlap=Kx(f,"text-overlap","text-allow-overlap")!=="never"||Kx(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(V=>r.WritingMode[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=n.sourceID}createArrays(){this.text=new Yx(new Qc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Yx(new Qc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ai,this.lineVertexArray=new Xt,this.symbolInstances=new zt}calculateGlyphDependencies(n,u,f,M,z){for(let V=0;V<n.length;V++)if(u[n.charCodeAt(V)]=!0,(f||M)&&z){const te=pp[n.charAt(V)];te&&(u[te.charCodeAt(0)]=!0)}}populate(n,u,f){const M=this.layers[0],z=M.layout,V=z.get("text-font"),te=z.get("text-field"),oe=z.get("icon-image"),be=(te.value.kind!=="constant"||te.value.value instanceof ct&&!te.value.value.isEmpty()||te.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),Le=oe.value.kind!=="constant"||!!oe.value.value||Object.keys(oe.parameters).length>0,Oe=z.get("symbol-sort-key");if(this.features=[],!be&&!Le)return;const Ge=u.iconDependencies,Ye=u.glyphDependencies,Ze=u.availableImages,ht=new on(this.zoom);for(const{feature:lt,id:bt,index:It,sourceLayerIndex:xt}of n){const Mt=M._featureFilter.needGeometry,Ut=eh(lt,Mt);if(!M._featureFilter.filter(ht,Ut,f))continue;let Ft,xi;if(Mt||(Ut.geometry=Jc(lt)),be){const ii=M.getValueAndResolveTokens("text-field",Ut,f,Ze),Kt=ct.factory(ii);LA(Kt)&&(this.hasRTLText=!0),(!this.hasRTLText||Jd()==="unavailable"||this.hasRTLText&&va.isParsed())&&(Ft=aA(Kt,M,Ut))}if(Le){const ii=M.getValueAndResolveTokens("icon-image",Ut,f,Ze);xi=ii instanceof nt?ii:nt.fromString(ii)}if(!Ft&&!xi)continue;const Ci=this.sortFeaturesByKey?Oe.evaluate(Ut,{},f):void 0;if(this.features.push({id:bt,text:Ft,icon:xi,index:It,sourceLayerIndex:xt,geometry:Ut.geometry,properties:lt.properties,type:IA[lt.type],sortKey:Ci}),xi&&(Ge[xi.name]=!0),Ft){const ii=V.evaluate(Ut,{},f).join(","),Kt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const Zt of Ft.sections)if(Zt.image)Ge[Zt.image.name]=!0;else{const ri=Yd(Ft.toString()),ei=Zt.fontStack||ii,Vt=Ye[ei]=Ye[ei]||{};this.calculateGlyphDependencies(Zt.text,Vt,Kt,this.allowVerticalPlacement,ri)}}}z.get("symbol-placement")==="line"&&(this.features=function(lt){const bt={},It={},xt=[];let Mt=0;function Ut(ii){xt.push(lt[ii]),Mt++}function Ft(ii,Kt,Zt){const ri=It[ii];return delete It[ii],It[Kt]=ri,xt[ri].geometry[0].pop(),xt[ri].geometry[0]=xt[ri].geometry[0].concat(Zt[0]),ri}function xi(ii,Kt,Zt){const ri=bt[Kt];return delete bt[Kt],bt[ii]=ri,xt[ri].geometry[0].shift(),xt[ri].geometry[0]=Zt[0].concat(xt[ri].geometry[0]),ri}function Ci(ii,Kt,Zt){const ri=Zt?Kt[0][Kt[0].length-1]:Kt[0][0];return`${ii}:${ri.x}:${ri.y}`}for(let ii=0;ii<lt.length;ii++){const Kt=lt[ii],Zt=Kt.geometry,ri=Kt.text?Kt.text.toString():null;if(!ri){Ut(ii);continue}const ei=Ci(ri,Zt),Vt=Ci(ri,Zt,!0);if(ei in It&&Vt in bt&&It[ei]!==bt[Vt]){const Mi=xi(ei,Vt,Zt),ki=Ft(ei,Vt,xt[Mi].geometry);delete bt[ei],delete It[Vt],It[Ci(ri,xt[ki].geometry,!0)]=ki,xt[Mi].geometry=null}else ei in It?Ft(ei,Vt,Zt):Vt in bt?xi(ei,Vt,Zt):(Ut(ii),bt[ei]=Mt-1,It[Vt]=Mt-1)}return xt.filter(ii=>ii.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,bt)=>lt.sortKey-bt.sortKey)}update(n,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,u,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,u,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,u){const f=this.lineVertexArray.length;if(n.segment!==void 0){let M=n.dist(u[n.segment+1]),z=n.dist(u[n.segment]);const V={};for(let te=n.segment+1;te<u.length;te++)V[te]={x:u[te].x,y:u[te].y,tileUnitDistanceFromAnchor:M},te<u.length-1&&(M+=u[te+1].dist(u[te]));for(let te=n.segment||0;te>=0;te--)V[te]={x:u[te].x,y:u[te].y,tileUnitDistanceFromAnchor:z},te>0&&(z+=u[te-1].dist(u[te]));for(let te=0;te<u.length;te++){const oe=V[te];this.lineVertexArray.emplaceBack(oe.x,oe.y,oe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,u,f,M,z,V,te,oe,be,Le,Oe,Ge){const Ye=n.indexArray,Ze=n.layoutVertexArray,ht=n.segments.prepareSegment(4*u.length,Ze,Ye,this.canOverlap?V.sortKey:void 0),lt=this.glyphOffsetArray.length,bt=ht.vertexLength,It=this.allowVerticalPlacement&&te===r.WritingMode.vertical?Math.PI/2:0,xt=V.text&&V.text.sections;for(let Mt=0;Mt<u.length;Mt++){const{tl:Ut,tr:Ft,bl:xi,br:Ci,tex:ii,pixelOffsetTL:Kt,pixelOffsetBR:Zt,minFontScaleX:ri,minFontScaleY:ei,glyphOffset:Vt,isSDF:Mi,sectionIndex:ki}=u[Mt],lr=ht.vertexLength,rn=Vt[1];Zm(Ze,oe.x,oe.y,Ut.x,rn+Ut.y,ii.x,ii.y,f,Mi,Kt.x,Kt.y,ri,ei),Zm(Ze,oe.x,oe.y,Ft.x,rn+Ft.y,ii.x+ii.w,ii.y,f,Mi,Zt.x,Kt.y,ri,ei),Zm(Ze,oe.x,oe.y,xi.x,rn+xi.y,ii.x,ii.y+ii.h,f,Mi,Kt.x,Zt.y,ri,ei),Zm(Ze,oe.x,oe.y,Ci.x,rn+Ci.y,ii.x+ii.w,ii.y+ii.h,f,Mi,Zt.x,Zt.y,ri,ei),qx(n.dynamicLayoutVertexArray,oe,It),Ye.emplaceBack(lr,lr+1,lr+2),Ye.emplaceBack(lr+1,lr+2,lr+3),ht.vertexLength+=4,ht.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),Mt!==u.length-1&&ki===u[Mt+1].sectionIndex||n.programConfigurations.populatePaintArrays(Ze.length,V,V.index,{},Ge,xt&&xt[ki])}n.placedSymbolArray.emplaceBack(oe.x,oe.y,lt,this.glyphOffsetArray.length-lt,bt,be,Le,oe.segment,f?f[0]:0,f?f[1]:0,M[0],M[1],te,0,!1,0,Oe)}_addCollisionDebugVertex(n,u,f,M,z,V){return u.emplaceBack(0,0),n.emplaceBack(f.x,f.y,M,z,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(n,u,f,M,z,V,te){const oe=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),be=oe.vertexLength,Le=z.layoutVertexArray,Oe=z.collisionVertexArray,Ge=te.anchorX,Ye=te.anchorY;this._addCollisionDebugVertex(Le,Oe,V,Ge,Ye,new G(n,u)),this._addCollisionDebugVertex(Le,Oe,V,Ge,Ye,new G(f,u)),this._addCollisionDebugVertex(Le,Oe,V,Ge,Ye,new G(f,M)),this._addCollisionDebugVertex(Le,Oe,V,Ge,Ye,new G(n,M)),oe.vertexLength+=4;const Ze=z.indexArray;Ze.emplaceBack(be,be+1),Ze.emplaceBack(be+1,be+2),Ze.emplaceBack(be+2,be+3),Ze.emplaceBack(be+3,be),oe.primitiveLength+=4}addDebugCollisionBoxes(n,u,f,M){for(let z=n;z<u;z++){const V=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,M?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zx(Ia,q1.members,Da),this.iconCollisionBox=new Zx(Ia,q1.members,Da);for(let n=0;n<this.symbolInstances.length;n++){const u=this.symbolInstances.get(n);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(n,u,f,M,z,V,te,oe,be){const Le={};for(let Oe=u;Oe<f;Oe++){const Ge=n.get(Oe);Le.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Le.textFeatureIndex=Ge.featureIndex;break}for(let Oe=M;Oe<z;Oe++){const Ge=n.get(Oe);Le.verticalTextBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Le.verticalTextFeatureIndex=Ge.featureIndex;break}for(let Oe=V;Oe<te;Oe++){const Ge=n.get(Oe);Le.iconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Le.iconFeatureIndex=Ge.featureIndex;break}for(let Oe=oe;Oe<be;Oe++){const Ge=n.get(Oe);Le.verticalIconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Le.verticalIconFeatureIndex=Ge.featureIndex;break}return Le}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,u){const f=n.placedSymbolArray.get(u),M=f.vertexStartIndex+4*f.numGlyphs;for(let z=f.vertexStartIndex;z<M;z+=4)n.indexArray.emplaceBack(z,z+1,z+2),n.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(n),f=Math.cos(n),M=[],z=[],V=[];for(let te=0;te<this.symbolInstances.length;++te){V.push(te);const oe=this.symbolInstances.get(te);M.push(0|Math.round(u*oe.anchorX+f*oe.anchorY)),z.push(oe.featureIndex)}return V.sort((te,oe)=>M[te]-M[oe]||z[oe]-z[te]),V}addToSortKeyRanges(n,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((M,z,V)=>{M>=0&&V.indexOf(M)===z&&this.addIndicesForPlacedSymbol(this.text,M)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fi("SymbolBucket",Su,{omit:["layers","collisionBoxArray","features","compareText"]}),Su.MAX_GLYPHS=65535,Su.addDynamicAttributes=qx;const RA=new $n({"symbol-placement":new Si(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Si(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Si(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Si(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Si(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Si(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Si(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Si(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Si(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Si(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Si(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Pe.layout_symbol["icon-image"]),"icon-rotate":new Di(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Di(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Si(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Di(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Si(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Si(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Si(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Pe.layout_symbol["text-field"]),"text-font":new Di(Pe.layout_symbol["text-font"]),"text-size":new Di(Pe.layout_symbol["text-size"]),"text-max-width":new Di(Pe.layout_symbol["text-max-width"]),"text-line-height":new Si(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Di(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Si(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Si(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Si(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Pe.layout_symbol["text-rotate"]),"text-padding":new Si(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Si(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Di(Pe.layout_symbol["text-transform"]),"text-offset":new Di(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Si(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Si(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Si(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Si(Pe.layout_symbol["text-optional"])});var Xx={paint:new $n({"icon-opacity":new Di(Pe.paint_symbol["icon-opacity"]),"icon-color":new Di(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Di(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Si(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Si(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Pe.paint_symbol["text-opacity"]),"text-color":new Di(Pe.paint_symbol["text-color"],{runtimeType:si,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Di(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Si(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Si(Pe.paint_symbol["text-translate-anchor"])}),layout:RA};class v_{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Rt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(n.formattedSection))return u.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fi("FormatSectionOverride",v_,{omit:["defaultValue"]});class Xm extends $s{constructor(n){super(n,Xx)}recalculate(n,u){if(super.recalculate(n,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const M=[];for(const z of f)M.indexOf(z)<0&&M.push(z);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,u,f,M){const z=this.layout.get(n).evaluate(u,{},f,M),V=this._unevaluatedLayout._values[n];return V.isDataDriven()||Nc(V.value)||!z?z:function(te,oe){return oe.replace(/{([^{}]+)}/g,(be,Le)=>Le in te?String(te[Le]):"")}(u.properties,z)}createBucket(n){return new Su(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Xx.paint.overridableProperties){if(!Xm.hasPaintOverride(this.layout,n))continue;const u=this.paint.get(n),f=new v_(u),M=new $d(f,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Jh("source",M):new jc("composite",M,u.value.zoomStops),this.paint._values[n]=new Wa(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(n,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&Xm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,u){const f=n.get("text-field"),M=Xx.paint.properties[u];let z=!1;const V=te=>{for(const oe of te)if(M.overrides&&M.overrides.hasOverride(oe))return void(z=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ct)V(f.value.value.sections);else if(f.value.kind==="source"){const te=be=>{z||(be instanceof oi&&Nt(be.value)===Xi?V(be.value.sections):be instanceof Qh?V(be.sections):be.eachChild(te))},oe=f.value;oe._styleExpression&&te(oe._styleExpression.expression)}return z}}function Kx(c,n,u){let f="never";const M=c.get(n);return M?f=M:c.get(u)&&(f="always"),f}var zA={paint:new $n({"background-color":new Si(Pe.paint_background["background-color"]),"background-pattern":new Yc(Pe.paint_background["background-pattern"]),"background-opacity":new Si(Pe.paint_background["background-opacity"])})},NA={paint:new $n({"raster-opacity":new Si(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Si(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Si(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Si(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Si(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Si(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Si(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Si(Pe.paint_raster["raster-fade-duration"])})};class OA extends $s{constructor(n){super(n,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const jA={circle:class extends $s{constructor(c){super(c,gk)}createBucket(c){return new Cx(c)}queryRadius(c){const n=c;return np("circle-radius",this,n)+np("circle-stroke-width",this,n)+Lm(this.paint.get("circle-translate"))}queryIntersectsFeature(c,n,u,f,M,z,V,te){const oe=Rm(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,V),be=this.paint.get("circle-radius").evaluate(n,u)+this.paint.get("circle-stroke-width").evaluate(n,u),Le=this.paint.get("circle-pitch-alignment")==="map",Oe=Le?oe:function(Ye,Ze){return Ye.map(ht=>P1(ht,Ze))}(oe,te),Ge=Le?be*V:be;for(const Ye of f)for(const Ze of Ye){const ht=Le?Ze:P1(Ze,te);let lt=Ge;const bt=zm([],[Ze.x,Ze.y,0,1],te);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=bt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=z.cameraToCenterDistance/bt[3]),uk(Oe,ht,lt))return!0}return!1}},heatmap:class extends $s{constructor(c){super(c,xk),this._updateColorRamp()}createBucket(c){return new I1(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=L1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends $s{constructor(c){super(c,vk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends $s{constructor(c){super(c,Rk)}recalculate(c,n){super.recalculate(c,n);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Nx(c)}queryRadius(){return Lm(this.paint.get("fill-translate"))}queryIntersectsFeature(c,n,u,f,M,z,V){return w1(Rm(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,V),f)}isTileClipped(){return!0}},"fill-extrusion":class extends $s{constructor(c){super(c,Yk)}createBucket(c){return new jx(c)}queryRadius(){return Lm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,n,u,f,M,z,V,te){const oe=Rm(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,V),be=this.paint.get("fill-extrusion-height").evaluate(n,u),Le=this.paint.get("fill-extrusion-base").evaluate(n,u),Oe=function(Ye,Ze,ht,lt){const bt=[];for(const It of Ye){const xt=[It.x,It.y,0,1];zm(xt,xt,Ze),bt.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return bt}(oe,te),Ge=function(Ye,Ze,ht,lt){const bt=[],It=[],xt=lt[8]*Ze,Mt=lt[9]*Ze,Ut=lt[10]*Ze,Ft=lt[11]*Ze,xi=lt[8]*ht,Ci=lt[9]*ht,ii=lt[10]*ht,Kt=lt[11]*ht;for(const Zt of Ye){const ri=[],ei=[];for(const Vt of Zt){const Mi=Vt.x,ki=Vt.y,lr=lt[0]*Mi+lt[4]*ki+lt[12],rn=lt[1]*Mi+lt[5]*ki+lt[13],cn=lt[2]*Mi+lt[6]*ki+lt[14],Gn=lt[3]*Mi+lt[7]*ki+lt[15],Na=cn+Ut,ys=Gn+Ft,jn=lr+xi,Qn=rn+Ci,xs=cn+ii,Ss=Gn+Kt,ta=new G((lr+xt)/ys,(rn+Mt)/ys);ta.z=Na/ys,ri.push(ta);const Bn=new G(jn/Ss,Qn/Ss);Bn.z=xs/Ss,ei.push(Bn)}bt.push(ri),It.push(ei)}return[bt,It]}(f,Le,be,te);return function(Ye,Ze,ht){let lt=1/0;w1(ht,Ze)&&(lt=$1(ht,Ze[0]));for(let bt=0;bt<Ze.length;bt++){const It=Ze[bt],xt=Ye[bt];for(let Mt=0;Mt<It.length-1;Mt++){const Ut=It[Mt],Ft=[Ut,It[Mt+1],xt[Mt+1],xt[Mt],Ut];_1(ht,Ft)&&(lt=Math.min(lt,$1(ht,Ft)))}}return lt!==1/0&&lt}(Ge[0],Ge[1],Oe)}},line:class extends $s{constructor(c){super(c,G1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Dc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,n){super.recalculate(c,n),this.paint._values["line-floorwidth"]=H1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new Bx(c)}queryRadius(c){const n=c,u=W1(np("line-width",this,n),np("line-gap-width",this,n)),f=np("line-offset",this,n);return u/2+Math.abs(f)+Lm(this.paint.get("line-translate"))}queryIntersectsFeature(c,n,u,f,M,z,V){const te=Rm(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,V),oe=V/2*W1(this.paint.get("line-width").evaluate(n,u),this.paint.get("line-gap-width").evaluate(n,u)),be=this.paint.get("line-offset").evaluate(n,u);return be&&(f=function(Le,Oe){const Ge=[];for(let Ye=0;Ye<Le.length;Ye++){const Ze=Le[Ye],ht=[];for(let lt=0;lt<Ze.length;lt++){const bt=Ze[lt-1],It=Ze[lt],xt=Ze[lt+1],Mt=lt===0?new G(0,0):It.sub(bt)._unit()._perp(),Ut=lt===Ze.length-1?new G(0,0):xt.sub(It)._unit()._perp(),Ft=Mt._add(Ut)._unit(),xi=Ft.x*Ut.x+Ft.y*Ut.y;xi!==0&&Ft._mult(1/xi),ht.push(Ft._mult(Oe)._add(It))}Ge.push(ht)}return Ge}(f,be*V)),function(Le,Oe,Ge){for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Oe[Ye];if(Le.length>=3){for(let ht=0;ht<Ze.length;ht++)if(vu(Le,Ze[ht]))return!0}if(dk(Le,Ze,Ge))return!0}return!1}(te,f,oe)}isTileClipped(){return!0}},symbol:Xm,background:class extends $s{constructor(c){super(c,zA)}},raster:class extends $s{constructor(c){super(c,NA)}}};class BA{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const b_=63710088e-1;class _n{constructor(n,u){if(isNaN(n)||isNaN(u))throw new Error(`Invalid LngLat object: (${n}, ${u})`);if(this.lng=+n,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _n(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const u=Math.PI/180,f=this.lat*u,M=n.lat*u,z=Math.sin(f)*Math.sin(M)+Math.cos(f)*Math.cos(M)*Math.cos((n.lng-this.lng)*u);return b_*Math.acos(Math.min(z,1))}toBounds(n=0){const u=360*n/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new ih(new _n(this.lng-f,this.lat-u),new _n(this.lng+f,this.lat+u))}static convert(n){if(n instanceof _n)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new _n(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new _n(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ih{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof _n?new _n(n.lng,n.lat):_n.convert(n),this}setSouthWest(n){return this._sw=n instanceof _n?new _n(n.lng,n.lat):_n.convert(n),this}extend(n){const u=this._sw,f=this._ne;let M,z;if(n instanceof _n)M=n,z=n;else{if(!(n instanceof ih))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ih.convert(n)):this.extend(_n.convert(n)):this;if(M=n._sw,z=n._ne,!M||!z)return this}return u||f?(u.lng=Math.min(M.lng,u.lng),u.lat=Math.min(M.lat,u.lat),f.lng=Math.max(z.lng,f.lng),f.lat=Math.max(z.lat,f.lat)):(this._sw=new _n(M.lng,M.lat),this._ne=new _n(z.lng,z.lat)),this}getCenter(){return new _n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _n(this.getWest(),this.getNorth())}getSouthEast(){return new _n(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:f}=_n.convert(n);let M=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&M}static convert(n){return n instanceof ih?n:n&&new ih(n)}}const __=2*Math.PI*b_;function w_(c){return __*Math.cos(c*Math.PI/180)}function T_(c){return(180+c)/360}function C_(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function E_(c,n){return c/w_(n)}function Qx(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Km{constructor(n,u,f=0){this.x=+n,this.y=+u,this.z=+f}static fromLngLat(n,u=0){const f=_n.convert(n);return new Km(T_(f.lng),C_(f.lat),E_(u,f.lat))}toLngLat(){return new _n(360*this.x-180,Qx(this.y))}toAltitude(){return this.z*w_(Qx(this.y))}meterInMercatorCoordinateUnits(){return 1/__*(n=Qx(this.y),1/Math.cos(n*Math.PI/180));var n}}function S_(c,n,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[c*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class Jx{constructor(n,u,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||u<0||u>=Math.pow(2,n))throw new Error(`x=${u}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=u,this.y=f,this.key=mp(0,n,n,u,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,u,f){const M=(V=this.y,te=this.z,oe=S_(256*(z=this.x),256*(V=Math.pow(2,te)-V-1),te),be=S_(256*(z+1),256*(V+1),te),oe[0]+","+oe[1]+","+be[0]+","+be[1]);var z,V,te,oe,be;const Le=function(Oe,Ge,Ye){let Ze,ht="";for(let lt=Oe;lt>0;lt--)Ze=1<<lt-1,ht+=(Ge&Ze?1:0)+(Ye&Ze?2:0);return ht}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,Le).replace(/{bbox-epsg-3857}/g,M)}isChildOf(n){const u=this.z-n.z;return u>0&&n.x===this.x>>u&&n.y===this.y>>u}getTilePoint(n){const u=Math.pow(2,this.z);return new G((n.x*u-this.x)*Vn,(n.y*u-this.y)*Vn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class k_{constructor(n,u){this.wrap=n,this.canonical=u,this.key=mp(n,u.z,u.z,u.x,u.y)}}class za{constructor(n,u,f,M,z){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=u,this.canonical=new Jx(f,+M,+z),this.key=mp(u,n,f,M,z)}clone(){return new za(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-n;return n>this.canonical.z?new za(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new za(n,this.wrap,n,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(n,u){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?mp(this.wrap*+u,n,this.canonical.z,this.canonical.x,this.canonical.y):mp(this.wrap*+u,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const u=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>u&&n.canonical.y===this.canonical.y>>u}children(n){if(this.overscaledZ>=n)return[new za(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,M=2*this.canonical.y;return[new za(u,this.wrap,u,f,M),new za(u,this.wrap,u,f+1,M),new za(u,this.wrap,u,f,M+1),new za(u,this.wrap,u,f+1,M+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new za(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new za(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new k_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Km(n.x-this.wrap,n.y))}}function mp(c,n,u,f,M){(c*=2)<0&&(c=-1*c-1);const z=1<<u;return(z*z*c+z*M+f).toString(36)+u.toString(36)+n.toString(36)}fi("CanonicalTileID",Jx),fi("OverscaledTileID",za,{omit:["posMatrix"]});class A_{constructor(n,u,f){if(this.uid=n,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void w(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const M=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=f||"mapbox";for(let z=0;z<M;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(M,z)]=this.data[this._idx(M-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,M)]=this.data[this._idx(z,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<M;z++)for(let V=0;V<M;V++){const te=this.get(z,V);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(n,u){const f=new Uint8Array(this.data.buffer),M=4*this._idx(n,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[M],f[M+1],f[M+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,u){if(n<-1||n>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(n+1)}_unpackMapbox(n,u,f){return(256*n*256+256*u+f)/10-1e4}_unpackTerrarium(n,u,f){return 256*n+u+f/256-32768}getPixels(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,u,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let M=u*this.dim,z=u*this.dim+this.dim,V=f*this.dim,te=f*this.dim+this.dim;switch(u){case-1:M=z-1;break;case 1:z=M+1}switch(f){case-1:V=te-1;break;case 1:te=V+1}const oe=-u*this.dim,be=-f*this.dim;for(let Le=V;Le<te;Le++)for(let Oe=M;Oe<z;Oe++)this.data[this._idx(Oe,Le)]=n.data[this._idx(Oe+oe,Le+be)]}}fi("DEMData",A_);class M_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let u=0;u<n.length;u++){const f=n[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class P_{constructor(n,u,f,M,z){this.type="Feature",this._vectorTileFeature=n,n._z=u,n._x=f,n._y=M,this.properties=n.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(n[u]=this[u]);return n}}class I_{constructor(n,u){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new nl(Vn,16,0),this.grid3D=new nl(Vn,16,0),this.featureIndexArray=new Ki,this.promoteId=u}insert(n,u,f,M,z,V){const te=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,M,z);const oe=V?this.grid3D:this.grid;for(let be=0;be<u.length;be++){const Le=u[be],Oe=[1/0,1/0,-1/0,-1/0];for(let Ge=0;Ge<Le.length;Ge++){const Ye=Le[Ge];Oe[0]=Math.min(Oe[0],Ye.x),Oe[1]=Math.min(Oe[1],Ye.y),Oe[2]=Math.max(Oe[2],Ye.x),Oe[3]=Math.max(Oe[3],Ye.y)}Oe[0]<Vn&&Oe[1]<Vn&&Oe[2]>=0&&Oe[3]>=0&&oe.insert(te,Oe[0],Oe[1],Oe[2],Oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new Fx(this.rawTileData)).layers,this.sourceLayerCoder=new M_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,u,f,M){this.loadVTLayers();const z=n.params||{},V=Vn/n.tileSize/n.scale,te=Gd(z.filter),oe=n.queryGeometry,be=n.queryPadding*V,Le=L_(oe),Oe=this.grid.query(Le.minX-be,Le.minY-be,Le.maxX+be,Le.maxY+be),Ge=L_(n.cameraQueryGeometry),Ye=this.grid3D.query(Ge.minX-be,Ge.minY-be,Ge.maxX+be,Ge.maxY+be,(lt,bt,It,xt)=>function(Mt,Ut,Ft,xi,Ci){for(const Kt of Mt)if(Ut<=Kt.x&&Ft<=Kt.y&&xi>=Kt.x&&Ci>=Kt.y)return!0;const ii=[new G(Ut,Ft),new G(Ut,Ci),new G(xi,Ci),new G(xi,Ft)];if(Mt.length>2){for(const Kt of ii)if(vu(Mt,Kt))return!0}for(let Kt=0;Kt<Mt.length-1;Kt++)if(fk(Mt[Kt],Mt[Kt+1],ii))return!0;return!1}(n.cameraQueryGeometry,lt-be,bt-be,It+be,xt+be));for(const lt of Ye)Oe.push(lt);Oe.sort(FA);const Ze={};let ht;for(let lt=0;lt<Oe.length;lt++){const bt=Oe[lt];if(bt===ht)continue;ht=bt;const It=this.featureIndexArray.get(bt);let xt=null;this.loadMatchingFeature(Ze,It.bucketIndex,It.sourceLayerIndex,It.featureIndex,te,z.layers,z.availableImages,u,f,M,(Mt,Ut,Ft)=>(xt||(xt=Jc(Mt)),Ut.queryIntersectsFeature(oe,Mt,Ft,xt,this.z,n.transform,V,n.pixelPosMatrix)))}return Ze}loadMatchingFeature(n,u,f,M,z,V,te,oe,be,Le,Oe){const Ge=this.bucketLayerIDs[u];if(V&&!function(lt,bt){for(let It=0;It<lt.length;It++)if(bt.indexOf(lt[It])>=0)return!0;return!1}(V,Ge))return;const Ye=this.sourceLayerCoder.decode(f),Ze=this.vtLayers[Ye].feature(M);if(z.needGeometry){const lt=eh(Ze,!0);if(!z.filter(new on(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!z.filter(new on(this.tileID.overscaledZ),Ze))return;const ht=this.getId(Ze,Ye);for(let lt=0;lt<Ge.length;lt++){const bt=Ge[lt];if(V&&V.indexOf(bt)<0)continue;const It=oe[bt];if(!It)continue;let xt={};ht&&Le&&(xt=Le.getState(It.sourceLayer||"_geojsonTileLayer",ht));const Mt=b({},be[bt]);Mt.paint=D_(Mt.paint,It.paint,Ze,xt,te),Mt.layout=D_(Mt.layout,It.layout,Ze,xt,te);const Ut=!Oe||Oe(Ze,It,xt);if(!Ut)continue;const Ft=new P_(Ze,this.z,this.x,this.y,ht);Ft.layer=Mt;let xi=n[bt];xi===void 0&&(xi=n[bt]=[]),xi.push({featureIndex:M,feature:Ft,intersectionZ:Ut})}}lookupSymbolFeatures(n,u,f,M,z,V,te,oe){const be={};this.loadVTLayers();const Le=Gd(z);for(const Oe of n)this.loadMatchingFeature(be,f,M,Oe,Le,V,te,oe,u);return be}hasLayer(n){for(const u of this.bucketLayerIDs)for(const f of u)if(n===f)return!0;return!1}getId(n,u){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof f=="boolean"&&(f=Number(f))),f}}function D_(c,n,u,f,M){return k(c,(z,V)=>{const te=n instanceof du?n.get(V):null;return te&&te.evaluate?te.evaluate(u,f,M):te})}function L_(c){let n=1/0,u=1/0,f=-1/0,M=-1/0;for(const z of c)n=Math.min(n,z.x),u=Math.min(u,z.y),f=Math.max(f,z.x),M=Math.max(M,z.y);return{minX:n,minY:u,maxX:f,maxY:M}}function FA(c,n){return n-c}var e0;fi("FeatureIndex",I_,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(e0=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",e0.load="load",e0.fullLoad="fullLoad";let Qm=null,gp=[];const t0=1e3/30,UA={mark(c){performance.mark(c)},frame(c){const n=c;Qm!=null&&gp.push(n-Qm),Qm=n},clearMetrics(){Qm=null,gp=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,u=gp.length,f=1/(gp.reduce((z,V)=>z+V,0)/u/1e3),M=gp.filter(z=>z>t0).reduce((z,V)=>z+(V-t0)/t0,0);return{loadTime:c,fullLoadTime:n,fps:f,percentDroppedFrames:M/(u+M)*100}}};r.AJAXError=J,r.ARRAY_TYPE=Hs,r.Actor=class{constructor(c,n,u){this.target=c,this.parent=n,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new BA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?c:window}send(c,n,u,f,M=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const V=O(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:c,hasCallback:!!u,targetMapId:f,mustQueue:M,sourceMapId:this.mapId,data:Gc(n,V)},V),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const n=c.data,u=n.id;if(u&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[u];const f=this.cancelCallbacks[u];delete this.cancelCallbacks[u],f&&f()}else q()||n.mustQueue?(this.tasks[u]=n,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,n)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),n=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(c,n)}processTask(c,n){if(n.type==="<response>"){const u=this.callbacks[c];delete this.callbacks[c],u&&(n.error?u(sl(n.error)):u(null,sl(n.data)))}else{let u=!1;const f=O(this.globalScope)?void 0:[],M=n.hasCallback?(te,oe)=>{u=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:te?Gc(te):null,data:Gc(oe,f)},f)}:te=>{u=!0};let z=null;const V=sl(n.data);if(this.parent[n.type])z=this.parent[n.type](n.sourceMapId,V,M);else if(this.parent.getWorkerSource){const te=n.type.split(".");z=this.parent.getWorkerSource(n.sourceMapId,te[0],V.source)[te[1]](V,M)}else M(new Error(`Could not find function ${n.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[c]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=ap,r.CanonicalTileID=Jx,r.CollisionBoxArray=Ct,r.CollisionCircleLayoutArray=class extends Se{},r.Color=$e,r.DEMData=A_,r.DataConstantProperty=Si,r.DictionaryCoder=M_,r.EXTENT=Vn,r.ErrorEvent=Me,r.EvaluationParameters=on,r.Event=me,r.Evented=De,r.FeatureIndex=I_,r.FillBucket=Nx,r.FillExtrusionBucket=jx,r.GeoJSONFeature=P_,r.ImageAtlas=t_,r.ImagePosition=$x,r.LineBucket=Bx,r.LineStripIndexArray=class extends _t{},r.LngLat=_n,r.LngLatBounds=ih,r.MercatorCoordinate=Km,r.ONE_EM=os,r.OverscaledTileID=za,r.PerformanceUtils=UA,r.PosArray=or,r.Properties=$n,r.QuadTriangleArray=class extends Ue{},r.RGBAImage=Ra,r.RasterBoundsArray=class extends Xc{},r.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},r.ResourceType=_e,r.SegmentVector=Cr,r.SymbolBucket=Su,r.Transitionable=ep,r.TriangleIndexArray=as,r.Uniform1f=gu,r.Uniform1i=class extends La{constructor(c,n){super(c,n),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},r.Uniform2f=class extends La{constructor(c,n){super(c,n),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},r.Uniform3f=class extends La{constructor(c,n){super(c,n),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},r.Uniform4f=Kc,r.UniformColor=yu,r.UniformMatrix4f=class extends La{constructor(c,n){super(c,n),this.current=ck}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let n=1;n<16;n++)if(c[n]!==this.current[n]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},r.UnwrappedTileID=k_,r.ValidationError=je,r.ZoomHistory=Hc,r.add=function(c,n,u){return c[0]=n[0]+u[0],c[1]=n[1]+u[1],c[2]=n[2]+u[2],c},r.addDynamicAttributes=qx,r.asyncAll=function(c,n,u){if(!c.length)return u(null,[]);let f=c.length;const M=new Array(c.length);let z=null;c.forEach((V,te)=>{n(V,(oe,be)=>{oe&&(z=oe),M[te]=be,--f==0&&u(z,M)})})},r.bezier=g,r.bindAll=S,r.cacheEntryPossiblyAdded=function(c){ae++,ae>he&&(c.getActor().send("enforceCacheSizeLimit",re),ae=0)},r.clamp=y,r.clearTileCache=function(c){const n=caches.delete(H);c&&n.catch(c).then(()=>c())},r.clipLine=p_,r.clone=function(c){var n=new Hs(16);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=c[3],n[4]=c[4],n[5]=c[5],n[6]=c[6],n[7]=c[7],n[8]=c[8],n[9]=c[9],n[10]=c[10],n[11]=c[11],n[12]=c[12],n[13]=c[13],n[14]=c[14],n[15]=c[15],n},r.clone$1=A,r.clone$2=function(c){var n=new Hs(3);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n},r.collisionCircleLayout=sA,r.config=F,r.copy=function(c,n){return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},r.create=function(){var c=new Hs(16);return Hs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},r.create$1=E1,r.createExpression=Oc,r.createFilter=Gd,r.createLayout=Nn,r.createStyleLayer=function(c){return c.type==="custom"?new OA(c):new jA[c.type](c)},r.cross=function(c,n,u){var f=n[0],M=n[1],z=n[2],V=u[0],te=u[1],oe=u[2];return c[0]=M*oe-z*te,c[1]=z*V-f*oe,c[2]=f*te-M*V,c},r.dot=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]},r.dot$1=function(c,n){return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]+c[3]*n[3]},r.ease=v,r.emitValidationErrors=Cm,r.enforceCacheSizeLimit=function(c){ie(),W&&W.then(n=>{n.keys().then(u=>{for(let f=0;f<u.length-c;f++)n.delete(u[f])})})},r.equals=function(c,n){var u=c[0],f=c[1],M=c[2],z=c[3],V=c[4],te=c[5],oe=c[6],be=c[7],Le=c[8],Oe=c[9],Ge=c[10],Ye=c[11],Ze=c[12],ht=c[13],lt=c[14],bt=c[15],It=n[0],xt=n[1],Mt=n[2],Ut=n[3],Ft=n[4],xi=n[5],Ci=n[6],ii=n[7],Kt=n[8],Zt=n[9],ri=n[10],ei=n[11],Vt=n[12],Mi=n[13],ki=n[14],lr=n[15];return Math.abs(u-It)<=Gs*Math.max(1,Math.abs(u),Math.abs(It))&&Math.abs(f-xt)<=Gs*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(M-Mt)<=Gs*Math.max(1,Math.abs(M),Math.abs(Mt))&&Math.abs(z-Ut)<=Gs*Math.max(1,Math.abs(z),Math.abs(Ut))&&Math.abs(V-Ft)<=Gs*Math.max(1,Math.abs(V),Math.abs(Ft))&&Math.abs(te-xi)<=Gs*Math.max(1,Math.abs(te),Math.abs(xi))&&Math.abs(oe-Ci)<=Gs*Math.max(1,Math.abs(oe),Math.abs(Ci))&&Math.abs(be-ii)<=Gs*Math.max(1,Math.abs(be),Math.abs(ii))&&Math.abs(Le-Kt)<=Gs*Math.max(1,Math.abs(Le),Math.abs(Kt))&&Math.abs(Oe-Zt)<=Gs*Math.max(1,Math.abs(Oe),Math.abs(Zt))&&Math.abs(Ge-ri)<=Gs*Math.max(1,Math.abs(Ge),Math.abs(ri))&&Math.abs(Ye-ei)<=Gs*Math.max(1,Math.abs(Ye),Math.abs(ei))&&Math.abs(Ze-Vt)<=Gs*Math.max(1,Math.abs(Ze),Math.abs(Vt))&&Math.abs(ht-Mi)<=Gs*Math.max(1,Math.abs(ht),Math.abs(Mi))&&Math.abs(lt-ki)<=Gs*Math.max(1,Math.abs(lt),Math.abs(ki))&&Math.abs(bt-lr)<=Gs*Math.max(1,Math.abs(bt),Math.abs(lr))},r.evaluateSizeForFeature=function(c,{uSize:n,uSizeT:u},{lowerSize:f,upperSize:M}){return c.kind==="source"?f/ul:c.kind==="composite"?pn(f/ul,M/ul,u):n},r.evaluateSizeForZoom=function(c,n){let u=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:M,minZoom:z,maxZoom:V}=c,te=M?y(Qs.interpolationFactor(M,n,z,V),0,1):0;c.kind==="camera"?f=pn(c.minSize,c.maxSize,te):u=te}return{uSizeT:u,uSize:f}},r.evaluateVariableOffset=g_,r.evented=$l,r.exported=L,r.exported$1=Ce,r.extend=b,r.filterObject=x,r.fromRotation=function(c,n){var u=Math.sin(n),f=Math.cos(n);return c[0]=f,c[1]=u,c[2]=0,c[3]=-u,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},r.fromScaling=function(c,n){return c[0]=n[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=n[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},r.getAnchorAlignment=Gx,r.getAnchorJustification=Wx,r.getArrayBuffer=we,r.getImage=He,r.getJSON=function(c,n){return ye(b(c,{type:"json"}),n)},r.getOverlapMode=Kx,r.getRTLTextPluginStatus=Jd,r.getReferrer=ne,r.getVideo=function(c,n){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){n(null,u)};for(let f=0;f<c.length;f++){const M=window.document.createElement("source");ze(c[f])||(u.crossOrigin="Anonymous"),M.src=c[f],u.appendChild(M)}return{cancel:()=>{}}},r.identity=kx,r.invert=function(c,n){var u=n[0],f=n[1],M=n[2],z=n[3],V=n[4],te=n[5],oe=n[6],be=n[7],Le=n[8],Oe=n[9],Ge=n[10],Ye=n[11],Ze=n[12],ht=n[13],lt=n[14],bt=n[15],It=u*te-f*V,xt=u*oe-M*V,Mt=u*be-z*V,Ut=f*oe-M*te,Ft=f*be-z*te,xi=M*be-z*oe,Ci=Le*ht-Oe*Ze,ii=Le*lt-Ge*Ze,Kt=Le*bt-Ye*Ze,Zt=Oe*lt-Ge*ht,ri=Oe*bt-Ye*ht,ei=Ge*bt-Ye*lt,Vt=It*ei-xt*ri+Mt*Zt+Ut*Kt-Ft*ii+xi*Ci;return Vt?(c[0]=(te*ei-oe*ri+be*Zt)*(Vt=1/Vt),c[1]=(M*ri-f*ei-z*Zt)*Vt,c[2]=(ht*xi-lt*Ft+bt*Ut)*Vt,c[3]=(Ge*Ft-Oe*xi-Ye*Ut)*Vt,c[4]=(oe*Kt-V*ei-be*ii)*Vt,c[5]=(u*ei-M*Kt+z*ii)*Vt,c[6]=(lt*Mt-Ze*xi-bt*xt)*Vt,c[7]=(Le*xi-Ge*Mt+Ye*xt)*Vt,c[8]=(V*ri-te*Kt+be*Ci)*Vt,c[9]=(f*Kt-u*ri-z*Ci)*Vt,c[10]=(Ze*Ft-ht*Mt+bt*It)*Vt,c[11]=(Oe*Mt-Le*Ft-Ye*It)*Vt,c[12]=(te*ii-V*Zt-oe*Ci)*Vt,c[13]=(u*Zt-f*ii+M*Ci)*Vt,c[14]=(ht*xt-Ze*Ut-lt*It)*Vt,c[15]=(Le*Ut-Oe*xt+Ge*It)*Vt,c):null},r.isImageBitmap=R,r.isSafari=O,r.isWorker=q,r.keysDifference=function(c,n){const u=[];for(const f in c)f in n||u.push(f);return u},r.lazyLoadRTLTextPlugin=function(){va.isLoading()||va.isLoaded()||Jd()!=="deferred"||cu()},r.makeRequest=ye,r.mapObject=k,r.mercatorXfromLng=T_,r.mercatorYfromLat=C_,r.mercatorZfromAltitude=E_,r.mul=yk,r.mul$1=function(c,n,u){return c[0]=n[0]*u[0],c[1]=n[1]*u[1],c[2]=n[2]*u[2],c[3]=n[3]*u[3],c},r.multiply=S1,r.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},r.normalize=function(c,n){var u=n[0],f=n[1],M=n[2],z=u*u+f*f+M*M;return z>0&&(z=1/Math.sqrt(z)),c[0]=n[0]*z,c[1]=n[1]*z,c[2]=n[2]*z,c},r.number=pn,r.ortho=function(c,n,u,f,M,z,V){var te=1/(n-u),oe=1/(f-M),be=1/(z-V);return c[0]=-2*te,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*oe,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*be,c[11]=0,c[12]=(n+u)*te,c[13]=(M+f)*oe,c[14]=(V+z)*be,c[15]=1,c},r.parseCacheControl=Y,r.parseGlyphPbf=function(c){return new Fx(c).readFields(gA,[])},r.pbf=Fx,r.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Vn/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const n=c.bucket.layers[0].layout,u=c.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:u["icon-size"].possiblyEvaluate(new on(c.bucket.zoom+1),c.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new on(c.bucket.zoom+1),c.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new on(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:oe,maxZoom:be}=c.bucket.textSizeData;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new on(oe),c.canonical),u["text-size"].possiblyEvaluate(new on(be),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:oe,maxZoom:be}=c.bucket.iconSizeData;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new on(oe),c.canonical),u["icon-size"].possiblyEvaluate(new on(be),c.canonical)]}const M=n.get("text-line-height")*os,z=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",V=n.get("text-keep-upright"),te=n.get("text-size");for(const oe of c.bucket.features){const be=n.get("text-font").evaluate(oe,{},c.canonical).join(","),Le=te.evaluate(oe,{},c.canonical),Oe=f.layoutTextSize.evaluate(oe,{},c.canonical),Ge=f.layoutIconSize.evaluate(oe,{},c.canonical),Ye={horizontal:{},vertical:void 0},Ze=oe.text;let ht,lt=[0,0];if(Ze){const xt=Ze.toString(),Mt=n.get("text-letter-spacing").evaluate(oe,{},c.canonical)*os,Ut=Em(xt)?Mt:0,Ft=n.get("text-anchor").evaluate(oe,{},c.canonical),xi=n.get("text-variable-anchor");if(!xi){const ri=n.get("text-radial-offset").evaluate(oe,{},c.canonical);lt=ri?g_(Ft,[ri*os,Hx]):n.get("text-offset").evaluate(oe,{},c.canonical).map(ei=>ei*os)}let Ci=z?"center":n.get("text-justify").evaluate(oe,{},c.canonical);const ii=n.get("symbol-placement"),Kt=ii==="point"?n.get("text-max-width").evaluate(oe,{},c.canonical)*os:0,Zt=()=>{c.bucket.allowVerticalPlacement&&Yd(xt)&&(Ye.vertical=Vm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Kt,M,Ft,"left",Ut,lt,r.WritingMode.vertical,!0,ii,Oe,Le))};if(!z&&xi){const ri=Ci==="auto"?xi.map(Vt=>Wx(Vt)):[Ci];let ei=!1;for(let Vt=0;Vt<ri.length;Vt++){const Mi=ri[Vt];if(!Ye.horizontal[Mi])if(ei)Ye.horizontal[Mi]=Ye.horizontal[0];else{const ki=Vm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Kt,M,"center",Mi,Ut,lt,r.WritingMode.horizontal,!1,ii,Oe,Le);ki&&(Ye.horizontal[Mi]=ki,ei=ki.positionedLines.length===1)}}Zt()}else{Ci==="auto"&&(Ci=Wx(Ft));const ri=Vm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Kt,M,Ft,Ci,Ut,lt,r.WritingMode.horizontal,!1,ii,Oe,Le);ri&&(Ye.horizontal[Ci]=ri),Zt(),Yd(xt)&&z&&V&&(Ye.vertical=Vm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Kt,M,Ft,Ci,Ut,lt,r.WritingMode.vertical,!1,ii,Oe,Le))}}let bt=!1;if(oe.icon&&oe.icon.name){const xt=c.imageMap[oe.icon.name];xt&&(ht=wA(c.imagePositions[oe.icon.name],n.get("icon-offset").evaluate(oe,{},c.canonical),n.get("icon-anchor").evaluate(oe,{},c.canonical)),bt=!!xt.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=bt:c.bucket.sdfIcons!==bt&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==c.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const It=x_(Ye.horizontal)||Ye.vertical;c.bucket.iconsInText=!!It&&It.iconsInText,(It||ht)&&MA(c.bucket,oe,Ye,ht,c.imageMap,f,Oe,Ge,lt,bt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},r.perspective=function(c,n,u,f,M){var z,V=1/Math.tan(n/2);return c[0]=V/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=V,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,M!=null&&M!==1/0?(c[10]=(M+f)*(z=1/(f-M)),c[14]=2*M*f*z):(c[10]=-1,c[14]=-2*f),c},r.pick=function(c,n){const u={};for(let f=0;f<n.length;f++){const M=n[f];M in c&&(u[M]=c[M])}return u},r.plugin=va,r.pointGeometry=G,r.polygonIntersectsPolygon=_1,r.potpack=e_,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=fi,r.registerForPluginStateChange=function(c){return c({pluginStatus:Us,pluginURL:So}),$l.on("pluginStateChange",c),c},r.renderColorRamp=L1,r.rotateX=function(c,n,u){var f=Math.sin(u),M=Math.cos(u),z=n[4],V=n[5],te=n[6],oe=n[7],be=n[8],Le=n[9],Oe=n[10],Ge=n[11];return n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[4]=z*M+be*f,c[5]=V*M+Le*f,c[6]=te*M+Oe*f,c[7]=oe*M+Ge*f,c[8]=be*M-z*f,c[9]=Le*M-V*f,c[10]=Oe*M-te*f,c[11]=Ge*M-oe*f,c},r.rotateZ=function(c,n,u){var f=Math.sin(u),M=Math.cos(u),z=n[0],V=n[1],te=n[2],oe=n[3],be=n[4],Le=n[5],Oe=n[6],Ge=n[7];return n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c[0]=z*M+be*f,c[1]=V*M+Le*f,c[2]=te*M+Oe*f,c[3]=oe*M+Ge*f,c[4]=be*M-z*f,c[5]=Le*M-V*f,c[6]=Oe*M-te*f,c[7]=Ge*M-oe*f,c},r.scale=function(c,n,u){var f=u[0],M=u[1],z=u[2];return c[0]=n[0]*f,c[1]=n[1]*f,c[2]=n[2]*f,c[3]=n[3]*f,c[4]=n[4]*M,c[5]=n[5]*M,c[6]=n[6]*M,c[7]=n[7]*M,c[8]=n[8]*z,c[9]=n[9]*z,c[10]=n[10]*z,c[11]=n[11]*z,c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c},r.scale$1=function(c,n,u){return c[0]=n[0]*u,c[1]=n[1]*u,c[2]=n[2]*u,c},r.setCacheLimits=function(c,n){re=c,he=n},r.setRTLTextPlugin=function(c,n,u=!1){if(Us===lu||Us===Zd||Us===Xd)throw new Error("setRTLTextPlugin cannot be called multiple times.");So=L.resolveURL(c),Us=lu,Kd=n,Qd(),u||cu()},r.spec=Pe,r.sphericalToCartesian=function([c,n,u]){return n+=90,n*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(n)*Math.sin(u),y:c*Math.sin(n)*Math.sin(u),z:c*Math.cos(u)}},r.sqrLen=function(c){var n=c[0],u=c[1];return n*n+u*u},r.sub=function(c,n,u){return c[0]=n[0]-u[0],c[1]=n[1]-u[1],c[2]=n[2]-u[2],c},r.toEvaluationFeature=eh,r.transformMat3=function(c,n,u){var f=n[0],M=n[1],z=n[2];return c[0]=f*u[0]+M*u[3]+z*u[6],c[1]=f*u[1]+M*u[4]+z*u[7],c[2]=f*u[2]+M*u[5]+z*u[8],c},r.transformMat4=zm,r.transformMat4$1=function(c,n,u){var f=n[0],M=n[1];return c[0]=u[0]*f+u[4]*M+u[12],c[1]=u[1]*f+u[5]*M+u[13],c},r.translate=function(c,n,u){var f,M,z,V,te,oe,be,Le,Oe,Ge,Ye,Ze,ht=u[0],lt=u[1],bt=u[2];return n===c?(c[12]=n[0]*ht+n[4]*lt+n[8]*bt+n[12],c[13]=n[1]*ht+n[5]*lt+n[9]*bt+n[13],c[14]=n[2]*ht+n[6]*lt+n[10]*bt+n[14],c[15]=n[3]*ht+n[7]*lt+n[11]*bt+n[15]):(M=n[1],z=n[2],V=n[3],te=n[4],oe=n[5],be=n[6],Le=n[7],Oe=n[8],Ge=n[9],Ye=n[10],Ze=n[11],c[0]=f=n[0],c[1]=M,c[2]=z,c[3]=V,c[4]=te,c[5]=oe,c[6]=be,c[7]=Le,c[8]=Oe,c[9]=Ge,c[10]=Ye,c[11]=Ze,c[12]=f*ht+te*lt+Oe*bt+n[12],c[13]=M*ht+oe*lt+Ge*bt+n[13],c[14]=z*ht+be*lt+Ye*bt+n[14],c[15]=V*ht+Le*lt+Ze*bt+n[15]),c},r.triggerPluginCompletionEvent=Am,r.unicodeBlockLookup=ti,r.uniqueId=function(){return T++},r.validateCustomStyleLayer=function(c){const n=[],u=c.id;return u===void 0&&n.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&n.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&n.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),n},r.validateLight=mx,r.validateStyle=rl,r.vectorTile=ql,r.warnOnce=w,r.wrap=C}),l(["./shared"],function(r){function p(We){const ve=typeof We;if(ve==="number"||ve==="boolean"||ve==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){let Ke="[";for(const st of We)Ke+=`${p(st)},`;return`${Ke}]`}const Re=Object.keys(We).sort();let $e="{";for(let Ke=0;Ke<Re.length;Ke++)$e+=`${JSON.stringify(Re[Ke])}:${p(We[Re[Ke]])},`;return`${$e}}`}function m(We){let ve="";for(const Re of r.refProperties)ve+=`/${p(We[Re])}`;return ve}class g{constructor(ve){this.keyCache={},ve&&this.replace(ve)}replace(ve){this._layerConfigs={},this._layers={},this.update(ve,[])}update(ve,Re){for(const Ke of ve){this._layerConfigs[Ke.id]=Ke;const st=this._layers[Ke.id]=r.createStyleLayer(Ke);st._featureFilter=r.createFilter(st.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of Re)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const $e=function(Ke,st){const ct={};for(let nt=0;nt<Ke.length;nt++){const mt=st&&st[Ke[nt].id]||m(Ke[nt]);st&&(st[Ke[nt].id]=mt);let kt=ct[mt];kt||(kt=ct[mt]=[]),kt.push(Ke[nt])}const ot=[];for(const nt in ct)ot.push(ct[nt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Ke of $e){const st=Ke.map(Nt=>this._layers[Nt.id]),ct=st[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let nt=this.familiesBySource[ot];nt||(nt=this.familiesBySource[ot]={});const mt=ct.sourceLayer||"_geojsonTileLayer";let kt=nt[mt];kt||(kt=nt[mt]=[]),kt.push(st)}}}class v{constructor(ve){const Re={},$e=[];for(const ot in ve){const nt=ve[ot],mt=Re[ot]={};for(const kt in nt){const Nt=nt[+kt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const Lt={x:0,y:0,w:Nt.bitmap.width+2,h:Nt.bitmap.height+2};$e.push(Lt),mt[kt]={rect:Lt,metrics:Nt.metrics}}}const{w:Ke,h:st}=r.potpack($e),ct=new r.AlphaImage({width:Ke||1,height:st||1});for(const ot in ve){const nt=ve[ot];for(const mt in nt){const kt=nt[+mt];if(!kt||kt.bitmap.width===0||kt.bitmap.height===0)continue;const Nt=Re[ot][mt].rect;r.AlphaImage.copy(kt.bitmap,ct,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},kt.bitmap)}}this.image=ct,this.positions=Re}}r.register("GlyphAtlas",v);class y{constructor(ve){this.tileID=new r.OverscaledTileID(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId}parse(ve,Re,$e,Ke,st){this.status="parsing",this.data=ve,this.collisionBoxArray=new r.CollisionBoxArray;const ct=new r.DictionaryCoder(Object.keys(ve.layers).sort()),ot=new r.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const nt={},mt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:$e},kt=Re.familiesBySource[this.source];for(const Pi in kt){const $i=ve.layers[Pi];if(!$i)continue;$i.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${Pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ji=ct.encode(Pi),hr=[];for(let $r=0;$r<$i.length;$r++){const vn=$i.feature($r),Un=ot.getId(vn,Pi);hr.push({feature:vn,id:Un,index:$r,sourceLayerIndex:ji})}for(const $r of kt[Pi]){const vn=$r[0];vn.source!==this.source&&r.warnOnce(`layer.source = ${vn.source} does not equal this.source = ${this.source}`),vn.minzoom&&this.zoom<Math.floor(vn.minzoom)||vn.maxzoom&&this.zoom>=vn.maxzoom||vn.visibility!=="none"&&(C($r,this.zoom,$e),(nt[vn.id]=vn.createBucket({index:ot.bucketLayerIDs.length,layers:$r,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(hr,mt,this.tileID.canonical),ot.bucketLayerIDs.push($r.map(Un=>Un.id)))}}let Nt,Lt,oi,Qt;const pi=r.mapObject(mt.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(pi).length?Ke.send("getGlyphs",{uid:this.uid,stacks:pi},(Pi,$i)=>{Nt||(Nt=Pi,Lt=$i,_i.call(this))}):Lt={};const bi=Object.keys(mt.iconDependencies);bi.length?Ke.send("getImages",{icons:bi,source:this.source,tileID:this.tileID,type:"icons"},(Pi,$i)=>{Nt||(Nt=Pi,oi=$i,_i.call(this))}):oi={};const Ui=Object.keys(mt.patternDependencies);function _i(){if(Nt)return st(Nt);if(Lt&&oi&&Qt){const Pi=new v(Lt),$i=new r.ImageAtlas(oi,Qt);for(const ji in nt){const hr=nt[ji];hr instanceof r.SymbolBucket?(C(hr.layers,this.zoom,$e),r.performSymbolLayout({bucket:hr,glyphMap:Lt,glyphPositions:Pi.positions,imageMap:oi,imagePositions:$i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):hr.hasPattern&&(hr instanceof r.LineBucket||hr instanceof r.FillBucket||hr instanceof r.FillExtrusionBucket)&&(C(hr.layers,this.zoom,$e),hr.addFeatures(mt,this.tileID.canonical,$i.patternPositions))}this.status="done",st(null,{buckets:Object.values(nt).filter(ji=>!ji.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pi.image,imageAtlas:$i,glyphMap:this.returnDependencies?Lt:null,iconMap:this.returnDependencies?oi:null,glyphPositions:this.returnDependencies?Pi.positions:null})}}Ui.length?Ke.send("getImages",{icons:Ui,source:this.source,tileID:this.tileID,type:"patterns"},(Pi,$i)=>{Nt||(Nt=Pi,Qt=$i,_i.call(this))}):Qt={},_i.call(this)}}function C(We,ve,Re){const $e=new r.EvaluationParameters(ve);for(const Ke of We)Ke.recalculate($e,Re)}function b(We,ve){const Re=r.getArrayBuffer(We.request,($e,Ke,st,ct)=>{$e?ve($e):Ke&&ve(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(Ke)),rawData:Ke,cacheControl:st,expires:ct})});return()=>{Re.cancel(),ve()}}class T{constructor(ve,Re,$e,Ke){this.actor=ve,this.layerIndex=Re,this.availableImages=$e,this.loadVectorData=Ke||b,this.loading={},this.loaded={}}loadTile(ve,Re){const $e=ve.uid;this.loading||(this.loading={});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new r.RequestPerformance(ve.request),st=this.loading[$e]=new y(ve);st.abort=this.loadVectorData(ve,(ct,ot)=>{if(delete this.loading[$e],ct||!ot)return st.status="done",this.loaded[$e]=st,Re(ct);const nt=ot.rawData,mt={};ot.expires&&(mt.expires=ot.expires),ot.cacheControl&&(mt.cacheControl=ot.cacheControl);const kt={};if(Ke){const Nt=Ke.finish();Nt&&(kt.resourceTiming=JSON.parse(JSON.stringify(Nt)))}st.vectorTile=ot.vectorTile,st.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(Nt,Lt)=>{if(Nt||!Lt)return Re(Nt);Re(null,r.extend({rawTileData:nt.slice(0)},Lt,mt,kt))}),this.loaded=this.loaded||{},this.loaded[$e]=st})}reloadTile(ve,Re){const $e=this.loaded,Ke=ve.uid,st=this;if($e&&$e[Ke]){const ct=$e[Ke];ct.showCollisionBoxes=ve.showCollisionBoxes;const ot=(nt,mt)=>{const kt=ct.reloadCallback;kt&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,st.layerIndex,this.availableImages,st.actor,kt)),Re(nt,mt)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(ve,Re){const $e=this.loading,Ke=ve.uid;$e&&$e[Ke]&&$e[Ke].abort&&($e[Ke].abort(),delete $e[Ke]),Re()}removeTile(ve,Re){const $e=this.loaded,Ke=ve.uid;$e&&$e[Ke]&&delete $e[Ke],Re()}}class S{constructor(){this.loaded={}}loadTile(ve,Re){const{uid:$e,encoding:Ke,rawImageData:st}=ve,ct=r.isImageBitmap(st)?this.getImageData(st):st,ot=new r.DEMData($e,ct,Ke);this.loaded=this.loaded||{},this.loaded[$e]=ot,Re(null,ot)}getImageData(ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ve.width,ve.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ve.width,this.offscreenCanvas.height=ve.height,this.offscreenCanvasContext.drawImage(ve,0,0,ve.width,ve.height);const Re=this.offscreenCanvasContext.getImageData(-1,-1,ve.width+2,ve.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Re.width,height:Re.height},Re.data)}removeTile(ve){const Re=this.loaded,$e=ve.uid;Re&&Re[$e]&&delete Re[$e]}}var k=function We(ve,Re){var $e,Ke=ve&&ve.type;if(Ke==="FeatureCollection")for($e=0;$e<ve.features.length;$e++)We(ve.features[$e],Re);else if(Ke==="GeometryCollection")for($e=0;$e<ve.geometries.length;$e++)We(ve.geometries[$e],Re);else if(Ke==="Feature")We(ve.geometry,Re);else if(Ke==="Polygon")x(ve.coordinates,Re);else if(Ke==="MultiPolygon")for($e=0;$e<ve.coordinates.length;$e++)x(ve.coordinates[$e],Re);return ve};function x(We,ve){if(We.length!==0){A(We[0],ve);for(var Re=1;Re<We.length;Re++)A(We[Re],!1)}}function A(We,ve){for(var Re=0,$e=0,Ke=0,st=We.length,ct=st-1;Ke<st;ct=Ke++){var ot=(We[Ke][0]-We[ct][0])*(We[ct][1]+We[Ke][1]),nt=Re+ot;$e+=Math.abs(Re)>=Math.abs(ot)?Re-nt+ot:ot-nt+Re,Re=nt}Re+$e>=0!=!!ve&&We.reverse()}const D=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class w{constructor(ve){this._feature=ve,this.extent=r.EXTENT,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))}loadGeometry(){if(this._feature.type===1){const ve=[];for(const Re of this._feature.geometry)ve.push([new r.pointGeometry(Re[0],Re[1])]);return ve}{const ve=[];for(const Re of this._feature.geometry){const $e=[];for(const Ke of Re)$e.push(new r.pointGeometry(Ke[0],Ke[1]));ve.push($e)}return ve}}toGeoJSON(ve,Re,$e){return D.call(this,ve,Re,$e)}}class I{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=ve.length,this._features=ve}feature(ve){return new w(this._features[ve])}}var N={exports:{}},q=r.pointGeometry,Y=r.vectorTile.VectorTileFeature,X=B;function B(We,ve){this.options=ve||{},this.features=We,this.length=We.length}function j(We,ve){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=ve||4096}B.prototype.feature=function(We){return new j(this.features[We],this.options.extent)},j.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var ve=0;ve<We.length;ve++){for(var Re=We[ve],$e=[],Ke=0;Ke<Re.length;Ke++)$e.push(new q(Re[Ke][0],Re[Ke][1]));this.geometry.push($e)}return this.geometry},j.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,ve=1/0,Re=-1/0,$e=1/0,Ke=-1/0,st=0;st<We.length;st++)for(var ct=We[st],ot=0;ot<ct.length;ot++){var nt=ct[ot];ve=Math.min(ve,nt.x),Re=Math.max(Re,nt.x),$e=Math.min($e,nt.y),Ke=Math.max(Ke,nt.y)}return[ve,$e,Re,Ke]},j.prototype.toGeoJSON=Y.prototype.toGeoJSON;var O=r.pbf,R=X;function L(We){var ve=new O;return function(Re,$e){for(var Ke in Re.layers)$e.writeMessage(3,G,Re.layers[Ke])}(We,ve),ve.finish()}function G(We,ve){var Re;ve.writeVarintField(15,We.version||1),ve.writeStringField(1,We.name||""),ve.writeVarintField(5,We.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(Re=0;Re<We.length;Re++)$e.feature=We.feature(Re),ve.writeMessage(2,$,$e);var Ke=$e.keys;for(Re=0;Re<Ke.length;Re++)ve.writeStringField(3,Ke[Re]);var st=$e.values;for(Re=0;Re<st.length;Re++)ve.writeMessage(4,he,st[Re])}function $(We,ve){var Re=We.feature;Re.id!==void 0&&ve.writeVarintField(1,Re.id),ve.writeMessage(2,F,We),ve.writeVarintField(3,Re.type),ve.writeMessage(4,re,Re)}function F(We,ve){var Re=We.feature,$e=We.keys,Ke=We.values,st=We.keycache,ct=We.valuecache;for(var ot in Re.properties){var nt=Re.properties[ot],mt=st[ot];if(nt!==null){mt===void 0&&($e.push(ot),st[ot]=mt=$e.length-1),ve.writeVarint(mt);var kt=typeof nt;kt!=="string"&&kt!=="boolean"&&kt!=="number"&&(nt=JSON.stringify(nt));var Nt=kt+":"+nt,Lt=ct[Nt];Lt===void 0&&(Ke.push(nt),ct[Nt]=Lt=Ke.length-1),ve.writeVarint(Lt)}}}function H(We,ve){return(ve<<3)+(7&We)}function W(We){return We<<1^We>>31}function re(We,ve){for(var Re=We.loadGeometry(),$e=We.type,Ke=0,st=0,ct=Re.length,ot=0;ot<ct;ot++){var nt=Re[ot],mt=1;$e===1&&(mt=nt.length),ve.writeVarint(H(1,mt));for(var kt=$e===3?nt.length-1:nt.length,Nt=0;Nt<kt;Nt++){Nt===1&&$e!==1&&ve.writeVarint(H(2,kt-1));var Lt=nt[Nt].x-Ke,oi=nt[Nt].y-st;ve.writeVarint(W(Lt)),ve.writeVarint(W(oi)),Ke+=Lt,st+=oi}$e===3&&ve.writeVarint(H(7,1))}}function he(We,ve){var Re=typeof We;Re==="string"?ve.writeStringField(1,We):Re==="boolean"?ve.writeBooleanField(7,We):Re==="number"&&(We%1!=0?ve.writeDoubleField(3,We):We<0?ve.writeSVarintField(6,We):ve.writeVarintField(5,We))}function ie(We,ve,Re,$e,Ke,st){if(Ke-$e<=Re)return;const ct=$e+Ke>>1;ae(We,ve,ct,$e,Ke,st%2),ie(We,ve,Re,$e,ct-1,st+1),ie(We,ve,Re,ct+1,Ke,st+1)}function ae(We,ve,Re,$e,Ke,st){for(;Ke>$e;){if(Ke-$e>600){const mt=Ke-$e+1,kt=Re-$e+1,Nt=Math.log(mt),Lt=.5*Math.exp(2*Nt/3),oi=.5*Math.sqrt(Nt*Lt*(mt-Lt)/mt)*(kt-mt/2<0?-1:1);ae(We,ve,Re,Math.max($e,Math.floor(Re-kt*Lt/mt+oi)),Math.min(Ke,Math.floor(Re+(mt-kt)*Lt/mt+oi)),st)}const ct=ve[2*Re+st];let ot=$e,nt=Ke;for(Ce(We,ve,$e,Re),ve[2*Ke+st]>ct&&Ce(We,ve,$e,Ke);ot<nt;){for(Ce(We,ve,ot,nt),ot++,nt--;ve[2*ot+st]<ct;)ot++;for(;ve[2*nt+st]>ct;)nt--}ve[2*$e+st]===ct?Ce(We,ve,$e,nt):(nt++,Ce(We,ve,nt,Ke)),nt<=Re&&($e=nt+1),Re<=nt&&(Ke=nt-1)}}function Ce(We,ve,Re,$e){ge(We,Re,$e),ge(ve,2*Re,2*$e),ge(ve,2*Re+1,2*$e+1)}function ge(We,ve,Re){const $e=We[ve];We[ve]=We[Re],We[Re]=$e}function ke(We,ve,Re,$e){const Ke=We-Re,st=ve-$e;return Ke*Ke+st*st}N.exports=L,N.exports.fromVectorTileJs=L,N.exports.fromGeojsonVt=function(We,ve){ve=ve||{};var Re={};for(var $e in We)Re[$e]=new R(We[$e].features,ve),Re[$e].name=$e,Re[$e].version=ve.version,Re[$e].extent=ve.extent;return L({layers:Re})},N.exports.GeoJSONWrapper=R;const K=We=>We[0],Q=We=>We[1];class le{constructor(ve,Re=K,$e=Q,Ke=64,st=Float64Array){this.nodeSize=Ke,this.points=ve;const ct=ve.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(ve.length),nt=this.coords=new st(2*ve.length);for(let mt=0;mt<ve.length;mt++)ot[mt]=mt,nt[2*mt]=Re(ve[mt]),nt[2*mt+1]=$e(ve[mt]);ie(ot,nt,Ke,0,ot.length-1,0)}range(ve,Re,$e,Ke){return function(st,ct,ot,nt,mt,kt,Nt){const Lt=[0,st.length-1,0],oi=[];let Qt,pi;for(;Lt.length;){const bi=Lt.pop(),Ui=Lt.pop(),_i=Lt.pop();if(Ui-_i<=Nt){for(let ji=_i;ji<=Ui;ji++)Qt=ct[2*ji],pi=ct[2*ji+1],Qt>=ot&&Qt<=mt&&pi>=nt&&pi<=kt&&oi.push(st[ji]);continue}const Pi=Math.floor((_i+Ui)/2);Qt=ct[2*Pi],pi=ct[2*Pi+1],Qt>=ot&&Qt<=mt&&pi>=nt&&pi<=kt&&oi.push(st[Pi]);const $i=(bi+1)%2;(bi===0?ot<=Qt:nt<=pi)&&(Lt.push(_i),Lt.push(Pi-1),Lt.push($i)),(bi===0?mt>=Qt:kt>=pi)&&(Lt.push(Pi+1),Lt.push(Ui),Lt.push($i))}return oi}(this.ids,this.coords,ve,Re,$e,Ke,this.nodeSize)}within(ve,Re,$e){return function(Ke,st,ct,ot,nt,mt){const kt=[0,Ke.length-1,0],Nt=[],Lt=nt*nt;for(;kt.length;){const oi=kt.pop(),Qt=kt.pop(),pi=kt.pop();if(Qt-pi<=mt){for(let $i=pi;$i<=Qt;$i++)ke(st[2*$i],st[2*$i+1],ct,ot)<=Lt&&Nt.push(Ke[$i]);continue}const bi=Math.floor((pi+Qt)/2),Ui=st[2*bi],_i=st[2*bi+1];ke(Ui,_i,ct,ot)<=Lt&&Nt.push(Ke[bi]);const Pi=(oi+1)%2;(oi===0?ct-nt<=Ui:ot-nt<=_i)&&(kt.push(pi),kt.push(bi-1),kt.push(Pi)),(oi===0?ct+nt>=Ui:ot+nt>=_i)&&(kt.push(bi+1),kt.push(Qt),kt.push(Pi))}return Nt}(this.ids,this.coords,ve,Re,$e,this.nodeSize)}}const _e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:We=>We},J=Math.fround||(ne=new Float32Array(1),We=>(ne[0]=+We,ne[0]));var ne;class ue{constructor(ve){this.options=Ae(Object.create(_e),ve),this.trees=new Array(this.options.maxZoom+1)}load(ve){const{log:Re,minZoom:$e,maxZoom:Ke,nodeSize:st}=this.options;Re&&console.time("total time");const ct=`prepare ${ve.length} points`;Re&&console.time(ct),this.points=ve;let ot=[];for(let nt=0;nt<ve.length;nt++)ve[nt].geometry&&ot.push(we(ve[nt],nt));this.trees[Ke+1]=new le(ot,xe,me,st,Float32Array),Re&&console.timeEnd(ct);for(let nt=Ke;nt>=$e;nt--){const mt=+Date.now();ot=this._cluster(ot,nt),this.trees[nt]=new le(ot,xe,me,st,Float32Array),Re&&console.log("z%d: %d clusters in %dms",nt,ot.length,+Date.now()-mt)}return Re&&console.timeEnd("total time"),this}getClusters(ve,Re){let $e=((ve[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ve[1]));let st=ve[2]===180?180:((ve[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)$e=-180,st=180;else if($e>st){const kt=this.getClusters([$e,Ke,180,ct],Re),Nt=this.getClusters([-180,Ke,st,ct],Re);return kt.concat(Nt)}const ot=this.trees[this._limitZoom(Re)],nt=ot.range(Ie($e),Fe(ct),Ie(st),Fe(Ke)),mt=[];for(const kt of nt){const Nt=ot.points[kt];mt.push(Nt.numPoints?ze(Nt):this.points[Nt.index])}return mt}getChildren(ve){const Re=this._getOriginId(ve),$e=this._getOriginZoom(ve),Ke="No cluster with the specified id.",st=this.trees[$e];if(!st)throw new Error(Ke);const ct=st.points[Re];if(!ct)throw new Error(Ke);const ot=this.options.radius/(this.options.extent*Math.pow(2,$e-1)),nt=st.within(ct.x,ct.y,ot),mt=[];for(const kt of nt){const Nt=st.points[kt];Nt.parentId===ve&&mt.push(Nt.numPoints?ze(Nt):this.points[Nt.index])}if(mt.length===0)throw new Error(Ke);return mt}getLeaves(ve,Re,$e){const Ke=[];return this._appendLeaves(Ke,ve,Re=Re||10,$e=$e||0,0),Ke}getTile(ve,Re,$e){const Ke=this.trees[this._limitZoom(ve)],st=Math.pow(2,ve),{extent:ct,radius:ot}=this.options,nt=ot/ct,mt=($e-nt)/st,kt=($e+1+nt)/st,Nt={features:[]};return this._addTileFeatures(Ke.range((Re-nt)/st,mt,(Re+1+nt)/st,kt),Ke.points,Re,$e,st,Nt),Re===0&&this._addTileFeatures(Ke.range(1-nt/st,mt,1,kt),Ke.points,st,$e,st,Nt),Re===st-1&&this._addTileFeatures(Ke.range(0,mt,nt/st,kt),Ke.points,-1,$e,st,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(ve){let Re=this._getOriginZoom(ve)-1;for(;Re<=this.options.maxZoom;){const $e=this.getChildren(ve);if(Re++,$e.length!==1)break;ve=$e[0].properties.cluster_id}return Re}_appendLeaves(ve,Re,$e,Ke,st){const ct=this.getChildren(Re);for(const ot of ct){const nt=ot.properties;if(nt&&nt.cluster?st+nt.point_count<=Ke?st+=nt.point_count:st=this._appendLeaves(ve,nt.cluster_id,$e,Ke,st):st<Ke?st++:ve.push(ot),ve.length===$e)break}return st}_addTileFeatures(ve,Re,$e,Ke,st,ct){for(const ot of ve){const nt=Re[ot],mt=nt.numPoints;let kt,Nt,Lt;if(mt)kt=Ee(nt),Nt=nt.x,Lt=nt.y;else{const pi=this.points[nt.index];kt=pi.properties,Nt=Ie(pi.geometry.coordinates[0]),Lt=Fe(pi.geometry.coordinates[1])}const oi={type:1,geometry:[[Math.round(this.options.extent*(Nt*st-$e)),Math.round(this.options.extent*(Lt*st-Ke))]],tags:kt};let Qt;mt?Qt=nt.id:this.options.generateId?Qt=nt.index:this.points[nt.index].id&&(Qt=this.points[nt.index].id),Qt!==void 0&&(oi.id=Qt),ct.features.push(oi)}}_limitZoom(ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+ve),this.options.maxZoom+1))}_cluster(ve,Re){const $e=[],{radius:Ke,extent:st,reduce:ct,minPoints:ot}=this.options,nt=Ke/(st*Math.pow(2,Re));for(let mt=0;mt<ve.length;mt++){const kt=ve[mt];if(kt.zoom<=Re)continue;kt.zoom=Re;const Nt=this.trees[Re+1],Lt=Nt.within(kt.x,kt.y,nt),oi=kt.numPoints||1;let Qt=oi;for(const pi of Lt){const bi=Nt.points[pi];bi.zoom>Re&&(Qt+=bi.numPoints||1)}if(Qt>oi&&Qt>=ot){let pi=kt.x*oi,bi=kt.y*oi,Ui=ct&&oi>1?this._map(kt,!0):null;const _i=(mt<<5)+(Re+1)+this.points.length;for(const Pi of Lt){const $i=Nt.points[Pi];if($i.zoom<=Re)continue;$i.zoom=Re;const ji=$i.numPoints||1;pi+=$i.x*ji,bi+=$i.y*ji,$i.parentId=_i,ct&&(Ui||(Ui=this._map(kt,!0)),ct(Ui,this._map($i)))}kt.parentId=_i,$e.push(ye(pi/Qt,bi/Qt,_i,Qt,Ui))}else if($e.push(kt),Qt>1)for(const pi of Lt){const bi=Nt.points[pi];bi.zoom<=Re||(bi.zoom=Re,$e.push(bi))}}return $e}_getOriginId(ve){return ve-this.points.length>>5}_getOriginZoom(ve){return(ve-this.points.length)%32}_map(ve,Re){if(ve.numPoints)return Re?Ae({},ve.properties):ve.properties;const $e=this.points[ve.index].properties,Ke=this.options.map($e);return Re&&Ke===$e?Ae({},Ke):Ke}}function ye(We,ve,Re,$e,Ke){return{x:J(We),y:J(ve),zoom:1/0,id:Re,parentId:-1,numPoints:$e,properties:Ke}}function we(We,ve){const[Re,$e]=We.geometry.coordinates;return{x:J(Ie(Re)),y:J(Fe($e)),zoom:1/0,index:ve,parentId:-1}}function ze(We){return{type:"Feature",id:We.id,properties:Ee(We),geometry:{type:"Point",coordinates:[(ve=We.x,360*(ve-.5)),He(We.y)]}};var ve}function Ee(We){const ve=We.numPoints,Re=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve;return Ae(Ae({},We.properties),{cluster:!0,cluster_id:We.id,point_count:ve,point_count_abbreviated:Re})}function Ie(We){return We/360+.5}function Fe(We){const ve=Math.sin(We*Math.PI/180),Re=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Re<0?0:Re>1?1:Re}function He(We){const ve=(180-360*We)*Math.PI/180;return 360*Math.atan(Math.exp(ve))/Math.PI-90}function Ae(We,ve){for(const Re in ve)We[Re]=ve[Re];return We}function xe(We){return We.x}function me(We){return We.y}function Me(We,ve,Re,$e){for(var Ke,st=$e,ct=Re-ve>>1,ot=Re-ve,nt=We[ve],mt=We[ve+1],kt=We[Re],Nt=We[Re+1],Lt=ve+3;Lt<Re;Lt+=3){var oi=De(We[Lt],We[Lt+1],nt,mt,kt,Nt);if(oi>st)Ke=Lt,st=oi;else if(oi===st){var Qt=Math.abs(Lt-ct);Qt<ot&&(Ke=Lt,ot=Qt)}}st>$e&&(Ke-ve>3&&Me(We,ve,Ke,$e),We[Ke+2]=st,Re-Ke>3&&Me(We,Ke,Re,$e))}function De(We,ve,Re,$e,Ke,st){var ct=Ke-Re,ot=st-$e;if(ct!==0||ot!==0){var nt=((We-Re)*ct+(ve-$e)*ot)/(ct*ct+ot*ot);nt>1?(Re=Ke,$e=st):nt>0&&(Re+=ct*nt,$e+=ot*nt)}return(ct=We-Re)*ct+(ot=ve-$e)*ot}function Pe(We,ve,Re,$e){var Ke={id:We===void 0?null:We,type:ve,geometry:Re,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var ct=st.geometry,ot=st.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")je(st,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var nt=0;nt<ct.length;nt++)je(st,ct[nt]);else if(ot==="MultiPolygon")for(nt=0;nt<ct.length;nt++)for(var mt=0;mt<ct[nt].length;mt++)je(st,ct[nt][mt])}(Ke),Ke}function je(We,ve){for(var Re=0;Re<ve.length;Re+=3)We.minX=Math.min(We.minX,ve[Re]),We.minY=Math.min(We.minY,ve[Re+1]),We.maxX=Math.max(We.maxX,ve[Re]),We.maxY=Math.max(We.maxY,ve[Re+1])}function Xe(We,ve,Re,$e){if(ve.geometry){var Ke=ve.geometry.coordinates,st=ve.geometry.type,ct=Math.pow(Re.tolerance/((1<<Re.maxZoom)*Re.extent),2),ot=[],nt=ve.id;if(Re.promoteId?nt=ve.properties[Re.promoteId]:Re.generateId&&(nt=$e||0),st==="Point")tt(Ke,ot);else if(st==="MultiPoint")for(var mt=0;mt<Ke.length;mt++)tt(Ke[mt],ot);else if(st==="LineString")rt(Ke,ot,ct,!1);else if(st==="MultiLineString"){if(Re.lineMetrics){for(mt=0;mt<Ke.length;mt++)rt(Ke[mt],ot=[],ct,!1),We.push(Pe(nt,"LineString",ot,ve.properties));return}dt(Ke,ot,ct,!1)}else if(st==="Polygon")dt(Ke,ot,ct,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(mt=0;mt<ve.geometry.geometries.length;mt++)Xe(We,{id:nt,geometry:ve.geometry.geometries[mt],properties:ve.properties},Re,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ke.length;mt++){var kt=[];dt(Ke[mt],kt,ct,!0),ot.push(kt)}}We.push(Pe(nt,st,ot,ve.properties))}}function tt(We,ve){ve.push(gt(We[0])),ve.push(wt(We[1])),ve.push(0)}function rt(We,ve,Re,$e){for(var Ke,st,ct=0,ot=0;ot<We.length;ot++){var nt=gt(We[ot][0]),mt=wt(We[ot][1]);ve.push(nt),ve.push(mt),ve.push(0),ot>0&&(ct+=$e?(Ke*mt-nt*st)/2:Math.sqrt(Math.pow(nt-Ke,2)+Math.pow(mt-st,2))),Ke=nt,st=mt}var kt=ve.length-3;ve[2]=1,Me(ve,0,kt,Re),ve[kt+2]=1,ve.size=Math.abs(ct),ve.start=0,ve.end=ve.size}function dt(We,ve,Re,$e){for(var Ke=0;Ke<We.length;Ke++){var st=[];rt(We[Ke],st,Re,$e),ve.push(st)}}function gt(We){return We/360+.5}function wt(We){var ve=Math.sin(We*Math.PI/180),Re=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Re<0?0:Re>1?1:Re}function Rt(We,ve,Re,$e,Ke,st,ct,ot){if($e/=ve,st>=(Re/=ve)&&ct<$e)return We;if(ct<Re||st>=$e)return null;for(var nt=[],mt=0;mt<We.length;mt++){var kt=We[mt],Nt=kt.geometry,Lt=kt.type,oi=Ke===0?kt.minX:kt.minY,Qt=Ke===0?kt.maxX:kt.maxY;if(oi>=Re&&Qt<$e)nt.push(kt);else if(!(Qt<Re||oi>=$e)){var pi=[];if(Lt==="Point"||Lt==="MultiPoint")ft(Nt,pi,Re,$e,Ke);else if(Lt==="LineString")Et(Nt,pi,Re,$e,Ke,!1,ot.lineMetrics);else if(Lt==="MultiLineString")si(Nt,pi,Re,$e,Ke,!1);else if(Lt==="Polygon")si(Nt,pi,Re,$e,Ke,!0);else if(Lt==="MultiPolygon")for(var bi=0;bi<Nt.length;bi++){var Ui=[];si(Nt[bi],Ui,Re,$e,Ke,!0),Ui.length&&pi.push(Ui)}if(pi.length){if(ot.lineMetrics&&Lt==="LineString"){for(bi=0;bi<pi.length;bi++)nt.push(Pe(kt.id,Lt,pi[bi],kt.tags));continue}Lt!=="LineString"&&Lt!=="MultiLineString"||(pi.length===1?(Lt="LineString",pi=pi[0]):Lt="MultiLineString"),Lt!=="Point"&&Lt!=="MultiPoint"||(Lt=pi.length===3?"Point":"MultiPoint"),nt.push(Pe(kt.id,Lt,pi,kt.tags))}}}return nt.length?nt:null}function ft(We,ve,Re,$e,Ke){for(var st=0;st<We.length;st+=3){var ct=We[st+Ke];ct>=Re&&ct<=$e&&(ve.push(We[st]),ve.push(We[st+1]),ve.push(We[st+2]))}}function Et(We,ve,Re,$e,Ke,st,ct){for(var ot,nt,mt=Tt(We),kt=Ke===0?Wt:ar,Nt=We.start,Lt=0;Lt<We.length-3;Lt+=3){var oi=We[Lt],Qt=We[Lt+1],pi=We[Lt+2],bi=We[Lt+3],Ui=We[Lt+4],_i=Ke===0?oi:Qt,Pi=Ke===0?bi:Ui,$i=!1;ct&&(ot=Math.sqrt(Math.pow(oi-bi,2)+Math.pow(Qt-Ui,2))),_i<Re?Pi>Re&&(nt=kt(mt,oi,Qt,bi,Ui,Re),ct&&(mt.start=Nt+ot*nt)):_i>$e?Pi<$e&&(nt=kt(mt,oi,Qt,bi,Ui,$e),ct&&(mt.start=Nt+ot*nt)):ui(mt,oi,Qt,pi),Pi<Re&&_i>=Re&&(nt=kt(mt,oi,Qt,bi,Ui,Re),$i=!0),Pi>$e&&_i<=$e&&(nt=kt(mt,oi,Qt,bi,Ui,$e),$i=!0),!st&&$i&&(ct&&(mt.end=Nt+ot*nt),ve.push(mt),mt=Tt(We)),ct&&(Nt+=ot)}var ji=We.length-3;oi=We[ji],Qt=We[ji+1],pi=We[ji+2],(_i=Ke===0?oi:Qt)>=Re&&_i<=$e&&ui(mt,oi,Qt,pi),ji=mt.length-3,st&&ji>=3&&(mt[ji]!==mt[0]||mt[ji+1]!==mt[1])&&ui(mt,mt[0],mt[1],mt[2]),mt.length&&ve.push(mt)}function Tt(We){var ve=[];return ve.size=We.size,ve.start=We.start,ve.end=We.end,ve}function si(We,ve,Re,$e,Ke,st){for(var ct=0;ct<We.length;ct++)Et(We[ct],ve,Re,$e,Ke,st,!1)}function ui(We,ve,Re,$e){We.push(ve),We.push(Re),We.push($e)}function Wt(We,ve,Re,$e,Ke,st){var ct=(st-ve)/($e-ve);return We.push(st),We.push(Re+(Ke-Re)*ct),We.push(1),ct}function ar(We,ve,Re,$e,Ke,st){var ct=(st-Re)/(Ke-Re);return We.push(ve+($e-ve)*ct),We.push(st),We.push(1),ct}function Xi(We,ve){for(var Re=[],$e=0;$e<We.length;$e++){var Ke,st=We[$e],ct=st.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Ke=mr(st.geometry,ve);else if(ct==="MultiLineString"||ct==="Polygon"){Ke=[];for(var ot=0;ot<st.geometry.length;ot++)Ke.push(mr(st.geometry[ot],ve))}else if(ct==="MultiPolygon")for(Ke=[],ot=0;ot<st.geometry.length;ot++){for(var nt=[],mt=0;mt<st.geometry[ot].length;mt++)nt.push(mr(st.geometry[ot][mt],ve));Ke.push(nt)}Re.push(Pe(st.id,ct,Ke,st.tags))}return Re}function mr(We,ve){var Re=[];Re.size=We.size,We.start!==void 0&&(Re.start=We.start,Re.end=We.end);for(var $e=0;$e<We.length;$e+=3)Re.push(We[$e]+ve,We[$e+1],We[$e+2]);return Re}function Nr(We,ve){if(We.transformed)return We;var Re,$e,Ke,st=1<<We.z,ct=We.x,ot=We.y;for(Re=0;Re<We.features.length;Re++){var nt=We.features[Re],mt=nt.geometry,kt=nt.type;if(nt.geometry=[],kt===1)for($e=0;$e<mt.length;$e+=2)nt.geometry.push(ir(mt[$e],mt[$e+1],ve,st,ct,ot));else for($e=0;$e<mt.length;$e++){var Nt=[];for(Ke=0;Ke<mt[$e].length;Ke+=2)Nt.push(ir(mt[$e][Ke],mt[$e][Ke+1],ve,st,ct,ot));nt.geometry.push(Nt)}}return We.transformed=!0,We}function ir(We,ve,Re,$e,Ke,st){return[Math.round(Re*(We*$e-Ke)),Math.round(Re*(ve*$e-st))]}function ut(We,ve,Re,$e,Ke){for(var st=ve===Ke.maxZoom?0:Ke.tolerance/((1<<ve)*Ke.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Re,y:$e,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<We.length;ot++){ct.numFeatures++,vt(ct,We[ot],st,Ke);var nt=We[ot].minX,mt=We[ot].minY,kt=We[ot].maxX,Nt=We[ot].maxY;nt<ct.minX&&(ct.minX=nt),mt<ct.minY&&(ct.minY=mt),kt>ct.maxX&&(ct.maxX=kt),Nt>ct.maxY&&(ct.maxY=Nt)}return ct}function vt(We,ve,Re,$e){var Ke=ve.geometry,st=ve.type,ct=[];if(st==="Point"||st==="MultiPoint")for(var ot=0;ot<Ke.length;ot+=3)ct.push(Ke[ot]),ct.push(Ke[ot+1]),We.numPoints++,We.numSimplified++;else if(st==="LineString")Pt(ct,Ke,We,Re,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ot=0;ot<Ke.length;ot++)Pt(ct,Ke[ot],We,Re,st==="Polygon",ot===0);else if(st==="MultiPolygon")for(var nt=0;nt<Ke.length;nt++){var mt=Ke[nt];for(ot=0;ot<mt.length;ot++)Pt(ct,mt[ot],We,Re,!0,ot===0)}if(ct.length){var kt=ve.tags||null;if(st==="LineString"&&$e.lineMetrics){for(var Nt in kt={},ve.tags)kt[Nt]=ve.tags[Nt];kt.mapbox_clip_start=Ke.start/Ke.size,kt.mapbox_clip_end=Ke.end/Ke.size}var Lt={geometry:ct,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:kt};ve.id!==null&&(Lt.id=ve.id),We.features.push(Lt)}}function Pt(We,ve,Re,$e,Ke,st){var ct=$e*$e;if($e>0&&ve.size<(Ke?ct:$e))Re.numPoints+=ve.length/3;else{for(var ot=[],nt=0;nt<ve.length;nt+=3)($e===0||ve[nt+2]>ct)&&(Re.numSimplified++,ot.push(ve[nt]),ot.push(ve[nt+1])),Re.numPoints++;Ke&&function(mt,kt){for(var Nt=0,Lt=0,oi=mt.length,Qt=oi-2;Lt<oi;Qt=Lt,Lt+=2)Nt+=(mt[Lt]-mt[Qt])*(mt[Lt+1]+mt[Qt+1]);if(Nt>0===kt)for(Lt=0,oi=mt.length;Lt<oi/2;Lt+=2){var pi=mt[Lt],bi=mt[Lt+1];mt[Lt]=mt[oi-2-Lt],mt[Lt+1]=mt[oi-1-Lt],mt[oi-2-Lt]=pi,mt[oi-1-Lt]=bi}}(ot,st),We.push(ot)}}function Bt(We,ve){var Re=(ve=this.options=function(Ke,st){for(var ct in st)Ke[ct]=st[ct];return Ke}(Object.create(this.options),ve)).debug;if(Re&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");var $e=function(Ke,st){var ct=[];if(Ke.type==="FeatureCollection")for(var ot=0;ot<Ke.features.length;ot++)Xe(ct,Ke.features[ot],st,ot);else Xe(ct,Ke.type==="Feature"?Ke:{geometry:Ke},st);return ct}(We,ve);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=function(Ke,st){var ct=st.buffer/st.extent,ot=Ke,nt=Rt(Ke,1,-1-ct,ct,0,-1,2,st),mt=Rt(Ke,1,1-ct,2+ct,0,-1,2,st);return(nt||mt)&&(ot=Rt(Ke,1,-ct,1+ct,0,-1,2,st)||[],nt&&(ot=Xi(nt,1).concat(ot)),mt&&(ot=ot.concat(Xi(mt,-1)))),ot}($e,ve),$e.length&&this.splitTile($e,0,0,0),Re&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(We,ve,Re){return 32*((1<<We)*Re+ve)+We}function vi(We,ve){const Re=We.tileID.canonical;if(!this._geoJSONIndex)return ve(null,null);const $e=this._geoJSONIndex.getTile(Re.z,Re.x,Re.y);if(!$e)return ve(null,null);const Ke=new I($e.features);let st=N.exports(Ke);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),ve(null,{vectorTile:Ke,rawData:st.buffer})}Bt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bt.prototype.splitTile=function(We,ve,Re,$e,Ke,st,ct){for(var ot=[We,ve,Re,$e],nt=this.options,mt=nt.debug;ot.length;){$e=ot.pop(),Re=ot.pop(),ve=ot.pop(),We=ot.pop();var kt=1<<ve,Nt=Yt(ve,Re,$e),Lt=this.tiles[Nt];if(!Lt&&(mt>1&&console.time("creation"),Lt=this.tiles[Nt]=ut(We,ve,Re,$e,nt),this.tileCoords.push({z:ve,x:Re,y:$e}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,Re,$e,Lt.numFeatures,Lt.numPoints,Lt.numSimplified),console.timeEnd("creation"));var oi="z"+ve;this.stats[oi]=(this.stats[oi]||0)+1,this.total++}if(Lt.source=We,Ke){if(ve===nt.maxZoom||ve===Ke)continue;var Qt=1<<Ke-ve;if(Re!==Math.floor(st/Qt)||$e!==Math.floor(ct/Qt))continue}else if(ve===nt.indexMaxZoom||Lt.numPoints<=nt.indexMaxPoints)continue;if(Lt.source=null,We.length!==0){mt>1&&console.time("clipping");var pi,bi,Ui,_i,Pi,$i,ji=.5*nt.buffer/nt.extent,hr=.5-ji,$r=.5+ji,vn=1+ji;pi=bi=Ui=_i=null,Pi=Rt(We,kt,Re-ji,Re+$r,0,Lt.minX,Lt.maxX,nt),$i=Rt(We,kt,Re+hr,Re+vn,0,Lt.minX,Lt.maxX,nt),We=null,Pi&&(pi=Rt(Pi,kt,$e-ji,$e+$r,1,Lt.minY,Lt.maxY,nt),bi=Rt(Pi,kt,$e+hr,$e+vn,1,Lt.minY,Lt.maxY,nt),Pi=null),$i&&(Ui=Rt($i,kt,$e-ji,$e+$r,1,Lt.minY,Lt.maxY,nt),_i=Rt($i,kt,$e+hr,$e+vn,1,Lt.minY,Lt.maxY,nt),$i=null),mt>1&&console.timeEnd("clipping"),ot.push(pi||[],ve+1,2*Re,2*$e),ot.push(bi||[],ve+1,2*Re,2*$e+1),ot.push(Ui||[],ve+1,2*Re+1,2*$e),ot.push(_i||[],ve+1,2*Re+1,2*$e+1)}}},Bt.prototype.getTile=function(We,ve,Re){var $e=this.options,Ke=$e.extent,st=$e.debug;if(We<0||We>24)return null;var ct=1<<We,ot=Yt(We,ve=(ve%ct+ct)%ct,Re);if(this.tiles[ot])return Nr(this.tiles[ot],Ke);st>1&&console.log("drilling down to z%d-%d-%d",We,ve,Re);for(var nt,mt=We,kt=ve,Nt=Re;!nt&&mt>0;)mt--,kt=Math.floor(kt/2),Nt=Math.floor(Nt/2),nt=this.tiles[Yt(mt,kt,Nt)];return nt&&nt.source?(st>1&&console.log("found parent tile z%d-%d-%d",mt,kt,Nt),st>1&&console.time("drilling down"),this.splitTile(nt.source,mt,kt,Nt,We,ve,Re),st>1&&console.timeEnd("drilling down"),this.tiles[ot]?Nr(this.tiles[ot],Ke):null):null};class Oi extends T{constructor(ve,Re,$e,Ke){super(ve,Re,$e,vi),Ke&&(this.loadGeoJSON=Ke)}loadData(ve,Re){var $e;($e=this._pendingRequest)===null||$e===void 0||$e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new r.RequestPerformance(ve.request);this._pendingCallback=Re,this._pendingRequest=this.loadGeoJSON(ve,(st,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,st||!ct)return Re(st);if(typeof ct!="object")return Re(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));{k(ct,!0);try{if(ve.filter){const nt=r.createExpression(ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(kt=>`${kt.key}: ${kt.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(kt=>nt.value.evaluate({zoom:0},kt))}}this._geoJSONIndex=ve.cluster?new ue(function({superclusterOptions:nt,clusterProperties:mt}){if(!mt||!nt)return nt;const kt={},Nt={},Lt={accumulated:null,zoom:0},oi={properties:null},Qt=Object.keys(mt);for(const pi of Qt){const[bi,Ui]=mt[pi],_i=r.createExpression(Ui),Pi=r.createExpression(typeof bi=="string"?[bi,["accumulated"],["get",pi]]:bi);kt[pi]=_i.value,Nt[pi]=Pi.value}return nt.map=pi=>{oi.properties=pi;const bi={};for(const Ui of Qt)bi[Ui]=kt[Ui].evaluate(Lt,oi);return bi},nt.reduce=(pi,bi)=>{oi.properties=bi;for(const Ui of Qt)Lt.accumulated=pi[Ui],pi[Ui]=Nt[Ui].evaluate(Lt,oi)},nt}(ve)).load(ct.features):function(nt,mt){return new Bt(nt,mt)}(ct,ve.geojsonVtOptions)}catch(nt){return Re(nt)}this.loaded={};const ot={};if(Ke){const nt=Ke.finish();nt&&(ot.resourceTiming={},ot.resourceTiming[ve.source]=JSON.parse(JSON.stringify(nt)))}Re(null,ot)}})}reloadTile(ve,Re){const $e=this.loaded;return $e&&$e[ve.uid]?super.reloadTile(ve,Re):this.loadTile(ve,Re)}loadGeoJSON(ve,Re){if(ve.request)return r.getJSON(ve.request,Re);if(typeof ve.data=="string")try{Re(null,JSON.parse(ve.data))}catch{Re(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`))}else Re(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(ve,Re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Re()}getClusterExpansionZoom(ve,Re){try{Re(null,this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId))}catch($e){Re($e)}}getClusterChildren(ve,Re){try{Re(null,this._geoJSONIndex.getChildren(ve.clusterId))}catch($e){Re($e)}}getClusterLeaves(ve,Re){try{Re(null,this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset))}catch($e){Re($e)}}}class di{constructor(ve){this.self=ve,this.actor=new r.Actor(ve,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:Oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Re,$e)=>{if(this.workerSourceTypes[Re])throw new Error(`Worker source with name "${Re}" already registered.`);this.workerSourceTypes[Re]=$e},this.self.registerRTLTextPlugin=Re=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Re.applyArabicShaping,r.plugin.processBidirectionalText=Re.processBidirectionalText,r.plugin.processStyledBidirectionalText=Re.processStyledBidirectionalText}}setReferrer(ve,Re){this.referrer=Re}setImages(ve,Re,$e){this.availableImages[ve]=Re;for(const Ke in this.workerSources[ve]){const st=this.workerSources[ve][Ke];for(const ct in st)st[ct].availableImages=Re}$e()}setLayers(ve,Re,$e){this.getLayerIndex(ve).replace(Re),$e()}updateLayers(ve,Re,$e){this.getLayerIndex(ve).update(Re.layers,Re.removedIds),$e()}loadTile(ve,Re,$e){this.getWorkerSource(ve,Re.type,Re.source).loadTile(Re,$e)}loadDEMTile(ve,Re,$e){this.getDEMWorkerSource(ve,Re.source).loadTile(Re,$e)}reloadTile(ve,Re,$e){this.getWorkerSource(ve,Re.type,Re.source).reloadTile(Re,$e)}abortTile(ve,Re,$e){this.getWorkerSource(ve,Re.type,Re.source).abortTile(Re,$e)}removeTile(ve,Re,$e){this.getWorkerSource(ve,Re.type,Re.source).removeTile(Re,$e)}removeDEMTile(ve,Re){this.getDEMWorkerSource(ve,Re.source).removeTile(Re)}removeSource(ve,Re,$e){if(!this.workerSources[ve]||!this.workerSources[ve][Re.type]||!this.workerSources[ve][Re.type][Re.source])return;const Ke=this.workerSources[ve][Re.type][Re.source];delete this.workerSources[ve][Re.type][Re.source],Ke.removeSource!==void 0?Ke.removeSource(Re,$e):$e()}loadWorkerSource(ve,Re,$e){try{this.self.importScripts(Re.url),$e()}catch(Ke){$e(Ke.toString())}}syncRTLPluginState(ve,Re,$e){try{r.plugin.setState(Re);const Ke=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const st=r.plugin.isParsed();$e(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),st)}}catch(Ke){$e(Ke.toString())}}getAvailableImages(ve){let Re=this.availableImages[ve];return Re||(Re=[]),Re}getLayerIndex(ve){let Re=this.layerIndexes[ve];return Re||(Re=this.layerIndexes[ve]=new g),Re}getWorkerSource(ve,Re,$e){if(this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][Re]||(this.workerSources[ve][Re]={}),!this.workerSources[ve][Re][$e]){const Ke={send:(st,ct,ot)=>{this.actor.send(st,ct,ot,ve)}};this.workerSources[ve][Re][$e]=new this.workerSourceTypes[Re](Ke,this.getLayerIndex(ve),this.getAvailableImages(ve))}return this.workerSources[ve][Re][$e]}getDEMWorkerSource(ve,Re){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][Re]||(this.demWorkerSources[ve][Re]=new S),this.demWorkerSources[ve][Re]}enforceCacheSizeLimit(ve,Re){r.enforceCacheSizeLimit(Re)}}return r.isWorker()&&(self.worker=new di(self)),di}),l(["./shared"],function(r){var p=m;function m(E){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,P,U=new Blob([""],{type:"text/javascript"}),ee=URL.createObjectURL(U);try{P=new Worker(ee),_=!0}catch{_=!1}return P&&P.terminate(),URL.revokeObjectURL(ee),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var P=_.getContext("2d");if(!P)return!1;var U=P.getImageData(0,0,1,1);return U&&U.width===_.width}()?(g[d=o&&o.failIfMajorPerformanceCaveat]===void 0&&(g[d]=function(_){var P,U=function(ee){var ce=document.createElement("canvas"),fe=Object.create(m.webGLContextAttributes);return fe.failIfMajorPerformanceCaveat=ee,ce.getContext("webgl",fe)||ce.getContext("experimental-webgl",fe)}(_);if(!U)return!1;try{P=U.createShader(U.VERTEX_SHADER)}catch{return!1}return!(!P||U.isContextLost())&&(U.shaderSource(P,"void main() {}"),U.compileShader(P),U.getShaderParameter(P,U.COMPILE_STATUS)===!0)}(d)),g[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(E)}var g={};function v(E,o){if(Array.isArray(E)){if(!Array.isArray(o)||E.length!==o.length)return!1;for(let d=0;d<E.length;d++)if(!v(E[d],o[d]))return!1;return!0}if(typeof E=="object"&&E!==null&&o!==null){if(typeof o!="object"||Object.keys(E).length!==Object.keys(o).length)return!1;for(const d in E)if(!v(E[d],o[d]))return!1;return!0}return E===o}m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(o){if(!y.docStyle)return o[0];for(let d=0;d<o.length;d++)if(o[d]in y.docStyle)return o[d];return o[0]}static create(o,d,_){const P=window.document.createElement(o);return d!==void 0&&(P.className=d),_&&_.appendChild(P),P}static createNS(o,d){return window.document.createElementNS(o,d)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(o,d){o.style[y.transformProp]=d}static addEventListener(o,d,_,P={}){o.addEventListener(d,_,"passive"in P?P:P.capture)}static removeEventListener(o,d,_,P={}){o.removeEventListener(d,_,"passive"in P?P:P.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(o,d){const _=o.getBoundingClientRect();return new r.pointGeometry(d.clientX-_.left-o.clientLeft,d.clientY-_.top-o.clientTop)}static touchPos(o,d){const _=o.getBoundingClientRect(),P=[];for(let U=0;U<d.length;U++)P.push(new r.pointGeometry(d[U].clientX-_.left-o.clientLeft,d[U].clientY-_.top-o.clientTop));return P}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class C{constructor(o){this._transformRequestFn=o}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}normalizeSpriteURL(o,d,_){const P=function(U){const ee=U.match(b);if(!ee)throw new Error(`Unable to parse URL "${U}"`);return{protocol:ee[1],authority:ee[2],path:ee[3]||"/",params:ee[4]?ee[4].split("&"):[]}}(o);return P.path+=`${d}${_}`,function(U){const ee=U.params.length?`?${U.params.join("&")}`:"";return`${U.protocol}://${U.authority}${U.path}${ee}`}(P)}setTransformRequest(o){this._transformRequestFn=o}}const b=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(o,d,_,P){this.context=o,this.format=_,this.texture=o.gl.createTexture(),this.update(d,P)}update(o,d,_){const{width:P,height:U}=o,ee=!(this.size&&this.size[0]===P&&this.size[1]===U||_),{context:ce}=this,{gl:fe}=ce;if(this.useMipmap=!!(d&&d.useMipmap),fe.bindTexture(fe.TEXTURE_2D,this.texture),ce.pixelStoreUnpackFlipY.set(!1),ce.pixelStoreUnpack.set(1),ce.pixelStoreUnpackPremultiplyAlpha.set(this.format===fe.RGBA&&(!d||d.premultiply!==!1)),ee)this.size=[P,U],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?fe.texImage2D(fe.TEXTURE_2D,0,this.format,this.format,fe.UNSIGNED_BYTE,o):fe.texImage2D(fe.TEXTURE_2D,0,this.format,P,U,0,this.format,fe.UNSIGNED_BYTE,o.data);else{const{x:Se,y:Ne}=_||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?fe.texSubImage2D(fe.TEXTURE_2D,0,Se,Ne,fe.RGBA,fe.UNSIGNED_BYTE,o):fe.texSubImage2D(fe.TEXTURE_2D,0,Se,Ne,P,U,fe.RGBA,fe.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&fe.generateMipmap(fe.TEXTURE_2D)}bind(o,d,_){const{context:P}=this,{gl:U}=P;U.bindTexture(U.TEXTURE_2D,this.texture),_!==U.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=U.LINEAR),o!==this.filter&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,o),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,_||o),this.filter=o),d!==this.wrap&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,d),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function S(E){const{userImage:o}=E;return!!(o&&o.render&&o.render())&&(E.data.replace(new Uint8Array(o.data.buffer)),!0)}class k extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:d,callback:_}of this.requestors)this._notify(d,_);this.requestors=[]}}getImage(o){return this.images[o]}addImage(o,d){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,d)&&(this.images[o]=d)}_validate(o,d){let _=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),_=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),_=!1),this._validateContent(d.content,d)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),_=!1),_}_validateStretch(o,d){if(!o)return!0;let _=0;for(const P of o){if(P[0]<_||P[1]<P[0]||d<P[1])return!1;_=P[1]}return!0}_validateContent(o,d){return!(o&&(o.length!==4||o[0]<0||d.data.width<o[0]||o[1]<0||d.data.height<o[1]||o[2]<0||d.data.width<o[2]||o[3]<0||d.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,d){const _=this.images[o];if(_.data.width!==d.data.width||_.data.height!==d.data.height)throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=_.version+1,this.images[o]=d,this.updatedImages[o]=!0}removeImage(o){const d=this.images[o];delete this.images[o],delete this.patterns[o],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,d){let _=!0;if(!this.isLoaded())for(const P of o)this.images[P]||(_=!1);this.isLoaded()||_?this._notify(o,d):this.requestors.push({ids:o,callback:d})}_notify(o,d){const _={};for(const P of o){this.images[P]||this.fire(new r.Event("styleimagemissing",{id:P}));const U=this.images[P];U?_[P]={data:U.data.clone(),pixelRatio:U.pixelRatio,sdf:U.sdf,version:U.version,stretchX:U.stretchX,stretchY:U.stretchY,content:U.content,hasRenderCallback:!!(U.userImage&&U.userImage.render)}:r.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,_)}getPixelSize(){const{width:o,height:d}=this.atlasImage;return{width:o,height:d}}getPattern(o){const d=this.patterns[o],_=this.getImage(o);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{const P={w:_.data.width+2,h:_.data.height+2,x:0,y:0},U=new r.ImagePosition(P,_);this.patterns[o]={bin:P,position:U}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const d=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(o,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const U in this.patterns)o.push(this.patterns[U].bin);const{w:d,h:_}=r.potpack(o),P=this.atlasImage;P.resize({width:d||1,height:_||1});for(const U in this.patterns){const{bin:ee}=this.patterns[U],ce=ee.x+1,fe=ee.y+1,Se=this.images[U].data,Ne=Se.width,Ue=Se.height;r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce,y:fe},{width:Ne,height:Ue}),r.RGBAImage.copy(Se,P,{x:0,y:Ue-1},{x:ce,y:fe-1},{width:Ne,height:1}),r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce,y:fe+Ue},{width:Ne,height:1}),r.RGBAImage.copy(Se,P,{x:Ne-1,y:0},{x:ce-1,y:fe},{width:1,height:Ue}),r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce+Ne,y:fe},{width:1,height:Ue})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const d of o){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const _=this.images[d];_||r.warnOnce(`Image with ID: "${d}" was not found`),S(_)&&this.updateImage(d,_)}}}const x=1e20;function A(E,o,d,_,P,U,ee,ce,fe){for(let Se=o;Se<o+_;Se++)D(E,d*U+Se,U,P,ee,ce,fe);for(let Se=d;Se<d+P;Se++)D(E,Se*U+o,1,_,ee,ce,fe)}function D(E,o,d,_,P,U,ee){U[0]=0,ee[0]=-1e20,ee[1]=x,P[0]=E[o];for(let ce=1,fe=0,Se=0;ce<_;ce++){P[ce]=E[o+ce*d];const Ne=ce*ce;do{const Ue=U[fe];Se=(P[ce]-P[Ue]+Ne-Ue*Ue)/(ce-Ue)/2}while(Se<=ee[fe]&&--fe>-1);fe++,U[fe]=ce,ee[fe]=Se,ee[fe+1]=x}for(let ce=0,fe=0;ce<_;ce++){for(;ee[fe+1]<ce;)fe++;const Se=U[fe],Ne=ce-Se;E[o+ce*d]=P[Se]+Ne*Ne}}class w{constructor(o,d){this.requestManager=o,this.localIdeographFontFamily=d,this.entries={}}setURL(o){this.url=o}getGlyphs(o,d){const _=[];for(const P in o)for(const U of o[P])_.push({stack:P,id:U});r.asyncAll(_,({stack:P,id:U},ee)=>{let ce=this.entries[P];ce||(ce=this.entries[P]={glyphs:{},requests:{},ranges:{}});let fe=ce.glyphs[U];if(fe!==void 0)return void ee(null,{stack:P,id:U,glyph:fe});if(fe=this._tinySDF(ce,P,U),fe)return ce.glyphs[U]=fe,void ee(null,{stack:P,id:U,glyph:fe});const Se=Math.floor(U/256);if(256*Se>65535)return void ee(new Error("glyphs > 65535 not supported"));if(ce.ranges[Se])return void ee(null,{stack:P,id:U,glyph:fe});let Ne=ce.requests[Se];Ne||(Ne=ce.requests[Se]=[],w.loadGlyphRange(P,Se,this.url,this.requestManager,(Ue,qe)=>{if(qe){for(const it in qe)this._doesCharSupportLocalGlyph(+it)||(ce.glyphs[+it]=qe[+it]);ce.ranges[Se]=!0}for(const it of Ne)it(Ue,qe);delete ce.requests[Se]})),Ne.push((Ue,qe)=>{Ue?ee(Ue):qe&&ee(null,{stack:P,id:U,glyph:qe[U]||null})})},(P,U)=>{if(P)d(P);else if(U){const ee={};for(const{stack:ce,id:fe,glyph:Se}of U)(ee[ce]||(ee[ce]={}))[fe]=Se&&{id:Se.id,bitmap:Se.bitmap.clone(),metrics:Se.metrics};d(null,ee)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](o)||r.unicodeBlockLookup["Hangul Syllables"](o)||r.unicodeBlockLookup.Hiragana(o)||r.unicodeBlockLookup.Katakana(o))}_tinySDF(o,d,_){const P=this.localIdeographFontFamily;if(!P||!this._doesCharSupportLocalGlyph(_))return;let U=o.tinySDF;if(!U){let ce="400";/bold/i.test(d)?ce="900":/medium/i.test(d)?ce="500":/light/i.test(d)&&(ce="200"),U=o.tinySDF=new w.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:P,fontWeight:ce})}const ee=U.draw(String.fromCharCode(_));return{id:_,bitmap:new r.AlphaImage({width:ee.width||30,height:ee.height||30},ee.data),metrics:{width:ee.glyphWidth||24,height:ee.glyphHeight||24,left:ee.glyphLeft||0,top:ee.glyphTop-27||-8,advance:ee.glyphAdvance||24}}}}w.loadGlyphRange=function(E,o,d,_,P){const U=256*o,ee=U+255,ce=_.transformRequest(d.replace("{fontstack}",E).replace("{range}",`${U}-${ee}`),r.ResourceType.Glyphs);r.getArrayBuffer(ce,(fe,Se)=>{if(fe)P(fe);else if(Se){const Ne={};for(const Ue of r.parseGlyphPbf(Se))Ne[Ue.id]=Ue;P(null,Ne)}})},w.TinySDF=class{constructor({fontSize:E=24,buffer:o=3,radius:d=8,cutoff:_=.25,fontFamily:P="sans-serif",fontWeight:U="normal",fontStyle:ee="normal"}={}){this.buffer=o,this.cutoff=_,this.radius=d;const ce=this.size=E+4*o,fe=this._createCanvas(ce),Se=this.ctx=fe.getContext("2d",{willReadFrequently:!0});Se.font=`${ee} ${U} ${E}px ${P}`,Se.textBaseline="alphabetic",Se.textAlign="left",Se.fillStyle="black",this.gridOuter=new Float64Array(ce*ce),this.gridInner=new Float64Array(ce*ce),this.f=new Float64Array(ce),this.z=new Float64Array(ce+1),this.v=new Uint16Array(ce)}_createCanvas(E){const o=document.createElement("canvas");return o.width=o.height=E,o}draw(E){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:_,actualBoundingBoxLeft:P,actualBoundingBoxRight:U}=this.ctx.measureText(E),ee=Math.ceil(d),ce=Math.min(this.size-this.buffer,Math.ceil(U-P)),fe=Math.min(this.size-this.buffer,ee+Math.ceil(_)),Se=ce+2*this.buffer,Ne=fe+2*this.buffer,Ue=Math.max(Se*Ne,0),qe=new Uint8ClampedArray(Ue),it={data:qe,width:Se,height:Ne,glyphWidth:ce,glyphHeight:fe,glyphTop:ee,glyphLeft:0,glyphAdvance:o};if(ce===0||fe===0)return it;const{ctx:Qe,buffer:et,gridInner:pt,gridOuter:yt}=this;Qe.clearRect(et,et,ce,fe),Qe.fillText(E,et,et+ee);const _t=Qe.getImageData(et,et,ce,fe);yt.fill(x,0,Ue),pt.fill(0,0,Ue);for(let at=0;at<fe;at++)for(let At=0;At<ce;At++){const Ct=_t.data[4*(at*ce+At)+3]/255;if(Ct===0)continue;const Ot=(at+et)*Se+At+et;if(Ct===1)yt[Ot]=0,pt[Ot]=x;else{const jt=.5-Ct;yt[Ot]=jt>0?jt*jt:0,pt[Ot]=jt<0?jt*jt:0}}A(yt,0,0,Se,Ne,Se,this.f,this.v,this.z),A(pt,et,et,ce,fe,Se,this.f,this.v,this.z);for(let at=0;at<Ue;at++){const At=Math.sqrt(yt[at])-Math.sqrt(pt[at]);qe[at]=Math.round(255-255*(At/this.radius+this.cutoff))}return it}};const I=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(E,o){return r.sphericalToCartesian(E.expression.evaluate(o))}interpolate(E,o,d){return{x:r.number(E.x,o.x,d),y:r.number(E.y,o.y,d),z:r.number(E.z,o.z,d)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),N="-transition";class q extends r.Evented{constructor(o){super(),this._transitionable=new r.Transitionable(I),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d={}){if(!this._validate(r.validateLight,o,d))for(const _ in o){const P=o[_];_.endsWith(N)?this._transitionable.setTransition(_.slice(0,-N.length),P):this._transitionable.setValue(_,P)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,_){return(!_||_.validate!==!1)&&r.emitValidationErrors(this,o.call(r.validateStyle,r.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class Y{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,d){const _=o.join(",")+String(d);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(o,d)),this.dashEntry[_]}getDashRanges(o,d,_){const P=[];let U=o.length%2==1?-o[o.length-1]*_:0,ee=o[0]*_,ce=!0;P.push({left:U,right:ee,isDash:ce,zeroLength:o[0]===0});let fe=o[0];for(let Se=1;Se<o.length;Se++){ce=!ce;const Ne=o[Se];U=fe*_,fe+=Ne,ee=fe*_,P.push({left:U,right:ee,isDash:ce,zeroLength:Ne===0})}return P}addRoundDash(o,d,_){const P=d/2;for(let U=-_;U<=_;U++){const ee=this.width*(this.nextRow+_+U);let ce=0,fe=o[ce];for(let Se=0;Se<this.width;Se++){Se/fe.right>1&&(fe=o[++ce]);const Ne=Math.abs(Se-fe.left),Ue=Math.abs(Se-fe.right),qe=Math.min(Ne,Ue);let it;const Qe=U/_*(P+1);if(fe.isDash){const et=P-Math.abs(Qe);it=Math.sqrt(qe*qe+et*et)}else it=P-Math.sqrt(qe*qe+Qe*Qe);this.data[ee+Se]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(o){for(let ce=o.length-1;ce>=0;--ce){const fe=o[ce],Se=o[ce+1];fe.zeroLength?o.splice(ce,1):Se&&Se.isDash===fe.isDash&&(Se.left=fe.left,o.splice(ce,1))}const d=o[0],_=o[o.length-1];d.isDash===_.isDash&&(d.left=_.left-this.width,_.right=d.right+this.width);const P=this.width*this.nextRow;let U=0,ee=o[U];for(let ce=0;ce<this.width;ce++){ce/ee.right>1&&(ee=o[++U]);const fe=Math.abs(ce-ee.left),Se=Math.abs(ce-ee.right),Ne=Math.min(fe,Se);this.data[P+ce]=Math.max(0,Math.min(255,(ee.isDash?Ne:-Ne)+128))}}addDash(o,d){const _=d?7:0,P=2*_+1;if(this.nextRow+P>this.height)return r.warnOnce("LineAtlas out of space"),null;let U=0;for(let ce=0;ce<o.length;ce++)U+=o[ce];if(U!==0){const ce=this.width/U,fe=this.getDashRanges(o,this.width,ce);d?this.addRoundDash(fe,ce,_):this.addRegularDash(fe)}const ee={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:U};return this.nextRow+=P,this.dirty=!0,ee}bind(o){const d=o.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class X{constructor(o,d){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const _=this.workerPool.acquire(this.id);for(let P=0;P<_.length;P++){const U=new X.Actor(_[P],d,this.id);U.name=`Worker ${P}`,this.actors.push(U)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,d,_){r.asyncAll(this.actors,(P,U)=>{P.send(o,d,U)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function B(E,o,d){const _=function(P,U){if(P)return d(P);if(U){const ee=r.pick(r.extend(U,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);U.vector_layers&&(ee.vectorLayers=U.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(ce=>ce.id)),d(null,ee)}};return E.url?r.getJSON(o.transformRequest(E.url,r.ResourceType.Source),_):r.exported.frame(()=>_(null,E))}X.Actor=r.Actor;class j{constructor(o,d,_){this.bounds=r.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=_||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),_=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*d),P=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*d),U=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*d),ee=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*d);return o.x>=_&&o.x<U&&o.y>=P&&o.y<ee}}class O extends r.Evented{constructor(o,d,_,P){if(super(),this.id=o,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(d,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,(o,d)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new r.ErrorEvent(o)):d&&(r.extend(this,d),d.bounds&&(this.tileBounds=new j(d.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(o,d){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),P={request:this.map._requestManager.transformRequest(_,r.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function U(ee,ce){return delete o.request,o.aborted?d(null):ee&&ee.status!==404?d(ee):(ce&&ce.resourceTiming&&(o.resourceTiming=ce.resourceTiming),this.map._refreshExpiredTiles&&ce&&o.setExpiryData(ce),o.loadVectorData(ce,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}P.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=d:o.request=o.actor.send("reloadTile",P,U.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",P,U.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class R extends r.Evented{constructor(o,d,_,P){super(),this.id=o,this.dispatcher=_,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},d),r.extend(this,r.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,(o,d)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):d&&(r.extend(this,d),d.bounds&&(this.tileBounds=new j(d.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,d){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=r.getImage(this.map._requestManager.transformRequest(_,r.ResourceType.Tile),(P,U,ee)=>{if(delete o.request,o.aborted)o.state="unloaded",d(null);else if(P)o.state="errored",d(P);else if(U){this.map._refreshExpiredTiles&&o.setExpiryData(ee);const ce=this.map.painter.context,fe=ce.gl;o.texture=this.map.painter.getTileTexture(U.width),o.texture?o.texture.update(U,{useMipmap:!0}):(o.texture=new T(ce,U,fe.RGBA,{useMipmap:!0}),o.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),ce.extTextureFilterAnisotropic&&fe.texParameterf(fe.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax)),o.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),d(null)}})}abortTile(o,d){o.request&&(o.request.cancel(),delete o.request),d()}unloadTile(o,d){o.texture&&this.map.painter.saveTileTexture(o.texture),d()}hasTransition(){return!1}}let L;class G extends R{constructor(o,d,_,P){super(o,d,_,P),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,d){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function P(U,ee){U&&(o.state="errored",d(U)),ee&&(o.dem=ee,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",d(null))}o.request=r.getImage(this.map._requestManager.transformRequest(_,r.ResourceType.Tile),(function(U,ee){if(delete o.request,o.aborted)o.state="unloaded",d(null);else if(U)o.state="errored",d(U);else if(ee){this.map._refreshExpiredTiles&&o.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;const ce=r.isImageBitmap(ee)&&(L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L)?ee:r.exported.getImageData(ee,1),fe={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:ce,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",fe,P.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const d=o.canonical,_=Math.pow(2,d.z),P=(d.x-1+_)%_,U=d.x===0?o.wrap-1:o.wrap,ee=(d.x+1+_)%_,ce=d.x+1===_?o.wrap+1:o.wrap,fe={};return fe[new r.OverscaledTileID(o.overscaledZ,U,d.z,P,d.y).key]={backfilled:!1},fe[new r.OverscaledTileID(o.overscaledZ,ce,d.z,ee,d.y).key]={backfilled:!1},d.y>0&&(fe[new r.OverscaledTileID(o.overscaledZ,U,d.z,P,d.y-1).key]={backfilled:!1},fe[new r.OverscaledTileID(o.overscaledZ,o.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},fe[new r.OverscaledTileID(o.overscaledZ,ce,d.z,ee,d.y-1).key]={backfilled:!1}),d.y+1<_&&(fe[new r.OverscaledTileID(o.overscaledZ,U,d.z,P,d.y+1).key]={backfilled:!1},fe[new r.OverscaledTileID(o.overscaledZ,o.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},fe[new r.OverscaledTileID(o.overscaledZ,ce,d.z,ee,d.y+1).key]={backfilled:!1}),fe}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class $ extends r.Evented{constructor(o,d,_,P){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(P),this._data=d.data,this._options=r.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const U=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*U,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*U,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:r.EXTENT,radius:(d.clusterRadius||50)*U,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData("content"),this}getClusterExpansionZoom(o,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},d),this}getClusterChildren(o,d){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},d),this}getClusterLeaves(o,d,_,P){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:d,offset:_},P),this}_updateWorkerData(o){const d=r.extend({},this.workerOptions),_=this._data;typeof _=="string"?(d.request=this.map._requestManager.transformRequest(r.exported.resolveURL(_),r.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(_),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(P,U)=>{if(this._pendingLoads--,this._removed||U&&U.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:o}));let ee=null;if(U&&U.resourceTiming&&U.resourceTiming[this.id]&&(ee=U.resourceTiming[this.id].slice(0)),P)return void this.fire(new r.ErrorEvent(P));const ce={dataType:"source",sourceDataType:o};this._collectResourceTiming&&ee&&ee.length>0&&r.extend(ce,{resourceTiming:ee}),this.fire(new r.Event("data",ce))})}loaded(){return this._pendingLoads===0}loadTile(o,d){const _=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const P={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(_,P,(U,ee)=>(delete o.request,o.unloadVectorData(),o.aborted?d(null):U?d(U):(o.loadVectorData(ee,this.map.painter,_==="reloadTile"),d(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var F=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class H extends r.Evented{constructor(o,d,_,P){super(),this.id=o,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=d}load(o,d){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(_,P)=>{this._loaded=!0,_?this.fire(new r.ErrorEvent(_)):P&&(this.image=P,o&&(this.coordinates=o),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}setCoordinates(o){this.coordinates=o;const d=o.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(P){let U=1/0,ee=1/0,ce=-1/0,fe=-1/0;for(const qe of P)U=Math.min(U,qe.x),ee=Math.min(ee,qe.y),ce=Math.max(ce,qe.x),fe=Math.max(fe,qe.y);const Se=Math.max(ce-U,fe-ee),Ne=Math.max(0,Math.floor(-Math.log(Se)/Math.LN2)),Ue=Math.pow(2,Ne);return new r.CanonicalTileID(Ne,Math.floor((U+ce)/2*Ue),Math.floor((ee+fe)/2*Ue))}(d),this.minzoom=this.maxzoom=this.tileID.z;const _=d.map(P=>this.tileID.getTilePoint(P)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,d=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(o,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const _ in this.tiles){const P=this.tiles[_];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}loadTile(o,d){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},d(null)):(o.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class W extends H{constructor(o,d,_,P){super(o,d,_,P),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const d of o.urls)this.urls.push(this.map._requestManager.transformRequest(d,r.ResourceType.Source).url);r.getVideo(this.urls,(d,_)=>{this._loaded=!0,d?this.fire(new r.ErrorEvent(d)):_&&(this.video=_,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const d=this.video.seekable;o<d.start(0)||o>d.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,d=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new T(o,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const _ in this.tiles){const P=this.tiles[_];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class re extends H{constructor(o,d,_,P){super(o,d,_,P),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(U=>!Array.isArray(U)||U.length!==2||U.some(ee=>typeof ee!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,_=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(d,this.canvas,_.RGBA,{premultiply:!0});for(const P in this.tiles){const U=this.tiles[P];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const he={vector:O,raster:R,"raster-dem":G,geojson:$,video:W,image:H,canvas:re};function ie(E,o){const d=r.create();return r.translate(d,d,[1,1,0]),r.scale(d,d,[.5*E.width,.5*E.height,1]),r.multiply(d,d,E.calculatePosMatrix(o.toUnwrapped()))}function ae(E,o,d,_,P,U){const ee=function(Ue,qe,it){if(Ue)for(const Qe of Ue){const et=qe[Qe];if(et&&et.source===it&&et.type==="fill-extrusion")return!0}else for(const Qe in qe){const et=qe[Qe];if(et.source===it&&et.type==="fill-extrusion")return!0}return!1}(P&&P.layers,o,E.id),ce=U.maxPitchScaleFactor(),fe=E.tilesIn(_,ce,ee);fe.sort(Ce);const Se=[];for(const Ue of fe)Se.push({wrappedTileID:Ue.tileID.wrapped().key,queryResults:Ue.tile.queryRenderedFeatures(o,d,E._state,Ue.queryGeometry,Ue.cameraQueryGeometry,Ue.scale,P,U,ce,ie(E.transform,Ue.tileID))});const Ne=function(Ue){const qe={},it={};for(const Qe of Ue){const et=Qe.queryResults,pt=Qe.wrappedTileID,yt=it[pt]=it[pt]||{};for(const _t in et){const at=et[_t],At=yt[_t]=yt[_t]||{},Ct=qe[_t]=qe[_t]||[];for(const Ot of at)At[Ot.featureIndex]||(At[Ot.featureIndex]=!0,Ct.push(Ot))}}return qe}(Se);for(const Ue in Ne)Ne[Ue].forEach(qe=>{const it=qe.feature,Qe=E.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=Qe});return Ne}function Ce(E,o){const d=E.tileID,_=o.tileID;return d.overscaledZ-_.overscaledZ||d.canonical.y-_.canonical.y||d.wrap-_.wrap||d.canonical.x-_.canonical.x}class ge{constructor(o,d){this.tileID=o,this.uid=r.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const d=o+this.timeAdded;d<r.exported.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.textures.forEach(d=>o.saveTileTexture(d)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(o,d,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(P,U){const ee={};if(!U)return ee;for(const ce of P){const fe=ce.layerIds.map(Se=>U.getLayer(Se)).filter(Boolean);if(fe.length!==0){ce.layers=fe,ce.stateDependentLayerIds&&(ce.stateDependentLayers=ce.stateDependentLayerIds.map(Se=>fe.filter(Ne=>Ne.id===Se)[0]));for(const Se of fe)ee[Se.id]=ce}}return ee}(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const P in this.buckets){const U=this.buckets[P];if(U instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!_)break;U.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const P in this.buckets){const U=this.buckets[P];if(U instanceof r.SymbolBucket&&U.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const P in this.buckets){const U=this.buckets[P];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(P).queryRadius(U))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const _ in this.buckets){const P=this.buckets[_];P.uploadPending()&&P.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,_,P,U,ee,ce,fe,Se,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:P,cameraQueryGeometry:U,scale:ee,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:fe,params:ce,queryPadding:this.queryPadding*Se},o,d,_):{}}querySourceFeatures(o,d){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const P=_.loadVTLayers(),U=d?d.sourceLayer:"",ee=P._geojsonTileLayer||P[U];if(!ee)return;const ce=r.createFilter(d&&d.filter),{z:fe,x:Se,y:Ne}=this.tileID.canonical,Ue={z:fe,x:Se,y:Ne};for(let qe=0;qe<ee.length;qe++){const it=ee.feature(qe);if(ce.needGeometry){const pt=r.toEvaluationFeature(it,!0);if(!ce.filter(new r.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!ce.filter(new r.EvaluationParameters(this.tileID.overscaledZ),it))continue;const Qe=_.getId(it,U),et=new r.GeoJSONFeature(it,fe,Se,Ne,Qe);et.tile=Ue,o.push(et)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const _=r.parseCacheControl(o.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const _=Date.now();let P=!1;if(this.expirationTime>_)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{const U=this.expirationTime-d;U?this.expirationTime=_+Math.max(U,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const P in this.buckets){if(!d.style.hasLayer(P))continue;const U=this.buckets[P],ee=U.layers[0].sourceLayer||"_geojsonTileLayer",ce=_[ee],fe=o[ee];if(!ce||!fe||Object.keys(fe).length===0)continue;U.update(fe,ce,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Se=d&&d.style&&d.style.getLayer(P);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(U)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=r.exported.now()+o}setDependencies(o,d){const _={};for(const P of d)_[P]=!0;this.dependencies[o]=_}hasDependency(o,d){for(const _ of o){const P=this.dependencies[_];if(P){for(const U of d)if(P[U])return!0}}return!1}}class ke{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,_){const P=o.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);const U={value:d,timeout:void 0};if(_!==void 0&&(U.timeout=setTimeout(()=>{this.remove(o,U)},_)),this.data[P].push(U),this.order.push(P),this.order.length>this.max){const ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const _=o.wrapped().key,P=d===void 0?0:this.data[_].indexOf(d),U=this.data[_][P];return this.data[_].splice(P,1),U.timeout&&clearTimeout(U.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(U.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const _ in this.data)for(const P of this.data[_])o(P.value)||d.push(P);for(const _ of d)this.remove(_.value.tileID,_)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,_){const P=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][P]=this.stateChanges[o][P]||{},r.extend(this.stateChanges[o][P],_),this.deletedStates[o]===null){this.deletedStates[o]={};for(const U in this.state[o])U!==P&&(this.deletedStates[o][U]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][P]===null){this.deletedStates[o][P]={};for(const U in this.state[o][P])_[U]||(this.deletedStates[o][P][U]=null)}else for(const U in _)this.deletedStates[o]&&this.deletedStates[o][P]&&this.deletedStates[o][P][U]===null&&delete this.deletedStates[o][P][U]}removeFeatureState(o,d,_){if(this.deletedStates[o]===null)return;const P=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},_&&d!==void 0)this.deletedStates[o][P]!==null&&(this.deletedStates[o][P]=this.deletedStates[o][P]||{},this.deletedStates[o][P][_]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][P])for(_ in this.deletedStates[o][P]={},this.stateChanges[o][P])this.deletedStates[o][P][_]=null;else this.deletedStates[o][P]=null;else this.deletedStates[o]=null}getState(o,d){const _=String(d),P=r.extend({},(this.state[o]||{})[_],(this.stateChanges[o]||{})[_]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const U=this.deletedStates[o][d];if(U===null)return{};for(const ee in U)delete P[ee]}return P}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const _={};for(const P in this.stateChanges){this.state[P]=this.state[P]||{};const U={};for(const ee in this.stateChanges[P])this.state[P][ee]||(this.state[P][ee]={}),r.extend(this.state[P][ee],this.stateChanges[P][ee]),U[ee]=this.state[P][ee];_[P]=U}for(const P in this.deletedStates){this.state[P]=this.state[P]||{};const U={};if(this.deletedStates[P]===null)for(const ee in this.state[P])U[ee]={},this.state[P][ee]={};else for(const ee in this.deletedStates[P]){if(this.deletedStates[P][ee]===null)this.state[P][ee]={};else for(const ce of Object.keys(this.deletedStates[P][ee]))delete this.state[P][ee][ce];U[ee]=this.state[P][ee]}_[P]=_[P]||{},r.extend(_[P],U)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const P in o)o[P].setFeatureState(_,d)}}class Q extends r.Evented{constructor(o,d,_){super(),this.id=o,this.dispatcher=_,this.on("data",P=>{P.dataType==="source"&&P.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&P.dataType==="source"&&P.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(P,U,ee,ce){const fe=new he[U.type](P,U,ee,ce);if(fe.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${fe.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],fe),fe}(o,d,_,this),this._tiles={},this._cache=new ke(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new K}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,d){return this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new r.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const _=this._tiles[d];_.upload(o),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(le).map(o=>o.key)}getRenderableIds(o){const d=[];for(const _ in this._tiles)this._isIdRenderable(_,o)&&d.push(this._tiles[_]);return o?d.sort((_,P)=>{const U=_.tileID,ee=P.tileID,ce=new r.pointGeometry(U.canonical.x,U.canonical.y)._rotate(this.transform.angle),fe=new r.pointGeometry(ee.canonical.x,ee.canonical.y)._rotate(this.transform.angle);return U.overscaledZ-ee.overscaledZ||fe.y-ce.y||fe.x-ce.x}).map(_=>_.tileID.key):d.map(_=>_.tileID).sort(le).map(_=>_.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,d){const _=this._tiles[o];_&&(_.state!=="loading"&&(_.state=d),this._loadTile(_,this._tileLoaded.bind(this,_,o,d)))}_tileLoaded(o,d,_,P){if(P)return o.state="errored",void(P.status!==404?this._source.fire(new r.ErrorEvent(P,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=r.exported.now(),_==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const d=this.getRenderableIds();for(let P=0;P<d.length;P++){const U=d[P];if(o.neighboringTiles&&o.neighboringTiles[U]){const ee=this.getTileByID(U);_(o,ee),_(ee,o)}}function _(P,U){P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let ee=U.tileID.canonical.x-P.tileID.canonical.x;const ce=U.tileID.canonical.y-P.tileID.canonical.y,fe=Math.pow(2,P.tileID.canonical.z),Se=U.tileID.key;ee===0&&ce===0||Math.abs(ce)>1||(Math.abs(ee)>1&&(Math.abs(ee+fe)===1?ee+=fe:Math.abs(ee-fe)===1&&(ee-=fe)),U.dem&&P.dem&&(P.dem.backfillBorder(U.dem,ee,ce),P.neighboringTiles&&P.neighboringTiles[Se]&&(P.neighboringTiles[Se].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,_,P){for(const U in this._tiles){let ee=this._tiles[U];if(P[U]||!ee.hasData()||ee.tileID.overscaledZ<=d||ee.tileID.overscaledZ>_)continue;let ce=ee.tileID;for(;ee&&ee.tileID.overscaledZ>d+1;){const Se=ee.tileID.scaledTo(ee.tileID.overscaledZ-1);ee=this._tiles[Se.key],ee&&ee.hasData()&&(ce=Se)}let fe=ce;for(;fe.overscaledZ>d;)if(fe=fe.scaledTo(fe.overscaledZ-1),o[fe.key]){P[ce.key]=ce;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const _=this._loadedParentTiles[o.key];return _&&_.tileID.overscaledZ>=d?_:null}for(let _=o.overscaledZ-1;_>=d;_--){const P=o.scaledTo(_),U=this._getLoadedTile(P);if(U)return U}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const d=Math.ceil(o.width/this._source.tileSize)+1,_=Math.ceil(o.height/this._source.tileSize)+1,P=Math.floor(d*_*5),U=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(U)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const _={};for(const P in this._tiles){const U=this._tiles[P];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+d),_[U.tileID.key]=U}this._tiles=_;for(const P in this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(const P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}}update(o,d){if(this.transform=o,this.terrain=d,!this._sourceLoaded||this._paused)return;let _;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(Se=>new r.OverscaledTileID(Se.canonical.z,Se.wrap,Se.canonical.z,Se.canonical.x,Se.canonical.y)):(_=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(_=_.filter(Se=>this._source.hasTile(Se)))):_=[];const P=o.coveringZoomLevel(this._source),U=Math.max(P-Q.maxOverzooming,this._source.minzoom),ee=Math.max(P+Q.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Se={};for(const Ne of _)if(Ne.canonical.z>this._source.minzoom){const Ue=Ne.scaledTo(Ne.canonical.z-1);Se[Ue.key]=Ue;const qe=Ne.scaledTo(Math.max(this._source.minzoom,Math.min(Ne.canonical.z,5)));Se[qe.key]=qe}_=_.concat(Object.values(Se))}const ce=this._updateRetainedTiles(_,P);if(_e(this._source.type)){const Se={},Ne={},Ue=Object.keys(ce);for(const qe of Ue){const it=ce[qe],Qe=this._tiles[qe];if(!Qe||Qe.fadeEndTime&&Qe.fadeEndTime<=r.exported.now())continue;const et=this.findLoadedParent(it,U);et&&(this._addTile(et.tileID),Se[et.tileID.key]=et.tileID),Ne[qe]=it}this._retainLoadedChildren(Ne,P,ee,ce);for(const qe in Se)ce[qe]||(this._coveredTiles[qe]=!0,ce[qe]=Se[qe]);if(d){const qe={},it={};for(const Qe of _)this._tiles[Qe.key].hasData()?qe[Qe.key]=Qe:it[Qe.key]=Qe;for(const Qe in it){const et=it[Qe].children(this._source.maxzoom);this._tiles[et[0].key]&&this._tiles[et[1].key]&&this._tiles[et[2].key]&&this._tiles[et[3].key]&&(qe[et[0].key]=ce[et[0].key]=et[0],qe[et[1].key]=ce[et[1].key]=et[1],qe[et[2].key]=ce[et[2].key]=et[2],qe[et[3].key]=ce[et[3].key]=et[3],delete it[Qe])}for(const Qe in it){const et=this.findLoadedParent(it[Qe],this._source.minzoom);if(et){qe[et.tileID.key]=ce[et.tileID.key]=et.tileID;for(const pt in qe)qe[pt].isChildOf(et.tileID)&&delete qe[pt]}}for(const Qe in this._tiles)qe[Qe]||(this._coveredTiles[Qe]=!0)}}for(const Se in ce)this._tiles[Se].clearFadeHold();const fe=r.keysDifference(this._tiles,ce);for(const Se of fe){const Ne=this._tiles[Se];Ne.hasSymbolBuckets&&!Ne.holdingForFade()?Ne.setHoldDuration(this.map._fadeDuration):Ne.hasSymbolBuckets&&!Ne.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,d){const _={},P={},U=Math.max(d-Q.maxOverzooming,this._source.minzoom),ee=Math.max(d+Q.maxUnderzooming,this._source.minzoom),ce={};for(const fe of o){const Se=this._addTile(fe);_[fe.key]=fe,Se.hasData()||d<this._source.maxzoom&&(ce[fe.key]=fe)}this._retainLoadedChildren(ce,d,ee,_);for(const fe of o){let Se=this._tiles[fe.key];if(Se.hasData())continue;if(d+1>this._source.maxzoom){const Ue=fe.children(this._source.maxzoom)[0],qe=this.getTile(Ue);if(qe&&qe.hasData()){_[Ue.key]=Ue;continue}}else{const Ue=fe.children(this._source.maxzoom);if(_[Ue[0].key]&&_[Ue[1].key]&&_[Ue[2].key]&&_[Ue[3].key])continue}let Ne=Se.wasRequested();for(let Ue=fe.overscaledZ-1;Ue>=U;--Ue){const qe=fe.scaledTo(Ue);if(P[qe.key]||(P[qe.key]=!0,Se=this.getTile(qe),!Se&&Ne&&(Se=this._addTile(qe)),Se&&(_[qe.key]=qe,Ne=Se.wasRequested(),Se.hasData())))break}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let _,P=this._tiles[o].tileID;for(;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){_=this._loadedParentTiles[P.key];break}d.push(P.key);const U=P.scaledTo(P.overscaledZ-1);if(_=this._getLoadedTile(U),_)break;P=U}for(const U of d)this._loadedParentTiles[U]=_}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const _=d;return d||(d=new ge(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))),d.uses++,this._tiles[o.key]=d,_||this._source.fire(new r.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const _=d.getExpiryTimeout();_&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},_))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,d,_){const P=[],U=this.transform;if(!U)return P;const ee=_?U.getCameraQueryGeometry(o):o,ce=o.map(Qe=>U.pointCoordinate(Qe,this.terrain)),fe=ee.map(Qe=>U.pointCoordinate(Qe,this.terrain)),Se=this.getIds();let Ne=1/0,Ue=1/0,qe=-1/0,it=-1/0;for(const Qe of fe)Ne=Math.min(Ne,Qe.x),Ue=Math.min(Ue,Qe.y),qe=Math.max(qe,Qe.x),it=Math.max(it,Qe.y);for(let Qe=0;Qe<Se.length;Qe++){const et=this._tiles[Se[Qe]];if(et.holdingForFade())continue;const pt=et.tileID,yt=Math.pow(2,U.zoom-et.tileID.overscaledZ),_t=d*et.queryPadding*r.EXTENT/et.tileSize/yt,at=[pt.getTilePoint(new r.MercatorCoordinate(Ne,Ue)),pt.getTilePoint(new r.MercatorCoordinate(qe,it))];if(at[0].x-_t<r.EXTENT&&at[0].y-_t<r.EXTENT&&at[1].x+_t>=0&&at[1].y+_t>=0){const At=ce.map(Ot=>pt.getTilePoint(Ot)),Ct=fe.map(Ot=>pt.getTilePoint(Ot));P.push({tile:et,tileID:pt,queryGeometry:At,cameraQueryGeometry:Ct,scale:yt})}}return P}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map(_=>this._tiles[_].tileID);for(const _ of d)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(_e(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(o,d,_){this._state.updateState(o=o||"_geojsonTileLayer",d,_)}removeFeatureState(o,d,_){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,_)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,_){const P=this._tiles[o];P&&P.setDependencies(d,_)}reloadTilesForDependencies(o,d){for(const _ in this._tiles)this._tiles[_].hasDependency(o,d)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(o,d))}}function le(E,o){const d=Math.abs(2*E.wrap)-+(E.wrap<0),_=Math.abs(2*o.wrap)-+(o.wrap<0);return E.overscaledZ-o.overscaledZ||_-d||o.canonical.y-E.canonical.y||o.canonical.x-E.canonical.x}function _e(E){return E==="raster"||E==="image"||E==="video"}Q.maxOverzooming=10,Q.maxUnderzooming=3;const J="mapboxgl_preloaded_worker_pool";class ne{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<ne.workerCount;)this.workers.push(new Worker(Xc.workerUrl));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[J]}numActive(){return Object.keys(this.active).length}}const ue=Math.floor(r.exported.hardwareConcurrency/2);let ye;function we(){return ye||(ye=new ne),ye}function ze(E,o){const d={};for(const _ in E)_!=="ref"&&(d[_]=E[_]);return r.refProperties.forEach(_=>{_ in o&&(d[_]=o[_])}),d}function Ee(E){E=E.slice();const o=Object.create(null);for(let d=0;d<E.length;d++)o[E[d].id]=E[d];for(let d=0;d<E.length;d++)"ref"in E[d]&&(E[d]=ze(E[d],o[E[d].ref]));return E}ne.workerCount=Math.max(Math.min(ue,6),1);const Ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fe(E,o,d){d.push({command:Ie.addSource,args:[E,o[E]]})}function He(E,o,d){o.push({command:Ie.removeSource,args:[E]}),d[E]=!0}function Ae(E,o,d,_){He(E,d,_),Fe(E,o,d)}function xe(E,o,d){let _;for(_ in E[d])if(Object.prototype.hasOwnProperty.call(E[d],_)&&_!=="data"&&!v(E[d][_],o[d][_]))return!1;for(_ in o[d])if(Object.prototype.hasOwnProperty.call(o[d],_)&&_!=="data"&&!v(E[d][_],o[d][_]))return!1;return!0}function me(E,o,d,_,P,U){let ee;for(ee in o=o||{},E=E||{})Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],o[ee])||d.push({command:U,args:[_,ee,o[ee],P]}));for(ee in o)Object.prototype.hasOwnProperty.call(o,ee)&&!Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],o[ee])||d.push({command:U,args:[_,ee,o[ee],P]}))}function Me(E){return E.id}function De(E,o){return E[o.id]=o,E}class Pe{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=r.clamp(o,0,1);let d=1,_=this._distances[d];const P=o*this.paddedLength+this.padding;for(;_<P&&d<this._distances.length;)_=this._distances[++d];const U=d-1,ee=this._distances[U],ce=_-ee,fe=ce>0?(P-ee)/ce:0;return this.points[U].mult(1-fe).add(this.points[d].mult(fe))}}function je(E,o){let d=!0;return E==="always"||E!=="never"&&o!=="never"||(d=!1),d}class Xe{constructor(o,d,_){const P=this.boxCells=[],U=this.circleCells=[];this.xCellCount=Math.ceil(o/_),this.yCellCount=Math.ceil(d/_);for(let ee=0;ee<this.xCellCount*this.yCellCount;ee++)P.push([]),U.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,_,P,U){this._forEachCell(d,_,P,U,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(P),this.bboxes.push(U)}insertCircle(o,d,_,P){this._forEachCell(d-P,_-P,d+P,_+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(_),this.circles.push(P)}_insertBoxCell(o,d,_,P,U,ee){this.boxCells[U].push(ee)}_insertCircleCell(o,d,_,P,U,ee){this.circleCells[U].push(ee)}_query(o,d,_,P,U,ee,ce){if(_<0||o>this.width||P<0||d>this.height)return[];const fe=[];if(o<=0&&d<=0&&this.width<=_&&this.height<=P){if(U)return[{key:null,x1:o,y1:d,x2:_,y2:P}];for(let Se=0;Se<this.boxKeys.length;Se++)fe.push({key:this.boxKeys[Se],x1:this.bboxes[4*Se],y1:this.bboxes[4*Se+1],x2:this.bboxes[4*Se+2],y2:this.bboxes[4*Se+3]});for(let Se=0;Se<this.circleKeys.length;Se++){const Ne=this.circles[3*Se],Ue=this.circles[3*Se+1],qe=this.circles[3*Se+2];fe.push({key:this.circleKeys[Se],x1:Ne-qe,y1:Ue-qe,x2:Ne+qe,y2:Ue+qe})}}else this._forEachCell(o,d,_,P,this._queryCell,fe,{hitTest:U,overlapMode:ee,seenUids:{box:{},circle:{}}},ce);return fe}query(o,d,_,P){return this._query(o,d,_,P,!1,null)}hitTest(o,d,_,P,U,ee){return this._query(o,d,_,P,!0,U,ee).length>0}hitTestCircle(o,d,_,P,U){const ee=o-_,ce=o+_,fe=d-_,Se=d+_;if(ce<0||ee>this.width||Se<0||fe>this.height)return!1;const Ne=[];return this._forEachCell(ee,fe,ce,Se,this._queryCellCircle,Ne,{hitTest:!0,overlapMode:P,circle:{x:o,y:d,radius:_},seenUids:{box:{},circle:{}}},U),Ne.length>0}_queryCell(o,d,_,P,U,ee,ce,fe){const{seenUids:Se,hitTest:Ne,overlapMode:Ue}=ce,qe=this.boxCells[U];if(qe!==null){const Qe=this.bboxes;for(const et of qe)if(!Se.box[et]){Se.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(o<=Qe[pt+2]&&d<=Qe[pt+3]&&_>=Qe[pt+0]&&P>=Qe[pt+1]&&(!fe||fe(yt))&&(!Ne||!je(Ue,yt.overlapMode))&&(ee.push({key:yt,x1:Qe[pt],y1:Qe[pt+1],x2:Qe[pt+2],y2:Qe[pt+3]}),Ne))return!0}}const it=this.circleCells[U];if(it!==null){const Qe=this.circles;for(const et of it)if(!Se.circle[et]){Se.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circleAndRectCollide(Qe[pt],Qe[pt+1],Qe[pt+2],o,d,_,P)&&(!fe||fe(yt))&&(!Ne||!je(Ue,yt.overlapMode))){const _t=Qe[pt],at=Qe[pt+1],At=Qe[pt+2];if(ee.push({key:yt,x1:_t-At,y1:at-At,x2:_t+At,y2:at+At}),Ne)return!0}}}return!1}_queryCellCircle(o,d,_,P,U,ee,ce,fe){const{circle:Se,seenUids:Ne,overlapMode:Ue}=ce,qe=this.boxCells[U];if(qe!==null){const Qe=this.bboxes;for(const et of qe)if(!Ne.box[et]){Ne.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,Qe[pt+0],Qe[pt+1],Qe[pt+2],Qe[pt+3])&&(!fe||fe(yt))&&!je(Ue,yt.overlapMode))return ee.push(!0),!0}}const it=this.circleCells[U];if(it!==null){const Qe=this.circles;for(const et of it)if(!Ne.circle[et]){Ne.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circlesCollide(Qe[pt],Qe[pt+1],Qe[pt+2],Se.x,Se.y,Se.radius)&&(!fe||fe(yt))&&!je(Ue,yt.overlapMode))return ee.push(!0),!0}}}_forEachCell(o,d,_,P,U,ee,ce,fe){const Se=this._convertToXCellCoord(o),Ne=this._convertToYCellCoord(d),Ue=this._convertToXCellCoord(_),qe=this._convertToYCellCoord(P);for(let it=Se;it<=Ue;it++)for(let Qe=Ne;Qe<=qe;Qe++)if(U.call(this,o,d,_,P,this.xCellCount*Qe+it,ee,ce,fe))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,_,P,U,ee){const ce=P-o,fe=U-d,Se=_+ee;return Se*Se>ce*ce+fe*fe}_circleAndRectCollide(o,d,_,P,U,ee,ce){const fe=(ee-P)/2,Se=Math.abs(o-(P+fe));if(Se>fe+_)return!1;const Ne=(ce-U)/2,Ue=Math.abs(d-(U+Ne));if(Ue>Ne+_)return!1;if(Se<=fe||Ue<=Ne)return!0;const qe=Se-fe,it=Ue-Ne;return qe*qe+it*it<=_*_}}function tt(E,o,d,_,P){const U=r.create();return o?(r.scale(U,U,[1/P,1/P,1]),d||r.rotateZ(U,U,_.angle)):r.multiply(U,_.labelPlaneMatrix,E),U}function rt(E,o,d,_,P){if(o){const U=r.clone(E);return r.scale(U,U,[P,P,1]),d||r.rotateZ(U,U,-_.angle),U}return _.glCoordMatrix}function dt(E,o,d){let _;d?(_=[E.x,E.y,d(E.x,E.y),1],r.transformMat4(_,_,o)):(_=[E.x,E.y,0,1],Xi(_,_,o));const P=_[3];return{point:new r.pointGeometry(_[0]/P,_[1]/P),signedDistanceFromCamera:P}}function gt(E,o){return .5+E/o*.5}function wt(E,o){const d=E[0]/E[3],_=E[1]/E[3];return d>=-o[0]&&d<=o[0]&&_>=-o[1]&&_<=o[1]}function Rt(E,o,d,_,P,U,ee,ce,fe,Se){const Ne=_?E.textSizeData:E.iconSizeData,Ue=r.evaluateSizeForZoom(Ne,d.transform.zoom),qe=[256/d.width*2+1,256/d.height*2+1],it=_?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;it.clear();const Qe=E.lineVertexArray,et=_?E.text.placedSymbolArray:E.icon.placedSymbolArray,pt=d.transform.width/d.transform.height;let yt=!1;for(let _t=0;_t<et.length;_t++){const at=et.get(_t);if(at.hidden||at.writingMode===r.WritingMode.vertical&&!yt){ar(at.numGlyphs,it);continue}let At;if(yt=!1,Se?(At=[at.anchorX,at.anchorY,Se(at.anchorX,at.anchorY),1],r.transformMat4(At,At,o)):(At=[at.anchorX,at.anchorY,0,1],Xi(At,At,o)),!wt(At,qe)){ar(at.numGlyphs,it);continue}const Ct=gt(d.transform.cameraToCenterDistance,At[3]),Ot=r.evaluateSizeForFeature(Ne,Ue,at),jt=ee?Ot/Ct:Ot*Ct,$t=new r.pointGeometry(at.anchorX,at.anchorY),zt=dt($t,P,Se).point,ai={},Xt=Tt(at,jt,!1,ce,o,P,U,E.glyphOffsetArray,Qe,it,zt,$t,ai,pt,fe,Se);yt=Xt.useVertical,(Xt.notEnoughRoom||yt||Xt.needsFlipping&&Tt(at,jt,!0,ce,o,P,U,E.glyphOffsetArray,Qe,it,zt,$t,ai,pt,fe,Se).notEnoughRoom)&&ar(at.numGlyphs,it)}_?E.text.dynamicLayoutVertexBuffer.updateData(it):E.icon.dynamicLayoutVertexBuffer.updateData(it)}function ft(E,o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe){const it=ce.glyphStartIndex+ce.numGlyphs,Qe=ce.lineStartIndex,et=ce.lineStartIndex+ce.lineLength,pt=o.getoffsetX(ce.glyphStartIndex),yt=o.getoffsetX(it-1),_t=ui(E*pt,d,_,P,U,ee,ce.segment,Qe,et,fe,Se,Ne,Ue,qe);if(!_t)return null;const at=ui(E*yt,d,_,P,U,ee,ce.segment,Qe,et,fe,Se,Ne,Ue,qe);return at?{first:_t,last:at}:null}function Et(E,o,d,_){return E===r.WritingMode.horizontal&&Math.abs(d.y-o.y)>Math.abs(d.x-o.x)*_?{useVertical:!0}:(E===r.WritingMode.vertical?o.y<d.y:o.x>d.x)?{needsFlipping:!0}:null}function Tt(E,o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe,it,Qe,et){const pt=o/24,yt=E.lineOffsetX*pt,_t=E.lineOffsetY*pt;let at;if(E.numGlyphs>1){const At=E.glyphStartIndex+E.numGlyphs,Ct=E.lineStartIndex,Ot=E.lineStartIndex+E.lineLength,jt=ft(pt,ce,yt,_t,d,Ne,Ue,E,fe,U,qe,Qe,et);if(!jt)return{notEnoughRoom:!0};const $t=dt(jt.first.point,ee,et).point,zt=dt(jt.last.point,ee,et).point;if(_&&!d){const ai=Et(E.writingMode,$t,zt,it);if(ai)return ai}at=[jt.first];for(let ai=E.glyphStartIndex+1;ai<At-1;ai++)at.push(ui(pt*ce.getoffsetX(ai),yt,_t,d,Ne,Ue,E.segment,Ct,Ot,fe,U,qe,Qe,et));at.push(jt.last)}else{if(_&&!d){const Ct=dt(Ue,P,et).point,Ot=E.lineStartIndex+E.segment+1,jt=new r.pointGeometry(fe.getx(Ot),fe.gety(Ot)),$t=dt(jt,P,et),zt=$t.signedDistanceFromCamera>0?$t.point:si(Ue,jt,Ct,1,P,et),ai=Et(E.writingMode,Ct,zt,it);if(ai)return ai}const At=ui(pt*ce.getoffsetX(E.glyphStartIndex),yt,_t,d,Ne,Ue,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,fe,U,qe,Qe,et);if(!At)return{notEnoughRoom:!0};at=[At]}for(const At of at)r.addDynamicAttributes(Se,At.point,At.angle);return{}}function si(E,o,d,_,P,U){const ee=dt(E.add(E.sub(o)._unit()),P,U).point,ce=d.sub(ee);return d.add(ce._mult(_/ce.mag()))}function ui(E,o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe,it){const Qe=_?E-o:E+o;let et=Qe>0?1:-1,pt=0;_&&(et*=-1,pt=Math.PI),et<0&&(pt+=Math.PI);let yt=et>0?ce+ee:ce+ee+1,_t=P,at=P,At=0,Ct=0;const Ot=Math.abs(Qe),jt=[];for(;At+Ct<=Ot;){if(yt+=et,yt<ce||yt>=fe)return null;if(at=_t,jt.push(_t),_t=Ue[yt],_t===void 0){const li=new r.pointGeometry(Se.getx(yt),Se.gety(yt)),Ki=dt(li,Ne,it);if(Ki.signedDistanceFromCamera>0)_t=Ue[yt]=Ki.point;else{const or=yt-et;_t=si(At===0?U:new r.pointGeometry(Se.getx(or),Se.gety(or)),li,at,Ot-At+1,Ne,it)}}At+=Ct,Ct=at.dist(_t)}const $t=(Ot-At)/Ct,zt=_t.sub(at),ai=zt.mult($t)._add(at);ai._add(zt._unit()._perp()._mult(d*et));const Xt=pt+Math.atan2(_t.y-at.y,_t.x-at.x);return jt.push(ai),{point:ai,angle:qe?Xt:0,path:jt}}const Wt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ar(E,o){for(let d=0;d<E;d++){const _=o.length;o.resize(_+4),o.float32.set(Wt,3*_)}}function Xi(E,o,d){const _=o[0],P=o[1];return E[0]=d[0]*_+d[4]*P+d[12],E[1]=d[1]*_+d[5]*P+d[13],E[3]=d[3]*_+d[7]*P+d[15],E}const mr=100;class Nr{constructor(o,d=new Xe(o.width+200,o.height+200,25),_=new Xe(o.width+200,o.height+200,25)){this.transform=o,this.grid=d,this.ignoredGrid=_,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+mr,this.screenBottomBoundary=o.height+mr,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,d,_,P,U,ee){const ce=this.projectAndGetPerspectiveRatio(P,o.anchorPointX,o.anchorPointY,ee),fe=_*ce.perspectiveRatio,Se=o.x1*fe+ce.point.x,Ne=o.y1*fe+ce.point.y,Ue=o.x2*fe+ce.point.x,qe=o.y2*fe+ce.point.y;return!this.isInsideGrid(Se,Ne,Ue,qe)||d!=="always"&&this.grid.hitTest(Se,Ne,Ue,qe,d,U)||ce.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Se,Ne,Ue,qe],offscreen:this.isOffscreen(Se,Ne,Ue,qe)}}placeCollisionCircles(o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe,it,Qe){const et=[],pt=new r.pointGeometry(d.anchorX,d.anchorY),yt=dt(pt,ee,Qe),_t=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),at=(Ne?U/_t:U*_t)/r.ONE_EM,At=dt(pt,ce,Qe).point,Ct=ft(at,P,d.lineOffsetX*at,d.lineOffsetY*at,!1,At,pt,d,_,ce,{},!1,Qe);let Ot=!1,jt=!1,$t=!0;if(Ct){const zt=.5*qe*_t+it,ai=new r.pointGeometry(-100,-100),Xt=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),li=new Pe,Ki=Ct.first,or=Ct.last;let Ii=[];for(let xr=Ki.path.length-1;xr>=1;xr--)Ii.push(Ki.path[xr]);for(let xr=1;xr<or.path.length;xr++)Ii.push(or.path[xr]);const jr=2.5*zt;if(fe){const xr=Ii.map(br=>dt(br,fe,Qe));Ii=xr.some(br=>br.signedDistanceFromCamera<=0)?[]:xr.map(br=>br.point)}let Br=[];if(Ii.length>0){const xr=Ii[0].clone(),br=Ii[0].clone();for(let Tr=1;Tr<Ii.length;Tr++)xr.x=Math.min(xr.x,Ii[Tr].x),xr.y=Math.min(xr.y,Ii[Tr].y),br.x=Math.max(br.x,Ii[Tr].x),br.y=Math.max(br.y,Ii[Tr].y);Br=xr.x>=ai.x&&br.x<=Xt.x&&xr.y>=ai.y&&br.y<=Xt.y?[Ii]:br.x<ai.x||xr.x>Xt.x||br.y<ai.y||xr.y>Xt.y?[]:r.clipLine([Ii],ai.x,ai.y,Xt.x,Xt.y)}for(const xr of Br){li.reset(xr,.25*zt);let br=0;br=li.length<=.5*zt?1:Math.ceil(li.paddedLength/jr)+1;for(let Tr=0;Tr<br;Tr++){const ea=Tr/Math.max(br-1,1),qa=li.lerp(ea),Pa=qa.x+mr,Ia=qa.y+mr;et.push(Pa,Ia,zt,0);const ol=Pa-zt,as=Ia-zt,Da=Pa+zt,ll=Ia+zt;if($t=$t&&this.isOffscreen(ol,as,Da,ll),jt=jt||this.isInsideGrid(ol,as,Da,ll),o!=="always"&&this.grid.hitTestCircle(Pa,Ia,zt,o,Ue)&&(Ot=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!Se&&Ot||!jt||_t<this.perspectiveRatioCutoff?[]:et,offscreen:$t,collisionDetected:Ot}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let _=1/0,P=1/0,U=-1/0,ee=-1/0;for(const Ne of o){const Ue=new r.pointGeometry(Ne.x+mr,Ne.y+mr);_=Math.min(_,Ue.x),P=Math.min(P,Ue.y),U=Math.max(U,Ue.x),ee=Math.max(ee,Ue.y),d.push(Ue)}const ce=this.grid.query(_,P,U,ee).concat(this.ignoredGrid.query(_,P,U,ee)),fe={},Se={};for(const Ne of ce){const Ue=Ne.key;if(fe[Ue.bucketInstanceId]===void 0&&(fe[Ue.bucketInstanceId]={}),fe[Ue.bucketInstanceId][Ue.featureIndex])continue;const qe=[new r.pointGeometry(Ne.x1,Ne.y1),new r.pointGeometry(Ne.x2,Ne.y1),new r.pointGeometry(Ne.x2,Ne.y2),new r.pointGeometry(Ne.x1,Ne.y2)];r.polygonIntersectsPolygon(d,qe)&&(fe[Ue.bucketInstanceId][Ue.featureIndex]=!0,Se[Ue.bucketInstanceId]===void 0&&(Se[Ue.bucketInstanceId]=[]),Se[Ue.bucketInstanceId].push(Ue.featureIndex))}return Se}insertCollisionBox(o,d,_,P,U,ee){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:P,featureIndex:U,collisionGroupID:ee,overlapMode:d},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,_,P,U,ee){const ce=_?this.ignoredGrid:this.grid,fe={bucketInstanceId:P,featureIndex:U,collisionGroupID:ee,overlapMode:d};for(let Se=0;Se<o.length;Se+=4)ce.insertCircle(fe,o[Se],o[Se+1],o[Se+2])}projectAndGetPerspectiveRatio(o,d,_,P){let U;return P?(U=[d,_,P(d,_),1],r.transformMat4(U,U,o)):(U=[d,_,0,1],Xi(U,U,o)),{point:new r.pointGeometry((U[0]/U[3]+1)/2*this.transform.width+mr,(-U[1]/U[3]+1)/2*this.transform.height+mr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/U[3]*.5}}isOffscreen(o,d,_,P){return _<mr||o>=this.screenRightBoundary||P<mr||d>this.screenBottomBoundary}isInsideGrid(o,d,_,P){return _>=0&&o<this.gridRightBoundary&&P>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=r.identity([]);return r.translate(o,o,[-100,-100,0]),o}}function ir(E,o,d){return o*(r.EXTENT/(E.tileSize*Math.pow(2,d-E.tileID.overscaledZ)))}class ut{constructor(o,d,_,P){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):P&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class vt{constructor(o,d,_,P,U){this.text=new ut(o?o.text:null,d,_,U),this.icon=new ut(o?o.icon:null,d,P,U)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pt{constructor(o,d,_){this.text=o,this.icon=d,this.skipFade=_}}class Bt{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class Yt{constructor(o,d,_,P,U){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=_,this.bucketIndex=P,this.tileID=U}}class vi{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:_=>_.collisionGroupID===d}}return this.collisionGroups[o]}}function Oi(E,o,d,_,P){const{horizontalAlign:U,verticalAlign:ee}=r.getAnchorAlignment(E),ce=-(U-.5)*o,fe=-(ee-.5)*d,Se=r.evaluateVariableOffset(E,_);return new r.pointGeometry(ce+Se[0]*P,fe+Se[1]*P)}function di(E,o,d,_,P,U){const{x1:ee,x2:ce,y1:fe,y2:Se,anchorPointX:Ne,anchorPointY:Ue}=E,qe=new r.pointGeometry(o,d);return _&&qe._rotate(P?U:-U),{x1:ee+qe.x,y1:fe+qe.y,x2:ce+qe.x,y2:Se+qe.y,anchorPointX:Ne,anchorPointY:Ue}}class We{constructor(o,d,_,P,U){this.transform=o.clone(),this.terrain=d,this.collisionIndex=new Nr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new vi(P),this.collisionCircleArrays={},this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,d,_,P){const U=_.getBucket(d),ee=_.latestFeatureIndex;if(!U||!ee||d.id!==U.layerIds[0])return;const ce=_.collisionBoxArray,fe=U.layers[0].layout,Se=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),Ne=_.tileSize/r.EXTENT,Ue=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),qe=fe.get("text-pitch-alignment")==="map",it=fe.get("text-rotation-alignment")==="map",Qe=ir(_,1,this.transform.zoom),et=tt(Ue,qe,it,this.transform,Qe);let pt=null;if(qe){const _t=rt(Ue,qe,it,this.transform,Qe);pt=r.multiply([],this.transform.labelPlaneMatrix,_t)}this.retainedQueryData[U.bucketInstanceId]=new Yt(U.bucketInstanceId,ee,U.sourceLayerIndex,U.index,_.tileID);const yt={bucket:U,layout:fe,posMatrix:Ue,textLabelPlaneMatrix:et,labelToScreenMatrix:pt,scale:Se,textPixelRatio:Ne,holdingForFade:_.holdingForFade(),collisionBoxArray:ce,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(U.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(U.sourceID)};if(P)for(const _t of U.sortKeyRanges){const{sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Ct}=_t;o.push({sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Ct,parameters:yt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:U.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe,it,Qe,et,pt){const yt=[qe.textOffset0,qe.textOffset1],_t=Oi(o,_,P,yt,U),at=this.collisionIndex.placeCollisionBox(di(d,_t.x,_t.y,ee,ce,this.transform.angle),Ue,fe,Se,Ne.predicate,pt);if((!et||this.collisionIndex.placeCollisionBox(di(et,_t.x,_t.y,ee,ce,this.transform.angle),Ue,fe,Se,Ne.predicate,pt).box.length!==0)&&at.box.length>0){let At;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(At=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:yt,width:_,height:P,anchor:o,textBoxScale:U,prevAnchor:At},this.markUsedJustification(it,o,qe,Qe),it.allowVerticalPlacement&&(this.markUsedOrientation(it,Qe,qe),this.placedOrientations[qe.crossTileID]=Qe),{shift:_t,placedGlyphBoxes:at}}}placeLayerBucketPart(o,d,_){const{bucket:P,layout:U,posMatrix:ee,textLabelPlaneMatrix:ce,labelToScreenMatrix:fe,textPixelRatio:Se,holdingForFade:Ne,collisionBoxArray:Ue,partiallyEvaluatedTextSize:qe,collisionGroup:it}=o.parameters,Qe=U.get("text-optional"),et=U.get("icon-optional"),pt=r.getOverlapMode(U,"text-overlap","text-allow-overlap"),yt=pt==="always",_t=r.getOverlapMode(U,"icon-overlap","icon-allow-overlap"),at=_t==="always",At=U.get("text-rotation-alignment")==="map",Ct=U.get("text-pitch-alignment")==="map",Ot=U.get("icon-text-fit")!=="none",jt=U.get("symbol-z-order")==="viewport-y",$t=yt&&(at||!P.hasIconData()||et),zt=at&&(yt||!P.hasTextData()||Qe);!P.collisionArrays&&Ue&&P.deserializeCollisionBoxes(Ue);const ai=(Xt,li)=>{if(d[Xt.crossTileID])return;if(Ne)return void(this.placements[Xt.crossTileID]=new Pt(!1,!1,!1));let Ki=!1,or=!1,Ii=!0,jr=null,Br={box:null,offscreen:null},xr={box:null,offscreen:null},br=null,Tr=null,ea=null,qa=0,Pa=0,Ia=0;li.textFeatureIndex?qa=li.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(qa=Xt.featureIndex),li.verticalTextFeatureIndex&&(Pa=li.verticalTextFeatureIndex);const ol=this.retainedQueryData[P.bucketInstanceId].tileID,as=this.terrain?(Cr,tn)=>this.terrain.getElevation(ol,Cr,tn):null;for(const Cr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const tn=li[Cr];tn&&(tn.elevation=as?as(tn.anchorPointX,tn.anchorPointY):0)}const Da=li.textBox;if(Da){const Cr=Sr=>{let On=r.WritingMode.horizontal;if(P.allowVerticalPlacement&&!Sr&&this.prevPlacement){const Vs=this.prevPlacement.placedOrientations[Xt.crossTileID];Vs&&(this.placedOrientations[Xt.crossTileID]=Vs,On=Vs,this.markUsedOrientation(P,On,Xt))}return On},tn=(Sr,On)=>{if(P.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&li.verticalTextBox){for(const Vs of P.writingModes)if(Vs===r.WritingMode.vertical?(Br=On(),xr=Br):Br=Sr(),Br&&Br.box&&Br.box.length)break}else Br=Sr()};if(U.get("text-variable-anchor")){let Sr=U.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Xt.crossTileID]){const ln=this.prevPlacement.variableOffsets[Xt.crossTileID];Sr.indexOf(ln.anchor)>0&&(Sr=Sr.filter(ba=>ba!==ln.anchor),Sr.unshift(ln.anchor))}const On=(ln,ba,Gl)=>{const Hl=ln.x2-ln.x1,fu=ln.y2-ln.y1,ip=Xt.textBoxScale,mu=Ot&&_t==="never"?ba:null;let La={box:[],offscreen:!1};const gu=pt!=="never"?2*Sr.length:Sr.length;for(let Kc=0;Kc<gu;++Kc){const yu=this.attemptAnchorPlacement(Sr[Kc%Sr.length],ln,Hl,fu,ip,At,Ct,Se,ee,it,Kc>=Sr.length?pt:"never",Xt,P,Gl,mu,as);if(yu&&(La=yu.placedGlyphBoxes,La&&La.box&&La.box.length)){Ki=!0,jr=yu.shift;break}}return La};tn(()=>On(Da,li.iconBox,r.WritingMode.horizontal),()=>{const ln=li.verticalTextBox;return P.allowVerticalPlacement&&!(Br&&Br.box&&Br.box.length)&&Xt.numVerticalGlyphVertices>0&&ln?On(ln,li.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),Br&&(Ki=Br.box,Ii=Br.offscreen);const Vs=Cr(Br&&Br.box);if(!Ki&&this.prevPlacement){const ln=this.prevPlacement.variableOffsets[Xt.crossTileID];ln&&(this.variableOffsets[Xt.crossTileID]=ln,this.markUsedJustification(P,ln.anchor,Xt,Vs))}}else{const Sr=(On,Vs)=>{const ln=this.collisionIndex.placeCollisionBox(On,pt,Se,ee,it.predicate,as);return ln&&ln.box&&ln.box.length&&(this.markUsedOrientation(P,Vs,Xt),this.placedOrientations[Xt.crossTileID]=Vs),ln};tn(()=>Sr(Da,r.WritingMode.horizontal),()=>{const On=li.verticalTextBox;return P.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&On?Sr(On,r.WritingMode.vertical):{box:null,offscreen:null}}),Cr(Br&&Br.box&&Br.box.length)}}if(br=Br,Ki=br&&br.box&&br.box.length>0,Ii=br&&br.offscreen,Xt.useRuntimeCollisionCircles){const Cr=P.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex),tn=r.evaluateSizeForFeature(P.textSizeData,qe,Cr),Sr=U.get("text-padding");Tr=this.collisionIndex.placeCollisionCircles(pt,Cr,P.lineVertexArray,P.glyphOffsetArray,tn,ee,ce,fe,_,Ct,it.predicate,Xt.collisionCircleDiameter,Sr,as),Tr.circles.length&&Tr.collisionDetected&&!_&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Ki=yt||Tr.circles.length>0&&!Tr.collisionDetected,Ii=Ii&&Tr.offscreen}if(li.iconFeatureIndex&&(Ia=li.iconFeatureIndex),li.iconBox){const Cr=tn=>{const Sr=Ot&&jr?di(tn,jr.x,jr.y,At,Ct,this.transform.angle):tn;return this.collisionIndex.placeCollisionBox(Sr,_t,Se,ee,it.predicate,as)};xr&&xr.box&&xr.box.length&&li.verticalIconBox?(ea=Cr(li.verticalIconBox),or=ea.box.length>0):(ea=Cr(li.iconBox),or=ea.box.length>0),Ii=Ii&&ea.offscreen}const ll=Qe||Xt.numHorizontalGlyphVertices===0&&Xt.numVerticalGlyphVertices===0,pu=et||Xt.numIconVertices===0;if(ll||pu?pu?ll||(or=or&&Ki):Ki=or&&Ki:or=Ki=or&&Ki,Ki&&br&&br.box&&this.collisionIndex.insertCollisionBox(br.box,pt,U.get("text-ignore-placement"),P.bucketInstanceId,xr&&xr.box&&Pa?Pa:qa,it.ID),or&&ea&&this.collisionIndex.insertCollisionBox(ea.box,_t,U.get("icon-ignore-placement"),P.bucketInstanceId,Ia,it.ID),Tr&&(Ki&&this.collisionIndex.insertCollisionCircles(Tr.circles,pt,U.get("text-ignore-placement"),P.bucketInstanceId,qa,it.ID),_)){const Cr=P.bucketInstanceId;let tn=this.collisionCircleArrays[Cr];tn===void 0&&(tn=this.collisionCircleArrays[Cr]=new Bt);for(let Sr=0;Sr<Tr.circles.length;Sr+=4)tn.circles.push(Tr.circles[Sr+0]),tn.circles.push(Tr.circles[Sr+1]),tn.circles.push(Tr.circles[Sr+2]),tn.circles.push(Tr.collisionDetected?1:0)}if(Xt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(P.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xt.crossTileID]=new Pt(Ki||$t,or||zt,Ii||P.justReloaded),d[Xt.crossTileID]=!0};if(jt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xt=P.getSortedSymbolIndexes(this.transform.angle);for(let li=Xt.length-1;li>=0;--li){const Ki=Xt[li];ai(P.symbolInstances.get(Ki),P.collisionArrays[Ki])}}else for(let Xt=o.symbolInstanceStart;Xt<o.symbolInstanceEnd;Xt++)ai(P.symbolInstances.get(Xt),P.collisionArrays[Xt]);if(_&&P.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[P.bucketInstanceId];r.invert(Xt.invProjMatrix,ee),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1}markUsedJustification(o,d,_,P){let U;U=P===r.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(d)];const ee=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const ce of ee)ce>=0&&(o.text.placedSymbolArray.get(ce).crossTileID=U>=0&&ce!==U?0:_.crossTileID)}markUsedOrientation(o,d,_){const P=d===r.WritingMode.horizontal||d===r.WritingMode.horizontalOnly?d:0,U=d===r.WritingMode.vertical?d:0,ee=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const ce of ee)o.text.placedSymbolArray.get(ce).placedOrientation=P;_.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=U)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let _=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const P=d?d.symbolFadeChange(o):1,U=d?d.opacities:{},ee=d?d.variableOffsets:{},ce=d?d.placedOrientations:{};for(const fe in this.placements){const Se=this.placements[fe],Ne=U[fe];Ne?(this.opacities[fe]=new vt(Ne,P,Se.text,Se.icon),_=_||Se.text!==Ne.text.placed||Se.icon!==Ne.icon.placed):(this.opacities[fe]=new vt(null,P,Se.text,Se.icon,Se.skipFade),_=_||Se.text||Se.icon)}for(const fe in U){const Se=U[fe];if(!this.opacities[fe]){const Ne=new vt(Se,P,!1,!1);Ne.isHidden()||(this.opacities[fe]=Ne,_=_||Se.text.placed||Se.icon.placed)}}for(const fe in ee)this.variableOffsets[fe]||!this.opacities[fe]||this.opacities[fe].isHidden()||(this.variableOffsets[fe]=ee[fe]);for(const fe in ce)this.placedOrientations[fe]||!this.opacities[fe]||this.opacities[fe].isHidden()||(this.placedOrientations[fe]=ce[fe]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d){const _={};for(const P of d){const U=P.getBucket(o);U&&P.latestFeatureIndex&&o.id===U.layerIds[0]&&this.updateBucketOpacities(U,_,P.collisionBoxArray)}}updateBucketOpacities(o,d,_){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const P=o.layers[0].layout,U=new vt(null,0,!1,!1,!0),ee=P.get("text-allow-overlap"),ce=P.get("icon-allow-overlap"),fe=P.get("text-variable-anchor"),Se=P.get("text-rotation-alignment")==="map",Ne=P.get("text-pitch-alignment")==="map",Ue=P.get("icon-text-fit")!=="none",qe=new vt(null,0,ee&&(ce||!o.hasIconData()||P.get("icon-optional")),ce&&(ee||!o.hasTextData()||P.get("text-optional")),!0);!o.collisionArrays&&_&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(_);const it=(Qe,et,pt)=>{for(let yt=0;yt<et/4;yt++)Qe.opacityVertexArray.emplaceBack(pt)};for(let Qe=0;Qe<o.symbolInstances.length;Qe++){const et=o.symbolInstances.get(Qe),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:_t}=et;let at=this.opacities[_t];d[_t]?at=U:at||(at=qe,this.opacities[_t]=at),d[_t]=!0;const At=et.numIconVertices>0,Ct=this.placedOrientations[et.crossTileID],Ot=Ct===r.WritingMode.vertical,jt=Ct===r.WritingMode.horizontal||Ct===r.WritingMode.horizontalOnly;if(pt>0||yt>0){const $t=mt(at.text);it(o.text,pt,Ot?kt:$t),it(o.text,yt,jt?kt:$t);const zt=at.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(li=>{li>=0&&(o.text.placedSymbolArray.get(li).hidden=zt||Ot?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=zt||jt?1:0);const ai=this.variableOffsets[et.crossTileID];ai&&this.markUsedJustification(o,ai.anchor,et,Ct);const Xt=this.placedOrientations[et.crossTileID];Xt&&(this.markUsedJustification(o,"left",et,Xt),this.markUsedOrientation(o,Xt,et))}if(At){const $t=mt(at.icon),zt=!(Ue&&et.verticalPlacedIconSymbolIndex&&Ot);et.placedIconSymbolIndex>=0&&(it(o.icon,et.numIconVertices,zt?$t:kt),o.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=at.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(it(o.icon,et.numVerticalIconVertices,zt?kt:$t),o.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const $t=o.collisionArrays[Qe];if($t){let zt=new r.pointGeometry(0,0);if($t.textBox||$t.verticalTextBox){let Xt=!0;if(fe){const li=this.variableOffsets[_t];li?(zt=Oi(li.anchor,li.width,li.height,li.textOffset,li.textBoxScale),Se&&zt._rotate(Ne?this.transform.angle:-this.transform.angle)):Xt=!1}$t.textBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||Ot,zt.x,zt.y),$t.verticalTextBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||jt,zt.x,zt.y)}const ai=!!(!jt&&$t.verticalIconBox);$t.iconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,ai,Ue?zt.x:0,Ue?zt.y:0),$t.verticalIconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,!ai,Ue?zt.x:0,Ue?zt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Qe.invProjMatrix,o.placementViewportMatrix=Qe.viewportMatrix,o.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const _=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*_>o}setStale(){this.stale=!0}}function ve(E,o,d,_,P){E.emplaceBack(o?1:0,d?1:0,_||0,P||0),E.emplaceBack(o?1:0,d?1:0,_||0,P||0),E.emplaceBack(o?1:0,d?1:0,_||0,P||0),E.emplaceBack(o?1:0,d?1:0,_||0,P||0)}const Re=Math.pow(2,25),$e=Math.pow(2,24),Ke=Math.pow(2,17),st=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),nt=Math.pow(2,1);function mt(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const o=E.placed?1:0,d=Math.floor(127*E.opacity);return d*Re+o*$e+d*Ke+o*st+d*ct+o*ot+d*nt+o}const kt=0;class Nt{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,d,_,P,U){const ee=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(ee,P,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,U())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort((ce,fe)=>ce.sortKey-fe.sortKey));this._currentPartIndex<ee.length;)if(d.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,U())return!0;return!1}}class Lt{constructor(o,d,_,P,U,ee,ce,fe){this.placement=new We(o,d,ee,ce,fe),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=P,this._showCollisionBoxes=U,this._done=!1}isDone(){return this._done}continuePlacement(o,d,_){const P=r.exported.now(),U=()=>{const ee=r.exported.now()-P;return!this._forceFullPlacement&&ee>2};for(;this._currentPlacementIndex>=0;){const ee=d[o[this._currentPlacementIndex]],ce=this.placement.collisionIndex.transform.zoom;if(ee.type==="symbol"&&(!ee.minzoom||ee.minzoom<=ce)&&(!ee.maxzoom||ee.maxzoom>ce)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(ee)),this._inProgressLayer.continuePlacement(_[ee.source],this.placement,this._showCollisionBoxes,ee,U))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const oi=512/r.EXTENT/2;class Qt{constructor(o,d,_){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let P=0;P<d.length;P++){const U=d.get(P),ee=U.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:U.crossTileID,coord:this.getScaledCoordinates(U,o)})}}getScaledCoordinates(o,d){const _=oi/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*r.EXTENT+o.anchorX)*_),y:Math.floor((d.canonical.y*r.EXTENT+o.anchorY)*_)}}findMatches(o,d,_){const P=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let U=0;U<o.length;U++){const ee=o.get(U);if(ee.crossTileID)continue;const ce=this.indexedSymbolInstances[ee.key];if(!ce)continue;const fe=this.getScaledCoordinates(ee,d);for(const Se of ce)if(Math.abs(Se.coord.x-fe.x)<=P&&Math.abs(Se.coord.y-fe.y)<=P&&!_[Se.crossTileID]){_[Se.crossTileID]=!0,ee.crossTileID=Se.crossTileID;break}}}}class pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const _ in this.indexes){const P=this.indexes[_],U={};for(const ee in P){const ce=P[ee];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+d),U[ce.tileID.key]=ce}this.indexes[_]=U}this.lng=o}addBucket(o,d,_){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let U=0;U<d.symbolInstances.length;U++)d.symbolInstances.get(U).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const P=this.usedCrossTileIDs[o.overscaledZ];for(const U in this.indexes){const ee=this.indexes[U];if(Number(U)>o.overscaledZ)for(const ce in ee){const fe=ee[ce];fe.tileID.isChildOf(o)&&fe.findMatches(d.symbolInstances,o,P)}else{const ce=ee[o.scaledTo(Number(U)).key];ce&&ce.findMatches(d.symbolInstances,o,P)}}for(let U=0;U<d.symbolInstances.length;U++){const ee=d.symbolInstances.get(U);ee.crossTileID||(ee.crossTileID=_.generate(),P[ee.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Qt(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const _ in d.indexedSymbolInstances)for(const P of d.indexedSymbolInstances[_])delete this.usedCrossTileIDs[o][P.crossTileID]}removeStaleBuckets(o){let d=!1;for(const _ in this.indexes){const P=this.indexes[_];for(const U in P)o[P[U].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,P[U]),delete P[U],d=!0)}return d}}class Ui{constructor(){this.layerIndexes={},this.crossTileIDs=new pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,_){let P=this.layerIndexes[o.id];P===void 0&&(P=this.layerIndexes[o.id]=new bi);let U=!1;const ee={};P.handleWrapJump(_);for(const ce of d){const fe=ce.getBucket(o);fe&&o.id===fe.layerIds[0]&&(fe.bucketInstanceId||(fe.bucketInstanceId=++this.maxBucketInstanceId),P.addBucket(ce.tileID,fe,this.crossTileIDs)&&(U=!0),ee[fe.bucketInstanceId]=!0)}return P.removeStaleBuckets(ee)&&(U=!0),U}pruneUnusedLayers(o){const d={};o.forEach(_=>{d[_]=!0});for(const _ in this.layerIndexes)d[_]||delete this.layerIndexes[_]}}var _i=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Pi extends r.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=o._cache.max,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const o in this._tiles){const d=this._tiles[o];d.textures.forEach(_=>_.destroy()),d.textures=[]}}update(o,d){this.sourceCache.update(o,d),this._renderableTilesKeys=[];for(const _ of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),r.ortho(_.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[_.key]=new ge(_,this.tileSize))}removeOutdated(o){const d={};this.renderHistory=this.renderHistory.filter((_,P)=>this.renderHistory.indexOf(_)===P).slice(0,this.renderHistorySize);for(const _ of this._renderableTilesKeys)d[_]=!0;for(const _ of this.renderHistory)d[_]=!0;for(const _ in this._tiles)d[_]||(this._tiles[_].clearTextures(o),delete this._tiles[_])}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const d={};for(const _ of this._renderableTilesKeys){const P=this._tiles[_].tileID;if(P.canonical.equals(o.canonical)){const U=o.clone();U.posMatrix=new Float64Array(16),r.ortho(U.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),d[_]=U}else if(P.canonical.isChildOf(o.canonical)){const U=o.clone();U.posMatrix=new Float64Array(16);const ee=P.canonical.z-o.canonical.z,ce=P.canonical.x-(P.canonical.x>>ee<<ee),fe=P.canonical.y-(P.canonical.y>>ee<<ee),Se=r.EXTENT>>ee;r.ortho(U.posMatrix,0,Se,0,Se,0,1),r.translate(U.posMatrix,U.posMatrix,[-ce*Se,-fe*Se,0]),d[_]=U}else if(o.canonical.isChildOf(P.canonical)){const U=o.clone();U.posMatrix=new Float64Array(16);const ee=o.canonical.z-P.canonical.z,ce=o.canonical.x-(o.canonical.x>>ee<<ee),fe=o.canonical.y-(o.canonical.y>>ee<<ee),Se=r.EXTENT>>ee;r.ortho(U.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(U.posMatrix,U.posMatrix,[ce*Se,fe*Se,0]),r.scale(U.posMatrix,U.posMatrix,[1/2**ee,1/2**ee,0]),d[_]=U}}return d}getSourceTile(o,d){const _=this.sourceCache._source;let P=o.overscaledZ-this.deltaZoom;if(P>_.maxzoom&&(P=_.maxzoom),P<_.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(P).key);let U=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!U||!U.dem)&&d)for(;P>=_.minzoom&&(!U||!U.dem);)U=this.sourceCache.getTileByID(o.scaledTo(P--).key);return U}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(d=>d.timeLoaded>=o)}}class $i{constructor(o,d,_){this.style=o,this.sourceCache=new Pi(d),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.elevationOffset=typeof _.elevationOffset=="number"?_.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(o,d,_,P=r.EXTENT){if(!(d>=0&&d<P&&_>=0&&_<P))return this.elevationOffset;let U=0;const ee=this.getTerrainData(o);if(ee.tile&&ee.tile.dem){const ce=r.transformMat4$1([],[d/P*r.EXTENT,_/P*r.EXTENT],ee.u_terrain_matrix),fe=[ce[0]*ee.tile.dem.dim,ce[1]*ee.tile.dem.dim],Se=[Math.floor(fe[0]),Math.floor(fe[1])],Ne=ee.tile.dem.get(Se[0],Se[1]),Ue=ee.tile.dem.get(Se[0],Se[1]+1),qe=ee.tile.dem.get(Se[0]+1,Se[1]),it=ee.tile.dem.get(Se[0]+1,Se[1]+1);U=r.number(r.number(Ne,Ue,fe[0]-Se[0]),r.number(qe,it,fe[0]-Se[0]),fe[1]-Se[1])}return U}rememberForRerender(o,d){for(const _ in this.sourceCache._tiles){const P=this.sourceCache._tiles[_];(P.tileID.equals(d)||P.tileID.isChildOf(d))&&(o===this.sourceCache.sourceCache.id&&(P.timeLoaded=Date.now()),this._rerender[o]=this._rerender[o]||{},this._rerender[o][P.tileID.key]=!0)}}needsRerender(o,d){return this._rerender[o]&&this._rerender[o][d.key]}clearRerenderCache(){this._rerender={}}getElevation(o,d,_,P=r.EXTENT){return(this.getDEMElevation(o,d,_,P)+this.elevationOffset)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const P=this.style.map.painter.context,U=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(P,U,P.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(P,new r.RGBAImage({width:1,height:1}),P.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const d=this.sourceCache.getSourceTile(o,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const P=this.style.map.painter.context;d.demTexture=this.style.map.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new T(P,d.dem.getPixels(),P.gl.RGBA,{premultiply:!1}),d.demTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const _=d&&d+d.tileID.key+o.key;if(_&&!this._demMatrixCache[_]){const P=this.sourceCache.sourceCache._source.maxzoom;let U=o.canonical.z-d.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=P?U=o.canonical.z-P:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ee=o.canonical.x-(o.canonical.x>>U<<U),ce=o.canonical.y-(o.canonical.y>>U<<U),fe=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<U),1/(r.EXTENT<<U),0]);r.translate(fe,fe,[ee*r.EXTENT,ce*r.EXTENT,0]),this._demMatrixCache[o.key]={matrix:fe,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getRTTFramebuffer(){const o=this.style.map.painter;if(!this._rttFramebuffer){const d=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=o.context.createFramebuffer(d,d,!0),this._rttFramebuffer.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,d,d))}return this._rttFramebuffer}getFramebuffer(o){const d=this.style.map.painter,_=d.width/devicePixelRatio,P=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===P||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(d.context,{width:_,height:P,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(d.context,{width:_,height:P,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(_,P,!0),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,_,P))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let U=0,ee=0;U<this._coordsTextureSize;U++)for(let ce=0;ce<this._coordsTextureSize;ce++,ee+=4)d[ee+0]=255&ce,d[ee+1]=255&U,d[ee+2]=ce>>8<<4|U>>8,d[ee+3]=0;const _=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),P=new T(o,_,o.gl.RGBA,{premultiply:!1});return P.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=P,P}pointCoordinate(o){const d=new Uint8Array(4),_=this.style.map.painter,P=_.context,U=P.gl;P.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),U.readPixels(o.x,_.height/devicePixelRatio-o.y-1,1,1,U.RGBA,U.UNSIGNED_BYTE,d),P.bindFramebuffer.set(null);const ee=d[0]+(d[2]>>4<<8),ce=d[1]+((15&d[2])<<8),fe=this.coordsIndex[255-d[3]],Se=fe&&this.sourceCache.getTileByID(fe);if(!Se)return null;const Ne=this._coordsTextureSize,Ue=(1<<Se.tileID.canonical.z)*Ne;return new r.MercatorCoordinate((Se.tileID.canonical.x*Ne+ee)/Ue,(Se.tileID.canonical.y*Ne+ce)/Ue,this.getElevation(Se.tileID,ee,ce,Ne))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.style.map.painter.context,d=new r.PosArray,_=new r.TriangleIndexArray,P=this.meshSize,U=r.EXTENT/P,ee=P*P;for(let ce=0;ce<=P;ce++)for(let fe=0;fe<=P;fe++)d.emplaceBack(fe*U,ce*U);for(let ce=0;ce<ee;ce+=P+1)for(let fe=0;fe<P;fe++)_.emplaceBack(fe+ce,P+fe+ce+1,P+fe+ce+2),_.emplaceBack(fe+ce,P+fe+ce+2,fe+ce+1);return this._mesh={indexBuffer:o.createIndexBuffer(_),vertexBuffer:o.createVertexBuffer(d,_i.members),segments:r.SegmentVector.simpleSegment(0,0,d.length,_.length)},this._mesh}getMinMaxElevation(o){const d=this.getTerrainData(o).tile,_={minElevation:null,maxElevation:null};return d&&d.dem&&(_.minElevation=(d.dem.min+this.elevationOffset)*this.exaggeration,_.maxElevation=(d.dem.max+this.elevationOffset)*this.exaggeration),_}}const ji=(E,o)=>r.emitValidationErrors(E,o&&o.filter(d=>d.identifier!=="source.canvas")),hr=r.pick(Ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$r=r.pick(Ie,["setCenter","setZoom","setBearing","setPitch"]),vn=function(){const E={},o=r.spec.$version;for(const d in r.spec.$root){const _=r.spec.$root[d];if(_.required){let P=null;P=d==="version"?o:_.type==="array"?[]:{},P!=null&&(E[d]=P)}}return E}();class Un extends r.Evented{constructor(o,d={}){super(),this.map=o,this.dispatcher=new X(we(),this),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new w(o._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Y(256,512),this.crossTileSymbolIndex=new Ui,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const _=this;this._rtlTextPluginCallback=Un.registerForPluginStateChange(P=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(U,ee)=>{if(r.triggerPluginCompletionEvent(U),ee&&ee.every(ce=>ce))for(const ce in _.sourceCaches)_.sourceCaches[ce].reload()})}),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const U=this.sourceCaches[P.sourceId];if(!U)return;const ee=U.getSource();if(ee&&ee.vectorLayerIds)for(const ce in this._layers){const fe=this._layers[ce];fe.source===ee.id&&this._validateLayer(fe)}})}loadURL(o,d={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const _=typeof d.validate!="boolean"||d.validate,P=this.map._requestManager.transformRequest(o,r.ResourceType.Style);this._request=r.getJSON(P,(U,ee)=>{this._request=null,U?this.fire(new r.ErrorEvent(U)):ee&&this._load(ee,_)})}loadJSON(o,d={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(o,d.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(vn,!1)}_load(o,d){if(d&&ji(this,r.validateStyle(o)))return;this._loaded=!0,this.stylesheet=o;for(const P in o.sources)this.addSource(P,o.sources[P],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);const _=Ee(this.stylesheet.layers);this._order=_.map(P=>P.id),this._layers={},this._serializedLayers={};for(let P of _)P=r.createStyleLayer(P),P.setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=P,this._serializedLayers[P.id]=P.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new q(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(o){this._spriteRequest=function(d,_,P,U){let ee,ce,fe;const Se=P>1?"@2x":"";let Ne=r.getJSON(_.transformRequest(_.normalizeSpriteURL(d,Se,".json"),r.ResourceType.SpriteJSON),(it,Qe)=>{Ne=null,fe||(fe=it,ee=Qe,qe())}),Ue=r.getImage(_.transformRequest(_.normalizeSpriteURL(d,Se,".png"),r.ResourceType.SpriteImage),(it,Qe)=>{Ue=null,fe||(fe=it,ce=Qe,qe())});function qe(){if(fe)U(fe);else if(ee&&ce){const it=r.exported.getImageData(ce),Qe={};for(const et in ee){const{width:pt,height:yt,x:_t,y:at,sdf:At,pixelRatio:Ct,stretchX:Ot,stretchY:jt,content:$t}=ee[et],zt=new r.RGBAImage({width:pt,height:yt});r.RGBAImage.copy(it,zt,{x:_t,y:at},{x:0,y:0},{width:pt,height:yt}),Qe[et]={data:zt,pixelRatio:Ct,sdf:At,stretchX:Ot,stretchY:jt,content:$t}}U(null,Qe)}}return{cancel(){Ne&&(Ne.cancel(),Ne=null),Ue&&(Ue.cancel(),Ue=null)}}}(o,this.map._requestManager,this.map.getPixelRatio(),(d,_)=>{if(this._spriteRequest=null,d)this.fire(new r.ErrorEvent(d));else if(_)for(const P in _)this.imageManager.addImage(P,_[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(o){const d=this.sourceCaches[o.source];if(!d)return;const _=o.sourceLayer;if(!_)return;const P=d.getSource();(P.type==="geojson"||P.vectorLayerIds&&P.vectorLayerIds.indexOf(_)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${P.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const d=[];for(const _ of o){const P=this._layers[_];P.type!=="custom"&&d.push(P.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const d=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),U=Object.keys(this._removedLayers);(P.length||U.length)&&this._updateWorkerLayers(P,U);for(const ee in this._updatedSources){const ce=this._updatedSources[ee];if(ce==="reload")this._reloadSource(ee);else{if(ce!=="clear")throw new Error(`Invalid action ${ce}`);this._clearSource(ee)}}this._updateTilesForChangedImages();for(const ee in this._updatedPaintProps)this._layers[ee].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const _={};for(const P in this.sourceCaches){const U=this.sourceCaches[P];_[P]=U.used,U.used=!1}for(const P of this._order){const U=this._layers[P];U.recalculate(o,this._availableImages),!U.isHidden(o.zoom)&&U.source&&(this.sourceCaches[U.source].used=!0)}for(const P in _){const U=this.sourceCaches[P];_[P]!==U.used&&U.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:P}))}this.light.recalculate(o),this.z=o.zoom,d&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(o){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),o){const d=this.sourceCaches[o.source];if(!d)throw new Error(`cannot load terrain, because there exists no source with ID: ${o.source}`);this.terrain=new $i(this,d,o),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=_=>{_.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=_=>{_.tile&&(_.sourceId===o.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(_.sourceId,_.tile.tileID)):_.source.type==="geojson"&&this.terrain.rememberForRerender(_.sourceId,_.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:o}))}setState(o){if(this._checkLoaded(),ji(this,r.validateStyle(o)))return!1;(o=r.clone$1(o)).layers=Ee(o.layers);const d=function(P,U){if(!P)return[{command:Ie.setStyle,args:[U]}];let ee=[];try{if(!v(P.version,U.version))return[{command:Ie.setStyle,args:[U]}];v(P.center,U.center)||ee.push({command:Ie.setCenter,args:[U.center]}),v(P.zoom,U.zoom)||ee.push({command:Ie.setZoom,args:[U.zoom]}),v(P.bearing,U.bearing)||ee.push({command:Ie.setBearing,args:[U.bearing]}),v(P.pitch,U.pitch)||ee.push({command:Ie.setPitch,args:[U.pitch]}),v(P.sprite,U.sprite)||ee.push({command:Ie.setSprite,args:[U.sprite]}),v(P.glyphs,U.glyphs)||ee.push({command:Ie.setGlyphs,args:[U.glyphs]}),v(P.transition,U.transition)||ee.push({command:Ie.setTransition,args:[U.transition]}),v(P.light,U.light)||ee.push({command:Ie.setLight,args:[U.light]});const ce={},fe=[];(function(Ne,Ue,qe,it){let Qe;for(Qe in Ue=Ue||{},Ne=Ne||{})Object.prototype.hasOwnProperty.call(Ne,Qe)&&(Object.prototype.hasOwnProperty.call(Ue,Qe)||He(Qe,qe,it));for(Qe in Ue)Object.prototype.hasOwnProperty.call(Ue,Qe)&&(Object.prototype.hasOwnProperty.call(Ne,Qe)?v(Ne[Qe],Ue[Qe])||(Ne[Qe].type==="geojson"&&Ue[Qe].type==="geojson"&&xe(Ne,Ue,Qe)?qe.push({command:Ie.setGeoJSONSourceData,args:[Qe,Ue[Qe].data]}):Ae(Qe,Ue,qe,it)):Fe(Qe,Ue,qe))})(P.sources,U.sources,fe,ce);const Se=[];P.layers&&P.layers.forEach(Ne=>{ce[Ne.source]?ee.push({command:Ie.removeLayer,args:[Ne.id]}):Se.push(Ne)}),ee=ee.concat(fe),function(Ne,Ue,qe){Ue=Ue||[];const it=(Ne=Ne||[]).map(Me),Qe=Ue.map(Me),et=Ne.reduce(De,{}),pt=Ue.reduce(De,{}),yt=it.slice(),_t=Object.create(null);let at,At,Ct,Ot,jt,$t,zt;for(at=0,At=0;at<it.length;at++)Ct=it[at],Object.prototype.hasOwnProperty.call(pt,Ct)?At++:(qe.push({command:Ie.removeLayer,args:[Ct]}),yt.splice(yt.indexOf(Ct,At),1));for(at=0,At=0;at<Qe.length;at++)Ct=Qe[Qe.length-1-at],yt[yt.length-1-at]!==Ct&&(Object.prototype.hasOwnProperty.call(et,Ct)?(qe.push({command:Ie.removeLayer,args:[Ct]}),yt.splice(yt.lastIndexOf(Ct,yt.length-At),1)):At++,$t=yt[yt.length-at],qe.push({command:Ie.addLayer,args:[pt[Ct],$t]}),yt.splice(yt.length-at,0,Ct),_t[Ct]=!0);for(at=0;at<Qe.length;at++)if(Ct=Qe[at],Ot=et[Ct],jt=pt[Ct],!_t[Ct]&&!v(Ot,jt))if(v(Ot.source,jt.source)&&v(Ot["source-layer"],jt["source-layer"])&&v(Ot.type,jt.type)){for(zt in me(Ot.layout,jt.layout,qe,Ct,null,Ie.setLayoutProperty),me(Ot.paint,jt.paint,qe,Ct,null,Ie.setPaintProperty),v(Ot.filter,jt.filter)||qe.push({command:Ie.setFilter,args:[Ct,jt.filter]}),v(Ot.minzoom,jt.minzoom)&&v(Ot.maxzoom,jt.maxzoom)||qe.push({command:Ie.setLayerZoomRange,args:[Ct,jt.minzoom,jt.maxzoom]}),Ot)Object.prototype.hasOwnProperty.call(Ot,zt)&&zt!=="layout"&&zt!=="paint"&&zt!=="filter"&&zt!=="metadata"&&zt!=="minzoom"&&zt!=="maxzoom"&&(zt.indexOf("paint.")===0?me(Ot[zt],jt[zt],qe,Ct,zt.slice(6),Ie.setPaintProperty):v(Ot[zt],jt[zt])||qe.push({command:Ie.setLayerProperty,args:[Ct,zt,jt[zt]]}));for(zt in jt)Object.prototype.hasOwnProperty.call(jt,zt)&&!Object.prototype.hasOwnProperty.call(Ot,zt)&&zt!=="layout"&&zt!=="paint"&&zt!=="filter"&&zt!=="metadata"&&zt!=="minzoom"&&zt!=="maxzoom"&&(zt.indexOf("paint.")===0?me(Ot[zt],jt[zt],qe,Ct,zt.slice(6),Ie.setPaintProperty):v(Ot[zt],jt[zt])||qe.push({command:Ie.setLayerProperty,args:[Ct,zt,jt[zt]]}))}else qe.push({command:Ie.removeLayer,args:[Ct]}),$t=yt[yt.lastIndexOf(Ct)+1],qe.push({command:Ie.addLayer,args:[jt,$t]})}(Se,U.layers,ee)}catch(ce){console.warn("Unable to compute style diff:",ce),ee=[{command:Ie.setStyle,args:[U]}]}return ee}(this.serialize(),o).filter(P=>!(P.command in $r));if(d.length===0)return!1;const _=d.filter(P=>!(P.command in hr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(P=>P.command).join(", ")}.`);return d.forEach(P=>{P.command!=="setTransition"&&this[P.command].apply(this,P.args)}),this.stylesheet=o,!0}addImage(o,d){if(this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,d),this._afterImageUpdated(o)}updateImage(o,d){this.imageManager.updateImage(o,d)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,d,_={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(r.validateStyle.source,`sources.${o}`,d,null,_))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const P=this.sourceCaches[o]=new Q(o,d,this.dispatcher);P.style=this,P.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:P.serialize(),sourceId:o})),P.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===o)return this.fire(new r.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${_}" is using it.`)));const d=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],d.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,d){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const _=this.sourceCaches[o].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(d),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,d,_={}){this._checkLoaded();const P=o.id;if(this.getLayer(P))return void this.fire(new r.ErrorEvent(new Error(`Layer "${P}" already exists on this map.`)));let U;if(o.type==="custom"){if(ji(this,r.validateCustomStyleLayer(o)))return;U=r.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(P,o.source),o=r.clone$1(o),o=r.extend(o,{source:P})),this._validate(r.validateStyle.layer,`layers.${P}`,o,{arrayIndex:-1},_))return;U=r.createStyleLayer(o),this._validateLayer(U),U.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[U.id]=U.serialize()}const ee=d?this._order.indexOf(d):this._order.length;if(d&&ee===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${P}" before non-existing layer "${d}".`)));else{if(this._order.splice(ee,0,P),this._layerOrderChanged=!0,this._layers[P]=U,this._removedLayers[P]&&U.source&&U.type!=="custom"){const ce=this._removedLayers[P];delete this._removedLayers[P],ce.type!==U.type?this._updatedSources[U.source]="clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())}this._updateLayer(U),U.onAdd&&U.onAdd(this.map)}}moveLayer(o,d){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===d)return;const _=this._order.indexOf(o);this._order.splice(_,1);const P=d?this._order.indexOf(d):this._order.length;d&&P===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${d}".`))):(this._order.splice(P,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const d=this._layers[o];if(!d)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));d.setEventedParent(null);const _=this._order.indexOf(o);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=d,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],d.onRemove&&d.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,d,_){this._checkLoaded();const P=this.getLayer(o);P?P.minzoom===d&&P.maxzoom===_||(d!=null&&(P.minzoom=d),_!=null&&(P.maxzoom=_),this._updateLayer(P)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,d,_={}){this._checkLoaded();const P=this.getLayer(o);if(P){if(!v(P.filter,d))return d==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(r.validateStyle.filter,`layers.${P.id}.filter`,d,null,_)||(P.filter=r.clone$1(d),this._updateLayer(P)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return r.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,d,_,P={}){this._checkLoaded();const U=this.getLayer(o);U?v(U.getLayoutProperty(d),_)||(U.setLayoutProperty(d,_,P),this._updateLayer(U)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,d){const _=this.getLayer(o);if(_)return _.getLayoutProperty(d);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,d,_,P={}){this._checkLoaded();const U=this.getLayer(o);U?v(U.getPaintProperty(d),_)||(U.setPaintProperty(d,_,P)&&this._updateLayer(U),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,d){return this.getLayer(o).getPaintProperty(d)}setFeatureState(o,d){this._checkLoaded();const _=o.source,P=o.sourceLayer,U=this.sourceCaches[_];if(U===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const ee=U.getSource().type;ee==="geojson"&&P?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ee!=="vector"||P?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),U.setFeatureState(P,o.id,d)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,d){this._checkLoaded();const _=o.source,P=this.sourceCaches[_];if(P===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const U=P.getSource().type,ee=U==="vector"?o.sourceLayer:void 0;U!=="vector"||ee?d&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(ee,o.id,d):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const d=o.source,_=o.sourceLayer,P=this.sourceCaches[d];if(P!==void 0)return P.getSource().type!=="vector"||_?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),P.getFeatureState(_,o.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,o=>o.serialize()),layers:this._serializeLayers(this._order)},o=>o!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(o){const d=ee=>this._layers[ee].type==="fill-extrusion",_={},P=[];for(let ee=this._order.length-1;ee>=0;ee--){const ce=this._order[ee];if(d(ce)){_[ce]=ee;for(const fe of o){const Se=fe[ce];if(Se)for(const Ne of Se)P.push(Ne)}}}P.sort((ee,ce)=>ce.intersectionZ-ee.intersectionZ);const U=[];for(let ee=this._order.length-1;ee>=0;ee--){const ce=this._order[ee];if(d(ce))for(let fe=P.length-1;fe>=0;fe--){const Se=P[fe].feature;if(_[Se.layer.id]<ee)break;U.push(Se),P.pop()}else for(const fe of o){const Se=fe[ce];if(Se)for(const Ne of Se)U.push(Ne.feature)}}return U}queryRenderedFeatures(o,d,_){d&&d.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const P={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ee of d.layers){const ce=this._layers[ee];if(!ce)return this.fire(new r.ErrorEvent(new Error(`The layer '${ee}' does not exist in the map's style and cannot be queried for features.`))),[];P[ce.source]=!0}}const U=[];d.availableImages=this._availableImages;for(const ee in this.sourceCaches)d.layers&&!P[ee]||U.push(ae(this.sourceCaches[ee],this._layers,this._serializedLayers,o,d,_));return this.placement&&U.push(function(ee,ce,fe,Se,Ne,Ue,qe){const it={},Qe=Ue.queryRenderedSymbols(Se),et=[];for(const pt of Object.keys(Qe).map(Number))et.push(qe[pt]);et.sort(Ce);for(const pt of et){const yt=pt.featureIndex.lookupSymbolFeatures(Qe[pt.bucketInstanceId],ce,pt.bucketIndex,pt.sourceLayerIndex,Ne.filter,Ne.layers,Ne.availableImages,ee);for(const _t in yt){const at=it[_t]=it[_t]||[],At=yt[_t];At.sort((Ct,Ot)=>{const jt=pt.featureSortOrder;if(jt){const $t=jt.indexOf(Ct.featureIndex);return jt.indexOf(Ot.featureIndex)-$t}return Ot.featureIndex-Ct.featureIndex});for(const Ct of At)at.push(Ct)}}for(const pt in it)it[pt].forEach(yt=>{const _t=yt.feature,at=fe[ee[pt].source].getFeatureState(_t.layer["source-layer"],_t.id);_t.source=_t.layer.source,_t.layer["source-layer"]&&(_t.sourceLayer=_t.layer["source-layer"]),_t.state=at});return it}(this._layers,this._serializedLayers,this.sourceCaches,o,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(U)}querySourceFeatures(o,d){d&&d.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const _=this.sourceCaches[o];return _?function(P,U){const ee=P.getRenderableIds().map(Se=>P.getTileByID(Se)),ce=[],fe={};for(let Se=0;Se<ee.length;Se++){const Ne=ee[Se],Ue=Ne.tileID.canonical.key;fe[Ue]||(fe[Ue]=!0,Ne.querySourceFeatures(ce,U))}return ce}(_,d):[]}addSourceType(o,d,_){return Un.getSourceType(o)?_(new Error(`A source type called "${o}" already exists.`)):(Un.setSourceType(o,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:d.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(o,d={}){this._checkLoaded();const _=this.light.getLight();let P=!1;for(const ee in o)if(!v(o[ee],_[ee])){P=!0;break}if(!P)return;const U={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,d),this.light.updateTransitions(U)}_validate(o,d,_,P,U={}){return(!U||U.validate!==!1)&&ji(this,o.call(r.validateStyle,r.extend({key:d,style:this.serialize(),value:_,styleSpec:r.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const d=this.sourceCaches[o];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const d in this.sourceCaches)this.sourceCaches[d].update(o,this.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,d,_,P,U=!1){let ee=!1,ce=!1;const fe={};for(const Se of this._order){const Ne=this._layers[Se];if(Ne.type!=="symbol")continue;if(!fe[Ne.source]){const qe=this.sourceCaches[Ne.source];fe[Ne.source]=qe.getRenderableIds(!0).map(it=>qe.getTileByID(it)).sort((it,Qe)=>Qe.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(Qe.tileID)?-1:1))}const Ue=this.crossTileSymbolIndex.addLayer(Ne,fe[Ne.source],o.center.lng);ee=ee||Ue}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((U=U||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),o.zoom))&&(this.pauseablePlacement=new Lt(o,this.terrain,this._order,U,d,_,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,fe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),ce=!0),ee&&this.pauseablePlacement.placement.setStale()),ce||ee)for(const Se of this._order){const Ne=this._layers[Se];Ne.type==="symbol"&&this.placement.updateLayerOpacities(Ne,fe[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,d,_){this.imageManager.getImages(d.icons,_),this._updateTilesForChangedImages();const P=this.sourceCaches[d.source];P&&P.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(o,d,_){this.glyphManager.getGlyphs(d.stacks,_)}getResource(o,d,_){return r.makeRequest(d,_)}}Un.getSourceType=function(E){return he[E]},Un.setSourceType=function(E,o){he[E]=o},Un.registerForPluginStateChange=r.registerForPluginStateChange;var _d="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Mc={prelude:Or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Or("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",_d),terrainDepth:Or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",_d),terrainCoords:Or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",_d)};function Or(E,o){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=o.match(/attribute ([\w]+) ([\w]+)/g),P=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=U?U.concat(P):P,ce={};return{fragmentSource:E=E.replace(d,(fe,Se,Ne,Ue,qe)=>(ce[qe]=!0,Se==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
varying ${Ne} ${Ue} ${qe};
#else
uniform ${Ne} ${Ue} u_${qe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${qe}
    ${Ne} ${Ue} ${qe} = u_${qe};
#endif
`)),vertexSource:o=o.replace(d,(fe,Se,Ne,Ue,qe)=>{const it=Ue==="float"?"vec2":"vec4",Qe=qe.match(/color/)?"color":it;return ce[qe]?Se==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${it} a_${qe};
varying ${Ne} ${Ue} ${qe};
#else
uniform ${Ne} ${Ue} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = a_${qe};
#else
    ${Ne} ${Ue} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Ue} ${qe} = u_${qe};
#endif
`:Se==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${it} a_${qe};
#else
uniform ${Ne} ${Ue} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Ue} ${qe} = a_${qe};
#else
    ${Ne} ${Ue} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Ue} ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Ue} ${qe} = u_${qe};
#endif
`}),staticAttributes:_,staticUniforms:ee}}class tx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,d,_,P,U,ee,ce,fe,Se){this.context=o;let Ne=this.boundPaintVertexBuffers.length!==P.length;for(let Ue=0;!Ne&&Ue<P.length;Ue++)this.boundPaintVertexBuffers[Ue]!==P[Ue]&&(Ne=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===_&&!Ne&&this.boundIndexBuffer===U&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===ce&&this.boundDynamicVertexBuffer2===fe&&this.boundDynamicVertexBuffer3===Se?(o.bindVertexArrayOES.set(this.vao),ce&&ce.bind(),U&&U.dynamicDraw&&U.bind(),fe&&fe.bind(),Se&&Se.bind()):this.freshBind(d,_,P,U,ee,ce,fe,Se)}freshBind(o,d,_,P,U,ee,ce,fe){let Se;const Ne=o.numAttributes,Ue=this.context,qe=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=P,this.boundVertexOffset=U,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=ce,this.boundDynamicVertexBuffer3=fe;else{Se=Ue.currentNumAttributes||0;for(let it=Ne;it<Se;it++)qe.disableVertexAttribArray(it)}d.enableAttributes(qe,o);for(const it of _)it.enableAttributes(qe,o);ee&&ee.enableAttributes(qe,o),ce&&ce.enableAttributes(qe,o),fe&&fe.enableAttributes(qe,o),d.bind(),d.setVertexAttribPointers(qe,o,U);for(const it of _)it.bind(),it.setVertexAttribPointers(qe,o,U);ee&&(ee.bind(),ee.setVertexAttribPointers(qe,o,U)),P&&P.bind(),ce&&(ce.bind(),ce.setVertexAttribPointers(qe,o,U)),fe&&(fe.bind(),fe.setVertexAttribPointers(qe,o,U)),Ue.currentNumAttributes=Ne}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function $h(E){const o=[];for(let d=0;d<E.length;d++){if(E[d]===null)continue;const _=E[d].split(" ");o.push(_.pop())}return o}class ix{constructor(o,d,_,P,U,ee,ce){const fe=o.gl;this.program=fe.createProgram();const Se=$h(_.staticAttributes),Ne=P?P.getBinderAttributes():[],Ue=Se.concat(Ne),qe=Mc.prelude.staticUniforms?$h(Mc.prelude.staticUniforms):[],it=_.staticUniforms?$h(_.staticUniforms):[],Qe=P?P.getBinderUniforms():[],et=qe.concat(it).concat(Qe),pt=[];for(const jt of et)pt.indexOf(jt)<0&&pt.push(jt);const yt=P?P.defines():[];ee&&yt.push("#define OVERDRAW_INSPECTOR;"),ce&&yt.push("#define TERRAIN3D;");const _t=yt.concat(Mc.prelude.fragmentSource,_.fragmentSource).join(`
`),at=yt.concat(Mc.prelude.vertexSource,_.vertexSource).join(`
`),At=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())return void(this.failedToCreate=!0);fe.shaderSource(At,_t),fe.compileShader(At),fe.attachShader(this.program,At);const Ct=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())return void(this.failedToCreate=!0);fe.shaderSource(Ct,at),fe.compileShader(Ct),fe.attachShader(this.program,Ct),this.attributes={};const Ot={};this.numAttributes=Ue.length;for(let jt=0;jt<this.numAttributes;jt++)Ue[jt]&&(fe.bindAttribLocation(this.program,jt,Ue[jt]),this.attributes[Ue[jt]]=jt);fe.linkProgram(this.program),fe.deleteShader(Ct),fe.deleteShader(At);for(let jt=0;jt<pt.length;jt++){const $t=pt[jt];if($t&&!Ot[$t]){const zt=fe.getUniformLocation(this.program,$t);zt&&(Ot[$t]=zt)}}this.fixedUniforms=U(o,Ot),this.terrainUniforms=((jt,$t)=>({u_depth:new r.Uniform1i(jt,$t.u_depth),u_terrain:new r.Uniform1i(jt,$t.u_terrain),u_terrain_dim:new r.Uniform1f(jt,$t.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(jt,$t.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(jt,$t.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(jt,$t.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(jt,$t.u_terrain_exaggeration)}))(o,Ot),this.binderUniforms=P?P.getUniforms(o,Ot):[]}draw(o,d,_,P,U,ee,ce,fe,Se,Ne,Ue,qe,it,Qe,et,pt,yt,_t){const at=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(_),o.setStencilMode(P),o.setColorMode(U),o.setCullFace(ee),fe){o.activeTexture.set(at.TEXTURE2),at.bindTexture(at.TEXTURE_2D,fe.depthTexture),o.activeTexture.set(at.TEXTURE3),at.bindTexture(at.TEXTURE_2D,fe.texture);for(const Ct in this.terrainUniforms)this.terrainUniforms[Ct].set(fe[Ct])}for(const Ct in this.fixedUniforms)this.fixedUniforms[Ct].set(ce[Ct]);et&&et.setUniforms(o,this.binderUniforms,it,{zoom:Qe});let At=0;switch(d){case at.LINES:At=2;break;case at.TRIANGLES:At=3;break;case at.LINE_STRIP:At=1}for(const Ct of qe.get()){const Ot=Ct.vaos||(Ct.vaos={});(Ot[Se]||(Ot[Se]=new tx)).bind(o,this,Ne,et?et.getPaintVertexBuffers():[],Ue,Ct.vertexOffset,pt,yt,_t),at.drawElements(d,Ct.primitiveLength*At,at.UNSIGNED_SHORT,Ct.primitiveOffset*At*2)}}}function wd(E,o,d){const _=1/ir(d,1,o.transform.tileZoom),P=Math.pow(2,d.tileID.overscaledZ),U=d.tileSize*Math.pow(2,o.transform.tileZoom)/P,ee=U*(d.tileID.canonical.x+d.tileID.wrap*P),ce=U*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[_,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[ee>>16,ce>>16],u_pixel_coord_lower:[65535&ee,65535&ce]}}const Jf=(E,o,d,_)=>{const P=o.style.light,U=P.properties.get("position"),ee=[U.x,U.y,U.z],ce=r.create$1();P.properties.get("anchor")==="viewport"&&r.fromRotation(ce,-o.transform.angle),r.transformMat3(ee,ee,ce);const fe=P.properties.get("color");return{u_matrix:E,u_lightpos:ee,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[fe.r,fe.g,fe.b],u_vertical_gradient:+d,u_opacity:_}},Td=(E,o,d,_,P,U,ee)=>r.extend(Jf(E,o,d,_),wd(U,o,ee),{u_height_factor:-Math.pow(2,P.overscaledZ)/ee.tileSize/8}),Cd=E=>({u_matrix:E}),Ed=(E,o,d,_)=>r.extend(Cd(E),wd(d,o,_)),em=(E,o)=>({u_matrix:E,u_world:o}),tm=(E,o,d,_,P)=>r.extend(Ed(E,o,d,_),{u_world:P}),el=(E,o,d,_)=>{const P=E.transform;let U,ee;if(_.paint.get("circle-pitch-alignment")==="map"){const ce=ir(d,1,P.zoom);U=!0,ee=[ce,ce]}else U=!1,ee=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(o.posMatrix,d,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+U,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:ee}},Vh=(E,o,d)=>{const _=ir(d,1,o.zoom),P=Math.pow(2,o.zoom-d.tileID.overscaledZ),U=d.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[o.pixelsToGLUnits[0]/(_*P),o.pixelsToGLUnits[1]/(_*P)],u_overscale_factor:U}},Rl=(E,o,d=1)=>({u_matrix:E,u_color:o,u_overlay:0,u_overlay_scale:d}),Pc=E=>({u_matrix:E}),Gh=(E,o,d,_)=>({u_matrix:E,u_extrude_scale:ir(o,1,d),u_intensity:_});function Hh(E,o){const d=Math.pow(2,o.canonical.z),_=o.canonical.y;return[new r.MercatorCoordinate(0,_/d).toLngLat().lat,new r.MercatorCoordinate(0,(_+1)/d).toLngLat().lat]}const Ic=(E,o,d,_)=>{const P=E.transform;return{u_matrix:Sd(E,o,d,_),u_ratio:1/ir(o,1,P.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Wh=(E,o,d,_,P)=>r.extend(Ic(E,o,d,P),{u_image:0,u_image_height:_}),Dc=(E,o,d,_,P)=>{const U=E.transform,ee=Lc(o,U);return{u_matrix:Sd(E,o,d,P),u_texsize:o.imageAtlasTexture.size,u_ratio:1/ir(o,1,U.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[ee,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},pn=(E,o,d,_,P,U)=>{const ee=E.lineAtlas,ce=Lc(o,E.transform),fe=d.layout.get("line-cap")==="round",Se=ee.getDash(_.from,fe),Ne=ee.getDash(_.to,fe),Ue=Se.width*P.fromScale,qe=Ne.width*P.toScale;return r.extend(Ic(E,o,d,U),{u_patternscale_a:[ce/Ue,-Se.height/2],u_patternscale_b:[ce/qe,-Ne.height/2],u_sdfgamma:ee.width/(256*Math.min(Ue,qe)*E.pixelRatio)/2,u_image:0,u_tex_y_a:Se.y,u_tex_y_b:Ne.y,u_mix:P.t})};function Lc(E,o){return 1/ir(E,1,o.tileZoom)}function Sd(E,o,d,_){return E.translatePosMatrix(_?_.posMatrix:o.tileID.posMatrix,o,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const im=(E,o,d,_,P)=>{return{u_matrix:E,u_tl_parent:o,u_scale_parent:d,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(ee=P.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(U=P.paint.get("raster-contrast"),U>0?1/(1-U):1+U),u_spin_weights:rm(P.paint.get("raster-hue-rotate"))};var U,ee};function rm(E){E*=Math.PI/180;const o=Math.sin(E),d=Math.cos(E);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const qh=(E,o,d,_,P,U,ee,ce,fe,Se)=>{const Ne=P.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_pitch:Ne.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:U,u_label_plane_matrix:ee,u_coord_matrix:ce,u_is_text:+fe,u_pitch_with_map:+_,u_texsize:Se,u_texture:0}},kd=(E,o,d,_,P,U,ee,ce,fe,Se,Ne)=>{const Ue=P.transform;return r.extend(qh(E,o,d,_,P,U,ee,ce,fe,Se),{u_gamma_scale:_?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:1})},rx=(E,o,d,_,P,U,ee,ce,fe,Se)=>r.extend(kd(E,o,d,_,P,U,ee,ce,!0,fe),{u_texsize_icon:Se,u_texture_icon:1}),nx=(E,o,d)=>({u_matrix:E,u_opacity:o,u_color:d}),Ad=(E,o,d,_,P,U)=>r.extend(function(ee,ce,fe,Se){const Ne=fe.imageManager.getPattern(ee.from.toString()),Ue=fe.imageManager.getPattern(ee.to.toString()),{width:qe,height:it}=fe.imageManager.getPixelSize(),Qe=Math.pow(2,Se.tileID.overscaledZ),et=Se.tileSize*Math.pow(2,fe.transform.tileZoom)/Qe,pt=et*(Se.tileID.canonical.x+Se.tileID.wrap*Qe),yt=et*Se.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ne.tl,u_pattern_br_a:Ne.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[qe,it],u_mix:ce.t,u_pattern_size_a:Ne.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ce.fromScale,u_scale_b:ce.toScale,u_tile_units_to_pixels:1/ir(Se,1,fe.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(_,U,d,P),{u_matrix:E,u_opacity:o}),Md={fillExtrusion:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_lightpos:new r.Uniform3f(E,o.u_lightpos),u_lightintensity:new r.Uniform1f(E,o.u_lightintensity),u_lightcolor:new r.Uniform3f(E,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(E,o.u_vertical_gradient),u_opacity:new r.Uniform1f(E,o.u_opacity)}),fillExtrusionPattern:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_lightpos:new r.Uniform3f(E,o.u_lightpos),u_lightintensity:new r.Uniform1f(E,o.u_lightintensity),u_lightcolor:new r.Uniform3f(E,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(E,o.u_vertical_gradient),u_height_factor:new r.Uniform1f(E,o.u_height_factor),u_image:new r.Uniform1i(E,o.u_image),u_texsize:new r.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(E,o.u_scale),u_fade:new r.Uniform1f(E,o.u_fade),u_opacity:new r.Uniform1f(E,o.u_opacity)}),fill:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix)}),fillPattern:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_image:new r.Uniform1i(E,o.u_image),u_texsize:new r.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(E,o.u_scale),u_fade:new r.Uniform1f(E,o.u_fade)}),fillOutline:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_world:new r.Uniform2f(E,o.u_world)}),fillOutlinePattern:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_world:new r.Uniform2f(E,o.u_world),u_image:new r.Uniform1i(E,o.u_image),u_texsize:new r.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(E,o.u_scale),u_fade:new r.Uniform1f(E,o.u_fade)}),circle:(E,o)=>({u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(E,o.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(E,o.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(E,o.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(E,o.u_matrix)}),collisionBox:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(E,o.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(E,o.u_extrude_scale),u_overscale_factor:new r.Uniform1f(E,o.u_overscale_factor)}),collisionCircle:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_inv_matrix:new r.UniformMatrix4f(E,o.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(E,o.u_viewport_size)}),debug:(E,o)=>({u_color:new r.UniformColor(E,o.u_color),u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_overlay:new r.Uniform1i(E,o.u_overlay),u_overlay_scale:new r.Uniform1f(E,o.u_overlay_scale)}),clippingMask:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix)}),heatmap:(E,o)=>({u_extrude_scale:new r.Uniform1f(E,o.u_extrude_scale),u_intensity:new r.Uniform1f(E,o.u_intensity),u_matrix:new r.UniformMatrix4f(E,o.u_matrix)}),heatmapTexture:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_world:new r.Uniform2f(E,o.u_world),u_image:new r.Uniform1i(E,o.u_image),u_color_ramp:new r.Uniform1i(E,o.u_color_ramp),u_opacity:new r.Uniform1f(E,o.u_opacity)}),hillshade:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_image:new r.Uniform1i(E,o.u_image),u_latrange:new r.Uniform2f(E,o.u_latrange),u_light:new r.Uniform2f(E,o.u_light),u_shadow:new r.UniformColor(E,o.u_shadow),u_highlight:new r.UniformColor(E,o.u_highlight),u_accent:new r.UniformColor(E,o.u_accent)}),hillshadePrepare:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_image:new r.Uniform1i(E,o.u_image),u_dimension:new r.Uniform2f(E,o.u_dimension),u_zoom:new r.Uniform1f(E,o.u_zoom),u_unpack:new r.Uniform4f(E,o.u_unpack)}),line:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_ratio:new r.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(E,o.u_units_to_pixels)}),lineGradient:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_ratio:new r.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(E,o.u_units_to_pixels),u_image:new r.Uniform1i(E,o.u_image),u_image_height:new r.Uniform1f(E,o.u_image_height)}),linePattern:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_texsize:new r.Uniform2f(E,o.u_texsize),u_ratio:new r.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_image:new r.Uniform1i(E,o.u_image),u_units_to_pixels:new r.Uniform2f(E,o.u_units_to_pixels),u_scale:new r.Uniform3f(E,o.u_scale),u_fade:new r.Uniform1f(E,o.u_fade)}),lineSDF:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_ratio:new r.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(E,o.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(E,o.u_patternscale_a),u_patternscale_b:new r.Uniform2f(E,o.u_patternscale_b),u_sdfgamma:new r.Uniform1f(E,o.u_sdfgamma),u_image:new r.Uniform1i(E,o.u_image),u_tex_y_a:new r.Uniform1f(E,o.u_tex_y_a),u_tex_y_b:new r.Uniform1f(E,o.u_tex_y_b),u_mix:new r.Uniform1f(E,o.u_mix)}),raster:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_tl_parent:new r.Uniform2f(E,o.u_tl_parent),u_scale_parent:new r.Uniform1f(E,o.u_scale_parent),u_buffer_scale:new r.Uniform1f(E,o.u_buffer_scale),u_fade_t:new r.Uniform1f(E,o.u_fade_t),u_opacity:new r.Uniform1f(E,o.u_opacity),u_image0:new r.Uniform1i(E,o.u_image0),u_image1:new r.Uniform1i(E,o.u_image1),u_brightness_low:new r.Uniform1f(E,o.u_brightness_low),u_brightness_high:new r.Uniform1f(E,o.u_brightness_high),u_saturation_factor:new r.Uniform1f(E,o.u_saturation_factor),u_contrast_factor:new r.Uniform1f(E,o.u_contrast_factor),u_spin_weights:new r.Uniform3f(E,o.u_spin_weights)}),symbolIcon:(E,o)=>({u_is_size_zoom_constant:new r.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(E,o.u_size_t),u_size:new r.Uniform1f(E,o.u_size),u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(E,o.u_pitch),u_rotate_symbol:new r.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(E,o.u_fade_change),u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new r.Uniform1i(E,o.u_is_text),u_pitch_with_map:new r.Uniform1i(E,o.u_pitch_with_map),u_texsize:new r.Uniform2f(E,o.u_texsize),u_texture:new r.Uniform1i(E,o.u_texture)}),symbolSDF:(E,o)=>({u_is_size_zoom_constant:new r.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(E,o.u_size_t),u_size:new r.Uniform1f(E,o.u_size),u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(E,o.u_pitch),u_rotate_symbol:new r.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(E,o.u_fade_change),u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new r.Uniform1i(E,o.u_is_text),u_pitch_with_map:new r.Uniform1i(E,o.u_pitch_with_map),u_texsize:new r.Uniform2f(E,o.u_texsize),u_texture:new r.Uniform1i(E,o.u_texture),u_gamma_scale:new r.Uniform1f(E,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(E,o.u_is_halo)}),symbolTextAndIcon:(E,o)=>({u_is_size_zoom_constant:new r.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(E,o.u_size_t),u_size:new r.Uniform1f(E,o.u_size),u_camera_to_center_distance:new r.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(E,o.u_pitch),u_rotate_symbol:new r.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(E,o.u_fade_change),u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new r.Uniform1i(E,o.u_is_text),u_pitch_with_map:new r.Uniform1i(E,o.u_pitch_with_map),u_texsize:new r.Uniform2f(E,o.u_texsize),u_texsize_icon:new r.Uniform2f(E,o.u_texsize_icon),u_texture:new r.Uniform1i(E,o.u_texture),u_texture_icon:new r.Uniform1i(E,o.u_texture_icon),u_gamma_scale:new r.Uniform1f(E,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(E,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(E,o.u_is_halo)}),background:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_opacity:new r.Uniform1f(E,o.u_opacity),u_color:new r.UniformColor(E,o.u_color)}),backgroundPattern:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_opacity:new r.Uniform1f(E,o.u_opacity),u_image:new r.Uniform1i(E,o.u_image),u_pattern_tl_a:new r.Uniform2f(E,o.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(E,o.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(E,o.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(E,o.u_pattern_br_b),u_texsize:new r.Uniform2f(E,o.u_texsize),u_mix:new r.Uniform1f(E,o.u_mix),u_pattern_size_a:new r.Uniform2f(E,o.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(E,o.u_pattern_size_b),u_scale_a:new r.Uniform1f(E,o.u_scale_a),u_scale_b:new r.Uniform1f(E,o.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(E,o.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(E,o.u_tile_units_to_pixels)}),terrain:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_texture:new r.Uniform1i(E,o.u_texture)}),terrainDepth:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix)}),terrainCoords:(E,o)=>({u_matrix:new r.UniformMatrix4f(E,o.u_matrix),u_texture:new r.Uniform1i(E,o.u_texture),u_terrain_coords_id:new r.Uniform1f(E,o.u_terrain_coords_id)})};class Pd{constructor(o,d,_){this.context=o;const P=o.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Id={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nm{constructor(o,d,_,P){this.length=d.length,this.attributes=_,this.itemSize=d.bytesPerElement,this.dynamicDraw=P,this.context=o;const U=o.gl;this.buffer=U.createBuffer(),o.bindVertexBuffer.set(this.buffer),U.bufferData(U.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let _=0;_<this.attributes.length;_++){const P=d.attributes[this.attributes[_].name];P!==void 0&&o.enableVertexAttribArray(P)}}setVertexAttribPointers(o,d,_){for(let P=0;P<this.attributes.length;P++){const U=this.attributes[P],ee=d.attributes[U.name];ee!==void 0&&o.vertexAttribPointer(ee,U.components,o[Id[U.type]],!1,this.itemSize,U.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ar{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class sx extends Ar{getDefault(){return r.Color.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Rc extends Ar{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class zc extends Ar{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class sm extends Ar{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Qs extends Ar{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Dd extends Ar{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Yh extends Ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Zh extends Ar{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Ld extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class Rd extends Ar{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Xh extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class zd extends Ar{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Nd extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class Kh extends Ar{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class am extends Ar{getDefault(){return r.Color.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class om extends Ar{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class zl extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class ax extends Ar{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class ox extends Ar{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class lx extends Ar{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class cx extends Ar{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class hx extends Ar{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class ux extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Od extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Qh extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class jd extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Bd extends Ar{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Nl extends Ar{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class lm extends Ar{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class cm extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Fd extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class wo extends Ar{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class hm extends wo{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Ol extends wo{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class jl{constructor(o,d,_,P){this.context=o,this.width=d,this.height=_;const U=o.gl,ee=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new hm(o,ee),P&&(this.depthAttachment=new Ol(o,ee)),U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,d=this.colorAttachment.get();if(d&&o.deleteTexture(d),this.depthAttachment){const _=this.depthAttachment.get();_&&o.deleteRenderbuffer(_)}o.deleteFramebuffer(this.framebuffer)}}class bn{constructor(o,d,_){this.blendFunction=o,this.blendColor=d,this.mask=_}}bn.Replace=[1,0],bn.disabled=new bn(bn.Replace,r.Color.transparent,[!1,!1,!1,!1]),bn.unblended=new bn(bn.Replace,r.Color.transparent,[!0,!0,!0,!0]),bn.alphaBlended=new bn([1,771],r.Color.transparent,[!0,!0,!0,!0]);class Ud{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new sx(this),this.clearDepth=new Rc(this),this.clearStencil=new zc(this),this.colorMask=new sm(this),this.depthMask=new Qs(this),this.stencilMask=new Dd(this),this.stencilFunc=new Yh(this),this.stencilOp=new Zh(this),this.stencilTest=new Ld(this),this.depthRange=new Rd(this),this.depthTest=new Xh(this),this.depthFunc=new zd(this),this.blend=new Nd(this),this.blendFunc=new Kh(this),this.blendColor=new am(this),this.blendEquation=new om(this),this.cullFace=new zl(this),this.cullFaceSide=new ax(this),this.frontFace=new ox(this),this.program=new lx(this),this.activeTexture=new cx(this),this.viewport=new hx(this),this.bindFramebuffer=new ux(this),this.bindRenderbuffer=new Od(this),this.bindTexture=new Qh(this),this.bindVertexBuffer=new jd(this),this.bindElementBuffer=new Bd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Nl(this),this.pixelStoreUnpack=new lm(this),this.pixelStoreUnpackPremultiplyAlpha=new cm(this),this.pixelStoreUnpackFlipY=new Fd(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d){return new Pd(this,o,d)}createVertexBuffer(o,d,_){return new nm(this,o,d,_)}createRenderbuffer(o,d,_){const P=this.gl,U=P.createRenderbuffer();return this.bindRenderbuffer.set(U),P.renderbufferStorage(P.RENDERBUFFER,o,d,_),this.bindRenderbuffer.set(null),U}createFramebuffer(o,d,_){return new jl(this,o,d,_)}clear({color:o,depth:d}){const _=this.gl;let P=0;o&&(P|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(P|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),_.clear(P)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){v(o.blendFunction,bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ti{constructor(o,d,_){this.func=o,this.mask=d,this.range=_}}Ti.ReadOnly=!1,Ti.ReadWrite=!0,Ti.disabled=new Ti(519,Ti.ReadOnly,[0,1]);const Bl=7680;class fn{constructor(o,d,_,P,U,ee){this.test=o,this.ref=d,this.mask=_,this.fail=P,this.depthFail=U,this.pass=ee}}fn.disabled=new fn({func:519,mask:0},0,0,Bl,Bl,Bl);class Jr{constructor(o,d,_){this.enable=o,this.mode=d,this.frontFace=_}}let To;function um(E,o,d,_,P,U,ee){const ce=E.context,fe=ce.gl,Se=E.useProgram("collisionBox"),Ne=[];let Ue=0,qe=0;for(let at=0;at<_.length;at++){const At=_[at],Ct=o.getTile(At),Ot=Ct.getBucket(d);if(!Ot)continue;let jt=At.posMatrix;P[0]===0&&P[1]===0||(jt=E.translatePosMatrix(At.posMatrix,Ct,P,U));const $t=ee?Ot.textCollisionBox:Ot.iconCollisionBox,zt=Ot.collisionCircleArray;if(zt.length>0){const ai=r.create(),Xt=jt;r.mul(ai,Ot.placementInvProjMatrix,E.transform.glCoordMatrix),r.mul(ai,ai,Ot.placementViewportMatrix),Ne.push({circleArray:zt,circleOffset:qe,transform:Xt,invTransform:ai,coord:At}),Ue+=zt.length/4,qe=Ue}$t&&Se.draw(ce,fe.LINES,Ti.disabled,fn.disabled,E.colorModeForRenderPass(),Jr.disabled,Vh(jt,E.transform,Ct),E.style.terrain&&E.style.terrain.getTerrainData(At),d.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,E.transform.zoom,null,null,$t.collisionVertexBuffer)}if(!ee||!Ne.length)return;const it=E.useProgram("collisionCircle"),Qe=new r.CollisionCircleLayoutArray;Qe.resize(4*Ue),Qe._trim();let et=0;for(const at of Ne)for(let At=0;At<at.circleArray.length/4;At++){const Ct=4*At,Ot=at.circleArray[Ct+0],jt=at.circleArray[Ct+1],$t=at.circleArray[Ct+2],zt=at.circleArray[Ct+3];Qe.emplace(et++,Ot,jt,$t,zt,0),Qe.emplace(et++,Ot,jt,$t,zt,1),Qe.emplace(et++,Ot,jt,$t,zt,2),Qe.emplace(et++,Ot,jt,$t,zt,3)}(!To||To.length<2*Ue)&&(To=function(at){const At=2*at,Ct=new r.QuadTriangleArray;Ct.resize(At),Ct._trim();for(let Ot=0;Ot<At;Ot++){const jt=6*Ot;Ct.uint16[jt+0]=4*Ot+0,Ct.uint16[jt+1]=4*Ot+1,Ct.uint16[jt+2]=4*Ot+2,Ct.uint16[jt+3]=4*Ot+2,Ct.uint16[jt+4]=4*Ot+3,Ct.uint16[jt+5]=4*Ot+0}return Ct}(Ue));const pt=ce.createIndexBuffer(To,!0),yt=ce.createVertexBuffer(Qe,r.collisionCircleLayout.members,!0);for(const at of Ne){const At={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(_t=E.transform).cameraToCenterDistance,u_viewport_size:[_t.width,_t.height]};it.draw(ce,fe.TRIANGLES,Ti.disabled,fn.disabled,E.colorModeForRenderPass(),Jr.disabled,At,E.style.terrain&&E.style.terrain.getTerrainData(at.coord),d.id,yt,pt,r.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,E.transform.zoom,null,null,null)}var _t;yt.destroy(),pt.destroy()}Jr.disabled=new Jr(!1,1029,2305),Jr.backCCW=new Jr(!0,1029,2305);const dx=r.identity(new Float32Array(16));function dm(E,o,d,_,P,U){const{horizontalAlign:ee,verticalAlign:ce}=r.getAnchorAlignment(E),fe=-(ee-.5)*o,Se=-(ce-.5)*d,Ne=r.evaluateVariableOffset(E,_);return new r.pointGeometry((fe/P+Ne[0])*U,(Se/P+Ne[1])*U)}function px(E,o,d,_,P,U,ee,ce,fe,Se,Ne){const Ue=E.text.placedSymbolArray,qe=E.text.dynamicLayoutVertexArray,it=E.icon.dynamicLayoutVertexArray,Qe={};qe.clear();for(let et=0;et<Ue.length;et++){const pt=Ue.get(et),yt=E.allowVerticalPlacement&&!pt.placedOrientation,_t=pt.hidden||!pt.crossTileID||yt?null:_[pt.crossTileID];if(_t){const at=new r.pointGeometry(pt.anchorX,pt.anchorY),At=dt(at,d?ee:U,Ne),Ct=gt(P.cameraToCenterDistance,At.signedDistanceFromCamera);let Ot=r.evaluateSizeForFeature(E.textSizeData,fe,pt)*Ct/r.ONE_EM;d&&(Ot*=E.tilePixelRatio/ce);const{width:jt,height:$t,anchor:zt,textOffset:ai,textBoxScale:Xt}=_t,li=dm(zt,jt,$t,ai,Xt,Ot),Ki=d?dt(at.add(li),U,Ne).point:At.point.add(o?li.rotate(-P.angle):li),or=E.allowVerticalPlacement&&pt.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let Ii=0;Ii<pt.numGlyphs;Ii++)r.addDynamicAttributes(qe,Ki,or);Se&&pt.associatedIconIndex>=0&&(Qe[pt.associatedIconIndex]={shiftedAnchor:Ki,angle:or})}else ar(pt.numGlyphs,qe)}if(Se){it.clear();const et=E.icon.placedSymbolArray;for(let pt=0;pt<et.length;pt++){const yt=et.get(pt);if(yt.hidden)ar(yt.numGlyphs,it);else{const _t=Qe[pt];if(_t)for(let at=0;at<yt.numGlyphs;at++)r.addDynamicAttributes(it,_t.shiftedAnchor,_t.angle);else ar(yt.numGlyphs,it)}}E.icon.dynamicLayoutVertexBuffer.updateData(it)}E.text.dynamicLayoutVertexBuffer.updateData(qe)}function $d(E,o,d){return d.iconsInText&&o?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Nc(E,o,d,_,P,U,ee,ce,fe,Se,Ne,Ue){const qe=E.context,it=qe.gl,Qe=E.transform,et=ce==="map",pt=fe==="map",yt=ce!=="viewport"&&d.layout.get("symbol-placement")!=="point",_t=et&&!pt&&!yt,at=!d.layout.get("symbol-sort-key").isConstant();let At=!1;const Ct=E.depthModeForSublayer(0,Ti.ReadOnly),Ot=d.layout.get("text-variable-anchor"),jt=[];for(const $t of _){const zt=o.getTile($t),ai=zt.getBucket(d);if(!ai)continue;const Xt=P?ai.text:ai.icon;if(!Xt||!Xt.segments.get().length)continue;const li=Xt.programConfigurations.get(d.id),Ki=P||ai.sdfIcons,or=P?ai.textSizeData:ai.iconSizeData,Ii=pt||Qe.pitch!==0,jr=E.useProgram($d(Ki,P,ai),li),Br=r.evaluateSizeForZoom(or,Qe.zoom),xr=E.style.terrain&&E.style.terrain.getTerrainData($t);let br,Tr,ea,qa,Pa=[0,0],Ia=null;if(P){if(Tr=zt.glyphAtlasTexture,ea=it.LINEAR,br=zt.glyphAtlasTexture.size,ai.iconsInText){Pa=zt.imageAtlasTexture.size,Ia=zt.imageAtlasTexture;const ba=or.kind==="composite"||or.kind==="camera";qa=Ii||E.options.rotating||E.options.zooming||ba?it.LINEAR:it.NEAREST}}else{const ba=d.layout.get("icon-size").constantOr(0)!==1||ai.iconsNeedLinear;Tr=zt.imageAtlasTexture,ea=Ki||E.options.rotating||E.options.zooming||ba||Ii?it.LINEAR:it.NEAREST,br=zt.imageAtlasTexture.size}const ol=ir(zt,1,E.transform.zoom),as=tt($t.posMatrix,pt,et,E.transform,ol),Da=rt($t.posMatrix,pt,et,E.transform,ol),ll=Ot&&ai.hasTextData(),pu=d.layout.get("icon-text-fit")!=="none"&&ll&&ai.hasIconData();if(yt){const ba=E.style.terrain?(Hl,fu)=>E.style.terrain.getElevation($t,Hl,fu):null,Gl=d.layout.get("text-rotation-alignment")==="map";Rt(ai,$t.posMatrix,E,P,as,Da,pt,Se,Gl,ba)}const Cr=E.translatePosMatrix($t.posMatrix,zt,U,ee),tn=yt||P&&Ot||pu?dx:as,Sr=E.translatePosMatrix(Da,zt,U,ee,!0),On=Ki&&d.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Vs;Vs=Ki?ai.iconsInText?rx(or.kind,Br,_t,pt,E,Cr,tn,Sr,br,Pa):kd(or.kind,Br,_t,pt,E,Cr,tn,Sr,P,br):qh(or.kind,Br,_t,pt,E,Cr,tn,Sr,P,br);const ln={program:jr,buffers:Xt,uniformValues:Vs,atlasTexture:Tr,atlasTextureIcon:Ia,atlasInterpolation:ea,atlasInterpolationIcon:qa,isSDF:Ki,hasHalo:On};if(at&&ai.canOverlap){At=!0;const ba=Xt.segments.get();for(const Gl of ba)jt.push({segments:new r.SegmentVector([Gl]),sortKey:Gl.sortKey,state:ln,terrainData:xr})}else jt.push({segments:Xt.segments,sortKey:0,state:ln,terrainData:xr})}At&&jt.sort(($t,zt)=>$t.sortKey-zt.sortKey);for(const $t of jt){const zt=$t.state;if(qe.activeTexture.set(it.TEXTURE0),zt.atlasTexture.bind(zt.atlasInterpolation,it.CLAMP_TO_EDGE),zt.atlasTextureIcon&&(qe.activeTexture.set(it.TEXTURE1),zt.atlasTextureIcon&&zt.atlasTextureIcon.bind(zt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),zt.isSDF){const ai=zt.uniformValues;zt.hasHalo&&(ai.u_is_halo=1,Oc(zt.buffers,$t.segments,d,E,zt.program,Ct,Ne,Ue,ai,$t.terrainData)),ai.u_is_halo=0}Oc(zt.buffers,$t.segments,d,E,zt.program,Ct,Ne,Ue,zt.uniformValues,$t.terrainData)}}function Oc(E,o,d,_,P,U,ee,ce,fe,Se){const Ne=_.context;P.draw(Ne,Ne.gl.TRIANGLES,U,ee,ce,Jr.disabled,fe,Se,d.id,E.layoutVertexBuffer,E.indexBuffer,o,d.paint,_.transform.zoom,E.programConfigurations.get(d.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Jh(E,o,d,_,P,U,ee){const ce=E.context.gl,fe=d.paint.get("fill-pattern"),Se=fe&&fe.constantOr(1),Ne=d.getCrossfadeParameters();let Ue,qe,it,Qe,et;ee?(qe=Se&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=ce.LINES):(qe=Se?"fillPattern":"fill",Ue=ce.TRIANGLES);for(const pt of _){const yt=o.getTile(pt);if(Se&&!yt.patternsLoaded())continue;const _t=yt.getBucket(d);if(!_t)continue;const at=_t.programConfigurations.get(d.id),At=E.useProgram(qe,at),Ct=E.style.terrain&&E.style.terrain.getTerrainData(pt);Se&&(E.context.activeTexture.set(ce.TEXTURE0),yt.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),at.updatePaintBuffers(Ne));const Ot=fe.constantOr(null);if(Ot&&yt.imageAtlas){const zt=yt.imageAtlas,ai=zt.patternPositions[Ot.to.toString()],Xt=zt.patternPositions[Ot.from.toString()];ai&&Xt&&at.setConstantPatternPositions(ai,Xt)}const jt=Ct?pt:null,$t=E.translatePosMatrix(jt?jt.posMatrix:pt.posMatrix,yt,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(ee){Qe=_t.indexBuffer2,et=_t.segments2;const zt=[ce.drawingBufferWidth,ce.drawingBufferHeight];it=qe==="fillOutlinePattern"&&Se?tm($t,E,Ne,yt,zt):em($t,zt)}else Qe=_t.indexBuffer,et=_t.segments,it=Se?Ed($t,E,Ne,yt):Cd($t);At.draw(E.context,Ue,P,E.stencilModeForClipping(pt),U,Jr.disabled,it,Ct,d.id,_t.layoutVertexBuffer,Qe,et,d.paint,E.transform.zoom,at)}}function jc(E,o,d,_,P,U,ee){const ce=E.context,fe=ce.gl,Se=d.paint.get("fill-extrusion-pattern"),Ne=Se.constantOr(1),Ue=d.getCrossfadeParameters(),qe=d.paint.get("fill-extrusion-opacity");for(const it of _){const Qe=o.getTile(it),et=Qe.getBucket(d);if(!et)continue;const pt=E.style.terrain&&E.style.terrain.getTerrainData(it),yt=et.programConfigurations.get(d.id),_t=E.useProgram(Ne?"fillExtrusionPattern":"fillExtrusion",yt);Ne&&(E.context.activeTexture.set(fe.TEXTURE0),Qe.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),yt.updatePaintBuffers(Ue));const at=Se.constantOr(null);if(at&&Qe.imageAtlas){const jt=Qe.imageAtlas,$t=jt.patternPositions[at.to.toString()],zt=jt.patternPositions[at.from.toString()];$t&&zt&&yt.setConstantPatternPositions($t,zt)}const At=E.translatePosMatrix(it.posMatrix,Qe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ct=d.paint.get("fill-extrusion-vertical-gradient"),Ot=Ne?Td(At,E,Ct,qe,it,Ue,Qe):Jf(At,E,Ct,qe);_t.draw(ce,ce.gl.TRIANGLES,P,U,ee,Jr.backCCW,Ot,pt,d.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,d.paint,E.transform.zoom,yt,E.style.terrain&&et.centroidVertexBuffer)}}function pm(E,o,d,_,P,U,ee){const ce=E.context,fe=ce.gl,Se=d.fbo;if(!Se)return;const Ne=E.useProgram("hillshade"),Ue=E.style.terrain&&E.style.terrain.getTerrainData(o);ce.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Se.colorAttachment.get()),Ne.draw(ce,fe.TRIANGLES,P,U,ee,Jr.disabled,((qe,it,Qe,et)=>{const pt=Qe.paint.get("hillshade-shadow-color"),yt=Qe.paint.get("hillshade-highlight-color"),_t=Qe.paint.get("hillshade-accent-color");let at=Qe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Qe.paint.get("hillshade-illumination-anchor")==="viewport"&&(at-=qe.transform.angle);const At=!qe.options.moving;return{u_matrix:et?et.posMatrix:qe.transform.calculatePosMatrix(it.tileID.toUnwrapped(),At),u_image:0,u_latrange:Hh(0,it.tileID),u_light:[Qe.paint.get("hillshade-exaggeration"),at],u_shadow:pt,u_highlight:yt,u_accent:_t}})(E,d,_,Ue?o:null),Ue,_.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function eu(E,o,d,_,P,U){const ee=E.context,ce=ee.gl,fe=o.dem;if(fe&&fe.data){const Se=fe.dim,Ne=fe.stride,Ue=fe.getPixels();if(ee.activeTexture.set(ce.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||E.getTileTexture(Ne),o.demTexture){const it=o.demTexture;it.update(Ue,{premultiply:!1}),it.bind(ce.NEAREST,ce.CLAMP_TO_EDGE)}else o.demTexture=new T(ee,Ue,ce.RGBA,{premultiply:!1}),o.demTexture.bind(ce.NEAREST,ce.CLAMP_TO_EDGE);ee.activeTexture.set(ce.TEXTURE0);let qe=o.fbo;if(!qe){const it=new T(ee,{width:Se,height:Se,data:null},ce.RGBA);it.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),qe=o.fbo=ee.createFramebuffer(Se,Se,!0),qe.colorAttachment.set(it.texture)}ee.bindFramebuffer.set(qe.framebuffer),ee.viewport.set([0,0,Se,Se]),E.useProgram("hillshadePrepare").draw(ee,ce.TRIANGLES,_,P,U,Jr.disabled,((it,Qe)=>{const et=Qe.stride,pt=r.create();return r.ortho(pt,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(pt,pt,[0,-r.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[et,et],u_zoom:it.overscaledZ,u_unpack:Qe.getUnpackVector()}})(o.tileID,fe),null,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function tu(E,o,d,_,P,U){const ee=_.paint.get("raster-fade-duration");if(!U&&ee>0){const ce=r.exported.now(),fe=(ce-E.timeAdded)/ee,Se=o?(ce-o.timeAdded)/ee:-1,Ne=d.getSource(),Ue=P.coveringZoomLevel({tileSize:Ne.tileSize,roundZoom:Ne.roundZoom}),qe=!o||Math.abs(o.tileID.overscaledZ-Ue)>Math.abs(E.tileID.overscaledZ-Ue),it=qe&&E.refreshedUponExpiration?1:r.clamp(qe?fe:1-Se,0,1);return E.refreshedUponExpiration&&fe>=1&&(E.refreshedUponExpiration=!1),o?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const Ma=new r.Color(1,0,0,1),fm=new r.Color(0,1,0,1),Vd=new r.Color(0,0,1,1),mm=new r.Color(1,0,1,1),Fl=new r.Color(0,1,1,1);function Bc(E,o,d,_){ru(E,0,o+d/2,E.transform.width,d,_)}function iu(E,o,d,_){ru(E,o-d/2,0,d,E.transform.height,_)}function ru(E,o,d,_,P,U){const ee=E.context,ce=ee.gl;ce.enable(ce.SCISSOR_TEST),ce.scissor(o*E.pixelRatio,d*E.pixelRatio,_*E.pixelRatio,P*E.pixelRatio),ee.clear({color:U}),ce.disable(ce.SCISSOR_TEST)}function Gd(E,o,d){const _=E.context,P=_.gl,U=d.posMatrix,ee=E.useProgram("debug"),ce=Ti.disabled,fe=fn.disabled,Se=E.colorModeForRenderPass(),Ne="$debug",Ue=E.style.terrain&&E.style.terrain.getTerrainData(d);_.activeTexture.set(P.TEXTURE0),E.emptyTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE);const qe=o.getTileByID(d.key).latestRawTileData,it=Math.floor((qe&&qe.byteLength||0)/1024),Qe=o.getTile(d).tileSize,et=512/Math.min(Qe,512)*(d.overscaledZ/E.transform.zoom)*.5;let pt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(pt+=` => ${d.overscaledZ}`),function(yt,_t){yt.initDebugOverlayCanvas();const at=yt.debugOverlayCanvas,At=yt.context.gl,Ct=yt.debugOverlayCanvas.getContext("2d");Ct.clearRect(0,0,at.width,at.height),Ct.shadowColor="white",Ct.shadowBlur=2,Ct.lineWidth=1.5,Ct.strokeStyle="white",Ct.textBaseline="top",Ct.font="bold 36px Open Sans, sans-serif",Ct.fillText(_t,5,5),Ct.strokeText(_t,5,5),yt.debugOverlayTexture.update(at),yt.debugOverlayTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE)}(E,`${pt} ${it}kB`),ee.draw(_,P.TRIANGLES,ce,fe,bn.alphaBlended,Jr.disabled,Rl(U,r.Color.transparent,et),null,Ne,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),ee.draw(_,P.LINE_STRIP,ce,fe,Se,Jr.disabled,Rl(U,r.Color.red),Ue,Ne,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function gm(E,o,d){const _=E.context,P=_.gl,U=E.colorModeForRenderPass(),ee=new Ti(P.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D),ce=E.useProgram("terrain"),fe=o.getTerrainMesh(),Se=o.getTerrainData(d.tileID);_.bindFramebuffer.set(null),_.viewport.set([0,0,E.width,E.height]),_.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,o.getRTTFramebuffer().colorAttachment.get());const Ne=E.transform.calculatePosMatrix(d.tileID.toUnwrapped());ce.draw(_,P.TRIANGLES,ee,fn.disabled,U,Jr.backCCW,{u_matrix:Ne,u_texture:0},Se,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}function Hd(E,o,d,_){const P=E.context,U=d.tileSize*o.qualityFactor;d.textures[_]||(d.textures[_]=E.getTileTexture(U)||new T(P,{width:U,height:U,data:null},P.gl.RGBA),d.textures[_].bind(P.gl.LINEAR,P.gl.CLAMP_TO_EDGE),_===0&&o.sourceCache.renderHistory.unshift(d.tileID.key));const ee=o.getRTTFramebuffer();ee.colorAttachment.set(d.textures[_].texture),P.bindFramebuffer.set(ee.framebuffer),P.viewport.set([0,0,U,U])}class nu{constructor(o){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=o,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=o.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const o=this.painter.style,d=o.terrain;for(const _ in o.sourceCaches){this._coordsDescendingInv[_]={};const P=o.sourceCaches[_].getVisibleCoordinates();for(const U of P){const ee=d.sourceCache.getTerrainCoords(U);for(const ce in ee)this._coordsDescendingInv[_][ce]||(this._coordsDescendingInv[_][ce]=[]),this._coordsDescendingInv[_][ce].push(ee[ce])}}for(const _ of o._order){const P=o._layers[_],U=P.source;if(this._renderToTexture[P.type]&&!this._coordsDescendingInvStr[U]){this._coordsDescendingInvStr[U]={};for(const ee in this._coordsDescendingInv[U])this._coordsDescendingInvStr[U][ee]=this._coordsDescendingInv[U][ee].map(ce=>ce.key).sort().join()}}return this._renderableTiles.forEach(_=>{for(const P in this._coordsDescendingInvStr){const U=this._coordsDescendingInvStr[P][_.tileID.key];U&&U!==_.textureCoords[P]&&_.clearTextures(this.painter),d.needsRerender(P,_.tileID)&&_.clearTextures(this.painter)}this._rerender[_.tileID.key]=!_.textures.length}),d.clearRerenderCache(),d.sourceCache.removeOutdated(this.painter),this}renderLayer(o){const d=o.type,_=this.painter,P=_.style._order,U=_.currentLayer,ee=U+1===P.length;if(this._renderToTexture[d]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(P[U]),!ee))return!0;if(this._renderToTexture[this._prevType]||d==="hillshade"||this._renderToTexture[d]&&ee){this._prevType=d;const ce=this._stacks.length-1,fe=this._stacks[ce]||[];for(const Se of this._renderableTiles){if(Hd(_,_.style.terrain,Se,ce),this._rerender[Se.tileID.key]){_.context.clear({color:r.Color.transparent});for(let Ne=0;Ne<fe.length;Ne++){const Ue=_.style._layers[fe[Ne]],qe=Ue.source?this._coordsDescendingInv[Ue.source][Se.tileID.key]:[Se.tileID];_._renderTileClippingMasks(Ue,qe),_.renderLayer(_,_.style.sourceCaches[Ue.source],Ue,qe),Ue.source&&(Se.textureCoords[Ue.source]=this._coordsDescendingInvStr[Ue.source][Se.tileID.key])}}gm(_,_.style.terrain,Se)}if(d==="hillshade"){this._stacks.push([P[U]]);for(const Se of this._renderableTiles){const Ne=this._coordsDescendingInv[o.source][Se.tileID.key];Hd(_,_.style.terrain,Se,this._stacks.length-1),_.context.clear({color:r.Color.transparent}),_._renderTileClippingMasks(o,Ne),_.renderLayer(_,_.style.sourceCaches[o.source],o,Ne),gm(_,_.style.terrain,Se)}return!0}return this._renderToTexture[d]}return!1}}const su={symbol:function(E,o,d,_,P){if(E.renderPass!=="translucent")return;const U=fn.disabled,ee=E.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(ce,fe,Se,Ne,Ue,qe,it){const Qe=fe.transform,et=Ue==="map",pt=qe==="map";for(const yt of ce){const _t=Ne.getTile(yt),at=_t.getBucket(Se);if(!at||!at.text||!at.text.segments.get().length)continue;const At=r.evaluateSizeForZoom(at.textSizeData,Qe.zoom),Ct=ir(_t,1,fe.transform.zoom),Ot=tt(yt.posMatrix,pt,et,fe.transform,Ct),jt=Se.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(At){const $t=Math.pow(2,Qe.zoom-_t.tileID.overscaledZ);px(at,et,pt,it,Qe,Ot,yt.posMatrix,$t,At,jt,fe.style.terrain?(zt,ai)=>fe.style.terrain.getElevation(yt,zt,ai):null)}}}(_,E,d,o,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),P),d.paint.get("icon-opacity").constantOr(1)!==0&&Nc(E,o,d,_,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),U,ee),d.paint.get("text-opacity").constantOr(1)!==0&&Nc(E,o,d,_,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),U,ee),o.map.showCollisionBoxes&&(um(E,o,d,_,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),um(E,o,d,_,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(E,o,d,_){if(E.renderPass!=="translucent")return;const P=d.paint.get("circle-opacity"),U=d.paint.get("circle-stroke-width"),ee=d.paint.get("circle-stroke-opacity"),ce=!d.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(U.constantOr(1)===0||ee.constantOr(1)===0))return;const fe=E.context,Se=fe.gl,Ne=E.depthModeForSublayer(0,Ti.ReadOnly),Ue=fn.disabled,qe=E.colorModeForRenderPass(),it=[];for(let Qe=0;Qe<_.length;Qe++){const et=_[Qe],pt=o.getTile(et),yt=pt.getBucket(d);if(!yt)continue;const _t=yt.programConfigurations.get(d.id),at=E.useProgram("circle",_t),At=yt.layoutVertexBuffer,Ct=yt.indexBuffer,Ot=E.style.terrain&&E.style.terrain.getTerrainData(et),jt={programConfiguration:_t,program:at,layoutVertexBuffer:At,indexBuffer:Ct,uniformValues:el(E,et,pt,d),terrainData:Ot};if(ce){const $t=yt.segments.get();for(const zt of $t)it.push({segments:new r.SegmentVector([zt]),sortKey:zt.sortKey,state:jt})}else it.push({segments:yt.segments,sortKey:0,state:jt})}ce&&it.sort((Qe,et)=>Qe.sortKey-et.sortKey);for(const Qe of it){const{programConfiguration:et,program:pt,layoutVertexBuffer:yt,indexBuffer:_t,uniformValues:at,terrainData:At}=Qe.state;pt.draw(fe,Se.TRIANGLES,Ne,Ue,qe,Jr.disabled,at,At,d.id,yt,_t,Qe.segments,d.paint,E.transform.zoom,et)}},heatmap:function(E,o,d,_){if(d.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){const P=E.context,U=P.gl,ee=fn.disabled,ce=new bn([U.ONE,U.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(fe,Se,Ne){const Ue=fe.gl;fe.activeTexture.set(Ue.TEXTURE1),fe.viewport.set([0,0,Se.width/4,Se.height/4]);let qe=Ne.heatmapFbo;if(qe)Ue.bindTexture(Ue.TEXTURE_2D,qe.colorAttachment.get()),fe.bindFramebuffer.set(qe.framebuffer);else{const it=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,it),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.LINEAR),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.LINEAR),qe=Ne.heatmapFbo=fe.createFramebuffer(Se.width/4,Se.height/4,!1),function(Qe,et,pt,yt){const _t=Qe.gl;_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,et.width/4,et.height/4,0,_t.RGBA,Qe.extRenderToTextureHalfFloat?Qe.extTextureHalfFloat.HALF_FLOAT_OES:_t.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(fe,Se,it,qe)}})(P,E,d),P.clear({color:r.Color.transparent});for(let fe=0;fe<_.length;fe++){const Se=_[fe];if(o.hasRenderableParent(Se))continue;const Ne=o.getTile(Se),Ue=Ne.getBucket(d);if(!Ue)continue;const qe=Ue.programConfigurations.get(d.id),it=E.useProgram("heatmap",qe),{zoom:Qe}=E.transform;it.draw(P,U.TRIANGLES,Ti.disabled,ee,ce,Jr.disabled,Gh(Se.posMatrix,Ne,Qe,d.paint.get("heatmap-intensity")),null,d.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,d.paint,E.transform.zoom,qe)}P.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(P,U){const ee=P.context,ce=ee.gl,fe=U.heatmapFbo;if(!fe)return;ee.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,fe.colorAttachment.get()),ee.activeTexture.set(ce.TEXTURE1);let Se=U.colorRampTexture;Se||(Se=U.colorRampTexture=new T(ee,U.colorRamp,ce.RGBA)),Se.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(ee,ce.TRIANGLES,Ti.disabled,fn.disabled,P.colorModeForRenderPass(),Jr.disabled,((Ne,Ue,qe,it)=>{const Qe=r.create();r.ortho(Qe,0,Ne.width,Ne.height,0,0,1);const et=Ne.context.gl;return{u_matrix:Qe,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}})(P,U),null,U.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,U.paint,P.transform.zoom)}(E,d))},line:function(E,o,d,_){if(E.renderPass!=="translucent")return;const P=d.paint.get("line-opacity"),U=d.paint.get("line-width");if(P.constantOr(1)===0||U.constantOr(1)===0)return;const ee=E.depthModeForSublayer(0,Ti.ReadOnly),ce=E.colorModeForRenderPass(),fe=d.paint.get("line-dasharray"),Se=d.paint.get("line-pattern"),Ne=Se.constantOr(1),Ue=d.paint.get("line-gradient"),qe=d.getCrossfadeParameters(),it=Ne?"linePattern":fe?"lineSDF":Ue?"lineGradient":"line",Qe=E.context,et=Qe.gl;let pt=!0;for(const yt of _){const _t=o.getTile(yt);if(Ne&&!_t.patternsLoaded())continue;const at=_t.getBucket(d);if(!at)continue;const At=at.programConfigurations.get(d.id),Ct=E.context.program.get(),Ot=E.useProgram(it,At),jt=pt||Ot.program!==Ct,$t=E.style.terrain&&E.style.terrain.getTerrainData(yt),zt=Se.constantOr(null);if(zt&&_t.imageAtlas){const li=_t.imageAtlas,Ki=li.patternPositions[zt.to.toString()],or=li.patternPositions[zt.from.toString()];Ki&&or&&At.setConstantPatternPositions(Ki,or)}const ai=$t?yt:null,Xt=Ne?Dc(E,_t,d,qe,ai):fe?pn(E,_t,d,fe,qe,ai):Ue?Wh(E,_t,d,at.lineClipsArray.length,ai):Ic(E,_t,d,ai);if(Ne)Qe.activeTexture.set(et.TEXTURE0),_t.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),At.updatePaintBuffers(qe);else if(fe&&(jt||E.lineAtlas.dirty))Qe.activeTexture.set(et.TEXTURE0),E.lineAtlas.bind(Qe);else if(Ue){const li=at.gradients[d.id];let Ki=li.texture;if(d.gradientVersion!==li.version){let or=256;if(d.stepInterpolant){const Ii=o.getSource().maxzoom,jr=yt.canonical.z===Ii?Math.ceil(1<<E.transform.maxZoom-yt.canonical.z):1;or=r.clamp(r.nextPowerOfTwo(at.maxLineLength/r.EXTENT*1024*jr),256,Qe.maxTextureSize)}li.gradient=r.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:or,image:li.gradient||void 0,clips:at.lineClipsArray}),li.texture?li.texture.update(li.gradient):li.texture=new T(Qe,li.gradient,et.RGBA),li.version=d.gradientVersion,Ki=li.texture}Qe.activeTexture.set(et.TEXTURE0),Ki.bind(d.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}Ot.draw(Qe,et.TRIANGLES,ee,E.stencilModeForClipping(yt),ce,Jr.disabled,Xt,$t,d.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,d.paint,E.transform.zoom,At,at.layoutVertexBuffer2),pt=!1}},fill:function(E,o,d,_){const P=d.paint.get("fill-color"),U=d.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const ee=E.colorModeForRenderPass(),ce=d.paint.get("fill-pattern"),fe=E.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&P.constantOr(r.Color.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===fe){const Se=E.depthModeForSublayer(1,E.renderPass==="opaque"?Ti.ReadWrite:Ti.ReadOnly);Jh(E,o,d,_,Se,ee,!1)}if(E.renderPass==="translucent"&&d.paint.get("fill-antialias")){const Se=E.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,Ti.ReadOnly);Jh(E,o,d,_,Se,ee,!0)}},"fill-extrusion":function(E,o,d,_){const P=d.paint.get("fill-extrusion-opacity");if(P!==0&&E.renderPass==="translucent"){const U=new Ti(E.context.gl.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D);if(P!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))jc(E,o,d,_,U,fn.disabled,bn.disabled),jc(E,o,d,_,U,E.stencilModeFor3D(),E.colorModeForRenderPass());else{const ee=E.colorModeForRenderPass();jc(E,o,d,_,U,fn.disabled,ee)}}},hillshade:function(E,o,d,_){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const P=E.context,U=E.depthModeForSublayer(0,Ti.ReadOnly),ee=E.colorModeForRenderPass(),[ce,fe]=E.renderPass==="translucent"?E.stencilConfigForOverlap(_):[{},_];for(const Se of fe){const Ne=o.getTile(Se);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&E.renderPass==="offscreen"?eu(E,Ne,d,U,fn.disabled,ee):E.renderPass==="translucent"&&pm(E,Se,Ne,d,U,ce[Se.overscaledZ],ee)}P.viewport.set([0,0,E.width,E.height])},raster:function(E,o,d,_){if(E.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!_.length)return;const P=E.context,U=P.gl,ee=o.getSource(),ce=E.useProgram("raster"),fe=E.colorModeForRenderPass(),[Se,Ne]=ee instanceof H?[{},_]:E.stencilConfigForOverlap(_),Ue=Ne[Ne.length-1].overscaledZ,qe=!E.options.moving;for(const it of Ne){const Qe=E.depthModeForSublayer(it.overscaledZ-Ue,d.paint.get("raster-opacity")===1?Ti.ReadWrite:Ti.ReadOnly,U.LESS),et=o.getTile(it);et.registerFadeDuration(d.paint.get("raster-fade-duration"));const pt=o.findLoadedParent(it,0),yt=tu(et,pt,o,d,E.transform,E.style.terrain);let _t,at;const At=d.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;P.activeTexture.set(U.TEXTURE0),et.texture.bind(At,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(U.TEXTURE1),pt?(pt.texture.bind(At,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),_t=Math.pow(2,pt.tileID.overscaledZ-et.tileID.overscaledZ),at=[et.tileID.canonical.x*_t%1,et.tileID.canonical.y*_t%1]):et.texture.bind(At,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Ct=E.style.terrain&&E.style.terrain.getTerrainData(it),Ot=Ct?it:null,jt=Ot?Ot.posMatrix:E.transform.calculatePosMatrix(it.toUnwrapped(),qe),$t=im(jt,at||[0,0],_t||1,yt,d);ee instanceof H?ce.draw(P,U.TRIANGLES,Qe,fn.disabled,fe,Jr.disabled,$t,Ct,d.id,ee.boundsBuffer,E.quadTriangleIndexBuffer,ee.boundsSegments):ce.draw(P,U.TRIANGLES,Qe,Se[it.overscaledZ],fe,Jr.disabled,$t,Ct,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,o,d,_){const P=d.paint.get("background-color"),U=d.paint.get("background-opacity");if(U===0)return;const ee=E.context,ce=ee.gl,fe=E.transform,Se=fe.tileSize,Ne=d.paint.get("background-pattern");if(E.isPatternMissing(Ne))return;const Ue=!Ne&&P.a===1&&U===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==Ue)return;const qe=fn.disabled,it=E.depthModeForSublayer(0,Ue==="opaque"?Ti.ReadWrite:Ti.ReadOnly),Qe=E.colorModeForRenderPass(),et=E.useProgram(Ne?"backgroundPattern":"background"),pt=_||fe.coveringTiles({tileSize:Se,terrain:E.style.terrain});Ne&&(ee.activeTexture.set(ce.TEXTURE0),E.imageManager.bind(E.context));const yt=d.getCrossfadeParameters();for(const _t of pt){const at=_?_t.posMatrix:E.transform.calculatePosMatrix(_t.toUnwrapped()),At=Ne?Ad(at,U,E,Ne,{tileID:_t,tileSize:Se},yt):nx(at,U,P),Ct=E.style.terrain&&E.style.terrain.getTerrainData(_t);et.draw(ee,ce.TRIANGLES,it,qe,Qe,Jr.disabled,At,Ct,d.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}},debug:function(E,o,d){for(let _=0;_<d.length;_++)Gd(E,o,d[_])},custom:function(E,o,d){const _=E.context,P=d.implementation;if(E.renderPass==="offscreen"){const U=P.prerender;U&&(E.setCustomLayerDefaults(),_.setColorMode(E.colorModeForRenderPass()),U.call(P,_.gl,E.transform.customLayerMatrix()),_.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),_.setColorMode(E.colorModeForRenderPass()),_.setStencilMode(fn.disabled);const U=P.renderingMode==="3d"?new Ti(E.context.gl.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Ti.ReadOnly);_.setDepthMode(U),P.render(_.gl,E.transform.customLayerMatrix()),_.setDirty(),E.setBaseState(),_.bindFramebuffer.set(null)}}};class ym{constructor(o,d){this.context=new Ud(o),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ui,this.gpuTimers={}}resize(o,d,_){if(this.width=o*_,this.height=d*_,this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const P of this.style._order)this.style._layers[P].resize()}setup(){const o=this.context,d=new r.PosArray;d.emplaceBack(0,0),d.emplaceBack(r.EXTENT,0),d.emplaceBack(0,r.EXTENT),d.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(d,_i.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const _=new r.PosArray;_.emplaceBack(0,0),_.emplaceBack(r.EXTENT,0),_.emplaceBack(0,r.EXTENT),_.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=o.createVertexBuffer(_,_i.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const P=new r.RasterBoundsArray;P.emplaceBack(0,0,0,0),P.emplaceBack(r.EXTENT,0,r.EXTENT,0),P.emplaceBack(0,r.EXTENT,0,r.EXTENT),P.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(P,F.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const U=new r.PosArray;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(U,_i.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const ee=new r.LineStripIndexArray;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(ee);const ce=new r.TriangleIndexArray;ce.emplaceBack(0,1,2),ce.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(ce),this.emptyTexture=new T(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);const fe=this.context.gl;this.stencilClearMode=new fn({func:fe.ALWAYS,mask:0},0,255,fe.ZERO,fe.ZERO,fe.ZERO)}clearStencil(){const o=this.context,d=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=r.create();r.ortho(_,0,this.width,this.height,0,0,1),r.scale(_,_,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,d.TRIANGLES,Ti.disabled,this.stencilClearMode,bn.disabled,Jr.disabled,Pc(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,d){if(this.currentStencilSource===o.source||!o.isTileClipped()||!d||!d.length)return;this.currentStencilSource=o.source;const _=this.context,P=_.gl;this.nextStencilID+d.length>256&&this.clearStencil(),_.setColorMode(bn.disabled),_.setDepthMode(Ti.disabled);const U=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ee of d){const ce=this._tileClippingMaskIDs[ee.key]=this.nextStencilID++,fe=this.style.terrain&&this.style.terrain.getTerrainData(ee);U.draw(_,P.TRIANGLES,Ti.disabled,new fn({func:P.ALWAYS,mask:0},ce,255,P.KEEP,P.KEEP,P.REPLACE),bn.disabled,Jr.disabled,Pc(ee.posMatrix),fe,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new fn({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){const d=this.context.gl;return new fn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(o){const d=this.context.gl,_=o.sort((ee,ce)=>ce.overscaledZ-ee.overscaledZ),P=_[_.length-1].overscaledZ,U=_[0].overscaledZ-P+1;if(U>1){this.currentStencilSource=void 0,this.nextStencilID+U>256&&this.clearStencil();const ee={};for(let ce=0;ce<U;ce++)ee[ce+P]=new fn({func:d.GEQUAL,mask:255},ce+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=U,[ee,_]}return[{[P]:fn.disabled},_]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new bn([o.CONSTANT_COLOR,o.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?bn.unblended:bn.alphaBlended}depthModeForSublayer(o,d,_){if(!this.opaquePassEnabledForLayer())return Ti.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Ti(_||this.context.gl.LEQUAL,d,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,d){this.style=o,this.options=d,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const _=this.style._order,P=this.style.sourceCaches,U=this.style.terrain&&new nu(this);for(const Se in P){const Ne=P[Se];Ne.used&&Ne.prepare(this.context)}const ee={},ce={},fe={};for(const Se in P){const Ne=P[Se];ee[Se]=Ne.getVisibleCoordinates(),ce[Se]=ee[Se].slice().reverse(),fe[Se]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<_.length;Se++)if(this.style._layers[_[Se]].is3D()){this.opaquePassCutoff=Se;break}if(U){this.opaquePassCutoff=0;const Se=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Se.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Ne,Ue){const qe=Ne.context,it=qe.gl,Qe=bn.unblended,et=new Ti(it.LEQUAL,Ti.ReadWrite,[0,1]),pt=Ue.getTerrainMesh(),yt=Ue.sourceCache.getRenderableTiles(),_t=Ne.useProgram("terrainDepth");qe.bindFramebuffer.set(Ue.getFramebuffer("depth").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:r.Color.transparent,depth:1});for(const at of yt){const At=Ue.getTerrainData(at.tileID),Ct=Ne.transform.calculatePosMatrix(at.tileID.toUnwrapped());_t.draw(qe,it.TRIANGLES,et,fn.disabled,Qe,Jr.backCCW,{u_matrix:Ct},At,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain),function(Ne,Ue){const qe=Ne.context,it=qe.gl,Qe=bn.unblended,et=new Ti(it.LEQUAL,Ti.ReadWrite,[0,1]),pt=Ue.getTerrainMesh(),yt=Ue.getCoordsTexture(),_t=Ue.sourceCache.getRenderableTiles(),at=Ne.useProgram("terrainCoords");qe.bindFramebuffer.set(Ue.getFramebuffer("coords").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:r.Color.transparent,depth:1}),Ue.coordsIndex=[];for(const At of _t){const Ct=Ue.getTerrainData(At.tileID);qe.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,yt.texture);const Ot=Ne.transform.calculatePosMatrix(At.tileID.toUnwrapped());at.draw(qe,it.TRIANGLES,et,fn.disabled,Qe,Jr.backCCW,{u_matrix:Ot,u_terrain_coords_id:(255-Ue.coordsIndex.length)/255,u_texture:0},Ct,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Ue.coordsIndex.push(At.tileID.key)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Se of _){const Ne=this.style._layers[Se];if(!Ne.hasOffscreenPass()||Ne.isHidden(this.transform.zoom))continue;const Ue=ce[Ne.source];(Ne.type==="custom"||Ue.length)&&this.renderLayer(this,P[Ne.source],Ne,Ue)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!U)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[_[this.currentLayer]],Ne=P[Se.source],Ue=ee[Se.source];this._renderTileClippingMasks(Se,Ue),this.renderLayer(this,Ne,Se,Ue)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const Se=this.style._layers[_[this.currentLayer]],Ne=P[Se.source];if(U&&U.renderLayer(Se))continue;const Ue=(Se.type==="symbol"?fe:ce)[Se.source];this._renderTileClippingMasks(Se,ee[Se.source]),this.renderLayer(this,Ne,Se,Ue)}if(this.options.showTileBoundaries){let Se,Ne;Object.values(this.style._layers).forEach(Ue=>{Ue.source&&!Ue.isHidden(this.transform.zoom)&&(Ue.source!==(Ne&&Ne.id)&&(Ne=this.style.sourceCaches[Ue.source]),(!Se||Se.getSource().maxzoom<Ne.getSource().maxzoom)&&(Se=Ne))}),Se&&su.debug(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const Ne=Se.transform.padding;Bc(Se,Se.transform.height-(Ne.top||0),3,Ma),Bc(Se,Ne.bottom||0,3,fm),iu(Se,Ne.left||0,3,Vd),iu(Se,Se.transform.width-(Ne.right||0),3,mm);const Ue=Se.transform.centerPoint;(function(qe,it,Qe,et){ru(qe,it-1,Qe-10,2,20,et),ru(qe,it-10,Qe-1,20,2,et)})(Se,Ue.x,Se.transform.height-Ue.y,Fl)}(this),this.context.setDefault()}renderLayer(o,d,_,P){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(P||[]).length)&&(this.id=_.id,this.gpuTimingStart(_),su[_.type](o,d,_,P,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let _=this.gpuTimers[o.id];_||(_=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),_.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,_.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}queryGpuTimers(o){const d={};for(const _ in o){const P=o[_],U=this.context.extTimerQuery,ee=U.getQueryObjectEXT(P.query,U.QUERY_RESULT_EXT)/1e6;U.deleteQueryEXT(P.query),d[_]=ee}return d}translatePosMatrix(o,d,_,P,U){if(!_[0]&&!_[1])return o;const ee=U?P==="map"?this.transform.angle:0:P==="viewport"?-this.transform.angle:0;if(ee){const Se=Math.sin(ee),Ne=Math.cos(ee);_=[_[0]*Ne-_[1]*Se,_[0]*Se+_[1]*Ne]}const ce=[U?_[0]:ir(d,_[0],this.transform.zoom),U?_[1]:ir(d,_[1],this.transform.zoom),0],fe=new Float32Array(16);return r.translate(fe,o,ce),fe}saveTileTexture(o){const d=this._tileTextures[o.size[0]];d?d.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const d=this.imageManager.getPattern(o.from.toString()),_=this.imageManager.getPattern(o.to.toString());return!d||!_}useProgram(o,d){this.cache=this.cache||{};const _=o+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new ix(this.context,o,Mc[o],d,Md[o],this._showOverdrawInspector,this.style.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class au{constructor(o,d){this.points=o,this.planes=d}static fromInvProjectionMatrix(o,d,_){const P=Math.pow(2,_),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ce=>{const fe=1/(ce=r.transformMat4([],ce,o))[3]/d*P;return r.mul$1(ce,ce,[fe,fe,1/ce[3],fe])}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ce=>{const fe=r.sub([],U[ce[0]],U[ce[1]]),Se=r.sub([],U[ce[2]],U[ce[1]]),Ne=r.normalize([],r.cross([],fe,Se)),Ue=-r.dot(Ne,U[ce[1]]);return Ne.concat(Ue)});return new au(U,ee)}}class tl{constructor(o,d){this.min=o,this.max=d,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],_=r.clone$2(this.min),P=r.clone$2(this.max);for(let U=0;U<d.length;U++)_[U]=d[U]?this.min[U]:this.center[U],P[U]=d[U]?this.center[U]:this.max[U];return P[2]=this.max[2],new tl(_,P)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let P=0;P<o.planes.length;P++){const U=o.planes[P];let ee=0;for(let ce=0;ce<d.length;ce++)r.dot$1(U,d[ce])>=0&&ee++;if(ee===0)return 0;ee!==d.length&&(_=!1)}if(_)return 2;for(let P=0;P<3;P++){let U=Number.MAX_VALUE,ee=-Number.MAX_VALUE;for(let ce=0;ce<o.points.length;ce++){const fe=o.points[ce][P]-this.min[P];U=Math.min(U,fe),ee=Math.max(ee,fe)}if(ee<0||U>this.max[P]-this.min[P])return 0}return 1}}class Fc{constructor(o=0,d=0,_=0,P=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(_)||_<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=_,this.right=P}interpolate(o,d,_){return d.top!=null&&o.top!=null&&(this.top=r.number(o.top,d.top,_)),d.bottom!=null&&o.bottom!=null&&(this.bottom=r.number(o.bottom,d.bottom,_)),d.left!=null&&o.left!=null&&(this.left=r.number(o.left,d.left,_)),d.right!=null&&o.right!=null&&(this.right=r.number(o.right,d.right,_)),this}getCenter(o,d){const _=r.clamp((this.left+o-this.right)/2,0,o),P=r.clamp((this.top+d-this.bottom)/2,0,d);return new r.pointGeometry(_,P)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Fc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ou{constructor(o,d,_,P,U){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=U===void 0||!!U,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=P??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Fc,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new ou(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o._elevation=this._elevation,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const d=-r.wrap(o,-180,180)*Math.PI/180;var _;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(_=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(P,U,ee){var ce=U[0],fe=U[1],Se=U[2],Ne=U[3],Ue=Math.sin(ee),qe=Math.cos(ee);P[0]=ce*qe+Se*Ue,P[1]=fe*qe+Ne*Ue,P[2]=ce*-Ue+Se*qe,P[3]=fe*-Ue+Ne*qe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const d=r.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const d=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,_){this._unmodified=!1,this._edgeInsets.interpolate(o,d,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const d=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(o){const d=[new r.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const _=this.pointCoordinate(new r.pointGeometry(0,0)),P=this.pointCoordinate(new r.pointGeometry(this.width,0)),U=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),ee=this.pointCoordinate(new r.pointGeometry(0,this.height)),ce=Math.floor(Math.min(_.x,P.x,U.x,ee.x)),fe=Math.floor(Math.max(_.x,P.x,U.x,ee.x)),Se=1;for(let Ne=ce-Se;Ne<=fe+Se;Ne++)Ne!==0&&d.push(new r.UnwrappedTileID(Ne,o))}return d}coveringTiles(o){var d,_;let P=this.coveringZoomLevel(o);const U=P;if(o.minzoom!==void 0&&P<o.minzoom)return[];o.maxzoom!==void 0&&P>o.maxzoom&&(P=o.maxzoom);const ee=this.pointCoordinate(this.getCameraPoint()),ce=r.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,P),Se=[fe*ee.x,fe*ee.y,0],Ne=[fe*ce.x,fe*ce.y,0],Ue=au.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,P);let qe=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(qe=P);const it=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,Qe=at=>({aabb:new tl([at*fe,0,0],[(at+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),et=[],pt=[],yt=P,_t=o.reparseOverscaled?U:P;if(this._renderWorldCopies)for(let at=1;at<=3;at++)et.push(Qe(-at)),et.push(Qe(at));for(et.push(Qe(0));et.length>0;){const at=et.pop(),At=at.x,Ct=at.y;let Ot=at.fullyVisible;if(!Ot){const li=at.aabb.intersects(Ue);if(li===0)continue;Ot=li===2}const jt=o.terrain?Se:Ne,$t=at.aabb.distanceX(jt),zt=at.aabb.distanceY(jt),ai=Math.max(Math.abs($t),Math.abs(zt)),Xt=it+(1<<yt-at.zoom)-2;if(at.zoom===yt||ai>Xt&&at.zoom>=qe){const li=yt-at.zoom,Ki=Se[0]-.5-(At<<li),or=Se[1]-.5-(Ct<<li);pt.push({tileID:new r.OverscaledTileID(at.zoom===yt?_t:at.zoom,at.wrap,at.zoom,At,Ct),distanceSq:r.sqrLen([Ne[0]-.5-At,Ne[1]-.5-Ct]),tileDistanceToCamera:Math.sqrt(Ki*Ki+or*or)})}else for(let li=0;li<4;li++){const Ki=(At<<1)+li%2,or=(Ct<<1)+(li>>1),Ii=at.zoom+1;let jr=at.aabb.quadrant(li);if(o.terrain){const Br=new r.OverscaledTileID(Ii,at.wrap,Ii,Ki,or),xr=o.terrain.getMinMaxElevation(Br),br=(d=xr.minElevation)!==null&&d!==void 0?d:this.elevation,Tr=(_=xr.maxElevation)!==null&&_!==void 0?_:this.elevation;jr=new tl([jr.min[0],jr.min[1],br],[jr.max[0],jr.max[1],Tr])}et.push({aabb:jr,zoom:Ii,x:Ki,y:or,wrap:at.wrap,fullyVisible:Ot})}}return pt.sort((at,At)=>at.distanceSq-At.distanceSq).map(at=>at.tileID)}resize(o,d){this.width=o,this.height=d,this.pixelsToGLUnits=[2/o,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const d=r.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(o.lng)*this.worldSize,r.mercatorYfromLat(d)*this.worldSize)}unproject(o){return new r.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,d){const _=r.MercatorCoordinate.fromLngLat(o),P=(1<<this.tileZoom)*r.EXTENT,U=_.x*P,ee=_.y*P,ce=Math.floor(U/r.EXTENT),fe=Math.floor(ee/r.EXTENT),Se=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,ce,fe);return d.getElevation(Se,U%r.EXTENT,ee%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const d=this.pointLocation(this.centerPoint,o),_=this.getElevation(d,o);if(!(this.elevation-_))return;const P=this.getCameraPosition(),U=r.MercatorCoordinate.fromLngLat(P.lngLat,P.altitude),ee=r.MercatorCoordinate.fromLngLat(d,_),ce=U.x-ee.x,fe=U.y-ee.y,Se=U.z-ee.z,Ne=Math.sqrt(ce*ce+fe*fe+Se*Se),Ue=this.scaleZoom(this.cameraToCenterDistance/Ne/this.tileSize);this._elevation=_,this._center=d,this.zoom=Ue}setLocationAtPoint(o,d){const _=this.pointCoordinate(d),P=this.pointCoordinate(this.centerPoint),U=this.locationCoordinate(o),ee=new r.MercatorCoordinate(U.x-(_.x-P.x),U.y-(_.y-P.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,d){return d?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,d),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,d){return this.coordinateLocation(this.pointCoordinate(o,d))}locationCoordinate(o){return r.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,d){if(d){const qe=d.pointCoordinate(o);if(qe!=null)return qe}const _=[o.x,o.y,0,1],P=[o.x,o.y,1,1];r.transformMat4(_,_,this.pixelMatrixInverse),r.transformMat4(P,P,this.pixelMatrixInverse);const U=_[3],ee=P[3],ce=_[1]/U,fe=P[1]/ee,Se=_[2]/U,Ne=P[2]/ee,Ue=Se===Ne?0:(0-Se)/(Ne-Se);return new r.MercatorCoordinate(r.number(_[0]/U,P[0]/ee,Ue)/this.worldSize,r.number(ce,fe,Ue)/this.worldSize)}coordinatePoint(o,d=0,_=this.pixelMatrix){const P=[o.x*this.worldSize,o.y*this.worldSize,d,1];return r.transformMat4(P,P,_),new r.pointGeometry(P[0]/P[3],P[1]/P[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,o))).extend(this.pointLocation(new r.pointGeometry(this.width,o))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,d=!1){const _=o.key,P=d?this._alignedPosMatrixCache:this._posMatrixCache;if(P[_])return P[_];const U=o.canonical,ee=this.worldSize/this.zoomScale(U.z),ce=U.x+Math.pow(2,U.z)*o.wrap,fe=r.identity(new Float64Array(16));return r.translate(fe,fe,[ce*ee,U.y*ee,0]),r.scale(fe,fe,[ee/r.EXTENT,ee/r.EXTENT,1]),r.multiply(fe,d?this.alignedProjMatrix:this.projMatrix,fe),P[_]=new Float32Array(fe),P[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,d,_,P,U=-90,ee=90,ce=-180,fe=180;const Se=this.size,Ne=this._unmodified;if(this.latRange){const it=this.latRange;U=r.mercatorYfromLat(it[1])*this.worldSize,ee=r.mercatorYfromLat(it[0])*this.worldSize,o=ee-U<Se.y?Se.y/(ee-U):0}if(this.lngRange){const it=this.lngRange;ce=r.wrap(r.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),fe=r.wrap(r.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),fe<ce&&(fe+=this.worldSize),d=fe-ce<Se.x?Se.x/(fe-ce):0}const Ue=this.point,qe=Math.max(d||0,o||0);if(qe)return this.center=this.unproject(new r.pointGeometry(d?(fe+ce)/2:Ue.x,o?(ee+U)/2:Ue.y)),this.zoom+=this.scaleZoom(qe),this._unmodified=Ne,void(this._constraining=!1);if(this.latRange){const it=Ue.y,Qe=Se.y/2;it-Qe<U&&(P=U+Qe),it+Qe>ee&&(P=ee-Qe)}if(this.lngRange){const it=(ce+fe)/2,Qe=r.wrap(Ue.x,it-this.worldSize/2,it+this.worldSize/2),et=Se.x/2;Qe-et<ce&&(_=ce+et),Qe+et>fe&&(_=fe-et)}_===void 0&&P===void 0||(this.center=this.unproject(new r.pointGeometry(_!==void 0?_:Ue.x,P!==void 0?P:Ue.y)).wrap()),this._unmodified=Ne,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,d=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let P=r.identity(new Float64Array(16));r.scale(P,P,[this.width/2,-this.height/2,1]),r.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=r.identity(new Float64Array(16)),r.scale(P,P,[1,-1,1]),r.translate(P,P,[-1,-1,0]),r.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const U=Math.PI/2+this._pitch,ee=this._fov*(.5+o.y/this.height),ce=Math.sin(ee)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-U-ee,.01,Math.PI-.01)),fe=this.getHorizon(),Se=2*Math.atan(fe/this.cameraToCenterDistance)*(.5+o.y/(2*fe)),Ne=Math.sin(Se)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-U-Se,.01,Math.PI-.01)),Ue=Math.cos(Math.PI/2-this._pitch)*ce+this.cameraToSeaLevelDistance,qe=Math.cos(Math.PI/2-this._pitch)*Ne+this.cameraToSeaLevelDistance,it=1.01*Math.min(Ue,qe),Qe=this.height/50;P=new Float64Array(16),r.perspective(P,this._fov,this.width/this.height,Qe,it),P[8]=2*-o.x/this.width,P[9]=2*o.y/this.height,r.scale(P,P,[1,-1,1]),r.translate(P,P,[0,0,-this.cameraToCenterDistance]),r.rotateX(P,P,this._pitch),r.rotateZ(P,P,this.angle),r.translate(P,P,[-d,-_,0]),this.mercatorMatrix=r.scale([],P,[this.worldSize,this.worldSize,this.worldSize]),r.scale(P,P,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,P),r.translate(P,P,[0,0,-this.elevation]),this.projMatrix=P,this.invProjMatrix=r.invert([],P),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,P);const et=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),_t=Math.sin(this.angle),at=d-Math.round(d)+yt*et+_t*pt,At=_-Math.round(_)+yt*pt+_t*et,Ct=new Float64Array(P);if(r.translate(Ct,Ct,[at>.5?at-1:at,At>.5?At-1:At,0]),this.alignedProjMatrix=Ct,P=r.invert(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");this.pixelMatrixInverse=P,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new r.pointGeometry(0,0)),d=[o.x*this.worldSize,o.y*this.worldSize,0,1];return r.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,o))}getCameraQueryGeometry(o){const d=this.getCameraPoint();if(o.length===1)return[o[0],d];{let _=d.x,P=d.y,U=d.x,ee=d.y;for(const ce of o)_=Math.min(_,ce.x),P=Math.min(P,ce.y),U=Math.max(U,ce.x),ee=Math.max(ee,ce.y);return[new r.pointGeometry(_,P),new r.pointGeometry(U,P),new r.pointGeometry(U,ee),new r.pointGeometry(_,ee),new r.pointGeometry(_,P)]}}}class xm{constructor(o){this._hashName=o&&encodeURIComponent(o),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,_){let P=!1,U=null;const ee=()=>{U=null,P&&(d(),U=setTimeout(ee,300),P=!1)};return()=>(P=!0,U||ee(),U)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const d=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,P=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),U=Math.pow(10,P),ee=Math.round(d.lng*U)/U,ce=Math.round(d.lat*U)/U,fe=this._map.getBearing(),Se=this._map.getPitch();let Ne="";if(Ne+=o?`/${ee}/${ce}/${_}`:`${_}/${ce}/${ee}`,(fe||Se)&&(Ne+="/"+Math.round(10*fe)/10),Se&&(Ne+=`/${Math.round(Se)}`),this._hashName){const Ue=this._hashName;let qe=!1;const it=window.location.hash.slice(1).split("&").map(Qe=>{const et=Qe.split("=")[0];return et===Ue?(qe=!0,`${et}=${Ne}`):Qe}).filter(Qe=>Qe);return qe||it.push(`${Ue}=${Ne}`),`#${it.join("&")}`}return`#${Ne}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(d=_)}),(d&&d[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:d,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const Uc={linearity:.3,easing:r.bezier(0,0,.3,1)},vm=r.extend({deceleration:2500,maxSpeed:1400},Uc),bm=r.extend({deceleration:20,maxSpeed:1400},Uc),Ul=r.extend({deceleration:1e3,maxSpeed:360},Uc),_m=r.extend({deceleration:1e3,maxSpeed:90},Uc);class wm{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=r.exported.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:U}of this._inertiaBuffer)d.zoom+=U.zoomDelta||0,d.bearing+=U.bearingDelta||0,d.pitch+=U.pitchDelta||0,U.panDelta&&d.pan._add(U.panDelta),U.around&&(d.around=U.around),U.pinchAround&&(d.pinchAround=U.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(d.pan.mag()){const U=Vc(d.pan.mag(),_,r.extend({},vm,o||{}));P.offset=d.pan.mult(U.amount/d.pan.mag()),P.center=this._map.transform.center,$c(P,U)}if(d.zoom){const U=Vc(d.zoom,_,bm);P.zoom=this._map.transform.zoom+U.amount,$c(P,U)}if(d.bearing){const U=Vc(d.bearing,_,Ul);P.bearing=this._map.transform.bearing+r.clamp(U.amount,-179,179),$c(P,U)}if(d.pitch){const U=Vc(d.pitch,_,_m);P.pitch=this._map.transform.pitch+U.amount,$c(P,U)}if(P.zoom||P.bearing){const U=d.pinchAround===void 0?d.around:d.pinchAround;P.around=U?this._map.unproject(U):this._map.getCenter()}return this.clear(),r.extend(P,{noMoveStart:!0})}}function $c(E,o){(!E.duration||E.duration<o.duration)&&(E.duration=o.duration,E.easing=o.easing)}function Vc(E,o,d){const{maxSpeed:_,linearity:P,deceleration:U}=d,ee=r.clamp(E*P/(o/1e3),-_,_),ce=Math.abs(ee)/(U*P);return{easing:d.easing,duration:1e3*ce,amount:ee*(ce/2)}}class Js extends r.Event{constructor(o,d,_,P={}){const U=y.mousePos(d.getCanvasContainer(),_),ee=d.unproject(U);super(o,r.extend({point:U,lngLat:ee,originalEvent:_},P)),this._defaultPrevented=!1,this.target=d}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gs extends r.Event{constructor(o,d,_){const P=o==="touchend"?_.changedTouches:_.touches,U=y.touchPos(d.getCanvasContainer(),P),ee=U.map(fe=>d.unproject(fe)),ce=U.reduce((fe,Se,Ne,Ue)=>fe.add(Se.div(Ue.length)),new r.pointGeometry(0,0));super(o,{points:U,point:ce,lngLats:ee,lngLat:d.unproject(ce),originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fx extends r.Event{constructor(o,d,_){super(o,{originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Co{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new fx(o.type,this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new Js(o.type,this._map,o))}mouseup(o){this._map.fire(new Js(o.type,this._map,o))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Js(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Js(o.type,this._map,o))}mouseover(o){this._map.fire(new Js(o.type,this._map,o))}mouseout(o){this._map.fire(new Js(o.type,this._map,o))}touchstart(o){return this._firePreventable(new gs(o.type,this._map,o))}touchmove(o){this._map.fire(new gs(o.type,this._map,o))}touchend(o){this._map.fire(new gs(o.type,this._map,o))}touchcancel(o){this._map.fire(new gs(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tm{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Js(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Js("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Js(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class il{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(y.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const _=d;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const P=this._startPos;this._lastPos=_,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const U=Math.min(P.x,_.x),ee=Math.max(P.x,_.x),ce=Math.min(P.y,_.y),fe=Math.max(P.y,_.y);y.setTransform(this._box,`translate(${U}px,${ce}px)`),this._box.style.width=ee-U+"px",this._box.style.height=fe-ce+"px"}mouseupWindow(o,d){if(!this._active||o.button!==0)return;const _=this._startPos,P=d;if(this.reset(),y.suppressClick(),_.x!==P.x||_.y!==P.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:U=>U.fitScreenCoordinates(_,P,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new r.Event(o,{originalEvent:d}))}}function rl(E,o){if(E.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${o.length}`);const d={};for(let _=0;_<E.length;_++)d[E[_].identifier]=o[_];return d}class mx{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,d,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),_.length===this.numTouches&&(this.centroid=function(P){const U=new r.pointGeometry(0,0);for(const ee of P)U._add(ee);return U.div(P.length)}(d),this.touches=rl(_,d)))}touchmove(o,d,_){if(this.aborted||!this.centroid)return;const P=rl(_,d);for(const U in this.touches){const ee=this.touches[U],ce=P[U];(!ce||ce.dist(ee)>30)&&(this.aborted=!0)}}touchend(o,d,_){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class Wd{constructor(o){this.singleTap=new mx(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,d,_){this.singleTap.touchstart(o,d,_)}touchmove(o,d,_){this.singleTap.touchmove(o,d,_)}touchend(o,d,_){const P=this.singleTap.touchend(o,d,_);if(P){const U=o.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(P)<30;if(U&&ee||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class gx{constructor(){this._zoomIn=new Wd({numTouches:1,numTaps:2}),this._zoomOut=new Wd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,_){this._zoomIn.touchstart(o,d,_),this._zoomOut.touchstart(o,d,_)}touchmove(o,d,_){this._zoomIn.touchmove(o,d,_),this._zoomOut.touchmove(o,d,_)}touchend(o,d,_){const P=this._zoomIn.touchend(o,d,_),U=this._zoomOut.touchend(o,d,_);return P?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(P)},{originalEvent:o})}):U?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(U)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Cm={0:1,2:2};class nl{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(o,d){return!1}_move(o,d){return{}}mousedown(o,d){if(this._lastPoint)return;const _=y.mouseButton(o);this._correctButton(o,_)&&(this._lastPoint=d,this._eventButton=_)}mousemoveWindow(o,d){const _=this._lastPoint;if(_){if(o.preventDefault(),function(P,U){const ee=Cm[U];return P.buttons===void 0||(P.buttons&ee)!==ee}(o,this._eventButton))this.reset();else if(this._moved||!(d.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(_,d)}}mouseupWindow(o){this._lastPoint&&y.mouseButton(o)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eo extends nl{mousedown(o,d){super.mousedown(o,d),this._lastPoint&&(this._active=!0)}_correctButton(o,d){return d===0&&!o.ctrlKey}_move(o,d){return{around:d,panDelta:d.sub(o)}}}class fi extends nl{_correctButton(o,d){return d===0&&o.ctrlKey||d===2}_move(o,d){const _=.8*(d.x-o.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(o){o.preventDefault()}}class qd extends nl{_correctButton(o,d){return d===0&&o.ctrlKey||d===2}_move(o,d){const _=-.5*(d.y-o.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(o){o.preventDefault()}}class Gc{constructor(o,d){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,d,_){return this._calculateTransform(o,d,_)}touchmove(o,d,_){if(this._map._cooperativeGestures&&(this._minTouches===2&&_.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,_.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(_.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,d,_)}touchend(o,d,_){this._calculateTransform(o,d,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,_){_.length>0&&(this._active=!0);const P=rl(_,d),U=new r.pointGeometry(0,0),ee=new r.pointGeometry(0,0);let ce=0;for(const Se in P){const Ne=P[Se],Ue=this._touches[Se];Ue&&(U._add(Ne),ee._add(Ne.sub(Ue)),ce++,P[Se]=Ne)}if(this._touches=P,ce<this._minTouches||!ee.mag())return;const fe=ee.div(ce);return this._sum._add(fe),this._sum.mag()<this._clickTolerance?void 0:{around:U.div(ce),panDelta:fe}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,d,_){return{}}touchstart(o,d,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,_){if(!this._firstTwoTouches)return;o.preventDefault();const[P,U]=this._firstTwoTouches,ee=Hc(_,d,P),ce=Hc(_,d,U);if(!ee||!ce)return;const fe=this._aroundCenter?null:ee.add(ce).div(2);return this._move([ee,ce],fe,o)}touchend(o,d,_){if(!this._firstTwoTouches)return;const[P,U]=this._firstTwoTouches,ee=Hc(_,d,P),ce=Hc(_,d,U);ee&&ce||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hc(E,o,d){for(let _=0;_<E.length;_++)if(E[_].identifier===d)return o[_]}function ti(E,o){return Math.log(E/o)/Math.LN2}class Yd extends sl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const _=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ti(this._distance,_),pinchAround:d}}}function Em(E,o){return 180*E.angleWith(o)/Math.PI}class yx extends sl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d){const _=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Em(this._vector,_),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,_=Em(o,this._startVector);return Math.abs(_)<d}}function Wc(E){return Math.abs(E.y)>Math.abs(E.x)}class Sm extends sl{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,d,_){super.touchstart(o,d,_),this._currentTouchCount=_.length}_start(o){this._lastPoints=o,Wc(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,_){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const P=o[0].sub(this._lastPoints[0]),U=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(P,U,_.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(P.y+U.y)/2*-.5}):void 0}gestureBeginsVertically(o,d,_){if(this._valid!==void 0)return this._valid;const P=o.mag()>=2,U=d.mag()>=2;if(!P&&!U)return;if(!P||!U)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const ee=o.y>0==d.y>0;return Wc(o)&&Wc(d)&&ee}}const km={panStep:100,bearingStep:15,pitchStep:10};class xx{constructor(){const o=km;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,_=0,P=0,U=0,ee=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?_=-1:(o.preventDefault(),U=-1);break;case 39:o.shiftKey?_=1:(o.preventDefault(),U=1);break;case 38:o.shiftKey?P=1:(o.preventDefault(),ee=-1);break;case 40:o.shiftKey?P=-1:(o.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(_=0,P=0),{cameraAnimation:ce=>{const fe=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:vx,zoom:d?Math.round(fe)+d*(o.shiftKey?2:1):fe,bearing:ce.getBearing()+_*this._bearingStep,pitch:ce.getPitch()+P*this._pitchStep,offset:[-U*this._panStep,-ee*this._panStep],center:ce.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function vx(E){return E*(2-E)}const lu=4.000244140625;class Zd{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;o.preventDefault()}let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const _=r.exported.now(),P=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,d!==0&&d%lu==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(P*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=y.mousePos(this._el,o);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;if(this._delta!==0){const ce=this._type==="wheel"&&Math.abs(this._delta)>lu?this._wheelZoomRate:this._defaultZoomRate;let fe=2/(1+Math.exp(-Math.abs(this._delta*ce)));this._delta<0&&fe!==0&&(fe=1/fe);const Se=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(Se*fe))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,_=this._startZoom,P=this._easing;let U,ee=!1;if(this._type==="wheel"&&_&&P){const ce=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),fe=P(ce);U=r.number(_,d,fe),ce<1?this._frameId||(this._frameId=!0):ee=!0}else U=d,ee=!0;return this._active=!0,ee&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ee,zoomDelta:U-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=r.ease;if(this._prevEase){const _=this._prevEase,P=(r.exported.now()-_.start)/_.duration,U=_.easing(P+.01)-_.easing(P),ee=.27/Math.sqrt(U*U+1e-4)*.01,ce=Math.sqrt(.0729-ee*ee);d=r.bezier(ee,ce,.25,1)}return this._prevEase={start:r.exported.now(),duration:o,easing:d},d}reset(){this._active=!1}}class Xd{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Kd{constructor(){this.reset()}reset(){this._active=!1}dblclick(o,d){return o.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(o.shiftKey?-1:1),around:_.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Us{constructor(){this._tap=new Wd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,d,_){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=d[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(o,d,_))}touchmove(o,d,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const P=d[0],U=P.y-this._swipePoint.y;return this._swipePoint=P,o.preventDefault(),this._active=!0,{zoomDelta:U/128}}}else this._tap.touchmove(o,d,_)}touchend(o,d,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(o,d,_)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class So{constructor(o,d,_){this._el=o,this._mousePan=d,this._touchPan=_}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Am{constructor(o,d,_){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=d,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qd{constructor(o,d,_,P){this._el=o,this._touchZoom=d,this._touchRotate=_,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const $l=E=>E.zoom||E.drag||E.pitch||E.rotate;class Jd extends r.Event{}function cu(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class va{constructor(o,d){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wm(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),r.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[P,U,ee]of this._listeners)y.addEventListener(P,U,P===document?this.handleWindowEvent:this.handleEvent,ee)}destroy(){for(const[o,d,_]of this._listeners)y.removeEventListener(o,d,o===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(o){const d=this._map,_=d.getCanvasContainer();this._add("mapEvent",new Co(d,o));const P=d.boxZoom=new il(d,o);this._add("boxZoom",P);const U=new gx,ee=new Kd;d.doubleClickZoom=new Xd(ee,U),this._add("tapZoom",U),this._add("clickZoom",ee);const ce=new Us;this._add("tapDragZoom",ce);const fe=d.touchPitch=new Sm(d);this._add("touchPitch",fe);const Se=new fi(o),Ne=new qd(o);d.dragRotate=new Am(o,Se,Ne),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",Ne,["mouseRotate"]);const Ue=new Eo(o),qe=new Gc(o,d);d.dragPan=new So(_,Ue,qe),this._add("mousePan",Ue),this._add("touchPan",qe,["touchZoom","touchRotate"]);const it=new yx,Qe=new Yd;d.touchZoomRotate=new Qd(_,Qe,it,ce),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]);const et=d.scrollZoom=new Zd(d,this);this._add("scrollZoom",et,["mousePan"]);const pt=d.keyboard=new xx;this._add("keyboard",pt),this._add("blockableMapEvent",new Tm(d));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[yt]&&d[yt].enable(o[yt])}_add(o,d,_){this._handlers.push({handlerName:o,handler:d,allowed:_}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$l(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,d,_){for(const P in o)if(P!==_&&(!d||d.indexOf(P)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const d=[];for(const _ of o)this._el.contains(_.target)&&d.push(_);return d}handleEvent(o,d){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const _=o.type==="renderFrame"?void 0:o,P={needsRenderFrame:!1},U={},ee={},ce=o.touches,fe=ce?this._getMapTouches(ce):void 0,Se=fe?y.touchPos(this._el,fe):y.mousePos(this._el,o);for(const{handlerName:qe,handler:it,allowed:Qe}of this._handlers){if(!it.isEnabled())continue;let et;this._blockedByActive(ee,Qe,qe)?it.reset():it[d||o.type]&&(et=it[d||o.type](o,Se,fe),this.mergeHandlerResult(P,U,et,qe,_),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||it.isActive())&&(ee[qe]=it)}const Ne={};for(const qe in this._previousActiveHandlers)ee[qe]||(Ne[qe]=_);this._previousActiveHandlers=ee,(Object.keys(Ne).length||cu(P))&&(this._changes.push([P,U,Ne]),this._triggerRenderFrame()),(Object.keys(ee).length||cu(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ue}=P;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))}mergeHandlerResult(o,d,_,P,U){if(!_)return;r.extend(o,_);const ee={handlerName:P,originalEvent:_.originalEvent||U};_.zoomDelta!==void 0&&(d.zoom=ee),_.panDelta!==void 0&&(d.drag=ee),_.pitchDelta!==void 0&&(d.pitch=ee),_.bearingDelta!==void 0&&(d.rotate=ee)}_applyChanges(){const o={},d={},_={};for(const[P,U,ee]of this._changes)P.panDelta&&(o.panDelta=(o.panDelta||new r.pointGeometry(0,0))._add(P.panDelta)),P.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(o.around=P.around),P.pinchAround!==void 0&&(o.pinchAround=P.pinchAround),P.noInertia&&(o.noInertia=P.noInertia),r.extend(d,U),r.extend(_,ee);this._updateMapTransform(o,d,_),this._changes=[]}_updateMapTransform(o,d,_){const P=this._map,U=P.transform,ee=P.style&&P.style.terrain;if(!(cu(o)||ee&&this._drag))return this._fireEvents(d,_,!0);let{panDelta:ce,zoomDelta:fe,bearingDelta:Se,pitchDelta:Ne,around:Ue,pinchAround:qe}=o;qe!==void 0&&(Ue=qe),P._stop(!0),Ue=Ue||P.transform.centerPoint;const it=U.pointLocation(ce?Ue.sub(ce):Ue);Se&&(U.bearing+=Se),Ne&&(U.pitch+=Ne),fe&&(U.zoom+=fe),ee?d.drag&&!this._drag?(this._drag={center:U.centerPoint,lngLat:U.pointLocation(Ue),point:Ue,handlerName:d.drag.handlerName},P.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&_[this._drag.handlerName]?(P.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):d.drag&&this._drag&&(U.center=U.pointLocation(U.centerPoint.sub(ce))):U.setLocationAtPoint(it,Ue),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,_,!0)}_fireEvents(o,d,_){const P=$l(this._eventsInProgress),U=$l(o),ee={};for(const Ne in o){const{originalEvent:Ue}=o[Ne];this._eventsInProgress[Ne]||(ee[`${Ne}start`]=Ue),this._eventsInProgress[Ne]=o[Ne]}!P&&U&&this._fireEvent("movestart",U.originalEvent);for(const Ne in ee)this._fireEvent(Ne,ee[Ne]);U&&this._fireEvent("move",U.originalEvent);for(const Ne in o){const{originalEvent:Ue}=o[Ne];this._fireEvent(Ne,Ue)}const ce={};let fe;for(const Ne in this._eventsInProgress){const{handlerName:Ue,originalEvent:qe}=this._eventsInProgress[Ne];this._handlersById[Ue].isActive()||(delete this._eventsInProgress[Ne],fe=d[Ue]||qe,ce[`${Ne}end`]=fe)}for(const Ne in ce)this._fireEvent(Ne,ce[Ne]);const Se=$l(this._eventsInProgress);if(_&&(P||U)&&!Se){this._updatingCamera=!0;const Ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ue=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;Ne?(Ue(Ne.bearing||this._map.getBearing())&&(Ne.bearing=0),this._map.easeTo(Ne,{originalEvent:fe})):(this._map.fire(new r.Event("moveend",{originalEvent:fe})),Ue(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new r.Event(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new Jd("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const on={extend:(E,...o)=>r.extend(E,...o),run(E){E()},logToElement(E,o=!1,d="log"){const _=window.document.getElementById(d);_&&(o&&(_.innerHTML=""),_.innerHTML+=`<br>${E}`)}};class hu extends r.Evented{constructor(o,d){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=d.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}panBy(o,d,_){return o=r.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,r.extend({offset:o},d),_)}panTo(o,d,_){return this.easeTo(r.extend({center:o},d),_)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,_){return this.easeTo(r.extend({zoom:o},d),_)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,_){return this.easeTo(r.extend({bearing:o},d),_)}resetNorth(o,d){return this.rotateTo(0,r.extend({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}cameraForBounds(o,d){o=r.LngLatBounds.convert(o);const _=d&&d.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),_,d)}_cameraForBoxAndBearing(o,d,_,P){const U={top:0,bottom:0,right:0,left:0};if(typeof(P=r.extend({padding:U,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding=="number"){const Ct=P.padding;P.padding={top:Ct,bottom:Ct,right:Ct,left:Ct}}P.padding=r.extend(U,P.padding);const ee=this.transform,ce=ee.padding,fe=ee.project(r.LngLat.convert(o)),Se=ee.project(r.LngLat.convert(d)),Ne=fe.rotate(-_*Math.PI/180),Ue=Se.rotate(-_*Math.PI/180),qe=new r.pointGeometry(Math.max(Ne.x,Ue.x),Math.max(Ne.y,Ue.y)),it=new r.pointGeometry(Math.min(Ne.x,Ue.x),Math.min(Ne.y,Ue.y)),Qe=qe.sub(it),et=(ee.width-(ce.left+ce.right+P.padding.left+P.padding.right))/Qe.x,pt=(ee.height-(ce.top+ce.bottom+P.padding.top+P.padding.bottom))/Qe.y;if(pt<0||et<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(ee.scaleZoom(ee.scale*Math.min(et,pt)),P.maxZoom),_t=r.pointGeometry.convert(P.offset),at=new r.pointGeometry((P.padding.left-P.padding.right)/2,(P.padding.top-P.padding.bottom)/2).rotate(_*Math.PI/180),At=_t.add(at).mult(ee.scale/ee.zoomScale(yt));return{center:ee.unproject(fe.add(Se).div(2).sub(At)),zoom:yt,bearing:_}}fitBounds(o,d,_){return this._fitInternal(this.cameraForBounds(o,d),d,_)}fitScreenCoordinates(o,d,_,P,U){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(o)),this.transform.pointLocation(r.pointGeometry.convert(d)),_,P),P,U)}_fitInternal(o,d,_){return o?(delete(d=r.extend(o,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this}jumpTo(o,d){this.stop();const _=this.transform;let P=!1,U=!1,ee=!1;return"zoom"in o&&_.zoom!==+o.zoom&&(P=!0,_.zoom=+o.zoom),o.center!==void 0&&(_.center=r.LngLat.convert(o.center)),"bearing"in o&&_.bearing!==+o.bearing&&(U=!0,_.bearing=+o.bearing),"pitch"in o&&_.pitch!==+o.pitch&&(ee=!0,_.pitch=+o.pitch),o.padding==null||_.isPaddingEqual(o.padding)||(_.padding=o.padding),this.fire(new r.Event("movestart",d)).fire(new r.Event("move",d)),P&&this.fire(new r.Event("zoomstart",d)).fire(new r.Event("zoom",d)).fire(new r.Event("zoomend",d)),U&&this.fire(new r.Event("rotatestart",d)).fire(new r.Event("rotate",d)).fire(new r.Event("rotateend",d)),ee&&this.fire(new r.Event("pitchstart",d)).fire(new r.Event("pitch",d)).fire(new r.Event("pitchend",d)),this.fire(new r.Event("moveend",d))}calculateCameraOptionsFromTo(o,d,_,P=0){const U=r.MercatorCoordinate.fromLngLat(o,d),ee=r.MercatorCoordinate.fromLngLat(_,P),ce=ee.x-U.x,fe=ee.y-U.y,Se=ee.z-U.z,Ne=Math.hypot(ce,fe,Se);if(Ne===0)throw new Error("Can't calculate camera options with same From and To");const Ue=Math.hypot(ce,fe),qe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ne/this.transform.tileSize),it=180*Math.atan2(ce,-fe)/Math.PI;let Qe=180*Math.acos(Ue/Ne)/Math.PI;return Qe=Se<0?90-Qe:90+Qe,{center:ee.toLngLat(),zoom:qe,pitch:Qe,bearing:it}}easeTo(o,d){this._stop(!1,o.easeId),((o=r.extend({offset:[0,0],duration:500,easing:r.ease},o)).animate===!1||!o.essential&&r.exported.prefersReducedMotion)&&(o.duration=0);const _=this.transform,P=this.getZoom(),U=this.getBearing(),ee=this.getPitch(),ce=this.getPadding(),fe="zoom"in o?+o.zoom:P,Se="bearing"in o?this._normalizeBearing(o.bearing,U):U,Ne="pitch"in o?+o.pitch:ee,Ue="padding"in o?o.padding:_.padding,qe=r.pointGeometry.convert(o.offset);let it=_.centerPoint.add(qe);const Qe=_.pointLocation(it),et=r.LngLat.convert(o.center||Qe);this._normalizeCenter(et);const pt=_.project(Qe),yt=_.project(et).sub(pt),_t=_.zoomScale(fe-P);let at,At;o.around&&(at=r.LngLat.convert(o.around),At=_.locationPoint(at));const Ct={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||fe!==P,this._rotating=this._rotating||U!==Se,this._pitching=this._pitching||Ne!==ee,this._padding=!_.isPaddingEqual(Ue),this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,Ct),this._ease(Ot=>{if(this._zooming&&(_.zoom=r.number(P,fe,Ot)),this._rotating&&(_.bearing=r.number(U,Se,Ot)),this._pitching&&(_.pitch=r.number(ee,Ne,Ot)),this._padding&&(_.interpolatePadding(ce,Ue,Ot),it=_.centerPoint.add(qe)),at)_.setLocationAtPoint(at,At);else{const jt=_.zoomScale(_.zoom-P),$t=fe>P?Math.min(2,_t):Math.max(.5,_t),zt=Math.pow($t,1-Ot),ai=_.unproject(pt.add(yt.mult(Ot*zt)).mult(jt));_.setLocationAtPoint(_.renderWorldCopies?ai.wrap():ai,it)}this._fireMoveEvents(d)},Ot=>{this._afterEase(d,Ot)},o),this}_prepareEase(o,d,_={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),d||_.moving||this.fire(new r.Event("movestart",o)),this._zooming&&!_.zooming&&this.fire(new r.Event("zoomstart",o)),this._rotating&&!_.rotating&&this.fire(new r.Event("rotatestart",o)),this._pitching&&!_.pitching&&this.fire(new r.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new r.Event("move",o)),this._zooming&&this.fire(new r.Event("zoom",o)),this._rotating&&this.fire(new r.Event("rotate",o)),this._pitching&&this.fire(new r.Event("pitch",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const _=this._zooming,P=this._rotating,U=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new r.Event("zoomend",o)),P&&this.fire(new r.Event("rotateend",o)),U&&this.fire(new r.Event("pitchend",o)),this.fire(new r.Event("moveend",o))}flyTo(o,d){if(!o.essential&&r.exported.prefersReducedMotion){const Ii=r.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ii,d)}this.stop(),o=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},o);const _=this.transform,P=this.getZoom(),U=this.getBearing(),ee=this.getPitch(),ce=this.getPadding(),fe="zoom"in o?r.clamp(+o.zoom,_.minZoom,_.maxZoom):P,Se="bearing"in o?this._normalizeBearing(o.bearing,U):U,Ne="pitch"in o?+o.pitch:ee,Ue="padding"in o?o.padding:_.padding,qe=_.zoomScale(fe-P),it=r.pointGeometry.convert(o.offset);let Qe=_.centerPoint.add(it);const et=_.pointLocation(Qe),pt=r.LngLat.convert(o.center||et);this._normalizeCenter(pt);const yt=_.project(et),_t=_.project(pt).sub(yt);let at=o.curve;const At=Math.max(_.width,_.height),Ct=At/qe,Ot=_t.mag();if("minZoom"in o){const Ii=r.clamp(Math.min(o.minZoom,P,fe),_.minZoom,_.maxZoom),jr=At/_.zoomScale(Ii-P);at=Math.sqrt(jr/Ot*2)}const jt=at*at;function $t(Ii){const jr=(Ct*Ct-At*At+(Ii?-1:1)*jt*jt*Ot*Ot)/(2*(Ii?Ct:At)*jt*Ot);return Math.log(Math.sqrt(jr*jr+1)-jr)}function zt(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function ai(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}const Xt=$t(0);let li=function(Ii){return ai(Xt)/ai(Xt+at*Ii)},Ki=function(Ii){return At*((ai(Xt)*(zt(jr=Xt+at*Ii)/ai(jr))-zt(Xt))/jt)/Ot;var jr},or=($t(1)-Xt)/at;if(Math.abs(Ot)<1e-6||!isFinite(or)){if(Math.abs(At-Ct)<1e-6)return this.easeTo(o,d);const Ii=Ct<At?-1:1;or=Math.abs(Math.log(Ct/At))/at,Ki=function(){return 0},li=function(jr){return Math.exp(Ii*at*jr)}}return o.duration="duration"in o?+o.duration:1e3*or/("screenSpeed"in o?+o.screenSpeed/at:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=U!==Se,this._pitching=Ne!==ee,this._padding=!_.isPaddingEqual(Ue),this._prepareEase(d,!1),this._ease(Ii=>{const jr=Ii*or,Br=1/li(jr);_.zoom=Ii===1?fe:P+_.scaleZoom(Br),this._rotating&&(_.bearing=r.number(U,Se,Ii)),this._pitching&&(_.pitch=r.number(ee,Ne,Ii)),this._padding&&(_.interpolatePadding(ce,Ue,Ii),Qe=_.centerPoint.add(it));const xr=Ii===1?pt:_.unproject(yt.add(_t.mult(Ki(jr))).mult(Br));_.setLocationAtPoint(_.renderWorldCopies?xr.wrap():xr,Qe),this._fireMoveEvents(d)},()=>this._afterEase(d),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,d)}if(!o){const _=this.handlers;_&&_.stop(!1)}return this}_ease(o,d,_){_.animate===!1||_.duration===0?(o(1),d()):(this._easeStart=r.exported.now(),this._easeOptions=_,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,d){o=r.wrap(o,-180,180);const _=Math.abs(o-d);return Math.abs(o-360-d)<_&&(o-=360),Math.abs(o+360-d)<_&&(o+=360),o}_normalizeCenter(o){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const _=o.lng-d.center.lng;o.lng+=_>180?-360:_<-180?360:0}}class uu{constructor(o={}){this.options=o,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,d){const _=this._map._getUIString(`AttributionControl.${d}`);o.title=_,o.setAttribute("aria-label",_)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(P=>typeof P!="string"?"":P)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const d=this._map.style.sourceCaches;for(const P in d){const U=d[P];if(U.used||U.usedForTerrain){const ee=U.getSource();ee.attribution&&o.indexOf(ee.attribution)<0&&o.push(ee.attribution)}}o=o.filter(P=>String(P).trim()),o.sort((P,U)=>P.length-U.length),o=o.filter((P,U)=>{for(let ee=U+1;ee<o.length;ee++)if(o[ee].indexOf(P)>=0)return!1;return!0});const _=o.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,o.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ep{constructor(o={}){this.options=o,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const d=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact","mapboxgl-compact"):d.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Mm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,_=d?this._queue.concat(d):this._queue;for(const P of _)if(P.id===o)return void(P.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const _ of d)if(!_.cancelled&&(_.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Pm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},bx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Wa={showCompass:!0,showZoom:!0,visualizePitch:!1};class du{constructor(o,d,_=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new fi({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,_&&(this.mousePitch=new qd({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(d,"mousedown",this.mousedown),y.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(d,"touchmove",this.touchmove),y.addEventListener(d,"touchend",this.touchend),y.addEventListener(d,"touchcancel",this.reset)}down(o,d){this.mouseRotate.mousedown(o,d),this.mousePitch&&this.mousePitch.mousedown(o,d),y.disableDrag()}move(o,d){const _=this.map,P=this.mouseRotate.mousemoveWindow(o,d);if(P&&P.bearingDelta&&_.setBearing(_.getBearing()+P.bearingDelta),this.mousePitch){const U=this.mousePitch.mousemoveWindow(o,d);U&&U.pitchDelta&&_.setPitch(_.getPitch()+U.pitchDelta)}}off(){const o=this.element;y.removeEventListener(o,"mousedown",this.mousedown),y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(o,"touchmove",this.touchmove),y.removeEventListener(o,"touchend",this.touchend),y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(o){this.down(r.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),y.mousePos(this.element,o)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.move(o,y.mousePos(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Si(E,o,d){if(E=new r.LngLat(E.lng,E.lat),o){const _=new r.LngLat(E.lng-360,E.lat),P=new r.LngLat(E.lng+360,E.lat),U=d.locationPoint(E).distSqr(o);d.locationPoint(_).distSqr(o)<U?E=_:d.locationPoint(P).distSqr(o)<U&&(E=P)}for(;Math.abs(E.lng-d.center.lng)>180;){const _=d.locationPoint(E);if(_.x>=0&&_.y>=0&&_.x<=d.width&&_.y<=d.height)break;E.lng>d.center.lng?E.lng-=360:E.lng+=360}return E}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qc(E,o,d){const _=E.classList;for(const P in Di)_.remove(`maplibregl-${d}-anchor-${P}`,`mapboxgl-${d}-anchor-${P}`);_.add(`maplibregl-${d}-anchor-${o}`,`mapboxgl-${d}-anchor-${o}`)}class Yc extends r.Evented{constructor(o,d){if(super(),(o instanceof HTMLElement||d)&&(o=r.extend({element:o},d)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=r.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const _=y.createNS("http://www.w3.org/2000/svg","svg"),P=41,U=27;_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height",`${P}px`),_.setAttributeNS(null,"width",`${U}px`),_.setAttributeNS(null,"viewBox",`0 0 ${U} ${P}`);const ee=y.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");const ce=y.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill-rule","nonzero");const fe=y.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),fe.setAttributeNS(null,"fill","#000000");const Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _t of Se){const at=y.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",_t.rx),at.setAttributeNS(null,"ry",_t.ry),fe.appendChild(at)}const Ne=y.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);const Ue=y.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Ue);const qe=y.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"fill","#000000");const it=y.createNS("http://www.w3.org/2000/svg","path");it.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),qe.appendChild(it);const Qe=y.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Qe.setAttributeNS(null,"fill","#FFFFFF");const et=y.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=y.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=y.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),et.appendChild(pt),et.appendChild(yt),ce.appendChild(fe),ce.appendChild(Ne),ce.appendChild(qe),ce.appendChild(Qe),ce.appendChild(et),_.appendChild(ce),_.setAttributeNS(null,"height",P*this._scale+"px"),_.setAttributeNS(null,"width",U*this._scale+"px"),this._element.appendChild(_),this._offset=r.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()}),qc(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=r.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const d=o.code,_=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(o){const d=o.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${d}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),U=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*U?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=r.pointGeometry.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const tp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $n,al=0,$s=!1;const _x={maxWidth:100,unit:"metric"};function Zc(E,o,d){const _=d&&d.maxWidth||100,P=E._container.clientHeight/2,U=E.unproject([0,P]),ee=E.unproject([_,P]),ce=U.distanceTo(ee);if(d&&d.unit==="imperial"){const fe=3.2808*ce;fe>5280?en(o,_,fe/5280,E._getUIString("ScaleControl.Miles")):en(o,_,fe,E._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?en(o,_,ce/1852,E._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?en(o,_,ce/1e3,E._getUIString("ScaleControl.Kilometers")):en(o,_,ce,E._getUIString("ScaleControl.Meters"))}function en(E,o,d,_){const P=function(U){const ee=Math.pow(10,`${Math.floor(U)}`.length-1);let ce=U/ee;return ce=ce>=10?10:ce>=5?5:ce>=3?3:ce>=2?2:ce>=1?1:function(fe){const Se=Math.pow(10,Math.ceil(-Math.log(fe)/Math.LN10));return Math.round(fe*Se)/Se}(ce),ee*ce}(d);E.style.width=o*(P/d)+"px",E.innerHTML=`${P}&nbsp;${_}`}const Nn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Im=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Vl(E){if(E){if(typeof E=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(E,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,E),"top-left":new r.pointGeometry(o,o),"top-right":new r.pointGeometry(-o,o),bottom:new r.pointGeometry(0,-E),"bottom-left":new r.pointGeometry(o,-o),"bottom-right":new r.pointGeometry(-o,-o),left:new r.pointGeometry(E,0),right:new r.pointGeometry(-E,0)}}if(E instanceof r.pointGeometry||Array.isArray(E)){const o=r.pointGeometry.convert(E);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:r.pointGeometry.convert(E.center||[0,0]),top:r.pointGeometry.convert(E.top||[0,0]),"top-left":r.pointGeometry.convert(E["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(E["top-right"]||[0,0]),bottom:r.pointGeometry.convert(E.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(E["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(E["bottom-right"]||[0,0]),left:r.pointGeometry.convert(E.left||[0,0]),right:r.pointGeometry.convert(E.right||[0,0])}}return Vl(new r.pointGeometry(0,0))}const Xc={supported:p,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends hu{constructor(E){var o;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(E=r.extend({},bx,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ou(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._maxTileCacheSize=E.maxTileCacheSize,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new Mm,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Pm,E.locale),this._clickTolerance=E.clickTolerance,this._pixelRatio=(o=E.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this._requestManager=new C(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new va(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new xm(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,r.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new uu({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new ep,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new r.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new r.Event(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new r.Event("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(E,o){if(o===void 0&&(o=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=E.onAdd(this);this._controls.push(E);const _=this._controlPositions[o];return o.indexOf("bottom")!==-1?_.insertBefore(d,_.firstChild):_.appendChild(d),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(E);return o>-1&&this._controls.splice(o,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,o,d,_){return _==null&&this.style.terrain&&(_=this.transform.getElevation(d,this.style.terrain)),super.calculateCameraOptionsFromTo(E,o,d,_)}resize(E){const o=this._containerDimensions(),d=o[0],_=o[1];this._resizeCanvas(d,_,this.getPixelRatio()),this.transform.resize(d,_),this.painter.resize(d,_,this.getPixelRatio());const P=!this._moving;return P&&(this.stop(),this.fire(new r.Event("movestart",E)).fire(new r.Event("move",E))),this.fire(new r.Event("resize",E)),P&&this.fire(new r.Event("moveend",E)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(E){const[o,d]=this._containerDimensions();this._pixelRatio=E,this._resizeCanvas(o,d,E),this.painter.resize(o,d,E)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(r.LngLatBounds.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(r.LngLat.convert(E),this.style&&this.style.terrain)}unproject(E){return this.transform.pointLocation(r.pointGeometry.convert(E),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(E,o,d){if(E==="mouseenter"||E==="mouseover"){let _=!1;return{layer:o,listener:d,delegates:{mousemove:U=>{const ee=this.getLayer(o)?this.queryRenderedFeatures(U.point,{layers:[o]}):[];ee.length?_||(_=!0,d.call(this,new Js(E,this,U.originalEvent,{features:ee}))):_=!1},mouseout:()=>{_=!1}}}}if(E==="mouseleave"||E==="mouseout"){let _=!1;return{layer:o,listener:d,delegates:{mousemove:ee=>{(this.getLayer(o)?this.queryRenderedFeatures(ee.point,{layers:[o]}):[]).length?_=!0:_&&(_=!1,d.call(this,new Js(E,this,ee.originalEvent)))},mouseout:ee=>{_&&(_=!1,d.call(this,new Js(E,this,ee.originalEvent)))}}}}{const _=P=>{const U=this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[];U.length&&(P.features=U,d.call(this,P),delete P.features)};return{layer:o,listener:d,delegates:{[E]:_}}}}on(E,o,d){if(d===void 0)return super.on(E,o);const _=this._createDelegatedListener(E,o,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(_);for(const P in _.delegates)this.on(P,_.delegates[P]);return this}once(E,o,d){if(d===void 0)return super.once(E,o);const _=this._createDelegatedListener(E,o,d);for(const P in _.delegates)this.once(P,_.delegates[P]);return this}off(E,o,d){return d===void 0?super.off(E,o):(this._delegatedListeners&&this._delegatedListeners[E]&&(_=>{const P=this._delegatedListeners[E];for(let U=0;U<P.length;U++){const ee=P[U];if(ee.layer===o&&ee.listener===d){for(const ce in ee.delegates)this.off(ce,ee.delegates[ce]);return P.splice(U,1),this}}})(),this)}queryRenderedFeatures(E,o){if(!this.style)return[];let d;if(o!==void 0||E===void 0||E instanceof r.pointGeometry||Array.isArray(E)||(o=E,E=void 0),o=o||{},(E=E||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof E[0]=="number")d=[r.pointGeometry.convert(E)];else{const _=r.pointGeometry.convert(E[0]),P=r.pointGeometry.convert(E[1]);d=[_,new r.pointGeometry(P.x,_.y),P,new r.pointGeometry(_.x,P.y),_]}return this.style.queryRenderedFeatures(d,o,this.transform)}querySourceFeatures(E,o){return this.style.querySourceFeatures(E,o)}setStyle(E,o){return(o=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(E,o))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const o=this._locale[E];if(o==null)throw new Error(`Missing UI string '${E}'`);return o}_updateStyle(E,o){return this.style&&(this.style.setEventedParent(null),this.style._remove()),E?(this.style=new Un(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E):this.style.loadJSON(E),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Un(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,o){if(typeof E=="string"){const d=this._requestManager.transformRequest(E,r.ResourceType.Style);r.getJSON(d,(_,P)=>{_?this.fire(new r.ErrorEvent(_)):P&&this._updateDiff(P,o)})}else typeof E=="object"&&this._updateDiff(E,o)}_updateDiff(E,o){try{this.style.setState(E)&&this._update(!0)}catch(d){r.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(E,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(E,o){return this._lazyInitEmptyStyle(),this.style.addSource(E,o),this._update(!0)}isSourceLoaded(E){const o=this.style&&this.style.sourceCaches[E];if(o!==void 0)return o.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){return this.style.setTerrain(E),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const o in E){const d=E[o]._tiles;for(const _ in d){const P=d[_];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}addSourceType(E,o,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,o,d)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,o,{pixelRatio:d=1,sdf:_=!1,stretchX:P,stretchY:U,content:ee}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||r.isImageBitmap(o)){const{width:ce,height:fe,data:Se}=r.exported.getImageData(o);this.style.addImage(E,{data:new r.RGBAImage({width:ce,height:fe},Se),pixelRatio:d,stretchX:P,stretchY:U,content:ee,sdf:_,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:fe,data:Se}=o,Ne=o;this.style.addImage(E,{data:new r.RGBAImage({width:ce,height:fe},new Uint8Array(Se)),pixelRatio:d,stretchX:P,stretchY:U,content:ee,sdf:_,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,E)}}}updateImage(E,o){const d=this.style.getImage(E);if(!d)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=o instanceof HTMLImageElement||r.isImageBitmap(o)?r.exported.getImageData(o):o,{width:P,height:U,data:ee}=_;if(P===void 0||U===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(P!==d.data.width||U!==d.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ce=!(o instanceof HTMLImageElement||r.isImageBitmap(o));d.data.replace(ee,ce),this.style.updateImage(E,d)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,o){r.getImage(this._requestManager.transformRequest(E,r.ResourceType.Image),o)}listImages(){return this.style.listImages()}addLayer(E,o){return this._lazyInitEmptyStyle(),this.style.addLayer(E,o),this._update(!0)}moveLayer(E,o){return this.style.moveLayer(E,o),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}setLayerZoomRange(E,o,d){return this.style.setLayerZoomRange(E,o,d),this._update(!0)}setFilter(E,o,d={}){return this.style.setFilter(E,o,d),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,o,d,_={}){return this.style.setPaintProperty(E,o,d,_),this._update(!0)}getPaintProperty(E,o){return this.style.getPaintProperty(E,o)}setLayoutProperty(E,o,d,_={}){return this.style.setLayoutProperty(E,o,d,_),this._update(!0)}getLayoutProperty(E,o){return this.style.getLayoutProperty(E,o)}setLight(E,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,o){return this.style.setFeatureState(E,o),this._update()}removeFeatureState(E,o){return this.style.removeFeatureState(E,o),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,o=0;return this._container&&(E=this._container.clientWidth||400,o=this._container.clientHeight||300),[E,o]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map","mapboxgl-map");const o=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",E);this._interactive&&o.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1],this.getPixelRatio());const _=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",E),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(U=>{P[U]=y.create("div",`maplibregl-ctrl-${U} mapboxgl-ctrl-${U}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const E=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",E);let o="Control",d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",o="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${d}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",_=>{_.key===o&&(this._metaPress=!0)}),document.addEventListener("keyup",_=>{_.key===o&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",_=>{this._onCooperativeGesture(_,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(E,o,d){this._canvas.width=d*E,this._canvas.height=d*o,this._canvas.style.width=`${E}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const E=r.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",E)||this._canvas.getContext("experimental-webgl",E);o?(this.painter=new ym(o,this.transform),r.exported$1.testSupport(o)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(E){E.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:E}))}_contextRestored(E){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:E}))}_onMapScroll(E){if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(E,o,d){return!o&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){let o,d=0;const _=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(o=_.createQueryEXT(),_.beginQueryEXT(_.TIME_ELAPSED_EXT,o),d=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let P=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ee=this.transform.zoom,ce=r.exported.now();this.style.zoomHistory.update(ee,ce);const fe=new r.EvaluationParameters(ee,{now:ce,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Se=fe.crossFadingFactor();Se===1&&Se===this._crossFadingFactor||(P=!0,this._crossFadingFactor=Se),this.style.update(fe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||P)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ee=r.exported.now()-d;_.endQueryEXT(_.TIME_ELAPSED_EXT,o),setTimeout(()=>{const ce=_.getQueryObjectEXT(o,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(o),this.fire(new r.Event("gpu-timing-frame",{cpuTime:ee,gpuTime:ce}))},50)}if(this.listens("gpu-timing-layer")){const ee=this.painter.collectGpuTimers();setTimeout(()=>{const ce=this.painter.queryGpuTimers(ee);this.fire(new r.Event("gpu-timing-layer",{layerTimes:ce}))},50)}const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(E=>{r.PerformanceUtils.frame(E),this._frame=null,this._render(E)}))}_onWindowOnline(){this._update()}_onWindowResize(E){this._trackResize&&this.resize({originalEvent:E})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}_setCacheLimits(E,o){r.setCacheLimits(E,o)}get version(){return"2.4.0"}},NavigationControl:class{constructor(E){this.options=r.extend({},Wa,E),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const E=this._map.getZoom(),o=E===this._map.getMaxZoom(),d=E===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const E=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=E}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new du(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,o){const d=y.create("button",E,this._container);return d.type="button",d.addEventListener("click",o),d}_setButtonTitle(E,o){const d=this._map._getUIString(`NavigationControl.${o}`);E.title=d,E.setAttribute("aria-label",d)}},GeolocateControl:class extends r.Evented{constructor(E){super(),this.options=r.extend({},tp,E),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(E){var o;return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,$n!==void 0?o($n):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{$n=d.state!=="denied",o($n)}):($n=!!window.navigator.geolocation,o($n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,al=0,$s=!1}_isOutOfMapMaxBounds(E){const o=this._map.getMaxBounds(),d=E.coords;return o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(E){if(this._map){if(this._isOutOfMapMaxBounds(E))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",E)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=E,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(E),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(E),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",E)),this._finish()}}_updateCamera(E){const o=new r.LngLat(E.coords.longitude,E.coords.latitude),d=E.coords.accuracy,_=this._map.getBearing(),P=r.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(d),P,{geolocateSource:!0})}_updateMarker(E){if(E){const o=new r.LngLat(E.coords.longitude,E.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=E.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const E=this._map._container.clientHeight/2,o=this._map.unproject([0,E]),d=this._map.unproject([1,E]),_=o.distanceTo(d),P=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=`${P}px`,this._circleElement.style.height=`${P}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(E){if(this._map){if(this.options.trackUserLocation)if(E.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(E.code===3&&$s)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",E)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(E){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",E===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Yc(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":al--,$s=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),al++,al>1?(E={maximumAge:6e5,timeout:0},$s=!0):(E=this.options.positionOptions,$s=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:uu,LogoControl:ep,ScaleControl:class{constructor(E){this.options=r.extend({},_x,E),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Zc(this._map,this._container,this.options)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(E){this.options.unit=E,Zc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const E=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(E){this.options=E,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(E){super(),this.options=r.extend(Object.create(Nn),E),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=r.LngLat.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const o=document.createDocumentFragment(),d=document.createElement("body");let _;for(d.innerHTML=E;_=d.firstChild,_;)o.appendChild(_);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(E){this._update(E.point)}_onMouseMove(E){this._update(E.point)}_onDrag(E){this._update(E.point)}_update(E){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(U=>this._container.classList.add(U)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!E))return;const o=this._pos=this._trackPointer&&E?E:this._map.project(this._lngLat);let d=this.options.anchor;const _=Vl(this.options.offset);if(!d){const U=this._container.offsetWidth,ee=this._container.offsetHeight;let ce;ce=o.y+_.bottom.y<ee?["top"]:o.y>this._map.transform.height-ee?["bottom"]:[],o.x<U/2?ce.push("left"):o.x>this._map.transform.width-U/2&&ce.push("right"),d=ce.length===0?"bottom":ce.join("-")}const P=o.add(_[d]).round();y.setTransform(this._container,`${Di[d]} translate(${P.x}px,${P.y}px)`),qc(this._container,d,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(Im);E&&E.focus()}_onClose(){this.remove()}},Marker:Yc,Style:Un,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:re,GeoJSONSource:$,ImageSource:H,RasterDEMTileSource:G,RasterTileSource:R,VectorTileSource:O,VideoSource:W,prewarm:function(){we().acquire(J)},clearPrewarmedResources:function(){const E=ye;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(J),ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ne.workerCount},set workerCount(E){ne.workerCount=E},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){r.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage(E){r.clearTileCache(E)},workerUrl:"",addProtocol(E,o){r.config.REGISTERED_PROTOCOLS[E]=o},removeProtocol(E){delete r.config.REGISTERED_PROTOCOLS[E]}};return on.extend(Xc,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),Xc});var h=a;return h})})(S7);var w3={exports:{}};class k7{constructor(e=[],t=A7){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:s}=this,a=t[e];for(;e>0;){const l=e-1>>1,h=t[l];if(s(a,h)>=0)break;t[e]=h,e=l}t[e]=a}_down(e){const{data:t,compare:s}=this,a=this.length>>1,l=t[e];for(;e<a;){let h=(e<<1)+1,r=t[h];const p=h+1;if(p<this.length&&s(t[p],r)<0&&(h=p,r=t[p]),s(r,l)>=0)break;t[e]=r,e=h}t[e]=l}}function A7(i,e){return i<e?-1:i>e?1:0}const M7=Object.freeze(Object.defineProperty({__proto__:null,default:k7},Symbol.toStringTag,{value:"Module"})),P7=vM(M7);var Lg=P7;Lg.default&&(Lg=Lg.default);w3.exports=T3;w3.exports.default=T3;function T3(i,e,t){e=e||1;for(var s,a,l,h,r=0;r<i[0].length;r++){var p=i[0][r];(!r||p[0]<s)&&(s=p[0]),(!r||p[1]<a)&&(a=p[1]),(!r||p[0]>l)&&(l=p[0]),(!r||p[1]>h)&&(h=p[1])}var m=l-s,g=h-a,v=Math.min(m,g),y=v/2;if(v===0){var C=[s,a];return C.distance=0,C}for(var b=new Lg(void 0,I7),T=s;T<l;T+=v)for(var S=a;S<h;S+=v)b.push(new rc(T+y,S+y,y,i));var k=L7(i),x=new rc(s+m/2,a+g/2,0,i);x.d>k.d&&(k=x);for(var A=b.length;b.length;){var D=b.pop();D.d>k.d&&(k=D,t&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,A)),!(D.max-k.d<=e)&&(y=D.h/2,b.push(new rc(D.x-y,D.y-y,y,i)),b.push(new rc(D.x+y,D.y-y,y,i)),b.push(new rc(D.x-y,D.y+y,y,i)),b.push(new rc(D.x+y,D.y+y,y,i)),A+=4)}t&&(console.log("num probes: "+A),console.log("best distance: "+k.d));var w=[k.x,k.y];return w.distance=k.d,w}function I7(i,e){return e.max-i.max}function rc(i,e,t,s){this.x=i,this.y=e,this.h=t,this.d=D7(i,e,s),this.max=this.d+this.h*Math.SQRT2}function D7(i,e,t){for(var s=!1,a=1/0,l=0;l<t.length;l++)for(var h=t[l],r=0,p=h.length,m=p-1;r<p;m=r++){var g=h[r],v=h[m];g[1]>e!=v[1]>e&&i<(v[0]-g[0])*(e-g[1])/(v[1]-g[1])+g[0]&&(s=!s),a=Math.min(a,R7(i,e,g,v))}return a===0?0:(s?1:-1)*Math.sqrt(a)}function L7(i){for(var e=0,t=0,s=0,a=i[0],l=0,h=a.length,r=h-1;l<h;r=l++){var p=a[l],m=a[r],g=p[0]*m[1]-m[0]*p[1];t+=(p[0]+m[0])*g,s+=(p[1]+m[1])*g,e+=g*3}return e===0?new rc(a[0][0],a[0][1],0,i):new rc(t/e,s/e,0,i)}function R7(i,e,t,s){var a=t[0],l=t[1],h=s[0]-a,r=s[1]-l;if(h!==0||r!==0){var p=((i-a)*h+(e-l)*r)/(h*h+r*r);p>1?(a=s[0],l=s[1]):p>0&&(a+=h*p,l+=r*p)}return h=i-a,r=e-l,h*h+r*r}var z7=typeof un=="object"&&un&&un.Object===Object&&un,N7=typeof self=="object"&&self&&self.Object===Object&&self;z7||N7||Function("return this")();var O7={exports:{}};(function(i,e){var t=function(){var s={},a=Math.PI/180,l=180/Math.PI,h=6378137,r=20037508342789244e-9;function p(g){return Number(g)===g&&g%1!==0}function m(g){if(g=g||{},this.size=g.size||256,this.expansion=g.antimeridian===!0?2:1,!s[this.size]){var v=this.size,y=s[this.size]={};y.Bc=[],y.Cc=[],y.zc=[],y.Ac=[];for(var C=0;C<30;C++)y.Bc.push(v/360),y.Cc.push(v/(2*Math.PI)),y.zc.push(v/2),y.Ac.push(v),v*=2}this.Bc=s[this.size].Bc,this.Cc=s[this.size].Cc,this.zc=s[this.size].zc,this.Ac=s[this.size].Ac}return m.prototype.px=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),C=y/2,b=y/360,T=y/(2*Math.PI),S=y,k=Math.min(Math.max(Math.sin(a*g[1]),-.9999),.9999),x=C+g[0]*b,A=C+.5*Math.log((1+k)/(1-k))*-T;return x>S*this.expansion&&(x=S*this.expansion),A>S&&(A=S),[x,A]}else{var C=this.zc[v],k=Math.min(Math.max(Math.sin(a*g[1]),-.9999),.9999),x=Math.round(C+g[0]*this.Bc[v]),A=Math.round(C+.5*Math.log((1+k)/(1-k))*-this.Cc[v]);return x>this.Ac[v]*this.expansion&&(x=this.Ac[v]*this.expansion),A>this.Ac[v]&&(A=this.Ac[v]),[x,A]}},m.prototype.ll=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),C=y/360,b=y/(2*Math.PI),T=y/2,S=(g[1]-T)/-b,k=(g[0]-T)/C,x=l*(2*Math.atan(Math.exp(S))-.5*Math.PI);return[k,x]}else{var S=(g[1]-this.zc[v])/-this.Cc[v],k=(g[0]-this.zc[v])/this.Bc[v],x=l*(2*Math.atan(Math.exp(S))-.5*Math.PI);return[k,x]}},m.prototype.bbox=function(g,v,y,C,b){C&&(v=Math.pow(2,y)-1-v);var T=[g*this.size,(+v+1)*this.size],S=[(+g+1)*this.size,v*this.size],k=this.ll(T,y).concat(this.ll(S,y));return b==="900913"?this.convert(k,"900913"):k},m.prototype.xyz=function(g,v,y,C){C==="900913"&&(g=this.convert(g,"WGS84"));var b=[g[0],g[1]],T=[g[2],g[3]],S=this.px(b,v),k=this.px(T,v),x=[Math.floor(S[0]/this.size),Math.floor((k[0]-1)/this.size)],A=[Math.floor(k[1]/this.size),Math.floor((S[1]-1)/this.size)],D={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,A)};if(y){var w={minY:Math.pow(2,v)-1-D.maxY,maxY:Math.pow(2,v)-1-D.minY};D.minY=w.minY,D.maxY=w.maxY}return D},m.prototype.convert=function(g,v){return v==="900913"?this.forward(g.slice(0,2)).concat(this.forward(g.slice(2,4))):this.inverse(g.slice(0,2)).concat(this.inverse(g.slice(2,4)))},m.prototype.forward=function(g){var v=[h*g[0]*a,h*Math.log(Math.tan(Math.PI*.25+.5*g[1]*a))];return v[0]>r&&(v[0]=r),v[0]<-20037508342789244e-9&&(v[0]=-20037508342789244e-9),v[1]>r&&(v[1]=r),v[1]<-20037508342789244e-9&&(v[1]=-20037508342789244e-9),v},m.prototype.inverse=function(g){return[g[0]*l/h,(Math.PI*.5-2*Math.atan(Math.exp(-g[1]/h)))*l]},m}();i.exports=t})(O7);var R2={exports:{}};(function(i,e){(function(t,s){s(e,i)})(un,function(t,s){var a={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function l(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function h(m){try{delete window[m]}catch{window[m]=void 0}}function r(m){var g=document.getElementById(m);g&&document.getElementsByTagName("head")[0].removeChild(g)}function p(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=m,y=g.timeout||a.timeout,C=g.jsonpCallback||a.jsonpCallback,b=void 0;return new Promise(function(T,S){var k=g.jsonpCallbackFunction||l(),x=C+"_"+k;window[k]=function(D){T({ok:!0,json:function(){return Promise.resolve(D)}}),b&&clearTimeout(b),r(x),h(k)},v+=v.indexOf("?")===-1?"?":"&";var A=document.createElement("script");A.setAttribute("src",""+v+C+"="+k),g.charset&&A.setAttribute("charset",g.charset),g.nonce&&A.setAttribute("nonce",g.nonce),g.referrerPolicy&&A.setAttribute("referrerPolicy",g.referrerPolicy),g.crossorigin&&A.setAttribute("crossorigin","true"),A.id=x,document.getElementsByTagName("head")[0].appendChild(A),b=setTimeout(function(){S(new Error("JSONP request to "+m+" timed out")),h(k),r(x),window[k]=function(){h(k)}},y),A.onerror=function(){S(new Error("JSONP request to "+m+" failed")),h(k),r(x),b&&clearTimeout(b)}})}s.exports=p})})(R2,R2.exports);var j7=F7,B7=Object.prototype.hasOwnProperty;function F7(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var s in t)B7.call(t,s)&&(i[s]=t[s])}return i}var C3={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(s,a){return a.filter(function(l){return t.test(s,l)})},t.test=function(s,a){return t.match(s,a)!==null},t.match=function(s,a,l){l=l||{};var h=0,r=[],p=a.length,m=0,g=0,v=l.pre||"",y=l.post||"",C=l.caseSensitive&&a||a.toLowerCase(),b;s=l.caseSensitive&&s||s.toLowerCase();for(var T=0;T<p;T++)b=a[T],C[T]===s[h]?(b=v+b+y,h+=1,g+=1+g):g=0,m+=g,r[r.length]=b;return h===s.length?(m=C===s?1/0:m,{rendered:r.join(""),score:m}):null},t.filter=function(s,a,l){return!a||a.length===0?[]:typeof s!="string"?a:(l=l||{},a.reduce(function(h,r,p,m){var g=r;l.extract&&(g=l.extract(r));var v=t.match(s,g,l);return v!=null&&(h[h.length]={string:v.rendered,score:v.score,index:p,original:r}),h},[]).sort(function(h,r){var p=r.score-h.score;return p||h.index-r.index}))}})()})(C3);var U7=C3.exports,Aa=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};Aa.prototype.show=function(){this.element.style.display="block"};Aa.prototype.hide=function(){this.element.style.display="none"};Aa.prototype.add=function(i){this.items.push(i)};Aa.prototype.clear=function(){this.items=[],this.active=0};Aa.prototype.isEmpty=function(){return!this.items.length};Aa.prototype.isVisible=function(){return this.element.style.display==="block"};Aa.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};Aa.prototype.drawItem=function(i,e){var t=document.createElement("li"),s=document.createElement("a");e&&(t.className+=" active"),s.innerHTML=i.string,t.appendChild(s),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};Aa.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};Aa.prototype.move=function(i){this.active=i,this.draw()};Aa.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Aa.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Aa.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var $7=Aa,V7=j7,G7=U7,H7=$7,Ks=function(i,e,t){return t=t||{},this.options=V7({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new H7(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(s){this.handleKeyUp(s.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(s){this.handleKeyDown(s)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(s){this.handlePaste(s)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ks.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Ks.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ks.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ks.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};Ks.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};Ks.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ks.prototype.update=function(i){this.data=i,this.handleKeyUp()};Ks.prototype.clear=function(){this.data=[],this.list.clear()};Ks.prototype.normalize=function(i){return i=i.toLowerCase(),i};Ks.prototype.match=function(i,e){return i.indexOf(e)>-1};Ks.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Ks.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(s){return this.getItemValue(s)}).bind(this)},t;this.options.filter?(t=G7.filter(this.query,this.data,e),t=t.map((function(s){return{original:s.original,string:this.render(s.original,s.string)}}).bind(this))):t=this.data.map((function(s){var a=this.render(s);return{original:s,string:a}}).bind(this)),i(t)};Ks.prototype.getItemValue=function(i){return i};Ks.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),s=this.normalize(t),a=s.lastIndexOf(this.query);a>-1;){var l=a+this.query.length;t=t.slice(0,a)+"<strong>"+t.slice(a,l)+"</strong>"+t.slice(l),a=s.slice(0,a).lastIndexOf(this.query)}return t};Ks.prototype.renderError=function(i){this.list.drawError(i)};var W7=Ks,q7=W7;typeof window<"u"&&(window.Suggestions=q7);var E3={exports:{}};(function(i,e){(function(t,s){s()})(un,function(){function t(m,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function s(m,g,v){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){p(y.response,g,v)},y.onerror=function(){console.error("could not download file")},y.send()}function a(m){var g=new XMLHttpRequest;g.open("HEAD",m,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function l(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(g)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof un=="object"&&un.global===un?un:void 0,r=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(m,g,v){var y=h.URL||h.webkitURL,C=document.createElement("a");g=g||m.name||"download",C.download=g,C.rel="noopener",typeof m=="string"?(C.href=m,C.origin===location.origin?l(C):a(C.href)?s(m,g,v):l(C,C.target="_blank")):(C.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(C.href)},4e4),setTimeout(function(){l(C)},0))}:"msSaveOrOpenBlob"in navigator?function(m,g,v){if(g=g||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,v),g);else if(a(m))s(m,g,v);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){l(y)})}}:function(m,g,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return s(m,g,v);var C=m.type==="application/octet-stream",b=/constructor/i.test(h.HTMLElement)||h.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||C&&b||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var A=S.result;A=T?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=A:location=A,y=null},S.readAsDataURL(m)}else{var k=h.URL||h.webkitURL,x=k.createObjectURL(m);y?y.location=x:location.href=x,y=null,setTimeout(function(){k.revokeObjectURL(x)},4e4)}});h.saveAs=p.saveAs=p,i.exports=p})})(E3);var Y7=E3.exports;const Z7=ld(Y7),X7="_errorChap_1v22m_1",K7="_errorBar_1v22m_6",Q7="_errorHeader_1v22m_16",J7="_detailedError_1v22m_23",eF="_scrollMissingData_1v22m_29",tF="_notFoundDataTable_1v22m_34",Lu={errorChap:X7,errorBar:K7,errorHeader:Q7,detailedError:J7,scrollMissingData:eF,notFoundDataTable:tF},iF="_buttons_1a7lz_1",rF="_text_1a7lz_7",z2={buttons:iF,text:rF},nF=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:s,onClickDownloadOrPostData:a,onButtonSendAction:l})=>{const h=()=>{if(s.length===0)return!0;const m=s[0].path.split("/").length;return s.every(g=>g.path.split("/").length===m)},r=l==="predict"?"Send prediction":"Create dataset",p=l==="predict"?se.jsx(Cy,{}):se.jsx(jv,{});return se.jsxs("div",{children:[se.jsxs("div",{className:z2.buttons,children:[se.jsx(Wr,{icon:se.jsx(TT,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!h(),onClick:()=>a("download"),children:"Download data"}),se.jsx(Wr,{icon:p,primary:!0,loading:i.startDownload&&i.action===l||e,disabled:!t||i.startDownload||!h(),onClick:()=>a(l),children:r})]}),e&&se.jsx("p",{className:z2.text,children:"Sending data.."})]})},S3=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:s,selectedPeriodItems:a,selectedOrgUnits:l,orgUnitLevel:h,dataLayers:r})=>{const[p,m]=Be.useState({action:"download",startDownload:!1}),[g,v]=Be.useState(!1),[y,C]=Be.useState(void 0),[b,T]=Be.useState(),[S,k]=Be.useState({}),x=r.filter(he=>he.origin==="dataItem"),[A,D]=Be.useState([]),[w,I]=Be.useState([]),[N,q]=Be.useState(""),Y=()=>!(h===void 0||l.length==0||a.length==0||s===""||a.length==0||r.length==0||r.some(he=>he.feature===""||he.dataSource===""||he.origin==="")),X=he=>{C(void 0),T(void 0),I([]),m({action:he,startDownload:!0})};Be.useEffect(()=>{if(y&&b){if(q(""),m(he=>({...he,startDownload:!1})),p.action==="download"){re();return}if(j(y))return;p.action==="predict"&&W(),p.action==="new-dataset"&&H()}},[y,b]);const B=(he,ie,ae,Ce)=>{var K;const ge=[],ke=[...new Set(he.map(Q=>Q.orgUnit))];a.forEach(Q=>{ke.forEach(le=>{var J;let _e=!0;he.filter(ne=>ne.featureName===ae).forEach(ne=>{if(Q.id==ne.period){_e=!1;return}}),_e&&ge.push({covariate:Ce,orgUnitName:((J=S[le])==null?void 0:J.name)||"",period:Q.id})})}),ge.length>0&&ie.push({title:Ce+" is missing for the following orgUnit and time periods: ",description:se.jsxs("div",{children:[se.jsxs("p",{children:["Total missing: ",ge.length," | Use the"," ",se.jsx("a",{target:"_blank",href:((K=O==null?void 0:O.systemInfo)==null?void 0:K.contextPath)+"/api/apps/climate-data/index.html#/import",children:"Climate App"})," ","to import climate data."]}),se.jsx("div",{className:Lu.scrollMissingData,children:se.jsxs("table",{className:Lu.notFoundDataTable,children:[se.jsx("thead",{children:se.jsxs("tr",{children:[se.jsx("th",{children:"Organisation unit:"}),se.jsx("th",{children:"Time period:"})]})}),se.jsx("tbody",{children:ge.map(Q=>se.jsxs("tr",{children:[se.jsx("td",{children:Q.orgUnitName}),se.jsx("td",{children:Yb({periodId:Q.period,calendar:"gregory"}).displayName})]}))})]})})]})})},j=he=>{let ie=[];return r.filter(ae=>ae.origin=="dataItem").forEach(ae=>{var Ce;if(((Ce=he.filter(ge=>ge.featureName===ae.feature))==null?void 0:Ce.length)===0){const ge='Thes selected data item for covarate "'+ae.feature+'" returned no data.';ie.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:ge})}}),r.find(ae=>ae.feature==="rainfall"&&ae.origin=="dataItem")&&B(he,ie,"rainfall","Rainfall"),r.find(ae=>ae.feature==="mean_temperature"&&ae.origin=="dataItem")&&B(he,ie,"mean_temperature","Mean Temperature"),ie.length>0?(I([...w,...ie]),!0):!1},O=Ty(),R=()=>{var he,ie;return{appVersion:((he=O==null?void 0:O.appVersion)==null?void 0:he.full)||"Unknown",dhis2Version:((ie=O==null?void 0:O.systemInfo)==null?void 0:ie.version)||"Unknown",dataItemMapper:A}},L=()=>({name:s,dataToBeFetched:F(),metaData:R(),providedData:y,geojson:b}),G=()=>L(),$=()=>({type:"predict",modelId:t==null?void 0:t.name,...L()}),F=()=>r.filter(he=>he.origin==="CHAP").map(he=>({dataSourceName:he.dataSource,featureName:he.feature})),H=async()=>{let he=G();v(!0),await Go.makeDatasetAnalyticsMakeDatasetPost(he).then(ie=>{q(""),e()}).catch(ie=>{var ae,Ce;(ae=ie==null?void 0:ie.body)!=null&&ae.detail?q(JSON.stringify((Ce=ie==null?void 0:ie.body)==null?void 0:Ce.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},W=async()=>{let he=$();v(!0),await Go.makePredictionAnalyticsMakePredictionPost(he).then(ie=>{e()}).catch(ie=>{var ae,Ce;(ae=ie==null?void 0:ie.body)!=null&&ae.detail?q(JSON.stringify((Ce=ie==null?void 0:ie.body)==null?void 0:Ce.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},re=()=>{let he={};i==="predict"&&(he=$()),i==="new-dataset"&&(he=G());var ie=new Blob([JSON.stringify(he,null,2)],{type:"application/json"});const ae=new Date;Z7(ie,i.replaceAll("-","_")+"_chap_request_data_"+ae.toJSON()+".json")};return se.jsxs("div",{children:[se.jsx(nF,{formValid:Y(),onButtonSendAction:i,onClickDownloadOrPostData:X,orgUnits:l,isSendingDataToChap:g,startDownload:p}),se.jsx("p",{className:Lu.errorChap,children:N}),p.startDownload&&Y()&&se.jsx(BO,{setAnalyticsMetaData:k,setFeatureDataItemMapper:D,model_id:t==null?void 0:t.name,setObservations:C,setGeoJSon:T,analyticsDataLayers:x,startDownload:p,setStartDownload:m,selectedPeriodItems:a,setErrorMessages:I,selectedOrgUnits:l,orgUnitLevel:h}),w.map((he,ie)=>se.jsxs("div",{className:Lu.errorBar,children:[se.jsxs("div",{className:Lu.errorHeader,children:[se.jsx(Fv,{}),se.jsx("span",{children:he.title})]}),se.jsx("span",{className:Lu.detailedError,children:he.description})]},ie))]})},sF="_dataLineWrapper_epwpx_1",aF="_selectField_epwpx_9",oF="_buttonRight_epwpx_13",lF="_selectDataLineWrapper_epwpx_19",cF="_predictLabel_epwpx_27",kp={dataLineWrapper:sF,selectField:aF,buttonRight:oF,selectDataLineWrapper:lF,predictLabel:cF},hF="_searchSelectField_fpa7s_1",uF="_inputField_fpa7s_6",dF="_input_fpa7s_6",pF="_dropDown_fpa7s_33",fF="_dropDownItem_fpa7s_50",mF="_rightDropDownItem_fpa7s_60",gF="_label_fpa7s_69",yF="_infoSearchItem_fpa7s_75",yl={searchSelectField:hF,inputField:uF,input:dF,dropDown:pF,dropDownItem:fF,rightDropDownItem:mF,label:gF,infoSearchItem:yF},xF=i=>({results:{resource:"dataItems",params:{filter:"displayName:ilike:"+i,fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}}}),vF=({feature:i,onChangeSearchSelectField:e})=>{const[t,s]=Be.useState(""),a=od(),[l,h]=Be.useState([]),[r,p]=Be.useState(!1),m=async()=>{try{const x=await a.query(xF(t));h(x.results.dataItems)}catch(x){console.error("Error fetching data:",x)}finally{p(!1)}};Be.useEffect(()=>{if(t.length===0){h([]);return}p(!0);const x=setTimeout(()=>{m()},300);return()=>{clearTimeout(x)}},[t]);const[g,v]=Be.useState(!1),y=x=>{v(!0);const A=x.target.value;s(A)},C=x=>{s(x.displayName),e(i,x.id,x.displayName),v(!1)},b=Be.useRef(null),T=x=>x.replaceAll("_"," ").split(" ").map(A=>A.charAt(0).toUpperCase()+A.slice(1).toLowerCase()).join(" "),S=x=>{b.current&&!b.current.contains(x.target)&&v(!1)},k=()=>r?se.jsx("li",{className:yl.infoSearchItem,children:"Loading..."}):l.length==0&&t.length==0?se.jsx("li",{className:yl.infoSearchItem,children:"Start to search by typing"}):l.length==0?se.jsx("li",{className:yl.infoSearchItem,children:"No match found"}):se.jsx(se.Fragment,{children:l.map(x=>se.jsxs("li",{onClick:()=>C(x),className:yl.dropDownItem,children:[se.jsx("div",{children:x.displayName}),se.jsx("div",{className:yl.rightDropDownItem,children:T(x.dimensionItemType)??""})]},x.id))});return Be.useEffect(()=>(document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}),[]),se.jsxs("div",{ref:b,className:yl.searchSelectField,children:[se.jsx("label",{className:yl.label,children:se.jsx("span",{children:T(i.name??"")})}),se.jsx("input",{type:"search",value:t,onChange:y,placeholder:"Search for indicators, Data Elements, Data Sets, Event Data Items, Program Indicators...",className:yl.inputField}),g&&se.jsx("ul",{className:yl.dropDown,children:k()})]})},k3=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[s,a]=Be.useState([]),l=async()=>{await Go.getDataSourcesAnalyticsDataSourcesGet().then(p=>{a(p)})};Be.useEffect(()=>{l()},[]);const h=(p,m,g)=>{let v=[...i];p.selected!=null&&(v[g][m]=p.selected,e(v))},r=(p,m)=>{h({selected:p},"dataSource",m)};return se.jsxs("div",{children:[se.jsx("h3",{children:"Covariates"}),se.jsx("div",{className:kp.selectDataLineWrapper,children:i.map((p,m)=>{var g,v,y;return se.jsx("div",{children:se.jsxs("div",{className:kp.dataLineWrapper,children:[t?se.jsx("div",{className:kp.predictLabel,children:((g=Rg.filter(C=>C.id===p.feature)[0])==null?void 0:g.name)+":"}):se.jsx("div",{className:kp.predictLabel,children:((v=Rg.filter(C=>C.id===p.feature)[0])==null?void 0:v.name)+":"}),se.jsxs("div",{className:kp.selectField,children:[(p.origin==="CHAP"||p.origin==="")&&se.jsx(ds,{disabled:p.origin==="",label:"Data Element",onChange:C=>h(C,"dataSource",m),selected:p.dataSource,children:s.map(C=>C.supportedFeatures.includes(p.feature)&&se.jsx(io,{label:`${C.dataset.toUpperCase()} - ${C.displayName}`,value:C.dataset},C.name))}),p.origin==="dataItem"&&se.jsx(vF,{feature:{name:(y=Rg.filter(C=>C.id===p.feature)[0])==null?void 0:y.name,id:p.feature,description:""},onChangeSearchSelectField:(C,b)=>r(b,m)})]})]})},m)})})]})},Rg=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],bF=()=>Rg.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),_F=({onDrawerSubmit:i})=>{const[e,t]=Be.useState(bF()),[s,a]=Be.useState([]),[l,h]=Be.useState([]),[r,p]=Be.useState(void 0),[m,g]=Be.useState("");return se.jsx(se.Fragment,{children:se.jsxs("div",{className:sO.formWrapper,children:[se.jsx(Ef,{autoComplete:"",label:"Dataset name",value:m,onChange:v=>g(v.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),se.jsx(k3,{setDataLayers:t,datasetLayers:e}),se.jsx(fS,{setTimePeriods:h}),se.jsx(mS,{orgUnits:s,setOrgUnits:a,orgUnitLevel:r,setOrgUnitLevel:p}),se.jsx(S3,{onDrawerSubmit:i,name:m,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:r,selectedPeriodItems:l,selectedOrgUnits:s})]})})},wF="_newDatasetWrapper_1jun0_1",TF="_newEvaluationDatasetTitle_1jun0_5",CF="_navFooterOuter_1jun0_12",EF="_navFooter_1jun0_12",N2={newDatasetWrapper:wF,newEvaluationDatasetTitle:TF,navFooterOuter:CF,navFooter:EF},SF=({onDrawerClose:i,onDrawerSubmit:e})=>se.jsx(se.Fragment,{children:se.jsxs("div",{className:N2.newDatasetWrapper,children:[se.jsxs("div",{className:N2.newEvaluationDatasetTitle,children:[se.jsx("h2",{children:"New evaluation dataset"}),se.jsx(Wr,{icon:se.jsx(Nv,{}),onClick:i})]}),se.jsx(_F,{onDrawerSubmit:e})]})}),kF=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const s=window.innerWidth<900?"100vw":"1000px";return se.jsx("div",{children:se.jsx(Gb,{open:i,onClose:t,direction:"right",size:s,children:se.jsx("div",{className:iO.drawerWrapper,children:se.jsx(SF,{onDrawerClose:t,onDrawerSubmit:e})})})})},AF="_pageHeader_1wz9n_1",MF="_pageDescription_1wz9n_11",O2={pageHeader:AF,pageDescription:MF},ay=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:s})=>se.jsxs("div",{className:O2.pageHeader,children:[se.jsxs("div",{children:[se.jsx("h2",{children:i}),se.jsx("p",{className:O2.pageDescription,children:e})]}),t&&s&&se.jsx(Wr,{onClick:()=>t(!0),icon:se.jsx(Ov,{}),primary:!0,children:s})]}),PF="_jobResultPanelContainer_16af9_1",IF="_boxPanel_16af9_9",DF="_flexMedium_16af9_17",LF="_flexItemRight_16af9_21",RF="_inProgress_16af9_26",zF="_notStarted_16af9_31",NF="_completed_16af9_36",OF="_failed_16af9_41",jF="_resultTextHeader_16af9_46",BF="_evaluationModal_16af9_53",FF="_jobLogsModal_16af9_58",nc={jobResultPanelContainer:PF,boxPanel:IF,flexMedium:DF,flexItemRight:LF,inProgress:RF,notStarted:zF,completed:NF,failed:OF,resultTextHeader:jF,evaluationModal:BF,jobLogsModal:FF},UF="_modal_1k0a4_1",$F={modal:UF},VF="_container_mngpy_1",GF="_innerContainer_mngpy_6",HF="_prediction_mngpy_21",WF="_warning_mngpy_26",qF="_footer_mngpy_31",YF="_post_mngpy_36",ZF="_redText_mngpy_40",XF="_greenText_mngpy_45",ec={container:VF,innerContainer:GF,prediction:HF,warning:WF,footer:qF,post:YF,redText:ZF,greenText:XF},KF={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},A3=()=>{const[i,e]=Be.useState(),{loading:t,error:s}=ka(KF,{onComplete:a=>e(a.orgUnits)});return{orgUnits:i,error:s,loading:t}},QF=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:s,setPostHttpError:a,setPostStatus:l})=>{const h=b=>{if(b==="quantile_low")return e;if(b==="median")return t;if(b==="quantile_high")return s},r=b=>b.dataValues.map(T=>({dataElement:h(T.dataElement),period:T.period,orgUnit:T.orgUnit,value:T.value})),p=b=>({resource:"dataValueSets",type:"create",data:{dataValues:b}}),[m,{error:g,loading:v,called:y}]=rE(p(r(i))),C=async()=>{await m()};return Be.useEffect(()=>{C()},[]),Be.useEffect(()=>{y&&(v||(g&&(a("Something went wrong when posting the prediction."),l("error")),g||(a(""),l("finish"))))},[v]),null},JF="_selectWrapper_8vdsv_1",eU="_select_8vdsv_1",j2={selectWrapper:JF,select:eU},M0=({value:i,onChange:e,label:t,dataElements:s})=>{const a=h=>{e({displayName:s==null?void 0:s.find(r=>r.id===h.selected).displayName,id:h.selected})},l=(s==null?void 0:s.length)===0&&s!=null;return se.jsx("div",{children:se.jsx("div",{children:se.jsx("div",{className:j2.select,children:se.jsxs("div",{className:j2.selectWrapper,children:[se.jsx("span",{children:t}),se.jsx(ds,{tabIndex:"1",placeholder:Je.t("Select data element"),disabled:l,selected:i?i.id:"",warning:l,onChange:a,children:s==null?void 0:s.map(h=>se.jsx(io,{label:h.displayName,value:h.id},h.id))})]})})})})},tU="_textWarning_3ldzr_1",iU="_wrapper_3ldzr_6",rU="_wrapperWarning_3ldzr_14",P0={textWarning:tU,wrapper:iU,wrapperWarning:rU},nU="_dataValueTables_vzc5s_10",sU="_warning_vzc5s_17",B2={dataValueTables:nU,warning:sU},aU=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const s=Ty();return e&&se.jsx(Ch,{large:!0,onClose:()=>i(!1),children:se.jsxs(by,{children:[se.jsx("h2",{children:Je.t("Add required Data Elements")}),se.jsxs("p",{children:[Je.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),se.jsx("a",{target:"_blank",href:`${s.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,children:"Maintenance"}),Je.t("-app and create the Data Elements listed below.")]}),se.jsx("p",{className:B2.warning,children:Je.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),se.jsx("p",{children:Je.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),se.jsxs("div",{className:B2.dataValueTables,children:[se.jsx(I0,{q:"Low",disease:t}),se.jsx(I0,{q:"Median",disease:t}),se.jsx(I0,{q:"High",disease:t})]})]})})},I0=({q:i,disease:e})=>se.jsx("table",{children:se.jsxs("tbody",{children:[se.jsxs("tr",{children:[se.jsx("th",{children:Je.t("Name")}),se.jsxs("td",{children:["CHAP",Je.t(` ${e} Quantile ${i}`)]})]}),se.jsxs("tr",{children:[se.jsx("th",{children:Je.t("Short name")}),se.jsxs("td",{children:["CHAP",Je.t(` ${e} Quantile ${i}`)]})]}),se.jsxs("tr",{children:[se.jsx("th",{children:Je.t("Code")}),se.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),se.jsxs("tr",{children:[se.jsx("th",{children:Je.t("Domain type")}),se.jsx("td",{children:Je.t("Aggregate")})]}),se.jsxs("tr",{children:[se.jsx("th",{children:Je.t("Aggregation levels")}),se.jsx("td",{children:se.jsx("em",{children:Je.t("Assign all org unit levels")})})]})]})}),oU=({predictionTarget:i,warning:e})=>{const[t,s]=Be.useState(!1);return se.jsxs(se.Fragment,{children:[se.jsxs("div",{className:e?P0.wrapperWarning:P0.wrapper,children:[se.jsx("div",{className:P0.textWarning,children:e&&se.jsx(se.Fragment,{children:se.jsx("p",{children:Je.t("It seems like you missing Data Elements for CHAP prediction.")})})}),se.jsx("div",{children:se.jsx(Wr,{icon:se.jsx(jv,{}),onClick:()=>s(!0),children:Je.t("Add data elements")})})]}),se.jsx(aU,{modalOpen:t,setModalOpen:s,predictionTarget:i})]})},lU=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),D0=i=>{const[e,t]=Be.useState(),{loading:s,error:a}=ka(lU(i),{onComplete:l=>t(l.dataElements.dataElements)});return{dataElements:e,error:a,loading:s}},cU=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),hU=i=>{const[e,t]=Be.useState(),{loading:s,error:a,engine:l}=ka({});Be.useEffect(()=>{i&&h()},[i]);const h=async()=>{const r=await l.query(cU(i));r.dataItems.dataItems.length===0?t("?"):t(r.dataItems.dataItems[0].displayName)};return{displayName:e,error:a,loading:s}},uU=({prediction_unprocessed:i})=>{var G;const e=Qo(),[t,s]=Be.useState("chart"),[a,l]=Be.useState(),[h,r]=Be.useState(null),[p,m]=Be.useState(null),[g,v]=Be.useState(null),y=($,F)=>{if(!F)return 0;const H=[...F].sort((ae,Ce)=>ae-Ce),W=H.length,re=$*(W-1),he=Math.floor(re),ie=Math.ceil(re);return Math.round(he===ie?H[he]:H[he]+(H[ie]-H[he])*(re-he))},C=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],b=()=>{var $,F;return((F=($=i==null?void 0:i.metaData)==null?void 0:$.dataItemMapper)==null?void 0:F.find(H=>H.featureName==="disease_cases").dataItemId)??""},T=()=>({diseaseId:A,dataValues:i.forecasts.flatMap($=>C.map(F=>({orgUnit:$.orgUnit,value:y(F.q,$.values),displayName:$.orgUnit,dataElement:F.name,period:$.period})))}),{dataElements:S}=D0("CHAP_LOW"),{dataElements:k}=D0("CHAP_MEDIAN"),{dataElements:x}=D0("CHAP_HIGH"),A=b(),{displayName:D}=hU(A),{orgUnits:w,loading:I}=A3(),[N,q]=Be.useState("initial"),[Y,X]=Be.useState("");Be.useEffect(()=>{w&&j()},[(G=e==null?void 0:e.state)==null?void 0:G.data,w]);const B=()=>(S==null?void 0:S.length)===0||(k==null?void 0:k.length)===0||(x==null?void 0:x.length)===0,j=async $=>{q("initial")};Be.useEffect(()=>{D&&w&&i&&l(R(T()))},[D,w,i]),Be.useEffect(()=>{if(S&&k&&x&&D){const $=S.find(W=>W.code===`CHAP_LOW_${D.toLocaleUpperCase().replaceAll(" ","_")}`);$&&r($);const F=k.find(W=>W.code===`CHAP_MEDIAN_${D.toLocaleUpperCase().replaceAll(" ","_")}`);F&&m(F);const H=x.find(W=>W.code===`CHAP_HIGH_${D.toLocaleUpperCase().replaceAll(" ","_")}`);H&&v(H)}},[S,k,x,D]);const O=()=>!h&&!p&&!g?!1:!!(h&&!(h!=null&&h.displayName.includes(D))||p&&!(p!=null&&p.displayName.includes(D))||g&&!(g!=null&&g.displayName.includes(D))),R=$=>({dataValues:$.dataValues.map(F=>{var H;return{...F,displayName:(H=w==null?void 0:w.organisationUnits.find(W=>W.id===F.orgUnit))==null?void 0:H.displayName}}),diseaseId:$.diseaseId}),L=()=>!!(h&&p&&g);return se.jsx("div",{className:ec.container,children:se.jsxs("div",{className:ec.innerContainer,children:[I&&se.jsx("p",{children:"Loading metadata from DHIS2.. "}),se.jsxs("h1",{children:["Prediction: ",i.name]}),a&&se.jsxs(se.Fragment,{children:[se.jsxs(Db,{scrollable:!0,children:[se.jsx(ed,{selected:t==="chart",onClick:()=>s("chart"),children:"Chart"}),se.jsx(ed,{selected:t==="table",onClick:()=>s("table"),children:"Table"})]}),se.jsx("div",{className:ec.prediction,children:{chart:se.jsx(d8,{predictionTargetName:D,data:a}),table:se.jsx(E7,{data:a}),map:se.jsx(se.Fragment,{})}[t]}),se.jsx("h3",{children:Je.t("Select which data element prediction should be imported to:")}),se.jsx(oU,{warning:B(),predictionTarget:D}),se.jsx(M0,{label:Je.t("Select data element for low quantile"),dataElements:S,onChange:r,value:h}),se.jsx(M0,{label:Je.t("Select data element for median quantile"),dataElements:k,onChange:m,value:p}),se.jsx(M0,{label:Je.t("Select data element for high quantile"),dataElements:x,onChange:v,value:g}),O()&&se.jsx("p",{className:ec.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),se.jsx("div",{className:ec.footer,children:se.jsx(Wr,{onClick:()=>q("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!L(),icon:se.jsx(Cy,{}),primary:!0,children:Je.t("Import prediction")})}),N==="loading"&&se.jsx(QF,{setPostHttpError:X,setPostStatus:q,prediction:a,qLowDataElementId:h==null?void 0:h.id,qMedianDataElementId:p==null?void 0:p.id,qHighDataElementId:g==null?void 0:g.id}),se.jsxs("div",{className:ec.post,children:[N==="finish"&&se.jsx("p",{className:ec.greenText,children:Je.t("Prediction has been imported.")}),se.jsx("p",{className:ec.redText,children:Je.t(Y)})]})]})]})})},dU=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[s,a]=Be.useState(),l=async h=>{await to.getPredictionCrudPredictionsPredictionIdGet(h).then(r=>{a(r)})};return Be.useEffect(()=>{t&&l(Number(t))},[]),se.jsx("div",{children:i&&se.jsx(se.Fragment,{children:se.jsx(Ch,{className:$F.modal,onClose:()=>{e(!1)},children:se.jsx(se.Fragment,{children:s&&se.jsx(uU,{prediction_unprocessed:s})})})})})},pU="_jobResultPanelContainer_8nqrq_1",fU="_boxPanel_8nqrq_9",mU="_flexMedium_8nqrq_17",gU="_flexItemRight_8nqrq_21",yU="_inProgress_8nqrq_29",xU="_notStarted_8nqrq_34",vU="_completed_8nqrq_39",bU="_failed_8nqrq_44",_U="_resultTextHeader_8nqrq_49",wU="_evaluationModal_8nqrq_56",TU="_jobLogsModal_8nqrq_61",CU="_popupMenuDiv_8nqrq_66",lo={jobResultPanelContainer:pU,boxPanel:fU,flexMedium:mU,flexItemRight:gU,inProgress:yU,notStarted:xU,completed:vU,failed:bU,resultTextHeader:_U,evaluationModal:wU,jobLogsModal:TU,popupMenuDiv:CU},EU=(i,e)=>{Be.useEffect(()=>{const t=s=>{const a=i.current;!a||a.contains(s.target)||e(s)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},SU=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:s,onClickImport:a,onClickViewLogs:l,onClickRemove:h})=>{const[r,p]=Be.useState(!1),m=Be.useRef(null),g=Be.useRef(null);EU(g,C=>{var b;(b=m.current)!=null&&b.contains(C.target)||p(!1)});const v=C=>{switch(C){case"STARTED":return lo.inProgress;case"PENDING":return lo.notStarted;case"FAILURE":return lo.failed;default:return lo.completed}},y=C=>{switch(C){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return se.jsx("div",{className:lo.boxPanel,children:se.jsxs("div",{className:lo.jobResultPanelContainer,children:[se.jsx("div",{className:lo.flexMedium,children:e.name}),se.jsx("div",{className:lo.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),se.jsx("div",{className:lo.flexMedium,children:se.jsx("span",{className:v(e.status),children:y(e.status)})}),se.jsxs("div",{className:lo.flexItemRight,children:[{prediction:se.jsx(se.Fragment,{children:e.status=="SUCCESS"&&se.jsx(Wr,{icon:se.jsx(ET,{}),onClick:()=>a(e.result),small:!0,children:"Import"})}),dataset:se.jsx(se.Fragment,{children:e.status=="SUCCESS"&&se.jsx(Wr,{icon:se.jsx(ST,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:se.jsx(se.Fragment,{children:e.status=="SUCCESS"&&se.jsx(Wr,{icon:se.jsx(AT,{}),onClick:()=>s(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&se.jsx(Wr,{icon:se.jsx(mT,{}),onClick:()=>l(e.id),small:!0,children:"Logs"}),se.jsx("div",{ref:m,children:se.jsx(P8,{enabled:e.status==="STARTED",content:Je.t("Job is still running. Please wait until it is finished before doing any actions."),children:se.jsx(Wr,{small:!0,icon:se.jsx(Uv,{}),disabled:e.status==="STARTED",onClick:()=>p(C=>!C)})})}),r&&se.jsx(Cf,{reference:m,placement:"top-end",children:se.jsx("div",{ref:g,className:lo.popupMenuDiv,children:se.jsx(zv,{children:["SUCCESS","FAILURE"].includes(e.status)&&se.jsx($u,{label:"Delete",icon:se.jsx(wT,{}),destructive:!0,onClick:()=>{p(!1),h(e)}})})})})]})]})},i)},kU="_jobLogs_pzpzf_1",AU="_logContent_pzpzf_7",L0={jobLogs:kU,logContent:AU},M3=(i,e)=>{const t=Be.useRef(),s=Be.useRef(null),a=()=>{s.current===null&&document.visibilityState==="visible"&&(s.current=setInterval(()=>{t.current&&t.current()},e))},l=()=>{s.current!==null&&(clearInterval(s.current),s.current=null)};Be.useEffect(()=>{t.current=i},[i]),Be.useEffect(()=>{const h=()=>{document.visibilityState==="visible"?a():l()};return document.addEventListener("visibilitychange",h),document.visibilityState==="visible"&&a(),()=>{l(),document.removeEventListener("visibilitychange",h)}},[e])},MU=({jobId:i})=>{const[e,t]=Be.useState(null),[s,a]=Be.useState(null),[l,h]=Be.useState(!1),r=Be.useRef(null),p=async()=>{if(i){console.log("fetching logs");try{const m=await Kb.getLogsJobsJobIdLogsGet(i);t(m)}catch(m){a(m.body.detail)}finally{h(!1)}}};return Be.useEffect(()=>{h(!0),a(null),p()},[i]),Be.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),M3(p,5e3),i?l?se.jsx("p",{children:"Loading logs..."}):s?se.jsxs("p",{className:L0.error,children:["Error: ",s]}):se.jsxs("div",{className:L0.jobLogs,children:[se.jsx("h2",{children:"Job Logs"}),se.jsx("pre",{className:L0.logContent,ref:r,children:e||"<No logs reported for this job>"})]}):se.jsx("p",{children:"No job ID provided."})},PU="_drawerWrapper_l3raf_1",IU={drawerWrapper:PU},DU="_formWrapper_13v73_1",LU="_newEvaluationTitle_13v73_8",RU="_buttons_13v73_15",zU="_navFooterOuter_13v73_20",NU="_navFooter_13v73_20",R0={formWrapper:DU,newEvaluationTitle:LU,buttons:RU,navFooterOuter:zU,navFooter:NU},Gp=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}},OU="_datasetDetailsWrapper_dewdk_1",jU="_datasetDetailsRow_dewdk_7",BU="_label_dewdk_13",oh={datasetDetailsWrapper:OU,datasetDetailsRow:jU,label:BU},FU=({datasetId:i})=>{var p;const[e,t]=Be.useState(null),[s,a]=Be.useState(""),[l,h]=Be.useState(!0);Be.useState([]);const r=m=>{const g=m.observations.map(k=>k.period),v=Array.from(new Set(g)).sort(),y=v[0],C=v[v.length-1],T=Array.from(new Set(g)).length,S=Array.from(new Set(m.observations.map(k=>k.featureName).filter(k=>k!=="disease_cases")));return{name:m.name,created:m.created,startPeriod:y,endPeriod:C,orgUnitCount:T,covariates:S}};return Be.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const g=await to.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",g);const v=r(g);t(v)}catch(g){a(g)}finally{h(!1)}})()},[i]),l?se.jsxs("div",{className:oh.datasetLoader,children:[se.jsx(Yo,{}),se.jsx("span",{children:"Loading dataset"})]}):s?se.jsxs("p",{children:["Error: ",s]}):se.jsxs(se.Fragment,{children:[se.jsx("h3",{children:"Evaluation Dataset"}),se.jsx(_y,{children:se.jsxs("div",{className:oh.datasetDetailsWrapper,children:[se.jsxs("div",{children:[se.jsx("span",{className:oh.label,children:"Name: "}),se.jsx("span",{children:e.name})]}),se.jsxs("div",{children:[se.jsx("span",{className:oh.label,children:"Org Units: "}),se.jsx("span",{children:e.orgUnitCount})]}),se.jsxs("div",{children:[se.jsx("span",{className:oh.label,children:"Time period: "}),se.jsxs("span",{children:[Gp(e.startPeriod)," to ",Gp(e.endPeriod)]})]}),se.jsxs("div",{children:[se.jsx("span",{className:oh.label,children:"Covariates: "}),se.jsx("span",{children:((p=e==null?void 0:e.covariates)==null?void 0:p.join(", "))||"None"})]}),se.jsxs("div",{children:[se.jsx("span",{className:oh.label,children:"Created: "}),se.jsx("span",{children:e.created})]})]})})]})},UU="_modelDetailsContainer_mnj31_1",$U="_loadingText_mnj31_5",VU="_selectedModelDetails_mnj31_10",GU="_modelAuthor_mnj31_17",HU="_modelAuthorLogo_mnj31_25",WU="_modelAuthorName_mnj31_32",qU="_modelHumanName_mnj31_36",YU="_modelEmail_mnj31_42",ZU="_modelDescription_mnj31_47",XU="_modelDescriptionText_mnj31_52",KU="_modelCovariates_mnj31_57",QU="_modelCovariatesList_mnj31_62",JU="_modelCovariateItem_mnj31_71",e$="_modelCitation_mnj31_75",t$="_modelCitationText_mnj31_80",i$="_modelLink_mnj31_86",aa={modelDetailsContainer:UU,loadingText:$U,selectedModelDetails:VU,modelAuthor:GU,modelAuthorLogo:HU,modelAuthorName:WU,modelHumanName:qU,modelEmail:YU,modelDescription:ZU,modelDescriptionText:XU,modelCovariates:KU,modelCovariatesList:QU,modelCovariateItem:JU,modelCitation:e$,modelCitationText:t$,modelLink:i$},r$=({selectedModel:i,onChangeModel:e})=>se.jsx("div",{className:aa.modelDetailsContainer,children:se.jsxs("div",{className:aa.selectedModelDetails,children:[se.jsx("h3",{className:aa.modelHumanName,children:i.displayName}),se.jsxs("div",{className:aa.modelAuthor,children:[se.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:aa.modelAuthorLogo}),se.jsxs("span",{className:aa.modelAuthorName,children:[i.author," - ",i.organization]})]}),se.jsxs("p",{className:aa.modelDescription,children:[se.jsx("div",{children:"Description:"}),se.jsx("div",{className:aa.modelDescriptionText,children:i.description||"Coming soon..."})]}),se.jsxs("div",{className:aa.modelCovariates,children:[se.jsx("span",{children:"Model inputs:"}),se.jsx("ul",{className:aa.modelCovariatesList,children:i.covariates.map((t,s)=>se.jsxs("li",{className:aa.modelCovariateItem,children:[" ",t.name]},s))})]}),se.jsxs("div",{className:aa.modelCitation,children:[se.jsx("span",{children:"Attribution:"}),se.jsx("pre",{className:aa.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),se.jsxs("p",{className:aa.modelLink,children:["External link: ",se.jsx("a",{href:i.sourceUrl||"",target:"_blank",children:i.sourceUrl||"http://example.com"})]}),se.jsxs("p",{className:aa.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&se.jsx("div",{children:se.jsx(Wr,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),n$="_modelSelectContainer_1u7s7_1",s$="_loadingText_1u7s7_5",a$="_modelGrid_1u7s7_10",o$="_modelCard_1u7s7_17",l$="_selectedModelCard_1u7s7_31",c$="_selectedModelDetails_1u7s7_35",h$="_modelAuthor_1u7s7_42",u$="_modelAuthorLogo_1u7s7_50",d$="_modelAuthorName_1u7s7_57",p$="_modelHumanName_1u7s7_61",f$="_modelEmail_1u7s7_67",m$="_modelDescription_1u7s7_72",g$="_modelDescriptionText_1u7s7_77",y$="_modelCovariates_1u7s7_82",x$="_modelCovariatesList_1u7s7_87",v$="_modelCovariateItem_1u7s7_96",b$="_modelCitation_1u7s7_100",_$="_modelCitationText_1u7s7_105",w$="_modelLink_1u7s7_111",Po={modelSelectContainer:n$,loadingText:s$,modelGrid:a$,modelCard:o$,selectedModelCard:l$,selectedModelDetails:c$,modelAuthor:h$,modelAuthorLogo:u$,modelAuthorName:d$,modelHumanName:p$,modelEmail:f$,modelDescription:m$,modelDescriptionText:g$,modelCovariates:y$,modelCovariatesList:x$,modelCovariateItem:v$,modelCitation:b$,modelCitationText:_$,modelLink:w$},F2={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},P3=({selectedModel:i,setSelectedModel:e})=>{const[t,s]=Be.useState([]),[a,l]=Be.useState(!0),[h,r]=Be.useState(!0),p=async()=>{await to.listModelsCrudModelsGet().then(g=>{let v=g.map(y=>(y.covariates=y.covariates.concat(y.target),y));l(!1),s(v)}).catch(g=>{s([F2]),e(F2),l(!1)})},m=g=>{e(g),r(!1)};return Be.useEffect(()=>{p()},[]),se.jsx("div",{className:Po.modelSelectContainer,children:a?se.jsx("p",{children:"Loading models..."}):se.jsxs(se.Fragment,{children:[se.jsx("h3",{children:"Prediction Model"}),!h&&i&&se.jsx("div",{children:se.jsx(r$,{selectedModel:i,onChangeModel:()=>r(!0)})}),h&&se.jsx("div",{children:se.jsx("div",{className:Po.modelGrid,children:t.map(g=>se.jsxs("div",{className:`${Po.modelCard} ${(i==null?void 0:i.name)===g.name?Po.selectedModelCard:""}`,children:[se.jsx("h3",{className:Po.modelHumanName,children:g.displayName}),se.jsxs("div",{className:Po.modelAuthor,children:[se.jsx("img",{src:g.organizationLogoUrl||"/default-model-logo.png",alt:g.name+" logo",className:Po.modelAuthorLogo}),se.jsxs("span",{className:Po.modelAuthorName,children:[g.author," - ",g.organization]})]}),se.jsx("ul",{className:Po.modelCovariatesList,children:g.covariates.map((v,y)=>se.jsxs("li",{className:Po.modelCovariateItem,children:[" ",v.name]},y))}),se.jsx(Wr,{onClick:()=>m(g),primary:!0,children:(i==null?void 0:i.name)===g.name?"Selected":"Select Model"})]},g.name))})})]})})},T$=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const[t,s]=Be.useState(""),[a,l]=Be.useState(void 0),h=t&&e&&a,r=()=>{if(console.log("should evaluate",t,e,a),h)try{const p=Go.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:t,datasetId:e,modelId:a.name});console.log("evaluate response",p)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return se.jsx(se.Fragment,{children:se.jsxs("div",{className:R0.formWrapper,children:[se.jsxs("div",{className:R0.newEvaluationTitle,children:[se.jsx("h2",{children:"New model evaluation"}),se.jsx(Wr,{icon:se.jsx(Nv,{}),onClick:i})]}),se.jsx(Ef,{autoComplete:"",label:"Evaluation name",value:t,onChange:p=>s(p.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),se.jsx(FU,{datasetId:e}),se.jsx(P3,{selectedModel:a,setSelectedModel:l}),se.jsx("div",{className:R0.buttons,children:se.jsx(Wr,{primary:!0,icon:se.jsx(Cy,{}),onClick:r,disabled:!h,children:"Evaluate"})})]})})},C$=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const s=window.innerWidth<900?"100vw":"1000px";return se.jsx("div",{children:se.jsx(Gb,{open:i,onClose:()=>e(!1),direction:"right",size:s,children:se.jsx("div",{className:IU.drawerWrapper,children:se.jsx(T$,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},E$=({evaluationId:i})=>{const[e,t]=Be.useState(""),[s,a]=Be.useState([]),[l,h]=Be.useState(),[r,p]=Be.useState(),[m,g]=Be.useState(""),[v,y]=Be.useState(""),[C,b]=Be.useState(!1),{orgUnits:T,error:S,loading:k}=A3();Be.useEffect(()=>{if(T&&r){const w=jS(r.predictions,r.actualCases.data,"");w.forEach(I=>{I.evaluation.forEach(N=>{const q=T==null?void 0:T.organisationUnits.find(Y=>Y.id===N.orgUnitId);q&&(N.orgUnitName=q.displayName)})}),h(w),a(BS(r.predictions))}},[T,r]);const x=async w=>(await to.getBacktestsCrudBacktestsGet()).find(N=>N.id===Number(w)),A=async w=>(await to.listModelsCrudModelsGet()).find(N=>N.name===w),D=async()=>{b(!0);const w=[.1,.25,.5,.75,.9];try{const[I,N,q]=await Promise.all([x(i),Go.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,w),Go.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!I)throw new Error("Evaluation info not found");g(I.name??"");const Y=await A(I.modelId);y((Y==null?void 0:Y.displayName)??""),p({predictions:N,actualCases:q})}catch(I){t(I.toString())}finally{b(!1)}};return Be.useEffect(()=>{D()},[]),se.jsxs("div",{children:[e&&se.jsx("p",{children:"Not available"}),C&&se.jsx("p",{children:"Loading.."}),l&&se.jsx(y7,{evaluationName:m,modelName:v,evaluations:l,splitPeriods:s})]})},S$=({jobResults:i})=>{const[e,t]=Be.useState(!1),[s,a]=Be.useState(void 0),[l,h]=Be.useState(!1),[r,p]=Be.useState(!1),[m,g]=Be.useState(void 0),[v,y]=Be.useState(void 0),[C,b]=Be.useState(!1),[T,S]=Be.useState(void 0),k=I=>{t(!0),a(I)},x=I=>{p(!0),g(I)},A=I=>{b(!0),S(I)},D=I=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");let q=I.result;if(q)I.type=="dataset"?to.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(q)):I.type=="evaluation"?to.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(q)):I.type=="prediction"&&to.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(q));else{let Y=I.id;Kb.deleteJobJobsJobIdDelete(Y)}}},w=I=>{console.log("clicked evaluate dataset id",I),y(I),h(!0)};return se.jsxs(se.Fragment,{children:[i.map((I,N)=>se.jsx(SU,{i:N,jobResult:I,onClickEvaluateDataset:w,onClickViewEvaluation:x,onClickImport:k,onClickRemove:D,onClickViewLogs:A},N)),e&&se.jsx(dU,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:s}),se.jsx(C$,{isOpen:l,setIsOpen:h,datasetIdToEvaluate:v}),r&&m&&se.jsx(Ch,{className:nc.evaluationModal,onClose:()=>{p(!1)},children:se.jsx(E$,{evaluationId:m})}),C&&se.jsx(Ch,{className:nc.jobLogsModal,onClose:()=>{b(!1)},children:se.jsx(MU,{jobId:T})})]})},k$=()=>se.jsx("div",{children:se.jsxs("div",{className:[nc.jobResultPanelContainer,nc.resultTextHeader].join(" "),children:[se.jsx("div",{className:nc.flexMedium,children:"Name:"}),se.jsx("div",{className:nc.flexMedium,children:"Created:"}),se.jsx("div",{className:nc.flexMedium,children:"Status:"}),se.jsx("div",{className:nc.flexItemRight})]})}),A$="_noticeBox_18bg1_1",M$="_details_18bg1_8",P$="_button_18bg1_14",z0={noticeBox:A$,details:M$,button:P$},U2=({error:i,type:e})=>{const[t,s]=Be.useState(!1);return i==null?se.jsx(se.Fragment,{}):se.jsx("div",{children:se.jsxs(Fo,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:z0.noticeBox,children:[se.jsx("div",{className:z0.button,children:se.jsx(Wr,{small:!0,onClick:()=>s(!t),children:t?"Hide details":"See details"})}),t&&se.jsx("div",{className:z0.details,children:se.jsx("div",{children:i})})]})})},I$="_loaderWrapper_iu471_1",D$="_textLoad_iu471_8",L$="_loader_iu471_1",N0={loaderWrapper:I$,textLoad:D$,loader:L$},R$=({type:i})=>se.jsxs(se.Fragment,{children:[se.jsx("div",{className:N0.loaderWrapper,children:se.jsx("div",{className:N0.loader,children:se.jsx(Yo,{})})}),se.jsx("p",{className:N0.textLoad,children:se.jsxs("i",{children:["Loading ",i]})})]}),z$="_text_3x5i9_1",N$={text:z$},O$=({type:i})=>se.jsxs("div",{className:N$.text,children:["No ",i," found"]}),Ev=({type:i})=>{const[e,t]=Be.useState([]),[s,a]=Be.useState([]),[l,h]=Be.useState([]),[r,p]=Be.useState([]),[m,g]=Be.useState([]),[v,y]=Be.useState(),[C,b]=Be.useState(),[T,S]=Be.useState(!0),k=async I=>{for(let N=0;N<5;N++)try{const q=await I;return b(void 0),q}catch(q){if(N===4)return b((q==null?void 0:q.message)??`Couldn't fetch ${i}`),[]}},x=()=>{switch(i){case"predictions":return k(to.getPredictionsCrudPredictionsGet()).then(I=>a(I));case"datasets":return k(to.getDatasetsCrudDatasetsGet()).then(I=>h(I));case"evaluations":return k(to.getBacktestsCrudBacktestsGet()).then(I=>p(I))}},A=async()=>{let I=[];for(let N=0;N<6;N++)try{I=await Kb.listJobsJobsGet();break}catch(q){if(N===2)return y((q==null?void 0:q.message)??"Couldn't fetch jobs"),[]}return y(void 0),I},D=()=>{const I=[];l.filter(Y=>Y.type=="evaluation").forEach(Y=>{I.push({id:"Unknown",name:Y.name,created:new Date(Y.created??""),type:"dataset",status:"SUCCESS",result:Y.id.toString()})}),r.forEach(Y=>{I.push({id:"Unknown",name:Y.name??"",created:new Date(Y.created??""),type:"evaluation",status:"SUCCESS",result:Y.id.toString()})}),s.forEach(Y=>{I.push({id:"Unknown",name:Y.name,created:new Date(Y.created),type:"prediction",status:"SUCCESS",result:Y.id.toString(),datasetId:Y.datasetId,estimatorId:Y.modelId,nPeriods:Y.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},q={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Y=>Y.status!="SUCCESS"&&Y.type==N[i]).forEach(Y=>{I.push({id:Y.id,name:Y.name,created:new Date(Y.start_time),type:q[i],status:Y.status})}),I.sort((Y,X)=>X.created.getTime()-Y.created.getTime()),I},w=async()=>{await x();const I=await A();t(I),S(!1)};return Be.useEffect(()=>{w()},[]),M3(w,5e3),Be.useEffect(()=>{g(D())},[e,s,r,l]),se.jsxs("div",{children:[se.jsx(U2,{error:v,type:"jobs"}),se.jsx(U2,{error:C,type:i}),T&&se.jsx(R$,{type:i}),m.length>0&&se.jsx(k$,{}),m.length==0&&!T&&se.jsx(O$,{type:i}),se.jsx(S$,{jobResults:m})]})},j$=()=>{const[i,e]=Be.useState(!1),t=()=>{e(!1)};return se.jsxs("div",{children:[se.jsx(ay,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),se.jsx(Ev,{type:"datasets"}),se.jsx(kF,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),se.jsx(ay,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),se.jsx(Ev,{type:"evaluations"})]})},B$=()=>se.jsx(j$,{}),F$="_drawerWrapper_g5ang_1",U$={drawerWrapper:F$},$$="_formWrapper_1wb8p_1",V$="_newPredictionForm_1wb8p_8",G$="_newPredictionTitle_1wb8p_12",O0={formWrapper:$$,newPredictionForm:V$,newPredictionTitle:G$},H$=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,s]=Be.useState([]),[a,l]=Be.useState([]),[h,r]=Be.useState([]),[p,m]=Be.useState(void 0),[g,v]=Be.useState(""),[y,C]=Be.useState(void 0);return Be.useEffect(()=>{if(y==null)return;const b=y.covariates.map(T=>({feature:T.name,origin:"dataItem",dataSource:""}));s(b)},[y]),se.jsx(se.Fragment,{children:se.jsxs("div",{className:O0.newPredictionForm,children:[se.jsxs("div",{className:O0.newPredictionTitle,children:[se.jsx("h2",{children:"New prediction"}),se.jsx(Wr,{icon:se.jsx(Nv,{}),onClick:i})]}),se.jsxs("div",{className:O0.formWrapper,children:[se.jsx(Ef,{autoComplete:"",label:"Name of prediction",value:g,onChange:b=>v(b.value),placeholder:Je.t("Prediction for Northern Province")}),se.jsx(P3,{selectedModel:y,setSelectedModel:C}),se.jsx(k3,{setDataLayers:s,datasetLayers:t,predictMode:!0}),se.jsx(fS,{setTimePeriods:r}),se.jsx(mS,{orgUnits:a,setOrgUnits:l,orgUnitLevel:p,setOrgUnitLevel:m}),se.jsx(S3,{onDrawerSubmit:e,selectedModel:y,name:g,dataLayers:t,onSendAction:"predict",orgUnitLevel:p,selectedPeriodItems:h,selectedOrgUnits:a})]})]})})},W$=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const s=window.innerWidth<900?"100vw":"1000px";return se.jsx("div",{children:se.jsx(Gb,{open:e,onClose:i,direction:"right",size:s,children:se.jsx("div",{className:U$.drawerWrapper,children:se.jsx(H$,{onDrawerClose:i,onDrawerSubmit:t})})})})},q$=()=>{const[i,e]=Be.useState(!1),[t,s]=Be.useState(!1),a=()=>{s(!1),e(!1)};return Be.useEffect(()=>{s(!0)},[t]),se.jsxs("div",{children:[se.jsx(ay,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),se.jsx(W$,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:a}),t&&se.jsx(Ev,{type:"predictions"})]})},Y$=({children:i})=>{const{baseUrl:e}=Ty(),[t,s]=Be.useState(!1);return Be.useEffect(()=>{Bi.WITH_CREDENTIALS=!0,Bi.BASE=e+"/api/routes/chap/run",s(!0)},[e]),t?se.jsx(se.Fragment,{children:i}):se.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:se.jsx(Yo,{})})},Z$="_settingsContainer_11gky_1",X$={settingsContainer:Z$},l1=({query:i,queryKey:e,...t})=>{const s=od();return cd({queryKey:e,queryFn:async()=>(await s.query({apiDataQuery:i})).apiDataQuery,...t})},K$={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},vd=()=>{const{data:i,error:e,isLoading:t,isError:s}=l1({queryKey:["routes","chap"],query:K$,select:a=>a.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:s}},Q$="_container_1o19c_1",J$="_header_1o19c_5",eV="_settingsContainer_1o19c_16",tV="_loaderContainer_1o19c_22",iV="_mutedText_1o19c_32",rV="_errorMessage_1o19c_37",nV="_routeInfo_1o19c_43",sV="_routeInfoHeader_1o19c_50",aV="_infoGrid_1o19c_64",oV="_label_1o19c_71",lV="_value_1o19c_76",cV="_authorities_1o19c_82",hV="_authority_1o19c_88",Cn={container:Q$,header:J$,settingsContainer:eV,loaderContainer:tV,mutedText:iV,errorMessage:rV,routeInfo:nV,routeInfoHeader:sV,infoGrid:aV,label:oV,value:lV,authorities:cV,authority:hV},uV="F_CHAP_MODELING_APP",I3=({onSuccess:i,onError:e}={})=>{const t=ad(),s=od(),{show:a}=Yp(Je.t("Error saving route"),{critical:!0}),{show:l}=Yp(Je.t("Route saved successfully"),{success:!0}),h=iE(async r=>{const{id:p,url:m}=r;if(p){const g=["routes","chap"],v=t.getQueryData(g);if(!v)throw new Error(`Route data not found in cache for key ${g}.`);const y=v.routes.find(b=>b.id===p);if(!y)throw new Error(`Route with id ${p} not found in cache for update.`);const C={resource:"routes",type:"update",id:p,data:{...y||{},url:m}};return s.mutate(C)}else{const g={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:m,authorities:[uV],headers:{"Content-Type":"application/json"}}};return s.mutate(g)}},{onSuccess:()=>{l(),t.invalidateQueries(["routes"]),i==null||i()},onError:r=>{a(),console.error("Error saving route:",r),e==null||e(r)}});return{saveRoute:h.mutate,isSaving:h.isLoading,error:h.error}};var Kf=i=>i.type==="checkbox",fh=i=>i instanceof Date,ca=i=>i==null;const D3=i=>typeof i=="object";var Xn=i=>!ca(i)&&!Array.isArray(i)&&D3(i)&&!fh(i),L3=i=>Xn(i)&&i.target?Kf(i.target)?i.target.checked:i.target.value:i,dV=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,R3=(i,e)=>i.has(dV(e)),pV=i=>{const e=i.constructor&&i.constructor.prototype;return Xn(e)&&e.hasOwnProperty("isPrototypeOf")},c1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ms(i){let e;const t=Array.isArray(i),s=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(c1&&(i instanceof Blob||s))&&(t||Xn(i)))if(e=t?[]:{},!t&&!pV(i))e=i;else for(const a in i)i.hasOwnProperty(a)&&(e[a]=Ms(i[a]));else return i;return e}var Jy=i=>Array.isArray(i)?i.filter(Boolean):[],qn=i=>i===void 0,mi=(i,e,t)=>{if(!e||!Xn(i))return t;const s=Jy(e.split(/[,[\].]+?/)).reduce((a,l)=>ca(a)?a:a[l],i);return qn(s)||s===i?qn(i[e])?t:i[e]:s},Ba=i=>typeof i=="boolean",h1=i=>/^\w*$/.test(i),z3=i=>Jy(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Hr=(i,e,t)=>{let s=-1;const a=h1(e)?[e]:z3(e),l=a.length,h=l-1;for(;++s<l;){const r=a[s];let p=t;if(s!==h){const m=i[r];p=Xn(m)||Array.isArray(m)?m:isNaN(+a[s+1])?{}:[]}if(r==="__proto__"||r==="constructor"||r==="prototype")return;i[r]=p,i=i[r]}};const oy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},uo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},fV=Te.createContext(null),u1=()=>Te.useContext(fV);var N3=(i,e,t,s=!0)=>{const a={defaultValues:e._defaultValues};for(const l in i)Object.defineProperty(a,l,{get:()=>{const h=l;return e._proxyFormState[h]!==uo.all&&(e._proxyFormState[h]=!s||uo.all),t&&(t[h]=!0),i[h]}});return a};const d1=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;function mV(i){const e=u1(),{control:t=e.control,disabled:s,name:a,exact:l}=i,[h,r]=Te.useState(t._formState),p=Te.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return d1(()=>t._subscribe({name:a,formState:p.current,exact:l,callback:m=>{!s&&r({...t._formState,...m})}}),[a,s,l]),Te.useEffect(()=>{p.current.isValid&&t._setValid(!0)},[t]),Te.useMemo(()=>N3(h,t,p.current,!1),[h,t])}var zo=i=>typeof i=="string",O3=(i,e,t,s,a)=>zo(i)?(s&&e.watch.add(i),mi(t,i,a)):Array.isArray(i)?i.map(l=>(s&&e.watch.add(l),mi(t,l))):(s&&(e.watchAll=!0),t);function gV(i){const e=u1(),{control:t=e.control,name:s,defaultValue:a,disabled:l,exact:h}=i,r=Te.useRef(a),[p,m]=Te.useState(t._getWatch(s,r.current));return d1(()=>t._subscribe({name:s,formState:{values:!0},exact:h,callback:g=>!l&&m(O3(s,t._names,g.values||t._formValues,!1,r.current))}),[s,t,l,h]),Te.useEffect(()=>t._removeUnmounted()),p}function yV(i){const e=u1(),{name:t,disabled:s,control:a=e.control,shouldUnregister:l}=i,h=R3(a._names.array,t),r=gV({control:a,name:t,defaultValue:mi(a._formValues,t,mi(a._defaultValues,t,i.defaultValue)),exact:!0}),p=mV({control:a,name:t,exact:!0}),m=Te.useRef(i),g=Te.useRef(a.register(t,{...i.rules,value:r,...Ba(i.disabled)?{disabled:i.disabled}:{}})),v=Te.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!mi(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!mi(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!mi(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!mi(p.validatingFields,t)},error:{enumerable:!0,get:()=>mi(p.errors,t)}}),[p,t]),y=Te.useCallback(S=>g.current.onChange({target:{value:L3(S),name:t},type:oy.CHANGE}),[t]),C=Te.useCallback(()=>g.current.onBlur({target:{value:mi(a._formValues,t),name:t},type:oy.BLUR}),[t,a._formValues]),b=Te.useCallback(S=>{const k=mi(a._fields,t);k&&S&&(k._f.ref=S)},[a._fields,t]),T=Te.useMemo(()=>({name:t,value:r,...Ba(s)||p.disabled?{disabled:p.disabled||s}:{},onChange:y,onBlur:C,ref:b}),[t,s,p.disabled,y,C,b,r]);return Te.useEffect(()=>{const S=a._options.shouldUnregister||l;a.register(t,{...m.current.rules,...Ba(m.current.disabled)?{disabled:m.current.disabled}:{}});const k=(x,A)=>{const D=mi(a._fields,x);D&&D._f&&(D._f.mount=A)};if(k(t,!0),S){const x=Ms(mi(a._options.defaultValues,t));Hr(a._defaultValues,t,x),qn(mi(a._formValues,t))&&Hr(a._formValues,t,x)}return!h&&a.register(t),()=>{(h?S&&!a._state.action:S)?a.unregister(t):k(t,!1)}},[t,a,h,l]),Te.useEffect(()=>{a._setDisabledField({disabled:s,name:t})},[s,t,a]),Te.useMemo(()=>({field:T,formState:p,fieldState:v}),[T,p,v])}const xV=i=>i.render(yV(i));var j3=(i,e,t,s,a)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[s]:a||!0}}:{},Hp=i=>Array.isArray(i)?i:[i],$2=()=>{let i=[];return{get observers(){return i},next:a=>{for(const l of i)l.next&&l.next(a)},subscribe:a=>(i.push(a),{unsubscribe:()=>{i=i.filter(l=>l!==a)}}),unsubscribe:()=>{i=[]}}},Sv=i=>ca(i)||!D3(i);function oc(i,e){if(Sv(i)||Sv(e))return i===e;if(fh(i)&&fh(e))return i.getTime()===e.getTime();const t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(const a of t){const l=i[a];if(!s.includes(a))return!1;if(a!=="ref"){const h=e[a];if(fh(l)&&fh(h)||Xn(l)&&Xn(h)||Array.isArray(l)&&Array.isArray(h)?!oc(l,h):l!==h)return!1}}return!0}var la=i=>Xn(i)&&!Object.keys(i).length,p1=i=>i.type==="file",po=i=>typeof i=="function",ly=i=>{if(!c1)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},B3=i=>i.type==="select-multiple",f1=i=>i.type==="radio",vV=i=>f1(i)||Kf(i),j0=i=>ly(i)&&i.isConnected;function bV(i,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)i=qn(i)?s++:i[e[s++]];return i}function _V(i){for(const e in i)if(i.hasOwnProperty(e)&&!qn(i[e]))return!1;return!0}function cs(i,e){const t=Array.isArray(e)?e:h1(e)?[e]:z3(e),s=t.length===1?i:bV(i,t),a=t.length-1,l=t[a];return s&&delete s[l],a!==0&&(Xn(s)&&la(s)||Array.isArray(s)&&_V(s))&&cs(i,t.slice(0,-1)),i}var F3=i=>{for(const e in i)if(po(i[e]))return!0;return!1};function cy(i,e={}){const t=Array.isArray(i);if(Xn(i)||t)for(const s in i)Array.isArray(i[s])||Xn(i[s])&&!F3(i[s])?(e[s]=Array.isArray(i[s])?[]:{},cy(i[s],e[s])):ca(i[s])||(e[s]=!0);return e}function U3(i,e,t){const s=Array.isArray(i);if(Xn(i)||s)for(const a in i)Array.isArray(i[a])||Xn(i[a])&&!F3(i[a])?qn(e)||Sv(t[a])?t[a]=Array.isArray(i[a])?cy(i[a],[]):{...cy(i[a])}:U3(i[a],ca(e)?{}:e[a],t[a]):t[a]=!oc(i[a],e[a]);return t}var Ap=(i,e)=>U3(i,e,cy(e));const V2={value:!1,isValid:!1},G2={value:!0,isValid:!0};var $3=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!qn(i[0].attributes.value)?qn(i[0].value)||i[0].value===""?G2:{value:i[0].value,isValid:!0}:G2:V2}return V2},V3=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>qn(i)?i:e?i===""?NaN:i&&+i:t&&zo(i)?new Date(i):s?s(i):i;const H2={isValid:!1,value:null};var G3=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,H2):H2;function W2(i){const e=i.ref;return p1(e)?e.files:f1(e)?G3(i.refs).value:B3(e)?[...e.selectedOptions].map(({value:t})=>t):Kf(e)?$3(i.refs).value:V3(qn(e.value)?i.ref.value:e.value,i)}var wV=(i,e,t,s)=>{const a={};for(const l of i){const h=mi(e,l);h&&Hr(a,l,h._f)}return{criteriaMode:t,names:[...i],fields:a,shouldUseNativeValidation:s}},hy=i=>i instanceof RegExp,Mp=i=>qn(i)?i:hy(i)?i.source:Xn(i)?hy(i.value)?i.value.source:i.value:i,q2=i=>({isOnSubmit:!i||i===uo.onSubmit,isOnBlur:i===uo.onBlur,isOnChange:i===uo.onChange,isOnAll:i===uo.all,isOnTouch:i===uo.onTouched});const Y2="AsyncFunction";var TV=i=>!!i&&!!i.validate&&!!(po(i.validate)&&i.validate.constructor.name===Y2||Xn(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===Y2)),CV=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),Z2=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(s=>i.startsWith(s)&&/^\.\w+/.test(i.slice(s.length))));const Wp=(i,e,t,s)=>{for(const a of t||Object.keys(i)){const l=mi(i,a);if(l){const{_f:h,...r}=l;if(h){if(h.refs&&h.refs[0]&&e(h.refs[0],a)&&!s)return!0;if(h.ref&&e(h.ref,h.name)&&!s)return!0;if(Wp(r,e))break}else if(Xn(r)&&Wp(r,e))break}}};function X2(i,e,t){const s=mi(i,t);if(s||h1(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),h=mi(e,l),r=mi(i,l);if(h&&!Array.isArray(h)&&t!==l)return{name:t};if(r&&r.type)return{name:l,error:r};a.pop()}return{name:t}}var EV=(i,e,t,s)=>{t(i);const{name:a,...l}=i;return la(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(h=>e[h]===(!s||uo.all))},SV=(i,e,t)=>!i||!e||i===e||Hp(i).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),kV=(i,e,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||i):(t?s.isOnBlur:a.isOnBlur)?!i:(t?s.isOnChange:a.isOnChange)?i:!0,AV=(i,e)=>!Jy(mi(i,e)).length&&cs(i,e),MV=(i,e,t)=>{const s=Hp(mi(i,t));return Hr(s,"root",e[t]),Hr(i,t,s),i},zg=i=>zo(i);function K2(i,e,t="validate"){if(zg(i)||Array.isArray(i)&&i.every(zg)||Ba(i)&&!i)return{type:t,message:zg(i)?i:"",ref:e}}var Ru=i=>Xn(i)&&!hy(i)?i:{value:i,message:""},Q2=async(i,e,t,s,a,l)=>{const{ref:h,refs:r,required:p,maxLength:m,minLength:g,min:v,max:y,pattern:C,validate:b,name:T,valueAsNumber:S,mount:k}=i._f,x=mi(t,T);if(!k||e.has(T))return{};const A=r?r[0]:h,D=j=>{a&&A.reportValidity&&(A.setCustomValidity(Ba(j)?"":j||""),A.reportValidity())},w={},I=f1(h),N=Kf(h),q=I||N,Y=(S||p1(h))&&qn(h.value)&&qn(x)||ly(h)&&h.value===""||x===""||Array.isArray(x)&&!x.length,X=j3.bind(null,T,s,w),B=(j,O,R,L=xl.maxLength,G=xl.minLength)=>{const $=j?O:R;w[T]={type:j?L:G,message:$,ref:h,...X(j?L:G,$)}};if(l?!Array.isArray(x)||!x.length:p&&(!q&&(Y||ca(x))||Ba(x)&&!x||N&&!$3(r).isValid||I&&!G3(r).isValid)){const{value:j,message:O}=zg(p)?{value:!!p,message:p}:Ru(p);if(j&&(w[T]={type:xl.required,message:O,ref:A,...X(xl.required,O)},!s))return D(O),w}if(!Y&&(!ca(v)||!ca(y))){let j,O;const R=Ru(y),L=Ru(v);if(!ca(x)&&!isNaN(x)){const G=h.valueAsNumber||x&&+x;ca(R.value)||(j=G>R.value),ca(L.value)||(O=G<L.value)}else{const G=h.valueAsDate||new Date(x),$=W=>new Date(new Date().toDateString()+" "+W),F=h.type=="time",H=h.type=="week";zo(R.value)&&x&&(j=F?$(x)>$(R.value):H?x>R.value:G>new Date(R.value)),zo(L.value)&&x&&(O=F?$(x)<$(L.value):H?x<L.value:G<new Date(L.value))}if((j||O)&&(B(!!j,R.message,L.message,xl.max,xl.min),!s))return D(w[T].message),w}if((m||g)&&!Y&&(zo(x)||l&&Array.isArray(x))){const j=Ru(m),O=Ru(g),R=!ca(j.value)&&x.length>+j.value,L=!ca(O.value)&&x.length<+O.value;if((R||L)&&(B(R,j.message,O.message),!s))return D(w[T].message),w}if(C&&!Y&&zo(x)){const{value:j,message:O}=Ru(C);if(hy(j)&&!x.match(j)&&(w[T]={type:xl.pattern,message:O,ref:h,...X(xl.pattern,O)},!s))return D(O),w}if(b){if(po(b)){const j=await b(x,t),O=K2(j,A);if(O&&(w[T]={...O,...X(xl.validate,O.message)},!s))return D(O.message),w}else if(Xn(b)){let j={};for(const O in b){if(!la(j)&&!s)break;const R=K2(await b[O](x,t),A,O);R&&(j={...R,...X(O,R.message)},D(R.message),s&&(w[T]=j))}if(!la(j)&&(w[T]={ref:A,...j},!s))return w}}return D(!0),w};const PV={mode:uo.onSubmit,reValidateMode:uo.onChange,shouldFocusError:!0};function IV(i={}){let e={...PV,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:po(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const s={};let a=Xn(e.defaultValues)||Xn(e.values)?Ms(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Ms(a),h={action:!1,mount:!1,watch:!1},r={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,m=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const y={array:$2(),state:$2()},C=q2(e.mode),b=q2(e.reValidateMode),T=e.criteriaMode===uo.all,S=Ae=>xe=>{clearTimeout(m),m=setTimeout(Ae,xe)},k=async Ae=>{if(!e.disabled&&(g.isValid||v.isValid||Ae)){const xe=e.resolver?la((await Y()).errors):await B(s,!0);xe!==t.isValid&&y.state.next({isValid:xe})}},x=(Ae,xe)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((Ae||Array.from(r.mount)).forEach(me=>{me&&(xe?Hr(t.validatingFields,me,xe):cs(t.validatingFields,me))}),y.state.next({validatingFields:t.validatingFields,isValidating:!la(t.validatingFields)}))},A=(Ae,xe=[],me,Me,De=!0,Pe=!0)=>{if(Me&&me&&!e.disabled){if(h.action=!0,Pe&&Array.isArray(mi(s,Ae))){const je=me(mi(s,Ae),Me.argA,Me.argB);De&&Hr(s,Ae,je)}if(Pe&&Array.isArray(mi(t.errors,Ae))){const je=me(mi(t.errors,Ae),Me.argA,Me.argB);De&&Hr(t.errors,Ae,je),AV(t.errors,Ae)}if((g.touchedFields||v.touchedFields)&&Pe&&Array.isArray(mi(t.touchedFields,Ae))){const je=me(mi(t.touchedFields,Ae),Me.argA,Me.argB);De&&Hr(t.touchedFields,Ae,je)}(g.dirtyFields||v.dirtyFields)&&(t.dirtyFields=Ap(a,l)),y.state.next({name:Ae,isDirty:O(Ae,xe),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Hr(l,Ae,xe)},D=(Ae,xe)=>{Hr(t.errors,Ae,xe),y.state.next({errors:t.errors})},w=Ae=>{t.errors=Ae,y.state.next({errors:t.errors,isValid:!1})},I=(Ae,xe,me,Me)=>{const De=mi(s,Ae);if(De){const Pe=mi(l,Ae,qn(me)?mi(a,Ae):me);qn(Pe)||Me&&Me.defaultChecked||xe?Hr(l,Ae,xe?Pe:W2(De._f)):G(Ae,Pe),h.mount&&k()}},N=(Ae,xe,me,Me,De)=>{let Pe=!1,je=!1;const Xe={name:Ae};if(!e.disabled){if(!me||Me){(g.isDirty||v.isDirty)&&(je=t.isDirty,t.isDirty=Xe.isDirty=O(),Pe=je!==Xe.isDirty);const tt=oc(mi(a,Ae),xe);je=!!mi(t.dirtyFields,Ae),tt?cs(t.dirtyFields,Ae):Hr(t.dirtyFields,Ae,!0),Xe.dirtyFields=t.dirtyFields,Pe=Pe||(g.dirtyFields||v.dirtyFields)&&je!==!tt}if(me){const tt=mi(t.touchedFields,Ae);tt||(Hr(t.touchedFields,Ae,me),Xe.touchedFields=t.touchedFields,Pe=Pe||(g.touchedFields||v.touchedFields)&&tt!==me)}Pe&&De&&y.state.next(Xe)}return Pe?Xe:{}},q=(Ae,xe,me,Me)=>{const De=mi(t.errors,Ae),Pe=(g.isValid||v.isValid)&&Ba(xe)&&t.isValid!==xe;if(e.delayError&&me?(p=S(()=>D(Ae,me)),p(e.delayError)):(clearTimeout(m),p=null,me?Hr(t.errors,Ae,me):cs(t.errors,Ae)),(me?!oc(De,me):De)||!la(Me)||Pe){const je={...Me,...Pe&&Ba(xe)?{isValid:xe}:{},errors:t.errors,name:Ae};t={...t,...je},y.state.next(je)}},Y=async Ae=>{x(Ae,!0);const xe=await e.resolver(l,e.context,wV(Ae||r.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return x(Ae),xe},X=async Ae=>{const{errors:xe}=await Y(Ae);if(Ae)for(const me of Ae){const Me=mi(xe,me);Me?Hr(t.errors,me,Me):cs(t.errors,me)}else t.errors=xe;return xe},B=async(Ae,xe,me={valid:!0})=>{for(const Me in Ae){const De=Ae[Me];if(De){const{_f:Pe,...je}=De;if(Pe){const Xe=r.array.has(Pe.name),tt=De._f&&TV(De._f);tt&&g.validatingFields&&x([Me],!0);const rt=await Q2(De,r.disabled,l,T,e.shouldUseNativeValidation&&!xe,Xe);if(tt&&g.validatingFields&&x([Me]),rt[Pe.name]&&(me.valid=!1,xe))break;!xe&&(mi(rt,Pe.name)?Xe?MV(t.errors,rt,Pe.name):Hr(t.errors,Pe.name,rt[Pe.name]):cs(t.errors,Pe.name))}!la(je)&&await B(je,xe,me)}}return me.valid},j=()=>{for(const Ae of r.unMount){const xe=mi(s,Ae);xe&&(xe._f.refs?xe._f.refs.every(me=>!j0(me)):!j0(xe._f.ref))&&Q(Ae)}r.unMount=new Set},O=(Ae,xe)=>!e.disabled&&(Ae&&xe&&Hr(l,Ae,xe),!oc(he(),a)),R=(Ae,xe,me)=>O3(Ae,r,{...h.mount?l:qn(xe)?a:zo(Ae)?{[Ae]:xe}:xe},me,xe),L=Ae=>Jy(mi(h.mount?l:a,Ae,e.shouldUnregister?mi(a,Ae,[]):[])),G=(Ae,xe,me={})=>{const Me=mi(s,Ae);let De=xe;if(Me){const Pe=Me._f;Pe&&(!Pe.disabled&&Hr(l,Ae,V3(xe,Pe)),De=ly(Pe.ref)&&ca(xe)?"":xe,B3(Pe.ref)?[...Pe.ref.options].forEach(je=>je.selected=De.includes(je.value)):Pe.refs?Kf(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach(je=>(!je.defaultChecked||!je.disabled)&&(je.checked=Array.isArray(De)?!!De.find(Xe=>Xe===je.value):De===je.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!De):Pe.refs.forEach(je=>je.checked=je.value===De):p1(Pe.ref)?Pe.ref.value="":(Pe.ref.value=De,Pe.ref.type||y.state.next({name:Ae,values:Ms(l)})))}(me.shouldDirty||me.shouldTouch)&&N(Ae,De,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&re(Ae)},$=(Ae,xe,me)=>{for(const Me in xe){const De=xe[Me],Pe=`${Ae}.${Me}`,je=mi(s,Pe);(r.array.has(Ae)||Xn(De)||je&&!je._f)&&!fh(De)?$(Pe,De,me):G(Pe,De,me)}},F=(Ae,xe,me={})=>{const Me=mi(s,Ae),De=r.array.has(Ae),Pe=Ms(xe);Hr(l,Ae,Pe),De?(y.array.next({name:Ae,values:Ms(l)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&me.shouldDirty&&y.state.next({name:Ae,dirtyFields:Ap(a,l),isDirty:O(Ae,Pe)})):Me&&!Me._f&&!ca(Pe)?$(Ae,Pe,me):G(Ae,Pe,me),Z2(Ae,r)&&y.state.next({...t}),y.state.next({name:h.mount?Ae:void 0,values:Ms(l)})},H=async Ae=>{h.mount=!0;const xe=Ae.target;let me=xe.name,Me=!0;const De=mi(s,me),Pe=je=>{Me=Number.isNaN(je)||fh(je)&&isNaN(je.getTime())||oc(je,mi(l,me,je))};if(De){let je,Xe;const tt=xe.type?W2(De._f):L3(Ae),rt=Ae.type===oy.BLUR||Ae.type===oy.FOCUS_OUT,dt=!CV(De._f)&&!e.resolver&&!mi(t.errors,me)&&!De._f.deps||kV(rt,mi(t.touchedFields,me),t.isSubmitted,b,C),gt=Z2(me,r,rt);Hr(l,me,tt),rt?(De._f.onBlur&&De._f.onBlur(Ae),p&&p(0)):De._f.onChange&&De._f.onChange(Ae);const wt=N(me,tt,rt),Rt=!la(wt)||gt;if(!rt&&y.state.next({name:me,type:Ae.type,values:Ms(l)}),dt)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?rt&&k():rt||k()),Rt&&y.state.next({name:me,...gt?{}:wt});if(!rt&&gt&&y.state.next({...t}),e.resolver){const{errors:ft}=await Y([me]);if(Pe(tt),Me){const Et=X2(t.errors,s,me),Tt=X2(ft,s,Et.name||me);je=Tt.error,me=Tt.name,Xe=la(ft)}}else x([me],!0),je=(await Q2(De,r.disabled,l,T,e.shouldUseNativeValidation))[me],x([me]),Pe(tt),Me&&(je?Xe=!1:(g.isValid||v.isValid)&&(Xe=await B(s,!0)));Me&&(De._f.deps&&re(De._f.deps),q(me,Xe,je,wt))}},W=(Ae,xe)=>{if(mi(t.errors,xe)&&Ae.focus)return Ae.focus(),1},re=async(Ae,xe={})=>{let me,Me;const De=Hp(Ae);if(e.resolver){const Pe=await X(qn(Ae)?Ae:De);me=la(Pe),Me=Ae?!De.some(je=>mi(Pe,je)):me}else Ae?(Me=(await Promise.all(De.map(async Pe=>{const je=mi(s,Pe);return await B(je&&je._f?{[Pe]:je}:je)}))).every(Boolean),!(!Me&&!t.isValid)&&k()):Me=me=await B(s);return y.state.next({...!zo(Ae)||(g.isValid||v.isValid)&&me!==t.isValid?{}:{name:Ae},...e.resolver||!Ae?{isValid:me}:{},errors:t.errors}),xe.shouldFocus&&!Me&&Wp(s,W,Ae?De:r.mount),Me},he=Ae=>{const xe={...h.mount?l:a};return qn(Ae)?xe:zo(Ae)?mi(xe,Ae):Ae.map(me=>mi(xe,me))},ie=(Ae,xe)=>({invalid:!!mi((xe||t).errors,Ae),isDirty:!!mi((xe||t).dirtyFields,Ae),error:mi((xe||t).errors,Ae),isValidating:!!mi(t.validatingFields,Ae),isTouched:!!mi((xe||t).touchedFields,Ae)}),ae=Ae=>{Ae&&Hp(Ae).forEach(xe=>cs(t.errors,xe)),y.state.next({errors:Ae?t.errors:{}})},Ce=(Ae,xe,me)=>{const Me=(mi(s,Ae,{_f:{}})._f||{}).ref,De=mi(t.errors,Ae)||{},{ref:Pe,message:je,type:Xe,...tt}=De;Hr(t.errors,Ae,{...tt,...xe,ref:Me}),y.state.next({name:Ae,errors:t.errors,isValid:!1}),me&&me.shouldFocus&&Me&&Me.focus&&Me.focus()},ge=(Ae,xe)=>po(Ae)?y.state.subscribe({next:me=>Ae(R(void 0,xe),me)}):R(Ae,xe,!0),ke=Ae=>y.state.subscribe({next:xe=>{SV(Ae.name,xe.name,Ae.exact)&&EV(xe,Ae.formState||g,Ie,Ae.reRenderRoot)&&Ae.callback({values:{...l},...t,...xe})}}).unsubscribe,K=Ae=>(h.mount=!0,v={...v,...Ae.formState},ke({...Ae,formState:v})),Q=(Ae,xe={})=>{for(const me of Ae?Hp(Ae):r.mount)r.mount.delete(me),r.array.delete(me),xe.keepValue||(cs(s,me),cs(l,me)),!xe.keepError&&cs(t.errors,me),!xe.keepDirty&&cs(t.dirtyFields,me),!xe.keepTouched&&cs(t.touchedFields,me),!xe.keepIsValidating&&cs(t.validatingFields,me),!e.shouldUnregister&&!xe.keepDefaultValue&&cs(a,me);y.state.next({values:Ms(l)}),y.state.next({...t,...xe.keepDirty?{isDirty:O()}:{}}),!xe.keepIsValid&&k()},le=({disabled:Ae,name:xe})=>{(Ba(Ae)&&h.mount||Ae||r.disabled.has(xe))&&(Ae?r.disabled.add(xe):r.disabled.delete(xe))},_e=(Ae,xe={})=>{let me=mi(s,Ae);const Me=Ba(xe.disabled)||Ba(e.disabled);return Hr(s,Ae,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:Ae}},name:Ae,mount:!0,...xe}}),r.mount.add(Ae),me?le({disabled:Ba(xe.disabled)?xe.disabled:e.disabled,name:Ae}):I(Ae,!0,xe.value),{...Me?{disabled:xe.disabled||e.disabled}:{},...e.progressive?{required:!!xe.required,min:Mp(xe.min),max:Mp(xe.max),minLength:Mp(xe.minLength),maxLength:Mp(xe.maxLength),pattern:Mp(xe.pattern)}:{},name:Ae,onChange:H,onBlur:H,ref:De=>{if(De){_e(Ae,xe),me=mi(s,Ae);const Pe=qn(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,je=vV(Pe),Xe=me._f.refs||[];if(je?Xe.find(tt=>tt===Pe):Pe===me._f.ref)return;Hr(s,Ae,{_f:{...me._f,...je?{refs:[...Xe.filter(j0),Pe,...Array.isArray(mi(a,Ae))?[{}]:[]],ref:{type:Pe.type,name:Ae}}:{ref:Pe}}}),I(Ae,!1,void 0,Pe)}else me=mi(s,Ae,{}),me._f&&(me._f.mount=!1),(e.shouldUnregister||xe.shouldUnregister)&&!(R3(r.array,Ae)&&h.action)&&r.unMount.add(Ae)}}},J=()=>e.shouldFocusError&&Wp(s,W,r.mount),ne=Ae=>{Ba(Ae)&&(y.state.next({disabled:Ae}),Wp(s,(xe,me)=>{const Me=mi(s,me);Me&&(xe.disabled=Me._f.disabled||Ae,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(De=>{De.disabled=Me._f.disabled||Ae}))},0,!1))},ue=(Ae,xe)=>async me=>{let Me;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let De=Ms(l);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:je}=await Y();t.errors=Pe,De=je}else await B(s);if(r.disabled.size)for(const Pe of r.disabled)Hr(De,Pe,void 0);if(cs(t.errors,"root"),la(t.errors)){y.state.next({errors:{}});try{await Ae(De,me)}catch(Pe){Me=Pe}}else xe&&await xe({...t.errors},me),J(),setTimeout(J);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:la(t.errors)&&!Me,submitCount:t.submitCount+1,errors:t.errors}),Me)throw Me},ye=(Ae,xe={})=>{mi(s,Ae)&&(qn(xe.defaultValue)?F(Ae,Ms(mi(a,Ae))):(F(Ae,xe.defaultValue),Hr(a,Ae,Ms(xe.defaultValue))),xe.keepTouched||cs(t.touchedFields,Ae),xe.keepDirty||(cs(t.dirtyFields,Ae),t.isDirty=xe.defaultValue?O(Ae,Ms(mi(a,Ae))):O()),xe.keepError||(cs(t.errors,Ae),g.isValid&&k()),y.state.next({...t}))},we=(Ae,xe={})=>{const me=Ae?Ms(Ae):a,Me=Ms(me),De=la(Ae),Pe=De?a:Me;if(xe.keepDefaultValues||(a=me),!xe.keepValues){if(xe.keepDirtyValues){const je=new Set([...r.mount,...Object.keys(Ap(a,l))]);for(const Xe of Array.from(je))mi(t.dirtyFields,Xe)?Hr(Pe,Xe,mi(l,Xe)):F(Xe,mi(Pe,Xe))}else{if(c1&&qn(Ae))for(const je of r.mount){const Xe=mi(s,je);if(Xe&&Xe._f){const tt=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(ly(tt)){const rt=tt.closest("form");if(rt){rt.reset();break}}}}for(const je of r.mount)F(je,mi(Pe,je))}l=Ms(Pe),y.array.next({values:{...Pe}}),y.state.next({values:{...Pe}})}r={mount:xe.keepDirtyValues?r.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!g.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues,h.watch=!!e.shouldUnregister,y.state.next({submitCount:xe.keepSubmitCount?t.submitCount:0,isDirty:De?!1:xe.keepDirty?t.isDirty:!!(xe.keepDefaultValues&&!oc(Ae,a)),isSubmitted:xe.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:De?{}:xe.keepDirtyValues?xe.keepDefaultValues&&l?Ap(a,l):t.dirtyFields:xe.keepDefaultValues&&Ae?Ap(a,Ae):xe.keepDirty?t.dirtyFields:{},touchedFields:xe.keepTouched?t.touchedFields:{},errors:xe.keepErrors?t.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(Ae,xe)=>we(po(Ae)?Ae(l):Ae,xe),Ee=(Ae,xe={})=>{const me=mi(s,Ae),Me=me&&me._f;if(Me){const De=Me.refs?Me.refs[0]:Me.ref;De.focus&&(De.focus(),xe.shouldSelect&&po(De.select)&&De.select())}},Ie=Ae=>{t={...t,...Ae}},He={control:{register:_e,unregister:Q,getFieldState:ie,handleSubmit:ue,setError:Ce,_subscribe:ke,_runSchema:Y,_getWatch:R,_getDirty:O,_setValid:k,_setFieldArray:A,_setDisabledField:le,_setErrors:w,_getFieldArray:L,_reset:we,_resetDefaultValues:()=>po(e.defaultValues)&&e.defaultValues().then(Ae=>{ze(Ae,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:ne,_subjects:y,_proxyFormState:g,get _fields(){return s},get _formValues(){return l},get _state(){return h},set _state(Ae){h=Ae},get _defaultValues(){return a},get _names(){return r},set _names(Ae){r=Ae},get _formState(){return t},get _options(){return e},set _options(Ae){e={...e,...Ae}}},subscribe:K,trigger:re,register:_e,handleSubmit:ue,watch:ge,setValue:F,getValues:he,reset:ze,resetField:ye,clearErrors:ae,unregister:Q,setError:Ce,setFocus:Ee,getFieldState:ie};return{...He,formControl:He}}function DV(i={}){const e=Te.useRef(void 0),t=Te.useRef(void 0),[s,a]=Te.useState({isDirty:!1,isValidating:!1,isLoading:po(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:po(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:IV(i),formState:s},i.formControl&&i.defaultValues&&!po(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const l=e.current.control;return l._options=i,d1(()=>{const h=l._subscribe({formState:l._proxyFormState,callback:()=>a({...l._formState}),reRenderRoot:!0});return a(r=>({...r,isReady:!0})),l._formState.isReady=!0,h},[l]),Te.useEffect(()=>l._disableForm(i.disabled),[l,i.disabled]),Te.useEffect(()=>{i.mode&&(l._options.mode=i.mode),i.reValidateMode&&(l._options.reValidateMode=i.reValidateMode),i.errors&&!la(i.errors)&&l._setErrors(i.errors)},[l,i.errors,i.mode,i.reValidateMode]),Te.useEffect(()=>{i.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,i.shouldUnregister]),Te.useEffect(()=>{if(l._proxyFormState.isDirty){const h=l._getDirty();h!==s.isDirty&&l._subjects.state.next({isDirty:h})}},[l,s.isDirty]),Te.useEffect(()=>{i.values&&!oc(i.values,t.current)?(l._reset(i.values,l._options.resetOptions),t.current=i.values,a(h=>({...h}))):l._resetDefaultValues()},[l,i.values]),Te.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=N3(s,l),e.current}const J2=(i,e,t)=>{if(i&&"reportValidity"in i){const s=mi(t,e);i.setCustomValidity(s&&s.message||""),i.reportValidity()}},H3=(i,e)=>{for(const t in e.fields){const s=e.fields[t];s&&s.ref&&"reportValidity"in s.ref?J2(s.ref,t,i):s&&s.refs&&s.refs.forEach(a=>J2(a,t,i))}},LV=(i,e)=>{e.shouldUseNativeValidation&&H3(i,e);const t={};for(const s in i){const a=mi(e.fields,s),l=Object.assign(i[s]||{},{ref:a&&a.ref});if(RV(e.names||Object.keys(i),s)){const h=Object.assign({},mi(t,s));Hr(h,"root",l),Hr(t,s,h)}else Hr(t,s,l)}return t},RV=(i,e)=>{const t=eT(e);return i.some(s=>eT(s).match(`^${t}\\.\\d+`))};function eT(i){return i.replace(/\]|\[/g,"")}function zV(i,e){for(var t={};i.length;){var s=i[0],a=s.code,l=s.message,h=s.path.join(".");if(!t[h])if("unionErrors"in s){var r=s.unionErrors[0].errors[0];t[h]={message:r.message,type:r.code}}else t[h]={message:l,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return i.push(v)})}),e){var p=t[h].types,m=p&&p[s.code];t[h]=j3(h,e,t,a,m?[].concat(m,s.message):s.message)}i.shift()}return t}function NV(i,e,t){return t===void 0&&(t={}),function(s,a,l){try{return Promise.resolve(function(h,r){try{var p=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(m){return l.shouldUseNativeValidation&&H3({},l),{errors:{},values:t.raw?Object.assign({},s):m}})}catch(m){return r(m)}return p&&p.then?p.then(void 0,r):p}(0,function(h){if(function(r){return Array.isArray(r==null?void 0:r.errors)}(h))return{values:{},errors:LV(zV(h.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw h}))}catch(h){return Promise.reject(h)}}}var zr;(function(i){i.assertEqual=a=>a;function e(a){}i.assertIs=e;function t(a){throw new Error}i.assertNever=t,i.arrayToEnum=a=>{const l={};for(const h of a)l[h]=h;return l},i.getValidEnumValues=a=>{const l=i.objectKeys(a).filter(r=>typeof a[a[r]]!="number"),h={};for(const r of l)h[r]=a[r];return i.objectValues(h)},i.objectValues=a=>i.objectKeys(a).map(function(l){return a[l]}),i.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const l=[];for(const h in a)Object.prototype.hasOwnProperty.call(a,h)&&l.push(h);return l},i.find=(a,l)=>{for(const h of a)if(l(h))return h},i.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function s(a,l=" | "){return a.map(h=>typeof h=="string"?`'${h}'`:h).join(l)}i.joinValues=s,i.jsonStringifyReplacer=(a,l)=>typeof l=="bigint"?l.toString():l})(zr||(zr={}));var kv;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(kv||(kv={}));const Ei=zr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Tl=i=>{switch(typeof i){case"undefined":return Ei.undefined;case"string":return Ei.string;case"number":return isNaN(i)?Ei.nan:Ei.number;case"boolean":return Ei.boolean;case"function":return Ei.function;case"bigint":return Ei.bigint;case"symbol":return Ei.symbol;case"object":return Array.isArray(i)?Ei.array:i===null?Ei.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Ei.promise:typeof Map<"u"&&i instanceof Map?Ei.map:typeof Set<"u"&&i instanceof Set?Ei.set:typeof Date<"u"&&i instanceof Date?Ei.date:Ei.object;default:return Ei.unknown}},Ht=zr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),OV=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class Ha extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},s={_errors:[]},a=l=>{for(const h of l.issues)if(h.code==="invalid_union")h.unionErrors.map(a);else if(h.code==="invalid_return_type")a(h.returnTypeError);else if(h.code==="invalid_arguments")a(h.argumentsError);else if(h.path.length===0)s._errors.push(t(h));else{let r=s,p=0;for(;p<h.path.length;){const m=h.path[p];p===h.path.length-1?(r[m]=r[m]||{_errors:[]},r[m]._errors.push(t(h))):r[m]=r[m]||{_errors:[]},r=r[m],p++}}};return a(this),s}static assert(e){if(!(e instanceof Ha))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):s.push(e(a));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Ha.create=i=>new Ha(i);const rd=(i,e)=>{let t;switch(i.code){case Ht.invalid_type:i.received===Ei.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Ht.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,zr.jsonStringifyReplacer)}`;break;case Ht.unrecognized_keys:t=`Unrecognized key(s) in object: ${zr.joinValues(i.keys,", ")}`;break;case Ht.invalid_union:t="Invalid input";break;case Ht.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${zr.joinValues(i.options)}`;break;case Ht.invalid_enum_value:t=`Invalid enum value. Expected ${zr.joinValues(i.options)}, received '${i.received}'`;break;case Ht.invalid_arguments:t="Invalid function arguments";break;case Ht.invalid_return_type:t="Invalid function return type";break;case Ht.invalid_date:t="Invalid date";break;case Ht.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:zr.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Ht.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Ht.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Ht.custom:t="Invalid input";break;case Ht.invalid_intersection_types:t="Intersection results could not be merged";break;case Ht.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Ht.not_finite:t="Number must be finite";break;default:t=e.defaultError,zr.assertNever(i)}return{message:t}};let W3=rd;function jV(i){W3=i}function uy(){return W3}const dy=i=>{const{data:e,path:t,errorMaps:s,issueData:a}=i,l=[...t,...a.path||[]],h={...a,path:l};if(a.message!==void 0)return{...a,path:l,message:a.message};let r="";const p=s.filter(m=>!!m).slice().reverse();for(const m of p)r=m(h,{data:e,defaultError:r}).message;return{...a,path:l,message:r}},BV=[];function yi(i,e){const t=uy(),s=dy({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===rd?void 0:rd].filter(a=>!!a)});i.common.issues.push(s)}class Xs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const a of t){if(a.status==="aborted")return tr;a.status==="dirty"&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const a of t){const l=await a.key,h=await a.value;s.push({key:l,value:h})}return Xs.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const a of t){const{key:l,value:h}=a;if(l.status==="aborted"||h.status==="aborted")return tr;l.status==="dirty"&&e.dirty(),h.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof h.value<"u"||a.alwaysSet)&&(s[l.value]=h.value)}return{status:e.value,value:s}}}const tr=Object.freeze({status:"aborted"}),Fu=i=>({status:"dirty",value:i}),ya=i=>({status:"valid",value:i}),Av=i=>i.status==="aborted",Mv=i=>i.status==="dirty",Ph=i=>i.status==="valid",uf=i=>typeof Promise<"u"&&i instanceof Promise;function py(i,e,t,s){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function q3(i,e,t,s,a){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var Li;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Li||(Li={}));var Np,Op;class Wo{constructor(e,t,s,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tT=(i,e)=>{if(Ph(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ha(i.common.issues);return this._error=t,this._error}}};function fr(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:a}=i;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(h,r)=>{var p,m;const{message:g}=i;return h.code==="invalid_enum_value"?{message:g??r.defaultError}:typeof r.data>"u"?{message:(p=g??s)!==null&&p!==void 0?p:r.defaultError}:h.code!=="invalid_type"?{message:r.defaultError}:{message:(m=g??t)!==null&&m!==void 0?m:r.defaultError}},description:a}}class yr{get description(){return this._def.description}_getType(e){return Tl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Tl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xs,ctx:{common:e.parent.common,data:e.data,parsedType:Tl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(uf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const a={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tl(e)},l=this._parseSync({data:e,path:a.path,parent:a});return tT(a,l)}"~validate"(e){var t,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tl(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:a});return Ph(l)?{value:l.value}:{issues:a.common.issues}}catch(l){!((s=(t=l==null?void 0:l.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(l=>Ph(l)?{value:l.value}:{issues:a.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tl(e)},a=this._parse({data:e,path:s.path,parent:s}),l=await(uf(a)?a:Promise.resolve(a));return tT(s,l)}refine(e,t){const s=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,l)=>{const h=e(a),r=()=>l.addIssue({code:Ht.custom,...s(a)});return typeof Promise<"u"&&h instanceof Promise?h.then(p=>p?!0:(r(),!1)):h?!0:(r(),!1)})}refinement(e,t){return this._refinement((s,a)=>e(s)?!0:(a.addIssue(typeof t=="function"?t(s,a):t),!1))}_refinement(e){return new vo({schema:this,typeName:er.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return jo.create(this,this._def)}nullable(){return Cc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mo.create(this)}promise(){return sd.create(this,this._def)}or(e){return mf.create([this,e],this._def)}and(e){return gf.create(this,e,this._def)}transform(e){return new vo({...fr(this._def),schema:this,typeName:er.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new _f({...fr(this._def),innerType:this,defaultValue:t,typeName:er.ZodDefault})}brand(){return new m1({typeName:er.ZodBranded,type:this,...fr(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new wf({...fr(this._def),innerType:this,catchValue:t,typeName:er.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Qf.create(this,e)}readonly(){return Tf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const FV=/^c[^\s-]{8,}$/i,UV=/^[0-9a-z]+$/,$V=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,GV=/^[a-z0-9_-]{21}$/i,HV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let B0;const ZV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,KV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tG=new RegExp(`^${Y3}$`);function Z3(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function iG(i){return new RegExp(`^${Z3(i)}$`)}function X3(i){let e=`${Y3}T${Z3(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function rG(i,e){return!!((e==="v4"||!e)&&ZV.test(i)||(e==="v6"||!e)&&KV.test(i))}function nG(i,e){if(!HV.test(i))return!1;try{const[t]=i.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function sG(i,e){return!!((e==="v4"||!e)&&XV.test(i)||(e==="v6"||!e)&&QV.test(i))}class fo extends yr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ei.string){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Ei.string,received:l.parsedType}),tr}const s=new Xs;let a;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="max")e.data.length>l.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="length"){const h=e.data.length>l.value,r=e.data.length<l.value;(h||r)&&(a=this._getOrReturnCtx(e,a),h?yi(a,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&yi(a,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if(l.kind==="email")qV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"email",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="emoji")B0||(B0=new RegExp(YV,"u")),B0.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"emoji",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="uuid")VV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"uuid",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="nanoid")GV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"nanoid",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid")FV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cuid",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid2")UV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cuid2",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="ulid")$V.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"ulid",code:Ht.invalid_string,message:l.message}),s.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),yi(a,{validation:"url",code:Ht.invalid_string,message:l.message}),s.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"regex",code:Ht.invalid_string,message:l.message}),s.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):l.kind==="datetime"?X3(l).test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:"datetime",message:l.message}),s.dirty()):l.kind==="date"?tG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:"date",message:l.message}),s.dirty()):l.kind==="time"?iG(l).test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.invalid_string,validation:"time",message:l.message}),s.dirty()):l.kind==="duration"?WV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"duration",code:Ht.invalid_string,message:l.message}),s.dirty()):l.kind==="ip"?rG(e.data,l.version)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"ip",code:Ht.invalid_string,message:l.message}),s.dirty()):l.kind==="jwt"?nG(e.data,l.alg)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"jwt",code:Ht.invalid_string,message:l.message}),s.dirty()):l.kind==="cidr"?sG(e.data,l.version)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cidr",code:Ht.invalid_string,message:l.message}),s.dirty()):l.kind==="base64"?JV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"base64",code:Ht.invalid_string,message:l.message}),s.dirty()):l.kind==="base64url"?eG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"base64url",code:Ht.invalid_string,message:l.message}),s.dirty()):zr.assertNever(l);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(a=>e.test(a),{validation:t,code:Ht.invalid_string,...Li.errToObj(s)})}_addCheck(e){return new fo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Li.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Li.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Li.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Li.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Li.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Li.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Li.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Li.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Li.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Li.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Li.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Li.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Li.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...Li.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Li.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Li.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Li.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Li.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Li.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Li.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Li.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Li.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Li.errToObj(t)})}nonempty(e){return this.min(1,Li.errToObj(e))}trim(){return new fo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}fo.create=i=>{var e;return new fo({checks:[],typeName:er.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...fr(i)})};function aG(i,e){const t=(i.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,a=t>s?t:s,l=parseInt(i.toFixed(a).replace(".","")),h=parseInt(e.toFixed(a).replace(".",""));return l%h/Math.pow(10,a)}class _c extends yr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ei.number){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Ei.number,received:l.parsedType}),tr}let s;const a=new Xs;for(const l of this._def.checks)l.kind==="int"?zr.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_type,expected:"integer",received:"float",message:l.message}),a.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),a.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),a.dirty()):l.kind==="multipleOf"?aG(e.data,l.value)!==0&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),a.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.not_finite,message:l.message}),a.dirty()):zr.assertNever(l);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Li.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Li.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Li.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Li.toString(t))}setLimit(e,t,s,a){return new _c({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Li.toString(a)}]})}_addCheck(e){return new _c({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Li.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Li.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Li.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Li.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Li.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Li.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Li.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Li.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Li.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&zr.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}_c.create=i=>new _c({checks:[],typeName:er.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...fr(i)});class wc extends yr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ei.bigint)return this._getInvalidInput(e);let s;const a=new Xs;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),a.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),a.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),a.dirty()):zr.assertNever(l);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Ei.bigint,received:t.parsedType}),tr}gte(e,t){return this.setLimit("min",e,!0,Li.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Li.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Li.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Li.toString(t))}setLimit(e,t,s,a){return new wc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Li.toString(a)}]})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Li.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Li.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Li.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Li.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Li.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}wc.create=i=>{var e;return new wc({checks:[],typeName:er.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...fr(i)})};class df extends yr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ei.boolean){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.boolean,received:s.parsedType}),tr}return ya(e.data)}}df.create=i=>new df({typeName:er.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...fr(i)});class Ih extends yr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ei.date){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Ei.date,received:l.parsedType}),tr}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_date}),tr}const s=new Xs;let a;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),s.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Ht.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),s.dirty()):zr.assertNever(l);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ih({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Li.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Li.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ih.create=i=>new Ih({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:er.ZodDate,...fr(i)});class fy extends yr{_parse(e){if(this._getType(e)!==Ei.symbol){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.symbol,received:s.parsedType}),tr}return ya(e.data)}}fy.create=i=>new fy({typeName:er.ZodSymbol,...fr(i)});class pf extends yr{_parse(e){if(this._getType(e)!==Ei.undefined){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.undefined,received:s.parsedType}),tr}return ya(e.data)}}pf.create=i=>new pf({typeName:er.ZodUndefined,...fr(i)});class ff extends yr{_parse(e){if(this._getType(e)!==Ei.null){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.null,received:s.parsedType}),tr}return ya(e.data)}}ff.create=i=>new ff({typeName:er.ZodNull,...fr(i)});class nd extends yr{constructor(){super(...arguments),this._any=!0}_parse(e){return ya(e.data)}}nd.create=i=>new nd({typeName:er.ZodAny,...fr(i)});class Th extends yr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ya(e.data)}}Th.create=i=>new Th({typeName:er.ZodUnknown,...fr(i)});class Il extends yr{_parse(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Ei.never,received:t.parsedType}),tr}}Il.create=i=>new Il({typeName:er.ZodNever,...fr(i)});class my extends yr{_parse(e){if(this._getType(e)!==Ei.undefined){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.void,received:s.parsedType}),tr}return ya(e.data)}}my.create=i=>new my({typeName:er.ZodVoid,...fr(i)});class mo extends yr{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),a=this._def;if(t.parsedType!==Ei.array)return yi(t,{code:Ht.invalid_type,expected:Ei.array,received:t.parsedType}),tr;if(a.exactLength!==null){const h=t.data.length>a.exactLength.value,r=t.data.length<a.exactLength.value;(h||r)&&(yi(t,{code:h?Ht.too_big:Ht.too_small,minimum:r?a.exactLength.value:void 0,maximum:h?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(yi(t,{code:Ht.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(yi(t,{code:Ht.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((h,r)=>a.type._parseAsync(new Wo(t,h,t.path,r)))).then(h=>Xs.mergeArray(s,h));const l=[...t.data].map((h,r)=>a.type._parseSync(new Wo(t,h,t.path,r)));return Xs.mergeArray(s,l)}get element(){return this._def.type}min(e,t){return new mo({...this._def,minLength:{value:e,message:Li.toString(t)}})}max(e,t){return new mo({...this._def,maxLength:{value:e,message:Li.toString(t)}})}length(e,t){return new mo({...this._def,exactLength:{value:e,message:Li.toString(t)}})}nonempty(e){return this.min(1,e)}}mo.create=(i,e)=>new mo({type:i,minLength:null,maxLength:null,exactLength:null,typeName:er.ZodArray,...fr(e)});function ju(i){if(i instanceof Dn){const e={};for(const t in i.shape){const s=i.shape[t];e[t]=jo.create(ju(s))}return new Dn({...i._def,shape:()=>e})}else return i instanceof mo?new mo({...i._def,type:ju(i.element)}):i instanceof jo?jo.create(ju(i.unwrap())):i instanceof Cc?Cc.create(ju(i.unwrap())):i instanceof qo?qo.create(i.items.map(e=>ju(e))):i}class Dn extends yr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=zr.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ei.object){const m=this._getOrReturnCtx(e);return yi(m,{code:Ht.invalid_type,expected:Ei.object,received:m.parsedType}),tr}const{status:s,ctx:a}=this._processInputParams(e),{shape:l,keys:h}=this._getCached(),r=[];if(!(this._def.catchall instanceof Il&&this._def.unknownKeys==="strip"))for(const m in a.data)h.includes(m)||r.push(m);const p=[];for(const m of h){const g=l[m],v=a.data[m];p.push({key:{status:"valid",value:m},value:g._parse(new Wo(a,v,a.path,m)),alwaysSet:m in a.data})}if(this._def.catchall instanceof Il){const m=this._def.unknownKeys;if(m==="passthrough")for(const g of r)p.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(m==="strict")r.length>0&&(yi(a,{code:Ht.unrecognized_keys,keys:r}),s.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const g of r){const v=a.data[g];p.push({key:{status:"valid",value:g},value:m._parse(new Wo(a,v,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const m=[];for(const g of p){const v=await g.key,y=await g.value;m.push({key:v,value:y,alwaysSet:g.alwaysSet})}return m}).then(m=>Xs.mergeObjectSync(s,m)):Xs.mergeObjectSync(s,p)}get shape(){return this._def.shape()}strict(e){return Li.errToObj,new Dn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var a,l,h,r;const p=(h=(l=(a=this._def).errorMap)===null||l===void 0?void 0:l.call(a,t,s).message)!==null&&h!==void 0?h:s.defaultError;return t.code==="unrecognized_keys"?{message:(r=Li.errToObj(e).message)!==null&&r!==void 0?r:p}:{message:p}}}:{}})}strip(){return new Dn({...this._def,unknownKeys:"strip"})}passthrough(){return new Dn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Dn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Dn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:er.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Dn({...this._def,catchall:e})}pick(e){const t={};return zr.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new Dn({...this._def,shape:()=>t})}omit(e){const t={};return zr.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new Dn({...this._def,shape:()=>t})}deepPartial(){return ju(this)}partial(e){const t={};return zr.objectKeys(this.shape).forEach(s=>{const a=this.shape[s];e&&!e[s]?t[s]=a:t[s]=a.optional()}),new Dn({...this._def,shape:()=>t})}required(e){const t={};return zr.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let l=this.shape[s];for(;l instanceof jo;)l=l._def.innerType;t[s]=l}}),new Dn({...this._def,shape:()=>t})}keyof(){return K3(zr.objectKeys(this.shape))}}Dn.create=(i,e)=>new Dn({shape:()=>i,unknownKeys:"strip",catchall:Il.create(),typeName:er.ZodObject,...fr(e)});Dn.strictCreate=(i,e)=>new Dn({shape:()=>i,unknownKeys:"strict",catchall:Il.create(),typeName:er.ZodObject,...fr(e)});Dn.lazycreate=(i,e)=>new Dn({shape:i,unknownKeys:"strip",catchall:Il.create(),typeName:er.ZodObject,...fr(e)});class mf extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function a(l){for(const r of l)if(r.result.status==="valid")return r.result;for(const r of l)if(r.result.status==="dirty")return t.common.issues.push(...r.ctx.common.issues),r.result;const h=l.map(r=>new Ha(r.ctx.common.issues));return yi(t,{code:Ht.invalid_union,unionErrors:h}),tr}if(t.common.async)return Promise.all(s.map(async l=>{const h={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:h}),ctx:h}})).then(a);{let l;const h=[];for(const p of s){const m={...t,common:{...t.common,issues:[]},parent:null},g=p._parseSync({data:t.data,path:t.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!l&&(l={result:g,ctx:m}),m.common.issues.length&&h.push(m.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const r=h.map(p=>new Ha(p));return yi(t,{code:Ht.invalid_union,unionErrors:r}),tr}}get options(){return this._def.options}}mf.create=(i,e)=>new mf({options:i,typeName:er.ZodUnion,...fr(e)});const bl=i=>i instanceof xf?bl(i.schema):i instanceof vo?bl(i.innerType()):i instanceof vf?[i.value]:i instanceof Tc?i.options:i instanceof bf?zr.objectValues(i.enum):i instanceof _f?bl(i._def.innerType):i instanceof pf?[void 0]:i instanceof ff?[null]:i instanceof jo?[void 0,...bl(i.unwrap())]:i instanceof Cc?[null,...bl(i.unwrap())]:i instanceof m1||i instanceof Tf?bl(i.unwrap()):i instanceof wf?bl(i._def.innerType):[];class ex extends yr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ei.object)return yi(t,{code:Ht.invalid_type,expected:Ei.object,received:t.parsedType}),tr;const s=this.discriminator,a=t.data[s],l=this.optionsMap.get(a);return l?t.common.async?l._parseAsync({data:t.data,path:t.path,parent:t}):l._parseSync({data:t.data,path:t.path,parent:t}):(yi(t,{code:Ht.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),tr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const a=new Map;for(const l of t){const h=bl(l.shape[e]);if(!h.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of h){if(a.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);a.set(r,l)}}return new ex({typeName:er.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...fr(s)})}}function Pv(i,e){const t=Tl(i),s=Tl(e);if(i===e)return{valid:!0,data:i};if(t===Ei.object&&s===Ei.object){const a=zr.objectKeys(e),l=zr.objectKeys(i).filter(r=>a.indexOf(r)!==-1),h={...i,...e};for(const r of l){const p=Pv(i[r],e[r]);if(!p.valid)return{valid:!1};h[r]=p.data}return{valid:!0,data:h}}else if(t===Ei.array&&s===Ei.array){if(i.length!==e.length)return{valid:!1};const a=[];for(let l=0;l<i.length;l++){const h=i[l],r=e[l],p=Pv(h,r);if(!p.valid)return{valid:!1};a.push(p.data)}return{valid:!0,data:a}}else return t===Ei.date&&s===Ei.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class gf extends yr{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),a=(l,h)=>{if(Av(l)||Av(h))return tr;const r=Pv(l.value,h.value);return r.valid?((Mv(l)||Mv(h))&&t.dirty(),{status:t.value,value:r.data}):(yi(s,{code:Ht.invalid_intersection_types}),tr)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([l,h])=>a(l,h)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}gf.create=(i,e,t)=>new gf({left:i,right:e,typeName:er.ZodIntersection,...fr(t)});class qo extends yr{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ei.array)return yi(s,{code:Ht.invalid_type,expected:Ei.array,received:s.parsedType}),tr;if(s.data.length<this._def.items.length)return yi(s,{code:Ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tr;!this._def.rest&&s.data.length>this._def.items.length&&(yi(s,{code:Ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...s.data].map((h,r)=>{const p=this._def.items[r]||this._def.rest;return p?p._parse(new Wo(s,h,s.path,r)):null}).filter(h=>!!h);return s.common.async?Promise.all(l).then(h=>Xs.mergeArray(t,h)):Xs.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new qo({...this._def,rest:e})}}qo.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qo({items:i,typeName:er.ZodTuple,rest:null,...fr(e)})};class yf extends yr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ei.object)return yi(s,{code:Ht.invalid_type,expected:Ei.object,received:s.parsedType}),tr;const a=[],l=this._def.keyType,h=this._def.valueType;for(const r in s.data)a.push({key:l._parse(new Wo(s,r,s.path,r)),value:h._parse(new Wo(s,s.data[r],s.path,r)),alwaysSet:r in s.data});return s.common.async?Xs.mergeObjectAsync(t,a):Xs.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof yr?new yf({keyType:e,valueType:t,typeName:er.ZodRecord,...fr(s)}):new yf({keyType:fo.create(),valueType:e,typeName:er.ZodRecord,...fr(t)})}}class gy extends yr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ei.map)return yi(s,{code:Ht.invalid_type,expected:Ei.map,received:s.parsedType}),tr;const a=this._def.keyType,l=this._def.valueType,h=[...s.data.entries()].map(([r,p],m)=>({key:a._parse(new Wo(s,r,s.path,[m,"key"])),value:l._parse(new Wo(s,p,s.path,[m,"value"]))}));if(s.common.async){const r=new Map;return Promise.resolve().then(async()=>{for(const p of h){const m=await p.key,g=await p.value;if(m.status==="aborted"||g.status==="aborted")return tr;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),r.set(m.value,g.value)}return{status:t.value,value:r}})}else{const r=new Map;for(const p of h){const m=p.key,g=p.value;if(m.status==="aborted"||g.status==="aborted")return tr;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),r.set(m.value,g.value)}return{status:t.value,value:r}}}}gy.create=(i,e,t)=>new gy({valueType:e,keyType:i,typeName:er.ZodMap,...fr(t)});class Dh extends yr{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ei.set)return yi(s,{code:Ht.invalid_type,expected:Ei.set,received:s.parsedType}),tr;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(yi(s,{code:Ht.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(yi(s,{code:Ht.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const l=this._def.valueType;function h(p){const m=new Set;for(const g of p){if(g.status==="aborted")return tr;g.status==="dirty"&&t.dirty(),m.add(g.value)}return{status:t.value,value:m}}const r=[...s.data.values()].map((p,m)=>l._parse(new Wo(s,p,s.path,m)));return s.common.async?Promise.all(r).then(p=>h(p)):h(r)}min(e,t){return new Dh({...this._def,minSize:{value:e,message:Li.toString(t)}})}max(e,t){return new Dh({...this._def,maxSize:{value:e,message:Li.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Dh.create=(i,e)=>new Dh({valueType:i,minSize:null,maxSize:null,typeName:er.ZodSet,...fr(e)});class Yu extends yr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ei.function)return yi(t,{code:Ht.invalid_type,expected:Ei.function,received:t.parsedType}),tr;function s(r,p){return dy({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,uy(),rd].filter(m=>!!m),issueData:{code:Ht.invalid_arguments,argumentsError:p}})}function a(r,p){return dy({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,uy(),rd].filter(m=>!!m),issueData:{code:Ht.invalid_return_type,returnTypeError:p}})}const l={errorMap:t.common.contextualErrorMap},h=t.data;if(this._def.returns instanceof sd){const r=this;return ya(async function(...p){const m=new Ha([]),g=await r._def.args.parseAsync(p,l).catch(C=>{throw m.addIssue(s(p,C)),m}),v=await Reflect.apply(h,this,g);return await r._def.returns._def.type.parseAsync(v,l).catch(C=>{throw m.addIssue(a(v,C)),m})})}else{const r=this;return ya(function(...p){const m=r._def.args.safeParse(p,l);if(!m.success)throw new Ha([s(p,m.error)]);const g=Reflect.apply(h,this,m.data),v=r._def.returns.safeParse(g,l);if(!v.success)throw new Ha([a(g,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Yu({...this._def,args:qo.create(e).rest(Th.create())})}returns(e){return new Yu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Yu({args:e||qo.create([]).rest(Th.create()),returns:t||Th.create(),typeName:er.ZodFunction,...fr(s)})}}class xf extends yr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}xf.create=(i,e)=>new xf({getter:i,typeName:er.ZodLazy,...fr(e)});class vf extends yr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yi(t,{received:t.data,code:Ht.invalid_literal,expected:this._def.value}),tr}return{status:"valid",value:e.data}}get value(){return this._def.value}}vf.create=(i,e)=>new vf({value:i,typeName:er.ZodLiteral,...fr(e)});function K3(i,e){return new Tc({values:i,typeName:er.ZodEnum,...fr(e)})}class Tc extends yr{constructor(){super(...arguments),Np.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return yi(t,{expected:zr.joinValues(s),received:t.parsedType,code:Ht.invalid_type}),tr}if(py(this,Np)||q3(this,Np,new Set(this._def.values)),!py(this,Np).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return yi(t,{received:t.data,code:Ht.invalid_enum_value,options:s}),tr}return ya(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Tc.create(e,{...this._def,...t})}exclude(e,t=this._def){return Tc.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Np=new WeakMap;Tc.create=K3;class bf extends yr{constructor(){super(...arguments),Op.set(this,void 0)}_parse(e){const t=zr.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Ei.string&&s.parsedType!==Ei.number){const a=zr.objectValues(t);return yi(s,{expected:zr.joinValues(a),received:s.parsedType,code:Ht.invalid_type}),tr}if(py(this,Op)||q3(this,Op,new Set(zr.getValidEnumValues(this._def.values))),!py(this,Op).has(e.data)){const a=zr.objectValues(t);return yi(s,{received:s.data,code:Ht.invalid_enum_value,options:a}),tr}return ya(e.data)}get enum(){return this._def.values}}Op=new WeakMap;bf.create=(i,e)=>new bf({values:i,typeName:er.ZodNativeEnum,...fr(e)});class sd extends yr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ei.promise&&t.common.async===!1)return yi(t,{code:Ht.invalid_type,expected:Ei.promise,received:t.parsedType}),tr;const s=t.parsedType===Ei.promise?t.data:Promise.resolve(t.data);return ya(s.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}sd.create=(i,e)=>new sd({type:i,typeName:er.ZodPromise,...fr(e)});class vo extends yr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===er.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),a=this._def.effect||null,l={addIssue:h=>{yi(s,h),h.fatal?t.abort():t.dirty()},get path(){return s.path}};if(l.addIssue=l.addIssue.bind(l),a.type==="preprocess"){const h=a.transform(s.data,l);if(s.common.async)return Promise.resolve(h).then(async r=>{if(t.value==="aborted")return tr;const p=await this._def.schema._parseAsync({data:r,path:s.path,parent:s});return p.status==="aborted"?tr:p.status==="dirty"||t.value==="dirty"?Fu(p.value):p});{if(t.value==="aborted")return tr;const r=this._def.schema._parseSync({data:h,path:s.path,parent:s});return r.status==="aborted"?tr:r.status==="dirty"||t.value==="dirty"?Fu(r.value):r}}if(a.type==="refinement"){const h=r=>{const p=a.refinement(r,l);if(s.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return r};if(s.common.async===!1){const r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?tr:(r.status==="dirty"&&t.dirty(),h(r.value),{status:t.value,value:r.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>r.status==="aborted"?tr:(r.status==="dirty"&&t.dirty(),h(r.value).then(()=>({status:t.value,value:r.value}))))}if(a.type==="transform")if(s.common.async===!1){const h=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ph(h))return h;const r=a.transform(h.value,l);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(h=>Ph(h)?Promise.resolve(a.transform(h.value,l)).then(r=>({status:t.value,value:r})):h);zr.assertNever(a)}}vo.create=(i,e,t)=>new vo({schema:i,typeName:er.ZodEffects,effect:e,...fr(t)});vo.createWithPreprocess=(i,e,t)=>new vo({schema:e,effect:{type:"preprocess",transform:i},typeName:er.ZodEffects,...fr(t)});class jo extends yr{_parse(e){return this._getType(e)===Ei.undefined?ya(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jo.create=(i,e)=>new jo({innerType:i,typeName:er.ZodOptional,...fr(e)});class Cc extends yr{_parse(e){return this._getType(e)===Ei.null?ya(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cc.create=(i,e)=>new Cc({innerType:i,typeName:er.ZodNullable,...fr(e)});class _f extends yr{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===Ei.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}_f.create=(i,e)=>new _f({innerType:i,typeName:er.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fr(e)});class wf extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return uf(a)?a.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Ha(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ha(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}wf.create=(i,e)=>new wf({innerType:i,typeName:er.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fr(e)});class yy extends yr{_parse(e){if(this._getType(e)!==Ei.nan){const s=this._getOrReturnCtx(e);return yi(s,{code:Ht.invalid_type,expected:Ei.nan,received:s.parsedType}),tr}return{status:"valid",value:e.data}}}yy.create=i=>new yy({typeName:er.ZodNaN,...fr(i)});const oG=Symbol("zod_brand");class m1 extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Qf extends yr{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?tr:l.status==="dirty"?(t.dirty(),Fu(l.value)):this._def.out._parseAsync({data:l.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?tr:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(e,t){return new Qf({in:e,out:t,typeName:er.ZodPipeline})}}class Tf extends yr{_parse(e){const t=this._def.innerType._parse(e),s=a=>(Ph(a)&&(a.value=Object.freeze(a.value)),a);return uf(t)?t.then(a=>s(a)):s(t)}unwrap(){return this._def.innerType}}Tf.create=(i,e)=>new Tf({innerType:i,typeName:er.ZodReadonly,...fr(e)});function iT(i,e){const t=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof t=="string"?{message:t}:t}function Q3(i,e={},t){return i?nd.create().superRefine((s,a)=>{var l,h;const r=i(s);if(r instanceof Promise)return r.then(p=>{var m,g;if(!p){const v=iT(e,s),y=(g=(m=v.fatal)!==null&&m!==void 0?m:t)!==null&&g!==void 0?g:!0;a.addIssue({code:"custom",...v,fatal:y})}});if(!r){const p=iT(e,s),m=(h=(l=p.fatal)!==null&&l!==void 0?l:t)!==null&&h!==void 0?h:!0;a.addIssue({code:"custom",...p,fatal:m})}}):nd.create()}const lG={object:Dn.lazycreate};var er;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(er||(er={}));const cG=(i,e={message:`Input not instance of ${i.name}`})=>Q3(t=>t instanceof i,e),J3=fo.create,ek=_c.create,hG=yy.create,uG=wc.create,tk=df.create,dG=Ih.create,pG=fy.create,fG=pf.create,mG=ff.create,gG=nd.create,yG=Th.create,xG=Il.create,vG=my.create,bG=mo.create,_G=Dn.create,wG=Dn.strictCreate,TG=mf.create,CG=ex.create,EG=gf.create,SG=qo.create,kG=yf.create,AG=gy.create,MG=Dh.create,PG=Yu.create,IG=xf.create,DG=vf.create,LG=Tc.create,RG=bf.create,zG=sd.create,rT=vo.create,NG=jo.create,OG=Cc.create,jG=vo.createWithPreprocess,BG=Qf.create,FG=()=>J3().optional(),UG=()=>ek().optional(),$G=()=>tk().optional(),VG={string:i=>fo.create({...i,coerce:!0}),number:i=>_c.create({...i,coerce:!0}),boolean:i=>df.create({...i,coerce:!0}),bigint:i=>wc.create({...i,coerce:!0}),date:i=>Ih.create({...i,coerce:!0})},GG=tr;var Uu=Object.freeze({__proto__:null,defaultErrorMap:rd,setErrorMap:jV,getErrorMap:uy,makeIssue:dy,EMPTY_PATH:BV,addIssueToContext:yi,ParseStatus:Xs,INVALID:tr,DIRTY:Fu,OK:ya,isAborted:Av,isDirty:Mv,isValid:Ph,isAsync:uf,get util(){return zr},get objectUtil(){return kv},ZodParsedType:Ei,getParsedType:Tl,ZodType:yr,datetimeRegex:X3,ZodString:fo,ZodNumber:_c,ZodBigInt:wc,ZodBoolean:df,ZodDate:Ih,ZodSymbol:fy,ZodUndefined:pf,ZodNull:ff,ZodAny:nd,ZodUnknown:Th,ZodNever:Il,ZodVoid:my,ZodArray:mo,ZodObject:Dn,ZodUnion:mf,ZodDiscriminatedUnion:ex,ZodIntersection:gf,ZodTuple:qo,ZodRecord:yf,ZodMap:gy,ZodSet:Dh,ZodFunction:Yu,ZodLazy:xf,ZodLiteral:vf,ZodEnum:Tc,ZodNativeEnum:bf,ZodPromise:sd,ZodEffects:vo,ZodTransformer:vo,ZodOptional:jo,ZodNullable:Cc,ZodDefault:_f,ZodCatch:wf,ZodNaN:yy,BRAND:oG,ZodBranded:m1,ZodPipeline:Qf,ZodReadonly:Tf,custom:Q3,Schema:yr,ZodSchema:yr,late:lG,get ZodFirstPartyTypeKind(){return er},coerce:VG,any:gG,array:bG,bigint:uG,boolean:tk,date:dG,discriminatedUnion:CG,effect:rT,enum:LG,function:PG,instanceof:cG,intersection:EG,lazy:IG,literal:DG,map:AG,nan:hG,nativeEnum:RG,never:xG,null:mG,nullable:OG,number:ek,object:_G,oboolean:$G,onumber:UG,optional:NG,ostring:FG,pipeline:BG,preprocess:jG,promise:zG,record:kG,set:MG,strictObject:wG,string:J3,symbol:pG,transformer:rT,tuple:SG,undefined:fG,union:TG,unknown:yG,void:vG,NEVER:GG,ZodIssueCode:Ht,quotelessJson:OV,ZodError:Ha});const HG=Uu.object({url:Uu.string().url({message:Je.t("Invalid URL format")}).min(1,{message:Je.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:Je.t("URL must end with a double wildcard (/**)")})}),ik=({onClose:i,onSubmit:e,isLoading:t,initialUrl:s="",modalTitle:a,submitButtonText:l})=>{const{control:h,handleSubmit:r,formState:{errors:p}}=DV({resolver:NV(HG),defaultValues:{url:s}}),m=g=>e(g);return se.jsx(Ch,{onClose:i,dataTest:"route-form-modal",children:se.jsxs("form",{onSubmit:r(m),children:[se.jsx(Dv,{children:a}),se.jsxs(by,{children:[se.jsx(fT,{htmlFor:"url",children:Je.t("CHAP Core URL")}),se.jsx(xV,{name:"url",control:h,render:({field:g})=>se.jsx(cT,{...g,type:"text",error:!!p.url,onChange:v=>g.onChange(v.value),dataTest:"route-url-input"})}),p.url?se.jsx("p",{className:Cn.mutedText,children:p.url.message}):null]}),se.jsx(Lv,{children:se.jsxs(Rv,{children:[se.jsx(Wr,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:Je.t("Cancel")}),se.jsx(Wr,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:l})]})})]})})},WG=()=>{const[i,e]=Be.useState(!1),{saveRoute:t,isSaving:s}=I3({onSuccess:()=>{e(!1)}}),a=r=>{t({url:r.url})},l=()=>{e(!0)},h=()=>{e(!1)};return se.jsxs(se.Fragment,{children:[se.jsxs("div",{children:[se.jsx("p",{className:Cn.mutedText,children:Je.t("No route found.")}),se.jsx(Wr,{onClick:l,icon:se.jsx(Ov,{}),small:!0,loading:s,dataTest:"add-route-button",children:Je.t("Add route")})]}),i&&se.jsx(ik,{onClose:h,onSubmit:a,isLoading:s,initialUrl:"",modalTitle:Je.t("Add route"),submitButtonText:Je.t("Add")})]})},qG=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:s}=I3({onSuccess:()=>{e()}}),a=l=>{t({id:i.id,url:l.url})};return se.jsx(ik,{onClose:e,onSubmit:a,isLoading:s,initialUrl:i.url,modalTitle:Je.t("Edit route"),submitButtonText:Je.t("Save")})},YG=({id:i,onSuccess:e,onError:t})=>{const s=od(),a=ad(),{show:l}=Yp(Je.t("Error deleting route"),{critical:!0}),{show:h}=Yp(Je.t("Route deleted successfully"),{success:!0}),r={resource:"routes",id:i,type:"delete"},{mutate:p,isLoading:m}=iE(()=>s.mutate(r),{onSuccess:()=>{h(),a.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:g=>{l(),console.error("Error deleting route:",g),t==null||t(g)}});return{deleteRoute:p,isDeleting:m}},ZG=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:s}=YG({id:i,onSuccess:()=>{e()}});return se.jsxs(Ch,{onClose:e,small:!0,children:[se.jsx(Dv,{children:Je.t("Delete route")}),se.jsx(by,{children:se.jsx("p",{children:Je.t("Are you sure you want to delete this route?")})}),se.jsx(Lv,{children:se.jsxs(Rv,{children:[se.jsx(Wr,{onClick:e,secondary:!0,children:Je.t("Cancel")}),se.jsx(Wr,{onClick:()=>t(),destructive:!0,loading:s,children:Je.t("Delete")})]})})]})},XG="_routeActions_1etwp_2",KG={routeActions:XG},QG=({route:i})=>{const e=ad(),[t,s]=Be.useState(!1),[a,l]=Be.useState(!1),[h,r]=Be.useState(!1),[p,m]=Be.useState(!1),g=Be.useRef(null);return se.jsxs(se.Fragment,{children:[se.jsxs("div",{className:KG.routeActions,children:[se.jsx(Wr,{icon:se.jsx(V0,{}),small:!0,onClick:()=>l(!0),children:Je.t("Sharing")}),se.jsxs("div",{ref:g,children:[se.jsx(Wr,{small:!0,onClick:()=>s(!t),children:se.jsx(Uv,{})}),t&&se.jsx(Iv,{onBackdropClick:()=>s(!1),children:se.jsx(Cf,{placement:"bottom-end",reference:g,children:se.jsxs(bM,{children:[se.jsx($u,{dense:!0,onClick:()=>{m(!0),s(!1)},label:Je.t("Edit"),icon:se.jsx(CT,{})}),se.jsx($u,{dense:!0,onClick:()=>{l(!0),s(!1)},label:Je.t("Sharing"),icon:se.jsx(V0,{})}),se.jsx($u,{dense:!0,destructive:!0,onClick:()=>{r(!0),s(!1)},label:Je.t("Delete"),icon:se.jsx(_T,{})})]})})})]})]}),a&&se.jsx(VE,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),l(!1)}}),h&&se.jsx(ZG,{routeId:i.id,onClose:()=>r(!1)}),p&&se.jsx(qG,{route:i,onClose:()=>m(!1)})]})},JG=({route:i})=>Be.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?se.jsx(Fo,{warning:!0,title:Je.t("Public access"),children:Je.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,eH=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:s}=l1({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:s}},tH=({authority:i})=>{const{user:e,isLoading:t,error:s}=eH(),a=Be.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:Be.useMemo(()=>{if(e)return a?!0:Array.isArray(i)?i.some(h=>e.authorities.includes(h)):e.authorities.includes(i)},[e,i,a]),isSuperUser:a,isLoading:t,error:s}},Pp=({children:i})=>se.jsx(_y,{children:se.jsxs("div",{className:Cn.container,children:[se.jsx("div",{className:Cn.header,children:se.jsx("h2",{children:Je.t("Route settings")})}),i]})}),iH="F_ROUTE_PRIVATE_ADD",rH="F_ROUTE_PUBLIC_ADD",nH=()=>{const{route:i,isLoading:e,error:t}=vd(),{hasAuthority:s,isLoading:a}=tH({authority:[iH,rH]});return Be.useEffect(()=>{t&&console.error(t)},[t]),e||a?se.jsx(Pp,{children:se.jsx("div",{className:Cn.loaderContainer,children:se.jsx(Yo,{})})}):t?se.jsx(Pp,{children:se.jsxs("div",{className:Cn.loaderContainer,children:[se.jsx("p",{className:Cn.mutedText,children:Je.t("There was an error loading the route settings. Please try to reload the page.")}),se.jsx("p",{className:Cn.mutedText,children:Je.t("If the problem persists, please contact your system administrator.")})]})}):s?i?se.jsx(Pp,{children:se.jsxs("div",{className:Cn.settingsContainer,children:[se.jsx(JG,{route:i}),se.jsxs("div",{className:Cn.routeInfo,children:[se.jsxs("div",{className:Cn.routeInfoHeader,children:[se.jsx("h3",{children:Je.t("Route configuration")}),se.jsx(QG,{route:i})]}),se.jsxs("div",{className:Cn.infoGrid,children:[se.jsx("span",{className:Cn.label,children:Je.t("Name")}),se.jsx("span",{className:Cn.value,children:i.displayName}),se.jsx("span",{className:Cn.label,children:Je.t("Code")}),se.jsx("span",{className:Cn.value,children:i.code}),se.jsx("span",{className:Cn.label,children:Je.t("URL")}),se.jsx("span",{className:Cn.value,children:i.url}),i.authorities.length>0?se.jsxs(se.Fragment,{children:[se.jsx("span",{className:Cn.label,children:Je.t("Authorities")}),se.jsx("div",{className:Cn.authorities,children:i.authorities.map((l,h)=>se.jsx("span",{className:Cn.authority,children:l},h))})]}):null]})]})]})}):se.jsx(Pp,{children:se.jsx(WG,{})}):se.jsx(Pp,{children:se.jsxs("div",{className:Cn.loaderContainer,children:[se.jsx("p",{className:Cn.mutedText,children:Je.t("You do not have permission to add or modify routes.")}),se.jsx("p",{className:Cn.mutedText,children:Je.t("If you think this is an error, please contact your system administrator.")})]})})},sH="_container_18e5w_1",aH="_header_18e5w_5",oH="_loaderContainer_18e5w_16",lH="_mutedText_18e5w_26",cH="_info_18e5w_31",hH="_infoHeader_18e5w_38",uH="_settingsContainer_18e5w_52",dH="_infoGrid_18e5w_58",pH="_label_18e5w_65",fH="_value_18e5w_70",_s={container:sH,header:aH,loaderContainer:oH,mutedText:lH,info:cH,infoHeader:hH,settingsContainer:uH,infoGrid:dH,label:pH,value:fH},rk=({route:i})=>{const{data:e,error:t,isLoading:s}=cd({queryKey:["systemInfo",i==null?void 0:i.url],queryFn:()=>NS.systemInfoSystemInfoGet(),enabled:!!i,staleTime:3e5,cacheTime:3e5,retry:0});return{status:e,error:t,isLoading:s}},mH=()=>{const{route:i}=vd(),{data:e,isLoading:t,error:s}=cd({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(a=>a.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:s||!e?se.jsx(Fo,{title:Je.t("Your server might not be secure"),children:se.jsx("span",{className:_s.mutedText,children:Je.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):se.jsx(se.Fragment,{children:se.jsx(Fo,{error:!0,title:Je.t("Your server is not secure"),children:se.jsx("span",{className:_s.mutedText,children:Je.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},F0=({children:i})=>se.jsx(_y,{children:se.jsxs("div",{className:_s.container,children:[se.jsx("div",{className:_s.header,children:se.jsx("h2",{children:Je.t("CHAP settings")})}),i]})}),gH=({route:i})=>{const{status:e,error:t,isLoading:s}=rk({route:i});return Be.useEffect(()=>{t&&console.error(t)},[t]),s?se.jsx(F0,{children:se.jsx("div",{className:_s.loaderContainer,children:se.jsx(Yo,{})})}):t||!e?se.jsx(F0,{children:se.jsx("div",{children:se.jsx(Fo,{error:!0,title:Je.t("An error occurred while connecting to the CHAP server."),className:_s.mutedText,children:Je.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):se.jsx(F0,{children:se.jsxs("div",{className:_s.settingsContainer,children:[se.jsx(mH,{}),se.jsxs("div",{className:_s.info,children:[se.jsx("div",{className:_s.infoHeader,children:se.jsx("h3",{children:Je.t("Server information")})}),se.jsxs("div",{className:_s.infoGrid,children:[e.chap_core_version&&se.jsxs(se.Fragment,{children:[se.jsx("span",{className:_s.label,children:Je.t("CHAP Version")}),se.jsx("span",{className:_s.value,children:e.chap_core_version})]}),e.python_version&&se.jsxs(se.Fragment,{children:[se.jsx("span",{className:_s.label,children:Je.t("Python Version")}),se.jsx("span",{className:_s.value,children:e.python_version})]}),e.os&&se.jsxs(se.Fragment,{children:[se.jsx("span",{className:_s.label,children:Je.t("Operating System")}),se.jsx("span",{className:_s.value,children:e.os})]}),se.jsx("span",{className:_s.label,children:Je.t("Status")}),se.jsx("span",{className:_s.value,style:{color:Ve.green600},children:Je.t("Connected")})]})]})]})})},yH=()=>{const{route:i}=vd();return se.jsxs("div",{className:X$.settingsContainer,children:[se.jsx(nH,{}),i&&se.jsx(gH,{route:i})]})},xH=function(){return null},vH="_noMatchMessage_35hxr_1",bH="_asideWrapper_35hxr_11",_H="_collapsed_35hxr_18",wH="_iconWrapper_35hxr_33",TH="_collapseButton_35hxr_53",Ip={noMatchMessage:vH,asideWrapper:bH,collapsed:_H,iconWrapper:wH,collapseButton:TH},CH="_active_1ej51_129",Ta={"sidenav-wrap":"_sidenav-wrap_1ej51_22","sidenav-items":"_sidenav-items_1ej51_40","sidenav-parent":"_sidenav-parent_1ej51_48","sidenav-parent-chevron":"_sidenav-parent-chevron_1ej51_83","parent-is-open":"_parent-is-open_1ej51_89","sidenav-link-wrapper":"_sidenav-link-wrapper_1ej51_94","sidenav-link":"_sidenav-link_1ej51_94","sidenav-link-disabled":"_sidenav-link-disabled_1ej51_120",active:CH,"sidenav-item-icon":"_sidenav-item-icon_1ej51_144","sidenav-parent-has-icon":"_sidenav-parent-has-icon_1ej51_154","sidenav-divider":"_sidenav-divider_1ej51_159","sidenav-section-title":"_sidenav-section-title_1ej51_165","sidenav-footer":"_sidenav-footer_1ej51_173","sidenav-filter":"_sidenav-filter_1ej51_177"},EH=({children:i,className:e})=>se.jsx("nav",{"data-test":"sidenav",className:an(Ta["sidenav-wrap"],e),children:i}),SH=({children:i})=>se.jsx("ul",{className:Ta["sidenav-items"],children:i}),kH=({label:i,icon:e,disabled:t,children:s,open:a,onClick:l})=>se.jsx(se.Fragment,{children:se.jsxs("li",{className:an(Ta["sidenav-parent"],{[Ta["sidenav-parent-has-icon"]]:e,[Ta["parent-is-open"]]:a}),children:[se.jsxs("button",{onClick:l,disabled:t,children:[e&&se.jsx("span",{className:Ta["sidenav-item-icon"],children:e}),se.jsx("span",{className:Ta["sidenav-parent-label"],children:i}),se.jsx("span",{className:Ta["sidenav-parent-chevron"],children:se.jsx(Bv,{})})]}),a&&se.jsx("ul",{className:Ta["sidenav-submenu"],children:s})]})}),AH=({children:i,disabled:e})=>se.jsx("li",{className:an(Ta["sidenav-link"],{[Ta["sidenav-link-disabled"]]:e}),children:i}),MH=({icon:i,active:e,disabled:t,children:s,to:a,LinkComponent:l,label:h,end:r})=>{const p=l?se.jsxs(l,{to:a,end:r,children:[i&&se.jsx("span",{className:Ta["sidenav-item-icon"],children:i}),h]}):se.jsxs("a",{href:a,className:an({[Ta.active]:e}),children:[i&&se.jsx("span",{className:Ta["sidenav-item-icon"],children:i}),h]});return se.jsx(AH,{disabled:t,children:Te.Children.count(s)>0?s:p})},xy=({to:i,label:e,disabled:t,end:s})=>se.jsx(MH,{to:i,disabled:t,LinkComponent:uS,label:e,end:s}),PH=({label:i,links:e=[],initiallyOpen:t=!0})=>{const[s,a]=Be.useState(t),l=()=>{a(!s)};return e.length===1?se.jsx(xy,{to:e[0].to,label:e[0].label,end:!0}):se.jsx(kH,{label:i,open:s,onClick:l,children:e.map(({to:h,label:r})=>se.jsx(xy,{to:h,label:r,end:!0},r))})},IH=({className:i,hideSidebar:e})=>{const[t,s]=Be.useState(!1);return Be.useEffect(()=>{e!==void 0&&s(e)},[e]),se.jsxs("aside",{className:an(Ip.asideWrapper,i,{[Ip.collapsed]:t}),children:[se.jsx(EH,{children:se.jsxs(SH,{children:[se.jsx(PH,{label:Je.t("Evaluate"),links:[{label:Je.t("Overview"),to:"/evaluate"},{label:Je.t("Compare"),to:"/evaluate/compare"}]}),se.jsx(xy,{to:"/predict",label:Je.t("Predict")}),se.jsx(xy,{to:"/settings",label:Je.t("Settings")})]})}),se.jsx("button",{className:Ip.collapseButton,type:"button",onClick:()=>s(!t),children:se.jsx("div",{className:an(Ip.iconWrapper,{[Ip.collapsed]:t}),children:se.jsx(vT,{})})})]})},DH="_wrapper_mpm4i_8",LH="_main_mpm4i_18",RH="_sidebar_mpm4i_26",zH="_hide_mpm4i_30",NH="_pageTitle_mpm4i_36",OH="_footer_mpm4i_43",vy={"m-medium":"(min-width: 768px)",wrapper:DH,main:LH,sidebar:RH,hide:zH,pageTitle:NH,footer:OH},jH=({children:i,sidebar:e})=>se.jsxs("div",{className:vy.wrapper,children:[e,se.jsx("div",{className:vy.main,children:i})]}),BH=({children:i,hideSidebar:e})=>se.jsx(jH,{sidebar:se.jsx(IH,{hideSidebar:e,className:an(vy.sidebar,{[vy.hide]:e})}),children:i}),FH=()=>se.jsx(BH,{children:se.jsx(aS,{})}),UH="_loadingContainer_111ob_1",$H="_noRouteContainer_111ob_8",VH="_noRouteContent_111ob_15",GH="_noRouteTitle_111ob_22",HH="_noRouteText_111ob_31",WH="_noRouteLink_111ob_38",zu={loadingContainer:UH,noRouteContainer:$H,noRouteContent:VH,noRouteTitle:GH,noRouteText:HH,noRouteLink:WH},qH=()=>se.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[se.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),se.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),se.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),se.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),se.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),se.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),se.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),se.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),se.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),se.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),se.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),se.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),se.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),se.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),se.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),se.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),se.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),se.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),se.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),se.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),se.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),YH=({children:i})=>{const{route:e,isLoading:t}=vd(),s=Vf();return t?se.jsx("div",{className:zu.loadingContainer,children:se.jsx(Yo,{})}):e?i:se.jsx("div",{className:zu.noRouteContainer,children:se.jsxs("div",{className:zu.noRouteContent,children:[se.jsx(qH,{}),se.jsx("h1",{className:zu.noRouteTitle,children:Je.t("Get started with the Modeling app")}),se.jsxs("div",{className:zu.noRouteText,children:[se.jsx("p",{children:Je.t("To get started, create a route that points to a running CHAP server.")}),se.jsx("p",{children:Je.t("Route and servers are configured on the settings page.")}),se.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:zu.noRouteLink,children:Je.t("Learn more about Modeling and CHAP")})]}),se.jsx(Wr,{onClick:()=>s("/settings"),children:Je.t("Configure settings")})]})})},ZH="_infoAboutReportingBugs_7cpvy_1",XH="_infoAboutReportingBugsInner_7cpvy_7",KH="_icon_7cpvy_17",U0={infoAboutReportingBugs:ZH,infoAboutReportingBugsInner:XH,icon:KH},nk="1400px",QH=()=>{const[i,e]=Be.useState(!0);return se.jsx("div",{className:U0.infoAboutReportingBugs,children:i&&se.jsxs("div",{style:{maxWidth:nk},className:U0.infoAboutReportingBugsInner,children:[se.jsxs("div",{children:[se.jsx("span",{className:U0.icon,children:se.jsx(IT,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",se.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),se.jsx("div",{children:se.jsx(Wr,{small:!0,onClick:()=>e(!i),children:se.jsx(_M,{})})})]})})},JH="_warningMargin_z0zs1_1",eW="_warningMarginInner_z0zs1_6",nT={warningMargin:JH,warningMarginInner:eW},tW=()=>{const{appVersion:i}=Ty(),{route:e,isLoading:t}=vd(),s=Be.useRef(void 0),[a,l]=Be.useState(void 0),h=async()=>{i&&await NS.isCompatibleIsCompatibleGet(i==null?void 0:i.full).then(r=>{l(r)}).catch(r=>{l({compatible:!1,description:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})})};return Be.useEffect(()=>{!i||t||s.current!==(e==null?void 0:e.url)&&(h(),s.current=e==null?void 0:e.url)},[i,e==null?void 0:e.url]),se.jsx(se.Fragment,{children:a&&!(a!=null&&a.compatible)&&se.jsx("div",{className:nT.warningMargin,style:{maxWidth:nk},children:se.jsx("div",{className:nT.warningMarginInner,children:se.jsxs(Fo,{error:!0,title:"Incompatible versions",children:["Version of the Modeling App is not compatible with the backend (Chap core)",se.jsx("br",{}),se.jsx("br",{}),se.jsx("i",{children:a.description})]})})})})},iW="_loadingContainer_1jc2q_1",rW="_noChapContainer_1jc2q_8",nW="_noChapIcon_1jc2q_15",sW="_noChapContent_1jc2q_26",aW="_noChapTitle_1jc2q_33",oW="_noChapText_1jc2q_42",lW="_noChapLink_1jc2q_49",lh={loadingContainer:iW,noChapContainer:rW,noChapIcon:nW,noChapContent:sW,noChapTitle:aW,noChapText:oW,noChapLink:lW},cW=({children:i})=>{const{route:e}=vd(),{status:t,error:s,isLoading:a}=rk({route:e}),l=Vf();return Be.useEffect(()=>{s&&console.error("CHAP connection error:",s)},[s]),a?se.jsx("div",{className:lh.loadingContainer,children:se.jsx(Yo,{})}):s||!t?se.jsx("div",{className:lh.noChapContainer,children:se.jsxs("div",{className:lh.noChapContent,children:[se.jsx("div",{className:lh.noChapIcon,children:se.jsx(Fv,{})}),se.jsx("h1",{className:lh.noChapTitle,children:Je.t("Could not connect to CHAP")}),se.jsxs("div",{className:lh.noChapText,children:[se.jsx("p",{children:Je.t("The app is not able to connect to the CHAP server.")}),se.jsx("p",{children:Je.t("Please check your route configuration and make sure the CHAP server is running.")}),se.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:lh.noChapLink,children:Je.t("Learn more about Modeling and CHAP")})]}),se.jsx(Wr,{onClick:()=>l("/settings"),children:Je.t("Configure settings")})]})}):i},hW="_selector_1powy_2",uW="_selectorWrapper_1powy_6",dW="_messageWrapper_1powy_10",pW="_evaluationOption_1powy_15",Bu={selector:hW,selectorWrapper:uW,messageWrapper:dW,evaluationOption:pW},fW=({onSelect:i,selected:e,compatibleEvaluationId:t,...s})=>{const{data:a,isLoading:l,isError:h,error:r,isSuccess:p}=cd({queryKey:["evaluations","compatible",t],queryFn:()=>t?Go.getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(t):Promise.resolve([]),enabled:t!=null,staleTime:3e5,cacheTime:3e5}),m=Te.useRef(i);m.current=i,Be.useEffect(()=>{e&&t!=null&&p&&!a.some(v=>v.id==(e==null?void 0:e.id))&&m.current(void 0)},[a,t,p]);const g=()=>p&&(a==null?void 0:a.length)===0?se.jsx($0,{children:Je.t("No compatible evaluations found")}):r?se.jsx($0,{error:!0,children:r.message??r.toString()}):null;return se.jsx("div",{className:Bu.selectorWrapper,children:se.jsx(sk,{available:a??[],selected:e,onSelect:i,disabled:t==null,error:h,loading:l,listMessage:g(),...s,placeholder:Je.t("Select evaluation to compare with")})})},sk=({onSelect:i,selected:e,available:t,listMessage:s,...a})=>{const{availableMap:l,availableList:h}=Be.useMemo(()=>{const r=new Map(t.map(p=>[p.id.toString(),p]));return e&&!r.has(e.id.toString())&&r.set(e==null?void 0:e.id.toString(),e),{availableMap:r,availableList:Array.from(r.values())}},[t,a.loading,e]);return se.jsx("div",{className:Bu.selectorWrapper,children:se.jsxs(Qv,{className:Bu.selector,onChange:({selected:r})=>i(l.get(r)),selected:(e==null?void 0:e.id.toString())||"",clearable:!0,filterable:!0,...a,prefix:e!=null?a.prefix||Je.t("Evaluation"):void 0,children:[s&&se.jsx("div",{className:Bu.messageWrapper,children:s}),h.map(r=>se.jsx(io,{value:r.id.toString(),label:se.jsxs("span",{className:Bu.evaluationOption,children:[r.name,se.jsx("span",{className:Bu.modelName,children:` - ${r.modelId}`})]})},r.id))]})})},mW="_wrapper_1mgtk_2",gW="_compareSelectors_1mgtk_9",yW="_selectorRow_1mgtk_15",xW="_selectionToolbar_1mgtk_25",vW="_emptySelection_1mgtk_35",bW="_iconGroup_1mgtk_53",_W="_arrowIcons_1mgtk_63",wW="_textGroup_1mgtk_80",TW="_footerSlider_1mgtk_96",Cl={wrapper:mW,compareSelectors:gW,selectorRow:yW,selectionToolbar:xW,emptySelection:vW,iconGroup:bW,arrowIcons:_W,textGroup:wW,footerSlider:TW},CW=()=>cd({queryKey:["backtests"],staleTime:60*5*1e3,queryFn:()=>to.getBacktestsCrudBacktestsGet(),select:i=>({evaluations:i,evaluationsMap:new Map(i.map(e=>[e.id.toString(),e]))})}),ak=Uu.object({baseEvaluation:Uu.string().optional(),comparisonEvaluation:Uu.array(Uu.string()).optional().default([])});ak.shape.comparisonEvaluation._type;const Bo={baseEvaluation:"baseEvaluation",comparisonEvaluation:"comparisonEvaluation",splitPoint:"splitPoint",orgUnit:"orgUnit"},EW=i=>({baseEvaluation:i.get(Bo.baseEvaluation),comparisonEvaluation:i.getAll(Bo.comparisonEvaluation)});function SW(i,e){return typeof i=="function"?i(e):i}const ok=(i,e)=>t=>{const s=new URLSearchParams(t),a=SW(e,t.getAll(i));return s.delete(i),a==null||a.forEach(l=>{s.append(i,l)}),s},kW=()=>{const[i,e]=Vb(),t=Be.useMemo(()=>{const r=EW(i),p=ak.safeParse(r);return p.success?p.data:{baseEvalation:void 0,comparisonEvaluation:[]}},[i]),s=Be.useCallback(r=>{e(p=>{const m=new URLSearchParams(p);return r?m.set(Bo.baseEvaluation,r):m.delete(Bo.baseEvaluation),m})},[e]),a=Be.useCallback(r=>{e(ok(Bo.comparisonEvaluation,r))},[e]),l=Be.useCallback(r=>a(r?[r]:[]),[a]),h=t.comparisonEvaluation[0];return{baseEvaluation:t.baseEvaluation,comparisonEvaluations:t.comparisonEvaluation,comparisonEvaluation:h,setBaseEvaluation:s,setComparisonEvaluations:a,setComparisonEvaluation:l}},AW=()=>{const i=CW(),{baseEvaluation:e,comparisonEvaluation:t,comparisonEvaluations:s,setComparisonEvaluations:a,...l}=kW();return{...Be.useMemo(()=>{if(!i.data)return{baseEvaluation:void 0,comparisonEvaluation:void 0,comparisonEvaluations:[]};const{evaluationsMap:r}=i.data;return{baseEvaluation:e?r.get(e):void 0,comparisonEvaluation:t?r.get(t):void 0}},[i.data,e,t]),...l,query:i}},MW=()=>{const[i,e]=Vb(),t=i.get(Bo.splitPoint),s=Be.useCallback(a=>{e(l=>{const h=new URLSearchParams(l);return a?h.set(Bo.splitPoint,a):h.delete(Bo.splitPoint),h})},[e]);return[t,s]},PW=()=>{const[i,e]=Vb(),t=i.getAll(Bo.orgUnit),s=Be.useCallback(a=>e(ok(Bo.orgUnit,a)),[e]);return[t,s]},IW=[.1,.25,.5,.75,.9],DW=i=>{const[e,t]=i.data,s=BS(e);return{evaluationEntries:e.map(a=>({...a,modelName:i.evaluation.name||void 0})),actualCases:t.data,splitPeriods:s,evaluation:i.evaluation}},LW={splitPeriod:void 0,orgUnits:void 0},RW=(i,{orgUnits:e,splitPeriod:t}=LW)=>{const s=fI({queries:i.map(l=>({queryKey:["evaluation-entry",l.id,{splitPeriod:t,orgUnits:e}],queryFn:async()=>{const h=Go.getEvaluationEntriesAnalyticsEvaluationEntryGet(l.id,IW,t,e),r=Go.getActualCasesAnalyticsActualCasesBacktestIdGet(l.id,e);return{data:await Promise.all([h,r]),evaluation:l}},select:DW,enabled:!!l,staleTime:6e4}))}),a=Be.useMemo(()=>{var m,g;const l=((g=(m=s[0])==null?void 0:m.data)==null?void 0:g.actualCases)||[],h=s.flatMap(v=>{var y;return((y=v.data)==null?void 0:y.evaluationEntries)||[]}),r=jS(h,l),p=s.flatMap(v=>{var y;return((y=v.data)==null?void 0:y.splitPeriods)||[]});return{viewData:r,splitPeriods:p}},[s]);return{queries:s,combined:a}},zW=i=>{const{baseEvaluation:e,comparisonEvaluation:t}=i;return cd({queryKey:["backtest-overlap",[e,t]],queryFn:()=>Go.getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t),staleTime:60*1e3*5,enabled:!!e&&!!t,select:Be.useCallback(s=>({...s,splitPeriods:s.splitPeriods.sort()}),[])})},NW=i=>i&&Array.isArray(i.organisationUnits),OW=i=>!!i.state.data&&NW(i.state.data),jW=i=>{const e=ad(),t=Be.useMemo(()=>{const s=new Set(i),a=e.getQueryCache().findAll(["organisationUnits"],{exact:!1}).flatMap(r=>{var p;return OW(r)?((p=r.state.data)==null?void 0:p.organisationUnits)??[]:[]}).filter(r=>s.has(r.id)),l=new Map(a.map(r=>[r.id,r]));return i.every(r=>l.has(r))?{organisationUnits:Array.from(l.values())}:void 0},[i,e]);return l1({queryKey:["organisationUnits",i],initialData:t,query:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"],filter:`id:in:[${i.join(",")}]`}},enabled:i.length>0,cacheTime:1/0,staleTime:1/0})},BW="_help_s6y39_2",FW={help:BW},UW=10,$W=({available:i,selected:e,onSelect:t,maxSelections:s=UW,...a})=>{const[l,h]=Be.useState(null),r=l!==null?l:e;return se.jsxs(YT,{prefix:Je.t("Organisation Units"),selected:r,disabled:i.length<1,onChange:({selected:p})=>h(p.slice(0,s)),onBlur:()=>{t({selected:l??[]}),h(null)},inputMaxHeight:"26px",children:[e.length>=s&&se.jsx($0,{className:FW.help,warning:!0,children:Je.t("You cannot select more than {{max}} organisation units at a time",{max:s})}),i.map(p=>se.jsx(ZT,{label:p.displayName,value:p.id},p.id))]})},VW="_wrapper_1bh8v_1",GW="_sliderContainer_1bh8v_9",HW="_labelsContainer_1bh8v_13",WW="_label_1bh8v_13",qW="_selectedLabelContainer_1bh8v_25",YW="_selectedLabel_1bh8v_25",ZW="_track_1bh8v_38",XW="_thumb_1bh8v_44",KW="_mark_1bh8v_58",vl={wrapper:VW,sliderContainer:GW,labelsContainer:HW,label:WW,selectedLabelContainer:qW,selectedLabel:YW,track:ZW,thumb:XW,mark:KW};var lk={},g1={},y1={},bd={};Object.defineProperty(bd,"__esModule",{value:!0});bd.Direction=void 0;var sT;(function(i){i.Right="to right",i.Left="to left",i.Down="to bottom",i.Up="to top"})(sT||(bd.Direction=sT={}));(function(i){var e=un&&un.__spreadArray||function(j,O,R){if(R||arguments.length===2)for(var L=0,G=O.length,$;L<G;L++)($||!(L in O))&&($||($=Array.prototype.slice.call(O,0,L)),$[L]=O[L]);return j.concat($||Array.prototype.slice.call(O))};Object.defineProperty(i,"__esModule",{value:!0}),i.isIOS=i.useThumbOverlap=i.assertUnreachable=i.voidFn=i.getTrackBackground=i.replaceAt=i.schd=i.translate=i.getClosestThumbIndex=i.translateThumbs=i.getPaddingAndBorder=i.getMargin=i.checkInitialOverlap=i.checkValuesAgainstBoundaries=i.checkBoundaries=i.isVertical=i.relativeValue=i.normalizeValue=i.isStepDivisible=i.isTouchEvent=i.getStepDecimals=void 0;var t=Be,s=bd,a=function(j){var O=j.toString().split(".")[1];return O?O.length:0};i.getStepDecimals=a;function l(j){return j.touches&&j.touches.length||j.changedTouches&&j.changedTouches.length}i.isTouchEvent=l;function h(j,O,R){var L=(O-j)/R,G=8,$=Number(L.toFixed(G));return parseInt($.toString(),10)===$}i.isStepDivisible=h;function r(j,O,R,L,G,$,F){var H=1e11;if(j=Math.round(j*H)/H,!$){var W=F[O-1],re=F[O+1];if(W&&W>j)return W;if(re&&re<j)return re}if(j>L)return L;if(j<R)return R;var he=Math.floor(j*H-R*H)%Math.floor(G*H),ie=Math.floor(j*H-Math.abs(he)),ae=he===0?j:ie/H,Ce=Math.abs(he/H)<G/2?ae:ae+G,ge=(0,i.getStepDecimals)(G);return parseFloat(Ce.toFixed(ge))}i.normalizeValue=r;function p(j,O,R){return(j-O)/(R-O)}i.relativeValue=p;function m(j){return j===s.Direction.Up||j===s.Direction.Down}i.isVertical=m;function g(j,O,R){if(O>=R)throw new RangeError("min (".concat(O,") is equal/bigger than max (").concat(R,")"));if(j<O)throw new RangeError("value (".concat(j,") is smaller than min (").concat(O,")"));if(j>R)throw new RangeError("value (".concat(j,") is bigger than max (").concat(R,")"))}i.checkBoundaries=g;function v(j,O,R){return j<O?O:j>R?R:j}i.checkValuesAgainstBoundaries=v;function y(j){if(!(j.length<2)&&!j.slice(1).every(function(O,R){return j[R]<=O}))throw new RangeError("values={[".concat(j,"]} needs to be sorted when allowOverlap={false}"))}i.checkInitialOverlap=y;function C(j){var O=window.getComputedStyle(j);return{top:parseInt(O["margin-top"],10),bottom:parseInt(O["margin-bottom"],10),left:parseInt(O["margin-left"],10),right:parseInt(O["margin-right"],10)}}i.getMargin=C;function b(j){var O=window.getComputedStyle(j);return{top:parseInt(O["padding-top"],10)+parseInt(O["border-top-width"],10),bottom:parseInt(O["padding-bottom"],10)+parseInt(O["border-bottom-width"],10),left:parseInt(O["padding-left"],10)+parseInt(O["border-left-width"],10),right:parseInt(O["padding-right"],10)+parseInt(O["border-right-width"],10)}}i.getPaddingAndBorder=b;function T(j,O,R){var L=R?-1:1;j.forEach(function(G,$){return k(G,L*O[$].x,O[$].y)})}i.translateThumbs=T;function S(j,O,R,L){for(var G=0,$=X(j[0],O,R,L),F=1;F<j.length;F++){var H=X(j[F],O,R,L);H<$&&($=H,G=F)}return G}i.getClosestThumbIndex=S;function k(j,O,R){j.style.transform="translate(".concat(O,"px, ").concat(R,"px)")}i.translate=k;var x=function(j){var O=[],R=null,L=function(){for(var G=[],$=0;$<arguments.length;$++)G[$]=arguments[$];O=G,!R&&(R=requestAnimationFrame(function(){R=null,j.apply(void 0,O)}))};return L};i.schd=x;function A(j,O,R){var L=j.slice(0);return L[O]=R,L}i.replaceAt=A;function D(j){var O=j.values,R=j.colors,L=j.min,G=j.max,$=j.direction,F=$===void 0?s.Direction.Right:$,H=j.rtl,W=H===void 0?!1:H;W&&F===s.Direction.Right?F=s.Direction.Left:W&&s.Direction.Left&&(F=s.Direction.Right);var re=O.slice(0).sort(function(ie,ae){return ie-ae}).map(function(ie){return(ie-L)/(G-L)*100}),he=re.reduce(function(ie,ae,Ce){return"".concat(ie,", ").concat(R[Ce]," ").concat(ae,"%, ").concat(R[Ce+1]," ").concat(ae,"%")},"");return"linear-gradient(".concat(F,", ").concat(R[0]," 0%").concat(he,", ").concat(R[R.length-1]," 100%)")}i.getTrackBackground=D;function w(){}i.voidFn=w;function I(j){throw new Error("Didn't expect to get here")}i.assertUnreachable=I;var N=function(j,O,R,L,G){G===void 0&&(G=function(F){return F});var $=Math.ceil(e([j],Array.from(j.children),!0).reduce(function(F,H){var W=Math.ceil(H.getBoundingClientRect().width);if(H.innerText&&H.innerText.includes(R)&&H.childElementCount===0){var re=H.cloneNode(!0);re.innerHTML=G(O.toFixed(L)),re.style.visibility="hidden",document.body.appendChild(re),W=Math.ceil(re.getBoundingClientRect().width),document.body.removeChild(re)}return W>F?W:F},j.getBoundingClientRect().width));return $},q=function(j,O,R,L,G,$,F){F===void 0&&(F=function(re){return re});var H=[],W=function(re){var he=N(R[re],L[re],G,$,F),ie=O[re].x;O.forEach(function(ae,Ce){var ge=ae.x,ke=N(R[Ce],L[Ce],G,$,F);re!==Ce&&(ie>=ge&&ie<=ge+ke||ie+he>=ge&&ie+he<=ge+ke)&&(H.includes(Ce)||(H.push(re),H.push(Ce),H=e(e([],H,!0),[re,Ce],!1),W(Ce)))})};return W(j),Array.from(new Set(H.sort()))},Y=function(j,O,R,L,G,$){L===void 0&&(L=.1),G===void 0&&(G=" - "),$===void 0&&($=function(Ce){return Ce});var F=(0,i.getStepDecimals)(L),H=(0,t.useState)({}),W=H[0],re=H[1],he=(0,t.useState)($(O[R].toFixed(F))),ie=he[0],ae=he[1];return(0,t.useEffect)(function(){if(j){var Ce=j.getThumbs();if(Ce.length<1)return;var ge={},ke=j.getOffsets(),K=q(R,ke,Ce,O,G,F,$),Q=$(O[R].toFixed(F));if(K.length){var le=K.reduce(function(ye,we,ze,Ee){return ye.length?e(e([],ye,!0),[ke[Ee[ze]].x],!1):[ke[Ee[ze]].x]},[]);if(Math.min.apply(Math,le)===ke[R].x){var _e=[];K.forEach(function(ye){_e.push(O[ye].toFixed(F))}),Q=Array.from(new Set(_e.sort(function(ye,we){return parseFloat(ye)-parseFloat(we)}))).map($).join(G);var J=Math.min.apply(Math,le),ne=Math.max.apply(Math,le),ue=Ce[K[le.indexOf(ne)]].getBoundingClientRect().width;ge.left="".concat(Math.abs(J-(ne+ue))/2,"px"),ge.transform="translate(-50%, 0)"}else ge.visibility="hidden"}ae(Q),re(ge)}},[j,O]),[ie,W]};i.useThumbOverlap=Y;function X(j,O,R,L){var G=j.getBoundingClientRect(),$=G.left,F=G.top,H=G.width,W=G.height;return m(L)?Math.abs(R-(F+W/2)):Math.abs(O-($+H/2))}var B=function(){var j,O=((j=navigator.userAgentData)===null||j===void 0?void 0:j.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(O)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};i.isIOS=B})(y1);var QW=un&&un.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),JW=un&&un.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,a)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),eq=un&&un.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),tq=un&&un.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&JW(e,i,t);return eq(e,i),e},aT=un&&un.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return i.concat(l||Array.prototype.slice.call(e))};Object.defineProperty(g1,"__esModule",{value:!0});var gg=tq(Be),Lr=y1,ls=bd,iq=["ArrowRight","ArrowUp","k","PageUp"],rq=["ArrowLeft","ArrowDown","j","PageDown"],nq=function(i){QW(e,i);function e(t){var s=i.call(this,t)||this;if(s.trackRef=gg.createRef(),s.thumbRefs=[],s.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(s.props.values.length).fill(0).map(function(a,l){return l}),isChanged:!1,markOffsets:[]},s.getOffsets=function(){var a=s.props,l=a.direction,h=a.values,r=a.min,p=a.max,m=s.trackRef.current;if(!m)return console.warn("No track element found."),[];var g=m.getBoundingClientRect(),v=(0,Lr.getPaddingAndBorder)(m);return s.getThumbs().map(function(y,C){var b={x:0,y:0},T=y.getBoundingClientRect(),S=(0,Lr.getMargin)(y);switch(l){case ls.Direction.Right:return b.x=(S.left+v.left)*-1,b.y=((T.height-g.height)/2+v.top)*-1,b.x+=g.width*(0,Lr.relativeValue)(h[C],r,p)-T.width/2,b;case ls.Direction.Left:return b.x=(S.right+v.right)*-1,b.y=((T.height-g.height)/2+v.top)*-1,b.x+=g.width-g.width*(0,Lr.relativeValue)(h[C],r,p)-T.width/2,b;case ls.Direction.Up:return b.x=((T.width-g.width)/2+S.left+v.left)*-1,b.y=-v.left,b.y+=g.height-g.height*(0,Lr.relativeValue)(h[C],r,p)-T.height/2,b;case ls.Direction.Down:return b.x=((T.width-g.width)/2+S.left+v.left)*-1,b.y=-v.left,b.y+=g.height*(0,Lr.relativeValue)(h[C],r,p)-T.height/2,b;default:return(0,Lr.assertUnreachable)(l)}})},s.getThumbs=function(){return s.trackRef&&s.trackRef.current?Array.from(s.trackRef.current.children).filter(function(a){return a.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},s.getTargetIndex=function(a){return s.getThumbs().findIndex(function(l){return l===a.target||l.contains(a.target)})},s.addTouchEvents=function(a){document.addEventListener("touchmove",s.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",s.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",s.schdOnEnd,{passive:!1})},s.addMouseEvents=function(a){document.addEventListener("mousemove",s.schdOnMouseMove),document.addEventListener("mouseup",s.schdOnEnd)},s.onMouseDownTrack=function(a){var l;if(!(a.button!==0||(0,Lr.isIOS)()))if(a.persist(),a.preventDefault(),s.addMouseEvents(a.nativeEvent),s.props.values.length>1&&s.props.draggableTrack){if(s.thumbRefs.some(function(r){var p;return(p=r.current)===null||p===void 0?void 0:p.contains(a.target)}))return;s.setState({draggedTrackPos:[a.clientX,a.clientY]},function(){return s.onMove(a.clientX,a.clientY)})}else{var h=(0,Lr.getClosestThumbIndex)(s.thumbRefs.map(function(r){return r.current}),a.clientX,a.clientY,s.props.direction);(l=s.thumbRefs[h].current)===null||l===void 0||l.focus(),s.setState({draggedThumbIndex:h},function(){return s.onMove(a.clientX,a.clientY)})}},s.onResize=function(){(0,Lr.translateThumbs)(s.getThumbs(),s.getOffsets(),s.props.rtl),s.calculateMarkOffsets()},s.onTouchStartTrack=function(a){var l;if(a.persist(),s.addTouchEvents(a.nativeEvent),s.props.values.length>1&&s.props.draggableTrack){if(s.thumbRefs.some(function(r){var p;return(p=r.current)===null||p===void 0?void 0:p.contains(a.target)}))return;s.setState({draggedTrackPos:[a.touches[0].clientX,a.touches[0].clientY]},function(){return s.onMove(a.touches[0].clientX,a.touches[0].clientY)})}else{var h=(0,Lr.getClosestThumbIndex)(s.thumbRefs.map(function(r){return r.current}),a.touches[0].clientX,a.touches[0].clientY,s.props.direction);(l=s.thumbRefs[h].current)===null||l===void 0||l.focus(),s.setState({draggedThumbIndex:h},function(){return s.onMove(a.touches[0].clientX,a.touches[0].clientY)})}},s.onMouseOrTouchStart=function(a){if(!s.props.disabled){var l=(0,Lr.isTouchEvent)(a);if(!(!l&&a.button!==0)){var h=s.getTargetIndex(a);h!==-1&&(l?s.addTouchEvents(a):s.addMouseEvents(a),s.setState({draggedThumbIndex:h,thumbZIndexes:s.state.thumbZIndexes.map(function(r,p){return p===h?Math.max.apply(Math,s.state.thumbZIndexes):r<=s.state.thumbZIndexes[h]?r:r-1})}))}}},s.onMouseMove=function(a){a.preventDefault(),s.onMove(a.clientX,a.clientY)},s.onTouchMove=function(a){a.preventDefault(),s.onMove(a.touches[0].clientX,a.touches[0].clientY)},s.onKeyDown=function(a){var l=s.props,h=l.values,r=l.onChange,p=l.step,m=l.rtl,g=l.direction,v=s.state.isChanged,y=s.getTargetIndex(a.nativeEvent),C=m||g===ls.Direction.Left||g===ls.Direction.Down?-1:1;y!==-1&&(iq.includes(a.key)?(a.preventDefault(),s.setState({draggedThumbIndex:y,isChanged:!0}),r((0,Lr.replaceAt)(h,y,s.normalizeValue(h[y]+C*(a.key==="PageUp"?p*10:p),y)))):rq.includes(a.key)?(a.preventDefault(),s.setState({draggedThumbIndex:y,isChanged:!0}),r((0,Lr.replaceAt)(h,y,s.normalizeValue(h[y]-C*(a.key==="PageDown"?p*10:p),y)))):a.key==="Tab"?s.setState({draggedThumbIndex:-1},function(){v&&s.fireOnFinalChange()}):v&&s.fireOnFinalChange())},s.onKeyUp=function(a){var l=s.state.isChanged;s.setState({draggedThumbIndex:-1},function(){l&&s.fireOnFinalChange()})},s.onMove=function(a,l){var h=s.state,r=h.draggedThumbIndex,p=h.draggedTrackPos,m=s.props,g=m.direction,v=m.min,y=m.max,C=m.onChange,b=m.values,T=m.step,S=m.rtl;if(r===-1&&p[0]===-1&&p[1]===-1)return null;var k=s.trackRef.current;if(!k)return null;var x=k.getBoundingClientRect(),A=(0,Lr.isVertical)(g)?x.height:x.width;if(p[0]!==-1&&p[1]!==-1){var D=a-p[0],w=l-p[1],I=0;switch(g){case ls.Direction.Right:case ls.Direction.Left:I=D/A*(y-v);break;case ls.Direction.Down:case ls.Direction.Up:I=w/A*(y-v);break;default:(0,Lr.assertUnreachable)(g)}if(S&&(I*=-1),Math.abs(I)>=T/2){for(var N=0;N<s.thumbRefs.length;N++){if(b[N]===y&&Math.sign(I)===1||b[N]===v&&Math.sign(I)===-1)return;var q=b[N]+I;q>y?I=y-b[N]:q<v&&(I=v-b[N])}for(var Y=b.slice(0),N=0;N<s.thumbRefs.length;N++)Y=(0,Lr.replaceAt)(Y,N,s.normalizeValue(b[N]+I,N));s.setState({draggedTrackPos:[a,l]}),C(Y)}}else{var X=0;switch(g){case ls.Direction.Right:X=(a-x.left)/A*(y-v)+v;break;case ls.Direction.Left:X=(A-(a-x.left))/A*(y-v)+v;break;case ls.Direction.Down:X=(l-x.top)/A*(y-v)+v;break;case ls.Direction.Up:X=(A-(l-x.top))/A*(y-v)+v;break;default:(0,Lr.assertUnreachable)(g)}S&&(X=y+v-X),Math.abs(b[r]-X)>=T/2&&C((0,Lr.replaceAt)(b,r,s.normalizeValue(X,r)))}},s.normalizeValue=function(a,l){var h=s.props,r=h.min,p=h.max,m=h.step,g=h.allowOverlap,v=h.values;return(0,Lr.normalizeValue)(a,l,r,p,m,g,v)},s.onEnd=function(a){if(a.preventDefault(),document.removeEventListener("mousemove",s.schdOnMouseMove),document.removeEventListener("touchmove",s.schdOnTouchMove),document.removeEventListener("mouseup",s.schdOnEnd),document.removeEventListener("touchend",s.schdOnEnd),document.removeEventListener("touchcancel",s.schdOnEnd),s.state.draggedThumbIndex===-1&&s.state.draggedTrackPos[0]===-1&&s.state.draggedTrackPos[1]===-1)return null;s.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){s.fireOnFinalChange()})},s.fireOnFinalChange=function(){s.setState({isChanged:!1});var a=s.props,l=a.onFinalChange,h=a.values;l&&l(h)},s.updateMarkRefs=function(a){if(!a.renderMark){s.numOfMarks=void 0,s.markRefs=void 0;return}s.numOfMarks=(a.max-a.min)/s.props.step,s.markRefs=[];for(var l=0;l<s.numOfMarks+1;l++)s.markRefs[l]=gg.createRef()},s.calculateMarkOffsets=function(){if(!(!s.props.renderMark||!s.trackRef||!s.numOfMarks||!s.markRefs||s.trackRef.current===null)){for(var a=window.getComputedStyle(s.trackRef.current),l=parseInt(a.width,10),h=parseInt(a.height,10),r=parseInt(a.paddingLeft,10),p=parseInt(a.paddingTop,10),m=[],g=0;g<s.numOfMarks+1;g++){var v=9999,y=9999;if(s.markRefs[g].current){var C=s.markRefs[g].current.getBoundingClientRect();v=C.height,y=C.width}s.props.direction===ls.Direction.Left||s.props.direction===ls.Direction.Right?m.push([Math.round(l/s.numOfMarks*g+r-y/2),-Math.round((v-h)/2)]):m.push([Math.round(h/s.numOfMarks*g+p-v/2),-Math.round((y-l)/2)])}s.setState({markOffsets:m})}},t.step===0)throw new Error('"step" property should be a positive number');return s.schdOnMouseMove=(0,Lr.schd)(s.onMouseMove),s.schdOnTouchMove=(0,Lr.schd)(s.onTouchMove),s.schdOnEnd=(0,Lr.schd)(s.onEnd),s.thumbRefs=t.values.map(function(){return gg.createRef()}),s.updateMarkRefs(t),s}return e.prototype.componentDidMount=function(){var t=this,s=this.props,a=s.values,l=s.min,h=s.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,Lr.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(r){return(0,Lr.checkBoundaries)(r,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,Lr.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),a.forEach(function(r){(0,Lr.isStepDivisible)(l,r,h)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(t,s){var a=this.props,l=a.max,h=a.min,r=a.step,p=a.values,m=a.rtl;(t.max!==l||t.min!==h||t.step!==r)&&this.updateMarkRefs(this.props),(0,Lr.translateThumbs)(this.getThumbs(),this.getOffsets(),m),(t.max!==l||t.min!==h||t.step!==r||s.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),p.forEach(function(g){(0,Lr.isStepDivisible)(h,g,r)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var t={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,t),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var t=this,s=this.props,a=s.label,l=s.labelledBy,h=s.renderTrack,r=s.renderThumb,p=s.renderMark,m=p===void 0?function(){return null}:p,g=s.values,v=s.min,y=s.max,C=s.allowOverlap,b=s.disabled,T=this.state,S=T.draggedThumbIndex,k=T.thumbZIndexes,x=T.markOffsets;return h({props:{style:{transform:"scale(1)",cursor:S>-1?"grabbing":this.props.draggableTrack?(0,Lr.isVertical)(this.props.direction)?"ns-resize":"ew-resize":g.length===1&&!b?"pointer":"inherit"},onMouseDown:b?Lr.voidFn:this.onMouseDownTrack,onTouchStart:b?Lr.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:b,children:aT(aT([],x.map(function(A,D,w){return m({props:{style:t.props.direction===ls.Direction.Left||t.props.direction===ls.Direction.Right?{position:"absolute",left:"".concat(A[0],"px"),marginTop:"".concat(A[1],"px")}:{position:"absolute",top:"".concat(A[0],"px"),marginLeft:"".concat(A[1],"px")},key:"mark".concat(D),ref:t.markRefs[D]},index:D})}),!0),g.map(function(A,D){var w=t.state.draggedThumbIndex===D;return r({index:D,value:A,isDragged:w,props:{style:{position:"absolute",zIndex:k[D],cursor:b?"inherit":w?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:D,tabIndex:b?void 0:0,"aria-valuemax":C?y:g[D+1]||y,"aria-valuemin":C?v:g[D-1]||v,"aria-valuenow":A,draggable:!1,ref:t.thumbRefs[D],"aria-label":a,"aria-labelledby":l,role:"slider",onKeyDown:b?Lr.voidFn:t.onKeyDown,onKeyUp:b?Lr.voidFn:t.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:ls.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(gg.Component);g1.default=nq;(function(i){var e=un&&un.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(i,"__esModule",{value:!0}),i.checkValuesAgainstBoundaries=i.relativeValue=i.useThumbOverlap=i.Direction=i.getTrackBackground=i.Range=void 0;var t=e(g1);i.Range=t.default;var s=y1;Object.defineProperty(i,"getTrackBackground",{enumerable:!0,get:function(){return s.getTrackBackground}}),Object.defineProperty(i,"useThumbOverlap",{enumerable:!0,get:function(){return s.useThumbOverlap}}),Object.defineProperty(i,"relativeValue",{enumerable:!0,get:function(){return s.relativeValue}}),Object.defineProperty(i,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return s.checkValuesAgainstBoundaries}});var a=bd;Object.defineProperty(i,"Direction",{enumerable:!0,get:function(){return a.Direction}})})(lk);const sq=(i,e,t)=>Math.max(e,Math.min(i,t)),aq=({splitPeriods:i,selectedSplitPeriod:e,onChange:t,periods:s=[],splitPeriodLength:a=3})=>{const l=i[i.length-1],h=C=>{const b=sq(C[0],0,i.length-1),T=i[b]??l;return t(T)},r=s.findIndex(C=>C===l),p=i.concat(s.slice(r+1,r+a)).concat("LAST_PERIOD"),m=Math.floor(p.length/2),g=[p[0],p[m],p[p.length-2]].filter((C,b,T)=>T.indexOf(C)===b).map(C=>Gp(C)),v=p.indexOf(e),y=()=>{const C=p.length-1,b=v*(100/(p.length-1)),T=(v+a)*(100/C);return`linear-gradient(
            to right,
            var(--colors-grey300) ${b}%,
            var(--colors-blue300) ${b}%,
            var(--colors-blue300) ${T}%,
            var(--colors-grey300) ${T}%
            
        )`};return se.jsxs("div",{className:vl.wrapper,children:[se.jsxs("div",{className:vl.selectedLabelContainer,children:[se.jsx(fT,{htmlFor:"splitPeriodSlider",children:Je.t("Split period")}),se.jsx("span",{className:vl.selectedLabel,children:`${Gp(e)} - ${Gp(p[v+2])}`})]}),se.jsx("div",{className:vl.sliderContainer,children:se.jsx(lk.Range,{labelledBy:"splitPeriodSlider",min:0,max:p.length-1,values:[v],renderThumb:({props:C})=>se.jsx("div",{...C,className:vl.thumb,children:se.jsx("svg",{width:"100%",height:"auto",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:se.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}),renderTrack:({props:C,children:b})=>Be.createElement("div",{...C,key:1,style:{...C.style,background:y()},className:vl.track},b),onChange:h,renderMark:({props:C,index:b})=>b>=i.length?null:Be.createElement("div",{...C,key:b,className:vl.mark})})}),se.jsx("div",{className:vl.labelsContainer,children:g.map(C=>se.jsx("span",{className:vl.label,children:C},C))})]})},oT=10,oq=()=>{var w,I,N;const{query:i,baseEvaluation:e,comparisonEvaluation:t,setBaseEvaluation:s,setComparisonEvaluation:a}=AW(),l=[e,t].filter(q=>!!q),[h,r]=PW(),[p,m]=MW(),g=zW({baseEvaluation:e==null?void 0:e.id,comparisonEvaluation:t==null?void 0:t.id}),v=(g.isSuccess?g.data.splitPeriods:(e==null?void 0:e.splitPeriods)??[]).sort(),y=p??v[0],C=g.isSuccess?g.data.orgUnits:(e==null?void 0:e.orgUnits)??[],b=jW(C),S=((h==null?void 0:h.length)>0?h:C).flatMap(q=>{var X;const Y=(X=b.data)==null?void 0:X.organisationUnits.find(B=>B.id===q);return Y?[Y]:[]}).slice(0,oT),k=g.isSuccess&&g.data.splitPeriods.length===0,{combined:x}=RW(l,{orgUnits:S.map(q=>q.id)});Be.useEffect(()=>{y&&v.length>0&&!v.some(q=>q===p)&&m(void 0)},[v,p]);const{dataForSplitPoint:A,periods:D}=Be.useMemo(()=>{var X;const q=x.viewData.filter(B=>B.splitPoint===y).flatMap(B=>B.evaluation.map(j=>{var O,R;return{...j,orgUnitName:((R=(O=b.data)==null?void 0:O.organisationUnits.find(L=>L.id===j.orgUnitId))==null?void 0:R.displayName)??j.orgUnitId}})),Y=((X=q[0])==null?void 0:X.models[0].data.periods)??[];return{dataForSplitPoint:q,periods:Y}},[x.viewData,y,(w=b.data)==null?void 0:w.organisationUnits]);return se.jsxs("div",{className:Cl.wrapper,children:[se.jsx(ay,{pageTitle:Je.t("Compare evaluations"),pageDescription:Je.t("Compare evaluations to assess model, co-variates and data performance.")}),se.jsxs("div",{className:Cl.selectionToolbar,children:[se.jsxs("div",{className:Cl.compareSelectors,children:[se.jsx(sk,{onSelect:q=>{s(q==null?void 0:q.id.toString())},selected:e,available:((I=i.data)==null?void 0:I.evaluations)??[],loading:i.isLoading,placeholder:Je.t("Select base evaluation")}),se.jsx(fW,{onSelect:q=>{a(q==null?void 0:q.id.toString())},selected:t,compatibleEvaluationId:e==null?void 0:e.id})]}),se.jsx("div",{className:Cl.selectorRow,children:se.jsx($W,{prefix:Je.t("Organisation Units"),selected:S.map(q=>q.id),disabled:C.length<1,onSelect:({selected:q})=>r(q),available:((N=b.data)==null?void 0:N.organisationUnits)??[],inputMaxHeight:"26px",maxSelections:oT})})]}),k&&se.jsx(Fo,{warning:!0,children:Je.t("Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.")}),v.length>0&&se.jsx("div",{className:Cl.footerSlider,children:se.jsx(aq,{splitPeriods:v,selectedSplitPeriod:y,onChange:m,periods:D})}),se.jsx("div",{children:x.viewData.length>0&&se.jsx(b3,{useVirtuoso:!1,evaluationPerOrgUnits:A})}),l.length===0&&se.jsx(lq,{})]})},lq=()=>se.jsxs("div",{className:Cl.emptySelection,children:[se.jsxs("div",{className:Cl.iconGroup,children:[se.jsx(MT,{}),se.jsxs("div",{className:Cl.arrowIcons,children:[se.jsx(yT,{}),se.jsx(gT,{})]}),se.jsx(PT,{})]}),se.jsxs("div",{className:Cl.textGroup,children:[se.jsx("p",{children:Je.t(`Select two evaluations to compare their results. The
                    selected evaluations must be compatible.`)}),se.jsx("p",{children:Je.t("Compatible evaluations have overlapping organisation units and split periods.")})]})]}),cq=()=>se.jsx(oq,{}),hq=$N([{element:se.jsx(FH,{}),errorElement:se.jsx(s2,{}),children:[{path:"/",element:se.jsx(gN,{to:"/evaluate",replace:!0})},{element:se.jsx(YH,{children:se.jsxs(cW,{children:[se.jsx(QH,{}),se.jsx(tW,{}),se.jsx(a2,{children:se.jsx(aS,{})})]})}),errorElement:se.jsx(s2,{}),children:[{path:"/evaluate",children:[{index:!0,element:se.jsx(B$,{})},{path:"compare",handle:{fullWidth:!0},element:se.jsx(cq,{})}]},{path:"/predict",element:se.jsx(q$,{})}]},{path:"/settings",element:se.jsx(a2,{children:se.jsx(yH,{})})}]}]),mq=()=>se.jsxs(se.Fragment,{children:[se.jsx(wM,{}),se.jsx(tE,{theme:!0,spacers:!0,colors:!0,elevations:!0}),se.jsx(Y$,{children:se.jsx(JN,{router:hq})}),se.jsx(xH,{position:"bottom-right"})]});export{mq as default};
