import{P as we,r as $e,R as Me,_ as jt,c as We,a as hs,t as ri,s as Jt,m as qA,b as ua,i as it,B as Vr,L as hv,d as cf,e as aw,f as Bx,C as Tl,I as ST,g as YA,l as ZA,S as XA,F as KA,h as Jm,j as QA,k as JA,n as eM,o as kT,p as tM,u as Kg,q as iM,v as rM,w as AT,x as nM,y as Ku,z as Ta,M as mh,A as uv,D as Qg,E as dv,G as pv,H as Jg,J as ey,K as hf,N as fv,O as ju,U as sM,Q as aM,T as vl,V as Rp,W as oM,X as pe,Y as lM,Z as Na,$ as Qu,a0 as cM,a1 as hM,a2 as mv,a3 as ty,a4 as uM,a5 as gv,a6 as dM,a7 as pM}from"./main-Bud9ScAW.js";const fM=i=>typeof i>"u"||i===null||i==="",ow=(i,e,t)=>(o,a,c)=>{const u=o[a];return t?new Error(`Property \`${a}\` on component \`${c}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(o)&&fM(u)?new Error(`Invalid prop \`${a}\` supplied to \`${c}\`, this prop is conditionally required but has value \`${u}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(we.checkPropTypes({[a]:e},o,"prop",c),null)};function Iu(i,e){const t=ow(i,e,!1);return t.isRequired=ow(i,e,!0),t}function yv(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}yv.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function xv(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}xv.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function MT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}MT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function PT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M7.354 2.646a.5.5 0 01.057.638l-.057.07L3.207 7.5H14a.5.5 0 01.09.992L14 8.5H3.207l4.147 4.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-5-5a.5.5 0 01-.057-.638l.057-.07 5-5a.5.5 0 01.708 0z",fill:"currentColor"}))}PT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function iy(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}iy.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function bv(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}bv.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function IT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}IT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function DT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}DT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function RT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M7.646 5.646a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01-.638.765l-.07-.057L8 6.707 4.854 9.854a.5.5 0 01-.638.057l-.07-.057a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}RT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function LT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}LT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function zT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}zT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function NT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}NT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function OT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}OT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function jT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}jT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function BT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}BT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function FT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}FT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function UT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}UT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function $T(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}$T.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function VT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}VT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function GT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},$e.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}GT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function HT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}HT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};function WT(i){let{color:e,dataTest:t,ariaLabel:o}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}WT.propTypes={color:we.string,dataTest:we.string,ariaLabel:we.string};const aa=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${We.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${We.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${We.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${We.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${We.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${We.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${We.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${We.white};}`];aa.__hash="4069423049";function qT(i){let{className:e}=i;return Me.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${aa.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" "+(e||"")},Me.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${aa.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" background"}),Me.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${aa.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" border"}),Me.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${aa.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" checkmark"}),Me.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${aa.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" indeterminate"}),Me.createElement(jt,{id:aa.__hash},aa),Me.createElement(jt,{id:"2753140462",dynamic:[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${We.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red700};}`]))}qT.propTypes={className:we.string};function YT(i){let{className:e}=i;return Me.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${aa.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" "+(e||"")},Me.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${aa.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" background"}),Me.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${aa.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" border"}),Me.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${aa.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" checkmark"}),Me.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${aa.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" indeterminate"}),Me.createElement(jt,{id:aa.__hash},aa),Me.createElement(jt,{id:"86695588",dynamic:[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red800};}`]))}YT.propTypes={className:we.string};function Su(i,e,t){return(e=mM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function mM(i){var e=gM(i,"string");return typeof e=="symbol"?e:e+""}function gM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class ry extends $e.Component{constructor(){super(...arguments),Su(this,"ref",$e.createRef()),Su(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),Su(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),Su(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),Su(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:o,disabled:a,error:c,label:u,name:n,tabIndex:p,valid:m,value:g,warning:v,dense:y,dataTest:k="dhis2-uicore-checkbox"}=this.props,_=hs({checked:e,indeterminate:t,disabled:a,valid:m,error:c,warning:v});return Me.createElement("label",{"data-test":k,className:jt.dynamic([["1252368010",[We.grey900,ri.disabled,Jt.dp4,ri.focus]]])+" "+(hs(o,{disabled:a,dense:y})||"")},Me.createElement("input",{type:"checkbox",ref:this.ref,name:n,value:g,checked:e,disabled:a,tabIndex:p,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:jt.dynamic([["1252368010",[We.grey900,ri.disabled,Jt.dp4,ri.focus]]])}),Me.createElement("div",{className:jt.dynamic([["1252368010",[We.grey900,ri.disabled,Jt.dp4,ri.focus]]])+" "+(hs("icon",{dense:y})||"")},y?Me.createElement(YT,{className:_}):Me.createElement(qT,{className:_})),u,Me.createElement(jt,{id:"1252368010",dynamic:[We.grey900,ri.disabled,Jt.dp4,ri.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${We.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${ri.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Jt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${ri.focus};outline-offset:-3px;}`]))}}Su(ry,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const lw=qA(["checked","indeterminate"],we.bool);ry.propTypes={checked:lw,className:we.string,dataTest:we.string,dense:we.bool,disabled:we.bool,error:ua,indeterminate:lw,initialFocus:we.bool,label:we.node,name:we.string,tabIndex:we.string,valid:ua,value:we.string,warning:ua,onBlur:we.func,onChange:we.func,onFocus:we.func,onKeyDown:we.func};const yM={"Toggle dropdown":"Toggle dropdown"},xM="default";it.addResources("en",xM,yM);function ku(i,e,t){return(e=bM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bM(i){var e=vM(i,"string");return typeof e=="symbol"?e:e+""}function vM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const cw={styles:Me.createElement(jt,{id:"2502148942"},[`button.jsx-2502148942{padding:0 ${Jt.dp12};}`]),className:"jsx-2502148942"};class vv extends $e.Component{constructor(){super(...arguments),ku(this,"state",{open:!1}),ku(this,"anchorRef",Me.createRef()),ku(this,"handleKeyDown",e=>{e.key==="Escape"&&this.state.open&&(e.preventDefault(),e.stopPropagation(),this.setState({open:!1}),this.anchorRef.current&&this.anchorRef.current.focus())}),ku(this,"onClick",(e,t)=>{this.props.onClick&&this.props.onClick({name:e.name,value:e.value,open:this.state.open},t)}),ku(this,"onToggle",()=>{this.setState(e=>({open:!e.open}))})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){const{open:e}=this.state,{component:t,children:o,className:a,name:c,value:u,icon:n,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:k,type:_,tabIndex:T,dataTest:M="dhis2-uicore-splitbutton",initialFocus:A}=this.props,x=e?Me.createElement(RT,null):Me.createElement(bv,null);return Me.createElement("div",{ref:this.anchorRef,"data-test":M,className:"jsx-2116647326"},Me.createElement(Vr,{name:c,value:u,icon:n,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:k,onClick:this.onClick,type:_,tabIndex:T,className:hs(a),initialFocus:A,dataTest:`${M}-button`},o),Me.createElement(Vr,{name:c,value:u,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:k,onClick:this.onToggle,type:_,tabIndex:T,className:hs(a,cw.className),dataTest:`${M}-toggle`,title:it.t("Toggle dropdown"),"aria-label":it.t("Toggle dropdown")},x),e&&Me.createElement(hv,{onBackdropClick:this.onToggle,transparent:!0},Me.createElement(cf,{dataTest:`${M}-menu`,placement:"bottom-end",reference:this.anchorRef},t)),cw.styles,Me.createElement(jt,{id:"2116647326"},["div.jsx-2116647326{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:inherit;white-space:nowrap;position:relative;z-index:0;}","div.jsx-2116647326>button:first-child{border-start-end-radius:0;border-end-end-radius:0;border-inline-end:0;}","div.jsx-2116647326>button:last-child{border-start-start-radius:0;border-end-start-radius:0;}"]))}}ku(vv,"defaultProps",{dataTest:"dhis2-uicore-splitbutton"});vv.propTypes={children:we.string,className:we.string,component:we.element,dataTest:we.string,destructive:we.bool,disabled:we.bool,icon:we.element,initialFocus:we.bool,large:aw,name:we.string,primary:we.bool,secondary:we.bool,small:aw,tabIndex:we.string,type:we.oneOf(["submit","reset","button"]),value:we.string,onClick:we.func};var _M=void 0;const wM=(i,e,t)=>{let o;return function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];const n=_M,p=()=>{o=null,i.apply(n,c)};clearTimeout(o),o=setTimeout(p,e)}},ZT=i=>{let{dataTest:e,onToggle:t,children:o,tabIndex:a="0",error:c,warning:u,valid:n,disabled:p,dense:m,className:g,inputRef:v}=i;const y=hs(g,"root",{error:c,warning:u,valid:n,disabled:p,dense:m});return Me.createElement("div",{onClick:t,tabIndex:a,ref:v,"data-test":e,className:jt.dynamic([["1568723238",[We.grey500,ri.focus,ri.focus,ri.valid,ri.warning,ri.error,We.grey100,We.grey500,ri.disabled]]])+" "+(y||"")},Me.createElement("div",{className:jt.dynamic([["1568723238",[We.grey500,ri.focus,ri.focus,ri.valid,ri.warning,ri.error,We.grey100,We.grey500,ri.disabled]]])+" root-children"},o),Me.createElement("div",{className:jt.dynamic([["1568723238",[We.grey500,ri.focus,ri.focus,ri.valid,ri.warning,ri.error,We.grey100,We.grey500,ri.disabled]]])+" root-right"},Me.createElement(bv,null)),Me.createElement(jt,{id:"1568723238",dynamic:[We.grey500,ri.focus,ri.focus,ri.valid,ri.warning,ri.error,We.grey100,We.grey500,ri.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${We.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${ri.focus};border-color:${ri.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${ri.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${ri.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${ri.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${We.grey100};border-color:${We.grey500};color:${ri.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:8px;}"]))};ZT.propTypes={dataTest:we.string.isRequired,inputRef:we.object.isRequired,onToggle:we.func.isRequired,children:we.element,className:we.string,dense:we.bool,disabled:we.bool,error:ua,tabIndex:we.string,valid:ua,warning:ua};const XT=i=>{let{children:e,dataTest:t,maxHeight:o="280px",menuWidth:a,onClick:c,selectRef:u}=i;return Me.createElement(hv,{onBackdropClick:c,transparent:!0},Me.createElement(cf,{reference:u,placement:"bottom-start",observeReferenceResize:!0},Me.createElement("div",{"data-test":`${t}-menuwrapper`,className:jt.dynamic([["1363246346",[a,o,We.white,We.grey200,Bx.e300]]])},e,Me.createElement(jt,{id:"1363246346",dynamic:[a,o,We.white,We.grey200,Bx.e300]},[`div.__jsx-style-dynamic-selector{width:${a};height:auto;max-height:${o};overflow:auto;background:${We.white};border:1px solid ${We.grey200};border-radius:3px;box-shadow:${Bx.e300};}`]))))};XT.propTypes={dataTest:we.string.isRequired,menuWidth:we.string.isRequired,selectRef:we.object.isRequired,children:we.node,maxHeight:we.string,onClick:we.func};function qa(i,e,t){return(e=TM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function TM(i){var e=EM(i,"string");return typeof e=="symbol"?e:e+""}function EM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const CM=27,SM=32,kM=38,AM=40;class _v extends $e.Component{constructor(){super(...arguments),qa(this,"state",{open:!1,menuWidth:"auto"}),qa(this,"selectRef",Me.createRef()),qa(this,"inputRef",Me.createRef()),qa(this,"onResize",wM(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),qa(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),qa(this,"onFocus",e=>{const{onFocus:t,disabled:o,selected:a}=this.props;o||!t||t({selected:a},e)}),qa(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),qa(this,"handleClose",()=>{this.setState({open:!1})}),qa(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),qa(this,"onOutsideClick",e=>{const{onBlur:t,disabled:o,selected:a}=this.props;o||(this.handleClose(),t&&t({selected:a},e))}),qa(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:o,selected:a}=this.props;if(o||(t&&t({selected:a},e),e.defaultPrevented))return;e.stopPropagation();const{open:c}=this.state,{keyCode:u}=e,n=!c&&(u===SM||u===kM||u===AM);if(c&&u===CM)return this.handleClose();if(n)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:o,className:a,selected:c,onChange:u,tabIndex:n,maxHeight:p,error:m,warning:g,valid:v,disabled:y,dense:k,dataTest:_}=this.props,T={selected:c,onChange:u,options:o,disabled:y},M=Me.cloneElement(this.props.input,T),A={selected:c,onChange:u,options:o,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},x=Me.cloneElement(this.props.menu,A);return Me.createElement("div",{className:a,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":_},Me.createElement(ZT,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:y?"-1":n,error:m,warning:g,valid:v,disabled:y,dense:k,dataTest:`${_}-input`},M),e&&Me.createElement(XT,{onClick:this.onOutsideClick,maxHeight:p,selectRef:this.selectRef,menuWidth:t,dataTest:`${_}-menu`},x))}}qa(_v,"defaultProps",{dataTest:"dhis2-uicore-select"});_v.propTypes={input:we.element.isRequired,menu:we.element.isRequired,selected:we.oneOfType([we.string,we.arrayOf(we.string)]).isRequired,children:we.node,className:we.string,dataTest:we.string,dense:we.bool,disabled:we.bool,error:ua,initialFocus:we.bool,maxHeight:we.string,tabIndex:we.string,valid:ua,warning:ua,onBlur:we.func,onChange:we.func,onFocus:we.func,onKeyDown:we.func};const KT=i=>{let{message:e,className:t,dataTest:o}=i;return Me.createElement("div",{"data-test":o,className:jt.dynamic([["3603755746",[Jt.dp16,We.grey700,ri.fonts,Jt.dp8,Jt.dp24]]])+" "+(hs(t,"container")||"")},Me.createElement("div",{className:jt.dynamic([["3603755746",[Jt.dp16,We.grey700,ri.fonts,Jt.dp8,Jt.dp24]]])},Me.createElement(Tl,{small:!0})),e,Me.createElement(jt,{id:"3603755746",dynamic:[Jt.dp16,We.grey700,ri.fonts,Jt.dp8,Jt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Jt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${We.grey700};font-family:${ri.fonts};font-size:13px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};}`]))};KT.propTypes={dataTest:we.string.isRequired,className:we.string,message:we.string};const Eb=i=>{let{value:e,onChange:t,placeholder:o,className:a,dataTest:c}=i;return Me.createElement("div",{className:jt.dynamic([["730881408",[We.white,Jt.dp8,Jt.dp8,Jt.dp4,Jt.dp8]]])+" "+(a||"")},Me.createElement(ST,{dense:!0,dataTest:c,value:e,onChange:t,type:"text",name:"filter",placeholder:o,initialFocus:!0}),Me.createElement(jt,{id:"730881408",dynamic:[We.white,Jt.dp8,Jt.dp8,Jt.dp4,Jt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${We.white};padding-block-start:${Jt.dp8};padding-inline-end:${Jt.dp8};padding-block-end:${Jt.dp4};padding-inline-start:${Jt.dp8};z-index:1;}`]))};Eb.propTypes={dataTest:we.string.isRequired,value:we.string.isRequired,className:we.string,placeholder:we.string,onChange:we.func};const QT=i=>{let{message:e,className:t}=i;return Me.createElement("div",{className:jt.dynamic([["3788156646",[We.grey700,ri.fonts,Jt.dp8,Jt.dp24]]])+" "+(t||"")},e,Me.createElement(jt,{id:"3788156646",dynamic:[We.grey700,ri.fonts,Jt.dp8,Jt.dp24]},[`div.__jsx-style-dynamic-selector{color:${We.grey700};font-family:${ri.fonts};font-size:13px;line-height:16px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};text-align:center;}`]))};QT.propTypes={message:we.string.isRequired,className:we.string};const JT=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,eE=i=>Me.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),MM=(i,e)=>Me.Children.toArray(e).find(t=>t.props?i===t.props.value:!1);function gg(){return gg=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)({}).hasOwnProperty.call(t,o)&&(i[o]=t[o])}return i},gg.apply(null,arguments)}function hw(i,e,t){return(e=PM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function PM(i){var e=IM(i,"string");return typeof e=="symbol"?e:e+""}function IM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let tE=class extends $e.Component{constructor(){super(...arguments),hw(this,"state",{filter:""}),hw(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:o,selected:a,empty:c,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m,Menu:g}=this.props,{filter:v}=this.state,y={onChange:o,selected:a,empty:c,handleClose:u,handleFocusInput:n,dataTest:e},k=eE(t);if(Me.Children.count(k)===0||!v)return Me.createElement(Me.Fragment,null,Me.createElement(Eb,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),Me.createElement(g,gg({},y,{options:t})));const _=Me.Children.map(t,M=>{if(!JT(M))return null;const{label:x}=M.props;return x.toLowerCase().includes(v.toLowerCase())?M:null}),T=Me.Children.count(_)>0;return Me.createElement(Me.Fragment,null,Me.createElement(Eb,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),T?Me.createElement(g,gg({},y,{options:_})):Me.createElement(QT,{message:m}))}};tE.propTypes={Menu:we.elementType.isRequired,dataTest:we.string.isRequired,noMatchText:we.string.isRequired,selected:we.oneOfType([we.string,we.arrayOf(we.string)]).isRequired,empty:we.node,handleClose:we.func,handleFocusInput:we.func,options:we.node,placeholder:we.string,onChange:we.func};const iE=i=>{let{message:e,className:t,dataTest:o}=i;return Me.createElement("div",{"data-test":o,className:jt.dynamic([["3788156646",[We.grey700,ri.fonts,Jt.dp8,Jt.dp24]]])+" "+(t||"")},e,Me.createElement(jt,{id:"3788156646",dynamic:[We.grey700,ri.fonts,Jt.dp8,Jt.dp24]},[`div.__jsx-style-dynamic-selector{color:${We.grey700};font-family:${ri.fonts};font-size:13px;line-height:16px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};text-align:center;}`]))};iE.propTypes={dataTest:we.string.isRequired,message:we.string.isRequired,className:we.string};const DM=4,uw={styles:Me.createElement(jt,{id:"1892168270"},[`.jsx-1892168270{z-index:${ZA.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},RM={name:"offset",options:{offset:[0,DM]}},LM={name:"hide"},zM={name:"flip",options:{altBoundary:!0}},ny=i=>{let{children:e,className:t,closeDelay:o=200,content:a,dataTest:c="dhis2-uicore-tooltip",maxWidth:u=300,openDelay:n=200,placement:p="top"}=i;const[m,g]=$e.useState(!1),v=$e.useRef(),y=$e.useRef(null),k=$e.useRef(null),_=()=>{clearTimeout(k.current),y.current=setTimeout(()=>{g(!0)},n)},T=()=>{clearTimeout(y.current),k.current=setTimeout(()=>{g(!1)},o)},M=()=>{clearTimeout(k.current),y.current=setTimeout(()=>{g(!0)},n)},A=()=>{clearTimeout(y.current),k.current=setTimeout(()=>{g(!1)},o)},x=P=>{P.key==="Escape"&&(k.current=setTimeout(()=>{g(!1)},o))};return $e.useEffect(()=>(document.addEventListener("keydown",x),()=>{clearTimeout(y.current),clearTimeout(k.current),document.removeEventListener("keydown",x)}),[]),Me.createElement(Me.Fragment,null,typeof e=="function"?e({onMouseOver:_,onMouseOut:T,onFocus:M,onBlur:A,ref:v}):Me.createElement("span",{onMouseOver:_,onMouseOut:T,onFocus:M,onBlur:A,ref:v,tabIndex:0,"aria-describedby":m?"tooltipContenDhis2Ui":"","data-test":`${c}-reference`,className:jt.dynamic([["3515683788",[u,We.grey900,We.white]]])},e),m&&Me.createElement(YA,null,Me.createElement(cf,{className:uw.className,placement:p,reference:v,modifiers:[RM,zM,LM]},Me.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:_,onMouseOut:T,"data-test":`${c}-content`,role:"tooltip",className:jt.dynamic([["3515683788",[u,We.grey900,We.white]]])+" "+(t||"")},a))),uw.styles,Me.createElement(jt,{id:"3515683788",dynamic:[u,We.grey900,We.white]},[`div.__jsx-style-dynamic-selector{max-width:${u}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${We.grey900};border-radius:3px;color:${We.white};font-size:13px;line-height:17px;}`]))};ny.propTypes={children:we.oneOfType([we.node,we.func]),className:we.string,closeDelay:we.number,content:we.node,dataTest:we.string,maxWidth:we.number,openDelay:we.number,placement:we.oneOf(["top","right","bottom","left"])};const rE=i=>{let{onClear:e,clearText:t,className:o,dataTest:a}=i;return Me.createElement(ny,{openDelay:500,content:t},Me.createElement("button",{"data-test":a,onClick:e,type:"button",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ri.focus]]])+" "+(o||"")},Me.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ri.focus]]])},Me.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ri.focus]]])})),Me.createElement(jt,{id:"2606883952",dynamic:[We.grey500,We.grey800,We.grey200,ri.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${We.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${We.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${We.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${ri.focus};}`])))};rE.propTypes={clearText:we.string.isRequired,dataTest:we.string.isRequired,onClear:we.func.isRequired,className:we.string};const nE=i=>{let{placeholder:e,className:t,dataTest:o}=i;return e?Me.createElement("div",{"data-test":o,className:jt.dynamic([["1027033961",[We.grey600]]])+" "+(t||"")},e,Me.createElement(jt,{id:"1027033961",dynamic:[We.grey600]},[`div.__jsx-style-dynamic-selector{color:${We.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};nE.propTypes={dataTest:we.string.isRequired,className:we.string,placeholder:we.string};const sE=i=>{let{prefix:e,className:t,dataTest:o}=i;return e?Me.createElement("div",{"data-test":o,className:jt.dynamic([["1343055987",[We.grey600,Jt.dp12]]])+" "+(t||"")},e,Me.createElement(jt,{id:"1343055987",dynamic:[We.grey600,Jt.dp12]},[`div.__jsx-style-dynamic-selector{color:${We.grey600};padding-inline-end:${Jt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};sE.propTypes={dataTest:we.string.isRequired,className:we.string,prefix:we.string};const NM="مسح",OM={Clear:NM,"No data found":"لم يتم إيجاد بيانات","Type to filter options":"اكتب لتصفية الخيارات","Loading options":"تحميل الخيارات","No options found":"لم يتم العثور على خيارات"},jM="مسح",BM={Clear:jM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},FM="پاککردنەوە",UM={Clear:FM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},$M="Vyčistit",VM={Clear:$M,"No data found":"Nenalezena žádná data","Type to filter options":"Zadáním filtrujete možnosti","Loading options":"Možnosti načítání","No options found":"Nenalezeny žádné možnosti"},GM="Clear",HM={Clear:GM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},WM="",qM={Clear:WM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},YM="Limpiar",ZM={Clear:YM,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opción"},XM="Limpiar",KM={Clear:XM,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},QM="Effacer",JM={Clear:QM,"No data found":"Aucune valeur trouvée","Type to filter options":"","Loading options":"Chargement des options","No options found":""},eP="Hapus",tP={Clear:eP,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},iP="សម្អាត",rP={Clear:iP,"No data found":"មិនមានទិន្នន័យបង្ហាញ","Type to filter options":"វាយបញ្ចូលមុខងារដើម្បីច្រោះ","Loading options":"កំពុងទាញយកមុខងារ","No options found":"មិនមានមុខងារបង្ហាញ"},nP="ລຶບ",sP={Clear:nP,"No data found":"ບໍ່ພົບຂໍ້ມູນ","Type to filter options":"ປະເພດຕົວເລືອກການກອງ","Loading options":"ໂຫຼດຕົວເລືອກ","No options found":"ບໍ່ພົບຕົວເລືອກ"},aP="ရှင်းလင်းသည်",oP={Clear:aP,"No data found":"data မတွေ့ပါ။","Type to filter options":"","Loading options":"","No options found":""},lP="Fjern",cP={Clear:lP,"No data found":"Ingen data funnet","Type to filter options":"Skriv for å filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},hP="Duidelijk",uP={Clear:hP,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},dP="پاک کردن",pP={Clear:dP,"No data found":"هیچ معلوماتی یافت نشد","Type to filter options":"","Loading options":"","No options found":""},fP="پاک یې کړئ",mP={Clear:fP,"No data found":"هېڅ ډاټا یا مالومات ونه موندل شول","Type to filter options":"","Loading options":"","No options found":""},gP="Limpar",yP={Clear:gP,"No data found":"Dado não encontrado","Type to filter options":"Tipo de opções de filtros","Loading options":"","No options found":""},xP="Limpar",bP={Clear:xP,"No data found":"Dado não encontrado","Type to filter options":"","Loading options":"","No options found":""},vP="Очистить",_P={Clear:vP,"No data found":"Данные не найдены","Type to filter options":"Начать печатать для фильтрации опций","Loading options":"Загрузка опций","No options found":"Опции не найдены"},wP="Klar",TP={Clear:wP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},EP="Hamós",CP={Clear:EP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},SP="Пок кардан",kP={Clear:SP,"No data found":"Ягон иттилоот ёфт нашуд","Type to filter options":"","Loading options":"","No options found":""},AP="Очистити",MP={Clear:AP,"No data found":"Даних не знайдено","Type to filter options":"Введіть параметри фільтра","Loading options":"Параметри завантаження","No options found":"Варіантів не знайдено"},PP="کلیئر",IP={Clear:PP,"No data found":"کوئی ڈیٹا نہیں ملا","Type to filter options":"","Loading options":"","No options found":""},DP="Аниқ",RP={Clear:DP,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},LP="Тозалаш",zP={Clear:LP,"No data found":"Маълумотлар топилмади","Type to filter options":"","Loading options":"Вариантлар юкланмоқда","No options found":""},NP="Аниқ",OP={Clear:NP,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},jP="Xóa",BP={Clear:jP,"No data found":"Không tìm thấy dữ liệu","Type to filter options":"Nhập để lọc tùy chọn","Loading options":"","No options found":""},FP="清除",UP={Clear:FP,"No data found":"没有发现数据","Type to filter options":"键入过滤选项","Loading options":"加载选项","No options found":"没有找到选项"},$P="清除",VP={Clear:$P,"No data found":"没有数据被找到","Type to filter options":"","Loading options":"","No options found":""},Gr="default";it.addResources("ar",Gr,OM);it.addResources("ar_IQ",Gr,BM);it.addResources("ckb",Gr,UM);it.addResources("cs",Gr,VM);it.addResources("da",Gr,HM);it.addResources("en",Gr,qM);it.addResources("es",Gr,ZM);it.addResources("es_419",Gr,KM);it.addResources("fr",Gr,JM);it.addResources("id",Gr,tP);it.addResources("km",Gr,rP);it.addResources("lo",Gr,sP);it.addResources("my",Gr,oP);it.addResources("nb",Gr,cP);it.addResources("nl",Gr,uP);it.addResources("prs",Gr,pP);it.addResources("ps",Gr,mP);it.addResources("pt",Gr,yP);it.addResources("pt_BR",Gr,bP);it.addResources("ru",Gr,_P);it.addResources("sv",Gr,TP);it.addResources("tet",Gr,CP);it.addResources("tg",Gr,kP);it.addResources("uk",Gr,MP);it.addResources("ur",Gr,IP);it.addResources("uz_Latn",Gr,RP);it.addResources("uz_UZ_Cyrl",Gr,zP);it.addResources("uz_UZ_Latn",Gr,OP);it.addResources("vi",Gr,BP);it.addResources("zh",Gr,UP);it.addResources("zh_CN",Gr,VP);const GP=(i,e)=>{e.stopPropagation(),e.preventDefault()},wv=i=>{let{options:e,onChange:t,selected:o,empty:a="",handleFocusInput:c,handleClose:u,dataTest:n}=i;const p=eE(e);if(Me.Children.count(p)===0)return typeof a=="string"?Me.createElement(iE,{message:a,dataTest:`${n}-empty`}):a;const m=Me.Children.map(e,g=>{if(!JT(g))return g;const{value:y,disabled:k}=g.props,_=y===o,T=(A,x)=>{const P={selected:y};x.stopPropagation(),t(P,x),u(),c()},M=_||k;return Me.cloneElement(g,{...g.props,onClick:M?GP:T,active:_})});return Me.createElement(Me.Fragment,null,m)};wv.propTypes={dataTest:we.string.isRequired,empty:we.node,handleClose:we.func,handleFocusInput:we.func,options:we.node,selected:we.string,onChange:we.func};const aE=i=>{let{dataTest:e,options:t,onChange:o,selected:a,empty:c,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m}=i;return Me.createElement(tE,{dataTest:e,options:t,onChange:o,selected:a,empty:c,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m,Menu:wv})};aE.propTypes={dataTest:we.string.isRequired,noMatchText:we.string.isRequired,empty:we.node,handleClose:we.func,handleFocusInput:we.func,options:we.node,placeholder:we.string,selected:we.string,onChange:we.func};const oE=i=>{let{options:e,selected:t,className:o}=i;const a=MM(t,e);if(!a){const n=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(n)}const c=a&&a.props.icon,u=a?a.props.label:t;return Me.createElement("div",{className:jt.dynamic([["1914911415",[Jt.dp8,Jt.dp16,Jt.dp16]]])+" "+(hs(o,"root")||"")},c&&Me.createElement("div",{className:jt.dynamic([["1914911415",[Jt.dp8,Jt.dp16,Jt.dp16]]])+" root-icon"},c),u,Me.createElement(jt,{id:"1914911415",dynamic:[Jt.dp8,Jt.dp16,Jt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Jt.dp8};width:${Jt.dp16};height:${Jt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};oE.propTypes={className:we.string,options:we.node,selected:we.string};const lE=i=>{let{selected:e,onChange:t,clearable:o,clearText:a,placeholder:c,dataTest:u,prefix:n,options:p,className:m,disabled:g,inputMaxHeight:v="100px"}=i;const y=e&&typeof e=="string",k=_=>{const T={selected:""};_.stopPropagation(),t(T,_)};return Me.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" "+(hs("root",m)||"")},Me.createElement(sE,{prefix:n,dataTest:`${u}-prefix`}),!y&&!n&&Me.createElement(nE,{placeholder:c,dataTest:`${u}-placeholder`}),y&&Me.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" root-input"},Me.createElement(oE,{selected:e,options:p})),y&&o&&!g&&Me.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" root-right"},Me.createElement(rE,{onClear:k,clearText:a,dataTest:`${u}-clear`})),Me.createElement(jt,{id:"2186325794",dynamic:[We.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${We.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),Me.createElement(jt,{id:"1331770409",dynamic:[v]},[`.root-input.__jsx-style-dynamic-selector{max-height:${v};}`]))};lE.propTypes={dataTest:we.string.isRequired,className:we.string,clearText:Iu(i=>i.clearable,we.string),clearable:we.bool,disabled:we.bool,inputMaxHeight:we.string,options:we.node,placeholder:we.string,prefix:we.string,selected:we.string,onChange:we.func};const cE=i=>{let{className:e,selected:t="",tabIndex:o,maxHeight:a,inputMaxHeight:c,onChange:u,onFocus:n,onKeyDown:p,onBlur:m,loading:g,error:v,warning:y,valid:k,disabled:_,children:T,clearable:M,clearText:A,filterable:x,filterPlaceholder:P,placeholder:D,prefix:w,empty:I,loadingText:N,noMatchText:q,initialFocus:Z,dense:X,dataTest:j="dhis2-uicore-singleselect"}=i;const V=x?Me.createElement(aE,{dataTest:j,empty:I,noMatchText:q,placeholder:P}):Me.createElement(wv,{empty:I,dataTest:j});return Me.createElement("div",{"data-test":j,className:jt.dynamic([["2180377457",[Jt.dp8]]])+" root"},Me.createElement("div",{className:jt.dynamic([["2180377457",[Jt.dp8]]])+" root-input"},Me.createElement(_v,{className:e,selected:t,input:Me.createElement(lE,{clearable:M,clearText:A,dataTest:j,placeholder:D,prefix:w,inputMaxHeight:c}),menu:V,tabIndex:o,maxHeight:a,onChange:u,onFocus:n,onKeyDown:p,onBlur:m,error:v,warning:y,valid:k,disabled:_,initialFocus:Z,dense:X},T,g&&Me.createElement(KT,{message:N,dataTest:`${j}-loading`}))),Me.createElement(XA,{error:v,valid:k,warning:y}),Me.createElement(jt,{id:"2180377457",dynamic:[Jt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Jt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};cE.propTypes={children:we.node,className:we.string,clearText:Iu(i=>i.clearable,we.string),clearable:we.bool,dataTest:we.string,dense:we.bool,disabled:we.bool,empty:we.node,error:ua,filterPlaceholder:we.string,filterable:we.bool,initialFocus:we.bool,inputMaxHeight:we.string,loading:we.bool,loadingText:we.string,maxHeight:we.string,noMatchText:Iu(i=>i.filterable,we.string),placeholder:we.string,prefix:we.string,selected:we.string,tabIndex:we.string,valid:ua,warning:ua,onBlur:we.func,onChange:we.func,onFocus:we.func,onKeyDown:we.func};function HP(i,e,t){return(e=WP(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function WP(i){var e=qP(i,"string");return typeof e=="symbol"?e:e+""}function qP(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const lp=(i,e)=>typeof i=="function"?i(e):i;class os extends Me.Component{render(){const{className:e,onChange:t,onFocus:o,onKeyDown:a,onBlur:c,required:u,label:n,valid:p,error:m,warning:g,disabled:v,loading:y,selected:k=os.defaultProps.selected,tabIndex:_,helpText:T,validationText:M,maxHeight:A,inputMaxHeight:x,inputWidth:P,children:D,clearable:w,clearText:I=os.defaultProps.clearText,filterable:N,filterPlaceholder:q=os.defaultProps.filterPlaceholder,placeholder:Z,prefix:X,empty:j=os.defaultProps.empty,loadingText:V=os.defaultProps.loadingText,noMatchText:U=os.defaultProps.noMatchText,initialFocus:L,dense:R,dataTest:G=os.defaultProps.dataTest}=this.props;return Me.createElement(KA,{className:e,dataTest:G,disabled:v,required:u,label:n,helpText:T,validationText:M,error:m,warning:g,valid:p},Me.createElement(Jm,{width:P,minWidth:"100px"},Me.createElement(cE,{selected:k,tabIndex:_,maxHeight:A,inputMaxHeight:x,onChange:t,onFocus:o,onKeyDown:a,onBlur:c,loading:y,error:m,warning:g,valid:p,disabled:v,clearable:w,clearText:lp(I),filterable:N,filterPlaceholder:lp(q),placeholder:Z,prefix:X,empty:lp(j),loadingText:lp(V),noMatchText:lp(U),initialFocus:L,dense:R},D)))}}HP(os,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>it.t("Clear"),empty:()=>it.t("No data found"),filterPlaceholder:()=>it.t("Type to filter options"),loadingText:()=>it.t("Loading options"),noMatchText:()=>it.t("No options found")});os.propTypes={children:we.node,className:we.string,clearText:we.oneOfType([we.string,we.func]),clearable:we.bool,dataTest:we.string,dense:we.bool,disabled:we.bool,empty:we.oneOfType([we.node,we.func]),error:ua,filterPlaceholder:we.oneOfType([we.node,we.func]),filterable:we.bool,helpText:we.string,initialFocus:we.bool,inputMaxHeight:we.string,inputWidth:we.string,label:we.string,loading:we.bool,loadingText:we.oneOfType([we.string,we.func]),maxHeight:we.string,noMatchText:we.oneOfType([we.string,we.func]),placeholder:we.string,prefix:we.string,required:we.bool,selected:we.string,tabIndex:we.string,valid:ua,validationText:we.string,warning:ua,onBlur:we.func,onChange:we.func,onFocus:we.func,onKeyDown:we.func};const uo=i=>{let{label:e,active:t,disabled:o,onClick:a,className:c,dataTest:u="dhis2-uicore-singleselectoption",value:n}=i;return Me.createElement("div",{onClick:p=>a({},p),"data-test":u,"data-value":n,"data-label":e,className:jt.dynamic([["3808134379",[We.grey900,Jt.dp8,Jt.dp12,We.grey200,We.teal700,We.white,We.grey500]]])+" "+(hs(c,{disabled:o,active:t})||"")},e,Me.createElement(jt,{id:"3808134379",dynamic:[We.grey900,Jt.dp8,Jt.dp12,We.grey200,We.teal700,We.white,We.grey500]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${We.grey900};padding-block:${Jt.dp8};padding-inline:${Jt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${We.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${We.teal700};color:${We.white};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${We.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};uo.propTypes={label:we.string.isRequired,value:we.string.isRequired,active:we.bool,className:we.string,dataTest:we.string,disabled:we.bool,onClick:we.func};class he extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,he.prototype),e>he.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,o=Number.isFinite;if(typeof e=="number"){if(e===0)return he.__zero();if(he.__isOneDigitInt(e))return 0>e?he.__oneDigit(-e,!0):he.__oneDigit(e,!1);if(!o(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return he.__fromDouble(e)}if(typeof e=="string"){const a=he.__fromString(e);if(a===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return a}if(typeof e=="boolean")return e===!0?he.__oneDigit(1,!1):he.__zero();if(typeof e=="object"){if(e.constructor===he)return e;const a=he.__toPrimitive(e);return he.BigInt(a)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?he.__toStringGeneric(this,e,!1):he.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const M=e.__unsignedDigit(0);return e.sign?-M:M}const o=e.__digit(t-1),a=he.__clz30(o),c=30*t-a;if(1024<c)return e.sign?-1/0:1/0;let u=c-1,n=o,p=t-1;const m=a+3;let g=m===32?0:n<<m;g>>>=12;const v=m-12;let y=12<=m?0:n<<20+m,k=20+m;for(0<v&&0<p&&(p--,n=e.__digit(p),g|=n>>>30-v,y=n<<v+2,k=v+2);0<k&&0<p;)p--,n=e.__digit(p),y|=30<=k?n<<k-30:n>>>30-k,k-=30;const _=he.__decideRounding(e,k,p,n);if((_===1||_===0&&(1&y)==1)&&(y=y+1>>>0,y===0&&(g++,g>>>20!=0&&(g=0,u++,1023<u))))return e.sign?-1/0:1/0;const T=e.sign?-2147483648:0;return u=u+1023<<20,he.__kBitConversionInts[1]=T|u|g,he.__kBitConversionInts[0]=y,he.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?he.__absoluteSubOne(e).__trim():he.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return he.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?he.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let o=t.__unsignedDigit(0);if(o===1)return e;if(o>=he.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const u=1+(0|o/30),n=e.sign&&(1&o)!=0,p=new he(u,n);p.__initializeDigits();const m=1<<o%30;return p.__setDigit(u-1,m),p}let a=null,c=e;for(1&o&&(a=e),o>>=1;o!==0;o>>=1)c=he.multiply(c,c),1&o&&(a===null?a=c:a=he.multiply(a,c));return a}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let o=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&o--;const a=new he(o,e.sign!==t.sign);a.__initializeDigits();for(let c=0;c<e.length;c++)he.__multiplyAccumulate(t,e.__digit(c),a,c);return a.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return he.__zero();const o=e.sign!==t.sign,a=t.__unsignedDigit(0);let c;if(t.length===1&&32767>=a){if(a===1)return o===e.sign?e:he.unaryMinus(e);c=he.__absoluteDivSmall(e,a,null)}else c=he.__absoluteDivLarge(e,t,!0,!1);return c.sign=o,c.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return e;const o=t.__unsignedDigit(0);if(t.length===1&&32767>=o){if(o===1)return he.__zero();const c=he.__absoluteModSmall(e,o);return c===0?he.__zero():he.__oneDigit(c,e.sign)}const a=he.__absoluteDivLarge(e,t,!1,!0);return a.sign=e.sign,a.__trim()}static add(e,t){const o=e.sign;return o===t.sign?he.__absoluteAdd(e,t,o):0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,o):he.__absoluteSub(t,e,!o)}static subtract(e,t){const o=e.sign;return o===t.sign?0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,o):he.__absoluteSub(t,e,!o):he.__absoluteAdd(e,t,o)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__rightShiftByAbsolute(e,t):he.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__leftShiftByAbsolute(e,t):he.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>he.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=he.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<he.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=he.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e.__digit(o)!==t.__digit(o))return!1;return!0}static notEqual(e,t){return!he.equal(e,t)}static bitwiseAnd(e,t){var o=Math.max;if(!e.sign&&!t.sign)return he.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const a=o(e.length,t.length)+1;let c=he.__absoluteSubOne(e,a);const u=he.__absoluteSubOne(t);return c=he.__absoluteOr(c,u,c),he.__absoluteAddOne(c,!0,c).__trim()}return e.sign&&([e,t]=[t,e]),he.__absoluteAndNot(e,he.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var o=Math.max;if(!e.sign&&!t.sign)return he.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const u=o(e.length,t.length),n=he.__absoluteSubOne(e,u),p=he.__absoluteSubOne(t);return he.__absoluteXor(n,p,n).__trim()}const a=o(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let c=he.__absoluteSubOne(t,a);return c=he.__absoluteXor(c,e,c),he.__absoluteAddOne(c,!0,c).__trim()}static bitwiseOr(e,t){var o=Math.max;const a=o(e.length,t.length);if(!e.sign&&!t.sign)return he.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let u=he.__absoluteSubOne(e,a);const n=he.__absoluteSubOne(t);return u=he.__absoluteAnd(u,n,u),he.__absoluteAddOne(u,!0,u).__trim()}e.sign&&([e,t]=[t,e]);let c=he.__absoluteSubOne(t,a);return c=he.__absoluteAndNot(c,e,c),he.__absoluteAddOne(c,!0,c).__trim()}static asIntN(e,t){var o=Math.floor;if(t.length===0)return t;if(e=o(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(e>=he.__kMaxLengthBits)return t;const a=0|(e+29)/30;if(t.length<a)return t;const c=t.__unsignedDigit(a-1),u=1<<(e-1)%30;if(t.length===a&&c<u)return t;if((c&u)!==u)return he.__truncateToNBits(e,t);if(!t.sign)return he.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(c&u-1)){for(let n=a-2;0<=n;n--)if(t.__digit(n)!==0)return he.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===a&&c===u?t:he.__truncateToNBits(e,t)}return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var o=Math.floor;if(t.length===0)return t;if(e=o(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(t.sign){if(e>he.__kMaxLengthBits)throw new RangeError("BigInt too big");return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=he.__kMaxLengthBits)return t;const a=0|(e+29)/30;if(t.length<a)return t;const c=e%30;return t.length==a&&(c===0||!(t.__digit(a-1)>>>c))?t:he.__truncateToNBits(e,t)}static ADD(e,t){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)&&he.__isBigInt(t))return he.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return he.__compare(e,t,0)}static LE(e,t){return he.__compare(e,t,1)}static GT(e,t){return he.__compare(e,t,2)}static GE(e,t){return he.__compare(e,t,3)}static EQ(e,t){for(;;){if(he.__isBigInt(e))return he.__isBigInt(t)?he.equal(e,t):he.EQ(t,e);if(typeof e=="number"){if(he.__isBigInt(t))return he.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="string"){if(he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.equal(e,t);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="boolean"){if(he.__isBigInt(t))return he.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="symbol"){if(he.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==he)return e==t;e=he.__toPrimitive(e)}else return e==t}}static NE(e,t){return!he.EQ(e,t)}static DataViewGetBigInt64(e,t,o=!1){return he.asIntN(64,he.DataViewGetBigUint64(e,t,o))}static DataViewGetBigUint64(e,t,o=!1){const[a,c]=o?[4,0]:[0,4],u=e.getUint32(t+a,o),n=e.getUint32(t+c,o),p=new he(3,!1);return p.__setDigit(0,1073741823&n),p.__setDigit(1,(268435455&u)<<2|n>>>30),p.__setDigit(2,u>>>28),p.__trim()}static DataViewSetBigInt64(e,t,o,a=!1){he.DataViewSetBigUint64(e,t,o,a)}static DataViewSetBigUint64(e,t,o,a=!1){o=he.asUintN(64,o);let c=0,u=0;if(0<o.length&&(u=o.__digit(0),1<o.length)){const m=o.__digit(1);u|=m<<30,c=m>>>2,2<o.length&&(c|=o.__digit(2)<<28)}const[n,p]=a?[4,0]:[0,4];e.setUint32(t+n,c,a),e.setUint32(t+p,u,a)}static __zero(){return new he(0,!1)}static __oneDigit(e,t){const o=new he(1,t);return o.__setDigit(0,e),o}__copy(){const e=new he(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,o,a){if(0<t)return-1;let c;if(0>t)c=-t-1;else{if(o===0)return-1;o--,a=e.__digit(o),c=29}let u=1<<c;if(!(a&u))return-1;if(u-=1,(a&u)!=0)return 1;for(;0<o;)if(o--,e.__digit(o)!==0)return 1;return 0}static __fromDouble(e){he.__kBitConversionDouble[0]=e;const t=2047&he.__kBitConversionInts[1]>>>20,o=t-1023,a=(0|o/30)+1,c=new he(a,0>e);let u=1048575&he.__kBitConversionInts[1]|1048576,n=he.__kBitConversionInts[0];const p=20,m=o%30;let g,v=0;if(m<20){const y=p-m;v=y+32,g=u>>>y,u=u<<32-y|n>>>y,n<<=32-y}else if(m===20)v=32,g=u,u=n,n=0;else{const y=m-p;v=32-y,g=u<<y|n>>>32-y,u=n<<y,n=0}c.__setDigit(a-1,g);for(let y=a-2;0<=y;y--)0<v?(v-=30,g=u>>>2,u=u<<30|n>>>2,n<<=30):g=0,c.__setDigit(y,g);return c.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let o=0;const a=e.length;let c=0;if(c===a)return he.__zero();let u=e.charCodeAt(c);for(;he.__isWhitespace(u);){if(++c===a)return he.__zero();u=e.charCodeAt(c)}if(u===43){if(++c===a)return null;u=e.charCodeAt(c),o=1}else if(u===45){if(++c===a)return null;u=e.charCodeAt(c),o=-1}if(t===0){if(t=10,u===48){if(++c===a)return he.__zero();if(u=e.charCodeAt(c),u===88||u===120){if(t=16,++c===a)return null;u=e.charCodeAt(c)}else if(u===79||u===111){if(t=8,++c===a)return null;u=e.charCodeAt(c)}else if(u===66||u===98){if(t=2,++c===a)return null;u=e.charCodeAt(c)}}}else if(t===16&&u===48){if(++c===a)return he.__zero();if(u=e.charCodeAt(c),u===88||u===120){if(++c===a)return null;u=e.charCodeAt(c)}}if(o!=0&&t!==10)return null;for(;u===48;){if(++c===a)return he.__zero();u=e.charCodeAt(c)}const n=a-c;let p=he.__kMaxBitsPerChar[t],m=he.__kBitsPerCharTableMultiplier-1;if(n>1073741824/p)return null;const g=p*n+m>>>he.__kBitsPerCharTableShift,v=new he(0|(g+29)/30,!1),y=10>t?t:10,k=10<t?t-10:0;if(t&t-1){v.__initializeDigits();let _=!1,T=0;do{let M=0,A=1;for(;;){let P;if(u-48>>>0<y)P=u-48;else if((32|u)-97>>>0<k)P=(32|u)-87;else{_=!0;break}const D=A*t;if(1073741823<D)break;if(A=D,M=M*t+P,T++,++c===a){_=!0;break}u=e.charCodeAt(c)}m=30*he.__kBitsPerCharTableMultiplier-1;const x=0|(p*T+m>>>he.__kBitsPerCharTableShift)/30;v.__inplaceMultiplyAdd(A,M,x)}while(!_)}else{p>>=he.__kBitsPerCharTableShift;const _=[],T=[];let M=!1;do{let A=0,x=0;for(;;){let P;if(u-48>>>0<y)P=u-48;else if((32|u)-97>>>0<k)P=(32|u)-87;else{M=!0;break}if(x+=p,A=A<<p|P,++c===a){M=!0;break}if(u=e.charCodeAt(c),30<x+p)break}_.push(A),T.push(x)}while(!M);he.__fillFromParts(v,_,T)}if(c!==a){if(!he.__isWhitespace(u))return null;for(c++;c<a;c++)if(u=e.charCodeAt(c),!he.__isWhitespace(u))return null}return v.sign=o==-1,v.__trim()}static __fillFromParts(e,t,o){let a=0,c=0,u=0;for(let n=t.length-1;0<=n;n--){const p=t[n],m=o[n];c|=p<<u,u+=m,u===30?(e.__setDigit(a++,c),u=0,c=0):30<u&&(e.__setDigit(a++,1073741823&c),u-=30,c=p>>>m-u)}if(c!==0){if(a>=e.length)throw new Error("implementation bug");e.__setDigit(a++,c)}for(;a<e.length;a++)e.__setDigit(a,0)}static __toStringBasePowerOfTwo(e,t){const o=e.length;let a=t-1;a=(85&a>>>1)+(85&a),a=(51&a>>>2)+(51&a),a=(15&a>>>4)+(15&a);const c=a,u=t-1,n=e.__digit(o-1),p=he.__clz30(n);let m=0|(30*o-p+c-1)/c;if(e.sign&&m++,268435456<m)throw new Error("string too long");const g=Array(m);let v=m-1,y=0,k=0;for(let T=0;T<o-1;T++){const M=e.__digit(T),A=(y|M<<k)&u;g[v--]=he.__kConversionChars[A];const x=c-k;for(y=M>>>x,k=30-x;k>=c;)g[v--]=he.__kConversionChars[y&u],y>>>=c,k-=c}const _=(y|n<<k)&u;for(g[v--]=he.__kConversionChars[_],y=n>>>c-k;y!==0;)g[v--]=he.__kConversionChars[y&u],y>>>=c;if(e.sign&&(g[v--]="-"),v!=-1)throw new Error("implementation bug");return g.join("")}static __toStringGeneric(e,t,o){const a=e.length;if(a===0)return"";if(a===1){let T=e.__unsignedDigit(0).toString(t);return o===!1&&e.sign&&(T="-"+T),T}const c=30*a-he.__clz30(e.__digit(a-1)),u=he.__kMaxBitsPerChar[t],n=u-1;let p=c*he.__kBitsPerCharTableMultiplier;p+=n-1,p=0|p/n;const m=p+1>>1,g=he.exponentiate(he.__oneDigit(t,!1),he.__oneDigit(m,!1));let v,y;const k=g.__unsignedDigit(0);if(g.length===1&&32767>=k){v=new he(e.length,!1),v.__initializeDigits();let T=0;for(let M=2*e.length-1;0<=M;M--){const A=T<<15|e.__halfDigit(M);v.__setHalfDigit(M,0|A/k),T=0|A%k}y=T.toString(t)}else{const T=he.__absoluteDivLarge(e,g,!0,!0);v=T.quotient;const M=T.remainder.__trim();y=he.__toStringGeneric(M,t,!0)}v.__trim();let _=he.__toStringGeneric(v,t,!0);for(;y.length<m;)y="0"+y;return o===!1&&e.sign&&(_="-"+_),_+y}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const o=e.sign;if(o!==t.sign)return he.__unequalSign(o);const a=he.__absoluteCompare(e,t);return 0<a?he.__absoluteGreater(o):0>a?he.__absoluteLess(o):0}static __compareToNumber(e,t){if(he.__isOneDigitInt(t)){const o=e.sign,a=0>t;if(o!==a)return he.__unequalSign(o);if(e.length===0){if(a)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return he.__absoluteGreater(o);const c=Math.abs(t),u=e.__unsignedDigit(0);return u>c?he.__absoluteGreater(o):u<c?he.__absoluteLess(o):0}return he.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const o=e.sign;if(o!==0>t)return he.__unequalSign(o);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;he.__kBitConversionDouble[0]=t;const a=2047&he.__kBitConversionInts[1]>>>20;if(a==2047)throw new Error("implementation bug: handled elsewhere");const c=a-1023;if(0>c)return he.__absoluteGreater(o);const u=e.length;let n=e.__digit(u-1);const p=he.__clz30(n),m=30*u-p,g=c+1;if(m<g)return he.__absoluteLess(o);if(m>g)return he.__absoluteGreater(o);let v=1048576|1048575&he.__kBitConversionInts[1],y=he.__kBitConversionInts[0];const k=20,_=29-p;if(_!==(0|(m-1)%30))throw new Error("implementation bug");let T,M=0;if(20>_){const A=k-_;M=A+32,T=v>>>A,v=v<<32-A|y>>>A,y<<=32-A}else if(_===20)M=32,T=v,v=y,y=0;else{const A=_-k;M=32-A,T=v<<A|y>>>32-A,v=y<<A,y=0}if(n>>>=0,T>>>=0,n>T)return he.__absoluteGreater(o);if(n<T)return he.__absoluteLess(o);for(let A=u-2;0<=A;A--){0<M?(M-=30,T=v>>>2,v=v<<30|y>>>2,y<<=30):T=0;const x=e.__unsignedDigit(A);if(x>T)return he.__absoluteGreater(o);if(x<T)return he.__absoluteLess(o)}if(v!==0||y!==0){if(M===0)throw new Error("implementation bug");return he.__absoluteLess(o)}return 0}static __equalToNumber(e,t){var o=Math.abs;return he.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===o(t):he.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,o){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(o){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(he.__isBigInt(e)&&typeof t=="string")return t=he.__fromString(t),t!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),o);if(typeof e=="string"&&he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),o);if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)){if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToBigInt(e,t),o);if(typeof t!="number")throw new Error("implementation bug");return he.__comparisonResultToBool(he.__compareToNumber(e,t),o)}if(typeof e!="number")throw new Error("implementation bug");if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToNumber(t,e),2^o);if(typeof t!="number")throw new Error("implementation bug");return o===0?e<t:o===1?e<=t:o===2?e>t:o===3?e>=t:void 0}__clzmsd(){return he.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,o){if(e.length<t.length)return he.__absoluteAdd(t,e,o);if(e.length===0)return e;if(t.length===0)return e.sign===o?e:he.unaryMinus(e);let a=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&a++;const c=new he(a,o);let u=0,n=0;for(;n<t.length;n++){const p=e.__digit(n)+t.__digit(n)+u;u=p>>>30,c.__setDigit(n,1073741823&p)}for(;n<e.length;n++){const p=e.__digit(n)+u;u=p>>>30,c.__setDigit(n,1073741823&p)}return n<c.length&&c.__setDigit(n,u),c.__trim()}static __absoluteSub(e,t,o){if(e.length===0)return e;if(t.length===0)return e.sign===o?e:he.unaryMinus(e);const a=new he(e.length,o);let c=0,u=0;for(;u<t.length;u++){const n=e.__digit(u)-t.__digit(u)-c;c=1&n>>>30,a.__setDigit(u,1073741823&n)}for(;u<e.length;u++){const n=e.__digit(u)-c;c=1&n>>>30,a.__setDigit(u,1073741823&n)}return a.__trim()}static __absoluteAddOne(e,t,o=null){const a=e.length;o===null?o=new he(a,t):o.sign=t;let c=1;for(let u=0;u<a;u++){const n=e.__digit(u)+c;c=n>>>30,o.__setDigit(u,1073741823&n)}return c!=0&&o.__setDigitGrow(a,1),o}static __absoluteSubOne(e,t){const o=e.length;t=t||o;const a=new he(t,!1);let c=1;for(let u=0;u<o;u++){const n=e.__digit(u)-c;c=1&n>>>30,a.__setDigit(u,1073741823&n)}if(c!=0)throw new Error("implementation bug");for(let u=o;u<t;u++)a.__setDigit(u,0);return a}static __absoluteAnd(e,t,o=null){let a=e.length,c=t.length,u=c;if(a<c){u=a;const m=e,g=a;e=t,a=c,t=m,c=g}let n=u;o===null?o=new he(n,!1):n=o.length;let p=0;for(;p<u;p++)o.__setDigit(p,e.__digit(p)&t.__digit(p));for(;p<n;p++)o.__setDigit(p,0);return o}static __absoluteAndNot(e,t,o=null){const a=e.length,c=t.length;let u=c;a<c&&(u=a);let n=a;o===null?o=new he(n,!1):n=o.length;let p=0;for(;p<u;p++)o.__setDigit(p,e.__digit(p)&~t.__digit(p));for(;p<a;p++)o.__setDigit(p,e.__digit(p));for(;p<n;p++)o.__setDigit(p,0);return o}static __absoluteOr(e,t,o=null){let a=e.length,c=t.length,u=c;if(a<c){u=a;const m=e,g=a;e=t,a=c,t=m,c=g}let n=a;o===null?o=new he(n,!1):n=o.length;let p=0;for(;p<u;p++)o.__setDigit(p,e.__digit(p)|t.__digit(p));for(;p<a;p++)o.__setDigit(p,e.__digit(p));for(;p<n;p++)o.__setDigit(p,0);return o}static __absoluteXor(e,t,o=null){let a=e.length,c=t.length,u=c;if(a<c){u=a;const m=e,g=a;e=t,a=c,t=m,c=g}let n=a;o===null?o=new he(n,!1):n=o.length;let p=0;for(;p<u;p++)o.__setDigit(p,e.__digit(p)^t.__digit(p));for(;p<a;p++)o.__setDigit(p,e.__digit(p));for(;p<n;p++)o.__setDigit(p,0);return o}static __absoluteCompare(e,t){const o=e.length-t.length;if(o!=0)return o;let a=e.length-1;for(;0<=a&&e.__digit(a)===t.__digit(a);)a--;return 0>a?0:e.__unsignedDigit(a)>t.__unsignedDigit(a)?1:-1}static __multiplyAccumulate(e,t,o,a){if(t===0)return;const c=32767&t,u=t>>>15;let n=0,p=0;for(let m,g=0;g<e.length;g++,a++){m=o.__digit(a);const v=e.__digit(g),y=32767&v,k=v>>>15,_=he.__imul(y,c),T=he.__imul(y,u),M=he.__imul(k,c),A=he.__imul(k,u);m+=p+_+n,n=m>>>30,m&=1073741823,m+=((32767&T)<<15)+((32767&M)<<15),n+=m>>>30,p=A+(T>>>15)+(M>>>15),o.__setDigit(a,1073741823&m)}for(;n!=0||p!==0;a++){let m=o.__digit(a);m+=n+p,p=0,n=m>>>30,o.__setDigit(a,1073741823&m)}}static __internalMultiplyAdd(e,t,o,a,c){let u=o,n=0;for(let p=0;p<a;p++){const m=e.__digit(p),g=he.__imul(32767&m,t),v=he.__imul(m>>>15,t),y=g+((32767&v)<<15)+n+u;u=y>>>30,n=v>>>15,c.__setDigit(p,1073741823&y)}if(c.length>a)for(c.__setDigit(a++,u+n);a<c.length;)c.__setDigit(a++,0);else if(u+n!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,o){o>this.length&&(o=this.length);const a=32767&e,c=e>>>15;let u=0,n=t;for(let p=0;p<o;p++){const m=this.__digit(p),g=32767&m,v=m>>>15,y=he.__imul(g,a),k=he.__imul(g,c),_=he.__imul(v,a),T=he.__imul(v,c);let M=n+y+u;u=M>>>30,M&=1073741823,M+=((32767&k)<<15)+((32767&_)<<15),u+=M>>>30,n=T+(k>>>15)+(_>>>15),this.__setDigit(p,1073741823&M)}if(u!=0||n!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,o=null){o===null&&(o=new he(e.length,!1));let a=0;for(let c,u=2*e.length-1;0<=u;u-=2){c=(a<<15|e.__halfDigit(u))>>>0;const n=0|c/t;a=0|c%t,c=(a<<15|e.__halfDigit(u-1))>>>0;const p=0|c/t;a=0|c%t,o.__setDigit(u>>>1,n<<15|p)}return o}static __absoluteModSmall(e,t){let o=0;for(let a=2*e.length-1;0<=a;a--)o=0|((o<<15|e.__halfDigit(a))>>>0)%t;return o}static __absoluteDivLarge(e,t,o,a){const c=t.__halfDigitLength(),u=t.length,n=e.__halfDigitLength()-c;let p=null;o&&(p=new he(n+2>>>1,!1),p.__initializeDigits());const m=new he(c+2>>>1,!1);m.__initializeDigits();const g=he.__clz15(t.__halfDigit(c-1));0<g&&(t=he.__specialLeftShift(t,g,0));const v=he.__specialLeftShift(e,g,1),y=t.__halfDigit(c-1);let k=0;for(let _,T=n;0<=T;T--){_=32767;const M=v.__halfDigit(T+c);if(M!==y){const x=(M<<15|v.__halfDigit(T+c-1))>>>0;_=0|x/y;let P=0|x%y;const D=t.__halfDigit(c-2),w=v.__halfDigit(T+c-2);for(;he.__imul(_,D)>>>0>(P<<16|w)>>>0&&(_--,P+=y,!(32767<P)););}he.__internalMultiplyAdd(t,_,0,u,m);let A=v.__inplaceSub(m,T,c+1);A!==0&&(A=v.__inplaceAdd(t,T,c),v.__setHalfDigit(T+c,32767&v.__halfDigit(T+c)+A),_--),o&&(1&T?k=_<<15:p.__setDigit(T>>>1,k|_))}if(a)return v.__inplaceRightShift(g),o?{quotient:p,remainder:v}:v;if(o)return p;throw new Error("unreachable")}static __clz15(e){return he.__clz30(e)-15}__inplaceAdd(e,t,o){let a=0;for(let c=0;c<o;c++){const u=this.__halfDigit(t+c)+e.__halfDigit(c)+a;a=u>>>15,this.__setHalfDigit(t+c,32767&u)}return a}__inplaceSub(e,t,o){let a=0;if(1&t){t>>=1;let c=this.__digit(t),u=32767&c,n=0;for(;n<o-1>>>1;n++){const g=e.__digit(n),v=(c>>>15)-(32767&g)-a;a=1&v>>>15,this.__setDigit(t+n,(32767&v)<<15|32767&u),c=this.__digit(t+n+1),u=(32767&c)-(g>>>15)-a,a=1&u>>>15}const p=e.__digit(n),m=(c>>>15)-(32767&p)-a;if(a=1&m>>>15,this.__setDigit(t+n,(32767&m)<<15|32767&u),t+n+1>=this.length)throw new RangeError("out of bounds");!(1&o)&&(c=this.__digit(t+n+1),u=(32767&c)-(p>>>15)-a,a=1&u>>>15,this.__setDigit(t+e.length,1073709056&c|32767&u))}else{t>>=1;let c=0;for(;c<e.length-1;c++){const g=this.__digit(t+c),v=e.__digit(c),y=(32767&g)-(32767&v)-a;a=1&y>>>15;const k=(g>>>15)-(v>>>15)-a;a=1&k>>>15,this.__setDigit(t+c,(32767&k)<<15|32767&y)}const u=this.__digit(t+c),n=e.__digit(c),p=(32767&u)-(32767&n)-a;a=1&p>>>15;let m=0;!(1&o)&&(m=(u>>>15)-(n>>>15)-a,a=1&m>>>15),this.__setDigit(t+c,(32767&m)<<15|32767&p)}return a}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const o=this.length-1;for(let a=0;a<o;a++){const c=this.__digit(a+1);this.__setDigit(a,1073741823&c<<30-e|t),t=c>>>e}this.__setDigit(o,t)}static __specialLeftShift(e,t,o){const a=e.length,c=new he(a+o,!1);if(t===0){for(let n=0;n<a;n++)c.__setDigit(n,e.__digit(n));return 0<o&&c.__setDigit(a,0),c}let u=0;for(let n=0;n<a;n++){const p=e.__digit(n);c.__setDigit(n,1073741823&p<<t|u),u=p>>>30-t}return 0<o&&c.__setDigit(a,u),c}static __leftShiftByAbsolute(e,t){const o=he.__toShiftAmount(t);if(0>o)throw new RangeError("BigInt too big");const a=0|o/30,c=o%30,u=e.length,n=c!==0&&e.__digit(u-1)>>>30-c!=0,p=u+a+(n?1:0),m=new he(p,e.sign);if(c===0){let g=0;for(;g<a;g++)m.__setDigit(g,0);for(;g<p;g++)m.__setDigit(g,e.__digit(g-a))}else{let g=0;for(let v=0;v<a;v++)m.__setDigit(v,0);for(let v=0;v<u;v++){const y=e.__digit(v);m.__setDigit(v+a,1073741823&y<<c|g),g=y>>>30-c}if(n)m.__setDigit(u+a,g);else if(g!==0)throw new Error("implementation bug")}return m.__trim()}static __rightShiftByAbsolute(e,t){const o=e.length,a=e.sign,c=he.__toShiftAmount(t);if(0>c)return he.__rightShiftByMaximum(a);const u=0|c/30,n=c%30;let p=o-u;if(0>=p)return he.__rightShiftByMaximum(a);let m=!1;if(a){if(e.__digit(u)&(1<<n)-1)m=!0;else for(let v=0;v<u;v++)if(e.__digit(v)!==0){m=!0;break}}m&&n===0&&!~e.__digit(o-1)&&p++;let g=new he(p,a);if(n===0){g.__setDigit(p-1,0);for(let v=u;v<o;v++)g.__setDigit(v-u,e.__digit(v))}else{let v=e.__digit(u)>>>n;const y=o-u-1;for(let k=0;k<y;k++){const _=e.__digit(k+u+1);g.__setDigit(k,1073741823&_<<30-n|v),v=_>>>n}g.__setDigit(y,v)}return m&&(g=he.__absoluteAddOne(g,!0,g)),g.__trim()}static __rightShiftByMaximum(e){return e?he.__oneDigit(1,!0):he.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>he.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===he)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const c=e[Symbol.toPrimitive];if(c){const u=c(t);if(typeof u!="object")return u;throw new TypeError("Cannot convert object to primitive value")}}const o=e.valueOf;if(o){const c=o.call(e);if(typeof c!="object")return c}const a=e.toString;if(a){const c=a.call(e);if(typeof c!="object")return c}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return he.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===he}static __truncateToNBits(e,t){const o=0|(e+29)/30,a=new he(o,t.sign),c=o-1;for(let n=0;n<c;n++)a.__setDigit(n,t.__digit(n));let u=t.__digit(c);if(e%30!=0){const n=32-e%30;u=u<<n>>>n}return a.__setDigit(c,u),a.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,o){var a=Math.min;const c=0|(e+29)/30,u=new he(c,o);let n=0;const p=c-1;let m=0;for(const k=a(p,t.length);n<k;n++){const _=0-t.__digit(n)-m;m=1&_>>>30,u.__setDigit(n,1073741823&_)}for(;n<p;n++)u.__setDigit(n,0|1073741823&-m);let g=p<t.length?t.__digit(p):0;const v=e%30;let y;if(v==0)y=0-g-m,y&=1073741823;else{const k=32-v;g=g<<k>>>k;const _=1<<32-k;y=_-g-m,y&=_-1}return u.__setDigit(p,y),u.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const o=e>>>1,a=this.__digit(o),c=1&e?32767&a|t<<15:1073709056&a|32767&t;this.__setDigit(o,c)}static __digitPow(e,t){let o=1;for(;0<t;)1&t&&(o*=e),t>>>=1,e*=e;return o}static __isOneDigitInt(e){return(1073741823&e)===e}}he.__kMaxLength=33554432,he.__kMaxLengthBits=he.__kMaxLength<<5,he.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],he.__kBitsPerCharTableShift=5,he.__kBitsPerCharTableMultiplier=1<<he.__kBitsPerCharTableShift,he.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],he.__kBitConversionBuffer=new ArrayBuffer(8),he.__kBitConversionDouble=new Float64Array(he.__kBitConversionBuffer),he.__kBitConversionInts=new Int32Array(he.__kBitConversionBuffer),he.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},he.__imul=Math.imul||function(i,e){return 0|i*e};const Cb={};function Uo(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const o=Object.getOwnPropertyDescriptor(i,t);o.configurable&&o.enumerable&&(o.enumerable=!1,Object.defineProperty(i,t,o))}for(const t of Object.getOwnPropertyNames(i.prototype)){const o=Object.getOwnPropertyDescriptor(i.prototype,t);o.configurable&&o.enumerable&&(o.enumerable=!1,Object.defineProperty(i.prototype,t,o))}Sb(e,i),Sb(`${e}.prototype`,i.prototype)}function Sb(i,e){const t=`%${i}%`;if(Cb[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);Cb[t]=e}function zi(i){return Cb[i]}const Li="slot-epochNanoSeconds",Yl="slot-timezone-identifier",ni="slot-year",hi="slot-month",gi="slot-day",Vi="slot-hour",Gi="slot-minute",Hi="slot-second",Wi="slot-millisecond",qi="slot-microsecond",Yi="slot-nanosecond",St="slot-calendar",vs="slot-cached-instant",Mr="slot-time-zone",Ss="slot-years",Kn="slot-months",Vs="slot-weeks",ks="slot-days",As="slot-hours",Ms="slot-minutes",Ps="slot-seconds",Is="slot-milliseconds",Ds="slot-microseconds",Rs="slot-nanoseconds",vn="slot-calendar-identifier",hE=new WeakMap;function $o(i){hE.set(i,Object.create(null))}function Tv(i){return hE.get(i)}function Yn(i,...e){if(!i||typeof i!="object")return!1;const t=Tv(i);return!!t&&e.reduce((o,a)=>o&&a in t,!0)}function Y(i,e){const t=Tv(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function Qi(i,e,t){Tv(i)[e]=t}const dw=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,YP=new RegExp(`(?:(?:${dw.source})(?:\\/(?:${dw.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),pw=/[A-Za-z0-9]{3,8}/,ZP=new RegExp(`(?:${pw.source}(?:-${pw.source})*)`),uE=/(?:[+\u2212-]\d{6}|\d{4})/,yg=/(?:0[1-9]|1[0-2])/,kb=/(?:0[1-9]|[12]\d|3[01])/,XP=new RegExp(`(${uE.source})(?:-(${yg.source})-(${kb.source})|(${yg.source})(${kb.source}))`),dE=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,pE=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,fE=new RegExp(`(?:([zZ])|(?:${pE.source})?)(?:\\[(${YP.source})\\])?`),mE=new RegExp(`\\[u-ca=(${ZP.source})\\]`),KP=new RegExp(`^${XP.source}(?:(?:T|\\s+)${dE.source})?${fE.source}(?:${mE.source})?$`,"i"),QP=new RegExp(`^T?${dE.source}(?:${fE.source})?(?:${mE.source})?$`,"i"),JP=new RegExp(`^(${uE.source})-?(${yg.source})$`),eI=new RegExp(`^(?:--)?(${yg.source})-?(${kb.source})$`),Fx=/(\d+)(?:[.,](\d{1,9}))?/,tI=new RegExp(`(?:${Fx.source}H)?(?:${Fx.source}M)?(?:${Fx.source}S)?`),iI=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${tI.source})?$`,"i"),gE=Array.prototype.includes,Ev=Array.prototype.push,yE=globalThis.Intl.DateTimeFormat,rI=Math.min,nI=Math.max,_r=Math.abs,Hn=Math.floor,Lp=Math.sign,Au=Math.trunc,uf=Number.isNaN,Jn=Number.isFinite,sI=Number,df=String,aI=Number.MAX_SAFE_INTEGER,xE=Object.assign,ds=Object.create,oI=Object.getOwnPropertyDescriptor,lI=Object.is,Cv=Reflect.apply,wn=he.BigInt(0),Sv=he.BigInt(1),ah=he.BigInt(60),Pr=he.BigInt(1e3),ja=he.BigInt(1e6),yl=he.BigInt(1e9),cI=he.BigInt(-1),sc=he.multiply(he.BigInt(86400),yl),zp=he.multiply(he.BigInt(-86400),he.BigInt(1e17)),Np=he.multiply(he.BigInt(86400),he.BigInt(1e17)),bE=he.multiply(he.BigInt(-388152),he.BigInt(1e13)),hI=he.multiply(sc,he.BigInt(3660)),vE=he.multiply(sc,he.BigInt(366)),_E=he.multiply(sc,he.BigInt(14)),uI=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function wE(i){if(typeof i!="number"||!Jn(i))return!1;const e=_r(i);return Hn(e)===e}function Wr(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Op(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return sI(i)}function Ir(i){const e=Op(i);if(uf(e))return 0;const t=Au(e);return e===0?0:t}function Bi(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return df(i)}function Fr(i){const e=Ir(i);if(!Jn(e))throw new RangeError("infinity is out of range");return e}function jp(i,e){const t=Ir(i);if(!Jn(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Vn(i){const e=Op(i);if(uf(e))return 0;if(!Jn(e))throw new RangeError("infinity is out of range");if(!wE(e))throw new RangeError(`unsupported fractional value ${e}`);return Ir(e)}function $n(i,e){return{quotient:he.divide(i,e),remainder:he.remainder(i,e)}}function kv(i){return he.lessThan(i,wn)?he.multiply(i,cI):i}function Ab(i,...e){return Ev.apply(i,e),i}const fw=new Map([["year",Fr],["month",jp],["monthCode",Bi],["day",jp],["hour",Fr],["minute",Fr],["second",Fr],["millisecond",Fr],["microsecond",Fr],["nanosecond",Fr],["years",Vn],["months",Vn],["weeks",Vn],["days",Vn],["hours",Vn],["minutes",Vn],["seconds",Vn],["milliseconds",Vn],["microseconds",Vn],["nanoseconds",Vn],["era",Bi],["eraYear",Ir],["offset",Bi]]),dI=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Ju=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],xg=new Map(Ju.map(i=>[i[0],i[1]])),pI=new Map(Ju.map(([i,e])=>[e,i])),mw=Ju.map(([,i])=>i),gw=Array.from(xg.keys()).sort(),yw=new Map;function TE(i){let e=yw.get(i);return e===void 0&&(e=new yE("en-us",{timeZone:df(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),yw.set(i,e)),e}function On(i){return Yn(i,Li)&&!Yn(i,Mr,St)}function ko(i){return Yn(i,Yl)}function bn(i){return Yn(i,vn)}function pn(i){return Yn(i,Ss,Kn,ks,As,Ms,Ps,Is,Ds,Rs)}function pr(i){return Yn(i,"slot-date-brand")}function fn(i){return Yn(i,Vi,Gi,Hi,Wi,qi,Yi)&&!Yn(i,ni,hi,gi)}function Ki(i){return Yn(i,ni,hi,gi,Vi,Gi,Hi,Wi,qi,Yi)}function Cr(i){return Yn(i,"slot-year-month-brand")}function Qn(i){return Yn(i,"slot-month-day-brand")}function wi(i){return Yn(i,Li,Mr,St)}function ed(i){if(Yn(i,St)||Yn(i,Mr))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function EE(i){let{ianaName:e,offset:t,z:o}=function(c){try{let u=Lv(c);if(u)return{ianaName:u.toString()}}catch{}try{const u=Vo(c);if(u.z||u.offset||u.ianaName)return u}catch{}throw new RangeError(`Invalid time zone: ${c}`)}(i);return e||(o?"UTC":t)}function pf(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function Vo(i){const e=KP.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]==="−"&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const o=Ir(t),a=Ir(e[2]||e[4]),c=Ir(e[3]||e[5]),u=Ir(e[6]),n=e[6]!==void 0,p=Ir(e[7]||e[10]);let m=Ir(e[8]||e[11]);m===60&&(m=59);const g=(e[9]||e[12])+"000000000",v=Ir(g.slice(0,3)),y=Ir(g.slice(3,6)),k=Ir(g.slice(6,9));let _,T=!1;if(e[13])_=void 0,T=!0;else if(e[14]&&e[15]){const x=e[14]==="-"||e[14]==="−"?"-":"+",P=e[15]||"00",D=e[16]||"00",w=e[17]||"00";let I=e[18]||"0";if(_=`${x}${P}:${D}`,+I){for(;I.endsWith("0");)I=I.slice(0,-1);_+=`:${w}.${I}`}else+w&&(_+=`:${w}`);_==="-00:00"&&(_="+00:00")}let M=e[19];if(M)try{M=Lv(M).toString()}catch{}const A=e[20];return jv(o,a,c,u,p,m,v,y,k),{year:o,month:a,day:c,hasTime:n,hour:u,minute:p,second:m,millisecond:v,microsecond:y,nanosecond:k,ianaName:M,offset:_,z:T,calendar:A}}function CE(i){const e=JP.exec(i);let t,o,a,c;if(e){let u=e[1];if(u[0]==="−"&&(u=`-${u.slice(1)}`),u==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=Ir(u),o=Ir(e[2]),a=e[3]}else{let u;if({year:t,month:o,calendar:a,day:c,z:u}=Vo(i),u)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:o,calendar:a,referenceISODay:c}}function SE(i){const e=eI.exec(i);let t,o,a,c;if(e)t=Ir(e[1]),o=Ir(e[2]);else{let u;if({month:t,day:o,calendar:a,year:c,z:u}=Vo(i),u)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:o,calendar:a,referenceISOYear:c}}function fI(i){const e=iI.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(M=>M===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]==="−"?-1:1,o=Ir(e[2])*t,a=Ir(e[3])*t,c=Ir(e[4])*t,u=Ir(e[5])*t,n=Ir(e[6])*t;let p=e[7],m=Ir(e[8])*t,g=e[9],v=Ir(e[10])*t;const y=e[11]+"000000000";let k=Ir(y.slice(0,3))*t,_=Ir(y.slice(3,6))*t,T=Ir(y.slice(6,9))*t;return p=p?t*Ir(p)/10**p.length:0,g=g?t*Ir(g)/10**g.length:0,{minutes:m,seconds:v,milliseconds:k,microseconds:_,nanoseconds:T}=function(A,x,P,D,w,I,N){let q=A,Z=x,X=P,j=D,V=w,U=I,L=N;if(q!==0){[Z,X,j,V,U,L].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*q;Z=Au(R),X=R%1}if(X!==0){[j,V,U,L].forEach($=>{if($!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*X;j=Au(R);const G=R%1;if(G!==0){const $=1e3*G;V=Au($);const F=$%1;if(F!==0){const H=1e3*F;U=Au(H);const W=H%1;W!==0&&(L=Au(1e3*W))}}}return{minutes:Z,seconds:j,milliseconds:V,microseconds:U,nanoseconds:L}}(p,m,g,v,k,_,T),xy(o,a,c,u,n,m,v,k,_,T),{years:o,months:a,weeks:c,days:u,hours:n,minutes:m,seconds:v,milliseconds:k,microseconds:_,nanoseconds:T}}function mI(i){let{year:e,month:t,day:o,hour:a,minute:c,second:u,millisecond:n,microsecond:p,nanosecond:m,offset:g,z:v}=function(T){const M=Vo(T);if(!M.z&&!M.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return M}(i);if(!v&&!g)throw new RangeError("Temporal.Instant requires a time zone offset");const y=v?0:bh(g);({year:e,month:t,day:o,hour:a,minute:c,second:u,millisecond:n,microsecond:p,nanosecond:m}=Nv(e,t,o,a,c,u,n,p,m-y));const k=lc(e,t,o,a,c,u,n,p,m);if(k===null)throw new RangeError("DateTime outside of supported range");return k}function bg(i,e,t,o){let a=i,c=e,u=t;switch(o){case"reject":zo(a,c,u);break;case"constrain":({year:a,month:c,day:u}=UE(a,c,u))}return{year:a,month:c,day:u}}function sy(i,e,t,o,a,c,u){let n=i,p=e,m=t,g=o,v=a,y=c;switch(u){case"reject":yy(n,p,m,g,v,y);break;case"constrain":({hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=function(_,T,M,A,x,P){const D=la(_,0,23),w=la(T,0,59),I=la(M,0,59),N=la(A,0,999),q=la(x,0,999),Z=la(P,0,999);return{hour:D,minute:w,second:I,millisecond:N,microsecond:q,nanosecond:Z}}(n,p,m,g,v,y))}return{hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}}function Eh(i){if(!Wr(i))return fI(Bi(i));if(pn(i))return{years:Y(i,Ss),months:Y(i,Kn),weeks:Y(i,Vs),days:Y(i,ks),hours:Y(i,As),minutes:Y(i,Ms),seconds:Y(i,Ps),milliseconds:Y(i,Is),microseconds:Y(i,Ds),nanoseconds:Y(i,Rs)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(_){if(!Wr(_))throw new TypeError("invalid duration-like");const T={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let M=!1;for(const A of gw){const x=_[A];x!==void 0&&(M=!0,T[A]=Vn(x))}if(!M)throw new TypeError("invalid duration-like");return T}(i);for(const k of gw){const _=t[k];_!==void 0&&(e[k]=_)}let{years:o,months:a,weeks:c,days:u,hours:n,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}=e;return xy(o,a,c,u,n,p,m,g,v,y),{years:o,months:a,weeks:c,days:u,hours:n,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}}function En(i){return i===void 0?"constrain":hc(i,"overflow",["constrain","reject"],"constrain")}function Bp(i){return i===void 0?"compatible":hc(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Hs(i,e){return hc(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function ff(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function Mb(i,e){return i===void 0?e:hc(i,"offset",["prefer","use","ignore","reject"],e)}function mf(i){return hc(i,"calendarName",["auto","always","never"],"auto")}function El(i,e,t){let o=1/0;e!==void 0&&(o=e),t||e===void 0||(o=e>1?e-1:1);const a=function(u,n,p,m,g){let v=u[n];if(v===void 0)return g;const y=Op(v);if(uf(y)||y<p||y>m)throw new RangeError(`${String(n)} must be between ${p} and ${m}, not ${y}`);return Hn(y)}(i,"roundingIncrement",1,o,1);if(e!==void 0&&e%a!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return a}function Av(i,e){return El(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function gf(i){const e=Wn(i,"smallestUnit","time",void 0);if(e==="hour"){const a=Ju.reduce((c,[u,n,p])=>(p==="time"&&n!=="hour"&&c.push(n,u),c),[]);throw new RangeError(`smallestUnit must be one of ${a.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const a=Bi(t);if(a==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${a}`)}if(uf(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const o=Hn(t);switch(o){case 0:return{precision:o,unit:"second",increment:1};case 1:case 2:case 3:return{precision:o,unit:"millisecond",increment:10**(3-o)};case 4:case 5:case 6:return{precision:o,unit:"microsecond",increment:10**(6-o)};case 7:case 8:case 9:return{precision:o,unit:"nanosecond",increment:10**(9-o)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const gh=Symbol("~required~");function Wn(i,e,t,o,a=[]){const c=[];for(const[,m,g]of Ju)t!=="datetime"&&t!==g||c.push(m);c.push(...a);let u=o;u===gh?u=void 0:u!==void 0&&c.push(u);const n=[...c];for(const m of c){const g=pI.get(m);g!==void 0&&n.push(g)}let p=hc(i,e,n,u);if(p===void 0&&o===gh)throw new RangeError(`${e} is required`);return xg.has(p)?xg.get(p):p}function eg(i){const e=i.relativeTo;if(e===void 0)return e;let t,o,a,c,u,n,p,m,g,v,y,k,_="option",T=!1;if(Wr(e)){if(wi(e)||pr(e))return e;if(Ki(e))return Fu(e);v=td(e);const M=rr(e,In(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),A=ds(null);A.overflow="constrain",{year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=yf(v,M,A),k=e.offset,k===void 0&&(_="wall"),y=e.timeZone}else{let M,A;({year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,calendar:v,ianaName:M,offset:k,z:A}=Vo(Bi(e))),M&&(y=M),A?_="exact":k||(_="wall"),v||(v=Cn()),v=es(v),T=!0}if(y!==void 0){y=Ns(y);let M=0;return _==="option"&&(M=bh(Bi(k))),ss(_g(t,o,a,c,u,n,p,m,g,_,M,y,"compatible","reject",T),y,v)}return Qa(t,o,a,v)}function Pb(i,e,t,o,a,c,u,n,p,m){for(const[g,v]of[["years",i],["months",e],["weeks",t],["days",o],["hours",a],["minutes",c],["seconds",u],["milliseconds",n],["microseconds",p],["nanoseconds",m]])if(v!==0)return xg.get(g);return"nanosecond"}function pa(i,e){return mw.indexOf(i)>mw.indexOf(e)?e:i}function ay(i,e){let t=i;return t===void 0&&(t=ds(null)),xE(ds(null),t,{largestUnit:e})}function rr(i,e,t,{emptySourceErrorMessage:o}={emptySourceErrorMessage:"no supported properties found"}){const a=ds(null);let c=!1;for(const u of e){let n=i[u];if(n!==void 0)c=!0,fw.has(u)&&(n=fw.get(u)(n)),a[u]=n;else if(t!=="partial"){if(gE.call(t,u))throw new TypeError(`required property '${u}' missing or undefined`);n=dI.get(u),a[u]=n}}if(t==="partial"&&!c)throw new TypeError(o);if(a.era===void 0!=(a.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return a}function vg(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],o=rr(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),a={};for(const c of t){const u=oI(o,c);u!==void 0?a[c]=u.value:e==="complete"&&(a[c]=0)}return a}function Br(i,e){let t=i;if(Wr(t)){if(pr(t))return t;if(wi(t)&&(En(e),t=wa(Y(t,Mr),Y(t,vs),Y(t,St))),Ki(t))return En(e),Qa(Y(t,ni),Y(t,hi),Y(t,gi),Y(t,St));const p=td(t);return oc(p,rr(t,In(p,["day","month","monthCode","year"]),[]),e)}En(e);const{year:o,month:a,day:c,calendar:u,z:n}=function(m){return Vo(m)}(Bi(t));if(n)throw new RangeError("Z designator not supported for PlainDate");return new(zi("%Temporal.PlainDate%"))(o,a,c,u)}function yf(i,e,t){let{hour:o,minute:a,second:c,millisecond:u,microsecond:n,nanosecond:p}=vg(e);const m=En(t),g=oc(i,e,t),v=Y(g,ni),y=Y(g,hi),k=Y(g,gi);return{hour:o,minute:a,second:c,millisecond:u,microsecond:n,nanosecond:p}=sy(o,a,c,u,n,p,m),{year:v,month:y,day:k,hour:o,minute:a,second:c,millisecond:u,microsecond:n,nanosecond:p}}function ih(i,e){let t,o,a,c,u,n,p,m,g,v;if(Wr(i)){if(Ki(i))return i;if(wi(i))return En(e),wa(Y(i,Mr),Y(i,vs),Y(i,St));if(pr(i))return En(e),oa(Y(i,ni),Y(i,hi),Y(i,gi),0,0,0,0,0,0,Y(i,St));v=td(i);const y=rr(i,In(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=yf(v,y,e))}else{let y;if(En(e),{year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,calendar:v,z:y}=function(_){return Vo(_)}(Bi(i)),y)throw new RangeError("Z designator not supported for PlainDateTime");jv(t,o,a,c,u,n,p,m,g),v===void 0&&(v=Cn()),v=es(v)}return oa(t,o,a,c,u,n,p,m,g,v)}function Du(i){if(pn(i))return i;let{years:e,months:t,weeks:o,days:a,hours:c,minutes:u,seconds:n,milliseconds:p,microseconds:m,nanoseconds:g}=Eh(i);return new(zi("%Temporal.Duration%"))(e,t,o,a,c,u,n,p,m,g)}function Mo(i){if(On(i))return i;if(wi(i))return new(zi("%Temporal.Instant%"))(Y(i,Li));const e=mI(Bi(i));return new(zi("%Temporal.Instant%"))(e)}function xw(i,e){let t=i;if(Wr(t)){if(Qn(t))return t;let p,m;if(Yn(t,St))p=Y(t,St),m=!1;else{let v=t.calendar;m=v===void 0,v===void 0&&(v=Cn()),p=es(v)}t=t;const g=rr(t,In(p,["day","month","monthCode","year"]),[]);return m&&g.month!==void 0&&g.monthCode===void 0&&g.year===void 0&&(g.year=1972),Bu(p,g,e)}En(e);let{month:o,day:a,referenceISOYear:c,calendar:u}=SE(Bi(t)),n=u;return n===void 0&&(n=Cn()),n=es(n),c===void 0?(zo(1972,o,a),Fp(o,a,n)):Bu(n,Fp(o,a,n,c))}function gl(i,e="constrain"){let t,o,a,c,u,n,p,m=i;if(Wr(m)){if(fn(m))return m;if(wi(m)&&(m=wa(Y(m,Mr),Y(m,vs),Y(m,St))),Ki(m))return new(zi("%Temporal.PlainTime%"))(Y(m,Vi),Y(m,Gi),Y(m,Hi),Y(m,Wi),Y(m,qi),Y(m,Yi));if(p=td(m),Bi(p)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:o,second:a,millisecond:c,microsecond:u,nanosecond:n}=vg(m)),{hour:t,minute:o,second:a,millisecond:c,microsecond:u,nanosecond:n}=sy(t,o,a,c,u,n,e)}else if({hour:t,minute:o,second:a,millisecond:c,microsecond:u,nanosecond:n,calendar:p}=function(v){const y=QP.exec(v);let k,_,T,M,A,x,P;if(y){k=Ir(y[1]),_=Ir(y[2]||y[5]),T=Ir(y[3]||y[6]),T===60&&(T=59);const D=(y[4]||y[7])+"000000000";M=Ir(D.slice(0,3)),A=Ir(D.slice(3,6)),x=Ir(D.slice(6,9)),P=y[15]}else{let D,w;if({hasTime:w,hour:k,minute:_,second:T,millisecond:M,microsecond:A,nanosecond:x,calendar:P,z:D}=Vo(v),!w)throw new RangeError(`time is missing in string: ${v}`);if(D)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(v))return{hour:k,minute:_,second:T,millisecond:M,microsecond:A,nanosecond:x,calendar:P};try{const{month:D,day:w}=SE(v);zo(1972,D,w)}catch{try{const{year:D,month:w}=CE(v);zo(D,w,1)}catch{return{hour:k,minute:_,second:T,millisecond:M,microsecond:A,nanosecond:x,calendar:P}}}throw new RangeError(`invalid ISO 8601 time-only string ${v}; may need a T prefix`)}(Bi(m)),yy(t,o,a,c,u,n),p!==void 0&&p!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(zi("%Temporal.PlainTime%"))(t,o,a,c,u,n)}function bp(i,e){if(Wr(i)){if(Cr(i))return i;const n=td(i);return xh(n,rr(i,In(n,["month","monthCode","year"]),[]),e)}En(e);let{year:t,month:o,referenceISODay:a,calendar:c}=CE(Bi(i)),u=c;return u===void 0&&(u=Cn()),u=es(u),a===void 0?(zo(t,o,1),Up(t,o,u)):xh(u,Up(t,o,u,a))}function _g(i,e,t,o,a,c,u,n,p,m,g,v,y,k,_){const T=new(zi("%Temporal.PlainDateTime%"))(i,e,t,o,a,c,u,n,p);if(m==="wall"||k==="ignore")return Y(zs(v,T,y),Li);if(m==="exact"||k==="use"){const A=lc(i,e,t,o,a,c,u,n,p);if(A===null)throw new RangeError("ZonedDateTime outside of supported range");return he.subtract(A,he.BigInt(g))}const M=wg(v,T);for(const A of M){const x=po(v,A),P=he.toNumber(ra(he.BigInt(x),6e10,"halfExpand"));if(x===g||_&&P===g)return Y(A,Li)}if(k==="reject"){const A=zv(g),x=ko(v)?Y(v,Yl):"time zone";throw new RangeError(`Offset ${A} is invalid for ${T.toString()} in ${x}`)}return Y(LE(M,v,T,y),Li)}function vp(i,e){let t,o,a,c,u,n,p,m,g,v,y,k,_=!1,T="option";if(Wr(i)){if(wi(i))return i;k=td(i);const A=rr(i,Ab(In(k,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=yf(k,A,e)),v=Ns(A.timeZone),y=A.offset,y===void 0?T="wall":y=Bi(y)}else{let A,x;if(En(e),{year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,ianaName:A,offset:y,z:x,calendar:k}=function(D){const w=Vo(D);if(!w.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return w}(Bi(i)),!A)throw new RangeError("time zone ID required in brackets");x?T="exact":y||(T="wall"),v=new(zi("%Temporal.TimeZone%"))(A),k||(k=Cn()),k=es(k),_=!0}let M=0;return T==="option"&&(M=bh(y)),ss(_g(t,o,a,c,u,n,p,m,g,T,M,v,Bp(e),Mb(e,"reject"),_),v,k)}function kE(i,e,t,o,a){zo(e,t,o),$E(e,t,o),$o(i),Qi(i,ni,e),Qi(i,hi,t),Qi(i,gi,o),Qi(i,St,a),Qi(i,"slot-date-brand",!0)}function Qa(i,e,t,o=Cn()){const a=zi("%Temporal.PlainDate%"),c=ds(a.prototype);return kE(c,i,e,t,o),c}function AE(i,e,t,o,a,c,u,n,p,m,g){jv(e,t,o,a,c,u,n,p,m),VE(e,t,o,a,c,u,n,p,m),$o(i),Qi(i,ni,e),Qi(i,hi,t),Qi(i,gi,o),Qi(i,Vi,a),Qi(i,Gi,c),Qi(i,Hi,u),Qi(i,Wi,n),Qi(i,qi,p),Qi(i,Yi,m),Qi(i,St,g)}function oa(i,e,t,o,a,c,u,n,p,m=Cn()){const g=zi("%Temporal.PlainDateTime%"),v=ds(g.prototype);return AE(v,i,e,t,o,a,c,u,n,p,m),v}function ME(i,e,t,o,a){zo(a,e,t),$E(a,e,t),$o(i),Qi(i,hi,e),Qi(i,gi,t),Qi(i,ni,a),Qi(i,St,o),Qi(i,"slot-month-day-brand",!0)}function Fp(i,e,t=Cn(),o=1972){const a=zi("%Temporal.PlainMonthDay%"),c=ds(a.prototype);return ME(c,i,e,t,o),c}function PE(i,e,t,o,a){zo(e,t,a),function(u,n){ls(u,-271821,275760),u===-271821?ls(n,4,12):u===275760&&ls(n,1,9)}(e,t),$o(i),Qi(i,ni,e),Qi(i,hi,t),Qi(i,gi,a),Qi(i,St,o),Qi(i,"slot-year-month-brand",!0)}function Up(i,e,t=Cn(),o=1){const a=zi("%Temporal.PlainYearMonth%"),c=ds(a.prototype);return PE(c,i,e,t,o),c}function IE(i,e,t,o){eh(e),$o(i),Qi(i,Li,e),Qi(i,Mr,t),Qi(i,St,o);const a=new(zi("%Temporal.Instant%"))(Y(i,Li));Qi(i,vs,a)}function ss(i,e,t=Cn()){const o=zi("%Temporal.ZonedDateTime%"),a=ds(o.prototype);return IE(a,i,e,t),a}function Cn(){return new(zi("%Temporal.Calendar%"))("iso8601")}function In(i,e){let t=e;i.fields&&(t=i.fields(t));const o=[];for(const a of t){if(typeof a!="string")throw new TypeError("bad return from calendar.fields()");Ev.call(o,a)}return o}function yh(i,e,t){const o=i.mergeFields;if(!o)return{...e,...t};const a=Reflect.apply(o,i,[e,t]);if(!Wr(a))throw new TypeError("bad return from calendar.mergeFields()");return a}function Ls(i,e,t,o,a){let c=a;c===void 0&&(c=i.dateAdd);const u=Cv(c,i,[e,t,o]);if(!pr(u))throw new TypeError("invalid result");return u}function ac(i,e,t,o,a){let c=a;c===void 0&&(c=i.dateUntil);const u=Cv(c,i,[e,t,o]);if(!pn(u))throw new TypeError("invalid result");return u}function oy(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Fr(t)}function ly(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return jp(t)}function xf(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Bi(t)}function cy(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return jp(t)}function hy(i,e){let t=i.era(e);return t!==void 0&&(t=Bi(t)),t}function uy(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Fr(t)),t}function Mv(i,e){return i.dayOfWeek(e)}function Pv(i,e){return i.dayOfYear(e)}function Iv(i,e){return i.weekOfYear(e)}function Dv(i,e){return i.daysInWeek(e)}function bf(i,e){return i.daysInMonth(e)}function dy(i,e){return i.daysInYear(e)}function py(i,e){return i.monthsInYear(e)}function fy(i,e){return i.inLeapYear(e)}function es(i){let e=i;if(Wr(e)){if(Yn(e,St))return Y(e,St);if(!("calendar"in e)||(e=e.calendar,Wr(e)&&!("calendar"in e)))return e}const t=Bi(e),o=zi("%Temporal.Calendar%");if(ZE(t))return new o(t);let a;try{({calendar:a}=Vo(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return a||(a="iso8601"),new o(a)}function td(i){if(Yn(i,St))return Y(i,St);const{calendar:e}=i;return e===void 0?Cn():es(e)}function vf(i,e){return i===e?!0:Bi(i)===Bi(e)}function DE(i,e){if(i===e)return e;const t=Bi(i),o=Bi(e);if(t===o||t==="iso8601")return e;if(o==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function oc(i,e,t){const o=i.dateFromFields(e,t);if(!pr(o))throw new TypeError("invalid result");return o}function xh(i,e,t){const o=i.yearMonthFromFields(e,t);if(!Cr(o))throw new TypeError("invalid result");return o}function Bu(i,e,t){const o=i.monthDayFromFields(e,t);if(!Qn(o))throw new TypeError("invalid result");return o}function Ns(i){let e=i;if(Wr(e)){if(wi(e))return Y(e,Mr);if(!("timeZone"in e)||(e=e.timeZone,Wr(e)&&!("timeZone"in e)))return e}const t=EE(Bi(e));return new(zi("%Temporal.TimeZone%"))(t)}function RE(i,e){return i===e?!0:Bi(i)===Bi(e)}function Fu(i){return Qa(Y(i,ni),Y(i,hi),Y(i,gi),Y(i,St))}function Rv(i){return new(zi("%Temporal.PlainTime%"))(Y(i,Vi),Y(i,Gi),Y(i,Hi),Y(i,Wi),Y(i,qi),Y(i,Yi))}function po(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const o=Reflect.apply(t,i,[e]);if(typeof o!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!wE(o)||_r(o)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return o}function Ib(i,e){return zv(po(i,e))}function wa(i,e,t){const o=Y(e,Li),a=po(i,e);let{year:c,month:u,day:n,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:k}=NE(o);return{year:c,month:u,day:n,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:k}=Nv(c,u,n,p,m,g,v,y,k+a),oa(c,u,n,p,m,g,v,y,k,t)}function zs(i,e,t){return LE(wg(i,e),i,e,t)}function LE(i,e,t,o){const a=zi("%Temporal.Instant%"),c=i.length;if(c===1)return i[0];if(c)switch(o){case"compatible":case"earlier":return i[0];case"later":return i[c-1];case"reject":throw new RangeError("multiple instants found")}const u=Y(t,ni),n=Y(t,hi),p=Y(t,gi),m=Y(t,Vi),g=Y(t,Gi),v=Y(t,Hi),y=Y(t,Wi),k=Y(t,qi),_=Y(t,Yi),T=lc(u,n,p,m,g,v,y,k,_);if(T===null)throw new RangeError("DateTime outside of supported range");const M=new a(he.subtract(T,sc)),A=new a(he.add(T,sc)),x=po(e,M),P=po(e,A)-x;switch(o){case"earlier":{const D=Y(t,St),w=zi("%Temporal.PlainDateTime%"),I=Rb(u,n,p,m,g,v,y,k,_,D,0,0,0,0,0,0,0,0,0,-P,void 0);return wg(e,new w(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D))[0]}case"compatible":case"later":{const D=Y(t,St),w=zi("%Temporal.PlainDateTime%"),I=Rb(u,n,p,m,g,v,y,k,_,D,0,0,0,0,0,0,0,0,0,P,void 0),N=wg(e,new w(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function wg(i,e){const t=i.getPossibleInstantsFor(e),o=[];for(const a of t){if(!On(a))throw new TypeError("bad return from getPossibleInstantsFor");Ev.call(o,a)}return o}function Ch(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${_r(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function nn(i){return`00${i}`.slice(-2)}function my(i,e,t,o,a){if(a==="minute")return"";const c=`:${nn(i)}`;let u,n=1e6*e+1e3*t+o;if(a==="auto"){if(n===0)return c;for(u=`${n}`.padStart(9,"0");u[u.length-1]==="0";)u=u.slice(0,-1)}else{if(a===0)return c;u=`${n}`.padStart(9,"0").slice(0,a)}return`${c}.${u}`}function bw(i,e,t){let o=e;o===void 0&&(o=new(zi("%Temporal.TimeZone%"))("UTC"));const a=wa(o,i,Cn()),c=Ch(Y(a,ni)),u=nn(Y(a,hi)),n=nn(Y(a,gi)),p=nn(Y(a,Vi)),m=nn(Y(a,Gi)),g=my(Y(a,Hi),Y(a,Wi),Y(a,qi),Y(a,Yi),t);let v="Z";return e!==void 0&&(v=zE(po(o,i))),`${c}-${u}-${n}T${p}:${m}${g}${v}`}function Ux(i,e="auto",t){function o(Z){return Z<=aI?Z.toString(10):he.BigInt(Z).toString(10)}const a=Y(i,Ss),c=Y(i,Kn),u=Y(i,Vs),n=Y(i,ks),p=Y(i,As),m=Y(i,Ms);let g=Y(i,Ps),v=Y(i,Is),y=Y(i,Ds),k=Y(i,Rs);const _=Do(a,c,u,n,p,m,g,v,y,k);if(t){const{unit:Z,increment:X,roundingMode:j}=t;({seconds:g,milliseconds:v,microseconds:y,nanoseconds:k}=cc(0,0,0,0,0,0,g,v,y,k,X,Z,j))}const T=[];a&&T.push(`${o(_r(a))}Y`),c&&T.push(`${o(_r(c))}M`),u&&T.push(`${o(_r(u))}W`),n&&T.push(`${o(_r(n))}D`);const M=[];p&&M.push(`${o(_r(p))}H`),m&&M.push(`${o(_r(m))}M`);const A=[];let x,P,D,w,I=Uu(0,0,0,g,v,y,k,0);({quotient:I,remainder:x}=$n(I,Pr)),{quotient:I,remainder:P}=$n(I,Pr),{quotient:w,remainder:D}=$n(I,Pr);const N=1e6*_r(he.toNumber(D))+1e3*_r(he.toNumber(P))+_r(he.toNumber(x));let q;if(e==="auto"){if(N!==0)for(q=`${N}`.padStart(9,"0");q[q.length-1]==="0";)q=q.slice(0,-1)}else e!==0&&(q=`${N}`.padStart(9,"0").slice(0,e));return q&&A.unshift(".",q),he.equal(w,wn)&&!A.length&&e==="auto"||A.unshift(kv(w).toString()),A.length&&M.push(`${A.join("")}S`),M.length&&M.unshift("T"),T.length||M.length?`${_<0?"-":""}P${T.join("")}${M.join("")}`:"PT0S"}function vw(i,e="auto"){return`${Ch(Y(i,ni))}-${nn(Y(i,hi))}-${nn(Y(i,gi))}${pf(Bi(Y(i,St)),e)}`}function _w(i,e,t="auto",o){let a=Y(i,ni),c=Y(i,hi),u=Y(i,gi),n=Y(i,Vi),p=Y(i,Gi),m=Y(i,Hi),g=Y(i,Wi),v=Y(i,qi),y=Y(i,Yi);if(o){const{unit:k,increment:_,roundingMode:T}=o;({year:a,month:c,day:u,hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=$v(a,c,u,n,p,m,g,v,y,_,k,T))}return`${Ch(a)}-${nn(c)}-${nn(u)}T${nn(n)}:${nn(p)}${my(m,g,v,y,e)}${pf(Bi(Y(i,St)),t)}`}function ww(i,e="auto"){let t=`${nn(Y(i,hi))}-${nn(Y(i,gi))}`;const o=Bi(Y(i,St));(e==="always"||o!=="iso8601")&&(t=`${Ch(Y(i,ni))}-${t}`);const a=pf(o,e);return a&&(t+=a),t}function Tw(i,e="auto"){let t=`${Ch(Y(i,ni))}-${nn(Y(i,hi))}`;const o=Bi(Y(i,St));(e==="always"||o!=="iso8601")&&(t+=`-${nn(Y(i,gi))}`);const a=pf(o,e);return a&&(t+=a),t}function Ew(i,e,t="auto",o="auto",a="auto",c){let u=Y(i,vs);if(c){const{unit:g,increment:v,roundingMode:y}=c,k=Eg(Y(i,Li),v,g,y);u=new(zi("%Temporal.Instant%"))(k)}const n=Y(i,Mr),p=wa(n,u,Cn());let m=`${Ch(Y(p,ni))}-${nn(Y(p,hi))}-${nn(Y(p,gi))}T${nn(Y(p,Vi))}:${nn(Y(p,Gi))}${my(Y(p,Hi),Y(p,Wi),Y(p,qi),Y(p,Yi),e)}`;return a!=="never"&&(m+=zE(po(n,u))),o!=="never"&&(m+=`[${n}]`),m+=pf(Bi(Y(i,St)),t),m}function _p(i){return XE.test(df(i))}function bh(i){const e=XE.exec(df(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function Lv(i){return _p(i)?zv(bh(i)):TE(df(i)).resolvedOptions().timeZone}function pl(i,e){const{year:t,month:o,day:a,hour:c,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=OE(i,e),v=lc(t,o,a,c,u,n,p,m,g);if(v===null)throw new RangeError("Date outside of supported range");return he.toNumber(he.subtract(v,i))}function zv(i){const e=i<0?"-":"+",t=_r(i),o=t%1e9,a=Hn(t/1e9)%60,c=Hn(t/6e10)%60,u=nn(Hn(t/36e11)),n=nn(c),p=nn(a);let m="";if(o){let g=`${o}`.padStart(9,"0");for(;g[g.length-1]==="0";)g=g.slice(0,-1);m=`:${p}.${g}`}else a&&(m=`:${p}`);return`${e}${u}:${n}${m}`}function zE(i){let e=he.toNumber(ra(he.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=_r(e);const o=e/6e10%60;return`${t}${nn(Hn(e/36e11))}:${nn(o)}`}function lc(i,e,t,o,a,c,u,n,p){const m=new Date;m.setUTCHours(o,a,c,u),m.setUTCFullYear(i,e-1,t);const g=m.getTime();if(uf(g))return null;let v=he.multiply(he.BigInt(g),ja);return v=he.add(v,he.multiply(he.BigInt(n),Pr)),v=he.add(v,he.BigInt(p)),he.lessThan(v,zp)||he.greaterThan(v,Np)?null:v}function NE(i){const{quotient:e,remainder:t}=$n(i,ja);let o=he.toNumber(e),a=he.toNumber(t);a<0&&(a+=1e6,o-=1);const c=Hn(a/1e3)%1e3,u=a%1e3,n=new Date(o);return{epochMilliseconds:o,year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds(),microsecond:c,nanosecond:u}}function OE(i,e){const{epochMilliseconds:t,millisecond:o,microsecond:a,nanosecond:c}=NE(i),{year:u,month:n,day:p,hour:m,minute:g,second:v}=function(k,_){const T=TE(k);return function(A){const x=A.split(/[^\w]+/);if(x.length!==7)throw new RangeError(`expected 7 parts in "${A}`);const P=+x[0],D=+x[1];let w=+x[2];const I=x[3].toUpperCase();if(I==="B"||I==="BC")w=1-w;else if(I!=="A"&&I!=="AD")throw new RangeError(`Unknown era ${I} in "${A}`);let N=+x[4];N===24&&(N=0);const q=+x[5],Z=+x[6];if(!(Jn(w)&&Jn(P)&&Jn(D)&&Jn(N)&&Jn(q)&&Jn(Z)))throw new RangeError(`Invalid number in "${A}`);return{year:w,month:P,day:D,hour:N,minute:q,second:Z}}(T.format(new Date(_)))}(e,t);return Nv(u,n,p,m,g,v,o,a,c)}function Cw(i,e){return he.lessThan(i,e)?e:i}function jE(){return he.add(Gv(),hI)}function BE(i,e){const t=jE(),o=he.greaterThan(i,t),a=o?he.subtract(i,vE):bE;let c=he.subtract(i,Sv);const u=pl(c,e);let n=c,p=u;for(;u===p&&he.greaterThan(c,a);)n=he.subtract(c,_E),p=pl(n,e),u===p&&(c=n);return u===p?o?BE(he.subtract(t,sc),e):null:KE(m=>pl(m,e),n,c,p,u)}function ec(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function xl(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[ec(i)?"leapyear":"standard"][e-1]}function $x(i,e,t){const o=e+(e<3?10:-2),a=i-(e<3?1:0),c=Hn(a/100),u=a-100*c,n=(t+Hn(2.6*o-.2)+(u+Hn(u/4))+(Hn(c/4)-2*c))%7;return n+(n<=0?7:0)}function Tg(i,e,t){let o=t;for(let a=e-1;a>0;a--)o+=xl(i,a);return o}function Do(i,e,t,o,a,c,u,n,p,m){for(const g of[i,e,t,o,a,c,u,n,p,m])if(g!==0)return g<0?-1:1;return 0}function tg(i,e){let t=i,o=e;if(!Jn(t)||!Jn(o))throw new RangeError("infinity is out of range");return o-=1,t+=Hn(o/12),o%=12,o<0&&(o+=12),o+=1,{year:t,month:o}}function gy(i,e,t){let o=i,a=e,c=t;if(!Jn(c))throw new RangeError("infinity is out of range");({year:o,month:a}=tg(o,a));let u=0,n=a>2?o:o-1;for(;u=ec(n)?366:365,c<-u;)o-=1,n-=1,c+=u;for(n+=1;u=ec(n)?366:365,c>u;)o+=1,n+=1,c-=u;for(;c<1;)({year:o,month:a}=tg(o,a-1)),c+=xl(o,a);for(;c>xl(o,a);)c-=xl(o,a),{year:o,month:a}=tg(o,a+1);return{year:o,month:a,day:c}}function Nv(i,e,t,o,a,c,u,n,p){const{deltaDays:m,hour:g,minute:v,second:y,millisecond:k,microsecond:_,nanosecond:T}=fl(o,a,c,u,n,p),{year:M,month:A,day:x}=gy(i,e,t+m);return{year:M,month:A,day:x,hour:g,minute:v,second:y,millisecond:k,microsecond:_,nanosecond:T}}function fl(i,e,t,o,a,c){let u=i,n=e,p=t,m=o,g=a,v=c;if(!(Jn(u)&&Jn(n)&&Jn(p)&&Jn(m)&&Jn(g)&&Jn(v)))throw new RangeError("infinity is out of range");g+=Hn(v/1e3),v=xu(v,1e3),m+=Hn(g/1e3),g=xu(g,1e3),p+=Hn(m/1e3),m=xu(m,1e3),n+=Hn(p/60),p=xu(p,60),u+=Hn(n/60),n=xu(n,60);const y=Hn(u/24);return u=xu(u,24),{deltaDays:y,hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}}function Uu(i,e,t,o,a,c,u,n){const p=he.BigInt(i);let m=he.BigInt(u);i!==0&&(m=he.subtract(he.BigInt(u),he.BigInt(n)));const g=he.add(he.BigInt(e),he.multiply(p,he.BigInt(24))),v=he.add(he.BigInt(t),he.multiply(g,ah)),y=he.add(he.BigInt(o),he.multiply(v,ah)),k=he.add(he.BigInt(a),he.multiply(y,Pr)),_=he.add(he.BigInt(c),he.multiply(k,Pr));return he.add(he.BigInt(m),he.multiply(_,Pr))}function Ov(i,e){const t=zi("%Temporal.Instant%"),o=Lp(he.toNumber(i));let a=he.BigInt(i),c=864e11;if(o===0)return{days:0,nanoseconds:wn,dayLengthNs:c};if(!wi(e)){let x;return{quotient:x,remainder:a}=$n(a,he.BigInt(c)),{days:he.toNumber(x),nanoseconds:a,dayLengthNs:c}}const u=Y(e,Li),n=Y(e,vs),p=he.add(u,a),m=new t(p),g=Y(e,Mr),v=Y(e,St),y=wa(g,n,v),k=wa(g,m,v);let{days:_}=Uv(Y(y,ni),Y(y,hi),Y(y,gi),Y(y,Vi),Y(y,Gi),Y(y,Hi),Y(y,Wi),Y(y,qi),Y(y,Yi),Y(k,ni),Y(k,hi),Y(k,gi),Y(k,Vi),Y(k,Gi),Y(k,Hi),Y(k,Wi),Y(k,qi),Y(k,Yi),v,"day",ds(null)),T=Ba(n,g,v,0,0,0,_,0,0,0,0,0,0);if(o===1)for(;_>0&&he.greaterThan(T,p);)--_,T=Ba(n,g,v,0,0,0,_,0,0,0,0,0,0);a=he.subtract(p,T);let M=!1,A=new t(T);do{const x=Ba(A,g,v,0,0,0,o,0,0,0,0,0,0),P=Y(A,Li);c=he.toNumber(he.subtract(x,P)),M=he.greaterThan(he.multiply(he.subtract(a,he.BigInt(c)),he.BigInt(o)),wn),M&&(a=he.subtract(a,he.BigInt(c)),A=new t(x),_+=o)}while(M);return{days:_,nanoseconds:a,dayLengthNs:_r(c)}}function da(i,e,t,o,a,c,u,n,p){let m,g,v,y,k,_,T=i;if(wi(p)){const A=Ba(Y(p,vs),Y(p,Mr),Y(p,St),0,0,0,T,e,t,o,a,c,u),x=Y(p,Li);m=he.subtract(A,x)}else m=Uu(T,e,t,o,a,c,u,0);n==="year"||n==="month"||n==="week"||n==="day"?{days:T,nanoseconds:m}=Ov(m,p):T=0;const M=he.lessThan(m,wn)?-1:1;switch(m=kv(m),g=v=y=k=_=wn,n){case"year":case"month":case"week":case"day":case"hour":({quotient:g,remainder:m}=$n(m,Pr)),{quotient:v,remainder:g}=$n(g,Pr),{quotient:y,remainder:v}=$n(v,Pr),{quotient:k,remainder:y}=$n(y,ah),{quotient:_,remainder:k}=$n(k,ah);break;case"minute":({quotient:g,remainder:m}=$n(m,Pr)),{quotient:v,remainder:g}=$n(g,Pr),{quotient:y,remainder:v}=$n(v,Pr),{quotient:k,remainder:y}=$n(y,ah);break;case"second":({quotient:g,remainder:m}=$n(m,Pr)),{quotient:v,remainder:g}=$n(g,Pr),{quotient:y,remainder:v}=$n(v,Pr);break;case"millisecond":({quotient:g,remainder:m}=$n(m,Pr)),{quotient:v,remainder:g}=$n(g,Pr);break;case"microsecond":({quotient:g,remainder:m}=$n(m,Pr));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:T,hours:he.toNumber(_)*M,minutes:he.toNumber(k)*M,seconds:he.toNumber(y)*M,milliseconds:he.toNumber(v)*M,microseconds:he.toNumber(g)*M,nanoseconds:he.toNumber(m)*M}}function Om(i,e,t,o,a,c){let u=i,n=e,p=t,m=o;const g=zi("%Temporal.Duration%"),v=Do(u,n,p,m,0,0,0,0,0,0);let y,k;c&&(k=Br(c),y=Y(k,St));const _=new g(v),T=new g(0,v),M=new g(0,0,v);switch(a){case"year":break;case"month":{if(!y)throw new RangeError("a starting point is required for months balancing");const A=y.dateAdd,x=y.dateUntil;let P=k;for(;_r(u)>0;){const D=Ls(y,P,_,void 0,A),w=ds(null);w.largestUnit="month";const I=Y(ac(y,P,D,w,x),Kn);P=D,n+=I,u-=v}}break;case"week":if(!y)throw new RangeError("a starting point is required for weeks balancing");for(;_r(u)>0;){let A;({relativeTo:k,days:A}=bs(y,k,_)),m+=A,u-=v}for(;_r(n)>0;){let A;({relativeTo:k,days:A}=bs(y,k,T)),m+=A,n-=v}break;default:for(;_r(u)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let A;({relativeTo:k,days:A}=bs(y,k,_)),m+=A,u-=v}for(;_r(n)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let A;({relativeTo:k,days:A}=bs(y,k,T)),m+=A,n-=v}for(;_r(p)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let A;({relativeTo:k,days:A}=bs(y,k,M)),m+=A,p-=v}}return{years:u,months:n,weeks:p,days:m}}function Sw(i,e,t,o,a){if(wi(i)){const c=Y(i,vs),u=Y(i,Mr),n=Y(i,St),p=po(u,c),m=Ba(c,u,n,e,t,o,a,0,0,0,0,0,0);return po(u,new(zi("%Temporal.Instant%"))(m))-p}return 0}function FE(i){return new(zi("%Temporal.Duration%"))(-Y(i,Ss),-Y(i,Kn),-Y(i,Vs),-Y(i,ks),-Y(i,As),-Y(i,Ms),-Y(i,Ps),-Y(i,Is),-Y(i,Ds),-Y(i,Rs))}function la(i,e,t){return rI(t,nI(e,i))}function UE(i,e,t){const o=la(e,1,12);return{year:i,month:o,day:la(t,1,xl(i,o))}}function ls(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function zo(i,e,t){ls(e,1,12),ls(t,1,xl(i,e))}function $E(i,e,t){VE(i,e,t,12,0,0,0,0,0)}function yy(i,e,t,o,a,c){ls(i,0,23),ls(e,0,59),ls(t,0,59),ls(o,0,999),ls(a,0,999),ls(c,0,999)}function jv(i,e,t,o,a,c,u,n,p){zo(i,e,t),yy(o,a,c,u,n,p)}function VE(i,e,t,o,a,c,u,n,p){if(ls(i,-271821,275760),i===-271821&&lc(i,e,t+1,o,a,c,u,n,p-1)==null||i===275760&&lc(i,e,t-1,o,a,c,u,n,p+1)==null)throw new RangeError("DateTime outside of supported range")}function eh(i){if(he.lessThan(i,zp)||he.greaterThan(i,Np))throw new RangeError("Instant outside of supported range")}function xy(i,e,t,o,a,c,u,n,p,m){const g=Do(i,e,t,o,a,c,u,n,p,m);for(const v of[i,e,t,o,a,c,u,n,p,m]){if(!Jn(v))throw new RangeError("infinite values not allowed as duration fields");const y=Lp(v);if(y!==0&&y!==g)throw new RangeError("mixed-sign values not allowed as duration fields")}}function Bv(i,e,t,o,a,c,u){switch(u){case"year":case"month":{const n=-tc(i,e,t,o,a,c);if(n===0)return{years:0,months:0,weeks:0,days:0};const p={year:i,month:e,day:t},m={year:o,month:a,day:c};let g=m.year-p.year,v=oh(i,e,t,g,0,0,0,"constrain"),y=-tc(v.year,v.month,v.day,o,a,c);if(y===0)return u==="year"?{years:g,months:0,weeks:0,days:0}:{years:0,months:12*g,weeks:0,days:0};let k=m.month-p.month;if(y!==n&&(g-=n,k+=12*n),v=oh(i,e,t,g,k,0,0,"constrain"),y=-tc(v.year,v.month,v.day,o,a,c),y===0)return u==="year"?{years:g,months:k,weeks:0,days:0}:{years:0,months:k+12*g,weeks:0,days:0};y!==n&&(k-=n,k===-n&&(g-=n,k=11*n),v=oh(i,e,t,g,k,0,0,"constrain"));let _=0;return _=v.month===m.month?m.day-v.day:n<0?-v.day-(xl(m.year,m.month)-m.day):m.day+(xl(v.year,v.month)-v.day),u==="month"&&(k+=12*g,g=0),{years:g,months:k,weeks:0,days:_}}case"week":case"day":{let n,p,m;tc(i,e,t,o,a,c)<0?(p={year:i,month:e,day:t},n={year:o,month:a,day:c},m=1):(p={year:o,month:a,day:c},n={year:i,month:e,day:t},m=-1);let g=Tg(n.year,n.month,n.day)-Tg(p.year,p.month,p.day);for(let y=p.year;y<n.year;++y)g+=ec(y)?366:365;let v=0;return u==="week"&&(v=Hn(g/7),g%=7),v*=m,g*=m,{years:0,months:0,weeks:v,days:g}}default:throw new Error("assert not reached")}}function GE(i,e,t,o,a,c,u,n,p,m,g,v){let y=u-i,k=n-e,_=p-t,T=m-o,M=g-a,A=v-c;const x=Do(0,0,0,0,y,k,_,T,M,A);y*=x,k*=x,_*=x,T*=x,M*=x,A*=x;let P=0;if({deltaDays:P,hour:y,minute:k,second:_,millisecond:T,microsecond:M,nanosecond:A}=fl(y,k,_,T,M,A),P!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return y*=x,k*=x,_*=x,T*=x,M*=x,A*=x,{hours:y,minutes:k,seconds:_,milliseconds:T,microseconds:M,nanoseconds:A}}function Fv(i,e,t,o,a){const c=he.subtract(e,i),u=he.remainder(c,he.BigInt(864e11)),n=he.subtract(c,u),p=ra(u,Hv[o]*t,a),m=he.add(n,p),g=he.toNumber(he.remainder(m,Pr)),v=he.toNumber(he.remainder(he.divide(m,Pr),Pr)),y=he.toNumber(he.remainder(he.divide(m,ja),Pr));return{seconds:he.toNumber(he.divide(m,yl)),milliseconds:y,microseconds:v,nanoseconds:g}}function Uv(i,e,t,o,a,c,u,n,p,m,g,v,y,k,_,T,M,A,x,P,D){let w=i,I=e,N=t,{hours:q,minutes:Z,seconds:X,milliseconds:j,microseconds:V,nanoseconds:U}=GE(o,a,c,u,n,p,y,k,_,T,M,A);const L=Do(0,0,0,0,q,Z,X,j,V,U);tc(m,g,v,w,I,N)===-L&&({year:w,month:I,day:N}=gy(w,I,N-L),{hours:q,minutes:Z,seconds:X,milliseconds:j,microseconds:V,nanoseconds:U}=da(-L,q,Z,X,j,V,U,P));const R=Qa(w,I,N,x),G=Qa(m,g,v,x),$=ay(D,pa("day",P));let{years:F,months:H,weeks:W,days:ne}=ac(x,R,G,$);return{days:ne,hours:q,minutes:Z,seconds:X,milliseconds:j,microseconds:V,nanoseconds:U}=da(ne,q,Z,X,j,V,U,P),{years:F,months:H,weeks:W,days:ne,hours:q,minutes:Z,seconds:X,milliseconds:j,microseconds:V,nanoseconds:U}}function HE(i,e,t,o,a,c){const u=he.subtract(e,i);if(he.equal(u,wn))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const n=zi("%Temporal.Instant%"),p=new n(i),m=new n(e),g=wa(t,p,o),v=wa(t,m,o);let{years:y,months:k,weeks:_,days:T}=Uv(Y(g,ni),Y(g,hi),Y(g,gi),Y(g,Vi),Y(g,Gi),Y(g,Hi),Y(g,Wi),Y(g,qi),Y(g,Yi),Y(v,ni),Y(v,hi),Y(v,gi),Y(v,Vi),Y(v,Gi),Y(v,Hi),Y(v,Wi),Y(v,qi),Y(v,Yi),o,a,c);const M=Ba(p,t,o,y,k,_,0,0,0,0,0,0,0);let A=he.subtract(e,M);const x=ss(M,t,o);({nanoseconds:A,days:T}=Ov(A,x));const{hours:P,minutes:D,seconds:w,milliseconds:I,microseconds:N,nanoseconds:q}=da(0,0,0,0,0,0,he.toNumber(A),"hour");return{years:y,months:k,weeks:_,days:T,hours:P,minutes:D,seconds:w,milliseconds:I,microseconds:N,nanoseconds:q}}function kw(i,e,t,o){const a=Mo(t);let c,u;[c,u]=i==="until"?[e,a]:[a,e];const n=sr(o),p=Wn(n,"smallestUnit","time","nanosecond"),m=pa("second",p);let g=Wn(n,"largestUnit","time","auto");if(g==="auto"&&(g=m),pa(g,p)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${p}`);const v=Hs(n,"trunc"),y=El(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1),k=Y(c,Li),_=Y(u,Li);let T,M,{seconds:A,milliseconds:x,microseconds:P,nanoseconds:D}=Fv(k,_,y,p,v);return{hours:T,minutes:M,seconds:A,milliseconds:x,microseconds:P,nanoseconds:D}=da(0,0,0,A,x,P,D,g),new(zi("%Temporal.Duration%"))(0,0,0,0,T,M,A,x,P,D)}function Aw(i,e,t,o){const a=i==="since"?-1:1,c=Br(t),u=Y(e,St),n=Y(c,St),p=Bi(u),m=Bi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(o),v=Wn(g,"smallestUnit","date","day"),y=pa("day",v);let k=Wn(g,"largestUnit","date","auto");if(k==="auto"&&(k=y),pa(k,v)!==k)throw new RangeError(`largestUnit ${k} cannot be smaller than smallestUnit ${v}`);let _=Hs(g,"trunc");i==="since"&&(_=ff(_));const T=El(g,void 0,!1),M=ay(g,k);let{years:A,months:x,weeks:P,days:D}=ac(u,e,c,M);return v==="day"&&T===1||({years:A,months:x,weeks:P,days:D}=cc(A,x,P,D,0,0,0,0,0,0,T,v,_,e)),new(zi("%Temporal.Duration%"))(a*A,a*x,a*P,a*D,0,0,0,0,0,0)}function Mw(i,e,t,o){const a=i==="since"?-1:1,c=ih(t),u=Y(e,St),n=Y(c,St),p=Bi(u),m=Bi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(o),v=Wn(g,"smallestUnit","datetime","nanosecond"),y=pa("day",v);let k=Wn(g,"largestUnit","datetime","auto");if(k==="auto"&&(k=y),pa(k,v)!==k)throw new RangeError(`largestUnit ${k} cannot be smaller than smallestUnit ${v}`);let _=Hs(g,"trunc");i==="since"&&(_=ff(_));const T=Av(g,v);let{years:M,months:A,weeks:x,days:P,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=Uv(Y(e,ni),Y(e,hi),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(c,ni),Y(c,hi),Y(c,gi),Y(c,Vi),Y(c,Gi),Y(c,Hi),Y(c,Wi),Y(c,qi),Y(c,Yi),u,k,g);const X=Fu(e);return{years:M,months:A,weeks:x,days:P,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=cc(M,A,x,P,D,w,I,N,q,Z,T,v,_,X),{days:P,hours:D,minutes:w,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=da(P,D,w,I,N,q,Z,k),new(zi("%Temporal.Duration%"))(a*M,a*A,a*x,a*P,a*D,a*w,a*I,a*N,a*q,a*Z)}function Pw(i,e,t,o){const a=i==="since"?-1:1,c=gl(t),u=sr(o);let n=Wn(u,"largestUnit","time","auto");n==="auto"&&(n="hour");const p=Wn(u,"smallestUnit","time","nanosecond");if(pa(n,p)!==n)throw new RangeError(`largestUnit ${n} cannot be smaller than smallestUnit ${p}`);let m=Hs(u,"trunc");i==="since"&&(m=ff(m));const g=El(u,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1);let{hours:v,minutes:y,seconds:k,milliseconds:_,microseconds:T,nanoseconds:M}=GE(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(c,Vi),Y(c,Gi),Y(c,Hi),Y(c,Wi),Y(c,qi),Y(c,Yi));return{hours:v,minutes:y,seconds:k,milliseconds:_,microseconds:T,nanoseconds:M}=cc(0,0,0,0,v,y,k,_,T,M,g,p,m),{hours:v,minutes:y,seconds:k,milliseconds:_,microseconds:T,nanoseconds:M}=da(0,v,y,k,_,T,M,n),new(zi("%Temporal.Duration%"))(0,0,0,0,a*v,a*y,a*k,a*_,a*T,a*M)}function Iw(i,e,t,o){const a=i==="since"?-1:1,c=bp(t),u=Y(e,St),n=Y(c,St),p=Bi(u),m=Bi(n);if(p!==m)throw new RangeError(`cannot compute difference between months of ${p} and ${m} calendars`);const g=sr(o),v=Ju.reduce((q,[Z,X,j])=>(j==="date"&&X!=="week"&&X!=="day"&&q.push(X,Z),q),[]),y=Wn(g,"smallestUnit","date","month");if(y==="week"||y==="day")throw new RangeError(`smallestUnit must be one of ${v.join(", ")}, not ${y}`);let k=Wn(g,"largestUnit","date","auto");if(k==="week"||k==="day")throw new RangeError(`largestUnit must be one of ${v.join(", ")}, not ${k}`);if(k==="auto"&&(k="year"),pa(k,y)!==k)throw new RangeError(`largestUnit ${k} cannot be smaller than smallestUnit ${y}`);let _=Hs(g,"trunc");i==="since"&&(_=ff(_));const T=El(g,void 0,!1),M=In(u,["monthCode","year"]),A=rr(c,M,[]);A.day=1;const x=rr(e,M,[]);x.day=1;const P=oc(u,A),D=oc(u,x),w=ay(g,k);let{years:I,months:N}=ac(u,D,P,w);return y==="month"&&T===1||({years:I,months:N}=cc(I,N,0,0,0,0,0,0,0,0,T,y,_,D)),new(zi("%Temporal.Duration%"))(a*I,a*N,0,0,0,0,0,0,0,0)}function Dw(i,e,t,o){const a=i==="since"?-1:1,c=vp(t),u=Y(e,St),n=Y(c,St),p=Bi(u),m=Bi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=sr(o),v=Wn(g,"smallestUnit","datetime","nanosecond"),y=pa("hour",v);let k=Wn(g,"largestUnit","datetime","auto");if(k==="auto"&&(k=y),pa(k,v)!==k)throw new RangeError(`largestUnit ${k} cannot be smaller than smallestUnit ${v}`);let _=Hs(g,"trunc");i==="since"&&(_=ff(_));const T=Av(g,v),M=Y(e,Li),A=Y(c,Li);let x,P,D,w,I,N,q,Z,X,j;if(k!=="year"&&k!=="month"&&k!=="week"&&k!=="day")x=0,P=0,D=0,w=0,{seconds:q,milliseconds:Z,microseconds:X,nanoseconds:j}=Fv(M,A,T,v,_),{hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:j}=da(0,0,0,q,Z,X,j,k);else{const V=Y(e,Mr);if(!RE(V,Y(c,Mr)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const U=ay(g,k);({years:x,months:P,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:j}=HE(M,A,V,u,k,U)),{years:x,months:P,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:j}=cc(x,P,D,w,I,N,q,Z,X,j,T,v,_,e),{years:x,months:P,weeks:D,days:w,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:j}=YE(x,P,D,w,I,N,q,Z,X,j,T,v,_,e)}return new(zi("%Temporal.Duration%"))(a*x,a*P,a*D,a*w,a*I,a*N,a*q,a*Z,a*X,a*j)}function oh(i,e,t,o,a,c,u,n){let p=i,m=e,g=t,v=c,y=u;return p+=o,m+=a,{year:p,month:m}=tg(p,m),{year:p,month:m,day:g}=bg(p,m,g,n),y+=7*v,g+=y,{year:p,month:m,day:g}=gy(p,m,g),{year:p,month:m,day:g}}function WE(i,e,t,o,a,c,u,n,p,m,g,v){let y=i,k=e,_=t,T=o,M=a,A=c;y+=u,k+=n,_+=p,T+=m,M+=g,A+=v;let x=0;return{deltaDays:x,hour:y,minute:k,second:_,millisecond:T,microsecond:M,nanosecond:A}=fl(y,k,_,T,M,A),{deltaDays:x,hour:y,minute:k,second:_,millisecond:T,microsecond:M,nanosecond:A}}function qE(i,e,t,o,a,c,u,n,p,m,g,v,y,k,_,T,M,A,x,P,D){const w=pa(Pb(i,e,t,o,a,c,u,n,p,m),Pb(g,v,y,k,_,T,M,A,x,P));let I,N,q,Z,X,j,V,U,L,R;if(D)if(pr(D)){const G=zi("%Temporal.Duration%"),$=Y(D,St),F=new G(i,e,t,o,0,0,0,0,0,0),H=new G(g,v,y,k,0,0,0,0,0,0),W=$.dateAdd,ne=Ls($,D,F,void 0,W),ue=Ls($,ne,H,void 0,W),ie=pa("day",w),oe=ds(null);oe.largestUnit=ie,{years:I,months:N,weeks:q,days:Z}=ac($,D,ue,oe),{days:Z,hours:X,minutes:j,seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}=da(Z,a+_,c+T,u+M,n+A,p+x,m+P,w)}else{const G=zi("%Temporal.Instant%"),$=Y(D,Mr),F=Y(D,St),H=Ba(Y(D,vs),$,F,i,e,t,o,a,c,u,n,p,m),W=Ba(new G(H),$,F,g,v,y,k,_,T,M,A,x,P);w!=="year"&&w!=="month"&&w!=="week"&&w!=="day"?(I=0,N=0,q=0,Z=0,{seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}=Fv(Y(D,Li),W,1,"nanosecond","halfExpand"),{hours:X,minutes:j,seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}=da(0,0,0,V,U,L,R,w)):{years:I,months:N,weeks:q,days:Z,hours:X,minutes:j,seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}=HE(Y(D,Li),W,$,F,w,ds(null))}else{if(w==="year"||w==="month"||w==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");I=N=q=0,{days:Z,hours:X,minutes:j,seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}=da(o+k,a+_,c+T,u+M,n+A,p+x,m+P,w)}return xy(I,N,q,Z,X,j,V,U,L,R),{years:I,months:N,weeks:q,days:Z,hours:X,minutes:j,seconds:V,milliseconds:U,microseconds:L,nanoseconds:R}}function Db(i,e,t,o,a,c,u){let n=wn;n=he.add(n,he.BigInt(u)),n=he.add(n,he.multiply(he.BigInt(c),Pr)),n=he.add(n,he.multiply(he.BigInt(a),ja)),n=he.add(n,he.multiply(he.BigInt(o),yl)),n=he.add(n,he.multiply(he.BigInt(t),he.BigInt(6e10))),n=he.add(n,he.multiply(he.BigInt(e),he.BigInt(36e11)));const p=he.add(i,n);return eh(p),p}function Rb(i,e,t,o,a,c,u,n,p,m,g,v,y,k,_,T,M,A,x,P,D){let w=k,{deltaDays:I,hour:N,minute:q,second:Z,millisecond:X,microsecond:j,nanosecond:V}=WE(o,a,c,u,n,p,_,T,M,A,x,P);w+=I;const U=zi("%Temporal.Duration%"),L=Ls(m,Qa(i,e,t,m),new U(g,v,y,w,0,0,0,0,0,0),D);return{year:Y(L,ni),month:Y(L,hi),day:Y(L,gi),hour:N,minute:q,second:Z,millisecond:X,microsecond:j,nanosecond:V}}function Ba(i,e,t,o,a,c,u,n,p,m,g,v,y,k){const _=zi("%Temporal.Duration%");if(Do(o,a,c,u,0,0,0,0,0,0)===0)return Db(Y(i,Li),n,p,m,g,v,y);const T=wa(e,i,t),M=Ls(t,Qa(Y(T,ni),Y(T,hi),Y(T,gi),t),new _(o,a,c,u,0,0,0,0,0,0),k),A=oa(Y(M,ni),Y(M,hi),Y(M,gi),Y(T,Vi),Y(T,Gi),Y(T,Hi),Y(T,Wi),Y(T,qi),Y(T,Yi),t);return Db(Y(zs(e,A,"compatible"),Li),n,p,m,g,v,y)}function Rw(i,e,t,o){const a=i==="subtract"?-1:1;let{years:c,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:k,nanoseconds:_}=Eh(t);const T=eg(sr(o));return{years:c,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:k,nanoseconds:_}=qE(Y(e,Ss),Y(e,Kn),Y(e,Vs),Y(e,ks),Y(e,As),Y(e,Ms),Y(e,Ps),Y(e,Is),Y(e,Ds),Y(e,Rs),a*c,a*u,a*n,a*p,a*m,a*g,a*v,a*y,a*k,a*_,T),new(zi("%Temporal.Duration%"))(c,u,n,p,m,g,v,y,k,_)}function Lw(i,e,t){const o=i==="subtract"?-1:1,{hours:a,minutes:c,seconds:u,milliseconds:n,microseconds:p,nanoseconds:m}=function(y,k){let _=Eh(y);for(const T of k)if(_[T]!==0)throw new RangeError(`Duration field ${T} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return _}(t,["years","months","weeks","days"]),g=Db(Y(e,Li),o*a,o*c,o*u,o*n,o*p,o*m);return new(zi("%Temporal.Instant%"))(g)}function zw(i,e,t,o){const a=i==="subtract"?-1:1,{years:c,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:k,nanoseconds:_}=Eh(t),T=sr(o),M=Y(e,St),{year:A,month:x,day:P,hour:D,minute:w,second:I,millisecond:N,microsecond:q,nanosecond:Z}=Rb(Y(e,ni),Y(e,hi),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),M,a*c,a*u,a*n,a*p,a*m,a*g,a*v,a*y,a*k,a*_,T);return oa(A,x,P,D,w,I,N,q,Z,M)}function Nw(i,e,t){const o=i==="subtract"?-1:1,{hours:a,minutes:c,seconds:u,milliseconds:n,microseconds:p,nanoseconds:m}=Eh(t);let{hour:g,minute:v,second:y,millisecond:k,microsecond:_,nanosecond:T}=WE(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),o*a,o*c,o*u,o*n,o*p,o*m);return{hour:g,minute:v,second:y,millisecond:k,microsecond:_,nanosecond:T}=sy(g,v,y,k,_,T,"reject"),new(zi("%Temporal.PlainTime%"))(g,v,y,k,_,T)}function Ow(i,e,t,o){let a=Eh(t);i==="subtract"&&(a={years:-a.years,months:-a.months,weeks:-a.weeks,days:-a.days,hours:-a.hours,minutes:-a.minutes,seconds:-a.seconds,milliseconds:-a.milliseconds,microseconds:-a.microseconds,nanoseconds:-a.nanoseconds});let{years:c,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:k,nanoseconds:_}=a;({days:p}=da(p,m,g,v,y,k,_,"day"));const T=sr(o),M=Y(e,St),A=In(M,["monthCode","year"]),x=rr(e,A,[]),P=Do(c,u,n,p,0,0,0,0,0,0);x.day=P<0?jp(bf(M,e)):1;const D=oc(M,x),w=new(zi("%Temporal.Duration%"))(c,u,n,p,0,0,0,0,0,0),I=xE(ds(null),T);return xh(M,rr(Ls(M,D,w,T),A,[]),I)}function jw(i,e,t,o){const a=i==="subtract"?-1:1,{years:c,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:k,nanoseconds:_}=Eh(t),T=sr(o),M=Y(e,Mr),A=Y(e,St);return ss(Ba(Y(e,vs),M,A,a*c,a*u,a*n,a*p,a*m,a*g,a*v,a*y,a*k,a*_,T),M,A)}function ra(i,e,t){if(e===1)return i;let{quotient:o,remainder:a}=$n(i,he.BigInt(e));if(he.equal(a,wn))return i;const c=he.lessThan(a,wn)?-1:1;switch(t){case"ceil":c>0&&(o=he.add(o,he.BigInt(c)));break;case"floor":c<0&&(o=he.add(o,he.BigInt(c)));break;case"trunc":break;case"halfExpand":he.toNumber(kv(he.multiply(a,he.BigInt(2))))>=e&&(o=he.add(o,he.BigInt(c)))}return he.multiply(o,he.BigInt(e))}function Eg(i,e,t,o){let a=he.remainder(i,he.BigInt(864e11));he.lessThan(a,wn)&&(a=he.add(a,he.BigInt(864e11)));const c=he.subtract(i,a),u=ra(a,Hv[t]*e,o);return he.add(c,u)}function $v(i,e,t,o,a,c,u,n,p,m,g,v,y=864e11){const{deltaDays:k,hour:_,minute:T,second:M,millisecond:A,microsecond:x,nanosecond:P}=Vv(o,a,c,u,n,p,m,g,v,y),{year:D,month:w,day:I}=gy(i,e,t+k);return{year:D,month:w,day:I,hour:_,minute:T,second:M,millisecond:A,microsecond:x,nanosecond:P}}function Vv(i,e,t,o,a,c,u,n,p,m=864e11){let g=wn;switch(n){case"day":case"hour":g=he.BigInt(i);case"minute":g=he.add(he.multiply(g,ah),he.BigInt(e));case"second":g=he.add(he.multiply(g,ah),he.BigInt(t));case"millisecond":g=he.add(he.multiply(g,Pr),he.BigInt(o));case"microsecond":g=he.add(he.multiply(g,Pr),he.BigInt(a));case"nanosecond":g=he.add(he.multiply(g,Pr),he.BigInt(c))}const v=n==="day"?m:Hv[n],y=ra(g,v*u,p),k=he.toNumber(he.divide(y,he.BigInt(v)));switch(n){case"day":return{deltaDays:k,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return fl(k,0,0,0,0,0);case"minute":return fl(i,k,0,0,0,0);case"second":return fl(i,e,k,0,0,0);case"millisecond":return fl(i,e,t,k,0,0);case"microsecond":return fl(i,e,t,o,k,0);case"nanosecond":return fl(i,e,t,o,a,k);default:throw new Error(`Invalid unit ${n}`)}}function ig(i,e){return Bv(Y(i,ni),Y(i,hi),Y(i,gi),Y(e,ni),Y(e,hi),Y(e,gi),"day").days}function bs(i,e,t){const o=Ls(i,e,t,void 0);return{relativeTo:o,days:ig(e,o)}}function Lb(i,e,t,o,a){const c=Y(i,Mr),u=Y(i,St);return ss(Ba(Y(i,vs),c,u,e,t,o,a,0,0,0,0,0,0),c,u)}function YE(i,e,t,o,a,c,u,n,p,m,g,v,y,k){let _=i,T=e,M=t,A=o,x=a,P=c,D=u,w=n,I=p,N=m;if(!wi(k)||v==="year"||v==="month"||v==="week"||v==="day"||v==="nanosecond"&&g===1)return{years:_,months:T,weeks:M,days:A,hours:x,minutes:P,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N};let q=Uu(0,x,P,D,w,I,N,0);const Z=Lp(he.toNumber(q)),X=Y(k,Mr),j=Y(k,St),V=Ba(Y(k,vs),X,j,_,T,M,A,0,0,0,0,0,0),U=Ba(new(zi("%Temporal.Instant%"))(V),X,j,0,0,0,Z,0,0,0,0,0,0),L=he.subtract(U,V);return he.greaterThanOrEqual(he.multiply(he.subtract(q,L),he.BigInt(Z)),wn)&&({years:_,months:T,weeks:M,days:A}=qE(_,T,M,A,0,0,0,0,0,0,0,0,0,Z,0,0,0,0,0,0,k),q=Eg(he.subtract(q,L),g,v,y),{hours:x,minutes:P,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N}=da(0,0,0,0,0,0,he.toNumber(q),"hour")),{years:_,months:T,weeks:M,days:A,hours:x,minutes:P,seconds:D,milliseconds:w,microseconds:I,nanoseconds:N}}function cc(i,e,t,o,a,c,u,n,p,m,g,v,y,k){let _=i,T=e,M=t,A=o,x=a,P=c,D=u,w=n,I=p,N=he.BigInt(m);const q=zi("%Temporal.Duration%");let Z,X,j,V,U=k;if(U){if(wi(U))X=U,U=Br(U);else if(!pr(U))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Z=Y(U,St)}if(v==="year"||v==="month"||v==="week"||v==="day"){let L,R,G;N=Uu(0,x,P,D,w,I,m,0),X&&(L=Lb(X,_,T,M,A)),{days:R,nanoseconds:N,dayLengthNs:G}=Ov(N,L),j=he.BigInt(G),A+=R,x=P=D=w=I=0}switch(v){case"year":{if(!Z)throw new RangeError("A starting point is required for years rounding");const L=new q(_),R=Z.dateAdd,G=Ls(Z,U,L,void 0,R),$=Ls(Z,U,new q(_,T,M),void 0,R);U=G,A+=ig(G,$);const F=Ls(Z,U,{days:A},void 0,R),H=ds(null);H.largestUnit="year";const W=ac(Z,U,F,H).years;_+=W;const ne=U;U=Ls(Z,U,{years:W},void 0,R),A-=ig(ne,U);const ue=new q(A<0?-1:1);let{days:ie}=bs(Z,U,ue);ie=_r(ie);const oe=he.multiply(he.BigInt(ie),j);N=he.add(he.add(he.multiply(oe,he.BigInt(_)),he.multiply(he.BigInt(A),j)),N);const Se=ra(N,he.toNumber(he.multiply(oe,he.BigInt(g))),y);V=he.toNumber(N)/he.toNumber(oe),_=he.toNumber(he.divide(Se,oe)),N=wn,T=M=A=0;break}case"month":{if(!Z)throw new RangeError("A starting point is required for months rounding");const L=new q(_,T),R=Z.dateAdd,G=Ls(Z,U,L,void 0,R),$=Ls(Z,U,new q(_,T,M),void 0,R);U=G,A+=ig(G,$);const F=Lp(A),H=new q(0,A<0?-1:1);let W;for({relativeTo:U,days:W}=bs(Z,U,H);_r(A)>=_r(W);)T+=F,A-=W,{relativeTo:U,days:W}=bs(Z,U,H);W=_r(W);const ne=he.multiply(he.BigInt(W),j);N=he.add(he.add(he.multiply(ne,he.BigInt(T)),he.multiply(he.BigInt(A),j)),N);const ue=ra(N,he.toNumber(he.multiply(ne,he.BigInt(g))),y);V=he.toNumber(N)/he.toNumber(ne),T=he.toNumber(he.divide(ue,ne)),N=wn,M=A=0;break}case"week":{if(!Z)throw new RangeError("A starting point is required for weeks rounding");const L=Lp(A),R=new q(0,0,A<0?-1:1);let G;for({relativeTo:U,days:G}=bs(Z,U,R);_r(A)>=_r(G);)M+=L,A-=G,{relativeTo:U,days:G}=bs(Z,U,R);G=_r(G);const $=he.multiply(he.BigInt(G),j);N=he.add(he.add(he.multiply($,he.BigInt(M)),he.multiply(he.BigInt(A),j)),N);const F=ra(N,he.toNumber(he.multiply($,he.BigInt(g))),y);V=he.toNumber(N)/he.toNumber($),M=he.toNumber(he.divide(F,$)),N=wn,A=0;break}case"day":{const L=j;N=he.add(he.multiply(L,he.BigInt(A)),N);const R=ra(N,he.toNumber(he.multiply(L,he.BigInt(g))),y);V=he.toNumber(N)/he.toNumber(L),A=he.toNumber(he.divide(R,L)),N=wn;break}case"hour":{let R=he.multiply(he.BigInt(x),he.BigInt(36e11));R=he.add(R,he.multiply(he.BigInt(P),he.BigInt(6e10))),R=he.add(R,he.multiply(he.BigInt(D),yl)),R=he.add(R,he.multiply(he.BigInt(w),ja)),R=he.add(R,he.multiply(he.BigInt(I),Pr)),R=he.add(R,N),V=he.toNumber(R)/36e11;const G=ra(R,36e11*g,y);x=he.toNumber(he.divide(G,he.BigInt(36e11))),N=wn,P=D=w=I=0;break}case"minute":{let R=he.multiply(he.BigInt(P),he.BigInt(6e10));R=he.add(R,he.multiply(he.BigInt(D),yl)),R=he.add(R,he.multiply(he.BigInt(w),ja)),R=he.add(R,he.multiply(he.BigInt(I),Pr)),R=he.add(R,N),V=he.toNumber(R)/6e10;const G=ra(R,6e10*g,y);P=he.toNumber(he.divide(G,he.BigInt(6e10))),N=wn,D=w=I=0;break}case"second":{let R=he.multiply(he.BigInt(D),yl);R=he.add(R,he.multiply(he.BigInt(w),ja)),R=he.add(R,he.multiply(he.BigInt(I),Pr)),R=he.add(R,N),V=he.toNumber(R)/1e9;const G=ra(R,1e9*g,y);D=he.toNumber(he.divide(G,he.BigInt(1e9))),N=wn,w=I=0;break}case"millisecond":{let R=he.multiply(he.BigInt(w),ja);R=he.add(R,he.multiply(he.BigInt(I),Pr)),R=he.add(R,N),V=he.toNumber(R)/1e6;const G=ra(R,1e6*g,y);w=he.toNumber(he.divide(G,he.BigInt(1e6))),N=wn,I=0;break}case"microsecond":{let R=he.multiply(he.BigInt(I),Pr);R=he.add(R,N),V=he.toNumber(R)/1e3;const G=ra(R,1e3*g,y);I=he.toNumber(he.divide(G,he.BigInt(1e3))),N=wn;break}case"nanosecond":V=he.toNumber(N),N=ra(N,g,y)}return{years:_,months:T,weeks:M,days:A,hours:x,minutes:P,seconds:D,milliseconds:w,microseconds:I,nanoseconds:he.toNumber(N),total:V}}function tc(i,e,t,o,a,c){for(const[u,n]of[[i,o],[e,a],[t,c]])if(u!==n)return lh(u-n);return 0}function xu(i,e){let t=i%e;return lI(t,-0)?0:(t<0&&(t+=e),t)}function Cg(i){const e=Cp(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function Cp(i){if(i instanceof he)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=Cv(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return he.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?Sv:wn}}const Gv=(()=>{let i=he.BigInt(Date.now()%1e6);return()=>{const e=he.BigInt(Date.now()),t=he.add(he.multiply(e,ja),i);return i=he.remainder(e,ja),he.greaterThan(t,Np)?Np:he.lessThan(t,zp)?zp:t}})();function lh(i){return i<0?-1:i>0?1:i}function sr(i){if(i===void 0)return ds(null);if(Wr(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function $u(i,e){const t=ds(null);return t[i]=e,t}function hc(i,e,t,o){let a=i[e];if(a!==void 0){if(a=Bi(a),!t.includes(a))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${a}`);return a}return o}function ZE(i){return gE.call(uI,i)}const XE=new RegExp(`^${pE.source}$`);function KE(i,e,t,o=i(e),a=i(t)){let c=he.BigInt(e),u=he.BigInt(t),n=o,p=a;for(;he.greaterThan(he.subtract(u,c),Sv);){const m=he.divide(he.add(c,u),he.BigInt(2)),g=i(m);if(g===n)c=m,n=g;else{if(g!==p)throw new Error(`invalid state in bisection ${n} - ${g} - ${p}`);u=m,p=g}}return u}const Hv={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},QE=Symbol("date"),JE=Symbol("ym"),eC=Symbol("md"),tC=Symbol("time"),iC=Symbol("datetime"),rC=Symbol("zoneddatetime"),nC=Symbol("instant"),Ru=Symbol("original"),zb=Symbol("timezone"),rg=Symbol("timezone-id-given"),ba=Symbol("calendar-id"),sC=Symbol("locale"),Nb=Symbol("options"),Sp=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),ch=globalThis.Intl.DateTimeFormat,No=Object.assign,gI=Object.prototype.hasOwnProperty,yI=Reflect.apply;function Xc(i,e){let t=i[e];return typeof t=="function"&&(t=new ch(i[sC],t(i[Nb])),i[e]=t),t}function cp(i){let e=i[zb];return typeof e=="string"&&(e=Ns(e),i[zb]=e),e}function vh(i,e={}){if(!(this instanceof vh))return new vh(i,e);const t=e!==void 0,o=t?No({},e):{},a=new ch(i,o),c=a.resolvedOptions();if(t){const u=No({},c);for(const n in u)yI(gI,o,[n])||delete u[n];this[Nb]=u}else this[Nb]=o;this[rg]=o.timeZone?o.timeZone:null,this[sC]=c.locale,this[Ru]=a,this[zb]=c.timeZone,this[ba]=c.calendar,this[QE]=_I,this[JE]=bI,this[eC]=vI,this[tC]=xI,this[iC]=wI,this[rC]=TI,this[nC]=EI}Object.defineProperty(vh,"name",{writable:!0,value:"DateTimeFormat"}),vh.supportedLocalesOf=function(i,e){return ch.supportedLocalesOf(i,e)};const Vx={resolvedOptions:Sp(function(){return this[Ru].resolvedOptions()}),format:Sp(function(e,...t){let{instant:o,formatter:a,timeZone:c}=Lu(e,this);return o&&a?(a=Sg(a,c),a.format(o.epochMilliseconds)):this[Ru].format(e,...t)}),formatRange:Sp(function(e,t){if(Vu(e)||Vu(t)){if(!aC(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:o,formatter:a,timeZone:c}=Lu(e,this),{instant:u,formatter:n,timeZone:p}=Lu(t,this);if(c&&p&&c!==p)throw new RangeError("cannot format range between different time zones");if(o&&u&&a&&n&&a===n)return Sg(a,c).formatRange(o.epochMilliseconds,u.epochMilliseconds)}return this[Ru].formatRange(e,t)})};"formatToParts"in ch.prototype&&(Vx.formatToParts=Sp(function(e,...t){let{instant:o,formatter:a,timeZone:c}=Lu(e,this);return o&&a?(a=Sg(a,c),a.formatToParts(o.epochMilliseconds)):this[Ru].formatToParts(e,...t)})),"formatRangeToParts"in ch.prototype&&(Vx.formatRangeToParts=Sp(function(e,t){if(Vu(e)||Vu(t)){if(!aC(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:o,formatter:a,timeZone:c}=Lu(e,this),{instant:u,formatter:n,timeZone:p}=Lu(t,this);if(c&&p&&c!==p)throw new RangeError("cannot format range between different time zones");if(o&&u&&a&&n&&a===n)return Sg(a,c).formatRangeToParts(o.epochMilliseconds,u.epochMilliseconds)}return this[Ru].formatRangeToParts(e,t)})),vh.prototype=Object.create(ch.prototype,Vx),Object.defineProperty(vh,"prototype",{writable:!1,enumerable:!1,configurable:!1});const Sh=vh;function Sg(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new ch(t.locale,{...t,timeZone:e}))}function _f(i={},e={}){const t=No({},i);for(const o of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[o]=o in e?e[o]:t[o],t[o]!==!1&&t[o]!==void 0||delete t[o];return t}function xI(i){let e=_f(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return vy(e)||(e=No({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function bI(i){let e=_f(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=No(e,{year:"numeric",month:"numeric"})),e}function vI(i){let e=_f(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=No({},e,{month:"numeric",day:"numeric"})),e}function _I(i){let e=_f(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return by(e)||(e=No({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function wI(i){let e=_f(i,{timeZoneName:!1});return vy(e)||by(e)||(e=No({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function TI(i){let e=i;return vy(e)||by(e)||(e=No({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function EI(i){let e=i;return vy(e)||by(e)||(e=No({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function by(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function vy(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function Vu(i){return pr(i)||fn(i)||Ki(i)||wi(i)||Cr(i)||Qn(i)||On(i)}function aC(i,e){return!(!Vu(i)||!Vu(e))&&!(fn(i)&&!fn(e))&&!(pr(i)&&!pr(e))&&!(Ki(i)&&!Ki(e))&&!(wi(i)&&!wi(e))&&!(Cr(i)&&!Cr(e))&&!(Qn(i)&&!Qn(e))&&!(On(i)&&!On(e))}function Lu(i,e){const t=zi("%Temporal.PlainDateTime%");if(fn(i)){const o=new t(1970,1,1,Y(i,Vi),Y(i,Gi),Y(i,Hi),Y(i,Wi),Y(i,qi),Y(i,Yi),e[ba]);return{instant:zs(cp(e),o,"compatible"),formatter:Xc(e,tC)}}if(Cr(i)){const o=Y(i,ni),a=Y(i,hi),c=Y(i,gi),u=Bi(Y(i,St));if(u!==e[ba])throw new RangeError(`cannot format PlainYearMonth with calendar ${u} in locale with calendar ${e[ba]}`);const n=new t(o,a,c,12,0,0,0,0,0,u);return{instant:zs(cp(e),n,"compatible"),formatter:Xc(e,JE)}}if(Qn(i)){const o=Y(i,ni),a=Y(i,hi),c=Y(i,gi),u=Bi(Y(i,St));if(u!==e[ba])throw new RangeError(`cannot format PlainMonthDay with calendar ${u} in locale with calendar ${e[ba]}`);const n=new t(o,a,c,12,0,0,0,0,0,u);return{instant:zs(cp(e),n,"compatible"),formatter:Xc(e,eC)}}if(pr(i)){const o=Y(i,ni),a=Y(i,hi),c=Y(i,gi),u=Bi(Y(i,St));if(u!=="iso8601"&&u!==e[ba])throw new RangeError(`cannot format PlainDate with calendar ${u} in locale with calendar ${e[ba]}`);const n=new t(o,a,c,12,0,0,0,0,0,e[ba]);return{instant:zs(cp(e),n,"compatible"),formatter:Xc(e,QE)}}if(Ki(i)){const o=Y(i,ni),a=Y(i,hi),c=Y(i,gi),u=Y(i,Vi),n=Y(i,Gi),p=Y(i,Hi),m=Y(i,Wi),g=Y(i,qi),v=Y(i,Yi),y=Bi(Y(i,St));if(y!=="iso8601"&&y!==e[ba])throw new RangeError(`cannot format PlainDateTime with calendar ${y} in locale with calendar ${e[ba]}`);let k=i;return y==="iso8601"&&(k=new t(o,a,c,u,n,p,m,g,v,e[ba])),{instant:zs(cp(e),k,"compatible"),formatter:Xc(e,iC)}}if(wi(i)){const o=Bi(Y(i,St));if(o!=="iso8601"&&o!==e[ba])throw new RangeError(`cannot format ZonedDateTime with calendar ${o} in locale with calendar ${e[ba]}`);const a=Bi(Y(i,Mr));if(e[rg]&&e[rg]!==a)throw new RangeError(`timeZone option ${e[rg]} doesn't match actual time zone ${a}`);return{instant:Y(i,vs),formatter:Xc(e,rC),timeZone:a}}return On(i)?{instant:i,formatter:Xc(e,nC)}:{}}class no{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=Cp(e);eh(t),$o(this),Qi(this,Li,t)}get epochSeconds(){if(!On(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return he.toNumber(he.divide(e,yl))}get epochMilliseconds(){if(!On(this))throw new TypeError("invalid receiver");const e=he.BigInt(Y(this,Li));return he.toNumber(he.divide(e,ja))}get epochMicroseconds(){if(!On(this))throw new TypeError("invalid receiver");const e=he.BigInt(Y(this,Li));return Cg(he.divide(e,Pr))}get epochNanoseconds(){if(!On(this))throw new TypeError("invalid receiver");return Cg(he.BigInt(Y(this,Li)))}add(e){if(!On(this))throw new TypeError("invalid receiver");return Lw("add",this,e)}subtract(e){if(!On(this))throw new TypeError("invalid receiver");return Lw("subtract",this,e)}until(e,t){if(!On(this))throw new TypeError("invalid receiver");return kw("until",this,e,t)}since(e,t){if(!On(this))throw new TypeError("invalid receiver");return kw("since",this,e,t)}round(e){if(!On(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?$u("smallestUnit",e):sr(e),o=Wn(t,"smallestUnit","time",gh),a=Hs(t,"halfExpand"),c=El(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0),u=Eg(Y(this,Li),c,o,a);return new no(u)}equals(e){if(!On(this))throw new TypeError("invalid receiver");const t=Mo(e),o=Y(this,Li),a=Y(t,Li);return he.equal(he.BigInt(o),he.BigInt(a))}toString(e){if(!On(this))throw new TypeError("invalid receiver");const t=sr(e);let o=t.timeZone;o!==void 0&&(o=Ns(o));const{precision:a,unit:c,increment:u}=gf(t),n=Hs(t,"trunc"),p=Eg(Y(this,Li),u,c,n);return bw(new no(p),o,a)}toJSON(){if(!On(this))throw new TypeError("invalid receiver");return bw(this,void 0,"auto")}toLocaleString(e,t){if(!On(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!On(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const o=es(t),a=e.timeZone;if(a===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const c=Ns(a);return ss(Y(this,Li),c,o)}toZonedDateTimeISO(e){let t=e;if(!On(this))throw new TypeError("invalid receiver");if(Wr(t)){const c=t.timeZone;c!==void 0&&(t=c)}const o=Ns(t),a=Cn();return ss(Y(this,Li),o,a)}static fromEpochSeconds(e){const t=Op(e),o=he.multiply(he.BigInt(t),yl);return eh(o),new no(o)}static fromEpochMilliseconds(e){const t=Op(e),o=he.multiply(he.BigInt(t),ja);return eh(o),new no(o)}static fromEpochMicroseconds(e){const t=Cp(e),o=he.multiply(t,Pr);return eh(o),new no(o)}static fromEpochNanoseconds(e){const t=Cp(e);return eh(t),new no(t)}static from(e){return On(e)?new no(Y(e,Li)):Mo(e)}static compare(e,t){const o=Mo(e),a=Mo(t),c=Y(o,Li),u=Y(a,Li);return he.lessThan(c,u)?-1:he.greaterThan(c,u)?1:0}}Uo(no,"Temporal.Instant");const kg=Array.prototype.includes,CI=Array.prototype.push,SI=globalThis.Intl.DateTimeFormat,kI=Array.prototype.sort,AI=Math.abs,MI=Math.floor,Ob=Object.entries,Bw=Object.keys,mn={};class Ag{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Bi(e);if(!ZE(t))throw new RangeError(`invalid calendar identifier ${t}`);$o(this),Qi(this,vn,t)}get id(){if(!bn(this))throw new TypeError("invalid receiver");return Bi(this)}dateFromFields(e,t){if(!bn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid fields");const o=sr(t);return mn[Y(this,vn)].dateFromFields(e,o,this)}yearMonthFromFields(e,t){if(!bn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid fields");const o=sr(t);return mn[Y(this,vn)].yearMonthFromFields(e,o,this)}monthDayFromFields(e,t){if(!bn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid fields");const o=sr(t);return mn[Y(this,vn)].monthDayFromFields(e,o,this)}fields(e){if(!bn(this))throw new TypeError("invalid receiver");const t=[],o=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const a of e){if(typeof a!="string")throw new TypeError("invalid fields");if(!o.has(a))throw new RangeError(`invalid field name ${a}`);o.delete(a),CI.call(t,a)}return mn[Y(this,vn)].fields(t)}mergeFields(e,t){if(!bn(this))throw new TypeError("invalid receiver");return mn[Y(this,vn)].mergeFields(e,t)}dateAdd(e,t,o){if(!bn(this))throw new TypeError("invalid receiver");const a=Br(e),c=Du(t),u=En(sr(o)),{days:n}=da(Y(c,ks),Y(c,As),Y(c,Ms),Y(c,Ps),Y(c,Is),Y(c,Ds),Y(c,Rs),"day");return mn[Y(this,vn)].dateAdd(a,Y(c,Ss),Y(c,Kn),Y(c,Vs),n,u,this)}dateUntil(e,t,o){if(!bn(this))throw new TypeError("invalid receiver");const a=Br(e),c=Br(t);let u=Wn(sr(o),"largestUnit","date","auto");u==="auto"&&(u="day");const{years:n,months:p,weeks:m,days:g}=mn[Y(this,vn)].dateUntil(a,c,u);return new(zi("%Temporal.Duration%"))(n,p,m,g,0,0,0,0,0,0)}year(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].year(t)}month(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");if(Qn(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].month(t)}monthCode(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||Qn(t)||(t=Br(t)),mn[Y(this,vn)].monthCode(t)}day(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Qn(t)||(t=Br(t)),mn[Y(this,vn)].day(t)}era(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].era(t)}eraYear(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].eraYear(t)}dayOfWeek(e){if(!bn(this))throw new TypeError("invalid receiver");const t=Br(e);return mn[Y(this,vn)].dayOfWeek(t)}dayOfYear(e){if(!bn(this))throw new TypeError("invalid receiver");const t=Br(e);return mn[Y(this,vn)].dayOfYear(t)}weekOfYear(e){if(!bn(this))throw new TypeError("invalid receiver");const t=Br(e);return mn[Y(this,vn)].weekOfYear(t)}daysInWeek(e){if(!bn(this))throw new TypeError("invalid receiver");const t=Br(e);return mn[Y(this,vn)].daysInWeek(t)}daysInMonth(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].daysInMonth(t)}daysInYear(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].daysInYear(t)}monthsInYear(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].monthsInYear(t)}inLeapYear(e){let t=e;if(!bn(this))throw new TypeError("invalid receiver");return Cr(t)||(t=Br(t)),mn[Y(this,vn)].inLeapYear(t)}toString(){if(!bn(this))throw new TypeError("invalid receiver");return Y(this,vn)}toJSON(){if(!bn(this))throw new TypeError("invalid receiver");return Bi(this)}static from(e){return es(e)}}function Wv(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function bl(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function ng(i,e,t=12){let{month:o,monthCode:a}=i;if(a===void 0){if(o===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ls(o,1,t),e==="constrain"&&(o=la(o,1,t)),a=bl(o)}else{const c=Wv(a);if(o!==void 0&&o!==c)throw new RangeError(`monthCode ${a} and month ${o} must match if both are present`);if(a!==bl(c))throw new RangeError(`Invalid month code: ${a}`);if(o=c,o<1||o>t)throw new RangeError(`Invalid monthCode: ${a}`)}return{...i,month:o,monthCode:a}}Uo(Ag,"Temporal.Calendar"),Sb("Temporal.Calendar.from",Ag.from),mn.iso8601={dateFromFields(i,e,t){const o=En(e);let a=rr(i,["day","month","monthCode","year"],["year","day"]);a=ng(a);let{year:c,month:u,day:n}=a;return{year:c,month:u,day:n}=bg(c,u,n,o),Qa(c,u,n,t)},yearMonthFromFields(i,e,t){const o=En(e);let a=rr(i,["month","monthCode","year"],["year"]);a=ng(a);let{year:c,month:u}=a;return{year:c,month:u}=function(p,m,g){let v=p,y=m;switch(g){case"reject":zo(v,y,1);break;case"constrain":({year:v,month:y}=UE(v,y))}return{year:v,month:y}}(c,u,o),Up(c,u,t,1)},monthDayFromFields(i,e,t){const o=En(e);let a=rr(i,["day","month","monthCode","year"],["day"]);if(a.month!==void 0&&a.year===void 0&&a.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const c=a.monthCode===void 0;a=ng(a);let{month:u,day:n,year:p}=a;return{month:u,day:n}=bg(c?p:1972,u,n,o),Fp(u,n,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const a of Bw(i))a!=="month"&&a!=="monthCode"&&(t[a]=i[a]);const o=Bw(e);for(const a of o)t[a]=e[a];if(!kg.call(o,"month")&&!kg.call(o,"monthCode")){const{month:a,monthCode:c}=i;a!==void 0&&(t.month=a),c!==void 0&&(t.monthCode=c)}return t},dateAdd(i,e,t,o,a,c,u){let n=Y(i,ni),p=Y(i,hi),m=Y(i,gi);return{year:n,month:p,day:m}=oh(n,p,m,e,t,o,a,c),Qa(n,p,m,u)},dateUntil:(i,e,t)=>Bv(Y(i,ni),Y(i,hi),Y(i,gi),Y(e,ni),Y(e,hi),Y(e,gi),t),year:i=>Y(i,ni),era(){},eraYear(){},month:i=>Y(i,hi),monthCode:i=>bl(Y(i,hi)),day:i=>Y(i,gi),dayOfWeek:i=>$x(Y(i,ni),Y(i,hi),Y(i,gi)),dayOfYear:i=>Tg(Y(i,ni),Y(i,hi),Y(i,gi)),weekOfYear:i=>function(t,o,a){const c=Tg(t,o,a),u=$x(t,o,a)||7,n=$x(t,1,1),p=Hn((c-u+10)/7);return p<1?n===5||n===6&&ec(t-1)?53:52:p===53&&(ec(t)?366:365)-c<4-u?1:p}(Y(i,ni),Y(i,hi),Y(i,gi)),daysInWeek:()=>7,daysInMonth:i=>xl(Y(i,ni),Y(i,hi)),daysInYear(i){let e=i;return Yn(e,ni)||(e=Br(e)),ec(Y(e,ni))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return Yn(e,ni)||(e=Br(e)),ec(Y(e,ni))}};class ln{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const o of e.map.entries()){if(++t>ln.MAX_CACHE_ENTRIES)break;this.map.set(...o)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(ln.objectMap.get(e))throw new RangeError("object already cached");ln.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=ln.objectMap.get(e);return t||(t=new ln,ln.objectMap.set(e,t)),t}}function oC({isoYear:i,isoMonth:e,isoDay:t}){return`${Ch(i)}-${nn(e)}-${nn(t)}T00:00Z`}function Gx(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}ln.objectMap=new WeakMap,ln.MAX_CACHE_ENTRIES=1e3;class id{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new SI(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:o,month:a,day:c}=e,u=JSON.stringify({func:"isoToCalendarDate",isoYear:o,isoMonth:a,isoDay:c,id:this.id}),n=t.get(u);if(n)return n;const p=this.getFormatter();let m,g;try{g=oC({isoYear:o,isoMonth:a,isoDay:c}),m=p.formatToParts(new Date(g))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:o,isoMonth:a,isoDay:c})}`)}const v={};for(let{type:k,value:_}of m){if(k==="year"&&(v.eraYear=+_),k==="relatedYear"&&(v.eraYear=+_),k==="month"){const T=/^([0-9]*)(.*?)$/.exec(_);if(!T||T.length!=3||!T[1]&&!T[2])throw new RangeError(`Unexpected month: ${_}`);if(v.month=T[1]?+T[1]:1,v.month<1)throw new RangeError(`Invalid month ${_} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(v.month>13)throw new RangeError(`Invalid month ${_} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);T[2]&&(v.monthExtra=T[2])}k==="day"&&(v.day=+_),this.hasEra&&k==="era"&&_!=null&&_!==""&&(_=_.split(" (")[0],v.era=_.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(v.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:k,eraYear:_}=this.reviseIntlEra(v,e);v.era=k,v.eraYear=_}this.checkIcuBugs&&this.checkIcuBugs(e);const y=this.adjustCalendarDate(v,t,"constrain",!0);if(y.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(y.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(y.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(u,y),["constrain","reject"].forEach(k=>{const _=JSON.stringify({func:"calendarToIsoDate",year:y.year,month:y.month,day:y.day,overflow:k,id:this.id});t.set(_,e)}),y}validateCalendarDate(e){const{era:t,month:o,year:a,day:c,eraYear:u,monthCode:n,monthExtra:p}=e;if(p!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(a===void 0&&u===void 0)throw new TypeError("year or eraYear is required");if(o===void 0&&n===void 0)throw new TypeError("month or monthCode is required");if(c===void 0)throw new RangeError("Missing day");if(n!==void 0){if(typeof n!="string")throw new RangeError("monthCode must be a string, not "+typeof n);if(!/^M([01]?\d)(L?)$/.test(n))throw new RangeError(`Invalid monthCode: ${n}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(u!==void 0&&a!==void 0&&u!==a)throw new RangeError(`eraYear ${u} does not match year ${a}`)}}adjustCalendarDate(e,t,o="constrain",a=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let c=e;if(this.validateCalendarDate(c),this.constantEra){const{year:m,eraYear:g}=c;c={...c,era:this.constantEra,year:m!==void 0?m:g,eraYear:g!==void 0?g:m}}const u=this.monthsInYear(c,t);let{month:n,monthCode:p}=c;return{month:n,monthCode:p}=ng(c,o,u),{...c,month:n,monthCode:p}}regulateMonthDayNaive(e,t,o){const a=this.monthsInYear(e,o);let{month:c,day:u}=e;return t==="reject"?(ls(c,1,a),ls(u,1,this.maximumMonthLength(e))):(c=la(c,1,a),u=la(u,1,this.maximumMonthLength({...e,month:c}))),{...e,month:c,day:u}}calendarToIsoDate(e,t="constrain",o){const a=e;let c=this.adjustCalendarDate(e,o,t,!1);c=this.regulateMonthDayNaive(c,t,o);const{year:u,month:n,day:p}=c,m=JSON.stringify({func:"calendarToIsoDate",year:u,month:n,day:p,overflow:t,id:this.id});let g,v=o.get(m);if(v||a.year!==void 0&&a.month!==void 0&&a.day!==void 0&&(a.year!==c.year||a.month!==c.month||a.day!==c.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:a.year,month:a.month,day:a.day,overflow:t,id:this.id}),v=o.get(g),v))return v;let y=this.estimateIsoDate({year:u,month:n,day:p});const k=P=>{let D=this.addDaysIso(y,P);if(c.day>this.minimumMonthLength(c)){let w=this.isoToCalendarDate(D,o);for(;w.month!==n||w.year!==u;){if(t==="reject")throw new RangeError(`day ${p} does not exist in month ${n} of year ${u}`);D=this.addDaysIso(D,-1),w=this.isoToCalendarDate(D,o)}}return D};let _=0,T=this.isoToCalendarDate(y,o),M=Gx(c,T);if(M.years!==0||M.months!==0||M.days!==0){const P=365*M.years+30*M.months+M.days;y=this.addDaysIso(y,P),T=this.isoToCalendarDate(y,o),M=Gx(c,T),M.years===0&&M.months===0?y=k(M.days):_=this.compareCalendarDates(c,T)}let A=8,x=!1;for(;_;){y=this.addDaysIso(y,_*A);const P=T;T=this.isoToCalendarDate(y,o);const D=_;if(_=this.compareCalendarDates(c,T),_){if(M=Gx(c,T),M.years===0&&M.months===0)y=k(M.days),_=0,x=c.day>this.minimumMonthLength(c);else if(D&&_!==D)if(A>1)A/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...a})}`);this.compareCalendarDates(T,P)>0&&(y=this.addDaysIso(y,-1)),x=!0,_=0}}}if(o.set(m,y),g&&o.set(g,y),c.year===void 0||c.month===void 0||c.day===void 0||c.monthCode===void 0||this.hasEra&&(c.era===void 0||c.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!x){const P=JSON.stringify({func:"isoToCalendarDate",isoYear:y.year,isoMonth:y.month,isoDay:y.day,id:this.id});o.set(P,c)}return y}temporalToCalendarDate(e,t){const o={year:Y(e,ni),month:Y(e,hi),day:Y(e,gi)};return this.isoToCalendarDate(o,t)}compareCalendarDates(e,t){const o=rr(e,["day","month","year"],["day","month","year"]),a=rr(t,["day","month","year"],["day","month","year"]);return o.year!==a.year?lh(o.year-a.year):o.month!==a.month?lh(o.month-a.month):o.day!==a.day?lh(o.day-a.day):0}regulateDate(e,t="constrain",o){const a=this.calendarToIsoDate(e,t,o);return this.isoToCalendarDate(a,o)}addDaysIso(e,t){return oh(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,o){const a=this.calendarToIsoDate(e,"constrain",o),c=this.addDaysIso(a,t);return this.isoToCalendarDate(c,o)}addMonthsCalendar(e,t,o,a){let c=e;const{day:u}=c;for(let n=0,p=AI(t);n<p;n++){const{month:m}=c,g=c,v=t<0?-Math.max(u,this.daysInPreviousMonth(c,a)):this.daysInMonth(c,a),y=this.calendarToIsoDate(c,"constrain",a);let k=this.addDaysIso(y,v);if(c=this.isoToCalendarDate(k,a),t>0){const _=this.monthsInYear(g,a);for(;c.month-1!=m%_;)k=this.addDaysIso(k,-1),c=this.isoToCalendarDate(k,a)}c.day!==u&&(c=this.regulateDate({...c,day:u},"constrain",a))}if(o==="reject"&&c.day!==u)throw new RangeError(`Day ${u} does not exist in resulting calendar month`);return c}addCalendar(e,{years:t=0,months:o=0,weeks:a=0,days:c=0},u,n){const{year:p,day:m,monthCode:g}=e,v=this.adjustCalendarDate({year:p+t,monthCode:g,day:m},n),y=this.addMonthsCalendar(v,o,u,n),k=c+7*a;return this.addDaysCalendar(y,k,n)}untilCalendar(e,t,o,a){let c=0,u=0,n=0,p=0;switch(o){case"day":c=this.calendarDaysUntil(e,t,a);break;case"week":{const m=this.calendarDaysUntil(e,t,a);c=m%7,u=(m-c)/7;break}case"month":case"year":{const m=t.year-e.year,g=t.month-e.month,v=t.day-e.day,y=this.compareCalendarDates(t,e);if(!y)return{years:0,months:0,weeks:0,days:0};o==="year"&&m&&(p=g*y<0||g===0&&v*y<0?m-y:m);let k,_=p?this.addCalendar(e,{years:p},"constrain",a):e;do n+=y,k=_,_=this.addMonthsCalendar(k,y,"constrain",a),_.day!==e.day&&(_=this.regulateDate({..._,day:e.day},"constrain",a));while(this.compareCalendarDates(t,_)*y>=0);n-=y,c=this.calendarDaysUntil(k,t,a);break}}return{years:p,months:n,weeks:u,days:c}}daysInMonth(e,t){const{day:o}=e,a=this.maximumMonthLength(e),c=this.minimumMonthLength(e);if(c===a)return c;const u=o<=a-c?a:c,n=this.calendarToIsoDate(e,"constrain",t),p=this.addDaysIso(n,u),m=this.isoToCalendarDate(p,t),g=this.addDaysIso(p,-m.day);return this.isoToCalendarDate(g,t).day}daysInPreviousMonth(e,t){const{day:o,month:a,year:c}=e;let u={year:a>1?c:c-1,month:a,day:1};const n=a>1?a-1:this.monthsInYear(u,t);u={...u,month:n};const p=this.minimumMonthLength(u),m=this.maximumMonthLength(u);if(p===m)return m;const g=this.calendarToIsoDate(e,"constrain",t),v=this.addDaysIso(g,-o);return this.isoToCalendarDate(v,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,o){const a=this.calendarToIsoDate(e,"constrain",o),c=this.calendarToIsoDate(t,"constrain",o);return this.isoDaysUntil(a,c)}isoDaysUntil(e,t){return Bv(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,o){let a,c,u,n,p,{year:m,month:g,monthCode:v,day:y,era:k,eraYear:_}=e;if(v===void 0){if(m===void 0&&(k===void 0||_===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:v,year:m}=this.adjustCalendarDate({year:m,month:g,monthCode:v,day:y,era:k,eraYear:_},o,t))}const{year:T}=this.isoToCalendarDate({year:1972,month:1,day:1},o);for(let M=0;M<100;M++){const A=this.adjustCalendarDate({day:y,monthCode:v,year:T-M},o),x=this.calendarToIsoDate(A,"constrain",o),P=this.isoToCalendarDate(x,o);if({year:a,month:c,day:u}=x,P.monthCode===v&&P.day===y)return{month:c,day:u,year:a};t==="constrain"&&(n===void 0||P.monthCode===n.monthCode&&P.day>n.day)&&(n=P,p=x)}if(t==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${v} and day ${y}`)}}class PI extends id{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:o,year:a}=e,c=this.getMonthCode(a,o),u=Ob(this.months).find(p=>p[1].monthCode===c);if(u===void 0)throw new RangeError(`unmatched Hebrew month: ${o}`);const n=u[1].days;return typeof n=="number"?n:n[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?bl(5,!0):bl(t<6?t:t-1):bl(t)}adjustCalendarDate(e,t,o="constrain",a=!1){let{year:c,eraYear:u,month:n,monthCode:p,day:m,monthExtra:g}=e;if(c===void 0&&u!==void 0&&(c=u),u===void 0&&c!==void 0&&(u=c),a){if(g){const v=this.months[g];if(!v)throw new RangeError(`Unrecognized month from formatToParts: ${g}`);n=this.inLeapYear({year:c})?v.leap:v.regular}return p=this.getMonthCode(c,n),{year:c,month:n,day:m,era:void 0,eraYear:u,monthCode:p}}if(this.validateCalendarDate(e),n===void 0)if(p.endsWith("L")){if(p!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${p}`);if(n=6,!this.inLeapYear({year:c})){if(o==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${c} which is not a leap year`);n=5,m=30,p="M05"}}else{n=Wv(p),this.inLeapYear({year:c})&&n>=6&&n++;const v=this.monthsInYear({year:c});if(n<1||n>v)throw new RangeError(`Invalid monthCode: ${p}`)}else if(o==="reject"?(ls(n,1,this.monthsInYear({year:c})),ls(m,1,this.maximumMonthLength({year:c,month:n}))):(n=la(n,1,this.monthsInYear({year:c})),m=la(m,1,this.maximumMonthLength({year:c,month:n}))),p===void 0)p=this.getMonthCode(c,n);else if(this.getMonthCode(c,n)!==p)throw new RangeError(`monthCode ${p} doesn't correspond to month ${n} in Hebrew year ${c}`);return{...e,day:m,month:n,monthCode:p,year:c,eraYear:u}}}class rd extends id{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:MI(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class lC extends rd{constructor(){super(...arguments),this.id="islamic"}}class II extends rd{constructor(){super(...arguments),this.id="islamic-umalqura"}}class DI extends rd{constructor(){super(...arguments),this.id="islamic-tbla"}}class RI extends rd{constructor(){super(...arguments),this.id="islamic-civil"}}class LI extends rd{constructor(){super(...arguments),this.id="islamic-rgsa"}}class zI extends rd{constructor(){super(...arguments),this.id="islamicc"}}class NI extends id{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return lC.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class OI extends id{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return cC(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let o=this.months[t];if(o===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&o.leap&&(o=o.leap),o}estimateIsoDate(e){const t=this.adjustCalendarDate(e),o=this.getMonthInfo(t);return oh(t.year+78+(o.nextYear?1:0),o.month,o.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function cC(i){return i%4==0&&(i%100!=0||i%400==0)}class wf extends id{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:o,anchorEra:a}=function(u){let n,p=u;if(p.length===0)throw new RangeError("Invalid era data: eras are required");if(p.length===1&&p[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(p.length===1&&!p[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(p.filter(g=>g.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");p.forEach(g=>{if(g.isAnchor||!g.anchorEpoch&&!g.reverseOf){if(n)throw new RangeError("Invalid era data: cannot have multiple anchor eras");n=g,g.anchorEpoch={year:g.hasYearZero?0:1}}else if(!g.name)throw new RangeError("If era name is blank, it must be the anchor era")}),p=p.filter(g=>g.name),p.forEach(g=>{const{reverseOf:v}=g;if(v){const y=p.find(k=>k.name===v);if(y===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${v}`);g.reverseOf=y,g.anchorEpoch=y.anchorEpoch,g.isoEpoch=y.isoEpoch}g.anchorEpoch.month===void 0&&(g.anchorEpoch.month=1),g.anchorEpoch.day===void 0&&(g.anchorEpoch.day=1)}),kI.call(p,(g,v)=>{if(g.reverseOf)return 1;if(v.reverseOf)return-1;if(!g.isoEpoch||!v.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return v.isoEpoch.year-g.isoEpoch.year});const m=p[p.length-1].reverseOf;if(m&&m!==p[p.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return p.forEach((g,v)=>{g.genericName="era"+(p.length-1-v)}),{eras:p,anchorEra:n||p[0]}}(t);this.anchorEra=a,this.eras=o}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return cC(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(n,p)=>{const m=e[n];if(m!=null&&m!=p)throw new RangeError(`Input ${n} ${m} doesn't match calculated value ${p}`)},o=n=>{let p;const m={...e,year:n},g=this.eras.find((v,y)=>{if(y===this.eras.length-1){if(v.reverseOf){if(n>0)throw new RangeError(`Signed year ${n} is invalid for era ${v.name}`);return p=v.anchorEpoch.year-n,!0}return p=n-v.anchorEpoch.year+(v.hasYearZero?0:1),!0}return this.compareCalendarDates(m,v.anchorEpoch)>=0&&(p=n-v.anchorEpoch.year+(v.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${n} was not matched by any era`);return{eraYear:p,era:g.name}};let{year:a,eraYear:c,era:u}=e;if(a!=null)({eraYear:c,era:u}=o(a)),t("era",u),t("eraYear",c);else{if(c==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const n=u===void 0?void 0:this.eras.find(p=>p.name===u||p.genericName===u);if(!n)throw new RangeError(`Era ${u} (ISO year ${c}) was not matched by any era`);if(c<1&&n.reverseOf)throw new RangeError(`Years in ${u} era must be positive, not ${a}`);a=n.reverseOf?n.anchorEpoch.year-c:c+n.anchorEpoch.year-(n.hasYearZero?0:1),t("year",a),{eraYear:c,era:u}=o(a)}}return{...e,year:a,eraYear:c,era:u}}adjustCalendarDate(e,t,o="constrain"){let a=e;const{month:c,monthCode:u}=a;return c===void 0&&(a={...a,month:Wv(u)}),this.validateCalendarDate(a),a=this.completeEraYear(a),super.adjustCalendarDate(a,t,o)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:o,month:a,day:c}=t,{anchorEra:u}=this;return bg(o+u.isoEpoch.year-(u.hasYearZero?0:1),a,c,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&tc(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class qv extends wf{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class jI extends qv{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class BI extends qv{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class FI extends qv{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class UI extends wf{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class $I extends wf{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class VI extends wf{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:o}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:o}}}class GI extends wf{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:o,eraYear:a}=e,{year:c}=t;return this.eras.find(u=>u.name===o)?{era:o,eraYear:a}:c<1?{era:"bce",eraYear:1-c}:{era:"ce",eraYear:c}}}class hC extends id{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const o=this.getMonthList(e.year,t);return Ob(o).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const o=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),a=t.get(o);if(a)return a;const c=this.getFormatter(),u=(M,A)=>{const x=oC({isoYear:M,isoMonth:2,isoDay:1}),P=new Date(x);P.setUTCDate(A+1);const D=c.formatToParts(P),w=D.find(q=>q.type==="month").value,I=+D.find(q=>q.type==="day").value;let N=D.find(q=>q.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:w,calendarDay:I,calendarYearToVerify:N}};let n=17,{calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=u(e,n);p!=="1"&&(n+=29,{calendarMonthString:p,calendarDay:m}=u(e,n)),n-=m-5;const v={};let y,k,_=1,T=!1;do({calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=u(e,n)),y&&(v[k].daysInMonth=y+30-m),g!==e?T=!0:(v[p]={monthIndex:_++},n+=30),y=m,k=p;while(!T);return v[k].daysInMonth=y+30-m,t.set(o,v),v}estimateIsoDate(e){const{year:t,month:o}=e;return{year:t,month:o>=12?12:o+1,day:1}}adjustCalendarDate(e,t,o="constrain",a=!1){let{year:c,month:u,monthExtra:n,day:p,monthCode:m,eraYear:g}=e;if(a){if(c=g,n&&n!=="bis")throw new RangeError(`Unexpected leap month suffix: ${n}`);const v=bl(u,n!==void 0),y=`${u}${n||""}`,k=this.getMonthList(c,t)[y];if(k===void 0)throw new RangeError(`Unmatched month ${y} in Chinese year ${c}`);return u=k.monthIndex,{year:c,month:u,day:p,era:void 0,eraYear:g,monthCode:v}}if(this.validateCalendarDate(e),c===void 0&&(c=g),g===void 0&&(g=c),u===void 0){const v=this.getMonthList(c,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));let k=v[y];if(u=k&&k.monthIndex,u===void 0&&m.endsWith("L")&&!kg.call(["M01L","M12L","M13L"],m)&&o==="constrain"){let _=m.slice(1,-1);_[0]==="0"&&(_=_.slice(1)),k=v[_],k&&({daysInMonth:p,monthIndex:u}=k,m=bl(_))}if(u===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${c}`)}else if(m===void 0){const v=this.getMonthList(c,t),y=Ob(v),k=y.length;o==="reject"?(ls(u,1,k),ls(p,1,this.maximumMonthLength())):(u=la(u,1,k),p=la(p,1,this.maximumMonthLength()));const _=y.find(([,T])=>T.monthIndex===u);if(_===void 0)throw new RangeError(`Invalid month ${u} in Chinese year ${c}`);m=bl(_[0].replace("bis",""),_[0].indexOf("bis")!==-1)}else{const v=this.getMonthList(c,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));const k=v[y];if(!k)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${c}`);if(u!==k.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${u} in Chinese year ${c}`)}return{...e,year:c,eraYear:g,month:u,monthCode:m,day:p}}}class HI extends hC{constructor(){super(...arguments),this.id="chinese"}}class WI extends hC{constructor(){super(...arguments),this.id="dangi"}}const qI={helper:void 0,dateFromFields(i,e,t){const o=En(e),a=new ln,c=rr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:n,day:p}=this.helper.calendarToIsoDate(c,o,a),m=Qa(u,n,p,t);return a.setObject(m),m},yearMonthFromFields(i,e,t){const o=En(e),a=new ln,c=rr(i,["era","eraYear","month","monthCode","year"],[]),{year:u,month:n,day:p}=this.helper.calendarToIsoDate({...c,day:1},o,a),m=Up(u,n,t,p);return a.setObject(m),m},monthDayFromFields(i,e,t){const o=En(e),a=new ln,c=rr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:n,day:p}=this.helper.monthDayFromFields(c,o,a),m=Fp(n,p,t,u);return a.setObject(m),m},fields(i){let e=i;return kg.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},o={...e},{month:a,monthCode:c,year:u,era:n,eraYear:p,...m}=t,{month:g,monthCode:v,year:y,era:k,eraYear:_}=o;return g===void 0&&v===void 0&&(m.month=a,m.monthCode=c),y===void 0&&k===void 0&&_===void 0&&(m.year=u),{...m,...o}},dateAdd(i,e,t,o,a,c,u){const n=ln.getCacheForObject(i),p=this.helper.temporalToCalendarDate(i,n),m=this.helper.addCalendar(p,{years:e,months:t,weeks:o,days:a},c,n),g=this.helper.calendarToIsoDate(m,"constrain",n),{year:v,month:y,day:k}=g,_=Qa(v,y,k,u);return new ln(n).setObject(_),_},dateUntil(i,e,t){const o=ln.getCacheForObject(i),a=ln.getCacheForObject(e),c=this.helper.temporalToCalendarDate(i,o),u=this.helper.temporalToCalendarDate(e,a);return this.helper.untilCalendar(c,u,t,o)},year(i){const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=ln.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>mn.iso8601.dayOfWeek(i),dayOfYear(i){const e=ln.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),o=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(o,t,e)+1},weekOfYear:i=>mn.iso8601.weekOfYear(i),daysInWeek:i=>mn.iso8601.daysInWeek(i),daysInMonth(i){const e=ln.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),o=this.helper.maximumMonthLength(t);if(o===this.helper.minimumMonthLength(t))return o;const a=this.helper.startOfCalendarMonth(t),c=this.helper.addMonthsCalendar(a,1,"constrain",e);return this.helper.calendarDaysUntil(a,c,e)},daysInYear(i){let e=i;Yn(e,ni)||(e=Br(e));const t=ln.getCacheForObject(e),o=this.helper.temporalToCalendarDate(e,t),a=this.helper.startOfCalendarYear(o),c=this.helper.addCalendar(a,{years:1},"constrain",t);return this.helper.calendarDaysUntil(a,c,t)},monthsInYear(i){const e=ln.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;Yn(e,ni)||(e=Br(e));const t=ln.getCacheForObject(e),o=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(o,t)}};for(const i of[PI,NI,FI,jI,BI,HI,WI,UI,OI,$I,VI,GI,lC,II,DI,RI,LI,zI]){const e=new i;mn[e.id]={...qI,helper:e}}class Tf{constructor(e,t,o,a=Cn()){const c=Fr(e),u=Fr(t),n=Fr(o),p=es(a);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");kE(this,c,u,n,p)}get calendar(){if(!pr(this))throw new TypeError("invalid receiver");return Y(this,St)}get era(){if(!pr(this))throw new TypeError("invalid receiver");return hy(Y(this,St),this)}get eraYear(){if(!pr(this))throw new TypeError("invalid receiver");return uy(Y(this,St),this)}get year(){if(!pr(this))throw new TypeError("invalid receiver");return oy(Y(this,St),this)}get month(){if(!pr(this))throw new TypeError("invalid receiver");return ly(Y(this,St),this)}get monthCode(){if(!pr(this))throw new TypeError("invalid receiver");return xf(Y(this,St),this)}get day(){if(!pr(this))throw new TypeError("invalid receiver");return cy(Y(this,St),this)}get dayOfWeek(){if(!pr(this))throw new TypeError("invalid receiver");return Mv(Y(this,St),this)}get dayOfYear(){if(!pr(this))throw new TypeError("invalid receiver");return Pv(Y(this,St),this)}get weekOfYear(){if(!pr(this))throw new TypeError("invalid receiver");return Iv(Y(this,St),this)}get daysInWeek(){if(!pr(this))throw new TypeError("invalid receiver");return Dv(Y(this,St),this)}get daysInMonth(){if(!pr(this))throw new TypeError("invalid receiver");return bf(Y(this,St),this)}get daysInYear(){if(!pr(this))throw new TypeError("invalid receiver");return dy(Y(this,St),this)}get monthsInYear(){if(!pr(this))throw new TypeError("invalid receiver");return py(Y(this,St),this)}get inLeapYear(){if(!pr(this))throw new TypeError("invalid receiver");return fy(Y(this,St),this)}with(e,t){if(!pr(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");ed(e);const o=Y(this,St),a=In(o,["day","month","monthCode","year"]),c=rr(e,a,"partial");if(!c)throw new TypeError("invalid date-like");let u=rr(this,a,[]);return u=yh(o,u,c),u=rr(u,a,[]),oc(o,u,sr(t))}withCalendar(e){if(!pr(this))throw new TypeError("invalid receiver");const t=es(e);return new Tf(Y(this,ni),Y(this,hi),Y(this,gi),t)}add(e,t){if(!pr(this))throw new TypeError("invalid receiver");const o=Du(e),a=sr(t);return Ls(Y(this,St),this,o,a)}subtract(e,t){if(!pr(this))throw new TypeError("invalid receiver");const o=FE(Du(e)),a=sr(t);return Ls(Y(this,St),this,o,a)}until(e,t){if(!pr(this))throw new TypeError("invalid receiver");return Aw("until",this,e,t)}since(e,t){if(!pr(this))throw new TypeError("invalid receiver");return Aw("since",this,e,t)}equals(e){if(!pr(this))throw new TypeError("invalid receiver");const t=Br(e);for(const o of[ni,hi,gi])if(Y(this,o)!==Y(t,o))return!1;return vf(Y(this,St),Y(t,St))}toString(e){if(!pr(this))throw new TypeError("invalid receiver");return vw(this,mf(sr(e)))}toJSON(){if(!pr(this))throw new TypeError("invalid receiver");return vw(this)}toLocaleString(e,t){if(!pr(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!pr(this))throw new TypeError("invalid receiver");const t=Y(this,ni),o=Y(this,hi),a=Y(this,gi),c=Y(this,St);if(e===void 0)return oa(t,o,a,0,0,0,0,0,0,c);const u=gl(e);return oa(t,o,a,Y(u,Vi),Y(u,Gi),Y(u,Hi),Y(u,Wi),Y(u,qi),Y(u,Yi),c)}toZonedDateTime(e){if(!pr(this))throw new TypeError("invalid receiver");let t,o;if(Wr(e)){const _=e.timeZone;_===void 0?t=Ns(e):(t=Ns(_),o=e.plainTime)}else t=Ns(e);const a=Y(this,ni),c=Y(this,hi),u=Y(this,gi),n=Y(this,St);let p=0,m=0,g=0,v=0,y=0,k=0;return o!==void 0&&(o=gl(o),p=Y(o,Vi),m=Y(o,Gi),g=Y(o,Hi),v=Y(o,Wi),y=Y(o,qi),k=Y(o,Yi)),ss(Y(zs(t,oa(a,c,u,p,m,g,v,y,k,n),"compatible"),Li),t,n)}toPlainYearMonth(){if(!pr(this))throw new TypeError("invalid receiver");const e=Y(this,St);return xh(e,rr(this,In(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!pr(this))throw new TypeError("invalid receiver");const e=Y(this,St);return Bu(e,rr(this,In(e,["day","monthCode"]),[]))}getISOFields(){if(!pr(this))throw new TypeError("invalid receiver");return{calendar:Y(this,St),isoDay:Y(this,gi),isoMonth:Y(this,hi),isoYear:Y(this,ni)}}static from(e,t){const o=sr(t);return pr(e)?(En(o),Qa(Y(e,ni),Y(e,hi),Y(e,gi),Y(e,St))):Br(e,o)}static compare(e,t){const o=Br(e),a=Br(t);return tc(Y(o,ni),Y(o,hi),Y(o,gi),Y(a,ni),Y(a,hi),Y(a,gi))}}Uo(Tf,"Temporal.PlainDate");class Ef{constructor(e,t,o,a=0,c=0,u=0,n=0,p=0,m=0,g=Cn()){const v=Fr(e),y=Fr(t),k=Fr(o),_=Fr(a),T=Fr(c),M=Fr(u),A=Fr(n),x=Fr(p),P=Fr(m),D=es(g);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");AE(this,v,y,k,_,T,M,A,x,P,D)}get calendar(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,St)}get year(){if(!Ki(this))throw new TypeError("invalid receiver");return oy(Y(this,St),this)}get month(){if(!Ki(this))throw new TypeError("invalid receiver");return ly(Y(this,St),this)}get monthCode(){if(!Ki(this))throw new TypeError("invalid receiver");return xf(Y(this,St),this)}get day(){if(!Ki(this))throw new TypeError("invalid receiver");return cy(Y(this,St),this)}get hour(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Vi)}get minute(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Gi)}get second(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Hi)}get millisecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Wi)}get microsecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,qi)}get nanosecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Yi)}get era(){if(!Ki(this))throw new TypeError("invalid receiver");return hy(Y(this,St),this)}get eraYear(){if(!Ki(this))throw new TypeError("invalid receiver");return uy(Y(this,St),this)}get dayOfWeek(){if(!Ki(this))throw new TypeError("invalid receiver");return Mv(Y(this,St),this)}get dayOfYear(){if(!Ki(this))throw new TypeError("invalid receiver");return Pv(Y(this,St),this)}get weekOfYear(){if(!Ki(this))throw new TypeError("invalid receiver");return Iv(Y(this,St),this)}get daysInWeek(){if(!Ki(this))throw new TypeError("invalid receiver");return Dv(Y(this,St),this)}get daysInYear(){if(!Ki(this))throw new TypeError("invalid receiver");return dy(Y(this,St),this)}get daysInMonth(){if(!Ki(this))throw new TypeError("invalid receiver");return bf(Y(this,St),this)}get monthsInYear(){if(!Ki(this))throw new TypeError("invalid receiver");return py(Y(this,St),this)}get inLeapYear(){if(!Ki(this))throw new TypeError("invalid receiver");return fy(Y(this,St),this)}with(e,t){if(!Ki(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");ed(e);const o=sr(t),a=Y(this,St),c=In(a,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),u=rr(e,c,"partial");if(!u)throw new TypeError("invalid date-time-like");let n=rr(this,c,[]);n=yh(a,n,u),n=rr(n,c,[]);const{year:p,month:m,day:g,hour:v,minute:y,second:k,millisecond:_,microsecond:T,nanosecond:M}=yf(a,n,o);return oa(p,m,g,v,y,k,_,T,M,a)}withPlainTime(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=Y(this,ni),o=Y(this,hi),a=Y(this,gi),c=Y(this,St);if(e===void 0)return oa(t,o,a,0,0,0,0,0,0,c);const u=gl(e);return oa(t,o,a,Y(u,Vi),Y(u,Gi),Y(u,Hi),Y(u,Wi),Y(u,qi),Y(u,Yi),c)}withPlainDate(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=Br(e),o=Y(t,ni),a=Y(t,hi),c=Y(t,gi);let u=Y(t,St);const n=Y(this,Vi),p=Y(this,Gi),m=Y(this,Hi),g=Y(this,Wi),v=Y(this,qi),y=Y(this,Yi);return u=DE(Y(this,St),u),oa(o,a,c,n,p,m,g,v,y,u)}withCalendar(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=es(e);return new Ef(Y(this,ni),Y(this,hi),Y(this,gi),Y(this,Vi),Y(this,Gi),Y(this,Hi),Y(this,Wi),Y(this,qi),Y(this,Yi),t)}add(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return zw("add",this,e,t)}subtract(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return zw("subtract",this,e,t)}until(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return Mw("until",this,e,t)}since(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return Mw("since",this,e,t)}round(e){if(!Ki(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?$u("smallestUnit",e):sr(e),o=Wn(t,"smallestUnit","time",gh,["day"]),a=Hs(t,"halfExpand"),c=El(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1);let u=Y(this,ni),n=Y(this,hi),p=Y(this,gi),m=Y(this,Vi),g=Y(this,Gi),v=Y(this,Hi),y=Y(this,Wi),k=Y(this,qi),_=Y(this,Yi);return{year:u,month:n,day:p,hour:m,minute:g,second:v,millisecond:y,microsecond:k,nanosecond:_}=$v(u,n,p,m,g,v,y,k,_,c,o,a),oa(u,n,p,m,g,v,y,k,_,Y(this,St))}equals(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=ih(e);for(const o of[ni,hi,gi,Vi,Gi,Hi,Wi,qi,Yi])if(Y(this,o)!==Y(t,o))return!1;return vf(Y(this,St),Y(t,St))}toString(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:o,unit:a,increment:c}=gf(t);return _w(this,o,mf(t),{unit:a,increment:c,roundingMode:Hs(t,"trunc")})}toJSON(){if(!Ki(this))throw new TypeError("invalid receiver");return _w(this,"auto")}toLocaleString(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!Ki(this))throw new TypeError("invalid receiver");const o=Ns(e);return ss(Y(zs(o,this,Bp(sr(t))),Li),o,Y(this,St))}toPlainDate(){if(!Ki(this))throw new TypeError("invalid receiver");return Fu(this)}toPlainYearMonth(){if(!Ki(this))throw new TypeError("invalid receiver");const e=Y(this,St);return xh(e,rr(this,In(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Ki(this))throw new TypeError("invalid receiver");const e=Y(this,St);return Bu(e,rr(this,In(e,["day","monthCode"]),[]))}toPlainTime(){if(!Ki(this))throw new TypeError("invalid receiver");return Rv(this)}getISOFields(){if(!Ki(this))throw new TypeError("invalid receiver");return{calendar:Y(this,St),isoDay:Y(this,gi),isoHour:Y(this,Vi),isoMicrosecond:Y(this,qi),isoMillisecond:Y(this,Wi),isoMinute:Y(this,Gi),isoMonth:Y(this,hi),isoNanosecond:Y(this,Yi),isoSecond:Y(this,Hi),isoYear:Y(this,ni)}}static from(e,t){const o=sr(t);return Ki(e)?(En(o),oa(Y(e,ni),Y(e,hi),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(e,St))):ih(e,o)}static compare(e,t){const o=ih(e),a=ih(t);for(const c of[ni,hi,gi,Vi,Gi,Hi,Wi,qi,Yi]){const u=Y(o,c),n=Y(a,c);if(u!==n)return lh(u-n)}return 0}}Uo(Ef,"Temporal.PlainDateTime");class ic{constructor(e=0,t=0,o=0,a=0,c=0,u=0,n=0,p=0,m=0,g=0){const v=Vn(e),y=Vn(t),k=Vn(o),_=Vn(a),T=Vn(c),M=Vn(u),A=Vn(n),x=Vn(p),P=Vn(m),D=Vn(g);xy(v,y,k,_,T,M,A,x,P,D),$o(this),Qi(this,Ss,v),Qi(this,Kn,y),Qi(this,Vs,k),Qi(this,ks,_),Qi(this,As,T),Qi(this,Ms,M),Qi(this,Ps,A),Qi(this,Is,x),Qi(this,Ds,P),Qi(this,Rs,D)}get years(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Ss)}get months(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Kn)}get weeks(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Vs)}get days(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,ks)}get hours(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,As)}get minutes(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Ms)}get seconds(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Ps)}get milliseconds(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Is)}get microseconds(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Ds)}get nanoseconds(){if(!pn(this))throw new TypeError("invalid receiver");return Y(this,Rs)}get sign(){if(!pn(this))throw new TypeError("invalid receiver");return Do(Y(this,Ss),Y(this,Kn),Y(this,Vs),Y(this,ks),Y(this,As),Y(this,Ms),Y(this,Ps),Y(this,Is),Y(this,Ds),Y(this,Rs))}get blank(){if(!pn(this))throw new TypeError("invalid receiver");return Do(Y(this,Ss),Y(this,Kn),Y(this,Vs),Y(this,ks),Y(this,As),Y(this,Ms),Y(this,Ps),Y(this,Is),Y(this,Ds),Y(this,Rs))===0}with(e){if(!pn(this))throw new TypeError("invalid receiver");const t=rr(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:o=Y(this,Ss),months:a=Y(this,Kn),weeks:c=Y(this,Vs),days:u=Y(this,ks),hours:n=Y(this,As),minutes:p=Y(this,Ms),seconds:m=Y(this,Ps),milliseconds:g=Y(this,Is),microseconds:v=Y(this,Ds),nanoseconds:y=Y(this,Rs)}=t;return new ic(o,a,c,u,n,p,m,g,v,y)}negated(){if(!pn(this))throw new TypeError("invalid receiver");return FE(this)}abs(){if(!pn(this))throw new TypeError("invalid receiver");return new ic(Math.abs(Y(this,Ss)),Math.abs(Y(this,Kn)),Math.abs(Y(this,Vs)),Math.abs(Y(this,ks)),Math.abs(Y(this,As)),Math.abs(Y(this,Ms)),Math.abs(Y(this,Ps)),Math.abs(Y(this,Is)),Math.abs(Y(this,Ds)),Math.abs(Y(this,Rs)))}add(e,t){if(!pn(this))throw new TypeError("invalid receiver");return Rw("add",this,e,t)}subtract(e,t){if(!pn(this))throw new TypeError("invalid receiver");return Rw("subtract",this,e,t)}round(e){if(!pn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Y(this,Ss),o=Y(this,Kn),a=Y(this,Vs),c=Y(this,ks),u=Y(this,As),n=Y(this,Ms),p=Y(this,Ps),m=Y(this,Is),g=Y(this,Ds),v=Y(this,Rs),y=Pb(t,o,a,c,u,n,p,m,g,v);const k=typeof e=="string"?$u("smallestUnit",e):sr(e);let _=Wn(k,"smallestUnit","datetime",void 0),T=!0;_||(T=!1,_="nanosecond"),y=pa(y,_);let M=Wn(k,"largestUnit","datetime",void 0,["auto"]),A=!0;if(M||(A=!1,M=y),M==="auto"&&(M=y),!T&&!A)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(pa(M,_)!==M)throw new RangeError(`largestUnit ${M} cannot be smaller than smallestUnit ${_}`);const x=Hs(k,"halfExpand"),P=Av(k,_);let D=eg(k);return{years:t,months:o,weeks:a,days:c}=Om(t,o,a,c,M,D),{years:t,months:o,weeks:a,days:c,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=cc(t,o,a,c,u,n,p,m,g,v,P,_,x,D),{years:t,months:o,weeks:a,days:c,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=YE(t,o,a,c,u,n,p,m,g,v,P,_,x,D),{years:t,months:o,weeks:a,days:c}=function(I,N,q,Z,X,j){let V=I,U=N,L=q,R=Z;const G=zi("%Temporal.Duration%"),$=Do(V,U,L,R,0,0,0,0,0,0);if($===0)return{years:V,months:U,weeks:L,days:R};let F,H;j&&(H=Br(j),F=Y(H,St));const W=new G($),ne=new G(0,$),ue=new G(0,0,$);switch(X){case"year":{if(!F)throw new RangeError("a starting point is required for years balancing");let ie,oe,Se;for({relativeTo:ie,days:oe}=bs(F,H,W);_r(R)>=_r(oe);)R-=oe,V+=$,H=ie,{relativeTo:ie,days:oe}=bs(F,H,W);for({relativeTo:ie,days:Se}=bs(F,H,ne);_r(R)>=_r(Se);)R-=Se,U+=$,H=ie,{relativeTo:ie,days:Se}=bs(F,H,ne);const ye=F.dateAdd;ie=Ls(F,H,W,void 0,ye);const Ce=F.dateUntil,K=ds(null);K.largestUnit="month";let Q=ac(F,H,ie,K,Ce),ae=Y(Q,Kn);for(;_r(U)>=_r(ae);){U-=ae,V+=$,H=ie,ie=Ls(F,H,W,void 0,ye);const ve=ds(null);ve.largestUnit="month",Q=ac(F,H,ie,ve,Ce),ae=Y(Q,Kn)}break}case"month":{if(!F)throw new RangeError("a starting point is required for months balancing");let ie,oe;for({relativeTo:ie,days:oe}=bs(F,H,ne);_r(R)>=_r(oe);)R-=oe,U+=$,H=ie,{relativeTo:ie,days:oe}=bs(F,H,ne);break}case"week":{if(!F)throw new RangeError("a starting point is required for weeks balancing");let ie,oe;for({relativeTo:ie,days:oe}=bs(F,H,ue);_r(R)>=_r(oe);)R-=oe,L+=$,H=ie,{relativeTo:ie,days:oe}=bs(F,H,ue);break}}return{years:V,months:U,weeks:L,days:R}}(t,o,a,c,M,D),wi(D)&&(D=Lb(D,t,o,a,0)),{days:c,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=da(c,u,n,p,m,g,v,M,D),new ic(t,o,a,c,u,n,p,m,g,v)}total(e){if(!pn(this))throw new TypeError("invalid receiver");let t=Y(this,Ss),o=Y(this,Kn),a=Y(this,Vs),c=Y(this,ks),u=Y(this,As),n=Y(this,Ms),p=Y(this,Ps),m=Y(this,Is),g=Y(this,Ds),v=Y(this,Rs);if(e===void 0)throw new TypeError("options argument is required");const y=typeof e=="string"?$u("unit",e):sr(e),k=Wn(y,"unit","datetime",gh),_=eg(y);let T;({years:t,months:o,weeks:a,days:c}=Om(t,o,a,c,k,_)),wi(_)&&(T=Lb(_,t,o,a,0)),{days:c,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=da(c,u,n,p,m,g,v,k,T);const{total:M}=cc(t,o,a,c,u,n,p,m,g,v,1,k,"trunc",_);return M}toString(e){if(!pn(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:o,unit:a,increment:c}=gf(t);if(o==="minute")throw new RangeError('smallestUnit must not be "minute"');return Ux(this,o,{unit:a,increment:c,roundingMode:Hs(t,"trunc")})}toJSON(){if(!pn(this))throw new TypeError("invalid receiver");return Ux(this)}toLocaleString(e,t){if(!pn(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Ux(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return pn(e)?new ic(Y(e,Ss),Y(e,Kn),Y(e,Vs),Y(e,ks),Y(e,As),Y(e,Ms),Y(e,Ps),Y(e,Is),Y(e,Ds),Y(e,Rs)):Du(e)}static compare(e,t,o){const a=Du(e),c=Du(t),u=eg(sr(o)),n=Y(a,Ss),p=Y(a,Kn),m=Y(a,Vs);let g=Y(a,ks);const v=Y(a,As),y=Y(a,Ms),k=Y(a,Ps),_=Y(a,Is),T=Y(a,Ds);let M=Y(a,Rs);const A=Y(c,Ss),x=Y(c,Kn),P=Y(c,Vs);let D=Y(c,ks);const w=Y(c,As),I=Y(c,Ms),N=Y(c,Ps),q=Y(c,Is),Z=Y(c,Ds);let X=Y(c,Rs);const j=Sw(u,n,p,m,g),V=Sw(u,A,x,P,D);n===0&&A===0&&p===0&&x===0&&m===0&&P===0||({days:g}=Om(n,p,m,g,"day",u),{days:D}=Om(A,x,P,D,"day",u));const U=Uu(g,v,y,k,_,T,M,j),L=Uu(D,w,I,N,q,Z,X,V);return lh(he.toNumber(he.subtract(U,L)))}}Uo(ic,"Temporal.Duration");const YI=Object.create;class Yv{constructor(e,t,o=Cn(),a=1972){const c=Fr(e),u=Fr(t),n=es(o),p=Fr(a);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");ME(this,c,u,n,p)}get monthCode(){if(!Qn(this))throw new TypeError("invalid receiver");return xf(Y(this,St),this)}get day(){if(!Qn(this))throw new TypeError("invalid receiver");return cy(Y(this,St),this)}get calendar(){if(!Qn(this))throw new TypeError("invalid receiver");return Y(this,St)}with(e,t){if(!Qn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");ed(e);const o=Y(this,St),a=In(o,["day","month","monthCode","year"]),c=rr(e,a,"partial");if(!c)throw new TypeError("invalid month-day-like");let u=rr(this,a,[]);return u=yh(o,u,c),u=rr(u,a,[]),Bu(o,u,sr(t))}equals(e){if(!Qn(this))throw new TypeError("invalid receiver");const t=xw(e);for(const o of[hi,gi,ni])if(Y(this,o)!==Y(t,o))return!1;return vf(Y(this,St),Y(t,St))}toString(e){if(!Qn(this))throw new TypeError("invalid receiver");return ww(this,mf(sr(e)))}toJSON(){if(!Qn(this))throw new TypeError("invalid receiver");return ww(this)}toLocaleString(e,t){if(!Qn(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!Qn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("argument should be an object");const t=Y(this,St),o=In(t,["day","monthCode"]),a=rr(this,o,[]),c=In(t,["year"]);let u=yh(t,a,rr(e,c,[]));u=rr(u,[...new Set([...o,...c])],[]);const n=YI(null);return n.overflow="reject",oc(t,u,n)}getISOFields(){if(!Qn(this))throw new TypeError("invalid receiver");return{calendar:Y(this,St),isoDay:Y(this,gi),isoMonth:Y(this,hi),isoYear:Y(this,ni)}}static from(e,t){const o=sr(t);return Qn(e)?(En(o),Fp(Y(e,hi),Y(e,gi),Y(e,St),Y(e,ni))):xw(e,o)}}Uo(Yv,"Temporal.PlainMonthDay");const Zv=()=>new(zi("%Temporal.Instant%"))(Gv()),Fw=(i,e=Kl())=>{const t=Ns(e),o=es(i);return wa(t,Zv(),o)},Hx=(i=Kl())=>{const e=Ns(i),t=Cn();return wa(e,Zv(),t)},Uw=(i,e=Kl())=>{const t=Ns(e),o=es(i);return ss(Gv(),t,o)},Kl=()=>function(){const e=new yE("en-us");return new(zi("%Temporal.TimeZone%"))(EE(e.resolvedOptions().timeZone))}(),uC={instant:Zv,plainDateTime:Fw,plainDateTimeISO:Hx,plainDate:(i,e=Kl())=>Fu(Fw(i,e)),plainDateISO:(i=Kl())=>Fu(Hx(i)),plainTimeISO:(i=Kl())=>Rv(Hx(i)),timeZone:Kl,zonedDateTime:Uw,zonedDateTimeISO:(i=Kl())=>Uw(Cn(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(uC,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const ZI=Object.assign;function $w(i,e,t){let o=Y(i,Vi),a=Y(i,Gi),c=Y(i,Hi),u=Y(i,Wi),n=Y(i,qi),p=Y(i,Yi);if(t){const{unit:m,increment:g,roundingMode:v}=t;({hour:o,minute:a,second:c,millisecond:u,microsecond:n,nanosecond:p}=Vv(o,a,c,u,n,p,g,m,v))}return`${nn(o)}:${nn(a)}${my(c,u,n,p,e)}`}class hh{constructor(e=0,t=0,o=0,a=0,c=0,u=0){const n=Fr(e),p=Fr(t),m=Fr(o),g=Fr(a),v=Fr(c),y=Fr(u);yy(n,p,m,g,v,y),$o(this),Qi(this,Vi,n),Qi(this,Gi,p),Qi(this,Hi,m),Qi(this,Wi,g),Qi(this,qi,v),Qi(this,Yi,y),Qi(this,St,Cn())}get calendar(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,St)}get hour(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,Vi)}get minute(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,Gi)}get second(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,Hi)}get millisecond(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,Wi)}get microsecond(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,qi)}get nanosecond(){if(!fn(this))throw new TypeError("invalid receiver");return Y(this,Yi)}with(e,t){if(!fn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");ed(e);const o=vg(e,"partial"),a=En(sr(t)),c=vg(this);let{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=ZI(c,o);return{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=sy(u,n,p,m,g,v,a),new hh(u,n,p,m,g,v)}add(e){if(!fn(this))throw new TypeError("invalid receiver");return Nw("add",this,e)}subtract(e){if(!fn(this))throw new TypeError("invalid receiver");return Nw("subtract",this,e)}until(e,t){if(!fn(this))throw new TypeError("invalid receiver");return Pw("until",this,e,t)}since(e,t){if(!fn(this))throw new TypeError("invalid receiver");return Pw("since",this,e,t)}round(e){if(!fn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?$u("smallestUnit",e):sr(e),o=Wn(t,"smallestUnit","time",gh),a=Hs(t,"halfExpand"),c=El(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1);let u=Y(this,Vi),n=Y(this,Gi),p=Y(this,Hi),m=Y(this,Wi),g=Y(this,qi),v=Y(this,Yi);return{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=Vv(u,n,p,m,g,v,c,o,a),new hh(u,n,p,m,g,v)}equals(e){if(!fn(this))throw new TypeError("invalid receiver");const t=gl(e);for(const o of[Vi,Gi,Hi,Wi,qi,Yi])if(Y(this,o)!==Y(t,o))return!1;return!0}toString(e){if(!fn(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:o,unit:a,increment:c}=gf(t);return $w(this,o,{unit:a,increment:c,roundingMode:Hs(t,"trunc")})}toJSON(){if(!fn(this))throw new TypeError("invalid receiver");return $w(this,"auto")}toLocaleString(e,t){if(!fn(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!fn(this))throw new TypeError("invalid receiver");const t=Br(e),o=Y(t,ni),a=Y(t,hi),c=Y(t,gi),u=Y(t,St);return oa(o,a,c,Y(this,Vi),Y(this,Gi),Y(this,Hi),Y(this,Wi),Y(this,qi),Y(this,Yi),u)}toZonedDateTime(e){if(!fn(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const o=Br(t),a=e.timeZone;if(a===void 0)throw new TypeError("missing timeZone property");const c=Ns(a),u=Y(o,ni),n=Y(o,hi),p=Y(o,gi),m=Y(o,St),g=Y(this,Vi),v=Y(this,Gi),y=Y(this,Hi),k=Y(this,Wi),_=Y(this,qi),T=Y(this,Yi);return ss(Y(zs(c,new(zi("%Temporal.PlainDateTime%"))(u,n,p,g,v,y,k,_,T,m),"compatible"),Li),c,m)}getISOFields(){if(!fn(this))throw new TypeError("invalid receiver");return{calendar:Y(this,St),isoHour:Y(this,Vi),isoMicrosecond:Y(this,qi),isoMillisecond:Y(this,Wi),isoMinute:Y(this,Gi),isoNanosecond:Y(this,Yi),isoSecond:Y(this,Hi)}}static from(e,t){const o=En(sr(t));return fn(e)?new hh(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi)):gl(e,o)}static compare(e,t){const o=gl(e),a=gl(t);for(const c of[Vi,Gi,Hi,Wi,qi,Yi]){const u=Y(o,c),n=Y(a,c);if(u!==n)return lh(u-n)}return 0}}Uo(hh,"Temporal.PlainTime");class Xv{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=Lv(e);$o(this),Qi(this,Yl,t)}get id(){if(!ko(this))throw new TypeError("invalid receiver");return Bi(this)}getOffsetNanosecondsFor(e){if(!ko(this))throw new TypeError("invalid receiver");const t=Mo(e),o=Y(this,Yl);return _p(o)?bh(o):pl(Y(t,Li),o)}getOffsetStringFor(e){if(!ko(this))throw new TypeError("invalid receiver");return Ib(this,Mo(e))}getPlainDateTimeFor(e,t=Cn()){return wa(this,Mo(e),es(t))}getInstantFor(e,t){if(!ko(this))throw new TypeError("invalid receiver");return zs(this,ih(e),Bp(sr(t)))}getPossibleInstantsFor(e){if(!ko(this))throw new TypeError("invalid receiver");const t=ih(e),o=zi("%Temporal.Instant%"),a=Y(this,Yl);if(_p(a)){const c=lc(Y(t,ni),Y(t,hi),Y(t,gi),Y(t,Vi),Y(t,Gi),Y(t,Hi),Y(t,Wi),Y(t,qi),Y(t,Yi));if(c===null)throw new RangeError("DateTime outside of supported range");const u=bh(a);return[new o(he.subtract(c,he.BigInt(u)))]}return function(u,n,p,m,g,v,y,k,_,T){const M=lc(n,p,m,g,v,y,k,_,T);if(M===null)throw new RangeError("DateTime outside of supported range");let A=he.subtract(M,sc);he.lessThan(A,zp)&&(A=M);let x=he.add(M,sc);he.greaterThan(x,Np)&&(x=M);const P=pl(A,u),D=pl(x,u);return(P===D?[P]:[P,D]).map(w=>{const I=he.subtract(M,he.BigInt(w)),N=OE(I,u);if(n===N.year&&p===N.month&&m===N.day&&g===N.hour&&v===N.minute&&y===N.second&&k===N.millisecond&&_===N.microsecond&&T===N.nanosecond)return I}).filter(w=>w!==void 0)}(a,Y(t,ni),Y(t,hi),Y(t,gi),Y(t,Vi),Y(t,Gi),Y(t,Hi),Y(t,Wi),Y(t,qi),Y(t,Yi)).map(c=>new o(c))}getNextTransition(e){if(!ko(this))throw new TypeError("invalid receiver");const t=Mo(e),o=Y(this,Yl);if(_p(o)||o==="UTC")return null;let a=Y(t,Li);const c=zi("%Temporal.Instant%");return a=function(n,p){const m=he.add(n,vE),g=Cw(jE(),m);let v=Cw(bE,n);const y=pl(v,p);let k=v,_=y;for(;y===_&&he.lessThan(he.BigInt(v),g);)k=he.add(v,_E),_=pl(k,p),y===_&&(v=k);return y===_?null:KE(T=>pl(T,p),v,k,y,_)}(a,o),a===null?null:new c(a)}getPreviousTransition(e){if(!ko(this))throw new TypeError("invalid receiver");const t=Mo(e),o=Y(this,Yl);if(_p(o)||o==="UTC")return null;let a=Y(t,Li);const c=zi("%Temporal.Instant%");return a=BE(a,o),a===null?null:new c(a)}toString(){if(!ko(this))throw new TypeError("invalid receiver");return Bi(Y(this,Yl))}toJSON(){if(!ko(this))throw new TypeError("invalid receiver");return Bi(this)}static from(e){return Ns(e)}}Uo(Xv,"Temporal.TimeZone");const XI=Object.create;class Kv{constructor(e,t,o=Cn(),a=1){const c=Fr(e),u=Fr(t),n=es(o),p=Fr(a);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");PE(this,c,u,n,p)}get year(){if(!Cr(this))throw new TypeError("invalid receiver");return oy(Y(this,St),this)}get month(){if(!Cr(this))throw new TypeError("invalid receiver");return ly(Y(this,St),this)}get monthCode(){if(!Cr(this))throw new TypeError("invalid receiver");return xf(Y(this,St),this)}get calendar(){if(!Cr(this))throw new TypeError("invalid receiver");return Y(this,St)}get era(){if(!Cr(this))throw new TypeError("invalid receiver");return hy(Y(this,St),this)}get eraYear(){if(!Cr(this))throw new TypeError("invalid receiver");return uy(Y(this,St),this)}get daysInMonth(){if(!Cr(this))throw new TypeError("invalid receiver");return bf(Y(this,St),this)}get daysInYear(){if(!Cr(this))throw new TypeError("invalid receiver");return dy(Y(this,St),this)}get monthsInYear(){if(!Cr(this))throw new TypeError("invalid receiver");return py(Y(this,St),this)}get inLeapYear(){if(!Cr(this))throw new TypeError("invalid receiver");return fy(Y(this,St),this)}with(e,t){if(!Cr(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid argument");ed(e);const o=Y(this,St),a=In(o,["month","monthCode","year"]),c=rr(e,a,"partial");if(!c)throw new TypeError("invalid year-month-like");let u=rr(this,a,[]);return u=yh(o,u,c),u=rr(u,a,[]),xh(o,u,sr(t))}add(e,t){if(!Cr(this))throw new TypeError("invalid receiver");return Ow("add",this,e,t)}subtract(e,t){if(!Cr(this))throw new TypeError("invalid receiver");return Ow("subtract",this,e,t)}until(e,t){if(!Cr(this))throw new TypeError("invalid receiver");return Iw("until",this,e,t)}since(e,t){if(!Cr(this))throw new TypeError("invalid receiver");return Iw("since",this,e,t)}equals(e){if(!Cr(this))throw new TypeError("invalid receiver");const t=bp(e);for(const o of[ni,hi,gi])if(Y(this,o)!==Y(t,o))return!1;return vf(Y(this,St),Y(t,St))}toString(e){if(!Cr(this))throw new TypeError("invalid receiver");return Tw(this,mf(sr(e)))}toJSON(){if(!Cr(this))throw new TypeError("invalid receiver");return Tw(this)}toLocaleString(e,t){if(!Cr(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Cr(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("argument should be an object");const t=Y(this,St),o=In(t,["monthCode","year"]),a=rr(this,o,[]),c=In(t,["day"]);let u=yh(t,a,rr(e,c,[]));u=rr(u,[...new Set([...o,...c])],[]);const n=XI(null);return n.overflow="reject",oc(t,u,n)}getISOFields(){if(!Cr(this))throw new TypeError("invalid receiver");return{calendar:Y(this,St),isoDay:Y(this,gi),isoMonth:Y(this,hi),isoYear:Y(this,ni)}}static from(e,t){const o=sr(t);return Cr(e)?(En(o),Up(Y(e,ni),Y(e,hi),Y(e,St),Y(e,gi))):bp(e,o)}static compare(e,t){const o=bp(e),a=bp(t);return tc(Y(o,ni),Y(o,hi),Y(o,gi),Y(a,ni),Y(a,hi),Y(a,gi))}}Uo(Kv,"Temporal.PlainYearMonth");class Qv{constructor(e,t,o=Cn()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");IE(this,Cp(e),Ns(t),es(o))}get calendar(){if(!wi(this))throw new TypeError("invalid receiver");return Y(this,St)}get timeZone(){if(!wi(this))throw new TypeError("invalid receiver");return Y(this,Mr)}get year(){if(!wi(this))throw new TypeError("invalid receiver");return oy(Y(this,St),qr(this))}get month(){if(!wi(this))throw new TypeError("invalid receiver");return ly(Y(this,St),qr(this))}get monthCode(){if(!wi(this))throw new TypeError("invalid receiver");return xf(Y(this,St),qr(this))}get day(){if(!wi(this))throw new TypeError("invalid receiver");return cy(Y(this,St),qr(this))}get hour(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),Vi)}get minute(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),Gi)}get second(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),Hi)}get millisecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),Wi)}get microsecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),qi)}get nanosecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(qr(this),Yi)}get era(){if(!wi(this))throw new TypeError("invalid receiver");return hy(Y(this,St),qr(this))}get eraYear(){if(!wi(this))throw new TypeError("invalid receiver");return uy(Y(this,St),qr(this))}get epochSeconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return he.toNumber(he.divide(e,yl))}get epochMilliseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return he.toNumber(he.divide(e,ja))}get epochMicroseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return Cg(he.divide(e,Pr))}get epochNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return Cg(Y(this,Li))}get dayOfWeek(){if(!wi(this))throw new TypeError("invalid receiver");return Mv(Y(this,St),qr(this))}get dayOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return Pv(Y(this,St),qr(this))}get weekOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return Iv(Y(this,St),qr(this))}get hoursInDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=qr(this),t=zi("%Temporal.PlainDateTime%"),o=Y(e,ni),a=Y(e,hi),c=Y(e,gi),u=new t(o,a,c,0,0,0,0,0,0),n=oh(o,a,c,0,0,0,1,"reject"),p=new t(n.year,n.month,n.day,0,0,0,0,0,0),m=Y(this,Mr),g=Y(zs(m,u,"compatible"),Li),v=Y(zs(m,p,"compatible"),Li);return he.toNumber(he.subtract(v,g))/36e11}get daysInWeek(){if(!wi(this))throw new TypeError("invalid receiver");return Dv(Y(this,St),qr(this))}get daysInMonth(){if(!wi(this))throw new TypeError("invalid receiver");return bf(Y(this,St),qr(this))}get daysInYear(){if(!wi(this))throw new TypeError("invalid receiver");return dy(Y(this,St),qr(this))}get monthsInYear(){if(!wi(this))throw new TypeError("invalid receiver");return py(Y(this,St),qr(this))}get inLeapYear(){if(!wi(this))throw new TypeError("invalid receiver");return fy(Y(this,St),qr(this))}get offset(){if(!wi(this))throw new TypeError("invalid receiver");return Ib(Y(this,Mr),Y(this,vs))}get offsetNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return po(Y(this,Mr),Y(this,vs))}with(e,t){if(!wi(this))throw new TypeError("invalid receiver");if(!Wr(e))throw new TypeError("invalid zoned-date-time-like");ed(e);const o=sr(t),a=Bp(o),c=Mb(o,"prefer"),u=Y(this,Mr),n=Y(this,St),p=Ab(In(n,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),m=rr(e,p,"partial"),g=Ab(p,"timeZone");let v=rr(this,g,["timeZone","offset"]);v=yh(n,v,m),v=rr(v,g,["timeZone","offset"]);let{year:y,month:k,day:_,hour:T,minute:M,second:A,millisecond:x,microsecond:P,nanosecond:D}=yf(n,v,o);return ss(_g(y,k,_,T,M,A,x,P,D,"option",bh(v.offset),u,a,c,!1),Y(this,Mr),n)}withPlainDate(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Br(e),o=Y(t,ni),a=Y(t,hi),c=Y(t,gi);let u=Y(t,St);const n=qr(this),p=Y(n,Vi),m=Y(n,Gi),g=Y(n,Hi),v=Y(n,Wi),y=Y(n,qi),k=Y(n,Yi);u=DE(Y(this,St),u);const _=Y(this,Mr);return ss(Y(zs(_,new(zi("%Temporal.PlainDateTime%"))(o,a,c,p,m,g,v,y,k,u),"compatible"),Li),_,u)}withPlainTime(e){if(!wi(this))throw new TypeError("invalid receiver");const t=zi("%Temporal.PlainTime%"),o=e===void 0?new t:gl(e),a=qr(this),c=Y(a,ni),u=Y(a,hi),n=Y(a,gi),p=Y(this,St),m=Y(o,Vi),g=Y(o,Gi),v=Y(o,Hi),y=Y(o,Wi),k=Y(o,qi),_=Y(o,Yi),T=Y(this,Mr);return ss(Y(zs(T,new(zi("%Temporal.PlainDateTime%"))(c,u,n,m,g,v,y,k,_,p),"compatible"),Li),T,p)}withTimeZone(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Ns(e);return ss(Y(this,Li),t,Y(this,St))}withCalendar(e){if(!wi(this))throw new TypeError("invalid receiver");const t=es(e);return ss(Y(this,Li),Y(this,Mr),t)}add(e,t){if(!wi(this))throw new TypeError("invalid receiver");return jw("add",this,e,t)}subtract(e,t){if(!wi(this))throw new TypeError("invalid receiver");return jw("subtract",this,e,t)}until(e,t){if(!wi(this))throw new TypeError("invalid receiver");return Dw("until",this,e,t)}since(e,t){if(!wi(this))throw new TypeError("invalid receiver");return Dw("since",this,e,t)}round(e){if(!wi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?$u("smallestUnit",e):sr(e),o=Wn(t,"smallestUnit","time",gh,["day"]),a=Hs(t,"halfExpand"),c=El(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1),u=qr(this);let n=Y(u,ni),p=Y(u,hi),m=Y(u,gi),g=Y(u,Vi),v=Y(u,Gi),y=Y(u,Hi),k=Y(u,Wi),_=Y(u,qi),T=Y(u,Yi);const M=zi("%Temporal.PlainDateTime%"),A=Y(this,Mr),x=Y(this,St),P=zs(A,new M(Y(u,ni),Y(u,hi),Y(u,gi),0,0,0,0,0,0),"compatible"),D=Ba(P,A,x,0,0,0,1,0,0,0,0,0,0),w=he.subtract(D,he.BigInt(Y(P,Li)));if(he.equal(w,wn))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:n,month:p,day:m,hour:g,minute:v,second:y,millisecond:k,microsecond:_,nanosecond:T}=$v(n,p,m,g,v,y,k,_,T,c,o,a,he.toNumber(w)),ss(_g(n,p,m,g,v,y,k,_,T,"option",po(A,Y(this,vs)),A,"compatible","prefer",!1),A,Y(this,St))}equals(e){if(!wi(this))throw new TypeError("invalid receiver");const t=vp(e),o=Y(this,Li),a=Y(t,Li);return!!he.equal(he.BigInt(o),he.BigInt(a))&&!!RE(Y(this,Mr),Y(t,Mr))&&vf(Y(this,St),Y(t,St))}toString(e){if(!wi(this))throw new TypeError("invalid receiver");const t=sr(e),{precision:o,unit:a,increment:c}=gf(t),u=Hs(t,"trunc");return Ew(this,o,mf(t),function(p){return hc(p,"timeZoneName",["auto","never"],"auto")}(t),function(p){return hc(p,"offset",["auto","never"],"auto")}(t),{unit:a,increment:c,roundingMode:u})}toLocaleString(e,t){if(!wi(this))throw new TypeError("invalid receiver");return new Sh(e,t).format(this)}toJSON(){if(!wi(this))throw new TypeError("invalid receiver");return Ew(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=qr(this),t=zi("%Temporal.PlainDateTime%"),o=Y(this,St),a=new t(Y(e,ni),Y(e,hi),Y(e,gi),0,0,0,0,0,0,o),c=Y(this,Mr);return ss(Y(zs(c,a,"compatible"),Li),c,o)}toInstant(){if(!wi(this))throw new TypeError("invalid receiver");return new(zi("%Temporal.Instant%"))(Y(this,Li))}toPlainDate(){if(!wi(this))throw new TypeError("invalid receiver");return Fu(qr(this))}toPlainTime(){if(!wi(this))throw new TypeError("invalid receiver");return Rv(qr(this))}toPlainDateTime(){if(!wi(this))throw new TypeError("invalid receiver");return qr(this)}toPlainYearMonth(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,St);return xh(e,rr(this,In(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,St);return Bu(e,rr(this,In(e,["day","monthCode"]),[]))}getISOFields(){if(!wi(this))throw new TypeError("invalid receiver");const e=qr(this),t=Y(this,Mr);return{calendar:Y(this,St),isoDay:Y(e,gi),isoHour:Y(e,Vi),isoMicrosecond:Y(e,qi),isoMillisecond:Y(e,Wi),isoMinute:Y(e,Gi),isoMonth:Y(e,hi),isoNanosecond:Y(e,Yi),isoSecond:Y(e,Hi),isoYear:Y(e,ni),offset:Ib(t,Y(this,vs)),timeZone:t}}static from(e,t){const o=sr(t);return wi(e)?(En(o),Bp(o),Mb(o,"reject"),ss(Y(e,Li),Y(e,Mr),Y(e,St))):vp(e,o)}static compare(e,t){const o=vp(e),a=vp(t),c=Y(o,Li),u=Y(a,Li);return he.lessThan(he.BigInt(c),he.BigInt(u))?-1:he.greaterThan(he.BigInt(c),he.BigInt(u))?1:0}}function qr(i){return wa(Y(i,Mr),Y(i,vs),Y(i,St))}Uo(Qv,"Temporal.ZonedDateTime");var Pn=Object.freeze({__proto__:null,Instant:no,Calendar:Ag,PlainDate:Tf,PlainDateTime:Ef,Duration:ic,PlainMonthDay:Yv,Now:uC,PlainTime:hh,TimeZone:Xv,PlainYearMonth:Kv,ZonedDateTime:Qv});const KI=[no,Ag,Tf,Ef,ic,Yv,hh,Xv,Kv,Qv];for(const i of KI){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}let QI=class extends QA{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const o=this.options;this.options=this.client.defaultMutationOptions(e),JA(o,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:eM(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){kT.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,o,a,c;(t=(o=this.mutateOptions).onSuccess)==null||t.call(o,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(a=(c=this.mutateOptions).onSettled)==null||a.call(c,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,n,p,m;(u=(n=this.mutateOptions).onError)==null||u.call(n,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(p=(m=this.mutateOptions).onSettled)==null||p.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:g})=>{g(this.currentResult)})})}};function dC(i,e,t){const o=tM(i,e,t),a=Kg({context:o.context}),[c]=$e.useState(()=>new QI(a,o));$e.useEffect(()=>{c.setOptions(o)},[c,o]);const u=iM($e.useCallback(p=>c.subscribe(kT.batchCalls(p)),[c]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),n=$e.useCallback((p,m)=>{c.mutate(p,m).catch(JI)},[c]);if(u.error&&rM(c.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:n,mutateAsync:u.mutate}}function JI(){}const e3=i=>{let{execute:e,variables:t,singular:o,immediate:a,onComplete:c,onError:u}=i;const[n]=AT(e),[p,m]=$e.useState({called:!!a,loading:!!a}),g=$e.useRef(t),v=$e.useRef([]),y=$e.useCallback(()=>{v.current.forEach(T=>T.abort()),v.current=[]},[]),k=$e.useCallback(()=>{y(),m(T=>({called:T.called,loading:!1,error:new nM({type:"aborted",message:"Aborted"})}))},[y]),_=$e.useCallback(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m(x=>!x.called||!x.loading?{called:!0,loading:!0}:x),o&&y();const M=new AbortController;v.current.push(M),g.current={...g.current,...T};const A={variables:g.current,signal:M.signal,onComplete:c,onError:u};return n(A).then(x=>M.signal.aborted?new Promise(()=>{}):(m({called:!0,loading:!1,data:x}),x)).catch(x=>(M.signal.aborted||m({called:!0,loading:!1,error:x}),new Promise(()=>{})))},[y,c,u,o,n]);return $e.useEffect(()=>(a&&_(),y),[]),{refetch:_,abort:k,...p}},t3={},pC=function(i){let{onComplete:e,onError:t,variables:o=t3,lazy:a=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=Ku(),[u]=AT(i,{warn:!0,name:"mutation"}),n=$e.useCallback(k=>c.mutate(u,k),[c,u]),{refetch:p,called:m,loading:g,error:v,data:y}=e3({execute:n,variables:o,singular:!1,immediate:!a,onComplete:e,onError:t});return[p,{engine:c,called:m,loading:g,error:v,data:y}]},fC=i=>{let{children:e,open:t,dataTest:o}=i;return Me.createElement("div",{"data-test":o,className:"jsx-3677374542 "+(hs({open:t})||"")},e,Me.createElement(jt,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};fC.propTypes={children:we.node,dataTest:we.string,open:we.bool};const i3=()=>Me.createElement("div",{className:"jsx-2503342345"},Me.createElement(jt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),r3=()=>Me.createElement("div",{className:"nodeArrow"},Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},Me.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),Me.createElement(jt,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),mC=i=>{let{open:e,onOpen:t,onClose:o,dataTest:a}=i;const c=e?o:t;return Me.createElement("div",{"data-test":a,onClick:u=>c&&c({open:!e},u),className:jt.dynamic([["375729792",[We.grey400,We.grey900,We.grey100]]])+" "+(hs({open:e})||"")},Me.createElement("span",{className:jt.dynamic([["375729792",[We.grey400,We.grey900,We.grey100]]])},Me.createElement(r3,null)),Me.createElement(jt,{id:"375729792",dynamic:[We.grey400,We.grey900,We.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${We.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${We.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${We.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};mC.propTypes={dataTest:we.string.isRequired,open:we.bool,onClose:we.func,onOpen:we.func};const gC=i=>{let{open:e,className:t,component:o,children:a,icon:c,onOpen:u,onClose:n,dataTest:p="dhis2-uicore-node"}=i;const m=!!Me.Children.toArray(a).filter(y=>y).length,g=!c&&m,v=!c&&!m;return Me.createElement("div",{"data-test":p,className:"jsx-1433072554 "+(hs("node",t)||"")},c&&Me.createElement("div",{"data-test":`${p}-icon`,className:"jsx-1433072554"},c),g&&Me.createElement(mC,{open:e,onOpen:u,onClose:n,dataTest:`${p}-toggle`}),v&&Me.createElement(i3,null),Me.createElement("div",{"data-test":`${p}-content`,className:"jsx-1433072554"},Me.createElement("div",{"data-test":`${p}-label`,className:"jsx-1433072554"},o),Me.createElement(fC,{open:e,dataTest:`${p}-leaves`},a)),Me.createElement(jt,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};gC.propTypes={children:we.node,className:we.string,component:we.element,dataTest:we.string,icon:we.node,open:we.bool,onClose:we.func,onOpen:we.func};const yC=(i,e)=>i.some(o=>e===o?!0:o.startsWith(`${e}/`)),n3=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),s3=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),a3={"No children match filter":"","Could not load children":"تعذر تحميل الأبناء","Error: {{ ERRORMESSAGE }}":"خطأ: {{ ERRORMESSAGE }}"},o3={"No children match filter":"Filtru neodpovídají žádné podřízené","Could not load children":"Nelze načíst podřazené","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},l3={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},c3={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},h3={"No children match filter":"Ningún descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},u3={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},d3={"No children match filter":"ບໍ່ພົບເດັກນ້ອຍທີ່ກົງກັບຕົວກອງ","Could not load children":"ບໍ່ສາມາດໂຫຼດເດັກນ້ອຍໄດ້","Error: {{ ERRORMESSAGE }}":"ຂໍ້ຜິດພາດ {{ ERRORMESSAGE }}"},p3={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},f3={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},m3={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"Não foi possível carregar as crianças","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},g3={"No children match filter":"Нет дочерних единиц, соответствующих фильтру","Could not load children":"¨Не удалось загрузить дочерние единицы","Error: {{ ERRORMESSAGE }}":"Ошибка: {{ ERRORMESSAGE }}"},y3={"No children match filter":"Немає дочірніх об'єктів, які відповідають фільтру","Could not load children":"Не вдалося завантажити дочірні об'єкти","Error: {{ ERRORMESSAGE }}":"Помилка: {{ ERRORMESSAGE }}"},x3={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},b3={"No children match filter":"Фильтрга мос бўлган авлод мавжуд эмас","Could not load children":"Болалар юкланмади","Error: {{ ERRORMESSAGE }}":"Хатолик: {{ ERRORMESSAGE }}"},v3={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},_3={"No children match filter":"Không có đơn vị con phù hợp với bộ lọc","Could not load children":"Không thể tải đơn vị con","Error: {{ ERRORMESSAGE }}":"Lỗi: {{ ERRORMESSAGE }}"},w3={"No children match filter":"没有下属匹配过滤器","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":"错误：{{ ERRORMESSAGE }}"},T3={"No children match filter":"","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":""},_s="default";it.addResources("ar",_s,a3);it.addResources("cs",_s,o3);it.addResources("en",_s,l3);it.addResources("es",_s,c3);it.addResources("es_419",_s,h3);it.addResources("fr",_s,u3);it.addResources("lo",_s,d3);it.addResources("nb",_s,p3);it.addResources("nl",_s,f3);it.addResources("pt",_s,m3);it.addResources("ru",_s,g3);it.addResources("uk",_s,y3);it.addResources("uz_Latn",_s,x3);it.addResources("uz_UZ_Cyrl",_s,b3);it.addResources("uz_UZ_Latn",_s,v3);it.addResources("vi",_s,_3);it.addResources("zh",_s,w3);it.addResources("zh_CN",_s,T3);const E3="[a-zA-Z][a-zA-Z0-9]{10}",C3=new RegExp(`(/${E3})+`),_a=(i,e,t,o,a)=>{if(!C3.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${a}\``)},xC=i=>{let{children:e,dataTest:t}=i;return Me.createElement("span",{"data-test":`${t}-error`,className:jt.dynamic([["3198585030",[We.grey800,Jt.dp4,ri.error]]])},e,Me.createElement(jt,{id:"3198585030",dynamic:[We.grey800,Jt.dp4,ri.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${We.grey800};margin:${Jt.dp4};color:${ri.error};}`]))};xC.propTypes={children:we.any.isRequired,dataTest:we.string.isRequired};const S3=(i,e)=>e.some(t=>{const o=!t.match(new RegExp(`${i}$`)),a=t.match(new RegExp(i));return o&&a}),Jv=i=>{let{checked:e,children:t,onChange:o,loading:a}=i;return Me.createElement("span",{onClick:c=>{o({checked:!e},c)},className:jt.dynamic([["321503310",[We.grey900,We.teal700]]])+" "+(hs({checked:e,loading:a})||"")},t,Me.createElement(jt,{id:"321503310",dynamic:[We.grey900,We.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${We.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${We.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};Jv.propTypes={children:we.any.isRequired,checked:we.bool,loading:we.bool,onChange:we.func};const bC=i=>{let{children:e,loading:t,onToggleOpen:o}=i;return Me.createElement(Jv,{checked:!1,loading:t,onChange:o},e)};bC.propTypes={children:we.any.isRequired,onToggleOpen:we.func.isRequired,loading:we.bool};const vC=i=>{let{dataTest:e}=i;return Me.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},Me.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),Me.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};vC.propTypes={dataTest:we.string.isRequired};const _C=i=>{let{dataTest:e}=i;return Me.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},Me.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},Me.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),Me.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};_C.propTypes={dataTest:we.string.isRequired};const wC=i=>{let{dataTest:e}=i;return Me.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},Me.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},Me.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},Me.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),Me.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),Me.createElement(jt,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};wC.propTypes={dataTest:we.string.isRequired};const TC=i=>{let{dataTest:e}=i;return Me.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},Me.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},Me.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),Me.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};TC.propTypes={dataTest:we.string.isRequired};const EC=i=>{let{loading:e,hasChildren:t,open:o,dataTest:a}=i;return e?Me.createElement(vC,{dataTest:a}):t?o?Me.createElement(wC,{dataTest:a}):Me.createElement(_C,{dataTest:a}):Me.createElement(TC,{dataTest:a})};EC.propTypes={dataTest:we.string.isRequired,hasChildren:we.bool,loading:we.bool,open:we.bool};const CC=i=>{let{checked:e,dataTest:t,hasChildren:o,indeterminate:a,children:c,loading:u,name:n,open:p,value:m,onChange:g}=i;const v=Me.createElement(EC,{loading:u,open:p,hasChildren:o,dataTest:t}),y=Me.createElement(Me.Fragment,null,Me.createElement("span",{className:"jsx-1000763175"},v),c,Me.createElement(jt,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return Me.createElement(Me.Fragment,null,Me.createElement(ry,{dense:!0,checked:e,name:n,value:m,label:y,indeterminate:a,onChange:g}))};CC.propTypes={checked:we.bool.isRequired,children:we.any.isRequired,dataTest:we.string.isRequired,hasChildren:we.bool.isRequired,indeterminate:we.bool.isRequired,loading:we.bool.isRequired,name:we.string.isRequired,open:we.bool.isRequired,value:we.string.isRequired,onChange:we.func.isRequired};const sg=i=>{let{highlighted:e,children:t}=i;return Me.createElement("div",{className:jt.dynamic([["1387769986",[We.teal200]]])+" "+(hs({highlighted:e})||"")},Me.createElement("span",{className:jt.dynamic([["1387769986",[We.teal200]]])},t),Me.createElement(jt,{id:"1387769986",dynamic:[We.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${We.teal200};padding-inline-end:4px;}`]))};sg.propTypes={children:we.node,highlighted:we.bool};const k3=i=>{let{selected:e,path:t,checked:o,singleSelection:a}=i;const c=e.indexOf(t);if(o&&c!==-1)return e;if(a&&o)return[t];if(o)return[...e,t];if(c===-1)return e;if(a)return[];if(e.indexOf(t)===0)return e.slice(1);const u=e.slice(0,c),n=e.slice(c+1);return[...u,...n]},SC=i=>{let{checked:e,children:t,dataTest:o,disableSelection:a,fullPath:c,hasChildren:u,hasSelectedDescendants:n,highlighted:p,loading:m,node:g,onChange:v,onToggleOpen:y,open:k,rootId:_,selected:T,singleSelection:M}=i;const A=(x,P)=>{let{checked:D}=x;const w=k3({path:c,selected:T,checked:D,singleSelection:M,rootId:_}),I={...g,path:c,checked:D,selected:w};v(I,P)};return a?Me.createElement(sg,{highlighted:p},Me.createElement(bC,{loading:m,onToggleOpen:y},t)):M?Me.createElement(sg,{highlighted:p},Me.createElement(Jv,{checked:e,onChange:A,loading:m},t)):Me.createElement(sg,{highlighted:p},Me.createElement(CC,{dataTest:o,checked:e,name:"org-unit",value:g.id,loading:m,indeterminate:!e&&n,onChange:A,open:k,hasChildren:u},t))};SC.propTypes={children:we.any.isRequired,dataTest:we.string.isRequired,fullPath:we.string.isRequired,hasChildren:we.bool.isRequired,loading:we.bool.isRequired,node:we.shape({displayName:we.string.isRequired,id:we.string.isRequired,children:we.number,path:we.string}).isRequired,open:we.bool.isRequired,rootId:we.string.isRequired,onChange:we.func.isRequired,onToggleOpen:we.func.isRequired,checked:we.bool,disableSelection:we.bool,hasSelectedDescendants:we.bool,highlighted:we.bool,selected:we.arrayOf(_a),singleSelection:we.bool};const Vw={styles:Me.createElement(jt,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},kC=()=>Me.createElement("div",{className:"jsx-2503342345"},Me.createElement(Tl,{extrasmall:!0,className:Vw.className}),Me.createElement("style",null,Vw.styles),Me.createElement(jt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),A3={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},M3=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:o}=i;const a=$e.useRef(!1),{called:c,loading:u,error:n,data:p}=Ta(A3,{variables:{id:e.id}}),m=$e.useMemo(()=>{if(!p)return;if(!e.children)return[];const{orgUnit:g}=p;return t?g.children:s3(g.children)},[p,t]);return $e.useEffect(()=>{o&&m&&!a.current&&(o({...e,children:m}),a.current=!0)},[o,m,a]),{called:c,loading:u,error:n||null,data:m}},P3=i=>{let{orgChildren:e,filter:t,node:o}=i;return t!=null&&t.length?e.filter(a=>yC(t,`${o.path}/${a.id}`)):e},AC=i=>{let{node:e,autoExpandLoadingError:t,dataTest:o,disableSelection:a,expanded:c,filter:u,highlighted:n,isUserDataViewFallback:p,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,parentPath:k,renderNodeLabel:_,rootId:T,selected:M,singleSelection:A,suppressAlphabeticalSorting:x,OrganisationUnitNode:P}=i;const D=M3({node:e,isUserDataViewFallback:p,suppressAlphabeticalSorting:x,onComplete:g}),w=D.called&&!D.loading&&!D.error,I=w?P3({orgChildren:D.data,filter:u,node:e}):[];return Me.createElement(Me.Fragment,null,D.loading&&Me.createElement(kC,null),D.error&&`Error: ${D.error}`,w&&!I.length&&it.t("No children match filter"),!!I.length&&I.map(N=>{const q=`${k}/${N.id}`;return Me.createElement(P,{autoExpandLoadingError:t,dataTest:o,disableSelection:a,displayName:N.displayName,expanded:c,filter:u,highlighted:n,id:N.id,isUserDataViewFallback:p,key:q,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,path:q,renderNodeLabel:_,rootId:T,selected:M,singleSelection:A,suppressAlphabeticalSorting:x})}))};AC.propTypes={OrganisationUnitNode:we.func.isRequired,dataTest:we.string.isRequired,node:we.object.isRequired,parentPath:we.string.isRequired,renderNodeLabel:we.func.isRequired,rootId:we.string.isRequired,onChange:we.func.isRequired,autoExpandLoadingError:we.bool,disableSelection:we.bool,expanded:we.arrayOf(_a),filter:we.arrayOf(_a),highlighted:we.arrayOf(_a),isUserDataViewFallback:we.bool,selected:we.arrayOf(_a),singleSelection:we.bool,suppressAlphabeticalSorting:we.bool,onChildrenLoaded:we.func,onCollapse:we.func,onExpand:we.func};const I3=i=>{let{path:e,expanded:t,onExpand:o,onCollapse:a,errorMessage:c,autoExpandLoadingError:u}=i;const n=u&&!!c,[p,m]=$e.useState(!!c);$e.useEffect(()=>{n&&!p&&(o({path:e}),m(!0))},[n,p]);const g=n&&!p||!!t.includes(e);return{open:g,onToggleOpen:()=>g?a({path:e}):o({path:e}),openedOnceDueToError:p}},D3={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},R3=(i,e)=>{let{displayName:t,isUserDataViewFallback:o}=e;if(!t)throw new Error('"displayName" is required');const a={id:i,isUserDataViewFallback:o},{loading:c,error:u,data:n={}}=Ta(D3,{variables:a});return{loading:c,error:u||null,data:{id:i,displayName:t,...n.orgUnit}}},e0=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:o,displayName:a,expanded:c,highlighted:u,id:n,isUserDataViewFallback:p,path:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:k,filter:_,suppressAlphabeticalSorting:T,onChange:M,onChildrenLoaded:A,onCollapse:x,onExpand:P}=i;const D=R3(n,{isUserDataViewFallback:p,displayName:a}),w=n3(m,v),I={displayName:a,id:n,...D.data,path:w},N=!!I.children&&I.children>0,q=S3(w,y),Z=u.includes(m),{open:X,onToggleOpen:j}=I3({autoExpandLoadingError:e,errorMessage:D.error&&D.error.toString(),path:w,expanded:c,onExpand:P,onCollapse:x}),V=!!y.find($=>$.match(new RegExp(`${w}$`))),U=g({disableSelection:o,hasChildren:N,hasSelectedDescendants:q,loading:D.loading,error:D.error,selected:y,open:X,path:m,singleSelection:k,node:I,label:a,checked:V,highlighted:Z}),L=Me.createElement(SC,{node:I,fullPath:m,open:X,loading:D.loading,checked:V,rootId:v,onChange:M,dataTest:`${t}-label`,selected:y,hasChildren:N,highlighted:Z,onToggleOpen:j,disableSelection:o,singleSelection:k,hasSelectedDescendants:q},U),R=N&&!X&&!D.error,G=N&&X&&!D.error;return Me.createElement(gC,{dataTest:`${t}-node`,open:X,onOpen:j,onClose:j,component:L,icon:D.loading&&Me.createElement(kC,null)},D.error&&Me.createElement(xC,{dataTest:t},it.t("Could not load children")),R&&Me.createElement("span",{"data-test":`${t}-placeholder`}),G&&Me.createElement(AC,{OrganisationUnitNode:e0,node:I,autoExpandLoadingError:e,dataTest:t,disableSelection:o,expanded:c,filter:_,highlighted:u,isUserDataViewFallback:p,onChange:M,onChildrenLoaded:A,onCollapse:x,onExpand:P,parentPath:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:k,suppressAlphabeticalSorting:T}))};e0.propTypes={dataTest:we.string.isRequired,id:we.string.isRequired,renderNodeLabel:we.func.isRequired,rootId:we.string.isRequired,onChange:we.func.isRequired,autoExpandLoadingError:we.bool,disableSelection:we.bool,displayName:we.string,expanded:we.arrayOf(_a),filter:we.arrayOf(_a),highlighted:we.arrayOf(_a),isUserDataViewFallback:we.bool,path:_a,selected:we.arrayOf(_a),singleSelection:we.bool,suppressAlphabeticalSorting:we.bool,onChildrenLoaded:we.func,onCollapse:we.func,onExpand:we.func};const L3=i=>{let{label:e}=i;return e},z3=(i,e)=>i!=null&&i.length?e.filter(t=>yC(i,`/${t}`)):e,MC=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return Me.createElement("div",{"data-test":e},it.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};MC.propTypes={error:we.string.isRequired,dataTest:we.string};const PC=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return Me.createElement("div",{"data-test":e,className:"jsx-814846266"},Me.createElement(Tl,{small:!0}),Me.createElement(jt,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};PC.propTypes={dataTest:we.string};const N3=i=>Array.from(new Set(i)),O3=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((o,a)=>`/${e.slice(0,a+1).join("/")}`);return N3(t)},j3=i=>i.reduce((e,t)=>{const o=O3(t);return[...e,...o]},[]),B3=i=>{let{expanded:e,setExpanded:t,onExpand:o,onCollapse:a}=i;return{handleExpand:n=>{let{path:p,...m}=n;e.includes(p)||(t([...e,p]),o&&o({path:p,...m}))},handleCollapse:n=>{let{path:p,...m}=n;const g=e.indexOf(p);if(g!==-1){const v=g===0?e.slice(1):[...e.slice(0,g),...e.slice(g+1)];t(v),a&&a({path:p,...m})}}}},F3=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:o,expandedControlled:a,handleExpandControlled:c,handleCollapseControlled:u}=i;const n=!!a,p=n?[]:j3(e),[m,g]=$e.useState(p);if(n)return{expanded:a,handleExpand:c,handleCollapse:u};const{handleExpand:v,handleCollapse:y}=B3({expanded:m,setExpanded:g,onExpand:t,onCollapse:o});return{expanded:m,handleExpand:v,handleCollapse:y}},U3=i=>{const[e,t]=$e.useState(0);return $e.useEffect(()=>{const o=e+1;i===!0&&t(o)},[i]),e},$3=i=>{const t=Object.entries(i).map(o=>{let[a,c]=o;const u=c.displayName||"";return[a,{...c,displayName:u}]});return Object.fromEntries(t)},V3=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:o=>{let{isUserDataViewFallback:a}=o;return{isUserDataViewFallback:a,fields:["displayName","path","id"]}}}}),{}),G3=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=$e.useMemo(()=>V3(i),[i]),a=Ta(t,{variables:{isUserDataViewFallback:e}}),{called:c,loading:u,error:n,data:p,refetch:m}=a,g=$e.useMemo(()=>p&&$3(p),[p]);return{called:c,loading:u,error:n||null,data:g||null,refetch:m}},jm=[],IC=i=>{let{onChange:e,roots:t,autoExpandLoadingError:o,dataTest:a="dhis2-uiwidgets-orgunittree",disableSelection:c,forceReload:u,highlighted:n=jm,isUserDataViewFallback:p,initiallyExpanded:m=jm,filter:g=jm,renderNodeLabel:v=L3,selected:y=jm,singleSelection:k,suppressAlphabeticalSorting:_,expanded:T,handleExpand:M,handleCollapse:A,onExpand:x,onCollapse:P,onChildrenLoaded:D}=i;const w=z3(g,Array.isArray(t)?t:[t]),I=U3(u),[N,q]=$e.useState(I),{called:Z,loading:X,error:j,data:V,refetch:U}=G3(w,{isUserDataViewFallback:p,suppressAlphabeticalSorting:_}),{expanded:L,handleExpand:R,handleCollapse:G}=F3({initiallyExpanded:m,onExpand:x,onCollapse:P,expandedControlled:T,handleExpandControlled:M,handleCollapseControlled:A});$e.useEffect(()=>(U&&I>0&&I!==N&&(U(),q(I)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[I,N,U]);const $=!Z||X;return Me.createElement("div",{"data-test":a},$&&Me.createElement(PC,null),j&&Me.createElement(MC,{error:j}),!j&&!$&&w.map(F=>{const H=V[F];return Me.createElement(e0,{key:H.path,rootId:F,autoExpandLoadingError:o,dataTest:a,disableSelection:c,displayName:H.displayName,expanded:L,highlighted:n,id:F,isUserDataViewFallback:p,filter:g,path:H.path,renderNodeLabel:v,selected:y,singleSelection:k,suppressAlphabeticalSorting:_,onChange:e,onChildrenLoaded:D,onCollapse:G,onExpand:R})}))};IC.propTypes={roots:we.oneOfType([we.string,we.arrayOf(we.string)]).isRequired,onChange:we.func.isRequired,autoExpandLoadingError:we.bool,dataTest:we.string,disableSelection:we.bool,expanded:Iu(i=>!!i.handleExpand||!!i.handleCollapse,we.arrayOf(we.string)),filter:we.arrayOf(_a),forceReload:we.bool,handleCollapse:Iu(i=>!!i.expanded||!!i.handleExpand,we.func),handleExpand:Iu(i=>!!i.expanded||!!i.handleCollapse,we.func),highlighted:we.arrayOf(_a),initiallyExpanded:we.arrayOf(_a),isUserDataViewFallback:we.bool,renderNodeLabel:we.func,selected:we.arrayOf(_a),singleSelection:we.bool,suppressAlphabeticalSorting:we.bool,onChildrenLoaded:we.func,onCollapse:we.func,onExpand:we.func};const gr="ACCESS_NONE",Zr="ACCESS_VIEW_ONLY",rn="ACCESS_VIEW_AND_EDIT",t0="SHARE_TARGET_EXTERNAL",kh="SHARE_TARGET_PUBLIC",Ah="SHARE_TARGET_USER",nd="SHARE_TARGET_GROUP",DC={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},RC=Object.values(DC),Mg=$e.createContext(!1);var H3=void 0;const W3=(i,e,t)=>{let o;return function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];const n=H3,p=()=>{o=null,i.apply(n,c)};clearTimeout(o),o=setTimeout(p,e)}},Wx=i=>i===void 0?gr:typeof i=="boolean"?i?Zr:gr:i.startsWith("rw")?rn:i.startsWith("r-")?Zr:gr,LC=i=>{if(typeof i=="boolean")return{data:gr,metadata:Wx(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:Wx(t),metadata:Wx(e)}},Gw=i=>{switch(i){case gr:return"--";case Zr:return"r-";case rn:return"rw";default:return"--"}},kp=i=>`${Gw(i.metadata)}${Gw(i.data)}----`,Bm=i=>{let{access:e,...t}=i;return{...t,access:LC(e)}},q3=[t0,kh],Hw=i=>!q3.includes(i),Y3=i=>{let{object:e,type:t,access:o,id:a}=i;switch(t){case"public":return{object:{...e,publicAccess:kp(o)}};case"group":{const c=e.userGroupAccesses.map(n=>n.id!==a?n:{...n,access:kp(o)}),u={object:{...e,userGroupAccesses:c}};return console.log(u),u}case"user":{const c=e.userAccesses.map(n=>n.id!==a?n:{...n,access:kp(o)});return{object:{...e,userAccesses:c}}}}},Z3=i=>{let{object:e,type:t,id:o,access:a,name:c}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:o,name:c,access:kp(a)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:o,name:c,access:kp(a)}]}}}},X3=i=>{let{object:e,type:t,id:o}=i;switch(t){case"group":{const a=e.userGroupAccesses.filter(u=>u.id!==o);return{object:{...e,userGroupAccesses:a}}}case"user":{const a=e.userAccesses.filter(u=>u.id!==o);return{object:{...e,userAccesses:a}}}}},K3="المستخدم",Q3="بيانات",J3="البيانات الوصفية",eD="بحث",tD="إغلاق",iD={"View only":"العرض فقط","View and edit":"عرض وتعديل","No access":"لا يمكن الوصول","Give access to a user or group":"منح حق الوصول إلى مستخدم أو مجموعة","Data access level":"","Choose a level":"","Not available offline":"غير متوفر في وضع عدم الإتصال","Metadata access level":"","Access level":"مستوى الوصول","Give access":"السماح بالوصول","Users and groups that currently have access":"المستخدمون والمجموعات التي لديها حق الوصول حاليًا","User / Group":"","All users":"جميع المستخدمين","Anyone logged in":"","User group":"مجموعة المستخدمين",User:K3,Data:Q3,"Remove access":"إزالة الوصول",Metadata:J3,"User or group":"مستخدم أو مجموعة",Search:eD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"حدث خطأ ما","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:tD,"Dashboard sharing":""},rD="",nD="البيانات",sD="",aD="البحث",oD="إغلاق",lD={"View only":"","View and edit":"","No access":"ممنوع الدخول","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:rD,Data:nD,"Remove access":"",Metadata:sD,"User or group":"",Search:aD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:oD,"Dashboard sharing":""},cD="داتا پەیوەندیدارەکان",hD="گەڕان",uD="داخستن",dD={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:cD,"Remove access":"","User or group":"",Search:hD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"هەڵەیەک ڕووی دا","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:uD,"Dashboard sharing":""},pD="Uživatel",fD="Data",mD="Metadata",gD="Hledat",yD="Zavřít",xD={"View only":"Pouze zobrazení","View and edit":"Zobrazení a úpravy","No access":"Žádný přístup","Give access to a user or group":"Udělte přístup uživateli nebo skupině","Data access level":"","Choose a level":"","Not available offline":"Není k dispozici offline","Metadata access level":"","Access level":"Úroveň přístupu","Give access":"Povolit přístup","Users and groups that currently have access":"Uživatelé a skupiny, kteří mají aktuálně přístup","User / Group":"Uživatel / Skupina","All users":"Všichni uživatelé","Anyone logged in":"","User group":"Uživatelská skupina",User:pD,Data:fD,"Remove access":"Odebrat přístup",Metadata:mD,"User or group":"Uživatel nebo skupina",Search:gD,"Apply dashboard sharing settings to visualizations":"Na vizualizace použijte nastavení sdílení ovládacího panelu","Something went wrong":"Něco se pokazilo","Apply sharing to dashboard visualizations":"Použít sdílení na vizualizace ovládacího panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovány žádné vizualizace. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne všechny vizualizace bylo možné úspěšně aktualizovat. {{ success }} aktualizováno úspěšně, {{ failed }} se nepodařilo aktualizovat. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovány žádné vizualizace, protože nastavení sdílení je již dostačující.","Successfully updated sharing for all visualizations.":"Úspěšně aktualizováno sdílení pro všechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne všechna nastavení sdílení vizualizací bylo nutné aktualizovat. {{ updated }} aktualizováno, {{ skipped }} již má dostatečné nastavení sdílení.","There are no users or groups to apply sharing settings for.":"Nejsou žádní uživatelé ani skupiny, pro které by bylo možné použít nastavení sdílení.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Počet vizualizací na tomto řídicím panelu, které potenciálně získají aktualizované nastavení sdílení: {{ visualizationsCount }}. Počet uživatelů nebo skupin, na které se tato aktualizovaná nastavení budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Použití stejných nastavení sdílení zajistí, že uživatelé a skupiny, které mají přístup k řídicímu panelu, budou mít také přístup k jeho vizualizacím (grafy, tabulky, mapy, grafy událostí a zprávy o událostech) alespoň „Pouze zobrazení“.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uživatel nebo skupina již má k vizualizaci přístup „Zobrazení a úpravy“, nebude to omezeno na „Pouze zobrazení“. Úroveň přístupu „Všichni uživatelé“ nebude aktualizována ani změněna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Použití sdílení nelze vrátit zpět a je nutné jej provést znovu, pokud na ovládací panel přidáte nové vizualizace nebo se změní jeho nastavení sdílení.","Sharing and access: {{- objectName}}":"Sdílení a přístup: {{- objectName}}","Sharing and access":"Sdílení a přístup",Close:yD,"Dashboard sharing":"Sdílení ovládacího panelu"},bD="",vD="",_D="",wD="",TD="Close",ED={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:bD,Data:vD,"Remove access":"",Metadata:_D,"User or group":"",Search:wD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TD,"Dashboard sharing":""},CD="User",SD="Data",kD="Metadata",AD="Search",MD="Close",PD={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:CD,Data:SD,"Remove access":"Remove access",Metadata:kD,"User or group":"User or group",Search:AD,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:MD,"Dashboard sharing":"Dashboard sharing"},ID="Usuario",DD="Datos",RD="Metadatos",LD="Buscar",zD="Cerrar",ND={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:ID,Data:DD,"Remove access":"Eliminar acceso",Metadata:RD,"User or group":"Usuario o Grupo",Search:LD,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuración compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con éxito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuración de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuración para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuración de uso compartido actualizado con éxito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualización. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuración de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este tablero que potencialmente actualizarán su confugiración de uso compartido: {{ visualizationsCount }}. El número de usuarios o grupos a los que se aplicarán estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicación de la misma configuración para compartir garantiza que los usuarios y grupos que tienen acceso al tablero también tienen al menos acceso de "Solo lectura" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, este no se reducirá a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuración de uso compartido no puede deshacerse, y deberás hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuración de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:zD,"Dashboard sharing":"Compartir tablero"},OD="",jD="Datos",BD="Metadatos",FD="Buscar",UD="Cerrar",$D={"View only":"Ver sólo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:OD,Data:jD,"Remove access":"Eliminar el acceso",Metadata:BD,"User or group":"Usuario o grupo",Search:FD,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la compartición a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualización. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la compartición de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualización porque los ajustes de compartición ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con éxito la compartición de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de compartición de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tenía suficientes ajustes de compartición.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuración de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este cuadro de mando que potencialmente obtendrán ajustes de uso compartido actualizados: {{ visualizationsCount }}. Número de usuarios o grupos a los que se aplicarán estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuración de compartición se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando también tienen al menos acceso de "sólo visualización" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, éste no se reducirá a "Sólo ver". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicación de la compartición no puede deshacerse, y debe hacerse de nuevo si se añaden nuevas visualizaciones al cuadro de mandos o se cambia su configuración de compartición.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:UD,"Dashboard sharing":"Compartir el cuadro de mandos"},VD="",GD="",HD="",WD={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:VD,"Remove access":"","User or group":"",Search:GD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:HD,"Dashboard sharing":""},qD="Utilisateur",YD="Données",ZD="Métadonnées",XD="Chercher",KD="Fermer",QD={"View only":"","View and edit":"","No access":"Pas d'accès","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accès","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:qD,Data:YD,"Remove access":"",Metadata:ZD,"User or group":"",Search:XD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourné","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:KD,"Dashboard sharing":""},JD="",eR="Data",tR="Metadata",iR="Pencarian",rR="Tutup",nR={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:JD,Data:eR,"Remove access":"",Metadata:tR,"User or group":"",Search:iR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:rR,"Dashboard sharing":""},sR="",aR="Data",oR="ទិន្នន័យ",lR="ស្វែងរក",cR="បិទ",hR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:sR,Data:aR,"Remove access":"",Metadata:oR,"User or group":"",Search:lR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:cR,"Dashboard sharing":""},uR="ຜູ້ໃຊ້",dR="ຂໍ້ມູນ",pR="ໂຄງຮ່າງຖານຂໍ້ມູນ",fR="ຄົ້ນຫາ",mR="ປິດ",gR={"View only":"ເບິ່ງໄດ້ເທົ່ານັ້ນ","View and edit":"ເບິ່ງ ແລະ ແກ້ໄຂ","No access":"ບໍ່ມີການເຂົ້າເຖີງ","Give access to a user or group":"ໃຫ້ຜູ້ໃຊ້ ຫຼື ກຸ່ມເຂົ້າເຖິງ","Data access level":"","Choose a level":"","Not available offline":"ບໍ່ສາມາດໃຊ້ໄດ້ອອບລາຍ","Metadata access level":"","Access level":"ຂັ້ນການເຂົ້າເຖິງ","Give access":"ໃຫ້ການເຂົ້າເຖິງ","Users and groups that currently have access":"ຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ໄດ້ເຂົ້າເຖິງ","User / Group":"ຜູ້ໃຊ້ / ກຸ່ມ","All users":"ຜູ້ໃຊ້ທັງໝົດ","Anyone logged in":"","User group":"",User:uR,Data:dR,"Remove access":"ເອົາການເຂົ້າເຖິງອອກ",Metadata:pR,"User or group":"ຜູ້ໃຊ້ ຫຼື ກຸ່ມ",Search:fR,"Apply dashboard sharing settings to visualizations":"ນຳໃຊ້ການຕັ້ງຄ່າແບ່ງປັນກະດານຂ່າວກັບພາບຂໍ້ມູນ","Something went wrong":"ມີບາງຢ່າງຜິດພາດ","Apply sharing to dashboard visualizations":"ນຳໃຊ້ການແບ່ງປັນພາບຂໍ້ມູນກັບກະດານຂ່າວ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນ. ກວດເບິ່ງຄືນວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນ.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"ພາບຂໍ້ມູນທັງໝົດບໍ່ສາມາດອັບເດດໄດ້ສຳເລັດ. ອັບເດດ {{ success }} ສຳເລັດແລ້ວ, {{ failed }} ລົ້ມເຫລວໃນການອັບເດດ. ກວດເບິ່ງວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນທັງຫມົດ.","No visualizations were updated because sharing settings are already sufficient.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນເນື່ອງຈາກການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","Successfully updated sharing for all visualizations.":"ອັບເດດການແບ່ງປັນສຳເລັດແລ້ວສຳລັບພາບຂໍ້ມູນທັງໝົດ.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"ບໍ່ແມ່ນການຕັ້ງຄ່າການແບ່ງປັນພາບທັງໝົດທີ່ຈຳເປັນເພື່ອອັບເດດ. {{ updated }} ອັບເດດແລ້ວ, {{ skipped }} ມີການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","There are no users or groups to apply sharing settings for.":"ບໍ່ມີຜູ້ໃຊ້ ຫຼື ກຸ່ມສຳລັບການນໍາໃຊ້ການຕັ້ງຄ່າແບ່ງປັນ.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"ຈຳນວນພາບຂໍ້ມູນໃນກະດານຂ່າວນີ້ທີ່ອາດຈະໄດ້ມີການອັບເດດການຕັ້ງຄ່າການແບ່ງປັນ: {{ visualizationsCount }}. ຈຳນວນຜູ້ໃຊ້ ຫຼືກຸ່ມທີ່ອັບເດດການຕັ້ງຄ່າເຫຼົ່ານີ້ຈະໃຊ້ກັບ: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'ການໃຊ້ການຕັ້ງຄ່າແບບແບ່ງປັນຄືກັນແມ່ນຕ້ອງໃຫ້ແນ່ໃຈວ່າຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ເຂົ້າເຖິງກະດານຂ່າວສາມາດ "ເບິ່ງເທົ່ານັ້ນ" ໃນພາບຂໍ້ມູນ (ແຜນການ, ຕາຕະລາງ, ແຜນທີ່, ຕາຕະລາງເຫດການ ແລະ ການລາຍງານເຫດການ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'ຖ້າຜູ້ໃຊ້ ຫຼື ກຸ່ມມີການເຂົ້າເຖິງແບບ "ເບິ່ງ ແລະແກ້ໄຂ" ຕໍ່ພາບຂໍ້ມູນນັ້ນຈະບໍ່ຖືກຫຼຸດລົງເປັນ "ເບິ່ງເທົ່ານັ້ນ". ການເຂົ້າເຖິງຂັ້ນ "ຜູ້ໃຊ້ທັງໝົດ" ຈະບໍ່ຖືກອັບເດດ ຫຼື ປ່ຽນແປງ.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"ການໃຊ້ການແບ່ງປັນບໍ່ສາມາດຍົກເລີກໄດ້, ແລະຕ້ອງເຮັດອີກຄັ້ງ ຖ້າມີການເພີ່ມພາບຂໍ໊ມູນໃໝ່ໃນກະດານຂ່າວ ຫຼື ການຕັ້ງຄ່າການແບ່ງປັນຂອງມັນມີການປ່ຽນແປງ.","Sharing and access: {{- objectName}}":"ການແບ່ງປັນ ແລະ ການເຂົາເຖິງ: {{- objectName}}","Sharing and access":"ການແບ່ງປັນ ແລະ ການເຂົ້າເຖິງ",Close:mR,"Dashboard sharing":"ການແບ່ງປັນກະດານຂ່າວ"},yR="",xR="အချက်အလက်",bR="",vR="",_R="ပိတ်သည်",wR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:yR,Data:xR,"Remove access":"",Metadata:bR,"User or group":"",Search:vR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_R,"Dashboard sharing":""},TR="Bruker",ER="Data",CR="Metadata",SR="Søk",kR="Lukk",AR={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsnivå","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:TR,Data:ER,"Remove access":"",Metadata:CR,"User or group":"",Search:SR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:kR,"Dashboard sharing":""},MR="",PR="खोज",IR="",DR={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:MR,"Remove access":"","User or group":"",Search:PR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:IR,"Dashboard sharing":""},RR="Gebruiker",LR="Gegevens",zR="Metagegevens",NR="Zoek",OR="Sluit",jR={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:RR,Data:LR,"Remove access":"Toegang verwijderen",Metadata:zR,"User or group":"Gebruiker of groep",Search:NR,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is geüpdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk geüpdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:OR,"Dashboard sharing":"Dashboard delen"},BR="استفاده کننده",FR="دیتا",UR="",$R="جستجو",VR="بستن",GR={"View only":"","View and edit":"","No access":"دسترسی وجود ندارد","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"گروپ استفاده کننده",User:BR,Data:FR,"Remove access":"",Metadata:UR,"User or group":"",Search:$R,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:VR,"Dashboard sharing":""},HR="",WR="مالومات (ډاټا)",qR="",YR="جستجو",ZR="بند یې کړئ",XR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:HR,Data:WR,"Remove access":"",Metadata:qR,"User or group":"",Search:YR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:ZR,"Dashboard sharing":""},KR="Utilizador",QR="Dados",JR="Metadados",eL="Pesquisar",tL="Fechar",iL={"View only":"Ver apenas","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Não disponível offline","Metadata access level":"","Access level":"Niveis de acesso ","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usuários",User:KR,Data:QR,"Remove access":"",Metadata:JR,"User or group":"",Search:eL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:tL,"Dashboard sharing":""},rL="Usuário",nL="Dados",sL="Metadados",aL="Pesquisar",oL="Fechar",lL={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usuários",User:rL,Data:nL,"Remove access":"",Metadata:sL,"User or group":"",Search:aL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:oL,"Dashboard sharing":""},cL="",hL="Căutare",uL="Închidere",dL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:cL,"Remove access":"","User or group":"",Search:hL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:uL,"Dashboard sharing":""},pL="Пользователь",fL="Данные",mL="Метаданные",gL="Поиск",yL="Закрыть",xL={"View only":"Только просмотр","View and edit":"Просмотр и редактирование","No access":"Нет доступа","Give access to a user or group":"Предоставить доступ пользователю или группе","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономном режиме","Metadata access level":"","Access level":"Уровень доступа","Give access":"Предоставить доступ","Users and groups that currently have access":"Пользователи и группы с доступом","User / Group":"Пользователь / Группа","All users":"Все пользователи","Anyone logged in":"","User group":"Группа пользователей",User:pL,Data:fL,"Remove access":"Удалить доступ",Metadata:mL,"User or group":"Пользователь или группа",Search:gL,"Apply dashboard sharing settings to visualizations":"Применить параметры доступа к инфопанели к визуализациям","Something went wrong":"Что-то пошло не так","Apply sharing to dashboard visualizations":"Применить параметры доступа к визуализациям инфопанели","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Визуализации не были обновлены. Убедитесь, что у вас есть право на изменение параметров доступа ко всем визуализациям.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не все визуализации были успешно обновлены. Обновлено: {{ success }}, не обновлено: {{ failed }} . Убедитесь, что у вас есть право на изменение общего параметров доступа ко всем визуализациям.","No visualizations were updated because sharing settings are already sufficient.":"Визуализации не были обновлены, необходимые права доступа уже предоставлены.","Successfully updated sharing for all visualizations.":"Доступ ко всем визуализациям успешно обновлен","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Нет необходимости обнавлять все параметры доступа к визуализациям. Обновлено: {{ updated }}, доступ уже предоставлен: {{ skipped }}.","There are no users or groups to apply sharing settings for.":"Нет пользователей или групп для применения настроек общего доступа.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Количество визуализаций на данной инфопанели, которые потенциально получат обновленные настройки доступа: {{ visualizationsCount }}. Количество пользователей или групп, к которым будут применены обновленные настройки: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Применение одинаковых параметров доступа гарантирует пользователям и группам, имеющим доступ к инфопанели, доступ (как минимум на просмотр) к ее визуализациям (графикам, таблицам, картам, графикам событий и отчетам).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Если у пользователя или группы уже есть доступ "Просмотр и редактирование" к визуализации, он не будет уменьшен до "Только просмотр". Уровень доступа "Все пользователи" не будет обновлен или изменен.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Параметров доступа нельзя отменить. Параметры должны устанавливаться заново, если на инфопанель добавлены новые визуализации или настройки доступа изменены.","Sharing and access: {{- objectName}}":"Доступ: {{- objectName}}","Sharing and access":"Совместное использование и доступ",Close:yL,"Dashboard sharing":" Совместное использование инфопанели"},bL="",vL="දත්ත",_L="",wL="සොයන්න",TL="වසන්න",EL={"View only":"","View and edit":"","No access":"පිවිසිය නොහැක","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"මාර්ග අපගතව නොතිබේ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:bL,Data:vL,"Remove access":"",Metadata:_L,"User or group":"",Search:wL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TL,"Dashboard sharing":""},CL="",SL="Data",kL="Metadata",AL="Sök",ML="Stänga",PL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:CL,Data:SL,"Remove access":"",Metadata:kL,"User or group":"",Search:AL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Något gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:ML,"Dashboard sharing":""},IL="",DL="Dadus",RL="",LL="",zL="Taka",NL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:IL,Data:DL,"Remove access":"",Metadata:RL,"User or group":"",Search:LL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:zL,"Dashboard sharing":""},OL="Корбар",jL="Иттилоот",BL="",FL="Ҷустуҷӯ",UL="Пӯшидан",$L={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:OL,Data:jL,"Remove access":"",Metadata:BL,"User or group":"",Search:FL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:UL,"Dashboard sharing":""},VL="Користувач",GL="Дані",HL="Метадані",WL="Пошук",qL="Закрити",YL={"View only":"Тільки перегляд","View and edit":"Перегляд і редагування","No access":"Немає доступу","Give access to a user or group":"Надати доступ користувачеві або групі","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономному режимі","Metadata access level":"","Access level":"Рівень доступу","Give access":"Надати доступ","Users and groups that currently have access":"Користувачі та групи, які наразі мають доступ","User / Group":"Користувач / Група","All users":"Всі користувачі","Anyone logged in":"","User group":"Група користувачів",User:VL,Data:GL,"Remove access":"Видалити доступ",Metadata:HL,"User or group":"Користувач або група",Search:WL,"Apply dashboard sharing settings to visualizations":"Застосувати налаштування спільного доступу до інформаційної панелі до візуалізації","Something went wrong":"Сталася помилка","Apply sharing to dashboard visualizations":"Застосувати спільний доступ до візуалізації інформаційної панелі","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Візуалізації не оновлено. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не всі візуалізації вдалося оновити. {{ success }} успішно оновлено, {{ failed }} не вдалося оновити. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","No visualizations were updated because sharing settings are already sufficient.":"Візуалізації не оновлено, оскільки налаштувань спільного доступу вже достатньо.","Successfully updated sharing for all visualizations.":"Успішно оновлено спільний доступ для всіх візуалізацій.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Не всі налаштування спільного доступу до візуалізації потрібно було оновити. {{ updated }} оновлено, {{ skipped }} вже має достатньо налаштувань спільного доступу.","There are no users or groups to apply sharing settings for.":"Немає користувачів або груп, для яких можна застосувати налаштування спільного доступу.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Кількість візуалізацій на цій інформаційній панелі, які потенційно отримають оновлені налаштування спільного доступу: {{ visualizationsCount }}. Кількість користувачів або груп, до яких застосовуватимуться ці оновлені налаштування: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Застосування однакових налаштувань спільного доступу гарантує, що користувачі та групи, які мають доступ до інформаційної панелі, також мають принаймні доступ "Тільки перегляд" до її візуалізацій (діаграми, таблиці, мапи, діаграми подій та звіти про події).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Якщо користувач або група вже мають доступ до візуалізації "Перегляд і редагування", це не буде зведено до рівня "Тільки перегляд". Рівень доступу "Усі користувачі" не буде оновлено або змінено.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Застосування спільного доступу неможливо скасувати, і його потрібно виконати знову, якщо на інформаційній панелі додано нові візуалізації або змінено налаштування спільного доступу.","Sharing and access: {{- objectName}}":"Спільний доступ: {{- objectName}}","Sharing and access":"Спільний доступ",Close:qL,"Dashboard sharing":"Спільний доступ до інформаційної панелі"},ZL="صارف",XL="ڈیٹا",KL="میٹا ڈیٹا",QL="تلاش کریں",JL="بند",ez={"View only":"","View and edit":"","No access":"داخلہ ممنوع ہے","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"صارف گروپ",User:ZL,Data:XL,"Remove access":"",Metadata:KL,"User or group":"",Search:QL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:JL,"Dashboard sharing":""},tz="Metadata",iz="Izlash",rz="Yopmoq",nz={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogʼonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taʼqiqlangan","Can view":"Кўриш мумкин","Can view and edit":"",Metadata:tz,"Remove access":"","User or group":"",Search:iz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:rz,"Dashboard sharing":""},sz="Фойдаланувчи",az="Маълумот",oz="МетаМаълумот",lz="Қидириш",cz="Ёпиш",hz={"View only":"Фақат кўриш учун","View and edit":"Кўриш ва таҳрирлаш","No access":"Кириш ҳуқуқи мавжуд эмас","Give access to a user or group":"Фойдаланувчи ёки гуруҳга киришга рухсат бериш","Data access level":"","Choose a level":"","Not available offline":"Оффлайн режимда мавжуд эмас","Metadata access level":"","Access level":"Кириш мумкин бўлган босқичлар","Give access":"Рухсат бериш","Users and groups that currently have access":"Рухсати бор бўлган яойдаланувчилар ёки гуруҳлар","User / Group":"Фойдаланувчи/Гуруҳ","All users":"Барча фойдаланувчилар","Anyone logged in":"","User group":"Фойдаланувчи гуруҳи",User:sz,Data:az,"Remove access":"Рухсатни бекор қилиш",Metadata:oz,"User or group":"Фойдаланувчи ёки гуруҳ",Search:lz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Нимадир нотўғри бажарилди","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"Уланиш ва кириш: {{- objectName}}","Sharing and access":"Уланиш ва кириш",Close:cz,"Dashboard sharing":"Бошқарув панелига уланиш"},uz="Foydalanuvchi",dz="Маълумот",pz="Metadata",fz="Izlash",mz="Yopmoq",gz={"View only":"","View and edit":"","No access":"Kirish taʼqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:uz,Data:dz,"Remove access":"",Metadata:pz,"User or group":"",Search:fz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:mz,"Dashboard sharing":""},yz="Người dùng",xz="Dữ liệu",bz="Siêu dữ liệu",vz="Tìm kiếm",_z="Đóng lại",wz={"View only":"Chỉ xem","View and edit":"","No access":"Không truy cập","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Không có cho ngoại tuyến","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhóm Người Dùng",User:yz,Data:xz,"Remove access":"",Metadata:bz,"User or group":"",Search:vz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Có lỗi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_z,"Dashboard sharing":""},Tz="用户",Ez="数据",Cz="元数据",Sz="搜索",kz="关闭",Az={"View only":"只读","View and edit":"查看和编辑","No access":"不能访问","Give access to a user or group":"授予用户或组访问权限","Data access level":"数据访问级别","Choose a level":"选择级别","Not available offline":"离线不可用","Metadata access level":"元数据访问级别","Access level":"访问等级","Give access":"授予访问权限","Users and groups that currently have access":"当前具有访问权限的用户和组","User / Group":"用户/组","All users":"全部用户","Anyone logged in":"已经登录的任何人","User group":"用户组",User:Tz,Data:Ez,"Remove access":"删除访问权限",Metadata:Cz,"User or group":"用户或组",Search:Sz,"Apply dashboard sharing settings to visualizations":"将仪表板共享设置应用于可视化","Something went wrong":"出问题了","Apply sharing to dashboard visualizations":"将共享应用于仪表板可视化","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"没有更新可视化。检查您是否有权更改所有可视化的共享。","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"并非所有可视化都可以成功更新。 {{ success }}更新成功，{{ failed }}更新失败。检查您是否有权更改所有可视化的共享。","No visualizations were updated because sharing settings are already sufficient.":"没有更新可视化，因为共享设置已经足够了。","Successfully updated sharing for all visualizations.":"已成功更新所有可视化的共享。","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"并非所有可视化共享设置都需要更新。 {{ updated }}更新，{{ skipped }}已经有足够的分享设置。","There are no users or groups to apply sharing settings for.":"没有要应用共享设置的用户或组。","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"此仪表板上可能会获得更新共享设置的可视化数量：{{ visualizationsCount }}。这些更新的设置将应用于的用户或组的数量：{{ entityAmount }}。",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"应用相同的共享设置可确保有权访问仪表板的用户和组也至少具有对其可视化（图表、表格、地图、事件图表和事件报告）的“仅查看”访问权限。",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"如果用户或组已经具有对可视化的“查看和编辑”访问权限，则这不会减少为“仅查看”。 “所有用户”访问级别不会更新或更改。","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"应用共享无法撤消，如果新的可视化添加到仪表板或更改其共享设置，则需要再次执行。","Sharing and access: {{- objectName}}":"共享和访问：{{- objectName}}","Sharing and access":"共享和访问",Close:kz,"Dashboard sharing":"仪表板共享"},Mz="用户",Pz="数据",Iz="元数据",Dz="搜索",Rz="关闭",Lz={"View only":"","View and edit":"","No access":"不能访问","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"访问等级","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User组",User:Mz,Data:Pz,"Remove access":"",Metadata:Iz,"User or group":"",Search:Dz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"出了些问题","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Rz,"Dashboard sharing":""},Dr="default";it.addResources("ar",Dr,iD);it.addResources("ar_IQ",Dr,lD);it.addResources("ckb",Dr,dD);it.addResources("cs",Dr,xD);it.addResources("da",Dr,ED);it.addResources("en",Dr,PD);it.addResources("es",Dr,ND);it.addResources("es_419",Dr,$D);it.addResources("fi",Dr,WD);it.addResources("fr",Dr,QD);it.addResources("id",Dr,nR);it.addResources("km",Dr,hR);it.addResources("lo",Dr,gR);it.addResources("my",Dr,wR);it.addResources("nb",Dr,AR);it.addResources("ne",Dr,DR);it.addResources("nl",Dr,jR);it.addResources("prs",Dr,GR);it.addResources("ps",Dr,XR);it.addResources("pt",Dr,iL);it.addResources("pt_BR",Dr,lL);it.addResources("ro",Dr,dL);it.addResources("ru",Dr,xL);it.addResources("si",Dr,EL);it.addResources("sv",Dr,PL);it.addResources("tet",Dr,NL);it.addResources("tg",Dr,$L);it.addResources("uk",Dr,YL);it.addResources("ur",Dr,ez);it.addResources("uz_Latn",Dr,nz);it.addResources("uz_UZ_Cyrl",Dr,hz);it.addResources("uz_UZ_Latn",Dr,gz);it.addResources("vi",Dr,wz);it.addResources("zh",Dr,Az);it.addResources("zh_CN",Dr,Lz);const jb=i=>{let{onClose:e,name:t,children:o,dataTest:a="dhis2-uicore-sharingdialog-modal"}=i;const c=t?it.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):it.t("Sharing and access");return Me.createElement(mh,{large:!0,position:"top",onClose:e,dataTest:a},Me.createElement(uv,null,c),Me.createElement(Qg,null,o),Me.createElement(dv,null,Me.createElement(pv,{end:!0},Me.createElement(Vr,{type:"button",secondary:!0,onClick:e},it.t("Close")))))};jb.propTypes={children:we.node.isRequired,dataTest:we.string,name:we.string,onClose:we.func};const Gu=Me.forwardRef((i,e)=>{let{icon:t,onClick:o,selected:a,disabled:c,children:u,className:n,dataTest:p="dhis2-uicore-tab"}=i,m=$e.useRef(null);e&&(m=e);const[g,v]=$e.useState(!1);return $e.useEffect(()=>{(()=>{const k=m.current.scrollWidth>m.current.clientWidth;v(k)})()},[]),Me.createElement("button",{onClick:c?void 0:y=>o({},y),"data-test":p,ref:m,role:"tab","aria-selected":a?"true":"false","aria-disabled":c?"true":"false",onFocus:c?void 0:y=>o({},y),tabIndex:-1,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ri.focus,We.grey600,We.grey900,We.grey600,We.grey800,ri.primary800,ri.primary700,ri.primary700,ri.primary700,We.grey500,We.grey500]]])+` ${hs("tab",n,{selected:a,disabled:c})}`},t,g?Me.createElement(ny,{content:u,maxWidth:"100%"},Me.createElement("span",{ref:m,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ri.focus,We.grey600,We.grey900,We.grey600,We.grey800,ri.primary800,ri.primary700,ri.primary700,ri.primary700,We.grey500,We.grey500]]])},u)):Me.createElement("span",{ref:m,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ri.focus,We.grey600,We.grey900,We.grey600,We.grey800,ri.primary800,ri.primary700,ri.primary700,ri.primary700,We.grey500,We.grey500]]])},u),Me.createElement(jt,{id:"2433456263",dynamic:[We.grey400,We.grey600,ri.focus,We.grey600,We.grey900,We.grey600,We.grey800,ri.primary800,ri.primary700,ri.primary700,ri.primary700,We.grey500,We.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${We.grey400};color:${We.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${ri.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${We.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${We.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${We.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${We.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${ri.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${ri.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${ri.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${ri.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${We.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${We.grey500};}`]))});Gu.propTypes={children:we.node,className:we.string,dataTest:we.string,disabled:we.bool,icon:we.element,selected:we.bool,onClick:we.func};Gu.displayName="Tab";const Bb=250,zz=.5;function Nz(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const o=i.scrollLeft,a=Oz(i,o,t),c=a-o,u=jz({scrollBox:i,callback:e,startValue:o,endValue:a,change:c});window.requestAnimationFrame(u)}function Oz(i,e,t){const o=i.clientWidth*zz;return Math.floor(e+o*(t?-1:1))}function jz(i){let{scrollBox:e,callback:t,startValue:o,endValue:a,change:c}=i,u,n,p;return function m(g){u||(u=g),n=g-u,p=Bz({currentTime:n,DURATION:Bb,startValue:o,change:c}),n>=Bb?(p!==a&&(e.scrollLeft=a),t&&t()):(e.scrollLeft=p,window.requestAnimationFrame(m))}}function Bz(i){let{currentTime:e,startValue:t,change:o}=i;return(e/=Bb/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t}let Fm;const Fb="__vertical-scrollbar-height-test__",Fz=`
    .${Fb} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${Fb}::-webkit-scrollbar {
        display: none;
    }
`;function Uz(){if(Fm)return Fm;const i=document.createElement("style");i.innerHTML=Fz;const e=document.createElement("div");return e.classList.add(Fb),document.body.appendChild(i),document.body.appendChild(e),Fm=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),Fm}const Pg=i=>{let{children:e,disabled:t,hidden:o,onClick:a}=i;return Me.createElement("button",{onClick:t?void 0:a,className:jt.dynamic([["2701682090",[We.white,We.grey400,We.grey600,We.grey100,We.grey200,We.grey500]]])+" "+(hs("scroll-button",{disabled:t,hidden:o})||"")},e,Me.createElement(jt,{id:"2701682090",dynamic:[We.white,We.grey400,We.grey600,We.grey100,We.grey200,We.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${We.white};border:none;border-bottom:1px solid ${We.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${We.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${We.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${We.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${We.grey500};}`]))};Pg.displayName="ScrollButton";Pg.propTypes={children:we.any.isRequired,disabled:we.bool,hidden:we.bool,onClick:we.func};function ll(i,e,t){return(e=$z(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function $z(i){var e=Vz(i,"string");return typeof e=="symbol"?e:e+""}function Vz(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class zC extends $e.Component{constructor(e){super(e),ll(this,"scrollBox",$e.createRef()),ll(this,"scrollArea",$e.createRef()),ll(this,"horizontalScrollBarHeight",Uz()),ll(this,"scrollBoxResizeObserver",null),ll(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:o}=this.scrollArea,a=o.offsetWidth,c=t.offsetWidth,u=a<=c;this.setState({hideScrollButtons:u}),u||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),ll(this,"scrollRight",()=>this.scroll()),ll(this,"scrollLeft",()=>this.scroll(!0)),ll(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),ll(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:o}=this.scrollBox.current,{offsetWidth:a}=this.scrollArea.current,c=t<=0,u=t+o>=a;(this.state.scrolledToStart!==c||this.state.scrolledToEnd!==u)&&this.setState({scrolledToStart:c,scrolledToEnd:u})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),Nz(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const o=t.offsetLeft+t.offsetWidth;o>e.offsetWidth&&(e.scrollLeft=o-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:o,hideScrollButtons:a}=this.state,{children:c,className:u,dataTest:n}=this.props,p=!o||a;return Me.createElement("div",{"data-test":n,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(hs("scroll-bar",u)||"")},Me.createElement(Pg,{disabled:e,onClick:this.scrollLeft,hidden:p},Me.createElement(IT,null)),Me.createElement("div",{className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},Me.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},Me.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},c))),Me.createElement(Pg,{disabled:t,onClick:this.scrollRight,hidden:p},Me.createElement(DT,null)),Me.createElement(jt,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),Me.createElement(jt,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}zC.propTypes={children:we.node.isRequired,dataTest:we.string.isRequired,className:we.string};const Ub=i=>{let{children:e,fixed:t,dataTest:o}=i;const a=$e.useRef(null),c=$e.useMemo(()=>Me.Children.map(e,()=>Me.createRef()),[e]),u=n=>{const p=document.activeElement;if(a.current&&a.current===p){c.length>0&&c[0].current&&c[0].current.focus();return}const m=c.findIndex(g=>g.current===p);if(m!==-1){if(n.key==="ArrowRight"){n.preventDefault();const g=(m+1)%c.length;c[g].current.focus()}if(n.key==="ArrowLeft"){n.preventDefault();const g=(m-1+c.length)%c.length;c[g].current.focus()}}};return Me.createElement("div",{ref:a,"data-test":o,role:"tablist",tabIndex:0,onKeyDown:u,className:jt.dynamic([["771129571",[We.grey400,We.white]]])+" "+(hs({fixed:t})||"")},Me.Children.map(e,(n,p)=>Me.isValidElement(n)?Me.cloneElement(n,{ref:c[p]}):Me.createElement("span",{ref:c[p],tabIndex:-1,className:jt.dynamic([["771129571",[We.grey400,We.white]]])},n)),Me.createElement(jt,{id:"771129571",dynamic:[We.grey400,We.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${We.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${We.white};}`]))};Ub.propTypes={dataTest:we.string.isRequired,children:we.node,fixed:we.bool};const i0=i=>{let{fixed:e,children:t,className:o,scrollable:a,dataTest:c="dhis2-uicore-tabbar"}=i;return a?Me.createElement("div",{className:o,"data-test":c},Me.createElement(zC,{dataTest:`${c}-scrollbar`},Me.createElement(Ub,{fixed:e,dataTest:`${c}-tabs`},t))):Me.createElement("div",{className:o,"data-test":c},Me.createElement(Ub,{fixed:e,dataTest:`${c}-tabs`},t))};i0.propTypes={children:we.node,className:we.string,dataTest:we.string,fixed:we.bool,scrollable:we.bool};var uh=[],Gz=function(){return uh.some(function(i){return i.activeTargets.length>0})},Hz=function(){return uh.some(function(i){return i.skippedTargets.length>0})},Ww="ResizeObserver loop completed with undelivered notifications.",Wz=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:Ww}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=Ww),window.dispatchEvent(i)},$p;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})($p||($p={}));var dh=function(i){return Object.freeze(i)},qz=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,dh(this)}return i}(),NC=function(){function i(e,t,o,a){return this.x=e,this.y=t,this.width=o,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,dh(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,o=e.y,a=e.top,c=e.right,u=e.bottom,n=e.left,p=e.width,m=e.height;return{x:t,y:o,top:a,right:c,bottom:u,left:n,width:p,height:m}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),r0=function(i){return i instanceof SVGElement&&"getBBox"in i},OC=function(i){if(r0(i)){var e=i.getBBox(),t=e.width,o=e.height;return!t&&!o}var a=i,c=a.offsetWidth,u=a.offsetHeight;return!(c||u||i.getClientRects().length)},qw=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},Yz=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ap=typeof window<"u"?window:{},Um=new WeakMap,Yw=/auto|scroll/,Zz=/^tb|vertical/,Xz=/msie|trident/i.test(Ap.navigator&&Ap.navigator.userAgent),Eo=function(i){return parseFloat(i||"0")},zu=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new qz((t?e:i)||0,(t?i:e)||0)},Zw=dh({devicePixelContentBoxSize:zu(),borderBoxSize:zu(),contentBoxSize:zu(),contentRect:new NC(0,0,0,0)}),jC=function(i,e){if(e===void 0&&(e=!1),Um.has(i)&&!e)return Um.get(i);if(OC(i))return Um.set(i,Zw),Zw;var t=getComputedStyle(i),o=r0(i)&&i.ownerSVGElement&&i.getBBox(),a=!Xz&&t.boxSizing==="border-box",c=Zz.test(t.writingMode||""),u=!o&&Yw.test(t.overflowY||""),n=!o&&Yw.test(t.overflowX||""),p=o?0:Eo(t.paddingTop),m=o?0:Eo(t.paddingRight),g=o?0:Eo(t.paddingBottom),v=o?0:Eo(t.paddingLeft),y=o?0:Eo(t.borderTopWidth),k=o?0:Eo(t.borderRightWidth),_=o?0:Eo(t.borderBottomWidth),T=o?0:Eo(t.borderLeftWidth),M=v+m,A=p+g,x=T+k,P=y+_,D=n?i.offsetHeight-P-i.clientHeight:0,w=u?i.offsetWidth-x-i.clientWidth:0,I=a?M+x:0,N=a?A+P:0,q=o?o.width:Eo(t.width)-I-w,Z=o?o.height:Eo(t.height)-N-D,X=q+M+w+x,j=Z+A+D+P,V=dh({devicePixelContentBoxSize:zu(Math.round(q*devicePixelRatio),Math.round(Z*devicePixelRatio),c),borderBoxSize:zu(X,j,c),contentBoxSize:zu(q,Z,c),contentRect:new NC(v,p,q,Z)});return Um.set(i,V),V},BC=function(i,e,t){var o=jC(i,t),a=o.borderBoxSize,c=o.contentBoxSize,u=o.devicePixelContentBoxSize;switch(e){case $p.DEVICE_PIXEL_CONTENT_BOX:return u;case $p.BORDER_BOX:return a;default:return c}},Kz=function(){function i(e){var t=jC(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=dh([t.borderBoxSize]),this.contentBoxSize=dh([t.contentBoxSize]),this.devicePixelContentBoxSize=dh([t.devicePixelContentBoxSize])}return i}(),FC=function(i){if(OC(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},Qz=function(){var i=1/0,e=[];uh.forEach(function(u){if(u.activeTargets.length!==0){var n=[];u.activeTargets.forEach(function(m){var g=new Kz(m.target),v=FC(m.target);n.push(g),m.lastReportedSize=BC(m.target,m.observedBox),v<i&&(i=v)}),e.push(function(){u.callback.call(u.observer,n,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var t=0,o=e;t<o.length;t++){var a=o[t];a()}return i},Xw=function(i){uh.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(a){a.isActive()&&(FC(a.target)>i?t.activeTargets.push(a):t.skippedTargets.push(a))})})},Jz=function(){var i=0;for(Xw(i);Gz();)i=Qz(),Xw(i);return Hz()&&Wz(),i>0},qx,UC=[],eN=function(){return UC.splice(0).forEach(function(i){return i()})},tN=function(i){if(!qx){var e=0,t=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return eN()}).observe(t,o),qx=function(){t.textContent="".concat(e?e--:e++)}}UC.push(i),qx()},iN=function(i){tN(function(){requestAnimationFrame(i)})},ag=0,rN=function(){return!!ag},nN=250,sN={attributes:!0,characterData:!0,childList:!0,subtree:!0},Kw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Qw=function(i){return i===void 0&&(i=0),Date.now()+i},Yx=!1,aN=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=nN),!Yx){Yx=!0;var o=Qw(e);iN(function(){var a=!1;try{a=Jz()}finally{if(Yx=!1,e=o-Qw(),!rN())return;a?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,sN)};document.body?t():Ap.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Kw.forEach(function(t){return Ap.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Kw.forEach(function(t){return Ap.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),$b=new aN,Jw=function(i){!ag&&i>0&&$b.start(),ag+=i,!ag&&$b.stop()},oN=function(i){return!r0(i)&&!Yz(i)&&getComputedStyle(i).display==="inline"},lN=function(){function i(e,t){this.target=e,this.observedBox=t||$p.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=BC(this.target,this.observedBox,!0);return oN(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),cN=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),$m=new WeakMap,e1=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},Vm=function(){function i(){}return i.connect=function(e,t){var o=new cN(e,t);$m.set(e,o)},i.observe=function(e,t,o){var a=$m.get(e),c=a.observationTargets.length===0;e1(a.observationTargets,t)<0&&(c&&uh.push(a),a.observationTargets.push(new lN(t,o&&o.box)),Jw(1),$b.schedule())},i.unobserve=function(e,t){var o=$m.get(e),a=e1(o.observationTargets,t),c=o.observationTargets.length===1;a>=0&&(c&&uh.splice(uh.indexOf(o),1),o.observationTargets.splice(a,1),Jw(-1))},i.disconnect=function(e){var t=this,o=$m.get(e);o.observationTargets.slice().forEach(function(a){return t.unobserve(e,a.target)}),o.activeTargets.splice(0,o.activeTargets.length)},i}(),hN=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Vm.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Vm.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Vm.unobserve(this,e)},i.prototype.disconnect=function(){Vm.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const $C=Me[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],uN=i=>{const e=$e.useRef(i);return $e.useEffect(()=>{e.current=i}),e},dN=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:hN;function pN(){}function fN(i,e){const t=gN(),o=uN(e);return $C(()=>{let a=!1;const c=i&&"current"in i?i.current:i;if(!c)return pN;function u(n,p){a||o.current(n,p)}return t.subscribe(c,u),()=>{a=!0,t.unsubscribe(c,u)}},[i,t,o]),t.observer}function mN(){let i=!1,e=[];const t=new Map,o=new dN((a,c)=>{e=e.concat(a);function u(){const n=new Set;for(let p=0;p<e.length;p++){if(n.has(e[p].target))continue;n.add(e[p].target);const m=t.get(e[p].target);m==null||m.forEach(g=>g(e[p],c))}e=[],i=!1}i||window.requestAnimationFrame(u),i=!0});return{observer:o,subscribe(a,c){var u;o.observe(a);const n=(u=t.get(a))!==null&&u!==void 0?u:[];n.push(c),t.set(a,n)},unsubscribe(a,c){var u;const n=(u=t.get(a))!==null&&u!==void 0?u:[];if(n.length===1){o.unobserve(a),t.delete(a);return}const p=n.indexOf(c);p!==-1&&n.splice(p,1),t.set(a,n)}}}let Zx;const gN=()=>Zx||(Zx=mN()),yN=(i,e)=>{const[t,o]=$e.useState(()=>{var a,c;const u=i&&"current"in i?i.current:i;return u?[u.offsetWidth,u.offsetHeight]:[(a=void 0)!==null&&a!==void 0?a:0,(c=void 0)!==null&&c!==void 0?c:0]});return $C(()=>{const a=i&&"current"in i?i.current:i;a&&o([a.offsetWidth,a.offsetHeight])},[i]),fN(i,a=>{const c=a.target;o([c.offsetWidth,c.offsetHeight])}),t},VC=i=>{let{children:e,dataTest:t,maxHeight:o="280px",menuWidth:a,onClick:c,menuRef:u}=i;return Me.createElement(hv,{onBackdropClick:c,transparent:!0},Me.createElement(cf,{reference:u,placement:"bottom",observeReferenceResize:!0},Me.createElement("div",{"data-test":`${t}-menuwrapper`,className:jt.dynamic([["1686499909",[a,o]]])+" card"},Me.createElement(Jg,null,e))),Me.createElement(jt,{id:"1686499909",dynamic:[a,o]},[`.card.__jsx-style-dynamic-selector{width:${a};max-height:${o};}`]))};VC.propTypes={dataTest:we.string.isRequired,menuRef:we.object.isRequired,menuWidth:we.string.isRequired,children:we.node,maxHeight:we.string,onClick:we.func};const GC=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:o,loading:a,onClose:c,onSearch:u,onSelect:n,placeholder:p,search:m,searchResults:g}=i;const v=$e.useRef(null),[y]=yN(v),{isDisconnected:k}=ey();return Me.createElement(Me.Fragment,null,Me.createElement("div",{ref:v},Me.createElement(hf,{label:o,loading:a,placeholder:p,onChange:_=>{let{value:T}=_;return u(T)},value:m,inputWidth:t,disabled:k,helpText:k?it.t("Not available offline"):""})),g.length>0&&Me.createElement(VC,{onClick:c,menuWidth:`${y}px`,menuRef:v,dataTest:`${e}-menu`},Me.createElement(fv,null,g.map(_=>Me.createElement(ju,{key:_.id,label:_.displayName,value:_.id,onClick:T=>{let{value:M}=T;return n(M)}})))))};GC.propTypes={searchResults:we.arrayOf(we.shape({displayName:we.string,id:we.string})).isRequired,dataTest:we.string,inputWidth:we.string,label:we.string,loading:we.bool,placeholder:we.string,search:we.string,onClose:we.func,onSearch:we.func,onSelect:we.func};const xN={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},HC=i=>{var e,t;let{selected:o,onSelection:a}=i;const[c,u]=$e.useState(""),[n,p]=$e.useState(!1),{data:m,refetch:g,fetching:v}=Ta(xN,{lazy:!0,onComplete:()=>p(!0)});$e.useEffect(()=>u(o),[o]);const y=$e.useCallback(W3(g,250),[g]);$e.useEffect(()=>{c&&c===o||(c?y({search:c}):(a(null),p(!1)))},[c]);let k=[];if(m!=null&&(e=m.search)!==null&&e!==void 0&&e.users){const _=m.search.users.map(T=>({...T,type:"user"}));k=k.concat(_)}if(m!=null&&(t=m.search)!==null&&t!==void 0&&t.userGroups){const _=m.search.userGroups.map(T=>({...T,type:"group"}));k=k.concat(_)}return Me.createElement(GC,{inputWidth:"100%",label:it.t("User or group"),loading:v,placeholder:it.t("Search"),search:c,searchResults:n?k:[],onClose:()=>p(!1),onSearch:u,onSelect:_=>{a(k.find(T=>T.id===_)),p(!1)}})};HC.propTypes={onSelection:we.func.isRequired,selected:we.string};const _y=i=>{let{children:e}=i;return Me.createElement(Me.Fragment,null,Me.createElement("h2",{className:jt.dynamic([["2416527184",[We.grey900]]])},e),Me.createElement(jt,{id:"2416527184",dynamic:[We.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${We.grey900};}`]))};_y.propTypes={children:we.node.isRequired};const Vb=i=>{let{onAdd:e,dataSharing:t}=i;const o=$e.useContext(Mg),[a,c]=$e.useState(null),[u,n]=$e.useState(""),[p,m]=$e.useState(""),{isDisconnected:g}=ey(),v=_=>{_.preventDefault(),e({type:a.type,id:a.id,name:a.displayName||a.name,access:{data:u,metadata:p}}),c(null),n(""),m("")},y=[{value:Zr,label:it.t("View only")},{value:rn,label:it.t("View and edit")}],k=[...y,{value:gr,label:it.t("No access")}];return Me.createElement(Me.Fragment,null,Me.createElement(_y,null,it.t("Give access to a user or group")),Me.createElement("form",{onSubmit:v,className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])},Me.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},Me.createElement(HC,{selected:(a==null?void 0:a.displayName)||(a==null?void 0:a.name),onSelection:c})),Me.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&Me.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" select-wrapper"},Me.createElement(os,{label:it.t("Data access level"),placeholder:it.t("Choose a level"),disabled:g,selected:u,helpText:g?it.t("Not available offline"):"",onChange:_=>{let{selected:T}=_;return n(T)}},k.map(_=>{let{value:T,label:M}=_;return Me.createElement(uo,{key:T,label:M,value:T,active:T===u})}))),Me.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" select-wrapper"},Me.createElement(os,{label:t?it.t("Metadata access level"):it.t("Access level"),placeholder:it.t("Choose a level"),disabled:g,selected:p,helpText:g?it.t("Not available offline"):"",onChange:_=>{let{selected:T}=_;return m(T)}},(t?k:y).map(_=>{let{value:T,label:M}=_;return Me.createElement(uo,{key:T,label:M,value:T,active:T===p})}))),Me.createElement(Vr,{type:"submit",disabled:g||o||!a||t&&!u||!p||u===gr&&p===gr},it.t("Give access")))),Me.createElement(jt,{id:"3476690250",dynamic:[We.grey100,We.grey900,Jt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${We.grey100};color:${We.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Jt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};Vb.propTypes={onAdd:we.func.isRequired,dataSharing:we.bool};const Gb=i=>{let{label:e,onClick:t}=i;return Me.createElement("div",{onClick:t,className:jt.dynamic([["1009072197",[We.red700,Jt.dp8,Jt.dp12,We.red050]]])},e,Me.createElement(jt,{id:"1009072197",dynamic:[We.red700,Jt.dp8,Jt.dp12,We.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${We.red700};padding:${Jt.dp8} ${Jt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${We.red050};}`]))};Gb.propTypes={label:we.string.isRequired,onClick:we.func.isRequired};const bN={[kh]:it.t("Anyone logged in"),[nd]:it.t("User group"),[Ah]:it.t("User")},WC=i=>{var e;let{target:t,id:o}=i;return Me.createElement(Me.Fragment,null,Me.createElement("p",{className:jt.dynamic([["2525483302",[We.grey700]]])},t===Ah?o:(e=bN[t])!==null&&e!==void 0?e:""),Me.createElement(jt,{id:"2525483302",dynamic:[We.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${We.grey700};margin:6px 0 0 0;padding:0;}`]))};WC.propTypes={target:we.oneOf([kh,nd,Ah]).isRequired,id:we.string};const qC=i=>{let{target:e,name:t}=i;switch(e){case t0:return Me.createElement(WT,{color:We.grey600});case kh:case nd:return Me.createElement(VT,{color:We.grey600});case Ah:return Me.createElement(sM,{name:t,small:!0});default:return null}};qC.propTypes={target:we.oneOf([t0,kh,Ah,nd]).isRequired,name:we.string};const t1=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===gr:!0},og=i=>{let{name:e,id:t,target:o,access:a,accessOptions:c,disabled:u,onChange:n,onRemove:p,dataSharing:m,allUsersItem:g=!1}=i;const v=$e.useContext(Mg),{isDisconnected:y}=ey(),k={ACCESS_NONE:it.t("No access"),ACCESS_VIEW_ONLY:it.t("View only"),ACCESS_VIEW_AND_EDIT:it.t("View and edit")};return Me.createElement(Me.Fragment,null,Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" wrapper"},Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" "+((m?"detailsWithData":"detailsMetadata")||"")},Me.createElement(qC,{target:o,name:e}),Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" details-text"},Me.createElement("p",{className:jt.dynamic([["650548845",[We.grey900]]])+" details-name"},e),Me.createElement(WC,{target:o,id:t}))),Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" "+((m?"selectWrapperWithData":"selectWrapperMetadata")||"")},m&&Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" select"},Me.createElement(os,{disabled:u||y||v,prefix:it.t("Data"),selected:a.data,helpText:y?it.t("Not available offline"):"",onChange:_=>{let{selected:T}=_;return n({...a,data:T})}},c.map(_=>Me.createElement(uo,{key:_,label:k[_],value:_,active:_===a.data})),Hw(o)&&t1({accessOtherField:a.metadata,dataSharing:m})&&Me.createElement(Gb,{onClick:p,label:it.t("Remove access")}))),Me.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" select"},Me.createElement(os,{disabled:u||y||v,prefix:it.t("Metadata"),selected:a.metadata,helpText:y?it.t("Not available offline"):"",onChange:_=>{let{selected:T}=_;return n({...a,metadata:T})}},c.map(_=>Me.createElement(uo,{key:_,label:k[_],value:_,active:_===a.metadata,disabled:!g&&_===gr&&!m})),Hw(o)&&t1({accessOtherField:a.data,dataSharing:m})&&Me.createElement(Gb,{onClick:p,label:it.t("Remove access")}))))),Me.createElement(aM,null),Me.createElement(jt,{id:"650548845",dynamic:[We.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${We.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};og.propTypes={access:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,accessOptions:we.arrayOf(we.oneOf([gr,Zr,rn])).isRequired,dataSharing:we.bool.isRequired,name:we.string.isRequired,target:we.oneOf([kh,nd,Ah]).isRequired,onChange:we.func.isRequired,allUsersItem:we.bool,disabled:we.bool,id:we.string,onRemove:we.func};const Hb=i=>{let{onChange:e,onRemove:t,publicAccess:o,allowPublicAccess:a,users:c,groups:u,dataSharing:n}=i;const p=[gr,Zr,rn];return Me.createElement(Me.Fragment,null,Me.createElement(_y,null,it.t("Users and groups that currently have access")),Me.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" header"},Me.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" "+((n?"header-start-column-data":"header-start-column-metadata")||"")},it.t("User / Group")),Me.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" "+((n?"header-end-column-data":"header-end-column-metadata")||"")},Me.createElement("span",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" hea"},it.t("Access level")))),Me.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" list"},Me.createElement(og,{name:it.t("All users"),target:kh,access:o,accessOptions:p,disabled:!a,onChange:m=>e({type:"public",access:m}),dataSharing:n,allUsersItem:!0}),u.map(m=>{let{id:g,name:v,access:y}=m;return Me.createElement(og,{key:g,name:v,target:nd,access:y,accessOptions:p,onChange:k=>e({type:"group",id:g,access:k}),onRemove:()=>t({type:"group",id:g}),dataSharing:n})}),c.map(m=>{let{id:g,name:v,access:y}=m;return y&&Me.createElement(og,{key:g,id:g,name:v,target:Ah,access:y,accessOptions:p,onChange:k=>e({type:"user",id:g,access:k}),onRemove:()=>t({type:"user",id:g}),dataSharing:n})})),Me.createElement(jt,{id:"3415079234",dynamic:[We.grey200,We.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${We.grey200};color:${We.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};Hb.propTypes={allowPublicAccess:we.bool.isRequired,dataSharing:we.bool.isRequired,groups:we.arrayOf(we.shape({id:we.string.isRequired,name:we.string.isRequired,access:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])})})).isRequired,publicAccess:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,users:we.arrayOf(we.shape({access:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,id:we.string.isRequired,name:we.string.isRequired})).isRequired,onChange:we.func.isRequired,onRemove:we.func.isRequired};const YC=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},vN=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:o,updatedItems:a}=i;if(o){if(a===0)return it.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(a&&e)return it.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:a,failed:t-a})}return a===0?it.t("No visualizations were updated because sharing settings are already sufficient."):a===t?it.t("Successfully updated sharing for all visualizations."):a<t?it.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:a,skipped:t-a}):""},_N=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?it.t("There are no users or groups to apply sharing settings for."):it.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},ZC=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:o,itemsCount:a}=i;const c=YC(o);if(!c)return null;const u=vN({visualizationsCount:c,itemsCount:a,hasErrors:e,updatedItems:t});return Me.createElement(vl,null,u)};ZC.propTypes={dashboardItems:we.array.isRequired,hasErrors:we.bool.isRequired,itemsCount:we.number.isRequired,updatedItems:we.number.isRequired};const wN={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},XC=i=>{let{id:e,entityAmount:t}=i;const{data:o,loading:a}=Ta(wN,{variables:{id:e}});if(a)return null;const{dashboard:c}=o,u=YC(c.dashboardItems);if(!u)return null;const n=_N({visualizationsCount:u,entityAmount:t});return Me.createElement(vl,null,n)};XC.propTypes={entityAmount:we.number.isRequired,id:we.string.isRequired};const TN={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},KC=i=>{var e;let{id:t,entityAmount:o}=i;const{isDisconnected:a}=ey(),{data:c,refetch:u}=Ta(TN,{variables:{id:t}});$e.useEffect(()=>{u({id:t})},[u,t]);const n=Ku(),[p,m]=$e.useState(!1),[g,v]=$e.useState(!1),[y,k]=$e.useState(null),[_,T]=$e.useState(null),M={resource:`dashboards/cascadeSharing/${t}`,type:"create"},A=()=>{m(!0),v(!0),T(null),k(null),n.mutate(M).then(D=>{T(D)}).catch(D=>{k(D.message||it.t("Something went wrong"))}).finally(()=>{v(!1)})},x=(_==null||(e=_.errorReports)===null||e===void 0?void 0:e.length)>0,P=_==null?void 0:_.countUpdatedDashboardItems;return Me.createElement(Me.Fragment,null,!p&&Me.createElement(XC,{id:t,entityAmount:o}),y&&Me.createElement(Jm,{marginTop:Jt.dp12},Me.createElement(vl,{error:!0},y)),c&&_&&Me.createElement(Jm,{marginTop:Jt.dp12},Me.createElement(ZC,{hasErrors:x,updatedItems:P,dashboardItems:c.dashboard.dashboardItems,itemsCount:c.dashboard.itemsCount})),Me.createElement(Jm,{marginTop:Jt.dp12},Me.createElement(Vr,{type:"button",disabled:a||g||!o,loading:g,secondary:!0,onClick:A},it.t("Apply sharing to dashboard visualizations"))))};KC.propTypes={entityAmount:we.number.isRequired,id:we.string.isRequired};const EN=()=>Me.createElement(Me.Fragment,null,Me.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),Me.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),Me.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),Me.createElement(jt,{id:"3321084332",dynamic:[We.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${We.grey800};}`])),QC=i=>{let{id:e,entityAmount:t}=i;return Me.createElement(Me.Fragment,null,Me.createElement(_y,null,it.t("Apply dashboard sharing settings to visualizations")),Me.createElement(EN,null),Me.createElement(KC,{id:e,entityAmount:t}))};QC.propTypes={entityAmount:we.number.isRequired,id:we.string.isRequired};const Wb=i=>{let{type:e,users:t,groups:o,publicAccess:a,allowPublicAccess:c,id:u,onAdd:n,onChange:p,onRemove:m,dataSharing:g}=i;const[v,y]=$e.useState(0);return e===DC.DASHBOARD?Me.createElement(Me.Fragment,null,Me.createElement(i0,null,Me.createElement(Gu,{onClick:()=>y(0),selected:v===0},it.t("Dashboard sharing")),Me.createElement(Gu,{onClick:()=>y(1),selected:v===1},it.t("Apply sharing to dashboard visualizations"))),Me.createElement("div",null,v===0&&Me.createElement(Me.Fragment,null,Me.createElement(Vb,{onAdd:n,dataSharing:g}),Me.createElement(Hb,{users:t,groups:o,publicAccess:a,allowPublicAccess:c,onChange:p,onRemove:m,dataSharing:g})),v===1&&Me.createElement(QC,{id:u,entityAmount:t.length+o.length}))):Me.createElement(Me.Fragment,null,Me.createElement(Vb,{onAdd:n,dataSharing:g}),Me.createElement(Hb,{users:t,groups:o,publicAccess:a,allowPublicAccess:c,onChange:p,onRemove:m,dataSharing:g}))};Wb.propTypes={allowPublicAccess:we.bool.isRequired,dataSharing:we.bool.isRequired,groups:we.arrayOf(we.shape({access:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,id:we.string.isRequired,name:we.string.isRequired})).isRequired,id:we.string.isRequired,publicAccess:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,type:we.oneOf(RC).isRequired,users:we.arrayOf(we.shape({access:we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}).isRequired,id:we.string.isRequired,name:we.string.isRequired})).isRequired,onAdd:we.func.isRequired,onChange:we.func.isRequired,onRemove:we.func.isRequired};const CN={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},SN={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},Xx=()=>{},kN={name:"",allowPublic:!0,public:{data:gr,metadata:gr},groups:[],users:[]},AN=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:gr,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:gr,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:gr,metadata:t.access}}:t),e},JC=i=>{let{id:e,type:t,onClose:o=Xx,onError:a=Xx,onSave:c=Xx,initialSharingSettings:u=kN,dataTest:n="dhis2-uicore-sharingdialog",dataSharing:p=!1}=i;const{show:m}=Rp(Z=>Z,{critical:!0}),g=AN(u),{data:v,refetch:y,loading:k,fetching:_}=Ta(CN,{variables:{id:e,type:t},onError:Z=>{m(Z),a(Z)}}),[T,{loading:M}]=pC(SN,{variables:{type:t,id:e},onError:Z=>{m(Z),a(Z),y()},onComplete:()=>{y(),c()}});if($e.useEffect(()=>{y({type:t,id:e})},[t,e]),k){const Z=Object.keys(u.users).map(Bm),X=Object.keys(u.groups).map(Bm);return Me.createElement(Mg.Provider,{value:!0},Me.createElement(jb,{onClose:o},Me.createElement(Wb,{id:e,users:Z,groups:X,publicAccess:g.public,allowPublicAccess:g.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:p})))}const{object:A,meta:x}=v.sharing,P=LC(A.publicAccess),D=A.userAccesses.map(Bm),w=A.userGroupAccesses.map(Bm),I=Z=>{let{type:X,id:j,access:V,name:U}=Z;const L=Z3({object:A,type:X,access:V,id:j,name:U});T({data:L,type:t,id:e})},N=Z=>{let{type:X,id:j,access:V}=Z;const U=Y3({object:A,type:X,access:V,id:j});T({data:U,type:t,id:e})},q=Z=>{let{type:X,id:j}=Z;const V=X3({object:A,type:X,id:j});T({data:V,type:t,id:e})};return Me.createElement(Mg.Provider,{value:M||_},Me.createElement(jb,{onClose:o,name:A.displayName||A.name,dataTest:n},Me.createElement(Wb,{id:e,users:D,groups:w,publicAccess:P,allowPublicAccess:x.allowPublicAccess,type:t,onAdd:I,onChange:N,onRemove:q,dataSharing:p})))};JC.propTypes={id:we.string.isRequired,type:we.oneOf(RC).isRequired,dataSharing:we.bool,dataTest:we.string,initialSharingSettings:we.shape({allowPublic:we.bool.isRequired,groups:we.objectOf(we.shape({id:we.string.isRequired,name:we.string.isRequired,access:we.oneOfType([we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}),we.oneOf([gr,Zr,rn])])})),name:we.string,public:we.oneOfType([we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}),we.oneOf([gr,Zr,rn])]),users:we.objectOf(we.shape({id:we.string.isRequired,name:we.string.isRequired,access:we.oneOfType([we.shape({data:we.oneOf([gr,Zr,rn]),metadata:we.oneOf([gr,Zr,rn])}),we.oneOf([gr,Zr,rn])])}))}),onClose:we.func,onError:we.func,onSave:we.func};var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.parse=zN;n0.serialize=NN;const MN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,PN=/^[\u0021-\u003A\u003C-\u007E]*$/,IN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,DN=/^[\u0020-\u003A\u003D-\u007E]*$/,RN=Object.prototype.toString,LN=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function zN(i,e){const t=new LN,o=i.length;if(o<2)return t;const a=(e==null?void 0:e.decode)||ON;let c=0;do{const u=i.indexOf("=",c);if(u===-1)break;const n=i.indexOf(";",c),p=n===-1?o:n;if(u>p){c=i.lastIndexOf(";",u-1)+1;continue}const m=i1(i,c,u),g=r1(i,u,m),v=i.slice(m,g);if(t[v]===void 0){let y=i1(i,u+1,p),k=r1(i,p,y);const _=a(i.slice(y,k));t[v]=_}c=p+1}while(c<o);return t}function i1(i,e,t){do{const o=i.charCodeAt(e);if(o!==32&&o!==9)return e}while(++e<t);return t}function r1(i,e,t){for(;e>t;){const o=i.charCodeAt(--e);if(o!==32&&o!==9)return e+1}return t}function NN(i,e,t){const o=(t==null?void 0:t.encode)||encodeURIComponent;if(!MN.test(i))throw new TypeError(`argument name is invalid: ${i}`);const a=o(e);if(!PN.test(a))throw new TypeError(`argument val is invalid: ${e}`);let c=i+"="+a;if(!t)return c;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);c+="; Max-Age="+t.maxAge}if(t.domain){if(!IN.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);c+="; Domain="+t.domain}if(t.path){if(!DN.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);c+="; Path="+t.path}if(t.expires){if(!jN(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);c+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(c+="; HttpOnly"),t.secure&&(c+="; Secure"),t.partitioned&&(c+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return c}function ON(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function jN(i){return RN.call(i)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n1="popstate";function BN(i={}){function e(a,c){let{pathname:u="/",search:n="",hash:p=""}=Cl(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Vp("",{pathname:u,search:n,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(a,c){let u=a.document.querySelector("base"),n="";if(u&&u.getAttribute("href")){let p=a.location.href,m=p.indexOf("#");n=m===-1?p:p.slice(0,m)}return n+"#"+(typeof c=="string"?c:uc(c))}function o(a,c){us(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return UN(e,t,o,i)}function kr(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function us(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FN(){return Math.random().toString(36).substring(2,10)}function s1(i,e){return{usr:i.state,key:i.key,idx:e}}function Vp(i,e,t=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Cl(e):e,state:t,key:e&&e.key||o||FN()}}function uc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Cl(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let o=i.indexOf("?");o>=0&&(e.search=i.substring(o),i=i.substring(0,o)),i&&(e.pathname=i)}return e}function UN(i,e,t,o={}){let{window:a=document.defaultView,v5Compat:c=!1}=o,u=a.history,n="POP",p=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function v(){n="POP";let M=g(),A=M==null?null:M-m;m=M,p&&p({action:n,location:T.location,delta:A})}function y(M,A){n="PUSH";let x=Vp(T.location,M,A);t(x,M),m=g()+1;let P=s1(x,m),D=T.createHref(x);try{u.pushState(P,"",D)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(D)}c&&p&&p({action:n,location:T.location,delta:1})}function k(M,A){n="REPLACE";let x=Vp(T.location,M,A);t(x,M),m=g();let P=s1(x,m),D=T.createHref(x);u.replaceState(P,"",D),c&&p&&p({action:n,location:T.location,delta:0})}function _(M){let A=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof M=="string"?M:uc(M);return x=x.replace(/ $/,"%20"),kr(A,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,A)}let T={get action(){return n},get location(){return i(a,u)},listen(M){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(n1,v),p=M,()=>{a.removeEventListener(n1,v),p=null}},createHref(M){return e(a,M)},createURL:_,encodeLocation(M){let A=_(M);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:k,go(M){return u.go(M)}};return T}var $N=new Set(["lazy","caseSensitive","path","id","index","children"]);function VN(i){return i.index===!0}function Ig(i,e,t=[],o={}){return i.map((a,c)=>{let u=[...t,String(c)],n=typeof a.id=="string"?a.id:u.join("-");if(kr(a.index!==!0||!a.children,"Cannot specify children on an index route"),kr(!o[n],`Found a route id collision on id "${n}".  Route id's must be globally unique within Data Router usages`),VN(a)){let p={...a,...e(a),id:n};return o[n]=p,p}else{let p={...a,...e(a),id:n,children:void 0};return o[n]=p,a.children&&(p.children=Ig(a.children,e,u,o)),p}})}function Ql(i,e,t="/"){return lg(i,e,t,!1)}function lg(i,e,t,o){let a=typeof e=="string"?Cl(e):e,c=fo(a.pathname||"/",t);if(c==null)return null;let u=eS(i);HN(u);let n=null;for(let p=0;n==null&&p<u.length;++p){let m=iO(c);n=eO(u[p],m,o)}return n}function GN(i,e){let{route:t,pathname:o,params:a}=i;return{id:t.id,pathname:o,params:a,data:e[t.id],handle:t.handle}}function eS(i,e=[],t=[],o=""){let a=(c,u,n)=>{let p={relativePath:n===void 0?c.path||"":n,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};p.relativePath.startsWith("/")&&(kr(p.relativePath.startsWith(o),`Absolute route path "${p.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(o.length));let m=Ro([o,p.relativePath]),g=t.concat(p);c.children&&c.children.length>0&&(kr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),eS(c.children,e,g,m)),!(c.path==null&&!c.index)&&e.push({path:m,score:QN(m,c.index),routesMeta:g})};return i.forEach((c,u)=>{var n;if(c.path===""||!((n=c.path)!=null&&n.includes("?")))a(c,u);else for(let p of tS(c.path))a(c,u,p)}),e}function tS(i){let e=i.split("/");if(e.length===0)return[];let[t,...o]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(o.length===0)return a?[c,""]:[c];let u=tS(o.join("/")),n=[];return n.push(...u.map(p=>p===""?c:[c,p].join("/"))),a&&n.push(...u),n.map(p=>i.startsWith("/")&&p===""?"/":p)}function HN(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:JN(e.routesMeta.map(o=>o.childrenIndex),t.routesMeta.map(o=>o.childrenIndex)))}var WN=/^:[\w-]+$/,qN=3,YN=2,ZN=1,XN=10,KN=-2,a1=i=>i==="*";function QN(i,e){let t=i.split("/"),o=t.length;return t.some(a1)&&(o+=KN),e&&(o+=YN),t.filter(a=>!a1(a)).reduce((a,c)=>a+(WN.test(c)?qN:c===""?ZN:XN),o)}function JN(i,e){return i.length===e.length&&i.slice(0,-1).every((o,a)=>o===e[a])?i[i.length-1]-e[e.length-1]:0}function eO(i,e,t=!1){let{routesMeta:o}=i,a={},c="/",u=[];for(let n=0;n<o.length;++n){let p=o[n],m=n===o.length-1,g=c==="/"?e:e.slice(c.length)||"/",v=Dg({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),y=p.route;if(!v&&m&&t&&!o[o.length-1].route.index&&(v=Dg({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Ro([c,v.pathname]),pathnameBase:sO(Ro([c,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(c=Ro([c,v.pathnameBase]))}return u}function Dg(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,o]=tO(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let c=a[0],u=c.replace(/(.)\/+$/,"$1"),n=a.slice(1);return{params:o.reduce((m,{paramName:g,isOptional:v},y)=>{if(g==="*"){let _=n[y]||"";u=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const k=n[y];return v&&!k?m[g]=void 0:m[g]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:u,pattern:i}}function tO(i,e=!1,t=!0){us(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,n,p)=>(o.push({paramName:n,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),o]}function iO(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return us(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function fo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,o=i.charAt(t);return o&&o!=="/"?null:i.slice(t)||"/"}function rO(i,e="/"){let{pathname:t,search:o="",hash:a=""}=typeof i=="string"?Cl(i):i;return{pathname:t?t.startsWith("/")?t:nO(t,e):e,search:aO(o),hash:oO(a)}}function nO(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Kx(i,e,t,o){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iS(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wy(i){let e=iS(i);return e.map((t,o)=>o===e.length-1?t.pathname:t.pathnameBase)}function Ty(i,e,t,o=!1){let a;typeof i=="string"?a=Cl(i):(a={...i},kr(!a.pathname||!a.pathname.includes("?"),Kx("?","pathname","search",a)),kr(!a.pathname||!a.pathname.includes("#"),Kx("#","pathname","hash",a)),kr(!a.search||!a.search.includes("#"),Kx("#","search","hash",a)));let c=i===""||a.pathname==="",u=c?"/":a.pathname,n;if(u==null)n=t;else{let v=e.length-1;if(!o&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),v-=1;a.pathname=y.join("/")}n=v>=0?e[v]:"/"}let p=rO(a,n),m=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}var Ro=i=>i.join("/").replace(/\/\/+/g,"/"),sO=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),aO=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,oO=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Rg=class{constructor(i,e,t,o=!1){this.status=i,this.statusText=e||"",this.internal=o,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Ey(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var rS=["POST","PUT","PATCH","DELETE"],lO=new Set(rS),cO=["GET",...rS],hO=new Set(cO),uO=new Set([301,302,303,307,308]),dO=new Set([307,308]),Qx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pO={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},s0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fO=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),nS="remix-router-transitions",sS=Symbol("ResetLoaderData");function mO(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";kr(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let o=i.mapRouteProperties||fO,a={},c=Ig(i.routes,o,void 0,a),u,n=i.basename||"/",p=i.dataStrategy||vO,m=i.patchRoutesOnNavigation,g={...i.future},v=null,y=new Set,k=null,_=null,T=null,M=i.hydrationData!=null,A=Ql(c,i.history.location,n),x=null;if(A==null&&!m){let ut=Ya(404,{pathname:i.history.location.pathname}),{matches:bt,route:Pt}=y1(c);A=bt,x={[Pt.id]:ut}}A&&!i.hydrationData&&Zi(A,c,i.history.location.pathname).active&&(A=null);let P;if(A)if(A.some(ut=>ut.route.lazy))P=!1;else if(!A.some(ut=>ut.route.loader))P=!0;else{let ut=i.hydrationData?i.hydrationData.loaderData:null,bt=i.hydrationData?i.hydrationData.errors:null;if(bt){let Pt=A.findIndex(Bt=>bt[Bt.route.id]!==void 0);P=A.slice(0,Pt+1).every(Bt=>!Yb(Bt.route,ut,bt))}else P=A.every(Pt=>!Yb(Pt.route,ut,bt))}else{P=!1,A=[];let ut=Zi(null,c,i.history.location.pathname);ut.active&&ut.matches&&(A=ut.matches)}let D,w={historyAction:i.history.action,location:i.history.location,matches:A,initialized:P,navigation:Qx,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I="POP",N=!1,q,Z=!1,X=new Map,j=null,V=!1,U=!1,L=new Set,R=new Map,G=0,$=-1,F=new Map,H=new Set,W=new Map,ne=new Map,ue=new Set,ie=new Map,oe,Se=null;function ye(){if(v=i.history.listen(({action:ut,location:bt,delta:Pt})=>{if(oe){oe(),oe=void 0;return}us(ie.size===0||Pt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Bt=Ct({currentLocation:w.location,nextLocation:bt,historyAction:ut});if(Bt&&Pt!=null){let qt=new Promise(bi=>{oe=bi});i.history.go(Pt*-1),ft(Bt,{state:"blocked",location:bt,proceed(){ft(Bt,{state:"proceeding",proceed:void 0,reset:void 0,location:bt}),qt.then(()=>i.history.go(Pt))},reset(){let bi=new Map(w.blockers);bi.set(Bt,hp),Q({blockers:bi})}});return}return re(ut,bt)}),t){IO(e,X);let ut=()=>DO(e,X);e.addEventListener("pagehide",ut),j=()=>e.removeEventListener("pagehide",ut)}return w.initialized||re("POP",w.location,{initialHydration:!0}),D}function Ce(){v&&v(),j&&j(),y.clear(),q&&q.abort(),w.fetchers.forEach((ut,bt)=>je(bt)),w.blockers.forEach((ut,bt)=>Rt(bt))}function K(ut){return y.add(ut),()=>y.delete(ut)}function Q(ut,bt={}){w={...w,...ut};let Pt=[],Bt=[];w.fetchers.forEach((qt,bi)=>{qt.state==="idle"&&(ue.has(bi)?Pt.push(bi):Bt.push(bi))}),ue.forEach(qt=>{!w.fetchers.has(qt)&&!R.has(qt)&&Pt.push(qt)}),[...y].forEach(qt=>qt(w,{deletedFetchers:Pt,viewTransitionOpts:bt.viewTransitionOpts,flushSync:bt.flushSync===!0})),Pt.forEach(qt=>je(qt)),Bt.forEach(qt=>w.fetchers.delete(qt))}function ae(ut,bt,{flushSync:Pt}={}){var xe,Le;let Bt=w.actionData!=null&&w.navigation.formMethod!=null&&so(w.navigation.formMethod)&&w.navigation.state==="loading"&&((xe=ut.state)==null?void 0:xe._isRedirect)!==!0,qt;bt.actionData?Object.keys(bt.actionData).length>0?qt=bt.actionData:qt=null:Bt?qt=w.actionData:qt=null;let bi=bt.loaderData?m1(w.loaderData,bt.loaderData,bt.matches||[],bt.errors):w.loaderData,Oi=w.blockers;Oi.size>0&&(Oi=new Map(Oi),Oi.forEach((Ue,Ke)=>Oi.set(Ke,hp)));let di=N===!0||w.navigation.formMethod!=null&&so(w.navigation.formMethod)&&((Le=ut.state)==null?void 0:Le._isRedirect)!==!0;u&&(c=u,u=void 0),V||I==="POP"||(I==="PUSH"?i.history.push(ut,ut.state):I==="REPLACE"&&i.history.replace(ut,ut.state));let He;if(I==="POP"){let Ue=X.get(w.location.pathname);Ue&&Ue.has(ut.pathname)?He={currentLocation:w.location,nextLocation:ut}:X.has(ut.pathname)&&(He={currentLocation:ut,nextLocation:w.location})}else if(Z){let Ue=X.get(w.location.pathname);Ue?Ue.add(ut.pathname):(Ue=new Set([ut.pathname]),X.set(w.location.pathname,Ue)),He={currentLocation:w.location,nextLocation:ut}}Q({...bt,actionData:qt,loaderData:bi,historyAction:I,location:ut,initialized:!0,navigation:Qx,revalidation:"idle",restoreScrollPosition:ar(ut,bt.matches||w.matches),preventScrollReset:di,blockers:Oi},{viewTransitionOpts:He,flushSync:Pt===!0}),I="POP",N=!1,Z=!1,V=!1,U=!1,Se==null||Se.resolve(),Se=null}async function ve(ut,bt){if(typeof ut=="number"){i.history.go(ut);return}let Pt=qb(w.location,w.matches,n,ut,bt==null?void 0:bt.fromRouteId,bt==null?void 0:bt.relative),{path:Bt,submission:qt,error:bi}=o1(!1,Pt,bt),Oi=w.location,di=Vp(w.location,Bt,bt&&bt.state);di={...di,...i.history.encodeLocation(di)};let He=bt&&bt.replace!=null?bt.replace:void 0,xe="PUSH";He===!0?xe="REPLACE":He===!1||qt!=null&&so(qt.formMethod)&&qt.formAction===w.location.pathname+w.location.search&&(xe="REPLACE");let Le=bt&&"preventScrollReset"in bt?bt.preventScrollReset===!0:void 0,Ue=(bt&&bt.flushSync)===!0,Ke=Ct({currentLocation:Oi,nextLocation:di,historyAction:xe});if(Ke){ft(Ke,{state:"blocked",location:di,proceed(){ft(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:di}),ve(ut,bt)},reset(){let st=new Map(w.blockers);st.set(Ke,hp),Q({blockers:st})}});return}await re(xe,di,{submission:qt,pendingError:bi,preventScrollReset:Le,replace:bt&&bt.replace,enableViewTransition:bt&&bt.viewTransition,flushSync:Ue})}function J(){Se||(Se=RO()),fe(),Q({revalidation:"loading"});let ut=Se.promise;return w.navigation.state==="submitting"?ut:w.navigation.state==="idle"?(re(w.historyAction,w.location,{startUninterruptedRevalidation:!0}),ut):(re(I||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:Z===!0}),ut)}async function re(ut,bt,Pt){q&&q.abort(),q=null,I=ut,V=(Pt&&Pt.startUninterruptedRevalidation)===!0,Ht(w.location,w.matches),N=(Pt&&Pt.preventScrollReset)===!0,Z=(Pt&&Pt.enableViewTransition)===!0;let Bt=u||c,qt=Pt&&Pt.overrideNavigation,bi=Ql(Bt,bt,n),Oi=(Pt&&Pt.flushSync)===!0,di=Zi(bi,Bt,bt.pathname);if(di.active&&di.matches&&(bi=di.matches),!bi){let{error:ct,notFoundMatches:ot,route:nt}=Tt(bt.pathname);ae(bt,{matches:ot,loaderData:{},errors:{[nt.id]:ct}},{flushSync:Oi});return}if(w.initialized&&!U&&SO(w.location,bt)&&!(Pt&&Pt.submission&&so(Pt.submission.formMethod))){ae(bt,{matches:bi},{flushSync:Oi});return}q=new AbortController;let He=bu(i.history,bt,q.signal,Pt&&Pt.submission),xe;if(Pt&&Pt.pendingError)xe=[th(bi).route.id,{type:"error",error:Pt.pendingError}];else if(Pt&&Pt.submission&&so(Pt.submission.formMethod)){let ct=await ce(He,bt,Pt.submission,bi,di.active,{replace:Pt.replace,flushSync:Oi});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[ot,nt]=ct.pendingActionResult;if(La(nt)&&Ey(nt.error)&&nt.error.status===404){q=null,ae(bt,{matches:ct.matches,loaderData:{},errors:{[ot]:nt.error}});return}}bi=ct.matches||bi,xe=ct.pendingActionResult,qt=Jx(bt,Pt.submission),Oi=!1,di.active=!1,He=bu(i.history,He.url,He.signal)}let{shortCircuited:Le,matches:Ue,loaderData:Ke,errors:st}=await ge(He,bt,bi,di.active,qt,Pt&&Pt.submission,Pt&&Pt.fetcherSubmission,Pt&&Pt.replace,Pt&&Pt.initialHydration===!0,Oi,xe);Le||(q=null,ae(bt,{matches:Ue||bi,...g1(xe),loaderData:Ke,errors:st}))}async function ce(ut,bt,Pt,Bt,qt,bi={}){fe();let Oi=MO(bt,Pt);if(Q({navigation:Oi},{flushSync:bi.flushSync===!0}),qt){let xe=await mr(Bt,bt.pathname,ut.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let Le=th(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[Le,{type:"error",error:xe.error}]}}else if(xe.matches)Bt=xe.matches;else{let{notFoundMatches:Le,error:Ue,route:Ke}=Tt(bt.pathname);return{matches:Le,pendingActionResult:[Ke.id,{type:"error",error:Ue}]}}}let di,He=wp(Bt,bt);if(!He.route.action&&!He.route.lazy)di={type:"error",error:Ya(405,{method:ut.method,pathname:bt.pathname,routeId:He.route.id})};else if(di=(await ke("action",w,ut,[He],Bt,null))[He.route.id],ut.signal.aborted)return{shortCircuited:!0};if(rh(di)){let xe;return bi&&bi.replace!=null?xe=bi.replace:xe=d1(di.response.headers.get("Location"),new URL(ut.url),n)===w.location.pathname+w.location.search,await Ge(ut,di,!0,{submission:Pt,replace:xe}),{shortCircuited:!0}}if(La(di)){let xe=th(Bt,He.route.id);return(bi&&bi.replace)!==!0&&(I="PUSH"),{matches:Bt,pendingActionResult:[xe.route.id,di]}}return{matches:Bt,pendingActionResult:[He.route.id,di]}}async function ge(ut,bt,Pt,Bt,qt,bi,Oi,di,He,xe,Le){let Ue=qt||Jx(bt,bi),Ke=bi||Oi||b1(Ue),st=!V&&!He;if(Bt){if(st){let Pi=_e(Le);Q({navigation:Ue,...Pi!==void 0?{actionData:Pi}:{}},{flushSync:xe})}let _i=await mr(Pt,bt.pathname,ut.signal);if(_i.type==="aborted")return{shortCircuited:!0};if(_i.type==="error"){let Pi=th(_i.partialMatches).route.id;return{matches:_i.partialMatches,loaderData:{},errors:{[Pi]:_i.error}}}else if(_i.matches)Pt=_i.matches;else{let{error:Pi,notFoundMatches:Ui,route:ji}=Tt(bt.pathname);return{matches:Ui,loaderData:{},errors:{[ji.id]:Pi}}}}let ct=u||c,[ot,nt]=c1(i.history,w,Pt,Ke,bt,He===!0,U,L,ue,W,H,ct,n,Le);if($=++G,ot.length===0&&nt.length===0){let _i=dt();return ae(bt,{matches:Pt,loaderData:{},errors:Le&&La(Le[1])?{[Le[0]]:Le[1].error}:null,...g1(Le),..._i?{fetchers:new Map(w.fetchers)}:{}},{flushSync:xe}),{shortCircuited:!0}}if(st){let _i={};if(!Bt){_i.navigation=Ue;let Pi=_e(Le);Pi!==void 0&&(_i.actionData=Pi)}nt.length>0&&(_i.fetchers=ze(nt)),Q(_i,{flushSync:xe})}nt.forEach(_i=>{et(_i.key),_i.controller&&R.set(_i.key,_i.controller)});let mt=()=>nt.forEach(_i=>et(_i.key));q&&q.signal.addEventListener("abort",mt);let{loaderResults:kt,fetcherResults:zt}=await me(w,Pt,ot,nt,ut);if(ut.signal.aborted)return{shortCircuited:!0};q&&q.signal.removeEventListener("abort",mt),nt.forEach(_i=>R.delete(_i.key));let Dt=Gm(kt);if(Dt)return await Ge(ut,Dt.result,!0,{replace:di}),{shortCircuited:!0};if(Dt=Gm(zt),Dt)return H.add(Dt.key),await Ge(ut,Dt.result,!0,{replace:di}),{shortCircuited:!0};let{loaderData:oi,errors:Kt}=f1(w,Pt,kt,Le,nt,zt);He&&w.errors&&(Kt={...w.errors,...Kt});let pi=dt(),vi=gt($),Fi=pi||vi||nt.length>0;return{matches:Pt,loaderData:oi,errors:Kt,...Fi?{fetchers:new Map(w.fetchers)}:{}}}function _e(ut){if(ut&&!La(ut[1]))return{[ut[0]]:ut[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function ze(ut){return ut.forEach(bt=>{let Pt=w.fetchers.get(bt.key),Bt=up(void 0,Pt?Pt.data:void 0);w.fetchers.set(bt.key,Bt)}),new Map(w.fetchers)}async function Te(ut,bt,Pt,Bt){et(ut);let qt=(Bt&&Bt.flushSync)===!0,bi=u||c,Oi=qb(w.location,w.matches,n,Pt,bt,Bt==null?void 0:Bt.relative),di=Ql(bi,Oi,n),He=Zi(di,bi,Oi);if(He.active&&He.matches&&(di=He.matches),!di){De(ut,bt,Ya(404,{pathname:Oi}),{flushSync:qt});return}let{path:xe,submission:Le,error:Ue}=o1(!0,Oi,Bt);if(Ue){De(ut,bt,Ue,{flushSync:qt});return}let Ke=wp(di,xe),st=(Bt&&Bt.preventScrollReset)===!0;if(Le&&so(Le.formMethod)){await Ie(ut,bt,xe,Ke,di,He.active,qt,st,Le);return}W.set(ut,{routeId:bt,path:xe}),await Be(ut,bt,xe,Ke,di,He.active,qt,st,Le)}async function Ie(ut,bt,Pt,Bt,qt,bi,Oi,di,He){fe(),W.delete(ut);function xe(hr){if(!hr.route.action&&!hr.route.lazy){let Ur=Ya(405,{method:He.formMethod,pathname:Pt,routeId:bt});return De(ut,bt,Ur,{flushSync:Oi}),!0}return!1}if(!bi&&xe(Bt))return;let Le=w.fetchers.get(ut);Ae(ut,PO(He,Le),{flushSync:Oi});let Ue=new AbortController,Ke=bu(i.history,Pt,Ue.signal,He);if(bi){let hr=await mr(qt,Pt,Ke.signal);if(hr.type==="aborted")return;if(hr.type==="error"){De(ut,bt,hr.error,{flushSync:Oi});return}else if(hr.matches){if(qt=hr.matches,Bt=wp(qt,Pt),xe(Bt))return}else{De(ut,bt,Ya(404,{pathname:Pt}),{flushSync:Oi});return}}R.set(ut,Ue);let st=G,ot=(await ke("action",w,Ke,[Bt],qt,ut))[Bt.route.id];if(Ke.signal.aborted){R.get(ut)===Ue&&R.delete(ut);return}if(ue.has(ut)){if(rh(ot)||La(ot)){Ae(ut,ql(void 0));return}}else{if(rh(ot))if(R.delete(ut),$>st){Ae(ut,ql(void 0));return}else return H.add(ut),Ae(ut,up(He)),Ge(Ke,ot,!1,{fetcherSubmission:He,preventScrollReset:di});if(La(ot)){De(ut,bt,ot.error);return}}let nt=w.navigation.location||w.location,mt=bu(i.history,nt,Ue.signal),kt=u||c,zt=w.navigation.state!=="idle"?Ql(kt,w.navigation.location,n):w.matches;kr(zt,"Didn't find any matches after fetcher action");let Dt=++G;F.set(ut,Dt);let oi=up(He,ot.data);w.fetchers.set(ut,oi);let[Kt,pi]=c1(i.history,w,zt,He,nt,!1,U,L,ue,W,H,kt,n,[Bt.route.id,ot]);pi.filter(hr=>hr.key!==ut).forEach(hr=>{let Ur=hr.key,gn=w.fetchers.get(Ur),jn=up(void 0,gn?gn.data:void 0);w.fetchers.set(Ur,jn),et(Ur),hr.controller&&R.set(Ur,hr.controller)}),Q({fetchers:new Map(w.fetchers)});let vi=()=>pi.forEach(hr=>et(hr.key));Ue.signal.addEventListener("abort",vi);let{loaderResults:Fi,fetcherResults:_i}=await me(w,zt,Kt,pi,mt);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",vi),F.delete(ut),R.delete(ut),pi.forEach(hr=>R.delete(hr.key));let Pi=Gm(Fi);if(Pi)return Ge(mt,Pi.result,!1,{preventScrollReset:di});if(Pi=Gm(_i),Pi)return H.add(Pi.key),Ge(mt,Pi.result,!1,{preventScrollReset:di});let{loaderData:Ui,errors:ji}=f1(w,zt,Fi,void 0,pi,_i);if(w.fetchers.has(ut)){let hr=ql(ot.data);w.fetchers.set(ut,hr)}gt(Dt),w.navigation.state==="loading"&&Dt>$?(kr(I,"Expected pending action"),q&&q.abort(),ae(w.navigation.location,{matches:zt,loaderData:Ui,errors:ji,fetchers:new Map(w.fetchers)})):(Q({errors:ji,loaderData:m1(w.loaderData,Ui,zt,ji),fetchers:new Map(w.fetchers)}),U=!1)}async function Be(ut,bt,Pt,Bt,qt,bi,Oi,di,He){let xe=w.fetchers.get(ut);Ae(ut,up(He,xe?xe.data:void 0),{flushSync:Oi});let Le=new AbortController,Ue=bu(i.history,Pt,Le.signal);if(bi){let ot=await mr(qt,Pt,Ue.signal);if(ot.type==="aborted")return;if(ot.type==="error"){De(ut,bt,ot.error,{flushSync:Oi});return}else if(ot.matches)qt=ot.matches,Bt=wp(qt,Pt);else{De(ut,bt,Ya(404,{pathname:Pt}),{flushSync:Oi});return}}R.set(ut,Le);let Ke=G,ct=(await ke("loader",w,Ue,[Bt],qt,ut))[Bt.route.id];if(R.get(ut)===Le&&R.delete(ut),!Ue.signal.aborted){if(ue.has(ut)){Ae(ut,ql(void 0));return}if(rh(ct))if($>Ke){Ae(ut,ql(void 0));return}else{H.add(ut),await Ge(Ue,ct,!1,{preventScrollReset:di});return}if(La(ct)){De(ut,bt,ct.error);return}Ae(ut,ql(ct.data))}}async function Ge(ut,bt,Pt,{submission:Bt,fetcherSubmission:qt,preventScrollReset:bi,replace:Oi}={}){bt.response.headers.has("X-Remix-Revalidate")&&(U=!0);let di=bt.response.headers.get("Location");kr(di,"Expected a Location header on the redirect Response"),di=d1(di,new URL(ut.url),n);let He=Vp(w.location,di,{_isRedirect:!0});if(t){let ct=!1;if(bt.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(s0.test(di)){const ot=i.history.createURL(di);ct=ot.origin!==e.location.origin||fo(ot.pathname,n)==null}if(ct){Oi?e.location.replace(di):e.location.assign(di);return}}q=null;let xe=Oi===!0||bt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Le,formAction:Ue,formEncType:Ke}=w.navigation;!Bt&&!qt&&Le&&Ue&&Ke&&(Bt=b1(w.navigation));let st=Bt||qt;if(dO.has(bt.response.status)&&st&&so(st.formMethod))await re(xe,He,{submission:{...st,formAction:di},preventScrollReset:bi||N,enableViewTransition:Pt?Z:void 0});else{let ct=Jx(He,Bt);await re(xe,He,{overrideNavigation:ct,fetcherSubmission:qt,preventScrollReset:bi||N,enableViewTransition:Pt?Z:void 0})}}async function ke(ut,bt,Pt,Bt,qt,bi){let Oi,di={};try{Oi=await _O(p,ut,bt,Pt,Bt,qt,bi,a,o)}catch(He){return Bt.forEach(xe=>{di[xe.route.id]={type:"error",error:He}}),di}for(let[He,xe]of Object.entries(Oi))if(kO(xe)){let Le=xe.result;di[He]={type:"redirect",response:EO(Le,Pt,He,qt,n)}}else di[He]=await TO(xe);return di}async function me(ut,bt,Pt,Bt,qt){let bi=ke("loader",ut,qt,Pt,bt,null),Oi=Promise.all(Bt.map(async xe=>{if(xe.matches&&xe.match&&xe.controller){let Ue=(await ke("loader",ut,bu(i.history,xe.path,xe.controller.signal),[xe.match],xe.matches,xe.key))[xe.match.route.id];return{[xe.key]:Ue}}else return Promise.resolve({[xe.key]:{type:"error",error:Ya(404,{pathname:xe.path})}})})),di=await bi,He=(await Oi).reduce((xe,Le)=>Object.assign(xe,Le),{});return{loaderResults:di,fetcherResults:He}}function fe(){U=!0,W.forEach((ut,bt)=>{R.has(bt)&&L.add(bt),et(bt)})}function Ae(ut,bt,Pt={}){w.fetchers.set(ut,bt),Q({fetchers:new Map(w.fetchers)},{flushSync:(Pt&&Pt.flushSync)===!0})}function De(ut,bt,Pt,Bt={}){let qt=th(w.matches,bt);je(ut),Q({errors:{[qt.route.id]:Pt},fetchers:new Map(w.fetchers)},{flushSync:(Bt&&Bt.flushSync)===!0})}function Pe(ut){return ne.set(ut,(ne.get(ut)||0)+1),ue.has(ut)&&ue.delete(ut),w.fetchers.get(ut)||pO}function je(ut){let bt=w.fetchers.get(ut);R.has(ut)&&!(bt&&bt.state==="loading"&&F.has(ut))&&et(ut),W.delete(ut),F.delete(ut),H.delete(ut),ue.delete(ut),L.delete(ut),w.fetchers.delete(ut)}function Xe(ut){let bt=(ne.get(ut)||0)-1;bt<=0?(ne.delete(ut),ue.add(ut)):ne.set(ut,bt),Q({fetchers:new Map(w.fetchers)})}function et(ut){let bt=R.get(ut);bt&&(bt.abort(),R.delete(ut))}function rt(ut){for(let bt of ut){let Pt=Pe(bt),Bt=ql(Pt.data);w.fetchers.set(bt,Bt)}}function dt(){let ut=[],bt=!1;for(let Pt of H){let Bt=w.fetchers.get(Pt);kr(Bt,`Expected fetcher: ${Pt}`),Bt.state==="loading"&&(H.delete(Pt),ut.push(Pt),bt=!0)}return rt(ut),bt}function gt(ut){let bt=[];for(let[Pt,Bt]of F)if(Bt<ut){let qt=w.fetchers.get(Pt);kr(qt,`Expected fetcher: ${Pt}`),qt.state==="loading"&&(et(Pt),F.delete(Pt),bt.push(Pt))}return rt(bt),bt.length>0}function wt(ut,bt){let Pt=w.blockers.get(ut)||hp;return ie.get(ut)!==bt&&ie.set(ut,bt),Pt}function Rt(ut){w.blockers.delete(ut),ie.delete(ut)}function ft(ut,bt){let Pt=w.blockers.get(ut)||hp;kr(Pt.state==="unblocked"&&bt.state==="blocked"||Pt.state==="blocked"&&bt.state==="blocked"||Pt.state==="blocked"&&bt.state==="proceeding"||Pt.state==="blocked"&&bt.state==="unblocked"||Pt.state==="proceeding"&&bt.state==="unblocked",`Invalid blocker state transition: ${Pt.state} -> ${bt.state}`);let Bt=new Map(w.blockers);Bt.set(ut,bt),Q({blockers:Bt})}function Ct({currentLocation:ut,nextLocation:bt,historyAction:Pt}){if(ie.size===0)return;ie.size>1&&us(!1,"A router only supports one blocker at a time");let Bt=Array.from(ie.entries()),[qt,bi]=Bt[Bt.length-1],Oi=w.blockers.get(qt);if(!(Oi&&Oi.state==="proceeding")&&bi({currentLocation:ut,nextLocation:bt,historyAction:Pt}))return qt}function Tt(ut){let bt=Ya(404,{pathname:ut}),Pt=u||c,{matches:Bt,route:qt}=y1(Pt);return{notFoundMatches:Bt,route:qt,error:bt}}function si(ut,bt,Pt){if(k=ut,T=bt,_=Pt||null,!M&&w.navigation===Qx){M=!0;let Bt=ar(w.location,w.matches);Bt!=null&&Q({restoreScrollPosition:Bt})}return()=>{k=null,T=null,_=null}}function ui(ut,bt){return _&&_(ut,bt.map(Bt=>GN(Bt,w.loaderData)))||ut.key}function Ht(ut,bt){if(k&&T){let Pt=ui(ut,bt);k[Pt]=T()}}function ar(ut,bt){if(k){let Pt=ui(ut,bt),Bt=k[Pt];if(typeof Bt=="number")return Bt}return null}function Zi(ut,bt,Pt){if(m)if(ut){if(Object.keys(ut[0].params).length>0)return{active:!0,matches:lg(bt,Pt,n,!0)}}else return{active:!0,matches:lg(bt,Pt,n,!0)||[]};return{active:!1,matches:null}}async function mr(ut,bt,Pt){if(!m)return{type:"success",matches:ut};let Bt=ut;for(;;){let qt=u==null,bi=u||c,Oi=a;try{await m({path:bt,matches:Bt,patch:(xe,Le)=>{Pt.aborted||u1(xe,Le,bi,Oi,o)}})}catch(xe){return{type:"error",error:xe,partialMatches:Bt}}finally{qt&&!Pt.aborted&&(c=[...c])}if(Pt.aborted)return{type:"aborted"};let di=Ql(bi,bt,n);if(di)return{type:"success",matches:di};let He=lg(bi,bt,n,!0);if(!He||Bt.length===He.length&&Bt.every((xe,Le)=>xe.route.id===He[Le].route.id))return{type:"success",matches:null};Bt=He}}function zr(ut){a={},u=Ig(ut,o,void 0,a)}function ir(ut,bt){let Pt=u==null;u1(ut,bt,u||c,a,o),Pt&&(c=[...c],Q({}))}return D={get basename(){return n},get future(){return g},get state(){return w},get routes(){return c},get window(){return e},initialize:ye,subscribe:K,enableScrollRestoration:si,navigate:ve,fetch:Te,revalidate:J,createHref:ut=>i.history.createHref(ut),encodeLocation:ut=>i.history.encodeLocation(ut),getFetcher:Pe,deleteFetcher:Xe,dispose:Ce,getBlocker:wt,deleteBlocker:Rt,patchRoutes:ir,_internalFetchControllers:R,_internalSetRoutes:zr},D}function gO(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function qb(i,e,t,o,a,c){let u,n;if(a){u=[];for(let m of e)if(u.push(m),m.route.id===a){n=m;break}}else u=e,n=e[e.length-1];let p=Ty(o||".",wy(u),fo(i.pathname,t)||i.pathname,c==="path");if(o==null&&(p.search=i.search,p.hash=i.hash),(o==null||o===""||o===".")&&n){let m=a0(p.search);if(n.route.index&&!m)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!n.route.index&&m){let g=new URLSearchParams(p.search),v=g.getAll("index");g.delete("index"),v.filter(k=>k).forEach(k=>g.append("index",k));let y=g.toString();p.search=y?`?${y}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:Ro([t,p.pathname])),uc(p)}function o1(i,e,t){if(!t||!gO(t))return{path:e};if(t.formMethod&&!AO(t.formMethod))return{path:e,error:Ya(405,{method:t.formMethod})};let o=()=>({path:e,error:Ya(400,{type:"invalid-body"})}),c=(t.formMethod||"get").toUpperCase(),u=oS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!so(c))return o();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[k,_])=>`${y}${k}=${_}
`,""):String(t.body);return{path:e,submission:{formMethod:c,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!so(c))return o();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:c,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return o()}}}kr(typeof FormData=="function","FormData is not available in this environment");let n,p;if(t.formData)n=Zb(t.formData),p=t.formData;else if(t.body instanceof FormData)n=Zb(t.body),p=t.body;else if(t.body instanceof URLSearchParams)n=t.body,p=p1(n);else if(t.body==null)n=new URLSearchParams,p=new FormData;else try{n=new URLSearchParams(t.body),p=p1(n)}catch{return o()}let m={formMethod:c,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(so(m.formMethod))return{path:e,submission:m};let g=Cl(e);return i&&g.search&&a0(g.search)&&n.append("index",""),g.search=`?${n}`,{path:uc(g),submission:m}}function l1(i,e,t=!1){let o=i.findIndex(a=>a.route.id===e);return o>=0?i.slice(0,t?o+1:o):i}function c1(i,e,t,o,a,c,u,n,p,m,g,v,y,k){let _=k?La(k[1])?k[1].error:k[1].data:void 0,T=i.createURL(e.location),M=i.createURL(a),A=t;c&&e.errors?A=l1(t,Object.keys(e.errors)[0],!0):k&&La(k[1])&&(A=l1(t,k[0]));let x=k?k[1].statusCode:void 0,P=x&&x>=400,D=A.filter((I,N)=>{let{route:q}=I;if(q.lazy)return!0;if(q.loader==null)return!1;if(c)return Yb(q,e.loaderData,e.errors);if(yO(e.loaderData,e.matches[N],I))return!0;let Z=e.matches[N],X=I;return h1(I,{currentUrl:T,currentParams:Z.params,nextUrl:M,nextParams:X.params,...o,actionResult:_,actionStatus:x,defaultShouldRevalidate:P?!1:u||T.pathname+T.search===M.pathname+M.search||T.search!==M.search||xO(Z,X)})}),w=[];return m.forEach((I,N)=>{if(c||!t.some(V=>V.route.id===I.routeId)||p.has(N))return;let q=Ql(v,I.path,y);if(!q){w.push({key:N,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let Z=e.fetchers.get(N),X=wp(q,I.path),j=!1;g.has(N)?j=!1:n.has(N)?(n.delete(N),j=!0):Z&&Z.state!=="idle"&&Z.data===void 0?j=u:j=h1(X,{currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:M,nextParams:t[t.length-1].params,...o,actionResult:_,actionStatus:x,defaultShouldRevalidate:P?!1:u}),j&&w.push({key:N,routeId:I.routeId,path:I.path,matches:q,match:X,controller:new AbortController})}),[D,w]}function Yb(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let o=e!=null&&e[i.id]!==void 0,a=t!=null&&t[i.id]!==void 0;return!o&&a?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!o&&!a}function yO(i,e,t){let o=!e||t.route.id!==e.route.id,a=!i.hasOwnProperty(t.route.id);return o||a}function xO(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function h1(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function u1(i,e,t,o,a){let c;if(i){let p=o[i];kr(p,`No route found to patch children into: routeId = ${i}`),p.children||(p.children=[]),c=p.children}else c=t;let u=e.filter(p=>!c.some(m=>aS(p,m))),n=Ig(u,a,[i||"_","patch",String((c==null?void 0:c.length)||"0")],o);c.push(...n)}function aS(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,o)=>{var a;return(a=e.children)==null?void 0:a.some(c=>aS(t,c))}):!1}async function bO(i,e,t){if(!i.lazy)return;let o=await i.lazy();if(!i.lazy)return;let a=t[i.id];kr(a,"No route found in manifest");let c={};for(let u in o){let p=a[u]!==void 0&&u!=="hasErrorBoundary";us(!p,`Route "${a.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!$N.has(u)&&(c[u]=o[u])}Object.assign(a,c),Object.assign(a,{...e(a),lazy:void 0})}async function vO({matches:i}){let e=i.filter(o=>o.shouldLoad);return(await Promise.all(e.map(o=>o.resolve()))).reduce((o,a,c)=>Object.assign(o,{[e[c].route.id]:a}),{})}async function _O(i,e,t,o,a,c,u,n,p,m){let g=c.map(k=>k.route.lazy?bO(k.route,p,n):void 0),v=c.map((k,_)=>{let T=g[_],M=a.some(x=>x.route.id===k.route.id);return{...k,shouldLoad:M,resolve:async x=>(x&&o.method==="GET"&&(k.route.lazy||k.route.loader)&&(M=!0),M?wO(e,o,k,T,x,m):Promise.resolve({type:"data",result:void 0}))}}),y=await i({matches:v,request:o,params:c[0].params,fetcherKey:u,context:m});try{await Promise.all(g)}catch{}return y}async function wO(i,e,t,o,a,c){let u,n,p=m=>{let g,v=new Promise((_,T)=>g=T);n=()=>g(),e.signal.addEventListener("abort",n);let y=_=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:c},..._!==void 0?[_]:[]),k=(async()=>{try{return{type:"data",result:await(a?a(T=>y(T)):y())}}catch(_){return{type:"error",result:_}}})();return Promise.race([k,v])};try{let m=t.route[i];if(o)if(m){let g,[v]=await Promise.all([p(m).catch(y=>{g=y}),o]);if(g!==void 0)throw g;u=v}else if(await o,m=t.route[i],m)u=await p(m);else if(i==="action"){let g=new URL(e.url),v=g.pathname+g.search;throw Ya(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)u=await p(m);else{let g=new URL(e.url),v=g.pathname+g.search;throw Ya(404,{pathname:v})}}catch(m){return{type:"error",result:m}}finally{n&&e.signal.removeEventListener("abort",n)}return u}async function TO(i){var o,a,c,u;let{result:e,type:t}=i;if(lS(e)){let n;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?n=null:n=await e.json():n=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Rg(e.status,e.statusText,n),statusCode:e.status,headers:e.headers}:{type:"data",data:n,statusCode:e.status,headers:e.headers}}if(t==="error"){if(x1(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(o=e.init)==null?void 0:o.status};e=new Rg(((a=e.init)==null?void 0:a.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Ey(e)?e.status:void 0}}return x1(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function EO(i,e,t,o,a){let c=i.headers.get("Location");if(kr(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!s0.test(c)){let u=o.slice(0,o.findIndex(n=>n.route.id===t)+1);c=qb(new URL(e.url),u,a,c),i.headers.set("Location",c)}return i}function d1(i,e,t){if(s0.test(i)){let o=i,a=o.startsWith("//")?new URL(e.protocol+o):new URL(o),c=fo(a.pathname,t)!=null;if(a.origin===e.origin&&c)return a.pathname+a.search+a.hash}return i}function bu(i,e,t,o){let a=i.createURL(oS(e)).toString(),c={signal:t};if(o&&so(o.formMethod)){let{formMethod:u,formEncType:n}=o;c.method=u.toUpperCase(),n==="application/json"?(c.headers=new Headers({"Content-Type":n}),c.body=JSON.stringify(o.json)):n==="text/plain"?c.body=o.text:n==="application/x-www-form-urlencoded"&&o.formData?c.body=Zb(o.formData):c.body=o.formData}return new Request(a,c)}function Zb(i){let e=new URLSearchParams;for(let[t,o]of i.entries())e.append(t,typeof o=="string"?o:o.name);return e}function p1(i){let e=new FormData;for(let[t,o]of i.entries())e.append(t,o);return e}function CO(i,e,t,o=!1,a=!1){let c={},u=null,n,p=!1,m={},g=t&&La(t[1])?t[1].error:void 0;return i.forEach(v=>{if(!(v.route.id in e))return;let y=v.route.id,k=e[y];if(kr(!rh(k),"Cannot handle redirect results in processLoaderData"),La(k)){let _=k.error;if(g!==void 0&&(_=g,g=void 0),u=u||{},a)u[y]=_;else{let T=th(i,y);u[T.route.id]==null&&(u[T.route.id]=_)}o||(c[y]=sS),p||(p=!0,n=Ey(k.error)?k.error.status:500),k.headers&&(m[y]=k.headers)}else c[y]=k.data,k.statusCode&&k.statusCode!==200&&!p&&(n=k.statusCode),k.headers&&(m[y]=k.headers)}),g!==void 0&&t&&(u={[t[0]]:g},c[t[0]]=void 0),{loaderData:c,errors:u,statusCode:n||200,loaderHeaders:m}}function f1(i,e,t,o,a,c){let{loaderData:u,errors:n}=CO(e,t,o);return a.forEach(p=>{let{key:m,match:g,controller:v}=p,y=c[m];if(kr(y,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(La(y)){let k=th(i.matches,g==null?void 0:g.route.id);n&&n[k.route.id]||(n={...n,[k.route.id]:y.error}),i.fetchers.delete(m)}else if(rh(y))kr(!1,"Unhandled fetcher revalidation redirect");else{let k=ql(y.data);i.fetchers.set(m,k)}}),{loaderData:u,errors:n}}function m1(i,e,t,o){let a=Object.entries(e).filter(([,c])=>c!==sS).reduce((c,[u,n])=>(c[u]=n,c),{});for(let c of t){let u=c.route.id;if(!e.hasOwnProperty(u)&&i.hasOwnProperty(u)&&c.route.loader&&(a[u]=i[u]),o&&o.hasOwnProperty(u))break}return a}function g1(i){return i?La(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function th(i,e){return(e?i.slice(0,i.findIndex(o=>o.route.id===e)+1):[...i]).reverse().find(o=>o.route.hasErrorBoundary===!0)||i[0]}function y1(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ya(i,{pathname:e,routeId:t,method:o,type:a,message:c}={}){let u="Unknown Server Error",n="Unknown @remix-run/router error";return i===400?(u="Bad Request",o&&e&&t?n=`You made a ${o} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(n="Unable to encode submission body")):i===403?(u="Forbidden",n=`Route "${t}" does not match URL "${e}"`):i===404?(u="Not Found",n=`No route matches URL "${e}"`):i===405&&(u="Method Not Allowed",o&&e&&t?n=`You made a ${o.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:o&&(n=`Invalid request method "${o.toUpperCase()}"`)),new Rg(i||500,u,new Error(n),!0)}function Gm(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[o,a]=e[t];if(rh(a))return{key:o,result:a}}}function oS(i){let e=typeof i=="string"?Cl(i):i;return uc({...e,hash:""})}function SO(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function kO(i){return lS(i.result)&&uO.has(i.result.status)}function La(i){return i.type==="error"}function rh(i){return(i&&i.type)==="redirect"}function x1(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function lS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function AO(i){return hO.has(i.toUpperCase())}function so(i){return lO.has(i.toUpperCase())}function a0(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function wp(i,e){let t=typeof e=="string"?Cl(e).search:e.search;if(i[i.length-1].route.index&&a0(t||""))return i[i.length-1];let o=iS(i);return o[o.length-1]}function b1(i){let{formMethod:e,formAction:t,formEncType:o,text:a,formData:c,json:u}=i;if(!(!e||!t||!o)){if(a!=null)return{formMethod:e,formAction:t,formEncType:o,formData:void 0,json:void 0,text:a};if(c!=null)return{formMethod:e,formAction:t,formEncType:o,formData:c,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:o,formData:void 0,json:u,text:void 0}}}function Jx(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MO(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function up(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PO(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function ql(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function IO(i,e){try{let t=i.sessionStorage.getItem(nS);if(t){let o=JSON.parse(t);for(let[a,c]of Object.entries(o||{}))c&&Array.isArray(c)&&e.set(a,new Set(c||[]))}}catch{}}function DO(i,e){if(e.size>0){let t={};for(let[o,a]of e)t[o]=[...a];try{i.sessionStorage.setItem(nS,JSON.stringify(t))}catch(o){us(!1,`Failed to save applied view transitions in sessionStorage (${o}).`)}}}function RO(){let i,e,t=new Promise((o,a)=>{i=async c=>{o(c);try{await t}catch{}},e=async c=>{a(c);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var Mh=$e.createContext(null);Mh.displayName="DataRouter";var Cf=$e.createContext(null);Cf.displayName="DataRouterState";var o0=$e.createContext({isTransitioning:!1});o0.displayName="ViewTransition";var cS=$e.createContext(new Map);cS.displayName="Fetchers";var LO=$e.createContext(null);LO.displayName="Await";var yo=$e.createContext(null);yo.displayName="Navigation";var Cy=$e.createContext(null);Cy.displayName="Location";var Go=$e.createContext({outlet:null,matches:[],isDataRoute:!1});Go.displayName="Route";var l0=$e.createContext(null);l0.displayName="RouteError";function zO(i,{relative:e}={}){kr(sd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:o}=$e.useContext(yo),{hash:a,pathname:c,search:u}=ad(i,{relative:e}),n=c;return t!=="/"&&(n=c==="/"?t:Ro([t,c])),o.createHref({pathname:n,search:u,hash:a})}function sd(){return $e.useContext(Cy)!=null}function Ho(){return kr(sd(),"useLocation() may be used only in the context of a <Router> component."),$e.useContext(Cy).location}var hS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uS(i){$e.useContext(yo).static||$e.useLayoutEffect(i)}function Sf(){let{isDataRoute:i}=$e.useContext(Go);return i?qO():NO()}function NO(){kr(sd(),"useNavigate() may be used only in the context of a <Router> component.");let i=$e.useContext(Mh),{basename:e,navigator:t}=$e.useContext(yo),{matches:o}=$e.useContext(Go),{pathname:a}=Ho(),c=JSON.stringify(wy(o)),u=$e.useRef(!1);return uS(()=>{u.current=!0}),$e.useCallback((p,m={})=>{if(us(u.current,hS),!u.current)return;if(typeof p=="number"){t.go(p);return}let g=Ty(p,JSON.parse(c),a,m.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ro([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,c,a,i])}$e.createContext(null);function ad(i,{relative:e}={}){let{matches:t}=$e.useContext(Go),{pathname:o}=Ho(),a=JSON.stringify(wy(t));return $e.useMemo(()=>Ty(i,JSON.parse(a),o,e==="path"),[i,a,o,e])}function OO(i,e,t,o){kr(sd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=$e.useContext(yo),{matches:c}=$e.useContext(Go),u=c[c.length-1],n=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let A=g&&g.path||"";pS(p,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=Ho(),y;y=v;let k=y.pathname||"/",_=k;if(m!=="/"){let A=m.replace(/^\//,"").split("/");_="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let T=Ql(i,{pathname:_});return us(g||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),us(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),$O(T&&T.map(A=>Object.assign({},A,{params:Object.assign({},n,A.params),pathname:Ro([m,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:Ro([m,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,t,o)}function jO(){let i=dS(),e=Ey(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},c={padding:"2px 4px",backgroundColor:o},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=$e.createElement($e.Fragment,null,$e.createElement("p",null,"💿 Hey developer 👋"),$e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$e.createElement("code",{style:c},"ErrorBoundary")," or"," ",$e.createElement("code",{style:c},"errorElement")," prop on your route.")),$e.createElement($e.Fragment,null,$e.createElement("h2",null,"Unexpected Application Error!"),$e.createElement("h3",{style:{fontStyle:"italic"}},e),t?$e.createElement("pre",{style:a},t):null,u)}var BO=$e.createElement(jO,null),FO=class extends $e.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?$e.createElement(Go.Provider,{value:this.props.routeContext},$e.createElement(l0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UO({routeContext:i,match:e,children:t}){let o=$e.useContext(Mh);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),$e.createElement(Go.Provider,{value:i},t)}function $O(i,e=[],t=null,o=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,c=t==null?void 0:t.errors;if(c!=null){let p=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);kr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,n=-1;if(t)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(n=p),m.route.id){let{loaderData:g,errors:v}=t,y=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||y){u=!0,n>=0?a=a.slice(0,n+1):a=[a[0]];break}}}return a.reduceRight((p,m,g)=>{let v,y=!1,k=null,_=null;t&&(v=c&&m.route.id?c[m.route.id]:void 0,k=m.route.errorElement||BO,u&&(n<0&&g===0?(pS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):n===g&&(y=!0,_=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,g+1)),M=()=>{let A;return v?A=k:y?A=_:m.route.Component?A=$e.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,$e.createElement(UO,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:A})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?$e.createElement(FO,{location:t.location,revalidation:t.revalidation,component:k,error:v,children:M(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):M()},null)}function c0(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VO(i){let e=$e.useContext(Mh);return kr(e,c0(i)),e}function GO(i){let e=$e.useContext(Cf);return kr(e,c0(i)),e}function HO(i){let e=$e.useContext(Go);return kr(e,c0(i)),e}function h0(i){let e=HO(i),t=e.matches[e.matches.length-1];return kr(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function WO(){return h0("useRouteId")}function dS(){var o;let i=$e.useContext(l0),e=GO("useRouteError"),t=h0("useRouteError");return i!==void 0?i:(o=e.errors)==null?void 0:o[t]}function qO(){let{router:i}=VO("useNavigate"),e=h0("useNavigate"),t=$e.useRef(!1);return uS(()=>{t.current=!0}),$e.useCallback(async(a,c={})=>{us(t.current,hS),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...c}))},[i,e])}var v1={};function pS(i,e,t){!e&&!v1[i]&&(v1[i]=!0,us(!1,t))}var _1={};function w1(i,e){!i&&!_1[e]&&(_1[e]=!0,console.warn(e))}function YO(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&us(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:$e.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&us(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:$e.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&us(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:$e.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var ZO=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function XO({router:i,flushSync:e}){let[t,o]=$e.useState(i.state),[a,c]=$e.useState(),[u,n]=$e.useState({isTransitioning:!1}),[p,m]=$e.useState(),[g,v]=$e.useState(),[y,k]=$e.useState(),_=$e.useRef(new Map),T=$e.useCallback((P,{deletedFetchers:D,flushSync:w,viewTransitionOpts:I})=>{P.fetchers.forEach((q,Z)=>{q.data!==void 0&&_.current.set(Z,q.data)}),D.forEach(q=>_.current.delete(q)),w1(w===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(w1(I==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!N){e&&w?e(()=>o(P)):$e.startTransition(()=>o(P));return}if(e&&w){e(()=>{g&&(p&&p.resolve(),g.skipTransition()),n({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let q=i.window.document.startViewTransition(()=>{e(()=>o(P))});q.finished.finally(()=>{e(()=>{m(void 0),v(void 0),c(void 0),n({isTransitioning:!1})})}),e(()=>v(q));return}g?(p&&p.resolve(),g.skipTransition(),k({state:P,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(c(P),n({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[i.window,e,g,p]);$e.useLayoutEffect(()=>i.subscribe(T),[i,T]),$e.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new ZO)},[u]),$e.useEffect(()=>{if(p&&a&&i.window){let P=a,D=p.promise,w=i.window.document.startViewTransition(async()=>{$e.startTransition(()=>o(P)),await D});w.finished.finally(()=>{m(void 0),v(void 0),c(void 0),n({isTransitioning:!1})}),v(w)}},[a,p,i.window]),$e.useEffect(()=>{p&&a&&t.location.key===a.location.key&&p.resolve()},[p,g,t.location,a]),$e.useEffect(()=>{!u.isTransitioning&&y&&(c(y.state),n({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),k(void 0))},[u.isTransitioning,y]);let M=$e.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:P=>i.navigate(P),push:(P,D,w)=>i.navigate(P,{state:D,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(P,D,w)=>i.navigate(P,{replace:!0,state:D,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[i]),A=i.basename||"/",x=$e.useMemo(()=>({router:i,navigator:M,static:!1,basename:A}),[i,M,A]);return $e.createElement($e.Fragment,null,$e.createElement(Mh.Provider,{value:x},$e.createElement(Cf.Provider,{value:t},$e.createElement(cS.Provider,{value:_.current},$e.createElement(o0.Provider,{value:u},$e.createElement(ej,{basename:A,location:t.location,navigationType:t.historyAction,navigator:M},$e.createElement(KO,{routes:i.routes,future:i.future,state:t})))))),null)}var KO=$e.memo(QO);function QO({routes:i,future:e,state:t}){return OO(i,void 0,t,e)}function JO({to:i,replace:e,state:t,relative:o}){kr(sd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=$e.useContext(yo);us(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=$e.useContext(Go),{pathname:u}=Ho(),n=Sf(),p=Ty(i,wy(c),u,o==="path"),m=JSON.stringify(p);return $e.useEffect(()=>{n(JSON.parse(m),{replace:e,state:t,relative:o})},[n,m,o,e,t]),null}function ej({basename:i="/",children:e=null,location:t,navigationType:o="POP",navigator:a,static:c=!1}){kr(!sd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),n=$e.useMemo(()=>({basename:u,navigator:a,static:c,future:{}}),[u,a,c]);typeof t=="string"&&(t=Cl(t));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=t,k=$e.useMemo(()=>{let _=fo(p,u);return _==null?null:{location:{pathname:_,search:m,hash:g,state:v,key:y},navigationType:o}},[u,p,m,g,v,y,o]);return us(k!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:$e.createElement(yo.Provider,{value:n},$e.createElement(Cy.Provider,{children:e,value:k}))}var cg="get",hg="application/x-www-form-urlencoded";function Sy(i){return i!=null&&typeof i.tagName=="string"}function tj(i){return Sy(i)&&i.tagName.toLowerCase()==="button"}function ij(i){return Sy(i)&&i.tagName.toLowerCase()==="form"}function rj(i){return Sy(i)&&i.tagName.toLowerCase()==="input"}function nj(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sj(i,e){return i.button===0&&(!e||e==="_self")&&!nj(i)}var Hm=null;function aj(){if(Hm===null)try{new FormData(document.createElement("form"),0),Hm=!1}catch{Hm=!0}return Hm}var oj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eb(i){return i!=null&&!oj.has(i)?(us(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hg}"`),null):i}function lj(i,e){let t,o,a,c,u;if(ij(i)){let n=i.getAttribute("action");o=n?fo(n,e):null,t=i.getAttribute("method")||cg,a=eb(i.getAttribute("enctype"))||hg,c=new FormData(i)}else if(tj(i)||rj(i)&&(i.type==="submit"||i.type==="image")){let n=i.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||n.getAttribute("action");if(o=p?fo(p,e):null,t=i.getAttribute("formmethod")||n.getAttribute("method")||cg,a=eb(i.getAttribute("formenctype"))||eb(n.getAttribute("enctype"))||hg,c=new FormData(n,i),!aj()){let{name:m,type:g,value:v}=i;if(g==="image"){let y=m?`${m}.`:"";c.append(`${y}x`,"0"),c.append(`${y}y`,"0")}else m&&c.append(m,v)}}else{if(Sy(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cg,o=null,a=hg,u=i}return c&&a==="text/plain"&&(u=c,c=void 0),{action:o,method:t.toLowerCase(),encType:a,formData:c,body:u}}function u0(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function cj(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hj(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function uj(i,e,t){let o=await Promise.all(i.map(async a=>{let c=e.routes[a.route.id];if(c){let u=await cj(c,t);return u.links?u.links():[]}return[]}));return mj(o.flat(1).filter(hj).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function T1(i,e,t,o,a,c){let u=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,n=(p,m)=>{var g;return t[m].pathname!==p.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,m)=>u(p,m)||n(p,m)):c==="data"?e.filter((p,m)=>{var v;let g=o.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,m)||n(p,m))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function dj(i,e){return pj(i.map(t=>{let o=e.routes[t.route.id];if(!o)return[];let a=[o.module];return o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function pj(i){return[...new Set(i)]}function fj(i){let e={},t=Object.keys(i).sort();for(let o of t)e[o]=i[o];return e}function mj(i,e){let t=new Set;return new Set(e),i.reduce((o,a)=>{let c=JSON.stringify(fj(a));return t.has(c)||(t.add(c),o.push({key:c,link:a})),o},[])}function gj(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function yj(){let i=$e.useContext(Mh);return u0(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function xj(){let i=$e.useContext(Cf);return u0(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var d0=$e.createContext(void 0);d0.displayName="FrameworkContext";function fS(){let i=$e.useContext(d0);return u0(i,"You must render this element inside a <HydratedRouter> element"),i}function bj(i,e){let t=$e.useContext(d0),[o,a]=$e.useState(!1),[c,u]=$e.useState(!1),{onFocus:n,onBlur:p,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,y=$e.useRef(null);$e.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let T=A=>{A.forEach(x=>{u(x.isIntersecting)})},M=new IntersectionObserver(T,{threshold:.5});return y.current&&M.observe(y.current),()=>{M.disconnect()}}},[i]),$e.useEffect(()=>{if(o){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[o]);let k=()=>{a(!0)},_=()=>{a(!1),u(!1)};return t?i!=="intent"?[c,y,{}]:[c,y,{onFocus:dp(n,k),onBlur:dp(p,_),onMouseEnter:dp(m,k),onMouseLeave:dp(g,_),onTouchStart:dp(v,k)}]:[!1,y,{}]}function dp(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function vj({page:i,...e}){let{router:t}=yj(),o=$e.useMemo(()=>Ql(t.routes,i,t.basename),[t.routes,i,t.basename]);return o?$e.createElement(wj,{page:i,matches:o,...e}):null}function _j(i){let{manifest:e,routeModules:t}=fS(),[o,a]=$e.useState([]);return $e.useEffect(()=>{let c=!1;return uj(i,e,t).then(u=>{c||a(u)}),()=>{c=!0}},[i,e,t]),o}function wj({page:i,matches:e,...t}){let o=Ho(),{manifest:a,routeModules:c}=fS(),{loaderData:u,matches:n}=xj(),p=$e.useMemo(()=>T1(i,e,n,a,o,"data"),[i,e,n,a,o]),m=$e.useMemo(()=>T1(i,e,n,a,o,"assets"),[i,e,n,a,o]),g=$e.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let k=new Set,_=!1;if(e.forEach(M=>{var x;let A=a.routes[M.route.id];!A||!A.hasLoader||(!p.some(P=>P.route.id===M.route.id)&&M.route.id in u&&((x=c[M.route.id])!=null&&x.shouldRevalidate)||A.hasClientLoader?_=!0:k.add(M.route.id))}),k.size===0)return[];let T=gj(i);return _&&k.size>0&&T.searchParams.set("_routes",e.filter(M=>k.has(M.route.id)).map(M=>M.route.id).join(",")),[T.pathname+T.search]},[u,o,a,p,e,i,c]),v=$e.useMemo(()=>dj(m,a),[m,a]),y=_j(m);return $e.createElement($e.Fragment,null,g.map(k=>$e.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),v.map(k=>$e.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),y.map(({key:k,link:_})=>$e.createElement("link",{key:k,..._})))}function Tj(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mS&&(window.__reactRouterVersion="7.1.3")}catch{}function Ej(i,e){return mO({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:BN({window:e==null?void 0:e.window}),hydrationData:Cj(),routes:i,mapRouteProperties:YO,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function Cj(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:Sj(i.errors)}),i}function Sj(i){if(!i)return null;let e=Object.entries(i),t={};for(let[o,a]of e)if(a&&a.__type==="RouteErrorResponse")t[o]=new Rg(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let c=window[a.__subType];if(typeof c=="function")try{let u=new c(a.message);u.stack="",t[o]=u}catch{}}if(t[o]==null){let c=new Error(a.message);c.stack="",t[o]=c}}else t[o]=a;return t}var gS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=$e.forwardRef(function({onClick:e,discover:t="render",prefetch:o="none",relative:a,reloadDocument:c,replace:u,state:n,target:p,to:m,preventScrollReset:g,viewTransition:v,...y},k){let{basename:_}=$e.useContext(yo),T=typeof m=="string"&&gS.test(m),M,A=!1;if(typeof m=="string"&&T&&(M=m,mS))try{let Z=new URL(window.location.href),X=m.startsWith("//")?new URL(Z.protocol+m):new URL(m),j=fo(X.pathname,_);X.origin===Z.origin&&j!=null?m=j+X.search+X.hash:A=!0}catch{us(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=zO(m,{relative:a}),[P,D,w]=bj(o,y),I=Pj(m,{replace:u,state:n,target:p,preventScrollReset:g,relative:a,viewTransition:v});function N(Z){e&&e(Z),Z.defaultPrevented||I(Z)}let q=$e.createElement("a",{...y,...w,href:M||x,onClick:A||c?e:N,ref:Tj(k,D),target:p,"data-discover":!T&&t==="render"?"true":void 0});return P&&!T?$e.createElement($e.Fragment,null,q,$e.createElement(vj,{page:x})):q});yS.displayName="Link";var kj=$e.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:o="",end:a=!1,style:c,to:u,viewTransition:n,children:p,...m},g){let v=ad(u,{relative:m.relative}),y=Ho(),k=$e.useContext(Cf),{navigator:_,basename:T}=$e.useContext(yo),M=k!=null&&zj(v)&&n===!0,A=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,x=y.pathname,P=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(x=x.toLowerCase(),P=P?P.toLowerCase():null,A=A.toLowerCase()),P&&T&&(P=fo(P,T)||P);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let w=x===A||!a&&x.startsWith(A)&&x.charAt(D)==="/",I=P!=null&&(P===A||!a&&P.startsWith(A)&&P.charAt(A.length)==="/"),N={isActive:w,isPending:I,isTransitioning:M},q=w?e:void 0,Z;typeof o=="function"?Z=o(N):Z=[o,w?"active":null,I?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let X=typeof c=="function"?c(N):c;return $e.createElement(yS,{...m,"aria-current":q,className:Z,ref:g,style:X,to:u,viewTransition:n},typeof p=="function"?p(N):p)});kj.displayName="NavLink";var Aj=$e.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:o,replace:a,state:c,method:u=cg,action:n,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:v,...y},k)=>{let _=Rj(),T=Lj(n,{relative:m}),M=u.toLowerCase()==="get"?"get":"post",A=typeof n=="string"&&gS.test(n),x=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let D=P.nativeEvent.submitter,w=(D==null?void 0:D.getAttribute("formmethod"))||u;_(D||P.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:a,state:c,relative:m,preventScrollReset:g,viewTransition:v})};return $e.createElement("form",{ref:k,method:M,action:T,onSubmit:o?p:x,...y,"data-discover":!A&&i==="render"?"true":void 0})});Aj.displayName="Form";function Mj(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(i){let e=$e.useContext(Mh);return kr(e,Mj(i)),e}function Pj(i,{target:e,replace:t,state:o,preventScrollReset:a,relative:c,viewTransition:u}={}){let n=Sf(),p=Ho(),m=ad(i,{relative:c});return $e.useCallback(g=>{if(sj(g,e)){g.preventDefault();let v=t!==void 0?t:uc(p)===uc(m);n(i,{replace:v,state:o,preventScrollReset:a,relative:c,viewTransition:u})}},[p,n,m,t,o,e,i,a,c,u])}var Ij=0,Dj=()=>`__${String(++Ij)}__`;function Rj(){let{router:i}=xS("useSubmit"),{basename:e}=$e.useContext(yo),t=WO();return $e.useCallback(async(o,a={})=>{let{action:c,method:u,encType:n,formData:p,body:m}=lj(o,e);if(a.navigate===!1){let g=a.fetcherKey||Dj();await i.fetch(g,t,a.action||c,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||n,flushSync:a.flushSync})}else await i.navigate(a.action||c,{preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||n,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function Lj(i,{relative:e}={}){let{basename:t}=$e.useContext(yo),o=$e.useContext(Go);kr(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),c={...ad(i||".",{relative:e})},u=Ho();if(i==null){c.search=u.search;let n=new URLSearchParams(c.search),p=n.getAll("index");if(p.some(g=>g==="")){n.delete("index"),p.filter(v=>v).forEach(v=>n.append("index",v));let g=n.toString();c.search=g?`?${g}`:""}}return(!i||i===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Ro([t,c.pathname])),uc(c)}function zj(i,e={}){let t=$e.useContext(o0);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=xS("useViewTransitionState"),a=ad(i,{relative:e.relative});if(!t.isTransitioning)return!1;let c=fo(t.currentLocation.pathname,o)||t.currentLocation.pathname,u=fo(t.nextLocation.pathname,o)||t.nextLocation.pathname;return Dg(a.pathname,u)!=null||Dg(a.pathname,c)!=null}new TextEncoder;/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nj(i){return $e.createElement(XO,{flushSync:oM.flushSync,...i})}const tb=()=>{const i=dS();return console.error(i),pe.jsxs("div",{id:"error-page",children:[pe.jsx("h1",{children:it.t("Oops!")}),pe.jsx("p",{children:it.t("Sorry, an unexpected error has occurred.")}),pe.jsx("p",{children:pe.jsx("i",{children:(i==null?void 0:i.statusText)||(i==null?void 0:i.message)})})]})},Oj="_innerNavBar_bw29d_1",jj="_leftNavBarLinks_bw29d_12",Bj="_outerNavBar_bw29d_17",ib={innerNavBar:Oj,leftNavBarLinks:jj,outerNavBar:Bj},Fj=({path:i,label:e})=>{const{pathname:t}=ad({});return pe.jsx(ju,{label:e,href:`#${i}`,active:t===i||i!=="/"&&t.startsWith(i)})},p0="1400px",Uj=[{label:"Evaluate",path:"/evaluate"},{label:"Predict",path:"/predict"}],$j=()=>{const i=Sf(),{pathname:e}=Ho(),t=()=>{i("/settings")};return pe.jsx("div",{children:pe.jsx("div",{className:ib.outerNavBar,children:pe.jsxs("div",{className:ib.innerNavBar,style:{maxWidth:p0},children:[pe.jsx("div",{className:ib.leftNavBarLinks,children:Uj.map(({path:o,label:a},c)=>pe.jsx(Fj,{path:o,label:a},c))}),e!=="/settings"&&pe.jsx(Vr,{icon:pe.jsx(lM,{}),onClick:t,children:it.t("Settings")})]})})})},Vj="_warningMargin_z0zs1_1",Gj="_warningMarginInner_z0zs1_6",E1={warningMargin:Vj,warningMarginInner:Gj};var bS={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:Na,function(e){var t={};function o(a,c,u,n){!a.hasOwnProperty(c)&&(a[c]=n.apply(null,u),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:a[c]}})))}return o(t,"Core/Globals.js",[],function(){var a,c;return(c=a||(a={})).SVG_NS="http://www.w3.org/2000/svg",c.product="Highcharts",c.version="11.4.8",c.win=e!==void 0?e:{},c.doc=c.win.document,c.svg=c.doc&&c.doc.createElementNS&&!!c.doc.createElementNS(c.SVG_NS,"svg").createSVGRect,c.userAgent=c.win.navigator&&c.win.navigator.userAgent||"",c.isChrome=c.win.chrome,c.isFirefox=c.userAgent.indexOf("Firefox")!==-1,c.isMS=/(edge|msie|trident)/i.test(c.userAgent)&&!c.win.opera,c.isSafari=!c.isChrome&&c.userAgent.indexOf("Safari")!==-1,c.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(c.userAgent),c.isWebKit=c.userAgent.indexOf("AppleWebKit")!==-1,c.deg2rad=2*Math.PI/360,c.hasBidiBug=c.isFirefox&&4>parseInt(c.userAgent.split("Firefox/")[1],10),c.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],c.noop=function(){},c.supportsPassiveEvents=function(){let u=!1;if(!c.isMS){let n=Object.defineProperty({},"passive",{get:function(){u=!0}});c.win.addEventListener&&c.win.removeEventListener&&(c.win.addEventListener("testPassive",c.noop,n),c.win.removeEventListener("testPassive",c.noop,n))}return u}(),c.charts=[],c.composed=[],c.dateFormats={},c.seriesTypes={},c.symbolSizes={},c.chartCount=0,a}),o(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(a){let c,{charts:u,doc:n,win:p}=a;function m(L,R,G,$){let F=R?"Highcharts error":"Highcharts warning";L===32&&(L=`${F}: Deprecated member`);let H=M(L),W=H?`${F} #${L}: www.highcharts.com/errors/${L}/`:L.toString();if($!==void 0){let ne="";H&&(W+="?"),X($,function(ue,ie){ne+=`
 - ${ie}: ${ue}`,H&&(W+=encodeURI(ie)+"="+encodeURI(ue))}),W+=ne}V(a,"displayError",{chart:G,code:L,message:W,params:$},function(){if(R)throw Error(W);p.console&&m.messages.indexOf(W)===-1&&console.warn(W)}),m.messages.push(W)}function g(L,R){return parseInt(L,R||10)}function v(L){return typeof L=="string"}function y(L){let R=Object.prototype.toString.call(L);return R==="[object Array]"||R==="[object Array Iterator]"}function k(L,R){return!!L&&typeof L=="object"&&(!R||!y(L))}function _(L){return k(L)&&typeof L.nodeType=="number"}function T(L){let R=L&&L.constructor;return!!(k(L,!0)&&!_(L)&&R&&R.name&&R.name!=="Object")}function M(L){return typeof L=="number"&&!isNaN(L)&&L<1/0&&L>-1/0}function A(L){return L!=null}function x(L,R,G){let $,F=v(R)&&!A(G),H=(W,ne)=>{A(W)?L.setAttribute(ne,W):F?($=L.getAttribute(ne))||ne!=="class"||($=L.getAttribute(ne+"Name")):L.removeAttribute(ne)};return v(R)?H(G,R):X(R,H),$}function P(L){return y(L)?L:[L]}function D(L,R){let G;for(G in L||(L={}),R)L[G]=R[G];return L}function w(){let L=arguments,R=L.length;for(let G=0;G<R;G++){let $=L[G];if($!=null)return $}}function I(L,R){D(L.style,R)}function N(L){return Math.pow(10,Math.floor(Math.log(L)/Math.LN10))}function q(L,R){return L>1e14?L:parseFloat(L.toPrecision(R||14))}m.messages=[],Math.easeInOutSine=function(L){return-.5*(Math.cos(Math.PI*L)-1)};let Z=Array.prototype.find?function(L,R){return L.find(R)}:function(L,R){let G,$=L.length;for(G=0;G<$;G++)if(R(L[G],G))return L[G]};function X(L,R,G){for(let $ in L)Object.hasOwnProperty.call(L,$)&&R.call(G||L[$],L[$],$,L)}function j(L,R,G){function $(W,ne){let ue=L.removeEventListener;ue&&ue.call(L,W,ne,!1)}function F(W){let ne,ue;L.nodeName&&(R?(ne={})[R]=!0:ne=W,X(ne,function(ie,oe){if(W[oe])for(ue=W[oe].length;ue--;)$(oe,W[oe][ue].fn)}))}let H=typeof L=="function"&&L.prototype||L;if(Object.hasOwnProperty.call(H,"hcEvents")){let W=H.hcEvents;if(R){let ne=W[R]||[];G?(W[R]=ne.filter(function(ue){return G!==ue.fn}),$(R,G)):(F(W),W[R]=[])}else F(W),delete H.hcEvents}}function V(L,R,G,$){if(G=G||{},n.createEvent&&(L.dispatchEvent||L.fireEvent&&L!==a)){let F=n.createEvent("Events");F.initEvent(R,!0,!0),G=D(F,G),L.dispatchEvent?L.dispatchEvent(G):L.fireEvent(R,G)}else if(L.hcEvents){G.target||D(G,{preventDefault:function(){G.defaultPrevented=!0},target:L,type:R});let F=[],H=L,W=!1;for(;H.hcEvents;)Object.hasOwnProperty.call(H,"hcEvents")&&H.hcEvents[R]&&(F.length&&(W=!0),F.unshift.apply(F,H.hcEvents[R])),H=Object.getPrototypeOf(H);W&&F.sort((ne,ue)=>ne.order-ue.order),F.forEach(ne=>{ne.fn.call(L,G)===!1&&G.preventDefault()})}$&&!G.defaultPrevented&&$.call(L,G)}X({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(L,R){a[R]=function(G){return m(32,!1,void 0,{[`Highcharts.${R}`]:`use Array.${L}`}),Array.prototype[L].apply(G,[].slice.call(arguments,1))}});let U=function(){let L=Math.random().toString(36).substring(2,9)+"-",R=0;return function(){return"highcharts-"+(c?"":L)+R++}}();return p.jQuery&&(p.jQuery.fn.highcharts=function(){let L=[].slice.call(arguments);if(this[0])return L[0]?(new a[v(L[0])?L.shift():"Chart"](this[0],L[0],L[1]),this):u[x(this[0],"data-highcharts-chart")]}),{addEvent:function(L,R,G,$={}){let F=typeof L=="function"&&L.prototype||L;Object.hasOwnProperty.call(F,"hcEvents")||(F.hcEvents={});let H=F.hcEvents;a.Point&&L instanceof a.Point&&L.series&&L.series.chart&&(L.series.chart.runTrackerClick=!0);let W=L.addEventListener;W&&W.call(L,R,G,!!a.supportsPassiveEvents&&{passive:$.passive===void 0?R.indexOf("touch")!==-1:$.passive,capture:!1}),H[R]||(H[R]=[]);let ne={fn:G,order:typeof $.order=="number"?$.order:1/0};return H[R].push(ne),H[R].sort((ue,ie)=>ue.order-ie.order),function(){j(L,R,G)}},arrayMax:function(L){let R=L.length,G=L[0];for(;R--;)L[R]>G&&(G=L[R]);return G},arrayMin:function(L){let R=L.length,G=L[0];for(;R--;)L[R]<G&&(G=L[R]);return G},attr:x,clamp:function(L,R,G){return L>R?L<G?L:G:R},clearTimeout:function(L){A(L)&&clearTimeout(L)},correctFloat:q,createElement:function(L,R,G,$,F){let H=n.createElement(L);return R&&D(H,R),F&&I(H,{padding:"0",border:"none",margin:"0"}),G&&I(H,G),$&&$.appendChild(H),H},crisp:(L,R=0,G)=>{let $=R%2/2,F=G?-1:1;return(Math.round(L*F-$)+$)*F},css:I,defined:A,destroyObjectProperties:function(L,R,G){X(L,function($,F){$!==R&&($!=null&&$.destroy)&&$.destroy(),($!=null&&$.destroy||!G)&&delete L[F]})},diffObjects:function(L,R,G,$){let F={};return function H(W,ne,ue,ie){let oe=G?ne:W;X(W,function(Se,ye){if(!ie&&$&&$.indexOf(ye)>-1&&ne[ye]){Se=P(Se),ue[ye]=[];for(let Ce=0;Ce<Math.max(Se.length,ne[ye].length);Ce++)ne[ye][Ce]&&(Se[Ce]===void 0?ue[ye][Ce]=ne[ye][Ce]:(ue[ye][Ce]={},H(Se[Ce],ne[ye][Ce],ue[ye][Ce],ie+1)))}else k(Se,!0)&&!Se.nodeType?(ue[ye]=y(Se)?[]:{},H(Se,ne[ye]||{},ue[ye],ie+1),Object.keys(ue[ye]).length!==0||ye==="colorAxis"&&ie===0||delete ue[ye]):(W[ye]!==ne[ye]||ye in W&&!(ye in ne))&&ye!=="__proto__"&&ye!=="constructor"&&(ue[ye]=oe[ye])})}(L,R,F,0),F},discardElement:function(L){L&&L.parentElement&&L.parentElement.removeChild(L)},erase:function(L,R){let G=L.length;for(;G--;)if(L[G]===R){L.splice(G,1);break}},error:m,extend:D,extendClass:function(L,R){let G=function(){};return G.prototype=new L,D(G.prototype,R),G},find:Z,fireEvent:V,getClosestDistance:function(L,R){let G,$,F,H=!R;return L.forEach(W=>{if(W.length>1)for(F=W.length-1;F>0;F--)($=W[F]-W[F-1])<0&&!H?(R==null||R(),R=void 0):$&&(G===void 0||$<G)&&(G=$)}),G},getMagnitude:N,getNestedProperty:function(L,R){let G=L.split(".");for(;G.length&&A(R);){let $=G.shift();if($===void 0||$==="__proto__")return;if($==="this"){let H;return k(R)&&(H=R["@this"]),H??R}let F=R[$];if(!A(F)||typeof F=="function"||typeof F.nodeType=="number"||F===p)return;R=F}return R},getStyle:function L(R,G,$){let F;if(G==="width"){let W=Math.min(R.offsetWidth,R.scrollWidth),ne=R.getBoundingClientRect&&R.getBoundingClientRect().width;return ne<W&&ne>=W-1&&(W=Math.floor(ne)),Math.max(0,W-(L(R,"padding-left",!0)||0)-(L(R,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(R.offsetHeight,R.scrollHeight)-(L(R,"padding-top",!0)||0)-(L(R,"padding-bottom",!0)||0));let H=p.getComputedStyle(R,void 0);return H&&(F=H.getPropertyValue(G),w($,G!=="opacity")&&(F=g(F))),F},inArray:function(L,R,G){return m(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),R.indexOf(L,G)},insertItem:function(L,R){let G,$=L.options.index,F=R.length;for(G=L.options.isInternal?F:0;G<F+1;G++)if(!R[G]||M($)&&$<w(R[G].options.index,R[G]._i)||R[G].options.isInternal){R.splice(G,0,L);break}return G},isArray:y,isClass:T,isDOMElement:_,isFunction:function(L){return typeof L=="function"},isNumber:M,isObject:k,isString:v,keys:function(L){return m(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(L)},merge:function(){let L,R=arguments,G={},$=function(H,W){return typeof H!="object"&&(H={}),X(W,function(ne,ue){ue!=="__proto__"&&ue!=="constructor"&&(!k(ne,!0)||T(ne)||_(ne)?H[ue]=W[ue]:H[ue]=$(H[ue]||{},ne))}),H};R[0]===!0&&(G=R[1],R=Array.prototype.slice.call(R,2));let F=R.length;for(L=0;L<F;L++)G=$(G,R[L]);return G},normalizeTickInterval:function(L,R,G,$,F){let H,W=L;G=w(G,N(L));let ne=L/G;for(!R&&(R=F?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],$===!1&&(G===1?R=R.filter(function(ue){return ue%1==0}):G<=.1&&(R=[1/G]))),H=0;H<R.length&&(W=R[H],(!F||!(W*G>=L))&&(F||!(ne<=(R[H]+(R[H+1]||R[H]))/2)));H++);return q(W*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:X,offset:function(L){let R=n.documentElement,G=L.parentElement||L.parentNode?L.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(p.pageYOffset||R.scrollTop)-(R.clientTop||0),left:G.left+(p.pageXOffset||R.scrollLeft)-(R.clientLeft||0),width:G.width,height:G.height}},pad:function(L,R,G){return Array((R||2)+1-String(L).replace("-","").length).join(G||"0")+L},pick:w,pInt:g,pushUnique:function(L,R){return 0>L.indexOf(R)&&!!L.push(R)},relativeLength:function(L,R,G){return/%$/.test(L)?R*parseFloat(L)/100+(G||0):parseFloat(L)},removeEvent:j,replaceNested:function(L,...R){let G,$;do for($ of(G=L,R))L=L.replace($[0],$[1]);while(L!==G);return L},splat:P,stableSort:function(L,R){let G,$,F=L.length;for($=0;$<F;$++)L[$].safeI=$;for(L.sort(function(H,W){return(G=R(H,W))===0?H.safeI-W.safeI:G}),$=0;$<F;$++)delete L[$].safeI},syncTimeout:function(L,R,G){return R>0?setTimeout(L,R,G):(L.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:U,useSerialIds:function(L){return c=w(L,c)},wrap:function(L,R,G){let $=L[R];L[R]=function(){let F=arguments,H=this;return G.apply(this,[function(){return $.apply(H,arguments.length?arguments:F)}].concat([].slice.call(arguments)))}}}}),o(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),o(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),o(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{win:u}=a,{defined:n,error:p,extend:m,isNumber:g,isObject:v,merge:y,objectEach:k,pad:_,pick:T,splat:M,timeUnits:A}=c,x=a.isSafari&&u.Intl&&u.Intl.DateTimeFormat.prototype.formatRange,P=a.isSafari&&u.Intl&&!u.Intl.DateTimeFormat.prototype.formatRange;class D{constructor(I){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=u.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(I)}get(I,N){if(this.variableTimezone||this.timezoneOffset){let q=N.getTime(),Z=q-this.getTimezoneOffset(N);N.setTime(Z);let X=N["getUTC"+I]();return N.setTime(q),X}return this.useUTC?N["getUTC"+I]():N["get"+I]()}set(I,N,q){if(this.variableTimezone||this.timezoneOffset){if(I==="Milliseconds"||I==="Seconds"||I==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+I](q);let Z=this.getTimezoneOffset(N),X=N.getTime()-Z;N.setTime(X),N["setUTC"+I](q);let j=this.getTimezoneOffset(N);return X=N.getTime()+j,N.setTime(X)}return this.useUTC||x&&I==="FullYear"?N["setUTC"+I](q):N["set"+I](q)}update(I={}){let N=T(I.useUTC,!0);this.options=I=y(!0,this.options,I),this.Date=I.Date||u.Date||Date,this.useUTC=N,this.timezoneOffset=N&&I.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(I.getTimezoneOffset||I.timezone)}makeTime(I,N,q,Z,X,j){let V,U,L;return this.useUTC?(V=this.Date.UTC.apply(0,arguments),U=this.getTimezoneOffset(V),V+=U,U!==(L=this.getTimezoneOffset(V))?V+=L-U:U-36e5!==this.getTimezoneOffset(V-36e5)||P||(V-=36e5)):V=new this.Date(I,N,T(q,1),T(Z,0),T(X,0),T(j,0)).getTime(),V}timezoneOffsetFunction(){let I=this,N=this.options,q=N.getTimezoneOffset;return this.useUTC?N.timezone?Z=>{try{let X=`shortOffset,${N.timezone||""}`,[j,V,U,L,R=0]=(D.formatCache[X]=D.formatCache[X]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Z).split(/(GMT|:)/).map(Number),G=-(36e5*(U+R/60));if(g(G))return G}catch{p(34)}return 0}:this.useUTC&&q?Z=>6e4*q(Z.valueOf()):()=>6e4*(I.timezoneOffset||0):Z=>6e4*new Date(Z.toString()).getTimezoneOffset()}dateFormat(I,N,q){if(!n(N)||isNaN(N))return a.defaultOptions.lang&&a.defaultOptions.lang.invalidDate||"";I=T(I,"%Y-%m-%d %H:%M:%S");let Z=this,X=new this.Date(N),j=this.get("Hours",X),V=this.get("Day",X),U=this.get("Date",X),L=this.get("Month",X),R=this.get("FullYear",X),G=a.defaultOptions.lang,$=G&&G.weekdays,F=G&&G.shortWeekdays;return k(m({a:F?F[V]:$[V].substr(0,3),A:$[V],d:_(U),e:_(U,2," "),w:V,b:G.shortMonths[L],B:G.months[L],m:_(L+1),o:L+1,y:R.toString().substr(2,2),Y:R,H:_(j),k:j,I:_(j%12||12),l:j%12||12,M:_(this.get("Minutes",X)),p:j<12?"AM":"PM",P:j<12?"am":"pm",S:_(this.get("Seconds",X)),L:_(Math.floor(N%1e3),3)},a.dateFormats),function(H,W){for(;I.indexOf("%"+W)!==-1;)I=I.replace("%"+W,typeof H=="function"?H.call(Z,N):H)}),q?I.substr(0,1).toUpperCase()+I.substr(1):I}resolveDTLFormat(I){return v(I,!0)?I:{main:(I=M(I))[0],from:I[1],to:I[2]}}getTimeTicks(I,N,q,Z){let X,j,V,U,L=this,R=L.Date,G=[],$={},F=new R(N),H=I.unitRange,W=I.count||1;if(Z=T(Z,1),n(N)){L.set("Milliseconds",F,H>=A.second?0:W*Math.floor(L.get("Milliseconds",F)/W)),H>=A.second&&L.set("Seconds",F,H>=A.minute?0:W*Math.floor(L.get("Seconds",F)/W)),H>=A.minute&&L.set("Minutes",F,H>=A.hour?0:W*Math.floor(L.get("Minutes",F)/W)),H>=A.hour&&L.set("Hours",F,H>=A.day?0:W*Math.floor(L.get("Hours",F)/W)),H>=A.day&&L.set("Date",F,H>=A.month?1:Math.max(1,W*Math.floor(L.get("Date",F)/W))),H>=A.month&&(L.set("Month",F,H>=A.year?0:W*Math.floor(L.get("Month",F)/W)),j=L.get("FullYear",F)),H>=A.year&&(j-=j%W,L.set("FullYear",F,j)),H===A.week&&(U=L.get("Day",F),L.set("Date",F,L.get("Date",F)-U+Z+(U<Z?-7:0))),j=L.get("FullYear",F);let ne=L.get("Month",F),ue=L.get("Date",F),ie=L.get("Hours",F);N=F.getTime(),(L.variableTimezone||!L.useUTC)&&n(q)&&(V=q-N>4*A.month||L.getTimezoneOffset(N)!==L.getTimezoneOffset(q));let oe=F.getTime();for(X=1;oe<q;)G.push(oe),H===A.year?oe=L.makeTime(j+X*W,0):H===A.month?oe=L.makeTime(j,ne+X*W):V&&(H===A.day||H===A.week)?oe=L.makeTime(j,ne,ue+X*W*(H===A.day?1:7)):V&&H===A.hour&&W>1?oe=L.makeTime(j,ne,ue,ie+X*W):oe+=H*W,X++;G.push(oe),H<=A.hour&&G.length<1e4&&G.forEach(function(Se){Se%18e5==0&&L.dateFormat("%H%M%S%L",Se)==="000000000"&&($[Se]="day")})}return G.info=m(I,{higherRanks:$,totalRange:H*W}),G}getDateFormat(I,N,q,Z){let X=this.dateFormat("%m-%d %H:%M:%S.%L",N),j="01-01 00:00:00.000",V={millisecond:15,second:12,minute:9,hour:6,day:3},U="millisecond",L=U;for(U in A){if(I===A.week&&+this.dateFormat("%w",N)===q&&X.substr(6)===j.substr(6)){U="week";break}if(A[U]>I){U=L;break}if(V[U]&&X.substr(V[U])!==j.substr(V[U]))break;U!=="week"&&(L=U)}return this.resolveDTLFormat(Z[U]).main}}return D.formatCache={},D}),o(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{isTouchDevice:m}=c,{fireEvent:g,merge:v}=p,y={colors:u.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:a,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:_=>Math.sqrt(1-Math.pow(_-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:m?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};y.chart.styledMode=!1;let k=new n(y.time);return{defaultOptions:y,defaultTime:k,getOptions:function(){return y},setOptions:function(_){return g(c,"setOptions",{options:_}),v(!0,y,_),(_.time||_.global)&&(c.time?c.time.update(v(y.global,y.time,_.global,_.time)):c.time=k),y}}}),o(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{isNumber:u,merge:n,pInt:p}=c;class m{static parse(v){return v?new m(v):m.None}constructor(v){let y,k,_,T;this.rgba=[NaN,NaN,NaN,NaN],this.input=v;let M=a.Color;if(M&&M!==m)return new M(v);if(typeof v=="object"&&v.stops!==void 0)this.stops=v.stops.map(A=>new m(A[1]));else if(typeof v=="string"){if(this.input=v=m.names[v.toLowerCase()]||v,v.charAt(0)==="#"){let A=v.length,x=parseInt(v.substr(1),16);A===7?k=[(16711680&x)>>16,(65280&x)>>8,255&x,1]:A===4&&(k=[(3840&x)>>4|(3840&x)>>8,(240&x)>>4|240&x,(15&x)<<4|15&x,1])}if(!k)for(_=m.parsers.length;_--&&!k;)(y=(T=m.parsers[_]).regex.exec(v))&&(k=T.parse(y))}k&&(this.rgba=k)}get(v){let y=this.input,k=this.rgba;if(typeof y=="object"&&this.stops!==void 0){let _=n(y);return _.stops=[].slice.call(_.stops),this.stops.forEach((T,M)=>{_.stops[M]=[_.stops[M][0],T.get(v)]}),_}return k&&u(k[0])?v!=="rgb"&&(v||k[3]!==1)?v==="a"?`${k[3]}`:"rgba("+k.join(",")+")":"rgb("+k[0]+","+k[1]+","+k[2]+")":y}brighten(v){let y=this.rgba;if(this.stops)this.stops.forEach(function(k){k.brighten(v)});else if(u(v)&&v!==0)for(let k=0;k<3;k++)y[k]+=p(255*v),y[k]<0&&(y[k]=0),y[k]>255&&(y[k]=255);return this}setOpacity(v){return this.rgba[3]=v,this}tweenTo(v,y){let k=this.rgba,_=v.rgba;if(!u(k[0])||!u(_[0]))return v.input||"none";let T=_[3]!==1||k[3]!==1;return(T?"rgba(":"rgb(")+Math.round(_[0]+(k[0]-_[0])*(1-y))+","+Math.round(_[1]+(k[1]-_[1])*(1-y))+","+Math.round(_[2]+(k[2]-_[2])*(1-y))+(T?","+(_[3]+(k[3]-_[3])*(1-y)):"")+")"}}return m.names={white:"#ffffff",black:"#000000"},m.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),parseFloat(g[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),1]}}],m.None=new m(""),m}),o(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{parse:n}=a,{win:p}=c,{isNumber:m,objectEach:g}=u;class v{constructor(k,_,T){this.pos=NaN,this.options=_,this.elem=k,this.prop=T}dSetter(){let k=this.paths,_=k&&k[0],T=k&&k[1],M=this.now||0,A=[];if(M!==1&&_&&T)if(_.length===T.length&&M<1)for(let x=0;x<T.length;x++){let P=_[x],D=T[x],w=[];for(let I=0;I<D.length;I++){let N=P[I],q=D[I];m(N)&&m(q)&&!(D[0]==="A"&&(I===4||I===5))?w[I]=N+M*(q-N):w[I]=q}A.push(w)}else A=T;else A=this.toD||[];this.elem.attr("d",A,void 0,!0)}update(){let k=this.elem,_=this.prop,T=this.now,M=this.options.step;this[_+"Setter"]?this[_+"Setter"]():k.attr?k.element&&k.attr(_,T,null,!0):k.style[_]=T+this.unit,M&&M.call(k,T,this)}run(k,_,T){let M=this,A=M.options,x=function(w){return!x.stopped&&M.step(w)},P=p.requestAnimationFrame||function(w){setTimeout(w,13)},D=function(){for(let w=0;w<v.timers.length;w++)v.timers[w]()||v.timers.splice(w--,1);v.timers.length&&P(D)};k!==_||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=k,this.end=_,this.unit=T,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&v.timers.push(x)===1&&P(D)):(delete A.curAnim[this.prop],A.complete&&Object.keys(A.curAnim).length===0&&A.complete.call(this.elem))}step(k){let _,T,M=+new Date,A=this.options,x=this.elem,P=A.complete,D=A.duration,w=A.curAnim;return x.attr&&!x.element?_=!1:k||M>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),w[this.prop]=!0,T=!0,g(w,function(I){I!==!0&&(T=!1)}),T&&P&&P.call(x),_=!1):(this.pos=A.easing((M-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),_=!0),_}initPath(k,_,T){let M=k.startX,A=k.endX,x=T.slice(),P=k.isArea,D=P?2:1,w=_&&T.length>_.length&&T.hasStackedCliffs,I,N,q,Z,X=_&&_.slice();if(!X||w)return[x,x];function j(U,L){for(;U.length<N;){let R=U[0],G=L[N-U.length];if(G&&R[0]==="M"&&(G[0]==="C"?U[0]=["C",R[1],R[2],R[1],R[2],R[1],R[2]]:U[0]=["L",R[1],R[2]]),U.unshift(R),P){let $=U.pop();U.push(U[U.length-1],$)}}}function V(U){for(;U.length<N;){let L=U[Math.floor(U.length/D)-1].slice();if(L[0]==="C"&&(L[1]=L[5],L[2]=L[6]),P){let R=U[Math.floor(U.length/D)].slice();U.splice(U.length/2,0,L,R)}else U.push(L)}}if(M&&A&&A.length){for(q=0;q<M.length;q++){if(M[q]===A[0]){I=q;break}if(M[0]===A[A.length-M.length+q]){I=q,Z=!0;break}if(M[M.length-1]===A[A.length-M.length+q]){I=M.length-q;break}}I===void 0&&(X=[])}return X.length&&m(I)&&(N=x.length+I*D,Z?(j(X,x),V(x)):(j(x,X),V(X))),[X,x]}fillSetter(){v.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}}return v.timers=[],v}),o(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(a,c){let{defined:u,getStyle:n,isArray:p,isNumber:m,isObject:g,merge:v,objectEach:y,pick:k}=c;function _(M){return g(M)?v({duration:500,defer:0},M):{duration:M?500:0,defer:0}}function T(M,A){let x=a.timers.length;for(;x--;)a.timers[x].elem!==M||A&&A!==a.timers[x].prop||(a.timers[x].stopped=!0)}return{animate:function(M,A,x){let P,D="",w,I,N;g(x)||(N=arguments,x={duration:N[2],easing:N[3],complete:N[4]}),m(x.duration)||(x.duration=400),x.easing=typeof x.easing=="function"?x.easing:Math[x.easing]||Math.easeInOutSine,x.curAnim=v(A),y(A,function(q,Z){T(M,Z),I=new a(M,x,Z),w=void 0,Z==="d"&&p(A.d)?(I.paths=I.initPath(M,M.pathArray,A.d),I.toD=A.d,P=0,w=1):M.attr?P=M.attr(Z):(P=parseFloat(n(M,Z))||0,Z!=="opacity"&&(D="px")),w||(w=q),typeof w=="string"&&w.match("px")&&(w=w.replace(/px/g,"")),I.run(P,w,D)})},animObject:_,getDeferredAnimation:function(M,A,x){let P=_(A),D=x?[x]:M.series,w=0,I=0;return D.forEach(N=>{let q=_(N.options.animation);w=g(A)&&u(A.defer)?P.defer:Math.max(w,q.duration+q.defer),I=Math.min(P.duration,q.duration)}),M.renderer.forExport&&(w=0),{defer:Math.max(0,w-I),duration:Math.min(w,I)}},setAnimation:function(M,A){A.renderer.globalAnimation=k(M,A.options.chart.animation,!0)},stop:T}}),o(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{SVG_NS:u,win:n}=a,{attr:p,createElement:m,css:g,error:v,isFunction:y,isString:k,objectEach:_,splat:T}=c,{trustedTypes:M}=n,A=M&&y(M.createPolicy)&&M.createPolicy("highcharts",{createHTML:w=>w}),x=A?A.createHTML(""):"",P=function(){try{return!!new DOMParser().parseFromString(x,"text/html")}catch{return!1}}();class D{static filterUserAttributes(I){return _(I,(N,q)=>{let Z=!0;D.allowedAttributes.indexOf(q)===-1&&(Z=!1),["background","dynsrc","href","lowsrc","src"].indexOf(q)!==-1&&(Z=k(N)&&D.allowedReferences.some(X=>N.indexOf(X)===0)),Z||(v(33,!1,void 0,{"Invalid attribute in config":`${q}`}),delete I[q]),k(N)&&I[q]&&(I[q]=N.replace(/</g,"&lt;"))}),I}static parseStyle(I){return I.split(";").reduce((N,q)=>{let Z=q.split(":").map(j=>j.trim()),X=Z.shift();return X&&Z.length&&(N[X.replace(/-([a-z])/g,j=>j[1].toUpperCase())]=Z.join(":")),N},{})}static setElementHTML(I,N){I.innerHTML=D.emptyHTML,N&&new D(N).addToDOM(I)}constructor(I){this.nodes=typeof I=="string"?this.parseMarkup(I):I}addToDOM(I){return function N(q,Z){let X;return T(q).forEach(function(j){let V,U=j.tagName,L=j.textContent?a.doc.createTextNode(j.textContent):void 0,R=D.bypassHTMLFiltering;if(U)if(U==="#text")V=L;else if(D.allowedTags.indexOf(U)!==-1||R){let G=U==="svg"?u:Z.namespaceURI||u,$=a.doc.createElementNS(G,U),F=j.attributes||{};_(j,function(H,W){W!=="tagName"&&W!=="attributes"&&W!=="children"&&W!=="style"&&W!=="textContent"&&(F[W]=H)}),p($,R?F:D.filterUserAttributes(F)),j.style&&g($,j.style),L&&$.appendChild(L),N(j.children||[],$),V=$}else v(33,!1,void 0,{"Invalid tagName in config":U});V&&Z.appendChild(V),X=V}),X}(this.nodes,I)}parseMarkup(I){let N,q=[];if(I=I.trim().replace(/ style=(["'])/g," data-style=$1"),P)N=new DOMParser().parseFromString(A?A.createHTML(I):I,"text/html");else{let X=m("div");X.innerHTML=I,N={body:X}}let Z=(X,j)=>{let V=X.nodeName.toLowerCase(),U={tagName:V};V==="#text"&&(U.textContent=X.textContent||"");let L=X.attributes;if(L){let R={};[].forEach.call(L,G=>{G.name==="data-style"?U.style=D.parseStyle(G.value):R[G.name]=G.value}),U.attributes=R}if(X.childNodes.length){let R=[];[].forEach.call(X.childNodes,G=>{Z(G,R)}),R.length&&(U.children=R)}j.push(U)};return[].forEach.call(N.body.childNodes,X=>Z(X,q)),q}}return D.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],D.allowedReferences=["https://","http://","mailto:","/","../","./","#"],D.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],D.emptyHTML=x,D.bypassHTMLFiltering=!1,D}),o(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(a,c){let{defaultOptions:u,defaultTime:n}=a,{extend:p,getNestedProperty:m,isArray:g,isNumber:v,isObject:y,pick:k,pInt:_}=c,T={add:(x,P)=>x+P,divide:(x,P)=>P!==0?x/P:"",eq:(x,P)=>x==P,each:function(x){let P=arguments[arguments.length-1];return!!g(x)&&x.map((D,w)=>M(P.body,p(y(D)?D:{"@this":D},{"@index":w,"@first":w===0,"@last":w===x.length-1}))).join("")},ge:(x,P)=>x>=P,gt:(x,P)=>x>P,if:x=>!!x,le:(x,P)=>x<=P,lt:(x,P)=>x<P,multiply:(x,P)=>x*P,ne:(x,P)=>x!=P,subtract:(x,P)=>x-P,unless:x=>!x};function M(x="",P,D){let w=/\{([\w\:\.\,;\-\/<>%@"'’= #\(\)]+)\}/g,I=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],q=/f$/,Z=/\.(\d)/,X=u.lang,j=D&&D.time||n,V=D&&D.numberFormatter||A,U=(F="")=>{let H;return F==="true"||F!=="false"&&((H=Number(F)).toString()===F?H:m(F,P))},L,R,G=0,$;for(;(L=w.exec(x))!==null;){let F=I.exec(L[1]);F&&(L=F,$=!0),R&&R.isBlock||(R={ctx:P,expression:L[1],find:L[0],isBlock:L[1].charAt(0)==="#",start:L.index,startInner:L.index+L[0].length,length:L[0].length});let H=L[1].split(" ")[0].replace("#","");T[H]&&(R.isBlock&&H===R.fn&&G++,R.fn||(R.fn=H));let W=L[1]==="else";if(R.isBlock&&R.fn&&(L[1]===`/${R.fn}`||W))if(G)!W&&G--;else{let ne=R.startInner,ue=x.substr(ne,L.index-ne);R.body===void 0?(R.body=ue,R.startInner=L.index+L[0].length):R.elseBody=ue,R.find+=ue+L[0],W||(N.push(R),R=void 0)}else R.isBlock||N.push(R);if(F&&!(R!=null&&R.isBlock))break}return N.forEach(F=>{let H,W,{body:ne,elseBody:ue,expression:ie,fn:oe}=F;if(oe){let Se=[F],ye=ie.split(" ");for(W=T[oe].length;W--;)Se.unshift(U(ye[W+1]));H=T[oe].apply(P,Se),F.isBlock&&typeof H=="boolean"&&(H=M(H?ne:ue,P,D))}else{let Se=ie.split(":");if(H=U(Se.shift()||""),Se.length&&typeof H=="number"){let ye=Se.join(":");if(q.test(ye)){let Ce=parseInt((ye.match(Z)||["","-1"])[1],10);H!==null&&(H=V(H,Ce,X.decimalPoint,ye.indexOf(",")>-1?X.thousandsSep:""))}else H=j.dateFormat(ye,H)}}x=x.replace(F.find,k(H,""))}),$?M(x,P,D):x}function A(x,P,D,w){let I,N;x=+x||0,P=+P;let q=u.lang,Z=(x.toString().split(".")[1]||"").split("e")[0].length,X=x.toString().split("e"),j=P;P===-1?P=Math.min(Z,20):v(P)?P&&X[1]&&X[1]<0&&((N=P+ +X[1])>=0?(X[0]=(+X[0]).toExponential(N).split("e")[0],P=N):(X[0]=X[0].split(".")[0]||0,x=P<20?(X[0]*Math.pow(10,X[1])).toFixed(P):0,X[1]=0)):P=2;let V=(Math.abs(X[1]?X[0]:x)+Math.pow(10,-Math.max(P,Z)-1)).toFixed(P),U=String(_(V)),L=U.length>3?U.length%3:0;return D=k(D,q.decimalPoint),w=k(w,q.thousandsSep),I=(x<0?"-":"")+(L?U.substr(0,L)+w:""),0>+X[1]&&!j?I="0":I+=U.substr(L).replace(/(\d{3})(?=\d)/g,"$1"+w),P?I+=D+V.slice(-P):+I==0&&(I="0"),X[1]&&+I!=0&&(I+="e"+X[1]),I}return{dateFormat:function(x,P,D){return n.dateFormat(x,P,D)},format:M,helpers:T,numberFormat:A}}),o(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(a){var c,u;let n;return(u=c||(c={})).rendererTypes={},u.getRendererType=function(p=n){return u.rendererTypes[p]||u.rendererTypes[n]},u.registerRendererType=function(p,m,g){u.rendererTypes[p]=m,(!n||g)&&(n=p,a.Renderer=m)},c}),o(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(a){var c;let{clamp:u,pick:n,pushUnique:p,stableSort:m}=a;return(c||(c={})).distribute=function g(v,y,k){let _=v,T=_.reducedLen||y,M=(U,L)=>U.target-L.target,A=[],x=v.length,P=[],D=A.push,w,I,N,q=!0,Z,X,j=0,V;for(w=x;w--;)j+=v[w].size;if(j>T){for(m(v,(U,L)=>(L.rank||0)-(U.rank||0)),N=(V=v[0].rank===v[v.length-1].rank)?x/2:-1,I=V?N:x-1;N&&j>T;)Z=v[w=Math.floor(I)],p(P,w)&&(j-=Z.size),I+=N,V&&I>=v.length&&(N/=2,I=N);P.sort((U,L)=>L-U).forEach(U=>D.apply(A,v.splice(U,1)))}for(m(v,M),v=v.map(U=>({size:U.size,targets:[U.target],align:n(U.align,.5)}));q;){for(w=v.length;w--;)Z=v[w],X=(Math.min.apply(0,Z.targets)+Math.max.apply(0,Z.targets))/2,Z.pos=u(X-Z.size*Z.align,0,y-Z.size);for(w=v.length,q=!1;w--;)w>0&&v[w-1].pos+v[w-1].size>v[w].pos&&(v[w-1].size+=v[w].size,v[w-1].targets=v[w-1].targets.concat(v[w].targets),v[w-1].align=.5,v[w-1].pos+v[w-1].size>y&&(v[w-1].pos=y-v[w-1].size),v.splice(w,1),q=!0)}return D.apply(_,A),w=0,v.some(U=>{let L=0;return(U.targets||[]).some(()=>(_[w].pos=U.pos+L,k!==void 0&&Math.abs(_[w].pos-_[w].target)>k?(_.slice(0,w+1).forEach(R=>delete R.pos),_.reducedLen=(_.reducedLen||y)-.1*y,_.reducedLen>.1*y&&g(_,y,k),!0):(L+=_[w].size,w++,!1)))}),m(_,M),_},c}),o(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{animate:p,animObject:m,stop:g}=a,{deg2rad:v,doc:y,svg:k,SVG_NS:_,win:T}=u,{addEvent:M,attr:A,createElement:x,crisp:P,css:D,defined:w,erase:I,extend:N,fireEvent:q,isArray:Z,isFunction:X,isObject:j,isString:V,merge:U,objectEach:L,pick:R,pInt:G,pushUnique:$,replaceNested:F,syncTimeout:H,uniqueKey:W}=n;class ne{_defaultGetter(ie){let oe=R(this[ie+"Value"],this[ie],this.element?this.element.getAttribute(ie):null,0);return/^-?[\d\.]+$/.test(oe)&&(oe=parseFloat(oe)),oe}_defaultSetter(ie,oe,Se){Se.setAttribute(oe,ie)}add(ie){let oe,Se=this.renderer,ye=this.element;return ie&&(this.parentGroup=ie),this.textStr!==void 0&&this.element.nodeName==="text"&&Se.buildText(this),this.added=!0,(!ie||ie.handleZ||this.zIndex)&&(oe=this.zIndexSetter()),oe||(ie?ie.element:Se.box).appendChild(ye),this.onAdd&&this.onAdd(),this}addClass(ie,oe){let Se=oe?"":this.attr("class")||"";return(ie=(ie||"").split(/ /g).reduce(function(ye,Ce){return Se.indexOf(Ce)===-1&&ye.push(Ce),ye},Se?[Se]:[]).join(" "))!==Se&&this.attr("class",ie),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(ie,oe,Se,ye=!0){let Ce,K,Q,ae,ve={},J=this.renderer,re=J.alignedObjects,ce=!!ie;ie?(this.alignOptions=ie,this.alignByTranslate=oe,this.alignTo=Se):(ie=this.alignOptions||{},oe=this.alignByTranslate,Se=this.alignTo);let ge=!Se||V(Se)?Se||"renderer":void 0;ge&&(ce&&$(re,this),Se=void 0);let _e=R(Se,J[ge],J),ze=ie.align,Te=ie.verticalAlign;return Ce=(_e.x||0)+(ie.x||0),K=(_e.y||0)+(ie.y||0),ze==="right"?Q=1:ze==="center"&&(Q=2),Q&&(Ce+=((_e.width||0)-(ie.width||0))/Q),ve[oe?"translateX":"x"]=Math.round(Ce),Te==="bottom"?ae=1:Te==="middle"&&(ae=2),ae&&(K+=((_e.height||0)-(ie.height||0))/ae),ve[oe?"translateY":"y"]=Math.round(K),ye&&(this[this.placed?"animate":"attr"](ve),this.placed=!0),this.alignAttr=ve,this}alignSetter(ie){let oe={left:"start",center:"middle",right:"end"};oe[ie]&&(this.alignValue=ie,this.element.setAttribute("text-anchor",oe[ie]))}animate(ie,oe,Se){let ye=m(R(oe,this.renderer.globalAnimation,!0)),Ce=ye.defer;return y.hidden&&(ye.duration=0),ye.duration!==0?(Se&&(ye.complete=Se),H(()=>{this.element&&p(this,ie,ye)},Ce)):(this.attr(ie,void 0,Se||ye.complete),L(ie,function(K,Q){ye.step&&ye.step.call(this,K,{prop:Q,pos:1,elem:this})},this)),this}applyTextOutline(ie){let oe=this.element;ie.indexOf("contrast")!==-1&&(ie=ie.replace(/contrast/g,this.renderer.getContrast(oe.style.fill)));let Se=ie.split(" "),ye=Se[Se.length-1],Ce=Se[0];if(Ce&&Ce!=="none"&&u.svg){this.fakeTS=!0,Ce=Ce.replace(/(^[\d\.]+)(.*?)$/g,function(J,re,ce){return 2*Number(re)+ce}),this.removeTextOutline();let K=y.createElementNS(_,"tspan");A(K,{class:"highcharts-text-outline",fill:ye,stroke:ye,"stroke-width":Ce,"stroke-linejoin":"round"});let Q=oe.querySelector("textPath")||oe;[].forEach.call(Q.childNodes,J=>{let re=J.cloneNode(!0);re.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ce=>re.removeAttribute(ce)),K.appendChild(re)});let ae=0;[].forEach.call(Q.querySelectorAll("text tspan"),J=>{ae+=Number(J.getAttribute("dy"))});let ve=y.createElementNS(_,"tspan");ve.textContent="​",A(ve,{x:Number(oe.getAttribute("x")),dy:-ae}),K.appendChild(ve),Q.insertBefore(K,Q.firstChild)}}attr(ie,oe,Se,ye){let{element:Ce}=this,K=ne.symbolCustomAttribs,Q,ae,ve=this,J;return typeof ie=="string"&&oe!==void 0&&(Q=ie,(ie={})[Q]=oe),typeof ie=="string"?ve=(this[ie+"Getter"]||this._defaultGetter).call(this,ie,Ce):(L(ie,function(re,ce){J=!1,ye||g(this,ce),this.symbolName&&K.indexOf(ce)!==-1&&(ae||(this.symbolAttr(ie),ae=!0),J=!0),this.rotation&&(ce==="x"||ce==="y")&&(this.doTransform=!0),J||(this[ce+"Setter"]||this._defaultSetter).call(this,re,ce,Ce)},this),this.afterSetters()),Se&&Se.call(this),ve}clip(ie){if(ie&&!ie.clipPath){let oe=W()+"-",Se=this.renderer.createElement("clipPath").attr({id:oe}).add(this.renderer.defs);N(ie,{clipPath:Se,id:oe,count:0}),ie.add(Se)}return this.attr("clip-path",ie?`url(${this.renderer.url}#${ie.id})`:"none")}crisp(ie,oe){oe=Math.round(oe||ie.strokeWidth||0);let Se=ie.x||this.x||0,ye=ie.y||this.y||0,Ce=(ie.width||this.width||0)+Se,K=(ie.height||this.height||0)+ye,Q=P(Se,oe),ae=P(ye,oe);return N(ie,{x:Q,y:ae,width:P(Ce,oe)-Q,height:P(K,oe)-ae}),w(ie.strokeWidth)&&(ie.strokeWidth=oe),ie}complexColor(ie,oe,Se){let ye=this.renderer,Ce,K,Q,ae,ve,J,re,ce,ge,_e,ze=[],Te;q(this.renderer,"complexColor",{args:arguments},function(){if(ie.radialGradient?K="radialGradient":ie.linearGradient&&(K="linearGradient"),K){if(Q=ie[K],ve=ye.gradients,J=ie.stops,ge=Se.radialReference,Z(Q)&&(ie[K]=Q={x1:Q[0],y1:Q[1],x2:Q[2],y2:Q[3],gradientUnits:"userSpaceOnUse"}),K==="radialGradient"&&ge&&!w(Q.gradientUnits)&&(ae=Q,Q=U(Q,ye.getRadialAttr(ge,ae),{gradientUnits:"userSpaceOnUse"})),L(Q,function(Ie,Be){Be!=="id"&&ze.push(Be,Ie)}),L(J,function(Ie){ze.push(Ie)}),ve[ze=ze.join(",")])_e=ve[ze].attr("id");else{Q.id=_e=W();let Ie=ve[ze]=ye.createElement(K).attr(Q).add(ye.defs);Ie.radAttr=ae,Ie.stops=[],J.forEach(function(Be){Be[1].indexOf("rgba")===0?(re=(Ce=c.parse(Be[1])).get("rgb"),ce=Ce.get("a")):(re=Be[1],ce=1);let Ge=ye.createElement("stop").attr({offset:Be[0],"stop-color":re,"stop-opacity":ce}).add(Ie);Ie.stops.push(Ge)})}Te="url("+ye.url+"#"+_e+")",Se.setAttribute(oe,Te),Se.gradient=ze,ie.toString=function(){return Te}}})}css(ie){let oe=this.styles,Se={},ye=this.element,Ce,K=!oe;if(oe&&L(ie,function(Q,ae){oe&&oe[ae]!==Q&&(Se[ae]=Q,K=!0)}),K){oe&&(ie=N(oe,Se)),ie.width===null||ie.width==="auto"?delete this.textWidth:ye.nodeName.toLowerCase()==="text"&&ie.width&&(Ce=this.textWidth=G(ie.width)),N(this.styles,ie),Ce&&!k&&this.renderer.forExport&&delete ie.width;let Q=U(ie);ye.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(ae=>Q&&delete Q[ae]),Q.color&&(Q.fill=Q.color)),D(ye,Q)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),ie.textOutline&&this.applyTextOutline(ie.textOutline)),this}dashstyleSetter(ie){let oe,Se=this["stroke-width"];if(Se==="inherit"&&(Se=1),ie=ie&&ie.toLowerCase()){let ye=ie.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(oe=ye.length;oe--;)ye[oe]=""+G(ye[oe])*R(Se,NaN);ie=ye.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",ie)}}destroy(){var ae;let ie=this,oe=ie.element||{},Se=ie.renderer,ye=oe.ownerSVGElement,Ce=oe.nodeName==="SPAN"&&ie.parentGroup||void 0,K,Q;if(oe.onclick=oe.onmouseout=oe.onmouseover=oe.onmousemove=oe.point=null,g(ie),ie.clipPath&&ye){let ve=ie.clipPath;[].forEach.call(ye.querySelectorAll("[clip-path],[CLIP-PATH]"),function(J){J.getAttribute("clip-path").indexOf(ve.element.id)>-1&&J.removeAttribute("clip-path")}),ie.clipPath=ve.destroy()}if(ie.connector=(ae=ie.connector)==null?void 0:ae.destroy(),ie.stops){for(Q=0;Q<ie.stops.length;Q++)ie.stops[Q].destroy();ie.stops.length=0,ie.stops=void 0}for(ie.safeRemoveChild(oe);Ce&&Ce.div&&Ce.div.childNodes.length===0;)K=Ce.parentGroup,ie.safeRemoveChild(Ce.div),delete Ce.div,Ce=K;ie.alignOptions&&I(Se.alignedObjects,ie),L(ie,function(ve,J){ie[J]&&ie[J].parentGroup===ie&&ie[J].destroy&&ie[J].destroy(),delete ie[J]})}dSetter(ie,oe,Se){Z(ie)&&(typeof ie[0]=="string"&&(ie=this.renderer.pathToSegments(ie)),this.pathArray=ie,ie=ie.reduce((ye,Ce,K)=>Ce&&Ce.join?(K?ye+" ":"")+Ce.join(" "):(Ce||"").toString(),"")),/(NaN| {2}|^$)/.test(ie)&&(ie="M 0 0"),this[oe]!==ie&&(Se.setAttribute(oe,ie),this[oe]=ie)}fillSetter(ie,oe,Se){typeof ie=="string"?Se.setAttribute(oe,ie):ie&&this.complexColor(ie,oe,Se)}hrefSetter(ie,oe,Se){Se.setAttributeNS("http://www.w3.org/1999/xlink",oe,ie)}getBBox(ie,oe){let Se,ye,Ce,K,{alignValue:Q,element:ae,renderer:ve,styles:J,textStr:re}=this,{cache:ce,cacheKeys:ge}=ve,_e=ae.namespaceURI===this.SVG_NS,ze=R(oe,this.rotation,0),Te=ve.styledMode?ae&&ne.prototype.getStyle.call(ae,"font-size"):J.fontSize;if(w(re)&&((K=re.toString()).indexOf("<")===-1&&(K=K.replace(/\d/g,"0")),K+=["",ve.rootFontSize,Te,ze,this.textWidth,Q,J.textOverflow,J.fontWeight].join(",")),K&&!ie&&(Se=ce[K]),!Se||Se.polygon){if(_e||ve.forExport){try{Ce=this.fakeTS&&function(Be){let Ge=ae.querySelector(".highcharts-text-outline");Ge&&D(Ge,{display:Be})},X(Ce)&&Ce("none"),Se=ae.getBBox?N({},ae.getBBox()):{width:ae.offsetWidth,height:ae.offsetHeight,x:0,y:0},X(Ce)&&Ce("")}catch{}(!Se||Se.width<0)&&(Se={x:0,y:0,width:0,height:0})}else Se=this.htmlGetBBox();ye=Se.height,_e&&(Se.height=ye={"11px,17":14,"13px,20":16}[`${Te||""},${Math.round(ye)}`]||ye),ze&&(Se=this.getRotatedBox(Se,ze));let Ie={bBox:Se};q(this,"afterGetBBox",Ie),Se=Ie.bBox}if(K&&(re===""||Se.height>0)){for(;ge.length>250;)delete ce[ge.shift()];ce[K]||ge.push(K),ce[K]=Se}return Se}getRotatedBox(ie,oe){let{x:Se,y:ye,width:Ce,height:K}=ie,{alignValue:Q,translateY:ae,rotationOriginX:ve=0,rotationOriginY:J=0}=this,re={right:1,center:.5}[Q||0]||0,ce=Number(this.element.getAttribute("y")||0)-(ae?0:ye),ge=oe*v,_e=(oe-90)*v,ze=Math.cos(ge),Te=Math.sin(ge),Ie=Ce*ze,Be=Ce*Te,Ge=Math.cos(_e),ke=Math.sin(_e),[[me,fe],[Ae,De]]=[ve,J].map(si=>[si-si*ze,si*Te]),Pe=Se+re*(Ce-Ie)+me+De+ce*Ge,je=Pe+Ie,Xe=je-K*Ge,et=Xe-Ie,rt=ye+ce-re*Be-fe+Ae+ce*ke,dt=rt+Be,gt=dt-K*ke,wt=gt-Be,Rt=Math.min(Pe,je,Xe,et),ft=Math.min(rt,dt,gt,wt),Ct=Math.max(Pe,je,Xe,et)-Rt,Tt=Math.max(rt,dt,gt,wt)-ft;return{x:Rt,y:ft,width:Ct,height:Tt,polygon:[[Pe,rt],[je,dt],[Xe,gt],[et,wt]]}}getStyle(ie){return T.getComputedStyle(this.element||this,"").getPropertyValue(ie)}hasClass(ie){return(""+this.attr("class")).split(" ").indexOf(ie)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(ie,oe){this.onEvents={},this.opacity=1,this.SVG_NS=_,this.element=oe==="span"||oe==="body"?x(oe):y.createElementNS(this.SVG_NS,oe),this.renderer=ie,this.styles={},q(this,"afterInit")}on(ie,oe){let{onEvents:Se}=this;return Se[ie]&&Se[ie](),Se[ie]=M(this.element,ie,oe),this}opacitySetter(ie,oe,Se){let ye=Number(Number(ie).toFixed(3));this.opacity=ye,Se.setAttribute(oe,ye)}reAlign(){var ie;(ie=this.alignOptions)!=null&&ie.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(ie){return this.attr("class",(""+this.attr("class")).replace(V(ie)?RegExp(`(^| )${ie}( |$)`):ie," ").replace(/ +/g," ").trim())}removeTextOutline(){let ie=this.element.querySelector("tspan.highcharts-text-outline");ie&&this.safeRemoveChild(ie)}safeRemoveChild(ie){let oe=ie.parentNode;oe&&oe.removeChild(ie)}setRadialReference(ie){let oe=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=ie,oe&&oe.radAttr&&oe.animate(this.renderer.getRadialAttr(ie,oe.radAttr)),this}shadow(ie){var Ce;let{renderer:oe}=this,Se=U(((Ce=this.parentGroup)==null?void 0:Ce.rotation)===90?{offsetX:-1,offsetY:-1}:{},j(ie)?ie:{}),ye=oe.shadowDefinition(Se);return this.attr({filter:ie?`url(${oe.url}#${ye})`:"none"})}show(ie=!0){return this.attr({visibility:ie?"inherit":"visible"})}"stroke-widthSetter"(ie,oe,Se){this[oe]=ie,Se.setAttribute(oe,ie)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let ie=this.getStyle("stroke-width"),oe=0,Se;return/px$/.test(ie)?oe=G(ie):ie!==""&&(A(Se=y.createElementNS(_,"rect"),{width:ie,"stroke-width":0}),this.element.parentNode.appendChild(Se),oe=Se.getBBox().width,Se.parentNode.removeChild(Se)),oe}symbolAttr(ie){let oe=this;ne.symbolCustomAttribs.forEach(function(Se){oe[Se]=R(ie[Se],oe[Se])}),oe.attr({d:oe.renderer.symbols[oe.symbolName](oe.x,oe.y,oe.width,oe.height,oe)})}textSetter(ie){ie!==this.textStr&&(delete this.textPxLength,this.textStr=ie,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(ie){let oe=this.element,Se=oe.getElementsByTagName("title")[0]||y.createElementNS(this.SVG_NS,"title");oe.insertBefore?oe.insertBefore(Se,oe.firstChild):oe.appendChild(Se),Se.textContent=F(R(ie,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let ie=this.element;return ie.parentNode.appendChild(ie),this}translate(ie,oe){return this.attr({translateX:ie,translateY:oe})}updateTransform(ie="transform"){var ce;let{element:oe,matrix:Se,rotation:ye=0,rotationOriginX:Ce,rotationOriginY:K,scaleX:Q,scaleY:ae,translateX:ve=0,translateY:J=0}=this,re=["translate("+ve+","+J+")"];w(Se)&&re.push("matrix("+Se.join(",")+")"),ye&&(re.push("rotate("+ye+" "+R(Ce,oe.getAttribute("x"),0)+" "+R(K,oe.getAttribute("y")||0)+")"),((ce=this.text)==null?void 0:ce.element.tagName)==="SPAN"&&this.text.attr({rotation:ye,rotationOriginX:(Ce||0)-this.padding,rotationOriginY:(K||0)-this.padding})),(w(Q)||w(ae))&&re.push("scale("+R(Q,1)+" "+R(ae,1)+")"),re.length&&!(this.text||this).textPath&&oe.setAttribute(ie,re.join(" "))}visibilitySetter(ie,oe,Se){ie==="inherit"?Se.removeAttribute(oe):this[oe]!==ie&&Se.setAttribute(oe,ie),this[oe]=ie}xGetter(ie){return this.element.nodeName==="circle"&&(ie==="x"?ie="cx":ie==="y"&&(ie="cy")),this._defaultGetter(ie)}zIndexSetter(ie,oe){let Se=this.renderer,ye=this.parentGroup,Ce=(ye||Se).element||Se.box,K=this.element,Q=Ce===Se.box,ae,ve,J,re=!1,ce,ge=this.added,_e;if(w(ie)?(K.setAttribute("data-z-index",ie),ie=+ie,this[oe]===ie&&(ge=!1)):w(this[oe])&&K.removeAttribute("data-z-index"),this[oe]=ie,ge){for((ie=this.zIndex)&&ye&&(ye.handleZ=!0),_e=(ae=Ce.childNodes).length-1;_e>=0&&!re;_e--)ce=!w(J=(ve=ae[_e]).getAttribute("data-z-index")),ve!==K&&(ie<0&&ce&&!Q&&!_e?(Ce.insertBefore(K,ae[_e]),re=!0):(G(J)<=ie||ce&&(!w(ie)||ie>=0))&&(Ce.insertBefore(K,ae[_e+1]),re=!0));re||(Ce.insertBefore(K,ae[Q?3:0]),re=!0)}return re}}return ne.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],ne.prototype.strokeSetter=ne.prototype.fillSetter,ne.prototype.yGetter=ne.prototype.xGetter,ne.prototype.matrixSetter=ne.prototype.rotationOriginXSetter=ne.prototype.rotationOriginYSetter=ne.prototype.rotationSetter=ne.prototype.scaleXSetter=ne.prototype.scaleYSetter=ne.prototype.translateXSetter=ne.prototype.translateYSetter=ne.prototype.verticalAlignSetter=function(ue,ie){this[ie]=ue,this.doTransform=!0},ne}),o(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,c){let{defined:u,extend:n,isNumber:p,merge:m,pick:g,removeEvent:v}=c;class y extends a{constructor(_,T,M,A,x,P,D,w,I,N){let q;super(_,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=T,this.x=M,this.y=A,this.anchorX=P,this.anchorY=D,this.baseline=I,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=_.text(void 0,0,0,w).attr({zIndex:1}),typeof x=="string"&&((q=/^url\((.*?)\)$/.test(x))||this.renderer.symbols[x])&&(this.symbolKey=x),this.bBox=y.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=_.styledMode||q,this.deferredAttr={},this.alignFactor=0}alignSetter(_){let T={left:0,center:.5,right:1}[_];T!==this.alignFactor&&(this.alignFactor=T,this.bBox&&p(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(_,T){this.anchorX=_,this.boxAttr(T,Math.round(_)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(_,T){this.anchorY=_,this.boxAttr(T,_-this.ySetting)}boxAttr(_,T){this.box?this.box.attr(_,T):this.deferredAttr[_]=T}css(_){if(_){let T={};_=m(_),y.textProps.forEach(M=>{_[M]!==void 0&&(T[M]=_[M],delete _[M])}),this.text.css(T),"fontSize"in T||"fontWeight"in T?this.updateTextPadding():("width"in T||"textOverflow"in T)&&this.updateBoxSize()}return a.prototype.css.call(this,_)}destroy(){v(this.element,"mouseenter"),v(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),a.prototype.destroy.call(this)}fillSetter(_,T){_&&(this.needsBox=!0),this.fill=_,this.boxAttr(T,_)}getBBox(_,T){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:M,height:A=0,translateX:x=0,translateY:P=0,width:D=0}=this,w=g(this.paddingLeft,M),I=T??(this.rotation||0),N={width:D,height:A,x:x+this.bBox.x-w,y:P+this.bBox.y-M+this.baselineOffset};return I&&(N=this.getRotatedBox(N,I)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(_){this.heightSetting=_,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:g(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&u(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(_,T){p(_)?_!==this[T]&&(this[T]=_,this.updateTextPadding()):this[T]=void 0}rSetter(_,T){this.boxAttr(T,_)}strokeSetter(_,T){this.stroke=_,this.boxAttr(T,_)}"stroke-widthSetter"(_,T){_&&(this.needsBox=!0),this["stroke-width"]=_,this.boxAttr(T,_)}"text-alignSetter"(_){this.textAlign=_}textSetter(_){_!==void 0&&this.text.attr({text:_}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let _,T=this.text,M={},A=this.padding,x=this.bBox=(!p(this.widthSetting)||!p(this.heightSetting)||this.textAlign)&&u(T.textStr)?T.getBBox(void 0,0):y.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||x.height||0)+2*A;let P=this.renderer.fontMetrics(T);if(this.baselineOffset=A+Math.min((this.text.firstLineMetrics||P).b,x.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-P.h)/2),this.needsBox&&!T.textPath){if(!this.box){let D=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();D.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),D.add(this)}_=this.getCrispAdjust(),M.x=_,M.y=(this.baseline?-this.baselineOffset:0)+_,M.width=Math.round(this.width),M.height=Math.round(this.height),this.box.attr(n(M,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let _=this.text;if(!_.textPath){this.updateBoxSize();let T=this.baseline?0:this.baselineOffset,M=g(this.paddingLeft,this.padding);u(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(M+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(M!==_.x||T!==_.y)&&(_.attr("x",M),_.hasBoxWidthChanged&&(this.bBox=_.getBBox(!0)),T!==void 0&&_.attr("y",T)),_.x=M,_.y=T}}widthSetter(_){this.widthSetting=p(_)?_:void 0,this.doUpdate=!0}getPaddedWidth(){let _=this.padding,T=g(this.paddingLeft,_),M=g(this.paddingRight,_);return(this.widthSetting||this.bBox.width||0)+T+M}xSetter(_){this.x=_,this.alignFactor&&(_-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(_),this.attr("translateX",this.xSetting)}ySetter(_){this.ySetting=this.y=Math.round(_),this.attr("translateY",this.ySetting)}}return y.emptyBBox={width:0,height:0,x:0,y:0},y.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],y}),o(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(a){let{defined:c,isNumber:u,pick:n}=a;function p(v,y,k,_,T){let M=[];if(T){let A=T.start||0,x=n(T.r,k),P=n(T.r,_||k),D=2e-4/(T.borderRadius?1:Math.max(x,1)),w=Math.abs((T.end||0)-A-2*Math.PI)<D,I=(T.end||0)-(w?D:0),N=T.innerR,q=n(T.open,w),Z=Math.cos(A),X=Math.sin(A),j=Math.cos(I),V=Math.sin(I),U=n(T.longArc,I-A-Math.PI<D?0:1),L=["A",x,P,0,U,n(T.clockwise,1),v+x*j,y+P*V];L.params={start:A,end:I,cx:v,cy:y},M.push(["M",v+x*Z,y+P*X],L),c(N)&&((L=["A",N,N,0,U,c(T.clockwise)?1-T.clockwise:0,v+N*Z,y+N*X]).params={start:I,end:A,cx:v,cy:y},M.push(q?["M",v+N*j,y+N*V]:["L",v+N*j,y+N*V],L)),q||M.push(["Z"])}return M}function m(v,y,k,_,T){return T&&T.r?g(v,y,k,_,T):[["M",v,y],["L",v+k,y],["L",v+k,y+_],["L",v,y+_],["Z"]]}function g(v,y,k,_,T){let M=(T==null?void 0:T.r)||0;return[["M",v+M,y],["L",v+k-M,y],["A",M,M,0,0,1,v+k,y+M],["L",v+k,y+_-M],["A",M,M,0,0,1,v+k-M,y+_],["L",v+M,y+_],["A",M,M,0,0,1,v,y+_-M],["L",v,y+M],["A",M,M,0,0,1,v+M,y],["Z"]]}return{arc:p,callout:function(v,y,k,_,T){let M=Math.min(T&&T.r||0,k,_),A=M+6,x=T&&T.anchorX,P=T&&T.anchorY||0,D=g(v,y,k,_,{r:M});if(!u(x)||x<k&&x>0&&P<_&&P>0)return D;if(v+x>k-A)if(P>y+A&&P<y+_-A)D.splice(3,1,["L",v+k,P-6],["L",v+k+6,P],["L",v+k,P+6],["L",v+k,y+_-M]);else if(x<k){let w=P<y+A,I=w?y:y+_;D.splice(w?2:5,0,["L",x,P],["L",v+k-M,I])}else D.splice(3,1,["L",v+k,_/2],["L",x,P],["L",v+k,_/2],["L",v+k,y+_-M]);else if(v+x<A)if(P>y+A&&P<y+_-A)D.splice(7,1,["L",v,P+6],["L",v-6,P],["L",v,P-6],["L",v,y+M]);else if(x>0){let w=P<y+A,I=w?y:y+_;D.splice(w?1:6,0,["L",x,P],["L",v+M,I])}else D.splice(7,1,["L",v,_/2],["L",x,P],["L",v,_/2],["L",v,y+M]);else P>_&&x<k-A?D.splice(5,1,["L",x+6,y+_],["L",x,y+_+6],["L",x-6,y+_],["L",v+M,y+_]):P<0&&x>A&&D.splice(1,1,["L",x-6,y],["L",x,y-6],["L",x+6,y],["L",k-M,y]);return D},circle:function(v,y,k,_){return p(v+k/2,y+_/2,k/2,_/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(v,y,k,_){return[["M",v+k/2,y],["L",v+k,y+_/2],["L",v+k/2,y+_],["L",v,y+_/2],["Z"]]},rect:m,roundedRect:g,square:m,triangle:function(v,y,k,_){return[["M",v+k/2,y],["L",v+k,y+_],["L",v,y+_],["Z"]]},"triangle-down":function(v,y,k,_){return[["M",v,y],["L",v+k,y],["L",v+k/2,y+_],["Z"]]}}}),o(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{doc:n,SVG_NS:p,win:m}=c,{attr:g,extend:v,fireEvent:y,isString:k,objectEach:_,pick:T}=u;return class{constructor(M){let A=M.styles;this.renderer=M.renderer,this.svgElement=M,this.width=M.textWidth,this.textLineHeight=A&&A.lineHeight,this.textOutline=A&&A.textOutline,this.ellipsis=!!(A&&A.textOverflow==="ellipsis"),this.noWrap=!!(A&&A.whiteSpace==="nowrap")}buildSVG(){let M=this.svgElement,A=M.element,x=M.renderer,P=T(M.textStr,"").toString(),D=P.indexOf("<")!==-1,w=A.childNodes,I=!M.added&&x.box,N=[P,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,M.getStyle("font-size"),this.width].join(",");if(N!==M.textCache){M.textCache=N,delete M.actualWidth;for(let q=w.length;q--;)A.removeChild(w[q]);if(D||this.ellipsis||this.width||M.textPath||P.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(P))){if(P!==""){I&&I.appendChild(A);let q=new a(P);this.modifyTree(q.nodes),q.addToDOM(A),this.modifyDOM(),this.ellipsis&&(A.textContent||"").indexOf("…")!==-1&&M.attr("title",this.unescapeEntities(M.textStr||"",["&lt;","&gt;"])),I&&I.removeChild(A)}}else A.appendChild(n.createTextNode(this.unescapeEntities(P)));k(this.textOutline)&&M.applyTextOutline&&M.applyTextOutline(this.textOutline)}}modifyDOM(){let M,A=this.svgElement,x=g(A.element,"x");for(A.firstLineMetrics=void 0;(M=A.element.firstChild)&&/^[\s\u200B]*$/.test(M.textContent||" ");)A.element.removeChild(M);[].forEach.call(A.element.querySelectorAll("tspan.highcharts-br"),(I,N)=>{I.nextSibling&&I.previousSibling&&(N===0&&I.previousSibling.nodeType===1&&(A.firstLineMetrics=A.renderer.fontMetrics(I.previousSibling)),g(I,{dy:this.getLineHeight(I.nextSibling),x}))});let P=this.width||0;if(!P)return;let D=(I,N)=>{let q=I.textContent||"",Z=q.replace(/([^\^])-/g,"$1- ").split(" "),X=!this.noWrap&&(Z.length>1||A.element.childNodes.length>1),j=this.getLineHeight(N),V=0,U=A.actualWidth;if(this.ellipsis)q&&this.truncate(I,q,void 0,0,Math.max(0,P-.8*j),(L,R)=>L.substring(0,R)+"…");else if(X){let L=[],R=[];for(;N.firstChild&&N.firstChild!==I;)R.push(N.firstChild),N.removeChild(N.firstChild);for(;Z.length;)Z.length&&!this.noWrap&&V>0&&(L.push(I.textContent||""),I.textContent=Z.join(" ").replace(/- /g,"-")),this.truncate(I,void 0,Z,V===0&&U||0,P,(G,$)=>Z.slice(0,$).join(" ").replace(/- /g,"-")),U=A.actualWidth,V++;R.forEach(G=>{N.insertBefore(G,I)}),L.forEach(G=>{N.insertBefore(n.createTextNode(G),I);let $=n.createElementNS(p,"tspan");$.textContent="​",g($,{dy:j,x}),N.insertBefore($,I)})}},w=I=>{[].slice.call(I.childNodes).forEach(N=>{N.nodeType===m.Node.TEXT_NODE?D(N,I):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(A.actualWidth=0),w(N))})};w(A.element)}getLineHeight(M){let A=M.nodeType===m.Node.TEXT_NODE?M.parentElement:M;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(A||this.svgElement.element).h}modifyTree(M){let A=(x,P)=>{let{attributes:D={},children:w,style:I={},tagName:N}=x,q=this.renderer.styledMode;if(N==="b"||N==="strong"?q?D.class="highcharts-strong":I.fontWeight="bold":(N==="i"||N==="em")&&(q?D.class="highcharts-emphasized":I.fontStyle="italic"),I&&I.color&&(I.fill=I.color),N==="br"){D.class="highcharts-br",x.textContent="​";let Z=M[P+1];Z&&Z.textContent&&(Z.textContent=Z.textContent.replace(/^ +/gm,""))}else N==="a"&&w&&w.some(Z=>Z.tagName==="#text")&&(x.children=[{children:w,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(x.tagName="tspan"),v(x,{attributes:D,style:I}),w&&w.filter(Z=>Z.tagName!=="#text").forEach(A)};M.forEach(A),y(this.svgElement,"afterModifyTree",{nodes:M})}truncate(M,A,x,P,D,w){let I,N,q=this.svgElement,{rotation:Z}=q,X=[],j=x?1:0,V=(A||x||"").length,U=V,L=function(R,G){let $=G||R,F=M.parentNode;if(F&&X[$]===void 0&&F.getSubStringLength)try{X[$]=P+F.getSubStringLength(0,x?$+1:$)}catch{}return X[$]};if(q.rotation=0,P+(N=L(M.textContent.length))>D){for(;j<=V;)U=Math.ceil((j+V)/2),x&&(I=w(x,U)),N=L(U,I&&I.length-1),j===V?j=V+1:N>D?V=U-1:j=U;V===0?M.textContent="":A&&V===A.length-1||(M.textContent=I||w(A||x,U))}x&&x.splice(0,U),q.actualWidth=N,q.rotation=Z}unescapeEntities(M,A){return _(this.renderer.escapes,function(x,P){A&&A.indexOf(x)!==-1||(M=M.toString().replace(RegExp(x,"g"),P))}),M}}}),o(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y,k){let _,{defaultOptions:T}=c,{charts:M,deg2rad:A,doc:x,isFirefox:P,isMS:D,isWebKit:w,noop:I,SVG_NS:N,symbolSizes:q,win:Z}=n,{addEvent:X,attr:j,createElement:V,crisp:U,css:L,defined:R,destroyObjectProperties:G,extend:$,isArray:F,isNumber:H,isObject:W,isString:ne,merge:ue,pick:ie,pInt:oe,replaceNested:Se,uniqueKey:ye}=k;class Ce{constructor(Q,ae,ve,J,re,ce,ge){let _e,ze,Te=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Ie=Te.element;ge||Te.css(this.getStyle(J||{})),Q.appendChild(Ie),j(Q,"dir","ltr"),Q.innerHTML.indexOf("xmlns")===-1&&j(Ie,"xmlns",this.SVG_NS),this.box=Ie,this.boxWrapper=Te,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ce,this.forExport=re,this.styledMode=ge,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Te.getStyle("font-size"),this.setSize(ae,ve,!1),P&&Q.getBoundingClientRect&&((_e=function(){L(Q,{left:0,top:0}),ze=Q.getBoundingClientRect(),L(Q,{left:Math.ceil(ze.left)-ze.left+"px",top:Math.ceil(ze.top)-ze.top+"px"})})(),this.unSubPixelFix=X(Z,"resize",_e))}definition(Q){return new a([Q]).addToDOM(this.defs.element)}getReferenceURL(){if((P||w)&&x.getElementsByTagName("base").length){if(!R(_)){let Q=ye(),ae=new a([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:Q},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${Q})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(x.body);L(ae,{position:"fixed",top:0,left:0,zIndex:9e5});let ve=x.elementFromPoint(6,6);_=(ve&&ve.id)==="hitme",x.body.removeChild(ae)}if(_)return Se(Z.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(Q){return this.style=$({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},Q),this.style}setStyle(Q){this.boxWrapper.css(this.getStyle(Q))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let Q=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=Q.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(Q){return new this.Element(this,Q)}getRadialAttr(Q,ae){return{cx:Q[0]-Q[2]/2+(ae.cx||0)*Q[2],cy:Q[1]-Q[2]/2+(ae.cy||0)*Q[2],r:(ae.r||0)*Q[2]}}shadowDefinition(Q){let ae=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(Q).map(J=>`${J}-${Q[J]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),ve=ue({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},Q);return this.defs.element.querySelector(`#${ae}`)||this.definition({tagName:"filter",attributes:{id:ae,filterUnits:ve.filterUnits},children:this.getShadowFilterContent(ve)}),ae}getShadowFilterContent(Q){return[{tagName:"feDropShadow",attributes:{dx:Q.offsetX,dy:Q.offsetY,"flood-color":Q.color,"flood-opacity":Math.min(5*Q.opacity,1),stdDeviation:Q.width/2}}]}buildText(Q){new y(Q).buildSVG()}getContrast(Q){let ae=u.parse(Q).rgba.map(J=>{let re=J/255;return re<=.03928?re/12.92:Math.pow((re+.055)/1.055,2.4)}),ve=.2126*ae[0]+.7152*ae[1]+.0722*ae[2];return 1.05/(ve+.05)>(ve+.05)/.05?"#FFFFFF":"#000000"}button(Q,ae,ve,J,re={},ce,ge,_e,ze,Te){let Ie=this.label(Q,ae,ve,ze,void 0,void 0,Te,void 0,"button"),Be=this.styledMode,Ge=arguments,ke=0;re=ue(T.global.buttonTheme,re),Be&&(delete re.fill,delete re.stroke,delete re["stroke-width"]);let me=re.states||{},fe=re.style||{};delete re.states,delete re.style;let Ae=[a.filterUserAttributes(re)],De=[fe];return Be||["hover","select","disabled"].forEach((Pe,je)=>{Ae.push(ue(Ae[0],a.filterUserAttributes(Ge[je+5]||me[Pe]||{}))),De.push(Ae[je+1].style),delete Ae[je+1].style}),X(Ie.element,D?"mouseover":"mouseenter",function(){ke!==3&&Ie.setState(1)}),X(Ie.element,D?"mouseout":"mouseleave",function(){ke!==3&&Ie.setState(ke)}),Ie.setState=(Pe=0)=>{if(Pe!==1&&(Ie.state=ke=Pe),Ie.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Pe]),!Be){Ie.attr(Ae[Pe]);let je=De[Pe];W(je)&&Ie.css(je)}},Ie.attr(Ae[0]),!Be&&(Ie.css($({cursor:"default"},fe)),Te&&Ie.text.css({pointerEvents:"none"})),Ie.on("touchstart",Pe=>Pe.stopPropagation()).on("click",function(Pe){ke!==3&&J.call(Ie,Pe)})}crispLine(Q,ae){let[ve,J]=Q;return R(ve[1])&&ve[1]===J[1]&&(ve[1]=J[1]=U(ve[1],ae)),R(ve[2])&&ve[2]===J[2]&&(ve[2]=J[2]=U(ve[2],ae)),Q}path(Q){let ae=this.styledMode?{}:{fill:"none"};return F(Q)?ae.d=Q:W(Q)&&$(ae,Q),this.createElement("path").attr(ae)}circle(Q,ae,ve){let J=W(Q)?Q:Q===void 0?{}:{x:Q,y:ae,r:ve},re=this.createElement("circle");return re.xSetter=re.ySetter=function(ce,ge,_e){_e.setAttribute("c"+ge,ce)},re.attr(J)}arc(Q,ae,ve,J,re,ce){let ge;W(Q)?(ae=(ge=Q).y,ve=ge.r,J=ge.innerR,re=ge.start,ce=ge.end,Q=ge.x):ge={innerR:J,start:re,end:ce};let _e=this.symbol("arc",Q,ae,ve,ve,ge);return _e.r=ve,_e}rect(Q,ae,ve,J,re,ce){let ge=W(Q)?Q:Q===void 0?{}:{x:Q,y:ae,r:re,width:Math.max(ve||0,0),height:Math.max(J||0,0)},_e=this.createElement("rect");return this.styledMode||(ce!==void 0&&(ge["stroke-width"]=ce,$(ge,_e.crisp(ge))),ge.fill="none"),_e.rSetter=function(ze,Te,Ie){_e.r=ze,j(Ie,{rx:ze,ry:ze})},_e.rGetter=function(){return _e.r||0},_e.attr(ge)}roundedRect(Q){return this.symbol("roundedRect").attr(Q)}setSize(Q,ae,ve){this.width=Q,this.height=ae,this.boxWrapper.animate({width:Q,height:ae},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ie(ve,!0)?void 0:0}),this.alignElements()}g(Q){let ae=this.createElement("g");return Q?ae.attr({class:"highcharts-"+Q}):ae}image(Q,ae,ve,J,re,ce){let ge={preserveAspectRatio:"none"};H(ae)&&(ge.x=ae),H(ve)&&(ge.y=ve),H(J)&&(ge.width=J),H(re)&&(ge.height=re);let _e=this.createElement("image").attr(ge),ze=function(Te){_e.attr({href:Q}),ce.call(_e,Te)};if(ce){_e.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Te=new Z.Image;X(Te,"load",ze),Te.src=Q,Te.complete&&ze({})}else _e.attr({href:Q});return _e}symbol(Q,ae,ve,J,re,ce){let ge,_e,ze,Te,Ie=this,Be=/^url\((.*?)\)$/,Ge=Be.test(Q),ke=!Ge&&(this.symbols[Q]?Q:"circle"),me=ke&&this.symbols[ke];if(me)typeof ae=="number"&&(_e=me.call(this.symbols,ae||0,ve||0,J||0,re||0,ce)),ge=this.path(_e),Ie.styledMode||ge.attr("fill","none"),$(ge,{symbolName:ke||void 0,x:ae,y:ve,width:J,height:re}),ce&&$(ge,ce);else if(Ge){ze=Q.match(Be)[1];let fe=ge=this.image(ze);fe.imgwidth=ie(ce&&ce.width,q[ze]&&q[ze].width),fe.imgheight=ie(ce&&ce.height,q[ze]&&q[ze].height),Te=Ae=>Ae.attr({width:Ae.width,height:Ae.height}),["width","height"].forEach(Ae=>{fe[`${Ae}Setter`]=function(De,Pe){this[Pe]=De;let{alignByTranslate:je,element:Xe,width:et,height:rt,imgwidth:dt,imgheight:gt}=this,wt=Pe==="width"?dt:gt,Rt=1;ce&&ce.backgroundSize==="within"&&et&&rt&&dt&&gt?(Rt=Math.min(et/dt,rt/gt),j(Xe,{width:Math.round(dt*Rt),height:Math.round(gt*Rt)})):Xe&&wt&&Xe.setAttribute(Pe,wt),!je&&dt&&gt&&this.translate(((et||0)-dt*Rt)/2,((rt||0)-gt*Rt)/2)}}),R(ae)&&fe.attr({x:ae,y:ve}),fe.isImg=!0,fe.symbolUrl=Q,R(fe.imgwidth)&&R(fe.imgheight)?Te(fe):(fe.attr({width:0,height:0}),V("img",{onload:function(){let Ae=M[Ie.chartIndex];this.width===0&&(L(this,{position:"absolute",top:"-999em"}),x.body.appendChild(this)),q[ze]={width:this.width,height:this.height},fe.imgwidth=this.width,fe.imgheight=this.height,fe.element&&Te(fe),this.parentNode&&this.parentNode.removeChild(this),Ie.imgCount--,Ie.imgCount||!Ae||Ae.hasLoaded||Ae.onload()},src:ze}),this.imgCount++)}return ge}clipRect(Q,ae,ve,J){return this.rect(Q,ae,ve,J,0)}text(Q,ae,ve,J){let re={};if(J&&(this.allowHTML||!this.forExport))return this.html(Q,ae,ve);re.x=Math.round(ae||0),ve&&(re.y=Math.round(ve)),R(Q)&&(re.text=Q);let ce=this.createElement("text").attr(re);return J&&(!this.forExport||this.allowHTML)||(ce.xSetter=function(ge,_e,ze){let Te=ze.getElementsByTagName("tspan"),Ie=ze.getAttribute(_e);for(let Be=0,Ge;Be<Te.length;Be++)(Ge=Te[Be]).getAttribute(_e)===Ie&&Ge.setAttribute(_e,ge);ze.setAttribute(_e,ge)}),ce}fontMetrics(Q){let ae=oe(m.prototype.getStyle.call(Q,"font-size")||0),ve=ae<24?ae+3:Math.round(1.2*ae),J=Math.round(.8*ve);return{h:ve,b:J,f:ae}}rotCorr(Q,ae,ve){let J=Q;return ae&&ve&&(J=Math.max(J*Math.cos(ae*A),4)),{x:-Q/3*Math.sin(ae*A),y:J}}pathToSegments(Q){let ae=[],ve=[],J={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let re=0;re<Q.length;re++)ne(ve[0])&&H(Q[re])&&ve.length===J[ve[0].toUpperCase()]&&Q.splice(re,0,ve[0].replace("M","L").replace("m","l")),typeof Q[re]=="string"&&(ve.length&&ae.push(ve.slice(0)),ve.length=0),ve.push(Q[re]);return ae.push(ve.slice(0)),ae}label(Q,ae,ve,J,re,ce,ge,_e,ze){return new g(this,Q,ae,ve,J,re,ce,ge,_e,ze)}alignElements(){this.alignedObjects.forEach(Q=>Q.align())}}return $(Ce.prototype,{Element:m,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:v,draw:I}),p.registerRendererType("svg",Ce,!0),Ce}),o(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{composed:p}=c,{attr:m,css:g,createElement:v,defined:y,extend:k,pInt:_,pushUnique:T}=n;function M(D,w,I){var q;let N=((q=this.div)==null?void 0:q.style)||I.style;u.prototype[`${w}Setter`].call(this,D,w,I),N&&(N[w]=D)}let A=(D,w)=>{var I;if(!D.div){let N=m(D.element,"class"),q=D.css,Z=v("div",N?{className:N}:void 0,{position:"absolute",left:`${D.translateX||0}px`,top:`${D.translateY||0}px`,...D.styles,display:D.display,opacity:D.opacity,visibility:D.visibility},((I=D.parentGroup)==null?void 0:I.div)||w);D.classSetter=(X,j,V)=>{V.setAttribute("class",X),Z.className=X},D.translateXSetter=D.translateYSetter=(X,j)=>{D[j]=X,Z.style[j==="translateX"?"left":"top"]=`${X}px`,D.doTransform=!0},D.opacitySetter=D.visibilitySetter=M,D.css=X=>(q.call(D,X),X.cursor&&(Z.style.cursor=X.cursor),X.pointerEvents&&(Z.style.pointerEvents=X.pointerEvents),D),D.on=function(){return u.prototype.on.apply({element:Z,onEvents:D.onEvents},arguments),D},D.div=Z}return D.div};class x extends u{static compose(w){T(p,this.compose)&&(w.prototype.html=function(I,N,q){return new x(this,"span").attr({text:I,x:Math.round(N),y:Math.round(q)})})}constructor(w,I){super(w,I),this.css({position:"absolute",...w.styledMode?{}:{fontFamily:w.style.fontFamily,fontSize:w.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(w,I,N){this.xCorr=-w*N,this.yCorr=-I}css(w){let I,{element:N}=this,q=N.tagName==="SPAN"&&w&&"width"in w,Z=q&&w.width;return q&&(delete w.width,this.textWidth=_(Z)||void 0,I=!0),(w==null?void 0:w.textOverflow)==="ellipsis"&&(w.whiteSpace="nowrap",w.overflow="hidden"),k(this.styles,w),g(N,w),I&&this.updateTransform(),this}htmlGetBBox(){let{element:w}=this;return{x:w.offsetLeft,y:w.offsetTop,width:w.offsetWidth,height:w.offsetHeight}}updateTransform(){var H;if(!this.added){this.alignOnAdd=!0;return}let{element:w,renderer:I,rotation:N,rotationOriginX:q,rotationOriginY:Z,styles:X,textAlign:j="left",textWidth:V,translateX:U=0,translateY:L=0,x:R=0,y:G=0}=this,$={left:0,center:.5,right:1}[j],F=X.whiteSpace;if(g(w,{marginLeft:`${U}px`,marginTop:`${L}px`}),w.tagName==="SPAN"){let W=[N,j,w.innerHTML,V,this.textAlign].join(","),ne=-(((H=this.parentGroup)==null?void 0:H.padding)*1)||0,ue,ie=!1;if(V!==this.oldTextWidth){let K=this.textPxLength?this.textPxLength:(g(w,{width:"",whiteSpace:F||"nowrap"}),w.offsetWidth),Q=V||0;(Q>this.oldTextWidth||K>Q)&&(/[ \-]/.test(w.textContent||w.innerText)||w.style.textOverflow==="ellipsis")&&(g(w,{width:K>Q||N?V+"px":"auto",display:"block",whiteSpace:F||"normal"}),this.oldTextWidth=V,ie=!0)}this.hasBoxWidthChanged=ie,W!==this.cTT&&(ue=I.fontMetrics(w).b,y(N)&&(N!==(this.oldRotation||0)||j!==this.oldAlign)&&this.setSpanRotation(N,ne,ne),this.getSpanCorrection(!y(N)&&this.textPxLength||w.offsetWidth,ue,$));let{xCorr:oe=0,yCorr:Se=0}=this,ye=(q??R)-oe-R-ne,Ce=(Z??G)-Se-G-ne;g(w,{left:`${R+oe}px`,top:`${G+Se}px`,transformOrigin:`${ye}px ${Ce}px`}),this.cTT=W,this.oldRotation=N,this.oldAlign=j}}setSpanRotation(w,I,N){g(this.element,{transform:`rotate(${w}deg)`,transformOrigin:`${I}% ${N}px`})}add(w){let I,N=this.renderer.box.parentNode,q=[];if(this.parentGroup=w,w&&!(I=w.div)){let Z=w;for(;Z;)q.push(Z),Z=Z.parentGroup;for(let X of q.reverse())I=A(X,N)}return(I||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(w){w!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,a.setElementHTML(this.element,w??""),this.textStr=w,this.doTransform=!0)}alignSetter(w){this.alignValue=this.textAlign=w,this.doTransform=!0}xSetter(w,I){this[I]=w,this.doTransform=!0}}let P=x.prototype;return P.visibilitySetter=P.opacitySetter=M,P.ySetter=P.rotationSetter=P.rotationOriginXSetter=P.rotationOriginYSetter=P.xSetter,x}),o(t,"Core/Axis/AxisDefaults.js",[],function(){var a,c;return(c=a||(a={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},c.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:u}=this.axis.chart;return u(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},a}),o(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(a){var c;let{addEvent:u,isFunction:n,objectEach:p,removeEvent:m}=a;return(c||(c={})).registerEventOptions=function(g,v){g.eventOptions=g.eventOptions||{},p(v.events,function(y,k){g.eventOptions[k]!==y&&(g.eventOptions[k]&&(m(g,k,g.eventOptions[k]),delete g.eventOptions[k]),n(y)&&(g.eventOptions[k]=y,u(g,k,y,{order:0})))})},c}),o(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{deg2rad:n}=c,{clamp:p,correctFloat:m,defined:g,destroyObjectProperties:v,extend:y,fireEvent:k,isNumber:_,merge:T,objectEach:M,pick:A}=u;return class{constructor(x,P,D,w,I){this.isNew=!0,this.isNewLabel=!0,this.axis=x,this.pos=P,this.type=D||"",this.parameters=I||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,k(this,"init"),D||w||this.addLabel()}addLabel(){let x=this,P=x.axis,D=P.options,w=P.chart,I=P.categories,N=P.logarithmic,q=P.names,Z=x.pos,X=A(x.options&&x.options.labels,D.labels),j=P.tickPositions,V=Z===j[0],U=Z===j[j.length-1],L=(!X.step||X.step===1)&&P.tickInterval===1,R=j.info,G=x.label,$,F,H,W=this.parameters.category||(I?A(I[Z],q[Z],Z):Z);N&&_(W)&&(W=m(N.lin2log(W))),P.dateTime&&(R?$=(F=w.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&R.higherRanks[Z]||R.unitName])).main:_(W)&&($=P.dateTime.getXDateFormat(W,D.dateTimeLabelFormats||{}))),x.isFirst=V,x.isLast=U;let ne={axis:P,chart:w,dateTimeLabelFormat:$,isFirst:V,isLast:U,pos:Z,tick:x,tickPositionInfo:R,value:W};k(this,"labelFormat",ne);let ue=Se=>X.formatter?X.formatter.call(Se,Se):X.format?(Se.text=P.defaultLabelFormatter.call(Se),a.format(X.format,Se,w)):P.defaultLabelFormatter.call(Se),ie=ue.call(ne,ne),oe=F&&F.list;oe?x.shortenLabel=function(){for(H=0;H<oe.length;H++)if(y(ne,{dateTimeLabelFormat:oe[H]}),G.attr({text:ue.call(ne,ne)}),G.getBBox().width<P.getSlotWidth(x)-2*(X.padding||0))return;G.attr({text:""})}:x.shortenLabel=void 0,L&&P._addedPlotLB&&x.moveLabel(ie,X),g(G)||x.movedLabel?G&&G.textStr!==ie&&!L&&(!G.textWidth||X.style.width||G.styles.width||G.css({width:null}),G.attr({text:ie}),G.textPxLength=G.getBBox().width):(x.label=G=x.createLabel(ie,X),x.rotation=0)}createLabel(x,P,D){let w=this.axis,I=w.chart,N=g(x)&&P.enabled?I.renderer.text(x,D==null?void 0:D.x,D==null?void 0:D.y,P.useHTML).add(w.labelGroup):void 0;return N&&(I.styledMode||N.css(T(P.style)),N.textPxLength=N.getBBox().width),N}destroy(){v(this,this.axis)}getPosition(x,P,D,w){let I=this.axis,N=I.chart,q=w&&N.oldChartHeight||N.chartHeight,Z={x:x?m(I.translate(P+D,void 0,void 0,w)+I.transB):I.left+I.offset+(I.opposite?(w&&N.oldChartWidth||N.chartWidth)-I.right-I.left:0),y:x?q-I.bottom+I.offset-(I.opposite?I.height:0):m(q-I.translate(P+D,void 0,void 0,w)-I.transB)};return Z.y=p(Z.y,-1e9,1e9),k(this,"afterGetPosition",{pos:Z}),Z}getLabelPosition(x,P,D,w,I,N,q,Z){let X,j,V=this.axis,U=V.transA,L=V.isLinked&&V.linkedParent?V.linkedParent.reversed:V.reversed,R=V.staggerLines,G=V.tickRotCorr||{x:0,y:0},$=w||V.reserveSpaceDefault?0:-V.labelOffset*(V.labelAlign==="center"?.5:1),F=I.distance,H={};return X=V.side===0?D.rotation?-F:-D.getBBox().height:V.side===2?G.y+F:Math.cos(D.rotation*n)*(G.y-D.getBBox(!1,0).height/2),g(I.y)&&(X=V.side===0&&V.horiz?I.y+X:I.y),x=x+A(I.x,[0,1,0,-1][V.side]*F)+$+G.x-(N&&w?N*U*(L?-1:1):0),P=P+X-(N&&!w?N*U*(L?1:-1):0),R&&(j=q/(Z||1)%R,V.opposite&&(j=R-j-1),P+=j*(V.labelOffset/R)),H.x=x,H.y=Math.round(P),k(this,"afterGetLabelPosition",{pos:H,tickmarkOffset:N,index:q}),H}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(x,P,D,w,I=!1,N){return N.crispLine([["M",x,P],["L",x+(I?0:-D),P+(I?D:0)]],w)}handleOverflow(x){let P=this.axis,D=P.options.labels,w=x.x,I=P.chart.chartWidth,N=P.chart.spacing,q=A(P.labelLeft,Math.min(P.pos,N[3])),Z=A(P.labelRight,Math.max(P.isRadial?0:P.pos+P.len,I-N[1])),X=this.label,j=this.rotation,V={left:0,center:.5,right:1}[P.labelAlign||X.attr("align")],U=X.getBBox().width,L=P.getSlotWidth(this),R={},G=L,$=1,F,H,W;j||D.overflow!=="justify"?j<0&&w-V*U<q?W=Math.round(w/Math.cos(j*n)-q):j>0&&w+V*U>Z&&(W=Math.round((I-w)/Math.cos(j*n))):(F=w-V*U,H=w+(1-V)*U,F<q?G=x.x+G*(1-V)-q:H>Z&&(G=Z-x.x+G*V,$=-1),(G=Math.min(L,G))<L&&P.labelAlign==="center"&&(x.x+=$*(L-G-V*(L-Math.min(U,G)))),(U>G||P.autoRotation&&(X.styles||{}).width)&&(W=G)),W&&(this.shortenLabel?this.shortenLabel():(R.width=Math.floor(W)+"px",(D.style||{}).textOverflow||(R.textOverflow="ellipsis"),X.css(R)))}moveLabel(x,P){let D=this,w=D.label,I=D.axis,N=!1,q;w&&w.textStr===x?(D.movedLabel=w,N=!0,delete D.label):M(I.ticks,function(Z){N||Z.isNew||Z===D||!Z.label||Z.label.textStr!==x||(D.movedLabel=Z.label,N=!0,Z.labelPos=D.movedLabel.xy,delete Z.label)}),!N&&(D.labelPos||w)&&(q=D.labelPos||w.xy,D.movedLabel=D.createLabel(x,P,q),D.movedLabel&&D.movedLabel.attr({opacity:0}))}render(x,P,D){let w=this.axis,I=w.horiz,N=this.pos,q=A(this.tickmarkOffset,w.tickmarkOffset),Z=this.getPosition(I,N,q,P),X=Z.x,j=Z.y,V=w.pos,U=V+w.len,L=I?X:j;!w.chart.polar&&this.isNew&&(m(L)<V||L>U)&&(D=0);let R=A(D,this.label&&this.label.newOpacity,1);D=A(D,1),this.isActive=!0,this.renderGridLine(P,D),this.renderMark(Z,D),this.renderLabel(Z,P,R,x),this.isNew=!1,k(this,"afterRender")}renderGridLine(x,P){let D=this.axis,w=D.options,I={},N=this.pos,q=this.type,Z=A(this.tickmarkOffset,D.tickmarkOffset),X=D.chart.renderer,j=this.gridLine,V,U=w.gridLineWidth,L=w.gridLineColor,R=w.gridLineDashStyle;this.type==="minor"&&(U=w.minorGridLineWidth,L=w.minorGridLineColor,R=w.minorGridLineDashStyle),j||(D.chart.styledMode||(I.stroke=L,I["stroke-width"]=U||0,I.dashstyle=R),q||(I.zIndex=1),x&&(P=0),this.gridLine=j=X.path().attr(I).addClass("highcharts-"+(q?q+"-":"")+"grid-line").add(D.gridGroup)),j&&(V=D.getPlotLinePath({value:N+Z,lineWidth:j.strokeWidth(),force:"pass",old:x,acrossPanes:!1}))&&j[x||this.isNew?"attr":"animate"]({d:V,opacity:P})}renderMark(x,P){let D=this.axis,w=D.options,I=D.chart.renderer,N=this.type,q=D.tickSize(N?N+"Tick":"tick"),Z=x.x,X=x.y,j=A(w[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&D.isXAxis?1:0),V=w[N!=="minor"?"tickColor":"minorTickColor"],U=this.mark,L=!U;q&&(D.opposite&&(q[0]=-q[0]),U||(this.mark=U=I.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(D.axisGroup),D.chart.styledMode||U.attr({stroke:V,"stroke-width":j})),U[L?"attr":"animate"]({d:this.getMarkPath(Z,X,q[0],U.strokeWidth(),D.horiz,I),opacity:P}))}renderLabel(x,P,D,w){let I=this.axis,N=I.horiz,q=I.options,Z=this.label,X=q.labels,j=X.step,V=A(this.tickmarkOffset,I.tickmarkOffset),U=x.x,L=x.y,R=!0;Z&&_(U)&&(Z.xy=x=this.getLabelPosition(U,L,Z,N,X,V,w,j),(!this.isFirst||this.isLast||q.showFirstLabel)&&(!this.isLast||this.isFirst||q.showLastLabel)?!N||X.step||X.rotation||P||D===0||this.handleOverflow(x):R=!1,j&&w%j&&(R=!1),R&&_(x.y)?(x.opacity=D,Z[this.isNewLabel?"attr":"animate"](x).show(!0),this.isNewLabel=!1):(Z.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let x=this.label,P=this.axis;x&&!this.isNew&&(x.animate({opacity:0},void 0,x.destroy),delete this.label),P.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),o(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v){let{animObject:y}=a,{xAxis:k,yAxis:_}=c,{defaultOptions:T}=n,{registerEventOptions:M}=p,{deg2rad:A}=m,{arrayMax:x,arrayMin:P,clamp:D,correctFloat:w,defined:I,destroyObjectProperties:N,erase:q,error:Z,extend:X,fireEvent:j,getClosestDistance:V,insertItem:U,isArray:L,isNumber:R,isString:G,merge:$,normalizeTickInterval:F,objectEach:H,pick:W,relativeLength:ne,removeEvent:ue,splat:ie,syncTimeout:oe}=v,Se=(Ce,K)=>F(K,void 0,void 0,W(Ce.options.allowDecimals,K<.5||Ce.tickAmount!==void 0),!!Ce.tickAmount);X(T,{xAxis:k,yAxis:$(k,_)});class ye{constructor(K,Q,ae){this.init(K,Q,ae)}init(K,Q,ae=this.coll){let ve=ae==="xAxis",J=this.isZAxis||(K.inverted?!ve:ve);this.chart=K,this.horiz=J,this.isXAxis=ve,this.coll=ae,j(this,"init",{userOptions:Q}),this.opposite=W(Q.opposite,this.opposite),this.side=W(Q.side,this.side,J?this.opposite?0:2:this.opposite?1:3),this.setOptions(Q);let re=this.options,ce=re.labels;this.type??(this.type=re.type||"linear"),this.uniqueNames??(this.uniqueNames=re.uniqueNames??!0),j(this,"afterSetType"),this.userOptions=Q,this.minPixelPadding=0,this.reversed=W(re.reversed,this.reversed),this.visible=re.visible,this.zoomEnabled=re.zoomEnabled,this.hasNames=this.type==="category"||re.categories===!0,this.categories=L(re.categories)&&re.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=I(re.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=re.minRange||re.maxZoom,this.range=re.range,this.offset=re.offset||0,this.max=void 0,this.min=void 0;let ge=W(re.crosshair,ie(K.options.tooltip.crosshairs)[ve?0:1]);this.crosshair=ge===!0?{}:ge,K.axes.indexOf(this)===-1&&(ve?K.axes.splice(K.xAxis.length,0,this):K.axes.push(this),U(this,K[this.coll])),K.orderItems(this.coll),this.series=this.series||[],K.inverted&&!this.isZAxis&&ve&&!I(this.reversed)&&(this.reversed=!0),this.labelRotation=R(ce.rotation)?ce.rotation:void 0,M(this,re),j(this,"afterInit")}setOptions(K){let Q=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=$(Q,T[this.coll],K),j(this,"afterSetOptions",{userOptions:K})}defaultLabelFormatter(){let K=this.axis,{numberFormatter:Q}=this.chart,ae=R(this.value)?this.value:NaN,ve=K.chart.time,J=K.categories,re=this.dateTimeLabelFormat,ce=T.lang,ge=ce.numericSymbols,_e=ce.numericSymbolMagnitude||1e3,ze=K.logarithmic?Math.abs(ae):K.tickInterval,Te=ge&&ge.length,Ie,Be;if(J)Be=`${this.value}`;else if(re)Be=ve.dateFormat(re,ae);else if(Te&&ge&&ze>=1e3)for(;Te--&&Be===void 0;)ze>=(Ie=Math.pow(_e,Te+1))&&10*ae%Ie==0&&ge[Te]!==null&&ae!==0&&(Be=Q(ae/Ie,-1)+ge[Te]);return Be===void 0&&(Be=Math.abs(ae)>=1e4?Q(ae,-1):Q(ae,-1,void 0,"")),Be}getSeriesExtremes(){let K,Q=this;j(this,"getSeriesExtremes",null,function(){Q.hasVisibleSeries=!1,Q.dataMin=Q.dataMax=Q.threshold=void 0,Q.softThreshold=!Q.isXAxis,Q.series.forEach(ae=>{if(ae.reserveSpace()){let ve=ae.options,J,re=ve.threshold,ce,ge;if(Q.hasVisibleSeries=!0,Q.positiveValuesOnly&&0>=(re||0)&&(re=void 0),Q.isXAxis)(J=ae.xData)&&J.length&&(J=Q.logarithmic?J.filter(_e=>_e>0):J,ce=(K=ae.getXExtremes(J)).min,ge=K.max,R(ce)||ce instanceof Date||(J=J.filter(R),ce=(K=ae.getXExtremes(J)).min,ge=K.max),J.length&&(Q.dataMin=Math.min(W(Q.dataMin,ce),ce),Q.dataMax=Math.max(W(Q.dataMax,ge),ge)));else{let _e=ae.applyExtremes();R(_e.dataMin)&&(ce=_e.dataMin,Q.dataMin=Math.min(W(Q.dataMin,ce),ce)),R(_e.dataMax)&&(ge=_e.dataMax,Q.dataMax=Math.max(W(Q.dataMax,ge),ge)),I(re)&&(Q.threshold=re),(!ve.softThreshold||Q.positiveValuesOnly)&&(Q.softThreshold=!1)}}})}),j(this,"afterGetSeriesExtremes")}translate(K,Q,ae,ve,J,re){var ke;let ce=this.linkedParent||this,ge=ve&&ce.old?ce.old.min:ce.min;if(!R(ge))return NaN;let _e=ce.minPixelPadding,ze=(ce.isOrdinal||((ke=ce.brokenAxis)==null?void 0:ke.hasBreaks)||ce.logarithmic&&J)&&ce.lin2val,Te=1,Ie=0,Be=ve&&ce.old?ce.old.transA:ce.transA,Ge=0;return Be||(Be=ce.transA),ae&&(Te*=-1,Ie=ce.len),ce.reversed&&(Te*=-1,Ie-=Te*(ce.sector||ce.len)),Q?(Ge=(K=K*Te+Ie-_e)/Be+ge,ze&&(Ge=ce.lin2val(Ge))):(ze&&(K=ce.val2lin(K)),Ge=Te*(K-ge)*Be+Ie+Te*_e+(R(re)?Be*re:0),ce.isRadial||(Ge=w(Ge))),Ge}toPixels(K,Q){return this.translate(K,!1,!this.horiz,void 0,!0)+(Q?0:this.pos)}toValue(K,Q){return this.translate(K-(Q?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(K){let Q=this,ae=Q.chart,ve=Q.left,J=Q.top,re=K.old,ce=K.value,ge=K.lineWidth,_e=re&&ae.oldChartHeight||ae.chartHeight,ze=re&&ae.oldChartWidth||ae.chartWidth,Te=Q.transB,Ie=K.translatedValue,Be=K.force,Ge,ke,me,fe,Ae;function De(je,Xe,et){return Be!=="pass"&&(je<Xe||je>et)&&(Be?je=D(je,Xe,et):Ae=!0),je}let Pe={value:ce,lineWidth:ge,old:re,force:Be,acrossPanes:K.acrossPanes,translatedValue:Ie};return j(this,"getPlotLinePath",Pe,function(je){Ge=me=(Ie=D(Ie=W(Ie,Q.translate(ce,void 0,void 0,re)),-1e9,1e9))+Te,ke=fe=_e-Ie-Te,R(Ie)?Q.horiz?(ke=J,fe=_e-Q.bottom+(Q.options.isInternal?0:ae.scrollablePixelsY||0),Ge=me=De(Ge,ve,ve+Q.width)):(Ge=ve,me=ze-Q.right+(ae.scrollablePixelsX||0),ke=fe=De(ke,J,J+Q.height)):(Ae=!0,Be=!1),je.path=Ae&&!Be?void 0:ae.renderer.crispLine([["M",Ge,ke],["L",me,fe]],ge||1)}),Pe.path}getLinearTickPositions(K,Q,ae){let ve,J,re,ce=w(Math.floor(Q/K)*K),ge=w(Math.ceil(ae/K)*K),_e=[];if(w(ce+K)===ce&&(re=20),this.single)return[Q];for(ve=ce;ve<=ge&&(_e.push(ve),(ve=w(ve+K,re))!==J);)J=ve;return _e}getMinorTickInterval(){let{minorTicks:K,minorTickInterval:Q}=this.options;return K===!0?W(Q,"auto"):K!==!1?Q:void 0}getMinorTickPositions(){let K=this.options,Q=this.tickPositions,ae=this.minorTickInterval,ve=this.pointRangePadding||0,J=(this.min||0)-ve,re=(this.max||0)+ve,ce=re-J,ge=[],_e;if(ce&&ce/ae<this.len/3){let ze=this.logarithmic;if(ze)this.paddedTicks.forEach(function(Te,Ie,Be){Ie&&ge.push.apply(ge,ze.getLogTickPositions(ae,Be[Ie-1],Be[Ie],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")ge=ge.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(ae),J,re,K.startOfWeek));else for(_e=J+(Q[0]-J)%ae;_e<=re&&_e!==ge[0];_e+=ae)ge.push(_e)}return ge.length!==0&&this.trimTicks(ge),ge}adjustForMinRange(){let K=this.options,Q=this.logarithmic,{max:ae,min:ve,minRange:J}=this,re,ce,ge,_e;this.isXAxis&&J===void 0&&!Q&&(J=I(K.min)||I(K.max)||I(K.floor)||I(K.ceiling)?null:Math.min(5*(V(this.series.map(ze=>{var Te;return(ze.xIncrement?(Te=ze.xData)==null?void 0:Te.slice(0,2):ze.xData)||[]}))||0),this.dataMax-this.dataMin)),R(ae)&&R(ve)&&R(J)&&ae-ve<J&&(ce=this.dataMax-this.dataMin>=J,re=(J-ae+ve)/2,ge=[ve-re,W(K.min,ve-re)],ce&&(ge[2]=Q?Q.log2lin(this.dataMin):this.dataMin),_e=[(ve=x(ge))+J,W(K.max,ve+J)],ce&&(_e[2]=Q?Q.log2lin(this.dataMax):this.dataMax),(ae=P(_e))-ve<J&&(ge[0]=ae-J,ge[1]=W(K.min,ae-J),ve=x(ge))),this.minRange=J,this.min=ve,this.max=ae}getClosest(){let K,Q;if(this.categories)Q=1;else{let ae=[];this.series.forEach(function(ve){var re;let J=ve.closestPointRange;((re=ve.xData)==null?void 0:re.length)===1?ae.push(ve.xData[0]):!ve.noSharedTooltip&&I(J)&&ve.reserveSpace()&&(Q=I(Q)?Math.min(Q,J):J)}),ae.length&&(ae.sort((ve,J)=>ve-J),K=V([ae]))}return K&&Q?Math.min(K,Q):K||Q}nameToX(K){let Q=L(this.options.categories),ae=Q?this.categories:this.names,ve=K.options.x,J;return K.series.requireSorting=!1,I(ve)||(ve=this.uniqueNames&&ae?Q?ae.indexOf(K.name):W(ae.keys[K.name],-1):K.series.autoIncrement()),ve===-1?!Q&&ae&&(J=ae.length):J=ve,J!==void 0?(this.names[J]=K.name,this.names.keys[K.name]=J):K.x&&(J=K.x),J}updateNames(){let K=this,Q=this.names;Q.length>0&&(Object.keys(Q.keys).forEach(function(ae){delete Q.keys[ae]}),Q.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(ae=>{ae.xIncrement=null,(!ae.points||ae.isDirtyData)&&(K.max=Math.max(K.max,ae.xData.length-1),ae.processData(),ae.generatePoints()),ae.data.forEach(function(ve,J){let re;ve!=null&&ve.options&&ve.name!==void 0&&(re=K.nameToX(ve))!==void 0&&re!==ve.x&&(ve.x=re,ae.xData[J]=re)})}))}setAxisTranslation(){let K=this,Q=K.max-K.min,ae=K.linkedParent,ve=!!K.categories,J=K.isXAxis,re=K.axisPointRange||0,ce,ge=0,_e=0,ze,Te=K.transA;(J||ve||re)&&(ce=K.getClosest(),ae?(ge=ae.minPointOffset,_e=ae.pointRangePadding):K.series.forEach(function(Ie){let Be=ve?1:J?W(Ie.options.pointRange,ce,0):K.axisPointRange||0,Ge=Ie.options.pointPlacement;if(re=Math.max(re,Be),!K.single||ve){let ke=Ie.is("xrange")?!J:J;ge=Math.max(ge,ke&&G(Ge)?0:Be/2),_e=Math.max(_e,ke&&Ge==="on"?0:Be)}}),ze=K.ordinal&&K.ordinal.slope&&ce?K.ordinal.slope/ce:1,K.minPointOffset=ge*=ze,K.pointRangePadding=_e*=ze,K.pointRange=Math.min(re,K.single&&ve?1:Q),J&&ce&&(K.closestPointRange=ce)),K.translationSlope=K.transA=Te=K.staticScale||K.len/(Q+_e||1),K.transB=K.horiz?K.left:K.bottom,K.minPixelPadding=Te*ge,j(this,"afterSetAxisTranslation")}minFromRange(){let{max:K,min:Q}=this;return R(K)&&R(Q)&&K-Q||void 0}setTickInterval(K){var Ct,Tt,si,ui;let{categories:Q,chart:ae,dataMax:ve,dataMin:J,dateTime:re,isXAxis:ce,logarithmic:ge,options:_e,softThreshold:ze}=this,Te=R(this.threshold)?this.threshold:void 0,Ie=this.minRange||0,{ceiling:Be,floor:Ge,linkedTo:ke,softMax:me,softMin:fe}=_e,Ae=R(ke)&&((Ct=ae[this.coll])==null?void 0:Ct[ke]),De=_e.tickPixelInterval,Pe=_e.maxPadding,je=_e.minPadding,Xe=0,et,rt=R(_e.tickInterval)&&_e.tickInterval>=0?_e.tickInterval:void 0,dt,gt,wt,Rt;if(re||Q||Ae||this.getTickAmount(),wt=W(this.userMin,_e.min),Rt=W(this.userMax,_e.max),Ae?(this.linkedParent=Ae,et=Ae.getExtremes(),this.min=W(et.min,et.dataMin),this.max=W(et.max,et.dataMax),this.type!==Ae.type&&Z(11,!0,ae)):(ze&&I(Te)&&R(ve)&&R(J)&&(J>=Te?(dt=Te,je=0):ve<=Te&&(gt=Te,Pe=0)),this.min=W(wt,dt,J),this.max=W(Rt,gt,ve)),R(this.max)&&R(this.min)&&(ge&&(this.positiveValuesOnly&&!K&&0>=Math.min(this.min,W(J,this.min))&&Z(10,!0,ae),this.min=w(ge.log2lin(this.min),16),this.max=w(ge.log2lin(this.max),16)),this.range&&R(J)&&(this.userMin=this.min=wt=Math.max(J,this.minFromRange()||0),this.userMax=Rt=this.max,this.range=void 0)),j(this,"foundExtremes"),this.adjustForMinRange(),R(this.min)&&R(this.max)){if(!R(this.userMin)&&R(fe)&&fe<this.min&&(this.min=wt=fe),!R(this.userMax)&&R(me)&&me>this.max&&(this.max=Rt=me),Q||this.axisPointRange||(Tt=this.stacking)!=null&&Tt.usePercentage||Ae||!(Xe=this.max-this.min)||(!I(wt)&&je&&(this.min-=Xe*je),I(Rt)||!Pe||(this.max+=Xe*Pe)),!R(this.userMin)&&R(Ge)&&(this.min=Math.max(this.min,Ge)),!R(this.userMax)&&R(Be)&&(this.max=Math.min(this.max,Be)),ze&&R(J)&&R(ve)){let Ht=Te||0;!I(wt)&&this.min<Ht&&J>=Ht?this.min=_e.minRange?Math.min(Ht,this.max-Ie):Ht:!I(Rt)&&this.max>Ht&&ve<=Ht&&(this.max=_e.minRange?Math.max(Ht,this.min+Ie):Ht)}!ae.polar&&this.min>this.max&&(I(_e.min)?this.max=this.min:I(_e.max)&&(this.min=this.max)),Xe=this.max-this.min}if(this.min!==this.max&&R(this.min)&&R(this.max)?Ae&&!rt&&De===Ae.options.tickPixelInterval?this.tickInterval=rt=Ae.tickInterval:this.tickInterval=W(rt,this.tickAmount?Xe/Math.max(this.tickAmount-1,1):void 0,Q?1:Xe*De/Math.max(this.len,De)):this.tickInterval=1,ce&&!K){let Ht=this.min!==((si=this.old)==null?void 0:si.min)||this.max!==((ui=this.old)==null?void 0:ui.max);this.series.forEach(function(ar){var Zi;ar.forceCrop=(Zi=ar.forceCropping)==null?void 0:Zi.call(ar),ar.processData(Ht)}),j(this,"postProcessData",{hasExtremesChanged:Ht})}this.setAxisTranslation(),j(this,"initialAxisTranslation"),this.pointRange&&!rt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let ft=W(_e.minTickInterval,re&&!this.series.some(Ht=>Ht.noSharedTooltip)?this.closestPointRange:0);!rt&&this.tickInterval<ft&&(this.tickInterval=ft),re||ge||rt||(this.tickInterval=Se(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var ze,Te;let K=this.options,Q=K.tickPositions,ae=K.tickPositioner,ve=this.getMinorTickInterval(),J=!this.isPanning,re=J&&K.startOnTick,ce=J&&K.endOnTick,ge=[],_e;if(this.tickmarkOffset=this.categories&&K.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&I(this.min)&&!this.tickAmount&&(this.min%1==0||K.allowDecimals!==!1),Q)ge=Q.slice();else if(R(this.min)&&R(this.max)){if(!((ze=this.ordinal)!=null&&ze.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))ge=[this.min,this.max],Z(19,!1,this.chart);else if(this.dateTime)ge=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,K.units),this.min,this.max,K.startOfWeek,(Te=this.ordinal)==null?void 0:Te.positions,this.closestPointRange,!0);else if(this.logarithmic)ge=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Ie=this.tickInterval,Be=Ie;for(;Be<=2*Ie&&(ge=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&ge.length>this.tickAmount);)this.tickInterval=Se(this,Be*=1.1)}ge.length>this.len&&(ge=[ge[0],ge[ge.length-1]])[0]===ge[1]&&(ge.length=1),ae&&(this.tickPositions=ge,(_e=ae.apply(this,[this.min,this.max]))&&(ge=_e))}this.tickPositions=ge,this.minorTickInterval=ve==="auto"&&this.tickInterval?this.tickInterval/K.minorTicksPerMajor:ve,this.paddedTicks=ge.slice(0),this.trimTicks(ge,re,ce),!this.isLinked&&R(this.min)&&R(this.max)&&(this.single&&ge.length<2&&!this.categories&&!this.series.some(Ie=>Ie.is("heatmap")&&Ie.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),Q||_e||this.adjustTickAmount()),j(this,"afterSetTickPositions")}trimTicks(K,Q,ae){let ve=K[0],J=K[K.length-1],re=!this.isOrdinal&&this.minPointOffset||0;if(j(this,"trimTicks"),!this.isLinked){if(Q&&ve!==-1/0)this.min=ve;else for(;this.min-re>K[0];)K.shift();if(ae)this.max=J;else for(;this.max+re<K[K.length-1];)K.pop();K.length===0&&I(ve)&&!this.options.tickPositions&&K.push((J+ve)/2)}}alignToOthers(){let K,Q=this,ae=Q.chart,ve=[this],J=Q.options,re=ae.options.chart,ce=this.coll==="yAxis"&&re.alignThresholds,ge=[];if(Q.thresholdAlignment=void 0,(re.alignTicks!==!1&&J.alignTicks||ce)&&J.startOnTick!==!1&&J.endOnTick!==!1&&!Q.logarithmic){let _e=Te=>{let{horiz:Ie,options:Be}=Te;return[Ie?Be.left:Be.top,Be.width,Be.height,Be.pane].join(",")},ze=_e(this);ae[this.coll].forEach(function(Te){let{series:Ie}=Te;Ie.length&&Ie.some(Be=>Be.visible)&&Te!==Q&&_e(Te)===ze&&(K=!0,ve.push(Te))})}if(K&&ce){ve.forEach(ze=>{let Te=ze.getThresholdAlignment(Q);R(Te)&&ge.push(Te)});let _e=ge.length>1?ge.reduce((ze,Te)=>ze+=Te,0)/ge.length:void 0;ve.forEach(ze=>{ze.thresholdAlignment=_e})}return K}getThresholdAlignment(K){if((!R(this.dataMin)||this!==K&&this.series.some(Q=>Q.isDirty||Q.isDirtyData))&&this.getSeriesExtremes(),R(this.threshold)){let Q=D((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(Q=1-Q),Q}}getTickAmount(){let K=this.options,Q=K.tickPixelInterval,ae=K.tickAmount;I(K.tickInterval)||ae||!(this.len<Q)||this.isRadial||this.logarithmic||!K.startOnTick||!K.endOnTick||(ae=2),!ae&&this.alignToOthers()&&(ae=Math.ceil(this.len/Q)+1),ae<4&&(this.finalTickAmt=ae,ae=5),this.tickAmount=ae}adjustTickAmount(){let K=this,{finalTickAmt:Q,max:ae,min:ve,options:J,tickPositions:re,tickAmount:ce,thresholdAlignment:ge}=K,_e=re==null?void 0:re.length,ze=W(K.threshold,K.softThreshold?0:null),Te,Ie,Be=K.tickInterval,Ge,ke=()=>re.push(w(re[re.length-1]+Be)),me=()=>re.unshift(w(re[0]-Be));if(R(ge)&&(Ge=ge<.5?Math.ceil(ge*(ce-1)):Math.floor(ge*(ce-1)),J.reversed&&(Ge=ce-1-Ge)),K.hasData()&&R(ve)&&R(ae)){let fe=()=>{K.transA*=(_e-1)/(ce-1),K.min=J.startOnTick?re[0]:Math.min(ve,re[0]),K.max=J.endOnTick?re[re.length-1]:Math.max(ae,re[re.length-1])};if(R(Ge)&&R(K.threshold)){for(;re[Ge]!==ze||re.length!==ce||re[0]>ve||re[re.length-1]<ae;){for(re.length=0,re.push(K.threshold);re.length<ce;)re[Ge]===void 0||re[Ge]>K.threshold?me():ke();if(Be>8*K.tickInterval)break;Be*=2}fe()}else if(_e<ce){for(;re.length<ce;)re.length%2||ve===ze?ke():me();fe()}if(I(Q)){for(Ie=Te=re.length;Ie--;)(Q===3&&Ie%2==1||Q<=2&&Ie>0&&Ie<Te-1)&&re.splice(Ie,1);K.finalTickAmt=void 0}}}setScale(){var re,ce;let{coll:K,stacking:Q}=this,ae=!1,ve=!1;this.series.forEach(ge=>{ae=ae||ge.isDirtyData||ge.isDirty,ve=ve||ge.xAxis&&ge.xAxis.isDirty||!1}),this.setAxisSize();let J=this.len!==(this.old&&this.old.len);J||ae||ve||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(Q&&K==="yAxis"&&Q.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),Q&&K==="xAxis"&&Q.buildStacks(),this.isDirty||(this.isDirty=J||this.min!==((re=this.old)==null?void 0:re.min)||this.max!==((ce=this.old)==null?void 0:ce.max))):Q&&Q.cleanStacks(),ae&&delete this.allExtremes,j(this,"afterSetScale")}setExtremes(K,Q,ae=!0,ve,J){this.series.forEach(re=>{delete re.kdTree}),j(this,"setExtremes",J=X(J,{min:K,max:Q}),re=>{this.userMin=re.min,this.userMax=re.max,this.eventArgs=re,ae&&this.chart.redraw(ve)})}setAxisSize(){let K=this.chart,Q=this.options,ae=Q.offsets||[0,0,0,0],ve=this.horiz,J=this.width=Math.round(ne(W(Q.width,K.plotWidth-ae[3]+ae[1]),K.plotWidth)),re=this.height=Math.round(ne(W(Q.height,K.plotHeight-ae[0]+ae[2]),K.plotHeight)),ce=this.top=Math.round(ne(W(Q.top,K.plotTop+ae[0]),K.plotHeight,K.plotTop)),ge=this.left=Math.round(ne(W(Q.left,K.plotLeft+ae[3]),K.plotWidth,K.plotLeft));this.bottom=K.chartHeight-re-ce,this.right=K.chartWidth-J-ge,this.len=Math.max(ve?J:re,0),this.pos=ve?ge:ce}getExtremes(){let K=this.logarithmic;return{min:K?w(K.lin2log(this.min)):this.min,max:K?w(K.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(K){let Q=this.logarithmic,ae=Q?Q.lin2log(this.min):this.min,ve=Q?Q.lin2log(this.max):this.max;return K===null||K===-1/0?K=ae:K===1/0?K=ve:ae>K?K=ae:ve<K&&(K=ve),this.translate(K,0,1,0,1)}autoLabelAlign(K){let Q=(W(K,0)-90*this.side+720)%360,ae={align:"center"};return j(this,"autoLabelAlign",ae,function(ve){Q>15&&Q<165?ve.align="right":Q>195&&Q<345&&(ve.align="left")}),ae.align}tickSize(K){let Q=this.options,ae=W(Q[K==="tick"?"tickWidth":"minorTickWidth"],K==="tick"&&this.isXAxis&&!this.categories?1:0),ve=Q[K==="tick"?"tickLength":"minorTickLength"],J;ae&&ve&&(Q[K+"Position"]==="inside"&&(ve=-ve),J=[ve,ae]);let re={tickSize:J};return j(this,"afterTickSize",re),re.tickSize}labelMetrics(){let K=this.chart.renderer,Q=this.ticks,ae=Q[Object.keys(Q)[0]]||{};return this.chart.renderer.fontMetrics(ae.label||ae.movedLabel||K.box)}unsquish(){let K=this.options.labels,Q=K.padding||0,ae=this.horiz,ve=this.tickInterval,J=this.len/(((this.categories?1:0)+this.max-this.min)/ve),re=K.rotation,ce=w(.8*this.labelMetrics().h),ge=Math.max(this.max-this.min,0),_e=function(Ge){let ke=(Ge+2*Q)/(J||1);return(ke=ke>1?Math.ceil(ke):1)*ve>ge&&Ge!==1/0&&J!==1/0&&ge&&(ke=Math.ceil(ge/ve)),w(ke*ve)},ze=ve,Te,Ie=Number.MAX_VALUE,Be;if(ae){if(!K.staggerLines&&(R(re)?Be=[re]:J<K.autoRotationLimit&&(Be=K.autoRotation)),Be){let Ge,ke;for(let me of Be)(me===re||me&&me>=-90&&me<=90)&&(ke=(Ge=_e(Math.abs(ce/Math.sin(A*me))))+Math.abs(me/360))<Ie&&(Ie=ke,Te=me,ze=Ge)}}else ze=_e(.75*ce);return this.autoRotation=Be,this.labelRotation=W(Te,R(re)?re:0),K.step?ve:ze}getSlotWidth(K){let Q=this.chart,ae=this.horiz,ve=this.options.labels,J=Math.max(this.tickPositions.length-(this.categories?0:1),1),re=Q.margin[3];if(K&&R(K.slotWidth))return K.slotWidth;if(ae&&ve.step<2)return ve.rotation?0:(this.staggerLines||1)*this.len/J;if(!ae){let ce=ve.style.width;if(ce!==void 0)return parseInt(String(ce),10);if(re)return re-Q.spacing[3]}return .33*Q.chartWidth}renderUnsquish(){let K=this.chart,Q=K.renderer,ae=this.tickPositions,ve=this.ticks,J=this.options.labels,re=J.style,ce=this.horiz,ge=this.getSlotWidth(),_e=Math.max(1,Math.round(ge-(ce?2*(J.padding||0):J.distance||0))),ze={},Te=this.labelMetrics(),Ie=re.textOverflow,Be,Ge,ke=0,me,fe;if(G(J.rotation)||(ze.rotation=J.rotation||0),ae.forEach(function(Ae){let De=ve[Ae];De.movedLabel&&De.replaceMovedLabel(),De&&De.label&&De.label.textPxLength>ke&&(ke=De.label.textPxLength)}),this.maxLabelLength=ke,this.autoRotation)ke>_e&&ke>Te.h?ze.rotation=this.labelRotation:this.labelRotation=0;else if(ge&&(Be=_e,!Ie))for(Ge="clip",fe=ae.length;!ce&&fe--;)(me=ve[ae[fe]].label)&&(me.styles.textOverflow==="ellipsis"?me.css({textOverflow:"clip"}):me.textPxLength>ge&&me.css({width:ge+"px"}),me.getBBox().height>this.len/ae.length-(Te.h-Te.f)&&(me.specificTextOverflow="ellipsis"));ze.rotation&&(Be=ke>.5*K.chartHeight?.33*K.chartHeight:ke,Ie||(Ge="ellipsis")),this.labelAlign=J.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(ze.align=this.labelAlign),ae.forEach(function(Ae){let De=ve[Ae],Pe=De&&De.label,je=re.width,Xe={};Pe&&(Pe.attr(ze),De.shortenLabel?De.shortenLabel():Be&&!je&&re.whiteSpace!=="nowrap"&&(Be<Pe.textPxLength||Pe.element.tagName==="SPAN")?(Xe.width=Be+"px",Ie||(Xe.textOverflow=Pe.specificTextOverflow||Ge),Pe.css(Xe)):!Pe.styles.width||Xe.width||je||Pe.css({width:null}),delete Pe.specificTextOverflow,De.rotation=ze.rotation)},this),this.tickRotCorr=Q.rotCorr(Te.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(K){return K.hasData()})||this.options.showEmpty&&I(this.min)&&I(this.max)}addTitle(K){let Q,ae=this.chart.renderer,ve=this.horiz,J=this.opposite,re=this.options.title,ce=this.chart.styledMode;this.axisTitle||((Q=re.textAlign)||(Q=(ve?{low:"left",middle:"center",high:"right"}:{low:J?"right":"left",middle:"center",high:J?"left":"right"})[re.align]),this.axisTitle=ae.text(re.text||"",0,0,re.useHTML).attr({zIndex:7,rotation:re.rotation||0,align:Q}).addClass("highcharts-axis-title"),ce||this.axisTitle.css($(re.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ce||re.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[K?"show":"hide"](K)}generateTick(K){let Q=this.ticks;Q[K]?Q[K].addLabel():Q[K]=new g(this,K)}createGroups(){let{axisParent:K,chart:Q,coll:ae,options:ve}=this,J=Q.renderer,re=(ce,ge,_e)=>J.g(ce).attr({zIndex:_e}).addClass(`highcharts-${ae.toLowerCase()}${ge} `+(this.isRadial?`highcharts-radial-axis${ge} `:"")+(ve.className||"")).add(K);this.axisGroup||(this.gridGroup=re("grid","-grid",ve.gridZIndex),this.axisGroup=re("axis","",ve.zIndex),this.labelGroup=re("axis-labels","-labels",ve.labels.zIndex))}getOffset(){let K=this,{chart:Q,horiz:ae,options:ve,side:J,ticks:re,tickPositions:ce,coll:ge}=K,_e=Q.inverted&&!K.isZAxis?[1,0,3,2][J]:J,ze=K.hasData(),Te=ve.title,Ie=ve.labels,Be=R(ve.crossing),Ge=Q.axisOffset,ke=Q.clipOffset,me=[-1,1,1,-1][J],fe,Ae=0,De,Pe=0,je=0,Xe,et;if(K.showAxis=fe=ze||ve.showEmpty,K.staggerLines=K.horiz&&Ie.staggerLines||void 0,K.createGroups(),ze||K.isLinked?(ce.forEach(function(rt){K.generateTick(rt)}),K.renderUnsquish(),K.reserveSpaceDefault=J===0||J===2||{1:"left",3:"right"}[J]===K.labelAlign,W(Ie.reserveSpace,!Be&&null,K.labelAlign==="center"||null,K.reserveSpaceDefault)&&ce.forEach(function(rt){je=Math.max(re[rt].getLabelSize(),je)}),K.staggerLines&&(je*=K.staggerLines),K.labelOffset=je*(K.opposite?-1:1)):H(re,function(rt,dt){rt.destroy(),delete re[dt]}),Te!=null&&Te.text&&Te.enabled!==!1&&(K.addTitle(fe),fe&&!Be&&Te.reserveSpace!==!1&&(K.titleOffset=Ae=K.axisTitle.getBBox()[ae?"height":"width"],Pe=I(De=Te.offset)?0:W(Te.margin,ae?5:10))),K.renderLine(),K.offset=me*W(ve.offset,Ge[J]?Ge[J]+(ve.margin||0):0),K.tickRotCorr=K.tickRotCorr||{x:0,y:0},et=J===0?-K.labelMetrics().h:J===2?K.tickRotCorr.y:0,Xe=Math.abs(je)+Pe,je&&(Xe-=et,Xe+=me*(ae?W(Ie.y,K.tickRotCorr.y+me*Ie.distance):W(Ie.x,me*Ie.distance))),K.axisTitleMargin=W(De,Xe),K.getMaxLabelDimensions&&(K.maxLabelDimensions=K.getMaxLabelDimensions(re,ce)),ge!=="colorAxis"&&ke){let rt=this.tickSize("tick");Ge[J]=Math.max(Ge[J],(K.axisTitleMargin||0)+Ae+me*K.offset,Xe,ce&&ce.length&&rt?rt[0]+me*K.offset:0);let dt=!K.axisLine||ve.offset?0:K.axisLine.strokeWidth()/2;ke[_e]=Math.max(ke[_e],dt)}j(this,"afterGetOffset")}getLinePath(K){let Q=this.chart,ae=this.opposite,ve=this.offset,J=this.horiz,re=this.left+(ae?this.width:0)+ve,ce=Q.chartHeight-this.bottom-(ae?this.height:0)+ve;return ae&&(K*=-1),Q.renderer.crispLine([["M",J?this.left:re,J?ce:this.top],["L",J?Q.chartWidth-this.right:re,J?ce:Q.chartHeight-this.bottom]],K)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(K){let Q=this.horiz,ae=this.left,ve=this.top,J=this.len,re=this.options.title,ce=Q?ae:ve,ge=this.opposite,_e=this.offset,ze=re.x,Te=re.y,Ie=this.chart.renderer.fontMetrics(K),Be=K?Math.max(K.getBBox(!1,0).height-Ie.h-1,0):0,Ge={low:ce+(Q?0:J),middle:ce+J/2,high:ce+(Q?J:0)}[re.align],ke=(Q?ve+this.height:ae)+(Q?1:-1)*(ge?-1:1)*(this.axisTitleMargin||0)+[-Be,Be,Ie.f,-Be][this.side],me={x:Q?Ge+ze:ke+(ge?this.width:0)+_e+ze,y:Q?ke+Te-(ge?this.height:0)+_e:Ge+Te};return j(this,"afterGetTitlePosition",{titlePosition:me}),me}renderMinorTick(K,Q){let ae=this.minorTicks;ae[K]||(ae[K]=new g(this,K,"minor")),Q&&ae[K].isNew&&ae[K].render(null,!0),ae[K].render(null,!1,1)}renderTick(K,Q,ae){let ve=this.isLinked,J=this.ticks;(!ve||K>=this.min&&K<=this.max||this.grid&&this.grid.isColumn)&&(J[K]||(J[K]=new g(this,K)),ae&&J[K].isNew&&J[K].render(Q,!0,-1),J[K].render(Q))}render(){let K,Q,ae=this,ve=ae.chart,J=ae.logarithmic,re=ve.renderer,ce=ae.options,ge=ae.isLinked,_e=ae.tickPositions,ze=ae.axisTitle,Te=ae.ticks,Ie=ae.minorTicks,Be=ae.alternateBands,Ge=ce.stackLabels,ke=ce.alternateGridColor,me=ce.crossing,fe=ae.tickmarkOffset,Ae=ae.axisLine,De=ae.showAxis,Pe=y(re.globalAnimation);if(ae.labelEdge.length=0,ae.overlap=!1,[Te,Ie,Be].forEach(function(je){H(je,function(Xe){Xe.isActive=!1})}),R(me)){let je=this.isXAxis?ve.yAxis[0]:ve.xAxis[0],Xe=[1,-1,-1,1][this.side];if(je){let et=je.toPixels(me,!0);ae.horiz&&(et=je.len-et),ae.offset=Xe*et}}if(ae.hasData()||ge){let je=ae.chart.hasRendered&&ae.old&&R(ae.old.min);ae.minorTickInterval&&!ae.categories&&ae.getMinorTickPositions().forEach(function(Xe){ae.renderMinorTick(Xe,je)}),_e.length&&(_e.forEach(function(Xe,et){ae.renderTick(Xe,et,je)}),fe&&(ae.min===0||ae.single)&&(Te[-1]||(Te[-1]=new g(ae,-1,null,!0)),Te[-1].render(-1))),ke&&_e.forEach(function(Xe,et){Q=_e[et+1]!==void 0?_e[et+1]+fe:ae.max-fe,et%2==0&&Xe<ae.max&&Q<=ae.max+(ve.polar?-fe:fe)&&(Be[Xe]||(Be[Xe]=new m.PlotLineOrBand(ae,{})),K=Xe+fe,Be[Xe].options={from:J?J.lin2log(K):K,to:J?J.lin2log(Q):Q,color:ke,className:"highcharts-alternate-grid"},Be[Xe].render(),Be[Xe].isActive=!0)}),ae._addedPlotLB||(ae._addedPlotLB=!0,(ce.plotLines||[]).concat(ce.plotBands||[]).forEach(function(Xe){ae.addPlotBandOrLine(Xe)}))}[Te,Ie,Be].forEach(function(je){let Xe=[],et=Pe.duration;H(je,function(rt,dt){rt.isActive||(rt.render(dt,!1,0),rt.isActive=!1,Xe.push(dt))}),oe(function(){let rt=Xe.length;for(;rt--;)je[Xe[rt]]&&!je[Xe[rt]].isActive&&(je[Xe[rt]].destroy(),delete je[Xe[rt]])},je!==Be&&ve.hasRendered&&et?et:0)}),Ae&&(Ae[Ae.isPlaced?"animate":"attr"]({d:this.getLinePath(Ae.strokeWidth())}),Ae.isPlaced=!0,Ae[De?"show":"hide"](De)),ze&&De&&(ze[ze.isNew?"attr":"animate"](ae.getTitlePosition(ze)),ze.isNew=!1),Ge&&Ge.enabled&&ae.stacking&&ae.stacking.renderStackTotals(),ae.old={len:ae.len,max:ae.max,min:ae.min,transA:ae.transA,userMax:ae.userMax,userMin:ae.userMin},ae.isDirty=!1,j(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(K){K.render()})),this.series.forEach(function(K){K.isDirty=!0})}getKeepProps(){return this.keepProps||ye.keepProps}destroy(K){let Q=this,ae=Q.plotLinesAndBands,ve=this.eventOptions;if(j(this,"destroy",{keepEvents:K}),K||ue(Q),[Q.ticks,Q.minorTicks,Q.alternateBands].forEach(function(J){N(J)}),ae){let J=ae.length;for(;J--;)ae[J].destroy()}for(let J in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(re){Q[re]&&(Q[re]=Q[re].destroy())}),Q.plotLinesAndBandsGroups)Q.plotLinesAndBandsGroups[J]=Q.plotLinesAndBandsGroups[J].destroy();H(Q,function(J,re){Q.getKeepProps().indexOf(re)===-1&&delete Q[re]}),this.eventOptions=ve}drawCrosshair(K,Q){let ae=this.crosshair,ve=W(ae&&ae.snap,!0),J=this.chart,re,ce,ge,_e=this.cross,ze;if(j(this,"drawCrosshair",{e:K,point:Q}),K||(K=this.cross&&this.cross.e),ae&&(I(Q)||!ve)!==!1){if(ve?I(Q)&&(ce=W(this.coll!=="colorAxis"?Q.crosshairPos:null,this.isXAxis?Q.plotX:this.len-Q.plotY)):ce=K&&(this.horiz?K.chartX-this.pos:this.len-K.chartY+this.pos),I(ce)&&(ze={value:Q&&(this.isXAxis?Q.x:W(Q.stackY,Q.y)),translatedValue:ce},J.polar&&X(ze,{isCrosshair:!0,chartX:K&&K.chartX,chartY:K&&K.chartY,point:Q}),re=this.getPlotLinePath(ze)||null),!I(re)){this.hideCrosshair();return}ge=this.categories&&!this.isRadial,_e||(this.cross=_e=J.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(ge?"category ":"thin ")+(ae.className||"")).attr({zIndex:W(ae.zIndex,2)}).add(),!J.styledMode&&(_e.attr({stroke:ae.color||(ge?u.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":W(ae.width,1)}).css({"pointer-events":"none"}),ae.dashStyle&&_e.attr({dashstyle:ae.dashStyle}))),_e.show().attr({d:re}),ge&&!ae.width&&_e.attr({"stroke-width":this.transA}),this.cross.e=K}else this.hideCrosshair();j(this,"afterDrawCrosshair",{e:K,point:Q})}hideCrosshair(){this.cross&&this.cross.hide(),j(this,"afterHideCrosshair")}update(K,Q){let ae=this.chart;K=$(this.userOptions,K),this.destroy(!0),this.init(ae,K),ae.isDirtyBox=!0,W(Q,!0)&&ae.redraw()}remove(K){let Q=this.chart,ae=this.coll,ve=this.series,J=ve.length;for(;J--;)ve[J]&&ve[J].remove(!1);q(Q.axes,this),q(Q[ae]||[],this),Q.orderItems(ae),this.destroy(),Q.isDirtyBox=!0,W(K,!0)&&Q.redraw()}setTitle(K,Q){this.update({title:K},Q)}setCategories(K,Q){this.update({categories:K},Q)}}return ye.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],ye}),o(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(a){var c;let{addEvent:u,getMagnitude:n,normalizeTickInterval:p,timeUnits:m}=a;return function(g){function v(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function y(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new k(this))}g.compose=function(_){return _.keepProps.includes("dateTime")||(_.keepProps.push("dateTime"),_.prototype.getTimeTicks=v,u(_,"afterSetType",y)),_};class k{constructor(T){this.axis=T}normalizeTimeTickInterval(T,M){let A=M||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],x=A[A.length-1],P=m[x[0]],D=x[1],w;for(w=0;w<A.length&&(P=m[(x=A[w])[0]],D=x[1],!A[w+1]||!(T<=(P*D[D.length-1]+m[A[w+1][0]])/2));w++);P===m.year&&T<5*P&&(D=[1,2,5]);let I=p(T/P,D,x[0]==="year"?Math.max(n(T/P),1):1);return{unitRange:P,count:I,unitName:x[0]}}getXDateFormat(T,M){let{axis:A}=this,x=A.chart.time;return A.closestPointRange?x.getDateFormat(A.closestPointRange,T,A.options.startOfWeek,M)||x.resolveDTLFormat(M.year).main:x.resolveDTLFormat(M.day).main}}g.Additions=k}(c||(c={})),c}),o(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(a){var c;let{addEvent:u,normalizeTickInterval:n,pick:p}=a;return function(m){function g(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new y(this))}function v(){let k=this.logarithmic;k&&(this.lin2val=function(_){return k.lin2log(_)},this.val2lin=function(_){return k.log2lin(_)})}m.compose=function(k){return k.keepProps.includes("logarithmic")||(k.keepProps.push("logarithmic"),u(k,"afterSetType",g),u(k,"afterInit",v)),k};class y{constructor(_){this.axis=_}getLogTickPositions(_,T,M,A){let x=this.axis,P=x.len,D=x.options,w=[];if(A||(this.minorAutoInterval=void 0),_>=.5)_=Math.round(_),w=x.getLinearTickPositions(_,T,M);else if(_>=.08){let I,N,q,Z,X,j,V,U=Math.floor(T);for(I=_>.3?[1,2,4]:_>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=U;N<M+1&&!V;N++)for(q=0,Z=I.length;q<Z&&!V;q++)(X=this.log2lin(this.lin2log(N)*I[q]))>T&&(!A||j<=M)&&j!==void 0&&w.push(j),j>M&&(V=!0),j=X}else{let I=this.lin2log(T),N=this.lin2log(M),q=A?x.getMinorTickInterval():D.tickInterval,Z=D.tickPixelInterval/(A?5:1),X=A?P/x.tickPositions.length:P;_=n(_=p(q==="auto"?null:q,this.minorAutoInterval,(N-I)*Z/(X||1))),w=x.getLinearTickPositions(_,I,N).map(this.log2lin),A||(this.minorAutoInterval=_/5)}return A||(x.tickInterval=_),w}lin2log(_){return Math.pow(10,_)}log2lin(_){return Math.log(_)/Math.LN10}}m.Additions=y}(c||(c={})),c}),o(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(a){var c;let{erase:u,extend:n,isNumber:p}=a;return function(m){let g;function v(x){return this.addPlotBandOrLine(x,"plotBands")}function y(x,P){let D=this.userOptions,w=new g(this,x);if(this.visible&&(w=w.render()),w){if(this._addedPlotLB||(this._addedPlotLB=!0,(D.plotLines||[]).concat(D.plotBands||[]).forEach(I=>{this.addPlotBandOrLine(I)})),P){let I=D[P]||[];I.push(x),D[P]=I}this.plotLinesAndBands.push(w)}return w}function k(x){return this.addPlotBandOrLine(x,"plotLines")}function _(x,P,D){D=D||this.options;let w=this.getPlotLinePath({value:P,force:!0,acrossPanes:D.acrossPanes}),I=[],N=this.horiz,q=!p(this.min)||!p(this.max)||x<this.min&&P<this.min||x>this.max&&P>this.max,Z=this.getPlotLinePath({value:x,force:!0,acrossPanes:D.acrossPanes}),X,j=1,V;if(Z&&w)for(q&&(V=Z.toString()===w.toString(),j=0),X=0;X<Z.length;X+=2){let U=Z[X],L=Z[X+1],R=w[X],G=w[X+1];(U[0]==="M"||U[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&R[1]===U[1]?(R[1]+=j,G[1]+=j):N||R[2]!==U[2]||(R[2]+=j,G[2]+=j),I.push(["M",U[1],U[2]],["L",L[1],L[2]],["L",G[1],G[2]],["L",R[1],R[2]],["Z"])),I.isFlat=V}return I}function T(x){this.removePlotBandOrLine(x)}function M(x){let P=this.plotLinesAndBands,D=this.options,w=this.userOptions;if(P){let I=P.length;for(;I--;)P[I].id===x&&P[I].destroy();[D.plotLines||[],w.plotLines||[],D.plotBands||[],w.plotBands||[]].forEach(function(N){for(I=N.length;I--;)(N[I]||{}).id===x&&u(N,N[I])})}}function A(x){this.removePlotBandOrLine(x)}m.compose=function(x,P){let D=P.prototype;return D.addPlotBand||(g=x,n(D,{addPlotBand:v,addPlotLine:k,addPlotBandOrLine:y,getPlotBandPath:_,removePlotBand:T,removePlotLine:A,removePlotBandOrLine:M})),P}}(c||(c={})),c}),o(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(a,c){let{addEvent:u,arrayMax:n,arrayMin:p,defined:m,destroyObjectProperties:g,erase:v,fireEvent:y,merge:k,objectEach:_,pick:T}=c;class M{static compose(x,P){return u(x,"afterInit",function(){this.labelCollectors.push(()=>{var w;let D=[];for(let I of this.axes)for(let{label:N,options:q}of I.plotLinesAndBands)N&&!((w=q==null?void 0:q.label)!=null&&w.allowOverlap)&&D.push(N);return D})}),a.compose(M,P)}constructor(x,P){this.axis=x,this.options=P,this.id=P.id}render(){y(this,"render");let{axis:x,options:P}=this,{horiz:D,logarithmic:w}=x,{color:I,events:N,zIndex:q=0}=P,Z={},X=x.chart.renderer,j=P.to,V=P.from,U=P.value,L=P.borderWidth,R=P.label,{label:G,svgElem:$}=this,F=[],H,W=m(V)&&m(j),ne=m(U),ue=!$,ie={class:"highcharts-plot-"+(W?"band ":"line ")+(P.className||"")},oe=W?"bands":"lines";if(!x.chart.styledMode&&(ne?(ie.stroke=I||"#999999",ie["stroke-width"]=T(P.width,1),P.dashStyle&&(ie.dashstyle=P.dashStyle)):W&&(ie.fill=I||"#e6e9ff",L&&(ie.stroke=P.borderColor,ie["stroke-width"]=L))),Z.zIndex=q,oe+="-"+q,(H=x.plotLinesAndBandsGroups[oe])||(x.plotLinesAndBandsGroups[oe]=H=X.g("plot-"+oe).attr(Z).add()),$||(this.svgElem=$=X.path().attr(ie).add(H)),m(U))F=x.getPlotLinePath({value:(w==null?void 0:w.log2lin(U))??U,lineWidth:$.strokeWidth(),acrossPanes:P.acrossPanes});else{if(!(m(V)&&m(j)))return;F=x.getPlotBandPath((w==null?void 0:w.log2lin(V))??V,(w==null?void 0:w.log2lin(j))??j,P)}return!this.eventsAdded&&N&&(_(N,(Se,ye)=>{$==null||$.on(ye,Ce=>{N[ye].apply(this,[Ce])})}),this.eventsAdded=!0),(ue||!$.d)&&(F!=null&&F.length)?$.attr({d:F}):$&&(F?($.show(),$.animate({d:F})):$.d&&($.hide(),G&&(this.label=G=G.destroy()))),R&&(m(R.text)||m(R.formatter))&&(F!=null&&F.length)&&x.width>0&&x.height>0&&!F.isFlat?(R=k({align:D&&W?"center":void 0,x:D?!W&&4:10,verticalAlign:!D&&W?"middle":void 0,y:D?W?16:10:W?6:-4,rotation:D&&!W?90:0,...W?{inside:!0}:{}},R),this.renderLabel(R,F,W,q)):G&&G.hide(),this}renderLabel(x,P,D,w){var R;let I=this.axis,N=I.chart.renderer,q=x.inside,Z=this.label;Z||(this.label=Z=N.text(this.getLabelText(x),0,0,x.useHTML).attr({align:x.textAlign||x.align,rotation:x.rotation,class:"highcharts-plot-"+(D?"band":"line")+"-label "+(x.className||""),zIndex:w}),I.chart.styledMode||Z.css(k({fontSize:"0.8em",textOverflow:D&&!q?"":"ellipsis"},x.style)),Z.add());let X=P.xBounds||[P[0][1],P[1][1],D?P[2][1]:P[0][1]],j=P.yBounds||[P[0][2],P[1][2],D?P[2][2]:P[0][2]],V=p(X),U=p(j),L=n(X)-V;Z.align(x,!1,{x:V,y:U,width:L,height:n(j)-U}),(!Z.alignValue||Z.alignValue==="left"||m(q))&&Z.css({width:(((R=x.style)==null?void 0:R.width)||(D&&q?L:Z.rotation===90?I.height-(Z.alignAttr.y-I.top):(x.clip?I.width:I.chart.chartWidth)-(Z.alignAttr.x-I.left)))+"px"}),Z.show(!0)}getLabelText(x){return m(x.formatter)?x.formatter.call(this):x.text}destroy(){v(this.axis.plotLinesAndBands,this),delete this.axis,g(this)}}return M}),o(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m){var g;let{animObject:v}=a,{format:y}=c,{composed:k,doc:_,isSafari:T}=u,{distribute:M}=n,{addEvent:A,clamp:x,css:P,discardElement:D,extend:w,fireEvent:I,isArray:N,isNumber:q,isString:Z,merge:X,pick:j,pushUnique:V,splat:U,syncTimeout:L}=m;class R{constructor($,F,H){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=$,this.init($,F),this.pointer=H}bodyFormatter($){return $.map(function(F){let H=F.series.tooltipOptions;return(H[(F.point.formatPrefix||"point")+"Formatter"]||F.point.tooltipFormatter).call(F.point,H[(F.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit($){this.chart.series.forEach(function(F){let H=F&&F.tt;H&&(!H.isActive||$?F.tt=H.destroy():H.isActive=!1)})}defaultFormatter($){let F,H=this.points||U(this);return(F=(F=[$.tooltipFooterHeaderFormatter(H[0])]).concat($.bodyFormatter(H))).push($.tooltipFooterHeaderFormatter(H[0],!0)),F}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),m.clearTimeout(this.hideTimer)}getAnchor($,F){let H,{chart:W,pointer:ne}=this,ue=W.inverted,ie=W.plotTop,oe=W.plotLeft;if(($=U($))[0].series&&$[0].series.yAxis&&!$[0].series.yAxis.options.reversedStacks&&($=$.slice().reverse()),this.followPointer&&F)F.chartX===void 0&&(F=ne.normalize(F)),H=[F.chartX-oe,F.chartY-ie];else if($[0].tooltipPos)H=$[0].tooltipPos;else{let Se=0,ye=0;$.forEach(function(Ce){let K=Ce.pos(!0);K&&(Se+=K[0],ye+=K[1])}),Se/=$.length,ye/=$.length,this.shared&&$.length>1&&F&&(ue?Se=F.chartX:ye=F.chartY),H=[Se-oe,ye-ie]}return H.map(Math.round)}getClassName($,F,H){let W=this.options,ne=$.series,ue=ne.options;return[W.className,"highcharts-label",H&&"highcharts-tooltip-header",F?"highcharts-tooltip-box":"highcharts-tooltip",!H&&"highcharts-color-"+j($.colorIndex,ne.colorIndex),ue&&ue.className].filter(Z).join(" ")}getLabel({anchorX:$,anchorY:F}={anchorX:0,anchorY:0}){let H=this,W=this.chart.styledMode,ne=this.options,ue=this.split&&this.allowShared,ie=this.container,oe=this.chart.renderer;if(this.label){let Se=!this.label.hasClass("highcharts-label");(!ue&&Se||ue&&!Se)&&this.destroy()}if(!this.label){if(this.outside){let Se=this.chart.options.chart.style,ye=p.getRendererType();this.container=ie=u.doc.createElement("div"),ie.className="highcharts-tooltip-container",P(ie,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(Se&&Se.zIndex||0)+3)}),this.renderer=oe=new ye(ie,0,0,Se,void 0,void 0,oe.styledMode)}if(ue?this.label=oe.g("tooltip"):(this.label=oe.label("",$,F,ne.shape,void 0,void 0,ne.useHTML,void 0,"tooltip").attr({padding:ne.padding,r:ne.borderRadius}),W||this.label.attr({fill:ne.backgroundColor,"stroke-width":ne.borderWidth||0}).css(ne.style).css({pointerEvents:ne.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),H.outside){let Se=this.label;[Se.xSetter,Se.ySetter].forEach((ye,Ce)=>{Se[Ce?"ySetter":"xSetter"]=K=>{ye.call(Se,H.distance),Se[Ce?"y":"x"]=K,ie&&(ie.style[Ce?"top":"left"]=`${K}px`)}})}this.label.attr({zIndex:8}).shadow(ne.shadow).add()}return ie&&!ie.parentElement&&u.doc.body.appendChild(ie),this.label}getPlayingField(){let{body:$,documentElement:F}=_,{chart:H,distance:W,outside:ne}=this;return{width:ne?Math.max($.scrollWidth,F.scrollWidth,$.offsetWidth,F.offsetWidth,F.clientWidth)-2*W:H.chartWidth,height:ne?Math.max($.scrollHeight,F.scrollHeight,$.offsetHeight,F.offsetHeight,F.clientHeight):H.chartHeight}}getPosition($,F,H){var Pe,je;let{distance:W,chart:ne,outside:ue,pointer:ie}=this,{inverted:oe,plotLeft:Se,plotTop:ye,polar:Ce}=ne,{plotX:K=0,plotY:Q=0}=H,ae={},ve=oe&&H.h||0,{height:J,width:re}=this.getPlayingField(),ce=ie.getChartPosition(),ge=Xe=>Xe*ce.scaleX,_e=Xe=>Xe*ce.scaleY,ze=Xe=>{let et=Xe==="x";return[Xe,et?re:J,et?$:F].concat(ue?[et?ge($):_e(F),et?ce.left-W+ge(K+Se):ce.top-W+_e(Q+ye),0,et?re:J]:[et?$:F,et?K+Se:Q+ye,et?Se:ye,et?Se+ne.plotWidth:ye+ne.plotHeight])},Te=ze("y"),Ie=ze("x"),Be,Ge=!!H.negative;!Ce&&((je=(Pe=ne.hoverSeries)==null?void 0:Pe.yAxis)!=null&&je.reversed)&&(Ge=!Ge);let ke=!this.followPointer&&j(H.ttBelow,!Ce&&!oe===Ge),me=function(Xe,et,rt,dt,gt,wt,Rt){let ft=ue?Xe==="y"?_e(W):ge(W):W,Ct=(rt-dt)/2,Tt=dt<gt-W,si=gt+W+dt<et,ui=gt-ft-rt+Ct,Ht=gt+ft-Ct;if(ke&&si)ae[Xe]=Ht;else if(!ke&&Tt)ae[Xe]=ui;else if(Tt)ae[Xe]=Math.min(Rt-dt,ui-ve<0?ui:ui-ve);else{if(!si)return!1;ae[Xe]=Math.max(wt,Ht+ve+rt>et?Ht:Ht+ve)}},fe=function(Xe,et,rt,dt,gt){if(gt<W||gt>et-W)return!1;gt<rt/2?ae[Xe]=1:gt>et-dt/2?ae[Xe]=et-dt-2:ae[Xe]=gt-rt/2},Ae=function(Xe){[Te,Ie]=[Ie,Te],Be=Xe},De=()=>{me.apply(0,Te)!==!1?fe.apply(0,Ie)!==!1||Be||(Ae(!0),De()):Be?ae.x=ae.y=0:(Ae(!0),De())};return(oe&&!Ce||this.len>1)&&Ae(),De(),ae}hide($){let F=this;m.clearTimeout(this.hideTimer),$=j($,this.options.hideDelay),this.isHidden||(this.hideTimer=L(function(){let H=F.getLabel();F.getLabel().animate({opacity:0},{duration:$&&150,complete:()=>{H.hide(),F.container&&F.container.remove()}}),F.isHidden=!0},$))}init($,F){this.chart=$,this.options=F,this.crosshairs=[],this.isHidden=!0,this.split=F.split&&!$.inverted&&!$.polar,this.shared=F.shared||this.split,this.outside=j(F.outside,!!($.scrollablePixelsX||$.scrollablePixelsY))}shouldStickOnContact($){return!!(!this.followPointer&&this.options.stickOnContact&&(!$||this.pointer.inClass($.target,"highcharts-tooltip")))}move($,F,H,W){let ne=this,ue=v(!ne.isHidden&&ne.options.animation),ie=ne.followPointer||(ne.len||0)>1,oe={x:$,y:F};ie||(oe.anchorX=H,oe.anchorY=W),ue.step=()=>ne.drawTracker(),ne.getLabel().animate(oe,ue)}refresh($,F){let{chart:H,options:W,pointer:ne,shared:ue}=this,ie=U($),oe=ie[0],Se=[],ye=W.format,Ce=W.formatter||this.defaultFormatter,K=H.styledMode,Q={},ae=this.allowShared;if(!W.enabled||!oe.series)return;m.clearTimeout(this.hideTimer),this.allowShared=!(!N($)&&$.series&&$.series.noSharedTooltip),ae=ae&&!this.allowShared,this.followPointer=!this.split&&oe.series.tooltipOptions.followPointer;let ve=this.getAnchor($,F),J=ve[0],re=ve[1];ue&&this.allowShared?(ne.applyInactiveState(ie),ie.forEach(function(_e){_e.setState("hover"),Se.push(_e.getLabelConfig())}),(Q=oe.getLabelConfig()).points=Se):Q=oe.getLabelConfig(),this.len=Se.length;let ce=Z(ye)?y(ye,Q,H):Ce.call(Q,this),ge=oe.series;if(this.distance=j(ge.tooltipOptions.distance,16),ce===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ce,ie);else{let _e=J,ze=re;if(F&&ne.isDirectTouch&&(_e=F.chartX-H.plotLeft,ze=F.chartY-H.plotTop),H.polar||ge.options.clip===!1||ie.some(Te=>ne.isDirectTouch||Te.series.shouldShowTooltip(_e,ze))){let Te=this.getLabel(ae&&this.tt||{});(!W.style.width||K)&&Te.css({width:(this.outside?this.getPlayingField():H.spacingBox).width+"px"}),Te.attr({class:this.getClassName(oe),text:ce&&ce.join?ce.join(""):ce}),this.outside&&Te.attr({x:x(Te.x||0,0,this.getPlayingField().width-(Te.width||0))}),K||Te.attr({stroke:W.borderColor||oe.color||ge.color||"#666666"}),this.updatePosition({plotX:J,plotY:re,negative:oe.negative,ttBelow:oe.ttBelow,h:ve[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}I(this,"refresh")}renderSplit($,F){var et;let H=this,{chart:W,chart:{chartWidth:ne,chartHeight:ue,plotHeight:ie,plotLeft:oe,plotTop:Se,scrollablePixelsY:ye=0,scrollablePixelsX:Ce,styledMode:K},distance:Q,options:ae,options:{positioner:ve},pointer:J}=H,{scrollLeft:re=0,scrollTop:ce=0}=((et=W.scrollablePlotArea)==null?void 0:et.scrollingContainer)||{},ge=H.outside&&typeof Ce!="number"?_.documentElement.getBoundingClientRect():{left:re,right:re+ne,top:ce,bottom:ce+ue},_e=H.getLabel(),ze=this.renderer||W.renderer,Te=!!(W.xAxis[0]&&W.xAxis[0].opposite),{left:Ie,top:Be}=J.getChartPosition(),Ge=Se+ce,ke=0,me=ie-ye;function fe(rt,dt,gt,wt,Rt=!0){let ft,Ct;return gt?(ft=Te?0:me,Ct=x(rt-wt/2,ge.left,ge.right-wt-(H.outside?Ie:0))):(ft=dt-Ge,Ct=x(Ct=Rt?rt-wt-Q:rt+Q,Rt?Ct:ge.left,ge.right)),{x:Ct,y:ft}}Z($)&&($=[!1,$]);let Ae=$.slice(0,F.length+1).reduce(function(rt,dt,gt){if(dt!==!1&&dt!==""){let wt=F[gt-1]||{isHeader:!0,plotX:F[0].plotX,plotY:ie,series:{}},Rt=wt.isHeader,ft=Rt?H:wt.series,Ct=ft.tt=function(ar,Zi,mr){let zr=ar,{isHeader:ir,series:ut}=Zi;if(!zr){let bt={padding:ae.padding,r:ae.borderRadius};K||(bt.fill=ae.backgroundColor,bt["stroke-width"]=ae.borderWidth??1),zr=ze.label("",0,0,ae[ir?"headerShape":"shape"],void 0,void 0,ae.useHTML).addClass(H.getClassName(Zi,!0,ir)).attr(bt).add(_e)}return zr.isActive=!0,zr.attr({text:mr}),K||zr.css(ae.style).attr({stroke:ae.borderColor||Zi.color||ut.color||"#333333"}),zr}(ft.tt,wt,dt.toString()),Tt=Ct.getBBox(),si=Tt.width+Ct.strokeWidth();Rt&&(ke=Tt.height,me+=ke,Te&&(Ge-=ke));let{anchorX:ui,anchorY:Ht}=function(ar){let Zi,mr,{isHeader:zr,plotX:ir=0,plotY:ut=0,series:bt}=ar;if(zr)Zi=Math.max(oe+ir,oe),mr=Se+ie/2;else{let{xAxis:Pt,yAxis:Bt}=bt;Zi=Pt.pos+x(ir,-Q,Pt.len+Q),bt.shouldShowTooltip(0,Bt.pos-Se+ut,{ignoreX:!0})&&(mr=Bt.pos+ut)}return{anchorX:Zi=x(Zi,ge.left-Q,ge.right+Q),anchorY:mr}}(wt);if(typeof Ht=="number"){let ar=Tt.height+1,Zi=ve?ve.call(H,si,ar,wt):fe(ui,Ht,Rt,si);rt.push({align:ve?0:void 0,anchorX:ui,anchorY:Ht,boxWidth:si,point:wt,rank:j(Zi.rank,Rt?1:0),size:ar,target:Zi.y,tt:Ct,x:Zi.x})}else Ct.isActive=!1}return rt},[]);!ve&&Ae.some(rt=>{let{outside:dt}=H,gt=(dt?Ie:0)+rt.anchorX;return gt<ge.left&&gt+rt.boxWidth<ge.right||gt<Ie-ge.left+rt.boxWidth&&ge.right-gt>gt})&&(Ae=Ae.map(rt=>{let{x:dt,y:gt}=fe(rt.anchorX,rt.anchorY,rt.point.isHeader,rt.boxWidth,!1);return w(rt,{target:gt,x:dt})})),H.cleanSplit(),M(Ae,me);let De={left:Ie,right:Ie};Ae.forEach(function(rt){let{x:dt,boxWidth:gt,isHeader:wt}=rt;!wt&&(H.outside&&Ie+dt<De.left&&(De.left=Ie+dt),!wt&&H.outside&&De.left+gt>De.right&&(De.right=Ie+dt))}),Ae.forEach(function(rt){let{x:dt,anchorX:gt,anchorY:wt,pos:Rt,point:{isHeader:ft}}=rt,Ct={visibility:Rt===void 0?"hidden":"inherit",x:dt,y:(Rt||0)+Ge,anchorX:gt,anchorY:wt};if(H.outside&&dt<gt){let Tt=Ie-De.left;Tt>0&&(ft||(Ct.x=dt+Tt,Ct.anchorX=gt+Tt),ft&&(Ct.x=(De.right-De.left)/2,Ct.anchorX=gt+Tt))}rt.tt.attr(Ct)});let{container:Pe,outside:je,renderer:Xe}=H;if(je&&Pe&&Xe){let{width:rt,height:dt,x:gt,y:wt}=_e.getBBox();Xe.setSize(rt+gt,dt+wt,!1),Pe.style.left=De.left+"px",Pe.style.top=Be+"px"}T&&_e.attr({opacity:_e.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let $=this.chart,F=this.label,H=this.shared?$.hoverPoints:$.hoverPoint;if(!F||!H)return;let W={x:0,y:0,width:0,height:0},ne=this.getAnchor(H),ue=F.getBBox();ne[0]+=$.plotLeft-(F.translateX||0),ne[1]+=$.plotTop-(F.translateY||0),W.x=Math.min(0,ne[0]),W.y=Math.min(0,ne[1]),W.width=ne[0]<0?Math.max(Math.abs(ne[0]),ue.width-ne[0]):Math.max(Math.abs(ne[0]),ue.width),W.height=ne[1]<0?Math.max(Math.abs(ne[1]),ue.height-Math.abs(ne[1])):Math.max(Math.abs(ne[1]),ue.height),this.tracker?this.tracker.attr(W):(this.tracker=F.renderer.rect(W).addClass("highcharts-tracker").add(F),$.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat($){return $.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter($,F){let H=$.series,W=H.tooltipOptions,ne=H.xAxis,ue=ne&&ne.dateTime,ie={isFooter:F,labelConfig:$},oe=W.xDateFormat,Se=W[F?"footerFormat":"headerFormat"];return I(this,"headerFormatter",ie,function(ye){ue&&!oe&&q($.key)&&(oe=ue.getXDateFormat($.key,W.dateTimeLabelFormats)),ue&&oe&&($.point&&$.point.tooltipDateKeys||["key"]).forEach(function(Ce){Se=Se.replace("{point."+Ce+"}","{point."+Ce+":"+oe+"}")}),H.chart.styledMode&&(Se=this.styledModeFormat(Se)),ye.text=y(Se,{point:$,series:H},this.chart)}),ie.text}update($){this.destroy(),this.init(this.chart,X(!0,this.options,$))}updatePosition($){let{chart:F,container:H,distance:W,options:ne,pointer:ue,renderer:ie}=this,{height:oe=0,width:Se=0}=this.getLabel(),{left:ye,top:Ce,scaleX:K,scaleY:Q}=ue.getChartPosition(),ae=(ne.positioner||this.getPosition).call(this,Se,oe,$),ve=($.plotX||0)+F.plotLeft,J=($.plotY||0)+F.plotTop,re;ie&&H&&(ne.positioner&&(ae.x+=ye-W,ae.y+=Ce-W),re=(ne.borderWidth||0)+2*W+2,ie.setSize(Se+re,oe+re,!1),(K!==1||Q!==1)&&(P(H,{transform:`scale(${K}, ${Q})`}),ve*=K,J*=Q),ve+=ye-ae.x,J+=Ce-ae.y),this.move(Math.round(ae.x),Math.round(ae.y||0),ve,J)}}return(g=R).compose=function(G){V(k,"Core.Tooltip")&&A(G,"afterInit",function(){let $=this.chart;$.options.tooltip&&($.tooltip=new g($,$.options.tooltip,this))})},R}),o(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{animObject:m}=c,{defaultOptions:g}=u,{format:v}=n,{addEvent:y,crisp:k,erase:_,extend:T,fireEvent:M,getNestedProperty:A,isArray:x,isFunction:P,isNumber:D,isObject:w,merge:I,pick:N,syncTimeout:q,removeEvent:Z,uniqueKey:X}=p;class j{animateBeforeDestroy(){let U=this,L={x:U.startXPos,opacity:0},R=U.getGraphicalProps();R.singular.forEach(function(G){U[G]=U[G].animate(G==="dataLabel"?{x:U[G].startXPos,y:U[G].startYPos,opacity:0}:L)}),R.plural.forEach(function(G){U[G].forEach(function($){$.element&&$.animate(T({x:U.startXPos},$.startYPos?{x:$.startXPos,y:$.startYPos}:{}))})})}applyOptions(U,L){let R=this.series,G=R.options.pointValKey||R.pointValKey;return T(this,U=j.prototype.optionsToObject.call(this,U)),this.options=this.options?T(this.options,U):U,U.group&&delete this.group,U.dataLabels&&delete this.dataLabels,G&&(this.y=j.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&L===void 0&&R.xAxis&&R.xAxis.hasNames&&(this.x=R.xAxis.nameToX(this)),this.x===void 0&&R?this.x=L??R.autoIncrement():D(U.x)&&R.options.relativeXValue&&(this.x=R.autoIncrement(U.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let U=this,L=U.series,R=L.chart,G=L.options.dataSorting,$=R.hoverPoints,F=m(U.series.chart.renderer.globalAnimation),H=()=>{for(let W in(U.graphic||U.graphics||U.dataLabel||U.dataLabels)&&(Z(U),U.destroyElements()),U)delete U[W]};U.legendItem&&R.legend.destroyItem(U),$&&(U.setState(),_($,U),$.length||(R.hoverPoints=null)),U===R.hoverPoint&&U.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),q(H,F.duration)):H(),R.pointCount--}this.destroyed=!0}destroyElements(U){let L=this,R=L.getGraphicalProps(U);R.singular.forEach(function(G){L[G]=L[G].destroy()}),R.plural.forEach(function(G){L[G].forEach(function($){$&&$.element&&$.destroy()}),delete L[G]})}firePointEvent(U,L,R){let G=this,$=this.series.options;G.manageEvent(U),U==="click"&&$.allowPointSelect&&(R=function(F){!G.destroyed&&G.select&&G.select(null,F.ctrlKey||F.metaKey||F.shiftKey)}),M(G,U,L,R)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(U){let L,R,G=this,$=[],F={singular:[],plural:[]};for((U=U||{graphic:1,dataLabel:1}).graphic&&$.push("graphic","connector"),U.dataLabel&&$.push("dataLabel","dataLabelPath","dataLabelUpper"),R=$.length;R--;)G[L=$[R]]&&F.singular.push(L);return["graphic","dataLabel"].forEach(function(H){let W=H+"s";U[H]&&G[W]&&F.plural.push(W)}),F}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(U){return U?U.indexOf("custom.")===0?A(U,this.options):this[U]:void 0}getZone(){let U=this.series,L=U.zones,R=U.zoneAxis||"y",G,$=0;for(G=L[0];this[R]>=G.value;)G=L[++$];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(U,L,R){this.formatPrefix="point",this.visible=!0,this.series=U,this.applyOptions(L,R),this.id??(this.id=X()),this.resolveColor(),U.chart.pointCount++,M(this,"afterInit")}isValid(){return(D(this.x)||this.x instanceof Date)&&D(this.y)}optionsToObject(U){let L=this.series,R=L.options.keys,G=R||L.pointArrayMap||["y"],$=G.length,F={},H,W=0,ne=0;if(D(U)||U===null)F[G[0]]=U;else if(x(U))for(!R&&U.length>$&&((H=typeof U[0])=="string"?F.name=U[0]:H==="number"&&(F.x=U[0]),W++);ne<$;)R&&U[W]===void 0||(G[ne].indexOf(".")>0?j.prototype.setNestedProperty(F,U[W],G[ne]):F[G[ne]]=U[W]),W++,ne++;else typeof U=="object"&&(F=U,U.dataLabels&&(L.hasDataLabels=()=>!0),U.marker&&(L._hasPointMarkers=!0));return F}pos(U,L=this.plotY){if(!this.destroyed){let{plotX:R,series:G}=this,{chart:$,xAxis:F,yAxis:H}=G,W=0,ne=0;if(D(R)&&D(L))return U&&(W=F?F.pos:$.plotLeft,ne=H?H.pos:$.plotTop),$.inverted&&F&&H?[H.len-L+ne,F.len-R+W]:[R+W,L+ne]}}resolveColor(){let U=this.series,L=U.chart.options.chart,R=U.chart.styledMode,G,$,F=L.colorCount,H;delete this.nonZonedColor,U.options.colorByPoint?(R||(G=($=U.options.colors||U.chart.options.colors)[U.colorCounter],F=$.length),H=U.colorCounter,U.colorCounter++,U.colorCounter===F&&(U.colorCounter=0)):(R||(G=U.color),H=U.colorIndex),this.colorIndex=N(this.options.colorIndex,H),this.color=N(this.options.color,G)}setNestedProperty(U,L,R){return R.split(".").reduce(function(G,$,F,H){let W=H.length-1===F;return G[$]=W?L:w(G[$],!0)?G[$]:{},G[$]},U),U}shouldDraw(){return!this.isNull}tooltipFormatter(U){let L=this.series,R=L.tooltipOptions,G=N(R.valueDecimals,""),$=R.valuePrefix||"",F=R.valueSuffix||"";return L.chart.styledMode&&(U=L.chart.tooltip.styledModeFormat(U)),(L.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,($||F)&&(U=U.replace(RegExp(H+"}","g"),$+H+"}"+F)),U=U.replace(RegExp(H+"}","g"),H+":,."+G+"f}")}),v(U,{point:this,series:this.series},L.chart)}update(U,L,R,G){let $,F=this,H=F.series,W=F.graphic,ne=H.chart,ue=H.options;function ie(){F.applyOptions(U);let oe=W&&F.hasMockGraphic,Se=F.y===null?!oe:oe;W&&Se&&(F.graphic=W.destroy(),delete F.hasMockGraphic),w(U,!0)&&(W&&W.element&&U&&U.marker&&U.marker.symbol!==void 0&&(F.graphic=W.destroy()),U!=null&&U.dataLabels&&F.dataLabel&&(F.dataLabel=F.dataLabel.destroy())),$=F.index,H.updateParallelArrays(F,$),ue.data[$]=w(ue.data[$],!0)||w(U,!0)?F.options:N(U,ue.data[$]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(ne.isDirtyBox=!0),ue.legendType==="point"&&(ne.isDirtyLegend=!0),L&&ne.redraw(R)}L=N(L,!0),G===!1?ie():F.firePointEvent("update",{options:U},ie)}remove(U,L){this.series.removePoint(this.series.data.indexOf(this),U,L)}select(U,L){let R=this,G=R.series,$=G.chart;U=N(U,!R.selected),this.selectedStaging=U,R.firePointEvent(U?"select":"unselect",{accumulate:L},function(){R.selected=R.options.selected=U,G.options.data[G.data.indexOf(R)]=R.options,R.setState(U&&"select"),L||$.getSelectedPoints().forEach(function(F){let H=F.series;F.selected&&F!==R&&(F.selected=F.options.selected=!1,H.options.data[H.data.indexOf(F)]=F.options,F.setState($.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),F.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(U){let{inverted:L,pointer:R}=this.series.chart;R&&(U=U?R.normalize(U):R.getChartCoordinatesFromPoint(this,L),R.runPointActions(U,this))}onMouseOut(){let U=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(U.hoverPoints||[]).forEach(function(L){L.setState()}),U.hoverPoints=U.hoverPoint=null}manageEvent(U){var G,$,F,H,W,ne;let L=I(this.series.options.point,this.options),R=(G=L.events)==null?void 0:G[U];P(R)&&(!(($=this.hcEvents)!=null&&$[U])||((H=(F=this.hcEvents)==null?void 0:F[U])==null?void 0:H.map(ue=>ue.fn).indexOf(R))===-1)?((W=this.importedUserEvent)==null||W.call(this),this.importedUserEvent=y(this,U,R)):this.importedUserEvent&&!R&&((ne=this.hcEvents)!=null&&ne[U])&&(Z(this,U),delete this.hcEvents[U],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(U,L){var ce;let R=this.series,G=this.state,$=R.options.states[U||"normal"]||{},F=g.plotOptions[R.type].marker&&R.options.marker,H=F&&F.enabled===!1,W=F&&F.states&&F.states[U||"normal"]||{},ne=W.enabled===!1,ue=this.marker||{},ie=R.chart,oe=F&&R.markerAttribs,Se=R.halo,ye,Ce,K,Q=R.stateMarkerGraphic,ae;if((U=U||"")===this.state&&!L||this.selected&&U!=="select"||$.enabled===!1||U&&(ne||H&&W.enabled===!1)||U&&ue.states&&ue.states[U]&&ue.states[U].enabled===!1)return;if(this.state=U,oe&&(ye=R.markerAttribs(this,U)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),U&&this.graphic.addClass("highcharts-point-"+U),!ie.styledMode){Ce=R.pointAttribs(this,U),K=N(ie.options.chart.animation,$.animation);let ge=Ce.opacity;R.options.inactiveOtherPoints&&D(ge)&&(this.dataLabels||[]).forEach(function(_e){_e&&!_e.hasClass("highcharts-data-label-hidden")&&(_e.animate({opacity:ge},K),_e.connector&&_e.connector.animate({opacity:ge},K))}),this.graphic.animate(Ce,K)}ye&&this.graphic.animate(ye,N(ie.options.chart.animation,W.animation,F.animation)),Q&&Q.hide()}else U&&W&&(ae=ue.symbol||R.symbol,Q&&Q.currentSymbol!==ae&&(Q=Q.destroy()),ye&&(Q?Q[L?"animate":"attr"]({x:ye.x,y:ye.y}):ae&&(R.stateMarkerGraphic=Q=ie.renderer.symbol(ae,ye.x,ye.y,ye.width,ye.height).add(R.markerGroup),Q.currentSymbol=ae)),!ie.styledMode&&Q&&this.state!=="inactive"&&Q.attr(R.pointAttribs(this,U))),Q&&(Q[U&&this.isInside?"show":"hide"](),Q.element.point=this,Q.addClass(this.getClassName(),!0));let ve=$.halo,J=this.graphic||Q,re=J&&J.visibility||"inherit";ve&&ve.size&&J&&re!=="hidden"&&!this.isCluster?(Se||(R.halo=Se=ie.renderer.path().add(J.parentGroup)),Se.show()[L?"animate":"attr"]({d:this.haloPath(ve.size)}),Se.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,R.colorIndex)+(this.className?" "+this.className:""),visibility:re,zIndex:-1}),Se.point=this,ie.styledMode||Se.attr(T({fill:this.color||R.color,"fill-opacity":ve.opacity},a.filterUserAttributes(ve.attributes||{})))):(ce=Se==null?void 0:Se.point)!=null&&ce.haloPath&&!Se.point.destroyed&&Se.animate({d:Se.point.haloPath(0)},null,Se.hide),M(this,"afterSetState",{state:U})}haloPath(U){let L=this.pos();return L?this.series.chart.renderer.symbols.circle(k(L[0],1)-U,L[1]-U,2*U,2*U):[]}}return j}),o(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){var n;let{parse:p}=a,{charts:m,composed:g,isTouchDevice:v}=c,{addEvent:y,attr:k,css:_,extend:T,find:M,fireEvent:A,isNumber:x,isObject:P,objectEach:D,offset:w,pick:I,pushUnique:N,splat:q}=u;class Z{applyInactiveState(j){let V=[],U;(j||[]).forEach(function(L){U=L.series,V.push(U),U.linkedParent&&V.push(U.linkedParent),U.linkedSeries&&(V=V.concat(U.linkedSeries)),U.navigatorSeries&&V.push(U.navigatorSeries)}),this.chart.series.forEach(function(L){V.indexOf(L)===-1?L.setState("inactive",!0):L.options.inactiveOtherPoints&&L.setAllPointsToState("inactive")})}destroy(){let j=this;this.eventsToUnbind.forEach(V=>V()),this.eventsToUnbind=[],!c.chartCount&&(Z.unbindDocumentMouseUp&&Z.unbindDocumentMouseUp.forEach(V=>V()),Z.unbindDocumentTouchEnd&&(Z.unbindDocumentTouchEnd=Z.unbindDocumentTouchEnd())),clearInterval(j.tooltipTimeout),D(j,function(V,U){j[U]=void 0})}getSelectionMarkerAttrs(j,V){let U={args:{chartX:j,chartY:V},attrs:{},shapeType:"rect"};return A(this,"getSelectionMarkerAttrs",U,L=>{let R,{chart:G,zoomHor:$,zoomVert:F}=this,{mouseDownX:H=0,mouseDownY:W=0}=G,ne=L.attrs;ne.x=G.plotLeft,ne.y=G.plotTop,ne.width=$?1:G.plotWidth,ne.height=F?1:G.plotHeight,$&&(R=j-H,ne.width=Math.max(1,Math.abs(R)),ne.x=(R>0?0:R)+H),F&&(R=V-W,ne.height=Math.max(1,Math.abs(R)),ne.y=(R>0?0:R)+W)}),U}drag(j){let{chart:V}=this,{mouseDownX:U=0,mouseDownY:L=0}=V,{panning:R,panKey:G,selectionMarkerFill:$}=V.options.chart,F=V.plotLeft,H=V.plotTop,W=V.plotWidth,ne=V.plotHeight,ue=P(R)?R.enabled:R,ie=G&&j[`${G}Key`],oe=j.chartX,Se=j.chartY,ye,Ce=this.selectionMarker;if((!Ce||!Ce.touch)&&(oe<F?oe=F:oe>F+W&&(oe=F+W),Se<H?Se=H:Se>H+ne&&(Se=H+ne),this.hasDragged=Math.sqrt(Math.pow(U-oe,2)+Math.pow(L-Se,2)),this.hasDragged>10)){ye=V.isInsidePlot(U-F,L-H,{visiblePlotOnly:!0});let{shapeType:K,attrs:Q}=this.getSelectionMarkerAttrs(oe,Se);(V.hasCartesianSeries||V.mapView)&&this.hasZoom&&ye&&!ie&&!Ce&&(this.selectionMarker=Ce=V.renderer[K](),Ce.attr({class:"highcharts-selection-marker",zIndex:7}).add(),V.styledMode||Ce.attr({fill:$||p("#334eff").setOpacity(.25).get()})),Ce&&Ce.attr(Q),ye&&!Ce&&ue&&V.pan(j,R)}}dragStart(j){let V=this.chart;V.mouseIsDown=j.type,V.cancelClick=!1,V.mouseDownX=j.chartX,V.mouseDownY=j.chartY}getSelectionBox(j){let V={args:{marker:j},result:j.getBBox()};return A(this,"getSelectionBox",V),V.result}drop(j){let V,{chart:U,selectionMarker:L}=this;for(let R of U.axes)R.isPanning&&(R.isPanning=!1,(R.options.startOnTick||R.options.endOnTick||R.series.some(G=>G.boosted))&&(R.forceRedraw=!0,R.setExtremes(R.userMin,R.userMax,!1),V=!0));if(V&&U.redraw(),L&&j){if(this.hasDragged){let R=this.getSelectionBox(L);U.transform({axes:U.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:j,xAxis:[],yAxis:[],...R},from:R})}x(U.index)&&(this.selectionMarker=L.destroy())}U&&x(U.index)&&(_(U.container,{cursor:U._cursor}),U.cancelClick=this.hasDragged>10,U.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(j,V,U){let L;return j.forEach(function(R){let G=!(R.noSharedTooltip&&V)&&0>R.options.findNearestPointBy.indexOf("y"),$=R.searchPoint(U,G);P($,!0)&&$.series&&(!P(L,!0)||function(F,H){var ie,oe;let W=F.distX-H.distX,ne=F.dist-H.dist,ue=((ie=H.series.group)==null?void 0:ie.zIndex)-((oe=F.series.group)==null?void 0:oe.zIndex);return W!==0&&V?W:ne!==0?ne:ue!==0?ue:F.series.index>H.series.index?-1:1}(L,$)>0)&&(L=$)}),L}getChartCoordinatesFromPoint(j,V){let{xAxis:U,yAxis:L}=j.series,R=j.shapeArgs;if(U&&L){let G=j.clientX??j.plotX??0,$=j.plotY||0;return j.isNode&&R&&x(R.x)&&x(R.y)&&(G=R.x,$=R.y),V?{chartX:L.len+L.pos-$,chartY:U.len+U.pos-G}:{chartX:G+U.pos,chartY:$+L.pos}}if(R&&R.x&&R.y)return{chartX:R.x,chartY:R.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:j}=this.chart,V=w(j);this.chartPosition={left:V.left,top:V.top,scaleX:1,scaleY:1};let{offsetHeight:U,offsetWidth:L}=j;return L>2&&U>2&&(this.chartPosition.scaleX=V.width/L,this.chartPosition.scaleY=V.height/U),this.chartPosition}getCoordinates(j){let V={xAxis:[],yAxis:[]};for(let U of this.chart.axes)V[U.isXAxis?"xAxis":"yAxis"].push({axis:U,value:U.toValue(j[U.horiz?"chartX":"chartY"])});return V}getHoverData(j,V,U,L,R,G){let $=[],F=function(ie){return ie.visible&&!(!R&&ie.directTouch)&&I(ie.options.enableMouseTracking,!0)},H=V,W,ne={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:R};A(this,"beforeGetHoverData",ne),W=H&&!H.stickyTracking?[H]:U.filter(ie=>ie.stickyTracking&&(ne.filter||F)(ie));let ue=L&&j||!G?j:this.findNearestKDPoint(W,R,G);return H=ue&&ue.series,ue&&(R&&!H.noSharedTooltip?(W=U.filter(function(ie){return ne.filter?ne.filter(ie):F(ie)&&!ie.noSharedTooltip})).forEach(function(ie){let oe=M(ie.points,function(Se){return Se.x===ue.x&&!Se.isNull});P(oe)&&(ie.boosted&&ie.boost&&(oe=ie.boost.getPoint(oe)),$.push(oe))}):$.push(ue)),A(this,"afterGetHoverData",ne={hoverPoint:ue}),{hoverPoint:ne.hoverPoint,hoverSeries:H,hoverPoints:$}}getPointFromEvent(j){let V=j.target,U;for(;V&&!U;)U=V.point,V=V.parentNode;return U}onTrackerMouseOut(j){let V=this.chart,U=j.relatedTarget,L=V.hoverSeries;this.isDirectTouch=!1,!L||!U||L.stickyTracking||this.inClass(U,"highcharts-tooltip")||this.inClass(U,"highcharts-series-"+L.index)&&this.inClass(U,"highcharts-tracker")||L.onMouseOut()}inClass(j,V){let U=j,L;for(;U;){if(L=k(U,"class")){if(L.indexOf(V)!==-1)return!0;if(L.indexOf("highcharts-container")!==-1)return!1}U=U.parentElement}}constructor(j,V){var U;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=V,this.chart=j,this.runChartClick=!!((U=V.chart.events)!=null&&U.click),this.pinchDown=[],this.setDOMEvents(),A(this,"afterInit")}normalize(j,V){let U=j.touches,L=U?U.length?U.item(0):I(U.changedTouches,j.changedTouches)[0]:j;V||(V=this.getChartPosition());let R=L.pageX-V.left,G=L.pageY-V.top;return T(j,{chartX:Math.round(R/=V.scaleX),chartY:Math.round(G/=V.scaleY)})}onContainerClick(j){let V=this.chart,U=V.hoverPoint,L=this.normalize(j),R=V.plotLeft,G=V.plotTop;!V.cancelClick&&(U&&this.inClass(L.target,"highcharts-tracker")?(A(U.series,"click",T(L,{point:U})),V.hoverPoint&&U.firePointEvent("click",L)):(T(L,this.getCoordinates(L)),V.isInsidePlot(L.chartX-R,L.chartY-G,{visiblePlotOnly:!0})&&A(V,"click",L)))}onContainerMouseDown(j){var U;let V=(1&(j.buttons||j.button))==1;j=this.normalize(j),c.isFirefox&&j.button!==0&&this.onContainerMouseMove(j),(j.button===void 0||V)&&(this.zoomOption(j),V&&((U=j.preventDefault)==null||U.call(j)),this.dragStart(j))}onContainerMouseLeave(j){let{pointer:V}=m[I(Z.hoverChartIndex,-1)]||{};j=this.normalize(j),this.onContainerMouseMove(j),V&&!this.inClass(j.relatedTarget,"highcharts-tooltip")&&(V.reset(),V.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(j){let V=this.chart,U=V.tooltip,L=this.normalize(j);this.setHoverChartIndex(j),(V.mouseIsDown==="mousedown"||this.touchSelect(L))&&this.drag(L),!V.openMenu&&(this.inClass(L.target,"highcharts-tracker")||V.isInsidePlot(L.chartX-V.plotLeft,L.chartY-V.plotTop,{visiblePlotOnly:!0}))&&!(U&&U.shouldStickOnContact(L))&&(this.inClass(L.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(L))}onDocumentTouchEnd(j){this.onDocumentMouseUp(j)}onContainerTouchMove(j){this.touchSelect(j)?this.onContainerMouseMove(j):this.touch(j)}onContainerTouchStart(j){this.touchSelect(j)?this.onContainerMouseDown(j):(this.zoomOption(j),this.touch(j,!0))}onDocumentMouseMove(j){let V=this.chart,U=V.tooltip,L=this.chartPosition,R=this.normalize(j,L);!L||V.isInsidePlot(R.chartX-V.plotLeft,R.chartY-V.plotTop,{visiblePlotOnly:!0})||U&&U.shouldStickOnContact(R)||R.target!==V.container.ownerDocument&&this.inClass(R.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(j){var V,U;(U=(V=m[I(Z.hoverChartIndex,-1)])==null?void 0:V.pointer)==null||U.drop(j)}pinch(j){let V=this,{chart:U,hasZoom:L,lastTouches:R}=V,G=[].map.call(j.touches||[],ne=>V.normalize(ne)),$=G.length,F=$===1&&(V.inClass(j.target,"highcharts-tracker")&&U.runTrackerClick||V.runChartClick),H=U.tooltip,W=$===1&&I(H==null?void 0:H.options.followTouchMove,!0);$>1?V.initiated=!0:W&&(V.initiated=!1),L&&V.initiated&&!F&&j.cancelable!==!1&&j.preventDefault(),j.type==="touchstart"?(V.pinchDown=G,V.res=!0,U.mouseDownX=j.chartX):W?this.runPointActions(V.normalize(j)):R&&(A(U,"touchpan",{originalEvent:j,touches:G},()=>{let ne=ue=>{let ie=ue[0],oe=ue[1]||ie;return{x:ie.chartX,y:ie.chartY,width:oe.chartX-ie.chartX,height:oe.chartY-ie.chartY}};U.transform({axes:U.axes.filter(ue=>ue.zoomEnabled&&(this.zoomHor&&ue.horiz||this.zoomVert&&!ue.horiz)),to:ne(G),from:ne(R),trigger:j.type})}),V.res&&(V.res=!1,this.reset(!1,0))),V.lastTouches=G}reset(j,V){let U=this.chart,L=U.hoverSeries,R=U.hoverPoint,G=U.hoverPoints,$=U.tooltip,F=$&&$.shared?G:R;j&&F&&q(F).forEach(function(H){H.series.isCartesian&&H.plotX===void 0&&(j=!1)}),j?$&&F&&q(F).length&&($.refresh(F),$.shared&&G?G.forEach(function(H){H.setState(H.state,!0),H.series.isCartesian&&(H.series.xAxis.crosshair&&H.series.xAxis.drawCrosshair(null,H),H.series.yAxis.crosshair&&H.series.yAxis.drawCrosshair(null,H))}):R&&(R.setState(R.state,!0),U.axes.forEach(function(H){H.crosshair&&R.series[H.coll]===H&&H.drawCrosshair(null,R)}))):(R&&R.onMouseOut(),G&&G.forEach(function(H){H.setState()}),L&&L.onMouseOut(),$&&$.hide(V),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),U.axes.forEach(function(H){H.hideCrosshair()}),U.hoverPoints=U.hoverPoint=void 0)}runPointActions(j,V,U){let L=this.chart,R=L.series,G=L.tooltip&&L.tooltip.options.enabled?L.tooltip:void 0,$=!!G&&G.shared,F=V||L.hoverPoint,H=F&&F.series||L.hoverSeries,W=(!j||j.type!=="touchmove")&&(!!V||H&&H.directTouch&&this.isDirectTouch),ne=this.getHoverData(F,H,R,W,$,j);F=ne.hoverPoint,H=ne.hoverSeries;let ue=ne.hoverPoints,ie=H&&H.tooltipOptions.followPointer&&!H.tooltipOptions.split,oe=$&&H&&!H.noSharedTooltip;if(F&&(U||F!==L.hoverPoint||G&&G.isHidden)){if((L.hoverPoints||[]).forEach(function(Se){ue.indexOf(Se)===-1&&Se.setState()}),L.hoverSeries!==H&&H.onMouseOver(),this.applyInactiveState(ue),(ue||[]).forEach(function(Se){Se.setState("hover")}),L.hoverPoint&&L.hoverPoint.firePointEvent("mouseOut"),!F.series)return;L.hoverPoints=ue,L.hoverPoint=F,F.firePointEvent("mouseOver",void 0,()=>{G&&F&&G.refresh(oe?ue:F,j)})}else if(ie&&G&&!G.isHidden){let Se=G.getAnchor([{}],j);L.isInsidePlot(Se[0],Se[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:Se[0],plotY:Se[1]})}this.unDocMouseMove||(this.unDocMouseMove=y(L.container.ownerDocument,"mousemove",Se=>{var ye,Ce;return(Ce=(ye=m[Z.hoverChartIndex??-1])==null?void 0:ye.pointer)==null?void 0:Ce.onDocumentMouseMove(Se)}),this.eventsToUnbind.push(this.unDocMouseMove)),L.axes.forEach(function(Se){let ye,Ce=I((Se.crosshair||{}).snap,!0);!Ce||(ye=L.hoverPoint)&&ye.series[Se.coll]===Se||(ye=M(ue,K=>K.series&&K.series[Se.coll]===Se)),ye||!Ce?Se.drawCrosshair(j,ye):Se.hideCrosshair()})}setDOMEvents(){let j=this.chart.container,V=j.ownerDocument;j.onmousedown=this.onContainerMouseDown.bind(this),j.onmousemove=this.onContainerMouseMove.bind(this),j.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(y(j,"mouseenter",this.onContainerMouseEnter.bind(this)),y(j,"mouseleave",this.onContainerMouseLeave.bind(this))),Z.unbindDocumentMouseUp||(Z.unbindDocumentMouseUp=[]),Z.unbindDocumentMouseUp.push(y(V,"mouseup",this.onDocumentMouseUp.bind(this)));let U=this.chart.renderTo.parentElement;for(;U&&U.tagName!=="BODY";)this.eventsToUnbind.push(y(U,"scroll",()=>{delete this.chartPosition})),U=U.parentElement;this.eventsToUnbind.push(y(j,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),y(j,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Z.unbindDocumentTouchEnd||(Z.unbindDocumentTouchEnd=y(V,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),y(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var R,G;if(!v)return;let j=this.pointerCaptureEventsToUnbind,V=this.chart,U=V.container,L=I((R=V.options.tooltip)==null?void 0:R.followTouchMove,!0)&&V.series.some($=>$.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&L?(j.push(y(U,"pointerdown",$=>{var F,H;(F=$.target)!=null&&F.hasPointerCapture($.pointerId)&&((H=$.target)==null||H.releasePointerCapture($.pointerId))}),y(U,"pointermove",$=>{var F,H;(H=(F=V.pointer)==null?void 0:F.getPointFromEvent($))==null||H.onMouseOver($)})),V.styledMode||_(U,{"touch-action":"none"}),U.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!L&&(j.forEach($=>$()),j.length=0,V.styledMode||_(U,{"touch-action":I((G=V.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),U.className=U.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(j){var L;let V=this.chart,U=c.charts[I(Z.hoverChartIndex,-1)];if(U&&U!==V){let R={relatedTarget:V.container};j&&!(j!=null&&j.relatedTarget)&&(j={...R,...j}),(L=U.pointer)==null||L.onContainerMouseLeave(j||R)}U&&U.mouseIsDown||(Z.hoverChartIndex=V.index)}touch(j,V){let U,{chart:L,pinchDown:R=[]}=this;this.setHoverChartIndex(),(j=this.normalize(j)).touches.length===1?L.isInsidePlot(j.chartX-L.plotLeft,j.chartY-L.plotTop,{visiblePlotOnly:!0})&&!L.openMenu?(V&&this.runPointActions(j),j.type==="touchmove"&&(U=!!R[0]&&Math.pow(R[0].chartX-j.chartX,2)+Math.pow(R[0].chartY-j.chartY,2)>=16),I(U,!0)&&this.pinch(j)):V&&this.reset():j.touches.length===2&&this.pinch(j)}touchSelect(j){return!!(this.chart.zooming.singleTouch&&j.touches&&j.touches.length===1)}zoomOption(j){let V=this.chart,U=V.inverted,L=V.zooming.type||"",R,G;/touch/.test(j.type)&&(L=I(V.zooming.pinchType,L)),this.zoomX=R=/x/.test(L),this.zoomY=G=/y/.test(L),this.zoomHor=R&&!U||G&&U,this.zoomVert=G&&!U||R&&U,this.hasZoom=R||G}}return(n=Z).compose=function(X){N(g,"Core.Pointer")&&y(X,"beforeRender",function(){this.pointer=new n(this,this.options)})},Z}),o(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(a){var c;let{extend:u,merge:n,pick:p}=a;return function(m){function g(v,y,k){var U,L;let _=this.legendItem=this.legendItem||{},{chart:T,options:M}=this,{baseline:A=0,symbolWidth:x,symbolHeight:P}=v,D=this.symbol||"circle",w=P/2,I=T.renderer,N=_.group,q=A-Math.round((((U=v.fontMetrics)==null?void 0:U.b)||P)*(k?.4:.3)),Z={},X,j=M.marker,V=0;if(T.styledMode||(Z["stroke-width"]=Math.min(M.lineWidth||0,24),M.dashStyle?Z.dashstyle=M.dashStyle:M.linecap==="square"||(Z["stroke-linecap"]="round")),_.line=I.path().addClass("highcharts-graph").attr(Z).add(N),k&&(_.area=I.path().addClass("highcharts-area").add(N)),Z["stroke-linecap"]&&(V=Math.min(_.line.strokeWidth(),x)/2),x){let R=[["M",V,q],["L",x-V,q]];_.line.attr({d:R}),(L=_.area)==null||L.attr({d:[...R,["L",x-V,A],["L",V,A]]})}if(j&&j.enabled!==!1&&x){let R=Math.min(p(j.radius,w),w);D.indexOf("url")===0&&(j=n(j,{width:P,height:P}),R=0),_.symbol=X=I.symbol(D,x/2-R,q-R,2*R,2*R,u({context:"legend"},j)).addClass("highcharts-point").add(N),X.isMarker=!0}}m.areaMarker=function(v,y){g.call(this,v,y,!0)},m.lineMarker=g,m.rectangle=function(v,y){let k=y.legendItem||{},_=v.options,T=v.symbolHeight,M=_.squareSymbol,A=M?T:v.symbolWidth;k.symbol=this.chart.renderer.rect(M?(v.symbolWidth-T)/2:0,v.baseline-T+1,A,T,p(v.options.symbolRadius,T/2)).addClass("highcharts-point").attr({zIndex:3}).add(k.group)}}(c||(c={})),c}),o(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:a}=this.series.chart;return typeof this.y!="number"?"":a(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),o(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,c,u,n){var p;let{defaultOptions:m}=c,{extend:g,extendClass:v,merge:y}=n;return function(k){function _(T,M){let A=m.plotOptions||{},x=M.defaultOptions,P=M.prototype;return P.type=T,P.pointClass||(P.pointClass=u),!k.seriesTypes[T]&&(x&&(A[T]=x),k.seriesTypes[T]=M,!0)}k.seriesTypes=a.seriesTypes,k.registerSeriesType=_,k.seriesType=function(T,M,A,x,P){let D=m.plotOptions||{};if(M=M||"",D[T]=y(D[M],A),delete k.seriesTypes[T],_(T,v(k.seriesTypes[M]||function(){},x)),k.seriesTypes[T].prototype.type=T,P){class w extends u{}g(w.prototype,P),k.seriesTypes[T].prototype.pointClass=w}return k.seriesTypes[T]}}(p||(p={})),p}),o(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y,k){let{animObject:_,setAnimation:T}=a,{defaultOptions:M}=c,{registerEventOptions:A}=u,{svg:x,win:P}=n,{seriesTypes:D}=v,{arrayMax:w,arrayMin:I,clamp:N,correctFloat:q,crisp:Z,defined:X,destroyObjectProperties:j,diffObjects:V,erase:U,error:L,extend:R,find:G,fireEvent:$,getClosestDistance:F,getNestedProperty:H,insertItem:W,isArray:ne,isNumber:ue,isString:ie,merge:oe,objectEach:Se,pick:ye,removeEvent:Ce,splat:K,syncTimeout:Q}=k;class ae{constructor(){this.zoneAxis="y"}init(J,re){let ce;$(this,"init",{options:re});let ge=this,_e=J.series;this.eventsToUnbind=[],ge.chart=J,ge.options=ge.setOptions(re);let ze=ge.options,Te=ze.visible!==!1;ge.linkedSeries=[],ge.bindAxes(),R(ge,{name:ze.name,state:"",visible:Te,selected:ze.selected===!0}),A(this,ze);let Ie=ze.events;(Ie&&Ie.click||ze.point&&ze.point.events&&ze.point.events.click||ze.allowPointSelect)&&(J.runTrackerClick=!0),ge.getColor(),ge.getSymbol(),ge.parallelArrays.forEach(function(Be){ge[Be+"Data"]||(ge[Be+"Data"]=[])}),ge.isCartesian&&(J.hasCartesianSeries=!0),_e.length&&(ce=_e[_e.length-1]),ge._i=ye(ce&&ce._i,-1)+1,ge.opacity=ge.options.opacity,J.orderItems("series",W(this,_e)),ze.dataSorting&&ze.dataSorting.enabled?ge.setDataSortingOptions():ge.points||ge.data||ge.setData(ze.data,!1),$(this,"afterInit")}is(J){return D[J]&&this instanceof D[J]}bindAxes(){let J,re=this,ce=re.options,ge=re.chart;$(this,"bindAxes",null,function(){(re.axisTypes||[]).forEach(function(_e){(ge[_e]||[]).forEach(function(ze){J=ze.options,(ye(ce[_e],0)===ze.index||ce[_e]!==void 0&&ce[_e]===J.id)&&(W(re,ze.series),re[_e]=ze,ze.isDirty=!0)}),re[_e]||re.optionalAxis===_e||L(18,!0,ge)})}),$(this,"afterBindAxes")}updateParallelArrays(J,re,ce){let ge=J.series,_e=ue(re)?function(ze){let Te=ze==="y"&&ge.toYData?ge.toYData(J):J[ze];ge[ze+"Data"][re]=Te}:function(ze){Array.prototype[re].apply(ge[ze+"Data"],ce)};ge.parallelArrays.forEach(_e)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(J,re){let ce=J.marker,ge=re.marker||{};return ce&&(ge.enabled&&!ce.enabled||ge.symbol!==ce.symbol||ge.height!==ce.height||ge.width!==ce.width)}autoIncrement(J){let re=this.options,ce=re.pointIntervalUnit,ge=re.relativeXValue,_e=this.chart.time,ze=this.xIncrement,Te,Ie;return ze=ye(ze,re.pointStart,0),this.pointInterval=Ie=ye(this.pointInterval,re.pointInterval,1),ge&&ue(J)&&(Ie*=J),ce&&(Te=new _e.Date(ze),ce==="day"?_e.set("Date",Te,_e.get("Date",Te)+Ie):ce==="month"?_e.set("Month",Te,_e.get("Month",Te)+Ie):ce==="year"&&_e.set("FullYear",Te,_e.get("FullYear",Te)+Ie),Ie=Te.getTime()-ze),ge&&ue(J)?ze+Ie:(this.xIncrement=ze+Ie,ze)}setDataSortingOptions(){let J=this.options;R(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),X(J.pointRange)||(J.pointRange=1)}setOptions(J){var Pe,je;let re,ce=this.chart,ge=ce.options.plotOptions,_e=ce.userOptions||{},ze=oe(J),Te=ce.styledMode,Ie={plotOptions:ge,userOptions:ze};$(this,"setOptions",Ie);let Be=Ie.plotOptions[this.type],Ge=_e.plotOptions||{},ke=Ge.series||{},me=M.plotOptions[this.type]||{},fe=Ge[this.type]||{};this.userOptions=Ie.userOptions;let Ae=oe(Be,ge.series,fe,ze);this.tooltipOptions=oe(M.tooltip,(Pe=M.plotOptions.series)==null?void 0:Pe.tooltip,me==null?void 0:me.tooltip,ce.userOptions.tooltip,(je=Ge.series)==null?void 0:je.tooltip,fe.tooltip,ze.tooltip),this.stickyTracking=ye(ze.stickyTracking,fe.stickyTracking,ke.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Ae.stickyTracking),Be.marker===null&&delete Ae.marker,this.zoneAxis=Ae.zoneAxis||"y";let De=this.zones=(Ae.zones||[]).map(Xe=>({...Xe}));return(Ae.negativeColor||Ae.negativeFillColor)&&!Ae.zones&&(re={value:Ae[this.zoneAxis+"Threshold"]||Ae.threshold||0,className:"highcharts-negative"},Te||(re.color=Ae.negativeColor,re.fillColor=Ae.negativeFillColor),De.push(re)),De.length&&X(De[De.length-1].value)&&De.push(Te?{}:{color:this.color,fillColor:this.fillColor}),$(this,"afterSetOptions",{options:Ae}),Ae}getName(){return ye(this.options.name,"Series "+(this.index+1))}getCyclic(J,re,ce){let ge,_e,ze=this.chart,Te=`${J}Index`,Ie=`${J}Counter`,Be=(ce==null?void 0:ce.length)||ze.options.chart.colorCount;!re&&(X(_e=ye(J==="color"?this.options.colorIndex:void 0,this[Te]))?ge=_e:(ze.series.length||(ze[Ie]=0),ge=ze[Ie]%Be,ze[Ie]+=1),ce&&(re=ce[ge])),ge!==void 0&&(this[Te]=ge),this[J]=re}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||M.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let J=this.options.marker;this.getCyclic("symbol",J.symbol,this.chart.options.symbols)}findPointIndex(J,re){let ce,ge,_e,ze=J.id,Te=J.x,Ie=this.points,Be=this.options.dataSorting;if(ze){let Ge=this.chart.get(ze);Ge instanceof m&&(ce=Ge)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let Ge=ke=>!ke.touched&&ke.index===J.index;if(Be&&Be.matchByName?Ge=ke=>!ke.touched&&ke.name===J.name:this.options.relativeXValue&&(Ge=ke=>!ke.touched&&ke.options.x===J.x),!(ce=G(Ie,Ge)))return}return ce&&(_e=ce&&ce.index)!==void 0&&(ge=!0),_e===void 0&&ue(Te)&&(_e=this.xData.indexOf(Te,re)),_e!==-1&&_e!==void 0&&this.cropped&&(_e=_e>=this.cropStart?_e-this.cropStart:_e),!ge&&ue(_e)&&Ie[_e]&&Ie[_e].touched&&(_e=void 0),_e}updateData(J,re){let ce=this.options,ge=ce.dataSorting,_e=this.points,ze=[],Te=this.requireSorting,Ie=J.length===_e.length,Be,Ge,ke,me,fe=!0;if(this.xIncrement=null,J.forEach(function(Ae,De){let Pe,je=X(Ae)&&this.pointClass.prototype.optionsToObject.call({series:this},Ae)||{},Xe=je.x;je.id||ue(Xe)?((Pe=this.findPointIndex(je,me))===-1||Pe===void 0?ze.push(Ae):_e[Pe]&&Ae!==ce.data[Pe]?(_e[Pe].update(Ae,!1,null,!1),_e[Pe].touched=!0,Te&&(me=Pe+1)):_e[Pe]&&(_e[Pe].touched=!0),(!Ie||De!==Pe||ge&&ge.enabled||this.hasDerivedData)&&(Be=!0)):ze.push(Ae)},this),Be)for(Ge=_e.length;Ge--;)(ke=_e[Ge])&&!ke.touched&&ke.remove&&ke.remove(!1,re);else!Ie||ge&&ge.enabled?fe=!1:(J.forEach(function(Ae,De){Ae===_e[De].y||_e[De].destroyed||_e[De].update(Ae,!1,null,!1)}),ze.length=0);return _e.forEach(function(Ae){Ae&&(Ae.touched=!1)}),!!fe&&(ze.forEach(function(Ae){this.addPoint(Ae,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=w(this.xData),this.autoIncrement()),!0)}setData(J,re=!0,ce,ge){var ft;let _e=this,ze=_e.points,Te=ze&&ze.length||0,Ie=_e.options,Be=_e.chart,Ge=Ie.dataSorting,ke=_e.xAxis,me=Ie.turboThreshold,fe=this.xData,Ae=this.yData,De=_e.pointArrayMap,Pe=De&&De.length,je=Ie.keys,Xe,et,rt,dt=0,gt=1,wt;Be.options.chart.allowMutatingData||(Ie.data&&delete _e.options.data,_e.userOptions.data&&delete _e.userOptions.data,wt=oe(!0,J));let Rt=(J=wt||J||[]).length;if(Ge&&Ge.enabled&&(J=this.sortData(J)),Be.options.chart.allowMutatingData&&ge!==!1&&Rt&&Te&&!_e.cropped&&!_e.hasGroupedData&&_e.visible&&!_e.boosted&&(rt=this.updateData(J,ce)),!rt){_e.xIncrement=null,_e.colorCounter=0,this.parallelArrays.forEach(function(Tt){_e[Tt+"Data"].length=0});let Ct=me&&Rt>me;if(Ct){let Tt=_e.getFirstValidPoint(J),si=_e.getFirstValidPoint(J,Rt-1,-1),ui=Ht=>!!(ne(Ht)&&(je||ue(Ht[0])));if(ue(Tt)&&ue(si))for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Ae[Xe]=J[Xe];else if(ui(Tt)&&ui(si))if(Pe)if(Tt.length===Pe)for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Ae[Xe]=J[Xe];else for(Xe=0;Xe<Rt;Xe++)et=J[Xe],fe[Xe]=et[0],Ae[Xe]=et.slice(1,Pe+1);else if(je&&(dt=je.indexOf("x"),gt=je.indexOf("y"),dt=dt>=0?dt:0,gt=gt>=0?gt:1),Tt.length===1&&(gt=0),dt===gt)for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Ae[Xe]=J[Xe][gt];else for(Xe=0;Xe<Rt;Xe++)et=J[Xe],fe[Xe]=et[dt],Ae[Xe]=et[gt];else Ct=!1}if(!Ct)for(Xe=0;Xe<Rt;Xe++)et={series:_e},_e.pointClass.prototype.applyOptions.apply(et,[J[Xe]]),_e.updateParallelArrays(et,Xe);for(Ae&&ie(Ae[0])&&L(14,!0,Be),_e.data=[],_e.options.data=_e.userOptions.data=J,Xe=Te;Xe--;)(ft=ze[Xe])==null||ft.destroy();ke&&(ke.minRange=ke.userMinRange),_e.isDirty=Be.isDirtyBox=!0,_e.isDirtyData=!!ze,ce=!1}Ie.legendType==="point"&&(this.processData(),this.generatePoints()),re&&Be.redraw(ce)}sortData(J){let re=this,ce=re.options.dataSorting.sortKey||"y",ge=function(_e,ze){return X(ze)&&_e.pointClass.prototype.optionsToObject.call({series:_e},ze)||{}};return J.forEach(function(_e,ze){J[ze]=ge(re,_e),J[ze].index=ze},this),J.concat().sort((_e,ze)=>{let Te=H(ce,_e),Ie=H(ce,ze);return Ie<Te?-1:Ie>Te?1:0}).forEach(function(_e,ze){_e.x=ze},this),re.linkedSeries&&re.linkedSeries.forEach(function(_e){let ze=_e.options,Te=ze.data;ze.dataSorting&&ze.dataSorting.enabled||!Te||(Te.forEach(function(Ie,Be){Te[Be]=ge(_e,Ie),J[Be]&&(Te[Be].x=J[Be].x,Te[Be].index=Be)}),_e.setData(Te,!1))}),J}getProcessedData(J){let re=this,ce=re.xAxis,ge=re.options.cropThreshold,_e=ce==null?void 0:ce.logarithmic,ze=re.isCartesian,Te,Ie,Be=0,Ge,ke,me,fe=re.xData,Ae=re.yData,De=!1,Pe=fe.length;ce&&(ke=(Ge=ce.getExtremes()).min,me=Ge.max,De=!!(ce.categories&&!ce.names.length)),ze&&re.sorted&&!J&&(!ge||Pe>ge||re.forceCrop)&&(fe[Pe-1]<ke||fe[0]>me?(fe=[],Ae=[]):re.yData&&(fe[0]<ke||fe[Pe-1]>me)&&(fe=(Te=this.cropData(re.xData,re.yData,ke,me)).xData,Ae=Te.yData,Be=Te.start,Ie=!0));let je=F([_e?fe.map(_e.log2lin):fe],()=>re.requireSorting&&!De&&L(15,!1,re.chart));return{xData:fe,yData:Ae,cropped:Ie,cropStart:Be,closestPointRange:je}}processData(J){let re=this.xAxis;if(this.isCartesian&&!this.isDirty&&!re.isDirty&&!this.yAxis.isDirty&&!J)return!1;let ce=this.getProcessedData();this.cropped=ce.cropped,this.cropStart=ce.cropStart,this.processedXData=ce.xData,this.processedYData=ce.yData,this.closestPointRange=this.basePointRange=ce.closestPointRange,$(this,"afterProcessData")}cropData(J,re,ce,ge){let _e=J.length,ze,Te,Ie=0,Be=_e;for(ze=0;ze<_e;ze++)if(J[ze]>=ce){Ie=Math.max(0,ze-1);break}for(Te=ze;Te<_e;Te++)if(J[Te]>ge){Be=Te+1;break}return{xData:J.slice(Ie,Be),yData:re.slice(Ie,Be),start:Ie,end:Be}}generatePoints(){let J=this.options,re=this.processedData||J.data,ce=this.processedXData,ge=this.processedYData,_e=this.pointClass,ze=ce.length,Te=this.cropStart||0,Ie=this.hasGroupedData,Be=J.keys,Ge=[],ke=J.dataGrouping&&J.dataGrouping.groupAll?Te:0,me,fe,Ae,De,Pe=this.data;if(!Pe&&!Ie){let je=[];je.length=re.length,Pe=this.data=je}for(Be&&Ie&&(this.options.keys=!1),De=0;De<ze;De++)fe=Te+De,Ie?((Ae=new _e(this,[ce[De]].concat(K(ge[De])))).dataGroup=this.groupMap[ke+De],Ae.dataGroup.options&&(Ae.options=Ae.dataGroup.options,R(Ae,Ae.dataGroup.options),delete Ae.dataLabels)):(Ae=Pe[fe])||re[fe]===void 0||(Pe[fe]=Ae=new _e(this,re[fe],ce[De])),Ae&&(Ae.index=Ie?ke+De:fe,Ge[De]=Ae);if(this.options.keys=Be,Pe&&(ze!==(me=Pe.length)||Ie))for(De=0;De<me;De++)De!==Te||Ie||(De+=ze),Pe[De]&&(Pe[De].destroyElements(),Pe[De].plotX=void 0);this.data=Pe,this.points=Ge,$(this,"afterGeneratePoints")}getXExtremes(J){return{min:I(J),max:w(J)}}getExtremes(J,re){let ce=this.xAxis,ge=this.yAxis,_e=[],ze=this.requireSorting&&!this.is("column")?1:0,Te=!!ge&&ge.positiveValuesOnly,Ie=re||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:Be,processedYData:Ge}=this,ke,me,fe,Ae,De,Pe,je,Xe=0,et=0,rt=0;if(this.cropped&&Ie){let Rt=this.getProcessedData(!0);Be=Rt.xData,Ge=Rt.yData}let dt=(J=J||this.stackedYData||Ge||[]).length,gt=Be||this.xData;for(ce&&(Xe=(ke=ce.getExtremes()).min,et=ke.max),Pe=0;Pe<dt;Pe++)if(Ae=gt[Pe],me=(ue(De=J[Pe])||ne(De))&&((ue(De)?De>0:De.length)||!Te),fe=re||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ce||(gt[Pe+ze]||Ae)>=Xe&&(gt[Pe-ze]||Ae)<=et,me&&fe)if(je=De.length)for(;je--;)ue(De[je])&&(_e[rt++]=De[je]);else _e[rt++]=De;let wt={activeYData:_e,dataMin:I(_e),dataMax:w(_e)};return $(this,"afterGetExtremes",{dataExtremes:wt}),wt}applyExtremes(){let J=this.getExtremes();return this.dataMin=J.dataMin,this.dataMax=J.dataMax,J}getFirstValidPoint(J,re=0,ce=1){let ge=J.length,_e=re;for(;_e>=0&&_e<ge;){if(X(J[_e]))return J[_e];_e+=ce}}translate(){var et;this.processedXData||this.processData(),this.generatePoints();let J=this.options,re=J.stacking,ce=this.xAxis,ge=ce.categories,_e=this.enabledDataSorting,ze=this.yAxis,Te=this.points,Ie=Te.length,Be=this.pointPlacementToXValue(),Ge=!!Be,ke=J.threshold,me=J.startFromThreshold?ke:0,fe,Ae,De,Pe,je=Number.MAX_VALUE;function Xe(rt){return N(rt,-1e9,1e9)}for(fe=0;fe<Ie;fe++){let rt,dt=Te[fe],gt=dt.x,wt,Rt,ft=dt.y,Ct=dt.low,Tt=re&&((et=ze.stacking)==null?void 0:et.stacks[(this.negStacks&&ft<(me?0:ke)?"-":"")+this.stackKey]);Ae=ce.translate(gt,!1,!1,!1,!0,Be),dt.plotX=ue(Ae)?q(Xe(Ae)):void 0,re&&this.visible&&Tt&&Tt[gt]&&(Pe=this.getStackIndicator(Pe,gt,this.index),!dt.isNull&&Pe.key&&(Rt=(wt=Tt[gt]).points[Pe.key]),wt&&ne(Rt)&&(Ct=Rt[0],ft=Rt[1],Ct===me&&Pe.key===Tt[gt].base&&(Ct=ye(ue(ke)?ke:ze.min)),ze.positiveValuesOnly&&X(Ct)&&Ct<=0&&(Ct=void 0),dt.total=dt.stackTotal=ye(wt.total),dt.percentage=X(dt.y)&&wt.total?dt.y/wt.total*100:void 0,dt.stackY=ft,this.irregularWidths||wt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),dt.yBottom=X(Ct)?Xe(ze.translate(Ct,!1,!0,!1,!0)):void 0,this.dataModify&&(ft=this.dataModify.modifyValue(ft,fe)),ue(ft)&&dt.plotX!==void 0&&(rt=ue(rt=ze.translate(ft,!1,!0,!1,!0))?Xe(rt):void 0),dt.plotY=rt,dt.isInside=this.isPointInside(dt),dt.clientX=Ge?q(ce.translate(gt,!1,!1,!1,!0,Be)):Ae,dt.negative=(dt.y||0)<(ke||0),dt.category=ye(ge&&ge[dt.x],dt.x),dt.isNull||dt.visible===!1||(De!==void 0&&(je=Math.min(je,Math.abs(Ae-De))),De=Ae),dt.zone=this.zones.length?dt.getZone():void 0,!dt.graphic&&this.group&&_e&&(dt.isNew=!0)}this.closestPointRangePx=je,$(this,"afterTranslate")}getValidPoints(J,re,ce){let ge=this.chart;return(J||this.points||[]).filter(function(_e){let{plotX:ze,plotY:Te}=_e;return!!((ce||!_e.isNull&&ue(Te))&&(!re||ge.isInsidePlot(ze,Te,{inverted:ge.inverted})))&&_e.visible!==!1})}getClipBox(){let{chart:J,xAxis:re,yAxis:ce}=this,{x:ge,y:_e,width:ze,height:Te}=oe(J.clipBox);return re&&re.len!==J.plotSizeX&&(ze=re.len),ce&&ce.len!==J.plotSizeY&&(Te=ce.len),J.inverted&&!this.invertible&&([ze,Te]=[Te,ze]),{x:ge,y:_e,width:ze,height:Te}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:J,group:re,markerGroup:ce}=this,ge=J.sharedClips,_e=J.renderer,ze=this.getClipBox(),Te=this.getSharedClipKey(),Ie=ge[Te];Ie?Ie.animate(ze):ge[Te]=Ie=_e.clipRect(ze),re&&re.clip(this.options.clip===!1?void 0:Ie),ce&&ce.clip()}animate(J){let{chart:re,group:ce,markerGroup:ge}=this,_e=re.inverted,ze=_(this.options.animation),Te=[this.getSharedClipKey(),ze.duration,ze.easing,ze.defer].join(","),Ie=re.sharedClips[Te],Be=re.sharedClips[Te+"m"];if(J&&ce){let Ge=this.getClipBox();if(Ie)Ie.attr("height",Ge.height);else{Ge.width=0,_e&&(Ge.x=re.plotHeight),Ie=re.renderer.clipRect(Ge),re.sharedClips[Te]=Ie;let ke={x:-99,y:-99,width:_e?re.plotWidth+199:99,height:_e?99:re.plotHeight+199};Be=re.renderer.clipRect(ke),re.sharedClips[Te+"m"]=Be}ce.clip(Ie),ge==null||ge.clip(Be)}else if(Ie&&!Ie.hasClass("highcharts-animating")){let Ge=this.getClipBox(),ke=ze.step;(ge!=null&&ge.element.childNodes.length||re.series.length>1)&&(ze.step=function(me,fe){ke&&ke.apply(fe,arguments),fe.prop==="width"&&(Be!=null&&Be.element)&&Be.attr(_e?"height":"width",me+99)}),Ie.addClass("highcharts-animating").animate(Ge,ze)}}afterAnimate(){this.setClip(),Se(this.chart.sharedClips,(J,re,ce)=>{J&&!this.chart.container.querySelector(`[clip-path="url(#${J.id})"]`)&&(J.destroy(),delete ce[re])}),this.finishedAnimating=!0,$(this,"afterAnimate")}drawPoints(J=this.points){let re,ce,ge,_e,ze,Te,Ie,Be=this.chart,Ge=Be.styledMode,{colorAxis:ke,options:me}=this,fe=me.marker,Ae=this[this.specialGroup||"markerGroup"],De=this.xAxis,Pe=ye(fe.enabled,!De||!!De.isRadial||null,this.closestPointRangePx>=fe.enabledThreshold*fe.radius);if(fe.enabled!==!1||this._hasPointMarkers)for(re=0;re<J.length;re++)if(_e=(ge=(ce=J[re]).graphic)?"animate":"attr",ze=ce.marker||{},Te=!!ce.marker,(Pe&&ze.enabled===void 0||ze.enabled)&&!ce.isNull&&ce.visible!==!1){let je=ye(ze.symbol,this.symbol,"rect");Ie=this.markerAttribs(ce,ce.selected&&"select"),this.enabledDataSorting&&(ce.startXPos=De.reversed?-(Ie.width||0):De.width);let Xe=ce.isInside!==!1;if(!ge&&Xe&&((Ie.width||0)>0||ce.hasImage)&&(ce.graphic=ge=Be.renderer.symbol(je,Ie.x,Ie.y,Ie.width,Ie.height,Te?ze:fe).add(Ae),this.enabledDataSorting&&Be.hasRendered&&(ge.attr({x:ce.startXPos}),_e="animate")),ge&&_e==="animate"&&ge[Xe?"show":"hide"](Xe).animate(Ie),ge){let et=this.pointAttribs(ce,Ge||!ce.selected?void 0:"select");Ge?ke&&ge.css({fill:et.fill}):ge[_e](et)}ge&&ge.addClass(ce.getClassName(),!0)}else ge&&(ce.graphic=ge.destroy())}markerAttribs(J,re){let ce=this.options,ge=ce.marker,_e=J.marker||{},ze=_e.symbol||ge.symbol,Te={},Ie,Be,Ge=ye(_e.radius,ge&&ge.radius);re&&(Ie=ge.states[re],Ge=ye((Be=_e.states&&_e.states[re])&&Be.radius,Ie&&Ie.radius,Ge&&Ge+(Ie&&Ie.radiusPlus||0))),J.hasImage=ze&&ze.indexOf("url")===0,J.hasImage&&(Ge=0);let ke=J.pos();return ue(Ge)&&ke&&(ce.crisp&&(ke[0]=Z(ke[0],J.hasImage?0:ze==="rect"?(ge==null?void 0:ge.lineWidth)||0:1)),Te.x=ke[0]-Ge,Te.y=ke[1]-Ge),Ge&&(Te.width=Te.height=2*Ge),Te}pointAttribs(J,re){let ce=this.options.marker,ge=J&&J.options,_e=ge&&ge.marker||{},ze=ge&&ge.color,Te=J&&J.color,Ie=J&&J.zone&&J.zone.color,Be,Ge,ke=this.color,me,fe,Ae=ye(_e.lineWidth,ce.lineWidth),De=1;return ke=ze||Ie||Te||ke,me=_e.fillColor||ce.fillColor||ke,fe=_e.lineColor||ce.lineColor||ke,re=re||"normal",Be=ce.states[re]||{},Ae=ye((Ge=_e.states&&_e.states[re]||{}).lineWidth,Be.lineWidth,Ae+ye(Ge.lineWidthPlus,Be.lineWidthPlus,0)),me=Ge.fillColor||Be.fillColor||me,{stroke:fe=Ge.lineColor||Be.lineColor||fe,"stroke-width":Ae,fill:me,opacity:De=ye(Ge.opacity,Be.opacity,De)}}destroy(J){let re,ce,ge,_e=this,ze=_e.chart,Te=/AppleWebKit\/533/.test(P.navigator.userAgent),Ie=_e.data||[];for($(_e,"destroy",{keepEventsForUpdate:J}),this.removeEvents(J),(_e.axisTypes||[]).forEach(function(Be){(ge=_e[Be])&&ge.series&&(U(ge.series,_e),ge.isDirty=ge.forceRedraw=!0)}),_e.legendItem&&_e.chart.legend.destroyItem(_e),re=Ie.length;re--;)(ce=Ie[re])&&ce.destroy&&ce.destroy();for(let Be of _e.zones)j(Be,void 0,!0);k.clearTimeout(_e.animationTimeout),Se(_e,function(Be,Ge){Be instanceof y&&!Be.survive&&Be[Te&&Ge==="group"?"hide":"destroy"]()}),ze.hoverSeries===_e&&(ze.hoverSeries=void 0),U(ze.series,_e),ze.orderItems("series"),Se(_e,function(Be,Ge){J&&Ge==="hcEvents"||delete _e[Ge]})}applyZones(){let{area:J,chart:re,graph:ce,zones:ge,points:_e,xAxis:ze,yAxis:Te,zoneAxis:Ie}=this,{inverted:Be,renderer:Ge}=re,ke=this[`${Ie}Axis`],{isXAxis:me,len:fe=0}=ke||{},Ae=((ce==null?void 0:ce.strokeWidth())||0)/2+1,De=(Pe,je=0,Xe=0)=>{Be&&(Xe=fe-Xe);let{translated:et=0,lineClip:rt}=Pe,dt=Xe-et;rt==null||rt.push(["L",je,Math.abs(dt)<Ae?Xe-Ae*(dt<=0?-1:1):et])};if(ge.length&&(ce||J)&&ke&&ue(ke.min)){let Pe=ke.getExtremes().max,je=rt=>{rt.forEach((dt,gt)=>{(dt[0]==="M"||dt[0]==="L")&&(rt[gt]=[dt[0],me?fe-dt[1]:dt[1],me?dt[2]:fe-dt[2]])})};if(ge.forEach(rt=>{rt.lineClip=[],rt.translated=N(ke.toPixels(ye(rt.value,Pe),!0)||0,0,fe)}),ce&&!this.showLine&&ce.hide(),J&&J.hide(),Ie==="y"&&_e.length<ze.len)for(let rt of _e){let{plotX:dt,plotY:gt,zone:wt}=rt,Rt=wt&&ge[ge.indexOf(wt)-1];wt&&De(wt,dt,gt),Rt&&De(Rt,dt,gt)}let Xe=[],et=ke.toPixels(ke.getExtremes().min,!0);ge.forEach(rt=>{var ar,Zi;let dt=rt.lineClip||[],gt=Math.round(rt.translated||0);ze.reversed&&dt.reverse();let{clip:wt,simpleClip:Rt}=rt,ft=0,Ct=0,Tt=ze.len,si=Te.len;me?(ft=gt,Tt=et):(Ct=gt,si=et);let ui=[["M",ft,Ct],["L",Tt,Ct],["L",Tt,si],["L",ft,si],["Z"]],Ht=[ui[0],...dt,ui[1],ui[2],...Xe,ui[3],ui[4]];Xe=dt.reverse(),et=gt,Be&&(je(Ht),J&&je(ui)),wt?(wt.animate({d:Ht}),Rt==null||Rt.animate({d:ui})):(wt=rt.clip=Ge.path(Ht),J&&(Rt=rt.simpleClip=Ge.path(ui))),ce&&((ar=rt.graph)==null||ar.clip(wt)),J&&((Zi=rt.area)==null||Zi.clip(Rt))})}else this.visible&&(ce&&ce.show(),J&&J.show())}plotGroup(J,re,ce,ge,_e){let ze=this[J],Te=!ze,Ie={visibility:ce,zIndex:ge||.1};return X(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Ie.opacity=this.opacity),ze||(this[J]=ze=this.chart.renderer.g().add(_e)),ze.addClass("highcharts-"+re+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(X(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(ze.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),ze.attr(Ie)[Te?"attr":"animate"](this.getPlotBox(re)),ze}getPlotBox(J){let re=this.xAxis,ce=this.yAxis,ge=this.chart,_e=ge.inverted&&!ge.polar&&re&&this.invertible&&J==="series";return ge.inverted&&(re=ce,ce=this.xAxis),{translateX:re?re.left:ge.plotLeft,translateY:ce?ce.top:ge.plotTop,rotation:_e?90:0,rotationOriginX:_e?(re.len-ce.len)/2:0,rotationOriginY:_e?(re.len+ce.len)/2:0,scaleX:_e?-1:1,scaleY:1}}removeEvents(J){let{eventsToUnbind:re}=this;J||Ce(this),re.length&&(re.forEach(ce=>{ce()}),re.length=0)}render(){var Ge,ke,me,fe,Ae;let J=this,{chart:re,options:ce,hasRendered:ge}=J,_e=_(ce.animation),ze=J.visible?"inherit":"hidden",Te=ce.zIndex,Ie=re.seriesGroup,Be=J.finishedAnimating?0:_e.duration;$(this,"render"),J.plotGroup("group","series",ze,Te,Ie),J.markerGroup=J.plotGroup("markerGroup","markers",ze,Te,Ie),ce.clip!==!1&&J.setClip(),Be&&((Ge=J.animate)==null||Ge.call(J,!0)),J.drawGraph&&(J.drawGraph(),J.applyZones()),J.visible&&J.drawPoints(),(ke=J.drawDataLabels)==null||ke.call(J),(me=J.redrawPoints)==null||me.call(J),ce.enableMouseTracking&&((fe=J.drawTracker)==null||fe.call(J)),Be&&((Ae=J.animate)==null||Ae.call(J)),ge||(Be&&_e.defer&&(Be+=_e.defer),J.animationTimeout=Q(()=>{J.afterAnimate()},Be||0)),J.isDirty=!1,J.hasRendered=!0,$(J,"afterRender")}redraw(){let J=this.isDirty||this.isDirtyData;this.translate(),this.render(),J&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(J,re){let{xAxis:ce,yAxis:ge}=this,_e=this.chart.inverted;return this.searchKDTree({clientX:_e?ce.len-J.chartY+ce.pos:J.chartX-ce.pos,plotY:_e?ge.len-J.chartX+ge.pos:J.chartY-ge.pos},re,J)}buildKDTree(J){this.buildingKdTree=!0;let re=this,ce=re.options.findNearestPointBy.indexOf("y")>-1?2:1;delete re.kdTree,Q(function(){re.kdTree=function ge(_e,ze,Te){let Ie,Be,Ge=_e==null?void 0:_e.length;if(Ge)return Ie=re.kdAxisArray[ze%Te],_e.sort((ke,me)=>(ke[Ie]||0)-(me[Ie]||0)),{point:_e[Be=Math.floor(Ge/2)],left:ge(_e.slice(0,Be),ze+1,Te),right:ge(_e.slice(Be+1),ze+1,Te)}}(re.getValidPoints(void 0,!re.directTouch),ce,ce),re.buildingKdTree=!1},re.options.kdNow||(J==null?void 0:J.type)==="touchstart"?0:1)}searchKDTree(J,re,ce){let ge=this,[_e,ze]=this.kdAxisArray,Te=re?"distX":"dist",Ie=(ge.options.findNearestPointBy||"").indexOf("y")>-1?2:1,Be=!!ge.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ce),this.kdTree)return function Ge(ke,me,fe,Ae){var wt;let De=me.point,Pe=ge.kdAxisArray[fe%Ae],je,Xe,et=De;(function(Rt,ft){var mr;let Ct=Rt[_e],Tt=ft[_e],si=X(Ct)&&X(Tt)?Ct-Tt:null,ui=Rt[ze],Ht=ft[ze],ar=X(ui)&&X(Ht)?ui-Ht:0,Zi=Be&&((mr=ft.marker)==null?void 0:mr.radius)||0;ft.dist=Math.sqrt((si&&si*si||0)+ar*ar)-Zi,ft.distX=X(si)?Math.abs(si)-Zi:Number.MAX_VALUE})(ke,De);let rt=(ke[Pe]||0)-(De[Pe]||0)+(Be&&((wt=De.marker)==null?void 0:wt.radius)||0),dt=rt<0?"left":"right",gt=rt<0?"right":"left";return me[dt]&&(et=(je=Ge(ke,me[dt],fe+1,Ae))[Te]<et[Te]?je:De),me[gt]&&Math.sqrt(rt*rt)<et[Te]&&(et=(Xe=Ge(ke,me[gt],fe+1,Ae))[Te]<et[Te]?Xe:et),et}(J,this.kdTree,Ie,Ie)}pointPlacementToXValue(){let{options:J,xAxis:re}=this,ce=J.pointPlacement;return ce==="between"&&(ce=re.reversed?-.5:.5),ue(ce)?ce*(J.pointRange||re.pointRange):0}isPointInside(J){let{chart:re,xAxis:ce,yAxis:ge}=this,{plotX:_e=-1,plotY:ze=-1}=J;return ze>=0&&ze<=(ge?ge.len:re.plotHeight)&&_e>=0&&_e<=(ce?ce.len:re.plotWidth)}drawTracker(){var me;let J=this,re=J.options,ce=re.trackByArea,ge=[].concat((ce?J.areaPath:J.graphPath)||[]),_e=J.chart,ze=_e.pointer,Te=_e.renderer,Ie=((me=_e.options.tooltip)==null?void 0:me.snap)||0,Be=()=>{re.enableMouseTracking&&_e.hoverSeries!==J&&J.onMouseOver()},Ge="rgba(192,192,192,"+(x?1e-4:.002)+")",ke=J.tracker;ke?ke.attr({d:ge}):J.graph&&(J.tracker=ke=Te.path(ge).attr({visibility:J.visible?"inherit":"hidden",zIndex:2}).addClass(ce?"highcharts-tracker-area":"highcharts-tracker-line").add(J.group),_e.styledMode||ke.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:Ge,fill:ce?Ge:"none","stroke-width":J.graph.strokeWidth()+(ce?0:2*Ie)}),[J.tracker,J.markerGroup,J.dataLabelsGroup].forEach(fe=>{fe&&(fe.addClass("highcharts-tracker").on("mouseover",Be).on("mouseout",Ae=>{ze==null||ze.onTrackerMouseOut(Ae)}),re.cursor&&!_e.styledMode&&fe.css({cursor:re.cursor}),fe.on("touchstart",Be))})),$(this,"afterDrawTracker")}addPoint(J,re,ce,ge,_e){let ze,Te,Ie=this.options,Be=this.data,Ge=this.chart,ke=this.xAxis,me=ke&&ke.hasNames&&ke.names,fe=Ie.data,Ae=this.xData;re=ye(re,!0);let De={series:this};this.pointClass.prototype.applyOptions.apply(De,[J]);let Pe=De.x;if(Te=Ae.length,this.requireSorting&&Pe<Ae[Te-1])for(ze=!0;Te&&Ae[Te-1]>Pe;)Te--;this.updateParallelArrays(De,"splice",[Te,0,0]),this.updateParallelArrays(De,Te),me&&De.name&&(me[Pe]=De.name),fe.splice(Te,0,J),(ze||this.processedData)&&(this.data.splice(Te,0,null),this.processData()),Ie.legendType==="point"&&this.generatePoints(),ce&&(Be[0]&&Be[0].remove?Be[0].remove(!1):(Be.shift(),this.updateParallelArrays(De,"shift"),fe.shift())),_e!==!1&&$(this,"addPoint",{point:De}),this.isDirty=!0,this.isDirtyData=!0,re&&Ge.redraw(ge)}removePoint(J,re,ce){let ge=this,_e=ge.data,ze=_e[J],Te=ge.points,Ie=ge.chart,Be=function(){Te&&Te.length===_e.length&&Te.splice(J,1),_e.splice(J,1),ge.options.data.splice(J,1),ge.updateParallelArrays(ze||{series:ge},"splice",[J,1]),ze&&ze.destroy(),ge.isDirty=!0,ge.isDirtyData=!0,re&&Ie.redraw()};T(ce,Ie),re=ye(re,!0),ze?ze.firePointEvent("remove",null,Be):Be()}remove(J,re,ce,ge){let _e=this,ze=_e.chart;function Te(){_e.destroy(ge),ze.isDirtyLegend=ze.isDirtyBox=!0,ze.linkSeries(ge),ye(J,!0)&&ze.redraw(re)}ce!==!1?$(_e,"remove",null,Te):Te()}update(J,re){var je,Xe,et;$(this,"update",{options:J=V(J,this.userOptions)});let ce=this,ge=ce.chart,_e=ce.userOptions,ze=ce.initialType||ce.type,Te=ge.options.plotOptions,Ie=D[ze].prototype,Be=ce.finishedAnimating&&{animation:!1},Ge={},ke,me,fe=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Ae=J.type||_e.type||ge.options.chart.type,De=!(this.hasDerivedData||Ae&&Ae!==this.type||J.pointStart!==void 0||J.pointInterval!==void 0||J.relativeXValue!==void 0||J.joinBy||J.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(rt=>ce.hasOptionChanged(rt)));Ae=Ae||ze,De&&(fe.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),J.visible!==!1&&fe.push("area","graph"),ce.parallelArrays.forEach(function(rt){fe.push(rt+"Data")}),J.data&&(J.dataSorting&&R(ce.options.dataSorting,J.dataSorting),this.setData(J.data,!1))),J=oe(_e,{index:_e.index===void 0?ce.index:_e.index,pointStart:((je=Te==null?void 0:Te.series)==null?void 0:je.pointStart)??_e.pointStart??((Xe=ce.xData)==null?void 0:Xe[0])},!De&&{data:ce.options.data},J,Be),De&&J.data&&(J.data=ce.options.data),(fe=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(fe)).forEach(function(rt){fe[rt]=ce[rt],delete ce[rt]});let Pe=!1;if(D[Ae]){if(Pe=Ae!==ce.type,ce.remove(!1,!1,!1,!0),Pe)if(ge.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ce,D[Ae].prototype);else{let rt=Object.hasOwnProperty.call(ce,"hcEvents")&&ce.hcEvents;for(me in Ie)ce[me]=void 0;R(ce,D[Ae].prototype),rt?ce.hcEvents=rt:delete ce.hcEvents}}else L(17,!0,ge,{missingModuleFor:Ae});if(fe.forEach(function(rt){ce[rt]=fe[rt]}),ce.init(ge,J),De&&this.points)for(let rt of((ke=ce.options).visible===!1?(Ge.graphic=1,Ge.dataLabel=1):(this.hasMarkerChanged(ke,_e)&&(Ge.graphic=1),(et=ce.hasDataLabels)!=null&&et.call(ce)||(Ge.dataLabel=1)),this.points))rt&&rt.series&&(rt.resolveColor(),Object.keys(Ge).length&&rt.destroyElements(Ge),ke.showInLegend===!1&&rt.legendItem&&ge.legend.destroyItem(rt));ce.initialType=ze,ge.linkSeries(),ge.setSortedData(),Pe&&ce.linkedSeries.length&&(ce.isDirtyData=!0),$(this,"afterUpdate"),ye(re,!0)&&ge.redraw(!!De&&void 0)}setName(J){this.name=this.options.name=this.userOptions.name=J,this.chart.isDirtyLegend=!0}hasOptionChanged(J){var Te,Ie;let re=this.chart,ce=this.options[J],ge=re.options.plotOptions,_e=this.userOptions[J],ze=ye((Te=ge==null?void 0:ge[this.type])==null?void 0:Te[J],(Ie=ge==null?void 0:ge.series)==null?void 0:Ie[J]);return _e&&!X(ze)?ce!==_e:ce!==ye(ze,ce)}onMouseOver(){let J=this.chart,re=J.hoverSeries,ce=J.pointer;ce==null||ce.setHoverChartIndex(),re&&re!==this&&re.onMouseOut(),this.options.events.mouseOver&&$(this,"mouseOver"),this.setState("hover"),J.hoverSeries=this}onMouseOut(){let J=this.options,re=this.chart,ce=re.tooltip,ge=re.hoverPoint;re.hoverSeries=null,ge&&ge.onMouseOut(),this&&J.events.mouseOut&&$(this,"mouseOut"),ce&&!this.stickyTracking&&(!ce.shared||this.noSharedTooltip)&&ce.hide(),re.series.forEach(function(_e){_e.setState("",!0)})}setState(J,re){let ce=this,ge=ce.options,_e=ce.graph,ze=ge.inactiveOtherPoints,Te=ge.states,Ie=ye(Te[J||"normal"]&&Te[J||"normal"].animation,ce.chart.options.chart.animation),Be=ge.lineWidth,Ge=ge.opacity;if(J=J||"",ce.state!==J&&([ce.group,ce.markerGroup,ce.dataLabelsGroup].forEach(function(ke){ke&&(ce.state&&ke.removeClass("highcharts-series-"+ce.state),J&&ke.addClass("highcharts-series-"+J))}),ce.state=J,!ce.chart.styledMode)){if(Te[J]&&Te[J].enabled===!1)return;if(J&&(Be=Te[J].lineWidth||Be+(Te[J].lineWidthPlus||0),Ge=ye(Te[J].opacity,Ge)),_e&&!_e.dashstyle&&ue(Be))for(let ke of[_e,...this.zones.map(me=>me.graph)])ke==null||ke.animate({"stroke-width":Be},Ie);ze||[ce.group,ce.markerGroup,ce.dataLabelsGroup,ce.labelBySeries].forEach(function(ke){ke&&ke.animate({opacity:Ge},Ie)})}re&&ze&&ce.points&&ce.setAllPointsToState(J||void 0)}setAllPointsToState(J){this.points.forEach(function(re){re.setState&&re.setState(J)})}setVisible(J,re){var Ie;let ce=this,ge=ce.chart,_e=ge.options.chart.ignoreHiddenSeries,ze=ce.visible;ce.visible=J=ce.options.visible=ce.userOptions.visible=J===void 0?!ze:J;let Te=J?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(Be=>{var Ge;(Ge=ce[Be])==null||Ge[Te]()}),(ge.hoverSeries===ce||((Ie=ge.hoverPoint)==null?void 0:Ie.series)===ce)&&ce.onMouseOut(),ce.legendItem&&ge.legend.colorizeItem(ce,J),ce.isDirty=!0,ce.options.stacking&&ge.series.forEach(Be=>{Be.options.stacking&&Be.visible&&(Be.isDirty=!0)}),ce.linkedSeries.forEach(Be=>{Be.setVisible(J,!1)}),_e&&(ge.isDirtyBox=!0),$(ce,Te),re!==!1&&ge.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(J){this.selected=J=this.options.selected=J===void 0?!this.selected:J,this.checkbox&&(this.checkbox.checked=J),$(this,J?"select":"unselect")}shouldShowTooltip(J,re,ce={}){return ce.series=this,ce.visiblePlotOnly=!0,this.chart.isInsidePlot(J,re,ce)}drawLegendSymbol(J,re){var ce;(ce=p[this.options.legendSymbol||"rectangle"])==null||ce.call(this,J,re)}}return ae.defaultOptions=g,ae.types=v.seriesTypes,ae.registerType=v.registerSeriesType,R(ae.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:m,requireSorting:!0,sorted:!0}),v.series=ae,ae}),o(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v){var y;let{animObject:k,setAnimation:_}=a,{registerEventOptions:T}=c,{composed:M,marginNames:A}=u,{distribute:x}=m,{format:P}=g,{addEvent:D,createElement:w,css:I,defined:N,discardElement:q,find:Z,fireEvent:X,isNumber:j,merge:V,pick:U,pushUnique:L,relativeLength:R,stableSort:G,syncTimeout:$}=v;class F{constructor(W,ne){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=W,this.setOptions(ne),ne.enabled&&(this.render(),T(this,ne),D(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),D(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(W){let ne=U(W.padding,8);this.options=W,this.chart.styledMode||(this.itemStyle=W.itemStyle,this.itemHiddenStyle=V(this.itemStyle,W.itemHiddenStyle)),this.itemMarginTop=W.itemMarginTop,this.itemMarginBottom=W.itemMarginBottom,this.padding=ne,this.initialItemY=ne-5,this.symbolWidth=U(W.symbolWidth,16),this.pages=[],this.proximate=W.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(W,ne){let ue=this.chart;this.setOptions(V(!0,this.options,W)),"events"in this.options&&T(this,this.options),this.destroy(),ue.isDirtyLegend=ue.isDirtyBox=!0,U(ne,!0)&&ue.redraw(),X(this,"afterUpdate",{redraw:ne})}colorizeItem(W,ne){let{area:ue,group:ie,label:oe,line:Se,symbol:ye}=W.legendItem||{};if(ie==null||ie[ne?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Ce={}}=this,K=Ce.color,{fillColor:Q,fillOpacity:ae,lineColor:ve,marker:J}=W.options,re=ce=>(!ne&&(ce.fill&&(ce.fill=K),ce.stroke&&(ce.stroke=K)),ce);oe==null||oe.css(V(ne?this.itemStyle:Ce)),Se==null||Se.attr(re({stroke:ve||W.color})),ye&&ye.attr(re(J&&ye.isMarker?W.pointAttribs():{fill:W.color})),ue==null||ue.attr(re({fill:Q||W.color,"fill-opacity":Q?1:ae??.75}))}X(this,"afterColorizeItem",{item:W,visible:ne})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(W){let{group:ne,x:ue=0,y:ie=0}=W.legendItem||{},oe=this.options,Se=oe.symbolPadding,ye=!oe.rtl,Ce=W.checkbox;if(ne&&ne.element){let K={translateX:ye?ue:this.legendWidth-ue-2*Se-4,translateY:ie};ne[N(ne.translateY)?"animate":"attr"](K,void 0,()=>{X(this,"afterPositionItem",{item:W})})}Ce&&(Ce.x=ue,Ce.y=ie)}destroyItem(W){let ne=W.checkbox,ue=W.legendItem||{};for(let ie of["group","label","line","symbol"])ue[ie]&&(ue[ie]=ue[ie].destroy());ne&&q(ne),W.legendItem=void 0}destroy(){for(let W of this.getAllItems())this.destroyItem(W);for(let W of["clipRect","up","down","pager","nav","box","title","group"])this[W]&&(this[W]=this[W].destroy());this.display=null}positionCheckboxes(){let W,ne=this.group&&this.group.alignAttr,ue=this.clipHeight||this.legendHeight,ie=this.titleHeight;ne&&(W=ne.translateY,this.allItems.forEach(function(oe){let Se,ye=oe.checkbox;ye&&(Se=W+ie+ye.y+(this.scrollOffset||0)+3,I(ye,{left:ne.translateX+oe.checkboxOffset+ye.x-20+"px",top:Se+"px",display:this.proximate||Se>W-6&&Se<W+ue-6?"":"none"}))},this))}renderTitle(){let W=this.options,ne=this.padding,ue=W.title,ie,oe=0;ue.text&&(this.title||(this.title=this.chart.renderer.label(ue.text,ne-3,ne-4,void 0,void 0,void 0,W.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(ue.style),this.title.add(this.group)),ue.width||this.title.css({width:this.maxLegendWidth+"px"}),oe=(ie=this.title.getBBox()).height,this.offsetWidth=ie.width,this.contentGroup.attr({translateY:oe})),this.titleHeight=oe}setText(W){let ne=this.options;W.legendItem.label.attr({text:ne.labelFormat?P(ne.labelFormat,W,this.chart):ne.labelFormatter.call(W)})}renderItem(W){let ne=W.legendItem=W.legendItem||{},ue=this.chart,ie=ue.renderer,oe=this.options,Se=oe.layout==="horizontal",ye=this.symbolWidth,Ce=oe.symbolPadding||0,K=this.itemStyle,Q=this.itemHiddenStyle,ae=Se?U(oe.itemDistance,20):0,ve=!oe.rtl,J=!W.series,re=!J&&W.series.drawLegendSymbol?W.series:W,ce=re.options,ge=!!this.createCheckboxForItem&&ce&&ce.showCheckbox,_e=oe.useHTML,ze=W.options.className,Te=ne.label,Ie=ye+Ce+ae+(ge?20:0);!Te&&(ne.group=ie.g("legend-item").addClass("highcharts-"+re.type+"-series highcharts-color-"+W.colorIndex+(ze?" "+ze:"")+(J?" highcharts-series-"+W.index:"")).attr({zIndex:1}).add(this.scrollGroup),ne.label=Te=ie.text("",ve?ye+Ce:-Ce,this.baseline||0,_e),ue.styledMode||Te.css(V(W.visible?K:Q)),Te.attr({align:ve?"left":"right",zIndex:2}).add(ne.group),!this.baseline&&(this.fontMetrics=ie.fontMetrics(Te),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Te.attr("y",this.baseline),this.symbolHeight=U(oe.symbolHeight,this.fontMetrics.f),oe.squareSymbol&&(this.symbolWidth=U(oe.symbolWidth,Math.max(this.symbolHeight,16)),Ie=this.symbolWidth+Ce+ae+(ge?20:0),ve&&Te.attr("x",this.symbolWidth+Ce))),re.drawLegendSymbol(this,W),this.setItemEvents&&this.setItemEvents(W,Te,_e)),ge&&!W.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(W),this.colorizeItem(W,W.visible),(ue.styledMode||!K.width)&&Te.css({width:(oe.itemWidth||this.widthOption||ue.spacingBox.width)-Ie+"px"}),this.setText(W);let Be=Te.getBBox(),Ge=this.fontMetrics&&this.fontMetrics.h||0;W.itemWidth=W.checkboxOffset=oe.itemWidth||ne.labelWidth||Be.width+Ie,this.maxItemWidth=Math.max(this.maxItemWidth,W.itemWidth),this.totalItemWidth+=W.itemWidth,this.itemHeight=W.itemHeight=Math.round(ne.labelHeight||(Be.height>1.5*Ge?Be.height:Ge))}layoutItem(W){let ne=this.options,ue=this.padding,ie=ne.layout==="horizontal",oe=W.itemHeight,Se=this.itemMarginBottom,ye=this.itemMarginTop,Ce=ie?U(ne.itemDistance,20):0,K=this.maxLegendWidth,Q=ne.alignColumns&&this.totalItemWidth>K?this.maxItemWidth:W.itemWidth,ae=W.legendItem||{};ie&&this.itemX-ue+Q>K&&(this.itemX=ue,this.lastLineHeight&&(this.itemY+=ye+this.lastLineHeight+Se),this.lastLineHeight=0),this.lastItemY=ye+this.itemY+Se,this.lastLineHeight=Math.max(oe,this.lastLineHeight),ae.x=this.itemX,ae.y=this.itemY,ie?this.itemX+=Q:(this.itemY+=ye+oe+Se,this.lastLineHeight=oe),this.offsetWidth=this.widthOption||Math.max((ie?this.itemX-ue-(W.checkbox?0:Ce):Q)+ue,this.offsetWidth)}getAllItems(){let W=[];return this.chart.series.forEach(function(ne){let ue=ne&&ne.options;ne&&U(ue.showInLegend,!N(ue.linkedTo)&&void 0,!0)&&(W=W.concat((ne.legendItem||{}).labels||(ue.legendType==="point"?ne.data:ne)))}),X(this,"afterGetAllItems",{allItems:W}),W}getAlignment(){let W=this.options;return this.proximate?W.align.charAt(0)+"tv":W.floating?"":W.align.charAt(0)+W.verticalAlign.charAt(0)+W.layout.charAt(0)}adjustMargins(W,ne){let ue=this.chart,ie=this.options,oe=this.getAlignment();oe&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(Se,ye){Se.test(oe)&&!N(W[ye])&&(ue[A[ye]]=Math.max(ue[A[ye]],ue.legend[(ye+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][ye]*ie[ye%2?"x":"y"]+U(ie.margin,12)+ne[ye]+(ue.titleOffset[ye]||0)))})}proximatePositions(){let W,ne=this.chart,ue=[],ie=this.options.align==="left";for(let oe of(this.allItems.forEach(function(Se){let ye,Ce,K=ie,Q,ae;Se.yAxis&&(Se.xAxis.options.reversed&&(K=!K),Se.points&&(ye=Z(K?Se.points:Se.points.slice(0).reverse(),function(ve){return j(ve.plotY)})),Ce=this.itemMarginTop+Se.legendItem.label.getBBox().height+this.itemMarginBottom,ae=Se.yAxis.top-ne.plotTop,Q=Se.visible?(ye?ye.plotY:Se.yAxis.height)+(ae-.3*Ce):ae+Se.yAxis.height,ue.push({target:Q,size:Ce,item:Se}))},this),x(ue,ne.plotHeight)))W=oe.item.legendItem||{},j(oe.pos)&&(W.y=ne.plotTop-ne.spacing[0]+oe.pos)}render(){let W=this.chart,ne=W.renderer,ue=this.options,ie=this.padding,oe=this.getAllItems(),Se,ye,Ce,K=this.group,Q,ae=this.box;this.itemX=ie,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=R(ue.width,W.spacingBox.width-ie),Q=W.spacingBox.width-2*ie-ue.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(Q/=2),this.maxLegendWidth=this.widthOption||Q,K||(this.group=K=ne.g("legend").addClass(ue.className||"").attr({zIndex:7}).add(),this.contentGroup=ne.g().attr({zIndex:1}).add(K),this.scrollGroup=ne.g().add(this.contentGroup)),this.renderTitle(),G(oe,(ve,J)=>(ve.options&&ve.options.legendIndex||0)-(J.options&&J.options.legendIndex||0)),ue.reversed&&oe.reverse(),this.allItems=oe,this.display=Se=!!oe.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,oe.forEach(this.renderItem,this),oe.forEach(this.layoutItem,this),ye=(this.widthOption||this.offsetWidth)+ie,Ce=this.lastItemY+this.lastLineHeight+this.titleHeight,Ce=this.handleOverflow(Ce)+ie,ae||(this.box=ae=ne.rect().addClass("highcharts-legend-box").attr({r:ue.borderRadius}).add(K)),W.styledMode||ae.attr({stroke:ue.borderColor,"stroke-width":ue.borderWidth||0,fill:ue.backgroundColor||"none"}).shadow(ue.shadow),ye>0&&Ce>0&&ae[ae.placed?"animate":"attr"](ae.crisp.call({},{x:0,y:0,width:ye,height:Ce},ae.strokeWidth())),K[Se?"show":"hide"](),W.styledMode&&K.getStyle("display")==="none"&&(ye=Ce=0),this.legendWidth=ye,this.legendHeight=Ce,Se&&this.align(),this.proximate||this.positionItems(),X(this,"afterRender")}align(W=this.chart.spacingBox){let ne=this.chart,ue=this.options,ie=W.y;/(lth|ct|rth)/.test(this.getAlignment())&&ne.titleOffset[0]>0?ie+=ne.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&ne.titleOffset[2]>0&&(ie-=ne.titleOffset[2]),ie!==W.y&&(W=V(W,{y:ie})),ne.hasRendered||(this.group.placed=!1),this.group.align(V(ue,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":ue.verticalAlign}),!0,W)}handleOverflow(W){let ne=this,ue=this.chart,ie=ue.renderer,oe=this.options,Se=oe.y,ye=oe.verticalAlign==="top",Ce=this.padding,K=oe.maxHeight,Q=oe.navigation,ae=U(Q.animation,!0),ve=Q.arrowSize||12,J=this.pages,re=this.allItems,ce=function(ke){typeof ke=="number"?Ge.attr({height:ke}):Ge&&(ne.clipRect=Ge.destroy(),ne.contentGroup.clip()),ne.contentGroup.div&&(ne.contentGroup.div.style.clip=ke?"rect("+Ce+"px,9999px,"+(Ce+ke)+"px,0)":"auto")},ge=function(ke){return ne[ke]=ie.circle(0,0,1.3*ve).translate(ve/2,ve/2).add(Be),ue.styledMode||ne[ke].attr("fill","rgba(0,0,0,0.0001)"),ne[ke]},_e,ze,Te,Ie=ue.spacingBox.height+(ye?-Se:Se)-Ce,Be=this.nav,Ge=this.clipRect;return oe.layout!=="horizontal"||oe.verticalAlign==="middle"||oe.floating||(Ie/=2),K&&(Ie=Math.min(Ie,K)),J.length=0,W&&Ie>0&&W>Ie&&Q.enabled!==!1?(this.clipHeight=_e=Math.max(Ie-20-this.titleHeight-Ce,0),this.currentPage=U(this.currentPage,1),this.fullHeight=W,re.forEach((ke,me)=>{let fe=(Te=ke.legendItem||{}).y||0,Ae=Math.round(Te.label.getBBox().height),De=J.length;(!De||fe-J[De-1]>_e&&(ze||fe)!==J[De-1])&&(J.push(ze||fe),De++),Te.pageIx=De-1,ze&&((re[me-1].legendItem||{}).pageIx=De-1),me===re.length-1&&fe+Ae-J[De-1]>_e&&fe>J[De-1]&&(J.push(fe),Te.pageIx=De),fe!==ze&&(ze=fe)}),Ge||(Ge=ne.clipRect=ie.clipRect(0,Ce-2,9999,0),ne.contentGroup.clip(Ge)),ce(_e),Be||(this.nav=Be=ie.g().attr({zIndex:1}).add(this.group),this.up=ie.symbol("triangle",0,0,ve,ve).add(Be),ge("upTracker").on("click",function(){ne.scroll(-1,ae)}),this.pager=ie.text("",15,10).addClass("highcharts-legend-navigation"),!ue.styledMode&&Q.style&&this.pager.css(Q.style),this.pager.add(Be),this.down=ie.symbol("triangle-down",0,0,ve,ve).add(Be),ge("downTracker").on("click",function(){ne.scroll(1,ae)})),ne.scroll(0),W=Ie):Be&&(ce(),this.nav=Be.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),W}scroll(W,ne){let ue=this.chart,ie=this.pages,oe=ie.length,Se=this.clipHeight,ye=this.options.navigation,Ce=this.pager,K=this.padding,Q=this.currentPage+W;Q>oe&&(Q=oe),Q>0&&(ne!==void 0&&_(ne,ue),this.nav.attr({translateX:K,translateY:Se+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(ae){ae.attr({class:Q===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Ce.attr({text:Q+"/"+oe}),[this.down,this.downTracker].forEach(function(ae){ae.attr({x:18+this.pager.getBBox().width,class:Q===oe?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),ue.styledMode||(this.up.attr({fill:Q===1?ye.inactiveColor:ye.activeColor}),this.upTracker.css({cursor:Q===1?"default":"pointer"}),this.down.attr({fill:Q===oe?ye.inactiveColor:ye.activeColor}),this.downTracker.css({cursor:Q===oe?"default":"pointer"})),this.scrollOffset=-ie[Q-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=Q,this.positionCheckboxes(),$(()=>{X(this,"afterScroll",{currentPage:Q})},k(U(ne,ue.renderer.globalAnimation,!0)).duration))}setItemEvents(W,ne,ue){let ie=this,oe=W.legendItem||{},Se=ie.chart.renderer.boxWrapper,ye=W instanceof p,Ce=W instanceof n,K="highcharts-legend-"+(ye?"point":"series")+"-active",Q=ie.chart.styledMode,ae=ue?[ne,oe.symbol]:[oe.group],ve=J=>{ie.allItems.forEach(re=>{W!==re&&[re].concat(re.linkedSeries||[]).forEach(ce=>{ce.setState(J,!ye)})})};for(let J of ae)J&&J.on("mouseover",function(){W.visible&&ve("inactive"),W.setState("hover"),W.visible&&Se.addClass(K),Q||ne.css(ie.options.itemHoverStyle)}).on("mouseout",function(){ie.chart.styledMode||ne.css(V(W.visible?ie.itemStyle:ie.itemHiddenStyle)),ve(""),Se.removeClass(K),W.setState()}).on("click",function(re){let ce=function(){W.setVisible&&W.setVisible(),ve(W.visible?"inactive":"")};Se.removeClass(K),X(ie,"itemClick",{browserEvent:re,legendItem:W},ce),ye?W.firePointEvent("legendItemClick",{browserEvent:re}):Ce&&X(W,"legendItemClick",{browserEvent:re})})}createCheckboxForItem(W){W.checkbox=w("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:W.selected,defaultChecked:W.selected},this.options.itemCheckboxStyle,this.chart.container),D(W.checkbox,"click",function(ne){let ue=ne.target;X(W.series||W,"checkboxClick",{checked:ue.checked,item:W},function(){W.select()})})}}return(y=F).compose=function(H){L(M,"Core.Legend")&&D(H,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})},F}),o(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(a,c,u,n,p,m,g,v,y,k,_,T,M,A){let{animate:x,animObject:P,setAnimation:D}=a,{defaultOptions:w,defaultTime:I}=u,{numberFormat:N}=n,{registerEventOptions:q}=p,{charts:Z,doc:X,marginNames:j,svg:V,win:U}=m,{seriesTypes:L}=y,{addEvent:R,attr:G,createElement:$,css:F,defined:H,diffObjects:W,discardElement:ne,erase:ue,error:ie,extend:oe,find:Se,fireEvent:ye,getStyle:Ce,isArray:K,isNumber:Q,isObject:ae,isString:ve,merge:J,objectEach:re,pick:ce,pInt:ge,relativeLength:_e,removeEvent:ze,splat:Te,syncTimeout:Ie,uniqueKey:Be}=T;class Ge{static chart(me,fe,Ae){return new Ge(me,fe,Ae)}constructor(me,fe,Ae){this.sharedClips={};let De=[...arguments];(ve(me)||me.nodeName)&&(this.renderTo=De.shift()),this.init(De[0],De[1])}setZoomOptions(){let me=this.options.chart,fe=me.zooming;this.zooming={...fe,type:ce(me.zoomType,fe.type),key:ce(me.zoomKey,fe.key),pinchType:ce(me.pinchType,fe.pinchType),singleTouch:ce(me.zoomBySingleTouch,fe.singleTouch,!1),resetButton:J(fe.resetButton,me.resetZoomButton)}}init(me,fe){ye(this,"init",{args:arguments},function(){let Ae=J(w,me),De=Ae.chart;this.userOptions=oe({},me),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=fe,this.isResizing=0,this.options=Ae,this.axes=[],this.series=[],this.time=me.time&&Object.keys(me.time).length?new _(me.time):m.time,this.numberFormatter=De.numberFormatter||N,this.styledMode=De.styledMode,this.hasCartesianSeries=De.showAxes,this.index=Z.length,Z.push(this),m.chartCount++,q(this,De),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),ye(this,"afterInit"),this.firstRender()})}initSeries(me){let fe=this.options.chart,Ae=me.type||fe.type,De=L[Ae];De||ie(17,!0,this,{missingModuleFor:Ae});let Pe=new De;return typeof Pe.init=="function"&&Pe.init(this,me),Pe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(me){me.points||me.data||!me.enabledDataSorting||me.setData(me.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(me,fe){return me.linkedSeries.length||fe.linkedSeries.length?fe.linkedSeries.length-me.linkedSeries.length:0})}orderItems(me,fe=0){let Ae=this[me],De=this.options[me]=Te(this.options[me]).slice(),Pe=this.userOptions[me]=this.userOptions[me]?Te(this.userOptions[me]).slice():[];if(this.hasRendered&&(De.splice(fe),Pe.splice(fe)),Ae)for(let je=fe,Xe=Ae.length;je<Xe;++je){let et=Ae[je];et&&(et.index=je,et instanceof v&&(et.name=et.getName()),et.options.isInternal||(De[je]=et.options,Pe[je]=et.userOptions))}}isInsidePlot(me,fe,Ae={}){var Tt;let{inverted:De,plotBox:Pe,plotLeft:je,plotTop:Xe,scrollablePlotBox:et}=this,{scrollLeft:rt=0,scrollTop:dt=0}=Ae.visiblePlotOnly&&((Tt=this.scrollablePlotArea)==null?void 0:Tt.scrollingContainer)||{},gt=Ae.series,wt=Ae.visiblePlotOnly&&et||Pe,Rt=Ae.inverted?fe:me,ft=Ae.inverted?me:fe,Ct={x:Rt,y:ft,isInsidePlot:!0,options:Ae};if(!Ae.ignoreX){let si=gt&&(De&&!this.polar?gt.yAxis:gt.xAxis)||{pos:je,len:1/0},ui=Ae.paneCoordinates?si.pos+Rt:je+Rt;ui>=Math.max(rt+je,si.pos)&&ui<=Math.min(rt+je+wt.width,si.pos+si.len)||(Ct.isInsidePlot=!1)}if(!Ae.ignoreY&&Ct.isInsidePlot){let si=!De&&Ae.axis&&!Ae.axis.isXAxis&&Ae.axis||gt&&(De?gt.xAxis:gt.yAxis)||{pos:Xe,len:1/0},ui=Ae.paneCoordinates?si.pos+ft:Xe+ft;ui>=Math.max(dt+Xe,si.pos)&&ui<=Math.min(dt+Xe+wt.height,si.pos+si.len)||(Ct.isInsidePlot=!1)}return ye(this,"afterIsInsidePlot",Ct),Ct.isInsidePlot}redraw(me){ye(this,"beforeRedraw");let fe=this.hasCartesianSeries?this.axes:this.colorAxis||[],Ae=this.series,De=this.pointer,Pe=this.legend,je=this.userOptions.legend,Xe=this.renderer,et=Xe.isHidden(),rt=[],dt,gt,wt,Rt=this.isDirtyBox,ft=this.isDirtyLegend,Ct;for(Xe.rootFontSize=Xe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&me,this),et&&this.temporaryDisplay(),this.layOutTitles(!1),wt=Ae.length;wt--;)if(((Ct=Ae[wt]).options.stacking||Ct.options.centerInCategory)&&(gt=!0,Ct.isDirty)){dt=!0;break}if(dt)for(wt=Ae.length;wt--;)(Ct=Ae[wt]).options.stacking&&(Ct.isDirty=!0);Ae.forEach(function(Tt){Tt.isDirty&&(Tt.options.legendType==="point"?(typeof Tt.updateTotals=="function"&&Tt.updateTotals(),ft=!0):je&&(je.labelFormatter||je.labelFormat)&&(ft=!0)),Tt.isDirtyData&&ye(Tt,"updatedData")}),ft&&Pe&&Pe.options.enabled&&(Pe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),fe.forEach(function(Tt){Tt.updateNames(),Tt.setScale()}),this.getMargins(),fe.forEach(function(Tt){Tt.isDirty&&(Rt=!0)}),fe.forEach(function(Tt){let si=Tt.min+","+Tt.max;Tt.extKey!==si&&(Tt.extKey=si,rt.push(function(){ye(Tt,"afterSetExtremes",oe(Tt.eventArgs,Tt.getExtremes())),delete Tt.eventArgs})),(Rt||gt)&&Tt.redraw()}),Rt&&this.drawChartBox(),ye(this,"predraw"),Ae.forEach(function(Tt){(Rt||Tt.isDirty)&&Tt.visible&&Tt.redraw(),Tt.isDirtyData=!1}),De&&De.reset(!0),Xe.draw(),ye(this,"redraw"),ye(this,"render"),et&&this.temporaryDisplay(!0),rt.forEach(function(Tt){Tt.call()})}get(me){let fe=this.series;function Ae(Pe){return Pe.id===me||Pe.options&&Pe.options.id===me}let De=Se(this.axes,Ae)||Se(this.series,Ae);for(let Pe=0;!De&&Pe<fe.length;Pe++)De=Se(fe[Pe].points||[],Ae);return De}getAxes(){let me=this.userOptions;for(let fe of(ye(this,"getAxes"),["xAxis","yAxis"]))for(let Ae of me[fe]=Te(me[fe]||{}))new c(this,Ae,fe);ye(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((me,fe)=>(fe.getPointsCollection().forEach(Ae=>{ce(Ae.selectedStaging,Ae.selected)&&me.push(Ae)}),me),[])}getSelectedSeries(){return this.series.filter(function(me){return me.selected})}setTitle(me,fe,Ae){this.applyDescription("title",me),this.applyDescription("subtitle",fe),this.applyDescription("caption",void 0),this.layOutTitles(Ae)}applyDescription(me,fe){let Ae=this,De=this.options[me]=J(this.options[me],fe),Pe=this[me];Pe&&fe&&(this[me]=Pe=Pe.destroy()),De&&!Pe&&((Pe=this.renderer.text(De.text,0,0,De.useHTML).attr({align:De.align,class:"highcharts-"+me,zIndex:De.zIndex||4}).add()).update=function(je,Xe){Ae.applyDescription(me,je),Ae.layOutTitles(Xe)},this.styledMode||Pe.css(oe(me==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},De.style)),this[me]=Pe)}layOutTitles(me=!0){let fe=[0,0,0],Ae=this.renderer,De=this.spacingBox;["title","subtitle","caption"].forEach(function(je){let Xe=this[je],et=this.options[je],rt=et.verticalAlign||"top",dt=je==="title"?rt==="top"?-3:0:rt==="top"?fe[0]+2:0;if(Xe){Xe.css({width:(et.width||De.width+(et.widthAdjust||0))+"px"});let gt=Ae.fontMetrics(Xe).b,wt=Math.round(Xe.getBBox(et.useHTML).height);Xe.align(oe({y:rt==="bottom"?gt:dt+gt,height:wt},et),!1,"spacingBox"),et.floating||(rt==="top"?fe[0]=Math.ceil(fe[0]+wt):rt==="bottom"&&(fe[2]=Math.ceil(fe[2]+wt)))}},this),fe[0]&&(this.options.title.verticalAlign||"top")==="top"&&(fe[0]+=this.options.title.margin),fe[2]&&this.options.caption.verticalAlign==="bottom"&&(fe[2]+=this.options.caption.margin);let Pe=!this.titleOffset||this.titleOffset.join(",")!==fe.join(",");this.titleOffset=fe,ye(this,"afterLayOutTitles"),!this.isDirtyBox&&Pe&&(this.isDirtyBox=this.isDirtyLegend=Pe,this.hasRendered&&me&&this.isDirtyBox&&this.redraw())}getContainerBox(){let me=[].map.call(this.renderTo.children,Ae=>{if(Ae!==this.container){let De=Ae.style.display;return Ae.style.display="none",[Ae,De]}}),fe={width:Ce(this.renderTo,"width",!0)||0,height:Ce(this.renderTo,"height",!0)||0};return me.filter(Boolean).forEach(([Ae,De])=>{Ae.style.display=De}),fe}getChartSize(){var je;let me=this.options.chart,fe=me.width,Ae=me.height,De=this.getContainerBox(),Pe=De.height>1&&!(!((je=this.renderTo.parentElement)!=null&&je.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,fe||De.width||600),this.chartHeight=Math.max(0,_e(Ae,this.chartWidth)||(Pe?De.height:400)),this.containerBox=De}temporaryDisplay(me){let fe=this.renderTo,Ae;if(me)for(;fe&&fe.style;)fe.hcOrigStyle&&(F(fe,fe.hcOrigStyle),delete fe.hcOrigStyle),fe.hcOrigDetached&&(X.body.removeChild(fe),fe.hcOrigDetached=!1),fe=fe.parentNode;else for(;fe&&fe.style&&(X.body.contains(fe)||fe.parentNode||(fe.hcOrigDetached=!0,X.body.appendChild(fe)),(Ce(fe,"display",!1)==="none"||fe.hcOricDetached)&&(fe.hcOrigStyle={display:fe.style.display,height:fe.style.height,overflow:fe.style.overflow},Ae={display:"block",overflow:"hidden"},fe!==this.renderTo&&(Ae.height=0),F(fe,Ae),fe.offsetWidth||fe.style.setProperty("display","block","important")),(fe=fe.parentNode)!==X.body););}setClassName(me){this.container.className="highcharts-container "+(me||"")}getContainer(){var wt;let me=this.options,fe=me.chart,Ae="data-highcharts-chart",De=Be(),Pe,je=this.renderTo;je||(this.renderTo=je=fe.renderTo),ve(je)&&(this.renderTo=je=X.getElementById(je)),je||ie(13,!0,this);let Xe=ge(G(je,Ae));Q(Xe)&&Z[Xe]&&Z[Xe].hasRendered&&Z[Xe].destroy(),G(je,Ae,this.index),je.innerHTML=M.emptyHTML,fe.skipClone||je.offsetWidth||this.temporaryDisplay(),this.getChartSize();let et=this.chartHeight,rt=this.chartWidth;F(je,{overflow:"hidden"}),this.styledMode||(Pe=oe({position:"relative",overflow:"hidden",width:rt+"px",height:et+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},fe.style||{}));let dt=$("div",{id:De},Pe,je);this.container=dt,this.getChartSize(),rt===this.chartWidth||(rt=this.chartWidth,this.styledMode||F(dt,{width:ce((wt=fe.style)==null?void 0:wt.width,rt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=dt.style.cursor;let gt=fe.renderer||!V?g.getRendererType(fe.renderer):k;if(this.renderer=new gt(dt,rt,et,void 0,fe.forExport,me.exporting&&me.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(fe.className),this.styledMode)for(let Rt in me.defs)this.renderer.definition(me.defs[Rt]);else this.renderer.setStyle(fe.style);this.renderer.chartIndex=this.index,ye(this,"afterGetContainer")}getMargins(me){let{spacing:fe,margin:Ae,titleOffset:De}=this;this.resetMargins(),De[0]&&!H(Ae[0])&&(this.plotTop=Math.max(this.plotTop,De[0]+fe[0])),De[2]&&!H(Ae[2])&&(this.marginBottom=Math.max(this.marginBottom,De[2]+fe[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Ae,fe),ye(this,"getMargins"),me||this.getAxisMargins()}getAxisMargins(){let me=this,fe=me.axisOffset=[0,0,0,0],Ae=me.colorAxis,De=me.margin,Pe=function(je){je.forEach(function(Xe){Xe.visible&&Xe.getOffset()})};me.hasCartesianSeries?Pe(me.axes):Ae&&Ae.length&&Pe(Ae),j.forEach(function(je,Xe){H(De[Xe])||(me[je]+=fe[Xe])}),me.setChartSize()}getOptions(){return W(this.userOptions,w)}reflow(me){var Pe;let fe=this,Ae=fe.containerBox,De=fe.getContainerBox();(Pe=fe.pointer)==null||delete Pe.chartPosition,!fe.isPrinting&&!fe.isResizing&&Ae&&De.width&&((De.width!==Ae.width||De.height!==Ae.height)&&(T.clearTimeout(fe.reflowTimeout),fe.reflowTimeout=Ie(function(){fe.container&&fe.setSize(void 0,void 0,!1)},me?100:0)),fe.containerBox=De)}setReflow(){let me=this,fe=Ae=>{var De;(De=me.options)!=null&&De.chart.reflow&&me.hasLoaded&&me.reflow(Ae)};if(typeof ResizeObserver=="function")new ResizeObserver(fe).observe(me.renderTo);else{let Ae=R(U,"resize",fe);R(this,"destroy",Ae)}}setSize(me,fe,Ae){let De=this,Pe=De.renderer;De.isResizing+=1,D(Ae,De);let je=Pe.globalAnimation;De.oldChartHeight=De.chartHeight,De.oldChartWidth=De.chartWidth,me!==void 0&&(De.options.chart.width=me),fe!==void 0&&(De.options.chart.height=fe),De.getChartSize();let{chartWidth:Xe,chartHeight:et,scrollablePixelsX:rt=0,scrollablePixelsY:dt=0}=De;(De.isDirtyBox||Xe!==De.oldChartWidth||et!==De.oldChartHeight)&&(De.styledMode||(je?x:F)(De.container,{width:`${Xe+rt}px`,height:`${et+dt}px`},je),De.setChartSize(!0),Pe.setSize(Xe,et,je),De.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),De.isDirtyLegend=!0,De.isDirtyBox=!0,De.layOutTitles(),De.getMargins(),De.redraw(je),De.oldChartHeight=void 0,ye(De,"resize"),setTimeout(()=>{De&&ye(De,"endResize")},P(je).duration)),De.isResizing-=1}setChartSize(me){let fe,Ae,De,Pe,{chartHeight:je,chartWidth:Xe,inverted:et,spacing:rt,renderer:dt}=this,gt=this.clipOffset,wt=Math[et?"floor":"round"];this.plotLeft=fe=Math.round(this.plotLeft),this.plotTop=Ae=Math.round(this.plotTop),this.plotWidth=De=Math.max(0,Math.round(Xe-fe-this.marginRight)),this.plotHeight=Pe=Math.max(0,Math.round(je-Ae-this.marginBottom)),this.plotSizeX=et?Pe:De,this.plotSizeY=et?De:Pe,this.spacingBox=dt.spacingBox={x:rt[3],y:rt[0],width:Xe-rt[3]-rt[1],height:je-rt[0]-rt[2]},this.plotBox=dt.plotBox={x:fe,y:Ae,width:De,height:Pe},gt&&(this.clipBox={x:wt(gt[3]),y:wt(gt[0]),width:wt(this.plotSizeX-gt[1]-gt[3]),height:wt(this.plotSizeY-gt[0]-gt[2])}),me||(this.axes.forEach(function(Rt){Rt.setAxisSize(),Rt.setAxisTranslation()}),dt.alignElements()),ye(this,"afterSetChartSize",{skipAxes:me})}resetMargins(){ye(this,"resetMargins");let me=this,fe=me.options.chart,Ae=fe.plotBorderWidth||0,De=Ae/2;["margin","spacing"].forEach(function(Pe){let je=fe[Pe],Xe=ae(je)?je:[je,je,je,je];["Top","Right","Bottom","Left"].forEach(function(et,rt){me[Pe][rt]=ce(fe[Pe+et],Xe[rt])})}),j.forEach(function(Pe,je){me[Pe]=ce(me.margin[je],me.spacing[je])}),me.axisOffset=[0,0,0,0],me.clipOffset=[De,De,De,De],me.plotBorderWidth=Ae}drawChartBox(){let me=this.options.chart,fe=this.renderer,Ae=this.chartWidth,De=this.chartHeight,Pe=this.styledMode,je=this.plotBGImage,Xe=me.backgroundColor,et=me.plotBackgroundColor,rt=me.plotBackgroundImage,dt=this.plotLeft,gt=this.plotTop,wt=this.plotWidth,Rt=this.plotHeight,ft=this.plotBox,Ct=this.clipRect,Tt=this.clipBox,si=this.chartBackground,ui=this.plotBackground,Ht=this.plotBorder,ar,Zi,mr,zr="animate";si||(this.chartBackground=si=fe.rect().addClass("highcharts-background").add(),zr="attr"),Pe?ar=Zi=si.strokeWidth():(Zi=(ar=me.borderWidth||0)+(me.shadow?8:0),mr={fill:Xe||"none"},(ar||si["stroke-width"])&&(mr.stroke=me.borderColor,mr["stroke-width"]=ar),si.attr(mr).shadow(me.shadow)),si[zr]({x:Zi/2,y:Zi/2,width:Ae-Zi-ar%2,height:De-Zi-ar%2,r:me.borderRadius}),zr="animate",ui||(zr="attr",this.plotBackground=ui=fe.rect().addClass("highcharts-plot-background").add()),ui[zr](ft),!Pe&&(ui.attr({fill:et||"none"}).shadow(me.plotShadow),rt&&(je?(rt!==je.attr("href")&&je.attr("href",rt),je.animate(ft)):this.plotBGImage=fe.image(rt,dt,gt,wt,Rt).add())),Ct?Ct.animate({width:Tt.width,height:Tt.height}):this.clipRect=fe.clipRect(Tt),zr="animate",Ht||(zr="attr",this.plotBorder=Ht=fe.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Pe||Ht.attr({stroke:me.plotBorderColor,"stroke-width":me.plotBorderWidth||0,fill:"none"}),Ht[zr](Ht.crisp({x:dt,y:gt,width:wt,height:Rt},-Ht.strokeWidth())),this.isDirtyBox=!1,ye(this,"afterDrawChartBox")}propFromSeries(){let me,fe,Ae,De=this,Pe=De.options.chart,je=De.options.series;["inverted","angular","polar"].forEach(function(Xe){for(fe=L[Pe.type],Ae=Pe[Xe]||fe&&fe.prototype[Xe],me=je&&je.length;!Ae&&me--;)(fe=L[je[me].type])&&fe.prototype[Xe]&&(Ae=!0);De[Xe]=Ae})}linkSeries(me){let fe=this,Ae=fe.series;Ae.forEach(function(De){De.linkedSeries.length=0}),Ae.forEach(function(De){let{linkedTo:Pe}=De.options;if(ve(Pe)){let je;(je=Pe===":previous"?fe.series[De.index-1]:fe.get(Pe))&&je.linkedParent!==De&&(je.linkedSeries.push(De),De.linkedParent=je,je.enabledDataSorting&&De.setDataSortingOptions(),De.visible=ce(De.options.visible,je.options.visible,De.visible))}}),ye(this,"afterLinkSeries",{isUpdating:me})}renderSeries(){this.series.forEach(function(me){me.translate(),me.render()})}render(){var dt;let me=this.axes,fe=this.colorAxis,Ae=this.renderer,De=this.options.chart.axisLayoutRuns||2,Pe=gt=>{gt.forEach(wt=>{wt.visible&&wt.render()})},je=0,Xe=!0,et,rt=0;for(let gt of(this.setTitle(),ye(this,"beforeMargins"),(dt=this.getStacks)==null||dt.call(this),this.getMargins(!0),this.setChartSize(),me)){let{options:wt}=gt,{labels:Rt}=wt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Rt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){je=wt.tickLength,gt.createGroups();let ft=new A(gt,0,"",!0),Ct=ft.createLabel("x",Rt);if(ft.destroy(),Ct&&ce(Rt.reserveSpace,!Q(wt.crossing))&&(je=Ct.getBBox().height+Rt.distance+Math.max(wt.offset||0,0)),je){Ct==null||Ct.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-je,0);(Xe||et||De>1)&&rt<De;){let gt=this.plotWidth,wt=this.plotHeight;for(let Rt of me)rt===0?Rt.setScale():(Rt.horiz&&Xe||!Rt.horiz&&et)&&Rt.setTickInterval(!0);rt===0?this.getAxisMargins():this.getMargins(),Xe=gt/this.plotWidth>(rt?1:1.1),et=wt/this.plotHeight>(rt?1:1.05),rt++}this.drawChartBox(),this.hasCartesianSeries?Pe(me):fe&&fe.length&&Pe(fe),this.seriesGroup||(this.seriesGroup=Ae.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(me){let fe=this,Ae=J(!0,this.options.credits,me);Ae.enabled&&!this.credits&&(this.credits=this.renderer.text(Ae.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Ae.href&&(U.location.href=Ae.href)}).attr({align:Ae.position.align,zIndex:8}),fe.styledMode||this.credits.css(Ae.style),this.credits.add().align(Ae.position),this.credits.update=function(De){fe.credits=fe.credits.destroy(),fe.addCredits(De)})}destroy(){let me,fe=this,Ae=fe.axes,De=fe.series,Pe=fe.container,je=Pe&&Pe.parentNode;for(ye(fe,"destroy"),fe.renderer.forExport?ue(Z,fe):Z[fe.index]=void 0,m.chartCount--,fe.renderTo.removeAttribute("data-highcharts-chart"),ze(fe),me=Ae.length;me--;)Ae[me]=Ae[me].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),me=De.length;me--;)De[me]=De[me].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Xe){let et=fe[Xe];et&&et.destroy&&(fe[Xe]=et.destroy())}),Pe&&(Pe.innerHTML=M.emptyHTML,ze(Pe),je&&ne(Pe)),re(fe,function(Xe,et){delete fe[et]})}firstRender(){var De;let me=this,fe=me.options;me.getContainer(),me.resetMargins(),me.setChartSize(),me.propFromSeries(),me.getAxes();let Ae=K(fe.series)?fe.series:[];fe.series=[],Ae.forEach(function(Pe){me.initSeries(Pe)}),me.linkSeries(),me.setSortedData(),ye(me,"beforeRender"),me.render(),(De=me.pointer)==null||De.getChartPosition(),me.renderer.imgCount||me.hasLoaded||me.onload(),me.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(me){me&&this.index!==void 0&&me.apply(this,[this])},this),ye(this,"load"),ye(this,"render"),H(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:me,title:fe}=this;!me||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(fe&&fe.element.textContent||"").replace(/</g,"&lt;")}),me.accessibility&&me.accessibility.enabled===!1||ie('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(me,fe,Ae){let De,Pe=this;return me&&(fe=ce(fe,!0),ye(Pe,"addSeries",{options:me},function(){De=Pe.initSeries(me),Pe.isDirtyLegend=!0,Pe.linkSeries(),De.enabledDataSorting&&De.setData(me.data,!1),ye(Pe,"afterAddSeries",{series:De}),fe&&Pe.redraw(Ae)})),De}addAxis(me,fe,Ae,De){return this.createAxis(fe?"xAxis":"yAxis",{axis:me,redraw:Ae,animation:De})}addColorAxis(me,fe,Ae){return this.createAxis("colorAxis",{axis:me,redraw:fe,animation:Ae})}createAxis(me,fe){let Ae=new c(this,fe.axis,me);return ce(fe.redraw,!0)&&this.redraw(fe.animation),Ae}showLoading(me){let fe=this,Ae=fe.options,De=Ae.loading,Pe=function(){je&&F(je,{left:fe.plotLeft+"px",top:fe.plotTop+"px",width:fe.plotWidth+"px",height:fe.plotHeight+"px"})},je=fe.loadingDiv,Xe=fe.loadingSpan;je||(fe.loadingDiv=je=$("div",{className:"highcharts-loading highcharts-loading-hidden"},null,fe.container)),Xe||(fe.loadingSpan=Xe=$("span",{className:"highcharts-loading-inner"},null,je),R(fe,"redraw",Pe)),je.className="highcharts-loading",M.setElementHTML(Xe,ce(me,Ae.lang.loading,"")),fe.styledMode||(F(je,oe(De.style,{zIndex:10})),F(Xe,De.labelStyle),fe.loadingShown||(F(je,{opacity:0,display:""}),x(je,{opacity:De.style.opacity||.5},{duration:De.showDuration||0}))),fe.loadingShown=!0,Pe()}hideLoading(){let me=this.options,fe=this.loadingDiv;fe&&(fe.className="highcharts-loading highcharts-loading-hidden",this.styledMode||x(fe,{opacity:0},{duration:me.loading.hideDuration||100,complete:function(){F(fe,{display:"none"})}})),this.loadingShown=!1}update(me,fe,Ae,De){let Pe,je,Xe,et=this,rt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},dt=me.isResponsiveOptions,gt=[];ye(et,"update",{options:me}),dt||et.setResponsive(!1,!0),me=W(me,et.options),et.userOptions=J(et.userOptions,me);let wt=me.chart;wt&&(J(!0,et.options.chart,wt),this.setZoomOptions(),"className"in wt&&et.setClassName(wt.className),("inverted"in wt||"polar"in wt||"type"in wt)&&(et.propFromSeries(),Pe=!0),"alignTicks"in wt&&(Pe=!0),"events"in wt&&q(this,wt),re(wt,function(Ct,Tt){et.propsRequireUpdateSeries.indexOf("chart."+Tt)!==-1&&(je=!0),et.propsRequireDirtyBox.indexOf(Tt)!==-1&&(et.isDirtyBox=!0),et.propsRequireReflow.indexOf(Tt)===-1||(et.isDirtyBox=!0,dt||(Xe=!0))}),!et.styledMode&&wt.style&&et.renderer.setStyle(et.options.chart.style||{})),!et.styledMode&&me.colors&&(this.options.colors=me.colors),me.time&&(this.time===I&&(this.time=new _(me.time)),J(!0,et.options.time,me.time)),re(me,function(Ct,Tt){et[Tt]&&typeof et[Tt].update=="function"?et[Tt].update(Ct,!1):typeof et[rt[Tt]]=="function"?et[rt[Tt]](Ct):Tt!=="colors"&&et.collectionsWithUpdate.indexOf(Tt)===-1&&J(!0,et.options[Tt],me[Tt]),Tt!=="chart"&&et.propsRequireUpdateSeries.indexOf(Tt)!==-1&&(je=!0)}),this.collectionsWithUpdate.forEach(function(Ct){me[Ct]&&(Te(me[Ct]).forEach(function(Tt,si){let ui,Ht=H(Tt.id);Ht&&(ui=et.get(Tt.id)),!ui&&et[Ct]&&(ui=et[Ct][ce(Tt.index,si)])&&(Ht&&H(ui.options.id)||ui.options.isInternal)&&(ui=void 0),ui&&ui.coll===Ct&&(ui.update(Tt,!1),Ae&&(ui.touched=!0)),!ui&&Ae&&et.collectionsWithInit[Ct]&&(et.collectionsWithInit[Ct][0].apply(et,[Tt].concat(et.collectionsWithInit[Ct][1]||[]).concat([!1])).touched=!0)}),Ae&&et[Ct].forEach(function(Tt){Tt.touched||Tt.options.isInternal?delete Tt.touched:gt.push(Tt)}))}),gt.forEach(function(Ct){Ct.chart&&Ct.remove&&Ct.remove(!1)}),Pe&&et.axes.forEach(function(Ct){Ct.update({},!1)}),je&&et.getSeriesOrderByLinks().forEach(function(Ct){Ct.chart&&Ct.update({},!1)},this);let Rt=wt&&wt.width,ft=wt&&(ve(wt.height)?_e(wt.height,Rt||et.chartWidth):wt.height);Xe||Q(Rt)&&Rt!==et.chartWidth||Q(ft)&&ft!==et.chartHeight?et.setSize(Rt,ft,De):ce(fe,!0)&&et.redraw(De),ye(et,"afterUpdate",{options:me,redraw:fe,animation:De})}setSubtitle(me,fe){this.applyDescription("subtitle",me),this.layOutTitles(fe)}setCaption(me,fe){this.applyDescription("caption",me),this.layOutTitles(fe)}showResetZoom(){let me=this,fe=w.lang,Ae=me.zooming.resetButton,De=Ae.theme,Pe=Ae.relativeTo==="chart"||Ae.relativeTo==="spacingBox"?null:"plotBox";function je(){me.zoomOut()}ye(this,"beforeShowResetZoom",null,function(){me.resetZoomButton=me.renderer.button(fe.resetZoom,null,null,je,De).attr({align:Ae.position.align,title:fe.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Ae.position,!1,Pe)}),ye(this,"afterShowResetZoom")}zoomOut(){ye(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(me,fe){let Ae=this,De=typeof fe=="object"?fe:{enabled:fe,type:"x"},Pe=De.type,je=Pe&&Ae[{x:"xAxis",xy:"axes",y:"yAxis"}[Pe]].filter(et=>et.options.panningEnabled&&!et.options.isInternal),Xe=Ae.options.chart;Xe!=null&&Xe.panning&&(Xe.panning=De),ye(this,"pan",{originalEvent:me},()=>{Ae.transform({axes:je,event:me,to:{x:me.chartX-(Ae.mouseDownX||0),y:me.chartY-(Ae.mouseDownY||0)},trigger:"pan"}),F(Ae.container,{cursor:"move"})})}transform(me){var Rt;let{axes:fe=this.axes,event:Ae,from:De={},reset:Pe,selection:je,to:Xe={},trigger:et}=me,{inverted:rt}=this,dt=!1,gt,wt;for(let ft of((Rt=this.hoverPoints)==null||Rt.forEach(Ct=>Ct.setState()),fe)){let{horiz:Ct,len:Tt,minPointOffset:si=0,options:ui,reversed:Ht}=ft,ar=Ct?"width":"height",Zi=Ct?"x":"y",mr=ce(Xe[ar],ft.len),zr=ce(De[ar],ft.len),ir=10>Math.abs(mr)?1:mr/zr,ut=(De[Zi]||0)+zr/2-ft.pos,bt=ut-((Xe[Zi]??ft.pos)+mr/2-ft.pos)/ir,Pt=Ht&&!rt||!Ht&&rt?-1:1;if(!Pe&&(ut<0||ut>ft.len))continue;let Bt=ft.toValue(bt,!0)+(je||ft.isOrdinal?0:si*Pt),qt=ft.toValue(bt+Tt/ir,!0)-(je||ft.isOrdinal?0:si*Pt||0),bi=ft.allExtremes;if(Bt>qt&&([Bt,qt]=[qt,Bt]),ir===1&&!Pe&&ft.coll==="yAxis"&&!bi){for(let zt of ft.series){let Dt=zt.getExtremes(zt.getProcessedData(!0).yData,!0);bi??(bi={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Q(Dt.dataMin)&&Q(Dt.dataMax)&&(bi.dataMin=Math.min(Dt.dataMin,bi.dataMin),bi.dataMax=Math.max(Dt.dataMax,bi.dataMax))}ft.allExtremes=bi}let{dataMin:Oi,dataMax:di,min:He,max:xe}=oe(ft.getExtremes(),bi||{}),Le=Oi??ui.min,Ue=di??ui.max,Ke=qt-Bt,st=ft.categories?0:Math.min(Ke,Ue-Le),ct=Le-st*(H(ui.min)?0:ui.minPadding),ot=Ue+st*(H(ui.max)?0:ui.maxPadding),nt=ft.allowZoomOutside||ir===1||et!=="zoom"&&ir>1,mt=Math.min(ui.min??ct,ct,nt?He:ct),kt=Math.max(ui.max??ot,ot,nt?xe:ot);(!ft.isOrdinal||ft.options.overscroll||ir!==1||Pe)&&(Bt<mt&&(Bt=mt,ir>=1&&(qt=Bt+Ke)),qt>kt&&(qt=kt,ir>=1&&(Bt=qt-Ke)),(Pe||ft.series.length&&(Bt!==He||qt!==xe)&&Bt>=mt&&qt<=kt)&&(je?je[ft.coll].push({axis:ft,min:Bt,max:qt}):(ft.isPanning=et!=="zoom",ft.isPanning&&(wt=!0),ft.setExtremes(Pe?void 0:Bt,Pe?void 0:qt,!1,!1,{move:bt,trigger:et,scale:ir}),!Pe&&(Bt>mt||qt<kt)&&et!=="mousewheel"&&(gt=!0)),dt=!0),Ae&&(this[Ct?"mouseDownX":"mouseDownY"]=Ae[Ct?"chartX":"chartY"]))}return dt&&(je?ye(this,"selection",je,()=>{delete me.selection,me.trigger="zoom",this.transform(me)}):(!gt||wt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(et==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),dt}}return oe(Ge.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Ge.prototype.addAxis,[!0]],yAxis:[Ge.prototype.addAxis,[!1]],series:[Ge.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),Ge}),o(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{stop:p}=a,{composed:m}=c,{addEvent:g,createElement:v,css:y,defined:k,merge:_,pushUnique:T}=n;function M(){let P=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!P&&(this.scrollablePlotArea=P=new x(this)),P==null||P.applyFixed()}function A(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class x{static compose(D,w,I){T(m,this.compose)&&(g(D,"afterInit",A),g(w,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),g(w,"render",M),g(I,"show",A))}static afterSetSize(D,w){let I,N,q,{minWidth:Z,minHeight:X}=D.options.chart.scrollablePlotArea||{},{clipBox:j,plotBox:V,inverted:U,renderer:L}=D;if(!L.forExport&&(Z?(D.scrollablePixelsX=I=Math.max(0,Z-D.chartWidth),I&&(D.scrollablePlotBox=_(D.plotBox),V.width=D.plotWidth+=I,j[U?"height":"width"]+=I,q=!0)):X&&(D.scrollablePixelsY=N=Math.max(0,X-D.chartHeight),k(N)&&(D.scrollablePlotBox=_(D.plotBox),V.height=D.plotHeight+=N,j[U?"width":"height"]+=N,q=!1)),k(q)&&!w.skipAxes))for(let R of D.axes)R.horiz===q&&(R.setAxisSize(),R.setAxisTranslation())}constructor(D){var G;let w,I=D.options.chart,N=u.getRendererType(),q=I.scrollablePlotArea||{},Z=this.moveFixedElements.bind(this),X={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};D.scrollablePixelsX&&(X.overflowX="auto"),D.scrollablePixelsY&&(X.overflowY="auto"),this.chart=D;let j=this.parentDiv=v("div",{className:"highcharts-scrolling-parent"},{position:"relative"},D.renderTo),V=this.scrollingContainer=v("div",{className:"highcharts-scrolling"},X,j),U=this.innerContainer=v("div",{className:"highcharts-inner-container"},void 0,V),L=this.fixedDiv=v("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=I.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),R=this.fixedRenderer=new N(L,D.chartWidth,D.chartHeight,I.style);this.mask=R.path().attr({fill:I.backgroundColor||"#fff","fill-opacity":q.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),V.parentNode.insertBefore(L,V),y(D.renderTo,{overflow:"visible"}),g(D,"afterShowResetZoom",Z),g(D,"afterApplyDrilldown",Z),g(D,"afterLayOutTitles",Z),g(V,"scroll",()=>{let{pointer:$,hoverPoint:F}=D;$&&(delete $.chartPosition,F&&(w=F),$.runPointActions(void 0,w,!0))}),U.appendChild(D.container)}applyFixed(){var Q;let{chart:D,fixedRenderer:w,isDirty:I,scrollingContainer:N}=this,{axisOffset:q,chartWidth:Z,chartHeight:X,container:j,plotHeight:V,plotLeft:U,plotTop:L,plotWidth:R,scrollablePixelsX:G=0,scrollablePixelsY:$=0}=D,{scrollPositionX:F=0,scrollPositionY:H=0}=D.options.chart.scrollablePlotArea||{},W=Z+G,ne=X+$;w.setSize(Z,X),(I??!0)&&(this.isDirty=!1,this.moveFixedElements()),p(D.container),y(j,{width:`${W}px`,height:`${ne}px`}),D.renderer.boxWrapper.attr({width:W,height:ne,viewBox:[0,0,W,ne].join(" ")}),(Q=D.chartBackground)==null||Q.attr({width:W,height:ne}),y(N,{width:`${Z}px`,height:`${X}px`}),k(I)||(N.scrollLeft=G*F,N.scrollTop=$*H);let ue=L-q[0]-1,ie=U-q[3]-1,oe=L+V+q[2]+1,Se=U+R+q[1]+1,ye=U+R-G,Ce=L+V-$,K=[["M",0,0]];G?K=[["M",0,ue],["L",U-1,ue],["L",U-1,oe],["L",0,oe],["Z"],["M",ye,ue],["L",Z,ue],["L",Z,oe],["L",ye,oe],["Z"]]:$&&(K=[["M",ie,0],["L",ie,L-1],["L",Se,L-1],["L",Se,0],["Z"],["M",ie,Ce],["L",ie,X],["L",Se,X],["L",Se,Ce],["Z"]]),D.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:K})}moveFixedElements(){let D,{container:w,inverted:I,scrollablePixelsX:N,scrollablePixelsY:q}=this.chart,Z=this.fixedRenderer,X=x.fixedSelectors;for(let j of(N&&!I?D=".highcharts-yaxis":N&&I||q&&!I?D=".highcharts-xaxis":q&&I&&(D=".highcharts-yaxis"),D&&X.push(`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`),X))[].forEach.call(w.querySelectorAll(j),V=>{(V.namespaceURI===Z.SVG_NS?Z.box:Z.box.parentNode).appendChild(V),V.style.pointerEvents="auto"})}}return x.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],x}),o(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{format:n}=a,{series:p}=c,{destroyObjectProperties:m,fireEvent:g,isNumber:v,pick:y}=u;return class{constructor(k,_,T,M,A){let x=k.chart.inverted,P=k.reversed;this.axis=k;let D=this.isNegative=!!T!=!!P;this.options=_=_||{},this.x=M,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=A,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:_.align||(x?D?"left":"right":"center"),verticalAlign:_.verticalAlign||(x?"middle":D?"bottom":"top"),y:_.y,x:_.x},this.textAlign=_.textAlign||(x?D?"right":"left":"center")}destroy(){m(this,this.axis)}render(k){let _=this.axis.chart,T=this.options,M=T.format,A=M?n(M,this,_):T.formatter.call(this);if(this.label)this.label.attr({text:A,visibility:"hidden"});else{this.label=_.renderer.label(A,null,void 0,T.shape,void 0,void 0,T.useHTML,!1,"stack-labels");let x={r:T.borderRadius||0,text:A,padding:y(T.padding,5),visibility:"hidden"};_.styledMode||(x.fill=T.backgroundColor,x.stroke=T.borderColor,x["stroke-width"]=T.borderWidth,this.label.css(T.style||{})),this.label.attr(x),this.label.added||this.label.add(k)}this.label.labelrank=_.plotSizeY,g(this,"afterRender")}setOffset(k,_,T,M,A,x){let{alignOptions:P,axis:D,label:w,options:I,textAlign:N}=this,q=D.chart,Z=this.getStackBox({xOffset:k,width:_,boxBottom:T,boxTop:M,defaultX:A,xAxis:x}),{verticalAlign:X}=P;if(w&&Z){let j=w.getBBox(void 0,0),V=w.padding,U=y(I.overflow,"justify")==="justify",L;P.x=I.x||0,P.y=I.y||0;let{x:R,y:G}=this.adjustStackPosition({labelBox:j,verticalAlign:X,textAlign:N});Z.x-=R,Z.y-=G,w.align(P,!1,Z),(L=q.isInsidePlot(w.alignAttr.x+P.x+R,w.alignAttr.y+P.y+G))||(U=!1),U&&p.prototype.justifyDataLabel.call(D,w,P,w.alignAttr,j,Z),w.attr({x:w.alignAttr.x,y:w.alignAttr.y,rotation:I.rotation,rotationOriginX:j.width*{left:0,center:.5,right:1}[I.textAlign||"center"],rotationOriginY:j.height/2}),y(!U&&I.crop,!0)&&(L=v(w.x)&&v(w.y)&&q.isInsidePlot(w.x-V+(w.width||0),w.y)&&q.isInsidePlot(w.x+V,w.y)),w[L?"show":"hide"]()}g(this,"afterSetOffset",{xOffset:k,width:_})}adjustStackPosition({labelBox:k,verticalAlign:_,textAlign:T}){let M={bottom:0,middle:1,top:2,right:1,center:0,left:-1},A=M[_],x=M[T];return{x:k.width/2+k.width/2*x,y:k.height/2*A}}getStackBox(k){let _=this.axis,T=_.chart,{boxTop:M,defaultX:A,xOffset:x,width:P,boxBottom:D}=k,w=_.stacking.usePercentage?100:y(M,this.total,0),I=_.toPixels(w),N=k.xAxis||T.xAxis[0],q=y(A,N.translate(this.x))+x,Z=Math.abs(I-_.toPixels(D||v(_.min)&&_.logarithmic&&_.logarithmic.lin2log(_.min)||0)),X=T.inverted,j=this.isNegative;return X?{x:(j?I:I-Z)-T.plotLeft,y:N.height-q-P+N.top-T.plotTop,width:Z,height:P}:{x:q+N.transB-T.plotLeft,y:(j?I-Z:I)-T.plotTop,width:P,height:Z}}}}),o(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){var m;let{getDeferredAnimation:g}=a,{series:{prototype:v}}=u,{addEvent:y,correctFloat:k,defined:_,destroyObjectProperties:T,fireEvent:M,isArray:A,isNumber:x,objectEach:P,pick:D}=p;function w(){let L=this.inverted;this.axes.forEach(R=>{R.stacking&&R.stacking.stacks&&R.hasVisibleSeries&&(R.stacking.oldStacks=R.stacking.stacks)}),this.series.forEach(R=>{let G=R.xAxis&&R.xAxis.options||{};R.options.stacking&&R.reserveSpace()&&(R.stackKey=[R.type,D(R.options.stack,""),L?G.top:G.left,L?G.height:G.width].join(","))})}function I(){var R;let L=this.stacking;if(L){let G=L.stacks;P(G,($,F)=>{T($),delete G[F]}),(R=L.stackTotalGroup)==null||R.destroy()}}function N(){this.stacking||(this.stacking=new U(this))}function q(L,R,G,$){return!_(L)||L.x!==R||$&&L.stackKey!==$?L={x:R,index:0,key:$,stackKey:$}:L.index++,L.key=[G,R,L.index].join(","),L}function Z(){let L,R=this,G=R.yAxis,$=R.stackKey||"",F=G.stacking.stacks,H=R.processedXData,W=R.options.stacking,ne=R[W+"Stacker"];ne&&[$,"-"+$].forEach(ue=>{var Ce;let ie=H.length,oe,Se,ye;for(;ie--;)oe=H[ie],L=R.getStackIndicator(L,oe,R.index,ue),Se=(Ce=F[ue])==null?void 0:Ce[oe],(ye=Se==null?void 0:Se.points[L.key||""])&&ne.call(R,ye,Se,ie)})}function X(L,R,G){let $=R.total?100/R.total:0;L[0]=k(L[0]*$),L[1]=k(L[1]*$),this.stackedYData[G]=L[1]}function j(L){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?v.setStackedPoints.call(this,L,"group"):L.stacking.resetStacks())}function V(L,R){var Be,Ge;let G,$,F,H,W,ne,ue,ie,oe,Se=R||this.options.stacking;if(!Se||!this.reserveSpace()||({group:"xAxis"}[Se]||"yAxis")!==L.coll)return;let ye=this.processedXData,Ce=this.processedYData,K=[],Q=Ce.length,ae=this.options,ve=ae.threshold||0,J=ae.startFromThreshold?ve:0,re=ae.stack,ce=R?`${this.type},${Se}`:this.stackKey||"",ge="-"+ce,_e=this.negStacks,ze=L.stacking,Te=ze.stacks,Ie=ze.oldStacks;for(ze.stacksTouched+=1,ue=0;ue<Q;ue++){ie=ye[ue],oe=Ce[ue],ne=(G=this.getStackIndicator(G,ie,this.index)).key||"",Te[W=($=_e&&oe<(J?0:ve))?ge:ce]||(Te[W]={}),Te[W][ie]||((Be=Ie[W])!=null&&Be[ie]?(Te[W][ie]=Ie[W][ie],Te[W][ie].total=null):Te[W][ie]=new n(L,L.options.stackLabels,!!$,ie,re)),F=Te[W][ie],oe!==null?(F.points[ne]=F.points[this.index]=[D(F.cumulative,J)],_(F.cumulative)||(F.base=ne),F.touched=ze.stacksTouched,G.index>0&&this.singleStacks===!1&&(F.points[ne][0]=F.points[this.index+","+ie+",0"][0])):(delete F.points[ne],delete F.points[this.index]);let ke=F.total||0;Se==="percent"?(H=$?ce:ge,ke=_e&&((Ge=Te[H])!=null&&Ge[ie])?(H=Te[H][ie]).total=Math.max(H.total||0,ke)+Math.abs(oe)||0:k(ke+(Math.abs(oe)||0))):Se==="group"?(A(oe)&&(oe=oe[0]),oe!==null&&ke++):ke=k(ke+(oe||0)),Se==="group"?F.cumulative=(ke||1)-1:F.cumulative=k(D(F.cumulative,J)+(oe||0)),F.total=ke,oe!==null&&(F.points[ne].push(F.cumulative),K[ue]=F.cumulative,F.hasValidPoints=!0)}Se==="percent"&&(ze.usePercentage=!0),Se!=="group"&&(this.stackedYData=K),ze.oldStacks={}}class U{constructor(R){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=R}buildStacks(){let R,G,$=this.axis,F=$.series,H=$.coll==="xAxis",W=$.options.reversedStacks,ne=F.length;for(this.resetStacks(),this.usePercentage=!1,G=ne;G--;)R=F[W?G:ne-G-1],H&&R.setGroupedPoints($),R.setStackedPoints($);if(!H)for(G=0;G<ne;G++)F[G].modifyStacks();M($,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,P(this.stacks,R=>{P(R,G=>{G.cumulative=G.total})}))}resetStacks(){P(this.stacks,R=>{P(R,(G,$)=>{x(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete R[$]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var ne;let R=this.axis,G=R.chart,$=G.renderer,F=this.stacks,H=g(G,((ne=R.options.stackLabels)==null?void 0:ne.animation)||!1),W=this.stackTotalGroup=this.stackTotalGroup||$.g("stack-labels").attr({zIndex:6,opacity:0}).add();W.translate(G.plotLeft,G.plotTop),P(F,ue=>{P(ue,ie=>{ie.render(W)})}),W.animate({opacity:1},H)}}return(m||(m={})).compose=function(L,R,G){let $=R.prototype,F=G.prototype;$.getStacks||(y(L,"init",N),y(L,"destroy",I),$.getStacks=w,F.getStackIndicator=q,F.modifyStacks=Z,F.percentStacker=X,F.setGroupedPoints=j,F.setStackedPoints=V)},m}),o(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{defined:n,merge:p,isObject:m}=u;class g extends a{drawGraph(){let y=this.options,k=(this.gappedPath||this.getGraphPath).call(this),_=this.chart.styledMode;[this,...this.zones].forEach((T,M)=>{let A,x=T.graph,P=x?"animate":"attr",D=T.dashStyle||y.dashStyle;x?(x.endX=this.preventGraphAnimation?null:k.xMap,x.animate({d:k})):k.length&&(T.graph=x=this.chart.renderer.path(k).addClass("highcharts-graph"+(M?` highcharts-zone-graph-${M-1} `:" ")+(M&&T.className||"")).attr({zIndex:1}).add(this.group)),x&&!_&&(A={stroke:!M&&y.lineColor||T.color||this.color||"#cccccc","stroke-width":y.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?A.dashstyle=D:y.linecap!=="square"&&(A["stroke-linecap"]=A["stroke-linejoin"]="round"),x[P](A).shadow(M<2&&y.shadow&&p({filterUnits:"userSpaceOnUse"},m(y.shadow)?y.shadow:{}))),x&&(x.startX=k.xMap,x.isArea=k.isArea)})}getGraphPath(y,k,_){let T=this,M=T.options,A=[],x=[],P,D=M.step,w=(y=y||T.points).reversed;return w&&y.reverse(),(D={right:1,center:2}[D]||D&&3)&&w&&(D=4-D),(y=this.getValidPoints(y,!1,!(M.connectNulls&&!k&&!_))).forEach(function(I,N){let q,Z=I.plotX,X=I.plotY,j=y[N-1],V=I.isNull||typeof X!="number";(I.leftCliff||j&&j.rightCliff)&&!_&&(P=!0),V&&!n(k)&&N>0?P=!M.connectNulls:V&&!k?P=!0:(N===0||P?q=[["M",I.plotX,I.plotY]]:T.getPointSpline?q=[T.getPointSpline(y,I,N)]:D?(q=D===1?[["L",j.plotX,X]]:D===2?[["L",(j.plotX+Z)/2,j.plotY],["L",(j.plotX+Z)/2,X]]:[["L",Z,j.plotY]]).push(["L",Z,X]):q=[["L",Z,X]],x.push(I.x),D&&(x.push(I.x),D===2&&x.push(I.x)),A.push.apply(A,q),P=!1)}),A.xMap=x,T.graphPath=A,A}}return g.defaultOptions=p(a.defaultOptions,{legendSymbol:"lineMarker"}),c.registerSeriesType("line",g),g}),o(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),o(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{seriesTypes:{line:n}}=c,{extend:p,merge:m,objectEach:g,pick:v}=u;class y extends n{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:_,options:T}=this;[this,...this.zones].forEach((M,A)=>{let x={},P=M.fillColor||T.fillColor,D=M.area,w=D?"animate":"attr";D?(D.endX=this.preventGraphAnimation?null:_.xMap,D.animate({d:_})):(x.zIndex=0,(D=M.area=this.chart.renderer.path(_).addClass("highcharts-area"+(A?` highcharts-zone-area-${A-1} `:" ")+(A&&M.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(x.fill=P||M.color||this.color,x["fill-opacity"]=P?1:T.fillOpacity??.75,D.css({pointerEvents:this.stickyTracking?"none":"auto"})),D[w](x),D.startX=_.xMap,D.shiftUnit=T.step?2:1})}getGraphPath(_){let T,M,A,x=n.prototype.getGraphPath,P=this.options,D=P.stacking,w=this.yAxis,I=[],N=[],q=this.index,Z=w.stacking.stacks[this.stackKey],X=P.threshold,j=Math.round(w.getThreshold(P.threshold)),V=v(P.connectNulls,D==="percent"),U=function(H,W,ne){let ue=_[H],ie=D&&Z[ue.x].points[q],oe=ue[ne+"Null"]||0,Se=ue[ne+"Cliff"]||0,ye,Ce,K=!0;Se||oe?(ye=(oe?ie[0]:ie[1])+Se,Ce=ie[0]+Se,K=!!oe):!D&&_[W]&&_[W].isNull&&(ye=Ce=X),ye!==void 0&&(N.push({plotX:T,plotY:ye===null?j:w.getThreshold(ye),isNull:K,isCliff:!0}),I.push({plotX:T,plotY:Ce===null?j:w.getThreshold(Ce),doCurve:!1}))};_=_||this.points,D&&(_=this.getStackPoints(_));for(let H=0,W=_.length;H<W;++H)D||(_[H].leftCliff=_[H].rightCliff=_[H].leftNull=_[H].rightNull=void 0),M=_[H].isNull,T=v(_[H].rectPlotX,_[H].plotX),A=D?v(_[H].yBottom,j):j,M&&!V||(V||U(H,H-1,"left"),M&&!D&&V||(N.push(_[H]),I.push({x:H,plotX:T,plotY:A})),V||U(H,H+1,"right"));let L=x.call(this,N,!0,!0);I.reversed=!0;let R=x.call(this,I,!0,!0),G=R[0];G&&G[0]==="M"&&(R[0]=["L",G[1],G[2]]);let $=L.concat(R);$.length&&$.push(["Z"]);let F=x.call(this,N,!1,V);return this.chart.series.length>1&&D&&N.some(H=>H.isCliff)&&($.hasStackedCliffs=F.hasStackedCliffs=!0),$.xMap=L.xMap,this.areaPath=$,F}getStackPoints(_){let T=this,M=[],A=[],x=this.xAxis,P=this.yAxis,D=P.stacking.stacks[this.stackKey],w={},I=P.series,N=I.length,q=P.options.reversedStacks?1:-1,Z=I.indexOf(T);if(_=_||this.points,this.options.stacking){for(let j=0;j<_.length;j++)_[j].leftNull=_[j].rightNull=void 0,w[_[j].x]=_[j];g(D,function(j,V){j.total!==null&&A.push(V)}),A.sort(function(j,V){return j-V});let X=I.map(j=>j.visible);A.forEach(function(j,V){let U=0,L,R;if(w[j]&&!w[j].isNull)M.push(w[j]),[-1,1].forEach(function(G){let $=G===1?"rightNull":"leftNull",F=D[A[V+G]],H=0;if(F){let W=Z;for(;W>=0&&W<N;){let ne=I[W].index;!(L=F.points[ne])&&(ne===T.index?w[j][$]=!0:X[W]&&(R=D[j].points[ne])&&(H-=R[1]-R[0])),W+=q}}w[j][G===1?"rightCliff":"leftCliff"]=H});else{let G=Z;for(;G>=0&&G<N;){let $=I[G].index;if(L=D[j].points[$]){U=L[1];break}G+=q}U=v(U,0),U=P.translate(U,0,1,0,1),M.push({isNull:!0,plotX:x.translate(j,0,0,0,1),x:j,plotY:U,yBottom:U})}})}return M}}return y.defaultOptions=m(n.defaultOptions,a),p(y.prototype,{singleStacks:!1}),c.registerSeriesType("area",y),y}),o(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c){let{line:u}=a.seriesTypes,{merge:n,pick:p}=c;class m extends u{getPointSpline(v,y,k){let _,T,M,A,x=y.plotX||0,P=y.plotY||0,D=v[k-1],w=v[k+1];function I(q){return q&&!q.isNull&&q.doCurve!==!1&&!y.isCliff}if(I(D)&&I(w)){let q=D.plotX||0,Z=D.plotY||0,X=w.plotX||0,j=w.plotY||0,V=0;_=(1.5*x+q)/2.5,T=(1.5*P+Z)/2.5,M=(1.5*x+X)/2.5,A=(1.5*P+j)/2.5,M!==_&&(V=(A-T)*(M-x)/(M-_)+P-A),T+=V,A+=V,T>Z&&T>P?(T=Math.max(Z,P),A=2*P-T):T<Z&&T<P&&(T=Math.min(Z,P),A=2*P-T),A>j&&A>P?(A=Math.max(j,P),T=2*P-A):A<j&&A<P&&(A=Math.min(j,P),T=2*P-A),y.rightContX=M,y.rightContY=A,y.controlPoints={low:[_,T],high:[M,A]}}let N=["C",p(D.rightContX,D.plotX,0),p(D.rightContY,D.plotY,0),p(_,x,0),p(T,P,0),x,P];return D.rightContX=D.rightContY=void 0,N}}return m.defaultOptions=n(u.defaultOptions),a.registerSeriesType("spline",m),m}),o(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{area:n,area:{prototype:p}}=c.seriesTypes,{extend:m,merge:g}=u;class v extends a{}return v.defaultOptions=g(a.defaultOptions,n.defaultOptions),m(v.prototype,{getGraphPath:p.getGraphPath,getStackPoints:p.getStackPoints,drawGraph:p.drawGraph}),c.registerSeriesType("areaspline",v),v}),o(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),o(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g){let{animObject:v}=a,{parse:y}=c,{noop:k}=n,{clamp:_,crisp:T,defined:M,extend:A,fireEvent:x,isArray:P,isNumber:D,merge:w,pick:I,objectEach:N}=g;class q extends p{animate(X){let j,V,U=this,L=this.yAxis,R=L.pos,G=L.reversed,$=U.options,{clipOffset:F,inverted:H}=this.chart,W={},ne=H?"translateX":"translateY";X&&F?(W.scaleY=.001,V=_(L.toPixels($.threshold),R,R+L.len),H?(V+=G?-Math.floor(F[0]):Math.ceil(F[2]),W.translateX=V-L.len):(V+=G?Math.ceil(F[0]):-Math.floor(F[2]),W.translateY=V),U.clipBox&&U.setClip(),U.group.attr(W)):(j=Number(U.group.attr(ne)),U.group.animate({scaleY:1},A(v(U.options.animation),{step:function(ue,ie){U.group&&(W[ne]=j+ie.pos*(R-j),U.group.attr(W))}})))}init(X,j){super.init.apply(this,arguments);let V=this;(X=V.chart).hasRendered&&X.series.forEach(function(U){U.type===V.type&&(U.isDirty=!0)})}getColumnMetrics(){var oe,Se;let X=this,j=X.options,V=X.xAxis,U=X.yAxis,L=V.options.reversedStacks,R=V.reversed&&!L||!V.reversed&&L,G={},$,F=0;j.grouping===!1?F=1:X.chart.series.forEach(function(ye){let Ce,K=ye.yAxis,Q=ye.options;ye.type===X.type&&ye.reserveSpace()&&U.len===K.len&&U.pos===K.pos&&(Q.stacking&&Q.stacking!=="group"?(G[$=ye.stackKey]===void 0&&(G[$]=F++),Ce=G[$]):Q.grouping!==!1&&(Ce=F++),ye.columnIndex=Ce)});let H=Math.min(Math.abs(V.transA)*(!((oe=V.brokenAxis)!=null&&oe.hasBreaks)&&((Se=V.ordinal)==null?void 0:Se.slope)||j.pointRange||V.closestPointRange||V.tickInterval||1),V.len),W=H*j.groupPadding,ne=(H-2*W)/(F||1),ue=Math.min(j.maxPointWidth||V.len,I(j.pointWidth,ne*(1-2*j.pointPadding))),ie=(X.columnIndex||0)+(R?1:0);return X.columnMetrics={width:ue,offset:(ne-ue)/2+(W+ie*ne-H/2)*(R?-1:1),paddedWidth:ne,columnCount:F},X.columnMetrics}crispCol(X,j,V,U){let L=this.borderWidth,R=this.chart.inverted;return U=T(j+U,L,R)-(j=T(j,L,R)),this.options.crisp&&(V=T(X+V,L)-(X=T(X,L))),{x:X,y:j,width:V,height:U}}adjustForMissingColumns(X,j,V,U){var L;if(!V.isNull&&U.columnCount>1){let R=this.xAxis.series.filter(H=>H.visible).map(H=>H.index),G=0,$=0;N((L=this.xAxis.stacking)==null?void 0:L.stacks,H=>{if(typeof V.x=="number"){let W=H[V.x.toString()];if(W&&P(W.points[this.index])){let ne=Object.keys(W.points).filter(ue=>!ue.match(",")&&W.points[ue]&&W.points[ue].length>1).map(parseFloat).filter(ue=>R.indexOf(ue)!==-1).sort((ue,ie)=>ie-ue);G=ne.indexOf(this.index),$=ne.length}}}),G=this.xAxis.reversed?$-1-G:G;let F=($-1)*U.paddedWidth+j;X=(V.plotX||0)+F/2-j-G*U.paddedWidth}return X}translate(){let X=this,j=X.chart,V=X.options,U=X.dense=X.closestPointRange*X.xAxis.transA<2,L=X.borderWidth=I(V.borderWidth,U?0:1),R=X.xAxis,G=X.yAxis,$=V.threshold,F=I(V.minPointLength,5),H=X.getColumnMetrics(),W=H.width,ne=X.pointXOffset=H.offset,ue=X.dataMin,ie=X.dataMax,oe=X.translatedThreshold=G.getThreshold($),Se=X.barW=Math.max(W,1+2*L);V.pointPadding&&(Se=Math.ceil(Se)),p.prototype.translate.apply(X),X.points.forEach(function(ye){let Ce=I(ye.yBottom,oe),K=999+Math.abs(Ce),Q=ye.plotX||0,ae=_(ye.plotY,-K,G.len+K),ve,J=Math.min(ae,Ce),re=Math.max(ae,Ce)-J,ce=W,ge=Q+ne,_e=Se;F&&Math.abs(re)<F&&(re=F,ve=!G.reversed&&!ye.negative||G.reversed&&ye.negative,D($)&&D(ie)&&ye.y===$&&ie<=$&&(G.min||0)<$&&(ue!==ie||(G.max||0)<=$)&&(ve=!ve,ye.negative=!ye.negative),J=Math.abs(J-oe)>F?Ce-F:oe-(ve?F:0)),M(ye.options.pointWidth)&&(ge-=Math.round(((ce=_e=Math.ceil(ye.options.pointWidth))-W)/2)),V.centerInCategory&&!V.stacking&&(ge=X.adjustForMissingColumns(ge,ce,ye,H)),ye.barX=ge,ye.pointWidth=ce,ye.tooltipPos=j.inverted?[_(G.len+G.pos-j.plotLeft-ae,G.pos-j.plotLeft,G.len+G.pos-j.plotLeft),R.len+R.pos-j.plotTop-ge-_e/2,re]:[R.left-j.plotLeft+ge+_e/2,_(ae+G.pos-j.plotTop,G.pos-j.plotTop,G.len+G.pos-j.plotTop),re],ye.shapeType=X.pointClass.prototype.shapeType||"roundedRect",ye.shapeArgs=X.crispCol(ge,ye.isNull?oe:J,_e,ye.isNull?0:re)}),x(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(X,j){let V=this.options,U=this.pointAttrToOptions||{},L=U.stroke||"borderColor",R=U["stroke-width"]||"borderWidth",G,$,F,H=X&&X.color||this.color,W=X&&X[L]||V[L]||H,ne=X&&X.options.dashStyle||V.dashStyle,ue=X&&X[R]||V[R]||this[R]||0,ie=I(X&&X.opacity,V.opacity,1);X&&this.zones.length&&($=X.getZone(),H=X.options.color||$&&($.color||X.nonZonedColor)||this.color,$&&(W=$.borderColor||W,ne=$.dashStyle||ne,ue=$.borderWidth||ue)),j&&X&&(F=(G=w(V.states[j],X.options.states&&X.options.states[j]||{})).brightness,H=G.color||F!==void 0&&y(H).brighten(G.brightness).get()||H,W=G[L]||W,ue=G[R]||ue,ne=G.dashStyle||ne,ie=I(G.opacity,ie));let oe={fill:H,stroke:W,"stroke-width":ue,opacity:ie};return ne&&(oe.dashstyle=ne),oe}drawPoints(X=this.points){let j,V=this,U=this.chart,L=V.options,R=U.renderer,G=L.animationLimit||250;X.forEach(function($){let F=$.plotY,H=$.graphic,W=!!H,ne=H&&U.pointCount<G?"animate":"attr";D(F)&&$.y!==null?(j=$.shapeArgs,H&&$.hasNewShapeType()&&(H=H.destroy()),V.enabledDataSorting&&($.startXPos=V.xAxis.reversed?-(j&&j.width||0):V.xAxis.width),!H&&($.graphic=H=R[$.shapeType](j).add($.group||V.group),H&&V.enabledDataSorting&&U.hasRendered&&U.pointCount<G&&(H.attr({x:$.startXPos}),W=!0,ne="animate")),H&&W&&H[ne](w(j)),U.styledMode||H[ne](V.pointAttribs($,$.selected&&"select")).shadow($.allowShadow!==!1&&L.shadow),H&&(H.addClass($.getClassName(),!0),H.attr({visibility:$.visible?"inherit":"hidden"}))):H&&($.graphic=H.destroy())})}drawTracker(X=this.points){let j,V=this,U=V.chart,L=U.pointer,R=function(G){let $=L==null?void 0:L.getPointFromEvent(G);L&&$&&V.options.enableMouseTracking&&(L.isDirectTouch=!0,$.onMouseOver(G))};X.forEach(function(G){j=P(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),j.forEach(function($){($.div||$.element).point=G})}),V._hasTracking||(V.trackerGroups.forEach(function(G){V[G]&&(V[G].addClass("highcharts-tracker").on("mouseover",R).on("mouseout",function($){L==null||L.onTrackerMouseOut($)}).on("touchstart",R),!U.styledMode&&V.options.cursor&&V[G].css({cursor:V.options.cursor}))}),V._hasTracking=!0),x(this,"afterDrawTracker")}remove(){let X=this,j=X.chart;j.hasRendered&&j.series.forEach(function(V){V.type===X.type&&(V.isDirty=!0)}),p.prototype.remove.apply(X,arguments)}}return q.defaultOptions=w(p.defaultOptions,u),A(q.prototype,{directTouch:!0,getSymbol:k,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("column",q),q}),o(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,c,u){var n;let{getDeferredAnimation:p}=a,{format:m}=c,{defined:g,extend:v,fireEvent:y,isArray:k,isString:_,merge:T,objectEach:M,pick:A,pInt:x,splat:P}=u;return function(D){function w(){return V(this).some(L=>L==null?void 0:L.enabled)}function I(L,R,G,$,F){var ae;let{chart:H,enabledDataSorting:W}=this,ne=this.isCartesian&&H.inverted,ue=L.plotX,ie=L.plotY,oe=G.rotation||0,Se=g(ue)&&g(ie)&&H.isInsidePlot(ue,Math.round(ie),{inverted:ne,paneCoordinates:!0,series:this}),ye=oe===0&&A(G.overflow,W?"none":"justify")==="justify",Ce=this.visible&&L.visible!==!1&&g(ue)&&(L.series.forceDL||W&&!ye||Se||A(G.inside,!!this.options.stacking)&&$&&H.isInsidePlot(ue,ne?$.x+1:$.y+$.height-1,{inverted:ne,paneCoordinates:!0,series:this})),K=L.pos();if(Ce&&K){var Q;let ve=R.getBBox(),J=R.getBBox(void 0,0),re={right:1,center:.5}[G.align||0]||0,ce={bottom:1,middle:.5}[G.verticalAlign||0]||0;if($=v({x:K[0],y:Math.round(K[1]),width:0,height:0},$||{}),G.alignTo==="plotEdges"&&this.isCartesian&&($[ne?"x":"y"]=0,$[ne?"width":"height"]=((ae=this.yAxis)==null?void 0:ae.len)||0),v(G,{width:ve.width,height:ve.height}),Q=$,W&&this.xAxis&&!ye&&this.setDataLabelStartPos(L,R,F,Se,Q),R.align(T(G,{width:J.width,height:J.height}),!1,$,!1),R.alignAttr.x+=re*(J.width-ve.width),R.alignAttr.y+=ce*(J.height-ve.height),R[R.placed?"animate":"attr"]({x:R.alignAttr.x+(ve.width-J.width)/2,y:R.alignAttr.y+(ve.height-J.height)/2,rotationOriginX:(R.width||0)/2,rotationOriginY:(R.height||0)/2}),ye&&$.height>=0)this.justifyDataLabel(R,G,R.alignAttr,ve,$,F);else if(A(G.crop,!0)){let{x:ge,y:_e}=R.alignAttr;Ce=H.isInsidePlot(ge,_e,{paneCoordinates:!0,series:this})&&H.isInsidePlot(ge+ve.width-1,_e+ve.height-1,{paneCoordinates:!0,series:this})}G.shape&&!oe&&R[F?"attr":"animate"]({anchorX:K[0],anchorY:K[1]})}F&&W&&(R.placed=!1),Ce||W&&!ye?(R.show(),R.placed=!0):(R.hide(),R.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function q(L){let R=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+R});return!R&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},L):G.attr({opacity:1})),G}function Z(L){var Ce;let R;L=L||this.points;let G=this,$=G.chart,F=G.options,H=$.renderer,{backgroundColor:W,plotBackgroundColor:ne}=$.options.chart,ue=H.getContrast(_(ne)&&ne||_(W)&&W||"#000000"),ie=V(G),{animation:oe,defer:Se}=ie[0],ye=Se?p($,oe,G):{defer:0,duration:0};y(this,"drawDataLabels"),(Ce=G.hasDataLabels)!=null&&Ce.call(G)&&(R=this.initDataLabels(ye),L.forEach(K=>{var ve,J;let Q=K.dataLabels||[];P(j(ie,K.dlOptions||((ve=K.options)==null?void 0:ve.dataLabels))).forEach((re,ce)=>{let ge=re.enabled&&(K.visible||K.dataLabelOnHidden)&&(!K.isNull||K.dataLabelOnNull)&&function(je,Xe){let et=Xe.filter;if(et){let rt=et.operator,dt=je[et.property],gt=et.value;return rt===">"&&dt>gt||rt==="<"&&dt<gt||rt===">="&&dt>=gt||rt==="<="&&dt<=gt||rt==="=="&&dt==gt||rt==="==="&&dt===gt||rt==="!="&&dt!=gt||rt==="!=="&&dt!==gt}return!0}(K,re),{backgroundColor:_e,borderColor:ze,distance:Te,style:Ie={}}=re,Be,Ge,ke,me,fe={},Ae=Q[ce],De=!Ae,Pe;ge&&(Ge=A(re[K.formatPrefix+"Format"],re.format),Be=K.getLabelConfig(),ke=g(Ge)?m(Ge,Be,$):(re[K.formatPrefix+"Formatter"]||re.formatter).call(Be,re),me=re.rotation,!$.styledMode&&(Ie.color=A(re.color,Ie.color,_(G.color)?G.color:void 0,"#000000"),Ie.color==="contrast"?(_e!=="none"&&(Pe=_e),K.contrastColor=H.getContrast(Pe!=="auto"&&Pe||K.color||G.color),Ie.color=Pe||!g(Te)&&re.inside||0>x(Te||0)||F.stacking?K.contrastColor:ue):delete K.contrastColor,F.cursor&&(Ie.cursor=F.cursor)),fe={r:re.borderRadius||0,rotation:me,padding:re.padding,zIndex:1},$.styledMode||(fe.fill=_e==="auto"?K.color:_e,fe.stroke=ze==="auto"?K.color:ze,fe["stroke-width"]=re.borderWidth),M(fe,(je,Xe)=>{je===void 0&&delete fe[Xe]})),!Ae||ge&&g(ke)&&!!Ae.div==!!re.useHTML&&(Ae.rotation&&re.rotation||Ae.rotation===re.rotation)||(Ae=void 0,De=!0),ge&&g(ke)&&(Ae?fe.text=ke:(Ae=H.label(ke,0,0,re.shape,void 0,void 0,re.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+K.colorIndex+" "+(re.className||"")+(re.useHTML?" highcharts-tracker":"")),Ae&&(Ae.options=re,Ae.attr(fe),$.styledMode?Ie.width&&Ae.css({width:Ie.width,textOverflow:Ie.textOverflow}):Ae.css(Ie).shadow(re.shadow),y(Ae,"beforeAddingDataLabel",{labelOptions:re,point:K}),Ae.added||Ae.add(R),G.alignDataLabel(K,Ae,re,void 0,De),Ae.isActive=!0,Q[ce]&&Q[ce]!==Ae&&Q[ce].destroy(),Q[ce]=Ae))});let ae=Q.length;for(;ae--;)Q[ae]&&Q[ae].isActive?Q[ae].isActive=!1:((J=Q[ae])==null||J.destroy(),Q.splice(ae,1));K.dataLabel=Q[0],K.dataLabels=Q})),y(this,"afterDrawDataLabels")}function X(L,R,G,$,F,H){let W=this.chart,ne=R.align,ue=R.verticalAlign,ie=L.box?0:L.padding||0,oe=W.inverted?this.yAxis:this.xAxis,Se=oe?oe.left-W.plotLeft:0,ye=W.inverted?this.xAxis:this.yAxis,Ce=ye?ye.top-W.plotTop:0,{x:K=0,y:Q=0}=R,ae,ve;return(ae=(G.x||0)+ie+Se)<0&&(ne==="right"&&K>=0?(R.align="left",R.inside=!0):K-=ae,ve=!0),(ae=(G.x||0)+$.width-ie+Se)>W.plotWidth&&(ne==="left"&&K<=0?(R.align="right",R.inside=!0):K+=W.plotWidth-ae,ve=!0),(ae=G.y+ie+Ce)<0&&(ue==="bottom"&&Q>=0?(R.verticalAlign="top",R.inside=!0):Q-=ae,ve=!0),(ae=(G.y||0)+$.height-ie+Ce)>W.plotHeight&&(ue==="top"&&Q<=0?(R.verticalAlign="bottom",R.inside=!0):Q+=W.plotHeight-ae,ve=!0),ve&&(R.x=K,R.y=Q,L.placed=!H,L.align(R,void 0,F)),ve}function j(L,R){let G=[],$;if(k(L)&&!k(R))G=L.map(function(F){return T(F,R)});else if(k(R)&&!k(L))G=R.map(function(F){return T(L,F)});else if(k(L)||k(R)){if(k(L)&&k(R))for($=Math.max(L.length,R.length);$--;)G[$]=T(L[$],R[$])}else G=T(L,R);return G}function V(L){var G,$;let R=L.chart.options.plotOptions;return P(j(j((G=R==null?void 0:R.series)==null?void 0:G.dataLabels,($=R==null?void 0:R[L.type])==null?void 0:$.dataLabels),L.options.dataLabels))}function U(L,R,G,$,F){let H=this.chart,W=H.inverted,ne=this.xAxis,ue=ne.reversed,ie=((W?R.height:R.width)||0)/2,oe=L.pointWidth,Se=oe?oe/2:0;R.startXPos=W?F.x:ue?-ie-Se:ne.width-ie+Se,R.startYPos=W?ue?this.yAxis.height-ie+Se:-ie-Se:F.y,$?R.visibility==="hidden"&&(R.show(),R.attr({opacity:0}).animate({opacity:1})):R.attr({opacity:1}).animate({opacity:0},void 0,R.hide),H.hasRendered&&(G&&R.attr({x:R.startXPos,y:R.startYPos}),R.placed=!0)}D.compose=function(L){let R=L.prototype;R.initDataLabels||(R.initDataLabels=q,R.initDataLabelsGroup=N,R.alignDataLabel=I,R.drawDataLabels=Z,R.justifyDataLabel=X,R.setDataLabelStartPos=U,R.hasDataLabels=w)}}(n||(n={})),n}),o(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){var p;let{composed:m}=c,{series:g}=u,{merge:v,pick:y,pushUnique:k}=n;return function(_){function T(M,A,x,P,D){let w=this.chart.inverted,I=M.series,N=(I.xAxis?I.xAxis.len:this.chart.plotSizeX)||0,q=(I.yAxis?I.yAxis.len:this.chart.plotSizeY)||0,Z=M.dlBox||M.shapeArgs,X=y(M.below,M.plotY>y(this.translatedThreshold,q)),j=y(x.inside,!!this.options.stacking);if(Z){if(P=v(Z),!(x.overflow==="allow"&&x.crop===!1)){P.y<0&&(P.height+=P.y,P.y=0);let V=P.y+P.height-q;V>0&&V<P.height-1&&(P.height-=V)}w&&(P={x:q-P.y-P.height,y:N-P.x-P.width,width:P.height,height:P.width}),j||(w?(P.x+=X?0:P.width,P.width=0):(P.y+=X?P.height:0,P.height=0))}x.align=y(x.align,!w||j?"center":X?"right":"left"),x.verticalAlign=y(x.verticalAlign,w||j?"middle":X?"top":"bottom"),g.prototype.alignDataLabel.call(this,M,A,x,P,D),x.inside&&M.contrastColor&&A.css({color:M.contrastColor})}_.compose=function(M){a.compose(g),k(m,"ColumnDataLabel")&&(M.prototype.alignDataLabel=T)}}(p||(p={})),p}),o(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{extend:n,merge:p}=u;class m extends a{}return m.defaultOptions=p(a.defaultOptions,{}),n(m.prototype,{inverted:!0}),c.registerSeriesType("bar",m),m}),o(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),o(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{column:n,line:p}=c.seriesTypes,{addEvent:m,extend:g,merge:v}=u;class y extends p{applyJitter(){let _=this,T=this.options.jitter,M=this.points.length;T&&this.points.forEach(function(A,x){["x","y"].forEach(function(P,D){if(T[P]&&!A.isNull){let w=`plot${P.toUpperCase()}`,I=_[`${P}Axis`],N=T[P]*I.transA;if(I&&!I.logarithmic){let q=Math.max(0,(A[w]||0)-N),Z=Math.min(I.len,(A[w]||0)+N);A[w]=q+(Z-q)*function(X){let j=1e4*Math.sin(X);return j-Math.floor(j)}(x+D*M),P==="x"&&(A.clientX=A.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return y.defaultOptions=v(p.defaultOptions,a),g(y.prototype,{drawTracker:n.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),m(y,"afterTranslate",function(){this.applyJitter()}),c.registerSeriesType("scatter",y),y}),o(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(a,c,u){var n,p;let{deg2rad:m}=a,{fireEvent:g,isNumber:v,pick:y,relativeLength:k}=u;return(p=n||(n={})).getCenter=function(){let _=this.options,T=this.chart,M=2*(_.slicedOffset||0),A=T.plotWidth-2*M,x=T.plotHeight-2*M,P=_.center,D=Math.min(A,x),w=_.thickness,I,N=_.size,q=_.innerSize||0,Z,X;typeof N=="string"&&(N=parseFloat(N)),typeof q=="string"&&(q=parseFloat(q));let j=[y(P[0],"50%"),y(P[1],"50%"),y(N&&N<0?void 0:_.size,"100%"),y(q&&q<0?void 0:_.innerSize||0,"0%")];for(!T.angular||this instanceof c||(j[3]=0),Z=0;Z<4;++Z)X=j[Z],I=Z<2||Z===2&&/%$/.test(X),j[Z]=k(X,[A,x,D,j[2]][Z])+(I?M:0);return j[3]>j[2]&&(j[3]=j[2]),v(w)&&2*w<j[2]&&w>0&&(j[3]=j[2]-2*w),g(this,"afterGetCenter",{positions:j}),j},p.getStartAndEndRadians=function(_,T){let M=v(_)?_:0,A=v(T)&&T>M&&T-M<360?T:M+360;return{start:m*(M+-90),end:m*(A+-90)}},n}),o(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,c,u){let{setAnimation:n}=a,{addEvent:p,defined:m,extend:g,isNumber:v,pick:y,relativeLength:k}=u;class _ extends c{getConnectorPath(M){let A=M.dataLabelPosition,x=M.options||{},P=x.connectorShape,D=this.connectorShapes[P]||P;return A&&D.call(this,{...A.computed,alignment:A.alignment},A.connectorPosition,x)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(M){let A=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(A.x,A.y,A.r+M,A.r+M,{innerR:A.r-1,start:A.start,end:A.end,borderRadius:A.borderRadius})}constructor(M,A,x){super(M,A,x),this.half=0,this.name??(this.name="Slice");let P=D=>{this.slice(D.type==="select")};p(this,"select",P),p(this,"unselect",P)}isValid(){return v(this.y)&&this.y>=0}setVisible(M,A=!0){M!==this.visible&&this.update({visible:M??!this.visible},A,void 0,!1)}slice(M,A,x){let P=this.series;n(x,P.chart),A=y(A,!0),this.sliced=this.options.sliced=M=m(M)?M:!this.sliced,P.options.data[P.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return g(_.prototype,{connectorShapes:{fixedOffset:function(T,M,A){let x=M.breakAt,P=M.touchingSliceAt,D=A.softConnector?["C",T.x+(T.alignment==="left"?-5:5),T.y,2*x.x-P.x,2*x.y-P.y,x.x,x.y]:["L",x.x,x.y];return[["M",T.x,T.y],D,["L",P.x,P.y]]},straight:function(T,M){let A=M.touchingSliceAt;return[["M",T.x,T.y],["L",A.x,A.y]]},crookedLine:function(T,M,A){let{breakAt:x,touchingSliceAt:P}=M,{series:D}=this,[w,I,N]=D.center,q=N/2,{plotLeft:Z,plotWidth:X}=D.chart,j=T.alignment==="left",{x:V,y:U}=T,L=x.x;if(A.crookDistance){let G=k(A.crookDistance,1);L=j?w+q+(X+Z-w-q)*(1-G):Z+(w-q)*G}else L=w+(I-U)*Math.tan((this.angle||0)-Math.PI/2);let R=[["M",V,U]];return(j?L<=V&&L>=x.x:L>=V&&L<=x.x)&&R.push(["L",L,U]),R.push(["L",x.x,x.y],["L",P.x,P.y]),R}}}),_}),o(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),o(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y){let{getStartAndEndRadians:k}=a,{noop:_}=u,{clamp:T,extend:M,fireEvent:A,merge:x,pick:P}=y;class D extends m{animate(I){let N=this,q=N.points,Z=N.startAngleRad;I||q.forEach(function(X){let j=X.graphic,V=X.shapeArgs;j&&V&&(j.attr({r:P(X.startR,N.center&&N.center[3]/2),start:Z,end:Z}),j.animate({r:V.r,start:V.start,end:V.end},N.options.animation))})}drawEmpty(){let I,N,q=this.startAngleRad,Z=this.endAngleRad,X=this.options;this.total===0&&this.center?(I=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(I,N,this.center[1]/2,0,q,Z).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:v.arc(I,N,this.center[2]/2,0,{start:q,end:Z,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":X.borderWidth,fill:X.fillColor||"none",stroke:X.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let I=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=I[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(I,N,q,Z){let X=this.center,j=this.radii?this.radii[q.index]||0:X[2]/2,V=Z.dataLabelPosition,U=(V==null?void 0:V.distance)||0,L=Math.asin(T((I-X[1])/(j+U),-1,1));return X[0]+Math.cos(L)*(j+U)*(N?-1:1)+(U>0?(N?-1:1)*(Z.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let I,N,q,Z,X=this,j=X.chart;this.drawEmpty(),X.group&&!j.styledMode&&X.group.shadow(X.options.shadow),X.points.forEach(function(V){let U={};N=V.graphic,!V.isNull&&N?(Z=V.shapeArgs,I=V.getTranslate(),j.styledMode||(q=X.pointAttribs(V,V.selected&&"select")),V.delayedRendering?(N.setRadialReference(X.center).attr(Z).attr(I),j.styledMode||N.attr(q).attr({"stroke-linejoin":"round"}),V.delayedRendering=!1):(N.setRadialReference(X.center),j.styledMode||x(!0,U,q),x(!0,U,Z,I),N.animate(U)),N.attr({visibility:V.visible?"inherit":"hidden"}),N.addClass(V.getClassName(),!0)):N&&(V.graphic=N.destroy())})}sortByAngle(I,N){I.sort(function(q,Z){return q.angle!==void 0&&(Z.angle-q.angle)*N})}translate(I){A(this,"translate"),this.generatePoints();let N=this.options,q=N.slicedOffset,Z=k(N.startAngle,N.endAngle),X=this.startAngleRad=Z.start,j=(this.endAngleRad=Z.end)-X,V=this.points,U=N.ignoreHiddenPoint,L=V.length,R,G,$,F,H,W,ne,ue=0;for(I||(this.center=I=this.getCenter()),W=0;W<L;W++){ne=V[W],R=X+ue*j,ne.isValid()&&(!U||ne.visible)&&(ue+=ne.percentage/100),G=X+ue*j;let ie={x:I[0],y:I[1],r:I[2]/2,innerR:I[3]/2,start:Math.round(1e3*R)/1e3,end:Math.round(1e3*G)/1e3};ne.shapeType="arc",ne.shapeArgs=ie,($=(G+R)/2)>1.5*Math.PI?$-=2*Math.PI:$<-Math.PI/2&&($+=2*Math.PI),ne.slicedTranslation={translateX:Math.round(Math.cos($)*q),translateY:Math.round(Math.sin($)*q)},F=Math.cos($)*I[2]/2,H=Math.sin($)*I[2]/2,ne.tooltipPos=[I[0]+.7*F,I[1]+.7*H],ne.half=$<-Math.PI/2||$>Math.PI/2?1:0,ne.angle=$}A(this,"afterTranslate")}updateTotals(){let I=this.points,N=I.length,q=this.options.ignoreHiddenPoint,Z,X,j=0;for(Z=0;Z<N;Z++)(X=I[Z]).isValid()&&(!q||X.visible)&&(j+=X.y);for(Z=0,this.total=j;Z<N;Z++)(X=I[Z]).percentage=j>0&&(X.visible||!q)?X.y/j*100:0,X.total=j}}return D.defaultOptions=x(m.defaultOptions,p),M(D.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:c.prototype.drawTracker,getCenter:a.getCenter,getSymbol:_,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:c.prototype.pointAttribs,pointClass:n,requireSorting:!1,searchPoint:_,trackerGroups:["group","dataLabelsGroup"]}),g.registerSeriesType("pie",D),D}),o(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){var m;let{composed:g,noop:v}=c,{distribute:y}=u,{series:k}=n,{arrayMax:_,clamp:T,defined:M,pick:A,pushUnique:x,relativeLength:P}=p;return function(D){let w={radialDistributionY:function(X,j){var V;return(((V=j.dataLabelPosition)==null?void 0:V.top)||0)+X.distributeBox.pos},radialDistributionX:function(X,j,V,U,L){let R=L.dataLabelPosition;return X.getX(V<((R==null?void 0:R.top)||0)+2||V>((R==null?void 0:R.bottom)||0)-2?U:V,j.half,j,L)},justify:function(X,j,V,U){var L;return U[0]+(X.half?-1:1)*(V+(((L=j.dataLabelPosition)==null?void 0:L.distance)||0))},alignToPlotEdges:function(X,j,V,U){let L=X.getBBox().width;return j?L+U:V-L-U},alignToConnectors:function(X,j,V,U){let L=0,R;return X.forEach(function(G){(R=G.dataLabel.getBBox().width)>L&&(L=R)}),j?L+U:V-L-U}};function I(X,j){let{center:V,options:U}=this,L=V[2]/2,R=X.angle||0,G=Math.cos(R),$=Math.sin(R),F=V[0]+G*L,H=V[1]+$*L,W=Math.min((U.slicedOffset||0)+(U.borderWidth||0),j/5);return{natural:{x:F+G*j,y:H+$*j},computed:{},alignment:j<0?"center":X.half?"right":"left",connectorPosition:{breakAt:{x:F+G*W,y:H+$*W},touchingSliceAt:{x:F,y:H}},distance:j}}function N(){var Ce;let X=this,j=X.points,V=X.chart,U=V.plotWidth,L=V.plotHeight,R=V.plotLeft,G=Math.round(V.chartWidth/3),$=X.center,F=$[2]/2,H=$[1],W=[[],[]],ne=[0,0,0,0],ue=X.dataLabelPositioners,ie,oe,Se,ye=0;X.visible&&((Ce=X.hasDataLabels)!=null&&Ce.call(X))&&(j.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{Q.shortened&&(Q.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),Q.shortened=!1)})}),k.prototype.drawDataLabels.apply(X),j.forEach(K=>{(K.dataLabels||[]).forEach((Q,ae)=>{var ce;let ve=$[2]/2,J=Q.options,re=P((J==null?void 0:J.distance)||0,ve);ae===0&&W[K.half].push(K),!M((ce=J==null?void 0:J.style)==null?void 0:ce.width)&&Q.getBBox().width>G&&(Q.css({width:Math.round(.7*G)+"px"}),Q.shortened=!0),Q.dataLabelPosition=this.getDataLabelPosition(K,re),ye=Math.max(ye,re)})}),W.forEach((K,Q)=>{let ae=K.length,ve=[],J,re,ce=0,ge;ae&&(X.sortByAngle(K,Q-.5),ye>0&&(J=Math.max(0,H-F-ye),re=Math.min(H+F+ye,V.plotHeight),K.forEach(_e=>{(_e.dataLabels||[]).forEach(ze=>{var Ie;let Te=ze.dataLabelPosition;Te&&Te.distance>0&&(Te.top=Math.max(0,H-F-Te.distance),Te.bottom=Math.min(H+F+Te.distance,V.plotHeight),ce=ze.getBBox().height||21,ze.lineHeight=V.renderer.fontMetrics(ze.text||ze).h+2*ze.padding,_e.distributeBox={target:(((Ie=ze.dataLabelPosition)==null?void 0:Ie.natural.y)||0)-Te.top+ze.lineHeight/2,size:ce,rank:_e.y},ve.push(_e.distributeBox))})}),y(ve,ge=re+ce-J,ge/5)),K.forEach(_e=>{(_e.dataLabels||[]).forEach(ze=>{let Te=ze.options||{},Ie=_e.distributeBox,Be=ze.dataLabelPosition,Ge=(Be==null?void 0:Be.natural.y)||0,ke=Te.connectorPadding||0,me=ze.lineHeight||21,fe=(me-ze.getBBox().height)/2,Ae=0,De=Ge,Pe="inherit";if(Be){if(M(Ie)&&Be.distance>0&&(Ie.pos===void 0?Pe="hidden":(Se=Ie.size,De=ue.radialDistributionY(_e,ze))),Te.justify)Ae=ue.justify(_e,ze,F,$);else switch(Te.alignTo){case"connectors":Ae=ue.alignToConnectors(K,Q,U,R);break;case"plotEdges":Ae=ue.alignToPlotEdges(ze,Q,U,R);break;default:Ae=ue.radialDistributionX(X,_e,De-fe,Ge,ze)}if(Be.attribs={visibility:Pe,align:Be.alignment},Be.posAttribs={x:Ae+(Te.x||0)+({left:ke,right:-ke}[Be.alignment]||0),y:De+(Te.y||0)-me/2},Be.computed.x=Ae,Be.computed.y=De-fe,A(Te.crop,!0)){let je;Ae-(oe=ze.getBBox().width)<ke&&Q===1?(je=Math.round(oe-Ae+ke),ne[3]=Math.max(je,ne[3])):Ae+oe>U-ke&&Q===0&&(je=Math.round(Ae+oe-U+ke),ne[1]=Math.max(je,ne[1])),De-Se/2<0?ne[0]=Math.max(Math.round(-De+Se/2),ne[0]):De+Se/2>L&&(ne[2]=Math.max(Math.round(De+Se/2-L),ne[2])),Be.sideOverflow=je}}})}))}),(_(ne)===0||this.verifyDataLabelOverflow(ne))&&(this.placeDataLabels(),this.points.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{var re;let{connectorColor:ae,connectorWidth:ve=1}=Q.options||{},J=Q.dataLabelPosition;if(ve){let ce;ie=Q.connector,J&&J.distance>0?(ce=!ie,ie||(Q.connector=ie=V.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+K.colorIndex+(K.className?" "+K.className:"")).add(X.dataLabelsGroup)),V.styledMode||ie.attr({"stroke-width":ve,stroke:ae||K.color||"#666666"}),ie[ce?"attr":"animate"]({d:K.getConnectorPath(Q)}),ie.attr({visibility:(re=J.attribs)==null?void 0:re.visibility})):ie&&(Q.connector=ie.destroy())}})})))}function q(){this.points.forEach(X=>{(X.dataLabels||[]).forEach(j=>{var U;let V=j.dataLabelPosition;V?(V.sideOverflow&&(j.css({width:Math.max(j.getBBox().width-V.sideOverflow,0)+"px",textOverflow:(((U=j.options)==null?void 0:U.style)||{}).textOverflow||"ellipsis"}),j.shortened=!0),j.attr(V.attribs),j[j.moved?"animate":"attr"](V.posAttribs),j.moved=!0):j&&j.attr({y:-9999})}),delete X.distributeBox},this)}function Z(X){let j=this.center,V=this.options,U=V.center,L=V.minSize||80,R=L,G=V.size!==null;return!G&&(U[0]!==null?R=Math.max(j[2]-Math.max(X[1],X[3]),L):(R=Math.max(j[2]-X[1]-X[3],L),j[0]+=(X[3]-X[1])/2),U[1]!==null?R=T(R,L,j[2]-Math.max(X[0],X[2])):(R=T(R,L,j[2]-X[0]-X[2]),j[1]+=(X[0]-X[2])/2),R<j[2]?(j[2]=R,j[3]=Math.min(V.thickness?Math.max(0,R-2*V.thickness):Math.max(0,P(V.innerSize||0,R)),R),this.translate(j),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}D.compose=function(X){if(a.compose(k),x(g,"PieDataLabel")){let j=X.prototype;j.dataLabelPositioners=w,j.alignDataLabel=v,j.drawDataLabels=N,j.getDataLabelPosition=I,j.placeDataLabels=q,j.verifyDataLabelOverflow=Z}}}(m||(m={})),m}),o(t,"Core/Geometry/GeometryUtilities.js",[],function(){var a,c;return(c=a||(a={})).getCenterOfPoints=function(u){let n=u.reduce((p,m)=>(p.x+=m.x,p.y+=m.y,p),{x:0,y:0});return{x:n.x/u.length,y:n.y/u.length}},c.getDistanceBetweenPoints=function(u,n){return Math.sqrt(Math.pow(n.x-u.x,2)+Math.pow(n.y-u.y,2))},c.getAngleBetweenPoints=function(u,n){return Math.atan2(n.x-u.x,n.y-u.y)},c.pointInPolygon=function({x:u,y:n},p){let m=p.length,g,v,y=!1;for(g=0,v=m-1;g<m;v=g++){let[k,_]=p[g],[T,M]=p[v];_>n!=M>n&&u<(T-k)*(n-_)/(M-_)+k&&(y=!y)}return y},a}),o(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(a,c){let{pointInPolygon:u}=a,{addEvent:n,fireEvent:p,objectEach:m,pick:g}=c;function v(_){let T=_.length,M=(q,Z)=>!(Z.x>=q.x+q.width||Z.x+Z.width<=q.x||Z.y>=q.y+q.height||Z.y+Z.height<=q.y),A=(q,Z)=>{for(let X of q)if(u({x:X[0],y:X[1]},Z))return!0;return!1},x,P,D,w,I,N=!1;for(let q=0;q<T;q++)(x=_[q])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=function(Z){var X,j;if(Z&&(!Z.alignAttr||Z.placed)){let V=Z.box?0:Z.padding||0,U=Z.alignAttr||{x:Z.attr("x"),y:Z.attr("y")},L=Z.getBBox();return Z.width=L.width,Z.height=L.height,{x:U.x+(((X=Z.parentGroup)==null?void 0:X.translateX)||0)+V,y:U.y+(((j=Z.parentGroup)==null?void 0:j.translateY)||0)+V,width:(Z.width||0)-2*V,height:(Z.height||0)-2*V,polygon:L==null?void 0:L.polygon}}}(x));_.sort((q,Z)=>(Z.labelrank||0)-(q.labelrank||0));for(let q=0;q<T;++q){w=(P=_[q])&&P.absoluteBox;let Z=w==null?void 0:w.polygon;for(let X=q+1;X<T;++X){I=(D=_[X])&&D.absoluteBox;let j=!1;if(w&&I&&P!==D&&P.newOpacity!==0&&D.newOpacity!==0&&P.visibility!=="hidden"&&D.visibility!=="hidden"){let V=I.polygon;if(Z&&V&&Z!==V?A(Z,V)&&(j=!0):M(w,I)&&(j=!0),j){let U=P.labelrank<D.labelrank?P:D,L=U.text;U.newOpacity=0,L!=null&&L.element.querySelector("textPath")&&L.hide()}}}}for(let q of _)y(q,this)&&(N=!0);N&&p(this,"afterHideAllOverlappingLabels")}function y(_,T){let M,A,x=!1;return _&&(A=_.newOpacity,_.oldOpacity!==A&&(_.hasClass("highcharts-data-label")?(_[A?"removeClass":"addClass"]("highcharts-data-label-hidden"),M=function(){T.styledMode||_.css({pointerEvents:A?"auto":"none"})},x=!0,_[_.isOld?"animate":"attr"]({opacity:A},void 0,M),p(T,"afterHideOverlappingLabel")):_.attr({opacity:A})),_.isOld=!0),x}function k(){var M;let _=this,T=[];for(let A of _.labelCollectors||[])T=T.concat(A());for(let A of _.yAxis||[])A.stacking&&A.options.stackLabels&&!A.options.stackLabels.allowOverlap&&m(A.stacking.stacks,x=>{m(x,P=>{P.label&&T.push(P.label)})});for(let A of _.series||[])if(A.visible&&((M=A.hasDataLabels)!=null&&M.call(A))){let x=P=>{for(let D of P)D.visible&&(D.dataLabels||[]).forEach(w=>{var N;let I=w.options||{};w.labelrank=g(I.labelrank,D.labelrank,(N=D.shapeArgs)==null?void 0:N.height),I.allowOverlap??Number(I.distance)>0?(w.oldOpacity=w.opacity,w.newOpacity=1,y(w,_)):T.push(w)})};x(A.nodes||[]),x(A.points)}this.hideOverlappingLabels(T)}return{compose:function(_){let T=_.prototype;T.hideOverlappingLabels||(T.hideOverlappingLabels=v,n(_,"render",k))}}}),o(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{defaultOptions:n}=a,{noop:p}=c,{addEvent:m,extend:g,isObject:v,merge:y,relativeLength:k}=u,_={radius:0,scope:"stack",where:void 0},T=p,M=p;function A(I,N,q,Z,X={}){let j=T(I,N,q,Z,X),{innerR:V=0,r:U=q,start:L=0,end:R=0}=X;if(X.open||!X.borderRadius)return j;let G=R-L,$=Math.sin(G/2),F=Math.max(Math.min(k(X.borderRadius||0,U-V),(U-V)/2,U*$/(1+$)),0),H=Math.min(F,G/Math.PI*2*V),W=j.length-1;for(;W--;)(function(ne,ue,ie){let oe,Se,ye,Ce=ne[ue],K=ne[ue+1];if(K[0]==="Z"&&(K=ne[0]),(Ce[0]==="M"||Ce[0]==="L")&&K[0]==="A"?(oe=Ce,Se=K,ye=!0):Ce[0]==="A"&&(K[0]==="M"||K[0]==="L")&&(oe=K,Se=Ce),oe&&Se&&Se.params){let Q=Se[1],ae=Se[5],ve=Se.params,{start:J,end:re,cx:ce,cy:ge}=ve,_e=ae?Q-ie:Q+ie,ze=_e?Math.asin(ie/_e):0,Te=ae?ze:-ze,Ie=Math.cos(ze)*_e;ye?(ve.start=J+Te,oe[1]=ce+Ie*Math.cos(J),oe[2]=ge+Ie*Math.sin(J),ne.splice(ue+1,0,["A",ie,ie,0,0,1,ce+Q*Math.cos(ve.start),ge+Q*Math.sin(ve.start)])):(ve.end=re-Te,Se[6]=ce+Q*Math.cos(ve.end),Se[7]=ge+Q*Math.sin(ve.end),ne.splice(ue+1,0,["A",ie,ie,0,0,1,ce+Ie*Math.cos(re),ge+Ie*Math.sin(re)])),Se[4]=Math.abs(ve.end-ve.start)<Math.PI?0:1}})(j,W,W>1?H:F);return j}function x(){var I,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:q,yAxis:Z}=this,X=q.stacking==="percent",j=(N=(I=n.plotOptions)==null?void 0:I[this.type])==null?void 0:N.borderRadius,V=P(q.borderRadius,v(j)?j:{}),U=Z.options.reversed;for(let L of this.points){let{shapeArgs:R}=L;if(L.shapeType==="roundedRect"&&R){let{width:G=0,height:$=0,y:F=0}=R,H=F,W=$;if(V.scope==="stack"&&L.stackTotal){let oe=Z.translate(X?100:L.stackTotal,!1,!0,!1,!0),Se=Z.translate(q.threshold||0,!1,!0,!1,!0),ye=this.crispCol(0,Math.min(oe,Se),0,Math.abs(oe-Se));H=ye.y,W=ye.height}let ne=(L.negative?-1:1)*(U?-1:1)==-1,ue=V.where;!ue&&this.is("waterfall")&&Math.abs((L.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(ue="all"),ue||(ue="end");let ie=Math.min(k(V.radius,G),G/2,ue==="all"?$/2:1/0)||0;ue==="end"&&(ne&&(H-=ie),W+=ie),g(R,{brBoxHeight:W,brBoxY:H,r:ie})}}}}function P(I,N){return v(I)||(I={radius:I||0}),y(_,N,I)}function D(){let I=P(this.options.borderRadius);for(let N of this.points){let q=N.shapeArgs;q&&(q.borderRadius=k(I.radius,(q.r||0)-(q.innerR||0)))}}function w(I,N,q,Z,X={}){let j=M(I,N,q,Z,X),{r:V=0,brBoxHeight:U=Z,brBoxY:L=N}=X,R=N-L,G=L+U-(N+Z),$=R-V>-.1?0:V,F=G-V>-.1?0:V,H=Math.max($&&R,0),W=Math.max(F&&G,0),ne=[I+$,N],ue=[I+q-$,N],ie=[I+q,N+$],oe=[I+q,N+Z-F],Se=[I+q-F,N+Z],ye=[I+F,N+Z],Ce=[I,N+Z-F],K=[I,N+$],Q=(ae,ve)=>Math.sqrt(Math.pow(ae,2)-Math.pow(ve,2));if(H){let ae=Q($,$-H);ne[0]-=ae,ue[0]+=ae,ie[1]=K[1]=N+$-H}if(Z<$-H){let ae=Q($,$-H-Z);ie[0]=oe[0]=I+q-$+ae,Se[0]=Math.min(ie[0],Se[0]),ye[0]=Math.max(oe[0],ye[0]),Ce[0]=K[0]=I+$-ae,ie[1]=K[1]=N+Z}if(W){let ae=Q(F,F-W);Se[0]+=ae,ye[0]-=ae,oe[1]=Ce[1]=N+Z-F+W}if(Z<F-W){let ae=Q(F,F-W-Z);ie[0]=oe[0]=I+q-F+ae,ue[0]=Math.min(ie[0],ue[0]),ne[0]=Math.max(oe[0],ne[0]),Ce[0]=K[0]=I+F-ae,oe[1]=Ce[1]=N}return j.length=0,j.push(["M",...ne],["L",...ue],["A",$,$,0,0,1,...ie],["L",...oe],["A",F,F,0,0,1,...Se],["L",...ye],["A",F,F,0,0,1,...Ce],["L",...K],["A",$,$,0,0,1,...ne],["Z"]),j}return{compose:function(I,N,q){let Z=I.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let X=q.prototype.symbols;m(I,"afterColumnTranslate",x,{order:9}),m(Z,"afterTranslate",D),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),T=X.arc,M=X.roundedRect,X.arc=A,X.roundedRect=w}},optionsToObject:P}}),o(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(a){var c;let{diffObjects:u,extend:n,find:p,merge:m,pick:g,uniqueKey:v}=a;return function(y){function k(T,M){let A=T.condition;(A.callback||function(){return this.chartWidth<=g(A.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=g(A.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=g(A.minWidth,0)&&this.chartHeight>=g(A.minHeight,0)}).call(this)&&M.push(T._id)}function _(T,M){let A=this.options.responsive,x=this.currentResponsive,P=[],D;!M&&A&&A.rules&&A.rules.forEach(N=>{N._id===void 0&&(N._id=v()),this.matchResponsiveRule(N,P)},this);let w=m(...P.map(N=>p((A||{}).rules||[],q=>q._id===N)).map(N=>N&&N.chartOptions));w.isResponsiveOptions=!0,P=P.toString()||void 0;let I=x&&x.ruleIds;P===I||(x&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(x.undoOptions,T,!0),this.updatingResponsive=!1),P?((D=u(w,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:P,mergedOptions:w,undoOptions:D},this.updatingResponsive||this.update(w,T,!0)):this.currentResponsive=void 0)}y.compose=function(T){let M=T.prototype;return M.matchResponsiveRule||n(M,{matchResponsiveRule:k,setResponsive:_}),T}}(c||(c={})),c}),o(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(a,c,u,n,p,m,g,v,y,k,_,T,M,A,x,P,D,w,I,N,q,Z,X,j,V,U,L,R,G,$,F,H,W,ne,ue,ie){return a.AST=m,a.Axis=M,a.Chart=X,a.Color=ue,a.DataLabel=F,a.Fx=n,a.HTMLElement=T,a.Legend=q,a.LegendSymbol=Z,a.OverlappingDataLabels=a.OverlappingDataLabels||H,a.PlotLineOrBand=P,a.Point=I,a.Pointer=N,a.RendererRegistry=v,a.Series=L,a.SeriesRegistry=R,a.StackItem=U,a.SVGElement=k,a.SVGRenderer=_,a.Templating=g,a.Tick=D,a.Time=ie,a.Tooltip=w,a.animate=p.animate,a.animObject=p.animObject,a.chart=X.chart,a.color=ue.parse,a.dateFormat=g.dateFormat,a.defaultOptions=u.defaultOptions,a.distribute=y.distribute,a.format=g.format,a.getDeferredAnimation=p.getDeferredAnimation,a.getOptions=u.getOptions,a.numberFormat=g.numberFormat,a.seriesType=R.seriesType,a.setAnimation=p.setAnimation,a.setOptions=u.setOptions,a.stop=p.stop,a.time=u.defaultTime,a.timers=n.timers,W.compose(a.Series,a.SVGElement,a.SVGRenderer),G.compose(a.Series.types.column),F.compose(a.Series),A.compose(a.Axis),T.compose(a.SVGRenderer),q.compose(a.Chart),x.compose(a.Axis),H.compose(a.Chart),$.compose(a.Series.types.pie),P.compose(a.Chart,a.Axis),N.compose(a.Chart),ne.compose(a.Chart),j.compose(a.Axis,a.Chart,a.Series),V.compose(a.Axis,a.Chart,a.Series),w.compose(a.Pointer),c.extend(a,c),a}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(bS);var Hj=bS.exports;const Ph=Qu(Hj);var vS={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function o(a,c,u,n){a.hasOwnProperty(c)||(a[c]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:a[c]}})))}o(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{doc:u,win:n}=a,{css:p}=c,m=n.EventTarget&&new n.EventTarget||"none";function g(y){if(typeof n.MouseEvent=="function")return new n.MouseEvent(y.type,y);if(u.createEvent){let k=u.createEvent("MouseEvent");if(k.initMouseEvent)return k.initMouseEvent(y.type,y.bubbles,y.cancelable,y.view||n,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),k}return v(y.type)}function v(y,k,_){let T=k||{x:0,y:0};if(typeof n.MouseEvent=="function")return new n.MouseEvent(y,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:_||m,view:n,detail:y==="click"?1:0,screenX:T.x,screenY:T.y,clientX:T.x,clientY:T.y});if(u.createEvent){let M=u.createEvent("MouseEvent");if(M.initMouseEvent)return M.initMouseEvent(y,!0,!0,n,y==="click"?1:0,T.x,T.y,T.x,T.y,!1,!1,!1,!1,0,null),M}return{type:y}}return{addClass:function(y,k){y.classList?y.classList.add(k):0>y.className.indexOf(k)&&(y.className+=" "+k)},cloneMouseEvent:g,cloneTouchEvent:function(y){let k=T=>{let M=[];for(let A=0;A<T.length;++A){let x=T.item(A);x&&M.push(x)}return M};if(typeof n.TouchEvent=="function"){let T=new n.TouchEvent(y.type,{touches:k(y.touches),targetTouches:k(y.targetTouches),changedTouches:k(y.changedTouches),ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,altKey:y.altKey,metaKey:y.metaKey,bubbles:y.bubbles,cancelable:y.cancelable,composed:y.composed,detail:y.detail,view:y.view});return y.defaultPrevented&&T.preventDefault(),T}let _=g(y);return _.touches=y.touches,_.changedTouches=y.changedTouches,_.targetTouches=y.targetTouches,_},escapeStringForHTML:function(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(y){return u.getElementById(y)},getFakeMouseEvent:v,getHeadingTagNameForElement:function(y){let k=A=>"h"+Math.min(6,parseInt(A.slice(1),10)+1),_=A=>/^H[1-6]$/i.test(A),T=A=>{let x=A;for(;x=x.previousSibling;){let P=x.tagName||"";if(_(P))return P}return""},M=A=>{let x=T(A);if(x)return k(x);let P=A.parentElement;if(!P)return"p";let D=P.tagName;return _(D)?k(D):M(P)};return M(y)},removeChildNodes:function(y){for(;y.lastChild;)y.removeChild(y.lastChild)},removeClass:function(y,k){y.classList?y.classList.remove(k):y.className=y.className.replace(RegExp(k,"g"),"")},removeElement:function(y){y&&y.parentNode&&y.parentNode.removeChild(y)},reverseChildNodes:function(y){let k=y.childNodes.length;for(;k--;)y.appendChild(y.childNodes[k])},simulatedEventTarget:m,stripHTMLTagsFromString:function(y,k=!1){return typeof y=="string"?k?y.replace(/<\/?[^>]+(>|$)/g,""):y.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):y},visuallyHideElement:function(y){p(y,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),o(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(a,c){var u;let{format:n}=a,{getNestedProperty:p,pick:m}=c;return function(g){function v(k,_,T){let M=(w,I)=>{let N=w.slice(I||0),q=N.indexOf("{"),Z=N.indexOf("}");if(q>-1&&Z>q)return{statement:N.substring(q+1,Z),begin:I+q+1,end:I+Z}},A=[],x,P,D=0;do x=M(k,D),(P=k.substring(D,x&&x.begin-1)).length&&A.push({value:P,type:"constant"}),x&&A.push({value:x.statement,type:"statement"}),D=x?x.end+1:D+1;while(x);return A.forEach(w=>{w.type==="statement"&&(w.value=function(I,N){let q,Z,X=I.indexOf("#each("),j=I.indexOf("#plural("),V=I.indexOf("["),U=I.indexOf("]");if(X>-1){let R=I.slice(X).indexOf(")")+X,G=I.substring(0,X),$=I.substring(R+1),F=I.substring(X+6,R).split(","),H=Number(F[1]),W;if(Z="",q=p(F[0],N)){W=(H=isNaN(H)?q.length:H)<0?q.length+H:Math.min(H,q.length);for(let ne=0;ne<W;++ne)Z+=G+q[ne]+$}return Z.length?Z:""}if(j>-1){var L;let R=I.slice(j).indexOf(")")+j,G=I.substring(j+8,R).split(",");switch(Number(p(G[0],N))){case 0:Z=m(G[4],G[1]);break;case 1:Z=m(G[2],G[1]);break;case 2:Z=m(G[3],G[1]);break;default:Z=G[1]}return Z?(L=Z).trim&&L.trim()||L.replace(/^\s+|\s+$/g,""):""}if(V>-1){let R,G=I.substring(0,V),$=Number(I.substring(V+1,U));return q=p(G,N),!isNaN($)&&q&&($<0?(R=q[q.length+$])===void 0&&(R=q[0]):(R=q[$])===void 0&&(R=q[q.length-1])),R!==void 0?R:""}return"{"+I+"}"}(w.value,_))}),n(A.reduce((w,I)=>w+I.value,""),_,T)}function y(k,_){let T=k.split("."),M=this.options.lang,A=0;for(;A<T.length;++A)M=M&&M[T[A]];return typeof M=="string"?v(M,_,this):""}g.compose=function(k){let _=k.prototype;_.langFormat||(_.langFormat=y)},g.i18nFormat=v}(u||(u={})),u}),o(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,c,u){let{doc:n}=a,{stripHTMLTagsFromString:p}=c,{defined:m,find:g,fireEvent:v}=u;function y(_){if(_.points&&_.points.length){let T=g(_.points,M=>!!M.graphic);return T&&T.graphic&&T.graphic.element}}function k(_){let T=y(_);return T&&T.parentNode||_.graph&&_.graph.element||_.group&&_.group.element}return{fireEventOnWrappedOrUnwrappedElement:function _(T,M){let A=M.type,x=T.hcEvents;n.createEvent&&(T.dispatchEvent||T.fireEvent)?T.dispatchEvent?T.dispatchEvent(M):T.fireEvent(A,M):x&&x[A]?v(T,A,M):T.element&&_(T.element,M)},getChartTitle:function(_){return p(_.options.title.text||_.langFormat("accessibility.defaultChartTitle",{chart:_}),_.renderer.forExport)},getAxisDescription:function(_){var T,M;return _&&(((T=_.options.accessibility)==null?void 0:T.description)||((M=_.axisTitle)==null?void 0:M.textStr)||_.options.id||_.categories&&"categories"||_.dateTime&&"Time"||"values")},getAxisRangeDescription:function(_){let T=_.options||{};return T.accessibility&&T.accessibility.rangeDescription!==void 0?T.accessibility.rangeDescription:_.categories?function(M){let A=M.chart;return M.dataMax&&M.dataMin?A.langFormat("accessibility.axis.rangeCategories",{chart:A,axis:M,numCategories:M.dataMax-M.dataMin+1}):""}(_):_.dateTime&&(_.min===0||_.dataMin===0)?function(M){let A=M.chart,x={},P=M.dataMin||M.min||0,D=M.dataMax||M.max||0,w="Seconds";x.Seconds=(D-P)/1e3,x.Minutes=x.Seconds/60,x.Hours=x.Minutes/60,x.Days=x.Hours/24,["Minutes","Hours","Days"].forEach(function(N){x[N]>2&&(w=N)});let I=x[w].toFixed(w!=="Seconds"&&w!=="Minutes"?1:0);return A.langFormat("accessibility.axis.timeRange"+w,{chart:A,axis:M,range:I.replace(".0","")})}(_):function(M){let A=M.chart,x=A.options,P=x&&x.accessibility&&x.accessibility.screenReaderSection.axisRangeDateFormat||"",D={min:M.dataMin||M.min||0,max:M.dataMax||M.max||0},w=function(I){return M.dateTime?A.time.dateFormat(P,D[I]):D[I].toString()};return A.langFormat("accessibility.axis.rangeFromTo",{chart:A,axis:M,rangeFrom:w("min"),rangeTo:w("max")})}(_)},getPointFromXY:function(_,T,M){let A=_.length,x;for(;A--;)if(x=g(_[A].points||[],function(P){return P.x===T&&P.y===M}))return x},getSeriesFirstPointElement:y,getSeriesFromName:function(_,T){return T?(_.series||[]).filter(function(M){return M.name===T}):_.series},getSeriesA11yElement:k,unhideChartElementFromAT:function _(T,M){M.setAttribute("aria-hidden",!1),M!==T.renderTo&&M.parentNode&&M.parentNode!==n.body&&(Array.prototype.forEach.call(M.parentNode.childNodes,function(A){A.hasAttribute("aria-hidden")||A.setAttribute("aria-hidden",!0)}),_(T,M.parentNode))},hideSeriesFromAT:function(_){let T=k(_);T&&T.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(_){let T=_.series.xAxis,M=_.series.yAxis,A=T&&T.scrollbar?T:M,x=A&&A.scrollbar;if(x&&m(x.to)&&m(x.from)){let P=x.to-x.from,D=function(w,I){if(!m(w.dataMin)||!m(w.dataMax))return 0;let N=w.toPixels(w.dataMin),q=w.toPixels(w.dataMax),Z=w.coll==="xAxis"?"x":"y";return(w.toPixels(I[Z]||0)-N)/(q-N)}(A,_);x.updatePosition(D-P/2,D+P/2),v(x,"changed",{from:x.from,to:x.to,trigger:"scrollbar",DOMEvent:null})}}}}),o(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c){let{doc:u}=a,{removeElement:n}=c;return class{constructor(){this.elements=[]}createElement(){let p=u.createElement.apply(u,arguments);return this.elements.push(p),p}removeElement(p){n(p),this.elements.splice(this.elements.indexOf(p),1)}destroyCreatedElements(){this.elements.forEach(function(p){n(p)}),this.elements=[]}}}),o(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{addEvent:u}=c;return class{constructor(){this.eventRemovers=[]}addEvent(){let n=u.apply(a,arguments);return this.eventRemovers.push({element:arguments[0],remover:n}),n}removeEvent(n){let p=this.eventRemovers.map(m=>m.remover).indexOf(n);this.eventRemovers[p].remover(),this.eventRemovers.splice(p,1)}removeAddedEvents(){this.eventRemovers.map(n=>n.remover).forEach(n=>n()),this.eventRemovers=[]}}}),o(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n){let{fireEventOnWrappedOrUnwrappedElement:p}=a,{getFakeMouseEvent:m}=n;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(g,v){this.chart=g,this.eventProvider=new u,this.domElementProvider=new c,this.proxyProvider=v,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(g,v,y,k){return this.eventProvider.addEvent(g,v,y,k)}createElement(g,v){return this.domElementProvider.createElement(g,v)}fakeClickEvent(g){p(g,m("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),o(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(a){let{find:c}=a;return class{constructor(u,n){this.chart=u,this.keyCodeMap=n.keyCodeMap||[],this.validate=n.validate,this.init=n.init,this.terminate=n.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(u){let n=u.which||u.keyCode,p=this.response.noHandler,m=c(this.keyCodeMap,function(g){return g[0].indexOf(n)>-1});return m?p=m[1].call(this,n,u):n===9&&(p=this.response[u.shiftKey?"prev":"next"]),p}}}),o(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n,p){let{unhideChartElementFromAT:m,getChartTitle:g}=u,{doc:v}=n,{stripHTMLTagsFromString:y}=p;return class extends a{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let k=this.chart,_="highcharts-title-"+k.index,T=y(k.langFormat("accessibility.svgContainerTitle",{chartTitle:g(k)}));if(T.length){let M=this.svgTitleElement=this.svgTitleElement||v.createElementNS("http://www.w3.org/2000/svg","title");M.textContent=T,M.id=_,k.renderTo.insertBefore(M,k.renderTo.firstChild)}}setSVGContainerLabel(){let k=this.chart,_=k.langFormat("accessibility.svgContainerLabel",{chartTitle:g(k)});k.renderer.box&&_.length&&k.renderer.box.setAttribute("aria-label",_)}setGraphicContainerAttrs(){let k=this.chart,_=k.langFormat("accessibility.graphicContainerLabel",{chartTitle:g(k)});_.length&&k.container.setAttribute("aria-label",_)}setRenderToAttrs(){let k=this.chart,_=k.options.accessibility.landmarkVerbosity!=="disabled",T=k.langFormat("accessibility.chartContainerLabel",{title:g(k),chart:k});T&&(k.renderTo.setAttribute("role",_?"region":"group"),k.renderTo.setAttribute("aria-label",T))}makeCreditsAccessible(){let k=this.chart,_=k.credits;_&&(_.textStr&&_.element.setAttribute("aria-label",k.langFormat("accessibility.credits",{creditsStr:y(_.textStr,k.renderer.forExport)})),m(k,_.element))}getKeyboardNavigation(){let k=this.chart;return new c(k,{keyCodeMap:[],validate:function(){return!0},init:function(){let _=k.accessibility;_&&_.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),o(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(a){var c;let{addEvent:u,pick:n}=a;return function(p){let m=["x","y","transform","width","height","r","d","stroke-width"];function g(){let _=this.focusElement,T=this.options.accessibility.keyboardNavigation.focusBorder;_&&(_.removeFocusBorder(),T.enabled&&_.addFocusBorder(T.margin,{stroke:T.style.color,strokeWidth:T.style.lineWidth,r:T.style.borderRadius}))}function v(_,T){let M=this.options.accessibility.keyboardNavigation.focusBorder,A=T||_.element;A&&A.focus&&(A.hcEvents&&A.hcEvents.focusin||u(A,"focusin",function(){}),A.focus(),M.hideBrowserFocusOutline&&(A.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=_,this.renderFocusBorder()}function y(_,T){this.focusBorder&&this.removeFocusBorder();let M=this.getBBox(),A=n(_,3),x=this.parentGroup,P=this.scaleX||x&&x.scaleX,D=this.scaleY||x&&x.scaleY,w=(P?!D:D)?Math.abs(P||D||1):(Math.abs(P||1)+Math.abs(D||1))/2;M.x+=this.translateX?this.translateX:0,M.y+=this.translateY?this.translateY:0;let I=M.x-A,N=M.y-A,q=M.width+2*A,Z=M.height+2*A,X=!!this.text;if(this.element.nodeName==="text"||X){let j,V,U=!!this.rotation,L=X?{x:U?1:0,y:0}:(j=0,V=0,this.attr("text-anchor")==="middle"?j=V=.5:this.rotation?j=.25:V=.75,{x:j,y:V}),R=+this.attr("x"),G=+this.attr("y");if(isNaN(R)||(I=R-M.width*L.x-A),isNaN(G)||(N=G-M.height*L.y-A),X&&U){let $=q;q=Z,Z=$,isNaN(R)||(I=R-M.height*L.x-A),isNaN(G)||(N=G-M.width*L.y-A)}}this.focusBorder=this.renderer.rect(I,N,q,Z,parseInt((T&&T.r||0).toString(),10)/w).addClass("highcharts-focus-border").attr({zIndex:99}).add(x),this.renderer.styledMode||this.focusBorder.attr({stroke:T&&T.stroke,"stroke-width":(T&&T.strokeWidth||0)/w}),function(j,...V){j.focusBorderUpdateHooks||(j.focusBorderUpdateHooks={},m.forEach(U=>{let L=U+"Setter",R=j[L]||j._defaultSetter;j.focusBorderUpdateHooks[L]=R,j[L]=function(){let G=R.apply(j,arguments);return j.addFocusBorder.apply(j,V),G}}))}(this,_,T),function(j){if(j.focusBorderDestroyHook)return;let V=j.destroy;j.destroy=function(){return j.focusBorder&&j.focusBorder.destroy&&j.focusBorder.destroy(),V.apply(j,arguments)},j.focusBorderDestroyHook=V}(this)}function k(){var _;_=this,_.focusBorderUpdateHooks&&(Object.keys(_.focusBorderUpdateHooks).forEach(T=>{let M=_.focusBorderUpdateHooks[T];M===_._defaultSetter?delete _[T]:_[T]=M}),delete _.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}p.compose=function(_,T){let M=_.prototype,A=T.prototype;M.renderFocusBorder||(M.renderFocusBorder=g,M.setFocusToElement=v),A.addFocusBorder||(A.addFocusBorder=y,A.removeFocusBorder=k)}}(c||(c={})),c}),o(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{doc:m}=u,{addClass:g,visuallyHideElement:v}=n,{attr:y}=p;return class{constructor(k,_){this.chart=k,this.domElementProvider=new c,this.announceRegion=this.addAnnounceRegion(_)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(k){a.setElementHTML(this.announceRegion,k),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=a.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(k){let _=this.chart.announcerContainer||this.createAnnouncerContainer(),T=this.domElementProvider.createElement("div");return y(T,{"aria-hidden":!1,"aria-live":k,"aria-atomic":!0}),this.chart.styledMode?g(T,"highcharts-visually-hidden"):v(T),_.appendChild(T),T}createAnnouncerContainer(){let k=this.chart,_=m.createElement("div");return y(_,{"aria-hidden":!1,class:"highcharts-announcer-container"}),_.style.position="relative",k.renderTo.insertBefore(_,k.renderTo.firstChild),k.announcerContainer=_,_}}}),o(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(a){let{escapeStringForHTML:c,stripHTMLTagsFromString:u}=a;function n(v){return(v.annotations||[]).reduce((y,k)=>(k.options&&k.options.visible!==!1&&(y=y.concat(k.labels)),y),[])}function p(v){return v.options&&v.options.accessibility&&v.options.accessibility.description||v.graphic&&v.graphic.text&&v.graphic.text.textStr||""}function m(v){let y=v.options&&v.options.accessibility&&v.options.accessibility.description;if(y)return y;let k=v.chart,_=p(v),T=v.points,M=w=>w.graphic&&w.graphic.element&&w.graphic.element.getAttribute("aria-label")||"",A=T.filter(w=>!!w.graphic).map(w=>{let I=w.accessibility&&w.accessibility.valueDescription||M(w),N=w&&w.series.name||"";return(N?N+", ":"")+"data point "+I}).filter(w=>!!w),x=A.length,P=x>1?"MultiplePoints":x?"SinglePoint":"NoPoints",D={annotationText:_,annotation:v,numPoints:x,annotationPoint:A[0],additionalAnnotationPoints:A.slice(1)};return k.langFormat("accessibility.screenReaderSection.annotations.description"+P,D)}function g(v){return n(v).map(y=>{let k=c(u(m(y),v.renderer.forExport));return k?`<li>${k}</li>`:""})}return{getAnnotationsInfoHTML:function(v){let y=v.annotations;return y&&y.length?`<ul style="list-style-type: none">${g(v).join(" ")}</ul>`:""},getAnnotationLabelDescription:m,getAnnotationListItems:g,getPointAnnotationTexts:function(v){let y=n(v.series.chart).filter(k=>k.points.indexOf(v)>-1);return y.length?y.map(k=>`${p(k)}`):[]}}}),o(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y,k){let{getAnnotationsInfoHTML:_}=n,{getAxisDescription:T,getAxisRangeDescription:M,getChartTitle:A,unhideChartElementFromAT:x}=m,{format:P}=g,{doc:D}=v,{addClass:w,getElement:I,getHeadingTagNameForElement:N,stripHTMLTagsFromString:q,visuallyHideElement:Z}=y,{attr:X,pick:j,replaceNested:V}=k;function U(L){return V(L,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends c{constructor(){super(...arguments),this.screenReaderSections={}}init(){let L=this.chart,R=this;this.initRegionsDefinitions(),this.addEvent(L,"aftergetTableAST",function(G){R.onDataTableCreated(G)}),this.addEvent(L,"afterViewData",function(G){G.wasHidden&&(R.dataTableDiv=G.element,setTimeout(function(){R.focusDataTable()},300))}),this.addEvent(L,"afterHideData",function(){R.viewDataTableButton&&R.viewDataTableButton.setAttribute("aria-expanded","false")}),L.exporting&&this.addEvent(L,"afterPrint",function(){R.updateAllScreenReaderSections()}),this.announcer=new u(L,"assertive")}initRegionsDefinitions(){let L=this,R=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let $=R.screenReaderSection.beforeChartFormatter;return $?$(G):L.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,$){$.renderTo.insertBefore(G,$.renderTo.firstChild)},afterInserted:function(){L.sonifyButtonId!==void 0&&L.initSonifyButton(L.sonifyButtonId),L.dataTableButtonId!==void 0&&L.initDataTableButton(L.dataTableButtonId)}},after:{element:null,buildContent:function(G){let $=R.screenReaderSection.afterChartFormatter;return $?$(G):L.defaultAfterChartFormatter()},insertIntoDOM:function(G,$){$.renderTo.insertBefore(G,$.container.nextSibling)},afterInserted:function(){L.chart.accessibility&&R.keyboardNavigation.enabled&&L.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let L=this;Object.keys(this.screenReaderSections).forEach(function(R){L.updateScreenReaderSection(R)})}getLinkedDescriptionElement(){let L=this.chart.options.accessibility.linkedDescription;if(!L)return;if(typeof L!="string")return L;let R=P(L,this.chart),G=D.querySelectorAll(R);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let L=this.linkedDescriptionElement;L&&(L.setAttribute("aria-hidden","true"),w(L,"highcharts-linked-description"))}updateScreenReaderSection(L){let R=this.chart,G=this.screenReaderSections[L],$=G.buildContent(R),F=G.element=G.element||this.createElement("div"),H=F.firstChild||this.createElement("div");$?(this.setScreenReaderSectionAttribs(F,L),p.setElementHTML(H,$),F.appendChild(H),G.insertIntoDOM(F,R),R.styledMode?w(H,"highcharts-visually-hidden"):Z(H),x(R,H),G.afterInserted&&G.afterInserted()):(F.parentNode&&F.parentNode.removeChild(F),G.element=null)}setScreenReaderSectionAttribs(L,R){let G=this.chart,$=G.langFormat("accessibility.screenReaderSection."+R+"RegionLabel",{chart:G,chartTitle:A(G)});X(L,{id:`highcharts-screen-reader-region-${R}-${G.index}`,"aria-label":$||void 0}),L.style.position="relative",$&&L.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.beforeChartFormat;if(!R)return"";let G=this.getAxesDescription(),$=L.sonify&&L.options.sonification&&L.options.sonification.enabled,F="highcharts-a11y-sonify-data-btn-"+L.index,H="hc-linkto-highcharts-data-table-"+L.index,W=_(L),ne=L.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:L}),ue={headingTagName:N(L.renderTo),chartTitle:A(L),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:$?this.getSonifyButtonText(F):"",viewTableButton:L.getCSV?this.getDataTableButtonText(H):"",annotationsTitle:W?ne:"",annotationsList:W},ie=a.i18nFormat(R,ue,L);return this.dataTableButtonId=H,this.sonifyButtonId=F,U(ie)}defaultAfterChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.afterChartFormat;if(!R)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return U(a.i18nFormat(R,G,L))}getLinkedDescription(){let L=this.linkedDescriptionElement;return q(L&&L.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let L=this.chart.options,R=L.caption,G=R&&R.text,$=this.getLinkedDescription();return L.accessibility.description||$||G||""}getTypeDescriptionText(){let L=this.chart;return L.types?L.options.accessibility.typeDescription||function(R,G){let $=G[0],F=R.series&&R.series[0]||{},H=R.mapView&&R.mapView.geoMap&&R.mapView.geoMap.title,W={numSeries:R.series.length,numPoints:F.points&&F.points.length,chart:R,mapTitle:H};return $?$==="map"||$==="tiledwebmap"?W.mapTitle?R.langFormat("accessibility.chartTypes.mapTypeDescription",W):R.langFormat("accessibility.chartTypes.unknownMap",W):R.types.length>1?R.langFormat("accessibility.chartTypes.combinationChart",W):function(ne,ue,ie){let oe=ue[0],Se=ne.langFormat("accessibility.seriesTypeDescriptions."+oe,ie),ye=ne.series&&ne.series.length<2?"Single":"Multiple";return(ne.langFormat("accessibility.chartTypes."+oe+ye,ie)||ne.langFormat("accessibility.chartTypes.default"+ye,ie))+(Se?" "+Se:"")}(R,G,W):R.langFormat("accessibility.chartTypes.emptyChart",W)}(L,L.types):""}getDataTableButtonText(L){let R=this.chart;return'<button id="'+L+'">'+R.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:R,chartTitle:A(R)})+"</button>"}getSonifyButtonText(L){let R=this.chart;return R.options.sonification&&R.options.sonification.enabled===!1?"":'<button id="'+L+'">'+R.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:R,chartTitle:A(R)})+"</button>"}getSubtitleText(){let L=this.chart.options.subtitle;return q(L&&L.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let L=I(`highcharts-end-of-chart-marker-${this.chart.index}`);if(L)return L.outerHTML;let R=this.chart,G=R.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:R});return'<div id="highcharts-end-of-chart-marker-'+R.index+'">'+G+"</div>"}onDataTableCreated(L){let R=this.chart;if(R.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=L.tree.attributes||{};G.tabindex=-1,G.summary=R.langFormat("accessibility.table.tableSummary",{chart:R}),L.tree.attributes=G}}focusDataTable(){let L=this.dataTableDiv,R=L&&L.getElementsByTagName("table")[0];R&&R.focus&&R.focus()}initSonifyButton(L){let R=this.sonifyButton=I(L),G=this.chart,$=F=>{R&&(R.setAttribute("aria-hidden","true"),R.setAttribute("aria-label","")),F.preventDefault(),F.stopPropagation();let H=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(H),setTimeout(()=>{R&&(R.removeAttribute("aria-hidden"),R.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};R&&G&&(R.setAttribute("tabindex",-1),R.onclick=function(F){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||$).call(this,F,G)})}initDataTableButton(L){let R=this.viewDataTableButton=I(L),G=this.chart,$=L.replace("hc-linkto-","");R&&(X(R,{tabindex:-1,"aria-expanded":!!I($)}),R.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let L=this.chart,R=function(ne,ue){let ie=L[ne];return ie.length>1||ie[0]&&j(ie[0].options.accessibility&&ie[0].options.accessibility.enabled,ue)},G=!!L.types&&0>L.types.indexOf("map")&&0>L.types.indexOf("treemap")&&0>L.types.indexOf("tilemap"),$=!!L.hasCartesianSeries,F=R("xAxis",!L.angular&&$&&G),H=R("yAxis",$&&G),W={};return F&&(W.xAxis=this.getAxisDescriptionText("xAxis")),H&&(W.yAxis=this.getAxisDescriptionText("yAxis")),W}getAxisDescriptionText(L){let R=this.chart,G=R[L];return R.langFormat("accessibility.axis."+L+"Description"+(G.length>1?"Plural":"Singular"),{chart:R,names:G.map(function($){return T($)}),ranges:G.map(function($){return M($)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),o(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n,p){let{attr:m}=a,{getChartTitle:g,unhideChartElementFromAT:v}=n,{getFakeMouseEvent:y}=p;function k(T){return T.exportSVGElements&&T.exportSVGElements[0]}class _ extends c{init(){let M=this.chart,A=this;this.addEvent(M,"exportMenuShown",function(){A.onMenuShown()}),this.addEvent(M,"exportMenuHidden",function(){A.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let M=this.chart.exportContextMenu;M&&M.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let M=this.chart,A=M.exportContextMenu;A&&(this.addAccessibleContextMenuAttribs(),v(M,A)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(M){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",M)}onChartRender(){let M=this.chart,A=M.focusElement,x=M.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&A&&A===M.exportingGroup&&(A.focusBorder?M.setFocusToElement(A,this.exportButtonProxy.innerElement):x&&x.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let M=this.chart,A=this.proxyProvider,x=k(M);(function(P){let D=P.options.exporting,w=k(P);return!!(D&&D.enabled!==!1&&D.accessibility&&D.accessibility.enabled&&w&&w.element)})(M)&&x&&(this.exportButtonProxy=A.addProxyElement("chartMenu",{click:x},"button",{"aria-label":M.langFormat("accessibility.exporting.menuButtonLabel",{chart:M,chartTitle:g(M)}),"aria-expanded":!1,title:M.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let M=this.chart,A=M.exportDivElements;if(A&&A.length){A.forEach(P=>{P&&(P.tagName!=="LI"||P.children&&P.children.length?P.setAttribute("aria-hidden","true"):P.setAttribute("tabindex",-1))});let x=A[0]&&A[0].parentNode;x&&m(x,{"aria-hidden":void 0,"aria-label":M.langFormat("accessibility.exporting.chartMenuLabel",{chart:M}),role:"list"})}}getKeyboardNavigation(){let M=this.keyCodes,A=this.chart,x=this;return new u(A,{keyCodeMap:[[[M.left,M.up],function(){return x.onKbdPrevious(this)}],[[M.right,M.down],function(){return x.onKbdNext(this)}],[[M.enter,M.space],function(){return x.onKbdClick(this)}]],validate:function(){return!!A.exporting&&A.options.exporting.enabled!==!1&&A.options.exporting.accessibility.enabled!==!1},init:function(){let P=x.exportButtonProxy,D=x.chart.exportingGroup;P&&D&&A.setFocusToElement(D,P.innerElement)},terminate:function(){A.hideExportMenu()}})}onKbdPrevious(M){let A=this.chart,x=A.options.accessibility,P=M.response,D=A.highlightedExportItemIx||0;for(;D--;)if(A.highlightExportItem(D))return P.success;return x.keyboardNavigation.wrapAround?(A.highlightLastExportItem(),P.success):P.prev}onKbdNext(M){let A=this.chart,x=A.options.accessibility,P=M.response;for(let D=(A.highlightedExportItemIx||0)+1;D<A.exportDivElements.length;++D)if(A.highlightExportItem(D))return P.success;return x.keyboardNavigation.wrapAround?(A.highlightExportItem(0),P.success):P.next}onKbdClick(M){let A=this.chart,x=A.exportDivElements[A.highlightedExportItemIx],P=k(A).element;return A.openMenu?this.fakeClickEvent(x):(this.fakeClickEvent(P),A.highlightExportItem(0)),M.response.success}}return function(T){function M(){let D=k(this);if(D){let w=D.element;w.onclick&&w.onclick(y("click"))}}function A(){let D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(w=>{w&&w.className==="highcharts-menu-item"&&w.onmouseout&&w.onmouseout(y("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(D){let w=this.exportDivElements&&this.exportDivElements[D],I=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(w&&w.tagName==="LI"&&!(w.children&&w.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return w.focus&&N&&w.focus(),I&&I.onmouseout&&I.onmouseout(y("mouseout")),w.onmouseover&&w.onmouseover(y("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function P(){if(this.exportDivElements){let D=this.exportDivElements.length;for(;D--;)if(this.highlightExportItem(D))return!0}return!1}T.compose=function(D){let w=D.prototype;w.hideExportMenu||(w.hideExportMenu=A,w.highlightExportItem=x,w.highlightLastExportItem=P,w.showExportMenu=M)}}(_),_}),o(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n,p){let{doc:m,win:g}=a,{addEvent:v,defined:y,fireEvent:k}=u,{getElement:_,simulatedEventTarget:T}=p;class M{constructor(x,P){this.currentModuleIx=NaN,this.modules=[],this.init(x,P)}init(x,P){let D=this.eventProvider=new n;this.chart=x,this.components=P,this.modules=[],this.currentModuleIx=0,this.update(),D.addEvent(this.tabindexContainer,"keydown",w=>this.onKeydown(w)),D.addEvent(this.tabindexContainer,"focus",w=>this.onFocus(w)),["mouseup","touchend"].forEach(w=>D.addEvent(m,w,I=>this.onMouseUp(I))),["mousedown","touchstart"].forEach(w=>D.addEvent(x.renderTo,w,()=>{this.isClickingChart=!0}))}update(x){let P=this.chart.options.accessibility,D=P&&P.keyboardNavigation,w=this.components;this.updateContainerTabindex(),D&&D.enabled&&x&&x.length?(this.modules=x.reduce(function(I,N){let q=w[N].getKeyboardNavigation();return I.concat(q)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let x=_(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),x?(this.makeElementAnExitAnchor(x),this.exitAnchor=x):this.createExitAnchor()}move(x){let P=this.modules&&this.modules[this.currentModuleIx];P&&P.terminate&&P.terminate(x),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=x;let D=this.modules&&this.modules[this.currentModuleIx];if(D){if(D.validate&&!D.validate())return this.move(x);if(D.init)return D.init(x),!0}return this.currentModuleIx=0,this.exiting=!0,x>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(x){let P=this.chart,D=x.relatedTarget&&P.container.contains(x.relatedTarget),w=P.options.accessibility,I=w&&w.keyboardNavigation;if(I&&I.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!D){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(x){if(delete this.isClickingChart,!this.keyboardReset&&x.relatedTarget!==T){let P=this.chart;if(!x.target||!P.container.contains(x.target)){let D=this.modules&&this.modules[this.currentModuleIx||0];D&&D.terminate&&D.terminate(),this.currentModuleIx=0}P.focusElement&&(P.focusElement.removeFocusBorder(),delete P.focusElement),this.keyboardReset=!0}}onKeydown(x){let P,D=x||g.event,w=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],I=D.target;if((!I||I.nodeName!=="INPUT"||I.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,w)){let N=w.run(D);N===w.response.success?P=!0:N===w.response.prev?P=this.move(-1):N===w.response.next&&(P=this.move(1)),P&&(D.preventDefault(),D.stopPropagation())}}updateContainerTabindex(){let x,P=this.chart.options.accessibility,D=P&&P.keyboardNavigation,w=!(D&&D.enabled===!1),I=this.chart,N=I.container;I.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),x=I.renderTo):x=N,this.tabindexContainer=x;let q=x.getAttribute("tabindex");w&&!q?x.setAttribute("tabindex","0"):w||I.container.removeAttribute("tabindex")}createExitAnchor(){let x=this.chart,P=this.exitAnchor=m.createElement("div");x.renderTo.appendChild(P),this.makeElementAnExitAnchor(P)}makeElementAnExitAnchor(x){let P=this.tabindexContainer.getAttribute("tabindex")||0;x.setAttribute("class","highcharts-exit-anchor"),x.setAttribute("tabindex",P),x.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(x)}removeExitAnchor(){if(this.exitAnchor){let x=this.eventProvider.eventRemovers.find(P=>P.element===this.exitAnchor);x&&y(x.remover)&&this.eventProvider.removeEvent(x.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(x){let P=this.chart,D=this;this.eventProvider.addEvent(x,"focus",function(w){let I=w||g.event,N=!(I.relatedTarget&&P.container.contains(I.relatedTarget)||D.exiting);if(P.focusElement&&delete P.focusElement,N){if(D.tabbingInBackwards=!0,D.tabindexContainer.focus(),delete D.tabbingInBackwards,I.preventDefault(),D.modules&&D.modules.length){D.currentModuleIx=D.modules.length-1;let q=D.modules[D.currentModuleIx];q&&q.validate&&!q.validate()?D.move(-1):q&&q.init(-1)}}else D.exiting=!1})}getFirstValidModuleIx(){let x=this.modules.length;for(let P=0;P<x;++P){let D=this.modules[P];if(!D.validate||D.validate())return P}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(A){function x(){let D=this;k(this,"dismissPopupContent",{},function(){D.tooltip&&D.tooltip.hide(0),D.hideExportMenu()})}function P(D){(D.which||D.keyCode)===27&&a.charts&&a.charts.forEach(w=>{w&&w.dismissPopupContent&&w.dismissPopupContent()})}A.compose=function(D){c.compose(D);let w=D.prototype;return w.dismissPopupContent||(w.dismissPopupContent=x,v(m,"keydown",P)),D}}(M),M}),o(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n,p,m,g,v){let{animObject:y}=a,{doc:k}=c,{addEvent:_,fireEvent:T,isNumber:M,pick:A,syncTimeout:x}=n,{getChartTitle:P}=g,{stripHTMLTagsFromString:D,addClass:w,removeClass:I}=v;function N(X){let j=X.legend&&X.legend.allItems,V=X.options.legend.accessibility||{},U=X.colorAxis&&X.colorAxis.some(L=>!L.dataClasses||!L.dataClasses.length);return!!(j&&j.length&&!U&&V.enabled!==!1)}function q(X,j){let V=j.legendItem||{};for(let U of(j.setState(X?"hover":"",!0),["group","label","symbol"])){let L=V[U],R=L&&L.element||L;R&&T(R,X?"mouseover":"mouseout")}}class Z extends p{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let j=this;this.recreateProxies(),this.addEvent(u,"afterScroll",function(){this.chart===j.chart&&(j.proxyProvider.updateGroupProxyElementPositions("legend"),j.updateLegendItemProxyVisibility(),j.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(j.highlightedLegendItemIx))}),this.addEvent(u,"afterPositionItem",function(V){this.chart===j.chart&&this.chart.renderer&&j.updateProxyPositionForItem(V.item)}),this.addEvent(u,"afterRender",function(){this.chart===j.chart&&this.chart.renderer&&j.recreateProxies()&&x(()=>j.proxyProvider.updateGroupProxyElementPositions("legend"),y(A(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let j,V=this.chart,U=V.legend,L=U.allItems||[],R=U.currentPage||1,G=U.clipHeight||0;L.forEach($=>{if($.a11yProxyElement){let F=U.pages&&U.pages.length,H=$.a11yProxyElement.element,W=!1;if(j=$.legendItem||{},F){let ne=j.pageIx||0;W=(j.y||0)+(j.label?Math.round(j.label.getBBox().height):0)-U.pages[ne]>G||ne!==R-1}W?V.styledMode?w(H,"highcharts-a11y-invisible"):H.style.visibility="hidden":(I(H,"highcharts-a11y-invisible"),H.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(j){let V=this.chart,U=V.legend,L=(U.currentPage||1)+j,R=U.pages||[];if(L>0&&L<=R.length){let G=0;for(let $ of U.allItems)(($.legendItem||{}).pageIx||0)+1===L&&V.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(j){j.a11yProxyElement&&j.a11yProxyElement.refreshPosition()}recreateProxies(){let j=k.activeElement,V=this.proxyGroup,U=j&&V&&V.contains(j);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),U&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let j=this.chart,V=D((j.legend&&j.legend.options.title&&j.legend.options.title.text||"").replace(/<br ?\/?>/g," "),j.renderer.forExport),U=j.langFormat("accessibility.legend.legendLabel"+(V?"":"NoTitle"),{chart:j,legendTitle:V,chartTitle:P(j)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":U})}addLegendProxyGroup(){let j=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:j})}proxyLegendItems(){let j,V=this;((this.chart.legend||{}).allItems||[]).forEach(U=>{(j=U.legendItem||{}).label&&j.label.element&&V.proxyLegendItem(U)})}proxyLegendItem(j){let V=j.legendItem||{};if(!V.label||!V.group)return;let U=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:D(j.name,this.chart.renderer.forExport),item:j}),L={tabindex:-1,"aria-pressed":j.visible,"aria-label":U},R=V.group.div?V.label:V.group;j.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:V.label,visual:R.element},"button",L)}getKeyboardNavigation(){let j=this.keyCodes,V=this,U=this.chart;return new m(U,{keyCodeMap:[[[j.left,j.right,j.up,j.down],function(L){return V.onKbdArrowKey(this,L)}],[[j.enter,j.space],function(){return V.onKbdClick(this)}],[[j.pageDown,j.pageUp],function(L){let R=L===j.pageDown?1:-1;return V.highlightAdjacentLegendPage(R),this.response.success}]],validate:function(){return V.shouldHaveLegendNavigation()},init:function(){U.highlightLegendItem(0),V.highlightedLegendItemIx=0},terminate:function(){V.highlightedLegendItemIx=-1,U.legend.allItems.forEach(L=>q(!1,L))}})}onKbdArrowKey(j,V){let{keyCodes:{left:U,up:L},highlightedLegendItemIx:R,chart:G}=this,$=G.legend.allItems.length,F=G.options.accessibility.keyboardNavigation.wrapAround,H=V===U||V===L?-1:1;return G.highlightLegendItem(R+H)?this.highlightedLegendItemIx+=H:F&&$>1&&(this.highlightedLegendItemIx=H>0?0:$-1,G.highlightLegendItem(this.highlightedLegendItemIx)),j.response.success}onKbdClick(j){let V=this.chart.legend.allItems[this.highlightedLegendItemIx];return V&&V.a11yProxyElement&&V.a11yProxyElement.click(),j.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let j=this.chart,V=(j.options.legend||{}).accessibility||{};return!!(j.legend.display&&V.keyboardNavigation&&V.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(X){function j(U){let L=this.legend.allItems,R=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=L[U],$=(G==null?void 0:G.legendItem)||{};if(G){M(R)&&L[R]&&q(!1,L[R]),function(W,ne){let ue=(W.allItems[ne].legendItem||{}).pageIx,ie=W.currentPage;ue!==void 0&&ue+1!==ie&&W.scroll(1+ue-ie)}(this.legend,U);let F=$.label,H=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return F&&F.element&&H&&this.setFocusToElement(F,H),q(!0,G),!0}return!1}function V(U){let L=this.chart.options.accessibility,R=U.item;L.enabled&&R&&R.a11yProxyElement&&R.a11yProxyElement.innerElement.setAttribute("aria-pressed",U.visible?"true":"false")}X.compose=function(U,L){let R=U.prototype;R.highlightLegendItem||(R.highlightLegendItem=j,_(L,"afterColorizeItem",V))}}(Z),Z}),o(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let u,{isTouchDevice:n}=a,{addEvent:p,merge:m,pick:g}=c,v=[];function y(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function k(){var q;let P,D,w,I=this.legend,N=this.navigator;if(N){P=I&&I.options,D=N.xAxis,w=N.yAxis;let{scrollbarHeight:Z,scrollButtonSize:X}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Z-N.height:this.spacing[3]+Z,N.top=this.plotTop+X):(N.left=g(D.left,this.plotLeft+X),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Z-(((q=this.scrollbar)==null?void 0:q.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(P&&P.verticalAlign==="bottom"&&P.layout!=="proximate"&&P.enabled&&!P.floating?I.legendHeight+g(P.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&w&&(this.inverted?D.options.left=w.options.left=N.left:D.options.top=w.options.top=N.top,D.setAxisSize(),w.setAxisSize())}}function _(P){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this),g(P.redraw,!0)&&this.redraw(P.animation))}function T(){let P=this.options;(P.navigator.enabled||P.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this))}function M(){let P=this.options,D=P.navigator,w=P.rangeSelector;if((D&&D.enabled||w&&w.enabled)&&(!n&&this.zooming.type==="x"||n&&this.zooming.pinchType==="x"))return!1}function A(P){let D=P.navigator;if(D&&P.xAxis[0]){let w=P.xAxis[0].getExtremes();D.render(w.min,w.max)}}function x(P){let D=P.options.navigator||{},w=P.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||w.enabled)&&(m(!0,this.options.navigator,D),m(!0,this.options.scrollbar,w),delete P.options.navigator,delete P.options.scrollbar)}return{compose:function(P,D){if(c.pushUnique(v,P)){let w=P.prototype;u=D,w.callbacks.push(A),p(P,"afterAddSeries",y),p(P,"afterSetChartSize",k),p(P,"afterUpdate",_),p(P,"beforeRender",T),p(P,"beforeShowResetZoom",M),p(P,"update",x)}}}}),o(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{isTouchDevice:u}=a,{addEvent:n,correctFloat:p,defined:m,isNumber:g,pick:v}=c;function y(){this.navigatorAxis||(this.navigatorAxis=new _(this))}function k(T){let M,A=this.chart,x=A.options,P=x.navigator,D=this.navigatorAxis,w=A.zooming.pinchType,I=x.rangeSelector,N=A.zooming.type;if(this.isXAxis&&(P!=null&&P.enabled||I!=null&&I.enabled)){if(N==="y"&&T.trigger==="zoom")M=!1;else if((T.trigger==="zoom"&&N==="xy"||u&&w==="xy")&&this.options.range){let q=D.previousZoom;m(T.min)?D.previousZoom=[this.min,this.max]:q&&(T.min=q[0],T.max=q[1],D.previousZoom=void 0)}}M!==void 0&&T.preventDefault()}class _{static compose(M){M.keepProps.includes("navigatorAxis")||(M.keepProps.push("navigatorAxis"),n(M,"init",y),n(M,"setExtremes",k))}constructor(M){this.axis=M}destroy(){this.axis=void 0}toFixedRange(M,A,x,P){let D=this.axis,w=(D.pointRange||0)/2,I=v(x,D.translate(M,!0,!D.horiz)),N=v(P,D.translate(A,!0,!D.horiz));return m(x)||(I=p(I+w)),m(P)||(N=p(N-w)),g(I)&&g(N)||(I=N=void 0),{min:I,max:N}}}return _}),o(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(a,c){let{parse:u}=a,{seriesTypes:n}=c;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:u("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:n.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),o(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(a,c){let{relativeLength:u}=c;return{"navigator-handle":function(n,p,m,g,v={}){let y=v.width?v.width/2:m,k=u(v.borderRadius||0,Math.min(2*y,g));return[["M",-1.5,(g=v.height||g)/2-3.5],["L",-1.5,g/2+4.5],["M",.5,g/2-3.5],["L",.5,g/2+4.5],...a.rect(-y-1,.5,2*y+1,g,{r:k})]}}}),o(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(a){let{defined:c}=a;return{setFixedRange:function(u){let n=this.xAxis[0];c(n.dataMax)&&c(n.dataMin)&&u?this.fixedRange=Math.min(u,n.dataMax-n.dataMin):this.fixedRange=u}}}),o(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v){let{setOptions:y}=a,{composed:k}=c,{getRendererType:_}=m,{setFixedRange:T}=g,{addEvent:M,extend:A,pushUnique:x}=v;function P(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,w,I){u.compose(w),x(k,"Navigator")&&(D.prototype.setFixedRange=T,A(_().prototype.symbols,p),M(I,"afterUpdate",P),y({navigator:n}))}}}),o(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){var u;let{composed:n}=a,{addEvent:p,defined:m,pick:g,pushUnique:v}=c;return function(y){let k;function _(x){let P=g(x.options&&x.options.min,x.min),D=g(x.options&&x.options.max,x.max);return{axisMin:P,axisMax:D,scrollMin:m(x.dataMin)?Math.min(P,x.min,x.dataMin,g(x.threshold,1/0)):P,scrollMax:m(x.dataMax)?Math.max(D,x.max,x.dataMax,g(x.threshold,-1/0)):D}}function T(){let x=this.scrollbar,P=x&&!x.options.opposite,D=this.horiz?2:P?3:1;x&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=x.size+(x.options.margin||0))}function M(){let x=this;x.options&&x.options.scrollbar&&x.options.scrollbar.enabled&&(x.options.scrollbar.vertical=!x.horiz,x.options.startOnTick=x.options.endOnTick=!1,x.scrollbar=new k(x.chart.renderer,x.options.scrollbar,x.chart),p(x.scrollbar,"changed",function(P){let D,w,{axisMin:I,axisMax:N,scrollMin:q,scrollMax:Z}=_(x),X=Z-q;if(m(I)&&m(N))if(x.horiz&&!x.reversed||!x.horiz&&x.reversed?(D=q+X*this.to,w=q+X*this.from):(D=q+X*(1-this.from),w=q+X*(1-this.to)),this.shouldUpdateExtremes(P.DOMType)){let j=P.DOMType!=="mousemove"&&P.DOMType!=="touchmove"&&void 0;x.setExtremes(w,D,!0,j,P)}else this.setRange(this.from,this.to)}))}function A(){let x,P,D,{scrollMin:w,scrollMax:I}=_(this),N=this.scrollbar,q=this.axisTitleMargin+(this.titleOffset||0),Z=this.chart.scrollbarsOffsets,X=this.options.margin||0;if(N&&Z){if(this.horiz)this.opposite||(Z[1]+=q),N.position(this.left,this.top+this.height+2+Z[1]-(this.opposite?X:0),this.width,this.height),this.opposite||(Z[1]+=X),x=1;else{let j;this.opposite&&(Z[0]+=q),j=N.options.opposite?this.left+this.width+2+Z[0]-(this.opposite?0:X):this.opposite?0:X,N.position(j,this.top,this.width,this.height),this.opposite&&(Z[0]+=X),x=0}if(Z[x]+=N.size+(N.options.margin||0),isNaN(w)||isNaN(I)||!m(this.min)||!m(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let j=this.pointRange/(this.dataMax+1);P=j*this.min,D=j*(this.max+1),N.setRange(P,D)}else P=(this.min-w)/(I-w),D=(this.max-w)/(I-w),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(P,D):N.setRange(1-D,1-P)}}y.compose=function(x,P){v(n,"Axis.Scrollbar")&&(k=P,p(x,"afterGetOffset",T),p(x,"afterInit",M),p(x,"afterRender",A))}}(u||(u={})),u}),o(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),o(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{defaultOptions:m}=a,{addEvent:g,correctFloat:v,crisp:y,defined:k,destroyObjectProperties:_,fireEvent:T,merge:M,pick:A,removeEvent:x}=p;class P{static compose(w){u.compose(w,P)}static swapXY(w,I){return I&&w.forEach(N=>{let q,Z=N.length;for(let X=0;X<Z;X+=2)typeof(q=N[X+1])=="number"&&(N[X+1]=N[X+2],N[X+2]=q)}),w}constructor(w,I,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(w,I,N)}addEvents(){let w=this.options.inverted?[1,0]:[0,1],I=this.scrollbarButtons,N=this.scrollbarGroup.element,q=this.track.element,Z=this.mouseDownHandler.bind(this),X=this.mouseMoveHandler.bind(this),j=this.mouseUpHandler.bind(this),V=[[I[w[0]].element,"click",this.buttonToMinClick.bind(this)],[I[w[1]].element,"click",this.buttonToMaxClick.bind(this)],[q,"click",this.trackClick.bind(this)],[N,"mousedown",Z],[N.ownerDocument,"mousemove",X],[N.ownerDocument,"mouseup",j],[N,"touchstart",Z],[N.ownerDocument,"touchmove",X],[N.ownerDocument,"touchend",j]];V.forEach(function(U){g.apply(null,U)}),this._events=V}buttonToMaxClick(w){let I=(this.to-this.from)*A(this.options.step,.2);this.updatePosition(this.from+I,this.to+I),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}buttonToMinClick(w){let I=v(this.to-this.from)*A(this.options.step,.2);this.updatePosition(v(this.from-I),v(this.to-I)),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}cursorToScrollbarPosition(w){let I=this.options,N=I.minWidth>this.calculatedWidth?I.minWidth:0;return{chartX:(w.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(w.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let w=this,I=w.chart.scroller;w.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){w[N]&&w[N].destroy&&(w[N]=w[N].destroy())}),I&&w===I.scrollbar&&(I.scrollbar=null,_(I.scrollbarButtons))}drawScrollbarButton(w){let I=this.renderer,N=this.scrollbarButtons,q=this.options,Z=this.size,X=I.g().add(this.group);if(N.push(X),q.buttonsEnabled){let j=I.rect().addClass("highcharts-scrollbar-button").add(X);this.chart.styledMode||j.attr({stroke:q.buttonBorderColor,"stroke-width":q.buttonBorderWidth,fill:q.buttonBackgroundColor}),j.attr(j.crisp({x:-.5,y:-.5,width:Z,height:Z,r:q.buttonBorderRadius},j.strokeWidth()));let V=I.path(P.swapXY([["M",Z/2+(w?-1:1),Z/2-3],["L",Z/2+(w?-1:1),Z/2+3],["L",Z/2+(w?2:-2),Z/2]],q.vertical)).addClass("highcharts-scrollbar-arrow").add(N[w]);this.chart.styledMode||V.attr({fill:q.buttonArrowColor})}}init(w,I,N){this.scrollbarButtons=[],this.renderer=w,this.userOptions=I,this.options=M(n,m.scrollbar,I),this.options.margin=A(this.options.margin,10),this.chart=N,this.size=A(this.options.size,this.options.height),I.enabled&&(this.render(),this.addEvents())}mouseDownHandler(w){var q;let I=((q=this.chart.pointer)==null?void 0:q.normalize(w))||w,N=this.cursorToScrollbarPosition(I);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(w){var X;let I,N=((X=this.chart.pointer)==null?void 0:X.normalize(w))||w,q=this.options.vertical?"chartY":"chartX",Z=this.initPositions||[];this.grabbedCenter&&(!w.touches||w.touches[0][q]!==0)&&(I=this.cursorToScrollbarPosition(N)[q]-this[q],this.hasDragged=!0,this.updatePosition(Z[0]+I,Z[1]+I),this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:w.type,DOMEvent:w}))}mouseUpHandler(w){this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:w.type,DOMEvent:w}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(w,I,N,q){let{buttonsEnabled:Z,margin:X=0,vertical:j}=this.options,V=this.rendered?"animate":"attr",U=q,L=0;this.group.show(),this.x=w,this.y=I+this.trackBorderWidth,this.width=N,this.height=q,this.xOffset=U,this.yOffset=L,j?(this.width=this.yOffset=N=L=this.size,this.xOffset=U=0,this.yOffset=L=Z?this.size:0,this.barWidth=q-(Z?2*N:0),this.x=w+=X):(this.height=q=this.size,this.xOffset=U=Z?this.size:0,this.barWidth=N-(Z?2*q:0),this.y=this.y+X),this.group[V]({translateX:w,translateY:this.y}),this.track[V]({width:N,height:q}),this.scrollbarButtons[1][V]({translateX:j?0:N-U,translateY:j?q-L:0})}removeEvents(){this._events.forEach(function(w){x.apply(null,w)}),this._events.length=0}render(){let w=this.renderer,I=this.options,N=this.size,q=this.chart.styledMode,Z=w.g("scrollbar").attr({zIndex:I.zIndex}).hide().add();this.group=Z,this.track=w.rect().addClass("highcharts-scrollbar-track").attr({r:I.trackBorderRadius||0,height:N,width:N}).add(Z),q||this.track.attr({fill:I.trackBackgroundColor,stroke:I.trackBorderColor,"stroke-width":I.trackBorderWidth});let X=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-y(0,X),y:-y(0,X)}),this.scrollbarGroup=w.g().add(Z),this.scrollbar=w.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-X,width:N-X,r:I.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=w.path(P.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],I.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),q||(this.scrollbar.attr({fill:I.barBackgroundColor,stroke:I.barBorderColor,"stroke-width":I.barBorderWidth}),this.scrollbarRifles.attr({stroke:I.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-y(0,this.scrollbarStrokeWidth),-y(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(w,I){let N,q,Z=this.options,X=Z.vertical,j=Z.minWidth,V=this.barWidth,U=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!k(V))return;let L=V*Math.min(I,1);N=Math.ceil(V*(w=Math.max(w,0))),this.calculatedWidth=q=v(L-N),q<j&&(N=(V-j+q)*w,q=j);let R=Math.floor(N+this.xOffset+this.yOffset),G=q/2-.5;this.from=w,this.to=I,X?(this.scrollbarGroup[U]({translateY:R}),this.scrollbar[U]({height:q}),this.scrollbarRifles[U]({translateY:G}),this.scrollbarTop=R,this.scrollbarLeft=0):(this.scrollbarGroup[U]({translateX:R}),this.scrollbar[U]({width:q}),this.scrollbarRifles[U]({translateX:G}),this.scrollbarLeft=R,this.scrollbarTop=0),q<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Z.showFull===!1&&(w<=0&&I>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(w){return A(this.options.liveRedraw,c.svg&&!c.isTouchDevice&&!this.chart.boosted)||w==="mouseup"||w==="touchend"||!k(w)}trackClick(w){var X;let I=((X=this.chart.pointer)==null?void 0:X.normalize(w))||w,N=this.to-this.from,q=this.y+this.scrollbarTop,Z=this.x+this.scrollbarLeft;this.options.vertical&&I.chartY>q||!this.options.vertical&&I.chartX>Z?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:w})}update(w){this.destroy(),this.init(this.chart.renderer,M(!0,this.options,w),this.chart)}updatePosition(w,I){I>1&&(w=v(1-v(I-w)),I=1),w<0&&(I=v(I-w),w=0),this.from=w,this.to=I}}return P.defaultOptions=n,m.scrollbar=M(!0,P.defaultOptions,m.scrollbar),P}),o(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y){let{defaultOptions:k}=u,{isTouchDevice:_}=n,{prototype:{symbols:T}}=v,{addEvent:M,clamp:A,correctFloat:x,defined:P,destroyObjectProperties:D,erase:w,extend:I,find:N,fireEvent:q,isArray:Z,isNumber:X,merge:j,pick:V,removeEvent:U,splat:L}=y;function R($,...F){let H=[].filter.call(F,X);if(H.length)return Math[$].apply(0,H)}class G{static compose(F,H,W){c.compose(F,G),m.compose(F,H,W)}constructor(F){this.isDirty=!1,this.scrollbarHeight=0,this.init(F)}drawHandle(F,H,W,ne){let ue=this.navigatorOptions.handles.height;this.handles[H][ne](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(F,10)+.5-ue)}:{translateX:Math.round(this.left+parseInt(F,10)),translateY:Math.round(this.top+this.height/2-ue/2-1)})}drawOutline(F,H,W,ne){let ue=this.navigatorOptions.maskInside,ie=this.outline.strokeWidth(),oe=ie/2,Se=ie%2/2,ye=this.scrollButtonSize,Ce=this.size,K=this.top,Q=this.height,ae=K-oe,ve=K+Q,J=this.left,re,ce;W?(re=K+H+Se,H=K+F+Se,ce=[["M",J+Q,K-ye-Se],["L",J+Q,re],["L",J,re],["M",J,H],["L",J+Q,H],["L",J+Q,K+Ce+ye]],ue&&ce.push(["M",J+Q,re-oe],["L",J+Q,H+oe])):(J-=ye,F+=J+ye-Se,H+=J+ye-Se,ce=[["M",J,ae],["L",F,ae],["L",F,ve],["M",H,ve],["L",H,ae],["L",J+Ce+2*ye,ae]],ue&&ce.push(["M",F-oe,ae],["L",H+oe,ae])),this.outline[ne]({d:ce})}drawMasks(F,H,W,ne){let ue,ie,oe,Se,ye=this.left,Ce=this.top,K=this.height;W?(oe=[ye,ye,ye],Se=[Ce,Ce+F,Ce+H],ie=[K,K,K],ue=[F,H-F,this.size-H]):(oe=[ye,ye+F,ye+H],Se=[Ce,Ce,Ce],ie=[F,H-F,this.size-H],ue=[K,K,K]),this.shades.forEach((Q,ae)=>{Q[ne]({x:oe[ae],y:Se[ae],width:ie[ae],height:ue[ae]})})}renderElements(){var ye;let F=this,H=F.navigatorOptions,W=H.maskInside,ne=F.chart,ue=ne.inverted,ie=ne.renderer,oe={cursor:ue?"ns-resize":"ew-resize"},Se=F.navigatorGroup??(F.navigatorGroup=ie.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((Ce,K)=>{let Q=F.shades[K]??(F.shades[K]=ie.rect().addClass("highcharts-navigator-mask"+(K===1?"-inside":"-outside")).add(Se));ne.styledMode||(Q.attr({fill:Ce?H.maskFill:"rgba(0,0,0,0)"}),K===1&&Q.css(oe))}),F.outline||(F.outline=ie.path().addClass("highcharts-navigator-outline").add(Se)),ne.styledMode||F.outline.attr({"stroke-width":H.outlineWidth,stroke:H.outlineColor}),(ye=H.handles)==null?void 0:ye.enabled){let Ce=H.handles,{height:K,width:Q}=Ce;[0,1].forEach(ae=>{var J;let ve=Ce.symbols[ae];if(F.handles[ae]&&F.handles[ae].symbolUrl===ve){if(!F.handles[ae].isImg&&F.handles[ae].symbolName!==ve){let re=T[ve].call(T,-Q/2-1,0,Q,K);F.handles[ae].attr({d:re}),F.handles[ae].symbolName=ve}}else(J=F.handles[ae])==null||J.destroy(),F.handles[ae]=ie.symbol(ve,-Q/2-1,0,Q,K,Ce),F.handles[ae].attr({zIndex:7-ae}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][ae]).add(Se),F.addMouseEvents();ne.inverted&&F.handles[ae].attr({rotation:90,rotationOriginX:Math.floor(-Q/2),rotationOriginY:(K+Q)/2}),ne.styledMode||F.handles[ae].attr({fill:Ce.backgroundColor,stroke:Ce.borderColor,"stroke-width":Ce.lineWidth,width:Ce.width,height:Ce.height,x:-Q/2-1,y:0}).css(oe)})}}update(F,H=!1){var ue;let W=this.chart,ne=W.options.chart.inverted!==((ue=W.scrollbar)==null?void 0:ue.options.vertical);if(j(!0,W.options.navigator,F),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),P(F.enabled)||ne)return this.destroy(),this.navigatorEnabled=F.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,F.adaptToUpdatedData===!1&&this.baseSeries.forEach(ie=>{U(ie,"updatedData",this.updatedDataHandler)},this),F.adaptToUpdatedData&&this.baseSeries.forEach(ie=>{ie.eventsToUnbind.push(M(ie,"updatedData",this.updatedDataHandler))},this),(F.series||F.baseSeries)&&this.setBaseSeries(void 0,!1),F.height||F.xAxis||F.yAxis)){this.height=F.height??this.height;let ie=this.getXAxisOffsets();this.xAxis.update({...F.xAxis,offsets:ie,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...F.yAxis,[W.inverted?"width":"height"]:this.height},!1)}H&&W.redraw()}render(F,H,W,ne){let ue=this.chart,ie=this.xAxis,oe=ie.pointRange||0,Se=ie.navigatorAxis.fake?ue.xAxis[0]:ie,ye=this.navigatorEnabled,Ce=this.rendered,K=ue.inverted,Q=ue.xAxis[0].minRange,ae=ue.xAxis[0].options.maxRange,ve=this.scrollButtonSize,J,re,ce,ge=this.scrollbarHeight,_e,ze;if(this.hasDragged&&!P(W))return;if(this.isDirty&&this.renderElements(),F=x(F-oe/2),H=x(H+oe/2),!X(F)||!X(H)){if(!Ce)return;W=0,ne=V(ie.width,Se.width)}this.left=V(ie.left,ue.plotLeft+ve+(K?ue.plotWidth:0));let Te=this.size=_e=V(ie.len,(K?ue.plotHeight:ue.plotWidth)-2*ve);J=K?ge:_e+2*ve,W=V(W,ie.toPixels(F,!0)),ne=V(ne,ie.toPixels(H,!0)),X(W)&&Math.abs(W)!==1/0||(W=0,ne=J);let Ie=ie.toValue(W,!0),Be=ie.toValue(ne,!0),Ge=Math.abs(x(Be-Ie));Ge<Q?this.grabbedLeft?W=ie.toPixels(Be-Q-oe,!0):this.grabbedRight&&(ne=ie.toPixels(Ie+Q+oe,!0)):P(ae)&&x(Ge-oe)>ae&&(this.grabbedLeft?W=ie.toPixels(Be-ae-oe,!0):this.grabbedRight&&(ne=ie.toPixels(Ie+ae+oe,!0))),this.zoomedMax=A(Math.max(W,ne),0,Te),this.zoomedMin=A(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,ne),0,Te),this.range=this.zoomedMax-this.zoomedMin,Te=Math.round(this.zoomedMax);let ke=Math.round(this.zoomedMin);ye&&(this.navigatorGroup.attr({visibility:"inherit"}),ze=Ce&&!this.hasDragged?"animate":"attr",this.drawMasks(ke,Te,K,ze),this.drawOutline(ke,Te,K,ze),this.navigatorOptions.handles.enabled&&(this.drawHandle(ke,0,K,ze),this.drawHandle(Te,1,K,ze))),this.scrollbar&&(K?(ce=this.top-ve,re=this.left-ge+(ye||!Se.opposite?0:(Se.titleOffset||0)+Se.axisTitleMargin),ge=_e+2*ve):(ce=this.top+(ye?this.height:-ge),re=this.left-ve),this.scrollbar.position(re,ce,J,ge),this.scrollbar.setRange(this.zoomedMin/(_e||1),this.zoomedMax/(_e||1))),this.rendered=!0,this.isDirty=!1,q(this,"afterRender")}addMouseEvents(){let F=this,H=F.chart,W=H.container,ne=[],ue,ie;F.mouseMoveHandler=ue=function(oe){F.onMouseMove(oe)},F.mouseUpHandler=ie=function(oe){F.onMouseUp(oe)},(ne=F.getPartsEvents("mousedown")).push(M(H.renderTo,"mousemove",ue),M(W.ownerDocument,"mouseup",ie),M(H.renderTo,"touchmove",ue),M(W.ownerDocument,"touchend",ie)),ne.concat(F.getPartsEvents("touchstart")),F.eventsToUnbind=ne,F.series&&F.series[0]&&ne.push(M(F.series[0].xAxis,"foundExtremes",function(){H.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(F){let H=this,W=[];return["shades","handles"].forEach(function(ne){H[ne].forEach(function(ue,ie){W.push(M(ue.element,F,function(oe){H[ne+"Mousedown"](oe,ie)}))})}),W}shadesMousedown(F,H){var ve;F=((ve=this.chart.pointer)==null?void 0:ve.normalize(F))||F;let W=this.chart,ne=this.xAxis,ue=this.zoomedMin,ie=this.size,oe=this.range,Se=this.left,ye=F.chartX,Ce,K,Q,ae;W.inverted&&(ye=F.chartY,Se=this.top),H===1?(this.grabbedCenter=ye,this.fixedWidth=oe,this.dragOffset=ye-ue):(ae=ye-Se-oe/2,H===0?ae=Math.max(0,ae):H===2&&ae+oe>=ie&&(ae=ie-oe,this.reversedExtremes?(ae-=oe,K=this.getUnionExtremes().dataMin):Ce=this.getUnionExtremes().dataMax),ae!==ue&&(this.fixedWidth=oe,P((Q=ne.navigatorAxis.toFixedRange(ae,ae+oe,K,Ce)).min)&&q(this,"setRange",{min:Math.min(Q.min,Q.max),max:Math.max(Q.min,Q.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(F,H){var ie;F=((ie=this.chart.pointer)==null?void 0:ie.normalize(F))||F;let W=this.chart,ne=W.xAxis[0],ue=this.reversedExtremes;H===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=ue?ne.min:ne.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=ue?ne.max:ne.min),W.setFixedRange(void 0)}onMouseMove(F){var Ce;let H=this,W=H.chart,ne=H.navigatorSize,ue=H.range,ie=H.dragOffset,oe=W.inverted,Se=H.left,ye;(!F.touches||F.touches[0].pageX!==0)&&(ye=(F=((Ce=W.pointer)==null?void 0:Ce.normalize(F))||F).chartX,oe&&(Se=H.top,ye=F.chartY),H.grabbedLeft?(H.hasDragged=!0,H.render(0,0,ye-Se,H.otherHandlePos)):H.grabbedRight?(H.hasDragged=!0,H.render(0,0,H.otherHandlePos,ye-Se)):H.grabbedCenter&&(H.hasDragged=!0,ye<ie?ye=ie:ye>ne+ie-ue&&(ye=ne+ie-ue),H.render(0,0,ye-ie,ye-ie+ue)),H.hasDragged&&H.scrollbar&&V(H.scrollbar.options.liveRedraw,!_&&!this.chart.boosted)&&(F.DOMType=F.type,setTimeout(function(){H.onMouseUp(F)},0)))}onMouseUp(F){let H,W,ne,ue,ie,oe,Se=this.chart,ye=this.xAxis,Ce=this.scrollbar,K=F.DOMEvent||F,Q=Se.inverted,ae=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Ce||!Ce.hasDragged)||F.trigger==="scrollbar")&&(ne=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?ue=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ie=this.fixedExtreme),this.zoomedMax===this.size&&(ie=this.reversedExtremes?ne.dataMin:ne.dataMax),this.zoomedMin===0&&(ue=this.reversedExtremes?ne.dataMax:ne.dataMin),P((oe=ye.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,ue,ie)).min)&&q(this,"setRange",{min:Math.min(oe.min,oe.max),max:Math.max(oe.min,oe.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:K}})),F.DOMType!=="mousemove"&&F.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&X(this.zoomedMin)&&X(this.zoomedMax)&&(W=Math.round(this.zoomedMin),H=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,H,Q,ae),this.outline&&this.drawOutline(W,H,Q,ae),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,Q,ae),this.drawHandle(H,1,Q,ae)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(F){F()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let F=this.baseSeries||[];this.navigatorEnabled&&F[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&F.forEach(function(H){U(H,"updatedData",this.updatedDataHandler)},this),F[0].xAxis&&U(F[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(F){var J;let H=F.options,W=H.navigator||{},ne=W.enabled,ue=H.scrollbar||{},ie=ue.enabled,oe=ne&&W.height||0,Se=ie&&ue.height||0,ye=ue.buttonsEnabled&&Se||0;this.handles=[],this.shades=[],this.chart=F,this.setBaseSeries(),this.height=oe,this.scrollbarHeight=Se,this.scrollButtonSize=ye,this.scrollbarEnabled=ie,this.navigatorEnabled=ne,this.navigatorOptions=W,this.scrollbarOptions=ue,this.setOpposite();let Ce=this,K=Ce.baseSeries,Q=F.xAxis.length,ae=F.yAxis.length,ve=K&&K[0]&&K[0].xAxis||F.xAxis[0]||{options:{}};if(F.isDirtyBox=!0,Ce.navigatorEnabled){let re=this.getXAxisOffsets();Ce.xAxis=new a(F,j({breaks:ve.options.breaks,ordinal:ve.options.ordinal,overscroll:ve.options.overscroll},W.xAxis,{type:"datetime",yAxis:(J=W.yAxis)==null?void 0:J.id,index:Q,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:ve.options.ordinal?0:ve.options.minPadding,maxPadding:ve.options.ordinal?0:ve.options.maxPadding,zoomEnabled:!1},F.inverted?{offsets:re,width:oe}:{offsets:re,height:oe}),"xAxis"),Ce.yAxis=new a(F,j(W.yAxis,{alignTicks:!1,offset:0,index:ae,isInternal:!0,reversed:V(W.yAxis&&W.yAxis.reversed,F.yAxis[0]&&F.yAxis[0].reversed,!1),zoomEnabled:!1},F.inverted?{width:oe}:{height:oe}),"yAxis"),K||W.series.data?Ce.updateNavigatorSeries(!1):F.series.length===0&&(Ce.unbindRedraw=M(F,"beforeRedraw",function(){F.series.length>0&&!Ce.series&&(Ce.setBaseSeries(),Ce.unbindRedraw())})),Ce.reversedExtremes=F.inverted&&!Ce.xAxis.reversed||!F.inverted&&Ce.xAxis.reversed,Ce.renderElements(),Ce.addMouseEvents()}else Ce.xAxis={chart:F,navigatorAxis:{fake:!0},translate:function(re,ce){let ge=F.xAxis[0],_e=ge.getExtremes(),ze=ge.len-2*ye,Te=R("min",ge.options.min,_e.dataMin),Ie=R("max",ge.options.max,_e.dataMax)-Te;return ce?re*Ie/ze+Te:ze*(re-Te)/Ie},toPixels:function(re){return this.translate(re)},toValue:function(re){return this.translate(re,!0)}},Ce.xAxis.navigatorAxis.axis=Ce.xAxis,Ce.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(Ce.xAxis.navigatorAxis);if(F.options.scrollbar.enabled){let re=j(F.options.scrollbar,{vertical:F.inverted});!X(re.margin)&&Ce.navigatorEnabled&&(re.margin=F.inverted?-3:3),F.scrollbar=Ce.scrollbar=new g(F.renderer,re,F),M(Ce.scrollbar,"changed",function(ce){let ge=Ce.size,_e=ge*this.to,ze=ge*this.from;Ce.hasDragged=Ce.scrollbar.hasDragged,Ce.render(0,0,ze,_e),this.shouldUpdateExtremes(ce.DOMType)&&setTimeout(function(){Ce.onMouseUp(ce)})})}Ce.addBaseSeriesEvents(),Ce.addChartEvents()}setOpposite(){let F=this.navigatorOptions,H=this.navigatorEnabled,W=this.chart;this.opposite=V(F.opposite,!!(!H&&W.inverted))}getUnionExtremes(F){let H,W=this.chart.xAxis[0],ne=this.xAxis,ue=ne.options,ie=W.options;return F&&W.dataMin===null||(H={dataMin:V(ue&&ue.min,R("min",ie.min,W.dataMin,ne.dataMin,ne.min)),dataMax:V(ue&&ue.max,R("max",ie.max,W.dataMax,ne.dataMax,ne.max))}),H}setBaseSeries(F,H){let W=this.chart,ne=this.baseSeries=[];F=F||W.options&&W.options.navigator.baseSeries||(W.series.length?N(W.series,ue=>!ue.options.isInternal).index:0),(W.series||[]).forEach((ue,ie)=>{!ue.options.isInternal&&(ue.options.showInNavigator||(ie===F||ue.options.id===F)&&ue.options.showInNavigator!==!1)&&ne.push(ue)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,H)}updateNavigatorSeries(F,H){var Q,ae;let W=this,ne=W.chart,ue=W.baseSeries,ie={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(Q=this.navigatorOptions.xAxis)==null?void 0:Q.id,yAxis:(ae=this.navigatorOptions.yAxis)==null?void 0:ae.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},oe=W.series=(W.series||[]).filter(ve=>{let J=ve.baseSeries;return!(0>ue.indexOf(J))||(J&&(U(J,"updatedData",W.updatedDataHandler),delete J.navigatorSeries),ve.chart&&ve.destroy(),!1)}),Se,ye,Ce=W.navigatorOptions.series,K;ue&&ue.length&&ue.forEach(ve=>{let J=ve.navigatorSeries,re=I({color:ve.color,visible:ve.visible},Z(Ce)?k.navigator.series:Ce);if(J&&W.navigatorOptions.adaptToUpdatedData===!1)return;ie.name="Navigator "+ue.length,K=(Se=ve.options||{}).navigatorOptions||{},re.dataLabels=L(re.dataLabels),(ye=j(Se,ie,re,K)).pointRange=V(re.pointRange,K.pointRange,k.plotOptions[ye.type||"line"].pointRange);let ce=K.data||re.data;W.hasNavigatorData=W.hasNavigatorData||!!ce,ye.data=ce||Se.data&&Se.data.slice(0),J&&J.options?J.update(ye,H):(ve.navigatorSeries=ne.initSeries(ye),ne.setSortedData(),ve.navigatorSeries.baseSeries=ve,oe.push(ve.navigatorSeries))}),(Ce.data&&!(ue&&ue.length)||Z(Ce))&&(W.hasNavigatorData=!1,(Ce=L(Ce)).forEach((ve,J)=>{ie.name="Navigator "+(oe.length+1),(ye=j(k.navigator.series,{color:ne.series[J]&&!ne.series[J].options.isInternal&&ne.series[J].color||ne.options.colors[J]||ne.options.colors[0]},ie,ve)).data=ve.data,ye.data&&(W.hasNavigatorData=!0,oe.push(ne.initSeries(ye)))})),F&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let F=this,H=F.baseSeries||[];H[0]&&H[0].xAxis&&H[0].eventsToUnbind.push(M(H[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),H.forEach(W=>{W.eventsToUnbind.push(M(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(M(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(M(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(M(W,"remove",function(){w(H,W),this.navigatorSeries&&(w(F.series,this.navigatorSeries),P(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(F){return this.baseSeries.reduce(function(H,W){return Math.min(H,W.xData&&W.xData.length?W.xData[0]:H)},F)}modifyNavigatorAxisExtremes(){let F=this.xAxis;if(F.getExtremes!==void 0){let H=this.getUnionExtremes(!0);H&&(H.dataMin!==F.min||H.dataMax!==F.max)&&(F.min=H.dataMin,F.max=H.dataMax)}}modifyBaseAxisExtremes(){var J;let F,H,W=this.chart.navigator,ne=this.getExtremes(),ue=ne.min,ie=ne.max,oe=ne.dataMin,Se=ne.dataMax,ye=ie-ue,Ce=W.stickToMin,K=W.stickToMax,Q=V((J=this.ordinal)==null?void 0:J.convertOverscroll(this.options.overscroll),0),ae=W.series&&W.series[0],ve=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Ce&&(F=(H=oe)+ye),K&&(F=Se+Q,Ce||(H=Math.max(oe,F-ye,W.getBaseSeriesMin(ae&&ae.xData?ae.xData[0]:-Number.MAX_VALUE)))),ve&&(Ce||K)&&X(H)&&(this.min=this.userMin=H,this.max=this.userMax=F)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let F=this.chart.navigator,H=this.navigatorSeries,W=F.reversedExtremes?Math.round(F.zoomedMin)===0:Math.round(F.zoomedMax)>=Math.round(F.size);F.stickToMax=V(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),F.stickToMin=F.shouldStickToMin(this,F),H&&!F.hasNavigatorData&&(H.options.pointStart=this.xData[0],H.setData(this.options.data,!1,null,!1))}shouldStickToMin(F,H){let W=H.getBaseSeriesMin(F.xData[0]),ne=F.xAxis,ue=ne.max,ie=ne.min,oe=ne.options.range;return!!(X(ue)&&X(ie))&&(oe&&ue-W>0?ue-W<oe:ie<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(M(this.chart,"redraw",function(){let F=this.navigator,H=F&&(F.baseSeries&&F.baseSeries[0]&&F.baseSeries[0].xAxis||this.xAxis[0]);H&&F.render(H.min,H.max)}),M(this.chart,"getMargins",function(){let F=this.navigator,H=F.opposite?"plotTop":"marginBottom";this.inverted&&(H=F.opposite?"marginRight":"plotLeft"),this[H]=(this[H]||0)+(F.navigatorEnabled||!this.inverted?F.height+F.scrollbarHeight:0)+F.navigatorOptions.margin}),M(G,"setRange",function(F){this.chart.xAxis[0].setExtremes(F.min,F.max,F.redraw,F.animation,F.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(w(this.chart.xAxis,this.xAxis),w(this.chart.axes,this.xAxis)),this.yAxis&&(w(this.chart.yAxis,this.yAxis),w(this.chart.axes,this.yAxis)),(this.series||[]).forEach(F=>{F.destroy&&F.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(F=>{this[F]&&this[F].destroy&&this[F].destroy(),this[F]=null}),[this.handles].forEach(F=>{D(F)}),this.navigatorEnabled=!1}}return G}),o(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(a,c,u,n,p,m,g,v,y){let{animObject:k}=p,{format:_}=m,{clamp:T,pick:M,syncTimeout:A}=g,{getFakeMouseEvent:x}=v,{getAxisRangeDescription:P,fireEventOnWrappedOrUnwrappedElement:D}=y;return class extends a{init(){let w=this.chart,I=this;this.announcer=new c(w,"polite"),this.addEvent(n,"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&A(()=>{I.proxyProvider.updateGroupProxyElementPositions("navigator"),I.updateHandleValues()},k(M(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var q,Z,X;let w=this.chart,I=w.options,N=I.navigator;if(N.enabled&&((q=N.accessibility)!=null&&q.enabled)){let j=I.accessibility.landmarkVerbosity,V=(Z=I.lang.accessibility)==null?void 0:Z.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:j==="all"?"region":"group","aria-label":_(V,{chart:w},w)});let U=(X=I.lang.accessibility)==null?void 0:X.navigator.handleLabel;[0,1].forEach(L=>{let R=this.getHandleByIx(L);if(R){let G=this.proxyProvider.addProxyElement("navigator",{click:R},"input",{type:"range","aria-label":_(U,{handleIx:L,chart:w},w)});this[L?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(w){let I=this,N=this.chart,q=w?this.maxHandleProxy:this.minHandleProxy,Z=this.keyCodes;return new u(N,{keyCodeMap:[[[Z.left,Z.right,Z.up,Z.down],function(X){if(q){let j=X===Z.left||X===Z.up?-1:1;q.value=""+T(parseFloat(q.value)+j,0,100),I.updateNavigator(()=>{let V=I.getHandleByIx(w);V&&N.setFocusToElement(V,q)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(w),q)},validate:()=>{var X;return!!(this.getHandleByIx(w)&&q&&((X=N.options.navigator.accessibility)!=null&&X.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let w=this.chart.navigator;if(w&&this.minHandleProxy&&this.maxHandleProxy){let I=w.size;this.minHandleProxy.value=""+Math.round(w.zoomedMin/I*100),this.maxHandleProxy.value=""+Math.round(w.zoomedMax/I*100)}}getHandleByIx(w){let I=this.chart.navigator;return I&&I.handles&&I.handles[w]}updateNavigator(w){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((I=>{var X;let N=this.chart,{navigator:q,pointer:Z}=N;if(q&&Z&&this.minHandleProxy&&this.maxHandleProxy){let j=Z.getChartPosition(),V=parseFloat(this.minHandleProxy.value)/100*q.size,U=parseFloat(this.maxHandleProxy.value)/100*q.size;[[0,"mousedown",q.zoomedMin],[0,"mousemove",V],[0,"mouseup",V],[1,"mousedown",q.zoomedMax],[1,"mousemove",U],[1,"mouseup",U]].forEach(([G,$,F])=>{var W;let H=(W=this.getHandleByIx(G))==null?void 0:W.element;H&&D(H,x($,{x:j.left+q.left+F,y:j.top+q.top},H))}),I&&I();let L=(X=N.options.lang.accessibility)==null?void 0:X.navigator.changeAnnouncement,R=P(N.xAxis[0]);this.announcer.announce(_(L,{axisRangeDescription:R,chart:N},N))}}).bind(this,w),20)}}}),o(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{getPointAnnotationTexts:m}=a,{getAxisDescription:g,getSeriesFirstPointElement:v,getSeriesA11yElement:y,unhideChartElementFromAT:k}=c,{format:_,numberFormat:T}=u,{reverseChildNodes:M,stripHTMLTagsFromString:A}=n,{find:x,isNumber:P,isString:D,pick:w,defined:I}=p;function N(V){let U=V.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(U!==!1&&V.points&&V.points.length>=+U)}function q(V,U){let L=V.series,R=L.chart,G=R.options.accessibility.point||{},$=L.options.accessibility&&L.options.accessibility.point||{},F=L.tooltipOptions||{},H=R.options.lang;return P(U)?T(U,$.valueDecimals||G.valueDecimals||F.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):U}function Z(V,U){let L=V[U];return V.chart.langFormat("accessibility.series."+U+"Description",{name:g(L),series:V})}function X(V){let U=V.series,L=U.chart.series.length>1||U.options.name,R=function(H){let W=H.series,ne=W.chart,ue=W.options.accessibility,ie=ue&&ue.point&&ue.point.valueDescriptionFormat||ne.options.accessibility.point.valueDescriptionFormat,oe=w(W.xAxis&&W.xAxis.options.accessibility&&W.xAxis.options.accessibility.enabled,!ne.angular&&W.type!=="flowmap"),Se=oe?function(ye){let Ce=function(ve){let J=ve.series,re=J.chart,ce=J.options.accessibility&&J.options.accessibility.point||{},ge=re.options.accessibility.point||{},_e=J.xAxis&&J.xAxis.dateTime;if(_e){let ze=_e.getXDateFormat(ve.x||0,re.options.tooltip.dateTimeLabelFormats),Te=ce.dateFormatter&&ce.dateFormatter(ve)||ge.dateFormatter&&ge.dateFormatter(ve)||ce.dateFormat||ge.dateFormat||ze;return re.time.dateFormat(Te,ve.x||0,void 0)}}(ye),K=(ye.series.xAxis||{}).categories&&I(ye.category)&&(""+ye.category).replace("<br/>"," "),Q=I(ye.id)&&0>(""+ye.id).indexOf("highcharts-"),ae="x, "+ye.x;return ye.name||Ce||K||(Q?ye.id:ae)}(H):"";return _(ie,{point:H,index:I(H.index)?H.index+1:"",xDescription:Se,value:function(ye){let Ce=ye.series,K=Ce.chart.options.accessibility.point||{},Q=Ce.chart.options.accessibility&&Ce.chart.options.accessibility.point||{},ae=Ce.tooltipOptions||{},ve=Q.valuePrefix||K.valuePrefix||ae.valuePrefix||"",J=Q.valueSuffix||K.valueSuffix||ae.valueSuffix||"",re=ye.value!==void 0?"value":"y",ce=q(ye,ye[re]);return ye.isNull?Ce.chart.langFormat("accessibility.series.nullPointValue",{point:ye}):Ce.pointArrayMap?function(ge,_e,ze){let Te=_e||"",Ie=ze||"",Be=function(Ge){let ke=q(ge,w(ge[Ge],ge.options[Ge]));return ke!==void 0?Ge+": "+Te+ke+Ie:ke};return ge.series.pointArrayMap.reduce(function(Ge,ke){let me=Be(ke);return me?Ge+(Ge.length?", ":"")+me:Ge},"")}(ye,ve,J):ve+ce+J}(H),separator:oe?", ":""},ne)}(V),G=V.options&&V.options.accessibility&&V.options.accessibility.description,$=L?" "+U.name+".":"",F=function(H){let W=H.series.chart,ne=m(H);return ne.length?W.langFormat("accessibility.series.pointAnnotationsDescription",{point:H,annotations:ne}):""}(V);return V.accessibility=V.accessibility||{},V.accessibility.valueDescription=R,R+(G?" "+G:"")+$+(F?" "+F:"")}function j(V){let U=V.chart,L=U.types||[],R=function(oe){let Se=(oe.options.accessibility||{}).description;return Se&&oe.chart.langFormat("accessibility.series.description",{description:Se,series:oe})||""}(V),G=function(oe){return U[oe]&&U[oe].length>1&&V[oe]},$=V.index+1,F=Z(V,"xAxis"),H=Z(V,"yAxis"),W={seriesNumber:$,series:V,chart:U},ne=L.length>1?"Combination":"",ue=U.langFormat("accessibility.series.summary."+V.type+ne,W)||U.langFormat("accessibility.series.summary.default"+ne,W),ie=(G("yAxis")?" "+H+".":"")+(G("xAxis")?" "+F+".":"");return _(w(V.options.accessibility&&V.options.accessibility.descriptionFormat,U.options.accessibility.series.descriptionFormat,""),{seriesDescription:ue,authorDescription:R?" "+R:"",axisDescription:ie,series:V,chart:U,seriesNumber:$},void 0)}return{defaultPointDescriptionFormatter:X,defaultSeriesDescriptionFormatter:j,describeSeries:function(V){let U=V.chart,L=v(V),R=y(V),G=U.is3d&&U.is3d();R&&(R.lastChild!==L||G||M(R),function($){let F=function(ne){let ue=ne.options.accessibility||{};return!N(ne)&&!ue.exposeAsGroupOnly}($),H=function(ne){let ue=ne.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(ne.points&&(ne.points.length<+ue.pointNavigationEnabledThreshold||ue.pointNavigationEnabledThreshold===!1))}($),W=$.chart.options.accessibility.point.describeNull;(F||H)&&$.points.forEach(ne=>{let ue=ne.graphic&&ne.graphic.element||function(oe){let Se=oe.series,ye=Se&&Se.chart,Ce=Se&&Se.is("sunburst"),K=oe.isNull,Q=ye&&ye.options.accessibility.point.describeNull;return K&&!Ce&&Q}(ne)&&function(oe){let Se=oe.series,ye=function(ve){let J=ve.index;return ve.series&&ve.series.data&&I(J)&&x(ve.series.data,function(re){return!!(re&&re.index!==void 0&&re.index>J&&re.graphic&&re.graphic.element)})||null}(oe),Ce=ye&&ye.graphic,K=Ce?Ce.parentGroup:Se.graph||Se.group,Q=ye?{x:w(oe.plotX,ye.plotX,0),y:w(oe.plotY,ye.plotY,0)}:{x:w(oe.plotX,0),y:w(oe.plotY,0)},ae=function(ve,J){let re=ve.series.chart.renderer.rect(J.x,J.y,1,1);return re.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),re}(oe,Q);if(K&&K.element)return oe.graphic=ae,oe.hasMockGraphic=!0,ae.add(K),K.element.insertBefore(ae.element,Ce?Ce.element:null),ae.element}(ne),ie=ne.options&&ne.options.accessibility&&ne.options.accessibility.enabled===!1;if(ue){if(ne.isNull&&!W){ue.setAttribute("aria-hidden",!0);return}ue.setAttribute("tabindex","-1"),$.chart.styledMode||(ue.style.outline="none"),F&&!ie?function(oe,Se){var ae,ve,J;let ye=oe.series,Ce=((ae=ye.options.accessibility)==null?void 0:ae.point)||{},K=ye.chart.options.accessibility.point||{},Q=A(D(Ce.descriptionFormat)&&_(Ce.descriptionFormat,oe,ye.chart)||((ve=Ce.descriptionFormatter)==null?void 0:ve.call(Ce,oe))||D(K.descriptionFormat)&&_(K.descriptionFormat,oe,ye.chart)||((J=K.descriptionFormatter)==null?void 0:J.call(K,oe))||X(oe),ye.chart.renderer.forExport);Se.setAttribute("role","img"),Se.setAttribute("aria-label",Q)}(ne,ue):ue.setAttribute("aria-hidden",!0)}})}(V),k(U,R),function($){let F=$.chart,H=F.options.chart,W=H.options3d&&H.options3d.enabled,ne=F.series.length>1,ue=F.options.accessibility.series.describeSingleSeries,ie=($.options.accessibility||{}).exposeAsGroupOnly;return!(W&&ne)&&(ne||ue||ie||N($))}(V)?function($,F){let H=$.options.accessibility||{},W=$.chart.options.accessibility,ne=W.landmarkVerbosity;H.exposeAsGroupOnly?F.setAttribute("role","img"):ne==="all"?F.setAttribute("role","region"):F.setAttribute("role","group"),F.setAttribute("tabindex","-1"),$.chart.styledMode||(F.style.outline="none"),F.setAttribute("aria-label",A(W.series.descriptionFormatter&&W.series.descriptionFormatter($)||j($),$.chart.renderer.forExport))}(V,R):R.removeAttribute("aria-label"))}}}),o(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,c,u,n,p,m){let{composed:g}=a,{addEvent:v,defined:y,pushUnique:k}=c,{getChartTitle:_}=n,{defaultPointDescriptionFormatter:T,defaultSeriesDescriptionFormatter:M}=m;function A(P){return!!P.options.accessibility.announceNewData.enabled}class x{constructor(D){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=D}init(){let D=this.chart,w=D.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new p,this.announcer=new u(D,w),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let D=this,w=this.chart,I=this.eventProvider;I.addEvent(w,"afterApplyDrilldown",function(){D.lastAnnouncementTime=0}),I.addEvent(w,"afterAddSeries",function(N){D.onSeriesAdded(N.series)}),I.addEvent(w,"redraw",function(){D.announceDirtyData()})}onSeriesAdded(D){A(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[D.name+D.index]=D,this.dirty.newSeries=y(this.dirty.newSeries)?void 0:D)}announceDirtyData(){let D=this.chart,w=this;if(D.options.accessibility.announceNewData&&this.dirty.hasDirty){let I=this.dirty.newPoint;I&&(I=function(N){let q=N.series.data.filter(Z=>N.x===Z.x&&N.y===Z.y);return q.length===1?q[0]:N}(I)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>w.dirty.allSeries[N]),this.dirty.newSeries,I),this.dirty={allSeries:{}}}}queueAnnouncement(D,w,I){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let q=+new Date,Z=q-this.lastAnnouncementTime,X=Math.max(0,N.minAnnounceInterval-Z),j=function(U,L){let R=(U||[]).concat(L||[]).reduce((G,$)=>(G[$.name+$.index]=$,G),{});return Object.keys(R).map(G=>R[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,D),V=this.buildAnnouncementMessage(j,w,I);V&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:q,message:V,series:j},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},X))}}buildAnnouncementMessage(D,w,I){let N=this.chart,q=N.options.accessibility.announceNewData;if(q.announcementFormatter){let V=q.announcementFormatter(D,w,I);if(V!==!1)return V.length?V:null}let Z=a.charts&&a.charts.length>1?"Multiple":"Single",X=w?"newSeriesAnnounce"+Z:I?"newPointAnnounce"+Z:"newDataAnnounce",j=_(N);return N.langFormat("accessibility.announceNewData."+X,{chartTitle:j,seriesDesc:w?M(w):null,pointDesc:I?T(I):null,point:I,series:w})}}return function(P){function D(I){var Z;let N=this.chart,q=(Z=N.accessibility)==null?void 0:Z.components.series.newDataAnnouncer;q&&q.chart===N&&A(N)&&(q.dirty.newPoint=y(q.dirty.newPoint)?void 0:I.point)}function w(){var q;let I=this.chart,N=(q=I.accessibility)==null?void 0:q.components.series.newDataAnnouncer;N&&N.chart===I&&A(I)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}P.compose=function(I){k(g,"A11y.NDA")&&(v(I,"addPoint",D),v(I,"updatedData",w))}}(x),x}),o(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(a,c,u,n,p){let{doc:m}=a,{attr:g,css:v,merge:y}=c,{fireEventOnWrappedOrUnwrappedElement:k}=n,{cloneMouseEvent:_,cloneTouchEvent:T,getFakeMouseEvent:M,removeElement:A}=p;return class{constructor(x,P,D="button",w,I){this.chart=x,this.target=P,this.eventProvider=new u;let N=this.innerElement=m.createElement(D),q=this.element=w?m.createElement(w):N;x.styledMode||this.hideElementVisually(N),w&&(w!=="li"||x.styledMode||(q.style.listStyle="none"),q.appendChild(N),this.element=q),this.updateTarget(P,I)}click(){let x=this.getTargetPosition();x.x+=x.width/2,x.y+=x.height/2;let P=M("click",x);k(this.target.click,P)}updateTarget(x,P){this.target=x,this.updateCSSClassName();let D=P||{};Object.keys(D).forEach(I=>{D[I]===null&&delete D[I]});let w=this.getTargetAttr(x.click,"aria-label");g(this.innerElement,y(w?{"aria-label":w}:{},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,x.click),this.refreshPosition()}refreshPosition(){let x=this.getTargetPosition();v(this.innerElement,{width:(x.width||1)+"px",height:(x.height||1)+"px",left:(Math.round(x.x)||0)+"px",top:(Math.round(x.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),A(this.element)}updateCSSClassName(){let x=N=>N.indexOf("highcharts-no-tooltip")>-1,P=this.chart.legend,D=P.group&&P.group.div,w=x(D&&D.className||""),I=x(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=w||I?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(x,P){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(D=>{let w=D.indexOf("touch")===0;this.eventProvider.addEvent(x,D,I=>{let N=w?T(I):_(I);P&&k(P,N),I.stopPropagation(),w||I.preventDefault()},{passive:!1})})}hideElementVisually(x){v(x,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let x=this.target.click,P=x.element?x.element:x,D=this.target.visual||P,w=this.chart.renderTo,I=this.chart.pointer;if(w&&(D!=null&&D.getBoundingClientRect)&&I){let N=D.getBoundingClientRect(),q=I.getChartPosition();return{x:(N.left-q.left)/q.scaleX,y:(N.top-q.top)/q.scaleY,width:N.right/q.scaleX-N.left/q.scaleX,height:N.bottom/q.scaleY-N.top/q.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(x,P){return x.element?x.element.getAttribute(P):x.getAttribute(P)}}}),o(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(a,c,u,n,p,m){let{doc:g}=a,{attr:v,css:y}=c,{unhideChartElementFromAT:k}=u,{removeChildNodes:_}=p;return class{constructor(T){this.chart=T,this.domElementProvider=new n,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(T,M,A="button",x){let P=this.groups[T];if(!P)throw Error("ProxyProvider.addProxyElement: Invalid group key "+T);let D=P.type==="ul"||P.type==="ol"?"li":void 0,w=new m(this.chart,M,A,D,x);return P.proxyContainerElement.appendChild(w.element),P.proxyElements.push(w),w}addGroup(T,M="div",A){let x,P=this.groups[T];if(P)return P.groupElement;let D=this.domElementProvider.createElement(M);return A&&A.role&&M!=="div"?(x=this.domElementProvider.createElement("div")).appendChild(D):x=D,x.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+T.replace(/\W/g,"-"),this.groups[T]={proxyContainerElement:D,groupElement:x,type:M,proxyElements:[]},v(x,A||{}),M==="ul"&&D.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(x),this.updateGroupOrder(this.groupOrder),x}updateGroupAttrs(T,M){let A=this.groups[T];if(!A)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+T);v(A.groupElement,M)}updateGroupOrder(T){if(this.groupOrder=T.slice(),this.isDOMOrderGroupOrder())return;let M=T.indexOf("series"),A=M>-1?T.slice(0,M):T,x=M>-1?T.slice(M+1):[],P=g.activeElement;["before","after"].forEach(D=>{let w=this[D==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];_(w),(D==="before"?A:x).forEach(I=>{let N=this.groups[I];N&&w.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(P)||this.afterChartProxyPosContainer.contains(P))&&P&&P.focus&&P.focus()}clearGroup(T){let M=this.groups[T];if(!M)throw Error("ProxyProvider.clearGroup: Invalid group key "+T);_(M.proxyContainerElement)}removeGroup(T){let M=this.groups[T];M&&(this.domElementProvider.removeElement(M.groupElement),M.groupElement!==M.proxyContainerElement&&this.domElementProvider.removeElement(M.proxyContainerElement),delete this.groups[T])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(T){let M=this.groups[T];M&&M.proxyElements.forEach(A=>A.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(T){let M=this.domElementProvider.createElement("div");return M.setAttribute("aria-hidden","false"),M.className="highcharts-a11y-proxy-container"+(T?"-"+T:""),y(M,{top:"0",left:"0"}),this.chart.styledMode||(M.style.whiteSpace="nowrap",M.style.position="absolute"),M}getCurrentGroupOrderInDOM(){let T=P=>{let D=Object.keys(this.groups),w=D.length;for(;w--;){let I=D[w],N=this.groups[I];if(N&&P===N.groupElement)return I}},M=P=>{let D=[],w=P.children;for(let I=0;I<w.length;++I){let N=T(w[I]);N&&D.push(N)}return D},A=M(this.beforeChartProxyPosContainer),x=M(this.afterChartProxyPosContainer);return A.push("series"),A.concat(x)}isDOMOrderGroupOrder(){let T=this.getCurrentGroupOrderInDOM(),M=this.groupOrder.filter(x=>x==="series"||!!this.groups[x]),A=T.length;if(A!==M.length)return!1;for(;A--;)if(T[A]!==M[A])return!1;return!0}updatePosContainerPositions(){let T=this.chart;if(T.renderer.forExport)return;let M=T.renderer.box;T.container.insertBefore(this.afterChartProxyPosContainer,M.nextSibling),T.container.insertBefore(this.beforeChartProxyPosContainer,M),k(this.chart,this.afterChartProxyPosContainer),k(this.chart,this.beforeChartProxyPosContainer)}}}),o(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{unhideChartElementFromAT:m,getAxisRangeDescription:g}=u,{addEvent:v,attr:y}=p;class k extends a{init(){let T=this.chart;this.announcer=new c(T,"polite")}onChartUpdate(){let T=this.chart,M=this,A=T.rangeSelector;A&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),A.buttons&&A.buttons.length&&A.buttons.forEach(x=>{M.setRangeButtonAttrs(x)}),A.maxInput&&A.minInput&&["minInput","maxInput"].forEach(function(x,P){let D=A[x];D&&(m(T,D),M.setRangeInputAttrs(D,"accessibility.rangeSelector."+(P?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let T=this.chart,M=T.rangeSelector,A=M&&M.dropdown,x=M&&M.buttons||[],P=D=>D.setAttribute("aria-hidden",!0);M&&M.hasVisibleDropdown&&A?(m(T,A),x.forEach(D=>P(D.element))):(A&&P(A),x.forEach(D=>m(T,D.element)))}setDropdownAttrs(){let T=this.chart,M=T.rangeSelector&&T.rangeSelector.dropdown;if(M){let A=T.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:T.options.lang.rangeSelectorZoom});M.setAttribute("aria-label",A),M.setAttribute("tabindex",-1)}}setRangeButtonAttrs(T){y(T.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(T,M){let A=this.chart;y(T,{tabindex:-1,"aria-label":A.langFormat(M,{chart:A})})}onButtonNavKbdArrowKey(T,M){let A=T.response,x=this.keyCodes,P=this.chart,D=P.options.accessibility.keyboardNavigation.wrapAround,w=M===x.left||M===x.up?-1:1;return P.highlightRangeSelectorButton(P.highlightedRangeSelectorItemIx+w)?A.success:D?(T.init(w),A.success):A[w>0?"next":"prev"]}onButtonNavKbdClick(T){let M=T.response,A=this.chart;return A.oldRangeSelectorItemState!==3&&this.fakeClickEvent(A.rangeSelector.buttons[A.highlightedRangeSelectorItemIx].element),M.success}onAfterBtnClick(){let T=this.chart,M=g(T.xAxis[0]),A=T.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:T,axisRangeDescription:M});A&&this.announcer.announce(A)}onInputKbdMove(T){let M=this.chart,A=M.rangeSelector,x=M.highlightedInputRangeIx=(M.highlightedInputRangeIx||0)+T;if(x>1||x<0){if(M.accessibility)return M.accessibility.keyboardNavigation.exiting=!0,M.accessibility.keyboardNavigation.tabindexContainer.focus(),M.accessibility.keyboardNavigation.move(T)}else if(A){let P=A[x?"maxDateBox":"minDateBox"],D=A[x?"maxInput":"minInput"];P&&D&&M.setFocusToElement(P,D)}return!0}onInputNavInit(T){let M=this,A=this.chart,x=T>0?0:1,P=A.rangeSelector,D=P&&P[x?"maxDateBox":"minDateBox"],w=P&&P.minInput,I=P&&P.maxInput;if(A.highlightedInputRangeIx=x,D&&w&&I){A.setFocusToElement(D,x?I:w),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=X=>{(X.which||X.keyCode)===this.keyCodes.tab&&M.onInputKbdMove(X.shiftKey?-1:1)&&(X.preventDefault(),X.stopPropagation())},q=v(w,"keydown",N),Z=v(I,"keydown",N);this.removeInputKeydownHandler=()=>{q(),Z()}}}onInputNavTerminate(){let T=this.chart.rangeSelector||{};T.maxInput&&T.hideInput("max"),T.minInput&&T.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let T=this.chart,M=T.rangeSelector,A=M&&M.dropdown;M&&A&&(T.setFocusToElement(M.buttonGroup,A),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=v(A,"keydown",x=>{let P=(x.which||x.keyCode)===this.keyCodes.tab,D=T.accessibility;P&&(x.preventDefault(),x.stopPropagation(),D&&(D.keyboardNavigation.tabindexContainer.focus(),D.keyboardNavigation.move(x.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let T=this.chart,M=this.keyCodes,A=this;return new n(T,{keyCodeMap:[[[M.left,M.right,M.up,M.down],function(x){return A.onButtonNavKbdArrowKey(this,x)}],[[M.enter,M.space],function(){return A.onButtonNavKbdClick(this)}]],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.buttons&&T.rangeSelector.buttons.length)},init:function(x){let P=T.rangeSelector;if(P&&P.hasVisibleDropdown)A.initDropdownNav();else if(P){let D=P.buttons.length-1;T.highlightRangeSelectorButton(x>0?0:D)}},terminate:function(){A.removeDropdownKeydownHandler&&(A.removeDropdownKeydownHandler(),delete A.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let T=this.chart,M=this;return new n(T,{keyCodeMap:[],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.inputGroup&&T.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&T.options.rangeSelector.inputEnabled!==!1&&T.rangeSelector.minInput&&T.rangeSelector.maxInput)},init:function(A){M.onInputNavInit(A)},terminate:function(){M.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(_){function T(A){let x=this.rangeSelector&&this.rangeSelector.buttons||[],P=this.highlightedRangeSelectorItemIx,D=this.rangeSelector&&this.rangeSelector.selected;return P!==void 0&&x[P]&&P!==D&&x[P].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=A,!!x[A]&&(this.setFocusToElement(x[A].box,x[A].element),A!==D&&(this.oldRangeSelectorItemState=x[A].state,x[A].setState(1)),!0)}function M(){let A=this.chart.accessibility;if(A&&A.components.rangeSelector)return A.components.rangeSelector.onAfterBtnClick()}_.compose=function(A,x){let P=A.prototype;P.highlightRangeSelectorButton||(P.highlightRangeSelectorButton=T,v(x,"afterBtnClick",M))}}(k),k}),o(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){var u;let{composed:n}=a,{addEvent:p,merge:m,pushUnique:g}=c;return function(v){function y(P){m(!0,P,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function k(P){return P.marker.states&&P.marker.states.normal&&P.marker.states.normal.opacity}function _(P){return!!(P._hasPointMarkers&&P.points&&P.points.length)}function T(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),_(this)&&this.points.forEach(P=>{P.graphic&&(P.graphic[P.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),P.graphic[P.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function M(P){this.resetA11yMarkerOptions=m(P.options.marker||{},this.userOptions.marker||{})}function A(){let P=this.options;(function(D){let w=D.chart.options.accessibility.enabled,I=(D.options.accessibility&&D.options.accessibility.enabled)!==!1;return w&&I&&function(N){let q=N.chart.options.accessibility;return N.points.length<q.series.pointDescriptionEnabledThreshold||q.series.pointDescriptionEnabledThreshold===!1}(D)})(this)?(P.marker&&P.marker.enabled===!1&&(this.a11yMarkersForced=!0,y(this.options)),_(this)&&function(D){let w=D.points.length;for(;w--;){let I=D.points[w],N=I.options,q=I.hasForcedA11yMarker;if(delete I.hasForcedA11yMarker,N.marker){let Z=q&&k(N)===0;N.marker.enabled&&!Z?(m(!0,N.marker,{states:{normal:{opacity:k(N)||1}}}),I.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(y(N),I.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(D){let w=D.resetA11yMarkerOptions;if(w){let I=w.states&&w.states.normal&&w.states.normal.opacity;D.userOptions&&D.userOptions.marker&&(D.userOptions.marker.enabled=!0),D.update({marker:{enabled:w.enabled,states:{normal:{opacity:I}}}})}}(this),delete this.resetA11yMarkerOptions)}function x(){this.boosted&&this.a11yMarkersForced&&(m(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}v.compose=function(P){g(n,"A11y.FM")&&(p(P,"afterSetOptions",M),p(P,"render",A),p(P,"afterRender",T),p(P,"renderCanvas",x))}}(u||(u={})),u}),o(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(a,c,u,n,p,m,g,v){let{seriesTypes:y}=u,{doc:k}=n,{defined:_,fireEvent:T}=p,{getPointFromXY:M,getSeriesFromName:A,scrollAxisToPoint:x}=v;function P(X){let j=X.index,V=X.series.points,U=V.length;if(V[j]===X)return j;for(;U--;)if(V[U]===X)return U}function D(X){let j=X.chart.options.accessibility.keyboardNavigation.seriesNavigation,V=X.options.accessibility||{},U=V.keyboardNavigation;return U&&U.enabled===!1||V.enabled===!1||X.options.enableMouseTracking===!1||!X.visible||j.pointNavigationEnabledThreshold&&+j.pointNavigationEnabledThreshold<=X.points.length}function w(X){let j=X.series.chart.options.accessibility,V=X.options.accessibility&&X.options.accessibility.enabled===!1;return X.isNull&&j.keyboardNavigation.seriesNavigation.skipNullPoints||X.visible===!1||X.isInside===!1||V||D(X.series)}function I(X){let j=X.series||[],V=j.length;for(let U=0;U<V;++U)if(!D(j[U])){let L=function(R){let G=R.points||[],$=G.length;for(let F=0;F<$;++F)if(!w(G[F]))return G[F];return null}(j[U]);if(L)return L}return null}function N(X){let j=X.series.length,V=!1;for(;j--&&(X.highlightedPoint=X.series[j].points[X.series[j].points.length-1],!(V=X.series[j].highlightNextValidPoint())););return V}function q(X){delete X.highlightedPoint;let j=I(X);return!!j&&j.highlight()}class Z{constructor(j,V){this.keyCodes=V,this.chart=j}init(){let j=this,V=this.chart,U=this.eventProvider=new g;U.addEvent(c,"destroy",function(){return j.onSeriesDestroy(this)}),U.addEvent(V,"afterApplyDrilldown",function(){(function(L){let R=I(L);R&&R.highlight(!1)})(this)}),U.addEvent(V,"drilldown",function(L){let R=L.point,G=R.series;j.lastDrilledDownPoint={x:R.x,y:R.y,seriesName:G?G.name:""}}),U.addEvent(V,"drillupall",function(){setTimeout(function(){j.onDrillupAll()},10)}),U.addEvent(a,"afterSetState",function(){let L=this.graphic&&this.graphic.element,R=k.activeElement,G=R&&R.getAttribute("class"),$=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;V.highlightedPoint===this&&R!==L&&!$&&L&&L.focus&&L.focus()})}onDrillupAll(){let j,V=this.lastDrilledDownPoint,U=this.chart,L=V&&A(U,V.seriesName);V&&L&&_(V.x)&&_(V.y)&&(j=M(L,V.x,V.y)),j=j||I(U),U.container&&U.container.focus(),j&&j.highlight&&j.highlight(!1)}getKeyboardNavigationHandler(){let j=this,V=this.keyCodes,U=this.chart,L=U.inverted;return new m(U,{keyCodeMap:[[L?[V.up,V.down]:[V.left,V.right],function(R){return j.onKbdSideways(this,R)}],[L?[V.left,V.right]:[V.up,V.down],function(R){return j.onKbdVertical(this,R)}],[[V.enter,V.space],function(R,G){var F;let $=U.highlightedPoint;if($){let{plotLeft:H,plotTop:W}=this.chart,{plotX:ne=0,plotY:ue=0}=$;G={...G,chartX:H+ne,chartY:W+ue,point:$,target:((F=$.graphic)==null?void 0:F.element)||G.target},T($.series,"click",G),$.firePointEvent("click",G)}return this.response.success}],[[V.home],function(){return q(U),this.response.success}],[[V.end],function(){return N(U),this.response.success}],[[V.pageDown,V.pageUp],function(R){return U.highlightAdjacentSeries(R===V.pageDown),this.response.success}]],init:function(){return j.onHandlerInit(this)},validate:function(){return!!I(U)},terminate:function(){return j.onHandlerTerminate()}})}onKbdSideways(j,V){let U=this.keyCodes,L=V===U.right||V===U.down;return this.attemptHighlightAdjacentPoint(j,L)}onHandlerInit(j){let V=this.chart;return V.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&V.highlightedPoint?V.highlightedPoint.highlight():q(V),j.response.success}onKbdVertical(j,V){let U=this.chart,L=this.keyCodes,R=V===L.down||V===L.right,G=U.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(j,R);let $=U.highlightedPoint&&U.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return U[$](R),j.response.success}onHandlerTerminate(){let j=this.chart,V=j.options.accessibility.keyboardNavigation;j.tooltip&&j.tooltip.hide(0);let U=j.highlightedPoint&&j.highlightedPoint.series;U&&U.onMouseOut&&U.onMouseOut(),j.highlightedPoint&&j.highlightedPoint.onMouseOut&&j.highlightedPoint.onMouseOut(),V.seriesNavigation.rememberPointFocus||delete j.highlightedPoint}attemptHighlightAdjacentPoint(j,V){let U=this.chart,L=U.options.accessibility.keyboardNavigation.wrapAround;return U.highlightAdjacentPoint(V)||L&&(V?q(U):N(U))?j.response.success:j.response[V?"next":"prev"]}onSeriesDestroy(j){let V=this.chart;V.highlightedPoint&&V.highlightedPoint.series===j&&(delete V.highlightedPoint,V.focusElement&&V.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(X){function j(G){let $,F,H=this.series,W=this.highlightedPoint,ne=W&&P(W)||0,ue=W&&W.series.points||[],ie=this.series&&this.series[this.series.length-1],oe=ie&&ie.points&&ie.points[ie.points.length-1];if(!H[0]||!H[0].points)return!1;if(W){if($=H[W.series.index+(G?1:-1)],(F=ue[ne+(G?1:-1)])||!$||(F=$.points[G?0:$.points.length-1]),!F)return!1}else F=G?H[0].points[0]:oe;return w(F)?(D($=F.series)?this.highlightedPoint=G?$.points[$.points.length-1]:$.points[0]:this.highlightedPoint=F,this.highlightAdjacentPoint(G)):F.highlight()}function V(G){let $=this.highlightedPoint,F=1/0,H;return!!(_($.plotX)&&_($.plotY))&&(this.series.forEach(W=>{D(W)||W.points.forEach(ne=>{if(!_(ne.plotY)||!_(ne.plotX)||ne===$)return;let ue=ne.plotY-$.plotY,ie=Math.abs(ne.plotX-$.plotX),oe=Math.abs(ue)*Math.abs(ue)+ie*ie*4;W.yAxis&&W.yAxis.reversed&&(ue*=-1),!(ue<=0&&G||ue>=0&&!G||oe<5||w(ne))&&oe<F&&(F=oe,H=ne)})}),!!H&&H.highlight())}function U(G){let $,F,H,W=this.highlightedPoint,ne=this.series&&this.series[this.series.length-1],ue=ne&&ne.points&&ne.points[ne.points.length-1];return this.highlightedPoint?!!(($=this.series[W.series.index+(G?-1:1)])&&(F=function(ie,oe,Se,ye){let Ce=1/0,K,Q,ae,ve=oe.points.length,J=re=>!(_(re.plotX)&&_(re.plotY));if(!J(ie)){for(;ve--;)!J(K=oe.points[ve])&&(ae=(ie.plotX-K.plotX)*(ie.plotX-K.plotX)*4+(ie.plotY-K.plotY)*(ie.plotY-K.plotY)*1)<Ce&&(Ce=ae,Q=ve);return _(Q)?oe.points[Q]:void 0}}(W,$)))&&(D($)?(F.highlight(),(H=this.highlightAdjacentSeries(G))?H:(W.highlight(),!1)):(F.highlight(),F.series.highlightNextValidPoint())):($=G?this.series&&this.series[0]:ne,!!(F=G?$&&$.points&&$.points[0]:ue)&&F.highlight())}function L(G=!0){var W,ne;let $=this.series.chart,F=(ne=(W=$.tooltip)==null?void 0:W.label)==null?void 0:ne.element;!this.isNull&&G?this.onMouseOver():$.tooltip&&$.tooltip.hide(0),x(this),this.graphic&&($.setFocusToElement(this.graphic),!G&&$.focusElement&&$.focusElement.removeFocusBorder()),$.highlightedPoint=this;let H=F==null?void 0:F.getBoundingClientRect().top;if(F&&H&&H<0){let ue=window.scrollY;window.scrollTo({behavior:"smooth",top:ue+H})}return this}function R(){let G=this.chart.highlightedPoint,$=(G&&G.series)===this?P(G):0,F=this.points,H=F.length;if(F&&H){for(let W=$;W<H;++W)if(!w(F[W]))return F[W].highlight();for(let W=$;W>=0;--W)if(!w(F[W]))return F[W].highlight()}return!1}X.compose=function(G,$,F){let H=G.prototype,W=$.prototype,ne=F.prototype;H.highlightAdjacentPoint||(H.highlightAdjacentPoint=j,H.highlightAdjacentPointVertical=V,H.highlightAdjacentSeries=U,W.highlight=L,ne.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(ue=>{y[ue]&&(y[ue].prototype.keyboardMoveVertical=!1)}),ne.highlightNextValidPoint=R)}}(Z),Z}),o(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(a,c,u,n,p,m){let{hideSeriesFromAT:g}=c,{describeSeries:v}=p;return class extends a{static compose(y,k,_){n.compose(_),u.compose(_),m.compose(y,k,_)}init(){this.newDataAnnouncer=new n(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new m(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let y=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===y.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(y){y.labelBySeries&&y.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(y){(y.options.accessibility&&y.options.accessibility.enabled)!==!1&&y.visible&&y.getPointsCollection().length!==0?v(y):g(y)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),o(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{unhideChartElementFromAT:m}=c,{getFakeMouseEvent:g}=u,{attr:v,pick:y}=p;return class extends a{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let k=this,_=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(T=>{k.addEvent(_,T,function(){k.updateProxyOverlays()})})}onChartUpdate(){let k=this.chart,_=this;k.mapNavigation&&k.mapNavigation.navButtons.forEach((T,M)=>{m(k,T.element),_.setMapNavButtonAttrs(T.element,"accessibility.zoom.mapZoom"+(M?"Out":"In"))})}setMapNavButtonAttrs(k,_){let T=this.chart;v(k,{tabindex:-1,role:"button","aria-label":T.langFormat(_,{chart:T})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let k=this.chart;if(this.proxyProvider.clearGroup("zoom"),k.resetZoomButton&&this.createZoomProxyButton(k.resetZoomButton,"resetZoomProxyButton",k.langFormat("accessibility.zoom.resetZoomButton",{chart:k})),k.drillUpButton&&k.breadcrumbs&&k.breadcrumbs.list){let _=k.breadcrumbs.list[k.breadcrumbs.list.length-1];this.createZoomProxyButton(k.drillUpButton,"drillUpProxyButton",k.langFormat("accessibility.drillUpButton",{chart:k,buttonText:k.breadcrumbs.getButtonText(_)}))}}createZoomProxyButton(k,_,T){this[_]=this.proxyProvider.addProxyElement("zoom",{click:k},"button",{"aria-label":T,tabindex:-1})}getMapZoomNavigation(){let k=this.keyCodes,_=this.chart,T=this;return new n(_,{keyCodeMap:[[[k.up,k.down,k.left,k.right],function(M){return T.onMapKbdArrow(this,M)}],[[k.tab],function(M,A){return T.onMapKbdTab(this,A)}],[[k.space,k.enter],function(){return T.onMapKbdClick(this)}]],validate:function(){return!!(_.mapView&&_.mapNavigation&&_.mapNavigation.navButtons.length)},init:function(M){return T.onMapNavInit(M)}})}onMapKbdArrow(k,_){let T=this.chart,M=this.keyCodes,A=T.container,x=_===M.up||_===M.down,P=_===M.left||_===M.up?1:-1,D=(x?T.plotHeight:T.plotWidth)/10*P,w=10*Math.random(),I={x:A.offsetLeft+T.plotLeft+T.plotWidth/2+w,y:A.offsetTop+T.plotTop+T.plotHeight/2+w},N=x?{x:I.x,y:I.y+D}:{x:I.x+D,y:I.y};return[g("mousedown",I),g("mousemove",N),g("mouseup",N)].forEach(q=>A.dispatchEvent(q)),k.response.success}onMapKbdTab(k,_){let T=this.chart,M=k.response,A=_.shiftKey,x=A&&!this.focusedMapNavButtonIx||!A&&this.focusedMapNavButtonIx;if(T.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),x)return T.mapView&&T.mapView.zoomBy(),M[A?"prev":"next"];this.focusedMapNavButtonIx+=A?-1:1;let P=T.mapNavigation.navButtons[this.focusedMapNavButtonIx];return T.setFocusToElement(P.box,P.element),P.setState(2),M.success}onMapKbdClick(k){let _=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(_),k.response.success}onMapNavInit(k){let _=this.chart,T=_.mapNavigation.navButtons[0],M=_.mapNavigation.navButtons[1],A=k>0?T:M;_.setFocusToElement(A.box,A.element),A.setState(2),this.focusedMapNavButtonIx=k>0?0:1}simpleButtonNavigation(k,_,T){let M=this.keyCodes,A=this,x=this.chart;return new n(x,{keyCodeMap:[[[M.tab,M.up,M.down,M.left,M.right],function(P,D){let w=P===M.tab&&D.shiftKey||P===M.left||P===M.up;return this.response[w?"prev":"next"]}],[[M.space,M.enter],function(){return y(T(this,x),this.response.success)}]],validate:function(){return x[k]&&x[k].box&&A[_].innerElement},init:function(){x.setFocusToElement(x[k].box,A[_].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(k,_){_.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(k,_){return _.drillUp(),k.response.prev}),this.getMapZoomNavigation()]}}}),o(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(a){let{doc:c,isMS:u,win:n}=a;return{isHighContrastModeActive:function(){let p=/(Edg)/.test(n.navigator.userAgent);if(n.matchMedia&&p)return n.matchMedia("(-ms-high-contrast: active)").matches;if(u&&n.getComputedStyle){let m=c.createElement("div");m.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",c.body.appendChild(m);let g=(m.currentStyle||n.getComputedStyle(m)).backgroundImage;return c.body.removeChild(m),g==="none"}return n.matchMedia&&n.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(p){var v;p.highContrastModeActive=!0;let m=p.options.accessibility.highContrastTheme;p.update(m,!1);let g=((v=m.colors)==null?void 0:v.length)>1;p.series.forEach(function(y){let k=m.plotOptions[y.type]||{},_=g&&y.colorIndex!==void 0?m.colors[y.colorIndex]:k.color||"window",T={color:k.color||"windowText",colors:g?m.colors:[k.color||"windowText"],borderColor:k.borderColor||"window",fillColor:_};y.update(T,!1),y.points&&y.points.forEach(function(M){M.options&&M.options.color&&M.update({color:k.color||"windowText",borderColor:k.borderColor||"window"},!1)})}),p.redraw()}}}),o(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),o(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),o(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),o(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(a){let{error:c,pick:u}=a;function n(m,g,v){let y=m,k,_=0;for(;_<g.length-1;++_)y=y[k=g[_]]=u(y[k],{});y[g[g.length-1]]=v}function p(m,g,v,y){function k(M,A){return A.reduce(function(x,P){return x[P]},M)}let _=k(m.options,g),T=k(m.options,v);Object.keys(y).forEach(function(M){let A=_[M];A!==void 0&&(n(T,y[M],A),c(32,!1,m,{[g.join(".")+"."+M]:v.join(".")+"."+y[M].join(".")}))})}return function(m){(function(g){let v=g.options.chart,y=g.options.accessibility||{};["description","typeDescription"].forEach(function(k){v[k]&&(y[k]=v[k],c(32,!1,g,{[`chart.${k}`]:`use accessibility.${k}`}))})})(m),function(g){g.axes.forEach(function(v){let y=v.options;y&&y.description&&(y.accessibility=y.accessibility||{},y.accessibility.description=y.description,c(32,!1,g,{"axis.description":"use axis.accessibility.description"}))})}(m),m.series&&function(g){let v={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};g.series.forEach(function(y){Object.keys(v).forEach(function(k){let _=y.options[k];k==="accessibility.pointDescriptionFormatter"&&(_=y.options.accessibility&&y.options.accessibility.pointDescriptionFormatter),_!==void 0&&(n(y.options,v[k],k==="skipKeyboardNavigation"?!_:_),c(32,!1,g,{[`series.${k}`]:"series."+v[k].join(".")}))})})}(m),p(m,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),p(m,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),p(m,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),o(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(a,c,u,n,p,m,g,v,y,k,_,T,M,A,x,P,D,w,I,N,q,Z){let{defaultOptions:X}=a,{doc:j}=c,{addEvent:V,extend:U,fireEvent:L,merge:R}=u,{removeElement:G}=n;class ${constructor(H){this.init(H)}init(H){if(this.chart=H,!j.addEventListener){this.zombie=!0,this.components={},H.renderTo.setAttribute("aria-hidden",!0);return}Z(H),this.proxyProvider=new A(this.chart),this.initComponents(),this.keyboardNavigation=new y(H,this.components)}initComponents(){let H=this.chart,W=this.proxyProvider,ne=H.options.accessibility;this.components={container:new m,infoRegions:new v,legend:new k,chartMenu:new _,rangeSelector:new x,series:new P,zoom:new D,navigator:new T},ne.customComponents&&U(this.components,ne.customComponents);let ue=this.components;this.getComponentOrder().forEach(function(ie){ue[ie].initBase(H,W),ue[ie].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(H=>H!=="series")):Object.keys(this.components):[]}update(){let H=this.components,W=this.chart,ne=W.options.accessibility;L(W,"beforeA11yUpdate"),W.types=this.getChartTypes();let ue=ne.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(ue),this.getComponentOrder().forEach(function(ie){H[ie].onChartUpdate(),L(W,"afterA11yComponentUpdate",{name:ie,component:H[ie]})}),this.keyboardNavigation.update(ue),!W.highContrastModeActive&&ne.highContrastMode!==!1&&(w.isHighContrastModeActive()||ne.highContrastMode===!0)&&w.setHighContrastTheme(W),L(W,"afterA11yUpdate",{accessibility:this})}destroy(){let H=this.chart||{},W=this.components;Object.keys(W).forEach(function(ne){W[ne].destroy(),W[ne].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),H.announcerContainer&&G(H.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),H.renderTo&&H.renderTo.setAttribute("aria-hidden",!0),H.focusElement&&H.focusElement.removeFocusBorder()}getChartTypes(){let H={};return this.chart.series.forEach(function(W){H[W.type]=1}),Object.keys(H)}}return function(F){function H(){this.accessibility&&this.accessibility.destroy()}function W(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let oe=this.accessibility;oe&&!oe.zombie&&(oe.proxyProvider.updateProxyElementPositions(),oe.getComponentOrder().forEach(function(Se){oe.components[Se].onChartRender()}))}function ne(oe){let Se=oe.options.accessibility;Se&&(Se.customComponents&&(this.options.accessibility.customComponents=Se.customComponents,delete Se.customComponents),R(!0,this.options.accessibility,Se),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function ue(){let oe=this.accessibility,Se=this.options.accessibility,ye=this.renderer.boxWrapper.element,Ce=this.title;if(Se&&Se.enabled)oe&&!oe.zombie?oe.update():(this.accessibility=oe=new F(this),oe&&!oe.zombie&&oe.update(),ye.getAttribute("role")==="img"&&ye.removeAttribute("role"));else if(oe)oe.destroy&&oe.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Ce&&Ce.element.textContent||"").replace(/</g,"&lt;")),ye.setAttribute("aria-hidden",!0);let K=document.getElementsByClassName("highcharts-description")[0];K&&(K.setAttribute("aria-hidden",!1),K.classList.remove("highcharts-linked-description"))}}function ie(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}F.i18nFormat=p.i18nFormat,F.compose=function(oe,Se,ye,Ce,K,Q){y.compose(oe),M.compose(Ce),k.compose(oe,Se),_.compose(oe),P.compose(oe,ye,Ce),p.compose(oe),g.compose(oe,K),Q&&x.compose(oe,Q);let ae=oe.prototype;ae.updateA11yEnabled||(ae.updateA11yEnabled=ue,V(oe,"destroy",H),V(oe,"render",W),V(oe,"update",ne),["addSeries","init"].forEach(ve=>{V(oe,ve,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(ve=>{V(oe,ve,function(){let J=this.accessibility;J&&!J.zombie&&J.update()})}),V(ye,"update",ie),["update","updatedData","remove"].forEach(ve=>{V(Ce,ve,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}($),R(!0,X,N,{accessibility:{highContrastTheme:I},lang:q}),$}),o(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,c,u,n,p,m,g){return a.i18nFormat=c.i18nFormat,a.A11yChartUtilities=n,a.A11yHTMLUtilities=p,a.AccessibilityComponent=u,a.KeyboardNavigationHandler=m,a.SeriesAccessibilityDescriber=g,c.compose(a.Chart,a.Legend,a.Point,a.Series,a.SVGElement,a.RangeSelector),a})})})(vS);var Wj=vS.exports;const qj=Qu(Wj);var _S={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function o(a,c,u,n){a.hasOwnProperty(c)||(a[c]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:a[c]}})))}o(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(a){let{addEvent:c,correctFloat:u,defined:n,pick:p}=a;function m(_){let T,M=this;return _&&M.pane.forEach(A=>{g(_.chartX-M.plotLeft,_.chartY-M.plotTop,A.center)&&(T=A)}),T}function g(_,T,M,A,x){let P=!0,D=M[0],w=M[1],I=Math.sqrt(Math.pow(_-D,2)+Math.pow(T-w,2));if(n(A)&&n(x)){let N=Math.atan2(u(T-w,8),u(_-D,8));x!==A&&(P=A>x?N>=A&&N<=Math.PI||N<=x&&N>=-Math.PI:N>=A&&N<=u(x,8))}return I<=Math.ceil(M[2]/2)&&P}function v(_){this.polar&&(_.options.inverted&&([_.x,_.y]=[_.y,_.x]),_.isInsidePlot=this.pane.some(T=>g(_.x,_.y,T.center,T.axis&&T.axis.normalizedStartAngleRad,T.axis&&T.axis.normalizedEndAngleRad)))}function y(_){let T=this.chart;_.hoverPoint&&_.hoverPoint.plotX&&_.hoverPoint.plotY&&T.hoverPane&&!g(_.hoverPoint.plotX,_.hoverPoint.plotY,T.hoverPane.center)&&(_.hoverPoint=void 0)}function k(_){let T=this.chart;T.polar?(T.hoverPane=T.getHoverPane(_),_.filter=function(M){return M.visible&&!(!_.shared&&M.directTouch)&&p(M.options.enableMouseTracking,!0)&&(!T.hoverPane||M.xAxis.pane===T.hoverPane)}):T.hoverPane=void 0}return{compose:function(_,T){let M=_.prototype;M.getHoverPane||(M.collectionsWithUpdate.push("pane"),M.getHoverPane=m,c(_,"afterIsInsidePlot",v),c(T,"afterGetHoverData",y),c(T,"beforeGetHoverData",k))}}}),o(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),o(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{extend:p,merge:m,splat:g}=n;class v{constructor(k,_){this.coll="pane",this.init(k,_)}init(k,_){this.chart=_,this.background=[],_.pane.push(this),this.setOptions(k)}setOptions(k){this.options=k=m(u.pane,this.chart.angular?{background:{}}:void 0,k)}render(){let k=this.options,_=this.chart.renderer;this.group||(this.group=_.g("pane-group").attr({zIndex:k.zIndex||0}).add()),this.updateCenter();let T=this.options.background;if(T){let M=Math.max((T=g(T)).length,this.background.length||0);for(let A=0;A<M;A++)T[A]&&this.axis?this.renderBackground(m(u.background,T[A]),A):this.background[A]&&(this.background[A]=this.background[A].destroy(),this.background.splice(A,1))}}renderBackground(k,_){let T={class:"highcharts-pane "+(k.className||"")},M="animate";this.chart.styledMode||p(T,{fill:k.backgroundColor,stroke:k.borderColor,"stroke-width":k.borderWidth}),this.background[_]||(this.background[_]=this.chart.renderer.path().add(this.group),M="attr"),this.background[_][M]({d:this.axis.getPlotBandPath(k.from,k.to,k)}).attr(T)}updateCenter(k){this.center=(k||this.axis||{}).center=a.getCenter.call(this)}update(k,_){m(!0,this.options,k),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(T){T.pane===this&&(T.pane=null,T.update({},_))},this)}}return v.compose=c.compose,v}),o(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c){let{area:{prototype:{pointClass:u,pointClass:{prototype:n}}}}=a.seriesTypes,{defined:p,isNumber:m}=c;return class extends u{setState(){let g=this.state,v=this.series,y=v.chart.polar;p(this.plotHigh)||(this.plotHigh=v.yAxis.toPixels(this.high,!0)),p(this.plotLow)||(this.plotLow=this.plotY=v.yAxis.toPixels(this.low,!0)),v.lowerStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,y&&m(this.plotHighX)&&(this.plotX=this.plotHighX),n.setState.apply(this,arguments),this.state=g,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],y&&m(this.plotLowX)&&(this.plotX=this.plotLowX),v.upperStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.lowerStateMarkerGraphic,v.lowerStateMarkerGraphic=void 0;let k=v.modifyMarkerSettings();n.setState.apply(this,arguments),v.restoreMarkerSettings(k)}haloPath(){let g=this.series.chart.polar,v=[];return this.plotY=this.plotLow,g&&m(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(v=n.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,g&&m(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(v=v.concat(n.haloPath.apply(this,arguments))),v}isValid(){return m(this.low)&&m(this.high)}}}),o(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{noop:p}=c,{area:m,area:{prototype:g},column:{prototype:v}}=u.seriesTypes,{addEvent:y,defined:k,extend:_,isArray:T,isNumber:M,pick:A,merge:x}=n;class P extends m{toYData(w){return[w.low,w.high]}highToXY(w){let I=this.chart,N=this.xAxis.postTranslate(w.rectPlotX||0,this.yAxis.len-(w.plotHigh||0));w.plotHighX=N.x-I.plotLeft,w.plotHigh=N.y-I.plotTop,w.plotLowX=w.plotX}getGraphPath(w){let I=[],N=[],q=g.getGraphPath,Z=this.options,X=this.chart.polar,j=X&&Z.connectEnds!==!1,V=Z.connectNulls,U,L,R,G=Z.step;for(U=(w=w||this.points).length;U--;){L=w[U];let ne=X?{plotX:L.rectPlotX,plotY:L.yBottom,doCurve:!1}:{plotX:L.plotX,plotY:L.plotY,doCurve:!1};L.isNull||j||V||w[U+1]&&!w[U+1].isNull||N.push(ne),R={polarPlotY:L.polarPlotY,rectPlotX:L.rectPlotX,yBottom:L.yBottom,plotX:A(L.plotHighX,L.plotX),plotY:L.plotHigh,isNull:L.isNull},N.push(R),I.push(R),L.isNull||j||V||w[U-1]&&!w[U-1].isNull||N.push(ne)}let $=q.call(this,w);G&&(G===!0&&(G="left"),Z.step={left:"right",center:"center",right:"left"}[G]);let F=q.call(this,I),H=q.call(this,N);Z.step=G;let W=[].concat($,F);return!this.chart.polar&&H[0]&&H[0][0]==="M"&&(H[0]=["L",H[0][1],H[0][2]]),this.graphPath=W,this.areaPath=$.concat(H),W.isArea=!0,W.xMap=$.xMap,this.areaPath.xMap=$.xMap,W}drawDataLabels(){var R,G;let w,I,N,q,Z,X=this.points,j=X.length,V=[],U=this.options.dataLabels,L=this.chart.inverted;if(U){if(T(U)?(q=U[0]||{enabled:!1},Z=U[1]||{enabled:!1}):((q=_({},U)).x=U.xHigh,q.y=U.yHigh,(Z=_({},U)).x=U.xLow,Z.y=U.yLow),q.enabled||((R=this.hasDataLabels)==null?void 0:R.call(this))){for(w=j;w--;)if(I=X[w]){let{plotHigh:$=0,plotLow:F=0}=I;N=q.inside?$<F:$>F,I.y=I.high,I._plotY=I.plotY,I.plotY=$,V[w]=I.dataLabel,I.dataLabel=I.dataLabelUpper,I.below=N,L?q.align||(q.align=N?"right":"left"):q.verticalAlign||(q.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=q,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments),w=j;w--;)(I=X[w])&&(I.dataLabelUpper=I.dataLabel,I.dataLabel=V[w],delete I.dataLabels,I.y=I.low,I.plotY=I._plotY)}if(Z.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(w=j;w--;)if(I=X[w]){let{plotHigh:$=0,plotLow:F=0}=I;N=Z.inside?$<F:$>F,I.below=!N,L?Z.align||(Z.align=N?"left":"right"):Z.verticalAlign||(Z.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Z,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments)}if(q.enabled)for(w=j;w--;)(I=X[w])&&(I.dataLabels=[I.dataLabelUpper,I.dataLabel].filter(function($){return!!$}));this.options.dataLabels=U}}alignDataLabel(){v.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let w={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:I,lowMarker:N}}=this;this.options.marker=x(I,N),N.symbol&&(this.symbol=N.symbol)}return w}restoreMarkerSettings(w){this.options.marker=w.marker,this.symbol=w.symbol}drawPoints(){let w,I,N=this.points.length,q=this.modifyMarkerSettings();for(g.drawPoints.apply(this,arguments),this.restoreMarkerSettings(q),w=0;w<N;)(I=this.points[w]).graphics=I.graphics||[],I.origProps={plotY:I.plotY,plotX:I.plotX,isInside:I.isInside,negative:I.negative,zone:I.zone,y:I.y},(I.graphic||I.graphics[0])&&(I.graphics[0]=I.graphic),I.graphic=I.graphics[1],I.plotY=I.plotHigh,k(I.plotHighX)&&(I.plotX=I.plotHighX),I.y=A(I.high,I.origProps.y),I.negative=I.y<(this.options.threshold||0),this.zones.length&&(I.zone=I.getZone()),this.chart.polar||(I.isInside=I.isTopInside=I.plotY!==void 0&&I.plotY>=0&&I.plotY<=this.yAxis.len&&I.plotX>=0&&I.plotX<=this.xAxis.len),w++;for(g.drawPoints.apply(this,arguments),w=0;w<N;)(I=this.points[w]).graphics=I.graphics||[],(I.graphic||I.graphics[1])&&(I.graphics[1]=I.graphic),I.graphic=I.graphics[0],I.origProps&&(_(I,I.origProps),delete I.origProps),w++}hasMarkerChanged(w,I){let N=w.lowMarker,q=I.lowMarker||{};return N&&(N.enabled===!1||q.symbol!==N.symbol||q.height!==N.height||q.width!==N.width)||super.hasMarkerChanged(w,I)}}return P.defaultOptions=x(m.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),y(P,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(D=>{let w=D.high,I=D.plotY;D.isNull?D.plotY=void 0:(D.plotLow=I,D.plotHigh=M(w)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(w):w,!1,!0,void 0,!0):void 0,this.dataModify&&(D.yBottom=D.plotHigh))})},{order:0}),y(P,"afterTranslate",function(){this.points.forEach(D=>{if(this.chart.polar)this.highToXY(D),D.plotLow=D.plotY,D.tooltipPos=[((D.plotHighX||0)+(D.plotLowX||0))/2,((D.plotHigh||0)+(D.plotLow||0))/2];else{let w=D.pos(!1,D.plotLow),I=D.pos(!1,D.plotHigh);w&&I&&(w[0]=(w[0]+I[0])/2,w[1]=(w[1]+I[1])/2),D.tooltipPos=w}})},{order:3}),_(P.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:a,pointValKey:"low",setStackedPoints:p}),u.registerSeriesType("arearange",P),P}),o(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{spline:{prototype:n}}=c.seriesTypes,{merge:p,extend:m}=u;class g extends a{}return g.defaultOptions=p(a.defaultOptions),m(g.prototype,{getPointSpline:n.getPointSpline}),c.registerSeriesType("areasplinerange",g),g}),o(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),o(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{noop:m}=u,{crisp:g,extend:v,merge:y,pick:k}=p;class _ extends c{pointAttribs(){return{}}translate(){let M=this.yAxis,A=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(x){A.forEach(function(P){x[P]!==null&&(x[P+"Plot"]=M.translate(x[P],0,1,0,1))}),x.plotHigh=x.highPlot})}drawPoints(){let M,A,x,P,D,w,I,N,q,Z,X,j,V,U=this.points,L=this.options,R=this.chart,G=R.renderer,$=this.doQuartiles!==!1,F=this.options.whiskerLength;for(let H of U){let W=(N=H.graphic)?"animate":"attr",ne=H.shapeArgs,ue={},ie={},oe={},Se={},ye=H.color||this.color;if(H.plotY!==void 0){let Ce;q=ne.width,X=(Z=ne.x)+q,j=q/2,M=$?H.q1Plot:H.lowPlot,A=$?H.q3Plot:H.lowPlot,x=H.highPlot,P=H.lowPlot,N||(H.graphic=N=G.g("point").add(this.group),H.stem=G.path().addClass("highcharts-boxplot-stem").add(N),F&&(H.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),$&&(H.box=G.path(I).addClass("highcharts-boxplot-box").add(N)),H.medianShape=G.path(w).addClass("highcharts-boxplot-median").add(N)),R.styledMode||(ie.stroke=H.stemColor||L.stemColor||ye,ie["stroke-width"]=k(H.stemWidth,L.stemWidth,L.lineWidth),ie.dashstyle=H.stemDashStyle||L.stemDashStyle||L.dashStyle,H.stem.attr(ie),F&&(oe.stroke=H.whiskerColor||L.whiskerColor||ye,oe["stroke-width"]=k(H.whiskerWidth,L.whiskerWidth,L.lineWidth),oe.dashstyle=H.whiskerDashStyle||L.whiskerDashStyle||L.dashStyle,H.whiskers.attr(oe)),$&&(ue.fill=H.fillColor||L.fillColor||ye,ue.stroke=L.lineColor||ye,ue["stroke-width"]=L.lineWidth||0,ue.dashstyle=H.boxDashStyle||L.boxDashStyle||L.dashStyle,H.box.attr(ue)),Se.stroke=H.medianColor||L.medianColor||ye,Se["stroke-width"]=k(H.medianWidth,L.medianWidth,L.lineWidth),Se.dashstyle=H.medianDashStyle||L.medianDashStyle||L.dashStyle,H.medianShape.attr(Se));let K=g((H.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,H.stem.strokeWidth());if(Ce=[["M",K,A],["L",K,x],["M",K,M],["L",K,P]],H.stem[W]({d:Ce}),$){let Q=H.box.strokeWidth();M=g(M,Q),A=g(A,Q),Ce=[["M",Z=g(Z,Q),A],["L",Z,M],["L",X=g(X,Q),M],["L",X,A],["L",Z,A],["Z"]],H.box[W]({d:Ce})}if(F){let Q=H.whiskers.strokeWidth();x=g(H.highPlot,Q),P=g(H.lowPlot,Q),Ce=[["M",g(K-(V=typeof F=="string"&&/%$/.test(F)?j*parseFloat(F)/100:Number(F)/2)),x],["L",g(K+V),x],["M",g(K-V),P],["L",g(K+V),P]],H.whiskers[W]({d:Ce})}Ce=[["M",Z,D=g(H.medianPlot,H.medianShape.strokeWidth())],["L",X,D]],H.medianShape[W]({d:Ce})}}}toYData(M){return[M.low,M.q1,M.median,M.q3,M.high]}}return _.defaultOptions=y(c.defaultOptions,a),v(_.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:m,setStackedPoints:m}),n.registerSeriesType("boxplot",_),_}),o(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),o(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{parse:p}=a,{noop:m}=u,{arrayMax:g,arrayMin:v,isNumber:y,merge:k,pick:_,stableSort:T}=n;return class{constructor(M,A){this.setState=m,this.init(M,A)}init(M,A){this.options=M,this.visible=!0,this.chart=A.chart,this.legend=A}addToLegend(M){M.splice(this.options.legendIndex,0,this)}drawLegendSymbol(M){let A,x=_(M.options.itemDistance,20),P=this.legendItem||{},D=this.options,w=D.ranges,I=D.connectorDistance;if(!w||!w.length||!y(w[0].value)){M.options.bubbleLegend.autoRanges=!0;return}T(w,function(X,j){return j.value-X.value}),this.ranges=w,this.setOptions(),this.render();let N=this.getMaxLabelSize(),q=this.ranges[0].radius,Z=2*q;A=(A=I-q+N.width)>0?A:0,this.maxLabel=N,this.movementX=D.labels.align==="left"?A:0,P.labelWidth=Z+A+x,P.labelHeight=Z+N.height/2}setOptions(){let M=this.ranges,A=this.options,x=this.chart.series[A.seriesIndex],P=this.legend.baseline,D={zIndex:A.zIndex,"stroke-width":A.borderWidth},w={zIndex:A.zIndex,"stroke-width":A.connectorWidth},I={align:this.legend.options.rtl||A.labels.align==="left"?"right":"left",zIndex:A.zIndex},N=x.options.marker.fillOpacity,q=this.chart.styledMode;M.forEach(function(Z,X){q||(D.stroke=_(Z.borderColor,A.borderColor,x.color),D.fill=_(Z.color,A.color,N!==1?p(x.color).setOpacity(N).get("rgba"):x.color),w.stroke=_(Z.connectorColor,A.connectorColor,x.color)),M[X].radius=this.getRangeRadius(Z.value),M[X]=k(M[X],{center:M[0].radius-M[X].radius+P}),q||k(!0,M[X],{bubbleAttribs:k(D),connectorAttribs:k(w),labelAttribs:I})},this)}getRangeRadius(M){let A=this.options,x=this.options.seriesIndex,P=this.chart.series[x],D=A.ranges[0].value,w=A.ranges[A.ranges.length-1].value,I=A.minSize,N=A.maxSize;return P.getRadius.call(this,w,D,I,N,M)}render(){let M=this.legendItem||{},A=this.chart.renderer,x=this.options.zThreshold;for(let P of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),M.symbol=A.g("bubble-legend"),M.label=A.g("bubble-legend-item").css(this.legend.itemStyle||{}),M.symbol.translateX=0,M.symbol.translateY=0,M.symbol.add(M.label),M.label.add(M.group),this.ranges))P.value>=x&&this.renderRange(P);this.hideOverlappingLabels()}renderRange(M){let A=this.ranges[0],x=this.legend,P=this.options,D=P.labels,w=this.chart,I=w.series[P.seriesIndex],N=w.renderer,q=this.symbols,Z=q.labels,X=M.center,j=Math.abs(M.radius),V=P.connectorDistance||0,U=D.align,L=x.options.rtl,R=P.borderWidth,G=P.connectorWidth,$=A.radius||0,F=X-j-R/2+G/2,H=(F%1?1:.5)-(G%2?0:.5),W=N.styledMode,ne=L||U==="left"?-V:V;U==="center"&&(ne=0,P.connectorDistance=0,M.labelAttribs.align="center"),q.bubbleItems.push(N.circle($,X+H,j).attr(W?{}:M.bubbleAttribs).addClass((W?"highcharts-color-"+I.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(P.className||"")).add(this.legendItem.symbol)),q.connectors.push(N.path(N.crispLine([["M",$,F],["L",$+ne,F]],P.connectorWidth)).attr(W?{}:M.connectorAttribs).addClass((W?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(P.connectorClassName||"")).add(this.legendItem.symbol));let ue=N.text(this.formatLabel(M)).attr(W?{}:M.labelAttribs).css(W?{}:D.style).addClass("highcharts-bubble-legend-labels "+(P.labels.className||"")).add(this.legendItem.symbol),ie={x:$+ne+P.labels.x,y:F+P.labels.y+.4*ue.getBBox().height};ue.attr(ie),Z.push(ue),ue.placed=!0,ue.alignAttr=ie}getMaxLabelSize(){let M,A;return this.symbols.labels.forEach(function(x){A=x.getBBox(!0),M=M?A.width>M.width?A:M:A}),M||{}}formatLabel(M){let A=this.options,x=A.labels.formatter,P=A.labels.format,{numberFormatter:D}=this.chart;return P?c.format(P,M):x?x.call(M):D(M.value,1)}hideOverlappingLabels(){let M=this.chart,A=this.options.labels.allowOverlap,x=this.symbols;!A&&x&&(M.hideOverlappingLabels(x.labels),x.labels.forEach(function(P,D){P.newOpacity?P.newOpacity!==P.oldOpacity&&x.connectors[D].show():x.connectors[D].hide()}))}getRanges(){let M=this.legend.bubbleLegend,A=M.chart.series,x=M.options.ranges,P,D,w=Number.MAX_VALUE,I=-Number.MAX_VALUE;return A.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(D=N.zData.filter(y)).length&&(w=_(N.options.zMin,Math.min(w,Math.max(v(D),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),I=_(N.options.zMax,Math.max(I,g(D))))}),P=w===I?[{value:I}]:[{value:w},{value:(w+I)/2},{value:I,autoRanges:!0}],x.length&&x[0].radius&&P.reverse(),P.forEach(function(N,q){x&&x[q]&&(P[q]=k(x[q],N))}),P}predictBubbleSizes(){let M=this.chart,A=M.legend.options,x=A.floating,P=A.layout==="horizontal",D=P?M.legend.lastLineHeight:0,w=M.plotSizeX,I=M.plotSizeY,N=M.series[this.options.seriesIndex],q=N.getPxExtremes(),Z=Math.ceil(q.minPxSize),X=Math.ceil(q.maxPxSize),j=Math.min(I,w),V,U=N.options.maxSize;return x||!/%$/.test(U)?V=X:(V=(j+D)*(U=parseFloat(U))/100/(U/100+1),(P&&I-V>=w||!P&&w-V>=I)&&(V=X)),[Z,Math.ceil(V)]}updateRanges(M,A){let x=this.legend.options.bubbleLegend;x.minSize=M,x.maxSize=A,x.ranges=this.getRanges()}correctSizes(){let M=this.legend,A=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(A.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,A.maxPxSize),M.render())}}}),o(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{setOptions:m}=u,{composed:g}=n,{addEvent:v,objectEach:y,pushUnique:k,wrap:_}=p;function T(w,I,N){let q,Z,X,j=this.legend,V=M(this)>=0;j&&j.options.enabled&&j.bubbleLegend&&j.options.bubbleLegend.autoRanges&&V?(q=j.bubbleLegend.options,Z=j.bubbleLegend.predictBubbleSizes(),j.bubbleLegend.updateRanges(Z[0],Z[1]),q.placed||(j.group.placed=!1,j.allItems.forEach(U=>{(X=U.legendItem||{}).group&&(X.group.translateY=void 0)})),j.render(),q.placed||(this.getMargins(),this.axes.forEach(function(U){U.visible&&U.render(),q.placed||(U.setScale(),U.updateNames(),y(U.ticks,function(L){L.isNew=!0,L.isNewLabel=!0}))}),this.getMargins()),q.placed=!0,w.call(this,I,N),j.bubbleLegend.correctSizes(),D(j,A(j))):(w.call(this,I,N),j&&j.options.enabled&&j.bubbleLegend&&(j.render(),D(j,A(j))))}function M(w){let I=w.series,N=0;for(;N<I.length;){if(I[N]&&I[N].isBubble&&I[N].visible&&I[N].zData.length)return N;N++}return-1}function A(w){let I=w.allItems,N=[],q=I.length,Z,X,j,V=0,U=0;for(V=0;V<q;V++)if(X=I[V].legendItem||{},j=(I[V+1]||{}).legendItem||{},X.labelHeight&&(I[V].itemHeight=X.labelHeight),I[V]===I[q-1]||X.y!==j.y){for(N.push({height:0}),Z=N[N.length-1];U<=V;U++)I[U].itemHeight>Z.height&&(Z.height=I[U].itemHeight);Z.step=V}return N}function x(w){let I=this.bubbleLegend,N=this.options,q=N.bubbleLegend,Z=M(this.chart);I&&I.ranges&&I.ranges.length&&(q.ranges.length&&(q.autoRanges=!!q.ranges[0].autoRanges),this.destroyItem(I)),Z>=0&&N.enabled&&q.enabled&&(q.seriesIndex=Z,this.bubbleLegend=new c(q,this),this.bubbleLegend.addToLegend(w.allItems))}function P(w){let I;if(w.defaultPrevented)return!1;let N=w.legendItem,q=this.chart,Z=N.visible;this&&this.bubbleLegend&&(N.visible=!Z,N.ignoreSeries=Z,I=M(q)>=0,this.bubbleLegend.visible!==I&&(this.update({bubbleLegend:{enabled:I}}),this.bubbleLegend.visible=I),N.visible=Z)}function D(w,I){let N=w.allItems,q=w.options.rtl,Z,X,j,V,U=0;N.forEach((L,R)=>{(V=L.legendItem||{}).group&&(Z=V.group.translateX||0,X=V.y||0,((j=L.movementX)||q&&L.ranges)&&(j=q?Z-L.options.maxSize/2:Z+j,V.group.attr({translateX:j})),R>I[U].step&&U++,V.group.attr({translateY:Math.round(X+I[U].height/2)}),V.y=X+I[U].height/2)})}return{compose:function(w,I){k(g,"Series.BubbleLegend")&&(m({legend:{bubbleLegend:a}}),_(w.prototype,"drawChartBox",T),v(I,"afterGetAllItems",x),v(I,"itemClick",P))}}}),o(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=c,{extend:p}=u;class m extends n{haloPath(v){let y=(v&&this.marker&&this.marker.radius||0)+v;if(this.series.chart.inverted){let k=this.pos()||[0,0],{xAxis:_,yAxis:T,chart:M}=this.series;return M.renderer.symbols.circle(_.len-k[1]-y,T.len-k[0]-y,2*y,2*y)}return a.prototype.haloPath.call(this,y)}}return p(m.prototype,{ttBelow:!1}),m}),o(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m){let{parse:g}=u,{composed:v,noop:y}=n,{series:k,seriesTypes:{column:{prototype:_},scatter:T}}=p,{addEvent:M,arrayMax:A,arrayMin:x,clamp:P,extend:D,isNumber:w,merge:I,pick:N,pushUnique:q}=m;function Z(){let j=this.len,{coll:V,isXAxis:U,min:L}=this,R=U?"xData":"yData",G=(this.max||0)-(L||0),$=0,F=j,H=j/G,W;(V==="xAxis"||V==="yAxis")&&(this.series.forEach(ne=>{if(ne.bubblePadding&&ne.reserveSpace()){this.allowZoomOutside=!0,W=!0;let ue=ne[R];if(U&&((ne.onPoint||ne).getRadii(0,0,ne),ne.onPoint&&(ne.radii=ne.onPoint.radii)),G>0){let ie=ue.length;for(;ie--;)if(w(ue[ie])&&this.dataMin<=ue[ie]&&ue[ie]<=this.max){let oe=ne.radii&&ne.radii[ie]||0;$=Math.min((ue[ie]-L)*H-oe,$),F=Math.max((ue[ie]-L)*H+oe,F)}}}}),W&&G>0&&!this.logarithmic&&(F-=j,H*=(j+Math.max(0,$)-Math.min(F,j))/j,[["min","userMin",$],["max","userMax",F]].forEach(ne=>{N(this.options[ne[0]],this[ne[1]])===void 0&&(this[ne[0]]+=ne[2]/H)})))}class X extends T{static compose(V,U,L){a.compose(U,L),q(v,"Series.Bubble")&&M(V,"foundExtremes",Z)}animate(V){!V&&this.points.length<this.options.animationLimit&&this.points.forEach(function(U){let{graphic:L,plotX:R=0,plotY:G=0}=U;L&&L.width&&(this.hasRendered||L.attr({x:R,y:G,width:1,height:1}),L.animate(this.markerAttribs(U),this.options.animation))},this)}getRadii(){let V=this.zData,U=this.yData,L=[],R,G,$,F=this.chart.bubbleZExtremes,{minPxSize:H,maxPxSize:W}=this.getPxExtremes();if(!F){let ne,ue=Number.MAX_VALUE,ie=-Number.MAX_VALUE;this.chart.series.forEach(oe=>{if(oe.bubblePadding&&oe.reserveSpace()){let Se=(oe.onPoint||oe).getZExtremes();Se&&(ue=Math.min(N(ue,Se.zMin),Se.zMin),ie=Math.max(N(ie,Se.zMax),Se.zMax),ne=!0)}}),ne?(F={zMin:ue,zMax:ie},this.chart.bubbleZExtremes=F):F={zMin:0,zMax:0}}for(G=0,R=V.length;G<R;G++)$=V[G],L.push(this.getRadius(F.zMin,F.zMax,H,W,$,U&&U[G]));this.radii=L}getRadius(V,U,L,R,G,$){let F=this.options,H=F.sizeBy!=="width",W=F.zThreshold,ne=U-V,ue=.5;if($===null||G===null)return null;if(w(G)){if(F.sizeByAbsoluteValue&&(G=Math.abs(G-W),U=ne=Math.max(U-W,Math.abs(V-W)),V=0),G<V)return L/2-1;ne>0&&(ue=(G-V)/ne)}return H&&ue>=0&&(ue=Math.sqrt(ue)),Math.ceil(L+ue*(R-L))/2}hasData(){return!!this.processedXData.length}markerAttribs(V,U){let L=super.markerAttribs(V,U),{height:R=0,width:G=0}=L;return this.chart.inverted?D(L,{x:(V.plotX||0)-G/2,y:(V.plotY||0)-R/2}):L}pointAttribs(V,U){let L=this.options.marker.fillOpacity,R=k.prototype.pointAttribs.call(this,V,U);return L!==1&&(R.fill=g(R.fill).setOpacity(L).get("rgba")),R}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:V,options:U,radii:L}=this,{minPxSize:R}=this.getPxExtremes(),G=V.length;for(;G--;){let $=V[G],F=L?L[G]:0;this.zoneAxis==="z"&&($.negative=($.z||0)<(U.zThreshold||0)),w(F)&&F>=R/2?($.marker=D($.marker,{radius:F,width:2*F,height:2*F}),$.dlBox={x:$.plotX-F,y:$.plotY-F,width:2*F,height:2*F}):($.shapeArgs=$.plotY=$.dlBox=void 0,$.isInside=!1)}}getPxExtremes(){let V=Math.min(this.chart.plotWidth,this.chart.plotHeight),U=G=>{let $;return typeof G=="string"&&($=/%$/.test(G),G=parseInt(G,10)),$?V*G/100:G},L=U(N(this.options.minSize,8)),R=Math.max(U(N(this.options.maxSize,"20%")),L);return{minPxSize:L,maxPxSize:R}}getZExtremes(){let V=this.options,U=(this.zData||[]).filter(w);if(U.length){let L=N(V.zMin,P(x(U),V.displayNegative===!1?V.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),R=N(V.zMax,A(U));if(w(L)&&w(R))return{zMin:L,zMax:R}}}}return X.defaultOptions=I(T.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:j}=this.series.chart,{z:V}=this.point;return w(V)?j(V,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),D(X.prototype,{alignDataLabel:_.alignDataLabel,applyZones:y,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:c,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),M(X,"updatedData",j=>{delete j.target.chart.bubbleZExtremes}),M(X,"remove",j=>{delete j.target.chart.bubbleZExtremes}),p.registerSeriesType("bubble",X),X}),o(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c){let{seriesTypes:{column:{prototype:{pointClass:{prototype:u}}},arearange:{prototype:{pointClass:n}}}}=a,{extend:p,isNumber:m}=c;class g extends n{isValid(){return m(this.low)}}return p(g.prototype,{setState:u.setState}),g}),o(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{noop:p}=c,{seriesTypes:{arearange:m,column:g,column:{prototype:v}}}=u,{addEvent:y,clamp:k,extend:_,isNumber:T,merge:M,pick:A}=n;class x extends m{setOptions(){return M(!0,arguments[0],{stacking:void 0}),m.prototype.setOptions.apply(this,arguments)}translate(){return v.translate.apply(this)}pointAttribs(){return v.pointAttribs.apply(this,arguments)}translate3dPoints(){return v.translate3dPoints.apply(this,arguments)}translate3dShapes(){return v.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let D,w,I,N,q=this.yAxis,Z=this.xAxis,X=Z.startAngleRad,j=this.chart,V=this.xAxis.isRadial,U=Math.max(j.chartWidth,j.chartHeight)+999;this.points.forEach(L=>{let R=L.shapeArgs||{},G=this.options.minPointLength,$=L.plotY,F=q.translate(L.high,0,1,0,1);if(T(F)&&T($))if(L.plotHigh=k(F,-U,U),L.plotLow=k($,-U,U),N=L.plotHigh,Math.abs(D=A(L.rectPlotY,L.plotY)-L.plotHigh)<G?(w=G-D,D+=w,N-=w/2):D<0&&(D*=-1,N-=D),V&&this.polar)I=L.barX+X,L.shapeType="arc",L.shapeArgs=this.polar.arc(N+D,N,I,I+L.pointWidth);else{R.height=D,R.y=N;let{x:H=0,width:W=0}=R;L.shapeArgs=M(L.shapeArgs,this.crispCol(H,N,W,D)),L.tooltipPos=j.inverted?[q.len+q.pos-j.plotLeft-N-D/2,Z.len+Z.pos-j.plotTop-H-W/2,D]:[Z.left-j.plotLeft+H+W/2,q.pos-j.plotTop+N+D/2,D]}})}}return x.defaultOptions=M(g.defaultOptions,m.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),y(x,"afterColumnTranslate",function(){x.prototype.afterColumnTranslate.apply(this)},{order:5}),_(x.prototype,{directTouch:!0,pointClass:a,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:v.adjustForMissingColumns,animate:v.animate,crispCol:v.crispCol,drawGraph:p,drawPoints:v.drawPoints,getSymbol:p,drawTracker:v.drawTracker,getColumnMetrics:v.getColumnMetrics}),u.registerSeriesType("columnrange",x),x}),o(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),o(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u){let{column:n}=c.seriesTypes,{clamp:p,merge:m,pick:g}=u;class v extends n{translate(){let k=this.chart,_=this.options,T=this.dense=this.closestPointRange*this.xAxis.transA<2,M=this.borderWidth=g(_.borderWidth,T?0:1),A=this.yAxis,x=_.threshold,P=g(_.minPointLength,5),D=this.getColumnMetrics(),w=D.width,I=this.pointXOffset=D.offset,N=this.translatedThreshold=A.getThreshold(x),q=this.barW=Math.max(w,1+2*M);for(let Z of(k.inverted&&(N-=.5),_.pointPadding&&(q=Math.ceil(q)),super.translate(),this.points)){let X=g(Z.yBottom,N),j=999+Math.abs(X),V=p(Z.plotY,-j,A.len+j),U=q/2,L=Math.min(V,X),R=Math.max(V,X)-L,G=Z.plotX+I,$,F,H,W,ne,ue,ie,oe,Se,ye,Ce;_.centerInCategory&&(G=this.adjustForMissingColumns(G,w,Z,D)),Z.barX=G,Z.pointWidth=w,Z.tooltipPos=k.inverted?[A.len+A.pos-k.plotLeft-V,this.xAxis.len-G-U,R]:[G+U,V+A.pos-k.plotTop,R],$=x+(Z.total||Z.y),_.stacking==="percent"&&($=x+(Z.y<0)?-100:100);let K=A.toPixels($,!0);H=(F=k.plotHeight-K-(k.plotHeight-N))?U*(L-K)/F:0,W=F?U*(L+R-K)/F:0,ue=G-H+U,ie=G+H+U,oe=G+W+U,Se=G-W+U,ye=L-P,Ce=L+R,Z.y<0&&(ye=L,Ce=L+R+P),k.inverted&&(ne=A.width-L,F=K-(A.width-N),H=U*(K-ne)/F,W=U*(K-(ne-R))/F,ie=(ue=G+U+H)-2*H,oe=G-W+U,Se=G+W+U,ye=L,Ce=L+R-P,Z.y<0&&(Ce=L+R+P)),Z.shapeType="path",Z.shapeArgs={x:ue,y:ye,width:ie-ue,height:R,d:[["M",ue,ye],["L",ie,ye],["L",oe,Ce],["L",Se,Ce],["Z"]]}}}}return v.defaultOptions=m(n.defaultOptions,a),c.registerSeriesType("columnpyramid",v),v}),o(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),o(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n,p){let{arearange:m}=n.seriesTypes,{addEvent:g,merge:v,extend:y}=p;class k extends a{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||c.prototype.getColumnMetrics.call(this)}drawDataLabels(){let T=this.pointValKey;if(m)for(let M of(m.prototype.drawDataLabels.call(this),this.points))M.y=M[T]}toYData(T){return[T.low,T.high]}}return k.defaultOptions=v(a.defaultOptions,u),g(k,"afterTranslate",function(){for(let _ of this.points)_.plotLow=_.plotY},{order:0}),y(k.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),n.registerSeriesType("errorbar",k),k}),o(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(a){let{series:{prototype:{pointClass:c}}}=a;return class extends c{setState(u){this.state=u}}}),o(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{noop:p}=c,{series:m,seriesTypes:{column:g}}=u,{clamp:v,isNumber:y,extend:k,merge:_,pick:T,pInt:M,defined:A}=n;class x extends m{translate(){let D=this.yAxis,w=this.options,I=D.center;this.generatePoints(),this.points.forEach(N=>{let q=_(w.dial,N.dial),Z=M(q.radius)*I[2]/200,X=M(q.baseLength)*Z/100,j=M(q.rearLength)*Z/100,V=q.baseWidth,U=q.topWidth,L=w.overshoot,R=D.startAngleRad+D.translate(N.y,void 0,void 0,void 0,!0);(y(L)||w.wrap===!1)&&(L=y(L)?L/180*Math.PI:0,R=v(R,D.startAngleRad-L,D.endAngleRad+L)),R=180*R/Math.PI,N.shapeType="path";let G=q.path||[["M",-j,-V/2],["L",X,-V/2],["L",Z,-U/2],["L",Z,U/2],["L",X,V/2],["L",-j,V/2],["Z"]];N.shapeArgs={d:G,translateX:I[0],translateY:I[1],rotation:R},N.plotX=I[0],N.plotY=I[1],A(N.y)&&D.max-D.min&&(N.percentage=(N.y-D.min)/(D.max-D.min)*100)})}drawPoints(){let D=this,w=D.chart,I=D.yAxis.center,N=D.pivot,q=D.options,Z=q.pivot,X=w.renderer;D.points.forEach(j=>{let V=j.graphic,U=j.shapeArgs,L=U.d,R=_(q.dial,j.dial);V?(V.animate(U),U.d=L):j.graphic=X[j.shapeType](U).addClass("highcharts-dial").add(D.group),w.styledMode||j.graphic[V?"animate":"attr"]({stroke:R.borderColor,"stroke-width":R.borderWidth,fill:R.backgroundColor})}),N?N.animate({translateX:I[0],translateY:I[1]}):Z&&(D.pivot=X.circle(0,0,Z.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(I[0],I[1]).add(D.group),w.styledMode||D.pivot.attr({fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":Z.borderWidth}))}animate(D){let w=this;D||w.points.forEach(I=>{let N=I.graphic;N&&(N.attr({rotation:180*w.yAxis.startAngleRad/Math.PI}),N.animate({rotation:I.shapeArgs.rotation},w.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),m.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(D,w){m.prototype.setData.call(this,D,!1),this.processData(),this.generatePoints(),T(w,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return x.defaultOptions=_(m.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),k(x.prototype,{angular:!0,directTouch:!0,drawGraph:p,drawTracker:g.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:a,trackerGroups:["group","dataLabelsGroup"]}),u.registerSeriesType("gauge",x),x}),o(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{composed:u}=a,{addEvent:n,pushUnique:p}=c;function m(){let g,v,y,k=this;k.container&&(g=n(k.container,"mousedown",_=>{let T=k.hoverPoint;T&&T.series&&T.series.hasDraggableNodes&&T.series.options.draggable&&(T.series.onMouseDown(T,_),v=n(k.container,"mousemove",M=>T&&T.series&&T.series.onMouseMove(T,M)),y=n(k.container.ownerDocument,"mouseup",M=>(v(),y(),T&&T.series&&T.series.onMouseUp(T,M))))})),n(k,"destroy",function(){g()})}return{compose:function(g){p(u,"DragNodes")&&n(g,"load",m)},onMouseDown:function(g,v){var k;let y=((k=this.chart.pointer)==null?void 0:k.normalize(v))||v;g.fixedPosition={chartX:y.chartX,chartY:y.chartY,plotX:g.plotX,plotY:g.plotY},g.inDragMode=!0},onMouseMove:function(g,v){var y;if(g.fixedPosition&&g.inDragMode){let k,_,T=this.chart,M=((y=T.pointer)==null?void 0:y.normalize(v))||v,A=g.fixedPosition.chartX-M.chartX,x=g.fixedPosition.chartY-M.chartY,P=T.graphLayoutsLookup;(Math.abs(A)>5||Math.abs(x)>5)&&(k=g.fixedPosition.plotX-A,_=g.fixedPosition.plotY-x,T.isInsidePlot(k,_)&&(g.plotX=k,g.plotY=_,g.hasDragged=!0,this.redrawHalo(g),P.forEach(D=>{D.restartSimulation()})))}},onMouseUp:function(g){g.fixedPosition&&(g.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),g.inDragMode=g.hasDragged=!1,this.options.fixedDraggable||delete g.fixedPosition)},redrawHalo:function(g){g&&this.halo&&this.halo.attr({d:g.haloPath(this.options.states.hover.halo.size)})}}}),o(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{setAnimation:n}=a,{composed:p}=c,{addEvent:m,pushUnique:g}=u;function v(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation()}),this.redraw())}function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation(!1)}),this.redraw())}function k(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(T=>{T.stop()})}function _(){let T,M=!1,A=x=>{x.maxIterations--&&isFinite(x.temperature)&&!x.isStable()&&!x.enableSimulation&&(x.beforeStep&&x.beforeStep(),x.step(),T=!1,M=!0)};if(this.graphLayoutsLookup){for(n(!1,this),this.graphLayoutsLookup.forEach(x=>x.start());!T;)T=!0,this.graphLayoutsLookup.forEach(A);M&&this.series.forEach(x=>{x&&x.layout&&x.render()})}}return{compose:function(T){g(p,"GraphLayout")&&(m(T,"afterPrint",v),m(T,"beforePrint",y),m(T,"predraw",k),m(T,"render",_))},integrations:{},layouts:{}}}),o(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(a,c,u){let{seriesTypes:{bubble:{prototype:{pointClass:n}}}}=u;return class extends n{destroy(){var p;return(p=this.series)!=null&&p.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),c.prototype.destroy.apply(this,arguments)}firePointEvent(){let p=this.series.options;if(this.isParentNode&&p.parentNode){let m=p.allowPointSelect;p.allowPointSelect=p.parentNode.allowPointSelect,c.prototype.firePointEvent.apply(this,arguments),p.allowPointSelect=m}else c.prototype.firePointEvent.apply(this,arguments)}select(){let p=this.series.chart;this.isParentNode?(p.getSelectedPoints=p.getSelectedParentNodes,c.prototype.select.apply(this,arguments),p.getSelectedPoints=a.prototype.getSelectedPoints):c.prototype.select.apply(this,arguments)}}}),o(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(a){let{isNumber:c}=a;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:u}=this.series.chart,{value:n}=this.point;return c(n)?u(n,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),o(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(a,c,u){let n=a.getMass(),p=-u.x*c*this.diffTemperature,m=-u.y*c*this.diffTemperature;a.fromNode.fixedPosition||(a.fromNode.plotX-=p*n.fromNode/a.fromNode.degree,a.fromNode.plotY-=m*n.fromNode/a.fromNode.degree),a.toNode.fixedPosition||(a.toNode.plotX+=p*n.toNode/a.toNode.degree,a.toNode.plotY+=m*n.toNode/a.toNode.degree)},attractiveForceFunction:function(a,c){return(c-a)/a},barycenter:function(){let a=this.options.gravitationalConstant||0,c=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*a,u=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*a;this.nodes.forEach(function(n){n.fixedPosition||(n.plotX-=c/n.mass/n.degree,n.plotY-=u/n.mass/n.degree)})},getK:function(a){return Math.pow(a.box.width*a.box.height/a.nodes.length,.5)},integrate:function(a,c){let u=-a.options.friction,n=a.options.maxSpeed,p=c.prevX,m=c.prevY,g=(c.plotX+c.dispX-p)*u,v=(c.plotY+c.dispY-m)*u,y=Math.abs,k=y(g)/(g||1),_=y(v)/(v||1),T=k*Math.min(n,Math.abs(g)),M=_*Math.min(n,Math.abs(v));c.prevX=c.plotX+c.dispX,c.prevY=c.plotY+c.dispY,c.plotX+=T,c.plotY+=M,c.temperature=a.vectorLength({x:T,y:M})},repulsive:function(a,c,u){let n=c*this.diffTemperature/a.mass/a.degree;a.fixedPosition||(a.plotX+=u.x*n,a.plotY+=u.y*n)},repulsiveForceFunction:function(a,c){return(c-a)/a*(c>a?1:0)}}}),o(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(a,c){let{noop:u}=a;return{barycenter:function(){let n,p,m=this.options.gravitationalConstant,g=this.box,v=this.nodes;for(let y of v)this.options.splitSeries&&!y.isParentNode?(n=y.series.parentNode.plotX,p=y.series.parentNode.plotY):(n=g.width/2,p=g.height/2),y.fixedPosition||(y.plotX-=(y.plotX-n)*m/(y.mass*Math.sqrt(v.length)),y.plotY-=(y.plotY-p)*m/(y.mass*Math.sqrt(v.length)))},getK:u,integrate:c.integrate,repulsive:function(n,p,m,g){let v=p*this.diffTemperature/n.mass/n.degree,y=m.x*v,k=m.y*v;n.fixedPosition||(n.plotX+=y,n.plotY+=k),g.fixedPosition||(g.plotX-=y,g.plotY-=k)},repulsiveForceFunction:function(n,p,m,g){return Math.min(n,(m.marker.radius+g.marker.radius)/2)}}}),o(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(a,c,u,n){let p=a.getMass(),m=u.x/n*c,g=u.y/n*c;a.fromNode.fixedPosition||(a.fromNode.dispX-=m*p.fromNode/a.fromNode.degree,a.fromNode.dispY-=g*p.fromNode/a.fromNode.degree),a.toNode.fixedPosition||(a.toNode.dispX+=m*p.toNode/a.toNode.degree,a.toNode.dispY+=g*p.toNode/a.toNode.degree)},attractiveForceFunction:function(a,c){return a*a/c},barycenter:function(){let a=this.options.gravitationalConstant,c=this.barycenter.xFactor,u=this.barycenter.yFactor;this.nodes.forEach(function(n){if(!n.fixedPosition){let p=n.getDegree(),m=p*(1+p/2);n.dispX+=(c-n.plotX)*a*m/n.degree,n.dispY+=(u-n.plotY)*a*m/n.degree}})},getK:function(a){return Math.pow(a.box.width*a.box.height/a.nodes.length,.3)},integrate:function(a,c){c.dispX+=c.dispX*a.options.friction,c.dispY+=c.dispY*a.options.friction;let u=c.temperature=a.vectorLength({x:c.dispX,y:c.dispY});u!==0&&(c.plotX+=c.dispX/u*Math.min(Math.abs(c.dispX),a.temperature),c.plotY+=c.dispY/u*Math.min(Math.abs(c.dispY),a.temperature))},repulsive:function(a,c,u,n){a.dispX+=u.x/n*c/a.degree,a.dispY+=u.y/n*c/a.degree},repulsiveForceFunction:function(a,c){return c*c/a}}}),o(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class a{constructor(u){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=u,this.boxSize=Math.min(u.width,u.height)}divideBox(){let u=this.box.width/2,n=this.box.height/2;this.nodes[0]=new a({left:this.box.left,top:this.box.top,width:u,height:n}),this.nodes[1]=new a({left:this.box.left+u,top:this.box.top,width:u,height:n}),this.nodes[2]=new a({left:this.box.left+u,top:this.box.top+n,width:u,height:n}),this.nodes[3]=new a({left:this.box.left,top:this.box.top+n,width:u,height:n})}getBoxPosition(u){let n=u.plotX<this.box.left+this.box.width/2,p=u.plotY<this.box.top+this.box.height/2;return n?p?0:3:p?1:2}insert(u,n){let p;this.isInternal?this.nodes[this.getBoxPosition(u)].insert(u,n-1):(this.isEmpty=!1,this.body?n?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,n-1),this.body=!0),this.nodes[this.getBoxPosition(u)].insert(u,n-1)):((p=new a({top:u.plotX||NaN,left:u.plotY||NaN,width:.1,height:.1})).body=u,p.isInternal=!1,this.nodes.push(p)):(this.isInternal=!1,this.body=u))}updateMassAndCenter(){let u=0,n=0,p=0;if(this.isInternal){for(let m of this.nodes)m.isEmpty||(u+=m.mass,n+=m.plotX*m.mass,p+=m.plotY*m.mass);n/=u,p/=u}else this.body&&(u=this.body.mass,n=this.body.plotX,p=this.body.plotY);this.mass=u,this.plotX=n,this.plotY=p}}return a}),o(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(a){return class{constructor(c,u,n,p){this.box={left:c,top:u,width:n,height:p},this.maxDepth=25,this.root=new a(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(c){c.updateMassAndCenter()})}insertNodes(c){for(let u of c)this.root.insert(u,this.maxDepth)}visitNodeRecursive(c,u,n){let p;if(c||(c=this.root),c===this.root&&u&&(p=u(c)),p!==!1){for(let m of c.nodes){if(m.isInternal){if(u&&(p=u(m)),p===!1)continue;this.visitNodeRecursive(m,u,n)}else m.body&&u&&u(m.body);n&&n(m)}c===this.root&&n&&n(c)}}}}),o(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(a,c,u,n,p,m){let{win:g}=c,{clamp:v,defined:y,isFunction:k,fireEvent:_,pick:T}=p;class M{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(x){u.compose(x),u.integrations.euler=a,u.integrations.verlet=m,u.layouts["reingold-fruchterman"]=M}init(x){this.options=x,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=u.integrations[x.integration],this.enableSimulation=x.enableSimulation,this.attractiveForce=T(x.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=T(x.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=x.approximation}updateSimulation(x){this.enableSimulation=T(x,this.options.enableSimulation)}start(){let x=this.series,P=this.options;this.currentStep=0,this.forces=x[0]&&x[0].forces||[],this.chart=x[0]&&x[0].chart,this.initialRendering&&(this.initPositions(),x.forEach(function(D){D.finishedAnimating=!0,D.render()})),this.setK(),this.resetSimulation(P),this.enableSimulation&&this.step()}step(){let x=this.series;for(let P of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[P+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let P of x)P.chart&&P.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&g.cancelAnimationFrame(this.simulation),this.simulation=g.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(P=>{_(P,"afterSimulation")}))}}stop(){this.simulation&&g.cancelAnimationFrame(this.simulation)}setArea(x,P,D,w){this.box={left:x,top:P,width:D,height:w}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(x,P){for(let D of x)P.indexOf(D)===-1&&P.push(D)}removeElementFromCollection(x,P){let D=P.indexOf(x);D!==-1&&P.splice(D,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(x){this.maxIterations=T(x,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(x){this.initialRendering=x}createQuadTree(){this.quadTree=new n(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let x=this.options.initialPositions;if(k(x))for(let P of(x.call(this),this.nodes))y(P.prevX)||(P.prevX=P.plotX),y(P.prevY)||(P.prevY=P.plotY),P.dispX=0,P.dispY=0;else x==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let x,P=this.box,D=this.nodes,w=2*Math.PI/(D.length+1),I=D.filter(function(j){return j.linksTo.length===0}),N={},q=this.options.initialPositionRadius,Z=j=>{for(let V of j.linksFrom||[])N[V.toNode.id]||(N[V.toNode.id]=!0,X.push(V.toNode),Z(V.toNode))},X=[];for(let j of I)X.push(j),Z(j);if(X.length)for(let j of D)X.indexOf(j)===-1&&X.push(j);else X=D;for(let j=0,V=X.length;j<V;++j)(x=X[j]).plotX=x.prevX=T(x.plotX,P.width/2+q*Math.cos(j*w)),x.plotY=x.prevY=T(x.plotY,P.height/2+q*Math.sin(j*w)),x.dispX=0,x.dispY=0}setRandomPositions(){let x,P=this.box,D=this.nodes,w=D.length+1,I=N=>{let q=N*N/Math.PI;return q-Math.floor(q)};for(let N=0,q=D.length;N<q;++N)(x=D[N]).plotX=x.prevX=T(x.plotX,P.width*I(N)),x.plotY=x.prevY=T(x.plotY,P.height*I(w+N)),x.dispX=0,x.dispY=0}force(x,...P){this.integration[x].apply(this,P)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let x=0,P=0,D=0;for(let w of this.nodes)P+=w.plotX*w.mass,D+=w.plotY*w.mass,x+=w.mass;return this.barycenter={x:P,y:D,xFactor:P/x,yFactor:D/x},this.barycenter}barnesHutApproximation(x,P){let D,w,I=this.getDistXY(x,P),N=this.vectorLength(I);return x!==P&&N!==0&&(P.isInternal?P.boxSize/N<this.options.theta&&N!==0?(w=this.repulsiveForce(N,this.k),this.force("repulsive",x,w*P.mass,I,N),D=!1):D=!0:(w=this.repulsiveForce(N,this.k),this.force("repulsive",x,w*P.mass,I,N))),D}repulsiveForces(){if(this.approximation==="barnes-hut")for(let x of this.nodes)this.quadTree.visitNodeRecursive(null,P=>this.barnesHutApproximation(x,P));else{let x,P,D;for(let w of this.nodes)for(let I of this.nodes)w===I||w.fixedPosition||(D=this.getDistXY(w,I),(P=this.vectorLength(D))!==0&&(x=this.repulsiveForce(P,this.k),this.force("repulsive",w,x*I.mass,D,P)))}}attractiveForces(){let x,P,D;for(let w of this.links)w.fromNode&&w.toNode&&(x=this.getDistXY(w.fromNode,w.toNode),(P=this.vectorLength(x))!==0&&(D=this.attractiveForce(P,this.k),this.force("attractive",w,D,x,P)))}applyLimits(){for(let x of this.nodes)x.fixedPosition||(this.integration.integrate(this,x),this.applyLimitBox(x,this.box),x.dispX=0,x.dispY=0)}applyLimitBox(x,P){let D=x.radius;x.plotX=v(x.plotX,P.left+D,P.width-D),x.plotY=v(x.plotY,P.top+D,P.height-D)}coolDown(x,P,D){return x-P*D}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let x=0;for(let P of this.nodes)x+=P.temperature;return x}vectorLength(x){return Math.sqrt(x.x*x.x+x.y*x.y)}getDistR(x,P){let D=this.getDistXY(x,P);return this.vectorLength(D)}getDistXY(x,P){let D=x.plotX-P.plotX,w=x.plotY-P.plotY;return{x:D,y:w,absX:Math.abs(D),absY:Math.abs(w)}}}return M}),o(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{addEvent:p,pick:m}=n;function g(){let k=this.series,_=[];return k.forEach(T=>{T.parentNode&&T.parentNode.selected&&_.push(T.parentNode)}),_}function v(){this.allDataPoints&&delete this.allDataPoints}class y extends u{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(_){u.compose(_),a.integrations.packedbubble=c,a.layouts.packedbubble=y;let T=_.prototype;T.getSelectedParentNodes||(p(_,"beforeRedraw",v),T.getSelectedParentNodes=g)}beforeStep(){this.options.marker&&this.series.forEach(_=>{_&&_.calculateParentRadius()})}isStable(){let _=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&_<1e-5||this.temperature<=0}setCircularPositions(){let _=this.box,T=this.nodes,M=2*Math.PI/(T.length+1),A=this.options.initialPositionRadius,x,P,D=0;for(let w of T)this.options.splitSeries&&!w.isParentNode?(x=w.series.parentNode.plotX,P=w.series.parentNode.plotY):(x=_.width/2,P=_.height/2),w.plotX=w.prevX=m(w.plotX,x+A*Math.cos(w.index||D*M)),w.plotY=w.prevY=m(w.plotY,P+A*Math.sin(w.index||D*M)),w.dispX=0,w.dispY=0,D++}repulsiveForces(){let _,T,M,A=this,x=A.options.bubblePadding,P=A.nodes;P.forEach(D=>{D.degree=D.mass,D.neighbours=0,P.forEach(w=>{_=0,D!==w&&!D.fixedPosition&&(A.options.seriesInteraction||D.series===w.series)&&(M=A.getDistXY(D,w),(T=A.vectorLength(M)-(D.marker.radius+w.marker.radius+x))<0&&(D.degree+=.01,D.neighbours++,_=A.repulsiveForce(-T/Math.sqrt(D.neighbours),A.k,D,w)),A.force("repulsive",D,_*w.mass,M,w,T))})})}applyLimitBox(_,T){let M,A;this.options.splitSeries&&!_.isParentNode&&this.options.parentNodeLimit&&(M=this.getDistXY(_,_.series.parentNode),(A=_.series.parentNodeRadius-_.marker.radius-this.vectorLength(M))<0&&A>-2*_.marker.radius&&(_.plotX-=.01*M.x,_.plotY-=.01*M.y)),super.applyLimitBox(_,T)}}return a.layouts.packedbubble=y,y}),o(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(a,c){let{merge:u,syncTimeout:n}=a,{animObject:p}=c;return{initDataLabels:function(){let m=this.options.dataLabels;if(!this.dataLabelsGroup){let g=this.initDataLabelsGroup();return!this.chart.styledMode&&(m!=null&&m.style)&&g.css(m.style),g.attr({opacity:0}),this.visible&&g.show(),g}return this.dataLabelsGroup.attr(u({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var g;let m=this.options.dataLabels;m!=null&&m.defer&&((g=this.options.layoutAlgorithm)!=null&&g.enableSimulation)?n(()=>{this.deferDataLabels=!1},m?p(m.animation).defer:0):this.deferDataLabels=!1}}}),o(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{deg2rad:u}=a,{addEvent:n,merge:p,uniqueKey:m,defined:g,extend:v}=c;function y(T,M){M=p(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},M);let A=this.renderer.url,x=this.text||this,P=x.textPath,{attributes:D,enabled:w}=M;if(T=T||P&&P.path,P&&P.undo(),T&&w){let I=n(x,"afterModifyTree",N=>{if(T&&w){let q=T.attr("id");q||T.attr("id",q=m());let Z={x:0,y:0};g(D.dx)&&(Z.dx=D.dx,delete D.dx),g(D.dy)&&(Z.dy=D.dy,delete D.dy),x.attr(Z),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let X=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:v(D,{"text-anchor":D.textAnchor,href:`${A}#${q}`}),children:X}}});x.textPath={path:T,undo:I}}else x.attr({dx:0,dy:0}),delete x.textPath;return this.added&&(x.textCache="",this.renderer.buildText(x)),this}function k(T){var x;let M=T.bBox,A=(x=this.element)==null?void 0:x.querySelector("textPath");if(A){let P=[],{b:D,h:w}=this.renderer.fontMetrics(this.element),I=w-D,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),q=A.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Z=q.length,X=(j,V)=>{let{x:U,y:L}=V,R=(A.getRotationOfChar(j)-90)*u,G=Math.cos(R),$=Math.sin(R);return[[U-I*G,L-I*$],[U+D*G,L+D*$]]};for(let j=0,V=0;V<Z;V++){let U=q[V].length;for(let L=0;L<U;L+=5)try{let R=j+L+V,[G,$]=X(R,A.getStartPositionOfChar(R));L===0?(P.push($),P.push(G)):(V===0&&P.unshift($),V===Z-1&&P.push(G))}catch{break}j+=U-1;try{let L=j+V,R=A.getEndPositionOfChar(L),[G,$]=X(L,R);P.unshift($),P.unshift(G)}catch{break}}P.length&&P.push(P[0].slice()),M.polygon=P}return M}function _(T){var P;let M=T.labelOptions,A=T.point,x=M[A.formatPrefix+"TextPath"]||M.textPath;x&&!M.useHTML&&(this.setTextPath(((P=A.getDataLabelPath)==null?void 0:P.call(A,this))||A.graphic,x),A.dataLabelPath&&!x.enabled&&(A.dataLabelPath=A.dataLabelPath.destroy()))}return{compose:function(T){n(T,"afterGetBBox",k),n(T,"beforeAddingDataLabel",_);let M=T.prototype;M.setTextPath||(M.setTextPath=y)}}}),o(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(a,c,u,n,p,m,g,v,y,k,_,T){let{parse:M}=a,{noop:A}=n,{series:{prototype:x},seriesTypes:{bubble:P}}=v,{initDataLabels:D,initDataLabelsDefer:w}=y,{addEvent:I,clamp:N,defined:q,extend:Z,fireEvent:X,isArray:j,isNumber:V,merge:U,pick:L}=k;T.compose(_);class R extends P{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose($,F,H){P.compose($,F,H),c.compose(F),g.compose(F)}accumulateAllPoints(){let $,F=this.chart,H=[];for(let W of F.series)if(W.is("packedbubble")&&W.reserveSpace()){$=W.yData||[];for(let ne=0;ne<$.length;ne++)H.push([null,null,$[ne],W.index,ne,{id:ne,marker:{radius:0}}])}return H}addLayout(){let $=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},F=$.type||"packedbubble",H=this.chart.options.chart,W=this.chart.graphLayoutsStorage,ne=this.chart.graphLayoutsLookup,ue;W||(this.chart.graphLayoutsStorage=W={},this.chart.graphLayoutsLookup=ne=[]),(ue=W[F])||($.enableSimulation=q(H.forExport)?!H.forExport:$.enableSimulation,W[F]=ue=new u.layouts[F],ue.init($),ne.splice(ue.index,0,ue)),this.layout=ue,this.points.forEach(ie=>{ie.mass=2,ie.degree=1,ie.collisionNmb=1}),ue.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),ue.addElementsToCollection([this],ue.series),ue.addElementsToCollection(this.points,ue.nodes)}addSeriesLayout(){let $=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},F=$.type||"packedbubble",H=this.chart.graphLayoutsStorage,W=this.chart.graphLayoutsLookup,ne=U($,$.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),ue=H[F+"-series"];ue||(H[F+"-series"]=ue=new u.layouts[F],ue.init(ne),W.splice(ue.index,0,ue)),this.parentNodeLayout=ue,this.createParentNodes()}calculateParentRadius(){let $=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,$?Math.max(Math.sqrt(Math.pow($.width,2)+Math.pow($.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let $=this.chart.series,F=this.options.zMin,H=this.options.zMax,W=1/0,ne=-1/0;return F&&H?[F,H]:($.forEach(ue=>{ue.yData.forEach(ie=>{q(ie)&&(ie>ne&&(ne=ie),ie<W&&(W=ie))})}),[F=L(F,W),H=L(H,ne)])}checkOverlap($,F){let H=$[0]-F[0],W=$[1]-F[1];return Math.sqrt(H*H+W*W)-Math.abs($[2]+F[2])<-.001}createParentNodes(){let $=this.pointClass,F=this.chart,H=this.parentNodeLayout,W=this.layout.options,ne,ue=this.parentNode,ie={radius:this.parentNodeRadius,lineColor:this.color,fillColor:M(this.color).brighten(.4).get()};W.parentNodeOptions&&(ie=U(W.parentNodeOptions.marker||{},ie)),this.parentNodeMass=0,this.points.forEach(oe=>{this.parentNodeMass+=Math.PI*Math.pow(oe.marker.radius,2)}),this.calculateParentRadius(),H.nodes.forEach(oe=>{oe.seriesIndex===this.index&&(ne=!0)}),H.setArea(0,0,F.plotWidth,F.plotHeight),ne||(ue||(ue=new $(this,{mass:this.parentNodeRadius/2,marker:ie,dataLabels:{inside:!1},states:{normal:{marker:ie},hover:{marker:ie}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(ue.plotX=this.parentNode.plotX,ue.plotY=this.parentNode.plotY),this.parentNode=ue,H.addElementsToCollection([this],H.series),H.addElementsToCollection([ue],H.nodes))}deferLayout(){let $=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),$.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach($=>{$.removeElementFromCollection(this,$.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),x.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(x.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",x.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var ne;if(!this.layout||!this.layout.options.splitSeries)return;let $=this.chart,F=this.layout.options.parentNodeOptions.marker,H={fill:F.fillColor||M(this.color).brighten(.4).get(),opacity:F.fillOpacity,stroke:F.lineColor||this.color,"stroke-width":L(F.lineWidth,this.options.lineWidth)},W={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,$.seriesGroup),(ne=this.group)==null||ne.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&q(this.parentNode.plotX)&&q(this.parentNode.plotY)&&q(this.parentNodeRadius)&&(W=U({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},H),this.parentNode.graphic||(this.graph=this.parentNode.graphic=$.renderer.symbol(H.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(W))}drawTracker(){let $,F=this.parentNode;super.drawTracker(),F&&($=j(F.dataLabels)?F.dataLabels:F.dataLabel?[F.dataLabel]:[],F.graphic&&(F.graphic.element.point=F),$.forEach(H=>{(H.div||H.element).point=F}))}getPointRadius(){let $,F,H,W,ne=this.chart,ue=ne.plotWidth,ie=ne.plotHeight,oe=this.options,Se=oe.useSimulation,ye=Math.min(ue,ie),Ce={},K=[],Q=ne.allDataPoints||[],ae=Q.length;["minSize","maxSize"].forEach(J=>{let re=parseInt(oe[J],10),ce=/%$/.test(oe[J]);Ce[J]=ce?ye*re/100:re*Math.sqrt(ae)}),ne.minRadius=$=Ce.minSize/Math.sqrt(ae),ne.maxRadius=F=Ce.maxSize/Math.sqrt(ae);let ve=Se?this.calculateZExtremes():[$,F];Q.forEach((J,re)=>{H=Se?N(J[2],ve[0],ve[1]):J[2],(W=this.getRadius(ve[0],ve[1],$,F,H))===0&&(W=null),Q[re][2]=W,K.push(W)}),this.radii=K}init(){return x.init.apply(this,arguments),w.call(this),this.eventsToUnbind.push(I(this,"updatedData",function(){this.chart.series.forEach($=>{$.type===this.type&&($.isDirty=!0)},this)})),this}onMouseUp($){if($.fixedPosition&&!$.removed){let F,H=this.layout,W=this.parentNodeLayout;W&&H.options.dragBetweenSeries&&W.nodes.forEach(ne=>{$&&$.marker&&ne!==$.series.parentNode&&(F=H.getDistXY($,ne),H.vectorLength(F)-ne.marker.radius-$.marker.radius<0&&(ne.series.addPoint(U($.options,{plotX:$.plotX,plotY:$.plotY}),!1),H.removeElementFromCollection($,H.nodes),$.remove()))}),c.onMouseUp.apply(this,arguments)}}placeBubbles($){let F=this.checkOverlap,H=this.positionBubble,W=[],ne=1,ue=0,ie=0,oe,Se=[],ye,Ce=$.sort((K,Q)=>Q[2]-K[2]);if(Ce.length){if(W.push([[0,0,Ce[0][2],Ce[0][3],Ce[0][4]]]),Ce.length>1)for(W.push([[0,0-Ce[1][2]-Ce[0][2],Ce[1][2],Ce[1][3],Ce[1][4]]]),ye=2;ye<Ce.length;ye++)Ce[ye][2]=Ce[ye][2]||1,F(oe=H(W[ne][ue],W[ne-1][ie],Ce[ye]),W[ne][0])?(W.push([]),ie=0,W[ne+1].push(H(W[ne][ue],W[ne][0],Ce[ye])),ne++,ue=0):ne>1&&W[ne-1][ie+1]&&F(oe,W[ne-1][ie+1])?(ie++,W[ne].push(H(W[ne][ue],W[ne-1][ie],Ce[ye])),ue++):(ue++,W[ne].push(oe));this.chart.stages=W,this.chart.rawPositions=[].concat.apply([],W),this.resizeRadius(),Se=this.chart.rawPositions}return Se}pointAttribs($,F){let H=this.options,W=$&&$.isParentNode,ne=H.marker;W&&H.layoutAlgorithm&&H.layoutAlgorithm.parentNodeOptions&&(ne=H.layoutAlgorithm.parentNodeOptions.marker);let ue=ne.fillOpacity,ie=x.pointAttribs.call(this,$,F);return ue!==1&&(ie["fill-opacity"]=ue),ie}positionBubble($,F,H){let W=Math.asin,ne=Math.acos,ue=Math.pow,ie=Math.abs,oe=(0,Math.sqrt)(ue($[0]-F[0],2)+ue($[1]-F[1],2)),Se=ne((ue(oe,2)+ue(H[2]+F[2],2)-ue(H[2]+$[2],2))/(2*(H[2]+F[2])*oe)),ye=W(ie($[0]-F[0])/oe),Ce=($[1]-F[1]<0?0:Math.PI)+Se+ye*(($[0]-F[0])*($[1]-F[1])<0?1:-1),K=Math.cos(Ce),Q=Math.sin(Ce);return[F[0]+(F[2]+H[2])*Q,F[1]-(F[2]+H[2])*K,H[2],H[3],H[4]]}render(){let $=[];x.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(F=>{j(F.dataLabels)&&F.dataLabels.forEach(H=>{$.push(H)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels($))}resizeRadius(){let $,F,H,W,ne,ue=this.chart,ie=ue.rawPositions,oe=Math.min,Se=Math.max,ye=ue.plotLeft,Ce=ue.plotTop,K=ue.plotHeight,Q=ue.plotWidth;for(let re of($=H=Number.POSITIVE_INFINITY,F=W=Number.NEGATIVE_INFINITY,ie))ne=re[2],$=oe($,re[0]-ne),F=Se(F,re[0]+ne),H=oe(H,re[1]-ne),W=Se(W,re[1]+ne);let ae=[F-$,W-H],ve=[(Q-ye)/ae[0],(K-Ce)/ae[1]],J=oe.apply([],ve);if(Math.abs(J-1)>1e-10){for(let re of ie)re[2]*=J;this.placeBubbles(ie)}else ue.diffY=K/2+Ce-H-(W-H)/2,ue.diffX=Q/2+ye-$-(F-$)/2}seriesBox(){let $,F=this.chart,H=this.data,W=Math.max,ne=Math.min,ue=[F.plotLeft,F.plotLeft+F.plotWidth,F.plotTop,F.plotTop+F.plotHeight];return H.forEach(ie=>{q(ie.plotX)&&q(ie.plotY)&&ie.marker.radius&&($=ie.marker.radius,ue[0]=ne(ue[0],ie.plotX-$),ue[1]=W(ue[1],ie.plotX+$),ue[2]=ne(ue[2],ie.plotY-$),ue[3]=W(ue[3],ie.plotY+$))}),V(ue.width/ue.height)?ue:null}setVisible(){let $=this;x.setVisible.apply($,arguments),$.parentNodeLayout&&$.graph?$.visible?($.graph.show(),$.parentNode.dataLabel&&$.parentNode.dataLabel.show()):($.graph.hide(),$.parentNodeLayout.removeElementFromCollection($.parentNode,$.parentNodeLayout.nodes),$.parentNode.dataLabel&&$.parentNode.dataLabel.hide()):$.layout&&($.visible?$.layout.addElementsToCollection($.points,$.layout.nodes):$.points.forEach(F=>{$.layout.removeElementFromCollection(F,$.layout.nodes)}))}translate(){let $,F,H,W=this.chart,ne=this.data,ue=this.index,ie=this.options.useSimulation;for(let oe of(this.processedXData=this.xData,this.generatePoints(),q(W.allDataPoints)||(W.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ie?H=W.allDataPoints:(H=this.placeBubbles(W.allDataPoints),this.options.draggable=!1),H))oe[3]===ue&&($=ne[oe[4]],F=L(oe[2],void 0),ie||($.plotX=oe[0]-W.plotLeft+W.diffX,$.plotY=oe[1]-W.plotTop+W.diffY),V(F)&&($.marker=Z($.marker,{radius:F,width:2*F,height:2*F}),$.radius=F));ie&&this.deferLayout(),X(this,"afterTranslate")}}return R.defaultOptions=U(P.defaultOptions,m),Z(R.prototype,{pointClass:p,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:D,alignDataLabel:x.alignDataLabel,indexateNodes:A,onMouseDown:c.onMouseDown,onMouseMove:c.onMouseMove,redrawHalo:c.redrawHalo,searchPoint:A}),v.registerSeriesType("packedbubble",R),R}),o(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),o(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(a,c,u,n){let{noop:p}=a,{area:m,line:g,scatter:v}=u.seriesTypes,{extend:y,merge:k}=n;class _ extends v{getGraphPath(){let M=g.prototype.getGraphPath.call(this),A=M.length+1;for(;A--;)(A===M.length||M[A][0]==="M")&&A>0&&M.splice(A,0,["Z"]);return this.areaPath=M,M}drawGraph(){this.options.fillColor=this.color,m.prototype.drawGraph.call(this)}}return _.defaultOptions=k(v.defaultOptions,c),y(_.prototype,{type:"polygon",drawTracker:g.prototype.drawTracker,setStackedPoints:p}),u.registerSeriesType("polygon",_),_}),o(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),o(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u,n){var p;let{defaultOptions:m}=c,{composed:g,noop:v}=u,{addEvent:y,correctFloat:k,defined:_,extend:T,fireEvent:M,isObject:A,merge:x,pick:P,pushUnique:D,relativeLength:w,wrap:I}=n;return function(N){function q(){this.autoConnect=this.isCircular&&P(this.userMax,this.options.max)===void 0&&k(this.endAngleRad-this.startAngleRad)===k(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Z(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(re=>this.ticks[re]&&this.ticks[re].label).filter(re=>!!re)}}function X(){return v}function j(re,ce,ge){let _e=this.pane.center,ze=re.value,Te,Ie,Be;return this.isCircular?(_(ze)?re.point&&(re.point.shapeArgs||{}).start&&(ze=this.chart.inverted?this.translate(re.point.rectPlotY,!0):re.point.x):(Ie=re.chartX||0,Be=re.chartY||0,ze=this.translate(Math.atan2(Be-ge,Ie-ce)-this.startAngleRad,!0)),Ie=(Te=this.getPosition(ze)).x,Be=Te.y):(_(ze)||(Ie=re.chartX,Be=re.chartY),_(Ie)&&_(Be)&&(ge=_e[1]+this.chart.plotTop,ze=this.translate(Math.min(Math.sqrt(Math.pow(Ie-ce,2)+Math.pow(Be-ge,2)),_e[2]/2)-_e[3]/2,!0))),[ze,Ie||0,Be||0]}function V(re,ce,ge){let _e=this.pane.center,ze=this.chart,Te=this.left||0,Ie=this.top||0,Be,Ge=P(ce,_e[2]/2-this.offset),ke;return ge===void 0&&(ge=this.horiz?0:this.center&&-this.center[3]/2),ge&&(Ge+=ge),this.isCircular||ce!==void 0?((ke=this.chart.renderer.symbols.arc(Te+_e[0],Ie+_e[1],Ge,Ge,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Te+_e[0]],ke.yBounds=[Ie+_e[1]-Ge]):(Be=this.postTranslate(this.angleRad,Ge),ke=[["M",this.center[0]+ze.plotLeft,this.center[1]+ze.plotTop],["L",Be.x,Be.y]]),ke}function U(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function L(re,ce,ge){let _e=this.chart,ze=Rt=>{if(typeof Rt=="string"){let ft=parseInt(Rt,10);return fe.test(Rt)&&(ft=ft*Be/100),ft}return Rt},Te=this.center,Ie=this.startAngleRad,Be=Te[2]/2,Ge=Math.min(this.offset,0),ke=this.left||0,me=this.top||0,fe=/%$/,Ae=this.isCircular,De,Pe,je,Xe,et,rt,dt=P(ze(ge.outerRadius),Be),gt=ze(ge.innerRadius),wt=P(ze(ge.thickness),10);if(this.options.gridLineInterpolation==="polygon")rt=this.getPlotLinePath({value:re}).concat(this.getPlotLinePath({value:ce,reverse:!0}));else{re=Math.max(re,this.min),ce=Math.min(ce,this.max);let Rt=this.translate(re),ft=this.translate(ce);Ae||(dt=Rt||0,gt=ft||0),ge.shape!=="circle"&&Ae?(De=Ie+(Rt||0),Pe=Ie+(ft||0)):(De=-Math.PI/2,Pe=1.5*Math.PI,et=!0),dt-=Ge,wt-=Ge,rt=_e.renderer.symbols.arc(ke+Te[0],me+Te[1],dt,dt,{start:Math.min(De,Pe),end:Math.max(De,Pe),innerR:P(gt,dt-wt),open:et,borderRadius:ge.borderRadius}),Ae&&(je=(Pe+De)/2,Xe=ke+Te[0]+Te[2]/2*Math.cos(je),rt.xBounds=je>-Math.PI/2&&je<Math.PI/2?[Xe,_e.plotWidth]:[0,Xe],rt.yBounds=[me+Te[1]+Te[2]/2*Math.sin(je)],rt.yBounds[0]+=je>-Math.PI&&je<0||je>Math.PI?-10:10)}return rt}function R(re){let ce=this.pane.center,ge=this.chart,_e=ge.inverted,ze=re.reverse,Te=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Ie=Te.innerRadius||"0%",Be=Te.outerRadius||"100%",Ge=ce[0]+ge.plotLeft,ke=ce[1]+ge.plotTop,me=this.height,fe=re.isCrosshair,Ae=ce[3]/2,De=re.value,Pe,je,Xe,et,rt,dt,gt,wt,Rt,ft=this.getPosition(De),Ct=ft.x,Tt=ft.y;if(fe&&(De=(wt=this.getCrosshairPosition(re,Ge,ke))[0],Ct=wt[1],Tt=wt[2]),this.isCircular)je=Math.sqrt(Math.pow(Ct-Ge,2)+Math.pow(Tt-ke,2)),Xe=typeof Ie=="string"?w(Ie,1):Ie/je,et=typeof Be=="string"?w(Be,1):Be/je,ce&&Ae&&(Xe<(Pe=Ae/je)&&(Xe=Pe),et<Pe&&(et=Pe)),Rt=[["M",Ge+Xe*(Ct-Ge),ke-Xe*(ke-Tt)],["L",Ct-(1-et)*(Ct-Ge),Tt+(1-et)*(ke-Tt)]];else if((De=this.translate(De))&&(De<0||De>me)&&(De=0),this.options.gridLineInterpolation==="circle")Rt=this.getLinePath(0,De,Ae);else if(Rt=[],ge[_e?"yAxis":"xAxis"].forEach(si=>{si.pane===this.pane&&(rt=si)}),rt){gt=rt.tickPositions,rt.autoConnect&&(gt=gt.concat([gt[0]])),ze&&(gt=gt.slice().reverse()),De&&(De+=Ae);for(let si=0;si<gt.length;si++)dt=rt.getPosition(gt[si],De),Rt.push(si?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Rt}function G(re,ce){let ge=this.translate(re);return this.postTranslate(this.isCircular?ge:this.angleRad,P(this.isCircular?ce:ge<0?0:ge,this.center[2]/2)-this.offset)}function $(){let re=this.center,ce=this.chart,ge=this.options.title;return{x:ce.plotLeft+re[0]+(ge.x||0),y:ce.plotTop+re[1]-{high:.5,middle:.25,low:0}[ge.align]*re[2]+(ge.y||0)}}function F(re){re.beforeSetTickPositions=q,re.createLabelCollector=Z,re.getCrosshairPosition=j,re.getLinePath=V,re.getOffset=U,re.getPlotBandPath=L,re.getPlotLinePath=R,re.getPosition=G,re.getTitlePosition=$,re.postTranslate=Ce,re.setAxisSize=Q,re.setAxisTranslation=ae,re.setOptions=ve}function H(){let re=this.chart,ce=this.options,ge=re.angular&&this.isXAxis,_e=this.pane,ze=_e&&_e.options;if(!ge&&_e&&(re.angular||re.polar)){let Te=2*Math.PI,Ie=(P(ze.startAngle,0)-90)*Math.PI/180,Be=(P(ze.endAngle,P(ze.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ce.angle||0)*Math.PI/180,this.startAngleRad=Ie,this.endAngleRad=Be,this.offset=ce.offset||0;let Ge=(Ie%Te+Te)%Te,ke=(Be%Te+Te)%Te;Ge>Math.PI&&(Ge-=Te),ke>Math.PI&&(ke-=Te),this.normalizedStartAngleRad=Ge,this.normalizedEndAngleRad=ke}}function W(re){this.isRadial&&(re.align=void 0,re.preventDefault())}function ne(){if(this.chart&&this.chart.labelCollectors){let re=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;re>=0&&this.chart.labelCollectors.splice(re,1)}}function ue(re){let ce,ge=this.chart,_e=ge.angular,ze=ge.polar,Te=this.isXAxis,Ie=this.coll,Be=re.userOptions.pane||0,Ge=this.pane=ge.pane&&ge.pane[Be];if(Ie==="colorAxis"){this.isRadial=!1;return}_e?(_e&&Te?(this.isHidden=!0,this.createLabelCollector=X,this.getOffset=v,this.redraw=K,this.render=K,this.setScale=v,this.setCategories=v,this.setTitle=v):F(this),ce=!Te):ze&&(F(this),ce=this.horiz),_e||ze?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&ge.labelCollectors.push(this.labelCollector)):this.isRadial=!1,Ge&&ce&&(Ge.axis=this),this.isCircular=ce}function ie(){this.isRadial&&this.beforeSetTickPositions()}function oe(re){let ce=this.label;if(!ce)return;let ge=this.axis,_e=ce.getBBox(),ze=ge.options.labels,Te=(ge.translate(this.pos)+ge.startAngleRad+Math.PI/2)/Math.PI*180%360,Ie=Math.round(Te),Be=_(ze.y)?0:-(.3*_e.height),Ge=ze.y,ke,me=20,fe=ze.align,Ae="end",De=Ie<0?Ie+360:Ie,Pe=De,je=0,Xe=0;ge.isRadial&&(ke=ge.getPosition(this.pos,ge.center[2]/2+w(P(ze.distance,-25),ge.center[2]/2,-ge.center[2]/2)),ze.rotation==="auto"?ce.attr({rotation:Te}):_(Ge)||(Ge=ge.chart.renderer.fontMetrics(ce).b-_e.height/2),_(fe)||(ge.isCircular?(_e.width>ge.len*ge.tickInterval/(ge.max-ge.min)&&(me=0),fe=Te>me&&Te<180-me?"left":Te>180+me&&Te<360-me?"right":"center"):fe="center",ce.attr({align:fe})),fe==="auto"&&ge.tickPositions.length===2&&ge.isCircular&&(De>90&&De<180?De=180-De:De>270&&De<=360&&(De=540-De),Pe>180&&Pe<=360&&(Pe=360-Pe),(ge.pane.options.startAngle===Ie||ge.pane.options.startAngle===Ie+360||ge.pane.options.startAngle===Ie-360)&&(Ae="start"),fe=Ie>=-90&&Ie<=90||Ie>=-360&&Ie<=-270||Ie>=270&&Ie<=360?Ae==="start"?"right":"left":Ae==="start"?"left":"right",Pe>70&&Pe<110&&(fe="center"),De<15||De>=180&&De<195?je=.3*_e.height:De>=15&&De<=35?je=Ae==="start"?0:.75*_e.height:De>=195&&De<=215?je=Ae==="start"?.75*_e.height:0:De>35&&De<=90?je=Ae==="start"?-(.25*_e.height):_e.height:De>215&&De<=270&&(je=Ae==="start"?_e.height:-(.25*_e.height)),Pe<15?Xe=Ae==="start"?-(.15*_e.height):.15*_e.height:Pe>165&&Pe<=180&&(Xe=Ae==="start"?.15*_e.height:-(.15*_e.height)),ce.attr({align:fe}),ce.translate(Xe,je+Be)),re.pos.x=ke.x+(ze.x||0),re.pos.y=ke.y+(Ge||0))}function Se(re){this.axis.getPosition&&T(re.pos,this.axis.getPosition(this.pos))}function ye({options:re}){re.xAxis&&x(!0,N.radialDefaultOptions.circular,re.xAxis),re.yAxis&&x(!0,N.radialDefaultOptions.radialGauge,re.yAxis)}function Ce(re,ce){let ge=this.chart,_e=this.center;return re=this.startAngleRad+re,{x:ge.plotLeft+_e[0]+Math.cos(re)*ce,y:ge.plotTop+_e[1]+Math.sin(re)*ce}}function K(){this.isDirty=!1}function Q(){let re,ce;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),re=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ce=this.postTranslate(this.angleRad,re[3]/2),re[0]=ce.x-this.chart.plotLeft,re[1]=ce.y-this.chart.plotTop),this.len=this.width=this.height=(re[2]-re[3])*P(this.sector,1)/2)}function ae(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function ve(re){let{coll:ce}=this,{angular:ge,inverted:_e,polar:ze}=this.chart,Te={};ge?this.isXAxis||(Te=x(m.yAxis,N.radialDefaultOptions.radialGauge)):ze&&(Te=this.horiz?x(m.xAxis,N.radialDefaultOptions.circular):x(ce==="xAxis"?m.xAxis:m.yAxis,N.radialDefaultOptions.radial)),_e&&ce==="yAxis"&&(Te.stackLabels=A(m.yAxis,!0)?m.yAxis.stackLabels:{},Te.reversedStacks=!0);let Ie=this.options=x(Te,re);Ie.plotBands||(Ie.plotBands=[]),M(this,"afterSetOptions")}function J(re,ce,ge,_e,ze,Te,Ie){let Be,Ge=this.axis;return Ge.isRadial?["M",ce,ge,"L",(Be=Ge.getPosition(this.pos,Ge.center[2]/2+_e)).x,Be.y]:re.call(this,ce,ge,_e,ze,Te,Ie)}N.radialDefaultOptions=x(a),N.compose=function(re,ce){return D(g,"Axis.Radial")&&(y(re,"afterInit",H),y(re,"autoLabelAlign",W),y(re,"destroy",ne),y(re,"init",ue),y(re,"initialAxisTranslation",ie),y(ce,"afterGetLabelPosition",oe),y(ce,"afterGetPosition",Se),y(u,"setOptions",ye),I(ce.prototype,"getMarkPath",J)),re}}(p||(p={})),p}),o(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m){let{animObject:g}=a,{composed:v}=c,{addEvent:y,defined:k,find:_,isNumber:T,merge:M,pick:A,pushUnique:x,relativeLength:P,splat:D,uniqueKey:w,wrap:I}=m;function N(){(this.pane||[]).forEach(ye=>{ye.render()})}function q(ye){let Ce=ye.args[0].xAxis,K=ye.args[0].yAxis,Q=ye.args[0].chart;Ce&&K&&(K.gridLineInterpolation==="polygon"?(Ce.startOnTick=!0,Ce.endOnTick=!0):Ce.gridLineInterpolation==="polygon"&&Q.inverted&&(K.startOnTick=!0,K.endOnTick=!0))}function Z(){this.pane||(this.pane=[]),this.options.pane=D(this.options.pane),this.options.pane.forEach(ye=>{new n(ye,this)},this)}function X(ye){let Ce=ye.args.marker,K=this.chart.xAxis[0],Q=this.chart.yAxis[0],ae=this.chart.inverted,ve=ae?Q:K,J=ae?K:Q;if(this.chart.polar){ye.preventDefault();let re=(Ce.attr?Ce.attr("start"):Ce.start)-ve.startAngleRad,ce=Ce.attr?Ce.attr("r"):Ce.r,ge=(Ce.attr?Ce.attr("end"):Ce.end)-ve.startAngleRad,_e=Ce.attr?Ce.attr("innerR"):Ce.innerR;ye.result.x=re+ve.pos,ye.result.width=ge-re,ye.result.y=J.len+J.pos-ce,ye.result.height=ce-_e}}function j(ye){let Ce=this.chart;if(Ce.polar&&Ce.hoverPane&&Ce.hoverPane.axis){ye.preventDefault();let K=Ce.hoverPane.center,Q=Ce.mouseDownX||0,ae=Ce.mouseDownY||0,ve=ye.args.chartY,J=ye.args.chartX,re=2*Math.PI,ce=Ce.hoverPane.axis.startAngleRad,ge=Ce.hoverPane.axis.endAngleRad,_e=Ce.inverted?Ce.xAxis[0]:Ce.yAxis[0],ze={},Te="arc";if(ze.x=K[0]+Ce.plotLeft,ze.y=K[1]+Ce.plotTop,this.zoomHor){let Ie=ce>0?ge-ce:Math.abs(ce)+Math.abs(ge),Be=Math.atan2(ae-Ce.plotTop-K[1],Q-Ce.plotLeft-K[0])-ce,Ge=Math.atan2(ve-Ce.plotTop-K[1],J-Ce.plotLeft-K[0])-ce;ze.r=K[2]/2,ze.innerR=K[3]/2,Be<=0&&(Be+=re),Ge<=0&&(Ge+=re),Ge<Be&&(Ge=[Be,Be=Ge][0]),Ie<re&&ce+Ge>ge+(re-Ie)/2&&(Ge=Be,Be=ce<=0?ce:0);let ke=ze.start=Math.max(Be+ce,ce),me=ze.end=Math.min(Ge+ce,ge);if(_e.options.gridLineInterpolation==="polygon"){let fe=Ce.hoverPane.axis,Ae=ke-fe.startAngleRad+fe.pos,De=_e.getPlotLinePath({value:_e.max}),Pe=fe.toValue(Ae),je=fe.toValue(Ae+(me-ke));if(Pe<fe.getExtremes().min){let{min:Xe,max:et}=fe.getExtremes();Pe=et-(Xe-Pe)}if(je<fe.getExtremes().min){let{min:Xe,max:et}=fe.getExtremes();je=et-(Xe-je)}je<Pe&&(je=[Pe,Pe=je][0]),(De=R(De,Pe,je,fe)).push(["L",K[0]+Ce.plotLeft,Ce.plotTop+K[1]]),ze.d=De,Te="path"}}if(this.zoomVert){let Ie=Ce.inverted?Ce.xAxis[0]:Ce.yAxis[0],Be=Math.sqrt(Math.pow(Q-Ce.plotLeft-K[0],2)+Math.pow(ae-Ce.plotTop-K[1],2)),Ge=Math.sqrt(Math.pow(J-Ce.plotLeft-K[0],2)+Math.pow(ve-Ce.plotTop-K[1],2));if(Ge<Be&&(Be=[Ge,Ge=Be][0]),Ge>K[2]/2&&(Ge=K[2]/2),Be<K[3]/2&&(Be=K[3]/2),this.zoomHor||(ze.start=ce,ze.end=ge),ze.r=Ge,ze.innerR=Be,Ie.options.gridLineInterpolation==="polygon"){let ke=Ie.toValue(Ie.len+Ie.pos-Be),me=Ie.toValue(Ie.len+Ie.pos-Ge),fe=Ie.getPlotLinePath({value:me}).concat(Ie.getPlotLinePath({value:ke,reverse:!0}));ze.d=fe,Te="path"}}if(this.zoomHor&&this.zoomVert&&_e.options.gridLineInterpolation==="polygon"){let Ie=Ce.hoverPane.axis,Be=ze.start||0,Ge=ze.end||0,ke=Be-Ie.startAngleRad+Ie.pos,me=Ie.toValue(ke),fe=Ie.toValue(ke+(Ge-Be));if(ze.d instanceof Array){let Ae=ze.d.slice(0,ze.d.length/2),De=ze.d.slice(ze.d.length/2,ze.d.length);De=[...De].reverse();let Pe=Ce.hoverPane.axis;Ae=R(Ae,me,fe,Pe),(De=R(De,me,fe,Pe))&&(De[0][0]="L"),De=[...De].reverse(),ze.d=Ae.concat(De),Te="path"}}ye.attrs=ze,ye.shapeType=Te}}function V(){let ye=this.chart;ye.polar&&(this.polar=new Se(this),ye.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function U(){if(this.chart.polar&&this.xAxis){let{xAxis:ye,yAxis:Ce}=this,K=this.chart;this.kdByAngle=K.tooltip&&K.tooltip.shared,this.kdByAngle||K.inverted?this.searchPoint=L:this.options.findNearestPointBy="xy";let Q=this.points,ae=Q.length;for(;ae--;)this.is("column")||this.is("columnrange")||this.polar.toXY(Q[ae]),K.hasParallelCoordinates||this.yAxis.reversed||(A(Q[ae].y,Number.MIN_VALUE)<Ce.min||Q[ae].x<ye.min||Q[ae].x>ye.max?(Q[ae].isNull=!0,Q[ae].plotY=NaN):Q[ae].isNull=Q[ae].isValid&&!Q[ae].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(y(this,"afterRender",function(){let ve;K.polar&&this.options.clip!==!1&&(ve=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:ve[0],y:ve[1],r:ve[2]/2,innerR:ve[3]/2}):this.clipCircle=function(J,re,ce,ge,_e){let ze=w(),Te=J.createElement("clipPath").attr({id:ze}).add(J.defs),Ie=_e?J.arc(re,ce,ge,_e,0,2*Math.PI).add(Te):J.circle(re,ce,ge).add(Te);return Ie.id=ze,Ie.clipPath=Te,Ie}(K.renderer,ve[0],ve[1],ve[2]/2,ve[3]/2),this.group.clip(this.clipCircle),this.setClip=c.noop)})))}}function L(ye){let Ce=this.chart,K=this.xAxis,Q=this.yAxis,ae=K.pane&&K.pane.center,ve=ye.chartX-(ae&&ae[0]||0)-Ce.plotLeft,J=ye.chartY-(ae&&ae[1]||0)-Ce.plotTop,re=Ce.inverted?{clientX:ye.chartX-Q.pos,plotY:ye.chartY-K.pos}:{clientX:180+-180/Math.PI*Math.atan2(ve,J)};return this.searchKDTree(re)}function R(ye,Ce,K,Q){let ae=Q.tickInterval,ve=Q.tickPositions,J=_(ve,ce=>ce>=K),re=_([...ve].reverse(),ce=>ce<=Ce);return k(J)||(J=ve[ve.length-1]),k(re)||(re=ve[0],J+=ae,ye[0][0]="L",ye.unshift(ye[ye.length-3])),(ye=ye.slice(ve.indexOf(re),ve.indexOf(J)+1))[0][0]="M",ye}function G(ye,Ce){return _(this.pane||[],K=>K.options.id===Ce)||ye.call(this,Ce)}function $(ye,Ce,K,Q,ae,ve){let J,re,ce,ge=this.chart,_e=A(Q.inside,!!this.options.stacking);if(ge.polar){if(J=Ce.rectPlotX/Math.PI*180,ge.inverted)this.forceDL=ge.isInsidePlot(Ce.plotX,Ce.plotY),_e&&Ce.shapeArgs?(re=Ce.shapeArgs,ae=M(ae,{x:(ce=this.yAxis.postTranslate(((re.start||0)+(re.end||0))/2-this.xAxis.startAngleRad,Ce.barX+Ce.pointWidth/2)).x-ge.plotLeft,y:ce.y-ge.plotTop})):Ce.tooltipPos&&(ae=M(ae,{x:Ce.tooltipPos[0],y:Ce.tooltipPos[1]})),Q.align=A(Q.align,"center"),Q.verticalAlign=A(Q.verticalAlign,"middle");else{var ze;let Te,Ie;(ze=Q).align===null&&(Te=J>20&&J<160?"left":J>200&&J<340?"right":"center",ze.align=Te),ze.verticalAlign===null&&(Ie=J<45||J>315?"bottom":J>135&&J<225?"top":"middle",ze.verticalAlign=Ie),Q=ze}u.prototype.alignDataLabel.call(this,Ce,K,Q,ae,ve),this.isRadialBar&&Ce.shapeArgs&&Ce.shapeArgs.start===Ce.shapeArgs.end?K.hide():K.show()}else ye.call(this,Ce,K,Q,ae,ve)}function F(){let ye=this.options,Ce=ye.stacking,K=this.chart,Q=this.xAxis,ae=this.yAxis,ve=ae.reversed,J=ae.center,re=Q.startAngleRad,ce=Q.endAngleRad-re,ge=ye.threshold,_e=0,ze,Te,Ie,Be,Ge,ke=0,me=0,fe,Ae,De,Pe,je,Xe,et,rt;if(Q.isRadial)for(Ie=(ze=this.points).length,Be=ae.translate(ae.min),Ge=ae.translate(ae.max),ge=ye.threshold||0,K.inverted&&T(ge)&&k(_e=ae.translate(ge))&&(_e<0?_e=0:_e>ce&&(_e=ce),this.translatedThreshold=_e+re);Ie--;){if(Xe=(Te=ze[Ie]).barX,Ae=Te.x,De=Te.y,Te.shapeType="arc",K.inverted){Te.plotY=ae.translate(De),Ce&&ae.stacking?(je=ae.stacking.stacks[(De<0?"-":"")+this.stackKey],this.visible&&je&&je[Ae]&&!Te.isNull&&(Pe=je[Ae].points[this.getStackIndicator(void 0,Ae,this.index).key],ke=ae.translate(Pe[0]),me=ae.translate(Pe[1]),k(ke)&&(ke=m.clamp(ke,0,ce)))):(ke=_e,me=Te.plotY),ke>me&&(me=[ke,ke=me][0]),ve?me>Be?me=Be:ke<Ge?ke=Ge:(ke>Be||me<Ge)&&(ke=me=ce):ke<Be?ke=Be:me>Ge?me=Ge:(me<Be||ke>Ge)&&(ke=me=0),ae.min>ae.max&&(ke=me=ve?ce:0),ke+=re,me+=re,J&&(Te.barX=Xe+=J[3]/2),et=Math.max(Xe,0),rt=Math.max(Xe+Te.pointWidth,0);let dt=ye.borderRadius,gt=P((typeof dt=="object"?dt.radius:dt)||0,rt-et);Te.shapeArgs={x:J[0],y:J[1],r:rt,innerR:et,start:ke,end:me,borderRadius:gt},Te.opacity=ke===me?0:void 0,Te.plotY=(k(this.translatedThreshold)&&(ke<this.translatedThreshold?ke:me))-re}else ke=Xe+re,Te.shapeArgs=this.polar.arc(Te.yBottom,Te.plotY,ke,ke+Te.pointWidth),Te.shapeArgs.borderRadius=0;this.polar.toXY(Te),K.inverted?(fe=ae.postTranslate(Te.rectPlotY,Xe+Te.pointWidth/2),Te.tooltipPos=[fe.x-K.plotLeft,fe.y-K.plotTop]):Te.tooltipPos=[Te.plotX,Te.plotY],J&&(Te.ttBelow=Te.plotY>J[1])}}function H(ye,Ce){let K,Q,ae=this;if(this.chart.polar){Ce=Ce||this.points;for(let J=0;J<Ce.length;J++)if(!Ce[J].isNull){K=J;break}this.options.connectEnds!==!1&&K!==void 0&&(this.connectEnds=!0,Ce.splice(Ce.length,0,Ce[K]),Q=!0),Ce.forEach(J=>{J.polarPlotY===void 0&&ae.polar.toXY(J)})}let ve=ye.apply(this,[].slice.call(arguments,1));return Q&&Ce.pop(),ve}function W(ye,Ce){let K=this.chart,Q={xAxis:[],yAxis:[]};return K.polar?K.axes.forEach(ae=>{if(ae.coll==="colorAxis")return;let ve=ae.isXAxis,J=ae.center,re=Ce.chartX-J[0]-K.plotLeft,ce=Ce.chartY-J[1]-K.plotTop;Q[ve?"xAxis":"yAxis"].push({axis:ae,value:ae.translate(ve?Math.PI-Math.atan2(re,ce):Math.sqrt(Math.pow(re,2)+Math.pow(ce,2)),!0)})}):Q=ye.call(this,Ce),Q}function ne(ye,Ce){this.chart.polar||ye.call(this,Ce)}function ue(ye,Ce){let K=this,Q=this.chart,ae=this.group,ve=this.markerGroup,J=this.xAxis&&this.xAxis.center,re=Q.plotLeft,ce=Q.plotTop,ge=this.options.animation,_e,ze,Te,Ie,Be,Ge;Q.polar?K.isRadialBar?Ce||(K.startAngleRad=A(K.translatedThreshold,K.xAxis.startAngleRad),c.seriesTypes.pie.prototype.animate.call(K,Ce)):(ge=g(ge),K.is("column")?Ce||(ze=J[3]/2,K.points.forEach(ke=>{Te=ke.graphic,Be=(Ie=ke.shapeArgs)&&Ie.r,Ge=Ie&&Ie.innerR,Te&&Ie&&(Te.attr({r:ze,innerR:ze}),Te.animate({r:Be,innerR:Ge},K.options.animation))})):Ce?(_e={translateX:J[0]+re,translateY:J[1]+ce,scaleX:.001,scaleY:.001},ae.attr(_e),ve&&ve.attr(_e)):(_e={translateX:re,translateY:ce,scaleX:1,scaleY:1},ae.animate(_e,ge),ve&&ve.animate(_e,ge))):ye.call(this,Ce)}function ie(ye,Ce,K,Q){let ae,ve;if(this.chart.polar)if(Q){let J=(ve=function ce(ge,_e,ze,Te){let Ie,Be,Ge,ke,me,fe,Ae=Te?1:0,De=(Ie=_e>=0&&_e<=ge.length-1?_e:_e<0?ge.length-1+_e:0)-1<0?ge.length-(1+Ae):Ie-1,Pe=Ie+1>ge.length-1?Ae:Ie+1,je=ge[De],Xe=ge[Pe],et=je.plotX,rt=je.plotY,dt=Xe.plotX,gt=Xe.plotY,wt=ge[Ie].plotX,Rt=ge[Ie].plotY;Be=(1.5*wt+et)/2.5,Ge=(1.5*Rt+rt)/2.5,ke=(1.5*wt+dt)/2.5,me=(1.5*Rt+gt)/2.5;let ft=Math.sqrt(Math.pow(Be-wt,2)+Math.pow(Ge-Rt,2)),Ct=Math.sqrt(Math.pow(ke-wt,2)+Math.pow(me-Rt,2)),Tt=Math.atan2(Ge-Rt,Be-wt);fe=Math.PI/2+(Tt+Math.atan2(me-Rt,ke-wt))/2,Math.abs(Tt-fe)>Math.PI/2&&(fe-=Math.PI),Be=wt+Math.cos(fe)*ft,Ge=Rt+Math.sin(fe)*ft;let si={rightContX:ke=wt+Math.cos(Math.PI+fe)*Ct,rightContY:me=Rt+Math.sin(Math.PI+fe)*Ct,leftContX:Be,leftContY:Ge,plotX:wt,plotY:Rt};return ze&&(si.prevPointCont=ce(ge,De,!1,Te)),si}(Ce,Q,!0,this.connectEnds)).prevPointCont&&ve.prevPointCont.rightContX,re=ve.prevPointCont&&ve.prevPointCont.rightContY;ae=["C",T(J)?J:ve.plotX,T(re)?re:ve.plotY,T(ve.leftContX)?ve.leftContX:ve.plotX,T(ve.leftContY)?ve.leftContY:ve.plotY,ve.plotX,ve.plotY]}else ae=["M",K.plotX,K.plotY];else ae=ye.call(this,Ce,K,Q);return ae}function oe(ye,Ce,K=this.plotY){if(!this.destroyed){let{plotX:Q,series:ae}=this,{chart:ve}=ae;return ve.polar&&T(Q)&&T(K)?[Q+(Ce?ve.plotLeft:0),K+(Ce?ve.plotTop:0)]:ye.call(this,Ce,K)}}class Se{static compose(Ce,K,Q,ae,ve,J,re,ce,ge,_e){if(n.compose(K,Q),p.compose(Ce,ve),x(v,"Polar")){let ze=K.prototype,Te=J.prototype,Ie=Q.prototype,Be=ae.prototype;if(y(K,"afterDrawChartBox",N),y(K,"getAxes",Z),y(K,"init",q),I(ze,"get",G),I(Ie,"getCoordinates",W),I(Ie,"pinch",ne),y(Q,"getSelectionMarkerAttrs",j),y(Q,"getSelectionBox",X),y(ae,"afterInit",V),y(ae,"afterTranslate",U,{order:2}),y(ae,"afterColumnTranslate",F,{order:4}),I(Be,"animate",ue),I(Te,"pos",oe),ce){let Ge=ce.prototype;I(Ge,"alignDataLabel",$),I(Ge,"animate",ue)}if(ge&&I(ge.prototype,"getGraphPath",H),_e){let Ge=_e.prototype;I(Ge,"getPointSpline",ie),re&&(re.prototype.getPointSpline=Ge.getPointSpline)}}}constructor(Ce){this.series=Ce}arc(Ce,K,Q,ae){let ve=this.series,J=ve.xAxis.center,re=ve.yAxis.len,ce=J[3]/2,ge=re-K+ce,_e=re-A(Ce,re)+ce;return ve.yAxis.reversed&&(ge<0&&(ge=ce),_e<0&&(_e=ce)),{x:J[0],y:J[1],r:ge,innerR:_e,start:Q,end:ae}}toXY(Ce){let K=this.series,Q=K.chart,ae=K.xAxis,ve=K.yAxis,J=Ce.plotX,re=Q.inverted,ce=Ce.y,ge=Ce.plotY,_e=re?J:ve.len-ge,ze;if(re&&K&&!K.isRadialBar&&(Ce.plotY=ge=T(ce)?ve.translate(ce):0),Ce.rectPlotX=J,Ce.rectPlotY=ge,ve.center&&(_e+=ve.center[3]/2),T(ge)){let Te=re?ve.postTranslate(ge,_e):ae.postTranslate(J,_e);Ce.plotX=Ce.polarPlotX=Te.x-Q.plotLeft,Ce.plotY=Ce.polarPlotY=Te.y-Q.plotTop}K.kdByAngle?((ze=(J/Math.PI*180+ae.pane.options.startAngle)%360)<0&&(ze+=360),Ce.clientX=ze):Ce.clientX=Ce.plotX}}return Se}),o(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(a,c,u){var n;let{composed:p}=a,{addEvent:m,objectEach:g,pushUnique:v}=u;return function(y){function k(){let x=this.waterfall.stacks;x&&(x.changed=!1,delete x.alreadyChanged)}function _(){let x=this.options.stackLabels;x&&x.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function T(){this.waterfall||(this.waterfall=new A(this))}function M(){let x=this.axes;for(let P of this.series)if(P.options.stacking){for(let D of x)D.isXAxis||(D.waterfall.stacks.changed=!0);break}}y.compose=function(x,P){v(p,"Axis.Waterfall")&&(m(x,"init",T),m(x,"afterBuildStacks",k),m(x,"afterRender",_),m(P,"beforeRedraw",M))};class A{constructor(P){this.axis=P,this.stacks={changed:!1}}renderStackTotals(){let P=this.axis,D=P.waterfall.stacks,w=P.stacking&&P.stacking.stackTotalGroup,I=new c(P,P.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=I,w&&g(D,N=>{g(N,(q,Z)=>{I.total=q.stackTotal,I.x=+Z,q.label&&(I.label=q.label),c.prototype.render.call(I,w),q.label=I.label,delete I.label})}),I.total=null}}y.Composition=A}(n||(n={})),n}),o(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(a,c,u){let{isNumber:n}=u;class p extends a.prototype.pointClass{getClassName(){let g=c.prototype.getClassName.call(this);return this.isSum?g+=" highcharts-sum":this.isIntermediateSum&&(g+=" highcharts-intermediate-sum"),g}isValid(){return n(this.y)||this.isSum||!!this.isIntermediateSum}}return p}),o(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),o(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(a,c,u,n,p){let{column:m,line:g}=a.seriesTypes,{addEvent:v,arrayMax:y,arrayMin:k,correctFloat:_,crisp:T,extend:M,isNumber:A,merge:x,objectEach:P,pick:D}=c;function w(N,q){return Object.hasOwnProperty.call(N,q)}class I extends m{generatePoints(){m.prototype.generatePoints.apply(this);for(let q=0,Z=this.points.length;q<Z;q++){let X=this.points[q],j=this.processedYData[q];A(j)&&(X.isIntermediateSum||X.isSum)&&(X.y=_(j))}}processData(q){let Z,X,j,V,U,L,R=this.options,G=this.yData,$=R.data,F=G.length,H=R.threshold||0;j=X=V=U=0;for(let W=0;W<F;W++)L=G[W],Z=$&&$[W]?$[W]:{},L==="sum"||Z.isSum?G[W]=_(j):L==="intermediateSum"||Z.isIntermediateSum?(G[W]=_(X),X=0):(j+=L,X+=L),V=Math.min(j,V),U=Math.max(j,U);super.processData.call(this,q),R.stacking||(this.dataMin=V+H,this.dataMax=U)}toYData(q){return q.isSum?"sum":q.isIntermediateSum?"intermediateSum":q.y}updateParallelArrays(q,Z){super.updateParallelArrays.call(this,q,Z),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(q,Z){let X=this.options.upColor;X&&!q.options.color&&A(q.y)&&(q.color=q.y>0?X:void 0);let j=m.prototype.pointAttribs.call(this,q,Z);return delete j.dashstyle,j}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let q=this.data.filter($=>A($.y)),Z=this.yAxis,X=q.length,j=((G=this.graph)==null?void 0:G.strokeWidth())||0,V=this.xAxis.reversed,U=this.yAxis.reversed,L=this.options.stacking,R=[];for(let $=1;$<X;$++){if(!(this.options.connectNulls||A(this.data[q[$].index-1].y)))continue;let F=q[$].box,H=q[$-1],W=H.y||0,ne=q[$-1].box;if(!F||!ne)continue;let ue=Z.waterfall.stacks[this.stackKey],ie=W>0?-ne.height:0;if(ue&&ne&&F){let oe,Se=ue[$-1];if(L){let ye=Se.connectorThreshold;oe=T(Z.translate(ye,!1,!0,!1,!0)+(U?ie:0),j)}else oe=T(ne.y+(H.minPointLengthOffset||0),j);R.push(["M",(ne.x||0)+(V?0:ne.width||0),oe],["L",(F.x||0)+(V&&F.width||0),oe])}if(ne&&R.length&&(!L&&W<0&&!U||W>0&&U)){let oe=R[R.length-2];oe&&typeof oe[2]=="number"&&(oe[2]+=ne.height||0);let Se=R[R.length-1];Se&&typeof Se[2]=="number"&&(Se[2]+=ne.height||0)}}return R}drawGraph(){g.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(q){var ae;let Z=this.options,X=(ae=q.waterfall)==null?void 0:ae.stacks,j=Z.threshold||0,V=this.stackKey,U=this.xData,L=U.length,R=j,G=R,$,F=0,H=0,W=0,ne,ue,ie,oe,Se,ye,Ce,K,Q=(ve,J,re,ce)=>{if($){if(ne)for(;re<ne;re++)$.stackState[re]+=ce;else $.stackState[0]=ve,ne=$.stackState.length;$.stackState.push($.stackState[ne-1]+J)}};if(q.stacking&&X&&this.reserveSpace()){K=X.changed,(Ce=X.alreadyChanged)&&0>Ce.indexOf(V)&&(K=!0),X[V]||(X[V]={});let ve=X[V];if(ve)for(let J=0;J<L;J++)(!ve[ye=U[J]]||K)&&(ve[ye]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:K&&ve[ye]?ve[ye].label:void 0}),$=ve[ye],(Se=this.yData[J])>=0?$.posTotal+=Se:$.negTotal+=Se,oe=Z.data[J],ue=$.absolutePos=$.posTotal,ie=$.absoluteNeg=$.negTotal,$.stackTotal=ue+ie,ne=$.stackState.length,oe&&oe.isIntermediateSum?(Q(W,H,0,W),W=H,H=j,R^=G,G^=R,R^=G):oe&&oe.isSum?(Q(j,F,ne,0),R=j):(Q(R,Se,0,F),oe&&(F+=Se,H+=Se)),$.stateIndex++,$.threshold=R,R+=$.stackTotal;X.changed=!1,X.alreadyChanged||(X.alreadyChanged=[]),X.alreadyChanged.push(V)}}getExtremes(){let q,Z,X,j=this.options.stacking;return j?(q=this.yAxis.waterfall.stacks,Z=this.stackedYNeg=[],X=this.stackedYPos=[],j==="overlap"?P(q[this.stackKey],function(V){Z.push(k(V.stackState)),X.push(y(V.stackState))}):P(q[this.stackKey],function(V){Z.push(V.negTotal+V.threshold),X.push(V.posTotal+V.threshold)}),{dataMin:k(Z),dataMax:y(X)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return I.defaultOptions=x(m.defaultOptions,p),I.compose=u.compose,M(I.prototype,{pointValKey:"y",showLine:!0,pointClass:n}),v(I,"afterColumnTranslate",function(){let{options:N,points:q,yAxis:Z}=this,X=D(N.minPointLength,5),j=X/2,V=N.threshold||0,U=N.stacking,L=Z.waterfall.stacks[this.stackKey],R=V,G=V,$,F,H,W;for(let ne=0;ne<q.length;ne++){let ue=q[ne],ie=this.processedYData[ne],oe=M({x:0,y:0,width:0,height:0},ue.shapeArgs||{});ue.box=oe;let Se=[0,ie],ye=ue.y||0;if(U){if(L){let Q=L[ne];U==="overlap"?(F=Q.stackState[Q.stateIndex--],$=ye>=0?F:F-ye,w(Q,"absolutePos")&&delete Q.absolutePos,w(Q,"absoluteNeg")&&delete Q.absoluteNeg):(ye>=0?(F=Q.threshold+Q.posTotal,Q.posTotal-=ye,$=F):(F=Q.threshold+Q.negTotal,Q.negTotal-=ye,$=F-ye),!Q.posTotal&&A(Q.absolutePos)&&w(Q,"absolutePos")&&(Q.posTotal=Q.absolutePos,delete Q.absolutePos),!Q.negTotal&&A(Q.absoluteNeg)&&w(Q,"absoluteNeg")&&(Q.negTotal=Q.absoluteNeg,delete Q.absoluteNeg)),ue.isSum||(Q.connectorThreshold=Q.threshold+Q.stackTotal),Z.reversed?(H=ye>=0?$-ye:$+ye,W=$):(H=$,W=$-ye),ue.below=H<=V,oe.y=Z.translate(H,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Z.translate(W,!1,!0,!1,!0));let ae=Z.waterfall.dummyStackItem;ae&&(ae.x=ne,ae.label=L[ne].label,ae.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[ne],this.stackedYPos[ne],void 0,this.xAxis))}}else $=Math.max(G,G+ye)+Se[0],oe.y=Z.translate($,!1,!0,!1,!0),ue.isSum?(oe.y=Z.translate(Se[1],!1,!0,!1,!0),oe.height=Math.min(Z.translate(Se[0],!1,!0,!1,!0),Z.len)-oe.y,ue.below=Se[1]<=V):ue.isIntermediateSum?(ye>=0?(H=Se[1]+R,W=R):(H=R,W=Se[1]+R),Z.reversed&&(H^=W,W^=H,H^=W),oe.y=Z.translate(H,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Math.min(Z.translate(W,!1,!0,!1,!0),Z.len)),R+=Se[1],ue.below=H<=V):(oe.height=ie>0?Z.translate(G,!1,!0,!1,!0)-oe.y:Z.translate(G,!1,!0,!1,!0)-Z.translate(G-ie,!1,!0,!1,!0),G+=ie,ue.below=G<V),oe.height<0&&(oe.y+=oe.height,oe.height*=-1);ue.plotY=oe.y,ue.yBottom=oe.y+oe.height,oe.height<=X&&!ue.isNull?(oe.height=X,oe.y-=j,ue.yBottom=oe.y+oe.height,ue.plotY=oe.y,ye<0?ue.minPointLengthOffset=-j:ue.minPointLengthOffset=j):(ue.isNull&&(oe.width=0),ue.minPointLengthOffset=0);let Ce=ue.plotY+(ue.negative?oe.height:0);ue.below&&(ue.plotY+=oe.height),ue.tooltipPos&&(this.chart.inverted?ue.tooltipPos[0]=Z.len-Ce:ue.tooltipPos[1]=Ce),ue.isInside=this.isPointInside(ue);let K=T(ue.yBottom,this.borderWidth);oe.y=T(oe.y,this.borderWidth),oe.height=K-oe.y,x(!0,ue.shapeArgs,oe)}},{order:2}),a.registerSeriesType("waterfall",I),I}),o(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(a,c,u,n,p,m,g,v){return a.RadialAxis=g,n.compose(a.Axis,a.Chart,a.Legend),p.compose(a.Axis,a.Chart,a.Legend),u.compose(a.Chart,a.Pointer),m.compose(a.Axis,a.Chart,a.Pointer,a.Series,a.Tick,a.Point,c.seriesTypes.areasplinerange,c.seriesTypes.column,c.seriesTypes.line,c.seriesTypes.spline),v.compose(a.Axis,a.Chart),a})})})(_S);var Yj=_S.exports;const Zj=Qu(Yj);var wS={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function o(a,c,u,n){a.hasOwnProperty(c)||(a[c]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:a[c]}})))}o(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var a;return function(c){c.compose=function(n){return n.navigation||(n.navigation=new u(n)),n};class u{constructor(p){this.updates=[],this.chart=p}addUpdate(p){this.chart.navigation.updates.push(p)}update(p,m){this.updates.forEach(g=>{g.call(this.chart,p,m)})}}c.Additions=u}(a||(a={})),a}),o(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(a){let{isTouchDevice:c}=a;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:c?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),o(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var a;return function(c){let u=[];function n(m,g,v,y){return[["M",m,g+2.5],["L",m+v,g+2.5],["M",m,g+y/2+.5],["L",m+v,g+y/2+.5],["M",m,g+y-1.5],["L",m+v,g+y-1.5]]}function p(m,g,v,y){let k=y/3-2;return[].concat(this.circle(v-k,g,k,k),this.circle(v-k,g+k+4,k,k),this.circle(v-k,g+2*(k+4),k,k))}c.compose=function(m){if(u.indexOf(m)===-1){u.push(m);let g=m.prototype.symbols;g.menu=n,g.menuball=p.bind(g)}}}(a||(a={})),a}),o(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c,u){let{composed:n}=c,{addEvent:p,fireEvent:m,pushUnique:g}=u;function v(){this.fullscreen=new y(this)}class y{static compose(_){g(n,"Fullscreen")&&p(_,"beforeRender",v)}constructor(_){this.chart=_,this.isOpen=!1;let T=_.renderTo;!this.browserProps&&(typeof T.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:T.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:T.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:T.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let _=this,T=_.chart,M=T.options.chart;m(T,"fullscreenClose",null,function(){_.isOpen&&_.browserProps&&T.container.ownerDocument instanceof Document&&T.container.ownerDocument[_.browserProps.exitFullscreen](),_.unbindFullscreenEvent&&(_.unbindFullscreenEvent=_.unbindFullscreenEvent()),T.setSize(_.origWidth,_.origHeight,!1),_.origWidth=void 0,_.origHeight=void 0,M.width=_.origWidthOption,M.height=_.origHeightOption,_.origWidthOption=void 0,_.origHeightOption=void 0,_.isOpen=!1,_.setButtonText()})}open(){let _=this,T=_.chart,M=T.options.chart;m(T,"fullscreenOpen",null,function(){if(M&&(_.origWidthOption=M.width,_.origHeightOption=M.height),_.origWidth=T.chartWidth,_.origHeight=T.chartHeight,_.browserProps){let A=p(T.container.ownerDocument,_.browserProps.fullscreenChange,function(){_.isOpen?(_.isOpen=!1,_.close()):(T.setSize(null,null,!1),_.isOpen=!0,_.setButtonText())}),x=p(T,"destroy",A);_.unbindFullscreenEvent=()=>{A(),x()};let P=T.renderTo[_.browserProps.requestFullscreen]();P&&P.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let _=this.chart,T=_.exportDivElements,M=_.options.exporting,A=M&&M.buttons&&M.buttons.contextButton.menuItems,x=_.options.lang;if(M&&M.menuItemDefinitions&&x&&x.exitFullscreen&&x.viewFullscreen&&A&&T){let P=T[A.indexOf("viewFullscreen")];P&&a.setElementHTML(P,this.isOpen?x.exitFullscreen:M.menuItemDefinitions.viewFullscreen.text||x.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return y}),o(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,c){let{win:u}=a,{discardElement:n,objectEach:p}=c,m={ajax:function(g){let v={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},y=new XMLHttpRequest;function k(_,T){g.error&&g.error(_,T)}if(!g.url)return!1;y.open((g.type||"get").toUpperCase(),g.url,!0),g.headers&&g.headers["Content-Type"]||y.setRequestHeader("Content-Type",v[g.dataType||"json"]||v.text),p(g.headers,function(_,T){y.setRequestHeader(T,_)}),g.responseType&&(y.responseType=g.responseType),y.onreadystatechange=function(){let _;if(y.readyState===4){if(y.status===200){if(g.responseType!=="blob"&&(_=y.responseText,g.dataType==="json"))try{_=JSON.parse(_)}catch(T){if(T instanceof Error)return k(y,T)}return g.success&&g.success(_,y)}k(y,y.responseText)}},g.data&&typeof g.data!="string"&&(g.data=JSON.stringify(g.data)),y.send(g.data)},getJSON:function(g,v){m.ajax({url:g,success:v,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(g,v,y){let k=new u.FormData;p(v,function(M,A){k.append(A,M)}),k.append("b64","true");let{filename:_,type:T}=v;return u.fetch(g,{method:"POST",body:k,...y}).then(M=>{M.ok&&M.text().then(A=>{let x=document.createElement("a");x.href=`data:${T};base64,${A}`,x.download=_,x.click(),n(x)})})}};return m}),o(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(a,c,u,n,p,m,g,v,y,k){var _;let{defaultOptions:T}=n,{doc:M,SVG_NS:A,win:x}=v,{addEvent:P,css:D,createElement:w,discardElement:I,extend:N,find:q,fireEvent:Z,isObject:X,merge:j,objectEach:V,pick:U,removeEvent:L,uniqueKey:R}=k;return function(G){let $,F=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],H=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let W=["clipPath","defs","desc"];function ne(Te){let Ie,Be,Ge=this,ke=Ge.renderer,me=j(Ge.options.navigation.buttonOptions,Te),fe=me.onclick,Ae=me.menuItems,De=me.symbolSize||12;if(Ge.btnCount||(Ge.btnCount=0),Ge.exportDivElements||(Ge.exportDivElements=[],Ge.exportSVGElements=[]),me.enabled===!1||!me.theme)return;let Pe=Ge.styledMode?{}:me.theme;fe?Be=function(Xe){Xe&&Xe.stopPropagation(),fe.call(Ge,Xe)}:Ae&&(Be=function(Xe){Xe&&Xe.stopPropagation(),Ge.contextMenu(je.menuClassName,Ae,je.translateX||0,je.translateY||0,je.width||0,je.height||0,je),je.setState(2)}),me.text&&me.symbol?Pe.paddingLeft=U(Pe.paddingLeft,30):me.text||N(Pe,{width:me.width,height:me.height,padding:0});let je=ke.button(me.text,0,0,Be,Pe,void 0,void 0,void 0,void 0,me.useHTML).addClass(Te.className).attr({title:U(Ge.options.lang[me._titleKey||me.titleKey],"")});je.menuClassName=Te.menuClassName||"highcharts-menu-"+Ge.btnCount++,me.symbol&&(Ie=ke.symbol(me.symbol,Math.round((me.symbolX||0)-De/2),Math.round((me.symbolY||0)-De/2),De,De,{width:De,height:De}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(je),Ge.styledMode||Ie.attr({stroke:me.symbolStroke,fill:me.symbolFill,"stroke-width":me.symbolStrokeWidth||1})),je.add(Ge.exportingGroup).align(N(me,{width:je.width,x:U(me.x,Ge.buttonOffset)}),!0,"spacingBox"),Ge.buttonOffset+=((je.width||0)+me.buttonSpacing)*(me.align==="right"?-1:1),Ge.exportSVGElements.push(je,Ie)}function ue(){if(!this.printReverseInfo)return;let{childNodes:Te,origDisplay:Ie,resetParams:Be}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Te,function(Ge,ke){Ge.nodeType===1&&(Ge.style.display=Ie[ke]||"")}),this.isPrinting=!1,Be&&this.setSize.apply(this,Be),delete this.printReverseInfo,$=void 0,Z(this,"afterPrint")}function ie(){var Ge;let Te=M.body,Ie=this.options.exporting.printMaxWidth,Be={childNodes:Te.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(Ge=this.pointer)==null||Ge.reset(void 0,0),Z(this,"beforePrint"),Ie&&this.chartWidth>Ie&&(Be.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Ie,void 0,!1)),[].forEach.call(Be.childNodes,function(ke,me){ke.nodeType===1&&(Be.origDisplay[me]=ke.style.display,ke.style.display="none")}),this.moveContainers(Te),this.printReverseInfo=Be}function oe(Te){Te.renderExporting(),P(Te,"redraw",Te.renderExporting),P(Te,"destroy",Te.destroyExport)}function Se(Te,Ie,Be,Ge,ke,me,fe){var wt,Rt;let Ae=this,De=Ae.options.navigation,Pe=Ae.chartWidth,je=Ae.chartHeight,Xe="cache-"+Te,et=Math.max(ke,me),rt,dt=Ae[Xe];dt||(Ae.exportContextMenu=Ae[Xe]=dt=w("div",{className:Te},{position:"absolute",zIndex:1e3,padding:et+"px",pointerEvents:"auto",...Ae.renderer.style},((wt=Ae.scrollablePlotArea)==null?void 0:wt.fixedDiv)||Ae.container),rt=w("ul",{className:"highcharts-menu"},Ae.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),Ae.styledMode||D(rt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},De.menuStyle)),dt.hideMenu=function(){D(dt,{display:"none"}),fe&&fe.setState(0),Ae.openMenu=!1,D(Ae.renderTo,{overflow:"hidden"}),D(Ae.container,{overflow:"hidden"}),k.clearTimeout(dt.hideTimer),Z(Ae,"exportMenuHidden")},Ae.exportEvents.push(P(dt,"mouseleave",function(){dt.hideTimer=x.setTimeout(dt.hideMenu,500)}),P(dt,"mouseenter",function(){k.clearTimeout(dt.hideTimer)}),P(M,"mouseup",function(ft){var Ct;(Ct=Ae.pointer)!=null&&Ct.inClass(ft.target,Te)||dt.hideMenu()}),P(dt,"click",function(){Ae.openMenu&&dt.hideMenu()})),Ie.forEach(function(ft){if(typeof ft=="string"&&(ft=Ae.options.exporting.menuItemDefinitions[ft]),X(ft,!0)){let Ct;ft.separator?Ct=w("hr",void 0,void 0,rt):(ft.textKey==="viewData"&&Ae.isDataTableVisible&&(ft.textKey="hideData"),Ct=w("li",{className:"highcharts-menu-item",onclick:function(Tt){Tt&&Tt.stopPropagation(),dt.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(Ae,arguments)}},void 0,rt),a.setElementHTML(Ct,ft.text||Ae.options.lang[ft.textKey]),Ae.styledMode||(Ct.onmouseover=function(){D(this,De.menuItemHoverStyle)},Ct.onmouseout=function(){D(this,De.menuItemStyle)},D(Ct,N({cursor:"pointer"},De.menuItemStyle||{})))),Ae.exportDivElements.push(Ct)}}),Ae.exportDivElements.push(rt,dt),Ae.exportMenuWidth=dt.offsetWidth,Ae.exportMenuHeight=dt.offsetHeight);let gt={display:"block"};Be+(Ae.exportMenuWidth||0)>Pe?gt.right=Pe-Be-ke-et+"px":gt.left=Be-et+"px",Ge+me+(Ae.exportMenuHeight||0)>je&&((Rt=fe.alignOptions)==null?void 0:Rt.verticalAlign)!=="top"?gt.bottom=je-Ge-et+"px":gt.top=Ge+me-et+"px",D(dt,gt),D(Ae.renderTo,{overflow:""}),D(Ae.container,{overflow:""}),Ae.openMenu=!0,Z(Ae,"exportMenuShown")}function ye(Te){let Ie,Be=Te?Te.target:this,Ge=Be.exportSVGElements,ke=Be.exportDivElements,me=Be.exportEvents;Ge&&(Ge.forEach((fe,Ae)=>{fe&&(fe.onclick=fe.ontouchstart=null,Be[Ie="cache-"+fe.menuClassName]&&delete Be[Ie],Ge[Ae]=fe.destroy())}),Ge.length=0),Be.exportingGroup&&(Be.exportingGroup.destroy(),delete Be.exportingGroup),ke&&(ke.forEach(function(fe,Ae){fe&&(k.clearTimeout(fe.hideTimer),L(fe,"mouseleave"),ke[Ae]=fe.onmouseout=fe.onmouseover=fe.ontouchstart=fe.onclick=null,I(fe))}),ke.length=0),me&&(me.forEach(function(fe){fe()}),me.length=0)}function Ce(Te,Ie){let Be=this.getSVGForExport(Te,Ie);Te=j(this.options.exporting,Te),y.post(Te.url,{filename:Te.filename?Te.filename.replace(/\//g,"-"):this.getFilename(),type:Te.type,width:Te.width,scale:Te.scale,svg:Be},Te.fetchOptions)}function K(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function Q(){let Te=this.userOptions.title&&this.userOptions.title.text,Ie=this.options.exporting.filename;return Ie?Ie.replace(/\//g,"-"):(typeof Te=="string"&&(Ie=Te.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Ie||Ie.length<5)&&(Ie="chart"),Ie)}function ae(Te){let Ie,Be,Ge=j(this.options,Te);Ge.plotOptions=j(this.userOptions.plotOptions,Te&&Te.plotOptions),Ge.time=j(this.userOptions.time,Te&&Te.time);let ke=w("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},M.body),me=this.renderTo.style.width,fe=this.renderTo.style.height,Ae=Ge.exporting.sourceWidth||Ge.chart.width||/px$/.test(me)&&parseInt(me,10)||(Ge.isGantt?800:600),De=Ge.exporting.sourceHeight||Ge.chart.height||/px$/.test(fe)&&parseInt(fe,10)||400;N(Ge.chart,{animation:!1,renderTo:ke,forExport:!0,renderer:"SVGRenderer",width:Ae,height:De}),Ge.exporting.enabled=!1,delete Ge.data,Ge.series=[],this.series.forEach(function(Xe){(Be=j(Xe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Xe.visible})).isInternal||Ge.series.push(Be)});let Pe={};this.axes.forEach(function(Xe){Xe.userOptions.internalKey||(Xe.userOptions.internalKey=R()),Xe.options.isInternal||(Pe[Xe.coll]||(Pe[Xe.coll]=!0,Ge[Xe.coll]=[]),Ge[Xe.coll].push(j(Xe.userOptions,{visible:Xe.visible,type:Xe.type,uniqueNames:Xe.uniqueNames})))}),Ge.colorAxis=this.userOptions.colorAxis;let je=new this.constructor(Ge,this.callback);return Te&&["xAxis","yAxis","series"].forEach(function(Xe){let et={};Te[Xe]&&(et[Xe]=Te[Xe],je.update(et))}),this.axes.forEach(function(Xe){let et=q(je.axes,function(wt){return wt.options.internalKey===Xe.userOptions.internalKey}),rt=Xe.getExtremes(),dt=rt.userMin,gt=rt.userMax;et&&(dt!==void 0&&dt!==et.min||gt!==void 0&&gt!==et.max)&&et.setExtremes(dt,gt,!0,!1)}),Ie=je.getChartHTML(),Z(this,"getSVG",{chartCopy:je}),Ie=this.sanitizeSVG(Ie,Ge),Ge=null,je.destroy(),I(ke),Ie}function ve(Te,Ie){let Be=this.options.exporting;return this.getSVG(j({chart:{borderRadius:0}},Be.chartOptions,Ie,{exporting:{sourceWidth:Te&&Te.sourceWidth||Be.sourceWidth,sourceHeight:Te&&Te.sourceHeight||Be.sourceHeight}}))}function J(){let Te,Ie=G.inlineAllowlist,Be={},Ge=M.createElement("iframe");D(Ge,{width:"1px",height:"1px",visibility:"hidden"}),M.body.appendChild(Ge);let ke=Ge.contentWindow&&Ge.contentWindow.document;ke&&ke.body.appendChild(ke.createElementNS(A,"svg")),function me(fe){let Ae,De,Pe,je,Xe,et,rt={};if(ke&&fe.nodeType===1&&W.indexOf(fe.nodeName)===-1){if(Ae=x.getComputedStyle(fe,null),De=fe.nodeName==="svg"?{}:x.getComputedStyle(fe.parentNode,null),!Be[fe.nodeName]){Te=ke.getElementsByTagName("svg")[0],Pe=ke.createElementNS(fe.namespaceURI,fe.nodeName),Te.appendChild(Pe);let dt=x.getComputedStyle(Pe,null),gt={};for(let wt in dt)wt.length<1e3&&typeof dt[wt]=="string"&&!/^\d+$/.test(wt)&&(gt[wt]=dt[wt]);Be[fe.nodeName]=gt,fe.nodeName==="text"&&delete Be.text.fill,Te.removeChild(Pe)}for(let dt in Ae)(v.isFirefox||v.isMS||v.isSafari||Object.hasOwnProperty.call(Ae,dt))&&function(gt,wt){if(je=Xe=!1,Ie.length){for(et=Ie.length;et--&&!Xe;)Xe=Ie[et].test(wt);je=!Xe}for(wt==="transform"&&gt==="none"&&(je=!0),et=F.length;et--&&!je;){if(wt.length>1e3)throw Error("Input too long");je=F[et].test(wt)||typeof gt=="function"}!je&&(De[wt]!==gt||fe.nodeName==="svg")&&Be[fe.nodeName][wt]!==gt&&(H.indexOf(wt)===-1?rt[wt]=gt:gt&&fe.setAttribute(wt.replace(/[A-Z]/g,function(Rt){return"-"+Rt.toLowerCase()}),gt))}(Ae[dt],dt);if(D(fe,rt),fe.nodeName==="svg"&&fe.setAttribute("stroke-width","1px"),fe.nodeName==="text")return;[].forEach.call(fe.children||fe.childNodes,me)}}(this.container.querySelector("svg")),Te.parentNode.removeChild(Te),Ge.parentNode.removeChild(Ge)}function re(Te){let{scrollablePlotArea:Ie}=this;(Ie?[Ie.fixedDiv,Ie.scrollingContainer]:[this.container]).forEach(function(Be){Te.appendChild(Be)})}function ce(){let Te=this,Ie=(Be,Ge,ke)=>{Te.isDirtyExporting=!0,j(!0,Te.options[Be],Ge),U(ke,!0)&&Te.redraw()};Te.exporting={update:function(Be,Ge){Ie("exporting",Be,Ge)}},u.compose(Te).navigation.addUpdate((Be,Ge)=>{Ie("navigation",Be,Ge)})}function ge(){let Te=this;Te.isPrinting||($=Te,v.isSafari||Te.beforePrint(),setTimeout(()=>{x.focus(),x.print(),v.isSafari||setTimeout(()=>{Te.afterPrint()},1e3)},1))}function _e(){let Te=this,Ie=Te.options.exporting,Be=Ie.buttons,Ge=Te.isDirtyExporting||!Te.exportSVGElements;Te.buttonOffset=0,Te.isDirtyExporting&&Te.destroyExport(),Ge&&Ie.enabled!==!1&&(Te.exportEvents=[],Te.exportingGroup=Te.exportingGroup||Te.renderer.g("exporting-group").attr({zIndex:3}).add(),V(Be,function(ke){Te.addButton(ke)}),Te.isDirtyExporting=!1)}function ze(Te,Ie){let Be=Te.indexOf("</svg>")+6,Ge=Te.substr(Be);return Te=Te.substr(0,Be),Ie&&Ie.exporting&&Ie.exporting.allowHTML&&Ge&&(Ge='<foreignObject x="0" y="0" width="'+Ie.chart.width+'" height="'+Ie.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+Ge.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Te=Te.replace("</svg>",Ge+"</svg>")),Te=Te.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­")}G.compose=function(Te,Ie){m.compose(Ie),g.compose(Te);let Be=Te.prototype;Be.exportChart||(Be.afterPrint=ue,Be.exportChart=Ce,Be.inlineStyles=J,Be.print=ge,Be.sanitizeSVG=ze,Be.getChartHTML=K,Be.getSVG=ae,Be.getSVGForExport=ve,Be.getFilename=Q,Be.moveContainers=re,Be.beforePrint=ie,Be.contextMenu=Se,Be.addButton=ne,Be.destroyExport=ye,Be.renderExporting=_e,Be.callbacks.push(oe),P(Te,"init",ce),v.isSafari&&x.matchMedia("print").addListener(function(Ge){$&&(Ge.matches?$.beforePrint():$.afterPrint())}),T.exporting=j(p.exporting,T.exporting),T.lang=j(p.lang,T.lang),T.navigation=j(p.navigation,T.navigation))}}(_||(_={})),_}),o(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(a,c,u){return a.HttpUtilities=a.HttpUtilities||u,a.ajax=a.HttpUtilities.ajax,a.getJSON=a.HttpUtilities.getJSON,a.post=a.HttpUtilities.post,c.compose(a.Chart,a.Renderer),a})})})(wS);var Xj=wS.exports;const Kj=Qu(Xj);var TS={exports:{}};(function(i,e){(function(t,o){i.exports=o($e)})(typeof self<"u"?self:Na,function(t){return function(o){function a(u){if(c[u])return c[u].exports;var n=c[u]={i:u,l:!1,exports:{}};return o[u].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var c={};return a.m=o,a.c=c,a.d=function(u,n,p){a.o(u,n)||Object.defineProperty(u,n,{configurable:!1,enumerable:!0,get:p})},a.n=function(u){var n=u&&u.__esModule?function(){return u.default}:function(){return u};return a.d(n,"a",n),n},a.o=function(u,n){return Object.prototype.hasOwnProperty.call(u,n)},a.p="",a(a.s=0)}([function(o,a,c){function u(){return u=Object.assign?Object.assign.bind():function(x){for(var P=1;P<arguments.length;P++){var D=arguments[P];for(var w in D)Object.prototype.hasOwnProperty.call(D,w)&&(x[w]=D[w])}return x},u.apply(this,arguments)}function n(x){return v(x)||g(x)||m(x)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(x,P){{if(typeof x=="string")return y(x,P);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?y(x,P):void 0}}function g(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function v(x){if(Array.isArray(x))return y(x)}function y(x,P){(P==null||P>x.length)&&(P=x.length);for(var D=0,w=new Array(P);D<P;D++)w[D]=x[D];return w}function k(x){"@babel/helpers - typeof";return(k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(x)}Object.defineProperty(a,"__esModule",{value:!0}),c.d(a,"HighchartsReact",function(){return A});var _=c(1),T=c.n(_),M=typeof window<"u"?_.useLayoutEffect:_.useEffect,A=Object(_.memo)(Object(_.forwardRef)(function(x,P){var D=Object(_.useRef)(),w=Object(_.useRef)(),I=Object(_.useRef)(x.constructorType),N=Object(_.useRef)(x.highcharts);return M(function(){function q(){var X=x.highcharts||(typeof window>"u"?"undefined":k(window))==="object"&&window.Highcharts,j=x.constructorType||"chart";X?X[j]?x.options?w.current=X[j](D.current,x.options,x.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(w.current){if(x.allowChartUpdate!==!1)if(x.constructorType!==I.current||x.highcharts!==N.current)I.current=x.constructorType,N.current=x.highcharts,q();else if(!x.immutable&&w.current){var Z;(Z=w.current).update.apply(Z,[x.options].concat(n(x.updateArgs||[!0,!0])))}else q()}else q()},[x.options,x.allowChartUpdate,x.updateArgs,x.containerProps,x.highcharts,x.constructorType]),M(function(){return function(){w.current&&(w.current.destroy(),w.current=null)}},[]),Object(_.useImperativeHandle)(P,function(){return{get chart(){return w.current},container:D}},[]),T.a.createElement("div",u({},x.containerProps,{ref:D}))}));a.default=A},function(o,a){o.exports=t}])})})(TS);var Qj=TS.exports;const ES=Qu(Qj),Jj="_chartContainer_1sr1q_1",e5="_chart_1sr1q_1",t5="_menu_1sr1q_10",rb={chartContainer:Jj,chart:e5,menu:t5},i5="أسبوع",r5={"Bi-Week":"كل اسبوعين",Week:i5},n5="Týden",s5={"Bi-Week":"Dvoutýden",Week:n5},a5="Week",o5={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:a5,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},l5="Semana",c5={"Bi-Week":"Quincenal",Week:l5},h5="Semana",u5={"Bi-Week":"Cada dos semanas",Week:h5},d5="Semaine",p5={"Bi-Week":"Bi-hebdomadaire",Week:d5},f5="Minggu",m5={"Bi-Week":"",Week:f5},g5="ອາທິດ",y5={"Bi-Week":"ສອງອາທິດຕໍ່ຄັ້ງ",Week:g5},x5="Uke",b5={"Bi-Week":"Toukentlig",Week:x5},v5="Week",_5={"Bi-Week":"",Week:v5},w5="هفته",T5={"Bi-Week":"",Week:w5},E5="اونۍ",C5={"Bi-Week":"",Week:E5},S5="Semana",k5={"Bi-Week":"Bimensal",Week:S5},A5="Semana",M5={"Bi-Week":"",Week:A5},P5="Неделя",I5={"Bi-Week":"",Week:P5},D5="සතිය",R5={"Bi-Week":"",Week:D5},L5="Тиждень",z5={"Bi-Week":"",Week:L5},N5="ہفتہ",O5={"Bi-Week":"",Week:N5},j5="Ҳафта",B5={"Bi-Week":"Жуфт-Ҳафта",Week:j5},F5="Hafta",U5={"Bi-Week":"Juft-Hafta",Week:F5},$5="Tuần",V5={"Bi-Week":"Kỳ 2 tuần này",Week:$5},G5="周",H5={"Bi-Week":"两周",Week:G5},W5="周",q5={"Bi-Week":"",Week:W5},Dn="default";it.addResources("ar",Dn,r5);it.addResources("cs",Dn,s5);it.addResources("en",Dn,o5);it.addResources("es",Dn,c5);it.addResources("es_419",Dn,u5);it.addResources("fr",Dn,p5);it.addResources("id",Dn,m5);it.addResources("lo",Dn,y5);it.addResources("nb",Dn,b5);it.addResources("nl",Dn,_5);it.addResources("prs",Dn,T5);it.addResources("ps",Dn,C5);it.addResources("pt",Dn,k5);it.addResources("pt_BR",Dn,M5);it.addResources("ru",Dn,I5);it.addResources("si",Dn,R5);it.addResources("uk",Dn,z5);it.addResources("ur",Dn,O5);it.addResources("uz_UZ_Cyrl",Dn,B5);it.addResources("uz_UZ_Latn",Dn,U5);it.addResources("vi",Dn,V5);it.addResources("zh",Dn,H5);it.addResources("zh_CN",Dn,q5);const CS={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},Y5={nepali:{"ne-NP":{monthNames:["बैशाख","जेठ","असार","साउन","भदौ","असोज","कार्तिक","मंसिर","पौष","माघ","फागुन","चैत"],dayNamesShort:["सोम","मंगल","बुध","बिही","शुक्र","शनि","आइत"],numbers:["०","१","२","३","४","५","६","७","८","९","१०","११","१२","१३","१४","१५","१६","१७","१८","१९","२०","२१","२२","२३","२४","२५","२६","२७","२८","२९","३०","३१","३२"]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},va={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class Z5 extends Pn.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:o,isoMonth:a,isoDay:c}=e.getISOFields();return(t=sb({year:o,month:a,day:c}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:o}=e;return va[t][o]}month(e){var t;const{isoYear:o,isoMonth:a,isoDay:c}=e.getISOFields();return(t=sb({year:o,month:a,day:c}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return SS(t)}day(e){const{isoYear:t,isoMonth:o,isoDay:a}=e.getISOFields(),{day:c}=sb({year:t,month:o,day:a});return c}dateFromFields(e,t){const{year:o,day:a,month:c}=nb({year:e.year,month:e.month,day:e.day},t);return new Pn.PlainDate(o,c,a,this)}yearMonthFromFields(e){const{year:t,day:o,month:a}=nb({year:e.year,month:e.month,day:e.day});return new Pn.PlainYearMonth(t,a,this,o)}monthDayFromFields(e){const{year:t,day:o,month:a}=nb({year:e.year,month:e.month,day:e.day});return new Pn.PlainMonthDay(o,a,this,t)}}const Xb=Object.keys(va),Lg=Number(Xb[0]),zg=Number(Xb[Xb.length-1]),nb=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<Lg||t>zg)throw new Error(`Conversions are only possible between ${Lg} and ${zg} in Nepali calendar`);const{month:o,day:a=1}=i;if(e==="reject"&&(o<1||o>12||a>va[t][o]))throw new Error("Invalid date in Nepali calendar");let c=0,u=o;const n=t-(o>9||u===9&&a>=va[t][0]?56:57);for(o!==9&&(c=a,u--);u!==9;)u<=0&&(u=12,t--),c+=va[t][u],u--;o===9?(c+=a-va[t][0],c<0&&(c+=Pn.PlainDate.from({year:n,day:1,month:1}).daysInYear)):c+=va[t][9]-va[t][0];const p=Pn.PlainDate.from({year:n,month:1,day:1}).add({days:c});return{year:p.year,month:p.month,monthCode:SS(p.month),day:p.day}},sb=i=>{const e=Pn.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,o=e.dayOfYear;let a=t+56;if(!va[a])throw new Error(`Conversions are only possible between ${Lg} and ${zg} in Nepali calendar`);let c=9;const u=va[a][0];let n=va[a][c]-u+1;for(;o>n;){var p;c++,c>12&&(c=1,a++),n+=(p=va[a])===null||p===void 0?void 0:p[c]}if(!va[a])throw new Error(`Conversions are only possible between ${Lg} and ${zg} in Nepali calendar`);const m=va[a][c]-(n-o);return{year:a,month:c,day:m}};function SS(i){return`M${i.toString().padStart(2,"0")}`}const f0={nepali:{calendar:new Z5,locales:Y5.nepali,defaultLocale:"en-NP"}},X5=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function K5(i,e){const t=i.match(X5);if(!t)throw new Error(it.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let o,a,c,u;t[1]?(o=t[1],a=t[3],c=t[5],u="YYYY-MM-DD"):(c=t[6],a=t[8],o=t[10],u="DD-MM-YYYY");const n=parseInt(o,10),p=parseInt(a,10),m=parseInt(c,10);return{year:n,month:p,day:m,format:u}}let C1;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(C1||(C1={}));const yc=i=>!!f0[i],rc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},Za=(i,e,t)=>{var o;const a=(o=i.eraYear)!==null&&o!==void 0?o:i.year,c=rc(i.month);let u=i.day;e==="endOfMonth"?u=i.daysInMonth:e==="startOfMonth"&&(u=1);const n=rc(u);return t==="DD-MM-YYYY"?`${n}-${c}-${a}`:`${a}-${c}-${n}`},kS=i=>{var e;if(!yc(i))return i;const o=(e=f0[i])===null||e===void 0?void 0:e.calendar;if(!o)throw new Error(`No implemenation found for custom calendar ${i}`);return o},Q5=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],J5=(i,e)=>{const t=Object.keys(i).find(o=>{var a,c;return((a=o.split("-"))===null||a===void 0||(c=a[0])===null||c===void 0?void 0:c.toLowerCase())===e});if(t)return i[t]},m0=(i,e)=>{var t,o;const a=f0[i];if(!a)return;const c=a.locales||{},u=(t=(o=e&&(c==null?void 0:c[e]))!==null&&o!==void 0?o:J5(c,e))!==null&&t!==void 0?t:c==null?void 0:c[a.defaultLocale];if(!u)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${a.defaultLocale}`);return u},eB=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const o=yc(e.calendar),a=i instanceof Pn.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return o?Za(i):a.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},tB=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const o=yc(e.calendar),a=m0(e.calendar,e.locale);return o?(a==null||(t=a.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:Q5.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},iB=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const o=yc(e.calendar),a=m0(e.calendar,e.locale);return o?a==null?void 0:a.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},rB=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=yc(e.calendar),o=m0(e.calendar,e.locale),a=o==null?void 0:o.dayNamesShort[i.dayOfWeek-1];return t&&a?a:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},nB=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return yc(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},ph={localiseYear:nB,localiseDateLabel:eB,localiseWeekLabel:tB,localiseMonth:iB,localiseWeekDayLabel:rB},AS=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,o]=i.replace(/_/g,"-").split("-");let a=e;o&&(a=`${a}-${o}`),t&&(a=`${a}-${t}`);try{const c=Intl.DateTimeFormat.supportedLocalesOf(a);return c&&c.length===1?a:void 0}catch{return}},sB=i=>{let{date:e,calendar:t}=i;const{year:o,month:a,day:c}=K5(e);return Pn.PlainDate.from({year:o,month:a,day:c,calendar:t})},_l=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return sB({date:e,calendar:t});if(e instanceof Date)return Pn.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Pn.PlainDate)return Pn.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(it.t('Unrecognized date, received "{{date}}"',{date:e}))},ts=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],aB=ts.filter(i=>i.match(/WEEKLY/)),MS=ts.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),kf=ts.filter(i=>i.match(/QUARTERLY/)),Af=ts.filter(i=>i.match(/SIXMONTHLY/)),oB=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],lB=ts.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),PS=MS.filter(i=>i!=="MONTHLY"),cB=ts.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),hB=ts.filter(i=>i.match(/^FY[A-Z]{3}$/));[...oB,...ts.filter(i=>i.match(/JAN$/))];const uB=ts.filter(i=>i.match(/FEB$/)),dB=ts.filter(i=>i.match(/MAR$/)),pB=ts.filter(i=>i.match(/APR$/)),fB=ts.filter(i=>i.match(/MAY$/)),mB=ts.filter(i=>i.match(/JUN$/)),gB=ts.filter(i=>i.match(/JUL$/)),yB=ts.filter(i=>i.match(/AUG$/)),xB=ts.filter(i=>i.match(/SEP$/)),bB=ts.filter(i=>i.match(/OCT$/)),vB=ts.filter(i=>i.match(/NOV$/)),_B=ts.filter(i=>i.match(/DEC/)),{localiseDateLabel:wB}=ph,IS=i=>{let{date:e,calendar:t,locale:o}=i;const a=e.year,c=String(e.month).padStart(2,"0"),u=String(e.day).padStart(2,"0"),n=`${a}${c}${u}`,p=wB(e,{calendar:t,locale:o},{dateStyle:"long"});return{periodType:"DAILY",id:n,iso:n,displayName:p,name:Za(e),startDate:Za(e),endDate:Za(e)}},TB=i=>{let{year:e,calendar:t,endsBefore:o,locale:a}=i;const c=o?_l({calendar:t,date:o}):null,u=Pn.PlainDate.from({year:e,month:1,day:1,calendar:t}),n=[];for(let p=0;p<u.daysInYear;p++){const m=u.add({days:p});if(c&&Pn.PlainDate.compare(m,c)>-1)break;const g=IS({date:m,calendar:t,locale:a});n.push(g)}return n},Hu=i=>uB.includes(i)?"FEB":dB.includes(i)?"MAR":pB.includes(i)?"APR":fB.includes(i)?"MAY":mB.includes(i)?"JUN":gB.includes(i)?"JUL":yB.includes(i)?"AUG":xB.includes(i)?"SEP":bB.includes(i)?"OCT":vB.includes(i)?"NOV":_B.includes(i)?"DEC":"JAN",Oo={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},EB=i=>{let{periodType:e,month:t,year:o,calendar:a,locale:c}=i;const u=MB({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),n=SB(e),p=t.add({months:n}),m=CB({periodType:e,currentMonth:t,year:o,index:u});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const g=Pn.PlainDate.from({year:p.year,month:p.month,day:1,calendar:p.calendar}).subtract({days:1}),v=kB({periodType:e,month:t,locale:c,calendar:a,nextMonth:p.subtract({months:1}),index:u});return{periodType:e,id:m,iso:m,name:v,displayName:v,startDate:Za(t,"startOfMonth"),endDate:Za(g,"endOfMonth")}},CB=i=>{let{periodType:e,currentMonth:t,year:o,index:a}=i;if(e==="BIMONTHLY")return`${o}${rc(a)}B`;if(e==="QUARTERLY")return`${o}Q${a}`;if(e==="SIXMONTHLY")return`${o}S${a}`;if(kf.includes(e)){const c=Oo[Hu(e)].name;return`${o}${c}Q${a}`}if(Af.includes(e)){const c=Oo[Hu(e)].name;return`${o}${c}S${a}`}return`${o}${rc(t.month)}`},SB=i=>{if(Af.includes(i))return 6;if(kf.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},kB=i=>{const{periodType:e,month:t,nextMonth:o,calendar:a,locale:c}=i;if(yc(a))return AB(i);const u={month:"long",year:"numeric",calendar:a},n={month:"long",calendar:a};let p="";if(PS.includes(e)){const m=t.year===o.year?n:u;p=`${t.toLocaleString(c,m)} - ${o.toLocaleString(c,u)}`}else p=`${t.toLocaleString(c,u)}`;return p=p.replace(/ERA\d+\s*/g,"").trim(),p},AB=i=>{let{periodType:e,month:t,nextMonth:o,calendar:a,locale:c}=i,u="";if(PS.includes(e)){const n=t.year!==o.year;u=`${ph.localiseMonth(t,{locale:c,calendar:a},{})}${n?` ${t.year}`:""} - ${ph.localiseMonth(o,{locale:c,calendar:a},{})} ${o.year}`}else u=`${ph.localiseMonth(t,{locale:c,calendar:a},{})} ${o.year}`;return u},MB=i=>{let{periodType:e,month:t,monthsInYear:o}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(kf.includes(e))return IB(e,t,o);if(Af.includes(e))return PB(e,t,o);throw new Error(`Unrecognized period type "${e}"`)},DS=(i,e)=>[...Array(e-i+1).fill(null).map((o,a)=>a+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),RS=(i,e)=>{const t=[];for(let o=0;o<12;o+=e)t.push(i.slice(o,o+e));return t},PB=(i,e,t)=>{const o=Hu(i),a=Oo[o].value,c=DS(a,t);return RS(c,6)[1].includes(e)?2:1},IB=(i,e,t)=>{const o=Hu(i),a=Oo[o].value,c=DS(a,t),u=RS(c,3);return u[1].includes(e)?2:u[2].includes(e)?3:u[3].includes(e)?4:1},g0=i=>{let{period:e,date:t,calendar:o}=i;const a=_l({calendar:o,date:e.startDate}),c=_l({calendar:o,date:e.endDate}),u=Pn.PlainDate.compare(t,a)<1,n=Pn.PlainDate.compare(a,t)===-1,p=Pn.PlainDate.compare(t,c)<1;return u||n&&p},DB=i=>{let{year:e,calendar:t,periodType:o,endsBefore:a,locale:c}=i,u=Pn.PlainDate.from({year:e,month:LB(o),day:t.toString()==="nepali"?14:1,calendar:t});const n=[];for(;u.year===e||zB(o,n.length);){const p=NB({periodType:o,currentMonth:u.month,year:e,calendar:t});if(!RB(t,u)){const v=EB({periodType:o,month:u,year:e,calendar:t,locale:c});if(a&&g0({period:v,date:a,calendar:t}))break;n.push(v)}const g=u.add({months:p});u=_l({date:g,calendar:t})}return n},RB=(i,e)=>i==="ethiopic"&&e.month===13,LB=i=>{if(lB.includes(i)){const e=Hu(i);return Oo[e].value}return 1},zB=(i,e)=>Af.includes(i)?e<2:kf.includes(i)?e<4:!1,NB=i=>{let{periodType:e}=i;if(Af.includes(e))return 6;if(kf.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},Vl={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},OB=i=>{let{year:e,calendar:t,periodType:o,startingDay:a,endsBefore:c}=i;const u=jB(o,a);let n=BB({year:e,calendar:t,periodType:o,startingDay:u});const p=[];let m=1;const g=o==="BIWEEKLY"?13:6;do{const v=n.add({days:g});if(c&&g0({period:{startDate:Za(n),endDate:Za(v)},date:c,calendar:t}))break;const y=UB({periodType:o,startingDay:u,year:e,weekIndex:m});if(!(v.year===e+1&&v.day>=4)){const k=$B({periodType:o,date:n,nextWeek:v,weekIndex:m});p.push({periodType:o,id:y,iso:y,name:k,displayName:k,startDate:Za(n),endDate:Za(v)})}n=_l({date:v,calendar:t}).add({days:1}),m++}while(n.year===e);return p},jB=(i,e)=>{switch(i){case"WEEKLYMON":return Vl.Monday;case"WEEKLYTUE":return Vl.Tuesday;case"WEEKLYWED":return Vl.Wednesday;case"WEEKLYTHU":return Vl.Thursday;case"WEEKLYFRI":return Vl.Friday;case"WEEKLYSAT":return Vl.Saturday;case"WEEKLYSUN":return Vl.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||Vl.Monday}},BB=i=>{const{year:e,calendar:t,startingDay:o}=i,a=Pn.PlainDate.from({year:e,month:1,day:4,calendar:t}),c=a.dayOfWeek-o;return c>0?a.subtract({days:c}):c<0?a.subtract({days:c+7}):a},FB={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},UB=i=>{let{startingDay:e,periodType:t,year:o,weekIndex:a}=i;const c=t==="BIWEEKLY"?"BiW":"W";return`${o}${FB[e]}${c}${a}`},$B=i=>{let{periodType:e,date:t,nextWeek:o,weekIndex:a}=i;const{year:c,month:u,day:n}=t,{year:p,month:m,day:g}=o;return`${e==="BIWEEKLY"?it.t("Bi-Week"):it.t("Week")} ${a} - ${c}-${rc(u)}-${rc(n)} - ${p}-${rc(m)}-${rc(g)}`},LS=i=>{if(i==="YEARLY")return 1;const e=Hu(i),t=Oo[e];return(t==null?void 0:t.value)||1},zS={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},NS=i=>{let{periodType:e,year:t,locale:o,calendar:a}=i;const c=LS(e),u=VB({periodType:e,year:t,month:c}),n=c.toString().padStart(2,"0"),p=_l({date:`${t}-${n}-01`,calendar:a}),m=_l({date:`${t+1}-${n}-01`,calendar:a}).subtract({days:1}),g=HB(e,p,{locale:o,calendar:a});return{periodType:e,id:u,iso:u,name:g,displayName:g,startDate:Za(p,"startOfMonth"),endDate:Za(m,"endOfMonth")}},VB=i=>{let{periodType:e,year:t,month:o}=i;if(e==="YEARLY")return t.toString();if(GB(e)){const a=zS[o];return`${t}${a}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},GB=i=>hB.includes(i),HB=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(yc(t.calendar))return WB(e,t);const o={month:"long",year:"numeric",calendar:t.calendar},a=ph.localiseMonth(e,t,o),c=ph.localiseMonth(e.add({months:e.monthsInYear-1}),t,o);let u=`${a} - ${c}`;return u=u.replace(/ERA\d+\s*/g,"").trim(),u},WB=(i,e)=>{const t=c=>`${ph.localiseMonth(c,e,{})} ${c.year}`,o=Pn.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(o)}`},qB=i=>{let{year:e,calendar:t,periodType:o,endsBefore:a,yearsCount:c,locale:u}=i;const n=LS(o),p=Pn.PlainDate.from({year:e,month:n,day:t.toString()==="nepali"?14:1,calendar:t}),m=Pn.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),g=m.eraYear||m.year,v=[],y=c??e-g+1;for(let k=0;k<y;k++){const _=p.year-k,T=NS({periodType:o,year:_,locale:u,calendar:t});a&&g0({period:T,date:a,calendar:t})||v.push(T)}return v},Wm=i=>{var e,t;let{periodType:o,year:a,endsBefore:c,calendar:u,locale:n="en",yearsCount:p=10,startingDay:m=1}=i,g;if(typeof a=="number")g=a;else if(!isNaN(a)&&!isNaN(parseInt(a)))g=parseInt(a);else throw new Error("year must be a number");const v=kS((e=CS[u])!==null&&e!==void 0?e:u),y=(t=AS(n))!==null&&t!==void 0?t:"en",k=c?_l({calendar:v,date:c}):void 0;if(aB.includes(o))return OB({year:g,periodType:o,calendar:v,startingDay:m,endsBefore:k});if(cB.includes(o))return qB({year:g,periodType:o,locale:y,calendar:v,endsBefore:k,yearsCount:p});if(MS.includes(o))return DB({year:g,periodType:o,locale:y,calendar:v,endsBefore:k});if(o==="DAILY")return TB({year:g,locale:y,calendar:v,endsBefore:k});throw new Error(`can not generate period for unrecognised period type "${o}"`)},YB=new RegExp("^([0-9]{4})W([0-9]+)$"),ZB=new RegExp("^([0-9]{4})BiW([0-9]+)$"),XB=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),KB=new RegExp("^([0-9]{4})([0-9]{2})$"),QB=new RegExp("^([0-9]{4})([0-9]{2})B$"),JB=new RegExp("^([0-9]{4})Q([0-9])$"),e4=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),t4=new RegExp("^([0-9]{4})S([0-9])$"),i4=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),r4=new RegExp("^([0-9]{4})$"),n4=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),s4=Object.values(zS).slice(1).join("|"),a4=new RegExp(`^[0-9]{4}(${s4})?$`),o4=i=>a4.test(i),S1=Object.values(Oo).map(i=>{let{name:e}=i;return e}).join("|"),l4=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${S1})?Q[0-9]$`,`^[0-9]{4}(${S1})?S[0-9]$`].join("|"),c4=new RegExp(l4),h4=i=>c4.test(i),u4=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),d4=i=>/^[0-9]{8}$/.test(i),p4=i=>{if(KB.test(i))return"MONTHLY";if(QB.test(i))return"BIMONTHLY";if(JB.test(i))return"QUARTERLY";const e=i.match(e4);if(e){const o=e[2],a=Object.entries(Oo).find(u=>{let[,{name:n}]=u;return n===o});if(!a)throw new Error("@TODO");const[c]=a;return`QUARTERLY${c}`}if(t4.test(i))return"SIXMONTHLY";const t=i.match(i4);if(t){const o=t[2],a=Object.entries(Oo).find(u=>{let[,{name:n}]=u;return n===o});if(!a)throw new Error("@TODO");const[c]=a;return`SIXMONTHLY${c}`}throw new Error(it.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},f4=i=>{if(YB.test(i))return"WEEKLY";if(ZB.test(i))return"BIWEEKLY";const e=i.match(XB);if(e){const[,,t]=e,o=`WEEKLY${t.toUpperCase()}`;if(!ts.includes(o))throw new Error(it.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return o}throw new Error(it.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},m4=i=>{if(r4.test(i))return"YEARLY";const e=i.match(n4);if(e){const t=e[2].slice(0,3),o=Object.entries(Oo).find(c=>{let[,{name:u}]=c;return u.startsWith(t)});if(!o)throw new Error("@TODO");const[a]=o;return`FY${a}`}throw new Error(it.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},y0=i=>{var e,t;let{periodId:o,calendar:a,locale:c="en"}=i;const u=kS((e=CS[a])!==null&&e!==void 0?e:a),n=(t=AS(c))!==null&&t!==void 0?t:"en";if(o4(o)){const p=parseInt(o.substring(0,4),10),m=m4(o);return NS({year:p,periodType:m,calendar:u,locale:c})}if(h4(o)){const p=p4(o),m=parseInt(o.substring(0,4),10),v=Wm({periodType:p,year:m,calendar:u,locale:n}).find(_=>{let{id:T}=_;return T===o});if(v)return v;const k=Wm({year:m+1,periodType:p,calendar:u,locale:n}).slice(-1).find(_=>{let{id:T}=_;return T===o});if(!k)throw new Error(it.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:o}));return k}if(u4(o)){const p=parseInt(o.substring(0,4),10),m=f4(o),v=Wm({year:p,periodType:m,calendar:u,locale:c}).find(k=>{let{id:_}=k;return _===o});if(v)return v;const[y]=Wm({year:p-1,periodType:m,calendar:u,locale:c}).slice(-1);if(y.id===o)return y;throw new Error(it.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:o}))}if(d4(o)){const p=o.substring(0,4),m=o.substring(4,6),g=o.substring(6),v=_l({date:`${p}-${m}-${g}`,calendar:u});return IS({date:v,locale:c,calendar:u})}throw new Error(it.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:o}))};qj(Ph);Kj(Ph);Zj(Ph);const k1=(i,e)=>{Ph.getOptions().colors;const t=i.filter(a=>a.dataElement==="median").map(a=>[a.period,a.value]),o=i.filter(a=>a.dataElement==="quantile_low").map(a=>[a.period,a.value,i.filter(c=>c.dataElement==="quantile_high"&&c.period===a.period)[0].value]);return{title:{text:it.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return y0({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:it.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:it.t("Range"),data:o,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function g4(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(o=>o.orgUnit===t))}const y4=i=>{let{data:e,predictionTargetName:t}=i;const o=g4(e.dataValues),[a,c]=$e.useState(k1(o[0],t)),[u,n]=$e.useState(0),p=m=>{n(m),c(k1(o[m],t))};return Me.createElement(Me.Fragment,null,Me.createElement("div",{className:rb.chartContainer},Me.createElement("div",null,Me.createElement(fv,{dense:!0},o.map((m,g)=>Me.createElement(ju,{className:rb.menu,active:u==g,key:g,label:m[0].displayName,onClick:()=>p(g)})))),Me.createElement("div",{className:rb.chart},Me.createElement(ES,{highcharts:Ph,constructorType:"chart",options:a}))))};function pp(i,e,t){return(e=x4(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function x4(i){var e=b4(i,"string");return typeof e=="symbol"?e:e+""}function b4(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var o=t.call(i,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class A1 extends Error{constructor(e,t,o){super(o),pp(this,"url",void 0),pp(this,"status",void 0),pp(this,"statusText",void 0),pp(this,"body",void 0),pp(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function Kc(i,e,t){v4(i,e),e.set(i,t)}function v4(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yr(i,e){return i.get(OS(i,e))}function Co(i,e,t){return i.set(OS(i,e),t),t}function OS(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class _4 extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var Gl=new WeakMap,Hl=new WeakMap,cl=new WeakMap,vu=new WeakMap,fp=new WeakMap,qm=new WeakMap,_u=new WeakMap;class w4{constructor(e){Kc(this,Gl,void 0),Kc(this,Hl,void 0),Kc(this,cl,void 0),Kc(this,vu,void 0),Kc(this,fp,void 0),Kc(this,qm,void 0),Kc(this,_u,void 0),Co(Gl,this,!1),Co(Hl,this,!1),Co(cl,this,!1),Co(vu,this,[]),Co(fp,this,new Promise((t,o)=>{Co(qm,this,t),Co(_u,this,o);const a=n=>{Yr(Gl,this)||Yr(Hl,this)||Yr(cl,this)||(Co(Gl,this,!0),Yr(qm,this)&&Yr(qm,this).call(this,n))},c=n=>{Yr(Gl,this)||Yr(Hl,this)||Yr(cl,this)||(Co(Hl,this,!0),Yr(_u,this)&&Yr(_u,this).call(this,n))},u=n=>{Yr(Gl,this)||Yr(Hl,this)||Yr(cl,this)||Yr(vu,this).push(n)};return Object.defineProperty(u,"isResolved",{get:()=>Yr(Gl,this)}),Object.defineProperty(u,"isRejected",{get:()=>Yr(Hl,this)}),Object.defineProperty(u,"isCancelled",{get:()=>Yr(cl,this)}),e(a,c,u)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Yr(fp,this).then(e,t)}catch(e){return Yr(fp,this).catch(e)}finally(e){return Yr(fp,this).finally(e)}cancel(){if(!(Yr(Gl,this)||Yr(Hl,this)||Yr(cl,this))){if(Co(cl,this,!0),Yr(vu,this).length)try{for(const e of Yr(vu,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}Yr(vu,this).length=0,Yr(_u,this)&&Yr(_u,this).call(this,new _4("Request aborted"))}}get isCancelled(){return Yr(cl,this)}}const $i={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0};let M1;(function(i){let e=function(t){return t.STRING="string",t.INTEGER="integer",t.FLOAT="float",t.BOOLEAN="boolean",t}({});i.type=e})(M1||(M1={}));const x0=i=>i!=null,Mf=i=>typeof i=="string",ab=i=>Mf(i)&&i!=="",b0=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),jS=i=>i instanceof FormData,T4=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},E4=i=>{const e=[],t=(a,c)=>{e.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(c))}`)},o=(a,c)=>{x0(c)&&(Array.isArray(c)?c.forEach(u=>{o(a,u)}):typeof c=="object"?Object.entries(c).forEach(u=>{let[n,p]=u;o(`${a}[${n}]`,p)}):t(a,c))};return Object.entries(i).forEach(a=>{let[c,u]=a;o(c,u)}),e.length>0?`?${e.join("&")}`:""},C4=(i,e)=>{const t=encodeURI,o=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(c,u)=>{var n;return(n=e.path)!==null&&n!==void 0&&n.hasOwnProperty(u)?t(String(e.path[u])):c}),a=`${i.BASE}${o}`;return e.query?`${a}${E4(e.query)}`:a},S4=i=>{if(i.formData){const e=new FormData,t=(o,a)=>{Mf(a)||b0(a)?e.append(o,a):e.append(o,JSON.stringify(a))};return Object.entries(i.formData).filter(o=>{let[a,c]=o;return x0(c)}).forEach(o=>{let[a,c]=o;Array.isArray(c)?c.forEach(u=>t(a,u)):t(a,c)}),e}},Ym=async(i,e)=>e,k4=async(i,e)=>{const[t,o,a,c]=await Promise.all([Ym(e,i.TOKEN),Ym(e,i.USERNAME),Ym(e,i.PASSWORD),Ym(e,i.HEADERS)]),u=Object.entries({Accept:"application/json",...c,...e.headers}).filter(n=>{let[p,m]=n;return x0(m)}).reduce((n,p)=>{let[m,g]=p;return{...n,[m]:String(g)}},{});if(ab(t)&&(u.Authorization=`Bearer ${t}`),ab(o)&&ab(a)){const n=T4(`${o}:${a}`);u.Authorization=`Basic ${n}`}return e.body!==void 0&&(e.mediaType?u["Content-Type"]=e.mediaType:b0(e.body)?u["Content-Type"]=e.body.type||"application/octet-stream":Mf(e.body)?u["Content-Type"]="text/plain":jS(e.body)||(u["Content-Type"]="application/json")),new Headers(u)},A4=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):Mf(i.body)||b0(i.body)||jS(i.body)?i.body:JSON.stringify(i.body)}},M4=async(i,e,t,o,a,c,u)=>{const n=new AbortController,p={headers:c,body:o??a,method:e.method,signal:n.signal};return i.WITH_CREDENTIALS&&(p.credentials=i.CREDENTIALS),u(()=>n.abort()),await fetch(t,p)},P4=(i,e)=>{if(e){const t=i.headers.get(e);if(Mf(t))return t}},I4=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(a=>e.toLowerCase().startsWith(a))?await i.json():await i.text()}catch(e){console.error(e)}},D4=(i,e)=>{const o={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(o)throw new A1(i,e,o);if(!e.ok){var a,c;const u=(a=e.status)!==null&&a!==void 0?a:"unknown",n=(c=e.statusText)!==null&&c!==void 0?c:"unknown",p=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new A1(i,e,`Generic Error: status: ${u}; status text: ${n}; body: ${p}`)}},er=(i,e)=>new w4(async(t,o,a)=>{try{const c=C4(i,e),u=S4(e),n=A4(e),p=await k4(i,e);if(!a.isCancelled){const m=await M4(i,e,c,n,u,p,a),g=await I4(m),v=P4(m,e.responseHeader),y={url:c,ok:m.ok,status:m.status,statusText:m.statusText,body:v??g};D4(e,y),t(y.body)}}catch(c){o(c)}});class Wu{static makeDatasetAnalyticsMakeDatasetPost(e){return er($i,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t){return er($i,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return er($i,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return er($i,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return er($i,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e){return er($i,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return er($i,{method:"GET",url:"/analytics/data-sources"})}}class co{static getBacktestsCrudBacktestsGet(){return er($i,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return er($i,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return er($i,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return er($i,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return er($i,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return er($i,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return er($i,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return er($i,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return er($i,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return er($i,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return er($i,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return er($i,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return er($i,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return er($i,{method:"GET",url:"/crud/models"})}static listModelsFromModelTemplatesCrudModelsFromModelTemplatesGet(){return er($i,{method:"GET",url:"/crud/models-from-model-templates"})}static listModelTemplatesCrudModelTemplatesGet(){return er($i,{method:"GET",url:"/crud/modelTemplates"})}static debugEntryCrudDebugPost(){return er($i,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return er($i,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}static listFeatureTypesCrudFeatureSourcesGet(){return er($i,{method:"GET",url:"/crud/feature-sources"})}}class BS{static faviconfaviconIcoGet(){return er($i,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return er($i,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return er($i,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:o},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return er($i,{method:"GET",url:"/list-models"})}static listModelTemplatesListModelTemplatesGet(){return er($i,{method:"GET",url:"/list-model-templates"})}static listFeaturesListFeaturesGet(){return er($i,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return er($i,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return er($i,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return er($i,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return er($i,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return er($i,{method:"GET",url:"/status"})}static healthHealthGet(){return er($i,{method:"GET",url:"/health"})}static versionVersionGet(){return er($i,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return er($i,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return er($i,{method:"GET",url:"/system-info"})}}class v0{static listJobsJobsGet(){return er($i,{method:"GET",url:"/jobs"})}static getJobStatusJobsJobIdGet(e){return er($i,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return er($i,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return er($i,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return er($i,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return er($i,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return er($i,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function FS(i,e){const t=o=>{if(o.includes("W")){const[a,c]=o.split("W").map(Number),u=new Date(a,0,1),n=(c-1)*7;return new Date(u.setDate(u.getDate()+n))}else{const a=Number(o.slice(0,4)),c=Number(o.slice(4,6))-1;return new Date(a,c)}};return t(i).getTime()-t(e).getTime()}function R4(i,e){var t;const o=e.map(k=>k.pe).sort(FS),a=o.map(k=>{var _,T;return(_=(T=e.find(M=>M.pe===k))===null||T===void 0?void 0:T.value)!==null&&_!==void 0?_:null}),c=(k,_)=>{if(!_)return new Map;const T=new Map;for(let M=0;M<k.length;M++)T.set(k[M],_[M]);return T},u=c(i.periods,i.averages.slice()),n=c(i.periods,i.ranges.slice()),p=c(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),m=(k,_)=>k.map(T=>{var M;return(M=_.get(T))!==null&&M!==void 0?M:null}),g=m(o,u),v=m(o,n),y=m(o,p);return{periods:o,ranges:v,averages:g,realValues:a,midranges:y}}const L4=(i,e,t)=>{const o=Array.from(new Set(i.map(g=>g.quantile))).sort(),a=o[0],c=o[1],u=o[o.length-2],n=o[o.length-1],p=g=>g.quantile===a?"quantile_low":g.quantile===n?"quantile_high":g.quantile===.5?"median":g.quantile===c?"quantile_mid_low":g.quantile===u?"quantile_mid_high":"unknown",m=Array.from(new Set(i.map(g=>g.modelName||t)));return Array.from(new Set(i.map(g=>g.splitPeriod))).map(g=>({splitPoint:g,evaluation:Array.from(new Set(i.map(v=>v.orgUnit))).map(v=>({orgUnitName:v,orgUnitId:v,models:m.map(y=>{const k=z4(i.filter(T=>T.orgUnit===v&&T.splitPeriod===g&&((T==null?void 0:T.modelName)||t)===y),p),_=R4(k,e.filter(T=>T.ou===v));return{modelName:y,data:_}})}))}))};function z4(i,e){const t=Array.from(new Set(i.map(n=>n.period))).sort(FS),o=[],a=[],c=[];return t.forEach(n=>{var p,m,g,v,y;const k=((p=i.find(x=>x.period===n&&e(x)==="quantile_low"))===null||p===void 0?void 0:p.value)||0,_=((m=i.find(x=>x.period===n&&e(x)==="quantile_high"))===null||m===void 0?void 0:m.value)||0,T=((g=i.find(x=>x.period===n&&e(x)==="median"))===null||g===void 0?void 0:g.value)||0,M=((v=i.find(x=>x.period===n&&e(x)==="quantile_mid_high"))===null||v===void 0?void 0:v.value)||0,A=((y=i.find(x=>x.period===n&&e(x)==="quantile_mid_low"))===null||y===void 0?void 0:y.value)||0;o.push([k,_]),a.push([T]),c.push([A,M])}),{periods:t,ranges:o,averages:a,midranges:c}}function N4(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const O4=i=>{const{enabled:e,wrapperClassName:t,children:o,...a}=i;return e?Me.createElement(ny,a,c=>{let{onMouseOver:u,onMouseOut:n,ref:p}=c;return Me.createElement("span",{className:t,ref:m=>{m&&(m.onpointerenter=u,m.onpointerleave=n,p.current=m)}},o)}):o},US=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}};function j4(i){Ph.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const B4=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],F4=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return US(this.value)},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:j4},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:B4(i)}),U4=i=>{let{data:e,modelName:t,syncZoom:o}=i;const[a,c]=$e.useState(!1);return $e.useEffect(()=>{c(!0)},[e]),$e.useEffect(()=>{a&&c(!1)},[a]),Me.createElement(Me.Fragment,null,!a&&Me.createElement(ES,{highcharts:Ph,options:F4(e,t,o)}))},$4="_title_4ki8g_1",V4="_comparionBox_4ki8g_7",G4="_comparionBoxSideBySide_4ki8g_15",H4="_comparionBoxSideBySideItem_4ki8g_22",Zm={title:$4,comparionBox:V4,comparionBoxSideBySide:G4,comparionBoxSideBySideItem:H4},P1=i=>{let{orgUnitsData:e}=i;return Me.createElement("div",{className:Zm.comparionBox},Me.createElement("div",{className:Zm.title},e.orgUnitName),Me.createElement("div",{className:Zm.comparionBoxSideBySide},e.models.map((t,o)=>Me.createElement("div",{key:o,className:Zm.comparionBoxSideBySideItem},Me.createElement(U4,{syncZoom:e.models.length>1,data:t.data,modelName:t.modelName})))))},ky=0,xc=1,od=2,$S=4;function VS(i,e){return t=>i(e(t))}function W4(i,e){return e(i)}function GS(i,e){return t=>i(e,t)}function I1(i,e){return()=>i(e)}function Ay(i,e){return e(i),i}function Sn(...i){return i}function q4(i){i()}function D1(i){return()=>i}function Y4(...i){return()=>{i.map(q4)}}function _0(i){return i!==void 0}function ld(){}function Xr(i,e){return i(xc,e)}function br(i,e){i(ky,e)}function w0(i){i(od)}function Gs(i){return i($S)}function Ni(i,e){return Xr(i,GS(e,ky))}function jo(i,e){const t=i(xc,o=>{t(),e(o)});return t}function Rr(){const i=[];return(e,t)=>{switch(e){case od:i.splice(0,i.length);return;case xc:return i.push(t),()=>{const o=i.indexOf(t);o>-1&&i.splice(o,1)};case ky:i.slice().forEach(o=>{o(t)});return;default:throw new Error(`unrecognized action ${e}`)}}}function ci(i){let e=i;const t=Rr();return(o,a)=>{switch(o){case xc:a(e);break;case ky:e=a;break;case $S:return e}return t(o,a)}}function Z4(i){let e,t;const o=()=>e&&e();return function(a,c){switch(a){case xc:return c?t===c?void 0:(o(),t=c,e=Xr(i,c),e):(o(),ld);case od:o(),t=null;return;default:throw new Error(`unrecognized action ${a}`)}}}function Fa(i){return Ay(Rr(),e=>Ni(i,e))}function ha(i,e){return Ay(ci(e),t=>Ni(i,t))}function X4(...i){return e=>i.reduceRight(W4,e)}function Wt(i,...e){const t=X4(...e);return(o,a)=>{switch(o){case xc:return Xr(i,t(a));case od:w0(i);return}}}function HS(i,e){return i===e}function Tn(i=HS){let e;return t=>o=>{i(e,o)||(e=o,t(o))}}function nr(i){return e=>t=>{i(t)&&e(t)}}function Ai(i){return e=>VS(e,i)}function Ao(i){return e=>()=>e(i)}function Po(i,e){return t=>o=>t(e=i(e,o))}function qu(i){return e=>t=>{i>0?i--:e(t)}}function nc(i){let e=null,t;return o=>a=>{e=a,!t&&(t=setTimeout(()=>{t=void 0,o(e)},i))}}function R1(i){let e,t;return o=>a=>{e=a,t&&clearTimeout(t),t=setTimeout(()=>{o(e)},i)}}function wr(...i){const e=new Array(i.length);let t=0,o=null;const a=Math.pow(2,i.length)-1;return i.forEach((c,u)=>{const n=Math.pow(2,u);Xr(c,p=>{const m=t;t=t|n,e[u]=p,m!==a&&t===a&&o&&(o(),o=null)})}),c=>u=>{const n=()=>c([u].concat(e));t===a?n():o=n}}function L1(...i){return function(e,t){switch(e){case xc:return Y4(...i.map(o=>Xr(o,t)));case od:return;default:throw new Error(`unrecognized action ${e}`)}}}function cr(i,e=HS){return Wt(i,Tn(e))}function cs(...i){const e=Rr(),t=new Array(i.length);let o=0;const a=Math.pow(2,i.length)-1;return i.forEach((c,u)=>{const n=Math.pow(2,u);Xr(c,p=>{t[u]=p,o=o|n,o===a&&br(e,t)})}),function(c,u){switch(c){case xc:return o===a&&u(t),Xr(e,u);case od:return w0(e);default:throw new Error(`unrecognized action ${c}`)}}}function Kr(i,e=[],{singleton:t}={singleton:!0}){return{id:K4(),constructor:i,dependencies:e,singleton:t}}const K4=()=>Symbol();function Q4(i){const e=new Map,t=({id:o,constructor:a,dependencies:c,singleton:u})=>{if(u&&e.has(o))return e.get(o);const n=a(c.map(p=>t(p)));return u&&e.set(o,n),n};return t(i)}function J4(i,e){const t={},o={};let a=0;const c=i.length;for(;a<c;)o[i[a]]=1,a+=1;for(const u in e)o.hasOwnProperty(u)||(t[u]=e[u]);return t}const Xm=typeof document<"u"?Me.useLayoutEffect:Me.useEffect;function WS(i,e,t){const o=Object.keys(e.required||{}),a=Object.keys(e.optional||{}),c=Object.keys(e.methods||{}),u=Object.keys(e.events||{}),n=Me.createContext({});function p(A,x){A.propsReady&&br(A.propsReady,!1);for(const P of o){const D=A[e.required[P]];br(D,x[P])}for(const P of a)if(P in x){const D=A[e.optional[P]];br(D,x[P])}A.propsReady&&br(A.propsReady,!0)}function m(A){return c.reduce((x,P)=>(x[P]=D=>{const w=A[e.methods[P]];br(w,D)},x),{})}function g(A){return u.reduce((x,P)=>(x[P]=Z4(A[e.events[P]]),x),{})}const v=Me.forwardRef((A,x)=>{const{children:P,...D}=A,[w]=Me.useState(()=>Ay(Q4(i),q=>p(q,D))),[I]=Me.useState(I1(g,w));Xm(()=>{for(const q of u)q in D&&Xr(I[q],D[q]);return()=>{Object.values(I).map(w0)}},[D,I,w]),Xm(()=>{p(w,D)}),Me.useImperativeHandle(x,D1(m(w)));const N=t;return pe.jsx(n.Provider,{value:w,children:t?pe.jsx(N,{...J4([...o,...a,...u],D),children:P}):P})}),y=A=>Me.useCallback(GS(br,Me.useContext(n)[A]),[A]),k=A=>{const P=Me.useContext(n)[A],D=Me.useCallback(w=>Xr(P,w),[P]);return Me.useSyncExternalStore(D,()=>Gs(P),()=>Gs(P))},_=A=>{const P=Me.useContext(n)[A],[D,w]=Me.useState(I1(Gs,P));return Xm(()=>Xr(P,I=>{I!==D&&w(D1(I))}),[P,D]),D},T=Me.version.startsWith("18")?k:_;return{Component:v,usePublisher:y,useEmitterValue:T,useEmitter:(A,x)=>{const D=Me.useContext(n)[A];Xm(()=>Xr(D,x),[x,D])}}}const qS=typeof document<"u"?Me.useLayoutEffect:Me.useEffect;var Ua=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Ua||{});const eF={0:"debug",1:"log",2:"warn",3:"error"},tF=()=>typeof globalThis>"u"?window:globalThis,bc=Kr(()=>{const i=ci(3);return{log:ci((t,o,a=1)=>{var c;const u=(c=tF().VIRTUOSO_LOG_LEVEL)!=null?c:Gs(i);a>=u&&console[eF[a]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,o)}),logLevel:i}},[],{singleton:!0});function T0(i,e,t){const o=Me.useRef(null);let a=c=>{};if(typeof ResizeObserver<"u"){const c=Me.useMemo(()=>new ResizeObserver(u=>{const n=()=>{const p=u[0].target;p.offsetParent!==null&&i(p)};t?n():requestAnimationFrame(n)}),[i]);a=u=>{u&&e?(c.observe(u),o.current=u):(o.current&&c.unobserve(o.current),o.current=null)}}return{ref:o,callbackRef:a}}function Ih(i,e,t){return T0(i,e,t).callbackRef}function iF(i,e,t,o,a,c,u,n,p){const m=Me.useCallback(g=>{const v=rF(g.children,e,n?"offsetWidth":"offsetHeight",a);let y=g.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const k=y.lastElementChild.dataset.viewportType==="window",_=u?n?u.scrollLeft:u.scrollTop:k?n?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:n?y.scrollLeft:y.scrollTop,T=u?n?u.scrollWidth:u.scrollHeight:k?n?document.documentElement.scrollWidth:document.documentElement.scrollHeight:n?y.scrollWidth:y.scrollHeight,M=u?n?u.offsetWidth:u.offsetHeight:k?n?window.innerWidth:window.innerHeight:n?y.offsetWidth:y.offsetHeight;o({scrollTop:Math.max(_,0),scrollHeight:T,viewportHeight:M}),c==null||c(n?z1("column-gap",getComputedStyle(g).columnGap,a):z1("row-gap",getComputedStyle(g).rowGap,a)),v!==null&&i(v)},[i,e,a,c,u,o]);return T0(m,t,p)}function rF(i,e,t,o){const a=i.length;if(a===0)return null;const c=[];for(let u=0;u<a;u++){const n=i.item(u);if(!n||n.dataset.index===void 0)continue;const p=parseInt(n.dataset.index),m=parseFloat(n.dataset.knownSize),g=e(n,t);if(g===0&&o("Zero-sized element, this should not happen",{child:n},Ua.ERROR),g===m)continue;const v=c[c.length-1];c.length===0||v.size!==g||v.endIndex!==p-1?c.push({startIndex:p,endIndex:p,size:g}):c[c.length-1].endIndex++}return c}function z1(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ua.WARN),e==="normal"?0:parseInt(e??"0",10)}function dc(i,e){return Math.round(i.getBoundingClientRect()[e])}function YS(i,e){return Math.abs(i-e)<1.01}function ZS(i,e,t,o=ld,a,c){const u=Me.useRef(null),n=Me.useRef(null),p=Me.useRef(null),m=Me.useCallback(y=>{const k=y.target,_=k===window||k===document,T=c?_?window.pageXOffset||document.documentElement.scrollLeft:k.scrollLeft:_?window.pageYOffset||document.documentElement.scrollTop:k.scrollTop,M=c?_?document.documentElement.scrollWidth:k.scrollWidth:_?document.documentElement.scrollHeight:k.scrollHeight,A=c?_?window.innerWidth:k.offsetWidth:_?window.innerHeight:k.offsetHeight,x=()=>{i({scrollTop:Math.max(T,0),scrollHeight:M,viewportHeight:A})};y.suppressFlushSync?x():cM.flushSync(x),n.current!==null&&(T===n.current||T<=0||T===M-A)&&(n.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[i,e]);Me.useEffect(()=>{const y=a||u.current;return o(a||u.current),m({target:y,suppressFlushSync:!0}),y.addEventListener("scroll",m,{passive:!0}),()=>{o(null),y.removeEventListener("scroll",m)}},[u,m,t,o,a]);function g(y){const k=u.current;if(!k||(c?"offsetWidth"in k&&k.offsetWidth===0:"offsetHeight"in k&&k.offsetHeight===0))return;const _=y.behavior==="smooth";let T,M,A;k===window?(M=Math.max(dc(document.documentElement,c?"width":"height"),c?document.documentElement.scrollWidth:document.documentElement.scrollHeight),T=c?window.innerWidth:window.innerHeight,A=c?document.documentElement.scrollLeft:document.documentElement.scrollTop):(M=k[c?"scrollWidth":"scrollHeight"],T=dc(k,c?"width":"height"),A=k[c?"scrollLeft":"scrollTop"]);const x=M-T;if(y.top=Math.ceil(Math.max(Math.min(x,y.top),0)),YS(T,M)||y.top===A){i({scrollTop:A,scrollHeight:M,viewportHeight:T}),_&&e(!0);return}_?(n.current=y.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,n.current=null,e(!0)},1e3)):n.current=null,c&&(y={left:y.top,behavior:y.behavior}),k.scrollTo(y)}function v(y){c&&(y={left:y.top,behavior:y.behavior}),u.current.scrollBy(y)}return{scrollerRef:u,scrollByCallback:v,scrollToCallback:g}}const ma=Kr(()=>{const i=Rr(),e=Rr(),t=ci(0),o=Rr(),a=ci(0),c=Rr(),u=Rr(),n=ci(0),p=ci(0),m=ci(0),g=ci(0),v=Rr(),y=Rr(),k=ci(!1),_=ci(!1),T=ci(!1);return Ni(Wt(i,Ai(({scrollTop:M})=>M)),e),Ni(Wt(i,Ai(({scrollHeight:M})=>M)),u),Ni(e,a),{scrollContainerState:i,scrollTop:e,viewportHeight:c,headerHeight:n,fixedHeaderHeight:p,fixedFooterHeight:m,footerHeight:g,scrollHeight:u,smoothScrollTargetReached:o,horizontalDirection:_,skipAnimationFrameInResizeObserver:T,scrollTo:v,scrollBy:y,statefulScrollTop:a,deviation:t,scrollingInProgress:k}},[],{singleton:!0}),Gp={lvl:0};function XS(i,e,t,o=Gp,a=Gp){return{k:i,v:e,lvl:t,l:o,r:a}}function cn(i){return i===Gp}function Nu(){return Gp}function Kb(i,e){if(cn(i))return Gp;const{k:t,l:o,r:a}=i;if(e===t){if(cn(o))return a;if(cn(a))return o;{const[c,u]=KS(o);return ug(as(i,{k:c,v:u,l:QS(o)}))}}else return e<t?ug(as(i,{l:Kb(o,e)})):ug(as(i,{r:Kb(a,e)}))}function Hp(i,e){if(!cn(i))return e===i.k?i.v:e<i.k?Hp(i.l,e):Hp(i.r,e)}function mo(i,e,t="k"){if(cn(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const o=mo(i.r,e,t);return o[0]===-1/0?[i.k,i.v]:o}return mo(i.l,e,t)}function Oa(i,e,t){return cn(i)?XS(e,t,1):e===i.k?as(i,{k:e,v:t}):e<i.k?N1(as(i,{l:Oa(i.l,e,t)})):N1(as(i,{r:Oa(i.r,e,t)}))}function Qb(i,e,t){if(cn(i))return[];const{k:o,v:a,l:c,r:u}=i;let n=[];return o>e&&(n=n.concat(Qb(c,e,t))),o>=e&&o<=t&&n.push({k:o,v:a}),o<=t&&(n=n.concat(Qb(u,e,t))),n}function nh(i){return cn(i)?[]:[...nh(i.l),{k:i.k,v:i.v},...nh(i.r)]}function KS(i){return cn(i.r)?[i.k,i.v]:KS(i.r)}function QS(i){return cn(i.r)?i.l:ug(as(i,{r:QS(i.r)}))}function as(i,e){return XS(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function ob(i){return cn(i)||i.lvl>i.r.lvl}function N1(i){return Jb(e2(i))}function ug(i){const{l:e,r:t,lvl:o}=i;if(t.lvl>=o-1&&e.lvl>=o-1)return i;if(o>t.lvl+1){if(ob(e))return e2(as(i,{lvl:o-1}));if(!cn(e)&&!cn(e.r))return as(e.r,{l:as(e,{r:e.r.l}),r:as(i,{l:e.r.r,lvl:o-1}),lvl:o});throw new Error("Unexpected empty nodes")}else{if(ob(i))return Jb(as(i,{lvl:o-1}));if(!cn(t)&&!cn(t.l)){const a=t.l,c=ob(a)?t.lvl-1:t.lvl;return as(a,{l:as(i,{r:a.l,lvl:o-1}),r:Jb(as(t,{l:a.r,lvl:c})),lvl:a.lvl+1})}else throw new Error("Unexpected empty nodes")}}function My(i,e,t){if(cn(i))return[];const o=mo(i,e)[0];return nF(Qb(i,o,t))}function JS(i,e){const t=i.length;if(t===0)return[];let{index:o,value:a}=e(i[0]);const c=[];for(let u=1;u<t;u++){const{index:n,value:p}=e(i[u]);c.push({start:o,end:n-1,value:a}),o=n,a=p}return c.push({start:o,end:1/0,value:a}),c}function nF(i){return JS(i,({k:e,v:t})=>({index:e,value:t}))}function Jb(i){const{r:e,lvl:t}=i;return!cn(e)&&!cn(e.r)&&e.lvl===t&&e.r.lvl===t?as(e,{l:as(i,{r:e.l}),lvl:t+1}):i}function e2(i){const{l:e}=i;return!cn(e)&&e.lvl===i.lvl?as(e,{r:as(i,{l:e.r})}):i}function Ng(i,e,t,o=0){let a=i.length-1;for(;o<=a;){const c=Math.floor((o+a)/2),u=i[c],n=t(u,e);if(n===0)return c;if(n===-1){if(a-o<2)return c-1;a=c-1}else{if(a===o)return c;o=c+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function t2(i,e,t){return i[Ng(i,e,t)]}function sF(i,e,t,o){const a=Ng(i,e,o),c=Ng(i,t,o,a);return i.slice(a,c+1)}const E0=Kr(()=>({recalcInProgress:ci(!1)}),[],{singleton:!0});function aF(i){const{size:e,startIndex:t,endIndex:o}=i;return a=>a.start===t&&(a.end===o||a.end===1/0)&&a.value===e}function O1(i,e){let t=0,o=0;for(;t<i;)t+=e[o+1]-e[o]-1,o++;return o-(t===i?0:1)}function oF(i,e){let t=cn(i)?0:1/0;for(const o of e){const{size:a,startIndex:c,endIndex:u}=o;if(t=Math.min(t,c),cn(i)){i=Oa(i,0,a);continue}const n=My(i,c-1,u+1);if(n.some(aF(o)))continue;let p=!1,m=!1;for(const{start:g,end:v,value:y}of n)p?(u>=g||a===y)&&(i=Kb(i,g)):(m=y!==a,p=!0),v>u&&u>=g&&y!==a&&(i=Oa(i,u+1,y));m&&(i=Oa(i,c,a))}return[i,t]}function lF(){return{offsetTree:[],sizeTree:Nu(),groupOffsetTree:Nu(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function C0({index:i},e){return e===i?0:e<i?-1:1}function cF({offset:i},e){return e===i?0:e<i?-1:1}function hF(i){return{index:i.index,value:i}}function uF(i,e,t,o=0){return o>0&&(e=Math.max(e,t2(i,o,C0).offset)),JS(sF(i,e,t,cF),hF)}function ev(i,e,t,o){let a=i,c=0,u=0,n=0,p=0;if(e!==0){p=Ng(a,e-1,C0),n=a[p].offset;const g=mo(t,e-1);c=g[0],u=g[1],a.length&&a[p].size===mo(t,e)[1]&&(p-=1),a=a.slice(0,p+1)}else a=[];for(const{start:m,value:g}of My(t,e,1/0)){const v=m-c,y=v*u+n+v*o;a.push({offset:y,size:g,index:m}),c=m,n=y,u=g}return{offsetTree:a,lastIndex:c,lastOffset:n,lastSize:u}}function dF(i,[e,t,o,a]){e.length>0&&o("received item sizes",e,Ua.DEBUG);const c=i.sizeTree;let u=c,n=0;if(t.length>0&&cn(c)&&e.length===2){const y=e[0].size,k=e[1].size;u=t.reduce((_,T)=>Oa(Oa(_,T,y),T+1,k),u)}else[u,n]=oF(u,e);if(u===c)return i;const{offsetTree:p,lastIndex:m,lastSize:g,lastOffset:v}=ev(i.offsetTree,n,u,a);return{sizeTree:u,offsetTree:p,lastIndex:m,lastOffset:v,lastSize:g,groupOffsetTree:t.reduce((y,k)=>Oa(y,k,Wp(k,p,a)),Nu()),groupIndices:t}}function Wp(i,e,t){if(e.length===0)return 0;const{offset:o,index:a,size:c}=t2(e,i,C0),u=i-a,n=c*u+(u-1)*t+o;return n>0?n+t:n}function pF(i){return typeof i.groupIndex<"u"}function i2(i,e,t){if(pF(i))return e.groupIndices[i.groupIndex]+1;{const o=i.index==="LAST"?t:i.index;let a=r2(o,e);return a=Math.max(0,a,Math.min(t,a)),a}}function r2(i,e){if(!Py(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function Py(i){return!cn(i.groupOffsetTree)}function fF(i){return nh(i).map(({k:e,v:t},o,a)=>{const c=a[o+1],u=c?c.k-1:1/0;return{startIndex:e,endIndex:u,size:t}})}const mF={offsetHeight:"height",offsetWidth:"width"},Wo=Kr(([{log:i},{recalcInProgress:e}])=>{const t=Rr(),o=Rr(),a=ha(o,0),c=Rr(),u=Rr(),n=ci(0),p=ci([]),m=ci(void 0),g=ci(void 0),v=ci((w,I)=>dc(w,mF[I])),y=ci(void 0),k=ci(0),_=lF(),T=ha(Wt(t,wr(p,i,k),Po(dF,_),Tn()),_),M=ha(Wt(p,Tn(),Po((w,I)=>({prev:w.current,current:I}),{prev:[],current:[]}),Ai(({prev:w})=>w)),[]);Ni(Wt(p,nr(w=>w.length>0),wr(T,k),Ai(([w,I,N])=>{const q=w.reduce((Z,X,j)=>Oa(Z,X,Wp(X,I.offsetTree,N)||j),Nu());return{...I,groupIndices:w,groupOffsetTree:q}})),T),Ni(Wt(o,wr(T),nr(([w,{lastIndex:I}])=>w<I),Ai(([w,{lastIndex:I,lastSize:N}])=>[{startIndex:w,endIndex:I,size:N}])),t),Ni(m,g);const A=ha(Wt(m,Ai(w=>w===void 0)),!0);Ni(Wt(g,nr(w=>w!==void 0&&cn(Gs(T).sizeTree)),Ai(w=>[{startIndex:0,endIndex:0,size:w}])),t);const x=Fa(Wt(t,wr(T),Po(({sizes:w},[I,N])=>({changed:N!==w,sizes:N}),{changed:!1,sizes:_}),Ai(w=>w.changed)));Xr(Wt(n,Po((w,I)=>({diff:w.prev-I,prev:I}),{diff:0,prev:0}),Ai(w=>w.diff)),w=>{const{groupIndices:I}=Gs(T);if(w>0)br(e,!0),br(c,w+O1(w,I));else if(w<0){const N=Gs(M);N.length>0&&(w-=O1(-w,N)),br(u,w)}}),Xr(Wt(n,wr(i)),([w,I])=>{w<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:n},Ua.ERROR)});const P=Fa(c);Ni(Wt(c,wr(T),Ai(([w,I])=>{const N=I.groupIndices.length>0,q=[],Z=I.lastSize;if(N){const X=Hp(I.sizeTree,0);let j=0,V=0;for(;j<w;){const R=I.groupIndices[V],G=I.groupIndices.length===V+1?1/0:I.groupIndices[V+1]-R-1;q.push({startIndex:R,endIndex:R,size:X}),q.push({startIndex:R+1,endIndex:R+1+G-1,size:Z}),V++,j+=G+1}const U=nh(I.sizeTree);return j!==w&&U.shift(),U.reduce((R,{k:G,v:$})=>{let F=R.ranges;return R.prevSize!==0&&(F=[...R.ranges,{startIndex:R.prevIndex,endIndex:G+w-1,size:R.prevSize}]),{ranges:F,prevIndex:G+w,prevSize:$}},{ranges:q,prevIndex:w,prevSize:0}).ranges}return nh(I.sizeTree).reduce((X,{k:j,v:V})=>({ranges:[...X.ranges,{startIndex:X.prevIndex,endIndex:j+w-1,size:X.prevSize}],prevIndex:j+w,prevSize:V}),{ranges:[],prevIndex:0,prevSize:Z}).ranges})),t);const D=Fa(Wt(u,wr(T,k),Ai(([w,{offsetTree:I},N])=>{const q=-w;return Wp(q,I,N)})));return Ni(Wt(u,wr(T,k),Ai(([w,I,N])=>{if(I.groupIndices.length>0){if(cn(I.sizeTree))return I;let Z=Nu();const X=Gs(M);let j=0,V=0,U=0;for(;j<-w;){U=X[V];const R=X[V+1]-U-1;V++,j+=R+1}if(Z=nh(I.sizeTree).reduce((R,{k:G,v:$})=>Oa(R,Math.max(0,G+w),$),Z),j!==-w){const R=Hp(I.sizeTree,U);Z=Oa(Z,0,R);const G=mo(I.sizeTree,-w+1)[1];Z=Oa(Z,1,G)}return{...I,sizeTree:Z,...ev(I.offsetTree,0,Z,N)}}else{const Z=nh(I.sizeTree).reduce((X,{k:j,v:V})=>Oa(X,Math.max(0,j+w),V),Nu());return{...I,sizeTree:Z,...ev(I.offsetTree,0,Z,N)}}})),T),{data:y,totalCount:o,sizeRanges:t,groupIndices:p,defaultItemSize:g,fixedItemSize:m,unshiftWith:c,shiftWith:u,shiftWithOffset:D,beforeUnshiftWith:P,firstItemIndex:n,gap:k,sizes:T,listRefresh:x,statefulTotalCount:a,trackItemSizes:A,itemSize:v}},Sn(bc,E0),{singleton:!0}),gF=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function n2(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!gF)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Pf=Kr(([{sizes:i,totalCount:e,listRefresh:t,gap:o},{scrollingInProgress:a,viewportHeight:c,scrollTo:u,smoothScrollTargetReached:n,headerHeight:p,footerHeight:m,fixedHeaderHeight:g,fixedFooterHeight:v},{log:y}])=>{const k=Rr(),_=Rr(),T=ci(0);let M=null,A=null,x=null;function P(){M&&(M(),M=null),x&&(x(),x=null),A&&(clearTimeout(A),A=null),br(a,!1)}return Ni(Wt(k,wr(i,c,e,T,p,m,y),wr(o,g,v),Ai(([[D,w,I,N,q,Z,X,j],V,U,L])=>{const R=n2(D),{align:G,behavior:$,offset:F}=R,H=N-1,W=i2(R,w,H);let ne=Wp(W,w.offsetTree,V)+Z;G==="end"?(ne+=U+mo(w.sizeTree,W)[1]-I+L,W===H&&(ne+=X)):G==="center"?ne+=(U+mo(w.sizeTree,W)[1]-I+L)/2:ne-=q,F&&(ne+=F);const ue=ie=>{P(),ie?(j("retrying to scroll to",{location:D},Ua.DEBUG),br(k,D)):(br(_,!0),j("list did not change, scroll successful",{},Ua.DEBUG))};if(P(),$==="smooth"){let ie=!1;x=Xr(t,oe=>{ie=ie||oe}),M=jo(n,()=>{ue(ie)})}else M=jo(Wt(t,yF(150)),ue);return A=setTimeout(()=>{P()},1200),br(a,!0),j("scrolling from index to",{index:W,top:ne,behavior:$},Ua.DEBUG),{top:ne,behavior:$}})),u),{scrollToIndex:k,scrollTargetReached:_,topListHeight:T}},Sn(Wo,ma,bc),{singleton:!0});function yF(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return o=>{o&&(e(!0),clearTimeout(t))}}}const qp="up",Mp="down",xF="none",bF={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},vF=0,If=Kr(([{scrollContainerState:i,scrollTop:e,viewportHeight:t,headerHeight:o,footerHeight:a,scrollBy:c}])=>{const u=ci(!1),n=ci(!0),p=Rr(),m=Rr(),g=ci(4),v=ci(vF),y=ha(Wt(L1(Wt(cr(e),qu(1),Ao(!0)),Wt(cr(e),qu(1),Ao(!1),R1(100))),Tn()),!1),k=ha(Wt(L1(Wt(c,Ao(!0)),Wt(c,Ao(!1),R1(200))),Tn()),!1);Ni(Wt(cs(cr(e),cr(v)),Ai(([x,P])=>x<=P),Tn()),n),Ni(Wt(n,nc(50)),m);const _=Fa(Wt(cs(i,cr(t),cr(o),cr(a),cr(g)),Po((x,[{scrollTop:P,scrollHeight:D},w,I,N,q])=>{const Z=P+w-D>-q,X={viewportHeight:w,scrollTop:P,scrollHeight:D};if(Z){let V,U;return P>x.state.scrollTop?(V="SCROLLED_DOWN",U=x.state.scrollTop-P):(V="SIZE_DECREASED",U=x.state.scrollTop-P||x.scrollTopDelta),{atBottom:!0,state:X,atBottomBecause:V,scrollTopDelta:U}}let j;return X.scrollHeight>x.state.scrollHeight?j="SIZE_INCREASED":w<x.state.viewportHeight?j="VIEWPORT_HEIGHT_DECREASING":P<x.state.scrollTop?j="SCROLLING_UPWARDS":j="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:j,state:X}},bF),Tn((x,P)=>x&&x.atBottom===P.atBottom))),T=ha(Wt(i,Po((x,{scrollTop:P,scrollHeight:D,viewportHeight:w})=>{if(YS(x.scrollHeight,D))return{scrollTop:P,scrollHeight:D,jump:0,changed:!1};{const I=D-(P+w)<1;return x.scrollTop!==P&&I?{scrollHeight:D,scrollTop:P,jump:x.scrollTop-P,changed:!0}:{scrollHeight:D,scrollTop:P,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),nr(x=>x.changed),Ai(x=>x.jump)),0);Ni(Wt(_,Ai(x=>x.atBottom)),u),Ni(Wt(u,nc(50)),p);const M=ci(Mp);Ni(Wt(i,Ai(({scrollTop:x})=>x),Tn(),Po((x,P)=>Gs(k)?{direction:x.direction,prevScrollTop:P}:{direction:P<x.prevScrollTop?qp:Mp,prevScrollTop:P},{direction:Mp,prevScrollTop:0}),Ai(x=>x.direction)),M),Ni(Wt(i,nc(50),Ao(xF)),M);const A=ci(0);return Ni(Wt(y,nr(x=>!x),Ao(0)),A),Ni(Wt(e,nc(100),wr(y),nr(([x,P])=>!!P),Po(([x,P],[D])=>[P,D],[0,0]),Ai(([x,P])=>P-x)),A),{isScrolling:y,isAtTop:n,isAtBottom:u,atBottomState:_,atTopStateChange:m,atBottomStateChange:p,scrollDirection:M,atBottomThreshold:g,atTopThreshold:v,scrollVelocity:A,lastJumpDueToItemResize:T}},Sn(ma)),vc=Kr(([{log:i}])=>{const e=ci(!1),t=Fa(Wt(e,nr(o=>o),Tn()));return Xr(e,o=>{o&&Gs(i)("props updated",{},Ua.DEBUG)}),{propsReady:e,didMount:t}},Sn(bc),{singleton:!0});function S0(i,e){i==0?e():requestAnimationFrame(()=>S0(i-1,e))}function k0(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const Df=Kr(([{sizes:i,listRefresh:e,defaultItemSize:t},{scrollTop:o},{scrollToIndex:a,scrollTargetReached:c},{didMount:u}])=>{const n=ci(!0),p=ci(0),m=ci(!0);return Ni(Wt(u,wr(p),nr(([g,v])=>!!v),Ao(!1)),n),Ni(Wt(u,wr(p),nr(([g,v])=>!!v),Ao(!1)),m),Xr(Wt(cs(e,u),wr(n,i,t,m),nr(([[,g],v,{sizeTree:y},k,_])=>g&&(!cn(y)||_0(k))&&!v&&!_),wr(p)),([,g])=>{jo(c,()=>{br(m,!0)}),S0(4,()=>{jo(o,()=>{br(n,!0)}),br(a,g)})}),{scrolledToInitialItem:n,initialTopMostItemIndex:p,initialItemFinalLocationReached:m}},Sn(Wo,ma,Pf,vc),{singleton:!0});function j1(i){return i?i==="smooth"?"smooth":"auto":!1}const _F=(i,e)=>typeof i=="function"?j1(i(e)):e&&j1(i),wF=Kr(([{totalCount:i,listRefresh:e},{isAtBottom:t,atBottomState:o},{scrollToIndex:a},{scrolledToInitialItem:c},{propsReady:u,didMount:n},{log:p},{scrollingInProgress:m}])=>{const g=ci(!1),v=Rr();let y=null;function k(T){br(a,{index:"LAST",align:"end",behavior:T})}Xr(Wt(cs(Wt(cr(i),qu(1)),n),wr(cr(g),t,c,m),Ai(([[T,M],A,x,P,D])=>{let w=M&&P,I="auto";return w&&(I=_F(A,x||D),w=w&&!!I),{totalCount:T,shouldFollow:w,followOutputBehavior:I}}),nr(({shouldFollow:T})=>T)),({totalCount:T,followOutputBehavior:M})=>{y&&(y(),y=null),y=jo(e,()=>{Gs(p)("following output to ",{totalCount:T},Ua.DEBUG),k(M),y=null})});function _(T){const M=jo(o,A=>{T&&!A.atBottom&&A.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(Gs(p)("scrolling to bottom due to increased size",{},Ua.DEBUG),k("auto"))});setTimeout(M,100)}return Xr(Wt(cs(cr(g),i,u),nr(([T,,M])=>T&&M),Po(({value:T},[,M])=>({refreshed:T===M,value:M}),{refreshed:!1,value:0}),nr(({refreshed:T})=>T),wr(g,i)),([,T])=>{Gs(c)&&_(T!==!1)}),Xr(v,()=>{_(Gs(g)!==!1)}),Xr(cs(cr(g),o),([T,M])=>{T&&!M.atBottom&&M.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&k("auto")}),{followOutput:g,autoscrollToBottom:v}},Sn(Wo,If,Pf,Df,vc,bc,ma));function TF(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}const s2=Kr(([{totalCount:i,groupIndices:e,sizes:t},{scrollTop:o,headerHeight:a}])=>{const c=Rr(),u=Rr(),n=Fa(Wt(c,Ai(TF)));return Ni(Wt(n,Ai(p=>p.totalCount)),i),Ni(Wt(n,Ai(p=>p.groupIndices)),e),Ni(Wt(cs(o,t,a),nr(([p,m])=>Py(m)),Ai(([p,m,g])=>mo(m.groupOffsetTree,Math.max(p-g,0),"v")[0]),Tn(),Ai(p=>[p])),u),{groupCounts:c,topItemsIndexes:u}},Sn(Wo,ma));function Yp(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}function a2(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}const Og="top",jg="bottom",B1="none";function F1(i,e,t){return typeof i=="number"?t===qp&&e===Og||t===Mp&&e===jg?i:0:t===qp?e===Og?i.main:i.reverse:e===jg?i.main:i.reverse}function U1(i,e){return typeof i=="number"?i:i[e]||0}const A0=Kr(([{scrollTop:i,viewportHeight:e,deviation:t,headerHeight:o,fixedHeaderHeight:a}])=>{const c=Rr(),u=ci(0),n=ci(0),p=ci(0),m=ha(Wt(cs(cr(i),cr(e),cr(o),cr(c,Yp),cr(p),cr(u),cr(a),cr(t),cr(n)),Ai(([g,v,y,[k,_],T,M,A,x,P])=>{const D=g-x,w=M+A,I=Math.max(y-D,0);let N=B1;const q=U1(P,Og),Z=U1(P,jg);return k-=x,k+=y+A,_+=y+A,_-=x,k>g+w-q&&(N=qp),_<g-I+v+Z&&(N=Mp),N!==B1?[Math.max(D-y-F1(T,Og,N)-q,0),D-I-A+v+F1(T,jg,N)+Z]:null}),nr(g=>g!=null),Tn(Yp)),[0,0]);return{listBoundary:c,overscan:p,topListHeight:u,increaseViewportBy:n,visibleRange:m}},Sn(ma),{singleton:!0});function EF(i,e,t){if(Py(e)){const o=r2(i,e);return[{index:mo(e.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:t&&t[0]}]}return[{index:i,size:0,offset:0,data:t&&t[0]}]}const lb={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function $1(i,e,t){if(i.length===0)return[];if(!Py(e))return i.map(m=>({...m,index:m.index+t,originalIndex:m.index}));const o=i[0].index,a=i[i.length-1].index,c=[],u=My(e.groupOffsetTree,o,a);let n,p=0;for(const m of i){(!n||n.end<m.index)&&(n=u.shift(),p=e.groupIndices.indexOf(n.start));let g;m.index===n.start?g={type:"group",index:p}:g={index:m.index-(p+1)+t,groupIndex:p},c.push({...g,size:m.size,offset:m.offset,originalIndex:m.index,data:m.data})}return c}function dg(i,e,t,o,a,c){const{lastSize:u,lastOffset:n,lastIndex:p}=a;let m=0,g=0;if(i.length>0){m=i[0].offset;const T=i[i.length-1];g=T.offset+T.size}const v=t-p,y=n+v*u+(v-1)*o,k=m,_=y-g;return{items:$1(i,a,c),topItems:$1(e,a,c),topListHeight:e.reduce((T,M)=>M.size+T,0),offsetTop:m,offsetBottom:_,top:k,bottom:g,totalCount:t,firstItemIndex:c}}function o2(i,e,t,o,a,c){let u=0;if(t.groupIndices.length>0)for(const g of t.groupIndices){if(g-u>=i)break;u++}const n=i+u,p=k0(e,n),m=Array.from({length:n}).map((g,v)=>({index:v+p,size:0,offset:0,data:c[v+p]}));return dg(m,[],n,a,t,o)}const Dh=Kr(([{sizes:i,totalCount:e,data:t,firstItemIndex:o,gap:a},c,{visibleRange:u,listBoundary:n,topListHeight:p},{scrolledToInitialItem:m,initialTopMostItemIndex:g},{topListHeight:v},y,{didMount:k},{recalcInProgress:_}])=>{const T=ci([]),M=ci(0),A=Rr();Ni(c.topItemsIndexes,T);const x=ha(Wt(cs(k,_,cr(u,Yp),cr(e),cr(i),cr(g),m,cr(T),cr(o),cr(a),t),nr(([I,N,,q,,,,,,,Z])=>{const X=Z&&Z.length!==q;return I&&!N&&!X}),Ai(([,,[I,N],q,Z,X,j,V,U,L,R])=>{const G=Z,{sizeTree:$,offsetTree:F}=G,H=Gs(M);if(q===0)return{...lb,totalCount:q};if(I===0&&N===0)return H===0?{...lb,totalCount:q}:o2(H,X,Z,U,L,R||[]);if(cn($))return H>0?null:dg(EF(k0(X,q),G,R),[],q,L,G,U);const W=[];if(V.length>0){const Se=V[0],ye=V[V.length-1];let Ce=0;for(const K of My($,Se,ye)){const Q=K.value,ae=Math.max(K.start,Se),ve=Math.min(K.end,ye);for(let J=ae;J<=ve;J++)W.push({index:J,size:Q,offset:Ce,data:R&&R[J]}),Ce+=Q}}if(!j)return dg([],W,q,L,G,U);const ne=V.length>0?V[V.length-1]+1:0,ue=uF(F,I,N,ne);if(ue.length===0)return null;const ie=q-1,oe=Ay([],Se=>{for(const ye of ue){const Ce=ye.value;let K=Ce.offset,Q=ye.start;const ae=Ce.size;if(Ce.offset<I){Q+=Math.floor((I-Ce.offset+L)/(ae+L));const J=Q-ye.start;K+=J*ae+J*L}Q<ne&&(K+=(ne-Q)*ae,Q=ne);const ve=Math.min(ye.end,ie);for(let J=Q;J<=ve&&!(K>=N);J++)Se.push({index:J,size:ae,offset:K,data:R&&R[J]}),K+=ae+L}});return dg(oe,W,q,L,G,U)}),nr(I=>I!==null),Tn()),lb);Ni(Wt(t,nr(_0),Ai(I=>I==null?void 0:I.length)),e),Ni(Wt(x,Ai(I=>I.topListHeight)),v),Ni(v,p),Ni(Wt(x,Ai(I=>[I.top,I.bottom])),n),Ni(Wt(x,Ai(I=>I.items)),A);const P=Fa(Wt(x,nr(({items:I})=>I.length>0),wr(e,t),nr(([{items:I},N])=>I[I.length-1].originalIndex===N-1),Ai(([,I,N])=>[I-1,N]),Tn(Yp),Ai(([I])=>I))),D=Fa(Wt(x,nc(200),nr(({items:I,topItems:N})=>I.length>0&&I[0].originalIndex===N.length),Ai(({items:I})=>I[0].index),Tn())),w=Fa(Wt(x,nr(({items:I})=>I.length>0),Ai(({items:I})=>{let N=0,q=I.length-1;for(;I[N].type==="group"&&N<q;)N++;for(;I[q].type==="group"&&q>N;)q--;return{startIndex:I[N].index,endIndex:I[q].index}}),Tn(a2)));return{listState:x,topItemsIndexes:T,endReached:P,startReached:D,rangeChanged:w,itemsRendered:A,initialItemCount:M,...y}},Sn(Wo,s2,A0,Df,Pf,If,vc,E0),{singleton:!0}),CF=Kr(([{sizes:i,firstItemIndex:e,data:t,gap:o},{initialTopMostItemIndex:a},{initialItemCount:c,listState:u},{didMount:n}])=>(Ni(Wt(n,wr(c),nr(([,p])=>p!==0),wr(a,i,e,o,t),Ai(([[,p],m,g,v,y,k=[]])=>o2(p,m,g,v,y,k))),u),{}),Sn(Wo,Df,Dh,vc),{singleton:!0}),l2=Kr(([{scrollVelocity:i}])=>{const e=ci(!1),t=Rr(),o=ci(!1);return Ni(Wt(i,wr(o,e,t),nr(([a,c])=>!!c),Ai(([a,c,u,n])=>{const{exit:p,enter:m}=c;if(u){if(p(a,n))return!1}else if(m(a,n))return!0;return u}),Tn()),e),Xr(Wt(cs(e,i,t),wr(o)),([[a,c,u],n])=>a&&n&&n.change&&n.change(c,u)),{isSeeking:e,scrollSeekConfiguration:o,scrollVelocity:i,scrollSeekRangeChanged:t}},Sn(If),{singleton:!0}),SF=Kr(([{topItemsIndexes:i}])=>{const e=ci(0);return Ni(Wt(e,nr(t=>t>=0),Ai(t=>Array.from({length:t}).map((o,a)=>a))),i),{topItemCount:e}},Sn(Dh)),c2=Kr(([{footerHeight:i,headerHeight:e,fixedHeaderHeight:t,fixedFooterHeight:o},{listState:a}])=>{const c=Rr(),u=ha(Wt(cs(i,o,e,t,a),Ai(([n,p,m,g,v])=>n+p+m+g+v.offsetBottom+v.bottom)),0);return Ni(cr(u),c),{totalListHeight:u,totalListHeightChanged:c}},Sn(ma,Dh),{singleton:!0});function h2(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const kF=h2(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),AF=Kr(([{scrollBy:i,scrollTop:e,deviation:t,scrollingInProgress:o},{isScrolling:a,isAtBottom:c,scrollDirection:u,lastJumpDueToItemResize:n},{listState:p},{beforeUnshiftWith:m,shiftWithOffset:g,sizes:v,gap:y},{log:k},{recalcInProgress:_}])=>{const T=Fa(Wt(p,wr(n),Po(([,A,x,P],[{items:D,totalCount:w,bottom:I,offsetBottom:N},q])=>{const Z=I+N;let X=0;return x===w&&A.length>0&&D.length>0&&(D[0].originalIndex===0&&A[0].originalIndex===0||(X=Z-P,X!==0&&(X+=q))),[X,D,w,Z]},[0,[],0,0]),nr(([A])=>A!==0),wr(e,u,o,c,k,_),nr(([,A,x,P,,,D])=>!D&&!P&&A!==0&&x===qp),Ai(([[A],,,,,x])=>(x("Upward scrolling compensation",{amount:A},Ua.DEBUG),A))));function M(A){A>0?(br(i,{top:-A,behavior:"auto"}),br(t,0)):(br(t,0),br(i,{top:-A,behavior:"auto"}))}return Xr(Wt(T,wr(t,a)),([A,x,P])=>{P&&kF()?br(t,x-A):M(-A)}),Xr(Wt(cs(ha(a,!1),t,_),nr(([A,x,P])=>!A&&!P&&x!==0),Ai(([A,x])=>x),nc(1)),M),Ni(Wt(g,Ai(A=>({top:-A}))),i),Xr(Wt(m,wr(v,y),Ai(([A,{lastSize:x,groupIndices:P,sizeTree:D},w])=>{function I(N){return N*(x+w)}if(P.length===0)return I(A);{let N=0;const q=Hp(D,0);let Z=0,X=0;for(;Z<A;){Z++,N+=q;let j=P.length===X+1?1/0:P[X+1]-P[X]-1;Z+j>A&&(N-=q,j=A-Z+1),Z+=j,N+=I(j),X++}return N}})),A=>{br(t,A),requestAnimationFrame(()=>{br(i,{top:A}),requestAnimationFrame(()=>{br(t,0),br(_,!1)})})}),{deviation:t}},Sn(ma,If,Dh,Wo,bc,E0)),MF=Kr(([{didMount:i},{scrollTo:e},{listState:t}])=>{const o=ci(0);return Xr(Wt(i,wr(o),nr(([,a])=>a!==0),Ai(([,a])=>({top:a}))),a=>{jo(Wt(t,qu(1),nr(c=>c.items.length>1)),()=>{requestAnimationFrame(()=>{br(e,a)})})}),{initialScrollTop:o}},Sn(vc,ma,Dh),{singleton:!0}),PF=Kr(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ci(!1),o=ha(Wt(cs(t,i,e),nr(([a])=>a),Ai(([,a,c])=>Math.max(0,a-c)),nc(0),Tn()),0);return{alignToBottom:t,paddingTopAddition:o}},Sn(ma,c2),{singleton:!0}),M0=Kr(([{scrollTo:i,scrollContainerState:e}])=>{const t=Rr(),o=Rr(),a=Rr(),c=ci(!1),u=ci(void 0);return Ni(Wt(cs(t,o),Ai(([{viewportHeight:n,scrollTop:p,scrollHeight:m},{offsetTop:g}])=>({scrollTop:Math.max(0,p-g),scrollHeight:m,viewportHeight:n}))),e),Ni(Wt(i,wr(o),Ai(([n,{offsetTop:p}])=>({...n,top:n.top+p}))),a),{useWindowScroll:c,customScrollParent:u,windowScrollContainerState:t,windowViewportRect:o,windowScrollTo:a}},Sn(ma)),IF=({itemTop:i,itemBottom:e,viewportTop:t,viewportBottom:o,locationParams:{behavior:a,align:c,...u}})=>i<t?{...u,behavior:a,align:c??"start"}:e>o?{...u,behavior:a,align:c??"end"}:null,DF=Kr(([{sizes:i,totalCount:e,gap:t},{scrollTop:o,viewportHeight:a,headerHeight:c,fixedHeaderHeight:u,fixedFooterHeight:n,scrollingInProgress:p},{scrollToIndex:m}])=>{const g=Rr();return Ni(Wt(g,wr(i,a,e,c,u,n,o),wr(t),Ai(([[v,y,k,_,T,M,A,x],P])=>{const{done:D,behavior:w,align:I,calculateViewLocation:N=IF,...q}=v,Z=i2(v,y,_-1),X=Wp(Z,y.offsetTree,P)+T+M,j=X+mo(y.sizeTree,Z)[1],V=x+M,U=x+k-A,L=N({itemTop:X,itemBottom:j,viewportTop:V,viewportBottom:U,locationParams:{behavior:w,align:I,...q}});return L?D&&jo(Wt(p,nr(R=>R===!1),qu(Gs(p)?1:2)),D):D&&D(),L}),nr(v=>v!==null)),m),{scrollIntoView:g}},Sn(Wo,ma,Pf,Dh,bc),{singleton:!0}),RF=Kr(([{sizes:i,sizeRanges:e},{scrollTop:t,headerHeight:o},{initialTopMostItemIndex:a},{didMount:c},{useWindowScroll:u,windowScrollContainerState:n,windowViewportRect:p}])=>{const m=Rr(),g=ci(void 0),v=ci(null),y=ci(null);return Ni(n,v),Ni(p,y),Xr(Wt(m,wr(i,t,u,v,y,o)),([k,_,T,M,A,x,P])=>{const D=fF(_.sizeTree);M&&A!==null&&x!==null&&(T=A.scrollTop-x.offsetTop),T-=P,k({ranges:D,scrollTop:T})}),Ni(Wt(g,nr(_0),Ai(LF)),a),Ni(Wt(c,wr(g),nr(([,k])=>k!==void 0),Tn(),Ai(([,k])=>k.ranges)),e),{getState:m,restoreStateFrom:g}},Sn(Wo,ma,Df,vc,M0));function LF(i){return{offset:i.scrollTop,index:0,align:"start"}}const zF=Kr(([i,e,t,o,a,c,u,n,p,m])=>({...i,...e,...t,...o,...a,...c,...u,...n,...p,...m}),Sn(A0,CF,vc,l2,c2,MF,PF,M0,DF,bc)),NF=Kr(([{totalCount:i,sizeRanges:e,fixedItemSize:t,defaultItemSize:o,trackItemSizes:a,itemSize:c,data:u,firstItemIndex:n,groupIndices:p,statefulTotalCount:m,gap:g,sizes:v},{initialTopMostItemIndex:y,scrolledToInitialItem:k,initialItemFinalLocationReached:_},T,M,A,{listState:x,topItemsIndexes:P,...D},{scrollToIndex:w},I,{topItemCount:N},{groupCounts:q},Z])=>(Ni(D.rangeChanged,Z.scrollSeekRangeChanged),Ni(Wt(Z.windowViewportRect,Ai(X=>X.visibleHeight)),T.viewportHeight),{totalCount:i,data:u,firstItemIndex:n,sizeRanges:e,initialTopMostItemIndex:y,scrolledToInitialItem:k,initialItemFinalLocationReached:_,topItemsIndexes:P,topItemCount:N,groupCounts:q,fixedItemHeight:t,defaultItemHeight:o,gap:g,...A,statefulTotalCount:m,listState:x,scrollToIndex:w,trackItemSizes:a,itemSize:c,groupIndices:p,...D,...Z,...T,sizes:v,...M}),Sn(Wo,Df,ma,RF,wF,Dh,Pf,AF,SF,s2,zF)),cb="-webkit-sticky",V1="sticky",u2=h2(()=>{if(typeof document>"u")return V1;const i=document.createElement("div");return i.style.position=cb,i.style.position===cb?cb:V1});function d2(i,e,t){const o=Me.useRef(null),a=Me.useCallback(p=>{if(p===null||!p.offsetParent)return;const m=p.getBoundingClientRect(),g=m.width;let v,y;if(e){const k=e.getBoundingClientRect(),_=m.top-k.top;v=k.height-Math.max(0,_),y=_+e.scrollTop}else v=window.innerHeight-Math.max(0,m.top),y=m.top+window.pageYOffset;o.current={offsetTop:y,visibleHeight:v,visibleWidth:g},i(o.current)},[i,e]),{callbackRef:c,ref:u}=T0(a,!0,t),n=Me.useCallback(()=>{a(u.current)},[a,u]);return Me.useEffect(()=>{if(e){e.addEventListener("scroll",n);const p=new ResizeObserver(()=>{requestAnimationFrame(n)});return p.observe(e),()=>{e.removeEventListener("scroll",n),p.unobserve(e)}}else return window.addEventListener("scroll",n),window.addEventListener("resize",n),()=>{window.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[n,e]),c}const p2=Me.createContext(void 0),f2=Me.createContext(void 0);function m2(i){return i}const OF=Kr(()=>{const i=ci(p=>`Item ${p}`),e=ci(null),t=ci(p=>`Group ${p}`),o=ci({}),a=ci(m2),c=ci("div"),u=ci(ld),n=(p,m=null)=>ha(Wt(o,Ai(g=>g[p]),Tn()),m);return{context:e,itemContent:i,groupContent:t,components:o,computeItemKey:a,HeaderFooterTag:c,scrollerRef:u,FooterComponent:n("Footer"),HeaderComponent:n("Header"),TopItemListComponent:n("TopItemList"),ListComponent:n("List","div"),ItemComponent:n("Item","div"),GroupComponent:n("Group","div"),ScrollerComponent:n("Scroller","div"),EmptyPlaceholder:n("EmptyPlaceholder"),ScrollSeekPlaceholder:n("ScrollSeekPlaceholder")}}),jF=Kr(([i,e])=>({...i,...e}),Sn(NF,OF)),BF=({height:i})=>pe.jsx("div",{style:{height:i}}),FF={position:u2(),zIndex:1,overflowAnchor:"none"},g2={overflowAnchor:"none"},UF={...g2,display:"inline-block",height:"100%"},G1=Me.memo(function({showTopList:e=!1}){const t=ur("listState"),o=Xa("sizeRanges"),a=ur("useWindowScroll"),c=ur("customScrollParent"),u=Xa("windowScrollContainerState"),n=Xa("scrollContainerState"),p=c||a?u:n,m=ur("itemContent"),g=ur("context"),v=ur("groupContent"),y=ur("trackItemSizes"),k=ur("itemSize"),_=ur("log"),T=Xa("gap"),M=ur("horizontalDirection"),{callbackRef:A}=iF(o,k,y,e?ld:p,_,T,c,M,ur("skipAnimationFrameInResizeObserver")),[x,P]=Me.useState(0);P0("deviation",R=>{x!==R&&P(R)});const D=ur("EmptyPlaceholder"),w=ur("ScrollSeekPlaceholder")||BF,I=ur("ListComponent"),N=ur("ItemComponent"),q=ur("GroupComponent"),Z=ur("computeItemKey"),X=ur("isSeeking"),j=ur("groupIndices").length>0,V=ur("alignToBottom"),U=ur("initialItemFinalLocationReached"),L=e?{}:{boxSizing:"border-box",...M?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:x!==0?x:V?"auto":0}:{marginTop:x!==0?x:V?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...U?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&D?pe.jsx(D,{...ca(D,g)}):pe.jsx(I,{...ca(I,g),ref:A,style:L,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(R=>{const G=R.originalIndex,$=Z(G+t.firstItemIndex,R.data,g);return X?$e.createElement(w,{...ca(w,g),key:$,index:R.index,height:R.size,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?$e.createElement(q,{...ca(q,g),key:$,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,style:FF},v(R.index,g)):$e.createElement(N,{...ca(N,g),...HF(N,R.data),key:$,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,"data-item-group-index":R.groupIndex,style:M?UF:g2},j?m(R.index,R.groupIndex,R.data,g):m(R.index,R.data,g))})})}),$F={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},VF={outline:"none",overflowX:"auto",position:"relative"},Iy=i=>({width:"100%",height:"100%",position:"absolute",top:0,...i?{display:"flex",flexDirection:"column"}:{}}),GF={width:"100%",position:u2(),top:0,zIndex:1};function ca(i,e){if(typeof i!="string")return{context:e}}function HF(i,e){return{item:typeof i=="string"?void 0:e}}const WF=Me.memo(function(){const e=ur("HeaderComponent"),t=Xa("headerHeight"),o=ur("HeaderFooterTag"),a=Ih(Me.useMemo(()=>u=>t(dc(u,"height")),[t]),!0,ur("skipAnimationFrameInResizeObserver")),c=ur("context");return e?pe.jsx(o,{ref:a,children:pe.jsx(e,{...ca(e,c)})}):null}),qF=Me.memo(function(){const e=ur("FooterComponent"),t=Xa("footerHeight"),o=ur("HeaderFooterTag"),a=Ih(Me.useMemo(()=>u=>t(dc(u,"height")),[t]),!0,ur("skipAnimationFrameInResizeObserver")),c=ur("context");return e?pe.jsx(o,{ref:a,children:pe.jsx(e,{...ca(e,c)})}):null});function y2({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Me.memo(function({style:c,children:u,...n}){const p=i("scrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("scrollerRef"),y=t("context"),k=t("horizontalDirection")||!1,{scrollerRef:_,scrollByCallback:T,scrollToCallback:M}=ZS(p,g,m,v,void 0,k);e("scrollTo",M),e("scrollBy",T);const A=k?VF:$F;return pe.jsx(m,{ref:_,style:{...A,...c},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...n,...ca(m,y),children:u})})}function x2({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Me.memo(function({style:c,children:u,...n}){const p=i("windowScrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("totalListHeight"),y=t("deviation"),k=t("customScrollParent"),_=t("context"),{scrollerRef:T,scrollByCallback:M,scrollToCallback:A}=ZS(p,g,m,ld,k);return qS(()=>(T.current=k||window,()=>{T.current=null}),[T,k]),e("windowScrollTo",A),e("scrollBy",M),pe.jsx(m,{style:{position:"relative",...c,...v!==0?{height:v+y}:{}},"data-virtuoso-scroller":!0,...n,...ca(m,_),children:u})})}const YF=({children:i})=>{const e=Me.useContext(p2),t=Xa("viewportHeight"),o=Xa("fixedItemHeight"),a=ur("alignToBottom"),c=ur("horizontalDirection"),u=Me.useMemo(()=>VS(t,p=>dc(p,c?"width":"height")),[t,c]),n=Ih(u,!0,ur("skipAnimationFrameInResizeObserver"));return Me.useEffect(()=>{e&&(t(e.viewportHeight),o(e.itemHeight))},[e,t,o]),pe.jsx("div",{style:Iy(a),ref:n,"data-viewport-type":"element",children:i})},ZF=({children:i})=>{const e=Me.useContext(p2),t=Xa("windowViewportRect"),o=Xa("fixedItemHeight"),a=ur("customScrollParent"),c=d2(t,a,ur("skipAnimationFrameInResizeObserver")),u=ur("alignToBottom");return Me.useEffect(()=>{e&&(o(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,o]),pe.jsx("div",{ref:c,style:Iy(u),"data-viewport-type":"window",children:i})},XF=({children:i})=>{const e=ur("TopItemListComponent")||"div",t=ur("headerHeight"),o={...GF,marginTop:`${t}px`},a=ur("context");return pe.jsx(e,{style:o,...ca(e,a),children:i})},KF=Me.memo(function(e){const t=ur("useWindowScroll"),o=ur("topItemsIndexes").length>0,a=ur("customScrollParent"),c=a||t?e6:JF,u=a||t?ZF:YF;return pe.jsxs(c,{...e,children:[o&&pe.jsx(XF,{children:pe.jsx(G1,{showTopList:!0})}),pe.jsxs(u,{children:[pe.jsx(WF,{}),pe.jsx(G1,{}),pe.jsx(qF,{})]})]})}),{Component:QF,usePublisher:Xa,useEmitterValue:ur,useEmitter:P0}=WS(jF,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},KF),JF=y2({usePublisher:Xa,useEmitterValue:ur,useEmitter:P0}),e6=x2({usePublisher:Xa,useEmitterValue:ur,useEmitter:P0}),t6=QF,H1={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},i6={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:W1,ceil:q1,floor:Bg,min:hb,max:Pp}=Math;function r6(i){return{...i6,items:i}}function Y1(i,e,t){return Array.from({length:e-i+1}).map((o,a)=>{const c=t===null?null:t[a+i];return{index:a+i,data:c}})}function n6(i,e){return i&&i.column===e.column&&i.row===e.row}function Km(i,e){return i&&i.width===e.width&&i.height===e.height}const s6=Kr(([{overscan:i,visibleRange:e,listBoundary:t,increaseViewportBy:o},{scrollTop:a,viewportHeight:c,scrollBy:u,scrollTo:n,smoothScrollTargetReached:p,scrollContainerState:m,footerHeight:g,headerHeight:v},y,k,{propsReady:_,didMount:T},{windowViewportRect:M,useWindowScroll:A,customScrollParent:x,windowScrollContainerState:P,windowScrollTo:D},w])=>{const I=ci(0),N=ci(0),q=ci(H1),Z=ci({height:0,width:0}),X=ci({height:0,width:0}),j=Rr(),V=Rr(),U=ci(0),L=ci(null),R=ci({row:0,column:0}),G=Rr(),$=Rr(),F=ci(!1),H=ci(0),W=ci(!0),ne=ci(!1),ue=ci(!1);Xr(Wt(T,wr(H),nr(([K,Q])=>!!Q)),()=>{br(W,!1)}),Xr(Wt(cs(T,W,X,Z,H,ne),nr(([K,Q,ae,ve,,J])=>K&&!Q&&ae.height!==0&&ve.height!==0&&!J)),([,,,,K])=>{br(ne,!0),S0(1,()=>{br(j,K)}),jo(Wt(a),()=>{br(t,[0,0]),br(W,!0)})}),Ni(Wt($,nr(K=>K!=null&&K.scrollTop>0),Ao(0)),N),Xr(Wt(T,wr($),nr(([,K])=>K!=null)),([,K])=>{K&&(br(Z,K.viewport),br(X,K==null?void 0:K.item),br(R,K.gap),K.scrollTop>0&&(br(F,!0),jo(Wt(a,qu(1)),Q=>{br(F,!1)}),br(n,{top:K.scrollTop})))}),Ni(Wt(Z,Ai(({height:K})=>K)),c),Ni(Wt(cs(cr(Z,Km),cr(X,Km),cr(R,(K,Q)=>K&&K.column===Q.column&&K.row===Q.row),cr(a)),Ai(([K,Q,ae,ve])=>({viewport:K,item:Q,gap:ae,scrollTop:ve}))),G),Ni(Wt(cs(cr(I),e,cr(R,n6),cr(X,Km),cr(Z,Km),cr(L),cr(N),cr(F),cr(W),cr(H)),nr(([,,,,,,,K])=>!K),Ai(([K,[Q,ae],ve,J,re,ce,ge,,_e,ze])=>{const{row:Te,column:Ie}=ve,{height:Be,width:Ge}=J,{width:ke}=re;if(ge===0&&(K===0||ke===0))return H1;if(Ge===0){const dt=k0(ze,K),gt=dt+Math.max(ge-1,0);return r6(Y1(dt,gt,ce))}const me=b2(ke,Ge,Ie);let fe,Ae;_e?Q===0&&ae===0&&ge>0?(fe=0,Ae=ge-1):(fe=me*Bg((Q+Te)/(Be+Te)),Ae=me*q1((ae+Te)/(Be+Te))-1,Ae=hb(K-1,Pp(Ae,me-1)),fe=hb(Ae,Pp(0,fe))):(fe=0,Ae=-1);const De=Y1(fe,Ae,ce),{top:Pe,bottom:je}=Z1(re,ve,J,De),Xe=q1(K/me),rt=Xe*Be+(Xe-1)*Te-je;return{items:De,offsetTop:Pe,offsetBottom:rt,top:Pe,bottom:je,itemHeight:Be,itemWidth:Ge}})),q),Ni(Wt(L,nr(K=>K!==null),Ai(K=>K.length)),I),Ni(Wt(cs(Z,X,q,R),nr(([K,Q,{items:ae}])=>ae.length>0&&Q.height!==0&&K.height!==0),Ai(([K,Q,{items:ae},ve])=>{const{top:J,bottom:re}=Z1(K,ve,Q,ae);return[J,re]}),Tn(Yp)),t);const ie=ci(!1);Ni(Wt(a,wr(ie),Ai(([K,Q])=>Q||K!==0)),ie);const oe=Fa(Wt(cs(q,I),nr(([{items:K}])=>K.length>0),wr(ie),nr(([[K,Q],ae])=>{const J=K.items[K.items.length-1].index===Q-1;return(ae||K.bottom>0&&K.itemHeight>0&&K.offsetBottom===0&&K.items.length===Q)&&J}),Ai(([[,K]])=>K-1),Tn())),Se=Fa(Wt(cr(q),nr(({items:K})=>K.length>0&&K[0].index===0),Ao(0),Tn())),ye=Fa(Wt(cr(q),wr(F),nr(([{items:K},Q])=>K.length>0&&!Q),Ai(([{items:K}])=>({startIndex:K[0].index,endIndex:K[K.length-1].index})),Tn(a2),nc(0)));Ni(ye,k.scrollSeekRangeChanged),Ni(Wt(j,wr(Z,X,I,R),Ai(([K,Q,ae,ve,J])=>{const re=n2(K),{align:ce,behavior:ge,offset:_e}=re;let ze=re.index;ze==="LAST"&&(ze=ve-1),ze=Pp(0,ze,hb(ve-1,ze));let Te=tv(Q,J,ae,ze);return ce==="end"?Te=W1(Te-Q.height+ae.height):ce==="center"&&(Te=W1(Te-Q.height/2+ae.height/2)),_e&&(Te+=_e),{top:Te,behavior:ge}})),n);const Ce=ha(Wt(q,Ai(K=>K.offsetBottom+K.bottom)),0);return Ni(Wt(M,Ai(K=>({width:K.visibleWidth,height:K.visibleHeight}))),Z),{data:L,totalCount:I,viewportDimensions:Z,itemDimensions:X,scrollTop:a,scrollHeight:V,overscan:i,increaseViewportBy:o,scrollBy:u,scrollTo:n,scrollToIndex:j,smoothScrollTargetReached:p,windowViewportRect:M,windowScrollTo:D,useWindowScroll:A,customScrollParent:x,windowScrollContainerState:P,deviation:U,scrollContainerState:m,footerHeight:g,headerHeight:v,initialItemCount:N,gap:R,restoreStateFrom:$,...k,initialTopMostItemIndex:H,horizontalDirection:ue,gridState:q,totalListHeight:Ce,...y,startReached:Se,endReached:oe,rangeChanged:ye,stateChanged:G,propsReady:_,stateRestoreInProgress:F,...w}},Sn(A0,ma,If,l2,vc,M0,bc));function Z1(i,e,t,o){const{height:a}=t;if(a===void 0||o.length===0)return{top:0,bottom:0};const c=tv(i,e,t,o[0].index),u=tv(i,e,t,o[o.length-1].index)+a;return{top:c,bottom:u}}function tv(i,e,t,o){const a=b2(i.width,t.width,e.column),c=Bg(o/a),u=c*t.height+Pp(0,c-1)*e.row;return u>0?u+e.row:u}function b2(i,e,t){return Pp(1,Bg((i+t)/(Bg(e)+t)))}const a6=Kr(()=>{const i=ci(v=>`Item ${v}`),e=ci({}),t=ci(null),o=ci("virtuoso-grid-item"),a=ci("virtuoso-grid-list"),c=ci(m2),u=ci("div"),n=ci(ld),p=(v,y=null)=>ha(Wt(e,Ai(k=>k[v]),Tn()),y),m=ci(!1),g=ci(!1);return Ni(cr(g),m),{readyStateChanged:m,reportReadyState:g,context:t,itemContent:i,components:e,computeItemKey:c,itemClassName:o,listClassName:a,headerFooterTag:u,scrollerRef:n,FooterComponent:p("Footer"),HeaderComponent:p("Header"),ListComponent:p("List","div"),ItemComponent:p("Item","div"),ScrollerComponent:p("Scroller","div"),ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),o6=Kr(([i,e])=>({...i,...e}),Sn(s6,a6)),l6=Me.memo(function(){const e=An("gridState"),t=An("listClassName"),o=An("itemClassName"),a=An("itemContent"),c=An("computeItemKey"),u=An("isSeeking"),n=Ka("scrollHeight"),p=An("ItemComponent"),m=An("ListComponent"),g=An("ScrollSeekPlaceholder"),v=An("context"),y=Ka("itemDimensions"),k=Ka("gap"),_=An("log"),T=An("stateRestoreInProgress"),M=Ka("reportReadyState"),A=Ih(Me.useMemo(()=>x=>{const P=x.parentElement.parentElement.scrollHeight;n(P);const D=x.firstChild;if(D){const{width:w,height:I}=D.getBoundingClientRect();y({width:w,height:I})}k({row:X1("row-gap",getComputedStyle(x).rowGap,_),column:X1("column-gap",getComputedStyle(x).columnGap,_)})},[n,y,k,_]),!0,!1);return qS(()=>{e.itemHeight>0&&e.itemWidth>0&&M(!0)},[e]),T?null:pe.jsx(m,{ref:A,className:t,...ca(m,v),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(x=>{const P=c(x.index,x.data,v);return u?pe.jsx(g,{...ca(g,v),index:x.index,height:e.itemHeight,width:e.itemWidth},P):$e.createElement(p,{...ca(p,v),className:o,"data-index":x.index,key:P},a(x.index,x.data,v))})})}),c6=Me.memo(function(){const e=An("HeaderComponent"),t=Ka("headerHeight"),o=An("headerFooterTag"),a=Ih(Me.useMemo(()=>u=>t(dc(u,"height")),[t]),!0,!1),c=An("context");return e?pe.jsx(o,{ref:a,children:pe.jsx(e,{...ca(e,c)})}):null}),h6=Me.memo(function(){const e=An("FooterComponent"),t=Ka("footerHeight"),o=An("headerFooterTag"),a=Ih(Me.useMemo(()=>u=>t(dc(u,"height")),[t]),!0,!1),c=An("context");return e?pe.jsx(o,{ref:a,children:pe.jsx(e,{...ca(e,c)})}):null}),u6=({children:i})=>{const e=Me.useContext(f2),t=Ka("itemDimensions"),o=Ka("viewportDimensions"),a=Ih(Me.useMemo(()=>c=>{o(c.getBoundingClientRect())},[o]),!0,!1);return Me.useEffect(()=>{e&&(o({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,o,t]),pe.jsx("div",{style:Iy(!1),ref:a,children:i})},d6=({children:i})=>{const e=Me.useContext(f2),t=Ka("windowViewportRect"),o=Ka("itemDimensions"),a=An("customScrollParent"),c=d2(t,a,!1);return Me.useEffect(()=>{e&&(o({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,o]),pe.jsx("div",{ref:c,style:Iy(!1),children:i})},p6=Me.memo(function({...e}){const t=An("useWindowScroll"),o=An("customScrollParent"),a=o||t?m6:f6,c=o||t?d6:u6;return pe.jsx(a,{...e,children:pe.jsxs(c,{children:[pe.jsx(c6,{}),pe.jsx(l6,{}),pe.jsx(h6,{})]})})}),{Component:D7,usePublisher:Ka,useEmitterValue:An,useEmitter:v2}=WS(o6,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},p6),f6=y2({usePublisher:Ka,useEmitterValue:An,useEmitter:v2}),m6=x2({usePublisher:Ka,useEmitterValue:An,useEmitter:v2});function X1(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ua.WARN),e==="normal"?0:parseInt(e??"0",10)}const g6=i=>{let{evaluationPerOrgUnits:e,useVirtuoso:t=!0,useVirtuosoWindowScroll:o=!1}=i;function a(){return c=>{const u=e[c];return u&&Me.createElement("div",{key:u.orgUnitId},Me.createElement(P1,{orgUnitsData:u}))}}return t?Me.createElement("div",null,Me.createElement(t6,{style:{height:"60vh"},useWindowScroll:o,totalCount:e.length,itemContent:a()})):Me.createElement(Me.Fragment,null,e.map((c,u)=>Me.createElement(P1,{orgUnitsData:c})))},y6=i=>{let{splitPeriods:e,setSelectedSplitPeriod:t,selectedSplitPeriod:o}=i;return e.includes(o)?Me.createElement("div",null,Me.createElement("div",null,Me.createElement(os,{selected:o,onChange:a=>t(a.selected)},e.map((a,c)=>Me.createElement(uo,{key:c,label:US(a),value:a}))))):Me.createElement(Me.Fragment,null)},x6="_orgUnitsSelction_1ir4t_1",b6="_wrapper_1ir4t_7",v6="_filterCheckbox_1ir4t_14",_6="_filter_1ir4t_14",w6="_plots_1ir4t_25",T6="_searchInput_1ir4t_29",E6="_filterTitle_1ir4t_34",Qc={orgUnitsSelction:x6,wrapper:b6,filterCheckbox:v6,filter:_6,plots:w6,searchInput:T6,filterTitle:E6},C6=i=>{var e;let{evaluationName:t,modelName:o,evaluations:a,splitPeriods:c}=i;const[u,n]=$e.useState([]),[p,m]=$e.useState(),[g,v]=$e.useState([]),[y,k]=$e.useState([]),[_,T]=$e.useState(c[0]);$e.useEffect(()=>{const A=a[0];v(A.evaluation.map(x=>x.orgUnitId)),k(A.evaluation.map(x=>({name:x.orgUnitName,id:x.orgUnitId}))),T(A.splitPoint),n(A.evaluation)},[a,c]),$e.useEffect(()=>{const A=a.find(P=>P.splitPoint===_),x=g==null?void 0:g.map(P=>A.evaluation.find(D=>D.orgUnitId===P&&D.orgUnitName.toLocaleLowerCase().includes(p?p.toLocaleLowerCase():"")));n(x)},[_,g,p]);const M=A=>{const x=A.checked?[...g,A.value]:g.filter(P=>P!==A.value);v(x)};return Me.createElement(Me.Fragment,null,Me.createElement("div",{className:Qc.wrapper},Me.createElement("div",{className:Qc.filter},Me.createElement("div",null,Me.createElement("h2",null,"Evaluation: ",t)),Me.createElement("div",null,Me.createElement("div",{className:Qc.filterTitle},"Split period:"),Me.createElement(y6,{splitPeriods:c,setSelectedSplitPeriod:T,selectedSplitPeriod:_})),Me.createElement("div",null,Me.createElement("div",{className:Qc.filterTitle},"Organization units:"),Me.createElement("div",{className:Qc.filterCheckbox},y.map((A,x)=>Me.createElement(ry,{checked:g.filter(P=>P==A.id).length>0,onChange:M,label:A.name,key:A.id,value:A.id}))))),Me.createElement("div",{className:Qc.plots},Me.createElement("div",null,Me.createElement("h3",null,"Model: ",o)),Me.createElement("div",{className:Qc.searchInput},Me.createElement(hf,{label:"Search for organization units:",placeholder:((e=y[0])===null||e===void 0?void 0:e.name)+"..",onChange:A=>m(A.value),value:p})),Me.createElement(g6,{evaluationPerOrgUnits:u,useVirtuoso:!0}))))},S6="_table_11vie_1",k6="_quantile_low_11vie_22",A6="_quantile_high_11vie_26",M6={table:S6,quantile_low:k6,quantile_high:A6},K1=i=>[...new Set(i.map(e=>e.period))],P6=i=>[...new Set(i.map(e=>e.orgUnit))],I6=i=>[...new Set(i.map(e=>e.dataElement))],D6=(i,e)=>{var t;return(t=e.find(o=>o.orgUnit===i))===null||t===void 0?void 0:t.displayName},R6=i=>{let{data:e}=i;const t=e.dataValues;return Me.createElement(Me.Fragment,null,P6(t).map(o=>Me.createElement("div",{key:o},Me.createElement("h3",null,it.t("Prediction for {{orgUnitName}}",{orgUnitName:D6(o,t)})),Me.createElement("table",{className:M6.table},Me.createElement("thead",null,Me.createElement("tr",null,Me.createElement("th",null,"Quantiles"),K1(t).map(a=>Me.createElement("th",{key:a},y0({periodId:a,calendar:"gregory"}).displayName)))),Me.createElement("tbody",null,I6(t).map(a=>Me.createElement("tr",{key:a},Me.createElement("td",null,a.replaceAll("_"," ")),K1(t).map(c=>Me.createElement("td",{key:c},t.filter(u=>u.dataElement===a&&u.orgUnit===o&&u.period===c)[0].value)))))))))};var L6={exports:{}};(function(i,e){(function(t,o){i.exports=o()})(Na,function(){var t,o,a;function c(n,p){if(!t)t=p;else if(!o)o=p;else{var m="var sharedChunk = {}; ("+t+")(sharedChunk); ("+o+")(sharedChunk);",g={};t(g),a=p(g),typeof window<"u"&&(a.workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"})))}}c(["exports"],function(n){var p=m;function m(l,r,h,f){this.cx=3*l,this.bx=3*(h-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(f-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=r,this.p2x=h,this.p2y=f}function g(l,r,h,f){const C=new p(l,r,h,f);return function(z){return C.solve(z)}}m.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,r){if(r===void 0&&(r=1e-6),l<0)return 0;if(l>1)return 1;for(var h=l,f=0;f<8;f++){var C=this.sampleCurveX(h)-l;if(Math.abs(C)<r)return h;var z=this.sampleCurveDerivativeX(h);if(Math.abs(z)<1e-6)break;h-=C/z}var B=0,te=1;for(h=l,f=0;f<20&&(C=this.sampleCurveX(h),!(Math.abs(C-l)<r));f++)l>C?B=h:te=h,h=.5*(te-B)+B;return h},solve:function(l,r){return this.sampleCurveY(this.solveCurveX(l,r))}};const v=g(.25,.1,.25,1);function y(l,r,h){return Math.min(h,Math.max(r,l))}function k(l,r,h){const f=h-r,C=((l-r)%f+f)%f+r;return C===r?h:C}function _(l,...r){for(const h of r)for(const f in h)l[f]=h[f];return l}let T=1;function M(l,r){l.forEach(h=>{r[h]&&(r[h]=r[h].bind(r))})}function A(l,r,h){const f={};for(const C in l)f[C]=r.call(h||this,l[C],C,l);return f}function x(l,r,h){const f={};for(const C in l)r.call(h||this,l[C],C,l)&&(f[C]=l[C]);return f}function P(l){return Array.isArray(l)?l.map(P):typeof l=="object"&&l?A(l,P):l}const D={};function w(l){D[l]||(typeof console<"u"&&console.warn(l),D[l]=!0)}function I(l,r,h){return(h.y-l.y)*(r.x-l.x)>(r.y-l.y)*(h.x-l.x)}function N(l){let r=0;for(let h,f,C=0,z=l.length,B=z-1;C<z;B=C++)h=l[C],f=l[B],r+=(f.x-h.x)*(h.y+f.y);return r}function q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,f,C,z)=>{const B=C||z;return r[f]=!B||B.toLowerCase(),""}),r["max-age"]){const h=parseInt(r["max-age"],10);isNaN(h)?delete r["max-age"]:r["max-age"]=h}return r}let X,j,V=null;function U(l){if(V==null){const r=l.navigator?l.navigator.userAgent:null;V=!!l.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return V}function L(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const r=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(l,r=0){const h=window.document.createElement("canvas"),f=h.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return h.width=l.width,h.height=l.height,f.drawImage(l,0,0,l.width,l.height),f.getImageData(-r,-r,l.width+2*r,l.height+2*r)},resolveURL:l=>(X||(X=document.createElement("a")),X.href=l,X.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(j==null&&(j=matchMedia("(prefers-reduced-motion: reduce)")),j.matches)}};var G=$;function $(l,r){this.x=l,this.y=r}$.prototype={clone:function(){return new $(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,r){return this.clone()._rotateAround(l,r)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var r=l.x-this.x,h=l.y-this.y;return r*r+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,r){return Math.atan2(this.x*r-this.y*l,this.x*l+this.y*r)},_matMult:function(l){var r=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=r,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var r=Math.cos(l),h=Math.sin(l),f=h*this.x+r*this.y;return this.x=r*this.x-h*this.y,this.y=f,this},_rotateAround:function(l,r){var h=Math.cos(l),f=Math.sin(l),C=r.y+f*(this.x-r.x)+h*(this.y-r.y);return this.x=r.x+h*(this.x-r.x)-f*(this.y-r.y),this.y=C,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$.convert=function(l){return l instanceof $?l:Array.isArray(l)?new $(l[0],l[1]):l};const F={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},H="mapbox-tiles";let W,ne=500,ue=50;function ie(){typeof caches>"u"||W||(W=caches.open(H))}let oe=1/0;const Se={supported:!1,testSupport:function(l){!K&&Ce&&(Q?ae(l):ye=l)}};let ye,Ce,K=!1,Q=!1;function ae(l){const r=l.createTexture();l.bindTexture(l.TEXTURE_2D,r);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,Ce),l.isContextLost())return;Se.supported=!0}catch{}l.deleteTexture(r),K=!0}typeof document<"u"&&(Ce=document.createElement("img"),Ce.onload=function(){ye&&ae(ye),ye=null,Q=!0},Ce.onerror=function(){K=!0,ye=null},Ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ve={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ve);class J extends Error{constructor(r,h,f,C){super(`AJAXError: ${h} (${r}): ${f}`),this.status=r,this.statusText=h,this.url=f,this.body=C}}const re=q()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ce(l,r){const h=new AbortController,f=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:re(),signal:h.signal});let C=!1,z=!1;return l.type==="json"&&f.headers.set("Accept","application/json"),((B,te,se)=>{z||fetch(f).then(be=>be.ok?((Re,Oe,Ve)=>{(l.type==="arrayBuffer"?Re.arrayBuffer():l.type==="json"?Re.json():Re.text()).then(Ye=>{z||(C=!0,r(null,Ye,Re.headers.get("Cache-Control"),Re.headers.get("Expires")))}).catch(Ye=>{z||r(new Error(Ye.message))})})(be):be.blob().then(Re=>r(new J(be.status,be.statusText,l.url,Re)))).catch(be=>{be.code!==20&&r(new Error(be.message))})})(),{cancel:()=>{z=!0,C||h.abort()}}}const ge=function(l,r){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r);if(!q()){const f=l.url.substring(0,l.url.indexOf("://"));return(F.REGISTERED_PROTOCOLS[f]||ce)(l,r)}}if(!(/^file:/.test(h=l.url)||/^file:/.test(re())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ce(l,r);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r,void 0,!0)}var h;return function(f,C){const z=new XMLHttpRequest;z.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const B in f.headers)z.setRequestHeader(B,f.headers[B]);return f.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=f.credentials==="include",z.onerror=()=>{C(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let B=z.response;if(f.type==="json")try{B=JSON.parse(z.response)}catch(te){return C(te)}C(null,B,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const B=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});C(new J(z.status,z.statusText,f.url,B))}},z.send(f.body),{cancel:()=>z.abort()}}(l,r)},_e=function(l,r){return ge(_(l,{type:"arrayBuffer"}),r)};function ze(l){const r=window.document.createElement("a");return r.href=l,r.protocol===window.document.location.protocol&&r.host===window.document.location.host}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Be;Ie=[],Be=0;const Ge=function(l,r){if(Se.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),Be>=F.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:l,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(z),z}Be++;let h=!1;const f=()=>{if(!h)for(h=!0,Be--;Ie.length&&Be<F.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ie.shift(),{requestParameters:B,callback:te,cancelled:se}=z;se||(z.cancel=Ge(B,te).cancel)}},C=_e(l,(z,B,te,se)=>{f(),z?r(z):B&&function(be,Re){typeof createImageBitmap=="function"?function(Oe,Ve){const Ye=new Blob([new Uint8Array(Oe)],{type:"image/png"});createImageBitmap(Ye).then(Ze=>{Ve(null,Ze)}).catch(Ze=>{Ve(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(be,Re):function(Oe,Ve){const Ye=new Image;Ye.onload=()=>{Ve(null,Ye),URL.revokeObjectURL(Ye.src),Ye.onload=null,window.requestAnimationFrame(()=>{Ye.src=Te})},Ye.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ze=new Blob([new Uint8Array(Oe)],{type:"image/png"});Ye.src=Oe.byteLength?URL.createObjectURL(Ze):Te}(be,Re)}(B,(be,Re)=>{be!=null?r(be):Re!=null&&r(null,Re,{cacheControl:te,expires:se})})});return{cancel:()=>{C.cancel(),f()}}};function ke(l,r,h){h[l]&&h[l].indexOf(r)!==-1||(h[l]=h[l]||[],h[l].push(r))}function me(l,r,h){if(h&&h[l]){const f=h[l].indexOf(r);f!==-1&&h[l].splice(f,1)}}class fe{constructor(r,h={}){_(this,h),this.type=r}}class Ae extends fe{constructor(r,h={}){super("error",_({error:r},h))}}class De{on(r,h){return this._listeners=this._listeners||{},ke(r,h,this._listeners),this}off(r,h){return me(r,h,this._listeners),me(r,h,this._oneTimeListeners),this}once(r,h){return this._oneTimeListeners=this._oneTimeListeners||{},ke(r,h,this._oneTimeListeners),this}fire(r,h){typeof r=="string"&&(r=new fe(r,h||{}));const f=r.type;if(this.listens(f)){r.target=this;const C=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const te of C)te.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const te of z)me(f,te,this._oneTimeListeners),te.call(this,r);const B=this._eventedParent;B&&(_(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(r))}else r instanceof Ae&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,h){return this._eventedParent=r,this._eventedParentData=h,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class je{constructor(r,h,f,C){this.message=(r?`${r}: `:"")+f,C&&(this.identifier=C),h!=null&&h.__line__&&(this.line=h.__line__)}}function Xe(l){const r=l.value;return r?[new je(l.key,r,"constants have been deprecated as of v8")]:[]}function et(l,...r){for(const h of r)for(const f in h)l[f]=h[f];return l}function rt(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function dt(l){if(Array.isArray(l))return l.map(dt);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const h in l)r[h]=dt(l[h]);return r}return rt(l)}class gt extends Error{constructor(r,h){super(h),this.message=h,this.key=r}}class wt{constructor(r,h=[]){this.parent=r,this.bindings={};for(const[f,C]of h)this.bindings[f]=C}concat(r){return new wt(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Rt={kind:"null"},ft={kind:"number"},Ct={kind:"string"},Tt={kind:"boolean"},si={kind:"color"},ui={kind:"object"},Ht={kind:"value"},ar={kind:"collator"},Zi={kind:"formatted"},mr={kind:"padding"},zr={kind:"resolvedImage"};function ir(l,r){return{kind:"array",itemType:l,N:r}}function ut(l){if(l.kind==="array"){const r=ut(l.itemType);return typeof l.N=="number"?`array<${r}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${r}>`}return l.kind}const bt=[Rt,ft,Ct,Tt,si,Zi,ui,ir(Ht),mr,zr];function Pt(l,r){if(r.kind==="error")return null;if(l.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Pt(l.itemType,r.itemType))&&(typeof l.N!="number"||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if(l.kind==="value"){for(const h of bt)if(!Pt(h,r))return null}}return`Expected ${ut(l)} but found ${ut(r)} instead.`}function Bt(l,r){return r.some(h=>h.kind===l.kind)}function qt(l,r){return r.some(h=>h==="null"?l===null:h==="array"?Array.isArray(l):h==="object"?l&&!Array.isArray(l)&&typeof l=="object":h===typeof l)}var bi,Oi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function di(l){return(l=Math.round(l))<0?0:l>255?255:l}function He(l){return di(l[l.length-1]==="%"?parseFloat(l)/100*255:parseInt(l))}function xe(l){return(r=l[l.length-1]==="%"?parseFloat(l)/100:parseFloat(l))<0?0:r>1?1:r;var r}function Le(l,r,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?l+(r-l)*h*6:2*h<1?r:3*h<2?l+(r-l)*(2/3-h)*6:l}try{bi={}.parseCSSColor=function(l){var r,h=l.replace(/ /g,"").toLowerCase();if(h in Oi)return Oi[h].slice();if(h[0]==="#")return h.length===4?(r=parseInt(h.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:h.length===7&&(r=parseInt(h.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var f=h.indexOf("("),C=h.indexOf(")");if(f!==-1&&C+1===h.length){var z=h.substr(0,f),B=h.substr(f+1,C-(f+1)).split(","),te=1;switch(z){case"rgba":if(B.length!==4)return null;te=xe(B.pop());case"rgb":return B.length!==3?null:[He(B[0]),He(B[1]),He(B[2]),te];case"hsla":if(B.length!==4)return null;te=xe(B.pop());case"hsl":if(B.length!==3)return null;var se=(parseFloat(B[0])%360+360)%360/360,be=xe(B[1]),Re=xe(B[2]),Oe=Re<=.5?Re*(be+1):Re+be-Re*be,Ve=2*Re-Oe;return[di(255*Le(Ve,Oe,se+1/3)),di(255*Le(Ve,Oe,se)),di(255*Le(Ve,Oe,se-1/3)),te];default:return null}}return null}}catch{}class Ue{constructor(r,h,f,C=1){this.r=r,this.g=h,this.b=f,this.a=C}static parse(r){if(!r)return;if(r instanceof Ue)return r;if(typeof r!="string")return;const h=bi(r);return h?new Ue(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[r,h,f,C]=this.toArray();return`rgba(${Math.round(r)},${Math.round(h)},${Math.round(f)},${C})`}toArray(){const{r,g:h,b:f,a:C}=this;return C===0?[0,0,0,0]:[255*r/C,255*h/C,255*f/C,C]}}Ue.black=new Ue(0,0,0,1),Ue.white=new Ue(1,1,1,1),Ue.transparent=new Ue(0,0,0,0),Ue.red=new Ue(1,0,0,1);class Ke{constructor(r,h,f){this.sensitivity=r?h?"variant":"case":h?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,h){return this.collator.compare(r,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class st{constructor(r,h,f,C,z){this.text=r,this.image=h,this.scale=f,this.fontStack=C,this.textColor=z}}class ct{constructor(r){this.sections=r}static fromString(r){return new ct([new st(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof ct?r:ct.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class ot{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ot)return r;if(typeof r=="number")return new ot([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const h of r)if(typeof h!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new ot(r)}}toString(){return JSON.stringify(this.values)}}class nt{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new nt({name:r,available:!1}):null}}function mt(l,r,h,f){return typeof l=="number"&&l>=0&&l<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof h=="number"&&h>=0&&h<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,r,h,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,r,h,f]:[l,r,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kt(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Ue||l instanceof Ke||l instanceof ct||l instanceof ot||l instanceof nt)return!0;if(Array.isArray(l)){for(const r of l)if(!kt(r))return!1;return!0}if(typeof l=="object"){for(const r in l)if(!kt(l[r]))return!1;return!0}return!1}function zt(l){if(l===null)return Rt;if(typeof l=="string")return Ct;if(typeof l=="boolean")return Tt;if(typeof l=="number")return ft;if(l instanceof Ue)return si;if(l instanceof Ke)return ar;if(l instanceof ct)return Zi;if(l instanceof ot)return mr;if(l instanceof nt)return zr;if(Array.isArray(l)){const r=l.length;let h;for(const f of l){const C=zt(f);if(h){if(h===C)continue;h=Ht;break}h=C}return ir(h||Ht,r)}return ui}function Dt(l){const r=typeof l;return l===null?"":r==="string"||r==="number"||r==="boolean"?String(l):l instanceof Ue||l instanceof ct||l instanceof ot||l instanceof nt?l.toString():JSON.stringify(l)}class oi{constructor(r,h){this.type=r,this.value=h}static parse(r,h){if(r.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!kt(r[1]))return h.error("invalid value");const f=r[1];let C=zt(f);const z=h.expectedType;return C.kind!=="array"||C.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(C=z),new oi(C,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Kt{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const pi={string:Ct,number:ft,boolean:Tt,object:ui};class vi{constructor(r,h){this.type=r,this.args=h}static parse(r,h){if(r.length<2)return h.error("Expected at least one argument.");let f,C=1;const z=r[0];if(z==="array"){let te,se;if(r.length>2){const be=r[1];if(typeof be!="string"||!(be in pi)||be==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);te=pi[be],C++}else te=Ht;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return h.error('The length argument to "array" must be a positive integer literal',2);se=r[2],C++}f=ir(te,se)}else{if(!pi[z])throw new Error(`Types doesn't contain name = ${z}`);f=pi[z]}const B=[];for(;C<r.length;C++){const te=h.parse(r[C],C,Ht);if(!te)return null;B.push(te)}return new vi(f,B)}evaluate(r){for(let h=0;h<this.args.length;h++){const f=this.args[h].evaluate(r);if(!Pt(this.type,zt(f)))return f;if(h===this.args.length-1)throw new Kt(`Expected value to be of type ${ut(this.type)}, but found ${ut(zt(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Fi={"to-boolean":Tt,"to-color":si,"to-number":ft,"to-string":Ct};class _i{constructor(r,h){this.type=r,this.args=h}static parse(r,h){if(r.length<2)return h.error("Expected at least one argument.");const f=r[0];if(!Fi[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return h.error("Expected one argument.");const C=Fi[f],z=[];for(let B=1;B<r.length;B++){const te=h.parse(r[B],B,Ht);if(!te)return null;z.push(te)}return new _i(C,z)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let h,f;for(const C of this.args){if(h=C.evaluate(r),f=null,h instanceof Ue)return h;if(typeof h=="string"){const z=r.parseColor(h);if(z)return z}else if(Array.isArray(h)&&(f=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:mt(h[0],h[1],h[2],h[3]),!f))return new Ue(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Kt(f||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="padding"){let h;for(const f of this.args){h=f.evaluate(r);const C=ot.parse(h);if(C)return C}throw new Kt(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="number"){let h=null;for(const f of this.args){if(h=f.evaluate(r),h===null)return 0;const C=Number(h);if(!isNaN(C))return C}throw new Kt(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Dt(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?nt.fromString(Dt(this.args[0].evaluate(r))):Dt(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Pi=["Unknown","Point","LineString","Polygon"];class Ui{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let h=this._parseColorCache[r];return h||(h=this._parseColorCache[r]=Ue.parse(r)),h}}class ji{constructor(r,h,f,C){this.name=r,this.type=h,this._evaluate=f,this.args=C}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,h){const f=r[0],C=ji.definitions[f];if(!C)return h.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(C)?C[0]:C.type,B=Array.isArray(C)?[[C[1],C[2]]]:C.overloads,te=B.filter(([be])=>!Array.isArray(be)||be.length===r.length-1);let se=null;for(const[be,Re]of te){se=new Nh(h.registry,h.path,null,h.scope);const Oe=[];let Ve=!1;for(let Ye=1;Ye<r.length;Ye++){const Ze=r[Ye],ht=Array.isArray(be)?be[Ye-1]:be.type,lt=se.parse(Ze,1+Oe.length,ht);if(!lt){Ve=!0;break}Oe.push(lt)}if(!Ve)if(Array.isArray(be)&&be.length!==Oe.length)se.error(`Expected ${be.length} arguments, but found ${Oe.length} instead.`);else{for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Array.isArray(be)?be[Ye]:be.type,ht=Oe[Ye];se.concat(Ye+1).checkSubtype(Ze,ht.type)}if(se.errors.length===0)return new ji(f,z,Re,Oe)}}if(te.length===1)h.errors.push(...se.errors);else{const be=(te.length?te:B).map(([Oe])=>{return Ve=Oe,Array.isArray(Ve)?`(${Ve.map(ut).join(", ")})`:`(${ut(Ve.type)}...)`;var Ve}).join(" | "),Re=[];for(let Oe=1;Oe<r.length;Oe++){const Ve=h.parse(r[Oe],1+Re.length);if(!Ve)return null;Re.push(ut(Ve.type))}h.error(`Expected arguments of type ${be}, but found (${Re.join(", ")}) instead.`)}return null}static register(r,h){ji.definitions=h;for(const f in h)r[f]=ji}}class hr{constructor(r,h,f){this.type=ar,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=h}static parse(r,h){if(r.length!==2)return h.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return h.error("Collator options argument must be an object.");const C=h.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Tt);if(!C)return null;const z=h.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Tt);if(!z)return null;let B=null;return f.locale&&(B=h.parse(f.locale,1,Ct),!B)?null:new hr(C,z,B)}evaluate(r){return new Ke(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ur=8192;function gn(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function jn(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function cd(l,r){const h=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,C=Math.pow(2,r.z);return[Math.round(h*C*Ur),Math.round(f*C*Ur)]}function _c(l,r,h){const f=l[0]-r[0],C=l[1]-r[1],z=l[0]-h[0],B=l[1]-h[1];return f*B-z*C==0&&f*z<=0&&C*B<=0}function Nr(l,r){let h=!1;for(let B=0,te=r.length;B<te;B++){const se=r[B];for(let be=0,Re=se.length;be<Re-1;be++){if(_c(l,se[be],se[be+1]))return!1;(C=se[be])[1]>(f=l)[1]!=(z=se[be+1])[1]>f[1]&&f[0]<(z[0]-C[0])*(f[1]-C[1])/(z[1]-C[1])+C[0]&&(h=!h)}}var f,C,z;return h}function Ly(l,r){for(let h=0;h<r.length;h++)if(Nr(l,r[h]))return!0;return!1}function Rh(l,r,h,f){const C=f[0]-h[0],z=f[1]-h[1],B=(l[0]-h[0])*z-C*(l[1]-h[1]),te=(r[0]-h[0])*z-C*(r[1]-h[1]);return B>0&&te<0||B<0&&te>0}function zy(l,r,h){for(const be of h)for(let Re=0;Re<be.length-1;++Re)if((te=[(B=be[Re+1])[0]-(z=be[Re])[0],B[1]-z[1]])[0]*(se=[(C=r)[0]-(f=l)[0],C[1]-f[1]])[1]-te[1]*se[0]!=0&&Rh(f,C,z,B)&&Rh(z,B,f,C))return!0;var f,C,z,B,te,se;return!1}function hd(l,r){for(let h=0;h<l.length;++h)if(!Nr(l[h],r))return!1;for(let h=0;h<l.length-1;++h)if(zy(l[h],l[h+1],r))return!1;return!0}function Nf(l,r){for(let h=0;h<r.length;h++)if(hd(l,r[h]))return!0;return!1}function ud(l,r,h){const f=[];for(let C=0;C<l.length;C++){const z=[];for(let B=0;B<l[C].length;B++){const te=cd(l[C][B],h);gn(r,te),z.push(te)}f.push(z)}return f}function dd(l,r,h){const f=[];for(let C=0;C<l.length;C++){const z=ud(l[C],r,h);f.push(z)}return f}function pd(l,r,h,f){if(l[0]<h[0]||l[0]>h[2]){const C=.5*f;let z=l[0]-h[0]>C?-f:h[0]-l[0]>C?f:0;z===0&&(z=l[0]-h[2]>C?-f:h[2]-l[0]>C?f:0),l[0]+=z}gn(r,l)}function Of(l,r,h,f){const C=Math.pow(2,f.z)*Ur,z=[f.x*Ur,f.y*Ur],B=[];for(const te of l)for(const se of te){const be=[se.x+z[0],se.y+z[1]];pd(be,r,h,C),B.push(be)}return B}function jf(l,r,h,f){const C=Math.pow(2,f.z)*Ur,z=[f.x*Ur,f.y*Ur],B=[];for(const se of l){const be=[];for(const Re of se){const Oe=[Re.x+z[0],Re.y+z[1]];gn(r,Oe),be.push(Oe)}B.push(be)}if(r[2]-r[0]<=C/2){(te=r)[0]=te[1]=1/0,te[2]=te[3]=-1/0;for(const se of B)for(const be of se)pd(be,r,h,C)}var te;return B}class qo{constructor(r,h){this.type=Tt,this.geojson=r,this.geometries=h}static parse(r,h){if(r.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(kt(r[1])){const f=r[1];if(f.type==="FeatureCollection")for(let C=0;C<f.features.length;++C){const z=f.features[C].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new qo(f,f.features[C].geometry)}else if(f.type==="Feature"){const C=f.geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new qo(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new qo(f,f)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(h,f){const C=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],B=h.canonicalID();if(f.type==="Polygon"){const te=ud(f.coordinates,z,B),se=Of(h.geometry(),C,z,B);if(!jn(C,z))return!1;for(const be of se)if(!Nr(be,te))return!1}if(f.type==="MultiPolygon"){const te=dd(f.coordinates,z,B),se=Of(h.geometry(),C,z,B);if(!jn(C,z))return!1;for(const be of se)if(!Ly(be,te))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(h,f){const C=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],B=h.canonicalID();if(f.type==="Polygon"){const te=ud(f.coordinates,z,B),se=jf(h.geometry(),C,z,B);if(!jn(C,z))return!1;for(const be of se)if(!hd(be,te))return!1}if(f.type==="MultiPolygon"){const te=dd(f.coordinates,z,B),se=jf(h.geometry(),C,z,B);if(!jn(C,z))return!1;for(const be of se)if(!Nf(be,te))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Lh(l){if(l instanceof ji&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof qo)return!1;let r=!0;return l.eachChild(h=>{r&&!Lh(h)&&(r=!1)}),r}function Sl(l){if(l instanceof ji&&l.name==="feature-state")return!1;let r=!0;return l.eachChild(h=>{r&&!Sl(h)&&(r=!1)}),r}function wc(l,r){if(l instanceof ji&&r.indexOf(l.name)>=0)return!1;let h=!0;return l.eachChild(f=>{h&&!wc(f,r)&&(h=!1)}),h}class zh{constructor(r,h){this.type=h.type,this.name=r,this.boundExpression=h}static parse(r,h){if(r.length!==2||typeof r[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const f=r[1];return h.scope.has(f)?new zh(f,h.scope.get(f)):h.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Nh{constructor(r,h=[],f,C=new wt,z=[]){this.registry=r,this.path=h,this.key=h.map(B=>`[${B}]`).join(""),this.scope=C,this.errors=z,this.expectedType=f}parse(r,h,f,C,z={}){return h?this.concat(h,f,C)._parse(r,z):this._parse(r,z)}_parse(r,h){function f(C,z,B){return B==="assert"?new vi(z,[C]):B==="coerce"?new _i(z,[C]):C}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const C=r[0];if(typeof C!="string")return this.error(`Expression name must be a string, but found ${typeof C} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[C];if(z){let B=z.parse(r,this);if(!B)return null;if(this.expectedType){const te=this.expectedType,se=B.type;if(te.kind!=="string"&&te.kind!=="number"&&te.kind!=="boolean"&&te.kind!=="object"&&te.kind!=="array"||se.kind!=="value")if(te.kind!=="color"&&te.kind!=="formatted"&&te.kind!=="resolvedImage"||se.kind!=="value"&&se.kind!=="string")if(te.kind!=="padding"||se.kind!=="value"&&se.kind!=="number"&&se.kind!=="array"){if(this.checkSubtype(te,se))return null}else B=f(B,te,h.typeAnnotation||"coerce");else B=f(B,te,h.typeAnnotation||"coerce");else B=f(B,te,h.typeAnnotation||"assert")}if(!(B instanceof oi)&&B.type.kind!=="resolvedImage"&&Tc(B)){const te=new Ui;try{B=new oi(B.type,B.evaluate(te))}catch(se){return this.error(se.message),null}}return B}return this.error(`Unknown expression "${C}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,h,f){const C=typeof r=="number"?this.path.concat(r):this.path,z=f?this.scope.concat(f):this.scope;return new Nh(this.registry,C,h||null,z,this.errors)}error(r,...h){const f=`${this.key}${h.map(C=>`[${C}]`).join("")}`;this.errors.push(new gt(f,r))}checkSubtype(r,h){const f=Pt(r,h);return f&&this.error(f),f}}function Tc(l){if(l instanceof zh)return Tc(l.boundExpression);if(l instanceof ji&&l.name==="error"||l instanceof hr||l instanceof qo)return!1;const r=l instanceof _i||l instanceof vi;let h=!0;return l.eachChild(f=>{h=r?h&&Tc(f):h&&f instanceof oi}),!!h&&Lh(l)&&wc(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Oh(l,r){const h=l.length-1;let f,C,z=0,B=h,te=0;for(;z<=B;)if(te=Math.floor((z+B)/2),f=l[te],C=l[te+1],f<=r){if(te===h||r<C)return te;z=te+1}else{if(!(f>r))throw new Kt("Input is not a number.");B=te-1}return 0}class Ec{constructor(r,h,f){this.type=r,this.input=h,this.labels=[],this.outputs=[];for(const[C,z]of f)this.labels.push(C),this.outputs.push(z)}static parse(r,h){if(r.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return h.error("Expected an even number of arguments.");const f=h.parse(r[1],1,ft);if(!f)return null;const C=[];let z=null;h.expectedType&&h.expectedType.kind!=="value"&&(z=h.expectedType);for(let B=1;B<r.length;B+=2){const te=B===1?-1/0:r[B],se=r[B+1],be=B,Re=B+1;if(typeof te!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(C.length&&C[C.length-1][0]>=te)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);const Oe=h.parse(se,Re,z);if(!Oe)return null;z=z||Oe.type,C.push([te,Oe])}return new Ec(z,f,C)}evaluate(r){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(r);const C=this.input.evaluate(r);if(C<=h[0])return f[0].evaluate(r);const z=h.length;return C>=h[z-1]?f[z-1].evaluate(r):f[Oh(h,C)].evaluate(r)}eachChild(r){r(this.input);for(const h of this.outputs)r(h)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function hn(l,r,h){return l*(1-h)+r*h}var Cc=Object.freeze({__proto__:null,number:hn,color:function(l,r,h){return new Ue(hn(l.r,r.r,h),hn(l.g,r.g,h),hn(l.b,r.b,h),hn(l.a,r.a,h))},array:function(l,r,h){return l.map((f,C)=>hn(f,r[C],h))},padding:function(l,r,h){const f=l.values,C=r.values;return new ot([hn(f[0],C[0],h),hn(f[1],C[1],h),hn(f[2],C[2],h),hn(f[3],C[3],h)])}});const fd=.95047,Bf=1.08883,Ff=4/29,jh=6/29,md=3*jh*jh,Ny=Math.PI/180,Oy=180/Math.PI;function gd(l){return l>.008856451679035631?Math.pow(l,1/3):l/md+Ff}function yd(l){return l>jh?l*l*l:md*(l-Ff)}function xd(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function bd(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Uf(l){const r=bd(l.r),h=bd(l.g),f=bd(l.b),C=gd((.4124564*r+.3575761*h+.1804375*f)/fd),z=gd((.2126729*r+.7151522*h+.072175*f)/1);return{l:116*z-16,a:500*(C-z),b:200*(z-gd((.0193339*r+.119192*h+.9503041*f)/Bf)),alpha:l.a}}function Ar(l){let r=(l.l+16)/116,h=isNaN(l.a)?r:r+l.a/500,f=isNaN(l.b)?r:r-l.b/200;return r=1*yd(r),h=fd*yd(h),f=Bf*yd(f),new Ue(xd(3.2404542*h-1.5371385*r-.4985314*f),xd(-.969266*h+1.8760108*r+.041556*f),xd(.0556434*h-.2040259*r+1.0572252*f),l.alpha)}function jy(l,r,h){const f=r-l;return l+h*(f>180||f<-180?f-360*Math.round(f/360):f)}const Sc={forward:Uf,reverse:Ar,interpolate:function(l,r,h){return{l:hn(l.l,r.l,h),a:hn(l.a,r.a,h),b:hn(l.b,r.b,h),alpha:hn(l.alpha,r.alpha,h)}}},kc={forward:function(l){const{l:r,a:h,b:f}=Uf(l),C=Math.atan2(f,h)*Oy;return{h:C<0?C+360:C,c:Math.sqrt(h*h+f*f),l:r,alpha:l.a}},reverse:function(l){const r=l.h*Ny,h=l.c;return Ar({l:l.l,a:Math.cos(r)*h,b:Math.sin(r)*h,alpha:l.alpha})},interpolate:function(l,r,h){return{h:jy(l.h,r.h,h),c:hn(l.c,r.c,h),l:hn(l.l,r.l,h),alpha:hn(l.alpha,r.alpha,h)}}};var $f=Object.freeze({__proto__:null,lab:Sc,hcl:kc});class Ys{constructor(r,h,f,C,z){this.type=r,this.operator=h,this.interpolation=f,this.input=C,this.labels=[],this.outputs=[];for(const[B,te]of z)this.labels.push(B),this.outputs.push(te)}static interpolationFactor(r,h,f,C){let z=0;if(r.name==="exponential")z=vd(h,r.base,f,C);else if(r.name==="linear")z=vd(h,1,f,C);else if(r.name==="cubic-bezier"){const B=r.controlPoints;z=new p(B[0],B[1],B[2],B[3]).solve(vd(h,1,f,C))}return z}static parse(r,h){let[f,C,z,...B]=r;if(!Array.isArray(C)||C.length===0)return h.error("Expected an interpolation type expression.",1);if(C[0]==="linear")C={name:"linear"};else if(C[0]==="exponential"){const be=C[1];if(typeof be!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);C={name:"exponential",base:be}}else{if(C[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(C[0])}`,1,0);{const be=C.slice(1);if(be.length!==4||be.some(Re=>typeof Re!="number"||Re<0||Re>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);C={name:"cubic-bezier",controlPoints:be}}}if(r.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(z=h.parse(z,2,ft),!z)return null;const te=[];let se=null;f==="interpolate-hcl"||f==="interpolate-lab"?se=si:h.expectedType&&h.expectedType.kind!=="value"&&(se=h.expectedType);for(let be=0;be<B.length;be+=2){const Re=B[be],Oe=B[be+1],Ve=be+3,Ye=be+4;if(typeof Re!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ve);if(te.length&&te[te.length-1][0]>=Re)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ve);const Ze=h.parse(Oe,Ye,se);if(!Ze)return null;se=se||Ze.type,te.push([Re,Ze])}return se.kind==="number"||se.kind==="color"||se.kind==="padding"||se.kind==="array"&&se.itemType.kind==="number"&&typeof se.N=="number"?new Ys(se,f,C,z,te):h.error(`Type ${ut(se)} is not interpolatable.`)}evaluate(r){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(r);const C=this.input.evaluate(r);if(C<=h[0])return f[0].evaluate(r);const z=h.length;if(C>=h[z-1])return f[z-1].evaluate(r);const B=Oh(h,C),te=Ys.interpolationFactor(this.interpolation,C,h[B],h[B+1]),se=f[B].evaluate(r),be=f[B+1].evaluate(r);return this.operator==="interpolate"?Cc[this.type.kind.toLowerCase()](se,be,te):this.operator==="interpolate-hcl"?kc.reverse(kc.interpolate(kc.forward(se),kc.forward(be),te)):Sc.reverse(Sc.interpolate(Sc.forward(se),Sc.forward(be),te))}eachChild(r){r(this.input);for(const h of this.outputs)r(h)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function vd(l,r,h,f){const C=f-h,z=l-h;return C===0?0:r===1?z/C:(Math.pow(r,z)-1)/(Math.pow(r,C)-1)}class Bh{constructor(r,h){this.type=r,this.args=h}static parse(r,h){if(r.length<2)return h.error("Expectected at least one argument.");let f=null;const C=h.expectedType;C&&C.kind!=="value"&&(f=C);const z=[];for(const te of r.slice(1)){const se=h.parse(te,1+z.length,f,void 0,{typeAnnotation:"omit"});if(!se)return null;f=f||se.type,z.push(se)}if(!f)throw new Error("No output type");const B=C&&z.some(te=>Pt(C,te.type));return new Bh(B?Ht:f,z)}evaluate(r){let h,f=null,C=0;for(const z of this.args)if(C++,f=z.evaluate(r),f&&f instanceof nt&&!f.available&&(h||(h=f.name),f=null,C===this.args.length&&(f=h)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Fh{constructor(r,h){this.type=h.type,this.bindings=[].concat(r),this.result=h}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const h of this.bindings)r(h[1]);r(this.result)}static parse(r,h){if(r.length<4)return h.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let z=1;z<r.length-1;z+=2){const B=r[z];if(typeof B!="string")return h.error(`Expected string, but found ${typeof B} instead.`,z);if(/[^a-zA-Z0-9_]/.test(B))return h.error("Variable names must contain only alphanumeric characters or '_'.",z);const te=h.parse(r[z+1],z+1);if(!te)return null;f.push([B,te])}const C=h.parse(r[r.length-1],r.length-1,h.expectedType,f);return C?new Fh(f,C):null}outputDefined(){return this.result.outputDefined()}}class _d{constructor(r,h,f){this.type=r,this.index=h,this.input=f}static parse(r,h){if(r.length!==3)return h.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=h.parse(r[1],1,ft),C=h.parse(r[2],2,ir(h.expectedType||Ht));return f&&C?new _d(C.type.itemType,f,C):null}evaluate(r){const h=this.index.evaluate(r),f=this.input.evaluate(r);if(h<0)throw new Kt(`Array index out of bounds: ${h} < 0.`);if(h>=f.length)throw new Kt(`Array index out of bounds: ${h} > ${f.length-1}.`);if(h!==Math.floor(h))throw new Kt(`Array index must be an integer, but found ${h} instead.`);return f[h]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class wd{constructor(r,h){this.type=Tt,this.needle=r,this.haystack=h}static parse(r,h){if(r.length!==3)return h.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=h.parse(r[1],1,Ht),C=h.parse(r[2],2,Ht);return f&&C?Bt(f.type,[Tt,Ct,ft,Rt,Ht])?new wd(f,C):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ut(f.type)} instead`):null}evaluate(r){const h=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!qt(h,["boolean","string","number","null"]))throw new Kt(`Expected first argument to be of type boolean, string, number or null, but found ${ut(zt(h))} instead.`);if(!qt(f,["string","array"]))throw new Kt(`Expected second argument to be of type array or string, but found ${ut(zt(f))} instead.`);return f.indexOf(h)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Uh{constructor(r,h,f){this.type=ft,this.needle=r,this.haystack=h,this.fromIndex=f}static parse(r,h){if(r.length<=2||r.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const f=h.parse(r[1],1,Ht),C=h.parse(r[2],2,Ht);if(!f||!C)return null;if(!Bt(f.type,[Tt,Ct,ft,Rt,Ht]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ut(f.type)} instead`);if(r.length===4){const z=h.parse(r[3],3,ft);return z?new Uh(f,C,z):null}return new Uh(f,C)}evaluate(r){const h=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!qt(h,["boolean","string","number","null"]))throw new Kt(`Expected first argument to be of type boolean, string, number or null, but found ${ut(zt(h))} instead.`);if(!qt(f,["string","array"]))throw new Kt(`Expected second argument to be of type array or string, but found ${ut(zt(f))} instead.`);if(this.fromIndex){const C=this.fromIndex.evaluate(r);return f.indexOf(h,C)}return f.indexOf(h)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Td{constructor(r,h,f,C,z,B){this.inputType=r,this.type=h,this.input=f,this.cases=C,this.outputs=z,this.otherwise=B}static parse(r,h){if(r.length<5)return h.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return h.error("Expected an even number of arguments.");let f,C;h.expectedType&&h.expectedType.kind!=="value"&&(C=h.expectedType);const z={},B=[];for(let be=2;be<r.length-1;be+=2){let Re=r[be];const Oe=r[be+1];Array.isArray(Re)||(Re=[Re]);const Ve=h.concat(be);if(Re.length===0)return Ve.error("Expected at least one branch label.");for(const Ze of Re){if(typeof Ze!="number"&&typeof Ze!="string")return Ve.error("Branch labels must be numbers or strings.");if(typeof Ze=="number"&&Math.abs(Ze)>Number.MAX_SAFE_INTEGER)return Ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ze=="number"&&Math.floor(Ze)!==Ze)return Ve.error("Numeric branch labels must be integer values.");if(f){if(Ve.checkSubtype(f,zt(Ze)))return null}else f=zt(Ze);if(z[String(Ze)]!==void 0)return Ve.error("Branch labels must be unique.");z[String(Ze)]=B.length}const Ye=h.parse(Oe,be,C);if(!Ye)return null;C=C||Ye.type,B.push(Ye)}const te=h.parse(r[1],1,Ht);if(!te)return null;const se=h.parse(r[r.length-1],r.length-1,C);return se?te.type.kind!=="value"&&h.concat(1).checkSubtype(f,te.type)?null:new Td(f,C,te,z,B,se):null}evaluate(r){const h=this.input.evaluate(r);return(zt(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Ed{constructor(r,h,f){this.type=r,this.branches=h,this.otherwise=f}static parse(r,h){if(r.length<4)return h.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return h.error("Expected an odd number of arguments.");let f;h.expectedType&&h.expectedType.kind!=="value"&&(f=h.expectedType);const C=[];for(let B=1;B<r.length-1;B+=2){const te=h.parse(r[B],B,Tt);if(!te)return null;const se=h.parse(r[B+1],B+1,f);if(!se)return null;C.push([te,se]),f=f||se.type}const z=h.parse(r[r.length-1],r.length-1,f);if(!z)return null;if(!f)throw new Error("Can't infer output type");return new Ed(f,C,z)}evaluate(r){for(const[h,f]of this.branches)if(h.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[h,f]of this.branches)r(h),r(f);r(this.otherwise)}outputDefined(){return this.branches.every(([r,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class $h{constructor(r,h,f,C){this.type=r,this.input=h,this.beginIndex=f,this.endIndex=C}static parse(r,h){if(r.length<=2||r.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const f=h.parse(r[1],1,Ht),C=h.parse(r[2],2,ft);if(!f||!C)return null;if(!Bt(f.type,[ir(Ht),Ct,Ht]))return h.error(`Expected first argument to be of type array or string, but found ${ut(f.type)} instead`);if(r.length===4){const z=h.parse(r[3],3,ft);return z?new $h(f.type,f,C,z):null}return new $h(f.type,f,C)}evaluate(r){const h=this.input.evaluate(r),f=this.beginIndex.evaluate(r);if(!qt(h,["string","array"]))throw new Kt(`Expected first argument to be of type array or string, but found ${ut(zt(h))} instead.`);if(this.endIndex){const C=this.endIndex.evaluate(r);return h.slice(f,C)}return h.slice(f)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Vf(l,r){return l==="=="||l==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Gf(l,r,h,f){return f.compare(r,h)===0}function kl(l,r,h){const f=l!=="=="&&l!=="!=";return class _2{constructor(z,B,te){this.type=Tt,this.lhs=z,this.rhs=B,this.collator=te,this.hasUntypedArgument=z.type.kind==="value"||B.type.kind==="value"}static parse(z,B){if(z.length!==3&&z.length!==4)return B.error("Expected two or three arguments.");const te=z[0];let se=B.parse(z[1],1,Ht);if(!se)return null;if(!Vf(te,se.type))return B.concat(1).error(`"${te}" comparisons are not supported for type '${ut(se.type)}'.`);let be=B.parse(z[2],2,Ht);if(!be)return null;if(!Vf(te,be.type))return B.concat(2).error(`"${te}" comparisons are not supported for type '${ut(be.type)}'.`);if(se.type.kind!==be.type.kind&&se.type.kind!=="value"&&be.type.kind!=="value")return B.error(`Cannot compare types '${ut(se.type)}' and '${ut(be.type)}'.`);f&&(se.type.kind==="value"&&be.type.kind!=="value"?se=new vi(be.type,[se]):se.type.kind!=="value"&&be.type.kind==="value"&&(be=new vi(se.type,[be])));let Re=null;if(z.length===4){if(se.type.kind!=="string"&&be.type.kind!=="string"&&se.type.kind!=="value"&&be.type.kind!=="value")return B.error("Cannot use collator to compare non-string types.");if(Re=B.parse(z[3],3,ar),!Re)return null}return new _2(se,be,Re)}evaluate(z){const B=this.lhs.evaluate(z),te=this.rhs.evaluate(z);if(f&&this.hasUntypedArgument){const se=zt(B),be=zt(te);if(se.kind!==be.kind||se.kind!=="string"&&se.kind!=="number")throw new Kt(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${se.kind}, ${be.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const se=zt(B),be=zt(te);if(se.kind!=="string"||be.kind!=="string")return r(z,B,te)}return this.collator?h(z,B,te,this.collator.evaluate(z)):r(z,B,te)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const By=kl("==",function(l,r,h){return r===h},Gf),Fy=kl("!=",function(l,r,h){return r!==h},function(l,r,h,f){return!Gf(0,r,h,f)}),Uy=kl("<",function(l,r,h){return r<h},function(l,r,h,f){return f.compare(r,h)<0}),$y=kl(">",function(l,r,h){return r>h},function(l,r,h,f){return f.compare(r,h)>0}),Vy=kl("<=",function(l,r,h){return r<=h},function(l,r,h,f){return f.compare(r,h)<=0}),Gy=kl(">=",function(l,r,h){return r>=h},function(l,r,h,f){return f.compare(r,h)>=0});class Cd{constructor(r,h,f,C,z){this.type=Ct,this.number=r,this.locale=h,this.currency=f,this.minFractionDigits=C,this.maxFractionDigits=z}static parse(r,h){if(r.length!==3)return h.error("Expected two arguments.");const f=h.parse(r[1],1,ft);if(!f)return null;const C=r[2];if(typeof C!="object"||Array.isArray(C))return h.error("NumberFormat options argument must be an object.");let z=null;if(C.locale&&(z=h.parse(C.locale,1,Ct),!z))return null;let B=null;if(C.currency&&(B=h.parse(C.currency,1,Ct),!B))return null;let te=null;if(C["min-fraction-digits"]&&(te=h.parse(C["min-fraction-digits"],1,ft),!te))return null;let se=null;return C["max-fraction-digits"]&&(se=h.parse(C["max-fraction-digits"],1,ft),!se)?null:new Cd(f,z,B,te,se)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Vh{constructor(r){this.type=Zi,this.sections=r}static parse(r,h){if(r.length<2)return h.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return h.error("First argument must be an image or text section.");const C=[];let z=!1;for(let B=1;B<=r.length-1;++B){const te=r[B];if(z&&typeof te=="object"&&!Array.isArray(te)){z=!1;let se=null;if(te["font-scale"]&&(se=h.parse(te["font-scale"],1,ft),!se))return null;let be=null;if(te["text-font"]&&(be=h.parse(te["text-font"],1,ir(Ct)),!be))return null;let Re=null;if(te["text-color"]&&(Re=h.parse(te["text-color"],1,si),!Re))return null;const Oe=C[C.length-1];Oe.scale=se,Oe.font=be,Oe.textColor=Re}else{const se=h.parse(r[B],1,Ht);if(!se)return null;const be=se.type.kind;if(be!=="string"&&be!=="value"&&be!=="null"&&be!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,C.push({content:se,scale:null,font:null,textColor:null})}}return new Vh(C)}evaluate(r){return new ct(this.sections.map(h=>{const f=h.content.evaluate(r);return zt(f)===zr?new st("",f,null,null,null):new st(Dt(f),null,h.scale?h.scale.evaluate(r):null,h.font?h.font.evaluate(r).join(","):null,h.textColor?h.textColor.evaluate(r):null)}))}eachChild(r){for(const h of this.sections)r(h.content),h.scale&&r(h.scale),h.font&&r(h.font),h.textColor&&r(h.textColor)}outputDefined(){return!1}}class Sd{constructor(r){this.type=zr,this.input=r}static parse(r,h){if(r.length!==2)return h.error("Expected two arguments.");const f=h.parse(r[1],1,Ct);return f?new Sd(f):h.error("No image name provided.")}evaluate(r){const h=this.input.evaluate(r),f=nt.fromString(h);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(h)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class kd{constructor(r){this.type=ft,this.input=r}static parse(r,h){if(r.length!==2)return h.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=h.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${ut(f.type)} instead.`):new kd(f):null}evaluate(r){const h=this.input.evaluate(r);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Kt(`Expected value to be of type string or array, but found ${ut(zt(h))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Al={"==":By,"!=":Fy,">":$y,"<":Uy,">=":Gy,"<=":Vy,array:vi,at:_d,boolean:vi,case:Ed,coalesce:Bh,collator:hr,format:Vh,image:Sd,in:wd,"index-of":Uh,interpolate:Ys,"interpolate-hcl":Ys,"interpolate-lab":Ys,length:kd,let:Fh,literal:oi,match:Td,number:vi,"number-format":Cd,object:vi,slice:$h,step:Ec,string:vi,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:zh,within:qo};function Hf(l,[r,h,f,C]){r=r.evaluate(l),h=h.evaluate(l),f=f.evaluate(l);const z=C?C.evaluate(l):1,B=mt(r,h,f,z);if(B)throw new Kt(B);return new Ue(r/255*z,h/255*z,f/255*z,z)}function Wf(l,r){return l in r}function Ad(l,r){const h=r[l];return h===void 0?null:h}function xo(l){return{type:l}}function qf(l){return{result:"success",value:l}}function Ml(l){return{result:"error",value:l}}function Pl(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function yn(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Md(l){return!!l.expression&&l.expression.interpolated}function Ti(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Il(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function un(l){return l}function Qr(l,r){const h=r.type==="color",f=l.stops&&typeof l.stops[0][0]=="object",C=f||!(f||l.property!==void 0),z=l.type||(Md(r)?"exponential":"interval");if(h||r.type==="padding"){const be=h?Ue.parse:ot.parse;(l=et({},l)).stops&&(l.stops=l.stops.map(Re=>[Re[0],be(Re[1])])),l.default=be(l.default?l.default:r.default)}if(l.colorSpace&&l.colorSpace!=="rgb"&&!$f[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let B,te,se;if(z==="exponential")B=Zf;else if(z==="interval")B=Hy;else if(z==="categorical"){B=Yf,te=Object.create(null);for(const be of l.stops)te[be[0]]=be[1];se=typeof l.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);B=Wy}if(f){const be={},Re=[];for(let Ye=0;Ye<l.stops.length;Ye++){const Ze=l.stops[Ye],ht=Ze[0].zoom;be[ht]===void 0&&(be[ht]={zoom:ht,type:l.type,property:l.property,default:l.default,stops:[]},Re.push(ht)),be[ht].stops.push([Ze[0].value,Ze[1]])}const Oe=[];for(const Ye of Re)Oe.push([be[Ye].zoom,Qr(be[Ye],r)]);const Ve={name:"linear"};return{kind:"composite",interpolationType:Ve,interpolationFactor:Ys.interpolationFactor.bind(void 0,Ve),zoomStops:Oe.map(Ye=>Ye[0]),evaluate:({zoom:Ye},Ze)=>Zf({stops:Oe,base:l.base},r,Ye).evaluate(Ye,Ze)}}if(C){const be=z==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Ys.interpolationFactor.bind(void 0,be),zoomStops:l.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>B(l,r,Re,te,se)}}return{kind:"source",evaluate(be,Re){const Oe=Re&&Re.properties?Re.properties[l.property]:void 0;return Oe===void 0?bo(l.default,r.default):B(l,r,Oe,te,se)}}}function bo(l,r,h){return l!==void 0?l:r!==void 0?r:h!==void 0?h:void 0}function Yf(l,r,h,f,C){return bo(typeof h===C?f[h]:void 0,l.default,r.default)}function Hy(l,r,h){if(Ti(h)!=="number")return bo(l.default,r.default);const f=l.stops.length;if(f===1||h<=l.stops[0][0])return l.stops[0][1];if(h>=l.stops[f-1][0])return l.stops[f-1][1];const C=Oh(l.stops.map(z=>z[0]),h);return l.stops[C][1]}function Zf(l,r,h){const f=l.base!==void 0?l.base:1;if(Ti(h)!=="number")return bo(l.default,r.default);const C=l.stops.length;if(C===1||h<=l.stops[0][0])return l.stops[0][1];if(h>=l.stops[C-1][0])return l.stops[C-1][1];const z=Oh(l.stops.map(Re=>Re[0]),h),B=function(Re,Oe,Ve,Ye){const Ze=Ye-Ve,ht=Re-Ve;return Ze===0?0:Oe===1?ht/Ze:(Math.pow(Oe,ht)-1)/(Math.pow(Oe,Ze)-1)}(h,f,l.stops[z][0],l.stops[z+1][0]),te=l.stops[z][1],se=l.stops[z+1][1];let be=Cc[r.type]||un;if(l.colorSpace&&l.colorSpace!=="rgb"){const Re=$f[l.colorSpace];be=(Oe,Ve)=>Re.reverse(Re.interpolate(Re.forward(Oe),Re.forward(Ve),B))}return typeof te.evaluate=="function"?{evaluate(...Re){const Oe=te.evaluate.apply(void 0,Re),Ve=se.evaluate.apply(void 0,Re);if(Oe!==void 0&&Ve!==void 0)return be(Oe,Ve,B)}}:be(te,se,B)}function Wy(l,r,h){switch(r.type){case"color":h=Ue.parse(h);break;case"formatted":h=ct.fromString(h.toString());break;case"resolvedImage":h=nt.fromString(h.toString());break;case"padding":h=ot.parse(h);break;default:Ti(h)===r.type||r.type==="enum"&&r.values[h]||(h=void 0)}return bo(h,l.default,r.default)}ji.register(Al,{error:[{kind:"error"},[Ct],(l,[r])=>{throw new Kt(r.evaluate(l))}],typeof:[Ct,[Ht],(l,[r])=>ut(zt(r.evaluate(l)))],"to-rgba":[ir(ft,4),[si],(l,[r])=>r.evaluate(l).toArray()],rgb:[si,[ft,ft,ft],Hf],rgba:[si,[ft,ft,ft,ft],Hf],has:{type:Tt,overloads:[[[Ct],(l,[r])=>Wf(r.evaluate(l),l.properties())],[[Ct,ui],(l,[r,h])=>Wf(r.evaluate(l),h.evaluate(l))]]},get:{type:Ht,overloads:[[[Ct],(l,[r])=>Ad(r.evaluate(l),l.properties())],[[Ct,ui],(l,[r,h])=>Ad(r.evaluate(l),h.evaluate(l))]]},"feature-state":[Ht,[Ct],(l,[r])=>Ad(r.evaluate(l),l.featureState||{})],properties:[ui,[],l=>l.properties()],"geometry-type":[Ct,[],l=>l.geometryType()],id:[Ht,[],l=>l.id()],zoom:[ft,[],l=>l.globals.zoom],"heatmap-density":[ft,[],l=>l.globals.heatmapDensity||0],"line-progress":[ft,[],l=>l.globals.lineProgress||0],accumulated:[Ht,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[ft,xo(ft),(l,r)=>{let h=0;for(const f of r)h+=f.evaluate(l);return h}],"*":[ft,xo(ft),(l,r)=>{let h=1;for(const f of r)h*=f.evaluate(l);return h}],"-":{type:ft,overloads:[[[ft,ft],(l,[r,h])=>r.evaluate(l)-h.evaluate(l)],[[ft],(l,[r])=>-r.evaluate(l)]]},"/":[ft,[ft,ft],(l,[r,h])=>r.evaluate(l)/h.evaluate(l)],"%":[ft,[ft,ft],(l,[r,h])=>r.evaluate(l)%h.evaluate(l)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(l,[r,h])=>Math.pow(r.evaluate(l),h.evaluate(l))],sqrt:[ft,[ft],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[ft,[ft],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[ft,[ft],(l,[r])=>Math.log(r.evaluate(l))],log2:[ft,[ft],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[ft,[ft],(l,[r])=>Math.sin(r.evaluate(l))],cos:[ft,[ft],(l,[r])=>Math.cos(r.evaluate(l))],tan:[ft,[ft],(l,[r])=>Math.tan(r.evaluate(l))],asin:[ft,[ft],(l,[r])=>Math.asin(r.evaluate(l))],acos:[ft,[ft],(l,[r])=>Math.acos(r.evaluate(l))],atan:[ft,[ft],(l,[r])=>Math.atan(r.evaluate(l))],min:[ft,xo(ft),(l,r)=>Math.min(...r.map(h=>h.evaluate(l)))],max:[ft,xo(ft),(l,r)=>Math.max(...r.map(h=>h.evaluate(l)))],abs:[ft,[ft],(l,[r])=>Math.abs(r.evaluate(l))],round:[ft,[ft],(l,[r])=>{const h=r.evaluate(l);return h<0?-Math.round(-h):Math.round(h)}],floor:[ft,[ft],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[ft,[ft],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[Tt,[Ct,Ht],(l,[r,h])=>l.properties()[r.value]===h.value],"filter-id-==":[Tt,[Ht],(l,[r])=>l.id()===r.value],"filter-type-==":[Tt,[Ct],(l,[r])=>l.geometryType()===r.value],"filter-<":[Tt,[Ct,Ht],(l,[r,h])=>{const f=l.properties()[r.value],C=h.value;return typeof f==typeof C&&f<C}],"filter-id-<":[Tt,[Ht],(l,[r])=>{const h=l.id(),f=r.value;return typeof h==typeof f&&h<f}],"filter->":[Tt,[Ct,Ht],(l,[r,h])=>{const f=l.properties()[r.value],C=h.value;return typeof f==typeof C&&f>C}],"filter-id->":[Tt,[Ht],(l,[r])=>{const h=l.id(),f=r.value;return typeof h==typeof f&&h>f}],"filter-<=":[Tt,[Ct,Ht],(l,[r,h])=>{const f=l.properties()[r.value],C=h.value;return typeof f==typeof C&&f<=C}],"filter-id-<=":[Tt,[Ht],(l,[r])=>{const h=l.id(),f=r.value;return typeof h==typeof f&&h<=f}],"filter->=":[Tt,[Ct,Ht],(l,[r,h])=>{const f=l.properties()[r.value],C=h.value;return typeof f==typeof C&&f>=C}],"filter-id->=":[Tt,[Ht],(l,[r])=>{const h=l.id(),f=r.value;return typeof h==typeof f&&h>=f}],"filter-has":[Tt,[Ht],(l,[r])=>r.value in l.properties()],"filter-has-id":[Tt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Tt,[ir(Ct)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[Tt,[ir(Ht)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[Tt,[Ct,ir(Ht)],(l,[r,h])=>h.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[Tt,[Ct,ir(Ht)],(l,[r,h])=>function(f,C,z,B){for(;z<=B;){const te=z+B>>1;if(C[te]===f)return!0;C[te]>f?B=te-1:z=te+1}return!1}(l.properties()[r.value],h.value,0,h.value.length-1)],all:{type:Tt,overloads:[[[Tt,Tt],(l,[r,h])=>r.evaluate(l)&&h.evaluate(l)],[xo(Tt),(l,r)=>{for(const h of r)if(!h.evaluate(l))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],(l,[r,h])=>r.evaluate(l)||h.evaluate(l)],[xo(Tt),(l,r)=>{for(const h of r)if(h.evaluate(l))return!0;return!1}]]},"!":[Tt,[Tt],(l,[r])=>!r.evaluate(l)],"is-supported-script":[Tt,[Ct],(l,[r])=>{const h=l.globals&&l.globals.isSupportedScript;return!h||h(r.evaluate(l))}],upcase:[Ct,[Ct],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[Ct,[Ct],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[Ct,xo(Ht),(l,r)=>r.map(h=>Dt(h.evaluate(l))).join("")],"resolved-locale":[Ct,[ar],(l,[r])=>r.evaluate(l).resolvedLocale()]});class Pd{constructor(r,h){this.expression=r,this._warningHistory={},this._evaluator=new Ui,this._defaultValue=h?function(f){return f.type==="color"&&Il(f.default)?new Ue(0,0,0,0):f.type==="color"?Ue.parse(f.default)||null:f.type==="padding"?ot.parse(f.default)||null:f.default===void 0?null:f.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(r,h,f,C,z,B){return this._evaluator.globals=r,this._evaluator.feature=h,this._evaluator.featureState=f,this._evaluator.canonical=C,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(r,h,f,C,z,B){this._evaluator.globals=r,this._evaluator.feature=h||null,this._evaluator.featureState=f||null,this._evaluator.canonical=C,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=B||null;try{const te=this.expression.evaluate(this._evaluator);if(te==null||typeof te=="number"&&te!=te)return this._defaultValue;if(this._enumValues&&!(te in this._enumValues))throw new Kt(`Expected value to be one of ${Object.keys(this._enumValues).map(se=>JSON.stringify(se)).join(", ")}, but found ${JSON.stringify(te)} instead.`);return te}catch(te){return this._warningHistory[te.message]||(this._warningHistory[te.message]=!0,typeof console<"u"&&console.warn(te.message)),this._defaultValue}}}function Ac(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Al}function Mc(l,r){const h=new Nh(Al,[],r?function(C){const z={color:si,string:Ct,number:ft,enum:Ct,boolean:Tt,formatted:Zi,padding:mr,resolvedImage:zr};return C.type==="array"?ir(z[C.value]||Ht,C.length):z[C.type]}(r):void 0),f=h.parse(l,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?qf(new Pd(f,r)):Ml(h.errors)}class Gh{constructor(r,h){this.kind=r,this._styleExpression=h,this.isStateDependent=r!=="constant"&&!Sl(h.expression)}evaluateWithoutErrorHandling(r,h,f,C,z,B){return this._styleExpression.evaluateWithoutErrorHandling(r,h,f,C,z,B)}evaluate(r,h,f,C,z,B){return this._styleExpression.evaluate(r,h,f,C,z,B)}}class Pc{constructor(r,h,f,C){this.kind=r,this.zoomStops=f,this._styleExpression=h,this.isStateDependent=r!=="camera"&&!Sl(h.expression),this.interpolationType=C}evaluateWithoutErrorHandling(r,h,f,C,z,B){return this._styleExpression.evaluateWithoutErrorHandling(r,h,f,C,z,B)}evaluate(r,h,f,C,z,B){return this._styleExpression.evaluate(r,h,f,C,z,B)}interpolationFactor(r,h,f){return this.interpolationType?Ys.interpolationFactor(this.interpolationType,r,h,f):0}}function Xf(l,r){const h=Mc(l,r);if(h.result==="error")return h;const f=h.value.expression,C=Lh(f);if(!C&&!Pl(r))return Ml([new gt("","data expressions not supported")]);const z=wc(f,["zoom"]);if(!z&&!yn(r))return Ml([new gt("","zoom expressions not supported")]);const B=Wh(f);return B||z?B instanceof gt?Ml([B]):B instanceof Ys&&!Md(r)?Ml([new gt("",'"interpolate" expressions cannot be used with this property')]):qf(B?new Pc(C?"camera":"composite",h.value,B.labels,B instanceof Ys?B.interpolation:void 0):new Gh(C?"constant":"source",h.value)):Ml([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Hh{constructor(r,h){this._parameters=r,this._specification=h,et(this,Qr(this._parameters,this._specification))}static deserialize(r){return new Hh(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Wh(l){let r=null;if(l instanceof Fh)r=Wh(l.result);else if(l instanceof Bh){for(const h of l.args)if(r=Wh(h),r)break}else(l instanceof Ec||l instanceof Ys)&&l.input instanceof ji&&l.input.name==="zoom"&&(r=l);return r instanceof gt||l.eachChild(h=>{const f=Wh(h);f instanceof gt?r=f:!r&&f?r=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ca(l){const r=l.key,h=l.value,f=l.valueSpec||{},C=l.objectElementValidators||{},z=l.style,B=l.styleSpec;let te=[];const se=Ti(h);if(se!=="object")return[new je(r,h,`object expected, ${se} found`)];for(const be in h){const Re=be.split(".")[0],Oe=f[Re]||f["*"];let Ve;if(C[Re])Ve=C[Re];else if(f[Re])Ve=ps;else if(C["*"])Ve=C["*"];else{if(!f["*"]){te.push(new je(r,h[be],`unknown property "${be}"`));continue}Ve=ps}te=te.concat(Ve({key:(r&&`${r}.`)+be,value:h[be],valueSpec:Oe,style:z,styleSpec:B,object:h,objectKey:be},h))}for(const be in f)C[be]||f[be].required&&f[be].default===void 0&&h[be]===void 0&&te.push(new je(r,h,`missing required property "${be}"`));return te}function Kf(l){const r=l.value,h=l.valueSpec,f=l.style,C=l.styleSpec,z=l.key,B=l.arrayElementValidator||ps;if(Ti(r)!=="array")return[new je(z,r,`array expected, ${Ti(r)} found`)];if(h.length&&r.length!==h.length)return[new je(z,r,`array length ${h.length} expected, length ${r.length} found`)];if(h["min-length"]&&r.length<h["min-length"])return[new je(z,r,`array length at least ${h["min-length"]} expected, length ${r.length} found`)];let te={type:h.value,values:h.values};C.$version<7&&(te.function=h.function),Ti(h.value)==="object"&&(te=h.value);let se=[];for(let be=0;be<r.length;be++)se=se.concat(B({array:r,arrayIndex:be,value:r[be],valueSpec:te,style:f,styleSpec:C,key:`${z}[${be}]`}));return se}function Id(l){const r=l.key,h=l.value,f=l.valueSpec;let C=Ti(h);return C==="number"&&h!=h&&(C="NaN"),C!=="number"?[new je(r,h,`number expected, ${C} found`)]:"minimum"in f&&h<f.minimum?[new je(r,h,`${h} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&h>f.maximum?[new je(r,h,`${h} is greater than the maximum value ${f.maximum}`)]:[]}function Qf(l){const r=l.valueSpec,h=rt(l.value.type);let f,C,z,B={};const te=h!=="categorical"&&l.value.property===void 0,se=!te,be=Ti(l.value.stops)==="array"&&Ti(l.value.stops[0])==="array"&&Ti(l.value.stops[0][0])==="object",Re=Ca({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Ye){if(h==="identity")return[new je(Ye.key,Ye.value,'identity function may not have a "stops" property')];let Ze=[];const ht=Ye.value;return Ze=Ze.concat(Kf({key:Ye.key,value:ht,valueSpec:Ye.valueSpec,style:Ye.style,styleSpec:Ye.styleSpec,arrayElementValidator:Oe})),Ti(ht)==="array"&&ht.length===0&&Ze.push(new je(Ye.key,ht,"array must have at least one stop")),Ze},default:function(Ye){return ps({key:Ye.key,value:Ye.value,valueSpec:r,style:Ye.style,styleSpec:Ye.styleSpec})}}});return h==="identity"&&te&&Re.push(new je(l.key,l.value,'missing required property "property"')),h==="identity"||l.value.stops||Re.push(new je(l.key,l.value,'missing required property "stops"')),h==="exponential"&&l.valueSpec.expression&&!Md(l.valueSpec)&&Re.push(new je(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(se&&!Pl(l.valueSpec)?Re.push(new je(l.key,l.value,"property functions not supported")):te&&!yn(l.valueSpec)&&Re.push(new je(l.key,l.value,"zoom functions not supported"))),h!=="categorical"&&!be||l.value.property!==void 0||Re.push(new je(l.key,l.value,'"property" property is required')),Re;function Oe(Ye){let Ze=[];const ht=Ye.value,lt=Ye.key;if(Ti(ht)!=="array")return[new je(lt,ht,`array expected, ${Ti(ht)} found`)];if(ht.length!==2)return[new je(lt,ht,`array length 2 expected, length ${ht.length} found`)];if(be){if(Ti(ht[0])!=="object")return[new je(lt,ht,`object expected, ${Ti(ht[0])} found`)];if(ht[0].zoom===void 0)return[new je(lt,ht,"object stop key must have zoom")];if(ht[0].value===void 0)return[new je(lt,ht,"object stop key must have value")];if(z&&z>rt(ht[0].zoom))return[new je(lt,ht[0].zoom,"stop zoom values must appear in ascending order")];rt(ht[0].zoom)!==z&&(z=rt(ht[0].zoom),C=void 0,B={}),Ze=Ze.concat(Ca({key:`${lt}[0]`,value:ht[0],valueSpec:{zoom:{}},style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{zoom:Id,value:Ve}}))}else Ze=Ze.concat(Ve({key:`${lt}[0]`,value:ht[0],valueSpec:{},style:Ye.style,styleSpec:Ye.styleSpec},ht));return Ac(dt(ht[1]))?Ze.concat([new je(`${lt}[1]`,ht[1],"expressions are not allowed in function stops.")]):Ze.concat(ps({key:`${lt}[1]`,value:ht[1],valueSpec:r,style:Ye.style,styleSpec:Ye.styleSpec}))}function Ve(Ye,Ze){const ht=Ti(Ye.value),lt=rt(Ye.value),vt=Ye.value!==null?Ye.value:Ze;if(f){if(ht!==f)return[new je(Ye.key,vt,`${ht} stop domain type must match previous stop domain type ${f}`)]}else f=ht;if(ht!=="number"&&ht!=="string"&&ht!=="boolean")return[new je(Ye.key,vt,"stop domain value must be a number, string, or boolean")];if(ht!=="number"&&h!=="categorical"){let It=`number expected, ${ht} found`;return Pl(r)&&h===void 0&&(It+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(Ye.key,vt,It)]}return h!=="categorical"||ht!=="number"||isFinite(lt)&&Math.floor(lt)===lt?h!=="categorical"&&ht==="number"&&C!==void 0&&lt<C?[new je(Ye.key,vt,"stop domain values must appear in ascending order")]:(C=lt,h==="categorical"&&lt in B?[new je(Ye.key,vt,"stop domain values must be unique")]:(B[lt]=!0,[])):[new je(Ye.key,vt,`integer expected, found ${lt}`)]}}function Dl(l){const r=(l.expressionContext==="property"?Xf:Mc)(dt(l.value),l.valueSpec);if(r.result==="error")return r.value.map(f=>new je(`${l.key}${f.key}`,l.value,f.message));const h=r.value.expression||r.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!h.outputDefined())return[new je(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Sl(h))return[new je(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Sl(h))return[new je(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!wc(h,["zoom","feature-state"]))return[new je(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Lh(h))return[new je(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ic(l){const r=l.key,h=l.value,f=l.valueSpec,C=[];return Array.isArray(f.values)?f.values.indexOf(rt(h))===-1&&C.push(new je(r,h,`expected one of [${f.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(f.values).indexOf(rt(h))===-1&&C.push(new je(r,h,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(h)} found`)),C}function qh(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!qh(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Yh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dd(l){if(l==null)return{filter:()=>!0,needGeometry:!1};qh(l)||(l=Zh(l));const r=Mc(l,Yh);if(r.result==="error")throw new Error(r.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,f,C)=>r.value.evaluate(h,f,{},C),needGeometry:Rd(l)}}function Jf(l,r){return l<r?-1:l>r?1:0}function Rd(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(let r=1;r<l.length;r++)if(Rd(l[r]))return!0;return!1}function Zh(l){if(!l)return!0;const r=l[0];return l.length<=1?r!=="any":r==="=="?Xh(l[1],l[2],"=="):r==="!="?Yo(Xh(l[1],l[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Xh(l[1],l[2],r):r==="any"?(h=l.slice(1),["any"].concat(h.map(Zh))):r==="all"?["all"].concat(l.slice(1).map(Zh)):r==="none"?["all"].concat(l.slice(1).map(Zh).map(Yo)):r==="in"?em(l[1],l.slice(2)):r==="!in"?Yo(em(l[1],l.slice(2))):r==="has"?Kh(l[1]):r==="!has"?Yo(Kh(l[1])):r!=="within"||l;var h}function Xh(l,r,h){switch(l){case"$type":return[`filter-type-${h}`,r];case"$id":return[`filter-id-${h}`,r];default:return[`filter-${h}`,l,r]}}function em(l,r){if(r.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(h=>typeof h!=typeof r[0])?["filter-in-large",l,["literal",r.sort(Jf)]]:["filter-in-small",l,["literal",r]]}}function Kh(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Yo(l){return["!",l]}function Dc(l){return qh(dt(l.value))?Dl(et({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qh(l)}function Qh(l){const r=l.value,h=l.key;if(Ti(r)!=="array")return[new je(h,r,`array expected, ${Ti(r)} found`)];const f=l.styleSpec;let C,z=[];if(r.length<1)return[new je(h,r,"filter array must have at least 1 element")];switch(z=z.concat(Ic({key:`${h}[0]`,value:r[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),rt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&rt(r[1])==="$type"&&z.push(new je(h,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new je(h,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(C=Ti(r[1]),C!=="string"&&z.push(new je(`${h}[1]`,r[1],`string expected, ${C} found`)));for(let B=2;B<r.length;B++)C=Ti(r[B]),rt(r[1])==="$type"?z=z.concat(Ic({key:`${h}[${B}]`,value:r[B],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):C!=="string"&&C!=="number"&&C!=="boolean"&&z.push(new je(`${h}[${B}]`,r[B],`string, number, or boolean expected, ${C} found`));break;case"any":case"all":case"none":for(let B=1;B<r.length;B++)z=z.concat(Qh({key:`${h}[${B}]`,value:r[B],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":C=Ti(r[1]),r.length!==2?z.push(new je(h,r,`filter array for "${r[0]}" operator must have 2 elements`)):C!=="string"&&z.push(new je(`${h}[1]`,r[1],`string expected, ${C} found`));break;case"within":C=Ti(r[1]),r.length!==2?z.push(new je(h,r,`filter array for "${r[0]}" operator must have 2 elements`)):C!=="object"&&z.push(new je(`${h}[1]`,r[1],`object expected, ${C} found`))}return z}function tm(l,r){const h=l.key,f=l.style,C=l.styleSpec,z=l.value,B=l.objectKey,te=C[`${r}_${l.layerType}`];if(!te)return[];const se=B.match(/^(.*)-transition$/);if(r==="paint"&&se&&te[se[1]]&&te[se[1]].transition)return ps({key:h,value:z,valueSpec:C.transition,style:f,styleSpec:C});const be=l.valueSpec||te[B];if(!be)return[new je(h,z,`unknown property "${B}"`)];let Re;if(Ti(z)==="string"&&Pl(be)&&!be.tokens&&(Re=/^{([^}]+)}$/.exec(z)))return[new je(h,z,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Oe=[];return l.layerType==="symbol"&&(B==="text-field"&&f&&!f.glyphs&&Oe.push(new je(h,z,'use of "text-field" requires a style "glyphs" property')),B==="text-font"&&Il(dt(z))&&rt(z.type)==="identity"&&Oe.push(new je(h,z,'"text-font" does not support identity functions'))),Oe.concat(ps({key:l.key,value:z,valueSpec:be,style:f,styleSpec:C,expressionContext:"property",propertyType:r,propertyKey:B}))}function Rc(l){return tm(l,"paint")}function im(l){return tm(l,"layout")}function rm(l){let r=[];const h=l.value,f=l.key,C=l.style,z=l.styleSpec;h.type||h.ref||r.push(new je(f,h,'either "type" or "ref" is required'));let B=rt(h.type);const te=rt(h.ref);if(h.id){const se=rt(h.id);for(let be=0;be<l.arrayIndex;be++){const Re=C.layers[be];rt(Re.id)===se&&r.push(new je(f,h.id,`duplicate layer id "${h.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in h){let se;["type","source","source-layer","filter","layout"].forEach(be=>{be in h&&r.push(new je(f,h[be],`"${be}" is prohibited for ref layers`))}),C.layers.forEach(be=>{rt(be.id)===te&&(se=be)}),se?se.ref?r.push(new je(f,h.ref,"ref cannot reference another ref layer")):B=rt(se.type):r.push(new je(f,h.ref,`ref layer "${te}" not found`))}else if(B!=="background")if(h.source){const se=C.sources&&C.sources[h.source],be=se&&rt(se.type);se?be==="vector"&&B==="raster"?r.push(new je(f,h.source,`layer "${h.id}" requires a raster source`)):be==="raster"&&B!=="raster"?r.push(new je(f,h.source,`layer "${h.id}" requires a vector source`)):be!=="vector"||h["source-layer"]?be==="raster-dem"&&B!=="hillshade"?r.push(new je(f,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):B!=="line"||!h.paint||!h.paint["line-gradient"]||be==="geojson"&&se.lineMetrics||r.push(new je(f,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new je(f,h,`layer "${h.id}" must specify a "source-layer"`)):r.push(new je(f,h.source,`source "${h.source}" not found`))}else r.push(new je(f,h,'missing required property "source"'));return r=r.concat(Ca({key:f,value:h,valueSpec:z.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ps({key:`${f}.type`,value:h.type,valueSpec:z.layer.type,style:l.style,styleSpec:l.styleSpec,object:h,objectKey:"type"}),filter:Dc,layout:se=>Ca({layer:h,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":be=>im(et({layerType:B},be))}}),paint:se=>Ca({layer:h,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":be=>Rc(et({layerType:B},be))}})}})),r}function Rl(l){const r=l.value,h=l.key,f=Ti(r);return f!=="string"?[new je(h,r,`string expected, ${f} found`)]:[]}const nm={promoteId:function({key:l,value:r}){if(Ti(r)==="string")return Rl({key:l,value:r});{const h=[];for(const f in r)h.push(...Rl({key:`${l}.${f}`,value:r[f]}));return h}}};function sm(l){const r=l.value,h=l.key,f=l.styleSpec,C=l.style;if(!r.type)return[new je(h,r,'"type" is required')];const z=rt(r.type);let B;switch(z){case"vector":case"raster":case"raster-dem":return B=Ca({key:h,value:r,valueSpec:f[`source_${z.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:nm}),B;case"geojson":if(B=Ca({key:h,value:r,valueSpec:f.source_geojson,style:C,styleSpec:f,objectElementValidators:nm}),r.cluster)for(const te in r.clusterProperties){const[se,be]=r.clusterProperties[te],Re=typeof se=="string"?[se,["accumulated"],["get",te]]:se;B.push(...Dl({key:`${h}.${te}.map`,value:be,expressionContext:"cluster-map"})),B.push(...Dl({key:`${h}.${te}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return B;case"video":return Ca({key:h,value:r,valueSpec:f.source_video,style:C,styleSpec:f});case"image":return Ca({key:h,value:r,valueSpec:f.source_image,style:C,styleSpec:f});case"canvas":return[new je(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ic({key:`${h}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:C,styleSpec:f})}}function Lc(l){const r=l.value,h=l.styleSpec,f=h.light,C=l.style;let z=[];const B=Ti(r);if(r===void 0)return z;if(B!=="object")return z=z.concat([new je("light",r,`object expected, ${B} found`)]),z;for(const te in r){const se=te.match(/^(.*)-transition$/);z=z.concat(se&&f[se[1]]&&f[se[1]].transition?ps({key:te,value:r[te],valueSpec:h.transition,style:C,styleSpec:h}):f[te]?ps({key:te,value:r[te],valueSpec:f[te],style:C,styleSpec:h}):[new je(te,r[te],`unknown property "${te}"`)])}return z}function zc(l){const r=l.value,h=l.styleSpec,f=h.terrain,C=l.style;let z=[];const B=Ti(r);if(r===void 0)return z;if(B!=="object")return z=z.concat([new je("terrain",r,`object expected, ${B} found`)]),z;for(const te in r)z=z.concat(f[te]?ps({key:te,value:r[te],valueSpec:f[te],style:C,styleSpec:h}):[new je(te,r[te],`unknown property "${te}"`)]);return z}const Zs={"*":()=>[],array:Kf,boolean:function(l){const r=l.value,h=l.key,f=Ti(r);return f!=="boolean"?[new je(h,r,`boolean expected, ${f} found`)]:[]},number:Id,color:function(l){const r=l.key,h=l.value,f=Ti(h);return f!=="string"?[new je(r,h,`color expected, ${f} found`)]:bi(h)===null?[new je(r,h,`color expected, "${h}" found`)]:[]},constants:Xe,enum:Ic,filter:Dc,function:Qf,layer:rm,object:Ca,source:sm,light:Lc,terrain:zc,string:Rl,formatted:function(l){return Rl(l).length===0?[]:Dl(l)},resolvedImage:function(l){return Rl(l).length===0?[]:Dl(l)},padding:function(l){const r=l.key,h=l.value;if(Ti(h)==="array"){if(h.length<1||h.length>4)return[new je(r,h,`padding requires 1 to 4 values; ${h.length} values found`)];const f={type:"number"};let C=[];for(let z=0;z<h.length;z++)C=C.concat(ps({key:`${r}[${z}]`,value:h[z],valueSpec:f}));return C}return Id({key:r,value:h,valueSpec:{}})}};function ps(l){const r=l.value,h=l.valueSpec,f=l.styleSpec;return h.expression&&Il(rt(r))?Qf(l):h.expression&&Ac(dt(r))?Dl(l):h.type&&Zs[h.type]?Zs[h.type](l):Ca(et({},l,{valueSpec:h.type?f[h.type]:h}))}function qy(l){const r=l.value,h=l.key,f=Rl(l);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new je(h,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new je(h,r,'"glyphs" url must include a "{range}" token'))),f}function vo(l,r=Pe){let h=[];return h=h.concat(ps({key:"",value:l,valueSpec:r.$root,styleSpec:r,style:l,objectElementValidators:{glyphs:qy,"*":()=>[]}})),l.constants&&(h=h.concat(Xe({key:"constants",value:l.constants,style:l,styleSpec:r}))),am(h)}function am(l){return[].concat(l).sort((r,h)=>r.line-h.line)}function Zo(l){return function(...r){return am(l.apply(this,r))}}vo.source=Zo(sm),vo.light=Zo(Lc),vo.terrain=Zo(zc),vo.layer=Zo(rm),vo.filter=Zo(Dc),vo.paintProperty=Zo(Rc),vo.layoutProperty=Zo(im);const Xo=vo,Yy=Xo.light,Ld=Xo.paintProperty,Zy=Xo.layoutProperty;function om(l,r){let h=!1;if(r&&r.length)for(const f of r)l.fire(new Ae(new Error(f.message))),h=!0;return h}class Ko{constructor(r,h,f){const C=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const B=new Int32Array(this.arrayBuffer);r=B[0],this.d=(h=B[1])+2*(f=B[2]);for(let se=0;se<this.d*this.d;se++){const be=B[3+se],Re=B[3+se+1];C.push(be===Re?null:B.subarray(be,Re))}const te=B[3+C.length+1];this.keys=B.subarray(B[3+C.length],te),this.bboxes=B.subarray(te),this.insert=this._insertReadonly}else{this.d=h+2*f;for(let B=0;B<this.d*this.d;B++)C.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=r,this.padding=f,this.scale=h/r,this.uid=0;const z=f/h*r;this.min=-z,this.max=r+z}insert(r,h,f,C,z){this._forEachCell(h,f,C,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(C),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,h,f,C,z,B){this.cells[z].push(B)}query(r,h,f,C,z){const B=this.min,te=this.max;if(r<=B&&h<=B&&te<=f&&te<=C&&!z)return Array.prototype.slice.call(this.keys);{const se=[];return this._forEachCell(r,h,f,C,this._queryCell,se,{},z),se}}_queryCell(r,h,f,C,z,B,te,se){const be=this.cells[z];if(be!==null){const Re=this.keys,Oe=this.bboxes;for(let Ve=0;Ve<be.length;Ve++){const Ye=be[Ve];if(te[Ye]===void 0){const Ze=4*Ye;(se?se(Oe[Ze+0],Oe[Ze+1],Oe[Ze+2],Oe[Ze+3]):r<=Oe[Ze+2]&&h<=Oe[Ze+3]&&f>=Oe[Ze+0]&&C>=Oe[Ze+1])?(te[Ye]=!0,B.push(Re[Ye])):te[Ye]=!1}}}}_forEachCell(r,h,f,C,z,B,te,se){const be=this._convertToCellCoord(r),Re=this._convertToCellCoord(h),Oe=this._convertToCellCoord(f),Ve=this._convertToCellCoord(C);for(let Ye=be;Ye<=Oe;Ye++)for(let Ze=Re;Ze<=Ve;Ze++){const ht=this.d*Ze+Ye;if((!se||se(this._convertFromCellCoord(Ye),this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ye+1),this._convertFromCellCoord(Ze+1)))&&z.call(this,r,h,f,C,ht,B,te,se))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,h=3+this.cells.length+1+1;let f=0;for(let B=0;B<this.cells.length;B++)f+=this.cells[B].length;const C=new Int32Array(h+f+this.keys.length+this.bboxes.length);C[0]=this.extent,C[1]=this.n,C[2]=this.padding;let z=h;for(let B=0;B<r.length;B++){const te=r[B];C[3+B]=z,C.set(te,z),z+=te.length}return C[3+r.length]=z,C.set(this.keys,z),z+=this.keys.length,C[3+r.length+1]=z,C.set(this.bboxes,z),z+=this.bboxes.length,C.buffer}static serialize(r,h){const f=r.toArrayBuffer();return h&&h.push(f),{buffer:f}}static deserialize(r){return new Ko(r.buffer)}}const _o={};function fi(l,r,h={}){if(_o[l])throw new Error(`${l} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:l,writeable:!1}),_o[l]={klass:r,omit:h.omit||[],shallow:h.shallow||[]}}fi("Object",Object),fi("TransferableGridIndex",Ko),fi("Color",Ue),fi("Error",Error),fi("AJAXError",J),fi("ResolvedImage",nt),fi("StylePropertyFunction",Hh),fi("StyleExpression",Pd,{omit:["_evaluator"]}),fi("ZoomDependentExpression",Pc),fi("ZoomConstantExpression",Gh),fi("CompoundExpression",ji,{omit:["_evaluate"]});for(const l in Al)Al[l]._classRegistryKey||fi(`Expression_${l}`,Al[l]);function zd(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Nc(l,r){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(zd(l)||L(l))return r&&r.push(l),l;if(ArrayBuffer.isView(l)){const h=l;return r&&r.push(h.buffer),h}if(l instanceof ImageData)return r&&r.push(l.data.buffer),l;if(Array.isArray(l)){const h=[];for(const f of l)h.push(Nc(f,r));return h}if(typeof l=="object"){const h=l.constructor,f=h._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!_o[f])throw new Error(`${f} is not registered.`);const C=h.serialize?h.serialize(l,r):{};if(h.serialize){if(r&&C===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in l){if(!l.hasOwnProperty(z)||_o[f].omit.indexOf(z)>=0)continue;const B=l[z];C[z]=_o[f].shallow.indexOf(z)>=0?B:Nc(B,r)}l instanceof Error&&(C.message=l.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(C.$name=f),C}throw new Error("can't serialize object of type "+typeof l)}function Qo(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||zd(l)||L(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Qo);if(typeof l=="object"){const r=l.$name||"Object";if(!_o[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:h}=_o[r];if(!h)throw new Error(`can't deserialize unregistered class ${r}`);if(h.deserialize)return h.deserialize(l);const f=Object.create(h.prototype);for(const C of Object.keys(l)){if(C==="$name")continue;const z=l[C];f[C]=_o[r].shallow.indexOf(C)>=0?z:Qo(z)}return f}throw new Error("can't deserialize object of type "+typeof l)}class Oc{constructor(){this.first=!0}update(r,h){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=h),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}const ei={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Nd(l){for(const r of l)if(jc(r.charCodeAt(0)))return!0;return!1}function lm(l){for(const r of l)if(!Xy(r.charCodeAt(0)))return!1;return!0}function Xy(l){return!(ei.Arabic(l)||ei["Arabic Supplement"](l)||ei["Arabic Extended-A"](l)||ei["Arabic Presentation Forms-A"](l)||ei["Arabic Presentation Forms-B"](l))}function jc(l){return!(l!==746&&l!==747&&(l<4352||!(ei["Bopomofo Extended"](l)||ei.Bopomofo(l)||ei["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||ei["CJK Compatibility Ideographs"](l)||ei["CJK Compatibility"](l)||ei["CJK Radicals Supplement"](l)||ei["CJK Strokes"](l)||!(!ei["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||ei["CJK Unified Ideographs Extension A"](l)||ei["CJK Unified Ideographs"](l)||ei["Enclosed CJK Letters and Months"](l)||ei["Hangul Compatibility Jamo"](l)||ei["Hangul Jamo Extended-A"](l)||ei["Hangul Jamo Extended-B"](l)||ei["Hangul Jamo"](l)||ei["Hangul Syllables"](l)||ei.Hiragana(l)||ei["Ideographic Description Characters"](l)||ei.Kanbun(l)||ei["Kangxi Radicals"](l)||ei["Katakana Phonetic Extensions"](l)||ei.Katakana(l)&&l!==12540||!(!ei["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!ei["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||ei["Unified Canadian Aboriginal Syllabics"](l)||ei["Unified Canadian Aboriginal Syllabics Extended"](l)||ei["Vertical Forms"](l)||ei["Yijing Hexagram Symbols"](l)||ei["Yi Syllables"](l)||ei["Yi Radicals"](l))))}function cm(l){return!(jc(l)||function(r){return!!(ei["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||ei["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||ei["Letterlike Symbols"](r)||ei["Number Forms"](r)||ei["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||ei["Control Pictures"](r)&&r!==9251||ei["Optical Character Recognition"](r)||ei["Enclosed Alphanumerics"](r)||ei["Geometric Shapes"](r)||ei["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||ei["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||ei["CJK Symbols and Punctuation"](r)||ei.Katakana(r)||ei["Private Use Area"](r)||ei["CJK Compatibility Forms"](r)||ei["Small Form Variants"](r)||ei["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(l))}function hm(l){return l>=1424&&l<=2303||ei["Arabic Presentation Forms-A"](l)||ei["Arabic Presentation Forms-B"](l)}function Ky(l,r){return!(!r&&hm(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||ei.Khmer(l))}function Qy(l){for(const r of l)if(hm(r.charCodeAt(0)))return!0;return!1}const Jh="deferred",Od="loading",jd="loaded";let Bd=null,Os="unavailable",wo=null;const um=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(Os="error"),Bd&&Bd(l)};function Fd(){Ll.fire(new fe("pluginStateChange",{pluginStatus:Os,pluginURL:wo}))}const Ll=new De,Ud=function(){return Os},eu=function(){if(Os!==Jh||!wo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Os=Od,Fd(),wo&&_e({url:wo},l=>{l?um(l):(Os=jd,Fd())})},ga={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Os===jd||ga.applyArabicShaping!=null,isLoading:()=>Os===Od,setState(l){if(!q())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Os=l.pluginStatus,wo=l.pluginURL},isParsed(){if(!q())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ga.applyArabicShaping!=null&&ga.processBidirectionalText!=null&&ga.processStyledBidirectionalText!=null},getPluginURL(){if(!q())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return wo}};class sn{constructor(r,h){this.zoom=r,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oc,this.transition={})}isSupportedScript(r){return function(h,f){for(const C of h)if(!Ky(C.charCodeAt(0),f))return!1;return!0}(r,ga.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,h=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*h}}}class tu{constructor(r,h){this.property=r,this.value=h,this.expression=function(f,C){if(Il(f))return new Hh(f,C);if(Ac(f)){const z=Xf(f,C);if(z.result==="error")throw new Error(z.value.map(B=>`${B.key}: ${B.message}`).join(", "));return z.value}{let z=f;return C.type==="color"&&typeof f=="string"?z=Ue.parse(f):C.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(z=ot.parse(f)),{kind:"constant",evaluate:()=>z}}}(h===void 0?r.specification.default:h,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,h,f){return this.property.possiblyEvaluate(this,r,h,f)}}class iu{constructor(r){this.property=r,this.value=new tu(r,void 0)}transitioned(r,h){return new dm(this.property,this.value,h,_({},r.transition,this.transition),r.now)}untransitioned(){return new dm(this.property,this.value,null,{},0)}}class $d{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return P(this._values[r].value.value)}setValue(r,h){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new iu(this._values[r].property)),this._values[r].value=new tu(this._values[r].property,h===null?void 0:P(h))}getTransition(r){return P(this._values[r].transition)}setTransition(r,h){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new iu(this._values[r].property)),this._values[r].transition=P(h)||void 0}serialize(){const r={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(r[h]=f);const C=this.getTransition(h);C!==void 0&&(r[`${h}-transition`]=C)}return r}transitioned(r,h){const f=new pm(this._properties);for(const C of Object.keys(this._values))f._values[C]=this._values[C].transitioned(r,h._values[C]);return f}untransitioned(){const r=new pm(this._properties);for(const h of Object.keys(this._values))r._values[h]=this._values[h].untransitioned();return r}}class dm{constructor(r,h,f,C,z){this.property=r,this.value=h,this.begin=z+C.delay||0,this.end=this.begin+C.duration||0,r.specification.transition&&(C.delay||C.duration)&&(this.prior=f)}possiblyEvaluate(r,h,f){const C=r.now||0,z=this.value.possiblyEvaluate(r,h,f),B=this.prior;if(B){if(C>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(C<this.begin)return B.possiblyEvaluate(r,h,f);{const te=(C-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(r,h,f),z,function(se){if(se<=0)return 0;if(se>=1)return 1;const be=se*se,Re=be*se;return 4*(se<.5?Re:3*(se-be)+Re-.75)}(te))}}return z}}class pm{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,h,f){const C=new ru(this._properties);for(const z of Object.keys(this._values))C._values[z]=this._values[z].possiblyEvaluate(r,h,f);return C}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Jy{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return P(this._values[r].value)}setValue(r,h){this._values[r]=new tu(this._values[r].property,h===null?void 0:P(h))}serialize(){const r={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(r[h]=f)}return r}possiblyEvaluate(r,h,f){const C=new ru(this._properties);for(const z of Object.keys(this._values))C._values[z]=this._values[z].possiblyEvaluate(r,h,f);return C}}class Va{constructor(r,h,f){this.property=r,this.value=h,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,h,f,C){return this.property.evaluate(this.value,this.parameters,r,h,f,C)}}class ru{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Si{constructor(r){this.specification=r}possiblyEvaluate(r,h){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(h)}interpolate(r,h,f){const C=Cc[this.specification.type];return C?C(r,h,f):r}}class Di{constructor(r,h){this.specification=r,this.overrides=h}possiblyEvaluate(r,h,f,C){return new Va(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(h,null,{},f,C)}:r.expression,h)}interpolate(r,h,f){if(r.value.kind!=="constant"||h.value.kind!=="constant")return r;if(r.value.value===void 0||h.value.value===void 0)return new Va(this,{kind:"constant",value:void 0},r.parameters);const C=Cc[this.specification.type];return C?new Va(this,{kind:"constant",value:C(r.value.value,h.value.value,f)},r.parameters):r}evaluate(r,h,f,C,z,B){return r.kind==="constant"?r.value:r.evaluate(h,f,C,z,B)}}class Bc extends Di{possiblyEvaluate(r,h,f,C){if(r.value===void 0)return new Va(this,{kind:"constant",value:void 0},h);if(r.expression.kind==="constant"){const z=r.expression.evaluate(h,null,{},f,C),B=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,te=this._calculate(B,B,B,h);return new Va(this,{kind:"constant",value:te},h)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:h.zoom-1}),r.expression.evaluate({zoom:h.zoom}),r.expression.evaluate({zoom:h.zoom+1}),h);return new Va(this,{kind:"constant",value:z},h)}return new Va(this,r.expression,h)}evaluate(r,h,f,C,z,B){if(r.kind==="source"){const te=r.evaluate(h,f,C,z,B);return this._calculate(te,te,te,h)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(h.zoom)-1},f,C),r.evaluate({zoom:Math.floor(h.zoom)},f,C),r.evaluate({zoom:Math.floor(h.zoom)+1},f,C),h):r.value}_calculate(r,h,f,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:r,to:h}:{from:f,to:h}}interpolate(r){return r}}class Fc{constructor(r){this.specification=r}possiblyEvaluate(r,h,f,C){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(h,null,{},f,C);return this._calculate(z,z,z,h)}return this._calculate(r.expression.evaluate(new sn(Math.floor(h.zoom-1),h)),r.expression.evaluate(new sn(Math.floor(h.zoom),h)),r.expression.evaluate(new sn(Math.floor(h.zoom+1),h)),h)}}_calculate(r,h,f,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:r,to:h}:{from:f,to:h}}interpolate(r){return r}}class Vd{constructor(r){this.specification=r}possiblyEvaluate(r,h,f,C){return!!r.expression.evaluate(h,null,{},f,C)}interpolate(){return!1}}class Bn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in r){const f=r[h];f.specification.overridable&&this.overridableProperties.push(h);const C=this.defaultPropertyValues[h]=new tu(f,void 0),z=this.defaultTransitionablePropertyValues[h]=new iu(f);this.defaultTransitioningPropertyValues[h]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=C.possiblyEvaluate({})}}}fi("DataDrivenProperty",Di),fi("DataConstantProperty",Si),fi("CrossFadedDataDrivenProperty",Bc),fi("CrossFadedProperty",Fc),fi("ColorRampProperty",Vd);const Jo="-transition";class js extends De{constructor(r,h){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),h.layout&&(this._unevaluatedLayout=new Jy(h.layout)),h.paint)){this._transitionablePaint=new $d(h.paint);for(const f in r.paint)this.setPaintProperty(f,r.paint[f],{validate:!1});for(const f in r.layout)this.setLayoutProperty(f,r.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,h,f={}){h!=null&&this._validate(Zy,`layers.${this.id}.layout.${r}`,r,h,f)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,h):this.visibility=h)}getPaintProperty(r){return r.endsWith(Jo)?this._transitionablePaint.getTransition(r.slice(0,-Jo.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,h,f={}){if(h!=null&&this._validate(Ld,`layers.${this.id}.paint.${r}`,r,h,f))return!1;if(r.endsWith(Jo))return this._transitionablePaint.setTransition(r.slice(0,-Jo.length),h||void 0),!1;{const C=this._transitionablePaint._values[r],z=C.property.specification["property-type"]==="cross-faded-data-driven",B=C.value.isDataDriven(),te=C.value;this._transitionablePaint.setValue(r,h),this._handleSpecialPaintPropertyUpdate(r);const se=this._transitionablePaint._values[r].value;return se.isDataDriven()||B||z||this._handleOverridablePaintPropertyUpdate(r,te,se)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,h,f){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,h){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,h)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),x(r,(h,f)=>!(h===void 0||f==="layout"&&!Object.keys(h).length||f==="paint"&&!Object.keys(h).length))}_validate(r,h,f,C,z={}){return(!z||z.validate!==!1)&&om(this,r.call(Xo,{key:h,layerType:this.type,objectKey:f,value:C,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const h=this.paint.get(r);if(h instanceof Va&&Pl(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const ex={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Uc{constructor(r,h){this._structArray=r,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,h){return r._trim(),h&&(r.isTransferred=!0,h.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const h=Object.create(this.prototype);return h.arrayBuffer=r.arrayBuffer,h.length=r.length,h.capacity=r.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Rn(l,r=1){let h=0,f=0;return{members:l.map(C=>{const z=ex[C.type].BYTES_PER_ELEMENT,B=h=fm(h,Math.max(r,z)),te=C.components||1;return f=Math.max(f,z),h+=z*te,{name:C.name,type:C.type,components:te,offset:B}}),size:fm(h,Math.max(f,r)),alignment:r}}function fm(l,r){return Math.ceil(l/r)*r}class zl extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h){const f=this.length;return this.resize(f+1),this.emplace(f,r,h)}emplace(r,h,f){const C=2*r;return this.int16[C+0]=h,this.int16[C+1]=f,r}}zl.prototype.bytesPerElement=4,fi("StructArrayLayout2i4",zl);class $c extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f,C){const z=this.length;return this.resize(z+1),this.emplace(z,r,h,f,C)}emplace(r,h,f,C,z){const B=4*r;return this.int16[B+0]=h,this.int16[B+1]=f,this.int16[B+2]=C,this.int16[B+3]=z,r}}$c.prototype.bytesPerElement=8,fi("StructArrayLayout4i8",$c);class E extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B){const te=this.length;return this.resize(te+1),this.emplace(te,r,h,f,C,z,B)}emplace(r,h,f,C,z,B,te){const se=6*r;return this.int16[se+0]=h,this.int16[se+1]=f,this.int16[se+2]=C,this.int16[se+3]=z,this.int16[se+4]=B,this.int16[se+5]=te,r}}E.prototype.bytesPerElement=12,fi("StructArrayLayout2i4i12",E);class s extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B){const te=this.length;return this.resize(te+1),this.emplace(te,r,h,f,C,z,B)}emplace(r,h,f,C,z,B,te){const se=4*r,be=8*r;return this.int16[se+0]=h,this.int16[se+1]=f,this.uint8[be+4]=C,this.uint8[be+5]=z,this.uint8[be+6]=B,this.uint8[be+7]=te,r}}s.prototype.bytesPerElement=8,fi("StructArrayLayout2i4ub8",s);class d extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h){const f=this.length;return this.resize(f+1),this.emplace(f,r,h)}emplace(r,h,f){const C=2*r;return this.float32[C+0]=h,this.float32[C+1]=f,r}}d.prototype.bytesPerElement=8,fi("StructArrayLayout2f8",d);class b extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B,te,se,be,Re){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,r,h,f,C,z,B,te,se,be,Re)}emplace(r,h,f,C,z,B,te,se,be,Re,Oe){const Ve=10*r;return this.uint16[Ve+0]=h,this.uint16[Ve+1]=f,this.uint16[Ve+2]=C,this.uint16[Ve+3]=z,this.uint16[Ve+4]=B,this.uint16[Ve+5]=te,this.uint16[Ve+6]=se,this.uint16[Ve+7]=be,this.uint16[Ve+8]=Re,this.uint16[Ve+9]=Oe,r}}b.prototype.bytesPerElement=20,fi("StructArrayLayout10ui20",b);class S extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B,te,se,be,Re,Oe,Ve){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,r,h,f,C,z,B,te,se,be,Re,Oe,Ve)}emplace(r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye){const Ze=12*r;return this.int16[Ze+0]=h,this.int16[Ze+1]=f,this.int16[Ze+2]=C,this.int16[Ze+3]=z,this.uint16[Ze+4]=B,this.uint16[Ze+5]=te,this.uint16[Ze+6]=se,this.uint16[Ze+7]=be,this.int16[Ze+8]=Re,this.int16[Ze+9]=Oe,this.int16[Ze+10]=Ve,this.int16[Ze+11]=Ye,r}}S.prototype.bytesPerElement=24,fi("StructArrayLayout4i4ui4i24",S);class O extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h,f){const C=this.length;return this.resize(C+1),this.emplace(C,r,h,f)}emplace(r,h,f,C){const z=3*r;return this.float32[z+0]=h,this.float32[z+1]=f,this.float32[z+2]=C,r}}O.prototype.bytesPerElement=12,fi("StructArrayLayout3f12",O);class ee extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const h=this.length;return this.resize(h+1),this.emplace(h,r)}emplace(r,h){return this.uint32[1*r+0]=h,r}}ee.prototype.bytesPerElement=4,fi("StructArrayLayout1ul4",ee);class le extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B,te,se,be){const Re=this.length;return this.resize(Re+1),this.emplace(Re,r,h,f,C,z,B,te,se,be)}emplace(r,h,f,C,z,B,te,se,be,Re){const Oe=10*r,Ve=5*r;return this.int16[Oe+0]=h,this.int16[Oe+1]=f,this.int16[Oe+2]=C,this.int16[Oe+3]=z,this.int16[Oe+4]=B,this.int16[Oe+5]=te,this.uint32[Ve+3]=se,this.uint16[Oe+8]=be,this.uint16[Oe+9]=Re,r}}le.prototype.bytesPerElement=20,fi("StructArrayLayout6i1ul2ui20",le);class de extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B){const te=this.length;return this.resize(te+1),this.emplace(te,r,h,f,C,z,B)}emplace(r,h,f,C,z,B,te){const se=6*r;return this.int16[se+0]=h,this.int16[se+1]=f,this.int16[se+2]=C,this.int16[se+3]=z,this.int16[se+4]=B,this.int16[se+5]=te,r}}de.prototype.bytesPerElement=12,fi("StructArrayLayout2i2i2i12",de);class Ee extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z){const B=this.length;return this.resize(B+1),this.emplace(B,r,h,f,C,z)}emplace(r,h,f,C,z,B){const te=4*r,se=8*r;return this.float32[te+0]=h,this.float32[te+1]=f,this.float32[te+2]=C,this.int16[se+6]=z,this.int16[se+7]=B,r}}Ee.prototype.bytesPerElement=16,fi("StructArrayLayout2f1f2i16",Ee);class Ne extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h,f,C){const z=this.length;return this.resize(z+1),this.emplace(z,r,h,f,C)}emplace(r,h,f,C,z){const B=12*r,te=3*r;return this.uint8[B+0]=h,this.uint8[B+1]=f,this.float32[te+1]=C,this.float32[te+2]=z,r}}Ne.prototype.bytesPerElement=12,fi("StructArrayLayout2ub2f12",Ne);class Fe extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h,f){const C=this.length;return this.resize(C+1),this.emplace(C,r,h,f)}emplace(r,h,f,C){const z=3*r;return this.uint16[z+0]=h,this.uint16[z+1]=f,this.uint16[z+2]=C,r}}Fe.prototype.bytesPerElement=6,fi("StructArrayLayout3ui6",Fe);class qe extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt){const It=this.length;return this.resize(It+1),this.emplace(It,r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt)}emplace(r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt,It){const xt=24*r,Mt=12*r,Ut=48*r;return this.int16[xt+0]=h,this.int16[xt+1]=f,this.uint16[xt+2]=C,this.uint16[xt+3]=z,this.uint32[Mt+2]=B,this.uint32[Mt+3]=te,this.uint32[Mt+4]=se,this.uint16[xt+10]=be,this.uint16[xt+11]=Re,this.uint16[xt+12]=Oe,this.float32[Mt+7]=Ve,this.float32[Mt+8]=Ye,this.uint8[Ut+36]=Ze,this.uint8[Ut+37]=ht,this.uint8[Ut+38]=lt,this.uint32[Mt+10]=vt,this.int16[xt+22]=It,r}}qe.prototype.bytesPerElement=48,fi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);class tt extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt,It,xt,Mt,Ut,Ft,xi,Ei,ti,Xt,Yt,ii){const Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt,It,xt,Mt,Ut,Ft,xi,Ei,ti,Xt,Yt,ii)}emplace(r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht,lt,vt,It,xt,Mt,Ut,Ft,xi,Ei,ti,Xt,Yt,ii,Qt){const Vt=34*r,Mi=17*r;return this.int16[Vt+0]=h,this.int16[Vt+1]=f,this.int16[Vt+2]=C,this.int16[Vt+3]=z,this.int16[Vt+4]=B,this.int16[Vt+5]=te,this.int16[Vt+6]=se,this.int16[Vt+7]=be,this.uint16[Vt+8]=Re,this.uint16[Vt+9]=Oe,this.uint16[Vt+10]=Ve,this.uint16[Vt+11]=Ye,this.uint16[Vt+12]=Ze,this.uint16[Vt+13]=ht,this.uint16[Vt+14]=lt,this.uint16[Vt+15]=vt,this.uint16[Vt+16]=It,this.uint16[Vt+17]=xt,this.uint16[Vt+18]=Mt,this.uint16[Vt+19]=Ut,this.uint16[Vt+20]=Ft,this.uint16[Vt+21]=xi,this.uint16[Vt+22]=Ei,this.uint32[Mi+12]=ti,this.float32[Mi+13]=Xt,this.float32[Mi+14]=Yt,this.float32[Mi+15]=ii,this.float32[Mi+16]=Qt,r}}tt.prototype.bytesPerElement=68,fi("StructArrayLayout8i15ui1ul4f68",tt);class Qe extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const h=this.length;return this.resize(h+1),this.emplace(h,r)}emplace(r,h){return this.float32[1*r+0]=h,r}}Qe.prototype.bytesPerElement=4,fi("StructArrayLayout1f4",Qe);class Je extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,h,f){const C=this.length;return this.resize(C+1),this.emplace(C,r,h,f)}emplace(r,h,f,C){const z=3*r;return this.int16[z+0]=h,this.int16[z+1]=f,this.int16[z+2]=C,r}}Je.prototype.bytesPerElement=6,fi("StructArrayLayout3i6",Je);class pt extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h,f){const C=this.length;return this.resize(C+1),this.emplace(C,r,h,f)}emplace(r,h,f,C){const z=4*r;return this.uint32[2*r+0]=h,this.uint16[z+2]=f,this.uint16[z+3]=C,r}}pt.prototype.bytesPerElement=8,fi("StructArrayLayout1ul2ui8",pt);class yt extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,h){const f=this.length;return this.resize(f+1),this.emplace(f,r,h)}emplace(r,h,f){const C=2*r;return this.uint16[C+0]=h,this.uint16[C+1]=f,r}}yt.prototype.bytesPerElement=4,fi("StructArrayLayout2ui4",yt);class _t extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const h=this.length;return this.resize(h+1),this.emplace(h,r)}emplace(r,h){return this.uint16[1*r+0]=h,r}}_t.prototype.bytesPerElement=2,fi("StructArrayLayout1ui2",_t);class at extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,h,f,C){const z=this.length;return this.resize(z+1),this.emplace(z,r,h,f,C)}emplace(r,h,f,C,z){const B=4*r;return this.float32[B+0]=h,this.float32[B+1]=f,this.float32[B+2]=C,this.float32[B+3]=z,r}}at.prototype.bytesPerElement=16,fi("StructArrayLayout4f16",at);class At extends Uc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}At.prototype.size=20;class Et extends le{get(r){return new At(this,r)}}fi("CollisionBoxArray",Et);class Nt extends Uc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Nt.prototype.size=48;class Ot extends qe{get(r){return new Nt(this,r)}}fi("PlacedSymbolArray",Ot);class $t extends Uc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}$t.prototype.size=68;class Lt extends tt{get(r){return new $t(this,r)}}fi("SymbolInstanceArray",Lt);class ai extends Qe{getoffsetX(r){return this.float32[1*r+0]}}fi("GlyphOffsetArray",ai);class Zt extends Je{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}fi("SymbolLineVertexArray",Zt);class li extends Uc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class Xi extends pt{get(r){return new li(this,r)}}fi("FeatureIndexArray",Xi);class or extends zl{}class Ii extends zl{}class Or extends zl{}class jr extends E{}class xr extends s{}class vr extends d{}class Tr extends b{}class Xs extends S{}class Ga extends O{}class Sa extends ee{}class ka extends de{}class el extends Ne{}class is extends Fe{}class Aa extends yt{}const tl=Rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:nu}=tl;class Er{constructor(r=[]){this.segments=r}prepareSegment(r,h,f,C){let z=this.segments[this.segments.length-1];return r>Er.MAX_VERTEX_ARRAY_LENGTH&&w(`Max vertices per segment is ${Er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>Er.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==C)&&(z={vertexOffset:h.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},C!==void 0&&(z.sortKey=C),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const h in r.vaos)r.vaos[h].destroy()}static simpleSegment(r,h,f,C){return new Er([{vertexOffset:r,primitiveOffset:h,vertexLength:f,primitiveLength:C,vaos:{},sortKey:0}])}}function en(l,r){return 256*(l=y(Math.floor(l),0,255))+y(Math.floor(r),0,255)}Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fi("SegmentVector",Er);const Sr=Rn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ln={exports:{}},Bs={exports:{}};Bs.exports=function(l,r){var h,f,C,z,B,te,se,be;for(f=l.length-(h=3&l.length),C=r,B=3432918353,te=461845907,be=0;be<f;)se=255&l.charCodeAt(be)|(255&l.charCodeAt(++be))<<8|(255&l.charCodeAt(++be))<<16|(255&l.charCodeAt(++be))<<24,++be,C=27492+(65535&(z=5*(65535&(C=(C^=se=(65535&(se=(se=(65535&se)*B+(((se>>>16)*B&65535)<<16)&4294967295)<<15|se>>>17))*te+(((se>>>16)*te&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(se=0,h){case 3:se^=(255&l.charCodeAt(be+2))<<16;case 2:se^=(255&l.charCodeAt(be+1))<<8;case 1:C^=se=(65535&(se=(se=(65535&(se^=255&l.charCodeAt(be)))*B+(((se>>>16)*B&65535)<<16)&4294967295)<<15|se>>>17))*te+(((se>>>16)*te&65535)<<16)&4294967295}return C^=l.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0};var an={exports:{}};an.exports=function(l,r){for(var h,f=l.length,C=r^f,z=0;f>=4;)h=1540483477*(65535&(h=255&l.charCodeAt(z)|(255&l.charCodeAt(++z))<<8|(255&l.charCodeAt(++z))<<16|(255&l.charCodeAt(++z))<<24))+((1540483477*(h>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),f-=4,++z;switch(f){case 3:C^=(255&l.charCodeAt(z+2))<<16;case 2:C^=(255&l.charCodeAt(z+1))<<8;case 1:C=1540483477*(65535&(C^=255&l.charCodeAt(z)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0};var ya=Bs.exports,Nl=an.exports;Ln.exports=ya,Ln.exports.murmur3=ya,Ln.exports.murmur2=Nl;class Ol{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,h,f,C){this.ids.push(su(r)),this.positions.push(h,f,C)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=su(r);let f=0,C=this.ids.length-1;for(;f<C;){const B=f+C>>1;this.ids[B]>=h?C=B:f=B+1}const z=[];for(;this.ids[f]===h;)z.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return z}static serialize(r,h){const f=new Float64Array(r.ids),C=new Uint32Array(r.positions);return Gd(f,C,0,f.length-1),h&&h.push(f.buffer,C.buffer),{ids:f,positions:C}}static deserialize(r){const h=new Ol;return h.ids=r.ids,h.positions=r.positions,h.indexed=!0,h}}function su(l){const r=+l;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Ln.exports(String(l))}function Gd(l,r,h,f){for(;h<f;){const C=l[h+f>>1];let z=h-1,B=f+1;for(;;){do z++;while(l[z]<C);do B--;while(l[B]>C);if(z>=B)break;au(l,z,B),au(r,3*z,3*B),au(r,3*z+1,3*B+1),au(r,3*z+2,3*B+2)}B-h<f-B?(Gd(l,r,h,B),h=B+1):(Gd(l,r,B+1,f),f=B)}}function au(l,r,h){const f=l[r];l[r]=l[h],l[h]=f}fi("FeaturePositionMap",Ol);class Ma{constructor(r,h){this.gl=r.gl,this.location=h}}class ou extends Ma{constructor(r,h){super(r,h),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Vc extends Ma{constructor(r,h){super(r,h),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class lu extends Ma{constructor(r,h){super(r,h),this.current=Ue.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ak=new Float32Array(16);function tx(l){return[en(255*l.r,255*l.g),en(255*l.b,255*l.a)]}class Hd{constructor(r,h,f){this.value=r,this.uniformNames=h.map(C=>`u_${C}`),this.type=f}setUniform(r,h,f){r.set(f.constantOr(this.value))}getBinding(r,h,f){return this.type==="color"?new lu(r,h):new ou(r,h)}}class cu{constructor(r,h){this.uniformNames=h.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=r.tlbr}setUniform(r,h,f,C){const z=C==="u_pattern_to"?this.patternTo:C==="u_pattern_from"?this.patternFrom:C==="u_pixel_ratio_to"?this.pixelRatioTo:C==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,h,f){return f.substr(0,9)==="u_pattern"?new Vc(r,h):new ou(r,h)}}class il{constructor(r,h,f,C){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=h.map(z=>({name:`a_${z}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new C}populatePaintArray(r,h,f,C,z){const B=this.paintVertexArray.length,te=this.expression.evaluate(new sn(0),h,{},C,[],z);this.paintVertexArray.resize(r),this._setPaintValue(B,r,te)}updatePaintArray(r,h,f,C){const z=this.expression.evaluate({zoom:0},f,C);this._setPaintValue(r,h,z)}_setPaintValue(r,h,f){if(this.type==="color"){const C=tx(f);for(let z=r;z<h;z++)this.paintVertexArray.emplace(z,C[0],C[1])}else{for(let C=r;C<h;C++)this.paintVertexArray.emplace(C,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ja{constructor(r,h,f,C,z,B){this.expression=r,this.uniformNames=h.map(te=>`u_${te}_t`),this.type=f,this.useIntegerZoom=C,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=h.map(te=>({name:`a_${te}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(r,h,f,C,z){const B=this.expression.evaluate(new sn(this.zoom),h,{},C,[],z),te=this.expression.evaluate(new sn(this.zoom+1),h,{},C,[],z),se=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(se,r,B,te)}updatePaintArray(r,h,f,C){const z=this.expression.evaluate({zoom:this.zoom},f,C),B=this.expression.evaluate({zoom:this.zoom+1},f,C);this._setPaintValue(r,h,z,B)}_setPaintValue(r,h,f,C){if(this.type==="color"){const z=tx(f),B=tx(C);for(let te=r;te<h;te++)this.paintVertexArray.emplace(te,z[0],z[1],B[0],B[1])}else{for(let z=r;z<h;z++)this.paintVertexArray.emplace(z,f,C);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(C))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,h){const f=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,C=y(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(C)}getBinding(r,h,f){return new ou(r,h)}}class jl{constructor(r,h,f,C,z,B){this.expression=r,this.type=h,this.useIntegerZoom=f,this.zoom=C,this.layerId=B,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,h,f){const C=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(C,r,h.patterns&&h.patterns[this.layerId],f)}updatePaintArray(r,h,f,C,z){this._setPaintValues(r,h,f.patterns&&f.patterns[this.layerId],z)}_setPaintValues(r,h,f,C){if(!C||!f)return;const{min:z,mid:B,max:te}=f,se=C[z],be=C[B],Re=C[te];if(se&&be&&Re)for(let Oe=r;Oe<h;Oe++)this.zoomInPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],se.tl[0],se.tl[1],se.br[0],se.br[1],be.pixelRatio,se.pixelRatio),this.zoomOutPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],be.pixelRatio,Re.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Sr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Sr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class B0{constructor(r,h,f){this.binders={},this._buffers=[];const C=[];for(const z in r.paint._values){if(!f(z))continue;const B=r.paint.get(z);if(!(B instanceof Va&&Pl(B.property.specification)))continue;const te=ok(z,r.type),se=B.value,be=B.property.specification.type,Re=B.property.useIntegerZoom,Oe=B.property.specification["property-type"],Ve=Oe==="cross-faded"||Oe==="cross-faded-data-driven";if(se.kind==="constant")this.binders[z]=Ve?new cu(se.value,te):new Hd(se.value,te,be),C.push(`/u_${z}`);else if(se.kind==="source"||Ve){const Ye=F0(z,be,"source");this.binders[z]=Ve?new jl(se,be,Re,h,Ye,r.id):new il(se,te,be,Ye),C.push(`/a_${z}`)}else{const Ye=F0(z,be,"composite");this.binders[z]=new Ja(se,te,be,Re,h,Ye),C.push(`/z_${z}`)}}this.cacheKey=C.sort().join("")}getMaxValue(r){const h=this.binders[r];return h instanceof il||h instanceof Ja?h.maxValue:0}populatePaintArrays(r,h,f,C,z){for(const B in this.binders){const te=this.binders[B];(te instanceof il||te instanceof Ja||te instanceof jl)&&te.populatePaintArray(r,h,f,C,z)}}setConstantPatternPositions(r,h){for(const f in this.binders){const C=this.binders[f];C instanceof cu&&C.setConstantPatternPositions(r,h)}}updatePaintArrays(r,h,f,C,z){let B=!1;for(const te in r){const se=h.getPositions(te);for(const be of se){const Re=f.feature(be.index);for(const Oe in this.binders){const Ve=this.binders[Oe];if((Ve instanceof il||Ve instanceof Ja||Ve instanceof jl)&&Ve.expression.isStateDependent===!0){const Ye=C.paint.get(Oe);Ve.expression=Ye.value,Ve.updatePaintArray(be.start,be.end,Re,r[te],z),B=!0}}}}return B}defines(){const r=[];for(const h in this.binders){const f=this.binders[h];(f instanceof Hd||f instanceof cu)&&r.push(...f.uniformNames.map(C=>`#define HAS_UNIFORM_${C}`))}return r}getBinderAttributes(){const r=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof il||f instanceof Ja)for(let C=0;C<f.paintVertexAttributes.length;C++)r.push(f.paintVertexAttributes[C].name);else if(f instanceof jl)for(let C=0;C<Sr.members.length;C++)r.push(Sr.members[C].name)}return r}getBinderUniforms(){const r=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof Hd||f instanceof cu||f instanceof Ja)for(const C of f.uniformNames)r.push(C)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,h){const f=[];for(const C in this.binders){const z=this.binders[C];if(z instanceof Hd||z instanceof cu||z instanceof Ja){for(const B of z.uniformNames)if(h[B]){const te=z.getBinding(r,h[B],B);f.push({name:B,property:C,binding:te})}}}return f}setUniforms(r,h,f,C){for(const{name:z,property:B,binding:te}of h)this.binders[B].setUniform(te,C,f.get(B),z)}updatePaintBuffers(r){this._buffers=[];for(const h in this.binders){const f=this.binders[h];if(r&&f instanceof jl){const C=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;C&&this._buffers.push(C)}else(f instanceof il||f instanceof Ja)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const h in this.binders){const f=this.binders[h];(f instanceof il||f instanceof Ja||f instanceof jl)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const h=this.binders[r];(h instanceof il||h instanceof Ja||h instanceof jl)&&h.destroy()}}}class Gc{constructor(r,h,f=()=>!0){this.programConfigurations={};for(const C of r)this.programConfigurations[C.id]=new B0(C,h,f);this.needsUpload=!1,this._featureMap=new Ol,this._bufferOffset=0}populatePaintArrays(r,h,f,C,z,B){for(const te in this.programConfigurations)this.programConfigurations[te].populatePaintArrays(r,h,C,z,B);h.id!==void 0&&this._featureMap.add(h.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,h,f,C){for(const z of f)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,h,z,C)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function ok(l,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}function F0(l,r,h){const f={color:{source:d,composite:at},number:{source:Qe,composite:d}},C=function(z){return{"line-pattern":{source:Tr,composite:Tr},"fill-pattern":{source:Tr,composite:Tr},"fill-extrusion-pattern":{source:Tr,composite:Tr}}[z]}(l);return C&&C[h]||f[r][h]}fi("ConstantBinder",Hd),fi("CrossFadedConstantBinder",cu),fi("SourceExpressionBinder",il),fi("CrossFadedCompositeBinder",jl),fi("CompositeExpressionBinder",Ja),fi("ProgramConfiguration",B0,{omit:["_buffers"]}),fi("ProgramConfigurationSet",Gc);var Fn=8192;const ix=Math.pow(2,14)-1,U0=-ix-1;function Hc(l){const r=Fn/l.extent,h=l.loadGeometry();for(let f=0;f<h.length;f++){const C=h[f];for(let z=0;z<C.length;z++){const B=C[z],te=Math.round(B.x*r),se=Math.round(B.y*r);B.x=y(te,U0,ix),B.y=y(se,U0,ix),(te<B.x||te>B.x+1||se<B.y||se>B.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Wc(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?Hc(l):[]}}function mm(l,r,h,f,C){l.emplaceBack(2*r+(f+1)/2,2*h+(C+1)/2)}class rx{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(h=>h.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new is,this.segments=new Er,this.programConfigurations=new Gc(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(r,h,f){const C=this.layers[0],z=[];let B=null,te=!1;C.type==="circle"&&(B=C.layout.get("circle-sort-key"),te=!B.isConstant());for(const{feature:se,id:be,index:Re,sourceLayerIndex:Oe}of r){const Ve=this.layers[0]._featureFilter.needGeometry,Ye=Wc(se,Ve);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom),Ye,f))continue;const Ze=te?B.evaluate(Ye,{},f):void 0,ht={id:be,properties:se.properties,type:se.type,sourceLayerIndex:Oe,index:Re,geometry:Ve?Ye.geometry:Hc(se),patterns:{},sortKey:Ze};z.push(ht)}te&&z.sort((se,be)=>se.sortKey-be.sortKey);for(const se of z){const{geometry:be,index:Re,sourceLayerIndex:Oe}=se,Ve=r[Re].feature;this.addFeature(se,be,Re,f),h.featureIndex.insert(Ve,be,Re,Oe,this.index)}}update(r,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nu),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,h,f,C){for(const z of h)for(const B of z){const te=B.x,se=B.y;if(te<0||te>=Fn||se<0||se>=Fn)continue;const be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),Re=be.vertexLength;mm(this.layoutVertexArray,te,se,-1,-1),mm(this.layoutVertexArray,te,se,1,-1),mm(this.layoutVertexArray,te,se,1,1),mm(this.layoutVertexArray,te,se,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),be.vertexLength+=4,be.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{},C)}}function $0(l,r){for(let h=0;h<l.length;h++)if(hu(r,l[h]))return!0;for(let h=0;h<r.length;h++)if(hu(l,r[h]))return!0;return!!nx(l,r)}function lk(l,r,h){return!!hu(l,r)||!!sx(r,l,h)}function V0(l,r){if(l.length===1)return H0(r,l[0]);for(let h=0;h<r.length;h++){const f=r[h];for(let C=0;C<f.length;C++)if(hu(l,f[C]))return!0}for(let h=0;h<l.length;h++)if(H0(r,l[h]))return!0;for(let h=0;h<r.length;h++)if(nx(l,r[h]))return!0;return!1}function ck(l,r,h){if(l.length>1){if(nx(l,r))return!0;for(let f=0;f<r.length;f++)if(sx(r[f],l,h))return!0}for(let f=0;f<l.length;f++)if(sx(l[f],r,h))return!0;return!1}function nx(l,r){if(l.length===0||r.length===0)return!1;for(let h=0;h<l.length-1;h++){const f=l[h],C=l[h+1];for(let z=0;z<r.length-1;z++)if(hk(f,C,r[z],r[z+1]))return!0}return!1}function hk(l,r,h,f){return I(l,h,f)!==I(r,h,f)&&I(l,r,h)!==I(l,r,f)}function sx(l,r,h){const f=h*h;if(r.length===1)return l.distSqr(r[0])<f;for(let C=1;C<r.length;C++)if(G0(l,r[C-1],r[C])<f)return!0;return!1}function G0(l,r,h){const f=r.distSqr(h);if(f===0)return l.distSqr(r);const C=((l.x-r.x)*(h.x-r.x)+(l.y-r.y)*(h.y-r.y))/f;return l.distSqr(C<0?r:C>1?h:h.sub(r)._mult(C)._add(r))}function H0(l,r){let h,f,C,z=!1;for(let B=0;B<l.length;B++){h=l[B];for(let te=0,se=h.length-1;te<h.length;se=te++)f=h[te],C=h[se],f.y>r.y!=C.y>r.y&&r.x<(C.x-f.x)*(r.y-f.y)/(C.y-f.y)+f.x&&(z=!z)}return z}function hu(l,r){let h=!1;for(let f=0,C=l.length-1;f<l.length;C=f++){const z=l[f],B=l[C];z.y>r.y!=B.y>r.y&&r.x<(B.x-z.x)*(r.y-z.y)/(B.y-z.y)+z.x&&(h=!h)}return h}function uk(l,r,h){const f=h[0],C=h[2];if(l.x<f.x&&r.x<f.x||l.x>C.x&&r.x>C.x||l.y<f.y&&r.y<f.y||l.y>C.y&&r.y>C.y)return!1;const z=I(l,r,h[0]);return z!==I(l,r,h[1])||z!==I(l,r,h[2])||z!==I(l,r,h[3])}function Wd(l,r,h){const f=r.paint.get(l).value;return f.kind==="constant"?f.value:h.programConfigurations.get(r.id).getMaxValue(l)}function gm(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function ym(l,r,h,f,C){if(!r[0]&&!r[1])return l;const z=G.convert(r)._mult(C);h==="viewport"&&z._rotate(-f);const B=[];for(let te=0;te<l.length;te++)B.push(l[te].sub(z));return B}fi("CircleBucket",rx,{omit:["layers"]});const dk=new Bn({"circle-sort-key":new Di(Pe.layout_circle["circle-sort-key"])});var pk={paint:new Bn({"circle-radius":new Di(Pe.paint_circle["circle-radius"]),"circle-color":new Di(Pe.paint_circle["circle-color"]),"circle-blur":new Di(Pe.paint_circle["circle-blur"]),"circle-opacity":new Di(Pe.paint_circle["circle-opacity"]),"circle-translate":new Si(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Si(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Si(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Si(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Pe.paint_circle["circle-stroke-opacity"])}),layout:dk},Fs=1e-6,Us=typeof Float32Array<"u"?Float32Array:Array;function W0(){var l=new Us(9);return Us!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function ax(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function q0(l,r,h){var f=r[0],C=r[1],z=r[2],B=r[3],te=r[4],se=r[5],be=r[6],Re=r[7],Oe=r[8],Ve=r[9],Ye=r[10],Ze=r[11],ht=r[12],lt=r[13],vt=r[14],It=r[15],xt=h[0],Mt=h[1],Ut=h[2],Ft=h[3];return l[0]=xt*f+Mt*te+Ut*Oe+Ft*ht,l[1]=xt*C+Mt*se+Ut*Ve+Ft*lt,l[2]=xt*z+Mt*be+Ut*Ye+Ft*vt,l[3]=xt*B+Mt*Re+Ut*Ze+Ft*It,l[4]=(xt=h[4])*f+(Mt=h[5])*te+(Ut=h[6])*Oe+(Ft=h[7])*ht,l[5]=xt*C+Mt*se+Ut*Ve+Ft*lt,l[6]=xt*z+Mt*be+Ut*Ye+Ft*vt,l[7]=xt*B+Mt*Re+Ut*Ze+Ft*It,l[8]=(xt=h[8])*f+(Mt=h[9])*te+(Ut=h[10])*Oe+(Ft=h[11])*ht,l[9]=xt*C+Mt*se+Ut*Ve+Ft*lt,l[10]=xt*z+Mt*be+Ut*Ye+Ft*vt,l[11]=xt*B+Mt*Re+Ut*Ze+Ft*It,l[12]=(xt=h[12])*f+(Mt=h[13])*te+(Ut=h[14])*Oe+(Ft=h[15])*ht,l[13]=xt*C+Mt*se+Ut*Ve+Ft*lt,l[14]=xt*z+Mt*be+Ut*Ye+Ft*vt,l[15]=xt*B+Mt*Re+Ut*Ze+Ft*It,l}Math.hypot||(Math.hypot=function(){for(var l=0,r=arguments.length;r--;)l+=arguments[r]*arguments[r];return Math.sqrt(l)});var qd,fk=q0;function Y0(){var l=new Us(3);return Us!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Z0(l,r,h){var f=new Us(3);return f[0]=l,f[1]=r,f[2]=h,f}function xm(l,r,h){var f=r[0],C=r[1],z=r[2],B=r[3];return l[0]=h[0]*f+h[4]*C+h[8]*z+h[12]*B,l[1]=h[1]*f+h[5]*C+h[9]*z+h[13]*B,l[2]=h[2]*f+h[6]*C+h[10]*z+h[14]*B,l[3]=h[3]*f+h[7]*C+h[11]*z+h[15]*B,l}function X0(){var l=new Us(4);return Us!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function K0(l,r){const h=xm([],[l.x,l.y,0,1],r);return new G(h[0]/h[3],h[1]/h[3])}Y0(),qd=new Us(4),Us!=Float32Array&&(qd[0]=0,qd[1]=0,qd[2]=0,qd[3]=0),Y0(),Z0(1,0,0),Z0(0,1,0),X0(),X0(),W0(),function(){var l;l=new Us(2),Us!=Float32Array&&(l[0]=0,l[1]=0)}();class Q0 extends rx{}fi("HeatmapBucket",Q0,{omit:["layers"]});var mk={paint:new Bn({"heatmap-radius":new Di(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Si(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vd(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Si(Pe.paint_heatmap["heatmap-opacity"])})};function ox(l,{width:r,height:h},f,C){if(C){if(C instanceof Uint8ClampedArray)C=new Uint8Array(C.buffer);else if(C.length!==r*h*f)throw new RangeError(`mismatched image size. expected: ${C.length} but got: ${r*h*f}`)}else C=new Uint8Array(r*h*f);return l.width=r,l.height=h,l.data=C,l}function J0(l,{width:r,height:h},f){if(r===l.width&&h===l.height)return;const C=ox({},{width:r,height:h},f);lx(l,C,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,r),height:Math.min(l.height,h)},f),l.width=r,l.height=h,l.data=C.data}function lx(l,r,h,f,C,z){if(C.width===0||C.height===0)return r;if(C.width>l.width||C.height>l.height||h.x>l.width-C.width||h.y>l.height-C.height)throw new RangeError("out of range source coordinates for image copy");if(C.width>r.width||C.height>r.height||f.x>r.width-C.width||f.y>r.height-C.height)throw new RangeError("out of range destination coordinates for image copy");const B=l.data,te=r.data;if(B===te)throw new Error("srcData equals dstData, so image is already copied");for(let se=0;se<C.height;se++){const be=((h.y+se)*l.width+h.x)*z,Re=((f.y+se)*r.width+f.x)*z;for(let Oe=0;Oe<C.width*z;Oe++)te[Re+Oe]=B[be+Oe]}return r}class Yd{constructor(r,h){ox(this,r,1,h)}resize(r){J0(this,r,1)}clone(){return new Yd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,h,f,C,z){lx(r,h,f,C,z,1)}}class Pa{constructor(r,h){ox(this,r,4,h)}resize(r){J0(this,r,4)}replace(r,h){h?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,h,f,C,z){lx(r,h,f,C,z,4)}}function e_(l){const r={},h=l.resolution||256,f=l.clips?l.clips.length:1,C=l.image||new Pa({width:h,height:f});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const z=(B,te,se)=>{r[l.evaluationKey]=se;const be=l.expression.evaluate(r);C.data[B+te+0]=Math.floor(255*be.r/be.a),C.data[B+te+1]=Math.floor(255*be.g/be.a),C.data[B+te+2]=Math.floor(255*be.b/be.a),C.data[B+te+3]=Math.floor(255*be.a)};if(l.clips)for(let B=0,te=0;B<f;++B,te+=4*h)for(let se=0,be=0;se<h;se++,be+=4){const Re=se/(h-1),{start:Oe,end:Ve}=l.clips[B];z(te,be,Oe*(1-Re)+Ve*Re)}else for(let B=0,te=0;B<h;B++,te+=4)z(0,te,B/(h-1));return C}fi("AlphaImage",Yd),fi("RGBAImage",Pa);var gk={paint:new Bn({"hillshade-illumination-direction":new Si(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Si(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Si(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Si(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Si(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Si(Pe.paint_hillshade["hillshade-accent-color"])})};const yk=Rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:xk}=yk;var bm={exports:{}};function vm(l,r,h){h=h||2;var f,C,z,B,te,se,be,Re=r&&r.length,Oe=Re?r[0]*h:l.length,Ve=t_(l,0,Oe,h,!0),Ye=[];if(!Ve||Ve.next===Ve.prev)return Ye;if(Re&&(Ve=function(ht,lt,vt,It){var xt,Mt,Ut,Ft=[];for(xt=0,Mt=lt.length;xt<Mt;xt++)(Ut=t_(ht,lt[xt]*It,xt<Mt-1?lt[xt+1]*It:ht.length,It,!1))===Ut.next&&(Ut.steiner=!0),Ft.push(Sk(Ut));for(Ft.sort(Tk),xt=0;xt<Ft.length;xt++)vt=Ek(Ft[xt],vt);return vt}(l,r,Ve,h)),l.length>80*h){f=z=l[0],C=B=l[1];for(var Ze=h;Ze<Oe;Ze+=h)(te=l[Ze])<f&&(f=te),(se=l[Ze+1])<C&&(C=se),te>z&&(z=te),se>B&&(B=se);be=(be=Math.max(z-f,B-C))!==0?32767/be:0}return Zd(Ve,Ye,h,f,C,be,0),Ye}function t_(l,r,h,f,C){var z,B;if(C===ux(l,r,h,f)>0)for(z=r;z<h;z+=f)B=n_(z,l[z],l[z+1],B);else for(z=h-f;z>=r;z-=f)B=n_(z,l[z],l[z+1],B);return B&&_m(B,B.next)&&(Kd(B),B=B.next),B}function qc(l,r){if(!l)return l;r||(r=l);var h,f=l;do if(h=!1,f.steiner||!_m(f,f.next)&&kn(f.prev,f,f.next)!==0)f=f.next;else{if(Kd(f),(f=r=f.prev)===f.next)break;h=!0}while(h||f!==r);return r}function Zd(l,r,h,f,C,z,B){if(l){!B&&z&&function(Re,Oe,Ve,Ye){var Ze=Re;do Ze.z===0&&(Ze.z=cx(Ze.x,Ze.y,Oe,Ve,Ye)),Ze.prevZ=Ze.prev,Ze.nextZ=Ze.next,Ze=Ze.next;while(Ze!==Re);Ze.prevZ.nextZ=null,Ze.prevZ=null,function(ht){var lt,vt,It,xt,Mt,Ut,Ft,xi,Ei=1;do{for(vt=ht,ht=null,Mt=null,Ut=0;vt;){for(Ut++,It=vt,Ft=0,lt=0;lt<Ei&&(Ft++,It=It.nextZ);lt++);for(xi=Ei;Ft>0||xi>0&&It;)Ft!==0&&(xi===0||!It||vt.z<=It.z)?(xt=vt,vt=vt.nextZ,Ft--):(xt=It,It=It.nextZ,xi--),Mt?Mt.nextZ=xt:ht=xt,xt.prevZ=Mt,Mt=xt;vt=It}Mt.nextZ=null,Ei*=2}while(Ut>1)}(Ze)}(l,f,C,z);for(var te,se,be=l;l.prev!==l.next;)if(te=l.prev,se=l.next,z?vk(l,f,C,z):bk(l))r.push(te.i/h|0),r.push(l.i/h|0),r.push(se.i/h|0),Kd(l),l=se.next,be=se.next;else if((l=se)===be){B?B===1?Zd(l=_k(qc(l),r,h),r,h,f,C,z,2):B===2&&wk(l,r,h,f,C,z):Zd(qc(l),r,h,f,C,z,1);break}}}function bk(l){var r=l.prev,h=l,f=l.next;if(kn(r,h,f)>=0)return!1;for(var C=r.x,z=h.x,B=f.x,te=r.y,se=h.y,be=f.y,Re=C<z?C<B?C:B:z<B?z:B,Oe=te<se?te<be?te:be:se<be?se:be,Ve=C>z?C>B?C:B:z>B?z:B,Ye=te>se?te>be?te:be:se>be?se:be,Ze=f.next;Ze!==r;){if(Ze.x>=Re&&Ze.x<=Ve&&Ze.y>=Oe&&Ze.y<=Ye&&uu(C,te,z,se,B,be,Ze.x,Ze.y)&&kn(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.next}return!0}function vk(l,r,h,f){var C=l.prev,z=l,B=l.next;if(kn(C,z,B)>=0)return!1;for(var te=C.x,se=z.x,be=B.x,Re=C.y,Oe=z.y,Ve=B.y,Ye=te<se?te<be?te:be:se<be?se:be,Ze=Re<Oe?Re<Ve?Re:Ve:Oe<Ve?Oe:Ve,ht=te>se?te>be?te:be:se>be?se:be,lt=Re>Oe?Re>Ve?Re:Ve:Oe>Ve?Oe:Ve,vt=cx(Ye,Ze,r,h,f),It=cx(ht,lt,r,h,f),xt=l.prevZ,Mt=l.nextZ;xt&&xt.z>=vt&&Mt&&Mt.z<=It;){if(xt.x>=Ye&&xt.x<=ht&&xt.y>=Ze&&xt.y<=lt&&xt!==C&&xt!==B&&uu(te,Re,se,Oe,be,Ve,xt.x,xt.y)&&kn(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Mt.x>=Ye&&Mt.x<=ht&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==C&&Mt!==B&&uu(te,Re,se,Oe,be,Ve,Mt.x,Mt.y)&&kn(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;xt&&xt.z>=vt;){if(xt.x>=Ye&&xt.x<=ht&&xt.y>=Ze&&xt.y<=lt&&xt!==C&&xt!==B&&uu(te,Re,se,Oe,be,Ve,xt.x,xt.y)&&kn(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Mt&&Mt.z<=It;){if(Mt.x>=Ye&&Mt.x<=ht&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==C&&Mt!==B&&uu(te,Re,se,Oe,be,Ve,Mt.x,Mt.y)&&kn(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function _k(l,r,h){var f=l;do{var C=f.prev,z=f.next.next;!_m(C,z)&&i_(C,f,f.next,z)&&Xd(C,z)&&Xd(z,C)&&(r.push(C.i/h|0),r.push(f.i/h|0),r.push(z.i/h|0),Kd(f),Kd(f.next),f=l=z),f=f.next}while(f!==l);return qc(f)}function wk(l,r,h,f,C,z){var B=l;do{for(var te=B.next.next;te!==B.prev;){if(B.i!==te.i&&kk(B,te)){var se=r_(B,te);return B=qc(B,B.next),se=qc(se,se.next),Zd(B,r,h,f,C,z,0),void Zd(se,r,h,f,C,z,0)}te=te.next}B=B.next}while(B!==l)}function Tk(l,r){return l.x-r.x}function Ek(l,r){var h=function(C,z){var B,te=z,se=C.x,be=C.y,Re=-1/0;do{if(be<=te.y&&be>=te.next.y&&te.next.y!==te.y){var Oe=te.x+(be-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(Oe<=se&&Oe>Re&&(Re=Oe,B=te.x<te.next.x?te:te.next,Oe===se))return B}te=te.next}while(te!==z);if(!B)return null;var Ve,Ye=B,Ze=B.x,ht=B.y,lt=1/0;te=B;do se>=te.x&&te.x>=Ze&&se!==te.x&&uu(be<ht?se:Re,be,Ze,ht,be<ht?Re:se,be,te.x,te.y)&&(Ve=Math.abs(be-te.y)/(se-te.x),Xd(te,C)&&(Ve<lt||Ve===lt&&(te.x>B.x||te.x===B.x&&Ck(B,te)))&&(B=te,lt=Ve)),te=te.next;while(te!==Ye);return B}(l,r);if(!h)return r;var f=r_(h,l);return qc(f,f.next),qc(h,h.next)}function Ck(l,r){return kn(l.prev,l,r.prev)<0&&kn(r.next,l,l.next)<0}function cx(l,r,h,f,C){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-h)*C|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*C|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Sk(l){var r=l,h=l;do(r.x<h.x||r.x===h.x&&r.y<h.y)&&(h=r),r=r.next;while(r!==l);return h}function uu(l,r,h,f,C,z,B,te){return(C-B)*(r-te)>=(l-B)*(z-te)&&(l-B)*(f-te)>=(h-B)*(r-te)&&(h-B)*(z-te)>=(C-B)*(f-te)}function kk(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(h,f){var C=h;do{if(C.i!==h.i&&C.next.i!==h.i&&C.i!==f.i&&C.next.i!==f.i&&i_(C,C.next,h,f))return!0;C=C.next}while(C!==h);return!1}(l,r)&&(Xd(l,r)&&Xd(r,l)&&function(h,f){var C=h,z=!1,B=(h.x+f.x)/2,te=(h.y+f.y)/2;do C.y>te!=C.next.y>te&&C.next.y!==C.y&&B<(C.next.x-C.x)*(te-C.y)/(C.next.y-C.y)+C.x&&(z=!z),C=C.next;while(C!==h);return z}(l,r)&&(kn(l.prev,l,r.prev)||kn(l,r.prev,r))||_m(l,r)&&kn(l.prev,l,l.next)>0&&kn(r.prev,r,r.next)>0)}function kn(l,r,h){return(r.y-l.y)*(h.x-r.x)-(r.x-l.x)*(h.y-r.y)}function _m(l,r){return l.x===r.x&&l.y===r.y}function i_(l,r,h,f){var C=Tm(kn(l,r,h)),z=Tm(kn(l,r,f)),B=Tm(kn(h,f,l)),te=Tm(kn(h,f,r));return C!==z&&B!==te||!(C!==0||!wm(l,h,r))||!(z!==0||!wm(l,f,r))||!(B!==0||!wm(h,l,f))||!(te!==0||!wm(h,r,f))}function wm(l,r,h){return r.x<=Math.max(l.x,h.x)&&r.x>=Math.min(l.x,h.x)&&r.y<=Math.max(l.y,h.y)&&r.y>=Math.min(l.y,h.y)}function Tm(l){return l>0?1:l<0?-1:0}function Xd(l,r){return kn(l.prev,l,l.next)<0?kn(l,r,l.next)>=0&&kn(l,l.prev,r)>=0:kn(l,r,l.prev)<0||kn(l,l.next,r)<0}function r_(l,r){var h=new hx(l.i,l.x,l.y),f=new hx(r.i,r.x,r.y),C=l.next,z=r.prev;return l.next=r,r.prev=l,h.next=C,C.prev=h,f.next=h,h.prev=f,z.next=f,f.prev=z,f}function n_(l,r,h,f){var C=new hx(l,r,h);return f?(C.next=f.next,C.prev=f,f.next.prev=C,f.next=C):(C.prev=C,C.next=C),C}function Kd(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function hx(l,r,h){this.i=l,this.x=r,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ux(l,r,h,f){for(var C=0,z=r,B=h-f;z<h;z+=f)C+=(l[B]-l[z])*(l[z+1]+l[B+1]),B=z;return C}function Ak(l,r,h,f,C){s_(l,r,h,f||l.length-1,C)}function s_(l,r,h,f,C){for(;f>h;){if(f-h>600){var z=f-h+1,B=r-h+1,te=Math.log(z),se=.5*Math.exp(2*te/3),be=.5*Math.sqrt(te*se*(z-se)/z)*(B-z/2<0?-1:1);s_(l,r,Math.max(h,Math.floor(r-B*se/z+be)),Math.min(f,Math.floor(r+(z-B)*se/z+be)),C)}var Re=l[r],Oe=h,Ve=f;for(Qd(l,h,r),C(l[f],Re)>0&&Qd(l,h,f);Oe<Ve;){for(Qd(l,Oe,Ve),Oe++,Ve--;C(l[Oe],Re)<0;)Oe++;for(;C(l[Ve],Re)>0;)Ve--}C(l[h],Re)===0?Qd(l,h,Ve):Qd(l,++Ve,f),Ve<=r&&(h=Ve+1),r<=Ve&&(f=Ve-1)}}function Qd(l,r,h){var f=l[r];l[r]=l[h],l[h]=f}function dx(l,r){const h=l.length;if(h<=1)return[l];const f=[];let C,z;for(let B=0;B<h;B++){const te=N(l[B]);te!==0&&(l[B].area=Math.abs(te),z===void 0&&(z=te<0),z===te<0?(C&&f.push(C),C=[l[B]]):C.push(l[B]))}if(C&&f.push(C),r>1)for(let B=0;B<f.length;B++)f[B].length<=r||(Ak(f[B],r,1,f[B].length-1,Mk),f[B]=f[B].slice(0,r));return f}function Mk(l,r){return r.area-l.area}function px(l,r,h){const f=h.patternDependencies;let C=!1;for(const z of r){const B=z.paint.get(`${l}-pattern`);B.isConstant()||(C=!0);const te=B.constantOr(null);te&&(C=!0,f[te.to]=!0,f[te.from]=!0)}return C}function fx(l,r,h,f,C){const z=C.patternDependencies;for(const B of r){const te=B.paint.get(`${l}-pattern`).value;if(te.kind!=="constant"){let se=te.evaluate({zoom:f-1},h,{},C.availableImages),be=te.evaluate({zoom:f},h,{},C.availableImages),Re=te.evaluate({zoom:f+1},h,{},C.availableImages);se=se&&se.name?se.name:se,be=be&&be.name?be.name:be,Re=Re&&Re.name?Re.name:Re,z[se]=!0,z[be]=!0,z[Re]=!0,h.patterns[B.id]={min:se,mid:be,max:Re}}}return h}bm.exports=vm,bm.exports.default=vm,vm.deviation=function(l,r,h,f){var C=r&&r.length,z=Math.abs(ux(l,0,C?r[0]*h:l.length,h));if(C)for(var B=0,te=r.length;B<te;B++)z-=Math.abs(ux(l,r[B]*h,B<te-1?r[B+1]*h:l.length,h));var se=0;for(B=0;B<f.length;B+=3){var be=f[B]*h,Re=f[B+1]*h,Oe=f[B+2]*h;se+=Math.abs((l[be]-l[Oe])*(l[Re+1]-l[be+1])-(l[be]-l[Re])*(l[Oe+1]-l[be+1]))}return z===0&&se===0?0:Math.abs((se-z)/z)},vm.flatten=function(l){for(var r=l[0][0].length,h={vertices:[],holes:[],dimensions:r},f=0,C=0;C<l.length;C++){for(var z=0;z<l[C].length;z++)for(var B=0;B<r;B++)h.vertices.push(l[C][z][B]);C>0&&h.holes.push(f+=l[C-1].length)}return h};class mx{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(h=>h.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Or,this.indexArray=new is,this.indexArray2=new Aa,this.programConfigurations=new Gc(r.layers,r.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(r,h,f){this.hasPattern=px("fill",this.layers,h);const C=this.layers[0].layout.get("fill-sort-key"),z=!C.isConstant(),B=[];for(const{feature:te,id:se,index:be,sourceLayerIndex:Re}of r){const Oe=this.layers[0]._featureFilter.needGeometry,Ve=Wc(te,Oe);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom),Ve,f))continue;const Ye=z?C.evaluate(Ve,{},f,h.availableImages):void 0,Ze={id:se,properties:te.properties,type:te.type,sourceLayerIndex:Re,index:be,geometry:Oe?Ve.geometry:Hc(te),patterns:{},sortKey:Ye};B.push(Ze)}z&&B.sort((te,se)=>te.sortKey-se.sortKey);for(const te of B){const{geometry:se,index:be,sourceLayerIndex:Re}=te;if(this.hasPattern){const Oe=fx("fill",this.layers,te,this.zoom,h);this.patternFeatures.push(Oe)}else this.addFeature(te,se,be,f,{});h.featureIndex.insert(r[be].feature,se,be,Re,this.index)}}update(r,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,h,this.stateDependentLayers,f)}addFeatures(r,h,f){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xk),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,h,f,C,z){for(const B of dx(h,500)){let te=0;for(const Ye of B)te+=Ye.length;const se=this.segments.prepareSegment(te,this.layoutVertexArray,this.indexArray),be=se.vertexLength,Re=[],Oe=[];for(const Ye of B){if(Ye.length===0)continue;Ye!==B[0]&&Oe.push(Re.length/2);const Ze=this.segments2.prepareSegment(Ye.length,this.layoutVertexArray,this.indexArray2),ht=Ze.vertexLength;this.layoutVertexArray.emplaceBack(Ye[0].x,Ye[0].y),this.indexArray2.emplaceBack(ht+Ye.length-1,ht),Re.push(Ye[0].x),Re.push(Ye[0].y);for(let lt=1;lt<Ye.length;lt++)this.layoutVertexArray.emplaceBack(Ye[lt].x,Ye[lt].y),this.indexArray2.emplaceBack(ht+lt-1,ht+lt),Re.push(Ye[lt].x),Re.push(Ye[lt].y);Ze.vertexLength+=Ye.length,Ze.primitiveLength+=Ye.length}const Ve=bm.exports(Re,Oe);for(let Ye=0;Ye<Ve.length;Ye+=3)this.indexArray.emplaceBack(be+Ve[Ye],be+Ve[Ye+1],be+Ve[Ye+2]);se.vertexLength+=te,se.primitiveLength+=Ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,z,C)}}fi("FillBucket",mx,{omit:["layers","patternFeatures"]});const Pk=new Bn({"fill-sort-key":new Di(Pe.layout_fill["fill-sort-key"])});var Ik={paint:new Bn({"fill-antialias":new Si(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Di(Pe.paint_fill["fill-opacity"]),"fill-color":new Di(Pe.paint_fill["fill-color"]),"fill-outline-color":new Di(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Si(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Si(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bc(Pe.paint_fill["fill-pattern"])}),layout:Pk};const Dk=Rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Rk=Rn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Lk}=Dk;var Bl={},zk=G,a_=du;function du(l,r,h,f,C){this.properties={},this.extent=h,this.type=0,this._pbf=l,this._geometry=-1,this._keys=f,this._values=C,l.readFields(Nk,this,r)}function Nk(l,r,h){l==1?r.id=h.readVarint():l==2?function(f,C){for(var z=f.readVarint()+f.pos;f.pos<z;){var B=C._keys[f.readVarint()],te=C._values[f.readVarint()];C.properties[B]=te}}(h,r):l==3?r.type=h.readVarint():l==4&&(r._geometry=h.pos)}function Ok(l){for(var r,h,f=0,C=0,z=l.length,B=z-1;C<z;B=C++)f+=((h=l[B]).x-(r=l[C]).x)*(r.y+h.y);return f}du.types=["Unknown","Point","LineString","Polygon"],du.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var r,h=l.readVarint()+l.pos,f=1,C=0,z=0,B=0,te=[];l.pos<h;){if(C<=0){var se=l.readVarint();f=7&se,C=se>>3}if(C--,f===1||f===2)z+=l.readSVarint(),B+=l.readSVarint(),f===1&&(r&&te.push(r),r=[]),r.push(new zk(z,B));else{if(f!==7)throw new Error("unknown command "+f);r&&r.push(r[0].clone())}}return r&&te.push(r),te},du.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var r=l.readVarint()+l.pos,h=1,f=0,C=0,z=0,B=1/0,te=-1/0,se=1/0,be=-1/0;l.pos<r;){if(f<=0){var Re=l.readVarint();h=7&Re,f=Re>>3}if(f--,h===1||h===2)(C+=l.readSVarint())<B&&(B=C),C>te&&(te=C),(z+=l.readSVarint())<se&&(se=z),z>be&&(be=z);else if(h!==7)throw new Error("unknown command "+h)}return[B,se,te,be]},du.prototype.toGeoJSON=function(l,r,h){var f,C,z=this.extent*Math.pow(2,h),B=this.extent*l,te=this.extent*r,se=this.loadGeometry(),be=du.types[this.type];function Re(Ye){for(var Ze=0;Ze<Ye.length;Ze++){var ht=Ye[Ze];Ye[Ze]=[360*(ht.x+B)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ht.y+te)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(f=0;f<se.length;f++)Oe[f]=se[f][0];Re(se=Oe);break;case 2:for(f=0;f<se.length;f++)Re(se[f]);break;case 3:for(se=function(Ye){var Ze=Ye.length;if(Ze<=1)return[Ye];for(var ht,lt,vt=[],It=0;It<Ze;It++){var xt=Ok(Ye[It]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ht&&vt.push(ht),ht=[Ye[It]]):ht.push(Ye[It]))}return ht&&vt.push(ht),vt}(se),f=0;f<se.length;f++)for(C=0;C<se[f].length;C++)Re(se[f][C])}se.length===1?se=se[0]:be="Multi"+be;var Ve={type:"Feature",geometry:{type:be,coordinates:se},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};var jk=a_,o_=l_;function l_(l,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Bk,this,r),this.length=this._features.length}function Bk(l,r,h){l===15?r.version=h.readVarint():l===1?r.name=h.readString():l===5?r.extent=h.readVarint():l===2?r._features.push(h.pos):l===3?r._keys.push(h.readString()):l===4&&r._values.push(function(f){for(var C=null,z=f.readVarint()+f.pos;f.pos<z;){var B=f.readVarint()>>3;C=B===1?f.readString():B===2?f.readFloat():B===3?f.readDouble():B===4?f.readVarint64():B===5?f.readVarint():B===6?f.readSVarint():B===7?f.readBoolean():null}return C}(h))}l_.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var r=this._pbf.readVarint()+this._pbf.pos;return new jk(this._pbf,r,this.extent,this._keys,this._values)};var Fk=o_;function Uk(l,r,h){if(l===3){var f=new Fk(h,h.readVarint()+h.pos);f.length&&(r[f.name]=f)}}Bl.VectorTile=function(l,r){this.layers=l.readFields(Uk,{},r)},Bl.VectorTileFeature=a_,Bl.VectorTileLayer=o_;const $k=Bl.VectorTileFeature.types,gx=Math.pow(2,13);function Jd(l,r,h,f,C,z,B,te){l.emplaceBack(r,h,2*Math.floor(f*gx)+B,C*gx*2,z*gx*2,Math.round(te))}class yx{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(h=>h.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new jr,this.centroidVertexArray=new or,this.indexArray=new is,this.programConfigurations=new Gc(r.layers,r.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(r,h,f){this.features=[],this.hasPattern=px("fill-extrusion",this.layers,h);for(const{feature:C,id:z,index:B,sourceLayerIndex:te}of r){const se=this.layers[0]._featureFilter.needGeometry,be=Wc(C,se);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom),be,f))continue;const Re={id:z,sourceLayerIndex:te,index:B,geometry:se?be.geometry:Hc(C),properties:C.properties,type:C.type,patterns:{}};this.hasPattern?this.features.push(fx("fill-extrusion",this.layers,Re,this.zoom,h)):this.addFeature(Re,Re.geometry,B,f,{}),h.featureIndex.insert(C,Re.geometry,B,te,this.index,!0)}}addFeatures(r,h,f){for(const C of this.features){const{geometry:z}=C;this.addFeature(C,z,C.index,h,f)}}update(r,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Lk),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Rk.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,h,f,C,z){const B={x:0,y:0,vertexCount:0};for(const te of dx(h,500)){let se=0;for(const Ze of te)se+=Ze.length;let be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ze of te){if(Ze.length===0||Gk(Ze))continue;let ht=0;for(let lt=0;lt<Ze.length;lt++){const vt=Ze[lt];if(lt>=1){const It=Ze[lt-1];if(!Vk(vt,It)){be.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=vt.sub(It)._perp()._unit(),Mt=It.dist(vt);ht+Mt>32768&&(ht=0),Jd(this.layoutVertexArray,vt.x,vt.y,xt.x,xt.y,0,0,ht),Jd(this.layoutVertexArray,vt.x,vt.y,xt.x,xt.y,0,1,ht),B.x+=2*vt.x,B.y+=2*vt.y,B.vertexCount+=2,ht+=Mt,Jd(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,0,ht),Jd(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,1,ht),B.x+=2*It.x,B.y+=2*It.y,B.vertexCount+=2;const Ut=be.vertexLength;this.indexArray.emplaceBack(Ut,Ut+2,Ut+1),this.indexArray.emplaceBack(Ut+1,Ut+2,Ut+3),be.vertexLength+=4,be.primitiveLength+=2}}}}if(be.vertexLength+se>Er.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(se,this.layoutVertexArray,this.indexArray)),$k[r.type]!=="Polygon")continue;const Re=[],Oe=[],Ve=be.vertexLength;for(const Ze of te)if(Ze.length!==0){Ze!==te[0]&&Oe.push(Re.length/2);for(let ht=0;ht<Ze.length;ht++){const lt=Ze[ht];Jd(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),B.x+=lt.x,B.y+=lt.y,B.vertexCount+=1,Re.push(lt.x),Re.push(lt.y)}}const Ye=bm.exports(Re,Oe);for(let Ze=0;Ze<Ye.length;Ze+=3)this.indexArray.emplaceBack(Ve+Ye[Ze],Ve+Ye[Ze+2],Ve+Ye[Ze+1]);be.primitiveLength+=Ye.length/3,be.vertexLength+=se}for(let te=0;te<B.vertexCount;te++)this.centroidVertexArray.emplaceBack(Math.floor(B.x/B.vertexCount),Math.floor(B.y/B.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,z,C)}}function Vk(l,r){return l.x===r.x&&(l.x<0||l.x>Fn)||l.y===r.y&&(l.y<0||l.y>Fn)}function Gk(l){return l.every(r=>r.x<0)||l.every(r=>r.x>Fn)||l.every(r=>r.y<0)||l.every(r=>r.y>Fn)}fi("FillExtrusionBucket",yx,{omit:["layers","features"]});var Hk={paint:new Bn({"fill-extrusion-opacity":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Si(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ep(l,r){return l.x*r.x+l.y*r.y}function c_(l,r){if(l.length===1){let h=0;const f=r[h++];let C;for(;!C||f.equals(C);)if(C=r[h++],!C)return 1/0;for(;h<r.length;h++){const z=r[h],B=l[0],te=C.sub(f),se=z.sub(f),be=B.sub(f),Re=ep(te,te),Oe=ep(te,se),Ve=ep(se,se),Ye=ep(be,te),Ze=ep(be,se),ht=Re*Ve-Oe*Oe,lt=(Ve*Ye-Oe*Ze)/ht,vt=(Re*Ze-Oe*Ye)/ht,It=f.z*(1-lt-vt)+C.z*lt+z.z*vt;if(isFinite(It))return It}return 1/0}{let h=1/0;for(const f of r)h=Math.min(h,f.z);return h}}const Wk=Rn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qk}=Wk,Yk=Rn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Zk}=Yk,Xk=Bl.VectorTileFeature.types,Kk=Math.cos(Math.PI/180*37.5),h_=Math.pow(2,14)/.5;class xx{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(h=>h.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new xr,this.layoutVertexArray2=new vr,this.indexArray=new is,this.programConfigurations=new Gc(r.layers,r.zoom),this.segments=new Er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(r,h,f){this.hasPattern=px("line",this.layers,h);const C=this.layers[0].layout.get("line-sort-key"),z=!C.isConstant(),B=[];for(const{feature:te,id:se,index:be,sourceLayerIndex:Re}of r){const Oe=this.layers[0]._featureFilter.needGeometry,Ve=Wc(te,Oe);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom),Ve,f))continue;const Ye=z?C.evaluate(Ve,{},f):void 0,Ze={id:se,properties:te.properties,type:te.type,sourceLayerIndex:Re,index:be,geometry:Oe?Ve.geometry:Hc(te),patterns:{},sortKey:Ye};B.push(Ze)}z&&B.sort((te,se)=>te.sortKey-se.sortKey);for(const te of B){const{geometry:se,index:be,sourceLayerIndex:Re}=te;if(this.hasPattern){const Oe=fx("line",this.layers,te,this.zoom,h);this.patternFeatures.push(Oe)}else this.addFeature(te,se,be,f,{});h.featureIndex.insert(r[be].feature,se,be,Re,this.index)}}update(r,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,h,this.stateDependentLayers,f)}addFeatures(r,h,f){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Zk)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qk),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,h,f,C,z){const B=this.layers[0].layout,te=B.get("line-join").evaluate(r,{}),se=B.get("line-cap"),be=B.get("line-miter-limit"),Re=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Oe of h)this.addLine(Oe,r,te,se,be,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,z,C)}addLine(r,h,f,C,z,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vt=0;vt<r.length-1;vt++)this.totalDistance+=r[vt].dist(r[vt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const te=Xk[h.type]==="Polygon";let se=r.length;for(;se>=2&&r[se-1].equals(r[se-2]);)se--;let be=0;for(;be<se-1&&r[be].equals(r[be+1]);)be++;if(se<(te?3:2))return;f==="bevel"&&(z=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,Oe=this.segments.prepareSegment(10*se,this.layoutVertexArray,this.indexArray);let Ve,Ye,Ze,ht,lt;this.e1=this.e2=-1,te&&(Ve=r[se-2],lt=r[be].sub(Ve)._unit()._perp());for(let vt=be;vt<se;vt++){if(Ze=vt===se-1?te?r[be+1]:void 0:r[vt+1],Ze&&r[vt].equals(Ze))continue;lt&&(ht=lt),Ve&&(Ye=Ve),Ve=r[vt],lt=Ze?Ze.sub(Ve)._unit()._perp():ht,ht=ht||lt;let It=ht.add(lt);It.x===0&&It.y===0||It._unit();const xt=ht.x*lt.x+ht.y*lt.y,Mt=It.x*lt.x+It.y*lt.y,Ut=Mt!==0?1/Mt:1/0,Ft=2*Math.sqrt(2-2*Mt),xi=Mt<Kk&&Ye&&Ze,Ei=ht.x*lt.y-ht.y*lt.x>0;if(xi&&vt>be){const Yt=Ve.dist(Ye);if(Yt>2*Re){const ii=Ve.sub(Ve.sub(Ye)._mult(Re/Yt)._round());this.updateDistance(Ye,ii),this.addCurrentVertex(ii,ht,0,0,Oe),Ye=ii}}const ti=Ye&&Ze;let Xt=ti?f:te?"butt":C;if(ti&&Xt==="round"&&(Ut<B?Xt="miter":Ut<=2&&(Xt="fakeround")),Xt==="miter"&&Ut>z&&(Xt="bevel"),Xt==="bevel"&&(Ut>2&&(Xt="flipbevel"),Ut<z&&(Xt="miter")),Ye&&this.updateDistance(Ye,Ve),Xt==="miter")It._mult(Ut),this.addCurrentVertex(Ve,It,0,0,Oe);else if(Xt==="flipbevel"){if(Ut>100)It=lt.mult(-1);else{const Yt=Ut*ht.add(lt).mag()/ht.sub(lt).mag();It._perp()._mult(Yt*(Ei?-1:1))}this.addCurrentVertex(Ve,It,0,0,Oe),this.addCurrentVertex(Ve,It.mult(-1),0,0,Oe)}else if(Xt==="bevel"||Xt==="fakeround"){const Yt=-Math.sqrt(Ut*Ut-1),ii=Ei?Yt:0,Qt=Ei?0:Yt;if(Ye&&this.addCurrentVertex(Ve,ht,ii,Qt,Oe),Xt==="fakeround"){const Vt=Math.round(180*Ft/Math.PI/20);for(let Mi=1;Mi<Vt;Mi++){let ki=Mi/Vt;if(ki!==.5){const tn=ki-.5;ki+=ki*tn*(ki-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*tn*tn+(.848013+xt*(.215638*xt-1.06021)))}const lr=lt.sub(ht)._mult(ki)._add(ht)._unit()._mult(Ei?-1:1);this.addHalfVertex(Ve,lr.x,lr.y,!1,Ei,0,Oe)}}Ze&&this.addCurrentVertex(Ve,lt,-ii,-Qt,Oe)}else if(Xt==="butt")this.addCurrentVertex(Ve,It,0,0,Oe);else if(Xt==="square"){const Yt=Ye?1:-1;this.addCurrentVertex(Ve,It,Yt,Yt,Oe)}else Xt==="round"&&(Ye&&(this.addCurrentVertex(Ve,ht,0,0,Oe),this.addCurrentVertex(Ve,ht,1,1,Oe,!0)),Ze&&(this.addCurrentVertex(Ve,lt,-1,-1,Oe,!0),this.addCurrentVertex(Ve,lt,0,0,Oe)));if(xi&&vt<se-1){const Yt=Ve.dist(Ze);if(Yt>2*Re){const ii=Ve.add(Ze.sub(Ve)._mult(Re/Yt)._round());this.updateDistance(Ve,ii),this.addCurrentVertex(ii,lt,0,0,Oe),Ve=ii}}}}addCurrentVertex(r,h,f,C,z,B=!1){const te=h.y*C-h.x,se=-h.y-h.x*C;this.addHalfVertex(r,h.x+h.y*f,h.y-h.x*f,B,!1,f,z),this.addHalfVertex(r,te,se,B,!0,-C,z),this.distance>h_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,h,f,C,z,B))}addHalfVertex({x:r,y:h},f,C,z,B,te,se){const be=.5*(this.lineClips?this.scaledDistance*(h_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(h<<1)+(B?1:0),Math.round(63*f)+128,Math.round(63*C)+128,1+(te===0?0:te<0?-1:1)|(63&be)<<2,be>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=se.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),se.primitiveLength++),B?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,h){this.distance+=r.dist(h),this.updateScaledDistance()}}fi("LineBucket",xx,{omit:["layers","patternFeatures"]});const Qk=new Bn({"line-cap":new Si(Pe.layout_line["line-cap"]),"line-join":new Di(Pe.layout_line["line-join"]),"line-miter-limit":new Si(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Si(Pe.layout_line["line-round-limit"]),"line-sort-key":new Di(Pe.layout_line["line-sort-key"])});var u_={paint:new Bn({"line-opacity":new Di(Pe.paint_line["line-opacity"]),"line-color":new Di(Pe.paint_line["line-color"]),"line-translate":new Si(Pe.paint_line["line-translate"]),"line-translate-anchor":new Si(Pe.paint_line["line-translate-anchor"]),"line-width":new Di(Pe.paint_line["line-width"]),"line-gap-width":new Di(Pe.paint_line["line-gap-width"]),"line-offset":new Di(Pe.paint_line["line-offset"]),"line-blur":new Di(Pe.paint_line["line-blur"]),"line-dasharray":new Fc(Pe.paint_line["line-dasharray"]),"line-pattern":new Bc(Pe.paint_line["line-pattern"]),"line-gradient":new Vd(Pe.paint_line["line-gradient"])}),layout:Qk};const d_=new class extends Di{possiblyEvaluate(l,r){return r=new sn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(l,r)}evaluate(l,r,h,f){return r=_({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(l,r,h,f)}}(u_.paint.properties["line-width"].specification);function p_(l,r){return r>0?r+2*l:l}d_.useIntegerZoom=!0;const Jk=Rn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eA=Rn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Rn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tA=Rn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Rn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const f_=Rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iA=Rn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rA(l,r,h){return l.sections.forEach(f=>{f.text=function(C,z,B){const te=z.layout.get("text-transform").evaluate(B,{});return te==="uppercase"?C=C.toLocaleUpperCase():te==="lowercase"&&(C=C.toLocaleLowerCase()),ga.applyArabicShaping&&(C=ga.applyArabicShaping(C)),C}(f.text,r,h)}),l}Rn([{name:"triangle",components:3,type:"Uint16"}]),Rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Rn([{type:"Float32",name:"offsetX"}]),Rn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const tp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var rs=24,bx=$r,m_=function(l,r,h,f,C){var z,B,te=8*C-f-1,se=(1<<te)-1,be=se>>1,Re=-7,Oe=C-1,Ve=-1,Ye=l[r+Oe];for(Oe+=Ve,z=Ye&(1<<-Re)-1,Ye>>=-Re,Re+=te;Re>0;z=256*z+l[r+Oe],Oe+=Ve,Re-=8);for(B=z&(1<<-Re)-1,z>>=-Re,Re+=f;Re>0;B=256*B+l[r+Oe],Oe+=Ve,Re-=8);if(z===0)z=1-be;else{if(z===se)return B?NaN:1/0*(Ye?-1:1);B+=Math.pow(2,f),z-=be}return(Ye?-1:1)*B*Math.pow(2,z-f)},g_=function(l,r,h,f,C,z){var B,te,se,be=8*z-C-1,Re=(1<<be)-1,Oe=Re>>1,Ve=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ye=0,Ze=1,ht=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(te=isNaN(r)?1:0,B=Re):(B=Math.floor(Math.log(r)/Math.LN2),r*(se=Math.pow(2,-B))<1&&(B--,se*=2),(r+=B+Oe>=1?Ve/se:Ve*Math.pow(2,1-Oe))*se>=2&&(B++,se/=2),B+Oe>=Re?(te=0,B=Re):B+Oe>=1?(te=(r*se-1)*Math.pow(2,C),B+=Oe):(te=r*Math.pow(2,Oe-1)*Math.pow(2,C),B=0));C>=8;l[h+Ye]=255&te,Ye+=Ze,te/=256,C-=8);for(B=B<<C|te,be+=C;be>0;l[h+Ye]=255&B,Ye+=Ze,B/=256,be-=8);l[h+Ye-Ze]|=128*ht};function $r(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}$r.Varint=0,$r.Fixed64=1,$r.Bytes=2,$r.Fixed32=5;var Fl,vx=4294967296,y_=1/vx,x_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function rl(l){return l.type===$r.Bytes?l.readVarint()+l.pos:l.pos+1}function pu(l,r,h){return h?4294967296*r+(l>>>0):4294967296*(r>>>0)+(l>>>0)}function b_(l,r,h){var f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));h.realloc(f);for(var C=h.pos-1;C>=l;C--)h.buf[C+f]=h.buf[C]}function nA(l,r){for(var h=0;h<l.length;h++)r.writeVarint(l[h])}function sA(l,r){for(var h=0;h<l.length;h++)r.writeSVarint(l[h])}function aA(l,r){for(var h=0;h<l.length;h++)r.writeFloat(l[h])}function oA(l,r){for(var h=0;h<l.length;h++)r.writeDouble(l[h])}function lA(l,r){for(var h=0;h<l.length;h++)r.writeBoolean(l[h])}function cA(l,r){for(var h=0;h<l.length;h++)r.writeFixed32(l[h])}function hA(l,r){for(var h=0;h<l.length;h++)r.writeSFixed32(l[h])}function uA(l,r){for(var h=0;h<l.length;h++)r.writeFixed64(l[h])}function dA(l,r){for(var h=0;h<l.length;h++)r.writeSFixed64(l[h])}function Em(l,r){return(l[r]|l[r+1]<<8|l[r+2]<<16)+16777216*l[r+3]}function fu(l,r,h){l[h]=r,l[h+1]=r>>>8,l[h+2]=r>>>16,l[h+3]=r>>>24}function v_(l,r){return(l[r]|l[r+1]<<8|l[r+2]<<16)+(l[r+3]<<24)}function pA(l,r,h){l===1&&h.readMessage(fA,r)}function fA(l,r,h){if(l===3){const{id:f,bitmap:C,width:z,height:B,left:te,top:se,advance:be}=h.readMessage(mA,{});r.push({id:f,bitmap:new Yd({width:z+6,height:B+6},C),metrics:{width:z,height:B,left:te,top:se,advance:be}})}}function mA(l,r,h){l===1?r.id=h.readVarint():l===2?r.bitmap=h.readBytes():l===3?r.width=h.readVarint():l===4?r.height=h.readVarint():l===5?r.left=h.readSVarint():l===6?r.top=h.readSVarint():l===7&&(r.advance=h.readVarint())}function __(l){let r=0,h=0;for(const B of l)r+=B.w*B.h,h=Math.max(h,B.w);l.sort((B,te)=>te.h-B.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),h),h:1/0}];let C=0,z=0;for(const B of l)for(let te=f.length-1;te>=0;te--){const se=f[te];if(!(B.w>se.w||B.h>se.h)){if(B.x=se.x,B.y=se.y,z=Math.max(z,B.y+B.h),C=Math.max(C,B.x+B.w),B.w===se.w&&B.h===se.h){const be=f.pop();te<f.length&&(f[te]=be)}else B.h===se.h?(se.x+=B.w,se.w-=B.w):B.w===se.w?(se.y+=B.h,se.h-=B.h):(f.push({x:se.x+B.w,y:se.y,w:se.w-B.w,h:B.h}),se.y+=B.h,se.h-=B.h);break}}return{w:C,h:z,fill:r/(C*z)||0}}$r.prototype={destroy:function(){this.buf=null},readFields:function(l,r,h){for(h=h||this.length;this.pos<h;){var f=this.readVarint(),C=f>>3,z=this.pos;this.type=7&f,l(C,r,this),this.pos===z&&this.skip(f)}return r},readMessage:function(l,r){return this.readFields(l,r,this.readVarint()+this.pos)},readFixed32:function(){var l=Em(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=v_(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=Em(this.buf,this.pos)+Em(this.buf,this.pos+4)*vx;return this.pos+=8,l},readSFixed64:function(){var l=Em(this.buf,this.pos)+v_(this.buf,this.pos+4)*vx;return this.pos+=8,l},readFloat:function(){var l=m_(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=m_(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var r,h,f=this.buf;return r=127&(h=f[this.pos++]),h<128?r:(r|=(127&(h=f[this.pos++]))<<7,h<128?r:(r|=(127&(h=f[this.pos++]))<<14,h<128?r:(r|=(127&(h=f[this.pos++]))<<21,h<128?r:function(C,z,B){var te,se,be=B.buf;if(te=(112&(se=be[B.pos++]))>>4,se<128||(te|=(127&(se=be[B.pos++]))<<3,se<128)||(te|=(127&(se=be[B.pos++]))<<10,se<128)||(te|=(127&(se=be[B.pos++]))<<17,se<128)||(te|=(127&(se=be[B.pos++]))<<24,se<128)||(te|=(1&(se=be[B.pos++]))<<31,se<128))return pu(C,te,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(h=f[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,r=this.pos;return this.pos=l,l-r>=12&&x_?function(h,f,C){return x_.decode(h.subarray(f,C))}(this.buf,r,l):function(h,f,C){for(var z="",B=f;B<C;){var te,se,be,Re=h[B],Oe=null,Ve=Re>239?4:Re>223?3:Re>191?2:1;if(B+Ve>C)break;Ve===1?Re<128&&(Oe=Re):Ve===2?(192&(te=h[B+1]))==128&&(Oe=(31&Re)<<6|63&te)<=127&&(Oe=null):Ve===3?(se=h[B+2],(192&(te=h[B+1]))==128&&(192&se)==128&&((Oe=(15&Re)<<12|(63&te)<<6|63&se)<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null)):Ve===4&&(se=h[B+2],be=h[B+3],(192&(te=h[B+1]))==128&&(192&se)==128&&(192&be)==128&&((Oe=(15&Re)<<18|(63&te)<<12|(63&se)<<6|63&be)<=65535||Oe>=1114112)&&(Oe=null)),Oe===null?(Oe=65533,Ve=1):Oe>65535&&(Oe-=65536,z+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),z+=String.fromCharCode(Oe),B+=Ve}return z}(this.buf,r,l)},readBytes:function(){var l=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,l);return this.pos=l,r},readPackedVarint:function(l,r){if(this.type!==$r.Bytes)return l.push(this.readVarint(r));var h=rl(this);for(l=l||[];this.pos<h;)l.push(this.readVarint(r));return l},readPackedSVarint:function(l){if(this.type!==$r.Bytes)return l.push(this.readSVarint());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==$r.Bytes)return l.push(this.readBoolean());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==$r.Bytes)return l.push(this.readFloat());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==$r.Bytes)return l.push(this.readDouble());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==$r.Bytes)return l.push(this.readFixed32());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==$r.Bytes)return l.push(this.readSFixed32());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==$r.Bytes)return l.push(this.readFixed64());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==$r.Bytes)return l.push(this.readSFixed64());var r=rl(this);for(l=l||[];this.pos<r;)l.push(this.readSFixed64());return l},skip:function(l){var r=7&l;if(r===$r.Varint)for(;this.buf[this.pos++]>127;);else if(r===$r.Bytes)this.pos=this.readVarint()+this.pos;else if(r===$r.Fixed32)this.pos+=4;else{if(r!==$r.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(l,r){this.writeVarint(l<<3|r)},realloc:function(l){for(var r=this.length||16;r<this.pos+l;)r*=2;if(r!==this.length){var h=new Uint8Array(r);h.set(this.buf),this.buf=h,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),fu(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),fu(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),fu(this.buf,-1&l,this.pos),fu(this.buf,Math.floor(l*y_),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),fu(this.buf,-1&l,this.pos),fu(this.buf,Math.floor(l*y_),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(r,h){var f,C;if(r>=0?(f=r%4294967296|0,C=r/4294967296|0):(C=~(-r/4294967296),4294967295^(f=~(-r%4294967296))?f=f+1|0:(f=0,C=C+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(z,B,te){te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,te.buf[te.pos]=127&(z>>>=7)}(f,0,h),function(z,B){var te=(7&z)<<4;B.buf[B.pos++]|=te|((z>>>=3)?128:0),z&&(B.buf[B.pos++]=127&z|((z>>>=7)?128:0),z&&(B.buf[B.pos++]=127&z|((z>>>=7)?128:0),z&&(B.buf[B.pos++]=127&z|((z>>>=7)?128:0),z&&(B.buf[B.pos++]=127&z|((z>>>=7)?128:0),z&&(B.buf[B.pos++]=127&z)))))}(C,h)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var r=this.pos;this.pos=function(f,C,z){for(var B,te,se=0;se<C.length;se++){if((B=C.charCodeAt(se))>55295&&B<57344){if(!te){B>56319||se+1===C.length?(f[z++]=239,f[z++]=191,f[z++]=189):te=B;continue}if(B<56320){f[z++]=239,f[z++]=191,f[z++]=189,te=B;continue}B=te-55296<<10|B-56320|65536,te=null}else te&&(f[z++]=239,f[z++]=191,f[z++]=189,te=null);B<128?f[z++]=B:(B<2048?f[z++]=B>>6|192:(B<65536?f[z++]=B>>12|224:(f[z++]=B>>18|240,f[z++]=B>>12&63|128),f[z++]=B>>6&63|128),f[z++]=63&B|128)}return z}(this.buf,l,this.pos);var h=this.pos-r;h>=128&&b_(r,h,this),this.pos=r-1,this.writeVarint(h),this.pos+=h},writeFloat:function(l){this.realloc(4),g_(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),g_(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var r=l.length;this.writeVarint(r),this.realloc(r);for(var h=0;h<r;h++)this.buf[this.pos++]=l[h]},writeRawMessage:function(l,r){this.pos++;var h=this.pos;l(r,this);var f=this.pos-h;f>=128&&b_(h,f,this),this.pos=h-1,this.writeVarint(f),this.pos+=f},writeMessage:function(l,r,h){this.writeTag(l,$r.Bytes),this.writeRawMessage(r,h)},writePackedVarint:function(l,r){r.length&&this.writeMessage(l,nA,r)},writePackedSVarint:function(l,r){r.length&&this.writeMessage(l,sA,r)},writePackedBoolean:function(l,r){r.length&&this.writeMessage(l,lA,r)},writePackedFloat:function(l,r){r.length&&this.writeMessage(l,aA,r)},writePackedDouble:function(l,r){r.length&&this.writeMessage(l,oA,r)},writePackedFixed32:function(l,r){r.length&&this.writeMessage(l,cA,r)},writePackedSFixed32:function(l,r){r.length&&this.writeMessage(l,hA,r)},writePackedFixed64:function(l,r){r.length&&this.writeMessage(l,uA,r)},writePackedSFixed64:function(l,r){r.length&&this.writeMessage(l,dA,r)},writeBytesField:function(l,r){this.writeTag(l,$r.Bytes),this.writeBytes(r)},writeFixed32Field:function(l,r){this.writeTag(l,$r.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(l,r){this.writeTag(l,$r.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(l,r){this.writeTag(l,$r.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(l,r){this.writeTag(l,$r.Fixed64),this.writeSFixed64(r)},writeVarintField:function(l,r){this.writeTag(l,$r.Varint),this.writeVarint(r)},writeSVarintField:function(l,r){this.writeTag(l,$r.Varint),this.writeSVarint(r)},writeStringField:function(l,r){this.writeTag(l,$r.Bytes),this.writeString(r)},writeFloatField:function(l,r){this.writeTag(l,$r.Fixed32),this.writeFloat(r)},writeDoubleField:function(l,r){this.writeTag(l,$r.Fixed64),this.writeDouble(r)},writeBooleanField:function(l,r){this.writeVarintField(l,!!r)}};class _x{constructor(r,{pixelRatio:h,version:f,stretchX:C,stretchY:z,content:B}){this.paddedRect=r,this.pixelRatio=h,this.stretchX=C,this.stretchY=z,this.content=B,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class w_{constructor(r,h){const f={},C={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,f,z),this.addImages(h,C,z);const{w:B,h:te}=__(z),se=new Pa({width:B||1,height:te||1});for(const be in r){const Re=r[be],Oe=f[be].paddedRect;Pa.copy(Re.data,se,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},Re.data)}for(const be in h){const Re=h[be],Oe=C[be].paddedRect,Ve=Oe.x+1,Ye=Oe.y+1,Ze=Re.data.width,ht=Re.data.height;Pa.copy(Re.data,se,{x:0,y:0},{x:Ve,y:Ye},Re.data),Pa.copy(Re.data,se,{x:0,y:ht-1},{x:Ve,y:Ye-1},{width:Ze,height:1}),Pa.copy(Re.data,se,{x:0,y:0},{x:Ve,y:Ye+ht},{width:Ze,height:1}),Pa.copy(Re.data,se,{x:Ze-1,y:0},{x:Ve-1,y:Ye},{width:1,height:ht}),Pa.copy(Re.data,se,{x:0,y:0},{x:Ve+Ze,y:Ye},{width:1,height:ht})}this.image=se,this.iconPositions=f,this.patternPositions=C}addImages(r,h,f){for(const C in r){const z=r[C],B={x:0,y:0,w:z.data.width+2,h:z.data.height+2};f.push(B),h[C]=new _x(B,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(C)}}patchUpdatedImages(r,h){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),h),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),h)}patchUpdatedImage(r,h,f){if(!r||!h||r.version===h.version)return;r.version=h.version;const[C,z]=r.tl;f.update(h.data,void 0,{x:C,y:z})}}fi("ImagePosition",_x),fi("ImageAtlas",w_),n.WritingMode=void 0,(Fl=n.WritingMode||(n.WritingMode={}))[Fl.none=0]="none",Fl[Fl.horizontal=1]="horizontal",Fl[Fl.vertical=2]="vertical",Fl[Fl.horizontalOnly=3]="horizontalOnly";const Cm=-17;class ip{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,h){const f=new ip;return f.scale=r||1,f.fontStack=h,f}static forImage(r){const h=new ip;return h.imageName=r,h}}class mu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,h){const f=new mu;for(let C=0;C<r.sections.length;C++){const z=r.sections[C];z.image?f.addImageSection(z):f.addTextSection(z,h)}return f}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let h="";for(let f=0;f<r.length;f++){const C=r.charCodeAt(f+1)||null,z=r.charCodeAt(f-1)||null;h+=C&&cm(C)&&!tp[r[f+1]]||z&&cm(z)&&!tp[r[f-1]]||!tp[r[f]]?r[f]:tp[r[f]]}return h}(this.text)}trim(){let r=0;for(let f=0;f<this.text.length&&km[this.text.charCodeAt(f)];f++)r++;let h=this.text.length;for(let f=this.text.length-1;f>=0&&f>=r&&km[this.text.charCodeAt(f)];f--)h--;this.text=this.text.substring(r,h),this.sectionIndex=this.sectionIndex.slice(r,h)}substring(r,h){const f=new mu;return f.text=this.text.substring(r,h),f.sectionIndex=this.sectionIndex.slice(r,h),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,h)=>Math.max(r,this.sections[h].scale),0)}addTextSection(r,h){this.text+=r.text,this.sections.push(ip.forText(r.scale,r.fontStack||h));const f=this.sections.length-1;for(let C=0;C<r.text.length;++C)this.sectionIndex.push(f)}addImageSection(r){const h=r.image?r.image.name:"";if(h.length===0)return void w("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(ip.forImage(h)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Sm(l,r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht){const lt=mu.fromFeature(l,C);let vt;Oe===n.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:It,processStyledBidirectionalText:xt}=ga;if(It&&lt.sections.length===1){vt=[];const Ft=It(lt.toString(),wx(lt,be,z,r,f,Ye,Ze));for(const xi of Ft){const Ei=new mu;Ei.text=xi,Ei.sections=lt.sections;for(let ti=0;ti<xi.length;ti++)Ei.sectionIndex.push(0);vt.push(Ei)}}else if(xt){vt=[];const Ft=xt(lt.text,lt.sectionIndex,wx(lt,be,z,r,f,Ye,Ze));for(const xi of Ft){const Ei=new mu;Ei.text=xi[0],Ei.sectionIndex=xi[1],Ei.sections=lt.sections,vt.push(Ei)}}else vt=function(Ft,xi){const Ei=[],ti=Ft.text;let Xt=0;for(const Yt of xi)Ei.push(Ft.substring(Xt,Yt)),Xt=Yt;return Xt<ti.length&&Ei.push(Ft.substring(Xt,ti.length)),Ei}(lt,wx(lt,be,z,r,f,Ye,Ze));const Mt=[],Ut={positionedLines:Mt,text:lt.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Oe,iconsInText:!1,verticalizable:!1};return function(Ft,xi,Ei,ti,Xt,Yt,ii,Qt,Vt,Mi,ki,lr){let tn=0,on=Cm,Un=0,Da=0;const fs=Qt==="right"?1:Qt==="left"?0:.5;let zn=0;for(const Nn of Xt){Nn.trim();const gs=Nn.getMaxScale(),Ts=(gs-1)*rs,$s={positionedGlyphs:[],lineOffset:0};Ft.positionedLines[zn]=$s;const Qs=$s.positionedGlyphs;let Js=0;if(!Nn.length()){on+=Yt,++zn;continue}for(let Xn=0;Xn<Nn.length();Xn++){const dr=Nn.getSection(Xn),xa=Nn.getSectionIndex(Xn),ys=Nn.getCharCode(Xn);let Es=0,Ha=null,eo=null,to=null,sl=rs;const Wa=!(Vt===n.WritingMode.horizontal||!ki&&!jc(ys)||ki&&(km[ys]||(Zn=ys,ei.Arabic(Zn)||ei["Arabic Supplement"](Zn)||ei["Arabic Extended-A"](Zn)||ei["Arabic Presentation Forms-A"](Zn)||ei["Arabic Presentation Forms-B"](Zn))));if(dr.imageName){const Ra=ti[dr.imageName];if(!Ra)continue;to=dr.imageName,Ft.iconsInText=Ft.iconsInText||!0,eo=Ra.paddedRect;const ea=Ra.displaySize;dr.scale=dr.scale*rs/lr,Ha={width:ea[0],height:ea[1],left:1,top:-3,advance:Wa?ea[1]:ea[0]},Es=Ts+(rs-ea[1]*dr.scale),sl=Ha.advance;const al=Wa?ea[0]*dr.scale-rs*gs:ea[1]*dr.scale-rs*gs;al>0&&al>Js&&(Js=al)}else{const Ra=Ei[dr.fontStack],ea=Ra&&Ra[ys];if(ea&&ea.rect)eo=ea.rect,Ha=ea.metrics;else{const al=xi[dr.fontStack],sp=al&&al[ys];if(!sp)continue;Ha=sp.metrics}Es=(gs-dr.scale)*rs}Wa?(Ft.verticalizable=!0,Qs.push({glyph:ys,imageName:to,x:tn,y:on+Es,vertical:Wa,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:xa,metrics:Ha,rect:eo}),tn+=sl*dr.scale+Mi):(Qs.push({glyph:ys,imageName:to,x:tn,y:on+Es,vertical:Wa,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:xa,metrics:Ha,rect:eo}),tn+=Ha.advance*dr.scale+Mi)}Qs.length!==0&&(Un=Math.max(tn-Mi,Un),xA(Qs,0,Qs.length-1,fs,Js)),tn=0;const dn=Yt*gs+Js;$s.lineOffset=Math.max(Js,Ts),on+=dn,Da=Math.max(dn,Da),++zn}var Zn;const ms=on-Cm,{horizontalAlign:ws,verticalAlign:Ks}=Tx(ii);(function(Nn,gs,Ts,$s,Qs,Js,dn,Xn,dr){const xa=(gs-Ts)*Qs;let ys=0;ys=Js!==dn?-Xn*$s-Cm:(-$s*dr+.5)*dn;for(const Es of Nn)for(const Ha of Es.positionedGlyphs)Ha.x+=xa,Ha.y+=ys})(Ft.positionedLines,fs,ws,Ks,Un,Da,Yt,ms,Xt.length),Ft.top+=-Ks*ms,Ft.bottom=Ft.top+ms,Ft.left+=-ws*Un,Ft.right=Ft.left+Un}(Ut,r,h,f,vt,B,te,se,Oe,be,Ve,ht),!function(Ft){for(const xi of Ft)if(xi.positionedGlyphs.length!==0)return!1;return!0}(Mt)&&Ut}const km={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function T_(l,r,h,f,C,z){if(r.imageName){const B=f[r.imageName];return B?B.displaySize[0]*r.scale*rs/z+C:0}{const B=h[r.fontStack],te=B&&B[l];return te?te.metrics.advance*r.scale+C:0}}function E_(l,r,h,f){const C=Math.pow(l-r,2);return f?l<r?C/2:2*C:C+Math.abs(h)*h}function yA(l,r,h){let f=0;return l===10&&(f-=1e4),h&&(f+=150),l!==40&&l!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function C_(l,r,h,f,C,z){let B=null,te=E_(r,h,C,z);for(const se of f){const be=E_(r-se.x,h,C,z)+se.badness;be<=te&&(B=se,te=be)}return{index:l,x:r,priorBreak:B,badness:te}}function S_(l){return l?S_(l.priorBreak).concat(l.index):[]}function wx(l,r,h,f,C,z,B){if(z!=="point")return[];if(!l)return[];const te=[],se=function(Ve,Ye,Ze,ht,lt,vt){let It=0;for(let xt=0;xt<Ve.length();xt++){const Mt=Ve.getSection(xt);It+=T_(Ve.getCharCode(xt),Mt,ht,lt,Ye,vt)}return It/Math.max(1,Math.ceil(It/Ze))}(l,r,h,f,C,B),be=l.text.indexOf("​")>=0;let Re=0;for(let Ve=0;Ve<l.length();Ve++){const Ye=l.getSection(Ve),Ze=l.getCharCode(Ve);if(km[Ze]||(Re+=T_(Ze,Ye,f,C,r,B)),Ve<l.length()-1){const ht=!((Oe=Ze)<11904||!(ei["Bopomofo Extended"](Oe)||ei.Bopomofo(Oe)||ei["CJK Compatibility Forms"](Oe)||ei["CJK Compatibility Ideographs"](Oe)||ei["CJK Compatibility"](Oe)||ei["CJK Radicals Supplement"](Oe)||ei["CJK Strokes"](Oe)||ei["CJK Symbols and Punctuation"](Oe)||ei["CJK Unified Ideographs Extension A"](Oe)||ei["CJK Unified Ideographs"](Oe)||ei["Enclosed CJK Letters and Months"](Oe)||ei["Halfwidth and Fullwidth Forms"](Oe)||ei.Hiragana(Oe)||ei["Ideographic Description Characters"](Oe)||ei["Kangxi Radicals"](Oe)||ei["Katakana Phonetic Extensions"](Oe)||ei.Katakana(Oe)||ei["Vertical Forms"](Oe)||ei["Yi Radicals"](Oe)||ei["Yi Syllables"](Oe)));(gA[Ze]||ht||Ye.imageName)&&te.push(C_(Ve+1,Re,se,te,yA(Ze,l.getCharCode(Ve+1),ht&&be),!1))}}var Oe;return S_(C_(l.length(),Re,se,te,0,!0))}function Tx(l){let r=.5,h=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:r,verticalAlign:h}}function xA(l,r,h,f,C){if(!f&&!C)return;const z=l[h],B=(l[h].x+z.metrics.advance*z.scale)*f;for(let te=r;te<=h;te++)l[te].x-=B,l[te].y+=C}function bA(l,r,h){const{horizontalAlign:f,verticalAlign:C}=Tx(h),z=r[0]-l.displaySize[0]*f,B=r[1]-l.displaySize[1]*C;return{image:l,top:B,bottom:B+l.displaySize[1],left:z,right:z+l.displaySize[0]}}function k_(l,r,h,f,C,z){const B=l.image;let te;if(B.content){const lt=B.content,vt=B.pixelRatio||1;te=[lt[0]/vt,lt[1]/vt,B.displaySize[0]-lt[2]/vt,B.displaySize[1]-lt[3]/vt]}const se=r.left*z,be=r.right*z;let Re,Oe,Ve,Ye;h==="width"||h==="both"?(Ye=C[0]+se-f[3],Oe=C[0]+be+f[1]):(Ye=C[0]+(se+be-B.displaySize[0])/2,Oe=Ye+B.displaySize[0]);const Ze=r.top*z,ht=r.bottom*z;return h==="height"||h==="both"?(Re=C[1]+Ze-f[0],Ve=C[1]+ht+f[2]):(Re=C[1]+(Ze+ht-B.displaySize[1])/2,Ve=Re+B.displaySize[1]),{image:B,top:Re,right:Oe,bottom:Ve,left:Ye,collisionPadding:te}}const nl=128;function A_(l,r){const{expression:h}=r;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new sn(l+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:C}=h;let z=0;for(;z<f.length&&f[z]<=l;)z++;z=Math.max(0,z-1);let B=z;for(;B<f.length&&f[B]<l+1;)B++;B=Math.min(f.length-1,B);const te=f[z],se=f[B];return h.kind==="composite"?{kind:"composite",minZoom:te,maxZoom:se,interpolationType:C}:{kind:"camera",minZoom:te,maxZoom:se,minSize:h.evaluate(new sn(te)),maxSize:h.evaluate(new sn(se)),interpolationType:C}}}class Ul extends G{constructor(r,h,f,C){super(r,h),this.angle=f,C!==void 0&&(this.segment=C)}clone(){return new Ul(this.x,this.y,this.angle,this.segment)}}function M_(l,r,h,f,C){if(r.segment===void 0)return!0;let z=r,B=r.segment+1,te=0;for(;te>-h/2;){if(B--,B<0)return!1;te-=l[B].dist(z),z=l[B]}te+=l[B].dist(l[B+1]),B++;const se=[];let be=0;for(;te<h/2;){const Re=l[B],Oe=l[B+1];if(!Oe)return!1;let Ve=l[B-1].angleTo(Re)-Re.angleTo(Oe);for(Ve=Math.abs((Ve+3*Math.PI)%(2*Math.PI)-Math.PI),se.push({distance:te,angleDelta:Ve}),be+=Ve;te-se[0].distance>f;)be-=se.shift().angleDelta;if(be>C)return!1;B++,te+=Re.dist(Oe)}return!0}function P_(l){let r=0;for(let h=0;h<l.length-1;h++)r+=l[h].dist(l[h+1]);return r}function I_(l,r,h){return l?.6*r*h:0}function D_(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function vA(l,r,h,f,C,z){const B=I_(h,C,z),te=D_(h,f)*z;let se=0;const be=P_(l)/2;for(let Re=0;Re<l.length-1;Re++){const Oe=l[Re],Ve=l[Re+1],Ye=Oe.dist(Ve);if(se+Ye>be){const Ze=(be-se)/Ye,ht=hn(Oe.x,Ve.x,Ze),lt=hn(Oe.y,Ve.y,Ze),vt=new Ul(ht,lt,Ve.angleTo(Oe),Re);return vt._round(),!B||M_(l,vt,te,B,r)?vt:void 0}se+=Ye}}function _A(l,r,h,f,C,z,B,te,se){const be=I_(f,z,B),Re=D_(f,C),Oe=Re*B,Ve=l[0].x===0||l[0].x===se||l[0].y===0||l[0].y===se;return r-Oe<r/4&&(r=Oe+r/4),R_(l,Ve?r/2*te%r:(Re/2+2*z)*B*te%r,r,be,h,Oe,Ve,!1,se)}function R_(l,r,h,f,C,z,B,te,se){const be=z/2,Re=P_(l);let Oe=0,Ve=r-h,Ye=[];for(let Ze=0;Ze<l.length-1;Ze++){const ht=l[Ze],lt=l[Ze+1],vt=ht.dist(lt),It=lt.angleTo(ht);for(;Ve+h<Oe+vt;){Ve+=h;const xt=(Ve-Oe)/vt,Mt=hn(ht.x,lt.x,xt),Ut=hn(ht.y,lt.y,xt);if(Mt>=0&&Mt<se&&Ut>=0&&Ut<se&&Ve-be>=0&&Ve+be<=Re){const Ft=new Ul(Mt,Ut,It,Ze);Ft._round(),f&&!M_(l,Ft,z,f,C)||Ye.push(Ft)}}Oe+=vt}return te||Ye.length||B||(Ye=R_(l,Oe/2,h,f,C,z,B,!0,se)),Ye}function L_(l,r,h,f,C){const z=[];for(let B=0;B<l.length;B++){const te=l[B];let se;for(let be=0;be<te.length-1;be++){let Re=te[be],Oe=te[be+1];Re.x<r&&Oe.x<r||(Re.x<r?Re=new G(r,Re.y+(r-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round():Oe.x<r&&(Oe=new G(r,Re.y+(r-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round()),Re.y<h&&Oe.y<h||(Re.y<h?Re=new G(Re.x+(h-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),h)._round():Oe.y<h&&(Oe=new G(Re.x+(h-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),h)._round()),Re.x>=f&&Oe.x>=f||(Re.x>=f?Re=new G(f,Re.y+(f-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round():Oe.x>=f&&(Oe=new G(f,Re.y+(f-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round()),Re.y>=C&&Oe.y>=C||(Re.y>=C?Re=new G(Re.x+(C-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),C)._round():Oe.y>=C&&(Oe=new G(Re.x+(C-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),C)._round()),se&&Re.equals(se[se.length-1])||(se=[Re],z.push(se)),se.push(Oe)))))}}return z}function z_(l,r,h,f){const C=[],z=l.image,B=z.pixelRatio,te=z.paddedRect.w-2,se=z.paddedRect.h-2,be=l.right-l.left,Re=l.bottom-l.top,Oe=z.stretchX||[[0,te]],Ve=z.stretchY||[[0,se]],Ye=(Yt,ii)=>Yt+ii[1]-ii[0],Ze=Oe.reduce(Ye,0),ht=Ve.reduce(Ye,0),lt=te-Ze,vt=se-ht;let It=0,xt=Ze,Mt=0,Ut=ht,Ft=0,xi=lt,Ei=0,ti=vt;if(z.content&&f){const Yt=z.content;It=Am(Oe,0,Yt[0]),Mt=Am(Ve,0,Yt[1]),xt=Am(Oe,Yt[0],Yt[2]),Ut=Am(Ve,Yt[1],Yt[3]),Ft=Yt[0]-It,Ei=Yt[1]-Mt,xi=Yt[2]-Yt[0]-xt,ti=Yt[3]-Yt[1]-Ut}const Xt=(Yt,ii,Qt,Vt)=>{const Mi=Mm(Yt.stretch-It,xt,be,l.left),ki=Pm(Yt.fixed-Ft,xi,Yt.stretch,Ze),lr=Mm(ii.stretch-Mt,Ut,Re,l.top),tn=Pm(ii.fixed-Ei,ti,ii.stretch,ht),on=Mm(Qt.stretch-It,xt,be,l.left),Un=Pm(Qt.fixed-Ft,xi,Qt.stretch,Ze),Da=Mm(Vt.stretch-Mt,Ut,Re,l.top),fs=Pm(Vt.fixed-Ei,ti,Vt.stretch,ht),zn=new G(Mi,lr),Zn=new G(on,lr),ms=new G(on,Da),ws=new G(Mi,Da),Ks=new G(ki/B,tn/B),Nn=new G(Un/B,fs/B),gs=r*Math.PI/180;if(gs){const Qs=Math.sin(gs),Js=Math.cos(gs),dn=[Js,-Qs,Qs,Js];zn._matMult(dn),Zn._matMult(dn),ws._matMult(dn),ms._matMult(dn)}const Ts=Yt.stretch+Yt.fixed,$s=ii.stretch+ii.fixed;return{tl:zn,tr:Zn,bl:ws,br:ms,tex:{x:z.paddedRect.x+1+Ts,y:z.paddedRect.y+1+$s,w:Qt.stretch+Qt.fixed-Ts,h:Vt.stretch+Vt.fixed-$s},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ks,pixelOffsetBR:Nn,minFontScaleX:xi/B/be,minFontScaleY:ti/B/Re,isSDF:h}};if(f&&(z.stretchX||z.stretchY)){const Yt=N_(Oe,lt,Ze),ii=N_(Ve,vt,ht);for(let Qt=0;Qt<Yt.length-1;Qt++){const Vt=Yt[Qt],Mi=Yt[Qt+1];for(let ki=0;ki<ii.length-1;ki++)C.push(Xt(Vt,ii[ki],Mi,ii[ki+1]))}}else C.push(Xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:te+1},{fixed:0,stretch:se+1}));return C}function Am(l,r,h){let f=0;for(const C of l)f+=Math.max(r,Math.min(h,C[1]))-Math.max(r,Math.min(h,C[0]));return f}function N_(l,r,h){const f=[{fixed:-1,stretch:0}];for(const[C,z]of l){const B=f[f.length-1];f.push({fixed:C-B.stretch,stretch:B.stretch}),f.push({fixed:C-B.stretch,stretch:B.stretch+(z-C)})}return f.push({fixed:r+1,stretch:h}),f}function Mm(l,r,h,f){return l/r*h+f}function Pm(l,r,h,f){return l-r*h/f}fi("Anchor",Ul);class Im{constructor(r,h,f,C,z,B,te,se,be,Re){if(this.boxStartIndex=r.length,be){let Oe=B.top,Ve=B.bottom;const Ye=B.collisionPadding;Ye&&(Oe-=Ye[1],Ve+=Ye[3]);let Ze=Ve-Oe;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{let Oe=B.top*te-se[0],Ve=B.bottom*te+se[2],Ye=B.left*te-se[3],Ze=B.right*te+se[1];const ht=B.collisionPadding;if(ht&&(Ye-=ht[0]*te,Oe-=ht[1]*te,Ze+=ht[2]*te,Ve+=ht[3]*te),Re){const lt=new G(Ye,Oe),vt=new G(Ze,Oe),It=new G(Ye,Ve),xt=new G(Ze,Ve),Mt=Re*Math.PI/180;lt._rotate(Mt),vt._rotate(Mt),It._rotate(Mt),xt._rotate(Mt),Ye=Math.min(lt.x,vt.x,It.x,xt.x),Ze=Math.max(lt.x,vt.x,It.x,xt.x),Oe=Math.min(lt.y,vt.y,It.y,xt.y),Ve=Math.max(lt.y,vt.y,It.y,xt.y)}r.emplaceBack(h.x,h.y,Ye,Oe,Ze,Ve,f,C,z)}this.boxEndIndex=r.length}}class wA{constructor(r=[],h=TA){if(this.data=r,this.length=this.data.length,this.compare=h,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:h,compare:f}=this,C=h[r];for(;r>0;){const z=r-1>>1,B=h[z];if(f(C,B)>=0)break;h[r]=B,r=z}h[r]=C}_down(r){const{data:h,compare:f}=this,C=this.length>>1,z=h[r];for(;r<C;){let B=1+(r<<1),te=h[B];const se=B+1;if(se<this.length&&f(h[se],te)<0&&(B=se,te=h[se]),f(te,z)>=0)break;h[r]=te,r=B}h[r]=z}}function TA(l,r){return l<r?-1:l>r?1:0}function EA(l,r=1,h=!1){let f=1/0,C=1/0,z=-1/0,B=-1/0;const te=l[0];for(let Ye=0;Ye<te.length;Ye++){const Ze=te[Ye];(!Ye||Ze.x<f)&&(f=Ze.x),(!Ye||Ze.y<C)&&(C=Ze.y),(!Ye||Ze.x>z)&&(z=Ze.x),(!Ye||Ze.y>B)&&(B=Ze.y)}const se=Math.min(z-f,B-C);let be=se/2;const Re=new wA([],CA);if(se===0)return new G(f,C);for(let Ye=f;Ye<z;Ye+=se)for(let Ze=C;Ze<B;Ze+=se)Re.push(new gu(Ye+be,Ze+be,be,l));let Oe=function(Ye){let Ze=0,ht=0,lt=0;const vt=Ye[0];for(let It=0,xt=vt.length,Mt=xt-1;It<xt;Mt=It++){const Ut=vt[It],Ft=vt[Mt],xi=Ut.x*Ft.y-Ft.x*Ut.y;ht+=(Ut.x+Ft.x)*xi,lt+=(Ut.y+Ft.y)*xi,Ze+=3*xi}return new gu(ht/Ze,lt/Ze,0,Ye)}(l),Ve=Re.length;for(;Re.length;){const Ye=Re.pop();(Ye.d>Oe.d||!Oe.d)&&(Oe=Ye,h&&console.log("found best %d after %d probes",Math.round(1e4*Ye.d)/1e4,Ve)),Ye.max-Oe.d<=r||(be=Ye.h/2,Re.push(new gu(Ye.p.x-be,Ye.p.y-be,be,l)),Re.push(new gu(Ye.p.x+be,Ye.p.y-be,be,l)),Re.push(new gu(Ye.p.x-be,Ye.p.y+be,be,l)),Re.push(new gu(Ye.p.x+be,Ye.p.y+be,be,l)),Ve+=4)}return h&&(console.log(`num probes: ${Ve}`),console.log(`best distance: ${Oe.d}`)),Oe.p}function CA(l,r){return r.max-l.max}function gu(l,r,h,f){this.p=new G(l,r),this.h=h,this.d=function(C,z){let B=!1,te=1/0;for(let se=0;se<z.length;se++){const be=z[se];for(let Re=0,Oe=be.length,Ve=Oe-1;Re<Oe;Ve=Re++){const Ye=be[Re],Ze=be[Ve];Ye.y>C.y!=Ze.y>C.y&&C.x<(Ze.x-Ye.x)*(C.y-Ye.y)/(Ze.y-Ye.y)+Ye.x&&(B=!B),te=Math.min(te,G0(C,Ye,Ze))}}return(B?1:-1)*Math.sqrt(te)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Ex=Number.POSITIVE_INFINITY;function O_(l,r){return r[1]!==Ex?function(h,f,C){let z=0,B=0;switch(f=Math.abs(f),C=Math.abs(C),h){case"top-right":case"top-left":case"top":B=C-7;break;case"bottom-right":case"bottom-left":case"bottom":B=7-C}switch(h){case"top-right":case"bottom-right":case"right":z=-f;break;case"top-left":case"bottom-left":case"left":z=f}return[z,B]}(l,r[0],r[1]):function(h,f){let C=0,z=0;f<0&&(f=0);const B=f/Math.sqrt(2);switch(h){case"top-right":case"top-left":z=B-7;break;case"bottom-right":case"bottom-left":z=7-B;break;case"bottom":z=7-f;break;case"top":z=f-7}switch(h){case"top-right":case"bottom-right":C=-B;break;case"top-left":case"bottom-left":C=B;break;case"left":C=f;break;case"right":C=-f}return[C,z]}(l,r[0])}function Cx(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SA(l,r,h,f,C,z,B,te,se,be,Re){let Oe=z.textMaxSize.evaluate(r,{});Oe===void 0&&(Oe=B);const Ve=l.layers[0].layout,Ye=Ve.get("icon-offset").evaluate(r,{},Re),Ze=B_(h.horizontal),ht=B/24,lt=l.tilePixelRatio*ht,vt=l.tilePixelRatio*Oe/24,It=l.tilePixelRatio*te,xt=l.tilePixelRatio*Ve.get("symbol-spacing"),Mt=Ve.get("text-padding")*l.tilePixelRatio,Ut=function(Vt,Mi,ki,lr=1){const tn=Vt.get("icon-padding").evaluate(Mi,{},ki),on=tn&&tn.values;return[on[0]*lr,on[1]*lr,on[2]*lr,on[3]*lr]}(Ve,r,Re,l.tilePixelRatio),Ft=Ve.get("text-max-angle")/180*Math.PI,xi=Ve.get("text-rotation-alignment")!=="viewport"&&Ve.get("symbol-placement")!=="point",Ei=Ve.get("icon-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",ti=Ve.get("symbol-placement"),Xt=xt/2,Yt=Ve.get("icon-text-fit");let ii;f&&Yt!=="none"&&(l.allowVerticalPlacement&&h.vertical&&(ii=k_(f,h.vertical,Yt,Ve.get("icon-text-fit-padding"),Ye,ht)),Ze&&(f=k_(f,Ze,Yt,Ve.get("icon-text-fit-padding"),Ye,ht)));const Qt=(Vt,Mi)=>{Mi.x<0||Mi.x>=Fn||Mi.y<0||Mi.y>=Fn||function(ki,lr,tn,on,Un,Da,fs,zn,Zn,ms,ws,Ks,Nn,gs,Ts,$s,Qs,Js,dn,Xn,dr,xa,ys,Es,Ha){const eo=ki.addToLineVertexArray(lr,tn);let to,sl,Wa,Ra,ea=0,al=0,sp=0,tw=0,zx=-1,Nx=-1;const ol={};let iw=Ln.exports(""),Ox=0,jx=0;if(zn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Ox,jx]=zn.layout.get("text-offset").evaluate(dr,{},Es).map(ta=>ta*rs):(Ox=zn.layout.get("text-radial-offset").evaluate(dr,{},Es)*rs,jx=Ex),ki.allowVerticalPlacement&&on.vertical){const ta=zn.layout.get("text-rotate").evaluate(dr,{},Es)+90;Wa=new Im(Zn,lr,ms,ws,Ks,on.vertical,Nn,gs,Ts,ta),fs&&(Ra=new Im(Zn,lr,ms,ws,Ks,fs,Qs,Js,Ts,ta))}if(Un){const ta=zn.layout.get("icon-rotate").evaluate(dr,{}),To=zn.layout.get("icon-text-fit")!=="none",ap=z_(Un,ta,ys,To),op=fs?z_(fs,ta,ys,To):void 0;sl=new Im(Zn,lr,ms,ws,Ks,Un,Qs,Js,!1,ta),ea=4*ap.length;const sw=ki.iconSizeData;let Zc=null;sw.kind==="source"?(Zc=[nl*zn.layout.get("icon-size").evaluate(dr,{})],Zc[0]>$l&&w(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sw.kind==="composite"&&(Zc=[nl*xa.compositeIconSizes[0].evaluate(dr,{},Es),nl*xa.compositeIconSizes[1].evaluate(dr,{},Es)],(Zc[0]>$l||Zc[1]>$l)&&w(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ki.addSymbols(ki.icon,ap,Zc,Xn,dn,dr,n.WritingMode.none,lr,eo.lineStartIndex,eo.lineLength,-1,Es),zx=ki.icon.placedSymbolArray.length-1,op&&(al=4*op.length,ki.addSymbols(ki.icon,op,Zc,Xn,dn,dr,n.WritingMode.vertical,lr,eo.lineStartIndex,eo.lineLength,-1,Es),Nx=ki.icon.placedSymbolArray.length-1)}const rw=Object.keys(on.horizontal);for(const ta of rw){const To=on.horizontal[ta];if(!to){iw=Ln.exports(To.text);const op=zn.layout.get("text-rotate").evaluate(dr,{},Es);to=new Im(Zn,lr,ms,ws,Ks,To,Nn,gs,Ts,op)}const ap=To.positionedLines.length===1;if(sp+=j_(ki,lr,To,Da,zn,Ts,dr,$s,eo,on.vertical?n.WritingMode.horizontal:n.WritingMode.horizontalOnly,ap?rw:[ta],ol,zx,xa,Es),ap)break}on.vertical&&(tw+=j_(ki,lr,on.vertical,Da,zn,Ts,dr,$s,eo,n.WritingMode.vertical,["vertical"],ol,Nx,xa,Es));const BA=to?to.boxStartIndex:ki.collisionBoxArray.length,FA=to?to.boxEndIndex:ki.collisionBoxArray.length,UA=Wa?Wa.boxStartIndex:ki.collisionBoxArray.length,$A=Wa?Wa.boxEndIndex:ki.collisionBoxArray.length,VA=sl?sl.boxStartIndex:ki.collisionBoxArray.length,GA=sl?sl.boxEndIndex:ki.collisionBoxArray.length,HA=Ra?Ra.boxStartIndex:ki.collisionBoxArray.length,WA=Ra?Ra.boxEndIndex:ki.collisionBoxArray.length;let io=-1;const Nm=(ta,To)=>ta&&ta.circleDiameter?Math.max(ta.circleDiameter,To):To;io=Nm(to,io),io=Nm(Wa,io),io=Nm(sl,io),io=Nm(Ra,io);const nw=io>-1?1:0;nw&&(io*=Ha/rs),ki.glyphOffsetArray.length>=yu.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),dr.sortKey!==void 0&&ki.addToSortKeyRanges(ki.symbolInstances.length,dr.sortKey),ki.symbolInstances.emplaceBack(lr.x,lr.y,ol.right>=0?ol.right:-1,ol.center>=0?ol.center:-1,ol.left>=0?ol.left:-1,ol.vertical||-1,zx,Nx,iw,BA,FA,UA,$A,VA,GA,HA,WA,ms,sp,tw,ea,al,nw,0,Nn,Ox,jx,io)}(l,Mi,Vt,h,f,C,ii,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,lt,[Mt,Mt,Mt,Mt],xi,se,It,Ut,Ei,Ye,r,z,be,Re,B)};if(ti==="line")for(const Vt of L_(r.geometry,0,0,Fn,Fn)){const Mi=_A(Vt,xt,Ft,h.vertical||Ze,f,24,vt,l.overscaling,Fn);for(const ki of Mi){const lr=Ze;lr&&kA(l,lr.text,Xt,ki)||Qt(Vt,ki)}}else if(ti==="line-center"){for(const Vt of r.geometry)if(Vt.length>1){const Mi=vA(Vt,Ft,h.vertical||Ze,f,24,vt);Mi&&Qt(Vt,Mi)}}else if(r.type==="Polygon")for(const Vt of dx(r.geometry,0)){const Mi=EA(Vt,16);Qt(Vt[0],new Ul(Mi.x,Mi.y,0))}else if(r.type==="LineString")for(const Vt of r.geometry)Qt(Vt,new Ul(Vt[0].x,Vt[0].y,0));else if(r.type==="Point")for(const Vt of r.geometry)for(const Mi of Vt)Qt([Mi],new Ul(Mi.x,Mi.y,0))}const $l=32640;function j_(l,r,h,f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze){const ht=function(It,xt,Mt,Ut,Ft,xi,Ei,ti){const Xt=Ut.layout.get("text-rotate").evaluate(xi,{})*Math.PI/180,Yt=[];for(const ii of xt.positionedLines)for(const Qt of ii.positionedGlyphs){if(!Qt.rect)continue;const Vt=Qt.rect||{};let Mi=4,ki=!0,lr=1,tn=0;const on=(Ft||ti)&&Qt.vertical,Un=Qt.metrics.advance*Qt.scale/2;if(ti&&xt.verticalizable){const dn=(Qt.scale-1)*rs,Xn=(rs-Qt.metrics.width*Qt.scale)/2;tn=ii.lineOffset/2-(Qt.imageName?-Xn:dn)}if(Qt.imageName){const dn=Ei[Qt.imageName];ki=dn.sdf,lr=dn.pixelRatio,Mi=1/lr}const Da=Ft?[Qt.x+Un,Qt.y]:[0,0];let fs=Ft?[0,0]:[Qt.x+Un+Mt[0],Qt.y+Mt[1]-tn],zn=[0,0];on&&(zn=fs,fs=[0,0]);const Zn=(Qt.metrics.left-Mi)*Qt.scale-Un+fs[0],ms=(-Qt.metrics.top-Mi)*Qt.scale+fs[1],ws=Zn+Vt.w*Qt.scale/lr,Ks=ms+Vt.h*Qt.scale/lr,Nn=new G(Zn,ms),gs=new G(ws,ms),Ts=new G(Zn,Ks),$s=new G(ws,Ks);if(on){const dn=new G(-Un,Un-Cm),Xn=-Math.PI/2,dr=12-Un,xa=new G(22-dr,-(Qt.imageName?dr:0)),ys=new G(...zn);Nn._rotateAround(Xn,dn)._add(xa)._add(ys),gs._rotateAround(Xn,dn)._add(xa)._add(ys),Ts._rotateAround(Xn,dn)._add(xa)._add(ys),$s._rotateAround(Xn,dn)._add(xa)._add(ys)}if(Xt){const dn=Math.sin(Xt),Xn=Math.cos(Xt),dr=[Xn,-dn,dn,Xn];Nn._matMult(dr),gs._matMult(dr),Ts._matMult(dr),$s._matMult(dr)}const Qs=new G(0,0),Js=new G(0,0);Yt.push({tl:Nn,tr:gs,bl:Ts,br:$s,tex:Vt,writingMode:xt.writingMode,glyphOffset:Da,sectionIndex:Qt.sectionIndex,isSDF:ki,pixelOffsetTL:Qs,pixelOffsetBR:Js,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,h,te,C,z,B,f,l.allowVerticalPlacement),lt=l.textSizeData;let vt=null;lt.kind==="source"?(vt=[nl*C.layout.get("text-size").evaluate(B,{})],vt[0]>$l&&w(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(vt=[nl*Ye.compositeTextSizes[0].evaluate(B,{},Ze),nl*Ye.compositeTextSizes[1].evaluate(B,{},Ze)],(vt[0]>$l||vt[1]>$l)&&w(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,ht,vt,te,z,B,be,r,se.lineStartIndex,se.lineLength,Ve,Ze);for(const It of Re)Oe[It]=l.text.placedSymbolArray.length-1;return 4*ht.length}function B_(l){for(const r in l)return l[r];return null}function kA(l,r,h,f){const C=l.compareText;if(r in C){const z=C[r];for(let B=z.length-1;B>=0;B--)if(f.dist(z[B])<h)return!0}else C[r]=[];return C[r].push(f),!1}const AA=Bl.VectorTileFeature.types,MA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dm(l,r,h,f,C,z,B,te,se,be,Re,Oe,Ve){const Ye=te?Math.min($l,Math.round(te[0])):0,Ze=te?Math.min($l,Math.round(te[1])):0;l.emplaceBack(r,h,Math.round(32*f),Math.round(32*C),z,B,(Ye<<1)+(se?1:0),Ze,16*be,16*Re,256*Oe,256*Ve)}function Sx(l,r,h){l.emplaceBack(r.x,r.y,h),l.emplaceBack(r.x,r.y,h),l.emplaceBack(r.x,r.y,h),l.emplaceBack(r.x,r.y,h)}function PA(l){for(const r of l.sections)if(Qy(r.text))return!0;return!1}class kx{constructor(r){this.layoutVertexArray=new Xs,this.indexArray=new is,this.programConfigurations=r,this.segments=new Er,this.dynamicLayoutVertexArray=new Ga,this.opacityVertexArray=new Sa,this.placedSymbolArray=new Ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,h,f,C){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Jk.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,eA.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,MA,!0),this.opacityVertexBuffer.itemSize=1),(f||C)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fi("SymbolBuffers",kx);class Ax{constructor(r,h,f){this.layoutVertexArray=new r,this.layoutAttributes=h,this.indexArray=new f,this.segments=new Er,this.collisionVertexArray=new el}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,tA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fi("CollisionBuffers",Ax);class yu{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(B=>B.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ax([]),this.placementViewportMatrix=ax([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=A_(this.zoom,h["text-size"]),this.iconSizeData=A_(this.zoom,h["icon-size"]);const f=this.layers[0].layout,C=f.get("symbol-sort-key"),z=f.get("symbol-z-order");this.canOverlap=Px(f,"text-overlap","text-allow-overlap")!=="never"||Px(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!C.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(B=>n.WritingMode[B])),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=r.sourceID}createArrays(){this.text=new kx(new Gc(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new kx(new Gc(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ai,this.lineVertexArray=new Zt,this.symbolInstances=new Lt}calculateGlyphDependencies(r,h,f,C,z){for(let B=0;B<r.length;B++)if(h[r.charCodeAt(B)]=!0,(f||C)&&z){const te=tp[r.charAt(B)];te&&(h[te.charCodeAt(0)]=!0)}}populate(r,h,f){const C=this.layers[0],z=C.layout,B=z.get("text-font"),te=z.get("text-field"),se=z.get("icon-image"),be=(te.value.kind!=="constant"||te.value.value instanceof ct&&!te.value.value.isEmpty()||te.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),Re=se.value.kind!=="constant"||!!se.value.value||Object.keys(se.parameters).length>0,Oe=z.get("symbol-sort-key");if(this.features=[],!be&&!Re)return;const Ve=h.iconDependencies,Ye=h.glyphDependencies,Ze=h.availableImages,ht=new sn(this.zoom);for(const{feature:lt,id:vt,index:It,sourceLayerIndex:xt}of r){const Mt=C._featureFilter.needGeometry,Ut=Wc(lt,Mt);if(!C._featureFilter.filter(ht,Ut,f))continue;let Ft,xi;if(Mt||(Ut.geometry=Hc(lt)),be){const ti=C.getValueAndResolveTokens("text-field",Ut,f,Ze),Xt=ct.factory(ti);PA(Xt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ud()==="unavailable"||this.hasRTLText&&ga.isParsed())&&(Ft=rA(Xt,C,Ut))}if(Re){const ti=C.getValueAndResolveTokens("icon-image",Ut,f,Ze);xi=ti instanceof nt?ti:nt.fromString(ti)}if(!Ft&&!xi)continue;const Ei=this.sortFeaturesByKey?Oe.evaluate(Ut,{},f):void 0;if(this.features.push({id:vt,text:Ft,icon:xi,index:It,sourceLayerIndex:xt,geometry:Ut.geometry,properties:lt.properties,type:AA[lt.type],sortKey:Ei}),xi&&(Ve[xi.name]=!0),Ft){const ti=B.evaluate(Ut,{},f).join(","),Xt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(n.WritingMode.vertical)>=0;for(const Yt of Ft.sections)if(Yt.image)Ve[Yt.image.name]=!0;else{const ii=Nd(Ft.toString()),Qt=Yt.fontStack||ti,Vt=Ye[Qt]=Ye[Qt]||{};this.calculateGlyphDependencies(Yt.text,Vt,Xt,this.allowVerticalPlacement,ii)}}}z.get("symbol-placement")==="line"&&(this.features=function(lt){const vt={},It={},xt=[];let Mt=0;function Ut(ti){xt.push(lt[ti]),Mt++}function Ft(ti,Xt,Yt){const ii=It[ti];return delete It[ti],It[Xt]=ii,xt[ii].geometry[0].pop(),xt[ii].geometry[0]=xt[ii].geometry[0].concat(Yt[0]),ii}function xi(ti,Xt,Yt){const ii=vt[Xt];return delete vt[Xt],vt[ti]=ii,xt[ii].geometry[0].shift(),xt[ii].geometry[0]=Yt[0].concat(xt[ii].geometry[0]),ii}function Ei(ti,Xt,Yt){const ii=Yt?Xt[0][Xt[0].length-1]:Xt[0][0];return`${ti}:${ii.x}:${ii.y}`}for(let ti=0;ti<lt.length;ti++){const Xt=lt[ti],Yt=Xt.geometry,ii=Xt.text?Xt.text.toString():null;if(!ii){Ut(ti);continue}const Qt=Ei(ii,Yt),Vt=Ei(ii,Yt,!0);if(Qt in It&&Vt in vt&&It[Qt]!==vt[Vt]){const Mi=xi(Qt,Vt,Yt),ki=Ft(Qt,Vt,xt[Mi].geometry);delete vt[Qt],delete It[Vt],It[Ei(ii,xt[ki].geometry,!0)]=ki,xt[Mi].geometry=null}else Qt in It?Ft(Qt,Vt,Yt):Vt in vt?xi(Qt,Vt,Yt):(Ut(ti),vt[Qt]=Mt-1,It[Vt]=Mt-1)}return xt.filter(ti=>ti.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,vt)=>lt.sortKey-vt.sortKey)}update(r,h,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,h,this.layers,f),this.icon.programConfigurations.updatePaintArrays(r,h,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,h){const f=this.lineVertexArray.length;if(r.segment!==void 0){let C=r.dist(h[r.segment+1]),z=r.dist(h[r.segment]);const B={};for(let te=r.segment+1;te<h.length;te++)B[te]={x:h[te].x,y:h[te].y,tileUnitDistanceFromAnchor:C},te<h.length-1&&(C+=h[te+1].dist(h[te]));for(let te=r.segment||0;te>=0;te--)B[te]={x:h[te].x,y:h[te].y,tileUnitDistanceFromAnchor:z},te>0&&(z+=h[te-1].dist(h[te]));for(let te=0;te<h.length;te++){const se=B[te];this.lineVertexArray.emplaceBack(se.x,se.y,se.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,h,f,C,z,B,te,se,be,Re,Oe,Ve){const Ye=r.indexArray,Ze=r.layoutVertexArray,ht=r.segments.prepareSegment(4*h.length,Ze,Ye,this.canOverlap?B.sortKey:void 0),lt=this.glyphOffsetArray.length,vt=ht.vertexLength,It=this.allowVerticalPlacement&&te===n.WritingMode.vertical?Math.PI/2:0,xt=B.text&&B.text.sections;for(let Mt=0;Mt<h.length;Mt++){const{tl:Ut,tr:Ft,bl:xi,br:Ei,tex:ti,pixelOffsetTL:Xt,pixelOffsetBR:Yt,minFontScaleX:ii,minFontScaleY:Qt,glyphOffset:Vt,isSDF:Mi,sectionIndex:ki}=h[Mt],lr=ht.vertexLength,tn=Vt[1];Dm(Ze,se.x,se.y,Ut.x,tn+Ut.y,ti.x,ti.y,f,Mi,Xt.x,Xt.y,ii,Qt),Dm(Ze,se.x,se.y,Ft.x,tn+Ft.y,ti.x+ti.w,ti.y,f,Mi,Yt.x,Xt.y,ii,Qt),Dm(Ze,se.x,se.y,xi.x,tn+xi.y,ti.x,ti.y+ti.h,f,Mi,Xt.x,Yt.y,ii,Qt),Dm(Ze,se.x,se.y,Ei.x,tn+Ei.y,ti.x+ti.w,ti.y+ti.h,f,Mi,Yt.x,Yt.y,ii,Qt),Sx(r.dynamicLayoutVertexArray,se,It),Ye.emplaceBack(lr,lr+1,lr+2),Ye.emplaceBack(lr+1,lr+2,lr+3),ht.vertexLength+=4,ht.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),Mt!==h.length-1&&ki===h[Mt+1].sectionIndex||r.programConfigurations.populatePaintArrays(Ze.length,B,B.index,{},Ve,xt&&xt[ki])}r.placedSymbolArray.emplaceBack(se.x,se.y,lt,this.glyphOffsetArray.length-lt,vt,be,Re,se.segment,f?f[0]:0,f?f[1]:0,C[0],C[1],te,0,!1,0,Oe)}_addCollisionDebugVertex(r,h,f,C,z,B){return h.emplaceBack(0,0),r.emplaceBack(f.x,f.y,C,z,Math.round(B.x),Math.round(B.y))}addCollisionDebugVertices(r,h,f,C,z,B,te){const se=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),be=se.vertexLength,Re=z.layoutVertexArray,Oe=z.collisionVertexArray,Ve=te.anchorX,Ye=te.anchorY;this._addCollisionDebugVertex(Re,Oe,B,Ve,Ye,new G(r,h)),this._addCollisionDebugVertex(Re,Oe,B,Ve,Ye,new G(f,h)),this._addCollisionDebugVertex(Re,Oe,B,Ve,Ye,new G(f,C)),this._addCollisionDebugVertex(Re,Oe,B,Ve,Ye,new G(r,C)),se.vertexLength+=4;const Ze=z.indexArray;Ze.emplaceBack(be,be+1),Ze.emplaceBack(be+1,be+2),Ze.emplaceBack(be+2,be+3),Ze.emplaceBack(be+3,be),se.primitiveLength+=4}addDebugCollisionBoxes(r,h,f,C){for(let z=r;z<h;z++){const B=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,C?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ax(ka,f_.members,Aa),this.iconCollisionBox=new Ax(ka,f_.members,Aa);for(let r=0;r<this.symbolInstances.length;r++){const h=this.symbolInstances.get(r);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(r,h,f,C,z,B,te,se,be){const Re={};for(let Oe=h;Oe<f;Oe++){const Ve=r.get(Oe);Re.textBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.textFeatureIndex=Ve.featureIndex;break}for(let Oe=C;Oe<z;Oe++){const Ve=r.get(Oe);Re.verticalTextBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.verticalTextFeatureIndex=Ve.featureIndex;break}for(let Oe=B;Oe<te;Oe++){const Ve=r.get(Oe);Re.iconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.iconFeatureIndex=Ve.featureIndex;break}for(let Oe=se;Oe<be;Oe++){const Ve=r.get(Oe);Re.verticalIconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.verticalIconFeatureIndex=Ve.featureIndex;break}return Re}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const f=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,h){const f=r.placedSymbolArray.get(h),C=f.vertexStartIndex+4*f.numGlyphs;for(let z=f.vertexStartIndex;z<C;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(r),f=Math.cos(r),C=[],z=[],B=[];for(let te=0;te<this.symbolInstances.length;++te){B.push(te);const se=this.symbolInstances.get(te);C.push(0|Math.round(h*se.anchorX+f*se.anchorY)),z.push(se.featureIndex)}return B.sort((te,se)=>C[te]-C[se]||z[se]-z[te]),B}addToSortKeyRanges(r,h){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===h?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((C,z,B)=>{C>=0&&B.indexOf(C)===z&&this.addIndicesForPlacedSymbol(this.text,C)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fi("SymbolBucket",yu,{omit:["layers","collisionBoxArray","features","compareText"]}),yu.MAX_GLYPHS=65535,yu.addDynamicAttributes=Sx;const IA=new Bn({"symbol-placement":new Si(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Si(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Si(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Si(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Si(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Si(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Si(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Si(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Si(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Si(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Si(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Pe.layout_symbol["icon-image"]),"icon-rotate":new Di(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Di(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Si(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Di(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Si(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Si(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Si(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Pe.layout_symbol["text-field"]),"text-font":new Di(Pe.layout_symbol["text-font"]),"text-size":new Di(Pe.layout_symbol["text-size"]),"text-max-width":new Di(Pe.layout_symbol["text-max-width"]),"text-line-height":new Si(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Di(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Si(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Si(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Si(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Pe.layout_symbol["text-rotate"]),"text-padding":new Si(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Si(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Di(Pe.layout_symbol["text-transform"]),"text-offset":new Di(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Si(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Si(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Si(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Si(Pe.layout_symbol["text-optional"])});var Mx={paint:new Bn({"icon-opacity":new Di(Pe.paint_symbol["icon-opacity"]),"icon-color":new Di(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Di(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Si(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Si(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Pe.paint_symbol["text-opacity"]),"text-color":new Di(Pe.paint_symbol["text-color"],{runtimeType:si,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Di(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Si(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Si(Pe.paint_symbol["text-translate-anchor"])}),layout:IA};class F_{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Rt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(r.formattedSection))return h.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fi("FormatSectionOverride",F_,{omit:["defaultValue"]});class Rm extends js{constructor(r){super(r,Mx)}recalculate(r,h){if(super.recalculate(r,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const C=[];for(const z of f)C.indexOf(z)<0&&C.push(z);this.layout._values["text-writing-mode"]=C}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,h,f,C){const z=this.layout.get(r).evaluate(h,{},f,C),B=this._unevaluatedLayout._values[r];return B.isDataDriven()||Ac(B.value)||!z?z:function(te,se){return se.replace(/{([^{}]+)}/g,(be,Re)=>Re in te?String(te[Re]):"")}(h.properties,z)}createBucket(r){return new yu(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Mx.paint.overridableProperties){if(!Rm.hasPaintOverride(this.layout,r))continue;const h=this.paint.get(r),f=new F_(h),C=new Pd(f,h.property.specification);let z=null;z=h.value.kind==="constant"||h.value.kind==="source"?new Gh("source",C):new Pc("composite",C,h.value.zoomStops),this.paint._values[r]=new Va(h.property,z,h.parameters)}}_handleOverridablePaintPropertyUpdate(r,h,f){return!(!this.layout||h.isDataDriven()||f.isDataDriven())&&Rm.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,h){const f=r.get("text-field"),C=Mx.paint.properties[h];let z=!1;const B=te=>{for(const se of te)if(C.overrides&&C.overrides.hasOverride(se))return void(z=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ct)B(f.value.value.sections);else if(f.value.kind==="source"){const te=be=>{z||(be instanceof oi&&zt(be.value)===Zi?B(be.value.sections):be instanceof Vh?B(be.sections):be.eachChild(te))},se=f.value;se._styleExpression&&te(se._styleExpression.expression)}return z}}function Px(l,r,h){let f="never";const C=l.get(r);return C?f=C:l.get(h)&&(f="always"),f}var DA={paint:new Bn({"background-color":new Si(Pe.paint_background["background-color"]),"background-pattern":new Fc(Pe.paint_background["background-pattern"]),"background-opacity":new Si(Pe.paint_background["background-opacity"])})},RA={paint:new Bn({"raster-opacity":new Si(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Si(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Si(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Si(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Si(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Si(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Si(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Si(Pe.paint_raster["raster-fade-duration"])})};class LA extends js{constructor(r){super(r,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const zA={circle:class extends js{constructor(l){super(l,pk)}createBucket(l){return new rx(l)}queryRadius(l){const r=l;return Wd("circle-radius",this,r)+Wd("circle-stroke-width",this,r)+gm(this.paint.get("circle-translate"))}queryIntersectsFeature(l,r,h,f,C,z,B,te){const se=ym(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,B),be=this.paint.get("circle-radius").evaluate(r,h)+this.paint.get("circle-stroke-width").evaluate(r,h),Re=this.paint.get("circle-pitch-alignment")==="map",Oe=Re?se:function(Ye,Ze){return Ye.map(ht=>K0(ht,Ze))}(se,te),Ve=Re?be*B:be;for(const Ye of f)for(const Ze of Ye){const ht=Re?Ze:K0(Ze,te);let lt=Ve;const vt=xm([],[Ze.x,Ze.y,0,1],te);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=vt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=z.cameraToCenterDistance/vt[3]),lk(Oe,ht,lt))return!0}return!1}},heatmap:class extends js{constructor(l){super(l,mk),this._updateColorRamp()}createBucket(l){return new Q0(l)}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=e_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends js{constructor(l){super(l,gk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends js{constructor(l){super(l,Ik)}recalculate(l,r){super.recalculate(l,r);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new mx(l)}queryRadius(){return gm(this.paint.get("fill-translate"))}queryIntersectsFeature(l,r,h,f,C,z,B){return V0(ym(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,B),f)}isTileClipped(){return!0}},"fill-extrusion":class extends js{constructor(l){super(l,Hk)}createBucket(l){return new yx(l)}queryRadius(){return gm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,r,h,f,C,z,B,te){const se=ym(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,B),be=this.paint.get("fill-extrusion-height").evaluate(r,h),Re=this.paint.get("fill-extrusion-base").evaluate(r,h),Oe=function(Ye,Ze,ht,lt){const vt=[];for(const It of Ye){const xt=[It.x,It.y,0,1];xm(xt,xt,Ze),vt.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return vt}(se,te),Ve=function(Ye,Ze,ht,lt){const vt=[],It=[],xt=lt[8]*Ze,Mt=lt[9]*Ze,Ut=lt[10]*Ze,Ft=lt[11]*Ze,xi=lt[8]*ht,Ei=lt[9]*ht,ti=lt[10]*ht,Xt=lt[11]*ht;for(const Yt of Ye){const ii=[],Qt=[];for(const Vt of Yt){const Mi=Vt.x,ki=Vt.y,lr=lt[0]*Mi+lt[4]*ki+lt[12],tn=lt[1]*Mi+lt[5]*ki+lt[13],on=lt[2]*Mi+lt[6]*ki+lt[14],Un=lt[3]*Mi+lt[7]*ki+lt[15],Da=on+Ut,fs=Un+Ft,zn=lr+xi,Zn=tn+Ei,ms=on+ti,ws=Un+Xt,Ks=new G((lr+xt)/fs,(tn+Mt)/fs);Ks.z=Da/fs,ii.push(Ks);const Nn=new G(zn/ws,Zn/ws);Nn.z=ms/ws,Qt.push(Nn)}vt.push(ii),It.push(Qt)}return[vt,It]}(f,Re,be,te);return function(Ye,Ze,ht){let lt=1/0;V0(ht,Ze)&&(lt=c_(ht,Ze[0]));for(let vt=0;vt<Ze.length;vt++){const It=Ze[vt],xt=Ye[vt];for(let Mt=0;Mt<It.length-1;Mt++){const Ut=It[Mt],Ft=[Ut,It[Mt+1],xt[Mt+1],xt[Mt],Ut];$0(ht,Ft)&&(lt=Math.min(lt,c_(ht,Ft)))}}return lt!==1/0&&lt}(Ve[0],Ve[1],Oe)}},line:class extends js{constructor(l){super(l,u_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){l==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ec,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,r){super.recalculate(l,r),this.paint._values["line-floorwidth"]=d_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new xx(l)}queryRadius(l){const r=l,h=p_(Wd("line-width",this,r),Wd("line-gap-width",this,r)),f=Wd("line-offset",this,r);return h/2+Math.abs(f)+gm(this.paint.get("line-translate"))}queryIntersectsFeature(l,r,h,f,C,z,B){const te=ym(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,B),se=B/2*p_(this.paint.get("line-width").evaluate(r,h),this.paint.get("line-gap-width").evaluate(r,h)),be=this.paint.get("line-offset").evaluate(r,h);return be&&(f=function(Re,Oe){const Ve=[];for(let Ye=0;Ye<Re.length;Ye++){const Ze=Re[Ye],ht=[];for(let lt=0;lt<Ze.length;lt++){const vt=Ze[lt-1],It=Ze[lt],xt=Ze[lt+1],Mt=lt===0?new G(0,0):It.sub(vt)._unit()._perp(),Ut=lt===Ze.length-1?new G(0,0):xt.sub(It)._unit()._perp(),Ft=Mt._add(Ut)._unit(),xi=Ft.x*Ut.x+Ft.y*Ut.y;xi!==0&&Ft._mult(1/xi),ht.push(Ft._mult(Oe)._add(It))}Ve.push(ht)}return Ve}(f,be*B)),function(Re,Oe,Ve){for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Oe[Ye];if(Re.length>=3){for(let ht=0;ht<Ze.length;ht++)if(hu(Re,Ze[ht]))return!0}if(ck(Re,Ze,Ve))return!0}return!1}(te,f,se)}isTileClipped(){return!0}},symbol:Rm,background:class extends js{constructor(l){super(l,DA)}},raster:class extends js{constructor(l){super(l,RA)}}};class NA{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const U_=63710088e-1;class xn{constructor(r,h){if(isNaN(r)||isNaN(h))throw new Error(`Invalid LngLat object: (${r}, ${h})`);if(this.lng=+r,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xn(k(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const h=Math.PI/180,f=this.lat*h,C=r.lat*h,z=Math.sin(f)*Math.sin(C)+Math.cos(f)*Math.cos(C)*Math.cos((r.lng-this.lng)*h);return U_*Math.acos(Math.min(z,1))}toBounds(r=0){const h=360*r/40075017,f=h/Math.cos(Math.PI/180*this.lat);return new Yc(new xn(this.lng-f,this.lat-h),new xn(this.lng+f,this.lat+h))}static convert(r){if(r instanceof xn)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new xn(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new xn(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Yc{constructor(r,h){r&&(h?this.setSouthWest(r).setNorthEast(h):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof xn?new xn(r.lng,r.lat):xn.convert(r),this}setSouthWest(r){return this._sw=r instanceof xn?new xn(r.lng,r.lat):xn.convert(r),this}extend(r){const h=this._sw,f=this._ne;let C,z;if(r instanceof xn)C=r,z=r;else{if(!(r instanceof Yc))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Yc.convert(r)):this.extend(xn.convert(r)):this;if(C=r._sw,z=r._ne,!C||!z)return this}return h||f?(h.lng=Math.min(C.lng,h.lng),h.lat=Math.min(C.lat,h.lat),f.lng=Math.max(z.lng,f.lng),f.lat=Math.max(z.lat,f.lat)):(this._sw=new xn(C.lng,C.lat),this._ne=new xn(z.lng,z.lat)),this}getCenter(){return new xn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new xn(this.getWest(),this.getNorth())}getSouthEast(){return new xn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:h,lat:f}=xn.convert(r);let C=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&C}static convert(r){return r instanceof Yc?r:r&&new Yc(r)}}const $_=2*Math.PI*U_;function V_(l){return $_*Math.cos(l*Math.PI/180)}function G_(l){return(180+l)/360}function H_(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function W_(l,r){return l/V_(r)}function Ix(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class Lm{constructor(r,h,f=0){this.x=+r,this.y=+h,this.z=+f}static fromLngLat(r,h=0){const f=xn.convert(r);return new Lm(G_(f.lng),H_(f.lat),W_(h,f.lat))}toLngLat(){return new xn(360*this.x-180,Ix(this.y))}toAltitude(){return this.z*V_(Ix(this.y))}meterInMercatorCoordinateUnits(){return 1/$_*(r=Ix(this.y),1/Math.cos(r*Math.PI/180));var r}}function q_(l,r,h){var f=2*Math.PI*6378137/256/Math.pow(2,h);return[l*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class Dx{constructor(r,h,f){if(r<0||r>25||f<0||f>=Math.pow(2,r)||h<0||h>=Math.pow(2,r))throw new Error(`x=${h}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=h,this.y=f,this.key=rp(0,r,r,h,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,h,f){const C=(B=this.y,te=this.z,se=q_(256*(z=this.x),256*(B=Math.pow(2,te)-B-1),te),be=q_(256*(z+1),256*(B+1),te),se[0]+","+se[1]+","+be[0]+","+be[1]);var z,B,te,se,be;const Re=function(Oe,Ve,Ye){let Ze,ht="";for(let lt=Oe;lt>0;lt--)Ze=1<<lt-1,ht+=(Ve&Ze?1:0)+(Ye&Ze?2:0);return ht}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,C)}isChildOf(r){const h=this.z-r.z;return h>0&&r.x===this.x>>h&&r.y===this.y>>h}getTilePoint(r){const h=Math.pow(2,this.z);return new G((r.x*h-this.x)*Fn,(r.y*h-this.y)*Fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Y_{constructor(r,h){this.wrap=r,this.canonical=h,this.key=rp(r,h.z,h.z,h.x,h.y)}}class Ia{constructor(r,h,f,C,z){if(r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=h,this.canonical=new Dx(f,+C,+z),this.key=rp(h,r,f,C,z)}clone(){return new Ia(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?new Ia(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ia(r,this.wrap,r,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(r,h){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?rp(this.wrap*+h,r,this.canonical.z,this.canonical.x,this.canonical.y):rp(this.wrap*+h,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const h=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>h&&r.canonical.y===this.canonical.y>>h}children(r){if(this.overscaledZ>=r)return[new Ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,f=2*this.canonical.x,C=2*this.canonical.y;return[new Ia(h,this.wrap,h,f,C),new Ia(h,this.wrap,h,f+1,C),new Ia(h,this.wrap,h,f,C+1),new Ia(h,this.wrap,h,f+1,C+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Ia(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Y_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Lm(r.x-this.wrap,r.y))}}function rp(l,r,h,f,C){(l*=2)<0&&(l=-1*l-1);const z=1<<h;return(z*z*l+z*C+f).toString(36)+h.toString(36)+r.toString(36)}fi("CanonicalTileID",Dx),fi("OverscaledTileID",Ia,{omit:["posMatrix"]});class Z_{constructor(r,h,f){if(this.uid=r,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void w(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const C=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=f||"mapbox";for(let z=0;z<C;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(C,z)]=this.data[this._idx(C-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,C)]=this.data[this._idx(z,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<C;z++)for(let B=0;B<C;B++){const te=this.get(z,B);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(r,h){const f=new Uint8Array(this.data.buffer),C=4*this._idx(r,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[C],f[C+1],f[C+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,h){if(r<-1||r>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(r+1)}_unpackMapbox(r,h,f){return(256*r*256+256*h+f)/10-1e4}_unpackTerrarium(r,h,f){return 256*r+h+f/256-32768}getPixels(){return new Pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,h,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let C=h*this.dim,z=h*this.dim+this.dim,B=f*this.dim,te=f*this.dim+this.dim;switch(h){case-1:C=z-1;break;case 1:z=C+1}switch(f){case-1:B=te-1;break;case 1:te=B+1}const se=-h*this.dim,be=-f*this.dim;for(let Re=B;Re<te;Re++)for(let Oe=C;Oe<z;Oe++)this.data[this._idx(Oe,Re)]=r.data[this._idx(Oe+se,Re+be)]}}fi("DEMData",Z_);class X_{constructor(r){this._stringToNumber={},this._numberToString=[];for(let h=0;h<r.length;h++){const f=r[h];this._stringToNumber[f]=h,this._numberToString[h]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class K_{constructor(r,h,f,C,z){this.type="Feature",this._vectorTileFeature=r,r._z=h,r._x=f,r._y=C,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(r[h]=this[h]);return r}}class Q_{constructor(r,h){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Ko(Fn,16,0),this.grid3D=new Ko(Fn,16,0),this.featureIndexArray=new Xi,this.promoteId=h}insert(r,h,f,C,z,B){const te=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,C,z);const se=B?this.grid3D:this.grid;for(let be=0;be<h.length;be++){const Re=h[be],Oe=[1/0,1/0,-1/0,-1/0];for(let Ve=0;Ve<Re.length;Ve++){const Ye=Re[Ve];Oe[0]=Math.min(Oe[0],Ye.x),Oe[1]=Math.min(Oe[1],Ye.y),Oe[2]=Math.max(Oe[2],Ye.x),Oe[3]=Math.max(Oe[3],Ye.y)}Oe[0]<Fn&&Oe[1]<Fn&&Oe[2]>=0&&Oe[3]>=0&&se.insert(te,Oe[0],Oe[1],Oe[2],Oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Bl.VectorTile(new bx(this.rawTileData)).layers,this.sourceLayerCoder=new X_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,h,f,C){this.loadVTLayers();const z=r.params||{},B=Fn/r.tileSize/r.scale,te=Dd(z.filter),se=r.queryGeometry,be=r.queryPadding*B,Re=ew(se),Oe=this.grid.query(Re.minX-be,Re.minY-be,Re.maxX+be,Re.maxY+be),Ve=ew(r.cameraQueryGeometry),Ye=this.grid3D.query(Ve.minX-be,Ve.minY-be,Ve.maxX+be,Ve.maxY+be,(lt,vt,It,xt)=>function(Mt,Ut,Ft,xi,Ei){for(const Xt of Mt)if(Ut<=Xt.x&&Ft<=Xt.y&&xi>=Xt.x&&Ei>=Xt.y)return!0;const ti=[new G(Ut,Ft),new G(Ut,Ei),new G(xi,Ei),new G(xi,Ft)];if(Mt.length>2){for(const Xt of ti)if(hu(Mt,Xt))return!0}for(let Xt=0;Xt<Mt.length-1;Xt++)if(uk(Mt[Xt],Mt[Xt+1],ti))return!0;return!1}(r.cameraQueryGeometry,lt-be,vt-be,It+be,xt+be));for(const lt of Ye)Oe.push(lt);Oe.sort(OA);const Ze={};let ht;for(let lt=0;lt<Oe.length;lt++){const vt=Oe[lt];if(vt===ht)continue;ht=vt;const It=this.featureIndexArray.get(vt);let xt=null;this.loadMatchingFeature(Ze,It.bucketIndex,It.sourceLayerIndex,It.featureIndex,te,z.layers,z.availableImages,h,f,C,(Mt,Ut,Ft)=>(xt||(xt=Hc(Mt)),Ut.queryIntersectsFeature(se,Mt,Ft,xt,this.z,r.transform,B,r.pixelPosMatrix)))}return Ze}loadMatchingFeature(r,h,f,C,z,B,te,se,be,Re,Oe){const Ve=this.bucketLayerIDs[h];if(B&&!function(lt,vt){for(let It=0;It<lt.length;It++)if(vt.indexOf(lt[It])>=0)return!0;return!1}(B,Ve))return;const Ye=this.sourceLayerCoder.decode(f),Ze=this.vtLayers[Ye].feature(C);if(z.needGeometry){const lt=Wc(Ze,!0);if(!z.filter(new sn(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!z.filter(new sn(this.tileID.overscaledZ),Ze))return;const ht=this.getId(Ze,Ye);for(let lt=0;lt<Ve.length;lt++){const vt=Ve[lt];if(B&&B.indexOf(vt)<0)continue;const It=se[vt];if(!It)continue;let xt={};ht&&Re&&(xt=Re.getState(It.sourceLayer||"_geojsonTileLayer",ht));const Mt=_({},be[vt]);Mt.paint=J_(Mt.paint,It.paint,Ze,xt,te),Mt.layout=J_(Mt.layout,It.layout,Ze,xt,te);const Ut=!Oe||Oe(Ze,It,xt);if(!Ut)continue;const Ft=new K_(Ze,this.z,this.x,this.y,ht);Ft.layer=Mt;let xi=r[vt];xi===void 0&&(xi=r[vt]=[]),xi.push({featureIndex:C,feature:Ft,intersectionZ:Ut})}}lookupSymbolFeatures(r,h,f,C,z,B,te,se){const be={};this.loadVTLayers();const Re=Dd(z);for(const Oe of r)this.loadMatchingFeature(be,f,C,Oe,Re,B,te,se,h);return be}hasLayer(r){for(const h of this.bucketLayerIDs)for(const f of h)if(r===f)return!0;return!1}getId(r,h){let f=r.id;return this.promoteId&&(f=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof f=="boolean"&&(f=Number(f))),f}}function J_(l,r,h,f,C){return A(l,(z,B)=>{const te=r instanceof ru?r.get(B):null;return te&&te.evaluate?te.evaluate(h,f,C):te})}function ew(l){let r=1/0,h=1/0,f=-1/0,C=-1/0;for(const z of l)r=Math.min(r,z.x),h=Math.min(h,z.y),f=Math.max(f,z.x),C=Math.max(C,z.y);return{minX:r,minY:h,maxX:f,maxY:C}}function OA(l,r){return r-l}var Rx;fi("FeatureIndex",Q_,{omit:["rawTileData","sourceLayerCoder"]}),n.PerformanceMarkers=void 0,(Rx=n.PerformanceMarkers||(n.PerformanceMarkers={})).create="create",Rx.load="load",Rx.fullLoad="fullLoad";let zm=null,np=[];const Lx=1e3/30,jA={mark(l){performance.mark(l)},frame(l){const r=l;zm!=null&&np.push(r-zm),zm=r},clearMetrics(){zm=null,np=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const l in n.PerformanceMarkers)performance.clearMarks(n.PerformanceMarkers[l])},getPerformanceMetrics(){performance.measure("loadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.load),performance.measure("fullLoadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.fullLoad);const l=performance.getEntriesByName("loadTime")[0].duration,r=performance.getEntriesByName("fullLoadTime")[0].duration,h=np.length,f=1/(np.reduce((z,B)=>z+B,0)/h/1e3),C=np.filter(z=>z>Lx).reduce((z,B)=>z+(B-Lx)/Lx,0);return{loadTime:l,fullLoadTime:r,fps:f,percentDroppedFrames:C/(h+C)*100}}};n.AJAXError=J,n.ARRAY_TYPE=Us,n.Actor=class{constructor(l,r,h){this.target=l,this.parent=r,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new NA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?l:window}send(l,r,h,f,C=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[z]=h);const B=U(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:l,hasCallback:!!h,targetMapId:f,mustQueue:C,sourceMapId:this.mapId,data:Nc(r,B)},B),{cancel:()=>{h&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(l){const r=l.data,h=r.id;if(h&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[h];const f=this.cancelCallbacks[h];delete this.cancelCallbacks[h],f&&f()}else q()||r.mustQueue?(this.tasks[h]=r,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,r)}process(){if(!this.taskQueue.length)return;const l=this.taskQueue.shift(),r=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(l,r)}processTask(l,r){if(r.type==="<response>"){const h=this.callbacks[l];delete this.callbacks[l],h&&(r.error?h(Qo(r.error)):h(null,Qo(r.data)))}else{let h=!1;const f=U(this.globalScope)?void 0:[],C=r.hasCallback?(te,se)=>{h=!0,delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:te?Nc(te):null,data:Nc(se,f)},f)}:te=>{h=!0};let z=null;const B=Qo(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,B,C);else if(this.parent.getWorkerSource){const te=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,te[0],B.source)[te[1]](B,C)}else C(new Error(`Could not find function ${r.type}`));!h&&z&&z.cancel&&(this.cancelCallbacks[l]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},n.AlphaImage=Yd,n.CanonicalTileID=Dx,n.CollisionBoxArray=Et,n.CollisionCircleLayoutArray=class extends Ee{},n.Color=Ue,n.DEMData=Z_,n.DataConstantProperty=Si,n.DictionaryCoder=X_,n.EXTENT=Fn,n.ErrorEvent=Ae,n.EvaluationParameters=sn,n.Event=fe,n.Evented=De,n.FeatureIndex=Q_,n.FillBucket=mx,n.FillExtrusionBucket=yx,n.GeoJSONFeature=K_,n.ImageAtlas=w_,n.ImagePosition=_x,n.LineBucket=xx,n.LineStripIndexArray=class extends _t{},n.LngLat=xn,n.LngLatBounds=Yc,n.MercatorCoordinate=Lm,n.ONE_EM=rs,n.OverscaledTileID=Ia,n.PerformanceUtils=jA,n.PosArray=or,n.Properties=Bn,n.QuadTriangleArray=class extends Fe{},n.RGBAImage=Pa,n.RasterBoundsArray=class extends $c{},n.RequestPerformance=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},n.ResourceType=ve,n.SegmentVector=Er,n.SymbolBucket=yu,n.Transitionable=$d,n.TriangleIndexArray=is,n.Uniform1f=ou,n.Uniform1i=class extends Ma{constructor(l,r){super(l,r),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},n.Uniform2f=class extends Ma{constructor(l,r){super(l,r),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},n.Uniform3f=class extends Ma{constructor(l,r){super(l,r),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},n.Uniform4f=Vc,n.UniformColor=lu,n.UniformMatrix4f=class extends Ma{constructor(l,r){super(l,r),this.current=ak}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let r=1;r<16;r++)if(l[r]!==this.current[r]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},n.UnwrappedTileID=Y_,n.ValidationError=je,n.ZoomHistory=Oc,n.add=function(l,r,h){return l[0]=r[0]+h[0],l[1]=r[1]+h[1],l[2]=r[2]+h[2],l},n.addDynamicAttributes=Sx,n.asyncAll=function(l,r,h){if(!l.length)return h(null,[]);let f=l.length;const C=new Array(l.length);let z=null;l.forEach((B,te)=>{r(B,(se,be)=>{se&&(z=se),C[te]=be,--f==0&&h(z,C)})})},n.bezier=g,n.bindAll=M,n.cacheEntryPossiblyAdded=function(l){oe++,oe>ue&&(l.getActor().send("enforceCacheSizeLimit",ne),oe=0)},n.clamp=y,n.clearTileCache=function(l){const r=caches.delete(H);l&&r.catch(l).then(()=>l())},n.clipLine=L_,n.clone=function(l){var r=new Us(16);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],r[6]=l[6],r[7]=l[7],r[8]=l[8],r[9]=l[9],r[10]=l[10],r[11]=l[11],r[12]=l[12],r[13]=l[13],r[14]=l[14],r[15]=l[15],r},n.clone$1=P,n.clone$2=function(l){var r=new Us(3);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r},n.collisionCircleLayout=iA,n.config=F,n.copy=function(l,r){return l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},n.create=function(){var l=new Us(16);return Us!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},n.create$1=W0,n.createExpression=Mc,n.createFilter=Dd,n.createLayout=Rn,n.createStyleLayer=function(l){return l.type==="custom"?new LA(l):new zA[l.type](l)},n.cross=function(l,r,h){var f=r[0],C=r[1],z=r[2],B=h[0],te=h[1],se=h[2];return l[0]=C*se-z*te,l[1]=z*B-f*se,l[2]=f*te-C*B,l},n.dot=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]},n.dot$1=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]*r[3]},n.ease=v,n.emitValidationErrors=om,n.enforceCacheSizeLimit=function(l){ie(),W&&W.then(r=>{r.keys().then(h=>{for(let f=0;f<h.length-l;f++)r.delete(h[f])})})},n.equals=function(l,r){var h=l[0],f=l[1],C=l[2],z=l[3],B=l[4],te=l[5],se=l[6],be=l[7],Re=l[8],Oe=l[9],Ve=l[10],Ye=l[11],Ze=l[12],ht=l[13],lt=l[14],vt=l[15],It=r[0],xt=r[1],Mt=r[2],Ut=r[3],Ft=r[4],xi=r[5],Ei=r[6],ti=r[7],Xt=r[8],Yt=r[9],ii=r[10],Qt=r[11],Vt=r[12],Mi=r[13],ki=r[14],lr=r[15];return Math.abs(h-It)<=Fs*Math.max(1,Math.abs(h),Math.abs(It))&&Math.abs(f-xt)<=Fs*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(C-Mt)<=Fs*Math.max(1,Math.abs(C),Math.abs(Mt))&&Math.abs(z-Ut)<=Fs*Math.max(1,Math.abs(z),Math.abs(Ut))&&Math.abs(B-Ft)<=Fs*Math.max(1,Math.abs(B),Math.abs(Ft))&&Math.abs(te-xi)<=Fs*Math.max(1,Math.abs(te),Math.abs(xi))&&Math.abs(se-Ei)<=Fs*Math.max(1,Math.abs(se),Math.abs(Ei))&&Math.abs(be-ti)<=Fs*Math.max(1,Math.abs(be),Math.abs(ti))&&Math.abs(Re-Xt)<=Fs*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Oe-Yt)<=Fs*Math.max(1,Math.abs(Oe),Math.abs(Yt))&&Math.abs(Ve-ii)<=Fs*Math.max(1,Math.abs(Ve),Math.abs(ii))&&Math.abs(Ye-Qt)<=Fs*Math.max(1,Math.abs(Ye),Math.abs(Qt))&&Math.abs(Ze-Vt)<=Fs*Math.max(1,Math.abs(Ze),Math.abs(Vt))&&Math.abs(ht-Mi)<=Fs*Math.max(1,Math.abs(ht),Math.abs(Mi))&&Math.abs(lt-ki)<=Fs*Math.max(1,Math.abs(lt),Math.abs(ki))&&Math.abs(vt-lr)<=Fs*Math.max(1,Math.abs(vt),Math.abs(lr))},n.evaluateSizeForFeature=function(l,{uSize:r,uSizeT:h},{lowerSize:f,upperSize:C}){return l.kind==="source"?f/nl:l.kind==="composite"?hn(f/nl,C/nl,h):r},n.evaluateSizeForZoom=function(l,r){let h=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:C,minZoom:z,maxZoom:B}=l,te=C?y(Ys.interpolationFactor(C,r,z,B),0,1):0;l.kind==="camera"?f=hn(l.minSize,l.maxSize,te):h=te}return{uSizeT:h,uSize:f}},n.evaluateVariableOffset=O_,n.evented=Ll,n.exported=R,n.exported$1=Se,n.extend=_,n.filterObject=x,n.fromRotation=function(l,r){var h=Math.sin(r),f=Math.cos(r);return l[0]=f,l[1]=h,l[2]=0,l[3]=-h,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},n.fromScaling=function(l,r){return l[0]=r[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=r[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=r[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},n.getAnchorAlignment=Tx,n.getAnchorJustification=Cx,n.getArrayBuffer=_e,n.getImage=Ge,n.getJSON=function(l,r){return ge(_(l,{type:"json"}),r)},n.getOverlapMode=Px,n.getRTLTextPluginStatus=Ud,n.getReferrer=re,n.getVideo=function(l,r){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){r(null,h)};for(let f=0;f<l.length;f++){const C=window.document.createElement("source");ze(l[f])||(h.crossOrigin="Anonymous"),C.src=l[f],h.appendChild(C)}return{cancel:()=>{}}},n.identity=ax,n.invert=function(l,r){var h=r[0],f=r[1],C=r[2],z=r[3],B=r[4],te=r[5],se=r[6],be=r[7],Re=r[8],Oe=r[9],Ve=r[10],Ye=r[11],Ze=r[12],ht=r[13],lt=r[14],vt=r[15],It=h*te-f*B,xt=h*se-C*B,Mt=h*be-z*B,Ut=f*se-C*te,Ft=f*be-z*te,xi=C*be-z*se,Ei=Re*ht-Oe*Ze,ti=Re*lt-Ve*Ze,Xt=Re*vt-Ye*Ze,Yt=Oe*lt-Ve*ht,ii=Oe*vt-Ye*ht,Qt=Ve*vt-Ye*lt,Vt=It*Qt-xt*ii+Mt*Yt+Ut*Xt-Ft*ti+xi*Ei;return Vt?(l[0]=(te*Qt-se*ii+be*Yt)*(Vt=1/Vt),l[1]=(C*ii-f*Qt-z*Yt)*Vt,l[2]=(ht*xi-lt*Ft+vt*Ut)*Vt,l[3]=(Ve*Ft-Oe*xi-Ye*Ut)*Vt,l[4]=(se*Xt-B*Qt-be*ti)*Vt,l[5]=(h*Qt-C*Xt+z*ti)*Vt,l[6]=(lt*Mt-Ze*xi-vt*xt)*Vt,l[7]=(Re*xi-Ve*Mt+Ye*xt)*Vt,l[8]=(B*ii-te*Xt+be*Ei)*Vt,l[9]=(f*Xt-h*ii-z*Ei)*Vt,l[10]=(Ze*Ft-ht*Mt+vt*It)*Vt,l[11]=(Oe*Mt-Re*Ft-Ye*It)*Vt,l[12]=(te*ti-B*Yt-se*Ei)*Vt,l[13]=(h*Yt-f*ti+C*Ei)*Vt,l[14]=(ht*xt-Ze*Ut-lt*It)*Vt,l[15]=(Re*Ut-Oe*xt+Ve*It)*Vt,l):null},n.isImageBitmap=L,n.isSafari=U,n.isWorker=q,n.keysDifference=function(l,r){const h=[];for(const f in l)f in r||h.push(f);return h},n.lazyLoadRTLTextPlugin=function(){ga.isLoading()||ga.isLoaded()||Ud()!=="deferred"||eu()},n.makeRequest=ge,n.mapObject=A,n.mercatorXfromLng=G_,n.mercatorYfromLat=H_,n.mercatorZfromAltitude=W_,n.mul=fk,n.mul$1=function(l,r,h){return l[0]=r[0]*h[0],l[1]=r[1]*h[1],l[2]=r[2]*h[2],l[3]=r[3]*h[3],l},n.multiply=q0,n.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},n.normalize=function(l,r){var h=r[0],f=r[1],C=r[2],z=h*h+f*f+C*C;return z>0&&(z=1/Math.sqrt(z)),l[0]=r[0]*z,l[1]=r[1]*z,l[2]=r[2]*z,l},n.number=hn,n.ortho=function(l,r,h,f,C,z,B){var te=1/(r-h),se=1/(f-C),be=1/(z-B);return l[0]=-2*te,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*se,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*be,l[11]=0,l[12]=(r+h)*te,l[13]=(C+f)*se,l[14]=(B+z)*be,l[15]=1,l},n.parseCacheControl=Z,n.parseGlyphPbf=function(l){return new bx(l).readFields(pA,[])},n.pbf=bx,n.performSymbolLayout=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Fn/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const r=l.bucket.layers[0].layout,h=l.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new sn(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new sn(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new sn(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:se,maxZoom:be}=l.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new sn(se),l.canonical),h["text-size"].possiblyEvaluate(new sn(be),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:se,maxZoom:be}=l.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new sn(se),l.canonical),h["icon-size"].possiblyEvaluate(new sn(be),l.canonical)]}const C=r.get("text-line-height")*rs,z=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",B=r.get("text-keep-upright"),te=r.get("text-size");for(const se of l.bucket.features){const be=r.get("text-font").evaluate(se,{},l.canonical).join(","),Re=te.evaluate(se,{},l.canonical),Oe=f.layoutTextSize.evaluate(se,{},l.canonical),Ve=f.layoutIconSize.evaluate(se,{},l.canonical),Ye={horizontal:{},vertical:void 0},Ze=se.text;let ht,lt=[0,0];if(Ze){const xt=Ze.toString(),Mt=r.get("text-letter-spacing").evaluate(se,{},l.canonical)*rs,Ut=lm(xt)?Mt:0,Ft=r.get("text-anchor").evaluate(se,{},l.canonical),xi=r.get("text-variable-anchor");if(!xi){const ii=r.get("text-radial-offset").evaluate(se,{},l.canonical);lt=ii?O_(Ft,[ii*rs,Ex]):r.get("text-offset").evaluate(se,{},l.canonical).map(Qt=>Qt*rs)}let Ei=z?"center":r.get("text-justify").evaluate(se,{},l.canonical);const ti=r.get("symbol-placement"),Xt=ti==="point"?r.get("text-max-width").evaluate(se,{},l.canonical)*rs:0,Yt=()=>{l.bucket.allowVerticalPlacement&&Nd(xt)&&(Ye.vertical=Sm(Ze,l.glyphMap,l.glyphPositions,l.imagePositions,be,Xt,C,Ft,"left",Ut,lt,n.WritingMode.vertical,!0,ti,Oe,Re))};if(!z&&xi){const ii=Ei==="auto"?xi.map(Vt=>Cx(Vt)):[Ei];let Qt=!1;for(let Vt=0;Vt<ii.length;Vt++){const Mi=ii[Vt];if(!Ye.horizontal[Mi])if(Qt)Ye.horizontal[Mi]=Ye.horizontal[0];else{const ki=Sm(Ze,l.glyphMap,l.glyphPositions,l.imagePositions,be,Xt,C,"center",Mi,Ut,lt,n.WritingMode.horizontal,!1,ti,Oe,Re);ki&&(Ye.horizontal[Mi]=ki,Qt=ki.positionedLines.length===1)}}Yt()}else{Ei==="auto"&&(Ei=Cx(Ft));const ii=Sm(Ze,l.glyphMap,l.glyphPositions,l.imagePositions,be,Xt,C,Ft,Ei,Ut,lt,n.WritingMode.horizontal,!1,ti,Oe,Re);ii&&(Ye.horizontal[Ei]=ii),Yt(),Nd(xt)&&z&&B&&(Ye.vertical=Sm(Ze,l.glyphMap,l.glyphPositions,l.imagePositions,be,Xt,C,Ft,Ei,Ut,lt,n.WritingMode.vertical,!1,ti,Oe,Re))}}let vt=!1;if(se.icon&&se.icon.name){const xt=l.imageMap[se.icon.name];xt&&(ht=bA(l.imagePositions[se.icon.name],r.get("icon-offset").evaluate(se,{},l.canonical),r.get("icon-anchor").evaluate(se,{},l.canonical)),vt=!!xt.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=vt:l.bucket.sdfIcons!==vt&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==l.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const It=B_(Ye.horizontal)||Ye.vertical;l.bucket.iconsInText=!!It&&It.iconsInText,(It||ht)&&SA(l.bucket,se,Ye,ht,l.imageMap,f,Oe,Ve,lt,vt,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},n.perspective=function(l,r,h,f,C){var z,B=1/Math.tan(r/2);return l[0]=B/h,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=B,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,C!=null&&C!==1/0?(l[10]=(C+f)*(z=1/(f-C)),l[14]=2*C*f*z):(l[10]=-1,l[14]=-2*f),l},n.pick=function(l,r){const h={};for(let f=0;f<r.length;f++){const C=r[f];C in l&&(h[C]=l[C])}return h},n.plugin=ga,n.pointGeometry=G,n.polygonIntersectsPolygon=$0,n.potpack=__,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.register=fi,n.registerForPluginStateChange=function(l){return l({pluginStatus:Os,pluginURL:wo}),Ll.on("pluginStateChange",l),l},n.renderColorRamp=e_,n.rotateX=function(l,r,h){var f=Math.sin(h),C=Math.cos(h),z=r[4],B=r[5],te=r[6],se=r[7],be=r[8],Re=r[9],Oe=r[10],Ve=r[11];return r!==l&&(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[4]=z*C+be*f,l[5]=B*C+Re*f,l[6]=te*C+Oe*f,l[7]=se*C+Ve*f,l[8]=be*C-z*f,l[9]=Re*C-B*f,l[10]=Oe*C-te*f,l[11]=Ve*C-se*f,l},n.rotateZ=function(l,r,h){var f=Math.sin(h),C=Math.cos(h),z=r[0],B=r[1],te=r[2],se=r[3],be=r[4],Re=r[5],Oe=r[6],Ve=r[7];return r!==l&&(l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=z*C+be*f,l[1]=B*C+Re*f,l[2]=te*C+Oe*f,l[3]=se*C+Ve*f,l[4]=be*C-z*f,l[5]=Re*C-B*f,l[6]=Oe*C-te*f,l[7]=Ve*C-se*f,l},n.scale=function(l,r,h){var f=h[0],C=h[1],z=h[2];return l[0]=r[0]*f,l[1]=r[1]*f,l[2]=r[2]*f,l[3]=r[3]*f,l[4]=r[4]*C,l[5]=r[5]*C,l[6]=r[6]*C,l[7]=r[7]*C,l[8]=r[8]*z,l[9]=r[9]*z,l[10]=r[10]*z,l[11]=r[11]*z,l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},n.scale$1=function(l,r,h){return l[0]=r[0]*h,l[1]=r[1]*h,l[2]=r[2]*h,l},n.setCacheLimits=function(l,r){ne=l,ue=r},n.setRTLTextPlugin=function(l,r,h=!1){if(Os===Jh||Os===Od||Os===jd)throw new Error("setRTLTextPlugin cannot be called multiple times.");wo=R.resolveURL(l),Os=Jh,Bd=r,Fd(),h||eu()},n.spec=Pe,n.sphericalToCartesian=function([l,r,h]){return r+=90,r*=Math.PI/180,h*=Math.PI/180,{x:l*Math.cos(r)*Math.sin(h),y:l*Math.sin(r)*Math.sin(h),z:l*Math.cos(h)}},n.sqrLen=function(l){var r=l[0],h=l[1];return r*r+h*h},n.sub=function(l,r,h){return l[0]=r[0]-h[0],l[1]=r[1]-h[1],l[2]=r[2]-h[2],l},n.toEvaluationFeature=Wc,n.transformMat3=function(l,r,h){var f=r[0],C=r[1],z=r[2];return l[0]=f*h[0]+C*h[3]+z*h[6],l[1]=f*h[1]+C*h[4]+z*h[7],l[2]=f*h[2]+C*h[5]+z*h[8],l},n.transformMat4=xm,n.transformMat4$1=function(l,r,h){var f=r[0],C=r[1];return l[0]=h[0]*f+h[4]*C+h[12],l[1]=h[1]*f+h[5]*C+h[13],l},n.translate=function(l,r,h){var f,C,z,B,te,se,be,Re,Oe,Ve,Ye,Ze,ht=h[0],lt=h[1],vt=h[2];return r===l?(l[12]=r[0]*ht+r[4]*lt+r[8]*vt+r[12],l[13]=r[1]*ht+r[5]*lt+r[9]*vt+r[13],l[14]=r[2]*ht+r[6]*lt+r[10]*vt+r[14],l[15]=r[3]*ht+r[7]*lt+r[11]*vt+r[15]):(C=r[1],z=r[2],B=r[3],te=r[4],se=r[5],be=r[6],Re=r[7],Oe=r[8],Ve=r[9],Ye=r[10],Ze=r[11],l[0]=f=r[0],l[1]=C,l[2]=z,l[3]=B,l[4]=te,l[5]=se,l[6]=be,l[7]=Re,l[8]=Oe,l[9]=Ve,l[10]=Ye,l[11]=Ze,l[12]=f*ht+te*lt+Oe*vt+r[12],l[13]=C*ht+se*lt+Ve*vt+r[13],l[14]=z*ht+be*lt+Ye*vt+r[14],l[15]=B*ht+Re*lt+Ze*vt+r[15]),l},n.triggerPluginCompletionEvent=um,n.unicodeBlockLookup=ei,n.uniqueId=function(){return T++},n.validateCustomStyleLayer=function(l){const r=[],h=l.id;return h===void 0&&r.push({message:`layers.${h}: missing required property "id"`}),l.render===void 0&&r.push({message:`layers.${h}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&r.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),r},n.validateLight=Yy,n.validateStyle=Xo,n.vectorTile=Bl,n.warnOnce=w,n.wrap=k}),c(["./shared"],function(n){function p(He){const xe=typeof He;if(xe==="number"||xe==="boolean"||xe==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){let Ke="[";for(const st of He)Ke+=`${p(st)},`;return`${Ke}]`}const Le=Object.keys(He).sort();let Ue="{";for(let Ke=0;Ke<Le.length;Ke++)Ue+=`${JSON.stringify(Le[Ke])}:${p(He[Le[Ke]])},`;return`${Ue}}`}function m(He){let xe="";for(const Le of n.refProperties)xe+=`/${p(He[Le])}`;return xe}class g{constructor(xe){this.keyCache={},xe&&this.replace(xe)}replace(xe){this._layerConfigs={},this._layers={},this.update(xe,[])}update(xe,Le){for(const Ke of xe){this._layerConfigs[Ke.id]=Ke;const st=this._layers[Ke.id]=n.createStyleLayer(Ke);st._featureFilter=n.createFilter(st.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of Le)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const Ue=function(Ke,st){const ct={};for(let nt=0;nt<Ke.length;nt++){const mt=st&&st[Ke[nt].id]||m(Ke[nt]);st&&(st[Ke[nt].id]=mt);let kt=ct[mt];kt||(kt=ct[mt]=[]),kt.push(Ke[nt])}const ot=[];for(const nt in ct)ot.push(ct[nt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Ke of Ue){const st=Ke.map(zt=>this._layers[zt.id]),ct=st[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let nt=this.familiesBySource[ot];nt||(nt=this.familiesBySource[ot]={});const mt=ct.sourceLayer||"_geojsonTileLayer";let kt=nt[mt];kt||(kt=nt[mt]=[]),kt.push(st)}}}class v{constructor(xe){const Le={},Ue=[];for(const ot in xe){const nt=xe[ot],mt=Le[ot]={};for(const kt in nt){const zt=nt[+kt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Dt={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};Ue.push(Dt),mt[kt]={rect:Dt,metrics:zt.metrics}}}const{w:Ke,h:st}=n.potpack(Ue),ct=new n.AlphaImage({width:Ke||1,height:st||1});for(const ot in xe){const nt=xe[ot];for(const mt in nt){const kt=nt[+mt];if(!kt||kt.bitmap.width===0||kt.bitmap.height===0)continue;const zt=Le[ot][mt].rect;n.AlphaImage.copy(kt.bitmap,ct,{x:0,y:0},{x:zt.x+1,y:zt.y+1},kt.bitmap)}}this.image=ct,this.positions=Le}}n.register("GlyphAtlas",v);class y{constructor(xe){this.tileID=new n.OverscaledTileID(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.uid=xe.uid,this.zoom=xe.zoom,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.collectResourceTiming,this.returnDependencies=!!xe.returnDependencies,this.promoteId=xe.promoteId}parse(xe,Le,Ue,Ke,st){this.status="parsing",this.data=xe,this.collisionBoxArray=new n.CollisionBoxArray;const ct=new n.DictionaryCoder(Object.keys(xe.layers).sort()),ot=new n.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const nt={},mt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ue},kt=Le.familiesBySource[this.source];for(const Pi in kt){const Ui=xe.layers[Pi];if(!Ui)continue;Ui.version===1&&n.warnOnce(`Vector tile source "${this.source}" layer "${Pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ji=ct.encode(Pi),hr=[];for(let Ur=0;Ur<Ui.length;Ur++){const gn=Ui.feature(Ur),jn=ot.getId(gn,Pi);hr.push({feature:gn,id:jn,index:Ur,sourceLayerIndex:ji})}for(const Ur of kt[Pi]){const gn=Ur[0];gn.source!==this.source&&n.warnOnce(`layer.source = ${gn.source} does not equal this.source = ${this.source}`),gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||gn.visibility!=="none"&&(k(Ur,this.zoom,Ue),(nt[gn.id]=gn.createBucket({index:ot.bucketLayerIDs.length,layers:Ur,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(hr,mt,this.tileID.canonical),ot.bucketLayerIDs.push(Ur.map(jn=>jn.id)))}}let zt,Dt,oi,Kt;const pi=n.mapObject(mt.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(pi).length?Ke.send("getGlyphs",{uid:this.uid,stacks:pi},(Pi,Ui)=>{zt||(zt=Pi,Dt=Ui,_i.call(this))}):Dt={};const vi=Object.keys(mt.iconDependencies);vi.length?Ke.send("getImages",{icons:vi,source:this.source,tileID:this.tileID,type:"icons"},(Pi,Ui)=>{zt||(zt=Pi,oi=Ui,_i.call(this))}):oi={};const Fi=Object.keys(mt.patternDependencies);function _i(){if(zt)return st(zt);if(Dt&&oi&&Kt){const Pi=new v(Dt),Ui=new n.ImageAtlas(oi,Kt);for(const ji in nt){const hr=nt[ji];hr instanceof n.SymbolBucket?(k(hr.layers,this.zoom,Ue),n.performSymbolLayout({bucket:hr,glyphMap:Dt,glyphPositions:Pi.positions,imageMap:oi,imagePositions:Ui.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):hr.hasPattern&&(hr instanceof n.LineBucket||hr instanceof n.FillBucket||hr instanceof n.FillExtrusionBucket)&&(k(hr.layers,this.zoom,Ue),hr.addFeatures(mt,this.tileID.canonical,Ui.patternPositions))}this.status="done",st(null,{buckets:Object.values(nt).filter(ji=>!ji.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pi.image,imageAtlas:Ui,glyphMap:this.returnDependencies?Dt:null,iconMap:this.returnDependencies?oi:null,glyphPositions:this.returnDependencies?Pi.positions:null})}}Fi.length?Ke.send("getImages",{icons:Fi,source:this.source,tileID:this.tileID,type:"patterns"},(Pi,Ui)=>{zt||(zt=Pi,Kt=Ui,_i.call(this))}):Kt={},_i.call(this)}}function k(He,xe,Le){const Ue=new n.EvaluationParameters(xe);for(const Ke of He)Ke.recalculate(Ue,Le)}function _(He,xe){const Le=n.getArrayBuffer(He.request,(Ue,Ke,st,ct)=>{Ue?xe(Ue):Ke&&xe(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Ke)),rawData:Ke,cacheControl:st,expires:ct})});return()=>{Le.cancel(),xe()}}class T{constructor(xe,Le,Ue,Ke){this.actor=xe,this.layerIndex=Le,this.availableImages=Ue,this.loadVectorData=Ke||_,this.loading={},this.loaded={}}loadTile(xe,Le){const Ue=xe.uid;this.loading||(this.loading={});const Ke=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new n.RequestPerformance(xe.request),st=this.loading[Ue]=new y(xe);st.abort=this.loadVectorData(xe,(ct,ot)=>{if(delete this.loading[Ue],ct||!ot)return st.status="done",this.loaded[Ue]=st,Le(ct);const nt=ot.rawData,mt={};ot.expires&&(mt.expires=ot.expires),ot.cacheControl&&(mt.cacheControl=ot.cacheControl);const kt={};if(Ke){const zt=Ke.finish();zt&&(kt.resourceTiming=JSON.parse(JSON.stringify(zt)))}st.vectorTile=ot.vectorTile,st.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Dt)=>{if(zt||!Dt)return Le(zt);Le(null,n.extend({rawTileData:nt.slice(0)},Dt,mt,kt))}),this.loaded=this.loaded||{},this.loaded[Ue]=st})}reloadTile(xe,Le){const Ue=this.loaded,Ke=xe.uid,st=this;if(Ue&&Ue[Ke]){const ct=Ue[Ke];ct.showCollisionBoxes=xe.showCollisionBoxes;const ot=(nt,mt)=>{const kt=ct.reloadCallback;kt&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,st.layerIndex,this.availableImages,st.actor,kt)),Le(nt,mt)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(xe,Le){const Ue=this.loading,Ke=xe.uid;Ue&&Ue[Ke]&&Ue[Ke].abort&&(Ue[Ke].abort(),delete Ue[Ke]),Le()}removeTile(xe,Le){const Ue=this.loaded,Ke=xe.uid;Ue&&Ue[Ke]&&delete Ue[Ke],Le()}}class M{constructor(){this.loaded={}}loadTile(xe,Le){const{uid:Ue,encoding:Ke,rawImageData:st}=xe,ct=n.isImageBitmap(st)?this.getImageData(st):st,ot=new n.DEMData(Ue,ct,Ke);this.loaded=this.loaded||{},this.loaded[Ue]=ot,Le(null,ot)}getImageData(xe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(xe.width,xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=xe.width,this.offscreenCanvas.height=xe.height,this.offscreenCanvasContext.drawImage(xe,0,0,xe.width,xe.height);const Le=this.offscreenCanvasContext.getImageData(-1,-1,xe.width+2,xe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:Le.width,height:Le.height},Le.data)}removeTile(xe){const Le=this.loaded,Ue=xe.uid;Le&&Le[Ue]&&delete Le[Ue]}}var A=function He(xe,Le){var Ue,Ke=xe&&xe.type;if(Ke==="FeatureCollection")for(Ue=0;Ue<xe.features.length;Ue++)He(xe.features[Ue],Le);else if(Ke==="GeometryCollection")for(Ue=0;Ue<xe.geometries.length;Ue++)He(xe.geometries[Ue],Le);else if(Ke==="Feature")He(xe.geometry,Le);else if(Ke==="Polygon")x(xe.coordinates,Le);else if(Ke==="MultiPolygon")for(Ue=0;Ue<xe.coordinates.length;Ue++)x(xe.coordinates[Ue],Le);return xe};function x(He,xe){if(He.length!==0){P(He[0],xe);for(var Le=1;Le<He.length;Le++)P(He[Le],!1)}}function P(He,xe){for(var Le=0,Ue=0,Ke=0,st=He.length,ct=st-1;Ke<st;ct=Ke++){var ot=(He[Ke][0]-He[ct][0])*(He[ct][1]+He[Ke][1]),nt=Le+ot;Ue+=Math.abs(Le)>=Math.abs(ot)?Le-nt+ot:ot-nt+Le,Le=nt}Le+Ue>=0!=!!xe&&He.reverse()}const D=n.vectorTile.VectorTileFeature.prototype.toGeoJSON;class w{constructor(xe){this._feature=xe,this.extent=n.EXTENT,this.type=xe.type,this.properties=xe.tags,"id"in xe&&!isNaN(xe.id)&&(this.id=parseInt(xe.id,10))}loadGeometry(){if(this._feature.type===1){const xe=[];for(const Le of this._feature.geometry)xe.push([new n.pointGeometry(Le[0],Le[1])]);return xe}{const xe=[];for(const Le of this._feature.geometry){const Ue=[];for(const Ke of Le)Ue.push(new n.pointGeometry(Ke[0],Ke[1]));xe.push(Ue)}return xe}}toGeoJSON(xe,Le,Ue){return D.call(this,xe,Le,Ue)}}class I{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=xe.length,this._features=xe}feature(xe){return new w(this._features[xe])}}var N={exports:{}},q=n.pointGeometry,Z=n.vectorTile.VectorTileFeature,X=j;function j(He,xe){this.options=xe||{},this.features=He,this.length=He.length}function V(He,xe){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=xe||4096}j.prototype.feature=function(He){return new V(this.features[He],this.options.extent)},V.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var xe=0;xe<He.length;xe++){for(var Le=He[xe],Ue=[],Ke=0;Ke<Le.length;Ke++)Ue.push(new q(Le[Ke][0],Le[Ke][1]));this.geometry.push(Ue)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,xe=1/0,Le=-1/0,Ue=1/0,Ke=-1/0,st=0;st<He.length;st++)for(var ct=He[st],ot=0;ot<ct.length;ot++){var nt=ct[ot];xe=Math.min(xe,nt.x),Le=Math.max(Le,nt.x),Ue=Math.min(Ue,nt.y),Ke=Math.max(Ke,nt.y)}return[xe,Ue,Le,Ke]},V.prototype.toGeoJSON=Z.prototype.toGeoJSON;var U=n.pbf,L=X;function R(He){var xe=new U;return function(Le,Ue){for(var Ke in Le.layers)Ue.writeMessage(3,G,Le.layers[Ke])}(He,xe),xe.finish()}function G(He,xe){var Le;xe.writeVarintField(15,He.version||1),xe.writeStringField(1,He.name||""),xe.writeVarintField(5,He.extent||4096);var Ue={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<He.length;Le++)Ue.feature=He.feature(Le),xe.writeMessage(2,$,Ue);var Ke=Ue.keys;for(Le=0;Le<Ke.length;Le++)xe.writeStringField(3,Ke[Le]);var st=Ue.values;for(Le=0;Le<st.length;Le++)xe.writeMessage(4,ue,st[Le])}function $(He,xe){var Le=He.feature;Le.id!==void 0&&xe.writeVarintField(1,Le.id),xe.writeMessage(2,F,He),xe.writeVarintField(3,Le.type),xe.writeMessage(4,ne,Le)}function F(He,xe){var Le=He.feature,Ue=He.keys,Ke=He.values,st=He.keycache,ct=He.valuecache;for(var ot in Le.properties){var nt=Le.properties[ot],mt=st[ot];if(nt!==null){mt===void 0&&(Ue.push(ot),st[ot]=mt=Ue.length-1),xe.writeVarint(mt);var kt=typeof nt;kt!=="string"&&kt!=="boolean"&&kt!=="number"&&(nt=JSON.stringify(nt));var zt=kt+":"+nt,Dt=ct[zt];Dt===void 0&&(Ke.push(nt),ct[zt]=Dt=Ke.length-1),xe.writeVarint(Dt)}}}function H(He,xe){return(xe<<3)+(7&He)}function W(He){return He<<1^He>>31}function ne(He,xe){for(var Le=He.loadGeometry(),Ue=He.type,Ke=0,st=0,ct=Le.length,ot=0;ot<ct;ot++){var nt=Le[ot],mt=1;Ue===1&&(mt=nt.length),xe.writeVarint(H(1,mt));for(var kt=Ue===3?nt.length-1:nt.length,zt=0;zt<kt;zt++){zt===1&&Ue!==1&&xe.writeVarint(H(2,kt-1));var Dt=nt[zt].x-Ke,oi=nt[zt].y-st;xe.writeVarint(W(Dt)),xe.writeVarint(W(oi)),Ke+=Dt,st+=oi}Ue===3&&xe.writeVarint(H(7,1))}}function ue(He,xe){var Le=typeof He;Le==="string"?xe.writeStringField(1,He):Le==="boolean"?xe.writeBooleanField(7,He):Le==="number"&&(He%1!=0?xe.writeDoubleField(3,He):He<0?xe.writeSVarintField(6,He):xe.writeVarintField(5,He))}function ie(He,xe,Le,Ue,Ke,st){if(Ke-Ue<=Le)return;const ct=Ue+Ke>>1;oe(He,xe,ct,Ue,Ke,st%2),ie(He,xe,Le,Ue,ct-1,st+1),ie(He,xe,Le,ct+1,Ke,st+1)}function oe(He,xe,Le,Ue,Ke,st){for(;Ke>Ue;){if(Ke-Ue>600){const mt=Ke-Ue+1,kt=Le-Ue+1,zt=Math.log(mt),Dt=.5*Math.exp(2*zt/3),oi=.5*Math.sqrt(zt*Dt*(mt-Dt)/mt)*(kt-mt/2<0?-1:1);oe(He,xe,Le,Math.max(Ue,Math.floor(Le-kt*Dt/mt+oi)),Math.min(Ke,Math.floor(Le+(mt-kt)*Dt/mt+oi)),st)}const ct=xe[2*Le+st];let ot=Ue,nt=Ke;for(Se(He,xe,Ue,Le),xe[2*Ke+st]>ct&&Se(He,xe,Ue,Ke);ot<nt;){for(Se(He,xe,ot,nt),ot++,nt--;xe[2*ot+st]<ct;)ot++;for(;xe[2*nt+st]>ct;)nt--}xe[2*Ue+st]===ct?Se(He,xe,Ue,nt):(nt++,Se(He,xe,nt,Ke)),nt<=Le&&(Ue=nt+1),Le<=nt&&(Ke=nt-1)}}function Se(He,xe,Le,Ue){ye(He,Le,Ue),ye(xe,2*Le,2*Ue),ye(xe,2*Le+1,2*Ue+1)}function ye(He,xe,Le){const Ue=He[xe];He[xe]=He[Le],He[Le]=Ue}function Ce(He,xe,Le,Ue){const Ke=He-Le,st=xe-Ue;return Ke*Ke+st*st}N.exports=R,N.exports.fromVectorTileJs=R,N.exports.fromGeojsonVt=function(He,xe){xe=xe||{};var Le={};for(var Ue in He)Le[Ue]=new L(He[Ue].features,xe),Le[Ue].name=Ue,Le[Ue].version=xe.version,Le[Ue].extent=xe.extent;return R({layers:Le})},N.exports.GeoJSONWrapper=L;const K=He=>He[0],Q=He=>He[1];class ae{constructor(xe,Le=K,Ue=Q,Ke=64,st=Float64Array){this.nodeSize=Ke,this.points=xe;const ct=xe.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(xe.length),nt=this.coords=new st(2*xe.length);for(let mt=0;mt<xe.length;mt++)ot[mt]=mt,nt[2*mt]=Le(xe[mt]),nt[2*mt+1]=Ue(xe[mt]);ie(ot,nt,Ke,0,ot.length-1,0)}range(xe,Le,Ue,Ke){return function(st,ct,ot,nt,mt,kt,zt){const Dt=[0,st.length-1,0],oi=[];let Kt,pi;for(;Dt.length;){const vi=Dt.pop(),Fi=Dt.pop(),_i=Dt.pop();if(Fi-_i<=zt){for(let ji=_i;ji<=Fi;ji++)Kt=ct[2*ji],pi=ct[2*ji+1],Kt>=ot&&Kt<=mt&&pi>=nt&&pi<=kt&&oi.push(st[ji]);continue}const Pi=Math.floor((_i+Fi)/2);Kt=ct[2*Pi],pi=ct[2*Pi+1],Kt>=ot&&Kt<=mt&&pi>=nt&&pi<=kt&&oi.push(st[Pi]);const Ui=(vi+1)%2;(vi===0?ot<=Kt:nt<=pi)&&(Dt.push(_i),Dt.push(Pi-1),Dt.push(Ui)),(vi===0?mt>=Kt:kt>=pi)&&(Dt.push(Pi+1),Dt.push(Fi),Dt.push(Ui))}return oi}(this.ids,this.coords,xe,Le,Ue,Ke,this.nodeSize)}within(xe,Le,Ue){return function(Ke,st,ct,ot,nt,mt){const kt=[0,Ke.length-1,0],zt=[],Dt=nt*nt;for(;kt.length;){const oi=kt.pop(),Kt=kt.pop(),pi=kt.pop();if(Kt-pi<=mt){for(let Ui=pi;Ui<=Kt;Ui++)Ce(st[2*Ui],st[2*Ui+1],ct,ot)<=Dt&&zt.push(Ke[Ui]);continue}const vi=Math.floor((pi+Kt)/2),Fi=st[2*vi],_i=st[2*vi+1];Ce(Fi,_i,ct,ot)<=Dt&&zt.push(Ke[vi]);const Pi=(oi+1)%2;(oi===0?ct-nt<=Fi:ot-nt<=_i)&&(kt.push(pi),kt.push(vi-1),kt.push(Pi)),(oi===0?ct+nt>=Fi:ot+nt>=_i)&&(kt.push(vi+1),kt.push(Kt),kt.push(Pi))}return zt}(this.ids,this.coords,xe,Le,Ue,this.nodeSize)}}const ve={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},J=Math.fround||(re=new Float32Array(1),He=>(re[0]=+He,re[0]));var re;class ce{constructor(xe){this.options=ke(Object.create(ve),xe),this.trees=new Array(this.options.maxZoom+1)}load(xe){const{log:Le,minZoom:Ue,maxZoom:Ke,nodeSize:st}=this.options;Le&&console.time("total time");const ct=`prepare ${xe.length} points`;Le&&console.time(ct),this.points=xe;let ot=[];for(let nt=0;nt<xe.length;nt++)xe[nt].geometry&&ot.push(_e(xe[nt],nt));this.trees[Ke+1]=new ae(ot,me,fe,st,Float32Array),Le&&console.timeEnd(ct);for(let nt=Ke;nt>=Ue;nt--){const mt=+Date.now();ot=this._cluster(ot,nt),this.trees[nt]=new ae(ot,me,fe,st,Float32Array),Le&&console.log("z%d: %d clusters in %dms",nt,ot.length,+Date.now()-mt)}return Le&&console.timeEnd("total time"),this}getClusters(xe,Le){let Ue=((xe[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,xe[1]));let st=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)Ue=-180,st=180;else if(Ue>st){const kt=this.getClusters([Ue,Ke,180,ct],Le),zt=this.getClusters([-180,Ke,st,ct],Le);return kt.concat(zt)}const ot=this.trees[this._limitZoom(Le)],nt=ot.range(Ie(Ue),Be(ct),Ie(st),Be(Ke)),mt=[];for(const kt of nt){const zt=ot.points[kt];mt.push(zt.numPoints?ze(zt):this.points[zt.index])}return mt}getChildren(xe){const Le=this._getOriginId(xe),Ue=this._getOriginZoom(xe),Ke="No cluster with the specified id.",st=this.trees[Ue];if(!st)throw new Error(Ke);const ct=st.points[Le];if(!ct)throw new Error(Ke);const ot=this.options.radius/(this.options.extent*Math.pow(2,Ue-1)),nt=st.within(ct.x,ct.y,ot),mt=[];for(const kt of nt){const zt=st.points[kt];zt.parentId===xe&&mt.push(zt.numPoints?ze(zt):this.points[zt.index])}if(mt.length===0)throw new Error(Ke);return mt}getLeaves(xe,Le,Ue){const Ke=[];return this._appendLeaves(Ke,xe,Le=Le||10,Ue=Ue||0,0),Ke}getTile(xe,Le,Ue){const Ke=this.trees[this._limitZoom(xe)],st=Math.pow(2,xe),{extent:ct,radius:ot}=this.options,nt=ot/ct,mt=(Ue-nt)/st,kt=(Ue+1+nt)/st,zt={features:[]};return this._addTileFeatures(Ke.range((Le-nt)/st,mt,(Le+1+nt)/st,kt),Ke.points,Le,Ue,st,zt),Le===0&&this._addTileFeatures(Ke.range(1-nt/st,mt,1,kt),Ke.points,st,Ue,st,zt),Le===st-1&&this._addTileFeatures(Ke.range(0,mt,nt/st,kt),Ke.points,-1,Ue,st,zt),zt.features.length?zt:null}getClusterExpansionZoom(xe){let Le=this._getOriginZoom(xe)-1;for(;Le<=this.options.maxZoom;){const Ue=this.getChildren(xe);if(Le++,Ue.length!==1)break;xe=Ue[0].properties.cluster_id}return Le}_appendLeaves(xe,Le,Ue,Ke,st){const ct=this.getChildren(Le);for(const ot of ct){const nt=ot.properties;if(nt&&nt.cluster?st+nt.point_count<=Ke?st+=nt.point_count:st=this._appendLeaves(xe,nt.cluster_id,Ue,Ke,st):st<Ke?st++:xe.push(ot),xe.length===Ue)break}return st}_addTileFeatures(xe,Le,Ue,Ke,st,ct){for(const ot of xe){const nt=Le[ot],mt=nt.numPoints;let kt,zt,Dt;if(mt)kt=Te(nt),zt=nt.x,Dt=nt.y;else{const pi=this.points[nt.index];kt=pi.properties,zt=Ie(pi.geometry.coordinates[0]),Dt=Be(pi.geometry.coordinates[1])}const oi={type:1,geometry:[[Math.round(this.options.extent*(zt*st-Ue)),Math.round(this.options.extent*(Dt*st-Ke))]],tags:kt};let Kt;mt?Kt=nt.id:this.options.generateId?Kt=nt.index:this.points[nt.index].id&&(Kt=this.points[nt.index].id),Kt!==void 0&&(oi.id=Kt),ct.features.push(oi)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,Le){const Ue=[],{radius:Ke,extent:st,reduce:ct,minPoints:ot}=this.options,nt=Ke/(st*Math.pow(2,Le));for(let mt=0;mt<xe.length;mt++){const kt=xe[mt];if(kt.zoom<=Le)continue;kt.zoom=Le;const zt=this.trees[Le+1],Dt=zt.within(kt.x,kt.y,nt),oi=kt.numPoints||1;let Kt=oi;for(const pi of Dt){const vi=zt.points[pi];vi.zoom>Le&&(Kt+=vi.numPoints||1)}if(Kt>oi&&Kt>=ot){let pi=kt.x*oi,vi=kt.y*oi,Fi=ct&&oi>1?this._map(kt,!0):null;const _i=(mt<<5)+(Le+1)+this.points.length;for(const Pi of Dt){const Ui=zt.points[Pi];if(Ui.zoom<=Le)continue;Ui.zoom=Le;const ji=Ui.numPoints||1;pi+=Ui.x*ji,vi+=Ui.y*ji,Ui.parentId=_i,ct&&(Fi||(Fi=this._map(kt,!0)),ct(Fi,this._map(Ui)))}kt.parentId=_i,Ue.push(ge(pi/Kt,vi/Kt,_i,Kt,Fi))}else if(Ue.push(kt),Kt>1)for(const pi of Dt){const vi=zt.points[pi];vi.zoom<=Le||(vi.zoom=Le,Ue.push(vi))}}return Ue}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,Le){if(xe.numPoints)return Le?ke({},xe.properties):xe.properties;const Ue=this.points[xe.index].properties,Ke=this.options.map(Ue);return Le&&Ke===Ue?ke({},Ke):Ke}}function ge(He,xe,Le,Ue,Ke){return{x:J(He),y:J(xe),zoom:1/0,id:Le,parentId:-1,numPoints:Ue,properties:Ke}}function _e(He,xe){const[Le,Ue]=He.geometry.coordinates;return{x:J(Ie(Le)),y:J(Be(Ue)),zoom:1/0,index:xe,parentId:-1}}function ze(He){return{type:"Feature",id:He.id,properties:Te(He),geometry:{type:"Point",coordinates:[(xe=He.x,360*(xe-.5)),Ge(He.y)]}};var xe}function Te(He){const xe=He.numPoints,Le=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe;return ke(ke({},He.properties),{cluster:!0,cluster_id:He.id,point_count:xe,point_count_abbreviated:Le})}function Ie(He){return He/360+.5}function Be(He){const xe=Math.sin(He*Math.PI/180),Le=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Le<0?0:Le>1?1:Le}function Ge(He){const xe=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function ke(He,xe){for(const Le in xe)He[Le]=xe[Le];return He}function me(He){return He.x}function fe(He){return He.y}function Ae(He,xe,Le,Ue){for(var Ke,st=Ue,ct=Le-xe>>1,ot=Le-xe,nt=He[xe],mt=He[xe+1],kt=He[Le],zt=He[Le+1],Dt=xe+3;Dt<Le;Dt+=3){var oi=De(He[Dt],He[Dt+1],nt,mt,kt,zt);if(oi>st)Ke=Dt,st=oi;else if(oi===st){var Kt=Math.abs(Dt-ct);Kt<ot&&(Ke=Dt,ot=Kt)}}st>Ue&&(Ke-xe>3&&Ae(He,xe,Ke,Ue),He[Ke+2]=st,Le-Ke>3&&Ae(He,Ke,Le,Ue))}function De(He,xe,Le,Ue,Ke,st){var ct=Ke-Le,ot=st-Ue;if(ct!==0||ot!==0){var nt=((He-Le)*ct+(xe-Ue)*ot)/(ct*ct+ot*ot);nt>1?(Le=Ke,Ue=st):nt>0&&(Le+=ct*nt,Ue+=ot*nt)}return(ct=He-Le)*ct+(ot=xe-Ue)*ot}function Pe(He,xe,Le,Ue){var Ke={id:He===void 0?null:He,type:xe,geometry:Le,tags:Ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var ct=st.geometry,ot=st.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")je(st,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var nt=0;nt<ct.length;nt++)je(st,ct[nt]);else if(ot==="MultiPolygon")for(nt=0;nt<ct.length;nt++)for(var mt=0;mt<ct[nt].length;mt++)je(st,ct[nt][mt])}(Ke),Ke}function je(He,xe){for(var Le=0;Le<xe.length;Le+=3)He.minX=Math.min(He.minX,xe[Le]),He.minY=Math.min(He.minY,xe[Le+1]),He.maxX=Math.max(He.maxX,xe[Le]),He.maxY=Math.max(He.maxY,xe[Le+1])}function Xe(He,xe,Le,Ue){if(xe.geometry){var Ke=xe.geometry.coordinates,st=xe.geometry.type,ct=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),ot=[],nt=xe.id;if(Le.promoteId?nt=xe.properties[Le.promoteId]:Le.generateId&&(nt=Ue||0),st==="Point")et(Ke,ot);else if(st==="MultiPoint")for(var mt=0;mt<Ke.length;mt++)et(Ke[mt],ot);else if(st==="LineString")rt(Ke,ot,ct,!1);else if(st==="MultiLineString"){if(Le.lineMetrics){for(mt=0;mt<Ke.length;mt++)rt(Ke[mt],ot=[],ct,!1),He.push(Pe(nt,"LineString",ot,xe.properties));return}dt(Ke,ot,ct,!1)}else if(st==="Polygon")dt(Ke,ot,ct,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(mt=0;mt<xe.geometry.geometries.length;mt++)Xe(He,{id:nt,geometry:xe.geometry.geometries[mt],properties:xe.properties},Le,Ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ke.length;mt++){var kt=[];dt(Ke[mt],kt,ct,!0),ot.push(kt)}}He.push(Pe(nt,st,ot,xe.properties))}}function et(He,xe){xe.push(gt(He[0])),xe.push(wt(He[1])),xe.push(0)}function rt(He,xe,Le,Ue){for(var Ke,st,ct=0,ot=0;ot<He.length;ot++){var nt=gt(He[ot][0]),mt=wt(He[ot][1]);xe.push(nt),xe.push(mt),xe.push(0),ot>0&&(ct+=Ue?(Ke*mt-nt*st)/2:Math.sqrt(Math.pow(nt-Ke,2)+Math.pow(mt-st,2))),Ke=nt,st=mt}var kt=xe.length-3;xe[2]=1,Ae(xe,0,kt,Le),xe[kt+2]=1,xe.size=Math.abs(ct),xe.start=0,xe.end=xe.size}function dt(He,xe,Le,Ue){for(var Ke=0;Ke<He.length;Ke++){var st=[];rt(He[Ke],st,Le,Ue),xe.push(st)}}function gt(He){return He/360+.5}function wt(He){var xe=Math.sin(He*Math.PI/180),Le=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Le<0?0:Le>1?1:Le}function Rt(He,xe,Le,Ue,Ke,st,ct,ot){if(Ue/=xe,st>=(Le/=xe)&&ct<Ue)return He;if(ct<Le||st>=Ue)return null;for(var nt=[],mt=0;mt<He.length;mt++){var kt=He[mt],zt=kt.geometry,Dt=kt.type,oi=Ke===0?kt.minX:kt.minY,Kt=Ke===0?kt.maxX:kt.maxY;if(oi>=Le&&Kt<Ue)nt.push(kt);else if(!(Kt<Le||oi>=Ue)){var pi=[];if(Dt==="Point"||Dt==="MultiPoint")ft(zt,pi,Le,Ue,Ke);else if(Dt==="LineString")Ct(zt,pi,Le,Ue,Ke,!1,ot.lineMetrics);else if(Dt==="MultiLineString")si(zt,pi,Le,Ue,Ke,!1);else if(Dt==="Polygon")si(zt,pi,Le,Ue,Ke,!0);else if(Dt==="MultiPolygon")for(var vi=0;vi<zt.length;vi++){var Fi=[];si(zt[vi],Fi,Le,Ue,Ke,!0),Fi.length&&pi.push(Fi)}if(pi.length){if(ot.lineMetrics&&Dt==="LineString"){for(vi=0;vi<pi.length;vi++)nt.push(Pe(kt.id,Dt,pi[vi],kt.tags));continue}Dt!=="LineString"&&Dt!=="MultiLineString"||(pi.length===1?(Dt="LineString",pi=pi[0]):Dt="MultiLineString"),Dt!=="Point"&&Dt!=="MultiPoint"||(Dt=pi.length===3?"Point":"MultiPoint"),nt.push(Pe(kt.id,Dt,pi,kt.tags))}}}return nt.length?nt:null}function ft(He,xe,Le,Ue,Ke){for(var st=0;st<He.length;st+=3){var ct=He[st+Ke];ct>=Le&&ct<=Ue&&(xe.push(He[st]),xe.push(He[st+1]),xe.push(He[st+2]))}}function Ct(He,xe,Le,Ue,Ke,st,ct){for(var ot,nt,mt=Tt(He),kt=Ke===0?Ht:ar,zt=He.start,Dt=0;Dt<He.length-3;Dt+=3){var oi=He[Dt],Kt=He[Dt+1],pi=He[Dt+2],vi=He[Dt+3],Fi=He[Dt+4],_i=Ke===0?oi:Kt,Pi=Ke===0?vi:Fi,Ui=!1;ct&&(ot=Math.sqrt(Math.pow(oi-vi,2)+Math.pow(Kt-Fi,2))),_i<Le?Pi>Le&&(nt=kt(mt,oi,Kt,vi,Fi,Le),ct&&(mt.start=zt+ot*nt)):_i>Ue?Pi<Ue&&(nt=kt(mt,oi,Kt,vi,Fi,Ue),ct&&(mt.start=zt+ot*nt)):ui(mt,oi,Kt,pi),Pi<Le&&_i>=Le&&(nt=kt(mt,oi,Kt,vi,Fi,Le),Ui=!0),Pi>Ue&&_i<=Ue&&(nt=kt(mt,oi,Kt,vi,Fi,Ue),Ui=!0),!st&&Ui&&(ct&&(mt.end=zt+ot*nt),xe.push(mt),mt=Tt(He)),ct&&(zt+=ot)}var ji=He.length-3;oi=He[ji],Kt=He[ji+1],pi=He[ji+2],(_i=Ke===0?oi:Kt)>=Le&&_i<=Ue&&ui(mt,oi,Kt,pi),ji=mt.length-3,st&&ji>=3&&(mt[ji]!==mt[0]||mt[ji+1]!==mt[1])&&ui(mt,mt[0],mt[1],mt[2]),mt.length&&xe.push(mt)}function Tt(He){var xe=[];return xe.size=He.size,xe.start=He.start,xe.end=He.end,xe}function si(He,xe,Le,Ue,Ke,st){for(var ct=0;ct<He.length;ct++)Ct(He[ct],xe,Le,Ue,Ke,st,!1)}function ui(He,xe,Le,Ue){He.push(xe),He.push(Le),He.push(Ue)}function Ht(He,xe,Le,Ue,Ke,st){var ct=(st-xe)/(Ue-xe);return He.push(st),He.push(Le+(Ke-Le)*ct),He.push(1),ct}function ar(He,xe,Le,Ue,Ke,st){var ct=(st-Le)/(Ke-Le);return He.push(xe+(Ue-xe)*ct),He.push(st),He.push(1),ct}function Zi(He,xe){for(var Le=[],Ue=0;Ue<He.length;Ue++){var Ke,st=He[Ue],ct=st.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Ke=mr(st.geometry,xe);else if(ct==="MultiLineString"||ct==="Polygon"){Ke=[];for(var ot=0;ot<st.geometry.length;ot++)Ke.push(mr(st.geometry[ot],xe))}else if(ct==="MultiPolygon")for(Ke=[],ot=0;ot<st.geometry.length;ot++){for(var nt=[],mt=0;mt<st.geometry[ot].length;mt++)nt.push(mr(st.geometry[ot][mt],xe));Ke.push(nt)}Le.push(Pe(st.id,ct,Ke,st.tags))}return Le}function mr(He,xe){var Le=[];Le.size=He.size,He.start!==void 0&&(Le.start=He.start,Le.end=He.end);for(var Ue=0;Ue<He.length;Ue+=3)Le.push(He[Ue]+xe,He[Ue+1],He[Ue+2]);return Le}function zr(He,xe){if(He.transformed)return He;var Le,Ue,Ke,st=1<<He.z,ct=He.x,ot=He.y;for(Le=0;Le<He.features.length;Le++){var nt=He.features[Le],mt=nt.geometry,kt=nt.type;if(nt.geometry=[],kt===1)for(Ue=0;Ue<mt.length;Ue+=2)nt.geometry.push(ir(mt[Ue],mt[Ue+1],xe,st,ct,ot));else for(Ue=0;Ue<mt.length;Ue++){var zt=[];for(Ke=0;Ke<mt[Ue].length;Ke+=2)zt.push(ir(mt[Ue][Ke],mt[Ue][Ke+1],xe,st,ct,ot));nt.geometry.push(zt)}}return He.transformed=!0,He}function ir(He,xe,Le,Ue,Ke,st){return[Math.round(Le*(He*Ue-Ke)),Math.round(Le*(xe*Ue-st))]}function ut(He,xe,Le,Ue,Ke){for(var st=xe===Ke.maxZoom?0:Ke.tolerance/((1<<xe)*Ke.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:Ue,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<He.length;ot++){ct.numFeatures++,bt(ct,He[ot],st,Ke);var nt=He[ot].minX,mt=He[ot].minY,kt=He[ot].maxX,zt=He[ot].maxY;nt<ct.minX&&(ct.minX=nt),mt<ct.minY&&(ct.minY=mt),kt>ct.maxX&&(ct.maxX=kt),zt>ct.maxY&&(ct.maxY=zt)}return ct}function bt(He,xe,Le,Ue){var Ke=xe.geometry,st=xe.type,ct=[];if(st==="Point"||st==="MultiPoint")for(var ot=0;ot<Ke.length;ot+=3)ct.push(Ke[ot]),ct.push(Ke[ot+1]),He.numPoints++,He.numSimplified++;else if(st==="LineString")Pt(ct,Ke,He,Le,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ot=0;ot<Ke.length;ot++)Pt(ct,Ke[ot],He,Le,st==="Polygon",ot===0);else if(st==="MultiPolygon")for(var nt=0;nt<Ke.length;nt++){var mt=Ke[nt];for(ot=0;ot<mt.length;ot++)Pt(ct,mt[ot],He,Le,!0,ot===0)}if(ct.length){var kt=xe.tags||null;if(st==="LineString"&&Ue.lineMetrics){for(var zt in kt={},xe.tags)kt[zt]=xe.tags[zt];kt.mapbox_clip_start=Ke.start/Ke.size,kt.mapbox_clip_end=Ke.end/Ke.size}var Dt={geometry:ct,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:kt};xe.id!==null&&(Dt.id=xe.id),He.features.push(Dt)}}function Pt(He,xe,Le,Ue,Ke,st){var ct=Ue*Ue;if(Ue>0&&xe.size<(Ke?ct:Ue))Le.numPoints+=xe.length/3;else{for(var ot=[],nt=0;nt<xe.length;nt+=3)(Ue===0||xe[nt+2]>ct)&&(Le.numSimplified++,ot.push(xe[nt]),ot.push(xe[nt+1])),Le.numPoints++;Ke&&function(mt,kt){for(var zt=0,Dt=0,oi=mt.length,Kt=oi-2;Dt<oi;Kt=Dt,Dt+=2)zt+=(mt[Dt]-mt[Kt])*(mt[Dt+1]+mt[Kt+1]);if(zt>0===kt)for(Dt=0,oi=mt.length;Dt<oi/2;Dt+=2){var pi=mt[Dt],vi=mt[Dt+1];mt[Dt]=mt[oi-2-Dt],mt[Dt+1]=mt[oi-1-Dt],mt[oi-2-Dt]=pi,mt[oi-1-Dt]=vi}}(ot,st),He.push(ot)}}function Bt(He,xe){var Le=(xe=this.options=function(Ke,st){for(var ct in st)Ke[ct]=st[ct];return Ke}(Object.create(this.options),xe)).debug;if(Le&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ue=function(Ke,st){var ct=[];if(Ke.type==="FeatureCollection")for(var ot=0;ot<Ke.features.length;ot++)Xe(ct,Ke.features[ot],st,ot);else Xe(ct,Ke.type==="Feature"?Ke:{geometry:Ke},st);return ct}(He,xe);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=function(Ke,st){var ct=st.buffer/st.extent,ot=Ke,nt=Rt(Ke,1,-1-ct,ct,0,-1,2,st),mt=Rt(Ke,1,1-ct,2+ct,0,-1,2,st);return(nt||mt)&&(ot=Rt(Ke,1,-ct,1+ct,0,-1,2,st)||[],nt&&(ot=Zi(nt,1).concat(ot)),mt&&(ot=ot.concat(Zi(mt,-1)))),ot}(Ue,xe),Ue.length&&this.splitTile(Ue,0,0,0),Le&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qt(He,xe,Le){return 32*((1<<He)*Le+xe)+He}function bi(He,xe){const Le=He.tileID.canonical;if(!this._geoJSONIndex)return xe(null,null);const Ue=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!Ue)return xe(null,null);const Ke=new I(Ue.features);let st=N.exports(Ke);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),xe(null,{vectorTile:Ke,rawData:st.buffer})}Bt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bt.prototype.splitTile=function(He,xe,Le,Ue,Ke,st,ct){for(var ot=[He,xe,Le,Ue],nt=this.options,mt=nt.debug;ot.length;){Ue=ot.pop(),Le=ot.pop(),xe=ot.pop(),He=ot.pop();var kt=1<<xe,zt=qt(xe,Le,Ue),Dt=this.tiles[zt];if(!Dt&&(mt>1&&console.time("creation"),Dt=this.tiles[zt]=ut(He,xe,Le,Ue,nt),this.tileCoords.push({z:xe,x:Le,y:Ue}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,Le,Ue,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));var oi="z"+xe;this.stats[oi]=(this.stats[oi]||0)+1,this.total++}if(Dt.source=He,Ke){if(xe===nt.maxZoom||xe===Ke)continue;var Kt=1<<Ke-xe;if(Le!==Math.floor(st/Kt)||Ue!==Math.floor(ct/Kt))continue}else if(xe===nt.indexMaxZoom||Dt.numPoints<=nt.indexMaxPoints)continue;if(Dt.source=null,He.length!==0){mt>1&&console.time("clipping");var pi,vi,Fi,_i,Pi,Ui,ji=.5*nt.buffer/nt.extent,hr=.5-ji,Ur=.5+ji,gn=1+ji;pi=vi=Fi=_i=null,Pi=Rt(He,kt,Le-ji,Le+Ur,0,Dt.minX,Dt.maxX,nt),Ui=Rt(He,kt,Le+hr,Le+gn,0,Dt.minX,Dt.maxX,nt),He=null,Pi&&(pi=Rt(Pi,kt,Ue-ji,Ue+Ur,1,Dt.minY,Dt.maxY,nt),vi=Rt(Pi,kt,Ue+hr,Ue+gn,1,Dt.minY,Dt.maxY,nt),Pi=null),Ui&&(Fi=Rt(Ui,kt,Ue-ji,Ue+Ur,1,Dt.minY,Dt.maxY,nt),_i=Rt(Ui,kt,Ue+hr,Ue+gn,1,Dt.minY,Dt.maxY,nt),Ui=null),mt>1&&console.timeEnd("clipping"),ot.push(pi||[],xe+1,2*Le,2*Ue),ot.push(vi||[],xe+1,2*Le,2*Ue+1),ot.push(Fi||[],xe+1,2*Le+1,2*Ue),ot.push(_i||[],xe+1,2*Le+1,2*Ue+1)}}},Bt.prototype.getTile=function(He,xe,Le){var Ue=this.options,Ke=Ue.extent,st=Ue.debug;if(He<0||He>24)return null;var ct=1<<He,ot=qt(He,xe=(xe%ct+ct)%ct,Le);if(this.tiles[ot])return zr(this.tiles[ot],Ke);st>1&&console.log("drilling down to z%d-%d-%d",He,xe,Le);for(var nt,mt=He,kt=xe,zt=Le;!nt&&mt>0;)mt--,kt=Math.floor(kt/2),zt=Math.floor(zt/2),nt=this.tiles[qt(mt,kt,zt)];return nt&&nt.source?(st>1&&console.log("found parent tile z%d-%d-%d",mt,kt,zt),st>1&&console.time("drilling down"),this.splitTile(nt.source,mt,kt,zt,He,xe,Le),st>1&&console.timeEnd("drilling down"),this.tiles[ot]?zr(this.tiles[ot],Ke):null):null};class Oi extends T{constructor(xe,Le,Ue,Ke){super(xe,Le,Ue,bi),Ke&&(this.loadGeoJSON=Ke)}loadData(xe,Le){var Ue;(Ue=this._pendingRequest)===null||Ue===void 0||Ue.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ke=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new n.RequestPerformance(xe.request);this._pendingCallback=Le,this._pendingRequest=this.loadGeoJSON(xe,(st,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,st||!ct)return Le(st);if(typeof ct!="object")return Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));{A(ct,!0);try{if(xe.filter){const nt=n.createExpression(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(kt=>`${kt.key}: ${kt.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(kt=>nt.value.evaluate({zoom:0},kt))}}this._geoJSONIndex=xe.cluster?new ce(function({superclusterOptions:nt,clusterProperties:mt}){if(!mt||!nt)return nt;const kt={},zt={},Dt={accumulated:null,zoom:0},oi={properties:null},Kt=Object.keys(mt);for(const pi of Kt){const[vi,Fi]=mt[pi],_i=n.createExpression(Fi),Pi=n.createExpression(typeof vi=="string"?[vi,["accumulated"],["get",pi]]:vi);kt[pi]=_i.value,zt[pi]=Pi.value}return nt.map=pi=>{oi.properties=pi;const vi={};for(const Fi of Kt)vi[Fi]=kt[Fi].evaluate(Dt,oi);return vi},nt.reduce=(pi,vi)=>{oi.properties=vi;for(const Fi of Kt)Dt.accumulated=pi[Fi],pi[Fi]=zt[Fi].evaluate(Dt,oi)},nt}(xe)).load(ct.features):function(nt,mt){return new Bt(nt,mt)}(ct,xe.geojsonVtOptions)}catch(nt){return Le(nt)}this.loaded={};const ot={};if(Ke){const nt=Ke.finish();nt&&(ot.resourceTiming={},ot.resourceTiming[xe.source]=JSON.parse(JSON.stringify(nt)))}Le(null,ot)}})}reloadTile(xe,Le){const Ue=this.loaded;return Ue&&Ue[xe.uid]?super.reloadTile(xe,Le):this.loadTile(xe,Le)}loadGeoJSON(xe,Le){if(xe.request)return n.getJSON(xe.request,Le);if(typeof xe.data=="string")try{Le(null,JSON.parse(xe.data))}catch{Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`))}else Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(xe,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()}getClusterExpansionZoom(xe,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId))}catch(Ue){Le(Ue)}}getClusterChildren(xe,Le){try{Le(null,this._geoJSONIndex.getChildren(xe.clusterId))}catch(Ue){Le(Ue)}}getClusterLeaves(xe,Le){try{Le(null,this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset))}catch(Ue){Le(Ue)}}}class di{constructor(xe){this.self=xe,this.actor=new n.Actor(xe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:Oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Le,Ue)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=Ue},this.self.registerRTLTextPlugin=Le=>{if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Le.applyArabicShaping,n.plugin.processBidirectionalText=Le.processBidirectionalText,n.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}}setReferrer(xe,Le){this.referrer=Le}setImages(xe,Le,Ue){this.availableImages[xe]=Le;for(const Ke in this.workerSources[xe]){const st=this.workerSources[xe][Ke];for(const ct in st)st[ct].availableImages=Le}Ue()}setLayers(xe,Le,Ue){this.getLayerIndex(xe).replace(Le),Ue()}updateLayers(xe,Le,Ue){this.getLayerIndex(xe).update(Le.layers,Le.removedIds),Ue()}loadTile(xe,Le,Ue){this.getWorkerSource(xe,Le.type,Le.source).loadTile(Le,Ue)}loadDEMTile(xe,Le,Ue){this.getDEMWorkerSource(xe,Le.source).loadTile(Le,Ue)}reloadTile(xe,Le,Ue){this.getWorkerSource(xe,Le.type,Le.source).reloadTile(Le,Ue)}abortTile(xe,Le,Ue){this.getWorkerSource(xe,Le.type,Le.source).abortTile(Le,Ue)}removeTile(xe,Le,Ue){this.getWorkerSource(xe,Le.type,Le.source).removeTile(Le,Ue)}removeDEMTile(xe,Le){this.getDEMWorkerSource(xe,Le.source).removeTile(Le)}removeSource(xe,Le,Ue){if(!this.workerSources[xe]||!this.workerSources[xe][Le.type]||!this.workerSources[xe][Le.type][Le.source])return;const Ke=this.workerSources[xe][Le.type][Le.source];delete this.workerSources[xe][Le.type][Le.source],Ke.removeSource!==void 0?Ke.removeSource(Le,Ue):Ue()}loadWorkerSource(xe,Le,Ue){try{this.self.importScripts(Le.url),Ue()}catch(Ke){Ue(Ke.toString())}}syncRTLPluginState(xe,Le,Ue){try{n.plugin.setState(Le);const Ke=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const st=n.plugin.isParsed();Ue(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),st)}}catch(Ke){Ue(Ke.toString())}}getAvailableImages(xe){let Le=this.availableImages[xe];return Le||(Le=[]),Le}getLayerIndex(xe){let Le=this.layerIndexes[xe];return Le||(Le=this.layerIndexes[xe]=new g),Le}getWorkerSource(xe,Le,Ue){if(this.workerSources[xe]||(this.workerSources[xe]={}),this.workerSources[xe][Le]||(this.workerSources[xe][Le]={}),!this.workerSources[xe][Le][Ue]){const Ke={send:(st,ct,ot)=>{this.actor.send(st,ct,ot,xe)}};this.workerSources[xe][Le][Ue]=new this.workerSourceTypes[Le](Ke,this.getLayerIndex(xe),this.getAvailableImages(xe))}return this.workerSources[xe][Le][Ue]}getDEMWorkerSource(xe,Le){return this.demWorkerSources[xe]||(this.demWorkerSources[xe]={}),this.demWorkerSources[xe][Le]||(this.demWorkerSources[xe][Le]=new M),this.demWorkerSources[xe][Le]}enforceCacheSizeLimit(xe,Le){n.enforceCacheSizeLimit(Le)}}return n.isWorker()&&(self.worker=new di(self)),di}),c(["./shared"],function(n){var p=m;function m(E){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,O=new Blob([""],{type:"text/javascript"}),ee=URL.createObjectURL(O);try{S=new Worker(ee),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(ee),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var O=S.getImageData(0,0,1,1);return O&&O.width===b.width}()?(g[d=s&&s.failIfMajorPerformanceCaveat]===void 0&&(g[d]=function(b){var S,O=function(ee){var le=document.createElement("canvas"),de=Object.create(m.webGLContextAttributes);return de.failIfMajorPerformanceCaveat=ee,le.getContext("webgl",de)||le.getContext("experimental-webgl",de)}(b);if(!O)return!1;try{S=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!S||O.isContextLost())&&(O.shaderSource(S,"void main() {}"),O.compileShader(S),O.getShaderParameter(S,O.COMPILE_STATUS)===!0)}(d)),g[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(E)}var g={};function v(E,s){if(Array.isArray(E)){if(!Array.isArray(s)||E.length!==s.length)return!1;for(let d=0;d<E.length;d++)if(!v(E[d],s[d]))return!1;return!0}if(typeof E=="object"&&E!==null&&s!==null){if(typeof s!="object"||Object.keys(E).length!==Object.keys(s).length)return!1;for(const d in E)if(!v(E[d],s[d]))return!1;return!0}return E===s}m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(s){if(!y.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in y.docStyle)return s[d];return s[0]}static create(s,d,b){const S=window.document.createElement(s);return d!==void 0&&(S.className=d),b&&b.appendChild(S),S}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(s,d){s.style[y.transformProp]=d}static addEventListener(s,d,b,S={}){s.addEventListener(d,b,"passive"in S?S:S.capture)}static removeEventListener(s,d,b,S={}){s.removeEventListener(d,b,"passive"in S?S:S.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(s,d){const b=s.getBoundingClientRect();return new n.pointGeometry(d.clientX-b.left-s.clientLeft,d.clientY-b.top-s.clientTop)}static touchPos(s,d){const b=s.getBoundingClientRect(),S=[];for(let O=0;O<d.length;O++)S.push(new n.pointGeometry(d[O].clientX-b.left-s.clientLeft,d[O].clientY-b.top-s.clientTop));return S}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class k{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}normalizeSpriteURL(s,d,b){const S=function(O){const ee=O.match(_);if(!ee)throw new Error(`Unable to parse URL "${O}"`);return{protocol:ee[1],authority:ee[2],path:ee[3]||"/",params:ee[4]?ee[4].split("&"):[]}}(s);return S.path+=`${d}${b}`,function(O){const ee=O.params.length?`?${O.params.join("&")}`:"";return`${O.protocol}://${O.authority}${O.path}${ee}`}(S)}setTransformRequest(s){this._transformRequestFn=s}}const _=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(s,d,b,S){this.context=s,this.format=b,this.texture=s.gl.createTexture(),this.update(d,S)}update(s,d,b){const{width:S,height:O}=s,ee=!(this.size&&this.size[0]===S&&this.size[1]===O||b),{context:le}=this,{gl:de}=le;if(this.useMipmap=!!(d&&d.useMipmap),de.bindTexture(de.TEXTURE_2D,this.texture),le.pixelStoreUnpackFlipY.set(!1),le.pixelStoreUnpack.set(1),le.pixelStoreUnpackPremultiplyAlpha.set(this.format===de.RGBA&&(!d||d.premultiply!==!1)),ee)this.size=[S,O],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||n.isImageBitmap(s)?de.texImage2D(de.TEXTURE_2D,0,this.format,this.format,de.UNSIGNED_BYTE,s):de.texImage2D(de.TEXTURE_2D,0,this.format,S,O,0,this.format,de.UNSIGNED_BYTE,s.data);else{const{x:Ee,y:Ne}=b||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||n.isImageBitmap(s)?de.texSubImage2D(de.TEXTURE_2D,0,Ee,Ne,de.RGBA,de.UNSIGNED_BYTE,s):de.texSubImage2D(de.TEXTURE_2D,0,Ee,Ne,S,O,de.RGBA,de.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&de.generateMipmap(de.TEXTURE_2D)}bind(s,d,b){const{context:S}=this,{gl:O}=S;O.bindTexture(O.TEXTURE_2D,this.texture),b!==O.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=O.LINEAR),s!==this.filter&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,s),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,b||s),this.filter=s),d!==this.wrap&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,d),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function M(E){const{userImage:s}=E;return!!(s&&s.render&&s.render())&&(E.data.replace(new Uint8Array(s.data.buffer)),!0)}class A extends n.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:b}of this.requestors)this._notify(d,b);this.requestors=[]}}getImage(s){return this.images[s]}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let b=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new n.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),b=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new n.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),b=!1),this._validateContent(d.content,d)||(this.fire(new n.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),b=!1),b}_validateStretch(s,d){if(!s)return!0;let b=0;for(const S of s){if(S[0]<b||S[1]<S[0]||d<S[1])return!1;b=S[1]}return!0}_validateContent(s,d){return!(s&&(s.length!==4||s[0]<0||d.data.width<s[0]||s[1]<0||d.data.height<s[1]||s[2]<0||d.data.width<s[2]||s[3]<0||d.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,d){const b=this.images[s];if(b.data.width!==d.data.width||b.data.height!==d.data.height)throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=b.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let b=!0;if(!this.isLoaded())for(const S of s)this.images[S]||(b=!1);this.isLoaded()||b?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const b={};for(const S of s){this.images[S]||this.fire(new n.Event("styleimagemissing",{id:S}));const O=this.images[S];O?b[S]={data:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,hasRenderCallback:!!(O.userImage&&O.userImage.render)}:n.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,b)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],b=this.getImage(s);if(!b)return null;if(d&&d.position.version===b.version)return d.position;if(d)d.position.version=b.version;else{const S={w:b.data.width+2,h:b.data.height+2,x:0,y:0},O=new n.ImagePosition(S,b);this.patterns[s]={bin:S,position:O}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const O in this.patterns)s.push(this.patterns[O].bin);const{w:d,h:b}=n.potpack(s),S=this.atlasImage;S.resize({width:d||1,height:b||1});for(const O in this.patterns){const{bin:ee}=this.patterns[O],le=ee.x+1,de=ee.y+1,Ee=this.images[O].data,Ne=Ee.width,Fe=Ee.height;n.RGBAImage.copy(Ee,S,{x:0,y:0},{x:le,y:de},{width:Ne,height:Fe}),n.RGBAImage.copy(Ee,S,{x:0,y:Fe-1},{x:le,y:de-1},{width:Ne,height:1}),n.RGBAImage.copy(Ee,S,{x:0,y:0},{x:le,y:de+Fe},{width:Ne,height:1}),n.RGBAImage.copy(Ee,S,{x:Ne-1,y:0},{x:le-1,y:de},{width:1,height:Fe}),n.RGBAImage.copy(Ee,S,{x:0,y:0},{x:le+Ne,y:de},{width:1,height:Fe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const b=this.images[d];b||n.warnOnce(`Image with ID: "${d}" was not found`),M(b)&&this.updateImage(d,b)}}}const x=1e20;function P(E,s,d,b,S,O,ee,le,de){for(let Ee=s;Ee<s+b;Ee++)D(E,d*O+Ee,O,S,ee,le,de);for(let Ee=d;Ee<d+S;Ee++)D(E,Ee*O+s,1,b,ee,le,de)}function D(E,s,d,b,S,O,ee){O[0]=0,ee[0]=-1e20,ee[1]=x,S[0]=E[s];for(let le=1,de=0,Ee=0;le<b;le++){S[le]=E[s+le*d];const Ne=le*le;do{const Fe=O[de];Ee=(S[le]-S[Fe]+Ne-Fe*Fe)/(le-Fe)/2}while(Ee<=ee[de]&&--de>-1);de++,O[de]=le,ee[de]=Ee,ee[de+1]=x}for(let le=0,de=0;le<b;le++){for(;ee[de+1]<le;)de++;const Ee=O[de],Ne=le-Ee;E[s+le*d]=S[Ee]+Ne*Ne}}class w{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s,d){const b=[];for(const S in s)for(const O of s[S])b.push({stack:S,id:O});n.asyncAll(b,({stack:S,id:O},ee)=>{let le=this.entries[S];le||(le=this.entries[S]={glyphs:{},requests:{},ranges:{}});let de=le.glyphs[O];if(de!==void 0)return void ee(null,{stack:S,id:O,glyph:de});if(de=this._tinySDF(le,S,O),de)return le.glyphs[O]=de,void ee(null,{stack:S,id:O,glyph:de});const Ee=Math.floor(O/256);if(256*Ee>65535)return void ee(new Error("glyphs > 65535 not supported"));if(le.ranges[Ee])return void ee(null,{stack:S,id:O,glyph:de});let Ne=le.requests[Ee];Ne||(Ne=le.requests[Ee]=[],w.loadGlyphRange(S,Ee,this.url,this.requestManager,(Fe,qe)=>{if(qe){for(const tt in qe)this._doesCharSupportLocalGlyph(+tt)||(le.glyphs[+tt]=qe[+tt]);le.ranges[Ee]=!0}for(const tt of Ne)tt(Fe,qe);delete le.requests[Ee]})),Ne.push((Fe,qe)=>{Fe?ee(Fe):qe&&ee(null,{stack:S,id:O,glyph:qe[O]||null})})},(S,O)=>{if(S)d(S);else if(O){const ee={};for(const{stack:le,id:de,glyph:Ee}of O)(ee[le]||(ee[le]={}))[de]=Ee&&{id:Ee.id,bitmap:Ee.bitmap.clone(),metrics:Ee.metrics};d(null,ee)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(n.unicodeBlockLookup["CJK Unified Ideographs"](s)||n.unicodeBlockLookup["Hangul Syllables"](s)||n.unicodeBlockLookup.Hiragana(s)||n.unicodeBlockLookup.Katakana(s))}_tinySDF(s,d,b){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(b))return;let O=s.tinySDF;if(!O){let le="400";/bold/i.test(d)?le="900":/medium/i.test(d)?le="500":/light/i.test(d)&&(le="200"),O=s.tinySDF=new w.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:S,fontWeight:le})}const ee=O.draw(String.fromCharCode(b));return{id:b,bitmap:new n.AlphaImage({width:ee.width||30,height:ee.height||30},ee.data),metrics:{width:ee.glyphWidth||24,height:ee.glyphHeight||24,left:ee.glyphLeft||0,top:ee.glyphTop-27||-8,advance:ee.glyphAdvance||24}}}}w.loadGlyphRange=function(E,s,d,b,S){const O=256*s,ee=O+255,le=b.transformRequest(d.replace("{fontstack}",E).replace("{range}",`${O}-${ee}`),n.ResourceType.Glyphs);n.getArrayBuffer(le,(de,Ee)=>{if(de)S(de);else if(Ee){const Ne={};for(const Fe of n.parseGlyphPbf(Ee))Ne[Fe.id]=Fe;S(null,Ne)}})},w.TinySDF=class{constructor({fontSize:E=24,buffer:s=3,radius:d=8,cutoff:b=.25,fontFamily:S="sans-serif",fontWeight:O="normal",fontStyle:ee="normal"}={}){this.buffer=s,this.cutoff=b,this.radius=d;const le=this.size=E+4*s,de=this._createCanvas(le),Ee=this.ctx=de.getContext("2d",{willReadFrequently:!0});Ee.font=`${ee} ${O} ${E}px ${S}`,Ee.textBaseline="alphabetic",Ee.textAlign="left",Ee.fillStyle="black",this.gridOuter=new Float64Array(le*le),this.gridInner=new Float64Array(le*le),this.f=new Float64Array(le),this.z=new Float64Array(le+1),this.v=new Uint16Array(le)}_createCanvas(E){const s=document.createElement("canvas");return s.width=s.height=E,s}draw(E){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:b,actualBoundingBoxLeft:S,actualBoundingBoxRight:O}=this.ctx.measureText(E),ee=Math.ceil(d),le=Math.min(this.size-this.buffer,Math.ceil(O-S)),de=Math.min(this.size-this.buffer,ee+Math.ceil(b)),Ee=le+2*this.buffer,Ne=de+2*this.buffer,Fe=Math.max(Ee*Ne,0),qe=new Uint8ClampedArray(Fe),tt={data:qe,width:Ee,height:Ne,glyphWidth:le,glyphHeight:de,glyphTop:ee,glyphLeft:0,glyphAdvance:s};if(le===0||de===0)return tt;const{ctx:Qe,buffer:Je,gridInner:pt,gridOuter:yt}=this;Qe.clearRect(Je,Je,le,de),Qe.fillText(E,Je,Je+ee);const _t=Qe.getImageData(Je,Je,le,de);yt.fill(x,0,Fe),pt.fill(0,0,Fe);for(let at=0;at<de;at++)for(let At=0;At<le;At++){const Et=_t.data[4*(at*le+At)+3]/255;if(Et===0)continue;const Nt=(at+Je)*Ee+At+Je;if(Et===1)yt[Nt]=0,pt[Nt]=x;else{const Ot=.5-Et;yt[Nt]=Ot>0?Ot*Ot:0,pt[Nt]=Ot<0?Ot*Ot:0}}P(yt,0,0,Ee,Ne,Ee,this.f,this.v,this.z),P(pt,Je,Je,le,de,Ee,this.f,this.v,this.z);for(let at=0;at<Fe;at++){const At=Math.sqrt(yt[at])-Math.sqrt(pt[at]);qe[at]=Math.round(255-255*(At/this.radius+this.cutoff))}return tt}};const I=new n.Properties({anchor:new n.DataConstantProperty(n.spec.light.anchor),position:new class{constructor(){this.specification=n.spec.light.position}possiblyEvaluate(E,s){return n.sphericalToCartesian(E.expression.evaluate(s))}interpolate(E,s,d){return{x:n.number(E.x,s.x,d),y:n.number(E.y,s.y,d),z:n.number(E.z,s.z,d)}}},color:new n.DataConstantProperty(n.spec.light.color),intensity:new n.DataConstantProperty(n.spec.light.intensity)}),N="-transition";class q extends n.Evented{constructor(s){super(),this._transitionable=new n.Transitionable(I),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(n.validateLight,s,d))for(const b in s){const S=s[b];b.endsWith(N)?this._transitionable.setTransition(b.slice(0,-N.length),S):this._transitionable.setValue(b,S)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,b){return(!b||b.validate!==!1)&&n.emitValidationErrors(this,s.call(n.validateStyle,n.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}class Z{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const b=s.join(",")+String(d);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(s,d)),this.dashEntry[b]}getDashRanges(s,d,b){const S=[];let O=s.length%2==1?-s[s.length-1]*b:0,ee=s[0]*b,le=!0;S.push({left:O,right:ee,isDash:le,zeroLength:s[0]===0});let de=s[0];for(let Ee=1;Ee<s.length;Ee++){le=!le;const Ne=s[Ee];O=de*b,de+=Ne,ee=de*b,S.push({left:O,right:ee,isDash:le,zeroLength:Ne===0})}return S}addRoundDash(s,d,b){const S=d/2;for(let O=-b;O<=b;O++){const ee=this.width*(this.nextRow+b+O);let le=0,de=s[le];for(let Ee=0;Ee<this.width;Ee++){Ee/de.right>1&&(de=s[++le]);const Ne=Math.abs(Ee-de.left),Fe=Math.abs(Ee-de.right),qe=Math.min(Ne,Fe);let tt;const Qe=O/b*(S+1);if(de.isDash){const Je=S-Math.abs(Qe);tt=Math.sqrt(qe*qe+Je*Je)}else tt=S-Math.sqrt(qe*qe+Qe*Qe);this.data[ee+Ee]=Math.max(0,Math.min(255,tt+128))}}}addRegularDash(s){for(let le=s.length-1;le>=0;--le){const de=s[le],Ee=s[le+1];de.zeroLength?s.splice(le,1):Ee&&Ee.isDash===de.isDash&&(Ee.left=de.left,s.splice(le,1))}const d=s[0],b=s[s.length-1];d.isDash===b.isDash&&(d.left=b.left-this.width,b.right=d.right+this.width);const S=this.width*this.nextRow;let O=0,ee=s[O];for(let le=0;le<this.width;le++){le/ee.right>1&&(ee=s[++O]);const de=Math.abs(le-ee.left),Ee=Math.abs(le-ee.right),Ne=Math.min(de,Ee);this.data[S+le]=Math.max(0,Math.min(255,(ee.isDash?Ne:-Ne)+128))}}addDash(s,d){const b=d?7:0,S=2*b+1;if(this.nextRow+S>this.height)return n.warnOnce("LineAtlas out of space"),null;let O=0;for(let le=0;le<s.length;le++)O+=s[le];if(O!==0){const le=this.width/O,de=this.getDashRanges(s,this.width,le);d?this.addRoundDash(de,le,b):this.addRegularDash(de)}const ee={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:O};return this.nextRow+=S,this.dirty=!0,ee}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class X{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=n.uniqueId();const b=this.workerPool.acquire(this.id);for(let S=0;S<b.length;S++){const O=new X.Actor(b[S],d,this.id);O.name=`Worker ${S}`,this.actors.push(O)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d,b){n.asyncAll(this.actors,(S,O)=>{S.send(s,d,O)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function j(E,s,d){const b=function(S,O){if(S)return d(S);if(O){const ee=n.pick(n.extend(O,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(ee.vectorLayers=O.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(le=>le.id)),d(null,ee)}};return E.url?n.getJSON(s.transformRequest(E.url,n.ResourceType.Source),b):n.exported.frame(()=>b(null,E))}X.Actor=n.Actor;class V{constructor(s,d,b){this.bounds=n.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=b||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),b=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*d),S=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*d),O=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*d),ee=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*d);return s.x>=b&&s.x<O&&s.y>=S&&s.y<ee}}class U extends n.Evented{constructor(s,d,b,S){if(super(),this.id=s,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(d,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,(s,d)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s?this.fire(new n.ErrorEvent(s)):d&&(n.extend(this,d),d.bounds&&(this.tileBounds=new V(d.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}loadTile(s,d){const b=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S={request:this.map._requestManager.transformRequest(b,n.ResourceType.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function O(ee,le){return delete s.request,s.aborted?d(null):ee&&ee.status!==404?d(ee):(le&&le.resourceTiming&&(s.resourceTiming=le.resourceTiming),this.map._refreshExpiredTiles&&le&&s.setExpiryData(le),s.loadVectorData(le,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}S.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired"?s.state==="loading"?s.reloadCallback=d:s.request=s.actor.send("reloadTile",S,O.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",S,O.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class L extends n.Evented{constructor(s,d,b,S){super(),this.id=s,this.dispatcher=b,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},d),n.extend(this,n.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,(s,d)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new n.ErrorEvent(s)):d&&(n.extend(this,d),d.bounds&&(this.tileBounds=new V(d.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const b=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=n.getImage(this.map._requestManager.transformRequest(b,n.ResourceType.Tile),(S,O,ee)=>{if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(S)s.state="errored",d(S);else if(O){this.map._refreshExpiredTiles&&s.setExpiryData(ee);const le=this.map.painter.context,de=le.gl;s.texture=this.map.painter.getTileTexture(O.width),s.texture?s.texture.update(O,{useMipmap:!0}):(s.texture=new T(le,O,de.RGBA,{useMipmap:!0}),s.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST),le.extTextureFilterAnisotropic&&de.texParameterf(de.TEXTURE_2D,le.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,le.extTextureFilterAnisotropicMax)),s.state="loaded",n.cacheEntryPossiblyAdded(this.dispatcher),d(null)}})}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}}let R;class G extends L{constructor(s,d,b,S){super(s,d,b,S),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(s,d){const b=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function S(O,ee){O&&(s.state="errored",d(O)),ee&&(s.dem=ee,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",d(null))}s.request=n.getImage(this.map._requestManager.transformRequest(b,n.ResourceType.Tile),(function(O,ee){if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(O)s.state="errored",d(O);else if(ee){this.map._refreshExpiredTiles&&s.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;const le=n.isImageBitmap(ee)&&(R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R)?ee:n.exported.getImageData(ee,1),de={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:le,encoding:this.encoding};s.actor&&s.state!=="expired"||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",de,S.bind(this)))}}).bind(this)),s.neighboringTiles=this._getNeighboringTiles(s.tileID)}_getNeighboringTiles(s){const d=s.canonical,b=Math.pow(2,d.z),S=(d.x-1+b)%b,O=d.x===0?s.wrap-1:s.wrap,ee=(d.x+1+b)%b,le=d.x+1===b?s.wrap+1:s.wrap,de={};return de[new n.OverscaledTileID(s.overscaledZ,O,d.z,S,d.y).key]={backfilled:!1},de[new n.OverscaledTileID(s.overscaledZ,le,d.z,ee,d.y).key]={backfilled:!1},d.y>0&&(de[new n.OverscaledTileID(s.overscaledZ,O,d.z,S,d.y-1).key]={backfilled:!1},de[new n.OverscaledTileID(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},de[new n.OverscaledTileID(s.overscaledZ,le,d.z,ee,d.y-1).key]={backfilled:!1}),d.y+1<b&&(de[new n.OverscaledTileID(s.overscaledZ,O,d.z,S,d.y+1).key]={backfilled:!1},de[new n.OverscaledTileID(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},de[new n.OverscaledTileID(s.overscaledZ,le,d.z,ee,d.y+1).key]={backfilled:!1}),de}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class $ extends n.Evented{constructor(s,d,b,S){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(S),this._data=d.data,this._options=n.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const O=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*O,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*O,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:n.EXTENT,radius:(d.clusterRadius||50)*O,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData("content"),this}getClusterExpansionZoom(s,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},d),this}getClusterChildren(s,d){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},d),this}getClusterLeaves(s,d,b,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:d,offset:b},S),this}_updateWorkerData(s){const d=n.extend({},this.workerOptions),b=this._data;typeof b=="string"?(d.request=this.map._requestManager.transformRequest(n.exported.resolveURL(b),n.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(b),this._pendingLoads++,this.fire(new n.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(S,O)=>{if(this._pendingLoads--,this._removed||O&&O.abandoned)return void this.fire(new n.Event("dataabort",{dataType:"source",sourceDataType:s}));let ee=null;if(O&&O.resourceTiming&&O.resourceTiming[this.id]&&(ee=O.resourceTiming[this.id].slice(0)),S)return void this.fire(new n.ErrorEvent(S));const le={dataType:"source",sourceDataType:s};this._collectResourceTiming&&ee&&ee.length>0&&n.extend(le,{resourceTiming:ee}),this.fire(new n.Event("data",le))})}loaded(){return this._pendingLoads===0}loadTile(s,d){const b=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const S={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(b,S,(O,ee)=>(delete s.request,s.unloadVectorData(),s.aborted?d(null):O?d(O):(s.loadVectorData(ee,this.map.painter,b==="reloadTile"),d(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return n.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var F=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class H extends n.Evented{constructor(s,d,b,S){super(),this.id=s,this.dispatcher=b,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=d}load(s,d){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),(b,S)=>{this._loaded=!0,b?this.fire(new n.ErrorEvent(b)):S&&(this.image=S,s&&(this.coordinates=s),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}setCoordinates(s){this.coordinates=s;const d=s.map(n.MercatorCoordinate.fromLngLat);this.tileID=function(S){let O=1/0,ee=1/0,le=-1/0,de=-1/0;for(const qe of S)O=Math.min(O,qe.x),ee=Math.min(ee,qe.y),le=Math.max(le,qe.x),de=Math.max(de,qe.y);const Ee=Math.max(le-O,de-ee),Ne=Math.max(0,Math.floor(-Math.log(Ee)/Math.LN2)),Fe=Math.pow(2,Ne);return new n.CanonicalTileID(Ne,Math.floor((O+le)/2*Fe),Math.floor((ee+de)/2*Fe))}(d),this.minzoom=this.maxzoom=this.tileID.z;const b=d.map(S=>this.tileID.getTilePoint(S)._round());return this._boundsArray=new n.RasterBoundsArray,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const b in this.tiles){const S=this.tiles[b];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class W extends H{constructor(s,d,b,S){super(s,d,b,S),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const s=this.options;this.urls=[];for(const d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,n.ResourceType.Source).url);n.getVideo(this.urls,(d,b)=>{this._loaded=!0,d?this.fire(new n.ErrorEvent(d)):b&&(this.video=b,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new T(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const b in this.tiles){const S=this.tiles[b];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ne extends H{constructor(s,d,b,S){super(s,d,b,S),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(O=>!Array.isArray(O)||O.length!==2||O.some(ee=>typeof ee!="number"))||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,b=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(d,this.canvas,b.RGBA,{premultiply:!0});for(const S in this.tiles){const O=this.tiles[S];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ue={vector:U,raster:L,"raster-dem":G,geojson:$,video:W,image:H,canvas:ne};function ie(E,s){const d=n.create();return n.translate(d,d,[1,1,0]),n.scale(d,d,[.5*E.width,.5*E.height,1]),n.multiply(d,d,E.calculatePosMatrix(s.toUnwrapped()))}function oe(E,s,d,b,S,O){const ee=function(Fe,qe,tt){if(Fe)for(const Qe of Fe){const Je=qe[Qe];if(Je&&Je.source===tt&&Je.type==="fill-extrusion")return!0}else for(const Qe in qe){const Je=qe[Qe];if(Je.source===tt&&Je.type==="fill-extrusion")return!0}return!1}(S&&S.layers,s,E.id),le=O.maxPitchScaleFactor(),de=E.tilesIn(b,le,ee);de.sort(Se);const Ee=[];for(const Fe of de)Ee.push({wrappedTileID:Fe.tileID.wrapped().key,queryResults:Fe.tile.queryRenderedFeatures(s,d,E._state,Fe.queryGeometry,Fe.cameraQueryGeometry,Fe.scale,S,O,le,ie(E.transform,Fe.tileID))});const Ne=function(Fe){const qe={},tt={};for(const Qe of Fe){const Je=Qe.queryResults,pt=Qe.wrappedTileID,yt=tt[pt]=tt[pt]||{};for(const _t in Je){const at=Je[_t],At=yt[_t]=yt[_t]||{},Et=qe[_t]=qe[_t]||[];for(const Nt of at)At[Nt.featureIndex]||(At[Nt.featureIndex]=!0,Et.push(Nt))}}return qe}(Ee);for(const Fe in Ne)Ne[Fe].forEach(qe=>{const tt=qe.feature,Qe=E.getFeatureState(tt.layer["source-layer"],tt.id);tt.source=tt.layer.source,tt.layer["source-layer"]&&(tt.sourceLayer=tt.layer["source-layer"]),tt.state=Qe});return Ne}function Se(E,s){const d=E.tileID,b=s.tileID;return d.overscaledZ-b.overscaledZ||d.canonical.y-b.canonical.y||d.wrap-b.wrap||d.canonical.x-b.canonical.x}class ye{constructor(s,d){this.tileID=s,this.uid=n.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const d=s+this.timeAdded;d<n.exported.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.textures.forEach(d=>s.saveTileTexture(d)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(s,d,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(S,O){const ee={};if(!O)return ee;for(const le of S){const de=le.layerIds.map(Ee=>O.getLayer(Ee)).filter(Boolean);if(de.length!==0){le.layers=de,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(Ee=>de.filter(Ne=>Ne.id===Ee)[0]));for(const Ee of de)ee[Ee.id]=le}}return ee}(s.buckets,d.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const O=this.buckets[S];if(O instanceof n.SymbolBucket){if(this.hasSymbolBuckets=!0,!b)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const O=this.buckets[S];if(O instanceof n.SymbolBucket&&O.hasRTLText){this.hasRTLText=!0,n.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const S in this.buckets){const O=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(S).queryRadius(O))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new n.CollisionBoxArray}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const b in this.buckets){const S=this.buckets[b];S.uploadPending()&&S.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,b,S,O,ee,le,de,Ee,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:O,scale:ee,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:de,params:le,queryPadding:this.queryPadding*Ee},s,d,b):{}}querySourceFeatures(s,d){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const S=b.loadVTLayers(),O=d?d.sourceLayer:"",ee=S._geojsonTileLayer||S[O];if(!ee)return;const le=n.createFilter(d&&d.filter),{z:de,x:Ee,y:Ne}=this.tileID.canonical,Fe={z:de,x:Ee,y:Ne};for(let qe=0;qe<ee.length;qe++){const tt=ee.feature(qe);if(le.needGeometry){const pt=n.toEvaluationFeature(tt,!0);if(!le.filter(new n.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!le.filter(new n.EvaluationParameters(this.tileID.overscaledZ),tt))continue;const Qe=b.getId(tt,O),Je=new n.GeoJSONFeature(tt,de,Ee,Ne,Qe);Je.tile=Fe,s.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const b=n.parseCacheControl(s.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const b=Date.now();let S=!1;if(this.expirationTime>b)S=!1;else if(d)if(this.expirationTime<d)S=!0;else{const O=this.expirationTime-d;O?this.expirationTime=b+Math.max(O,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!d.style.hasLayer(S))continue;const O=this.buckets[S],ee=O.layers[0].sourceLayer||"_geojsonTileLayer",le=b[ee],de=s[ee];if(!le||!de||Object.keys(de).length===0)continue;O.update(de,le,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Ee=d&&d.style&&d.style.getLayer(S);Ee&&(this.queryPadding=Math.max(this.queryPadding,Ee.queryRadius(O)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=n.exported.now()+s}setDependencies(s,d){const b={};for(const S of d)b[S]=!0;this.dependencies[s]=b}hasDependency(s,d){for(const b of s){const S=this.dependencies[b];if(S){for(const O of d)if(S[O])return!0}}return!1}}class Ce{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(const s in this.data)for(const d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,b){const S=s.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const O={value:d,timeout:void 0};if(b!==void 0&&(O.timeout=setTimeout(()=>{this.remove(s,O)},b)),this.data[S].push(O),this.order.push(S),this.order.length>this.max){const ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){const d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;const b=s.wrapped().key,S=d===void 0?0:this.data[b].indexOf(d),O=this.data[b][S];return this.data[b].splice(S,1),O.timeout&&clearTimeout(O.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(O.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){const d=[];for(const b in this.data)for(const S of this.data[b])s(S.value)||d.push(S);for(const b of d)this.remove(b.value.tileID,b)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,b){const S=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][S]=this.stateChanges[s][S]||{},n.extend(this.stateChanges[s][S],b),this.deletedStates[s]===null){this.deletedStates[s]={};for(const O in this.state[s])O!==S&&(this.deletedStates[s][O]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][S]===null){this.deletedStates[s][S]={};for(const O in this.state[s][S])b[O]||(this.deletedStates[s][S][O]=null)}else for(const O in b)this.deletedStates[s]&&this.deletedStates[s][S]&&this.deletedStates[s][S][O]===null&&delete this.deletedStates[s][S][O]}removeFeatureState(s,d,b){if(this.deletedStates[s]===null)return;const S=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},b&&d!==void 0)this.deletedStates[s][S]!==null&&(this.deletedStates[s][S]=this.deletedStates[s][S]||{},this.deletedStates[s][S][b]=null);else if(d!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][S])for(b in this.deletedStates[s][S]={},this.stateChanges[s][S])this.deletedStates[s][S][b]=null;else this.deletedStates[s][S]=null;else this.deletedStates[s]=null}getState(s,d){const b=String(d),S=n.extend({},(this.state[s]||{})[b],(this.stateChanges[s]||{})[b]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const O=this.deletedStates[s][d];if(O===null)return{};for(const ee in O)delete S[ee]}return S}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const b={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const O={};for(const ee in this.stateChanges[S])this.state[S][ee]||(this.state[S][ee]={}),n.extend(this.state[S][ee],this.stateChanges[S][ee]),O[ee]=this.state[S][ee];b[S]=O}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const O={};if(this.deletedStates[S]===null)for(const ee in this.state[S])O[ee]={},this.state[S][ee]={};else for(const ee in this.deletedStates[S]){if(this.deletedStates[S][ee]===null)this.state[S][ee]={};else for(const le of Object.keys(this.deletedStates[S][ee]))delete this.state[S][ee][le];O[ee]=this.state[S][ee]}b[S]=b[S]||{},n.extend(b[S],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const S in s)s[S].setFeatureState(b,d)}}class Q extends n.Evented{constructor(s,d,b){super(),this.id=s,this.dispatcher=b,this.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(S,O,ee,le){const de=new ue[O.type](S,O,ee,le);if(de.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${de.id}`);return n.bindAll(["load","abort","unload","serialize","prepare"],de),de}(s,d,b,this),this._tiles={},this._cache=new Ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new K}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d){return this._source.loadTile(s,d)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new n.Event("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const b=this._tiles[d];b.upload(s),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(ae).map(s=>s.key)}getRenderableIds(s){const d=[];for(const b in this._tiles)this._isIdRenderable(b,s)&&d.push(this._tiles[b]);return s?d.sort((b,S)=>{const O=b.tileID,ee=S.tileID,le=new n.pointGeometry(O.canonical.x,O.canonical.y)._rotate(this.transform.angle),de=new n.pointGeometry(ee.canonical.x,ee.canonical.y)._rotate(this.transform.angle);return O.overscaledZ-ee.overscaledZ||de.y-le.y||de.x-le.x}).map(b=>b.tileID.key):d.map(b=>b.tileID).sort(ae).map(b=>b.key)}hasRenderableParent(s){const d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,d){const b=this._tiles[s];b&&(b.state!=="loading"&&(b.state=d),this._loadTile(b,this._tileLoaded.bind(this,b,s,d)))}_tileLoaded(s,d,b,S){if(S)return s.state="errored",void(S.status!==404?this._source.fire(new n.ErrorEvent(S,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=n.exported.now(),b==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new n.Event("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let S=0;S<d.length;S++){const O=d[S];if(s.neighboringTiles&&s.neighboringTiles[O]){const ee=this.getTileByID(O);b(s,ee),b(ee,s)}}function b(S,O){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let ee=O.tileID.canonical.x-S.tileID.canonical.x;const le=O.tileID.canonical.y-S.tileID.canonical.y,de=Math.pow(2,S.tileID.canonical.z),Ee=O.tileID.key;ee===0&&le===0||Math.abs(le)>1||(Math.abs(ee)>1&&(Math.abs(ee+de)===1?ee+=de:Math.abs(ee-de)===1&&(ee-=de)),O.dem&&S.dem&&(S.dem.backfillBorder(O.dem,ee,le),S.neighboringTiles&&S.neighboringTiles[Ee]&&(S.neighboringTiles[Ee].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,b,S){for(const O in this._tiles){let ee=this._tiles[O];if(S[O]||!ee.hasData()||ee.tileID.overscaledZ<=d||ee.tileID.overscaledZ>b)continue;let le=ee.tileID;for(;ee&&ee.tileID.overscaledZ>d+1;){const Ee=ee.tileID.scaledTo(ee.tileID.overscaledZ-1);ee=this._tiles[Ee.key],ee&&ee.hasData()&&(le=Ee)}let de=le;for(;de.overscaledZ>d;)if(de=de.scaledTo(de.overscaledZ-1),s[de.key]){S[le.key]=le;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){const b=this._loadedParentTiles[s.key];return b&&b.tileID.overscaledZ>=d?b:null}for(let b=s.overscaledZ-1;b>=d;b--){const S=s.scaledTo(b),O=this._getLoadedTile(S);if(O)return O}}_getLoadedTile(s){const d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,b=Math.ceil(s.height/this._source.tileSize)+1,S=Math.floor(d*b*5),O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(O)}handleWrapJump(s){const d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){const b={};for(const S in this._tiles){const O=this._tiles[S];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),b[O.tileID.key]=O}this._tiles=b;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}update(s,d){if(this.transform=s,this.terrain=d,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ee=>new n.OverscaledTileID(Ee.canonical.z,Ee.wrap,Ee.canonical.z,Ee.canonical.x,Ee.canonical.y)):(b=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(b=b.filter(Ee=>this._source.hasTile(Ee)))):b=[];const S=s.coveringZoomLevel(this._source),O=Math.max(S-Q.maxOverzooming,this._source.minzoom),ee=Math.max(S+Q.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ee={};for(const Ne of b)if(Ne.canonical.z>this._source.minzoom){const Fe=Ne.scaledTo(Ne.canonical.z-1);Ee[Fe.key]=Fe;const qe=Ne.scaledTo(Math.max(this._source.minzoom,Math.min(Ne.canonical.z,5)));Ee[qe.key]=qe}b=b.concat(Object.values(Ee))}const le=this._updateRetainedTiles(b,S);if(ve(this._source.type)){const Ee={},Ne={},Fe=Object.keys(le);for(const qe of Fe){const tt=le[qe],Qe=this._tiles[qe];if(!Qe||Qe.fadeEndTime&&Qe.fadeEndTime<=n.exported.now())continue;const Je=this.findLoadedParent(tt,O);Je&&(this._addTile(Je.tileID),Ee[Je.tileID.key]=Je.tileID),Ne[qe]=tt}this._retainLoadedChildren(Ne,S,ee,le);for(const qe in Ee)le[qe]||(this._coveredTiles[qe]=!0,le[qe]=Ee[qe]);if(d){const qe={},tt={};for(const Qe of b)this._tiles[Qe.key].hasData()?qe[Qe.key]=Qe:tt[Qe.key]=Qe;for(const Qe in tt){const Je=tt[Qe].children(this._source.maxzoom);this._tiles[Je[0].key]&&this._tiles[Je[1].key]&&this._tiles[Je[2].key]&&this._tiles[Je[3].key]&&(qe[Je[0].key]=le[Je[0].key]=Je[0],qe[Je[1].key]=le[Je[1].key]=Je[1],qe[Je[2].key]=le[Je[2].key]=Je[2],qe[Je[3].key]=le[Je[3].key]=Je[3],delete tt[Qe])}for(const Qe in tt){const Je=this.findLoadedParent(tt[Qe],this._source.minzoom);if(Je){qe[Je.tileID.key]=le[Je.tileID.key]=Je.tileID;for(const pt in qe)qe[pt].isChildOf(Je.tileID)&&delete qe[pt]}}for(const Qe in this._tiles)qe[Qe]||(this._coveredTiles[Qe]=!0)}}for(const Ee in le)this._tiles[Ee].clearFadeHold();const de=n.keysDifference(this._tiles,le);for(const Ee of de){const Ne=this._tiles[Ee];Ne.hasSymbolBuckets&&!Ne.holdingForFade()?Ne.setHoldDuration(this.map._fadeDuration):Ne.hasSymbolBuckets&&!Ne.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){const b={},S={},O=Math.max(d-Q.maxOverzooming,this._source.minzoom),ee=Math.max(d+Q.maxUnderzooming,this._source.minzoom),le={};for(const de of s){const Ee=this._addTile(de);b[de.key]=de,Ee.hasData()||d<this._source.maxzoom&&(le[de.key]=de)}this._retainLoadedChildren(le,d,ee,b);for(const de of s){let Ee=this._tiles[de.key];if(Ee.hasData())continue;if(d+1>this._source.maxzoom){const Fe=de.children(this._source.maxzoom)[0],qe=this.getTile(Fe);if(qe&&qe.hasData()){b[Fe.key]=Fe;continue}}else{const Fe=de.children(this._source.maxzoom);if(b[Fe[0].key]&&b[Fe[1].key]&&b[Fe[2].key]&&b[Fe[3].key])continue}let Ne=Ee.wasRequested();for(let Fe=de.overscaledZ-1;Fe>=O;--Fe){const qe=de.scaledTo(Fe);if(S[qe.key]||(S[qe.key]=!0,Ee=this.getTile(qe),!Ee&&Ne&&(Ee=this._addTile(qe)),Ee&&(b[qe.key]=qe,Ne=Ee.wasRequested(),Ee.hasData())))break}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const d=[];let b,S=this._tiles[s].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){b=this._loadedParentTiles[S.key];break}d.push(S.key);const O=S.scaledTo(S.overscaledZ-1);if(b=this._getLoadedTile(O),b)break;S=O}for(const O of d)this._loadedParentTiles[O]=b}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));const b=d;return d||(d=new ye(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,s.key,d.state))),d.uses++,this._tiles[s.key]=d,b||this._source.fire(new n.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const b=d.getExpiryTimeout();b&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},b))}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,b){const S=[],O=this.transform;if(!O)return S;const ee=b?O.getCameraQueryGeometry(s):s,le=s.map(Qe=>O.pointCoordinate(Qe,this.terrain)),de=ee.map(Qe=>O.pointCoordinate(Qe,this.terrain)),Ee=this.getIds();let Ne=1/0,Fe=1/0,qe=-1/0,tt=-1/0;for(const Qe of de)Ne=Math.min(Ne,Qe.x),Fe=Math.min(Fe,Qe.y),qe=Math.max(qe,Qe.x),tt=Math.max(tt,Qe.y);for(let Qe=0;Qe<Ee.length;Qe++){const Je=this._tiles[Ee[Qe]];if(Je.holdingForFade())continue;const pt=Je.tileID,yt=Math.pow(2,O.zoom-Je.tileID.overscaledZ),_t=d*Je.queryPadding*n.EXTENT/Je.tileSize/yt,at=[pt.getTilePoint(new n.MercatorCoordinate(Ne,Fe)),pt.getTilePoint(new n.MercatorCoordinate(qe,tt))];if(at[0].x-_t<n.EXTENT&&at[0].y-_t<n.EXTENT&&at[1].x+_t>=0&&at[1].y+_t>=0){const At=le.map(Nt=>pt.getTilePoint(Nt)),Et=de.map(Nt=>pt.getTilePoint(Nt));S.push({tile:Je,tileID:pt,queryGeometry:At,cameraQueryGeometry:Et,scale:yt})}}return S}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map(b=>this._tiles[b].tileID);for(const b of d)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(ve(this._source.type))for(const s in this._tiles){const d=this._tiles[s];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=n.exported.now())return!0}return!1}setFeatureState(s,d,b){this._state.updateState(s=s||"_geojsonTileLayer",d,b)}removeFeatureState(s,d,b){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,b)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,b){const S=this._tiles[s];S&&S.setDependencies(d,b)}reloadTilesForDependencies(s,d){for(const b in this._tiles)this._tiles[b].hasDependency(s,d)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(s,d))}}function ae(E,s){const d=Math.abs(2*E.wrap)-+(E.wrap<0),b=Math.abs(2*s.wrap)-+(s.wrap<0);return E.overscaledZ-s.overscaledZ||b-d||s.canonical.y-E.canonical.y||s.canonical.x-E.canonical.x}function ve(E){return E==="raster"||E==="image"||E==="video"}Q.maxOverzooming=10,Q.maxUnderzooming=3;const J="mapboxgl_preloaded_worker_pool";class re{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<re.workerCount;)this.workers.push(new Worker($c.workerUrl));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[J]}numActive(){return Object.keys(this.active).length}}const ce=Math.floor(n.exported.hardwareConcurrency/2);let ge;function _e(){return ge||(ge=new re),ge}function ze(E,s){const d={};for(const b in E)b!=="ref"&&(d[b]=E[b]);return n.refProperties.forEach(b=>{b in s&&(d[b]=s[b])}),d}function Te(E){E=E.slice();const s=Object.create(null);for(let d=0;d<E.length;d++)s[E[d].id]=E[d];for(let d=0;d<E.length;d++)"ref"in E[d]&&(E[d]=ze(E[d],s[E[d].ref]));return E}re.workerCount=Math.max(Math.min(ce,6),1);const Ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Be(E,s,d){d.push({command:Ie.addSource,args:[E,s[E]]})}function Ge(E,s,d){s.push({command:Ie.removeSource,args:[E]}),d[E]=!0}function ke(E,s,d,b){Ge(E,d,b),Be(E,s,d)}function me(E,s,d){let b;for(b in E[d])if(Object.prototype.hasOwnProperty.call(E[d],b)&&b!=="data"&&!v(E[d][b],s[d][b]))return!1;for(b in s[d])if(Object.prototype.hasOwnProperty.call(s[d],b)&&b!=="data"&&!v(E[d][b],s[d][b]))return!1;return!0}function fe(E,s,d,b,S,O){let ee;for(ee in s=s||{},E=E||{})Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],s[ee])||d.push({command:O,args:[b,ee,s[ee],S]}));for(ee in s)Object.prototype.hasOwnProperty.call(s,ee)&&!Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],s[ee])||d.push({command:O,args:[b,ee,s[ee],S]}))}function Ae(E){return E.id}function De(E,s){return E[s.id]=s,E}class Pe{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=n.clamp(s,0,1);let d=1,b=this._distances[d];const S=s*this.paddedLength+this.padding;for(;b<S&&d<this._distances.length;)b=this._distances[++d];const O=d-1,ee=this._distances[O],le=b-ee,de=le>0?(S-ee)/le:0;return this.points[O].mult(1-de).add(this.points[d].mult(de))}}function je(E,s){let d=!0;return E==="always"||E!=="never"&&s!=="never"||(d=!1),d}class Xe{constructor(s,d,b){const S=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(s/b),this.yCellCount=Math.ceil(d/b);for(let ee=0;ee<this.xCellCount*this.yCellCount;ee++)S.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,b,S,O){this._forEachCell(d,b,S,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(S),this.bboxes.push(O)}insertCircle(s,d,b,S){this._forEachCell(d-S,b-S,d+S,b+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(b),this.circles.push(S)}_insertBoxCell(s,d,b,S,O,ee){this.boxCells[O].push(ee)}_insertCircleCell(s,d,b,S,O,ee){this.circleCells[O].push(ee)}_query(s,d,b,S,O,ee,le){if(b<0||s>this.width||S<0||d>this.height)return[];const de=[];if(s<=0&&d<=0&&this.width<=b&&this.height<=S){if(O)return[{key:null,x1:s,y1:d,x2:b,y2:S}];for(let Ee=0;Ee<this.boxKeys.length;Ee++)de.push({key:this.boxKeys[Ee],x1:this.bboxes[4*Ee],y1:this.bboxes[4*Ee+1],x2:this.bboxes[4*Ee+2],y2:this.bboxes[4*Ee+3]});for(let Ee=0;Ee<this.circleKeys.length;Ee++){const Ne=this.circles[3*Ee],Fe=this.circles[3*Ee+1],qe=this.circles[3*Ee+2];de.push({key:this.circleKeys[Ee],x1:Ne-qe,y1:Fe-qe,x2:Ne+qe,y2:Fe+qe})}}else this._forEachCell(s,d,b,S,this._queryCell,de,{hitTest:O,overlapMode:ee,seenUids:{box:{},circle:{}}},le);return de}query(s,d,b,S){return this._query(s,d,b,S,!1,null)}hitTest(s,d,b,S,O,ee){return this._query(s,d,b,S,!0,O,ee).length>0}hitTestCircle(s,d,b,S,O){const ee=s-b,le=s+b,de=d-b,Ee=d+b;if(le<0||ee>this.width||Ee<0||de>this.height)return!1;const Ne=[];return this._forEachCell(ee,de,le,Ee,this._queryCellCircle,Ne,{hitTest:!0,overlapMode:S,circle:{x:s,y:d,radius:b},seenUids:{box:{},circle:{}}},O),Ne.length>0}_queryCell(s,d,b,S,O,ee,le,de){const{seenUids:Ee,hitTest:Ne,overlapMode:Fe}=le,qe=this.boxCells[O];if(qe!==null){const Qe=this.bboxes;for(const Je of qe)if(!Ee.box[Je]){Ee.box[Je]=!0;const pt=4*Je,yt=this.boxKeys[Je];if(s<=Qe[pt+2]&&d<=Qe[pt+3]&&b>=Qe[pt+0]&&S>=Qe[pt+1]&&(!de||de(yt))&&(!Ne||!je(Fe,yt.overlapMode))&&(ee.push({key:yt,x1:Qe[pt],y1:Qe[pt+1],x2:Qe[pt+2],y2:Qe[pt+3]}),Ne))return!0}}const tt=this.circleCells[O];if(tt!==null){const Qe=this.circles;for(const Je of tt)if(!Ee.circle[Je]){Ee.circle[Je]=!0;const pt=3*Je,yt=this.circleKeys[Je];if(this._circleAndRectCollide(Qe[pt],Qe[pt+1],Qe[pt+2],s,d,b,S)&&(!de||de(yt))&&(!Ne||!je(Fe,yt.overlapMode))){const _t=Qe[pt],at=Qe[pt+1],At=Qe[pt+2];if(ee.push({key:yt,x1:_t-At,y1:at-At,x2:_t+At,y2:at+At}),Ne)return!0}}}return!1}_queryCellCircle(s,d,b,S,O,ee,le,de){const{circle:Ee,seenUids:Ne,overlapMode:Fe}=le,qe=this.boxCells[O];if(qe!==null){const Qe=this.bboxes;for(const Je of qe)if(!Ne.box[Je]){Ne.box[Je]=!0;const pt=4*Je,yt=this.boxKeys[Je];if(this._circleAndRectCollide(Ee.x,Ee.y,Ee.radius,Qe[pt+0],Qe[pt+1],Qe[pt+2],Qe[pt+3])&&(!de||de(yt))&&!je(Fe,yt.overlapMode))return ee.push(!0),!0}}const tt=this.circleCells[O];if(tt!==null){const Qe=this.circles;for(const Je of tt)if(!Ne.circle[Je]){Ne.circle[Je]=!0;const pt=3*Je,yt=this.circleKeys[Je];if(this._circlesCollide(Qe[pt],Qe[pt+1],Qe[pt+2],Ee.x,Ee.y,Ee.radius)&&(!de||de(yt))&&!je(Fe,yt.overlapMode))return ee.push(!0),!0}}}_forEachCell(s,d,b,S,O,ee,le,de){const Ee=this._convertToXCellCoord(s),Ne=this._convertToYCellCoord(d),Fe=this._convertToXCellCoord(b),qe=this._convertToYCellCoord(S);for(let tt=Ee;tt<=Fe;tt++)for(let Qe=Ne;Qe<=qe;Qe++)if(O.call(this,s,d,b,S,this.xCellCount*Qe+tt,ee,le,de))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,b,S,O,ee){const le=S-s,de=O-d,Ee=b+ee;return Ee*Ee>le*le+de*de}_circleAndRectCollide(s,d,b,S,O,ee,le){const de=(ee-S)/2,Ee=Math.abs(s-(S+de));if(Ee>de+b)return!1;const Ne=(le-O)/2,Fe=Math.abs(d-(O+Ne));if(Fe>Ne+b)return!1;if(Ee<=de||Fe<=Ne)return!0;const qe=Ee-de,tt=Fe-Ne;return qe*qe+tt*tt<=b*b}}function et(E,s,d,b,S){const O=n.create();return s?(n.scale(O,O,[1/S,1/S,1]),d||n.rotateZ(O,O,b.angle)):n.multiply(O,b.labelPlaneMatrix,E),O}function rt(E,s,d,b,S){if(s){const O=n.clone(E);return n.scale(O,O,[S,S,1]),d||n.rotateZ(O,O,-b.angle),O}return b.glCoordMatrix}function dt(E,s,d){let b;d?(b=[E.x,E.y,d(E.x,E.y),1],n.transformMat4(b,b,s)):(b=[E.x,E.y,0,1],Zi(b,b,s));const S=b[3];return{point:new n.pointGeometry(b[0]/S,b[1]/S),signedDistanceFromCamera:S}}function gt(E,s){return .5+E/s*.5}function wt(E,s){const d=E[0]/E[3],b=E[1]/E[3];return d>=-s[0]&&d<=s[0]&&b>=-s[1]&&b<=s[1]}function Rt(E,s,d,b,S,O,ee,le,de,Ee){const Ne=b?E.textSizeData:E.iconSizeData,Fe=n.evaluateSizeForZoom(Ne,d.transform.zoom),qe=[256/d.width*2+1,256/d.height*2+1],tt=b?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;tt.clear();const Qe=E.lineVertexArray,Je=b?E.text.placedSymbolArray:E.icon.placedSymbolArray,pt=d.transform.width/d.transform.height;let yt=!1;for(let _t=0;_t<Je.length;_t++){const at=Je.get(_t);if(at.hidden||at.writingMode===n.WritingMode.vertical&&!yt){ar(at.numGlyphs,tt);continue}let At;if(yt=!1,Ee?(At=[at.anchorX,at.anchorY,Ee(at.anchorX,at.anchorY),1],n.transformMat4(At,At,s)):(At=[at.anchorX,at.anchorY,0,1],Zi(At,At,s)),!wt(At,qe)){ar(at.numGlyphs,tt);continue}const Et=gt(d.transform.cameraToCenterDistance,At[3]),Nt=n.evaluateSizeForFeature(Ne,Fe,at),Ot=ee?Nt/Et:Nt*Et,$t=new n.pointGeometry(at.anchorX,at.anchorY),Lt=dt($t,S,Ee).point,ai={},Zt=Tt(at,Ot,!1,le,s,S,O,E.glyphOffsetArray,Qe,tt,Lt,$t,ai,pt,de,Ee);yt=Zt.useVertical,(Zt.notEnoughRoom||yt||Zt.needsFlipping&&Tt(at,Ot,!0,le,s,S,O,E.glyphOffsetArray,Qe,tt,Lt,$t,ai,pt,de,Ee).notEnoughRoom)&&ar(at.numGlyphs,tt)}b?E.text.dynamicLayoutVertexBuffer.updateData(tt):E.icon.dynamicLayoutVertexBuffer.updateData(tt)}function ft(E,s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe){const tt=le.glyphStartIndex+le.numGlyphs,Qe=le.lineStartIndex,Je=le.lineStartIndex+le.lineLength,pt=s.getoffsetX(le.glyphStartIndex),yt=s.getoffsetX(tt-1),_t=ui(E*pt,d,b,S,O,ee,le.segment,Qe,Je,de,Ee,Ne,Fe,qe);if(!_t)return null;const at=ui(E*yt,d,b,S,O,ee,le.segment,Qe,Je,de,Ee,Ne,Fe,qe);return at?{first:_t,last:at}:null}function Ct(E,s,d,b){return E===n.WritingMode.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*b?{useVertical:!0}:(E===n.WritingMode.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function Tt(E,s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe,tt,Qe,Je){const pt=s/24,yt=E.lineOffsetX*pt,_t=E.lineOffsetY*pt;let at;if(E.numGlyphs>1){const At=E.glyphStartIndex+E.numGlyphs,Et=E.lineStartIndex,Nt=E.lineStartIndex+E.lineLength,Ot=ft(pt,le,yt,_t,d,Ne,Fe,E,de,O,qe,Qe,Je);if(!Ot)return{notEnoughRoom:!0};const $t=dt(Ot.first.point,ee,Je).point,Lt=dt(Ot.last.point,ee,Je).point;if(b&&!d){const ai=Ct(E.writingMode,$t,Lt,tt);if(ai)return ai}at=[Ot.first];for(let ai=E.glyphStartIndex+1;ai<At-1;ai++)at.push(ui(pt*le.getoffsetX(ai),yt,_t,d,Ne,Fe,E.segment,Et,Nt,de,O,qe,Qe,Je));at.push(Ot.last)}else{if(b&&!d){const Et=dt(Fe,S,Je).point,Nt=E.lineStartIndex+E.segment+1,Ot=new n.pointGeometry(de.getx(Nt),de.gety(Nt)),$t=dt(Ot,S,Je),Lt=$t.signedDistanceFromCamera>0?$t.point:si(Fe,Ot,Et,1,S,Je),ai=Ct(E.writingMode,Et,Lt,tt);if(ai)return ai}const At=ui(pt*le.getoffsetX(E.glyphStartIndex),yt,_t,d,Ne,Fe,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,de,O,qe,Qe,Je);if(!At)return{notEnoughRoom:!0};at=[At]}for(const At of at)n.addDynamicAttributes(Ee,At.point,At.angle);return{}}function si(E,s,d,b,S,O){const ee=dt(E.add(E.sub(s)._unit()),S,O).point,le=d.sub(ee);return d.add(le._mult(b/le.mag()))}function ui(E,s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe,tt){const Qe=b?E-s:E+s;let Je=Qe>0?1:-1,pt=0;b&&(Je*=-1,pt=Math.PI),Je<0&&(pt+=Math.PI);let yt=Je>0?le+ee:le+ee+1,_t=S,at=S,At=0,Et=0;const Nt=Math.abs(Qe),Ot=[];for(;At+Et<=Nt;){if(yt+=Je,yt<le||yt>=de)return null;if(at=_t,Ot.push(_t),_t=Fe[yt],_t===void 0){const li=new n.pointGeometry(Ee.getx(yt),Ee.gety(yt)),Xi=dt(li,Ne,tt);if(Xi.signedDistanceFromCamera>0)_t=Fe[yt]=Xi.point;else{const or=yt-Je;_t=si(At===0?O:new n.pointGeometry(Ee.getx(or),Ee.gety(or)),li,at,Nt-At+1,Ne,tt)}}At+=Et,Et=at.dist(_t)}const $t=(Nt-At)/Et,Lt=_t.sub(at),ai=Lt.mult($t)._add(at);ai._add(Lt._unit()._perp()._mult(d*Je));const Zt=pt+Math.atan2(_t.y-at.y,_t.x-at.x);return Ot.push(ai),{point:ai,angle:qe?Zt:0,path:Ot}}const Ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ar(E,s){for(let d=0;d<E;d++){const b=s.length;s.resize(b+4),s.float32.set(Ht,3*b)}}function Zi(E,s,d){const b=s[0],S=s[1];return E[0]=d[0]*b+d[4]*S+d[12],E[1]=d[1]*b+d[5]*S+d[13],E[3]=d[3]*b+d[7]*S+d[15],E}const mr=100;class zr{constructor(s,d=new Xe(s.width+200,s.height+200,25),b=new Xe(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=b,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+mr,this.screenBottomBoundary=s.height+mr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,b,S,O,ee){const le=this.projectAndGetPerspectiveRatio(S,s.anchorPointX,s.anchorPointY,ee),de=b*le.perspectiveRatio,Ee=s.x1*de+le.point.x,Ne=s.y1*de+le.point.y,Fe=s.x2*de+le.point.x,qe=s.y2*de+le.point.y;return!this.isInsideGrid(Ee,Ne,Fe,qe)||d!=="always"&&this.grid.hitTest(Ee,Ne,Fe,qe,d,O)||le.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Ee,Ne,Fe,qe],offscreen:this.isOffscreen(Ee,Ne,Fe,qe)}}placeCollisionCircles(s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe,tt,Qe){const Je=[],pt=new n.pointGeometry(d.anchorX,d.anchorY),yt=dt(pt,ee,Qe),_t=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),at=(Ne?O/_t:O*_t)/n.ONE_EM,At=dt(pt,le,Qe).point,Et=ft(at,S,d.lineOffsetX*at,d.lineOffsetY*at,!1,At,pt,d,b,le,{},!1,Qe);let Nt=!1,Ot=!1,$t=!0;if(Et){const Lt=.5*qe*_t+tt,ai=new n.pointGeometry(-100,-100),Zt=new n.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),li=new Pe,Xi=Et.first,or=Et.last;let Ii=[];for(let xr=Xi.path.length-1;xr>=1;xr--)Ii.push(Xi.path[xr]);for(let xr=1;xr<or.path.length;xr++)Ii.push(or.path[xr]);const Or=2.5*Lt;if(de){const xr=Ii.map(vr=>dt(vr,de,Qe));Ii=xr.some(vr=>vr.signedDistanceFromCamera<=0)?[]:xr.map(vr=>vr.point)}let jr=[];if(Ii.length>0){const xr=Ii[0].clone(),vr=Ii[0].clone();for(let Tr=1;Tr<Ii.length;Tr++)xr.x=Math.min(xr.x,Ii[Tr].x),xr.y=Math.min(xr.y,Ii[Tr].y),vr.x=Math.max(vr.x,Ii[Tr].x),vr.y=Math.max(vr.y,Ii[Tr].y);jr=xr.x>=ai.x&&vr.x<=Zt.x&&xr.y>=ai.y&&vr.y<=Zt.y?[Ii]:vr.x<ai.x||xr.x>Zt.x||vr.y<ai.y||xr.y>Zt.y?[]:n.clipLine([Ii],ai.x,ai.y,Zt.x,Zt.y)}for(const xr of jr){li.reset(xr,.25*Lt);let vr=0;vr=li.length<=.5*Lt?1:Math.ceil(li.paddedLength/Or)+1;for(let Tr=0;Tr<vr;Tr++){const Xs=Tr/Math.max(vr-1,1),Ga=li.lerp(Xs),Sa=Ga.x+mr,ka=Ga.y+mr;Je.push(Sa,ka,Lt,0);const el=Sa-Lt,is=ka-Lt,Aa=Sa+Lt,tl=ka+Lt;if($t=$t&&this.isOffscreen(el,is,Aa,tl),Ot=Ot||this.isInsideGrid(el,is,Aa,tl),s!=="always"&&this.grid.hitTestCircle(Sa,ka,Lt,s,Fe)&&(Nt=!0,!Ee))return{circles:[],offscreen:!1,collisionDetected:Nt}}}}return{circles:!Ee&&Nt||!Ot||_t<this.perspectiveRatioCutoff?[]:Je,offscreen:$t,collisionDetected:Nt}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let b=1/0,S=1/0,O=-1/0,ee=-1/0;for(const Ne of s){const Fe=new n.pointGeometry(Ne.x+mr,Ne.y+mr);b=Math.min(b,Fe.x),S=Math.min(S,Fe.y),O=Math.max(O,Fe.x),ee=Math.max(ee,Fe.y),d.push(Fe)}const le=this.grid.query(b,S,O,ee).concat(this.ignoredGrid.query(b,S,O,ee)),de={},Ee={};for(const Ne of le){const Fe=Ne.key;if(de[Fe.bucketInstanceId]===void 0&&(de[Fe.bucketInstanceId]={}),de[Fe.bucketInstanceId][Fe.featureIndex])continue;const qe=[new n.pointGeometry(Ne.x1,Ne.y1),new n.pointGeometry(Ne.x2,Ne.y1),new n.pointGeometry(Ne.x2,Ne.y2),new n.pointGeometry(Ne.x1,Ne.y2)];n.polygonIntersectsPolygon(d,qe)&&(de[Fe.bucketInstanceId][Fe.featureIndex]=!0,Ee[Fe.bucketInstanceId]===void 0&&(Ee[Fe.bucketInstanceId]=[]),Ee[Fe.bucketInstanceId].push(Fe.featureIndex))}return Ee}insertCollisionBox(s,d,b,S,O,ee){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:O,collisionGroupID:ee,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,b,S,O,ee){const le=b?this.ignoredGrid:this.grid,de={bucketInstanceId:S,featureIndex:O,collisionGroupID:ee,overlapMode:d};for(let Ee=0;Ee<s.length;Ee+=4)le.insertCircle(de,s[Ee],s[Ee+1],s[Ee+2])}projectAndGetPerspectiveRatio(s,d,b,S){let O;return S?(O=[d,b,S(d,b),1],n.transformMat4(O,O,s)):(O=[d,b,0,1],Zi(O,O,s)),{point:new n.pointGeometry((O[0]/O[3]+1)/2*this.transform.width+mr,(-O[1]/O[3]+1)/2*this.transform.height+mr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}}isOffscreen(s,d,b,S){return b<mr||s>=this.screenRightBoundary||S<mr||d>this.screenBottomBoundary}isInsideGrid(s,d,b,S){return b>=0&&s<this.gridRightBoundary&&S>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=n.identity([]);return n.translate(s,s,[-100,-100,0]),s}}function ir(E,s,d){return s*(n.EXTENT/(E.tileSize*Math.pow(2,d-E.tileID.overscaledZ)))}class ut{constructor(s,d,b,S){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):S&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class bt{constructor(s,d,b,S,O){this.text=new ut(s?s.text:null,d,b,O),this.icon=new ut(s?s.icon:null,d,S,O)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pt{constructor(s,d,b){this.text=s,this.icon=d,this.skipFade=b}}class Bt{constructor(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]}}class qt{constructor(s,d,b,S,O){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=b,this.bucketIndex=S,this.tileID=O}}class bi{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:b=>b.collisionGroupID===d}}return this.collisionGroups[s]}}function Oi(E,s,d,b,S){const{horizontalAlign:O,verticalAlign:ee}=n.getAnchorAlignment(E),le=-(O-.5)*s,de=-(ee-.5)*d,Ee=n.evaluateVariableOffset(E,b);return new n.pointGeometry(le+Ee[0]*S,de+Ee[1]*S)}function di(E,s,d,b,S,O){const{x1:ee,x2:le,y1:de,y2:Ee,anchorPointX:Ne,anchorPointY:Fe}=E,qe=new n.pointGeometry(s,d);return b&&qe._rotate(S?O:-O),{x1:ee+qe.x,y1:de+qe.y,x2:le+qe.x,y2:Ee+qe.y,anchorPointX:Ne,anchorPointY:Fe}}class He{constructor(s,d,b,S,O){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new zr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new bi(S),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,b,S){const O=b.getBucket(d),ee=b.latestFeatureIndex;if(!O||!ee||d.id!==O.layerIds[0])return;const le=b.collisionBoxArray,de=O.layers[0].layout,Ee=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),Ne=b.tileSize/n.EXTENT,Fe=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),qe=de.get("text-pitch-alignment")==="map",tt=de.get("text-rotation-alignment")==="map",Qe=ir(b,1,this.transform.zoom),Je=et(Fe,qe,tt,this.transform,Qe);let pt=null;if(qe){const _t=rt(Fe,qe,tt,this.transform,Qe);pt=n.multiply([],this.transform.labelPlaneMatrix,_t)}this.retainedQueryData[O.bucketInstanceId]=new qt(O.bucketInstanceId,ee,O.sourceLayerIndex,O.index,b.tileID);const yt={bucket:O,layout:de,posMatrix:Fe,textLabelPlaneMatrix:Je,labelToScreenMatrix:pt,scale:Ee,textPixelRatio:Ne,holdingForFade:b.holdingForFade(),collisionBoxArray:le,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(O.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(O.sourceID)};if(S)for(const _t of O.sortKeyRanges){const{sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Et}=_t;s.push({sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Et,parameters:yt})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:O.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe,tt,Qe,Je,pt){const yt=[qe.textOffset0,qe.textOffset1],_t=Oi(s,b,S,yt,O),at=this.collisionIndex.placeCollisionBox(di(d,_t.x,_t.y,ee,le,this.transform.angle),Fe,de,Ee,Ne.predicate,pt);if((!Je||this.collisionIndex.placeCollisionBox(di(Je,_t.x,_t.y,ee,le,this.transform.angle),Fe,de,Ee,Ne.predicate,pt).box.length!==0)&&at.box.length>0){let At;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(At=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:yt,width:b,height:S,anchor:s,textBoxScale:O,prevAnchor:At},this.markUsedJustification(tt,s,qe,Qe),tt.allowVerticalPlacement&&(this.markUsedOrientation(tt,Qe,qe),this.placedOrientations[qe.crossTileID]=Qe),{shift:_t,placedGlyphBoxes:at}}}placeLayerBucketPart(s,d,b){const{bucket:S,layout:O,posMatrix:ee,textLabelPlaneMatrix:le,labelToScreenMatrix:de,textPixelRatio:Ee,holdingForFade:Ne,collisionBoxArray:Fe,partiallyEvaluatedTextSize:qe,collisionGroup:tt}=s.parameters,Qe=O.get("text-optional"),Je=O.get("icon-optional"),pt=n.getOverlapMode(O,"text-overlap","text-allow-overlap"),yt=pt==="always",_t=n.getOverlapMode(O,"icon-overlap","icon-allow-overlap"),at=_t==="always",At=O.get("text-rotation-alignment")==="map",Et=O.get("text-pitch-alignment")==="map",Nt=O.get("icon-text-fit")!=="none",Ot=O.get("symbol-z-order")==="viewport-y",$t=yt&&(at||!S.hasIconData()||Je),Lt=at&&(yt||!S.hasTextData()||Qe);!S.collisionArrays&&Fe&&S.deserializeCollisionBoxes(Fe);const ai=(Zt,li)=>{if(d[Zt.crossTileID])return;if(Ne)return void(this.placements[Zt.crossTileID]=new Pt(!1,!1,!1));let Xi=!1,or=!1,Ii=!0,Or=null,jr={box:null,offscreen:null},xr={box:null,offscreen:null},vr=null,Tr=null,Xs=null,Ga=0,Sa=0,ka=0;li.textFeatureIndex?Ga=li.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(Ga=Zt.featureIndex),li.verticalTextFeatureIndex&&(Sa=li.verticalTextFeatureIndex);const el=this.retainedQueryData[S.bucketInstanceId].tileID,is=this.terrain?(Er,en)=>this.terrain.getElevation(el,Er,en):null;for(const Er of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const en=li[Er];en&&(en.elevation=is?is(en.anchorPointX,en.anchorPointY):0)}const Aa=li.textBox;if(Aa){const Er=Sr=>{let Ln=n.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Sr&&this.prevPlacement){const Bs=this.prevPlacement.placedOrientations[Zt.crossTileID];Bs&&(this.placedOrientations[Zt.crossTileID]=Bs,Ln=Bs,this.markUsedOrientation(S,Ln,Zt))}return Ln},en=(Sr,Ln)=>{if(S.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&li.verticalTextBox){for(const Bs of S.writingModes)if(Bs===n.WritingMode.vertical?(jr=Ln(),xr=jr):jr=Sr(),jr&&jr.box&&jr.box.length)break}else jr=Sr()};if(O.get("text-variable-anchor")){let Sr=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]){const an=this.prevPlacement.variableOffsets[Zt.crossTileID];Sr.indexOf(an.anchor)>0&&(Sr=Sr.filter(ya=>ya!==an.anchor),Sr.unshift(an.anchor))}const Ln=(an,ya,Nl)=>{const Ol=an.x2-an.x1,su=an.y2-an.y1,Gd=Zt.textBoxScale,au=Nt&&_t==="never"?ya:null;let Ma={box:[],offscreen:!1};const ou=pt!=="never"?2*Sr.length:Sr.length;for(let Vc=0;Vc<ou;++Vc){const lu=this.attemptAnchorPlacement(Sr[Vc%Sr.length],an,Ol,su,Gd,At,Et,Ee,ee,tt,Vc>=Sr.length?pt:"never",Zt,S,Nl,au,is);if(lu&&(Ma=lu.placedGlyphBoxes,Ma&&Ma.box&&Ma.box.length)){Xi=!0,Or=lu.shift;break}}return Ma};en(()=>Ln(Aa,li.iconBox,n.WritingMode.horizontal),()=>{const an=li.verticalTextBox;return S.allowVerticalPlacement&&!(jr&&jr.box&&jr.box.length)&&Zt.numVerticalGlyphVertices>0&&an?Ln(an,li.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}}),jr&&(Xi=jr.box,Ii=jr.offscreen);const Bs=Er(jr&&jr.box);if(!Xi&&this.prevPlacement){const an=this.prevPlacement.variableOffsets[Zt.crossTileID];an&&(this.variableOffsets[Zt.crossTileID]=an,this.markUsedJustification(S,an.anchor,Zt,Bs))}}else{const Sr=(Ln,Bs)=>{const an=this.collisionIndex.placeCollisionBox(Ln,pt,Ee,ee,tt.predicate,is);return an&&an.box&&an.box.length&&(this.markUsedOrientation(S,Bs,Zt),this.placedOrientations[Zt.crossTileID]=Bs),an};en(()=>Sr(Aa,n.WritingMode.horizontal),()=>{const Ln=li.verticalTextBox;return S.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&Ln?Sr(Ln,n.WritingMode.vertical):{box:null,offscreen:null}}),Er(jr&&jr.box&&jr.box.length)}}if(vr=jr,Xi=vr&&vr.box&&vr.box.length>0,Ii=vr&&vr.offscreen,Zt.useRuntimeCollisionCircles){const Er=S.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex),en=n.evaluateSizeForFeature(S.textSizeData,qe,Er),Sr=O.get("text-padding");Tr=this.collisionIndex.placeCollisionCircles(pt,Er,S.lineVertexArray,S.glyphOffsetArray,en,ee,le,de,b,Et,tt.predicate,Zt.collisionCircleDiameter,Sr,is),Tr.circles.length&&Tr.collisionDetected&&!b&&n.warnOnce("Collisions detected, but collision boxes are not shown"),Xi=yt||Tr.circles.length>0&&!Tr.collisionDetected,Ii=Ii&&Tr.offscreen}if(li.iconFeatureIndex&&(ka=li.iconFeatureIndex),li.iconBox){const Er=en=>{const Sr=Nt&&Or?di(en,Or.x,Or.y,At,Et,this.transform.angle):en;return this.collisionIndex.placeCollisionBox(Sr,_t,Ee,ee,tt.predicate,is)};xr&&xr.box&&xr.box.length&&li.verticalIconBox?(Xs=Er(li.verticalIconBox),or=Xs.box.length>0):(Xs=Er(li.iconBox),or=Xs.box.length>0),Ii=Ii&&Xs.offscreen}const tl=Qe||Zt.numHorizontalGlyphVertices===0&&Zt.numVerticalGlyphVertices===0,nu=Je||Zt.numIconVertices===0;if(tl||nu?nu?tl||(or=or&&Xi):Xi=or&&Xi:or=Xi=or&&Xi,Xi&&vr&&vr.box&&this.collisionIndex.insertCollisionBox(vr.box,pt,O.get("text-ignore-placement"),S.bucketInstanceId,xr&&xr.box&&Sa?Sa:Ga,tt.ID),or&&Xs&&this.collisionIndex.insertCollisionBox(Xs.box,_t,O.get("icon-ignore-placement"),S.bucketInstanceId,ka,tt.ID),Tr&&(Xi&&this.collisionIndex.insertCollisionCircles(Tr.circles,pt,O.get("text-ignore-placement"),S.bucketInstanceId,Ga,tt.ID),b)){const Er=S.bucketInstanceId;let en=this.collisionCircleArrays[Er];en===void 0&&(en=this.collisionCircleArrays[Er]=new Bt);for(let Sr=0;Sr<Tr.circles.length;Sr+=4)en.circles.push(Tr.circles[Sr+0]),en.circles.push(Tr.circles[Sr+1]),en.circles.push(Tr.circles[Sr+2]),en.circles.push(Tr.collisionDetected?1:0)}if(Zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zt.crossTileID]=new Pt(Xi||$t,or||Lt,Ii||S.justReloaded),d[Zt.crossTileID]=!0};if(Ot){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Zt=S.getSortedSymbolIndexes(this.transform.angle);for(let li=Zt.length-1;li>=0;--li){const Xi=Zt[li];ai(S.symbolInstances.get(Xi),S.collisionArrays[Xi])}}else for(let Zt=s.symbolInstanceStart;Zt<s.symbolInstanceEnd;Zt++)ai(S.symbolInstances.get(Zt),S.collisionArrays[Zt]);if(b&&S.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[S.bucketInstanceId];n.invert(Zt.invProjMatrix,ee),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(s,d,b,S){let O;O=S===n.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[n.getAnchorJustification(d)];const ee=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const le of ee)le>=0&&(s.text.placedSymbolArray.get(le).crossTileID=O>=0&&le!==O?0:b.crossTileID)}markUsedOrientation(s,d,b){const S=d===n.WritingMode.horizontal||d===n.WritingMode.horizontalOnly?d:0,O=d===n.WritingMode.vertical?d:0,ee=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const le of ee)s.text.placedSymbolArray.get(le).placedOrientation=S;b.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=O)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let b=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const S=d?d.symbolFadeChange(s):1,O=d?d.opacities:{},ee=d?d.variableOffsets:{},le=d?d.placedOrientations:{};for(const de in this.placements){const Ee=this.placements[de],Ne=O[de];Ne?(this.opacities[de]=new bt(Ne,S,Ee.text,Ee.icon),b=b||Ee.text!==Ne.text.placed||Ee.icon!==Ne.icon.placed):(this.opacities[de]=new bt(null,S,Ee.text,Ee.icon,Ee.skipFade),b=b||Ee.text||Ee.icon)}for(const de in O){const Ee=O[de];if(!this.opacities[de]){const Ne=new bt(Ee,S,!1,!1);Ne.isHidden()||(this.opacities[de]=Ne,b=b||Ee.text.placed||Ee.icon.placed)}}for(const de in ee)this.variableOffsets[de]||!this.opacities[de]||this.opacities[de].isHidden()||(this.variableOffsets[de]=ee[de]);for(const de in le)this.placedOrientations[de]||!this.opacities[de]||this.opacities[de].isHidden()||(this.placedOrientations[de]=le[de]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const b={};for(const S of d){const O=S.getBucket(s);O&&S.latestFeatureIndex&&s.id===O.layerIds[0]&&this.updateBucketOpacities(O,b,S.collisionBoxArray)}}updateBucketOpacities(s,d,b){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const S=s.layers[0].layout,O=new bt(null,0,!1,!1,!0),ee=S.get("text-allow-overlap"),le=S.get("icon-allow-overlap"),de=S.get("text-variable-anchor"),Ee=S.get("text-rotation-alignment")==="map",Ne=S.get("text-pitch-alignment")==="map",Fe=S.get("icon-text-fit")!=="none",qe=new bt(null,0,ee&&(le||!s.hasIconData()||S.get("icon-optional")),le&&(ee||!s.hasTextData()||S.get("text-optional")),!0);!s.collisionArrays&&b&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(b);const tt=(Qe,Je,pt)=>{for(let yt=0;yt<Je/4;yt++)Qe.opacityVertexArray.emplaceBack(pt)};for(let Qe=0;Qe<s.symbolInstances.length;Qe++){const Je=s.symbolInstances.get(Qe),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:_t}=Je;let at=this.opacities[_t];d[_t]?at=O:at||(at=qe,this.opacities[_t]=at),d[_t]=!0;const At=Je.numIconVertices>0,Et=this.placedOrientations[Je.crossTileID],Nt=Et===n.WritingMode.vertical,Ot=Et===n.WritingMode.horizontal||Et===n.WritingMode.horizontalOnly;if(pt>0||yt>0){const $t=mt(at.text);tt(s.text,pt,Nt?kt:$t),tt(s.text,yt,Ot?kt:$t);const Lt=at.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(li=>{li>=0&&(s.text.placedSymbolArray.get(li).hidden=Lt||Nt?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=Lt||Ot?1:0);const ai=this.variableOffsets[Je.crossTileID];ai&&this.markUsedJustification(s,ai.anchor,Je,Et);const Zt=this.placedOrientations[Je.crossTileID];Zt&&(this.markUsedJustification(s,"left",Je,Zt),this.markUsedOrientation(s,Zt,Je))}if(At){const $t=mt(at.icon),Lt=!(Fe&&Je.verticalPlacedIconSymbolIndex&&Nt);Je.placedIconSymbolIndex>=0&&(tt(s.icon,Je.numIconVertices,Lt?$t:kt),s.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=at.icon.isHidden()),Je.verticalPlacedIconSymbolIndex>=0&&(tt(s.icon,Je.numVerticalIconVertices,Lt?kt:$t),s.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const $t=s.collisionArrays[Qe];if($t){let Lt=new n.pointGeometry(0,0);if($t.textBox||$t.verticalTextBox){let Zt=!0;if(de){const li=this.variableOffsets[_t];li?(Lt=Oi(li.anchor,li.width,li.height,li.textOffset,li.textBoxScale),Ee&&Lt._rotate(Ne?this.transform.angle:-this.transform.angle)):Zt=!1}$t.textBox&&xe(s.textCollisionBox.collisionVertexArray,at.text.placed,!Zt||Nt,Lt.x,Lt.y),$t.verticalTextBox&&xe(s.textCollisionBox.collisionVertexArray,at.text.placed,!Zt||Ot,Lt.x,Lt.y)}const ai=!!(!Ot&&$t.verticalIconBox);$t.iconBox&&xe(s.iconCollisionBox.collisionVertexArray,at.icon.placed,ai,Fe?Lt.x:0,Fe?Lt.y:0),$t.verticalIconBox&&xe(s.iconCollisionBox.collisionVertexArray,at.icon.placed,!ai,Fe?Lt.x:0,Fe?Lt.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Qe.invProjMatrix,s.placementViewportMatrix=Qe.viewportMatrix,s.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const b=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*b>s}setStale(){this.stale=!0}}function xe(E,s,d,b,S){E.emplaceBack(s?1:0,d?1:0,b||0,S||0),E.emplaceBack(s?1:0,d?1:0,b||0,S||0),E.emplaceBack(s?1:0,d?1:0,b||0,S||0),E.emplaceBack(s?1:0,d?1:0,b||0,S||0)}const Le=Math.pow(2,25),Ue=Math.pow(2,24),Ke=Math.pow(2,17),st=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),nt=Math.pow(2,1);function mt(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const s=E.placed?1:0,d=Math.floor(127*E.opacity);return d*Le+s*Ue+d*Ke+s*st+d*ct+s*ot+d*nt+s}const kt=0;class zt{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,b,S,O){const ee=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(ee,S,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort((le,de)=>le.sortKey-de.sortKey));this._currentPartIndex<ee.length;)if(d.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,O())return!0;return!1}}class Dt{constructor(s,d,b,S,O,ee,le,de){this.placement=new He(s,d,ee,le,de),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=O,this._done=!1}isDone(){return this._done}continuePlacement(s,d,b){const S=n.exported.now(),O=()=>{const ee=n.exported.now()-S;return!this._forceFullPlacement&&ee>2};for(;this._currentPlacementIndex>=0;){const ee=d[s[this._currentPlacementIndex]],le=this.placement.collisionIndex.transform.zoom;if(ee.type==="symbol"&&(!ee.minzoom||ee.minzoom<=le)&&(!ee.maxzoom||ee.maxzoom>le)){if(this._inProgressLayer||(this._inProgressLayer=new zt(ee)),this._inProgressLayer.continuePlacement(b[ee.source],this.placement,this._showCollisionBoxes,ee,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const oi=512/n.EXTENT/2;class Kt{constructor(s,d,b){this.tileID=s,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let S=0;S<d.length;S++){const O=d.get(S),ee=O.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:O.crossTileID,coord:this.getScaledCoordinates(O,s)})}}getScaledCoordinates(s,d){const b=oi/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*n.EXTENT+s.anchorX)*b),y:Math.floor((d.canonical.y*n.EXTENT+s.anchorY)*b)}}findMatches(s,d,b){const S=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let O=0;O<s.length;O++){const ee=s.get(O);if(ee.crossTileID)continue;const le=this.indexedSymbolInstances[ee.key];if(!le)continue;const de=this.getScaledCoordinates(ee,d);for(const Ee of le)if(Math.abs(Ee.coord.x-de.x)<=S&&Math.abs(Ee.coord.y-de.y)<=S&&!b[Ee.crossTileID]){b[Ee.crossTileID]=!0,ee.crossTileID=Ee.crossTileID;break}}}}class pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const b in this.indexes){const S=this.indexes[b],O={};for(const ee in S){const le=S[ee];le.tileID=le.tileID.unwrapTo(le.tileID.wrap+d),O[le.tileID.key]=le}this.indexes[b]=O}this.lng=s}addBucket(s,d,b){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let O=0;O<d.symbolInstances.length;O++)d.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const S=this.usedCrossTileIDs[s.overscaledZ];for(const O in this.indexes){const ee=this.indexes[O];if(Number(O)>s.overscaledZ)for(const le in ee){const de=ee[le];de.tileID.isChildOf(s)&&de.findMatches(d.symbolInstances,s,S)}else{const le=ee[s.scaledTo(Number(O)).key];le&&le.findMatches(d.symbolInstances,s,S)}}for(let O=0;O<d.symbolInstances.length;O++){const ee=d.symbolInstances.get(O);ee.crossTileID||(ee.crossTileID=b.generate(),S[ee.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Kt(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const b in d.indexedSymbolInstances)for(const S of d.indexedSymbolInstances[b])delete this.usedCrossTileIDs[s][S.crossTileID]}removeStaleBuckets(s){let d=!1;for(const b in this.indexes){const S=this.indexes[b];for(const O in S)s[S[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,S[O]),delete S[O],d=!0)}return d}}class Fi{constructor(){this.layerIndexes={},this.crossTileIDs=new pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,b){let S=this.layerIndexes[s.id];S===void 0&&(S=this.layerIndexes[s.id]=new vi);let O=!1;const ee={};S.handleWrapJump(b);for(const le of d){const de=le.getBucket(s);de&&s.id===de.layerIds[0]&&(de.bucketInstanceId||(de.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(le.tileID,de,this.crossTileIDs)&&(O=!0),ee[de.bucketInstanceId]=!0)}return S.removeStaleBuckets(ee)&&(O=!0),O}pruneUnusedLayers(s){const d={};s.forEach(b=>{d[b]=!0});for(const b in this.layerIndexes)d[b]||delete this.layerIndexes[b]}}var _i=n.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Pi extends n.Evented{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=s._cache.max,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const s in this._tiles){const d=this._tiles[s];d.textures.forEach(b=>b.destroy()),d.textures=[]}}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];for(const b of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),n.ortho(b.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),this._tiles[b.key]=new ye(b,this.tileSize))}removeOutdated(s){const d={};this.renderHistory=this.renderHistory.filter((b,S)=>this.renderHistory.indexOf(b)===S).slice(0,this.renderHistorySize);for(const b of this._renderableTilesKeys)d[b]=!0;for(const b of this.renderHistory)d[b]=!0;for(const b in this._tiles)d[b]||(this._tiles[b].clearTextures(s),delete this._tiles[b])}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const d={};for(const b of this._renderableTilesKeys){const S=this._tiles[b].tileID;if(S.canonical.equals(s.canonical)){const O=s.clone();O.posMatrix=new Float64Array(16),n.ortho(O.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),d[b]=O}else if(S.canonical.isChildOf(s.canonical)){const O=s.clone();O.posMatrix=new Float64Array(16);const ee=S.canonical.z-s.canonical.z,le=S.canonical.x-(S.canonical.x>>ee<<ee),de=S.canonical.y-(S.canonical.y>>ee<<ee),Ee=n.EXTENT>>ee;n.ortho(O.posMatrix,0,Ee,0,Ee,0,1),n.translate(O.posMatrix,O.posMatrix,[-le*Ee,-de*Ee,0]),d[b]=O}else if(s.canonical.isChildOf(S.canonical)){const O=s.clone();O.posMatrix=new Float64Array(16);const ee=s.canonical.z-S.canonical.z,le=s.canonical.x-(s.canonical.x>>ee<<ee),de=s.canonical.y-(s.canonical.y>>ee<<ee),Ee=n.EXTENT>>ee;n.ortho(O.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),n.translate(O.posMatrix,O.posMatrix,[le*Ee,de*Ee,0]),n.scale(O.posMatrix,O.posMatrix,[1/2**ee,1/2**ee,0]),d[b]=O}}return d}getSourceTile(s,d){const b=this.sourceCache._source;let S=s.overscaledZ-this.deltaZoom;if(S>b.maxzoom&&(S=b.maxzoom),S<b.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(S).key);let O=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!O||!O.dem)&&d)for(;S>=b.minzoom&&(!O||!O.dem);)O=this.sourceCache.getTileByID(s.scaledTo(S--).key);return O}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(d=>d.timeLoaded>=s)}}class Ui{constructor(s,d,b){this.style=s,this.sourceCache=new Pi(d),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.elevationOffset=typeof b.elevationOffset=="number"?b.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(s,d,b,S=n.EXTENT){if(!(d>=0&&d<S&&b>=0&&b<S))return this.elevationOffset;let O=0;const ee=this.getTerrainData(s);if(ee.tile&&ee.tile.dem){const le=n.transformMat4$1([],[d/S*n.EXTENT,b/S*n.EXTENT],ee.u_terrain_matrix),de=[le[0]*ee.tile.dem.dim,le[1]*ee.tile.dem.dim],Ee=[Math.floor(de[0]),Math.floor(de[1])],Ne=ee.tile.dem.get(Ee[0],Ee[1]),Fe=ee.tile.dem.get(Ee[0],Ee[1]+1),qe=ee.tile.dem.get(Ee[0]+1,Ee[1]),tt=ee.tile.dem.get(Ee[0]+1,Ee[1]+1);O=n.number(n.number(Ne,Fe,de[0]-Ee[0]),n.number(qe,tt,de[0]-Ee[0]),de[1]-Ee[1])}return O}rememberForRerender(s,d){for(const b in this.sourceCache._tiles){const S=this.sourceCache._tiles[b];(S.tileID.equals(d)||S.tileID.isChildOf(d))&&(s===this.sourceCache.sourceCache.id&&(S.timeLoaded=Date.now()),this._rerender[s]=this._rerender[s]||{},this._rerender[s][S.tileID.key]=!0)}}needsRerender(s,d){return this._rerender[s]&&this._rerender[s][d.key]}clearRerenderCache(){this._rerender={}}getElevation(s,d,b,S=n.EXTENT){return(this.getDEMElevation(s,d,b,S)+this.elevationOffset)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const S=this.style.map.painter.context,O=new n.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(S,O,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(S,new n.RGBAImage({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=n.identity([])}const d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const S=this.style.map.painter.context;d.demTexture=this.style.map.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new T(S,d.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),d.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const b=d&&d+d.tileID.key+s.key;if(b&&!this._demMatrixCache[b]){const S=this.sourceCache.sourceCache._source.maxzoom;let O=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=S?O=s.canonical.z-S:n.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ee=s.canonical.x-(s.canonical.x>>O<<O),le=s.canonical.y-(s.canonical.y>>O<<O),de=n.fromScaling(new Float64Array(16),[1/(n.EXTENT<<O),1/(n.EXTENT<<O),0]);n.translate(de,de,[ee*n.EXTENT,le*n.EXTENT,0]),this._demMatrixCache[s.key]={matrix:de,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getRTTFramebuffer(){const s=this.style.map.painter;if(!this._rttFramebuffer){const d=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=s.context.createFramebuffer(d,d,!0),this._rttFramebuffer.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,d,d))}return this._rttFramebuffer}getFramebuffer(s){const d=this.style.map.painter,b=d.width/devicePixelRatio,S=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(d.context,{width:b,height:S,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(d.context,{width:b,height:S,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(b,S,!0),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,b,S))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let O=0,ee=0;O<this._coordsTextureSize;O++)for(let le=0;le<this._coordsTextureSize;le++,ee+=4)d[ee+0]=255&le,d[ee+1]=255&O,d[ee+2]=le>>8<<4|O>>8,d[ee+3]=0;const b=new n.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),S=new T(s,b,s.gl.RGBA,{premultiply:!1});return S.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(s){const d=new Uint8Array(4),b=this.style.map.painter,S=b.context,O=S.gl;S.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),O.readPixels(s.x,b.height/devicePixelRatio-s.y-1,1,1,O.RGBA,O.UNSIGNED_BYTE,d),S.bindFramebuffer.set(null);const ee=d[0]+(d[2]>>4<<8),le=d[1]+((15&d[2])<<8),de=this.coordsIndex[255-d[3]],Ee=de&&this.sourceCache.getTileByID(de);if(!Ee)return null;const Ne=this._coordsTextureSize,Fe=(1<<Ee.tileID.canonical.z)*Ne;return new n.MercatorCoordinate((Ee.tileID.canonical.x*Ne+ee)/Fe,(Ee.tileID.canonical.y*Ne+le)/Fe,this.getElevation(Ee.tileID,ee,le,Ne))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.style.map.painter.context,d=new n.PosArray,b=new n.TriangleIndexArray,S=this.meshSize,O=n.EXTENT/S,ee=S*S;for(let le=0;le<=S;le++)for(let de=0;de<=S;de++)d.emplaceBack(de*O,le*O);for(let le=0;le<ee;le+=S+1)for(let de=0;de<S;de++)b.emplaceBack(de+le,S+de+le+1,S+de+le+2),b.emplaceBack(de+le,S+de+le+2,de+le+1);return this._mesh={indexBuffer:s.createIndexBuffer(b),vertexBuffer:s.createVertexBuffer(d,_i.members),segments:n.SegmentVector.simpleSegment(0,0,d.length,b.length)},this._mesh}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,b={minElevation:null,maxElevation:null};return d&&d.dem&&(b.minElevation=(d.dem.min+this.elevationOffset)*this.exaggeration,b.maxElevation=(d.dem.max+this.elevationOffset)*this.exaggeration),b}}const ji=(E,s)=>n.emitValidationErrors(E,s&&s.filter(d=>d.identifier!=="source.canvas")),hr=n.pick(Ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ur=n.pick(Ie,["setCenter","setZoom","setBearing","setPitch"]),gn=function(){const E={},s=n.spec.$version;for(const d in n.spec.$root){const b=n.spec.$root[d];if(b.required){let S=null;S=d==="version"?s:b.type==="array"?[]:{},S!=null&&(E[d]=S)}}return E}();class jn extends n.Evented{constructor(s,d={}){super(),this.map=s,this.dispatcher=new X(_e(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new w(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Z(256,512),this.crossTileSymbolIndex=new Fi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());const b=this;this._rtlTextPluginCallback=jn.registerForPluginStateChange(S=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(O,ee)=>{if(n.triggerPluginCompletionEvent(O),ee&&ee.every(le=>le))for(const le in b.sourceCaches)b.sourceCaches[le].reload()})}),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const O=this.sourceCaches[S.sourceId];if(!O)return;const ee=O.getSource();if(ee&&ee.vectorLayerIds)for(const le in this._layers){const de=this._layers[le];de.source===ee.id&&this._validateLayer(de)}})}loadURL(s,d={}){this.fire(new n.Event("dataloading",{dataType:"style"}));const b=typeof d.validate!="boolean"||d.validate,S=this.map._requestManager.transformRequest(s,n.ResourceType.Style);this._request=n.getJSON(S,(O,ee)=>{this._request=null,O?this.fire(new n.ErrorEvent(O)):ee&&this._load(ee,b)})}loadJSON(s,d={}){this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.exported.frame(()=>{this._request=null,this._load(s,d.validate!==!1)})}loadEmpty(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(gn,!1)}_load(s,d){if(d&&ji(this,n.validateStyle(s)))return;this._loaded=!0,this.stylesheet=s;for(const S in s.sources)this.addSource(S,s.sources[S],{validate:!1});s.sprite?this._loadSprite(s.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(s.glyphs);const b=Te(this.stylesheet.layers);this._order=b.map(S=>S.id),this._layers={},this._serializedLayers={};for(let S of b)S=n.createStyleLayer(S),S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new q(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}_loadSprite(s){this._spriteRequest=function(d,b,S,O){let ee,le,de;const Ee=S>1?"@2x":"";let Ne=n.getJSON(b.transformRequest(b.normalizeSpriteURL(d,Ee,".json"),n.ResourceType.SpriteJSON),(tt,Qe)=>{Ne=null,de||(de=tt,ee=Qe,qe())}),Fe=n.getImage(b.transformRequest(b.normalizeSpriteURL(d,Ee,".png"),n.ResourceType.SpriteImage),(tt,Qe)=>{Fe=null,de||(de=tt,le=Qe,qe())});function qe(){if(de)O(de);else if(ee&&le){const tt=n.exported.getImageData(le),Qe={};for(const Je in ee){const{width:pt,height:yt,x:_t,y:at,sdf:At,pixelRatio:Et,stretchX:Nt,stretchY:Ot,content:$t}=ee[Je],Lt=new n.RGBAImage({width:pt,height:yt});n.RGBAImage.copy(tt,Lt,{x:_t,y:at},{x:0,y:0},{width:pt,height:yt}),Qe[Je]={data:Lt,pixelRatio:Et,sdf:At,stretchX:Nt,stretchY:Ot,content:$t}}O(null,Qe)}}return{cancel(){Ne&&(Ne.cancel(),Ne=null),Fe&&(Fe.cancel(),Fe=null)}}}(s,this.map._requestManager,this.map.getPixelRatio(),(d,b)=>{if(this._spriteRequest=null,d)this.fire(new n.ErrorEvent(d));else if(b)for(const S in b)this.imageManager.addImage(S,b[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))})}_validateLayer(s){const d=this.sourceCaches[s.source];if(!d)return;const b=s.sourceLayer;if(!b)return;const S=d.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(b)===-1)&&this.fire(new n.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${S.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const d=[];for(const b of s){const S=this._layers[b];S.type!=="custom"&&d.push(S.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),O=Object.keys(this._removedLayers);(S.length||O.length)&&this._updateWorkerLayers(S,O);for(const ee in this._updatedSources){const le=this._updatedSources[ee];if(le==="reload")this._reloadSource(ee);else{if(le!=="clear")throw new Error(`Invalid action ${le}`);this._clearSource(ee)}}this._updateTilesForChangedImages();for(const ee in this._updatedPaintProps)this._layers[ee].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const b={};for(const S in this.sourceCaches){const O=this.sourceCaches[S];b[S]=O.used,O.used=!1}for(const S of this._order){const O=this._layers[S];O.recalculate(s,this._availableImages),!O.isHidden(s.zoom)&&O.source&&(this.sourceCaches[O.source].used=!0)}for(const S in b){const O=this.sourceCaches[S];b[S]!==O.used&&O.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(s),this.z=s.zoom,d&&this.fire(new n.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(s){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),s){const d=this.sourceCaches[s.source];if(!d)throw new Error(`cannot load terrain, because there exists no source with ID: ${s.source}`);this.terrain=new Ui(this,d,s),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=b=>{b.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=b=>{b.tile&&(b.sourceId===s.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(b.sourceId,b.tile.tileID)):b.source.type==="geojson"&&this.terrain.rememberForRerender(b.sourceId,b.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new n.Event("terrain",{terrain:s}))}setState(s){if(this._checkLoaded(),ji(this,n.validateStyle(s)))return!1;(s=n.clone$1(s)).layers=Te(s.layers);const d=function(S,O){if(!S)return[{command:Ie.setStyle,args:[O]}];let ee=[];try{if(!v(S.version,O.version))return[{command:Ie.setStyle,args:[O]}];v(S.center,O.center)||ee.push({command:Ie.setCenter,args:[O.center]}),v(S.zoom,O.zoom)||ee.push({command:Ie.setZoom,args:[O.zoom]}),v(S.bearing,O.bearing)||ee.push({command:Ie.setBearing,args:[O.bearing]}),v(S.pitch,O.pitch)||ee.push({command:Ie.setPitch,args:[O.pitch]}),v(S.sprite,O.sprite)||ee.push({command:Ie.setSprite,args:[O.sprite]}),v(S.glyphs,O.glyphs)||ee.push({command:Ie.setGlyphs,args:[O.glyphs]}),v(S.transition,O.transition)||ee.push({command:Ie.setTransition,args:[O.transition]}),v(S.light,O.light)||ee.push({command:Ie.setLight,args:[O.light]});const le={},de=[];(function(Ne,Fe,qe,tt){let Qe;for(Qe in Fe=Fe||{},Ne=Ne||{})Object.prototype.hasOwnProperty.call(Ne,Qe)&&(Object.prototype.hasOwnProperty.call(Fe,Qe)||Ge(Qe,qe,tt));for(Qe in Fe)Object.prototype.hasOwnProperty.call(Fe,Qe)&&(Object.prototype.hasOwnProperty.call(Ne,Qe)?v(Ne[Qe],Fe[Qe])||(Ne[Qe].type==="geojson"&&Fe[Qe].type==="geojson"&&me(Ne,Fe,Qe)?qe.push({command:Ie.setGeoJSONSourceData,args:[Qe,Fe[Qe].data]}):ke(Qe,Fe,qe,tt)):Be(Qe,Fe,qe))})(S.sources,O.sources,de,le);const Ee=[];S.layers&&S.layers.forEach(Ne=>{le[Ne.source]?ee.push({command:Ie.removeLayer,args:[Ne.id]}):Ee.push(Ne)}),ee=ee.concat(de),function(Ne,Fe,qe){Fe=Fe||[];const tt=(Ne=Ne||[]).map(Ae),Qe=Fe.map(Ae),Je=Ne.reduce(De,{}),pt=Fe.reduce(De,{}),yt=tt.slice(),_t=Object.create(null);let at,At,Et,Nt,Ot,$t,Lt;for(at=0,At=0;at<tt.length;at++)Et=tt[at],Object.prototype.hasOwnProperty.call(pt,Et)?At++:(qe.push({command:Ie.removeLayer,args:[Et]}),yt.splice(yt.indexOf(Et,At),1));for(at=0,At=0;at<Qe.length;at++)Et=Qe[Qe.length-1-at],yt[yt.length-1-at]!==Et&&(Object.prototype.hasOwnProperty.call(Je,Et)?(qe.push({command:Ie.removeLayer,args:[Et]}),yt.splice(yt.lastIndexOf(Et,yt.length-At),1)):At++,$t=yt[yt.length-at],qe.push({command:Ie.addLayer,args:[pt[Et],$t]}),yt.splice(yt.length-at,0,Et),_t[Et]=!0);for(at=0;at<Qe.length;at++)if(Et=Qe[at],Nt=Je[Et],Ot=pt[Et],!_t[Et]&&!v(Nt,Ot))if(v(Nt.source,Ot.source)&&v(Nt["source-layer"],Ot["source-layer"])&&v(Nt.type,Ot.type)){for(Lt in fe(Nt.layout,Ot.layout,qe,Et,null,Ie.setLayoutProperty),fe(Nt.paint,Ot.paint,qe,Et,null,Ie.setPaintProperty),v(Nt.filter,Ot.filter)||qe.push({command:Ie.setFilter,args:[Et,Ot.filter]}),v(Nt.minzoom,Ot.minzoom)&&v(Nt.maxzoom,Ot.maxzoom)||qe.push({command:Ie.setLayerZoomRange,args:[Et,Ot.minzoom,Ot.maxzoom]}),Nt)Object.prototype.hasOwnProperty.call(Nt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?fe(Nt[Lt],Ot[Lt],qe,Et,Lt.slice(6),Ie.setPaintProperty):v(Nt[Lt],Ot[Lt])||qe.push({command:Ie.setLayerProperty,args:[Et,Lt,Ot[Lt]]}));for(Lt in Ot)Object.prototype.hasOwnProperty.call(Ot,Lt)&&!Object.prototype.hasOwnProperty.call(Nt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?fe(Nt[Lt],Ot[Lt],qe,Et,Lt.slice(6),Ie.setPaintProperty):v(Nt[Lt],Ot[Lt])||qe.push({command:Ie.setLayerProperty,args:[Et,Lt,Ot[Lt]]}))}else qe.push({command:Ie.removeLayer,args:[Et]}),$t=yt[yt.lastIndexOf(Et)+1],qe.push({command:Ie.addLayer,args:[Ot,$t]})}(Ee,O.layers,ee)}catch(le){console.warn("Unable to compute style diff:",le),ee=[{command:Ie.setStyle,args:[O]}]}return ee}(this.serialize(),s).filter(S=>!(S.command in Ur));if(d.length===0)return!1;const b=d.filter(S=>!(S.command in hr));if(b.length>0)throw new Error(`Unimplemented: ${b.map(S=>S.command).join(", ")}.`);return d.forEach(S=>{S.command!=="setTransition"&&this[S.command].apply(this,S.args)}),this.stylesheet=s,!0}addImage(s,d){if(this.getImage(s))return this.fire(new n.ErrorEvent(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new n.ErrorEvent(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,b={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(n.validateStyle.source,`sources.${s}`,d,null,b))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const S=this.sourceCaches[s]=new Q(s,d,this.dispatcher);S.style=this,S.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:S.serialize(),sourceId:s})),S.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===s)return this.fire(new n.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${b}" is using it.`)));const d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const b=this.sourceCaches[s].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,b={}){this._checkLoaded();const S=s.id;if(this.getLayer(S))return void this.fire(new n.ErrorEvent(new Error(`Layer "${S}" already exists on this map.`)));let O;if(s.type==="custom"){if(ji(this,n.validateCustomStyleLayer(s)))return;O=n.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(S,s.source),s=n.clone$1(s),s=n.extend(s,{source:S})),this._validate(n.validateStyle.layer,`layers.${S}`,s,{arrayIndex:-1},b))return;O=n.createStyleLayer(s),this._validateLayer(O),O.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[O.id]=O.serialize()}const ee=d?this._order.indexOf(d):this._order.length;if(d&&ee===-1)this.fire(new n.ErrorEvent(new Error(`Cannot add layer "${S}" before non-existing layer "${d}".`)));else{if(this._order.splice(ee,0,S),this._layerOrderChanged=!0,this._layers[S]=O,this._removedLayers[S]&&O.source&&O.type!=="custom"){const le=this._removedLayers[S];delete this._removedLayers[S],le.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.sourceCaches[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new n.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const b=this._order.indexOf(s);this._order.splice(b,1);const S=d?this._order.indexOf(d):this._order.length;d&&S===-1?this.fire(new n.ErrorEvent(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(S,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new n.ErrorEvent(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const b=this._order.indexOf(s);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,b){this._checkLoaded();const S=this.getLayer(s);S?S.minzoom===d&&S.maxzoom===b||(d!=null&&(S.minzoom=d),b!=null&&(S.maxzoom=b),this._updateLayer(S)):this.fire(new n.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,b={}){this._checkLoaded();const S=this.getLayer(s);if(S){if(!v(S.filter,d))return d==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(n.validateStyle.filter,`layers.${S.id}.filter`,d,null,b)||(S.filter=n.clone$1(d),this._updateLayer(S)))}else this.fire(new n.ErrorEvent(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return n.clone$1(this.getLayer(s).filter)}setLayoutProperty(s,d,b,S={}){this._checkLoaded();const O=this.getLayer(s);O?v(O.getLayoutProperty(d),b)||(O.setLayoutProperty(d,b,S),this._updateLayer(O)):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const b=this.getLayer(s);if(b)return b.getLayoutProperty(d);this.fire(new n.ErrorEvent(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,b,S={}){this._checkLoaded();const O=this.getLayer(s);O?v(O.getPaintProperty(d),b)||(O.setPaintProperty(d,b,S)&&this._updateLayer(O),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const b=s.source,S=s.sourceLayer,O=this.sourceCaches[b];if(O===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const ee=O.getSource().type;ee==="geojson"&&S?this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ee!=="vector"||S?(s.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),O.setFeatureState(S,s.id,d)):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const b=s.source,S=this.sourceCaches[b];if(S===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const O=S.getSource().type,ee=O==="vector"?s.sourceLayer:void 0;O!=="vector"||ee?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(ee,s.id,d):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,b=s.sourceLayer,S=this.sourceCaches[d];if(S!==void 0)return S.getSource().type!=="vector"||b?(s.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),S.getFeatureState(b,s.id)):void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new n.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,s=>s.serialize()),layers:this._serializeLayers(this._order)},s=>s!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=ee=>this._layers[ee].type==="fill-extrusion",b={},S=[];for(let ee=this._order.length-1;ee>=0;ee--){const le=this._order[ee];if(d(le)){b[le]=ee;for(const de of s){const Ee=de[le];if(Ee)for(const Ne of Ee)S.push(Ne)}}}S.sort((ee,le)=>le.intersectionZ-ee.intersectionZ);const O=[];for(let ee=this._order.length-1;ee>=0;ee--){const le=this._order[ee];if(d(le))for(let de=S.length-1;de>=0;de--){const Ee=S[de].feature;if(b[Ee.layer.id]<ee)break;O.push(Ee),S.pop()}else for(const de of s){const Ee=de[le];if(Ee)for(const Ne of Ee)O.push(Ne.feature)}}return O}queryRenderedFeatures(s,d,b){d&&d.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const S={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ee of d.layers){const le=this._layers[ee];if(!le)return this.fire(new n.ErrorEvent(new Error(`The layer '${ee}' does not exist in the map's style and cannot be queried for features.`))),[];S[le.source]=!0}}const O=[];d.availableImages=this._availableImages;for(const ee in this.sourceCaches)d.layers&&!S[ee]||O.push(oe(this.sourceCaches[ee],this._layers,this._serializedLayers,s,d,b));return this.placement&&O.push(function(ee,le,de,Ee,Ne,Fe,qe){const tt={},Qe=Fe.queryRenderedSymbols(Ee),Je=[];for(const pt of Object.keys(Qe).map(Number))Je.push(qe[pt]);Je.sort(Se);for(const pt of Je){const yt=pt.featureIndex.lookupSymbolFeatures(Qe[pt.bucketInstanceId],le,pt.bucketIndex,pt.sourceLayerIndex,Ne.filter,Ne.layers,Ne.availableImages,ee);for(const _t in yt){const at=tt[_t]=tt[_t]||[],At=yt[_t];At.sort((Et,Nt)=>{const Ot=pt.featureSortOrder;if(Ot){const $t=Ot.indexOf(Et.featureIndex);return Ot.indexOf(Nt.featureIndex)-$t}return Nt.featureIndex-Et.featureIndex});for(const Et of At)at.push(Et)}}for(const pt in tt)tt[pt].forEach(yt=>{const _t=yt.feature,at=de[ee[pt].source].getFeatureState(_t.layer["source-layer"],_t.id);_t.source=_t.layer.source,_t.layer["source-layer"]&&(_t.sourceLayer=_t.layer["source-layer"]),_t.state=at});return tt}(this._layers,this._serializedLayers,this.sourceCaches,s,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(O)}querySourceFeatures(s,d){d&&d.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const b=this.sourceCaches[s];return b?function(S,O){const ee=S.getRenderableIds().map(Ee=>S.getTileByID(Ee)),le=[],de={};for(let Ee=0;Ee<ee.length;Ee++){const Ne=ee[Ee],Fe=Ne.tileID.canonical.key;de[Fe]||(de[Fe]=!0,Ne.querySourceFeatures(le,O))}return le}(b,d):[]}addSourceType(s,d,b){return jn.getSourceType(s)?b(new Error(`A source type called "${s}" already exists.`)):(jn.setSourceType(s,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const b=this.light.getLight();let S=!1;for(const ee in s)if(!v(s[ee],b[ee])){S=!0;break}if(!S)return;const O={now:n.exported.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(O)}_validate(s,d,b,S,O={}){return(!O||O.validate!==!1)&&ji(this,s.call(n.validateStyle,n.extend({key:d,style:this.serialize(),value:b,styleSpec:n.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const d=this.sourceCaches[s];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const d in this.sourceCaches)this.sourceCaches[d].update(s,this.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,b,S,O=!1){let ee=!1,le=!1;const de={};for(const Ee of this._order){const Ne=this._layers[Ee];if(Ne.type!=="symbol")continue;if(!de[Ne.source]){const qe=this.sourceCaches[Ne.source];de[Ne.source]=qe.getRenderableIds(!0).map(tt=>qe.getTileByID(tt)).sort((tt,Qe)=>Qe.tileID.overscaledZ-tt.tileID.overscaledZ||(tt.tileID.isLessThan(Qe.tileID)?-1:1))}const Fe=this.crossTileSymbolIndex.addLayer(Ne,de[Ne.source],s.center.lng);ee=ee||Fe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.exported.now(),s.zoom))&&(this.pauseablePlacement=new Dt(s,this.terrain,this._order,O,d,b,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,de),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.exported.now()),le=!0),ee&&this.pauseablePlacement.placement.setStale()),le||ee)for(const Ee of this._order){const Ne=this._layers[Ee];Ne.type==="symbol"&&this.placement.updateLayerOpacities(Ne,de[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.exported.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,b){this.imageManager.getImages(d.icons,b),this._updateTilesForChangedImages();const S=this.sourceCaches[d.source];S&&S.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(s,d,b){this.glyphManager.getGlyphs(d.stacks,b)}getResource(s,d,b){return n.makeRequest(d,b)}}jn.getSourceType=function(E){return ue[E]},jn.setSourceType=function(E,s){ue[E]=s},jn.registerForPluginStateChange=n.registerForPluginStateChange;var cd="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const _c={prelude:Nr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Nr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Nr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Nr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Nr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Nr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Nr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Nr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Nr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",cd),terrainDepth:Nr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",cd),terrainCoords:Nr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",cd)};function Nr(E,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=s.match(/attribute ([\w]+) ([\w]+)/g),S=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=O?O.concat(S):S,le={};return{fragmentSource:E=E.replace(d,(de,Ee,Ne,Fe,qe)=>(le[qe]=!0,Ee==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
varying ${Ne} ${Fe} ${qe};
#else
uniform ${Ne} ${Fe} u_${qe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${qe}
    ${Ne} ${Fe} ${qe} = u_${qe};
#endif
`)),vertexSource:s=s.replace(d,(de,Ee,Ne,Fe,qe)=>{const tt=Fe==="float"?"vec2":"vec4",Qe=qe.match(/color/)?"color":tt;return le[qe]?Ee==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${tt} a_${qe};
varying ${Ne} ${Fe} ${qe};
#else
uniform ${Ne} ${Fe} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = a_${qe};
#else
    ${Ne} ${Fe} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Fe} ${qe} = u_${qe};
#endif
`:Ee==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${tt} a_${qe};
#else
uniform ${Ne} ${Fe} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Fe} ${qe} = a_${qe};
#else
    ${Ne} ${Fe} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Fe} ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Fe} ${qe} = u_${qe};
#endif
`}),staticAttributes:b,staticUniforms:ee}}class Ly{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,b,S,O,ee,le,de,Ee){this.context=s;let Ne=this.boundPaintVertexBuffers.length!==S.length;for(let Fe=0;!Ne&&Fe<S.length;Fe++)this.boundPaintVertexBuffers[Fe]!==S[Fe]&&(Ne=!0);s.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===b&&!Ne&&this.boundIndexBuffer===O&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===le&&this.boundDynamicVertexBuffer2===de&&this.boundDynamicVertexBuffer3===Ee?(s.bindVertexArrayOES.set(this.vao),le&&le.bind(),O&&O.dynamicDraw&&O.bind(),de&&de.bind(),Ee&&Ee.bind()):this.freshBind(d,b,S,O,ee,le,de,Ee)}freshBind(s,d,b,S,O,ee,le,de){let Ee;const Ne=s.numAttributes,Fe=this.context,qe=Fe.gl;if(Fe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Fe.extVertexArrayObject.createVertexArrayOES(),Fe.bindVertexArrayOES.set(this.vao),Ee=0,this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=S,this.boundVertexOffset=O,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=le,this.boundDynamicVertexBuffer3=de;else{Ee=Fe.currentNumAttributes||0;for(let tt=Ne;tt<Ee;tt++)qe.disableVertexAttribArray(tt)}d.enableAttributes(qe,s);for(const tt of b)tt.enableAttributes(qe,s);ee&&ee.enableAttributes(qe,s),le&&le.enableAttributes(qe,s),de&&de.enableAttributes(qe,s),d.bind(),d.setVertexAttribPointers(qe,s,O);for(const tt of b)tt.bind(),tt.setVertexAttribPointers(qe,s,O);ee&&(ee.bind(),ee.setVertexAttribPointers(qe,s,O)),S&&S.bind(),le&&(le.bind(),le.setVertexAttribPointers(qe,s,O)),de&&(de.bind(),de.setVertexAttribPointers(qe,s,O)),Fe.currentNumAttributes=Ne}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Rh(E){const s=[];for(let d=0;d<E.length;d++){if(E[d]===null)continue;const b=E[d].split(" ");s.push(b.pop())}return s}class zy{constructor(s,d,b,S,O,ee,le){const de=s.gl;this.program=de.createProgram();const Ee=Rh(b.staticAttributes),Ne=S?S.getBinderAttributes():[],Fe=Ee.concat(Ne),qe=_c.prelude.staticUniforms?Rh(_c.prelude.staticUniforms):[],tt=b.staticUniforms?Rh(b.staticUniforms):[],Qe=S?S.getBinderUniforms():[],Je=qe.concat(tt).concat(Qe),pt=[];for(const Ot of Je)pt.indexOf(Ot)<0&&pt.push(Ot);const yt=S?S.defines():[];ee&&yt.push("#define OVERDRAW_INSPECTOR;"),le&&yt.push("#define TERRAIN3D;");const _t=yt.concat(_c.prelude.fragmentSource,b.fragmentSource).join(`
`),at=yt.concat(_c.prelude.vertexSource,b.vertexSource).join(`
`),At=de.createShader(de.FRAGMENT_SHADER);if(de.isContextLost())return void(this.failedToCreate=!0);de.shaderSource(At,_t),de.compileShader(At),de.attachShader(this.program,At);const Et=de.createShader(de.VERTEX_SHADER);if(de.isContextLost())return void(this.failedToCreate=!0);de.shaderSource(Et,at),de.compileShader(Et),de.attachShader(this.program,Et),this.attributes={};const Nt={};this.numAttributes=Fe.length;for(let Ot=0;Ot<this.numAttributes;Ot++)Fe[Ot]&&(de.bindAttribLocation(this.program,Ot,Fe[Ot]),this.attributes[Fe[Ot]]=Ot);de.linkProgram(this.program),de.deleteShader(Et),de.deleteShader(At);for(let Ot=0;Ot<pt.length;Ot++){const $t=pt[Ot];if($t&&!Nt[$t]){const Lt=de.getUniformLocation(this.program,$t);Lt&&(Nt[$t]=Lt)}}this.fixedUniforms=O(s,Nt),this.terrainUniforms=((Ot,$t)=>({u_depth:new n.Uniform1i(Ot,$t.u_depth),u_terrain:new n.Uniform1i(Ot,$t.u_terrain),u_terrain_dim:new n.Uniform1f(Ot,$t.u_terrain_dim),u_terrain_matrix:new n.UniformMatrix4f(Ot,$t.u_terrain_matrix),u_terrain_unpack:new n.Uniform4f(Ot,$t.u_terrain_unpack),u_terrain_offset:new n.Uniform1f(Ot,$t.u_terrain_offset),u_terrain_exaggeration:new n.Uniform1f(Ot,$t.u_terrain_exaggeration)}))(s,Nt),this.binderUniforms=S?S.getUniforms(s,Nt):[]}draw(s,d,b,S,O,ee,le,de,Ee,Ne,Fe,qe,tt,Qe,Je,pt,yt,_t){const at=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(b),s.setStencilMode(S),s.setColorMode(O),s.setCullFace(ee),de){s.activeTexture.set(at.TEXTURE2),at.bindTexture(at.TEXTURE_2D,de.depthTexture),s.activeTexture.set(at.TEXTURE3),at.bindTexture(at.TEXTURE_2D,de.texture);for(const Et in this.terrainUniforms)this.terrainUniforms[Et].set(de[Et])}for(const Et in this.fixedUniforms)this.fixedUniforms[Et].set(le[Et]);Je&&Je.setUniforms(s,this.binderUniforms,tt,{zoom:Qe});let At=0;switch(d){case at.LINES:At=2;break;case at.TRIANGLES:At=3;break;case at.LINE_STRIP:At=1}for(const Et of qe.get()){const Nt=Et.vaos||(Et.vaos={});(Nt[Ee]||(Nt[Ee]=new Ly)).bind(s,this,Ne,Je?Je.getPaintVertexBuffers():[],Fe,Et.vertexOffset,pt,yt,_t),at.drawElements(d,Et.primitiveLength*At,at.UNSIGNED_SHORT,Et.primitiveOffset*At*2)}}}function hd(E,s,d){const b=1/ir(d,1,s.transform.tileZoom),S=Math.pow(2,d.tileID.overscaledZ),O=d.tileSize*Math.pow(2,s.transform.tileZoom)/S,ee=O*(d.tileID.canonical.x+d.tileID.wrap*S),le=O*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[b,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[ee>>16,le>>16],u_pixel_coord_lower:[65535&ee,65535&le]}}const Nf=(E,s,d,b)=>{const S=s.style.light,O=S.properties.get("position"),ee=[O.x,O.y,O.z],le=n.create$1();S.properties.get("anchor")==="viewport"&&n.fromRotation(le,-s.transform.angle),n.transformMat3(ee,ee,le);const de=S.properties.get("color");return{u_matrix:E,u_lightpos:ee,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+d,u_opacity:b}},ud=(E,s,d,b,S,O,ee)=>n.extend(Nf(E,s,d,b),hd(O,s,ee),{u_height_factor:-Math.pow(2,S.overscaledZ)/ee.tileSize/8}),dd=E=>({u_matrix:E}),pd=(E,s,d,b)=>n.extend(dd(E),hd(d,s,b)),Of=(E,s)=>({u_matrix:E,u_world:s}),jf=(E,s,d,b,S)=>n.extend(pd(E,s,d,b),{u_world:S}),qo=(E,s,d,b)=>{const S=E.transform;let O,ee;if(b.paint.get("circle-pitch-alignment")==="map"){const le=ir(d,1,S.zoom);O=!0,ee=[le,le]}else O=!1,ee=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(s.posMatrix,d,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+O,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:ee}},Lh=(E,s,d)=>{const b=ir(d,1,s.zoom),S=Math.pow(2,s.zoom-d.tileID.overscaledZ),O=d.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[s.pixelsToGLUnits[0]/(b*S),s.pixelsToGLUnits[1]/(b*S)],u_overscale_factor:O}},Sl=(E,s,d=1)=>({u_matrix:E,u_color:s,u_overlay:0,u_overlay_scale:d}),wc=E=>({u_matrix:E}),zh=(E,s,d,b)=>({u_matrix:E,u_extrude_scale:ir(s,1,d),u_intensity:b});function Nh(E,s){const d=Math.pow(2,s.canonical.z),b=s.canonical.y;return[new n.MercatorCoordinate(0,b/d).toLngLat().lat,new n.MercatorCoordinate(0,(b+1)/d).toLngLat().lat]}const Tc=(E,s,d,b)=>{const S=E.transform;return{u_matrix:fd(E,s,d,b),u_ratio:1/ir(s,1,S.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Oh=(E,s,d,b,S)=>n.extend(Tc(E,s,d,S),{u_image:0,u_image_height:b}),Ec=(E,s,d,b,S)=>{const O=E.transform,ee=Cc(s,O);return{u_matrix:fd(E,s,d,S),u_texsize:s.imageAtlasTexture.size,u_ratio:1/ir(s,1,O.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[ee,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},hn=(E,s,d,b,S,O)=>{const ee=E.lineAtlas,le=Cc(s,E.transform),de=d.layout.get("line-cap")==="round",Ee=ee.getDash(b.from,de),Ne=ee.getDash(b.to,de),Fe=Ee.width*S.fromScale,qe=Ne.width*S.toScale;return n.extend(Tc(E,s,d,O),{u_patternscale_a:[le/Fe,-Ee.height/2],u_patternscale_b:[le/qe,-Ne.height/2],u_sdfgamma:ee.width/(256*Math.min(Fe,qe)*E.pixelRatio)/2,u_image:0,u_tex_y_a:Ee.y,u_tex_y_b:Ne.y,u_mix:S.t})};function Cc(E,s){return 1/ir(E,1,s.tileZoom)}function fd(E,s,d,b){return E.translatePosMatrix(b?b.posMatrix:s.tileID.posMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Bf=(E,s,d,b,S)=>{return{u_matrix:E,u_tl_parent:s,u_scale_parent:d,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(ee=S.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(O=S.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:Ff(S.paint.get("raster-hue-rotate"))};var O,ee};function Ff(E){E*=Math.PI/180;const s=Math.sin(E),d=Math.cos(E);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const jh=(E,s,d,b,S,O,ee,le,de,Ee)=>{const Ne=S.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_pitch:Ne.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:ee,u_coord_matrix:le,u_is_text:+de,u_pitch_with_map:+b,u_texsize:Ee,u_texture:0}},md=(E,s,d,b,S,O,ee,le,de,Ee,Ne)=>{const Fe=S.transform;return n.extend(jh(E,s,d,b,S,O,ee,le,de,Ee),{u_gamma_scale:b?Math.cos(Fe._pitch)*Fe.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Ny=(E,s,d,b,S,O,ee,le,de,Ee)=>n.extend(md(E,s,d,b,S,O,ee,le,!0,de),{u_texsize_icon:Ee,u_texture_icon:1}),Oy=(E,s,d)=>({u_matrix:E,u_opacity:s,u_color:d}),gd=(E,s,d,b,S,O)=>n.extend(function(ee,le,de,Ee){const Ne=de.imageManager.getPattern(ee.from.toString()),Fe=de.imageManager.getPattern(ee.to.toString()),{width:qe,height:tt}=de.imageManager.getPixelSize(),Qe=Math.pow(2,Ee.tileID.overscaledZ),Je=Ee.tileSize*Math.pow(2,de.transform.tileZoom)/Qe,pt=Je*(Ee.tileID.canonical.x+Ee.tileID.wrap*Qe),yt=Je*Ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ne.tl,u_pattern_br_a:Ne.br,u_pattern_tl_b:Fe.tl,u_pattern_br_b:Fe.br,u_texsize:[qe,tt],u_mix:le.t,u_pattern_size_a:Ne.displaySize,u_pattern_size_b:Fe.displaySize,u_scale_a:le.fromScale,u_scale_b:le.toScale,u_tile_units_to_pixels:1/ir(Ee,1,de.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(b,O,d,S),{u_matrix:E,u_opacity:s}),yd={fillExtrusion:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_lightpos:new n.Uniform3f(E,s.u_lightpos),u_lightintensity:new n.Uniform1f(E,s.u_lightintensity),u_lightcolor:new n.Uniform3f(E,s.u_lightcolor),u_vertical_gradient:new n.Uniform1f(E,s.u_vertical_gradient),u_opacity:new n.Uniform1f(E,s.u_opacity)}),fillExtrusionPattern:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_lightpos:new n.Uniform3f(E,s.u_lightpos),u_lightintensity:new n.Uniform1f(E,s.u_lightintensity),u_lightcolor:new n.Uniform3f(E,s.u_lightcolor),u_vertical_gradient:new n.Uniform1f(E,s.u_vertical_gradient),u_height_factor:new n.Uniform1f(E,s.u_height_factor),u_image:new n.Uniform1i(E,s.u_image),u_texsize:new n.Uniform2f(E,s.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,s.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,s.u_scale),u_fade:new n.Uniform1f(E,s.u_fade),u_opacity:new n.Uniform1f(E,s.u_opacity)}),fill:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix)}),fillPattern:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_image:new n.Uniform1i(E,s.u_image),u_texsize:new n.Uniform2f(E,s.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,s.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,s.u_scale),u_fade:new n.Uniform1f(E,s.u_fade)}),fillOutline:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_world:new n.Uniform2f(E,s.u_world)}),fillOutlinePattern:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_world:new n.Uniform2f(E,s.u_world),u_image:new n.Uniform1i(E,s.u_image),u_texsize:new n.Uniform2f(E,s.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,s.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,s.u_scale),u_fade:new n.Uniform1f(E,s.u_fade)}),circle:(E,s)=>({u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(E,s.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(E,s.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(E,s.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(E,s.u_matrix)}),collisionBox:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(E,s.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(E,s.u_extrude_scale),u_overscale_factor:new n.Uniform1f(E,s.u_overscale_factor)}),collisionCircle:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_inv_matrix:new n.UniformMatrix4f(E,s.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(E,s.u_viewport_size)}),debug:(E,s)=>({u_color:new n.UniformColor(E,s.u_color),u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_overlay:new n.Uniform1i(E,s.u_overlay),u_overlay_scale:new n.Uniform1f(E,s.u_overlay_scale)}),clippingMask:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix)}),heatmap:(E,s)=>({u_extrude_scale:new n.Uniform1f(E,s.u_extrude_scale),u_intensity:new n.Uniform1f(E,s.u_intensity),u_matrix:new n.UniformMatrix4f(E,s.u_matrix)}),heatmapTexture:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_world:new n.Uniform2f(E,s.u_world),u_image:new n.Uniform1i(E,s.u_image),u_color_ramp:new n.Uniform1i(E,s.u_color_ramp),u_opacity:new n.Uniform1f(E,s.u_opacity)}),hillshade:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_image:new n.Uniform1i(E,s.u_image),u_latrange:new n.Uniform2f(E,s.u_latrange),u_light:new n.Uniform2f(E,s.u_light),u_shadow:new n.UniformColor(E,s.u_shadow),u_highlight:new n.UniformColor(E,s.u_highlight),u_accent:new n.UniformColor(E,s.u_accent)}),hillshadePrepare:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_image:new n.Uniform1i(E,s.u_image),u_dimension:new n.Uniform2f(E,s.u_dimension),u_zoom:new n.Uniform1f(E,s.u_zoom),u_unpack:new n.Uniform4f(E,s.u_unpack)}),line:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_ratio:new n.Uniform1f(E,s.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,s.u_units_to_pixels)}),lineGradient:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_ratio:new n.Uniform1f(E,s.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,s.u_units_to_pixels),u_image:new n.Uniform1i(E,s.u_image),u_image_height:new n.Uniform1f(E,s.u_image_height)}),linePattern:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_texsize:new n.Uniform2f(E,s.u_texsize),u_ratio:new n.Uniform1f(E,s.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_image:new n.Uniform1i(E,s.u_image),u_units_to_pixels:new n.Uniform2f(E,s.u_units_to_pixels),u_scale:new n.Uniform3f(E,s.u_scale),u_fade:new n.Uniform1f(E,s.u_fade)}),lineSDF:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_ratio:new n.Uniform1f(E,s.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,s.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(E,s.u_patternscale_a),u_patternscale_b:new n.Uniform2f(E,s.u_patternscale_b),u_sdfgamma:new n.Uniform1f(E,s.u_sdfgamma),u_image:new n.Uniform1i(E,s.u_image),u_tex_y_a:new n.Uniform1f(E,s.u_tex_y_a),u_tex_y_b:new n.Uniform1f(E,s.u_tex_y_b),u_mix:new n.Uniform1f(E,s.u_mix)}),raster:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_tl_parent:new n.Uniform2f(E,s.u_tl_parent),u_scale_parent:new n.Uniform1f(E,s.u_scale_parent),u_buffer_scale:new n.Uniform1f(E,s.u_buffer_scale),u_fade_t:new n.Uniform1f(E,s.u_fade_t),u_opacity:new n.Uniform1f(E,s.u_opacity),u_image0:new n.Uniform1i(E,s.u_image0),u_image1:new n.Uniform1i(E,s.u_image1),u_brightness_low:new n.Uniform1f(E,s.u_brightness_low),u_brightness_high:new n.Uniform1f(E,s.u_brightness_high),u_saturation_factor:new n.Uniform1f(E,s.u_saturation_factor),u_contrast_factor:new n.Uniform1f(E,s.u_contrast_factor),u_spin_weights:new n.Uniform3f(E,s.u_spin_weights)}),symbolIcon:(E,s)=>({u_is_size_zoom_constant:new n.Uniform1i(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,s.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,s.u_size_t),u_size:new n.Uniform1f(E,s.u_size),u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,s.u_pitch),u_rotate_symbol:new n.Uniform1i(E,s.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,s.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,s.u_fade_change),u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,s.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,s.u_coord_matrix),u_is_text:new n.Uniform1i(E,s.u_is_text),u_pitch_with_map:new n.Uniform1i(E,s.u_pitch_with_map),u_texsize:new n.Uniform2f(E,s.u_texsize),u_texture:new n.Uniform1i(E,s.u_texture)}),symbolSDF:(E,s)=>({u_is_size_zoom_constant:new n.Uniform1i(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,s.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,s.u_size_t),u_size:new n.Uniform1f(E,s.u_size),u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,s.u_pitch),u_rotate_symbol:new n.Uniform1i(E,s.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,s.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,s.u_fade_change),u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,s.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,s.u_coord_matrix),u_is_text:new n.Uniform1i(E,s.u_is_text),u_pitch_with_map:new n.Uniform1i(E,s.u_pitch_with_map),u_texsize:new n.Uniform2f(E,s.u_texsize),u_texture:new n.Uniform1i(E,s.u_texture),u_gamma_scale:new n.Uniform1f(E,s.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(E,s.u_is_halo)}),symbolTextAndIcon:(E,s)=>({u_is_size_zoom_constant:new n.Uniform1i(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,s.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,s.u_size_t),u_size:new n.Uniform1f(E,s.u_size),u_camera_to_center_distance:new n.Uniform1f(E,s.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,s.u_pitch),u_rotate_symbol:new n.Uniform1i(E,s.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,s.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,s.u_fade_change),u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,s.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,s.u_coord_matrix),u_is_text:new n.Uniform1i(E,s.u_is_text),u_pitch_with_map:new n.Uniform1i(E,s.u_pitch_with_map),u_texsize:new n.Uniform2f(E,s.u_texsize),u_texsize_icon:new n.Uniform2f(E,s.u_texsize_icon),u_texture:new n.Uniform1i(E,s.u_texture),u_texture_icon:new n.Uniform1i(E,s.u_texture_icon),u_gamma_scale:new n.Uniform1f(E,s.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(E,s.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(E,s.u_is_halo)}),background:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_opacity:new n.Uniform1f(E,s.u_opacity),u_color:new n.UniformColor(E,s.u_color)}),backgroundPattern:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_opacity:new n.Uniform1f(E,s.u_opacity),u_image:new n.Uniform1i(E,s.u_image),u_pattern_tl_a:new n.Uniform2f(E,s.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(E,s.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(E,s.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(E,s.u_pattern_br_b),u_texsize:new n.Uniform2f(E,s.u_texsize),u_mix:new n.Uniform1f(E,s.u_mix),u_pattern_size_a:new n.Uniform2f(E,s.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(E,s.u_pattern_size_b),u_scale_a:new n.Uniform1f(E,s.u_scale_a),u_scale_b:new n.Uniform1f(E,s.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,s.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(E,s.u_tile_units_to_pixels)}),terrain:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_texture:new n.Uniform1i(E,s.u_texture)}),terrainDepth:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix)}),terrainCoords:(E,s)=>({u_matrix:new n.UniformMatrix4f(E,s.u_matrix),u_texture:new n.Uniform1i(E,s.u_texture),u_terrain_coords_id:new n.Uniform1f(E,s.u_terrain_coords_id)})};class xd{constructor(s,d,b){this.context=s;const S=s.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Uf{constructor(s,d,b,S){this.length=d.length,this.attributes=b,this.itemSize=d.bytesPerElement,this.dynamicDraw=S,this.context=s;const O=s.gl;this.buffer=O.createBuffer(),s.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let b=0;b<this.attributes.length;b++){const S=d.attributes[this.attributes[b].name];S!==void 0&&s.enableVertexAttribArray(S)}}setVertexAttribPointers(s,d,b){for(let S=0;S<this.attributes.length;S++){const O=this.attributes[S],ee=d.attributes[O.name];ee!==void 0&&s.vertexAttribPointer(ee,O.components,s[bd[O.type]],!1,this.itemSize,O.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ar{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class jy extends Ar{getDefault(){return n.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Sc extends Ar{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class kc extends Ar{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class $f extends Ar{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Ys extends Ar{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class vd extends Ar{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Bh extends Ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Fh extends Ar{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class _d extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class wd extends Ar{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Uh extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class Td extends Ar{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Ed extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class $h extends Ar{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Vf extends Ar{getDefault(){return n.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Gf extends Ar{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class kl extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class By extends Ar{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Fy extends Ar{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Uy extends Ar{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class $y extends Ar{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Vy extends Ar{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Gy extends Ar{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Cd extends Ar{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Vh extends Ar{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Sd extends Ar{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class kd extends Ar{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Al extends Ar{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class Hf extends Ar{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Wf extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Ad extends Ar{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class xo extends Ar{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class qf extends xo{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ml extends xo{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Pl{constructor(s,d,b,S){this.context=s,this.width=d,this.height=b;const O=s.gl,ee=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new qf(s,ee),S&&(this.depthAttachment=new Ml(s,ee)),O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const b=this.depthAttachment.get();b&&s.deleteRenderbuffer(b)}s.deleteFramebuffer(this.framebuffer)}}class yn{constructor(s,d,b){this.blendFunction=s,this.blendColor=d,this.mask=b}}yn.Replace=[1,0],yn.disabled=new yn(yn.Replace,n.Color.transparent,[!1,!1,!1,!1]),yn.unblended=new yn(yn.Replace,n.Color.transparent,[!0,!0,!0,!0]),yn.alphaBlended=new yn([1,771],n.Color.transparent,[!0,!0,!0,!0]);class Md{constructor(s){this.gl=s,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new jy(this),this.clearDepth=new Sc(this),this.clearStencil=new kc(this),this.colorMask=new $f(this),this.depthMask=new Ys(this),this.stencilMask=new vd(this),this.stencilFunc=new Bh(this),this.stencilOp=new Fh(this),this.stencilTest=new _d(this),this.depthRange=new wd(this),this.depthTest=new Uh(this),this.depthFunc=new Td(this),this.blend=new Ed(this),this.blendFunc=new $h(this),this.blendColor=new Vf(this),this.blendEquation=new Gf(this),this.cullFace=new kl(this),this.cullFaceSide=new By(this),this.frontFace=new Fy(this),this.program=new Uy(this),this.activeTexture=new $y(this),this.viewport=new Vy(this),this.bindFramebuffer=new Gy(this),this.bindRenderbuffer=new Cd(this),this.bindTexture=new Vh(this),this.bindVertexBuffer=new Sd(this),this.bindElementBuffer=new kd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Al(this),this.pixelStoreUnpack=new Hf(this),this.pixelStoreUnpackPremultiplyAlpha=new Wf(this),this.pixelStoreUnpackFlipY=new Ad(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=s.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(s.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new xd(this,s,d)}createVertexBuffer(s,d,b){return new Uf(this,s,d,b)}createRenderbuffer(s,d,b){const S=this.gl,O=S.createRenderbuffer();return this.bindRenderbuffer.set(O),S.renderbufferStorage(S.RENDERBUFFER,s,d,b),this.bindRenderbuffer.set(null),O}createFramebuffer(s,d,b){return new Pl(this,s,d,b)}clear({color:s,depth:d}){const b=this.gl;let S=0;s&&(S|=b.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(S|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),b.clear(S)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){v(s.blendFunction,yn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ti{constructor(s,d,b){this.func=s,this.mask=d,this.range=b}}Ti.ReadOnly=!1,Ti.ReadWrite=!0,Ti.disabled=new Ti(519,Ti.ReadOnly,[0,1]);const Il=7680;class un{constructor(s,d,b,S,O,ee){this.test=s,this.ref=d,this.mask=b,this.fail=S,this.depthFail=O,this.pass=ee}}un.disabled=new un({func:519,mask:0},0,0,Il,Il,Il);class Qr{constructor(s,d,b){this.enable=s,this.mode=d,this.frontFace=b}}let bo;function Yf(E,s,d,b,S,O,ee){const le=E.context,de=le.gl,Ee=E.useProgram("collisionBox"),Ne=[];let Fe=0,qe=0;for(let at=0;at<b.length;at++){const At=b[at],Et=s.getTile(At),Nt=Et.getBucket(d);if(!Nt)continue;let Ot=At.posMatrix;S[0]===0&&S[1]===0||(Ot=E.translatePosMatrix(At.posMatrix,Et,S,O));const $t=ee?Nt.textCollisionBox:Nt.iconCollisionBox,Lt=Nt.collisionCircleArray;if(Lt.length>0){const ai=n.create(),Zt=Ot;n.mul(ai,Nt.placementInvProjMatrix,E.transform.glCoordMatrix),n.mul(ai,ai,Nt.placementViewportMatrix),Ne.push({circleArray:Lt,circleOffset:qe,transform:Zt,invTransform:ai,coord:At}),Fe+=Lt.length/4,qe=Fe}$t&&Ee.draw(le,de.LINES,Ti.disabled,un.disabled,E.colorModeForRenderPass(),Qr.disabled,Lh(Ot,E.transform,Et),E.style.terrain&&E.style.terrain.getTerrainData(At),d.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,E.transform.zoom,null,null,$t.collisionVertexBuffer)}if(!ee||!Ne.length)return;const tt=E.useProgram("collisionCircle"),Qe=new n.CollisionCircleLayoutArray;Qe.resize(4*Fe),Qe._trim();let Je=0;for(const at of Ne)for(let At=0;At<at.circleArray.length/4;At++){const Et=4*At,Nt=at.circleArray[Et+0],Ot=at.circleArray[Et+1],$t=at.circleArray[Et+2],Lt=at.circleArray[Et+3];Qe.emplace(Je++,Nt,Ot,$t,Lt,0),Qe.emplace(Je++,Nt,Ot,$t,Lt,1),Qe.emplace(Je++,Nt,Ot,$t,Lt,2),Qe.emplace(Je++,Nt,Ot,$t,Lt,3)}(!bo||bo.length<2*Fe)&&(bo=function(at){const At=2*at,Et=new n.QuadTriangleArray;Et.resize(At),Et._trim();for(let Nt=0;Nt<At;Nt++){const Ot=6*Nt;Et.uint16[Ot+0]=4*Nt+0,Et.uint16[Ot+1]=4*Nt+1,Et.uint16[Ot+2]=4*Nt+2,Et.uint16[Ot+3]=4*Nt+2,Et.uint16[Ot+4]=4*Nt+3,Et.uint16[Ot+5]=4*Nt+0}return Et}(Fe));const pt=le.createIndexBuffer(bo,!0),yt=le.createVertexBuffer(Qe,n.collisionCircleLayout.members,!0);for(const at of Ne){const At={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(_t=E.transform).cameraToCenterDistance,u_viewport_size:[_t.width,_t.height]};tt.draw(le,de.TRIANGLES,Ti.disabled,un.disabled,E.colorModeForRenderPass(),Qr.disabled,At,E.style.terrain&&E.style.terrain.getTerrainData(at.coord),d.id,yt,pt,n.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,E.transform.zoom,null,null,null)}var _t;yt.destroy(),pt.destroy()}Qr.disabled=new Qr(!1,1029,2305),Qr.backCCW=new Qr(!0,1029,2305);const Hy=n.identity(new Float32Array(16));function Zf(E,s,d,b,S,O){const{horizontalAlign:ee,verticalAlign:le}=n.getAnchorAlignment(E),de=-(ee-.5)*s,Ee=-(le-.5)*d,Ne=n.evaluateVariableOffset(E,b);return new n.pointGeometry((de/S+Ne[0])*O,(Ee/S+Ne[1])*O)}function Wy(E,s,d,b,S,O,ee,le,de,Ee,Ne){const Fe=E.text.placedSymbolArray,qe=E.text.dynamicLayoutVertexArray,tt=E.icon.dynamicLayoutVertexArray,Qe={};qe.clear();for(let Je=0;Je<Fe.length;Je++){const pt=Fe.get(Je),yt=E.allowVerticalPlacement&&!pt.placedOrientation,_t=pt.hidden||!pt.crossTileID||yt?null:b[pt.crossTileID];if(_t){const at=new n.pointGeometry(pt.anchorX,pt.anchorY),At=dt(at,d?ee:O,Ne),Et=gt(S.cameraToCenterDistance,At.signedDistanceFromCamera);let Nt=n.evaluateSizeForFeature(E.textSizeData,de,pt)*Et/n.ONE_EM;d&&(Nt*=E.tilePixelRatio/le);const{width:Ot,height:$t,anchor:Lt,textOffset:ai,textBoxScale:Zt}=_t,li=Zf(Lt,Ot,$t,ai,Zt,Nt),Xi=d?dt(at.add(li),O,Ne).point:At.point.add(s?li.rotate(-S.angle):li),or=E.allowVerticalPlacement&&pt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0;for(let Ii=0;Ii<pt.numGlyphs;Ii++)n.addDynamicAttributes(qe,Xi,or);Ee&&pt.associatedIconIndex>=0&&(Qe[pt.associatedIconIndex]={shiftedAnchor:Xi,angle:or})}else ar(pt.numGlyphs,qe)}if(Ee){tt.clear();const Je=E.icon.placedSymbolArray;for(let pt=0;pt<Je.length;pt++){const yt=Je.get(pt);if(yt.hidden)ar(yt.numGlyphs,tt);else{const _t=Qe[pt];if(_t)for(let at=0;at<yt.numGlyphs;at++)n.addDynamicAttributes(tt,_t.shiftedAnchor,_t.angle);else ar(yt.numGlyphs,tt)}}E.icon.dynamicLayoutVertexBuffer.updateData(tt)}E.text.dynamicLayoutVertexBuffer.updateData(qe)}function Pd(E,s,d){return d.iconsInText&&s?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Ac(E,s,d,b,S,O,ee,le,de,Ee,Ne,Fe){const qe=E.context,tt=qe.gl,Qe=E.transform,Je=le==="map",pt=de==="map",yt=le!=="viewport"&&d.layout.get("symbol-placement")!=="point",_t=Je&&!pt&&!yt,at=!d.layout.get("symbol-sort-key").isConstant();let At=!1;const Et=E.depthModeForSublayer(0,Ti.ReadOnly),Nt=d.layout.get("text-variable-anchor"),Ot=[];for(const $t of b){const Lt=s.getTile($t),ai=Lt.getBucket(d);if(!ai)continue;const Zt=S?ai.text:ai.icon;if(!Zt||!Zt.segments.get().length)continue;const li=Zt.programConfigurations.get(d.id),Xi=S||ai.sdfIcons,or=S?ai.textSizeData:ai.iconSizeData,Ii=pt||Qe.pitch!==0,Or=E.useProgram(Pd(Xi,S,ai),li),jr=n.evaluateSizeForZoom(or,Qe.zoom),xr=E.style.terrain&&E.style.terrain.getTerrainData($t);let vr,Tr,Xs,Ga,Sa=[0,0],ka=null;if(S){if(Tr=Lt.glyphAtlasTexture,Xs=tt.LINEAR,vr=Lt.glyphAtlasTexture.size,ai.iconsInText){Sa=Lt.imageAtlasTexture.size,ka=Lt.imageAtlasTexture;const ya=or.kind==="composite"||or.kind==="camera";Ga=Ii||E.options.rotating||E.options.zooming||ya?tt.LINEAR:tt.NEAREST}}else{const ya=d.layout.get("icon-size").constantOr(0)!==1||ai.iconsNeedLinear;Tr=Lt.imageAtlasTexture,Xs=Xi||E.options.rotating||E.options.zooming||ya||Ii?tt.LINEAR:tt.NEAREST,vr=Lt.imageAtlasTexture.size}const el=ir(Lt,1,E.transform.zoom),is=et($t.posMatrix,pt,Je,E.transform,el),Aa=rt($t.posMatrix,pt,Je,E.transform,el),tl=Nt&&ai.hasTextData(),nu=d.layout.get("icon-text-fit")!=="none"&&tl&&ai.hasIconData();if(yt){const ya=E.style.terrain?(Ol,su)=>E.style.terrain.getElevation($t,Ol,su):null,Nl=d.layout.get("text-rotation-alignment")==="map";Rt(ai,$t.posMatrix,E,S,is,Aa,pt,Ee,Nl,ya)}const Er=E.translatePosMatrix($t.posMatrix,Lt,O,ee),en=yt||S&&Nt||nu?Hy:is,Sr=E.translatePosMatrix(Aa,Lt,O,ee,!0),Ln=Xi&&d.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Bs;Bs=Xi?ai.iconsInText?Ny(or.kind,jr,_t,pt,E,Er,en,Sr,vr,Sa):md(or.kind,jr,_t,pt,E,Er,en,Sr,S,vr):jh(or.kind,jr,_t,pt,E,Er,en,Sr,S,vr);const an={program:Or,buffers:Zt,uniformValues:Bs,atlasTexture:Tr,atlasTextureIcon:ka,atlasInterpolation:Xs,atlasInterpolationIcon:Ga,isSDF:Xi,hasHalo:Ln};if(at&&ai.canOverlap){At=!0;const ya=Zt.segments.get();for(const Nl of ya)Ot.push({segments:new n.SegmentVector([Nl]),sortKey:Nl.sortKey,state:an,terrainData:xr})}else Ot.push({segments:Zt.segments,sortKey:0,state:an,terrainData:xr})}At&&Ot.sort(($t,Lt)=>$t.sortKey-Lt.sortKey);for(const $t of Ot){const Lt=$t.state;if(qe.activeTexture.set(tt.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,tt.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(qe.activeTexture.set(tt.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,tt.CLAMP_TO_EDGE)),Lt.isSDF){const ai=Lt.uniformValues;Lt.hasHalo&&(ai.u_is_halo=1,Mc(Lt.buffers,$t.segments,d,E,Lt.program,Et,Ne,Fe,ai,$t.terrainData)),ai.u_is_halo=0}Mc(Lt.buffers,$t.segments,d,E,Lt.program,Et,Ne,Fe,Lt.uniformValues,$t.terrainData)}}function Mc(E,s,d,b,S,O,ee,le,de,Ee){const Ne=b.context;S.draw(Ne,Ne.gl.TRIANGLES,O,ee,le,Qr.disabled,de,Ee,d.id,E.layoutVertexBuffer,E.indexBuffer,s,d.paint,b.transform.zoom,E.programConfigurations.get(d.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Gh(E,s,d,b,S,O,ee){const le=E.context.gl,de=d.paint.get("fill-pattern"),Ee=de&&de.constantOr(1),Ne=d.getCrossfadeParameters();let Fe,qe,tt,Qe,Je;ee?(qe=Ee&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Fe=le.LINES):(qe=Ee?"fillPattern":"fill",Fe=le.TRIANGLES);for(const pt of b){const yt=s.getTile(pt);if(Ee&&!yt.patternsLoaded())continue;const _t=yt.getBucket(d);if(!_t)continue;const at=_t.programConfigurations.get(d.id),At=E.useProgram(qe,at),Et=E.style.terrain&&E.style.terrain.getTerrainData(pt);Ee&&(E.context.activeTexture.set(le.TEXTURE0),yt.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),at.updatePaintBuffers(Ne));const Nt=de.constantOr(null);if(Nt&&yt.imageAtlas){const Lt=yt.imageAtlas,ai=Lt.patternPositions[Nt.to.toString()],Zt=Lt.patternPositions[Nt.from.toString()];ai&&Zt&&at.setConstantPatternPositions(ai,Zt)}const Ot=Et?pt:null,$t=E.translatePosMatrix(Ot?Ot.posMatrix:pt.posMatrix,yt,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(ee){Qe=_t.indexBuffer2,Je=_t.segments2;const Lt=[le.drawingBufferWidth,le.drawingBufferHeight];tt=qe==="fillOutlinePattern"&&Ee?jf($t,E,Ne,yt,Lt):Of($t,Lt)}else Qe=_t.indexBuffer,Je=_t.segments,tt=Ee?pd($t,E,Ne,yt):dd($t);At.draw(E.context,Fe,S,E.stencilModeForClipping(pt),O,Qr.disabled,tt,Et,d.id,_t.layoutVertexBuffer,Qe,Je,d.paint,E.transform.zoom,at)}}function Pc(E,s,d,b,S,O,ee){const le=E.context,de=le.gl,Ee=d.paint.get("fill-extrusion-pattern"),Ne=Ee.constantOr(1),Fe=d.getCrossfadeParameters(),qe=d.paint.get("fill-extrusion-opacity");for(const tt of b){const Qe=s.getTile(tt),Je=Qe.getBucket(d);if(!Je)continue;const pt=E.style.terrain&&E.style.terrain.getTerrainData(tt),yt=Je.programConfigurations.get(d.id),_t=E.useProgram(Ne?"fillExtrusionPattern":"fillExtrusion",yt);Ne&&(E.context.activeTexture.set(de.TEXTURE0),Qe.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),yt.updatePaintBuffers(Fe));const at=Ee.constantOr(null);if(at&&Qe.imageAtlas){const Ot=Qe.imageAtlas,$t=Ot.patternPositions[at.to.toString()],Lt=Ot.patternPositions[at.from.toString()];$t&&Lt&&yt.setConstantPatternPositions($t,Lt)}const At=E.translatePosMatrix(tt.posMatrix,Qe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Et=d.paint.get("fill-extrusion-vertical-gradient"),Nt=Ne?ud(At,E,Et,qe,tt,Fe,Qe):Nf(At,E,Et,qe);_t.draw(le,le.gl.TRIANGLES,S,O,ee,Qr.backCCW,Nt,pt,d.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,d.paint,E.transform.zoom,yt,E.style.terrain&&Je.centroidVertexBuffer)}}function Xf(E,s,d,b,S,O,ee){const le=E.context,de=le.gl,Ee=d.fbo;if(!Ee)return;const Ne=E.useProgram("hillshade"),Fe=E.style.terrain&&E.style.terrain.getTerrainData(s);le.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ee.colorAttachment.get()),Ne.draw(le,de.TRIANGLES,S,O,ee,Qr.disabled,((qe,tt,Qe,Je)=>{const pt=Qe.paint.get("hillshade-shadow-color"),yt=Qe.paint.get("hillshade-highlight-color"),_t=Qe.paint.get("hillshade-accent-color");let at=Qe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Qe.paint.get("hillshade-illumination-anchor")==="viewport"&&(at-=qe.transform.angle);const At=!qe.options.moving;return{u_matrix:Je?Je.posMatrix:qe.transform.calculatePosMatrix(tt.tileID.toUnwrapped(),At),u_image:0,u_latrange:Nh(0,tt.tileID),u_light:[Qe.paint.get("hillshade-exaggeration"),at],u_shadow:pt,u_highlight:yt,u_accent:_t}})(E,d,b,Fe?s:null),Fe,b.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function Hh(E,s,d,b,S,O){const ee=E.context,le=ee.gl,de=s.dem;if(de&&de.data){const Ee=de.dim,Ne=de.stride,Fe=de.getPixels();if(ee.activeTexture.set(le.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||E.getTileTexture(Ne),s.demTexture){const tt=s.demTexture;tt.update(Fe,{premultiply:!1}),tt.bind(le.NEAREST,le.CLAMP_TO_EDGE)}else s.demTexture=new T(ee,Fe,le.RGBA,{premultiply:!1}),s.demTexture.bind(le.NEAREST,le.CLAMP_TO_EDGE);ee.activeTexture.set(le.TEXTURE0);let qe=s.fbo;if(!qe){const tt=new T(ee,{width:Ee,height:Ee,data:null},le.RGBA);tt.bind(le.LINEAR,le.CLAMP_TO_EDGE),qe=s.fbo=ee.createFramebuffer(Ee,Ee,!0),qe.colorAttachment.set(tt.texture)}ee.bindFramebuffer.set(qe.framebuffer),ee.viewport.set([0,0,Ee,Ee]),E.useProgram("hillshadePrepare").draw(ee,le.TRIANGLES,b,S,O,Qr.disabled,((tt,Qe)=>{const Je=Qe.stride,pt=n.create();return n.ortho(pt,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(pt,pt,[0,-n.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[Je,Je],u_zoom:tt.overscaledZ,u_unpack:Qe.getUnpackVector()}})(s.tileID,de),null,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Wh(E,s,d,b,S,O){const ee=b.paint.get("raster-fade-duration");if(!O&&ee>0){const le=n.exported.now(),de=(le-E.timeAdded)/ee,Ee=s?(le-s.timeAdded)/ee:-1,Ne=d.getSource(),Fe=S.coveringZoomLevel({tileSize:Ne.tileSize,roundZoom:Ne.roundZoom}),qe=!s||Math.abs(s.tileID.overscaledZ-Fe)>Math.abs(E.tileID.overscaledZ-Fe),tt=qe&&E.refreshedUponExpiration?1:n.clamp(qe?de:1-Ee,0,1);return E.refreshedUponExpiration&&de>=1&&(E.refreshedUponExpiration=!1),s?{opacity:1,mix:1-tt}:{opacity:tt,mix:0}}return{opacity:1,mix:0}}const Ca=new n.Color(1,0,0,1),Kf=new n.Color(0,1,0,1),Id=new n.Color(0,0,1,1),Qf=new n.Color(1,0,1,1),Dl=new n.Color(0,1,1,1);function Ic(E,s,d,b){Yh(E,0,s+d/2,E.transform.width,d,b)}function qh(E,s,d,b){Yh(E,s-d/2,0,d,E.transform.height,b)}function Yh(E,s,d,b,S,O){const ee=E.context,le=ee.gl;le.enable(le.SCISSOR_TEST),le.scissor(s*E.pixelRatio,d*E.pixelRatio,b*E.pixelRatio,S*E.pixelRatio),ee.clear({color:O}),le.disable(le.SCISSOR_TEST)}function Dd(E,s,d){const b=E.context,S=b.gl,O=d.posMatrix,ee=E.useProgram("debug"),le=Ti.disabled,de=un.disabled,Ee=E.colorModeForRenderPass(),Ne="$debug",Fe=E.style.terrain&&E.style.terrain.getTerrainData(d);b.activeTexture.set(S.TEXTURE0),E.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE);const qe=s.getTileByID(d.key).latestRawTileData,tt=Math.floor((qe&&qe.byteLength||0)/1024),Qe=s.getTile(d).tileSize,Je=512/Math.min(Qe,512)*(d.overscaledZ/E.transform.zoom)*.5;let pt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(pt+=` => ${d.overscaledZ}`),function(yt,_t){yt.initDebugOverlayCanvas();const at=yt.debugOverlayCanvas,At=yt.context.gl,Et=yt.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,at.width,at.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(_t,5,5),Et.strokeText(_t,5,5),yt.debugOverlayTexture.update(at),yt.debugOverlayTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE)}(E,`${pt} ${tt}kB`),ee.draw(b,S.TRIANGLES,le,de,yn.alphaBlended,Qr.disabled,Sl(O,n.Color.transparent,Je),null,Ne,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),ee.draw(b,S.LINE_STRIP,le,de,Ee,Qr.disabled,Sl(O,n.Color.red),Fe,Ne,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function Jf(E,s,d){const b=E.context,S=b.gl,O=E.colorModeForRenderPass(),ee=new Ti(S.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D),le=E.useProgram("terrain"),de=s.getTerrainMesh(),Ee=s.getTerrainData(d.tileID);b.bindFramebuffer.set(null),b.viewport.set([0,0,E.width,E.height]),b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,s.getRTTFramebuffer().colorAttachment.get());const Ne=E.transform.calculatePosMatrix(d.tileID.toUnwrapped());le.draw(b,S.TRIANGLES,ee,un.disabled,O,Qr.backCCW,{u_matrix:Ne,u_texture:0},Ee,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}function Rd(E,s,d,b){const S=E.context,O=d.tileSize*s.qualityFactor;d.textures[b]||(d.textures[b]=E.getTileTexture(O)||new T(S,{width:O,height:O,data:null},S.gl.RGBA),d.textures[b].bind(S.gl.LINEAR,S.gl.CLAMP_TO_EDGE),b===0&&s.sourceCache.renderHistory.unshift(d.tileID.key));const ee=s.getRTTFramebuffer();ee.colorAttachment.set(d.textures[b].texture),S.bindFramebuffer.set(ee.framebuffer),S.viewport.set([0,0,O,O])}class Zh{constructor(s){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=s,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=s.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const s=this.painter.style,d=s.terrain;for(const b in s.sourceCaches){this._coordsDescendingInv[b]={};const S=s.sourceCaches[b].getVisibleCoordinates();for(const O of S){const ee=d.sourceCache.getTerrainCoords(O);for(const le in ee)this._coordsDescendingInv[b][le]||(this._coordsDescendingInv[b][le]=[]),this._coordsDescendingInv[b][le].push(ee[le])}}for(const b of s._order){const S=s._layers[b],O=S.source;if(this._renderToTexture[S.type]&&!this._coordsDescendingInvStr[O]){this._coordsDescendingInvStr[O]={};for(const ee in this._coordsDescendingInv[O])this._coordsDescendingInvStr[O][ee]=this._coordsDescendingInv[O][ee].map(le=>le.key).sort().join()}}return this._renderableTiles.forEach(b=>{for(const S in this._coordsDescendingInvStr){const O=this._coordsDescendingInvStr[S][b.tileID.key];O&&O!==b.textureCoords[S]&&b.clearTextures(this.painter),d.needsRerender(S,b.tileID)&&b.clearTextures(this.painter)}this._rerender[b.tileID.key]=!b.textures.length}),d.clearRerenderCache(),d.sourceCache.removeOutdated(this.painter),this}renderLayer(s){const d=s.type,b=this.painter,S=b.style._order,O=b.currentLayer,ee=O+1===S.length;if(this._renderToTexture[d]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(S[O]),!ee))return!0;if(this._renderToTexture[this._prevType]||d==="hillshade"||this._renderToTexture[d]&&ee){this._prevType=d;const le=this._stacks.length-1,de=this._stacks[le]||[];for(const Ee of this._renderableTiles){if(Rd(b,b.style.terrain,Ee,le),this._rerender[Ee.tileID.key]){b.context.clear({color:n.Color.transparent});for(let Ne=0;Ne<de.length;Ne++){const Fe=b.style._layers[de[Ne]],qe=Fe.source?this._coordsDescendingInv[Fe.source][Ee.tileID.key]:[Ee.tileID];b._renderTileClippingMasks(Fe,qe),b.renderLayer(b,b.style.sourceCaches[Fe.source],Fe,qe),Fe.source&&(Ee.textureCoords[Fe.source]=this._coordsDescendingInvStr[Fe.source][Ee.tileID.key])}}Jf(b,b.style.terrain,Ee)}if(d==="hillshade"){this._stacks.push([S[O]]);for(const Ee of this._renderableTiles){const Ne=this._coordsDescendingInv[s.source][Ee.tileID.key];Rd(b,b.style.terrain,Ee,this._stacks.length-1),b.context.clear({color:n.Color.transparent}),b._renderTileClippingMasks(s,Ne),b.renderLayer(b,b.style.sourceCaches[s.source],s,Ne),Jf(b,b.style.terrain,Ee)}return!0}return this._renderToTexture[d]}return!1}}const Xh={symbol:function(E,s,d,b,S){if(E.renderPass!=="translucent")return;const O=un.disabled,ee=E.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(le,de,Ee,Ne,Fe,qe,tt){const Qe=de.transform,Je=Fe==="map",pt=qe==="map";for(const yt of le){const _t=Ne.getTile(yt),at=_t.getBucket(Ee);if(!at||!at.text||!at.text.segments.get().length)continue;const At=n.evaluateSizeForZoom(at.textSizeData,Qe.zoom),Et=ir(_t,1,de.transform.zoom),Nt=et(yt.posMatrix,pt,Je,de.transform,Et),Ot=Ee.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(At){const $t=Math.pow(2,Qe.zoom-_t.tileID.overscaledZ);Wy(at,Je,pt,tt,Qe,Nt,yt.posMatrix,$t,At,Ot,de.style.terrain?(Lt,ai)=>de.style.terrain.getElevation(yt,Lt,ai):null)}}}(b,E,d,s,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),S),d.paint.get("icon-opacity").constantOr(1)!==0&&Ac(E,s,d,b,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),O,ee),d.paint.get("text-opacity").constantOr(1)!==0&&Ac(E,s,d,b,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),O,ee),s.map.showCollisionBoxes&&(Yf(E,s,d,b,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Yf(E,s,d,b,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(E,s,d,b){if(E.renderPass!=="translucent")return;const S=d.paint.get("circle-opacity"),O=d.paint.get("circle-stroke-width"),ee=d.paint.get("circle-stroke-opacity"),le=!d.layout.get("circle-sort-key").isConstant();if(S.constantOr(1)===0&&(O.constantOr(1)===0||ee.constantOr(1)===0))return;const de=E.context,Ee=de.gl,Ne=E.depthModeForSublayer(0,Ti.ReadOnly),Fe=un.disabled,qe=E.colorModeForRenderPass(),tt=[];for(let Qe=0;Qe<b.length;Qe++){const Je=b[Qe],pt=s.getTile(Je),yt=pt.getBucket(d);if(!yt)continue;const _t=yt.programConfigurations.get(d.id),at=E.useProgram("circle",_t),At=yt.layoutVertexBuffer,Et=yt.indexBuffer,Nt=E.style.terrain&&E.style.terrain.getTerrainData(Je),Ot={programConfiguration:_t,program:at,layoutVertexBuffer:At,indexBuffer:Et,uniformValues:qo(E,Je,pt,d),terrainData:Nt};if(le){const $t=yt.segments.get();for(const Lt of $t)tt.push({segments:new n.SegmentVector([Lt]),sortKey:Lt.sortKey,state:Ot})}else tt.push({segments:yt.segments,sortKey:0,state:Ot})}le&&tt.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of tt){const{programConfiguration:Je,program:pt,layoutVertexBuffer:yt,indexBuffer:_t,uniformValues:at,terrainData:At}=Qe.state;pt.draw(de,Ee.TRIANGLES,Ne,Fe,qe,Qr.disabled,at,At,d.id,yt,_t,Qe.segments,d.paint,E.transform.zoom,Je)}},heatmap:function(E,s,d,b){if(d.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){const S=E.context,O=S.gl,ee=un.disabled,le=new yn([O.ONE,O.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(de,Ee,Ne){const Fe=de.gl;de.activeTexture.set(Fe.TEXTURE1),de.viewport.set([0,0,Ee.width/4,Ee.height/4]);let qe=Ne.heatmapFbo;if(qe)Fe.bindTexture(Fe.TEXTURE_2D,qe.colorAttachment.get()),de.bindFramebuffer.set(qe.framebuffer);else{const tt=Fe.createTexture();Fe.bindTexture(Fe.TEXTURE_2D,tt),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_WRAP_S,Fe.CLAMP_TO_EDGE),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_WRAP_T,Fe.CLAMP_TO_EDGE),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_MIN_FILTER,Fe.LINEAR),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_MAG_FILTER,Fe.LINEAR),qe=Ne.heatmapFbo=de.createFramebuffer(Ee.width/4,Ee.height/4,!1),function(Qe,Je,pt,yt){const _t=Qe.gl;_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,Je.width/4,Je.height/4,0,_t.RGBA,Qe.extRenderToTextureHalfFloat?Qe.extTextureHalfFloat.HALF_FLOAT_OES:_t.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(de,Ee,tt,qe)}})(S,E,d),S.clear({color:n.Color.transparent});for(let de=0;de<b.length;de++){const Ee=b[de];if(s.hasRenderableParent(Ee))continue;const Ne=s.getTile(Ee),Fe=Ne.getBucket(d);if(!Fe)continue;const qe=Fe.programConfigurations.get(d.id),tt=E.useProgram("heatmap",qe),{zoom:Qe}=E.transform;tt.draw(S,O.TRIANGLES,Ti.disabled,ee,le,Qr.disabled,zh(Ee.posMatrix,Ne,Qe,d.paint.get("heatmap-intensity")),null,d.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,d.paint,E.transform.zoom,qe)}S.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(S,O){const ee=S.context,le=ee.gl,de=O.heatmapFbo;if(!de)return;ee.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,de.colorAttachment.get()),ee.activeTexture.set(le.TEXTURE1);let Ee=O.colorRampTexture;Ee||(Ee=O.colorRampTexture=new T(ee,O.colorRamp,le.RGBA)),Ee.bind(le.LINEAR,le.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(ee,le.TRIANGLES,Ti.disabled,un.disabled,S.colorModeForRenderPass(),Qr.disabled,((Ne,Fe,qe,tt)=>{const Qe=n.create();n.ortho(Qe,0,Ne.width,Ne.height,0,0,1);const Je=Ne.context.gl;return{u_matrix:Qe,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Fe.paint.get("heatmap-opacity")}})(S,O),null,O.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,O.paint,S.transform.zoom)}(E,d))},line:function(E,s,d,b){if(E.renderPass!=="translucent")return;const S=d.paint.get("line-opacity"),O=d.paint.get("line-width");if(S.constantOr(1)===0||O.constantOr(1)===0)return;const ee=E.depthModeForSublayer(0,Ti.ReadOnly),le=E.colorModeForRenderPass(),de=d.paint.get("line-dasharray"),Ee=d.paint.get("line-pattern"),Ne=Ee.constantOr(1),Fe=d.paint.get("line-gradient"),qe=d.getCrossfadeParameters(),tt=Ne?"linePattern":de?"lineSDF":Fe?"lineGradient":"line",Qe=E.context,Je=Qe.gl;let pt=!0;for(const yt of b){const _t=s.getTile(yt);if(Ne&&!_t.patternsLoaded())continue;const at=_t.getBucket(d);if(!at)continue;const At=at.programConfigurations.get(d.id),Et=E.context.program.get(),Nt=E.useProgram(tt,At),Ot=pt||Nt.program!==Et,$t=E.style.terrain&&E.style.terrain.getTerrainData(yt),Lt=Ee.constantOr(null);if(Lt&&_t.imageAtlas){const li=_t.imageAtlas,Xi=li.patternPositions[Lt.to.toString()],or=li.patternPositions[Lt.from.toString()];Xi&&or&&At.setConstantPatternPositions(Xi,or)}const ai=$t?yt:null,Zt=Ne?Ec(E,_t,d,qe,ai):de?hn(E,_t,d,de,qe,ai):Fe?Oh(E,_t,d,at.lineClipsArray.length,ai):Tc(E,_t,d,ai);if(Ne)Qe.activeTexture.set(Je.TEXTURE0),_t.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),At.updatePaintBuffers(qe);else if(de&&(Ot||E.lineAtlas.dirty))Qe.activeTexture.set(Je.TEXTURE0),E.lineAtlas.bind(Qe);else if(Fe){const li=at.gradients[d.id];let Xi=li.texture;if(d.gradientVersion!==li.version){let or=256;if(d.stepInterpolant){const Ii=s.getSource().maxzoom,Or=yt.canonical.z===Ii?Math.ceil(1<<E.transform.maxZoom-yt.canonical.z):1;or=n.clamp(n.nextPowerOfTwo(at.maxLineLength/n.EXTENT*1024*Or),256,Qe.maxTextureSize)}li.gradient=n.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:or,image:li.gradient||void 0,clips:at.lineClipsArray}),li.texture?li.texture.update(li.gradient):li.texture=new T(Qe,li.gradient,Je.RGBA),li.version=d.gradientVersion,Xi=li.texture}Qe.activeTexture.set(Je.TEXTURE0),Xi.bind(d.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}Nt.draw(Qe,Je.TRIANGLES,ee,E.stencilModeForClipping(yt),le,Qr.disabled,Zt,$t,d.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,d.paint,E.transform.zoom,At,at.layoutVertexBuffer2),pt=!1}},fill:function(E,s,d,b){const S=d.paint.get("fill-color"),O=d.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const ee=E.colorModeForRenderPass(),le=d.paint.get("fill-pattern"),de=E.opaquePassEnabledForLayer()&&!le.constantOr(1)&&S.constantOr(n.Color.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===de){const Ee=E.depthModeForSublayer(1,E.renderPass==="opaque"?Ti.ReadWrite:Ti.ReadOnly);Gh(E,s,d,b,Ee,ee,!1)}if(E.renderPass==="translucent"&&d.paint.get("fill-antialias")){const Ee=E.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,Ti.ReadOnly);Gh(E,s,d,b,Ee,ee,!0)}},"fill-extrusion":function(E,s,d,b){const S=d.paint.get("fill-extrusion-opacity");if(S!==0&&E.renderPass==="translucent"){const O=new Ti(E.context.gl.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D);if(S!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))Pc(E,s,d,b,O,un.disabled,yn.disabled),Pc(E,s,d,b,O,E.stencilModeFor3D(),E.colorModeForRenderPass());else{const ee=E.colorModeForRenderPass();Pc(E,s,d,b,O,un.disabled,ee)}}},hillshade:function(E,s,d,b){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const S=E.context,O=E.depthModeForSublayer(0,Ti.ReadOnly),ee=E.colorModeForRenderPass(),[le,de]=E.renderPass==="translucent"?E.stencilConfigForOverlap(b):[{},b];for(const Ee of de){const Ne=s.getTile(Ee);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&E.renderPass==="offscreen"?Hh(E,Ne,d,O,un.disabled,ee):E.renderPass==="translucent"&&Xf(E,Ee,Ne,d,O,le[Ee.overscaledZ],ee)}S.viewport.set([0,0,E.width,E.height])},raster:function(E,s,d,b){if(E.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!b.length)return;const S=E.context,O=S.gl,ee=s.getSource(),le=E.useProgram("raster"),de=E.colorModeForRenderPass(),[Ee,Ne]=ee instanceof H?[{},b]:E.stencilConfigForOverlap(b),Fe=Ne[Ne.length-1].overscaledZ,qe=!E.options.moving;for(const tt of Ne){const Qe=E.depthModeForSublayer(tt.overscaledZ-Fe,d.paint.get("raster-opacity")===1?Ti.ReadWrite:Ti.ReadOnly,O.LESS),Je=s.getTile(tt);Je.registerFadeDuration(d.paint.get("raster-fade-duration"));const pt=s.findLoadedParent(tt,0),yt=Wh(Je,pt,s,d,E.transform,E.style.terrain);let _t,at;const At=d.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;S.activeTexture.set(O.TEXTURE0),Je.texture.bind(At,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(O.TEXTURE1),pt?(pt.texture.bind(At,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),_t=Math.pow(2,pt.tileID.overscaledZ-Je.tileID.overscaledZ),at=[Je.tileID.canonical.x*_t%1,Je.tileID.canonical.y*_t%1]):Je.texture.bind(At,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST);const Et=E.style.terrain&&E.style.terrain.getTerrainData(tt),Nt=Et?tt:null,Ot=Nt?Nt.posMatrix:E.transform.calculatePosMatrix(tt.toUnwrapped(),qe),$t=Bf(Ot,at||[0,0],_t||1,yt,d);ee instanceof H?le.draw(S,O.TRIANGLES,Qe,un.disabled,de,Qr.disabled,$t,Et,d.id,ee.boundsBuffer,E.quadTriangleIndexBuffer,ee.boundsSegments):le.draw(S,O.TRIANGLES,Qe,Ee[tt.overscaledZ],de,Qr.disabled,$t,Et,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,s,d,b){const S=d.paint.get("background-color"),O=d.paint.get("background-opacity");if(O===0)return;const ee=E.context,le=ee.gl,de=E.transform,Ee=de.tileSize,Ne=d.paint.get("background-pattern");if(E.isPatternMissing(Ne))return;const Fe=!Ne&&S.a===1&&O===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==Fe)return;const qe=un.disabled,tt=E.depthModeForSublayer(0,Fe==="opaque"?Ti.ReadWrite:Ti.ReadOnly),Qe=E.colorModeForRenderPass(),Je=E.useProgram(Ne?"backgroundPattern":"background"),pt=b||de.coveringTiles({tileSize:Ee,terrain:E.style.terrain});Ne&&(ee.activeTexture.set(le.TEXTURE0),E.imageManager.bind(E.context));const yt=d.getCrossfadeParameters();for(const _t of pt){const at=b?_t.posMatrix:E.transform.calculatePosMatrix(_t.toUnwrapped()),At=Ne?gd(at,O,E,Ne,{tileID:_t,tileSize:Ee},yt):Oy(at,O,S),Et=E.style.terrain&&E.style.terrain.getTerrainData(_t);Je.draw(ee,le.TRIANGLES,tt,qe,Qe,Qr.disabled,At,Et,d.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}},debug:function(E,s,d){for(let b=0;b<d.length;b++)Dd(E,s,d[b])},custom:function(E,s,d){const b=E.context,S=d.implementation;if(E.renderPass==="offscreen"){const O=S.prerender;O&&(E.setCustomLayerDefaults(),b.setColorMode(E.colorModeForRenderPass()),O.call(S,b.gl,E.transform.customLayerMatrix()),b.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),b.setColorMode(E.colorModeForRenderPass()),b.setStencilMode(un.disabled);const O=S.renderingMode==="3d"?new Ti(E.context.gl.LEQUAL,Ti.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Ti.ReadOnly);b.setDepthMode(O),S.render(b.gl,E.transform.customLayerMatrix()),b.setDirty(),E.setBaseState(),b.bindFramebuffer.set(null)}}};class em{constructor(s,d){this.context=new Md(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:n.create(),renderTime:0},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fi,this.gpuTimers={}}resize(s,d,b){if(this.width=s*b,this.height=d*b,this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const s=this.context,d=new n.PosArray;d.emplaceBack(0,0),d.emplaceBack(n.EXTENT,0),d.emplaceBack(0,n.EXTENT),d.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(d,_i.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);const b=new n.PosArray;b.emplaceBack(0,0),b.emplaceBack(n.EXTENT,0),b.emplaceBack(0,n.EXTENT),b.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=s.createVertexBuffer(b,_i.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);const S=new n.RasterBoundsArray;S.emplaceBack(0,0,0,0),S.emplaceBack(n.EXTENT,0,n.EXTENT,0),S.emplaceBack(0,n.EXTENT,0,n.EXTENT),S.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=s.createVertexBuffer(S,F.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);const O=new n.PosArray;O.emplaceBack(0,0),O.emplaceBack(1,0),O.emplaceBack(0,1),O.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(O,_i.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);const ee=new n.LineStripIndexArray;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(ee);const le=new n.TriangleIndexArray;le.emplaceBack(0,1,2),le.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(le),this.emptyTexture=new T(s,{width:1,height:1,data:new Uint8Array([0,0,0,0])},s.gl.RGBA);const de=this.context.gl;this.stencilClearMode=new un({func:de.ALWAYS,mask:0},0,255,de.ZERO,de.ZERO,de.ZERO)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=n.create();n.ortho(b,0,this.width,this.height,0,0,1),n.scale(b,b,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,d.TRIANGLES,Ti.disabled,this.stencilClearMode,yn.disabled,Qr.disabled,wc(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source;const b=this.context,S=b.gl;this.nextStencilID+d.length>256&&this.clearStencil(),b.setColorMode(yn.disabled),b.setDepthMode(Ti.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ee of d){const le=this._tileClippingMaskIDs[ee.key]=this.nextStencilID++,de=this.style.terrain&&this.style.terrain.getTerrainData(ee);O.draw(b,S.TRIANGLES,Ti.disabled,new un({func:S.ALWAYS,mask:0},le,255,S.KEEP,S.KEEP,S.REPLACE),yn.disabled,Qr.disabled,wc(ee.posMatrix),de,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new un({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new un({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,b=s.sort((ee,le)=>le.overscaledZ-ee.overscaledZ),S=b[b.length-1].overscaledZ,O=b[0].overscaledZ-S+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();const ee={};for(let le=0;le<O;le++)ee[le+S]=new un({func:d.GEQUAL,mask:255},le+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=O,[ee,b]}return[{[S]:un.disabled},b]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new yn([s.CONSTANT_COLOR,s.ONE],new n.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yn.unblended:yn.alphaBlended}depthModeForSublayer(s,d,b){if(!this.opaquePassEnabledForLayer())return Ti.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Ti(b||this.context.gl.LEQUAL,d,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(n.exported.now()),this.imageManager.beginFrame();const b=this.style._order,S=this.style.sourceCaches,O=this.style.terrain&&new Zh(this);for(const Ee in S){const Ne=S[Ee];Ne.used&&Ne.prepare(this.context)}const ee={},le={},de={};for(const Ee in S){const Ne=S[Ee];ee[Ee]=Ne.getVisibleCoordinates(),le[Ee]=ee[Ee].slice().reverse(),de[Ee]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ee=0;Ee<b.length;Ee++)if(this.style._layers[b[Ee]].is3D()){this.opaquePassCutoff=Ee;break}if(O){this.opaquePassCutoff=0;const Ee=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!n.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Ee.length)&&(n.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Ne,Fe){const qe=Ne.context,tt=qe.gl,Qe=yn.unblended,Je=new Ti(tt.LEQUAL,Ti.ReadWrite,[0,1]),pt=Fe.getTerrainMesh(),yt=Fe.sourceCache.getRenderableTiles(),_t=Ne.useProgram("terrainDepth");qe.bindFramebuffer.set(Fe.getFramebuffer("depth").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:n.Color.transparent,depth:1});for(const at of yt){const At=Fe.getTerrainData(at.tileID),Et=Ne.transform.calculatePosMatrix(at.tileID.toUnwrapped());_t.draw(qe,tt.TRIANGLES,Je,un.disabled,Qe,Qr.backCCW,{u_matrix:Et},At,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain),function(Ne,Fe){const qe=Ne.context,tt=qe.gl,Qe=yn.unblended,Je=new Ti(tt.LEQUAL,Ti.ReadWrite,[0,1]),pt=Fe.getTerrainMesh(),yt=Fe.getCoordsTexture(),_t=Fe.sourceCache.getRenderableTiles(),at=Ne.useProgram("terrainCoords");qe.bindFramebuffer.set(Fe.getFramebuffer("coords").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:n.Color.transparent,depth:1}),Fe.coordsIndex=[];for(const At of _t){const Et=Fe.getTerrainData(At.tileID);qe.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,yt.texture);const Nt=Ne.transform.calculatePosMatrix(At.tileID.toUnwrapped());at.draw(qe,tt.TRIANGLES,Je,un.disabled,Qe,Qr.backCCW,{u_matrix:Nt,u_terrain_coords_id:(255-Fe.coordsIndex.length)/255,u_texture:0},Et,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Fe.coordsIndex.push(At.tileID.key)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Ee of b){const Ne=this.style._layers[Ee];if(!Ne.hasOffscreenPass()||Ne.isHidden(this.transform.zoom))continue;const Fe=le[Ne.source];(Ne.type==="custom"||Fe.length)&&this.renderLayer(this,S[Ne.source],Ne,Fe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!O)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Ee=this.style._layers[b[this.currentLayer]],Ne=S[Ee.source],Fe=ee[Ee.source];this._renderTileClippingMasks(Ee,Fe),this.renderLayer(this,Ne,Ee,Fe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Ee=this.style._layers[b[this.currentLayer]],Ne=S[Ee.source];if(O&&O.renderLayer(Ee))continue;const Fe=(Ee.type==="symbol"?de:le)[Ee.source];this._renderTileClippingMasks(Ee,ee[Ee.source]),this.renderLayer(this,Ne,Ee,Fe)}if(this.options.showTileBoundaries){let Ee,Ne;Object.values(this.style._layers).forEach(Fe=>{Fe.source&&!Fe.isHidden(this.transform.zoom)&&(Fe.source!==(Ne&&Ne.id)&&(Ne=this.style.sourceCaches[Fe.source]),(!Ee||Ee.getSource().maxzoom<Ne.getSource().maxzoom)&&(Ee=Ne))}),Ee&&Xh.debug(this,Ee,Ee.getVisibleCoordinates())}this.options.showPadding&&function(Ee){const Ne=Ee.transform.padding;Ic(Ee,Ee.transform.height-(Ne.top||0),3,Ca),Ic(Ee,Ne.bottom||0,3,Kf),qh(Ee,Ne.left||0,3,Id),qh(Ee,Ee.transform.width-(Ne.right||0),3,Qf);const Fe=Ee.transform.centerPoint;(function(qe,tt,Qe,Je){Yh(qe,tt-1,Qe-10,2,20,Je),Yh(qe,tt-10,Qe-1,20,2,Je)})(Ee,Fe.x,Ee.transform.height-Fe.y,Dl)}(this),this.context.setDefault()}renderLayer(s,d,b,S){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="custom"||(S||[]).length)&&(this.id=b.id,this.gpuTimingStart(b),Xh[b.type](s,d,b,S,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let b=this.gpuTimers[s.id];b||(b=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),b.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,b.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}queryGpuTimers(s){const d={};for(const b in s){const S=s[b],O=this.context.extTimerQuery,ee=O.getQueryObjectEXT(S.query,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(S.query),d[b]=ee}return d}translatePosMatrix(s,d,b,S,O){if(!b[0]&&!b[1])return s;const ee=O?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(ee){const Ee=Math.sin(ee),Ne=Math.cos(ee);b=[b[0]*Ne-b[1]*Ee,b[0]*Ee+b[1]*Ne]}const le=[O?b[0]:ir(d,b[0],this.transform.zoom),O?b[1]:ir(d,b[1],this.transform.zoom),0],de=new Float32Array(16);return n.translate(de,s,le),de}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),b=this.imageManager.getPattern(s.to.toString());return!d||!b}useProgram(s,d){this.cache=this.cache||{};const b=s+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new zy(this.context,s,_c[s],d,yd[s],this._showOverdrawInspector,this.style.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Kh{constructor(s,d){this.points=s,this.planes=d}static fromInvProjectionMatrix(s,d,b){const S=Math.pow(2,b),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(le=>{const de=1/(le=n.transformMat4([],le,s))[3]/d*S;return n.mul$1(le,le,[de,de,1/le[3],de])}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(le=>{const de=n.sub([],O[le[0]],O[le[1]]),Ee=n.sub([],O[le[2]],O[le[1]]),Ne=n.normalize([],n.cross([],de,Ee)),Fe=-n.dot(Ne,O[le[1]]);return Ne.concat(Fe)});return new Kh(O,ee)}}class Yo{constructor(s,d){this.min=s,this.max=d,this.center=n.scale$1([],n.add([],this.min,this.max),.5)}quadrant(s){const d=[s%2==0,s<2],b=n.clone$2(this.min),S=n.clone$2(this.max);for(let O=0;O<d.length;O++)b[O]=d[O]?this.min[O]:this.center[O],S[O]=d[O]?this.center[O]:this.max[O];return S[2]=this.max[2],new Yo(b,S)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let S=0;S<s.planes.length;S++){const O=s.planes[S];let ee=0;for(let le=0;le<d.length;le++)n.dot$1(O,d[le])>=0&&ee++;if(ee===0)return 0;ee!==d.length&&(b=!1)}if(b)return 2;for(let S=0;S<3;S++){let O=Number.MAX_VALUE,ee=-Number.MAX_VALUE;for(let le=0;le<s.points.length;le++){const de=s.points[le][S]-this.min[S];O=Math.min(O,de),ee=Math.max(ee,de)}if(ee<0||O>this.max[S]-this.min[S])return 0}return 1}}class Dc{constructor(s=0,d=0,b=0,S=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(b)||b<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=b,this.right=S}interpolate(s,d,b){return d.top!=null&&s.top!=null&&(this.top=n.number(s.top,d.top,b)),d.bottom!=null&&s.bottom!=null&&(this.bottom=n.number(s.bottom,d.bottom,b)),d.left!=null&&s.left!=null&&(this.left=n.number(s.left,d.left,b)),d.right!=null&&s.right!=null&&(this.right=n.number(s.right,d.right,b)),this}getCenter(s,d){const b=n.clamp((this.left+s-this.right)/2,0,s),S=n.clamp((this.top+d-this.bottom)/2,0,d);return new n.pointGeometry(b,S)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Dc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qh{constructor(s,d,b,S,O){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=O===void 0||!!O,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=b??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Dc,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const s=new Qh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.tileSize=this.tileSize,s.latRange=this.latRange,s.width=this.width,s.height=this.height,s._center=this._center,s._elevation=this._elevation,s.zoom=this.zoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._calcMatrices(),s}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const d=-n.wrap(s,-180,180)*Math.PI/180;var b;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(b=new n.ARRAY_TYPE(4),n.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(S,O,ee){var le=O[0],de=O[1],Ee=O[2],Ne=O[3],Fe=Math.sin(ee),qe=Math.cos(ee);S[0]=le*qe+Ee*Fe,S[1]=de*qe+Ne*Fe,S[2]=le*-Fe+Ee*qe,S[3]=de*-Fe+Ne*qe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=n.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,b){this._unmodified=!1,this._edgeInsets.interpolate(s,d,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new n.UnwrappedTileID(0,s)];if(this._renderWorldCopies){const b=this.pointCoordinate(new n.pointGeometry(0,0)),S=this.pointCoordinate(new n.pointGeometry(this.width,0)),O=this.pointCoordinate(new n.pointGeometry(this.width,this.height)),ee=this.pointCoordinate(new n.pointGeometry(0,this.height)),le=Math.floor(Math.min(b.x,S.x,O.x,ee.x)),de=Math.floor(Math.max(b.x,S.x,O.x,ee.x)),Ee=1;for(let Ne=le-Ee;Ne<=de+Ee;Ne++)Ne!==0&&d.push(new n.UnwrappedTileID(Ne,s))}return d}coveringTiles(s){var d,b;let S=this.coveringZoomLevel(s);const O=S;if(s.minzoom!==void 0&&S<s.minzoom)return[];s.maxzoom!==void 0&&S>s.maxzoom&&(S=s.maxzoom);const ee=this.pointCoordinate(this.getCameraPoint()),le=n.MercatorCoordinate.fromLngLat(this.center),de=Math.pow(2,S),Ee=[de*ee.x,de*ee.y,0],Ne=[de*le.x,de*le.y,0],Fe=Kh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S);let qe=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(qe=S);const tt=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,Qe=at=>({aabb:new Yo([at*de,0,0],[(at+1)*de,de,0]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),Je=[],pt=[],yt=S,_t=s.reparseOverscaled?O:S;if(this._renderWorldCopies)for(let at=1;at<=3;at++)Je.push(Qe(-at)),Je.push(Qe(at));for(Je.push(Qe(0));Je.length>0;){const at=Je.pop(),At=at.x,Et=at.y;let Nt=at.fullyVisible;if(!Nt){const li=at.aabb.intersects(Fe);if(li===0)continue;Nt=li===2}const Ot=s.terrain?Ee:Ne,$t=at.aabb.distanceX(Ot),Lt=at.aabb.distanceY(Ot),ai=Math.max(Math.abs($t),Math.abs(Lt)),Zt=tt+(1<<yt-at.zoom)-2;if(at.zoom===yt||ai>Zt&&at.zoom>=qe){const li=yt-at.zoom,Xi=Ee[0]-.5-(At<<li),or=Ee[1]-.5-(Et<<li);pt.push({tileID:new n.OverscaledTileID(at.zoom===yt?_t:at.zoom,at.wrap,at.zoom,At,Et),distanceSq:n.sqrLen([Ne[0]-.5-At,Ne[1]-.5-Et]),tileDistanceToCamera:Math.sqrt(Xi*Xi+or*or)})}else for(let li=0;li<4;li++){const Xi=(At<<1)+li%2,or=(Et<<1)+(li>>1),Ii=at.zoom+1;let Or=at.aabb.quadrant(li);if(s.terrain){const jr=new n.OverscaledTileID(Ii,at.wrap,Ii,Xi,or),xr=s.terrain.getMinMaxElevation(jr),vr=(d=xr.minElevation)!==null&&d!==void 0?d:this.elevation,Tr=(b=xr.maxElevation)!==null&&b!==void 0?b:this.elevation;Or=new Yo([Or.min[0],Or.min[1],vr],[Or.max[0],Or.max[1],Tr])}Je.push({aabb:Or,zoom:Ii,x:Xi,y:or,wrap:at.wrap,fullyVisible:Nt})}}return pt.sort((at,At)=>at.distanceSq-At.distanceSq).map(at=>at.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=n.clamp(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.pointGeometry(n.mercatorXfromLng(s.lng)*this.worldSize,n.mercatorYfromLat(d)*this.worldSize)}unproject(s){return new n.MercatorCoordinate(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(s){this.freezeElevation||(this.elevation=s?this.getElevation(this._center,s):0)}getElevation(s,d){const b=n.MercatorCoordinate.fromLngLat(s),S=(1<<this.tileZoom)*n.EXTENT,O=b.x*S,ee=b.y*S,le=Math.floor(O/n.EXTENT),de=Math.floor(ee/n.EXTENT),Ee=new n.OverscaledTileID(this.tileZoom,0,this.tileZoom,le,de);return d.getElevation(Ee,O%n.EXTENT,ee%n.EXTENT,n.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const d=this.pointLocation(this.centerPoint,s),b=this.getElevation(d,s);if(!(this.elevation-b))return;const S=this.getCameraPosition(),O=n.MercatorCoordinate.fromLngLat(S.lngLat,S.altitude),ee=n.MercatorCoordinate.fromLngLat(d,b),le=O.x-ee.x,de=O.y-ee.y,Ee=O.z-ee.z,Ne=Math.sqrt(le*le+de*de+Ee*Ee),Fe=this.scaleZoom(this.cameraToCenterDistance/Ne/this.tileSize);this._elevation=b,this._center=d,this.zoom=Fe}setLocationAtPoint(s,d){const b=this.pointCoordinate(d),S=this.pointCoordinate(this.centerPoint),O=this.locationCoordinate(s),ee=new n.MercatorCoordinate(O.x-(b.x-S.x),O.y-(b.y-S.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,d){return d?this.coordinatePoint(this.locationCoordinate(s),this.getElevation(s,d),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,d){return this.coordinateLocation(this.pointCoordinate(s,d))}locationCoordinate(s){return n.MercatorCoordinate.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,d){if(d){const qe=d.pointCoordinate(s);if(qe!=null)return qe}const b=[s.x,s.y,0,1],S=[s.x,s.y,1,1];n.transformMat4(b,b,this.pixelMatrixInverse),n.transformMat4(S,S,this.pixelMatrixInverse);const O=b[3],ee=S[3],le=b[1]/O,de=S[1]/ee,Ee=b[2]/O,Ne=S[2]/ee,Fe=Ee===Ne?0:(0-Ee)/(Ne-Ee);return new n.MercatorCoordinate(n.number(b[0]/O,S[0]/ee,Fe)/this.worldSize,n.number(le,de,Fe)/this.worldSize)}coordinatePoint(s,d=0,b=this.pixelMatrix){const S=[s.x*this.worldSize,s.y*this.worldSize,d,1];return n.transformMat4(S,S,b),new n.pointGeometry(S[0]/S[3],S[1]/S[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return new n.LngLatBounds().extend(this.pointLocation(new n.pointGeometry(0,s))).extend(this.pointLocation(new n.pointGeometry(this.width,s))).extend(this.pointLocation(new n.pointGeometry(this.width,this.height))).extend(this.pointLocation(new n.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,d=!1){const b=s.key,S=d?this._alignedPosMatrixCache:this._posMatrixCache;if(S[b])return S[b];const O=s.canonical,ee=this.worldSize/this.zoomScale(O.z),le=O.x+Math.pow(2,O.z)*s.wrap,de=n.identity(new Float64Array(16));return n.translate(de,de,[le*ee,O.y*ee,0]),n.scale(de,de,[ee/n.EXTENT,ee/n.EXTENT,1]),n.multiply(de,d?this.alignedProjMatrix:this.projMatrix,de),S[b]=new Float32Array(de),S[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,d,b,S,O=-90,ee=90,le=-180,de=180;const Ee=this.size,Ne=this._unmodified;if(this.latRange){const tt=this.latRange;O=n.mercatorYfromLat(tt[1])*this.worldSize,ee=n.mercatorYfromLat(tt[0])*this.worldSize,s=ee-O<Ee.y?Ee.y/(ee-O):0}if(this.lngRange){const tt=this.lngRange;le=n.wrap(n.mercatorXfromLng(tt[0])*this.worldSize,0,this.worldSize),de=n.wrap(n.mercatorXfromLng(tt[1])*this.worldSize,0,this.worldSize),de<le&&(de+=this.worldSize),d=de-le<Ee.x?Ee.x/(de-le):0}const Fe=this.point,qe=Math.max(d||0,s||0);if(qe)return this.center=this.unproject(new n.pointGeometry(d?(de+le)/2:Fe.x,s?(ee+O)/2:Fe.y)),this.zoom+=this.scaleZoom(qe),this._unmodified=Ne,void(this._constraining=!1);if(this.latRange){const tt=Fe.y,Qe=Ee.y/2;tt-Qe<O&&(S=O+Qe),tt+Qe>ee&&(S=ee-Qe)}if(this.lngRange){const tt=(le+de)/2,Qe=n.wrap(Fe.x,tt-this.worldSize/2,tt+this.worldSize/2),Je=Ee.x/2;Qe-Je<le&&(b=le+Je),Qe+Je>de&&(b=de-Je)}b===void 0&&S===void 0||(this.center=this.unproject(new n.pointGeometry(b!==void 0?b:Fe.x,S!==void 0?S:Fe.y)).wrap()),this._unmodified=Ne,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let S=n.identity(new Float64Array(16));n.scale(S,S,[this.width/2,-this.height/2,1]),n.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=n.identity(new Float64Array(16)),n.scale(S,S,[1,-1,1]),n.translate(S,S,[-1,-1,0]),n.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const O=Math.PI/2+this._pitch,ee=this._fov*(.5+s.y/this.height),le=Math.sin(ee)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-O-ee,.01,Math.PI-.01)),de=this.getHorizon(),Ee=2*Math.atan(de/this.cameraToCenterDistance)*(.5+s.y/(2*de)),Ne=Math.sin(Ee)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-O-Ee,.01,Math.PI-.01)),Fe=Math.cos(Math.PI/2-this._pitch)*le+this.cameraToSeaLevelDistance,qe=Math.cos(Math.PI/2-this._pitch)*Ne+this.cameraToSeaLevelDistance,tt=1.01*Math.min(Fe,qe),Qe=this.height/50;S=new Float64Array(16),n.perspective(S,this._fov,this.width/this.height,Qe,tt),S[8]=2*-s.x/this.width,S[9]=2*s.y/this.height,n.scale(S,S,[1,-1,1]),n.translate(S,S,[0,0,-this.cameraToCenterDistance]),n.rotateX(S,S,this._pitch),n.rotateZ(S,S,this.angle),n.translate(S,S,[-d,-b,0]),this.mercatorMatrix=n.scale([],S,[this.worldSize,this.worldSize,this.worldSize]),n.scale(S,S,[1,1,this._pixelPerMeter]),this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,S),n.translate(S,S,[0,0,-this.elevation]),this.projMatrix=S,this.invProjMatrix=n.invert([],S),this.pixelMatrix3D=n.multiply(new Float64Array(16),this.labelPlaneMatrix,S);const Je=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),_t=Math.sin(this.angle),at=d-Math.round(d)+yt*Je+_t*pt,At=b-Math.round(b)+yt*pt+_t*Je,Et=new Float64Array(S);if(n.translate(Et,Et,[at>.5?at-1:at,At>.5?At-1:At,0]),this.alignedProjMatrix=Et,S=n.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new n.pointGeometry(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return n.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.pointGeometry(0,s))}getCameraQueryGeometry(s){const d=this.getCameraPoint();if(s.length===1)return[s[0],d];{let b=d.x,S=d.y,O=d.x,ee=d.y;for(const le of s)b=Math.min(b,le.x),S=Math.min(S,le.y),O=Math.max(O,le.x),ee=Math.max(ee,le.y);return[new n.pointGeometry(b,S),new n.pointGeometry(O,S),new n.pointGeometry(O,ee),new n.pointGeometry(b,ee),new n.pointGeometry(b,S)]}}}class tm{constructor(s){this._hashName=s&&encodeURIComponent(s),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,b){let S=!1,O=null;const ee=()=>{O=null,S&&(d(),O=setTimeout(ee,300),S=!1)};return()=>(S=!0,O||ee(),O)}(this._updateHashUnthrottled.bind(this))}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const d=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,S=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,S),ee=Math.round(d.lng*O)/O,le=Math.round(d.lat*O)/O,de=this._map.getBearing(),Ee=this._map.getPitch();let Ne="";if(Ne+=s?`/${ee}/${le}/${b}`:`${b}/${le}/${ee}`,(de||Ee)&&(Ne+="/"+Math.round(10*de)/10),Ee&&(Ne+=`/${Math.round(Ee)}`),this._hashName){const Fe=this._hashName;let qe=!1;const tt=window.location.hash.slice(1).split("&").map(Qe=>{const Je=Qe.split("=")[0];return Je===Fe?(qe=!0,`${Je}=${Ne}`):Qe}).filter(Qe=>Qe);return qe||tt.push(`${Fe}=${Ne}`),`#${tt.join("&")}`}return`#${Ne}`}_getCurrentHash(){const s=window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(d=b)}),(d&&d[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._getCurrentHash();if(s.length>=3&&!s.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:d,pitch:+(s[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,s)}catch{}}}const Rc={linearity:.3,easing:n.bezier(0,0,.3,1)},im=n.extend({deceleration:2500,maxSpeed:1400},Rc),rm=n.extend({deceleration:20,maxSpeed:1400},Rc),Rl=n.extend({deceleration:1e3,maxSpeed:360},Rc),nm=n.extend({deceleration:1e3,maxSpeed:90},Rc);class sm{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=n.exported.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new n.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:O}of this._inertiaBuffer)d.zoom+=O.zoomDelta||0,d.bearing+=O.bearingDelta||0,d.pitch+=O.pitchDelta||0,O.panDelta&&d.pan._add(O.panDelta),O.around&&(d.around=O.around),O.pinchAround&&(d.pinchAround=O.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(d.pan.mag()){const O=zc(d.pan.mag(),b,n.extend({},im,s||{}));S.offset=d.pan.mult(O.amount/d.pan.mag()),S.center=this._map.transform.center,Lc(S,O)}if(d.zoom){const O=zc(d.zoom,b,rm);S.zoom=this._map.transform.zoom+O.amount,Lc(S,O)}if(d.bearing){const O=zc(d.bearing,b,Rl);S.bearing=this._map.transform.bearing+n.clamp(O.amount,-179,179),Lc(S,O)}if(d.pitch){const O=zc(d.pitch,b,nm);S.pitch=this._map.transform.pitch+O.amount,Lc(S,O)}if(S.zoom||S.bearing){const O=d.pinchAround===void 0?d.around:d.pinchAround;S.around=O?this._map.unproject(O):this._map.getCenter()}return this.clear(),n.extend(S,{noMoveStart:!0})}}function Lc(E,s){(!E.duration||E.duration<s.duration)&&(E.duration=s.duration,E.easing=s.easing)}function zc(E,s,d){const{maxSpeed:b,linearity:S,deceleration:O}=d,ee=n.clamp(E*S/(s/1e3),-b,b),le=Math.abs(ee)/(O*S);return{easing:d.easing,duration:1e3*le,amount:ee*(le/2)}}class Zs extends n.Event{constructor(s,d,b,S={}){const O=y.mousePos(d.getCanvasContainer(),b),ee=d.unproject(O);super(s,n.extend({point:O,lngLat:ee,originalEvent:b},S)),this._defaultPrevented=!1,this.target=d}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ps extends n.Event{constructor(s,d,b){const S=s==="touchend"?b.changedTouches:b.touches,O=y.touchPos(d.getCanvasContainer(),S),ee=O.map(de=>d.unproject(de)),le=O.reduce((de,Ee,Ne,Fe)=>de.add(Ee.div(Fe.length)),new n.pointGeometry(0,0));super(s,{points:O,point:le,lngLats:ee,lngLat:d.unproject(le),originalEvent:b}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class qy extends n.Event{constructor(s,d,b){super(s,{originalEvent:b}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class vo{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new qy(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Zs(s.type,this._map,s))}mouseup(s){this._map.fire(new Zs(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Zs(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Zs(s.type,this._map,s))}mouseover(s){this._map.fire(new Zs(s.type,this._map,s))}mouseout(s){this._map.fire(new Zs(s.type,this._map,s))}touchstart(s){return this._firePreventable(new ps(s.type,this._map,s))}touchmove(s){this._map.fire(new ps(s.type,this._map,s))}touchend(s){this._map.fire(new ps(s.type,this._map,s))}touchcancel(s){this._map.fire(new ps(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class am{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Zs(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Zs(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zo{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(y.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const b=d;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=b,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const O=Math.min(S.x,b.x),ee=Math.max(S.x,b.x),le=Math.min(S.y,b.y),de=Math.max(S.y,b.y);y.setTransform(this._box,`translate(${O}px,${le}px)`),this._box.style.width=ee-O+"px",this._box.style.height=de-le+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;const b=this._startPos,S=d;if(this.reset(),y.suppressClick(),b.x!==S.x||b.y!==S.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:O=>O.fitScreenCoordinates(b,S,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new n.Event(s,{originalEvent:d}))}}function Xo(E,s){if(E.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${s.length}`);const d={};for(let b=0;b<E.length;b++)d[E[b].identifier]=s[b];return d}class Yy{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),b.length===this.numTouches&&(this.centroid=function(S){const O=new n.pointGeometry(0,0);for(const ee of S)O._add(ee);return O.div(S.length)}(d),this.touches=Xo(b,d)))}touchmove(s,d,b){if(this.aborted||!this.centroid)return;const S=Xo(b,d);for(const O in this.touches){const ee=this.touches[O],le=S[O];(!le||le.dist(ee)>30)&&(this.aborted=!0)}}touchend(s,d,b){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Ld{constructor(s){this.singleTap=new Yy(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,b){this.singleTap.touchstart(s,d,b)}touchmove(s,d,b){this.singleTap.touchmove(s,d,b)}touchend(s,d,b){const S=this.singleTap.touchend(s,d,b);if(S){const O=s.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(S)<30;if(O&&ee||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Zy{constructor(){this._zoomIn=new Ld({numTouches:1,numTaps:2}),this._zoomOut=new Ld({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,b){this._zoomIn.touchstart(s,d,b),this._zoomOut.touchstart(s,d,b)}touchmove(s,d,b){this._zoomIn.touchmove(s,d,b),this._zoomOut.touchmove(s,d,b)}touchend(s,d,b){const S=this._zoomIn.touchend(s,d,b),O=this._zoomOut.touchend(s,d,b);return S?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(S)},{originalEvent:s})}):O?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(O)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const om={0:1,2:2};class Ko{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(s,d){return!1}_move(s,d){return{}}mousedown(s,d){if(this._lastPoint)return;const b=y.mouseButton(s);this._correctButton(s,b)&&(this._lastPoint=d,this._eventButton=b)}mousemoveWindow(s,d){const b=this._lastPoint;if(b){if(s.preventDefault(),function(S,O){const ee=om[O];return S.buttons===void 0||(S.buttons&ee)!==ee}(s,this._eventButton))this.reset();else if(this._moved||!(d.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(b,d)}}mouseupWindow(s){this._lastPoint&&y.mouseButton(s)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _o extends Ko{mousedown(s,d){super.mousedown(s,d),this._lastPoint&&(this._active=!0)}_correctButton(s,d){return d===0&&!s.ctrlKey}_move(s,d){return{around:d,panDelta:d.sub(s)}}}class fi extends Ko{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const b=.8*(d.x-s.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(s){s.preventDefault()}}class zd extends Ko{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const b=-.5*(d.y-s.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(s){s.preventDefault()}}class Nc{constructor(s,d){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new n.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,d,b){return this._calculateTransform(s,d,b)}touchmove(s,d,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,d,b)}touchend(s,d,b){this._calculateTransform(s,d,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,b){b.length>0&&(this._active=!0);const S=Xo(b,d),O=new n.pointGeometry(0,0),ee=new n.pointGeometry(0,0);let le=0;for(const Ee in S){const Ne=S[Ee],Fe=this._touches[Ee];Fe&&(O._add(Ne),ee._add(Ne.sub(Fe)),le++,S[Ee]=Ne)}if(this._touches=S,le<this._minTouches||!ee.mag())return;const de=ee.div(le);return this._sum._add(de),this._sum.mag()<this._clickTolerance?void 0:{around:O.div(le),panDelta:de}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(s){}_move(s,d,b){return{}}touchstart(s,d,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,b){if(!this._firstTwoTouches)return;s.preventDefault();const[S,O]=this._firstTwoTouches,ee=Oc(b,d,S),le=Oc(b,d,O);if(!ee||!le)return;const de=this._aroundCenter?null:ee.add(le).div(2);return this._move([ee,le],de,s)}touchend(s,d,b){if(!this._firstTwoTouches)return;const[S,O]=this._firstTwoTouches,ee=Oc(b,d,S),le=Oc(b,d,O);ee&&le||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Oc(E,s,d){for(let b=0;b<E.length;b++)if(E[b].identifier===d)return s[b]}function ei(E,s){return Math.log(E/s)/Math.LN2}class Nd extends Qo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const b=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(ei(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ei(this._distance,b),pinchAround:d}}}function lm(E,s){return 180*E.angleWith(s)/Math.PI}class Xy extends Qo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const b=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lm(this._vector,b),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,b=lm(s,this._startVector);return Math.abs(b)<d}}function jc(E){return Math.abs(E.y)>Math.abs(E.x)}class cm extends Qo{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,b){super.touchstart(s,d,b),this._currentTouchCount=b.length}_start(s){this._lastPoints=s,jc(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const S=s[0].sub(this._lastPoints[0]),O=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,O,b.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(S.y+O.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,b){if(this._valid!==void 0)return this._valid;const S=s.mag()>=2,O=d.mag()>=2;if(!S&&!O)return;if(!S||!O)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const ee=s.y>0==d.y>0;return jc(s)&&jc(d)&&ee}}const hm={panStep:100,bearingStep:15,pitchStep:10};class Ky{constructor(){const s=hm;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,b=0,S=0,O=0,ee=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?b=-1:(s.preventDefault(),O=-1);break;case 39:s.shiftKey?b=1:(s.preventDefault(),O=1);break;case 38:s.shiftKey?S=1:(s.preventDefault(),ee=-1);break;case 40:s.shiftKey?S=-1:(s.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(b=0,S=0),{cameraAnimation:le=>{const de=le.getZoom();le.easeTo({duration:300,easeId:"keyboardHandler",easing:Qy,zoom:d?Math.round(de)+d*(s.shiftKey?2:1):de,bearing:le.getBearing()+b*this._bearingStep,pitch:le.getPitch()+S*this._pitchStep,offset:[-O*this._panStep,-ee*this._panStep],center:le.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Qy(E){return E*(2-E)}const Jh=4.000244140625;class Od{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;s.preventDefault()}let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const b=n.exported.now(),S=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,d!==0&&d%Jh==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(S*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=y.mousePos(this._el,s);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;if(this._delta!==0){const le=this._type==="wheel"&&Math.abs(this._delta)>Jh?this._wheelZoomRate:this._defaultZoomRate;let de=2/(1+Math.exp(-Math.abs(this._delta*le)));this._delta<0&&de!==0&&(de=1/de);const Ee=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(Ee*de))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,b=this._startZoom,S=this._easing;let O,ee=!1;if(this._type==="wheel"&&b&&S){const le=Math.min((n.exported.now()-this._lastWheelEventTime)/200,1),de=S(le);O=n.number(b,d,de),le<1?this._frameId||(this._frameId=!0):ee=!0}else O=d,ee=!0;return this._active=!0,ee&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ee,zoomDelta:O-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=n.ease;if(this._prevEase){const b=this._prevEase,S=(n.exported.now()-b.start)/b.duration,O=b.easing(S+.01)-b.easing(S),ee=.27/Math.sqrt(O*O+1e-4)*.01,le=Math.sqrt(.0729-ee*ee);d=n.bezier(ee,le,.25,1)}return this._prevEase={start:n.exported.now(),duration:s,easing:d},d}reset(){this._active=!1}}class jd{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bd{constructor(){this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(s.shiftKey?-1:1),around:b.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Os{constructor(){this._tap=new Ld({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(s,d,b){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=d[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(s,d,b))}touchmove(s,d,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const S=d[0],O=S.y-this._swipePoint.y;return this._swipePoint=S,s.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(s,d,b)}touchend(s,d,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(s,d,b)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wo{constructor(s,d,b){this._el=s,this._mousePan=d,this._touchPan=b}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class um{constructor(s,d,b){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Fd{constructor(s,d,b,S){this._el=s,this._touchZoom=d,this._touchRotate=b,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ll=E=>E.zoom||E.drag||E.pitch||E.rotate;class Ud extends n.Event{}function eu(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class ga{constructor(s,d){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sm(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),n.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,O,ee]of this._listeners)y.addEventListener(S,O,S===document?this.handleWindowEvent:this.handleEvent,ee)}destroy(){for(const[s,d,b]of this._listeners)y.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(s){const d=this._map,b=d.getCanvasContainer();this._add("mapEvent",new vo(d,s));const S=d.boxZoom=new Zo(d,s);this._add("boxZoom",S);const O=new Zy,ee=new Bd;d.doubleClickZoom=new jd(ee,O),this._add("tapZoom",O),this._add("clickZoom",ee);const le=new Os;this._add("tapDragZoom",le);const de=d.touchPitch=new cm(d);this._add("touchPitch",de);const Ee=new fi(s),Ne=new zd(s);d.dragRotate=new um(s,Ee,Ne),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",Ne,["mouseRotate"]);const Fe=new _o(s),qe=new Nc(s,d);d.dragPan=new wo(b,Fe,qe),this._add("mousePan",Fe),this._add("touchPan",qe,["touchZoom","touchRotate"]);const tt=new Xy,Qe=new Nd;d.touchZoomRotate=new Fd(b,Qe,tt,le),this._add("touchRotate",tt,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]);const Je=d.scrollZoom=new Od(d,this);this._add("scrollZoom",Je,["mousePan"]);const pt=d.keyboard=new Ky;this._add("keyboard",pt),this._add("blockableMapEvent",new am(d));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[yt]&&d[yt].enable(s[yt])}_add(s,d,b){this._handlers.push({handlerName:s,handler:d,allowed:b}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ll(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,b){for(const S in s)if(S!==b&&(!d||d.indexOf(S)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const d=[];for(const b of s)this._el.contains(b.target)&&d.push(b);return d}handleEvent(s,d){if(s.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=s.type==="renderFrame"?void 0:s,S={needsRenderFrame:!1},O={},ee={},le=s.touches,de=le?this._getMapTouches(le):void 0,Ee=de?y.touchPos(this._el,de):y.mousePos(this._el,s);for(const{handlerName:qe,handler:tt,allowed:Qe}of this._handlers){if(!tt.isEnabled())continue;let Je;this._blockedByActive(ee,Qe,qe)?tt.reset():tt[d||s.type]&&(Je=tt[d||s.type](s,Ee,de),this.mergeHandlerResult(S,O,Je,qe,b),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||tt.isActive())&&(ee[qe]=tt)}const Ne={};for(const qe in this._previousActiveHandlers)ee[qe]||(Ne[qe]=b);this._previousActiveHandlers=ee,(Object.keys(Ne).length||eu(S))&&(this._changes.push([S,O,Ne]),this._triggerRenderFrame()),(Object.keys(ee).length||eu(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Fe}=S;Fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fe(this._map))}mergeHandlerResult(s,d,b,S,O){if(!b)return;n.extend(s,b);const ee={handlerName:S,originalEvent:b.originalEvent||O};b.zoomDelta!==void 0&&(d.zoom=ee),b.panDelta!==void 0&&(d.drag=ee),b.pitchDelta!==void 0&&(d.pitch=ee),b.bearingDelta!==void 0&&(d.rotate=ee)}_applyChanges(){const s={},d={},b={};for(const[S,O,ee]of this._changes)S.panDelta&&(s.panDelta=(s.panDelta||new n.pointGeometry(0,0))._add(S.panDelta)),S.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(s.around=S.around),S.pinchAround!==void 0&&(s.pinchAround=S.pinchAround),S.noInertia&&(s.noInertia=S.noInertia),n.extend(d,O),n.extend(b,ee);this._updateMapTransform(s,d,b),this._changes=[]}_updateMapTransform(s,d,b){const S=this._map,O=S.transform,ee=S.style&&S.style.terrain;if(!(eu(s)||ee&&this._drag))return this._fireEvents(d,b,!0);let{panDelta:le,zoomDelta:de,bearingDelta:Ee,pitchDelta:Ne,around:Fe,pinchAround:qe}=s;qe!==void 0&&(Fe=qe),S._stop(!0),Fe=Fe||S.transform.centerPoint;const tt=O.pointLocation(le?Fe.sub(le):Fe);Ee&&(O.bearing+=Ee),Ne&&(O.pitch+=Ne),de&&(O.zoom+=de),ee?d.drag&&!this._drag?(this._drag={center:O.centerPoint,lngLat:O.pointLocation(Fe),point:Fe,handlerName:d.drag.handlerName},S.fire(new n.Event("freezeElevation",{freeze:!0}))):this._drag&&b[this._drag.handlerName]?(S.fire(new n.Event("freezeElevation",{freeze:!1})),this._drag=null):d.drag&&this._drag&&(O.center=O.pointLocation(O.centerPoint.sub(le))):O.setLocationAtPoint(tt,Fe),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,b,!0)}_fireEvents(s,d,b){const S=Ll(this._eventsInProgress),O=Ll(s),ee={};for(const Ne in s){const{originalEvent:Fe}=s[Ne];this._eventsInProgress[Ne]||(ee[`${Ne}start`]=Fe),this._eventsInProgress[Ne]=s[Ne]}!S&&O&&this._fireEvent("movestart",O.originalEvent);for(const Ne in ee)this._fireEvent(Ne,ee[Ne]);O&&this._fireEvent("move",O.originalEvent);for(const Ne in s){const{originalEvent:Fe}=s[Ne];this._fireEvent(Ne,Fe)}const le={};let de;for(const Ne in this._eventsInProgress){const{handlerName:Fe,originalEvent:qe}=this._eventsInProgress[Ne];this._handlersById[Fe].isActive()||(delete this._eventsInProgress[Ne],de=d[Fe]||qe,le[`${Ne}end`]=de)}for(const Ne in le)this._fireEvent(Ne,le[Ne]);const Ee=Ll(this._eventsInProgress);if(b&&(S||O)&&!Ee){this._updatingCamera=!0;const Ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Fe=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;Ne?(Fe(Ne.bearing||this._map.getBearing())&&(Ne.bearing=0),this._map.easeTo(Ne,{originalEvent:de})):(this._map.fire(new n.Event("moveend",{originalEvent:de})),Fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new n.Event(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Ud("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const sn={extend:(E,...s)=>n.extend(E,...s),run(E){E()},logToElement(E,s=!1,d="log"){const b=window.document.getElementById(d);b&&(s&&(b.innerHTML=""),b.innerHTML+=`<br>${E}`)}};class tu extends n.Evented{constructor(s,d){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}getCenter(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,b){return s=n.pointGeometry.convert(s).mult(-1),this.panTo(this.transform.center,n.extend({offset:s},d),b)}panTo(s,d,b){return this.easeTo(n.extend({center:s},d),b)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,b){return this.easeTo(n.extend({zoom:s},d),b)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,b){return this.easeTo(n.extend({bearing:s},d),b)}resetNorth(s,d){return this.rotateTo(0,n.extend({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=n.LngLatBounds.convert(s);const b=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),b,d)}_cameraForBoxAndBearing(s,d,b,S){const O={top:0,bottom:0,right:0,left:0};if(typeof(S=n.extend({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const Et=S.padding;S.padding={top:Et,bottom:Et,right:Et,left:Et}}S.padding=n.extend(O,S.padding);const ee=this.transform,le=ee.padding,de=ee.project(n.LngLat.convert(s)),Ee=ee.project(n.LngLat.convert(d)),Ne=de.rotate(-b*Math.PI/180),Fe=Ee.rotate(-b*Math.PI/180),qe=new n.pointGeometry(Math.max(Ne.x,Fe.x),Math.max(Ne.y,Fe.y)),tt=new n.pointGeometry(Math.min(Ne.x,Fe.x),Math.min(Ne.y,Fe.y)),Qe=qe.sub(tt),Je=(ee.width-(le.left+le.right+S.padding.left+S.padding.right))/Qe.x,pt=(ee.height-(le.top+le.bottom+S.padding.top+S.padding.bottom))/Qe.y;if(pt<0||Je<0)return void n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(ee.scaleZoom(ee.scale*Math.min(Je,pt)),S.maxZoom),_t=n.pointGeometry.convert(S.offset),at=new n.pointGeometry((S.padding.left-S.padding.right)/2,(S.padding.top-S.padding.bottom)/2).rotate(b*Math.PI/180),At=_t.add(at).mult(ee.scale/ee.zoomScale(yt));return{center:ee.unproject(de.add(Ee).div(2).sub(At)),zoom:yt,bearing:b}}fitBounds(s,d,b){return this._fitInternal(this.cameraForBounds(s,d),d,b)}fitScreenCoordinates(s,d,b,S,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.pointGeometry.convert(s)),this.transform.pointLocation(n.pointGeometry.convert(d)),b,S),S,O)}_fitInternal(s,d,b){return s?(delete(d=n.extend(s,d)).padding,d.linear?this.easeTo(d,b):this.flyTo(d,b)):this}jumpTo(s,d){this.stop();const b=this.transform;let S=!1,O=!1,ee=!1;return"zoom"in s&&b.zoom!==+s.zoom&&(S=!0,b.zoom=+s.zoom),s.center!==void 0&&(b.center=n.LngLat.convert(s.center)),"bearing"in s&&b.bearing!==+s.bearing&&(O=!0,b.bearing=+s.bearing),"pitch"in s&&b.pitch!==+s.pitch&&(ee=!0,b.pitch=+s.pitch),s.padding==null||b.isPaddingEqual(s.padding)||(b.padding=s.padding),this.fire(new n.Event("movestart",d)).fire(new n.Event("move",d)),S&&this.fire(new n.Event("zoomstart",d)).fire(new n.Event("zoom",d)).fire(new n.Event("zoomend",d)),O&&this.fire(new n.Event("rotatestart",d)).fire(new n.Event("rotate",d)).fire(new n.Event("rotateend",d)),ee&&this.fire(new n.Event("pitchstart",d)).fire(new n.Event("pitch",d)).fire(new n.Event("pitchend",d)),this.fire(new n.Event("moveend",d))}calculateCameraOptionsFromTo(s,d,b,S=0){const O=n.MercatorCoordinate.fromLngLat(s,d),ee=n.MercatorCoordinate.fromLngLat(b,S),le=ee.x-O.x,de=ee.y-O.y,Ee=ee.z-O.z,Ne=Math.hypot(le,de,Ee);if(Ne===0)throw new Error("Can't calculate camera options with same From and To");const Fe=Math.hypot(le,de),qe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ne/this.transform.tileSize),tt=180*Math.atan2(le,-de)/Math.PI;let Qe=180*Math.acos(Fe/Ne)/Math.PI;return Qe=Ee<0?90-Qe:90+Qe,{center:ee.toLngLat(),zoom:qe,pitch:Qe,bearing:tt}}easeTo(s,d){this._stop(!1,s.easeId),((s=n.extend({offset:[0,0],duration:500,easing:n.ease},s)).animate===!1||!s.essential&&n.exported.prefersReducedMotion)&&(s.duration=0);const b=this.transform,S=this.getZoom(),O=this.getBearing(),ee=this.getPitch(),le=this.getPadding(),de="zoom"in s?+s.zoom:S,Ee="bearing"in s?this._normalizeBearing(s.bearing,O):O,Ne="pitch"in s?+s.pitch:ee,Fe="padding"in s?s.padding:b.padding,qe=n.pointGeometry.convert(s.offset);let tt=b.centerPoint.add(qe);const Qe=b.pointLocation(tt),Je=n.LngLat.convert(s.center||Qe);this._normalizeCenter(Je);const pt=b.project(Qe),yt=b.project(Je).sub(pt),_t=b.zoomScale(de-S);let at,At;s.around&&(at=n.LngLat.convert(s.around),At=b.locationPoint(at));const Et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||de!==S,this._rotating=this._rotating||O!==Ee,this._pitching=this._pitching||Ne!==ee,this._padding=!b.isPaddingEqual(Fe),this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Et),this._ease(Nt=>{if(this._zooming&&(b.zoom=n.number(S,de,Nt)),this._rotating&&(b.bearing=n.number(O,Ee,Nt)),this._pitching&&(b.pitch=n.number(ee,Ne,Nt)),this._padding&&(b.interpolatePadding(le,Fe,Nt),tt=b.centerPoint.add(qe)),at)b.setLocationAtPoint(at,At);else{const Ot=b.zoomScale(b.zoom-S),$t=de>S?Math.min(2,_t):Math.max(.5,_t),Lt=Math.pow($t,1-Nt),ai=b.unproject(pt.add(yt.mult(Nt*Lt)).mult(Ot));b.setLocationAtPoint(b.renderWorldCopies?ai.wrap():ai,tt)}this._fireMoveEvents(d)},Nt=>{this._afterEase(d,Nt)},s),this}_prepareEase(s,d,b={}){this._moving=!0,this.fire(new n.Event("freezeElevation",{freeze:!0})),d||b.moving||this.fire(new n.Event("movestart",s)),this._zooming&&!b.zooming&&this.fire(new n.Event("zoomstart",s)),this._rotating&&!b.rotating&&this.fire(new n.Event("rotatestart",s)),this._pitching&&!b.pitching&&this.fire(new n.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new n.Event("move",s)),this._zooming&&this.fire(new n.Event("zoom",s)),this._rotating&&this.fire(new n.Event("rotate",s)),this._pitching&&this.fire(new n.Event("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId,this.fire(new n.Event("freezeElevation",{freeze:!1}));const b=this._zooming,S=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new n.Event("zoomend",s)),S&&this.fire(new n.Event("rotateend",s)),O&&this.fire(new n.Event("pitchend",s)),this.fire(new n.Event("moveend",s))}flyTo(s,d){if(!s.essential&&n.exported.prefersReducedMotion){const Ii=n.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ii,d)}this.stop(),s=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},s);const b=this.transform,S=this.getZoom(),O=this.getBearing(),ee=this.getPitch(),le=this.getPadding(),de="zoom"in s?n.clamp(+s.zoom,b.minZoom,b.maxZoom):S,Ee="bearing"in s?this._normalizeBearing(s.bearing,O):O,Ne="pitch"in s?+s.pitch:ee,Fe="padding"in s?s.padding:b.padding,qe=b.zoomScale(de-S),tt=n.pointGeometry.convert(s.offset);let Qe=b.centerPoint.add(tt);const Je=b.pointLocation(Qe),pt=n.LngLat.convert(s.center||Je);this._normalizeCenter(pt);const yt=b.project(Je),_t=b.project(pt).sub(yt);let at=s.curve;const At=Math.max(b.width,b.height),Et=At/qe,Nt=_t.mag();if("minZoom"in s){const Ii=n.clamp(Math.min(s.minZoom,S,de),b.minZoom,b.maxZoom),Or=At/b.zoomScale(Ii-S);at=Math.sqrt(Or/Nt*2)}const Ot=at*at;function $t(Ii){const Or=(Et*Et-At*At+(Ii?-1:1)*Ot*Ot*Nt*Nt)/(2*(Ii?Et:At)*Ot*Nt);return Math.log(Math.sqrt(Or*Or+1)-Or)}function Lt(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function ai(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}const Zt=$t(0);let li=function(Ii){return ai(Zt)/ai(Zt+at*Ii)},Xi=function(Ii){return At*((ai(Zt)*(Lt(Or=Zt+at*Ii)/ai(Or))-Lt(Zt))/Ot)/Nt;var Or},or=($t(1)-Zt)/at;if(Math.abs(Nt)<1e-6||!isFinite(or)){if(Math.abs(At-Et)<1e-6)return this.easeTo(s,d);const Ii=Et<At?-1:1;or=Math.abs(Math.log(Et/At))/at,Xi=function(){return 0},li=function(Or){return Math.exp(Ii*at*Or)}}return s.duration="duration"in s?+s.duration:1e3*or/("screenSpeed"in s?+s.screenSpeed/at:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=O!==Ee,this._pitching=Ne!==ee,this._padding=!b.isPaddingEqual(Fe),this._prepareEase(d,!1),this._ease(Ii=>{const Or=Ii*or,jr=1/li(Or);b.zoom=Ii===1?de:S+b.scaleZoom(jr),this._rotating&&(b.bearing=n.number(O,Ee,Ii)),this._pitching&&(b.pitch=n.number(ee,Ne,Ii)),this._padding&&(b.interpolatePadding(le,Fe,Ii),Qe=b.centerPoint.add(tt));const xr=Ii===1?pt:b.unproject(yt.add(_t.mult(Xi(Or))).mult(jr));b.setLocationAtPoint(b.renderWorldCopies?xr.wrap():xr,Qe),this._fireMoveEvents(d)},()=>this._afterEase(d),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,d)}if(!s){const b=this.handlers;b&&b.stop(!1)}return this}_ease(s,d,b){b.animate===!1||b.duration===0?(s(1),d()):(this._easeStart=n.exported.now(),this._easeOptions=b,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((n.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,d){s=n.wrap(s,-180,180);const b=Math.abs(s-d);return Math.abs(s-360-d)<b&&(s-=360),Math.abs(s+360-d)<b&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const b=s.lng-d.center.lng;s.lng+=b>180?-360:b<-180?360:0}}class iu{constructor(s={}){this.options=s,n.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const b=this._map._getUIString(`AttributionControl.${d}`);s.title=b,s.setAttribute("aria-label",b)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(S=>typeof S!="string"?"":S)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const d=this._map.style.sourceCaches;for(const S in d){const O=d[S];if(O.used||O.usedForTerrain){const ee=O.getSource();ee.attribution&&s.indexOf(ee.attribution)<0&&s.push(ee.attribution)}}s=s.filter(S=>String(S).trim()),s.sort((S,O)=>S.length-O.length),s=s.filter((S,O)=>{for(let ee=O+1;ee<s.length;ee++)if(s[ee].indexOf(S)>=0)return!1;return!0});const b=s.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,s.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class $d{constructor(s={}){this.options=s,n.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const d=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact","mapboxgl-compact"):d.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class dm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,b=d?this._queue.concat(d):this._queue;for(const S of b)if(S.id===s)return void(S.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const b of d)if(!b.cancelled&&(b.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const pm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Jy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Va={showCompass:!0,showZoom:!0,visualizePitch:!1};class ru{constructor(s,d,b=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new fi({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,b&&(this.mousePitch=new zd({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(d,"mousedown",this.mousedown),y.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(d,"touchmove",this.touchmove),y.addEventListener(d,"touchend",this.touchend),y.addEventListener(d,"touchcancel",this.reset)}down(s,d){this.mouseRotate.mousedown(s,d),this.mousePitch&&this.mousePitch.mousedown(s,d),y.disableDrag()}move(s,d){const b=this.map,S=this.mouseRotate.mousemoveWindow(s,d);if(S&&S.bearingDelta&&b.setBearing(b.getBearing()+S.bearingDelta),this.mousePitch){const O=this.mousePitch.mousemoveWindow(s,d);O&&O.pitchDelta&&b.setPitch(b.getPitch()+O.pitchDelta)}}off(){const s=this.element;y.removeEventListener(s,"mousedown",this.mousedown),y.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(s,"touchmove",this.touchmove),y.removeEventListener(s,"touchend",this.touchend),y.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(s){this.down(n.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),y.mousePos(this.element,s)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(s){this.move(s,y.mousePos(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Si(E,s,d){if(E=new n.LngLat(E.lng,E.lat),s){const b=new n.LngLat(E.lng-360,E.lat),S=new n.LngLat(E.lng+360,E.lat),O=d.locationPoint(E).distSqr(s);d.locationPoint(b).distSqr(s)<O?E=b:d.locationPoint(S).distSqr(s)<O&&(E=S)}for(;Math.abs(E.lng-d.center.lng)>180;){const b=d.locationPoint(E);if(b.x>=0&&b.y>=0&&b.x<=d.width&&b.y<=d.height)break;E.lng>d.center.lng?E.lng-=360:E.lng+=360}return E}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bc(E,s,d){const b=E.classList;for(const S in Di)b.remove(`maplibregl-${d}-anchor-${S}`,`mapboxgl-${d}-anchor-${S}`);b.add(`maplibregl-${d}-anchor-${s}`,`mapboxgl-${d}-anchor-${s}`)}class Fc extends n.Evented{constructor(s,d){if(super(),(s instanceof HTMLElement||d)&&(s=n.extend({element:s},d)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=n.pointGeometry.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const b=y.createNS("http://www.w3.org/2000/svg","svg"),S=41,O=27;b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height",`${S}px`),b.setAttributeNS(null,"width",`${O}px`),b.setAttributeNS(null,"viewBox",`0 0 ${O} ${S}`);const ee=y.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");const le=y.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill-rule","nonzero");const de=y.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(3.0, 29.0)"),de.setAttributeNS(null,"fill","#000000");const Ee=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _t of Ee){const at=y.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",_t.rx),at.setAttributeNS(null,"ry",_t.ry),de.appendChild(at)}const Ne=y.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);const Fe=y.createNS("http://www.w3.org/2000/svg","path");Fe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Fe);const qe=y.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"fill","#000000");const tt=y.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),qe.appendChild(tt);const Qe=y.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Qe.setAttributeNS(null,"fill","#FFFFFF");const Je=y.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=y.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=y.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),Je.appendChild(pt),Je.appendChild(yt),le.appendChild(de),le.appendChild(Ne),le.appendChild(qe),le.appendChild(Qe),le.appendChild(Je),b.appendChild(le),b.setAttributeNS(null,"height",S*this._scale+"px"),b.setAttributeNS(null,"width",O*this._scale+"px"),this._element.appendChild(b),this._offset=n.pointGeometry.convert(s&&s.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()}),Bc(this._element,this._anchor,"marker"),this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=n.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(s){const d=s.code,b=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(s){const d=s.originalEvent.target,b=this._element;this._popup&&(d===b||b.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}_update(s){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),s&&s.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${d}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),O=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*O?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(s){return this._offset=n.pointGeometry.convert(s),this._update(),this}_onMove(s){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"}_addDragHandler(s){this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Vd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bn,Jo=0,js=!1;const ex={maxWidth:100,unit:"metric"};function Uc(E,s,d){const b=d&&d.maxWidth||100,S=E._container.clientHeight/2,O=E.unproject([0,S]),ee=E.unproject([b,S]),le=O.distanceTo(ee);if(d&&d.unit==="imperial"){const de=3.2808*le;de>5280?Jr(s,b,de/5280,E._getUIString("ScaleControl.Miles")):Jr(s,b,de,E._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Jr(s,b,le/1852,E._getUIString("ScaleControl.NauticalMiles")):le>=1e3?Jr(s,b,le/1e3,E._getUIString("ScaleControl.Kilometers")):Jr(s,b,le,E._getUIString("ScaleControl.Meters"))}function Jr(E,s,d,b){const S=function(O){const ee=Math.pow(10,`${Math.floor(O)}`.length-1);let le=O/ee;return le=le>=10?10:le>=5?5:le>=3?3:le>=2?2:le>=1?1:function(de){const Ee=Math.pow(10,Math.ceil(-Math.log(de)/Math.LN10));return Math.round(de*Ee)/Ee}(le),ee*le}(d);E.style.width=s*(S/d)+"px",E.innerHTML=`${S}&nbsp;${b}`}const Rn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},fm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zl(E){if(E){if(typeof E=="number"){const s=Math.round(Math.sqrt(.5*Math.pow(E,2)));return{center:new n.pointGeometry(0,0),top:new n.pointGeometry(0,E),"top-left":new n.pointGeometry(s,s),"top-right":new n.pointGeometry(-s,s),bottom:new n.pointGeometry(0,-E),"bottom-left":new n.pointGeometry(s,-s),"bottom-right":new n.pointGeometry(-s,-s),left:new n.pointGeometry(E,0),right:new n.pointGeometry(-E,0)}}if(E instanceof n.pointGeometry||Array.isArray(E)){const s=n.pointGeometry.convert(E);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:n.pointGeometry.convert(E.center||[0,0]),top:n.pointGeometry.convert(E.top||[0,0]),"top-left":n.pointGeometry.convert(E["top-left"]||[0,0]),"top-right":n.pointGeometry.convert(E["top-right"]||[0,0]),bottom:n.pointGeometry.convert(E.bottom||[0,0]),"bottom-left":n.pointGeometry.convert(E["bottom-left"]||[0,0]),"bottom-right":n.pointGeometry.convert(E["bottom-right"]||[0,0]),left:n.pointGeometry.convert(E.left||[0,0]),right:n.pointGeometry.convert(E.right||[0,0])}}return zl(new n.pointGeometry(0,0))}const $c={supported:p,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:class extends tu{constructor(E){var s;if(n.PerformanceUtils.mark(n.PerformanceMarkers.create),(E=n.extend({},Jy,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qh(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._maxTileCacheSize=E.maxTileCacheSize,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new dm,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},pm,E.locale),this._clickTolerance=E.clickTolerance,this._pixelRatio=(s=E.pixelRatio)!==null&&s!==void 0?s:devicePixelRatio,this._requestManager=new k(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ga(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new tm(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,n.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new iu({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new $d,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new n.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new n.Event(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new n.Event("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(E,s){if(s===void 0&&(s=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=E.onAdd(this);this._controls.push(E);const b=this._controlPositions[s];return s.indexOf("bottom")!==-1?b.insertBefore(d,b.firstChild):b.appendChild(d),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(E);return s>-1&&this._controls.splice(s,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,s,d,b){return b==null&&this.style.terrain&&(b=this.transform.getElevation(d,this.style.terrain)),super.calculateCameraOptionsFromTo(E,s,d,b)}resize(E){const s=this._containerDimensions(),d=s[0],b=s[1];this._resizeCanvas(d,b,this.getPixelRatio()),this.transform.resize(d,b),this.painter.resize(d,b,this.getPixelRatio());const S=!this._moving;return S&&(this.stop(),this.fire(new n.Event("movestart",E)).fire(new n.Event("move",E))),this.fire(new n.Event("resize",E)),S&&this.fire(new n.Event("moveend",E)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(E){const[s,d]=this._containerDimensions();this._pixelRatio=E,this._resizeCanvas(s,d,E),this.painter.resize(s,d,E)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(n.LngLatBounds.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(n.LngLat.convert(E),this.style&&this.style.terrain)}unproject(E){return this.transform.pointLocation(n.pointGeometry.convert(E),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(E,s,d){if(E==="mouseenter"||E==="mouseover"){let b=!1;return{layer:s,listener:d,delegates:{mousemove:O=>{const ee=this.getLayer(s)?this.queryRenderedFeatures(O.point,{layers:[s]}):[];ee.length?b||(b=!0,d.call(this,new Zs(E,this,O.originalEvent,{features:ee}))):b=!1},mouseout:()=>{b=!1}}}}if(E==="mouseleave"||E==="mouseout"){let b=!1;return{layer:s,listener:d,delegates:{mousemove:ee=>{(this.getLayer(s)?this.queryRenderedFeatures(ee.point,{layers:[s]}):[]).length?b=!0:b&&(b=!1,d.call(this,new Zs(E,this,ee.originalEvent)))},mouseout:ee=>{b&&(b=!1,d.call(this,new Zs(E,this,ee.originalEvent)))}}}}{const b=S=>{const O=this.getLayer(s)?this.queryRenderedFeatures(S.point,{layers:[s]}):[];O.length&&(S.features=O,d.call(this,S),delete S.features)};return{layer:s,listener:d,delegates:{[E]:b}}}}on(E,s,d){if(d===void 0)return super.on(E,s);const b=this._createDelegatedListener(E,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(b);for(const S in b.delegates)this.on(S,b.delegates[S]);return this}once(E,s,d){if(d===void 0)return super.once(E,s);const b=this._createDelegatedListener(E,s,d);for(const S in b.delegates)this.once(S,b.delegates[S]);return this}off(E,s,d){return d===void 0?super.off(E,s):(this._delegatedListeners&&this._delegatedListeners[E]&&(b=>{const S=this._delegatedListeners[E];for(let O=0;O<S.length;O++){const ee=S[O];if(ee.layer===s&&ee.listener===d){for(const le in ee.delegates)this.off(le,ee.delegates[le]);return S.splice(O,1),this}}})(),this)}queryRenderedFeatures(E,s){if(!this.style)return[];let d;if(s!==void 0||E===void 0||E instanceof n.pointGeometry||Array.isArray(E)||(s=E,E=void 0),s=s||{},(E=E||[[0,0],[this.transform.width,this.transform.height]])instanceof n.pointGeometry||typeof E[0]=="number")d=[n.pointGeometry.convert(E)];else{const b=n.pointGeometry.convert(E[0]),S=n.pointGeometry.convert(E[1]);d=[b,new n.pointGeometry(S.x,b.y),S,new n.pointGeometry(b.x,S.y),b]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(E,s){return this.style.querySourceFeatures(E,s)}setStyle(E,s){return(s=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(E,s))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const s=this._locale[E];if(s==null)throw new Error(`Missing UI string '${E}'`);return s}_updateStyle(E,s){return this.style&&(this.style.setEventedParent(null),this.style._remove()),E?(this.style=new jn(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E):this.style.loadJSON(E),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new jn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,s){if(typeof E=="string"){const d=this._requestManager.transformRequest(E,n.ResourceType.Style);n.getJSON(d,(b,S)=>{b?this.fire(new n.ErrorEvent(b)):S&&this._updateDiff(S,s)})}else typeof E=="object"&&this._updateDiff(E,s)}_updateDiff(E,s){try{this.style.setState(E)&&this._update(!0)}catch(d){n.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(E,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")}addSource(E,s){return this._lazyInitEmptyStyle(),this.style.addSource(E,s),this._update(!0)}isSourceLoaded(E){const s=this.style&&this.style.sourceCaches[E];if(s!==void 0)return s.loaded();this.fire(new n.ErrorEvent(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){return this.style.setTerrain(E),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const s in E){const d=E[s]._tiles;for(const b in d){const S=d[b];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(E,s,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,s,d)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,s,{pixelRatio:d=1,sdf:b=!1,stretchX:S,stretchY:O,content:ee}={}){if(this._lazyInitEmptyStyle(),s instanceof HTMLImageElement||n.isImageBitmap(s)){const{width:le,height:de,data:Ee}=n.exported.getImageData(s);this.style.addImage(E,{data:new n.RGBAImage({width:le,height:de},Ee),pixelRatio:d,stretchX:S,stretchY:O,content:ee,sdf:b,version:0})}else{if(s.width===void 0||s.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:le,height:de,data:Ee}=s,Ne=s;this.style.addImage(E,{data:new n.RGBAImage({width:le,height:de},new Uint8Array(Ee)),pixelRatio:d,stretchX:S,stretchY:O,content:ee,sdf:b,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,E)}}}updateImage(E,s){const d=this.style.getImage(E);if(!d)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=s instanceof HTMLImageElement||n.isImageBitmap(s)?n.exported.getImageData(s):s,{width:S,height:O,data:ee}=b;if(S===void 0||O===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==d.data.width||O!==d.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const le=!(s instanceof HTMLImageElement||n.isImageBitmap(s));d.data.replace(ee,le),this.style.updateImage(E,d)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,s){n.getImage(this._requestManager.transformRequest(E,n.ResourceType.Image),s)}listImages(){return this.style.listImages()}addLayer(E,s){return this._lazyInitEmptyStyle(),this.style.addLayer(E,s),this._update(!0)}moveLayer(E,s){return this.style.moveLayer(E,s),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}setLayerZoomRange(E,s,d){return this.style.setLayerZoomRange(E,s,d),this._update(!0)}setFilter(E,s,d={}){return this.style.setFilter(E,s,d),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,s,d,b={}){return this.style.setPaintProperty(E,s,d,b),this._update(!0)}getPaintProperty(E,s){return this.style.getPaintProperty(E,s)}setLayoutProperty(E,s,d,b={}){return this.style.setLayoutProperty(E,s,d,b),this._update(!0)}getLayoutProperty(E,s){return this.style.getLayoutProperty(E,s)}setLight(E,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,s){return this.style.setFeatureState(E,s),this._update()}removeFeatureState(E,s){return this.style.removeFeatureState(E,s),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,s=0;return this._container&&(E=this._container.clientWidth||400,s=this._container.clientHeight||300),[E,s]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map","mapboxgl-map");const s=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",E);this._interactive&&s.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1],this.getPixelRatio());const b=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",E),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(O=>{S[O]=y.create("div",`maplibregl-ctrl-${O} mapboxgl-ctrl-${O}`,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const E=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",E);let s="Control",d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",s="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${d}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",b=>{b.key===s&&(this._metaPress=!0)}),document.addEventListener("keyup",b=>{b.key===s&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",b=>{this._onCooperativeGesture(b,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(E,s,d){this._canvas.width=d*E,this._canvas.height=d*s,this._canvas.style.width=`${E}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const E=n.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl",E)||this._canvas.getContext("experimental-webgl",E);s?(this.painter=new em(s,this.transform),n.exported$1.testSupport(s)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(E){E.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:E}))}_contextRestored(E){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:E}))}_onMapScroll(E){if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(E,s,d){return!s&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){let s,d=0;const b=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(s=b.createQueryEXT(),b.beginQueryEXT(b.TIME_ELAPSED_EXT,s),d=n.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let S=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ee=this.transform.zoom,le=n.exported.now();this.style.zoomHistory.update(ee,le);const de=new n.EvaluationParameters(ee,{now:le,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ee=de.crossFadingFactor();Ee===1&&Ee===this._crossFadingFactor||(S=!0,this._crossFadingFactor=Ee),this.style.update(de)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.load),this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||S)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ee=n.exported.now()-d;b.endQueryEXT(b.TIME_ELAPSED_EXT,s),setTimeout(()=>{const le=b.getQueryObjectEXT(s,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(s),this.fire(new n.Event("gpu-timing-frame",{cpuTime:ee,gpuTime:le}))},50)}if(this.listens("gpu-timing-layer")){const ee=this.painter.collectGpuTimers();setTimeout(()=>{const le=this.painter.queryGpuTimers(ee);this.fire(new n.Event("gpu-timing-layer",{layerTimes:le}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),n.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new n.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=n.exported.frame(E=>{n.PerformanceUtils.frame(E),this._frame=null,this._render(E)}))}_onWindowOnline(){this._update()}_onWindowResize(E){this._trackResize&&this.resize({originalEvent:E})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}_setCacheLimits(E,s){n.setCacheLimits(E,s)}get version(){return"2.4.0"}},NavigationControl:class{constructor(E){this.options=n.extend({},Va,E),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const E=this._map.getZoom(),s=E===this._map.getMaxZoom(),d=E===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const E=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=E}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ru(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,s){const d=y.create("button",E,this._container);return d.type="button",d.addEventListener("click",s),d}_setButtonTitle(E,s){const d=this._map._getUIString(`NavigationControl.${s}`);E.title=d,E.setAttribute("aria-label",d)}},GeolocateControl:class extends n.Evented{constructor(E){super(),this.options=n.extend({},Vd,E),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(E){var s;return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,Bn!==void 0?s(Bn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{Bn=d.state!=="denied",s(Bn)}):(Bn=!!window.navigator.geolocation,s(Bn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Jo=0,js=!1}_isOutOfMapMaxBounds(E){const s=this._map.getMaxBounds(),d=E.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(E){if(this._map){if(this._isOutOfMapMaxBounds(E))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",E)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=E,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(E),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(E),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",E)),this._finish()}}_updateCamera(E){const s=new n.LngLat(E.coords.longitude,E.coords.latitude),d=E.coords.accuracy,b=this._map.getBearing(),S=n.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(d),S,{geolocateSource:!0})}_updateMarker(E){if(E){const s=new n.LngLat(E.coords.longitude,E.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=E.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const E=this._map._container.clientHeight/2,s=this._map.unproject([0,E]),d=this._map.unproject([1,E]),b=s.distanceTo(d),S=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=`${S}px`,this._circleElement.style.height=`${S}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(E){if(this._map){if(this.options.trackUserLocation)if(E.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(E.code===3&&js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",E)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(E){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",E===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Fc(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new n.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Jo--,js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Jo++,Jo>1?(E={maximumAge:6e5,timeout:0},js=!0):(E=this.options.positionOptions,js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:iu,LogoControl:$d,ScaleControl:class{constructor(E){this.options=n.extend({},ex,E),n.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Uc(this._map,this._container,this.options)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(E){this.options.unit=E,Uc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const E=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(E){this.options=E,n.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends n.Evented{constructor(E){super(),this.options=n.extend(Object.create(Rn),E),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=n.LngLat.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const s=document.createDocumentFragment(),d=document.createElement("body");let b;for(d.innerHTML=E;b=d.firstChild,b;)s.appendChild(b);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(E){this._update(E.point)}_onMouseMove(E){this._update(E.point)}_onDrag(E){this._update(E.point)}_update(E){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(O=>this._container.classList.add(O)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!E))return;const s=this._pos=this._trackPointer&&E?E:this._map.project(this._lngLat);let d=this.options.anchor;const b=zl(this.options.offset);if(!d){const O=this._container.offsetWidth,ee=this._container.offsetHeight;let le;le=s.y+b.bottom.y<ee?["top"]:s.y>this._map.transform.height-ee?["bottom"]:[],s.x<O/2?le.push("left"):s.x>this._map.transform.width-O/2&&le.push("right"),d=le.length===0?"bottom":le.join("-")}const S=s.add(b[d]).round();y.setTransform(this._container,`${Di[d]} translate(${S.x}px,${S.y}px)`),Bc(this._container,d,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(fm);E&&E.focus()}_onClose(){this.remove()}},Marker:Fc,Style:jn,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.pointGeometry,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,AJAXError:n.AJAXError,config:n.config,CanvasSource:ne,GeoJSONSource:$,ImageSource:H,RasterDEMTileSource:G,RasterTileSource:L,VectorTileSource:U,VideoSource:W,prewarm:function(){_e().acquire(J)},clearPrewarmedResources:function(){const E=ge;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(J),ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return re.workerCount},set workerCount(E){re.workerCount=E},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){n.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage(E){n.clearTileCache(E)},workerUrl:"",addProtocol(E,s){n.config.REGISTERED_PROTOCOLS[E]=s},removeProtocol(E){delete n.config.REGISTERED_PROTOCOLS[E]}};return sn.extend($c,{isSafari:n.isSafari,getPerformanceMetrics:n.PerformanceUtils.getPerformanceMetrics}),$c});var u=a;return u})})(L6);var w2={exports:{}};class z6{constructor(e=[],t=N6){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:o}=this,a=t[e];for(;e>0;){const c=e-1>>1,u=t[c];if(o(a,u)>=0)break;t[e]=u,e=c}t[e]=a}_down(e){const{data:t,compare:o}=this,a=this.length>>1,c=t[e];for(;e<a;){let u=(e<<1)+1,n=t[u];const p=u+1;if(p<this.length&&o(t[p],n)<0&&(u=p,n=t[p]),o(n,c)>=0)break;t[e]=n,e=u}t[e]=c}}function N6(i,e){return i<e?-1:i>e?1:0}const O6=Object.freeze(Object.defineProperty({__proto__:null,default:z6},Symbol.toStringTag,{value:"Module"})),j6=hM(O6);var pg=j6;pg.default&&(pg=pg.default);w2.exports=T2;w2.exports.default=T2;function T2(i,e,t){e=e||1;for(var o,a,c,u,n=0;n<i[0].length;n++){var p=i[0][n];(!n||p[0]<o)&&(o=p[0]),(!n||p[1]<a)&&(a=p[1]),(!n||p[0]>c)&&(c=p[0]),(!n||p[1]>u)&&(u=p[1])}var m=c-o,g=u-a,v=Math.min(m,g),y=v/2;if(v===0){var k=[o,a];return k.distance=0,k}for(var _=new pg(void 0,B6),T=o;T<c;T+=v)for(var M=a;M<u;M+=v)_.push(new Zl(T+y,M+y,y,i));var A=U6(i),x=new Zl(o+m/2,a+g/2,0,i);x.d>A.d&&(A=x);for(var P=_.length;_.length;){var D=_.pop();D.d>A.d&&(A=D,t&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,P)),!(D.max-A.d<=e)&&(y=D.h/2,_.push(new Zl(D.x-y,D.y-y,y,i)),_.push(new Zl(D.x+y,D.y-y,y,i)),_.push(new Zl(D.x-y,D.y+y,y,i)),_.push(new Zl(D.x+y,D.y+y,y,i)),P+=4)}t&&(console.log("num probes: "+P),console.log("best distance: "+A.d));var w=[A.x,A.y];return w.distance=A.d,w}function B6(i,e){return e.max-i.max}function Zl(i,e,t,o){this.x=i,this.y=e,this.h=t,this.d=F6(i,e,o),this.max=this.d+this.h*Math.SQRT2}function F6(i,e,t){for(var o=!1,a=1/0,c=0;c<t.length;c++)for(var u=t[c],n=0,p=u.length,m=p-1;n<p;m=n++){var g=u[n],v=u[m];g[1]>e!=v[1]>e&&i<(v[0]-g[0])*(e-g[1])/(v[1]-g[1])+g[0]&&(o=!o),a=Math.min(a,$6(i,e,g,v))}return a===0?0:(o?1:-1)*Math.sqrt(a)}function U6(i){for(var e=0,t=0,o=0,a=i[0],c=0,u=a.length,n=u-1;c<u;n=c++){var p=a[c],m=a[n],g=p[0]*m[1]-m[0]*p[1];t+=(p[0]+m[0])*g,o+=(p[1]+m[1])*g,e+=g*3}return e===0?new Zl(a[0][0],a[0][1],0,i):new Zl(t/e,o/e,0,i)}function $6(i,e,t,o){var a=t[0],c=t[1],u=o[0]-a,n=o[1]-c;if(u!==0||n!==0){var p=((i-a)*u+(e-c)*n)/(u*u+n*n);p>1?(a=o[0],c=o[1]):p>0&&(a+=u*p,c+=n*p)}return u=i-a,n=e-c,u*u+n*n}var V6=typeof Na=="object"&&Na&&Na.Object===Object&&Na,G6=typeof self=="object"&&self&&self.Object===Object&&self;V6||G6||Function("return this")();var H6={exports:{}};(function(i,e){var t=function(){var o={},a=Math.PI/180,c=180/Math.PI,u=6378137,n=20037508342789244e-9;function p(g){return Number(g)===g&&g%1!==0}function m(g){if(g=g||{},this.size=g.size||256,this.expansion=g.antimeridian===!0?2:1,!o[this.size]){var v=this.size,y=o[this.size]={};y.Bc=[],y.Cc=[],y.zc=[],y.Ac=[];for(var k=0;k<30;k++)y.Bc.push(v/360),y.Cc.push(v/(2*Math.PI)),y.zc.push(v/2),y.Ac.push(v),v*=2}this.Bc=o[this.size].Bc,this.Cc=o[this.size].Cc,this.zc=o[this.size].zc,this.Ac=o[this.size].Ac}return m.prototype.px=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),k=y/2,_=y/360,T=y/(2*Math.PI),M=y,A=Math.min(Math.max(Math.sin(a*g[1]),-.9999),.9999),x=k+g[0]*_,P=k+.5*Math.log((1+A)/(1-A))*-T;return x>M*this.expansion&&(x=M*this.expansion),P>M&&(P=M),[x,P]}else{var k=this.zc[v],A=Math.min(Math.max(Math.sin(a*g[1]),-.9999),.9999),x=Math.round(k+g[0]*this.Bc[v]),P=Math.round(k+.5*Math.log((1+A)/(1-A))*-this.Cc[v]);return x>this.Ac[v]*this.expansion&&(x=this.Ac[v]*this.expansion),P>this.Ac[v]&&(P=this.Ac[v]),[x,P]}},m.prototype.ll=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),k=y/360,_=y/(2*Math.PI),T=y/2,M=(g[1]-T)/-_,A=(g[0]-T)/k,x=c*(2*Math.atan(Math.exp(M))-.5*Math.PI);return[A,x]}else{var M=(g[1]-this.zc[v])/-this.Cc[v],A=(g[0]-this.zc[v])/this.Bc[v],x=c*(2*Math.atan(Math.exp(M))-.5*Math.PI);return[A,x]}},m.prototype.bbox=function(g,v,y,k,_){k&&(v=Math.pow(2,y)-1-v);var T=[g*this.size,(+v+1)*this.size],M=[(+g+1)*this.size,v*this.size],A=this.ll(T,y).concat(this.ll(M,y));return _==="900913"?this.convert(A,"900913"):A},m.prototype.xyz=function(g,v,y,k){k==="900913"&&(g=this.convert(g,"WGS84"));var _=[g[0],g[1]],T=[g[2],g[3]],M=this.px(_,v),A=this.px(T,v),x=[Math.floor(M[0]/this.size),Math.floor((A[0]-1)/this.size)],P=[Math.floor(A[1]/this.size),Math.floor((M[1]-1)/this.size)],D={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,P)<0?0:Math.min.apply(Math,P),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,P)};if(y){var w={minY:Math.pow(2,v)-1-D.maxY,maxY:Math.pow(2,v)-1-D.minY};D.minY=w.minY,D.maxY=w.maxY}return D},m.prototype.convert=function(g,v){return v==="900913"?this.forward(g.slice(0,2)).concat(this.forward(g.slice(2,4))):this.inverse(g.slice(0,2)).concat(this.inverse(g.slice(2,4)))},m.prototype.forward=function(g){var v=[u*g[0]*a,u*Math.log(Math.tan(Math.PI*.25+.5*g[1]*a))];return v[0]>n&&(v[0]=n),v[0]<-20037508342789244e-9&&(v[0]=-20037508342789244e-9),v[1]>n&&(v[1]=n),v[1]<-20037508342789244e-9&&(v[1]=-20037508342789244e-9),v},m.prototype.inverse=function(g){return[g[0]*c/u,(Math.PI*.5-2*Math.atan(Math.exp(-g[1]/u)))*c]},m}();i.exports=t})(H6);var Q1={exports:{}};(function(i,e){(function(t,o){o(e,i)})(Na,function(t,o){var a={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function c(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function u(m){try{delete window[m]}catch{window[m]=void 0}}function n(m){var g=document.getElementById(m);g&&document.getElementsByTagName("head")[0].removeChild(g)}function p(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=m,y=g.timeout||a.timeout,k=g.jsonpCallback||a.jsonpCallback,_=void 0;return new Promise(function(T,M){var A=g.jsonpCallbackFunction||c(),x=k+"_"+A;window[A]=function(D){T({ok:!0,json:function(){return Promise.resolve(D)}}),_&&clearTimeout(_),n(x),u(A)},v+=v.indexOf("?")===-1?"?":"&";var P=document.createElement("script");P.setAttribute("src",""+v+k+"="+A),g.charset&&P.setAttribute("charset",g.charset),g.nonce&&P.setAttribute("nonce",g.nonce),g.referrerPolicy&&P.setAttribute("referrerPolicy",g.referrerPolicy),g.crossorigin&&P.setAttribute("crossorigin","true"),P.id=x,document.getElementsByTagName("head")[0].appendChild(P),_=setTimeout(function(){M(new Error("JSONP request to "+m+" timed out")),u(A),n(x),window[A]=function(){u(A)}},y),P.onerror=function(){M(new Error("JSONP request to "+m+" failed")),u(A),n(x),_&&clearTimeout(_)}})}o.exports=p})})(Q1,Q1.exports);var W6=Y6,q6=Object.prototype.hasOwnProperty;function Y6(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var o in t)q6.call(t,o)&&(i[o]=t[o])}return i}var E2={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(o,a){return a.filter(function(c){return t.test(o,c)})},t.test=function(o,a){return t.match(o,a)!==null},t.match=function(o,a,c){c=c||{};var u=0,n=[],p=a.length,m=0,g=0,v=c.pre||"",y=c.post||"",k=c.caseSensitive&&a||a.toLowerCase(),_;o=c.caseSensitive&&o||o.toLowerCase();for(var T=0;T<p;T++)_=a[T],k[T]===o[u]?(_=v+_+y,u+=1,g+=1+g):g=0,m+=g,n[n.length]=_;return u===o.length?(m=k===o?1/0:m,{rendered:n.join(""),score:m}):null},t.filter=function(o,a,c){return!a||a.length===0?[]:typeof o!="string"?a:(c=c||{},a.reduce(function(u,n,p,m){var g=n;c.extract&&(g=c.extract(n));var v=t.match(o,g,c);return v!=null&&(u[u.length]={string:v.rendered,score:v.score,index:p,original:n}),u},[]).sort(function(u,n){var p=n.score-u.score;return p||u.index-n.index}))}})()})(E2);var Z6=E2.exports,Ea=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};Ea.prototype.show=function(){this.element.style.display="block"};Ea.prototype.hide=function(){this.element.style.display="none"};Ea.prototype.add=function(i){this.items.push(i)};Ea.prototype.clear=function(){this.items=[],this.active=0};Ea.prototype.isEmpty=function(){return!this.items.length};Ea.prototype.isVisible=function(){return this.element.style.display==="block"};Ea.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};Ea.prototype.drawItem=function(i,e){var t=document.createElement("li"),o=document.createElement("a");e&&(t.className+=" active"),o.innerHTML=i.string,t.appendChild(o),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};Ea.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};Ea.prototype.move=function(i){this.active=i,this.draw()};Ea.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Ea.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Ea.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var X6=Ea,K6=W6,Q6=Z6,J6=X6,qs=function(i,e,t){return t=t||{},this.options=K6({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new J6(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};qs.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};qs.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};qs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};qs.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};qs.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};qs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};qs.prototype.update=function(i){this.data=i,this.handleKeyUp()};qs.prototype.clear=function(){this.data=[],this.list.clear()};qs.prototype.normalize=function(i){return i=i.toLowerCase(),i};qs.prototype.match=function(i,e){return i.indexOf(e)>-1};qs.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};qs.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},t;this.options.filter?(t=Q6.filter(this.query,this.data,e),t=t.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):t=this.data.map((function(o){var a=this.render(o);return{original:o,string:a}}).bind(this)),i(t)};qs.prototype.getItemValue=function(i){return i};qs.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(t),a=o.lastIndexOf(this.query);a>-1;){var c=a+this.query.length;t=t.slice(0,a)+"<strong>"+t.slice(a,c)+"</strong>"+t.slice(c),a=o.slice(0,a).lastIndexOf(this.query)}return t};qs.prototype.renderError=function(i){this.list.drawError(i)};var eU=qs,tU=eU;typeof window<"u"&&(window.Suggestions=tU);const C2=({query:i,queryKey:e,...t})=>{const o=Ku();return mv({queryKey:e,queryFn:async()=>(await o.query({apiDataQuery:i})).apiDataQuery,...t})},iU={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},Rf=()=>{const{data:i,error:e,isLoading:t,isError:o}=C2({queryKey:["routes","chap"],query:iU,select:a=>a.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:o}},rU=()=>{const{appVersion:i}=ty(),{route:e,isLoading:t}=Rf(),o=$e.useRef(void 0),[a,c]=$e.useState(void 0),u=async()=>{i&&await BS.isCompatibleIsCompatibleGet(i==null?void 0:i.full).then(n=>{c(n)}).catch(n=>{c({compatible:!1,description:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})})};return $e.useEffect(()=>{!i||t||o.current!==(e==null?void 0:e.url)&&(u(),o.current=e==null?void 0:e.url)},[i,e==null?void 0:e.url]),pe.jsx(pe.Fragment,{children:a&&!(a!=null&&a.compatible)&&pe.jsx("div",{className:E1.warningMargin,style:{maxWidth:p0},children:pe.jsx("div",{className:E1.warningMarginInner,children:pe.jsxs(vl,{error:!0,title:"Incompatible versions",children:["Version of the Modeling App is not compatible with the backend (Chap core)",pe.jsx("br",{}),pe.jsx("br",{}),pe.jsx("i",{children:a.description})]})})})})},nU="_infoAboutReportingBugs_1v50c_1",sU="_infoAboutReportingBugsInner_1v50c_7",aU="_icon_1v50c_16",ub={infoAboutReportingBugs:nU,infoAboutReportingBugsInner:sU,icon:aU},oU=()=>{const[i,e]=$e.useState(!0);return pe.jsx("div",{className:ub.infoAboutReportingBugs,children:i&&pe.jsxs("div",{style:{maxWidth:p0},className:ub.infoAboutReportingBugsInner,children:[pe.jsxs("div",{children:[pe.jsx("span",{className:ub.icon,children:pe.jsx(HT,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",pe.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),pe.jsx("div",{children:pe.jsx(Vr,{small:!0,onClick:()=>e(!i),children:pe.jsx(uM,{})})})]})})},lU="_loadingContainer_111ob_1",cU="_noRouteContainer_111ob_8",hU="_noRouteContent_111ob_15",uU="_noRouteTitle_111ob_22",dU="_noRouteText_111ob_31",pU="_noRouteLink_111ob_38",wu={loadingContainer:lU,noRouteContainer:cU,noRouteContent:hU,noRouteTitle:uU,noRouteText:dU,noRouteLink:pU},fU=()=>pe.jsxs("svg",{width:"64",height:"64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pe.jsx("path",{fill:"#F3F5F7",d:"M0 0h64v64H0z"}),pe.jsx("path",{fill:"#F3F5F7",stroke:"#A0ADBA",strokeWidth:"2",d:"M4 13h36v48H4z"}),pe.jsx("path",{fill:"#F3F5F7",stroke:"#A0ADBA",strokeWidth:"2",d:"M10 8h40v53H10z"}),pe.jsx("path",{fill:"#F3F5F7",stroke:"#404B5A",strokeWidth:"2",d:"M16 3h44v58H16z"}),pe.jsx("path",{fill:"#F3F5F7",stroke:"#404B5A",strokeWidth:"2",d:"M22 9h32v16H22z"}),pe.jsx("path",{d:"M26 14h21M26 19h11",stroke:"#404B5A",strokeWidth:"2"}),pe.jsx("path",{fill:"#F3F5F7",stroke:"#A0ADBA",strokeWidth:"2",d:"M22 33h32v16H22z"}),pe.jsx("path",{d:"M26 38h21M26 43h11",stroke:"#A0ADBA",strokeWidth:"2"})]}),mU=({children:i})=>{const{route:e,isLoading:t,error:o}=Rf(),a=Sf();return t?pe.jsx("div",{className:wu.loadingContainer,children:pe.jsx(Tl,{})}):e?i:pe.jsx("div",{className:wu.noRouteContainer,children:pe.jsxs("div",{className:wu.noRouteContent,children:[pe.jsx(fU,{}),pe.jsx("h1",{className:wu.noRouteTitle,children:it.t("Get started with the Modeling app")}),pe.jsxs("div",{className:wu.noRouteText,children:[pe.jsx("p",{children:it.t("To get started with the Modeling app, please create a route that points to a running CHAP server.")}),pe.jsx("p",{children:it.t("Open the settings page to configure the required configuration. Not sure what this is?")}),pe.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:wu.noRouteLink,children:it.t("Learn more about CHAP")})]}),pe.jsx(Vr,{primary:!0,onClick:()=>a("/settings"),children:it.t("Open settings")})]})})},gU="1400px",yU={maxWidth:gU,marginLeft:"auto",marginRight:"auto",padding:"20px 10px 20px 10px"},J1=({component:i})=>pe.jsxs(mU,{children:[pe.jsx(oU,{}),pe.jsx($j,{}),pe.jsx(rU,{}),pe.jsx("div",{style:yU,children:i})]}),xU="_drawerWrapper_1jnc9_1",bU={drawerWrapper:xU};function iv(){return iv=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o])}return i},iv.apply(this,arguments)}var vU=function(e,t){var o={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return o[e]},I0=function(e){var t=e.open,o=e.onClose,a=o===void 0?function(){}:o,c=e.children,u=e.style,n=e.enableOverlay,p=n===void 0?!0:n,m=e.overlayColor,g=m===void 0?"#000":m,v=e.overlayOpacity,y=v===void 0?.4:v,k=e.zIndex,_=k===void 0?100:k,T=e.duration,M=T===void 0?500:T,A=e.direction,x=e.size,P=x===void 0?250:x,D=e.className,w=e.customIdSuffix,I=e.lockBackgroundScroll,N=I===void 0?!1:I,q=e.overlayClassName,Z=q===void 0?"":q,X=$e.useRef(null);$e.useEffect(function(){var L=function(){X.current=window.document.querySelector("body"),X.current&&N&&(X.current.style.overflow=t?"hidden":"")};L()},[t]);var j=$e.useMemo(function(){return w||(Math.random()+1).toString(36).substring(7)},[w]),V={backgroundColor:g.toString(),opacity:y,zIndex:_},U=iv({zIndex:_+1,transitionDuration:M+"ms"},vU(A,P),u);return Me.createElement("div",{id:"EZDrawer"+j,className:"EZDrawer"},Me.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+j,className:"EZDrawer__checkbox",onChange:a,checked:t}),Me.createElement("nav",{role:"navigation",id:"EZDrawer__container"+j,style:U,className:"EZDrawer__container "+D},c),p&&Me.createElement("label",{htmlFor:"EZDrawer__checkbox"+j,id:"EZDrawer__overlay"+j,className:"EZDrawer__overlay "+Z,style:V}))};const _U="_formWrapper_6d4wk_1",wU={formWrapper:_U},TU=({value:i,onChange:e})=>pe.jsx("div",{children:pe.jsxs(os,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[pe.jsx(uo,{value:"week",label:"Weekly"}),pe.jsx(uo,{value:"month",label:"Monthly"})]})}),EU="_datePicker_1yiz7_1",CU="_label_1yiz7_5",SU="_content_1yiz7_14",kU="_box_1yiz7_18",AU="_inputDiv_1yiz7_23",MU="_input_1yiz7_23",Tu={datePicker:EU,label:CU,content:SU,box:kU,inputDiv:AU,input:MU},eT=({label:i,name:e,onChange:t,periodeType:o})=>{const a=$e.useRef(null);return pe.jsxs("div",{className:Tu.datePicker,style:{opacity:o===""?.6:1},children:[pe.jsx("label",{className:Tu.label,children:i}),pe.jsx("div",{className:Tu.content,children:pe.jsx("div",{className:Tu.box,children:pe.jsx("div",{className:Tu.inputDiv,children:pe.jsx("input",{disabled:o==="",className:Tu.input,ref:a,type:o,name:e,onChange:c=>t(c.target.value)})})})})]})},PU="_timePeriodeSelector_fpkps_1",IU="_timePeriodeSelectorInputFields_fpkps_7",DU="_timePeriodeSelectorInputFieldsChild_fpkps_13",Qm={timePeriodeSelector:PU,timePeriodeSelectorInputFields:IU,timePeriodeSelectorInputFieldsChild:DU},RU=(i,e,t)=>t==="week"?LU(i,e):t==="month"?OU(i,e):[],LU=(i,e)=>{let[t,o]=i.split("-W").map(Number),[a,c]=e.split("-W").map(Number);if(a-t>100)return[];let u=[];for(let n=t;n<=a;n++){let p=NU(n),m=n===t?o:1,g=n===a?c:p;for(let v=m;v<=g;v++){let y=`${n}W${String(v).padStart(2,"0")}`;u.push({endDate:void 0,startDate:void 0,id:y})}}return u},zU=i=>{i=new Date(+i),i.setHours(0,0,0,0),i.setDate(i.getDate()+4-(i.getDay()||7));var e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+1)/7);return[i.getFullYear(),t]},NU=i=>{var e=new Date(i,11,31),t=zU(e)[1];return t==1?52:t},OU=(i,e)=>{const[t,o]=i.split("-").map(Number),[a,c]=e.split("-").map(Number);if(a-t>100)return[];let u=[],n=t,p=o;for(;n<a||n===a&&p<=c;){let m=String(p).padStart(2,"0");u.push({id:`${n}${m}`,endDate:void 0,startDate:void 0}),p++,p>12&&(p=1,n++)}return u},S2=({setTimePeriods:i})=>{const[e,t]=$e.useState(""),[o,a]=$e.useState(""),[c,u]=$e.useState(""),n=p=>{a(""),u(""),t(p)};return $e.useEffect(()=>{i(RU(o,c,e))},[o,c]),pe.jsxs("div",{children:[pe.jsx("h3",{children:"Period"}),pe.jsxs("div",{className:Qm.timePeriodeSelector,children:[pe.jsx(TU,{value:e,onChange:n}),pe.jsxs("div",{className:Qm.timePeriodeSelectorInputFields,children:[pe.jsx("div",{className:Qm.timePeriodeSelectorInputFieldsChild,children:pe.jsx(eT,{periodeType:e,label:"Dateset start:",name:"",onChange:a})}),pe.jsx("div",{className:Qm.timePeriodeSelectorInputFieldsChild,children:pe.jsx(eT,{periodeType:e,label:"Dateset end:",name:"",onChange:u})})]})]})]})},jU="_error_1rljs_1",BU={error:jU},FU={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},UU=()=>{var o;const{loading:i,error:e,data:t}=Ta(FU);return{roots:(o=t==null?void 0:t.roots)==null?void 0:o.organisationUnits,error:e,loading:i}},$U=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:o}=UU();return $e.useEffect(()=>{if(t&&!i){const[a]=t;e({...a,selected:[a.path]})}},[t]),t?pe.jsxs("div",{children:[pe.jsx("h3",{children:it.t("Organisation units")}),pe.jsx(IC,{roots:t.map(a=>a.id),selected:i==null?void 0:i.map(a=>a.path),onChange:e,initiallyExpanded:t.map(a=>a.path)})]}):o?pe.jsx("div",{children:o.message}):null},VU={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},GU=()=>{var o;const{loading:i,error:e,data:t}=Ta(VU);return{levels:(o=t==null?void 0:t.levels)==null?void 0:o.organisationUnitLevels,error:e,loading:i}},HU="_selectField_2clxr_1",WU={selectField:HU},qU=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:o,error:a}=GU(),c=u=>{const n={id:u.selected,level:t.find(p=>p.id===u.selected).level};e(n)};return $e.useEffect(()=>{var u;(t==null?void 0:t.length)>2&&!i&&e({id:(u=t[1])==null?void 0:u.id,level:t[1].level})},[t,i,e]),t?pe.jsx("div",{className:WU.selectField,children:pe.jsx(os,{label:it.t("Organisation unit level"),helpText:it.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:o,error:!!a,onChange:c,children:t.map((u,n)=>pe.jsx(uo,{value:u.id,label:u.name},u.id))})}):null},k2=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:o})=>{const a=u=>{u.checked?i([...e,u]):i(e.filter(n=>n.path!==u.path))};function c(){if(e.length===0)return!0;const u=e[0].path.split("/").length;return e.every(n=>n.path.split("/").length===u)}return pe.jsxs(pe.Fragment,{children:[pe.jsx($U,{selectedOrgUnits:e,onChange:u=>{a(u)}}),!c()&&pe.jsx("p",{className:BU.error,children:"Only select organization units that are one the same level."}),pe.jsx(qU,{orgUnitLevels:t,onChange:o})]})},YU=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),ZU=(i,e,t)=>{var n,p,m;const o=i.map(g=>g.dataSource);if(o.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:a,error:c,data:u}=Ta(YU({dataElements:o,periodes:e,orgUnit:t}));return!a&&u&&!c?{data:(n=u==null?void 0:u.request)==null?void 0:n.rows,metaData:(m=(p=u==null?void 0:u.request)==null?void 0:p.metaData)==null?void 0:m.items,error:c,loading:a}:{data:u,metaData:{},error:c,loading:a}},XU={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},KU=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:o,properties:a})=>({type:e,id:t,properties:a,geometry:o})),...i}),QU=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(o=>o.id===t.id||t.properties.parentGraph.includes(o.id)))}),JU=(i,e)=>{const{data:t,loading:o,error:a}=Ta(XU,{variables:{level:i}});return{data:t&&QU(KU(t),e),error:a,loading:o}},e$="_text_b9rbg_1",t$={text:e$},i$=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:o,setAnalyticsMetaData:a,setStartDownload:c,orgUnitLevel:u,selectedOrgUnits:n,analyticsDataLayers:p,setErrorMessages:m})=>{if(u==null)return pe.jsx(pe.Fragment,{});const g="LEVEL-"+u.id+";"+n.map(w=>w.id).join(";"),v=w=>w.map(I=>I.id),{data:y,error:k,loading:_,metaData:T}=ZU(p,v(i),g),{data:M,error:A,loading:x}=JU(u.level,n),P=w=>w.map(I=>({featureName:p.filter(N=>N.dataSource===I)[0].feature,dataItemId:I})),D=w=>{const I=[...new Set(w.map(q=>q[0]))],N=P(I);return o(N),w.map(q=>({featureName:N.filter(Z=>Z.dataItemId===q[0])[0].featureName,orgUnit:q[1],period:q[2],value:parseFloat(q[3])}))};return $e.useEffect(()=>{if(!(_||x)&&(y&&M&&(m([]),e(M),t(D(y)),a(T)),k||A)){const w=[];k&&w.push({description:JSON.stringify(k),title:"Analytics request failed"}),A&&w.push({description:JSON.stringify(A),title:"OrgUnits request failed"}),m(w),c(I=>({...I,startDownload:!1}))}},[_,x]),pe.jsx("p",{className:t$.text,children:"Downloading data.."})};var A2={exports:{}};(function(i,e){(function(t,o){o()})(Na,function(){function t(m,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function o(m,g,v){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){p(y.response,g,v)},y.onerror=function(){console.error("could not download file")},y.send()}function a(m){var g=new XMLHttpRequest;g.open("HEAD",m,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function c(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(g)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Na=="object"&&Na.global===Na?Na:void 0,n=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(m,g,v){var y=u.URL||u.webkitURL,k=document.createElement("a");g=g||m.name||"download",k.download=g,k.rel="noopener",typeof m=="string"?(k.href=m,k.origin===location.origin?c(k):a(k.href)?o(m,g,v):c(k,k.target="_blank")):(k.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(k.href)},4e4),setTimeout(function(){c(k)},0))}:"msSaveOrOpenBlob"in navigator?function(m,g,v){if(g=g||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,v),g);else if(a(m))o(m,g,v);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){c(y)})}}:function(m,g,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return o(m,g,v);var k=m.type==="application/octet-stream",_=/constructor/i.test(u.HTMLElement)||u.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||k&&_||n)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var P=M.result;P=T?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=P:location=P,y=null},M.readAsDataURL(m)}else{var A=u.URL||u.webkitURL,x=A.createObjectURL(m);y?y.location=x:location.href=x,y=null,setTimeout(function(){A.revokeObjectURL(x)},4e4)}});u.saveAs=p.saveAs=p,i.exports=p})})(A2);var r$=A2.exports;const n$=Qu(r$),s$="_errorChap_1v22m_1",a$="_errorBar_1v22m_6",o$="_errorHeader_1v22m_16",l$="_detailedError_1v22m_23",c$="_scrollMissingData_1v22m_29",h$="_notFoundDataTable_1v22m_34",Eu={errorChap:s$,errorBar:a$,errorHeader:o$,detailedError:l$,scrollMissingData:c$,notFoundDataTable:h$},u$="_buttons_1a7lz_1",d$="_text_1a7lz_7",tT={buttons:u$,text:d$},p$=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:o,onClickDownloadOrPostData:a,onButtonSendAction:c})=>{const u=()=>{if(o.length===0)return!0;const m=o[0].path.split("/").length;return o.every(g=>g.path.split("/").length===m)},n=c==="predict"?"Send prediction":"Create dataset",p=c==="predict"?pe.jsx(iy,{}):pe.jsx(xv,{});return pe.jsxs("div",{children:[pe.jsxs("div",{className:tT.buttons,children:[pe.jsx(Vr,{icon:pe.jsx(NT,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!u(),onClick:()=>a("download"),children:"Download data"}),pe.jsx(Vr,{icon:p,primary:!0,loading:i.startDownload&&i.action===c||e,disabled:!t||i.startDownload||!u(),onClick:()=>a(c),children:n})]}),e&&pe.jsx("p",{className:tT.text,children:"Sending data.."})]})},M2=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:o,selectedPeriodItems:a,selectedOrgUnits:c,orgUnitLevel:u,dataLayers:n})=>{const[p,m]=$e.useState({action:"download",startDownload:!1}),[g,v]=$e.useState(!1),[y,k]=$e.useState(void 0),[_,T]=$e.useState(),[M,A]=$e.useState({}),x=n.filter(ue=>ue.origin==="dataItem"),[P,D]=$e.useState([]),[w,I]=$e.useState([]),[N,q]=$e.useState(""),Z=()=>!(u===void 0||c.length==0||a.length==0||o===""||a.length==0||n.length==0||n.some(ue=>ue.feature===""||ue.dataSource===""||ue.origin==="")),X=ue=>{k(void 0),T(void 0),I([]),m({action:ue,startDownload:!0})};$e.useEffect(()=>{if(y&&_){if(q(""),m(ue=>({...ue,startDownload:!1})),p.action==="download"){ne();return}if(V(y))return;p.action==="predict"&&W(),p.action==="new-dataset"&&H()}},[y,_]);const j=(ue,ie,oe,Se)=>{var K;const ye=[],Ce=[...new Set(ue.map(Q=>Q.orgUnit))];a.forEach(Q=>{Ce.forEach(ae=>{var J;let ve=!0;ue.filter(re=>re.featureName===oe).forEach(re=>{if(Q.id==re.period){ve=!1;return}}),ve&&ye.push({covariate:Se,orgUnitName:((J=M[ae])==null?void 0:J.name)||"",period:Q.id})})}),ye.length>0&&ie.push({title:Se+" is missing for the following orgUnit and time periods: ",description:pe.jsxs("div",{children:[pe.jsxs("p",{children:["Total missing: ",ye.length," | Use the"," ",pe.jsx("a",{target:"_blank",href:((K=U==null?void 0:U.systemInfo)==null?void 0:K.contextPath)+"/api/apps/climate-data/index.html#/import",children:"Climate App"})," ","to import climate data."]}),pe.jsx("div",{className:Eu.scrollMissingData,children:pe.jsxs("table",{className:Eu.notFoundDataTable,children:[pe.jsx("thead",{children:pe.jsxs("tr",{children:[pe.jsx("th",{children:"Organisation unit:"}),pe.jsx("th",{children:"Time period:"})]})}),pe.jsx("tbody",{children:ye.map(Q=>pe.jsxs("tr",{children:[pe.jsx("td",{children:Q.orgUnitName}),pe.jsx("td",{children:y0({periodId:Q.period,calendar:"gregory"}).displayName})]}))})]})})]})})},V=ue=>{let ie=[];return n.filter(oe=>oe.origin=="dataItem").forEach(oe=>{var Se;if(((Se=ue.filter(ye=>ye.featureName===oe.feature))==null?void 0:Se.length)===0){const ye='Thes selected data item for covarate "'+oe.feature+'" returned no data.';ie.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:ye})}}),n.find(oe=>oe.feature==="rainfall"&&oe.origin=="dataItem")&&j(ue,ie,"rainfall","Rainfall"),n.find(oe=>oe.feature==="mean_temperature"&&oe.origin=="dataItem")&&j(ue,ie,"mean_temperature","Mean Temperature"),ie.length>0?(I([...w,...ie]),!0):!1},U=ty(),L=()=>{var ue,ie;return{appVersion:((ue=U==null?void 0:U.appVersion)==null?void 0:ue.full)||"Unknown",dhis2Version:((ie=U==null?void 0:U.systemInfo)==null?void 0:ie.version)||"Unknown",dataItemMapper:P}},R=()=>({name:o,dataToBeFetched:F(),metaData:L(),providedData:y,geojson:_}),G=()=>R(),$=()=>({type:"predict",modelId:t==null?void 0:t.name,...R()}),F=()=>n.filter(ue=>ue.origin==="CHAP").map(ue=>({dataSourceName:ue.dataSource,featureName:ue.feature})),H=async()=>{let ue=G();v(!0),await Wu.makeDatasetAnalyticsMakeDatasetPost(ue).then(ie=>{q(""),e()}).catch(ie=>{var oe,Se;(oe=ie==null?void 0:ie.body)!=null&&oe.detail?q(JSON.stringify((Se=ie==null?void 0:ie.body)==null?void 0:Se.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},W=async()=>{let ue=$();v(!0),await Wu.makePredictionAnalyticsMakePredictionPost(ue).then(ie=>{e()}).catch(ie=>{var oe,Se;(oe=ie==null?void 0:ie.body)!=null&&oe.detail?q(JSON.stringify((Se=ie==null?void 0:ie.body)==null?void 0:Se.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},ne=()=>{let ue={};i==="predict"&&(ue=$()),i==="new-dataset"&&(ue=G());var ie=new Blob([JSON.stringify(ue,null,2)],{type:"application/json"});const oe=new Date;n$(ie,i.replaceAll("-","_")+"_chap_request_data_"+oe.toJSON()+".json")};return pe.jsxs("div",{children:[pe.jsx(p$,{formValid:Z(),onButtonSendAction:i,onClickDownloadOrPostData:X,orgUnits:c,isSendingDataToChap:g,startDownload:p}),pe.jsx("p",{className:Eu.errorChap,children:N}),p.startDownload&&Z()&&pe.jsx(i$,{setAnalyticsMetaData:A,setFeatureDataItemMapper:D,model_id:t==null?void 0:t.name,setObservations:k,setGeoJSon:T,analyticsDataLayers:x,startDownload:p,setStartDownload:m,selectedPeriodItems:a,setErrorMessages:I,selectedOrgUnits:c,orgUnitLevel:u}),w.map((ue,ie)=>pe.jsxs("div",{className:Eu.errorBar,children:[pe.jsxs("div",{className:Eu.errorHeader,children:[pe.jsx(jT,{}),pe.jsx("span",{children:ue.title})]}),pe.jsx("span",{className:Eu.detailedError,children:ue.description})]},ie))]})},f$="_dataLineWrapper_epwpx_1",m$="_selectField_epwpx_9",g$="_buttonRight_epwpx_13",y$="_selectDataLineWrapper_epwpx_19",x$="_predictLabel_epwpx_27",mp={dataLineWrapper:f$,selectField:m$,buttonRight:g$,selectDataLineWrapper:y$,predictLabel:x$},b$="_searchSelectField_fpa7s_1",v$="_inputField_fpa7s_6",_$="_input_fpa7s_6",w$="_dropDown_fpa7s_33",T$="_dropDownItem_fpa7s_50",E$="_rightDropDownItem_fpa7s_60",C$="_label_fpa7s_69",S$="_infoSearchItem_fpa7s_75",hl={searchSelectField:b$,inputField:v$,input:_$,dropDown:w$,dropDownItem:T$,rightDropDownItem:E$,label:C$,infoSearchItem:S$},k$=i=>({results:{resource:"dataItems",params:{filter:"displayName:ilike:"+i,fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}}}),A$=({feature:i,onChangeSearchSelectField:e})=>{const[t,o]=$e.useState(""),a=Ku(),[c,u]=$e.useState([]),[n,p]=$e.useState(!1),m=async()=>{try{const x=await a.query(k$(t));u(x.results.dataItems)}catch(x){console.error("Error fetching data:",x)}finally{p(!1)}};$e.useEffect(()=>{if(t.length===0){u([]);return}p(!0);const x=setTimeout(()=>{m()},300);return()=>{clearTimeout(x)}},[t]);const[g,v]=$e.useState(!1),y=x=>{v(!0);const P=x.target.value;o(P)},k=x=>{o(x.displayName),e(i,x.id,x.displayName),v(!1)},_=$e.useRef(null),T=x=>x.replaceAll("_"," ").split(" ").map(P=>P.charAt(0).toUpperCase()+P.slice(1).toLowerCase()).join(" "),M=x=>{_.current&&!_.current.contains(x.target)&&v(!1)},A=()=>n?pe.jsx("li",{className:hl.infoSearchItem,children:"Loading..."}):c.length==0&&t.length==0?pe.jsx("li",{className:hl.infoSearchItem,children:"Start to search by typing"}):c.length==0?pe.jsx("li",{className:hl.infoSearchItem,children:"No match found"}):pe.jsx(pe.Fragment,{children:c.map(x=>pe.jsxs("li",{onClick:()=>k(x),className:hl.dropDownItem,children:[pe.jsx("div",{children:x.displayName}),pe.jsx("div",{className:hl.rightDropDownItem,children:T(x.dimensionItemType)??""})]},x.id))});return $e.useEffect(()=>(document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}),[]),pe.jsxs("div",{ref:_,className:hl.searchSelectField,children:[pe.jsx("label",{className:hl.label,children:pe.jsx("span",{children:T(i.name??"")})}),pe.jsx("input",{type:"search",value:t,onChange:y,placeholder:"Search for indicators, Data Elements, Data Sets, Event Data Items, Program Indicators...",className:hl.inputField}),g&&pe.jsx("ul",{className:hl.dropDown,children:A()})]})},P2=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[o,a]=$e.useState([]),c=async()=>{await Wu.getDataSourcesAnalyticsDataSourcesGet().then(p=>{a(p)})};$e.useEffect(()=>{c()},[]);const u=(p,m,g)=>{let v=[...i];p.selected!=null&&(v[g][m]=p.selected,e(v))},n=(p,m)=>{u({selected:p},"dataSource",m)};return pe.jsxs("div",{children:[pe.jsx("h3",{children:"Covariates"}),pe.jsx("div",{className:mp.selectDataLineWrapper,children:i.map((p,m)=>{var g,v,y;return pe.jsx("div",{children:pe.jsxs("div",{className:mp.dataLineWrapper,children:[t?pe.jsx("div",{className:mp.predictLabel,children:((g=fg.filter(k=>k.id===p.feature)[0])==null?void 0:g.name)+":"}):pe.jsx("div",{className:mp.predictLabel,children:((v=fg.filter(k=>k.id===p.feature)[0])==null?void 0:v.name)+":"}),pe.jsxs("div",{className:mp.selectField,children:[(p.origin==="CHAP"||p.origin==="")&&pe.jsx(os,{disabled:p.origin==="",label:"Data Element",onChange:k=>u(k,"dataSource",m),selected:p.dataSource,children:o.map(k=>k.supportedFeatures.includes(p.feature)&&pe.jsx(uo,{label:`${k.dataset.toUpperCase()} - ${k.displayName}`,value:k.dataset},k.name))}),p.origin==="dataItem"&&pe.jsx(A$,{feature:{name:(y=fg.filter(k=>k.id===p.feature)[0])==null?void 0:y.name,id:p.feature,description:""},onChangeSearchSelectField:(k,_)=>n(_,m)})]})]})},m)})})]})},fg=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],M$=()=>fg.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),P$=({onDrawerSubmit:i})=>{const[e,t]=$e.useState(M$()),[o,a]=$e.useState([]),[c,u]=$e.useState([]),[n,p]=$e.useState(void 0),[m,g]=$e.useState("");return pe.jsx(pe.Fragment,{children:pe.jsxs("div",{className:wU.formWrapper,children:[pe.jsx(hf,{autoComplete:"",label:"Dataset name",value:m,onChange:v=>g(v.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),pe.jsx(P2,{setDataLayers:t,datasetLayers:e}),pe.jsx(S2,{setTimePeriods:u}),pe.jsx(k2,{orgUnits:o,setOrgUnits:a,orgUnitLevel:n,setOrgUnitLevel:p}),pe.jsx(M2,{onDrawerSubmit:i,name:m,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:n,selectedPeriodItems:c,selectedOrgUnits:o})]})})},I$="_newDatasetWrapper_1jun0_1",D$="_newEvaluationDatasetTitle_1jun0_5",R$="_navFooterOuter_1jun0_12",L$="_navFooter_1jun0_12",iT={newDatasetWrapper:I$,newEvaluationDatasetTitle:D$,navFooterOuter:R$,navFooter:L$},z$=({onDrawerClose:i,onDrawerSubmit:e})=>pe.jsx(pe.Fragment,{children:pe.jsxs("div",{className:iT.newDatasetWrapper,children:[pe.jsxs("div",{className:iT.newEvaluationDatasetTitle,children:[pe.jsx("h2",{children:"New evaluation dataset"}),pe.jsx(Vr,{icon:pe.jsx(gv,{}),onClick:i})]}),pe.jsx(P$,{onDrawerSubmit:e})]})}),N$=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const o=window.innerWidth<900?"100vw":"1000px";return pe.jsx("div",{children:pe.jsx(I0,{open:i,onClose:t,direction:"right",size:o,children:pe.jsx("div",{className:bU.drawerWrapper,children:pe.jsx(z$,{onDrawerClose:t,onDrawerSubmit:e})})})})},O$="_pageHeader_1or2f_1",j$="_pageDescription_1or2f_8",rT={pageHeader:O$,pageDescription:j$},rv=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:o})=>pe.jsxs("div",{className:rT.pageHeader,children:[pe.jsxs("div",{children:[pe.jsx("h2",{children:i}),pe.jsx("p",{className:rT.pageDescription,children:e})]}),t&&o&&pe.jsx(Vr,{onClick:()=>t(!0),icon:pe.jsx(yv,{}),primary:!0,children:o})]}),B$="_jobResultPanelContainer_16af9_1",F$="_boxPanel_16af9_9",U$="_flexMedium_16af9_17",$$="_flexItemRight_16af9_21",V$="_inProgress_16af9_26",G$="_notStarted_16af9_31",H$="_completed_16af9_36",W$="_failed_16af9_41",q$="_resultTextHeader_16af9_46",Y$="_evaluationModal_16af9_53",Z$="_jobLogsModal_16af9_58",Xl={jobResultPanelContainer:B$,boxPanel:F$,flexMedium:U$,flexItemRight:$$,inProgress:V$,notStarted:G$,completed:H$,failed:W$,resultTextHeader:q$,evaluationModal:Y$,jobLogsModal:Z$},X$="_modal_1k0a4_1",K$={modal:X$},Q$="_container_mngpy_1",J$="_innerContainer_mngpy_6",e9="_prediction_mngpy_21",t9="_warning_mngpy_26",i9="_footer_mngpy_31",r9="_post_mngpy_36",n9="_redText_mngpy_40",s9="_greenText_mngpy_45",Wl={container:Q$,innerContainer:J$,prediction:e9,warning:t9,footer:i9,post:r9,redText:n9,greenText:s9},a9={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},I2=()=>{const[i,e]=$e.useState(),{loading:t,error:o}=Ta(a9,{onComplete:a=>e(a.orgUnits)});return{orgUnits:i,error:o,loading:t}},o9=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:o,setPostHttpError:a,setPostStatus:c})=>{const u=_=>{if(_==="quantile_low")return e;if(_==="median")return t;if(_==="quantile_high")return o},n=_=>_.dataValues.map(T=>({dataElement:u(T.dataElement),period:T.period,orgUnit:T.orgUnit,value:T.value})),p=_=>({resource:"dataValueSets",type:"create",data:{dataValues:_}}),[m,{error:g,loading:v,called:y}]=pC(p(n(i))),k=async()=>{await m()};return $e.useEffect(()=>{k()},[]),$e.useEffect(()=>{y&&(v||(g&&(a("Something went wrong when posting the prediction."),c("error")),g||(a(""),c("finish"))))},[v]),null},l9="_selectWrapper_8vdsv_1",c9="_select_8vdsv_1",nT={selectWrapper:l9,select:c9},db=({value:i,onChange:e,label:t,dataElements:o})=>{const a=u=>{e({displayName:o==null?void 0:o.find(n=>n.id===u.selected).displayName,id:u.selected})},c=(o==null?void 0:o.length)===0&&o!=null;return pe.jsx("div",{children:pe.jsx("div",{children:pe.jsx("div",{className:nT.select,children:pe.jsxs("div",{className:nT.selectWrapper,children:[pe.jsx("span",{children:t}),pe.jsx(os,{tabIndex:"1",placeholder:it.t("Select data element"),disabled:c,selected:i?i.id:"",warning:c,onChange:a,children:o==null?void 0:o.map(u=>pe.jsx(uo,{label:u.displayName,value:u.id},u.id))})]})})})})},h9="_textWarning_3ldzr_1",u9="_wrapper_3ldzr_6",d9="_wrapperWarning_3ldzr_14",pb={textWarning:h9,wrapper:u9,wrapperWarning:d9},p9="_dataValueTables_vzc5s_10",f9="_warning_vzc5s_17",sT={dataValueTables:p9,warning:f9},m9=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const o=ty();return e&&pe.jsx(mh,{large:!0,onClose:()=>i(!1),children:pe.jsxs(Qg,{children:[pe.jsx("h2",{children:it.t("Add required Data Elements")}),pe.jsxs("p",{children:[it.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),pe.jsx("a",{target:"_blank",href:`${o.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,children:"Maintenance"}),it.t("-app and create the Data Elements listed below.")]}),pe.jsx("p",{className:sT.warning,children:it.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),pe.jsx("p",{children:it.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),pe.jsxs("div",{className:sT.dataValueTables,children:[pe.jsx(fb,{q:"Low",disease:t}),pe.jsx(fb,{q:"Median",disease:t}),pe.jsx(fb,{q:"High",disease:t})]})]})})},fb=({q:i,disease:e})=>pe.jsx("table",{children:pe.jsxs("tbody",{children:[pe.jsxs("tr",{children:[pe.jsx("th",{children:it.t("Name")}),pe.jsxs("td",{children:["CHAP",it.t(` ${e} Quantile ${i}`)]})]}),pe.jsxs("tr",{children:[pe.jsx("th",{children:it.t("Short name")}),pe.jsxs("td",{children:["CHAP",it.t(` ${e} Quantile ${i}`)]})]}),pe.jsxs("tr",{children:[pe.jsx("th",{children:it.t("Code")}),pe.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),pe.jsxs("tr",{children:[pe.jsx("th",{children:it.t("Domain type")}),pe.jsx("td",{children:it.t("Aggregate")})]}),pe.jsxs("tr",{children:[pe.jsx("th",{children:it.t("Aggregation levels")}),pe.jsx("td",{children:pe.jsx("em",{children:it.t("Assign all org unit levels")})})]})]})}),g9=({predictionTarget:i,warning:e})=>{const[t,o]=$e.useState(!1);return pe.jsxs(pe.Fragment,{children:[pe.jsxs("div",{className:e?pb.wrapperWarning:pb.wrapper,children:[pe.jsx("div",{className:pb.textWarning,children:e&&pe.jsx(pe.Fragment,{children:pe.jsx("p",{children:it.t("It seems like you missing Data Elements for CHAP prediction.")})})}),pe.jsx("div",{children:pe.jsx(Vr,{icon:pe.jsx(xv,{}),onClick:()=>o(!0),children:it.t("Add data elements")})})]}),pe.jsx(m9,{modalOpen:t,setModalOpen:o,predictionTarget:i})]})},y9=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),mb=i=>{const[e,t]=$e.useState(),{loading:o,error:a}=Ta(y9(i),{onComplete:c=>t(c.dataElements.dataElements)});return{dataElements:e,error:a,loading:o}},x9=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),b9=i=>{const[e,t]=$e.useState(),{loading:o,error:a,engine:c}=Ta({});$e.useEffect(()=>{i&&u()},[i]);const u=async()=>{const n=await c.query(x9(i));n.dataItems.dataItems.length===0?t("?"):t(n.dataItems.dataItems[0].displayName)};return{displayName:e,error:a,loading:o}},v9=({prediction_unprocessed:i})=>{var G;const e=Ho(),[t,o]=$e.useState("chart"),[a,c]=$e.useState(),[u,n]=$e.useState(null),[p,m]=$e.useState(null),[g,v]=$e.useState(null),y=($,F)=>{if(!F)return 0;const H=[...F].sort((oe,Se)=>oe-Se),W=H.length,ne=$*(W-1),ue=Math.floor(ne),ie=Math.ceil(ne);return Math.round(ue===ie?H[ue]:H[ue]+(H[ie]-H[ue])*(ne-ue))},k=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],_=()=>{var $,F;return((F=($=i==null?void 0:i.metaData)==null?void 0:$.dataItemMapper)==null?void 0:F.find(H=>H.featureName==="disease_cases").dataItemId)??""},T=()=>({diseaseId:P,dataValues:i.forecasts.flatMap($=>k.map(F=>({orgUnit:$.orgUnit,value:y(F.q,$.values),displayName:$.orgUnit,dataElement:F.name,period:$.period})))}),{dataElements:M}=mb("CHAP_LOW"),{dataElements:A}=mb("CHAP_MEDIAN"),{dataElements:x}=mb("CHAP_HIGH"),P=_(),{displayName:D}=b9(P),{orgUnits:w,loading:I}=I2(),[N,q]=$e.useState("initial"),[Z,X]=$e.useState("");$e.useEffect(()=>{w&&V()},[(G=e==null?void 0:e.state)==null?void 0:G.data,w]);const j=()=>(M==null?void 0:M.length)===0||(A==null?void 0:A.length)===0||(x==null?void 0:x.length)===0,V=async $=>{q("initial")};$e.useEffect(()=>{D&&w&&i&&c(L(T()))},[D,w,i]),$e.useEffect(()=>{if(M&&A&&x&&D){const $=M.find(W=>W.code===`CHAP_LOW_${D.toLocaleUpperCase().replaceAll(" ","_")}`);$&&n($);const F=A.find(W=>W.code===`CHAP_MEDIAN_${D.toLocaleUpperCase().replaceAll(" ","_")}`);F&&m(F);const H=x.find(W=>W.code===`CHAP_HIGH_${D.toLocaleUpperCase().replaceAll(" ","_")}`);H&&v(H)}},[M,A,x,D]);const U=()=>!u&&!p&&!g?!1:!!(u&&!(u!=null&&u.displayName.includes(D))||p&&!(p!=null&&p.displayName.includes(D))||g&&!(g!=null&&g.displayName.includes(D))),L=$=>({dataValues:$.dataValues.map(F=>{var H;return{...F,displayName:(H=w==null?void 0:w.organisationUnits.find(W=>W.id===F.orgUnit))==null?void 0:H.displayName}}),diseaseId:$.diseaseId}),R=()=>!!(u&&p&&g);return pe.jsx("div",{className:Wl.container,children:pe.jsxs("div",{className:Wl.innerContainer,children:[I&&pe.jsx("p",{children:"Loading metadata from DHIS2.. "}),pe.jsxs("h1",{children:["Prediction: ",i.name]}),a&&pe.jsxs(pe.Fragment,{children:[pe.jsxs(i0,{scrollable:!0,children:[pe.jsx(Gu,{selected:t==="chart",onClick:()=>o("chart"),children:"Chart"}),pe.jsx(Gu,{selected:t==="table",onClick:()=>o("table"),children:"Table"})]}),pe.jsx("div",{className:Wl.prediction,children:{chart:pe.jsx(y4,{predictionTargetName:D,data:a}),table:pe.jsx(R6,{data:a}),map:pe.jsx(pe.Fragment,{})}[t]}),pe.jsx("h3",{children:it.t("Select which data element prediction should be imported to:")}),pe.jsx(g9,{warning:j(),predictionTarget:D}),pe.jsx(db,{label:it.t("Select data element for low quantile"),dataElements:M,onChange:n,value:u}),pe.jsx(db,{label:it.t("Select data element for median quantile"),dataElements:A,onChange:m,value:p}),pe.jsx(db,{label:it.t("Select data element for high quantile"),dataElements:x,onChange:v,value:g}),U()&&pe.jsx("p",{className:Wl.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),pe.jsx("div",{className:Wl.footer,children:pe.jsx(Vr,{onClick:()=>q("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!R(),icon:pe.jsx(iy,{}),primary:!0,children:it.t("Import prediction")})}),N==="loading"&&pe.jsx(o9,{setPostHttpError:X,setPostStatus:q,prediction:a,qLowDataElementId:u==null?void 0:u.id,qMedianDataElementId:p==null?void 0:p.id,qHighDataElementId:g==null?void 0:g.id}),pe.jsxs("div",{className:Wl.post,children:[N==="finish"&&pe.jsx("p",{className:Wl.greenText,children:it.t("Prediction has been imported.")}),pe.jsx("p",{className:Wl.redText,children:it.t(Z)})]})]})]})})},_9=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[o,a]=$e.useState(),c=async u=>{await co.getPredictionCrudPredictionsPredictionIdGet(u).then(n=>{a(n)})};return $e.useEffect(()=>{t&&c(Number(t))},[]),pe.jsx("div",{children:i&&pe.jsx(pe.Fragment,{children:pe.jsx(mh,{className:K$.modal,onClose:()=>{e(!1)},children:pe.jsx(pe.Fragment,{children:o&&pe.jsx(v9,{prediction_unprocessed:o})})})})})},w9="_jobResultPanelContainer_8nqrq_1",T9="_boxPanel_8nqrq_9",E9="_flexMedium_8nqrq_17",C9="_flexItemRight_8nqrq_21",S9="_inProgress_8nqrq_29",k9="_notStarted_8nqrq_34",A9="_completed_8nqrq_39",M9="_failed_8nqrq_44",P9="_resultTextHeader_8nqrq_49",I9="_evaluationModal_8nqrq_56",D9="_jobLogsModal_8nqrq_61",R9="_popupMenuDiv_8nqrq_66",ro={jobResultPanelContainer:w9,boxPanel:T9,flexMedium:E9,flexItemRight:C9,inProgress:S9,notStarted:k9,completed:A9,failed:M9,resultTextHeader:P9,evaluationModal:I9,jobLogsModal:D9,popupMenuDiv:R9},L9=(i,e)=>{$e.useEffect(()=>{const t=o=>{const a=i.current;!a||a.contains(o.target)||e(o)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},z9=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:o,onClickImport:a,onClickViewLogs:c,onClickRemove:u})=>{const[n,p]=$e.useState(!1),m=$e.useRef(null),g=$e.useRef(null);L9(g,k=>{var _;(_=m.current)!=null&&_.contains(k.target)||p(!1)});const v=k=>{switch(k){case"STARTED":return ro.inProgress;case"PENDING":return ro.notStarted;case"FAILURE":return ro.failed;default:return ro.completed}},y=k=>{switch(k){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return pe.jsx("div",{className:ro.boxPanel,children:pe.jsxs("div",{className:ro.jobResultPanelContainer,children:[pe.jsx("div",{className:ro.flexMedium,children:e.name}),pe.jsx("div",{className:ro.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),pe.jsx("div",{className:ro.flexMedium,children:pe.jsx("span",{className:v(e.status),children:y(e.status)})}),pe.jsxs("div",{className:ro.flexItemRight,children:[{prediction:pe.jsx(pe.Fragment,{children:e.status=="SUCCESS"&&pe.jsx(Vr,{icon:pe.jsx(BT,{}),onClick:()=>a(e.result),small:!0,children:"Import"})}),dataset:pe.jsx(pe.Fragment,{children:e.status=="SUCCESS"&&pe.jsx(Vr,{icon:pe.jsx(UT,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:pe.jsx(pe.Fragment,{children:e.status=="SUCCESS"&&pe.jsx(Vr,{icon:pe.jsx(GT,{}),onClick:()=>o(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&pe.jsx(Vr,{icon:pe.jsx(MT,{}),onClick:()=>c(e.id),small:!0,children:"Logs"}),pe.jsx("div",{ref:m,children:pe.jsx(O4,{enabled:e.status==="STARTED",content:it.t("Job is still running. Please wait until it is finished before doing any actions."),children:pe.jsx(Vr,{small:!0,icon:pe.jsx(FT,{}),disabled:e.status==="STARTED",onClick:()=>p(k=>!k)})})}),n&&pe.jsx(cf,{reference:m,placement:"top-end",children:pe.jsx("div",{ref:g,className:ro.popupMenuDiv,children:pe.jsx(fv,{children:["SUCCESS","FAILURE"].includes(e.status)&&pe.jsx(ju,{label:"Delete",icon:pe.jsx(zT,{}),destructive:!0,onClick:()=>{p(!1),u(e)}})})})})]})]})},i)},N9="_jobLogs_pzpzf_1",O9="_logContent_pzpzf_7",gb={jobLogs:N9,logContent:O9},D2=(i,e)=>{const t=$e.useRef(),o=$e.useRef(null),a=()=>{o.current===null&&document.visibilityState==="visible"&&(o.current=setInterval(()=>{t.current&&t.current()},e))},c=()=>{o.current!==null&&(clearInterval(o.current),o.current=null)};$e.useEffect(()=>{t.current=i},[i]),$e.useEffect(()=>{const u=()=>{document.visibilityState==="visible"?a():c()};return document.addEventListener("visibilitychange",u),document.visibilityState==="visible"&&a(),()=>{c(),document.removeEventListener("visibilitychange",u)}},[e])},j9=({jobId:i})=>{const[e,t]=$e.useState(null),[o,a]=$e.useState(null),[c,u]=$e.useState(!1),n=$e.useRef(null),p=async()=>{if(i){console.log("fetching logs");try{const m=await v0.getLogsJobsJobIdLogsGet(i);t(m)}catch(m){a(m.body.detail)}finally{u(!1)}}};return $e.useEffect(()=>{u(!0),a(null),p()},[i]),$e.useEffect(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[e]),D2(p,5e3),i?c?pe.jsx("p",{children:"Loading logs..."}):o?pe.jsxs("p",{className:gb.error,children:["Error: ",o]}):pe.jsxs("div",{className:gb.jobLogs,children:[pe.jsx("h2",{children:"Job Logs"}),pe.jsx("pre",{className:gb.logContent,ref:n,children:e||"<No logs reported for this job>"})]}):pe.jsx("p",{children:"No job ID provided."})},B9="_drawerWrapper_l3raf_1",F9={drawerWrapper:B9},U9="_formWrapper_13v73_1",$9="_newEvaluationTitle_13v73_8",V9="_buttons_13v73_15",G9="_navFooterOuter_13v73_20",H9="_navFooter_13v73_20",yb={formWrapper:U9,newEvaluationTitle:$9,buttons:V9,navFooterOuter:G9,navFooter:H9},aT=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}},W9="_datasetDetailsWrapper_dewdk_1",q9="_datasetDetailsRow_dewdk_7",Y9="_label_dewdk_13",Jc={datasetDetailsWrapper:W9,datasetDetailsRow:q9,label:Y9},Z9=({datasetId:i})=>{var p;const[e,t]=$e.useState(null),[o,a]=$e.useState(""),[c,u]=$e.useState(!0);$e.useState([]);const n=m=>{const g=m.observations.map(A=>A.period),v=Array.from(new Set(g)).sort(),y=v[0],k=v[v.length-1],T=Array.from(new Set(g)).length,M=Array.from(new Set(m.observations.map(A=>A.featureName).filter(A=>A!=="disease_cases")));return{name:m.name,created:m.created,startPeriod:y,endPeriod:k,orgUnitCount:T,covariates:M}};return $e.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const g=await co.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",g);const v=n(g);t(v)}catch(g){a(g)}finally{u(!1)}})()},[i]),c?pe.jsxs("div",{className:Jc.datasetLoader,children:[pe.jsx(Tl,{}),pe.jsx("span",{children:"Loading dataset"})]}):o?pe.jsxs("p",{children:["Error: ",o]}):pe.jsxs(pe.Fragment,{children:[pe.jsx("h3",{children:"Evaluation Dataset"}),pe.jsx(Jg,{children:pe.jsxs("div",{className:Jc.datasetDetailsWrapper,children:[pe.jsxs("div",{children:[pe.jsx("span",{className:Jc.label,children:"Name: "}),pe.jsx("span",{children:e.name})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:Jc.label,children:"Org Units: "}),pe.jsx("span",{children:e.orgUnitCount})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:Jc.label,children:"Time period: "}),pe.jsxs("span",{children:[aT(e.startPeriod)," to ",aT(e.endPeriod)]})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:Jc.label,children:"Covariates: "}),pe.jsx("span",{children:((p=e==null?void 0:e.covariates)==null?void 0:p.join(", "))||"None"})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:Jc.label,children:"Created: "}),pe.jsx("span",{children:e.created})]})]})})]})},X9="_modelDetailsContainer_mnj31_1",K9="_loadingText_mnj31_5",Q9="_selectedModelDetails_mnj31_10",J9="_modelAuthor_mnj31_17",e8="_modelAuthorLogo_mnj31_25",t8="_modelAuthorName_mnj31_32",i8="_modelHumanName_mnj31_36",r8="_modelEmail_mnj31_42",n8="_modelDescription_mnj31_47",s8="_modelDescriptionText_mnj31_52",a8="_modelCovariates_mnj31_57",o8="_modelCovariatesList_mnj31_62",l8="_modelCovariateItem_mnj31_71",c8="_modelCitation_mnj31_75",h8="_modelCitationText_mnj31_80",u8="_modelLink_mnj31_86",ia={modelDetailsContainer:X9,loadingText:K9,selectedModelDetails:Q9,modelAuthor:J9,modelAuthorLogo:e8,modelAuthorName:t8,modelHumanName:i8,modelEmail:r8,modelDescription:n8,modelDescriptionText:s8,modelCovariates:a8,modelCovariatesList:o8,modelCovariateItem:l8,modelCitation:c8,modelCitationText:h8,modelLink:u8},d8=({selectedModel:i,onChangeModel:e})=>pe.jsx("div",{className:ia.modelDetailsContainer,children:pe.jsxs("div",{className:ia.selectedModelDetails,children:[pe.jsx("h3",{className:ia.modelHumanName,children:i.displayName}),pe.jsxs("div",{className:ia.modelAuthor,children:[pe.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:ia.modelAuthorLogo}),pe.jsxs("span",{className:ia.modelAuthorName,children:[i.author," - ",i.organization]})]}),pe.jsxs("p",{className:ia.modelDescription,children:[pe.jsx("div",{children:"Description:"}),pe.jsx("div",{className:ia.modelDescriptionText,children:i.description||"Coming soon..."})]}),pe.jsxs("div",{className:ia.modelCovariates,children:[pe.jsx("span",{children:"Model inputs:"}),pe.jsx("ul",{className:ia.modelCovariatesList,children:i.covariates.map((t,o)=>pe.jsxs("li",{className:ia.modelCovariateItem,children:["✔ ",t.name]},o))})]}),pe.jsxs("div",{className:ia.modelCitation,children:[pe.jsx("span",{children:"Attribution:"}),pe.jsx("pre",{className:ia.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),pe.jsxs("p",{className:ia.modelLink,children:["External link: ",pe.jsx("a",{href:i.sourceUrl||"",target:"_blank",children:i.sourceUrl||"http://example.com"})]}),pe.jsxs("p",{className:ia.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&pe.jsx("div",{children:pe.jsx(Vr,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),p8="_modelSelectContainer_1u7s7_1",f8="_loadingText_1u7s7_5",m8="_modelGrid_1u7s7_10",g8="_modelCard_1u7s7_17",y8="_selectedModelCard_1u7s7_31",x8="_selectedModelDetails_1u7s7_35",b8="_modelAuthor_1u7s7_42",v8="_modelAuthorLogo_1u7s7_50",_8="_modelAuthorName_1u7s7_57",w8="_modelHumanName_1u7s7_61",T8="_modelEmail_1u7s7_67",E8="_modelDescription_1u7s7_72",C8="_modelDescriptionText_1u7s7_77",S8="_modelCovariates_1u7s7_82",k8="_modelCovariatesList_1u7s7_87",A8="_modelCovariateItem_1u7s7_96",M8="_modelCitation_1u7s7_100",P8="_modelCitationText_1u7s7_105",I8="_modelLink_1u7s7_111",So={modelSelectContainer:p8,loadingText:f8,modelGrid:m8,modelCard:g8,selectedModelCard:y8,selectedModelDetails:x8,modelAuthor:b8,modelAuthorLogo:v8,modelAuthorName:_8,modelHumanName:w8,modelEmail:T8,modelDescription:E8,modelDescriptionText:C8,modelCovariates:S8,modelCovariatesList:k8,modelCovariateItem:A8,modelCitation:M8,modelCitationText:P8,modelLink:I8},oT={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},R2=({selectedModel:i,setSelectedModel:e})=>{const[t,o]=$e.useState([]),[a,c]=$e.useState(!0),[u,n]=$e.useState(!0),p=async()=>{await co.listModelsCrudModelsGet().then(g=>{let v=g.map(y=>(y.covariates=y.covariates.concat(y.target),y));c(!1),o(v)}).catch(g=>{o([oT]),e(oT),c(!1)})},m=g=>{e(g),n(!1)};return $e.useEffect(()=>{p()},[]),pe.jsx("div",{className:So.modelSelectContainer,children:a?pe.jsx("p",{children:"Loading models..."}):pe.jsxs(pe.Fragment,{children:[pe.jsx("h3",{children:"Prediction Model"}),!u&&i&&pe.jsx("div",{children:pe.jsx(d8,{selectedModel:i,onChangeModel:()=>n(!0)})}),u&&pe.jsx("div",{children:pe.jsx("div",{className:So.modelGrid,children:t.map(g=>pe.jsxs("div",{className:`${So.modelCard} ${(i==null?void 0:i.name)===g.name?So.selectedModelCard:""}`,children:[pe.jsx("h3",{className:So.modelHumanName,children:g.displayName}),pe.jsxs("div",{className:So.modelAuthor,children:[pe.jsx("img",{src:g.organizationLogoUrl||"/default-model-logo.png",alt:g.name+" logo",className:So.modelAuthorLogo}),pe.jsxs("span",{className:So.modelAuthorName,children:[g.author," - ",g.organization]})]}),pe.jsx("ul",{className:So.modelCovariatesList,children:g.covariates.map((v,y)=>pe.jsxs("li",{className:So.modelCovariateItem,children:["✔ ",v.name]},y))}),pe.jsx(Vr,{onClick:()=>m(g),primary:!0,children:(i==null?void 0:i.name)===g.name?"Selected":"Select Model"})]},g.name))})})]})})},D8=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const[t,o]=$e.useState(""),[a,c]=$e.useState(void 0),u=t&&e&&a,n=()=>{if(console.log("should evaluate",t,e,a),u)try{const p=Wu.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:t,datasetId:e,modelId:a.name});console.log("evaluate response",p)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return pe.jsx(pe.Fragment,{children:pe.jsxs("div",{className:yb.formWrapper,children:[pe.jsxs("div",{className:yb.newEvaluationTitle,children:[pe.jsx("h2",{children:"New model evaluation"}),pe.jsx(Vr,{icon:pe.jsx(gv,{}),onClick:i})]}),pe.jsx(hf,{autoComplete:"",label:"Evaluation name",value:t,onChange:p=>o(p.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),pe.jsx(Z9,{datasetId:e}),pe.jsx(R2,{selectedModel:a,setSelectedModel:c}),pe.jsx("div",{className:yb.buttons,children:pe.jsx(Vr,{primary:!0,icon:pe.jsx(iy,{}),onClick:n,disabled:!u,children:"Evaluate"})})]})})},R8=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const o=window.innerWidth<900?"100vw":"1000px";return pe.jsx("div",{children:pe.jsx(I0,{open:i,onClose:()=>e(!1),direction:"right",size:o,children:pe.jsx("div",{className:F9.drawerWrapper,children:pe.jsx(D8,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},L8=({evaluationId:i})=>{const[e,t]=$e.useState(""),[o,a]=$e.useState([]),[c,u]=$e.useState(),[n,p]=$e.useState(),[m,g]=$e.useState(""),[v,y]=$e.useState(""),[k,_]=$e.useState(!1),{orgUnits:T,error:M,loading:A}=I2();$e.useEffect(()=>{if(T&&n){const w=L4(n.predictions,n.actualCases.data,"");w.forEach(I=>{I.evaluation.forEach(N=>{const q=T==null?void 0:T.organisationUnits.find(Z=>Z.id===N.orgUnitId);q&&(N.orgUnitName=q.displayName)})}),u(w),a(N4(n.predictions))}},[T,n]);const x=async w=>(await co.getBacktestsCrudBacktestsGet()).find(N=>N.id===Number(w)),P=async w=>(await co.listModelsCrudModelsGet()).find(N=>N.name===w),D=async()=>{_(!0);const w=[.1,.25,.5,.75,.9];try{const[I,N,q]=await Promise.all([x(i),Wu.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,w),Wu.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!I)throw new Error("Evaluation info not found");g(I.name??"");const Z=await P(I.modelId);y((Z==null?void 0:Z.displayName)??""),p({predictions:N,actualCases:q})}catch(I){t(I.toString())}finally{_(!1)}};return $e.useEffect(()=>{D()},[]),pe.jsxs("div",{children:[e&&pe.jsx("p",{children:"Not available"}),k&&pe.jsx("p",{children:"Loading.."}),c&&pe.jsx(C6,{evaluationName:m,modelName:v,evaluations:c,splitPeriods:o})]})},z8=({jobResults:i})=>{const[e,t]=$e.useState(!1),[o,a]=$e.useState(void 0),[c,u]=$e.useState(!1),[n,p]=$e.useState(!1),[m,g]=$e.useState(void 0),[v,y]=$e.useState(void 0),[k,_]=$e.useState(!1),[T,M]=$e.useState(void 0),A=I=>{t(!0),a(I)},x=I=>{p(!0),g(I)},P=I=>{_(!0),M(I)},D=I=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");let q=I.result;if(q)I.type=="dataset"?co.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(q)):I.type=="evaluation"?co.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(q)):I.type=="prediction"&&co.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(q));else{let Z=I.id;v0.deleteJobJobsJobIdDelete(Z)}}},w=I=>{console.log("clicked evaluate dataset id",I),y(I),u(!0)};return pe.jsxs(pe.Fragment,{children:[i.map((I,N)=>pe.jsx(z9,{i:N,jobResult:I,onClickEvaluateDataset:w,onClickViewEvaluation:x,onClickImport:A,onClickRemove:D,onClickViewLogs:P},N)),e&&pe.jsx(_9,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:o}),pe.jsx(R8,{isOpen:c,setIsOpen:u,datasetIdToEvaluate:v}),n&&m&&pe.jsx(mh,{className:Xl.evaluationModal,onClose:()=>{p(!1)},children:pe.jsx(L8,{evaluationId:m})}),k&&pe.jsx(mh,{className:Xl.jobLogsModal,onClose:()=>{_(!1)},children:pe.jsx(j9,{jobId:T})})]})},N8=()=>pe.jsx("div",{children:pe.jsxs("div",{className:[Xl.jobResultPanelContainer,Xl.resultTextHeader].join(" "),children:[pe.jsx("div",{className:Xl.flexMedium,children:"Name:"}),pe.jsx("div",{className:Xl.flexMedium,children:"Created:"}),pe.jsx("div",{className:Xl.flexMedium,children:"Status:"}),pe.jsx("div",{className:Xl.flexItemRight})]})}),O8="_noticeBox_18bg1_1",j8="_details_18bg1_8",B8="_button_18bg1_14",xb={noticeBox:O8,details:j8,button:B8},lT=({error:i,type:e})=>{const[t,o]=$e.useState(!1);return i==null?pe.jsx(pe.Fragment,{}):pe.jsx("div",{children:pe.jsxs(vl,{error:!0,title:`Unable to retrieve ${e}s. Please try again later.`,className:xb.noticeBox,children:[pe.jsx("div",{className:xb.button,children:pe.jsx(Vr,{small:!0,onClick:()=>o(!t),children:t?"Hide details":"See details"})}),t&&pe.jsx("div",{className:xb.details,children:pe.jsx("div",{children:i})})]})})},F8="_loaderWrapper_iu471_1",U8="_textLoad_iu471_8",$8="_loader_iu471_1",bb={loaderWrapper:F8,textLoad:U8,loader:$8},V8=({type:i})=>pe.jsxs(pe.Fragment,{children:[pe.jsx("div",{className:bb.loaderWrapper,children:pe.jsx("div",{className:bb.loader,children:pe.jsx(Tl,{})})}),pe.jsx("p",{className:bb.textLoad,children:pe.jsxs("i",{children:["Loading ",i]})})]}),G8="_text_3x5i9_1",H8={text:G8},W8=({type:i})=>pe.jsxs("div",{className:H8.text,children:["No ",i," found"]}),nv=({type:i})=>{const[e,t]=$e.useState([]),[o,a]=$e.useState([]),[c,u]=$e.useState([]),[n,p]=$e.useState([]),[m,g]=$e.useState([]),[v,y]=$e.useState(),[k,_]=$e.useState(),[T,M]=$e.useState(!0),A=async I=>{for(let N=0;N<5;N++)try{const q=await I;return _(void 0),q}catch(q){if(N===4)return _((q==null?void 0:q.message)??`Couldn't fetch ${i}`),[]}},x=()=>{switch(i){case"predictions":return A(co.getPredictionsCrudPredictionsGet()).then(I=>a(I));case"datasets":return A(co.getDatasetsCrudDatasetsGet()).then(I=>u(I));case"evaluations":return A(co.getBacktestsCrudBacktestsGet()).then(I=>p(I))}},P=async()=>{let I=[];for(let N=0;N<6;N++)try{I=await v0.listJobsJobsGet();break}catch(q){if(N===2)return y((q==null?void 0:q.message)??"Couldn't fetch jobs"),[]}return y(void 0),I},D=()=>{const I=[];c.filter(Z=>Z.type=="evaluation").forEach(Z=>{I.push({id:"Unknown",name:Z.name,created:new Date(Z.created??""),type:"dataset",status:"SUCCESS",result:Z.id.toString()})}),n.forEach(Z=>{I.push({id:"Unknown",name:Z.name??"",created:new Date(Z.created??""),type:"evaluation",status:"SUCCESS",result:Z.id.toString()})}),o.forEach(Z=>{I.push({id:"Unknown",name:Z.name,created:new Date(Z.created),type:"prediction",status:"SUCCESS",result:Z.id.toString(),datasetId:Z.datasetId,estimatorId:Z.modelId,nPeriods:Z.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},q={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Z=>Z.status!="SUCCESS"&&Z.type==N[i]).forEach(Z=>{I.push({id:Z.id,name:Z.name,created:new Date(Z.start_time),type:q[i],status:Z.status})}),I.sort((Z,X)=>X.created.getTime()-Z.created.getTime()),I},w=async()=>{await x();const I=await P();t(I),M(!1)};return $e.useEffect(()=>{w()},[]),D2(w,5e3),$e.useEffect(()=>{g(D())},[e,o,n,c]),pe.jsxs("div",{children:[pe.jsx(lT,{error:v,type:"job"}),pe.jsx(lT,{error:k,type:i}),T&&pe.jsx(V8,{type:i}),m.length>0&&pe.jsx(N8,{}),m.length==0&&!T&&pe.jsx(W8,{type:i}),pe.jsx(z8,{jobResults:m})]})},q8=()=>{const[i,e]=$e.useState(!1),t=()=>{e(!1)};return pe.jsxs("div",{children:[pe.jsx(rv,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),pe.jsx(nv,{type:"datasets"}),pe.jsx(N$,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),pe.jsx(rv,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),pe.jsx(nv,{type:"evaluations"})]})},Y8=()=>pe.jsx(q8,{}),Z8="_drawerWrapper_g5ang_1",X8={drawerWrapper:Z8},K8="_formWrapper_1wb8p_1",Q8="_newPredictionForm_1wb8p_8",J8="_newPredictionTitle_1wb8p_12",vb={formWrapper:K8,newPredictionForm:Q8,newPredictionTitle:J8},eV=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,o]=$e.useState([]),[a,c]=$e.useState([]),[u,n]=$e.useState([]),[p,m]=$e.useState(void 0),[g,v]=$e.useState(""),[y,k]=$e.useState(void 0);return $e.useEffect(()=>{if(y==null)return;const _=y.covariates.map(T=>({feature:T.name,origin:"dataItem",dataSource:""}));o(_)},[y]),pe.jsx(pe.Fragment,{children:pe.jsxs("div",{className:vb.newPredictionForm,children:[pe.jsxs("div",{className:vb.newPredictionTitle,children:[pe.jsx("h2",{children:"New prediction"}),pe.jsx(Vr,{icon:pe.jsx(gv,{}),onClick:i})]}),pe.jsxs("div",{className:vb.formWrapper,children:[pe.jsx(hf,{autoComplete:"",label:"Name of prediction",value:g,onChange:_=>v(_.value),placeholder:it.t("Prediction for Northern Province")}),pe.jsx(R2,{selectedModel:y,setSelectedModel:k}),pe.jsx(P2,{setDataLayers:o,datasetLayers:t,predictMode:!0}),pe.jsx(S2,{setTimePeriods:n}),pe.jsx(k2,{orgUnits:a,setOrgUnits:c,orgUnitLevel:p,setOrgUnitLevel:m}),pe.jsx(M2,{onDrawerSubmit:e,selectedModel:y,name:g,dataLayers:t,onSendAction:"predict",orgUnitLevel:p,selectedPeriodItems:u,selectedOrgUnits:a})]})]})})},tV=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const o=window.innerWidth<900?"100vw":"1000px";return pe.jsx("div",{children:pe.jsx(I0,{open:e,onClose:i,direction:"right",size:o,children:pe.jsx("div",{className:X8.drawerWrapper,children:pe.jsx(eV,{onDrawerClose:i,onDrawerSubmit:t})})})})},iV=()=>{const[i,e]=$e.useState(!1),[t,o]=$e.useState(!1),a=()=>{o(!1),e(!1)};return $e.useEffect(()=>{o(!0)},[t]),pe.jsxs("div",{children:[pe.jsx(rv,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),pe.jsx(tV,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:a}),t&&pe.jsx(nv,{type:"predictions"})]})},rV=({children:i})=>{const{baseUrl:e}=ty(),[t,o]=$e.useState(!1);return $e.useEffect(()=>{$i.WITH_CREDENTIALS=!0,$i.BASE=e+"/api/routes/chap/run",o(!0)},[e]),t?pe.jsx(pe.Fragment,{children:i}):pe.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:pe.jsx(Tl,{})})},nV="_settingsContainer_11gky_1",sV={settingsContainer:nV},aV="_container_1q968_1",oV="_header_1q968_5",lV="_settingsContainer_1q968_16",cV="_loaderContainer_1q968_22",hV="_mutedText_1q968_32",uV="_errorMessage_1q968_37",dV="_routeInfo_1q968_43",pV="_routeInfoHeader_1q968_50",fV="_infoGrid_1q968_64",mV="_label_1q968_71",gV="_value_1q968_76",yV="_authorities_1q968_82",xV="_authority_1q968_88",_n={container:aV,header:oV,settingsContainer:lV,loaderContainer:cV,mutedText:hV,errorMessage:uV,routeInfo:dV,routeInfoHeader:pV,infoGrid:fV,label:mV,value:gV,authorities:yV,authority:xV},bV="F_CHAP_MODELING_APP",L2=({onSuccess:i,onError:e}={})=>{const t=Kg(),o=Ku(),{show:a}=Rp(it.t("Error saving route"),{critical:!0}),{show:c}=Rp(it.t("Route saved successfully"),{success:!0}),u=dC(async n=>{const{id:p,url:m}=n;if(p){const g=["routes","chap"],v=t.getQueryData(g);if(!v)throw new Error(`Route data not found in cache for key ${g}.`);const y=v.routes.find(_=>_.id===p);if(!y)throw new Error(`Route with id ${p} not found in cache for update.`);const k={resource:"routes",type:"update",id:p,data:{...y||{},url:m}};return o.mutate(k)}else{const g={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:m,authorities:[bV]}};return o.mutate(g)}},{onSuccess:()=>{c(),t.invalidateQueries(["routes"]),i==null||i()},onError:n=>{a(),console.error("Error saving route:",n),e==null||e(n)}});return{saveRoute:u.mutate,isSaving:u.isLoading,error:u.error}};var Lf=i=>i.type==="checkbox",sh=i=>i instanceof Date,sa=i=>i==null;const z2=i=>typeof i=="object";var qn=i=>!sa(i)&&!Array.isArray(i)&&z2(i)&&!sh(i),N2=i=>qn(i)&&i.target?Lf(i.target)?i.target.checked:i.target.value:i,vV=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,O2=(i,e)=>i.has(vV(e)),_V=i=>{const e=i.constructor&&i.constructor.prototype;return qn(e)&&e.hasOwnProperty("isPrototypeOf")},D0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Cs(i){let e;const t=Array.isArray(i),o=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(D0&&(i instanceof Blob||o))&&(t||qn(i)))if(e=t?[]:{},!t&&!_V(i))e=i;else for(const a in i)i.hasOwnProperty(a)&&(e[a]=Cs(i[a]));else return i;return e}var Dy=i=>Array.isArray(i)?i.filter(Boolean):[],Gn=i=>i===void 0,mi=(i,e,t)=>{if(!e||!qn(i))return t;const o=Dy(e.split(/[,[\].]+?/)).reduce((a,c)=>sa(a)?a:a[c],i);return Gn(o)||o===i?Gn(i[e])?t:i[e]:o},za=i=>typeof i=="boolean",R0=i=>/^\w*$/.test(i),j2=i=>Dy(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Hr=(i,e,t)=>{let o=-1;const a=R0(e)?[e]:j2(e),c=a.length,u=c-1;for(;++o<c;){const n=a[o];let p=t;if(o!==u){const m=i[n];p=qn(m)||Array.isArray(m)?m:isNaN(+a[o+1])?{}:[]}if(n==="__proto__"||n==="constructor"||n==="prototype")return;i[n]=p,i=i[n]}};const Fg={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ao={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ul={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wV=Me.createContext(null),L0=()=>Me.useContext(wV);var B2=(i,e,t,o=!0)=>{const a={defaultValues:e._defaultValues};for(const c in i)Object.defineProperty(a,c,{get:()=>{const u=c;return e._proxyFormState[u]!==ao.all&&(e._proxyFormState[u]=!o||ao.all),t&&(t[u]=!0),i[u]}});return a};const z0=typeof window<"u"?$e.useLayoutEffect:$e.useEffect;function TV(i){const e=L0(),{control:t=e.control,disabled:o,name:a,exact:c}=i,[u,n]=Me.useState(t._formState),p=Me.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return z0(()=>t._subscribe({name:a,formState:p.current,exact:c,callback:m=>{!o&&n({...t._formState,...m})}}),[a,o,c]),Me.useEffect(()=>{p.current.isValid&&t._setValid(!0)},[t]),Me.useMemo(()=>B2(u,t,p.current,!1),[u,t])}var Io=i=>typeof i=="string",F2=(i,e,t,o,a)=>Io(i)?(o&&e.watch.add(i),mi(t,i,a)):Array.isArray(i)?i.map(c=>(o&&e.watch.add(c),mi(t,c))):(o&&(e.watchAll=!0),t);function EV(i){const e=L0(),{control:t=e.control,name:o,defaultValue:a,disabled:c,exact:u}=i,n=Me.useRef(a),[p,m]=Me.useState(t._getWatch(o,n.current));return z0(()=>t._subscribe({name:o,formState:{values:!0},exact:u,callback:g=>!c&&m(F2(o,t._names,g.values||t._formValues,!1,n.current))}),[o,t,c,u]),Me.useEffect(()=>t._removeUnmounted()),p}function CV(i){const e=L0(),{name:t,disabled:o,control:a=e.control,shouldUnregister:c}=i,u=O2(a._names.array,t),n=EV({control:a,name:t,defaultValue:mi(a._formValues,t,mi(a._defaultValues,t,i.defaultValue)),exact:!0}),p=TV({control:a,name:t,exact:!0}),m=Me.useRef(i),g=Me.useRef(a.register(t,{...i.rules,value:n,...za(i.disabled)?{disabled:i.disabled}:{}})),v=Me.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!mi(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!mi(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!mi(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!mi(p.validatingFields,t)},error:{enumerable:!0,get:()=>mi(p.errors,t)}}),[p,t]),y=Me.useCallback(M=>g.current.onChange({target:{value:N2(M),name:t},type:Fg.CHANGE}),[t]),k=Me.useCallback(()=>g.current.onBlur({target:{value:mi(a._formValues,t),name:t},type:Fg.BLUR}),[t,a._formValues]),_=Me.useCallback(M=>{const A=mi(a._fields,t);A&&M&&(A._f.ref=M)},[a._fields,t]),T=Me.useMemo(()=>({name:t,value:n,...za(o)||p.disabled?{disabled:p.disabled||o}:{},onChange:y,onBlur:k,ref:_}),[t,o,p.disabled,y,k,_,n]);return Me.useEffect(()=>{const M=a._options.shouldUnregister||c;a.register(t,{...m.current.rules,...za(m.current.disabled)?{disabled:m.current.disabled}:{}});const A=(x,P)=>{const D=mi(a._fields,x);D&&D._f&&(D._f.mount=P)};if(A(t,!0),M){const x=Cs(mi(a._options.defaultValues,t));Hr(a._defaultValues,t,x),Gn(mi(a._formValues,t))&&Hr(a._formValues,t,x)}return!u&&a.register(t),()=>{(u?M&&!a._state.action:M)?a.unregister(t):A(t,!1)}},[t,a,u,c]),Me.useEffect(()=>{a._setDisabledField({disabled:o,name:t})},[o,t,a]),Me.useMemo(()=>({field:T,formState:p,fieldState:v}),[T,p,v])}const SV=i=>i.render(CV(i));var U2=(i,e,t,o,a)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[o]:a||!0}}:{},Ip=i=>Array.isArray(i)?i:[i],cT=()=>{let i=[];return{get observers(){return i},next:a=>{for(const c of i)c.next&&c.next(a)},subscribe:a=>(i.push(a),{unsubscribe:()=>{i=i.filter(c=>c!==a)}}),unsubscribe:()=>{i=[]}}},sv=i=>sa(i)||!z2(i);function Jl(i,e){if(sv(i)||sv(e))return i===e;if(sh(i)&&sh(e))return i.getTime()===e.getTime();const t=Object.keys(i),o=Object.keys(e);if(t.length!==o.length)return!1;for(const a of t){const c=i[a];if(!o.includes(a))return!1;if(a!=="ref"){const u=e[a];if(sh(c)&&sh(u)||qn(c)&&qn(u)||Array.isArray(c)&&Array.isArray(u)?!Jl(c,u):c!==u)return!1}}return!0}var na=i=>qn(i)&&!Object.keys(i).length,N0=i=>i.type==="file",oo=i=>typeof i=="function",Ug=i=>{if(!D0)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},$2=i=>i.type==="select-multiple",O0=i=>i.type==="radio",kV=i=>O0(i)||Lf(i),_b=i=>Ug(i)&&i.isConnected;function AV(i,e){const t=e.slice(0,-1).length;let o=0;for(;o<t;)i=Gn(i)?o++:i[e[o++]];return i}function MV(i){for(const e in i)if(i.hasOwnProperty(e)&&!Gn(i[e]))return!1;return!0}function ns(i,e){const t=Array.isArray(e)?e:R0(e)?[e]:j2(e),o=t.length===1?i:AV(i,t),a=t.length-1,c=t[a];return o&&delete o[c],a!==0&&(qn(o)&&na(o)||Array.isArray(o)&&MV(o))&&ns(i,t.slice(0,-1)),i}var V2=i=>{for(const e in i)if(oo(i[e]))return!0;return!1};function $g(i,e={}){const t=Array.isArray(i);if(qn(i)||t)for(const o in i)Array.isArray(i[o])||qn(i[o])&&!V2(i[o])?(e[o]=Array.isArray(i[o])?[]:{},$g(i[o],e[o])):sa(i[o])||(e[o]=!0);return e}function G2(i,e,t){const o=Array.isArray(i);if(qn(i)||o)for(const a in i)Array.isArray(i[a])||qn(i[a])&&!V2(i[a])?Gn(e)||sv(t[a])?t[a]=Array.isArray(i[a])?$g(i[a],[]):{...$g(i[a])}:G2(i[a],sa(e)?{}:e[a],t[a]):t[a]=!Jl(i[a],e[a]);return t}var gp=(i,e)=>G2(i,e,$g(e));const hT={value:!1,isValid:!1},uT={value:!0,isValid:!0};var H2=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!Gn(i[0].attributes.value)?Gn(i[0].value)||i[0].value===""?uT:{value:i[0].value,isValid:!0}:uT:hT}return hT},W2=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:o})=>Gn(i)?i:e?i===""?NaN:i&&+i:t&&Io(i)?new Date(i):o?o(i):i;const dT={isValid:!1,value:null};var q2=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,dT):dT;function pT(i){const e=i.ref;return N0(e)?e.files:O0(e)?q2(i.refs).value:$2(e)?[...e.selectedOptions].map(({value:t})=>t):Lf(e)?H2(i.refs).value:W2(Gn(e.value)?i.ref.value:e.value,i)}var PV=(i,e,t,o)=>{const a={};for(const c of i){const u=mi(e,c);u&&Hr(a,c,u._f)}return{criteriaMode:t,names:[...i],fields:a,shouldUseNativeValidation:o}},Vg=i=>i instanceof RegExp,yp=i=>Gn(i)?i:Vg(i)?i.source:qn(i)?Vg(i.value)?i.value.source:i.value:i,fT=i=>({isOnSubmit:!i||i===ao.onSubmit,isOnBlur:i===ao.onBlur,isOnChange:i===ao.onChange,isOnAll:i===ao.all,isOnTouch:i===ao.onTouched});const mT="AsyncFunction";var IV=i=>!!i&&!!i.validate&&!!(oo(i.validate)&&i.validate.constructor.name===mT||qn(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===mT)),DV=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),gT=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(o=>i.startsWith(o)&&/^\.\w+/.test(i.slice(o.length))));const Dp=(i,e,t,o)=>{for(const a of t||Object.keys(i)){const c=mi(i,a);if(c){const{_f:u,...n}=c;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!o)return!0;if(u.ref&&e(u.ref,u.name)&&!o)return!0;if(Dp(n,e))break}else if(qn(n)&&Dp(n,e))break}}};function yT(i,e,t){const o=mi(i,t);if(o||R0(t))return{error:o,name:t};const a=t.split(".");for(;a.length;){const c=a.join("."),u=mi(e,c),n=mi(i,c);if(u&&!Array.isArray(u)&&t!==c)return{name:t};if(n&&n.type)return{name:c,error:n};a.pop()}return{name:t}}var RV=(i,e,t,o)=>{t(i);const{name:a,...c}=i;return na(c)||Object.keys(c).length>=Object.keys(e).length||Object.keys(c).find(u=>e[u]===(!o||ao.all))},LV=(i,e,t)=>!i||!e||i===e||Ip(i).some(o=>o&&(t?o===e:o.startsWith(e)||e.startsWith(o))),zV=(i,e,t,o,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||i):(t?o.isOnBlur:a.isOnBlur)?!i:(t?o.isOnChange:a.isOnChange)?i:!0,NV=(i,e)=>!Dy(mi(i,e)).length&&ns(i,e),OV=(i,e,t)=>{const o=Ip(mi(i,t));return Hr(o,"root",e[t]),Hr(i,t,o),i},mg=i=>Io(i);function xT(i,e,t="validate"){if(mg(i)||Array.isArray(i)&&i.every(mg)||za(i)&&!i)return{type:t,message:mg(i)?i:"",ref:e}}var Cu=i=>qn(i)&&!Vg(i)?i:{value:i,message:""},bT=async(i,e,t,o,a,c)=>{const{ref:u,refs:n,required:p,maxLength:m,minLength:g,min:v,max:y,pattern:k,validate:_,name:T,valueAsNumber:M,mount:A}=i._f,x=mi(t,T);if(!A||e.has(T))return{};const P=n?n[0]:u,D=V=>{a&&P.reportValidity&&(P.setCustomValidity(za(V)?"":V||""),P.reportValidity())},w={},I=O0(u),N=Lf(u),q=I||N,Z=(M||N0(u))&&Gn(u.value)&&Gn(x)||Ug(u)&&u.value===""||x===""||Array.isArray(x)&&!x.length,X=U2.bind(null,T,o,w),j=(V,U,L,R=ul.maxLength,G=ul.minLength)=>{const $=V?U:L;w[T]={type:V?R:G,message:$,ref:u,...X(V?R:G,$)}};if(c?!Array.isArray(x)||!x.length:p&&(!q&&(Z||sa(x))||za(x)&&!x||N&&!H2(n).isValid||I&&!q2(n).isValid)){const{value:V,message:U}=mg(p)?{value:!!p,message:p}:Cu(p);if(V&&(w[T]={type:ul.required,message:U,ref:P,...X(ul.required,U)},!o))return D(U),w}if(!Z&&(!sa(v)||!sa(y))){let V,U;const L=Cu(y),R=Cu(v);if(!sa(x)&&!isNaN(x)){const G=u.valueAsNumber||x&&+x;sa(L.value)||(V=G>L.value),sa(R.value)||(U=G<R.value)}else{const G=u.valueAsDate||new Date(x),$=W=>new Date(new Date().toDateString()+" "+W),F=u.type=="time",H=u.type=="week";Io(L.value)&&x&&(V=F?$(x)>$(L.value):H?x>L.value:G>new Date(L.value)),Io(R.value)&&x&&(U=F?$(x)<$(R.value):H?x<R.value:G<new Date(R.value))}if((V||U)&&(j(!!V,L.message,R.message,ul.max,ul.min),!o))return D(w[T].message),w}if((m||g)&&!Z&&(Io(x)||c&&Array.isArray(x))){const V=Cu(m),U=Cu(g),L=!sa(V.value)&&x.length>+V.value,R=!sa(U.value)&&x.length<+U.value;if((L||R)&&(j(L,V.message,U.message),!o))return D(w[T].message),w}if(k&&!Z&&Io(x)){const{value:V,message:U}=Cu(k);if(Vg(V)&&!x.match(V)&&(w[T]={type:ul.pattern,message:U,ref:u,...X(ul.pattern,U)},!o))return D(U),w}if(_){if(oo(_)){const V=await _(x,t),U=xT(V,P);if(U&&(w[T]={...U,...X(ul.validate,U.message)},!o))return D(U.message),w}else if(qn(_)){let V={};for(const U in _){if(!na(V)&&!o)break;const L=xT(await _[U](x,t),P,U);L&&(V={...L,...X(U,L.message)},D(L.message),o&&(w[T]=V))}if(!na(V)&&(w[T]={ref:P,...V},!o))return w}}return D(!0),w};const jV={mode:ao.onSubmit,reValidateMode:ao.onChange,shouldFocusError:!0};function BV(i={}){let e={...jV,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:oo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const o={};let a=qn(e.defaultValues)||qn(e.values)?Cs(e.defaultValues||e.values)||{}:{},c=e.shouldUnregister?{}:Cs(a),u={action:!1,mount:!1,watch:!1},n={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,m=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const y={array:cT(),state:cT()},k=fT(e.mode),_=fT(e.reValidateMode),T=e.criteriaMode===ao.all,M=ke=>me=>{clearTimeout(m),m=setTimeout(ke,me)},A=async ke=>{if(!e.disabled&&(g.isValid||v.isValid||ke)){const me=e.resolver?na((await Z()).errors):await j(o,!0);me!==t.isValid&&y.state.next({isValid:me})}},x=(ke,me)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((ke||Array.from(n.mount)).forEach(fe=>{fe&&(me?Hr(t.validatingFields,fe,me):ns(t.validatingFields,fe))}),y.state.next({validatingFields:t.validatingFields,isValidating:!na(t.validatingFields)}))},P=(ke,me=[],fe,Ae,De=!0,Pe=!0)=>{if(Ae&&fe&&!e.disabled){if(u.action=!0,Pe&&Array.isArray(mi(o,ke))){const je=fe(mi(o,ke),Ae.argA,Ae.argB);De&&Hr(o,ke,je)}if(Pe&&Array.isArray(mi(t.errors,ke))){const je=fe(mi(t.errors,ke),Ae.argA,Ae.argB);De&&Hr(t.errors,ke,je),NV(t.errors,ke)}if((g.touchedFields||v.touchedFields)&&Pe&&Array.isArray(mi(t.touchedFields,ke))){const je=fe(mi(t.touchedFields,ke),Ae.argA,Ae.argB);De&&Hr(t.touchedFields,ke,je)}(g.dirtyFields||v.dirtyFields)&&(t.dirtyFields=gp(a,c)),y.state.next({name:ke,isDirty:U(ke,me),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Hr(c,ke,me)},D=(ke,me)=>{Hr(t.errors,ke,me),y.state.next({errors:t.errors})},w=ke=>{t.errors=ke,y.state.next({errors:t.errors,isValid:!1})},I=(ke,me,fe,Ae)=>{const De=mi(o,ke);if(De){const Pe=mi(c,ke,Gn(fe)?mi(a,ke):fe);Gn(Pe)||Ae&&Ae.defaultChecked||me?Hr(c,ke,me?Pe:pT(De._f)):G(ke,Pe),u.mount&&A()}},N=(ke,me,fe,Ae,De)=>{let Pe=!1,je=!1;const Xe={name:ke};if(!e.disabled){if(!fe||Ae){(g.isDirty||v.isDirty)&&(je=t.isDirty,t.isDirty=Xe.isDirty=U(),Pe=je!==Xe.isDirty);const et=Jl(mi(a,ke),me);je=!!mi(t.dirtyFields,ke),et?ns(t.dirtyFields,ke):Hr(t.dirtyFields,ke,!0),Xe.dirtyFields=t.dirtyFields,Pe=Pe||(g.dirtyFields||v.dirtyFields)&&je!==!et}if(fe){const et=mi(t.touchedFields,ke);et||(Hr(t.touchedFields,ke,fe),Xe.touchedFields=t.touchedFields,Pe=Pe||(g.touchedFields||v.touchedFields)&&et!==fe)}Pe&&De&&y.state.next(Xe)}return Pe?Xe:{}},q=(ke,me,fe,Ae)=>{const De=mi(t.errors,ke),Pe=(g.isValid||v.isValid)&&za(me)&&t.isValid!==me;if(e.delayError&&fe?(p=M(()=>D(ke,fe)),p(e.delayError)):(clearTimeout(m),p=null,fe?Hr(t.errors,ke,fe):ns(t.errors,ke)),(fe?!Jl(De,fe):De)||!na(Ae)||Pe){const je={...Ae,...Pe&&za(me)?{isValid:me}:{},errors:t.errors,name:ke};t={...t,...je},y.state.next(je)}},Z=async ke=>{x(ke,!0);const me=await e.resolver(c,e.context,PV(ke||n.mount,o,e.criteriaMode,e.shouldUseNativeValidation));return x(ke),me},X=async ke=>{const{errors:me}=await Z(ke);if(ke)for(const fe of ke){const Ae=mi(me,fe);Ae?Hr(t.errors,fe,Ae):ns(t.errors,fe)}else t.errors=me;return me},j=async(ke,me,fe={valid:!0})=>{for(const Ae in ke){const De=ke[Ae];if(De){const{_f:Pe,...je}=De;if(Pe){const Xe=n.array.has(Pe.name),et=De._f&&IV(De._f);et&&g.validatingFields&&x([Ae],!0);const rt=await bT(De,n.disabled,c,T,e.shouldUseNativeValidation&&!me,Xe);if(et&&g.validatingFields&&x([Ae]),rt[Pe.name]&&(fe.valid=!1,me))break;!me&&(mi(rt,Pe.name)?Xe?OV(t.errors,rt,Pe.name):Hr(t.errors,Pe.name,rt[Pe.name]):ns(t.errors,Pe.name))}!na(je)&&await j(je,me,fe)}}return fe.valid},V=()=>{for(const ke of n.unMount){const me=mi(o,ke);me&&(me._f.refs?me._f.refs.every(fe=>!_b(fe)):!_b(me._f.ref))&&Q(ke)}n.unMount=new Set},U=(ke,me)=>!e.disabled&&(ke&&me&&Hr(c,ke,me),!Jl(ue(),a)),L=(ke,me,fe)=>F2(ke,n,{...u.mount?c:Gn(me)?a:Io(ke)?{[ke]:me}:me},fe,me),R=ke=>Dy(mi(u.mount?c:a,ke,e.shouldUnregister?mi(a,ke,[]):[])),G=(ke,me,fe={})=>{const Ae=mi(o,ke);let De=me;if(Ae){const Pe=Ae._f;Pe&&(!Pe.disabled&&Hr(c,ke,W2(me,Pe)),De=Ug(Pe.ref)&&sa(me)?"":me,$2(Pe.ref)?[...Pe.ref.options].forEach(je=>je.selected=De.includes(je.value)):Pe.refs?Lf(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach(je=>(!je.defaultChecked||!je.disabled)&&(je.checked=Array.isArray(De)?!!De.find(Xe=>Xe===je.value):De===je.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!De):Pe.refs.forEach(je=>je.checked=je.value===De):N0(Pe.ref)?Pe.ref.value="":(Pe.ref.value=De,Pe.ref.type||y.state.next({name:ke,values:Cs(c)})))}(fe.shouldDirty||fe.shouldTouch)&&N(ke,De,fe.shouldTouch,fe.shouldDirty,!0),fe.shouldValidate&&ne(ke)},$=(ke,me,fe)=>{for(const Ae in me){const De=me[Ae],Pe=`${ke}.${Ae}`,je=mi(o,Pe);(n.array.has(ke)||qn(De)||je&&!je._f)&&!sh(De)?$(Pe,De,fe):G(Pe,De,fe)}},F=(ke,me,fe={})=>{const Ae=mi(o,ke),De=n.array.has(ke),Pe=Cs(me);Hr(c,ke,Pe),De?(y.array.next({name:ke,values:Cs(c)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&fe.shouldDirty&&y.state.next({name:ke,dirtyFields:gp(a,c),isDirty:U(ke,Pe)})):Ae&&!Ae._f&&!sa(Pe)?$(ke,Pe,fe):G(ke,Pe,fe),gT(ke,n)&&y.state.next({...t}),y.state.next({name:u.mount?ke:void 0,values:Cs(c)})},H=async ke=>{u.mount=!0;const me=ke.target;let fe=me.name,Ae=!0;const De=mi(o,fe),Pe=je=>{Ae=Number.isNaN(je)||sh(je)&&isNaN(je.getTime())||Jl(je,mi(c,fe,je))};if(De){let je,Xe;const et=me.type?pT(De._f):N2(ke),rt=ke.type===Fg.BLUR||ke.type===Fg.FOCUS_OUT,dt=!DV(De._f)&&!e.resolver&&!mi(t.errors,fe)&&!De._f.deps||zV(rt,mi(t.touchedFields,fe),t.isSubmitted,_,k),gt=gT(fe,n,rt);Hr(c,fe,et),rt?(De._f.onBlur&&De._f.onBlur(ke),p&&p(0)):De._f.onChange&&De._f.onChange(ke);const wt=N(fe,et,rt),Rt=!na(wt)||gt;if(!rt&&y.state.next({name:fe,type:ke.type,values:Cs(c)}),dt)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?rt&&A():rt||A()),Rt&&y.state.next({name:fe,...gt?{}:wt});if(!rt&&gt&&y.state.next({...t}),e.resolver){const{errors:ft}=await Z([fe]);if(Pe(et),Ae){const Ct=yT(t.errors,o,fe),Tt=yT(ft,o,Ct.name||fe);je=Tt.error,fe=Tt.name,Xe=na(ft)}}else x([fe],!0),je=(await bT(De,n.disabled,c,T,e.shouldUseNativeValidation))[fe],x([fe]),Pe(et),Ae&&(je?Xe=!1:(g.isValid||v.isValid)&&(Xe=await j(o,!0)));Ae&&(De._f.deps&&ne(De._f.deps),q(fe,Xe,je,wt))}},W=(ke,me)=>{if(mi(t.errors,me)&&ke.focus)return ke.focus(),1},ne=async(ke,me={})=>{let fe,Ae;const De=Ip(ke);if(e.resolver){const Pe=await X(Gn(ke)?ke:De);fe=na(Pe),Ae=ke?!De.some(je=>mi(Pe,je)):fe}else ke?(Ae=(await Promise.all(De.map(async Pe=>{const je=mi(o,Pe);return await j(je&&je._f?{[Pe]:je}:je)}))).every(Boolean),!(!Ae&&!t.isValid)&&A()):Ae=fe=await j(o);return y.state.next({...!Io(ke)||(g.isValid||v.isValid)&&fe!==t.isValid?{}:{name:ke},...e.resolver||!ke?{isValid:fe}:{},errors:t.errors}),me.shouldFocus&&!Ae&&Dp(o,W,ke?De:n.mount),Ae},ue=ke=>{const me={...u.mount?c:a};return Gn(ke)?me:Io(ke)?mi(me,ke):ke.map(fe=>mi(me,fe))},ie=(ke,me)=>({invalid:!!mi((me||t).errors,ke),isDirty:!!mi((me||t).dirtyFields,ke),error:mi((me||t).errors,ke),isValidating:!!mi(t.validatingFields,ke),isTouched:!!mi((me||t).touchedFields,ke)}),oe=ke=>{ke&&Ip(ke).forEach(me=>ns(t.errors,me)),y.state.next({errors:ke?t.errors:{}})},Se=(ke,me,fe)=>{const Ae=(mi(o,ke,{_f:{}})._f||{}).ref,De=mi(t.errors,ke)||{},{ref:Pe,message:je,type:Xe,...et}=De;Hr(t.errors,ke,{...et,...me,ref:Ae}),y.state.next({name:ke,errors:t.errors,isValid:!1}),fe&&fe.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},ye=(ke,me)=>oo(ke)?y.state.subscribe({next:fe=>ke(L(void 0,me),fe)}):L(ke,me,!0),Ce=ke=>y.state.subscribe({next:me=>{LV(ke.name,me.name,ke.exact)&&RV(me,ke.formState||g,Ie,ke.reRenderRoot)&&ke.callback({values:{...c},...t,...me})}}).unsubscribe,K=ke=>(u.mount=!0,v={...v,...ke.formState},Ce({...ke,formState:v})),Q=(ke,me={})=>{for(const fe of ke?Ip(ke):n.mount)n.mount.delete(fe),n.array.delete(fe),me.keepValue||(ns(o,fe),ns(c,fe)),!me.keepError&&ns(t.errors,fe),!me.keepDirty&&ns(t.dirtyFields,fe),!me.keepTouched&&ns(t.touchedFields,fe),!me.keepIsValidating&&ns(t.validatingFields,fe),!e.shouldUnregister&&!me.keepDefaultValue&&ns(a,fe);y.state.next({values:Cs(c)}),y.state.next({...t,...me.keepDirty?{isDirty:U()}:{}}),!me.keepIsValid&&A()},ae=({disabled:ke,name:me})=>{(za(ke)&&u.mount||ke||n.disabled.has(me))&&(ke?n.disabled.add(me):n.disabled.delete(me))},ve=(ke,me={})=>{let fe=mi(o,ke);const Ae=za(me.disabled)||za(e.disabled);return Hr(o,ke,{...fe||{},_f:{...fe&&fe._f?fe._f:{ref:{name:ke}},name:ke,mount:!0,...me}}),n.mount.add(ke),fe?ae({disabled:za(me.disabled)?me.disabled:e.disabled,name:ke}):I(ke,!0,me.value),{...Ae?{disabled:me.disabled||e.disabled}:{},...e.progressive?{required:!!me.required,min:yp(me.min),max:yp(me.max),minLength:yp(me.minLength),maxLength:yp(me.maxLength),pattern:yp(me.pattern)}:{},name:ke,onChange:H,onBlur:H,ref:De=>{if(De){ve(ke,me),fe=mi(o,ke);const Pe=Gn(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,je=kV(Pe),Xe=fe._f.refs||[];if(je?Xe.find(et=>et===Pe):Pe===fe._f.ref)return;Hr(o,ke,{_f:{...fe._f,...je?{refs:[...Xe.filter(_b),Pe,...Array.isArray(mi(a,ke))?[{}]:[]],ref:{type:Pe.type,name:ke}}:{ref:Pe}}}),I(ke,!1,void 0,Pe)}else fe=mi(o,ke,{}),fe._f&&(fe._f.mount=!1),(e.shouldUnregister||me.shouldUnregister)&&!(O2(n.array,ke)&&u.action)&&n.unMount.add(ke)}}},J=()=>e.shouldFocusError&&Dp(o,W,n.mount),re=ke=>{za(ke)&&(y.state.next({disabled:ke}),Dp(o,(me,fe)=>{const Ae=mi(o,fe);Ae&&(me.disabled=Ae._f.disabled||ke,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(De=>{De.disabled=Ae._f.disabled||ke}))},0,!1))},ce=(ke,me)=>async fe=>{let Ae;fe&&(fe.preventDefault&&fe.preventDefault(),fe.persist&&fe.persist());let De=Cs(c);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:je}=await Z();t.errors=Pe,De=je}else await j(o);if(n.disabled.size)for(const Pe of n.disabled)Hr(De,Pe,void 0);if(ns(t.errors,"root"),na(t.errors)){y.state.next({errors:{}});try{await ke(De,fe)}catch(Pe){Ae=Pe}}else me&&await me({...t.errors},fe),J(),setTimeout(J);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:na(t.errors)&&!Ae,submitCount:t.submitCount+1,errors:t.errors}),Ae)throw Ae},ge=(ke,me={})=>{mi(o,ke)&&(Gn(me.defaultValue)?F(ke,Cs(mi(a,ke))):(F(ke,me.defaultValue),Hr(a,ke,Cs(me.defaultValue))),me.keepTouched||ns(t.touchedFields,ke),me.keepDirty||(ns(t.dirtyFields,ke),t.isDirty=me.defaultValue?U(ke,Cs(mi(a,ke))):U()),me.keepError||(ns(t.errors,ke),g.isValid&&A()),y.state.next({...t}))},_e=(ke,me={})=>{const fe=ke?Cs(ke):a,Ae=Cs(fe),De=na(ke),Pe=De?a:Ae;if(me.keepDefaultValues||(a=fe),!me.keepValues){if(me.keepDirtyValues){const je=new Set([...n.mount,...Object.keys(gp(a,c))]);for(const Xe of Array.from(je))mi(t.dirtyFields,Xe)?Hr(Pe,Xe,mi(c,Xe)):F(Xe,mi(Pe,Xe))}else{if(D0&&Gn(ke))for(const je of n.mount){const Xe=mi(o,je);if(Xe&&Xe._f){const et=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(Ug(et)){const rt=et.closest("form");if(rt){rt.reset();break}}}}for(const je of n.mount)F(je,mi(Pe,je))}c=Cs(Pe),y.array.next({values:{...Pe}}),y.state.next({values:{...Pe}})}n={mount:me.keepDirtyValues?n.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!me.keepIsValid||!!me.keepDirtyValues,u.watch=!!e.shouldUnregister,y.state.next({submitCount:me.keepSubmitCount?t.submitCount:0,isDirty:De?!1:me.keepDirty?t.isDirty:!!(me.keepDefaultValues&&!Jl(ke,a)),isSubmitted:me.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:De?{}:me.keepDirtyValues?me.keepDefaultValues&&c?gp(a,c):t.dirtyFields:me.keepDefaultValues&&ke?gp(a,ke):me.keepDirty?t.dirtyFields:{},touchedFields:me.keepTouched?t.touchedFields:{},errors:me.keepErrors?t.errors:{},isSubmitSuccessful:me.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(ke,me)=>_e(oo(ke)?ke(c):ke,me),Te=(ke,me={})=>{const fe=mi(o,ke),Ae=fe&&fe._f;if(Ae){const De=Ae.refs?Ae.refs[0]:Ae.ref;De.focus&&(De.focus(),me.shouldSelect&&oo(De.select)&&De.select())}},Ie=ke=>{t={...t,...ke}},Ge={control:{register:ve,unregister:Q,getFieldState:ie,handleSubmit:ce,setError:Se,_subscribe:Ce,_runSchema:Z,_getWatch:L,_getDirty:U,_setValid:A,_setFieldArray:P,_setDisabledField:ae,_setErrors:w,_getFieldArray:R,_reset:_e,_resetDefaultValues:()=>oo(e.defaultValues)&&e.defaultValues().then(ke=>{ze(ke,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:re,_subjects:y,_proxyFormState:g,get _fields(){return o},get _formValues(){return c},get _state(){return u},set _state(ke){u=ke},get _defaultValues(){return a},get _names(){return n},set _names(ke){n=ke},get _formState(){return t},get _options(){return e},set _options(ke){e={...e,...ke}}},subscribe:K,trigger:ne,register:ve,handleSubmit:ce,watch:ye,setValue:F,getValues:ue,reset:ze,resetField:ge,clearErrors:oe,unregister:Q,setError:Se,setFocus:Te,getFieldState:ie};return{...Ge,formControl:Ge}}function FV(i={}){const e=Me.useRef(void 0),t=Me.useRef(void 0),[o,a]=Me.useState({isDirty:!1,isValidating:!1,isLoading:oo(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:oo(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:BV(i),formState:o},i.formControl&&i.defaultValues&&!oo(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const c=e.current.control;return c._options=i,z0(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>a({...c._formState}),reRenderRoot:!0});return a(n=>({...n,isReady:!0})),c._formState.isReady=!0,u},[c]),Me.useEffect(()=>c._disableForm(i.disabled),[c,i.disabled]),Me.useEffect(()=>{i.mode&&(c._options.mode=i.mode),i.reValidateMode&&(c._options.reValidateMode=i.reValidateMode),i.errors&&!na(i.errors)&&c._setErrors(i.errors)},[c,i.errors,i.mode,i.reValidateMode]),Me.useEffect(()=>{i.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,i.shouldUnregister]),Me.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==o.isDirty&&c._subjects.state.next({isDirty:u})}},[c,o.isDirty]),Me.useEffect(()=>{i.values&&!Jl(i.values,t.current)?(c._reset(i.values,c._options.resetOptions),t.current=i.values,a(u=>({...u}))):c._resetDefaultValues()},[c,i.values]),Me.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),e.current.formState=B2(o,c),e.current}const vT=(i,e,t)=>{if(i&&"reportValidity"in i){const o=mi(t,e);i.setCustomValidity(o&&o.message||""),i.reportValidity()}},Y2=(i,e)=>{for(const t in e.fields){const o=e.fields[t];o&&o.ref&&"reportValidity"in o.ref?vT(o.ref,t,i):o&&o.refs&&o.refs.forEach(a=>vT(a,t,i))}},UV=(i,e)=>{e.shouldUseNativeValidation&&Y2(i,e);const t={};for(const o in i){const a=mi(e.fields,o),c=Object.assign(i[o]||{},{ref:a&&a.ref});if($V(e.names||Object.keys(i),o)){const u=Object.assign({},mi(t,o));Hr(u,"root",c),Hr(t,o,u)}else Hr(t,o,c)}return t},$V=(i,e)=>{const t=_T(e);return i.some(o=>_T(o).match(`^${t}\\.\\d+`))};function _T(i){return i.replace(/\]|\[/g,"")}function VV(i,e){for(var t={};i.length;){var o=i[0],a=o.code,c=o.message,u=o.path.join(".");if(!t[u])if("unionErrors"in o){var n=o.unionErrors[0].errors[0];t[u]={message:n.message,type:n.code}}else t[u]={message:c,type:a};if("unionErrors"in o&&o.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return i.push(v)})}),e){var p=t[u].types,m=p&&p[o.code];t[u]=U2(u,e,t,a,m?[].concat(m,o.message):o.message)}i.shift()}return t}function GV(i,e,t){return t===void 0&&(t={}),function(o,a,c){try{return Promise.resolve(function(u,n){try{var p=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](o,e)).then(function(m){return c.shouldUseNativeValidation&&Y2({},c),{errors:{},values:t.raw?Object.assign({},o):m}})}catch(m){return n(m)}return p&&p.then?p.then(void 0,n):p}(0,function(u){if(function(n){return Array.isArray(n==null?void 0:n.errors)}(u))return{values:{},errors:UV(VV(u.errors,!c.shouldUseNativeValidation&&c.criteriaMode==="all"),c)};throw u}))}catch(u){return Promise.reject(u)}}}var Lr;(function(i){i.assertEqual=a=>a;function e(a){}i.assertIs=e;function t(a){throw new Error}i.assertNever=t,i.arrayToEnum=a=>{const c={};for(const u of a)c[u]=u;return c},i.getValidEnumValues=a=>{const c=i.objectKeys(a).filter(n=>typeof a[a[n]]!="number"),u={};for(const n of c)u[n]=a[n];return i.objectValues(u)},i.objectValues=a=>i.objectKeys(a).map(function(c){return a[c]}),i.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const c=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.push(u);return c},i.find=(a,c)=>{for(const u of a)if(c(u))return u},i.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function o(a,c=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(c)}i.joinValues=o,i.jsonStringifyReplacer=(a,c)=>typeof c=="bigint"?c.toString():c})(Lr||(Lr={}));var av;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(av||(av={}));const Ci=Lr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ml=i=>{switch(typeof i){case"undefined":return Ci.undefined;case"string":return Ci.string;case"number":return isNaN(i)?Ci.nan:Ci.number;case"boolean":return Ci.boolean;case"function":return Ci.function;case"bigint":return Ci.bigint;case"symbol":return Ci.symbol;case"object":return Array.isArray(i)?Ci.array:i===null?Ci.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Ci.promise:typeof Map<"u"&&i instanceof Map?Ci.map:typeof Set<"u"&&i instanceof Set?Ci.set:typeof Date<"u"&&i instanceof Date?Ci.date:Ci.object;default:return Ci.unknown}},Gt=Lr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),HV=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class $a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(c){return c.message},o={_errors:[]},a=c=>{for(const u of c.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)o._errors.push(t(u));else{let n=o,p=0;for(;p<u.path.length;){const m=u.path[p];p===u.path.length-1?(n[m]=n[m]||{_errors:[]},n[m]._errors.push(t(u))):n[m]=n[m]||{_errors:[]},n=n[m],p++}}};return a(this),o}static assert(e){if(!(e instanceof $a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},o=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):o.push(e(a));return{formErrors:o,fieldErrors:t}}get formErrors(){return this.flatten()}}$a.create=i=>new $a(i);const Yu=(i,e)=>{let t;switch(i.code){case Gt.invalid_type:i.received===Ci.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Gt.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,Lr.jsonStringifyReplacer)}`;break;case Gt.unrecognized_keys:t=`Unrecognized key(s) in object: ${Lr.joinValues(i.keys,", ")}`;break;case Gt.invalid_union:t="Invalid input";break;case Gt.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Lr.joinValues(i.options)}`;break;case Gt.invalid_enum_value:t=`Invalid enum value. Expected ${Lr.joinValues(i.options)}, received '${i.received}'`;break;case Gt.invalid_arguments:t="Invalid function arguments";break;case Gt.invalid_return_type:t="Invalid function return type";break;case Gt.invalid_date:t="Invalid date";break;case Gt.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:Lr.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Gt.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Gt.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Gt.custom:t="Invalid input";break;case Gt.invalid_intersection_types:t="Intersection results could not be merged";break;case Gt.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Gt.not_finite:t="Number must be finite";break;default:t=e.defaultError,Lr.assertNever(i)}return{message:t}};let Z2=Yu;function WV(i){Z2=i}function Gg(){return Z2}const Hg=i=>{const{data:e,path:t,errorMaps:o,issueData:a}=i,c=[...t,...a.path||[]],u={...a,path:c};if(a.message!==void 0)return{...a,path:c,message:a.message};let n="";const p=o.filter(m=>!!m).slice().reverse();for(const m of p)n=m(u,{data:e,defaultError:n}).message;return{...a,path:c,message:n}},qV=[];function yi(i,e){const t=Gg(),o=Hg({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===Yu?void 0:Yu].filter(a=>!!a)});i.common.issues.push(o)}class Ws{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const o=[];for(const a of t){if(a.status==="aborted")return tr;a.status==="dirty"&&e.dirty(),o.push(a.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,t){const o=[];for(const a of t){const c=await a.key,u=await a.value;o.push({key:c,value:u})}return Ws.mergeObjectSync(e,o)}static mergeObjectSync(e,t){const o={};for(const a of t){const{key:c,value:u}=a;if(c.status==="aborted"||u.status==="aborted")return tr;c.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),c.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(o[c.value]=u.value)}return{status:e.value,value:o}}}const tr=Object.freeze({status:"aborted"}),Pu=i=>({status:"dirty",value:i}),fa=i=>({status:"valid",value:i}),ov=i=>i.status==="aborted",lv=i=>i.status==="dirty",_h=i=>i.status==="valid",Zp=i=>typeof Promise<"u"&&i instanceof Promise;function Wg(i,e,t,o){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function X2(i,e,t,o,a){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var Ri;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ri||(Ri={}));var Tp,Ep;class Bo{constructor(e,t,o,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=o,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wT=(i,e)=>{if(_h(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new $a(i.common.issues);return this._error=t,this._error}}};function fr(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:o,description:a}=i;if(e&&(t||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,n)=>{var p,m;const{message:g}=i;return u.code==="invalid_enum_value"?{message:g??n.defaultError}:typeof n.data>"u"?{message:(p=g??o)!==null&&p!==void 0?p:n.defaultError}:u.code!=="invalid_type"?{message:n.defaultError}:{message:(m=g??t)!==null&&m!==void 0?m:n.defaultError}},description:a}}class yr{get description(){return this._def.description}_getType(e){return ml(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ml(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ws,ctx:{common:e.parent.common,data:e.data,parsedType:ml(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Zp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const o=this.safeParse(e,t);if(o.success)return o.data;throw o.error}safeParse(e,t){var o;const a={common:{issues:[],async:(o=t==null?void 0:t.async)!==null&&o!==void 0?o:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)},c=this._parseSync({data:e,path:a.path,parent:a});return wT(a,c)}"~validate"(e){var t,o;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)};if(!this["~standard"].async)try{const c=this._parseSync({data:e,path:[],parent:a});return _h(c)?{value:c.value}:{issues:a.common.issues}}catch(c){!((o=(t=c==null?void 0:c.message)===null||t===void 0?void 0:t.toLowerCase())===null||o===void 0)&&o.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(c=>_h(c)?{value:c.value}:{issues:a.common.issues})}async parseAsync(e,t){const o=await this.safeParseAsync(e,t);if(o.success)return o.data;throw o.error}async safeParseAsync(e,t){const o={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ml(e)},a=this._parse({data:e,path:o.path,parent:o}),c=await(Zp(a)?a:Promise.resolve(a));return wT(o,c)}refine(e,t){const o=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,c)=>{const u=e(a),n=()=>c.addIssue({code:Gt.custom,...o(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(n(),!1)):u?!0:(n(),!1)})}refinement(e,t){return this._refinement((o,a)=>e(o)?!0:(a.addIssue(typeof t=="function"?t(o,a):t),!1))}_refinement(e){return new go({schema:this,typeName:Ji.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Lo.create(this,this._def)}nullable(){return gc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ho.create(this)}promise(){return Xu.create(this,this._def)}or(e){return Jp.create([this,e],this._def)}and(e){return ef.create(this,e,this._def)}transform(e){return new go({...fr(this._def),schema:this,typeName:Ji.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new af({...fr(this._def),innerType:this,defaultValue:t,typeName:Ji.ZodDefault})}brand(){return new j0({typeName:Ji.ZodBranded,type:this,...fr(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new of({...fr(this._def),innerType:this,catchValue:t,typeName:Ji.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return zf.create(this,e)}readonly(){return lf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const YV=/^c[^\s-]{8,}$/i,ZV=/^[0-9a-z]+$/,XV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,KV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QV=/^[a-z0-9_-]{21}$/i,JV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wb;const rG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,K2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cG=new RegExp(`^${K2}$`);function Q2(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function hG(i){return new RegExp(`^${Q2(i)}$`)}function J2(i){let e=`${K2}T${Q2(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function uG(i,e){return!!((e==="v4"||!e)&&rG.test(i)||(e==="v6"||!e)&&sG.test(i))}function dG(i,e){if(!JV.test(i))return!1;try{const[t]=i.split("."),o=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(o));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function pG(i,e){return!!((e==="v4"||!e)&&nG.test(i)||(e==="v6"||!e)&&aG.test(i))}class lo extends yr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ci.string){const c=this._getOrReturnCtx(e);return yi(c,{code:Gt.invalid_type,expected:Ci.string,received:c.parsedType}),tr}const o=new Ws;let a;for(const c of this._def.checks)if(c.kind==="min")e.data.length<c.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),o.dirty());else if(c.kind==="max")e.data.length>c.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),o.dirty());else if(c.kind==="length"){const u=e.data.length>c.value,n=e.data.length<c.value;(u||n)&&(a=this._getOrReturnCtx(e,a),u?yi(a,{code:Gt.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):n&&yi(a,{code:Gt.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),o.dirty())}else if(c.kind==="email")tG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"email",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="emoji")wb||(wb=new RegExp(iG,"u")),wb.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"emoji",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="uuid")KV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"uuid",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="nanoid")QV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"nanoid",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="cuid")YV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cuid",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="cuid2")ZV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cuid2",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="ulid")XV.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"ulid",code:Gt.invalid_string,message:c.message}),o.dirty());else if(c.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),yi(a,{validation:"url",code:Gt.invalid_string,message:c.message}),o.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"regex",code:Gt.invalid_string,message:c.message}),o.dirty())):c.kind==="trim"?e.data=e.data.trim():c.kind==="includes"?e.data.includes(c.value,c.position)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),o.dirty()):c.kind==="toLowerCase"?e.data=e.data.toLowerCase():c.kind==="toUpperCase"?e.data=e.data.toUpperCase():c.kind==="startsWith"?e.data.startsWith(c.value)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:{startsWith:c.value},message:c.message}),o.dirty()):c.kind==="endsWith"?e.data.endsWith(c.value)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:{endsWith:c.value},message:c.message}),o.dirty()):c.kind==="datetime"?J2(c).test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:"datetime",message:c.message}),o.dirty()):c.kind==="date"?cG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:"date",message:c.message}),o.dirty()):c.kind==="time"?hG(c).test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.invalid_string,validation:"time",message:c.message}),o.dirty()):c.kind==="duration"?eG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"duration",code:Gt.invalid_string,message:c.message}),o.dirty()):c.kind==="ip"?uG(e.data,c.version)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"ip",code:Gt.invalid_string,message:c.message}),o.dirty()):c.kind==="jwt"?dG(e.data,c.alg)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"jwt",code:Gt.invalid_string,message:c.message}),o.dirty()):c.kind==="cidr"?pG(e.data,c.version)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"cidr",code:Gt.invalid_string,message:c.message}),o.dirty()):c.kind==="base64"?oG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"base64",code:Gt.invalid_string,message:c.message}),o.dirty()):c.kind==="base64url"?lG.test(e.data)||(a=this._getOrReturnCtx(e,a),yi(a,{validation:"base64url",code:Gt.invalid_string,message:c.message}),o.dirty()):Lr.assertNever(c);return{status:o.value,value:e.data}}_regex(e,t,o){return this.refinement(a=>e.test(a),{validation:t,code:Gt.invalid_string,...Ri.errToObj(o)})}_addCheck(e){return new lo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ri.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ri.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ri.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ri.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ri.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ri.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ri.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ri.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ri.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ri.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ri.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ri.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ri.errToObj(e)})}datetime(e){var t,o;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(o=e==null?void 0:e.local)!==null&&o!==void 0?o:!1,...Ri.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ri.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ri.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ri.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ri.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ri.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ri.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ri.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ri.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ri.errToObj(t)})}nonempty(e){return this.min(1,Ri.errToObj(e))}trim(){return new lo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new lo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new lo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}lo.create=i=>{var e;return new lo({checks:[],typeName:Ji.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...fr(i)})};function fG(i,e){const t=(i.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,a=t>o?t:o,c=parseInt(i.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return c%u/Math.pow(10,a)}class pc extends yr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ci.number){const c=this._getOrReturnCtx(e);return yi(c,{code:Gt.invalid_type,expected:Ci.number,received:c.parsedType}),tr}let o;const a=new Ws;for(const c of this._def.checks)c.kind==="int"?Lr.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.invalid_type,expected:"integer",received:"float",message:c.message}),a.dirty()):c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),a.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),a.dirty()):c.kind==="multipleOf"?fG(e.data,c.value)!==0&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.not_multiple_of,multipleOf:c.value,message:c.message}),a.dirty()):c.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.not_finite,message:c.message}),a.dirty()):Lr.assertNever(c);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,o,a){return new pc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:Ri.toString(a)}]})}_addCheck(e){return new pc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ri.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ri.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ri.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ri.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Lr.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(t===null||o.value>t)&&(t=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pc.create=i=>new pc({checks:[],typeName:Ji.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...fr(i)});class fc extends yr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ci.bigint)return this._getInvalidInput(e);let o;const a=new Ws;for(const c of this._def.checks)c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),a.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),a.dirty()):c.kind==="multipleOf"?e.data%c.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),yi(o,{code:Gt.not_multiple_of,multipleOf:c.value,message:c.message}),a.dirty()):Lr.assertNever(c);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Gt.invalid_type,expected:Ci.bigint,received:t.parsedType}),tr}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,o,a){return new fc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:o,message:Ri.toString(a)}]})}_addCheck(e){return new fc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}fc.create=i=>{var e;return new fc({checks:[],typeName:Ji.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...fr(i)})};class Xp extends yr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ci.boolean){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.boolean,received:o.parsedType}),tr}return fa(e.data)}}Xp.create=i=>new Xp({typeName:Ji.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...fr(i)});class wh extends yr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ci.date){const c=this._getOrReturnCtx(e);return yi(c,{code:Gt.invalid_type,expected:Ci.date,received:c.parsedType}),tr}if(isNaN(e.data.getTime())){const c=this._getOrReturnCtx(e);return yi(c,{code:Gt.invalid_date}),tr}const o=new Ws;let a;for(const c of this._def.checks)c.kind==="min"?e.data.getTime()<c.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),o.dirty()):c.kind==="max"?e.data.getTime()>c.value&&(a=this._getOrReturnCtx(e,a),yi(a,{code:Gt.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),o.dirty()):Lr.assertNever(c);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wh({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ri.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ri.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}wh.create=i=>new wh({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Ji.ZodDate,...fr(i)});class qg extends yr{_parse(e){if(this._getType(e)!==Ci.symbol){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.symbol,received:o.parsedType}),tr}return fa(e.data)}}qg.create=i=>new qg({typeName:Ji.ZodSymbol,...fr(i)});class Kp extends yr{_parse(e){if(this._getType(e)!==Ci.undefined){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.undefined,received:o.parsedType}),tr}return fa(e.data)}}Kp.create=i=>new Kp({typeName:Ji.ZodUndefined,...fr(i)});class Qp extends yr{_parse(e){if(this._getType(e)!==Ci.null){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.null,received:o.parsedType}),tr}return fa(e.data)}}Qp.create=i=>new Qp({typeName:Ji.ZodNull,...fr(i)});class Zu extends yr{constructor(){super(...arguments),this._any=!0}_parse(e){return fa(e.data)}}Zu.create=i=>new Zu({typeName:Ji.ZodAny,...fr(i)});class fh extends yr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fa(e.data)}}fh.create=i=>new fh({typeName:Ji.ZodUnknown,...fr(i)});class wl extends yr{_parse(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Gt.invalid_type,expected:Ci.never,received:t.parsedType}),tr}}wl.create=i=>new wl({typeName:Ji.ZodNever,...fr(i)});class Yg extends yr{_parse(e){if(this._getType(e)!==Ci.undefined){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.void,received:o.parsedType}),tr}return fa(e.data)}}Yg.create=i=>new Yg({typeName:Ji.ZodVoid,...fr(i)});class ho extends yr{_parse(e){const{ctx:t,status:o}=this._processInputParams(e),a=this._def;if(t.parsedType!==Ci.array)return yi(t,{code:Gt.invalid_type,expected:Ci.array,received:t.parsedType}),tr;if(a.exactLength!==null){const u=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(u||n)&&(yi(t,{code:u?Gt.too_big:Gt.too_small,minimum:n?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),o.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(yi(t,{code:Gt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),o.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(yi(t,{code:Gt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),o.dirty()),t.common.async)return Promise.all([...t.data].map((u,n)=>a.type._parseAsync(new Bo(t,u,t.path,n)))).then(u=>Ws.mergeArray(o,u));const c=[...t.data].map((u,n)=>a.type._parseSync(new Bo(t,u,t.path,n)));return Ws.mergeArray(o,c)}get element(){return this._def.type}min(e,t){return new ho({...this._def,minLength:{value:e,message:Ri.toString(t)}})}max(e,t){return new ho({...this._def,maxLength:{value:e,message:Ri.toString(t)}})}length(e,t){return new ho({...this._def,exactLength:{value:e,message:Ri.toString(t)}})}nonempty(e){return this.min(1,e)}}ho.create=(i,e)=>new ho({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Ji.ZodArray,...fr(e)});function Mu(i){if(i instanceof Mn){const e={};for(const t in i.shape){const o=i.shape[t];e[t]=Lo.create(Mu(o))}return new Mn({...i._def,shape:()=>e})}else return i instanceof ho?new ho({...i._def,type:Mu(i.element)}):i instanceof Lo?Lo.create(Mu(i.unwrap())):i instanceof gc?gc.create(Mu(i.unwrap())):i instanceof Fo?Fo.create(i.items.map(e=>Mu(e))):i}class Mn extends yr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Lr.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ci.object){const m=this._getOrReturnCtx(e);return yi(m,{code:Gt.invalid_type,expected:Ci.object,received:m.parsedType}),tr}const{status:o,ctx:a}=this._processInputParams(e),{shape:c,keys:u}=this._getCached(),n=[];if(!(this._def.catchall instanceof wl&&this._def.unknownKeys==="strip"))for(const m in a.data)u.includes(m)||n.push(m);const p=[];for(const m of u){const g=c[m],v=a.data[m];p.push({key:{status:"valid",value:m},value:g._parse(new Bo(a,v,a.path,m)),alwaysSet:m in a.data})}if(this._def.catchall instanceof wl){const m=this._def.unknownKeys;if(m==="passthrough")for(const g of n)p.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(m==="strict")n.length>0&&(yi(a,{code:Gt.unrecognized_keys,keys:n}),o.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const g of n){const v=a.data[g];p.push({key:{status:"valid",value:g},value:m._parse(new Bo(a,v,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const m=[];for(const g of p){const v=await g.key,y=await g.value;m.push({key:v,value:y,alwaysSet:g.alwaysSet})}return m}).then(m=>Ws.mergeObjectSync(o,m)):Ws.mergeObjectSync(o,p)}get shape(){return this._def.shape()}strict(e){return Ri.errToObj,new Mn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,o)=>{var a,c,u,n;const p=(u=(c=(a=this._def).errorMap)===null||c===void 0?void 0:c.call(a,t,o).message)!==null&&u!==void 0?u:o.defaultError;return t.code==="unrecognized_keys"?{message:(n=Ri.errToObj(e).message)!==null&&n!==void 0?n:p}:{message:p}}}:{}})}strip(){return new Mn({...this._def,unknownKeys:"strip"})}passthrough(){return new Mn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ji.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Mn({...this._def,catchall:e})}pick(e){const t={};return Lr.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(t[o]=this.shape[o])}),new Mn({...this._def,shape:()=>t})}omit(e){const t={};return Lr.objectKeys(this.shape).forEach(o=>{e[o]||(t[o]=this.shape[o])}),new Mn({...this._def,shape:()=>t})}deepPartial(){return Mu(this)}partial(e){const t={};return Lr.objectKeys(this.shape).forEach(o=>{const a=this.shape[o];e&&!e[o]?t[o]=a:t[o]=a.optional()}),new Mn({...this._def,shape:()=>t})}required(e){const t={};return Lr.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])t[o]=this.shape[o];else{let c=this.shape[o];for(;c instanceof Lo;)c=c._def.innerType;t[o]=c}}),new Mn({...this._def,shape:()=>t})}keyof(){return ek(Lr.objectKeys(this.shape))}}Mn.create=(i,e)=>new Mn({shape:()=>i,unknownKeys:"strip",catchall:wl.create(),typeName:Ji.ZodObject,...fr(e)});Mn.strictCreate=(i,e)=>new Mn({shape:()=>i,unknownKeys:"strict",catchall:wl.create(),typeName:Ji.ZodObject,...fr(e)});Mn.lazycreate=(i,e)=>new Mn({shape:i,unknownKeys:"strip",catchall:wl.create(),typeName:Ji.ZodObject,...fr(e)});class Jp extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),o=this._def.options;function a(c){for(const n of c)if(n.result.status==="valid")return n.result;for(const n of c)if(n.result.status==="dirty")return t.common.issues.push(...n.ctx.common.issues),n.result;const u=c.map(n=>new $a(n.ctx.common.issues));return yi(t,{code:Gt.invalid_union,unionErrors:u}),tr}if(t.common.async)return Promise.all(o.map(async c=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await c._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(a);{let c;const u=[];for(const p of o){const m={...t,common:{...t.common,issues:[]},parent:null},g=p._parseSync({data:t.data,path:t.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!c&&(c={result:g,ctx:m}),m.common.issues.length&&u.push(m.common.issues)}if(c)return t.common.issues.push(...c.ctx.common.issues),c.result;const n=u.map(p=>new $a(p));return yi(t,{code:Gt.invalid_union,unionErrors:n}),tr}}get options(){return this._def.options}}Jp.create=(i,e)=>new Jp({options:i,typeName:Ji.ZodUnion,...fr(e)});const dl=i=>i instanceof rf?dl(i.schema):i instanceof go?dl(i.innerType()):i instanceof nf?[i.value]:i instanceof mc?i.options:i instanceof sf?Lr.objectValues(i.enum):i instanceof af?dl(i._def.innerType):i instanceof Kp?[void 0]:i instanceof Qp?[null]:i instanceof Lo?[void 0,...dl(i.unwrap())]:i instanceof gc?[null,...dl(i.unwrap())]:i instanceof j0||i instanceof lf?dl(i.unwrap()):i instanceof of?dl(i._def.innerType):[];class Ry extends yr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ci.object)return yi(t,{code:Gt.invalid_type,expected:Ci.object,received:t.parsedType}),tr;const o=this.discriminator,a=t.data[o],c=this.optionsMap.get(a);return c?t.common.async?c._parseAsync({data:t.data,path:t.path,parent:t}):c._parseSync({data:t.data,path:t.path,parent:t}):(yi(t,{code:Gt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),tr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,o){const a=new Map;for(const c of t){const u=dl(c.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of u){if(a.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,c)}}return new Ry({typeName:Ji.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...fr(o)})}}function cv(i,e){const t=ml(i),o=ml(e);if(i===e)return{valid:!0,data:i};if(t===Ci.object&&o===Ci.object){const a=Lr.objectKeys(e),c=Lr.objectKeys(i).filter(n=>a.indexOf(n)!==-1),u={...i,...e};for(const n of c){const p=cv(i[n],e[n]);if(!p.valid)return{valid:!1};u[n]=p.data}return{valid:!0,data:u}}else if(t===Ci.array&&o===Ci.array){if(i.length!==e.length)return{valid:!1};const a=[];for(let c=0;c<i.length;c++){const u=i[c],n=e[c],p=cv(u,n);if(!p.valid)return{valid:!1};a.push(p.data)}return{valid:!0,data:a}}else return t===Ci.date&&o===Ci.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class ef extends yr{_parse(e){const{status:t,ctx:o}=this._processInputParams(e),a=(c,u)=>{if(ov(c)||ov(u))return tr;const n=cv(c.value,u.value);return n.valid?((lv(c)||lv(u))&&t.dirty(),{status:t.value,value:n.data}):(yi(o,{code:Gt.invalid_intersection_types}),tr)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([c,u])=>a(c,u)):a(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}ef.create=(i,e,t)=>new ef({left:i,right:e,typeName:Ji.ZodIntersection,...fr(t)});class Fo extends yr{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==Ci.array)return yi(o,{code:Gt.invalid_type,expected:Ci.array,received:o.parsedType}),tr;if(o.data.length<this._def.items.length)return yi(o,{code:Gt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tr;!this._def.rest&&o.data.length>this._def.items.length&&(yi(o,{code:Gt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const c=[...o.data].map((u,n)=>{const p=this._def.items[n]||this._def.rest;return p?p._parse(new Bo(o,u,o.path,n)):null}).filter(u=>!!u);return o.common.async?Promise.all(c).then(u=>Ws.mergeArray(t,u)):Ws.mergeArray(t,c)}get items(){return this._def.items}rest(e){return new Fo({...this._def,rest:e})}}Fo.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fo({items:i,typeName:Ji.ZodTuple,rest:null,...fr(e)})};class tf extends yr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==Ci.object)return yi(o,{code:Gt.invalid_type,expected:Ci.object,received:o.parsedType}),tr;const a=[],c=this._def.keyType,u=this._def.valueType;for(const n in o.data)a.push({key:c._parse(new Bo(o,n,o.path,n)),value:u._parse(new Bo(o,o.data[n],o.path,n)),alwaysSet:n in o.data});return o.common.async?Ws.mergeObjectAsync(t,a):Ws.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,o){return t instanceof yr?new tf({keyType:e,valueType:t,typeName:Ji.ZodRecord,...fr(o)}):new tf({keyType:lo.create(),valueType:e,typeName:Ji.ZodRecord,...fr(t)})}}class Zg extends yr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==Ci.map)return yi(o,{code:Gt.invalid_type,expected:Ci.map,received:o.parsedType}),tr;const a=this._def.keyType,c=this._def.valueType,u=[...o.data.entries()].map(([n,p],m)=>({key:a._parse(new Bo(o,n,o.path,[m,"key"])),value:c._parse(new Bo(o,p,o.path,[m,"value"]))}));if(o.common.async){const n=new Map;return Promise.resolve().then(async()=>{for(const p of u){const m=await p.key,g=await p.value;if(m.status==="aborted"||g.status==="aborted")return tr;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),n.set(m.value,g.value)}return{status:t.value,value:n}})}else{const n=new Map;for(const p of u){const m=p.key,g=p.value;if(m.status==="aborted"||g.status==="aborted")return tr;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),n.set(m.value,g.value)}return{status:t.value,value:n}}}}Zg.create=(i,e,t)=>new Zg({valueType:e,keyType:i,typeName:Ji.ZodMap,...fr(t)});class Th extends yr{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.parsedType!==Ci.set)return yi(o,{code:Gt.invalid_type,expected:Ci.set,received:o.parsedType}),tr;const a=this._def;a.minSize!==null&&o.data.size<a.minSize.value&&(yi(o,{code:Gt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&o.data.size>a.maxSize.value&&(yi(o,{code:Gt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const c=this._def.valueType;function u(p){const m=new Set;for(const g of p){if(g.status==="aborted")return tr;g.status==="dirty"&&t.dirty(),m.add(g.value)}return{status:t.value,value:m}}const n=[...o.data.values()].map((p,m)=>c._parse(new Bo(o,p,o.path,m)));return o.common.async?Promise.all(n).then(p=>u(p)):u(n)}min(e,t){return new Th({...this._def,minSize:{value:e,message:Ri.toString(t)}})}max(e,t){return new Th({...this._def,maxSize:{value:e,message:Ri.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Th.create=(i,e)=>new Th({valueType:i,minSize:null,maxSize:null,typeName:Ji.ZodSet,...fr(e)});class Ou extends yr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ci.function)return yi(t,{code:Gt.invalid_type,expected:Ci.function,received:t.parsedType}),tr;function o(n,p){return Hg({data:n,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gg(),Yu].filter(m=>!!m),issueData:{code:Gt.invalid_arguments,argumentsError:p}})}function a(n,p){return Hg({data:n,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gg(),Yu].filter(m=>!!m),issueData:{code:Gt.invalid_return_type,returnTypeError:p}})}const c={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof Xu){const n=this;return fa(async function(...p){const m=new $a([]),g=await n._def.args.parseAsync(p,c).catch(k=>{throw m.addIssue(o(p,k)),m}),v=await Reflect.apply(u,this,g);return await n._def.returns._def.type.parseAsync(v,c).catch(k=>{throw m.addIssue(a(v,k)),m})})}else{const n=this;return fa(function(...p){const m=n._def.args.safeParse(p,c);if(!m.success)throw new $a([o(p,m.error)]);const g=Reflect.apply(u,this,m.data),v=n._def.returns.safeParse(g,c);if(!v.success)throw new $a([a(g,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ou({...this._def,args:Fo.create(e).rest(fh.create())})}returns(e){return new Ou({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,o){return new Ou({args:e||Fo.create([]).rest(fh.create()),returns:t||fh.create(),typeName:Ji.ZodFunction,...fr(o)})}}class rf extends yr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rf.create=(i,e)=>new rf({getter:i,typeName:Ji.ZodLazy,...fr(e)});class nf extends yr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yi(t,{received:t.data,code:Gt.invalid_literal,expected:this._def.value}),tr}return{status:"valid",value:e.data}}get value(){return this._def.value}}nf.create=(i,e)=>new nf({value:i,typeName:Ji.ZodLiteral,...fr(e)});function ek(i,e){return new mc({values:i,typeName:Ji.ZodEnum,...fr(e)})}class mc extends yr{constructor(){super(...arguments),Tp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),o=this._def.values;return yi(t,{expected:Lr.joinValues(o),received:t.parsedType,code:Gt.invalid_type}),tr}if(Wg(this,Tp)||X2(this,Tp,new Set(this._def.values)),!Wg(this,Tp).has(e.data)){const t=this._getOrReturnCtx(e),o=this._def.values;return yi(t,{received:t.data,code:Gt.invalid_enum_value,options:o}),tr}return fa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return mc.create(e,{...this._def,...t})}exclude(e,t=this._def){return mc.create(this.options.filter(o=>!e.includes(o)),{...this._def,...t})}}Tp=new WeakMap;mc.create=ek;class sf extends yr{constructor(){super(...arguments),Ep.set(this,void 0)}_parse(e){const t=Lr.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==Ci.string&&o.parsedType!==Ci.number){const a=Lr.objectValues(t);return yi(o,{expected:Lr.joinValues(a),received:o.parsedType,code:Gt.invalid_type}),tr}if(Wg(this,Ep)||X2(this,Ep,new Set(Lr.getValidEnumValues(this._def.values))),!Wg(this,Ep).has(e.data)){const a=Lr.objectValues(t);return yi(o,{received:o.data,code:Gt.invalid_enum_value,options:a}),tr}return fa(e.data)}get enum(){return this._def.values}}Ep=new WeakMap;sf.create=(i,e)=>new sf({values:i,typeName:Ji.ZodNativeEnum,...fr(e)});class Xu extends yr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ci.promise&&t.common.async===!1)return yi(t,{code:Gt.invalid_type,expected:Ci.promise,received:t.parsedType}),tr;const o=t.parsedType===Ci.promise?t.data:Promise.resolve(t.data);return fa(o.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Xu.create=(i,e)=>new Xu({type:i,typeName:Ji.ZodPromise,...fr(e)});class go extends yr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ji.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:o}=this._processInputParams(e),a=this._def.effect||null,c={addIssue:u=>{yi(o,u),u.fatal?t.abort():t.dirty()},get path(){return o.path}};if(c.addIssue=c.addIssue.bind(c),a.type==="preprocess"){const u=a.transform(o.data,c);if(o.common.async)return Promise.resolve(u).then(async n=>{if(t.value==="aborted")return tr;const p=await this._def.schema._parseAsync({data:n,path:o.path,parent:o});return p.status==="aborted"?tr:p.status==="dirty"||t.value==="dirty"?Pu(p.value):p});{if(t.value==="aborted")return tr;const n=this._def.schema._parseSync({data:u,path:o.path,parent:o});return n.status==="aborted"?tr:n.status==="dirty"||t.value==="dirty"?Pu(n.value):n}}if(a.type==="refinement"){const u=n=>{const p=a.refinement(n,c);if(o.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return n};if(o.common.async===!1){const n=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?tr:(n.status==="dirty"&&t.dirty(),u(n.value),{status:t.value,value:n.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(n=>n.status==="aborted"?tr:(n.status==="dirty"&&t.dirty(),u(n.value).then(()=>({status:t.value,value:n.value}))))}if(a.type==="transform")if(o.common.async===!1){const u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!_h(u))return u;const n=a.transform(u.value,c);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>_h(u)?Promise.resolve(a.transform(u.value,c)).then(n=>({status:t.value,value:n})):u);Lr.assertNever(a)}}go.create=(i,e,t)=>new go({schema:i,typeName:Ji.ZodEffects,effect:e,...fr(t)});go.createWithPreprocess=(i,e,t)=>new go({schema:e,effect:{type:"preprocess",transform:i},typeName:Ji.ZodEffects,...fr(t)});class Lo extends yr{_parse(e){return this._getType(e)===Ci.undefined?fa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lo.create=(i,e)=>new Lo({innerType:i,typeName:Ji.ZodOptional,...fr(e)});class gc extends yr{_parse(e){return this._getType(e)===Ci.null?fa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gc.create=(i,e)=>new gc({innerType:i,typeName:Ji.ZodNullable,...fr(e)});class af extends yr{_parse(e){const{ctx:t}=this._processInputParams(e);let o=t.data;return t.parsedType===Ci.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}af.create=(i,e)=>new af({innerType:i,typeName:Ji.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fr(e)});class of extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),o={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return Zp(a)?a.then(c=>({status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new $a(o.common.issues)},input:o.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $a(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}of.create=(i,e)=>new of({innerType:i,typeName:Ji.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fr(e)});class Xg extends yr{_parse(e){if(this._getType(e)!==Ci.nan){const o=this._getOrReturnCtx(e);return yi(o,{code:Gt.invalid_type,expected:Ci.nan,received:o.parsedType}),tr}return{status:"valid",value:e.data}}}Xg.create=i=>new Xg({typeName:Ji.ZodNaN,...fr(i)});const mG=Symbol("zod_brand");class j0 extends yr{_parse(e){const{ctx:t}=this._processInputParams(e),o=t.data;return this._def.type._parse({data:o,path:t.path,parent:t})}unwrap(){return this._def.type}}class zf extends yr{_parse(e){const{status:t,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const c=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?tr:c.status==="dirty"?(t.dirty(),Pu(c.value)):this._def.out._parseAsync({data:c.value,path:o.path,parent:o})})();{const a=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return a.status==="aborted"?tr:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:o.path,parent:o})}}static create(e,t){return new zf({in:e,out:t,typeName:Ji.ZodPipeline})}}class lf extends yr{_parse(e){const t=this._def.innerType._parse(e),o=a=>(_h(a)&&(a.value=Object.freeze(a.value)),a);return Zp(t)?t.then(a=>o(a)):o(t)}unwrap(){return this._def.innerType}}lf.create=(i,e)=>new lf({innerType:i,typeName:Ji.ZodReadonly,...fr(e)});function TT(i,e){const t=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof t=="string"?{message:t}:t}function tk(i,e={},t){return i?Zu.create().superRefine((o,a)=>{var c,u;const n=i(o);if(n instanceof Promise)return n.then(p=>{var m,g;if(!p){const v=TT(e,o),y=(g=(m=v.fatal)!==null&&m!==void 0?m:t)!==null&&g!==void 0?g:!0;a.addIssue({code:"custom",...v,fatal:y})}});if(!n){const p=TT(e,o),m=(u=(c=p.fatal)!==null&&c!==void 0?c:t)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...p,fatal:m})}}):Zu.create()}const gG={object:Mn.lazycreate};var Ji;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Ji||(Ji={}));const yG=(i,e={message:`Input not instance of ${i.name}`})=>tk(t=>t instanceof i,e),ik=lo.create,rk=pc.create,xG=Xg.create,bG=fc.create,nk=Xp.create,vG=wh.create,_G=qg.create,wG=Kp.create,TG=Qp.create,EG=Zu.create,CG=fh.create,SG=wl.create,kG=Yg.create,AG=ho.create,MG=Mn.create,PG=Mn.strictCreate,IG=Jp.create,DG=Ry.create,RG=ef.create,LG=Fo.create,zG=tf.create,NG=Zg.create,OG=Th.create,jG=Ou.create,BG=rf.create,FG=nf.create,UG=mc.create,$G=sf.create,VG=Xu.create,ET=go.create,GG=Lo.create,HG=gc.create,WG=go.createWithPreprocess,qG=zf.create,YG=()=>ik().optional(),ZG=()=>rk().optional(),XG=()=>nk().optional(),KG={string:i=>lo.create({...i,coerce:!0}),number:i=>pc.create({...i,coerce:!0}),boolean:i=>Xp.create({...i,coerce:!0}),bigint:i=>fc.create({...i,coerce:!0}),date:i=>wh.create({...i,coerce:!0})},QG=tr;var CT=Object.freeze({__proto__:null,defaultErrorMap:Yu,setErrorMap:WV,getErrorMap:Gg,makeIssue:Hg,EMPTY_PATH:qV,addIssueToContext:yi,ParseStatus:Ws,INVALID:tr,DIRTY:Pu,OK:fa,isAborted:ov,isDirty:lv,isValid:_h,isAsync:Zp,get util(){return Lr},get objectUtil(){return av},ZodParsedType:Ci,getParsedType:ml,ZodType:yr,datetimeRegex:J2,ZodString:lo,ZodNumber:pc,ZodBigInt:fc,ZodBoolean:Xp,ZodDate:wh,ZodSymbol:qg,ZodUndefined:Kp,ZodNull:Qp,ZodAny:Zu,ZodUnknown:fh,ZodNever:wl,ZodVoid:Yg,ZodArray:ho,ZodObject:Mn,ZodUnion:Jp,ZodDiscriminatedUnion:Ry,ZodIntersection:ef,ZodTuple:Fo,ZodRecord:tf,ZodMap:Zg,ZodSet:Th,ZodFunction:Ou,ZodLazy:rf,ZodLiteral:nf,ZodEnum:mc,ZodNativeEnum:sf,ZodPromise:Xu,ZodEffects:go,ZodTransformer:go,ZodOptional:Lo,ZodNullable:gc,ZodDefault:af,ZodCatch:of,ZodNaN:Xg,BRAND:mG,ZodBranded:j0,ZodPipeline:zf,ZodReadonly:lf,custom:tk,Schema:yr,ZodSchema:yr,late:gG,get ZodFirstPartyTypeKind(){return Ji},coerce:KG,any:EG,array:AG,bigint:bG,boolean:nk,date:vG,discriminatedUnion:DG,effect:ET,enum:UG,function:jG,instanceof:yG,intersection:RG,lazy:BG,literal:FG,map:NG,nan:xG,nativeEnum:$G,never:SG,null:TG,nullable:HG,number:rk,object:MG,oboolean:XG,onumber:ZG,optional:GG,ostring:YG,pipeline:qG,preprocess:WG,promise:VG,record:zG,set:OG,strictObject:PG,string:ik,symbol:_G,transformer:ET,tuple:LG,undefined:wG,union:IG,unknown:CG,void:kG,NEVER:QG,ZodIssueCode:Gt,quotelessJson:HV,ZodError:$a});const JG=CT.object({url:CT.string().url({message:it.t("Invalid URL format")}).min(1,{message:it.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:it.t("URL must end with a double wildcard (/**)")})}),sk=({onClose:i,onSubmit:e,isLoading:t,initialUrl:o="",modalTitle:a,submitButtonText:c})=>{const{control:u,handleSubmit:n,formState:{errors:p}}=FV({resolver:GV(JG),defaultValues:{url:o}}),m=g=>e(g);return pe.jsx(mh,{onClose:i,dataTest:"route-form-modal",children:pe.jsxs("form",{onSubmit:n(m),children:[pe.jsx(uv,{children:a}),pe.jsxs(Qg,{children:[pe.jsx(dM,{htmlFor:"url",children:it.t("CHAP Core URL")}),pe.jsx(SV,{name:"url",control:u,render:({field:g})=>pe.jsx(ST,{...g,type:"text",error:!!p.url,onChange:v=>g.onChange(v.value),dataTest:"route-url-input"})}),p.url?pe.jsx("p",{className:_n.mutedText,children:p.url.message}):null]}),pe.jsx(dv,{children:pe.jsxs(pv,{children:[pe.jsx(Vr,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:it.t("Cancel")}),pe.jsx(Vr,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:c})]})})]})})},e7=()=>{const[i,e]=$e.useState(!1),{saveRoute:t,isSaving:o}=L2({onSuccess:()=>{e(!1)}}),a=n=>{t({url:n.url})},c=()=>{e(!0)},u=()=>{e(!1)};return pe.jsxs(pe.Fragment,{children:[pe.jsxs("div",{children:[pe.jsx("p",{className:_n.mutedText,children:it.t("No route found.")}),pe.jsx(Vr,{onClick:c,icon:pe.jsx(yv,{}),small:!0,loading:o,dataTest:"add-route-button",children:it.t("Add route")})]}),i&&pe.jsx(sk,{onClose:u,onSubmit:a,isLoading:o,initialUrl:"",modalTitle:it.t("Add route"),submitButtonText:it.t("Add")})]})},t7=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:o}=L2({onSuccess:()=>{e()}}),a=c=>{t({id:i.id,url:c.url})};return pe.jsx(sk,{onClose:e,onSubmit:a,isLoading:o,initialUrl:i.url,modalTitle:it.t("Edit route"),submitButtonText:it.t("Save")})},i7=({id:i,onSuccess:e,onError:t})=>{const o=Ku(),a=Kg(),{show:c}=Rp(it.t("Error deleting route"),{critical:!0}),{show:u}=Rp(it.t("Route deleted successfully"),{success:!0}),n={resource:"routes",id:i,type:"delete"},{mutate:p,isLoading:m}=dC(()=>o.mutate(n),{onSuccess:()=>{u(),a.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:g=>{c(),console.error("Error deleting route:",g),t==null||t(g)}});return{deleteRoute:p,isDeleting:m}},r7=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:o}=i7({id:i,onSuccess:()=>{e()}});return pe.jsxs(mh,{onClose:e,children:[pe.jsx(uv,{children:it.t("Delete route")}),pe.jsx(Qg,{children:pe.jsx("p",{children:it.t("Are you sure you want to delete this route?")})}),pe.jsx(dv,{children:pe.jsxs(pv,{children:[pe.jsx(Vr,{onClick:e,secondary:!0,children:it.t("Cancel")}),pe.jsx(Vr,{onClick:()=>t(),destructive:!0,loading:o,children:it.t("Delete")})]})})]})},n7=({route:i})=>{const e=Kg(),[t,o]=$e.useState(!1),[a,c]=$e.useState(!1),[u,n]=$e.useState(!1);return pe.jsxs(pe.Fragment,{children:[pe.jsx(vv,{icon:pe.jsx($T,{}),small:!0,onClick:()=>o(!0),component:pe.jsxs(pM,{children:[pe.jsx(ju,{dense:!0,onClick:()=>n(!0),label:it.t("Edit"),icon:pe.jsx(OT,{})}),pe.jsx(ju,{dense:!0,onClick:()=>c(!0),label:it.t("Delete"),icon:pe.jsx(LT,{}),destructive:!0})]}),children:it.t("Sharing")}),t&&pe.jsx(JC,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),o(!1)}}),a&&pe.jsx(r7,{routeId:i.id,onClose:()=>c(!1)}),u&&pe.jsx(t7,{route:i,onClose:()=>n(!1)})]})},s7=({route:i})=>$e.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?pe.jsx(vl,{warning:!0,title:it.t("Public access"),children:it.t('Your route is public and can be accessed by anyone. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,a7=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:o}=C2({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:o}},o7=({authority:i})=>{const{user:e,isLoading:t,error:o}=a7(),a=$e.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:$e.useMemo(()=>{if(e)return a?!0:Array.isArray(i)?i.some(u=>e.authorities.includes(u)):e.authorities.includes(i)},[e,i,a]),isSuperUser:a,isLoading:t,error:o}},xp=({children:i})=>pe.jsx(Jg,{children:pe.jsxs("div",{className:_n.container,children:[pe.jsx("div",{className:_n.header,children:pe.jsx("h2",{children:it.t("Route settings")})}),i]})}),l7="F_ROUTE_PRIVATE_ADD",c7="F_ROUTE_PUBLIC_ADD",h7=()=>{const{route:i,isLoading:e,error:t}=Rf(),{hasAuthority:o,isLoading:a}=o7({authority:[l7,c7]});return $e.useEffect(()=>{t&&console.error(t)},[t]),e||a?pe.jsx(xp,{children:pe.jsx("div",{className:_n.loaderContainer,children:pe.jsx(Tl,{})})}):t?pe.jsx(xp,{children:pe.jsxs("div",{className:_n.loaderContainer,children:[pe.jsx("p",{className:_n.mutedText,children:it.t("There was an error loading the route settings. Please try to reload the page.")}),pe.jsx("p",{className:_n.mutedText,children:it.t("If the problem persists, please contact your system administrator.")})]})}):o?i?pe.jsx(xp,{children:pe.jsxs("div",{className:_n.settingsContainer,children:[pe.jsx(s7,{route:i}),pe.jsxs("div",{className:_n.routeInfo,children:[pe.jsxs("div",{className:_n.routeInfoHeader,children:[pe.jsx("h3",{children:it.t("Route configuration")}),pe.jsx(n7,{route:i})]}),pe.jsxs("div",{className:_n.infoGrid,children:[pe.jsx("span",{className:_n.label,children:it.t("Name")}),pe.jsx("span",{className:_n.value,children:i.displayName}),pe.jsx("span",{className:_n.label,children:it.t("Code")}),pe.jsx("span",{className:_n.value,children:i.code}),pe.jsx("span",{className:_n.label,children:it.t("URL")}),pe.jsx("span",{className:_n.value,children:i.url}),i.authorities.length>0?pe.jsxs(pe.Fragment,{children:[pe.jsx("span",{className:_n.label,children:it.t("Authorities")}),pe.jsx("div",{className:_n.authorities,children:i.authorities.map((c,u)=>pe.jsx("span",{className:_n.authority,children:c},u))})]}):null]})]})]})}):pe.jsx(xp,{children:pe.jsx(e7,{})}):pe.jsx(xp,{children:pe.jsxs("div",{className:_n.loaderContainer,children:[pe.jsx("p",{className:_n.mutedText,children:it.t("You do not have permission to add or modify routes.")}),pe.jsx("p",{className:_n.mutedText,children:it.t("If you think this is an error, please contact your system administrator.")})]})})},u7="_container_1hjxu_1",d7="_header_1hjxu_5",p7="_loaderContainer_1hjxu_16",f7="_mutedText_1hjxu_26",m7="_info_1hjxu_31",g7="_infoHeader_1hjxu_38",y7="_settingsContainer_1hjxu_52",x7="_infoGrid_1hjxu_58",b7="_label_1hjxu_65",v7="_value_1hjxu_70",xs={container:u7,header:d7,loaderContainer:p7,mutedText:f7,info:m7,infoHeader:g7,settingsContainer:y7,infoGrid:x7,label:b7,value:v7},_7=({route:i})=>{const{data:e,error:t,isLoading:o}=mv({queryKey:["systemInfo",i.url],queryFn:()=>BS.systemInfoSystemInfoGet()});return{status:e,error:t,isLoading:o}},w7=()=>{const{route:i}=Rf(),{data:e,isLoading:t,error:o}=mv({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(a=>a.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:o||!e?pe.jsx(vl,{title:it.t("Your server might not be secure"),children:pe.jsx("span",{className:xs.mutedText,children:it.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access to it.")})}):pe.jsx(pe.Fragment,{children:pe.jsx(vl,{error:!0,title:it.t("Your server is not secure"),children:pe.jsx("span",{className:xs.mutedText,children:it.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access to it.")})})})},Tb=({children:i})=>pe.jsx(Jg,{children:pe.jsxs("div",{className:xs.container,children:[pe.jsx("div",{className:xs.header,children:pe.jsx("h2",{children:it.t("CHAP settings")})}),i]})}),T7=({route:i})=>{const{status:e,error:t,isLoading:o}=_7({route:i});return $e.useEffect(()=>{t&&console.error(t)},[t]),o?pe.jsx(Tb,{children:pe.jsx("div",{className:xs.loaderContainer,children:pe.jsx(Tl,{})})}):t||!e?pe.jsx(Tb,{children:pe.jsx("div",{children:pe.jsx(vl,{error:!0,title:it.t("An error occurred while connecting to the CHAP server."),className:xs.mutedText,children:it.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):pe.jsx(Tb,{children:pe.jsxs("div",{className:xs.settingsContainer,children:[pe.jsx(w7,{}),pe.jsxs("div",{className:xs.info,children:[pe.jsx("div",{className:xs.infoHeader,children:pe.jsx("h3",{children:it.t("Server information")})}),pe.jsxs("div",{className:xs.infoGrid,children:[e.chap_core_version&&pe.jsxs(pe.Fragment,{children:[pe.jsx("span",{className:xs.label,children:it.t("CHAP Version")}),pe.jsx("span",{className:xs.value,children:e.chap_core_version})]}),e.python_version&&pe.jsxs(pe.Fragment,{children:[pe.jsx("span",{className:xs.label,children:it.t("Python Version")}),pe.jsx("span",{className:xs.value,children:e.python_version})]}),e.os&&pe.jsxs(pe.Fragment,{children:[pe.jsx("span",{className:xs.label,children:it.t("Operating System")}),pe.jsx("span",{className:xs.value,children:e.os})]}),pe.jsx("span",{className:xs.label,children:it.t("Status")}),pe.jsx("span",{className:xs.value,style:{color:We.green600},children:it.t("Connected")})]})]})]})})},E7="1400px",C7={maxWidth:E7,marginLeft:"auto",marginRight:"auto",padding:"20px 10px 20px 10px"},S7=()=>{const i=Sf(),{route:e}=Rf();return pe.jsx("div",{style:C7,children:pe.jsxs("div",{className:sV.settingsContainer,children:[pe.jsx("div",{children:pe.jsx(Vr,{small:!0,onClick:()=>i("/"),icon:pe.jsx(PT,{}),children:it.t("Back to main page")})}),pe.jsx(h7,{}),e&&pe.jsx(T7,{route:e})]})})},k7=function(){return null},A7=Ej([{path:"/",element:pe.jsx(JO,{to:"/evaluate",replace:!0})},{path:"/evaluate",errorElement:pe.jsx(tb,{}),element:pe.jsx(J1,{component:pe.jsx(Y8,{})})},{path:"/predict",errorElement:pe.jsx(tb,{}),element:pe.jsx(J1,{component:pe.jsx(iV,{})})},{path:"/settings",errorElement:pe.jsx(tb,{}),element:pe.jsx(S7,{})}]),R7=()=>pe.jsxs(pe.Fragment,{children:[pe.jsx(rV,{children:pe.jsx(Nj,{router:A7})}),pe.jsx(k7,{})]});export{R7 as default};
