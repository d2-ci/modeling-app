import{P as ne,c as je,e as sy,l as UT,s as ZP,a as Ut,b as XP,t as Jt,r as Fe,R as pe,_ as _t,d as vn,m as cx,f as ba,L as ux,g as qh,C as Ea,I as om,h as KP,i as Oe,S as QP,F as JP,B as ay,j as eI,k as tI,n as iI,o as VT,p as nI,u as vo,q as rI,v as sI,w as GT,x as aI,y as Wh,z as ja,A as sn,M as Do,D as dd,E as Wc,G as hd,H as pd,J as lm,K as dx,N as il,O as v1,Q as Kr,U as oI,T as lI,V as yo,W as wa,X as cI,Y,Z as Xa,$ as Yh,a0 as uI,a1 as dI,a2 as hx,a3 as b1,a4 as Gl,a5 as Hu,a6 as _1,a7 as hI,a8 as pI}from"./main-LWrg9PHl.js";const fI=i=>typeof i>"u"||i===null||i==="",v2=(i,e,t)=>(n,s,l)=>{const u=n[s];return t?new Error(`Property \`${s}\` on component \`${l}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(n)&&fI(u)?new Error(`Invalid prop \`${s}\` supplied to \`${l}\`, this prop is conditionally required but has value \`${u}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(ne.checkPropTypes({[s]:e},n,"prop",l),null)};function Qr(i,e){const t=v2(i,e,!1);return t.isRequired=v2(i,e,!0),t}const mI=Object.freeze(Object.defineProperty({__proto__:null,colors:je,elevations:sy,layers:UT,sharedPropTypes:ZP,spacers:Ut,spacersNum:XP,theme:Jt},Symbol.toStringTag,{value:"Module"}));function px(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}px.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function w1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}w1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function HT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}HT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function qT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M9.284 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0114.5 8v.02a.503.503 0 01-.005.052L14.5 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L12.793 8.5H2a.5.5 0 01-.09-.992L2 7.5h10.793L8.646 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}qT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function fx(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}fx.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function WT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M13.646 3.646a.5.5 0 01.765.638l-.057.07-8 8a.5.5 0 01-.638.057l-.07-.057-3-3a.5.5 0 01.638-.765l.07.057L6 11.293z",fill:"currentColor"}))}WT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function C1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}C1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function YT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M11.293 15.707a1 1 0 001.414 0l5-5a1 1 0 00-1.414-1.414L12 13.586 7.707 9.293a1 1 0 00-1.414 1.414z",fill:"currentColor"}))}YT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function T1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}T1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function ZT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M13.293 6.293a1 1 0 011.497 1.32l-.083.094L10.415 12l4.292 4.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.32.083l-.094-.083-5-5a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}ZT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function S1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}S1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function XT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M11.293 8.293a1 1 0 011.32-.083l.094.083 5 5a1 1 0 01-1.32 1.497l-.094-.083L12 10.415l-4.293 4.292a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}XT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function KT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("g",{fill:"currentColor"},Fe.createElement("path",{d:"M14 3a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1zm0 1H4v10h10z"}),Fe.createElement("path",{d:"M11 1v1H2v9H1V2a1 1 0 011-1z"})))}KT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function cm(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}cm.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function QT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}QT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function JT(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}JT.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function eS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M9.5 16a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3z",fill:"currentColor",fillRule:"evenodd"}))}eS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function E1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}E1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function k1(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}k1.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function tS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}tS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function um(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}um.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function iS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}iS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function nS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M6 1a5 5 0 013.871 8.164l4.483 4.482-.708.708L9.164 9.87A5 5 0 116 1zm0 1a4 4 0 100 8 4 4 0 000-8z",fill:"currentColor"}))}nS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function rS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M10 1v2.416l.264.125a5 5 0 01.689.424l.014.011 2.095-1.208 2 3.464-2.094 1.209.016.15.009.136L13 8c0 .182-.01.364-.03.543l-.002.015 2.094 1.21-2 3.464-2.095-1.209-.236.166a4.991 4.991 0 01-.712.386l-.019.008V15H6v-2.417l-.263-.123a5 5 0 01-.69-.425l-.015-.012-2.094 1.209-2-3.464 2.093-1.21-.015-.15-.009-.135L3 8c0-.183.01-.364.03-.543l.001-.016L.938 6.232l2-3.464 2.094 1.208.238-.165c.226-.148.464-.277.711-.386L6 3.416V1zM9 2H7v2.126a3.996 3.996 0 00-1.853 1.07L3.304 4.135l-1 1.732 1.841 1.063a4.004 4.004 0 000 2.142l-1.841 1.063 1 1.732 1.843-1.063c.501.51 1.139.887 1.853 1.071V14h2v-2.126a3.996 3.996 0 001.853-1.07l1.843 1.062 1-1.732-1.84-1.064a4.004 4.004 0 000-2.14l1.84-1.064-1-1.732-1.843 1.063a3.996 3.996 0 00-1.852-1.07zM8 6a2 2 0 110 4 2 2 0 010-4zm0 1a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}rS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function pb(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}pb.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function sS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}sS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function aS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M8 3c4 0 7 4 7 5s-3 5-7 5-7-4-7-5 3-5 7-5zm0 1c-1.52 0-3.033.7-4.331 1.868a8.15 8.15 0 00-1.306 1.484A4.336 4.336 0 002 8l.042.091c.055.114.164.321.321.557a8.15 8.15 0 001.306 1.484C4.967 11.3 6.479 12 8 12s3.033-.7 4.331-1.868a8.15 8.15 0 001.306-1.484C13.873 8.294 14 8.004 14 8l-.042-.091a4.902 4.902 0 00-.321-.557 8.15 8.15 0 00-1.306-1.484C11.033 4.7 9.521 4 8 4zm0 1a3 3 0 110 6 3 3 0 010-6zm0 1a2 2 0 100 4 2 2 0 000-4z",fill:"currentColor"}))}aS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function oS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Fe.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}oS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function lS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}lS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};function cS(i){let{color:e,dataTest:t,ariaLabel:n}=i;return Fe.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Fe.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}cS.propTypes={color:ne.string,dataTest:ne.string,ariaLabel:ne.string};const ma=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${je.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${je.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${je.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${je.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${je.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${je.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${je.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${je.white};}`];ma.__hash="4069423049";function uS(i){let{className:e}=i;return pe.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ma.__hash} `+_t.dynamic([["2753140462",[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]]])+" "+(e||"")},pe.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${ma.__hash} `+_t.dynamic([["2753140462",[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]]])+" background"}),pe.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${ma.__hash} `+_t.dynamic([["2753140462",[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]]])+" border"}),pe.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${ma.__hash} `+_t.dynamic([["2753140462",[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]]])+" checkmark"}),pe.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${ma.__hash} `+_t.dynamic([["2753140462",[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]]])+" indeterminate"}),pe.createElement(_t,{id:ma.__hash},ma),pe.createElement(_t,{id:"2753140462",dynamic:[je.grey300,je.grey400,je.blue600,je.blue700,je.yellow700,je.yellow800,je.red500,je.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${je.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.red700};}`]))}uS.propTypes={className:ne.string};function dS(i){let{className:e}=i;return pe.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ma.__hash} `+_t.dynamic([["86695588",[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]]])+" "+(e||"")},pe.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${ma.__hash} `+_t.dynamic([["86695588",[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]]])+" background"}),pe.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${ma.__hash} `+_t.dynamic([["86695588",[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]]])+" border"}),pe.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${ma.__hash} `+_t.dynamic([["86695588",[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]]])+" checkmark"}),pe.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${ma.__hash} `+_t.dynamic([["86695588",[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]]])+" indeterminate"}),pe.createElement(_t,{id:ma.__hash},ma),pe.createElement(_t,{id:"86695588",dynamic:[je.grey400,je.grey400,je.grey500,je.blue600,je.blue800,je.yellow700,je.yellow800,je.red500,je.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${je.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${je.red800};}`]))}dS.propTypes={className:ne.string};function vh(i,e,t){return(e=gI(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function gI(i){var e=yI(i,"string");return typeof e=="symbol"?e:e+""}function yI(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class td extends Fe.Component{constructor(){super(...arguments),vh(this,"ref",Fe.createRef()),vh(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),vh(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),vh(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),vh(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:n,disabled:s,error:l,label:u,name:r,tabIndex:p,valid:f,value:m,warning:v,dense:y,dataTest:_="dhis2-uicore-checkbox"}=this.props,b=vn({checked:e,indeterminate:t,disabled:s,valid:f,error:l,warning:v});return pe.createElement("label",{"data-test":_,className:_t.dynamic([["1252368010",[je.grey900,Jt.disabled,Ut.dp4,Jt.focus]]])+" "+(vn(n,{disabled:s,dense:y})||"")},pe.createElement("input",{type:"checkbox",ref:this.ref,name:r,value:m,checked:e,disabled:s,tabIndex:p,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:_t.dynamic([["1252368010",[je.grey900,Jt.disabled,Ut.dp4,Jt.focus]]])}),pe.createElement("div",{className:_t.dynamic([["1252368010",[je.grey900,Jt.disabled,Ut.dp4,Jt.focus]]])+" "+(vn("icon",{dense:y})||"")},y?pe.createElement(dS,{className:b}):pe.createElement(uS,{className:b})),u,pe.createElement(_t,{id:"1252368010",dynamic:[je.grey900,Jt.disabled,Ut.dp4,Jt.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${je.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${Jt.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Ut.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${Jt.focus};outline-offset:-3px;}`]))}}vh(td,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const b2=cx(["checked","indeterminate"],ne.bool);td.propTypes={checked:b2,className:ne.string,dataTest:ne.string,dense:ne.bool,disabled:ne.bool,error:ba,indeterminate:b2,initialFocus:ne.bool,label:ne.node,name:ne.string,tabIndex:ne.string,valid:ba,value:ne.string,warning:ba,onBlur:ne.func,onChange:ne.func,onFocus:ne.func,onKeyDown:ne.func};var xI=void 0;const vI=(i,e,t)=>{let n;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const r=xI,p=()=>{n=null,i.apply(r,l)};clearTimeout(n),n=setTimeout(p,e)}},hS=i=>{let{dataTest:e,onToggle:t,children:n,tabIndex:s="0",error:l,warning:u,valid:r,disabled:p,dense:f,className:m,inputRef:v}=i;const y=vn(m,"root",{error:l,warning:u,valid:r,disabled:p,dense:f});return pe.createElement("div",{onClick:t,tabIndex:s,ref:v,"data-test":e,className:_t.dynamic([["1568723238",[je.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,je.grey100,je.grey500,Jt.disabled]]])+" "+(y||"")},pe.createElement("div",{className:_t.dynamic([["1568723238",[je.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,je.grey100,je.grey500,Jt.disabled]]])+" root-children"},n),pe.createElement("div",{className:_t.dynamic([["1568723238",[je.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,je.grey100,je.grey500,Jt.disabled]]])+" root-right"},pe.createElement(C1,null)),pe.createElement(_t,{id:"1568723238",dynamic:[je.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,je.grey100,je.grey500,Jt.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${je.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${Jt.focus};border-color:${Jt.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${Jt.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${Jt.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${Jt.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${je.grey100};border-color:${je.grey500};color:${Jt.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:8px;}"]))};hS.propTypes={dataTest:ne.string.isRequired,inputRef:ne.object.isRequired,onToggle:ne.func.isRequired,children:ne.element,className:ne.string,dense:ne.bool,disabled:ne.bool,error:ba,tabIndex:ne.string,valid:ba,warning:ba};const pS=i=>{let{children:e,dataTest:t,maxHeight:n="280px",menuWidth:s,onClick:l,selectRef:u}=i;return pe.createElement(ux,{onBackdropClick:l,transparent:!0},pe.createElement(qh,{reference:u,placement:"bottom-start",observeReferenceResize:!0},pe.createElement("div",{"data-test":`${t}-menuwrapper`,className:_t.dynamic([["1363246346",[s,n,je.white,je.grey200,sy.e300]]])},e,pe.createElement(_t,{id:"1363246346",dynamic:[s,n,je.white,je.grey200,sy.e300]},[`div.__jsx-style-dynamic-selector{width:${s};height:auto;max-height:${n};overflow:auto;background:${je.white};border:1px solid ${je.grey200};border-radius:3px;box-shadow:${sy.e300};}`]))))};pS.propTypes={dataTest:ne.string.isRequired,menuWidth:ne.string.isRequired,selectRef:ne.object.isRequired,children:ne.node,maxHeight:ne.string,onClick:ne.func};function co(i,e,t){return(e=bI(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bI(i){var e=_I(i,"string");return typeof e=="symbol"?e:e+""}function _I(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const wI=27,CI=32,TI=38,SI=40;class A1 extends Fe.Component{constructor(){super(...arguments),co(this,"state",{open:!1,menuWidth:"auto"}),co(this,"selectRef",pe.createRef()),co(this,"inputRef",pe.createRef()),co(this,"onResize",vI(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),co(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),co(this,"onFocus",e=>{const{onFocus:t,disabled:n,selected:s}=this.props;n||!t||t({selected:s},e)}),co(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),co(this,"handleClose",()=>{this.setState({open:!1})}),co(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),co(this,"onOutsideClick",e=>{const{onBlur:t,disabled:n,selected:s}=this.props;n||(this.handleClose(),t&&t({selected:s},e))}),co(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:n,selected:s}=this.props;if(n||(t&&t({selected:s},e),e.defaultPrevented))return;e.stopPropagation();const{open:l}=this.state,{keyCode:u}=e,r=!l&&(u===CI||u===TI||u===SI);if(l&&u===wI)return this.handleClose();if(r)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:n,className:s,selected:l,onChange:u,tabIndex:r,maxHeight:p,error:f,warning:m,valid:v,disabled:y,dense:_,dataTest:b}=this.props,C={selected:l,onChange:u,options:n,disabled:y},E=pe.cloneElement(this.props.input,C),S={selected:l,onChange:u,options:n,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},x=pe.cloneElement(this.props.menu,S);return pe.createElement("div",{className:s,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":b},pe.createElement(hS,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:y?"-1":r,error:f,warning:m,valid:v,disabled:y,dense:_,dataTest:`${b}-input`},E),e&&pe.createElement(pS,{onClick:this.onOutsideClick,maxHeight:p,selectRef:this.selectRef,menuWidth:t,dataTest:`${b}-menu`},x))}}co(A1,"defaultProps",{dataTest:"dhis2-uicore-select"});A1.propTypes={input:ne.element.isRequired,menu:ne.element.isRequired,selected:ne.oneOfType([ne.string,ne.arrayOf(ne.string)]).isRequired,children:ne.node,className:ne.string,dataTest:ne.string,dense:ne.bool,disabled:ne.bool,error:ba,initialFocus:ne.bool,maxHeight:ne.string,tabIndex:ne.string,valid:ba,warning:ba,onBlur:ne.func,onChange:ne.func,onFocus:ne.func,onKeyDown:ne.func};const fS=i=>{let{message:e,className:t,dataTest:n}=i;return pe.createElement("div",{"data-test":n,className:_t.dynamic([["3603755746",[Ut.dp16,je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]]])+" "+(vn(t,"container")||"")},pe.createElement("div",{className:_t.dynamic([["3603755746",[Ut.dp16,je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]]])},pe.createElement(Ea,{small:!0})),e,pe.createElement(_t,{id:"3603755746",dynamic:[Ut.dp16,je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Ut.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${je.grey700};font-family:${Jt.fonts};font-size:13px;padding-block:${Ut.dp8};padding-inline:${Ut.dp24};}`]))};fS.propTypes={dataTest:ne.string.isRequired,className:ne.string,message:ne.string};const fb=i=>{let{value:e,onChange:t,placeholder:n,className:s,dataTest:l}=i;return pe.createElement("div",{className:_t.dynamic([["730881408",[je.white,Ut.dp8,Ut.dp8,Ut.dp4,Ut.dp8]]])+" "+(s||"")},pe.createElement(om,{dense:!0,dataTest:l,value:e,onChange:t,type:"text",name:"filter",placeholder:n,initialFocus:!0}),pe.createElement(_t,{id:"730881408",dynamic:[je.white,Ut.dp8,Ut.dp8,Ut.dp4,Ut.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${je.white};padding-block-start:${Ut.dp8};padding-inline-end:${Ut.dp8};padding-block-end:${Ut.dp4};padding-inline-start:${Ut.dp8};z-index:1;}`]))};fb.propTypes={dataTest:ne.string.isRequired,value:ne.string.isRequired,className:ne.string,placeholder:ne.string,onChange:ne.func};const mS=i=>{let{message:e,className:t}=i;return pe.createElement("div",{className:_t.dynamic([["3788156646",[je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]]])+" "+(t||"")},e,pe.createElement(_t,{id:"3788156646",dynamic:[je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]},[`div.__jsx-style-dynamic-selector{color:${je.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Ut.dp8};padding-inline:${Ut.dp24};text-align:center;}`]))};mS.propTypes={message:ne.string.isRequired,className:ne.string};const gS=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,yS=i=>pe.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),EI=(i,e)=>pe.Children.toArray(e).find(t=>t.props?i===t.props.value:!1);function Ey(){return Ey=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ey.apply(null,arguments)}function _2(i,e,t){return(e=kI(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function kI(i){var e=AI(i,"string");return typeof e=="symbol"?e:e+""}function AI(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let xS=class extends Fe.Component{constructor(){super(...arguments),_2(this,"state",{filter:""}),_2(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f,Menu:m}=this.props,{filter:v}=this.state,y={onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,dataTest:e},_=yS(t);if(pe.Children.count(_)===0||!v)return pe.createElement(pe.Fragment,null,pe.createElement(fb,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),pe.createElement(m,Ey({},y,{options:t})));const b=pe.Children.map(t,E=>{if(!gS(E))return null;const{label:x}=E.props;return x.toLowerCase().includes(v.toLowerCase())?E:null}),C=pe.Children.count(b)>0;return pe.createElement(pe.Fragment,null,pe.createElement(fb,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),C?pe.createElement(m,Ey({},y,{options:b})):pe.createElement(mS,{message:f}))}};xS.propTypes={Menu:ne.elementType.isRequired,dataTest:ne.string.isRequired,noMatchText:ne.string.isRequired,selected:ne.oneOfType([ne.string,ne.arrayOf(ne.string)]).isRequired,empty:ne.node,handleClose:ne.func,handleFocusInput:ne.func,options:ne.node,placeholder:ne.string,onChange:ne.func};const vS=i=>{let{message:e,className:t,dataTest:n}=i;return pe.createElement("div",{"data-test":n,className:_t.dynamic([["3788156646",[je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]]])+" "+(t||"")},e,pe.createElement(_t,{id:"3788156646",dynamic:[je.grey700,Jt.fonts,Ut.dp8,Ut.dp24]},[`div.__jsx-style-dynamic-selector{color:${je.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Ut.dp8};padding-inline:${Ut.dp24};text-align:center;}`]))};vS.propTypes={dataTest:ne.string.isRequired,message:ne.string.isRequired,className:ne.string};const MI=4,w2={styles:pe.createElement(_t,{id:"1892168270"},[`.jsx-1892168270{z-index:${UT.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},PI={name:"offset",options:{offset:[0,MI]}},II={name:"hide"},DI={name:"flip",options:{altBoundary:!0}},mx=i=>{let{children:e,className:t,closeDelay:n=200,content:s,dataTest:l="dhis2-uicore-tooltip",maxWidth:u=300,openDelay:r=200,placement:p="top"}=i;const[f,m]=Fe.useState(!1),v=Fe.useRef(),y=Fe.useRef(null),_=Fe.useRef(null),b=()=>{clearTimeout(_.current),y.current=setTimeout(()=>{m(!0)},r)},C=()=>{clearTimeout(y.current),_.current=setTimeout(()=>{m(!1)},n)},E=()=>{clearTimeout(_.current),y.current=setTimeout(()=>{m(!0)},r)},S=()=>{clearTimeout(y.current),_.current=setTimeout(()=>{m(!1)},n)},x=A=>{A.key==="Escape"&&(_.current=setTimeout(()=>{m(!1)},n))};return Fe.useEffect(()=>(document.addEventListener("keydown",x),()=>{clearTimeout(y.current),clearTimeout(_.current),document.removeEventListener("keydown",x)}),[]),pe.createElement(pe.Fragment,null,typeof e=="function"?e({onMouseOver:b,onMouseOut:C,onFocus:E,onBlur:S,ref:v}):pe.createElement("span",{onMouseOver:b,onMouseOut:C,onFocus:E,onBlur:S,ref:v,tabIndex:0,"aria-describedby":f?"tooltipContenDhis2Ui":"","data-test":`${l}-reference`,className:_t.dynamic([["3515683788",[u,je.grey900,je.white]]])},e),f&&pe.createElement(KP,null,pe.createElement(qh,{className:w2.className,placement:p,reference:v,modifiers:[PI,DI,II]},pe.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:b,onMouseOut:C,"data-test":`${l}-content`,role:"tooltip",className:_t.dynamic([["3515683788",[u,je.grey900,je.white]]])+" "+(t||"")},s))),w2.styles,pe.createElement(_t,{id:"3515683788",dynamic:[u,je.grey900,je.white]},[`div.__jsx-style-dynamic-selector{max-width:${u}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${je.grey900};border-radius:3px;color:${je.white};font-size:13px;line-height:17px;}`]))};mx.propTypes={children:ne.oneOfType([ne.node,ne.func]),className:ne.string,closeDelay:ne.number,content:ne.node,dataTest:ne.string,maxWidth:ne.number,openDelay:ne.number,placement:ne.oneOf(["top","right","bottom","left"])};const bS=i=>{let{onClear:e,clearText:t,className:n,dataTest:s}=i;return pe.createElement(mx,{openDelay:500,content:t},pe.createElement("button",{"data-test":s,onClick:e,type:"button",className:_t.dynamic([["2606883952",[je.grey500,je.grey800,je.grey200,Jt.focus]]])+" "+(n||"")},pe.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:_t.dynamic([["2606883952",[je.grey500,je.grey800,je.grey200,Jt.focus]]])},pe.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:_t.dynamic([["2606883952",[je.grey500,je.grey800,je.grey200,Jt.focus]]])})),pe.createElement(_t,{id:"2606883952",dynamic:[je.grey500,je.grey800,je.grey200,Jt.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${je.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${je.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${je.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${Jt.focus};}`])))};bS.propTypes={clearText:ne.string.isRequired,dataTest:ne.string.isRequired,onClear:ne.func.isRequired,className:ne.string};const _S=i=>{let{placeholder:e,className:t,dataTest:n}=i;return e?pe.createElement("div",{"data-test":n,className:_t.dynamic([["1027033961",[je.grey600]]])+" "+(t||"")},e,pe.createElement(_t,{id:"1027033961",dynamic:[je.grey600]},[`div.__jsx-style-dynamic-selector{color:${je.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};_S.propTypes={dataTest:ne.string.isRequired,className:ne.string,placeholder:ne.string};const wS=i=>{let{prefix:e,className:t,dataTest:n}=i;return e?pe.createElement("div",{"data-test":n,className:_t.dynamic([["1343055987",[je.grey600,Ut.dp12]]])+" "+(t||"")},e,pe.createElement(_t,{id:"1343055987",dynamic:[je.grey600,Ut.dp12]},[`div.__jsx-style-dynamic-selector{color:${je.grey600};padding-inline-end:${Ut.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};wS.propTypes={dataTest:ne.string.isRequired,className:ne.string,prefix:ne.string};const CS=i=>{let{children:e,overflow:t}=i;return pe.createElement("span",{className:_t.dynamic([["765109298",[Ut.dp12]]])+" "+(vn({overflow:t})||"")},e,pe.createElement(_t,{id:"765109298",dynamic:[Ut.dp12]},[`span.__jsx-style-dynamic-selector{margin:0 ${Ut.dp12};color:inherit;white-space:nowrap;}`,".overflow.__jsx-style-dynamic-selector{max-width:150px;overflow:hidden;text-overflow:ellipsis;}"]))};CS.propTypes={children:ne.any,overflow:ne.bool};const TS=i=>{let{icon:e,dataTest:t}=i;return e?pe.createElement("span",{"data-test":t,className:_t.dynamic([["1889825154",[Ut.dp4]]])},e,pe.createElement(_t,{id:"1889825154",dynamic:[Ut.dp4]},[`span.__jsx-style-dynamic-selector{width:24px;height:24px;margin-inline-start:${Ut.dp4};margin-inline-end:-6px;border-radius:50%;overflow:hidden;}`,"span.__jsx-style-dynamic-selector>*{max-height:24px;max-width:24px;}"])):null};TS.propTypes={dataTest:ne.string.isRequired,icon:ne.element};function SS(i){let{className:e}=i;return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"jsx-2898942518 "+(e||"")},pe.createElement("path",{d:"M11.2928932,3.29289322 L12.7071068,4.70710678 L9.41389322,7.99989322 L12.7071068,11.2928932 L11.2928932,12.7071068 L7.99989322,9.41389322 L4.70710678,12.7071068 L3.29289322,11.2928932 L6.58589322,7.99989322 L3.29289322,4.70710678 L4.70710678,3.29289322 L7.99989322,6.58589322 L11.2928932,3.29289322 Z",className:"jsx-2898942518"}),pe.createElement(_t,{id:"2898942518"},["svg.jsx-2898942518{fill:inherit;height:16px;width:16px;vertical-align:middle;pointer-events:none;}"]))}SS.propTypes={className:ne.string};const oy=["span.jsx-2824632002{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;width:20px;margin-inline-end:4px;border-radius:12px;margin-inline-start:-8px;}",`span.jsx-2824632002:hover{background:${je.grey400};}`];oy.__hash="2824632002";const C2={styles:pe.createElement(_t,{id:"2658726446"},[`svg.jsx-2658726446{fill:${je.grey600};height:16px;width:16px;cursor:pointer;opacity:1;pointer-events:all;}`]),className:"jsx-2658726446"},ES=i=>{let{onRemove:e,dataTest:t}=i;return e?pe.createElement("span",{onClick:n=>{n.stopPropagation(),e({},n)},"data-test":t,className:`jsx-${oy.__hash}`},pe.createElement(SS,{className:C2.className}),C2.styles,pe.createElement(_t,{id:oy.__hash},oy)):null};ES.propTypes={dataTest:ne.string.isRequired,onRemove:ne.func};const oh="4",kS=i=>{var e,t,n,s;let{selected:l,dense:u,disabled:r,dragging:p,overflow:f,className:m,children:v,onRemove:y,onClick:_,icon:b,dataTest:C="dhis2-uicore-chip",marginBottom:E=4,marginLeft:S,marginRight:x,marginTop:A=4,marginInlineStart:D,marginInlineEnd:T}=i;return pe.createElement("span",{onClick:k=>{!r&&_&&_({},k)},"data-test":C,className:_t.dynamic([["3780556490",[je.grey200,je.grey900,je.grey300,Jt.secondary600,je.white]],["1687525377",[E&&`margin-bottom: ${E}px;`,(e=D??S)!==null&&e!==void 0?e:oh,(t=T??x)!==null&&t!==void 0?t:oh,A&&`margin-top: ${A}px`]]])+" "+(vn(m,{selected:l,dense:u,disabled:r,dragging:p})||"")},pe.createElement(TS,{icon:b,dataTest:`${C}-icon`}),pe.createElement(CS,{overflow:f},v),pe.createElement(ES,{onRemove:y,dataTest:`${C}-remove`}),pe.createElement(_t,{id:"3780556490",dynamic:[je.grey200,je.grey900,je.grey300,Jt.secondary600,je.white]},[`span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;border-radius:16px;background-color:${je.grey200};font-size:14px;line-height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:${je.grey900};}`,".dense.__jsx-style-dynamic-selector{height:24px;font-size:13px;line-height:15px;}",`span.__jsx-style-dynamic-selector:hover{background-color:${je.grey300};}`,`.selected.__jsx-style-dynamic-selector{background-color:${Jt.secondary600};font-weight:500;}`,".selected.__jsx-style-dynamic-selector:hover{background-color:#00695c;}",`.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{color:${je.white};}`,".disabled.__jsx-style-dynamic-selector{cursor:not-allowed;opacity:0.3;}",".disabled.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{pointer-events:none;}",".dragging.__jsx-style-dynamic-selector{box-shadow:0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);}"]),pe.createElement(_t,{id:"1687525377",dynamic:[E&&`margin-bottom: ${E}px;`,(e=D??S)!==null&&e!==void 0?e:oh,(t=T??x)!==null&&t!==void 0?t:oh,A&&`margin-top: ${A}px`]},[`span.__jsx-style-dynamic-selector{${E&&`margin-bottom: ${E}px;`} margin-inline-start:${(n=D??S)!==null&&n!==void 0?n:oh}px;margin-inline-end:${(s=T??x)!==null&&s!==void 0?s:oh}px;${A&&`margin-top: ${A}px`};}`]))};kS.propTypes={children:ne.any,className:ne.string,dataTest:ne.string,dense:ne.bool,disabled:ne.bool,dragging:ne.bool,icon:ne.element,marginBottom:ne.number,marginInlineEnd:ne.number,marginInlineStart:ne.number,marginLeft:ne.number,marginRight:ne.number,marginTop:ne.number,overflow:ne.bool,selected:ne.bool,onClick:ne.func,onRemove:ne.func};const RI="",LI={Clear:RI,"No data found":"   ","Type to filter options":"  ","Loading options":" ","No options found":"    "},NI="",zI={Clear:NI,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},jI="",OI={Clear:jI,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},FI="Vyistit",BI={Clear:FI,"No data found":"Nenalezena dn data","Type to filter options":"Zadnm filtrujete monosti","Loading options":"Monosti natn","No options found":"Nenalezeny dn monosti"},$I="Clear",UI={Clear:$I,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},VI="",GI={Clear:VI,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},HI="Limpiar",qI={Clear:HI,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opcin"},WI="Limpiar",YI={Clear:WI,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},ZI="Effacer",XI={Clear:ZI,"No data found":"Aucune valeur trouve","Type to filter options":"","Loading options":"Chargement des options","No options found":""},KI="Hapus",QI={Clear:KI,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},JI="",e5={Clear:JI,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},t5="",i5={Clear:t5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},n5="",r5={Clear:n5,"No data found":"data ","Type to filter options":"","Loading options":"","No options found":""},s5="Fjern",a5={Clear:s5,"No data found":"Ingen data funnet","Type to filter options":"Skriv for  filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},o5="Duidelijk",l5={Clear:o5,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},c5=" ",u5={Clear:c5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},d5="  ",h5={Clear:d5,"No data found":"      ","Type to filter options":"","Loading options":"","No options found":""},p5="Limpar",f5={Clear:p5,"No data found":"Dado no encontrado","Type to filter options":"Tipo de opes de filtros","Loading options":"","No options found":""},m5="Limpar",g5={Clear:m5,"No data found":"Dado no encontrado","Type to filter options":"","Loading options":"","No options found":""},y5="",x5={Clear:y5,"No data found":"  ","Type to filter options":"    ","Loading options":" ","No options found":"  "},v5="Klar",b5={Clear:v5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},_5="Hams",w5={Clear:_5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},C5=" ",T5={Clear:C5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},S5="",E5={Clear:S5,"No data found":"  ","Type to filter options":"  ","Loading options":" ","No options found":"  "},k5="",A5={Clear:k5,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},M5="",P5={Clear:M5,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},I5="",D5={Clear:I5,"No data found":" ","Type to filter options":"","Loading options":" ","No options found":""},R5="",L5={Clear:R5,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},N5="Xa",z5={Clear:N5,"No data found":"Khng tm thy d liu","Type to filter options":"Nhp  lc ty chn","Loading options":"","No options found":""},j5="",O5={Clear:j5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},F5="",B5={Clear:F5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},Xn="default";Oe.addResources("ar",Xn,LI);Oe.addResources("ar_IQ",Xn,zI);Oe.addResources("ckb",Xn,OI);Oe.addResources("cs",Xn,BI);Oe.addResources("da",Xn,UI);Oe.addResources("en",Xn,GI);Oe.addResources("es",Xn,qI);Oe.addResources("es_419",Xn,YI);Oe.addResources("fr",Xn,XI);Oe.addResources("id",Xn,QI);Oe.addResources("km",Xn,e5);Oe.addResources("lo",Xn,i5);Oe.addResources("my",Xn,r5);Oe.addResources("nb",Xn,a5);Oe.addResources("nl",Xn,l5);Oe.addResources("prs",Xn,u5);Oe.addResources("ps",Xn,h5);Oe.addResources("pt",Xn,f5);Oe.addResources("pt_BR",Xn,g5);Oe.addResources("ru",Xn,x5);Oe.addResources("sv",Xn,b5);Oe.addResources("tet",Xn,w5);Oe.addResources("tg",Xn,T5);Oe.addResources("uk",Xn,E5);Oe.addResources("ur",Xn,A5);Oe.addResources("uz_Latn",Xn,P5);Oe.addResources("uz_UZ_Cyrl",Xn,D5);Oe.addResources("uz_UZ_Latn",Xn,L5);Oe.addResources("vi",Xn,z5);Oe.addResources("zh",Xn,O5);Oe.addResources("zh_CN",Xn,B5);const $5=(i,e)=>{e.stopPropagation(),e.preventDefault()},M1=i=>{let{options:e,onChange:t,selected:n,empty:s="",handleFocusInput:l,handleClose:u,dataTest:r}=i;const p=yS(e);if(pe.Children.count(p)===0)return typeof s=="string"?pe.createElement(vS,{message:s,dataTest:`${r}-empty`}):s;const f=pe.Children.map(e,m=>{if(!gS(m))return m;const{value:y,disabled:_}=m.props,b=y===n,C=(S,x)=>{const A={selected:y};x.stopPropagation(),t(A,x),u(),l()},E=b||_;return pe.cloneElement(m,{...m.props,onClick:E?$5:C,active:b})});return pe.createElement(pe.Fragment,null,f)};M1.propTypes={dataTest:ne.string.isRequired,empty:ne.node,handleClose:ne.func,handleFocusInput:ne.func,options:ne.node,selected:ne.string,onChange:ne.func};const AS=i=>{let{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f}=i;return pe.createElement(xS,{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f,Menu:M1})};AS.propTypes={dataTest:ne.string.isRequired,noMatchText:ne.string.isRequired,empty:ne.node,handleClose:ne.func,handleFocusInput:ne.func,options:ne.node,placeholder:ne.string,selected:ne.string,onChange:ne.func};const MS=i=>{let{options:e,selected:t,className:n}=i;const s=EI(t,e);if(!s){const r=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(r)}const l=s&&s.props.icon,u=s?s.props.label:t;return pe.createElement("div",{className:_t.dynamic([["1914911415",[Ut.dp8,Ut.dp16,Ut.dp16]]])+" "+(vn(n,"root")||"")},l&&pe.createElement("div",{className:_t.dynamic([["1914911415",[Ut.dp8,Ut.dp16,Ut.dp16]]])+" root-icon"},l),u,pe.createElement(_t,{id:"1914911415",dynamic:[Ut.dp8,Ut.dp16,Ut.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Ut.dp8};width:${Ut.dp16};height:${Ut.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};MS.propTypes={className:ne.string,options:ne.node,selected:ne.string};const PS=i=>{let{selected:e,onChange:t,clearable:n,clearText:s,placeholder:l,dataTest:u,prefix:r,options:p,className:f,disabled:m,inputMaxHeight:v="100px"}=i;const y=e&&typeof e=="string",_=b=>{const C={selected:""};b.stopPropagation(),t(C,b)};return pe.createElement("div",{className:_t.dynamic([["2186325794",[je.grey900]],["1331770409",[v]]])+" "+(vn("root",f)||"")},pe.createElement(wS,{prefix:r,dataTest:`${u}-prefix`}),!y&&!r&&pe.createElement(_S,{placeholder:l,dataTest:`${u}-placeholder`}),y&&pe.createElement("div",{className:_t.dynamic([["2186325794",[je.grey900]],["1331770409",[v]]])+" root-input"},pe.createElement(MS,{selected:e,options:p})),y&&n&&!m&&pe.createElement("div",{className:_t.dynamic([["2186325794",[je.grey900]],["1331770409",[v]]])+" root-right"},pe.createElement(bS,{onClear:_,clearText:s,dataTest:`${u}-clear`})),pe.createElement(_t,{id:"2186325794",dynamic:[je.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${je.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),pe.createElement(_t,{id:"1331770409",dynamic:[v]},[`.root-input.__jsx-style-dynamic-selector{max-height:${v};}`]))};PS.propTypes={dataTest:ne.string.isRequired,className:ne.string,clearText:Qr(i=>i.clearable,ne.string),clearable:ne.bool,disabled:ne.bool,inputMaxHeight:ne.string,options:ne.node,placeholder:ne.string,prefix:ne.string,selected:ne.string,onChange:ne.func};const Hl=i=>{let{className:e,selected:t="",tabIndex:n,maxHeight:s,inputMaxHeight:l,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,loading:m,error:v,warning:y,valid:_,disabled:b,children:C,clearable:E,clearText:S,filterable:x,filterPlaceholder:A,placeholder:D,prefix:T,empty:k,loadingText:N,noMatchText:W,initialFocus:Z,dense:K,dataTest:j="dhis2-uicore-singleselect"}=i;const V=x?pe.createElement(AS,{dataTest:j,empty:k,noMatchText:W,placeholder:A}):pe.createElement(M1,{empty:k,dataTest:j});return pe.createElement("div",{"data-test":j,className:_t.dynamic([["2180377457",[Ut.dp8]]])+" root"},pe.createElement("div",{className:_t.dynamic([["2180377457",[Ut.dp8]]])+" root-input"},pe.createElement(A1,{className:e,selected:t,input:pe.createElement(PS,{clearable:E,clearText:S,dataTest:j,placeholder:D,prefix:T,inputMaxHeight:l}),menu:V,tabIndex:n,maxHeight:s,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,error:v,warning:y,valid:_,disabled:b,initialFocus:Z,dense:K},C,m&&pe.createElement(fS,{message:N,dataTest:`${j}-loading`}))),pe.createElement(QP,{error:v,valid:_,warning:y}),pe.createElement(_t,{id:"2180377457",dynamic:[Ut.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Ut.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};Hl.propTypes={children:ne.node,className:ne.string,clearText:Qr(i=>i.clearable,ne.string),clearable:ne.bool,dataTest:ne.string,dense:ne.bool,disabled:ne.bool,empty:ne.node,error:ba,filterPlaceholder:ne.string,filterable:ne.bool,initialFocus:ne.bool,inputMaxHeight:ne.string,loading:ne.bool,loadingText:ne.string,maxHeight:ne.string,noMatchText:Qr(i=>i.filterable,ne.string),placeholder:ne.string,prefix:ne.string,selected:ne.string,tabIndex:ne.string,valid:ba,warning:ba,onBlur:ne.func,onChange:ne.func,onFocus:ne.func,onKeyDown:ne.func};function U5(i,e,t){return(e=V5(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function V5(i){var e=G5(i,"string");return typeof e=="symbol"?e:e+""}function G5(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const af=(i,e)=>typeof i=="function"?i(e):i;class gs extends pe.Component{render(){const{className:e,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,required:u,label:r,valid:p,error:f,warning:m,disabled:v,loading:y,selected:_=gs.defaultProps.selected,tabIndex:b,helpText:C,validationText:E,maxHeight:S,inputMaxHeight:x,inputWidth:A,children:D,clearable:T,clearText:k=gs.defaultProps.clearText,filterable:N,filterPlaceholder:W=gs.defaultProps.filterPlaceholder,placeholder:Z,prefix:K,empty:j=gs.defaultProps.empty,loadingText:V=gs.defaultProps.loadingText,noMatchText:$=gs.defaultProps.noMatchText,initialFocus:L,dense:R,dataTest:G=gs.defaultProps.dataTest}=this.props;return pe.createElement(JP,{className:e,dataTest:G,disabled:v,required:u,label:r,helpText:C,validationText:E,error:f,warning:m,valid:p},pe.createElement(ay,{width:A,minWidth:"100px"},pe.createElement(Hl,{selected:_,tabIndex:b,maxHeight:S,inputMaxHeight:x,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,loading:y,error:f,warning:m,valid:p,disabled:v,clearable:T,clearText:af(k),filterable:N,filterPlaceholder:af(W),placeholder:Z,prefix:K,empty:af(j),loadingText:af(V),noMatchText:af($),initialFocus:L,dense:R},D)))}}U5(gs,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>Oe.t("Clear"),empty:()=>Oe.t("No data found"),filterPlaceholder:()=>Oe.t("Type to filter options"),loadingText:()=>Oe.t("Loading options"),noMatchText:()=>Oe.t("No options found")});gs.propTypes={children:ne.node,className:ne.string,clearText:ne.oneOfType([ne.string,ne.func]),clearable:ne.bool,dataTest:ne.string,dense:ne.bool,disabled:ne.bool,empty:ne.oneOfType([ne.node,ne.func]),error:ba,filterPlaceholder:ne.oneOfType([ne.node,ne.func]),filterable:ne.bool,helpText:ne.string,initialFocus:ne.bool,inputMaxHeight:ne.string,inputWidth:ne.string,label:ne.string,loading:ne.bool,loadingText:ne.oneOfType([ne.string,ne.func]),maxHeight:ne.string,noMatchText:ne.oneOfType([ne.string,ne.func]),placeholder:ne.string,prefix:ne.string,required:ne.bool,selected:ne.string,tabIndex:ne.string,valid:ba,validationText:ne.string,warning:ba,onBlur:ne.func,onChange:ne.func,onFocus:ne.func,onKeyDown:ne.func};const Ca=i=>{let{label:e,active:t,disabled:n,onClick:s,className:l,dataTest:u="dhis2-uicore-singleselectoption",value:r}=i;return pe.createElement("div",{onClick:p=>s({},p),"data-test":u,"data-value":r,"data-label":e,className:_t.dynamic([["3808134379",[je.grey900,Ut.dp8,Ut.dp12,je.grey200,je.teal700,je.white,je.grey500]]])+" "+(vn(l,{disabled:n,active:t})||"")},e,pe.createElement(_t,{id:"3808134379",dynamic:[je.grey900,Ut.dp8,Ut.dp12,je.grey200,je.teal700,je.white,je.grey500]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${je.grey900};padding-block:${Ut.dp8};padding-inline:${Ut.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${je.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${je.teal700};color:${je.white};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${je.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};Ca.propTypes={label:ne.string.isRequired,value:ne.string.isRequired,active:ne.bool,className:ne.string,dataTest:ne.string,disabled:ne.bool,onClick:ne.func};class he extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,he.prototype),e>he.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,n=Number.isFinite;if(typeof e=="number"){if(e===0)return he.__zero();if(he.__isOneDigitInt(e))return 0>e?he.__oneDigit(-e,!0):he.__oneDigit(e,!1);if(!n(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return he.__fromDouble(e)}if(typeof e=="string"){const s=he.__fromString(e);if(s===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return s}if(typeof e=="boolean")return e===!0?he.__oneDigit(1,!1):he.__zero();if(typeof e=="object"){if(e.constructor===he)return e;const s=he.__toPrimitive(e);return he.BigInt(s)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?he.__toStringGeneric(this,e,!1):he.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const E=e.__unsignedDigit(0);return e.sign?-E:E}const n=e.__digit(t-1),s=he.__clz30(n),l=30*t-s;if(1024<l)return e.sign?-1/0:1/0;let u=l-1,r=n,p=t-1;const f=s+3;let m=f===32?0:r<<f;m>>>=12;const v=f-12;let y=12<=f?0:r<<20+f,_=20+f;for(0<v&&0<p&&(p--,r=e.__digit(p),m|=r>>>30-v,y=r<<v+2,_=v+2);0<_&&0<p;)p--,r=e.__digit(p),y|=30<=_?r<<_-30:r>>>30-_,_-=30;const b=he.__decideRounding(e,_,p,r);if((b===1||b===0&&(1&y)==1)&&(y=y+1>>>0,y===0&&(m++,m>>>20!=0&&(m=0,u++,1023<u))))return e.sign?-1/0:1/0;const C=e.sign?-2147483648:0;return u=u+1023<<20,he.__kBitConversionInts[1]=C|u|m,he.__kBitConversionInts[0]=y,he.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?he.__absoluteSubOne(e).__trim():he.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return he.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?he.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let n=t.__unsignedDigit(0);if(n===1)return e;if(n>=he.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const u=1+(0|n/30),r=e.sign&&(1&n)!=0,p=new he(u,r);p.__initializeDigits();const f=1<<n%30;return p.__setDigit(u-1,f),p}let s=null,l=e;for(1&n&&(s=e),n>>=1;n!==0;n>>=1)l=he.multiply(l,l),1&n&&(s===null?s=l:s=he.multiply(s,l));return s}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let n=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&n--;const s=new he(n,e.sign!==t.sign);s.__initializeDigits();for(let l=0;l<e.length;l++)he.__multiplyAccumulate(t,e.__digit(l),s,l);return s.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return he.__zero();const n=e.sign!==t.sign,s=t.__unsignedDigit(0);let l;if(t.length===1&&32767>=s){if(s===1)return n===e.sign?e:he.unaryMinus(e);l=he.__absoluteDivSmall(e,s,null)}else l=he.__absoluteDivLarge(e,t,!0,!1);return l.sign=n,l.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return e;const n=t.__unsignedDigit(0);if(t.length===1&&32767>=n){if(n===1)return he.__zero();const l=he.__absoluteModSmall(e,n);return l===0?he.__zero():he.__oneDigit(l,e.sign)}const s=he.__absoluteDivLarge(e,t,!1,!0);return s.sign=e.sign,s.__trim()}static add(e,t){const n=e.sign;return n===t.sign?he.__absoluteAdd(e,t,n):0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,n):he.__absoluteSub(t,e,!n)}static subtract(e,t){const n=e.sign;return n===t.sign?0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,n):he.__absoluteSub(t,e,!n):he.__absoluteAdd(e,t,n)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__rightShiftByAbsolute(e,t):he.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__leftShiftByAbsolute(e,t):he.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>he.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=he.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<he.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=he.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}static notEqual(e,t){return!he.equal(e,t)}static bitwiseAnd(e,t){var n=Math.max;if(!e.sign&&!t.sign)return he.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const s=n(e.length,t.length)+1;let l=he.__absoluteSubOne(e,s);const u=he.__absoluteSubOne(t);return l=he.__absoluteOr(l,u,l),he.__absoluteAddOne(l,!0,l).__trim()}return e.sign&&([e,t]=[t,e]),he.__absoluteAndNot(e,he.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var n=Math.max;if(!e.sign&&!t.sign)return he.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const u=n(e.length,t.length),r=he.__absoluteSubOne(e,u),p=he.__absoluteSubOne(t);return he.__absoluteXor(r,p,r).__trim()}const s=n(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let l=he.__absoluteSubOne(t,s);return l=he.__absoluteXor(l,e,l),he.__absoluteAddOne(l,!0,l).__trim()}static bitwiseOr(e,t){var n=Math.max;const s=n(e.length,t.length);if(!e.sign&&!t.sign)return he.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let u=he.__absoluteSubOne(e,s);const r=he.__absoluteSubOne(t);return u=he.__absoluteAnd(u,r,u),he.__absoluteAddOne(u,!0,u).__trim()}e.sign&&([e,t]=[t,e]);let l=he.__absoluteSubOne(t,s);return l=he.__absoluteAndNot(l,e,l),he.__absoluteAddOne(l,!0,l).__trim()}static asIntN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(e>=he.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=t.__unsignedDigit(s-1),u=1<<(e-1)%30;if(t.length===s&&l<u)return t;if((l&u)!==u)return he.__truncateToNBits(e,t);if(!t.sign)return he.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(l&u-1)){for(let r=s-2;0<=r;r--)if(t.__digit(r)!==0)return he.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===s&&l===u?t:he.__truncateToNBits(e,t)}return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(t.sign){if(e>he.__kMaxLengthBits)throw new RangeError("BigInt too big");return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=he.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=e%30;return t.length==s&&(l===0||!(t.__digit(s-1)>>>l))?t:he.__truncateToNBits(e,t)}static ADD(e,t){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)&&he.__isBigInt(t))return he.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return he.__compare(e,t,0)}static LE(e,t){return he.__compare(e,t,1)}static GT(e,t){return he.__compare(e,t,2)}static GE(e,t){return he.__compare(e,t,3)}static EQ(e,t){for(;;){if(he.__isBigInt(e))return he.__isBigInt(t)?he.equal(e,t):he.EQ(t,e);if(typeof e=="number"){if(he.__isBigInt(t))return he.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="string"){if(he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.equal(e,t);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="boolean"){if(he.__isBigInt(t))return he.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="symbol"){if(he.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==he)return e==t;e=he.__toPrimitive(e)}else return e==t}}static NE(e,t){return!he.EQ(e,t)}static DataViewGetBigInt64(e,t,n=!1){return he.asIntN(64,he.DataViewGetBigUint64(e,t,n))}static DataViewGetBigUint64(e,t,n=!1){const[s,l]=n?[4,0]:[0,4],u=e.getUint32(t+s,n),r=e.getUint32(t+l,n),p=new he(3,!1);return p.__setDigit(0,1073741823&r),p.__setDigit(1,(268435455&u)<<2|r>>>30),p.__setDigit(2,u>>>28),p.__trim()}static DataViewSetBigInt64(e,t,n,s=!1){he.DataViewSetBigUint64(e,t,n,s)}static DataViewSetBigUint64(e,t,n,s=!1){n=he.asUintN(64,n);let l=0,u=0;if(0<n.length&&(u=n.__digit(0),1<n.length)){const f=n.__digit(1);u|=f<<30,l=f>>>2,2<n.length&&(l|=n.__digit(2)<<28)}const[r,p]=s?[4,0]:[0,4];e.setUint32(t+r,l,s),e.setUint32(t+p,u,s)}static __zero(){return new he(0,!1)}static __oneDigit(e,t){const n=new he(1,t);return n.__setDigit(0,e),n}__copy(){const e=new he(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,n,s){if(0<t)return-1;let l;if(0>t)l=-t-1;else{if(n===0)return-1;n--,s=e.__digit(n),l=29}let u=1<<l;if(!(s&u))return-1;if(u-=1,(s&u)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}static __fromDouble(e){he.__kBitConversionDouble[0]=e;const t=2047&he.__kBitConversionInts[1]>>>20,n=t-1023,s=(0|n/30)+1,l=new he(s,0>e);let u=1048575&he.__kBitConversionInts[1]|1048576,r=he.__kBitConversionInts[0];const p=20,f=n%30;let m,v=0;if(f<20){const y=p-f;v=y+32,m=u>>>y,u=u<<32-y|r>>>y,r<<=32-y}else if(f===20)v=32,m=u,u=r,r=0;else{const y=f-p;v=32-y,m=u<<y|r>>>32-y,u=r<<y,r=0}l.__setDigit(s-1,m);for(let y=s-2;0<=y;y--)0<v?(v-=30,m=u>>>2,u=u<<30|r>>>2,r<<=30):m=0,l.__setDigit(y,m);return l.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let n=0;const s=e.length;let l=0;if(l===s)return he.__zero();let u=e.charCodeAt(l);for(;he.__isWhitespace(u);){if(++l===s)return he.__zero();u=e.charCodeAt(l)}if(u===43){if(++l===s)return null;u=e.charCodeAt(l),n=1}else if(u===45){if(++l===s)return null;u=e.charCodeAt(l),n=-1}if(t===0){if(t=10,u===48){if(++l===s)return he.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(t=16,++l===s)return null;u=e.charCodeAt(l)}else if(u===79||u===111){if(t=8,++l===s)return null;u=e.charCodeAt(l)}else if(u===66||u===98){if(t=2,++l===s)return null;u=e.charCodeAt(l)}}}else if(t===16&&u===48){if(++l===s)return he.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(++l===s)return null;u=e.charCodeAt(l)}}if(n!=0&&t!==10)return null;for(;u===48;){if(++l===s)return he.__zero();u=e.charCodeAt(l)}const r=s-l;let p=he.__kMaxBitsPerChar[t],f=he.__kBitsPerCharTableMultiplier-1;if(r>1073741824/p)return null;const m=p*r+f>>>he.__kBitsPerCharTableShift,v=new he(0|(m+29)/30,!1),y=10>t?t:10,_=10<t?t-10:0;if(t&t-1){v.__initializeDigits();let b=!1,C=0;do{let E=0,S=1;for(;;){let A;if(u-48>>>0<y)A=u-48;else if((32|u)-97>>>0<_)A=(32|u)-87;else{b=!0;break}const D=S*t;if(1073741823<D)break;if(S=D,E=E*t+A,C++,++l===s){b=!0;break}u=e.charCodeAt(l)}f=30*he.__kBitsPerCharTableMultiplier-1;const x=0|(p*C+f>>>he.__kBitsPerCharTableShift)/30;v.__inplaceMultiplyAdd(S,E,x)}while(!b)}else{p>>=he.__kBitsPerCharTableShift;const b=[],C=[];let E=!1;do{let S=0,x=0;for(;;){let A;if(u-48>>>0<y)A=u-48;else if((32|u)-97>>>0<_)A=(32|u)-87;else{E=!0;break}if(x+=p,S=S<<p|A,++l===s){E=!0;break}if(u=e.charCodeAt(l),30<x+p)break}b.push(S),C.push(x)}while(!E);he.__fillFromParts(v,b,C)}if(l!==s){if(!he.__isWhitespace(u))return null;for(l++;l<s;l++)if(u=e.charCodeAt(l),!he.__isWhitespace(u))return null}return v.sign=n==-1,v.__trim()}static __fillFromParts(e,t,n){let s=0,l=0,u=0;for(let r=t.length-1;0<=r;r--){const p=t[r],f=n[r];l|=p<<u,u+=f,u===30?(e.__setDigit(s++,l),u=0,l=0):30<u&&(e.__setDigit(s++,1073741823&l),u-=30,l=p>>>f-u)}if(l!==0){if(s>=e.length)throw new Error("implementation bug");e.__setDigit(s++,l)}for(;s<e.length;s++)e.__setDigit(s,0)}static __toStringBasePowerOfTwo(e,t){const n=e.length;let s=t-1;s=(85&s>>>1)+(85&s),s=(51&s>>>2)+(51&s),s=(15&s>>>4)+(15&s);const l=s,u=t-1,r=e.__digit(n-1),p=he.__clz30(r);let f=0|(30*n-p+l-1)/l;if(e.sign&&f++,268435456<f)throw new Error("string too long");const m=Array(f);let v=f-1,y=0,_=0;for(let C=0;C<n-1;C++){const E=e.__digit(C),S=(y|E<<_)&u;m[v--]=he.__kConversionChars[S];const x=l-_;for(y=E>>>x,_=30-x;_>=l;)m[v--]=he.__kConversionChars[y&u],y>>>=l,_-=l}const b=(y|r<<_)&u;for(m[v--]=he.__kConversionChars[b],y=r>>>l-_;y!==0;)m[v--]=he.__kConversionChars[y&u],y>>>=l;if(e.sign&&(m[v--]="-"),v!=-1)throw new Error("implementation bug");return m.join("")}static __toStringGeneric(e,t,n){const s=e.length;if(s===0)return"";if(s===1){let C=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(C="-"+C),C}const l=30*s-he.__clz30(e.__digit(s-1)),u=he.__kMaxBitsPerChar[t],r=u-1;let p=l*he.__kBitsPerCharTableMultiplier;p+=r-1,p=0|p/r;const f=p+1>>1,m=he.exponentiate(he.__oneDigit(t,!1),he.__oneDigit(f,!1));let v,y;const _=m.__unsignedDigit(0);if(m.length===1&&32767>=_){v=new he(e.length,!1),v.__initializeDigits();let C=0;for(let E=2*e.length-1;0<=E;E--){const S=C<<15|e.__halfDigit(E);v.__setHalfDigit(E,0|S/_),C=0|S%_}y=C.toString(t)}else{const C=he.__absoluteDivLarge(e,m,!0,!0);v=C.quotient;const E=C.remainder.__trim();y=he.__toStringGeneric(E,t,!0)}v.__trim();let b=he.__toStringGeneric(v,t,!0);for(;y.length<f;)y="0"+y;return n===!1&&e.sign&&(b="-"+b),b+y}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const n=e.sign;if(n!==t.sign)return he.__unequalSign(n);const s=he.__absoluteCompare(e,t);return 0<s?he.__absoluteGreater(n):0>s?he.__absoluteLess(n):0}static __compareToNumber(e,t){if(he.__isOneDigitInt(t)){const n=e.sign,s=0>t;if(n!==s)return he.__unequalSign(n);if(e.length===0){if(s)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return he.__absoluteGreater(n);const l=Math.abs(t),u=e.__unsignedDigit(0);return u>l?he.__absoluteGreater(n):u<l?he.__absoluteLess(n):0}return he.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const n=e.sign;if(n!==0>t)return he.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;he.__kBitConversionDouble[0]=t;const s=2047&he.__kBitConversionInts[1]>>>20;if(s==2047)throw new Error("implementation bug: handled elsewhere");const l=s-1023;if(0>l)return he.__absoluteGreater(n);const u=e.length;let r=e.__digit(u-1);const p=he.__clz30(r),f=30*u-p,m=l+1;if(f<m)return he.__absoluteLess(n);if(f>m)return he.__absoluteGreater(n);let v=1048576|1048575&he.__kBitConversionInts[1],y=he.__kBitConversionInts[0];const _=20,b=29-p;if(b!==(0|(f-1)%30))throw new Error("implementation bug");let C,E=0;if(20>b){const S=_-b;E=S+32,C=v>>>S,v=v<<32-S|y>>>S,y<<=32-S}else if(b===20)E=32,C=v,v=y,y=0;else{const S=b-_;E=32-S,C=v<<S|y>>>32-S,v=y<<S,y=0}if(r>>>=0,C>>>=0,r>C)return he.__absoluteGreater(n);if(r<C)return he.__absoluteLess(n);for(let S=u-2;0<=S;S--){0<E?(E-=30,C=v>>>2,v=v<<30|y>>>2,y<<=30):C=0;const x=e.__unsignedDigit(S);if(x>C)return he.__absoluteGreater(n);if(x<C)return he.__absoluteLess(n)}if(v!==0||y!==0){if(E===0)throw new Error("implementation bug");return he.__absoluteLess(n)}return 0}static __equalToNumber(e,t){var n=Math.abs;return he.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===n(t):he.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,n){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(he.__isBigInt(e)&&typeof t=="string")return t=he.__fromString(t),t!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),n);if(typeof e=="string"&&he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),n);if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)){if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return he.__comparisonResultToBool(he.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}__clzmsd(){return he.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,n){if(e.length<t.length)return he.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:he.unaryMinus(e);let s=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&s++;const l=new he(s,n);let u=0,r=0;for(;r<t.length;r++){const p=e.__digit(r)+t.__digit(r)+u;u=p>>>30,l.__setDigit(r,1073741823&p)}for(;r<e.length;r++){const p=e.__digit(r)+u;u=p>>>30,l.__setDigit(r,1073741823&p)}return r<l.length&&l.__setDigit(r,u),l.__trim()}static __absoluteSub(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:he.unaryMinus(e);const s=new he(e.length,n);let l=0,u=0;for(;u<t.length;u++){const r=e.__digit(u)-t.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}for(;u<e.length;u++){const r=e.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}return s.__trim()}static __absoluteAddOne(e,t,n=null){const s=e.length;n===null?n=new he(s,t):n.sign=t;let l=1;for(let u=0;u<s;u++){const r=e.__digit(u)+l;l=r>>>30,n.__setDigit(u,1073741823&r)}return l!=0&&n.__setDigitGrow(s,1),n}static __absoluteSubOne(e,t){const n=e.length;t=t||n;const s=new he(t,!1);let l=1;for(let u=0;u<n;u++){const r=e.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}if(l!=0)throw new Error("implementation bug");for(let u=n;u<t;u++)s.__setDigit(u,0);return s}static __absoluteAnd(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,m=s;e=t,s=l,t=f,l=m}let r=u;n===null?n=new he(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)&t.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteAndNot(e,t,n=null){const s=e.length,l=t.length;let u=l;s<l&&(u=s);let r=s;n===null?n=new he(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)&~t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteOr(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,m=s;e=t,s=l,t=f,l=m}let r=s;n===null?n=new he(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)|t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteXor(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,m=s;e=t,s=l,t=f,l=m}let r=s;n===null?n=new he(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)^t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteCompare(e,t){const n=e.length-t.length;if(n!=0)return n;let s=e.length-1;for(;0<=s&&e.__digit(s)===t.__digit(s);)s--;return 0>s?0:e.__unsignedDigit(s)>t.__unsignedDigit(s)?1:-1}static __multiplyAccumulate(e,t,n,s){if(t===0)return;const l=32767&t,u=t>>>15;let r=0,p=0;for(let f,m=0;m<e.length;m++,s++){f=n.__digit(s);const v=e.__digit(m),y=32767&v,_=v>>>15,b=he.__imul(y,l),C=he.__imul(y,u),E=he.__imul(_,l),S=he.__imul(_,u);f+=p+b+r,r=f>>>30,f&=1073741823,f+=((32767&C)<<15)+((32767&E)<<15),r+=f>>>30,p=S+(C>>>15)+(E>>>15),n.__setDigit(s,1073741823&f)}for(;r!=0||p!==0;s++){let f=n.__digit(s);f+=r+p,p=0,r=f>>>30,n.__setDigit(s,1073741823&f)}}static __internalMultiplyAdd(e,t,n,s,l){let u=n,r=0;for(let p=0;p<s;p++){const f=e.__digit(p),m=he.__imul(32767&f,t),v=he.__imul(f>>>15,t),y=m+((32767&v)<<15)+r+u;u=y>>>30,r=v>>>15,l.__setDigit(p,1073741823&y)}if(l.length>s)for(l.__setDigit(s++,u+r);s<l.length;)l.__setDigit(s++,0);else if(u+r!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,n){n>this.length&&(n=this.length);const s=32767&e,l=e>>>15;let u=0,r=t;for(let p=0;p<n;p++){const f=this.__digit(p),m=32767&f,v=f>>>15,y=he.__imul(m,s),_=he.__imul(m,l),b=he.__imul(v,s),C=he.__imul(v,l);let E=r+y+u;u=E>>>30,E&=1073741823,E+=((32767&_)<<15)+((32767&b)<<15),u+=E>>>30,r=C+(_>>>15)+(b>>>15),this.__setDigit(p,1073741823&E)}if(u!=0||r!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,n=null){n===null&&(n=new he(e.length,!1));let s=0;for(let l,u=2*e.length-1;0<=u;u-=2){l=(s<<15|e.__halfDigit(u))>>>0;const r=0|l/t;s=0|l%t,l=(s<<15|e.__halfDigit(u-1))>>>0;const p=0|l/t;s=0|l%t,n.__setDigit(u>>>1,r<<15|p)}return n}static __absoluteModSmall(e,t){let n=0;for(let s=2*e.length-1;0<=s;s--)n=0|((n<<15|e.__halfDigit(s))>>>0)%t;return n}static __absoluteDivLarge(e,t,n,s){const l=t.__halfDigitLength(),u=t.length,r=e.__halfDigitLength()-l;let p=null;n&&(p=new he(r+2>>>1,!1),p.__initializeDigits());const f=new he(l+2>>>1,!1);f.__initializeDigits();const m=he.__clz15(t.__halfDigit(l-1));0<m&&(t=he.__specialLeftShift(t,m,0));const v=he.__specialLeftShift(e,m,1),y=t.__halfDigit(l-1);let _=0;for(let b,C=r;0<=C;C--){b=32767;const E=v.__halfDigit(C+l);if(E!==y){const x=(E<<15|v.__halfDigit(C+l-1))>>>0;b=0|x/y;let A=0|x%y;const D=t.__halfDigit(l-2),T=v.__halfDigit(C+l-2);for(;he.__imul(b,D)>>>0>(A<<16|T)>>>0&&(b--,A+=y,!(32767<A)););}he.__internalMultiplyAdd(t,b,0,u,f);let S=v.__inplaceSub(f,C,l+1);S!==0&&(S=v.__inplaceAdd(t,C,l),v.__setHalfDigit(C+l,32767&v.__halfDigit(C+l)+S),b--),n&&(1&C?_=b<<15:p.__setDigit(C>>>1,_|b))}if(s)return v.__inplaceRightShift(m),n?{quotient:p,remainder:v}:v;if(n)return p;throw new Error("unreachable")}static __clz15(e){return he.__clz30(e)-15}__inplaceAdd(e,t,n){let s=0;for(let l=0;l<n;l++){const u=this.__halfDigit(t+l)+e.__halfDigit(l)+s;s=u>>>15,this.__setHalfDigit(t+l,32767&u)}return s}__inplaceSub(e,t,n){let s=0;if(1&t){t>>=1;let l=this.__digit(t),u=32767&l,r=0;for(;r<n-1>>>1;r++){const m=e.__digit(r),v=(l>>>15)-(32767&m)-s;s=1&v>>>15,this.__setDigit(t+r,(32767&v)<<15|32767&u),l=this.__digit(t+r+1),u=(32767&l)-(m>>>15)-s,s=1&u>>>15}const p=e.__digit(r),f=(l>>>15)-(32767&p)-s;if(s=1&f>>>15,this.__setDigit(t+r,(32767&f)<<15|32767&u),t+r+1>=this.length)throw new RangeError("out of bounds");!(1&n)&&(l=this.__digit(t+r+1),u=(32767&l)-(p>>>15)-s,s=1&u>>>15,this.__setDigit(t+e.length,1073709056&l|32767&u))}else{t>>=1;let l=0;for(;l<e.length-1;l++){const m=this.__digit(t+l),v=e.__digit(l),y=(32767&m)-(32767&v)-s;s=1&y>>>15;const _=(m>>>15)-(v>>>15)-s;s=1&_>>>15,this.__setDigit(t+l,(32767&_)<<15|32767&y)}const u=this.__digit(t+l),r=e.__digit(l),p=(32767&u)-(32767&r)-s;s=1&p>>>15;let f=0;!(1&n)&&(f=(u>>>15)-(r>>>15)-s,s=1&f>>>15),this.__setDigit(t+l,(32767&f)<<15|32767&p)}return s}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const n=this.length-1;for(let s=0;s<n;s++){const l=this.__digit(s+1);this.__setDigit(s,1073741823&l<<30-e|t),t=l>>>e}this.__setDigit(n,t)}static __specialLeftShift(e,t,n){const s=e.length,l=new he(s+n,!1);if(t===0){for(let r=0;r<s;r++)l.__setDigit(r,e.__digit(r));return 0<n&&l.__setDigit(s,0),l}let u=0;for(let r=0;r<s;r++){const p=e.__digit(r);l.__setDigit(r,1073741823&p<<t|u),u=p>>>30-t}return 0<n&&l.__setDigit(s,u),l}static __leftShiftByAbsolute(e,t){const n=he.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");const s=0|n/30,l=n%30,u=e.length,r=l!==0&&e.__digit(u-1)>>>30-l!=0,p=u+s+(r?1:0),f=new he(p,e.sign);if(l===0){let m=0;for(;m<s;m++)f.__setDigit(m,0);for(;m<p;m++)f.__setDigit(m,e.__digit(m-s))}else{let m=0;for(let v=0;v<s;v++)f.__setDigit(v,0);for(let v=0;v<u;v++){const y=e.__digit(v);f.__setDigit(v+s,1073741823&y<<l|m),m=y>>>30-l}if(r)f.__setDigit(u+s,m);else if(m!==0)throw new Error("implementation bug")}return f.__trim()}static __rightShiftByAbsolute(e,t){const n=e.length,s=e.sign,l=he.__toShiftAmount(t);if(0>l)return he.__rightShiftByMaximum(s);const u=0|l/30,r=l%30;let p=n-u;if(0>=p)return he.__rightShiftByMaximum(s);let f=!1;if(s){if(e.__digit(u)&(1<<r)-1)f=!0;else for(let v=0;v<u;v++)if(e.__digit(v)!==0){f=!0;break}}f&&r===0&&!~e.__digit(n-1)&&p++;let m=new he(p,s);if(r===0){m.__setDigit(p-1,0);for(let v=u;v<n;v++)m.__setDigit(v-u,e.__digit(v))}else{let v=e.__digit(u)>>>r;const y=n-u-1;for(let _=0;_<y;_++){const b=e.__digit(_+u+1);m.__setDigit(_,1073741823&b<<30-r|v),v=b>>>r}m.__setDigit(y,v)}return f&&(m=he.__absoluteAddOne(m,!0,m)),m.__trim()}static __rightShiftByMaximum(e){return e?he.__oneDigit(1,!0):he.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>he.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===he)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const l=e[Symbol.toPrimitive];if(l){const u=l(t);if(typeof u!="object")return u;throw new TypeError("Cannot convert object to primitive value")}}const n=e.valueOf;if(n){const l=n.call(e);if(typeof l!="object")return l}const s=e.toString;if(s){const l=s.call(e);if(typeof l!="object")return l}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return he.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===he}static __truncateToNBits(e,t){const n=0|(e+29)/30,s=new he(n,t.sign),l=n-1;for(let r=0;r<l;r++)s.__setDigit(r,t.__digit(r));let u=t.__digit(l);if(e%30!=0){const r=32-e%30;u=u<<r>>>r}return s.__setDigit(l,u),s.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,n){var s=Math.min;const l=0|(e+29)/30,u=new he(l,n);let r=0;const p=l-1;let f=0;for(const _=s(p,t.length);r<_;r++){const b=0-t.__digit(r)-f;f=1&b>>>30,u.__setDigit(r,1073741823&b)}for(;r<p;r++)u.__setDigit(r,0|1073741823&-f);let m=p<t.length?t.__digit(p):0;const v=e%30;let y;if(v==0)y=0-m-f,y&=1073741823;else{const _=32-v;m=m<<_>>>_;const b=1<<32-_;y=b-m-f,y&=b-1}return u.__setDigit(p,y),u.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const n=e>>>1,s=this.__digit(n),l=1&e?32767&s|t<<15:1073709056&s|32767&t;this.__setDigit(n,l)}static __digitPow(e,t){let n=1;for(;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}static __isOneDigitInt(e){return(1073741823&e)===e}}he.__kMaxLength=33554432,he.__kMaxLengthBits=he.__kMaxLength<<5,he.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],he.__kBitsPerCharTableShift=5,he.__kBitsPerCharTableMultiplier=1<<he.__kBitsPerCharTableShift,he.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],he.__kBitConversionBuffer=new ArrayBuffer(8),he.__kBitConversionDouble=new Float64Array(he.__kBitConversionBuffer),he.__kBitConversionInts=new Int32Array(he.__kBitConversionBuffer),he.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},he.__imul=Math.imul||function(i,e){return 0|i*e};const mb={};function hl(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const n=Object.getOwnPropertyDescriptor(i,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(i,t,n))}for(const t of Object.getOwnPropertyNames(i.prototype)){const n=Object.getOwnPropertyDescriptor(i.prototype,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(i.prototype,t,n))}gb(e,i),gb(`${e}.prototype`,i.prototype)}function gb(i,e){const t=`%${i}%`;if(mb[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);mb[t]=e}function Ni(i){return mb[i]}const Li="slot-epochNanoSeconds",bc="slot-timezone-identifier",si="slot-year",di="slot-month",gi="slot-day",qi="slot-hour",Wi="slot-minute",Yi="slot-second",Zi="slot-millisecond",Xi="slot-microsecond",Ki="slot-nanosecond",kt="slot-calendar",As="slot-cached-instant",Ln="slot-time-zone",Ls="slot-years",as="slot-months",Qs="slot-weeks",Ns="slot-days",zs="slot-hours",js="slot-minutes",Os="slot-seconds",Fs="slot-milliseconds",Bs="slot-microseconds",$s="slot-nanoseconds",Sr="slot-calendar-identifier",IS=new WeakMap;function pl(i){IS.set(i,Object.create(null))}function P1(i){return IS.get(i)}function is(i,...e){if(!i||typeof i!="object")return!1;const t=P1(i);return!!t&&e.reduce((n,s)=>n&&s in t,!0)}function X(i,e){const t=P1(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function tn(i,e,t){P1(i)[e]=t}const T2=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,H5=new RegExp(`(?:(?:${T2.source})(?:\\/(?:${T2.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),S2=/[A-Za-z0-9]{3,8}/,q5=new RegExp(`(?:${S2.source}(?:-${S2.source})*)`),DS=/(?:[+\u2212-]\d{6}|\d{4})/,ky=/(?:0[1-9]|1[0-2])/,yb=/(?:0[1-9]|[12]\d|3[01])/,W5=new RegExp(`(${DS.source})(?:-(${ky.source})-(${yb.source})|(${ky.source})(${yb.source}))`),RS=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,LS=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,NS=new RegExp(`(?:([zZ])|(?:${LS.source})?)(?:\\[(${H5.source})\\])?`),zS=new RegExp(`\\[u-ca=(${q5.source})\\]`),Y5=new RegExp(`^${W5.source}(?:(?:T|\\s+)${RS.source})?${NS.source}(?:${zS.source})?$`,"i"),Z5=new RegExp(`^T?${RS.source}(?:${NS.source})?(?:${zS.source})?$`,"i"),X5=new RegExp(`^(${DS.source})-?(${ky.source})$`),K5=new RegExp(`^(?:--)?(${ky.source})-?(${yb.source})$`),rv=/(\d+)(?:[.,](\d{1,9}))?/,Q5=new RegExp(`(?:${rv.source}H)?(?:${rv.source}M)?(?:${rv.source}S)?`),J5=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${Q5.source})?$`,"i"),jS=Array.prototype.includes,I1=Array.prototype.push,OS=globalThis.Intl.DateTimeFormat,eD=Math.min,tD=Math.max,En=Math.abs,Jr=Math.floor,Rf=Math.sign,bh=Math.trunc,dm=Number.isNaN,ls=Number.isFinite,iD=Number,hm=String,nD=Number.MAX_SAFE_INTEGER,FS=Object.assign,bs=Object.create,rD=Object.getOwnPropertyDescriptor,sD=Object.is,D1=Reflect.apply,kr=he.BigInt(0),R1=he.BigInt(1),qu=he.BigInt(60),Nn=he.BigInt(1e3),Qa=he.BigInt(1e6),$l=he.BigInt(1e9),aD=he.BigInt(-1),Lc=he.multiply(he.BigInt(86400),$l),Lf=he.multiply(he.BigInt(-86400),he.BigInt(1e17)),Nf=he.multiply(he.BigInt(86400),he.BigInt(1e17)),BS=he.multiply(he.BigInt(-388152),he.BigInt(1e13)),oD=he.multiply(Lc,he.BigInt(3660)),$S=he.multiply(Lc,he.BigInt(366)),US=he.multiply(Lc,he.BigInt(14)),lD=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function VS(i){if(typeof i!="number"||!ls(i))return!1;const e=En(i);return Jr(e)===e}function Kn(i){return typeof i=="object"&&i!==null||typeof i=="function"}function zf(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return iD(i)}function zn(i){const e=zf(i);if(dm(e))return 0;const t=bh(e);return e===0?0:t}function $i(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return hm(i)}function Hn(i){const e=zn(i);if(!ls(e))throw new RangeError("infinity is out of range");return e}function jf(i,e){const t=zn(i);if(!ls(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Xr(i){const e=zf(i);if(dm(e))return 0;if(!ls(e))throw new RangeError("infinity is out of range");if(!VS(e))throw new RangeError(`unsupported fractional value ${e}`);return zn(e)}function Zr(i,e){return{quotient:he.divide(i,e),remainder:he.remainder(i,e)}}function L1(i){return he.lessThan(i,kr)?he.multiply(i,aD):i}function xb(i,...e){return I1.apply(i,e),i}const E2=new Map([["year",Hn],["month",jf],["monthCode",$i],["day",jf],["hour",Hn],["minute",Hn],["second",Hn],["millisecond",Hn],["microsecond",Hn],["nanosecond",Hn],["years",Xr],["months",Xr],["weeks",Xr],["days",Xr],["hours",Xr],["minutes",Xr],["seconds",Xr],["milliseconds",Xr],["microseconds",Xr],["nanoseconds",Xr],["era",$i],["eraYear",zn],["offset",$i]]),cD=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Zh=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Ay=new Map(Zh.map(i=>[i[0],i[1]])),uD=new Map(Zh.map(([i,e])=>[e,i])),k2=Zh.map(([,i])=>i),A2=Array.from(Ay.keys()).sort(),M2=new Map;function GS(i){let e=M2.get(i);return e===void 0&&(e=new OS("en-us",{timeZone:hm(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),M2.set(i,e)),e}function Vr(i){return is(i,Li)&&!is(i,Ln,kt)}function Zo(i){return is(i,bc)}function Tr(i){return is(i,Sr)}function yr(i){return is(i,Ls,as,Ns,zs,js,Os,Fs,Bs,$s)}function yn(i){return is(i,"slot-date-brand")}function xr(i){return is(i,qi,Wi,Yi,Zi,Xi,Ki)&&!is(i,si,di,gi)}function en(i){return is(i,si,di,gi,qi,Wi,Yi,Zi,Xi,Ki)}function Pn(i){return is(i,"slot-year-month-brand")}function os(i){return is(i,"slot-month-day-brand")}function wi(i){return is(i,Li,Ln,kt)}function Xh(i){if(is(i,kt)||is(i,Ln))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function HS(i){let{ianaName:e,offset:t,z:n}=function(l){try{let u=$1(l);if(u)return{ianaName:u.toString()}}catch{}try{const u=fl(l);if(u.z||u.offset||u.ianaName)return u}catch{}throw new RangeError(`Invalid time zone: ${l}`)}(i);return e||(n?"UTC":t)}function pm(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function fl(i){const e=Y5.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]===""&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const n=zn(t),s=zn(e[2]||e[4]),l=zn(e[3]||e[5]),u=zn(e[6]),r=e[6]!==void 0,p=zn(e[7]||e[10]);let f=zn(e[8]||e[11]);f===60&&(f=59);const m=(e[9]||e[12])+"000000000",v=zn(m.slice(0,3)),y=zn(m.slice(3,6)),_=zn(m.slice(6,9));let b,C=!1;if(e[13])b=void 0,C=!0;else if(e[14]&&e[15]){const x=e[14]==="-"||e[14]===""?"-":"+",A=e[15]||"00",D=e[16]||"00",T=e[17]||"00";let k=e[18]||"0";if(b=`${x}${A}:${D}`,+k){for(;k.endsWith("0");)k=k.slice(0,-1);b+=`:${T}.${k}`}else+T&&(b+=`:${T}`);b==="-00:00"&&(b="+00:00")}let E=e[19];if(E)try{E=$1(E).toString()}catch{}const S=e[20];return H1(n,s,l,u,p,f,v,y,_),{year:n,month:s,day:l,hasTime:r,hour:u,minute:p,second:f,millisecond:v,microsecond:y,nanosecond:_,ianaName:E,offset:b,z:C,calendar:S}}function qS(i){const e=X5.exec(i);let t,n,s,l;if(e){let u=e[1];if(u[0]===""&&(u=`-${u.slice(1)}`),u==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=zn(u),n=zn(e[2]),s=e[3]}else{let u;if({year:t,month:n,calendar:s,day:l,z:u}=fl(i),u)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:n,calendar:s,referenceISODay:l}}function WS(i){const e=K5.exec(i);let t,n,s,l;if(e)t=zn(e[1]),n=zn(e[2]);else{let u;if({month:t,day:n,calendar:s,year:l,z:u}=fl(i),u)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:n,calendar:s,referenceISOYear:l}}function dD(i){const e=J5.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(E=>E===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]===""?-1:1,n=zn(e[2])*t,s=zn(e[3])*t,l=zn(e[4])*t,u=zn(e[5])*t,r=zn(e[6])*t;let p=e[7],f=zn(e[8])*t,m=e[9],v=zn(e[10])*t;const y=e[11]+"000000000";let _=zn(y.slice(0,3))*t,b=zn(y.slice(3,6))*t,C=zn(y.slice(6,9))*t;return p=p?t*zn(p)/10**p.length:0,m=m?t*zn(m)/10**m.length:0,{minutes:f,seconds:v,milliseconds:_,microseconds:b,nanoseconds:C}=function(S,x,A,D,T,k,N){let W=S,Z=x,K=A,j=D,V=T,$=k,L=N;if(W!==0){[Z,K,j,V,$,L].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*W;Z=bh(R),K=R%1}if(K!==0){[j,V,$,L].forEach(U=>{if(U!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*K;j=bh(R);const G=R%1;if(G!==0){const U=1e3*G;V=bh(U);const B=U%1;if(B!==0){const H=1e3*B;$=bh(H);const q=H%1;q!==0&&(L=bh(1e3*q))}}}return{minutes:Z,seconds:j,milliseconds:V,microseconds:$,nanoseconds:L}}(p,f,m,v,_,b,C),Mx(n,s,l,u,r,f,v,_,b,C),{years:n,months:s,weeks:l,days:u,hours:r,minutes:f,seconds:v,milliseconds:_,microseconds:b,nanoseconds:C}}function hD(i){let{year:e,month:t,day:n,hour:s,minute:l,second:u,millisecond:r,microsecond:p,nanosecond:f,offset:m,z:v}=function(C){const E=fl(C);if(!E.z&&!E.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return E}(i);if(!v&&!m)throw new RangeError("Temporal.Instant requires a time zone offset");const y=v?0:sd(m);({year:e,month:t,day:n,hour:s,minute:l,second:u,millisecond:r,microsecond:p,nanosecond:f}=V1(e,t,n,s,l,u,r,p,f-y));const _=jc(e,t,n,s,l,u,r,p,f);if(_===null)throw new RangeError("DateTime outside of supported range");return _}function My(i,e,t,n){let s=i,l=e,u=t;switch(n){case"reject":al(s,l,u);break;case"constrain":({year:s,month:l,day:u}=lE(s,l,u))}return{year:s,month:l,day:u}}function gx(i,e,t,n,s,l,u){let r=i,p=e,f=t,m=n,v=s,y=l;switch(u){case"reject":Ax(r,p,f,m,v,y);break;case"constrain":({hour:r,minute:p,second:f,millisecond:m,microsecond:v,nanosecond:y}=function(b,C,E,S,x,A){const D=ya(b,0,23),T=ya(C,0,59),k=ya(E,0,59),N=ya(S,0,999),W=ya(x,0,999),Z=ya(A,0,999);return{hour:D,minute:T,second:k,millisecond:N,microsecond:W,nanosecond:Z}}(r,p,f,m,v,y))}return{hour:r,minute:p,second:f,millisecond:m,microsecond:v,nanosecond:y}}function fd(i){if(!Kn(i))return dD($i(i));if(yr(i))return{years:X(i,Ls),months:X(i,as),weeks:X(i,Qs),days:X(i,Ns),hours:X(i,zs),minutes:X(i,js),seconds:X(i,Os),milliseconds:X(i,Fs),microseconds:X(i,Bs),nanoseconds:X(i,$s)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(b){if(!Kn(b))throw new TypeError("invalid duration-like");const C={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let E=!1;for(const S of A2){const x=b[S];x!==void 0&&(E=!0,C[S]=Xr(x))}if(!E)throw new TypeError("invalid duration-like");return C}(i);for(const _ of A2){const b=t[_];b!==void 0&&(e[_]=b)}let{years:n,months:s,weeks:l,days:u,hours:r,minutes:p,seconds:f,milliseconds:m,microseconds:v,nanoseconds:y}=e;return Mx(n,s,l,u,r,p,f,m,v,y),{years:n,months:s,weeks:l,days:u,hours:r,minutes:p,seconds:f,milliseconds:m,microseconds:v,nanoseconds:y}}function Mr(i){return i===void 0?"constrain":Fc(i,"overflow",["constrain","reject"],"constrain")}function Of(i){return i===void 0?"compatible":Fc(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function ta(i,e){return Fc(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function fm(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function vb(i,e){return i===void 0?e:Fc(i,"offset",["prefer","use","ignore","reject"],e)}function mm(i){return Fc(i,"calendarName",["auto","always","never"],"auto")}function Yl(i,e,t){let n=1/0;e!==void 0&&(n=e),t||e===void 0||(n=e>1?e-1:1);const s=function(u,r,p,f,m){let v=u[r];if(v===void 0)return m;const y=zf(v);if(dm(y)||y<p||y>f)throw new RangeError(`${String(r)} must be between ${p} and ${f}, not ${y}`);return Jr(y)}(i,"roundingIncrement",1,n,1);if(e!==void 0&&e%s!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return s}function N1(i,e){return Yl(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function gm(i){const e=es(i,"smallestUnit","time",void 0);if(e==="hour"){const s=Zh.reduce((l,[u,r,p])=>(p==="time"&&r!=="hour"&&l.push(r,u),l),[]);throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const s=$i(t);if(s==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${s}`)}if(dm(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const n=Jr(t);switch(n){case 0:return{precision:n,unit:"second",increment:1};case 1:case 2:case 3:return{precision:n,unit:"millisecond",increment:10**(3-n)};case 4:case 5:case 6:return{precision:n,unit:"microsecond",increment:10**(6-n)};case 7:case 8:case 9:return{precision:n,unit:"nanosecond",increment:10**(9-n)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const id=Symbol("~required~");function es(i,e,t,n,s=[]){const l=[];for(const[,f,m]of Zh)t!=="datetime"&&t!==m||l.push(f);l.push(...s);let u=n;u===id?u=void 0:u!==void 0&&l.push(u);const r=[...l];for(const f of l){const m=uD.get(f);m!==void 0&&r.push(m)}let p=Fc(i,e,r,u);if(p===void 0&&n===id)throw new RangeError(`${e} is required`);return Ay.has(p)?Ay.get(p):p}function ly(i){const e=i.relativeTo;if(e===void 0)return e;let t,n,s,l,u,r,p,f,m,v,y,_,b="option",C=!1;if(Kn(e)){if(wi(e)||yn(e))return e;if(en(e))return Lh(e);v=Kh(e);const E=on(e,jr(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),S=bs(null);S.overflow="constrain",{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m}=ym(v,E,S),_=e.offset,_===void 0&&(b="wall"),y=e.timeZone}else{let E,S;({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m,calendar:v,ianaName:E,offset:_,z:S}=fl($i(e))),E&&(y=E),S?b="exact":_||(b="wall"),v||(v=Pr()),v=cs(v),C=!0}if(y!==void 0){y=Gs(y);let E=0;return b==="option"&&(E=sd($i(_))),fs(Iy(t,n,s,l,u,r,p,f,m,b,E,y,"compatible","reject",C),y,v)}return xo(t,n,s,v)}function bb(i,e,t,n,s,l,u,r,p,f){for(const[m,v]of[["years",i],["months",e],["weeks",t],["days",n],["hours",s],["minutes",l],["seconds",u],["milliseconds",r],["microseconds",p],["nanoseconds",f]])if(v!==0)return Ay.get(m);return"nanosecond"}function Ta(i,e){return k2.indexOf(i)>k2.indexOf(e)?e:i}function yx(i,e){let t=i;return t===void 0&&(t=bs(null)),FS(bs(null),t,{largestUnit:e})}function on(i,e,t,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){const s=bs(null);let l=!1;for(const u of e){let r=i[u];if(r!==void 0)l=!0,E2.has(u)&&(r=E2.get(u)(r)),s[u]=r;else if(t!=="partial"){if(jS.call(t,u))throw new TypeError(`required property '${u}' missing or undefined`);r=cD.get(u),s[u]=r}}if(t==="partial"&&!l)throw new TypeError(n);if(s.era===void 0!=(s.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return s}function Py(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],n=on(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),s={};for(const l of t){const u=rD(n,l);u!==void 0?s[l]=u.value:e==="complete"&&(s[l]=0)}return s}function Gn(i,e){let t=i;if(Kn(t)){if(yn(t))return t;if(wi(t)&&(Mr(e),t=za(X(t,Ln),X(t,As),X(t,kt))),en(t))return Mr(e),xo(X(t,si),X(t,di),X(t,gi),X(t,kt));const p=Kh(t);return zc(p,on(t,jr(p,["day","month","monthCode","year"]),[]),e)}Mr(e);const{year:n,month:s,day:l,calendar:u,z:r}=function(f){return fl(f)}($i(t));if(r)throw new RangeError("Z designator not supported for PlainDate");return new(Ni("%Temporal.PlainDate%"))(n,s,l,u)}function ym(i,e,t){let{hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=Py(e);const f=Mr(t),m=zc(i,e,t),v=X(m,si),y=X(m,di),_=X(m,gi);return{hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=gx(n,s,l,u,r,p,f),{year:v,month:y,day:_,hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}}function Bu(i,e){let t,n,s,l,u,r,p,f,m,v;if(Kn(i)){if(en(i))return i;if(wi(i))return Mr(e),za(X(i,Ln),X(i,As),X(i,kt));if(yn(i))return Mr(e),ga(X(i,si),X(i,di),X(i,gi),0,0,0,0,0,0,X(i,kt));v=Kh(i);const y=on(i,jr(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m}=ym(v,y,e))}else{let y;if(Mr(e),{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m,calendar:v,z:y}=function(b){return fl(b)}($i(i)),y)throw new RangeError("Z designator not supported for PlainDateTime");H1(t,n,s,l,u,r,p,f,m),v===void 0&&(v=Pr()),v=cs(v)}return ga(t,n,s,l,u,r,p,f,m,v)}function Eh(i){if(yr(i))return i;let{years:e,months:t,weeks:n,days:s,hours:l,minutes:u,seconds:r,milliseconds:p,microseconds:f,nanoseconds:m}=fd(i);return new(Ni("%Temporal.Duration%"))(e,t,n,s,l,u,r,p,f,m)}function Qo(i){if(Vr(i))return i;if(wi(i))return new(Ni("%Temporal.Instant%"))(X(i,Li));const e=hD($i(i));return new(Ni("%Temporal.Instant%"))(e)}function P2(i,e){let t=i;if(Kn(t)){if(os(t))return t;let p,f;if(is(t,kt))p=X(t,kt),f=!1;else{let v=t.calendar;f=v===void 0,v===void 0&&(v=Pr()),p=cs(v)}t=t;const m=on(t,jr(p,["day","month","monthCode","year"]),[]);return f&&m.month!==void 0&&m.monthCode===void 0&&m.year===void 0&&(m.year=1972),Rh(p,m,e)}Mr(e);let{month:n,day:s,referenceISOYear:l,calendar:u}=WS($i(t)),r=u;return r===void 0&&(r=Pr()),r=cs(r),l===void 0?(al(1972,n,s),Ff(n,s,r)):Rh(r,Ff(n,s,r,l))}function Bl(i,e="constrain"){let t,n,s,l,u,r,p,f=i;if(Kn(f)){if(xr(f))return f;if(wi(f)&&(f=za(X(f,Ln),X(f,As),X(f,kt))),en(f))return new(Ni("%Temporal.PlainTime%"))(X(f,qi),X(f,Wi),X(f,Yi),X(f,Zi),X(f,Xi),X(f,Ki));if(p=Kh(f),$i(p)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r}=Py(f)),{hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r}=gx(t,n,s,l,u,r,e)}else if({hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r,calendar:p}=function(v){const y=Z5.exec(v);let _,b,C,E,S,x,A;if(y){_=zn(y[1]),b=zn(y[2]||y[5]),C=zn(y[3]||y[6]),C===60&&(C=59);const D=(y[4]||y[7])+"000000000";E=zn(D.slice(0,3)),S=zn(D.slice(3,6)),x=zn(D.slice(6,9)),A=y[15]}else{let D,T;if({hasTime:T,hour:_,minute:b,second:C,millisecond:E,microsecond:S,nanosecond:x,calendar:A,z:D}=fl(v),!T)throw new RangeError(`time is missing in string: ${v}`);if(D)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(v))return{hour:_,minute:b,second:C,millisecond:E,microsecond:S,nanosecond:x,calendar:A};try{const{month:D,day:T}=WS(v);al(1972,D,T)}catch{try{const{year:D,month:T}=qS(v);al(D,T,1)}catch{return{hour:_,minute:b,second:C,millisecond:E,microsecond:S,nanosecond:x,calendar:A}}}throw new RangeError(`invalid ISO 8601 time-only string ${v}; may need a T prefix`)}($i(f)),Ax(t,n,s,l,u,r),p!==void 0&&p!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(Ni("%Temporal.PlainTime%"))(t,n,s,l,u,r)}function vf(i,e){if(Kn(i)){if(Pn(i))return i;const r=Kh(i);return rd(r,on(i,jr(r,["month","monthCode","year"]),[]),e)}Mr(e);let{year:t,month:n,referenceISODay:s,calendar:l}=qS($i(i)),u=l;return u===void 0&&(u=Pr()),u=cs(u),s===void 0?(al(t,n,1),Bf(t,n,u)):rd(u,Bf(t,n,u,s))}function Iy(i,e,t,n,s,l,u,r,p,f,m,v,y,_,b){const C=new(Ni("%Temporal.PlainDateTime%"))(i,e,t,n,s,l,u,r,p);if(f==="wall"||_==="ignore")return X(Vs(v,C,y),Li);if(f==="exact"||_==="use"){const S=jc(i,e,t,n,s,l,u,r,p);if(S===null)throw new RangeError("ZonedDateTime outside of supported range");return he.subtract(S,he.BigInt(m))}const E=Dy(v,C);for(const S of E){const x=Ro(v,S),A=he.toNumber(pa(he.BigInt(x),6e10,"halfExpand"));if(x===m||b&&A===m)return X(S,Li)}if(_==="reject"){const S=U1(m),x=Zo(v)?X(v,bc):"time zone";throw new RangeError(`Offset ${S} is invalid for ${C.toString()} in ${x}`)}return X(tE(E,v,C,y),Li)}function bf(i,e){let t,n,s,l,u,r,p,f,m,v,y,_,b=!1,C="option";if(Kn(i)){if(wi(i))return i;_=Kh(i);const S=on(i,xb(jr(_,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m}=ym(_,S,e)),v=Gs(S.timeZone),y=S.offset,y===void 0?C="wall":y=$i(y)}else{let S,x;if(Mr(e),{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m,ianaName:S,offset:y,z:x,calendar:_}=function(D){const T=fl(D);if(!T.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return T}($i(i)),!S)throw new RangeError("time zone ID required in brackets");x?C="exact":y||(C="wall"),v=new(Ni("%Temporal.TimeZone%"))(S),_||(_=Pr()),_=cs(_),b=!0}let E=0;return C==="option"&&(E=sd(y)),fs(Iy(t,n,s,l,u,r,p,f,m,C,E,v,Of(e),vb(e,"reject"),b),v,_)}function YS(i,e,t,n,s){al(e,t,n),cE(e,t,n),pl(i),tn(i,si,e),tn(i,di,t),tn(i,gi,n),tn(i,kt,s),tn(i,"slot-date-brand",!0)}function xo(i,e,t,n=Pr()){const s=Ni("%Temporal.PlainDate%"),l=bs(s.prototype);return YS(l,i,e,t,n),l}function ZS(i,e,t,n,s,l,u,r,p,f,m){H1(e,t,n,s,l,u,r,p,f),uE(e,t,n,s,l,u,r,p,f),pl(i),tn(i,si,e),tn(i,di,t),tn(i,gi,n),tn(i,qi,s),tn(i,Wi,l),tn(i,Yi,u),tn(i,Zi,r),tn(i,Xi,p),tn(i,Ki,f),tn(i,kt,m)}function ga(i,e,t,n,s,l,u,r,p,f=Pr()){const m=Ni("%Temporal.PlainDateTime%"),v=bs(m.prototype);return ZS(v,i,e,t,n,s,l,u,r,p,f),v}function XS(i,e,t,n,s){al(s,e,t),cE(s,e,t),pl(i),tn(i,di,e),tn(i,gi,t),tn(i,si,s),tn(i,kt,n),tn(i,"slot-month-day-brand",!0)}function Ff(i,e,t=Pr(),n=1972){const s=Ni("%Temporal.PlainMonthDay%"),l=bs(s.prototype);return XS(l,i,e,t,n),l}function KS(i,e,t,n,s){al(e,t,s),function(u,r){ys(u,-271821,275760),u===-271821?ys(r,4,12):u===275760&&ys(r,1,9)}(e,t),pl(i),tn(i,si,e),tn(i,di,t),tn(i,gi,s),tn(i,kt,n),tn(i,"slot-year-month-brand",!0)}function Bf(i,e,t=Pr(),n=1){const s=Ni("%Temporal.PlainYearMonth%"),l=bs(s.prototype);return KS(l,i,e,t,n),l}function QS(i,e,t,n){Ou(e),pl(i),tn(i,Li,e),tn(i,Ln,t),tn(i,kt,n);const s=new(Ni("%Temporal.Instant%"))(X(i,Li));tn(i,As,s)}function fs(i,e,t=Pr()){const n=Ni("%Temporal.ZonedDateTime%"),s=bs(n.prototype);return QS(s,i,e,t),s}function Pr(){return new(Ni("%Temporal.Calendar%"))("iso8601")}function jr(i,e){let t=e;i.fields&&(t=i.fields(t));const n=[];for(const s of t){if(typeof s!="string")throw new TypeError("bad return from calendar.fields()");I1.call(n,s)}return n}function nd(i,e,t){const n=i.mergeFields;if(!n)return{...e,...t};const s=Reflect.apply(n,i,[e,t]);if(!Kn(s))throw new TypeError("bad return from calendar.mergeFields()");return s}function Us(i,e,t,n,s){let l=s;l===void 0&&(l=i.dateAdd);const u=D1(l,i,[e,t,n]);if(!yn(u))throw new TypeError("invalid result");return u}function Nc(i,e,t,n,s){let l=s;l===void 0&&(l=i.dateUntil);const u=D1(l,i,[e,t,n]);if(!yr(u))throw new TypeError("invalid result");return u}function xx(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Hn(t)}function vx(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return jf(t)}function xm(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return $i(t)}function bx(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return jf(t)}function _x(i,e){let t=i.era(e);return t!==void 0&&(t=$i(t)),t}function wx(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Hn(t)),t}function z1(i,e){return i.dayOfWeek(e)}function j1(i,e){return i.dayOfYear(e)}function O1(i,e){return i.weekOfYear(e)}function F1(i,e){return i.daysInWeek(e)}function vm(i,e){return i.daysInMonth(e)}function Cx(i,e){return i.daysInYear(e)}function Tx(i,e){return i.monthsInYear(e)}function Sx(i,e){return i.inLeapYear(e)}function cs(i){let e=i;if(Kn(e)){if(is(e,kt))return X(e,kt);if(!("calendar"in e)||(e=e.calendar,Kn(e)&&!("calendar"in e)))return e}const t=$i(e),n=Ni("%Temporal.Calendar%");if(gE(t))return new n(t);let s;try{({calendar:s}=fl(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return s||(s="iso8601"),new n(s)}function Kh(i){if(is(i,kt))return X(i,kt);const{calendar:e}=i;return e===void 0?Pr():cs(e)}function bm(i,e){return i===e?!0:$i(i)===$i(e)}function JS(i,e){if(i===e)return e;const t=$i(i),n=$i(e);if(t===n||t==="iso8601")return e;if(n==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function zc(i,e,t){const n=i.dateFromFields(e,t);if(!yn(n))throw new TypeError("invalid result");return n}function rd(i,e,t){const n=i.yearMonthFromFields(e,t);if(!Pn(n))throw new TypeError("invalid result");return n}function Rh(i,e,t){const n=i.monthDayFromFields(e,t);if(!os(n))throw new TypeError("invalid result");return n}function Gs(i){let e=i;if(Kn(e)){if(wi(e))return X(e,Ln);if(!("timeZone"in e)||(e=e.timeZone,Kn(e)&&!("timeZone"in e)))return e}const t=HS($i(e));return new(Ni("%Temporal.TimeZone%"))(t)}function eE(i,e){return i===e?!0:$i(i)===$i(e)}function Lh(i){return xo(X(i,si),X(i,di),X(i,gi),X(i,kt))}function B1(i){return new(Ni("%Temporal.PlainTime%"))(X(i,qi),X(i,Wi),X(i,Yi),X(i,Zi),X(i,Xi),X(i,Ki))}function Ro(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const n=Reflect.apply(t,i,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!VS(n)||En(n)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function _b(i,e){return U1(Ro(i,e))}function za(i,e,t){const n=X(e,Li),s=Ro(i,e);let{year:l,month:u,day:r,hour:p,minute:f,second:m,millisecond:v,microsecond:y,nanosecond:_}=nE(n);return{year:l,month:u,day:r,hour:p,minute:f,second:m,millisecond:v,microsecond:y,nanosecond:_}=V1(l,u,r,p,f,m,v,y,_+s),ga(l,u,r,p,f,m,v,y,_,t)}function Vs(i,e,t){return tE(Dy(i,e),i,e,t)}function tE(i,e,t,n){const s=Ni("%Temporal.Instant%"),l=i.length;if(l===1)return i[0];if(l)switch(n){case"compatible":case"earlier":return i[0];case"later":return i[l-1];case"reject":throw new RangeError("multiple instants found")}const u=X(t,si),r=X(t,di),p=X(t,gi),f=X(t,qi),m=X(t,Wi),v=X(t,Yi),y=X(t,Zi),_=X(t,Xi),b=X(t,Ki),C=jc(u,r,p,f,m,v,y,_,b);if(C===null)throw new RangeError("DateTime outside of supported range");const E=new s(he.subtract(C,Lc)),S=new s(he.add(C,Lc)),x=Ro(e,E),A=Ro(e,S)-x;switch(n){case"earlier":{const D=X(t,kt),T=Ni("%Temporal.PlainDateTime%"),k=Cb(u,r,p,f,m,v,y,_,b,D,0,0,0,0,0,0,0,0,0,-A,void 0);return Dy(e,new T(k.year,k.month,k.day,k.hour,k.minute,k.second,k.millisecond,k.microsecond,k.nanosecond,D))[0]}case"compatible":case"later":{const D=X(t,kt),T=Ni("%Temporal.PlainDateTime%"),k=Cb(u,r,p,f,m,v,y,_,b,D,0,0,0,0,0,0,0,0,0,A,void 0),N=Dy(e,new T(k.year,k.month,k.day,k.hour,k.minute,k.second,k.millisecond,k.microsecond,k.nanosecond,D));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function Dy(i,e){const t=i.getPossibleInstantsFor(e),n=[];for(const s of t){if(!Vr(s))throw new TypeError("bad return from getPossibleInstantsFor");I1.call(n,s)}return n}function md(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${En(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function lr(i){return`00${i}`.slice(-2)}function Ex(i,e,t,n,s){if(s==="minute")return"";const l=`:${lr(i)}`;let u,r=1e6*e+1e3*t+n;if(s==="auto"){if(r===0)return l;for(u=`${r}`.padStart(9,"0");u[u.length-1]==="0";)u=u.slice(0,-1)}else{if(s===0)return l;u=`${r}`.padStart(9,"0").slice(0,s)}return`${l}.${u}`}function I2(i,e,t){let n=e;n===void 0&&(n=new(Ni("%Temporal.TimeZone%"))("UTC"));const s=za(n,i,Pr()),l=md(X(s,si)),u=lr(X(s,di)),r=lr(X(s,gi)),p=lr(X(s,qi)),f=lr(X(s,Wi)),m=Ex(X(s,Yi),X(s,Zi),X(s,Xi),X(s,Ki),t);let v="Z";return e!==void 0&&(v=iE(Ro(n,i))),`${l}-${u}-${r}T${p}:${f}${m}${v}`}function sv(i,e="auto",t){function n(Z){return Z<=nD?Z.toString(10):he.BigInt(Z).toString(10)}const s=X(i,Ls),l=X(i,as),u=X(i,Qs),r=X(i,Ns),p=X(i,zs),f=X(i,js);let m=X(i,Os),v=X(i,Fs),y=X(i,Bs),_=X(i,$s);const b=nl(s,l,u,r,p,f,m,v,y,_);if(t){const{unit:Z,increment:K,roundingMode:j}=t;({seconds:m,milliseconds:v,microseconds:y,nanoseconds:_}=Oc(0,0,0,0,0,0,m,v,y,_,K,Z,j))}const C=[];s&&C.push(`${n(En(s))}Y`),l&&C.push(`${n(En(l))}M`),u&&C.push(`${n(En(u))}W`),r&&C.push(`${n(En(r))}D`);const E=[];p&&E.push(`${n(En(p))}H`),f&&E.push(`${n(En(f))}M`);const S=[];let x,A,D,T,k=Nh(0,0,0,m,v,y,_,0);({quotient:k,remainder:x}=Zr(k,Nn)),{quotient:k,remainder:A}=Zr(k,Nn),{quotient:T,remainder:D}=Zr(k,Nn);const N=1e6*En(he.toNumber(D))+1e3*En(he.toNumber(A))+En(he.toNumber(x));let W;if(e==="auto"){if(N!==0)for(W=`${N}`.padStart(9,"0");W[W.length-1]==="0";)W=W.slice(0,-1)}else e!==0&&(W=`${N}`.padStart(9,"0").slice(0,e));return W&&S.unshift(".",W),he.equal(T,kr)&&!S.length&&e==="auto"||S.unshift(L1(T).toString()),S.length&&E.push(`${S.join("")}S`),E.length&&E.unshift("T"),C.length||E.length?`${b<0?"-":""}P${C.join("")}${E.join("")}`:"PT0S"}function D2(i,e="auto"){return`${md(X(i,si))}-${lr(X(i,di))}-${lr(X(i,gi))}${pm($i(X(i,kt)),e)}`}function R2(i,e,t="auto",n){let s=X(i,si),l=X(i,di),u=X(i,gi),r=X(i,qi),p=X(i,Wi),f=X(i,Yi),m=X(i,Zi),v=X(i,Xi),y=X(i,Ki);if(n){const{unit:_,increment:b,roundingMode:C}=n;({year:s,month:l,day:u,hour:r,minute:p,second:f,millisecond:m,microsecond:v,nanosecond:y}=Z1(s,l,u,r,p,f,m,v,y,b,_,C))}return`${md(s)}-${lr(l)}-${lr(u)}T${lr(r)}:${lr(p)}${Ex(f,m,v,y,e)}${pm($i(X(i,kt)),t)}`}function L2(i,e="auto"){let t=`${lr(X(i,di))}-${lr(X(i,gi))}`;const n=$i(X(i,kt));(e==="always"||n!=="iso8601")&&(t=`${md(X(i,si))}-${t}`);const s=pm(n,e);return s&&(t+=s),t}function N2(i,e="auto"){let t=`${md(X(i,si))}-${lr(X(i,di))}`;const n=$i(X(i,kt));(e==="always"||n!=="iso8601")&&(t+=`-${lr(X(i,gi))}`);const s=pm(n,e);return s&&(t+=s),t}function z2(i,e,t="auto",n="auto",s="auto",l){let u=X(i,As);if(l){const{unit:m,increment:v,roundingMode:y}=l,_=Ly(X(i,Li),v,m,y);u=new(Ni("%Temporal.Instant%"))(_)}const r=X(i,Ln),p=za(r,u,Pr());let f=`${md(X(p,si))}-${lr(X(p,di))}-${lr(X(p,gi))}T${lr(X(p,qi))}:${lr(X(p,Wi))}${Ex(X(p,Yi),X(p,Zi),X(p,Xi),X(p,Ki),e)}`;return s!=="never"&&(f+=iE(Ro(r,u))),n!=="never"&&(f+=`[${r}]`),f+=pm($i(X(i,kt)),t),f}function _f(i){return yE.test(hm(i))}function sd(i){const e=yE.exec(hm(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]===""?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function $1(i){return _f(i)?U1(sd(i)):GS(hm(i)).resolvedOptions().timeZone}function jl(i,e){const{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:m}=rE(i,e),v=jc(t,n,s,l,u,r,p,f,m);if(v===null)throw new RangeError("Date outside of supported range");return he.toNumber(he.subtract(v,i))}function U1(i){const e=i<0?"-":"+",t=En(i),n=t%1e9,s=Jr(t/1e9)%60,l=Jr(t/6e10)%60,u=lr(Jr(t/36e11)),r=lr(l),p=lr(s);let f="";if(n){let m=`${n}`.padStart(9,"0");for(;m[m.length-1]==="0";)m=m.slice(0,-1);f=`:${p}.${m}`}else s&&(f=`:${p}`);return`${e}${u}:${r}${f}`}function iE(i){let e=he.toNumber(pa(he.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=En(e);const n=e/6e10%60;return`${t}${lr(Jr(e/36e11))}:${lr(n)}`}function jc(i,e,t,n,s,l,u,r,p){const f=new Date;f.setUTCHours(n,s,l,u),f.setUTCFullYear(i,e-1,t);const m=f.getTime();if(dm(m))return null;let v=he.multiply(he.BigInt(m),Qa);return v=he.add(v,he.multiply(he.BigInt(r),Nn)),v=he.add(v,he.BigInt(p)),he.lessThan(v,Lf)||he.greaterThan(v,Nf)?null:v}function nE(i){const{quotient:e,remainder:t}=Zr(i,Qa);let n=he.toNumber(e),s=he.toNumber(t);s<0&&(s+=1e6,n-=1);const l=Jr(s/1e3)%1e3,u=s%1e3,r=new Date(n);return{epochMilliseconds:n,year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds(),microsecond:l,nanosecond:u}}function rE(i,e){const{epochMilliseconds:t,millisecond:n,microsecond:s,nanosecond:l}=nE(i),{year:u,month:r,day:p,hour:f,minute:m,second:v}=function(_,b){const C=GS(_);return function(S){const x=S.split(/[^\w]+/);if(x.length!==7)throw new RangeError(`expected 7 parts in "${S}`);const A=+x[0],D=+x[1];let T=+x[2];const k=x[3].toUpperCase();if(k==="B"||k==="BC")T=1-T;else if(k!=="A"&&k!=="AD")throw new RangeError(`Unknown era ${k} in "${S}`);let N=+x[4];N===24&&(N=0);const W=+x[5],Z=+x[6];if(!(ls(T)&&ls(A)&&ls(D)&&ls(N)&&ls(W)&&ls(Z)))throw new RangeError(`Invalid number in "${S}`);return{year:T,month:A,day:D,hour:N,minute:W,second:Z}}(C.format(new Date(b)))}(e,t);return V1(u,r,p,f,m,v,n,s,l)}function j2(i,e){return he.lessThan(i,e)?e:i}function sE(){return he.add(K1(),oD)}function aE(i,e){const t=sE(),n=he.greaterThan(i,t),s=n?he.subtract(i,$S):BS;let l=he.subtract(i,R1);const u=jl(l,e);let r=l,p=u;for(;u===p&&he.greaterThan(l,s);)r=he.subtract(l,US),p=jl(r,e),u===p&&(l=r);return u===p?n?aE(he.subtract(t,Lc),e):null:xE(f=>jl(f,e),r,l,p,u)}function Ec(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function Ul(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Ec(i)?"leapyear":"standard"][e-1]}function av(i,e,t){const n=e+(e<3?10:-2),s=i-(e<3?1:0),l=Jr(s/100),u=s-100*l,r=(t+Jr(2.6*n-.2)+(u+Jr(u/4))+(Jr(l/4)-2*l))%7;return r+(r<=0?7:0)}function Ry(i,e,t){let n=t;for(let s=e-1;s>0;s--)n+=Ul(i,s);return n}function nl(i,e,t,n,s,l,u,r,p,f){for(const m of[i,e,t,n,s,l,u,r,p,f])if(m!==0)return m<0?-1:1;return 0}function cy(i,e){let t=i,n=e;if(!ls(t)||!ls(n))throw new RangeError("infinity is out of range");return n-=1,t+=Jr(n/12),n%=12,n<0&&(n+=12),n+=1,{year:t,month:n}}function kx(i,e,t){let n=i,s=e,l=t;if(!ls(l))throw new RangeError("infinity is out of range");({year:n,month:s}=cy(n,s));let u=0,r=s>2?n:n-1;for(;u=Ec(r)?366:365,l<-u;)n-=1,r-=1,l+=u;for(r+=1;u=Ec(r)?366:365,l>u;)n+=1,r+=1,l-=u;for(;l<1;)({year:n,month:s}=cy(n,s-1)),l+=Ul(n,s);for(;l>Ul(n,s);)l-=Ul(n,s),{year:n,month:s}=cy(n,s+1);return{year:n,month:s,day:l}}function V1(i,e,t,n,s,l,u,r,p){const{deltaDays:f,hour:m,minute:v,second:y,millisecond:_,microsecond:b,nanosecond:C}=Ol(n,s,l,u,r,p),{year:E,month:S,day:x}=kx(i,e,t+f);return{year:E,month:S,day:x,hour:m,minute:v,second:y,millisecond:_,microsecond:b,nanosecond:C}}function Ol(i,e,t,n,s,l){let u=i,r=e,p=t,f=n,m=s,v=l;if(!(ls(u)&&ls(r)&&ls(p)&&ls(f)&&ls(m)&&ls(v)))throw new RangeError("infinity is out of range");m+=Jr(v/1e3),v=lh(v,1e3),f+=Jr(m/1e3),m=lh(m,1e3),p+=Jr(f/1e3),f=lh(f,1e3),r+=Jr(p/60),p=lh(p,60),u+=Jr(r/60),r=lh(r,60);const y=Jr(u/24);return u=lh(u,24),{deltaDays:y,hour:u,minute:r,second:p,millisecond:f,microsecond:m,nanosecond:v}}function Nh(i,e,t,n,s,l,u,r){const p=he.BigInt(i);let f=he.BigInt(u);i!==0&&(f=he.subtract(he.BigInt(u),he.BigInt(r)));const m=he.add(he.BigInt(e),he.multiply(p,he.BigInt(24))),v=he.add(he.BigInt(t),he.multiply(m,qu)),y=he.add(he.BigInt(n),he.multiply(v,qu)),_=he.add(he.BigInt(s),he.multiply(y,Nn)),b=he.add(he.BigInt(l),he.multiply(_,Nn));return he.add(he.BigInt(f),he.multiply(b,Nn))}function G1(i,e){const t=Ni("%Temporal.Instant%"),n=Rf(he.toNumber(i));let s=he.BigInt(i),l=864e11;if(n===0)return{days:0,nanoseconds:kr,dayLengthNs:l};if(!wi(e)){let x;return{quotient:x,remainder:s}=Zr(s,he.BigInt(l)),{days:he.toNumber(x),nanoseconds:s,dayLengthNs:l}}const u=X(e,Li),r=X(e,As),p=he.add(u,s),f=new t(p),m=X(e,Ln),v=X(e,kt),y=za(m,r,v),_=za(m,f,v);let{days:b}=Y1(X(y,si),X(y,di),X(y,gi),X(y,qi),X(y,Wi),X(y,Yi),X(y,Zi),X(y,Xi),X(y,Ki),X(_,si),X(_,di),X(_,gi),X(_,qi),X(_,Wi),X(_,Yi),X(_,Zi),X(_,Xi),X(_,Ki),v,"day",bs(null)),C=Ja(r,m,v,0,0,0,b,0,0,0,0,0,0);if(n===1)for(;b>0&&he.greaterThan(C,p);)--b,C=Ja(r,m,v,0,0,0,b,0,0,0,0,0,0);s=he.subtract(p,C);let E=!1,S=new t(C);do{const x=Ja(S,m,v,0,0,0,n,0,0,0,0,0,0),A=X(S,Li);l=he.toNumber(he.subtract(x,A)),E=he.greaterThan(he.multiply(he.subtract(s,he.BigInt(l)),he.BigInt(n)),kr),E&&(s=he.subtract(s,he.BigInt(l)),S=new t(x),b+=n)}while(E);return{days:b,nanoseconds:s,dayLengthNs:En(l)}}function _a(i,e,t,n,s,l,u,r,p){let f,m,v,y,_,b,C=i;if(wi(p)){const S=Ja(X(p,As),X(p,Ln),X(p,kt),0,0,0,C,e,t,n,s,l,u),x=X(p,Li);f=he.subtract(S,x)}else f=Nh(C,e,t,n,s,l,u,0);r==="year"||r==="month"||r==="week"||r==="day"?{days:C,nanoseconds:f}=G1(f,p):C=0;const E=he.lessThan(f,kr)?-1:1;switch(f=L1(f),m=v=y=_=b=kr,r){case"year":case"month":case"week":case"day":case"hour":({quotient:m,remainder:f}=Zr(f,Nn)),{quotient:v,remainder:m}=Zr(m,Nn),{quotient:y,remainder:v}=Zr(v,Nn),{quotient:_,remainder:y}=Zr(y,qu),{quotient:b,remainder:_}=Zr(_,qu);break;case"minute":({quotient:m,remainder:f}=Zr(f,Nn)),{quotient:v,remainder:m}=Zr(m,Nn),{quotient:y,remainder:v}=Zr(v,Nn),{quotient:_,remainder:y}=Zr(y,qu);break;case"second":({quotient:m,remainder:f}=Zr(f,Nn)),{quotient:v,remainder:m}=Zr(m,Nn),{quotient:y,remainder:v}=Zr(v,Nn);break;case"millisecond":({quotient:m,remainder:f}=Zr(f,Nn)),{quotient:v,remainder:m}=Zr(m,Nn);break;case"microsecond":({quotient:m,remainder:f}=Zr(f,Nn));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:C,hours:he.toNumber(b)*E,minutes:he.toNumber(_)*E,seconds:he.toNumber(y)*E,milliseconds:he.toNumber(v)*E,microseconds:he.toNumber(m)*E,nanoseconds:he.toNumber(f)*E}}function Og(i,e,t,n,s,l){let u=i,r=e,p=t,f=n;const m=Ni("%Temporal.Duration%"),v=nl(u,r,p,f,0,0,0,0,0,0);let y,_;l&&(_=Gn(l),y=X(_,kt));const b=new m(v),C=new m(0,v),E=new m(0,0,v);switch(s){case"year":break;case"month":{if(!y)throw new RangeError("a starting point is required for months balancing");const S=y.dateAdd,x=y.dateUntil;let A=_;for(;En(u)>0;){const D=Us(y,A,b,void 0,S),T=bs(null);T.largestUnit="month";const k=X(Nc(y,A,D,T,x),as);A=D,r+=k,u-=v}}break;case"week":if(!y)throw new RangeError("a starting point is required for weeks balancing");for(;En(u)>0;){let S;({relativeTo:_,days:S}=ks(y,_,b)),f+=S,u-=v}for(;En(r)>0;){let S;({relativeTo:_,days:S}=ks(y,_,C)),f+=S,r-=v}break;default:for(;En(u)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:_,days:S}=ks(y,_,b)),f+=S,u-=v}for(;En(r)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:_,days:S}=ks(y,_,C)),f+=S,r-=v}for(;En(p)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:_,days:S}=ks(y,_,E)),f+=S,p-=v}}return{years:u,months:r,weeks:p,days:f}}function O2(i,e,t,n,s){if(wi(i)){const l=X(i,As),u=X(i,Ln),r=X(i,kt),p=Ro(u,l),f=Ja(l,u,r,e,t,n,s,0,0,0,0,0,0);return Ro(u,new(Ni("%Temporal.Instant%"))(f))-p}return 0}function oE(i){return new(Ni("%Temporal.Duration%"))(-X(i,Ls),-X(i,as),-X(i,Qs),-X(i,Ns),-X(i,zs),-X(i,js),-X(i,Os),-X(i,Fs),-X(i,Bs),-X(i,$s))}function ya(i,e,t){return eD(t,tD(e,i))}function lE(i,e,t){const n=ya(e,1,12);return{year:i,month:n,day:ya(t,1,Ul(i,n))}}function ys(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function al(i,e,t){ys(e,1,12),ys(t,1,Ul(i,e))}function cE(i,e,t){uE(i,e,t,12,0,0,0,0,0)}function Ax(i,e,t,n,s,l){ys(i,0,23),ys(e,0,59),ys(t,0,59),ys(n,0,999),ys(s,0,999),ys(l,0,999)}function H1(i,e,t,n,s,l,u,r,p){al(i,e,t),Ax(n,s,l,u,r,p)}function uE(i,e,t,n,s,l,u,r,p){if(ys(i,-271821,275760),i===-271821&&jc(i,e,t+1,n,s,l,u,r,p-1)==null||i===275760&&jc(i,e,t-1,n,s,l,u,r,p+1)==null)throw new RangeError("DateTime outside of supported range")}function Ou(i){if(he.lessThan(i,Lf)||he.greaterThan(i,Nf))throw new RangeError("Instant outside of supported range")}function Mx(i,e,t,n,s,l,u,r,p,f){const m=nl(i,e,t,n,s,l,u,r,p,f);for(const v of[i,e,t,n,s,l,u,r,p,f]){if(!ls(v))throw new RangeError("infinite values not allowed as duration fields");const y=Rf(v);if(y!==0&&y!==m)throw new RangeError("mixed-sign values not allowed as duration fields")}}function q1(i,e,t,n,s,l,u){switch(u){case"year":case"month":{const r=-kc(i,e,t,n,s,l);if(r===0)return{years:0,months:0,weeks:0,days:0};const p={year:i,month:e,day:t},f={year:n,month:s,day:l};let m=f.year-p.year,v=Wu(i,e,t,m,0,0,0,"constrain"),y=-kc(v.year,v.month,v.day,n,s,l);if(y===0)return u==="year"?{years:m,months:0,weeks:0,days:0}:{years:0,months:12*m,weeks:0,days:0};let _=f.month-p.month;if(y!==r&&(m-=r,_+=12*r),v=Wu(i,e,t,m,_,0,0,"constrain"),y=-kc(v.year,v.month,v.day,n,s,l),y===0)return u==="year"?{years:m,months:_,weeks:0,days:0}:{years:0,months:_+12*m,weeks:0,days:0};y!==r&&(_-=r,_===-r&&(m-=r,_=11*r),v=Wu(i,e,t,m,_,0,0,"constrain"));let b=0;return b=v.month===f.month?f.day-v.day:r<0?-v.day-(Ul(f.year,f.month)-f.day):f.day+(Ul(v.year,v.month)-v.day),u==="month"&&(_+=12*m,m=0),{years:m,months:_,weeks:0,days:b}}case"week":case"day":{let r,p,f;kc(i,e,t,n,s,l)<0?(p={year:i,month:e,day:t},r={year:n,month:s,day:l},f=1):(p={year:n,month:s,day:l},r={year:i,month:e,day:t},f=-1);let m=Ry(r.year,r.month,r.day)-Ry(p.year,p.month,p.day);for(let y=p.year;y<r.year;++y)m+=Ec(y)?366:365;let v=0;return u==="week"&&(v=Jr(m/7),m%=7),v*=f,m*=f,{years:0,months:0,weeks:v,days:m}}default:throw new Error("assert not reached")}}function dE(i,e,t,n,s,l,u,r,p,f,m,v){let y=u-i,_=r-e,b=p-t,C=f-n,E=m-s,S=v-l;const x=nl(0,0,0,0,y,_,b,C,E,S);y*=x,_*=x,b*=x,C*=x,E*=x,S*=x;let A=0;if({deltaDays:A,hour:y,minute:_,second:b,millisecond:C,microsecond:E,nanosecond:S}=Ol(y,_,b,C,E,S),A!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return y*=x,_*=x,b*=x,C*=x,E*=x,S*=x,{hours:y,minutes:_,seconds:b,milliseconds:C,microseconds:E,nanoseconds:S}}function W1(i,e,t,n,s){const l=he.subtract(e,i),u=he.remainder(l,he.BigInt(864e11)),r=he.subtract(l,u),p=pa(u,Q1[n]*t,s),f=he.add(r,p),m=he.toNumber(he.remainder(f,Nn)),v=he.toNumber(he.remainder(he.divide(f,Nn),Nn)),y=he.toNumber(he.remainder(he.divide(f,Qa),Nn));return{seconds:he.toNumber(he.divide(f,$l)),milliseconds:y,microseconds:v,nanoseconds:m}}function Y1(i,e,t,n,s,l,u,r,p,f,m,v,y,_,b,C,E,S,x,A,D){let T=i,k=e,N=t,{hours:W,minutes:Z,seconds:K,milliseconds:j,microseconds:V,nanoseconds:$}=dE(n,s,l,u,r,p,y,_,b,C,E,S);const L=nl(0,0,0,0,W,Z,K,j,V,$);kc(f,m,v,T,k,N)===-L&&({year:T,month:k,day:N}=kx(T,k,N-L),{hours:W,minutes:Z,seconds:K,milliseconds:j,microseconds:V,nanoseconds:$}=_a(-L,W,Z,K,j,V,$,A));const R=xo(T,k,N,x),G=xo(f,m,v,x),U=yx(D,Ta("day",A));let{years:B,months:H,weeks:q,days:ae}=Nc(x,R,G,U);return{days:ae,hours:W,minutes:Z,seconds:K,milliseconds:j,microseconds:V,nanoseconds:$}=_a(ae,W,Z,K,j,V,$,A),{years:B,months:H,weeks:q,days:ae,hours:W,minutes:Z,seconds:K,milliseconds:j,microseconds:V,nanoseconds:$}}function hE(i,e,t,n,s,l){const u=he.subtract(e,i);if(he.equal(u,kr))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const r=Ni("%Temporal.Instant%"),p=new r(i),f=new r(e),m=za(t,p,n),v=za(t,f,n);let{years:y,months:_,weeks:b,days:C}=Y1(X(m,si),X(m,di),X(m,gi),X(m,qi),X(m,Wi),X(m,Yi),X(m,Zi),X(m,Xi),X(m,Ki),X(v,si),X(v,di),X(v,gi),X(v,qi),X(v,Wi),X(v,Yi),X(v,Zi),X(v,Xi),X(v,Ki),n,s,l);const E=Ja(p,t,n,y,_,b,0,0,0,0,0,0,0);let S=he.subtract(e,E);const x=fs(E,t,n);({nanoseconds:S,days:C}=G1(S,x));const{hours:A,minutes:D,seconds:T,milliseconds:k,microseconds:N,nanoseconds:W}=_a(0,0,0,0,0,0,he.toNumber(S),"hour");return{years:y,months:_,weeks:b,days:C,hours:A,minutes:D,seconds:T,milliseconds:k,microseconds:N,nanoseconds:W}}function F2(i,e,t,n){const s=Qo(t);let l,u;[l,u]=i==="until"?[e,s]:[s,e];const r=cn(n),p=es(r,"smallestUnit","time","nanosecond"),f=Ta("second",p);let m=es(r,"largestUnit","time","auto");if(m==="auto"&&(m=f),Ta(m,p)!==m)throw new RangeError(`largestUnit ${m} cannot be smaller than smallestUnit ${p}`);const v=ta(r,"trunc"),y=Yl(r,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1),_=X(l,Li),b=X(u,Li);let C,E,{seconds:S,milliseconds:x,microseconds:A,nanoseconds:D}=W1(_,b,y,p,v);return{hours:C,minutes:E,seconds:S,milliseconds:x,microseconds:A,nanoseconds:D}=_a(0,0,0,S,x,A,D,m),new(Ni("%Temporal.Duration%"))(0,0,0,0,C,E,S,x,A,D)}function B2(i,e,t,n){const s=i==="since"?-1:1,l=Gn(t),u=X(e,kt),r=X(l,kt),p=$i(u),f=$i(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const m=cn(n),v=es(m,"smallestUnit","date","day"),y=Ta("day",v);let _=es(m,"largestUnit","date","auto");if(_==="auto"&&(_=y),Ta(_,v)!==_)throw new RangeError(`largestUnit ${_} cannot be smaller than smallestUnit ${v}`);let b=ta(m,"trunc");i==="since"&&(b=fm(b));const C=Yl(m,void 0,!1),E=yx(m,_);let{years:S,months:x,weeks:A,days:D}=Nc(u,e,l,E);return v==="day"&&C===1||({years:S,months:x,weeks:A,days:D}=Oc(S,x,A,D,0,0,0,0,0,0,C,v,b,e)),new(Ni("%Temporal.Duration%"))(s*S,s*x,s*A,s*D,0,0,0,0,0,0)}function $2(i,e,t,n){const s=i==="since"?-1:1,l=Bu(t),u=X(e,kt),r=X(l,kt),p=$i(u),f=$i(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const m=cn(n),v=es(m,"smallestUnit","datetime","nanosecond"),y=Ta("day",v);let _=es(m,"largestUnit","datetime","auto");if(_==="auto"&&(_=y),Ta(_,v)!==_)throw new RangeError(`largestUnit ${_} cannot be smaller than smallestUnit ${v}`);let b=ta(m,"trunc");i==="since"&&(b=fm(b));const C=N1(m,v);let{years:E,months:S,weeks:x,days:A,hours:D,minutes:T,seconds:k,milliseconds:N,microseconds:W,nanoseconds:Z}=Y1(X(e,si),X(e,di),X(e,gi),X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki),X(l,si),X(l,di),X(l,gi),X(l,qi),X(l,Wi),X(l,Yi),X(l,Zi),X(l,Xi),X(l,Ki),u,_,m);const K=Lh(e);return{years:E,months:S,weeks:x,days:A,hours:D,minutes:T,seconds:k,milliseconds:N,microseconds:W,nanoseconds:Z}=Oc(E,S,x,A,D,T,k,N,W,Z,C,v,b,K),{days:A,hours:D,minutes:T,seconds:k,milliseconds:N,microseconds:W,nanoseconds:Z}=_a(A,D,T,k,N,W,Z,_),new(Ni("%Temporal.Duration%"))(s*E,s*S,s*x,s*A,s*D,s*T,s*k,s*N,s*W,s*Z)}function U2(i,e,t,n){const s=i==="since"?-1:1,l=Bl(t),u=cn(n);let r=es(u,"largestUnit","time","auto");r==="auto"&&(r="hour");const p=es(u,"smallestUnit","time","nanosecond");if(Ta(r,p)!==r)throw new RangeError(`largestUnit ${r} cannot be smaller than smallestUnit ${p}`);let f=ta(u,"trunc");i==="since"&&(f=fm(f));const m=Yl(u,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1);let{hours:v,minutes:y,seconds:_,milliseconds:b,microseconds:C,nanoseconds:E}=dE(X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki),X(l,qi),X(l,Wi),X(l,Yi),X(l,Zi),X(l,Xi),X(l,Ki));return{hours:v,minutes:y,seconds:_,milliseconds:b,microseconds:C,nanoseconds:E}=Oc(0,0,0,0,v,y,_,b,C,E,m,p,f),{hours:v,minutes:y,seconds:_,milliseconds:b,microseconds:C,nanoseconds:E}=_a(0,v,y,_,b,C,E,r),new(Ni("%Temporal.Duration%"))(0,0,0,0,s*v,s*y,s*_,s*b,s*C,s*E)}function V2(i,e,t,n){const s=i==="since"?-1:1,l=vf(t),u=X(e,kt),r=X(l,kt),p=$i(u),f=$i(r);if(p!==f)throw new RangeError(`cannot compute difference between months of ${p} and ${f} calendars`);const m=cn(n),v=Zh.reduce((W,[Z,K,j])=>(j==="date"&&K!=="week"&&K!=="day"&&W.push(K,Z),W),[]),y=es(m,"smallestUnit","date","month");if(y==="week"||y==="day")throw new RangeError(`smallestUnit must be one of ${v.join(", ")}, not ${y}`);let _=es(m,"largestUnit","date","auto");if(_==="week"||_==="day")throw new RangeError(`largestUnit must be one of ${v.join(", ")}, not ${_}`);if(_==="auto"&&(_="year"),Ta(_,y)!==_)throw new RangeError(`largestUnit ${_} cannot be smaller than smallestUnit ${y}`);let b=ta(m,"trunc");i==="since"&&(b=fm(b));const C=Yl(m,void 0,!1),E=jr(u,["monthCode","year"]),S=on(l,E,[]);S.day=1;const x=on(e,E,[]);x.day=1;const A=zc(u,S),D=zc(u,x),T=yx(m,_);let{years:k,months:N}=Nc(u,D,A,T);return y==="month"&&C===1||({years:k,months:N}=Oc(k,N,0,0,0,0,0,0,0,0,C,y,b,D)),new(Ni("%Temporal.Duration%"))(s*k,s*N,0,0,0,0,0,0,0,0)}function G2(i,e,t,n){const s=i==="since"?-1:1,l=bf(t),u=X(e,kt),r=X(l,kt),p=$i(u),f=$i(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const m=cn(n),v=es(m,"smallestUnit","datetime","nanosecond"),y=Ta("hour",v);let _=es(m,"largestUnit","datetime","auto");if(_==="auto"&&(_=y),Ta(_,v)!==_)throw new RangeError(`largestUnit ${_} cannot be smaller than smallestUnit ${v}`);let b=ta(m,"trunc");i==="since"&&(b=fm(b));const C=N1(m,v),E=X(e,Li),S=X(l,Li);let x,A,D,T,k,N,W,Z,K,j;if(_!=="year"&&_!=="month"&&_!=="week"&&_!=="day")x=0,A=0,D=0,T=0,{seconds:W,milliseconds:Z,microseconds:K,nanoseconds:j}=W1(E,S,C,v,b),{hours:k,minutes:N,seconds:W,milliseconds:Z,microseconds:K,nanoseconds:j}=_a(0,0,0,W,Z,K,j,_);else{const V=X(e,Ln);if(!eE(V,X(l,Ln)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const $=yx(m,_);({years:x,months:A,weeks:D,days:T,hours:k,minutes:N,seconds:W,milliseconds:Z,microseconds:K,nanoseconds:j}=hE(E,S,V,u,_,$)),{years:x,months:A,weeks:D,days:T,hours:k,minutes:N,seconds:W,milliseconds:Z,microseconds:K,nanoseconds:j}=Oc(x,A,D,T,k,N,W,Z,K,j,C,v,b,e),{years:x,months:A,weeks:D,days:T,hours:k,minutes:N,seconds:W,milliseconds:Z,microseconds:K,nanoseconds:j}=mE(x,A,D,T,k,N,W,Z,K,j,C,v,b,e)}return new(Ni("%Temporal.Duration%"))(s*x,s*A,s*D,s*T,s*k,s*N,s*W,s*Z,s*K,s*j)}function Wu(i,e,t,n,s,l,u,r){let p=i,f=e,m=t,v=l,y=u;return p+=n,f+=s,{year:p,month:f}=cy(p,f),{year:p,month:f,day:m}=My(p,f,m,r),y+=7*v,m+=y,{year:p,month:f,day:m}=kx(p,f,m),{year:p,month:f,day:m}}function pE(i,e,t,n,s,l,u,r,p,f,m,v){let y=i,_=e,b=t,C=n,E=s,S=l;y+=u,_+=r,b+=p,C+=f,E+=m,S+=v;let x=0;return{deltaDays:x,hour:y,minute:_,second:b,millisecond:C,microsecond:E,nanosecond:S}=Ol(y,_,b,C,E,S),{deltaDays:x,hour:y,minute:_,second:b,millisecond:C,microsecond:E,nanosecond:S}}function fE(i,e,t,n,s,l,u,r,p,f,m,v,y,_,b,C,E,S,x,A,D){const T=Ta(bb(i,e,t,n,s,l,u,r,p,f),bb(m,v,y,_,b,C,E,S,x,A));let k,N,W,Z,K,j,V,$,L,R;if(D)if(yn(D)){const G=Ni("%Temporal.Duration%"),U=X(D,kt),B=new G(i,e,t,n,0,0,0,0,0,0),H=new G(m,v,y,_,0,0,0,0,0,0),q=U.dateAdd,ae=Us(U,D,B,void 0,q),fe=Us(U,ae,H,void 0,q),re=Ta("day",T),ce=bs(null);ce.largestUnit=re,{years:k,months:N,weeks:W,days:Z}=Nc(U,D,fe,ce),{days:Z,hours:K,minutes:j,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=_a(Z,s+b,l+C,u+E,r+S,p+x,f+A,T)}else{const G=Ni("%Temporal.Instant%"),U=X(D,Ln),B=X(D,kt),H=Ja(X(D,As),U,B,i,e,t,n,s,l,u,r,p,f),q=Ja(new G(H),U,B,m,v,y,_,b,C,E,S,x,A);T!=="year"&&T!=="month"&&T!=="week"&&T!=="day"?(k=0,N=0,W=0,Z=0,{seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=W1(X(D,Li),q,1,"nanosecond","halfExpand"),{hours:K,minutes:j,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=_a(0,0,0,V,$,L,R,T)):{years:k,months:N,weeks:W,days:Z,hours:K,minutes:j,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=hE(X(D,Li),q,U,B,T,bs(null))}else{if(T==="year"||T==="month"||T==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");k=N=W=0,{days:Z,hours:K,minutes:j,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=_a(n+_,s+b,l+C,u+E,r+S,p+x,f+A,T)}return Mx(k,N,W,Z,K,j,V,$,L,R),{years:k,months:N,weeks:W,days:Z,hours:K,minutes:j,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}}function wb(i,e,t,n,s,l,u){let r=kr;r=he.add(r,he.BigInt(u)),r=he.add(r,he.multiply(he.BigInt(l),Nn)),r=he.add(r,he.multiply(he.BigInt(s),Qa)),r=he.add(r,he.multiply(he.BigInt(n),$l)),r=he.add(r,he.multiply(he.BigInt(t),he.BigInt(6e10))),r=he.add(r,he.multiply(he.BigInt(e),he.BigInt(36e11)));const p=he.add(i,r);return Ou(p),p}function Cb(i,e,t,n,s,l,u,r,p,f,m,v,y,_,b,C,E,S,x,A,D){let T=_,{deltaDays:k,hour:N,minute:W,second:Z,millisecond:K,microsecond:j,nanosecond:V}=pE(n,s,l,u,r,p,b,C,E,S,x,A);T+=k;const $=Ni("%Temporal.Duration%"),L=Us(f,xo(i,e,t,f),new $(m,v,y,T,0,0,0,0,0,0),D);return{year:X(L,si),month:X(L,di),day:X(L,gi),hour:N,minute:W,second:Z,millisecond:K,microsecond:j,nanosecond:V}}function Ja(i,e,t,n,s,l,u,r,p,f,m,v,y,_){const b=Ni("%Temporal.Duration%");if(nl(n,s,l,u,0,0,0,0,0,0)===0)return wb(X(i,Li),r,p,f,m,v,y);const C=za(e,i,t),E=Us(t,xo(X(C,si),X(C,di),X(C,gi),t),new b(n,s,l,u,0,0,0,0,0,0),_),S=ga(X(E,si),X(E,di),X(E,gi),X(C,qi),X(C,Wi),X(C,Yi),X(C,Zi),X(C,Xi),X(C,Ki),t);return wb(X(Vs(e,S,"compatible"),Li),r,p,f,m,v,y)}function H2(i,e,t,n){const s=i==="subtract"?-1:1;let{years:l,months:u,weeks:r,days:p,hours:f,minutes:m,seconds:v,milliseconds:y,microseconds:_,nanoseconds:b}=fd(t);const C=ly(cn(n));return{years:l,months:u,weeks:r,days:p,hours:f,minutes:m,seconds:v,milliseconds:y,microseconds:_,nanoseconds:b}=fE(X(e,Ls),X(e,as),X(e,Qs),X(e,Ns),X(e,zs),X(e,js),X(e,Os),X(e,Fs),X(e,Bs),X(e,$s),s*l,s*u,s*r,s*p,s*f,s*m,s*v,s*y,s*_,s*b,C),new(Ni("%Temporal.Duration%"))(l,u,r,p,f,m,v,y,_,b)}function q2(i,e,t){const n=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:r,microseconds:p,nanoseconds:f}=function(y,_){let b=fd(y);for(const C of _)if(b[C]!==0)throw new RangeError(`Duration field ${C} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return b}(t,["years","months","weeks","days"]),m=wb(X(e,Li),n*s,n*l,n*u,n*r,n*p,n*f);return new(Ni("%Temporal.Instant%"))(m)}function W2(i,e,t,n){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:r,days:p,hours:f,minutes:m,seconds:v,milliseconds:y,microseconds:_,nanoseconds:b}=fd(t),C=cn(n),E=X(e,kt),{year:S,month:x,day:A,hour:D,minute:T,second:k,millisecond:N,microsecond:W,nanosecond:Z}=Cb(X(e,si),X(e,di),X(e,gi),X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki),E,s*l,s*u,s*r,s*p,s*f,s*m,s*v,s*y,s*_,s*b,C);return ga(S,x,A,D,T,k,N,W,Z,E)}function Y2(i,e,t){const n=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:r,microseconds:p,nanoseconds:f}=fd(t);let{hour:m,minute:v,second:y,millisecond:_,microsecond:b,nanosecond:C}=pE(X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki),n*s,n*l,n*u,n*r,n*p,n*f);return{hour:m,minute:v,second:y,millisecond:_,microsecond:b,nanosecond:C}=gx(m,v,y,_,b,C,"reject"),new(Ni("%Temporal.PlainTime%"))(m,v,y,_,b,C)}function Z2(i,e,t,n){let s=fd(t);i==="subtract"&&(s={years:-s.years,months:-s.months,weeks:-s.weeks,days:-s.days,hours:-s.hours,minutes:-s.minutes,seconds:-s.seconds,milliseconds:-s.milliseconds,microseconds:-s.microseconds,nanoseconds:-s.nanoseconds});let{years:l,months:u,weeks:r,days:p,hours:f,minutes:m,seconds:v,milliseconds:y,microseconds:_,nanoseconds:b}=s;({days:p}=_a(p,f,m,v,y,_,b,"day"));const C=cn(n),E=X(e,kt),S=jr(E,["monthCode","year"]),x=on(e,S,[]),A=nl(l,u,r,p,0,0,0,0,0,0);x.day=A<0?jf(vm(E,e)):1;const D=zc(E,x),T=new(Ni("%Temporal.Duration%"))(l,u,r,p,0,0,0,0,0,0),k=FS(bs(null),C);return rd(E,on(Us(E,D,T,C),S,[]),k)}function X2(i,e,t,n){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:r,days:p,hours:f,minutes:m,seconds:v,milliseconds:y,microseconds:_,nanoseconds:b}=fd(t),C=cn(n),E=X(e,Ln),S=X(e,kt);return fs(Ja(X(e,As),E,S,s*l,s*u,s*r,s*p,s*f,s*m,s*v,s*y,s*_,s*b,C),E,S)}function pa(i,e,t){if(e===1)return i;let{quotient:n,remainder:s}=Zr(i,he.BigInt(e));if(he.equal(s,kr))return i;const l=he.lessThan(s,kr)?-1:1;switch(t){case"ceil":l>0&&(n=he.add(n,he.BigInt(l)));break;case"floor":l<0&&(n=he.add(n,he.BigInt(l)));break;case"trunc":break;case"halfExpand":he.toNumber(L1(he.multiply(s,he.BigInt(2))))>=e&&(n=he.add(n,he.BigInt(l)))}return he.multiply(n,he.BigInt(e))}function Ly(i,e,t,n){let s=he.remainder(i,he.BigInt(864e11));he.lessThan(s,kr)&&(s=he.add(s,he.BigInt(864e11)));const l=he.subtract(i,s),u=pa(s,Q1[t]*e,n);return he.add(l,u)}function Z1(i,e,t,n,s,l,u,r,p,f,m,v,y=864e11){const{deltaDays:_,hour:b,minute:C,second:E,millisecond:S,microsecond:x,nanosecond:A}=X1(n,s,l,u,r,p,f,m,v,y),{year:D,month:T,day:k}=kx(i,e,t+_);return{year:D,month:T,day:k,hour:b,minute:C,second:E,millisecond:S,microsecond:x,nanosecond:A}}function X1(i,e,t,n,s,l,u,r,p,f=864e11){let m=kr;switch(r){case"day":case"hour":m=he.BigInt(i);case"minute":m=he.add(he.multiply(m,qu),he.BigInt(e));case"second":m=he.add(he.multiply(m,qu),he.BigInt(t));case"millisecond":m=he.add(he.multiply(m,Nn),he.BigInt(n));case"microsecond":m=he.add(he.multiply(m,Nn),he.BigInt(s));case"nanosecond":m=he.add(he.multiply(m,Nn),he.BigInt(l))}const v=r==="day"?f:Q1[r],y=pa(m,v*u,p),_=he.toNumber(he.divide(y,he.BigInt(v)));switch(r){case"day":return{deltaDays:_,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Ol(_,0,0,0,0,0);case"minute":return Ol(i,_,0,0,0,0);case"second":return Ol(i,e,_,0,0,0);case"millisecond":return Ol(i,e,t,_,0,0);case"microsecond":return Ol(i,e,t,n,_,0);case"nanosecond":return Ol(i,e,t,n,s,_);default:throw new Error(`Invalid unit ${r}`)}}function uy(i,e){return q1(X(i,si),X(i,di),X(i,gi),X(e,si),X(e,di),X(e,gi),"day").days}function ks(i,e,t){const n=Us(i,e,t,void 0);return{relativeTo:n,days:uy(e,n)}}function Tb(i,e,t,n,s){const l=X(i,Ln),u=X(i,kt);return fs(Ja(X(i,As),l,u,e,t,n,s,0,0,0,0,0,0),l,u)}function mE(i,e,t,n,s,l,u,r,p,f,m,v,y,_){let b=i,C=e,E=t,S=n,x=s,A=l,D=u,T=r,k=p,N=f;if(!wi(_)||v==="year"||v==="month"||v==="week"||v==="day"||v==="nanosecond"&&m===1)return{years:b,months:C,weeks:E,days:S,hours:x,minutes:A,seconds:D,milliseconds:T,microseconds:k,nanoseconds:N};let W=Nh(0,x,A,D,T,k,N,0);const Z=Rf(he.toNumber(W)),K=X(_,Ln),j=X(_,kt),V=Ja(X(_,As),K,j,b,C,E,S,0,0,0,0,0,0),$=Ja(new(Ni("%Temporal.Instant%"))(V),K,j,0,0,0,Z,0,0,0,0,0,0),L=he.subtract($,V);return he.greaterThanOrEqual(he.multiply(he.subtract(W,L),he.BigInt(Z)),kr)&&({years:b,months:C,weeks:E,days:S}=fE(b,C,E,S,0,0,0,0,0,0,0,0,0,Z,0,0,0,0,0,0,_),W=Ly(he.subtract(W,L),m,v,y),{hours:x,minutes:A,seconds:D,milliseconds:T,microseconds:k,nanoseconds:N}=_a(0,0,0,0,0,0,he.toNumber(W),"hour")),{years:b,months:C,weeks:E,days:S,hours:x,minutes:A,seconds:D,milliseconds:T,microseconds:k,nanoseconds:N}}function Oc(i,e,t,n,s,l,u,r,p,f,m,v,y,_){let b=i,C=e,E=t,S=n,x=s,A=l,D=u,T=r,k=p,N=he.BigInt(f);const W=Ni("%Temporal.Duration%");let Z,K,j,V,$=_;if($){if(wi($))K=$,$=Gn($);else if(!yn($))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Z=X($,kt)}if(v==="year"||v==="month"||v==="week"||v==="day"){let L,R,G;N=Nh(0,x,A,D,T,k,f,0),K&&(L=Tb(K,b,C,E,S)),{days:R,nanoseconds:N,dayLengthNs:G}=G1(N,L),j=he.BigInt(G),S+=R,x=A=D=T=k=0}switch(v){case"year":{if(!Z)throw new RangeError("A starting point is required for years rounding");const L=new W(b),R=Z.dateAdd,G=Us(Z,$,L,void 0,R),U=Us(Z,$,new W(b,C,E),void 0,R);$=G,S+=uy(G,U);const B=Us(Z,$,{days:S},void 0,R),H=bs(null);H.largestUnit="year";const q=Nc(Z,$,B,H).years;b+=q;const ae=$;$=Us(Z,$,{years:q},void 0,R),S-=uy(ae,$);const fe=new W(S<0?-1:1);let{days:re}=ks(Z,$,fe);re=En(re);const ce=he.multiply(he.BigInt(re),j);N=he.add(he.add(he.multiply(ce,he.BigInt(b)),he.multiply(he.BigInt(S),j)),N);const ke=pa(N,he.toNumber(he.multiply(ce,he.BigInt(m))),y);V=he.toNumber(N)/he.toNumber(ce),b=he.toNumber(he.divide(ke,ce)),N=kr,C=E=S=0;break}case"month":{if(!Z)throw new RangeError("A starting point is required for months rounding");const L=new W(b,C),R=Z.dateAdd,G=Us(Z,$,L,void 0,R),U=Us(Z,$,new W(b,C,E),void 0,R);$=G,S+=uy(G,U);const B=Rf(S),H=new W(0,S<0?-1:1);let q;for({relativeTo:$,days:q}=ks(Z,$,H);En(S)>=En(q);)C+=B,S-=q,{relativeTo:$,days:q}=ks(Z,$,H);q=En(q);const ae=he.multiply(he.BigInt(q),j);N=he.add(he.add(he.multiply(ae,he.BigInt(C)),he.multiply(he.BigInt(S),j)),N);const fe=pa(N,he.toNumber(he.multiply(ae,he.BigInt(m))),y);V=he.toNumber(N)/he.toNumber(ae),C=he.toNumber(he.divide(fe,ae)),N=kr,E=S=0;break}case"week":{if(!Z)throw new RangeError("A starting point is required for weeks rounding");const L=Rf(S),R=new W(0,0,S<0?-1:1);let G;for({relativeTo:$,days:G}=ks(Z,$,R);En(S)>=En(G);)E+=L,S-=G,{relativeTo:$,days:G}=ks(Z,$,R);G=En(G);const U=he.multiply(he.BigInt(G),j);N=he.add(he.add(he.multiply(U,he.BigInt(E)),he.multiply(he.BigInt(S),j)),N);const B=pa(N,he.toNumber(he.multiply(U,he.BigInt(m))),y);V=he.toNumber(N)/he.toNumber(U),E=he.toNumber(he.divide(B,U)),N=kr,S=0;break}case"day":{const L=j;N=he.add(he.multiply(L,he.BigInt(S)),N);const R=pa(N,he.toNumber(he.multiply(L,he.BigInt(m))),y);V=he.toNumber(N)/he.toNumber(L),S=he.toNumber(he.divide(R,L)),N=kr;break}case"hour":{let R=he.multiply(he.BigInt(x),he.BigInt(36e11));R=he.add(R,he.multiply(he.BigInt(A),he.BigInt(6e10))),R=he.add(R,he.multiply(he.BigInt(D),$l)),R=he.add(R,he.multiply(he.BigInt(T),Qa)),R=he.add(R,he.multiply(he.BigInt(k),Nn)),R=he.add(R,N),V=he.toNumber(R)/36e11;const G=pa(R,36e11*m,y);x=he.toNumber(he.divide(G,he.BigInt(36e11))),N=kr,A=D=T=k=0;break}case"minute":{let R=he.multiply(he.BigInt(A),he.BigInt(6e10));R=he.add(R,he.multiply(he.BigInt(D),$l)),R=he.add(R,he.multiply(he.BigInt(T),Qa)),R=he.add(R,he.multiply(he.BigInt(k),Nn)),R=he.add(R,N),V=he.toNumber(R)/6e10;const G=pa(R,6e10*m,y);A=he.toNumber(he.divide(G,he.BigInt(6e10))),N=kr,D=T=k=0;break}case"second":{let R=he.multiply(he.BigInt(D),$l);R=he.add(R,he.multiply(he.BigInt(T),Qa)),R=he.add(R,he.multiply(he.BigInt(k),Nn)),R=he.add(R,N),V=he.toNumber(R)/1e9;const G=pa(R,1e9*m,y);D=he.toNumber(he.divide(G,he.BigInt(1e9))),N=kr,T=k=0;break}case"millisecond":{let R=he.multiply(he.BigInt(T),Qa);R=he.add(R,he.multiply(he.BigInt(k),Nn)),R=he.add(R,N),V=he.toNumber(R)/1e6;const G=pa(R,1e6*m,y);T=he.toNumber(he.divide(G,he.BigInt(1e6))),N=kr,k=0;break}case"microsecond":{let R=he.multiply(he.BigInt(k),Nn);R=he.add(R,N),V=he.toNumber(R)/1e3;const G=pa(R,1e3*m,y);k=he.toNumber(he.divide(G,he.BigInt(1e3))),N=kr;break}case"nanosecond":V=he.toNumber(N),N=pa(N,m,y)}return{years:b,months:C,weeks:E,days:S,hours:x,minutes:A,seconds:D,milliseconds:T,microseconds:k,nanoseconds:he.toNumber(N),total:V}}function kc(i,e,t,n,s,l){for(const[u,r]of[[i,n],[e,s],[t,l]])if(u!==r)return Yu(u-r);return 0}function lh(i,e){let t=i%e;return sD(t,-0)?0:(t<0&&(t+=e),t)}function Ny(i){const e=Sf(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function Sf(i){if(i instanceof he)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=D1(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return he.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?R1:kr}}const K1=(()=>{let i=he.BigInt(Date.now()%1e6);return()=>{const e=he.BigInt(Date.now()),t=he.add(he.multiply(e,Qa),i);return i=he.remainder(e,Qa),he.greaterThan(t,Nf)?Nf:he.lessThan(t,Lf)?Lf:t}})();function Yu(i){return i<0?-1:i>0?1:i}function cn(i){if(i===void 0)return bs(null);if(Kn(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function zh(i,e){const t=bs(null);return t[i]=e,t}function Fc(i,e,t,n){let s=i[e];if(s!==void 0){if(s=$i(s),!t.includes(s))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${s}`);return s}return n}function gE(i){return jS.call(lD,i)}const yE=new RegExp(`^${LS.source}$`);function xE(i,e,t,n=i(e),s=i(t)){let l=he.BigInt(e),u=he.BigInt(t),r=n,p=s;for(;he.greaterThan(he.subtract(u,l),R1);){const f=he.divide(he.add(l,u),he.BigInt(2)),m=i(f);if(m===r)l=f,r=m;else{if(m!==p)throw new Error(`invalid state in bisection ${r} - ${m} - ${p}`);u=f,p=m}}return u}const Q1={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},vE=Symbol("date"),bE=Symbol("ym"),_E=Symbol("md"),wE=Symbol("time"),CE=Symbol("datetime"),TE=Symbol("zoneddatetime"),SE=Symbol("instant"),kh=Symbol("original"),Sb=Symbol("timezone"),dy=Symbol("timezone-id-given"),Ia=Symbol("calendar-id"),EE=Symbol("locale"),Eb=Symbol("options"),Ef=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),Zu=globalThis.Intl.DateTimeFormat,ol=Object.assign,pD=Object.prototype.hasOwnProperty,fD=Reflect.apply;function Pu(i,e){let t=i[e];return typeof t=="function"&&(t=new Zu(i[EE],t(i[Eb])),i[e]=t),t}function of(i){let e=i[Sb];return typeof e=="string"&&(e=Gs(e),i[Sb]=e),e}function ad(i,e={}){if(!(this instanceof ad))return new ad(i,e);const t=e!==void 0,n=t?ol({},e):{},s=new Zu(i,n),l=s.resolvedOptions();if(t){const u=ol({},l);for(const r in u)fD(pD,n,[r])||delete u[r];this[Eb]=u}else this[Eb]=n;this[dy]=n.timeZone?n.timeZone:null,this[EE]=l.locale,this[kh]=s,this[Sb]=l.timeZone,this[Ia]=l.calendar,this[vE]=xD,this[bE]=gD,this[_E]=yD,this[wE]=mD,this[CE]=vD,this[TE]=bD,this[SE]=_D}Object.defineProperty(ad,"name",{writable:!0,value:"DateTimeFormat"}),ad.supportedLocalesOf=function(i,e){return Zu.supportedLocalesOf(i,e)};const ov={resolvedOptions:Ef(function(){return this[kh].resolvedOptions()}),format:Ef(function(e,...t){let{instant:n,formatter:s,timeZone:l}=Ah(e,this);return n&&s?(s=zy(s,l),s.format(n.epochMilliseconds)):this[kh].format(e,...t)}),formatRange:Ef(function(e,t){if(jh(e)||jh(t)){if(!kE(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:s,timeZone:l}=Ah(e,this),{instant:u,formatter:r,timeZone:p}=Ah(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(n&&u&&s&&r&&s===r)return zy(s,l).formatRange(n.epochMilliseconds,u.epochMilliseconds)}return this[kh].formatRange(e,t)})};"formatToParts"in Zu.prototype&&(ov.formatToParts=Ef(function(e,...t){let{instant:n,formatter:s,timeZone:l}=Ah(e,this);return n&&s?(s=zy(s,l),s.formatToParts(n.epochMilliseconds)):this[kh].formatToParts(e,...t)})),"formatRangeToParts"in Zu.prototype&&(ov.formatRangeToParts=Ef(function(e,t){if(jh(e)||jh(t)){if(!kE(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:s,timeZone:l}=Ah(e,this),{instant:u,formatter:r,timeZone:p}=Ah(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(n&&u&&s&&r&&s===r)return zy(s,l).formatRangeToParts(n.epochMilliseconds,u.epochMilliseconds)}return this[kh].formatRangeToParts(e,t)})),ad.prototype=Object.create(Zu.prototype,ov),Object.defineProperty(ad,"prototype",{writable:!1,enumerable:!1,configurable:!1});const gd=ad;function zy(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new Zu(t.locale,{...t,timeZone:e}))}function _m(i={},e={}){const t=ol({},i);for(const n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[n]=n in e?e[n]:t[n],t[n]!==!1&&t[n]!==void 0||delete t[n];return t}function mD(i){let e=_m(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return Ix(e)||(e=ol({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function gD(i){let e=_m(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=ol(e,{year:"numeric",month:"numeric"})),e}function yD(i){let e=_m(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=ol({},e,{month:"numeric",day:"numeric"})),e}function xD(i){let e=_m(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Px(e)||(e=ol({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function vD(i){let e=_m(i,{timeZoneName:!1});return Ix(e)||Px(e)||(e=ol({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function bD(i){let e=i;return Ix(e)||Px(e)||(e=ol({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function _D(i){let e=i;return Ix(e)||Px(e)||(e=ol({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Px(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function Ix(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function jh(i){return yn(i)||xr(i)||en(i)||wi(i)||Pn(i)||os(i)||Vr(i)}function kE(i,e){return!(!jh(i)||!jh(e))&&!(xr(i)&&!xr(e))&&!(yn(i)&&!yn(e))&&!(en(i)&&!en(e))&&!(wi(i)&&!wi(e))&&!(Pn(i)&&!Pn(e))&&!(os(i)&&!os(e))&&!(Vr(i)&&!Vr(e))}function Ah(i,e){const t=Ni("%Temporal.PlainDateTime%");if(xr(i)){const n=new t(1970,1,1,X(i,qi),X(i,Wi),X(i,Yi),X(i,Zi),X(i,Xi),X(i,Ki),e[Ia]);return{instant:Vs(of(e),n,"compatible"),formatter:Pu(e,wE)}}if(Pn(i)){const n=X(i,si),s=X(i,di),l=X(i,gi),u=$i(X(i,kt));if(u!==e[Ia])throw new RangeError(`cannot format PlainYearMonth with calendar ${u} in locale with calendar ${e[Ia]}`);const r=new t(n,s,l,12,0,0,0,0,0,u);return{instant:Vs(of(e),r,"compatible"),formatter:Pu(e,bE)}}if(os(i)){const n=X(i,si),s=X(i,di),l=X(i,gi),u=$i(X(i,kt));if(u!==e[Ia])throw new RangeError(`cannot format PlainMonthDay with calendar ${u} in locale with calendar ${e[Ia]}`);const r=new t(n,s,l,12,0,0,0,0,0,u);return{instant:Vs(of(e),r,"compatible"),formatter:Pu(e,_E)}}if(yn(i)){const n=X(i,si),s=X(i,di),l=X(i,gi),u=$i(X(i,kt));if(u!=="iso8601"&&u!==e[Ia])throw new RangeError(`cannot format PlainDate with calendar ${u} in locale with calendar ${e[Ia]}`);const r=new t(n,s,l,12,0,0,0,0,0,e[Ia]);return{instant:Vs(of(e),r,"compatible"),formatter:Pu(e,vE)}}if(en(i)){const n=X(i,si),s=X(i,di),l=X(i,gi),u=X(i,qi),r=X(i,Wi),p=X(i,Yi),f=X(i,Zi),m=X(i,Xi),v=X(i,Ki),y=$i(X(i,kt));if(y!=="iso8601"&&y!==e[Ia])throw new RangeError(`cannot format PlainDateTime with calendar ${y} in locale with calendar ${e[Ia]}`);let _=i;return y==="iso8601"&&(_=new t(n,s,l,u,r,p,f,m,v,e[Ia])),{instant:Vs(of(e),_,"compatible"),formatter:Pu(e,CE)}}if(wi(i)){const n=$i(X(i,kt));if(n!=="iso8601"&&n!==e[Ia])throw new RangeError(`cannot format ZonedDateTime with calendar ${n} in locale with calendar ${e[Ia]}`);const s=$i(X(i,Ln));if(e[dy]&&e[dy]!==s)throw new RangeError(`timeZone option ${e[dy]} doesn't match actual time zone ${s}`);return{instant:X(i,As),formatter:Pu(e,TE),timeZone:s}}return Vr(i)?{instant:i,formatter:Pu(e,SE)}:{}}class So{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=Sf(e);Ou(t),pl(this),tn(this,Li,t)}get epochSeconds(){if(!Vr(this))throw new TypeError("invalid receiver");const e=X(this,Li);return he.toNumber(he.divide(e,$l))}get epochMilliseconds(){if(!Vr(this))throw new TypeError("invalid receiver");const e=he.BigInt(X(this,Li));return he.toNumber(he.divide(e,Qa))}get epochMicroseconds(){if(!Vr(this))throw new TypeError("invalid receiver");const e=he.BigInt(X(this,Li));return Ny(he.divide(e,Nn))}get epochNanoseconds(){if(!Vr(this))throw new TypeError("invalid receiver");return Ny(he.BigInt(X(this,Li)))}add(e){if(!Vr(this))throw new TypeError("invalid receiver");return q2("add",this,e)}subtract(e){if(!Vr(this))throw new TypeError("invalid receiver");return q2("subtract",this,e)}until(e,t){if(!Vr(this))throw new TypeError("invalid receiver");return F2("until",this,e,t)}since(e,t){if(!Vr(this))throw new TypeError("invalid receiver");return F2("since",this,e,t)}round(e){if(!Vr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?zh("smallestUnit",e):cn(e),n=es(t,"smallestUnit","time",id),s=ta(t,"halfExpand"),l=Yl(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[n],!0),u=Ly(X(this,Li),l,n,s);return new So(u)}equals(e){if(!Vr(this))throw new TypeError("invalid receiver");const t=Qo(e),n=X(this,Li),s=X(t,Li);return he.equal(he.BigInt(n),he.BigInt(s))}toString(e){if(!Vr(this))throw new TypeError("invalid receiver");const t=cn(e);let n=t.timeZone;n!==void 0&&(n=Gs(n));const{precision:s,unit:l,increment:u}=gm(t),r=ta(t,"trunc"),p=Ly(X(this,Li),u,l,r);return I2(new So(p),n,s)}toJSON(){if(!Vr(this))throw new TypeError("invalid receiver");return I2(this,void 0,"auto")}toLocaleString(e,t){if(!Vr(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Vr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const n=cs(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const l=Gs(s);return fs(X(this,Li),l,n)}toZonedDateTimeISO(e){let t=e;if(!Vr(this))throw new TypeError("invalid receiver");if(Kn(t)){const l=t.timeZone;l!==void 0&&(t=l)}const n=Gs(t),s=Pr();return fs(X(this,Li),n,s)}static fromEpochSeconds(e){const t=zf(e),n=he.multiply(he.BigInt(t),$l);return Ou(n),new So(n)}static fromEpochMilliseconds(e){const t=zf(e),n=he.multiply(he.BigInt(t),Qa);return Ou(n),new So(n)}static fromEpochMicroseconds(e){const t=Sf(e),n=he.multiply(t,Nn);return Ou(n),new So(n)}static fromEpochNanoseconds(e){const t=Sf(e);return Ou(t),new So(t)}static from(e){return Vr(e)?new So(X(e,Li)):Qo(e)}static compare(e,t){const n=Qo(e),s=Qo(t),l=X(n,Li),u=X(s,Li);return he.lessThan(l,u)?-1:he.greaterThan(l,u)?1:0}}hl(So,"Temporal.Instant");const jy=Array.prototype.includes,wD=Array.prototype.push,CD=globalThis.Intl.DateTimeFormat,TD=Array.prototype.sort,SD=Math.abs,ED=Math.floor,kb=Object.entries,K2=Object.keys,vr={};class Oy{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=$i(e);if(!gE(t))throw new RangeError(`invalid calendar identifier ${t}`);pl(this),tn(this,Sr,t)}get id(){if(!Tr(this))throw new TypeError("invalid receiver");return $i(this)}dateFromFields(e,t){if(!Tr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid fields");const n=cn(t);return vr[X(this,Sr)].dateFromFields(e,n,this)}yearMonthFromFields(e,t){if(!Tr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid fields");const n=cn(t);return vr[X(this,Sr)].yearMonthFromFields(e,n,this)}monthDayFromFields(e,t){if(!Tr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid fields");const n=cn(t);return vr[X(this,Sr)].monthDayFromFields(e,n,this)}fields(e){if(!Tr(this))throw new TypeError("invalid receiver");const t=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const s of e){if(typeof s!="string")throw new TypeError("invalid fields");if(!n.has(s))throw new RangeError(`invalid field name ${s}`);n.delete(s),wD.call(t,s)}return vr[X(this,Sr)].fields(t)}mergeFields(e,t){if(!Tr(this))throw new TypeError("invalid receiver");return vr[X(this,Sr)].mergeFields(e,t)}dateAdd(e,t,n){if(!Tr(this))throw new TypeError("invalid receiver");const s=Gn(e),l=Eh(t),u=Mr(cn(n)),{days:r}=_a(X(l,Ns),X(l,zs),X(l,js),X(l,Os),X(l,Fs),X(l,Bs),X(l,$s),"day");return vr[X(this,Sr)].dateAdd(s,X(l,Ls),X(l,as),X(l,Qs),r,u,this)}dateUntil(e,t,n){if(!Tr(this))throw new TypeError("invalid receiver");const s=Gn(e),l=Gn(t);let u=es(cn(n),"largestUnit","date","auto");u==="auto"&&(u="day");const{years:r,months:p,weeks:f,days:m}=vr[X(this,Sr)].dateUntil(s,l,u);return new(Ni("%Temporal.Duration%"))(r,p,f,m,0,0,0,0,0,0)}year(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].year(t)}month(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");if(os(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].month(t)}monthCode(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||os(t)||(t=Gn(t)),vr[X(this,Sr)].monthCode(t)}day(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return os(t)||(t=Gn(t)),vr[X(this,Sr)].day(t)}era(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].era(t)}eraYear(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].eraYear(t)}dayOfWeek(e){if(!Tr(this))throw new TypeError("invalid receiver");const t=Gn(e);return vr[X(this,Sr)].dayOfWeek(t)}dayOfYear(e){if(!Tr(this))throw new TypeError("invalid receiver");const t=Gn(e);return vr[X(this,Sr)].dayOfYear(t)}weekOfYear(e){if(!Tr(this))throw new TypeError("invalid receiver");const t=Gn(e);return vr[X(this,Sr)].weekOfYear(t)}daysInWeek(e){if(!Tr(this))throw new TypeError("invalid receiver");const t=Gn(e);return vr[X(this,Sr)].daysInWeek(t)}daysInMonth(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].daysInMonth(t)}daysInYear(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].daysInYear(t)}monthsInYear(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].monthsInYear(t)}inLeapYear(e){let t=e;if(!Tr(this))throw new TypeError("invalid receiver");return Pn(t)||(t=Gn(t)),vr[X(this,Sr)].inLeapYear(t)}toString(){if(!Tr(this))throw new TypeError("invalid receiver");return X(this,Sr)}toJSON(){if(!Tr(this))throw new TypeError("invalid receiver");return $i(this)}static from(e){return cs(e)}}function J1(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function Vl(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function hy(i,e,t=12){let{month:n,monthCode:s}=i;if(s===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ys(n,1,t),e==="constrain"&&(n=ya(n,1,t)),s=Vl(n)}else{const l=J1(s);if(n!==void 0&&n!==l)throw new RangeError(`monthCode ${s} and month ${n} must match if both are present`);if(s!==Vl(l))throw new RangeError(`Invalid month code: ${s}`);if(n=l,n<1||n>t)throw new RangeError(`Invalid monthCode: ${s}`)}return{...i,month:n,monthCode:s}}hl(Oy,"Temporal.Calendar"),gb("Temporal.Calendar.from",Oy.from),vr.iso8601={dateFromFields(i,e,t){const n=Mr(e);let s=on(i,["day","month","monthCode","year"],["year","day"]);s=hy(s);let{year:l,month:u,day:r}=s;return{year:l,month:u,day:r}=My(l,u,r,n),xo(l,u,r,t)},yearMonthFromFields(i,e,t){const n=Mr(e);let s=on(i,["month","monthCode","year"],["year"]);s=hy(s);let{year:l,month:u}=s;return{year:l,month:u}=function(p,f,m){let v=p,y=f;switch(m){case"reject":al(v,y,1);break;case"constrain":({year:v,month:y}=lE(v,y))}return{year:v,month:y}}(l,u,n),Bf(l,u,t,1)},monthDayFromFields(i,e,t){const n=Mr(e);let s=on(i,["day","month","monthCode","year"],["day"]);if(s.month!==void 0&&s.year===void 0&&s.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const l=s.monthCode===void 0;s=hy(s);let{month:u,day:r,year:p}=s;return{month:u,day:r}=My(l?p:1972,u,r,n),Ff(u,r,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const s of K2(i))s!=="month"&&s!=="monthCode"&&(t[s]=i[s]);const n=K2(e);for(const s of n)t[s]=e[s];if(!jy.call(n,"month")&&!jy.call(n,"monthCode")){const{month:s,monthCode:l}=i;s!==void 0&&(t.month=s),l!==void 0&&(t.monthCode=l)}return t},dateAdd(i,e,t,n,s,l,u){let r=X(i,si),p=X(i,di),f=X(i,gi);return{year:r,month:p,day:f}=Wu(r,p,f,e,t,n,s,l),xo(r,p,f,u)},dateUntil:(i,e,t)=>q1(X(i,si),X(i,di),X(i,gi),X(e,si),X(e,di),X(e,gi),t),year:i=>X(i,si),era(){},eraYear(){},month:i=>X(i,di),monthCode:i=>Vl(X(i,di)),day:i=>X(i,gi),dayOfWeek:i=>av(X(i,si),X(i,di),X(i,gi)),dayOfYear:i=>Ry(X(i,si),X(i,di),X(i,gi)),weekOfYear:i=>function(t,n,s){const l=Ry(t,n,s),u=av(t,n,s)||7,r=av(t,1,1),p=Jr((l-u+10)/7);return p<1?r===5||r===6&&Ec(t-1)?53:52:p===53&&(Ec(t)?366:365)-l<4-u?1:p}(X(i,si),X(i,di),X(i,gi)),daysInWeek:()=>7,daysInMonth:i=>Ul(X(i,si),X(i,di)),daysInYear(i){let e=i;return is(e,si)||(e=Gn(e)),Ec(X(e,si))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return is(e,si)||(e=Gn(e)),Ec(X(e,si))}};class hr{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const n of e.map.entries()){if(++t>hr.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(hr.objectMap.get(e))throw new RangeError("object already cached");hr.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=hr.objectMap.get(e);return t||(t=new hr,hr.objectMap.set(e,t)),t}}function AE({isoYear:i,isoMonth:e,isoDay:t}){return`${md(i)}-${lr(e)}-${lr(t)}T00:00Z`}function lv(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}hr.objectMap=new WeakMap,hr.MAX_CACHE_ENTRIES=1e3;class Qh{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new CD(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:n,month:s,day:l}=e,u=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:s,isoDay:l,id:this.id}),r=t.get(u);if(r)return r;const p=this.getFormatter();let f,m;try{m=AE({isoYear:n,isoMonth:s,isoDay:l}),f=p.formatToParts(new Date(m))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:s,isoDay:l})}`)}const v={};for(let{type:_,value:b}of f){if(_==="year"&&(v.eraYear=+b),_==="relatedYear"&&(v.eraYear=+b),_==="month"){const C=/^([0-9]*)(.*?)$/.exec(b);if(!C||C.length!=3||!C[1]&&!C[2])throw new RangeError(`Unexpected month: ${b}`);if(v.month=C[1]?+C[1]:1,v.month<1)throw new RangeError(`Invalid month ${b} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(v.month>13)throw new RangeError(`Invalid month ${b} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);C[2]&&(v.monthExtra=C[2])}_==="day"&&(v.day=+b),this.hasEra&&_==="era"&&b!=null&&b!==""&&(b=b.split(" (")[0],v.era=b.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(v.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:_,eraYear:b}=this.reviseIntlEra(v,e);v.era=_,v.eraYear=b}this.checkIcuBugs&&this.checkIcuBugs(e);const y=this.adjustCalendarDate(v,t,"constrain",!0);if(y.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(y.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(y.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(u,y),["constrain","reject"].forEach(_=>{const b=JSON.stringify({func:"calendarToIsoDate",year:y.year,month:y.month,day:y.day,overflow:_,id:this.id});t.set(b,e)}),y}validateCalendarDate(e){const{era:t,month:n,year:s,day:l,eraYear:u,monthCode:r,monthExtra:p}=e;if(p!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(s===void 0&&u===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&r===void 0)throw new TypeError("month or monthCode is required");if(l===void 0)throw new RangeError("Missing day");if(r!==void 0){if(typeof r!="string")throw new RangeError("monthCode must be a string, not "+typeof r);if(!/^M([01]?\d)(L?)$/.test(r))throw new RangeError(`Invalid monthCode: ${r}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(u!==void 0&&s!==void 0&&u!==s)throw new RangeError(`eraYear ${u} does not match year ${s}`)}}adjustCalendarDate(e,t,n="constrain",s=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let l=e;if(this.validateCalendarDate(l),this.constantEra){const{year:f,eraYear:m}=l;l={...l,era:this.constantEra,year:f!==void 0?f:m,eraYear:m!==void 0?m:f}}const u=this.monthsInYear(l,t);let{month:r,monthCode:p}=l;return{month:r,monthCode:p}=hy(l,n,u),{...l,month:r,monthCode:p}}regulateMonthDayNaive(e,t,n){const s=this.monthsInYear(e,n);let{month:l,day:u}=e;return t==="reject"?(ys(l,1,s),ys(u,1,this.maximumMonthLength(e))):(l=ya(l,1,s),u=ya(u,1,this.maximumMonthLength({...e,month:l}))),{...e,month:l,day:u}}calendarToIsoDate(e,t="constrain",n){const s=e;let l=this.adjustCalendarDate(e,n,t,!1);l=this.regulateMonthDayNaive(l,t,n);const{year:u,month:r,day:p}=l,f=JSON.stringify({func:"calendarToIsoDate",year:u,month:r,day:p,overflow:t,id:this.id});let m,v=n.get(f);if(v||s.year!==void 0&&s.month!==void 0&&s.day!==void 0&&(s.year!==l.year||s.month!==l.month||s.day!==l.day)&&(m=JSON.stringify({func:"calendarToIsoDate",year:s.year,month:s.month,day:s.day,overflow:t,id:this.id}),v=n.get(m),v))return v;let y=this.estimateIsoDate({year:u,month:r,day:p});const _=A=>{let D=this.addDaysIso(y,A);if(l.day>this.minimumMonthLength(l)){let T=this.isoToCalendarDate(D,n);for(;T.month!==r||T.year!==u;){if(t==="reject")throw new RangeError(`day ${p} does not exist in month ${r} of year ${u}`);D=this.addDaysIso(D,-1),T=this.isoToCalendarDate(D,n)}}return D};let b=0,C=this.isoToCalendarDate(y,n),E=lv(l,C);if(E.years!==0||E.months!==0||E.days!==0){const A=365*E.years+30*E.months+E.days;y=this.addDaysIso(y,A),C=this.isoToCalendarDate(y,n),E=lv(l,C),E.years===0&&E.months===0?y=_(E.days):b=this.compareCalendarDates(l,C)}let S=8,x=!1;for(;b;){y=this.addDaysIso(y,b*S);const A=C;C=this.isoToCalendarDate(y,n);const D=b;if(b=this.compareCalendarDates(l,C),b){if(E=lv(l,C),E.years===0&&E.months===0)y=_(E.days),b=0,x=l.day>this.minimumMonthLength(l);else if(D&&b!==D)if(S>1)S/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...s})}`);this.compareCalendarDates(C,A)>0&&(y=this.addDaysIso(y,-1)),x=!0,b=0}}}if(n.set(f,y),m&&n.set(m,y),l.year===void 0||l.month===void 0||l.day===void 0||l.monthCode===void 0||this.hasEra&&(l.era===void 0||l.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!x){const A=JSON.stringify({func:"isoToCalendarDate",isoYear:y.year,isoMonth:y.month,isoDay:y.day,id:this.id});n.set(A,l)}return y}temporalToCalendarDate(e,t){const n={year:X(e,si),month:X(e,di),day:X(e,gi)};return this.isoToCalendarDate(n,t)}compareCalendarDates(e,t){const n=on(e,["day","month","year"],["day","month","year"]),s=on(t,["day","month","year"],["day","month","year"]);return n.year!==s.year?Yu(n.year-s.year):n.month!==s.month?Yu(n.month-s.month):n.day!==s.day?Yu(n.day-s.day):0}regulateDate(e,t="constrain",n){const s=this.calendarToIsoDate(e,t,n);return this.isoToCalendarDate(s,n)}addDaysIso(e,t){return Wu(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,n){const s=this.calendarToIsoDate(e,"constrain",n),l=this.addDaysIso(s,t);return this.isoToCalendarDate(l,n)}addMonthsCalendar(e,t,n,s){let l=e;const{day:u}=l;for(let r=0,p=SD(t);r<p;r++){const{month:f}=l,m=l,v=t<0?-Math.max(u,this.daysInPreviousMonth(l,s)):this.daysInMonth(l,s),y=this.calendarToIsoDate(l,"constrain",s);let _=this.addDaysIso(y,v);if(l=this.isoToCalendarDate(_,s),t>0){const b=this.monthsInYear(m,s);for(;l.month-1!=f%b;)_=this.addDaysIso(_,-1),l=this.isoToCalendarDate(_,s)}l.day!==u&&(l=this.regulateDate({...l,day:u},"constrain",s))}if(n==="reject"&&l.day!==u)throw new RangeError(`Day ${u} does not exist in resulting calendar month`);return l}addCalendar(e,{years:t=0,months:n=0,weeks:s=0,days:l=0},u,r){const{year:p,day:f,monthCode:m}=e,v=this.adjustCalendarDate({year:p+t,monthCode:m,day:f},r),y=this.addMonthsCalendar(v,n,u,r),_=l+7*s;return this.addDaysCalendar(y,_,r)}untilCalendar(e,t,n,s){let l=0,u=0,r=0,p=0;switch(n){case"day":l=this.calendarDaysUntil(e,t,s);break;case"week":{const f=this.calendarDaysUntil(e,t,s);l=f%7,u=(f-l)/7;break}case"month":case"year":{const f=t.year-e.year,m=t.month-e.month,v=t.day-e.day,y=this.compareCalendarDates(t,e);if(!y)return{years:0,months:0,weeks:0,days:0};n==="year"&&f&&(p=m*y<0||m===0&&v*y<0?f-y:f);let _,b=p?this.addCalendar(e,{years:p},"constrain",s):e;do r+=y,_=b,b=this.addMonthsCalendar(_,y,"constrain",s),b.day!==e.day&&(b=this.regulateDate({...b,day:e.day},"constrain",s));while(this.compareCalendarDates(t,b)*y>=0);r-=y,l=this.calendarDaysUntil(_,t,s);break}}return{years:p,months:r,weeks:u,days:l}}daysInMonth(e,t){const{day:n}=e,s=this.maximumMonthLength(e),l=this.minimumMonthLength(e);if(l===s)return l;const u=n<=s-l?s:l,r=this.calendarToIsoDate(e,"constrain",t),p=this.addDaysIso(r,u),f=this.isoToCalendarDate(p,t),m=this.addDaysIso(p,-f.day);return this.isoToCalendarDate(m,t).day}daysInPreviousMonth(e,t){const{day:n,month:s,year:l}=e;let u={year:s>1?l:l-1,month:s,day:1};const r=s>1?s-1:this.monthsInYear(u,t);u={...u,month:r};const p=this.minimumMonthLength(u),f=this.maximumMonthLength(u);if(p===f)return f;const m=this.calendarToIsoDate(e,"constrain",t),v=this.addDaysIso(m,-n);return this.isoToCalendarDate(v,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,n){const s=this.calendarToIsoDate(e,"constrain",n),l=this.calendarToIsoDate(t,"constrain",n);return this.isoDaysUntil(s,l)}isoDaysUntil(e,t){return q1(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,n){let s,l,u,r,p,{year:f,month:m,monthCode:v,day:y,era:_,eraYear:b}=e;if(v===void 0){if(f===void 0&&(_===void 0||b===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:v,year:f}=this.adjustCalendarDate({year:f,month:m,monthCode:v,day:y,era:_,eraYear:b},n,t))}const{year:C}=this.isoToCalendarDate({year:1972,month:1,day:1},n);for(let E=0;E<100;E++){const S=this.adjustCalendarDate({day:y,monthCode:v,year:C-E},n),x=this.calendarToIsoDate(S,"constrain",n),A=this.isoToCalendarDate(x,n);if({year:s,month:l,day:u}=x,A.monthCode===v&&A.day===y)return{month:l,day:u,year:s};t==="constrain"&&(r===void 0||A.monthCode===r.monthCode&&A.day>r.day)&&(r=A,p=x)}if(t==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${v} and day ${y}`)}}class kD extends Qh{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:n,year:s}=e,l=this.getMonthCode(s,n),u=kb(this.months).find(p=>p[1].monthCode===l);if(u===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);const r=u[1].days;return typeof r=="number"?r:r[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?Vl(5,!0):Vl(t<6?t:t-1):Vl(t)}adjustCalendarDate(e,t,n="constrain",s=!1){let{year:l,eraYear:u,month:r,monthCode:p,day:f,monthExtra:m}=e;if(l===void 0&&u!==void 0&&(l=u),u===void 0&&l!==void 0&&(u=l),s){if(m){const v=this.months[m];if(!v)throw new RangeError(`Unrecognized month from formatToParts: ${m}`);r=this.inLeapYear({year:l})?v.leap:v.regular}return p=this.getMonthCode(l,r),{year:l,month:r,day:f,era:void 0,eraYear:u,monthCode:p}}if(this.validateCalendarDate(e),r===void 0)if(p.endsWith("L")){if(p!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${p}`);if(r=6,!this.inLeapYear({year:l})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${l} which is not a leap year`);r=5,f=30,p="M05"}}else{r=J1(p),this.inLeapYear({year:l})&&r>=6&&r++;const v=this.monthsInYear({year:l});if(r<1||r>v)throw new RangeError(`Invalid monthCode: ${p}`)}else if(n==="reject"?(ys(r,1,this.monthsInYear({year:l})),ys(f,1,this.maximumMonthLength({year:l,month:r}))):(r=ya(r,1,this.monthsInYear({year:l})),f=ya(f,1,this.maximumMonthLength({year:l,month:r}))),p===void 0)p=this.getMonthCode(l,r);else if(this.getMonthCode(l,r)!==p)throw new RangeError(`monthCode ${p} doesn't correspond to month ${r} in Hebrew year ${l}`);return{...e,day:f,month:r,monthCode:p,year:l,eraYear:u}}}class Jh extends Qh{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:ED(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class ME extends Jh{constructor(){super(...arguments),this.id="islamic"}}class AD extends Jh{constructor(){super(...arguments),this.id="islamic-umalqura"}}class MD extends Jh{constructor(){super(...arguments),this.id="islamic-tbla"}}class PD extends Jh{constructor(){super(...arguments),this.id="islamic-civil"}}class ID extends Jh{constructor(){super(...arguments),this.id="islamic-rgsa"}}class DD extends Jh{constructor(){super(...arguments),this.id="islamicc"}}class RD extends Qh{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return ME.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class LD extends Qh{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return PE(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let n=this.months[t];if(n===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){const t=this.adjustCalendarDate(e),n=this.getMonthInfo(t);return Wu(t.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function PE(i){return i%4==0&&(i%100!=0||i%400==0)}class wm extends Qh{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:n,anchorEra:s}=function(u){let r,p=u;if(p.length===0)throw new RangeError("Invalid era data: eras are required");if(p.length===1&&p[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(p.length===1&&!p[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(p.filter(m=>m.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");p.forEach(m=>{if(m.isAnchor||!m.anchorEpoch&&!m.reverseOf){if(r)throw new RangeError("Invalid era data: cannot have multiple anchor eras");r=m,m.anchorEpoch={year:m.hasYearZero?0:1}}else if(!m.name)throw new RangeError("If era name is blank, it must be the anchor era")}),p=p.filter(m=>m.name),p.forEach(m=>{const{reverseOf:v}=m;if(v){const y=p.find(_=>_.name===v);if(y===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${v}`);m.reverseOf=y,m.anchorEpoch=y.anchorEpoch,m.isoEpoch=y.isoEpoch}m.anchorEpoch.month===void 0&&(m.anchorEpoch.month=1),m.anchorEpoch.day===void 0&&(m.anchorEpoch.day=1)}),TD.call(p,(m,v)=>{if(m.reverseOf)return 1;if(v.reverseOf)return-1;if(!m.isoEpoch||!v.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return v.isoEpoch.year-m.isoEpoch.year});const f=p[p.length-1].reverseOf;if(f&&f!==p[p.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return p.forEach((m,v)=>{m.genericName="era"+(p.length-1-v)}),{eras:p,anchorEra:r||p[0]}}(t);this.anchorEra=s,this.eras=n}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return PE(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(r,p)=>{const f=e[r];if(f!=null&&f!=p)throw new RangeError(`Input ${r} ${f} doesn't match calculated value ${p}`)},n=r=>{let p;const f={...e,year:r},m=this.eras.find((v,y)=>{if(y===this.eras.length-1){if(v.reverseOf){if(r>0)throw new RangeError(`Signed year ${r} is invalid for era ${v.name}`);return p=v.anchorEpoch.year-r,!0}return p=r-v.anchorEpoch.year+(v.hasYearZero?0:1),!0}return this.compareCalendarDates(f,v.anchorEpoch)>=0&&(p=r-v.anchorEpoch.year+(v.hasYearZero?0:1),!0)});if(!m)throw new RangeError(`Year ${r} was not matched by any era`);return{eraYear:p,era:m.name}};let{year:s,eraYear:l,era:u}=e;if(s!=null)({eraYear:l,era:u}=n(s)),t("era",u),t("eraYear",l);else{if(l==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const r=u===void 0?void 0:this.eras.find(p=>p.name===u||p.genericName===u);if(!r)throw new RangeError(`Era ${u} (ISO year ${l}) was not matched by any era`);if(l<1&&r.reverseOf)throw new RangeError(`Years in ${u} era must be positive, not ${s}`);s=r.reverseOf?r.anchorEpoch.year-l:l+r.anchorEpoch.year-(r.hasYearZero?0:1),t("year",s),{eraYear:l,era:u}=n(s)}}return{...e,year:s,eraYear:l,era:u}}adjustCalendarDate(e,t,n="constrain"){let s=e;const{month:l,monthCode:u}=s;return l===void 0&&(s={...s,month:J1(u)}),this.validateCalendarDate(s),s=this.completeEraYear(s),super.adjustCalendarDate(s,t,n)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:n,month:s,day:l}=t,{anchorEra:u}=this;return My(n+u.isoEpoch.year-(u.hasYearZero?0:1),s,l,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&kc(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class e_ extends wm{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class ND extends e_{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class zD extends e_{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class jD extends e_{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class OD extends wm{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class FD extends wm{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class BD extends wm{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:n}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:n}}}class $D extends wm{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:n,eraYear:s}=e,{year:l}=t;return this.eras.find(u=>u.name===n)?{era:n,eraYear:s}:l<1?{era:"bce",eraYear:1-l}:{era:"ce",eraYear:l}}}class IE extends Qh{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const n=this.getMonthList(e.year,t);return kb(n).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),s=t.get(n);if(s)return s;const l=this.getFormatter(),u=(E,S)=>{const x=AE({isoYear:E,isoMonth:2,isoDay:1}),A=new Date(x);A.setUTCDate(S+1);const D=l.formatToParts(A),T=D.find(W=>W.type==="month").value,k=+D.find(W=>W.type==="day").value;let N=D.find(W=>W.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:T,calendarDay:k,calendarYearToVerify:N}};let r=17,{calendarMonthString:p,calendarDay:f,calendarYearToVerify:m}=u(e,r);p!=="1"&&(r+=29,{calendarMonthString:p,calendarDay:f}=u(e,r)),r-=f-5;const v={};let y,_,b=1,C=!1;do({calendarMonthString:p,calendarDay:f,calendarYearToVerify:m}=u(e,r)),y&&(v[_].daysInMonth=y+30-f),m!==e?C=!0:(v[p]={monthIndex:b++},r+=30),y=f,_=p;while(!C);return v[_].daysInMonth=y+30-f,t.set(n,v),v}estimateIsoDate(e){const{year:t,month:n}=e;return{year:t,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,t,n="constrain",s=!1){let{year:l,month:u,monthExtra:r,day:p,monthCode:f,eraYear:m}=e;if(s){if(l=m,r&&r!=="bis")throw new RangeError(`Unexpected leap month suffix: ${r}`);const v=Vl(u,r!==void 0),y=`${u}${r||""}`,_=this.getMonthList(l,t)[y];if(_===void 0)throw new RangeError(`Unmatched month ${y} in Chinese year ${l}`);return u=_.monthIndex,{year:l,month:u,day:p,era:void 0,eraYear:m,monthCode:v}}if(this.validateCalendarDate(e),l===void 0&&(l=m),m===void 0&&(m=l),u===void 0){const v=this.getMonthList(l,t);let y=f.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));let _=v[y];if(u=_&&_.monthIndex,u===void 0&&f.endsWith("L")&&!jy.call(["M01L","M12L","M13L"],f)&&n==="constrain"){let b=f.slice(1,-1);b[0]==="0"&&(b=b.slice(1)),_=v[b],_&&({daysInMonth:p,monthIndex:u}=_,f=Vl(b))}if(u===void 0)throw new RangeError(`Unmatched month ${f} in Chinese year ${l}`)}else if(f===void 0){const v=this.getMonthList(l,t),y=kb(v),_=y.length;n==="reject"?(ys(u,1,_),ys(p,1,this.maximumMonthLength())):(u=ya(u,1,_),p=ya(p,1,this.maximumMonthLength()));const b=y.find(([,C])=>C.monthIndex===u);if(b===void 0)throw new RangeError(`Invalid month ${u} in Chinese year ${l}`);f=Vl(b[0].replace("bis",""),b[0].indexOf("bis")!==-1)}else{const v=this.getMonthList(l,t);let y=f.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));const _=v[y];if(!_)throw new RangeError(`Unmatched monthCode ${f} in Chinese year ${l}`);if(u!==_.monthIndex)throw new RangeError(`monthCode ${f} doesn't correspond to month ${u} in Chinese year ${l}`)}return{...e,year:l,eraYear:m,month:u,monthCode:f,day:p}}}class UD extends IE{constructor(){super(...arguments),this.id="chinese"}}class VD extends IE{constructor(){super(...arguments),this.id="dangi"}}const GD={helper:void 0,dateFromFields(i,e,t){const n=Mr(e),s=new hr,l=on(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:r,day:p}=this.helper.calendarToIsoDate(l,n,s),f=xo(u,r,p,t);return s.setObject(f),f},yearMonthFromFields(i,e,t){const n=Mr(e),s=new hr,l=on(i,["era","eraYear","month","monthCode","year"],[]),{year:u,month:r,day:p}=this.helper.calendarToIsoDate({...l,day:1},n,s),f=Bf(u,r,t,p);return s.setObject(f),f},monthDayFromFields(i,e,t){const n=Mr(e),s=new hr,l=on(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:r,day:p}=this.helper.monthDayFromFields(l,n,s),f=Ff(r,p,t,u);return s.setObject(f),f},fields(i){let e=i;return jy.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},n={...e},{month:s,monthCode:l,year:u,era:r,eraYear:p,...f}=t,{month:m,monthCode:v,year:y,era:_,eraYear:b}=n;return m===void 0&&v===void 0&&(f.month=s,f.monthCode=l),y===void 0&&_===void 0&&b===void 0&&(f.year=u),{...f,...n}},dateAdd(i,e,t,n,s,l,u){const r=hr.getCacheForObject(i),p=this.helper.temporalToCalendarDate(i,r),f=this.helper.addCalendar(p,{years:e,months:t,weeks:n,days:s},l,r),m=this.helper.calendarToIsoDate(f,"constrain",r),{year:v,month:y,day:_}=m,b=xo(v,y,_,u);return new hr(r).setObject(b),b},dateUntil(i,e,t){const n=hr.getCacheForObject(i),s=hr.getCacheForObject(e),l=this.helper.temporalToCalendarDate(i,n),u=this.helper.temporalToCalendarDate(e,s);return this.helper.untilCalendar(l,u,t,n)},year(i){const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=hr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>vr.iso8601.dayOfWeek(i),dayOfYear(i){const e=hr.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),n=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(n,t,e)+1},weekOfYear:i=>vr.iso8601.weekOfYear(i),daysInWeek:i=>vr.iso8601.daysInWeek(i),daysInMonth(i){const e=hr.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),n=this.helper.maximumMonthLength(t);if(n===this.helper.minimumMonthLength(t))return n;const s=this.helper.startOfCalendarMonth(t),l=this.helper.addMonthsCalendar(s,1,"constrain",e);return this.helper.calendarDaysUntil(s,l,e)},daysInYear(i){let e=i;is(e,si)||(e=Gn(e));const t=hr.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t),s=this.helper.startOfCalendarYear(n),l=this.helper.addCalendar(s,{years:1},"constrain",t);return this.helper.calendarDaysUntil(s,l,t)},monthsInYear(i){const e=hr.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;is(e,si)||(e=Gn(e));const t=hr.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(n,t)}};for(const i of[kD,RD,jD,ND,zD,UD,VD,OD,LD,FD,BD,$D,ME,AD,MD,PD,ID,DD]){const e=new i;vr[e.id]={...GD,helper:e}}class Cm{constructor(e,t,n,s=Pr()){const l=Hn(e),u=Hn(t),r=Hn(n),p=cs(s);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");YS(this,l,u,r,p)}get calendar(){if(!yn(this))throw new TypeError("invalid receiver");return X(this,kt)}get era(){if(!yn(this))throw new TypeError("invalid receiver");return _x(X(this,kt),this)}get eraYear(){if(!yn(this))throw new TypeError("invalid receiver");return wx(X(this,kt),this)}get year(){if(!yn(this))throw new TypeError("invalid receiver");return xx(X(this,kt),this)}get month(){if(!yn(this))throw new TypeError("invalid receiver");return vx(X(this,kt),this)}get monthCode(){if(!yn(this))throw new TypeError("invalid receiver");return xm(X(this,kt),this)}get day(){if(!yn(this))throw new TypeError("invalid receiver");return bx(X(this,kt),this)}get dayOfWeek(){if(!yn(this))throw new TypeError("invalid receiver");return z1(X(this,kt),this)}get dayOfYear(){if(!yn(this))throw new TypeError("invalid receiver");return j1(X(this,kt),this)}get weekOfYear(){if(!yn(this))throw new TypeError("invalid receiver");return O1(X(this,kt),this)}get daysInWeek(){if(!yn(this))throw new TypeError("invalid receiver");return F1(X(this,kt),this)}get daysInMonth(){if(!yn(this))throw new TypeError("invalid receiver");return vm(X(this,kt),this)}get daysInYear(){if(!yn(this))throw new TypeError("invalid receiver");return Cx(X(this,kt),this)}get monthsInYear(){if(!yn(this))throw new TypeError("invalid receiver");return Tx(X(this,kt),this)}get inLeapYear(){if(!yn(this))throw new TypeError("invalid receiver");return Sx(X(this,kt),this)}with(e,t){if(!yn(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");Xh(e);const n=X(this,kt),s=jr(n,["day","month","monthCode","year"]),l=on(e,s,"partial");if(!l)throw new TypeError("invalid date-like");let u=on(this,s,[]);return u=nd(n,u,l),u=on(u,s,[]),zc(n,u,cn(t))}withCalendar(e){if(!yn(this))throw new TypeError("invalid receiver");const t=cs(e);return new Cm(X(this,si),X(this,di),X(this,gi),t)}add(e,t){if(!yn(this))throw new TypeError("invalid receiver");const n=Eh(e),s=cn(t);return Us(X(this,kt),this,n,s)}subtract(e,t){if(!yn(this))throw new TypeError("invalid receiver");const n=oE(Eh(e)),s=cn(t);return Us(X(this,kt),this,n,s)}until(e,t){if(!yn(this))throw new TypeError("invalid receiver");return B2("until",this,e,t)}since(e,t){if(!yn(this))throw new TypeError("invalid receiver");return B2("since",this,e,t)}equals(e){if(!yn(this))throw new TypeError("invalid receiver");const t=Gn(e);for(const n of[si,di,gi])if(X(this,n)!==X(t,n))return!1;return bm(X(this,kt),X(t,kt))}toString(e){if(!yn(this))throw new TypeError("invalid receiver");return D2(this,mm(cn(e)))}toJSON(){if(!yn(this))throw new TypeError("invalid receiver");return D2(this)}toLocaleString(e,t){if(!yn(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!yn(this))throw new TypeError("invalid receiver");const t=X(this,si),n=X(this,di),s=X(this,gi),l=X(this,kt);if(e===void 0)return ga(t,n,s,0,0,0,0,0,0,l);const u=Bl(e);return ga(t,n,s,X(u,qi),X(u,Wi),X(u,Yi),X(u,Zi),X(u,Xi),X(u,Ki),l)}toZonedDateTime(e){if(!yn(this))throw new TypeError("invalid receiver");let t,n;if(Kn(e)){const b=e.timeZone;b===void 0?t=Gs(e):(t=Gs(b),n=e.plainTime)}else t=Gs(e);const s=X(this,si),l=X(this,di),u=X(this,gi),r=X(this,kt);let p=0,f=0,m=0,v=0,y=0,_=0;return n!==void 0&&(n=Bl(n),p=X(n,qi),f=X(n,Wi),m=X(n,Yi),v=X(n,Zi),y=X(n,Xi),_=X(n,Ki)),fs(X(Vs(t,ga(s,l,u,p,f,m,v,y,_,r),"compatible"),Li),t,r)}toPlainYearMonth(){if(!yn(this))throw new TypeError("invalid receiver");const e=X(this,kt);return rd(e,on(this,jr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!yn(this))throw new TypeError("invalid receiver");const e=X(this,kt);return Rh(e,on(this,jr(e,["day","monthCode"]),[]))}getISOFields(){if(!yn(this))throw new TypeError("invalid receiver");return{calendar:X(this,kt),isoDay:X(this,gi),isoMonth:X(this,di),isoYear:X(this,si)}}static from(e,t){const n=cn(t);return yn(e)?(Mr(n),xo(X(e,si),X(e,di),X(e,gi),X(e,kt))):Gn(e,n)}static compare(e,t){const n=Gn(e),s=Gn(t);return kc(X(n,si),X(n,di),X(n,gi),X(s,si),X(s,di),X(s,gi))}}hl(Cm,"Temporal.PlainDate");class Tm{constructor(e,t,n,s=0,l=0,u=0,r=0,p=0,f=0,m=Pr()){const v=Hn(e),y=Hn(t),_=Hn(n),b=Hn(s),C=Hn(l),E=Hn(u),S=Hn(r),x=Hn(p),A=Hn(f),D=cs(m);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");ZS(this,v,y,_,b,C,E,S,x,A,D)}get calendar(){if(!en(this))throw new TypeError("invalid receiver");return X(this,kt)}get year(){if(!en(this))throw new TypeError("invalid receiver");return xx(X(this,kt),this)}get month(){if(!en(this))throw new TypeError("invalid receiver");return vx(X(this,kt),this)}get monthCode(){if(!en(this))throw new TypeError("invalid receiver");return xm(X(this,kt),this)}get day(){if(!en(this))throw new TypeError("invalid receiver");return bx(X(this,kt),this)}get hour(){if(!en(this))throw new TypeError("invalid receiver");return X(this,qi)}get minute(){if(!en(this))throw new TypeError("invalid receiver");return X(this,Wi)}get second(){if(!en(this))throw new TypeError("invalid receiver");return X(this,Yi)}get millisecond(){if(!en(this))throw new TypeError("invalid receiver");return X(this,Zi)}get microsecond(){if(!en(this))throw new TypeError("invalid receiver");return X(this,Xi)}get nanosecond(){if(!en(this))throw new TypeError("invalid receiver");return X(this,Ki)}get era(){if(!en(this))throw new TypeError("invalid receiver");return _x(X(this,kt),this)}get eraYear(){if(!en(this))throw new TypeError("invalid receiver");return wx(X(this,kt),this)}get dayOfWeek(){if(!en(this))throw new TypeError("invalid receiver");return z1(X(this,kt),this)}get dayOfYear(){if(!en(this))throw new TypeError("invalid receiver");return j1(X(this,kt),this)}get weekOfYear(){if(!en(this))throw new TypeError("invalid receiver");return O1(X(this,kt),this)}get daysInWeek(){if(!en(this))throw new TypeError("invalid receiver");return F1(X(this,kt),this)}get daysInYear(){if(!en(this))throw new TypeError("invalid receiver");return Cx(X(this,kt),this)}get daysInMonth(){if(!en(this))throw new TypeError("invalid receiver");return vm(X(this,kt),this)}get monthsInYear(){if(!en(this))throw new TypeError("invalid receiver");return Tx(X(this,kt),this)}get inLeapYear(){if(!en(this))throw new TypeError("invalid receiver");return Sx(X(this,kt),this)}with(e,t){if(!en(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");Xh(e);const n=cn(t),s=X(this,kt),l=jr(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),u=on(e,l,"partial");if(!u)throw new TypeError("invalid date-time-like");let r=on(this,l,[]);r=nd(s,r,u),r=on(r,l,[]);const{year:p,month:f,day:m,hour:v,minute:y,second:_,millisecond:b,microsecond:C,nanosecond:E}=ym(s,r,n);return ga(p,f,m,v,y,_,b,C,E,s)}withPlainTime(e){if(!en(this))throw new TypeError("invalid receiver");const t=X(this,si),n=X(this,di),s=X(this,gi),l=X(this,kt);if(e===void 0)return ga(t,n,s,0,0,0,0,0,0,l);const u=Bl(e);return ga(t,n,s,X(u,qi),X(u,Wi),X(u,Yi),X(u,Zi),X(u,Xi),X(u,Ki),l)}withPlainDate(e){if(!en(this))throw new TypeError("invalid receiver");const t=Gn(e),n=X(t,si),s=X(t,di),l=X(t,gi);let u=X(t,kt);const r=X(this,qi),p=X(this,Wi),f=X(this,Yi),m=X(this,Zi),v=X(this,Xi),y=X(this,Ki);return u=JS(X(this,kt),u),ga(n,s,l,r,p,f,m,v,y,u)}withCalendar(e){if(!en(this))throw new TypeError("invalid receiver");const t=cs(e);return new Tm(X(this,si),X(this,di),X(this,gi),X(this,qi),X(this,Wi),X(this,Yi),X(this,Zi),X(this,Xi),X(this,Ki),t)}add(e,t){if(!en(this))throw new TypeError("invalid receiver");return W2("add",this,e,t)}subtract(e,t){if(!en(this))throw new TypeError("invalid receiver");return W2("subtract",this,e,t)}until(e,t){if(!en(this))throw new TypeError("invalid receiver");return $2("until",this,e,t)}since(e,t){if(!en(this))throw new TypeError("invalid receiver");return $2("since",this,e,t)}round(e){if(!en(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?zh("smallestUnit",e):cn(e),n=es(t,"smallestUnit","time",id,["day"]),s=ta(t,"halfExpand"),l=Yl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1);let u=X(this,si),r=X(this,di),p=X(this,gi),f=X(this,qi),m=X(this,Wi),v=X(this,Yi),y=X(this,Zi),_=X(this,Xi),b=X(this,Ki);return{year:u,month:r,day:p,hour:f,minute:m,second:v,millisecond:y,microsecond:_,nanosecond:b}=Z1(u,r,p,f,m,v,y,_,b,l,n,s),ga(u,r,p,f,m,v,y,_,b,X(this,kt))}equals(e){if(!en(this))throw new TypeError("invalid receiver");const t=Bu(e);for(const n of[si,di,gi,qi,Wi,Yi,Zi,Xi,Ki])if(X(this,n)!==X(t,n))return!1;return bm(X(this,kt),X(t,kt))}toString(e){if(!en(this))throw new TypeError("invalid receiver");const t=cn(e),{precision:n,unit:s,increment:l}=gm(t);return R2(this,n,mm(t),{unit:s,increment:l,roundingMode:ta(t,"trunc")})}toJSON(){if(!en(this))throw new TypeError("invalid receiver");return R2(this,"auto")}toLocaleString(e,t){if(!en(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!en(this))throw new TypeError("invalid receiver");const n=Gs(e);return fs(X(Vs(n,this,Of(cn(t))),Li),n,X(this,kt))}toPlainDate(){if(!en(this))throw new TypeError("invalid receiver");return Lh(this)}toPlainYearMonth(){if(!en(this))throw new TypeError("invalid receiver");const e=X(this,kt);return rd(e,on(this,jr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!en(this))throw new TypeError("invalid receiver");const e=X(this,kt);return Rh(e,on(this,jr(e,["day","monthCode"]),[]))}toPlainTime(){if(!en(this))throw new TypeError("invalid receiver");return B1(this)}getISOFields(){if(!en(this))throw new TypeError("invalid receiver");return{calendar:X(this,kt),isoDay:X(this,gi),isoHour:X(this,qi),isoMicrosecond:X(this,Xi),isoMillisecond:X(this,Zi),isoMinute:X(this,Wi),isoMonth:X(this,di),isoNanosecond:X(this,Ki),isoSecond:X(this,Yi),isoYear:X(this,si)}}static from(e,t){const n=cn(t);return en(e)?(Mr(n),ga(X(e,si),X(e,di),X(e,gi),X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki),X(e,kt))):Bu(e,n)}static compare(e,t){const n=Bu(e),s=Bu(t);for(const l of[si,di,gi,qi,Wi,Yi,Zi,Xi,Ki]){const u=X(n,l),r=X(s,l);if(u!==r)return Yu(u-r)}return 0}}hl(Tm,"Temporal.PlainDateTime");class Ac{constructor(e=0,t=0,n=0,s=0,l=0,u=0,r=0,p=0,f=0,m=0){const v=Xr(e),y=Xr(t),_=Xr(n),b=Xr(s),C=Xr(l),E=Xr(u),S=Xr(r),x=Xr(p),A=Xr(f),D=Xr(m);Mx(v,y,_,b,C,E,S,x,A,D),pl(this),tn(this,Ls,v),tn(this,as,y),tn(this,Qs,_),tn(this,Ns,b),tn(this,zs,C),tn(this,js,E),tn(this,Os,S),tn(this,Fs,x),tn(this,Bs,A),tn(this,$s,D)}get years(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Ls)}get months(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,as)}get weeks(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Qs)}get days(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Ns)}get hours(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,zs)}get minutes(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,js)}get seconds(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Os)}get milliseconds(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Fs)}get microseconds(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,Bs)}get nanoseconds(){if(!yr(this))throw new TypeError("invalid receiver");return X(this,$s)}get sign(){if(!yr(this))throw new TypeError("invalid receiver");return nl(X(this,Ls),X(this,as),X(this,Qs),X(this,Ns),X(this,zs),X(this,js),X(this,Os),X(this,Fs),X(this,Bs),X(this,$s))}get blank(){if(!yr(this))throw new TypeError("invalid receiver");return nl(X(this,Ls),X(this,as),X(this,Qs),X(this,Ns),X(this,zs),X(this,js),X(this,Os),X(this,Fs),X(this,Bs),X(this,$s))===0}with(e){if(!yr(this))throw new TypeError("invalid receiver");const t=on(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:n=X(this,Ls),months:s=X(this,as),weeks:l=X(this,Qs),days:u=X(this,Ns),hours:r=X(this,zs),minutes:p=X(this,js),seconds:f=X(this,Os),milliseconds:m=X(this,Fs),microseconds:v=X(this,Bs),nanoseconds:y=X(this,$s)}=t;return new Ac(n,s,l,u,r,p,f,m,v,y)}negated(){if(!yr(this))throw new TypeError("invalid receiver");return oE(this)}abs(){if(!yr(this))throw new TypeError("invalid receiver");return new Ac(Math.abs(X(this,Ls)),Math.abs(X(this,as)),Math.abs(X(this,Qs)),Math.abs(X(this,Ns)),Math.abs(X(this,zs)),Math.abs(X(this,js)),Math.abs(X(this,Os)),Math.abs(X(this,Fs)),Math.abs(X(this,Bs)),Math.abs(X(this,$s)))}add(e,t){if(!yr(this))throw new TypeError("invalid receiver");return H2("add",this,e,t)}subtract(e,t){if(!yr(this))throw new TypeError("invalid receiver");return H2("subtract",this,e,t)}round(e){if(!yr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=X(this,Ls),n=X(this,as),s=X(this,Qs),l=X(this,Ns),u=X(this,zs),r=X(this,js),p=X(this,Os),f=X(this,Fs),m=X(this,Bs),v=X(this,$s),y=bb(t,n,s,l,u,r,p,f,m,v);const _=typeof e=="string"?zh("smallestUnit",e):cn(e);let b=es(_,"smallestUnit","datetime",void 0),C=!0;b||(C=!1,b="nanosecond"),y=Ta(y,b);let E=es(_,"largestUnit","datetime",void 0,["auto"]),S=!0;if(E||(S=!1,E=y),E==="auto"&&(E=y),!C&&!S)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Ta(E,b)!==E)throw new RangeError(`largestUnit ${E} cannot be smaller than smallestUnit ${b}`);const x=ta(_,"halfExpand"),A=N1(_,b);let D=ly(_);return{years:t,months:n,weeks:s,days:l}=Og(t,n,s,l,E,D),{years:t,months:n,weeks:s,days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:m,nanoseconds:v}=Oc(t,n,s,l,u,r,p,f,m,v,A,b,x,D),{years:t,months:n,weeks:s,days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:m,nanoseconds:v}=mE(t,n,s,l,u,r,p,f,m,v,A,b,x,D),{years:t,months:n,weeks:s,days:l}=function(k,N,W,Z,K,j){let V=k,$=N,L=W,R=Z;const G=Ni("%Temporal.Duration%"),U=nl(V,$,L,R,0,0,0,0,0,0);if(U===0)return{years:V,months:$,weeks:L,days:R};let B,H;j&&(H=Gn(j),B=X(H,kt));const q=new G(U),ae=new G(0,U),fe=new G(0,0,U);switch(K){case"year":{if(!B)throw new RangeError("a starting point is required for years balancing");let re,ce,ke;for({relativeTo:re,days:ce}=ks(B,H,q);En(R)>=En(ce);)R-=ce,V+=U,H=re,{relativeTo:re,days:ce}=ks(B,H,q);for({relativeTo:re,days:ke}=ks(B,H,ae);En(R)>=En(ke);)R-=ke,$+=U,H=re,{relativeTo:re,days:ke}=ks(B,H,ae);const ve=B.dateAdd;re=Us(B,H,q,void 0,ve);const Ee=B.dateUntil,Q=bs(null);Q.largestUnit="month";let ee=Nc(B,H,re,Q,Ee),oe=X(ee,as);for(;En($)>=En(oe);){$-=oe,V+=U,H=re,re=Us(B,H,q,void 0,ve);const we=bs(null);we.largestUnit="month",ee=Nc(B,H,re,we,Ee),oe=X(ee,as)}break}case"month":{if(!B)throw new RangeError("a starting point is required for months balancing");let re,ce;for({relativeTo:re,days:ce}=ks(B,H,ae);En(R)>=En(ce);)R-=ce,$+=U,H=re,{relativeTo:re,days:ce}=ks(B,H,ae);break}case"week":{if(!B)throw new RangeError("a starting point is required for weeks balancing");let re,ce;for({relativeTo:re,days:ce}=ks(B,H,fe);En(R)>=En(ce);)R-=ce,L+=U,H=re,{relativeTo:re,days:ce}=ks(B,H,fe);break}}return{years:V,months:$,weeks:L,days:R}}(t,n,s,l,E,D),wi(D)&&(D=Tb(D,t,n,s,0)),{days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:m,nanoseconds:v}=_a(l,u,r,p,f,m,v,E,D),new Ac(t,n,s,l,u,r,p,f,m,v)}total(e){if(!yr(this))throw new TypeError("invalid receiver");let t=X(this,Ls),n=X(this,as),s=X(this,Qs),l=X(this,Ns),u=X(this,zs),r=X(this,js),p=X(this,Os),f=X(this,Fs),m=X(this,Bs),v=X(this,$s);if(e===void 0)throw new TypeError("options argument is required");const y=typeof e=="string"?zh("unit",e):cn(e),_=es(y,"unit","datetime",id),b=ly(y);let C;({years:t,months:n,weeks:s,days:l}=Og(t,n,s,l,_,b)),wi(b)&&(C=Tb(b,t,n,s,0)),{days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:m,nanoseconds:v}=_a(l,u,r,p,f,m,v,_,C);const{total:E}=Oc(t,n,s,l,u,r,p,f,m,v,1,_,"trunc",b);return E}toString(e){if(!yr(this))throw new TypeError("invalid receiver");const t=cn(e),{precision:n,unit:s,increment:l}=gm(t);if(n==="minute")throw new RangeError('smallestUnit must not be "minute"');return sv(this,n,{unit:s,increment:l,roundingMode:ta(t,"trunc")})}toJSON(){if(!yr(this))throw new TypeError("invalid receiver");return sv(this)}toLocaleString(e,t){if(!yr(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),sv(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return yr(e)?new Ac(X(e,Ls),X(e,as),X(e,Qs),X(e,Ns),X(e,zs),X(e,js),X(e,Os),X(e,Fs),X(e,Bs),X(e,$s)):Eh(e)}static compare(e,t,n){const s=Eh(e),l=Eh(t),u=ly(cn(n)),r=X(s,Ls),p=X(s,as),f=X(s,Qs);let m=X(s,Ns);const v=X(s,zs),y=X(s,js),_=X(s,Os),b=X(s,Fs),C=X(s,Bs);let E=X(s,$s);const S=X(l,Ls),x=X(l,as),A=X(l,Qs);let D=X(l,Ns);const T=X(l,zs),k=X(l,js),N=X(l,Os),W=X(l,Fs),Z=X(l,Bs);let K=X(l,$s);const j=O2(u,r,p,f,m),V=O2(u,S,x,A,D);r===0&&S===0&&p===0&&x===0&&f===0&&A===0||({days:m}=Og(r,p,f,m,"day",u),{days:D}=Og(S,x,A,D,"day",u));const $=Nh(m,v,y,_,b,C,E,j),L=Nh(D,T,k,N,W,Z,K,V);return Yu(he.toNumber(he.subtract($,L)))}}hl(Ac,"Temporal.Duration");const HD=Object.create;class t_{constructor(e,t,n=Pr(),s=1972){const l=Hn(e),u=Hn(t),r=cs(n),p=Hn(s);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");XS(this,l,u,r,p)}get monthCode(){if(!os(this))throw new TypeError("invalid receiver");return xm(X(this,kt),this)}get day(){if(!os(this))throw new TypeError("invalid receiver");return bx(X(this,kt),this)}get calendar(){if(!os(this))throw new TypeError("invalid receiver");return X(this,kt)}with(e,t){if(!os(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");Xh(e);const n=X(this,kt),s=jr(n,["day","month","monthCode","year"]),l=on(e,s,"partial");if(!l)throw new TypeError("invalid month-day-like");let u=on(this,s,[]);return u=nd(n,u,l),u=on(u,s,[]),Rh(n,u,cn(t))}equals(e){if(!os(this))throw new TypeError("invalid receiver");const t=P2(e);for(const n of[di,gi,si])if(X(this,n)!==X(t,n))return!1;return bm(X(this,kt),X(t,kt))}toString(e){if(!os(this))throw new TypeError("invalid receiver");return L2(this,mm(cn(e)))}toJSON(){if(!os(this))throw new TypeError("invalid receiver");return L2(this)}toLocaleString(e,t){if(!os(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!os(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("argument should be an object");const t=X(this,kt),n=jr(t,["day","monthCode"]),s=on(this,n,[]),l=jr(t,["year"]);let u=nd(t,s,on(e,l,[]));u=on(u,[...new Set([...n,...l])],[]);const r=HD(null);return r.overflow="reject",zc(t,u,r)}getISOFields(){if(!os(this))throw new TypeError("invalid receiver");return{calendar:X(this,kt),isoDay:X(this,gi),isoMonth:X(this,di),isoYear:X(this,si)}}static from(e,t){const n=cn(t);return os(e)?(Mr(n),Ff(X(e,di),X(e,gi),X(e,kt),X(e,si))):P2(e,n)}}hl(t_,"Temporal.PlainMonthDay");const i_=()=>new(Ni("%Temporal.Instant%"))(K1()),Q2=(i,e=Cc())=>{const t=Gs(e),n=cs(i);return za(t,i_(),n)},cv=(i=Cc())=>{const e=Gs(i),t=Pr();return za(e,i_(),t)},J2=(i,e=Cc())=>{const t=Gs(e),n=cs(i);return fs(K1(),t,n)},Cc=()=>function(){const e=new OS("en-us");return new(Ni("%Temporal.TimeZone%"))(HS(e.resolvedOptions().timeZone))}(),DE={instant:i_,plainDateTime:Q2,plainDateTimeISO:cv,plainDate:(i,e=Cc())=>Lh(Q2(i,e)),plainDateISO:(i=Cc())=>Lh(cv(i)),plainTimeISO:(i=Cc())=>B1(cv(i)),timeZone:Cc,zonedDateTime:J2,zonedDateTimeISO:(i=Cc())=>J2(Pr(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(DE,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const qD=Object.assign;function eC(i,e,t){let n=X(i,qi),s=X(i,Wi),l=X(i,Yi),u=X(i,Zi),r=X(i,Xi),p=X(i,Ki);if(t){const{unit:f,increment:m,roundingMode:v}=t;({hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=X1(n,s,l,u,r,p,m,f,v))}return`${lr(n)}:${lr(s)}${Ex(l,u,r,p,e)}`}class Xu{constructor(e=0,t=0,n=0,s=0,l=0,u=0){const r=Hn(e),p=Hn(t),f=Hn(n),m=Hn(s),v=Hn(l),y=Hn(u);Ax(r,p,f,m,v,y),pl(this),tn(this,qi,r),tn(this,Wi,p),tn(this,Yi,f),tn(this,Zi,m),tn(this,Xi,v),tn(this,Ki,y),tn(this,kt,Pr())}get calendar(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,kt)}get hour(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,qi)}get minute(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,Wi)}get second(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,Yi)}get millisecond(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,Zi)}get microsecond(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,Xi)}get nanosecond(){if(!xr(this))throw new TypeError("invalid receiver");return X(this,Ki)}with(e,t){if(!xr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");Xh(e);const n=Py(e,"partial"),s=Mr(cn(t)),l=Py(this);let{hour:u,minute:r,second:p,millisecond:f,microsecond:m,nanosecond:v}=qD(l,n);return{hour:u,minute:r,second:p,millisecond:f,microsecond:m,nanosecond:v}=gx(u,r,p,f,m,v,s),new Xu(u,r,p,f,m,v)}add(e){if(!xr(this))throw new TypeError("invalid receiver");return Y2("add",this,e)}subtract(e){if(!xr(this))throw new TypeError("invalid receiver");return Y2("subtract",this,e)}until(e,t){if(!xr(this))throw new TypeError("invalid receiver");return U2("until",this,e,t)}since(e,t){if(!xr(this))throw new TypeError("invalid receiver");return U2("since",this,e,t)}round(e){if(!xr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?zh("smallestUnit",e):cn(e),n=es(t,"smallestUnit","time",id),s=ta(t,"halfExpand"),l=Yl(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1);let u=X(this,qi),r=X(this,Wi),p=X(this,Yi),f=X(this,Zi),m=X(this,Xi),v=X(this,Ki);return{hour:u,minute:r,second:p,millisecond:f,microsecond:m,nanosecond:v}=X1(u,r,p,f,m,v,l,n,s),new Xu(u,r,p,f,m,v)}equals(e){if(!xr(this))throw new TypeError("invalid receiver");const t=Bl(e);for(const n of[qi,Wi,Yi,Zi,Xi,Ki])if(X(this,n)!==X(t,n))return!1;return!0}toString(e){if(!xr(this))throw new TypeError("invalid receiver");const t=cn(e),{precision:n,unit:s,increment:l}=gm(t);return eC(this,n,{unit:s,increment:l,roundingMode:ta(t,"trunc")})}toJSON(){if(!xr(this))throw new TypeError("invalid receiver");return eC(this,"auto")}toLocaleString(e,t){if(!xr(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!xr(this))throw new TypeError("invalid receiver");const t=Gn(e),n=X(t,si),s=X(t,di),l=X(t,gi),u=X(t,kt);return ga(n,s,l,X(this,qi),X(this,Wi),X(this,Yi),X(this,Zi),X(this,Xi),X(this,Ki),u)}toZonedDateTime(e){if(!xr(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const n=Gn(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property");const l=Gs(s),u=X(n,si),r=X(n,di),p=X(n,gi),f=X(n,kt),m=X(this,qi),v=X(this,Wi),y=X(this,Yi),_=X(this,Zi),b=X(this,Xi),C=X(this,Ki);return fs(X(Vs(l,new(Ni("%Temporal.PlainDateTime%"))(u,r,p,m,v,y,_,b,C,f),"compatible"),Li),l,f)}getISOFields(){if(!xr(this))throw new TypeError("invalid receiver");return{calendar:X(this,kt),isoHour:X(this,qi),isoMicrosecond:X(this,Xi),isoMillisecond:X(this,Zi),isoMinute:X(this,Wi),isoNanosecond:X(this,Ki),isoSecond:X(this,Yi)}}static from(e,t){const n=Mr(cn(t));return xr(e)?new Xu(X(e,qi),X(e,Wi),X(e,Yi),X(e,Zi),X(e,Xi),X(e,Ki)):Bl(e,n)}static compare(e,t){const n=Bl(e),s=Bl(t);for(const l of[qi,Wi,Yi,Zi,Xi,Ki]){const u=X(n,l),r=X(s,l);if(u!==r)return Yu(u-r)}return 0}}hl(Xu,"Temporal.PlainTime");class n_{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=$1(e);pl(this),tn(this,bc,t)}get id(){if(!Zo(this))throw new TypeError("invalid receiver");return $i(this)}getOffsetNanosecondsFor(e){if(!Zo(this))throw new TypeError("invalid receiver");const t=Qo(e),n=X(this,bc);return _f(n)?sd(n):jl(X(t,Li),n)}getOffsetStringFor(e){if(!Zo(this))throw new TypeError("invalid receiver");return _b(this,Qo(e))}getPlainDateTimeFor(e,t=Pr()){return za(this,Qo(e),cs(t))}getInstantFor(e,t){if(!Zo(this))throw new TypeError("invalid receiver");return Vs(this,Bu(e),Of(cn(t)))}getPossibleInstantsFor(e){if(!Zo(this))throw new TypeError("invalid receiver");const t=Bu(e),n=Ni("%Temporal.Instant%"),s=X(this,bc);if(_f(s)){const l=jc(X(t,si),X(t,di),X(t,gi),X(t,qi),X(t,Wi),X(t,Yi),X(t,Zi),X(t,Xi),X(t,Ki));if(l===null)throw new RangeError("DateTime outside of supported range");const u=sd(s);return[new n(he.subtract(l,he.BigInt(u)))]}return function(u,r,p,f,m,v,y,_,b,C){const E=jc(r,p,f,m,v,y,_,b,C);if(E===null)throw new RangeError("DateTime outside of supported range");let S=he.subtract(E,Lc);he.lessThan(S,Lf)&&(S=E);let x=he.add(E,Lc);he.greaterThan(x,Nf)&&(x=E);const A=jl(S,u),D=jl(x,u);return(A===D?[A]:[A,D]).map(T=>{const k=he.subtract(E,he.BigInt(T)),N=rE(k,u);if(r===N.year&&p===N.month&&f===N.day&&m===N.hour&&v===N.minute&&y===N.second&&_===N.millisecond&&b===N.microsecond&&C===N.nanosecond)return k}).filter(T=>T!==void 0)}(s,X(t,si),X(t,di),X(t,gi),X(t,qi),X(t,Wi),X(t,Yi),X(t,Zi),X(t,Xi),X(t,Ki)).map(l=>new n(l))}getNextTransition(e){if(!Zo(this))throw new TypeError("invalid receiver");const t=Qo(e),n=X(this,bc);if(_f(n)||n==="UTC")return null;let s=X(t,Li);const l=Ni("%Temporal.Instant%");return s=function(r,p){const f=he.add(r,$S),m=j2(sE(),f);let v=j2(BS,r);const y=jl(v,p);let _=v,b=y;for(;y===b&&he.lessThan(he.BigInt(v),m);)_=he.add(v,US),b=jl(_,p),y===b&&(v=_);return y===b?null:xE(C=>jl(C,p),v,_,y,b)}(s,n),s===null?null:new l(s)}getPreviousTransition(e){if(!Zo(this))throw new TypeError("invalid receiver");const t=Qo(e),n=X(this,bc);if(_f(n)||n==="UTC")return null;let s=X(t,Li);const l=Ni("%Temporal.Instant%");return s=aE(s,n),s===null?null:new l(s)}toString(){if(!Zo(this))throw new TypeError("invalid receiver");return $i(X(this,bc))}toJSON(){if(!Zo(this))throw new TypeError("invalid receiver");return $i(this)}static from(e){return Gs(e)}}hl(n_,"Temporal.TimeZone");const WD=Object.create;class r_{constructor(e,t,n=Pr(),s=1){const l=Hn(e),u=Hn(t),r=cs(n),p=Hn(s);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");KS(this,l,u,r,p)}get year(){if(!Pn(this))throw new TypeError("invalid receiver");return xx(X(this,kt),this)}get month(){if(!Pn(this))throw new TypeError("invalid receiver");return vx(X(this,kt),this)}get monthCode(){if(!Pn(this))throw new TypeError("invalid receiver");return xm(X(this,kt),this)}get calendar(){if(!Pn(this))throw new TypeError("invalid receiver");return X(this,kt)}get era(){if(!Pn(this))throw new TypeError("invalid receiver");return _x(X(this,kt),this)}get eraYear(){if(!Pn(this))throw new TypeError("invalid receiver");return wx(X(this,kt),this)}get daysInMonth(){if(!Pn(this))throw new TypeError("invalid receiver");return vm(X(this,kt),this)}get daysInYear(){if(!Pn(this))throw new TypeError("invalid receiver");return Cx(X(this,kt),this)}get monthsInYear(){if(!Pn(this))throw new TypeError("invalid receiver");return Tx(X(this,kt),this)}get inLeapYear(){if(!Pn(this))throw new TypeError("invalid receiver");return Sx(X(this,kt),this)}with(e,t){if(!Pn(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid argument");Xh(e);const n=X(this,kt),s=jr(n,["month","monthCode","year"]),l=on(e,s,"partial");if(!l)throw new TypeError("invalid year-month-like");let u=on(this,s,[]);return u=nd(n,u,l),u=on(u,s,[]),rd(n,u,cn(t))}add(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return Z2("add",this,e,t)}subtract(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return Z2("subtract",this,e,t)}until(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return V2("until",this,e,t)}since(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return V2("since",this,e,t)}equals(e){if(!Pn(this))throw new TypeError("invalid receiver");const t=vf(e);for(const n of[si,di,gi])if(X(this,n)!==X(t,n))return!1;return bm(X(this,kt),X(t,kt))}toString(e){if(!Pn(this))throw new TypeError("invalid receiver");return N2(this,mm(cn(e)))}toJSON(){if(!Pn(this))throw new TypeError("invalid receiver");return N2(this)}toLocaleString(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Pn(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("argument should be an object");const t=X(this,kt),n=jr(t,["monthCode","year"]),s=on(this,n,[]),l=jr(t,["day"]);let u=nd(t,s,on(e,l,[]));u=on(u,[...new Set([...n,...l])],[]);const r=WD(null);return r.overflow="reject",zc(t,u,r)}getISOFields(){if(!Pn(this))throw new TypeError("invalid receiver");return{calendar:X(this,kt),isoDay:X(this,gi),isoMonth:X(this,di),isoYear:X(this,si)}}static from(e,t){const n=cn(t);return Pn(e)?(Mr(n),Bf(X(e,si),X(e,di),X(e,kt),X(e,gi))):vf(e,n)}static compare(e,t){const n=vf(e),s=vf(t);return kc(X(n,si),X(n,di),X(n,gi),X(s,si),X(s,di),X(s,gi))}}hl(r_,"Temporal.PlainYearMonth");class s_{constructor(e,t,n=Pr()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");QS(this,Sf(e),Gs(t),cs(n))}get calendar(){if(!wi(this))throw new TypeError("invalid receiver");return X(this,kt)}get timeZone(){if(!wi(this))throw new TypeError("invalid receiver");return X(this,Ln)}get year(){if(!wi(this))throw new TypeError("invalid receiver");return xx(X(this,kt),Qn(this))}get month(){if(!wi(this))throw new TypeError("invalid receiver");return vx(X(this,kt),Qn(this))}get monthCode(){if(!wi(this))throw new TypeError("invalid receiver");return xm(X(this,kt),Qn(this))}get day(){if(!wi(this))throw new TypeError("invalid receiver");return bx(X(this,kt),Qn(this))}get hour(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),qi)}get minute(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),Wi)}get second(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),Yi)}get millisecond(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),Zi)}get microsecond(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),Xi)}get nanosecond(){if(!wi(this))throw new TypeError("invalid receiver");return X(Qn(this),Ki)}get era(){if(!wi(this))throw new TypeError("invalid receiver");return _x(X(this,kt),Qn(this))}get eraYear(){if(!wi(this))throw new TypeError("invalid receiver");return wx(X(this,kt),Qn(this))}get epochSeconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=X(this,Li);return he.toNumber(he.divide(e,$l))}get epochMilliseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=X(this,Li);return he.toNumber(he.divide(e,Qa))}get epochMicroseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=X(this,Li);return Ny(he.divide(e,Nn))}get epochNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return Ny(X(this,Li))}get dayOfWeek(){if(!wi(this))throw new TypeError("invalid receiver");return z1(X(this,kt),Qn(this))}get dayOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return j1(X(this,kt),Qn(this))}get weekOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return O1(X(this,kt),Qn(this))}get hoursInDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Qn(this),t=Ni("%Temporal.PlainDateTime%"),n=X(e,si),s=X(e,di),l=X(e,gi),u=new t(n,s,l,0,0,0,0,0,0),r=Wu(n,s,l,0,0,0,1,"reject"),p=new t(r.year,r.month,r.day,0,0,0,0,0,0),f=X(this,Ln),m=X(Vs(f,u,"compatible"),Li),v=X(Vs(f,p,"compatible"),Li);return he.toNumber(he.subtract(v,m))/36e11}get daysInWeek(){if(!wi(this))throw new TypeError("invalid receiver");return F1(X(this,kt),Qn(this))}get daysInMonth(){if(!wi(this))throw new TypeError("invalid receiver");return vm(X(this,kt),Qn(this))}get daysInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Cx(X(this,kt),Qn(this))}get monthsInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Tx(X(this,kt),Qn(this))}get inLeapYear(){if(!wi(this))throw new TypeError("invalid receiver");return Sx(X(this,kt),Qn(this))}get offset(){if(!wi(this))throw new TypeError("invalid receiver");return _b(X(this,Ln),X(this,As))}get offsetNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return Ro(X(this,Ln),X(this,As))}with(e,t){if(!wi(this))throw new TypeError("invalid receiver");if(!Kn(e))throw new TypeError("invalid zoned-date-time-like");Xh(e);const n=cn(t),s=Of(n),l=vb(n,"prefer"),u=X(this,Ln),r=X(this,kt),p=xb(jr(r,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),f=on(e,p,"partial"),m=xb(p,"timeZone");let v=on(this,m,["timeZone","offset"]);v=nd(r,v,f),v=on(v,m,["timeZone","offset"]);let{year:y,month:_,day:b,hour:C,minute:E,second:S,millisecond:x,microsecond:A,nanosecond:D}=ym(r,v,n);return fs(Iy(y,_,b,C,E,S,x,A,D,"option",sd(v.offset),u,s,l,!1),X(this,Ln),r)}withPlainDate(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Gn(e),n=X(t,si),s=X(t,di),l=X(t,gi);let u=X(t,kt);const r=Qn(this),p=X(r,qi),f=X(r,Wi),m=X(r,Yi),v=X(r,Zi),y=X(r,Xi),_=X(r,Ki);u=JS(X(this,kt),u);const b=X(this,Ln);return fs(X(Vs(b,new(Ni("%Temporal.PlainDateTime%"))(n,s,l,p,f,m,v,y,_,u),"compatible"),Li),b,u)}withPlainTime(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Ni("%Temporal.PlainTime%"),n=e===void 0?new t:Bl(e),s=Qn(this),l=X(s,si),u=X(s,di),r=X(s,gi),p=X(this,kt),f=X(n,qi),m=X(n,Wi),v=X(n,Yi),y=X(n,Zi),_=X(n,Xi),b=X(n,Ki),C=X(this,Ln);return fs(X(Vs(C,new(Ni("%Temporal.PlainDateTime%"))(l,u,r,f,m,v,y,_,b,p),"compatible"),Li),C,p)}withTimeZone(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Gs(e);return fs(X(this,Li),t,X(this,kt))}withCalendar(e){if(!wi(this))throw new TypeError("invalid receiver");const t=cs(e);return fs(X(this,Li),X(this,Ln),t)}add(e,t){if(!wi(this))throw new TypeError("invalid receiver");return X2("add",this,e,t)}subtract(e,t){if(!wi(this))throw new TypeError("invalid receiver");return X2("subtract",this,e,t)}until(e,t){if(!wi(this))throw new TypeError("invalid receiver");return G2("until",this,e,t)}since(e,t){if(!wi(this))throw new TypeError("invalid receiver");return G2("since",this,e,t)}round(e){if(!wi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?zh("smallestUnit",e):cn(e),n=es(t,"smallestUnit","time",id,["day"]),s=ta(t,"halfExpand"),l=Yl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1),u=Qn(this);let r=X(u,si),p=X(u,di),f=X(u,gi),m=X(u,qi),v=X(u,Wi),y=X(u,Yi),_=X(u,Zi),b=X(u,Xi),C=X(u,Ki);const E=Ni("%Temporal.PlainDateTime%"),S=X(this,Ln),x=X(this,kt),A=Vs(S,new E(X(u,si),X(u,di),X(u,gi),0,0,0,0,0,0),"compatible"),D=Ja(A,S,x,0,0,0,1,0,0,0,0,0,0),T=he.subtract(D,he.BigInt(X(A,Li)));if(he.equal(T,kr))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:r,month:p,day:f,hour:m,minute:v,second:y,millisecond:_,microsecond:b,nanosecond:C}=Z1(r,p,f,m,v,y,_,b,C,l,n,s,he.toNumber(T)),fs(Iy(r,p,f,m,v,y,_,b,C,"option",Ro(S,X(this,As)),S,"compatible","prefer",!1),S,X(this,kt))}equals(e){if(!wi(this))throw new TypeError("invalid receiver");const t=bf(e),n=X(this,Li),s=X(t,Li);return!!he.equal(he.BigInt(n),he.BigInt(s))&&!!eE(X(this,Ln),X(t,Ln))&&bm(X(this,kt),X(t,kt))}toString(e){if(!wi(this))throw new TypeError("invalid receiver");const t=cn(e),{precision:n,unit:s,increment:l}=gm(t),u=ta(t,"trunc");return z2(this,n,mm(t),function(p){return Fc(p,"timeZoneName",["auto","never"],"auto")}(t),function(p){return Fc(p,"offset",["auto","never"],"auto")}(t),{unit:s,increment:l,roundingMode:u})}toLocaleString(e,t){if(!wi(this))throw new TypeError("invalid receiver");return new gd(e,t).format(this)}toJSON(){if(!wi(this))throw new TypeError("invalid receiver");return z2(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Qn(this),t=Ni("%Temporal.PlainDateTime%"),n=X(this,kt),s=new t(X(e,si),X(e,di),X(e,gi),0,0,0,0,0,0,n),l=X(this,Ln);return fs(X(Vs(l,s,"compatible"),Li),l,n)}toInstant(){if(!wi(this))throw new TypeError("invalid receiver");return new(Ni("%Temporal.Instant%"))(X(this,Li))}toPlainDate(){if(!wi(this))throw new TypeError("invalid receiver");return Lh(Qn(this))}toPlainTime(){if(!wi(this))throw new TypeError("invalid receiver");return B1(Qn(this))}toPlainDateTime(){if(!wi(this))throw new TypeError("invalid receiver");return Qn(this)}toPlainYearMonth(){if(!wi(this))throw new TypeError("invalid receiver");const e=X(this,kt);return rd(e,on(this,jr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=X(this,kt);return Rh(e,on(this,jr(e,["day","monthCode"]),[]))}getISOFields(){if(!wi(this))throw new TypeError("invalid receiver");const e=Qn(this),t=X(this,Ln);return{calendar:X(this,kt),isoDay:X(e,gi),isoHour:X(e,qi),isoMicrosecond:X(e,Xi),isoMillisecond:X(e,Zi),isoMinute:X(e,Wi),isoMonth:X(e,di),isoNanosecond:X(e,Ki),isoSecond:X(e,Yi),isoYear:X(e,si),offset:_b(t,X(this,As)),timeZone:t}}static from(e,t){const n=cn(t);return wi(e)?(Mr(n),Of(n),vb(n,"reject"),fs(X(e,Li),X(e,Ln),X(e,kt))):bf(e,n)}static compare(e,t){const n=bf(e),s=bf(t),l=X(n,Li),u=X(s,Li);return he.lessThan(he.BigInt(l),he.BigInt(u))?-1:he.greaterThan(he.BigInt(l),he.BigInt(u))?1:0}}function Qn(i){return za(X(i,Ln),X(i,As),X(i,kt))}hl(s_,"Temporal.ZonedDateTime");var zr=Object.freeze({__proto__:null,Instant:So,Calendar:Oy,PlainDate:Cm,PlainDateTime:Tm,Duration:Ac,PlainMonthDay:t_,Now:DE,PlainTime:Xu,TimeZone:n_,PlainYearMonth:r_,ZonedDateTime:s_});const YD=[So,Oy,Cm,Tm,Ac,t_,Xu,n_,r_,s_];for(const i of YD){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}const ZD=i=>Object.entries(mI[i]).reduce((e,t)=>{let[n,s]=t;return e[`${i}-${n}`]=s,e},{}),XD=i=>Object.entries(i).map(e=>{let[t,n]=e;return`--${t}: ${n};`}).join(`
`),RE=i=>{let{colors:e=!1,theme:t=!1,layers:n=!1,spacers:s=!1,elevations:l=!1}=i;const u={colors:e,theme:t,layers:n,spacers:s,elevations:l},r=Object.keys(u).filter(p=>u[p]).map(ZD).map(XD).join(`
`);return pe.createElement(_t,{id:"3443925957",dynamic:[r]},[`html{${r};}`])};RE.propTypes={colors:ne.bool,elevations:ne.bool,layers:ne.bool,spacers:ne.bool,theme:ne.bool};let KD=class extends eI{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=this.client.defaultMutationOptions(e),tI(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:iI(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){VT.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,n,s,l;(t=(n=this.mutateOptions).onSuccess)==null||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(l=this.mutateOptions).onSettled)==null||s.call(l,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,r,p,f;(u=(r=this.mutateOptions).onError)==null||u.call(r,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(p=(f=this.mutateOptions).onSettled)==null||p.call(f,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:m})=>{m(this.currentResult)})})}};function Yc(i,e,t){const n=nI(i,e,t),s=vo({context:n.context}),[l]=Fe.useState(()=>new KD(s,n));Fe.useEffect(()=>{l.setOptions(n)},[l,n]);const u=rI(Fe.useCallback(p=>l.subscribe(VT.batchCalls(p)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r=Fe.useCallback((p,f)=>{l.mutate(p,f).catch(QD)},[l]);if(u.error&&sI(l.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:r,mutateAsync:u.mutate}}function QD(){}const JD=i=>{let{execute:e,variables:t,singular:n,immediate:s,onComplete:l,onError:u}=i;const[r]=GT(e),[p,f]=Fe.useState({called:!!s,loading:!!s}),m=Fe.useRef(t),v=Fe.useRef([]),y=Fe.useCallback(()=>{v.current.forEach(C=>C.abort()),v.current=[]},[]),_=Fe.useCallback(()=>{y(),f(C=>({called:C.called,loading:!1,error:new aI({type:"aborted",message:"Aborted"})}))},[y]),b=Fe.useCallback(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f(x=>!x.called||!x.loading?{called:!0,loading:!0}:x),n&&y();const E=new AbortController;v.current.push(E),m.current={...m.current,...C};const S={variables:m.current,signal:E.signal,onComplete:l,onError:u};return r(S).then(x=>E.signal.aborted?new Promise(()=>{}):(f({called:!0,loading:!1,data:x}),x)).catch(x=>(E.signal.aborted||f({called:!0,loading:!1,error:x}),new Promise(()=>{})))},[y,l,u,n,r]);return Fe.useEffect(()=>(s&&b(),y),[]),{refetch:b,abort:_,...p}},eR={},LE=function(i){let{onComplete:e,onError:t,variables:n=eR,lazy:s=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=Wh(),[u]=GT(i,{warn:!0,name:"mutation"}),r=Fe.useCallback(_=>l.mutate(u,_),[l,u]),{refetch:p,called:f,loading:m,error:v,data:y}=JD({execute:r,variables:n,singular:!1,immediate:!s,onComplete:e,onError:t});return[p,{engine:l,called:f,loading:m,error:v,data:y}]},NE=i=>{let{children:e,open:t,dataTest:n}=i;return pe.createElement("div",{"data-test":n,className:"jsx-3677374542 "+(vn({open:t})||"")},e,pe.createElement(_t,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};NE.propTypes={children:ne.node,dataTest:ne.string,open:ne.bool};const tR=()=>pe.createElement("div",{className:"jsx-2503342345"},pe.createElement(_t,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),iR=()=>pe.createElement("div",{className:"nodeArrow"},pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},pe.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),pe.createElement(_t,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),zE=i=>{let{open:e,onOpen:t,onClose:n,dataTest:s}=i;const l=e?n:t;return pe.createElement("div",{"data-test":s,onClick:u=>l&&l({open:!e},u),className:_t.dynamic([["375729792",[je.grey400,je.grey900,je.grey100]]])+" "+(vn({open:e})||"")},pe.createElement("span",{className:_t.dynamic([["375729792",[je.grey400,je.grey900,je.grey100]]])},pe.createElement(iR,null)),pe.createElement(_t,{id:"375729792",dynamic:[je.grey400,je.grey900,je.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${je.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${je.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${je.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};zE.propTypes={dataTest:ne.string.isRequired,open:ne.bool,onClose:ne.func,onOpen:ne.func};const jE=i=>{let{open:e,className:t,component:n,children:s,icon:l,onOpen:u,onClose:r,dataTest:p="dhis2-uicore-node"}=i;const f=!!pe.Children.toArray(s).filter(y=>y).length,m=!l&&f,v=!l&&!f;return pe.createElement("div",{"data-test":p,className:"jsx-1433072554 "+(vn("node",t)||"")},l&&pe.createElement("div",{"data-test":`${p}-icon`,className:"jsx-1433072554"},l),m&&pe.createElement(zE,{open:e,onOpen:u,onClose:r,dataTest:`${p}-toggle`}),v&&pe.createElement(tR,null),pe.createElement("div",{"data-test":`${p}-content`,className:"jsx-1433072554"},pe.createElement("div",{"data-test":`${p}-label`,className:"jsx-1433072554"},n),pe.createElement(NE,{open:e,dataTest:`${p}-leaves`},s)),pe.createElement(_t,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};jE.propTypes={children:ne.node,className:ne.string,component:ne.element,dataTest:ne.string,icon:ne.node,open:ne.bool,onClose:ne.func,onOpen:ne.func};const OE=(i,e)=>i.some(n=>e===n?!0:n.startsWith(`${e}/`)),nR=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),rR=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),sR={"No children match filter":"","Could not load children":"  ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},aR={"No children match filter":"Filtru neodpovdaj dn podzen","Could not load children":"Nelze nast podazen","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},oR={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},lR={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},cR={"No children match filter":"Ningn descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},uR={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},dR={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":" {{ ERRORMESSAGE }}"},hR={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},pR={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},fR={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"No foi possvel carregar as crianas","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},mR={"No children match filter":"  ,  ","Could not load children":"    ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},gR={"No children match filter":"  ',   ","Could not load children":"    '","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},yR={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},xR={"No children match filter":"     ","Could not load children":" ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},vR={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},bR={"No children match filter":"Khng c n v con ph hp vi b lc","Could not load children":"Khng th ti n v con","Error: {{ ERRORMESSAGE }}":"Li: {{ ERRORMESSAGE }}"},_R={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"{{ ERRORMESSAGE }}"},wR={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":""},Ps="default";Oe.addResources("ar",Ps,sR);Oe.addResources("cs",Ps,aR);Oe.addResources("en",Ps,oR);Oe.addResources("es",Ps,lR);Oe.addResources("es_419",Ps,cR);Oe.addResources("fr",Ps,uR);Oe.addResources("lo",Ps,dR);Oe.addResources("nb",Ps,hR);Oe.addResources("nl",Ps,pR);Oe.addResources("pt",Ps,fR);Oe.addResources("ru",Ps,mR);Oe.addResources("uk",Ps,gR);Oe.addResources("uz_Latn",Ps,yR);Oe.addResources("uz_UZ_Cyrl",Ps,xR);Oe.addResources("uz_UZ_Latn",Ps,vR);Oe.addResources("vi",Ps,bR);Oe.addResources("zh",Ps,_R);Oe.addResources("zh_CN",Ps,wR);const CR="[a-zA-Z][a-zA-Z0-9]{10}",TR=new RegExp(`(/${CR})+`),La=(i,e,t,n,s)=>{if(!TR.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${s}\``)},FE=i=>{let{children:e,dataTest:t}=i;return pe.createElement("span",{"data-test":`${t}-error`,className:_t.dynamic([["3198585030",[je.grey800,Ut.dp4,Jt.error]]])},e,pe.createElement(_t,{id:"3198585030",dynamic:[je.grey800,Ut.dp4,Jt.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${je.grey800};margin:${Ut.dp4};color:${Jt.error};}`]))};FE.propTypes={children:ne.any.isRequired,dataTest:ne.string.isRequired};const SR=(i,e)=>e.some(t=>{const n=!t.match(new RegExp(`${i}$`)),s=t.match(new RegExp(i));return n&&s}),a_=i=>{let{checked:e,children:t,onChange:n,loading:s}=i;return pe.createElement("span",{onClick:l=>{n({checked:!e},l)},className:_t.dynamic([["321503310",[je.grey900,je.teal700]]])+" "+(vn({checked:e,loading:s})||"")},t,pe.createElement(_t,{id:"321503310",dynamic:[je.grey900,je.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${je.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${je.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};a_.propTypes={children:ne.any.isRequired,checked:ne.bool,loading:ne.bool,onChange:ne.func};const BE=i=>{let{children:e,loading:t,onToggleOpen:n}=i;return pe.createElement(a_,{checked:!1,loading:t,onChange:n},e)};BE.propTypes={children:ne.any.isRequired,onToggleOpen:ne.func.isRequired,loading:ne.bool};const $E=i=>{let{dataTest:e}=i;return pe.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},pe.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),pe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};$E.propTypes={dataTest:ne.string.isRequired};const UE=i=>{let{dataTest:e}=i;return pe.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},pe.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},pe.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),pe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};UE.propTypes={dataTest:ne.string.isRequired};const VE=i=>{let{dataTest:e}=i;return pe.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},pe.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},pe.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},pe.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),pe.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),pe.createElement(_t,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};VE.propTypes={dataTest:ne.string.isRequired};const GE=i=>{let{dataTest:e}=i;return pe.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},pe.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},pe.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),pe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};GE.propTypes={dataTest:ne.string.isRequired};const HE=i=>{let{loading:e,hasChildren:t,open:n,dataTest:s}=i;return e?pe.createElement($E,{dataTest:s}):t?n?pe.createElement(VE,{dataTest:s}):pe.createElement(UE,{dataTest:s}):pe.createElement(GE,{dataTest:s})};HE.propTypes={dataTest:ne.string.isRequired,hasChildren:ne.bool,loading:ne.bool,open:ne.bool};const qE=i=>{let{checked:e,dataTest:t,hasChildren:n,indeterminate:s,children:l,loading:u,name:r,open:p,value:f,onChange:m}=i;const v=pe.createElement(HE,{loading:u,open:p,hasChildren:n,dataTest:t}),y=pe.createElement(pe.Fragment,null,pe.createElement("span",{className:"jsx-1000763175"},v),l,pe.createElement(_t,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return pe.createElement(pe.Fragment,null,pe.createElement(td,{dense:!0,checked:e,name:r,value:f,label:y,indeterminate:s,onChange:m}))};qE.propTypes={checked:ne.bool.isRequired,children:ne.any.isRequired,dataTest:ne.string.isRequired,hasChildren:ne.bool.isRequired,indeterminate:ne.bool.isRequired,loading:ne.bool.isRequired,name:ne.string.isRequired,open:ne.bool.isRequired,value:ne.string.isRequired,onChange:ne.func.isRequired};const py=i=>{let{highlighted:e,children:t}=i;return pe.createElement("div",{className:_t.dynamic([["1387769986",[je.teal200]]])+" "+(vn({highlighted:e})||"")},pe.createElement("span",{className:_t.dynamic([["1387769986",[je.teal200]]])},t),pe.createElement(_t,{id:"1387769986",dynamic:[je.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${je.teal200};padding-inline-end:4px;}`]))};py.propTypes={children:ne.node,highlighted:ne.bool};const ER=i=>{let{selected:e,path:t,checked:n,singleSelection:s}=i;const l=e.indexOf(t);if(n&&l!==-1)return e;if(s&&n)return[t];if(n)return[...e,t];if(l===-1)return e;if(s)return[];if(e.indexOf(t)===0)return e.slice(1);const u=e.slice(0,l),r=e.slice(l+1);return[...u,...r]},WE=i=>{let{checked:e,children:t,dataTest:n,disableSelection:s,fullPath:l,hasChildren:u,hasSelectedDescendants:r,highlighted:p,loading:f,node:m,onChange:v,onToggleOpen:y,open:_,rootId:b,selected:C,singleSelection:E}=i;const S=(x,A)=>{let{checked:D}=x;const T=ER({path:l,selected:C,checked:D,singleSelection:E,rootId:b}),k={...m,path:l,checked:D,selected:T};v(k,A)};return s?pe.createElement(py,{highlighted:p},pe.createElement(BE,{loading:f,onToggleOpen:y},t)):E?pe.createElement(py,{highlighted:p},pe.createElement(a_,{checked:e,onChange:S,loading:f},t)):pe.createElement(py,{highlighted:p},pe.createElement(qE,{dataTest:n,checked:e,name:"org-unit",value:m.id,loading:f,indeterminate:!e&&r,onChange:S,open:_,hasChildren:u},t))};WE.propTypes={children:ne.any.isRequired,dataTest:ne.string.isRequired,fullPath:ne.string.isRequired,hasChildren:ne.bool.isRequired,loading:ne.bool.isRequired,node:ne.shape({displayName:ne.string.isRequired,id:ne.string.isRequired,children:ne.number,path:ne.string}).isRequired,open:ne.bool.isRequired,rootId:ne.string.isRequired,onChange:ne.func.isRequired,onToggleOpen:ne.func.isRequired,checked:ne.bool,disableSelection:ne.bool,hasSelectedDescendants:ne.bool,highlighted:ne.bool,selected:ne.arrayOf(La),singleSelection:ne.bool};const tC={styles:pe.createElement(_t,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},YE=()=>pe.createElement("div",{className:"jsx-2503342345"},pe.createElement(Ea,{extrasmall:!0,className:tC.className}),pe.createElement("style",null,tC.styles),pe.createElement(_t,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),kR={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},AR=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:n}=i;const s=Fe.useRef(!1),{called:l,loading:u,error:r,data:p}=ja(kR,{variables:{id:e.id}}),f=Fe.useMemo(()=>{if(!p)return;if(!e.children)return[];const{orgUnit:m}=p;return t?m.children:rR(m.children)},[p,t]);return Fe.useEffect(()=>{n&&f&&!s.current&&(n({...e,children:f}),s.current=!0)},[n,f,s]),{called:l,loading:u,error:r||null,data:f}},MR=i=>{let{orgChildren:e,filter:t,node:n}=i;return t!=null&&t.length?e.filter(s=>OE(t,`${n.path}/${s.id}`)):e},ZE=i=>{let{node:e,autoExpandLoadingError:t,dataTest:n,disableSelection:s,expanded:l,filter:u,highlighted:r,isUserDataViewFallback:p,onChange:f,onChildrenLoaded:m,onCollapse:v,onExpand:y,parentPath:_,renderNodeLabel:b,rootId:C,selected:E,singleSelection:S,suppressAlphabeticalSorting:x,OrganisationUnitNode:A}=i;const D=AR({node:e,isUserDataViewFallback:p,suppressAlphabeticalSorting:x,onComplete:m}),T=D.called&&!D.loading&&!D.error,k=T?MR({orgChildren:D.data,filter:u,node:e}):[];return pe.createElement(pe.Fragment,null,D.loading&&pe.createElement(YE,null),D.error&&`Error: ${D.error}`,T&&!k.length&&Oe.t("No children match filter"),!!k.length&&k.map(N=>{const W=`${_}/${N.id}`;return pe.createElement(A,{autoExpandLoadingError:t,dataTest:n,disableSelection:s,displayName:N.displayName,expanded:l,filter:u,highlighted:r,id:N.id,isUserDataViewFallback:p,key:W,onChange:f,onChildrenLoaded:m,onCollapse:v,onExpand:y,path:W,renderNodeLabel:b,rootId:C,selected:E,singleSelection:S,suppressAlphabeticalSorting:x})}))};ZE.propTypes={OrganisationUnitNode:ne.func.isRequired,dataTest:ne.string.isRequired,node:ne.object.isRequired,parentPath:ne.string.isRequired,renderNodeLabel:ne.func.isRequired,rootId:ne.string.isRequired,onChange:ne.func.isRequired,autoExpandLoadingError:ne.bool,disableSelection:ne.bool,expanded:ne.arrayOf(La),filter:ne.arrayOf(La),highlighted:ne.arrayOf(La),isUserDataViewFallback:ne.bool,selected:ne.arrayOf(La),singleSelection:ne.bool,suppressAlphabeticalSorting:ne.bool,onChildrenLoaded:ne.func,onCollapse:ne.func,onExpand:ne.func};const PR=i=>{let{path:e,expanded:t,onExpand:n,onCollapse:s,errorMessage:l,autoExpandLoadingError:u}=i;const r=u&&!!l,[p,f]=Fe.useState(!!l);Fe.useEffect(()=>{r&&!p&&(n({path:e}),f(!0))},[r,p]);const m=r&&!p||!!t.includes(e);return{open:m,onToggleOpen:()=>m?s({path:e}):n({path:e}),openedOnceDueToError:p}},IR={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},DR=(i,e)=>{let{displayName:t,isUserDataViewFallback:n}=e;if(!t)throw new Error('"displayName" is required');const s={id:i,isUserDataViewFallback:n},{loading:l,error:u,data:r={}}=ja(IR,{variables:s});return{loading:l,error:u||null,data:{id:i,displayName:t,...r.orgUnit}}},o_=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:n,displayName:s,expanded:l,highlighted:u,id:r,isUserDataViewFallback:p,path:f,renderNodeLabel:m,rootId:v,selected:y,singleSelection:_,filter:b,suppressAlphabeticalSorting:C,onChange:E,onChildrenLoaded:S,onCollapse:x,onExpand:A}=i;const D=DR(r,{isUserDataViewFallback:p,displayName:s}),T=nR(f,v),k={displayName:s,id:r,...D.data,path:T},N=!!k.children&&k.children>0,W=SR(T,y),Z=u.includes(f),{open:K,onToggleOpen:j}=PR({autoExpandLoadingError:e,errorMessage:D.error&&D.error.toString(),path:T,expanded:l,onExpand:A,onCollapse:x}),V=!!y.find(U=>U.match(new RegExp(`${T}$`))),$=m({disableSelection:n,hasChildren:N,hasSelectedDescendants:W,loading:D.loading,error:D.error,selected:y,open:K,path:f,singleSelection:_,node:k,label:s,checked:V,highlighted:Z}),L=pe.createElement(WE,{node:k,fullPath:f,open:K,loading:D.loading,checked:V,rootId:v,onChange:E,dataTest:`${t}-label`,selected:y,hasChildren:N,highlighted:Z,onToggleOpen:j,disableSelection:n,singleSelection:_,hasSelectedDescendants:W},$),R=N&&!K&&!D.error,G=N&&K&&!D.error;return pe.createElement(jE,{dataTest:`${t}-node`,open:K,onOpen:j,onClose:j,component:L,icon:D.loading&&pe.createElement(YE,null)},D.error&&pe.createElement(FE,{dataTest:t},Oe.t("Could not load children")),R&&pe.createElement("span",{"data-test":`${t}-placeholder`}),G&&pe.createElement(ZE,{OrganisationUnitNode:o_,node:k,autoExpandLoadingError:e,dataTest:t,disableSelection:n,expanded:l,filter:b,highlighted:u,isUserDataViewFallback:p,onChange:E,onChildrenLoaded:S,onCollapse:x,onExpand:A,parentPath:f,renderNodeLabel:m,rootId:v,selected:y,singleSelection:_,suppressAlphabeticalSorting:C}))};o_.propTypes={dataTest:ne.string.isRequired,id:ne.string.isRequired,renderNodeLabel:ne.func.isRequired,rootId:ne.string.isRequired,onChange:ne.func.isRequired,autoExpandLoadingError:ne.bool,disableSelection:ne.bool,displayName:ne.string,expanded:ne.arrayOf(La),filter:ne.arrayOf(La),highlighted:ne.arrayOf(La),isUserDataViewFallback:ne.bool,path:La,selected:ne.arrayOf(La),singleSelection:ne.bool,suppressAlphabeticalSorting:ne.bool,onChildrenLoaded:ne.func,onCollapse:ne.func,onExpand:ne.func};const RR=i=>{let{label:e}=i;return e},LR=(i,e)=>i!=null&&i.length?e.filter(t=>OE(i,`/${t}`)):e,XE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return pe.createElement("div",{"data-test":e},Oe.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};XE.propTypes={error:ne.string.isRequired,dataTest:ne.string};const KE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return pe.createElement("div",{"data-test":e,className:"jsx-814846266"},pe.createElement(Ea,{small:!0}),pe.createElement(_t,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};KE.propTypes={dataTest:ne.string};const NR=i=>Array.from(new Set(i)),zR=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((n,s)=>`/${e.slice(0,s+1).join("/")}`);return NR(t)},jR=i=>i.reduce((e,t)=>{const n=zR(t);return[...e,...n]},[]),OR=i=>{let{expanded:e,setExpanded:t,onExpand:n,onCollapse:s}=i;return{handleExpand:r=>{let{path:p,...f}=r;e.includes(p)||(t([...e,p]),n&&n({path:p,...f}))},handleCollapse:r=>{let{path:p,...f}=r;const m=e.indexOf(p);if(m!==-1){const v=m===0?e.slice(1):[...e.slice(0,m),...e.slice(m+1)];t(v),s&&s({path:p,...f})}}}},FR=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:n,expandedControlled:s,handleExpandControlled:l,handleCollapseControlled:u}=i;const r=!!s,p=r?[]:jR(e),[f,m]=Fe.useState(p);if(r)return{expanded:s,handleExpand:l,handleCollapse:u};const{handleExpand:v,handleCollapse:y}=OR({expanded:f,setExpanded:m,onExpand:t,onCollapse:n});return{expanded:f,handleExpand:v,handleCollapse:y}},BR=i=>{const[e,t]=Fe.useState(0);return Fe.useEffect(()=>{const n=e+1;i===!0&&t(n)},[i]),e},$R=i=>{const t=Object.entries(i).map(n=>{let[s,l]=n;const u=l.displayName||"";return[s,{...l,displayName:u}]});return Object.fromEntries(t)},UR=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:n=>{let{isUserDataViewFallback:s}=n;return{isUserDataViewFallback:s,fields:["displayName","path","id"]}}}}),{}),VR=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=Fe.useMemo(()=>UR(i),[i]),s=ja(t,{variables:{isUserDataViewFallback:e}}),{called:l,loading:u,error:r,data:p,refetch:f}=s,m=Fe.useMemo(()=>p&&$R(p),[p]);return{called:l,loading:u,error:r||null,data:m||null,refetch:f}},Fg=[],QE=i=>{let{onChange:e,roots:t,autoExpandLoadingError:n,dataTest:s="dhis2-uiwidgets-orgunittree",disableSelection:l,forceReload:u,highlighted:r=Fg,isUserDataViewFallback:p,initiallyExpanded:f=Fg,filter:m=Fg,renderNodeLabel:v=RR,selected:y=Fg,singleSelection:_,suppressAlphabeticalSorting:b,expanded:C,handleExpand:E,handleCollapse:S,onExpand:x,onCollapse:A,onChildrenLoaded:D}=i;const T=LR(m,Array.isArray(t)?t:[t]),k=BR(u),[N,W]=Fe.useState(k),{called:Z,loading:K,error:j,data:V,refetch:$}=VR(T,{isUserDataViewFallback:p,suppressAlphabeticalSorting:b}),{expanded:L,handleExpand:R,handleCollapse:G}=FR({initiallyExpanded:f,onExpand:x,onCollapse:A,expandedControlled:C,handleExpandControlled:E,handleCollapseControlled:S});Fe.useEffect(()=>($&&k>0&&k!==N&&($(),W(k)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[k,N,$]);const U=!Z||K;return pe.createElement("div",{"data-test":s},U&&pe.createElement(KE,null),j&&pe.createElement(XE,{error:j}),!j&&!U&&T.map(B=>{const H=V[B];return pe.createElement(o_,{key:H.path,rootId:B,autoExpandLoadingError:n,dataTest:s,disableSelection:l,displayName:H.displayName,expanded:L,highlighted:r,id:B,isUserDataViewFallback:p,filter:m,path:H.path,renderNodeLabel:v,selected:y,singleSelection:_,suppressAlphabeticalSorting:b,onChange:e,onChildrenLoaded:D,onCollapse:G,onExpand:R})}))};QE.propTypes={roots:ne.oneOfType([ne.string,ne.arrayOf(ne.string)]).isRequired,onChange:ne.func.isRequired,autoExpandLoadingError:ne.bool,dataTest:ne.string,disableSelection:ne.bool,expanded:Qr(i=>!!i.handleExpand||!!i.handleCollapse,ne.arrayOf(ne.string)),filter:ne.arrayOf(La),forceReload:ne.bool,handleCollapse:Qr(i=>!!i.expanded||!!i.handleExpand,ne.func),handleExpand:Qr(i=>!!i.expanded||!!i.handleCollapse,ne.func),highlighted:ne.arrayOf(La),initiallyExpanded:ne.arrayOf(La),isUserDataViewFallback:ne.bool,renderNodeLabel:ne.func,selected:ne.arrayOf(La),singleSelection:ne.bool,suppressAlphabeticalSorting:ne.bool,onChildrenLoaded:ne.func,onCollapse:ne.func,onExpand:ne.func};const GR="",HR="",qR="",WR={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}}   {{firstItem}} - {{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}}   {{firstItem}} - {{lastItem}}","Page {{page}}":" {{page}}",Next:GR,Page:HR,"Items per page":"  ",Previous:qR,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"   {{page}}   {{firstItem}} - {{lastItem}}    {{pageCount}}   {{total}} "},YR="",ZR="",XR="",KR={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:YR,Page:ZR,"Items per page":"",Previous:XR,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},QR="",JR="",eL="",tL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:QR,Page:JR,"Items per page":"",Previous:eL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},iL="",nL="",rL="",sL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:iL,Page:nL,"Items per page":"",Previous:rL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},aL="Dal",oL="Strana",lL="Pedchoz",cL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Strnka {{page}} z {{pageCount}}, poloky {{firstItem}}-{{lastItem}} z {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Strnka {{page}}, poloky {{firstItem}}-{{lastItem}}","Page {{page}}":"Strnka {{page}}",Next:aL,Page:oL,"Items per page":"Poloek na strnce",Previous:lL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Nachzte se na strnce {{page}} zobrazujc poloky {{firstItem}}-{{lastItem}}, ale je zde {{pageCount}} strnek a {{total}} poloek"},uL="Next",dL="",hL="",pL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:uL,Page:dL,"Items per page":"",Previous:hL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},fL="Next",mL="Page",gL="Previous",yL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Page {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Page {{page}}",Next:fL,Page:mL,"Items per page":"Items per page",Previous:gL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items"},xL="Siguiente",vL="Pgina",bL="Anterior",_L={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pgina {{page}} de {{pageCount}}, elementos {{firstItem}} - {{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pgina {{page}}, elementos {{firstItem}}-{{lastItem}}","Page {{page}}":"Pgina {{page}}",Next:xL,Page:vL,"Items per page":"Elementos por pgina",Previous:bL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},wL="Siguiente",CL="Pgina",TL="Anterior",SL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pgina {{page}} de {{pageCount}}, puntos {{firstItem}}-{{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pgina {{page}}, artculos {{firstItem}}-{{lastItem}}","Page {{page}}":"Pgina {{page}}",Next:wL,Page:CL,"Items per page":"Artculos por pgina",Previous:TL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Usted est en la pgina {{page}} que muestra los artculos {{firstItem}}-{{lastItem}}, pero hay pginas {{pageCount}} y artculos {{total}} "},EL="Suivant",kL="Page",AL="Prcdent",ML={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:EL,Page:kL,"Items per page":"",Previous:AL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},PL="Selanjutnya",IL="Halaman",DL="Sebelumnya",RL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:PL,Page:IL,"Items per page":"",Previous:DL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},LL="",NL="",zL="",jL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:LL,Page:NL,"Items per page":"",Previous:zL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},OL="",FL="",BL="",$L={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}} ,  {{firstItem}} - {{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}} ,  {{firstItem}} - {{lastItem}}","Page {{page}}":" {{page}}",Next:OL,Page:FL,"Items per page":"",Previous:BL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":" {{page}}  {{firstItem}} - {{lastItem}} ,  {{pageCount}}  {{total}} "},UL="",VL="",GL="",HL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:UL,Page:VL,"Items per page":"",Previous:GL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},qL="Neste",WL="Side",YL="Forrige",ZL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Side {{page}} av {{pageCount}}, elementer {{firstItem}}-{{lastItem}} av {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Side {{page}}, elementer {{firstItem}}-{{lastItem}}","Page {{page}}":"Side {{page}}",Next:qL,Page:WL,"Items per page":"Elementer per side",Previous:YL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Du er p side {{page}} som viser elementer {{firstItem}}-{{lastItem}}, men det er {{pageCount}} sider og {{total}} elementer."},XL="Volgende",KL="Bladzijde",QL="Vorige",JL={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pagina {{page}} van {{pageCount}}, items {{firstItem}}-{{lastItem}} van {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pagina {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Pagina {{page}}",Next:XL,Page:KL,"Items per page":"Items per pagina",Previous:QL,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"U bevindt zich op pagina {{page}} laat items zien {{firstItem}}-{{lastItem}}, maar er zijn {{pageCount}} pagina's en {{total}} items"},e4="",t4="\\:",i4="",n4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:e4,Page:t4,"Items per page":"",Previous:i4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},r4="",s4="",a4="",o4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:r4,Page:s4,"Items per page":"",Previous:a4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},l4="Prximo",c4="Pagina",u4="Anterior",d4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:l4,Page:c4,"Items per page":"",Previous:u4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},h4="Prximo",p4="Pgina",f4="Anterior",m4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:h4,Page:p4,"Items per page":"",Previous:f4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},g4="Urmtorul",y4="",x4="",v4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:g4,Page:y4,"Items per page":"",Previous:x4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},b4="",_4="",w4="",C4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}},  {{firstItem}}-{{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}},  {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:b4,Page:_4,"Items per page":"   ",Previous:w4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"    {{page}},    {{firstItem}}-{{lastItem}},     -{{pageCount}},   - {{total}}."},T4="Nsta",S4="Sida",E4="Tidigare",k4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:T4,Page:S4,"Items per page":"",Previous:E4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},A4="Prximu",M4="",P4="Anterior",I4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:A4,Page:M4,"Items per page":"",Previous:P4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},D4="",R4="",L4="",N4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:D4,Page:R4,"Items per page":"",Previous:L4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},z4="",j4="",O4="",F4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}}, ' {{firstItem}}-{{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}}, ' {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:z4,Page:j4,"Items per page":"'  ",Previous:O4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"    {{page}},   ' {{firstItem}}-{{lastItem}},   {{pageCount}}   {{total}} '"},B4="",$4="",U4="",V4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:B4,Page:$4,"Items per page":"",Previous:U4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},G4="",H4="Sahifa",q4="Oldingi",W4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:G4,Page:H4,"Items per page":"",Previous:q4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Y4="",Z4="",X4="",K4={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Y4,Page:Z4,"Items per page":"",Previous:X4,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Q4="",J4="Sahifa",eN="Oldingi",tN={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Q4,Page:J4,"Items per page":"",Previous:eN,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},iN="Sau",nN="Trang",rN="Trc",sN={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:iN,Page:nN,"Items per page":"",Previous:rN,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},aN="",oN="",lN="",cN={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}} {{firstItem}}-{{lastItem}}  {{total}} ","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}} {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:aN,Page:oN,"Items per page":"",Previous:lN,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":" {{page}}  {{firstItem}}-{{lastItem}} {{pageCount}}  {{total}} "},uN="",dN="",hN="",pN={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:uN,Page:dN,"Items per page":"",Previous:hN,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},qn="default";Oe.addResources("ar",qn,WR);Oe.addResources("ar_IQ",qn,KR);Oe.addResources("bn",qn,tL);Oe.addResources("ckb",qn,sL);Oe.addResources("cs",qn,cL);Oe.addResources("da",qn,pL);Oe.addResources("en",qn,yL);Oe.addResources("es",qn,_L);Oe.addResources("es_419",qn,SL);Oe.addResources("fr",qn,ML);Oe.addResources("id",qn,RL);Oe.addResources("km",qn,jL);Oe.addResources("lo",qn,$L);Oe.addResources("my",qn,HL);Oe.addResources("nb",qn,ZL);Oe.addResources("nl",qn,JL);Oe.addResources("prs",qn,n4);Oe.addResources("ps",qn,o4);Oe.addResources("pt",qn,d4);Oe.addResources("pt_BR",qn,m4);Oe.addResources("ro",qn,v4);Oe.addResources("ru",qn,C4);Oe.addResources("sv",qn,k4);Oe.addResources("tet",qn,I4);Oe.addResources("tg",qn,N4);Oe.addResources("uk",qn,F4);Oe.addResources("ur",qn,V4);Oe.addResources("uz_Latn",qn,W4);Oe.addResources("uz_UZ_Cyrl",qn,K4);Oe.addResources("uz_UZ_Latn",qn,tN);Oe.addResources("vi",qn,sN);Oe.addResources("zh",qn,cN);Oe.addResources("zh_CN",qn,pN);const uv=i=>typeof i=="number"&&!isNaN(i),fN=i=>{let{firstItem:e,lastItem:t,page:n,pageCount:s,total:l}=i;return uv(l)&&uv(t)?Oe.t("Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}",{page:n,pageCount:s,firstItem:e,lastItem:t,total:l}):uv(t)?Oe.t("Page {{page}}, items {{firstItem}}-{{lastItem}}",{page:n,firstItem:e,lastItem:t}):Oe.t("Page {{page}}",{page:n})},mN=i=>{let{isLastPage:e,page:t,pageLength:n,pageSize:s,total:l}=i,u=(t-1)*s+1,r=u+s-1;return typeof l=="number"&&(l===0?(u=0,r=0):r>l&&(r=l)),typeof n=="number"&&(r=u+n-1),e&&isNaN(l)&&isNaN(n)&&(r=NaN),{firstItem:u,lastItem:r}},iC=(i,e)=>typeof i=="function"?i(e):i,JE=i=>{let{dataTest:e,isNextDisabled:t,isPreviousDisabled:n,nextPageText:s,page:l,previousPageText:u,onClick:r}=i;return pe.createElement("div",{"data-test":`${e}-pagecontrols`,className:_t.dynamic([["3252926163",[Ut.dp4]]])},pe.createElement(sn,{secondary:!0,className:"button-previous",small:!0,disabled:n,onClick:()=>r(l-1),dataTest:`${e}-page-previous`},pe.createElement("div",{className:_t.dynamic([["3252926163",[Ut.dp4]]])+" navigator-icon"},pe.createElement(T1,null)),iC(u)),pe.createElement(sn,{secondary:!0,className:"button-next",small:!0,disabled:t,onClick:()=>r(l+1),dataTest:`${e}-page-next`},iC(s),pe.createElement("div",{className:_t.dynamic([["3252926163",[Ut.dp4]]])+" navigator-icon"},pe.createElement(S1,null))),pe.createElement(_t,{id:"3252926163",dynamic:[Ut.dp4]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","div.__jsx-style-dynamic-selector .button-previous{height:32px;padding-inline-start:0;}",`div.__jsx-style-dynamic-selector .button-next{height:32px;padding-inline-end:0;margin-inline-start:${Ut.dp4};}`,"div.__jsx-style-dynamic-selector .navigator-icon.__jsx-style-dynamic-selector:dir(rtl){-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}"]))};JE.propTypes={dataTest:ne.string.isRequired,nextPageText:ne.oneOfType([ne.string,ne.func]).isRequired,page:ne.number.isRequired,previousPageText:ne.oneOfType([ne.string,ne.func]).isRequired,onClick:ne.func.isRequired,isNextDisabled:ne.bool,isPreviousDisabled:ne.bool};const gN=(i,e)=>typeof i=="function"?i(e):i,yN=i=>Array.from({length:i},(e,t)=>(t+1).toString()),e3=i=>{let{dataTest:e,disabled:t,pageSelectText:n,onChange:s,page:l,pageCount:u}=i;return pe.createElement("div",{"data-test":`${e}-gotopage`,className:_t.dynamic([["599400768",[Ut.dp12]]])},pe.createElement(Hl,{dense:!0,disabled:t,selected:l.toString(),onChange:r=>{let{selected:p}=r;return s(parseInt(p,10))},className:"select",dataTest:`${e}-page-select`,prefix:gN(n)},yN(u).map(r=>pe.createElement(Ca,{key:r,value:r,label:r}))),pe.createElement(_t,{id:"599400768",dynamic:[Ut.dp12]},[`div.__jsx-style-dynamic-selector{margin-inline-end:${Ut.dp12};}`]))};e3.propTypes={dataTest:ne.string.isRequired,page:ne.number.isRequired,pageCount:ne.number.isRequired,pageSelectText:ne.oneOfType([ne.string,ne.func]).isRequired,onChange:ne.func.isRequired,disabled:ne.bool};const xN=(i,e)=>typeof i=="function"?i(e):i,t3=i=>{let{dataTest:e,disabled:t,pageSizeSelectText:n,pageSize:s,pageSizes:l,onChange:u}=i;return pe.createElement("div",{"data-test":`${e}-pagesize`,className:_t.dynamic([["3539890457",[Ut.dp12]]])},pe.createElement(Hl,{dense:!0,disabled:t,selected:s.toString(),onChange:r=>{let{selected:p}=r;return u(parseInt(p,10))},className:"select",dataTest:`${e}-pagesize-select`,prefix:xN(n)},l.map(r=>pe.createElement(Ca,{key:r,value:r,label:r}))),pe.createElement(_t,{id:"3539890457",dynamic:[Ut.dp12]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Ut.dp12};-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}`]))};t3.propTypes={dataTest:ne.string.isRequired,pageSize:ne.number.isRequired,pageSizeSelectText:ne.oneOfType([ne.string,ne.func]).isRequired,pageSizes:ne.arrayOf(ne.string).isRequired,onChange:ne.func.isRequired,disabled:ne.bool};const vN=(i,e)=>typeof i=="function"?i(e):i,i3=i=>{let{dataTest:e,firstItem:t,inactive:n,lastItem:s,page:l,pageCount:u,pageSummaryText:r,total:p}=i;const f=vN(r,{firstItem:t,lastItem:s,page:l,pageCount:u,total:p});return pe.createElement("div",{"data-test":`${e}-summary`,className:_t.dynamic([["3973865131",[Ut.dp12,je.grey700,je.grey500]]])},pe.createElement("span",{className:_t.dynamic([["3973865131",[Ut.dp12,je.grey700,je.grey500]]])+" "+(vn({inactive:n})||"")},f),pe.createElement(_t,{id:"3973865131",dynamic:[Ut.dp12,je.grey700,je.grey500]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Ut.dp12};}`,`span.__jsx-style-dynamic-selector{color:${je.grey700};font-size:14px;}`,`span.inactive.__jsx-style-dynamic-selector{color:${je.grey500};}`]))};i3.propTypes={dataTest:ne.string.isRequired,page:ne.number.isRequired,pageSummaryText:ne.oneOfType([ne.string,ne.func]).isRequired,firstItem:ne.number,inactive:ne.bool,lastItem:ne.number,pageCount:ne.number,total:ne.number};const bN=2e3,Iu={dataTest:"dhis2-uiwidgets-pagination",nextPageText:()=>Oe.t("Next"),pageSelectText:()=>Oe.t("Page"),pageSizes:["5","10","20","30","40","50","75","100"],pageSizeSelectText:()=>Oe.t("Items per page"),pageSummaryText:fN,previousPageText:()=>Oe.t("Previous")},l_=i=>{let{className:e,dataTest:t=Iu.dataTest,disabled:n,hidePageSelect:s,hidePageSizeSelect:l,hidePageSummary:u,isLastPage:r,nextPageText:p=Iu.nextPageText,onPageChange:f,onPageSizeChange:m,page:v,pageCount:y,pageLength:_,pageSelectText:b=Iu.pageSelectText,pageSize:C,pageSizes:E=Iu.pageSizes,pageSizeSelectText:S=Iu.pageSizeSelectText,pageSummaryText:x=Iu.pageSummaryText,previousPageText:A=Iu.previousPageText,total:D}=i;const{firstItem:T,lastItem:k}=mN({isLastPage:r,page:v,pageLength:_,pageSize:C,total:D}),N=!s&&typeof y=="number"&&y>1&&y<=bN;return pe.createElement("div",{"data-test":t,className:_t.dynamic([["3796520840",[Ut.dp4]]])+" "+(vn("container",e)||"")},l?pe.createElement("div",{className:_t.dynamic([["3796520840",[Ut.dp4]]])+" spacer"}):pe.createElement(t3,{dataTest:t,disabled:n,pageSize:C,pageSizes:E,onChange:m,pageSizeSelectText:S}),!u&&pe.createElement(i3,{dataTest:t,inactive:n,firstItem:T,lastItem:k,page:v,pageCount:y,pageSummaryText:x,total:D}),pe.createElement("div",{className:_t.dynamic([["3796520840",[Ut.dp4]]])+" page-navigation"},N&&pe.createElement(e3,{dataTest:t,disabled:n,pageSelectText:b,page:v,pageCount:y,onChange:f}),pe.createElement(JE,{dataTest:t,nextPageText:p,page:v,previousPageText:A,onClick:f,isNextDisabled:n||r||v===y,isPreviousDisabled:n||v===1})),pe.createElement(_t,{id:"3796520840",dynamic:[Ut.dp4]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;row-gap:${Ut.dp4};}`,".spacer.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".page-navigation.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;}"]))};l_.propTypes={page:ne.number.isRequired,pageSize:ne.number.isRequired,className:ne.string,dataTest:ne.string,disabled:ne.bool,hidePageSelect:ne.bool,hidePageSizeSelect:ne.bool,hidePageSummary:ne.bool,isLastPage:ne.bool,nextPageText:ne.oneOfType([ne.string,ne.func]),pageCount:ne.number,pageLength:Qr(i=>i.isLastPage,ne.number),pageSelectText:ne.oneOfType([ne.string,ne.func]),pageSizeSelectText:ne.oneOfType([ne.string,ne.func]),pageSizes:ne.arrayOf(ne.string),pageSummaryText:ne.oneOfType([ne.string,ne.func]),previousPageText:ne.oneOfType([ne.string,ne.func]),total:ne.number,onPageChange:ne.func,onPageSizeChange:ne.func};const _n="ACCESS_NONE",er="ACCESS_VIEW_ONLY",or="ACCESS_VIEW_AND_EDIT",c_="SHARE_TARGET_EXTERNAL",yd="SHARE_TARGET_PUBLIC",xd="SHARE_TARGET_USER",ep="SHARE_TARGET_GROUP",n3={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},r3=Object.values(n3),Fy=Fe.createContext(!1);var _N=void 0;const wN=(i,e,t)=>{let n;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const r=_N,p=()=>{n=null,i.apply(r,l)};clearTimeout(n),n=setTimeout(p,e)}},dv=i=>i===void 0?_n:typeof i=="boolean"?i?er:_n:i.startsWith("rw")?or:i.startsWith("r-")?er:_n,s3=i=>{if(typeof i=="boolean")return{data:_n,metadata:dv(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:dv(t),metadata:dv(e)}},nC=i=>{switch(i){case _n:return"--";case er:return"r-";case or:return"rw";default:return"--"}},kf=i=>`${nC(i.metadata)}${nC(i.data)}----`,Bg=i=>{let{access:e,...t}=i;return{...t,access:s3(e)}},CN=[c_,yd],rC=i=>!CN.includes(i),TN=i=>{let{object:e,type:t,access:n,id:s}=i;switch(t){case"public":return{object:{...e,publicAccess:kf(n)}};case"group":{const l=e.userGroupAccesses.map(r=>r.id!==s?r:{...r,access:kf(n)}),u={object:{...e,userGroupAccesses:l}};return console.log(u),u}case"user":{const l=e.userAccesses.map(r=>r.id!==s?r:{...r,access:kf(n)});return{object:{...e,userAccesses:l}}}}},SN=i=>{let{object:e,type:t,id:n,access:s,name:l}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:n,name:l,access:kf(s)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:n,name:l,access:kf(s)}]}}}},EN=i=>{let{object:e,type:t,id:n}=i;switch(t){case"group":{const s=e.userGroupAccesses.filter(u=>u.id!==n);return{object:{...e,userGroupAccesses:s}}}case"user":{const s=e.userAccesses.filter(u=>u.id!==n);return{object:{...e,userAccesses:s}}}}},kN="",AN="",MN=" ",PN="",IN="",DN={"View only":" ","View and edit":" ","No access":"  ","Give access to a user or group":"      ","Data access level":"","Choose a level":"","Not available offline":"     ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"      ","User / Group":"","All users":" ","Anyone logged in":"","User group":" ",User:kN,Data:AN,"Remove access":" ",Metadata:MN,"User or group":"  ",Search:PN,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:IN,"Dashboard sharing":""},RN="",LN="",NN="",zN="",jN="",ON={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:RN,Data:LN,"Remove access":"",Metadata:NN,"User or group":"",Search:zN,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:jN,"Dashboard sharing":""},FN=" ",BN="",$N="",UN={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:FN,"Remove access":"","User or group":"",Search:BN,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:$N,"Dashboard sharing":""},VN="Uivatel",GN="Data",HN="Metadata",qN="Hledat",WN="Zavt",YN={"View only":"Pouze zobrazen","View and edit":"Zobrazen a pravy","No access":"dn pstup","Give access to a user or group":"Udlte pstup uivateli nebo skupin","Data access level":"","Choose a level":"","Not available offline":"Nen k dispozici offline","Metadata access level":"","Access level":"rove pstupu","Give access":"Povolit pstup","Users and groups that currently have access":"Uivatel a skupiny, kte maj aktuln pstup","User / Group":"Uivatel / Skupina","All users":"Vichni uivatel","Anyone logged in":"","User group":"Uivatelsk skupina",User:VN,Data:GN,"Remove access":"Odebrat pstup",Metadata:HN,"User or group":"Uivatel nebo skupina",Search:qN,"Apply dashboard sharing settings to visualizations":"Na vizualizace pouijte nastaven sdlen ovldacho panelu","Something went wrong":"Nco se pokazilo","Apply sharing to dashboard visualizations":"Pout sdlen na vizualizace ovldacho panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovny dn vizualizace. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne vechny vizualizace bylo mon spn aktualizovat. {{ success }} aktualizovno spn, {{ failed }} se nepodailo aktualizovat. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovny dn vizualizace, protoe nastaven sdlen je ji dostaujc.","Successfully updated sharing for all visualizations.":"spn aktualizovno sdlen pro vechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne vechna nastaven sdlen vizualizac bylo nutn aktualizovat. {{ updated }} aktualizovno, {{ skipped }} ji m dostaten nastaven sdlen.","There are no users or groups to apply sharing settings for.":"Nejsou dn uivatel ani skupiny, pro kter by bylo mon pout nastaven sdlen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Poet vizualizac na tomto dicm panelu, kter potenciln zskaj aktualizovan nastaven sdlen: {{ visualizationsCount }}. Poet uivatel nebo skupin, na kter se tato aktualizovan nastaven budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Pouit stejnch nastaven sdlen zajist, e uivatel a skupiny, kter maj pstup k dicmu panelu, budou mt tak pstup k jeho vizualizacm (grafy, tabulky, mapy, grafy udlost a zprvy o udlostech) alespo Pouze zobrazen.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uivatel nebo skupina ji m k vizualizaci pstup Zobrazen a pravy, nebude to omezeno na Pouze zobrazen. rove pstupu Vichni uivatel nebude aktualizovna ani zmnna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Pouit sdlen nelze vrtit zpt a je nutn jej provst znovu, pokud na ovldac panel pidte nov vizualizace nebo se zmn jeho nastaven sdlen.","Sharing and access: {{- objectName}}":"Sdlen a pstup: {{- objectName}}","Sharing and access":"Sdlen a pstup",Close:WN,"Dashboard sharing":"Sdlen ovldacho panelu"},ZN="",XN="",KN="",QN="",JN="Close",ez={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:ZN,Data:XN,"Remove access":"",Metadata:KN,"User or group":"",Search:QN,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:JN,"Dashboard sharing":""},tz="User",iz="Data",nz="Metadata",rz="Search",sz="Close",az={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:tz,Data:iz,"Remove access":"Remove access",Metadata:nz,"User or group":"User or group",Search:rz,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:sz,"Dashboard sharing":"Dashboard sharing"},oz="Usuario",lz="Datos",cz="Metadatos",uz="Buscar",dz="Cerrar",hz={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:oz,Data:lz,"Remove access":"Eliminar acceso",Metadata:cz,"User or group":"Usuario o Grupo",Search:uz,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuracin compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con xito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuracin de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuracin para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuracin de uso compartido actualizado con xito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualizacin. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuracin de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este tablero que potencialmente actualizarn su confugiracin de uso compartido: {{ visualizationsCount }}. El nmero de usuarios o grupos a los que se aplicarn estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicacin de la misma configuracin para compartir garantiza que los usuarios y grupos que tienen acceso al tablero tambin tienen al menos acceso de "Solo lectura" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, este no se reducir a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuracin de uso compartido no puede deshacerse, y debers hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuracin de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:dz,"Dashboard sharing":"Compartir tablero"},pz="",fz="Datos",mz="Metadatos",gz="Buscar",yz="Cerrar",xz={"View only":"Ver slo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:pz,Data:fz,"Remove access":"Eliminar el acceso",Metadata:mz,"User or group":"Usuario o grupo",Search:gz,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la comparticin a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualizacin. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la comparticin de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualizacin porque los ajustes de comparticin ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con xito la comparticin de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de comparticin de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tena suficientes ajustes de comparticin.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuracin de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este cuadro de mando que potencialmente obtendrn ajustes de uso compartido actualizados: {{ visualizationsCount }}. Nmero de usuarios o grupos a los que se aplicarn estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuracin de comparticin se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando tambin tienen al menos acceso de "slo visualizacin" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, ste no se reducir a "Slo ver". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicacin de la comparticin no puede deshacerse, y debe hacerse de nuevo si se aaden nuevas visualizaciones al cuadro de mandos o se cambia su configuracin de comparticin.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:yz,"Dashboard sharing":"Compartir el cuadro de mandos"},vz="",bz="",_z="",wz={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:vz,"Remove access":"","User or group":"",Search:bz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_z,"Dashboard sharing":""},Cz="Utilisateur",Tz="Donnes",Sz="Mtadonnes",Ez="Chercher",kz="Fermer",Az={"View only":"","View and edit":"","No access":"Pas d'accs","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accs","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:Cz,Data:Tz,"Remove access":"",Metadata:Sz,"User or group":"",Search:Ez,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourn","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:kz,"Dashboard sharing":""},Mz="",Pz="Data",Iz="Metadata",Dz="Pencarian",Rz="Tutup",Lz={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Mz,Data:Pz,"Remove access":"",Metadata:Iz,"User or group":"",Search:Dz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Rz,"Dashboard sharing":""},Nz="",zz="Data",jz="",Oz="",Fz="",Bz={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Nz,Data:zz,"Remove access":"",Metadata:jz,"User or group":"",Search:Oz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Fz,"Dashboard sharing":""},$z="",Uz="",Vz="",Gz="",Hz="",qz={"View only":"","View and edit":"  ","No access":"","Give access to a user or group":"  ","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"  ","User / Group":" / ","All users":"","Anyone logged in":"","User group":"",User:$z,Data:Uz,"Remove access":"",Metadata:Vz,"User or group":"  ",Search:Gz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":". .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":".  {{ success }} , {{ failed }} . .","No visualizations were updated because sharing settings are already sufficient.":".","Successfully updated sharing for all visualizations.":".","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":". {{ updated }} , {{ skipped }} .","There are no users or groups to apply sharing settings for.":"  .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":": {{ visualizationsCount }}.  : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'   ""  (, , ,   ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'   " "  "".  ""   .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":",    .","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:Hz,"Dashboard sharing":""},Wz="",Yz="",Zz="",Xz="",Kz="",Qz={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Wz,Data:Yz,"Remove access":"",Metadata:Zz,"User or group":"",Search:Xz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Kz,"Dashboard sharing":""},Jz="Bruker",e6="Data",t6="Metadata",i6="Sk",n6="Lukk",r6={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsniv","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:Jz,Data:e6,"Remove access":"",Metadata:t6,"User or group":"",Search:i6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:n6,"Dashboard sharing":""},s6="",a6="",o6="",l6={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:s6,"Remove access":"","User or group":"",Search:a6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:o6,"Dashboard sharing":""},c6="Gebruiker",u6="Gegevens",d6="Metagegevens",h6="Zoek",p6="Sluit",f6={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:c6,Data:u6,"Remove access":"Toegang verwijderen",Metadata:d6,"User or group":"Gebruiker of groep",Search:h6,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is gepdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk gepdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:p6,"Dashboard sharing":"Dashboard delen"},m6=" ",g6="",y6="",x6="",v6="",b6={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"  ",User:m6,Data:g6,"Remove access":"",Metadata:y6,"User or group":"",Search:x6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:v6,"Dashboard sharing":""},_6="",w6=" ()",C6="",T6="",S6="  ",E6={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:_6,Data:w6,"Remove access":"",Metadata:C6,"User or group":"",Search:T6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:S6,"Dashboard sharing":""},k6="Utilizador",A6="Dados",M6="Metadados",P6="Pesquisar",I6="Fechar",D6={"View only":"Ver apenas","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"No disponvel offline","Metadata access level":"","Access level":"Niveis de acesso ","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:k6,Data:A6,"Remove access":"",Metadata:M6,"User or group":"",Search:P6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:I6,"Dashboard sharing":""},R6="Usurio",L6="Dados",N6="Metadados",z6="Pesquisar",j6="Fechar",O6={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:R6,Data:L6,"Remove access":"",Metadata:N6,"User or group":"",Search:z6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:j6,"Dashboard sharing":""},F6="",B6="Cutare",$6="nchidere",U6={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:F6,"Remove access":"","User or group":"",Search:B6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:$6,"Dashboard sharing":""},V6="",G6="",H6="",q6="",W6="",Y6={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:V6,Data:G6,"Remove access":" ",Metadata:H6,"User or group":"  ",Search:q6,"Apply dashboard sharing settings to visualizations":"      ","Something went wrong":"-   ","Apply sharing to dashboard visualizations":"     ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"   . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"     . : {{ success }},  : {{ failed }} . ,             .","No visualizations were updated because sharing settings are already sufficient.":"   ,     .","Successfully updated sharing for all visualizations.":"     ","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"       . : {{ updated }},   : {{ skipped }}.","There are no users or groups to apply sharing settings for.":"        .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"    ,      : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"       ,    ,  (   )    (, , ,    ).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'        "  "  ,      " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"   .    ,          .","Sharing and access: {{- objectName}}":": {{- objectName}}","Sharing and access":"   ",Close:W6,"Dashboard sharing":"  "},Z6="",X6="",K6="",Q6="",J6="",ej={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"  ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Z6,Data:X6,"Remove access":"",Metadata:K6,"User or group":"",Search:Q6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:J6,"Dashboard sharing":""},tj="",ij="Data",nj="Metadata",rj="Sk",sj="Stnga",aj={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:tj,Data:ij,"Remove access":"",Metadata:nj,"User or group":"",Search:rj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ngot gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:sj,"Dashboard sharing":""},oj="",lj="Dadus",cj="",uj="",dj="Taka",hj={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:oj,Data:lj,"Remove access":"",Metadata:cj,"User or group":"",Search:uj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:dj,"Dashboard sharing":""},pj="",fj="",mj="",gj="",yj="",xj={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:pj,Data:fj,"Remove access":"",Metadata:mj,"User or group":"",Search:gj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:yj,"Dashboard sharing":""},vj="",bj="",_j="",wj="",Cj="",Tj={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"  ,    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:vj,Data:bj,"Remove access":" ",Metadata:_j,"User or group":"  ",Search:wj,"Apply dashboard sharing settings to visualizations":"        ","Something went wrong":" ","Apply sharing to dashboard visualizations":"      ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"  . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"    . {{ success }}  , {{ failed }}   . ,            .","No visualizations were updated because sharing settings are already sufficient.":"  ,      .","Successfully updated sharing for all visualizations.":"      .","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"         . {{ updated }} , {{ skipped }}      .","There are no users or groups to apply sharing settings for.":"   ,       .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"     ,       : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'     ,    ,      ,     " "    (, , ,      ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'         "  ",       " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"    ,     ,            .","Sharing and access: {{- objectName}}":" : {{- objectName}}","Sharing and access":" ",Close:Cj,"Dashboard sharing":"    "},Sj="",Ej="",kj=" ",Aj=" ",Mj="",Pj={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":" ",User:Sj,Data:Ej,"Remove access":"",Metadata:kj,"User or group":"",Search:Aj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Mj,"Dashboard sharing":""},Ij="Metadata",Dj="Izlash",Rj="Yopmoq",Lj={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taqiqlangan","Can view":" ","Can view and edit":"",Metadata:Ij,"Remove access":"","User or group":"",Search:Dj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Rj,"Dashboard sharing":""},Nj="",zj="",jj="",Oj="",Fj="",Bj={"View only":"  ","View and edit":"  ","No access":"   ","Give access to a user or group":"     ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":"   ","Give access":" ","Users and groups that currently have access":"     ","User / Group":"/","All users":" ","Anyone logged in":"","User group":" ",User:Nj,Data:zj,"Remove access":"  ",Metadata:jj,"User or group":"  ",Search:Oj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:Fj,"Dashboard sharing":"  "},$j="Foydalanuvchi",Uj="",Vj="Metadata",Gj="Izlash",Hj="Yopmoq",qj={"View only":"","View and edit":"","No access":"Kirish taqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:$j,Data:Uj,"Remove access":"",Metadata:Vj,"User or group":"",Search:Gj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Hj,"Dashboard sharing":""},Wj="Ngi dng",Yj="D liu",Zj="Siu d liu",Xj="Tm kim",Kj="ng li",Qj={"View only":"Ch xem","View and edit":"","No access":"Khng truy cp","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Khng c cho ngoi tuyn","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhm Ngi Dng",User:Wj,Data:Yj,"Remove access":"",Metadata:Zj,"User or group":"",Search:Xj,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"C li","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Kj,"Dashboard sharing":""},Jj="",eO="",tO="",iO="",nO="",rO={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"/","All users":"","Anyone logged in":"","User group":"",User:Jj,Data:eO,"Remove access":"",Metadata:tO,"User or group":"",Search:iO,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":" {{ success }}{{ failed }}","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":" {{ updated }}{{ skipped }}","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"{{ visualizationsCount }}{{ entityAmount }}",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':" ","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"{{- objectName}}","Sharing and access":"",Close:nO,"Dashboard sharing":""},sO="",aO="",oO="",lO="",cO="",uO={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User",User:sO,Data:aO,"Remove access":"",Metadata:oO,"User or group":"",Search:lO,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:cO,"Dashboard sharing":""},jn="default";Oe.addResources("ar",jn,DN);Oe.addResources("ar_IQ",jn,ON);Oe.addResources("ckb",jn,UN);Oe.addResources("cs",jn,YN);Oe.addResources("da",jn,ez);Oe.addResources("en",jn,az);Oe.addResources("es",jn,hz);Oe.addResources("es_419",jn,xz);Oe.addResources("fi",jn,wz);Oe.addResources("fr",jn,Az);Oe.addResources("id",jn,Lz);Oe.addResources("km",jn,Bz);Oe.addResources("lo",jn,qz);Oe.addResources("my",jn,Qz);Oe.addResources("nb",jn,r6);Oe.addResources("ne",jn,l6);Oe.addResources("nl",jn,f6);Oe.addResources("prs",jn,b6);Oe.addResources("ps",jn,E6);Oe.addResources("pt",jn,D6);Oe.addResources("pt_BR",jn,O6);Oe.addResources("ro",jn,U6);Oe.addResources("ru",jn,Y6);Oe.addResources("si",jn,ej);Oe.addResources("sv",jn,aj);Oe.addResources("tet",jn,hj);Oe.addResources("tg",jn,xj);Oe.addResources("uk",jn,Tj);Oe.addResources("ur",jn,Pj);Oe.addResources("uz_Latn",jn,Lj);Oe.addResources("uz_UZ_Cyrl",jn,Bj);Oe.addResources("uz_UZ_Latn",jn,qj);Oe.addResources("vi",jn,Qj);Oe.addResources("zh",jn,rO);Oe.addResources("zh_CN",jn,uO);const Ab=i=>{let{onClose:e,name:t,children:n,dataTest:s="dhis2-uicore-sharingdialog-modal"}=i;const l=t?Oe.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):Oe.t("Sharing and access");return pe.createElement(Do,{large:!0,position:"top",onClose:e,dataTest:s},pe.createElement(dd,null,l),pe.createElement(Wc,null,n),pe.createElement(hd,null,pe.createElement(pd,{end:!0},pe.createElement(sn,{type:"button",secondary:!0,onClick:e},Oe.t("Close")))))};Ab.propTypes={children:ne.node.isRequired,dataTest:ne.string,name:ne.string,onClose:ne.func};const Oh=pe.forwardRef((i,e)=>{let{icon:t,onClick:n,selected:s,disabled:l,children:u,className:r,dataTest:p="dhis2-uicore-tab"}=i,f=Fe.useRef(null);e&&(f=e);const[m,v]=Fe.useState(!1);return Fe.useEffect(()=>{(()=>{const _=f.current.scrollWidth>f.current.clientWidth;v(_)})()},[]),pe.createElement("button",{onClick:l?void 0:y=>n({},y),"data-test":p,ref:f,role:"tab","aria-selected":s?"true":"false","aria-disabled":l?"true":"false",onFocus:l?void 0:y=>n({},y),tabIndex:-1,className:_t.dynamic([["2433456263",[je.grey400,je.grey600,Jt.focus,je.grey600,je.grey900,je.grey600,je.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,je.grey500,je.grey500]]])+` ${vn("tab",r,{selected:s,disabled:l})}`},t,m?pe.createElement(mx,{content:u,maxWidth:"100%"},pe.createElement("span",{ref:f,className:_t.dynamic([["2433456263",[je.grey400,je.grey600,Jt.focus,je.grey600,je.grey900,je.grey600,je.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,je.grey500,je.grey500]]])},u)):pe.createElement("span",{ref:f,className:_t.dynamic([["2433456263",[je.grey400,je.grey600,Jt.focus,je.grey600,je.grey900,je.grey600,je.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,je.grey500,je.grey500]]])},u),pe.createElement(_t,{id:"2433456263",dynamic:[je.grey400,je.grey600,Jt.focus,je.grey600,je.grey900,je.grey600,je.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,je.grey500,je.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${je.grey400};color:${je.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${Jt.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${je.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${je.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${je.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${je.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${Jt.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${Jt.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${je.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${je.grey500};}`]))});Oh.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,disabled:ne.bool,icon:ne.element,selected:ne.bool,onClick:ne.func};Oh.displayName="Tab";const Mb=250,dO=.5;function hO(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=i.scrollLeft,s=pO(i,n,t),l=s-n,u=fO({scrollBox:i,callback:e,startValue:n,endValue:s,change:l});window.requestAnimationFrame(u)}function pO(i,e,t){const n=i.clientWidth*dO;return Math.floor(e+n*(t?-1:1))}function fO(i){let{scrollBox:e,callback:t,startValue:n,endValue:s,change:l}=i,u,r,p;return function f(m){u||(u=m),r=m-u,p=mO({currentTime:r,DURATION:Mb,startValue:n,change:l}),r>=Mb?(p!==s&&(e.scrollLeft=s),t&&t()):(e.scrollLeft=p,window.requestAnimationFrame(f))}}function mO(i){let{currentTime:e,startValue:t,change:n}=i;return(e/=Mb/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}let $g;const Pb="__vertical-scrollbar-height-test__",gO=`
    .${Pb} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${Pb}::-webkit-scrollbar {
        display: none;
    }
`;function yO(){if($g)return $g;const i=document.createElement("style");i.innerHTML=gO;const e=document.createElement("div");return e.classList.add(Pb),document.body.appendChild(i),document.body.appendChild(e),$g=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),$g}const By=i=>{let{children:e,disabled:t,hidden:n,onClick:s}=i;return pe.createElement("button",{onClick:t?void 0:s,className:_t.dynamic([["2701682090",[je.white,je.grey400,je.grey600,je.grey100,je.grey200,je.grey500]]])+" "+(vn("scroll-button",{disabled:t,hidden:n})||"")},e,pe.createElement(_t,{id:"2701682090",dynamic:[je.white,je.grey400,je.grey600,je.grey100,je.grey200,je.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${je.white};border:none;border-bottom:1px solid ${je.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${je.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${je.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${je.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${je.grey500};}`]))};By.displayName="ScrollButton";By.propTypes={children:ne.any.isRequired,disabled:ne.bool,hidden:ne.bool,onClick:ne.func};function Il(i,e,t){return(e=xO(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function xO(i){var e=vO(i,"string");return typeof e=="symbol"?e:e+""}function vO(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class a3 extends Fe.Component{constructor(e){super(e),Il(this,"scrollBox",Fe.createRef()),Il(this,"scrollArea",Fe.createRef()),Il(this,"horizontalScrollBarHeight",yO()),Il(this,"scrollBoxResizeObserver",null),Il(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:n}=this.scrollArea,s=n.offsetWidth,l=t.offsetWidth,u=s<=l;this.setState({hideScrollButtons:u}),u||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),Il(this,"scrollRight",()=>this.scroll()),Il(this,"scrollLeft",()=>this.scroll(!0)),Il(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),Il(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:n}=this.scrollBox.current,{offsetWidth:s}=this.scrollArea.current,l=t<=0,u=t+n>=s;(this.state.scrolledToStart!==l||this.state.scrolledToEnd!==u)&&this.setState({scrolledToStart:l,scrolledToEnd:u})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),hO(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const n=t.offsetLeft+t.offsetWidth;n>e.offsetWidth&&(e.scrollLeft=n-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:n,hideScrollButtons:s}=this.state,{children:l,className:u,dataTest:r}=this.props,p=!n||s;return pe.createElement("div",{"data-test":r,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(vn("scroll-bar",u)||"")},pe.createElement(By,{disabled:e,onClick:this.scrollLeft,hidden:p},pe.createElement(T1,null)),pe.createElement("div",{className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},pe.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},pe.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},l))),pe.createElement(By,{disabled:t,onClick:this.scrollRight,hidden:p},pe.createElement(S1,null)),pe.createElement(_t,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),pe.createElement(_t,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}a3.propTypes={children:ne.node.isRequired,dataTest:ne.string.isRequired,className:ne.string};const Ib=i=>{let{children:e,fixed:t,dataTest:n}=i;const s=Fe.useRef(null),l=Fe.useMemo(()=>pe.Children.map(e,()=>pe.createRef()),[e]),u=r=>{const p=document.activeElement;if(s.current&&s.current===p){l.length>0&&l[0].current&&l[0].current.focus();return}const f=l.findIndex(m=>m.current===p);if(f!==-1){if(r.key==="ArrowRight"){r.preventDefault();const m=(f+1)%l.length;l[m].current.focus()}if(r.key==="ArrowLeft"){r.preventDefault();const m=(f-1+l.length)%l.length;l[m].current.focus()}}};return pe.createElement("div",{ref:s,"data-test":n,role:"tablist",tabIndex:0,onKeyDown:u,className:_t.dynamic([["771129571",[je.grey400,je.white]]])+" "+(vn({fixed:t})||"")},pe.Children.map(e,(r,p)=>pe.isValidElement(r)?pe.cloneElement(r,{ref:l[p]}):pe.createElement("span",{ref:l[p],tabIndex:-1,className:_t.dynamic([["771129571",[je.grey400,je.white]]])},r)),pe.createElement(_t,{id:"771129571",dynamic:[je.grey400,je.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${je.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${je.white};}`]))};Ib.propTypes={dataTest:ne.string.isRequired,children:ne.node,fixed:ne.bool};const u_=i=>{let{fixed:e,children:t,className:n,scrollable:s,dataTest:l="dhis2-uicore-tabbar"}=i;return s?pe.createElement("div",{className:n,"data-test":l},pe.createElement(a3,{dataTest:`${l}-scrollbar`},pe.createElement(Ib,{fixed:e,dataTest:`${l}-tabs`},t))):pe.createElement("div",{className:n,"data-test":l},pe.createElement(Ib,{fixed:e,dataTest:`${l}-tabs`},t))};u_.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,fixed:ne.bool,scrollable:ne.bool};var Ku=[],bO=function(){return Ku.some(function(i){return i.activeTargets.length>0})},_O=function(){return Ku.some(function(i){return i.skippedTargets.length>0})},sC="ResizeObserver loop completed with undelivered notifications.",wO=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:sC}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=sC),window.dispatchEvent(i)},$f;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})($f||($f={}));var Qu=function(i){return Object.freeze(i)},CO=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,Qu(this)}return i}(),o3=function(){function i(e,t,n,s){return this.x=e,this.y=t,this.width=n,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Qu(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,s=e.top,l=e.right,u=e.bottom,r=e.left,p=e.width,f=e.height;return{x:t,y:n,top:s,right:l,bottom:u,left:r,width:p,height:f}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),d_=function(i){return i instanceof SVGElement&&"getBBox"in i},l3=function(i){if(d_(i)){var e=i.getBBox(),t=e.width,n=e.height;return!t&&!n}var s=i,l=s.offsetWidth,u=s.offsetHeight;return!(l||u||i.getClientRects().length)},aC=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},TO=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Af=typeof window<"u"?window:{},Ug=new WeakMap,oC=/auto|scroll/,SO=/^tb|vertical/,EO=/msie|trident/i.test(Af.navigator&&Af.navigator.userAgent),Ho=function(i){return parseFloat(i||"0")},Mh=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new CO((t?e:i)||0,(t?i:e)||0)},lC=Qu({devicePixelContentBoxSize:Mh(),borderBoxSize:Mh(),contentBoxSize:Mh(),contentRect:new o3(0,0,0,0)}),c3=function(i,e){if(e===void 0&&(e=!1),Ug.has(i)&&!e)return Ug.get(i);if(l3(i))return Ug.set(i,lC),lC;var t=getComputedStyle(i),n=d_(i)&&i.ownerSVGElement&&i.getBBox(),s=!EO&&t.boxSizing==="border-box",l=SO.test(t.writingMode||""),u=!n&&oC.test(t.overflowY||""),r=!n&&oC.test(t.overflowX||""),p=n?0:Ho(t.paddingTop),f=n?0:Ho(t.paddingRight),m=n?0:Ho(t.paddingBottom),v=n?0:Ho(t.paddingLeft),y=n?0:Ho(t.borderTopWidth),_=n?0:Ho(t.borderRightWidth),b=n?0:Ho(t.borderBottomWidth),C=n?0:Ho(t.borderLeftWidth),E=v+f,S=p+m,x=C+_,A=y+b,D=r?i.offsetHeight-A-i.clientHeight:0,T=u?i.offsetWidth-x-i.clientWidth:0,k=s?E+x:0,N=s?S+A:0,W=n?n.width:Ho(t.width)-k-T,Z=n?n.height:Ho(t.height)-N-D,K=W+E+T+x,j=Z+S+D+A,V=Qu({devicePixelContentBoxSize:Mh(Math.round(W*devicePixelRatio),Math.round(Z*devicePixelRatio),l),borderBoxSize:Mh(K,j,l),contentBoxSize:Mh(W,Z,l),contentRect:new o3(v,p,W,Z)});return Ug.set(i,V),V},u3=function(i,e,t){var n=c3(i,t),s=n.borderBoxSize,l=n.contentBoxSize,u=n.devicePixelContentBoxSize;switch(e){case $f.DEVICE_PIXEL_CONTENT_BOX:return u;case $f.BORDER_BOX:return s;default:return l}},kO=function(){function i(e){var t=c3(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Qu([t.borderBoxSize]),this.contentBoxSize=Qu([t.contentBoxSize]),this.devicePixelContentBoxSize=Qu([t.devicePixelContentBoxSize])}return i}(),d3=function(i){if(l3(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},AO=function(){var i=1/0,e=[];Ku.forEach(function(u){if(u.activeTargets.length!==0){var r=[];u.activeTargets.forEach(function(f){var m=new kO(f.target),v=d3(f.target);r.push(m),f.lastReportedSize=u3(f.target,f.observedBox),v<i&&(i=v)}),e.push(function(){u.callback.call(u.observer,r,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var s=n[t];s()}return i},cC=function(i){Ku.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(s){s.isActive()&&(d3(s.target)>i?t.activeTargets.push(s):t.skippedTargets.push(s))})})},MO=function(){var i=0;for(cC(i);bO();)i=AO(),cC(i);return _O()&&wO(),i>0},hv,h3=[],PO=function(){return h3.splice(0).forEach(function(i){return i()})},IO=function(i){if(!hv){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return PO()}).observe(t,n),hv=function(){t.textContent="".concat(e?e--:e++)}}h3.push(i),hv()},DO=function(i){IO(function(){requestAnimationFrame(i)})},fy=0,RO=function(){return!!fy},LO=250,NO={attributes:!0,characterData:!0,childList:!0,subtree:!0},uC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],dC=function(i){return i===void 0&&(i=0),Date.now()+i},pv=!1,zO=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=LO),!pv){pv=!0;var n=dC(e);DO(function(){var s=!1;try{s=MO()}finally{if(pv=!1,e=n-dC(),!RO())return;s?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,NO)};document.body?t():Af.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),uC.forEach(function(t){return Af.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),uC.forEach(function(t){return Af.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),Db=new zO,hC=function(i){!fy&&i>0&&Db.start(),fy+=i,!fy&&Db.stop()},jO=function(i){return!d_(i)&&!TO(i)&&getComputedStyle(i).display==="inline"},OO=function(){function i(e,t){this.target=e,this.observedBox=t||$f.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=u3(this.target,this.observedBox,!0);return jO(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),FO=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),Vg=new WeakMap,pC=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},Gg=function(){function i(){}return i.connect=function(e,t){var n=new FO(e,t);Vg.set(e,n)},i.observe=function(e,t,n){var s=Vg.get(e),l=s.observationTargets.length===0;pC(s.observationTargets,t)<0&&(l&&Ku.push(s),s.observationTargets.push(new OO(t,n&&n.box)),hC(1),Db.schedule())},i.unobserve=function(e,t){var n=Vg.get(e),s=pC(n.observationTargets,t),l=n.observationTargets.length===1;s>=0&&(l&&Ku.splice(Ku.indexOf(n),1),n.observationTargets.splice(s,1),hC(-1))},i.disconnect=function(e){var t=this,n=Vg.get(e);n.observationTargets.slice().forEach(function(s){return t.unobserve(e,s.target)}),n.activeTargets.splice(0,n.activeTargets.length)},i}(),BO=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Gg.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!aC(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Gg.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!aC(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Gg.unobserve(this,e)},i.prototype.disconnect=function(){Gg.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const p3=pe[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],$O=i=>{const e=Fe.useRef(i);return Fe.useEffect(()=>{e.current=i}),e},UO=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:BO;function VO(){}function GO(i,e){const t=qO(),n=$O(e);return p3(()=>{let s=!1;const l=i&&"current"in i?i.current:i;if(!l)return VO;function u(r,p){s||n.current(r,p)}return t.subscribe(l,u),()=>{s=!0,t.unsubscribe(l,u)}},[i,t,n]),t.observer}function HO(){let i=!1,e=[];const t=new Map,n=new UO((s,l)=>{e=e.concat(s);function u(){const r=new Set;for(let p=0;p<e.length;p++){if(r.has(e[p].target))continue;r.add(e[p].target);const f=t.get(e[p].target);f==null||f.forEach(m=>m(e[p],l))}e=[],i=!1}i||window.requestAnimationFrame(u),i=!0});return{observer:n,subscribe(s,l){var u;n.observe(s);const r=(u=t.get(s))!==null&&u!==void 0?u:[];r.push(l),t.set(s,r)},unsubscribe(s,l){var u;const r=(u=t.get(s))!==null&&u!==void 0?u:[];if(r.length===1){n.unobserve(s),t.delete(s);return}const p=r.indexOf(l);p!==-1&&r.splice(p,1),t.set(s,r)}}}let fv;const qO=()=>fv||(fv=HO()),WO=(i,e)=>{const[t,n]=Fe.useState(()=>{var s,l;const u=i&&"current"in i?i.current:i;return u?[u.offsetWidth,u.offsetHeight]:[(s=void 0)!==null&&s!==void 0?s:0,(l=void 0)!==null&&l!==void 0?l:0]});return p3(()=>{const s=i&&"current"in i?i.current:i;s&&n([s.offsetWidth,s.offsetHeight])},[i]),GO(i,s=>{const l=s.target;n([l.offsetWidth,l.offsetHeight])}),t},f3=i=>{let{children:e,dataTest:t,maxHeight:n="280px",menuWidth:s,onClick:l,menuRef:u}=i;return pe.createElement(ux,{onBackdropClick:l,transparent:!0},pe.createElement(qh,{reference:u,placement:"bottom",observeReferenceResize:!0},pe.createElement("div",{"data-test":`${t}-menuwrapper`,className:_t.dynamic([["1686499909",[s,n]]])+" card"},pe.createElement(lm,null,e))),pe.createElement(_t,{id:"1686499909",dynamic:[s,n]},[`.card.__jsx-style-dynamic-selector{width:${s};max-height:${n};}`]))};f3.propTypes={dataTest:ne.string.isRequired,menuRef:ne.object.isRequired,menuWidth:ne.string.isRequired,children:ne.node,maxHeight:ne.string,onClick:ne.func};const m3=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:n,loading:s,onClose:l,onSearch:u,onSelect:r,placeholder:p,search:f,searchResults:m}=i;const v=Fe.useRef(null),[y]=WO(v),{isDisconnected:_}=dx();return pe.createElement(pe.Fragment,null,pe.createElement("div",{ref:v},pe.createElement(il,{label:n,loading:s,placeholder:p,onChange:b=>{let{value:C}=b;return u(C)},value:f,inputWidth:t,disabled:_,helpText:_?Oe.t("Not available offline"):""})),m.length>0&&pe.createElement(f3,{onClick:l,menuWidth:`${y}px`,menuRef:v,dataTest:`${e}-menu`},pe.createElement(v1,null,m.map(b=>pe.createElement(Kr,{key:b.id,label:b.displayName,value:b.id,onClick:C=>{let{value:E}=C;return r(E)}})))))};m3.propTypes={searchResults:ne.arrayOf(ne.shape({displayName:ne.string,id:ne.string})).isRequired,dataTest:ne.string,inputWidth:ne.string,label:ne.string,loading:ne.bool,placeholder:ne.string,search:ne.string,onClose:ne.func,onSearch:ne.func,onSelect:ne.func};const YO={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},g3=i=>{var e,t;let{selected:n,onSelection:s}=i;const[l,u]=Fe.useState(""),[r,p]=Fe.useState(!1),{data:f,refetch:m,fetching:v}=ja(YO,{lazy:!0,onComplete:()=>p(!0)});Fe.useEffect(()=>u(n),[n]);const y=Fe.useCallback(wN(m,250),[m]);Fe.useEffect(()=>{l&&l===n||(l?y({search:l}):(s(null),p(!1)))},[l]);let _=[];if(f!=null&&(e=f.search)!==null&&e!==void 0&&e.users){const b=f.search.users.map(C=>({...C,type:"user"}));_=_.concat(b)}if(f!=null&&(t=f.search)!==null&&t!==void 0&&t.userGroups){const b=f.search.userGroups.map(C=>({...C,type:"group"}));_=_.concat(b)}return pe.createElement(m3,{inputWidth:"100%",label:Oe.t("User or group"),loading:v,placeholder:Oe.t("Search"),search:l,searchResults:r?_:[],onClose:()=>p(!1),onSearch:u,onSelect:b=>{s(_.find(C=>C.id===b)),p(!1)}})};g3.propTypes={onSelection:ne.func.isRequired,selected:ne.string};const Dx=i=>{let{children:e}=i;return pe.createElement(pe.Fragment,null,pe.createElement("h2",{className:_t.dynamic([["2416527184",[je.grey900]]])},e),pe.createElement(_t,{id:"2416527184",dynamic:[je.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${je.grey900};}`]))};Dx.propTypes={children:ne.node.isRequired};const Rb=i=>{let{onAdd:e,dataSharing:t}=i;const n=Fe.useContext(Fy),[s,l]=Fe.useState(null),[u,r]=Fe.useState(""),[p,f]=Fe.useState(""),{isDisconnected:m}=dx(),v=b=>{b.preventDefault(),e({type:s.type,id:s.id,name:s.displayName||s.name,access:{data:u,metadata:p}}),l(null),r(""),f("")},y=[{value:er,label:Oe.t("View only")},{value:or,label:Oe.t("View and edit")}],_=[...y,{value:_n,label:Oe.t("No access")}];return pe.createElement(pe.Fragment,null,pe.createElement(Dx,null,Oe.t("Give access to a user or group")),pe.createElement("form",{onSubmit:v,className:_t.dynamic([["3476690250",[je.grey100,je.grey900,Ut.dp8]]])},pe.createElement("div",{className:_t.dynamic([["3476690250",[je.grey100,je.grey900,Ut.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},pe.createElement(g3,{selected:(s==null?void 0:s.displayName)||(s==null?void 0:s.name),onSelection:l})),pe.createElement("div",{className:_t.dynamic([["3476690250",[je.grey100,je.grey900,Ut.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&pe.createElement("div",{className:_t.dynamic([["3476690250",[je.grey100,je.grey900,Ut.dp8]]])+" select-wrapper"},pe.createElement(gs,{label:Oe.t("Data access level"),placeholder:Oe.t("Choose a level"),disabled:m,selected:u,helpText:m?Oe.t("Not available offline"):"",onChange:b=>{let{selected:C}=b;return r(C)}},_.map(b=>{let{value:C,label:E}=b;return pe.createElement(Ca,{key:C,label:E,value:C,active:C===u})}))),pe.createElement("div",{className:_t.dynamic([["3476690250",[je.grey100,je.grey900,Ut.dp8]]])+" select-wrapper"},pe.createElement(gs,{label:t?Oe.t("Metadata access level"):Oe.t("Access level"),placeholder:Oe.t("Choose a level"),disabled:m,selected:p,helpText:m?Oe.t("Not available offline"):"",onChange:b=>{let{selected:C}=b;return f(C)}},(t?_:y).map(b=>{let{value:C,label:E}=b;return pe.createElement(Ca,{key:C,label:E,value:C,active:C===p})}))),pe.createElement(sn,{type:"submit",disabled:m||n||!s||t&&!u||!p||u===_n&&p===_n},Oe.t("Give access")))),pe.createElement(_t,{id:"3476690250",dynamic:[je.grey100,je.grey900,Ut.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${je.grey100};color:${je.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Ut.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};Rb.propTypes={onAdd:ne.func.isRequired,dataSharing:ne.bool};const Lb=i=>{let{label:e,onClick:t}=i;return pe.createElement("div",{onClick:t,className:_t.dynamic([["1009072197",[je.red700,Ut.dp8,Ut.dp12,je.red050]]])},e,pe.createElement(_t,{id:"1009072197",dynamic:[je.red700,Ut.dp8,Ut.dp12,je.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${je.red700};padding:${Ut.dp8} ${Ut.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${je.red050};}`]))};Lb.propTypes={label:ne.string.isRequired,onClick:ne.func.isRequired};const ZO={[yd]:Oe.t("Anyone logged in"),[ep]:Oe.t("User group"),[xd]:Oe.t("User")},y3=i=>{var e;let{target:t,id:n}=i;return pe.createElement(pe.Fragment,null,pe.createElement("p",{className:_t.dynamic([["2525483302",[je.grey700]]])},t===xd?n:(e=ZO[t])!==null&&e!==void 0?e:""),pe.createElement(_t,{id:"2525483302",dynamic:[je.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${je.grey700};margin:6px 0 0 0;padding:0;}`]))};y3.propTypes={target:ne.oneOf([yd,ep,xd]).isRequired,id:ne.string};const x3=i=>{let{target:e,name:t}=i;switch(e){case c_:return pe.createElement(cS,{color:je.grey600});case yd:case ep:return pe.createElement(sS,{color:je.grey600});case xd:return pe.createElement(oI,{name:t,small:!0});default:return null}};x3.propTypes={target:ne.oneOf([c_,yd,xd,ep]).isRequired,name:ne.string};const fC=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===_n:!0},my=i=>{let{name:e,id:t,target:n,access:s,accessOptions:l,disabled:u,onChange:r,onRemove:p,dataSharing:f,allUsersItem:m=!1}=i;const v=Fe.useContext(Fy),{isDisconnected:y}=dx(),_={ACCESS_NONE:Oe.t("No access"),ACCESS_VIEW_ONLY:Oe.t("View only"),ACCESS_VIEW_AND_EDIT:Oe.t("View and edit")};return pe.createElement(pe.Fragment,null,pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" wrapper"},pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" "+((f?"detailsWithData":"detailsMetadata")||"")},pe.createElement(x3,{target:n,name:e}),pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" details-text"},pe.createElement("p",{className:_t.dynamic([["650548845",[je.grey900]]])+" details-name"},e),pe.createElement(y3,{target:n,id:t}))),pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" "+((f?"selectWrapperWithData":"selectWrapperMetadata")||"")},f&&pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" select"},pe.createElement(gs,{disabled:u||y||v,prefix:Oe.t("Data"),selected:s.data,helpText:y?Oe.t("Not available offline"):"",onChange:b=>{let{selected:C}=b;return r({...s,data:C})}},l.map(b=>pe.createElement(Ca,{key:b,label:_[b],value:b,active:b===s.data})),rC(n)&&fC({accessOtherField:s.metadata,dataSharing:f})&&pe.createElement(Lb,{onClick:p,label:Oe.t("Remove access")}))),pe.createElement("div",{className:_t.dynamic([["650548845",[je.grey900]]])+" select"},pe.createElement(gs,{disabled:u||y||v,prefix:Oe.t("Metadata"),selected:s.metadata,helpText:y?Oe.t("Not available offline"):"",onChange:b=>{let{selected:C}=b;return r({...s,metadata:C})}},l.map(b=>pe.createElement(Ca,{key:b,label:_[b],value:b,active:b===s.metadata,disabled:!m&&b===_n&&!f})),rC(n)&&fC({accessOtherField:s.data,dataSharing:f})&&pe.createElement(Lb,{onClick:p,label:Oe.t("Remove access")}))))),pe.createElement(lI,null),pe.createElement(_t,{id:"650548845",dynamic:[je.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${je.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};my.propTypes={access:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,accessOptions:ne.arrayOf(ne.oneOf([_n,er,or])).isRequired,dataSharing:ne.bool.isRequired,name:ne.string.isRequired,target:ne.oneOf([yd,ep,xd]).isRequired,onChange:ne.func.isRequired,allUsersItem:ne.bool,disabled:ne.bool,id:ne.string,onRemove:ne.func};const Nb=i=>{let{onChange:e,onRemove:t,publicAccess:n,allowPublicAccess:s,users:l,groups:u,dataSharing:r}=i;const p=[_n,er,or];return pe.createElement(pe.Fragment,null,pe.createElement(Dx,null,Oe.t("Users and groups that currently have access")),pe.createElement("div",{className:_t.dynamic([["3415079234",[je.grey200,je.grey900]]])+" header"},pe.createElement("div",{className:_t.dynamic([["3415079234",[je.grey200,je.grey900]]])+" "+((r?"header-start-column-data":"header-start-column-metadata")||"")},Oe.t("User / Group")),pe.createElement("div",{className:_t.dynamic([["3415079234",[je.grey200,je.grey900]]])+" "+((r?"header-end-column-data":"header-end-column-metadata")||"")},pe.createElement("span",{className:_t.dynamic([["3415079234",[je.grey200,je.grey900]]])+" hea"},Oe.t("Access level")))),pe.createElement("div",{className:_t.dynamic([["3415079234",[je.grey200,je.grey900]]])+" list"},pe.createElement(my,{name:Oe.t("All users"),target:yd,access:n,accessOptions:p,disabled:!s,onChange:f=>e({type:"public",access:f}),dataSharing:r,allUsersItem:!0}),u.map(f=>{let{id:m,name:v,access:y}=f;return pe.createElement(my,{key:m,name:v,target:ep,access:y,accessOptions:p,onChange:_=>e({type:"group",id:m,access:_}),onRemove:()=>t({type:"group",id:m}),dataSharing:r})}),l.map(f=>{let{id:m,name:v,access:y}=f;return y&&pe.createElement(my,{key:m,id:m,name:v,target:xd,access:y,accessOptions:p,onChange:_=>e({type:"user",id:m,access:_}),onRemove:()=>t({type:"user",id:m}),dataSharing:r})})),pe.createElement(_t,{id:"3415079234",dynamic:[je.grey200,je.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${je.grey200};color:${je.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};Nb.propTypes={allowPublicAccess:ne.bool.isRequired,dataSharing:ne.bool.isRequired,groups:ne.arrayOf(ne.shape({id:ne.string.isRequired,name:ne.string.isRequired,access:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])})})).isRequired,publicAccess:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,users:ne.arrayOf(ne.shape({access:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,id:ne.string.isRequired,name:ne.string.isRequired})).isRequired,onChange:ne.func.isRequired,onRemove:ne.func.isRequired};const v3=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},XO=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:n,updatedItems:s}=i;if(n){if(s===0)return Oe.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(s&&e)return Oe.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:s,failed:t-s})}return s===0?Oe.t("No visualizations were updated because sharing settings are already sufficient."):s===t?Oe.t("Successfully updated sharing for all visualizations."):s<t?Oe.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:s,skipped:t-s}):""},KO=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?Oe.t("There are no users or groups to apply sharing settings for."):Oe.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},b3=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:n,itemsCount:s}=i;const l=v3(n);if(!l)return null;const u=XO({visualizationsCount:l,itemsCount:s,hasErrors:e,updatedItems:t});return pe.createElement(yo,null,u)};b3.propTypes={dashboardItems:ne.array.isRequired,hasErrors:ne.bool.isRequired,itemsCount:ne.number.isRequired,updatedItems:ne.number.isRequired};const QO={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},_3=i=>{let{id:e,entityAmount:t}=i;const{data:n,loading:s}=ja(QO,{variables:{id:e}});if(s)return null;const{dashboard:l}=n,u=v3(l.dashboardItems);if(!u)return null;const r=KO({visualizationsCount:u,entityAmount:t});return pe.createElement(yo,null,r)};_3.propTypes={entityAmount:ne.number.isRequired,id:ne.string.isRequired};const JO={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},w3=i=>{var e;let{id:t,entityAmount:n}=i;const{isDisconnected:s}=dx(),{data:l,refetch:u}=ja(JO,{variables:{id:t}});Fe.useEffect(()=>{u({id:t})},[u,t]);const r=Wh(),[p,f]=Fe.useState(!1),[m,v]=Fe.useState(!1),[y,_]=Fe.useState(null),[b,C]=Fe.useState(null),E={resource:`dashboards/cascadeSharing/${t}`,type:"create"},S=()=>{f(!0),v(!0),C(null),_(null),r.mutate(E).then(D=>{C(D)}).catch(D=>{_(D.message||Oe.t("Something went wrong"))}).finally(()=>{v(!1)})},x=(b==null||(e=b.errorReports)===null||e===void 0?void 0:e.length)>0,A=b==null?void 0:b.countUpdatedDashboardItems;return pe.createElement(pe.Fragment,null,!p&&pe.createElement(_3,{id:t,entityAmount:n}),y&&pe.createElement(ay,{marginTop:Ut.dp12},pe.createElement(yo,{error:!0},y)),l&&b&&pe.createElement(ay,{marginTop:Ut.dp12},pe.createElement(b3,{hasErrors:x,updatedItems:A,dashboardItems:l.dashboard.dashboardItems,itemsCount:l.dashboard.itemsCount})),pe.createElement(ay,{marginTop:Ut.dp12},pe.createElement(sn,{type:"button",disabled:s||m||!n,loading:m,secondary:!0,onClick:S},Oe.t("Apply sharing to dashboard visualizations"))))};w3.propTypes={entityAmount:ne.number.isRequired,id:ne.string.isRequired};const e9=()=>pe.createElement(pe.Fragment,null,pe.createElement("p",{className:_t.dynamic([["3321084332",[je.grey800]]])},Oe.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),pe.createElement("p",{className:_t.dynamic([["3321084332",[je.grey800]]])},Oe.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),pe.createElement("p",{className:_t.dynamic([["3321084332",[je.grey800]]])},Oe.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),pe.createElement(_t,{id:"3321084332",dynamic:[je.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${je.grey800};}`])),C3=i=>{let{id:e,entityAmount:t}=i;return pe.createElement(pe.Fragment,null,pe.createElement(Dx,null,Oe.t("Apply dashboard sharing settings to visualizations")),pe.createElement(e9,null),pe.createElement(w3,{id:e,entityAmount:t}))};C3.propTypes={entityAmount:ne.number.isRequired,id:ne.string.isRequired};const zb=i=>{let{type:e,users:t,groups:n,publicAccess:s,allowPublicAccess:l,id:u,onAdd:r,onChange:p,onRemove:f,dataSharing:m}=i;const[v,y]=Fe.useState(0);return e===n3.DASHBOARD?pe.createElement(pe.Fragment,null,pe.createElement(u_,null,pe.createElement(Oh,{onClick:()=>y(0),selected:v===0},Oe.t("Dashboard sharing")),pe.createElement(Oh,{onClick:()=>y(1),selected:v===1},Oe.t("Apply sharing to dashboard visualizations"))),pe.createElement("div",null,v===0&&pe.createElement(pe.Fragment,null,pe.createElement(Rb,{onAdd:r,dataSharing:m}),pe.createElement(Nb,{users:t,groups:n,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:f,dataSharing:m})),v===1&&pe.createElement(C3,{id:u,entityAmount:t.length+n.length}))):pe.createElement(pe.Fragment,null,pe.createElement(Rb,{onAdd:r,dataSharing:m}),pe.createElement(Nb,{users:t,groups:n,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:f,dataSharing:m}))};zb.propTypes={allowPublicAccess:ne.bool.isRequired,dataSharing:ne.bool.isRequired,groups:ne.arrayOf(ne.shape({access:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,id:ne.string.isRequired,name:ne.string.isRequired})).isRequired,id:ne.string.isRequired,publicAccess:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,type:ne.oneOf(r3).isRequired,users:ne.arrayOf(ne.shape({access:ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}).isRequired,id:ne.string.isRequired,name:ne.string.isRequired})).isRequired,onAdd:ne.func.isRequired,onChange:ne.func.isRequired,onRemove:ne.func.isRequired};const t9={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},i9={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},mv=()=>{},n9={name:"",allowPublic:!0,public:{data:_n,metadata:_n},groups:[],users:[]},r9=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:_n,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:_n,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:_n,metadata:t.access}}:t),e},T3=i=>{let{id:e,type:t,onClose:n=mv,onError:s=mv,onSave:l=mv,initialSharingSettings:u=n9,dataTest:r="dhis2-uicore-sharingdialog",dataSharing:p=!1}=i;const{show:f}=wa(Z=>Z,{critical:!0}),m=r9(u),{data:v,refetch:y,loading:_,fetching:b}=ja(t9,{variables:{id:e,type:t},onError:Z=>{f(Z),s(Z)}}),[C,{loading:E}]=LE(i9,{variables:{type:t,id:e},onError:Z=>{f(Z),s(Z),y()},onComplete:()=>{y(),l()}});if(Fe.useEffect(()=>{y({type:t,id:e})},[t,e]),_){const Z=Object.keys(u.users).map(Bg),K=Object.keys(u.groups).map(Bg);return pe.createElement(Fy.Provider,{value:!0},pe.createElement(Ab,{onClose:n},pe.createElement(zb,{id:e,users:Z,groups:K,publicAccess:m.public,allowPublicAccess:m.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:p})))}const{object:S,meta:x}=v.sharing,A=s3(S.publicAccess),D=S.userAccesses.map(Bg),T=S.userGroupAccesses.map(Bg),k=Z=>{let{type:K,id:j,access:V,name:$}=Z;const L=SN({object:S,type:K,access:V,id:j,name:$});C({data:L,type:t,id:e})},N=Z=>{let{type:K,id:j,access:V}=Z;const $=TN({object:S,type:K,access:V,id:j});C({data:$,type:t,id:e})},W=Z=>{let{type:K,id:j}=Z;const V=EN({object:S,type:K,id:j});C({data:V,type:t,id:e})};return pe.createElement(Fy.Provider,{value:E||b},pe.createElement(Ab,{onClose:n,name:S.displayName||S.name,dataTest:r},pe.createElement(zb,{id:e,users:D,groups:T,publicAccess:A,allowPublicAccess:x.allowPublicAccess,type:t,onAdd:k,onChange:N,onRemove:W,dataSharing:p})))};T3.propTypes={id:ne.string.isRequired,type:ne.oneOf(r3).isRequired,dataSharing:ne.bool,dataTest:ne.string,initialSharingSettings:ne.shape({allowPublic:ne.bool.isRequired,groups:ne.objectOf(ne.shape({id:ne.string.isRequired,name:ne.string.isRequired,access:ne.oneOfType([ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}),ne.oneOf([_n,er,or])])})),name:ne.string,public:ne.oneOfType([ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}),ne.oneOf([_n,er,or])]),users:ne.objectOf(ne.shape({id:ne.string.isRequired,name:ne.string.isRequired,access:ne.oneOfType([ne.shape({data:ne.oneOf([_n,er,or]),metadata:ne.oneOf([_n,er,or])}),ne.oneOf([_n,er,or])])}))}),onClose:ne.func,onError:ne.func,onSave:ne.func};function jb(){return jb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},jb.apply(null,arguments)}const h_=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-table",layout:l="auto",role:u,borderless:r,width:p="100%",...f}=i;return pe.createElement("table",jb({},f,{"data-test":s,ref:e,role:u,className:_t.dynamic([["3140496910",[l,p,je.grey300]]])+" "+(vn(n,{borderless:r})||"")}),t,pe.createElement(_t,{id:"3140496910",dynamic:[l,p,je.grey300]},[`table.__jsx-style-dynamic-selector{table-layout:${l};border-collapse:separate;border-spacing:0;width:${p};box-sizing:border-box;border:1px solid ${je.grey300};}`,"table.borderless.__jsx-style-dynamic-selector{border:none;}"]))});h_.displayName="Table";h_.propTypes={borderless:ne.bool,children:ne.node,className:ne.string,dataTest:ne.string,layout:ne.oneOf(["auto","fixed","initial","inherit"]),role:ne.string,width:ne.string};function Ob(){return Ob=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ob.apply(null,arguments)}const Rx=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablebody",role:l,loading:u,...r}=i;return pe.createElement("tbody",Ob({},r,{"data-test":s,ref:e,role:l,className:_t.dynamic([["2478922139",[je.blue600]]])+" "+(vn(n,{loading:u})||"")}),t,pe.createElement(_t,{id:"2478922139",dynamic:[je.blue600]},["tbody.__jsx-style-dynamic-selector{position:relative;}",".loading.__jsx-style-dynamic-selector:before{content:'';position:absolute;top:0;bottom:0;inset-inline-start:0;inset-inline-end:0;background-color:rgba(255,255,255,0.8);}",`.loading.__jsx-style-dynamic-selector:after{content:'';position:absolute;top:calc(50% - 24px);inset-inline-start:calc(50% - 24px);width:48px;height:48px;border:6px solid rgba(110,122,138,0.15);border-bottom-color:${je.blue600};border-radius:50%;-webkit-animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;}`,"@-webkit-keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]))});Rx.displayName="TableBody";Rx.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,loading:ne.bool,role:ne.string};const gy=[`td.jsx-533878895{padding:14px 12px;font-size:14px;border:1px solid transparant;border-bottom:1px solid ${je.grey300};color:${je.grey900};}`,`td.active.jsx-533878895{outline:2px solid ${je.grey600};outline-offset:-2px;}`,`td.bordered.jsx-533878895{border-inline-end:1px solid ${je.grey300};}`,"td.bordered.jsx-533878895:last-child{border-inline-end:1px solid transparent;}",`td.error.jsx-533878895{color:${je.red700};}`,`td.muted.jsx-533878895{color:${je.grey700};font-style:italic;}`,`td.valid.jsx-533878895{color:${je.green700};}`,"td.large.jsx-533878895{padding:20px 12px;font-size:16px;}","tr:last-child td.jsx-533878895{border-bottom:1px solid transparent;}",`tfoot tr:first-child td.jsx-533878895{border-top:1px solid ${je.grey300};}`];gy.__hash="533878895";function Fb(){return Fb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Fb.apply(null,arguments)}const s9={left:"right",right:"left",center:"center"},tp=Fe.forwardRef((i,e)=>{var t;let{active:n,align:s="left",backgroundColor:l,bordered:u,children:r,className:p,colSpan:f,dataTest:m="dhis2-uicore-tabledatacel",error:v,large:y,left:_="auto",muted:b,role:C,rowSpan:E,scope:S,staticStyle:x,valid:A,width:D="auto",onClick:T,...k}=i;const N=(t=s9[s])!==null&&t!==void 0?t:s;return pe.createElement("td",Fb({},k,{ref:e,colSpan:f,rowSpan:E,onClick:T,"data-test":m,role:C,scope:S,className:`jsx-${gy.__hash} `+_t.dynamic([["836058623",[_,s,D,l||je.white,N,l||je.teal100,l||je.grey100,l||je.grey200,l||"#cdeae8"]]])+" "+(vn(p,{active:n,bordered:u,error:v,large:y,muted:b,staticStyle:x,valid:A})||"")}),r,pe.createElement(_t,{id:gy.__hash},gy),pe.createElement(_t,{id:"836058623",dynamic:[_,s,D,l||je.white,N,l||je.teal100,l||je.grey100,l||je.grey200,l||"#cdeae8"]},[`td.__jsx-style-dynamic-selector{inset-inline-start:${_};text-align:${s};width:${D};background-color:${l||je.white};}`,`.__jsx-style-dynamic-selector:dir(rtl){text-align:${N};}`,`tr.selected>td.__jsx-style-dynamic-selector{background-color:${l||je.teal100};}`,`tr:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||je.grey100};}`,`tr:active>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||je.grey200};}`,`tr.selected:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||"#cdeae8"};}`]))});tp.displayName="TableDataCell";const gv=cx(["valid","error","muted"],ne.bool);tp.propTypes={active:ne.bool,align:ne.oneOf(["left","center","right"]),backgroundColor:ne.string,bordered:ne.bool,children:ne.node,className:ne.string,colSpan:ne.string,dataTest:ne.string,error:gv,large:ne.bool,left:Qr(i=>i.fixed,ne.string),muted:gv,role:ne.string,rowSpan:ne.string,scope:ne.string,staticStyle:ne.bool,valid:gv,width:ne.string,onClick:ne.func};const yy=[`th.jsx-2895298632{padding:12px;border:1px solid transparant;border-bottom:1px solid ${je.grey300};color:${je.grey800};font-weight:normal;font-size:14px;vertical-align:top;}`,"thead th.jsx-2895298632{padding:8px 12px;font-size:13px;}",`th.jsx-2895298632:last-of-type{border-inline-end:1px solid ${je.grey300};}`,`th.active.jsx-2895298632{outline:2px solid ${je.grey600};outline-offset:-2px;}`,`th.bordered.jsx-2895298632{border-inline-end:1px solid ${je.grey300};}`,"th.bordered.jsx-2895298632:last-child{border-inline-end:1px solid transparent;}",`th.error.jsx-2895298632{color:${je.red700};}`,`th.muted.jsx-2895298632{color:${je.grey700};font-style:italic;}`,`th.valid.jsx-2895298632{color:${je.green700};}`,"th.large.jsx-2895298632{padding:14px 12px;font-size:16px;}","thead th.large.jsx-2895298632{padding:13px 12px;font-size:15px;}","th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:1;}","thead th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:2;}","thead th.fixedHorizontally.jsx-2895298632{z-index:3;}","tr:last-child th.jsx-2895298632{border-bottom:1px solid transparent;}",`thead tr:last-child th.jsx-2895298632{border-bottom:1px solid ${je.grey300};}`,`tfoot>tr:first-child th.jsx-2895298632{border-top:1px solid ${je.grey300};}`];yy.__hash="2895298632";function Bb(){return Bb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Bb.apply(null,arguments)}const Hg="auto",Lx=Fe.forwardRef((i,e)=>{let{active:t,align:n="left",backgroundColor:s,bordered:l,children:u,className:r,colSpan:p,dataTest:f="dhis2-uicore-tablecell",error:m,fixed:v,large:y,left:_=Hg,muted:b,rowSpan:C,role:E,scope:S,staticStyle:x,top:A=Hg,valid:D,width:T=Hg,onClick:k,...N}=i;return pe.createElement("th",Bb({},N,{ref:e,colSpan:p,rowSpan:C,onClick:k,"data-test":f,role:E,scope:S,className:`jsx-${yy.__hash} `+_t.dynamic([["2588011372",[_,A,n,T,s||je.grey200,s||je.grey300,s||je.grey300,s||je.grey200]]])+" "+(vn(r,{active:t,bordered:l,error:m,fixed:v,fixedHorizontally:v&&_!==Hg,large:y,muted:b,staticStyle:x,valid:D})||"")}),u,pe.createElement(_t,{id:yy.__hash},yy),pe.createElement(_t,{id:"2588011372",dynamic:[_,A,n,T,s||je.grey200,s||je.grey300,s||je.grey300,s||je.grey200]},[`th.__jsx-style-dynamic-selector{inset-inline-start:${_};top:${A};text-align:${n};width:${T};background-color:${s||je.grey200};}`,`thead th.fixedHorizontally.__jsx-style-dynamic-selector{background-color:${s||je.grey300};}`,`tbody>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle),tfoot>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${s||je.grey300};}`,`tbody>tr:active>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${s||je.grey200};}`]))});Lx.displayName="TableHeaderCell";const yv=cx(["valid","error","muted"],ne.bool);Lx.propTypes={active:ne.bool,align:ne.oneOf(["left","center","right"]),backgroundColor:ne.string,bordered:ne.bool,children:ne.node,className:ne.string,colSpan:ne.string,dataTest:ne.string,error:yv,fixed:ne.bool,large:ne.bool,left:Qr(i=>i.fixed&&!i.top,ne.string),muted:yv,role:ne.string,rowSpan:ne.string,scope:ne.string,staticStyle:ne.bool,top:Qr(i=>i.fixed&&!i.left,ne.string),valid:yv,width:ne.string,onClick:ne.func};function $b(){return $b=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},$b.apply(null,arguments)}const Nx=Fe.forwardRef((i,e)=>{let{onClick:t,children:n,className:s,dataTest:l="dhis2-uicore-tableheadercellaction",title:u,...r}=i;return pe.createElement("button",$b({},r,{"data-test":l,onClick:t,title:u,ref:e,className:_t.dynamic([["4225768774",[je.grey400]]])+" "+(s||"")}),n,pe.createElement(_t,{id:"4225768774",dynamic:[je.grey400]},["button.__jsx-style-dynamic-selector{border:none;padding:0;background:transparent;width:24px;height:24px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;cursor:pointer;border-radius:4px;margin-inline-start:2px;}",`button.__jsx-style-dynamic-selector:hover,button.__jsx-style-dynamic-selector:focus-visible{background:${je.grey400};}`,"button.__jsx-style-dynamic-selector:active,button.__jsx-style-dynamic-selector:focus{outline:none;}"]))});Nx.displayName="TableHeaderCellAction";Nx.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,title:ne.string,onClick:ne.func};function Ub(){return Ub=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ub.apply(null,arguments)}const zx=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablefoot",role:l,...u}=i;return pe.createElement("tfoot",Ub({},u,{className:n,"data-test":s,ref:e,role:l}),t)});zx.displayName="TableFoot";zx.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,role:ne.string};function Vb(){return Vb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Vb.apply(null,arguments)}const jx=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s,role:l,...u}=i;return pe.createElement("thead",Vb({},u,{className:n,"data-test":s,ref:e,role:l}),t)});jx.displayName="TableHead";jx.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,role:ne.string};function Gb(){return Gb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Gb.apply(null,arguments)}const Ox=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablerow",draggable:l,role:u,selected:r,...p}=i;return pe.createElement("tr",Gb({},p,{ref:e,"data-test":s,role:u,className:"jsx-1820444258 "+(vn(n,{selected:r,draggable:l})||"")}),t,pe.createElement(_t,{id:"1820444258"},["tbody>tr.draggable.jsx-1820444258,tfoot>tr.draggable.jsx-1820444258{cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))});Ox.displayName="TableRow";Ox.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,draggable:ne.bool,role:ne.string,selected:ne.bool};function Hb(){return Hb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Hb.apply(null,arguments)}const p_=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablescrollbox",maxHeight:l="auto",maxWidth:u="auto",...r}=i;return pe.createElement("div",Hb({},r,{"data-test":s,ref:e,className:_t.dynamic([["2859562182",[je.grey300,l,u]]])+" "+(n||"")}),t,pe.createElement(_t,{id:"2859562182",dynamic:[je.grey300,l,u]},[`div.__jsx-style-dynamic-selector{border:1px solid ${je.grey300};border-top:none;box-sizing:border-box;max-height:${l};max-width:${u};overflow:auto;}`]))});p_.displayName="TableScrollBox";p_.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,maxHeight:ne.string,maxWidth:ne.string};const Fx=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-datatable",layout:l="auto",role:u,scrollHeight:r,scrollWidth:p,width:f="100%"}=i;const m=!!(r||p),v=pe.createElement(h_,{borderless:m,className:n,dataTest:s,layout:l,ref:e,role:u,width:f},t);return m?pe.createElement(p_,{className:vn(n,"tablescrollbox"),dataTest:`${s}-scrollbox`,maxHeight:r,maxWidth:p},v):v});Fx.displayName="DataTable";Fx.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,layout:ne.oneOf(["auto","fixed","initial","inherit"]),role:ne.string,scrollHeight:ne.string,scrollWidth:ne.string,width:ne.string};function qb(){return qb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},qb.apply(null,arguments)}const Rc=Fe.forwardRef((i,e)=>{let{active:t,align:n="left",backgroundColor:s,bordered:l,children:u,className:r,colSpan:p,dataTest:f="dhis2-uicore-datatablecell",error:m,fixed:v,large:y,left:_="auto",muted:b,rowSpan:C,role:E,scope:S,staticStyle:x,tag:A,valid:D,width:T="auto",onClick:k,...N}=i;const W=!A&&v||A&&A==="th"?Lx:tp;return pe.createElement(W,qb({},N,{active:t,align:n,backgroundColor:s,bordered:l,className:r,colSpan:p,dataTest:f,error:m,fixed:v,large:y,left:_,muted:b,rowSpan:C,ref:e,role:E,staticStyle:x,scope:S,valid:D,width:T,onClick:k}),u)});Rc.displayName="DataTableCell";const xv=cx(["valid","error","muted"],ne.bool),mC=Qr(i=>i.fixed,ne.string);Rc.propTypes={active:ne.bool,align:ne.oneOf(["left","center","right"]),backgroundColor:ne.string,bordered:ne.bool,children:ne.node,className:ne.string,colSpan:ne.string,dataTest:ne.string,error:xv,fixed:ne.bool,large:ne.bool,left:mC,muted:xv,role:ne.string,rowSpan:ne.string,scope:ne.string,staticStyle:ne.bool,tag:ne.oneOf(["td","th"]),valid:xv,width:mC,onClick:ne.func};const _h=["span.container.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}","span.top.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}","span.content.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:24px;}"];_h.__hash="1552921066";const gC={styles:pe.createElement(_t,{id:"1231353820"},["thead>tr>th.DataTableColumnHeader.jsx-1231353820{padding-top:6px;padding-bottom:6px;}","thead>tr>th.DataTableColumnHeader.large.jsx-1231353820{padding-top:12px;padding-bottom:12px;}"]),className:"jsx-1231353820"},a9={"Toggle filter":"","Sort items":" "},o9={"Toggle filter":"Pepnout filtr","Sort items":"Tdit poloky"},l9={"Toggle filter":"Toggle filter","Sort items":"Sort items"},c9={"Toggle filter":"Alternar filtro","Sort items":"Ordena elementos"},u9={"Toggle filter":"Alternar filtro","Sort items":"Clasificar artculos"},d9={"Toggle filter":"","Sort items":""},h9={"Toggle filter":"","Sort items":""},p9={"Toggle filter":"Sl p filter","Sort items":"Sorter elementer"},f9={"Toggle filter":"Schakelfilter","Sort items":"Items sorteren"},m9={"Toggle filter":" ","Sort items":" "},g9={"Toggle filter":" ","Sort items":" '"},y9={"Toggle filter":" ","Sort items":" "},x9={"Toggle filter":"","Sort items":""},ro="default";Oe.addResources("ar",ro,a9);Oe.addResources("cs",ro,o9);Oe.addResources("en",ro,l9);Oe.addResources("es",ro,c9);Oe.addResources("es_419",ro,u9);Oe.addResources("km",ro,d9);Oe.addResources("lo",ro,h9);Oe.addResources("nb",ro,p9);Oe.addResources("nl",ro,f9);Oe.addResources("ru",ro,m9);Oe.addResources("uk",ro,g9);Oe.addResources("uz_UZ_Cyrl",ro,y9);Oe.addResources("zh",ro,x9);const S3=i=>{let{active:e,name:t,onClick:n}=i;const s=e?je.blue700:je.grey600,l=n?u=>{n({name:t,show:!e},u)}:void 0;return pe.createElement(Nx,{onClick:l,title:Oe.t("Toggle filter")},pe.createElement(nS,{color:s}))};S3.propTypes={active:ne.bool,name:ne.string,onClick:ne.func};const v9="asc",b9="desc",_9="default",Mf=[_9,v9,b9],w9=i=>{const t=(Mf.indexOf(i)+1)%Mf.length;return Mf[t]},E3=i=>{let{name:e,sortDirection:t,title:n,onClick:s}=i;const l=w9(t),u=s?r=>{s({name:e,direction:l},r)}:void 0;return pe.createElement(Nx,{onClick:u,title:n||Oe.t("Sort items")},pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:_t.dynamic([["884818973",[je.grey500,je.blue700]]])+" "+(t||"")},pe.createElement("g",{fill:"none",fillRule:"evenodd",className:_t.dynamic([["884818973",[je.grey500,je.blue700]]])},pe.createElement("polygon",{points:"4 9 12 9 8 14",className:_t.dynamic([["884818973",[je.grey500,je.blue700]]])+" top"}),pe.createElement("polygon",{points:"4 7 12 7 8 2",className:_t.dynamic([["884818973",[je.grey500,je.blue700]]])+" bottom"}))),pe.createElement(_t,{id:"884818973",dynamic:[je.grey500,je.blue700]},[`svg.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${je.grey500};}`,`svg.asc.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.desc.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${je.blue700};}`]))};E3.propTypes={name:ne.string,sortDirection:Qr(i=>i.onClick,ne.oneOf(Mf)),title:ne.string,onClick:ne.func};const qg={left:"flex-start",center:"center",right:"flex-end"},Bx=Fe.forwardRef((i,e)=>{let{align:t,children:n,className:s,colSpan:l,dataTest:u="dhis2-uicore-datatablecellhead",filter:r,fixed:p,large:f,left:m,name:v,role:y,rowSpan:_,scope:b,showFilter:C,sortDirection:E,sortIconTitle:S,top:x,width:A,onFilterIconClick:D,onSortIconClick:T}=i;return pe.createElement(Lx,{align:t,className:vn(s,"DataTableColumnHeader",gC.className),colSpan:l,dataTest:u,fixed:p,large:f,left:m,ref:e,rowSpan:_,role:y,scope:b,top:x,width:A},pe.createElement("span",{className:`jsx-3463223249 jsx-${_h.__hash} container`},pe.createElement("span",{className:`jsx-3463223249 jsx-${_h.__hash} `+(vn("top",{large:f})||"")},pe.createElement("span",{className:`jsx-3463223249 jsx-${_h.__hash} content`},n),E&&pe.createElement(E3,{name:v,sortDirection:E,onClick:T,title:S}),r&&pe.createElement(S3,{name:v,active:C,onClick:D})),C&&r),gC.styles,pe.createElement(_t,{id:_h.__hash},_h),pe.createElement(_t,{id:"3463223249"},[`.label.jsx-3463223249{-webkit-box-pack:${qg[t]};-webkit-justify-content:${qg[t]};-ms-flex-pack:${qg[t]};justify-content:${qg[t]};}`]))});Bx.displayName="DataTableColumnHeader";Bx.propTypes={align:ne.oneOf(["left","center","right"]),children:ne.node,className:ne.string,colSpan:ne.string,dataTest:ne.string,filter:Qr(i=>i.onFilterIconClick||i.showFilter,ne.node),fixed:ne.bool,large:ne.bool,left:Qr(i=>i.fixed&&!i.top,ne.string),name:ne.string,role:ne.string,rowSpan:ne.string,scope:ne.string,showFilter:Qr(i=>i.filter,ne.bool),sortDirection:Qr(i=>i.onSortIconClick,ne.oneOf(Mf)),sortIconTitle:ne.string,top:Qr(i=>i.fixed&&!i.left,ne.string),width:ne.string,onFilterIconClick:Qr(i=>i.filter,ne.func),onSortIconClick:Qr(i=>i.sortDirection,ne.func)};const yC={styles:pe.createElement(_t,{id:"1795567040"},[`tr.isHoveringExpandedContent.jsx-1795567040>td{background-color:${je.grey100};}`,`tr.isHoveringExpandedContent.jsx-1795567040>th{background-color:${je.grey300};}`,"tr.selected.isHoveringExpandedContent.jsx-1795567040>td{background-color:#cdeae8;}","tr.expanded.jsx-1795567040>td{border-bottom-color:transparent;}",`tr.expanded.jsx-1795567040>td.bordered{border-bottom-color:${je.grey300};}`]),className:"jsx-1795567040"},C9=()=>pe.createElement(tp,{width:"48px"},pe.createElement(eS,null)),xC={styles:pe.createElement(_t,{id:"927553068"},["td.jsx-927553068{cursor:pointer;}"]),className:"jsx-927553068"},k3=i=>{let{expanded:e,onClick:t}=i;return pe.createElement(tp,{className:vn(xC.className,{expanded:e}),onClick:()=>t({expanded:!e}),width:"48px"},e?pe.createElement(XT,null):pe.createElement(YT,null),xC.styles)};k3.propTypes={expanded:ne.bool,onClick:ne.func};const{className:T9,styles:S9}={styles:pe.createElement(_t,{id:"626485122"},[`tr.expanded:hover+tr>td.jsx-626485122{background-color:${je.grey100};}`,`tr.expanded:active+tr>td.jsx-626485122{background-color:${je.grey200};}`,"tr.selected.expanded:hover+tr.jsx-626485122>td.jsx-626485122{background-color:#cdeae8;}"]),className:"jsx-626485122"},A3=i=>{let{children:e,className:t,colSpan:n,dataTest:s,selected:l,setIsHoveringExpandedContent:u}=i;return pe.createElement(Ox,{onMouseOver:()=>u(!0),onMouseOut:()=>u(!1),className:vn({[`${t}-expandedrow`]:!!t}),selected:l,dataTest:s&&`${s}-expandedrow`},pe.createElement(tp,{className:T9,colSpan:n},e,S9))};A3.propTypes={children:ne.node,className:ne.string,colSpan:ne.string,dataTest:ne.string,selected:ne.bool,setIsHoveringExpandedContent:ne.func};function Wb(){return Wb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Wb.apply(null,arguments)}const Jo=Fe.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-datatablerow",expandableContent:l,expanded:u,selected:r,draggable:p,role:f,onExpandToggle:m,...v}=i;const[y,_]=Fe.useState(!1),b=vn(n,yC.className,{expanded:u,selected:r,draggable:p,isHoveringExpandedContent:y}),C=pe.Children.count(t),E=String(p||l?C+1:C);return pe.createElement(pe.Fragment,null,pe.createElement(Ox,Wb({ref:e,className:b,dataTest:s,selected:r,draggable:p,role:f},v),p&&pe.createElement(C9,null),l&&pe.createElement(k3,{expanded:u,onClick:m}),t,yC.styles),l&&u&&pe.createElement(A3,{className:n,dataTest:s,setIsHoveringExpandedContent:_,colSpan:E,selected:r},l))});Jo.displayName="DataTableRow";Jo.propTypes={children:ne.node,className:ne.string,dataTest:ne.string,draggable:ne.bool,expandableContent:Qr(i=>i.onExpandToggle,ne.node),expanded:ne.bool,role:ne.string,selected:ne.bool,onExpandToggle:Qr(i=>i.expandableContent,ne.func)};var f_={};Object.defineProperty(f_,"__esModule",{value:!0});f_.parse=D9;f_.serialize=R9;const E9=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,k9=/^[\u0021-\u003A\u003C-\u007E]*$/,A9=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,M9=/^[\u0020-\u003A\u003D-\u007E]*$/,P9=Object.prototype.toString,I9=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function D9(i,e){const t=new I9,n=i.length;if(n<2)return t;const s=(e==null?void 0:e.decode)||L9;let l=0;do{const u=i.indexOf("=",l);if(u===-1)break;const r=i.indexOf(";",l),p=r===-1?n:r;if(u>p){l=i.lastIndexOf(";",u-1)+1;continue}const f=vC(i,l,u),m=bC(i,u,f),v=i.slice(f,m);if(t[v]===void 0){let y=vC(i,u+1,p),_=bC(i,p,y);const b=s(i.slice(y,_));t[v]=b}l=p+1}while(l<n);return t}function vC(i,e,t){do{const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<t);return t}function bC(i,e,t){for(;e>t;){const n=i.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return t}function R9(i,e,t){const n=(t==null?void 0:t.encode)||encodeURIComponent;if(!E9.test(i))throw new TypeError(`argument name is invalid: ${i}`);const s=n(e);if(!k9.test(s))throw new TypeError(`argument val is invalid: ${e}`);let l=i+"="+s;if(!t)return l;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);l+="; Max-Age="+t.maxAge}if(t.domain){if(!A9.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);l+="; Domain="+t.domain}if(t.path){if(!M9.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);l+="; Path="+t.path}if(t.expires){if(!N9(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);l+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(l+="; HttpOnly"),t.secure&&(l+="; Secure"),t.partitioned&&(l+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return l}function L9(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function N9(i){return P9.call(i)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _C="popstate";function z9(i={}){function e(s,l){let{pathname:u="/",search:r="",hash:p=""}=Zl(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Uf("",{pathname:u,search:r,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let u=s.document.querySelector("base"),r="";if(u&&u.getAttribute("href")){let p=s.location.href,f=p.indexOf("#");r=f===-1?p:p.slice(0,f)}return r+"#"+(typeof l=="string"?l:Bc(l))}function n(s,l){vs(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return O9(e,t,n,i)}function Dn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function vs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j9(){return Math.random().toString(36).substring(2,10)}function wC(i,e){return{usr:i.state,key:i.key,idx:e}}function Uf(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Zl(e):e,state:t,key:e&&e.key||n||j9()}}function Bc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Zl(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function O9(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:l=!1}=n,u=s.history,r="POP",p=null,f=m();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function m(){return(u.state||{idx:null}).idx}function v(){r="POP";let E=m(),S=E==null?null:E-f;f=E,p&&p({action:r,location:C.location,delta:S})}function y(E,S){r="PUSH";let x=Uf(C.location,E,S);t(x,E),f=m()+1;let A=wC(x,f),D=C.createHref(x);try{u.pushState(A,"",D)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(D)}l&&p&&p({action:r,location:C.location,delta:1})}function _(E,S){r="REPLACE";let x=Uf(C.location,E,S);t(x,E),f=m();let A=wC(x,f),D=C.createHref(x);u.replaceState(A,"",D),l&&p&&p({action:r,location:C.location,delta:0})}function b(E){let S=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof E=="string"?E:Bc(E);return x=x.replace(/ $/,"%20"),Dn(S,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,S)}let C={get action(){return r},get location(){return i(s,u)},listen(E){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(_C,v),p=E,()=>{s.removeEventListener(_C,v),p=null}},createHref(E){return e(s,E)},createURL:b,encodeLocation(E){let S=b(E);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:_,go(E){return u.go(E)}};return C}var F9=new Set(["lazy","caseSensitive","path","id","index","children"]);function B9(i){return i.index===!0}function $y(i,e,t=[],n={}){return i.map((s,l)=>{let u=[...t,String(l)],r=typeof s.id=="string"?s.id:u.join("-");if(Dn(s.index!==!0||!s.children,"Cannot specify children on an index route"),Dn(!n[r],`Found a route id collision on id "${r}".  Route id's must be globally unique within Data Router usages`),B9(s)){let p={...s,...e(s),id:r};return n[r]=p,p}else{let p={...s,...e(s),id:r,children:void 0};return n[r]=p,s.children&&(p.children=$y(s.children,e,u,n)),p}})}function Tc(i,e,t="/"){return xy(i,e,t,!1)}function xy(i,e,t,n){let s=typeof e=="string"?Zl(e):e,l=Lo(s.pathname||"/",t);if(l==null)return null;let u=P3(i);$9(u);let r=null;for(let p=0;r==null&&p<u.length;++p){let f=Q9(l);r=X9(u[p],f,n)}return r}function M3(i,e){let{route:t,pathname:n,params:s}=i;return{id:t.id,pathname:n,params:s,data:e[t.id],handle:t.handle}}function P3(i,e=[],t=[],n=""){let s=(l,u,r)=>{let p={relativePath:r===void 0?l.path||"":r,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(Dn(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length));let f=rl([n,p.relativePath]),m=t.concat(p);l.children&&l.children.length>0&&(Dn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),P3(l.children,e,m,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:Y9(f,l.index),routesMeta:m})};return i.forEach((l,u)=>{var r;if(l.path===""||!((r=l.path)!=null&&r.includes("?")))s(l,u);else for(let p of I3(l.path))s(l,u,p)}),e}function I3(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let u=I3(n.join("/")),r=[];return r.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&r.push(...u),r.map(p=>i.startsWith("/")&&p===""?"/":p)}function $9(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:Z9(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var U9=/^:[\w-]+$/,V9=3,G9=2,H9=1,q9=10,W9=-2,CC=i=>i==="*";function Y9(i,e){let t=i.split("/"),n=t.length;return t.some(CC)&&(n+=W9),e&&(n+=G9),t.filter(s=>!CC(s)).reduce((s,l)=>s+(U9.test(l)?V9:l===""?H9:q9),n)}function Z9(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function X9(i,e,t=!1){let{routesMeta:n}=i,s={},l="/",u=[];for(let r=0;r<n.length;++r){let p=n[r],f=r===n.length-1,m=l==="/"?e:e.slice(l.length)||"/",v=Uy({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},m),y=p.route;if(!v&&f&&t&&!n[n.length-1].route.index&&(v=Uy({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:rl([l,v.pathname]),pathnameBase:t8(rl([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=rl([l,v.pathnameBase]))}return u}function Uy(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=K9(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),r=s.slice(1);return{params:n.reduce((f,{paramName:m,isOptional:v},y)=>{if(m==="*"){let b=r[y]||"";u=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const _=r[y];return v&&!_?f[m]=void 0:f[m]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:u,pattern:i}}function K9(i,e=!1,t=!0){vs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,r,p)=>(n.push({paramName:r,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Q9(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Lo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function J9(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?Zl(i):i;return{pathname:t?t.startsWith("/")?t:e8(t,e):e,search:i8(n),hash:n8(s)}}function e8(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vv(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D3(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $x(i){let e=D3(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Ux(i,e,t,n=!1){let s;typeof i=="string"?s=Zl(i):(s={...i},Dn(!s.pathname||!s.pathname.includes("?"),vv("?","pathname","search",s)),Dn(!s.pathname||!s.pathname.includes("#"),vv("#","pathname","hash",s)),Dn(!s.search||!s.search.includes("#"),vv("#","search","hash",s)));let l=i===""||s.pathname==="",u=l?"/":s.pathname,r;if(u==null)r=t;else{let v=e.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}r=v>=0?e[v]:"/"}let p=J9(s,r),f=u&&u!=="/"&&u.endsWith("/"),m=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(f||m)&&(p.pathname+="/"),p}var rl=i=>i.join("/").replace(/\/\/+/g,"/"),t8=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),i8=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,n8=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Vy=class{constructor(i,e,t,n=!1){this.status=i,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Sm(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var R3=["POST","PUT","PATCH","DELETE"],r8=new Set(R3),s8=["GET",...R3],a8=new Set(s8),o8=new Set([301,302,303,307,308]),l8=new Set([307,308]),bv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},c8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},m_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u8=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),L3="remix-router-transitions",N3=Symbol("ResetLoaderData");function d8(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Dn(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.mapRouteProperties||u8,s={},l=$y(i.routes,n,void 0,s),u,r=i.basename||"/",p=i.dataStrategy||g8,f=i.patchRoutesOnNavigation,m={...i.future},v=null,y=new Set,_=null,b=null,C=null,E=i.hydrationData!=null,S=Tc(l,i.history.location,r),x=null;if(S==null&&!f){let dt=uo(404,{pathname:i.history.location.pathname}),{matches:vt,route:It}=LC(l);S=vt,x={[It.id]:dt}}S&&!i.hydrationData&&Qi(S,l,i.history.location.pathname).active&&(S=null);let A;if(S)if(S.some(dt=>dt.route.lazy))A=!1;else if(!S.some(dt=>dt.route.loader))A=!0;else{let dt=i.hydrationData?i.hydrationData.loaderData:null,vt=i.hydrationData?i.hydrationData.errors:null;if(vt){let It=S.findIndex(Ft=>vt[Ft.route.id]!==void 0);A=S.slice(0,It+1).every(Ft=>!Zb(Ft.route,dt,vt))}else A=S.every(It=>!Zb(It.route,dt,vt))}else{A=!1,S=[];let dt=Qi(null,l,i.history.location.pathname);dt.active&&dt.matches&&(S=dt.matches)}let D,T={historyAction:i.history.action,location:i.history.location,matches:S,initialized:A,navigation:bv,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||x,fetchers:new Map,blockers:new Map},k="POP",N=!1,W,Z=!1,K=new Map,j=null,V=!1,$=!1,L=new Set,R=new Map,G=0,U=-1,B=new Map,H=new Set,q=new Map,ae=new Map,fe=new Set,re=new Map,ce,ke=null;function ve(){if(v=i.history.listen(({action:dt,location:vt,delta:It})=>{if(ce){ce(),ce=void 0;return}vs(re.size===0||It!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ft=Et({currentLocation:T.location,nextLocation:vt,historyAction:dt});if(Ft&&It!=null){let Yt=new Promise(vi=>{ce=vi});i.history.go(It*-1),ft(Ft,{state:"blocked",location:vt,proceed(){ft(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),Yt.then(()=>i.history.go(It))},reset(){let vi=new Map(T.blockers);vi.set(Ft,lf),ee({blockers:vi})}});return}return se(dt,vt)}),t){k8(e,K);let dt=()=>A8(e,K);e.addEventListener("pagehide",dt),j=()=>e.removeEventListener("pagehide",dt)}return T.initialized||se("POP",T.location,{initialHydration:!0}),D}function Ee(){v&&v(),j&&j(),y.clear(),W&&W.abort(),T.fetchers.forEach((dt,vt)=>$e(vt)),T.blockers.forEach((dt,vt)=>Lt(vt))}function Q(dt){return y.add(dt),()=>y.delete(dt)}function ee(dt,vt={}){T={...T,...dt};let It=[],Ft=[];T.fetchers.forEach((Yt,vi)=>{Yt.state==="idle"&&(fe.has(vi)?It.push(vi):Ft.push(vi))}),fe.forEach(Yt=>{!T.fetchers.has(Yt)&&!R.has(Yt)&&It.push(Yt)}),[...y].forEach(Yt=>Yt(T,{deletedFetchers:It,viewTransitionOpts:vt.viewTransitionOpts,flushSync:vt.flushSync===!0})),It.forEach(Yt=>$e(Yt)),Ft.forEach(Yt=>T.fetchers.delete(Yt))}function oe(dt,vt,{flushSync:It}={}){var be,Le;let Ft=T.actionData!=null&&T.navigation.formMethod!=null&&Eo(T.navigation.formMethod)&&T.navigation.state==="loading"&&((be=dt.state)==null?void 0:be._isRedirect)!==!0,Yt;vt.actionData?Object.keys(vt.actionData).length>0?Yt=vt.actionData:Yt=null:Ft?Yt=T.actionData:Yt=null;let vi=vt.loaderData?DC(T.loaderData,vt.loaderData,vt.matches||[],vt.errors):T.loaderData,Oi=T.blockers;Oi.size>0&&(Oi=new Map(Oi),Oi.forEach((Ge,Qe)=>Oi.set(Qe,lf)));let pi=N===!0||T.navigation.formMethod!=null&&Eo(T.navigation.formMethod)&&((Le=dt.state)==null?void 0:Le._isRedirect)!==!0;u&&(l=u,u=void 0),V||k==="POP"||(k==="PUSH"?i.history.push(dt,dt.state):k==="REPLACE"&&i.history.replace(dt,dt.state));let We;if(k==="POP"){let Ge=K.get(T.location.pathname);Ge&&Ge.has(dt.pathname)?We={currentLocation:T.location,nextLocation:dt}:K.has(dt.pathname)&&(We={currentLocation:dt,nextLocation:T.location})}else if(Z){let Ge=K.get(T.location.pathname);Ge?Ge.add(dt.pathname):(Ge=new Set([dt.pathname]),K.set(T.location.pathname,Ge)),We={currentLocation:T.location,nextLocation:dt}}ee({...vt,actionData:Yt,loaderData:vi,historyAction:k,location:dt,initialized:!0,navigation:bv,revalidation:"idle",restoreScrollPosition:un(dt,vt.matches||T.matches),preventScrollReset:pi,blockers:Oi},{viewTransitionOpts:We,flushSync:It===!0}),k="POP",N=!1,Z=!1,V=!1,$=!1,ke==null||ke.resolve(),ke=null}async function we(dt,vt){if(typeof dt=="number"){i.history.go(dt);return}let It=Yb(T.location,T.matches,r,dt,vt==null?void 0:vt.fromRouteId,vt==null?void 0:vt.relative),{path:Ft,submission:Yt,error:vi}=TC(!1,It,vt),Oi=T.location,pi=Uf(T.location,Ft,vt&&vt.state);pi={...pi,...i.history.encodeLocation(pi)};let We=vt&&vt.replace!=null?vt.replace:void 0,be="PUSH";We===!0?be="REPLACE":We===!1||Yt!=null&&Eo(Yt.formMethod)&&Yt.formAction===T.location.pathname+T.location.search&&(be="REPLACE");let Le=vt&&"preventScrollReset"in vt?vt.preventScrollReset===!0:void 0,Ge=(vt&&vt.flushSync)===!0,Qe=Et({currentLocation:Oi,nextLocation:pi,historyAction:be});if(Qe){ft(Qe,{state:"blocked",location:pi,proceed(){ft(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:pi}),we(dt,vt)},reset(){let st=new Map(T.blockers);st.set(Qe,lf),ee({blockers:st})}});return}await se(be,pi,{submission:Yt,pendingError:vi,preventScrollReset:Le,replace:vt&&vt.replace,enableViewTransition:vt&&vt.viewTransition,flushSync:Ge})}function J(){ke||(ke=M8()),ge(),ee({revalidation:"loading"});let dt=ke.promise;return T.navigation.state==="submitting"?dt:T.navigation.state==="idle"?(se(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),dt):(se(k||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:Z===!0}),dt)}async function se(dt,vt,It){W&&W.abort(),W=null,k=dt,V=(It&&It.startUninterruptedRevalidation)===!0,qt(T.location,T.matches),N=(It&&It.preventScrollReset)===!0,Z=(It&&It.enableViewTransition)===!0;let Ft=u||l,Yt=It&&It.overrideNavigation,vi=Tc(Ft,vt,r),Oi=(It&&It.flushSync)===!0,pi=Qi(vi,Ft,vt.pathname);if(pi.active&&pi.matches&&(vi=pi.matches),!vi){let{error:ct,notFoundMatches:ot,route:rt}=Tt(vt.pathname);oe(vt,{matches:ot,loaderData:{},errors:{[rt.id]:ct}},{flushSync:Oi});return}if(T.initialized&&!$&&w8(T.location,vt)&&!(It&&It.submission&&Eo(It.submission.formMethod))){oe(vt,{matches:vi},{flushSync:Oi});return}W=new AbortController;let We=ch(i.history,vt,W.signal,It&&It.submission),be;if(It&&It.pendingError)be=[Fu(vi).route.id,{type:"error",error:It.pendingError}];else if(It&&It.submission&&Eo(It.submission.formMethod)){let ct=await de(We,vt,It.submission,vi,pi.active,{replace:It.replace,flushSync:Oi});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[ot,rt]=ct.pendingActionResult;if(Ya(rt)&&Sm(rt.error)&&rt.error.status===404){W=null,oe(vt,{matches:ct.matches,loaderData:{},errors:{[ot]:rt.error}});return}}vi=ct.matches||vi,be=ct.pendingActionResult,Yt=_v(vt,It.submission),Oi=!1,pi.active=!1,We=ch(i.history,We.url,We.signal)}let{shortCircuited:Le,matches:Ge,loaderData:Qe,errors:st}=await xe(We,vt,vi,pi.active,Yt,It&&It.submission,It&&It.fetcherSubmission,It&&It.replace,It&&It.initialHydration===!0,Oi,be);Le||(W=null,oe(vt,{matches:Ge||vi,...RC(be),loaderData:Qe,errors:st}))}async function de(dt,vt,It,Ft,Yt,vi={}){ge();let Oi=S8(vt,It);if(ee({navigation:Oi},{flushSync:vi.flushSync===!0}),Yt){let be=await bn(Ft,vt.pathname,dt.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let Le=Fu(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[Le,{type:"error",error:be.error}]}}else if(be.matches)Ft=be.matches;else{let{notFoundMatches:Le,error:Ge,route:Qe}=Tt(vt.pathname);return{matches:Le,pendingActionResult:[Qe.id,{type:"error",error:Ge}]}}}let pi,We=wf(Ft,vt);if(!We.route.action&&!We.route.lazy)pi={type:"error",error:uo(405,{method:dt.method,pathname:vt.pathname,routeId:We.route.id})};else if(pi=(await Ae("action",T,dt,[We],Ft,null))[We.route.id],dt.signal.aborted)return{shortCircuited:!0};if($u(pi)){let be;return vi&&vi.replace!=null?be=vi.replace:be=MC(pi.response.headers.get("Location"),new URL(dt.url),r)===T.location.pathname+T.location.search,await qe(dt,pi,!0,{submission:It,replace:be}),{shortCircuited:!0}}if(Ya(pi)){let be=Fu(Ft,We.route.id);return(vi&&vi.replace)!==!0&&(k="PUSH"),{matches:Ft,pendingActionResult:[be.route.id,pi]}}return{matches:Ft,pendingActionResult:[We.route.id,pi]}}async function xe(dt,vt,It,Ft,Yt,vi,Oi,pi,We,be,Le){let Ge=Yt||_v(vt,vi),Qe=vi||Oi||zC(Ge),st=!V&&!We;if(Ft){if(st){let Pi=Ce(Le);ee({navigation:Ge,...Pi!==void 0?{actionData:Pi}:{}},{flushSync:be})}let _i=await bn(It,vt.pathname,dt.signal);if(_i.type==="aborted")return{shortCircuited:!0};if(_i.type==="error"){let Pi=Fu(_i.partialMatches).route.id;return{matches:_i.partialMatches,loaderData:{},errors:{[Pi]:_i.error}}}else if(_i.matches)It=_i.matches;else{let{error:Pi,notFoundMatches:Vi,route:Fi}=Tt(vt.pathname);return{matches:Vi,loaderData:{},errors:{[Fi.id]:Pi}}}}let ct=u||l,[ot,rt]=EC(i.history,T,It,Qe,vt,We===!0,$,L,fe,q,H,ct,r,Le);if(U=++G,ot.length===0&&rt.length===0){let _i=ht();return oe(vt,{matches:It,loaderData:{},errors:Le&&Ya(Le[1])?{[Le[0]]:Le[1].error}:null,...RC(Le),..._i?{fetchers:new Map(T.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(st){let _i={};if(!Ft){_i.navigation=Ge;let Pi=Ce(Le);Pi!==void 0&&(_i.actionData=Pi)}rt.length>0&&(_i.fetchers=Ne(rt)),ee(_i,{flushSync:be})}rt.forEach(_i=>{tt(_i.key),_i.controller&&R.set(_i.key,_i.controller)});let mt=()=>rt.forEach(_i=>tt(_i.key));W&&W.signal.addEventListener("abort",mt);let{loaderResults:At,fetcherResults:zt}=await ye(T,It,ot,rt,dt);if(dt.signal.aborted)return{shortCircuited:!0};W&&W.signal.removeEventListener("abort",mt),rt.forEach(_i=>R.delete(_i.key));let Rt=Wg(At);if(Rt)return await qe(dt,Rt.result,!0,{replace:pi}),{shortCircuited:!0};if(Rt=Wg(zt),Rt)return H.add(Rt.key),await qe(dt,Rt.result,!0,{replace:pi}),{shortCircuited:!0};let{loaderData:li,errors:Qt}=IC(T,It,At,Le,rt,zt);We&&T.errors&&(Qt={...T.errors,...Qt});let fi=ht(),bi=gt(U),Ui=fi||bi||rt.length>0;return{matches:It,loaderData:li,errors:Qt,...Ui?{fetchers:new Map(T.fetchers)}:{}}}function Ce(dt){if(dt&&!Ya(dt[1]))return{[dt[0]]:dt[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function Ne(dt){return dt.forEach(vt=>{let It=T.fetchers.get(vt.key),Ft=cf(void 0,It?It.data:void 0);T.fetchers.set(vt.key,Ft)}),new Map(T.fetchers)}async function Te(dt,vt,It,Ft){tt(dt);let Yt=(Ft&&Ft.flushSync)===!0,vi=u||l,Oi=Yb(T.location,T.matches,r,It,vt,Ft==null?void 0:Ft.relative),pi=Tc(vi,Oi,r),We=Qi(pi,vi,Oi);if(We.active&&We.matches&&(pi=We.matches),!pi){De(dt,vt,uo(404,{pathname:Oi}),{flushSync:Yt});return}let{path:be,submission:Le,error:Ge}=TC(!0,Oi,Ft);if(Ge){De(dt,vt,Ge,{flushSync:Yt});return}let Qe=wf(pi,be),st=(Ft&&Ft.preventScrollReset)===!0;if(Le&&Eo(Le.formMethod)){await Ie(dt,vt,be,Qe,pi,We.active,Yt,st,Le);return}q.set(dt,{routeId:vt,path:be}),await Ue(dt,vt,be,Qe,pi,We.active,Yt,st,Le)}async function Ie(dt,vt,It,Ft,Yt,vi,Oi,pi,We){ge(),q.delete(dt);function be(fn){if(!fn.route.action&&!fn.route.lazy){let Yn=uo(405,{method:We.formMethod,pathname:It,routeId:vt});return De(dt,vt,Yn,{flushSync:Oi}),!0}return!1}if(!vi&&be(Ft))return;let Le=T.fetchers.get(dt);Me(dt,E8(We,Le),{flushSync:Oi});let Ge=new AbortController,Qe=ch(i.history,It,Ge.signal,We);if(vi){let fn=await bn(Yt,It,Qe.signal);if(fn.type==="aborted")return;if(fn.type==="error"){De(dt,vt,fn.error,{flushSync:Oi});return}else if(fn.matches){if(Yt=fn.matches,Ft=wf(Yt,It),be(Ft))return}else{De(dt,vt,uo(404,{pathname:It}),{flushSync:Oi});return}}R.set(dt,Ge);let st=G,ot=(await Ae("action",T,Qe,[Ft],Yt,dt))[Ft.route.id];if(Qe.signal.aborted){R.get(dt)===Ge&&R.delete(dt);return}if(fe.has(dt)){if($u(ot)||Ya(ot)){Me(dt,vc(void 0));return}}else{if($u(ot))if(R.delete(dt),U>st){Me(dt,vc(void 0));return}else return H.add(dt),Me(dt,cf(We)),qe(Qe,ot,!1,{fetcherSubmission:We,preventScrollReset:pi});if(Ya(ot)){De(dt,vt,ot.error);return}}let rt=T.navigation.location||T.location,mt=ch(i.history,rt,Ge.signal),At=u||l,zt=T.navigation.state!=="idle"?Tc(At,T.navigation.location,r):T.matches;Dn(zt,"Didn't find any matches after fetcher action");let Rt=++G;B.set(dt,Rt);let li=cf(We,ot.data);T.fetchers.set(dt,li);let[Qt,fi]=EC(i.history,T,zt,We,rt,!1,$,L,fe,q,H,At,r,[Ft.route.id,ot]);fi.filter(fn=>fn.key!==dt).forEach(fn=>{let Yn=fn.key,br=T.fetchers.get(Yn),Hr=cf(void 0,br?br.data:void 0);T.fetchers.set(Yn,Hr),tt(Yn),fn.controller&&R.set(Yn,fn.controller)}),ee({fetchers:new Map(T.fetchers)});let bi=()=>fi.forEach(fn=>tt(fn.key));Ge.signal.addEventListener("abort",bi);let{loaderResults:Ui,fetcherResults:_i}=await ye(T,zt,Qt,fi,mt);if(Ge.signal.aborted)return;Ge.signal.removeEventListener("abort",bi),B.delete(dt),R.delete(dt),fi.forEach(fn=>R.delete(fn.key));let Pi=Wg(Ui);if(Pi)return qe(mt,Pi.result,!1,{preventScrollReset:pi});if(Pi=Wg(_i),Pi)return H.add(Pi.key),qe(mt,Pi.result,!1,{preventScrollReset:pi});let{loaderData:Vi,errors:Fi}=IC(T,zt,Ui,void 0,fi,_i);if(T.fetchers.has(dt)){let fn=vc(ot.data);T.fetchers.set(dt,fn)}gt(Rt),T.navigation.state==="loading"&&Rt>U?(Dn(k,"Expected pending action"),W&&W.abort(),oe(T.navigation.location,{matches:zt,loaderData:Vi,errors:Fi,fetchers:new Map(T.fetchers)})):(ee({errors:Fi,loaderData:DC(T.loaderData,Vi,zt,Fi),fetchers:new Map(T.fetchers)}),$=!1)}async function Ue(dt,vt,It,Ft,Yt,vi,Oi,pi,We){let be=T.fetchers.get(dt);Me(dt,cf(We,be?be.data:void 0),{flushSync:Oi});let Le=new AbortController,Ge=ch(i.history,It,Le.signal);if(vi){let ot=await bn(Yt,It,Ge.signal);if(ot.type==="aborted")return;if(ot.type==="error"){De(dt,vt,ot.error,{flushSync:Oi});return}else if(ot.matches)Yt=ot.matches,Ft=wf(Yt,It);else{De(dt,vt,uo(404,{pathname:It}),{flushSync:Oi});return}}R.set(dt,Le);let Qe=G,ct=(await Ae("loader",T,Ge,[Ft],Yt,dt))[Ft.route.id];if(R.get(dt)===Le&&R.delete(dt),!Ge.signal.aborted){if(fe.has(dt)){Me(dt,vc(void 0));return}if($u(ct))if(U>Qe){Me(dt,vc(void 0));return}else{H.add(dt),await qe(Ge,ct,!1,{preventScrollReset:pi});return}if(Ya(ct)){De(dt,vt,ct.error);return}Me(dt,vc(ct.data))}}async function qe(dt,vt,It,{submission:Ft,fetcherSubmission:Yt,preventScrollReset:vi,replace:Oi}={}){vt.response.headers.has("X-Remix-Revalidate")&&($=!0);let pi=vt.response.headers.get("Location");Dn(pi,"Expected a Location header on the redirect Response"),pi=MC(pi,new URL(dt.url),r);let We=Uf(T.location,pi,{_isRedirect:!0});if(t){let ct=!1;if(vt.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(m_.test(pi)){const ot=i.history.createURL(pi);ct=ot.origin!==e.location.origin||Lo(ot.pathname,r)==null}if(ct){Oi?e.location.replace(pi):e.location.assign(pi);return}}W=null;let be=Oi===!0||vt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Le,formAction:Ge,formEncType:Qe}=T.navigation;!Ft&&!Yt&&Le&&Ge&&Qe&&(Ft=zC(T.navigation));let st=Ft||Yt;if(l8.has(vt.response.status)&&st&&Eo(st.formMethod))await se(be,We,{submission:{...st,formAction:pi},preventScrollReset:vi||N,enableViewTransition:It?Z:void 0});else{let ct=_v(We,Ft);await se(be,We,{overrideNavigation:ct,fetcherSubmission:Yt,preventScrollReset:vi||N,enableViewTransition:It?Z:void 0})}}async function Ae(dt,vt,It,Ft,Yt,vi){let Oi,pi={};try{Oi=await y8(p,dt,vt,It,Ft,Yt,vi,s,n)}catch(We){return Ft.forEach(be=>{pi[be.route.id]={type:"error",error:We}}),pi}for(let[We,be]of Object.entries(Oi))if(C8(be)){let Le=be.result;pi[We]={type:"redirect",response:b8(Le,It,We,Yt,r)}}else pi[We]=await v8(be);return pi}async function ye(dt,vt,It,Ft,Yt){let vi=Ae("loader",dt,Yt,It,vt,null),Oi=Promise.all(Ft.map(async be=>{if(be.matches&&be.match&&be.controller){let Ge=(await Ae("loader",dt,ch(i.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:Ge}}else return Promise.resolve({[be.key]:{type:"error",error:uo(404,{pathname:be.path})}})})),pi=await vi,We=(await Oi).reduce((be,Le)=>Object.assign(be,Le),{});return{loaderResults:pi,fetcherResults:We}}function ge(){$=!0,q.forEach((dt,vt)=>{R.has(vt)&&L.add(vt),tt(vt)})}function Me(dt,vt,It={}){T.fetchers.set(dt,vt),ee({fetchers:new Map(T.fetchers)},{flushSync:(It&&It.flushSync)===!0})}function De(dt,vt,It,Ft={}){let Yt=Fu(T.matches,vt);$e(dt),ee({errors:{[Yt.route.id]:It},fetchers:new Map(T.fetchers)},{flushSync:(Ft&&Ft.flushSync)===!0})}function Pe(dt){return ae.set(dt,(ae.get(dt)||0)+1),fe.has(dt)&&fe.delete(dt),T.fetchers.get(dt)||c8}function $e(dt){let vt=T.fetchers.get(dt);R.has(dt)&&!(vt&&vt.state==="loading"&&B.has(dt))&&tt(dt),q.delete(dt),B.delete(dt),H.delete(dt),fe.delete(dt),L.delete(dt),T.fetchers.delete(dt)}function Ke(dt){let vt=(ae.get(dt)||0)-1;vt<=0?(ae.delete(dt),fe.add(dt)):ae.set(dt,vt),ee({fetchers:new Map(T.fetchers)})}function tt(dt){let vt=R.get(dt);vt&&(vt.abort(),R.delete(dt))}function nt(dt){for(let vt of dt){let It=Pe(vt),Ft=vc(It.data);T.fetchers.set(vt,Ft)}}function ht(){let dt=[],vt=!1;for(let It of H){let Ft=T.fetchers.get(It);Dn(Ft,`Expected fetcher: ${It}`),Ft.state==="loading"&&(H.delete(It),dt.push(It),vt=!0)}return nt(dt),vt}function gt(dt){let vt=[];for(let[It,Ft]of B)if(Ft<dt){let Yt=T.fetchers.get(It);Dn(Yt,`Expected fetcher: ${It}`),Yt.state==="loading"&&(tt(It),B.delete(It),vt.push(It))}return nt(vt),vt.length>0}function Ct(dt,vt){let It=T.blockers.get(dt)||lf;return re.get(dt)!==vt&&re.set(dt,vt),It}function Lt(dt){T.blockers.delete(dt),re.delete(dt)}function ft(dt,vt){let It=T.blockers.get(dt)||lf;Dn(It.state==="unblocked"&&vt.state==="blocked"||It.state==="blocked"&&vt.state==="blocked"||It.state==="blocked"&&vt.state==="proceeding"||It.state==="blocked"&&vt.state==="unblocked"||It.state==="proceeding"&&vt.state==="unblocked",`Invalid blocker state transition: ${It.state} -> ${vt.state}`);let Ft=new Map(T.blockers);Ft.set(dt,vt),ee({blockers:Ft})}function Et({currentLocation:dt,nextLocation:vt,historyAction:It}){if(re.size===0)return;re.size>1&&vs(!1,"A router only supports one blocker at a time");let Ft=Array.from(re.entries()),[Yt,vi]=Ft[Ft.length-1],Oi=T.blockers.get(Yt);if(!(Oi&&Oi.state==="proceeding")&&vi({currentLocation:dt,nextLocation:vt,historyAction:It}))return Yt}function Tt(dt){let vt=uo(404,{pathname:dt}),It=u||l,{matches:Ft,route:Yt}=LC(It);return{notFoundMatches:Ft,route:Yt,error:vt}}function ai(dt,vt,It){if(_=dt,C=vt,b=It||null,!E&&T.navigation===bv){E=!0;let Ft=un(T.location,T.matches);Ft!=null&&ee({restoreScrollPosition:Ft})}return()=>{_=null,C=null,b=null}}function hi(dt,vt){return b&&b(dt,vt.map(Ft=>M3(Ft,T.loaderData)))||dt.key}function qt(dt,vt){if(_&&C){let It=hi(dt,vt);_[It]=C()}}function un(dt,vt){if(_){let It=hi(dt,vt),Ft=_[It];if(typeof Ft=="number")return Ft}return null}function Qi(dt,vt,It){if(f)if(dt){if(Object.keys(dt[0].params).length>0)return{active:!0,matches:xy(vt,It,r,!0)}}else return{active:!0,matches:xy(vt,It,r,!0)||[]};return{active:!1,matches:null}}async function bn(dt,vt,It){if(!f)return{type:"success",matches:dt};let Ft=dt;for(;;){let Yt=u==null,vi=u||l,Oi=s;try{await f({path:vt,matches:Ft,patch:(be,Le)=>{It.aborted||AC(be,Le,vi,Oi,n)}})}catch(be){return{type:"error",error:be,partialMatches:Ft}}finally{Yt&&!It.aborted&&(l=[...l])}if(It.aborted)return{type:"aborted"};let pi=Tc(vi,vt,r);if(pi)return{type:"success",matches:pi};let We=xy(vi,vt,r,!0);if(!We||Ft.length===We.length&&Ft.every((be,Le)=>be.route.id===We[Le].route.id))return{type:"success",matches:null};Ft=We}}function Bn(dt){s={},u=$y(dt,n,void 0,s)}function an(dt,vt){let It=u==null;AC(dt,vt,u||l,s,n),It&&(l=[...l],ee({}))}return D={get basename(){return r},get future(){return m},get state(){return T},get routes(){return l},get window(){return e},initialize:ve,subscribe:Q,enableScrollRestoration:ai,navigate:we,fetch:Te,revalidate:J,createHref:dt=>i.history.createHref(dt),encodeLocation:dt=>i.history.encodeLocation(dt),getFetcher:Pe,deleteFetcher:Ke,dispose:Ee,getBlocker:Ct,deleteBlocker:Lt,patchRoutes:an,_internalFetchControllers:R,_internalSetRoutes:Bn},D}function h8(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function Yb(i,e,t,n,s,l){let u,r;if(s){u=[];for(let f of e)if(u.push(f),f.route.id===s){r=f;break}}else u=e,r=e[e.length-1];let p=Ux(n||".",$x(u),Lo(i.pathname,t)||i.pathname,l==="path");if(n==null&&(p.search=i.search,p.hash=i.hash),(n==null||n===""||n===".")&&r){let f=g_(p.search);if(r.route.index&&!f)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!r.route.index&&f){let m=new URLSearchParams(p.search),v=m.getAll("index");m.delete("index"),v.filter(_=>_).forEach(_=>m.append("index",_));let y=m.toString();p.search=y?`?${y}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:rl([t,p.pathname])),Bc(p)}function TC(i,e,t){if(!t||!h8(t))return{path:e};if(t.formMethod&&!T8(t.formMethod))return{path:e,error:uo(405,{method:t.formMethod})};let n=()=>({path:e,error:uo(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),u=j3(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Eo(l))return n();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[_,b])=>`${y}${_}=${b}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!Eo(l))return n();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return n()}}}Dn(typeof FormData=="function","FormData is not available in this environment");let r,p;if(t.formData)r=Xb(t.formData),p=t.formData;else if(t.body instanceof FormData)r=Xb(t.body),p=t.body;else if(t.body instanceof URLSearchParams)r=t.body,p=PC(r);else if(t.body==null)r=new URLSearchParams,p=new FormData;else try{r=new URLSearchParams(t.body),p=PC(r)}catch{return n()}let f={formMethod:l,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Eo(f.formMethod))return{path:e,submission:f};let m=Zl(e);return i&&m.search&&g_(m.search)&&r.append("index",""),m.search=`?${r}`,{path:Bc(m),submission:f}}function SC(i,e,t=!1){let n=i.findIndex(s=>s.route.id===e);return n>=0?i.slice(0,t?n+1:n):i}function EC(i,e,t,n,s,l,u,r,p,f,m,v,y,_){let b=_?Ya(_[1])?_[1].error:_[1].data:void 0,C=i.createURL(e.location),E=i.createURL(s),S=t;l&&e.errors?S=SC(t,Object.keys(e.errors)[0],!0):_&&Ya(_[1])&&(S=SC(t,_[0]));let x=_?_[1].statusCode:void 0,A=x&&x>=400,D=S.filter((k,N)=>{let{route:W}=k;if(W.lazy)return!0;if(W.loader==null)return!1;if(l)return Zb(W,e.loaderData,e.errors);if(p8(e.loaderData,e.matches[N],k))return!0;let Z=e.matches[N],K=k;return kC(k,{currentUrl:C,currentParams:Z.params,nextUrl:E,nextParams:K.params,...n,actionResult:b,actionStatus:x,defaultShouldRevalidate:A?!1:u||C.pathname+C.search===E.pathname+E.search||C.search!==E.search||f8(Z,K)})}),T=[];return f.forEach((k,N)=>{if(l||!t.some(V=>V.route.id===k.routeId)||p.has(N))return;let W=Tc(v,k.path,y);if(!W){T.push({key:N,routeId:k.routeId,path:k.path,matches:null,match:null,controller:null});return}let Z=e.fetchers.get(N),K=wf(W,k.path),j=!1;m.has(N)?j=!1:r.has(N)?(r.delete(N),j=!0):Z&&Z.state!=="idle"&&Z.data===void 0?j=u:j=kC(K,{currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:t[t.length-1].params,...n,actionResult:b,actionStatus:x,defaultShouldRevalidate:A?!1:u}),j&&T.push({key:N,routeId:k.routeId,path:k.path,matches:W,match:K,controller:new AbortController})}),[D,T]}function Zb(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let n=e!=null&&e[i.id]!==void 0,s=t!=null&&t[i.id]!==void 0;return!n&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!s}function p8(i,e,t){let n=!e||t.route.id!==e.route.id,s=!i.hasOwnProperty(t.route.id);return n||s}function f8(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function kC(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function AC(i,e,t,n,s){let l;if(i){let p=n[i];Dn(p,`No route found to patch children into: routeId = ${i}`),p.children||(p.children=[]),l=p.children}else l=t;let u=e.filter(p=>!l.some(f=>z3(p,f))),r=$y(u,s,[i||"_","patch",String((l==null?void 0:l.length)||"0")],n);l.push(...r)}function z3(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,n)=>{var s;return(s=e.children)==null?void 0:s.some(l=>z3(t,l))}):!1}async function m8(i,e,t){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let s=t[i.id];Dn(s,"No route found in manifest");let l={};for(let u in n){let p=s[u]!==void 0&&u!=="hasErrorBoundary";vs(!p,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!F9.has(u)&&(l[u]=n[u])}Object.assign(s,l),Object.assign(s,{...e(s),lazy:void 0})}async function g8({matches:i}){let e=i.filter(n=>n.shouldLoad);return(await Promise.all(e.map(n=>n.resolve()))).reduce((n,s,l)=>Object.assign(n,{[e[l].route.id]:s}),{})}async function y8(i,e,t,n,s,l,u,r,p,f){let m=l.map(_=>_.route.lazy?m8(_.route,p,r):void 0),v=l.map((_,b)=>{let C=m[b],E=s.some(x=>x.route.id===_.route.id);return{..._,shouldLoad:E,resolve:async x=>(x&&n.method==="GET"&&(_.route.lazy||_.route.loader)&&(E=!0),E?x8(e,n,_,C,x,f):Promise.resolve({type:"data",result:void 0}))}}),y=await i({matches:v,request:n,params:l[0].params,fetcherKey:u,context:f});try{await Promise.all(m)}catch{}return y}async function x8(i,e,t,n,s,l){let u,r,p=f=>{let m,v=new Promise((b,C)=>m=C);r=()=>m(),e.signal.addEventListener("abort",r);let y=b=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${t.route.id}]`)):f({request:e,params:t.params,context:l},...b!==void 0?[b]:[]),_=(async()=>{try{return{type:"data",result:await(s?s(C=>y(C)):y())}}catch(b){return{type:"error",result:b}}})();return Promise.race([_,v])};try{let f=t.route[i];if(n)if(f){let m,[v]=await Promise.all([p(f).catch(y=>{m=y}),n]);if(m!==void 0)throw m;u=v}else if(await n,f=t.route[i],f)u=await p(f);else if(i==="action"){let m=new URL(e.url),v=m.pathname+m.search;throw uo(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0};else if(f)u=await p(f);else{let m=new URL(e.url),v=m.pathname+m.search;throw uo(404,{pathname:v})}}catch(f){return{type:"error",result:f}}finally{r&&e.signal.removeEventListener("abort",r)}return u}async function v8(i){var n,s,l,u;let{result:e,type:t}=i;if(O3(e)){let r;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?r=null:r=await e.json():r=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Vy(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}if(t==="error"){if(NC(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status};e=new Vy(((s=e.init)==null?void 0:s.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Sm(e)?e.status:void 0}}return NC(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function b8(i,e,t,n,s){let l=i.headers.get("Location");if(Dn(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!m_.test(l)){let u=n.slice(0,n.findIndex(r=>r.route.id===t)+1);l=Yb(new URL(e.url),u,s,l),i.headers.set("Location",l)}return i}function MC(i,e,t){if(m_.test(i)){let n=i,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),l=Lo(s.pathname,t)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return i}function ch(i,e,t,n){let s=i.createURL(j3(e)).toString(),l={signal:t};if(n&&Eo(n.formMethod)){let{formMethod:u,formEncType:r}=n;l.method=u.toUpperCase(),r==="application/json"?(l.headers=new Headers({"Content-Type":r}),l.body=JSON.stringify(n.json)):r==="text/plain"?l.body=n.text:r==="application/x-www-form-urlencoded"&&n.formData?l.body=Xb(n.formData):l.body=n.formData}return new Request(s,l)}function Xb(i){let e=new URLSearchParams;for(let[t,n]of i.entries())e.append(t,typeof n=="string"?n:n.name);return e}function PC(i){let e=new FormData;for(let[t,n]of i.entries())e.append(t,n);return e}function _8(i,e,t,n=!1,s=!1){let l={},u=null,r,p=!1,f={},m=t&&Ya(t[1])?t[1].error:void 0;return i.forEach(v=>{if(!(v.route.id in e))return;let y=v.route.id,_=e[y];if(Dn(!$u(_),"Cannot handle redirect results in processLoaderData"),Ya(_)){let b=_.error;if(m!==void 0&&(b=m,m=void 0),u=u||{},s)u[y]=b;else{let C=Fu(i,y);u[C.route.id]==null&&(u[C.route.id]=b)}n||(l[y]=N3),p||(p=!0,r=Sm(_.error)?_.error.status:500),_.headers&&(f[y]=_.headers)}else l[y]=_.data,_.statusCode&&_.statusCode!==200&&!p&&(r=_.statusCode),_.headers&&(f[y]=_.headers)}),m!==void 0&&t&&(u={[t[0]]:m},l[t[0]]=void 0),{loaderData:l,errors:u,statusCode:r||200,loaderHeaders:f}}function IC(i,e,t,n,s,l){let{loaderData:u,errors:r}=_8(e,t,n);return s.forEach(p=>{let{key:f,match:m,controller:v}=p,y=l[f];if(Dn(y,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(Ya(y)){let _=Fu(i.matches,m==null?void 0:m.route.id);r&&r[_.route.id]||(r={...r,[_.route.id]:y.error}),i.fetchers.delete(f)}else if($u(y))Dn(!1,"Unhandled fetcher revalidation redirect");else{let _=vc(y.data);i.fetchers.set(f,_)}}),{loaderData:u,errors:r}}function DC(i,e,t,n){let s=Object.entries(e).filter(([,l])=>l!==N3).reduce((l,[u,r])=>(l[u]=r,l),{});for(let l of t){let u=l.route.id;if(!e.hasOwnProperty(u)&&i.hasOwnProperty(u)&&l.route.loader&&(s[u]=i[u]),n&&n.hasOwnProperty(u))break}return s}function RC(i){return i?Ya(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Fu(i,e){return(e?i.slice(0,i.findIndex(n=>n.route.id===e)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function LC(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function uo(i,{pathname:e,routeId:t,method:n,type:s,message:l}={}){let u="Unknown Server Error",r="Unknown @remix-run/router error";return i===400?(u="Bad Request",n&&e&&t?r=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(r="Unable to encode submission body")):i===403?(u="Forbidden",r=`Route "${t}" does not match URL "${e}"`):i===404?(u="Not Found",r=`No route matches URL "${e}"`):i===405&&(u="Method Not Allowed",n&&e&&t?r=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(r=`Invalid request method "${n.toUpperCase()}"`)),new Vy(i||500,u,new Error(r),!0)}function Wg(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[n,s]=e[t];if($u(s))return{key:n,result:s}}}function j3(i){let e=typeof i=="string"?Zl(i):i;return Bc({...e,hash:""})}function w8(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function C8(i){return O3(i.result)&&o8.has(i.result.status)}function Ya(i){return i.type==="error"}function $u(i){return(i&&i.type)==="redirect"}function NC(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function O3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function T8(i){return a8.has(i.toUpperCase())}function Eo(i){return r8.has(i.toUpperCase())}function g_(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function wf(i,e){let t=typeof e=="string"?Zl(e).search:e.search;if(i[i.length-1].route.index&&g_(t||""))return i[i.length-1];let n=D3(i);return n[n.length-1]}function zC(i){let{formMethod:e,formAction:t,formEncType:n,text:s,formData:l,json:u}=i;if(!(!e||!t||!n)){if(s!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:n,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:u,text:void 0}}}function _v(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function S8(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function cf(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function E8(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function vc(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function k8(i,e){try{let t=i.sessionStorage.getItem(L3);if(t){let n=JSON.parse(t);for(let[s,l]of Object.entries(n||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function A8(i,e){if(e.size>0){let t={};for(let[n,s]of e)t[n]=[...s];try{i.sessionStorage.setItem(L3,JSON.stringify(t))}catch(n){vs(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function M8(){let i,e,t=new Promise((n,s)=>{i=async l=>{n(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var vd=Fe.createContext(null);vd.displayName="DataRouter";var Em=Fe.createContext(null);Em.displayName="DataRouterState";var y_=Fe.createContext({isTransitioning:!1});y_.displayName="ViewTransition";var F3=Fe.createContext(new Map);F3.displayName="Fetchers";var P8=Fe.createContext(null);P8.displayName="Await";var jo=Fe.createContext(null);jo.displayName="Navigation";var Vx=Fe.createContext(null);Vx.displayName="Location";var Oo=Fe.createContext({outlet:null,matches:[],isDataRoute:!1});Oo.displayName="Route";var x_=Fe.createContext(null);x_.displayName="RouteError";function I8(i,{relative:e}={}){Dn(ip(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Fe.useContext(jo),{hash:s,pathname:l,search:u}=km(i,{relative:e}),r=l;return t!=="/"&&(r=l==="/"?t:rl([t,l])),n.createHref({pathname:r,search:u,hash:s})}function ip(){return Fe.useContext(Vx)!=null}function Xl(){return Dn(ip(),"useLocation() may be used only in the context of a <Router> component."),Fe.useContext(Vx).location}var B3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $3(i){Fe.useContext(jo).static||Fe.useLayoutEffect(i)}function Zc(){let{isDataRoute:i}=Fe.useContext(Oo);return i?H8():D8()}function D8(){Dn(ip(),"useNavigate() may be used only in the context of a <Router> component.");let i=Fe.useContext(vd),{basename:e,navigator:t}=Fe.useContext(jo),{matches:n}=Fe.useContext(Oo),{pathname:s}=Xl(),l=JSON.stringify($x(n)),u=Fe.useRef(!1);return $3(()=>{u.current=!0}),Fe.useCallback((p,f={})=>{if(vs(u.current,B3),!u.current)return;if(typeof p=="number"){t.go(p);return}let m=Ux(p,JSON.parse(l),s,f.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:rl([e,m.pathname])),(f.replace?t.replace:t.push)(m,f.state,f)},[e,t,l,s,i])}var R8=Fe.createContext(null);function L8(i){let e=Fe.useContext(Oo).outlet;return e&&Fe.createElement(R8.Provider,{value:i},e)}function km(i,{relative:e}={}){let{matches:t}=Fe.useContext(Oo),{pathname:n}=Xl(),s=JSON.stringify($x(t));return Fe.useMemo(()=>Ux(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function N8(i,e,t,n){Dn(ip(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Fe.useContext(jo),{matches:l}=Fe.useContext(Oo),u=l[l.length-1],r=u?u.params:{},p=u?u.pathname:"/",f=u?u.pathnameBase:"/",m=u&&u.route;{let S=m&&m.path||"";G3(p,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let v=Xl(),y;y=v;let _=y.pathname||"/",b=_;if(f!=="/"){let S=f.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let C=Tc(i,{pathname:b});return vs(m||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),vs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),B8(C&&C.map(S=>Object.assign({},S,{params:Object.assign({},r,S.params),pathname:rl([f,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:rl([f,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,t,n)}function z8(){let i=V3(),e=Sm(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=Fe.createElement(Fe.Fragment,null,Fe.createElement("p",null," Hey developer "),Fe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Fe.createElement("code",{style:l},"ErrorBoundary")," or"," ",Fe.createElement("code",{style:l},"errorElement")," prop on your route.")),Fe.createElement(Fe.Fragment,null,Fe.createElement("h2",null,"Unexpected Application Error!"),Fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?Fe.createElement("pre",{style:s},t):null,u)}var j8=Fe.createElement(z8,null),O8=class extends Fe.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Fe.createElement(Oo.Provider,{value:this.props.routeContext},Fe.createElement(x_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F8({routeContext:i,match:e,children:t}){let n=Fe.useContext(vd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Fe.createElement(Oo.Provider,{value:i},t)}function B8(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Dn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,r=-1;if(t)for(let p=0;p<s.length;p++){let f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(r=p),f.route.id){let{loaderData:m,errors:v}=t,y=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){u=!0,r>=0?s=s.slice(0,r+1):s=[s[0]];break}}}return s.reduceRight((p,f,m)=>{let v,y=!1,_=null,b=null;t&&(v=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||j8,u&&(r<0&&m===0?(G3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):r===m&&(y=!0,b=f.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,m+1)),E=()=>{let S;return v?S=_:y?S=b:f.route.Component?S=Fe.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,Fe.createElement(F8,{match:f,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?Fe.createElement(O8,{location:t.location,revalidation:t.revalidation,component:_,error:v,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}function v_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $8(i){let e=Fe.useContext(vd);return Dn(e,v_(i)),e}function U3(i){let e=Fe.useContext(Em);return Dn(e,v_(i)),e}function U8(i){let e=Fe.useContext(Oo);return Dn(e,v_(i)),e}function b_(i){let e=U8(i),t=e.matches[e.matches.length-1];return Dn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function V8(){return b_("useRouteId")}function G8(){let{matches:i,loaderData:e}=U3("useMatches");return Fe.useMemo(()=>i.map(t=>M3(t,e)),[i,e])}function V3(){var n;let i=Fe.useContext(x_),e=U3("useRouteError"),t=b_("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function H8(){let{router:i}=$8("useNavigate"),e=b_("useNavigate"),t=Fe.useRef(!1);return $3(()=>{t.current=!0}),Fe.useCallback(async(s,l={})=>{vs(t.current,B3),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...l}))},[i,e])}var jC={};function G3(i,e,t){!e&&!jC[i]&&(jC[i]=!0,vs(!1,t))}var OC={};function FC(i,e){!i&&!OC[e]&&(OC[e]=!0,console.warn(e))}function q8(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&vs(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Fe.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&vs(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Fe.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&vs(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Fe.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var W8=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function Y8({router:i,flushSync:e}){let[t,n]=Fe.useState(i.state),[s,l]=Fe.useState(),[u,r]=Fe.useState({isTransitioning:!1}),[p,f]=Fe.useState(),[m,v]=Fe.useState(),[y,_]=Fe.useState(),b=Fe.useRef(new Map),C=Fe.useCallback((A,{deletedFetchers:D,flushSync:T,viewTransitionOpts:k})=>{A.fetchers.forEach((W,Z)=>{W.data!==void 0&&b.current.set(Z,W.data)}),D.forEach(W=>b.current.delete(W)),FC(T===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(FC(k==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!N){e&&T?e(()=>n(A)):Fe.startTransition(()=>n(A));return}if(e&&T){e(()=>{m&&(p&&p.resolve(),m.skipTransition()),r({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let W=i.window.document.startViewTransition(()=>{e(()=>n(A))});W.finished.finally(()=>{e(()=>{f(void 0),v(void 0),l(void 0),r({isTransitioning:!1})})}),e(()=>v(W));return}m?(p&&p.resolve(),m.skipTransition(),_({state:A,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(A),r({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[i.window,e,m,p]);Fe.useLayoutEffect(()=>i.subscribe(C),[i,C]),Fe.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new W8)},[u]),Fe.useEffect(()=>{if(p&&s&&i.window){let A=s,D=p.promise,T=i.window.document.startViewTransition(async()=>{Fe.startTransition(()=>n(A)),await D});T.finished.finally(()=>{f(void 0),v(void 0),l(void 0),r({isTransitioning:!1})}),v(T)}},[s,p,i.window]),Fe.useEffect(()=>{p&&s&&t.location.key===s.location.key&&p.resolve()},[p,m,t.location,s]),Fe.useEffect(()=>{!u.isTransitioning&&y&&(l(y.state),r({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),_(void 0))},[u.isTransitioning,y]);let E=Fe.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:A=>i.navigate(A),push:(A,D,T)=>i.navigate(A,{state:D,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(A,D,T)=>i.navigate(A,{replace:!0,state:D,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[i]),S=i.basename||"/",x=Fe.useMemo(()=>({router:i,navigator:E,static:!1,basename:S}),[i,E,S]);return Fe.createElement(Fe.Fragment,null,Fe.createElement(vd.Provider,{value:x},Fe.createElement(Em.Provider,{value:t},Fe.createElement(F3.Provider,{value:b.current},Fe.createElement(y_.Provider,{value:u},Fe.createElement(Q8,{basename:S,location:t.location,navigationType:t.historyAction,navigator:E},Fe.createElement(Z8,{routes:i.routes,future:i.future,state:t})))))),null)}var Z8=Fe.memo(X8);function X8({routes:i,future:e,state:t}){return N8(i,void 0,t,e)}function K8({to:i,replace:e,state:t,relative:n}){Dn(ip(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=Fe.useContext(jo);vs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=Fe.useContext(Oo),{pathname:u}=Xl(),r=Zc(),p=Ux(i,$x(l),u,n==="path"),f=JSON.stringify(p);return Fe.useEffect(()=>{r(JSON.parse(f),{replace:e,state:t,relative:n})},[r,f,n,e,t]),null}function Kb(i){return L8(i.context)}function Q8({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:l=!1}){Dn(!ip(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),r=Fe.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Zl(t));let{pathname:p="/",search:f="",hash:m="",state:v=null,key:y="default"}=t,_=Fe.useMemo(()=>{let b=Lo(p,u);return b==null?null:{location:{pathname:b,search:f,hash:m,state:v,key:y},navigationType:n}},[u,p,f,m,v,y,n]);return vs(_!=null,`<Router basename="${u}"> is not able to match the URL "${p}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:Fe.createElement(jo.Provider,{value:r},Fe.createElement(Vx.Provider,{children:e,value:_}))}var vy="get",by="application/x-www-form-urlencoded";function Gx(i){return i!=null&&typeof i.tagName=="string"}function J8(i){return Gx(i)&&i.tagName.toLowerCase()==="button"}function eF(i){return Gx(i)&&i.tagName.toLowerCase()==="form"}function tF(i){return Gx(i)&&i.tagName.toLowerCase()==="input"}function iF(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function nF(i,e){return i.button===0&&(!e||e==="_self")&&!iF(i)}var Yg=null;function rF(){if(Yg===null)try{new FormData(document.createElement("form"),0),Yg=!1}catch{Yg=!0}return Yg}var sF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wv(i){return i!=null&&!sF.has(i)?(vs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${by}"`),null):i}function aF(i,e){let t,n,s,l,u;if(eF(i)){let r=i.getAttribute("action");n=r?Lo(r,e):null,t=i.getAttribute("method")||vy,s=wv(i.getAttribute("enctype"))||by,l=new FormData(i)}else if(J8(i)||tF(i)&&(i.type==="submit"||i.type==="image")){let r=i.form;if(r==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||r.getAttribute("action");if(n=p?Lo(p,e):null,t=i.getAttribute("formmethod")||r.getAttribute("method")||vy,s=wv(i.getAttribute("formenctype"))||wv(r.getAttribute("enctype"))||by,l=new FormData(r,i),!rF()){let{name:f,type:m,value:v}=i;if(m==="image"){let y=f?`${f}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else f&&l.append(f,v)}}else{if(Gx(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vy,n=null,s=by,u=i}return l&&s==="text/plain"&&(u=l,l=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:l,body:u}}function __(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function oF(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lF(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function cF(i,e,t){let n=await Promise.all(i.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await oF(l,t);return u.links?u.links():[]}return[]}));return pF(n.flat(1).filter(lF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function BC(i,e,t,n,s,l){let u=(p,f)=>t[f]?p.route.id!==t[f].route.id:!0,r=(p,f)=>{var m;return t[f].pathname!==p.pathname||((m=t[f].route.path)==null?void 0:m.endsWith("*"))&&t[f].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,f)=>u(p,f)||r(p,f)):l==="data"?e.filter((p,f)=>{var v;let m=n.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(u(p,f)||r(p,f))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function uF(i,e){return dF(i.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function dF(i){return[...new Set(i)]}function hF(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function pF(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let l=JSON.stringify(hF(s));return t.has(l)||(t.add(l),n.push({key:l,link:s})),n},[])}function fF(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function mF(){let i=Fe.useContext(vd);return __(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function gF(){let i=Fe.useContext(Em);return __(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var w_=Fe.createContext(void 0);w_.displayName="FrameworkContext";function H3(){let i=Fe.useContext(w_);return __(i,"You must render this element inside a <HydratedRouter> element"),i}function yF(i,e){let t=Fe.useContext(w_),[n,s]=Fe.useState(!1),[l,u]=Fe.useState(!1),{onFocus:r,onBlur:p,onMouseEnter:f,onMouseLeave:m,onTouchStart:v}=e,y=Fe.useRef(null);Fe.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let C=S=>{S.forEach(x=>{u(x.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[i]),Fe.useEffect(()=>{if(n){let C=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(C)}}},[n]);let _=()=>{s(!0)},b=()=>{s(!1),u(!1)};return t?i!=="intent"?[l,y,{}]:[l,y,{onFocus:uf(r,_),onBlur:uf(p,b),onMouseEnter:uf(f,_),onMouseLeave:uf(m,b),onTouchStart:uf(v,_)}]:[!1,y,{}]}function uf(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function xF({page:i,...e}){let{router:t}=mF(),n=Fe.useMemo(()=>Tc(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?Fe.createElement(bF,{page:i,matches:n,...e}):null}function vF(i){let{manifest:e,routeModules:t}=H3(),[n,s]=Fe.useState([]);return Fe.useEffect(()=>{let l=!1;return cF(i,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[i,e,t]),n}function bF({page:i,matches:e,...t}){let n=Xl(),{manifest:s,routeModules:l}=H3(),{loaderData:u,matches:r}=gF(),p=Fe.useMemo(()=>BC(i,e,r,s,n,"data"),[i,e,r,s,n]),f=Fe.useMemo(()=>BC(i,e,r,s,n,"assets"),[i,e,r,s,n]),m=Fe.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let _=new Set,b=!1;if(e.forEach(E=>{var x;let S=s.routes[E.route.id];!S||!S.hasLoader||(!p.some(A=>A.route.id===E.route.id)&&E.route.id in u&&((x=l[E.route.id])!=null&&x.shouldRevalidate)||S.hasClientLoader?b=!0:_.add(E.route.id))}),_.size===0)return[];let C=fF(i);return b&&_.size>0&&C.searchParams.set("_routes",e.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[C.pathname+C.search]},[u,n,s,p,e,i,l]),v=Fe.useMemo(()=>uF(f,s),[f,s]),y=vF(f);return Fe.createElement(Fe.Fragment,null,m.map(_=>Fe.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),v.map(_=>Fe.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),y.map(({key:_,link:b})=>Fe.createElement("link",{key:_,...b})))}function _F(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var q3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q3&&(window.__reactRouterVersion="7.1.3")}catch{}function wF(i,e){return d8({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:z9({window:e==null?void 0:e.window}),hydrationData:CF(),routes:i,mapRouteProperties:q8,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function CF(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:TF(i.errors)}),i}function TF(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")t[n]=new Vy(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let u=new l(s.message);u.stack="",t[n]=u}catch{}}if(t[n]==null){let l=new Error(s.message);l.stack="",t[n]=l}}else t[n]=s;return t}var W3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y3=Fe.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:l,replace:u,state:r,target:p,to:f,preventScrollReset:m,viewTransition:v,...y},_){let{basename:b}=Fe.useContext(jo),C=typeof f=="string"&&W3.test(f),E,S=!1;if(typeof f=="string"&&C&&(E=f,q3))try{let Z=new URL(window.location.href),K=f.startsWith("//")?new URL(Z.protocol+f):new URL(f),j=Lo(K.pathname,b);K.origin===Z.origin&&j!=null?f=j+K.search+K.hash:S=!0}catch{vs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=I8(f,{relative:s}),[A,D,T]=yF(n,y),k=kF(f,{replace:u,state:r,target:p,preventScrollReset:m,relative:s,viewTransition:v});function N(Z){e&&e(Z),Z.defaultPrevented||k(Z)}let W=Fe.createElement("a",{...y,...T,href:E||x,onClick:S||l?e:N,ref:_F(_,D),target:p,"data-discover":!C&&t==="render"?"true":void 0});return A&&!C?Fe.createElement(Fe.Fragment,null,W,Fe.createElement(xF,{page:x})):W});Y3.displayName="Link";var Z3=Fe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:l,to:u,viewTransition:r,children:p,...f},m){let v=km(u,{relative:f.relative}),y=Xl(),_=Fe.useContext(Em),{navigator:b,basename:C}=Fe.useContext(jo),E=_!=null&&DF(v)&&r===!0,S=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,x=y.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(x=x.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&C&&(A=Lo(A,C)||A);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let T=x===S||!s&&x.startsWith(S)&&x.charAt(D)==="/",k=A!=null&&(A===S||!s&&A.startsWith(S)&&A.charAt(S.length)==="/"),N={isActive:T,isPending:k,isTransitioning:E},W=T?e:void 0,Z;typeof n=="function"?Z=n(N):Z=[n,T?"active":null,k?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(N):l;return Fe.createElement(Y3,{...f,"aria-current":W,className:Z,ref:m,style:K,to:u,viewTransition:r},typeof p=="function"?p(N):p)});Z3.displayName="NavLink";var SF=Fe.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:l,method:u=vy,action:r,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:v,...y},_)=>{let b=PF(),C=IF(r,{relative:f}),E=u.toLowerCase()==="get"?"get":"post",S=typeof r=="string"&&W3.test(r),x=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,T=(D==null?void 0:D.getAttribute("formmethod"))||u;b(D||A.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:s,state:l,relative:f,preventScrollReset:m,viewTransition:v})};return Fe.createElement("form",{ref:_,method:E,action:C,onSubmit:n?p:x,...y,"data-discover":!S&&i==="render"?"true":void 0})});SF.displayName="Form";function EF(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X3(i){let e=Fe.useContext(vd);return Dn(e,EF(i)),e}function kF(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:l,viewTransition:u}={}){let r=Zc(),p=Xl(),f=km(i,{relative:l});return Fe.useCallback(m=>{if(nF(m,e)){m.preventDefault();let v=t!==void 0?t:Bc(p)===Bc(f);r(i,{replace:v,state:n,preventScrollReset:s,relative:l,viewTransition:u})}},[p,r,f,t,n,e,i,s,l,u])}var AF=0,MF=()=>`__${String(++AF)}__`;function PF(){let{router:i}=X3("useSubmit"),{basename:e}=Fe.useContext(jo),t=V8();return Fe.useCallback(async(n,s={})=>{let{action:l,method:u,encType:r,formData:p,body:f}=aF(n,e);if(s.navigate===!1){let m=s.fetcherKey||MF();await i.fetch(m,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||u,formEncType:s.encType||r,flushSync:s.flushSync})}else await i.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||u,formEncType:s.encType||r,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function IF(i,{relative:e}={}){let{basename:t}=Fe.useContext(jo),n=Fe.useContext(Oo);Dn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),l={...km(i||".",{relative:e})},u=Xl();if(i==null){l.search=u.search;let r=new URLSearchParams(l.search),p=r.getAll("index");if(p.some(m=>m==="")){r.delete("index"),p.filter(v=>v).forEach(v=>r.append("index",v));let m=r.toString();l.search=m?`?${m}`:""}}return(!i||i===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:rl([t,l.pathname])),Bc(l)}function DF(i,e={}){let t=Fe.useContext(y_);Dn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=X3("useViewTransitionState"),s=km(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Lo(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=Lo(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Uy(s.pathname,u)!=null||Uy(s.pathname,l)!=null}new TextEncoder;/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RF(i){return Fe.createElement(Y8,{flushSync:cI.flushSync,...i})}const LF=()=>{const i=V3();return console.error(i),Sm(i)?Y.jsxs("div",{id:"error-page",children:[Y.jsx("h1",{children:Oe.t("Oops!")}),Y.jsx("p",{children:Oe.t("Sorry, an unexpected error has occurred.")}),Y.jsx("p",{children:Y.jsx("i",{children:i.statusText})})]}):Y.jsxs("div",{id:"error-page",children:[Y.jsx("h1",{children:Oe.t("Oops!")}),Y.jsx("p",{children:Oe.t("Sorry, an unexpected error has occurred.")})]})},NF="Rename",zF="Delete",jF="Cancel",OF="Name",FF="Save",BF="ID",$F="Created",UF="Model",VF="Actions",GF="Search",HF="Clear",qF="Close",WF="Status",YF="Type",ZF="Pending",XF="Running",KF="Success",QF="Failed",JF="Evaluate",eB="Overview",tB="Compare",iB="Predict",nB="Jobs",rB="Settings",sB="Code",aB="Aggregate",oB="Range",lB="Add",cB="Required",uB="Remove",dB="Connected",hB="Configure",pB="Sharing",fB="Edit",mB="URL",gB="Authorities",yB="Period",xB="Evaluations",vB={Rename:NF,Delete:zF,"Delete evaluation":"Delete evaluation","Are you sure you want to delete this evaluation? This action cannot be undone.":"Are you sure you want to delete this evaluation? This action cannot be undone.",Cancel:jF,"Name is required":"Name is required","Rename evaluation":"Rename evaluation",Name:OF,Save:FF,ID:BF,Created:$F,Model:UF,Actions:VF,"New evaluation":"New evaluation","Sort by {{column}}":"Sort by {{column}}","No evaluations available":"No evaluations available",Search:GF,"No models found":"No models found",Clear:HF,"{{count}} evaluations selected":"{{count}} evaluation selected","{{count}} evaluations selected_plural":"{{count}} evaluations selected","Evaluations deleted":"Evaluations deleted","Failed to delete evaluations":"Failed to delete evaluations","Evaluation deleted":"Evaluation deleted","Failed to delete evaluation":"Failed to delete evaluation","Error renaming evaluation":"Error renaming evaluation","Could not connect to CHAP":"Could not connect to CHAP","The app is not able to connect to the CHAP server.":"The app is not able to connect to the CHAP server.","Please check your route configuration and make sure the CHAP server is running.":"Please check your route configuration and make sure the CHAP server is running.","Learn more about Modeling and CHAP":"Learn more about Modeling and CHAP","Configure settings":"Configure settings","Oops!":"Oops!","Sorry, an unexpected error has occurred.":"Sorry, an unexpected error has occurred.","Delete job":"Delete job","Are you sure you want to delete this job? This action cannot be undone.":"Are you sure you want to delete this job? This action cannot be undone.","Failed to copy job ID":"Failed to copy job ID","Go to result":"Go to result","View Logs":"View Logs","Copy Job ID":"Copy Job ID","Job Logs":"Job Logs","An error occurred while loading the logs.":"An error occurred while loading the logs.","No logs reported for this job":"No logs reported for this job",Close:qF,"Job deleted":"Job deleted","Failed to delete job":"Failed to delete job",Status:WF,Type:YF,"Start Time":"Start Time","End Time":"End Time","No jobs available":"No jobs available",Pending:ZF,Running:XF,Success:KF,Failed:QF,"Create evaluation":"Create evaluation","Evaluation with data":"Evaluation with data","Make prediction":"Make prediction","Create dataset":"Create dataset","Create evaluation with data":"Create evaluation with data","Get started with the Modeling app":"Get started with the Modeling app","To get started, create a route that points to a running CHAP server.":"To get started, create a route that points to a running CHAP server.","Route and servers are configured on the settings page.":"Route and servers are configured on the settings page.",Evaluate:JF,Overview:eB,Compare:tB,"Evaluations (WIP)":"Evaluations (WIP)",Predict:iB,Jobs:nB,Settings:rB,"Add required Data Elements":"Add required Data Elements","This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ":"This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ","-app and create the Data Elements listed below.":"-app and create the Data Elements listed below.","NB! Make sure the CODE property for each data element is exactly the same as below.":"NB! Make sure the CODE property for each data element is exactly the same as below.","Properties in the new Data Element form not specified in the tables below should have the default value.":"Properties in the new Data Element form not specified in the tables below should have the default value.","Short name":"Short name",Code:sB,"Domain type":"Domain type",Aggregate:aB,"Aggregation levels":"Aggregation levels","Assign all org unit levels":"Assign all org unit levels","Prediction for {{predictionTargetName}} for {{orgUnitName}}":"Prediction for {{predictionTargetName}} for {{orgUnitName}}","Quantile median":"Quantile median",Range:oB,"Quantile low":"Quantile low","Select data element for low quantile":"Select data element for low quantile","Select data element for median quantile":"Select data element for median quantile","Select data element for high quantile":"Select data element for high quantile","Import prediction":"Import prediction","Prediction has been imported.":"Prediction has been imported.","CHAP Core results":"CHAP Core results","Select data element":"Select data element","It seems like you missing Data Elements for CHAP prediction.":"It seems like you missing Data Elements for CHAP prediction.","Add data elements":"Add data elements","Job is still running. Please wait until it is finished before doing any actions.":"Job is still running. Please wait until it is finished before doing any actions.","No model templates found.":"No model templates found.","Model Templates":"Model Templates","Base models that can be configured with covariates and parameters to create configured models.":"Base models that can be configured with covariates and parameters to create configured models.","Template is required":"Template is required","Covariate name is required":"Covariate name is required","Covariate name cannot contain spaces":"Covariate name cannot contain spaces","Covariate already exists":"Covariate already exists","Configure Model":"Configure Model","Model Template":"Model Template","Select a model template":"Select a model template","Configured Model Name":"Configured Model Name",'Enter something to identify your model, e.g. "Debug" or "Malaria"':'Enter something to identify your model, e.g. "Debug" or "Malaria"',"Your model will be saved as {{modelName}} [{{configuredModelName}}]":"Your model will be saved as {{modelName}} [{{configuredModelName}}]","Additional Covariates":"Additional Covariates","Enter covariate name":"Enter covariate name",Add:lB,Required:cB,Remove:uB,"Please check covariates":"Please check covariates","Enter item":"Enter item","Leave empty for null":"Leave empty for null","Model Parameters":"Model Parameters","Model configured":"Model configured","Failed to configure model":"Failed to configure model","Prediction for Northern Province":"Prediction for Northern Province","Organisation unit level":"Organisation unit level","Organisation unit level to import data to":"Organisation unit level to import data to","Organisation units":"Organisation units","CHAP settings":"CHAP settings","An error occurred while connecting to the CHAP server.":"An error occurred while connecting to the CHAP server.","Are you sure you have configured your route correctly? See the console for more details.":"Are you sure you have configured your route correctly? See the console for more details.","Server information":"Server information","CHAP Version":"CHAP Version","Python Version":"Python Version","Operating System":"Operating System",Connected:dB,"Your server might not be secure":"Your server might not be secure","CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.":"CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.","Your server is not secure":"Your server is not secure","Model settings":"Model settings","An error occurred while loading models.":"An error occurred while loading models.","Please try to reload the page. If the problem persists, contact your system administrator.":"Please try to reload the page. If the problem persists, contact your system administrator.","Configured models":"Configured models",Configure:hB,"Models configured":"Models configured","No route found.":"No route found.","Add route":"Add route","Delete route":"Delete route","Are you sure you want to delete this route?":"Are you sure you want to delete this route?","Edit route":"Edit route","Public access":"Public access",'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".':'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".',Sharing:pB,Edit:fB,"Invalid URL format":"Invalid URL format","URL is required":"URL is required","URL must end with a double wildcard (/**)":"URL must end with a double wildcard (/**)","CHAP Core URL":"CHAP Core URL","Route settings":"Route settings","There was an error loading the route settings. Please try to reload the page.":"There was an error loading the route settings. Please try to reload the page.","If the problem persists, please contact your system administrator.":"If the problem persists, please contact your system administrator.","You do not have permission to add or modify routes.":"You do not have permission to add or modify routes.","If you think this is an error, please contact your system administrator.":"If you think this is an error, please contact your system administrator.","Route configuration":"Route configuration",URL:mB,Authorities:gB,"Error deleting route":"Error deleting route","Route deleted successfully":"Route deleted successfully","Error saving route":"Error saving route","Route saved successfully":"Route saved successfully",Period:yB,"Start month":"Start month","End month":"End month","Error loading evaluations":"Error loading evaluations","An unknown error occurred":"An unknown error occurred",Evaluations:xB,"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.":"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.","Error loading jobs":"Error loading jobs","Active jobs":"Active jobs","View and manage currently running jobs and their status.":"View and manage currently running jobs and their status."},bB="default";Oe.addResources("en",bB,vB);const K3="1400px",_B={maxWidth:K3,marginLeft:"auto",marginRight:"auto",padding:"20px 16px",width:"100%"},$C=({children:i,maxWidth:e})=>{const t=G8().some(n=>{var s;return!!((s=n.handle)!=null&&s.fullWidth)});return Y.jsx("div",{style:{..._B,maxWidth:t?"none":e||K3,width:"100%"},children:i})},wB="_drawerWrapper_1jnc9_1",CB={drawerWrapper:wB};function Qb(){return Qb=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Qb.apply(this,arguments)}var TB=function(e,t){var n={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return n[e]},C_=function(e){var t=e.open,n=e.onClose,s=n===void 0?function(){}:n,l=e.children,u=e.style,r=e.enableOverlay,p=r===void 0?!0:r,f=e.overlayColor,m=f===void 0?"#000":f,v=e.overlayOpacity,y=v===void 0?.4:v,_=e.zIndex,b=_===void 0?100:_,C=e.duration,E=C===void 0?500:C,S=e.direction,x=e.size,A=x===void 0?250:x,D=e.className,T=e.customIdSuffix,k=e.lockBackgroundScroll,N=k===void 0?!1:k,W=e.overlayClassName,Z=W===void 0?"":W,K=Fe.useRef(null);Fe.useEffect(function(){var L=function(){K.current=window.document.querySelector("body"),K.current&&N&&(K.current.style.overflow=t?"hidden":"")};L()},[t]);var j=Fe.useMemo(function(){return T||(Math.random()+1).toString(36).substring(7)},[T]),V={backgroundColor:m.toString(),opacity:y,zIndex:b},$=Qb({zIndex:b+1,transitionDuration:E+"ms"},TB(S,A),u);return pe.createElement("div",{id:"EZDrawer"+j,className:"EZDrawer"},pe.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+j,className:"EZDrawer__checkbox",onChange:s,checked:t}),pe.createElement("nav",{role:"navigation",id:"EZDrawer__container"+j,style:$,className:"EZDrawer__container "+D},l),p&&pe.createElement("label",{htmlFor:"EZDrawer__checkbox"+j,id:"EZDrawer__overlay"+j,className:"EZDrawer__overlay "+Z,style:V}))};const SB="_formWrapper_6d4wk_1",EB={formWrapper:SB},kB=({value:i,onChange:e})=>Y.jsx("div",{children:Y.jsxs(gs,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[Y.jsx(Ca,{value:"week",label:"Weekly"}),Y.jsx(Ca,{value:"month",label:"Monthly"})]})}),AB="_datePicker_1yiz7_1",MB="_label_1yiz7_5",PB="_content_1yiz7_14",IB="_box_1yiz7_18",DB="_inputDiv_1yiz7_23",RB="_input_1yiz7_23",uh={datePicker:AB,label:MB,content:PB,box:IB,inputDiv:DB,input:RB},UC=({label:i,name:e,onChange:t,periodeType:n})=>{const s=Fe.useRef(null);return Y.jsxs("div",{className:uh.datePicker,style:{opacity:n===""?.6:1},children:[Y.jsx("label",{className:uh.label,children:i}),Y.jsx("div",{className:uh.content,children:Y.jsx("div",{className:uh.box,children:Y.jsx("div",{className:uh.inputDiv,children:Y.jsx("input",{disabled:n==="",className:uh.input,ref:s,type:n,name:e,onChange:l=>t(l.target.value)})})})})]})},LB="_timePeriodeSelector_fpkps_1",NB="_timePeriodeSelectorInputFields_fpkps_7",zB="_timePeriodeSelectorInputFieldsChild_fpkps_13",Zg={timePeriodeSelector:LB,timePeriodeSelectorInputFields:NB,timePeriodeSelectorInputFieldsChild:zB},jB=(i,e,t)=>t==="week"?OB(i,e):t==="month"?$B(i,e):[],OB=(i,e)=>{const[t,n]=i.split("-W").map(Number),[s,l]=e.split("-W").map(Number);if(s-t>100)return[];const u=[];for(let r=t;r<=s;r++){const p=BB(r),f=r===t?n:1,m=r===s?l:p;for(let v=f;v<=m;v++){const y=`${r}W${String(v).padStart(2,"0")}`;u.push({endDate:void 0,startDate:void 0,id:y})}}return u},FB=i=>{i=new Date(+i),i.setHours(0,0,0,0),i.setDate(i.getDate()+4-(i.getDay()||7));const e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+1)/7);return[i.getFullYear(),t]},BB=i=>{const e=new Date(i,11,31),t=FB(e)[1];return t==1?52:t},$B=(i,e)=>{const[t,n]=i.split("-").map(Number),[s,l]=e.split("-").map(Number);if(s-t>100)return[];const u=[];let r=t,p=n;for(;r<s||r===s&&p<=l;){const f=String(p).padStart(2,"0");u.push({id:`${r}${f}`,endDate:void 0,startDate:void 0}),p++,p>12&&(p=1,r++)}return u},Q3=({setTimePeriods:i})=>{const[e,t]=Fe.useState(""),[n,s]=Fe.useState(""),[l,u]=Fe.useState(""),r=p=>{s(""),u(""),t(p)};return Fe.useEffect(()=>{i(jB(n,l,e))},[n,l]),Y.jsxs("div",{children:[Y.jsx("h3",{children:"Period"}),Y.jsxs("div",{className:Zg.timePeriodeSelector,children:[Y.jsx(kB,{value:e,onChange:r}),Y.jsxs("div",{className:Zg.timePeriodeSelectorInputFields,children:[Y.jsx("div",{className:Zg.timePeriodeSelectorInputFieldsChild,children:Y.jsx(UC,{periodeType:e,label:"Dateset start:",name:"",onChange:s})}),Y.jsx("div",{className:Zg.timePeriodeSelectorInputFieldsChild,children:Y.jsx(UC,{periodeType:e,label:"Dateset end:",name:"",onChange:u})})]})]})]})},UB="_error_1rljs_1",VB={error:UB},GB={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},HB=()=>{var n;const{loading:i,error:e,data:t}=ja(GB);return{roots:(n=t==null?void 0:t.roots)==null?void 0:n.organisationUnits,error:e,loading:i}},qB=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:n}=HB();return Fe.useEffect(()=>{if(t&&!i){const[s]=t;e({...s,selected:[s.path]})}},[t]),t?Y.jsxs("div",{children:[Y.jsx("h3",{children:Oe.t("Organisation units")}),Y.jsx(QE,{roots:t.map(s=>s.id),selected:i==null?void 0:i.map(s=>s.path),onChange:e,initiallyExpanded:t.map(s=>s.path)})]}):n?Y.jsx("div",{children:n.message}):null},WB={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},YB=()=>{var n;const{loading:i,error:e,data:t}=ja(WB);return{levels:(n=t==null?void 0:t.levels)==null?void 0:n.organisationUnitLevels,error:e,loading:i}},ZB="_selectField_2clxr_1",XB={selectField:ZB},KB=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:n,error:s}=YB(),l=u=>{const r={id:u.selected,level:t.find(p=>p.id===u.selected).level};e(r)};return Fe.useEffect(()=>{var u;(t==null?void 0:t.length)>2&&!i&&e({id:(u=t[1])==null?void 0:u.id,level:t[1].level})},[t,i,e]),t?Y.jsx("div",{className:XB.selectField,children:Y.jsx(gs,{label:Oe.t("Organisation unit level"),helpText:Oe.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:n,error:!!s,onChange:l,children:t.map(u=>Y.jsx(Ca,{value:u.id,label:u.name},u.id))})}):null},J3=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:n})=>{const s=u=>{u.checked?i([...e,u]):i(e.filter(r=>r.path!==u.path))};function l(){if(e.length===0)return!0;const u=e[0].path.split("/").length;return e.every(r=>r.path.split("/").length===u)}return Y.jsxs(Y.Fragment,{children:[Y.jsx(qB,{selectedOrgUnits:e,onChange:u=>{s(u)}}),!l()&&Y.jsx("p",{className:VB.error,children:"Only select organization units that are one the same level."}),Y.jsx(KB,{orgUnitLevels:t,onChange:n})]})},QB=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),JB=(i,e,t)=>{var r,p,f;const n=i.map(m=>m.dataSource);if(n.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:s,error:l,data:u}=ja(QB({dataElements:n,periodes:e,orgUnit:t}));return!s&&u&&!l?{data:(r=u==null?void 0:u.request)==null?void 0:r.rows,metaData:(f=(p=u==null?void 0:u.request)==null?void 0:p.metaData)==null?void 0:f.items,error:l,loading:s}:{data:u,metaData:{},error:l,loading:s}},e7={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},t7=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:n,properties:s})=>({type:e,id:t,properties:s,geometry:n})),...i}),i7=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(n=>n.id===t.id||t.properties.parentGraph.includes(n.id)))}),n7=(i,e)=>{const{data:t,loading:n,error:s}=ja(e7,{variables:{level:i}});return{data:t&&i7(t7(t),e),error:s,loading:n}},r7="_text_b9rbg_1",s7={text:r7},a7=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:n,setAnalyticsMetaData:s,setStartDownload:l,orgUnitLevel:u,selectedOrgUnits:r,analyticsDataLayers:p,setErrorMessages:f})=>{if(u==null)return Y.jsx(Y.Fragment,{});const m="LEVEL-"+u.id+";"+r.map(T=>T.id).join(";"),v=T=>T.map(k=>k.id),{data:y,error:_,loading:b,metaData:C}=JB(p,v(i),m),{data:E,error:S,loading:x}=n7(u.level,r),A=T=>T.map(k=>({featureName:p.filter(N=>N.dataSource===k)[0].feature,dataItemId:k})),D=T=>{const k=[...new Set(T.map(W=>W[0]))],N=A(k);return n(N),T.map(W=>({featureName:N.filter(Z=>Z.dataItemId===W[0])[0].featureName,orgUnit:W[1],period:W[2],value:parseFloat(W[3])}))};return Fe.useEffect(()=>{if(!(b||x)&&(y&&E&&(f([]),e(E),t(D(y)),s(C)),_||S)){const T=[];_&&T.push({description:JSON.stringify(_),title:"Analytics request failed"}),S&&T.push({description:JSON.stringify(S),title:"OrgUnits request failed"}),f(T),l(k=>({...k,startDownload:!1}))}},[b,x]),Y.jsx("p",{className:s7.text,children:"Downloading data.."})};var ek={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:Xa,function(e){var t={};function n(s,l,u,r){!s.hasOwnProperty(l)&&(s[l]=r.apply(null,u),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}return n(t,"Core/Globals.js",[],function(){var s,l;return(l=s||(s={})).SVG_NS="http://www.w3.org/2000/svg",l.product="Highcharts",l.version="11.4.8",l.win=e!==void 0?e:{},l.doc=l.win.document,l.svg=l.doc&&l.doc.createElementNS&&!!l.doc.createElementNS(l.SVG_NS,"svg").createSVGRect,l.userAgent=l.win.navigator&&l.win.navigator.userAgent||"",l.isChrome=l.win.chrome,l.isFirefox=l.userAgent.indexOf("Firefox")!==-1,l.isMS=/(edge|msie|trident)/i.test(l.userAgent)&&!l.win.opera,l.isSafari=!l.isChrome&&l.userAgent.indexOf("Safari")!==-1,l.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(l.userAgent),l.isWebKit=l.userAgent.indexOf("AppleWebKit")!==-1,l.deg2rad=2*Math.PI/360,l.hasBidiBug=l.isFirefox&&4>parseInt(l.userAgent.split("Firefox/")[1],10),l.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],l.noop=function(){},l.supportsPassiveEvents=function(){let u=!1;if(!l.isMS){let r=Object.defineProperty({},"passive",{get:function(){u=!0}});l.win.addEventListener&&l.win.removeEventListener&&(l.win.addEventListener("testPassive",l.noop,r),l.win.removeEventListener("testPassive",l.noop,r))}return u}(),l.charts=[],l.composed=[],l.dateFormats={},l.seriesTypes={},l.symbolSizes={},l.chartCount=0,s}),n(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(s){let l,{charts:u,doc:r,win:p}=s;function f(L,R,G,U){let B=R?"Highcharts error":"Highcharts warning";L===32&&(L=`${B}: Deprecated member`);let H=E(L),q=H?`${B} #${L}: www.highcharts.com/errors/${L}/`:L.toString();if(U!==void 0){let ae="";H&&(q+="?"),K(U,function(fe,re){ae+=`
 - ${re}: ${fe}`,H&&(q+=encodeURI(re)+"="+encodeURI(fe))}),q+=ae}V(s,"displayError",{chart:G,code:L,message:q,params:U},function(){if(R)throw Error(q);p.console&&f.messages.indexOf(q)===-1&&console.warn(q)}),f.messages.push(q)}function m(L,R){return parseInt(L,R||10)}function v(L){return typeof L=="string"}function y(L){let R=Object.prototype.toString.call(L);return R==="[object Array]"||R==="[object Array Iterator]"}function _(L,R){return!!L&&typeof L=="object"&&(!R||!y(L))}function b(L){return _(L)&&typeof L.nodeType=="number"}function C(L){let R=L&&L.constructor;return!!(_(L,!0)&&!b(L)&&R&&R.name&&R.name!=="Object")}function E(L){return typeof L=="number"&&!isNaN(L)&&L<1/0&&L>-1/0}function S(L){return L!=null}function x(L,R,G){let U,B=v(R)&&!S(G),H=(q,ae)=>{S(q)?L.setAttribute(ae,q):B?(U=L.getAttribute(ae))||ae!=="class"||(U=L.getAttribute(ae+"Name")):L.removeAttribute(ae)};return v(R)?H(G,R):K(R,H),U}function A(L){return y(L)?L:[L]}function D(L,R){let G;for(G in L||(L={}),R)L[G]=R[G];return L}function T(){let L=arguments,R=L.length;for(let G=0;G<R;G++){let U=L[G];if(U!=null)return U}}function k(L,R){D(L.style,R)}function N(L){return Math.pow(10,Math.floor(Math.log(L)/Math.LN10))}function W(L,R){return L>1e14?L:parseFloat(L.toPrecision(R||14))}f.messages=[],Math.easeInOutSine=function(L){return-.5*(Math.cos(Math.PI*L)-1)};let Z=Array.prototype.find?function(L,R){return L.find(R)}:function(L,R){let G,U=L.length;for(G=0;G<U;G++)if(R(L[G],G))return L[G]};function K(L,R,G){for(let U in L)Object.hasOwnProperty.call(L,U)&&R.call(G||L[U],L[U],U,L)}function j(L,R,G){function U(q,ae){let fe=L.removeEventListener;fe&&fe.call(L,q,ae,!1)}function B(q){let ae,fe;L.nodeName&&(R?(ae={})[R]=!0:ae=q,K(ae,function(re,ce){if(q[ce])for(fe=q[ce].length;fe--;)U(ce,q[ce][fe].fn)}))}let H=typeof L=="function"&&L.prototype||L;if(Object.hasOwnProperty.call(H,"hcEvents")){let q=H.hcEvents;if(R){let ae=q[R]||[];G?(q[R]=ae.filter(function(fe){return G!==fe.fn}),U(R,G)):(B(q),q[R]=[])}else B(q),delete H.hcEvents}}function V(L,R,G,U){if(G=G||{},r.createEvent&&(L.dispatchEvent||L.fireEvent&&L!==s)){let B=r.createEvent("Events");B.initEvent(R,!0,!0),G=D(B,G),L.dispatchEvent?L.dispatchEvent(G):L.fireEvent(R,G)}else if(L.hcEvents){G.target||D(G,{preventDefault:function(){G.defaultPrevented=!0},target:L,type:R});let B=[],H=L,q=!1;for(;H.hcEvents;)Object.hasOwnProperty.call(H,"hcEvents")&&H.hcEvents[R]&&(B.length&&(q=!0),B.unshift.apply(B,H.hcEvents[R])),H=Object.getPrototypeOf(H);q&&B.sort((ae,fe)=>ae.order-fe.order),B.forEach(ae=>{ae.fn.call(L,G)===!1&&G.preventDefault()})}U&&!G.defaultPrevented&&U.call(L,G)}K({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(L,R){s[R]=function(G){return f(32,!1,void 0,{[`Highcharts.${R}`]:`use Array.${L}`}),Array.prototype[L].apply(G,[].slice.call(arguments,1))}});let $=function(){let L=Math.random().toString(36).substring(2,9)+"-",R=0;return function(){return"highcharts-"+(l?"":L)+R++}}();return p.jQuery&&(p.jQuery.fn.highcharts=function(){let L=[].slice.call(arguments);if(this[0])return L[0]?(new s[v(L[0])?L.shift():"Chart"](this[0],L[0],L[1]),this):u[x(this[0],"data-highcharts-chart")]}),{addEvent:function(L,R,G,U={}){let B=typeof L=="function"&&L.prototype||L;Object.hasOwnProperty.call(B,"hcEvents")||(B.hcEvents={});let H=B.hcEvents;s.Point&&L instanceof s.Point&&L.series&&L.series.chart&&(L.series.chart.runTrackerClick=!0);let q=L.addEventListener;q&&q.call(L,R,G,!!s.supportsPassiveEvents&&{passive:U.passive===void 0?R.indexOf("touch")!==-1:U.passive,capture:!1}),H[R]||(H[R]=[]);let ae={fn:G,order:typeof U.order=="number"?U.order:1/0};return H[R].push(ae),H[R].sort((fe,re)=>fe.order-re.order),function(){j(L,R,G)}},arrayMax:function(L){let R=L.length,G=L[0];for(;R--;)L[R]>G&&(G=L[R]);return G},arrayMin:function(L){let R=L.length,G=L[0];for(;R--;)L[R]<G&&(G=L[R]);return G},attr:x,clamp:function(L,R,G){return L>R?L<G?L:G:R},clearTimeout:function(L){S(L)&&clearTimeout(L)},correctFloat:W,createElement:function(L,R,G,U,B){let H=r.createElement(L);return R&&D(H,R),B&&k(H,{padding:"0",border:"none",margin:"0"}),G&&k(H,G),U&&U.appendChild(H),H},crisp:(L,R=0,G)=>{let U=R%2/2,B=G?-1:1;return(Math.round(L*B-U)+U)*B},css:k,defined:S,destroyObjectProperties:function(L,R,G){K(L,function(U,B){U!==R&&(U!=null&&U.destroy)&&U.destroy(),(U!=null&&U.destroy||!G)&&delete L[B]})},diffObjects:function(L,R,G,U){let B={};return function H(q,ae,fe,re){let ce=G?ae:q;K(q,function(ke,ve){if(!re&&U&&U.indexOf(ve)>-1&&ae[ve]){ke=A(ke),fe[ve]=[];for(let Ee=0;Ee<Math.max(ke.length,ae[ve].length);Ee++)ae[ve][Ee]&&(ke[Ee]===void 0?fe[ve][Ee]=ae[ve][Ee]:(fe[ve][Ee]={},H(ke[Ee],ae[ve][Ee],fe[ve][Ee],re+1)))}else _(ke,!0)&&!ke.nodeType?(fe[ve]=y(ke)?[]:{},H(ke,ae[ve]||{},fe[ve],re+1),Object.keys(fe[ve]).length!==0||ve==="colorAxis"&&re===0||delete fe[ve]):(q[ve]!==ae[ve]||ve in q&&!(ve in ae))&&ve!=="__proto__"&&ve!=="constructor"&&(fe[ve]=ce[ve])})}(L,R,B,0),B},discardElement:function(L){L&&L.parentElement&&L.parentElement.removeChild(L)},erase:function(L,R){let G=L.length;for(;G--;)if(L[G]===R){L.splice(G,1);break}},error:f,extend:D,extendClass:function(L,R){let G=function(){};return G.prototype=new L,D(G.prototype,R),G},find:Z,fireEvent:V,getClosestDistance:function(L,R){let G,U,B,H=!R;return L.forEach(q=>{if(q.length>1)for(B=q.length-1;B>0;B--)(U=q[B]-q[B-1])<0&&!H?(R==null||R(),R=void 0):U&&(G===void 0||U<G)&&(G=U)}),G},getMagnitude:N,getNestedProperty:function(L,R){let G=L.split(".");for(;G.length&&S(R);){let U=G.shift();if(U===void 0||U==="__proto__")return;if(U==="this"){let H;return _(R)&&(H=R["@this"]),H??R}let B=R[U];if(!S(B)||typeof B=="function"||typeof B.nodeType=="number"||B===p)return;R=B}return R},getStyle:function L(R,G,U){let B;if(G==="width"){let q=Math.min(R.offsetWidth,R.scrollWidth),ae=R.getBoundingClientRect&&R.getBoundingClientRect().width;return ae<q&&ae>=q-1&&(q=Math.floor(ae)),Math.max(0,q-(L(R,"padding-left",!0)||0)-(L(R,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(R.offsetHeight,R.scrollHeight)-(L(R,"padding-top",!0)||0)-(L(R,"padding-bottom",!0)||0));let H=p.getComputedStyle(R,void 0);return H&&(B=H.getPropertyValue(G),T(U,G!=="opacity")&&(B=m(B))),B},inArray:function(L,R,G){return f(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),R.indexOf(L,G)},insertItem:function(L,R){let G,U=L.options.index,B=R.length;for(G=L.options.isInternal?B:0;G<B+1;G++)if(!R[G]||E(U)&&U<T(R[G].options.index,R[G]._i)||R[G].options.isInternal){R.splice(G,0,L);break}return G},isArray:y,isClass:C,isDOMElement:b,isFunction:function(L){return typeof L=="function"},isNumber:E,isObject:_,isString:v,keys:function(L){return f(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(L)},merge:function(){let L,R=arguments,G={},U=function(H,q){return typeof H!="object"&&(H={}),K(q,function(ae,fe){fe!=="__proto__"&&fe!=="constructor"&&(!_(ae,!0)||C(ae)||b(ae)?H[fe]=q[fe]:H[fe]=U(H[fe]||{},ae))}),H};R[0]===!0&&(G=R[1],R=Array.prototype.slice.call(R,2));let B=R.length;for(L=0;L<B;L++)G=U(G,R[L]);return G},normalizeTickInterval:function(L,R,G,U,B){let H,q=L;G=T(G,N(L));let ae=L/G;for(!R&&(R=B?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],U===!1&&(G===1?R=R.filter(function(fe){return fe%1==0}):G<=.1&&(R=[1/G]))),H=0;H<R.length&&(q=R[H],(!B||!(q*G>=L))&&(B||!(ae<=(R[H]+(R[H+1]||R[H]))/2)));H++);return W(q*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:K,offset:function(L){let R=r.documentElement,G=L.parentElement||L.parentNode?L.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(p.pageYOffset||R.scrollTop)-(R.clientTop||0),left:G.left+(p.pageXOffset||R.scrollLeft)-(R.clientLeft||0),width:G.width,height:G.height}},pad:function(L,R,G){return Array((R||2)+1-String(L).replace("-","").length).join(G||"0")+L},pick:T,pInt:m,pushUnique:function(L,R){return 0>L.indexOf(R)&&!!L.push(R)},relativeLength:function(L,R,G){return/%$/.test(L)?R*parseFloat(L)/100+(G||0):parseFloat(L)},removeEvent:j,replaceNested:function(L,...R){let G,U;do for(U of(G=L,R))L=L.replace(U[0],U[1]);while(L!==G);return L},splat:A,stableSort:function(L,R){let G,U,B=L.length;for(U=0;U<B;U++)L[U].safeI=U;for(L.sort(function(H,q){return(G=R(H,q))===0?H.safeI-q.safeI:G}),U=0;U<B;U++)delete L[U].safeI},syncTimeout:function(L,R,G){return R>0?setTimeout(L,R,G):(L.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:$,useSerialIds:function(L){return l=T(L,l)},wrap:function(L,R,G){let U=L[R];L[R]=function(){let B=arguments,H=this;return G.apply(this,[function(){return U.apply(H,arguments.length?arguments:B)}].concat([].slice.call(arguments)))}}}}),n(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),n(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),n(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{defined:r,error:p,extend:f,isNumber:m,isObject:v,merge:y,objectEach:_,pad:b,pick:C,splat:E,timeUnits:S}=l,x=s.isSafari&&u.Intl&&u.Intl.DateTimeFormat.prototype.formatRange,A=s.isSafari&&u.Intl&&!u.Intl.DateTimeFormat.prototype.formatRange;class D{constructor(k){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=u.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(k)}get(k,N){if(this.variableTimezone||this.timezoneOffset){let W=N.getTime(),Z=W-this.getTimezoneOffset(N);N.setTime(Z);let K=N["getUTC"+k]();return N.setTime(W),K}return this.useUTC?N["getUTC"+k]():N["get"+k]()}set(k,N,W){if(this.variableTimezone||this.timezoneOffset){if(k==="Milliseconds"||k==="Seconds"||k==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+k](W);let Z=this.getTimezoneOffset(N),K=N.getTime()-Z;N.setTime(K),N["setUTC"+k](W);let j=this.getTimezoneOffset(N);return K=N.getTime()+j,N.setTime(K)}return this.useUTC||x&&k==="FullYear"?N["setUTC"+k](W):N["set"+k](W)}update(k={}){let N=C(k.useUTC,!0);this.options=k=y(!0,this.options,k),this.Date=k.Date||u.Date||Date,this.useUTC=N,this.timezoneOffset=N&&k.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(k.getTimezoneOffset||k.timezone)}makeTime(k,N,W,Z,K,j){let V,$,L;return this.useUTC?(V=this.Date.UTC.apply(0,arguments),$=this.getTimezoneOffset(V),V+=$,$!==(L=this.getTimezoneOffset(V))?V+=L-$:$-36e5!==this.getTimezoneOffset(V-36e5)||A||(V-=36e5)):V=new this.Date(k,N,C(W,1),C(Z,0),C(K,0),C(j,0)).getTime(),V}timezoneOffsetFunction(){let k=this,N=this.options,W=N.getTimezoneOffset;return this.useUTC?N.timezone?Z=>{try{let K=`shortOffset,${N.timezone||""}`,[j,V,$,L,R=0]=(D.formatCache[K]=D.formatCache[K]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Z).split(/(GMT|:)/).map(Number),G=-(36e5*($+R/60));if(m(G))return G}catch{p(34)}return 0}:this.useUTC&&W?Z=>6e4*W(Z.valueOf()):()=>6e4*(k.timezoneOffset||0):Z=>6e4*new Date(Z.toString()).getTimezoneOffset()}dateFormat(k,N,W){if(!r(N)||isNaN(N))return s.defaultOptions.lang&&s.defaultOptions.lang.invalidDate||"";k=C(k,"%Y-%m-%d %H:%M:%S");let Z=this,K=new this.Date(N),j=this.get("Hours",K),V=this.get("Day",K),$=this.get("Date",K),L=this.get("Month",K),R=this.get("FullYear",K),G=s.defaultOptions.lang,U=G&&G.weekdays,B=G&&G.shortWeekdays;return _(f({a:B?B[V]:U[V].substr(0,3),A:U[V],d:b($),e:b($,2," "),w:V,b:G.shortMonths[L],B:G.months[L],m:b(L+1),o:L+1,y:R.toString().substr(2,2),Y:R,H:b(j),k:j,I:b(j%12||12),l:j%12||12,M:b(this.get("Minutes",K)),p:j<12?"AM":"PM",P:j<12?"am":"pm",S:b(this.get("Seconds",K)),L:b(Math.floor(N%1e3),3)},s.dateFormats),function(H,q){for(;k.indexOf("%"+q)!==-1;)k=k.replace("%"+q,typeof H=="function"?H.call(Z,N):H)}),W?k.substr(0,1).toUpperCase()+k.substr(1):k}resolveDTLFormat(k){return v(k,!0)?k:{main:(k=E(k))[0],from:k[1],to:k[2]}}getTimeTicks(k,N,W,Z){let K,j,V,$,L=this,R=L.Date,G=[],U={},B=new R(N),H=k.unitRange,q=k.count||1;if(Z=C(Z,1),r(N)){L.set("Milliseconds",B,H>=S.second?0:q*Math.floor(L.get("Milliseconds",B)/q)),H>=S.second&&L.set("Seconds",B,H>=S.minute?0:q*Math.floor(L.get("Seconds",B)/q)),H>=S.minute&&L.set("Minutes",B,H>=S.hour?0:q*Math.floor(L.get("Minutes",B)/q)),H>=S.hour&&L.set("Hours",B,H>=S.day?0:q*Math.floor(L.get("Hours",B)/q)),H>=S.day&&L.set("Date",B,H>=S.month?1:Math.max(1,q*Math.floor(L.get("Date",B)/q))),H>=S.month&&(L.set("Month",B,H>=S.year?0:q*Math.floor(L.get("Month",B)/q)),j=L.get("FullYear",B)),H>=S.year&&(j-=j%q,L.set("FullYear",B,j)),H===S.week&&($=L.get("Day",B),L.set("Date",B,L.get("Date",B)-$+Z+($<Z?-7:0))),j=L.get("FullYear",B);let ae=L.get("Month",B),fe=L.get("Date",B),re=L.get("Hours",B);N=B.getTime(),(L.variableTimezone||!L.useUTC)&&r(W)&&(V=W-N>4*S.month||L.getTimezoneOffset(N)!==L.getTimezoneOffset(W));let ce=B.getTime();for(K=1;ce<W;)G.push(ce),H===S.year?ce=L.makeTime(j+K*q,0):H===S.month?ce=L.makeTime(j,ae+K*q):V&&(H===S.day||H===S.week)?ce=L.makeTime(j,ae,fe+K*q*(H===S.day?1:7)):V&&H===S.hour&&q>1?ce=L.makeTime(j,ae,fe,re+K*q):ce+=H*q,K++;G.push(ce),H<=S.hour&&G.length<1e4&&G.forEach(function(ke){ke%18e5==0&&L.dateFormat("%H%M%S%L",ke)==="000000000"&&(U[ke]="day")})}return G.info=f(k,{higherRanks:U,totalRange:H*q}),G}getDateFormat(k,N,W,Z){let K=this.dateFormat("%m-%d %H:%M:%S.%L",N),j="01-01 00:00:00.000",V={millisecond:15,second:12,minute:9,hour:6,day:3},$="millisecond",L=$;for($ in S){if(k===S.week&&+this.dateFormat("%w",N)===W&&K.substr(6)===j.substr(6)){$="week";break}if(S[$]>k){$=L;break}if(V[$]&&K.substr(V[$])!==j.substr(V[$]))break;$!=="week"&&(L=$)}return this.resolveDTLFormat(Z[$]).main}}return D.formatCache={},D}),n(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{isTouchDevice:f}=l,{fireEvent:m,merge:v}=p,y={colors:u.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:s,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:b=>Math.sqrt(1-Math.pow(b-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:f?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};y.chart.styledMode=!1;let _=new r(y.time);return{defaultOptions:y,defaultTime:_,getOptions:function(){return y},setOptions:function(b){return m(l,"setOptions",{options:b}),v(!0,y,b),(b.time||b.global)&&(l.time?l.time.update(v(y.global,y.time,b.global,b.time)):l.time=_),y}}}),n(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isNumber:u,merge:r,pInt:p}=l;class f{static parse(v){return v?new f(v):f.None}constructor(v){let y,_,b,C;this.rgba=[NaN,NaN,NaN,NaN],this.input=v;let E=s.Color;if(E&&E!==f)return new E(v);if(typeof v=="object"&&v.stops!==void 0)this.stops=v.stops.map(S=>new f(S[1]));else if(typeof v=="string"){if(this.input=v=f.names[v.toLowerCase()]||v,v.charAt(0)==="#"){let S=v.length,x=parseInt(v.substr(1),16);S===7?_=[(16711680&x)>>16,(65280&x)>>8,255&x,1]:S===4&&(_=[(3840&x)>>4|(3840&x)>>8,(240&x)>>4|240&x,(15&x)<<4|15&x,1])}if(!_)for(b=f.parsers.length;b--&&!_;)(y=(C=f.parsers[b]).regex.exec(v))&&(_=C.parse(y))}_&&(this.rgba=_)}get(v){let y=this.input,_=this.rgba;if(typeof y=="object"&&this.stops!==void 0){let b=r(y);return b.stops=[].slice.call(b.stops),this.stops.forEach((C,E)=>{b.stops[E]=[b.stops[E][0],C.get(v)]}),b}return _&&u(_[0])?v!=="rgb"&&(v||_[3]!==1)?v==="a"?`${_[3]}`:"rgba("+_.join(",")+")":"rgb("+_[0]+","+_[1]+","+_[2]+")":y}brighten(v){let y=this.rgba;if(this.stops)this.stops.forEach(function(_){_.brighten(v)});else if(u(v)&&v!==0)for(let _=0;_<3;_++)y[_]+=p(255*v),y[_]<0&&(y[_]=0),y[_]>255&&(y[_]=255);return this}setOpacity(v){return this.rgba[3]=v,this}tweenTo(v,y){let _=this.rgba,b=v.rgba;if(!u(_[0])||!u(b[0]))return v.input||"none";let C=b[3]!==1||_[3]!==1;return(C?"rgba(":"rgb(")+Math.round(b[0]+(_[0]-b[0])*(1-y))+","+Math.round(b[1]+(_[1]-b[1])*(1-y))+","+Math.round(b[2]+(_[2]-b[2])*(1-y))+(C?","+(b[3]+(_[3]-b[3])*(1-y)):"")+")"}}return f.names={white:"#ffffff",black:"#000000"},f.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(m){return[p(m[1]),p(m[2]),p(m[3]),parseFloat(m[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(m){return[p(m[1]),p(m[2]),p(m[3]),1]}}],f.None=new f(""),f}),n(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{parse:r}=s,{win:p}=l,{isNumber:f,objectEach:m}=u;class v{constructor(_,b,C){this.pos=NaN,this.options=b,this.elem=_,this.prop=C}dSetter(){let _=this.paths,b=_&&_[0],C=_&&_[1],E=this.now||0,S=[];if(E!==1&&b&&C)if(b.length===C.length&&E<1)for(let x=0;x<C.length;x++){let A=b[x],D=C[x],T=[];for(let k=0;k<D.length;k++){let N=A[k],W=D[k];f(N)&&f(W)&&!(D[0]==="A"&&(k===4||k===5))?T[k]=N+E*(W-N):T[k]=W}S.push(T)}else S=C;else S=this.toD||[];this.elem.attr("d",S,void 0,!0)}update(){let _=this.elem,b=this.prop,C=this.now,E=this.options.step;this[b+"Setter"]?this[b+"Setter"]():_.attr?_.element&&_.attr(b,C,null,!0):_.style[b]=C+this.unit,E&&E.call(_,C,this)}run(_,b,C){let E=this,S=E.options,x=function(T){return!x.stopped&&E.step(T)},A=p.requestAnimationFrame||function(T){setTimeout(T,13)},D=function(){for(let T=0;T<v.timers.length;T++)v.timers[T]()||v.timers.splice(T--,1);v.timers.length&&A(D)};_!==b||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=_,this.end=b,this.unit=C,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&v.timers.push(x)===1&&A(D)):(delete S.curAnim[this.prop],S.complete&&Object.keys(S.curAnim).length===0&&S.complete.call(this.elem))}step(_){let b,C,E=+new Date,S=this.options,x=this.elem,A=S.complete,D=S.duration,T=S.curAnim;return x.attr&&!x.element?b=!1:_||E>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),T[this.prop]=!0,C=!0,m(T,function(k){k!==!0&&(C=!1)}),C&&A&&A.call(x),b=!1):(this.pos=S.easing((E-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),b=!0),b}initPath(_,b,C){let E=_.startX,S=_.endX,x=C.slice(),A=_.isArea,D=A?2:1,T=b&&C.length>b.length&&C.hasStackedCliffs,k,N,W,Z,K=b&&b.slice();if(!K||T)return[x,x];function j($,L){for(;$.length<N;){let R=$[0],G=L[N-$.length];if(G&&R[0]==="M"&&(G[0]==="C"?$[0]=["C",R[1],R[2],R[1],R[2],R[1],R[2]]:$[0]=["L",R[1],R[2]]),$.unshift(R),A){let U=$.pop();$.push($[$.length-1],U)}}}function V($){for(;$.length<N;){let L=$[Math.floor($.length/D)-1].slice();if(L[0]==="C"&&(L[1]=L[5],L[2]=L[6]),A){let R=$[Math.floor($.length/D)].slice();$.splice($.length/2,0,L,R)}else $.push(L)}}if(E&&S&&S.length){for(W=0;W<E.length;W++){if(E[W]===S[0]){k=W;break}if(E[0]===S[S.length-E.length+W]){k=W,Z=!0;break}if(E[E.length-1]===S[S.length-E.length+W]){k=E.length-W;break}}k===void 0&&(K=[])}return K.length&&f(k)&&(N=x.length+k*D,Z?(j(K,x),V(x)):(j(x,K),V(K))),[K,x]}fillSetter(){v.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,r(this.start).tweenTo(r(this.end),this.pos),void 0,!0)}}return v.timers=[],v}),n(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,getStyle:r,isArray:p,isNumber:f,isObject:m,merge:v,objectEach:y,pick:_}=l;function b(E){return m(E)?v({duration:500,defer:0},E):{duration:E?500:0,defer:0}}function C(E,S){let x=s.timers.length;for(;x--;)s.timers[x].elem!==E||S&&S!==s.timers[x].prop||(s.timers[x].stopped=!0)}return{animate:function(E,S,x){let A,D="",T,k,N;m(x)||(N=arguments,x={duration:N[2],easing:N[3],complete:N[4]}),f(x.duration)||(x.duration=400),x.easing=typeof x.easing=="function"?x.easing:Math[x.easing]||Math.easeInOutSine,x.curAnim=v(S),y(S,function(W,Z){C(E,Z),k=new s(E,x,Z),T=void 0,Z==="d"&&p(S.d)?(k.paths=k.initPath(E,E.pathArray,S.d),k.toD=S.d,A=0,T=1):E.attr?A=E.attr(Z):(A=parseFloat(r(E,Z))||0,Z!=="opacity"&&(D="px")),T||(T=W),typeof T=="string"&&T.match("px")&&(T=T.replace(/px/g,"")),k.run(A,T,D)})},animObject:b,getDeferredAnimation:function(E,S,x){let A=b(S),D=x?[x]:E.series,T=0,k=0;return D.forEach(N=>{let W=b(N.options.animation);T=m(S)&&u(S.defer)?A.defer:Math.max(T,W.duration+W.defer),k=Math.min(A.duration,W.duration)}),E.renderer.forExport&&(T=0),{defer:Math.max(0,T-k),duration:Math.min(T,k)}},setAnimation:function(E,S){S.renderer.globalAnimation=_(E,S.options.chart.animation,!0)},stop:C}}),n(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{SVG_NS:u,win:r}=s,{attr:p,createElement:f,css:m,error:v,isFunction:y,isString:_,objectEach:b,splat:C}=l,{trustedTypes:E}=r,S=E&&y(E.createPolicy)&&E.createPolicy("highcharts",{createHTML:T=>T}),x=S?S.createHTML(""):"",A=function(){try{return!!new DOMParser().parseFromString(x,"text/html")}catch{return!1}}();class D{static filterUserAttributes(k){return b(k,(N,W)=>{let Z=!0;D.allowedAttributes.indexOf(W)===-1&&(Z=!1),["background","dynsrc","href","lowsrc","src"].indexOf(W)!==-1&&(Z=_(N)&&D.allowedReferences.some(K=>N.indexOf(K)===0)),Z||(v(33,!1,void 0,{"Invalid attribute in config":`${W}`}),delete k[W]),_(N)&&k[W]&&(k[W]=N.replace(/</g,"&lt;"))}),k}static parseStyle(k){return k.split(";").reduce((N,W)=>{let Z=W.split(":").map(j=>j.trim()),K=Z.shift();return K&&Z.length&&(N[K.replace(/-([a-z])/g,j=>j[1].toUpperCase())]=Z.join(":")),N},{})}static setElementHTML(k,N){k.innerHTML=D.emptyHTML,N&&new D(N).addToDOM(k)}constructor(k){this.nodes=typeof k=="string"?this.parseMarkup(k):k}addToDOM(k){return function N(W,Z){let K;return C(W).forEach(function(j){let V,$=j.tagName,L=j.textContent?s.doc.createTextNode(j.textContent):void 0,R=D.bypassHTMLFiltering;if($)if($==="#text")V=L;else if(D.allowedTags.indexOf($)!==-1||R){let G=$==="svg"?u:Z.namespaceURI||u,U=s.doc.createElementNS(G,$),B=j.attributes||{};b(j,function(H,q){q!=="tagName"&&q!=="attributes"&&q!=="children"&&q!=="style"&&q!=="textContent"&&(B[q]=H)}),p(U,R?B:D.filterUserAttributes(B)),j.style&&m(U,j.style),L&&U.appendChild(L),N(j.children||[],U),V=U}else v(33,!1,void 0,{"Invalid tagName in config":$});V&&Z.appendChild(V),K=V}),K}(this.nodes,k)}parseMarkup(k){let N,W=[];if(k=k.trim().replace(/ style=(["'])/g," data-style=$1"),A)N=new DOMParser().parseFromString(S?S.createHTML(k):k,"text/html");else{let K=f("div");K.innerHTML=k,N={body:K}}let Z=(K,j)=>{let V=K.nodeName.toLowerCase(),$={tagName:V};V==="#text"&&($.textContent=K.textContent||"");let L=K.attributes;if(L){let R={};[].forEach.call(L,G=>{G.name==="data-style"?$.style=D.parseStyle(G.value):R[G.name]=G.value}),$.attributes=R}if(K.childNodes.length){let R=[];[].forEach.call(K.childNodes,G=>{Z(G,R)}),R.length&&($.children=R)}j.push($)};return[].forEach.call(N.body.childNodes,K=>Z(K,W)),W}}return D.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],D.allowedReferences=["https://","http://","mailto:","/","../","./","#"],D.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],D.emptyHTML=x,D.bypassHTMLFiltering=!1,D}),n(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(s,l){let{defaultOptions:u,defaultTime:r}=s,{extend:p,getNestedProperty:f,isArray:m,isNumber:v,isObject:y,pick:_,pInt:b}=l,C={add:(x,A)=>x+A,divide:(x,A)=>A!==0?x/A:"",eq:(x,A)=>x==A,each:function(x){let A=arguments[arguments.length-1];return!!m(x)&&x.map((D,T)=>E(A.body,p(y(D)?D:{"@this":D},{"@index":T,"@first":T===0,"@last":T===x.length-1}))).join("")},ge:(x,A)=>x>=A,gt:(x,A)=>x>A,if:x=>!!x,le:(x,A)=>x<=A,lt:(x,A)=>x<A,multiply:(x,A)=>x*A,ne:(x,A)=>x!=A,subtract:(x,A)=>x-A,unless:x=>!x};function E(x="",A,D){let T=/\{([\w\:\.\,;\-\/<>%@"'= #\(\)]+)\}/g,k=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],W=/f$/,Z=/\.(\d)/,K=u.lang,j=D&&D.time||r,V=D&&D.numberFormatter||S,$=(B="")=>{let H;return B==="true"||B!=="false"&&((H=Number(B)).toString()===B?H:f(B,A))},L,R,G=0,U;for(;(L=T.exec(x))!==null;){let B=k.exec(L[1]);B&&(L=B,U=!0),R&&R.isBlock||(R={ctx:A,expression:L[1],find:L[0],isBlock:L[1].charAt(0)==="#",start:L.index,startInner:L.index+L[0].length,length:L[0].length});let H=L[1].split(" ")[0].replace("#","");C[H]&&(R.isBlock&&H===R.fn&&G++,R.fn||(R.fn=H));let q=L[1]==="else";if(R.isBlock&&R.fn&&(L[1]===`/${R.fn}`||q))if(G)!q&&G--;else{let ae=R.startInner,fe=x.substr(ae,L.index-ae);R.body===void 0?(R.body=fe,R.startInner=L.index+L[0].length):R.elseBody=fe,R.find+=fe+L[0],q||(N.push(R),R=void 0)}else R.isBlock||N.push(R);if(B&&!(R!=null&&R.isBlock))break}return N.forEach(B=>{let H,q,{body:ae,elseBody:fe,expression:re,fn:ce}=B;if(ce){let ke=[B],ve=re.split(" ");for(q=C[ce].length;q--;)ke.unshift($(ve[q+1]));H=C[ce].apply(A,ke),B.isBlock&&typeof H=="boolean"&&(H=E(H?ae:fe,A,D))}else{let ke=re.split(":");if(H=$(ke.shift()||""),ke.length&&typeof H=="number"){let ve=ke.join(":");if(W.test(ve)){let Ee=parseInt((ve.match(Z)||["","-1"])[1],10);H!==null&&(H=V(H,Ee,K.decimalPoint,ve.indexOf(",")>-1?K.thousandsSep:""))}else H=j.dateFormat(ve,H)}}x=x.replace(B.find,_(H,""))}),U?E(x,A,D):x}function S(x,A,D,T){let k,N;x=+x||0,A=+A;let W=u.lang,Z=(x.toString().split(".")[1]||"").split("e")[0].length,K=x.toString().split("e"),j=A;A===-1?A=Math.min(Z,20):v(A)?A&&K[1]&&K[1]<0&&((N=A+ +K[1])>=0?(K[0]=(+K[0]).toExponential(N).split("e")[0],A=N):(K[0]=K[0].split(".")[0]||0,x=A<20?(K[0]*Math.pow(10,K[1])).toFixed(A):0,K[1]=0)):A=2;let V=(Math.abs(K[1]?K[0]:x)+Math.pow(10,-Math.max(A,Z)-1)).toFixed(A),$=String(b(V)),L=$.length>3?$.length%3:0;return D=_(D,W.decimalPoint),T=_(T,W.thousandsSep),k=(x<0?"-":"")+(L?$.substr(0,L)+T:""),0>+K[1]&&!j?k="0":k+=$.substr(L).replace(/(\d{3})(?=\d)/g,"$1"+T),A?k+=D+V.slice(-A):+k==0&&(k="0"),K[1]&&+k!=0&&(k+="e"+K[1]),k}return{dateFormat:function(x,A,D){return r.dateFormat(x,A,D)},format:E,helpers:C,numberFormat:S}}),n(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(s){var l,u;let r;return(u=l||(l={})).rendererTypes={},u.getRendererType=function(p=r){return u.rendererTypes[p]||u.rendererTypes[r]},u.registerRendererType=function(p,f,m){u.rendererTypes[p]=f,(!r||m)&&(r=p,s.Renderer=f)},l}),n(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(s){var l;let{clamp:u,pick:r,pushUnique:p,stableSort:f}=s;return(l||(l={})).distribute=function m(v,y,_){let b=v,C=b.reducedLen||y,E=($,L)=>$.target-L.target,S=[],x=v.length,A=[],D=S.push,T,k,N,W=!0,Z,K,j=0,V;for(T=x;T--;)j+=v[T].size;if(j>C){for(f(v,($,L)=>(L.rank||0)-($.rank||0)),N=(V=v[0].rank===v[v.length-1].rank)?x/2:-1,k=V?N:x-1;N&&j>C;)Z=v[T=Math.floor(k)],p(A,T)&&(j-=Z.size),k+=N,V&&k>=v.length&&(N/=2,k=N);A.sort(($,L)=>L-$).forEach($=>D.apply(S,v.splice($,1)))}for(f(v,E),v=v.map($=>({size:$.size,targets:[$.target],align:r($.align,.5)}));W;){for(T=v.length;T--;)Z=v[T],K=(Math.min.apply(0,Z.targets)+Math.max.apply(0,Z.targets))/2,Z.pos=u(K-Z.size*Z.align,0,y-Z.size);for(T=v.length,W=!1;T--;)T>0&&v[T-1].pos+v[T-1].size>v[T].pos&&(v[T-1].size+=v[T].size,v[T-1].targets=v[T-1].targets.concat(v[T].targets),v[T-1].align=.5,v[T-1].pos+v[T-1].size>y&&(v[T-1].pos=y-v[T-1].size),v.splice(T,1),W=!0)}return D.apply(b,S),T=0,v.some($=>{let L=0;return($.targets||[]).some(()=>(b[T].pos=$.pos+L,_!==void 0&&Math.abs(b[T].pos-b[T].target)>_?(b.slice(0,T+1).forEach(R=>delete R.pos),b.reducedLen=(b.reducedLen||y)-.1*y,b.reducedLen>.1*y&&m(b,y,_),!0):(L+=b[T].size,T++,!1)))}),f(b,E),b},l}),n(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{animate:p,animObject:f,stop:m}=s,{deg2rad:v,doc:y,svg:_,SVG_NS:b,win:C}=u,{addEvent:E,attr:S,createElement:x,crisp:A,css:D,defined:T,erase:k,extend:N,fireEvent:W,isArray:Z,isFunction:K,isObject:j,isString:V,merge:$,objectEach:L,pick:R,pInt:G,pushUnique:U,replaceNested:B,syncTimeout:H,uniqueKey:q}=r;class ae{_defaultGetter(re){let ce=R(this[re+"Value"],this[re],this.element?this.element.getAttribute(re):null,0);return/^-?[\d\.]+$/.test(ce)&&(ce=parseFloat(ce)),ce}_defaultSetter(re,ce,ke){ke.setAttribute(ce,re)}add(re){let ce,ke=this.renderer,ve=this.element;return re&&(this.parentGroup=re),this.textStr!==void 0&&this.element.nodeName==="text"&&ke.buildText(this),this.added=!0,(!re||re.handleZ||this.zIndex)&&(ce=this.zIndexSetter()),ce||(re?re.element:ke.box).appendChild(ve),this.onAdd&&this.onAdd(),this}addClass(re,ce){let ke=ce?"":this.attr("class")||"";return(re=(re||"").split(/ /g).reduce(function(ve,Ee){return ke.indexOf(Ee)===-1&&ve.push(Ee),ve},ke?[ke]:[]).join(" "))!==ke&&this.attr("class",re),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(re,ce,ke,ve=!0){let Ee,Q,ee,oe,we={},J=this.renderer,se=J.alignedObjects,de=!!re;re?(this.alignOptions=re,this.alignByTranslate=ce,this.alignTo=ke):(re=this.alignOptions||{},ce=this.alignByTranslate,ke=this.alignTo);let xe=!ke||V(ke)?ke||"renderer":void 0;xe&&(de&&U(se,this),ke=void 0);let Ce=R(ke,J[xe],J),Ne=re.align,Te=re.verticalAlign;return Ee=(Ce.x||0)+(re.x||0),Q=(Ce.y||0)+(re.y||0),Ne==="right"?ee=1:Ne==="center"&&(ee=2),ee&&(Ee+=((Ce.width||0)-(re.width||0))/ee),we[ce?"translateX":"x"]=Math.round(Ee),Te==="bottom"?oe=1:Te==="middle"&&(oe=2),oe&&(Q+=((Ce.height||0)-(re.height||0))/oe),we[ce?"translateY":"y"]=Math.round(Q),ve&&(this[this.placed?"animate":"attr"](we),this.placed=!0),this.alignAttr=we,this}alignSetter(re){let ce={left:"start",center:"middle",right:"end"};ce[re]&&(this.alignValue=re,this.element.setAttribute("text-anchor",ce[re]))}animate(re,ce,ke){let ve=f(R(ce,this.renderer.globalAnimation,!0)),Ee=ve.defer;return y.hidden&&(ve.duration=0),ve.duration!==0?(ke&&(ve.complete=ke),H(()=>{this.element&&p(this,re,ve)},Ee)):(this.attr(re,void 0,ke||ve.complete),L(re,function(Q,ee){ve.step&&ve.step.call(this,Q,{prop:ee,pos:1,elem:this})},this)),this}applyTextOutline(re){let ce=this.element;re.indexOf("contrast")!==-1&&(re=re.replace(/contrast/g,this.renderer.getContrast(ce.style.fill)));let ke=re.split(" "),ve=ke[ke.length-1],Ee=ke[0];if(Ee&&Ee!=="none"&&u.svg){this.fakeTS=!0,Ee=Ee.replace(/(^[\d\.]+)(.*?)$/g,function(J,se,de){return 2*Number(se)+de}),this.removeTextOutline();let Q=y.createElementNS(b,"tspan");S(Q,{class:"highcharts-text-outline",fill:ve,stroke:ve,"stroke-width":Ee,"stroke-linejoin":"round"});let ee=ce.querySelector("textPath")||ce;[].forEach.call(ee.childNodes,J=>{let se=J.cloneNode(!0);se.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(de=>se.removeAttribute(de)),Q.appendChild(se)});let oe=0;[].forEach.call(ee.querySelectorAll("text tspan"),J=>{oe+=Number(J.getAttribute("dy"))});let we=y.createElementNS(b,"tspan");we.textContent="",S(we,{x:Number(ce.getAttribute("x")),dy:-oe}),Q.appendChild(we),ee.insertBefore(Q,ee.firstChild)}}attr(re,ce,ke,ve){let{element:Ee}=this,Q=ae.symbolCustomAttribs,ee,oe,we=this,J;return typeof re=="string"&&ce!==void 0&&(ee=re,(re={})[ee]=ce),typeof re=="string"?we=(this[re+"Getter"]||this._defaultGetter).call(this,re,Ee):(L(re,function(se,de){J=!1,ve||m(this,de),this.symbolName&&Q.indexOf(de)!==-1&&(oe||(this.symbolAttr(re),oe=!0),J=!0),this.rotation&&(de==="x"||de==="y")&&(this.doTransform=!0),J||(this[de+"Setter"]||this._defaultSetter).call(this,se,de,Ee)},this),this.afterSetters()),ke&&ke.call(this),we}clip(re){if(re&&!re.clipPath){let ce=q()+"-",ke=this.renderer.createElement("clipPath").attr({id:ce}).add(this.renderer.defs);N(re,{clipPath:ke,id:ce,count:0}),re.add(ke)}return this.attr("clip-path",re?`url(${this.renderer.url}#${re.id})`:"none")}crisp(re,ce){ce=Math.round(ce||re.strokeWidth||0);let ke=re.x||this.x||0,ve=re.y||this.y||0,Ee=(re.width||this.width||0)+ke,Q=(re.height||this.height||0)+ve,ee=A(ke,ce),oe=A(ve,ce);return N(re,{x:ee,y:oe,width:A(Ee,ce)-ee,height:A(Q,ce)-oe}),T(re.strokeWidth)&&(re.strokeWidth=ce),re}complexColor(re,ce,ke){let ve=this.renderer,Ee,Q,ee,oe,we,J,se,de,xe,Ce,Ne=[],Te;W(this.renderer,"complexColor",{args:arguments},function(){if(re.radialGradient?Q="radialGradient":re.linearGradient&&(Q="linearGradient"),Q){if(ee=re[Q],we=ve.gradients,J=re.stops,xe=ke.radialReference,Z(ee)&&(re[Q]=ee={x1:ee[0],y1:ee[1],x2:ee[2],y2:ee[3],gradientUnits:"userSpaceOnUse"}),Q==="radialGradient"&&xe&&!T(ee.gradientUnits)&&(oe=ee,ee=$(ee,ve.getRadialAttr(xe,oe),{gradientUnits:"userSpaceOnUse"})),L(ee,function(Ie,Ue){Ue!=="id"&&Ne.push(Ue,Ie)}),L(J,function(Ie){Ne.push(Ie)}),we[Ne=Ne.join(",")])Ce=we[Ne].attr("id");else{ee.id=Ce=q();let Ie=we[Ne]=ve.createElement(Q).attr(ee).add(ve.defs);Ie.radAttr=oe,Ie.stops=[],J.forEach(function(Ue){Ue[1].indexOf("rgba")===0?(se=(Ee=l.parse(Ue[1])).get("rgb"),de=Ee.get("a")):(se=Ue[1],de=1);let qe=ve.createElement("stop").attr({offset:Ue[0],"stop-color":se,"stop-opacity":de}).add(Ie);Ie.stops.push(qe)})}Te="url("+ve.url+"#"+Ce+")",ke.setAttribute(ce,Te),ke.gradient=Ne,re.toString=function(){return Te}}})}css(re){let ce=this.styles,ke={},ve=this.element,Ee,Q=!ce;if(ce&&L(re,function(ee,oe){ce&&ce[oe]!==ee&&(ke[oe]=ee,Q=!0)}),Q){ce&&(re=N(ce,ke)),re.width===null||re.width==="auto"?delete this.textWidth:ve.nodeName.toLowerCase()==="text"&&re.width&&(Ee=this.textWidth=G(re.width)),N(this.styles,re),Ee&&!_&&this.renderer.forExport&&delete re.width;let ee=$(re);ve.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(oe=>ee&&delete ee[oe]),ee.color&&(ee.fill=ee.color)),D(ve,ee)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),re.textOutline&&this.applyTextOutline(re.textOutline)),this}dashstyleSetter(re){let ce,ke=this["stroke-width"];if(ke==="inherit"&&(ke=1),re=re&&re.toLowerCase()){let ve=re.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(ce=ve.length;ce--;)ve[ce]=""+G(ve[ce])*R(ke,NaN);re=ve.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",re)}}destroy(){var oe;let re=this,ce=re.element||{},ke=re.renderer,ve=ce.ownerSVGElement,Ee=ce.nodeName==="SPAN"&&re.parentGroup||void 0,Q,ee;if(ce.onclick=ce.onmouseout=ce.onmouseover=ce.onmousemove=ce.point=null,m(re),re.clipPath&&ve){let we=re.clipPath;[].forEach.call(ve.querySelectorAll("[clip-path],[CLIP-PATH]"),function(J){J.getAttribute("clip-path").indexOf(we.element.id)>-1&&J.removeAttribute("clip-path")}),re.clipPath=we.destroy()}if(re.connector=(oe=re.connector)==null?void 0:oe.destroy(),re.stops){for(ee=0;ee<re.stops.length;ee++)re.stops[ee].destroy();re.stops.length=0,re.stops=void 0}for(re.safeRemoveChild(ce);Ee&&Ee.div&&Ee.div.childNodes.length===0;)Q=Ee.parentGroup,re.safeRemoveChild(Ee.div),delete Ee.div,Ee=Q;re.alignOptions&&k(ke.alignedObjects,re),L(re,function(we,J){re[J]&&re[J].parentGroup===re&&re[J].destroy&&re[J].destroy(),delete re[J]})}dSetter(re,ce,ke){Z(re)&&(typeof re[0]=="string"&&(re=this.renderer.pathToSegments(re)),this.pathArray=re,re=re.reduce((ve,Ee,Q)=>Ee&&Ee.join?(Q?ve+" ":"")+Ee.join(" "):(Ee||"").toString(),"")),/(NaN| {2}|^$)/.test(re)&&(re="M 0 0"),this[ce]!==re&&(ke.setAttribute(ce,re),this[ce]=re)}fillSetter(re,ce,ke){typeof re=="string"?ke.setAttribute(ce,re):re&&this.complexColor(re,ce,ke)}hrefSetter(re,ce,ke){ke.setAttributeNS("http://www.w3.org/1999/xlink",ce,re)}getBBox(re,ce){let ke,ve,Ee,Q,{alignValue:ee,element:oe,renderer:we,styles:J,textStr:se}=this,{cache:de,cacheKeys:xe}=we,Ce=oe.namespaceURI===this.SVG_NS,Ne=R(ce,this.rotation,0),Te=we.styledMode?oe&&ae.prototype.getStyle.call(oe,"font-size"):J.fontSize;if(T(se)&&((Q=se.toString()).indexOf("<")===-1&&(Q=Q.replace(/\d/g,"0")),Q+=["",we.rootFontSize,Te,Ne,this.textWidth,ee,J.textOverflow,J.fontWeight].join(",")),Q&&!re&&(ke=de[Q]),!ke||ke.polygon){if(Ce||we.forExport){try{Ee=this.fakeTS&&function(Ue){let qe=oe.querySelector(".highcharts-text-outline");qe&&D(qe,{display:Ue})},K(Ee)&&Ee("none"),ke=oe.getBBox?N({},oe.getBBox()):{width:oe.offsetWidth,height:oe.offsetHeight,x:0,y:0},K(Ee)&&Ee("")}catch{}(!ke||ke.width<0)&&(ke={x:0,y:0,width:0,height:0})}else ke=this.htmlGetBBox();ve=ke.height,Ce&&(ke.height=ve={"11px,17":14,"13px,20":16}[`${Te||""},${Math.round(ve)}`]||ve),Ne&&(ke=this.getRotatedBox(ke,Ne));let Ie={bBox:ke};W(this,"afterGetBBox",Ie),ke=Ie.bBox}if(Q&&(se===""||ke.height>0)){for(;xe.length>250;)delete de[xe.shift()];de[Q]||xe.push(Q),de[Q]=ke}return ke}getRotatedBox(re,ce){let{x:ke,y:ve,width:Ee,height:Q}=re,{alignValue:ee,translateY:oe,rotationOriginX:we=0,rotationOriginY:J=0}=this,se={right:1,center:.5}[ee||0]||0,de=Number(this.element.getAttribute("y")||0)-(oe?0:ve),xe=ce*v,Ce=(ce-90)*v,Ne=Math.cos(xe),Te=Math.sin(xe),Ie=Ee*Ne,Ue=Ee*Te,qe=Math.cos(Ce),Ae=Math.sin(Ce),[[ye,ge],[Me,De]]=[we,J].map(ai=>[ai-ai*Ne,ai*Te]),Pe=ke+se*(Ee-Ie)+ye+De+de*qe,$e=Pe+Ie,Ke=$e-Q*qe,tt=Ke-Ie,nt=ve+de-se*Ue-ge+Me+de*Ae,ht=nt+Ue,gt=ht-Q*Ae,Ct=gt-Ue,Lt=Math.min(Pe,$e,Ke,tt),ft=Math.min(nt,ht,gt,Ct),Et=Math.max(Pe,$e,Ke,tt)-Lt,Tt=Math.max(nt,ht,gt,Ct)-ft;return{x:Lt,y:ft,width:Et,height:Tt,polygon:[[Pe,nt],[$e,ht],[Ke,gt],[tt,Ct]]}}getStyle(re){return C.getComputedStyle(this.element||this,"").getPropertyValue(re)}hasClass(re){return(""+this.attr("class")).split(" ").indexOf(re)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(re,ce){this.onEvents={},this.opacity=1,this.SVG_NS=b,this.element=ce==="span"||ce==="body"?x(ce):y.createElementNS(this.SVG_NS,ce),this.renderer=re,this.styles={},W(this,"afterInit")}on(re,ce){let{onEvents:ke}=this;return ke[re]&&ke[re](),ke[re]=E(this.element,re,ce),this}opacitySetter(re,ce,ke){let ve=Number(Number(re).toFixed(3));this.opacity=ve,ke.setAttribute(ce,ve)}reAlign(){var re;(re=this.alignOptions)!=null&&re.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(re){return this.attr("class",(""+this.attr("class")).replace(V(re)?RegExp(`(^| )${re}( |$)`):re," ").replace(/ +/g," ").trim())}removeTextOutline(){let re=this.element.querySelector("tspan.highcharts-text-outline");re&&this.safeRemoveChild(re)}safeRemoveChild(re){let ce=re.parentNode;ce&&ce.removeChild(re)}setRadialReference(re){let ce=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=re,ce&&ce.radAttr&&ce.animate(this.renderer.getRadialAttr(re,ce.radAttr)),this}shadow(re){var Ee;let{renderer:ce}=this,ke=$(((Ee=this.parentGroup)==null?void 0:Ee.rotation)===90?{offsetX:-1,offsetY:-1}:{},j(re)?re:{}),ve=ce.shadowDefinition(ke);return this.attr({filter:re?`url(${ce.url}#${ve})`:"none"})}show(re=!0){return this.attr({visibility:re?"inherit":"visible"})}"stroke-widthSetter"(re,ce,ke){this[ce]=re,ke.setAttribute(ce,re)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let re=this.getStyle("stroke-width"),ce=0,ke;return/px$/.test(re)?ce=G(re):re!==""&&(S(ke=y.createElementNS(b,"rect"),{width:re,"stroke-width":0}),this.element.parentNode.appendChild(ke),ce=ke.getBBox().width,ke.parentNode.removeChild(ke)),ce}symbolAttr(re){let ce=this;ae.symbolCustomAttribs.forEach(function(ke){ce[ke]=R(re[ke],ce[ke])}),ce.attr({d:ce.renderer.symbols[ce.symbolName](ce.x,ce.y,ce.width,ce.height,ce)})}textSetter(re){re!==this.textStr&&(delete this.textPxLength,this.textStr=re,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(re){let ce=this.element,ke=ce.getElementsByTagName("title")[0]||y.createElementNS(this.SVG_NS,"title");ce.insertBefore?ce.insertBefore(ke,ce.firstChild):ce.appendChild(ke),ke.textContent=B(R(re,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let re=this.element;return re.parentNode.appendChild(re),this}translate(re,ce){return this.attr({translateX:re,translateY:ce})}updateTransform(re="transform"){var de;let{element:ce,matrix:ke,rotation:ve=0,rotationOriginX:Ee,rotationOriginY:Q,scaleX:ee,scaleY:oe,translateX:we=0,translateY:J=0}=this,se=["translate("+we+","+J+")"];T(ke)&&se.push("matrix("+ke.join(",")+")"),ve&&(se.push("rotate("+ve+" "+R(Ee,ce.getAttribute("x"),0)+" "+R(Q,ce.getAttribute("y")||0)+")"),((de=this.text)==null?void 0:de.element.tagName)==="SPAN"&&this.text.attr({rotation:ve,rotationOriginX:(Ee||0)-this.padding,rotationOriginY:(Q||0)-this.padding})),(T(ee)||T(oe))&&se.push("scale("+R(ee,1)+" "+R(oe,1)+")"),se.length&&!(this.text||this).textPath&&ce.setAttribute(re,se.join(" "))}visibilitySetter(re,ce,ke){re==="inherit"?ke.removeAttribute(ce):this[ce]!==re&&ke.setAttribute(ce,re),this[ce]=re}xGetter(re){return this.element.nodeName==="circle"&&(re==="x"?re="cx":re==="y"&&(re="cy")),this._defaultGetter(re)}zIndexSetter(re,ce){let ke=this.renderer,ve=this.parentGroup,Ee=(ve||ke).element||ke.box,Q=this.element,ee=Ee===ke.box,oe,we,J,se=!1,de,xe=this.added,Ce;if(T(re)?(Q.setAttribute("data-z-index",re),re=+re,this[ce]===re&&(xe=!1)):T(this[ce])&&Q.removeAttribute("data-z-index"),this[ce]=re,xe){for((re=this.zIndex)&&ve&&(ve.handleZ=!0),Ce=(oe=Ee.childNodes).length-1;Ce>=0&&!se;Ce--)de=!T(J=(we=oe[Ce]).getAttribute("data-z-index")),we!==Q&&(re<0&&de&&!ee&&!Ce?(Ee.insertBefore(Q,oe[Ce]),se=!0):(G(J)<=re||de&&(!T(re)||re>=0))&&(Ee.insertBefore(Q,oe[Ce+1]),se=!0));se||(Ee.insertBefore(Q,oe[ee?3:0]),se=!0)}return se}}return ae.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],ae.prototype.strokeSetter=ae.prototype.fillSetter,ae.prototype.yGetter=ae.prototype.xGetter,ae.prototype.matrixSetter=ae.prototype.rotationOriginXSetter=ae.prototype.rotationOriginYSetter=ae.prototype.rotationSetter=ae.prototype.scaleXSetter=ae.prototype.scaleYSetter=ae.prototype.translateXSetter=ae.prototype.translateYSetter=ae.prototype.verticalAlignSetter=function(fe,re){this[re]=fe,this.doTransform=!0},ae}),n(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,extend:r,isNumber:p,merge:f,pick:m,removeEvent:v}=l;class y extends s{constructor(b,C,E,S,x,A,D,T,k,N){let W;super(b,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=C,this.x=E,this.y=S,this.anchorX=A,this.anchorY=D,this.baseline=k,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=b.text(void 0,0,0,T).attr({zIndex:1}),typeof x=="string"&&((W=/^url\((.*?)\)$/.test(x))||this.renderer.symbols[x])&&(this.symbolKey=x),this.bBox=y.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=b.styledMode||W,this.deferredAttr={},this.alignFactor=0}alignSetter(b){let C={left:0,center:.5,right:1}[b];C!==this.alignFactor&&(this.alignFactor=C,this.bBox&&p(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(b,C){this.anchorX=b,this.boxAttr(C,Math.round(b)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(b,C){this.anchorY=b,this.boxAttr(C,b-this.ySetting)}boxAttr(b,C){this.box?this.box.attr(b,C):this.deferredAttr[b]=C}css(b){if(b){let C={};b=f(b),y.textProps.forEach(E=>{b[E]!==void 0&&(C[E]=b[E],delete b[E])}),this.text.css(C),"fontSize"in C||"fontWeight"in C?this.updateTextPadding():("width"in C||"textOverflow"in C)&&this.updateBoxSize()}return s.prototype.css.call(this,b)}destroy(){v(this.element,"mouseenter"),v(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),s.prototype.destroy.call(this)}fillSetter(b,C){b&&(this.needsBox=!0),this.fill=b,this.boxAttr(C,b)}getBBox(b,C){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:E,height:S=0,translateX:x=0,translateY:A=0,width:D=0}=this,T=m(this.paddingLeft,E),k=C??(this.rotation||0),N={width:D,height:S,x:x+this.bBox.x-T,y:A+this.bBox.y-E+this.baselineOffset};return k&&(N=this.getRotatedBox(N,k)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(b){this.heightSetting=b,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:m(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&u(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(b,C){p(b)?b!==this[C]&&(this[C]=b,this.updateTextPadding()):this[C]=void 0}rSetter(b,C){this.boxAttr(C,b)}strokeSetter(b,C){this.stroke=b,this.boxAttr(C,b)}"stroke-widthSetter"(b,C){b&&(this.needsBox=!0),this["stroke-width"]=b,this.boxAttr(C,b)}"text-alignSetter"(b){this.textAlign=b}textSetter(b){b!==void 0&&this.text.attr({text:b}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let b,C=this.text,E={},S=this.padding,x=this.bBox=(!p(this.widthSetting)||!p(this.heightSetting)||this.textAlign)&&u(C.textStr)?C.getBBox(void 0,0):y.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||x.height||0)+2*S;let A=this.renderer.fontMetrics(C);if(this.baselineOffset=S+Math.min((this.text.firstLineMetrics||A).b,x.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-A.h)/2),this.needsBox&&!C.textPath){if(!this.box){let D=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();D.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),D.add(this)}b=this.getCrispAdjust(),E.x=b,E.y=(this.baseline?-this.baselineOffset:0)+b,E.width=Math.round(this.width),E.height=Math.round(this.height),this.box.attr(r(E,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let b=this.text;if(!b.textPath){this.updateBoxSize();let C=this.baseline?0:this.baselineOffset,E=m(this.paddingLeft,this.padding);u(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(E+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(E!==b.x||C!==b.y)&&(b.attr("x",E),b.hasBoxWidthChanged&&(this.bBox=b.getBBox(!0)),C!==void 0&&b.attr("y",C)),b.x=E,b.y=C}}widthSetter(b){this.widthSetting=p(b)?b:void 0,this.doUpdate=!0}getPaddedWidth(){let b=this.padding,C=m(this.paddingLeft,b),E=m(this.paddingRight,b);return(this.widthSetting||this.bBox.width||0)+C+E}xSetter(b){this.x=b,this.alignFactor&&(b-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(b),this.attr("translateX",this.xSetting)}ySetter(b){this.ySetting=this.y=Math.round(b),this.attr("translateY",this.ySetting)}}return y.emptyBBox={width:0,height:0,x:0,y:0},y.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],y}),n(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(s){let{defined:l,isNumber:u,pick:r}=s;function p(v,y,_,b,C){let E=[];if(C){let S=C.start||0,x=r(C.r,_),A=r(C.r,b||_),D=2e-4/(C.borderRadius?1:Math.max(x,1)),T=Math.abs((C.end||0)-S-2*Math.PI)<D,k=(C.end||0)-(T?D:0),N=C.innerR,W=r(C.open,T),Z=Math.cos(S),K=Math.sin(S),j=Math.cos(k),V=Math.sin(k),$=r(C.longArc,k-S-Math.PI<D?0:1),L=["A",x,A,0,$,r(C.clockwise,1),v+x*j,y+A*V];L.params={start:S,end:k,cx:v,cy:y},E.push(["M",v+x*Z,y+A*K],L),l(N)&&((L=["A",N,N,0,$,l(C.clockwise)?1-C.clockwise:0,v+N*Z,y+N*K]).params={start:k,end:S,cx:v,cy:y},E.push(W?["M",v+N*j,y+N*V]:["L",v+N*j,y+N*V],L)),W||E.push(["Z"])}return E}function f(v,y,_,b,C){return C&&C.r?m(v,y,_,b,C):[["M",v,y],["L",v+_,y],["L",v+_,y+b],["L",v,y+b],["Z"]]}function m(v,y,_,b,C){let E=(C==null?void 0:C.r)||0;return[["M",v+E,y],["L",v+_-E,y],["A",E,E,0,0,1,v+_,y+E],["L",v+_,y+b-E],["A",E,E,0,0,1,v+_-E,y+b],["L",v+E,y+b],["A",E,E,0,0,1,v,y+b-E],["L",v,y+E],["A",E,E,0,0,1,v+E,y],["Z"]]}return{arc:p,callout:function(v,y,_,b,C){let E=Math.min(C&&C.r||0,_,b),S=E+6,x=C&&C.anchorX,A=C&&C.anchorY||0,D=m(v,y,_,b,{r:E});if(!u(x)||x<_&&x>0&&A<b&&A>0)return D;if(v+x>_-S)if(A>y+S&&A<y+b-S)D.splice(3,1,["L",v+_,A-6],["L",v+_+6,A],["L",v+_,A+6],["L",v+_,y+b-E]);else if(x<_){let T=A<y+S,k=T?y:y+b;D.splice(T?2:5,0,["L",x,A],["L",v+_-E,k])}else D.splice(3,1,["L",v+_,b/2],["L",x,A],["L",v+_,b/2],["L",v+_,y+b-E]);else if(v+x<S)if(A>y+S&&A<y+b-S)D.splice(7,1,["L",v,A+6],["L",v-6,A],["L",v,A-6],["L",v,y+E]);else if(x>0){let T=A<y+S,k=T?y:y+b;D.splice(T?1:6,0,["L",x,A],["L",v+E,k])}else D.splice(7,1,["L",v,b/2],["L",x,A],["L",v,b/2],["L",v,y+E]);else A>b&&x<_-S?D.splice(5,1,["L",x+6,y+b],["L",x,y+b+6],["L",x-6,y+b],["L",v+E,y+b]):A<0&&x>S&&D.splice(1,1,["L",x-6,y],["L",x,y-6],["L",x+6,y],["L",_-E,y]);return D},circle:function(v,y,_,b){return p(v+_/2,y+b/2,_/2,b/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(v,y,_,b){return[["M",v+_/2,y],["L",v+_,y+b/2],["L",v+_/2,y+b],["L",v,y+b/2],["Z"]]},rect:f,roundedRect:m,square:f,triangle:function(v,y,_,b){return[["M",v+_/2,y],["L",v+_,y+b],["L",v,y+b],["Z"]]},"triangle-down":function(v,y,_,b){return[["M",v,y],["L",v+_,y],["L",v+_/2,y+b],["Z"]]}}}),n(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:r,SVG_NS:p,win:f}=l,{attr:m,extend:v,fireEvent:y,isString:_,objectEach:b,pick:C}=u;return class{constructor(E){let S=E.styles;this.renderer=E.renderer,this.svgElement=E,this.width=E.textWidth,this.textLineHeight=S&&S.lineHeight,this.textOutline=S&&S.textOutline,this.ellipsis=!!(S&&S.textOverflow==="ellipsis"),this.noWrap=!!(S&&S.whiteSpace==="nowrap")}buildSVG(){let E=this.svgElement,S=E.element,x=E.renderer,A=C(E.textStr,"").toString(),D=A.indexOf("<")!==-1,T=S.childNodes,k=!E.added&&x.box,N=[A,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,E.getStyle("font-size"),this.width].join(",");if(N!==E.textCache){E.textCache=N,delete E.actualWidth;for(let W=T.length;W--;)S.removeChild(T[W]);if(D||this.ellipsis||this.width||E.textPath||A.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(A))){if(A!==""){k&&k.appendChild(S);let W=new s(A);this.modifyTree(W.nodes),W.addToDOM(S),this.modifyDOM(),this.ellipsis&&(S.textContent||"").indexOf("")!==-1&&E.attr("title",this.unescapeEntities(E.textStr||"",["&lt;","&gt;"])),k&&k.removeChild(S)}}else S.appendChild(r.createTextNode(this.unescapeEntities(A)));_(this.textOutline)&&E.applyTextOutline&&E.applyTextOutline(this.textOutline)}}modifyDOM(){let E,S=this.svgElement,x=m(S.element,"x");for(S.firstLineMetrics=void 0;(E=S.element.firstChild)&&/^[\s\u200B]*$/.test(E.textContent||" ");)S.element.removeChild(E);[].forEach.call(S.element.querySelectorAll("tspan.highcharts-br"),(k,N)=>{k.nextSibling&&k.previousSibling&&(N===0&&k.previousSibling.nodeType===1&&(S.firstLineMetrics=S.renderer.fontMetrics(k.previousSibling)),m(k,{dy:this.getLineHeight(k.nextSibling),x}))});let A=this.width||0;if(!A)return;let D=(k,N)=>{let W=k.textContent||"",Z=W.replace(/([^\^])-/g,"$1- ").split(" "),K=!this.noWrap&&(Z.length>1||S.element.childNodes.length>1),j=this.getLineHeight(N),V=0,$=S.actualWidth;if(this.ellipsis)W&&this.truncate(k,W,void 0,0,Math.max(0,A-.8*j),(L,R)=>L.substring(0,R)+"");else if(K){let L=[],R=[];for(;N.firstChild&&N.firstChild!==k;)R.push(N.firstChild),N.removeChild(N.firstChild);for(;Z.length;)Z.length&&!this.noWrap&&V>0&&(L.push(k.textContent||""),k.textContent=Z.join(" ").replace(/- /g,"-")),this.truncate(k,void 0,Z,V===0&&$||0,A,(G,U)=>Z.slice(0,U).join(" ").replace(/- /g,"-")),$=S.actualWidth,V++;R.forEach(G=>{N.insertBefore(G,k)}),L.forEach(G=>{N.insertBefore(r.createTextNode(G),k);let U=r.createElementNS(p,"tspan");U.textContent="",m(U,{dy:j,x}),N.insertBefore(U,k)})}},T=k=>{[].slice.call(k.childNodes).forEach(N=>{N.nodeType===f.Node.TEXT_NODE?D(N,k):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(S.actualWidth=0),T(N))})};T(S.element)}getLineHeight(E){let S=E.nodeType===f.Node.TEXT_NODE?E.parentElement:E;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(S||this.svgElement.element).h}modifyTree(E){let S=(x,A)=>{let{attributes:D={},children:T,style:k={},tagName:N}=x,W=this.renderer.styledMode;if(N==="b"||N==="strong"?W?D.class="highcharts-strong":k.fontWeight="bold":(N==="i"||N==="em")&&(W?D.class="highcharts-emphasized":k.fontStyle="italic"),k&&k.color&&(k.fill=k.color),N==="br"){D.class="highcharts-br",x.textContent="";let Z=E[A+1];Z&&Z.textContent&&(Z.textContent=Z.textContent.replace(/^ +/gm,""))}else N==="a"&&T&&T.some(Z=>Z.tagName==="#text")&&(x.children=[{children:T,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(x.tagName="tspan"),v(x,{attributes:D,style:k}),T&&T.filter(Z=>Z.tagName!=="#text").forEach(S)};E.forEach(S),y(this.svgElement,"afterModifyTree",{nodes:E})}truncate(E,S,x,A,D,T){let k,N,W=this.svgElement,{rotation:Z}=W,K=[],j=x?1:0,V=(S||x||"").length,$=V,L=function(R,G){let U=G||R,B=E.parentNode;if(B&&K[U]===void 0&&B.getSubStringLength)try{K[U]=A+B.getSubStringLength(0,x?U+1:U)}catch{}return K[U]};if(W.rotation=0,A+(N=L(E.textContent.length))>D){for(;j<=V;)$=Math.ceil((j+V)/2),x&&(k=T(x,$)),N=L($,k&&k.length-1),j===V?j=V+1:N>D?V=$-1:j=$;V===0?E.textContent="":S&&V===S.length-1||(E.textContent=k||T(S||x,$))}x&&x.splice(0,$),W.actualWidth=N,W.rotation=Z}unescapeEntities(E,S){return b(this.renderer.escapes,function(x,A){S&&S.indexOf(x)!==-1||(E=E.toString().replace(RegExp(x,"g"),A))}),E}}}),n(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y,_){let b,{defaultOptions:C}=l,{charts:E,deg2rad:S,doc:x,isFirefox:A,isMS:D,isWebKit:T,noop:k,SVG_NS:N,symbolSizes:W,win:Z}=r,{addEvent:K,attr:j,createElement:V,crisp:$,css:L,defined:R,destroyObjectProperties:G,extend:U,isArray:B,isNumber:H,isObject:q,isString:ae,merge:fe,pick:re,pInt:ce,replaceNested:ke,uniqueKey:ve}=_;class Ee{constructor(ee,oe,we,J,se,de,xe){let Ce,Ne,Te=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Ie=Te.element;xe||Te.css(this.getStyle(J||{})),ee.appendChild(Ie),j(ee,"dir","ltr"),ee.innerHTML.indexOf("xmlns")===-1&&j(Ie,"xmlns",this.SVG_NS),this.box=Ie,this.boxWrapper=Te,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=de,this.forExport=se,this.styledMode=xe,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Te.getStyle("font-size"),this.setSize(oe,we,!1),A&&ee.getBoundingClientRect&&((Ce=function(){L(ee,{left:0,top:0}),Ne=ee.getBoundingClientRect(),L(ee,{left:Math.ceil(Ne.left)-Ne.left+"px",top:Math.ceil(Ne.top)-Ne.top+"px"})})(),this.unSubPixelFix=K(Z,"resize",Ce))}definition(ee){return new s([ee]).addToDOM(this.defs.element)}getReferenceURL(){if((A||T)&&x.getElementsByTagName("base").length){if(!R(b)){let ee=ve(),oe=new s([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:ee},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${ee})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(x.body);L(oe,{position:"fixed",top:0,left:0,zIndex:9e5});let we=x.elementFromPoint(6,6);b=(we&&we.id)==="hitme",x.body.removeChild(oe)}if(b)return ke(Z.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(ee){return this.style=U({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},ee),this.style}setStyle(ee){this.boxWrapper.css(this.getStyle(ee))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let ee=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=ee.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(ee){return new this.Element(this,ee)}getRadialAttr(ee,oe){return{cx:ee[0]-ee[2]/2+(oe.cx||0)*ee[2],cy:ee[1]-ee[2]/2+(oe.cy||0)*ee[2],r:(oe.r||0)*ee[2]}}shadowDefinition(ee){let oe=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(ee).map(J=>`${J}-${ee[J]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),we=fe({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},ee);return this.defs.element.querySelector(`#${oe}`)||this.definition({tagName:"filter",attributes:{id:oe,filterUnits:we.filterUnits},children:this.getShadowFilterContent(we)}),oe}getShadowFilterContent(ee){return[{tagName:"feDropShadow",attributes:{dx:ee.offsetX,dy:ee.offsetY,"flood-color":ee.color,"flood-opacity":Math.min(5*ee.opacity,1),stdDeviation:ee.width/2}}]}buildText(ee){new y(ee).buildSVG()}getContrast(ee){let oe=u.parse(ee).rgba.map(J=>{let se=J/255;return se<=.03928?se/12.92:Math.pow((se+.055)/1.055,2.4)}),we=.2126*oe[0]+.7152*oe[1]+.0722*oe[2];return 1.05/(we+.05)>(we+.05)/.05?"#FFFFFF":"#000000"}button(ee,oe,we,J,se={},de,xe,Ce,Ne,Te){let Ie=this.label(ee,oe,we,Ne,void 0,void 0,Te,void 0,"button"),Ue=this.styledMode,qe=arguments,Ae=0;se=fe(C.global.buttonTheme,se),Ue&&(delete se.fill,delete se.stroke,delete se["stroke-width"]);let ye=se.states||{},ge=se.style||{};delete se.states,delete se.style;let Me=[s.filterUserAttributes(se)],De=[ge];return Ue||["hover","select","disabled"].forEach((Pe,$e)=>{Me.push(fe(Me[0],s.filterUserAttributes(qe[$e+5]||ye[Pe]||{}))),De.push(Me[$e+1].style),delete Me[$e+1].style}),K(Ie.element,D?"mouseover":"mouseenter",function(){Ae!==3&&Ie.setState(1)}),K(Ie.element,D?"mouseout":"mouseleave",function(){Ae!==3&&Ie.setState(Ae)}),Ie.setState=(Pe=0)=>{if(Pe!==1&&(Ie.state=Ae=Pe),Ie.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Pe]),!Ue){Ie.attr(Me[Pe]);let $e=De[Pe];q($e)&&Ie.css($e)}},Ie.attr(Me[0]),!Ue&&(Ie.css(U({cursor:"default"},ge)),Te&&Ie.text.css({pointerEvents:"none"})),Ie.on("touchstart",Pe=>Pe.stopPropagation()).on("click",function(Pe){Ae!==3&&J.call(Ie,Pe)})}crispLine(ee,oe){let[we,J]=ee;return R(we[1])&&we[1]===J[1]&&(we[1]=J[1]=$(we[1],oe)),R(we[2])&&we[2]===J[2]&&(we[2]=J[2]=$(we[2],oe)),ee}path(ee){let oe=this.styledMode?{}:{fill:"none"};return B(ee)?oe.d=ee:q(ee)&&U(oe,ee),this.createElement("path").attr(oe)}circle(ee,oe,we){let J=q(ee)?ee:ee===void 0?{}:{x:ee,y:oe,r:we},se=this.createElement("circle");return se.xSetter=se.ySetter=function(de,xe,Ce){Ce.setAttribute("c"+xe,de)},se.attr(J)}arc(ee,oe,we,J,se,de){let xe;q(ee)?(oe=(xe=ee).y,we=xe.r,J=xe.innerR,se=xe.start,de=xe.end,ee=xe.x):xe={innerR:J,start:se,end:de};let Ce=this.symbol("arc",ee,oe,we,we,xe);return Ce.r=we,Ce}rect(ee,oe,we,J,se,de){let xe=q(ee)?ee:ee===void 0?{}:{x:ee,y:oe,r:se,width:Math.max(we||0,0),height:Math.max(J||0,0)},Ce=this.createElement("rect");return this.styledMode||(de!==void 0&&(xe["stroke-width"]=de,U(xe,Ce.crisp(xe))),xe.fill="none"),Ce.rSetter=function(Ne,Te,Ie){Ce.r=Ne,j(Ie,{rx:Ne,ry:Ne})},Ce.rGetter=function(){return Ce.r||0},Ce.attr(xe)}roundedRect(ee){return this.symbol("roundedRect").attr(ee)}setSize(ee,oe,we){this.width=ee,this.height=oe,this.boxWrapper.animate({width:ee,height:oe},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:re(we,!0)?void 0:0}),this.alignElements()}g(ee){let oe=this.createElement("g");return ee?oe.attr({class:"highcharts-"+ee}):oe}image(ee,oe,we,J,se,de){let xe={preserveAspectRatio:"none"};H(oe)&&(xe.x=oe),H(we)&&(xe.y=we),H(J)&&(xe.width=J),H(se)&&(xe.height=se);let Ce=this.createElement("image").attr(xe),Ne=function(Te){Ce.attr({href:ee}),de.call(Ce,Te)};if(de){Ce.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Te=new Z.Image;K(Te,"load",Ne),Te.src=ee,Te.complete&&Ne({})}else Ce.attr({href:ee});return Ce}symbol(ee,oe,we,J,se,de){let xe,Ce,Ne,Te,Ie=this,Ue=/^url\((.*?)\)$/,qe=Ue.test(ee),Ae=!qe&&(this.symbols[ee]?ee:"circle"),ye=Ae&&this.symbols[Ae];if(ye)typeof oe=="number"&&(Ce=ye.call(this.symbols,oe||0,we||0,J||0,se||0,de)),xe=this.path(Ce),Ie.styledMode||xe.attr("fill","none"),U(xe,{symbolName:Ae||void 0,x:oe,y:we,width:J,height:se}),de&&U(xe,de);else if(qe){Ne=ee.match(Ue)[1];let ge=xe=this.image(Ne);ge.imgwidth=re(de&&de.width,W[Ne]&&W[Ne].width),ge.imgheight=re(de&&de.height,W[Ne]&&W[Ne].height),Te=Me=>Me.attr({width:Me.width,height:Me.height}),["width","height"].forEach(Me=>{ge[`${Me}Setter`]=function(De,Pe){this[Pe]=De;let{alignByTranslate:$e,element:Ke,width:tt,height:nt,imgwidth:ht,imgheight:gt}=this,Ct=Pe==="width"?ht:gt,Lt=1;de&&de.backgroundSize==="within"&&tt&&nt&&ht&&gt?(Lt=Math.min(tt/ht,nt/gt),j(Ke,{width:Math.round(ht*Lt),height:Math.round(gt*Lt)})):Ke&&Ct&&Ke.setAttribute(Pe,Ct),!$e&&ht&&gt&&this.translate(((tt||0)-ht*Lt)/2,((nt||0)-gt*Lt)/2)}}),R(oe)&&ge.attr({x:oe,y:we}),ge.isImg=!0,ge.symbolUrl=ee,R(ge.imgwidth)&&R(ge.imgheight)?Te(ge):(ge.attr({width:0,height:0}),V("img",{onload:function(){let Me=E[Ie.chartIndex];this.width===0&&(L(this,{position:"absolute",top:"-999em"}),x.body.appendChild(this)),W[Ne]={width:this.width,height:this.height},ge.imgwidth=this.width,ge.imgheight=this.height,ge.element&&Te(ge),this.parentNode&&this.parentNode.removeChild(this),Ie.imgCount--,Ie.imgCount||!Me||Me.hasLoaded||Me.onload()},src:Ne}),this.imgCount++)}return xe}clipRect(ee,oe,we,J){return this.rect(ee,oe,we,J,0)}text(ee,oe,we,J){let se={};if(J&&(this.allowHTML||!this.forExport))return this.html(ee,oe,we);se.x=Math.round(oe||0),we&&(se.y=Math.round(we)),R(ee)&&(se.text=ee);let de=this.createElement("text").attr(se);return J&&(!this.forExport||this.allowHTML)||(de.xSetter=function(xe,Ce,Ne){let Te=Ne.getElementsByTagName("tspan"),Ie=Ne.getAttribute(Ce);for(let Ue=0,qe;Ue<Te.length;Ue++)(qe=Te[Ue]).getAttribute(Ce)===Ie&&qe.setAttribute(Ce,xe);Ne.setAttribute(Ce,xe)}),de}fontMetrics(ee){let oe=ce(f.prototype.getStyle.call(ee,"font-size")||0),we=oe<24?oe+3:Math.round(1.2*oe),J=Math.round(.8*we);return{h:we,b:J,f:oe}}rotCorr(ee,oe,we){let J=ee;return oe&&we&&(J=Math.max(J*Math.cos(oe*S),4)),{x:-ee/3*Math.sin(oe*S),y:J}}pathToSegments(ee){let oe=[],we=[],J={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let se=0;se<ee.length;se++)ae(we[0])&&H(ee[se])&&we.length===J[we[0].toUpperCase()]&&ee.splice(se,0,we[0].replace("M","L").replace("m","l")),typeof ee[se]=="string"&&(we.length&&oe.push(we.slice(0)),we.length=0),we.push(ee[se]);return oe.push(we.slice(0)),oe}label(ee,oe,we,J,se,de,xe,Ce,Ne){return new m(this,ee,oe,we,J,se,de,xe,Ce,Ne)}alignElements(){this.alignedObjects.forEach(ee=>ee.align())}}return U(Ee.prototype,{Element:f,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:v,draw:k}),p.registerRendererType("svg",Ee,!0),Ee}),n(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{composed:p}=l,{attr:f,css:m,createElement:v,defined:y,extend:_,pInt:b,pushUnique:C}=r;function E(D,T,k){var W;let N=((W=this.div)==null?void 0:W.style)||k.style;u.prototype[`${T}Setter`].call(this,D,T,k),N&&(N[T]=D)}let S=(D,T)=>{var k;if(!D.div){let N=f(D.element,"class"),W=D.css,Z=v("div",N?{className:N}:void 0,{position:"absolute",left:`${D.translateX||0}px`,top:`${D.translateY||0}px`,...D.styles,display:D.display,opacity:D.opacity,visibility:D.visibility},((k=D.parentGroup)==null?void 0:k.div)||T);D.classSetter=(K,j,V)=>{V.setAttribute("class",K),Z.className=K},D.translateXSetter=D.translateYSetter=(K,j)=>{D[j]=K,Z.style[j==="translateX"?"left":"top"]=`${K}px`,D.doTransform=!0},D.opacitySetter=D.visibilitySetter=E,D.css=K=>(W.call(D,K),K.cursor&&(Z.style.cursor=K.cursor),K.pointerEvents&&(Z.style.pointerEvents=K.pointerEvents),D),D.on=function(){return u.prototype.on.apply({element:Z,onEvents:D.onEvents},arguments),D},D.div=Z}return D.div};class x extends u{static compose(T){C(p,this.compose)&&(T.prototype.html=function(k,N,W){return new x(this,"span").attr({text:k,x:Math.round(N),y:Math.round(W)})})}constructor(T,k){super(T,k),this.css({position:"absolute",...T.styledMode?{}:{fontFamily:T.style.fontFamily,fontSize:T.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(T,k,N){this.xCorr=-T*N,this.yCorr=-k}css(T){let k,{element:N}=this,W=N.tagName==="SPAN"&&T&&"width"in T,Z=W&&T.width;return W&&(delete T.width,this.textWidth=b(Z)||void 0,k=!0),(T==null?void 0:T.textOverflow)==="ellipsis"&&(T.whiteSpace="nowrap",T.overflow="hidden"),_(this.styles,T),m(N,T),k&&this.updateTransform(),this}htmlGetBBox(){let{element:T}=this;return{x:T.offsetLeft,y:T.offsetTop,width:T.offsetWidth,height:T.offsetHeight}}updateTransform(){var H;if(!this.added){this.alignOnAdd=!0;return}let{element:T,renderer:k,rotation:N,rotationOriginX:W,rotationOriginY:Z,styles:K,textAlign:j="left",textWidth:V,translateX:$=0,translateY:L=0,x:R=0,y:G=0}=this,U={left:0,center:.5,right:1}[j],B=K.whiteSpace;if(m(T,{marginLeft:`${$}px`,marginTop:`${L}px`}),T.tagName==="SPAN"){let q=[N,j,T.innerHTML,V,this.textAlign].join(","),ae=-(((H=this.parentGroup)==null?void 0:H.padding)*1)||0,fe,re=!1;if(V!==this.oldTextWidth){let Q=this.textPxLength?this.textPxLength:(m(T,{width:"",whiteSpace:B||"nowrap"}),T.offsetWidth),ee=V||0;(ee>this.oldTextWidth||Q>ee)&&(/[ \-]/.test(T.textContent||T.innerText)||T.style.textOverflow==="ellipsis")&&(m(T,{width:Q>ee||N?V+"px":"auto",display:"block",whiteSpace:B||"normal"}),this.oldTextWidth=V,re=!0)}this.hasBoxWidthChanged=re,q!==this.cTT&&(fe=k.fontMetrics(T).b,y(N)&&(N!==(this.oldRotation||0)||j!==this.oldAlign)&&this.setSpanRotation(N,ae,ae),this.getSpanCorrection(!y(N)&&this.textPxLength||T.offsetWidth,fe,U));let{xCorr:ce=0,yCorr:ke=0}=this,ve=(W??R)-ce-R-ae,Ee=(Z??G)-ke-G-ae;m(T,{left:`${R+ce}px`,top:`${G+ke}px`,transformOrigin:`${ve}px ${Ee}px`}),this.cTT=q,this.oldRotation=N,this.oldAlign=j}}setSpanRotation(T,k,N){m(this.element,{transform:`rotate(${T}deg)`,transformOrigin:`${k}% ${N}px`})}add(T){let k,N=this.renderer.box.parentNode,W=[];if(this.parentGroup=T,T&&!(k=T.div)){let Z=T;for(;Z;)W.push(Z),Z=Z.parentGroup;for(let K of W.reverse())k=S(K,N)}return(k||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(T){T!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,s.setElementHTML(this.element,T??""),this.textStr=T,this.doTransform=!0)}alignSetter(T){this.alignValue=this.textAlign=T,this.doTransform=!0}xSetter(T,k){this[k]=T,this.doTransform=!0}}let A=x.prototype;return A.visibilitySetter=A.opacitySetter=E,A.ySetter=A.rotationSetter=A.rotationOriginXSetter=A.rotationOriginYSetter=A.xSetter,x}),n(t,"Core/Axis/AxisDefaults.js",[],function(){var s,l;return(l=s||(s={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},l.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:u}=this.axis.chart;return u(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},s}),n(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,isFunction:r,objectEach:p,removeEvent:f}=s;return(l||(l={})).registerEventOptions=function(m,v){m.eventOptions=m.eventOptions||{},p(v.events,function(y,_){m.eventOptions[_]!==y&&(m.eventOptions[_]&&(f(m,_,m.eventOptions[_]),delete m.eventOptions[_]),r(y)&&(m.eventOptions[_]=y,u(m,_,y,{order:0})))})},l}),n(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{deg2rad:r}=l,{clamp:p,correctFloat:f,defined:m,destroyObjectProperties:v,extend:y,fireEvent:_,isNumber:b,merge:C,objectEach:E,pick:S}=u;return class{constructor(x,A,D,T,k){this.isNew=!0,this.isNewLabel=!0,this.axis=x,this.pos=A,this.type=D||"",this.parameters=k||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,_(this,"init"),D||T||this.addLabel()}addLabel(){let x=this,A=x.axis,D=A.options,T=A.chart,k=A.categories,N=A.logarithmic,W=A.names,Z=x.pos,K=S(x.options&&x.options.labels,D.labels),j=A.tickPositions,V=Z===j[0],$=Z===j[j.length-1],L=(!K.step||K.step===1)&&A.tickInterval===1,R=j.info,G=x.label,U,B,H,q=this.parameters.category||(k?S(k[Z],W[Z],Z):Z);N&&b(q)&&(q=f(N.lin2log(q))),A.dateTime&&(R?U=(B=T.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&R.higherRanks[Z]||R.unitName])).main:b(q)&&(U=A.dateTime.getXDateFormat(q,D.dateTimeLabelFormats||{}))),x.isFirst=V,x.isLast=$;let ae={axis:A,chart:T,dateTimeLabelFormat:U,isFirst:V,isLast:$,pos:Z,tick:x,tickPositionInfo:R,value:q};_(this,"labelFormat",ae);let fe=ke=>K.formatter?K.formatter.call(ke,ke):K.format?(ke.text=A.defaultLabelFormatter.call(ke),s.format(K.format,ke,T)):A.defaultLabelFormatter.call(ke),re=fe.call(ae,ae),ce=B&&B.list;ce?x.shortenLabel=function(){for(H=0;H<ce.length;H++)if(y(ae,{dateTimeLabelFormat:ce[H]}),G.attr({text:fe.call(ae,ae)}),G.getBBox().width<A.getSlotWidth(x)-2*(K.padding||0))return;G.attr({text:""})}:x.shortenLabel=void 0,L&&A._addedPlotLB&&x.moveLabel(re,K),m(G)||x.movedLabel?G&&G.textStr!==re&&!L&&(!G.textWidth||K.style.width||G.styles.width||G.css({width:null}),G.attr({text:re}),G.textPxLength=G.getBBox().width):(x.label=G=x.createLabel(re,K),x.rotation=0)}createLabel(x,A,D){let T=this.axis,k=T.chart,N=m(x)&&A.enabled?k.renderer.text(x,D==null?void 0:D.x,D==null?void 0:D.y,A.useHTML).add(T.labelGroup):void 0;return N&&(k.styledMode||N.css(C(A.style)),N.textPxLength=N.getBBox().width),N}destroy(){v(this,this.axis)}getPosition(x,A,D,T){let k=this.axis,N=k.chart,W=T&&N.oldChartHeight||N.chartHeight,Z={x:x?f(k.translate(A+D,void 0,void 0,T)+k.transB):k.left+k.offset+(k.opposite?(T&&N.oldChartWidth||N.chartWidth)-k.right-k.left:0),y:x?W-k.bottom+k.offset-(k.opposite?k.height:0):f(W-k.translate(A+D,void 0,void 0,T)-k.transB)};return Z.y=p(Z.y,-1e9,1e9),_(this,"afterGetPosition",{pos:Z}),Z}getLabelPosition(x,A,D,T,k,N,W,Z){let K,j,V=this.axis,$=V.transA,L=V.isLinked&&V.linkedParent?V.linkedParent.reversed:V.reversed,R=V.staggerLines,G=V.tickRotCorr||{x:0,y:0},U=T||V.reserveSpaceDefault?0:-V.labelOffset*(V.labelAlign==="center"?.5:1),B=k.distance,H={};return K=V.side===0?D.rotation?-B:-D.getBBox().height:V.side===2?G.y+B:Math.cos(D.rotation*r)*(G.y-D.getBBox(!1,0).height/2),m(k.y)&&(K=V.side===0&&V.horiz?k.y+K:k.y),x=x+S(k.x,[0,1,0,-1][V.side]*B)+U+G.x-(N&&T?N*$*(L?-1:1):0),A=A+K-(N&&!T?N*$*(L?1:-1):0),R&&(j=W/(Z||1)%R,V.opposite&&(j=R-j-1),A+=j*(V.labelOffset/R)),H.x=x,H.y=Math.round(A),_(this,"afterGetLabelPosition",{pos:H,tickmarkOffset:N,index:W}),H}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(x,A,D,T,k=!1,N){return N.crispLine([["M",x,A],["L",x+(k?0:-D),A+(k?D:0)]],T)}handleOverflow(x){let A=this.axis,D=A.options.labels,T=x.x,k=A.chart.chartWidth,N=A.chart.spacing,W=S(A.labelLeft,Math.min(A.pos,N[3])),Z=S(A.labelRight,Math.max(A.isRadial?0:A.pos+A.len,k-N[1])),K=this.label,j=this.rotation,V={left:0,center:.5,right:1}[A.labelAlign||K.attr("align")],$=K.getBBox().width,L=A.getSlotWidth(this),R={},G=L,U=1,B,H,q;j||D.overflow!=="justify"?j<0&&T-V*$<W?q=Math.round(T/Math.cos(j*r)-W):j>0&&T+V*$>Z&&(q=Math.round((k-T)/Math.cos(j*r))):(B=T-V*$,H=T+(1-V)*$,B<W?G=x.x+G*(1-V)-W:H>Z&&(G=Z-x.x+G*V,U=-1),(G=Math.min(L,G))<L&&A.labelAlign==="center"&&(x.x+=U*(L-G-V*(L-Math.min($,G)))),($>G||A.autoRotation&&(K.styles||{}).width)&&(q=G)),q&&(this.shortenLabel?this.shortenLabel():(R.width=Math.floor(q)+"px",(D.style||{}).textOverflow||(R.textOverflow="ellipsis"),K.css(R)))}moveLabel(x,A){let D=this,T=D.label,k=D.axis,N=!1,W;T&&T.textStr===x?(D.movedLabel=T,N=!0,delete D.label):E(k.ticks,function(Z){N||Z.isNew||Z===D||!Z.label||Z.label.textStr!==x||(D.movedLabel=Z.label,N=!0,Z.labelPos=D.movedLabel.xy,delete Z.label)}),!N&&(D.labelPos||T)&&(W=D.labelPos||T.xy,D.movedLabel=D.createLabel(x,A,W),D.movedLabel&&D.movedLabel.attr({opacity:0}))}render(x,A,D){let T=this.axis,k=T.horiz,N=this.pos,W=S(this.tickmarkOffset,T.tickmarkOffset),Z=this.getPosition(k,N,W,A),K=Z.x,j=Z.y,V=T.pos,$=V+T.len,L=k?K:j;!T.chart.polar&&this.isNew&&(f(L)<V||L>$)&&(D=0);let R=S(D,this.label&&this.label.newOpacity,1);D=S(D,1),this.isActive=!0,this.renderGridLine(A,D),this.renderMark(Z,D),this.renderLabel(Z,A,R,x),this.isNew=!1,_(this,"afterRender")}renderGridLine(x,A){let D=this.axis,T=D.options,k={},N=this.pos,W=this.type,Z=S(this.tickmarkOffset,D.tickmarkOffset),K=D.chart.renderer,j=this.gridLine,V,$=T.gridLineWidth,L=T.gridLineColor,R=T.gridLineDashStyle;this.type==="minor"&&($=T.minorGridLineWidth,L=T.minorGridLineColor,R=T.minorGridLineDashStyle),j||(D.chart.styledMode||(k.stroke=L,k["stroke-width"]=$||0,k.dashstyle=R),W||(k.zIndex=1),x&&(A=0),this.gridLine=j=K.path().attr(k).addClass("highcharts-"+(W?W+"-":"")+"grid-line").add(D.gridGroup)),j&&(V=D.getPlotLinePath({value:N+Z,lineWidth:j.strokeWidth(),force:"pass",old:x,acrossPanes:!1}))&&j[x||this.isNew?"attr":"animate"]({d:V,opacity:A})}renderMark(x,A){let D=this.axis,T=D.options,k=D.chart.renderer,N=this.type,W=D.tickSize(N?N+"Tick":"tick"),Z=x.x,K=x.y,j=S(T[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&D.isXAxis?1:0),V=T[N!=="minor"?"tickColor":"minorTickColor"],$=this.mark,L=!$;W&&(D.opposite&&(W[0]=-W[0]),$||(this.mark=$=k.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(D.axisGroup),D.chart.styledMode||$.attr({stroke:V,"stroke-width":j})),$[L?"attr":"animate"]({d:this.getMarkPath(Z,K,W[0],$.strokeWidth(),D.horiz,k),opacity:A}))}renderLabel(x,A,D,T){let k=this.axis,N=k.horiz,W=k.options,Z=this.label,K=W.labels,j=K.step,V=S(this.tickmarkOffset,k.tickmarkOffset),$=x.x,L=x.y,R=!0;Z&&b($)&&(Z.xy=x=this.getLabelPosition($,L,Z,N,K,V,T,j),(!this.isFirst||this.isLast||W.showFirstLabel)&&(!this.isLast||this.isFirst||W.showLastLabel)?!N||K.step||K.rotation||A||D===0||this.handleOverflow(x):R=!1,j&&T%j&&(R=!1),R&&b(x.y)?(x.opacity=D,Z[this.isNewLabel?"attr":"animate"](x).show(!0),this.isNewLabel=!1):(Z.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let x=this.label,A=this.axis;x&&!this.isNew&&(x.animate({opacity:0},void 0,x.destroy),delete this.label),A.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),n(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v){let{animObject:y}=s,{xAxis:_,yAxis:b}=l,{defaultOptions:C}=r,{registerEventOptions:E}=p,{deg2rad:S}=f,{arrayMax:x,arrayMin:A,clamp:D,correctFloat:T,defined:k,destroyObjectProperties:N,erase:W,error:Z,extend:K,fireEvent:j,getClosestDistance:V,insertItem:$,isArray:L,isNumber:R,isString:G,merge:U,normalizeTickInterval:B,objectEach:H,pick:q,relativeLength:ae,removeEvent:fe,splat:re,syncTimeout:ce}=v,ke=(Ee,Q)=>B(Q,void 0,void 0,q(Ee.options.allowDecimals,Q<.5||Ee.tickAmount!==void 0),!!Ee.tickAmount);K(C,{xAxis:_,yAxis:U(_,b)});class ve{constructor(Q,ee,oe){this.init(Q,ee,oe)}init(Q,ee,oe=this.coll){let we=oe==="xAxis",J=this.isZAxis||(Q.inverted?!we:we);this.chart=Q,this.horiz=J,this.isXAxis=we,this.coll=oe,j(this,"init",{userOptions:ee}),this.opposite=q(ee.opposite,this.opposite),this.side=q(ee.side,this.side,J?this.opposite?0:2:this.opposite?1:3),this.setOptions(ee);let se=this.options,de=se.labels;this.type??(this.type=se.type||"linear"),this.uniqueNames??(this.uniqueNames=se.uniqueNames??!0),j(this,"afterSetType"),this.userOptions=ee,this.minPixelPadding=0,this.reversed=q(se.reversed,this.reversed),this.visible=se.visible,this.zoomEnabled=se.zoomEnabled,this.hasNames=this.type==="category"||se.categories===!0,this.categories=L(se.categories)&&se.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=k(se.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=se.minRange||se.maxZoom,this.range=se.range,this.offset=se.offset||0,this.max=void 0,this.min=void 0;let xe=q(se.crosshair,re(Q.options.tooltip.crosshairs)[we?0:1]);this.crosshair=xe===!0?{}:xe,Q.axes.indexOf(this)===-1&&(we?Q.axes.splice(Q.xAxis.length,0,this):Q.axes.push(this),$(this,Q[this.coll])),Q.orderItems(this.coll),this.series=this.series||[],Q.inverted&&!this.isZAxis&&we&&!k(this.reversed)&&(this.reversed=!0),this.labelRotation=R(de.rotation)?de.rotation:void 0,E(this,se),j(this,"afterInit")}setOptions(Q){let ee=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=U(ee,C[this.coll],Q),j(this,"afterSetOptions",{userOptions:Q})}defaultLabelFormatter(){let Q=this.axis,{numberFormatter:ee}=this.chart,oe=R(this.value)?this.value:NaN,we=Q.chart.time,J=Q.categories,se=this.dateTimeLabelFormat,de=C.lang,xe=de.numericSymbols,Ce=de.numericSymbolMagnitude||1e3,Ne=Q.logarithmic?Math.abs(oe):Q.tickInterval,Te=xe&&xe.length,Ie,Ue;if(J)Ue=`${this.value}`;else if(se)Ue=we.dateFormat(se,oe);else if(Te&&xe&&Ne>=1e3)for(;Te--&&Ue===void 0;)Ne>=(Ie=Math.pow(Ce,Te+1))&&10*oe%Ie==0&&xe[Te]!==null&&oe!==0&&(Ue=ee(oe/Ie,-1)+xe[Te]);return Ue===void 0&&(Ue=Math.abs(oe)>=1e4?ee(oe,-1):ee(oe,-1,void 0,"")),Ue}getSeriesExtremes(){let Q,ee=this;j(this,"getSeriesExtremes",null,function(){ee.hasVisibleSeries=!1,ee.dataMin=ee.dataMax=ee.threshold=void 0,ee.softThreshold=!ee.isXAxis,ee.series.forEach(oe=>{if(oe.reserveSpace()){let we=oe.options,J,se=we.threshold,de,xe;if(ee.hasVisibleSeries=!0,ee.positiveValuesOnly&&0>=(se||0)&&(se=void 0),ee.isXAxis)(J=oe.xData)&&J.length&&(J=ee.logarithmic?J.filter(Ce=>Ce>0):J,de=(Q=oe.getXExtremes(J)).min,xe=Q.max,R(de)||de instanceof Date||(J=J.filter(R),de=(Q=oe.getXExtremes(J)).min,xe=Q.max),J.length&&(ee.dataMin=Math.min(q(ee.dataMin,de),de),ee.dataMax=Math.max(q(ee.dataMax,xe),xe)));else{let Ce=oe.applyExtremes();R(Ce.dataMin)&&(de=Ce.dataMin,ee.dataMin=Math.min(q(ee.dataMin,de),de)),R(Ce.dataMax)&&(xe=Ce.dataMax,ee.dataMax=Math.max(q(ee.dataMax,xe),xe)),k(se)&&(ee.threshold=se),(!we.softThreshold||ee.positiveValuesOnly)&&(ee.softThreshold=!1)}}})}),j(this,"afterGetSeriesExtremes")}translate(Q,ee,oe,we,J,se){var Ae;let de=this.linkedParent||this,xe=we&&de.old?de.old.min:de.min;if(!R(xe))return NaN;let Ce=de.minPixelPadding,Ne=(de.isOrdinal||((Ae=de.brokenAxis)==null?void 0:Ae.hasBreaks)||de.logarithmic&&J)&&de.lin2val,Te=1,Ie=0,Ue=we&&de.old?de.old.transA:de.transA,qe=0;return Ue||(Ue=de.transA),oe&&(Te*=-1,Ie=de.len),de.reversed&&(Te*=-1,Ie-=Te*(de.sector||de.len)),ee?(qe=(Q=Q*Te+Ie-Ce)/Ue+xe,Ne&&(qe=de.lin2val(qe))):(Ne&&(Q=de.val2lin(Q)),qe=Te*(Q-xe)*Ue+Ie+Te*Ce+(R(se)?Ue*se:0),de.isRadial||(qe=T(qe))),qe}toPixels(Q,ee){return this.translate(Q,!1,!this.horiz,void 0,!0)+(ee?0:this.pos)}toValue(Q,ee){return this.translate(Q-(ee?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(Q){let ee=this,oe=ee.chart,we=ee.left,J=ee.top,se=Q.old,de=Q.value,xe=Q.lineWidth,Ce=se&&oe.oldChartHeight||oe.chartHeight,Ne=se&&oe.oldChartWidth||oe.chartWidth,Te=ee.transB,Ie=Q.translatedValue,Ue=Q.force,qe,Ae,ye,ge,Me;function De($e,Ke,tt){return Ue!=="pass"&&($e<Ke||$e>tt)&&(Ue?$e=D($e,Ke,tt):Me=!0),$e}let Pe={value:de,lineWidth:xe,old:se,force:Ue,acrossPanes:Q.acrossPanes,translatedValue:Ie};return j(this,"getPlotLinePath",Pe,function($e){qe=ye=(Ie=D(Ie=q(Ie,ee.translate(de,void 0,void 0,se)),-1e9,1e9))+Te,Ae=ge=Ce-Ie-Te,R(Ie)?ee.horiz?(Ae=J,ge=Ce-ee.bottom+(ee.options.isInternal?0:oe.scrollablePixelsY||0),qe=ye=De(qe,we,we+ee.width)):(qe=we,ye=Ne-ee.right+(oe.scrollablePixelsX||0),Ae=ge=De(Ae,J,J+ee.height)):(Me=!0,Ue=!1),$e.path=Me&&!Ue?void 0:oe.renderer.crispLine([["M",qe,Ae],["L",ye,ge]],xe||1)}),Pe.path}getLinearTickPositions(Q,ee,oe){let we,J,se,de=T(Math.floor(ee/Q)*Q),xe=T(Math.ceil(oe/Q)*Q),Ce=[];if(T(de+Q)===de&&(se=20),this.single)return[ee];for(we=de;we<=xe&&(Ce.push(we),(we=T(we+Q,se))!==J);)J=we;return Ce}getMinorTickInterval(){let{minorTicks:Q,minorTickInterval:ee}=this.options;return Q===!0?q(ee,"auto"):Q!==!1?ee:void 0}getMinorTickPositions(){let Q=this.options,ee=this.tickPositions,oe=this.minorTickInterval,we=this.pointRangePadding||0,J=(this.min||0)-we,se=(this.max||0)+we,de=se-J,xe=[],Ce;if(de&&de/oe<this.len/3){let Ne=this.logarithmic;if(Ne)this.paddedTicks.forEach(function(Te,Ie,Ue){Ie&&xe.push.apply(xe,Ne.getLogTickPositions(oe,Ue[Ie-1],Ue[Ie],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")xe=xe.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(oe),J,se,Q.startOfWeek));else for(Ce=J+(ee[0]-J)%oe;Ce<=se&&Ce!==xe[0];Ce+=oe)xe.push(Ce)}return xe.length!==0&&this.trimTicks(xe),xe}adjustForMinRange(){let Q=this.options,ee=this.logarithmic,{max:oe,min:we,minRange:J}=this,se,de,xe,Ce;this.isXAxis&&J===void 0&&!ee&&(J=k(Q.min)||k(Q.max)||k(Q.floor)||k(Q.ceiling)?null:Math.min(5*(V(this.series.map(Ne=>{var Te;return(Ne.xIncrement?(Te=Ne.xData)==null?void 0:Te.slice(0,2):Ne.xData)||[]}))||0),this.dataMax-this.dataMin)),R(oe)&&R(we)&&R(J)&&oe-we<J&&(de=this.dataMax-this.dataMin>=J,se=(J-oe+we)/2,xe=[we-se,q(Q.min,we-se)],de&&(xe[2]=ee?ee.log2lin(this.dataMin):this.dataMin),Ce=[(we=x(xe))+J,q(Q.max,we+J)],de&&(Ce[2]=ee?ee.log2lin(this.dataMax):this.dataMax),(oe=A(Ce))-we<J&&(xe[0]=oe-J,xe[1]=q(Q.min,oe-J),we=x(xe))),this.minRange=J,this.min=we,this.max=oe}getClosest(){let Q,ee;if(this.categories)ee=1;else{let oe=[];this.series.forEach(function(we){var se;let J=we.closestPointRange;((se=we.xData)==null?void 0:se.length)===1?oe.push(we.xData[0]):!we.noSharedTooltip&&k(J)&&we.reserveSpace()&&(ee=k(ee)?Math.min(ee,J):J)}),oe.length&&(oe.sort((we,J)=>we-J),Q=V([oe]))}return Q&&ee?Math.min(Q,ee):Q||ee}nameToX(Q){let ee=L(this.options.categories),oe=ee?this.categories:this.names,we=Q.options.x,J;return Q.series.requireSorting=!1,k(we)||(we=this.uniqueNames&&oe?ee?oe.indexOf(Q.name):q(oe.keys[Q.name],-1):Q.series.autoIncrement()),we===-1?!ee&&oe&&(J=oe.length):J=we,J!==void 0?(this.names[J]=Q.name,this.names.keys[Q.name]=J):Q.x&&(J=Q.x),J}updateNames(){let Q=this,ee=this.names;ee.length>0&&(Object.keys(ee.keys).forEach(function(oe){delete ee.keys[oe]}),ee.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(oe=>{oe.xIncrement=null,(!oe.points||oe.isDirtyData)&&(Q.max=Math.max(Q.max,oe.xData.length-1),oe.processData(),oe.generatePoints()),oe.data.forEach(function(we,J){let se;we!=null&&we.options&&we.name!==void 0&&(se=Q.nameToX(we))!==void 0&&se!==we.x&&(we.x=se,oe.xData[J]=se)})}))}setAxisTranslation(){let Q=this,ee=Q.max-Q.min,oe=Q.linkedParent,we=!!Q.categories,J=Q.isXAxis,se=Q.axisPointRange||0,de,xe=0,Ce=0,Ne,Te=Q.transA;(J||we||se)&&(de=Q.getClosest(),oe?(xe=oe.minPointOffset,Ce=oe.pointRangePadding):Q.series.forEach(function(Ie){let Ue=we?1:J?q(Ie.options.pointRange,de,0):Q.axisPointRange||0,qe=Ie.options.pointPlacement;if(se=Math.max(se,Ue),!Q.single||we){let Ae=Ie.is("xrange")?!J:J;xe=Math.max(xe,Ae&&G(qe)?0:Ue/2),Ce=Math.max(Ce,Ae&&qe==="on"?0:Ue)}}),Ne=Q.ordinal&&Q.ordinal.slope&&de?Q.ordinal.slope/de:1,Q.minPointOffset=xe*=Ne,Q.pointRangePadding=Ce*=Ne,Q.pointRange=Math.min(se,Q.single&&we?1:ee),J&&de&&(Q.closestPointRange=de)),Q.translationSlope=Q.transA=Te=Q.staticScale||Q.len/(ee+Ce||1),Q.transB=Q.horiz?Q.left:Q.bottom,Q.minPixelPadding=Te*xe,j(this,"afterSetAxisTranslation")}minFromRange(){let{max:Q,min:ee}=this;return R(Q)&&R(ee)&&Q-ee||void 0}setTickInterval(Q){var Et,Tt,ai,hi;let{categories:ee,chart:oe,dataMax:we,dataMin:J,dateTime:se,isXAxis:de,logarithmic:xe,options:Ce,softThreshold:Ne}=this,Te=R(this.threshold)?this.threshold:void 0,Ie=this.minRange||0,{ceiling:Ue,floor:qe,linkedTo:Ae,softMax:ye,softMin:ge}=Ce,Me=R(Ae)&&((Et=oe[this.coll])==null?void 0:Et[Ae]),De=Ce.tickPixelInterval,Pe=Ce.maxPadding,$e=Ce.minPadding,Ke=0,tt,nt=R(Ce.tickInterval)&&Ce.tickInterval>=0?Ce.tickInterval:void 0,ht,gt,Ct,Lt;if(se||ee||Me||this.getTickAmount(),Ct=q(this.userMin,Ce.min),Lt=q(this.userMax,Ce.max),Me?(this.linkedParent=Me,tt=Me.getExtremes(),this.min=q(tt.min,tt.dataMin),this.max=q(tt.max,tt.dataMax),this.type!==Me.type&&Z(11,!0,oe)):(Ne&&k(Te)&&R(we)&&R(J)&&(J>=Te?(ht=Te,$e=0):we<=Te&&(gt=Te,Pe=0)),this.min=q(Ct,ht,J),this.max=q(Lt,gt,we)),R(this.max)&&R(this.min)&&(xe&&(this.positiveValuesOnly&&!Q&&0>=Math.min(this.min,q(J,this.min))&&Z(10,!0,oe),this.min=T(xe.log2lin(this.min),16),this.max=T(xe.log2lin(this.max),16)),this.range&&R(J)&&(this.userMin=this.min=Ct=Math.max(J,this.minFromRange()||0),this.userMax=Lt=this.max,this.range=void 0)),j(this,"foundExtremes"),this.adjustForMinRange(),R(this.min)&&R(this.max)){if(!R(this.userMin)&&R(ge)&&ge<this.min&&(this.min=Ct=ge),!R(this.userMax)&&R(ye)&&ye>this.max&&(this.max=Lt=ye),ee||this.axisPointRange||(Tt=this.stacking)!=null&&Tt.usePercentage||Me||!(Ke=this.max-this.min)||(!k(Ct)&&$e&&(this.min-=Ke*$e),k(Lt)||!Pe||(this.max+=Ke*Pe)),!R(this.userMin)&&R(qe)&&(this.min=Math.max(this.min,qe)),!R(this.userMax)&&R(Ue)&&(this.max=Math.min(this.max,Ue)),Ne&&R(J)&&R(we)){let qt=Te||0;!k(Ct)&&this.min<qt&&J>=qt?this.min=Ce.minRange?Math.min(qt,this.max-Ie):qt:!k(Lt)&&this.max>qt&&we<=qt&&(this.max=Ce.minRange?Math.max(qt,this.min+Ie):qt)}!oe.polar&&this.min>this.max&&(k(Ce.min)?this.max=this.min:k(Ce.max)&&(this.min=this.max)),Ke=this.max-this.min}if(this.min!==this.max&&R(this.min)&&R(this.max)?Me&&!nt&&De===Me.options.tickPixelInterval?this.tickInterval=nt=Me.tickInterval:this.tickInterval=q(nt,this.tickAmount?Ke/Math.max(this.tickAmount-1,1):void 0,ee?1:Ke*De/Math.max(this.len,De)):this.tickInterval=1,de&&!Q){let qt=this.min!==((ai=this.old)==null?void 0:ai.min)||this.max!==((hi=this.old)==null?void 0:hi.max);this.series.forEach(function(un){var Qi;un.forceCrop=(Qi=un.forceCropping)==null?void 0:Qi.call(un),un.processData(qt)}),j(this,"postProcessData",{hasExtremesChanged:qt})}this.setAxisTranslation(),j(this,"initialAxisTranslation"),this.pointRange&&!nt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let ft=q(Ce.minTickInterval,se&&!this.series.some(qt=>qt.noSharedTooltip)?this.closestPointRange:0);!nt&&this.tickInterval<ft&&(this.tickInterval=ft),se||xe||nt||(this.tickInterval=ke(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var Ne,Te;let Q=this.options,ee=Q.tickPositions,oe=Q.tickPositioner,we=this.getMinorTickInterval(),J=!this.isPanning,se=J&&Q.startOnTick,de=J&&Q.endOnTick,xe=[],Ce;if(this.tickmarkOffset=this.categories&&Q.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&k(this.min)&&!this.tickAmount&&(this.min%1==0||Q.allowDecimals!==!1),ee)xe=ee.slice();else if(R(this.min)&&R(this.max)){if(!((Ne=this.ordinal)!=null&&Ne.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))xe=[this.min,this.max],Z(19,!1,this.chart);else if(this.dateTime)xe=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,Q.units),this.min,this.max,Q.startOfWeek,(Te=this.ordinal)==null?void 0:Te.positions,this.closestPointRange,!0);else if(this.logarithmic)xe=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Ie=this.tickInterval,Ue=Ie;for(;Ue<=2*Ie&&(xe=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&xe.length>this.tickAmount);)this.tickInterval=ke(this,Ue*=1.1)}xe.length>this.len&&(xe=[xe[0],xe[xe.length-1]])[0]===xe[1]&&(xe.length=1),oe&&(this.tickPositions=xe,(Ce=oe.apply(this,[this.min,this.max]))&&(xe=Ce))}this.tickPositions=xe,this.minorTickInterval=we==="auto"&&this.tickInterval?this.tickInterval/Q.minorTicksPerMajor:we,this.paddedTicks=xe.slice(0),this.trimTicks(xe,se,de),!this.isLinked&&R(this.min)&&R(this.max)&&(this.single&&xe.length<2&&!this.categories&&!this.series.some(Ie=>Ie.is("heatmap")&&Ie.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),ee||Ce||this.adjustTickAmount()),j(this,"afterSetTickPositions")}trimTicks(Q,ee,oe){let we=Q[0],J=Q[Q.length-1],se=!this.isOrdinal&&this.minPointOffset||0;if(j(this,"trimTicks"),!this.isLinked){if(ee&&we!==-1/0)this.min=we;else for(;this.min-se>Q[0];)Q.shift();if(oe)this.max=J;else for(;this.max+se<Q[Q.length-1];)Q.pop();Q.length===0&&k(we)&&!this.options.tickPositions&&Q.push((J+we)/2)}}alignToOthers(){let Q,ee=this,oe=ee.chart,we=[this],J=ee.options,se=oe.options.chart,de=this.coll==="yAxis"&&se.alignThresholds,xe=[];if(ee.thresholdAlignment=void 0,(se.alignTicks!==!1&&J.alignTicks||de)&&J.startOnTick!==!1&&J.endOnTick!==!1&&!ee.logarithmic){let Ce=Te=>{let{horiz:Ie,options:Ue}=Te;return[Ie?Ue.left:Ue.top,Ue.width,Ue.height,Ue.pane].join(",")},Ne=Ce(this);oe[this.coll].forEach(function(Te){let{series:Ie}=Te;Ie.length&&Ie.some(Ue=>Ue.visible)&&Te!==ee&&Ce(Te)===Ne&&(Q=!0,we.push(Te))})}if(Q&&de){we.forEach(Ne=>{let Te=Ne.getThresholdAlignment(ee);R(Te)&&xe.push(Te)});let Ce=xe.length>1?xe.reduce((Ne,Te)=>Ne+=Te,0)/xe.length:void 0;we.forEach(Ne=>{Ne.thresholdAlignment=Ce})}return Q}getThresholdAlignment(Q){if((!R(this.dataMin)||this!==Q&&this.series.some(ee=>ee.isDirty||ee.isDirtyData))&&this.getSeriesExtremes(),R(this.threshold)){let ee=D((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(ee=1-ee),ee}}getTickAmount(){let Q=this.options,ee=Q.tickPixelInterval,oe=Q.tickAmount;k(Q.tickInterval)||oe||!(this.len<ee)||this.isRadial||this.logarithmic||!Q.startOnTick||!Q.endOnTick||(oe=2),!oe&&this.alignToOthers()&&(oe=Math.ceil(this.len/ee)+1),oe<4&&(this.finalTickAmt=oe,oe=5),this.tickAmount=oe}adjustTickAmount(){let Q=this,{finalTickAmt:ee,max:oe,min:we,options:J,tickPositions:se,tickAmount:de,thresholdAlignment:xe}=Q,Ce=se==null?void 0:se.length,Ne=q(Q.threshold,Q.softThreshold?0:null),Te,Ie,Ue=Q.tickInterval,qe,Ae=()=>se.push(T(se[se.length-1]+Ue)),ye=()=>se.unshift(T(se[0]-Ue));if(R(xe)&&(qe=xe<.5?Math.ceil(xe*(de-1)):Math.floor(xe*(de-1)),J.reversed&&(qe=de-1-qe)),Q.hasData()&&R(we)&&R(oe)){let ge=()=>{Q.transA*=(Ce-1)/(de-1),Q.min=J.startOnTick?se[0]:Math.min(we,se[0]),Q.max=J.endOnTick?se[se.length-1]:Math.max(oe,se[se.length-1])};if(R(qe)&&R(Q.threshold)){for(;se[qe]!==Ne||se.length!==de||se[0]>we||se[se.length-1]<oe;){for(se.length=0,se.push(Q.threshold);se.length<de;)se[qe]===void 0||se[qe]>Q.threshold?ye():Ae();if(Ue>8*Q.tickInterval)break;Ue*=2}ge()}else if(Ce<de){for(;se.length<de;)se.length%2||we===Ne?Ae():ye();ge()}if(k(ee)){for(Ie=Te=se.length;Ie--;)(ee===3&&Ie%2==1||ee<=2&&Ie>0&&Ie<Te-1)&&se.splice(Ie,1);Q.finalTickAmt=void 0}}}setScale(){var se,de;let{coll:Q,stacking:ee}=this,oe=!1,we=!1;this.series.forEach(xe=>{oe=oe||xe.isDirtyData||xe.isDirty,we=we||xe.xAxis&&xe.xAxis.isDirty||!1}),this.setAxisSize();let J=this.len!==(this.old&&this.old.len);J||oe||we||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(ee&&Q==="yAxis"&&ee.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),ee&&Q==="xAxis"&&ee.buildStacks(),this.isDirty||(this.isDirty=J||this.min!==((se=this.old)==null?void 0:se.min)||this.max!==((de=this.old)==null?void 0:de.max))):ee&&ee.cleanStacks(),oe&&delete this.allExtremes,j(this,"afterSetScale")}setExtremes(Q,ee,oe=!0,we,J){this.series.forEach(se=>{delete se.kdTree}),j(this,"setExtremes",J=K(J,{min:Q,max:ee}),se=>{this.userMin=se.min,this.userMax=se.max,this.eventArgs=se,oe&&this.chart.redraw(we)})}setAxisSize(){let Q=this.chart,ee=this.options,oe=ee.offsets||[0,0,0,0],we=this.horiz,J=this.width=Math.round(ae(q(ee.width,Q.plotWidth-oe[3]+oe[1]),Q.plotWidth)),se=this.height=Math.round(ae(q(ee.height,Q.plotHeight-oe[0]+oe[2]),Q.plotHeight)),de=this.top=Math.round(ae(q(ee.top,Q.plotTop+oe[0]),Q.plotHeight,Q.plotTop)),xe=this.left=Math.round(ae(q(ee.left,Q.plotLeft+oe[3]),Q.plotWidth,Q.plotLeft));this.bottom=Q.chartHeight-se-de,this.right=Q.chartWidth-J-xe,this.len=Math.max(we?J:se,0),this.pos=we?xe:de}getExtremes(){let Q=this.logarithmic;return{min:Q?T(Q.lin2log(this.min)):this.min,max:Q?T(Q.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(Q){let ee=this.logarithmic,oe=ee?ee.lin2log(this.min):this.min,we=ee?ee.lin2log(this.max):this.max;return Q===null||Q===-1/0?Q=oe:Q===1/0?Q=we:oe>Q?Q=oe:we<Q&&(Q=we),this.translate(Q,0,1,0,1)}autoLabelAlign(Q){let ee=(q(Q,0)-90*this.side+720)%360,oe={align:"center"};return j(this,"autoLabelAlign",oe,function(we){ee>15&&ee<165?we.align="right":ee>195&&ee<345&&(we.align="left")}),oe.align}tickSize(Q){let ee=this.options,oe=q(ee[Q==="tick"?"tickWidth":"minorTickWidth"],Q==="tick"&&this.isXAxis&&!this.categories?1:0),we=ee[Q==="tick"?"tickLength":"minorTickLength"],J;oe&&we&&(ee[Q+"Position"]==="inside"&&(we=-we),J=[we,oe]);let se={tickSize:J};return j(this,"afterTickSize",se),se.tickSize}labelMetrics(){let Q=this.chart.renderer,ee=this.ticks,oe=ee[Object.keys(ee)[0]]||{};return this.chart.renderer.fontMetrics(oe.label||oe.movedLabel||Q.box)}unsquish(){let Q=this.options.labels,ee=Q.padding||0,oe=this.horiz,we=this.tickInterval,J=this.len/(((this.categories?1:0)+this.max-this.min)/we),se=Q.rotation,de=T(.8*this.labelMetrics().h),xe=Math.max(this.max-this.min,0),Ce=function(qe){let Ae=(qe+2*ee)/(J||1);return(Ae=Ae>1?Math.ceil(Ae):1)*we>xe&&qe!==1/0&&J!==1/0&&xe&&(Ae=Math.ceil(xe/we)),T(Ae*we)},Ne=we,Te,Ie=Number.MAX_VALUE,Ue;if(oe){if(!Q.staggerLines&&(R(se)?Ue=[se]:J<Q.autoRotationLimit&&(Ue=Q.autoRotation)),Ue){let qe,Ae;for(let ye of Ue)(ye===se||ye&&ye>=-90&&ye<=90)&&(Ae=(qe=Ce(Math.abs(de/Math.sin(S*ye))))+Math.abs(ye/360))<Ie&&(Ie=Ae,Te=ye,Ne=qe)}}else Ne=Ce(.75*de);return this.autoRotation=Ue,this.labelRotation=q(Te,R(se)?se:0),Q.step?we:Ne}getSlotWidth(Q){let ee=this.chart,oe=this.horiz,we=this.options.labels,J=Math.max(this.tickPositions.length-(this.categories?0:1),1),se=ee.margin[3];if(Q&&R(Q.slotWidth))return Q.slotWidth;if(oe&&we.step<2)return we.rotation?0:(this.staggerLines||1)*this.len/J;if(!oe){let de=we.style.width;if(de!==void 0)return parseInt(String(de),10);if(se)return se-ee.spacing[3]}return .33*ee.chartWidth}renderUnsquish(){let Q=this.chart,ee=Q.renderer,oe=this.tickPositions,we=this.ticks,J=this.options.labels,se=J.style,de=this.horiz,xe=this.getSlotWidth(),Ce=Math.max(1,Math.round(xe-(de?2*(J.padding||0):J.distance||0))),Ne={},Te=this.labelMetrics(),Ie=se.textOverflow,Ue,qe,Ae=0,ye,ge;if(G(J.rotation)||(Ne.rotation=J.rotation||0),oe.forEach(function(Me){let De=we[Me];De.movedLabel&&De.replaceMovedLabel(),De&&De.label&&De.label.textPxLength>Ae&&(Ae=De.label.textPxLength)}),this.maxLabelLength=Ae,this.autoRotation)Ae>Ce&&Ae>Te.h?Ne.rotation=this.labelRotation:this.labelRotation=0;else if(xe&&(Ue=Ce,!Ie))for(qe="clip",ge=oe.length;!de&&ge--;)(ye=we[oe[ge]].label)&&(ye.styles.textOverflow==="ellipsis"?ye.css({textOverflow:"clip"}):ye.textPxLength>xe&&ye.css({width:xe+"px"}),ye.getBBox().height>this.len/oe.length-(Te.h-Te.f)&&(ye.specificTextOverflow="ellipsis"));Ne.rotation&&(Ue=Ae>.5*Q.chartHeight?.33*Q.chartHeight:Ae,Ie||(qe="ellipsis")),this.labelAlign=J.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(Ne.align=this.labelAlign),oe.forEach(function(Me){let De=we[Me],Pe=De&&De.label,$e=se.width,Ke={};Pe&&(Pe.attr(Ne),De.shortenLabel?De.shortenLabel():Ue&&!$e&&se.whiteSpace!=="nowrap"&&(Ue<Pe.textPxLength||Pe.element.tagName==="SPAN")?(Ke.width=Ue+"px",Ie||(Ke.textOverflow=Pe.specificTextOverflow||qe),Pe.css(Ke)):!Pe.styles.width||Ke.width||$e||Pe.css({width:null}),delete Pe.specificTextOverflow,De.rotation=Ne.rotation)},this),this.tickRotCorr=ee.rotCorr(Te.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(Q){return Q.hasData()})||this.options.showEmpty&&k(this.min)&&k(this.max)}addTitle(Q){let ee,oe=this.chart.renderer,we=this.horiz,J=this.opposite,se=this.options.title,de=this.chart.styledMode;this.axisTitle||((ee=se.textAlign)||(ee=(we?{low:"left",middle:"center",high:"right"}:{low:J?"right":"left",middle:"center",high:J?"left":"right"})[se.align]),this.axisTitle=oe.text(se.text||"",0,0,se.useHTML).attr({zIndex:7,rotation:se.rotation||0,align:ee}).addClass("highcharts-axis-title"),de||this.axisTitle.css(U(se.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),de||se.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[Q?"show":"hide"](Q)}generateTick(Q){let ee=this.ticks;ee[Q]?ee[Q].addLabel():ee[Q]=new m(this,Q)}createGroups(){let{axisParent:Q,chart:ee,coll:oe,options:we}=this,J=ee.renderer,se=(de,xe,Ce)=>J.g(de).attr({zIndex:Ce}).addClass(`highcharts-${oe.toLowerCase()}${xe} `+(this.isRadial?`highcharts-radial-axis${xe} `:"")+(we.className||"")).add(Q);this.axisGroup||(this.gridGroup=se("grid","-grid",we.gridZIndex),this.axisGroup=se("axis","",we.zIndex),this.labelGroup=se("axis-labels","-labels",we.labels.zIndex))}getOffset(){let Q=this,{chart:ee,horiz:oe,options:we,side:J,ticks:se,tickPositions:de,coll:xe}=Q,Ce=ee.inverted&&!Q.isZAxis?[1,0,3,2][J]:J,Ne=Q.hasData(),Te=we.title,Ie=we.labels,Ue=R(we.crossing),qe=ee.axisOffset,Ae=ee.clipOffset,ye=[-1,1,1,-1][J],ge,Me=0,De,Pe=0,$e=0,Ke,tt;if(Q.showAxis=ge=Ne||we.showEmpty,Q.staggerLines=Q.horiz&&Ie.staggerLines||void 0,Q.createGroups(),Ne||Q.isLinked?(de.forEach(function(nt){Q.generateTick(nt)}),Q.renderUnsquish(),Q.reserveSpaceDefault=J===0||J===2||{1:"left",3:"right"}[J]===Q.labelAlign,q(Ie.reserveSpace,!Ue&&null,Q.labelAlign==="center"||null,Q.reserveSpaceDefault)&&de.forEach(function(nt){$e=Math.max(se[nt].getLabelSize(),$e)}),Q.staggerLines&&($e*=Q.staggerLines),Q.labelOffset=$e*(Q.opposite?-1:1)):H(se,function(nt,ht){nt.destroy(),delete se[ht]}),Te!=null&&Te.text&&Te.enabled!==!1&&(Q.addTitle(ge),ge&&!Ue&&Te.reserveSpace!==!1&&(Q.titleOffset=Me=Q.axisTitle.getBBox()[oe?"height":"width"],Pe=k(De=Te.offset)?0:q(Te.margin,oe?5:10))),Q.renderLine(),Q.offset=ye*q(we.offset,qe[J]?qe[J]+(we.margin||0):0),Q.tickRotCorr=Q.tickRotCorr||{x:0,y:0},tt=J===0?-Q.labelMetrics().h:J===2?Q.tickRotCorr.y:0,Ke=Math.abs($e)+Pe,$e&&(Ke-=tt,Ke+=ye*(oe?q(Ie.y,Q.tickRotCorr.y+ye*Ie.distance):q(Ie.x,ye*Ie.distance))),Q.axisTitleMargin=q(De,Ke),Q.getMaxLabelDimensions&&(Q.maxLabelDimensions=Q.getMaxLabelDimensions(se,de)),xe!=="colorAxis"&&Ae){let nt=this.tickSize("tick");qe[J]=Math.max(qe[J],(Q.axisTitleMargin||0)+Me+ye*Q.offset,Ke,de&&de.length&&nt?nt[0]+ye*Q.offset:0);let ht=!Q.axisLine||we.offset?0:Q.axisLine.strokeWidth()/2;Ae[Ce]=Math.max(Ae[Ce],ht)}j(this,"afterGetOffset")}getLinePath(Q){let ee=this.chart,oe=this.opposite,we=this.offset,J=this.horiz,se=this.left+(oe?this.width:0)+we,de=ee.chartHeight-this.bottom-(oe?this.height:0)+we;return oe&&(Q*=-1),ee.renderer.crispLine([["M",J?this.left:se,J?de:this.top],["L",J?ee.chartWidth-this.right:se,J?de:ee.chartHeight-this.bottom]],Q)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(Q){let ee=this.horiz,oe=this.left,we=this.top,J=this.len,se=this.options.title,de=ee?oe:we,xe=this.opposite,Ce=this.offset,Ne=se.x,Te=se.y,Ie=this.chart.renderer.fontMetrics(Q),Ue=Q?Math.max(Q.getBBox(!1,0).height-Ie.h-1,0):0,qe={low:de+(ee?0:J),middle:de+J/2,high:de+(ee?J:0)}[se.align],Ae=(ee?we+this.height:oe)+(ee?1:-1)*(xe?-1:1)*(this.axisTitleMargin||0)+[-Ue,Ue,Ie.f,-Ue][this.side],ye={x:ee?qe+Ne:Ae+(xe?this.width:0)+Ce+Ne,y:ee?Ae+Te-(xe?this.height:0)+Ce:qe+Te};return j(this,"afterGetTitlePosition",{titlePosition:ye}),ye}renderMinorTick(Q,ee){let oe=this.minorTicks;oe[Q]||(oe[Q]=new m(this,Q,"minor")),ee&&oe[Q].isNew&&oe[Q].render(null,!0),oe[Q].render(null,!1,1)}renderTick(Q,ee,oe){let we=this.isLinked,J=this.ticks;(!we||Q>=this.min&&Q<=this.max||this.grid&&this.grid.isColumn)&&(J[Q]||(J[Q]=new m(this,Q)),oe&&J[Q].isNew&&J[Q].render(ee,!0,-1),J[Q].render(ee))}render(){let Q,ee,oe=this,we=oe.chart,J=oe.logarithmic,se=we.renderer,de=oe.options,xe=oe.isLinked,Ce=oe.tickPositions,Ne=oe.axisTitle,Te=oe.ticks,Ie=oe.minorTicks,Ue=oe.alternateBands,qe=de.stackLabels,Ae=de.alternateGridColor,ye=de.crossing,ge=oe.tickmarkOffset,Me=oe.axisLine,De=oe.showAxis,Pe=y(se.globalAnimation);if(oe.labelEdge.length=0,oe.overlap=!1,[Te,Ie,Ue].forEach(function($e){H($e,function(Ke){Ke.isActive=!1})}),R(ye)){let $e=this.isXAxis?we.yAxis[0]:we.xAxis[0],Ke=[1,-1,-1,1][this.side];if($e){let tt=$e.toPixels(ye,!0);oe.horiz&&(tt=$e.len-tt),oe.offset=Ke*tt}}if(oe.hasData()||xe){let $e=oe.chart.hasRendered&&oe.old&&R(oe.old.min);oe.minorTickInterval&&!oe.categories&&oe.getMinorTickPositions().forEach(function(Ke){oe.renderMinorTick(Ke,$e)}),Ce.length&&(Ce.forEach(function(Ke,tt){oe.renderTick(Ke,tt,$e)}),ge&&(oe.min===0||oe.single)&&(Te[-1]||(Te[-1]=new m(oe,-1,null,!0)),Te[-1].render(-1))),Ae&&Ce.forEach(function(Ke,tt){ee=Ce[tt+1]!==void 0?Ce[tt+1]+ge:oe.max-ge,tt%2==0&&Ke<oe.max&&ee<=oe.max+(we.polar?-ge:ge)&&(Ue[Ke]||(Ue[Ke]=new f.PlotLineOrBand(oe,{})),Q=Ke+ge,Ue[Ke].options={from:J?J.lin2log(Q):Q,to:J?J.lin2log(ee):ee,color:Ae,className:"highcharts-alternate-grid"},Ue[Ke].render(),Ue[Ke].isActive=!0)}),oe._addedPlotLB||(oe._addedPlotLB=!0,(de.plotLines||[]).concat(de.plotBands||[]).forEach(function(Ke){oe.addPlotBandOrLine(Ke)}))}[Te,Ie,Ue].forEach(function($e){let Ke=[],tt=Pe.duration;H($e,function(nt,ht){nt.isActive||(nt.render(ht,!1,0),nt.isActive=!1,Ke.push(ht))}),ce(function(){let nt=Ke.length;for(;nt--;)$e[Ke[nt]]&&!$e[Ke[nt]].isActive&&($e[Ke[nt]].destroy(),delete $e[Ke[nt]])},$e!==Ue&&we.hasRendered&&tt?tt:0)}),Me&&(Me[Me.isPlaced?"animate":"attr"]({d:this.getLinePath(Me.strokeWidth())}),Me.isPlaced=!0,Me[De?"show":"hide"](De)),Ne&&De&&(Ne[Ne.isNew?"attr":"animate"](oe.getTitlePosition(Ne)),Ne.isNew=!1),qe&&qe.enabled&&oe.stacking&&oe.stacking.renderStackTotals(),oe.old={len:oe.len,max:oe.max,min:oe.min,transA:oe.transA,userMax:oe.userMax,userMin:oe.userMin},oe.isDirty=!1,j(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(Q){Q.render()})),this.series.forEach(function(Q){Q.isDirty=!0})}getKeepProps(){return this.keepProps||ve.keepProps}destroy(Q){let ee=this,oe=ee.plotLinesAndBands,we=this.eventOptions;if(j(this,"destroy",{keepEvents:Q}),Q||fe(ee),[ee.ticks,ee.minorTicks,ee.alternateBands].forEach(function(J){N(J)}),oe){let J=oe.length;for(;J--;)oe[J].destroy()}for(let J in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(se){ee[se]&&(ee[se]=ee[se].destroy())}),ee.plotLinesAndBandsGroups)ee.plotLinesAndBandsGroups[J]=ee.plotLinesAndBandsGroups[J].destroy();H(ee,function(J,se){ee.getKeepProps().indexOf(se)===-1&&delete ee[se]}),this.eventOptions=we}drawCrosshair(Q,ee){let oe=this.crosshair,we=q(oe&&oe.snap,!0),J=this.chart,se,de,xe,Ce=this.cross,Ne;if(j(this,"drawCrosshair",{e:Q,point:ee}),Q||(Q=this.cross&&this.cross.e),oe&&(k(ee)||!we)!==!1){if(we?k(ee)&&(de=q(this.coll!=="colorAxis"?ee.crosshairPos:null,this.isXAxis?ee.plotX:this.len-ee.plotY)):de=Q&&(this.horiz?Q.chartX-this.pos:this.len-Q.chartY+this.pos),k(de)&&(Ne={value:ee&&(this.isXAxis?ee.x:q(ee.stackY,ee.y)),translatedValue:de},J.polar&&K(Ne,{isCrosshair:!0,chartX:Q&&Q.chartX,chartY:Q&&Q.chartY,point:ee}),se=this.getPlotLinePath(Ne)||null),!k(se)){this.hideCrosshair();return}xe=this.categories&&!this.isRadial,Ce||(this.cross=Ce=J.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(xe?"category ":"thin ")+(oe.className||"")).attr({zIndex:q(oe.zIndex,2)}).add(),!J.styledMode&&(Ce.attr({stroke:oe.color||(xe?u.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":q(oe.width,1)}).css({"pointer-events":"none"}),oe.dashStyle&&Ce.attr({dashstyle:oe.dashStyle}))),Ce.show().attr({d:se}),xe&&!oe.width&&Ce.attr({"stroke-width":this.transA}),this.cross.e=Q}else this.hideCrosshair();j(this,"afterDrawCrosshair",{e:Q,point:ee})}hideCrosshair(){this.cross&&this.cross.hide(),j(this,"afterHideCrosshair")}update(Q,ee){let oe=this.chart;Q=U(this.userOptions,Q),this.destroy(!0),this.init(oe,Q),oe.isDirtyBox=!0,q(ee,!0)&&oe.redraw()}remove(Q){let ee=this.chart,oe=this.coll,we=this.series,J=we.length;for(;J--;)we[J]&&we[J].remove(!1);W(ee.axes,this),W(ee[oe]||[],this),ee.orderItems(oe),this.destroy(),ee.isDirtyBox=!0,q(Q,!0)&&ee.redraw()}setTitle(Q,ee){this.update({title:Q},ee)}setCategories(Q,ee){this.update({categories:Q},ee)}}return ve.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],ve}),n(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,getMagnitude:r,normalizeTickInterval:p,timeUnits:f}=s;return function(m){function v(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function y(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new _(this))}m.compose=function(b){return b.keepProps.includes("dateTime")||(b.keepProps.push("dateTime"),b.prototype.getTimeTicks=v,u(b,"afterSetType",y)),b};class _{constructor(C){this.axis=C}normalizeTimeTickInterval(C,E){let S=E||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],x=S[S.length-1],A=f[x[0]],D=x[1],T;for(T=0;T<S.length&&(A=f[(x=S[T])[0]],D=x[1],!S[T+1]||!(C<=(A*D[D.length-1]+f[S[T+1][0]])/2));T++);A===f.year&&C<5*A&&(D=[1,2,5]);let k=p(C/A,D,x[0]==="year"?Math.max(r(C/A),1):1);return{unitRange:A,count:k,unitName:x[0]}}getXDateFormat(C,E){let{axis:S}=this,x=S.chart.time;return S.closestPointRange?x.getDateFormat(S.closestPointRange,C,S.options.startOfWeek,E)||x.resolveDTLFormat(E.year).main:x.resolveDTLFormat(E.day).main}}m.Additions=_}(l||(l={})),l}),n(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,normalizeTickInterval:r,pick:p}=s;return function(f){function m(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new y(this))}function v(){let _=this.logarithmic;_&&(this.lin2val=function(b){return _.lin2log(b)},this.val2lin=function(b){return _.log2lin(b)})}f.compose=function(_){return _.keepProps.includes("logarithmic")||(_.keepProps.push("logarithmic"),u(_,"afterSetType",m),u(_,"afterInit",v)),_};class y{constructor(b){this.axis=b}getLogTickPositions(b,C,E,S){let x=this.axis,A=x.len,D=x.options,T=[];if(S||(this.minorAutoInterval=void 0),b>=.5)b=Math.round(b),T=x.getLinearTickPositions(b,C,E);else if(b>=.08){let k,N,W,Z,K,j,V,$=Math.floor(C);for(k=b>.3?[1,2,4]:b>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=$;N<E+1&&!V;N++)for(W=0,Z=k.length;W<Z&&!V;W++)(K=this.log2lin(this.lin2log(N)*k[W]))>C&&(!S||j<=E)&&j!==void 0&&T.push(j),j>E&&(V=!0),j=K}else{let k=this.lin2log(C),N=this.lin2log(E),W=S?x.getMinorTickInterval():D.tickInterval,Z=D.tickPixelInterval/(S?5:1),K=S?A/x.tickPositions.length:A;b=r(b=p(W==="auto"?null:W,this.minorAutoInterval,(N-k)*Z/(K||1))),T=x.getLinearTickPositions(b,k,N).map(this.log2lin),S||(this.minorAutoInterval=b/5)}return S||(x.tickInterval=b),T}lin2log(b){return Math.pow(10,b)}log2lin(b){return Math.log(b)/Math.LN10}}f.Additions=y}(l||(l={})),l}),n(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{erase:u,extend:r,isNumber:p}=s;return function(f){let m;function v(x){return this.addPlotBandOrLine(x,"plotBands")}function y(x,A){let D=this.userOptions,T=new m(this,x);if(this.visible&&(T=T.render()),T){if(this._addedPlotLB||(this._addedPlotLB=!0,(D.plotLines||[]).concat(D.plotBands||[]).forEach(k=>{this.addPlotBandOrLine(k)})),A){let k=D[A]||[];k.push(x),D[A]=k}this.plotLinesAndBands.push(T)}return T}function _(x){return this.addPlotBandOrLine(x,"plotLines")}function b(x,A,D){D=D||this.options;let T=this.getPlotLinePath({value:A,force:!0,acrossPanes:D.acrossPanes}),k=[],N=this.horiz,W=!p(this.min)||!p(this.max)||x<this.min&&A<this.min||x>this.max&&A>this.max,Z=this.getPlotLinePath({value:x,force:!0,acrossPanes:D.acrossPanes}),K,j=1,V;if(Z&&T)for(W&&(V=Z.toString()===T.toString(),j=0),K=0;K<Z.length;K+=2){let $=Z[K],L=Z[K+1],R=T[K],G=T[K+1];($[0]==="M"||$[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&R[1]===$[1]?(R[1]+=j,G[1]+=j):N||R[2]!==$[2]||(R[2]+=j,G[2]+=j),k.push(["M",$[1],$[2]],["L",L[1],L[2]],["L",G[1],G[2]],["L",R[1],R[2]],["Z"])),k.isFlat=V}return k}function C(x){this.removePlotBandOrLine(x)}function E(x){let A=this.plotLinesAndBands,D=this.options,T=this.userOptions;if(A){let k=A.length;for(;k--;)A[k].id===x&&A[k].destroy();[D.plotLines||[],T.plotLines||[],D.plotBands||[],T.plotBands||[]].forEach(function(N){for(k=N.length;k--;)(N[k]||{}).id===x&&u(N,N[k])})}}function S(x){this.removePlotBandOrLine(x)}f.compose=function(x,A){let D=A.prototype;return D.addPlotBand||(m=x,r(D,{addPlotBand:v,addPlotLine:_,addPlotBandOrLine:y,getPlotBandPath:b,removePlotBand:C,removePlotLine:S,removePlotBandOrLine:E})),A}}(l||(l={})),l}),n(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u,arrayMax:r,arrayMin:p,defined:f,destroyObjectProperties:m,erase:v,fireEvent:y,merge:_,objectEach:b,pick:C}=l;class E{static compose(x,A){return u(x,"afterInit",function(){this.labelCollectors.push(()=>{var T;let D=[];for(let k of this.axes)for(let{label:N,options:W}of k.plotLinesAndBands)N&&!((T=W==null?void 0:W.label)!=null&&T.allowOverlap)&&D.push(N);return D})}),s.compose(E,A)}constructor(x,A){this.axis=x,this.options=A,this.id=A.id}render(){y(this,"render");let{axis:x,options:A}=this,{horiz:D,logarithmic:T}=x,{color:k,events:N,zIndex:W=0}=A,Z={},K=x.chart.renderer,j=A.to,V=A.from,$=A.value,L=A.borderWidth,R=A.label,{label:G,svgElem:U}=this,B=[],H,q=f(V)&&f(j),ae=f($),fe=!U,re={class:"highcharts-plot-"+(q?"band ":"line ")+(A.className||"")},ce=q?"bands":"lines";if(!x.chart.styledMode&&(ae?(re.stroke=k||"#999999",re["stroke-width"]=C(A.width,1),A.dashStyle&&(re.dashstyle=A.dashStyle)):q&&(re.fill=k||"#e6e9ff",L&&(re.stroke=A.borderColor,re["stroke-width"]=L))),Z.zIndex=W,ce+="-"+W,(H=x.plotLinesAndBandsGroups[ce])||(x.plotLinesAndBandsGroups[ce]=H=K.g("plot-"+ce).attr(Z).add()),U||(this.svgElem=U=K.path().attr(re).add(H)),f($))B=x.getPlotLinePath({value:(T==null?void 0:T.log2lin($))??$,lineWidth:U.strokeWidth(),acrossPanes:A.acrossPanes});else{if(!(f(V)&&f(j)))return;B=x.getPlotBandPath((T==null?void 0:T.log2lin(V))??V,(T==null?void 0:T.log2lin(j))??j,A)}return!this.eventsAdded&&N&&(b(N,(ke,ve)=>{U==null||U.on(ve,Ee=>{N[ve].apply(this,[Ee])})}),this.eventsAdded=!0),(fe||!U.d)&&(B!=null&&B.length)?U.attr({d:B}):U&&(B?(U.show(),U.animate({d:B})):U.d&&(U.hide(),G&&(this.label=G=G.destroy()))),R&&(f(R.text)||f(R.formatter))&&(B!=null&&B.length)&&x.width>0&&x.height>0&&!B.isFlat?(R=_({align:D&&q?"center":void 0,x:D?!q&&4:10,verticalAlign:!D&&q?"middle":void 0,y:D?q?16:10:q?6:-4,rotation:D&&!q?90:0,...q?{inside:!0}:{}},R),this.renderLabel(R,B,q,W)):G&&G.hide(),this}renderLabel(x,A,D,T){var R;let k=this.axis,N=k.chart.renderer,W=x.inside,Z=this.label;Z||(this.label=Z=N.text(this.getLabelText(x),0,0,x.useHTML).attr({align:x.textAlign||x.align,rotation:x.rotation,class:"highcharts-plot-"+(D?"band":"line")+"-label "+(x.className||""),zIndex:T}),k.chart.styledMode||Z.css(_({fontSize:"0.8em",textOverflow:D&&!W?"":"ellipsis"},x.style)),Z.add());let K=A.xBounds||[A[0][1],A[1][1],D?A[2][1]:A[0][1]],j=A.yBounds||[A[0][2],A[1][2],D?A[2][2]:A[0][2]],V=p(K),$=p(j),L=r(K)-V;Z.align(x,!1,{x:V,y:$,width:L,height:r(j)-$}),(!Z.alignValue||Z.alignValue==="left"||f(W))&&Z.css({width:(((R=x.style)==null?void 0:R.width)||(D&&W?L:Z.rotation===90?k.height-(Z.alignAttr.y-k.top):(x.clip?k.width:k.chart.chartWidth)-(Z.alignAttr.x-k.left)))+"px"}),Z.show(!0)}getLabelText(x){return f(x.formatter)?x.formatter.call(this):x.text}destroy(){v(this.axis.plotLinesAndBands,this),delete this.axis,m(this)}}return E}),n(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){var m;let{animObject:v}=s,{format:y}=l,{composed:_,doc:b,isSafari:C}=u,{distribute:E}=r,{addEvent:S,clamp:x,css:A,discardElement:D,extend:T,fireEvent:k,isArray:N,isNumber:W,isString:Z,merge:K,pick:j,pushUnique:V,splat:$,syncTimeout:L}=f;class R{constructor(U,B,H){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=U,this.init(U,B),this.pointer=H}bodyFormatter(U){return U.map(function(B){let H=B.series.tooltipOptions;return(H[(B.point.formatPrefix||"point")+"Formatter"]||B.point.tooltipFormatter).call(B.point,H[(B.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(U){this.chart.series.forEach(function(B){let H=B&&B.tt;H&&(!H.isActive||U?B.tt=H.destroy():H.isActive=!1)})}defaultFormatter(U){let B,H=this.points||$(this);return(B=(B=[U.tooltipFooterHeaderFormatter(H[0])]).concat(U.bodyFormatter(H))).push(U.tooltipFooterHeaderFormatter(H[0],!0)),B}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),f.clearTimeout(this.hideTimer)}getAnchor(U,B){let H,{chart:q,pointer:ae}=this,fe=q.inverted,re=q.plotTop,ce=q.plotLeft;if((U=$(U))[0].series&&U[0].series.yAxis&&!U[0].series.yAxis.options.reversedStacks&&(U=U.slice().reverse()),this.followPointer&&B)B.chartX===void 0&&(B=ae.normalize(B)),H=[B.chartX-ce,B.chartY-re];else if(U[0].tooltipPos)H=U[0].tooltipPos;else{let ke=0,ve=0;U.forEach(function(Ee){let Q=Ee.pos(!0);Q&&(ke+=Q[0],ve+=Q[1])}),ke/=U.length,ve/=U.length,this.shared&&U.length>1&&B&&(fe?ke=B.chartX:ve=B.chartY),H=[ke-ce,ve-re]}return H.map(Math.round)}getClassName(U,B,H){let q=this.options,ae=U.series,fe=ae.options;return[q.className,"highcharts-label",H&&"highcharts-tooltip-header",B?"highcharts-tooltip-box":"highcharts-tooltip",!H&&"highcharts-color-"+j(U.colorIndex,ae.colorIndex),fe&&fe.className].filter(Z).join(" ")}getLabel({anchorX:U,anchorY:B}={anchorX:0,anchorY:0}){let H=this,q=this.chart.styledMode,ae=this.options,fe=this.split&&this.allowShared,re=this.container,ce=this.chart.renderer;if(this.label){let ke=!this.label.hasClass("highcharts-label");(!fe&&ke||fe&&!ke)&&this.destroy()}if(!this.label){if(this.outside){let ke=this.chart.options.chart.style,ve=p.getRendererType();this.container=re=u.doc.createElement("div"),re.className="highcharts-tooltip-container",A(re,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(ke&&ke.zIndex||0)+3)}),this.renderer=ce=new ve(re,0,0,ke,void 0,void 0,ce.styledMode)}if(fe?this.label=ce.g("tooltip"):(this.label=ce.label("",U,B,ae.shape,void 0,void 0,ae.useHTML,void 0,"tooltip").attr({padding:ae.padding,r:ae.borderRadius}),q||this.label.attr({fill:ae.backgroundColor,"stroke-width":ae.borderWidth||0}).css(ae.style).css({pointerEvents:ae.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),H.outside){let ke=this.label;[ke.xSetter,ke.ySetter].forEach((ve,Ee)=>{ke[Ee?"ySetter":"xSetter"]=Q=>{ve.call(ke,H.distance),ke[Ee?"y":"x"]=Q,re&&(re.style[Ee?"top":"left"]=`${Q}px`)}})}this.label.attr({zIndex:8}).shadow(ae.shadow).add()}return re&&!re.parentElement&&u.doc.body.appendChild(re),this.label}getPlayingField(){let{body:U,documentElement:B}=b,{chart:H,distance:q,outside:ae}=this;return{width:ae?Math.max(U.scrollWidth,B.scrollWidth,U.offsetWidth,B.offsetWidth,B.clientWidth)-2*q:H.chartWidth,height:ae?Math.max(U.scrollHeight,B.scrollHeight,U.offsetHeight,B.offsetHeight,B.clientHeight):H.chartHeight}}getPosition(U,B,H){var Pe,$e;let{distance:q,chart:ae,outside:fe,pointer:re}=this,{inverted:ce,plotLeft:ke,plotTop:ve,polar:Ee}=ae,{plotX:Q=0,plotY:ee=0}=H,oe={},we=ce&&H.h||0,{height:J,width:se}=this.getPlayingField(),de=re.getChartPosition(),xe=Ke=>Ke*de.scaleX,Ce=Ke=>Ke*de.scaleY,Ne=Ke=>{let tt=Ke==="x";return[Ke,tt?se:J,tt?U:B].concat(fe?[tt?xe(U):Ce(B),tt?de.left-q+xe(Q+ke):de.top-q+Ce(ee+ve),0,tt?se:J]:[tt?U:B,tt?Q+ke:ee+ve,tt?ke:ve,tt?ke+ae.plotWidth:ve+ae.plotHeight])},Te=Ne("y"),Ie=Ne("x"),Ue,qe=!!H.negative;!Ee&&(($e=(Pe=ae.hoverSeries)==null?void 0:Pe.yAxis)!=null&&$e.reversed)&&(qe=!qe);let Ae=!this.followPointer&&j(H.ttBelow,!Ee&&!ce===qe),ye=function(Ke,tt,nt,ht,gt,Ct,Lt){let ft=fe?Ke==="y"?Ce(q):xe(q):q,Et=(nt-ht)/2,Tt=ht<gt-q,ai=gt+q+ht<tt,hi=gt-ft-nt+Et,qt=gt+ft-Et;if(Ae&&ai)oe[Ke]=qt;else if(!Ae&&Tt)oe[Ke]=hi;else if(Tt)oe[Ke]=Math.min(Lt-ht,hi-we<0?hi:hi-we);else{if(!ai)return!1;oe[Ke]=Math.max(Ct,qt+we+nt>tt?qt:qt+we)}},ge=function(Ke,tt,nt,ht,gt){if(gt<q||gt>tt-q)return!1;gt<nt/2?oe[Ke]=1:gt>tt-ht/2?oe[Ke]=tt-ht-2:oe[Ke]=gt-nt/2},Me=function(Ke){[Te,Ie]=[Ie,Te],Ue=Ke},De=()=>{ye.apply(0,Te)!==!1?ge.apply(0,Ie)!==!1||Ue||(Me(!0),De()):Ue?oe.x=oe.y=0:(Me(!0),De())};return(ce&&!Ee||this.len>1)&&Me(),De(),oe}hide(U){let B=this;f.clearTimeout(this.hideTimer),U=j(U,this.options.hideDelay),this.isHidden||(this.hideTimer=L(function(){let H=B.getLabel();B.getLabel().animate({opacity:0},{duration:U&&150,complete:()=>{H.hide(),B.container&&B.container.remove()}}),B.isHidden=!0},U))}init(U,B){this.chart=U,this.options=B,this.crosshairs=[],this.isHidden=!0,this.split=B.split&&!U.inverted&&!U.polar,this.shared=B.shared||this.split,this.outside=j(B.outside,!!(U.scrollablePixelsX||U.scrollablePixelsY))}shouldStickOnContact(U){return!!(!this.followPointer&&this.options.stickOnContact&&(!U||this.pointer.inClass(U.target,"highcharts-tooltip")))}move(U,B,H,q){let ae=this,fe=v(!ae.isHidden&&ae.options.animation),re=ae.followPointer||(ae.len||0)>1,ce={x:U,y:B};re||(ce.anchorX=H,ce.anchorY=q),fe.step=()=>ae.drawTracker(),ae.getLabel().animate(ce,fe)}refresh(U,B){let{chart:H,options:q,pointer:ae,shared:fe}=this,re=$(U),ce=re[0],ke=[],ve=q.format,Ee=q.formatter||this.defaultFormatter,Q=H.styledMode,ee={},oe=this.allowShared;if(!q.enabled||!ce.series)return;f.clearTimeout(this.hideTimer),this.allowShared=!(!N(U)&&U.series&&U.series.noSharedTooltip),oe=oe&&!this.allowShared,this.followPointer=!this.split&&ce.series.tooltipOptions.followPointer;let we=this.getAnchor(U,B),J=we[0],se=we[1];fe&&this.allowShared?(ae.applyInactiveState(re),re.forEach(function(Ce){Ce.setState("hover"),ke.push(Ce.getLabelConfig())}),(ee=ce.getLabelConfig()).points=ke):ee=ce.getLabelConfig(),this.len=ke.length;let de=Z(ve)?y(ve,ee,H):Ee.call(ee,this),xe=ce.series;if(this.distance=j(xe.tooltipOptions.distance,16),de===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(de,re);else{let Ce=J,Ne=se;if(B&&ae.isDirectTouch&&(Ce=B.chartX-H.plotLeft,Ne=B.chartY-H.plotTop),H.polar||xe.options.clip===!1||re.some(Te=>ae.isDirectTouch||Te.series.shouldShowTooltip(Ce,Ne))){let Te=this.getLabel(oe&&this.tt||{});(!q.style.width||Q)&&Te.css({width:(this.outside?this.getPlayingField():H.spacingBox).width+"px"}),Te.attr({class:this.getClassName(ce),text:de&&de.join?de.join(""):de}),this.outside&&Te.attr({x:x(Te.x||0,0,this.getPlayingField().width-(Te.width||0))}),Q||Te.attr({stroke:q.borderColor||ce.color||xe.color||"#666666"}),this.updatePosition({plotX:J,plotY:se,negative:ce.negative,ttBelow:ce.ttBelow,h:we[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}k(this,"refresh")}renderSplit(U,B){var tt;let H=this,{chart:q,chart:{chartWidth:ae,chartHeight:fe,plotHeight:re,plotLeft:ce,plotTop:ke,scrollablePixelsY:ve=0,scrollablePixelsX:Ee,styledMode:Q},distance:ee,options:oe,options:{positioner:we},pointer:J}=H,{scrollLeft:se=0,scrollTop:de=0}=((tt=q.scrollablePlotArea)==null?void 0:tt.scrollingContainer)||{},xe=H.outside&&typeof Ee!="number"?b.documentElement.getBoundingClientRect():{left:se,right:se+ae,top:de,bottom:de+fe},Ce=H.getLabel(),Ne=this.renderer||q.renderer,Te=!!(q.xAxis[0]&&q.xAxis[0].opposite),{left:Ie,top:Ue}=J.getChartPosition(),qe=ke+de,Ae=0,ye=re-ve;function ge(nt,ht,gt,Ct,Lt=!0){let ft,Et;return gt?(ft=Te?0:ye,Et=x(nt-Ct/2,xe.left,xe.right-Ct-(H.outside?Ie:0))):(ft=ht-qe,Et=x(Et=Lt?nt-Ct-ee:nt+ee,Lt?Et:xe.left,xe.right)),{x:Et,y:ft}}Z(U)&&(U=[!1,U]);let Me=U.slice(0,B.length+1).reduce(function(nt,ht,gt){if(ht!==!1&&ht!==""){let Ct=B[gt-1]||{isHeader:!0,plotX:B[0].plotX,plotY:re,series:{}},Lt=Ct.isHeader,ft=Lt?H:Ct.series,Et=ft.tt=function(un,Qi,bn){let Bn=un,{isHeader:an,series:dt}=Qi;if(!Bn){let vt={padding:oe.padding,r:oe.borderRadius};Q||(vt.fill=oe.backgroundColor,vt["stroke-width"]=oe.borderWidth??1),Bn=Ne.label("",0,0,oe[an?"headerShape":"shape"],void 0,void 0,oe.useHTML).addClass(H.getClassName(Qi,!0,an)).attr(vt).add(Ce)}return Bn.isActive=!0,Bn.attr({text:bn}),Q||Bn.css(oe.style).attr({stroke:oe.borderColor||Qi.color||dt.color||"#333333"}),Bn}(ft.tt,Ct,ht.toString()),Tt=Et.getBBox(),ai=Tt.width+Et.strokeWidth();Lt&&(Ae=Tt.height,ye+=Ae,Te&&(qe-=Ae));let{anchorX:hi,anchorY:qt}=function(un){let Qi,bn,{isHeader:Bn,plotX:an=0,plotY:dt=0,series:vt}=un;if(Bn)Qi=Math.max(ce+an,ce),bn=ke+re/2;else{let{xAxis:It,yAxis:Ft}=vt;Qi=It.pos+x(an,-ee,It.len+ee),vt.shouldShowTooltip(0,Ft.pos-ke+dt,{ignoreX:!0})&&(bn=Ft.pos+dt)}return{anchorX:Qi=x(Qi,xe.left-ee,xe.right+ee),anchorY:bn}}(Ct);if(typeof qt=="number"){let un=Tt.height+1,Qi=we?we.call(H,ai,un,Ct):ge(hi,qt,Lt,ai);nt.push({align:we?0:void 0,anchorX:hi,anchorY:qt,boxWidth:ai,point:Ct,rank:j(Qi.rank,Lt?1:0),size:un,target:Qi.y,tt:Et,x:Qi.x})}else Et.isActive=!1}return nt},[]);!we&&Me.some(nt=>{let{outside:ht}=H,gt=(ht?Ie:0)+nt.anchorX;return gt<xe.left&&gt+nt.boxWidth<xe.right||gt<Ie-xe.left+nt.boxWidth&&xe.right-gt>gt})&&(Me=Me.map(nt=>{let{x:ht,y:gt}=ge(nt.anchorX,nt.anchorY,nt.point.isHeader,nt.boxWidth,!1);return T(nt,{target:gt,x:ht})})),H.cleanSplit(),E(Me,ye);let De={left:Ie,right:Ie};Me.forEach(function(nt){let{x:ht,boxWidth:gt,isHeader:Ct}=nt;!Ct&&(H.outside&&Ie+ht<De.left&&(De.left=Ie+ht),!Ct&&H.outside&&De.left+gt>De.right&&(De.right=Ie+ht))}),Me.forEach(function(nt){let{x:ht,anchorX:gt,anchorY:Ct,pos:Lt,point:{isHeader:ft}}=nt,Et={visibility:Lt===void 0?"hidden":"inherit",x:ht,y:(Lt||0)+qe,anchorX:gt,anchorY:Ct};if(H.outside&&ht<gt){let Tt=Ie-De.left;Tt>0&&(ft||(Et.x=ht+Tt,Et.anchorX=gt+Tt),ft&&(Et.x=(De.right-De.left)/2,Et.anchorX=gt+Tt))}nt.tt.attr(Et)});let{container:Pe,outside:$e,renderer:Ke}=H;if($e&&Pe&&Ke){let{width:nt,height:ht,x:gt,y:Ct}=Ce.getBBox();Ke.setSize(nt+gt,ht+Ct,!1),Pe.style.left=De.left+"px",Pe.style.top=Ue+"px"}C&&Ce.attr({opacity:Ce.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let U=this.chart,B=this.label,H=this.shared?U.hoverPoints:U.hoverPoint;if(!B||!H)return;let q={x:0,y:0,width:0,height:0},ae=this.getAnchor(H),fe=B.getBBox();ae[0]+=U.plotLeft-(B.translateX||0),ae[1]+=U.plotTop-(B.translateY||0),q.x=Math.min(0,ae[0]),q.y=Math.min(0,ae[1]),q.width=ae[0]<0?Math.max(Math.abs(ae[0]),fe.width-ae[0]):Math.max(Math.abs(ae[0]),fe.width),q.height=ae[1]<0?Math.max(Math.abs(ae[1]),fe.height-Math.abs(ae[1])):Math.max(Math.abs(ae[1]),fe.height),this.tracker?this.tracker.attr(q):(this.tracker=B.renderer.rect(q).addClass("highcharts-tracker").add(B),U.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(U){return U.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(U,B){let H=U.series,q=H.tooltipOptions,ae=H.xAxis,fe=ae&&ae.dateTime,re={isFooter:B,labelConfig:U},ce=q.xDateFormat,ke=q[B?"footerFormat":"headerFormat"];return k(this,"headerFormatter",re,function(ve){fe&&!ce&&W(U.key)&&(ce=fe.getXDateFormat(U.key,q.dateTimeLabelFormats)),fe&&ce&&(U.point&&U.point.tooltipDateKeys||["key"]).forEach(function(Ee){ke=ke.replace("{point."+Ee+"}","{point."+Ee+":"+ce+"}")}),H.chart.styledMode&&(ke=this.styledModeFormat(ke)),ve.text=y(ke,{point:U,series:H},this.chart)}),re.text}update(U){this.destroy(),this.init(this.chart,K(!0,this.options,U))}updatePosition(U){let{chart:B,container:H,distance:q,options:ae,pointer:fe,renderer:re}=this,{height:ce=0,width:ke=0}=this.getLabel(),{left:ve,top:Ee,scaleX:Q,scaleY:ee}=fe.getChartPosition(),oe=(ae.positioner||this.getPosition).call(this,ke,ce,U),we=(U.plotX||0)+B.plotLeft,J=(U.plotY||0)+B.plotTop,se;re&&H&&(ae.positioner&&(oe.x+=ve-q,oe.y+=Ee-q),se=(ae.borderWidth||0)+2*q+2,re.setSize(ke+se,ce+se,!1),(Q!==1||ee!==1)&&(A(H,{transform:`scale(${Q}, ${ee})`}),we*=Q,J*=ee),we+=ve-oe.x,J+=Ee-oe.y),this.move(Math.round(oe.x),Math.round(oe.y||0),we,J)}}return(m=R).compose=function(G){V(_,"Core.Tooltip")&&S(G,"afterInit",function(){let U=this.chart;U.options.tooltip&&(U.tooltip=new m(U,U.options.tooltip,this))})},R}),n(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{animObject:f}=l,{defaultOptions:m}=u,{format:v}=r,{addEvent:y,crisp:_,erase:b,extend:C,fireEvent:E,getNestedProperty:S,isArray:x,isFunction:A,isNumber:D,isObject:T,merge:k,pick:N,syncTimeout:W,removeEvent:Z,uniqueKey:K}=p;class j{animateBeforeDestroy(){let $=this,L={x:$.startXPos,opacity:0},R=$.getGraphicalProps();R.singular.forEach(function(G){$[G]=$[G].animate(G==="dataLabel"?{x:$[G].startXPos,y:$[G].startYPos,opacity:0}:L)}),R.plural.forEach(function(G){$[G].forEach(function(U){U.element&&U.animate(C({x:$.startXPos},U.startYPos?{x:U.startXPos,y:U.startYPos}:{}))})})}applyOptions($,L){let R=this.series,G=R.options.pointValKey||R.pointValKey;return C(this,$=j.prototype.optionsToObject.call(this,$)),this.options=this.options?C(this.options,$):$,$.group&&delete this.group,$.dataLabels&&delete this.dataLabels,G&&(this.y=j.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&L===void 0&&R.xAxis&&R.xAxis.hasNames&&(this.x=R.xAxis.nameToX(this)),this.x===void 0&&R?this.x=L??R.autoIncrement():D($.x)&&R.options.relativeXValue&&(this.x=R.autoIncrement($.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let $=this,L=$.series,R=L.chart,G=L.options.dataSorting,U=R.hoverPoints,B=f($.series.chart.renderer.globalAnimation),H=()=>{for(let q in($.graphic||$.graphics||$.dataLabel||$.dataLabels)&&(Z($),$.destroyElements()),$)delete $[q]};$.legendItem&&R.legend.destroyItem($),U&&($.setState(),b(U,$),U.length||(R.hoverPoints=null)),$===R.hoverPoint&&$.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),W(H,B.duration)):H(),R.pointCount--}this.destroyed=!0}destroyElements($){let L=this,R=L.getGraphicalProps($);R.singular.forEach(function(G){L[G]=L[G].destroy()}),R.plural.forEach(function(G){L[G].forEach(function(U){U&&U.element&&U.destroy()}),delete L[G]})}firePointEvent($,L,R){let G=this,U=this.series.options;G.manageEvent($),$==="click"&&U.allowPointSelect&&(R=function(B){!G.destroyed&&G.select&&G.select(null,B.ctrlKey||B.metaKey||B.shiftKey)}),E(G,$,L,R)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps($){let L,R,G=this,U=[],B={singular:[],plural:[]};for(($=$||{graphic:1,dataLabel:1}).graphic&&U.push("graphic","connector"),$.dataLabel&&U.push("dataLabel","dataLabelPath","dataLabelUpper"),R=U.length;R--;)G[L=U[R]]&&B.singular.push(L);return["graphic","dataLabel"].forEach(function(H){let q=H+"s";$[H]&&G[q]&&B.plural.push(q)}),B}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty($){return $?$.indexOf("custom.")===0?S($,this.options):this[$]:void 0}getZone(){let $=this.series,L=$.zones,R=$.zoneAxis||"y",G,U=0;for(G=L[0];this[R]>=G.value;)G=L[++U];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor($,L,R){this.formatPrefix="point",this.visible=!0,this.series=$,this.applyOptions(L,R),this.id??(this.id=K()),this.resolveColor(),$.chart.pointCount++,E(this,"afterInit")}isValid(){return(D(this.x)||this.x instanceof Date)&&D(this.y)}optionsToObject($){let L=this.series,R=L.options.keys,G=R||L.pointArrayMap||["y"],U=G.length,B={},H,q=0,ae=0;if(D($)||$===null)B[G[0]]=$;else if(x($))for(!R&&$.length>U&&((H=typeof $[0])=="string"?B.name=$[0]:H==="number"&&(B.x=$[0]),q++);ae<U;)R&&$[q]===void 0||(G[ae].indexOf(".")>0?j.prototype.setNestedProperty(B,$[q],G[ae]):B[G[ae]]=$[q]),q++,ae++;else typeof $=="object"&&(B=$,$.dataLabels&&(L.hasDataLabels=()=>!0),$.marker&&(L._hasPointMarkers=!0));return B}pos($,L=this.plotY){if(!this.destroyed){let{plotX:R,series:G}=this,{chart:U,xAxis:B,yAxis:H}=G,q=0,ae=0;if(D(R)&&D(L))return $&&(q=B?B.pos:U.plotLeft,ae=H?H.pos:U.plotTop),U.inverted&&B&&H?[H.len-L+ae,B.len-R+q]:[R+q,L+ae]}}resolveColor(){let $=this.series,L=$.chart.options.chart,R=$.chart.styledMode,G,U,B=L.colorCount,H;delete this.nonZonedColor,$.options.colorByPoint?(R||(G=(U=$.options.colors||$.chart.options.colors)[$.colorCounter],B=U.length),H=$.colorCounter,$.colorCounter++,$.colorCounter===B&&($.colorCounter=0)):(R||(G=$.color),H=$.colorIndex),this.colorIndex=N(this.options.colorIndex,H),this.color=N(this.options.color,G)}setNestedProperty($,L,R){return R.split(".").reduce(function(G,U,B,H){let q=H.length-1===B;return G[U]=q?L:T(G[U],!0)?G[U]:{},G[U]},$),$}shouldDraw(){return!this.isNull}tooltipFormatter($){let L=this.series,R=L.tooltipOptions,G=N(R.valueDecimals,""),U=R.valuePrefix||"",B=R.valueSuffix||"";return L.chart.styledMode&&($=L.chart.tooltip.styledModeFormat($)),(L.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,(U||B)&&($=$.replace(RegExp(H+"}","g"),U+H+"}"+B)),$=$.replace(RegExp(H+"}","g"),H+":,."+G+"f}")}),v($,{point:this,series:this.series},L.chart)}update($,L,R,G){let U,B=this,H=B.series,q=B.graphic,ae=H.chart,fe=H.options;function re(){B.applyOptions($);let ce=q&&B.hasMockGraphic,ke=B.y===null?!ce:ce;q&&ke&&(B.graphic=q.destroy(),delete B.hasMockGraphic),T($,!0)&&(q&&q.element&&$&&$.marker&&$.marker.symbol!==void 0&&(B.graphic=q.destroy()),$!=null&&$.dataLabels&&B.dataLabel&&(B.dataLabel=B.dataLabel.destroy())),U=B.index,H.updateParallelArrays(B,U),fe.data[U]=T(fe.data[U],!0)||T($,!0)?B.options:N($,fe.data[U]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(ae.isDirtyBox=!0),fe.legendType==="point"&&(ae.isDirtyLegend=!0),L&&ae.redraw(R)}L=N(L,!0),G===!1?re():B.firePointEvent("update",{options:$},re)}remove($,L){this.series.removePoint(this.series.data.indexOf(this),$,L)}select($,L){let R=this,G=R.series,U=G.chart;$=N($,!R.selected),this.selectedStaging=$,R.firePointEvent($?"select":"unselect",{accumulate:L},function(){R.selected=R.options.selected=$,G.options.data[G.data.indexOf(R)]=R.options,R.setState($&&"select"),L||U.getSelectedPoints().forEach(function(B){let H=B.series;B.selected&&B!==R&&(B.selected=B.options.selected=!1,H.options.data[H.data.indexOf(B)]=B.options,B.setState(U.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),B.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver($){let{inverted:L,pointer:R}=this.series.chart;R&&($=$?R.normalize($):R.getChartCoordinatesFromPoint(this,L),R.runPointActions($,this))}onMouseOut(){let $=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||($.hoverPoints||[]).forEach(function(L){L.setState()}),$.hoverPoints=$.hoverPoint=null}manageEvent($){var G,U,B,H,q,ae;let L=k(this.series.options.point,this.options),R=(G=L.events)==null?void 0:G[$];A(R)&&(!((U=this.hcEvents)!=null&&U[$])||((H=(B=this.hcEvents)==null?void 0:B[$])==null?void 0:H.map(fe=>fe.fn).indexOf(R))===-1)?((q=this.importedUserEvent)==null||q.call(this),this.importedUserEvent=y(this,$,R)):this.importedUserEvent&&!R&&((ae=this.hcEvents)!=null&&ae[$])&&(Z(this,$),delete this.hcEvents[$],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState($,L){var de;let R=this.series,G=this.state,U=R.options.states[$||"normal"]||{},B=m.plotOptions[R.type].marker&&R.options.marker,H=B&&B.enabled===!1,q=B&&B.states&&B.states[$||"normal"]||{},ae=q.enabled===!1,fe=this.marker||{},re=R.chart,ce=B&&R.markerAttribs,ke=R.halo,ve,Ee,Q,ee=R.stateMarkerGraphic,oe;if(($=$||"")===this.state&&!L||this.selected&&$!=="select"||U.enabled===!1||$&&(ae||H&&q.enabled===!1)||$&&fe.states&&fe.states[$]&&fe.states[$].enabled===!1)return;if(this.state=$,ce&&(ve=R.markerAttribs(this,$)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),$&&this.graphic.addClass("highcharts-point-"+$),!re.styledMode){Ee=R.pointAttribs(this,$),Q=N(re.options.chart.animation,U.animation);let xe=Ee.opacity;R.options.inactiveOtherPoints&&D(xe)&&(this.dataLabels||[]).forEach(function(Ce){Ce&&!Ce.hasClass("highcharts-data-label-hidden")&&(Ce.animate({opacity:xe},Q),Ce.connector&&Ce.connector.animate({opacity:xe},Q))}),this.graphic.animate(Ee,Q)}ve&&this.graphic.animate(ve,N(re.options.chart.animation,q.animation,B.animation)),ee&&ee.hide()}else $&&q&&(oe=fe.symbol||R.symbol,ee&&ee.currentSymbol!==oe&&(ee=ee.destroy()),ve&&(ee?ee[L?"animate":"attr"]({x:ve.x,y:ve.y}):oe&&(R.stateMarkerGraphic=ee=re.renderer.symbol(oe,ve.x,ve.y,ve.width,ve.height).add(R.markerGroup),ee.currentSymbol=oe)),!re.styledMode&&ee&&this.state!=="inactive"&&ee.attr(R.pointAttribs(this,$))),ee&&(ee[$&&this.isInside?"show":"hide"](),ee.element.point=this,ee.addClass(this.getClassName(),!0));let we=U.halo,J=this.graphic||ee,se=J&&J.visibility||"inherit";we&&we.size&&J&&se!=="hidden"&&!this.isCluster?(ke||(R.halo=ke=re.renderer.path().add(J.parentGroup)),ke.show()[L?"animate":"attr"]({d:this.haloPath(we.size)}),ke.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,R.colorIndex)+(this.className?" "+this.className:""),visibility:se,zIndex:-1}),ke.point=this,re.styledMode||ke.attr(C({fill:this.color||R.color,"fill-opacity":we.opacity},s.filterUserAttributes(we.attributes||{})))):(de=ke==null?void 0:ke.point)!=null&&de.haloPath&&!ke.point.destroyed&&ke.animate({d:ke.point.haloPath(0)},null,ke.hide),E(this,"afterSetState",{state:$})}haloPath($){let L=this.pos();return L?this.series.chart.renderer.symbols.circle(_(L[0],1)-$,L[1]-$,2*$,2*$):[]}}return j}),n(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{parse:p}=s,{charts:f,composed:m,isTouchDevice:v}=l,{addEvent:y,attr:_,css:b,extend:C,find:E,fireEvent:S,isNumber:x,isObject:A,objectEach:D,offset:T,pick:k,pushUnique:N,splat:W}=u;class Z{applyInactiveState(j){let V=[],$;(j||[]).forEach(function(L){$=L.series,V.push($),$.linkedParent&&V.push($.linkedParent),$.linkedSeries&&(V=V.concat($.linkedSeries)),$.navigatorSeries&&V.push($.navigatorSeries)}),this.chart.series.forEach(function(L){V.indexOf(L)===-1?L.setState("inactive",!0):L.options.inactiveOtherPoints&&L.setAllPointsToState("inactive")})}destroy(){let j=this;this.eventsToUnbind.forEach(V=>V()),this.eventsToUnbind=[],!l.chartCount&&(Z.unbindDocumentMouseUp&&Z.unbindDocumentMouseUp.forEach(V=>V()),Z.unbindDocumentTouchEnd&&(Z.unbindDocumentTouchEnd=Z.unbindDocumentTouchEnd())),clearInterval(j.tooltipTimeout),D(j,function(V,$){j[$]=void 0})}getSelectionMarkerAttrs(j,V){let $={args:{chartX:j,chartY:V},attrs:{},shapeType:"rect"};return S(this,"getSelectionMarkerAttrs",$,L=>{let R,{chart:G,zoomHor:U,zoomVert:B}=this,{mouseDownX:H=0,mouseDownY:q=0}=G,ae=L.attrs;ae.x=G.plotLeft,ae.y=G.plotTop,ae.width=U?1:G.plotWidth,ae.height=B?1:G.plotHeight,U&&(R=j-H,ae.width=Math.max(1,Math.abs(R)),ae.x=(R>0?0:R)+H),B&&(R=V-q,ae.height=Math.max(1,Math.abs(R)),ae.y=(R>0?0:R)+q)}),$}drag(j){let{chart:V}=this,{mouseDownX:$=0,mouseDownY:L=0}=V,{panning:R,panKey:G,selectionMarkerFill:U}=V.options.chart,B=V.plotLeft,H=V.plotTop,q=V.plotWidth,ae=V.plotHeight,fe=A(R)?R.enabled:R,re=G&&j[`${G}Key`],ce=j.chartX,ke=j.chartY,ve,Ee=this.selectionMarker;if((!Ee||!Ee.touch)&&(ce<B?ce=B:ce>B+q&&(ce=B+q),ke<H?ke=H:ke>H+ae&&(ke=H+ae),this.hasDragged=Math.sqrt(Math.pow($-ce,2)+Math.pow(L-ke,2)),this.hasDragged>10)){ve=V.isInsidePlot($-B,L-H,{visiblePlotOnly:!0});let{shapeType:Q,attrs:ee}=this.getSelectionMarkerAttrs(ce,ke);(V.hasCartesianSeries||V.mapView)&&this.hasZoom&&ve&&!re&&!Ee&&(this.selectionMarker=Ee=V.renderer[Q](),Ee.attr({class:"highcharts-selection-marker",zIndex:7}).add(),V.styledMode||Ee.attr({fill:U||p("#334eff").setOpacity(.25).get()})),Ee&&Ee.attr(ee),ve&&!Ee&&fe&&V.pan(j,R)}}dragStart(j){let V=this.chart;V.mouseIsDown=j.type,V.cancelClick=!1,V.mouseDownX=j.chartX,V.mouseDownY=j.chartY}getSelectionBox(j){let V={args:{marker:j},result:j.getBBox()};return S(this,"getSelectionBox",V),V.result}drop(j){let V,{chart:$,selectionMarker:L}=this;for(let R of $.axes)R.isPanning&&(R.isPanning=!1,(R.options.startOnTick||R.options.endOnTick||R.series.some(G=>G.boosted))&&(R.forceRedraw=!0,R.setExtremes(R.userMin,R.userMax,!1),V=!0));if(V&&$.redraw(),L&&j){if(this.hasDragged){let R=this.getSelectionBox(L);$.transform({axes:$.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:j,xAxis:[],yAxis:[],...R},from:R})}x($.index)&&(this.selectionMarker=L.destroy())}$&&x($.index)&&(b($.container,{cursor:$._cursor}),$.cancelClick=this.hasDragged>10,$.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(j,V,$){let L;return j.forEach(function(R){let G=!(R.noSharedTooltip&&V)&&0>R.options.findNearestPointBy.indexOf("y"),U=R.searchPoint($,G);A(U,!0)&&U.series&&(!A(L,!0)||function(B,H){var re,ce;let q=B.distX-H.distX,ae=B.dist-H.dist,fe=((re=H.series.group)==null?void 0:re.zIndex)-((ce=B.series.group)==null?void 0:ce.zIndex);return q!==0&&V?q:ae!==0?ae:fe!==0?fe:B.series.index>H.series.index?-1:1}(L,U)>0)&&(L=U)}),L}getChartCoordinatesFromPoint(j,V){let{xAxis:$,yAxis:L}=j.series,R=j.shapeArgs;if($&&L){let G=j.clientX??j.plotX??0,U=j.plotY||0;return j.isNode&&R&&x(R.x)&&x(R.y)&&(G=R.x,U=R.y),V?{chartX:L.len+L.pos-U,chartY:$.len+$.pos-G}:{chartX:G+$.pos,chartY:U+L.pos}}if(R&&R.x&&R.y)return{chartX:R.x,chartY:R.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:j}=this.chart,V=T(j);this.chartPosition={left:V.left,top:V.top,scaleX:1,scaleY:1};let{offsetHeight:$,offsetWidth:L}=j;return L>2&&$>2&&(this.chartPosition.scaleX=V.width/L,this.chartPosition.scaleY=V.height/$),this.chartPosition}getCoordinates(j){let V={xAxis:[],yAxis:[]};for(let $ of this.chart.axes)V[$.isXAxis?"xAxis":"yAxis"].push({axis:$,value:$.toValue(j[$.horiz?"chartX":"chartY"])});return V}getHoverData(j,V,$,L,R,G){let U=[],B=function(re){return re.visible&&!(!R&&re.directTouch)&&k(re.options.enableMouseTracking,!0)},H=V,q,ae={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:R};S(this,"beforeGetHoverData",ae),q=H&&!H.stickyTracking?[H]:$.filter(re=>re.stickyTracking&&(ae.filter||B)(re));let fe=L&&j||!G?j:this.findNearestKDPoint(q,R,G);return H=fe&&fe.series,fe&&(R&&!H.noSharedTooltip?(q=$.filter(function(re){return ae.filter?ae.filter(re):B(re)&&!re.noSharedTooltip})).forEach(function(re){let ce=E(re.points,function(ke){return ke.x===fe.x&&!ke.isNull});A(ce)&&(re.boosted&&re.boost&&(ce=re.boost.getPoint(ce)),U.push(ce))}):U.push(fe)),S(this,"afterGetHoverData",ae={hoverPoint:fe}),{hoverPoint:ae.hoverPoint,hoverSeries:H,hoverPoints:U}}getPointFromEvent(j){let V=j.target,$;for(;V&&!$;)$=V.point,V=V.parentNode;return $}onTrackerMouseOut(j){let V=this.chart,$=j.relatedTarget,L=V.hoverSeries;this.isDirectTouch=!1,!L||!$||L.stickyTracking||this.inClass($,"highcharts-tooltip")||this.inClass($,"highcharts-series-"+L.index)&&this.inClass($,"highcharts-tracker")||L.onMouseOut()}inClass(j,V){let $=j,L;for(;$;){if(L=_($,"class")){if(L.indexOf(V)!==-1)return!0;if(L.indexOf("highcharts-container")!==-1)return!1}$=$.parentElement}}constructor(j,V){var $;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=V,this.chart=j,this.runChartClick=!!(($=V.chart.events)!=null&&$.click),this.pinchDown=[],this.setDOMEvents(),S(this,"afterInit")}normalize(j,V){let $=j.touches,L=$?$.length?$.item(0):k($.changedTouches,j.changedTouches)[0]:j;V||(V=this.getChartPosition());let R=L.pageX-V.left,G=L.pageY-V.top;return C(j,{chartX:Math.round(R/=V.scaleX),chartY:Math.round(G/=V.scaleY)})}onContainerClick(j){let V=this.chart,$=V.hoverPoint,L=this.normalize(j),R=V.plotLeft,G=V.plotTop;!V.cancelClick&&($&&this.inClass(L.target,"highcharts-tracker")?(S($.series,"click",C(L,{point:$})),V.hoverPoint&&$.firePointEvent("click",L)):(C(L,this.getCoordinates(L)),V.isInsidePlot(L.chartX-R,L.chartY-G,{visiblePlotOnly:!0})&&S(V,"click",L)))}onContainerMouseDown(j){var $;let V=(1&(j.buttons||j.button))==1;j=this.normalize(j),l.isFirefox&&j.button!==0&&this.onContainerMouseMove(j),(j.button===void 0||V)&&(this.zoomOption(j),V&&(($=j.preventDefault)==null||$.call(j)),this.dragStart(j))}onContainerMouseLeave(j){let{pointer:V}=f[k(Z.hoverChartIndex,-1)]||{};j=this.normalize(j),this.onContainerMouseMove(j),V&&!this.inClass(j.relatedTarget,"highcharts-tooltip")&&(V.reset(),V.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(j){let V=this.chart,$=V.tooltip,L=this.normalize(j);this.setHoverChartIndex(j),(V.mouseIsDown==="mousedown"||this.touchSelect(L))&&this.drag(L),!V.openMenu&&(this.inClass(L.target,"highcharts-tracker")||V.isInsidePlot(L.chartX-V.plotLeft,L.chartY-V.plotTop,{visiblePlotOnly:!0}))&&!($&&$.shouldStickOnContact(L))&&(this.inClass(L.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(L))}onDocumentTouchEnd(j){this.onDocumentMouseUp(j)}onContainerTouchMove(j){this.touchSelect(j)?this.onContainerMouseMove(j):this.touch(j)}onContainerTouchStart(j){this.touchSelect(j)?this.onContainerMouseDown(j):(this.zoomOption(j),this.touch(j,!0))}onDocumentMouseMove(j){let V=this.chart,$=V.tooltip,L=this.chartPosition,R=this.normalize(j,L);!L||V.isInsidePlot(R.chartX-V.plotLeft,R.chartY-V.plotTop,{visiblePlotOnly:!0})||$&&$.shouldStickOnContact(R)||R.target!==V.container.ownerDocument&&this.inClass(R.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(j){var V,$;($=(V=f[k(Z.hoverChartIndex,-1)])==null?void 0:V.pointer)==null||$.drop(j)}pinch(j){let V=this,{chart:$,hasZoom:L,lastTouches:R}=V,G=[].map.call(j.touches||[],ae=>V.normalize(ae)),U=G.length,B=U===1&&(V.inClass(j.target,"highcharts-tracker")&&$.runTrackerClick||V.runChartClick),H=$.tooltip,q=U===1&&k(H==null?void 0:H.options.followTouchMove,!0);U>1?V.initiated=!0:q&&(V.initiated=!1),L&&V.initiated&&!B&&j.cancelable!==!1&&j.preventDefault(),j.type==="touchstart"?(V.pinchDown=G,V.res=!0,$.mouseDownX=j.chartX):q?this.runPointActions(V.normalize(j)):R&&(S($,"touchpan",{originalEvent:j,touches:G},()=>{let ae=fe=>{let re=fe[0],ce=fe[1]||re;return{x:re.chartX,y:re.chartY,width:ce.chartX-re.chartX,height:ce.chartY-re.chartY}};$.transform({axes:$.axes.filter(fe=>fe.zoomEnabled&&(this.zoomHor&&fe.horiz||this.zoomVert&&!fe.horiz)),to:ae(G),from:ae(R),trigger:j.type})}),V.res&&(V.res=!1,this.reset(!1,0))),V.lastTouches=G}reset(j,V){let $=this.chart,L=$.hoverSeries,R=$.hoverPoint,G=$.hoverPoints,U=$.tooltip,B=U&&U.shared?G:R;j&&B&&W(B).forEach(function(H){H.series.isCartesian&&H.plotX===void 0&&(j=!1)}),j?U&&B&&W(B).length&&(U.refresh(B),U.shared&&G?G.forEach(function(H){H.setState(H.state,!0),H.series.isCartesian&&(H.series.xAxis.crosshair&&H.series.xAxis.drawCrosshair(null,H),H.series.yAxis.crosshair&&H.series.yAxis.drawCrosshair(null,H))}):R&&(R.setState(R.state,!0),$.axes.forEach(function(H){H.crosshair&&R.series[H.coll]===H&&H.drawCrosshair(null,R)}))):(R&&R.onMouseOut(),G&&G.forEach(function(H){H.setState()}),L&&L.onMouseOut(),U&&U.hide(V),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),$.axes.forEach(function(H){H.hideCrosshair()}),$.hoverPoints=$.hoverPoint=void 0)}runPointActions(j,V,$){let L=this.chart,R=L.series,G=L.tooltip&&L.tooltip.options.enabled?L.tooltip:void 0,U=!!G&&G.shared,B=V||L.hoverPoint,H=B&&B.series||L.hoverSeries,q=(!j||j.type!=="touchmove")&&(!!V||H&&H.directTouch&&this.isDirectTouch),ae=this.getHoverData(B,H,R,q,U,j);B=ae.hoverPoint,H=ae.hoverSeries;let fe=ae.hoverPoints,re=H&&H.tooltipOptions.followPointer&&!H.tooltipOptions.split,ce=U&&H&&!H.noSharedTooltip;if(B&&($||B!==L.hoverPoint||G&&G.isHidden)){if((L.hoverPoints||[]).forEach(function(ke){fe.indexOf(ke)===-1&&ke.setState()}),L.hoverSeries!==H&&H.onMouseOver(),this.applyInactiveState(fe),(fe||[]).forEach(function(ke){ke.setState("hover")}),L.hoverPoint&&L.hoverPoint.firePointEvent("mouseOut"),!B.series)return;L.hoverPoints=fe,L.hoverPoint=B,B.firePointEvent("mouseOver",void 0,()=>{G&&B&&G.refresh(ce?fe:B,j)})}else if(re&&G&&!G.isHidden){let ke=G.getAnchor([{}],j);L.isInsidePlot(ke[0],ke[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:ke[0],plotY:ke[1]})}this.unDocMouseMove||(this.unDocMouseMove=y(L.container.ownerDocument,"mousemove",ke=>{var ve,Ee;return(Ee=(ve=f[Z.hoverChartIndex??-1])==null?void 0:ve.pointer)==null?void 0:Ee.onDocumentMouseMove(ke)}),this.eventsToUnbind.push(this.unDocMouseMove)),L.axes.forEach(function(ke){let ve,Ee=k((ke.crosshair||{}).snap,!0);!Ee||(ve=L.hoverPoint)&&ve.series[ke.coll]===ke||(ve=E(fe,Q=>Q.series&&Q.series[ke.coll]===ke)),ve||!Ee?ke.drawCrosshair(j,ve):ke.hideCrosshair()})}setDOMEvents(){let j=this.chart.container,V=j.ownerDocument;j.onmousedown=this.onContainerMouseDown.bind(this),j.onmousemove=this.onContainerMouseMove.bind(this),j.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(y(j,"mouseenter",this.onContainerMouseEnter.bind(this)),y(j,"mouseleave",this.onContainerMouseLeave.bind(this))),Z.unbindDocumentMouseUp||(Z.unbindDocumentMouseUp=[]),Z.unbindDocumentMouseUp.push(y(V,"mouseup",this.onDocumentMouseUp.bind(this)));let $=this.chart.renderTo.parentElement;for(;$&&$.tagName!=="BODY";)this.eventsToUnbind.push(y($,"scroll",()=>{delete this.chartPosition})),$=$.parentElement;this.eventsToUnbind.push(y(j,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),y(j,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Z.unbindDocumentTouchEnd||(Z.unbindDocumentTouchEnd=y(V,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),y(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var R,G;if(!v)return;let j=this.pointerCaptureEventsToUnbind,V=this.chart,$=V.container,L=k((R=V.options.tooltip)==null?void 0:R.followTouchMove,!0)&&V.series.some(U=>U.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&L?(j.push(y($,"pointerdown",U=>{var B,H;(B=U.target)!=null&&B.hasPointerCapture(U.pointerId)&&((H=U.target)==null||H.releasePointerCapture(U.pointerId))}),y($,"pointermove",U=>{var B,H;(H=(B=V.pointer)==null?void 0:B.getPointFromEvent(U))==null||H.onMouseOver(U)})),V.styledMode||b($,{"touch-action":"none"}),$.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!L&&(j.forEach(U=>U()),j.length=0,V.styledMode||b($,{"touch-action":k((G=V.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),$.className=$.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(j){var L;let V=this.chart,$=l.charts[k(Z.hoverChartIndex,-1)];if($&&$!==V){let R={relatedTarget:V.container};j&&!(j!=null&&j.relatedTarget)&&(j={...R,...j}),(L=$.pointer)==null||L.onContainerMouseLeave(j||R)}$&&$.mouseIsDown||(Z.hoverChartIndex=V.index)}touch(j,V){let $,{chart:L,pinchDown:R=[]}=this;this.setHoverChartIndex(),(j=this.normalize(j)).touches.length===1?L.isInsidePlot(j.chartX-L.plotLeft,j.chartY-L.plotTop,{visiblePlotOnly:!0})&&!L.openMenu?(V&&this.runPointActions(j),j.type==="touchmove"&&($=!!R[0]&&Math.pow(R[0].chartX-j.chartX,2)+Math.pow(R[0].chartY-j.chartY,2)>=16),k($,!0)&&this.pinch(j)):V&&this.reset():j.touches.length===2&&this.pinch(j)}touchSelect(j){return!!(this.chart.zooming.singleTouch&&j.touches&&j.touches.length===1)}zoomOption(j){let V=this.chart,$=V.inverted,L=V.zooming.type||"",R,G;/touch/.test(j.type)&&(L=k(V.zooming.pinchType,L)),this.zoomX=R=/x/.test(L),this.zoomY=G=/y/.test(L),this.zoomHor=R&&!$||G&&$,this.zoomVert=G&&!$||R&&$,this.hasZoom=R||G}}return(r=Z).compose=function(K){N(m,"Core.Pointer")&&y(K,"beforeRender",function(){this.pointer=new r(this,this.options)})},Z}),n(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(s){var l;let{extend:u,merge:r,pick:p}=s;return function(f){function m(v,y,_){var $,L;let b=this.legendItem=this.legendItem||{},{chart:C,options:E}=this,{baseline:S=0,symbolWidth:x,symbolHeight:A}=v,D=this.symbol||"circle",T=A/2,k=C.renderer,N=b.group,W=S-Math.round(((($=v.fontMetrics)==null?void 0:$.b)||A)*(_?.4:.3)),Z={},K,j=E.marker,V=0;if(C.styledMode||(Z["stroke-width"]=Math.min(E.lineWidth||0,24),E.dashStyle?Z.dashstyle=E.dashStyle:E.linecap==="square"||(Z["stroke-linecap"]="round")),b.line=k.path().addClass("highcharts-graph").attr(Z).add(N),_&&(b.area=k.path().addClass("highcharts-area").add(N)),Z["stroke-linecap"]&&(V=Math.min(b.line.strokeWidth(),x)/2),x){let R=[["M",V,W],["L",x-V,W]];b.line.attr({d:R}),(L=b.area)==null||L.attr({d:[...R,["L",x-V,S],["L",V,S]]})}if(j&&j.enabled!==!1&&x){let R=Math.min(p(j.radius,T),T);D.indexOf("url")===0&&(j=r(j,{width:A,height:A}),R=0),b.symbol=K=k.symbol(D,x/2-R,W-R,2*R,2*R,u({context:"legend"},j)).addClass("highcharts-point").add(N),K.isMarker=!0}}f.areaMarker=function(v,y){m.call(this,v,y,!0)},f.lineMarker=m,f.rectangle=function(v,y){let _=y.legendItem||{},b=v.options,C=v.symbolHeight,E=b.squareSymbol,S=E?C:v.symbolWidth;_.symbol=this.chart.renderer.rect(E?(v.symbolWidth-C)/2:0,v.baseline-C+1,S,C,p(v.options.symbolRadius,C/2)).addClass("highcharts-point").attr({zIndex:3}).add(_.group)}}(l||(l={})),l}),n(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:s}=this.series.chart;return typeof this.y!="number"?"":s(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),n(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{defaultOptions:f}=l,{extend:m,extendClass:v,merge:y}=r;return function(_){function b(C,E){let S=f.plotOptions||{},x=E.defaultOptions,A=E.prototype;return A.type=C,A.pointClass||(A.pointClass=u),!_.seriesTypes[C]&&(x&&(S[C]=x),_.seriesTypes[C]=E,!0)}_.seriesTypes=s.seriesTypes,_.registerSeriesType=b,_.seriesType=function(C,E,S,x,A){let D=f.plotOptions||{};if(E=E||"",D[C]=y(D[E],S),delete _.seriesTypes[C],b(C,v(_.seriesTypes[E]||function(){},x)),_.seriesTypes[C].prototype.type=C,A){class T extends u{}m(T.prototype,A),_.seriesTypes[C].prototype.pointClass=T}return _.seriesTypes[C]}}(p||(p={})),p}),n(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y,_){let{animObject:b,setAnimation:C}=s,{defaultOptions:E}=l,{registerEventOptions:S}=u,{svg:x,win:A}=r,{seriesTypes:D}=v,{arrayMax:T,arrayMin:k,clamp:N,correctFloat:W,crisp:Z,defined:K,destroyObjectProperties:j,diffObjects:V,erase:$,error:L,extend:R,find:G,fireEvent:U,getClosestDistance:B,getNestedProperty:H,insertItem:q,isArray:ae,isNumber:fe,isString:re,merge:ce,objectEach:ke,pick:ve,removeEvent:Ee,splat:Q,syncTimeout:ee}=_;class oe{constructor(){this.zoneAxis="y"}init(J,se){let de;U(this,"init",{options:se});let xe=this,Ce=J.series;this.eventsToUnbind=[],xe.chart=J,xe.options=xe.setOptions(se);let Ne=xe.options,Te=Ne.visible!==!1;xe.linkedSeries=[],xe.bindAxes(),R(xe,{name:Ne.name,state:"",visible:Te,selected:Ne.selected===!0}),S(this,Ne);let Ie=Ne.events;(Ie&&Ie.click||Ne.point&&Ne.point.events&&Ne.point.events.click||Ne.allowPointSelect)&&(J.runTrackerClick=!0),xe.getColor(),xe.getSymbol(),xe.parallelArrays.forEach(function(Ue){xe[Ue+"Data"]||(xe[Ue+"Data"]=[])}),xe.isCartesian&&(J.hasCartesianSeries=!0),Ce.length&&(de=Ce[Ce.length-1]),xe._i=ve(de&&de._i,-1)+1,xe.opacity=xe.options.opacity,J.orderItems("series",q(this,Ce)),Ne.dataSorting&&Ne.dataSorting.enabled?xe.setDataSortingOptions():xe.points||xe.data||xe.setData(Ne.data,!1),U(this,"afterInit")}is(J){return D[J]&&this instanceof D[J]}bindAxes(){let J,se=this,de=se.options,xe=se.chart;U(this,"bindAxes",null,function(){(se.axisTypes||[]).forEach(function(Ce){(xe[Ce]||[]).forEach(function(Ne){J=Ne.options,(ve(de[Ce],0)===Ne.index||de[Ce]!==void 0&&de[Ce]===J.id)&&(q(se,Ne.series),se[Ce]=Ne,Ne.isDirty=!0)}),se[Ce]||se.optionalAxis===Ce||L(18,!0,xe)})}),U(this,"afterBindAxes")}updateParallelArrays(J,se,de){let xe=J.series,Ce=fe(se)?function(Ne){let Te=Ne==="y"&&xe.toYData?xe.toYData(J):J[Ne];xe[Ne+"Data"][se]=Te}:function(Ne){Array.prototype[se].apply(xe[Ne+"Data"],de)};xe.parallelArrays.forEach(Ce)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(J,se){let de=J.marker,xe=se.marker||{};return de&&(xe.enabled&&!de.enabled||xe.symbol!==de.symbol||xe.height!==de.height||xe.width!==de.width)}autoIncrement(J){let se=this.options,de=se.pointIntervalUnit,xe=se.relativeXValue,Ce=this.chart.time,Ne=this.xIncrement,Te,Ie;return Ne=ve(Ne,se.pointStart,0),this.pointInterval=Ie=ve(this.pointInterval,se.pointInterval,1),xe&&fe(J)&&(Ie*=J),de&&(Te=new Ce.Date(Ne),de==="day"?Ce.set("Date",Te,Ce.get("Date",Te)+Ie):de==="month"?Ce.set("Month",Te,Ce.get("Month",Te)+Ie):de==="year"&&Ce.set("FullYear",Te,Ce.get("FullYear",Te)+Ie),Ie=Te.getTime()-Ne),xe&&fe(J)?Ne+Ie:(this.xIncrement=Ne+Ie,Ne)}setDataSortingOptions(){let J=this.options;R(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),K(J.pointRange)||(J.pointRange=1)}setOptions(J){var Pe,$e;let se,de=this.chart,xe=de.options.plotOptions,Ce=de.userOptions||{},Ne=ce(J),Te=de.styledMode,Ie={plotOptions:xe,userOptions:Ne};U(this,"setOptions",Ie);let Ue=Ie.plotOptions[this.type],qe=Ce.plotOptions||{},Ae=qe.series||{},ye=E.plotOptions[this.type]||{},ge=qe[this.type]||{};this.userOptions=Ie.userOptions;let Me=ce(Ue,xe.series,ge,Ne);this.tooltipOptions=ce(E.tooltip,(Pe=E.plotOptions.series)==null?void 0:Pe.tooltip,ye==null?void 0:ye.tooltip,de.userOptions.tooltip,($e=qe.series)==null?void 0:$e.tooltip,ge.tooltip,Ne.tooltip),this.stickyTracking=ve(Ne.stickyTracking,ge.stickyTracking,Ae.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Me.stickyTracking),Ue.marker===null&&delete Me.marker,this.zoneAxis=Me.zoneAxis||"y";let De=this.zones=(Me.zones||[]).map(Ke=>({...Ke}));return(Me.negativeColor||Me.negativeFillColor)&&!Me.zones&&(se={value:Me[this.zoneAxis+"Threshold"]||Me.threshold||0,className:"highcharts-negative"},Te||(se.color=Me.negativeColor,se.fillColor=Me.negativeFillColor),De.push(se)),De.length&&K(De[De.length-1].value)&&De.push(Te?{}:{color:this.color,fillColor:this.fillColor}),U(this,"afterSetOptions",{options:Me}),Me}getName(){return ve(this.options.name,"Series "+(this.index+1))}getCyclic(J,se,de){let xe,Ce,Ne=this.chart,Te=`${J}Index`,Ie=`${J}Counter`,Ue=(de==null?void 0:de.length)||Ne.options.chart.colorCount;!se&&(K(Ce=ve(J==="color"?this.options.colorIndex:void 0,this[Te]))?xe=Ce:(Ne.series.length||(Ne[Ie]=0),xe=Ne[Ie]%Ue,Ne[Ie]+=1),de&&(se=de[xe])),xe!==void 0&&(this[Te]=xe),this[J]=se}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||E.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let J=this.options.marker;this.getCyclic("symbol",J.symbol,this.chart.options.symbols)}findPointIndex(J,se){let de,xe,Ce,Ne=J.id,Te=J.x,Ie=this.points,Ue=this.options.dataSorting;if(Ne){let qe=this.chart.get(Ne);qe instanceof f&&(de=qe)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let qe=Ae=>!Ae.touched&&Ae.index===J.index;if(Ue&&Ue.matchByName?qe=Ae=>!Ae.touched&&Ae.name===J.name:this.options.relativeXValue&&(qe=Ae=>!Ae.touched&&Ae.options.x===J.x),!(de=G(Ie,qe)))return}return de&&(Ce=de&&de.index)!==void 0&&(xe=!0),Ce===void 0&&fe(Te)&&(Ce=this.xData.indexOf(Te,se)),Ce!==-1&&Ce!==void 0&&this.cropped&&(Ce=Ce>=this.cropStart?Ce-this.cropStart:Ce),!xe&&fe(Ce)&&Ie[Ce]&&Ie[Ce].touched&&(Ce=void 0),Ce}updateData(J,se){let de=this.options,xe=de.dataSorting,Ce=this.points,Ne=[],Te=this.requireSorting,Ie=J.length===Ce.length,Ue,qe,Ae,ye,ge=!0;if(this.xIncrement=null,J.forEach(function(Me,De){let Pe,$e=K(Me)&&this.pointClass.prototype.optionsToObject.call({series:this},Me)||{},Ke=$e.x;$e.id||fe(Ke)?((Pe=this.findPointIndex($e,ye))===-1||Pe===void 0?Ne.push(Me):Ce[Pe]&&Me!==de.data[Pe]?(Ce[Pe].update(Me,!1,null,!1),Ce[Pe].touched=!0,Te&&(ye=Pe+1)):Ce[Pe]&&(Ce[Pe].touched=!0),(!Ie||De!==Pe||xe&&xe.enabled||this.hasDerivedData)&&(Ue=!0)):Ne.push(Me)},this),Ue)for(qe=Ce.length;qe--;)(Ae=Ce[qe])&&!Ae.touched&&Ae.remove&&Ae.remove(!1,se);else!Ie||xe&&xe.enabled?ge=!1:(J.forEach(function(Me,De){Me===Ce[De].y||Ce[De].destroyed||Ce[De].update(Me,!1,null,!1)}),Ne.length=0);return Ce.forEach(function(Me){Me&&(Me.touched=!1)}),!!ge&&(Ne.forEach(function(Me){this.addPoint(Me,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=T(this.xData),this.autoIncrement()),!0)}setData(J,se=!0,de,xe){var ft;let Ce=this,Ne=Ce.points,Te=Ne&&Ne.length||0,Ie=Ce.options,Ue=Ce.chart,qe=Ie.dataSorting,Ae=Ce.xAxis,ye=Ie.turboThreshold,ge=this.xData,Me=this.yData,De=Ce.pointArrayMap,Pe=De&&De.length,$e=Ie.keys,Ke,tt,nt,ht=0,gt=1,Ct;Ue.options.chart.allowMutatingData||(Ie.data&&delete Ce.options.data,Ce.userOptions.data&&delete Ce.userOptions.data,Ct=ce(!0,J));let Lt=(J=Ct||J||[]).length;if(qe&&qe.enabled&&(J=this.sortData(J)),Ue.options.chart.allowMutatingData&&xe!==!1&&Lt&&Te&&!Ce.cropped&&!Ce.hasGroupedData&&Ce.visible&&!Ce.boosted&&(nt=this.updateData(J,de)),!nt){Ce.xIncrement=null,Ce.colorCounter=0,this.parallelArrays.forEach(function(Tt){Ce[Tt+"Data"].length=0});let Et=ye&&Lt>ye;if(Et){let Tt=Ce.getFirstValidPoint(J),ai=Ce.getFirstValidPoint(J,Lt-1,-1),hi=qt=>!!(ae(qt)&&($e||fe(qt[0])));if(fe(Tt)&&fe(ai))for(Ke=0;Ke<Lt;Ke++)ge[Ke]=this.autoIncrement(),Me[Ke]=J[Ke];else if(hi(Tt)&&hi(ai))if(Pe)if(Tt.length===Pe)for(Ke=0;Ke<Lt;Ke++)ge[Ke]=this.autoIncrement(),Me[Ke]=J[Ke];else for(Ke=0;Ke<Lt;Ke++)tt=J[Ke],ge[Ke]=tt[0],Me[Ke]=tt.slice(1,Pe+1);else if($e&&(ht=$e.indexOf("x"),gt=$e.indexOf("y"),ht=ht>=0?ht:0,gt=gt>=0?gt:1),Tt.length===1&&(gt=0),ht===gt)for(Ke=0;Ke<Lt;Ke++)ge[Ke]=this.autoIncrement(),Me[Ke]=J[Ke][gt];else for(Ke=0;Ke<Lt;Ke++)tt=J[Ke],ge[Ke]=tt[ht],Me[Ke]=tt[gt];else Et=!1}if(!Et)for(Ke=0;Ke<Lt;Ke++)tt={series:Ce},Ce.pointClass.prototype.applyOptions.apply(tt,[J[Ke]]),Ce.updateParallelArrays(tt,Ke);for(Me&&re(Me[0])&&L(14,!0,Ue),Ce.data=[],Ce.options.data=Ce.userOptions.data=J,Ke=Te;Ke--;)(ft=Ne[Ke])==null||ft.destroy();Ae&&(Ae.minRange=Ae.userMinRange),Ce.isDirty=Ue.isDirtyBox=!0,Ce.isDirtyData=!!Ne,de=!1}Ie.legendType==="point"&&(this.processData(),this.generatePoints()),se&&Ue.redraw(de)}sortData(J){let se=this,de=se.options.dataSorting.sortKey||"y",xe=function(Ce,Ne){return K(Ne)&&Ce.pointClass.prototype.optionsToObject.call({series:Ce},Ne)||{}};return J.forEach(function(Ce,Ne){J[Ne]=xe(se,Ce),J[Ne].index=Ne},this),J.concat().sort((Ce,Ne)=>{let Te=H(de,Ce),Ie=H(de,Ne);return Ie<Te?-1:Ie>Te?1:0}).forEach(function(Ce,Ne){Ce.x=Ne},this),se.linkedSeries&&se.linkedSeries.forEach(function(Ce){let Ne=Ce.options,Te=Ne.data;Ne.dataSorting&&Ne.dataSorting.enabled||!Te||(Te.forEach(function(Ie,Ue){Te[Ue]=xe(Ce,Ie),J[Ue]&&(Te[Ue].x=J[Ue].x,Te[Ue].index=Ue)}),Ce.setData(Te,!1))}),J}getProcessedData(J){let se=this,de=se.xAxis,xe=se.options.cropThreshold,Ce=de==null?void 0:de.logarithmic,Ne=se.isCartesian,Te,Ie,Ue=0,qe,Ae,ye,ge=se.xData,Me=se.yData,De=!1,Pe=ge.length;de&&(Ae=(qe=de.getExtremes()).min,ye=qe.max,De=!!(de.categories&&!de.names.length)),Ne&&se.sorted&&!J&&(!xe||Pe>xe||se.forceCrop)&&(ge[Pe-1]<Ae||ge[0]>ye?(ge=[],Me=[]):se.yData&&(ge[0]<Ae||ge[Pe-1]>ye)&&(ge=(Te=this.cropData(se.xData,se.yData,Ae,ye)).xData,Me=Te.yData,Ue=Te.start,Ie=!0));let $e=B([Ce?ge.map(Ce.log2lin):ge],()=>se.requireSorting&&!De&&L(15,!1,se.chart));return{xData:ge,yData:Me,cropped:Ie,cropStart:Ue,closestPointRange:$e}}processData(J){let se=this.xAxis;if(this.isCartesian&&!this.isDirty&&!se.isDirty&&!this.yAxis.isDirty&&!J)return!1;let de=this.getProcessedData();this.cropped=de.cropped,this.cropStart=de.cropStart,this.processedXData=de.xData,this.processedYData=de.yData,this.closestPointRange=this.basePointRange=de.closestPointRange,U(this,"afterProcessData")}cropData(J,se,de,xe){let Ce=J.length,Ne,Te,Ie=0,Ue=Ce;for(Ne=0;Ne<Ce;Ne++)if(J[Ne]>=de){Ie=Math.max(0,Ne-1);break}for(Te=Ne;Te<Ce;Te++)if(J[Te]>xe){Ue=Te+1;break}return{xData:J.slice(Ie,Ue),yData:se.slice(Ie,Ue),start:Ie,end:Ue}}generatePoints(){let J=this.options,se=this.processedData||J.data,de=this.processedXData,xe=this.processedYData,Ce=this.pointClass,Ne=de.length,Te=this.cropStart||0,Ie=this.hasGroupedData,Ue=J.keys,qe=[],Ae=J.dataGrouping&&J.dataGrouping.groupAll?Te:0,ye,ge,Me,De,Pe=this.data;if(!Pe&&!Ie){let $e=[];$e.length=se.length,Pe=this.data=$e}for(Ue&&Ie&&(this.options.keys=!1),De=0;De<Ne;De++)ge=Te+De,Ie?((Me=new Ce(this,[de[De]].concat(Q(xe[De])))).dataGroup=this.groupMap[Ae+De],Me.dataGroup.options&&(Me.options=Me.dataGroup.options,R(Me,Me.dataGroup.options),delete Me.dataLabels)):(Me=Pe[ge])||se[ge]===void 0||(Pe[ge]=Me=new Ce(this,se[ge],de[De])),Me&&(Me.index=Ie?Ae+De:ge,qe[De]=Me);if(this.options.keys=Ue,Pe&&(Ne!==(ye=Pe.length)||Ie))for(De=0;De<ye;De++)De!==Te||Ie||(De+=Ne),Pe[De]&&(Pe[De].destroyElements(),Pe[De].plotX=void 0);this.data=Pe,this.points=qe,U(this,"afterGeneratePoints")}getXExtremes(J){return{min:k(J),max:T(J)}}getExtremes(J,se){let de=this.xAxis,xe=this.yAxis,Ce=[],Ne=this.requireSorting&&!this.is("column")?1:0,Te=!!xe&&xe.positiveValuesOnly,Ie=se||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:Ue,processedYData:qe}=this,Ae,ye,ge,Me,De,Pe,$e,Ke=0,tt=0,nt=0;if(this.cropped&&Ie){let Lt=this.getProcessedData(!0);Ue=Lt.xData,qe=Lt.yData}let ht=(J=J||this.stackedYData||qe||[]).length,gt=Ue||this.xData;for(de&&(Ke=(Ae=de.getExtremes()).min,tt=Ae.max),Pe=0;Pe<ht;Pe++)if(Me=gt[Pe],ye=(fe(De=J[Pe])||ae(De))&&((fe(De)?De>0:De.length)||!Te),ge=se||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!de||(gt[Pe+Ne]||Me)>=Ke&&(gt[Pe-Ne]||Me)<=tt,ye&&ge)if($e=De.length)for(;$e--;)fe(De[$e])&&(Ce[nt++]=De[$e]);else Ce[nt++]=De;let Ct={activeYData:Ce,dataMin:k(Ce),dataMax:T(Ce)};return U(this,"afterGetExtremes",{dataExtremes:Ct}),Ct}applyExtremes(){let J=this.getExtremes();return this.dataMin=J.dataMin,this.dataMax=J.dataMax,J}getFirstValidPoint(J,se=0,de=1){let xe=J.length,Ce=se;for(;Ce>=0&&Ce<xe;){if(K(J[Ce]))return J[Ce];Ce+=de}}translate(){var tt;this.processedXData||this.processData(),this.generatePoints();let J=this.options,se=J.stacking,de=this.xAxis,xe=de.categories,Ce=this.enabledDataSorting,Ne=this.yAxis,Te=this.points,Ie=Te.length,Ue=this.pointPlacementToXValue(),qe=!!Ue,Ae=J.threshold,ye=J.startFromThreshold?Ae:0,ge,Me,De,Pe,$e=Number.MAX_VALUE;function Ke(nt){return N(nt,-1e9,1e9)}for(ge=0;ge<Ie;ge++){let nt,ht=Te[ge],gt=ht.x,Ct,Lt,ft=ht.y,Et=ht.low,Tt=se&&((tt=Ne.stacking)==null?void 0:tt.stacks[(this.negStacks&&ft<(ye?0:Ae)?"-":"")+this.stackKey]);Me=de.translate(gt,!1,!1,!1,!0,Ue),ht.plotX=fe(Me)?W(Ke(Me)):void 0,se&&this.visible&&Tt&&Tt[gt]&&(Pe=this.getStackIndicator(Pe,gt,this.index),!ht.isNull&&Pe.key&&(Lt=(Ct=Tt[gt]).points[Pe.key]),Ct&&ae(Lt)&&(Et=Lt[0],ft=Lt[1],Et===ye&&Pe.key===Tt[gt].base&&(Et=ve(fe(Ae)?Ae:Ne.min)),Ne.positiveValuesOnly&&K(Et)&&Et<=0&&(Et=void 0),ht.total=ht.stackTotal=ve(Ct.total),ht.percentage=K(ht.y)&&Ct.total?ht.y/Ct.total*100:void 0,ht.stackY=ft,this.irregularWidths||Ct.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),ht.yBottom=K(Et)?Ke(Ne.translate(Et,!1,!0,!1,!0)):void 0,this.dataModify&&(ft=this.dataModify.modifyValue(ft,ge)),fe(ft)&&ht.plotX!==void 0&&(nt=fe(nt=Ne.translate(ft,!1,!0,!1,!0))?Ke(nt):void 0),ht.plotY=nt,ht.isInside=this.isPointInside(ht),ht.clientX=qe?W(de.translate(gt,!1,!1,!1,!0,Ue)):Me,ht.negative=(ht.y||0)<(Ae||0),ht.category=ve(xe&&xe[ht.x],ht.x),ht.isNull||ht.visible===!1||(De!==void 0&&($e=Math.min($e,Math.abs(Me-De))),De=Me),ht.zone=this.zones.length?ht.getZone():void 0,!ht.graphic&&this.group&&Ce&&(ht.isNew=!0)}this.closestPointRangePx=$e,U(this,"afterTranslate")}getValidPoints(J,se,de){let xe=this.chart;return(J||this.points||[]).filter(function(Ce){let{plotX:Ne,plotY:Te}=Ce;return!!((de||!Ce.isNull&&fe(Te))&&(!se||xe.isInsidePlot(Ne,Te,{inverted:xe.inverted})))&&Ce.visible!==!1})}getClipBox(){let{chart:J,xAxis:se,yAxis:de}=this,{x:xe,y:Ce,width:Ne,height:Te}=ce(J.clipBox);return se&&se.len!==J.plotSizeX&&(Ne=se.len),de&&de.len!==J.plotSizeY&&(Te=de.len),J.inverted&&!this.invertible&&([Ne,Te]=[Te,Ne]),{x:xe,y:Ce,width:Ne,height:Te}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:J,group:se,markerGroup:de}=this,xe=J.sharedClips,Ce=J.renderer,Ne=this.getClipBox(),Te=this.getSharedClipKey(),Ie=xe[Te];Ie?Ie.animate(Ne):xe[Te]=Ie=Ce.clipRect(Ne),se&&se.clip(this.options.clip===!1?void 0:Ie),de&&de.clip()}animate(J){let{chart:se,group:de,markerGroup:xe}=this,Ce=se.inverted,Ne=b(this.options.animation),Te=[this.getSharedClipKey(),Ne.duration,Ne.easing,Ne.defer].join(","),Ie=se.sharedClips[Te],Ue=se.sharedClips[Te+"m"];if(J&&de){let qe=this.getClipBox();if(Ie)Ie.attr("height",qe.height);else{qe.width=0,Ce&&(qe.x=se.plotHeight),Ie=se.renderer.clipRect(qe),se.sharedClips[Te]=Ie;let Ae={x:-99,y:-99,width:Ce?se.plotWidth+199:99,height:Ce?99:se.plotHeight+199};Ue=se.renderer.clipRect(Ae),se.sharedClips[Te+"m"]=Ue}de.clip(Ie),xe==null||xe.clip(Ue)}else if(Ie&&!Ie.hasClass("highcharts-animating")){let qe=this.getClipBox(),Ae=Ne.step;(xe!=null&&xe.element.childNodes.length||se.series.length>1)&&(Ne.step=function(ye,ge){Ae&&Ae.apply(ge,arguments),ge.prop==="width"&&(Ue!=null&&Ue.element)&&Ue.attr(Ce?"height":"width",ye+99)}),Ie.addClass("highcharts-animating").animate(qe,Ne)}}afterAnimate(){this.setClip(),ke(this.chart.sharedClips,(J,se,de)=>{J&&!this.chart.container.querySelector(`[clip-path="url(#${J.id})"]`)&&(J.destroy(),delete de[se])}),this.finishedAnimating=!0,U(this,"afterAnimate")}drawPoints(J=this.points){let se,de,xe,Ce,Ne,Te,Ie,Ue=this.chart,qe=Ue.styledMode,{colorAxis:Ae,options:ye}=this,ge=ye.marker,Me=this[this.specialGroup||"markerGroup"],De=this.xAxis,Pe=ve(ge.enabled,!De||!!De.isRadial||null,this.closestPointRangePx>=ge.enabledThreshold*ge.radius);if(ge.enabled!==!1||this._hasPointMarkers)for(se=0;se<J.length;se++)if(Ce=(xe=(de=J[se]).graphic)?"animate":"attr",Ne=de.marker||{},Te=!!de.marker,(Pe&&Ne.enabled===void 0||Ne.enabled)&&!de.isNull&&de.visible!==!1){let $e=ve(Ne.symbol,this.symbol,"rect");Ie=this.markerAttribs(de,de.selected&&"select"),this.enabledDataSorting&&(de.startXPos=De.reversed?-(Ie.width||0):De.width);let Ke=de.isInside!==!1;if(!xe&&Ke&&((Ie.width||0)>0||de.hasImage)&&(de.graphic=xe=Ue.renderer.symbol($e,Ie.x,Ie.y,Ie.width,Ie.height,Te?Ne:ge).add(Me),this.enabledDataSorting&&Ue.hasRendered&&(xe.attr({x:de.startXPos}),Ce="animate")),xe&&Ce==="animate"&&xe[Ke?"show":"hide"](Ke).animate(Ie),xe){let tt=this.pointAttribs(de,qe||!de.selected?void 0:"select");qe?Ae&&xe.css({fill:tt.fill}):xe[Ce](tt)}xe&&xe.addClass(de.getClassName(),!0)}else xe&&(de.graphic=xe.destroy())}markerAttribs(J,se){let de=this.options,xe=de.marker,Ce=J.marker||{},Ne=Ce.symbol||xe.symbol,Te={},Ie,Ue,qe=ve(Ce.radius,xe&&xe.radius);se&&(Ie=xe.states[se],qe=ve((Ue=Ce.states&&Ce.states[se])&&Ue.radius,Ie&&Ie.radius,qe&&qe+(Ie&&Ie.radiusPlus||0))),J.hasImage=Ne&&Ne.indexOf("url")===0,J.hasImage&&(qe=0);let Ae=J.pos();return fe(qe)&&Ae&&(de.crisp&&(Ae[0]=Z(Ae[0],J.hasImage?0:Ne==="rect"?(xe==null?void 0:xe.lineWidth)||0:1)),Te.x=Ae[0]-qe,Te.y=Ae[1]-qe),qe&&(Te.width=Te.height=2*qe),Te}pointAttribs(J,se){let de=this.options.marker,xe=J&&J.options,Ce=xe&&xe.marker||{},Ne=xe&&xe.color,Te=J&&J.color,Ie=J&&J.zone&&J.zone.color,Ue,qe,Ae=this.color,ye,ge,Me=ve(Ce.lineWidth,de.lineWidth),De=1;return Ae=Ne||Ie||Te||Ae,ye=Ce.fillColor||de.fillColor||Ae,ge=Ce.lineColor||de.lineColor||Ae,se=se||"normal",Ue=de.states[se]||{},Me=ve((qe=Ce.states&&Ce.states[se]||{}).lineWidth,Ue.lineWidth,Me+ve(qe.lineWidthPlus,Ue.lineWidthPlus,0)),ye=qe.fillColor||Ue.fillColor||ye,{stroke:ge=qe.lineColor||Ue.lineColor||ge,"stroke-width":Me,fill:ye,opacity:De=ve(qe.opacity,Ue.opacity,De)}}destroy(J){let se,de,xe,Ce=this,Ne=Ce.chart,Te=/AppleWebKit\/533/.test(A.navigator.userAgent),Ie=Ce.data||[];for(U(Ce,"destroy",{keepEventsForUpdate:J}),this.removeEvents(J),(Ce.axisTypes||[]).forEach(function(Ue){(xe=Ce[Ue])&&xe.series&&($(xe.series,Ce),xe.isDirty=xe.forceRedraw=!0)}),Ce.legendItem&&Ce.chart.legend.destroyItem(Ce),se=Ie.length;se--;)(de=Ie[se])&&de.destroy&&de.destroy();for(let Ue of Ce.zones)j(Ue,void 0,!0);_.clearTimeout(Ce.animationTimeout),ke(Ce,function(Ue,qe){Ue instanceof y&&!Ue.survive&&Ue[Te&&qe==="group"?"hide":"destroy"]()}),Ne.hoverSeries===Ce&&(Ne.hoverSeries=void 0),$(Ne.series,Ce),Ne.orderItems("series"),ke(Ce,function(Ue,qe){J&&qe==="hcEvents"||delete Ce[qe]})}applyZones(){let{area:J,chart:se,graph:de,zones:xe,points:Ce,xAxis:Ne,yAxis:Te,zoneAxis:Ie}=this,{inverted:Ue,renderer:qe}=se,Ae=this[`${Ie}Axis`],{isXAxis:ye,len:ge=0}=Ae||{},Me=((de==null?void 0:de.strokeWidth())||0)/2+1,De=(Pe,$e=0,Ke=0)=>{Ue&&(Ke=ge-Ke);let{translated:tt=0,lineClip:nt}=Pe,ht=Ke-tt;nt==null||nt.push(["L",$e,Math.abs(ht)<Me?Ke-Me*(ht<=0?-1:1):tt])};if(xe.length&&(de||J)&&Ae&&fe(Ae.min)){let Pe=Ae.getExtremes().max,$e=nt=>{nt.forEach((ht,gt)=>{(ht[0]==="M"||ht[0]==="L")&&(nt[gt]=[ht[0],ye?ge-ht[1]:ht[1],ye?ht[2]:ge-ht[2]])})};if(xe.forEach(nt=>{nt.lineClip=[],nt.translated=N(Ae.toPixels(ve(nt.value,Pe),!0)||0,0,ge)}),de&&!this.showLine&&de.hide(),J&&J.hide(),Ie==="y"&&Ce.length<Ne.len)for(let nt of Ce){let{plotX:ht,plotY:gt,zone:Ct}=nt,Lt=Ct&&xe[xe.indexOf(Ct)-1];Ct&&De(Ct,ht,gt),Lt&&De(Lt,ht,gt)}let Ke=[],tt=Ae.toPixels(Ae.getExtremes().min,!0);xe.forEach(nt=>{var un,Qi;let ht=nt.lineClip||[],gt=Math.round(nt.translated||0);Ne.reversed&&ht.reverse();let{clip:Ct,simpleClip:Lt}=nt,ft=0,Et=0,Tt=Ne.len,ai=Te.len;ye?(ft=gt,Tt=tt):(Et=gt,ai=tt);let hi=[["M",ft,Et],["L",Tt,Et],["L",Tt,ai],["L",ft,ai],["Z"]],qt=[hi[0],...ht,hi[1],hi[2],...Ke,hi[3],hi[4]];Ke=ht.reverse(),tt=gt,Ue&&($e(qt),J&&$e(hi)),Ct?(Ct.animate({d:qt}),Lt==null||Lt.animate({d:hi})):(Ct=nt.clip=qe.path(qt),J&&(Lt=nt.simpleClip=qe.path(hi))),de&&((un=nt.graph)==null||un.clip(Ct)),J&&((Qi=nt.area)==null||Qi.clip(Lt))})}else this.visible&&(de&&de.show(),J&&J.show())}plotGroup(J,se,de,xe,Ce){let Ne=this[J],Te=!Ne,Ie={visibility:de,zIndex:xe||.1};return K(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Ie.opacity=this.opacity),Ne||(this[J]=Ne=this.chart.renderer.g().add(Ce)),Ne.addClass("highcharts-"+se+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(K(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(Ne.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),Ne.attr(Ie)[Te?"attr":"animate"](this.getPlotBox(se)),Ne}getPlotBox(J){let se=this.xAxis,de=this.yAxis,xe=this.chart,Ce=xe.inverted&&!xe.polar&&se&&this.invertible&&J==="series";return xe.inverted&&(se=de,de=this.xAxis),{translateX:se?se.left:xe.plotLeft,translateY:de?de.top:xe.plotTop,rotation:Ce?90:0,rotationOriginX:Ce?(se.len-de.len)/2:0,rotationOriginY:Ce?(se.len+de.len)/2:0,scaleX:Ce?-1:1,scaleY:1}}removeEvents(J){let{eventsToUnbind:se}=this;J||Ee(this),se.length&&(se.forEach(de=>{de()}),se.length=0)}render(){var qe,Ae,ye,ge,Me;let J=this,{chart:se,options:de,hasRendered:xe}=J,Ce=b(de.animation),Ne=J.visible?"inherit":"hidden",Te=de.zIndex,Ie=se.seriesGroup,Ue=J.finishedAnimating?0:Ce.duration;U(this,"render"),J.plotGroup("group","series",Ne,Te,Ie),J.markerGroup=J.plotGroup("markerGroup","markers",Ne,Te,Ie),de.clip!==!1&&J.setClip(),Ue&&((qe=J.animate)==null||qe.call(J,!0)),J.drawGraph&&(J.drawGraph(),J.applyZones()),J.visible&&J.drawPoints(),(Ae=J.drawDataLabels)==null||Ae.call(J),(ye=J.redrawPoints)==null||ye.call(J),de.enableMouseTracking&&((ge=J.drawTracker)==null||ge.call(J)),Ue&&((Me=J.animate)==null||Me.call(J)),xe||(Ue&&Ce.defer&&(Ue+=Ce.defer),J.animationTimeout=ee(()=>{J.afterAnimate()},Ue||0)),J.isDirty=!1,J.hasRendered=!0,U(J,"afterRender")}redraw(){let J=this.isDirty||this.isDirtyData;this.translate(),this.render(),J&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(J,se){let{xAxis:de,yAxis:xe}=this,Ce=this.chart.inverted;return this.searchKDTree({clientX:Ce?de.len-J.chartY+de.pos:J.chartX-de.pos,plotY:Ce?xe.len-J.chartX+xe.pos:J.chartY-xe.pos},se,J)}buildKDTree(J){this.buildingKdTree=!0;let se=this,de=se.options.findNearestPointBy.indexOf("y")>-1?2:1;delete se.kdTree,ee(function(){se.kdTree=function xe(Ce,Ne,Te){let Ie,Ue,qe=Ce==null?void 0:Ce.length;if(qe)return Ie=se.kdAxisArray[Ne%Te],Ce.sort((Ae,ye)=>(Ae[Ie]||0)-(ye[Ie]||0)),{point:Ce[Ue=Math.floor(qe/2)],left:xe(Ce.slice(0,Ue),Ne+1,Te),right:xe(Ce.slice(Ue+1),Ne+1,Te)}}(se.getValidPoints(void 0,!se.directTouch),de,de),se.buildingKdTree=!1},se.options.kdNow||(J==null?void 0:J.type)==="touchstart"?0:1)}searchKDTree(J,se,de){let xe=this,[Ce,Ne]=this.kdAxisArray,Te=se?"distX":"dist",Ie=(xe.options.findNearestPointBy||"").indexOf("y")>-1?2:1,Ue=!!xe.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(de),this.kdTree)return function qe(Ae,ye,ge,Me){var Ct;let De=ye.point,Pe=xe.kdAxisArray[ge%Me],$e,Ke,tt=De;(function(Lt,ft){var bn;let Et=Lt[Ce],Tt=ft[Ce],ai=K(Et)&&K(Tt)?Et-Tt:null,hi=Lt[Ne],qt=ft[Ne],un=K(hi)&&K(qt)?hi-qt:0,Qi=Ue&&((bn=ft.marker)==null?void 0:bn.radius)||0;ft.dist=Math.sqrt((ai&&ai*ai||0)+un*un)-Qi,ft.distX=K(ai)?Math.abs(ai)-Qi:Number.MAX_VALUE})(Ae,De);let nt=(Ae[Pe]||0)-(De[Pe]||0)+(Ue&&((Ct=De.marker)==null?void 0:Ct.radius)||0),ht=nt<0?"left":"right",gt=nt<0?"right":"left";return ye[ht]&&(tt=($e=qe(Ae,ye[ht],ge+1,Me))[Te]<tt[Te]?$e:De),ye[gt]&&Math.sqrt(nt*nt)<tt[Te]&&(tt=(Ke=qe(Ae,ye[gt],ge+1,Me))[Te]<tt[Te]?Ke:tt),tt}(J,this.kdTree,Ie,Ie)}pointPlacementToXValue(){let{options:J,xAxis:se}=this,de=J.pointPlacement;return de==="between"&&(de=se.reversed?-.5:.5),fe(de)?de*(J.pointRange||se.pointRange):0}isPointInside(J){let{chart:se,xAxis:de,yAxis:xe}=this,{plotX:Ce=-1,plotY:Ne=-1}=J;return Ne>=0&&Ne<=(xe?xe.len:se.plotHeight)&&Ce>=0&&Ce<=(de?de.len:se.plotWidth)}drawTracker(){var ye;let J=this,se=J.options,de=se.trackByArea,xe=[].concat((de?J.areaPath:J.graphPath)||[]),Ce=J.chart,Ne=Ce.pointer,Te=Ce.renderer,Ie=((ye=Ce.options.tooltip)==null?void 0:ye.snap)||0,Ue=()=>{se.enableMouseTracking&&Ce.hoverSeries!==J&&J.onMouseOver()},qe="rgba(192,192,192,"+(x?1e-4:.002)+")",Ae=J.tracker;Ae?Ae.attr({d:xe}):J.graph&&(J.tracker=Ae=Te.path(xe).attr({visibility:J.visible?"inherit":"hidden",zIndex:2}).addClass(de?"highcharts-tracker-area":"highcharts-tracker-line").add(J.group),Ce.styledMode||Ae.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:qe,fill:de?qe:"none","stroke-width":J.graph.strokeWidth()+(de?0:2*Ie)}),[J.tracker,J.markerGroup,J.dataLabelsGroup].forEach(ge=>{ge&&(ge.addClass("highcharts-tracker").on("mouseover",Ue).on("mouseout",Me=>{Ne==null||Ne.onTrackerMouseOut(Me)}),se.cursor&&!Ce.styledMode&&ge.css({cursor:se.cursor}),ge.on("touchstart",Ue))})),U(this,"afterDrawTracker")}addPoint(J,se,de,xe,Ce){let Ne,Te,Ie=this.options,Ue=this.data,qe=this.chart,Ae=this.xAxis,ye=Ae&&Ae.hasNames&&Ae.names,ge=Ie.data,Me=this.xData;se=ve(se,!0);let De={series:this};this.pointClass.prototype.applyOptions.apply(De,[J]);let Pe=De.x;if(Te=Me.length,this.requireSorting&&Pe<Me[Te-1])for(Ne=!0;Te&&Me[Te-1]>Pe;)Te--;this.updateParallelArrays(De,"splice",[Te,0,0]),this.updateParallelArrays(De,Te),ye&&De.name&&(ye[Pe]=De.name),ge.splice(Te,0,J),(Ne||this.processedData)&&(this.data.splice(Te,0,null),this.processData()),Ie.legendType==="point"&&this.generatePoints(),de&&(Ue[0]&&Ue[0].remove?Ue[0].remove(!1):(Ue.shift(),this.updateParallelArrays(De,"shift"),ge.shift())),Ce!==!1&&U(this,"addPoint",{point:De}),this.isDirty=!0,this.isDirtyData=!0,se&&qe.redraw(xe)}removePoint(J,se,de){let xe=this,Ce=xe.data,Ne=Ce[J],Te=xe.points,Ie=xe.chart,Ue=function(){Te&&Te.length===Ce.length&&Te.splice(J,1),Ce.splice(J,1),xe.options.data.splice(J,1),xe.updateParallelArrays(Ne||{series:xe},"splice",[J,1]),Ne&&Ne.destroy(),xe.isDirty=!0,xe.isDirtyData=!0,se&&Ie.redraw()};C(de,Ie),se=ve(se,!0),Ne?Ne.firePointEvent("remove",null,Ue):Ue()}remove(J,se,de,xe){let Ce=this,Ne=Ce.chart;function Te(){Ce.destroy(xe),Ne.isDirtyLegend=Ne.isDirtyBox=!0,Ne.linkSeries(xe),ve(J,!0)&&Ne.redraw(se)}de!==!1?U(Ce,"remove",null,Te):Te()}update(J,se){var $e,Ke,tt;U(this,"update",{options:J=V(J,this.userOptions)});let de=this,xe=de.chart,Ce=de.userOptions,Ne=de.initialType||de.type,Te=xe.options.plotOptions,Ie=D[Ne].prototype,Ue=de.finishedAnimating&&{animation:!1},qe={},Ae,ye,ge=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Me=J.type||Ce.type||xe.options.chart.type,De=!(this.hasDerivedData||Me&&Me!==this.type||J.pointStart!==void 0||J.pointInterval!==void 0||J.relativeXValue!==void 0||J.joinBy||J.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(nt=>de.hasOptionChanged(nt)));Me=Me||Ne,De&&(ge.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),J.visible!==!1&&ge.push("area","graph"),de.parallelArrays.forEach(function(nt){ge.push(nt+"Data")}),J.data&&(J.dataSorting&&R(de.options.dataSorting,J.dataSorting),this.setData(J.data,!1))),J=ce(Ce,{index:Ce.index===void 0?de.index:Ce.index,pointStart:(($e=Te==null?void 0:Te.series)==null?void 0:$e.pointStart)??Ce.pointStart??((Ke=de.xData)==null?void 0:Ke[0])},!De&&{data:de.options.data},J,Ue),De&&J.data&&(J.data=de.options.data),(ge=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(ge)).forEach(function(nt){ge[nt]=de[nt],delete de[nt]});let Pe=!1;if(D[Me]){if(Pe=Me!==de.type,de.remove(!1,!1,!1,!0),Pe)if(xe.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(de,D[Me].prototype);else{let nt=Object.hasOwnProperty.call(de,"hcEvents")&&de.hcEvents;for(ye in Ie)de[ye]=void 0;R(de,D[Me].prototype),nt?de.hcEvents=nt:delete de.hcEvents}}else L(17,!0,xe,{missingModuleFor:Me});if(ge.forEach(function(nt){de[nt]=ge[nt]}),de.init(xe,J),De&&this.points)for(let nt of((Ae=de.options).visible===!1?(qe.graphic=1,qe.dataLabel=1):(this.hasMarkerChanged(Ae,Ce)&&(qe.graphic=1),(tt=de.hasDataLabels)!=null&&tt.call(de)||(qe.dataLabel=1)),this.points))nt&&nt.series&&(nt.resolveColor(),Object.keys(qe).length&&nt.destroyElements(qe),Ae.showInLegend===!1&&nt.legendItem&&xe.legend.destroyItem(nt));de.initialType=Ne,xe.linkSeries(),xe.setSortedData(),Pe&&de.linkedSeries.length&&(de.isDirtyData=!0),U(this,"afterUpdate"),ve(se,!0)&&xe.redraw(!!De&&void 0)}setName(J){this.name=this.options.name=this.userOptions.name=J,this.chart.isDirtyLegend=!0}hasOptionChanged(J){var Te,Ie;let se=this.chart,de=this.options[J],xe=se.options.plotOptions,Ce=this.userOptions[J],Ne=ve((Te=xe==null?void 0:xe[this.type])==null?void 0:Te[J],(Ie=xe==null?void 0:xe.series)==null?void 0:Ie[J]);return Ce&&!K(Ne)?de!==Ce:de!==ve(Ne,de)}onMouseOver(){let J=this.chart,se=J.hoverSeries,de=J.pointer;de==null||de.setHoverChartIndex(),se&&se!==this&&se.onMouseOut(),this.options.events.mouseOver&&U(this,"mouseOver"),this.setState("hover"),J.hoverSeries=this}onMouseOut(){let J=this.options,se=this.chart,de=se.tooltip,xe=se.hoverPoint;se.hoverSeries=null,xe&&xe.onMouseOut(),this&&J.events.mouseOut&&U(this,"mouseOut"),de&&!this.stickyTracking&&(!de.shared||this.noSharedTooltip)&&de.hide(),se.series.forEach(function(Ce){Ce.setState("",!0)})}setState(J,se){let de=this,xe=de.options,Ce=de.graph,Ne=xe.inactiveOtherPoints,Te=xe.states,Ie=ve(Te[J||"normal"]&&Te[J||"normal"].animation,de.chart.options.chart.animation),Ue=xe.lineWidth,qe=xe.opacity;if(J=J||"",de.state!==J&&([de.group,de.markerGroup,de.dataLabelsGroup].forEach(function(Ae){Ae&&(de.state&&Ae.removeClass("highcharts-series-"+de.state),J&&Ae.addClass("highcharts-series-"+J))}),de.state=J,!de.chart.styledMode)){if(Te[J]&&Te[J].enabled===!1)return;if(J&&(Ue=Te[J].lineWidth||Ue+(Te[J].lineWidthPlus||0),qe=ve(Te[J].opacity,qe)),Ce&&!Ce.dashstyle&&fe(Ue))for(let Ae of[Ce,...this.zones.map(ye=>ye.graph)])Ae==null||Ae.animate({"stroke-width":Ue},Ie);Ne||[de.group,de.markerGroup,de.dataLabelsGroup,de.labelBySeries].forEach(function(Ae){Ae&&Ae.animate({opacity:qe},Ie)})}se&&Ne&&de.points&&de.setAllPointsToState(J||void 0)}setAllPointsToState(J){this.points.forEach(function(se){se.setState&&se.setState(J)})}setVisible(J,se){var Ie;let de=this,xe=de.chart,Ce=xe.options.chart.ignoreHiddenSeries,Ne=de.visible;de.visible=J=de.options.visible=de.userOptions.visible=J===void 0?!Ne:J;let Te=J?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(Ue=>{var qe;(qe=de[Ue])==null||qe[Te]()}),(xe.hoverSeries===de||((Ie=xe.hoverPoint)==null?void 0:Ie.series)===de)&&de.onMouseOut(),de.legendItem&&xe.legend.colorizeItem(de,J),de.isDirty=!0,de.options.stacking&&xe.series.forEach(Ue=>{Ue.options.stacking&&Ue.visible&&(Ue.isDirty=!0)}),de.linkedSeries.forEach(Ue=>{Ue.setVisible(J,!1)}),Ce&&(xe.isDirtyBox=!0),U(de,Te),se!==!1&&xe.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(J){this.selected=J=this.options.selected=J===void 0?!this.selected:J,this.checkbox&&(this.checkbox.checked=J),U(this,J?"select":"unselect")}shouldShowTooltip(J,se,de={}){return de.series=this,de.visiblePlotOnly=!0,this.chart.isInsidePlot(J,se,de)}drawLegendSymbol(J,se){var de;(de=p[this.options.legendSymbol||"rectangle"])==null||de.call(this,J,se)}}return oe.defaultOptions=m,oe.types=v.seriesTypes,oe.registerType=v.registerSeriesType,R(oe.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:f,requireSorting:!0,sorted:!0}),v.series=oe,oe}),n(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v){var y;let{animObject:_,setAnimation:b}=s,{registerEventOptions:C}=l,{composed:E,marginNames:S}=u,{distribute:x}=f,{format:A}=m,{addEvent:D,createElement:T,css:k,defined:N,discardElement:W,find:Z,fireEvent:K,isNumber:j,merge:V,pick:$,pushUnique:L,relativeLength:R,stableSort:G,syncTimeout:U}=v;class B{constructor(q,ae){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=q,this.setOptions(ae),ae.enabled&&(this.render(),C(this,ae),D(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),D(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(q){let ae=$(q.padding,8);this.options=q,this.chart.styledMode||(this.itemStyle=q.itemStyle,this.itemHiddenStyle=V(this.itemStyle,q.itemHiddenStyle)),this.itemMarginTop=q.itemMarginTop,this.itemMarginBottom=q.itemMarginBottom,this.padding=ae,this.initialItemY=ae-5,this.symbolWidth=$(q.symbolWidth,16),this.pages=[],this.proximate=q.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(q,ae){let fe=this.chart;this.setOptions(V(!0,this.options,q)),"events"in this.options&&C(this,this.options),this.destroy(),fe.isDirtyLegend=fe.isDirtyBox=!0,$(ae,!0)&&fe.redraw(),K(this,"afterUpdate",{redraw:ae})}colorizeItem(q,ae){let{area:fe,group:re,label:ce,line:ke,symbol:ve}=q.legendItem||{};if(re==null||re[ae?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Ee={}}=this,Q=Ee.color,{fillColor:ee,fillOpacity:oe,lineColor:we,marker:J}=q.options,se=de=>(!ae&&(de.fill&&(de.fill=Q),de.stroke&&(de.stroke=Q)),de);ce==null||ce.css(V(ae?this.itemStyle:Ee)),ke==null||ke.attr(se({stroke:we||q.color})),ve&&ve.attr(se(J&&ve.isMarker?q.pointAttribs():{fill:q.color})),fe==null||fe.attr(se({fill:ee||q.color,"fill-opacity":ee?1:oe??.75}))}K(this,"afterColorizeItem",{item:q,visible:ae})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(q){let{group:ae,x:fe=0,y:re=0}=q.legendItem||{},ce=this.options,ke=ce.symbolPadding,ve=!ce.rtl,Ee=q.checkbox;if(ae&&ae.element){let Q={translateX:ve?fe:this.legendWidth-fe-2*ke-4,translateY:re};ae[N(ae.translateY)?"animate":"attr"](Q,void 0,()=>{K(this,"afterPositionItem",{item:q})})}Ee&&(Ee.x=fe,Ee.y=re)}destroyItem(q){let ae=q.checkbox,fe=q.legendItem||{};for(let re of["group","label","line","symbol"])fe[re]&&(fe[re]=fe[re].destroy());ae&&W(ae),q.legendItem=void 0}destroy(){for(let q of this.getAllItems())this.destroyItem(q);for(let q of["clipRect","up","down","pager","nav","box","title","group"])this[q]&&(this[q]=this[q].destroy());this.display=null}positionCheckboxes(){let q,ae=this.group&&this.group.alignAttr,fe=this.clipHeight||this.legendHeight,re=this.titleHeight;ae&&(q=ae.translateY,this.allItems.forEach(function(ce){let ke,ve=ce.checkbox;ve&&(ke=q+re+ve.y+(this.scrollOffset||0)+3,k(ve,{left:ae.translateX+ce.checkboxOffset+ve.x-20+"px",top:ke+"px",display:this.proximate||ke>q-6&&ke<q+fe-6?"":"none"}))},this))}renderTitle(){let q=this.options,ae=this.padding,fe=q.title,re,ce=0;fe.text&&(this.title||(this.title=this.chart.renderer.label(fe.text,ae-3,ae-4,void 0,void 0,void 0,q.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(fe.style),this.title.add(this.group)),fe.width||this.title.css({width:this.maxLegendWidth+"px"}),ce=(re=this.title.getBBox()).height,this.offsetWidth=re.width,this.contentGroup.attr({translateY:ce})),this.titleHeight=ce}setText(q){let ae=this.options;q.legendItem.label.attr({text:ae.labelFormat?A(ae.labelFormat,q,this.chart):ae.labelFormatter.call(q)})}renderItem(q){let ae=q.legendItem=q.legendItem||{},fe=this.chart,re=fe.renderer,ce=this.options,ke=ce.layout==="horizontal",ve=this.symbolWidth,Ee=ce.symbolPadding||0,Q=this.itemStyle,ee=this.itemHiddenStyle,oe=ke?$(ce.itemDistance,20):0,we=!ce.rtl,J=!q.series,se=!J&&q.series.drawLegendSymbol?q.series:q,de=se.options,xe=!!this.createCheckboxForItem&&de&&de.showCheckbox,Ce=ce.useHTML,Ne=q.options.className,Te=ae.label,Ie=ve+Ee+oe+(xe?20:0);!Te&&(ae.group=re.g("legend-item").addClass("highcharts-"+se.type+"-series highcharts-color-"+q.colorIndex+(Ne?" "+Ne:"")+(J?" highcharts-series-"+q.index:"")).attr({zIndex:1}).add(this.scrollGroup),ae.label=Te=re.text("",we?ve+Ee:-Ee,this.baseline||0,Ce),fe.styledMode||Te.css(V(q.visible?Q:ee)),Te.attr({align:we?"left":"right",zIndex:2}).add(ae.group),!this.baseline&&(this.fontMetrics=re.fontMetrics(Te),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Te.attr("y",this.baseline),this.symbolHeight=$(ce.symbolHeight,this.fontMetrics.f),ce.squareSymbol&&(this.symbolWidth=$(ce.symbolWidth,Math.max(this.symbolHeight,16)),Ie=this.symbolWidth+Ee+oe+(xe?20:0),we&&Te.attr("x",this.symbolWidth+Ee))),se.drawLegendSymbol(this,q),this.setItemEvents&&this.setItemEvents(q,Te,Ce)),xe&&!q.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(q),this.colorizeItem(q,q.visible),(fe.styledMode||!Q.width)&&Te.css({width:(ce.itemWidth||this.widthOption||fe.spacingBox.width)-Ie+"px"}),this.setText(q);let Ue=Te.getBBox(),qe=this.fontMetrics&&this.fontMetrics.h||0;q.itemWidth=q.checkboxOffset=ce.itemWidth||ae.labelWidth||Ue.width+Ie,this.maxItemWidth=Math.max(this.maxItemWidth,q.itemWidth),this.totalItemWidth+=q.itemWidth,this.itemHeight=q.itemHeight=Math.round(ae.labelHeight||(Ue.height>1.5*qe?Ue.height:qe))}layoutItem(q){let ae=this.options,fe=this.padding,re=ae.layout==="horizontal",ce=q.itemHeight,ke=this.itemMarginBottom,ve=this.itemMarginTop,Ee=re?$(ae.itemDistance,20):0,Q=this.maxLegendWidth,ee=ae.alignColumns&&this.totalItemWidth>Q?this.maxItemWidth:q.itemWidth,oe=q.legendItem||{};re&&this.itemX-fe+ee>Q&&(this.itemX=fe,this.lastLineHeight&&(this.itemY+=ve+this.lastLineHeight+ke),this.lastLineHeight=0),this.lastItemY=ve+this.itemY+ke,this.lastLineHeight=Math.max(ce,this.lastLineHeight),oe.x=this.itemX,oe.y=this.itemY,re?this.itemX+=ee:(this.itemY+=ve+ce+ke,this.lastLineHeight=ce),this.offsetWidth=this.widthOption||Math.max((re?this.itemX-fe-(q.checkbox?0:Ee):ee)+fe,this.offsetWidth)}getAllItems(){let q=[];return this.chart.series.forEach(function(ae){let fe=ae&&ae.options;ae&&$(fe.showInLegend,!N(fe.linkedTo)&&void 0,!0)&&(q=q.concat((ae.legendItem||{}).labels||(fe.legendType==="point"?ae.data:ae)))}),K(this,"afterGetAllItems",{allItems:q}),q}getAlignment(){let q=this.options;return this.proximate?q.align.charAt(0)+"tv":q.floating?"":q.align.charAt(0)+q.verticalAlign.charAt(0)+q.layout.charAt(0)}adjustMargins(q,ae){let fe=this.chart,re=this.options,ce=this.getAlignment();ce&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(ke,ve){ke.test(ce)&&!N(q[ve])&&(fe[S[ve]]=Math.max(fe[S[ve]],fe.legend[(ve+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][ve]*re[ve%2?"x":"y"]+$(re.margin,12)+ae[ve]+(fe.titleOffset[ve]||0)))})}proximatePositions(){let q,ae=this.chart,fe=[],re=this.options.align==="left";for(let ce of(this.allItems.forEach(function(ke){let ve,Ee,Q=re,ee,oe;ke.yAxis&&(ke.xAxis.options.reversed&&(Q=!Q),ke.points&&(ve=Z(Q?ke.points:ke.points.slice(0).reverse(),function(we){return j(we.plotY)})),Ee=this.itemMarginTop+ke.legendItem.label.getBBox().height+this.itemMarginBottom,oe=ke.yAxis.top-ae.plotTop,ee=ke.visible?(ve?ve.plotY:ke.yAxis.height)+(oe-.3*Ee):oe+ke.yAxis.height,fe.push({target:ee,size:Ee,item:ke}))},this),x(fe,ae.plotHeight)))q=ce.item.legendItem||{},j(ce.pos)&&(q.y=ae.plotTop-ae.spacing[0]+ce.pos)}render(){let q=this.chart,ae=q.renderer,fe=this.options,re=this.padding,ce=this.getAllItems(),ke,ve,Ee,Q=this.group,ee,oe=this.box;this.itemX=re,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=R(fe.width,q.spacingBox.width-re),ee=q.spacingBox.width-2*re-fe.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(ee/=2),this.maxLegendWidth=this.widthOption||ee,Q||(this.group=Q=ae.g("legend").addClass(fe.className||"").attr({zIndex:7}).add(),this.contentGroup=ae.g().attr({zIndex:1}).add(Q),this.scrollGroup=ae.g().add(this.contentGroup)),this.renderTitle(),G(ce,(we,J)=>(we.options&&we.options.legendIndex||0)-(J.options&&J.options.legendIndex||0)),fe.reversed&&ce.reverse(),this.allItems=ce,this.display=ke=!!ce.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,ce.forEach(this.renderItem,this),ce.forEach(this.layoutItem,this),ve=(this.widthOption||this.offsetWidth)+re,Ee=this.lastItemY+this.lastLineHeight+this.titleHeight,Ee=this.handleOverflow(Ee)+re,oe||(this.box=oe=ae.rect().addClass("highcharts-legend-box").attr({r:fe.borderRadius}).add(Q)),q.styledMode||oe.attr({stroke:fe.borderColor,"stroke-width":fe.borderWidth||0,fill:fe.backgroundColor||"none"}).shadow(fe.shadow),ve>0&&Ee>0&&oe[oe.placed?"animate":"attr"](oe.crisp.call({},{x:0,y:0,width:ve,height:Ee},oe.strokeWidth())),Q[ke?"show":"hide"](),q.styledMode&&Q.getStyle("display")==="none"&&(ve=Ee=0),this.legendWidth=ve,this.legendHeight=Ee,ke&&this.align(),this.proximate||this.positionItems(),K(this,"afterRender")}align(q=this.chart.spacingBox){let ae=this.chart,fe=this.options,re=q.y;/(lth|ct|rth)/.test(this.getAlignment())&&ae.titleOffset[0]>0?re+=ae.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&ae.titleOffset[2]>0&&(re-=ae.titleOffset[2]),re!==q.y&&(q=V(q,{y:re})),ae.hasRendered||(this.group.placed=!1),this.group.align(V(fe,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":fe.verticalAlign}),!0,q)}handleOverflow(q){let ae=this,fe=this.chart,re=fe.renderer,ce=this.options,ke=ce.y,ve=ce.verticalAlign==="top",Ee=this.padding,Q=ce.maxHeight,ee=ce.navigation,oe=$(ee.animation,!0),we=ee.arrowSize||12,J=this.pages,se=this.allItems,de=function(Ae){typeof Ae=="number"?qe.attr({height:Ae}):qe&&(ae.clipRect=qe.destroy(),ae.contentGroup.clip()),ae.contentGroup.div&&(ae.contentGroup.div.style.clip=Ae?"rect("+Ee+"px,9999px,"+(Ee+Ae)+"px,0)":"auto")},xe=function(Ae){return ae[Ae]=re.circle(0,0,1.3*we).translate(we/2,we/2).add(Ue),fe.styledMode||ae[Ae].attr("fill","rgba(0,0,0,0.0001)"),ae[Ae]},Ce,Ne,Te,Ie=fe.spacingBox.height+(ve?-ke:ke)-Ee,Ue=this.nav,qe=this.clipRect;return ce.layout!=="horizontal"||ce.verticalAlign==="middle"||ce.floating||(Ie/=2),Q&&(Ie=Math.min(Ie,Q)),J.length=0,q&&Ie>0&&q>Ie&&ee.enabled!==!1?(this.clipHeight=Ce=Math.max(Ie-20-this.titleHeight-Ee,0),this.currentPage=$(this.currentPage,1),this.fullHeight=q,se.forEach((Ae,ye)=>{let ge=(Te=Ae.legendItem||{}).y||0,Me=Math.round(Te.label.getBBox().height),De=J.length;(!De||ge-J[De-1]>Ce&&(Ne||ge)!==J[De-1])&&(J.push(Ne||ge),De++),Te.pageIx=De-1,Ne&&((se[ye-1].legendItem||{}).pageIx=De-1),ye===se.length-1&&ge+Me-J[De-1]>Ce&&ge>J[De-1]&&(J.push(ge),Te.pageIx=De),ge!==Ne&&(Ne=ge)}),qe||(qe=ae.clipRect=re.clipRect(0,Ee-2,9999,0),ae.contentGroup.clip(qe)),de(Ce),Ue||(this.nav=Ue=re.g().attr({zIndex:1}).add(this.group),this.up=re.symbol("triangle",0,0,we,we).add(Ue),xe("upTracker").on("click",function(){ae.scroll(-1,oe)}),this.pager=re.text("",15,10).addClass("highcharts-legend-navigation"),!fe.styledMode&&ee.style&&this.pager.css(ee.style),this.pager.add(Ue),this.down=re.symbol("triangle-down",0,0,we,we).add(Ue),xe("downTracker").on("click",function(){ae.scroll(1,oe)})),ae.scroll(0),q=Ie):Ue&&(de(),this.nav=Ue.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),q}scroll(q,ae){let fe=this.chart,re=this.pages,ce=re.length,ke=this.clipHeight,ve=this.options.navigation,Ee=this.pager,Q=this.padding,ee=this.currentPage+q;ee>ce&&(ee=ce),ee>0&&(ae!==void 0&&b(ae,fe),this.nav.attr({translateX:Q,translateY:ke+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(oe){oe.attr({class:ee===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Ee.attr({text:ee+"/"+ce}),[this.down,this.downTracker].forEach(function(oe){oe.attr({x:18+this.pager.getBBox().width,class:ee===ce?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),fe.styledMode||(this.up.attr({fill:ee===1?ve.inactiveColor:ve.activeColor}),this.upTracker.css({cursor:ee===1?"default":"pointer"}),this.down.attr({fill:ee===ce?ve.inactiveColor:ve.activeColor}),this.downTracker.css({cursor:ee===ce?"default":"pointer"})),this.scrollOffset=-re[ee-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=ee,this.positionCheckboxes(),U(()=>{K(this,"afterScroll",{currentPage:ee})},_($(ae,fe.renderer.globalAnimation,!0)).duration))}setItemEvents(q,ae,fe){let re=this,ce=q.legendItem||{},ke=re.chart.renderer.boxWrapper,ve=q instanceof p,Ee=q instanceof r,Q="highcharts-legend-"+(ve?"point":"series")+"-active",ee=re.chart.styledMode,oe=fe?[ae,ce.symbol]:[ce.group],we=J=>{re.allItems.forEach(se=>{q!==se&&[se].concat(se.linkedSeries||[]).forEach(de=>{de.setState(J,!ve)})})};for(let J of oe)J&&J.on("mouseover",function(){q.visible&&we("inactive"),q.setState("hover"),q.visible&&ke.addClass(Q),ee||ae.css(re.options.itemHoverStyle)}).on("mouseout",function(){re.chart.styledMode||ae.css(V(q.visible?re.itemStyle:re.itemHiddenStyle)),we(""),ke.removeClass(Q),q.setState()}).on("click",function(se){let de=function(){q.setVisible&&q.setVisible(),we(q.visible?"inactive":"")};ke.removeClass(Q),K(re,"itemClick",{browserEvent:se,legendItem:q},de),ve?q.firePointEvent("legendItemClick",{browserEvent:se}):Ee&&K(q,"legendItemClick",{browserEvent:se})})}createCheckboxForItem(q){q.checkbox=T("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:q.selected,defaultChecked:q.selected},this.options.itemCheckboxStyle,this.chart.container),D(q.checkbox,"click",function(ae){let fe=ae.target;K(q.series||q,"checkboxClick",{checked:fe.checked,item:q},function(){q.select()})})}}return(y=B).compose=function(H){L(E,"Core.Legend")&&D(H,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})},B}),n(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(s,l,u,r,p,f,m,v,y,_,b,C,E,S){let{animate:x,animObject:A,setAnimation:D}=s,{defaultOptions:T,defaultTime:k}=u,{numberFormat:N}=r,{registerEventOptions:W}=p,{charts:Z,doc:K,marginNames:j,svg:V,win:$}=f,{seriesTypes:L}=y,{addEvent:R,attr:G,createElement:U,css:B,defined:H,diffObjects:q,discardElement:ae,erase:fe,error:re,extend:ce,find:ke,fireEvent:ve,getStyle:Ee,isArray:Q,isNumber:ee,isObject:oe,isString:we,merge:J,objectEach:se,pick:de,pInt:xe,relativeLength:Ce,removeEvent:Ne,splat:Te,syncTimeout:Ie,uniqueKey:Ue}=C;class qe{static chart(ye,ge,Me){return new qe(ye,ge,Me)}constructor(ye,ge,Me){this.sharedClips={};let De=[...arguments];(we(ye)||ye.nodeName)&&(this.renderTo=De.shift()),this.init(De[0],De[1])}setZoomOptions(){let ye=this.options.chart,ge=ye.zooming;this.zooming={...ge,type:de(ye.zoomType,ge.type),key:de(ye.zoomKey,ge.key),pinchType:de(ye.pinchType,ge.pinchType),singleTouch:de(ye.zoomBySingleTouch,ge.singleTouch,!1),resetButton:J(ge.resetButton,ye.resetZoomButton)}}init(ye,ge){ve(this,"init",{args:arguments},function(){let Me=J(T,ye),De=Me.chart;this.userOptions=ce({},ye),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=ge,this.isResizing=0,this.options=Me,this.axes=[],this.series=[],this.time=ye.time&&Object.keys(ye.time).length?new b(ye.time):f.time,this.numberFormatter=De.numberFormatter||N,this.styledMode=De.styledMode,this.hasCartesianSeries=De.showAxes,this.index=Z.length,Z.push(this),f.chartCount++,W(this,De),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),ve(this,"afterInit"),this.firstRender()})}initSeries(ye){let ge=this.options.chart,Me=ye.type||ge.type,De=L[Me];De||re(17,!0,this,{missingModuleFor:Me});let Pe=new De;return typeof Pe.init=="function"&&Pe.init(this,ye),Pe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(ye){ye.points||ye.data||!ye.enabledDataSorting||ye.setData(ye.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(ye,ge){return ye.linkedSeries.length||ge.linkedSeries.length?ge.linkedSeries.length-ye.linkedSeries.length:0})}orderItems(ye,ge=0){let Me=this[ye],De=this.options[ye]=Te(this.options[ye]).slice(),Pe=this.userOptions[ye]=this.userOptions[ye]?Te(this.userOptions[ye]).slice():[];if(this.hasRendered&&(De.splice(ge),Pe.splice(ge)),Me)for(let $e=ge,Ke=Me.length;$e<Ke;++$e){let tt=Me[$e];tt&&(tt.index=$e,tt instanceof v&&(tt.name=tt.getName()),tt.options.isInternal||(De[$e]=tt.options,Pe[$e]=tt.userOptions))}}isInsidePlot(ye,ge,Me={}){var Tt;let{inverted:De,plotBox:Pe,plotLeft:$e,plotTop:Ke,scrollablePlotBox:tt}=this,{scrollLeft:nt=0,scrollTop:ht=0}=Me.visiblePlotOnly&&((Tt=this.scrollablePlotArea)==null?void 0:Tt.scrollingContainer)||{},gt=Me.series,Ct=Me.visiblePlotOnly&&tt||Pe,Lt=Me.inverted?ge:ye,ft=Me.inverted?ye:ge,Et={x:Lt,y:ft,isInsidePlot:!0,options:Me};if(!Me.ignoreX){let ai=gt&&(De&&!this.polar?gt.yAxis:gt.xAxis)||{pos:$e,len:1/0},hi=Me.paneCoordinates?ai.pos+Lt:$e+Lt;hi>=Math.max(nt+$e,ai.pos)&&hi<=Math.min(nt+$e+Ct.width,ai.pos+ai.len)||(Et.isInsidePlot=!1)}if(!Me.ignoreY&&Et.isInsidePlot){let ai=!De&&Me.axis&&!Me.axis.isXAxis&&Me.axis||gt&&(De?gt.xAxis:gt.yAxis)||{pos:Ke,len:1/0},hi=Me.paneCoordinates?ai.pos+ft:Ke+ft;hi>=Math.max(ht+Ke,ai.pos)&&hi<=Math.min(ht+Ke+Ct.height,ai.pos+ai.len)||(Et.isInsidePlot=!1)}return ve(this,"afterIsInsidePlot",Et),Et.isInsidePlot}redraw(ye){ve(this,"beforeRedraw");let ge=this.hasCartesianSeries?this.axes:this.colorAxis||[],Me=this.series,De=this.pointer,Pe=this.legend,$e=this.userOptions.legend,Ke=this.renderer,tt=Ke.isHidden(),nt=[],ht,gt,Ct,Lt=this.isDirtyBox,ft=this.isDirtyLegend,Et;for(Ke.rootFontSize=Ke.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&ye,this),tt&&this.temporaryDisplay(),this.layOutTitles(!1),Ct=Me.length;Ct--;)if(((Et=Me[Ct]).options.stacking||Et.options.centerInCategory)&&(gt=!0,Et.isDirty)){ht=!0;break}if(ht)for(Ct=Me.length;Ct--;)(Et=Me[Ct]).options.stacking&&(Et.isDirty=!0);Me.forEach(function(Tt){Tt.isDirty&&(Tt.options.legendType==="point"?(typeof Tt.updateTotals=="function"&&Tt.updateTotals(),ft=!0):$e&&($e.labelFormatter||$e.labelFormat)&&(ft=!0)),Tt.isDirtyData&&ve(Tt,"updatedData")}),ft&&Pe&&Pe.options.enabled&&(Pe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),ge.forEach(function(Tt){Tt.updateNames(),Tt.setScale()}),this.getMargins(),ge.forEach(function(Tt){Tt.isDirty&&(Lt=!0)}),ge.forEach(function(Tt){let ai=Tt.min+","+Tt.max;Tt.extKey!==ai&&(Tt.extKey=ai,nt.push(function(){ve(Tt,"afterSetExtremes",ce(Tt.eventArgs,Tt.getExtremes())),delete Tt.eventArgs})),(Lt||gt)&&Tt.redraw()}),Lt&&this.drawChartBox(),ve(this,"predraw"),Me.forEach(function(Tt){(Lt||Tt.isDirty)&&Tt.visible&&Tt.redraw(),Tt.isDirtyData=!1}),De&&De.reset(!0),Ke.draw(),ve(this,"redraw"),ve(this,"render"),tt&&this.temporaryDisplay(!0),nt.forEach(function(Tt){Tt.call()})}get(ye){let ge=this.series;function Me(Pe){return Pe.id===ye||Pe.options&&Pe.options.id===ye}let De=ke(this.axes,Me)||ke(this.series,Me);for(let Pe=0;!De&&Pe<ge.length;Pe++)De=ke(ge[Pe].points||[],Me);return De}getAxes(){let ye=this.userOptions;for(let ge of(ve(this,"getAxes"),["xAxis","yAxis"]))for(let Me of ye[ge]=Te(ye[ge]||{}))new l(this,Me,ge);ve(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((ye,ge)=>(ge.getPointsCollection().forEach(Me=>{de(Me.selectedStaging,Me.selected)&&ye.push(Me)}),ye),[])}getSelectedSeries(){return this.series.filter(function(ye){return ye.selected})}setTitle(ye,ge,Me){this.applyDescription("title",ye),this.applyDescription("subtitle",ge),this.applyDescription("caption",void 0),this.layOutTitles(Me)}applyDescription(ye,ge){let Me=this,De=this.options[ye]=J(this.options[ye],ge),Pe=this[ye];Pe&&ge&&(this[ye]=Pe=Pe.destroy()),De&&!Pe&&((Pe=this.renderer.text(De.text,0,0,De.useHTML).attr({align:De.align,class:"highcharts-"+ye,zIndex:De.zIndex||4}).add()).update=function($e,Ke){Me.applyDescription(ye,$e),Me.layOutTitles(Ke)},this.styledMode||Pe.css(ce(ye==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},De.style)),this[ye]=Pe)}layOutTitles(ye=!0){let ge=[0,0,0],Me=this.renderer,De=this.spacingBox;["title","subtitle","caption"].forEach(function($e){let Ke=this[$e],tt=this.options[$e],nt=tt.verticalAlign||"top",ht=$e==="title"?nt==="top"?-3:0:nt==="top"?ge[0]+2:0;if(Ke){Ke.css({width:(tt.width||De.width+(tt.widthAdjust||0))+"px"});let gt=Me.fontMetrics(Ke).b,Ct=Math.round(Ke.getBBox(tt.useHTML).height);Ke.align(ce({y:nt==="bottom"?gt:ht+gt,height:Ct},tt),!1,"spacingBox"),tt.floating||(nt==="top"?ge[0]=Math.ceil(ge[0]+Ct):nt==="bottom"&&(ge[2]=Math.ceil(ge[2]+Ct)))}},this),ge[0]&&(this.options.title.verticalAlign||"top")==="top"&&(ge[0]+=this.options.title.margin),ge[2]&&this.options.caption.verticalAlign==="bottom"&&(ge[2]+=this.options.caption.margin);let Pe=!this.titleOffset||this.titleOffset.join(",")!==ge.join(",");this.titleOffset=ge,ve(this,"afterLayOutTitles"),!this.isDirtyBox&&Pe&&(this.isDirtyBox=this.isDirtyLegend=Pe,this.hasRendered&&ye&&this.isDirtyBox&&this.redraw())}getContainerBox(){let ye=[].map.call(this.renderTo.children,Me=>{if(Me!==this.container){let De=Me.style.display;return Me.style.display="none",[Me,De]}}),ge={width:Ee(this.renderTo,"width",!0)||0,height:Ee(this.renderTo,"height",!0)||0};return ye.filter(Boolean).forEach(([Me,De])=>{Me.style.display=De}),ge}getChartSize(){var $e;let ye=this.options.chart,ge=ye.width,Me=ye.height,De=this.getContainerBox(),Pe=De.height>1&&!(!(($e=this.renderTo.parentElement)!=null&&$e.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,ge||De.width||600),this.chartHeight=Math.max(0,Ce(Me,this.chartWidth)||(Pe?De.height:400)),this.containerBox=De}temporaryDisplay(ye){let ge=this.renderTo,Me;if(ye)for(;ge&&ge.style;)ge.hcOrigStyle&&(B(ge,ge.hcOrigStyle),delete ge.hcOrigStyle),ge.hcOrigDetached&&(K.body.removeChild(ge),ge.hcOrigDetached=!1),ge=ge.parentNode;else for(;ge&&ge.style&&(K.body.contains(ge)||ge.parentNode||(ge.hcOrigDetached=!0,K.body.appendChild(ge)),(Ee(ge,"display",!1)==="none"||ge.hcOricDetached)&&(ge.hcOrigStyle={display:ge.style.display,height:ge.style.height,overflow:ge.style.overflow},Me={display:"block",overflow:"hidden"},ge!==this.renderTo&&(Me.height=0),B(ge,Me),ge.offsetWidth||ge.style.setProperty("display","block","important")),(ge=ge.parentNode)!==K.body););}setClassName(ye){this.container.className="highcharts-container "+(ye||"")}getContainer(){var Ct;let ye=this.options,ge=ye.chart,Me="data-highcharts-chart",De=Ue(),Pe,$e=this.renderTo;$e||(this.renderTo=$e=ge.renderTo),we($e)&&(this.renderTo=$e=K.getElementById($e)),$e||re(13,!0,this);let Ke=xe(G($e,Me));ee(Ke)&&Z[Ke]&&Z[Ke].hasRendered&&Z[Ke].destroy(),G($e,Me,this.index),$e.innerHTML=E.emptyHTML,ge.skipClone||$e.offsetWidth||this.temporaryDisplay(),this.getChartSize();let tt=this.chartHeight,nt=this.chartWidth;B($e,{overflow:"hidden"}),this.styledMode||(Pe=ce({position:"relative",overflow:"hidden",width:nt+"px",height:tt+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},ge.style||{}));let ht=U("div",{id:De},Pe,$e);this.container=ht,this.getChartSize(),nt===this.chartWidth||(nt=this.chartWidth,this.styledMode||B(ht,{width:de((Ct=ge.style)==null?void 0:Ct.width,nt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=ht.style.cursor;let gt=ge.renderer||!V?m.getRendererType(ge.renderer):_;if(this.renderer=new gt(ht,nt,tt,void 0,ge.forExport,ye.exporting&&ye.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(ge.className),this.styledMode)for(let Lt in ye.defs)this.renderer.definition(ye.defs[Lt]);else this.renderer.setStyle(ge.style);this.renderer.chartIndex=this.index,ve(this,"afterGetContainer")}getMargins(ye){let{spacing:ge,margin:Me,titleOffset:De}=this;this.resetMargins(),De[0]&&!H(Me[0])&&(this.plotTop=Math.max(this.plotTop,De[0]+ge[0])),De[2]&&!H(Me[2])&&(this.marginBottom=Math.max(this.marginBottom,De[2]+ge[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Me,ge),ve(this,"getMargins"),ye||this.getAxisMargins()}getAxisMargins(){let ye=this,ge=ye.axisOffset=[0,0,0,0],Me=ye.colorAxis,De=ye.margin,Pe=function($e){$e.forEach(function(Ke){Ke.visible&&Ke.getOffset()})};ye.hasCartesianSeries?Pe(ye.axes):Me&&Me.length&&Pe(Me),j.forEach(function($e,Ke){H(De[Ke])||(ye[$e]+=ge[Ke])}),ye.setChartSize()}getOptions(){return q(this.userOptions,T)}reflow(ye){var Pe;let ge=this,Me=ge.containerBox,De=ge.getContainerBox();(Pe=ge.pointer)==null||delete Pe.chartPosition,!ge.isPrinting&&!ge.isResizing&&Me&&De.width&&((De.width!==Me.width||De.height!==Me.height)&&(C.clearTimeout(ge.reflowTimeout),ge.reflowTimeout=Ie(function(){ge.container&&ge.setSize(void 0,void 0,!1)},ye?100:0)),ge.containerBox=De)}setReflow(){let ye=this,ge=Me=>{var De;(De=ye.options)!=null&&De.chart.reflow&&ye.hasLoaded&&ye.reflow(Me)};if(typeof ResizeObserver=="function")new ResizeObserver(ge).observe(ye.renderTo);else{let Me=R($,"resize",ge);R(this,"destroy",Me)}}setSize(ye,ge,Me){let De=this,Pe=De.renderer;De.isResizing+=1,D(Me,De);let $e=Pe.globalAnimation;De.oldChartHeight=De.chartHeight,De.oldChartWidth=De.chartWidth,ye!==void 0&&(De.options.chart.width=ye),ge!==void 0&&(De.options.chart.height=ge),De.getChartSize();let{chartWidth:Ke,chartHeight:tt,scrollablePixelsX:nt=0,scrollablePixelsY:ht=0}=De;(De.isDirtyBox||Ke!==De.oldChartWidth||tt!==De.oldChartHeight)&&(De.styledMode||($e?x:B)(De.container,{width:`${Ke+nt}px`,height:`${tt+ht}px`},$e),De.setChartSize(!0),Pe.setSize(Ke,tt,$e),De.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),De.isDirtyLegend=!0,De.isDirtyBox=!0,De.layOutTitles(),De.getMargins(),De.redraw($e),De.oldChartHeight=void 0,ve(De,"resize"),setTimeout(()=>{De&&ve(De,"endResize")},A($e).duration)),De.isResizing-=1}setChartSize(ye){let ge,Me,De,Pe,{chartHeight:$e,chartWidth:Ke,inverted:tt,spacing:nt,renderer:ht}=this,gt=this.clipOffset,Ct=Math[tt?"floor":"round"];this.plotLeft=ge=Math.round(this.plotLeft),this.plotTop=Me=Math.round(this.plotTop),this.plotWidth=De=Math.max(0,Math.round(Ke-ge-this.marginRight)),this.plotHeight=Pe=Math.max(0,Math.round($e-Me-this.marginBottom)),this.plotSizeX=tt?Pe:De,this.plotSizeY=tt?De:Pe,this.spacingBox=ht.spacingBox={x:nt[3],y:nt[0],width:Ke-nt[3]-nt[1],height:$e-nt[0]-nt[2]},this.plotBox=ht.plotBox={x:ge,y:Me,width:De,height:Pe},gt&&(this.clipBox={x:Ct(gt[3]),y:Ct(gt[0]),width:Ct(this.plotSizeX-gt[1]-gt[3]),height:Ct(this.plotSizeY-gt[0]-gt[2])}),ye||(this.axes.forEach(function(Lt){Lt.setAxisSize(),Lt.setAxisTranslation()}),ht.alignElements()),ve(this,"afterSetChartSize",{skipAxes:ye})}resetMargins(){ve(this,"resetMargins");let ye=this,ge=ye.options.chart,Me=ge.plotBorderWidth||0,De=Me/2;["margin","spacing"].forEach(function(Pe){let $e=ge[Pe],Ke=oe($e)?$e:[$e,$e,$e,$e];["Top","Right","Bottom","Left"].forEach(function(tt,nt){ye[Pe][nt]=de(ge[Pe+tt],Ke[nt])})}),j.forEach(function(Pe,$e){ye[Pe]=de(ye.margin[$e],ye.spacing[$e])}),ye.axisOffset=[0,0,0,0],ye.clipOffset=[De,De,De,De],ye.plotBorderWidth=Me}drawChartBox(){let ye=this.options.chart,ge=this.renderer,Me=this.chartWidth,De=this.chartHeight,Pe=this.styledMode,$e=this.plotBGImage,Ke=ye.backgroundColor,tt=ye.plotBackgroundColor,nt=ye.plotBackgroundImage,ht=this.plotLeft,gt=this.plotTop,Ct=this.plotWidth,Lt=this.plotHeight,ft=this.plotBox,Et=this.clipRect,Tt=this.clipBox,ai=this.chartBackground,hi=this.plotBackground,qt=this.plotBorder,un,Qi,bn,Bn="animate";ai||(this.chartBackground=ai=ge.rect().addClass("highcharts-background").add(),Bn="attr"),Pe?un=Qi=ai.strokeWidth():(Qi=(un=ye.borderWidth||0)+(ye.shadow?8:0),bn={fill:Ke||"none"},(un||ai["stroke-width"])&&(bn.stroke=ye.borderColor,bn["stroke-width"]=un),ai.attr(bn).shadow(ye.shadow)),ai[Bn]({x:Qi/2,y:Qi/2,width:Me-Qi-un%2,height:De-Qi-un%2,r:ye.borderRadius}),Bn="animate",hi||(Bn="attr",this.plotBackground=hi=ge.rect().addClass("highcharts-plot-background").add()),hi[Bn](ft),!Pe&&(hi.attr({fill:tt||"none"}).shadow(ye.plotShadow),nt&&($e?(nt!==$e.attr("href")&&$e.attr("href",nt),$e.animate(ft)):this.plotBGImage=ge.image(nt,ht,gt,Ct,Lt).add())),Et?Et.animate({width:Tt.width,height:Tt.height}):this.clipRect=ge.clipRect(Tt),Bn="animate",qt||(Bn="attr",this.plotBorder=qt=ge.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Pe||qt.attr({stroke:ye.plotBorderColor,"stroke-width":ye.plotBorderWidth||0,fill:"none"}),qt[Bn](qt.crisp({x:ht,y:gt,width:Ct,height:Lt},-qt.strokeWidth())),this.isDirtyBox=!1,ve(this,"afterDrawChartBox")}propFromSeries(){let ye,ge,Me,De=this,Pe=De.options.chart,$e=De.options.series;["inverted","angular","polar"].forEach(function(Ke){for(ge=L[Pe.type],Me=Pe[Ke]||ge&&ge.prototype[Ke],ye=$e&&$e.length;!Me&&ye--;)(ge=L[$e[ye].type])&&ge.prototype[Ke]&&(Me=!0);De[Ke]=Me})}linkSeries(ye){let ge=this,Me=ge.series;Me.forEach(function(De){De.linkedSeries.length=0}),Me.forEach(function(De){let{linkedTo:Pe}=De.options;if(we(Pe)){let $e;($e=Pe===":previous"?ge.series[De.index-1]:ge.get(Pe))&&$e.linkedParent!==De&&($e.linkedSeries.push(De),De.linkedParent=$e,$e.enabledDataSorting&&De.setDataSortingOptions(),De.visible=de(De.options.visible,$e.options.visible,De.visible))}}),ve(this,"afterLinkSeries",{isUpdating:ye})}renderSeries(){this.series.forEach(function(ye){ye.translate(),ye.render()})}render(){var ht;let ye=this.axes,ge=this.colorAxis,Me=this.renderer,De=this.options.chart.axisLayoutRuns||2,Pe=gt=>{gt.forEach(Ct=>{Ct.visible&&Ct.render()})},$e=0,Ke=!0,tt,nt=0;for(let gt of(this.setTitle(),ve(this,"beforeMargins"),(ht=this.getStacks)==null||ht.call(this),this.getMargins(!0),this.setChartSize(),ye)){let{options:Ct}=gt,{labels:Lt}=Ct;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Lt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){$e=Ct.tickLength,gt.createGroups();let ft=new S(gt,0,"",!0),Et=ft.createLabel("x",Lt);if(ft.destroy(),Et&&de(Lt.reserveSpace,!ee(Ct.crossing))&&($e=Et.getBBox().height+Lt.distance+Math.max(Ct.offset||0,0)),$e){Et==null||Et.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-$e,0);(Ke||tt||De>1)&&nt<De;){let gt=this.plotWidth,Ct=this.plotHeight;for(let Lt of ye)nt===0?Lt.setScale():(Lt.horiz&&Ke||!Lt.horiz&&tt)&&Lt.setTickInterval(!0);nt===0?this.getAxisMargins():this.getMargins(),Ke=gt/this.plotWidth>(nt?1:1.1),tt=Ct/this.plotHeight>(nt?1:1.05),nt++}this.drawChartBox(),this.hasCartesianSeries?Pe(ye):ge&&ge.length&&Pe(ge),this.seriesGroup||(this.seriesGroup=Me.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(ye){let ge=this,Me=J(!0,this.options.credits,ye);Me.enabled&&!this.credits&&(this.credits=this.renderer.text(Me.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Me.href&&($.location.href=Me.href)}).attr({align:Me.position.align,zIndex:8}),ge.styledMode||this.credits.css(Me.style),this.credits.add().align(Me.position),this.credits.update=function(De){ge.credits=ge.credits.destroy(),ge.addCredits(De)})}destroy(){let ye,ge=this,Me=ge.axes,De=ge.series,Pe=ge.container,$e=Pe&&Pe.parentNode;for(ve(ge,"destroy"),ge.renderer.forExport?fe(Z,ge):Z[ge.index]=void 0,f.chartCount--,ge.renderTo.removeAttribute("data-highcharts-chart"),Ne(ge),ye=Me.length;ye--;)Me[ye]=Me[ye].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),ye=De.length;ye--;)De[ye]=De[ye].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Ke){let tt=ge[Ke];tt&&tt.destroy&&(ge[Ke]=tt.destroy())}),Pe&&(Pe.innerHTML=E.emptyHTML,Ne(Pe),$e&&ae(Pe)),se(ge,function(Ke,tt){delete ge[tt]})}firstRender(){var De;let ye=this,ge=ye.options;ye.getContainer(),ye.resetMargins(),ye.setChartSize(),ye.propFromSeries(),ye.getAxes();let Me=Q(ge.series)?ge.series:[];ge.series=[],Me.forEach(function(Pe){ye.initSeries(Pe)}),ye.linkSeries(),ye.setSortedData(),ve(ye,"beforeRender"),ye.render(),(De=ye.pointer)==null||De.getChartPosition(),ye.renderer.imgCount||ye.hasLoaded||ye.onload(),ye.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(ye){ye&&this.index!==void 0&&ye.apply(this,[this])},this),ve(this,"load"),ve(this,"render"),H(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:ye,title:ge}=this;!ye||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(ge&&ge.element.textContent||"").replace(/</g,"&lt;")}),ye.accessibility&&ye.accessibility.enabled===!1||re('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(ye,ge,Me){let De,Pe=this;return ye&&(ge=de(ge,!0),ve(Pe,"addSeries",{options:ye},function(){De=Pe.initSeries(ye),Pe.isDirtyLegend=!0,Pe.linkSeries(),De.enabledDataSorting&&De.setData(ye.data,!1),ve(Pe,"afterAddSeries",{series:De}),ge&&Pe.redraw(Me)})),De}addAxis(ye,ge,Me,De){return this.createAxis(ge?"xAxis":"yAxis",{axis:ye,redraw:Me,animation:De})}addColorAxis(ye,ge,Me){return this.createAxis("colorAxis",{axis:ye,redraw:ge,animation:Me})}createAxis(ye,ge){let Me=new l(this,ge.axis,ye);return de(ge.redraw,!0)&&this.redraw(ge.animation),Me}showLoading(ye){let ge=this,Me=ge.options,De=Me.loading,Pe=function(){$e&&B($e,{left:ge.plotLeft+"px",top:ge.plotTop+"px",width:ge.plotWidth+"px",height:ge.plotHeight+"px"})},$e=ge.loadingDiv,Ke=ge.loadingSpan;$e||(ge.loadingDiv=$e=U("div",{className:"highcharts-loading highcharts-loading-hidden"},null,ge.container)),Ke||(ge.loadingSpan=Ke=U("span",{className:"highcharts-loading-inner"},null,$e),R(ge,"redraw",Pe)),$e.className="highcharts-loading",E.setElementHTML(Ke,de(ye,Me.lang.loading,"")),ge.styledMode||(B($e,ce(De.style,{zIndex:10})),B(Ke,De.labelStyle),ge.loadingShown||(B($e,{opacity:0,display:""}),x($e,{opacity:De.style.opacity||.5},{duration:De.showDuration||0}))),ge.loadingShown=!0,Pe()}hideLoading(){let ye=this.options,ge=this.loadingDiv;ge&&(ge.className="highcharts-loading highcharts-loading-hidden",this.styledMode||x(ge,{opacity:0},{duration:ye.loading.hideDuration||100,complete:function(){B(ge,{display:"none"})}})),this.loadingShown=!1}update(ye,ge,Me,De){let Pe,$e,Ke,tt=this,nt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},ht=ye.isResponsiveOptions,gt=[];ve(tt,"update",{options:ye}),ht||tt.setResponsive(!1,!0),ye=q(ye,tt.options),tt.userOptions=J(tt.userOptions,ye);let Ct=ye.chart;Ct&&(J(!0,tt.options.chart,Ct),this.setZoomOptions(),"className"in Ct&&tt.setClassName(Ct.className),("inverted"in Ct||"polar"in Ct||"type"in Ct)&&(tt.propFromSeries(),Pe=!0),"alignTicks"in Ct&&(Pe=!0),"events"in Ct&&W(this,Ct),se(Ct,function(Et,Tt){tt.propsRequireUpdateSeries.indexOf("chart."+Tt)!==-1&&($e=!0),tt.propsRequireDirtyBox.indexOf(Tt)!==-1&&(tt.isDirtyBox=!0),tt.propsRequireReflow.indexOf(Tt)===-1||(tt.isDirtyBox=!0,ht||(Ke=!0))}),!tt.styledMode&&Ct.style&&tt.renderer.setStyle(tt.options.chart.style||{})),!tt.styledMode&&ye.colors&&(this.options.colors=ye.colors),ye.time&&(this.time===k&&(this.time=new b(ye.time)),J(!0,tt.options.time,ye.time)),se(ye,function(Et,Tt){tt[Tt]&&typeof tt[Tt].update=="function"?tt[Tt].update(Et,!1):typeof tt[nt[Tt]]=="function"?tt[nt[Tt]](Et):Tt!=="colors"&&tt.collectionsWithUpdate.indexOf(Tt)===-1&&J(!0,tt.options[Tt],ye[Tt]),Tt!=="chart"&&tt.propsRequireUpdateSeries.indexOf(Tt)!==-1&&($e=!0)}),this.collectionsWithUpdate.forEach(function(Et){ye[Et]&&(Te(ye[Et]).forEach(function(Tt,ai){let hi,qt=H(Tt.id);qt&&(hi=tt.get(Tt.id)),!hi&&tt[Et]&&(hi=tt[Et][de(Tt.index,ai)])&&(qt&&H(hi.options.id)||hi.options.isInternal)&&(hi=void 0),hi&&hi.coll===Et&&(hi.update(Tt,!1),Me&&(hi.touched=!0)),!hi&&Me&&tt.collectionsWithInit[Et]&&(tt.collectionsWithInit[Et][0].apply(tt,[Tt].concat(tt.collectionsWithInit[Et][1]||[]).concat([!1])).touched=!0)}),Me&&tt[Et].forEach(function(Tt){Tt.touched||Tt.options.isInternal?delete Tt.touched:gt.push(Tt)}))}),gt.forEach(function(Et){Et.chart&&Et.remove&&Et.remove(!1)}),Pe&&tt.axes.forEach(function(Et){Et.update({},!1)}),$e&&tt.getSeriesOrderByLinks().forEach(function(Et){Et.chart&&Et.update({},!1)},this);let Lt=Ct&&Ct.width,ft=Ct&&(we(Ct.height)?Ce(Ct.height,Lt||tt.chartWidth):Ct.height);Ke||ee(Lt)&&Lt!==tt.chartWidth||ee(ft)&&ft!==tt.chartHeight?tt.setSize(Lt,ft,De):de(ge,!0)&&tt.redraw(De),ve(tt,"afterUpdate",{options:ye,redraw:ge,animation:De})}setSubtitle(ye,ge){this.applyDescription("subtitle",ye),this.layOutTitles(ge)}setCaption(ye,ge){this.applyDescription("caption",ye),this.layOutTitles(ge)}showResetZoom(){let ye=this,ge=T.lang,Me=ye.zooming.resetButton,De=Me.theme,Pe=Me.relativeTo==="chart"||Me.relativeTo==="spacingBox"?null:"plotBox";function $e(){ye.zoomOut()}ve(this,"beforeShowResetZoom",null,function(){ye.resetZoomButton=ye.renderer.button(ge.resetZoom,null,null,$e,De).attr({align:Me.position.align,title:ge.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Me.position,!1,Pe)}),ve(this,"afterShowResetZoom")}zoomOut(){ve(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(ye,ge){let Me=this,De=typeof ge=="object"?ge:{enabled:ge,type:"x"},Pe=De.type,$e=Pe&&Me[{x:"xAxis",xy:"axes",y:"yAxis"}[Pe]].filter(tt=>tt.options.panningEnabled&&!tt.options.isInternal),Ke=Me.options.chart;Ke!=null&&Ke.panning&&(Ke.panning=De),ve(this,"pan",{originalEvent:ye},()=>{Me.transform({axes:$e,event:ye,to:{x:ye.chartX-(Me.mouseDownX||0),y:ye.chartY-(Me.mouseDownY||0)},trigger:"pan"}),B(Me.container,{cursor:"move"})})}transform(ye){var Lt;let{axes:ge=this.axes,event:Me,from:De={},reset:Pe,selection:$e,to:Ke={},trigger:tt}=ye,{inverted:nt}=this,ht=!1,gt,Ct;for(let ft of((Lt=this.hoverPoints)==null||Lt.forEach(Et=>Et.setState()),ge)){let{horiz:Et,len:Tt,minPointOffset:ai=0,options:hi,reversed:qt}=ft,un=Et?"width":"height",Qi=Et?"x":"y",bn=de(Ke[un],ft.len),Bn=de(De[un],ft.len),an=10>Math.abs(bn)?1:bn/Bn,dt=(De[Qi]||0)+Bn/2-ft.pos,vt=dt-((Ke[Qi]??ft.pos)+bn/2-ft.pos)/an,It=qt&&!nt||!qt&&nt?-1:1;if(!Pe&&(dt<0||dt>ft.len))continue;let Ft=ft.toValue(vt,!0)+($e||ft.isOrdinal?0:ai*It),Yt=ft.toValue(vt+Tt/an,!0)-($e||ft.isOrdinal?0:ai*It||0),vi=ft.allExtremes;if(Ft>Yt&&([Ft,Yt]=[Yt,Ft]),an===1&&!Pe&&ft.coll==="yAxis"&&!vi){for(let zt of ft.series){let Rt=zt.getExtremes(zt.getProcessedData(!0).yData,!0);vi??(vi={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),ee(Rt.dataMin)&&ee(Rt.dataMax)&&(vi.dataMin=Math.min(Rt.dataMin,vi.dataMin),vi.dataMax=Math.max(Rt.dataMax,vi.dataMax))}ft.allExtremes=vi}let{dataMin:Oi,dataMax:pi,min:We,max:be}=ce(ft.getExtremes(),vi||{}),Le=Oi??hi.min,Ge=pi??hi.max,Qe=Yt-Ft,st=ft.categories?0:Math.min(Qe,Ge-Le),ct=Le-st*(H(hi.min)?0:hi.minPadding),ot=Ge+st*(H(hi.max)?0:hi.maxPadding),rt=ft.allowZoomOutside||an===1||tt!=="zoom"&&an>1,mt=Math.min(hi.min??ct,ct,rt?We:ct),At=Math.max(hi.max??ot,ot,rt?be:ot);(!ft.isOrdinal||ft.options.overscroll||an!==1||Pe)&&(Ft<mt&&(Ft=mt,an>=1&&(Yt=Ft+Qe)),Yt>At&&(Yt=At,an>=1&&(Ft=Yt-Qe)),(Pe||ft.series.length&&(Ft!==We||Yt!==be)&&Ft>=mt&&Yt<=At)&&($e?$e[ft.coll].push({axis:ft,min:Ft,max:Yt}):(ft.isPanning=tt!=="zoom",ft.isPanning&&(Ct=!0),ft.setExtremes(Pe?void 0:Ft,Pe?void 0:Yt,!1,!1,{move:vt,trigger:tt,scale:an}),!Pe&&(Ft>mt||Yt<At)&&tt!=="mousewheel"&&(gt=!0)),ht=!0),Me&&(this[Et?"mouseDownX":"mouseDownY"]=Me[Et?"chartX":"chartY"]))}return ht&&($e?ve(this,"selection",$e,()=>{delete ye.selection,ye.trigger="zoom",this.transform(ye)}):(!gt||Ct||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(tt==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),ht}}return ce(qe.prototype,{callbacks:[],collectionsWithInit:{xAxis:[qe.prototype.addAxis,[!0]],yAxis:[qe.prototype.addAxis,[!1]],series:[qe.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),qe}),n(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{stop:p}=s,{composed:f}=l,{addEvent:m,createElement:v,css:y,defined:_,merge:b,pushUnique:C}=r;function E(){let A=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!A&&(this.scrollablePlotArea=A=new x(this)),A==null||A.applyFixed()}function S(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class x{static compose(D,T,k){C(f,this.compose)&&(m(D,"afterInit",S),m(T,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),m(T,"render",E),m(k,"show",S))}static afterSetSize(D,T){let k,N,W,{minWidth:Z,minHeight:K}=D.options.chart.scrollablePlotArea||{},{clipBox:j,plotBox:V,inverted:$,renderer:L}=D;if(!L.forExport&&(Z?(D.scrollablePixelsX=k=Math.max(0,Z-D.chartWidth),k&&(D.scrollablePlotBox=b(D.plotBox),V.width=D.plotWidth+=k,j[$?"height":"width"]+=k,W=!0)):K&&(D.scrollablePixelsY=N=Math.max(0,K-D.chartHeight),_(N)&&(D.scrollablePlotBox=b(D.plotBox),V.height=D.plotHeight+=N,j[$?"width":"height"]+=N,W=!1)),_(W)&&!T.skipAxes))for(let R of D.axes)R.horiz===W&&(R.setAxisSize(),R.setAxisTranslation())}constructor(D){var G;let T,k=D.options.chart,N=u.getRendererType(),W=k.scrollablePlotArea||{},Z=this.moveFixedElements.bind(this),K={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};D.scrollablePixelsX&&(K.overflowX="auto"),D.scrollablePixelsY&&(K.overflowY="auto"),this.chart=D;let j=this.parentDiv=v("div",{className:"highcharts-scrolling-parent"},{position:"relative"},D.renderTo),V=this.scrollingContainer=v("div",{className:"highcharts-scrolling"},K,j),$=this.innerContainer=v("div",{className:"highcharts-inner-container"},void 0,V),L=this.fixedDiv=v("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=k.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),R=this.fixedRenderer=new N(L,D.chartWidth,D.chartHeight,k.style);this.mask=R.path().attr({fill:k.backgroundColor||"#fff","fill-opacity":W.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),V.parentNode.insertBefore(L,V),y(D.renderTo,{overflow:"visible"}),m(D,"afterShowResetZoom",Z),m(D,"afterApplyDrilldown",Z),m(D,"afterLayOutTitles",Z),m(V,"scroll",()=>{let{pointer:U,hoverPoint:B}=D;U&&(delete U.chartPosition,B&&(T=B),U.runPointActions(void 0,T,!0))}),$.appendChild(D.container)}applyFixed(){var ee;let{chart:D,fixedRenderer:T,isDirty:k,scrollingContainer:N}=this,{axisOffset:W,chartWidth:Z,chartHeight:K,container:j,plotHeight:V,plotLeft:$,plotTop:L,plotWidth:R,scrollablePixelsX:G=0,scrollablePixelsY:U=0}=D,{scrollPositionX:B=0,scrollPositionY:H=0}=D.options.chart.scrollablePlotArea||{},q=Z+G,ae=K+U;T.setSize(Z,K),(k??!0)&&(this.isDirty=!1,this.moveFixedElements()),p(D.container),y(j,{width:`${q}px`,height:`${ae}px`}),D.renderer.boxWrapper.attr({width:q,height:ae,viewBox:[0,0,q,ae].join(" ")}),(ee=D.chartBackground)==null||ee.attr({width:q,height:ae}),y(N,{width:`${Z}px`,height:`${K}px`}),_(k)||(N.scrollLeft=G*B,N.scrollTop=U*H);let fe=L-W[0]-1,re=$-W[3]-1,ce=L+V+W[2]+1,ke=$+R+W[1]+1,ve=$+R-G,Ee=L+V-U,Q=[["M",0,0]];G?Q=[["M",0,fe],["L",$-1,fe],["L",$-1,ce],["L",0,ce],["Z"],["M",ve,fe],["L",Z,fe],["L",Z,ce],["L",ve,ce],["Z"]]:U&&(Q=[["M",re,0],["L",re,L-1],["L",ke,L-1],["L",ke,0],["Z"],["M",re,Ee],["L",re,K],["L",ke,K],["L",ke,Ee],["Z"]]),D.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:Q})}moveFixedElements(){let D,{container:T,inverted:k,scrollablePixelsX:N,scrollablePixelsY:W}=this.chart,Z=this.fixedRenderer,K=x.fixedSelectors;for(let j of(N&&!k?D=".highcharts-yaxis":N&&k||W&&!k?D=".highcharts-xaxis":W&&k&&(D=".highcharts-yaxis"),D&&K.push(`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`),K))[].forEach.call(T.querySelectorAll(j),V=>{(V.namespaceURI===Z.SVG_NS?Z.box:Z.box.parentNode).appendChild(V),V.style.pointerEvents="auto"})}}return x.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],x}),n(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{format:r}=s,{series:p}=l,{destroyObjectProperties:f,fireEvent:m,isNumber:v,pick:y}=u;return class{constructor(_,b,C,E,S){let x=_.chart.inverted,A=_.reversed;this.axis=_;let D=this.isNegative=!!C!=!!A;this.options=b=b||{},this.x=E,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=S,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:b.align||(x?D?"left":"right":"center"),verticalAlign:b.verticalAlign||(x?"middle":D?"bottom":"top"),y:b.y,x:b.x},this.textAlign=b.textAlign||(x?D?"right":"left":"center")}destroy(){f(this,this.axis)}render(_){let b=this.axis.chart,C=this.options,E=C.format,S=E?r(E,this,b):C.formatter.call(this);if(this.label)this.label.attr({text:S,visibility:"hidden"});else{this.label=b.renderer.label(S,null,void 0,C.shape,void 0,void 0,C.useHTML,!1,"stack-labels");let x={r:C.borderRadius||0,text:S,padding:y(C.padding,5),visibility:"hidden"};b.styledMode||(x.fill=C.backgroundColor,x.stroke=C.borderColor,x["stroke-width"]=C.borderWidth,this.label.css(C.style||{})),this.label.attr(x),this.label.added||this.label.add(_)}this.label.labelrank=b.plotSizeY,m(this,"afterRender")}setOffset(_,b,C,E,S,x){let{alignOptions:A,axis:D,label:T,options:k,textAlign:N}=this,W=D.chart,Z=this.getStackBox({xOffset:_,width:b,boxBottom:C,boxTop:E,defaultX:S,xAxis:x}),{verticalAlign:K}=A;if(T&&Z){let j=T.getBBox(void 0,0),V=T.padding,$=y(k.overflow,"justify")==="justify",L;A.x=k.x||0,A.y=k.y||0;let{x:R,y:G}=this.adjustStackPosition({labelBox:j,verticalAlign:K,textAlign:N});Z.x-=R,Z.y-=G,T.align(A,!1,Z),(L=W.isInsidePlot(T.alignAttr.x+A.x+R,T.alignAttr.y+A.y+G))||($=!1),$&&p.prototype.justifyDataLabel.call(D,T,A,T.alignAttr,j,Z),T.attr({x:T.alignAttr.x,y:T.alignAttr.y,rotation:k.rotation,rotationOriginX:j.width*{left:0,center:.5,right:1}[k.textAlign||"center"],rotationOriginY:j.height/2}),y(!$&&k.crop,!0)&&(L=v(T.x)&&v(T.y)&&W.isInsidePlot(T.x-V+(T.width||0),T.y)&&W.isInsidePlot(T.x+V,T.y)),T[L?"show":"hide"]()}m(this,"afterSetOffset",{xOffset:_,width:b})}adjustStackPosition({labelBox:_,verticalAlign:b,textAlign:C}){let E={bottom:0,middle:1,top:2,right:1,center:0,left:-1},S=E[b],x=E[C];return{x:_.width/2+_.width/2*x,y:_.height/2*S}}getStackBox(_){let b=this.axis,C=b.chart,{boxTop:E,defaultX:S,xOffset:x,width:A,boxBottom:D}=_,T=b.stacking.usePercentage?100:y(E,this.total,0),k=b.toPixels(T),N=_.xAxis||C.xAxis[0],W=y(S,N.translate(this.x))+x,Z=Math.abs(k-b.toPixels(D||v(b.min)&&b.logarithmic&&b.logarithmic.lin2log(b.min)||0)),K=C.inverted,j=this.isNegative;return K?{x:(j?k:k-Z)-C.plotLeft,y:N.height-W-A+N.top-C.plotTop,width:Z,height:A}:{x:W+N.transB-C.plotLeft,y:(j?k-Z:k)-C.plotTop,width:A,height:Z}}}}),n(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){var f;let{getDeferredAnimation:m}=s,{series:{prototype:v}}=u,{addEvent:y,correctFloat:_,defined:b,destroyObjectProperties:C,fireEvent:E,isArray:S,isNumber:x,objectEach:A,pick:D}=p;function T(){let L=this.inverted;this.axes.forEach(R=>{R.stacking&&R.stacking.stacks&&R.hasVisibleSeries&&(R.stacking.oldStacks=R.stacking.stacks)}),this.series.forEach(R=>{let G=R.xAxis&&R.xAxis.options||{};R.options.stacking&&R.reserveSpace()&&(R.stackKey=[R.type,D(R.options.stack,""),L?G.top:G.left,L?G.height:G.width].join(","))})}function k(){var R;let L=this.stacking;if(L){let G=L.stacks;A(G,(U,B)=>{C(U),delete G[B]}),(R=L.stackTotalGroup)==null||R.destroy()}}function N(){this.stacking||(this.stacking=new $(this))}function W(L,R,G,U){return!b(L)||L.x!==R||U&&L.stackKey!==U?L={x:R,index:0,key:U,stackKey:U}:L.index++,L.key=[G,R,L.index].join(","),L}function Z(){let L,R=this,G=R.yAxis,U=R.stackKey||"",B=G.stacking.stacks,H=R.processedXData,q=R.options.stacking,ae=R[q+"Stacker"];ae&&[U,"-"+U].forEach(fe=>{var Ee;let re=H.length,ce,ke,ve;for(;re--;)ce=H[re],L=R.getStackIndicator(L,ce,R.index,fe),ke=(Ee=B[fe])==null?void 0:Ee[ce],(ve=ke==null?void 0:ke.points[L.key||""])&&ae.call(R,ve,ke,re)})}function K(L,R,G){let U=R.total?100/R.total:0;L[0]=_(L[0]*U),L[1]=_(L[1]*U),this.stackedYData[G]=L[1]}function j(L){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?v.setStackedPoints.call(this,L,"group"):L.stacking.resetStacks())}function V(L,R){var Ue,qe;let G,U,B,H,q,ae,fe,re,ce,ke=R||this.options.stacking;if(!ke||!this.reserveSpace()||({group:"xAxis"}[ke]||"yAxis")!==L.coll)return;let ve=this.processedXData,Ee=this.processedYData,Q=[],ee=Ee.length,oe=this.options,we=oe.threshold||0,J=oe.startFromThreshold?we:0,se=oe.stack,de=R?`${this.type},${ke}`:this.stackKey||"",xe="-"+de,Ce=this.negStacks,Ne=L.stacking,Te=Ne.stacks,Ie=Ne.oldStacks;for(Ne.stacksTouched+=1,fe=0;fe<ee;fe++){re=ve[fe],ce=Ee[fe],ae=(G=this.getStackIndicator(G,re,this.index)).key||"",Te[q=(U=Ce&&ce<(J?0:we))?xe:de]||(Te[q]={}),Te[q][re]||((Ue=Ie[q])!=null&&Ue[re]?(Te[q][re]=Ie[q][re],Te[q][re].total=null):Te[q][re]=new r(L,L.options.stackLabels,!!U,re,se)),B=Te[q][re],ce!==null?(B.points[ae]=B.points[this.index]=[D(B.cumulative,J)],b(B.cumulative)||(B.base=ae),B.touched=Ne.stacksTouched,G.index>0&&this.singleStacks===!1&&(B.points[ae][0]=B.points[this.index+","+re+",0"][0])):(delete B.points[ae],delete B.points[this.index]);let Ae=B.total||0;ke==="percent"?(H=U?de:xe,Ae=Ce&&((qe=Te[H])!=null&&qe[re])?(H=Te[H][re]).total=Math.max(H.total||0,Ae)+Math.abs(ce)||0:_(Ae+(Math.abs(ce)||0))):ke==="group"?(S(ce)&&(ce=ce[0]),ce!==null&&Ae++):Ae=_(Ae+(ce||0)),ke==="group"?B.cumulative=(Ae||1)-1:B.cumulative=_(D(B.cumulative,J)+(ce||0)),B.total=Ae,ce!==null&&(B.points[ae].push(B.cumulative),Q[fe]=B.cumulative,B.hasValidPoints=!0)}ke==="percent"&&(Ne.usePercentage=!0),ke!=="group"&&(this.stackedYData=Q),Ne.oldStacks={}}class ${constructor(R){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=R}buildStacks(){let R,G,U=this.axis,B=U.series,H=U.coll==="xAxis",q=U.options.reversedStacks,ae=B.length;for(this.resetStacks(),this.usePercentage=!1,G=ae;G--;)R=B[q?G:ae-G-1],H&&R.setGroupedPoints(U),R.setStackedPoints(U);if(!H)for(G=0;G<ae;G++)B[G].modifyStacks();E(U,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,A(this.stacks,R=>{A(R,G=>{G.cumulative=G.total})}))}resetStacks(){A(this.stacks,R=>{A(R,(G,U)=>{x(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete R[U]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var ae;let R=this.axis,G=R.chart,U=G.renderer,B=this.stacks,H=m(G,((ae=R.options.stackLabels)==null?void 0:ae.animation)||!1),q=this.stackTotalGroup=this.stackTotalGroup||U.g("stack-labels").attr({zIndex:6,opacity:0}).add();q.translate(G.plotLeft,G.plotTop),A(B,fe=>{A(fe,re=>{re.render(q)})}),q.animate({opacity:1},H)}}return(f||(f={})).compose=function(L,R,G){let U=R.prototype,B=G.prototype;U.getStacks||(y(L,"init",N),y(L,"destroy",k),U.getStacks=T,B.getStackIndicator=W,B.modifyStacks=Z,B.percentStacker=K,B.setGroupedPoints=j,B.setStackedPoints=V)},f}),n(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{defined:r,merge:p,isObject:f}=u;class m extends s{drawGraph(){let y=this.options,_=(this.gappedPath||this.getGraphPath).call(this),b=this.chart.styledMode;[this,...this.zones].forEach((C,E)=>{let S,x=C.graph,A=x?"animate":"attr",D=C.dashStyle||y.dashStyle;x?(x.endX=this.preventGraphAnimation?null:_.xMap,x.animate({d:_})):_.length&&(C.graph=x=this.chart.renderer.path(_).addClass("highcharts-graph"+(E?` highcharts-zone-graph-${E-1} `:" ")+(E&&C.className||"")).attr({zIndex:1}).add(this.group)),x&&!b&&(S={stroke:!E&&y.lineColor||C.color||this.color||"#cccccc","stroke-width":y.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?S.dashstyle=D:y.linecap!=="square"&&(S["stroke-linecap"]=S["stroke-linejoin"]="round"),x[A](S).shadow(E<2&&y.shadow&&p({filterUnits:"userSpaceOnUse"},f(y.shadow)?y.shadow:{}))),x&&(x.startX=_.xMap,x.isArea=_.isArea)})}getGraphPath(y,_,b){let C=this,E=C.options,S=[],x=[],A,D=E.step,T=(y=y||C.points).reversed;return T&&y.reverse(),(D={right:1,center:2}[D]||D&&3)&&T&&(D=4-D),(y=this.getValidPoints(y,!1,!(E.connectNulls&&!_&&!b))).forEach(function(k,N){let W,Z=k.plotX,K=k.plotY,j=y[N-1],V=k.isNull||typeof K!="number";(k.leftCliff||j&&j.rightCliff)&&!b&&(A=!0),V&&!r(_)&&N>0?A=!E.connectNulls:V&&!_?A=!0:(N===0||A?W=[["M",k.plotX,k.plotY]]:C.getPointSpline?W=[C.getPointSpline(y,k,N)]:D?(W=D===1?[["L",j.plotX,K]]:D===2?[["L",(j.plotX+Z)/2,j.plotY],["L",(j.plotX+Z)/2,K]]:[["L",Z,j.plotY]]).push(["L",Z,K]):W=[["L",Z,K]],x.push(k.x),D&&(x.push(k.x),D===2&&x.push(k.x)),S.push.apply(S,W),A=!1)}),S.xMap=x,C.graphPath=S,S}}return m.defaultOptions=p(s.defaultOptions,{legendSymbol:"lineMarker"}),l.registerSeriesType("line",m),m}),n(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),n(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{line:r}}=l,{extend:p,merge:f,objectEach:m,pick:v}=u;class y extends r{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:b,options:C}=this;[this,...this.zones].forEach((E,S)=>{let x={},A=E.fillColor||C.fillColor,D=E.area,T=D?"animate":"attr";D?(D.endX=this.preventGraphAnimation?null:b.xMap,D.animate({d:b})):(x.zIndex=0,(D=E.area=this.chart.renderer.path(b).addClass("highcharts-area"+(S?` highcharts-zone-area-${S-1} `:" ")+(S&&E.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(x.fill=A||E.color||this.color,x["fill-opacity"]=A?1:C.fillOpacity??.75,D.css({pointerEvents:this.stickyTracking?"none":"auto"})),D[T](x),D.startX=b.xMap,D.shiftUnit=C.step?2:1})}getGraphPath(b){let C,E,S,x=r.prototype.getGraphPath,A=this.options,D=A.stacking,T=this.yAxis,k=[],N=[],W=this.index,Z=T.stacking.stacks[this.stackKey],K=A.threshold,j=Math.round(T.getThreshold(A.threshold)),V=v(A.connectNulls,D==="percent"),$=function(H,q,ae){let fe=b[H],re=D&&Z[fe.x].points[W],ce=fe[ae+"Null"]||0,ke=fe[ae+"Cliff"]||0,ve,Ee,Q=!0;ke||ce?(ve=(ce?re[0]:re[1])+ke,Ee=re[0]+ke,Q=!!ce):!D&&b[q]&&b[q].isNull&&(ve=Ee=K),ve!==void 0&&(N.push({plotX:C,plotY:ve===null?j:T.getThreshold(ve),isNull:Q,isCliff:!0}),k.push({plotX:C,plotY:Ee===null?j:T.getThreshold(Ee),doCurve:!1}))};b=b||this.points,D&&(b=this.getStackPoints(b));for(let H=0,q=b.length;H<q;++H)D||(b[H].leftCliff=b[H].rightCliff=b[H].leftNull=b[H].rightNull=void 0),E=b[H].isNull,C=v(b[H].rectPlotX,b[H].plotX),S=D?v(b[H].yBottom,j):j,E&&!V||(V||$(H,H-1,"left"),E&&!D&&V||(N.push(b[H]),k.push({x:H,plotX:C,plotY:S})),V||$(H,H+1,"right"));let L=x.call(this,N,!0,!0);k.reversed=!0;let R=x.call(this,k,!0,!0),G=R[0];G&&G[0]==="M"&&(R[0]=["L",G[1],G[2]]);let U=L.concat(R);U.length&&U.push(["Z"]);let B=x.call(this,N,!1,V);return this.chart.series.length>1&&D&&N.some(H=>H.isCliff)&&(U.hasStackedCliffs=B.hasStackedCliffs=!0),U.xMap=L.xMap,this.areaPath=U,B}getStackPoints(b){let C=this,E=[],S=[],x=this.xAxis,A=this.yAxis,D=A.stacking.stacks[this.stackKey],T={},k=A.series,N=k.length,W=A.options.reversedStacks?1:-1,Z=k.indexOf(C);if(b=b||this.points,this.options.stacking){for(let j=0;j<b.length;j++)b[j].leftNull=b[j].rightNull=void 0,T[b[j].x]=b[j];m(D,function(j,V){j.total!==null&&S.push(V)}),S.sort(function(j,V){return j-V});let K=k.map(j=>j.visible);S.forEach(function(j,V){let $=0,L,R;if(T[j]&&!T[j].isNull)E.push(T[j]),[-1,1].forEach(function(G){let U=G===1?"rightNull":"leftNull",B=D[S[V+G]],H=0;if(B){let q=Z;for(;q>=0&&q<N;){let ae=k[q].index;!(L=B.points[ae])&&(ae===C.index?T[j][U]=!0:K[q]&&(R=D[j].points[ae])&&(H-=R[1]-R[0])),q+=W}}T[j][G===1?"rightCliff":"leftCliff"]=H});else{let G=Z;for(;G>=0&&G<N;){let U=k[G].index;if(L=D[j].points[U]){$=L[1];break}G+=W}$=v($,0),$=A.translate($,0,1,0,1),E.push({isNull:!0,plotX:x.translate(j,0,0,0,1),x:j,plotY:$,yBottom:$})}})}return E}}return y.defaultOptions=f(r.defaultOptions,s),p(y.prototype,{singleStacks:!1}),l.registerSeriesType("area",y),y}),n(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{line:u}=s.seriesTypes,{merge:r,pick:p}=l;class f extends u{getPointSpline(v,y,_){let b,C,E,S,x=y.plotX||0,A=y.plotY||0,D=v[_-1],T=v[_+1];function k(W){return W&&!W.isNull&&W.doCurve!==!1&&!y.isCliff}if(k(D)&&k(T)){let W=D.plotX||0,Z=D.plotY||0,K=T.plotX||0,j=T.plotY||0,V=0;b=(1.5*x+W)/2.5,C=(1.5*A+Z)/2.5,E=(1.5*x+K)/2.5,S=(1.5*A+j)/2.5,E!==b&&(V=(S-C)*(E-x)/(E-b)+A-S),C+=V,S+=V,C>Z&&C>A?(C=Math.max(Z,A),S=2*A-C):C<Z&&C<A&&(C=Math.min(Z,A),S=2*A-C),S>j&&S>A?(S=Math.max(j,A),C=2*A-S):S<j&&S<A&&(S=Math.min(j,A),C=2*A-S),y.rightContX=E,y.rightContY=S,y.controlPoints={low:[b,C],high:[E,S]}}let N=["C",p(D.rightContX,D.plotX,0),p(D.rightContY,D.plotY,0),p(b,x,0),p(C,A,0),x,A];return D.rightContX=D.rightContY=void 0,N}}return f.defaultOptions=r(u.defaultOptions),s.registerSeriesType("spline",f),f}),n(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{area:r,area:{prototype:p}}=l.seriesTypes,{extend:f,merge:m}=u;class v extends s{}return v.defaultOptions=m(s.defaultOptions,r.defaultOptions),f(v.prototype,{getGraphPath:p.getGraphPath,getStackPoints:p.getStackPoints,drawGraph:p.drawGraph}),l.registerSeriesType("areaspline",v),v}),n(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),n(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m){let{animObject:v}=s,{parse:y}=l,{noop:_}=r,{clamp:b,crisp:C,defined:E,extend:S,fireEvent:x,isArray:A,isNumber:D,merge:T,pick:k,objectEach:N}=m;class W extends p{animate(K){let j,V,$=this,L=this.yAxis,R=L.pos,G=L.reversed,U=$.options,{clipOffset:B,inverted:H}=this.chart,q={},ae=H?"translateX":"translateY";K&&B?(q.scaleY=.001,V=b(L.toPixels(U.threshold),R,R+L.len),H?(V+=G?-Math.floor(B[0]):Math.ceil(B[2]),q.translateX=V-L.len):(V+=G?Math.ceil(B[0]):-Math.floor(B[2]),q.translateY=V),$.clipBox&&$.setClip(),$.group.attr(q)):(j=Number($.group.attr(ae)),$.group.animate({scaleY:1},S(v($.options.animation),{step:function(fe,re){$.group&&(q[ae]=j+re.pos*(R-j),$.group.attr(q))}})))}init(K,j){super.init.apply(this,arguments);let V=this;(K=V.chart).hasRendered&&K.series.forEach(function($){$.type===V.type&&($.isDirty=!0)})}getColumnMetrics(){var ce,ke;let K=this,j=K.options,V=K.xAxis,$=K.yAxis,L=V.options.reversedStacks,R=V.reversed&&!L||!V.reversed&&L,G={},U,B=0;j.grouping===!1?B=1:K.chart.series.forEach(function(ve){let Ee,Q=ve.yAxis,ee=ve.options;ve.type===K.type&&ve.reserveSpace()&&$.len===Q.len&&$.pos===Q.pos&&(ee.stacking&&ee.stacking!=="group"?(G[U=ve.stackKey]===void 0&&(G[U]=B++),Ee=G[U]):ee.grouping!==!1&&(Ee=B++),ve.columnIndex=Ee)});let H=Math.min(Math.abs(V.transA)*(!((ce=V.brokenAxis)!=null&&ce.hasBreaks)&&((ke=V.ordinal)==null?void 0:ke.slope)||j.pointRange||V.closestPointRange||V.tickInterval||1),V.len),q=H*j.groupPadding,ae=(H-2*q)/(B||1),fe=Math.min(j.maxPointWidth||V.len,k(j.pointWidth,ae*(1-2*j.pointPadding))),re=(K.columnIndex||0)+(R?1:0);return K.columnMetrics={width:fe,offset:(ae-fe)/2+(q+re*ae-H/2)*(R?-1:1),paddedWidth:ae,columnCount:B},K.columnMetrics}crispCol(K,j,V,$){let L=this.borderWidth,R=this.chart.inverted;return $=C(j+$,L,R)-(j=C(j,L,R)),this.options.crisp&&(V=C(K+V,L)-(K=C(K,L))),{x:K,y:j,width:V,height:$}}adjustForMissingColumns(K,j,V,$){var L;if(!V.isNull&&$.columnCount>1){let R=this.xAxis.series.filter(H=>H.visible).map(H=>H.index),G=0,U=0;N((L=this.xAxis.stacking)==null?void 0:L.stacks,H=>{if(typeof V.x=="number"){let q=H[V.x.toString()];if(q&&A(q.points[this.index])){let ae=Object.keys(q.points).filter(fe=>!fe.match(",")&&q.points[fe]&&q.points[fe].length>1).map(parseFloat).filter(fe=>R.indexOf(fe)!==-1).sort((fe,re)=>re-fe);G=ae.indexOf(this.index),U=ae.length}}}),G=this.xAxis.reversed?U-1-G:G;let B=(U-1)*$.paddedWidth+j;K=(V.plotX||0)+B/2-j-G*$.paddedWidth}return K}translate(){let K=this,j=K.chart,V=K.options,$=K.dense=K.closestPointRange*K.xAxis.transA<2,L=K.borderWidth=k(V.borderWidth,$?0:1),R=K.xAxis,G=K.yAxis,U=V.threshold,B=k(V.minPointLength,5),H=K.getColumnMetrics(),q=H.width,ae=K.pointXOffset=H.offset,fe=K.dataMin,re=K.dataMax,ce=K.translatedThreshold=G.getThreshold(U),ke=K.barW=Math.max(q,1+2*L);V.pointPadding&&(ke=Math.ceil(ke)),p.prototype.translate.apply(K),K.points.forEach(function(ve){let Ee=k(ve.yBottom,ce),Q=999+Math.abs(Ee),ee=ve.plotX||0,oe=b(ve.plotY,-Q,G.len+Q),we,J=Math.min(oe,Ee),se=Math.max(oe,Ee)-J,de=q,xe=ee+ae,Ce=ke;B&&Math.abs(se)<B&&(se=B,we=!G.reversed&&!ve.negative||G.reversed&&ve.negative,D(U)&&D(re)&&ve.y===U&&re<=U&&(G.min||0)<U&&(fe!==re||(G.max||0)<=U)&&(we=!we,ve.negative=!ve.negative),J=Math.abs(J-ce)>B?Ee-B:ce-(we?B:0)),E(ve.options.pointWidth)&&(xe-=Math.round(((de=Ce=Math.ceil(ve.options.pointWidth))-q)/2)),V.centerInCategory&&!V.stacking&&(xe=K.adjustForMissingColumns(xe,de,ve,H)),ve.barX=xe,ve.pointWidth=de,ve.tooltipPos=j.inverted?[b(G.len+G.pos-j.plotLeft-oe,G.pos-j.plotLeft,G.len+G.pos-j.plotLeft),R.len+R.pos-j.plotTop-xe-Ce/2,se]:[R.left-j.plotLeft+xe+Ce/2,b(oe+G.pos-j.plotTop,G.pos-j.plotTop,G.len+G.pos-j.plotTop),se],ve.shapeType=K.pointClass.prototype.shapeType||"roundedRect",ve.shapeArgs=K.crispCol(xe,ve.isNull?ce:J,Ce,ve.isNull?0:se)}),x(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(K,j){let V=this.options,$=this.pointAttrToOptions||{},L=$.stroke||"borderColor",R=$["stroke-width"]||"borderWidth",G,U,B,H=K&&K.color||this.color,q=K&&K[L]||V[L]||H,ae=K&&K.options.dashStyle||V.dashStyle,fe=K&&K[R]||V[R]||this[R]||0,re=k(K&&K.opacity,V.opacity,1);K&&this.zones.length&&(U=K.getZone(),H=K.options.color||U&&(U.color||K.nonZonedColor)||this.color,U&&(q=U.borderColor||q,ae=U.dashStyle||ae,fe=U.borderWidth||fe)),j&&K&&(B=(G=T(V.states[j],K.options.states&&K.options.states[j]||{})).brightness,H=G.color||B!==void 0&&y(H).brighten(G.brightness).get()||H,q=G[L]||q,fe=G[R]||fe,ae=G.dashStyle||ae,re=k(G.opacity,re));let ce={fill:H,stroke:q,"stroke-width":fe,opacity:re};return ae&&(ce.dashstyle=ae),ce}drawPoints(K=this.points){let j,V=this,$=this.chart,L=V.options,R=$.renderer,G=L.animationLimit||250;K.forEach(function(U){let B=U.plotY,H=U.graphic,q=!!H,ae=H&&$.pointCount<G?"animate":"attr";D(B)&&U.y!==null?(j=U.shapeArgs,H&&U.hasNewShapeType()&&(H=H.destroy()),V.enabledDataSorting&&(U.startXPos=V.xAxis.reversed?-(j&&j.width||0):V.xAxis.width),!H&&(U.graphic=H=R[U.shapeType](j).add(U.group||V.group),H&&V.enabledDataSorting&&$.hasRendered&&$.pointCount<G&&(H.attr({x:U.startXPos}),q=!0,ae="animate")),H&&q&&H[ae](T(j)),$.styledMode||H[ae](V.pointAttribs(U,U.selected&&"select")).shadow(U.allowShadow!==!1&&L.shadow),H&&(H.addClass(U.getClassName(),!0),H.attr({visibility:U.visible?"inherit":"hidden"}))):H&&(U.graphic=H.destroy())})}drawTracker(K=this.points){let j,V=this,$=V.chart,L=$.pointer,R=function(G){let U=L==null?void 0:L.getPointFromEvent(G);L&&U&&V.options.enableMouseTracking&&(L.isDirectTouch=!0,U.onMouseOver(G))};K.forEach(function(G){j=A(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),j.forEach(function(U){(U.div||U.element).point=G})}),V._hasTracking||(V.trackerGroups.forEach(function(G){V[G]&&(V[G].addClass("highcharts-tracker").on("mouseover",R).on("mouseout",function(U){L==null||L.onTrackerMouseOut(U)}).on("touchstart",R),!$.styledMode&&V.options.cursor&&V[G].css({cursor:V.options.cursor}))}),V._hasTracking=!0),x(this,"afterDrawTracker")}remove(){let K=this,j=K.chart;j.hasRendered&&j.series.forEach(function(V){V.type===K.type&&(V.isDirty=!0)}),p.prototype.remove.apply(K,arguments)}}return W.defaultOptions=T(p.defaultOptions,u),S(W.prototype,{directTouch:!0,getSymbol:_,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),f.registerSeriesType("column",W),W}),n(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{getDeferredAnimation:p}=s,{format:f}=l,{defined:m,extend:v,fireEvent:y,isArray:_,isString:b,merge:C,objectEach:E,pick:S,pInt:x,splat:A}=u;return function(D){function T(){return V(this).some(L=>L==null?void 0:L.enabled)}function k(L,R,G,U,B){var oe;let{chart:H,enabledDataSorting:q}=this,ae=this.isCartesian&&H.inverted,fe=L.plotX,re=L.plotY,ce=G.rotation||0,ke=m(fe)&&m(re)&&H.isInsidePlot(fe,Math.round(re),{inverted:ae,paneCoordinates:!0,series:this}),ve=ce===0&&S(G.overflow,q?"none":"justify")==="justify",Ee=this.visible&&L.visible!==!1&&m(fe)&&(L.series.forceDL||q&&!ve||ke||S(G.inside,!!this.options.stacking)&&U&&H.isInsidePlot(fe,ae?U.x+1:U.y+U.height-1,{inverted:ae,paneCoordinates:!0,series:this})),Q=L.pos();if(Ee&&Q){var ee;let we=R.getBBox(),J=R.getBBox(void 0,0),se={right:1,center:.5}[G.align||0]||0,de={bottom:1,middle:.5}[G.verticalAlign||0]||0;if(U=v({x:Q[0],y:Math.round(Q[1]),width:0,height:0},U||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(U[ae?"x":"y"]=0,U[ae?"width":"height"]=((oe=this.yAxis)==null?void 0:oe.len)||0),v(G,{width:we.width,height:we.height}),ee=U,q&&this.xAxis&&!ve&&this.setDataLabelStartPos(L,R,B,ke,ee),R.align(C(G,{width:J.width,height:J.height}),!1,U,!1),R.alignAttr.x+=se*(J.width-we.width),R.alignAttr.y+=de*(J.height-we.height),R[R.placed?"animate":"attr"]({x:R.alignAttr.x+(we.width-J.width)/2,y:R.alignAttr.y+(we.height-J.height)/2,rotationOriginX:(R.width||0)/2,rotationOriginY:(R.height||0)/2}),ve&&U.height>=0)this.justifyDataLabel(R,G,R.alignAttr,we,U,B);else if(S(G.crop,!0)){let{x:xe,y:Ce}=R.alignAttr;Ee=H.isInsidePlot(xe,Ce,{paneCoordinates:!0,series:this})&&H.isInsidePlot(xe+we.width-1,Ce+we.height-1,{paneCoordinates:!0,series:this})}G.shape&&!ce&&R[B?"attr":"animate"]({anchorX:Q[0],anchorY:Q[1]})}B&&q&&(R.placed=!1),Ee||q&&!ve?(R.show(),R.placed=!0):(R.hide(),R.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function W(L){let R=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+R});return!R&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},L):G.attr({opacity:1})),G}function Z(L){var Ee;let R;L=L||this.points;let G=this,U=G.chart,B=G.options,H=U.renderer,{backgroundColor:q,plotBackgroundColor:ae}=U.options.chart,fe=H.getContrast(b(ae)&&ae||b(q)&&q||"#000000"),re=V(G),{animation:ce,defer:ke}=re[0],ve=ke?p(U,ce,G):{defer:0,duration:0};y(this,"drawDataLabels"),(Ee=G.hasDataLabels)!=null&&Ee.call(G)&&(R=this.initDataLabels(ve),L.forEach(Q=>{var we,J;let ee=Q.dataLabels||[];A(j(re,Q.dlOptions||((we=Q.options)==null?void 0:we.dataLabels))).forEach((se,de)=>{let xe=se.enabled&&(Q.visible||Q.dataLabelOnHidden)&&(!Q.isNull||Q.dataLabelOnNull)&&function($e,Ke){let tt=Ke.filter;if(tt){let nt=tt.operator,ht=$e[tt.property],gt=tt.value;return nt===">"&&ht>gt||nt==="<"&&ht<gt||nt===">="&&ht>=gt||nt==="<="&&ht<=gt||nt==="=="&&ht==gt||nt==="==="&&ht===gt||nt==="!="&&ht!=gt||nt==="!=="&&ht!==gt}return!0}(Q,se),{backgroundColor:Ce,borderColor:Ne,distance:Te,style:Ie={}}=se,Ue,qe,Ae,ye,ge={},Me=ee[de],De=!Me,Pe;xe&&(qe=S(se[Q.formatPrefix+"Format"],se.format),Ue=Q.getLabelConfig(),Ae=m(qe)?f(qe,Ue,U):(se[Q.formatPrefix+"Formatter"]||se.formatter).call(Ue,se),ye=se.rotation,!U.styledMode&&(Ie.color=S(se.color,Ie.color,b(G.color)?G.color:void 0,"#000000"),Ie.color==="contrast"?(Ce!=="none"&&(Pe=Ce),Q.contrastColor=H.getContrast(Pe!=="auto"&&Pe||Q.color||G.color),Ie.color=Pe||!m(Te)&&se.inside||0>x(Te||0)||B.stacking?Q.contrastColor:fe):delete Q.contrastColor,B.cursor&&(Ie.cursor=B.cursor)),ge={r:se.borderRadius||0,rotation:ye,padding:se.padding,zIndex:1},U.styledMode||(ge.fill=Ce==="auto"?Q.color:Ce,ge.stroke=Ne==="auto"?Q.color:Ne,ge["stroke-width"]=se.borderWidth),E(ge,($e,Ke)=>{$e===void 0&&delete ge[Ke]})),!Me||xe&&m(Ae)&&!!Me.div==!!se.useHTML&&(Me.rotation&&se.rotation||Me.rotation===se.rotation)||(Me=void 0,De=!0),xe&&m(Ae)&&(Me?ge.text=Ae:(Me=H.label(Ae,0,0,se.shape,void 0,void 0,se.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+Q.colorIndex+" "+(se.className||"")+(se.useHTML?" highcharts-tracker":"")),Me&&(Me.options=se,Me.attr(ge),U.styledMode?Ie.width&&Me.css({width:Ie.width,textOverflow:Ie.textOverflow}):Me.css(Ie).shadow(se.shadow),y(Me,"beforeAddingDataLabel",{labelOptions:se,point:Q}),Me.added||Me.add(R),G.alignDataLabel(Q,Me,se,void 0,De),Me.isActive=!0,ee[de]&&ee[de]!==Me&&ee[de].destroy(),ee[de]=Me))});let oe=ee.length;for(;oe--;)ee[oe]&&ee[oe].isActive?ee[oe].isActive=!1:((J=ee[oe])==null||J.destroy(),ee.splice(oe,1));Q.dataLabel=ee[0],Q.dataLabels=ee})),y(this,"afterDrawDataLabels")}function K(L,R,G,U,B,H){let q=this.chart,ae=R.align,fe=R.verticalAlign,re=L.box?0:L.padding||0,ce=q.inverted?this.yAxis:this.xAxis,ke=ce?ce.left-q.plotLeft:0,ve=q.inverted?this.xAxis:this.yAxis,Ee=ve?ve.top-q.plotTop:0,{x:Q=0,y:ee=0}=R,oe,we;return(oe=(G.x||0)+re+ke)<0&&(ae==="right"&&Q>=0?(R.align="left",R.inside=!0):Q-=oe,we=!0),(oe=(G.x||0)+U.width-re+ke)>q.plotWidth&&(ae==="left"&&Q<=0?(R.align="right",R.inside=!0):Q+=q.plotWidth-oe,we=!0),(oe=G.y+re+Ee)<0&&(fe==="bottom"&&ee>=0?(R.verticalAlign="top",R.inside=!0):ee-=oe,we=!0),(oe=(G.y||0)+U.height-re+Ee)>q.plotHeight&&(fe==="top"&&ee<=0?(R.verticalAlign="bottom",R.inside=!0):ee+=q.plotHeight-oe,we=!0),we&&(R.x=Q,R.y=ee,L.placed=!H,L.align(R,void 0,B)),we}function j(L,R){let G=[],U;if(_(L)&&!_(R))G=L.map(function(B){return C(B,R)});else if(_(R)&&!_(L))G=R.map(function(B){return C(L,B)});else if(_(L)||_(R)){if(_(L)&&_(R))for(U=Math.max(L.length,R.length);U--;)G[U]=C(L[U],R[U])}else G=C(L,R);return G}function V(L){var G,U;let R=L.chart.options.plotOptions;return A(j(j((G=R==null?void 0:R.series)==null?void 0:G.dataLabels,(U=R==null?void 0:R[L.type])==null?void 0:U.dataLabels),L.options.dataLabels))}function $(L,R,G,U,B){let H=this.chart,q=H.inverted,ae=this.xAxis,fe=ae.reversed,re=((q?R.height:R.width)||0)/2,ce=L.pointWidth,ke=ce?ce/2:0;R.startXPos=q?B.x:fe?-re-ke:ae.width-re+ke,R.startYPos=q?fe?this.yAxis.height-re+ke:-re-ke:B.y,U?R.visibility==="hidden"&&(R.show(),R.attr({opacity:0}).animate({opacity:1})):R.attr({opacity:1}).animate({opacity:0},void 0,R.hide),H.hasRendered&&(G&&R.attr({x:R.startXPos,y:R.startYPos}),R.placed=!0)}D.compose=function(L){let R=L.prototype;R.initDataLabels||(R.initDataLabels=W,R.initDataLabelsGroup=N,R.alignDataLabel=k,R.drawDataLabels=Z,R.justifyDataLabel=K,R.setDataLabelStartPos=$,R.hasDataLabels=T)}}(r||(r={})),r}),n(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{composed:f}=l,{series:m}=u,{merge:v,pick:y,pushUnique:_}=r;return function(b){function C(E,S,x,A,D){let T=this.chart.inverted,k=E.series,N=(k.xAxis?k.xAxis.len:this.chart.plotSizeX)||0,W=(k.yAxis?k.yAxis.len:this.chart.plotSizeY)||0,Z=E.dlBox||E.shapeArgs,K=y(E.below,E.plotY>y(this.translatedThreshold,W)),j=y(x.inside,!!this.options.stacking);if(Z){if(A=v(Z),!(x.overflow==="allow"&&x.crop===!1)){A.y<0&&(A.height+=A.y,A.y=0);let V=A.y+A.height-W;V>0&&V<A.height-1&&(A.height-=V)}T&&(A={x:W-A.y-A.height,y:N-A.x-A.width,width:A.height,height:A.width}),j||(T?(A.x+=K?0:A.width,A.width=0):(A.y+=K?A.height:0,A.height=0))}x.align=y(x.align,!T||j?"center":K?"right":"left"),x.verticalAlign=y(x.verticalAlign,T||j?"middle":K?"top":"bottom"),m.prototype.alignDataLabel.call(this,E,S,x,A,D),x.inside&&E.contrastColor&&S.css({color:E.contrastColor})}b.compose=function(E){s.compose(m),_(f,"ColumnDataLabel")&&(E.prototype.alignDataLabel=C)}}(p||(p={})),p}),n(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{extend:r,merge:p}=u;class f extends s{}return f.defaultOptions=p(s.defaultOptions,{}),r(f.prototype,{inverted:!0}),l.registerSeriesType("bar",f),f}),n(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),n(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:r,line:p}=l.seriesTypes,{addEvent:f,extend:m,merge:v}=u;class y extends p{applyJitter(){let b=this,C=this.options.jitter,E=this.points.length;C&&this.points.forEach(function(S,x){["x","y"].forEach(function(A,D){if(C[A]&&!S.isNull){let T=`plot${A.toUpperCase()}`,k=b[`${A}Axis`],N=C[A]*k.transA;if(k&&!k.logarithmic){let W=Math.max(0,(S[T]||0)-N),Z=Math.min(k.len,(S[T]||0)+N);S[T]=W+(Z-W)*function(K){let j=1e4*Math.sin(K);return j-Math.floor(j)}(x+D*E),A==="x"&&(S.clientX=S.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return y.defaultOptions=v(p.defaultOptions,s),m(y.prototype,{drawTracker:r.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),f(y,"afterTranslate",function(){this.applyJitter()}),l.registerSeriesType("scatter",y),y}),n(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(s,l,u){var r,p;let{deg2rad:f}=s,{fireEvent:m,isNumber:v,pick:y,relativeLength:_}=u;return(p=r||(r={})).getCenter=function(){let b=this.options,C=this.chart,E=2*(b.slicedOffset||0),S=C.plotWidth-2*E,x=C.plotHeight-2*E,A=b.center,D=Math.min(S,x),T=b.thickness,k,N=b.size,W=b.innerSize||0,Z,K;typeof N=="string"&&(N=parseFloat(N)),typeof W=="string"&&(W=parseFloat(W));let j=[y(A[0],"50%"),y(A[1],"50%"),y(N&&N<0?void 0:b.size,"100%"),y(W&&W<0?void 0:b.innerSize||0,"0%")];for(!C.angular||this instanceof l||(j[3]=0),Z=0;Z<4;++Z)K=j[Z],k=Z<2||Z===2&&/%$/.test(K),j[Z]=_(K,[S,x,D,j[2]][Z])+(k?E:0);return j[3]>j[2]&&(j[3]=j[2]),v(T)&&2*T<j[2]&&T>0&&(j[3]=j[2]-2*T),m(this,"afterGetCenter",{positions:j}),j},p.getStartAndEndRadians=function(b,C){let E=v(b)?b:0,S=v(C)&&C>E&&C-E<360?C:E+360;return{start:f*(E+-90),end:f*(S+-90)}},r}),n(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:r}=s,{addEvent:p,defined:f,extend:m,isNumber:v,pick:y,relativeLength:_}=u;class b extends l{getConnectorPath(E){let S=E.dataLabelPosition,x=E.options||{},A=x.connectorShape,D=this.connectorShapes[A]||A;return S&&D.call(this,{...S.computed,alignment:S.alignment},S.connectorPosition,x)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(E){let S=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(S.x,S.y,S.r+E,S.r+E,{innerR:S.r-1,start:S.start,end:S.end,borderRadius:S.borderRadius})}constructor(E,S,x){super(E,S,x),this.half=0,this.name??(this.name="Slice");let A=D=>{this.slice(D.type==="select")};p(this,"select",A),p(this,"unselect",A)}isValid(){return v(this.y)&&this.y>=0}setVisible(E,S=!0){E!==this.visible&&this.update({visible:E??!this.visible},S,void 0,!1)}slice(E,S,x){let A=this.series;r(x,A.chart),S=y(S,!0),this.sliced=this.options.sliced=E=f(E)?E:!this.sliced,A.options.data[A.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return m(b.prototype,{connectorShapes:{fixedOffset:function(C,E,S){let x=E.breakAt,A=E.touchingSliceAt,D=S.softConnector?["C",C.x+(C.alignment==="left"?-5:5),C.y,2*x.x-A.x,2*x.y-A.y,x.x,x.y]:["L",x.x,x.y];return[["M",C.x,C.y],D,["L",A.x,A.y]]},straight:function(C,E){let S=E.touchingSliceAt;return[["M",C.x,C.y],["L",S.x,S.y]]},crookedLine:function(C,E,S){let{breakAt:x,touchingSliceAt:A}=E,{series:D}=this,[T,k,N]=D.center,W=N/2,{plotLeft:Z,plotWidth:K}=D.chart,j=C.alignment==="left",{x:V,y:$}=C,L=x.x;if(S.crookDistance){let G=_(S.crookDistance,1);L=j?T+W+(K+Z-T-W)*(1-G):Z+(T-W)*G}else L=T+(k-$)*Math.tan((this.angle||0)-Math.PI/2);let R=[["M",V,$]];return(j?L<=V&&L>=x.x:L>=V&&L<=x.x)&&R.push(["L",L,$]),R.push(["L",x.x,x.y],["L",A.x,A.y]),R}}}),b}),n(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),n(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y){let{getStartAndEndRadians:_}=s,{noop:b}=u,{clamp:C,extend:E,fireEvent:S,merge:x,pick:A}=y;class D extends f{animate(k){let N=this,W=N.points,Z=N.startAngleRad;k||W.forEach(function(K){let j=K.graphic,V=K.shapeArgs;j&&V&&(j.attr({r:A(K.startR,N.center&&N.center[3]/2),start:Z,end:Z}),j.animate({r:V.r,start:V.start,end:V.end},N.options.animation))})}drawEmpty(){let k,N,W=this.startAngleRad,Z=this.endAngleRad,K=this.options;this.total===0&&this.center?(k=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(k,N,this.center[1]/2,0,W,Z).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:v.arc(k,N,this.center[2]/2,0,{start:W,end:Z,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":K.borderWidth,fill:K.fillColor||"none",stroke:K.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let k=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=k[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(k,N,W,Z){let K=this.center,j=this.radii?this.radii[W.index]||0:K[2]/2,V=Z.dataLabelPosition,$=(V==null?void 0:V.distance)||0,L=Math.asin(C((k-K[1])/(j+$),-1,1));return K[0]+Math.cos(L)*(j+$)*(N?-1:1)+($>0?(N?-1:1)*(Z.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let k,N,W,Z,K=this,j=K.chart;this.drawEmpty(),K.group&&!j.styledMode&&K.group.shadow(K.options.shadow),K.points.forEach(function(V){let $={};N=V.graphic,!V.isNull&&N?(Z=V.shapeArgs,k=V.getTranslate(),j.styledMode||(W=K.pointAttribs(V,V.selected&&"select")),V.delayedRendering?(N.setRadialReference(K.center).attr(Z).attr(k),j.styledMode||N.attr(W).attr({"stroke-linejoin":"round"}),V.delayedRendering=!1):(N.setRadialReference(K.center),j.styledMode||x(!0,$,W),x(!0,$,Z,k),N.animate($)),N.attr({visibility:V.visible?"inherit":"hidden"}),N.addClass(V.getClassName(),!0)):N&&(V.graphic=N.destroy())})}sortByAngle(k,N){k.sort(function(W,Z){return W.angle!==void 0&&(Z.angle-W.angle)*N})}translate(k){S(this,"translate"),this.generatePoints();let N=this.options,W=N.slicedOffset,Z=_(N.startAngle,N.endAngle),K=this.startAngleRad=Z.start,j=(this.endAngleRad=Z.end)-K,V=this.points,$=N.ignoreHiddenPoint,L=V.length,R,G,U,B,H,q,ae,fe=0;for(k||(this.center=k=this.getCenter()),q=0;q<L;q++){ae=V[q],R=K+fe*j,ae.isValid()&&(!$||ae.visible)&&(fe+=ae.percentage/100),G=K+fe*j;let re={x:k[0],y:k[1],r:k[2]/2,innerR:k[3]/2,start:Math.round(1e3*R)/1e3,end:Math.round(1e3*G)/1e3};ae.shapeType="arc",ae.shapeArgs=re,(U=(G+R)/2)>1.5*Math.PI?U-=2*Math.PI:U<-Math.PI/2&&(U+=2*Math.PI),ae.slicedTranslation={translateX:Math.round(Math.cos(U)*W),translateY:Math.round(Math.sin(U)*W)},B=Math.cos(U)*k[2]/2,H=Math.sin(U)*k[2]/2,ae.tooltipPos=[k[0]+.7*B,k[1]+.7*H],ae.half=U<-Math.PI/2||U>Math.PI/2?1:0,ae.angle=U}S(this,"afterTranslate")}updateTotals(){let k=this.points,N=k.length,W=this.options.ignoreHiddenPoint,Z,K,j=0;for(Z=0;Z<N;Z++)(K=k[Z]).isValid()&&(!W||K.visible)&&(j+=K.y);for(Z=0,this.total=j;Z<N;Z++)(K=k[Z]).percentage=j>0&&(K.visible||!W)?K.y/j*100:0,K.total=j}}return D.defaultOptions=x(f.defaultOptions,p),E(D.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:l.prototype.drawTracker,getCenter:s.getCenter,getSymbol:b,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:l.prototype.pointAttribs,pointClass:r,requireSorting:!1,searchPoint:b,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("pie",D),D}),n(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){var f;let{composed:m,noop:v}=l,{distribute:y}=u,{series:_}=r,{arrayMax:b,clamp:C,defined:E,pick:S,pushUnique:x,relativeLength:A}=p;return function(D){let T={radialDistributionY:function(K,j){var V;return(((V=j.dataLabelPosition)==null?void 0:V.top)||0)+K.distributeBox.pos},radialDistributionX:function(K,j,V,$,L){let R=L.dataLabelPosition;return K.getX(V<((R==null?void 0:R.top)||0)+2||V>((R==null?void 0:R.bottom)||0)-2?$:V,j.half,j,L)},justify:function(K,j,V,$){var L;return $[0]+(K.half?-1:1)*(V+(((L=j.dataLabelPosition)==null?void 0:L.distance)||0))},alignToPlotEdges:function(K,j,V,$){let L=K.getBBox().width;return j?L+$:V-L-$},alignToConnectors:function(K,j,V,$){let L=0,R;return K.forEach(function(G){(R=G.dataLabel.getBBox().width)>L&&(L=R)}),j?L+$:V-L-$}};function k(K,j){let{center:V,options:$}=this,L=V[2]/2,R=K.angle||0,G=Math.cos(R),U=Math.sin(R),B=V[0]+G*L,H=V[1]+U*L,q=Math.min(($.slicedOffset||0)+($.borderWidth||0),j/5);return{natural:{x:B+G*j,y:H+U*j},computed:{},alignment:j<0?"center":K.half?"right":"left",connectorPosition:{breakAt:{x:B+G*q,y:H+U*q},touchingSliceAt:{x:B,y:H}},distance:j}}function N(){var Ee;let K=this,j=K.points,V=K.chart,$=V.plotWidth,L=V.plotHeight,R=V.plotLeft,G=Math.round(V.chartWidth/3),U=K.center,B=U[2]/2,H=U[1],q=[[],[]],ae=[0,0,0,0],fe=K.dataLabelPositioners,re,ce,ke,ve=0;K.visible&&((Ee=K.hasDataLabels)!=null&&Ee.call(K))&&(j.forEach(Q=>{(Q.dataLabels||[]).forEach(ee=>{ee.shortened&&(ee.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),ee.shortened=!1)})}),_.prototype.drawDataLabels.apply(K),j.forEach(Q=>{(Q.dataLabels||[]).forEach((ee,oe)=>{var de;let we=U[2]/2,J=ee.options,se=A((J==null?void 0:J.distance)||0,we);oe===0&&q[Q.half].push(Q),!E((de=J==null?void 0:J.style)==null?void 0:de.width)&&ee.getBBox().width>G&&(ee.css({width:Math.round(.7*G)+"px"}),ee.shortened=!0),ee.dataLabelPosition=this.getDataLabelPosition(Q,se),ve=Math.max(ve,se)})}),q.forEach((Q,ee)=>{let oe=Q.length,we=[],J,se,de=0,xe;oe&&(K.sortByAngle(Q,ee-.5),ve>0&&(J=Math.max(0,H-B-ve),se=Math.min(H+B+ve,V.plotHeight),Q.forEach(Ce=>{(Ce.dataLabels||[]).forEach(Ne=>{var Ie;let Te=Ne.dataLabelPosition;Te&&Te.distance>0&&(Te.top=Math.max(0,H-B-Te.distance),Te.bottom=Math.min(H+B+Te.distance,V.plotHeight),de=Ne.getBBox().height||21,Ne.lineHeight=V.renderer.fontMetrics(Ne.text||Ne).h+2*Ne.padding,Ce.distributeBox={target:(((Ie=Ne.dataLabelPosition)==null?void 0:Ie.natural.y)||0)-Te.top+Ne.lineHeight/2,size:de,rank:Ce.y},we.push(Ce.distributeBox))})}),y(we,xe=se+de-J,xe/5)),Q.forEach(Ce=>{(Ce.dataLabels||[]).forEach(Ne=>{let Te=Ne.options||{},Ie=Ce.distributeBox,Ue=Ne.dataLabelPosition,qe=(Ue==null?void 0:Ue.natural.y)||0,Ae=Te.connectorPadding||0,ye=Ne.lineHeight||21,ge=(ye-Ne.getBBox().height)/2,Me=0,De=qe,Pe="inherit";if(Ue){if(E(Ie)&&Ue.distance>0&&(Ie.pos===void 0?Pe="hidden":(ke=Ie.size,De=fe.radialDistributionY(Ce,Ne))),Te.justify)Me=fe.justify(Ce,Ne,B,U);else switch(Te.alignTo){case"connectors":Me=fe.alignToConnectors(Q,ee,$,R);break;case"plotEdges":Me=fe.alignToPlotEdges(Ne,ee,$,R);break;default:Me=fe.radialDistributionX(K,Ce,De-ge,qe,Ne)}if(Ue.attribs={visibility:Pe,align:Ue.alignment},Ue.posAttribs={x:Me+(Te.x||0)+({left:Ae,right:-Ae}[Ue.alignment]||0),y:De+(Te.y||0)-ye/2},Ue.computed.x=Me,Ue.computed.y=De-ge,S(Te.crop,!0)){let $e;Me-(ce=Ne.getBBox().width)<Ae&&ee===1?($e=Math.round(ce-Me+Ae),ae[3]=Math.max($e,ae[3])):Me+ce>$-Ae&&ee===0&&($e=Math.round(Me+ce-$+Ae),ae[1]=Math.max($e,ae[1])),De-ke/2<0?ae[0]=Math.max(Math.round(-De+ke/2),ae[0]):De+ke/2>L&&(ae[2]=Math.max(Math.round(De+ke/2-L),ae[2])),Ue.sideOverflow=$e}}})}))}),(b(ae)===0||this.verifyDataLabelOverflow(ae))&&(this.placeDataLabels(),this.points.forEach(Q=>{(Q.dataLabels||[]).forEach(ee=>{var se;let{connectorColor:oe,connectorWidth:we=1}=ee.options||{},J=ee.dataLabelPosition;if(we){let de;re=ee.connector,J&&J.distance>0?(de=!re,re||(ee.connector=re=V.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+Q.colorIndex+(Q.className?" "+Q.className:"")).add(K.dataLabelsGroup)),V.styledMode||re.attr({"stroke-width":we,stroke:oe||Q.color||"#666666"}),re[de?"attr":"animate"]({d:Q.getConnectorPath(ee)}),re.attr({visibility:(se=J.attribs)==null?void 0:se.visibility})):re&&(ee.connector=re.destroy())}})})))}function W(){this.points.forEach(K=>{(K.dataLabels||[]).forEach(j=>{var $;let V=j.dataLabelPosition;V?(V.sideOverflow&&(j.css({width:Math.max(j.getBBox().width-V.sideOverflow,0)+"px",textOverflow:((($=j.options)==null?void 0:$.style)||{}).textOverflow||"ellipsis"}),j.shortened=!0),j.attr(V.attribs),j[j.moved?"animate":"attr"](V.posAttribs),j.moved=!0):j&&j.attr({y:-9999})}),delete K.distributeBox},this)}function Z(K){let j=this.center,V=this.options,$=V.center,L=V.minSize||80,R=L,G=V.size!==null;return!G&&($[0]!==null?R=Math.max(j[2]-Math.max(K[1],K[3]),L):(R=Math.max(j[2]-K[1]-K[3],L),j[0]+=(K[3]-K[1])/2),$[1]!==null?R=C(R,L,j[2]-Math.max(K[0],K[2])):(R=C(R,L,j[2]-K[0]-K[2]),j[1]+=(K[0]-K[2])/2),R<j[2]?(j[2]=R,j[3]=Math.min(V.thickness?Math.max(0,R-2*V.thickness):Math.max(0,A(V.innerSize||0,R)),R),this.translate(j),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}D.compose=function(K){if(s.compose(_),x(m,"PieDataLabel")){let j=K.prototype;j.dataLabelPositioners=T,j.alignDataLabel=v,j.drawDataLabels=N,j.getDataLabelPosition=k,j.placeDataLabels=W,j.verifyDataLabelOverflow=Z}}}(f||(f={})),f}),n(t,"Core/Geometry/GeometryUtilities.js",[],function(){var s,l;return(l=s||(s={})).getCenterOfPoints=function(u){let r=u.reduce((p,f)=>(p.x+=f.x,p.y+=f.y,p),{x:0,y:0});return{x:r.x/u.length,y:r.y/u.length}},l.getDistanceBetweenPoints=function(u,r){return Math.sqrt(Math.pow(r.x-u.x,2)+Math.pow(r.y-u.y,2))},l.getAngleBetweenPoints=function(u,r){return Math.atan2(r.x-u.x,r.y-u.y)},l.pointInPolygon=function({x:u,y:r},p){let f=p.length,m,v,y=!1;for(m=0,v=f-1;m<f;v=m++){let[_,b]=p[m],[C,E]=p[v];b>r!=E>r&&u<(C-_)*(r-b)/(E-b)+_&&(y=!y)}return y},s}),n(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(s,l){let{pointInPolygon:u}=s,{addEvent:r,fireEvent:p,objectEach:f,pick:m}=l;function v(b){let C=b.length,E=(W,Z)=>!(Z.x>=W.x+W.width||Z.x+Z.width<=W.x||Z.y>=W.y+W.height||Z.y+Z.height<=W.y),S=(W,Z)=>{for(let K of W)if(u({x:K[0],y:K[1]},Z))return!0;return!1},x,A,D,T,k,N=!1;for(let W=0;W<C;W++)(x=b[W])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=function(Z){var K,j;if(Z&&(!Z.alignAttr||Z.placed)){let V=Z.box?0:Z.padding||0,$=Z.alignAttr||{x:Z.attr("x"),y:Z.attr("y")},L=Z.getBBox();return Z.width=L.width,Z.height=L.height,{x:$.x+(((K=Z.parentGroup)==null?void 0:K.translateX)||0)+V,y:$.y+(((j=Z.parentGroup)==null?void 0:j.translateY)||0)+V,width:(Z.width||0)-2*V,height:(Z.height||0)-2*V,polygon:L==null?void 0:L.polygon}}}(x));b.sort((W,Z)=>(Z.labelrank||0)-(W.labelrank||0));for(let W=0;W<C;++W){T=(A=b[W])&&A.absoluteBox;let Z=T==null?void 0:T.polygon;for(let K=W+1;K<C;++K){k=(D=b[K])&&D.absoluteBox;let j=!1;if(T&&k&&A!==D&&A.newOpacity!==0&&D.newOpacity!==0&&A.visibility!=="hidden"&&D.visibility!=="hidden"){let V=k.polygon;if(Z&&V&&Z!==V?S(Z,V)&&(j=!0):E(T,k)&&(j=!0),j){let $=A.labelrank<D.labelrank?A:D,L=$.text;$.newOpacity=0,L!=null&&L.element.querySelector("textPath")&&L.hide()}}}}for(let W of b)y(W,this)&&(N=!0);N&&p(this,"afterHideAllOverlappingLabels")}function y(b,C){let E,S,x=!1;return b&&(S=b.newOpacity,b.oldOpacity!==S&&(b.hasClass("highcharts-data-label")?(b[S?"removeClass":"addClass"]("highcharts-data-label-hidden"),E=function(){C.styledMode||b.css({pointerEvents:S?"auto":"none"})},x=!0,b[b.isOld?"animate":"attr"]({opacity:S},void 0,E),p(C,"afterHideOverlappingLabel")):b.attr({opacity:S})),b.isOld=!0),x}function _(){var E;let b=this,C=[];for(let S of b.labelCollectors||[])C=C.concat(S());for(let S of b.yAxis||[])S.stacking&&S.options.stackLabels&&!S.options.stackLabels.allowOverlap&&f(S.stacking.stacks,x=>{f(x,A=>{A.label&&C.push(A.label)})});for(let S of b.series||[])if(S.visible&&((E=S.hasDataLabels)!=null&&E.call(S))){let x=A=>{for(let D of A)D.visible&&(D.dataLabels||[]).forEach(T=>{var N;let k=T.options||{};T.labelrank=m(k.labelrank,D.labelrank,(N=D.shapeArgs)==null?void 0:N.height),k.allowOverlap??Number(k.distance)>0?(T.oldOpacity=T.opacity,T.newOpacity=1,y(T,b)):C.push(T)})};x(S.nodes||[]),x(S.points)}this.hideOverlappingLabels(C)}return{compose:function(b){let C=b.prototype;C.hideOverlappingLabels||(C.hideOverlappingLabels=v,r(b,"render",_))}}}),n(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{defaultOptions:r}=s,{noop:p}=l,{addEvent:f,extend:m,isObject:v,merge:y,relativeLength:_}=u,b={radius:0,scope:"stack",where:void 0},C=p,E=p;function S(k,N,W,Z,K={}){let j=C(k,N,W,Z,K),{innerR:V=0,r:$=W,start:L=0,end:R=0}=K;if(K.open||!K.borderRadius)return j;let G=R-L,U=Math.sin(G/2),B=Math.max(Math.min(_(K.borderRadius||0,$-V),($-V)/2,$*U/(1+U)),0),H=Math.min(B,G/Math.PI*2*V),q=j.length-1;for(;q--;)(function(ae,fe,re){let ce,ke,ve,Ee=ae[fe],Q=ae[fe+1];if(Q[0]==="Z"&&(Q=ae[0]),(Ee[0]==="M"||Ee[0]==="L")&&Q[0]==="A"?(ce=Ee,ke=Q,ve=!0):Ee[0]==="A"&&(Q[0]==="M"||Q[0]==="L")&&(ce=Q,ke=Ee),ce&&ke&&ke.params){let ee=ke[1],oe=ke[5],we=ke.params,{start:J,end:se,cx:de,cy:xe}=we,Ce=oe?ee-re:ee+re,Ne=Ce?Math.asin(re/Ce):0,Te=oe?Ne:-Ne,Ie=Math.cos(Ne)*Ce;ve?(we.start=J+Te,ce[1]=de+Ie*Math.cos(J),ce[2]=xe+Ie*Math.sin(J),ae.splice(fe+1,0,["A",re,re,0,0,1,de+ee*Math.cos(we.start),xe+ee*Math.sin(we.start)])):(we.end=se-Te,ke[6]=de+ee*Math.cos(we.end),ke[7]=xe+ee*Math.sin(we.end),ae.splice(fe+1,0,["A",re,re,0,0,1,de+Ie*Math.cos(se),xe+Ie*Math.sin(se)])),ke[4]=Math.abs(we.end-we.start)<Math.PI?0:1}})(j,q,q>1?H:B);return j}function x(){var k,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:W,yAxis:Z}=this,K=W.stacking==="percent",j=(N=(k=r.plotOptions)==null?void 0:k[this.type])==null?void 0:N.borderRadius,V=A(W.borderRadius,v(j)?j:{}),$=Z.options.reversed;for(let L of this.points){let{shapeArgs:R}=L;if(L.shapeType==="roundedRect"&&R){let{width:G=0,height:U=0,y:B=0}=R,H=B,q=U;if(V.scope==="stack"&&L.stackTotal){let ce=Z.translate(K?100:L.stackTotal,!1,!0,!1,!0),ke=Z.translate(W.threshold||0,!1,!0,!1,!0),ve=this.crispCol(0,Math.min(ce,ke),0,Math.abs(ce-ke));H=ve.y,q=ve.height}let ae=(L.negative?-1:1)*($?-1:1)==-1,fe=V.where;!fe&&this.is("waterfall")&&Math.abs((L.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(fe="all"),fe||(fe="end");let re=Math.min(_(V.radius,G),G/2,fe==="all"?U/2:1/0)||0;fe==="end"&&(ae&&(H-=re),q+=re),m(R,{brBoxHeight:q,brBoxY:H,r:re})}}}}function A(k,N){return v(k)||(k={radius:k||0}),y(b,N,k)}function D(){let k=A(this.options.borderRadius);for(let N of this.points){let W=N.shapeArgs;W&&(W.borderRadius=_(k.radius,(W.r||0)-(W.innerR||0)))}}function T(k,N,W,Z,K={}){let j=E(k,N,W,Z,K),{r:V=0,brBoxHeight:$=Z,brBoxY:L=N}=K,R=N-L,G=L+$-(N+Z),U=R-V>-.1?0:V,B=G-V>-.1?0:V,H=Math.max(U&&R,0),q=Math.max(B&&G,0),ae=[k+U,N],fe=[k+W-U,N],re=[k+W,N+U],ce=[k+W,N+Z-B],ke=[k+W-B,N+Z],ve=[k+B,N+Z],Ee=[k,N+Z-B],Q=[k,N+U],ee=(oe,we)=>Math.sqrt(Math.pow(oe,2)-Math.pow(we,2));if(H){let oe=ee(U,U-H);ae[0]-=oe,fe[0]+=oe,re[1]=Q[1]=N+U-H}if(Z<U-H){let oe=ee(U,U-H-Z);re[0]=ce[0]=k+W-U+oe,ke[0]=Math.min(re[0],ke[0]),ve[0]=Math.max(ce[0],ve[0]),Ee[0]=Q[0]=k+U-oe,re[1]=Q[1]=N+Z}if(q){let oe=ee(B,B-q);ke[0]+=oe,ve[0]-=oe,ce[1]=Ee[1]=N+Z-B+q}if(Z<B-q){let oe=ee(B,B-q-Z);re[0]=ce[0]=k+W-B+oe,fe[0]=Math.min(re[0],fe[0]),ae[0]=Math.max(ce[0],ae[0]),Ee[0]=Q[0]=k+B-oe,ce[1]=Ee[1]=N}return j.length=0,j.push(["M",...ae],["L",...fe],["A",U,U,0,0,1,...re],["L",...ce],["A",B,B,0,0,1,...ke],["L",...ve],["A",B,B,0,0,1,...Ee],["L",...Q],["A",U,U,0,0,1,...ae],["Z"]),j}return{compose:function(k,N,W){let Z=k.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let K=W.prototype.symbols;f(k,"afterColumnTranslate",x,{order:9}),f(Z,"afterTranslate",D),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),C=K.arc,E=K.roundedRect,K.arc=S,K.roundedRect=T}},optionsToObject:A}}),n(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(s){var l;let{diffObjects:u,extend:r,find:p,merge:f,pick:m,uniqueKey:v}=s;return function(y){function _(C,E){let S=C.condition;(S.callback||function(){return this.chartWidth<=m(S.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=m(S.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=m(S.minWidth,0)&&this.chartHeight>=m(S.minHeight,0)}).call(this)&&E.push(C._id)}function b(C,E){let S=this.options.responsive,x=this.currentResponsive,A=[],D;!E&&S&&S.rules&&S.rules.forEach(N=>{N._id===void 0&&(N._id=v()),this.matchResponsiveRule(N,A)},this);let T=f(...A.map(N=>p((S||{}).rules||[],W=>W._id===N)).map(N=>N&&N.chartOptions));T.isResponsiveOptions=!0,A=A.toString()||void 0;let k=x&&x.ruleIds;A===k||(x&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(x.undoOptions,C,!0),this.updatingResponsive=!1),A?((D=u(T,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:A,mergedOptions:T,undoOptions:D},this.updatingResponsive||this.update(T,C,!0)):this.currentResponsive=void 0)}y.compose=function(C){let E=C.prototype;return E.matchResponsiveRule||r(E,{matchResponsiveRule:_,setResponsive:b}),C}}(l||(l={})),l}),n(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(s,l,u,r,p,f,m,v,y,_,b,C,E,S,x,A,D,T,k,N,W,Z,K,j,V,$,L,R,G,U,B,H,q,ae,fe,re){return s.AST=f,s.Axis=E,s.Chart=K,s.Color=fe,s.DataLabel=B,s.Fx=r,s.HTMLElement=C,s.Legend=W,s.LegendSymbol=Z,s.OverlappingDataLabels=s.OverlappingDataLabels||H,s.PlotLineOrBand=A,s.Point=k,s.Pointer=N,s.RendererRegistry=v,s.Series=L,s.SeriesRegistry=R,s.StackItem=$,s.SVGElement=_,s.SVGRenderer=b,s.Templating=m,s.Tick=D,s.Time=re,s.Tooltip=T,s.animate=p.animate,s.animObject=p.animObject,s.chart=K.chart,s.color=fe.parse,s.dateFormat=m.dateFormat,s.defaultOptions=u.defaultOptions,s.distribute=y.distribute,s.format=m.format,s.getDeferredAnimation=p.getDeferredAnimation,s.getOptions=u.getOptions,s.numberFormat=m.numberFormat,s.seriesType=R.seriesType,s.setAnimation=p.setAnimation,s.setOptions=u.setOptions,s.stop=p.stop,s.time=u.defaultTime,s.timers=r.timers,q.compose(s.Series,s.SVGElement,s.SVGRenderer),G.compose(s.Series.types.column),B.compose(s.Series),S.compose(s.Axis),C.compose(s.SVGRenderer),W.compose(s.Chart),x.compose(s.Axis),H.compose(s.Chart),U.compose(s.Series.types.pie),A.compose(s.Chart,s.Axis),N.compose(s.Chart),ae.compose(s.Chart),j.compose(s.Axis,s.Chart,s.Series),V.compose(s.Axis,s.Chart,s.Series),T.compose(s.Pointer),l.extend(s,l),s}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(ek);var o7=ek.exports;const np=Yh(o7);var tk={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{doc:u,win:r}=s,{css:p}=l,f=r.EventTarget&&new r.EventTarget||"none";function m(y){if(typeof r.MouseEvent=="function")return new r.MouseEvent(y.type,y);if(u.createEvent){let _=u.createEvent("MouseEvent");if(_.initMouseEvent)return _.initMouseEvent(y.type,y.bubbles,y.cancelable,y.view||r,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),_}return v(y.type)}function v(y,_,b){let C=_||{x:0,y:0};if(typeof r.MouseEvent=="function")return new r.MouseEvent(y,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:b||f,view:r,detail:y==="click"?1:0,screenX:C.x,screenY:C.y,clientX:C.x,clientY:C.y});if(u.createEvent){let E=u.createEvent("MouseEvent");if(E.initMouseEvent)return E.initMouseEvent(y,!0,!0,r,y==="click"?1:0,C.x,C.y,C.x,C.y,!1,!1,!1,!1,0,null),E}return{type:y}}return{addClass:function(y,_){y.classList?y.classList.add(_):0>y.className.indexOf(_)&&(y.className+=" "+_)},cloneMouseEvent:m,cloneTouchEvent:function(y){let _=C=>{let E=[];for(let S=0;S<C.length;++S){let x=C.item(S);x&&E.push(x)}return E};if(typeof r.TouchEvent=="function"){let C=new r.TouchEvent(y.type,{touches:_(y.touches),targetTouches:_(y.targetTouches),changedTouches:_(y.changedTouches),ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,altKey:y.altKey,metaKey:y.metaKey,bubbles:y.bubbles,cancelable:y.cancelable,composed:y.composed,detail:y.detail,view:y.view});return y.defaultPrevented&&C.preventDefault(),C}let b=m(y);return b.touches=y.touches,b.changedTouches=y.changedTouches,b.targetTouches=y.targetTouches,b},escapeStringForHTML:function(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(y){return u.getElementById(y)},getFakeMouseEvent:v,getHeadingTagNameForElement:function(y){let _=S=>"h"+Math.min(6,parseInt(S.slice(1),10)+1),b=S=>/^H[1-6]$/i.test(S),C=S=>{let x=S;for(;x=x.previousSibling;){let A=x.tagName||"";if(b(A))return A}return""},E=S=>{let x=C(S);if(x)return _(x);let A=S.parentElement;if(!A)return"p";let D=A.tagName;return b(D)?_(D):E(A)};return E(y)},removeChildNodes:function(y){for(;y.lastChild;)y.removeChild(y.lastChild)},removeClass:function(y,_){y.classList?y.classList.remove(_):y.className=y.className.replace(RegExp(_,"g"),"")},removeElement:function(y){y&&y.parentNode&&y.parentNode.removeChild(y)},reverseChildNodes:function(y){let _=y.childNodes.length;for(;_--;)y.appendChild(y.childNodes[_])},simulatedEventTarget:f,stripHTMLTagsFromString:function(y,_=!1){return typeof y=="string"?_?y.replace(/<\/?[^>]+(>|$)/g,""):y.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):y},visuallyHideElement:function(y){p(y,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),n(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l){var u;let{format:r}=s,{getNestedProperty:p,pick:f}=l;return function(m){function v(_,b,C){let E=(T,k)=>{let N=T.slice(k||0),W=N.indexOf("{"),Z=N.indexOf("}");if(W>-1&&Z>W)return{statement:N.substring(W+1,Z),begin:k+W+1,end:k+Z}},S=[],x,A,D=0;do x=E(_,D),(A=_.substring(D,x&&x.begin-1)).length&&S.push({value:A,type:"constant"}),x&&S.push({value:x.statement,type:"statement"}),D=x?x.end+1:D+1;while(x);return S.forEach(T=>{T.type==="statement"&&(T.value=function(k,N){let W,Z,K=k.indexOf("#each("),j=k.indexOf("#plural("),V=k.indexOf("["),$=k.indexOf("]");if(K>-1){let R=k.slice(K).indexOf(")")+K,G=k.substring(0,K),U=k.substring(R+1),B=k.substring(K+6,R).split(","),H=Number(B[1]),q;if(Z="",W=p(B[0],N)){q=(H=isNaN(H)?W.length:H)<0?W.length+H:Math.min(H,W.length);for(let ae=0;ae<q;++ae)Z+=G+W[ae]+U}return Z.length?Z:""}if(j>-1){var L;let R=k.slice(j).indexOf(")")+j,G=k.substring(j+8,R).split(",");switch(Number(p(G[0],N))){case 0:Z=f(G[4],G[1]);break;case 1:Z=f(G[2],G[1]);break;case 2:Z=f(G[3],G[1]);break;default:Z=G[1]}return Z?(L=Z).trim&&L.trim()||L.replace(/^\s+|\s+$/g,""):""}if(V>-1){let R,G=k.substring(0,V),U=Number(k.substring(V+1,$));return W=p(G,N),!isNaN(U)&&W&&(U<0?(R=W[W.length+U])===void 0&&(R=W[0]):(R=W[U])===void 0&&(R=W[W.length-1])),R!==void 0?R:""}return"{"+k+"}"}(T.value,b))}),r(S.reduce((T,k)=>T+k.value,""),b,C)}function y(_,b){let C=_.split("."),E=this.options.lang,S=0;for(;S<C.length;++S)E=E&&E[C[S]];return typeof E=="string"?v(E,b,this):""}m.compose=function(_){let b=_.prototype;b.langFormat||(b.langFormat=y)},m.i18nFormat=v}(u||(u={})),u}),n(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:r}=s,{stripHTMLTagsFromString:p}=l,{defined:f,find:m,fireEvent:v}=u;function y(b){if(b.points&&b.points.length){let C=m(b.points,E=>!!E.graphic);return C&&C.graphic&&C.graphic.element}}function _(b){let C=y(b);return C&&C.parentNode||b.graph&&b.graph.element||b.group&&b.group.element}return{fireEventOnWrappedOrUnwrappedElement:function b(C,E){let S=E.type,x=C.hcEvents;r.createEvent&&(C.dispatchEvent||C.fireEvent)?C.dispatchEvent?C.dispatchEvent(E):C.fireEvent(S,E):x&&x[S]?v(C,S,E):C.element&&b(C.element,E)},getChartTitle:function(b){return p(b.options.title.text||b.langFormat("accessibility.defaultChartTitle",{chart:b}),b.renderer.forExport)},getAxisDescription:function(b){var C,E;return b&&(((C=b.options.accessibility)==null?void 0:C.description)||((E=b.axisTitle)==null?void 0:E.textStr)||b.options.id||b.categories&&"categories"||b.dateTime&&"Time"||"values")},getAxisRangeDescription:function(b){let C=b.options||{};return C.accessibility&&C.accessibility.rangeDescription!==void 0?C.accessibility.rangeDescription:b.categories?function(E){let S=E.chart;return E.dataMax&&E.dataMin?S.langFormat("accessibility.axis.rangeCategories",{chart:S,axis:E,numCategories:E.dataMax-E.dataMin+1}):""}(b):b.dateTime&&(b.min===0||b.dataMin===0)?function(E){let S=E.chart,x={},A=E.dataMin||E.min||0,D=E.dataMax||E.max||0,T="Seconds";x.Seconds=(D-A)/1e3,x.Minutes=x.Seconds/60,x.Hours=x.Minutes/60,x.Days=x.Hours/24,["Minutes","Hours","Days"].forEach(function(N){x[N]>2&&(T=N)});let k=x[T].toFixed(T!=="Seconds"&&T!=="Minutes"?1:0);return S.langFormat("accessibility.axis.timeRange"+T,{chart:S,axis:E,range:k.replace(".0","")})}(b):function(E){let S=E.chart,x=S.options,A=x&&x.accessibility&&x.accessibility.screenReaderSection.axisRangeDateFormat||"",D={min:E.dataMin||E.min||0,max:E.dataMax||E.max||0},T=function(k){return E.dateTime?S.time.dateFormat(A,D[k]):D[k].toString()};return S.langFormat("accessibility.axis.rangeFromTo",{chart:S,axis:E,rangeFrom:T("min"),rangeTo:T("max")})}(b)},getPointFromXY:function(b,C,E){let S=b.length,x;for(;S--;)if(x=m(b[S].points||[],function(A){return A.x===C&&A.y===E}))return x},getSeriesFirstPointElement:y,getSeriesFromName:function(b,C){return C?(b.series||[]).filter(function(E){return E.name===C}):b.series},getSeriesA11yElement:_,unhideChartElementFromAT:function b(C,E){E.setAttribute("aria-hidden",!1),E!==C.renderTo&&E.parentNode&&E.parentNode!==r.body&&(Array.prototype.forEach.call(E.parentNode.childNodes,function(S){S.hasAttribute("aria-hidden")||S.setAttribute("aria-hidden",!0)}),b(C,E.parentNode))},hideSeriesFromAT:function(b){let C=_(b);C&&C.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(b){let C=b.series.xAxis,E=b.series.yAxis,S=C&&C.scrollbar?C:E,x=S&&S.scrollbar;if(x&&f(x.to)&&f(x.from)){let A=x.to-x.from,D=function(T,k){if(!f(T.dataMin)||!f(T.dataMax))return 0;let N=T.toPixels(T.dataMin),W=T.toPixels(T.dataMax),Z=T.coll==="xAxis"?"x":"y";return(T.toPixels(k[Z]||0)-N)/(W-N)}(S,b);x.updatePosition(D-A/2,D+A/2),v(x,"changed",{from:x.from,to:x.to,trigger:"scrollbar",DOMEvent:null})}}}}),n(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l){let{doc:u}=s,{removeElement:r}=l;return class{constructor(){this.elements=[]}createElement(){let p=u.createElement.apply(u,arguments);return this.elements.push(p),p}removeElement(p){r(p),this.elements.splice(this.elements.indexOf(p),1)}destroyCreatedElements(){this.elements.forEach(function(p){r(p)}),this.elements=[]}}}),n(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u}=l;return class{constructor(){this.eventRemovers=[]}addEvent(){let r=u.apply(s,arguments);return this.eventRemovers.push({element:arguments[0],remover:r}),r}removeEvent(r){let p=this.eventRemovers.map(f=>f.remover).indexOf(r);this.eventRemovers[p].remover(),this.eventRemovers.splice(p,1)}removeAddedEvents(){this.eventRemovers.map(r=>r.remover).forEach(r=>r()),this.eventRemovers=[]}}}),n(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r){let{fireEventOnWrappedOrUnwrappedElement:p}=s,{getFakeMouseEvent:f}=r;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(m,v){this.chart=m,this.eventProvider=new u,this.domElementProvider=new l,this.proxyProvider=v,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(m,v,y,_){return this.eventProvider.addEvent(m,v,y,_)}createElement(m,v){return this.domElementProvider.createElement(m,v)}fakeClickEvent(m){p(m,f("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),n(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(s){let{find:l}=s;return class{constructor(u,r){this.chart=u,this.keyCodeMap=r.keyCodeMap||[],this.validate=r.validate,this.init=r.init,this.terminate=r.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(u){let r=u.which||u.keyCode,p=this.response.noHandler,f=l(this.keyCodeMap,function(m){return m[0].indexOf(r)>-1});return f?p=f[1].call(this,r,u):r===9&&(p=this.response[u.shiftKey?"prev":"next"]),p}}}),n(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f,getChartTitle:m}=u,{doc:v}=r,{stripHTMLTagsFromString:y}=p;return class extends s{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let _=this.chart,b="highcharts-title-"+_.index,C=y(_.langFormat("accessibility.svgContainerTitle",{chartTitle:m(_)}));if(C.length){let E=this.svgTitleElement=this.svgTitleElement||v.createElementNS("http://www.w3.org/2000/svg","title");E.textContent=C,E.id=b,_.renderTo.insertBefore(E,_.renderTo.firstChild)}}setSVGContainerLabel(){let _=this.chart,b=_.langFormat("accessibility.svgContainerLabel",{chartTitle:m(_)});_.renderer.box&&b.length&&_.renderer.box.setAttribute("aria-label",b)}setGraphicContainerAttrs(){let _=this.chart,b=_.langFormat("accessibility.graphicContainerLabel",{chartTitle:m(_)});b.length&&_.container.setAttribute("aria-label",b)}setRenderToAttrs(){let _=this.chart,b=_.options.accessibility.landmarkVerbosity!=="disabled",C=_.langFormat("accessibility.chartContainerLabel",{title:m(_),chart:_});C&&(_.renderTo.setAttribute("role",b?"region":"group"),_.renderTo.setAttribute("aria-label",C))}makeCreditsAccessible(){let _=this.chart,b=_.credits;b&&(b.textStr&&b.element.setAttribute("aria-label",_.langFormat("accessibility.credits",{creditsStr:y(b.textStr,_.renderer.forExport)})),f(_,b.element))}getKeyboardNavigation(){let _=this.chart;return new l(_,{keyCodeMap:[],validate:function(){return!0},init:function(){let b=_.accessibility;b&&b.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),n(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,pick:r}=s;return function(p){let f=["x","y","transform","width","height","r","d","stroke-width"];function m(){let b=this.focusElement,C=this.options.accessibility.keyboardNavigation.focusBorder;b&&(b.removeFocusBorder(),C.enabled&&b.addFocusBorder(C.margin,{stroke:C.style.color,strokeWidth:C.style.lineWidth,r:C.style.borderRadius}))}function v(b,C){let E=this.options.accessibility.keyboardNavigation.focusBorder,S=C||b.element;S&&S.focus&&(S.hcEvents&&S.hcEvents.focusin||u(S,"focusin",function(){}),S.focus(),E.hideBrowserFocusOutline&&(S.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=b,this.renderFocusBorder()}function y(b,C){this.focusBorder&&this.removeFocusBorder();let E=this.getBBox(),S=r(b,3),x=this.parentGroup,A=this.scaleX||x&&x.scaleX,D=this.scaleY||x&&x.scaleY,T=(A?!D:D)?Math.abs(A||D||1):(Math.abs(A||1)+Math.abs(D||1))/2;E.x+=this.translateX?this.translateX:0,E.y+=this.translateY?this.translateY:0;let k=E.x-S,N=E.y-S,W=E.width+2*S,Z=E.height+2*S,K=!!this.text;if(this.element.nodeName==="text"||K){let j,V,$=!!this.rotation,L=K?{x:$?1:0,y:0}:(j=0,V=0,this.attr("text-anchor")==="middle"?j=V=.5:this.rotation?j=.25:V=.75,{x:j,y:V}),R=+this.attr("x"),G=+this.attr("y");if(isNaN(R)||(k=R-E.width*L.x-S),isNaN(G)||(N=G-E.height*L.y-S),K&&$){let U=W;W=Z,Z=U,isNaN(R)||(k=R-E.height*L.x-S),isNaN(G)||(N=G-E.width*L.y-S)}}this.focusBorder=this.renderer.rect(k,N,W,Z,parseInt((C&&C.r||0).toString(),10)/T).addClass("highcharts-focus-border").attr({zIndex:99}).add(x),this.renderer.styledMode||this.focusBorder.attr({stroke:C&&C.stroke,"stroke-width":(C&&C.strokeWidth||0)/T}),function(j,...V){j.focusBorderUpdateHooks||(j.focusBorderUpdateHooks={},f.forEach($=>{let L=$+"Setter",R=j[L]||j._defaultSetter;j.focusBorderUpdateHooks[L]=R,j[L]=function(){let G=R.apply(j,arguments);return j.addFocusBorder.apply(j,V),G}}))}(this,b,C),function(j){if(j.focusBorderDestroyHook)return;let V=j.destroy;j.destroy=function(){return j.focusBorder&&j.focusBorder.destroy&&j.focusBorder.destroy(),V.apply(j,arguments)},j.focusBorderDestroyHook=V}(this)}function _(){var b;b=this,b.focusBorderUpdateHooks&&(Object.keys(b.focusBorderUpdateHooks).forEach(C=>{let E=b.focusBorderUpdateHooks[C];E===b._defaultSetter?delete b[C]:b[C]=E}),delete b.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}p.compose=function(b,C){let E=b.prototype,S=C.prototype;E.renderFocusBorder||(E.renderFocusBorder=m,E.setFocusToElement=v),S.addFocusBorder||(S.addFocusBorder=y,S.removeFocusBorder=_)}}(l||(l={})),l}),n(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{doc:f}=u,{addClass:m,visuallyHideElement:v}=r,{attr:y}=p;return class{constructor(_,b){this.chart=_,this.domElementProvider=new l,this.announceRegion=this.addAnnounceRegion(b)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(_){s.setElementHTML(this.announceRegion,_),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=s.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(_){let b=this.chart.announcerContainer||this.createAnnouncerContainer(),C=this.domElementProvider.createElement("div");return y(C,{"aria-hidden":!1,"aria-live":_,"aria-atomic":!0}),this.chart.styledMode?m(C,"highcharts-visually-hidden"):v(C),b.appendChild(C),C}createAnnouncerContainer(){let _=this.chart,b=f.createElement("div");return y(b,{"aria-hidden":!1,class:"highcharts-announcer-container"}),b.style.position="relative",_.renderTo.insertBefore(b,_.renderTo.firstChild),_.announcerContainer=b,b}}}),n(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(s){let{escapeStringForHTML:l,stripHTMLTagsFromString:u}=s;function r(v){return(v.annotations||[]).reduce((y,_)=>(_.options&&_.options.visible!==!1&&(y=y.concat(_.labels)),y),[])}function p(v){return v.options&&v.options.accessibility&&v.options.accessibility.description||v.graphic&&v.graphic.text&&v.graphic.text.textStr||""}function f(v){let y=v.options&&v.options.accessibility&&v.options.accessibility.description;if(y)return y;let _=v.chart,b=p(v),C=v.points,E=T=>T.graphic&&T.graphic.element&&T.graphic.element.getAttribute("aria-label")||"",S=C.filter(T=>!!T.graphic).map(T=>{let k=T.accessibility&&T.accessibility.valueDescription||E(T),N=T&&T.series.name||"";return(N?N+", ":"")+"data point "+k}).filter(T=>!!T),x=S.length,A=x>1?"MultiplePoints":x?"SinglePoint":"NoPoints",D={annotationText:b,annotation:v,numPoints:x,annotationPoint:S[0],additionalAnnotationPoints:S.slice(1)};return _.langFormat("accessibility.screenReaderSection.annotations.description"+A,D)}function m(v){return r(v).map(y=>{let _=l(u(f(y),v.renderer.forExport));return _?`<li>${_}</li>`:""})}return{getAnnotationsInfoHTML:function(v){let y=v.annotations;return y&&y.length?`<ul style="list-style-type: none">${m(v).join(" ")}</ul>`:""},getAnnotationLabelDescription:f,getAnnotationListItems:m,getPointAnnotationTexts:function(v){let y=r(v.series.chart).filter(_=>_.points.indexOf(v)>-1);return y.length?y.map(_=>`${p(_)}`):[]}}}),n(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y,_){let{getAnnotationsInfoHTML:b}=r,{getAxisDescription:C,getAxisRangeDescription:E,getChartTitle:S,unhideChartElementFromAT:x}=f,{format:A}=m,{doc:D}=v,{addClass:T,getElement:k,getHeadingTagNameForElement:N,stripHTMLTagsFromString:W,visuallyHideElement:Z}=y,{attr:K,pick:j,replaceNested:V}=_;function $(L){return V(L,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends l{constructor(){super(...arguments),this.screenReaderSections={}}init(){let L=this.chart,R=this;this.initRegionsDefinitions(),this.addEvent(L,"aftergetTableAST",function(G){R.onDataTableCreated(G)}),this.addEvent(L,"afterViewData",function(G){G.wasHidden&&(R.dataTableDiv=G.element,setTimeout(function(){R.focusDataTable()},300))}),this.addEvent(L,"afterHideData",function(){R.viewDataTableButton&&R.viewDataTableButton.setAttribute("aria-expanded","false")}),L.exporting&&this.addEvent(L,"afterPrint",function(){R.updateAllScreenReaderSections()}),this.announcer=new u(L,"assertive")}initRegionsDefinitions(){let L=this,R=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let U=R.screenReaderSection.beforeChartFormatter;return U?U(G):L.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.renderTo.firstChild)},afterInserted:function(){L.sonifyButtonId!==void 0&&L.initSonifyButton(L.sonifyButtonId),L.dataTableButtonId!==void 0&&L.initDataTableButton(L.dataTableButtonId)}},after:{element:null,buildContent:function(G){let U=R.screenReaderSection.afterChartFormatter;return U?U(G):L.defaultAfterChartFormatter()},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.container.nextSibling)},afterInserted:function(){L.chart.accessibility&&R.keyboardNavigation.enabled&&L.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let L=this;Object.keys(this.screenReaderSections).forEach(function(R){L.updateScreenReaderSection(R)})}getLinkedDescriptionElement(){let L=this.chart.options.accessibility.linkedDescription;if(!L)return;if(typeof L!="string")return L;let R=A(L,this.chart),G=D.querySelectorAll(R);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let L=this.linkedDescriptionElement;L&&(L.setAttribute("aria-hidden","true"),T(L,"highcharts-linked-description"))}updateScreenReaderSection(L){let R=this.chart,G=this.screenReaderSections[L],U=G.buildContent(R),B=G.element=G.element||this.createElement("div"),H=B.firstChild||this.createElement("div");U?(this.setScreenReaderSectionAttribs(B,L),p.setElementHTML(H,U),B.appendChild(H),G.insertIntoDOM(B,R),R.styledMode?T(H,"highcharts-visually-hidden"):Z(H),x(R,H),G.afterInserted&&G.afterInserted()):(B.parentNode&&B.parentNode.removeChild(B),G.element=null)}setScreenReaderSectionAttribs(L,R){let G=this.chart,U=G.langFormat("accessibility.screenReaderSection."+R+"RegionLabel",{chart:G,chartTitle:S(G)});K(L,{id:`highcharts-screen-reader-region-${R}-${G.index}`,"aria-label":U||void 0}),L.style.position="relative",U&&L.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.beforeChartFormat;if(!R)return"";let G=this.getAxesDescription(),U=L.sonify&&L.options.sonification&&L.options.sonification.enabled,B="highcharts-a11y-sonify-data-btn-"+L.index,H="hc-linkto-highcharts-data-table-"+L.index,q=b(L),ae=L.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:L}),fe={headingTagName:N(L.renderTo),chartTitle:S(L),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:U?this.getSonifyButtonText(B):"",viewTableButton:L.getCSV?this.getDataTableButtonText(H):"",annotationsTitle:q?ae:"",annotationsList:q},re=s.i18nFormat(R,fe,L);return this.dataTableButtonId=H,this.sonifyButtonId=B,$(re)}defaultAfterChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.afterChartFormat;if(!R)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return $(s.i18nFormat(R,G,L))}getLinkedDescription(){let L=this.linkedDescriptionElement;return W(L&&L.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let L=this.chart.options,R=L.caption,G=R&&R.text,U=this.getLinkedDescription();return L.accessibility.description||U||G||""}getTypeDescriptionText(){let L=this.chart;return L.types?L.options.accessibility.typeDescription||function(R,G){let U=G[0],B=R.series&&R.series[0]||{},H=R.mapView&&R.mapView.geoMap&&R.mapView.geoMap.title,q={numSeries:R.series.length,numPoints:B.points&&B.points.length,chart:R,mapTitle:H};return U?U==="map"||U==="tiledwebmap"?q.mapTitle?R.langFormat("accessibility.chartTypes.mapTypeDescription",q):R.langFormat("accessibility.chartTypes.unknownMap",q):R.types.length>1?R.langFormat("accessibility.chartTypes.combinationChart",q):function(ae,fe,re){let ce=fe[0],ke=ae.langFormat("accessibility.seriesTypeDescriptions."+ce,re),ve=ae.series&&ae.series.length<2?"Single":"Multiple";return(ae.langFormat("accessibility.chartTypes."+ce+ve,re)||ae.langFormat("accessibility.chartTypes.default"+ve,re))+(ke?" "+ke:"")}(R,G,q):R.langFormat("accessibility.chartTypes.emptyChart",q)}(L,L.types):""}getDataTableButtonText(L){let R=this.chart;return'<button id="'+L+'">'+R.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:R,chartTitle:S(R)})+"</button>"}getSonifyButtonText(L){let R=this.chart;return R.options.sonification&&R.options.sonification.enabled===!1?"":'<button id="'+L+'">'+R.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:R,chartTitle:S(R)})+"</button>"}getSubtitleText(){let L=this.chart.options.subtitle;return W(L&&L.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let L=k(`highcharts-end-of-chart-marker-${this.chart.index}`);if(L)return L.outerHTML;let R=this.chart,G=R.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:R});return'<div id="highcharts-end-of-chart-marker-'+R.index+'">'+G+"</div>"}onDataTableCreated(L){let R=this.chart;if(R.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=L.tree.attributes||{};G.tabindex=-1,G.summary=R.langFormat("accessibility.table.tableSummary",{chart:R}),L.tree.attributes=G}}focusDataTable(){let L=this.dataTableDiv,R=L&&L.getElementsByTagName("table")[0];R&&R.focus&&R.focus()}initSonifyButton(L){let R=this.sonifyButton=k(L),G=this.chart,U=B=>{R&&(R.setAttribute("aria-hidden","true"),R.setAttribute("aria-label","")),B.preventDefault(),B.stopPropagation();let H=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(H),setTimeout(()=>{R&&(R.removeAttribute("aria-hidden"),R.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};R&&G&&(R.setAttribute("tabindex",-1),R.onclick=function(B){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||U).call(this,B,G)})}initDataTableButton(L){let R=this.viewDataTableButton=k(L),G=this.chart,U=L.replace("hc-linkto-","");R&&(K(R,{tabindex:-1,"aria-expanded":!!k(U)}),R.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let L=this.chart,R=function(ae,fe){let re=L[ae];return re.length>1||re[0]&&j(re[0].options.accessibility&&re[0].options.accessibility.enabled,fe)},G=!!L.types&&0>L.types.indexOf("map")&&0>L.types.indexOf("treemap")&&0>L.types.indexOf("tilemap"),U=!!L.hasCartesianSeries,B=R("xAxis",!L.angular&&U&&G),H=R("yAxis",U&&G),q={};return B&&(q.xAxis=this.getAxisDescriptionText("xAxis")),H&&(q.yAxis=this.getAxisDescriptionText("yAxis")),q}getAxisDescriptionText(L){let R=this.chart,G=R[L];return R.langFormat("accessibility.axis."+L+"Description"+(G.length>1?"Plural":"Singular"),{chart:R,names:G.map(function(U){return C(U)}),ranges:G.map(function(U){return E(U)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),n(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{attr:f}=s,{getChartTitle:m,unhideChartElementFromAT:v}=r,{getFakeMouseEvent:y}=p;function _(C){return C.exportSVGElements&&C.exportSVGElements[0]}class b extends l{init(){let E=this.chart,S=this;this.addEvent(E,"exportMenuShown",function(){S.onMenuShown()}),this.addEvent(E,"exportMenuHidden",function(){S.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let E=this.chart.exportContextMenu;E&&E.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let E=this.chart,S=E.exportContextMenu;S&&(this.addAccessibleContextMenuAttribs(),v(E,S)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(E){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",E)}onChartRender(){let E=this.chart,S=E.focusElement,x=E.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&S&&S===E.exportingGroup&&(S.focusBorder?E.setFocusToElement(S,this.exportButtonProxy.innerElement):x&&x.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let E=this.chart,S=this.proxyProvider,x=_(E);(function(A){let D=A.options.exporting,T=_(A);return!!(D&&D.enabled!==!1&&D.accessibility&&D.accessibility.enabled&&T&&T.element)})(E)&&x&&(this.exportButtonProxy=S.addProxyElement("chartMenu",{click:x},"button",{"aria-label":E.langFormat("accessibility.exporting.menuButtonLabel",{chart:E,chartTitle:m(E)}),"aria-expanded":!1,title:E.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let E=this.chart,S=E.exportDivElements;if(S&&S.length){S.forEach(A=>{A&&(A.tagName!=="LI"||A.children&&A.children.length?A.setAttribute("aria-hidden","true"):A.setAttribute("tabindex",-1))});let x=S[0]&&S[0].parentNode;x&&f(x,{"aria-hidden":void 0,"aria-label":E.langFormat("accessibility.exporting.chartMenuLabel",{chart:E}),role:"list"})}}getKeyboardNavigation(){let E=this.keyCodes,S=this.chart,x=this;return new u(S,{keyCodeMap:[[[E.left,E.up],function(){return x.onKbdPrevious(this)}],[[E.right,E.down],function(){return x.onKbdNext(this)}],[[E.enter,E.space],function(){return x.onKbdClick(this)}]],validate:function(){return!!S.exporting&&S.options.exporting.enabled!==!1&&S.options.exporting.accessibility.enabled!==!1},init:function(){let A=x.exportButtonProxy,D=x.chart.exportingGroup;A&&D&&S.setFocusToElement(D,A.innerElement)},terminate:function(){S.hideExportMenu()}})}onKbdPrevious(E){let S=this.chart,x=S.options.accessibility,A=E.response,D=S.highlightedExportItemIx||0;for(;D--;)if(S.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(S.highlightLastExportItem(),A.success):A.prev}onKbdNext(E){let S=this.chart,x=S.options.accessibility,A=E.response;for(let D=(S.highlightedExportItemIx||0)+1;D<S.exportDivElements.length;++D)if(S.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(S.highlightExportItem(0),A.success):A.next}onKbdClick(E){let S=this.chart,x=S.exportDivElements[S.highlightedExportItemIx],A=_(S).element;return S.openMenu?this.fakeClickEvent(x):(this.fakeClickEvent(A),S.highlightExportItem(0)),E.response.success}}return function(C){function E(){let D=_(this);if(D){let T=D.element;T.onclick&&T.onclick(y("click"))}}function S(){let D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(T=>{T&&T.className==="highcharts-menu-item"&&T.onmouseout&&T.onmouseout(y("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(D){let T=this.exportDivElements&&this.exportDivElements[D],k=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(T&&T.tagName==="LI"&&!(T.children&&T.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return T.focus&&N&&T.focus(),k&&k.onmouseout&&k.onmouseout(y("mouseout")),T.onmouseover&&T.onmouseover(y("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function A(){if(this.exportDivElements){let D=this.exportDivElements.length;for(;D--;)if(this.highlightExportItem(D))return!0}return!1}C.compose=function(D){let T=D.prototype;T.hideExportMenu||(T.hideExportMenu=S,T.highlightExportItem=x,T.highlightLastExportItem=A,T.showExportMenu=E)}}(b),b}),n(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{doc:f,win:m}=s,{addEvent:v,defined:y,fireEvent:_}=u,{getElement:b,simulatedEventTarget:C}=p;class E{constructor(x,A){this.currentModuleIx=NaN,this.modules=[],this.init(x,A)}init(x,A){let D=this.eventProvider=new r;this.chart=x,this.components=A,this.modules=[],this.currentModuleIx=0,this.update(),D.addEvent(this.tabindexContainer,"keydown",T=>this.onKeydown(T)),D.addEvent(this.tabindexContainer,"focus",T=>this.onFocus(T)),["mouseup","touchend"].forEach(T=>D.addEvent(f,T,k=>this.onMouseUp(k))),["mousedown","touchstart"].forEach(T=>D.addEvent(x.renderTo,T,()=>{this.isClickingChart=!0}))}update(x){let A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,T=this.components;this.updateContainerTabindex(),D&&D.enabled&&x&&x.length?(this.modules=x.reduce(function(k,N){let W=T[N].getKeyboardNavigation();return k.concat(W)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let x=b(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),x?(this.makeElementAnExitAnchor(x),this.exitAnchor=x):this.createExitAnchor()}move(x){let A=this.modules&&this.modules[this.currentModuleIx];A&&A.terminate&&A.terminate(x),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=x;let D=this.modules&&this.modules[this.currentModuleIx];if(D){if(D.validate&&!D.validate())return this.move(x);if(D.init)return D.init(x),!0}return this.currentModuleIx=0,this.exiting=!0,x>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(x){let A=this.chart,D=x.relatedTarget&&A.container.contains(x.relatedTarget),T=A.options.accessibility,k=T&&T.keyboardNavigation;if(k&&k.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!D){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(x){if(delete this.isClickingChart,!this.keyboardReset&&x.relatedTarget!==C){let A=this.chart;if(!x.target||!A.container.contains(x.target)){let D=this.modules&&this.modules[this.currentModuleIx||0];D&&D.terminate&&D.terminate(),this.currentModuleIx=0}A.focusElement&&(A.focusElement.removeFocusBorder(),delete A.focusElement),this.keyboardReset=!0}}onKeydown(x){let A,D=x||m.event,T=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],k=D.target;if((!k||k.nodeName!=="INPUT"||k.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,T)){let N=T.run(D);N===T.response.success?A=!0:N===T.response.prev?A=this.move(-1):N===T.response.next&&(A=this.move(1)),A&&(D.preventDefault(),D.stopPropagation())}}updateContainerTabindex(){let x,A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,T=!(D&&D.enabled===!1),k=this.chart,N=k.container;k.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),x=k.renderTo):x=N,this.tabindexContainer=x;let W=x.getAttribute("tabindex");T&&!W?x.setAttribute("tabindex","0"):T||k.container.removeAttribute("tabindex")}createExitAnchor(){let x=this.chart,A=this.exitAnchor=f.createElement("div");x.renderTo.appendChild(A),this.makeElementAnExitAnchor(A)}makeElementAnExitAnchor(x){let A=this.tabindexContainer.getAttribute("tabindex")||0;x.setAttribute("class","highcharts-exit-anchor"),x.setAttribute("tabindex",A),x.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(x)}removeExitAnchor(){if(this.exitAnchor){let x=this.eventProvider.eventRemovers.find(A=>A.element===this.exitAnchor);x&&y(x.remover)&&this.eventProvider.removeEvent(x.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(x){let A=this.chart,D=this;this.eventProvider.addEvent(x,"focus",function(T){let k=T||m.event,N=!(k.relatedTarget&&A.container.contains(k.relatedTarget)||D.exiting);if(A.focusElement&&delete A.focusElement,N){if(D.tabbingInBackwards=!0,D.tabindexContainer.focus(),delete D.tabbingInBackwards,k.preventDefault(),D.modules&&D.modules.length){D.currentModuleIx=D.modules.length-1;let W=D.modules[D.currentModuleIx];W&&W.validate&&!W.validate()?D.move(-1):W&&W.init(-1)}}else D.exiting=!1})}getFirstValidModuleIx(){let x=this.modules.length;for(let A=0;A<x;++A){let D=this.modules[A];if(!D.validate||D.validate())return A}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(S){function x(){let D=this;_(this,"dismissPopupContent",{},function(){D.tooltip&&D.tooltip.hide(0),D.hideExportMenu()})}function A(D){(D.which||D.keyCode)===27&&s.charts&&s.charts.forEach(T=>{T&&T.dismissPopupContent&&T.dismissPopupContent()})}S.compose=function(D){l.compose(D);let T=D.prototype;return T.dismissPopupContent||(T.dismissPopupContent=x,v(f,"keydown",A)),D}}(E),E}),n(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p,f,m,v){let{animObject:y}=s,{doc:_}=l,{addEvent:b,fireEvent:C,isNumber:E,pick:S,syncTimeout:x}=r,{getChartTitle:A}=m,{stripHTMLTagsFromString:D,addClass:T,removeClass:k}=v;function N(K){let j=K.legend&&K.legend.allItems,V=K.options.legend.accessibility||{},$=K.colorAxis&&K.colorAxis.some(L=>!L.dataClasses||!L.dataClasses.length);return!!(j&&j.length&&!$&&V.enabled!==!1)}function W(K,j){let V=j.legendItem||{};for(let $ of(j.setState(K?"hover":"",!0),["group","label","symbol"])){let L=V[$],R=L&&L.element||L;R&&C(R,K?"mouseover":"mouseout")}}class Z extends p{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let j=this;this.recreateProxies(),this.addEvent(u,"afterScroll",function(){this.chart===j.chart&&(j.proxyProvider.updateGroupProxyElementPositions("legend"),j.updateLegendItemProxyVisibility(),j.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(j.highlightedLegendItemIx))}),this.addEvent(u,"afterPositionItem",function(V){this.chart===j.chart&&this.chart.renderer&&j.updateProxyPositionForItem(V.item)}),this.addEvent(u,"afterRender",function(){this.chart===j.chart&&this.chart.renderer&&j.recreateProxies()&&x(()=>j.proxyProvider.updateGroupProxyElementPositions("legend"),y(S(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let j,V=this.chart,$=V.legend,L=$.allItems||[],R=$.currentPage||1,G=$.clipHeight||0;L.forEach(U=>{if(U.a11yProxyElement){let B=$.pages&&$.pages.length,H=U.a11yProxyElement.element,q=!1;if(j=U.legendItem||{},B){let ae=j.pageIx||0;q=(j.y||0)+(j.label?Math.round(j.label.getBBox().height):0)-$.pages[ae]>G||ae!==R-1}q?V.styledMode?T(H,"highcharts-a11y-invisible"):H.style.visibility="hidden":(k(H,"highcharts-a11y-invisible"),H.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(j){let V=this.chart,$=V.legend,L=($.currentPage||1)+j,R=$.pages||[];if(L>0&&L<=R.length){let G=0;for(let U of $.allItems)((U.legendItem||{}).pageIx||0)+1===L&&V.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(j){j.a11yProxyElement&&j.a11yProxyElement.refreshPosition()}recreateProxies(){let j=_.activeElement,V=this.proxyGroup,$=j&&V&&V.contains(j);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),$&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let j=this.chart,V=D((j.legend&&j.legend.options.title&&j.legend.options.title.text||"").replace(/<br ?\/?>/g," "),j.renderer.forExport),$=j.langFormat("accessibility.legend.legendLabel"+(V?"":"NoTitle"),{chart:j,legendTitle:V,chartTitle:A(j)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":$})}addLegendProxyGroup(){let j=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:j})}proxyLegendItems(){let j,V=this;((this.chart.legend||{}).allItems||[]).forEach($=>{(j=$.legendItem||{}).label&&j.label.element&&V.proxyLegendItem($)})}proxyLegendItem(j){let V=j.legendItem||{};if(!V.label||!V.group)return;let $=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:D(j.name,this.chart.renderer.forExport),item:j}),L={tabindex:-1,"aria-pressed":j.visible,"aria-label":$},R=V.group.div?V.label:V.group;j.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:V.label,visual:R.element},"button",L)}getKeyboardNavigation(){let j=this.keyCodes,V=this,$=this.chart;return new f($,{keyCodeMap:[[[j.left,j.right,j.up,j.down],function(L){return V.onKbdArrowKey(this,L)}],[[j.enter,j.space],function(){return V.onKbdClick(this)}],[[j.pageDown,j.pageUp],function(L){let R=L===j.pageDown?1:-1;return V.highlightAdjacentLegendPage(R),this.response.success}]],validate:function(){return V.shouldHaveLegendNavigation()},init:function(){$.highlightLegendItem(0),V.highlightedLegendItemIx=0},terminate:function(){V.highlightedLegendItemIx=-1,$.legend.allItems.forEach(L=>W(!1,L))}})}onKbdArrowKey(j,V){let{keyCodes:{left:$,up:L},highlightedLegendItemIx:R,chart:G}=this,U=G.legend.allItems.length,B=G.options.accessibility.keyboardNavigation.wrapAround,H=V===$||V===L?-1:1;return G.highlightLegendItem(R+H)?this.highlightedLegendItemIx+=H:B&&U>1&&(this.highlightedLegendItemIx=H>0?0:U-1,G.highlightLegendItem(this.highlightedLegendItemIx)),j.response.success}onKbdClick(j){let V=this.chart.legend.allItems[this.highlightedLegendItemIx];return V&&V.a11yProxyElement&&V.a11yProxyElement.click(),j.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let j=this.chart,V=(j.options.legend||{}).accessibility||{};return!!(j.legend.display&&V.keyboardNavigation&&V.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(K){function j($){let L=this.legend.allItems,R=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=L[$],U=(G==null?void 0:G.legendItem)||{};if(G){E(R)&&L[R]&&W(!1,L[R]),function(q,ae){let fe=(q.allItems[ae].legendItem||{}).pageIx,re=q.currentPage;fe!==void 0&&fe+1!==re&&q.scroll(1+fe-re)}(this.legend,$);let B=U.label,H=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return B&&B.element&&H&&this.setFocusToElement(B,H),W(!0,G),!0}return!1}function V($){let L=this.chart.options.accessibility,R=$.item;L.enabled&&R&&R.a11yProxyElement&&R.a11yProxyElement.innerElement.setAttribute("aria-pressed",$.visible?"true":"false")}K.compose=function($,L){let R=$.prototype;R.highlightLegendItem||(R.highlightLegendItem=j,b(L,"afterColorizeItem",V))}}(Z),Z}),n(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let u,{isTouchDevice:r}=s,{addEvent:p,merge:f,pick:m}=l,v=[];function y(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function _(){var W;let A,D,T,k=this.legend,N=this.navigator;if(N){A=k&&k.options,D=N.xAxis,T=N.yAxis;let{scrollbarHeight:Z,scrollButtonSize:K}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Z-N.height:this.spacing[3]+Z,N.top=this.plotTop+K):(N.left=m(D.left,this.plotLeft+K),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Z-(((W=this.scrollbar)==null?void 0:W.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(A&&A.verticalAlign==="bottom"&&A.layout!=="proximate"&&A.enabled&&!A.floating?k.legendHeight+m(A.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&T&&(this.inverted?D.options.left=T.options.left=N.left:D.options.top=T.options.top=N.top,D.setAxisSize(),T.setAxisSize())}}function b(A){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this),m(A.redraw,!0)&&this.redraw(A.animation))}function C(){let A=this.options;(A.navigator.enabled||A.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this))}function E(){let A=this.options,D=A.navigator,T=A.rangeSelector;if((D&&D.enabled||T&&T.enabled)&&(!r&&this.zooming.type==="x"||r&&this.zooming.pinchType==="x"))return!1}function S(A){let D=A.navigator;if(D&&A.xAxis[0]){let T=A.xAxis[0].getExtremes();D.render(T.min,T.max)}}function x(A){let D=A.options.navigator||{},T=A.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||T.enabled)&&(f(!0,this.options.navigator,D),f(!0,this.options.scrollbar,T),delete A.options.navigator,delete A.options.scrollbar)}return{compose:function(A,D){if(l.pushUnique(v,A)){let T=A.prototype;u=D,T.callbacks.push(S),p(A,"afterAddSeries",y),p(A,"afterSetChartSize",_),p(A,"afterUpdate",b),p(A,"beforeRender",C),p(A,"beforeShowResetZoom",E),p(A,"update",x)}}}}),n(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isTouchDevice:u}=s,{addEvent:r,correctFloat:p,defined:f,isNumber:m,pick:v}=l;function y(){this.navigatorAxis||(this.navigatorAxis=new b(this))}function _(C){let E,S=this.chart,x=S.options,A=x.navigator,D=this.navigatorAxis,T=S.zooming.pinchType,k=x.rangeSelector,N=S.zooming.type;if(this.isXAxis&&(A!=null&&A.enabled||k!=null&&k.enabled)){if(N==="y"&&C.trigger==="zoom")E=!1;else if((C.trigger==="zoom"&&N==="xy"||u&&T==="xy")&&this.options.range){let W=D.previousZoom;f(C.min)?D.previousZoom=[this.min,this.max]:W&&(C.min=W[0],C.max=W[1],D.previousZoom=void 0)}}E!==void 0&&C.preventDefault()}class b{static compose(E){E.keepProps.includes("navigatorAxis")||(E.keepProps.push("navigatorAxis"),r(E,"init",y),r(E,"setExtremes",_))}constructor(E){this.axis=E}destroy(){this.axis=void 0}toFixedRange(E,S,x,A){let D=this.axis,T=(D.pointRange||0)/2,k=v(x,D.translate(E,!0,!D.horiz)),N=v(A,D.translate(S,!0,!D.horiz));return f(x)||(k=p(k+T)),f(A)||(N=p(N-T)),m(k)&&m(N)||(k=N=void 0),{min:k,max:N}}}return b}),n(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l){let{parse:u}=s,{seriesTypes:r}=l;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:u("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:r.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),n(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l){let{relativeLength:u}=l;return{"navigator-handle":function(r,p,f,m,v={}){let y=v.width?v.width/2:f,_=u(v.borderRadius||0,Math.min(2*y,m));return[["M",-1.5,(m=v.height||m)/2-3.5],["L",-1.5,m/2+4.5],["M",.5,m/2-3.5],["L",.5,m/2+4.5],...s.rect(-y-1,.5,2*y+1,m,{r:_})]}}}),n(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(s){let{defined:l}=s;return{setFixedRange:function(u){let r=this.xAxis[0];l(r.dataMax)&&l(r.dataMin)&&u?this.fixedRange=Math.min(u,r.dataMax-r.dataMin):this.fixedRange=u}}}),n(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v){let{setOptions:y}=s,{composed:_}=l,{getRendererType:b}=f,{setFixedRange:C}=m,{addEvent:E,extend:S,pushUnique:x}=v;function A(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,T,k){u.compose(T),x(_,"Navigator")&&(D.prototype.setFixedRange=C,S(b().prototype.symbols,p),E(k,"afterUpdate",A),y({navigator:r}))}}}),n(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:r}=s,{addEvent:p,defined:f,pick:m,pushUnique:v}=l;return function(y){let _;function b(x){let A=m(x.options&&x.options.min,x.min),D=m(x.options&&x.options.max,x.max);return{axisMin:A,axisMax:D,scrollMin:f(x.dataMin)?Math.min(A,x.min,x.dataMin,m(x.threshold,1/0)):A,scrollMax:f(x.dataMax)?Math.max(D,x.max,x.dataMax,m(x.threshold,-1/0)):D}}function C(){let x=this.scrollbar,A=x&&!x.options.opposite,D=this.horiz?2:A?3:1;x&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=x.size+(x.options.margin||0))}function E(){let x=this;x.options&&x.options.scrollbar&&x.options.scrollbar.enabled&&(x.options.scrollbar.vertical=!x.horiz,x.options.startOnTick=x.options.endOnTick=!1,x.scrollbar=new _(x.chart.renderer,x.options.scrollbar,x.chart),p(x.scrollbar,"changed",function(A){let D,T,{axisMin:k,axisMax:N,scrollMin:W,scrollMax:Z}=b(x),K=Z-W;if(f(k)&&f(N))if(x.horiz&&!x.reversed||!x.horiz&&x.reversed?(D=W+K*this.to,T=W+K*this.from):(D=W+K*(1-this.from),T=W+K*(1-this.to)),this.shouldUpdateExtremes(A.DOMType)){let j=A.DOMType!=="mousemove"&&A.DOMType!=="touchmove"&&void 0;x.setExtremes(T,D,!0,j,A)}else this.setRange(this.from,this.to)}))}function S(){let x,A,D,{scrollMin:T,scrollMax:k}=b(this),N=this.scrollbar,W=this.axisTitleMargin+(this.titleOffset||0),Z=this.chart.scrollbarsOffsets,K=this.options.margin||0;if(N&&Z){if(this.horiz)this.opposite||(Z[1]+=W),N.position(this.left,this.top+this.height+2+Z[1]-(this.opposite?K:0),this.width,this.height),this.opposite||(Z[1]+=K),x=1;else{let j;this.opposite&&(Z[0]+=W),j=N.options.opposite?this.left+this.width+2+Z[0]-(this.opposite?0:K):this.opposite?0:K,N.position(j,this.top,this.width,this.height),this.opposite&&(Z[0]+=K),x=0}if(Z[x]+=N.size+(N.options.margin||0),isNaN(T)||isNaN(k)||!f(this.min)||!f(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let j=this.pointRange/(this.dataMax+1);A=j*this.min,D=j*(this.max+1),N.setRange(A,D)}else A=(this.min-T)/(k-T),D=(this.max-T)/(k-T),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(A,D):N.setRange(1-D,1-A)}}y.compose=function(x,A){v(r,"Axis.Scrollbar")&&(_=A,p(x,"afterGetOffset",C),p(x,"afterInit",E),p(x,"afterRender",S))}}(u||(u={})),u}),n(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),n(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{defaultOptions:f}=s,{addEvent:m,correctFloat:v,crisp:y,defined:_,destroyObjectProperties:b,fireEvent:C,merge:E,pick:S,removeEvent:x}=p;class A{static compose(T){u.compose(T,A)}static swapXY(T,k){return k&&T.forEach(N=>{let W,Z=N.length;for(let K=0;K<Z;K+=2)typeof(W=N[K+1])=="number"&&(N[K+1]=N[K+2],N[K+2]=W)}),T}constructor(T,k,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(T,k,N)}addEvents(){let T=this.options.inverted?[1,0]:[0,1],k=this.scrollbarButtons,N=this.scrollbarGroup.element,W=this.track.element,Z=this.mouseDownHandler.bind(this),K=this.mouseMoveHandler.bind(this),j=this.mouseUpHandler.bind(this),V=[[k[T[0]].element,"click",this.buttonToMinClick.bind(this)],[k[T[1]].element,"click",this.buttonToMaxClick.bind(this)],[W,"click",this.trackClick.bind(this)],[N,"mousedown",Z],[N.ownerDocument,"mousemove",K],[N.ownerDocument,"mouseup",j],[N,"touchstart",Z],[N.ownerDocument,"touchmove",K],[N.ownerDocument,"touchend",j]];V.forEach(function($){m.apply(null,$)}),this._events=V}buttonToMaxClick(T){let k=(this.to-this.from)*S(this.options.step,.2);this.updatePosition(this.from+k,this.to+k),C(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}buttonToMinClick(T){let k=v(this.to-this.from)*S(this.options.step,.2);this.updatePosition(v(this.from-k),v(this.to-k)),C(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}cursorToScrollbarPosition(T){let k=this.options,N=k.minWidth>this.calculatedWidth?k.minWidth:0;return{chartX:(T.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(T.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let T=this,k=T.chart.scroller;T.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){T[N]&&T[N].destroy&&(T[N]=T[N].destroy())}),k&&T===k.scrollbar&&(k.scrollbar=null,b(k.scrollbarButtons))}drawScrollbarButton(T){let k=this.renderer,N=this.scrollbarButtons,W=this.options,Z=this.size,K=k.g().add(this.group);if(N.push(K),W.buttonsEnabled){let j=k.rect().addClass("highcharts-scrollbar-button").add(K);this.chart.styledMode||j.attr({stroke:W.buttonBorderColor,"stroke-width":W.buttonBorderWidth,fill:W.buttonBackgroundColor}),j.attr(j.crisp({x:-.5,y:-.5,width:Z,height:Z,r:W.buttonBorderRadius},j.strokeWidth()));let V=k.path(A.swapXY([["M",Z/2+(T?-1:1),Z/2-3],["L",Z/2+(T?-1:1),Z/2+3],["L",Z/2+(T?2:-2),Z/2]],W.vertical)).addClass("highcharts-scrollbar-arrow").add(N[T]);this.chart.styledMode||V.attr({fill:W.buttonArrowColor})}}init(T,k,N){this.scrollbarButtons=[],this.renderer=T,this.userOptions=k,this.options=E(r,f.scrollbar,k),this.options.margin=S(this.options.margin,10),this.chart=N,this.size=S(this.options.size,this.options.height),k.enabled&&(this.render(),this.addEvents())}mouseDownHandler(T){var W;let k=((W=this.chart.pointer)==null?void 0:W.normalize(T))||T,N=this.cursorToScrollbarPosition(k);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(T){var K;let k,N=((K=this.chart.pointer)==null?void 0:K.normalize(T))||T,W=this.options.vertical?"chartY":"chartX",Z=this.initPositions||[];this.grabbedCenter&&(!T.touches||T.touches[0][W]!==0)&&(k=this.cursorToScrollbarPosition(N)[W]-this[W],this.hasDragged=!0,this.updatePosition(Z[0]+k,Z[1]+k),this.hasDragged&&C(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:T.type,DOMEvent:T}))}mouseUpHandler(T){this.hasDragged&&C(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:T.type,DOMEvent:T}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(T,k,N,W){let{buttonsEnabled:Z,margin:K=0,vertical:j}=this.options,V=this.rendered?"animate":"attr",$=W,L=0;this.group.show(),this.x=T,this.y=k+this.trackBorderWidth,this.width=N,this.height=W,this.xOffset=$,this.yOffset=L,j?(this.width=this.yOffset=N=L=this.size,this.xOffset=$=0,this.yOffset=L=Z?this.size:0,this.barWidth=W-(Z?2*N:0),this.x=T+=K):(this.height=W=this.size,this.xOffset=$=Z?this.size:0,this.barWidth=N-(Z?2*W:0),this.y=this.y+K),this.group[V]({translateX:T,translateY:this.y}),this.track[V]({width:N,height:W}),this.scrollbarButtons[1][V]({translateX:j?0:N-$,translateY:j?W-L:0})}removeEvents(){this._events.forEach(function(T){x.apply(null,T)}),this._events.length=0}render(){let T=this.renderer,k=this.options,N=this.size,W=this.chart.styledMode,Z=T.g("scrollbar").attr({zIndex:k.zIndex}).hide().add();this.group=Z,this.track=T.rect().addClass("highcharts-scrollbar-track").attr({r:k.trackBorderRadius||0,height:N,width:N}).add(Z),W||this.track.attr({fill:k.trackBackgroundColor,stroke:k.trackBorderColor,"stroke-width":k.trackBorderWidth});let K=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-y(0,K),y:-y(0,K)}),this.scrollbarGroup=T.g().add(Z),this.scrollbar=T.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-K,width:N-K,r:k.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=T.path(A.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],k.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),W||(this.scrollbar.attr({fill:k.barBackgroundColor,stroke:k.barBorderColor,"stroke-width":k.barBorderWidth}),this.scrollbarRifles.attr({stroke:k.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-y(0,this.scrollbarStrokeWidth),-y(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(T,k){let N,W,Z=this.options,K=Z.vertical,j=Z.minWidth,V=this.barWidth,$=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!_(V))return;let L=V*Math.min(k,1);N=Math.ceil(V*(T=Math.max(T,0))),this.calculatedWidth=W=v(L-N),W<j&&(N=(V-j+W)*T,W=j);let R=Math.floor(N+this.xOffset+this.yOffset),G=W/2-.5;this.from=T,this.to=k,K?(this.scrollbarGroup[$]({translateY:R}),this.scrollbar[$]({height:W}),this.scrollbarRifles[$]({translateY:G}),this.scrollbarTop=R,this.scrollbarLeft=0):(this.scrollbarGroup[$]({translateX:R}),this.scrollbar[$]({width:W}),this.scrollbarRifles[$]({translateX:G}),this.scrollbarLeft=R,this.scrollbarTop=0),W<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Z.showFull===!1&&(T<=0&&k>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(T){return S(this.options.liveRedraw,l.svg&&!l.isTouchDevice&&!this.chart.boosted)||T==="mouseup"||T==="touchend"||!_(T)}trackClick(T){var K;let k=((K=this.chart.pointer)==null?void 0:K.normalize(T))||T,N=this.to-this.from,W=this.y+this.scrollbarTop,Z=this.x+this.scrollbarLeft;this.options.vertical&&k.chartY>W||!this.options.vertical&&k.chartX>Z?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),C(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}update(T){this.destroy(),this.init(this.chart.renderer,E(!0,this.options,T),this.chart)}updatePosition(T,k){k>1&&(T=v(1-v(k-T)),k=1),T<0&&(k=v(k-T),T=0),this.from=T,this.to=k}}return A.defaultOptions=r,f.scrollbar=E(!0,A.defaultOptions,f.scrollbar),A}),n(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y){let{defaultOptions:_}=u,{isTouchDevice:b}=r,{prototype:{symbols:C}}=v,{addEvent:E,clamp:S,correctFloat:x,defined:A,destroyObjectProperties:D,erase:T,extend:k,find:N,fireEvent:W,isArray:Z,isNumber:K,merge:j,pick:V,removeEvent:$,splat:L}=y;function R(U,...B){let H=[].filter.call(B,K);if(H.length)return Math[U].apply(0,H)}class G{static compose(B,H,q){l.compose(B,G),f.compose(B,H,q)}constructor(B){this.isDirty=!1,this.scrollbarHeight=0,this.init(B)}drawHandle(B,H,q,ae){let fe=this.navigatorOptions.handles.height;this.handles[H][ae](q?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(B,10)+.5-fe)}:{translateX:Math.round(this.left+parseInt(B,10)),translateY:Math.round(this.top+this.height/2-fe/2-1)})}drawOutline(B,H,q,ae){let fe=this.navigatorOptions.maskInside,re=this.outline.strokeWidth(),ce=re/2,ke=re%2/2,ve=this.scrollButtonSize,Ee=this.size,Q=this.top,ee=this.height,oe=Q-ce,we=Q+ee,J=this.left,se,de;q?(se=Q+H+ke,H=Q+B+ke,de=[["M",J+ee,Q-ve-ke],["L",J+ee,se],["L",J,se],["M",J,H],["L",J+ee,H],["L",J+ee,Q+Ee+ve]],fe&&de.push(["M",J+ee,se-ce],["L",J+ee,H+ce])):(J-=ve,B+=J+ve-ke,H+=J+ve-ke,de=[["M",J,oe],["L",B,oe],["L",B,we],["M",H,we],["L",H,oe],["L",J+Ee+2*ve,oe]],fe&&de.push(["M",B-ce,oe],["L",H+ce,oe])),this.outline[ae]({d:de})}drawMasks(B,H,q,ae){let fe,re,ce,ke,ve=this.left,Ee=this.top,Q=this.height;q?(ce=[ve,ve,ve],ke=[Ee,Ee+B,Ee+H],re=[Q,Q,Q],fe=[B,H-B,this.size-H]):(ce=[ve,ve+B,ve+H],ke=[Ee,Ee,Ee],re=[B,H-B,this.size-H],fe=[Q,Q,Q]),this.shades.forEach((ee,oe)=>{ee[ae]({x:ce[oe],y:ke[oe],width:re[oe],height:fe[oe]})})}renderElements(){var ve;let B=this,H=B.navigatorOptions,q=H.maskInside,ae=B.chart,fe=ae.inverted,re=ae.renderer,ce={cursor:fe?"ns-resize":"ew-resize"},ke=B.navigatorGroup??(B.navigatorGroup=re.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!q,q,!q].forEach((Ee,Q)=>{let ee=B.shades[Q]??(B.shades[Q]=re.rect().addClass("highcharts-navigator-mask"+(Q===1?"-inside":"-outside")).add(ke));ae.styledMode||(ee.attr({fill:Ee?H.maskFill:"rgba(0,0,0,0)"}),Q===1&&ee.css(ce))}),B.outline||(B.outline=re.path().addClass("highcharts-navigator-outline").add(ke)),ae.styledMode||B.outline.attr({"stroke-width":H.outlineWidth,stroke:H.outlineColor}),(ve=H.handles)==null?void 0:ve.enabled){let Ee=H.handles,{height:Q,width:ee}=Ee;[0,1].forEach(oe=>{var J;let we=Ee.symbols[oe];if(B.handles[oe]&&B.handles[oe].symbolUrl===we){if(!B.handles[oe].isImg&&B.handles[oe].symbolName!==we){let se=C[we].call(C,-ee/2-1,0,ee,Q);B.handles[oe].attr({d:se}),B.handles[oe].symbolName=we}}else(J=B.handles[oe])==null||J.destroy(),B.handles[oe]=re.symbol(we,-ee/2-1,0,ee,Q,Ee),B.handles[oe].attr({zIndex:7-oe}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][oe]).add(ke),B.addMouseEvents();ae.inverted&&B.handles[oe].attr({rotation:90,rotationOriginX:Math.floor(-ee/2),rotationOriginY:(Q+ee)/2}),ae.styledMode||B.handles[oe].attr({fill:Ee.backgroundColor,stroke:Ee.borderColor,"stroke-width":Ee.lineWidth,width:Ee.width,height:Ee.height,x:-ee/2-1,y:0}).css(ce)})}}update(B,H=!1){var fe;let q=this.chart,ae=q.options.chart.inverted!==((fe=q.scrollbar)==null?void 0:fe.options.vertical);if(j(!0,q.options.navigator,B),this.navigatorOptions=q.options.navigator||{},this.setOpposite(),A(B.enabled)||ae)return this.destroy(),this.navigatorEnabled=B.enabled||this.navigatorEnabled,this.init(q);if(this.navigatorEnabled&&(this.isDirty=!0,B.adaptToUpdatedData===!1&&this.baseSeries.forEach(re=>{$(re,"updatedData",this.updatedDataHandler)},this),B.adaptToUpdatedData&&this.baseSeries.forEach(re=>{re.eventsToUnbind.push(E(re,"updatedData",this.updatedDataHandler))},this),(B.series||B.baseSeries)&&this.setBaseSeries(void 0,!1),B.height||B.xAxis||B.yAxis)){this.height=B.height??this.height;let re=this.getXAxisOffsets();this.xAxis.update({...B.xAxis,offsets:re,[q.inverted?"width":"height"]:this.height,[q.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...B.yAxis,[q.inverted?"width":"height"]:this.height},!1)}H&&q.redraw()}render(B,H,q,ae){let fe=this.chart,re=this.xAxis,ce=re.pointRange||0,ke=re.navigatorAxis.fake?fe.xAxis[0]:re,ve=this.navigatorEnabled,Ee=this.rendered,Q=fe.inverted,ee=fe.xAxis[0].minRange,oe=fe.xAxis[0].options.maxRange,we=this.scrollButtonSize,J,se,de,xe=this.scrollbarHeight,Ce,Ne;if(this.hasDragged&&!A(q))return;if(this.isDirty&&this.renderElements(),B=x(B-ce/2),H=x(H+ce/2),!K(B)||!K(H)){if(!Ee)return;q=0,ae=V(re.width,ke.width)}this.left=V(re.left,fe.plotLeft+we+(Q?fe.plotWidth:0));let Te=this.size=Ce=V(re.len,(Q?fe.plotHeight:fe.plotWidth)-2*we);J=Q?xe:Ce+2*we,q=V(q,re.toPixels(B,!0)),ae=V(ae,re.toPixels(H,!0)),K(q)&&Math.abs(q)!==1/0||(q=0,ae=J);let Ie=re.toValue(q,!0),Ue=re.toValue(ae,!0),qe=Math.abs(x(Ue-Ie));qe<ee?this.grabbedLeft?q=re.toPixels(Ue-ee-ce,!0):this.grabbedRight&&(ae=re.toPixels(Ie+ee+ce,!0)):A(oe)&&x(qe-ce)>oe&&(this.grabbedLeft?q=re.toPixels(Ue-oe-ce,!0):this.grabbedRight&&(ae=re.toPixels(Ie+oe+ce,!0))),this.zoomedMax=S(Math.max(q,ae),0,Te),this.zoomedMin=S(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(q,ae),0,Te),this.range=this.zoomedMax-this.zoomedMin,Te=Math.round(this.zoomedMax);let Ae=Math.round(this.zoomedMin);ve&&(this.navigatorGroup.attr({visibility:"inherit"}),Ne=Ee&&!this.hasDragged?"animate":"attr",this.drawMasks(Ae,Te,Q,Ne),this.drawOutline(Ae,Te,Q,Ne),this.navigatorOptions.handles.enabled&&(this.drawHandle(Ae,0,Q,Ne),this.drawHandle(Te,1,Q,Ne))),this.scrollbar&&(Q?(de=this.top-we,se=this.left-xe+(ve||!ke.opposite?0:(ke.titleOffset||0)+ke.axisTitleMargin),xe=Ce+2*we):(de=this.top+(ve?this.height:-xe),se=this.left-we),this.scrollbar.position(se,de,J,xe),this.scrollbar.setRange(this.zoomedMin/(Ce||1),this.zoomedMax/(Ce||1))),this.rendered=!0,this.isDirty=!1,W(this,"afterRender")}addMouseEvents(){let B=this,H=B.chart,q=H.container,ae=[],fe,re;B.mouseMoveHandler=fe=function(ce){B.onMouseMove(ce)},B.mouseUpHandler=re=function(ce){B.onMouseUp(ce)},(ae=B.getPartsEvents("mousedown")).push(E(H.renderTo,"mousemove",fe),E(q.ownerDocument,"mouseup",re),E(H.renderTo,"touchmove",fe),E(q.ownerDocument,"touchend",re)),ae.concat(B.getPartsEvents("touchstart")),B.eventsToUnbind=ae,B.series&&B.series[0]&&ae.push(E(B.series[0].xAxis,"foundExtremes",function(){H.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(B){let H=this,q=[];return["shades","handles"].forEach(function(ae){H[ae].forEach(function(fe,re){q.push(E(fe.element,B,function(ce){H[ae+"Mousedown"](ce,re)}))})}),q}shadesMousedown(B,H){var we;B=((we=this.chart.pointer)==null?void 0:we.normalize(B))||B;let q=this.chart,ae=this.xAxis,fe=this.zoomedMin,re=this.size,ce=this.range,ke=this.left,ve=B.chartX,Ee,Q,ee,oe;q.inverted&&(ve=B.chartY,ke=this.top),H===1?(this.grabbedCenter=ve,this.fixedWidth=ce,this.dragOffset=ve-fe):(oe=ve-ke-ce/2,H===0?oe=Math.max(0,oe):H===2&&oe+ce>=re&&(oe=re-ce,this.reversedExtremes?(oe-=ce,Q=this.getUnionExtremes().dataMin):Ee=this.getUnionExtremes().dataMax),oe!==fe&&(this.fixedWidth=ce,A((ee=ae.navigatorAxis.toFixedRange(oe,oe+ce,Q,Ee)).min)&&W(this,"setRange",{min:Math.min(ee.min,ee.max),max:Math.max(ee.min,ee.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(B,H){var re;B=((re=this.chart.pointer)==null?void 0:re.normalize(B))||B;let q=this.chart,ae=q.xAxis[0],fe=this.reversedExtremes;H===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=fe?ae.min:ae.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=fe?ae.max:ae.min),q.setFixedRange(void 0)}onMouseMove(B){var Ee;let H=this,q=H.chart,ae=H.navigatorSize,fe=H.range,re=H.dragOffset,ce=q.inverted,ke=H.left,ve;(!B.touches||B.touches[0].pageX!==0)&&(ve=(B=((Ee=q.pointer)==null?void 0:Ee.normalize(B))||B).chartX,ce&&(ke=H.top,ve=B.chartY),H.grabbedLeft?(H.hasDragged=!0,H.render(0,0,ve-ke,H.otherHandlePos)):H.grabbedRight?(H.hasDragged=!0,H.render(0,0,H.otherHandlePos,ve-ke)):H.grabbedCenter&&(H.hasDragged=!0,ve<re?ve=re:ve>ae+re-fe&&(ve=ae+re-fe),H.render(0,0,ve-re,ve-re+fe)),H.hasDragged&&H.scrollbar&&V(H.scrollbar.options.liveRedraw,!b&&!this.chart.boosted)&&(B.DOMType=B.type,setTimeout(function(){H.onMouseUp(B)},0)))}onMouseUp(B){let H,q,ae,fe,re,ce,ke=this.chart,ve=this.xAxis,Ee=this.scrollbar,Q=B.DOMEvent||B,ee=ke.inverted,oe=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Ee||!Ee.hasDragged)||B.trigger==="scrollbar")&&(ae=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?fe=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(re=this.fixedExtreme),this.zoomedMax===this.size&&(re=this.reversedExtremes?ae.dataMin:ae.dataMax),this.zoomedMin===0&&(fe=this.reversedExtremes?ae.dataMax:ae.dataMin),A((ce=ve.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,fe,re)).min)&&W(this,"setRange",{min:Math.min(ce.min,ce.max),max:Math.max(ce.min,ce.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:Q}})),B.DOMType!=="mousemove"&&B.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&K(this.zoomedMin)&&K(this.zoomedMax)&&(q=Math.round(this.zoomedMin),H=Math.round(this.zoomedMax),this.shades&&this.drawMasks(q,H,ee,oe),this.outline&&this.drawOutline(q,H,ee,oe),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(q,0,ee,oe),this.drawHandle(H,1,ee,oe)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(B){B()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let B=this.baseSeries||[];this.navigatorEnabled&&B[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&B.forEach(function(H){$(H,"updatedData",this.updatedDataHandler)},this),B[0].xAxis&&$(B[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(B){var J;let H=B.options,q=H.navigator||{},ae=q.enabled,fe=H.scrollbar||{},re=fe.enabled,ce=ae&&q.height||0,ke=re&&fe.height||0,ve=fe.buttonsEnabled&&ke||0;this.handles=[],this.shades=[],this.chart=B,this.setBaseSeries(),this.height=ce,this.scrollbarHeight=ke,this.scrollButtonSize=ve,this.scrollbarEnabled=re,this.navigatorEnabled=ae,this.navigatorOptions=q,this.scrollbarOptions=fe,this.setOpposite();let Ee=this,Q=Ee.baseSeries,ee=B.xAxis.length,oe=B.yAxis.length,we=Q&&Q[0]&&Q[0].xAxis||B.xAxis[0]||{options:{}};if(B.isDirtyBox=!0,Ee.navigatorEnabled){let se=this.getXAxisOffsets();Ee.xAxis=new s(B,j({breaks:we.options.breaks,ordinal:we.options.ordinal,overscroll:we.options.overscroll},q.xAxis,{type:"datetime",yAxis:(J=q.yAxis)==null?void 0:J.id,index:ee,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:we.options.ordinal?0:we.options.minPadding,maxPadding:we.options.ordinal?0:we.options.maxPadding,zoomEnabled:!1},B.inverted?{offsets:se,width:ce}:{offsets:se,height:ce}),"xAxis"),Ee.yAxis=new s(B,j(q.yAxis,{alignTicks:!1,offset:0,index:oe,isInternal:!0,reversed:V(q.yAxis&&q.yAxis.reversed,B.yAxis[0]&&B.yAxis[0].reversed,!1),zoomEnabled:!1},B.inverted?{width:ce}:{height:ce}),"yAxis"),Q||q.series.data?Ee.updateNavigatorSeries(!1):B.series.length===0&&(Ee.unbindRedraw=E(B,"beforeRedraw",function(){B.series.length>0&&!Ee.series&&(Ee.setBaseSeries(),Ee.unbindRedraw())})),Ee.reversedExtremes=B.inverted&&!Ee.xAxis.reversed||!B.inverted&&Ee.xAxis.reversed,Ee.renderElements(),Ee.addMouseEvents()}else Ee.xAxis={chart:B,navigatorAxis:{fake:!0},translate:function(se,de){let xe=B.xAxis[0],Ce=xe.getExtremes(),Ne=xe.len-2*ve,Te=R("min",xe.options.min,Ce.dataMin),Ie=R("max",xe.options.max,Ce.dataMax)-Te;return de?se*Ie/Ne+Te:Ne*(se-Te)/Ie},toPixels:function(se){return this.translate(se)},toValue:function(se){return this.translate(se,!0)}},Ee.xAxis.navigatorAxis.axis=Ee.xAxis,Ee.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(Ee.xAxis.navigatorAxis);if(B.options.scrollbar.enabled){let se=j(B.options.scrollbar,{vertical:B.inverted});!K(se.margin)&&Ee.navigatorEnabled&&(se.margin=B.inverted?-3:3),B.scrollbar=Ee.scrollbar=new m(B.renderer,se,B),E(Ee.scrollbar,"changed",function(de){let xe=Ee.size,Ce=xe*this.to,Ne=xe*this.from;Ee.hasDragged=Ee.scrollbar.hasDragged,Ee.render(0,0,Ne,Ce),this.shouldUpdateExtremes(de.DOMType)&&setTimeout(function(){Ee.onMouseUp(de)})})}Ee.addBaseSeriesEvents(),Ee.addChartEvents()}setOpposite(){let B=this.navigatorOptions,H=this.navigatorEnabled,q=this.chart;this.opposite=V(B.opposite,!!(!H&&q.inverted))}getUnionExtremes(B){let H,q=this.chart.xAxis[0],ae=this.xAxis,fe=ae.options,re=q.options;return B&&q.dataMin===null||(H={dataMin:V(fe&&fe.min,R("min",re.min,q.dataMin,ae.dataMin,ae.min)),dataMax:V(fe&&fe.max,R("max",re.max,q.dataMax,ae.dataMax,ae.max))}),H}setBaseSeries(B,H){let q=this.chart,ae=this.baseSeries=[];B=B||q.options&&q.options.navigator.baseSeries||(q.series.length?N(q.series,fe=>!fe.options.isInternal).index:0),(q.series||[]).forEach((fe,re)=>{!fe.options.isInternal&&(fe.options.showInNavigator||(re===B||fe.options.id===B)&&fe.options.showInNavigator!==!1)&&ae.push(fe)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,H)}updateNavigatorSeries(B,H){var ee,oe;let q=this,ae=q.chart,fe=q.baseSeries,re={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(ee=this.navigatorOptions.xAxis)==null?void 0:ee.id,yAxis:(oe=this.navigatorOptions.yAxis)==null?void 0:oe.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},ce=q.series=(q.series||[]).filter(we=>{let J=we.baseSeries;return!(0>fe.indexOf(J))||(J&&($(J,"updatedData",q.updatedDataHandler),delete J.navigatorSeries),we.chart&&we.destroy(),!1)}),ke,ve,Ee=q.navigatorOptions.series,Q;fe&&fe.length&&fe.forEach(we=>{let J=we.navigatorSeries,se=k({color:we.color,visible:we.visible},Z(Ee)?_.navigator.series:Ee);if(J&&q.navigatorOptions.adaptToUpdatedData===!1)return;re.name="Navigator "+fe.length,Q=(ke=we.options||{}).navigatorOptions||{},se.dataLabels=L(se.dataLabels),(ve=j(ke,re,se,Q)).pointRange=V(se.pointRange,Q.pointRange,_.plotOptions[ve.type||"line"].pointRange);let de=Q.data||se.data;q.hasNavigatorData=q.hasNavigatorData||!!de,ve.data=de||ke.data&&ke.data.slice(0),J&&J.options?J.update(ve,H):(we.navigatorSeries=ae.initSeries(ve),ae.setSortedData(),we.navigatorSeries.baseSeries=we,ce.push(we.navigatorSeries))}),(Ee.data&&!(fe&&fe.length)||Z(Ee))&&(q.hasNavigatorData=!1,(Ee=L(Ee)).forEach((we,J)=>{re.name="Navigator "+(ce.length+1),(ve=j(_.navigator.series,{color:ae.series[J]&&!ae.series[J].options.isInternal&&ae.series[J].color||ae.options.colors[J]||ae.options.colors[0]},re,we)).data=we.data,ve.data&&(q.hasNavigatorData=!0,ce.push(ae.initSeries(ve)))})),B&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let B=this,H=B.baseSeries||[];H[0]&&H[0].xAxis&&H[0].eventsToUnbind.push(E(H[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),H.forEach(q=>{q.eventsToUnbind.push(E(q,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),q.eventsToUnbind.push(E(q,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&q.xAxis&&q.eventsToUnbind.push(E(q,"updatedData",this.updatedDataHandler)),q.eventsToUnbind.push(E(q,"remove",function(){T(H,q),this.navigatorSeries&&(T(B.series,this.navigatorSeries),A(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(B){return this.baseSeries.reduce(function(H,q){return Math.min(H,q.xData&&q.xData.length?q.xData[0]:H)},B)}modifyNavigatorAxisExtremes(){let B=this.xAxis;if(B.getExtremes!==void 0){let H=this.getUnionExtremes(!0);H&&(H.dataMin!==B.min||H.dataMax!==B.max)&&(B.min=H.dataMin,B.max=H.dataMax)}}modifyBaseAxisExtremes(){var J;let B,H,q=this.chart.navigator,ae=this.getExtremes(),fe=ae.min,re=ae.max,ce=ae.dataMin,ke=ae.dataMax,ve=re-fe,Ee=q.stickToMin,Q=q.stickToMax,ee=V((J=this.ordinal)==null?void 0:J.convertOverscroll(this.options.overscroll),0),oe=q.series&&q.series[0],we=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Ee&&(B=(H=ce)+ve),Q&&(B=ke+ee,Ee||(H=Math.max(ce,B-ve,q.getBaseSeriesMin(oe&&oe.xData?oe.xData[0]:-Number.MAX_VALUE)))),we&&(Ee||Q)&&K(H)&&(this.min=this.userMin=H,this.max=this.userMax=B)),q.stickToMin=q.stickToMax=null}updatedDataHandler(){let B=this.chart.navigator,H=this.navigatorSeries,q=B.reversedExtremes?Math.round(B.zoomedMin)===0:Math.round(B.zoomedMax)>=Math.round(B.size);B.stickToMax=V(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,q),B.stickToMin=B.shouldStickToMin(this,B),H&&!B.hasNavigatorData&&(H.options.pointStart=this.xData[0],H.setData(this.options.data,!1,null,!1))}shouldStickToMin(B,H){let q=H.getBaseSeriesMin(B.xData[0]),ae=B.xAxis,fe=ae.max,re=ae.min,ce=ae.options.range;return!!(K(fe)&&K(re))&&(ce&&fe-q>0?fe-q<ce:re<=q)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(E(this.chart,"redraw",function(){let B=this.navigator,H=B&&(B.baseSeries&&B.baseSeries[0]&&B.baseSeries[0].xAxis||this.xAxis[0]);H&&B.render(H.min,H.max)}),E(this.chart,"getMargins",function(){let B=this.navigator,H=B.opposite?"plotTop":"marginBottom";this.inverted&&(H=B.opposite?"marginRight":"plotLeft"),this[H]=(this[H]||0)+(B.navigatorEnabled||!this.inverted?B.height+B.scrollbarHeight:0)+B.navigatorOptions.margin}),E(G,"setRange",function(B){this.chart.xAxis[0].setExtremes(B.min,B.max,B.redraw,B.animation,B.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(T(this.chart.xAxis,this.xAxis),T(this.chart.axes,this.xAxis)),this.yAxis&&(T(this.chart.yAxis,this.yAxis),T(this.chart.axes,this.yAxis)),(this.series||[]).forEach(B=>{B.destroy&&B.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(B=>{this[B]&&this[B].destroy&&this[B].destroy(),this[B]=null}),[this.handles].forEach(B=>{D(B)}),this.navigatorEnabled=!1}}return G}),n(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,r,p,f,m,v,y){let{animObject:_}=p,{format:b}=f,{clamp:C,pick:E,syncTimeout:S}=m,{getFakeMouseEvent:x}=v,{getAxisRangeDescription:A,fireEventOnWrappedOrUnwrappedElement:D}=y;return class extends s{init(){let T=this.chart,k=this;this.announcer=new l(T,"polite"),this.addEvent(r,"afterRender",function(){this.chart===k.chart&&this.chart.renderer&&S(()=>{k.proxyProvider.updateGroupProxyElementPositions("navigator"),k.updateHandleValues()},_(E(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var W,Z,K;let T=this.chart,k=T.options,N=k.navigator;if(N.enabled&&((W=N.accessibility)!=null&&W.enabled)){let j=k.accessibility.landmarkVerbosity,V=(Z=k.lang.accessibility)==null?void 0:Z.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:j==="all"?"region":"group","aria-label":b(V,{chart:T},T)});let $=(K=k.lang.accessibility)==null?void 0:K.navigator.handleLabel;[0,1].forEach(L=>{let R=this.getHandleByIx(L);if(R){let G=this.proxyProvider.addProxyElement("navigator",{click:R},"input",{type:"range","aria-label":b($,{handleIx:L,chart:T},T)});this[L?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(T){let k=this,N=this.chart,W=T?this.maxHandleProxy:this.minHandleProxy,Z=this.keyCodes;return new u(N,{keyCodeMap:[[[Z.left,Z.right,Z.up,Z.down],function(K){if(W){let j=K===Z.left||K===Z.up?-1:1;W.value=""+C(parseFloat(W.value)+j,0,100),k.updateNavigator(()=>{let V=k.getHandleByIx(T);V&&N.setFocusToElement(V,W)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(T),W)},validate:()=>{var K;return!!(this.getHandleByIx(T)&&W&&((K=N.options.navigator.accessibility)!=null&&K.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let T=this.chart.navigator;if(T&&this.minHandleProxy&&this.maxHandleProxy){let k=T.size;this.minHandleProxy.value=""+Math.round(T.zoomedMin/k*100),this.maxHandleProxy.value=""+Math.round(T.zoomedMax/k*100)}}getHandleByIx(T){let k=this.chart.navigator;return k&&k.handles&&k.handles[T]}updateNavigator(T){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((k=>{var K;let N=this.chart,{navigator:W,pointer:Z}=N;if(W&&Z&&this.minHandleProxy&&this.maxHandleProxy){let j=Z.getChartPosition(),V=parseFloat(this.minHandleProxy.value)/100*W.size,$=parseFloat(this.maxHandleProxy.value)/100*W.size;[[0,"mousedown",W.zoomedMin],[0,"mousemove",V],[0,"mouseup",V],[1,"mousedown",W.zoomedMax],[1,"mousemove",$],[1,"mouseup",$]].forEach(([G,U,B])=>{var q;let H=(q=this.getHandleByIx(G))==null?void 0:q.element;H&&D(H,x(U,{x:j.left+W.left+B,y:j.top+W.top},H))}),k&&k();let L=(K=N.options.lang.accessibility)==null?void 0:K.navigator.changeAnnouncement,R=A(N.xAxis[0]);this.announcer.announce(b(L,{axisRangeDescription:R,chart:N},N))}}).bind(this,T),20)}}}),n(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{getPointAnnotationTexts:f}=s,{getAxisDescription:m,getSeriesFirstPointElement:v,getSeriesA11yElement:y,unhideChartElementFromAT:_}=l,{format:b,numberFormat:C}=u,{reverseChildNodes:E,stripHTMLTagsFromString:S}=r,{find:x,isNumber:A,isString:D,pick:T,defined:k}=p;function N(V){let $=V.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!($!==!1&&V.points&&V.points.length>=+$)}function W(V,$){let L=V.series,R=L.chart,G=R.options.accessibility.point||{},U=L.options.accessibility&&L.options.accessibility.point||{},B=L.tooltipOptions||{},H=R.options.lang;return A($)?C($,U.valueDecimals||G.valueDecimals||B.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):$}function Z(V,$){let L=V[$];return V.chart.langFormat("accessibility.series."+$+"Description",{name:m(L),series:V})}function K(V){let $=V.series,L=$.chart.series.length>1||$.options.name,R=function(H){let q=H.series,ae=q.chart,fe=q.options.accessibility,re=fe&&fe.point&&fe.point.valueDescriptionFormat||ae.options.accessibility.point.valueDescriptionFormat,ce=T(q.xAxis&&q.xAxis.options.accessibility&&q.xAxis.options.accessibility.enabled,!ae.angular&&q.type!=="flowmap"),ke=ce?function(ve){let Ee=function(we){let J=we.series,se=J.chart,de=J.options.accessibility&&J.options.accessibility.point||{},xe=se.options.accessibility.point||{},Ce=J.xAxis&&J.xAxis.dateTime;if(Ce){let Ne=Ce.getXDateFormat(we.x||0,se.options.tooltip.dateTimeLabelFormats),Te=de.dateFormatter&&de.dateFormatter(we)||xe.dateFormatter&&xe.dateFormatter(we)||de.dateFormat||xe.dateFormat||Ne;return se.time.dateFormat(Te,we.x||0,void 0)}}(ve),Q=(ve.series.xAxis||{}).categories&&k(ve.category)&&(""+ve.category).replace("<br/>"," "),ee=k(ve.id)&&0>(""+ve.id).indexOf("highcharts-"),oe="x, "+ve.x;return ve.name||Ee||Q||(ee?ve.id:oe)}(H):"";return b(re,{point:H,index:k(H.index)?H.index+1:"",xDescription:ke,value:function(ve){let Ee=ve.series,Q=Ee.chart.options.accessibility.point||{},ee=Ee.chart.options.accessibility&&Ee.chart.options.accessibility.point||{},oe=Ee.tooltipOptions||{},we=ee.valuePrefix||Q.valuePrefix||oe.valuePrefix||"",J=ee.valueSuffix||Q.valueSuffix||oe.valueSuffix||"",se=ve.value!==void 0?"value":"y",de=W(ve,ve[se]);return ve.isNull?Ee.chart.langFormat("accessibility.series.nullPointValue",{point:ve}):Ee.pointArrayMap?function(xe,Ce,Ne){let Te=Ce||"",Ie=Ne||"",Ue=function(qe){let Ae=W(xe,T(xe[qe],xe.options[qe]));return Ae!==void 0?qe+": "+Te+Ae+Ie:Ae};return xe.series.pointArrayMap.reduce(function(qe,Ae){let ye=Ue(Ae);return ye?qe+(qe.length?", ":"")+ye:qe},"")}(ve,we,J):we+de+J}(H),separator:ce?", ":""},ae)}(V),G=V.options&&V.options.accessibility&&V.options.accessibility.description,U=L?" "+$.name+".":"",B=function(H){let q=H.series.chart,ae=f(H);return ae.length?q.langFormat("accessibility.series.pointAnnotationsDescription",{point:H,annotations:ae}):""}(V);return V.accessibility=V.accessibility||{},V.accessibility.valueDescription=R,R+(G?" "+G:"")+U+(B?" "+B:"")}function j(V){let $=V.chart,L=$.types||[],R=function(ce){let ke=(ce.options.accessibility||{}).description;return ke&&ce.chart.langFormat("accessibility.series.description",{description:ke,series:ce})||""}(V),G=function(ce){return $[ce]&&$[ce].length>1&&V[ce]},U=V.index+1,B=Z(V,"xAxis"),H=Z(V,"yAxis"),q={seriesNumber:U,series:V,chart:$},ae=L.length>1?"Combination":"",fe=$.langFormat("accessibility.series.summary."+V.type+ae,q)||$.langFormat("accessibility.series.summary.default"+ae,q),re=(G("yAxis")?" "+H+".":"")+(G("xAxis")?" "+B+".":"");return b(T(V.options.accessibility&&V.options.accessibility.descriptionFormat,$.options.accessibility.series.descriptionFormat,""),{seriesDescription:fe,authorDescription:R?" "+R:"",axisDescription:re,series:V,chart:$,seriesNumber:U},void 0)}return{defaultPointDescriptionFormatter:K,defaultSeriesDescriptionFormatter:j,describeSeries:function(V){let $=V.chart,L=v(V),R=y(V),G=$.is3d&&$.is3d();R&&(R.lastChild!==L||G||E(R),function(U){let B=function(ae){let fe=ae.options.accessibility||{};return!N(ae)&&!fe.exposeAsGroupOnly}(U),H=function(ae){let fe=ae.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(ae.points&&(ae.points.length<+fe.pointNavigationEnabledThreshold||fe.pointNavigationEnabledThreshold===!1))}(U),q=U.chart.options.accessibility.point.describeNull;(B||H)&&U.points.forEach(ae=>{let fe=ae.graphic&&ae.graphic.element||function(ce){let ke=ce.series,ve=ke&&ke.chart,Ee=ke&&ke.is("sunburst"),Q=ce.isNull,ee=ve&&ve.options.accessibility.point.describeNull;return Q&&!Ee&&ee}(ae)&&function(ce){let ke=ce.series,ve=function(we){let J=we.index;return we.series&&we.series.data&&k(J)&&x(we.series.data,function(se){return!!(se&&se.index!==void 0&&se.index>J&&se.graphic&&se.graphic.element)})||null}(ce),Ee=ve&&ve.graphic,Q=Ee?Ee.parentGroup:ke.graph||ke.group,ee=ve?{x:T(ce.plotX,ve.plotX,0),y:T(ce.plotY,ve.plotY,0)}:{x:T(ce.plotX,0),y:T(ce.plotY,0)},oe=function(we,J){let se=we.series.chart.renderer.rect(J.x,J.y,1,1);return se.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),se}(ce,ee);if(Q&&Q.element)return ce.graphic=oe,ce.hasMockGraphic=!0,oe.add(Q),Q.element.insertBefore(oe.element,Ee?Ee.element:null),oe.element}(ae),re=ae.options&&ae.options.accessibility&&ae.options.accessibility.enabled===!1;if(fe){if(ae.isNull&&!q){fe.setAttribute("aria-hidden",!0);return}fe.setAttribute("tabindex","-1"),U.chart.styledMode||(fe.style.outline="none"),B&&!re?function(ce,ke){var oe,we,J;let ve=ce.series,Ee=((oe=ve.options.accessibility)==null?void 0:oe.point)||{},Q=ve.chart.options.accessibility.point||{},ee=S(D(Ee.descriptionFormat)&&b(Ee.descriptionFormat,ce,ve.chart)||((we=Ee.descriptionFormatter)==null?void 0:we.call(Ee,ce))||D(Q.descriptionFormat)&&b(Q.descriptionFormat,ce,ve.chart)||((J=Q.descriptionFormatter)==null?void 0:J.call(Q,ce))||K(ce),ve.chart.renderer.forExport);ke.setAttribute("role","img"),ke.setAttribute("aria-label",ee)}(ae,fe):fe.setAttribute("aria-hidden",!0)}})}(V),_($,R),function(U){let B=U.chart,H=B.options.chart,q=H.options3d&&H.options3d.enabled,ae=B.series.length>1,fe=B.options.accessibility.series.describeSingleSeries,re=(U.options.accessibility||{}).exposeAsGroupOnly;return!(q&&ae)&&(ae||fe||re||N(U))}(V)?function(U,B){let H=U.options.accessibility||{},q=U.chart.options.accessibility,ae=q.landmarkVerbosity;H.exposeAsGroupOnly?B.setAttribute("role","img"):ae==="all"?B.setAttribute("role","region"):B.setAttribute("role","group"),B.setAttribute("tabindex","-1"),U.chart.styledMode||(B.style.outline="none"),B.setAttribute("aria-label",S(q.series.descriptionFormatter&&q.series.descriptionFormatter(U)||j(U),U.chart.renderer.forExport))}(V,R):R.removeAttribute("aria-label"))}}}),n(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,r,p,f){let{composed:m}=s,{addEvent:v,defined:y,pushUnique:_}=l,{getChartTitle:b}=r,{defaultPointDescriptionFormatter:C,defaultSeriesDescriptionFormatter:E}=f;function S(A){return!!A.options.accessibility.announceNewData.enabled}class x{constructor(D){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=D}init(){let D=this.chart,T=D.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new p,this.announcer=new u(D,T),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let D=this,T=this.chart,k=this.eventProvider;k.addEvent(T,"afterApplyDrilldown",function(){D.lastAnnouncementTime=0}),k.addEvent(T,"afterAddSeries",function(N){D.onSeriesAdded(N.series)}),k.addEvent(T,"redraw",function(){D.announceDirtyData()})}onSeriesAdded(D){S(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[D.name+D.index]=D,this.dirty.newSeries=y(this.dirty.newSeries)?void 0:D)}announceDirtyData(){let D=this.chart,T=this;if(D.options.accessibility.announceNewData&&this.dirty.hasDirty){let k=this.dirty.newPoint;k&&(k=function(N){let W=N.series.data.filter(Z=>N.x===Z.x&&N.y===Z.y);return W.length===1?W[0]:N}(k)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>T.dirty.allSeries[N]),this.dirty.newSeries,k),this.dirty={allSeries:{}}}}queueAnnouncement(D,T,k){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let W=+new Date,Z=W-this.lastAnnouncementTime,K=Math.max(0,N.minAnnounceInterval-Z),j=function($,L){let R=($||[]).concat(L||[]).reduce((G,U)=>(G[U.name+U.index]=U,G),{});return Object.keys(R).map(G=>R[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,D),V=this.buildAnnouncementMessage(j,T,k);V&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:W,message:V,series:j},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},K))}}buildAnnouncementMessage(D,T,k){let N=this.chart,W=N.options.accessibility.announceNewData;if(W.announcementFormatter){let V=W.announcementFormatter(D,T,k);if(V!==!1)return V.length?V:null}let Z=s.charts&&s.charts.length>1?"Multiple":"Single",K=T?"newSeriesAnnounce"+Z:k?"newPointAnnounce"+Z:"newDataAnnounce",j=b(N);return N.langFormat("accessibility.announceNewData."+K,{chartTitle:j,seriesDesc:T?E(T):null,pointDesc:k?C(k):null,point:k,series:T})}}return function(A){function D(k){var Z;let N=this.chart,W=(Z=N.accessibility)==null?void 0:Z.components.series.newDataAnnouncer;W&&W.chart===N&&S(N)&&(W.dirty.newPoint=y(W.dirty.newPoint)?void 0:k.point)}function T(){var W;let k=this.chart,N=(W=k.accessibility)==null?void 0:W.components.series.newDataAnnouncer;N&&N.chart===k&&S(k)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}A.compose=function(k){_(m,"A11y.NDA")&&(v(k,"addPoint",D),v(k,"updatedData",T))}}(x),x}),n(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{doc:f}=s,{attr:m,css:v,merge:y}=l,{fireEventOnWrappedOrUnwrappedElement:_}=r,{cloneMouseEvent:b,cloneTouchEvent:C,getFakeMouseEvent:E,removeElement:S}=p;return class{constructor(x,A,D="button",T,k){this.chart=x,this.target=A,this.eventProvider=new u;let N=this.innerElement=f.createElement(D),W=this.element=T?f.createElement(T):N;x.styledMode||this.hideElementVisually(N),T&&(T!=="li"||x.styledMode||(W.style.listStyle="none"),W.appendChild(N),this.element=W),this.updateTarget(A,k)}click(){let x=this.getTargetPosition();x.x+=x.width/2,x.y+=x.height/2;let A=E("click",x);_(this.target.click,A)}updateTarget(x,A){this.target=x,this.updateCSSClassName();let D=A||{};Object.keys(D).forEach(k=>{D[k]===null&&delete D[k]});let T=this.getTargetAttr(x.click,"aria-label");m(this.innerElement,y(T?{"aria-label":T}:{},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,x.click),this.refreshPosition()}refreshPosition(){let x=this.getTargetPosition();v(this.innerElement,{width:(x.width||1)+"px",height:(x.height||1)+"px",left:(Math.round(x.x)||0)+"px",top:(Math.round(x.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),S(this.element)}updateCSSClassName(){let x=N=>N.indexOf("highcharts-no-tooltip")>-1,A=this.chart.legend,D=A.group&&A.group.div,T=x(D&&D.className||""),k=x(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=T||k?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(x,A){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(D=>{let T=D.indexOf("touch")===0;this.eventProvider.addEvent(x,D,k=>{let N=T?C(k):b(k);A&&_(A,N),k.stopPropagation(),T||k.preventDefault()},{passive:!1})})}hideElementVisually(x){v(x,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let x=this.target.click,A=x.element?x.element:x,D=this.target.visual||A,T=this.chart.renderTo,k=this.chart.pointer;if(T&&(D!=null&&D.getBoundingClientRect)&&k){let N=D.getBoundingClientRect(),W=k.getChartPosition();return{x:(N.left-W.left)/W.scaleX,y:(N.top-W.top)/W.scaleY,width:N.right/W.scaleX-N.left/W.scaleX,height:N.bottom/W.scaleY-N.top/W.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(x,A){return x.element?x.element.getAttribute(A):x.getAttribute(A)}}}),n(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(s,l,u,r,p,f){let{doc:m}=s,{attr:v,css:y}=l,{unhideChartElementFromAT:_}=u,{removeChildNodes:b}=p;return class{constructor(C){this.chart=C,this.domElementProvider=new r,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(C,E,S="button",x){let A=this.groups[C];if(!A)throw Error("ProxyProvider.addProxyElement: Invalid group key "+C);let D=A.type==="ul"||A.type==="ol"?"li":void 0,T=new f(this.chart,E,S,D,x);return A.proxyContainerElement.appendChild(T.element),A.proxyElements.push(T),T}addGroup(C,E="div",S){let x,A=this.groups[C];if(A)return A.groupElement;let D=this.domElementProvider.createElement(E);return S&&S.role&&E!=="div"?(x=this.domElementProvider.createElement("div")).appendChild(D):x=D,x.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+C.replace(/\W/g,"-"),this.groups[C]={proxyContainerElement:D,groupElement:x,type:E,proxyElements:[]},v(x,S||{}),E==="ul"&&D.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(x),this.updateGroupOrder(this.groupOrder),x}updateGroupAttrs(C,E){let S=this.groups[C];if(!S)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+C);v(S.groupElement,E)}updateGroupOrder(C){if(this.groupOrder=C.slice(),this.isDOMOrderGroupOrder())return;let E=C.indexOf("series"),S=E>-1?C.slice(0,E):C,x=E>-1?C.slice(E+1):[],A=m.activeElement;["before","after"].forEach(D=>{let T=this[D==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];b(T),(D==="before"?S:x).forEach(k=>{let N=this.groups[k];N&&T.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(A)||this.afterChartProxyPosContainer.contains(A))&&A&&A.focus&&A.focus()}clearGroup(C){let E=this.groups[C];if(!E)throw Error("ProxyProvider.clearGroup: Invalid group key "+C);b(E.proxyContainerElement)}removeGroup(C){let E=this.groups[C];E&&(this.domElementProvider.removeElement(E.groupElement),E.groupElement!==E.proxyContainerElement&&this.domElementProvider.removeElement(E.proxyContainerElement),delete this.groups[C])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(C){let E=this.groups[C];E&&E.proxyElements.forEach(S=>S.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(C){let E=this.domElementProvider.createElement("div");return E.setAttribute("aria-hidden","false"),E.className="highcharts-a11y-proxy-container"+(C?"-"+C:""),y(E,{top:"0",left:"0"}),this.chart.styledMode||(E.style.whiteSpace="nowrap",E.style.position="absolute"),E}getCurrentGroupOrderInDOM(){let C=A=>{let D=Object.keys(this.groups),T=D.length;for(;T--;){let k=D[T],N=this.groups[k];if(N&&A===N.groupElement)return k}},E=A=>{let D=[],T=A.children;for(let k=0;k<T.length;++k){let N=C(T[k]);N&&D.push(N)}return D},S=E(this.beforeChartProxyPosContainer),x=E(this.afterChartProxyPosContainer);return S.push("series"),S.concat(x)}isDOMOrderGroupOrder(){let C=this.getCurrentGroupOrderInDOM(),E=this.groupOrder.filter(x=>x==="series"||!!this.groups[x]),S=C.length;if(S!==E.length)return!1;for(;S--;)if(C[S]!==E[S])return!1;return!0}updatePosContainerPositions(){let C=this.chart;if(C.renderer.forExport)return;let E=C.renderer.box;C.container.insertBefore(this.afterChartProxyPosContainer,E.nextSibling),C.container.insertBefore(this.beforeChartProxyPosContainer,E),_(this.chart,this.afterChartProxyPosContainer),_(this.chart,this.beforeChartProxyPosContainer)}}}),n(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f,getAxisRangeDescription:m}=u,{addEvent:v,attr:y}=p;class _ extends s{init(){let C=this.chart;this.announcer=new l(C,"polite")}onChartUpdate(){let C=this.chart,E=this,S=C.rangeSelector;S&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),S.buttons&&S.buttons.length&&S.buttons.forEach(x=>{E.setRangeButtonAttrs(x)}),S.maxInput&&S.minInput&&["minInput","maxInput"].forEach(function(x,A){let D=S[x];D&&(f(C,D),E.setRangeInputAttrs(D,"accessibility.rangeSelector."+(A?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let C=this.chart,E=C.rangeSelector,S=E&&E.dropdown,x=E&&E.buttons||[],A=D=>D.setAttribute("aria-hidden",!0);E&&E.hasVisibleDropdown&&S?(f(C,S),x.forEach(D=>A(D.element))):(S&&A(S),x.forEach(D=>f(C,D.element)))}setDropdownAttrs(){let C=this.chart,E=C.rangeSelector&&C.rangeSelector.dropdown;if(E){let S=C.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:C.options.lang.rangeSelectorZoom});E.setAttribute("aria-label",S),E.setAttribute("tabindex",-1)}}setRangeButtonAttrs(C){y(C.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(C,E){let S=this.chart;y(C,{tabindex:-1,"aria-label":S.langFormat(E,{chart:S})})}onButtonNavKbdArrowKey(C,E){let S=C.response,x=this.keyCodes,A=this.chart,D=A.options.accessibility.keyboardNavigation.wrapAround,T=E===x.left||E===x.up?-1:1;return A.highlightRangeSelectorButton(A.highlightedRangeSelectorItemIx+T)?S.success:D?(C.init(T),S.success):S[T>0?"next":"prev"]}onButtonNavKbdClick(C){let E=C.response,S=this.chart;return S.oldRangeSelectorItemState!==3&&this.fakeClickEvent(S.rangeSelector.buttons[S.highlightedRangeSelectorItemIx].element),E.success}onAfterBtnClick(){let C=this.chart,E=m(C.xAxis[0]),S=C.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:C,axisRangeDescription:E});S&&this.announcer.announce(S)}onInputKbdMove(C){let E=this.chart,S=E.rangeSelector,x=E.highlightedInputRangeIx=(E.highlightedInputRangeIx||0)+C;if(x>1||x<0){if(E.accessibility)return E.accessibility.keyboardNavigation.exiting=!0,E.accessibility.keyboardNavigation.tabindexContainer.focus(),E.accessibility.keyboardNavigation.move(C)}else if(S){let A=S[x?"maxDateBox":"minDateBox"],D=S[x?"maxInput":"minInput"];A&&D&&E.setFocusToElement(A,D)}return!0}onInputNavInit(C){let E=this,S=this.chart,x=C>0?0:1,A=S.rangeSelector,D=A&&A[x?"maxDateBox":"minDateBox"],T=A&&A.minInput,k=A&&A.maxInput;if(S.highlightedInputRangeIx=x,D&&T&&k){S.setFocusToElement(D,x?k:T),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=K=>{(K.which||K.keyCode)===this.keyCodes.tab&&E.onInputKbdMove(K.shiftKey?-1:1)&&(K.preventDefault(),K.stopPropagation())},W=v(T,"keydown",N),Z=v(k,"keydown",N);this.removeInputKeydownHandler=()=>{W(),Z()}}}onInputNavTerminate(){let C=this.chart.rangeSelector||{};C.maxInput&&C.hideInput("max"),C.minInput&&C.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let C=this.chart,E=C.rangeSelector,S=E&&E.dropdown;E&&S&&(C.setFocusToElement(E.buttonGroup,S),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=v(S,"keydown",x=>{let A=(x.which||x.keyCode)===this.keyCodes.tab,D=C.accessibility;A&&(x.preventDefault(),x.stopPropagation(),D&&(D.keyboardNavigation.tabindexContainer.focus(),D.keyboardNavigation.move(x.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let C=this.chart,E=this.keyCodes,S=this;return new r(C,{keyCodeMap:[[[E.left,E.right,E.up,E.down],function(x){return S.onButtonNavKbdArrowKey(this,x)}],[[E.enter,E.space],function(){return S.onButtonNavKbdClick(this)}]],validate:function(){return!!(C.rangeSelector&&C.rangeSelector.buttons&&C.rangeSelector.buttons.length)},init:function(x){let A=C.rangeSelector;if(A&&A.hasVisibleDropdown)S.initDropdownNav();else if(A){let D=A.buttons.length-1;C.highlightRangeSelectorButton(x>0?0:D)}},terminate:function(){S.removeDropdownKeydownHandler&&(S.removeDropdownKeydownHandler(),delete S.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let C=this.chart,E=this;return new r(C,{keyCodeMap:[],validate:function(){return!!(C.rangeSelector&&C.rangeSelector.inputGroup&&C.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&C.options.rangeSelector.inputEnabled!==!1&&C.rangeSelector.minInput&&C.rangeSelector.maxInput)},init:function(S){E.onInputNavInit(S)},terminate:function(){E.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(b){function C(S){let x=this.rangeSelector&&this.rangeSelector.buttons||[],A=this.highlightedRangeSelectorItemIx,D=this.rangeSelector&&this.rangeSelector.selected;return A!==void 0&&x[A]&&A!==D&&x[A].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=S,!!x[S]&&(this.setFocusToElement(x[S].box,x[S].element),S!==D&&(this.oldRangeSelectorItemState=x[S].state,x[S].setState(1)),!0)}function E(){let S=this.chart.accessibility;if(S&&S.components.rangeSelector)return S.components.rangeSelector.onAfterBtnClick()}b.compose=function(S,x){let A=S.prototype;A.highlightRangeSelectorButton||(A.highlightRangeSelectorButton=C,v(x,"afterBtnClick",E))}}(_),_}),n(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:r}=s,{addEvent:p,merge:f,pushUnique:m}=l;return function(v){function y(A){f(!0,A,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function _(A){return A.marker.states&&A.marker.states.normal&&A.marker.states.normal.opacity}function b(A){return!!(A._hasPointMarkers&&A.points&&A.points.length)}function C(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),b(this)&&this.points.forEach(A=>{A.graphic&&(A.graphic[A.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),A.graphic[A.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function E(A){this.resetA11yMarkerOptions=f(A.options.marker||{},this.userOptions.marker||{})}function S(){let A=this.options;(function(D){let T=D.chart.options.accessibility.enabled,k=(D.options.accessibility&&D.options.accessibility.enabled)!==!1;return T&&k&&function(N){let W=N.chart.options.accessibility;return N.points.length<W.series.pointDescriptionEnabledThreshold||W.series.pointDescriptionEnabledThreshold===!1}(D)})(this)?(A.marker&&A.marker.enabled===!1&&(this.a11yMarkersForced=!0,y(this.options)),b(this)&&function(D){let T=D.points.length;for(;T--;){let k=D.points[T],N=k.options,W=k.hasForcedA11yMarker;if(delete k.hasForcedA11yMarker,N.marker){let Z=W&&_(N)===0;N.marker.enabled&&!Z?(f(!0,N.marker,{states:{normal:{opacity:_(N)||1}}}),k.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(y(N),k.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(D){let T=D.resetA11yMarkerOptions;if(T){let k=T.states&&T.states.normal&&T.states.normal.opacity;D.userOptions&&D.userOptions.marker&&(D.userOptions.marker.enabled=!0),D.update({marker:{enabled:T.enabled,states:{normal:{opacity:k}}}})}}(this),delete this.resetA11yMarkerOptions)}function x(){this.boosted&&this.a11yMarkersForced&&(f(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}v.compose=function(A){m(r,"A11y.FM")&&(p(A,"afterSetOptions",E),p(A,"render",S),p(A,"afterRender",C),p(A,"renderCanvas",x))}}(u||(u={})),u}),n(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,r,p,f,m,v){let{seriesTypes:y}=u,{doc:_}=r,{defined:b,fireEvent:C}=p,{getPointFromXY:E,getSeriesFromName:S,scrollAxisToPoint:x}=v;function A(K){let j=K.index,V=K.series.points,$=V.length;if(V[j]===K)return j;for(;$--;)if(V[$]===K)return $}function D(K){let j=K.chart.options.accessibility.keyboardNavigation.seriesNavigation,V=K.options.accessibility||{},$=V.keyboardNavigation;return $&&$.enabled===!1||V.enabled===!1||K.options.enableMouseTracking===!1||!K.visible||j.pointNavigationEnabledThreshold&&+j.pointNavigationEnabledThreshold<=K.points.length}function T(K){let j=K.series.chart.options.accessibility,V=K.options.accessibility&&K.options.accessibility.enabled===!1;return K.isNull&&j.keyboardNavigation.seriesNavigation.skipNullPoints||K.visible===!1||K.isInside===!1||V||D(K.series)}function k(K){let j=K.series||[],V=j.length;for(let $=0;$<V;++$)if(!D(j[$])){let L=function(R){let G=R.points||[],U=G.length;for(let B=0;B<U;++B)if(!T(G[B]))return G[B];return null}(j[$]);if(L)return L}return null}function N(K){let j=K.series.length,V=!1;for(;j--&&(K.highlightedPoint=K.series[j].points[K.series[j].points.length-1],!(V=K.series[j].highlightNextValidPoint())););return V}function W(K){delete K.highlightedPoint;let j=k(K);return!!j&&j.highlight()}class Z{constructor(j,V){this.keyCodes=V,this.chart=j}init(){let j=this,V=this.chart,$=this.eventProvider=new m;$.addEvent(l,"destroy",function(){return j.onSeriesDestroy(this)}),$.addEvent(V,"afterApplyDrilldown",function(){(function(L){let R=k(L);R&&R.highlight(!1)})(this)}),$.addEvent(V,"drilldown",function(L){let R=L.point,G=R.series;j.lastDrilledDownPoint={x:R.x,y:R.y,seriesName:G?G.name:""}}),$.addEvent(V,"drillupall",function(){setTimeout(function(){j.onDrillupAll()},10)}),$.addEvent(s,"afterSetState",function(){let L=this.graphic&&this.graphic.element,R=_.activeElement,G=R&&R.getAttribute("class"),U=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;V.highlightedPoint===this&&R!==L&&!U&&L&&L.focus&&L.focus()})}onDrillupAll(){let j,V=this.lastDrilledDownPoint,$=this.chart,L=V&&S($,V.seriesName);V&&L&&b(V.x)&&b(V.y)&&(j=E(L,V.x,V.y)),j=j||k($),$.container&&$.container.focus(),j&&j.highlight&&j.highlight(!1)}getKeyboardNavigationHandler(){let j=this,V=this.keyCodes,$=this.chart,L=$.inverted;return new f($,{keyCodeMap:[[L?[V.up,V.down]:[V.left,V.right],function(R){return j.onKbdSideways(this,R)}],[L?[V.left,V.right]:[V.up,V.down],function(R){return j.onKbdVertical(this,R)}],[[V.enter,V.space],function(R,G){var B;let U=$.highlightedPoint;if(U){let{plotLeft:H,plotTop:q}=this.chart,{plotX:ae=0,plotY:fe=0}=U;G={...G,chartX:H+ae,chartY:q+fe,point:U,target:((B=U.graphic)==null?void 0:B.element)||G.target},C(U.series,"click",G),U.firePointEvent("click",G)}return this.response.success}],[[V.home],function(){return W($),this.response.success}],[[V.end],function(){return N($),this.response.success}],[[V.pageDown,V.pageUp],function(R){return $.highlightAdjacentSeries(R===V.pageDown),this.response.success}]],init:function(){return j.onHandlerInit(this)},validate:function(){return!!k($)},terminate:function(){return j.onHandlerTerminate()}})}onKbdSideways(j,V){let $=this.keyCodes,L=V===$.right||V===$.down;return this.attemptHighlightAdjacentPoint(j,L)}onHandlerInit(j){let V=this.chart;return V.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&V.highlightedPoint?V.highlightedPoint.highlight():W(V),j.response.success}onKbdVertical(j,V){let $=this.chart,L=this.keyCodes,R=V===L.down||V===L.right,G=$.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(j,R);let U=$.highlightedPoint&&$.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return $[U](R),j.response.success}onHandlerTerminate(){let j=this.chart,V=j.options.accessibility.keyboardNavigation;j.tooltip&&j.tooltip.hide(0);let $=j.highlightedPoint&&j.highlightedPoint.series;$&&$.onMouseOut&&$.onMouseOut(),j.highlightedPoint&&j.highlightedPoint.onMouseOut&&j.highlightedPoint.onMouseOut(),V.seriesNavigation.rememberPointFocus||delete j.highlightedPoint}attemptHighlightAdjacentPoint(j,V){let $=this.chart,L=$.options.accessibility.keyboardNavigation.wrapAround;return $.highlightAdjacentPoint(V)||L&&(V?W($):N($))?j.response.success:j.response[V?"next":"prev"]}onSeriesDestroy(j){let V=this.chart;V.highlightedPoint&&V.highlightedPoint.series===j&&(delete V.highlightedPoint,V.focusElement&&V.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(K){function j(G){let U,B,H=this.series,q=this.highlightedPoint,ae=q&&A(q)||0,fe=q&&q.series.points||[],re=this.series&&this.series[this.series.length-1],ce=re&&re.points&&re.points[re.points.length-1];if(!H[0]||!H[0].points)return!1;if(q){if(U=H[q.series.index+(G?1:-1)],(B=fe[ae+(G?1:-1)])||!U||(B=U.points[G?0:U.points.length-1]),!B)return!1}else B=G?H[0].points[0]:ce;return T(B)?(D(U=B.series)?this.highlightedPoint=G?U.points[U.points.length-1]:U.points[0]:this.highlightedPoint=B,this.highlightAdjacentPoint(G)):B.highlight()}function V(G){let U=this.highlightedPoint,B=1/0,H;return!!(b(U.plotX)&&b(U.plotY))&&(this.series.forEach(q=>{D(q)||q.points.forEach(ae=>{if(!b(ae.plotY)||!b(ae.plotX)||ae===U)return;let fe=ae.plotY-U.plotY,re=Math.abs(ae.plotX-U.plotX),ce=Math.abs(fe)*Math.abs(fe)+re*re*4;q.yAxis&&q.yAxis.reversed&&(fe*=-1),!(fe<=0&&G||fe>=0&&!G||ce<5||T(ae))&&ce<B&&(B=ce,H=ae)})}),!!H&&H.highlight())}function $(G){let U,B,H,q=this.highlightedPoint,ae=this.series&&this.series[this.series.length-1],fe=ae&&ae.points&&ae.points[ae.points.length-1];return this.highlightedPoint?!!((U=this.series[q.series.index+(G?-1:1)])&&(B=function(re,ce,ke,ve){let Ee=1/0,Q,ee,oe,we=ce.points.length,J=se=>!(b(se.plotX)&&b(se.plotY));if(!J(re)){for(;we--;)!J(Q=ce.points[we])&&(oe=(re.plotX-Q.plotX)*(re.plotX-Q.plotX)*4+(re.plotY-Q.plotY)*(re.plotY-Q.plotY)*1)<Ee&&(Ee=oe,ee=we);return b(ee)?ce.points[ee]:void 0}}(q,U)))&&(D(U)?(B.highlight(),(H=this.highlightAdjacentSeries(G))?H:(q.highlight(),!1)):(B.highlight(),B.series.highlightNextValidPoint())):(U=G?this.series&&this.series[0]:ae,!!(B=G?U&&U.points&&U.points[0]:fe)&&B.highlight())}function L(G=!0){var q,ae;let U=this.series.chart,B=(ae=(q=U.tooltip)==null?void 0:q.label)==null?void 0:ae.element;!this.isNull&&G?this.onMouseOver():U.tooltip&&U.tooltip.hide(0),x(this),this.graphic&&(U.setFocusToElement(this.graphic),!G&&U.focusElement&&U.focusElement.removeFocusBorder()),U.highlightedPoint=this;let H=B==null?void 0:B.getBoundingClientRect().top;if(B&&H&&H<0){let fe=window.scrollY;window.scrollTo({behavior:"smooth",top:fe+H})}return this}function R(){let G=this.chart.highlightedPoint,U=(G&&G.series)===this?A(G):0,B=this.points,H=B.length;if(B&&H){for(let q=U;q<H;++q)if(!T(B[q]))return B[q].highlight();for(let q=U;q>=0;--q)if(!T(B[q]))return B[q].highlight()}return!1}K.compose=function(G,U,B){let H=G.prototype,q=U.prototype,ae=B.prototype;H.highlightAdjacentPoint||(H.highlightAdjacentPoint=j,H.highlightAdjacentPointVertical=V,H.highlightAdjacentSeries=$,q.highlight=L,ae.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(fe=>{y[fe]&&(y[fe].prototype.keyboardMoveVertical=!1)}),ae.highlightNextValidPoint=R)}}(Z),Z}),n(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(s,l,u,r,p,f){let{hideSeriesFromAT:m}=l,{describeSeries:v}=p;return class extends s{static compose(y,_,b){r.compose(b),u.compose(b),f.compose(y,_,b)}init(){this.newDataAnnouncer=new r(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new f(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let y=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===y.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(y){y.labelBySeries&&y.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(y){(y.options.accessibility&&y.options.accessibility.enabled)!==!1&&y.visible&&y.getPointsCollection().length!==0?v(y):m(y)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),n(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f}=l,{getFakeMouseEvent:m}=u,{attr:v,pick:y}=p;return class extends s{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let _=this,b=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(C=>{_.addEvent(b,C,function(){_.updateProxyOverlays()})})}onChartUpdate(){let _=this.chart,b=this;_.mapNavigation&&_.mapNavigation.navButtons.forEach((C,E)=>{f(_,C.element),b.setMapNavButtonAttrs(C.element,"accessibility.zoom.mapZoom"+(E?"Out":"In"))})}setMapNavButtonAttrs(_,b){let C=this.chart;v(_,{tabindex:-1,role:"button","aria-label":C.langFormat(b,{chart:C})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let _=this.chart;if(this.proxyProvider.clearGroup("zoom"),_.resetZoomButton&&this.createZoomProxyButton(_.resetZoomButton,"resetZoomProxyButton",_.langFormat("accessibility.zoom.resetZoomButton",{chart:_})),_.drillUpButton&&_.breadcrumbs&&_.breadcrumbs.list){let b=_.breadcrumbs.list[_.breadcrumbs.list.length-1];this.createZoomProxyButton(_.drillUpButton,"drillUpProxyButton",_.langFormat("accessibility.drillUpButton",{chart:_,buttonText:_.breadcrumbs.getButtonText(b)}))}}createZoomProxyButton(_,b,C){this[b]=this.proxyProvider.addProxyElement("zoom",{click:_},"button",{"aria-label":C,tabindex:-1})}getMapZoomNavigation(){let _=this.keyCodes,b=this.chart,C=this;return new r(b,{keyCodeMap:[[[_.up,_.down,_.left,_.right],function(E){return C.onMapKbdArrow(this,E)}],[[_.tab],function(E,S){return C.onMapKbdTab(this,S)}],[[_.space,_.enter],function(){return C.onMapKbdClick(this)}]],validate:function(){return!!(b.mapView&&b.mapNavigation&&b.mapNavigation.navButtons.length)},init:function(E){return C.onMapNavInit(E)}})}onMapKbdArrow(_,b){let C=this.chart,E=this.keyCodes,S=C.container,x=b===E.up||b===E.down,A=b===E.left||b===E.up?1:-1,D=(x?C.plotHeight:C.plotWidth)/10*A,T=10*Math.random(),k={x:S.offsetLeft+C.plotLeft+C.plotWidth/2+T,y:S.offsetTop+C.plotTop+C.plotHeight/2+T},N=x?{x:k.x,y:k.y+D}:{x:k.x+D,y:k.y};return[m("mousedown",k),m("mousemove",N),m("mouseup",N)].forEach(W=>S.dispatchEvent(W)),_.response.success}onMapKbdTab(_,b){let C=this.chart,E=_.response,S=b.shiftKey,x=S&&!this.focusedMapNavButtonIx||!S&&this.focusedMapNavButtonIx;if(C.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),x)return C.mapView&&C.mapView.zoomBy(),E[S?"prev":"next"];this.focusedMapNavButtonIx+=S?-1:1;let A=C.mapNavigation.navButtons[this.focusedMapNavButtonIx];return C.setFocusToElement(A.box,A.element),A.setState(2),E.success}onMapKbdClick(_){let b=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(b),_.response.success}onMapNavInit(_){let b=this.chart,C=b.mapNavigation.navButtons[0],E=b.mapNavigation.navButtons[1],S=_>0?C:E;b.setFocusToElement(S.box,S.element),S.setState(2),this.focusedMapNavButtonIx=_>0?0:1}simpleButtonNavigation(_,b,C){let E=this.keyCodes,S=this,x=this.chart;return new r(x,{keyCodeMap:[[[E.tab,E.up,E.down,E.left,E.right],function(A,D){let T=A===E.tab&&D.shiftKey||A===E.left||A===E.up;return this.response[T?"prev":"next"]}],[[E.space,E.enter],function(){return y(C(this,x),this.response.success)}]],validate:function(){return x[_]&&x[_].box&&S[b].innerElement},init:function(){x.setFocusToElement(x[_].box,S[b].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(_,b){b.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(_,b){return b.drillUp(),_.response.prev}),this.getMapZoomNavigation()]}}}),n(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(s){let{doc:l,isMS:u,win:r}=s;return{isHighContrastModeActive:function(){let p=/(Edg)/.test(r.navigator.userAgent);if(r.matchMedia&&p)return r.matchMedia("(-ms-high-contrast: active)").matches;if(u&&r.getComputedStyle){let f=l.createElement("div");f.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",l.body.appendChild(f);let m=(f.currentStyle||r.getComputedStyle(f)).backgroundImage;return l.body.removeChild(f),m==="none"}return r.matchMedia&&r.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(p){var v;p.highContrastModeActive=!0;let f=p.options.accessibility.highContrastTheme;p.update(f,!1);let m=((v=f.colors)==null?void 0:v.length)>1;p.series.forEach(function(y){let _=f.plotOptions[y.type]||{},b=m&&y.colorIndex!==void 0?f.colors[y.colorIndex]:_.color||"window",C={color:_.color||"windowText",colors:m?f.colors:[_.color||"windowText"],borderColor:_.borderColor||"window",fillColor:b};y.update(C,!1),y.points&&y.points.forEach(function(E){E.options&&E.options.color&&E.update({color:_.color||"windowText",borderColor:_.borderColor||"window"},!1)})}),p.redraw()}}}),n(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),n(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),n(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),n(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(s){let{error:l,pick:u}=s;function r(f,m,v){let y=f,_,b=0;for(;b<m.length-1;++b)y=y[_=m[b]]=u(y[_],{});y[m[m.length-1]]=v}function p(f,m,v,y){function _(E,S){return S.reduce(function(x,A){return x[A]},E)}let b=_(f.options,m),C=_(f.options,v);Object.keys(y).forEach(function(E){let S=b[E];S!==void 0&&(r(C,y[E],S),l(32,!1,f,{[m.join(".")+"."+E]:v.join(".")+"."+y[E].join(".")}))})}return function(f){(function(m){let v=m.options.chart,y=m.options.accessibility||{};["description","typeDescription"].forEach(function(_){v[_]&&(y[_]=v[_],l(32,!1,m,{[`chart.${_}`]:`use accessibility.${_}`}))})})(f),function(m){m.axes.forEach(function(v){let y=v.options;y&&y.description&&(y.accessibility=y.accessibility||{},y.accessibility.description=y.description,l(32,!1,m,{"axis.description":"use axis.accessibility.description"}))})}(f),f.series&&function(m){let v={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};m.series.forEach(function(y){Object.keys(v).forEach(function(_){let b=y.options[_];_==="accessibility.pointDescriptionFormatter"&&(b=y.options.accessibility&&y.options.accessibility.pointDescriptionFormatter),b!==void 0&&(r(y.options,v[_],_==="skipKeyboardNavigation"?!b:b),l(32,!1,m,{[`series.${_}`]:"series."+v[_].join(".")}))})})}(f),p(f,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),p(f,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),p(f,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),n(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(s,l,u,r,p,f,m,v,y,_,b,C,E,S,x,A,D,T,k,N,W,Z){let{defaultOptions:K}=s,{doc:j}=l,{addEvent:V,extend:$,fireEvent:L,merge:R}=u,{removeElement:G}=r;class U{constructor(H){this.init(H)}init(H){if(this.chart=H,!j.addEventListener){this.zombie=!0,this.components={},H.renderTo.setAttribute("aria-hidden",!0);return}Z(H),this.proxyProvider=new S(this.chart),this.initComponents(),this.keyboardNavigation=new y(H,this.components)}initComponents(){let H=this.chart,q=this.proxyProvider,ae=H.options.accessibility;this.components={container:new f,infoRegions:new v,legend:new _,chartMenu:new b,rangeSelector:new x,series:new A,zoom:new D,navigator:new C},ae.customComponents&&$(this.components,ae.customComponents);let fe=this.components;this.getComponentOrder().forEach(function(re){fe[re].initBase(H,q),fe[re].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(H=>H!=="series")):Object.keys(this.components):[]}update(){let H=this.components,q=this.chart,ae=q.options.accessibility;L(q,"beforeA11yUpdate"),q.types=this.getChartTypes();let fe=ae.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(fe),this.getComponentOrder().forEach(function(re){H[re].onChartUpdate(),L(q,"afterA11yComponentUpdate",{name:re,component:H[re]})}),this.keyboardNavigation.update(fe),!q.highContrastModeActive&&ae.highContrastMode!==!1&&(T.isHighContrastModeActive()||ae.highContrastMode===!0)&&T.setHighContrastTheme(q),L(q,"afterA11yUpdate",{accessibility:this})}destroy(){let H=this.chart||{},q=this.components;Object.keys(q).forEach(function(ae){q[ae].destroy(),q[ae].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),H.announcerContainer&&G(H.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),H.renderTo&&H.renderTo.setAttribute("aria-hidden",!0),H.focusElement&&H.focusElement.removeFocusBorder()}getChartTypes(){let H={};return this.chart.series.forEach(function(q){H[q.type]=1}),Object.keys(H)}}return function(B){function H(){this.accessibility&&this.accessibility.destroy()}function q(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let ce=this.accessibility;ce&&!ce.zombie&&(ce.proxyProvider.updateProxyElementPositions(),ce.getComponentOrder().forEach(function(ke){ce.components[ke].onChartRender()}))}function ae(ce){let ke=ce.options.accessibility;ke&&(ke.customComponents&&(this.options.accessibility.customComponents=ke.customComponents,delete ke.customComponents),R(!0,this.options.accessibility,ke),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function fe(){let ce=this.accessibility,ke=this.options.accessibility,ve=this.renderer.boxWrapper.element,Ee=this.title;if(ke&&ke.enabled)ce&&!ce.zombie?ce.update():(this.accessibility=ce=new B(this),ce&&!ce.zombie&&ce.update(),ve.getAttribute("role")==="img"&&ve.removeAttribute("role"));else if(ce)ce.destroy&&ce.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Ee&&Ee.element.textContent||"").replace(/</g,"&lt;")),ve.setAttribute("aria-hidden",!0);let Q=document.getElementsByClassName("highcharts-description")[0];Q&&(Q.setAttribute("aria-hidden",!1),Q.classList.remove("highcharts-linked-description"))}}function re(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}B.i18nFormat=p.i18nFormat,B.compose=function(ce,ke,ve,Ee,Q,ee){y.compose(ce),E.compose(Ee),_.compose(ce,ke),b.compose(ce),A.compose(ce,ve,Ee),p.compose(ce),m.compose(ce,Q),ee&&x.compose(ce,ee);let oe=ce.prototype;oe.updateA11yEnabled||(oe.updateA11yEnabled=fe,V(ce,"destroy",H),V(ce,"render",q),V(ce,"update",ae),["addSeries","init"].forEach(we=>{V(ce,we,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(we=>{V(ce,we,function(){let J=this.accessibility;J&&!J.zombie&&J.update()})}),V(ve,"update",re),["update","updatedData","remove"].forEach(we=>{V(Ee,we,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}(U),R(!0,K,N,{accessibility:{highContrastTheme:k},lang:W}),U}),n(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,r,p,f,m){return s.i18nFormat=l.i18nFormat,s.A11yChartUtilities=r,s.A11yHTMLUtilities=p,s.AccessibilityComponent=u,s.KeyboardNavigationHandler=f,s.SeriesAccessibilityDescriber=m,l.compose(s.Chart,s.Legend,s.Point,s.Series,s.SVGElement,s.RangeSelector),s})})})(tk);var l7=tk.exports;const c7=Yh(l7);var ik={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(s){let{addEvent:l,correctFloat:u,defined:r,pick:p}=s;function f(b){let C,E=this;return b&&E.pane.forEach(S=>{m(b.chartX-E.plotLeft,b.chartY-E.plotTop,S.center)&&(C=S)}),C}function m(b,C,E,S,x){let A=!0,D=E[0],T=E[1],k=Math.sqrt(Math.pow(b-D,2)+Math.pow(C-T,2));if(r(S)&&r(x)){let N=Math.atan2(u(C-T,8),u(b-D,8));x!==S&&(A=S>x?N>=S&&N<=Math.PI||N<=x&&N>=-Math.PI:N>=S&&N<=u(x,8))}return k<=Math.ceil(E[2]/2)&&A}function v(b){this.polar&&(b.options.inverted&&([b.x,b.y]=[b.y,b.x]),b.isInsidePlot=this.pane.some(C=>m(b.x,b.y,C.center,C.axis&&C.axis.normalizedStartAngleRad,C.axis&&C.axis.normalizedEndAngleRad)))}function y(b){let C=this.chart;b.hoverPoint&&b.hoverPoint.plotX&&b.hoverPoint.plotY&&C.hoverPane&&!m(b.hoverPoint.plotX,b.hoverPoint.plotY,C.hoverPane.center)&&(b.hoverPoint=void 0)}function _(b){let C=this.chart;C.polar?(C.hoverPane=C.getHoverPane(b),b.filter=function(E){return E.visible&&!(!b.shared&&E.directTouch)&&p(E.options.enableMouseTracking,!0)&&(!C.hoverPane||E.xAxis.pane===C.hoverPane)}):C.hoverPane=void 0}return{compose:function(b,C){let E=b.prototype;E.getHoverPane||(E.collectionsWithUpdate.push("pane"),E.getHoverPane=f,l(b,"afterIsInsidePlot",v),l(C,"afterGetHoverData",y),l(C,"beforeGetHoverData",_))}}}),n(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),n(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{extend:p,merge:f,splat:m}=r;class v{constructor(_,b){this.coll="pane",this.init(_,b)}init(_,b){this.chart=b,this.background=[],b.pane.push(this),this.setOptions(_)}setOptions(_){this.options=_=f(u.pane,this.chart.angular?{background:{}}:void 0,_)}render(){let _=this.options,b=this.chart.renderer;this.group||(this.group=b.g("pane-group").attr({zIndex:_.zIndex||0}).add()),this.updateCenter();let C=this.options.background;if(C){let E=Math.max((C=m(C)).length,this.background.length||0);for(let S=0;S<E;S++)C[S]&&this.axis?this.renderBackground(f(u.background,C[S]),S):this.background[S]&&(this.background[S]=this.background[S].destroy(),this.background.splice(S,1))}}renderBackground(_,b){let C={class:"highcharts-pane "+(_.className||"")},E="animate";this.chart.styledMode||p(C,{fill:_.backgroundColor,stroke:_.borderColor,"stroke-width":_.borderWidth}),this.background[b]||(this.background[b]=this.chart.renderer.path().add(this.group),E="attr"),this.background[b][E]({d:this.axis.getPlotBandPath(_.from,_.to,_)}).attr(C)}updateCenter(_){this.center=(_||this.axis||{}).center=s.getCenter.call(this)}update(_,b){f(!0,this.options,_),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(C){C.pane===this&&(C.pane=null,C.update({},b))},this)}}return v.compose=l.compose,v}),n(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{area:{prototype:{pointClass:u,pointClass:{prototype:r}}}}=s.seriesTypes,{defined:p,isNumber:f}=l;return class extends u{setState(){let m=this.state,v=this.series,y=v.chart.polar;p(this.plotHigh)||(this.plotHigh=v.yAxis.toPixels(this.high,!0)),p(this.plotLow)||(this.plotLow=this.plotY=v.yAxis.toPixels(this.low,!0)),v.lowerStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,y&&f(this.plotHighX)&&(this.plotX=this.plotHighX),r.setState.apply(this,arguments),this.state=m,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],y&&f(this.plotLowX)&&(this.plotX=this.plotLowX),v.upperStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.lowerStateMarkerGraphic,v.lowerStateMarkerGraphic=void 0;let _=v.modifyMarkerSettings();r.setState.apply(this,arguments),v.restoreMarkerSettings(_)}haloPath(){let m=this.series.chart.polar,v=[];return this.plotY=this.plotLow,m&&f(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(v=r.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,m&&f(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(v=v.concat(r.haloPath.apply(this,arguments))),v}isValid(){return f(this.low)&&f(this.high)}}}),n(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{area:f,area:{prototype:m},column:{prototype:v}}=u.seriesTypes,{addEvent:y,defined:_,extend:b,isArray:C,isNumber:E,pick:S,merge:x}=r;class A extends f{toYData(T){return[T.low,T.high]}highToXY(T){let k=this.chart,N=this.xAxis.postTranslate(T.rectPlotX||0,this.yAxis.len-(T.plotHigh||0));T.plotHighX=N.x-k.plotLeft,T.plotHigh=N.y-k.plotTop,T.plotLowX=T.plotX}getGraphPath(T){let k=[],N=[],W=m.getGraphPath,Z=this.options,K=this.chart.polar,j=K&&Z.connectEnds!==!1,V=Z.connectNulls,$,L,R,G=Z.step;for($=(T=T||this.points).length;$--;){L=T[$];let ae=K?{plotX:L.rectPlotX,plotY:L.yBottom,doCurve:!1}:{plotX:L.plotX,plotY:L.plotY,doCurve:!1};L.isNull||j||V||T[$+1]&&!T[$+1].isNull||N.push(ae),R={polarPlotY:L.polarPlotY,rectPlotX:L.rectPlotX,yBottom:L.yBottom,plotX:S(L.plotHighX,L.plotX),plotY:L.plotHigh,isNull:L.isNull},N.push(R),k.push(R),L.isNull||j||V||T[$-1]&&!T[$-1].isNull||N.push(ae)}let U=W.call(this,T);G&&(G===!0&&(G="left"),Z.step={left:"right",center:"center",right:"left"}[G]);let B=W.call(this,k),H=W.call(this,N);Z.step=G;let q=[].concat(U,B);return!this.chart.polar&&H[0]&&H[0][0]==="M"&&(H[0]=["L",H[0][1],H[0][2]]),this.graphPath=q,this.areaPath=U.concat(H),q.isArea=!0,q.xMap=U.xMap,this.areaPath.xMap=U.xMap,q}drawDataLabels(){var R,G;let T,k,N,W,Z,K=this.points,j=K.length,V=[],$=this.options.dataLabels,L=this.chart.inverted;if($){if(C($)?(W=$[0]||{enabled:!1},Z=$[1]||{enabled:!1}):((W=b({},$)).x=$.xHigh,W.y=$.yHigh,(Z=b({},$)).x=$.xLow,Z.y=$.yLow),W.enabled||((R=this.hasDataLabels)==null?void 0:R.call(this))){for(T=j;T--;)if(k=K[T]){let{plotHigh:U=0,plotLow:B=0}=k;N=W.inside?U<B:U>B,k.y=k.high,k._plotY=k.plotY,k.plotY=U,V[T]=k.dataLabel,k.dataLabel=k.dataLabelUpper,k.below=N,L?W.align||(W.align=N?"right":"left"):W.verticalAlign||(W.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=W,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments),T=j;T--;)(k=K[T])&&(k.dataLabelUpper=k.dataLabel,k.dataLabel=V[T],delete k.dataLabels,k.y=k.low,k.plotY=k._plotY)}if(Z.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(T=j;T--;)if(k=K[T]){let{plotHigh:U=0,plotLow:B=0}=k;N=Z.inside?U<B:U>B,k.below=!N,L?Z.align||(Z.align=N?"left":"right"):Z.verticalAlign||(Z.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Z,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments)}if(W.enabled)for(T=j;T--;)(k=K[T])&&(k.dataLabels=[k.dataLabelUpper,k.dataLabel].filter(function(U){return!!U}));this.options.dataLabels=$}}alignDataLabel(){v.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let T={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:k,lowMarker:N}}=this;this.options.marker=x(k,N),N.symbol&&(this.symbol=N.symbol)}return T}restoreMarkerSettings(T){this.options.marker=T.marker,this.symbol=T.symbol}drawPoints(){let T,k,N=this.points.length,W=this.modifyMarkerSettings();for(m.drawPoints.apply(this,arguments),this.restoreMarkerSettings(W),T=0;T<N;)(k=this.points[T]).graphics=k.graphics||[],k.origProps={plotY:k.plotY,plotX:k.plotX,isInside:k.isInside,negative:k.negative,zone:k.zone,y:k.y},(k.graphic||k.graphics[0])&&(k.graphics[0]=k.graphic),k.graphic=k.graphics[1],k.plotY=k.plotHigh,_(k.plotHighX)&&(k.plotX=k.plotHighX),k.y=S(k.high,k.origProps.y),k.negative=k.y<(this.options.threshold||0),this.zones.length&&(k.zone=k.getZone()),this.chart.polar||(k.isInside=k.isTopInside=k.plotY!==void 0&&k.plotY>=0&&k.plotY<=this.yAxis.len&&k.plotX>=0&&k.plotX<=this.xAxis.len),T++;for(m.drawPoints.apply(this,arguments),T=0;T<N;)(k=this.points[T]).graphics=k.graphics||[],(k.graphic||k.graphics[1])&&(k.graphics[1]=k.graphic),k.graphic=k.graphics[0],k.origProps&&(b(k,k.origProps),delete k.origProps),T++}hasMarkerChanged(T,k){let N=T.lowMarker,W=k.lowMarker||{};return N&&(N.enabled===!1||W.symbol!==N.symbol||W.height!==N.height||W.width!==N.width)||super.hasMarkerChanged(T,k)}}return A.defaultOptions=x(f.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),y(A,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(D=>{let T=D.high,k=D.plotY;D.isNull?D.plotY=void 0:(D.plotLow=k,D.plotHigh=E(T)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(T):T,!1,!0,void 0,!0):void 0,this.dataModify&&(D.yBottom=D.plotHigh))})},{order:0}),y(A,"afterTranslate",function(){this.points.forEach(D=>{if(this.chart.polar)this.highToXY(D),D.plotLow=D.plotY,D.tooltipPos=[((D.plotHighX||0)+(D.plotLowX||0))/2,((D.plotHigh||0)+(D.plotLow||0))/2];else{let T=D.pos(!1,D.plotLow),k=D.pos(!1,D.plotHigh);T&&k&&(T[0]=(T[0]+k[0])/2,T[1]=(T[1]+k[1])/2),D.tooltipPos=T}})},{order:3}),b(A.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:s,pointValKey:"low",setStackedPoints:p}),u.registerSeriesType("arearange",A),A}),n(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{spline:{prototype:r}}=l.seriesTypes,{merge:p,extend:f}=u;class m extends s{}return m.defaultOptions=p(s.defaultOptions),f(m.prototype,{getPointSpline:r.getPointSpline}),l.registerSeriesType("areasplinerange",m),m}),n(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}"></span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),n(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{noop:f}=u,{crisp:m,extend:v,merge:y,pick:_}=p;class b extends l{pointAttribs(){return{}}translate(){let E=this.yAxis,S=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(x){S.forEach(function(A){x[A]!==null&&(x[A+"Plot"]=E.translate(x[A],0,1,0,1))}),x.plotHigh=x.highPlot})}drawPoints(){let E,S,x,A,D,T,k,N,W,Z,K,j,V,$=this.points,L=this.options,R=this.chart,G=R.renderer,U=this.doQuartiles!==!1,B=this.options.whiskerLength;for(let H of $){let q=(N=H.graphic)?"animate":"attr",ae=H.shapeArgs,fe={},re={},ce={},ke={},ve=H.color||this.color;if(H.plotY!==void 0){let Ee;W=ae.width,K=(Z=ae.x)+W,j=W/2,E=U?H.q1Plot:H.lowPlot,S=U?H.q3Plot:H.lowPlot,x=H.highPlot,A=H.lowPlot,N||(H.graphic=N=G.g("point").add(this.group),H.stem=G.path().addClass("highcharts-boxplot-stem").add(N),B&&(H.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),U&&(H.box=G.path(k).addClass("highcharts-boxplot-box").add(N)),H.medianShape=G.path(T).addClass("highcharts-boxplot-median").add(N)),R.styledMode||(re.stroke=H.stemColor||L.stemColor||ve,re["stroke-width"]=_(H.stemWidth,L.stemWidth,L.lineWidth),re.dashstyle=H.stemDashStyle||L.stemDashStyle||L.dashStyle,H.stem.attr(re),B&&(ce.stroke=H.whiskerColor||L.whiskerColor||ve,ce["stroke-width"]=_(H.whiskerWidth,L.whiskerWidth,L.lineWidth),ce.dashstyle=H.whiskerDashStyle||L.whiskerDashStyle||L.dashStyle,H.whiskers.attr(ce)),U&&(fe.fill=H.fillColor||L.fillColor||ve,fe.stroke=L.lineColor||ve,fe["stroke-width"]=L.lineWidth||0,fe.dashstyle=H.boxDashStyle||L.boxDashStyle||L.dashStyle,H.box.attr(fe)),ke.stroke=H.medianColor||L.medianColor||ve,ke["stroke-width"]=_(H.medianWidth,L.medianWidth,L.lineWidth),ke.dashstyle=H.medianDashStyle||L.medianDashStyle||L.dashStyle,H.medianShape.attr(ke));let Q=m((H.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,H.stem.strokeWidth());if(Ee=[["M",Q,S],["L",Q,x],["M",Q,E],["L",Q,A]],H.stem[q]({d:Ee}),U){let ee=H.box.strokeWidth();E=m(E,ee),S=m(S,ee),Ee=[["M",Z=m(Z,ee),S],["L",Z,E],["L",K=m(K,ee),E],["L",K,S],["L",Z,S],["Z"]],H.box[q]({d:Ee})}if(B){let ee=H.whiskers.strokeWidth();x=m(H.highPlot,ee),A=m(H.lowPlot,ee),Ee=[["M",m(Q-(V=typeof B=="string"&&/%$/.test(B)?j*parseFloat(B)/100:Number(B)/2)),x],["L",m(Q+V),x],["M",m(Q-V),A],["L",m(Q+V),A]],H.whiskers[q]({d:Ee})}Ee=[["M",Z,D=m(H.medianPlot,H.medianShape.strokeWidth())],["L",K,D]],H.medianShape[q]({d:Ee})}}}toYData(E){return[E.low,E.q1,E.median,E.q3,E.high]}}return b.defaultOptions=y(l.defaultOptions,s),v(b.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:f,setStackedPoints:f}),r.registerSeriesType("boxplot",b),b}),n(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),n(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{parse:p}=s,{noop:f}=u,{arrayMax:m,arrayMin:v,isNumber:y,merge:_,pick:b,stableSort:C}=r;return class{constructor(E,S){this.setState=f,this.init(E,S)}init(E,S){this.options=E,this.visible=!0,this.chart=S.chart,this.legend=S}addToLegend(E){E.splice(this.options.legendIndex,0,this)}drawLegendSymbol(E){let S,x=b(E.options.itemDistance,20),A=this.legendItem||{},D=this.options,T=D.ranges,k=D.connectorDistance;if(!T||!T.length||!y(T[0].value)){E.options.bubbleLegend.autoRanges=!0;return}C(T,function(K,j){return j.value-K.value}),this.ranges=T,this.setOptions(),this.render();let N=this.getMaxLabelSize(),W=this.ranges[0].radius,Z=2*W;S=(S=k-W+N.width)>0?S:0,this.maxLabel=N,this.movementX=D.labels.align==="left"?S:0,A.labelWidth=Z+S+x,A.labelHeight=Z+N.height/2}setOptions(){let E=this.ranges,S=this.options,x=this.chart.series[S.seriesIndex],A=this.legend.baseline,D={zIndex:S.zIndex,"stroke-width":S.borderWidth},T={zIndex:S.zIndex,"stroke-width":S.connectorWidth},k={align:this.legend.options.rtl||S.labels.align==="left"?"right":"left",zIndex:S.zIndex},N=x.options.marker.fillOpacity,W=this.chart.styledMode;E.forEach(function(Z,K){W||(D.stroke=b(Z.borderColor,S.borderColor,x.color),D.fill=b(Z.color,S.color,N!==1?p(x.color).setOpacity(N).get("rgba"):x.color),T.stroke=b(Z.connectorColor,S.connectorColor,x.color)),E[K].radius=this.getRangeRadius(Z.value),E[K]=_(E[K],{center:E[0].radius-E[K].radius+A}),W||_(!0,E[K],{bubbleAttribs:_(D),connectorAttribs:_(T),labelAttribs:k})},this)}getRangeRadius(E){let S=this.options,x=this.options.seriesIndex,A=this.chart.series[x],D=S.ranges[0].value,T=S.ranges[S.ranges.length-1].value,k=S.minSize,N=S.maxSize;return A.getRadius.call(this,T,D,k,N,E)}render(){let E=this.legendItem||{},S=this.chart.renderer,x=this.options.zThreshold;for(let A of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),E.symbol=S.g("bubble-legend"),E.label=S.g("bubble-legend-item").css(this.legend.itemStyle||{}),E.symbol.translateX=0,E.symbol.translateY=0,E.symbol.add(E.label),E.label.add(E.group),this.ranges))A.value>=x&&this.renderRange(A);this.hideOverlappingLabels()}renderRange(E){let S=this.ranges[0],x=this.legend,A=this.options,D=A.labels,T=this.chart,k=T.series[A.seriesIndex],N=T.renderer,W=this.symbols,Z=W.labels,K=E.center,j=Math.abs(E.radius),V=A.connectorDistance||0,$=D.align,L=x.options.rtl,R=A.borderWidth,G=A.connectorWidth,U=S.radius||0,B=K-j-R/2+G/2,H=(B%1?1:.5)-(G%2?0:.5),q=N.styledMode,ae=L||$==="left"?-V:V;$==="center"&&(ae=0,A.connectorDistance=0,E.labelAttribs.align="center"),W.bubbleItems.push(N.circle(U,K+H,j).attr(q?{}:E.bubbleAttribs).addClass((q?"highcharts-color-"+k.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(A.className||"")).add(this.legendItem.symbol)),W.connectors.push(N.path(N.crispLine([["M",U,B],["L",U+ae,B]],A.connectorWidth)).attr(q?{}:E.connectorAttribs).addClass((q?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(A.connectorClassName||"")).add(this.legendItem.symbol));let fe=N.text(this.formatLabel(E)).attr(q?{}:E.labelAttribs).css(q?{}:D.style).addClass("highcharts-bubble-legend-labels "+(A.labels.className||"")).add(this.legendItem.symbol),re={x:U+ae+A.labels.x,y:B+A.labels.y+.4*fe.getBBox().height};fe.attr(re),Z.push(fe),fe.placed=!0,fe.alignAttr=re}getMaxLabelSize(){let E,S;return this.symbols.labels.forEach(function(x){S=x.getBBox(!0),E=E?S.width>E.width?S:E:S}),E||{}}formatLabel(E){let S=this.options,x=S.labels.formatter,A=S.labels.format,{numberFormatter:D}=this.chart;return A?l.format(A,E):x?x.call(E):D(E.value,1)}hideOverlappingLabels(){let E=this.chart,S=this.options.labels.allowOverlap,x=this.symbols;!S&&x&&(E.hideOverlappingLabels(x.labels),x.labels.forEach(function(A,D){A.newOpacity?A.newOpacity!==A.oldOpacity&&x.connectors[D].show():x.connectors[D].hide()}))}getRanges(){let E=this.legend.bubbleLegend,S=E.chart.series,x=E.options.ranges,A,D,T=Number.MAX_VALUE,k=-Number.MAX_VALUE;return S.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(D=N.zData.filter(y)).length&&(T=b(N.options.zMin,Math.min(T,Math.max(v(D),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),k=b(N.options.zMax,Math.max(k,m(D))))}),A=T===k?[{value:k}]:[{value:T},{value:(T+k)/2},{value:k,autoRanges:!0}],x.length&&x[0].radius&&A.reverse(),A.forEach(function(N,W){x&&x[W]&&(A[W]=_(x[W],N))}),A}predictBubbleSizes(){let E=this.chart,S=E.legend.options,x=S.floating,A=S.layout==="horizontal",D=A?E.legend.lastLineHeight:0,T=E.plotSizeX,k=E.plotSizeY,N=E.series[this.options.seriesIndex],W=N.getPxExtremes(),Z=Math.ceil(W.minPxSize),K=Math.ceil(W.maxPxSize),j=Math.min(k,T),V,$=N.options.maxSize;return x||!/%$/.test($)?V=K:(V=(j+D)*($=parseFloat($))/100/($/100+1),(A&&k-V>=T||!A&&T-V>=k)&&(V=K)),[Z,Math.ceil(V)]}updateRanges(E,S){let x=this.legend.options.bubbleLegend;x.minSize=E,x.maxSize=S,x.ranges=this.getRanges()}correctSizes(){let E=this.legend,S=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(S.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,S.maxPxSize),E.render())}}}),n(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{setOptions:f}=u,{composed:m}=r,{addEvent:v,objectEach:y,pushUnique:_,wrap:b}=p;function C(T,k,N){let W,Z,K,j=this.legend,V=E(this)>=0;j&&j.options.enabled&&j.bubbleLegend&&j.options.bubbleLegend.autoRanges&&V?(W=j.bubbleLegend.options,Z=j.bubbleLegend.predictBubbleSizes(),j.bubbleLegend.updateRanges(Z[0],Z[1]),W.placed||(j.group.placed=!1,j.allItems.forEach($=>{(K=$.legendItem||{}).group&&(K.group.translateY=void 0)})),j.render(),W.placed||(this.getMargins(),this.axes.forEach(function($){$.visible&&$.render(),W.placed||($.setScale(),$.updateNames(),y($.ticks,function(L){L.isNew=!0,L.isNewLabel=!0}))}),this.getMargins()),W.placed=!0,T.call(this,k,N),j.bubbleLegend.correctSizes(),D(j,S(j))):(T.call(this,k,N),j&&j.options.enabled&&j.bubbleLegend&&(j.render(),D(j,S(j))))}function E(T){let k=T.series,N=0;for(;N<k.length;){if(k[N]&&k[N].isBubble&&k[N].visible&&k[N].zData.length)return N;N++}return-1}function S(T){let k=T.allItems,N=[],W=k.length,Z,K,j,V=0,$=0;for(V=0;V<W;V++)if(K=k[V].legendItem||{},j=(k[V+1]||{}).legendItem||{},K.labelHeight&&(k[V].itemHeight=K.labelHeight),k[V]===k[W-1]||K.y!==j.y){for(N.push({height:0}),Z=N[N.length-1];$<=V;$++)k[$].itemHeight>Z.height&&(Z.height=k[$].itemHeight);Z.step=V}return N}function x(T){let k=this.bubbleLegend,N=this.options,W=N.bubbleLegend,Z=E(this.chart);k&&k.ranges&&k.ranges.length&&(W.ranges.length&&(W.autoRanges=!!W.ranges[0].autoRanges),this.destroyItem(k)),Z>=0&&N.enabled&&W.enabled&&(W.seriesIndex=Z,this.bubbleLegend=new l(W,this),this.bubbleLegend.addToLegend(T.allItems))}function A(T){let k;if(T.defaultPrevented)return!1;let N=T.legendItem,W=this.chart,Z=N.visible;this&&this.bubbleLegend&&(N.visible=!Z,N.ignoreSeries=Z,k=E(W)>=0,this.bubbleLegend.visible!==k&&(this.update({bubbleLegend:{enabled:k}}),this.bubbleLegend.visible=k),N.visible=Z)}function D(T,k){let N=T.allItems,W=T.options.rtl,Z,K,j,V,$=0;N.forEach((L,R)=>{(V=L.legendItem||{}).group&&(Z=V.group.translateX||0,K=V.y||0,((j=L.movementX)||W&&L.ranges)&&(j=W?Z-L.options.maxSize/2:Z+j,V.group.attr({translateX:j})),R>k[$].step&&$++,V.group.attr({translateY:Math.round(K+k[$].height/2)}),V.y=K+k[$].height/2)})}return{compose:function(T,k){_(m,"Series.BubbleLegend")&&(f({legend:{bubbleLegend:s}}),b(T.prototype,"drawChartBox",C),v(k,"afterGetAllItems",x),v(k,"itemClick",A))}}}),n(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{scatter:{prototype:{pointClass:r}}}}=l,{extend:p}=u;class f extends r{haloPath(v){let y=(v&&this.marker&&this.marker.radius||0)+v;if(this.series.chart.inverted){let _=this.pos()||[0,0],{xAxis:b,yAxis:C,chart:E}=this.series;return E.renderer.symbols.circle(b.len-_[1]-y,C.len-_[0]-y,2*y,2*y)}return s.prototype.haloPath.call(this,y)}}return p(f.prototype,{ttBelow:!1}),f}),n(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){let{parse:m}=u,{composed:v,noop:y}=r,{series:_,seriesTypes:{column:{prototype:b},scatter:C}}=p,{addEvent:E,arrayMax:S,arrayMin:x,clamp:A,extend:D,isNumber:T,merge:k,pick:N,pushUnique:W}=f;function Z(){let j=this.len,{coll:V,isXAxis:$,min:L}=this,R=$?"xData":"yData",G=(this.max||0)-(L||0),U=0,B=j,H=j/G,q;(V==="xAxis"||V==="yAxis")&&(this.series.forEach(ae=>{if(ae.bubblePadding&&ae.reserveSpace()){this.allowZoomOutside=!0,q=!0;let fe=ae[R];if($&&((ae.onPoint||ae).getRadii(0,0,ae),ae.onPoint&&(ae.radii=ae.onPoint.radii)),G>0){let re=fe.length;for(;re--;)if(T(fe[re])&&this.dataMin<=fe[re]&&fe[re]<=this.max){let ce=ae.radii&&ae.radii[re]||0;U=Math.min((fe[re]-L)*H-ce,U),B=Math.max((fe[re]-L)*H+ce,B)}}}}),q&&G>0&&!this.logarithmic&&(B-=j,H*=(j+Math.max(0,U)-Math.min(B,j))/j,[["min","userMin",U],["max","userMax",B]].forEach(ae=>{N(this.options[ae[0]],this[ae[1]])===void 0&&(this[ae[0]]+=ae[2]/H)})))}class K extends C{static compose(V,$,L){s.compose($,L),W(v,"Series.Bubble")&&E(V,"foundExtremes",Z)}animate(V){!V&&this.points.length<this.options.animationLimit&&this.points.forEach(function($){let{graphic:L,plotX:R=0,plotY:G=0}=$;L&&L.width&&(this.hasRendered||L.attr({x:R,y:G,width:1,height:1}),L.animate(this.markerAttribs($),this.options.animation))},this)}getRadii(){let V=this.zData,$=this.yData,L=[],R,G,U,B=this.chart.bubbleZExtremes,{minPxSize:H,maxPxSize:q}=this.getPxExtremes();if(!B){let ae,fe=Number.MAX_VALUE,re=-Number.MAX_VALUE;this.chart.series.forEach(ce=>{if(ce.bubblePadding&&ce.reserveSpace()){let ke=(ce.onPoint||ce).getZExtremes();ke&&(fe=Math.min(N(fe,ke.zMin),ke.zMin),re=Math.max(N(re,ke.zMax),ke.zMax),ae=!0)}}),ae?(B={zMin:fe,zMax:re},this.chart.bubbleZExtremes=B):B={zMin:0,zMax:0}}for(G=0,R=V.length;G<R;G++)U=V[G],L.push(this.getRadius(B.zMin,B.zMax,H,q,U,$&&$[G]));this.radii=L}getRadius(V,$,L,R,G,U){let B=this.options,H=B.sizeBy!=="width",q=B.zThreshold,ae=$-V,fe=.5;if(U===null||G===null)return null;if(T(G)){if(B.sizeByAbsoluteValue&&(G=Math.abs(G-q),$=ae=Math.max($-q,Math.abs(V-q)),V=0),G<V)return L/2-1;ae>0&&(fe=(G-V)/ae)}return H&&fe>=0&&(fe=Math.sqrt(fe)),Math.ceil(L+fe*(R-L))/2}hasData(){return!!this.processedXData.length}markerAttribs(V,$){let L=super.markerAttribs(V,$),{height:R=0,width:G=0}=L;return this.chart.inverted?D(L,{x:(V.plotX||0)-G/2,y:(V.plotY||0)-R/2}):L}pointAttribs(V,$){let L=this.options.marker.fillOpacity,R=_.prototype.pointAttribs.call(this,V,$);return L!==1&&(R.fill=m(R.fill).setOpacity(L).get("rgba")),R}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:V,options:$,radii:L}=this,{minPxSize:R}=this.getPxExtremes(),G=V.length;for(;G--;){let U=V[G],B=L?L[G]:0;this.zoneAxis==="z"&&(U.negative=(U.z||0)<($.zThreshold||0)),T(B)&&B>=R/2?(U.marker=D(U.marker,{radius:B,width:2*B,height:2*B}),U.dlBox={x:U.plotX-B,y:U.plotY-B,width:2*B,height:2*B}):(U.shapeArgs=U.plotY=U.dlBox=void 0,U.isInside=!1)}}getPxExtremes(){let V=Math.min(this.chart.plotWidth,this.chart.plotHeight),$=G=>{let U;return typeof G=="string"&&(U=/%$/.test(G),G=parseInt(G,10)),U?V*G/100:G},L=$(N(this.options.minSize,8)),R=Math.max($(N(this.options.maxSize,"20%")),L);return{minPxSize:L,maxPxSize:R}}getZExtremes(){let V=this.options,$=(this.zData||[]).filter(T);if($.length){let L=N(V.zMin,A(x($),V.displayNegative===!1?V.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),R=N(V.zMax,S($));if(T(L)&&T(R))return{zMin:L,zMax:R}}}}return K.defaultOptions=k(C.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:j}=this.series.chart,{z:V}=this.point;return T(V)?j(V,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),D(K.prototype,{alignDataLabel:b.alignDataLabel,applyZones:y,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:l,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),E(K,"updatedData",j=>{delete j.target.chart.bubbleZExtremes}),E(K,"remove",j=>{delete j.target.chart.bubbleZExtremes}),p.registerSeriesType("bubble",K),K}),n(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{seriesTypes:{column:{prototype:{pointClass:{prototype:u}}},arearange:{prototype:{pointClass:r}}}}=s,{extend:p,isNumber:f}=l;class m extends r{isValid(){return f(this.low)}}return p(m.prototype,{setState:u.setState}),m}),n(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{seriesTypes:{arearange:f,column:m,column:{prototype:v}}}=u,{addEvent:y,clamp:_,extend:b,isNumber:C,merge:E,pick:S}=r;class x extends f{setOptions(){return E(!0,arguments[0],{stacking:void 0}),f.prototype.setOptions.apply(this,arguments)}translate(){return v.translate.apply(this)}pointAttribs(){return v.pointAttribs.apply(this,arguments)}translate3dPoints(){return v.translate3dPoints.apply(this,arguments)}translate3dShapes(){return v.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let D,T,k,N,W=this.yAxis,Z=this.xAxis,K=Z.startAngleRad,j=this.chart,V=this.xAxis.isRadial,$=Math.max(j.chartWidth,j.chartHeight)+999;this.points.forEach(L=>{let R=L.shapeArgs||{},G=this.options.minPointLength,U=L.plotY,B=W.translate(L.high,0,1,0,1);if(C(B)&&C(U))if(L.plotHigh=_(B,-$,$),L.plotLow=_(U,-$,$),N=L.plotHigh,Math.abs(D=S(L.rectPlotY,L.plotY)-L.plotHigh)<G?(T=G-D,D+=T,N-=T/2):D<0&&(D*=-1,N-=D),V&&this.polar)k=L.barX+K,L.shapeType="arc",L.shapeArgs=this.polar.arc(N+D,N,k,k+L.pointWidth);else{R.height=D,R.y=N;let{x:H=0,width:q=0}=R;L.shapeArgs=E(L.shapeArgs,this.crispCol(H,N,q,D)),L.tooltipPos=j.inverted?[W.len+W.pos-j.plotLeft-N-D/2,Z.len+Z.pos-j.plotTop-H-q/2,D]:[Z.left-j.plotLeft+H+q/2,W.pos-j.plotTop+N+D/2,D]}})}}return x.defaultOptions=E(m.defaultOptions,f.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),y(x,"afterColumnTranslate",function(){x.prototype.afterColumnTranslate.apply(this)},{order:5}),b(x.prototype,{directTouch:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:v.adjustForMissingColumns,animate:v.animate,crispCol:v.crispCol,drawGraph:p,drawPoints:v.drawPoints,getSymbol:p,drawTracker:v.drawTracker,getColumnMetrics:v.getColumnMetrics}),u.registerSeriesType("columnrange",x),x}),n(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),n(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:r}=l.seriesTypes,{clamp:p,merge:f,pick:m}=u;class v extends r{translate(){let _=this.chart,b=this.options,C=this.dense=this.closestPointRange*this.xAxis.transA<2,E=this.borderWidth=m(b.borderWidth,C?0:1),S=this.yAxis,x=b.threshold,A=m(b.minPointLength,5),D=this.getColumnMetrics(),T=D.width,k=this.pointXOffset=D.offset,N=this.translatedThreshold=S.getThreshold(x),W=this.barW=Math.max(T,1+2*E);for(let Z of(_.inverted&&(N-=.5),b.pointPadding&&(W=Math.ceil(W)),super.translate(),this.points)){let K=m(Z.yBottom,N),j=999+Math.abs(K),V=p(Z.plotY,-j,S.len+j),$=W/2,L=Math.min(V,K),R=Math.max(V,K)-L,G=Z.plotX+k,U,B,H,q,ae,fe,re,ce,ke,ve,Ee;b.centerInCategory&&(G=this.adjustForMissingColumns(G,T,Z,D)),Z.barX=G,Z.pointWidth=T,Z.tooltipPos=_.inverted?[S.len+S.pos-_.plotLeft-V,this.xAxis.len-G-$,R]:[G+$,V+S.pos-_.plotTop,R],U=x+(Z.total||Z.y),b.stacking==="percent"&&(U=x+(Z.y<0)?-100:100);let Q=S.toPixels(U,!0);H=(B=_.plotHeight-Q-(_.plotHeight-N))?$*(L-Q)/B:0,q=B?$*(L+R-Q)/B:0,fe=G-H+$,re=G+H+$,ce=G+q+$,ke=G-q+$,ve=L-A,Ee=L+R,Z.y<0&&(ve=L,Ee=L+R+A),_.inverted&&(ae=S.width-L,B=Q-(S.width-N),H=$*(Q-ae)/B,q=$*(Q-(ae-R))/B,re=(fe=G+$+H)-2*H,ce=G-q+$,ke=G+q+$,ve=L,Ee=L+R-A,Z.y<0&&(Ee=L+R+A)),Z.shapeType="path",Z.shapeArgs={x:fe,y:ve,width:re-fe,height:R,d:[["M",fe,ve],["L",re,ve],["L",ce,Ee],["L",ke,Ee],["Z"]]}}}}return v.defaultOptions=f(r.defaultOptions,s),l.registerSeriesType("columnpyramid",v),v}),n(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),n(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{arearange:f}=r.seriesTypes,{addEvent:m,merge:v,extend:y}=p;class _ extends s{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||l.prototype.getColumnMetrics.call(this)}drawDataLabels(){let C=this.pointValKey;if(f)for(let E of(f.prototype.drawDataLabels.call(this),this.points))E.y=E[C]}toYData(C){return[C.low,C.high]}}return _.defaultOptions=v(s.defaultOptions,u),m(_,"afterTranslate",function(){for(let b of this.points)b.plotLow=b.plotY},{order:0}),y(_.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),r.registerSeriesType("errorbar",_),_}),n(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(s){let{series:{prototype:{pointClass:l}}}=s;return class extends l{setState(u){this.state=u}}}),n(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{series:f,seriesTypes:{column:m}}=u,{clamp:v,isNumber:y,extend:_,merge:b,pick:C,pInt:E,defined:S}=r;class x extends f{translate(){let D=this.yAxis,T=this.options,k=D.center;this.generatePoints(),this.points.forEach(N=>{let W=b(T.dial,N.dial),Z=E(W.radius)*k[2]/200,K=E(W.baseLength)*Z/100,j=E(W.rearLength)*Z/100,V=W.baseWidth,$=W.topWidth,L=T.overshoot,R=D.startAngleRad+D.translate(N.y,void 0,void 0,void 0,!0);(y(L)||T.wrap===!1)&&(L=y(L)?L/180*Math.PI:0,R=v(R,D.startAngleRad-L,D.endAngleRad+L)),R=180*R/Math.PI,N.shapeType="path";let G=W.path||[["M",-j,-V/2],["L",K,-V/2],["L",Z,-$/2],["L",Z,$/2],["L",K,V/2],["L",-j,V/2],["Z"]];N.shapeArgs={d:G,translateX:k[0],translateY:k[1],rotation:R},N.plotX=k[0],N.plotY=k[1],S(N.y)&&D.max-D.min&&(N.percentage=(N.y-D.min)/(D.max-D.min)*100)})}drawPoints(){let D=this,T=D.chart,k=D.yAxis.center,N=D.pivot,W=D.options,Z=W.pivot,K=T.renderer;D.points.forEach(j=>{let V=j.graphic,$=j.shapeArgs,L=$.d,R=b(W.dial,j.dial);V?(V.animate($),$.d=L):j.graphic=K[j.shapeType]($).addClass("highcharts-dial").add(D.group),T.styledMode||j.graphic[V?"animate":"attr"]({stroke:R.borderColor,"stroke-width":R.borderWidth,fill:R.backgroundColor})}),N?N.animate({translateX:k[0],translateY:k[1]}):Z&&(D.pivot=K.circle(0,0,Z.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(k[0],k[1]).add(D.group),T.styledMode||D.pivot.attr({fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":Z.borderWidth}))}animate(D){let T=this;D||T.points.forEach(k=>{let N=k.graphic;N&&(N.attr({rotation:180*T.yAxis.startAngleRad/Math.PI}),N.animate({rotation:k.shapeArgs.rotation},T.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),f.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(D,T){f.prototype.setData.call(this,D,!1),this.processData(),this.generatePoints(),C(T,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return x.defaultOptions=b(f.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),_(x.prototype,{angular:!0,directTouch:!0,drawGraph:p,drawTracker:m.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"]}),u.registerSeriesType("gauge",x),x}),n(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{composed:u}=s,{addEvent:r,pushUnique:p}=l;function f(){let m,v,y,_=this;_.container&&(m=r(_.container,"mousedown",b=>{let C=_.hoverPoint;C&&C.series&&C.series.hasDraggableNodes&&C.series.options.draggable&&(C.series.onMouseDown(C,b),v=r(_.container,"mousemove",E=>C&&C.series&&C.series.onMouseMove(C,E)),y=r(_.container.ownerDocument,"mouseup",E=>(v(),y(),C&&C.series&&C.series.onMouseUp(C,E))))})),r(_,"destroy",function(){m()})}return{compose:function(m){p(u,"DragNodes")&&r(m,"load",f)},onMouseDown:function(m,v){var _;let y=((_=this.chart.pointer)==null?void 0:_.normalize(v))||v;m.fixedPosition={chartX:y.chartX,chartY:y.chartY,plotX:m.plotX,plotY:m.plotY},m.inDragMode=!0},onMouseMove:function(m,v){var y;if(m.fixedPosition&&m.inDragMode){let _,b,C=this.chart,E=((y=C.pointer)==null?void 0:y.normalize(v))||v,S=m.fixedPosition.chartX-E.chartX,x=m.fixedPosition.chartY-E.chartY,A=C.graphLayoutsLookup;(Math.abs(S)>5||Math.abs(x)>5)&&(_=m.fixedPosition.plotX-S,b=m.fixedPosition.plotY-x,C.isInsidePlot(_,b)&&(m.plotX=_,m.plotY=b,m.hasDragged=!0,this.redrawHalo(m),A.forEach(D=>{D.restartSimulation()})))}},onMouseUp:function(m){m.fixedPosition&&(m.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),m.inDragMode=m.hasDragged=!1,this.options.fixedDraggable||delete m.fixedPosition)},redrawHalo:function(m){m&&this.halo&&this.halo.attr({d:m.haloPath(this.options.states.hover.halo.size)})}}}),n(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:r}=s,{composed:p}=l,{addEvent:f,pushUnique:m}=u;function v(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(C=>{C.updateSimulation()}),this.redraw())}function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(C=>{C.updateSimulation(!1)}),this.redraw())}function _(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(C=>{C.stop()})}function b(){let C,E=!1,S=x=>{x.maxIterations--&&isFinite(x.temperature)&&!x.isStable()&&!x.enableSimulation&&(x.beforeStep&&x.beforeStep(),x.step(),C=!1,E=!0)};if(this.graphLayoutsLookup){for(r(!1,this),this.graphLayoutsLookup.forEach(x=>x.start());!C;)C=!0,this.graphLayoutsLookup.forEach(S);E&&this.series.forEach(x=>{x&&x.layout&&x.render()})}}return{compose:function(C){m(p,"GraphLayout")&&(f(C,"afterPrint",v),f(C,"beforePrint",y),f(C,"predraw",_),f(C,"render",b))},integrations:{},layouts:{}}}),n(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l,u){let{seriesTypes:{bubble:{prototype:{pointClass:r}}}}=u;return class extends r{destroy(){var p;return(p=this.series)!=null&&p.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),l.prototype.destroy.apply(this,arguments)}firePointEvent(){let p=this.series.options;if(this.isParentNode&&p.parentNode){let f=p.allowPointSelect;p.allowPointSelect=p.parentNode.allowPointSelect,l.prototype.firePointEvent.apply(this,arguments),p.allowPointSelect=f}else l.prototype.firePointEvent.apply(this,arguments)}select(){let p=this.series.chart;this.isParentNode?(p.getSelectedPoints=p.getSelectedParentNodes,l.prototype.select.apply(this,arguments),p.getSelectedPoints=s.prototype.getSelectedPoints):l.prototype.select.apply(this,arguments)}}}),n(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(s){let{isNumber:l}=s;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:u}=this.series.chart,{value:r}=this.point;return l(r)?u(r,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),n(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(s,l,u){let r=s.getMass(),p=-u.x*l*this.diffTemperature,f=-u.y*l*this.diffTemperature;s.fromNode.fixedPosition||(s.fromNode.plotX-=p*r.fromNode/s.fromNode.degree,s.fromNode.plotY-=f*r.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.plotX+=p*r.toNode/s.toNode.degree,s.toNode.plotY+=f*r.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return(l-s)/s},barycenter:function(){let s=this.options.gravitationalConstant||0,l=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*s,u=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*s;this.nodes.forEach(function(r){r.fixedPosition||(r.plotX-=l/r.mass/r.degree,r.plotY-=u/r.mass/r.degree)})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.5)},integrate:function(s,l){let u=-s.options.friction,r=s.options.maxSpeed,p=l.prevX,f=l.prevY,m=(l.plotX+l.dispX-p)*u,v=(l.plotY+l.dispY-f)*u,y=Math.abs,_=y(m)/(m||1),b=y(v)/(v||1),C=_*Math.min(r,Math.abs(m)),E=b*Math.min(r,Math.abs(v));l.prevX=l.plotX+l.dispX,l.prevY=l.plotY+l.dispY,l.plotX+=C,l.plotY+=E,l.temperature=s.vectorLength({x:C,y:E})},repulsive:function(s,l,u){let r=l*this.diffTemperature/s.mass/s.degree;s.fixedPosition||(s.plotX+=u.x*r,s.plotY+=u.y*r)},repulsiveForceFunction:function(s,l){return(l-s)/s*(l>s?1:0)}}}),n(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l){let{noop:u}=s;return{barycenter:function(){let r,p,f=this.options.gravitationalConstant,m=this.box,v=this.nodes;for(let y of v)this.options.splitSeries&&!y.isParentNode?(r=y.series.parentNode.plotX,p=y.series.parentNode.plotY):(r=m.width/2,p=m.height/2),y.fixedPosition||(y.plotX-=(y.plotX-r)*f/(y.mass*Math.sqrt(v.length)),y.plotY-=(y.plotY-p)*f/(y.mass*Math.sqrt(v.length)))},getK:u,integrate:l.integrate,repulsive:function(r,p,f,m){let v=p*this.diffTemperature/r.mass/r.degree,y=f.x*v,_=f.y*v;r.fixedPosition||(r.plotX+=y,r.plotY+=_),m.fixedPosition||(m.plotX-=y,m.plotY-=_)},repulsiveForceFunction:function(r,p,f,m){return Math.min(r,(f.marker.radius+m.marker.radius)/2)}}}),n(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(s,l,u,r){let p=s.getMass(),f=u.x/r*l,m=u.y/r*l;s.fromNode.fixedPosition||(s.fromNode.dispX-=f*p.fromNode/s.fromNode.degree,s.fromNode.dispY-=m*p.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.dispX+=f*p.toNode/s.toNode.degree,s.toNode.dispY+=m*p.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return s*s/l},barycenter:function(){let s=this.options.gravitationalConstant,l=this.barycenter.xFactor,u=this.barycenter.yFactor;this.nodes.forEach(function(r){if(!r.fixedPosition){let p=r.getDegree(),f=p*(1+p/2);r.dispX+=(l-r.plotX)*s*f/r.degree,r.dispY+=(u-r.plotY)*s*f/r.degree}})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.3)},integrate:function(s,l){l.dispX+=l.dispX*s.options.friction,l.dispY+=l.dispY*s.options.friction;let u=l.temperature=s.vectorLength({x:l.dispX,y:l.dispY});u!==0&&(l.plotX+=l.dispX/u*Math.min(Math.abs(l.dispX),s.temperature),l.plotY+=l.dispY/u*Math.min(Math.abs(l.dispY),s.temperature))},repulsive:function(s,l,u,r){s.dispX+=u.x/r*l/s.degree,s.dispY+=u.y/r*l/s.degree},repulsiveForceFunction:function(s,l){return l*l/s}}}),n(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class s{constructor(u){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=u,this.boxSize=Math.min(u.width,u.height)}divideBox(){let u=this.box.width/2,r=this.box.height/2;this.nodes[0]=new s({left:this.box.left,top:this.box.top,width:u,height:r}),this.nodes[1]=new s({left:this.box.left+u,top:this.box.top,width:u,height:r}),this.nodes[2]=new s({left:this.box.left+u,top:this.box.top+r,width:u,height:r}),this.nodes[3]=new s({left:this.box.left,top:this.box.top+r,width:u,height:r})}getBoxPosition(u){let r=u.plotX<this.box.left+this.box.width/2,p=u.plotY<this.box.top+this.box.height/2;return r?p?0:3:p?1:2}insert(u,r){let p;this.isInternal?this.nodes[this.getBoxPosition(u)].insert(u,r-1):(this.isEmpty=!1,this.body?r?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,r-1),this.body=!0),this.nodes[this.getBoxPosition(u)].insert(u,r-1)):((p=new s({top:u.plotX||NaN,left:u.plotY||NaN,width:.1,height:.1})).body=u,p.isInternal=!1,this.nodes.push(p)):(this.isInternal=!1,this.body=u))}updateMassAndCenter(){let u=0,r=0,p=0;if(this.isInternal){for(let f of this.nodes)f.isEmpty||(u+=f.mass,r+=f.plotX*f.mass,p+=f.plotY*f.mass);r/=u,p/=u}else this.body&&(u=this.body.mass,r=this.body.plotX,p=this.body.plotY);this.mass=u,this.plotX=r,this.plotY=p}}return s}),n(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(s){return class{constructor(l,u,r,p){this.box={left:l,top:u,width:r,height:p},this.maxDepth=25,this.root=new s(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(l){l.updateMassAndCenter()})}insertNodes(l){for(let u of l)this.root.insert(u,this.maxDepth)}visitNodeRecursive(l,u,r){let p;if(l||(l=this.root),l===this.root&&u&&(p=u(l)),p!==!1){for(let f of l.nodes){if(f.isInternal){if(u&&(p=u(f)),p===!1)continue;this.visitNodeRecursive(f,u,r)}else f.body&&u&&u(f.body);r&&r(f)}l===this.root&&r&&r(l)}}}}),n(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l,u,r,p,f){let{win:m}=l,{clamp:v,defined:y,isFunction:_,fireEvent:b,pick:C}=p;class E{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(x){u.compose(x),u.integrations.euler=s,u.integrations.verlet=f,u.layouts["reingold-fruchterman"]=E}init(x){this.options=x,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=u.integrations[x.integration],this.enableSimulation=x.enableSimulation,this.attractiveForce=C(x.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=C(x.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=x.approximation}updateSimulation(x){this.enableSimulation=C(x,this.options.enableSimulation)}start(){let x=this.series,A=this.options;this.currentStep=0,this.forces=x[0]&&x[0].forces||[],this.chart=x[0]&&x[0].chart,this.initialRendering&&(this.initPositions(),x.forEach(function(D){D.finishedAnimating=!0,D.render()})),this.setK(),this.resetSimulation(A),this.enableSimulation&&this.step()}step(){let x=this.series;for(let A of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[A+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let A of x)A.chart&&A.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&m.cancelAnimationFrame(this.simulation),this.simulation=m.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(A=>{b(A,"afterSimulation")}))}}stop(){this.simulation&&m.cancelAnimationFrame(this.simulation)}setArea(x,A,D,T){this.box={left:x,top:A,width:D,height:T}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(x,A){for(let D of x)A.indexOf(D)===-1&&A.push(D)}removeElementFromCollection(x,A){let D=A.indexOf(x);D!==-1&&A.splice(D,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(x){this.maxIterations=C(x,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(x){this.initialRendering=x}createQuadTree(){this.quadTree=new r(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let x=this.options.initialPositions;if(_(x))for(let A of(x.call(this),this.nodes))y(A.prevX)||(A.prevX=A.plotX),y(A.prevY)||(A.prevY=A.plotY),A.dispX=0,A.dispY=0;else x==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let x,A=this.box,D=this.nodes,T=2*Math.PI/(D.length+1),k=D.filter(function(j){return j.linksTo.length===0}),N={},W=this.options.initialPositionRadius,Z=j=>{for(let V of j.linksFrom||[])N[V.toNode.id]||(N[V.toNode.id]=!0,K.push(V.toNode),Z(V.toNode))},K=[];for(let j of k)K.push(j),Z(j);if(K.length)for(let j of D)K.indexOf(j)===-1&&K.push(j);else K=D;for(let j=0,V=K.length;j<V;++j)(x=K[j]).plotX=x.prevX=C(x.plotX,A.width/2+W*Math.cos(j*T)),x.plotY=x.prevY=C(x.plotY,A.height/2+W*Math.sin(j*T)),x.dispX=0,x.dispY=0}setRandomPositions(){let x,A=this.box,D=this.nodes,T=D.length+1,k=N=>{let W=N*N/Math.PI;return W-Math.floor(W)};for(let N=0,W=D.length;N<W;++N)(x=D[N]).plotX=x.prevX=C(x.plotX,A.width*k(N)),x.plotY=x.prevY=C(x.plotY,A.height*k(T+N)),x.dispX=0,x.dispY=0}force(x,...A){this.integration[x].apply(this,A)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let x=0,A=0,D=0;for(let T of this.nodes)A+=T.plotX*T.mass,D+=T.plotY*T.mass,x+=T.mass;return this.barycenter={x:A,y:D,xFactor:A/x,yFactor:D/x},this.barycenter}barnesHutApproximation(x,A){let D,T,k=this.getDistXY(x,A),N=this.vectorLength(k);return x!==A&&N!==0&&(A.isInternal?A.boxSize/N<this.options.theta&&N!==0?(T=this.repulsiveForce(N,this.k),this.force("repulsive",x,T*A.mass,k,N),D=!1):D=!0:(T=this.repulsiveForce(N,this.k),this.force("repulsive",x,T*A.mass,k,N))),D}repulsiveForces(){if(this.approximation==="barnes-hut")for(let x of this.nodes)this.quadTree.visitNodeRecursive(null,A=>this.barnesHutApproximation(x,A));else{let x,A,D;for(let T of this.nodes)for(let k of this.nodes)T===k||T.fixedPosition||(D=this.getDistXY(T,k),(A=this.vectorLength(D))!==0&&(x=this.repulsiveForce(A,this.k),this.force("repulsive",T,x*k.mass,D,A)))}}attractiveForces(){let x,A,D;for(let T of this.links)T.fromNode&&T.toNode&&(x=this.getDistXY(T.fromNode,T.toNode),(A=this.vectorLength(x))!==0&&(D=this.attractiveForce(A,this.k),this.force("attractive",T,D,x,A)))}applyLimits(){for(let x of this.nodes)x.fixedPosition||(this.integration.integrate(this,x),this.applyLimitBox(x,this.box),x.dispX=0,x.dispY=0)}applyLimitBox(x,A){let D=x.radius;x.plotX=v(x.plotX,A.left+D,A.width-D),x.plotY=v(x.plotY,A.top+D,A.height-D)}coolDown(x,A,D){return x-A*D}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let x=0;for(let A of this.nodes)x+=A.temperature;return x}vectorLength(x){return Math.sqrt(x.x*x.x+x.y*x.y)}getDistR(x,A){let D=this.getDistXY(x,A);return this.vectorLength(D)}getDistXY(x,A){let D=x.plotX-A.plotX,T=x.plotY-A.plotY;return{x:D,y:T,absX:Math.abs(D),absY:Math.abs(T)}}}return E}),n(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{addEvent:p,pick:f}=r;function m(){let _=this.series,b=[];return _.forEach(C=>{C.parentNode&&C.parentNode.selected&&b.push(C.parentNode)}),b}function v(){this.allDataPoints&&delete this.allDataPoints}class y extends u{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(b){u.compose(b),s.integrations.packedbubble=l,s.layouts.packedbubble=y;let C=b.prototype;C.getSelectedParentNodes||(p(b,"beforeRedraw",v),C.getSelectedParentNodes=m)}beforeStep(){this.options.marker&&this.series.forEach(b=>{b&&b.calculateParentRadius()})}isStable(){let b=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&b<1e-5||this.temperature<=0}setCircularPositions(){let b=this.box,C=this.nodes,E=2*Math.PI/(C.length+1),S=this.options.initialPositionRadius,x,A,D=0;for(let T of C)this.options.splitSeries&&!T.isParentNode?(x=T.series.parentNode.plotX,A=T.series.parentNode.plotY):(x=b.width/2,A=b.height/2),T.plotX=T.prevX=f(T.plotX,x+S*Math.cos(T.index||D*E)),T.plotY=T.prevY=f(T.plotY,A+S*Math.sin(T.index||D*E)),T.dispX=0,T.dispY=0,D++}repulsiveForces(){let b,C,E,S=this,x=S.options.bubblePadding,A=S.nodes;A.forEach(D=>{D.degree=D.mass,D.neighbours=0,A.forEach(T=>{b=0,D!==T&&!D.fixedPosition&&(S.options.seriesInteraction||D.series===T.series)&&(E=S.getDistXY(D,T),(C=S.vectorLength(E)-(D.marker.radius+T.marker.radius+x))<0&&(D.degree+=.01,D.neighbours++,b=S.repulsiveForce(-C/Math.sqrt(D.neighbours),S.k,D,T)),S.force("repulsive",D,b*T.mass,E,T,C))})})}applyLimitBox(b,C){let E,S;this.options.splitSeries&&!b.isParentNode&&this.options.parentNodeLimit&&(E=this.getDistXY(b,b.series.parentNode),(S=b.series.parentNodeRadius-b.marker.radius-this.vectorLength(E))<0&&S>-2*b.marker.radius&&(b.plotX-=.01*E.x,b.plotY-=.01*E.y)),super.applyLimitBox(b,C)}}return s.layouts.packedbubble=y,y}),n(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(s,l){let{merge:u,syncTimeout:r}=s,{animObject:p}=l;return{initDataLabels:function(){let f=this.options.dataLabels;if(!this.dataLabelsGroup){let m=this.initDataLabelsGroup();return!this.chart.styledMode&&(f!=null&&f.style)&&m.css(f.style),m.attr({opacity:0}),this.visible&&m.show(),m}return this.dataLabelsGroup.attr(u({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var m;let f=this.options.dataLabels;f!=null&&f.defer&&((m=this.options.layoutAlgorithm)!=null&&m.enableSimulation)?r(()=>{this.deferDataLabels=!1},f?p(f.animation).defer:0):this.deferDataLabels=!1}}}),n(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{deg2rad:u}=s,{addEvent:r,merge:p,uniqueKey:f,defined:m,extend:v}=l;function y(C,E){E=p(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},E);let S=this.renderer.url,x=this.text||this,A=x.textPath,{attributes:D,enabled:T}=E;if(C=C||A&&A.path,A&&A.undo(),C&&T){let k=r(x,"afterModifyTree",N=>{if(C&&T){let W=C.attr("id");W||C.attr("id",W=f());let Z={x:0,y:0};m(D.dx)&&(Z.dx=D.dx,delete D.dx),m(D.dy)&&(Z.dy=D.dy,delete D.dy),x.attr(Z),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let K=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:v(D,{"text-anchor":D.textAnchor,href:`${S}#${W}`}),children:K}}});x.textPath={path:C,undo:k}}else x.attr({dx:0,dy:0}),delete x.textPath;return this.added&&(x.textCache="",this.renderer.buildText(x)),this}function _(C){var x;let E=C.bBox,S=(x=this.element)==null?void 0:x.querySelector("textPath");if(S){let A=[],{b:D,h:T}=this.renderer.fontMetrics(this.element),k=T-D,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),W=S.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Z=W.length,K=(j,V)=>{let{x:$,y:L}=V,R=(S.getRotationOfChar(j)-90)*u,G=Math.cos(R),U=Math.sin(R);return[[$-k*G,L-k*U],[$+D*G,L+D*U]]};for(let j=0,V=0;V<Z;V++){let $=W[V].length;for(let L=0;L<$;L+=5)try{let R=j+L+V,[G,U]=K(R,S.getStartPositionOfChar(R));L===0?(A.push(U),A.push(G)):(V===0&&A.unshift(U),V===Z-1&&A.push(G))}catch{break}j+=$-1;try{let L=j+V,R=S.getEndPositionOfChar(L),[G,U]=K(L,R);A.unshift(U),A.unshift(G)}catch{break}}A.length&&A.push(A[0].slice()),E.polygon=A}return E}function b(C){var A;let E=C.labelOptions,S=C.point,x=E[S.formatPrefix+"TextPath"]||E.textPath;x&&!E.useHTML&&(this.setTextPath(((A=S.getDataLabelPath)==null?void 0:A.call(S,this))||S.graphic,x),S.dataLabelPath&&!x.enabled&&(S.dataLabelPath=S.dataLabelPath.destroy()))}return{compose:function(C){r(C,"afterGetBBox",_),r(C,"beforeAddingDataLabel",b);let E=C.prototype;E.setTextPath||(E.setTextPath=y)}}}),n(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(s,l,u,r,p,f,m,v,y,_,b,C){let{parse:E}=s,{noop:S}=r,{series:{prototype:x},seriesTypes:{bubble:A}}=v,{initDataLabels:D,initDataLabelsDefer:T}=y,{addEvent:k,clamp:N,defined:W,extend:Z,fireEvent:K,isArray:j,isNumber:V,merge:$,pick:L}=_;C.compose(b);class R extends A{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(U,B,H){A.compose(U,B,H),l.compose(B),m.compose(B)}accumulateAllPoints(){let U,B=this.chart,H=[];for(let q of B.series)if(q.is("packedbubble")&&q.reserveSpace()){U=q.yData||[];for(let ae=0;ae<U.length;ae++)H.push([null,null,U[ae],q.index,ae,{id:ae,marker:{radius:0}}])}return H}addLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.options.chart,q=this.chart.graphLayoutsStorage,ae=this.chart.graphLayoutsLookup,fe;q||(this.chart.graphLayoutsStorage=q={},this.chart.graphLayoutsLookup=ae=[]),(fe=q[B])||(U.enableSimulation=W(H.forExport)?!H.forExport:U.enableSimulation,q[B]=fe=new u.layouts[B],fe.init(U),ae.splice(fe.index,0,fe)),this.layout=fe,this.points.forEach(re=>{re.mass=2,re.degree=1,re.collisionNmb=1}),fe.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),fe.addElementsToCollection([this],fe.series),fe.addElementsToCollection(this.points,fe.nodes)}addSeriesLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.graphLayoutsStorage,q=this.chart.graphLayoutsLookup,ae=$(U,U.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),fe=H[B+"-series"];fe||(H[B+"-series"]=fe=new u.layouts[B],fe.init(ae),q.splice(fe.index,0,fe)),this.parentNodeLayout=fe,this.createParentNodes()}calculateParentRadius(){let U=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,U?Math.max(Math.sqrt(Math.pow(U.width,2)+Math.pow(U.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let U=this.chart.series,B=this.options.zMin,H=this.options.zMax,q=1/0,ae=-1/0;return B&&H?[B,H]:(U.forEach(fe=>{fe.yData.forEach(re=>{W(re)&&(re>ae&&(ae=re),re<q&&(q=re))})}),[B=L(B,q),H=L(H,ae)])}checkOverlap(U,B){let H=U[0]-B[0],q=U[1]-B[1];return Math.sqrt(H*H+q*q)-Math.abs(U[2]+B[2])<-.001}createParentNodes(){let U=this.pointClass,B=this.chart,H=this.parentNodeLayout,q=this.layout.options,ae,fe=this.parentNode,re={radius:this.parentNodeRadius,lineColor:this.color,fillColor:E(this.color).brighten(.4).get()};q.parentNodeOptions&&(re=$(q.parentNodeOptions.marker||{},re)),this.parentNodeMass=0,this.points.forEach(ce=>{this.parentNodeMass+=Math.PI*Math.pow(ce.marker.radius,2)}),this.calculateParentRadius(),H.nodes.forEach(ce=>{ce.seriesIndex===this.index&&(ae=!0)}),H.setArea(0,0,B.plotWidth,B.plotHeight),ae||(fe||(fe=new U(this,{mass:this.parentNodeRadius/2,marker:re,dataLabels:{inside:!1},states:{normal:{marker:re},hover:{marker:re}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(fe.plotX=this.parentNode.plotX,fe.plotY=this.parentNode.plotY),this.parentNode=fe,H.addElementsToCollection([this],H.series),H.addElementsToCollection([fe],H.nodes))}deferLayout(){let U=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),U.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(U=>{U.removeElementFromCollection(this,U.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),x.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(x.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",x.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var ae;if(!this.layout||!this.layout.options.splitSeries)return;let U=this.chart,B=this.layout.options.parentNodeOptions.marker,H={fill:B.fillColor||E(this.color).brighten(.4).get(),opacity:B.fillOpacity,stroke:B.lineColor||this.color,"stroke-width":L(B.lineWidth,this.options.lineWidth)},q={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,U.seriesGroup),(ae=this.group)==null||ae.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&W(this.parentNode.plotX)&&W(this.parentNode.plotY)&&W(this.parentNodeRadius)&&(q=$({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},H),this.parentNode.graphic||(this.graph=this.parentNode.graphic=U.renderer.symbol(H.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(q))}drawTracker(){let U,B=this.parentNode;super.drawTracker(),B&&(U=j(B.dataLabels)?B.dataLabels:B.dataLabel?[B.dataLabel]:[],B.graphic&&(B.graphic.element.point=B),U.forEach(H=>{(H.div||H.element).point=B}))}getPointRadius(){let U,B,H,q,ae=this.chart,fe=ae.plotWidth,re=ae.plotHeight,ce=this.options,ke=ce.useSimulation,ve=Math.min(fe,re),Ee={},Q=[],ee=ae.allDataPoints||[],oe=ee.length;["minSize","maxSize"].forEach(J=>{let se=parseInt(ce[J],10),de=/%$/.test(ce[J]);Ee[J]=de?ve*se/100:se*Math.sqrt(oe)}),ae.minRadius=U=Ee.minSize/Math.sqrt(oe),ae.maxRadius=B=Ee.maxSize/Math.sqrt(oe);let we=ke?this.calculateZExtremes():[U,B];ee.forEach((J,se)=>{H=ke?N(J[2],we[0],we[1]):J[2],(q=this.getRadius(we[0],we[1],U,B,H))===0&&(q=null),ee[se][2]=q,Q.push(q)}),this.radii=Q}init(){return x.init.apply(this,arguments),T.call(this),this.eventsToUnbind.push(k(this,"updatedData",function(){this.chart.series.forEach(U=>{U.type===this.type&&(U.isDirty=!0)},this)})),this}onMouseUp(U){if(U.fixedPosition&&!U.removed){let B,H=this.layout,q=this.parentNodeLayout;q&&H.options.dragBetweenSeries&&q.nodes.forEach(ae=>{U&&U.marker&&ae!==U.series.parentNode&&(B=H.getDistXY(U,ae),H.vectorLength(B)-ae.marker.radius-U.marker.radius<0&&(ae.series.addPoint($(U.options,{plotX:U.plotX,plotY:U.plotY}),!1),H.removeElementFromCollection(U,H.nodes),U.remove()))}),l.onMouseUp.apply(this,arguments)}}placeBubbles(U){let B=this.checkOverlap,H=this.positionBubble,q=[],ae=1,fe=0,re=0,ce,ke=[],ve,Ee=U.sort((Q,ee)=>ee[2]-Q[2]);if(Ee.length){if(q.push([[0,0,Ee[0][2],Ee[0][3],Ee[0][4]]]),Ee.length>1)for(q.push([[0,0-Ee[1][2]-Ee[0][2],Ee[1][2],Ee[1][3],Ee[1][4]]]),ve=2;ve<Ee.length;ve++)Ee[ve][2]=Ee[ve][2]||1,B(ce=H(q[ae][fe],q[ae-1][re],Ee[ve]),q[ae][0])?(q.push([]),re=0,q[ae+1].push(H(q[ae][fe],q[ae][0],Ee[ve])),ae++,fe=0):ae>1&&q[ae-1][re+1]&&B(ce,q[ae-1][re+1])?(re++,q[ae].push(H(q[ae][fe],q[ae-1][re],Ee[ve])),fe++):(fe++,q[ae].push(ce));this.chart.stages=q,this.chart.rawPositions=[].concat.apply([],q),this.resizeRadius(),ke=this.chart.rawPositions}return ke}pointAttribs(U,B){let H=this.options,q=U&&U.isParentNode,ae=H.marker;q&&H.layoutAlgorithm&&H.layoutAlgorithm.parentNodeOptions&&(ae=H.layoutAlgorithm.parentNodeOptions.marker);let fe=ae.fillOpacity,re=x.pointAttribs.call(this,U,B);return fe!==1&&(re["fill-opacity"]=fe),re}positionBubble(U,B,H){let q=Math.asin,ae=Math.acos,fe=Math.pow,re=Math.abs,ce=(0,Math.sqrt)(fe(U[0]-B[0],2)+fe(U[1]-B[1],2)),ke=ae((fe(ce,2)+fe(H[2]+B[2],2)-fe(H[2]+U[2],2))/(2*(H[2]+B[2])*ce)),ve=q(re(U[0]-B[0])/ce),Ee=(U[1]-B[1]<0?0:Math.PI)+ke+ve*((U[0]-B[0])*(U[1]-B[1])<0?1:-1),Q=Math.cos(Ee),ee=Math.sin(Ee);return[B[0]+(B[2]+H[2])*ee,B[1]-(B[2]+H[2])*Q,H[2],H[3],H[4]]}render(){let U=[];x.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(B=>{j(B.dataLabels)&&B.dataLabels.forEach(H=>{U.push(H)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(U))}resizeRadius(){let U,B,H,q,ae,fe=this.chart,re=fe.rawPositions,ce=Math.min,ke=Math.max,ve=fe.plotLeft,Ee=fe.plotTop,Q=fe.plotHeight,ee=fe.plotWidth;for(let se of(U=H=Number.POSITIVE_INFINITY,B=q=Number.NEGATIVE_INFINITY,re))ae=se[2],U=ce(U,se[0]-ae),B=ke(B,se[0]+ae),H=ce(H,se[1]-ae),q=ke(q,se[1]+ae);let oe=[B-U,q-H],we=[(ee-ve)/oe[0],(Q-Ee)/oe[1]],J=ce.apply([],we);if(Math.abs(J-1)>1e-10){for(let se of re)se[2]*=J;this.placeBubbles(re)}else fe.diffY=Q/2+Ee-H-(q-H)/2,fe.diffX=ee/2+ve-U-(B-U)/2}seriesBox(){let U,B=this.chart,H=this.data,q=Math.max,ae=Math.min,fe=[B.plotLeft,B.plotLeft+B.plotWidth,B.plotTop,B.plotTop+B.plotHeight];return H.forEach(re=>{W(re.plotX)&&W(re.plotY)&&re.marker.radius&&(U=re.marker.radius,fe[0]=ae(fe[0],re.plotX-U),fe[1]=q(fe[1],re.plotX+U),fe[2]=ae(fe[2],re.plotY-U),fe[3]=q(fe[3],re.plotY+U))}),V(fe.width/fe.height)?fe:null}setVisible(){let U=this;x.setVisible.apply(U,arguments),U.parentNodeLayout&&U.graph?U.visible?(U.graph.show(),U.parentNode.dataLabel&&U.parentNode.dataLabel.show()):(U.graph.hide(),U.parentNodeLayout.removeElementFromCollection(U.parentNode,U.parentNodeLayout.nodes),U.parentNode.dataLabel&&U.parentNode.dataLabel.hide()):U.layout&&(U.visible?U.layout.addElementsToCollection(U.points,U.layout.nodes):U.points.forEach(B=>{U.layout.removeElementFromCollection(B,U.layout.nodes)}))}translate(){let U,B,H,q=this.chart,ae=this.data,fe=this.index,re=this.options.useSimulation;for(let ce of(this.processedXData=this.xData,this.generatePoints(),W(q.allDataPoints)||(q.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),re?H=q.allDataPoints:(H=this.placeBubbles(q.allDataPoints),this.options.draggable=!1),H))ce[3]===fe&&(U=ae[ce[4]],B=L(ce[2],void 0),re||(U.plotX=ce[0]-q.plotLeft+q.diffX,U.plotY=ce[1]-q.plotTop+q.diffY),V(B)&&(U.marker=Z(U.marker,{radius:B,width:2*B,height:2*B}),U.radius=B));re&&this.deferLayout(),K(this,"afterTranslate")}}return R.defaultOptions=$(A.defaultOptions,f),Z(R.prototype,{pointClass:p,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:D,alignDataLabel:x.alignDataLabel,indexateNodes:S,onMouseDown:l.onMouseDown,onMouseMove:l.onMouseMove,redrawHalo:l.redrawHalo,searchPoint:S}),v.registerSeriesType("packedbubble",R),R}),n(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),n(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=s,{area:f,line:m,scatter:v}=u.seriesTypes,{extend:y,merge:_}=r;class b extends v{getGraphPath(){let E=m.prototype.getGraphPath.call(this),S=E.length+1;for(;S--;)(S===E.length||E[S][0]==="M")&&S>0&&E.splice(S,0,["Z"]);return this.areaPath=E,E}drawGraph(){this.options.fillColor=this.color,f.prototype.drawGraph.call(this)}}return b.defaultOptions=_(v.defaultOptions,l),y(b.prototype,{type:"polygon",drawTracker:m.prototype.drawTracker,setStackedPoints:p}),u.registerSeriesType("polygon",b),b}),n(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),n(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{defaultOptions:f}=l,{composed:m,noop:v}=u,{addEvent:y,correctFloat:_,defined:b,extend:C,fireEvent:E,isObject:S,merge:x,pick:A,pushUnique:D,relativeLength:T,wrap:k}=r;return function(N){function W(){this.autoConnect=this.isCircular&&A(this.userMax,this.options.max)===void 0&&_(this.endAngleRad-this.startAngleRad)===_(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Z(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(se=>this.ticks[se]&&this.ticks[se].label).filter(se=>!!se)}}function K(){return v}function j(se,de,xe){let Ce=this.pane.center,Ne=se.value,Te,Ie,Ue;return this.isCircular?(b(Ne)?se.point&&(se.point.shapeArgs||{}).start&&(Ne=this.chart.inverted?this.translate(se.point.rectPlotY,!0):se.point.x):(Ie=se.chartX||0,Ue=se.chartY||0,Ne=this.translate(Math.atan2(Ue-xe,Ie-de)-this.startAngleRad,!0)),Ie=(Te=this.getPosition(Ne)).x,Ue=Te.y):(b(Ne)||(Ie=se.chartX,Ue=se.chartY),b(Ie)&&b(Ue)&&(xe=Ce[1]+this.chart.plotTop,Ne=this.translate(Math.min(Math.sqrt(Math.pow(Ie-de,2)+Math.pow(Ue-xe,2)),Ce[2]/2)-Ce[3]/2,!0))),[Ne,Ie||0,Ue||0]}function V(se,de,xe){let Ce=this.pane.center,Ne=this.chart,Te=this.left||0,Ie=this.top||0,Ue,qe=A(de,Ce[2]/2-this.offset),Ae;return xe===void 0&&(xe=this.horiz?0:this.center&&-this.center[3]/2),xe&&(qe+=xe),this.isCircular||de!==void 0?((Ae=this.chart.renderer.symbols.arc(Te+Ce[0],Ie+Ce[1],qe,qe,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Te+Ce[0]],Ae.yBounds=[Ie+Ce[1]-qe]):(Ue=this.postTranslate(this.angleRad,qe),Ae=[["M",this.center[0]+Ne.plotLeft,this.center[1]+Ne.plotTop],["L",Ue.x,Ue.y]]),Ae}function $(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function L(se,de,xe){let Ce=this.chart,Ne=Lt=>{if(typeof Lt=="string"){let ft=parseInt(Lt,10);return ge.test(Lt)&&(ft=ft*Ue/100),ft}return Lt},Te=this.center,Ie=this.startAngleRad,Ue=Te[2]/2,qe=Math.min(this.offset,0),Ae=this.left||0,ye=this.top||0,ge=/%$/,Me=this.isCircular,De,Pe,$e,Ke,tt,nt,ht=A(Ne(xe.outerRadius),Ue),gt=Ne(xe.innerRadius),Ct=A(Ne(xe.thickness),10);if(this.options.gridLineInterpolation==="polygon")nt=this.getPlotLinePath({value:se}).concat(this.getPlotLinePath({value:de,reverse:!0}));else{se=Math.max(se,this.min),de=Math.min(de,this.max);let Lt=this.translate(se),ft=this.translate(de);Me||(ht=Lt||0,gt=ft||0),xe.shape!=="circle"&&Me?(De=Ie+(Lt||0),Pe=Ie+(ft||0)):(De=-Math.PI/2,Pe=1.5*Math.PI,tt=!0),ht-=qe,Ct-=qe,nt=Ce.renderer.symbols.arc(Ae+Te[0],ye+Te[1],ht,ht,{start:Math.min(De,Pe),end:Math.max(De,Pe),innerR:A(gt,ht-Ct),open:tt,borderRadius:xe.borderRadius}),Me&&($e=(Pe+De)/2,Ke=Ae+Te[0]+Te[2]/2*Math.cos($e),nt.xBounds=$e>-Math.PI/2&&$e<Math.PI/2?[Ke,Ce.plotWidth]:[0,Ke],nt.yBounds=[ye+Te[1]+Te[2]/2*Math.sin($e)],nt.yBounds[0]+=$e>-Math.PI&&$e<0||$e>Math.PI?-10:10)}return nt}function R(se){let de=this.pane.center,xe=this.chart,Ce=xe.inverted,Ne=se.reverse,Te=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Ie=Te.innerRadius||"0%",Ue=Te.outerRadius||"100%",qe=de[0]+xe.plotLeft,Ae=de[1]+xe.plotTop,ye=this.height,ge=se.isCrosshair,Me=de[3]/2,De=se.value,Pe,$e,Ke,tt,nt,ht,gt,Ct,Lt,ft=this.getPosition(De),Et=ft.x,Tt=ft.y;if(ge&&(De=(Ct=this.getCrosshairPosition(se,qe,Ae))[0],Et=Ct[1],Tt=Ct[2]),this.isCircular)$e=Math.sqrt(Math.pow(Et-qe,2)+Math.pow(Tt-Ae,2)),Ke=typeof Ie=="string"?T(Ie,1):Ie/$e,tt=typeof Ue=="string"?T(Ue,1):Ue/$e,de&&Me&&(Ke<(Pe=Me/$e)&&(Ke=Pe),tt<Pe&&(tt=Pe)),Lt=[["M",qe+Ke*(Et-qe),Ae-Ke*(Ae-Tt)],["L",Et-(1-tt)*(Et-qe),Tt+(1-tt)*(Ae-Tt)]];else if((De=this.translate(De))&&(De<0||De>ye)&&(De=0),this.options.gridLineInterpolation==="circle")Lt=this.getLinePath(0,De,Me);else if(Lt=[],xe[Ce?"yAxis":"xAxis"].forEach(ai=>{ai.pane===this.pane&&(nt=ai)}),nt){gt=nt.tickPositions,nt.autoConnect&&(gt=gt.concat([gt[0]])),Ne&&(gt=gt.slice().reverse()),De&&(De+=Me);for(let ai=0;ai<gt.length;ai++)ht=nt.getPosition(gt[ai],De),Lt.push(ai?["L",ht.x,ht.y]:["M",ht.x,ht.y])}return Lt}function G(se,de){let xe=this.translate(se);return this.postTranslate(this.isCircular?xe:this.angleRad,A(this.isCircular?de:xe<0?0:xe,this.center[2]/2)-this.offset)}function U(){let se=this.center,de=this.chart,xe=this.options.title;return{x:de.plotLeft+se[0]+(xe.x||0),y:de.plotTop+se[1]-{high:.5,middle:.25,low:0}[xe.align]*se[2]+(xe.y||0)}}function B(se){se.beforeSetTickPositions=W,se.createLabelCollector=Z,se.getCrosshairPosition=j,se.getLinePath=V,se.getOffset=$,se.getPlotBandPath=L,se.getPlotLinePath=R,se.getPosition=G,se.getTitlePosition=U,se.postTranslate=Ee,se.setAxisSize=ee,se.setAxisTranslation=oe,se.setOptions=we}function H(){let se=this.chart,de=this.options,xe=se.angular&&this.isXAxis,Ce=this.pane,Ne=Ce&&Ce.options;if(!xe&&Ce&&(se.angular||se.polar)){let Te=2*Math.PI,Ie=(A(Ne.startAngle,0)-90)*Math.PI/180,Ue=(A(Ne.endAngle,A(Ne.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(de.angle||0)*Math.PI/180,this.startAngleRad=Ie,this.endAngleRad=Ue,this.offset=de.offset||0;let qe=(Ie%Te+Te)%Te,Ae=(Ue%Te+Te)%Te;qe>Math.PI&&(qe-=Te),Ae>Math.PI&&(Ae-=Te),this.normalizedStartAngleRad=qe,this.normalizedEndAngleRad=Ae}}function q(se){this.isRadial&&(se.align=void 0,se.preventDefault())}function ae(){if(this.chart&&this.chart.labelCollectors){let se=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;se>=0&&this.chart.labelCollectors.splice(se,1)}}function fe(se){let de,xe=this.chart,Ce=xe.angular,Ne=xe.polar,Te=this.isXAxis,Ie=this.coll,Ue=se.userOptions.pane||0,qe=this.pane=xe.pane&&xe.pane[Ue];if(Ie==="colorAxis"){this.isRadial=!1;return}Ce?(Ce&&Te?(this.isHidden=!0,this.createLabelCollector=K,this.getOffset=v,this.redraw=Q,this.render=Q,this.setScale=v,this.setCategories=v,this.setTitle=v):B(this),de=!Te):Ne&&(B(this),de=this.horiz),Ce||Ne?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&xe.labelCollectors.push(this.labelCollector)):this.isRadial=!1,qe&&de&&(qe.axis=this),this.isCircular=de}function re(){this.isRadial&&this.beforeSetTickPositions()}function ce(se){let de=this.label;if(!de)return;let xe=this.axis,Ce=de.getBBox(),Ne=xe.options.labels,Te=(xe.translate(this.pos)+xe.startAngleRad+Math.PI/2)/Math.PI*180%360,Ie=Math.round(Te),Ue=b(Ne.y)?0:-(.3*Ce.height),qe=Ne.y,Ae,ye=20,ge=Ne.align,Me="end",De=Ie<0?Ie+360:Ie,Pe=De,$e=0,Ke=0;xe.isRadial&&(Ae=xe.getPosition(this.pos,xe.center[2]/2+T(A(Ne.distance,-25),xe.center[2]/2,-xe.center[2]/2)),Ne.rotation==="auto"?de.attr({rotation:Te}):b(qe)||(qe=xe.chart.renderer.fontMetrics(de).b-Ce.height/2),b(ge)||(xe.isCircular?(Ce.width>xe.len*xe.tickInterval/(xe.max-xe.min)&&(ye=0),ge=Te>ye&&Te<180-ye?"left":Te>180+ye&&Te<360-ye?"right":"center"):ge="center",de.attr({align:ge})),ge==="auto"&&xe.tickPositions.length===2&&xe.isCircular&&(De>90&&De<180?De=180-De:De>270&&De<=360&&(De=540-De),Pe>180&&Pe<=360&&(Pe=360-Pe),(xe.pane.options.startAngle===Ie||xe.pane.options.startAngle===Ie+360||xe.pane.options.startAngle===Ie-360)&&(Me="start"),ge=Ie>=-90&&Ie<=90||Ie>=-360&&Ie<=-270||Ie>=270&&Ie<=360?Me==="start"?"right":"left":Me==="start"?"left":"right",Pe>70&&Pe<110&&(ge="center"),De<15||De>=180&&De<195?$e=.3*Ce.height:De>=15&&De<=35?$e=Me==="start"?0:.75*Ce.height:De>=195&&De<=215?$e=Me==="start"?.75*Ce.height:0:De>35&&De<=90?$e=Me==="start"?-(.25*Ce.height):Ce.height:De>215&&De<=270&&($e=Me==="start"?Ce.height:-(.25*Ce.height)),Pe<15?Ke=Me==="start"?-(.15*Ce.height):.15*Ce.height:Pe>165&&Pe<=180&&(Ke=Me==="start"?.15*Ce.height:-(.15*Ce.height)),de.attr({align:ge}),de.translate(Ke,$e+Ue)),se.pos.x=Ae.x+(Ne.x||0),se.pos.y=Ae.y+(qe||0))}function ke(se){this.axis.getPosition&&C(se.pos,this.axis.getPosition(this.pos))}function ve({options:se}){se.xAxis&&x(!0,N.radialDefaultOptions.circular,se.xAxis),se.yAxis&&x(!0,N.radialDefaultOptions.radialGauge,se.yAxis)}function Ee(se,de){let xe=this.chart,Ce=this.center;return se=this.startAngleRad+se,{x:xe.plotLeft+Ce[0]+Math.cos(se)*de,y:xe.plotTop+Ce[1]+Math.sin(se)*de}}function Q(){this.isDirty=!1}function ee(){let se,de;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),se=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(de=this.postTranslate(this.angleRad,se[3]/2),se[0]=de.x-this.chart.plotLeft,se[1]=de.y-this.chart.plotTop),this.len=this.width=this.height=(se[2]-se[3])*A(this.sector,1)/2)}function oe(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function we(se){let{coll:de}=this,{angular:xe,inverted:Ce,polar:Ne}=this.chart,Te={};xe?this.isXAxis||(Te=x(f.yAxis,N.radialDefaultOptions.radialGauge)):Ne&&(Te=this.horiz?x(f.xAxis,N.radialDefaultOptions.circular):x(de==="xAxis"?f.xAxis:f.yAxis,N.radialDefaultOptions.radial)),Ce&&de==="yAxis"&&(Te.stackLabels=S(f.yAxis,!0)?f.yAxis.stackLabels:{},Te.reversedStacks=!0);let Ie=this.options=x(Te,se);Ie.plotBands||(Ie.plotBands=[]),E(this,"afterSetOptions")}function J(se,de,xe,Ce,Ne,Te,Ie){let Ue,qe=this.axis;return qe.isRadial?["M",de,xe,"L",(Ue=qe.getPosition(this.pos,qe.center[2]/2+Ce)).x,Ue.y]:se.call(this,de,xe,Ce,Ne,Te,Ie)}N.radialDefaultOptions=x(s),N.compose=function(se,de){return D(m,"Axis.Radial")&&(y(se,"afterInit",H),y(se,"autoLabelAlign",q),y(se,"destroy",ae),y(se,"init",fe),y(se,"initialAxisTranslation",re),y(de,"afterGetLabelPosition",ce),y(de,"afterGetPosition",ke),y(u,"setOptions",ve),k(de.prototype,"getMarkPath",J)),se}}(p||(p={})),p}),n(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){let{animObject:m}=s,{composed:v}=l,{addEvent:y,defined:_,find:b,isNumber:C,merge:E,pick:S,pushUnique:x,relativeLength:A,splat:D,uniqueKey:T,wrap:k}=f;function N(){(this.pane||[]).forEach(ve=>{ve.render()})}function W(ve){let Ee=ve.args[0].xAxis,Q=ve.args[0].yAxis,ee=ve.args[0].chart;Ee&&Q&&(Q.gridLineInterpolation==="polygon"?(Ee.startOnTick=!0,Ee.endOnTick=!0):Ee.gridLineInterpolation==="polygon"&&ee.inverted&&(Q.startOnTick=!0,Q.endOnTick=!0))}function Z(){this.pane||(this.pane=[]),this.options.pane=D(this.options.pane),this.options.pane.forEach(ve=>{new r(ve,this)},this)}function K(ve){let Ee=ve.args.marker,Q=this.chart.xAxis[0],ee=this.chart.yAxis[0],oe=this.chart.inverted,we=oe?ee:Q,J=oe?Q:ee;if(this.chart.polar){ve.preventDefault();let se=(Ee.attr?Ee.attr("start"):Ee.start)-we.startAngleRad,de=Ee.attr?Ee.attr("r"):Ee.r,xe=(Ee.attr?Ee.attr("end"):Ee.end)-we.startAngleRad,Ce=Ee.attr?Ee.attr("innerR"):Ee.innerR;ve.result.x=se+we.pos,ve.result.width=xe-se,ve.result.y=J.len+J.pos-de,ve.result.height=de-Ce}}function j(ve){let Ee=this.chart;if(Ee.polar&&Ee.hoverPane&&Ee.hoverPane.axis){ve.preventDefault();let Q=Ee.hoverPane.center,ee=Ee.mouseDownX||0,oe=Ee.mouseDownY||0,we=ve.args.chartY,J=ve.args.chartX,se=2*Math.PI,de=Ee.hoverPane.axis.startAngleRad,xe=Ee.hoverPane.axis.endAngleRad,Ce=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],Ne={},Te="arc";if(Ne.x=Q[0]+Ee.plotLeft,Ne.y=Q[1]+Ee.plotTop,this.zoomHor){let Ie=de>0?xe-de:Math.abs(de)+Math.abs(xe),Ue=Math.atan2(oe-Ee.plotTop-Q[1],ee-Ee.plotLeft-Q[0])-de,qe=Math.atan2(we-Ee.plotTop-Q[1],J-Ee.plotLeft-Q[0])-de;Ne.r=Q[2]/2,Ne.innerR=Q[3]/2,Ue<=0&&(Ue+=se),qe<=0&&(qe+=se),qe<Ue&&(qe=[Ue,Ue=qe][0]),Ie<se&&de+qe>xe+(se-Ie)/2&&(qe=Ue,Ue=de<=0?de:0);let Ae=Ne.start=Math.max(Ue+de,de),ye=Ne.end=Math.min(qe+de,xe);if(Ce.options.gridLineInterpolation==="polygon"){let ge=Ee.hoverPane.axis,Me=Ae-ge.startAngleRad+ge.pos,De=Ce.getPlotLinePath({value:Ce.max}),Pe=ge.toValue(Me),$e=ge.toValue(Me+(ye-Ae));if(Pe<ge.getExtremes().min){let{min:Ke,max:tt}=ge.getExtremes();Pe=tt-(Ke-Pe)}if($e<ge.getExtremes().min){let{min:Ke,max:tt}=ge.getExtremes();$e=tt-(Ke-$e)}$e<Pe&&($e=[Pe,Pe=$e][0]),(De=R(De,Pe,$e,ge)).push(["L",Q[0]+Ee.plotLeft,Ee.plotTop+Q[1]]),Ne.d=De,Te="path"}}if(this.zoomVert){let Ie=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],Ue=Math.sqrt(Math.pow(ee-Ee.plotLeft-Q[0],2)+Math.pow(oe-Ee.plotTop-Q[1],2)),qe=Math.sqrt(Math.pow(J-Ee.plotLeft-Q[0],2)+Math.pow(we-Ee.plotTop-Q[1],2));if(qe<Ue&&(Ue=[qe,qe=Ue][0]),qe>Q[2]/2&&(qe=Q[2]/2),Ue<Q[3]/2&&(Ue=Q[3]/2),this.zoomHor||(Ne.start=de,Ne.end=xe),Ne.r=qe,Ne.innerR=Ue,Ie.options.gridLineInterpolation==="polygon"){let Ae=Ie.toValue(Ie.len+Ie.pos-Ue),ye=Ie.toValue(Ie.len+Ie.pos-qe),ge=Ie.getPlotLinePath({value:ye}).concat(Ie.getPlotLinePath({value:Ae,reverse:!0}));Ne.d=ge,Te="path"}}if(this.zoomHor&&this.zoomVert&&Ce.options.gridLineInterpolation==="polygon"){let Ie=Ee.hoverPane.axis,Ue=Ne.start||0,qe=Ne.end||0,Ae=Ue-Ie.startAngleRad+Ie.pos,ye=Ie.toValue(Ae),ge=Ie.toValue(Ae+(qe-Ue));if(Ne.d instanceof Array){let Me=Ne.d.slice(0,Ne.d.length/2),De=Ne.d.slice(Ne.d.length/2,Ne.d.length);De=[...De].reverse();let Pe=Ee.hoverPane.axis;Me=R(Me,ye,ge,Pe),(De=R(De,ye,ge,Pe))&&(De[0][0]="L"),De=[...De].reverse(),Ne.d=Me.concat(De),Te="path"}}ve.attrs=Ne,ve.shapeType=Te}}function V(){let ve=this.chart;ve.polar&&(this.polar=new ke(this),ve.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function $(){if(this.chart.polar&&this.xAxis){let{xAxis:ve,yAxis:Ee}=this,Q=this.chart;this.kdByAngle=Q.tooltip&&Q.tooltip.shared,this.kdByAngle||Q.inverted?this.searchPoint=L:this.options.findNearestPointBy="xy";let ee=this.points,oe=ee.length;for(;oe--;)this.is("column")||this.is("columnrange")||this.polar.toXY(ee[oe]),Q.hasParallelCoordinates||this.yAxis.reversed||(S(ee[oe].y,Number.MIN_VALUE)<Ee.min||ee[oe].x<ve.min||ee[oe].x>ve.max?(ee[oe].isNull=!0,ee[oe].plotY=NaN):ee[oe].isNull=ee[oe].isValid&&!ee[oe].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(y(this,"afterRender",function(){let we;Q.polar&&this.options.clip!==!1&&(we=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:we[0],y:we[1],r:we[2]/2,innerR:we[3]/2}):this.clipCircle=function(J,se,de,xe,Ce){let Ne=T(),Te=J.createElement("clipPath").attr({id:Ne}).add(J.defs),Ie=Ce?J.arc(se,de,xe,Ce,0,2*Math.PI).add(Te):J.circle(se,de,xe).add(Te);return Ie.id=Ne,Ie.clipPath=Te,Ie}(Q.renderer,we[0],we[1],we[2]/2,we[3]/2),this.group.clip(this.clipCircle),this.setClip=l.noop)})))}}function L(ve){let Ee=this.chart,Q=this.xAxis,ee=this.yAxis,oe=Q.pane&&Q.pane.center,we=ve.chartX-(oe&&oe[0]||0)-Ee.plotLeft,J=ve.chartY-(oe&&oe[1]||0)-Ee.plotTop,se=Ee.inverted?{clientX:ve.chartX-ee.pos,plotY:ve.chartY-Q.pos}:{clientX:180+-180/Math.PI*Math.atan2(we,J)};return this.searchKDTree(se)}function R(ve,Ee,Q,ee){let oe=ee.tickInterval,we=ee.tickPositions,J=b(we,de=>de>=Q),se=b([...we].reverse(),de=>de<=Ee);return _(J)||(J=we[we.length-1]),_(se)||(se=we[0],J+=oe,ve[0][0]="L",ve.unshift(ve[ve.length-3])),(ve=ve.slice(we.indexOf(se),we.indexOf(J)+1))[0][0]="M",ve}function G(ve,Ee){return b(this.pane||[],Q=>Q.options.id===Ee)||ve.call(this,Ee)}function U(ve,Ee,Q,ee,oe,we){let J,se,de,xe=this.chart,Ce=S(ee.inside,!!this.options.stacking);if(xe.polar){if(J=Ee.rectPlotX/Math.PI*180,xe.inverted)this.forceDL=xe.isInsidePlot(Ee.plotX,Ee.plotY),Ce&&Ee.shapeArgs?(se=Ee.shapeArgs,oe=E(oe,{x:(de=this.yAxis.postTranslate(((se.start||0)+(se.end||0))/2-this.xAxis.startAngleRad,Ee.barX+Ee.pointWidth/2)).x-xe.plotLeft,y:de.y-xe.plotTop})):Ee.tooltipPos&&(oe=E(oe,{x:Ee.tooltipPos[0],y:Ee.tooltipPos[1]})),ee.align=S(ee.align,"center"),ee.verticalAlign=S(ee.verticalAlign,"middle");else{var Ne;let Te,Ie;(Ne=ee).align===null&&(Te=J>20&&J<160?"left":J>200&&J<340?"right":"center",Ne.align=Te),Ne.verticalAlign===null&&(Ie=J<45||J>315?"bottom":J>135&&J<225?"top":"middle",Ne.verticalAlign=Ie),ee=Ne}u.prototype.alignDataLabel.call(this,Ee,Q,ee,oe,we),this.isRadialBar&&Ee.shapeArgs&&Ee.shapeArgs.start===Ee.shapeArgs.end?Q.hide():Q.show()}else ve.call(this,Ee,Q,ee,oe,we)}function B(){let ve=this.options,Ee=ve.stacking,Q=this.chart,ee=this.xAxis,oe=this.yAxis,we=oe.reversed,J=oe.center,se=ee.startAngleRad,de=ee.endAngleRad-se,xe=ve.threshold,Ce=0,Ne,Te,Ie,Ue,qe,Ae=0,ye=0,ge,Me,De,Pe,$e,Ke,tt,nt;if(ee.isRadial)for(Ie=(Ne=this.points).length,Ue=oe.translate(oe.min),qe=oe.translate(oe.max),xe=ve.threshold||0,Q.inverted&&C(xe)&&_(Ce=oe.translate(xe))&&(Ce<0?Ce=0:Ce>de&&(Ce=de),this.translatedThreshold=Ce+se);Ie--;){if(Ke=(Te=Ne[Ie]).barX,Me=Te.x,De=Te.y,Te.shapeType="arc",Q.inverted){Te.plotY=oe.translate(De),Ee&&oe.stacking?($e=oe.stacking.stacks[(De<0?"-":"")+this.stackKey],this.visible&&$e&&$e[Me]&&!Te.isNull&&(Pe=$e[Me].points[this.getStackIndicator(void 0,Me,this.index).key],Ae=oe.translate(Pe[0]),ye=oe.translate(Pe[1]),_(Ae)&&(Ae=f.clamp(Ae,0,de)))):(Ae=Ce,ye=Te.plotY),Ae>ye&&(ye=[Ae,Ae=ye][0]),we?ye>Ue?ye=Ue:Ae<qe?Ae=qe:(Ae>Ue||ye<qe)&&(Ae=ye=de):Ae<Ue?Ae=Ue:ye>qe?ye=qe:(ye<Ue||Ae>qe)&&(Ae=ye=0),oe.min>oe.max&&(Ae=ye=we?de:0),Ae+=se,ye+=se,J&&(Te.barX=Ke+=J[3]/2),tt=Math.max(Ke,0),nt=Math.max(Ke+Te.pointWidth,0);let ht=ve.borderRadius,gt=A((typeof ht=="object"?ht.radius:ht)||0,nt-tt);Te.shapeArgs={x:J[0],y:J[1],r:nt,innerR:tt,start:Ae,end:ye,borderRadius:gt},Te.opacity=Ae===ye?0:void 0,Te.plotY=(_(this.translatedThreshold)&&(Ae<this.translatedThreshold?Ae:ye))-se}else Ae=Ke+se,Te.shapeArgs=this.polar.arc(Te.yBottom,Te.plotY,Ae,Ae+Te.pointWidth),Te.shapeArgs.borderRadius=0;this.polar.toXY(Te),Q.inverted?(ge=oe.postTranslate(Te.rectPlotY,Ke+Te.pointWidth/2),Te.tooltipPos=[ge.x-Q.plotLeft,ge.y-Q.plotTop]):Te.tooltipPos=[Te.plotX,Te.plotY],J&&(Te.ttBelow=Te.plotY>J[1])}}function H(ve,Ee){let Q,ee,oe=this;if(this.chart.polar){Ee=Ee||this.points;for(let J=0;J<Ee.length;J++)if(!Ee[J].isNull){Q=J;break}this.options.connectEnds!==!1&&Q!==void 0&&(this.connectEnds=!0,Ee.splice(Ee.length,0,Ee[Q]),ee=!0),Ee.forEach(J=>{J.polarPlotY===void 0&&oe.polar.toXY(J)})}let we=ve.apply(this,[].slice.call(arguments,1));return ee&&Ee.pop(),we}function q(ve,Ee){let Q=this.chart,ee={xAxis:[],yAxis:[]};return Q.polar?Q.axes.forEach(oe=>{if(oe.coll==="colorAxis")return;let we=oe.isXAxis,J=oe.center,se=Ee.chartX-J[0]-Q.plotLeft,de=Ee.chartY-J[1]-Q.plotTop;ee[we?"xAxis":"yAxis"].push({axis:oe,value:oe.translate(we?Math.PI-Math.atan2(se,de):Math.sqrt(Math.pow(se,2)+Math.pow(de,2)),!0)})}):ee=ve.call(this,Ee),ee}function ae(ve,Ee){this.chart.polar||ve.call(this,Ee)}function fe(ve,Ee){let Q=this,ee=this.chart,oe=this.group,we=this.markerGroup,J=this.xAxis&&this.xAxis.center,se=ee.plotLeft,de=ee.plotTop,xe=this.options.animation,Ce,Ne,Te,Ie,Ue,qe;ee.polar?Q.isRadialBar?Ee||(Q.startAngleRad=S(Q.translatedThreshold,Q.xAxis.startAngleRad),l.seriesTypes.pie.prototype.animate.call(Q,Ee)):(xe=m(xe),Q.is("column")?Ee||(Ne=J[3]/2,Q.points.forEach(Ae=>{Te=Ae.graphic,Ue=(Ie=Ae.shapeArgs)&&Ie.r,qe=Ie&&Ie.innerR,Te&&Ie&&(Te.attr({r:Ne,innerR:Ne}),Te.animate({r:Ue,innerR:qe},Q.options.animation))})):Ee?(Ce={translateX:J[0]+se,translateY:J[1]+de,scaleX:.001,scaleY:.001},oe.attr(Ce),we&&we.attr(Ce)):(Ce={translateX:se,translateY:de,scaleX:1,scaleY:1},oe.animate(Ce,xe),we&&we.animate(Ce,xe))):ve.call(this,Ee)}function re(ve,Ee,Q,ee){let oe,we;if(this.chart.polar)if(ee){let J=(we=function de(xe,Ce,Ne,Te){let Ie,Ue,qe,Ae,ye,ge,Me=Te?1:0,De=(Ie=Ce>=0&&Ce<=xe.length-1?Ce:Ce<0?xe.length-1+Ce:0)-1<0?xe.length-(1+Me):Ie-1,Pe=Ie+1>xe.length-1?Me:Ie+1,$e=xe[De],Ke=xe[Pe],tt=$e.plotX,nt=$e.plotY,ht=Ke.plotX,gt=Ke.plotY,Ct=xe[Ie].plotX,Lt=xe[Ie].plotY;Ue=(1.5*Ct+tt)/2.5,qe=(1.5*Lt+nt)/2.5,Ae=(1.5*Ct+ht)/2.5,ye=(1.5*Lt+gt)/2.5;let ft=Math.sqrt(Math.pow(Ue-Ct,2)+Math.pow(qe-Lt,2)),Et=Math.sqrt(Math.pow(Ae-Ct,2)+Math.pow(ye-Lt,2)),Tt=Math.atan2(qe-Lt,Ue-Ct);ge=Math.PI/2+(Tt+Math.atan2(ye-Lt,Ae-Ct))/2,Math.abs(Tt-ge)>Math.PI/2&&(ge-=Math.PI),Ue=Ct+Math.cos(ge)*ft,qe=Lt+Math.sin(ge)*ft;let ai={rightContX:Ae=Ct+Math.cos(Math.PI+ge)*Et,rightContY:ye=Lt+Math.sin(Math.PI+ge)*Et,leftContX:Ue,leftContY:qe,plotX:Ct,plotY:Lt};return Ne&&(ai.prevPointCont=de(xe,De,!1,Te)),ai}(Ee,ee,!0,this.connectEnds)).prevPointCont&&we.prevPointCont.rightContX,se=we.prevPointCont&&we.prevPointCont.rightContY;oe=["C",C(J)?J:we.plotX,C(se)?se:we.plotY,C(we.leftContX)?we.leftContX:we.plotX,C(we.leftContY)?we.leftContY:we.plotY,we.plotX,we.plotY]}else oe=["M",Q.plotX,Q.plotY];else oe=ve.call(this,Ee,Q,ee);return oe}function ce(ve,Ee,Q=this.plotY){if(!this.destroyed){let{plotX:ee,series:oe}=this,{chart:we}=oe;return we.polar&&C(ee)&&C(Q)?[ee+(Ee?we.plotLeft:0),Q+(Ee?we.plotTop:0)]:ve.call(this,Ee,Q)}}class ke{static compose(Ee,Q,ee,oe,we,J,se,de,xe,Ce){if(r.compose(Q,ee),p.compose(Ee,we),x(v,"Polar")){let Ne=Q.prototype,Te=J.prototype,Ie=ee.prototype,Ue=oe.prototype;if(y(Q,"afterDrawChartBox",N),y(Q,"getAxes",Z),y(Q,"init",W),k(Ne,"get",G),k(Ie,"getCoordinates",q),k(Ie,"pinch",ae),y(ee,"getSelectionMarkerAttrs",j),y(ee,"getSelectionBox",K),y(oe,"afterInit",V),y(oe,"afterTranslate",$,{order:2}),y(oe,"afterColumnTranslate",B,{order:4}),k(Ue,"animate",fe),k(Te,"pos",ce),de){let qe=de.prototype;k(qe,"alignDataLabel",U),k(qe,"animate",fe)}if(xe&&k(xe.prototype,"getGraphPath",H),Ce){let qe=Ce.prototype;k(qe,"getPointSpline",re),se&&(se.prototype.getPointSpline=qe.getPointSpline)}}}constructor(Ee){this.series=Ee}arc(Ee,Q,ee,oe){let we=this.series,J=we.xAxis.center,se=we.yAxis.len,de=J[3]/2,xe=se-Q+de,Ce=se-S(Ee,se)+de;return we.yAxis.reversed&&(xe<0&&(xe=de),Ce<0&&(Ce=de)),{x:J[0],y:J[1],r:xe,innerR:Ce,start:ee,end:oe}}toXY(Ee){let Q=this.series,ee=Q.chart,oe=Q.xAxis,we=Q.yAxis,J=Ee.plotX,se=ee.inverted,de=Ee.y,xe=Ee.plotY,Ce=se?J:we.len-xe,Ne;if(se&&Q&&!Q.isRadialBar&&(Ee.plotY=xe=C(de)?we.translate(de):0),Ee.rectPlotX=J,Ee.rectPlotY=xe,we.center&&(Ce+=we.center[3]/2),C(xe)){let Te=se?we.postTranslate(xe,Ce):oe.postTranslate(J,Ce);Ee.plotX=Ee.polarPlotX=Te.x-ee.plotLeft,Ee.plotY=Ee.polarPlotY=Te.y-ee.plotTop}Q.kdByAngle?((Ne=(J/Math.PI*180+oe.pane.options.startAngle)%360)<0&&(Ne+=360),Ee.clientX=Ne):Ee.clientX=Ee.plotX}}return ke}),n(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{composed:p}=s,{addEvent:f,objectEach:m,pushUnique:v}=u;return function(y){function _(){let x=this.waterfall.stacks;x&&(x.changed=!1,delete x.alreadyChanged)}function b(){let x=this.options.stackLabels;x&&x.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function C(){this.waterfall||(this.waterfall=new S(this))}function E(){let x=this.axes;for(let A of this.series)if(A.options.stacking){for(let D of x)D.isXAxis||(D.waterfall.stacks.changed=!0);break}}y.compose=function(x,A){v(p,"Axis.Waterfall")&&(f(x,"init",C),f(x,"afterBuildStacks",_),f(x,"afterRender",b),f(A,"beforeRedraw",E))};class S{constructor(A){this.axis=A,this.stacks={changed:!1}}renderStackTotals(){let A=this.axis,D=A.waterfall.stacks,T=A.stacking&&A.stacking.stackTotalGroup,k=new l(A,A.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=k,T&&m(D,N=>{m(N,(W,Z)=>{k.total=W.stackTotal,k.x=+Z,W.label&&(k.label=W.label),l.prototype.render.call(k,T),W.label=k.label,delete k.label})}),k.total=null}}y.Composition=S}(r||(r={})),r}),n(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{isNumber:r}=u;class p extends s.prototype.pointClass{getClassName(){let m=l.prototype.getClassName.call(this);return this.isSum?m+=" highcharts-sum":this.isIntermediateSum&&(m+=" highcharts-intermediate-sum"),m}isValid(){return r(this.y)||this.isSum||!!this.isIntermediateSum}}return p}),n(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),n(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(s,l,u,r,p){let{column:f,line:m}=s.seriesTypes,{addEvent:v,arrayMax:y,arrayMin:_,correctFloat:b,crisp:C,extend:E,isNumber:S,merge:x,objectEach:A,pick:D}=l;function T(N,W){return Object.hasOwnProperty.call(N,W)}class k extends f{generatePoints(){f.prototype.generatePoints.apply(this);for(let W=0,Z=this.points.length;W<Z;W++){let K=this.points[W],j=this.processedYData[W];S(j)&&(K.isIntermediateSum||K.isSum)&&(K.y=b(j))}}processData(W){let Z,K,j,V,$,L,R=this.options,G=this.yData,U=R.data,B=G.length,H=R.threshold||0;j=K=V=$=0;for(let q=0;q<B;q++)L=G[q],Z=U&&U[q]?U[q]:{},L==="sum"||Z.isSum?G[q]=b(j):L==="intermediateSum"||Z.isIntermediateSum?(G[q]=b(K),K=0):(j+=L,K+=L),V=Math.min(j,V),$=Math.max(j,$);super.processData.call(this,W),R.stacking||(this.dataMin=V+H,this.dataMax=$)}toYData(W){return W.isSum?"sum":W.isIntermediateSum?"intermediateSum":W.y}updateParallelArrays(W,Z){super.updateParallelArrays.call(this,W,Z),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(W,Z){let K=this.options.upColor;K&&!W.options.color&&S(W.y)&&(W.color=W.y>0?K:void 0);let j=f.prototype.pointAttribs.call(this,W,Z);return delete j.dashstyle,j}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let W=this.data.filter(U=>S(U.y)),Z=this.yAxis,K=W.length,j=((G=this.graph)==null?void 0:G.strokeWidth())||0,V=this.xAxis.reversed,$=this.yAxis.reversed,L=this.options.stacking,R=[];for(let U=1;U<K;U++){if(!(this.options.connectNulls||S(this.data[W[U].index-1].y)))continue;let B=W[U].box,H=W[U-1],q=H.y||0,ae=W[U-1].box;if(!B||!ae)continue;let fe=Z.waterfall.stacks[this.stackKey],re=q>0?-ae.height:0;if(fe&&ae&&B){let ce,ke=fe[U-1];if(L){let ve=ke.connectorThreshold;ce=C(Z.translate(ve,!1,!0,!1,!0)+($?re:0),j)}else ce=C(ae.y+(H.minPointLengthOffset||0),j);R.push(["M",(ae.x||0)+(V?0:ae.width||0),ce],["L",(B.x||0)+(V&&B.width||0),ce])}if(ae&&R.length&&(!L&&q<0&&!$||q>0&&$)){let ce=R[R.length-2];ce&&typeof ce[2]=="number"&&(ce[2]+=ae.height||0);let ke=R[R.length-1];ke&&typeof ke[2]=="number"&&(ke[2]+=ae.height||0)}}return R}drawGraph(){m.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(W){var oe;let Z=this.options,K=(oe=W.waterfall)==null?void 0:oe.stacks,j=Z.threshold||0,V=this.stackKey,$=this.xData,L=$.length,R=j,G=R,U,B=0,H=0,q=0,ae,fe,re,ce,ke,ve,Ee,Q,ee=(we,J,se,de)=>{if(U){if(ae)for(;se<ae;se++)U.stackState[se]+=de;else U.stackState[0]=we,ae=U.stackState.length;U.stackState.push(U.stackState[ae-1]+J)}};if(W.stacking&&K&&this.reserveSpace()){Q=K.changed,(Ee=K.alreadyChanged)&&0>Ee.indexOf(V)&&(Q=!0),K[V]||(K[V]={});let we=K[V];if(we)for(let J=0;J<L;J++)(!we[ve=$[J]]||Q)&&(we[ve]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:Q&&we[ve]?we[ve].label:void 0}),U=we[ve],(ke=this.yData[J])>=0?U.posTotal+=ke:U.negTotal+=ke,ce=Z.data[J],fe=U.absolutePos=U.posTotal,re=U.absoluteNeg=U.negTotal,U.stackTotal=fe+re,ae=U.stackState.length,ce&&ce.isIntermediateSum?(ee(q,H,0,q),q=H,H=j,R^=G,G^=R,R^=G):ce&&ce.isSum?(ee(j,B,ae,0),R=j):(ee(R,ke,0,B),ce&&(B+=ke,H+=ke)),U.stateIndex++,U.threshold=R,R+=U.stackTotal;K.changed=!1,K.alreadyChanged||(K.alreadyChanged=[]),K.alreadyChanged.push(V)}}getExtremes(){let W,Z,K,j=this.options.stacking;return j?(W=this.yAxis.waterfall.stacks,Z=this.stackedYNeg=[],K=this.stackedYPos=[],j==="overlap"?A(W[this.stackKey],function(V){Z.push(_(V.stackState)),K.push(y(V.stackState))}):A(W[this.stackKey],function(V){Z.push(V.negTotal+V.threshold),K.push(V.posTotal+V.threshold)}),{dataMin:_(Z),dataMax:y(K)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return k.defaultOptions=x(f.defaultOptions,p),k.compose=u.compose,E(k.prototype,{pointValKey:"y",showLine:!0,pointClass:r}),v(k,"afterColumnTranslate",function(){let{options:N,points:W,yAxis:Z}=this,K=D(N.minPointLength,5),j=K/2,V=N.threshold||0,$=N.stacking,L=Z.waterfall.stacks[this.stackKey],R=V,G=V,U,B,H,q;for(let ae=0;ae<W.length;ae++){let fe=W[ae],re=this.processedYData[ae],ce=E({x:0,y:0,width:0,height:0},fe.shapeArgs||{});fe.box=ce;let ke=[0,re],ve=fe.y||0;if($){if(L){let ee=L[ae];$==="overlap"?(B=ee.stackState[ee.stateIndex--],U=ve>=0?B:B-ve,T(ee,"absolutePos")&&delete ee.absolutePos,T(ee,"absoluteNeg")&&delete ee.absoluteNeg):(ve>=0?(B=ee.threshold+ee.posTotal,ee.posTotal-=ve,U=B):(B=ee.threshold+ee.negTotal,ee.negTotal-=ve,U=B-ve),!ee.posTotal&&S(ee.absolutePos)&&T(ee,"absolutePos")&&(ee.posTotal=ee.absolutePos,delete ee.absolutePos),!ee.negTotal&&S(ee.absoluteNeg)&&T(ee,"absoluteNeg")&&(ee.negTotal=ee.absoluteNeg,delete ee.absoluteNeg)),fe.isSum||(ee.connectorThreshold=ee.threshold+ee.stackTotal),Z.reversed?(H=ve>=0?U-ve:U+ve,q=U):(H=U,q=U-ve),fe.below=H<=V,ce.y=Z.translate(H,!1,!0,!1,!0),ce.height=Math.abs(ce.y-Z.translate(q,!1,!0,!1,!0));let oe=Z.waterfall.dummyStackItem;oe&&(oe.x=ae,oe.label=L[ae].label,oe.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[ae],this.stackedYPos[ae],void 0,this.xAxis))}}else U=Math.max(G,G+ve)+ke[0],ce.y=Z.translate(U,!1,!0,!1,!0),fe.isSum?(ce.y=Z.translate(ke[1],!1,!0,!1,!0),ce.height=Math.min(Z.translate(ke[0],!1,!0,!1,!0),Z.len)-ce.y,fe.below=ke[1]<=V):fe.isIntermediateSum?(ve>=0?(H=ke[1]+R,q=R):(H=R,q=ke[1]+R),Z.reversed&&(H^=q,q^=H,H^=q),ce.y=Z.translate(H,!1,!0,!1,!0),ce.height=Math.abs(ce.y-Math.min(Z.translate(q,!1,!0,!1,!0),Z.len)),R+=ke[1],fe.below=H<=V):(ce.height=re>0?Z.translate(G,!1,!0,!1,!0)-ce.y:Z.translate(G,!1,!0,!1,!0)-Z.translate(G-re,!1,!0,!1,!0),G+=re,fe.below=G<V),ce.height<0&&(ce.y+=ce.height,ce.height*=-1);fe.plotY=ce.y,fe.yBottom=ce.y+ce.height,ce.height<=K&&!fe.isNull?(ce.height=K,ce.y-=j,fe.yBottom=ce.y+ce.height,fe.plotY=ce.y,ve<0?fe.minPointLengthOffset=-j:fe.minPointLengthOffset=j):(fe.isNull&&(ce.width=0),fe.minPointLengthOffset=0);let Ee=fe.plotY+(fe.negative?ce.height:0);fe.below&&(fe.plotY+=ce.height),fe.tooltipPos&&(this.chart.inverted?fe.tooltipPos[0]=Z.len-Ee:fe.tooltipPos[1]=Ee),fe.isInside=this.isPointInside(fe);let Q=C(fe.yBottom,this.borderWidth);ce.y=C(ce.y,this.borderWidth),ce.height=Q-ce.y,x(!0,fe.shapeArgs,ce)}},{order:2}),s.registerSeriesType("waterfall",k),k}),n(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(s,l,u,r,p,f,m,v){return s.RadialAxis=m,r.compose(s.Axis,s.Chart,s.Legend),p.compose(s.Axis,s.Chart,s.Legend),u.compose(s.Chart,s.Pointer),f.compose(s.Axis,s.Chart,s.Pointer,s.Series,s.Tick,s.Point,l.seriesTypes.areasplinerange,l.seriesTypes.column,l.seriesTypes.line,l.seriesTypes.spline),v.compose(s.Axis,s.Chart),s})})})(ik);var u7=ik.exports;const d7=Yh(u7);var nk={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var s;return function(l){l.compose=function(r){return r.navigation||(r.navigation=new u(r)),r};class u{constructor(p){this.updates=[],this.chart=p}addUpdate(p){this.chart.navigation.updates.push(p)}update(p,f){this.updates.forEach(m=>{m.call(this.chart,p,f)})}}l.Additions=u}(s||(s={})),s}),n(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(s){let{isTouchDevice:l}=s;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:l?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),n(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var s;return function(l){let u=[];function r(f,m,v,y){return[["M",f,m+2.5],["L",f+v,m+2.5],["M",f,m+y/2+.5],["L",f+v,m+y/2+.5],["M",f,m+y-1.5],["L",f+v,m+y-1.5]]}function p(f,m,v,y){let _=y/3-2;return[].concat(this.circle(v-_,m,_,_),this.circle(v-_,m+_+4,_,_),this.circle(v-_,m+2*(_+4),_,_))}l.compose=function(f){if(u.indexOf(f)===-1){u.push(f);let m=f.prototype.symbols;m.menu=r,m.menuball=p.bind(m)}}}(s||(s={})),s}),n(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{composed:r}=l,{addEvent:p,fireEvent:f,pushUnique:m}=u;function v(){this.fullscreen=new y(this)}class y{static compose(b){m(r,"Fullscreen")&&p(b,"beforeRender",v)}constructor(b){this.chart=b,this.isOpen=!1;let C=b.renderTo;!this.browserProps&&(typeof C.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:C.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:C.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:C.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let b=this,C=b.chart,E=C.options.chart;f(C,"fullscreenClose",null,function(){b.isOpen&&b.browserProps&&C.container.ownerDocument instanceof Document&&C.container.ownerDocument[b.browserProps.exitFullscreen](),b.unbindFullscreenEvent&&(b.unbindFullscreenEvent=b.unbindFullscreenEvent()),C.setSize(b.origWidth,b.origHeight,!1),b.origWidth=void 0,b.origHeight=void 0,E.width=b.origWidthOption,E.height=b.origHeightOption,b.origWidthOption=void 0,b.origHeightOption=void 0,b.isOpen=!1,b.setButtonText()})}open(){let b=this,C=b.chart,E=C.options.chart;f(C,"fullscreenOpen",null,function(){if(E&&(b.origWidthOption=E.width,b.origHeightOption=E.height),b.origWidth=C.chartWidth,b.origHeight=C.chartHeight,b.browserProps){let S=p(C.container.ownerDocument,b.browserProps.fullscreenChange,function(){b.isOpen?(b.isOpen=!1,b.close()):(C.setSize(null,null,!1),b.isOpen=!0,b.setButtonText())}),x=p(C,"destroy",S);b.unbindFullscreenEvent=()=>{S(),x()};let A=C.renderTo[b.browserProps.requestFullscreen]();A&&A.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let b=this.chart,C=b.exportDivElements,E=b.options.exporting,S=E&&E.buttons&&E.buttons.contextButton.menuItems,x=b.options.lang;if(E&&E.menuItemDefinitions&&x&&x.exitFullscreen&&x.viewFullscreen&&S&&C){let A=C[S.indexOf("viewFullscreen")];A&&s.setElementHTML(A,this.isOpen?x.exitFullscreen:E.menuItemDefinitions.viewFullscreen.text||x.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return y}),n(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{discardElement:r,objectEach:p}=l,f={ajax:function(m){let v={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},y=new XMLHttpRequest;function _(b,C){m.error&&m.error(b,C)}if(!m.url)return!1;y.open((m.type||"get").toUpperCase(),m.url,!0),m.headers&&m.headers["Content-Type"]||y.setRequestHeader("Content-Type",v[m.dataType||"json"]||v.text),p(m.headers,function(b,C){y.setRequestHeader(C,b)}),m.responseType&&(y.responseType=m.responseType),y.onreadystatechange=function(){let b;if(y.readyState===4){if(y.status===200){if(m.responseType!=="blob"&&(b=y.responseText,m.dataType==="json"))try{b=JSON.parse(b)}catch(C){if(C instanceof Error)return _(y,C)}return m.success&&m.success(b,y)}_(y,y.responseText)}},m.data&&typeof m.data!="string"&&(m.data=JSON.stringify(m.data)),y.send(m.data)},getJSON:function(m,v){f.ajax({url:m,success:v,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(m,v,y){let _=new u.FormData;p(v,function(E,S){_.append(S,E)}),_.append("b64","true");let{filename:b,type:C}=v;return u.fetch(m,{method:"POST",body:_,...y}).then(E=>{E.ok&&E.text().then(S=>{let x=document.createElement("a");x.href=`data:${C};base64,${S}`,x.download=b,x.click(),r(x)})})}};return f}),n(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,m,v,y,_){var b;let{defaultOptions:C}=r,{doc:E,SVG_NS:S,win:x}=v,{addEvent:A,css:D,createElement:T,discardElement:k,extend:N,find:W,fireEvent:Z,isObject:K,merge:j,objectEach:V,pick:$,removeEvent:L,uniqueKey:R}=_;return function(G){let U,B=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],H=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let q=["clipPath","defs","desc"];function ae(Te){let Ie,Ue,qe=this,Ae=qe.renderer,ye=j(qe.options.navigation.buttonOptions,Te),ge=ye.onclick,Me=ye.menuItems,De=ye.symbolSize||12;if(qe.btnCount||(qe.btnCount=0),qe.exportDivElements||(qe.exportDivElements=[],qe.exportSVGElements=[]),ye.enabled===!1||!ye.theme)return;let Pe=qe.styledMode?{}:ye.theme;ge?Ue=function(Ke){Ke&&Ke.stopPropagation(),ge.call(qe,Ke)}:Me&&(Ue=function(Ke){Ke&&Ke.stopPropagation(),qe.contextMenu($e.menuClassName,Me,$e.translateX||0,$e.translateY||0,$e.width||0,$e.height||0,$e),$e.setState(2)}),ye.text&&ye.symbol?Pe.paddingLeft=$(Pe.paddingLeft,30):ye.text||N(Pe,{width:ye.width,height:ye.height,padding:0});let $e=Ae.button(ye.text,0,0,Ue,Pe,void 0,void 0,void 0,void 0,ye.useHTML).addClass(Te.className).attr({title:$(qe.options.lang[ye._titleKey||ye.titleKey],"")});$e.menuClassName=Te.menuClassName||"highcharts-menu-"+qe.btnCount++,ye.symbol&&(Ie=Ae.symbol(ye.symbol,Math.round((ye.symbolX||0)-De/2),Math.round((ye.symbolY||0)-De/2),De,De,{width:De,height:De}).addClass("highcharts-button-symbol").attr({zIndex:1}).add($e),qe.styledMode||Ie.attr({stroke:ye.symbolStroke,fill:ye.symbolFill,"stroke-width":ye.symbolStrokeWidth||1})),$e.add(qe.exportingGroup).align(N(ye,{width:$e.width,x:$(ye.x,qe.buttonOffset)}),!0,"spacingBox"),qe.buttonOffset+=(($e.width||0)+ye.buttonSpacing)*(ye.align==="right"?-1:1),qe.exportSVGElements.push($e,Ie)}function fe(){if(!this.printReverseInfo)return;let{childNodes:Te,origDisplay:Ie,resetParams:Ue}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Te,function(qe,Ae){qe.nodeType===1&&(qe.style.display=Ie[Ae]||"")}),this.isPrinting=!1,Ue&&this.setSize.apply(this,Ue),delete this.printReverseInfo,U=void 0,Z(this,"afterPrint")}function re(){var qe;let Te=E.body,Ie=this.options.exporting.printMaxWidth,Ue={childNodes:Te.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(qe=this.pointer)==null||qe.reset(void 0,0),Z(this,"beforePrint"),Ie&&this.chartWidth>Ie&&(Ue.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Ie,void 0,!1)),[].forEach.call(Ue.childNodes,function(Ae,ye){Ae.nodeType===1&&(Ue.origDisplay[ye]=Ae.style.display,Ae.style.display="none")}),this.moveContainers(Te),this.printReverseInfo=Ue}function ce(Te){Te.renderExporting(),A(Te,"redraw",Te.renderExporting),A(Te,"destroy",Te.destroyExport)}function ke(Te,Ie,Ue,qe,Ae,ye,ge){var Ct,Lt;let Me=this,De=Me.options.navigation,Pe=Me.chartWidth,$e=Me.chartHeight,Ke="cache-"+Te,tt=Math.max(Ae,ye),nt,ht=Me[Ke];ht||(Me.exportContextMenu=Me[Ke]=ht=T("div",{className:Te},{position:"absolute",zIndex:1e3,padding:tt+"px",pointerEvents:"auto",...Me.renderer.style},((Ct=Me.scrollablePlotArea)==null?void 0:Ct.fixedDiv)||Me.container),nt=T("ul",{className:"highcharts-menu"},Me.styledMode?{}:{listStyle:"none",margin:0,padding:0},ht),Me.styledMode||D(nt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},De.menuStyle)),ht.hideMenu=function(){D(ht,{display:"none"}),ge&&ge.setState(0),Me.openMenu=!1,D(Me.renderTo,{overflow:"hidden"}),D(Me.container,{overflow:"hidden"}),_.clearTimeout(ht.hideTimer),Z(Me,"exportMenuHidden")},Me.exportEvents.push(A(ht,"mouseleave",function(){ht.hideTimer=x.setTimeout(ht.hideMenu,500)}),A(ht,"mouseenter",function(){_.clearTimeout(ht.hideTimer)}),A(E,"mouseup",function(ft){var Et;(Et=Me.pointer)!=null&&Et.inClass(ft.target,Te)||ht.hideMenu()}),A(ht,"click",function(){Me.openMenu&&ht.hideMenu()})),Ie.forEach(function(ft){if(typeof ft=="string"&&(ft=Me.options.exporting.menuItemDefinitions[ft]),K(ft,!0)){let Et;ft.separator?Et=T("hr",void 0,void 0,nt):(ft.textKey==="viewData"&&Me.isDataTableVisible&&(ft.textKey="hideData"),Et=T("li",{className:"highcharts-menu-item",onclick:function(Tt){Tt&&Tt.stopPropagation(),ht.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(Me,arguments)}},void 0,nt),s.setElementHTML(Et,ft.text||Me.options.lang[ft.textKey]),Me.styledMode||(Et.onmouseover=function(){D(this,De.menuItemHoverStyle)},Et.onmouseout=function(){D(this,De.menuItemStyle)},D(Et,N({cursor:"pointer"},De.menuItemStyle||{})))),Me.exportDivElements.push(Et)}}),Me.exportDivElements.push(nt,ht),Me.exportMenuWidth=ht.offsetWidth,Me.exportMenuHeight=ht.offsetHeight);let gt={display:"block"};Ue+(Me.exportMenuWidth||0)>Pe?gt.right=Pe-Ue-Ae-tt+"px":gt.left=Ue-tt+"px",qe+ye+(Me.exportMenuHeight||0)>$e&&((Lt=ge.alignOptions)==null?void 0:Lt.verticalAlign)!=="top"?gt.bottom=$e-qe-tt+"px":gt.top=qe+ye-tt+"px",D(ht,gt),D(Me.renderTo,{overflow:""}),D(Me.container,{overflow:""}),Me.openMenu=!0,Z(Me,"exportMenuShown")}function ve(Te){let Ie,Ue=Te?Te.target:this,qe=Ue.exportSVGElements,Ae=Ue.exportDivElements,ye=Ue.exportEvents;qe&&(qe.forEach((ge,Me)=>{ge&&(ge.onclick=ge.ontouchstart=null,Ue[Ie="cache-"+ge.menuClassName]&&delete Ue[Ie],qe[Me]=ge.destroy())}),qe.length=0),Ue.exportingGroup&&(Ue.exportingGroup.destroy(),delete Ue.exportingGroup),Ae&&(Ae.forEach(function(ge,Me){ge&&(_.clearTimeout(ge.hideTimer),L(ge,"mouseleave"),Ae[Me]=ge.onmouseout=ge.onmouseover=ge.ontouchstart=ge.onclick=null,k(ge))}),Ae.length=0),ye&&(ye.forEach(function(ge){ge()}),ye.length=0)}function Ee(Te,Ie){let Ue=this.getSVGForExport(Te,Ie);Te=j(this.options.exporting,Te),y.post(Te.url,{filename:Te.filename?Te.filename.replace(/\//g,"-"):this.getFilename(),type:Te.type,width:Te.width,scale:Te.scale,svg:Ue},Te.fetchOptions)}function Q(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function ee(){let Te=this.userOptions.title&&this.userOptions.title.text,Ie=this.options.exporting.filename;return Ie?Ie.replace(/\//g,"-"):(typeof Te=="string"&&(Ie=Te.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Ie||Ie.length<5)&&(Ie="chart"),Ie)}function oe(Te){let Ie,Ue,qe=j(this.options,Te);qe.plotOptions=j(this.userOptions.plotOptions,Te&&Te.plotOptions),qe.time=j(this.userOptions.time,Te&&Te.time);let Ae=T("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},E.body),ye=this.renderTo.style.width,ge=this.renderTo.style.height,Me=qe.exporting.sourceWidth||qe.chart.width||/px$/.test(ye)&&parseInt(ye,10)||(qe.isGantt?800:600),De=qe.exporting.sourceHeight||qe.chart.height||/px$/.test(ge)&&parseInt(ge,10)||400;N(qe.chart,{animation:!1,renderTo:Ae,forExport:!0,renderer:"SVGRenderer",width:Me,height:De}),qe.exporting.enabled=!1,delete qe.data,qe.series=[],this.series.forEach(function(Ke){(Ue=j(Ke.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Ke.visible})).isInternal||qe.series.push(Ue)});let Pe={};this.axes.forEach(function(Ke){Ke.userOptions.internalKey||(Ke.userOptions.internalKey=R()),Ke.options.isInternal||(Pe[Ke.coll]||(Pe[Ke.coll]=!0,qe[Ke.coll]=[]),qe[Ke.coll].push(j(Ke.userOptions,{visible:Ke.visible,type:Ke.type,uniqueNames:Ke.uniqueNames})))}),qe.colorAxis=this.userOptions.colorAxis;let $e=new this.constructor(qe,this.callback);return Te&&["xAxis","yAxis","series"].forEach(function(Ke){let tt={};Te[Ke]&&(tt[Ke]=Te[Ke],$e.update(tt))}),this.axes.forEach(function(Ke){let tt=W($e.axes,function(Ct){return Ct.options.internalKey===Ke.userOptions.internalKey}),nt=Ke.getExtremes(),ht=nt.userMin,gt=nt.userMax;tt&&(ht!==void 0&&ht!==tt.min||gt!==void 0&&gt!==tt.max)&&tt.setExtremes(ht,gt,!0,!1)}),Ie=$e.getChartHTML(),Z(this,"getSVG",{chartCopy:$e}),Ie=this.sanitizeSVG(Ie,qe),qe=null,$e.destroy(),k(Ae),Ie}function we(Te,Ie){let Ue=this.options.exporting;return this.getSVG(j({chart:{borderRadius:0}},Ue.chartOptions,Ie,{exporting:{sourceWidth:Te&&Te.sourceWidth||Ue.sourceWidth,sourceHeight:Te&&Te.sourceHeight||Ue.sourceHeight}}))}function J(){let Te,Ie=G.inlineAllowlist,Ue={},qe=E.createElement("iframe");D(qe,{width:"1px",height:"1px",visibility:"hidden"}),E.body.appendChild(qe);let Ae=qe.contentWindow&&qe.contentWindow.document;Ae&&Ae.body.appendChild(Ae.createElementNS(S,"svg")),function ye(ge){let Me,De,Pe,$e,Ke,tt,nt={};if(Ae&&ge.nodeType===1&&q.indexOf(ge.nodeName)===-1){if(Me=x.getComputedStyle(ge,null),De=ge.nodeName==="svg"?{}:x.getComputedStyle(ge.parentNode,null),!Ue[ge.nodeName]){Te=Ae.getElementsByTagName("svg")[0],Pe=Ae.createElementNS(ge.namespaceURI,ge.nodeName),Te.appendChild(Pe);let ht=x.getComputedStyle(Pe,null),gt={};for(let Ct in ht)Ct.length<1e3&&typeof ht[Ct]=="string"&&!/^\d+$/.test(Ct)&&(gt[Ct]=ht[Ct]);Ue[ge.nodeName]=gt,ge.nodeName==="text"&&delete Ue.text.fill,Te.removeChild(Pe)}for(let ht in Me)(v.isFirefox||v.isMS||v.isSafari||Object.hasOwnProperty.call(Me,ht))&&function(gt,Ct){if($e=Ke=!1,Ie.length){for(tt=Ie.length;tt--&&!Ke;)Ke=Ie[tt].test(Ct);$e=!Ke}for(Ct==="transform"&&gt==="none"&&($e=!0),tt=B.length;tt--&&!$e;){if(Ct.length>1e3)throw Error("Input too long");$e=B[tt].test(Ct)||typeof gt=="function"}!$e&&(De[Ct]!==gt||ge.nodeName==="svg")&&Ue[ge.nodeName][Ct]!==gt&&(H.indexOf(Ct)===-1?nt[Ct]=gt:gt&&ge.setAttribute(Ct.replace(/[A-Z]/g,function(Lt){return"-"+Lt.toLowerCase()}),gt))}(Me[ht],ht);if(D(ge,nt),ge.nodeName==="svg"&&ge.setAttribute("stroke-width","1px"),ge.nodeName==="text")return;[].forEach.call(ge.children||ge.childNodes,ye)}}(this.container.querySelector("svg")),Te.parentNode.removeChild(Te),qe.parentNode.removeChild(qe)}function se(Te){let{scrollablePlotArea:Ie}=this;(Ie?[Ie.fixedDiv,Ie.scrollingContainer]:[this.container]).forEach(function(Ue){Te.appendChild(Ue)})}function de(){let Te=this,Ie=(Ue,qe,Ae)=>{Te.isDirtyExporting=!0,j(!0,Te.options[Ue],qe),$(Ae,!0)&&Te.redraw()};Te.exporting={update:function(Ue,qe){Ie("exporting",Ue,qe)}},u.compose(Te).navigation.addUpdate((Ue,qe)=>{Ie("navigation",Ue,qe)})}function xe(){let Te=this;Te.isPrinting||(U=Te,v.isSafari||Te.beforePrint(),setTimeout(()=>{x.focus(),x.print(),v.isSafari||setTimeout(()=>{Te.afterPrint()},1e3)},1))}function Ce(){let Te=this,Ie=Te.options.exporting,Ue=Ie.buttons,qe=Te.isDirtyExporting||!Te.exportSVGElements;Te.buttonOffset=0,Te.isDirtyExporting&&Te.destroyExport(),qe&&Ie.enabled!==!1&&(Te.exportEvents=[],Te.exportingGroup=Te.exportingGroup||Te.renderer.g("exporting-group").attr({zIndex:3}).add(),V(Ue,function(Ae){Te.addButton(Ae)}),Te.isDirtyExporting=!1)}function Ne(Te,Ie){let Ue=Te.indexOf("</svg>")+6,qe=Te.substr(Ue);return Te=Te.substr(0,Ue),Ie&&Ie.exporting&&Ie.exporting.allowHTML&&qe&&(qe='<foreignObject x="0" y="0" width="'+Ie.chart.width+'" height="'+Ie.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+qe.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Te=Te.replace("</svg>",qe+"</svg>")),Te=Te.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"")}G.compose=function(Te,Ie){f.compose(Ie),m.compose(Te);let Ue=Te.prototype;Ue.exportChart||(Ue.afterPrint=fe,Ue.exportChart=Ee,Ue.inlineStyles=J,Ue.print=xe,Ue.sanitizeSVG=Ne,Ue.getChartHTML=Q,Ue.getSVG=oe,Ue.getSVGForExport=we,Ue.getFilename=ee,Ue.moveContainers=se,Ue.beforePrint=re,Ue.contextMenu=ke,Ue.addButton=ae,Ue.destroyExport=ve,Ue.renderExporting=Ce,Ue.callbacks.push(ce),A(Te,"init",de),v.isSafari&&x.matchMedia("print").addListener(function(qe){U&&(qe.matches?U.beforePrint():U.afterPrint())}),C.exporting=j(p.exporting,C.exporting),C.lang=j(p.lang,C.lang),C.navigation=j(p.navigation,C.navigation))}}(b||(b={})),b}),n(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(s,l,u){return s.HttpUtilities=s.HttpUtilities||u,s.ajax=s.HttpUtilities.ajax,s.getJSON=s.HttpUtilities.getJSON,s.post=s.HttpUtilities.post,l.compose(s.Chart,s.Renderer),s})})})(nk);var h7=nk.exports;const p7=Yh(h7);var rk={exports:{}};(function(i,e){(function(t,n){i.exports=n(Fe)})(typeof self<"u"?self:Xa,function(t){return function(n){function s(u){if(l[u])return l[u].exports;var r=l[u]={i:u,l:!1,exports:{}};return n[u].call(r.exports,r,r.exports,s),r.l=!0,r.exports}var l={};return s.m=n,s.c=l,s.d=function(u,r,p){s.o(u,r)||Object.defineProperty(u,r,{configurable:!1,enumerable:!0,get:p})},s.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(r,"a",r),r},s.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)},s.p="",s(s.s=0)}([function(n,s,l){function u(){return u=Object.assign?Object.assign.bind():function(x){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&(x[T]=D[T])}return x},u.apply(this,arguments)}function r(x){return v(x)||m(x)||f(x)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(x,A){{if(typeof x=="string")return y(x,A);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?y(x,A):void 0}}function m(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function v(x){if(Array.isArray(x))return y(x)}function y(x,A){(A==null||A>x.length)&&(A=x.length);for(var D=0,T=new Array(A);D<A;D++)T[D]=x[D];return T}function _(x){"@babel/helpers - typeof";return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(x)}Object.defineProperty(s,"__esModule",{value:!0}),l.d(s,"HighchartsReact",function(){return S});var b=l(1),C=l.n(b),E=typeof window<"u"?b.useLayoutEffect:b.useEffect,S=Object(b.memo)(Object(b.forwardRef)(function(x,A){var D=Object(b.useRef)(),T=Object(b.useRef)(),k=Object(b.useRef)(x.constructorType),N=Object(b.useRef)(x.highcharts);return E(function(){function W(){var K=x.highcharts||(typeof window>"u"?"undefined":_(window))==="object"&&window.Highcharts,j=x.constructorType||"chart";K?K[j]?x.options?T.current=K[j](D.current,x.options,x.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(T.current){if(x.allowChartUpdate!==!1)if(x.constructorType!==k.current||x.highcharts!==N.current)k.current=x.constructorType,N.current=x.highcharts,W();else if(!x.immutable&&T.current){var Z;(Z=T.current).update.apply(Z,[x.options].concat(r(x.updateArgs||[!0,!0])))}else W()}else W()},[x.options,x.allowChartUpdate,x.updateArgs,x.containerProps,x.highcharts,x.constructorType]),E(function(){return function(){T.current&&(T.current.destroy(),T.current=null)}},[]),Object(b.useImperativeHandle)(A,function(){return{get chart(){return T.current},container:D}},[]),C.a.createElement("div",u({},x.containerProps,{ref:D}))}));s.default=S},function(n,s){n.exports=t}])})})(rk);var f7=rk.exports;const sk=Yh(f7),m7="_chartContainer_1sr1q_1",g7="_chart_1sr1q_1",y7="_menu_1sr1q_10",Cv={chartContainer:m7,chart:g7,menu:y7},x7="",v7={"Bi-Week":" ",Week:x7},b7="Tden",_7={"Bi-Week":"Dvoutden",Week:b7},w7="Week",C7={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:w7,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},T7="Semana",S7={"Bi-Week":"Quincenal",Week:T7},E7="Semana",k7={"Bi-Week":"Cada dos semanas",Week:E7},A7="Semaine",M7={"Bi-Week":"Bi-hebdomadaire",Week:A7},P7="Minggu",I7={"Bi-Week":"",Week:P7},D7="",R7={"Bi-Week":"",Week:D7},L7="Uke",N7={"Bi-Week":"Toukentlig",Week:L7},z7="Week",j7={"Bi-Week":"",Week:z7},O7="",F7={"Bi-Week":"",Week:O7},B7="",$7={"Bi-Week":"",Week:B7},U7="Semana",V7={"Bi-Week":"Bimensal",Week:U7},G7="Semana",H7={"Bi-Week":"",Week:G7},q7="",W7={"Bi-Week":"",Week:q7},Y7="",Z7={"Bi-Week":"",Week:Y7},X7="",K7={"Bi-Week":"",Week:X7},Q7="",J7={"Bi-Week":"",Week:Q7},e$="",t$={"Bi-Week":"-",Week:e$},i$="Hafta",n$={"Bi-Week":"Juft-Hafta",Week:i$},r$="Tun",s$={"Bi-Week":"K 2 tun ny",Week:r$},a$="",o$={"Bi-Week":"",Week:a$},l$="",c$={"Bi-Week":"",Week:l$},Or="default";Oe.addResources("ar",Or,v7);Oe.addResources("cs",Or,_7);Oe.addResources("en",Or,C7);Oe.addResources("es",Or,S7);Oe.addResources("es_419",Or,k7);Oe.addResources("fr",Or,M7);Oe.addResources("id",Or,I7);Oe.addResources("lo",Or,R7);Oe.addResources("nb",Or,N7);Oe.addResources("nl",Or,j7);Oe.addResources("prs",Or,F7);Oe.addResources("ps",Or,$7);Oe.addResources("pt",Or,V7);Oe.addResources("pt_BR",Or,H7);Oe.addResources("ru",Or,W7);Oe.addResources("si",Or,Z7);Oe.addResources("uk",Or,K7);Oe.addResources("ur",Or,J7);Oe.addResources("uz_UZ_Cyrl",Or,t$);Oe.addResources("uz_UZ_Latn",Or,n$);Oe.addResources("vi",Or,s$);Oe.addResources("zh",Or,o$);Oe.addResources("zh_CN",Or,c$);const ak={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},u$={nepali:{"ne-NP":{monthNames:["","","","","","","","","","","",""],dayNamesShort:["","","","","","",""],numbers:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},Ra={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class d$ extends zr.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:n,isoMonth:s,isoDay:l}=e.getISOFields();return(t=Sv({year:n,month:s,day:l}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:n}=e;return Ra[t][n]}month(e){var t;const{isoYear:n,isoMonth:s,isoDay:l}=e.getISOFields();return(t=Sv({year:n,month:s,day:l}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return ok(t)}day(e){const{isoYear:t,isoMonth:n,isoDay:s}=e.getISOFields(),{day:l}=Sv({year:t,month:n,day:s});return l}dateFromFields(e,t){const{year:n,day:s,month:l}=Tv({year:e.year,month:e.month,day:e.day},t);return new zr.PlainDate(n,l,s,this)}yearMonthFromFields(e){const{year:t,day:n,month:s}=Tv({year:e.year,month:e.month,day:e.day});return new zr.PlainYearMonth(t,s,this,n)}monthDayFromFields(e){const{year:t,day:n,month:s}=Tv({year:e.year,month:e.month,day:e.day});return new zr.PlainMonthDay(n,s,this,t)}}const Jb=Object.keys(Ra),Gy=Number(Jb[0]),Hy=Number(Jb[Jb.length-1]),Tv=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<Gy||t>Hy)throw new Error(`Conversions are only possible between ${Gy} and ${Hy} in Nepali calendar`);const{month:n,day:s=1}=i;if(e==="reject"&&(n<1||n>12||s>Ra[t][n]))throw new Error("Invalid date in Nepali calendar");let l=0,u=n;const r=t-(n>9||u===9&&s>=Ra[t][0]?56:57);for(n!==9&&(l=s,u--);u!==9;)u<=0&&(u=12,t--),l+=Ra[t][u],u--;n===9?(l+=s-Ra[t][0],l<0&&(l+=zr.PlainDate.from({year:r,day:1,month:1}).daysInYear)):l+=Ra[t][9]-Ra[t][0];const p=zr.PlainDate.from({year:r,month:1,day:1}).add({days:l});return{year:p.year,month:p.month,monthCode:ok(p.month),day:p.day}},Sv=i=>{const e=zr.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,n=e.dayOfYear;let s=t+56;if(!Ra[s])throw new Error(`Conversions are only possible between ${Gy} and ${Hy} in Nepali calendar`);let l=9;const u=Ra[s][0];let r=Ra[s][l]-u+1;for(;n>r;){var p;l++,l>12&&(l=1,s++),r+=(p=Ra[s])===null||p===void 0?void 0:p[l]}if(!Ra[s])throw new Error(`Conversions are only possible between ${Gy} and ${Hy} in Nepali calendar`);const f=Ra[s][l]-(r-n);return{year:s,month:l,day:f}};function ok(i){return`M${i.toString().padStart(2,"0")}`}const T_={nepali:{calendar:new d$,locales:u$.nepali,defaultLocale:"en-NP"}},h$=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function p$(i,e){const t=i.match(h$);if(!t)throw new Error(Oe.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let n,s,l,u;t[1]?(n=t[1],s=t[3],l=t[5],u="YYYY-MM-DD"):(l=t[6],s=t[8],n=t[10],u="DD-MM-YYYY");const r=parseInt(n,10),p=parseInt(s,10),f=parseInt(l,10);return{year:r,month:p,day:f,format:u}}let VC;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(VC||(VC={}));const Xc=i=>!!T_[i],Mc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},fo=(i,e,t)=>{var n;const s=(n=i.eraYear)!==null&&n!==void 0?n:i.year,l=Mc(i.month);let u=i.day;e==="endOfMonth"?u=i.daysInMonth:e==="startOfMonth"&&(u=1);const r=Mc(u);return t==="DD-MM-YYYY"?`${r}-${l}-${s}`:`${s}-${l}-${r}`},lk=i=>{var e;if(!Xc(i))return i;const n=(e=T_[i])===null||e===void 0?void 0:e.calendar;if(!n)throw new Error(`No implemenation found for custom calendar ${i}`);return n},f$=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],m$=(i,e)=>{const t=Object.keys(i).find(n=>{var s,l;return((s=n.split("-"))===null||s===void 0||(l=s[0])===null||l===void 0?void 0:l.toLowerCase())===e});if(t)return i[t]},S_=(i,e)=>{var t,n;const s=T_[i];if(!s)return;const l=s.locales||{},u=(t=(n=e&&(l==null?void 0:l[e]))!==null&&n!==void 0?n:m$(l,e))!==null&&t!==void 0?t:l==null?void 0:l[s.defaultLocale];if(!u)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${s.defaultLocale}`);return u},g$=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const n=Xc(e.calendar),s=i instanceof zr.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return n?fo(i):s.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},y$=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const n=Xc(e.calendar),s=S_(e.calendar,e.locale);return n?(s==null||(t=s.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:f$.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},x$=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const n=Xc(e.calendar),s=S_(e.calendar,e.locale);return n?s==null?void 0:s.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},v$=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=Xc(e.calendar),n=S_(e.calendar,e.locale),s=n==null?void 0:n.dayNamesShort[i.dayOfWeek-1];return t&&s?s:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},b$=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return Xc(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},Ju={localiseYear:b$,localiseDateLabel:g$,localiseWeekLabel:y$,localiseMonth:x$,localiseWeekDayLabel:v$},ck=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,n]=i.replace(/_/g,"-").split("-");let s=e;n&&(s=`${s}-${n}`),t&&(s=`${s}-${t}`);try{const l=Intl.DateTimeFormat.supportedLocalesOf(s);return l&&l.length===1?s:void 0}catch{return}},_$=i=>{let{date:e,calendar:t}=i;const{year:n,month:s,day:l}=p$(e);return zr.PlainDate.from({year:n,month:s,day:l,calendar:t})},ql=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return _$({date:e,calendar:t});if(e instanceof Date)return zr.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof zr.PlainDate)return zr.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(Oe.t('Unrecognized date, received "{{date}}"',{date:e}))},us=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],w$=us.filter(i=>i.match(/WEEKLY/)),uk=us.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),Am=us.filter(i=>i.match(/QUARTERLY/)),Mm=us.filter(i=>i.match(/SIXMONTHLY/)),C$=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],T$=us.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),dk=uk.filter(i=>i!=="MONTHLY"),S$=us.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),E$=us.filter(i=>i.match(/^FY[A-Z]{3}$/));[...C$,...us.filter(i=>i.match(/JAN$/))];const k$=us.filter(i=>i.match(/FEB$/)),A$=us.filter(i=>i.match(/MAR$/)),M$=us.filter(i=>i.match(/APR$/)),P$=us.filter(i=>i.match(/MAY$/)),I$=us.filter(i=>i.match(/JUN$/)),D$=us.filter(i=>i.match(/JUL$/)),R$=us.filter(i=>i.match(/AUG$/)),L$=us.filter(i=>i.match(/SEP$/)),N$=us.filter(i=>i.match(/OCT$/)),z$=us.filter(i=>i.match(/NOV$/)),j$=us.filter(i=>i.match(/DEC/)),{localiseDateLabel:O$}=Ju,hk=i=>{let{date:e,calendar:t,locale:n}=i;const s=e.year,l=String(e.month).padStart(2,"0"),u=String(e.day).padStart(2,"0"),r=`${s}${l}${u}`,p=O$(e,{calendar:t,locale:n},{dateStyle:"long"});return{periodType:"DAILY",id:r,iso:r,displayName:p,name:fo(e),startDate:fo(e),endDate:fo(e)}},F$=i=>{let{year:e,calendar:t,endsBefore:n,locale:s}=i;const l=n?ql({calendar:t,date:n}):null,u=zr.PlainDate.from({year:e,month:1,day:1,calendar:t}),r=[];for(let p=0;p<u.daysInYear;p++){const f=u.add({days:p});if(l&&zr.PlainDate.compare(f,l)>-1)break;const m=hk({date:f,calendar:t,locale:s});r.push(m)}return r},Fh=i=>k$.includes(i)?"FEB":A$.includes(i)?"MAR":M$.includes(i)?"APR":P$.includes(i)?"MAY":I$.includes(i)?"JUN":D$.includes(i)?"JUL":R$.includes(i)?"AUG":L$.includes(i)?"SEP":N$.includes(i)?"OCT":z$.includes(i)?"NOV":j$.includes(i)?"DEC":"JAN",ll={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},B$=i=>{let{periodType:e,month:t,year:n,calendar:s,locale:l}=i;const u=H$({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),r=U$(e),p=t.add({months:r}),f=$$({periodType:e,currentMonth:t,year:n,index:u});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const m=zr.PlainDate.from({year:p.year,month:p.month,day:1,calendar:p.calendar}).subtract({days:1}),v=V$({periodType:e,month:t,locale:l,calendar:s,nextMonth:p.subtract({months:1}),index:u});return{periodType:e,id:f,iso:f,name:v,displayName:v,startDate:fo(t,"startOfMonth"),endDate:fo(m,"endOfMonth")}},$$=i=>{let{periodType:e,currentMonth:t,year:n,index:s}=i;if(e==="BIMONTHLY")return`${n}${Mc(s)}B`;if(e==="QUARTERLY")return`${n}Q${s}`;if(e==="SIXMONTHLY")return`${n}S${s}`;if(Am.includes(e)){const l=ll[Fh(e)].name;return`${n}${l}Q${s}`}if(Mm.includes(e)){const l=ll[Fh(e)].name;return`${n}${l}S${s}`}return`${n}${Mc(t.month)}`},U$=i=>{if(Mm.includes(i))return 6;if(Am.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},V$=i=>{const{periodType:e,month:t,nextMonth:n,calendar:s,locale:l}=i;if(Xc(s))return G$(i);const u={month:"long",year:"numeric",calendar:s},r={month:"long",calendar:s};let p="";if(dk.includes(e)){const f=t.year===n.year?r:u;p=`${t.toLocaleString(l,f)} - ${n.toLocaleString(l,u)}`}else p=`${t.toLocaleString(l,u)}`;return p=p.replace(/ERA\d+\s*/g,"").trim(),p},G$=i=>{let{periodType:e,month:t,nextMonth:n,calendar:s,locale:l}=i,u="";if(dk.includes(e)){const r=t.year!==n.year;u=`${Ju.localiseMonth(t,{locale:l,calendar:s},{})}${r?` ${t.year}`:""} - ${Ju.localiseMonth(n,{locale:l,calendar:s},{})} ${n.year}`}else u=`${Ju.localiseMonth(t,{locale:l,calendar:s},{})} ${n.year}`;return u},H$=i=>{let{periodType:e,month:t,monthsInYear:n}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(Am.includes(e))return W$(e,t,n);if(Mm.includes(e))return q$(e,t,n);throw new Error(`Unrecognized period type "${e}"`)},pk=(i,e)=>[...Array(e-i+1).fill(null).map((n,s)=>s+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),fk=(i,e)=>{const t=[];for(let n=0;n<12;n+=e)t.push(i.slice(n,n+e));return t},q$=(i,e,t)=>{const n=Fh(i),s=ll[n].value,l=pk(s,t);return fk(l,6)[1].includes(e)?2:1},W$=(i,e,t)=>{const n=Fh(i),s=ll[n].value,l=pk(s,t),u=fk(l,3);return u[1].includes(e)?2:u[2].includes(e)?3:u[3].includes(e)?4:1},E_=i=>{let{period:e,date:t,calendar:n}=i;const s=ql({calendar:n,date:e.startDate}),l=ql({calendar:n,date:e.endDate}),u=zr.PlainDate.compare(t,s)<1,r=zr.PlainDate.compare(s,t)===-1,p=zr.PlainDate.compare(t,l)<1;return u||r&&p},Y$=i=>{let{year:e,calendar:t,periodType:n,endsBefore:s,locale:l}=i,u=zr.PlainDate.from({year:e,month:X$(n),day:t.toString()==="nepali"?14:1,calendar:t});const r=[];for(;u.year===e||K$(n,r.length);){const p=Q$({periodType:n,currentMonth:u.month,year:e,calendar:t});if(!Z$(t,u)){const v=B$({periodType:n,month:u,year:e,calendar:t,locale:l});if(s&&E_({period:v,date:s,calendar:t}))break;r.push(v)}const m=u.add({months:p});u=ql({date:m,calendar:t})}return r},Z$=(i,e)=>i==="ethiopic"&&e.month===13,X$=i=>{if(T$.includes(i)){const e=Fh(i);return ll[e].value}return 1},K$=(i,e)=>Mm.includes(i)?e<2:Am.includes(i)?e<4:!1,Q$=i=>{let{periodType:e}=i;if(Mm.includes(e))return 6;if(Am.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},fc={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},J$=i=>{let{year:e,calendar:t,periodType:n,startingDay:s,endsBefore:l}=i;const u=eU(n,s);let r=tU({year:e,calendar:t,periodType:n,startingDay:u});const p=[];let f=1;const m=n==="BIWEEKLY"?13:6;do{const v=r.add({days:m});if(l&&E_({period:{startDate:fo(r),endDate:fo(v)},date:l,calendar:t}))break;const y=nU({periodType:n,startingDay:u,year:e,weekIndex:f});if(!(v.year===e+1&&v.day>=4)){const _=rU({periodType:n,date:r,nextWeek:v,weekIndex:f});p.push({periodType:n,id:y,iso:y,name:_,displayName:_,startDate:fo(r),endDate:fo(v)})}r=ql({date:v,calendar:t}).add({days:1}),f++}while(r.year===e);return p},eU=(i,e)=>{switch(i){case"WEEKLYMON":return fc.Monday;case"WEEKLYTUE":return fc.Tuesday;case"WEEKLYWED":return fc.Wednesday;case"WEEKLYTHU":return fc.Thursday;case"WEEKLYFRI":return fc.Friday;case"WEEKLYSAT":return fc.Saturday;case"WEEKLYSUN":return fc.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||fc.Monday}},tU=i=>{const{year:e,calendar:t,startingDay:n}=i,s=zr.PlainDate.from({year:e,month:1,day:4,calendar:t}),l=s.dayOfWeek-n;return l>0?s.subtract({days:l}):l<0?s.subtract({days:l+7}):s},iU={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},nU=i=>{let{startingDay:e,periodType:t,year:n,weekIndex:s}=i;const l=t==="BIWEEKLY"?"BiW":"W";return`${n}${iU[e]}${l}${s}`},rU=i=>{let{periodType:e,date:t,nextWeek:n,weekIndex:s}=i;const{year:l,month:u,day:r}=t,{year:p,month:f,day:m}=n;return`${e==="BIWEEKLY"?Oe.t("Bi-Week"):Oe.t("Week")} ${s} - ${l}-${Mc(u)}-${Mc(r)} - ${p}-${Mc(f)}-${Mc(m)}`},mk=i=>{if(i==="YEARLY")return 1;const e=Fh(i),t=ll[e];return(t==null?void 0:t.value)||1},gk={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},yk=i=>{let{periodType:e,year:t,locale:n,calendar:s}=i;const l=mk(e),u=sU({periodType:e,year:t,month:l}),r=l.toString().padStart(2,"0"),p=ql({date:`${t}-${r}-01`,calendar:s}),f=ql({date:`${t+1}-${r}-01`,calendar:s}).subtract({days:1}),m=oU(e,p,{locale:n,calendar:s});return{periodType:e,id:u,iso:u,name:m,displayName:m,startDate:fo(p,"startOfMonth"),endDate:fo(f,"endOfMonth")}},sU=i=>{let{periodType:e,year:t,month:n}=i;if(e==="YEARLY")return t.toString();if(aU(e)){const s=gk[n];return`${t}${s}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},aU=i=>E$.includes(i),oU=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(Xc(t.calendar))return lU(e,t);const n={month:"long",year:"numeric",calendar:t.calendar},s=Ju.localiseMonth(e,t,n),l=Ju.localiseMonth(e.add({months:e.monthsInYear-1}),t,n);let u=`${s} - ${l}`;return u=u.replace(/ERA\d+\s*/g,"").trim(),u},lU=(i,e)=>{const t=l=>`${Ju.localiseMonth(l,e,{})} ${l.year}`,n=zr.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(n)}`},cU=i=>{let{year:e,calendar:t,periodType:n,endsBefore:s,yearsCount:l,locale:u}=i;const r=mk(n),p=zr.PlainDate.from({year:e,month:r,day:t.toString()==="nepali"?14:1,calendar:t}),f=zr.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),m=f.eraYear||f.year,v=[],y=l??e-m+1;for(let _=0;_<y;_++){const b=p.year-_,C=yk({periodType:n,year:b,locale:u,calendar:t});s&&E_({period:C,date:s,calendar:t})||v.push(C)}return v},Xg=i=>{var e,t;let{periodType:n,year:s,endsBefore:l,calendar:u,locale:r="en",yearsCount:p=10,startingDay:f=1}=i,m;if(typeof s=="number")m=s;else if(!isNaN(s)&&!isNaN(parseInt(s)))m=parseInt(s);else throw new Error("year must be a number");const v=lk((e=ak[u])!==null&&e!==void 0?e:u),y=(t=ck(r))!==null&&t!==void 0?t:"en",_=l?ql({calendar:v,date:l}):void 0;if(w$.includes(n))return J$({year:m,periodType:n,calendar:v,startingDay:f,endsBefore:_});if(S$.includes(n))return cU({year:m,periodType:n,locale:y,calendar:v,endsBefore:_,yearsCount:p});if(uk.includes(n))return Y$({year:m,periodType:n,locale:y,calendar:v,endsBefore:_});if(n==="DAILY")return F$({year:m,locale:y,calendar:v,endsBefore:_});throw new Error(`can not generate period for unrecognised period type "${n}"`)},uU=new RegExp("^([0-9]{4})W([0-9]+)$"),dU=new RegExp("^([0-9]{4})BiW([0-9]+)$"),hU=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),pU=new RegExp("^([0-9]{4})([0-9]{2})$"),fU=new RegExp("^([0-9]{4})([0-9]{2})B$"),mU=new RegExp("^([0-9]{4})Q([0-9])$"),gU=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),yU=new RegExp("^([0-9]{4})S([0-9])$"),xU=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),vU=new RegExp("^([0-9]{4})$"),bU=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),_U=Object.values(gk).slice(1).join("|"),wU=new RegExp(`^[0-9]{4}(${_U})?$`),CU=i=>wU.test(i),GC=Object.values(ll).map(i=>{let{name:e}=i;return e}).join("|"),TU=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${GC})?Q[0-9]$`,`^[0-9]{4}(${GC})?S[0-9]$`].join("|"),SU=new RegExp(TU),EU=i=>SU.test(i),kU=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),AU=i=>/^[0-9]{8}$/.test(i),MU=i=>{if(pU.test(i))return"MONTHLY";if(fU.test(i))return"BIMONTHLY";if(mU.test(i))return"QUARTERLY";const e=i.match(gU);if(e){const n=e[2],s=Object.entries(ll).find(u=>{let[,{name:r}]=u;return r===n});if(!s)throw new Error("@TODO");const[l]=s;return`QUARTERLY${l}`}if(yU.test(i))return"SIXMONTHLY";const t=i.match(xU);if(t){const n=t[2],s=Object.entries(ll).find(u=>{let[,{name:r}]=u;return r===n});if(!s)throw new Error("@TODO");const[l]=s;return`SIXMONTHLY${l}`}throw new Error(Oe.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},PU=i=>{if(uU.test(i))return"WEEKLY";if(dU.test(i))return"BIWEEKLY";const e=i.match(hU);if(e){const[,,t]=e,n=`WEEKLY${t.toUpperCase()}`;if(!us.includes(n))throw new Error(Oe.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return n}throw new Error(Oe.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},IU=i=>{if(vU.test(i))return"YEARLY";const e=i.match(bU);if(e){const t=e[2].slice(0,3),n=Object.entries(ll).find(l=>{let[,{name:u}]=l;return u.startsWith(t)});if(!n)throw new Error("@TODO");const[s]=n;return`FY${s}`}throw new Error(Oe.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},k_=i=>{var e,t;let{periodId:n,calendar:s,locale:l="en"}=i;const u=lk((e=ak[s])!==null&&e!==void 0?e:s),r=(t=ck(l))!==null&&t!==void 0?t:"en";if(CU(n)){const p=parseInt(n.substring(0,4),10),f=IU(n);return yk({year:p,periodType:f,calendar:u,locale:l})}if(EU(n)){const p=MU(n),f=parseInt(n.substring(0,4),10),v=Xg({periodType:p,year:f,calendar:u,locale:r}).find(b=>{let{id:C}=b;return C===n});if(v)return v;const _=Xg({year:f+1,periodType:p,calendar:u,locale:r}).slice(-1).find(b=>{let{id:C}=b;return C===n});if(!_)throw new Error(Oe.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:n}));return _}if(kU(n)){const p=parseInt(n.substring(0,4),10),f=PU(n),v=Xg({year:p,periodType:f,calendar:u,locale:l}).find(_=>{let{id:b}=_;return b===n});if(v)return v;const[y]=Xg({year:p-1,periodType:f,calendar:u,locale:l}).slice(-1);if(y.id===n)return y;throw new Error(Oe.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:n}))}if(AU(n)){const p=n.substring(0,4),f=n.substring(4,6),m=n.substring(6),v=ql({date:`${p}-${f}-${m}`,calendar:u});return hk({date:v,locale:l,calendar:u})}throw new Error(Oe.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:n}))};c7(np);p7(np);d7(np);const HC=(i,e)=>{const t=i.filter(s=>s.dataElement==="median").map(s=>[s.period,s.value]),n=i.filter(s=>s.dataElement==="quantile_low").map(s=>[s.period,s.value,i.filter(l=>l.dataElement==="quantile_high"&&l.period===s.period)[0].value]);return{title:{text:Oe.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return k_({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:Oe.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:Oe.t("Range"),data:n,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function DU(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(n=>n.orgUnit===t))}const RU=i=>{let{data:e,predictionTargetName:t}=i;const n=DU(e.dataValues),[s,l]=Fe.useState(HC(n[0],t)),[u,r]=Fe.useState(0),p=f=>{r(f),l(HC(n[f],t))};return pe.createElement(pe.Fragment,null,pe.createElement("div",{className:Cv.chartContainer},pe.createElement("div",null,pe.createElement(v1,{dense:!0},n.map((f,m)=>pe.createElement(Kr,{className:Cv.menu,active:u==m,key:m,label:f[0].displayName,onClick:()=>p(m)})))),pe.createElement("div",{className:Cv.chart},pe.createElement(sk,{highcharts:np,constructorType:"chart",options:s}))))};function df(i,e,t){return(e=LU(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function LU(i){var e=NU(i,"string");return typeof e=="symbol"?e:e+""}function NU(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class qC extends Error{constructor(e,t,n){super(n),df(this,"url",void 0),df(this,"status",void 0),df(this,"statusText",void 0),df(this,"body",void 0),df(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function Du(i,e,t){zU(i,e),e.set(i,t)}function zU(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jn(i,e){return i.get(xk(i,e))}function qo(i,e,t){return i.set(xk(i,e),t),t}function xk(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class jU extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var mc=new WeakMap,gc=new WeakMap,Dl=new WeakMap,dh=new WeakMap,hf=new WeakMap,Kg=new WeakMap,hh=new WeakMap;class OU{constructor(e){Du(this,mc,void 0),Du(this,gc,void 0),Du(this,Dl,void 0),Du(this,dh,void 0),Du(this,hf,void 0),Du(this,Kg,void 0),Du(this,hh,void 0),qo(mc,this,!1),qo(gc,this,!1),qo(Dl,this,!1),qo(dh,this,[]),qo(hf,this,new Promise((t,n)=>{qo(Kg,this,t),qo(hh,this,n);const s=r=>{Jn(mc,this)||Jn(gc,this)||Jn(Dl,this)||(qo(mc,this,!0),Jn(Kg,this)&&Jn(Kg,this).call(this,r))},l=r=>{Jn(mc,this)||Jn(gc,this)||Jn(Dl,this)||(qo(gc,this,!0),Jn(hh,this)&&Jn(hh,this).call(this,r))},u=r=>{Jn(mc,this)||Jn(gc,this)||Jn(Dl,this)||Jn(dh,this).push(r)};return Object.defineProperty(u,"isResolved",{get:()=>Jn(mc,this)}),Object.defineProperty(u,"isRejected",{get:()=>Jn(gc,this)}),Object.defineProperty(u,"isCancelled",{get:()=>Jn(Dl,this)}),e(s,l,u)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Jn(hf,this).then(e,t)}catch(e){return Jn(hf,this).catch(e)}finally(e){return Jn(hf,this).finally(e)}cancel(){if(!(Jn(mc,this)||Jn(gc,this)||Jn(Dl,this))){if(qo(Dl,this,!0),Jn(dh,this).length)try{for(const e of Jn(dh,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}Jn(dh,this).length=0,Jn(hh,this)&&Jn(hh,this).call(this,new jU("Request aborted"))}}get isCancelled(){return Jn(Dl,this)}}const zi={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},A_=i=>i!=null,Pm=i=>typeof i=="string",Ev=i=>Pm(i)&&i!=="",M_=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),vk=i=>i instanceof FormData,FU=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},BU=i=>{const e=[],t=(s,l)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(l))}`)},n=(s,l)=>{A_(l)&&(Array.isArray(l)?l.forEach(u=>{n(s,u)}):typeof l=="object"?Object.entries(l).forEach(u=>{let[r,p]=u;n(`${s}[${r}]`,p)}):t(s,l))};return Object.entries(i).forEach(s=>{let[l,u]=s;n(l,u)}),e.length>0?`?${e.join("&")}`:""},$U=(i,e)=>{const t=encodeURI,n=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(l,u)=>{var r;return(r=e.path)!==null&&r!==void 0&&r.hasOwnProperty(u)?t(String(e.path[u])):l}),s=`${i.BASE}${n}`;return e.query?`${s}${BU(e.query)}`:s},UU=i=>{if(i.formData){const e=new FormData,t=(n,s)=>{Pm(s)||M_(s)?e.append(n,s):e.append(n,JSON.stringify(s))};return Object.entries(i.formData).filter(n=>{let[s,l]=n;return A_(l)}).forEach(n=>{let[s,l]=n;Array.isArray(l)?l.forEach(u=>t(s,u)):t(s,l)}),e}},Qg=async(i,e)=>e,VU=async(i,e)=>{const[t,n,s,l]=await Promise.all([Qg(e,i.TOKEN),Qg(e,i.USERNAME),Qg(e,i.PASSWORD),Qg(e,i.HEADERS)]),u=Object.entries({Accept:"application/json",...l,...e.headers}).filter(r=>{let[p,f]=r;return A_(f)}).reduce((r,p)=>{let[f,m]=p;return{...r,[f]:String(m)}},{});if(Ev(t)&&(u.Authorization=`Bearer ${t}`),Ev(n)&&Ev(s)){const r=FU(`${n}:${s}`);u.Authorization=`Basic ${r}`}return e.body!==void 0&&(e.mediaType?u["Content-Type"]=e.mediaType:M_(e.body)?u["Content-Type"]=e.body.type||"application/octet-stream":Pm(e.body)?u["Content-Type"]="text/plain":vk(e.body)||(u["Content-Type"]="application/json")),new Headers(u)},GU=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):Pm(i.body)||M_(i.body)||vk(i.body)?i.body:JSON.stringify(i.body)}},HU=async(i,e,t,n,s,l,u)=>{const r=new AbortController,p={headers:l,body:n??s,method:e.method,signal:r.signal};return i.WITH_CREDENTIALS&&(p.credentials=i.CREDENTIALS),u(()=>r.abort()),await fetch(t,p)},qU=(i,e)=>{if(e){const t=i.headers.get(e);if(Pm(t))return t}},WU=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(s=>e.toLowerCase().startsWith(s))?await i.json():await i.text()}catch(e){console.error(e)}},YU=(i,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(n)throw new qC(i,e,n);if(!e.ok){var s,l;const u=(s=e.status)!==null&&s!==void 0?s:"unknown",r=(l=e.statusText)!==null&&l!==void 0?l:"unknown",p=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new qC(i,e,`Generic Error: status: ${u}; status text: ${r}; body: ${p}`)}},Bi=(i,e)=>new OU(async(t,n,s)=>{try{const l=$U(i,e),u=UU(e),r=GU(e),p=await VU(i,e);if(!s.isCancelled){const f=await HU(i,e,l,r,u,p,s),m=await WU(f),v=qU(f,e.responseHeader),y={url:l,ok:f.ok,status:f.status,statusText:f.statusText,body:v??m};YU(e,y),t(y.body)}}catch(l){n(l)}});class Bh{static makeDatasetAnalyticsMakeDatasetPost(e){return Bi(zi,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(e){return Bi(zi,{method:"GET",url:"/analytics/compatible-backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t){return Bi(zi,{method:"GET",url:"/analytics/backtest-overlap/{backtestId1}/{backtestId2}",path:{backtestId1:e,backtestId2:t},errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t,n,s){return Bi(zi,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t,splitPeriod:n,orgUnits:s},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return Bi(zi,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return Bi(zi,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return Bi(zi,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e,t){return Bi(zi,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},query:{orgUnits:t},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return Bi(zi,{method:"GET",url:"/analytics/data-sources"})}static createBacktestWithDataAnalyticsCreateBacktestWithDataPost(e){return Bi(zi,{method:"POST",url:"/analytics/create-backtest-with-data",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}}class Ms{static getBacktestsCrudBacktestsGet(){return Bi(zi,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return Bi(zi,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteBacktestBatchCrudBacktestsDelete(e){return Bi(zi,{method:"DELETE",url:"/crud/backtests",query:{ids:e},errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return Bi(zi,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return Bi(zi,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static updateBacktestCrudBacktestsBacktestIdPatch(e,t){return Bi(zi,{method:"PATCH",url:"/crud/backtests/{backtestId}",path:{backtestId:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return Bi(zi,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return Bi(zi,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return Bi(zi,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return Bi(zi,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return Bi(zi,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return Bi(zi,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return Bi(zi,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return Bi(zi,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return Bi(zi,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelTemplatesCrudModelTemplatesGet(){return Bi(zi,{method:"GET",url:"/crud/model-templates"})}static listConfiguredModelsCrudConfiguredModelsGet(){return Bi(zi,{method:"GET",url:"/crud/configured-models"})}static addConfiguredModelCrudConfiguredModelsPost(e){return Bi(zi,{method:"POST",url:"/crud/configured-models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return Bi(zi,{method:"GET",url:"/crud/models"})}static addModelCrudModelsPost(e){return Bi(zi,{method:"POST",url:"/crud/models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static debugEntryCrudDebugPost(){return Bi(zi,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return Bi(zi,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}}class bk{static faviconfaviconIcoGet(){return Bi(zi,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return Bi(zi,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Bi(zi,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:n},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return Bi(zi,{method:"GET",url:"/list-models"})}static listFeaturesListFeaturesGet(){return Bi(zi,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return Bi(zi,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return Bi(zi,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return Bi(zi,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return Bi(zi,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return Bi(zi,{method:"GET",url:"/status"})}static healthHealthGet(){return Bi(zi,{method:"GET",url:"/health"})}static versionVersionGet(){return Bi(zi,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return Bi(zi,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return Bi(zi,{method:"GET",url:"/system-info"})}}class od{static listJobsJobsGet(e,t,n){return Bi(zi,{method:"GET",url:"/jobs",query:{ids:e,status:t,type:n},errors:{422:"Validation Error"}})}static getJobStatusJobsJobIdGet(e){return Bi(zi,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return Bi(zi,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static cancelJobJobsJobIdCancelPost(e){return Bi(zi,{method:"POST",url:"/jobs/{job_id}/cancel",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return Bi(zi,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return Bi(zi,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return Bi(zi,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return Bi(zi,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function _k(i,e){const t=n=>{if(n.includes("W")){const[s,l]=n.split("W").map(Number),u=new Date(s,0,1),r=(l-1)*7;return new Date(u.setDate(u.getDate()+r))}else{const s=Number(n.slice(0,4)),l=Number(n.slice(4,6))-1;return new Date(s,l)}};return t(i).getTime()-t(e).getTime()}function ZU(i,e){var t;const n=e.map(_=>_.pe).sort(_k),s=n.map(_=>{var b,C;return(b=(C=e.find(E=>E.pe===_))===null||C===void 0?void 0:C.value)!==null&&b!==void 0?b:null}),l=(_,b)=>{if(!b)return new Map;const C=new Map;for(let E=0;E<_.length;E++)C.set(_[E],b[E]);return C},u=l(i.periods,i.averages.slice()),r=l(i.periods,i.ranges.slice()),p=l(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),f=(_,b)=>_.map(C=>{var E;return(E=b.get(C))!==null&&E!==void 0?E:null}),m=f(n,u),v=f(n,r),y=f(n,p);return{periods:n,ranges:v,averages:m,realValues:s,midranges:y}}const XU=(i,e,t)=>{const n=Array.from(new Set(i.map(m=>m.quantile))).sort(),s=n[0],l=n[1],u=n[n.length-2],r=n[n.length-1],p=m=>m.quantile===s?"quantile_low":m.quantile===r?"quantile_high":m.quantile===.5?"median":m.quantile===l?"quantile_mid_low":m.quantile===u?"quantile_mid_high":"unknown",f=Array.from(new Set(i.map(m=>m.modelName||t)));return Array.from(new Set(i.map(m=>m.splitPeriod))).map(m=>({splitPoint:m,evaluation:Array.from(new Set(i.map(v=>v.orgUnit))).map(v=>({orgUnitName:v,orgUnitId:v,models:f.map(y=>{const _=KU(i.filter(C=>C.orgUnit===v&&C.splitPeriod===m&&((C==null?void 0:C.modelName)||t)===y),p),b=ZU(_,e.filter(C=>C.ou===v));return{modelName:y,data:b}})}))}))};function KU(i,e){const t=Array.from(new Set(i.map(r=>r.period))).sort(_k),n=[],s=[],l=[];return t.forEach(r=>{var p,f,m,v,y;const _=((p=i.find(x=>x.period===r&&e(x)==="quantile_low"))===null||p===void 0?void 0:p.value)||0,b=((f=i.find(x=>x.period===r&&e(x)==="quantile_high"))===null||f===void 0?void 0:f.value)||0,C=((m=i.find(x=>x.period===r&&e(x)==="median"))===null||m===void 0?void 0:m.value)||0,E=((v=i.find(x=>x.period===r&&e(x)==="quantile_mid_high"))===null||v===void 0?void 0:v.value)||0,S=((y=i.find(x=>x.period===r&&e(x)==="quantile_mid_low"))===null||y===void 0?void 0:y.value)||0;n.push([_,b]),s.push([C]),l.push([S,E])}),{periods:t,ranges:n,averages:s,midranges:l}}function QU(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const JU=i=>{const{enabled:e,wrapperClassName:t,children:n,...s}=i;return e?pe.createElement(mx,s,l=>{let{onMouseOver:u,onMouseOut:r,ref:p}=l;return pe.createElement("span",{className:t,ref:f=>{f&&(f.onpointerenter=u,f.onpointerleave=r,p.current=f)}},n)}):n},wk=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}};function eV(i){np.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const tV=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],iV=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return wk(this.value)},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:eV},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:tV(i)}),nV=i=>{let{data:e,modelName:t,syncZoom:n}=i;const[s,l]=Fe.useState(!1);return Fe.useEffect(()=>{l(!0)},[e]),Fe.useEffect(()=>{s&&l(!1)},[s]),pe.createElement(pe.Fragment,null,!s&&pe.createElement(sk,{highcharts:np,options:iV(e,t,n)}))},rV="_title_4ki8g_1",sV="_comparionBox_4ki8g_7",aV="_comparionBoxSideBySide_4ki8g_15",oV="_comparionBoxSideBySideItem_4ki8g_22",Jg={title:rV,comparionBox:sV,comparionBoxSideBySide:aV,comparionBoxSideBySideItem:oV},WC=i=>{let{orgUnitsData:e}=i;return pe.createElement("div",{className:Jg.comparionBox},pe.createElement("div",{className:Jg.title},e.orgUnitName),pe.createElement("div",{className:Jg.comparionBoxSideBySide},e.models.map((t,n)=>pe.createElement("div",{key:n,className:Jg.comparionBoxSideBySideItem},pe.createElement(nV,{syncZoom:e.models.length>1,data:t.data,modelName:t.modelName})))))},Hx=0,Kc=1,rp=2,Ck=4;function Tk(i,e){return t=>i(e(t))}function lV(i,e){return e(i)}function Sk(i,e){return t=>i(e,t)}function YC(i,e){return()=>i(e)}function qx(i,e){return e(i),i}function Ir(...i){return i}function cV(i){i()}function ZC(i){return()=>i}function uV(...i){return()=>{i.map(cV)}}function P_(i){return i!==void 0}function sp(){}function tr(i,e){return i(Kc,e)}function Tn(i,e){i(Hx,e)}function I_(i){i(rp)}function ea(i){return i(Ck)}function ji(i,e){return tr(i,Sk(e,Hx))}function cl(i,e){const t=i(Kc,n=>{t(),e(n)});return t}function On(){const i=[];return(e,t)=>{switch(e){case rp:i.splice(0,i.length);return;case Kc:return i.push(t),()=>{const n=i.indexOf(t);n>-1&&i.splice(n,1)};case Hx:i.slice().forEach(n=>{n(t)});return;default:throw new Error(`unrecognized action ${e}`)}}}function ui(i){let e=i;const t=On();return(n,s)=>{switch(n){case Kc:s(e);break;case Hx:e=s;break;case Ck:return e}return t(n,s)}}function dV(i){let e,t;const n=()=>e&&e();return function(s,l){switch(s){case Kc:return l?t===l?void 0:(n(),t=l,e=tr(i,l),e):(n(),sp);case rp:n(),t=null;return;default:throw new Error(`unrecognized action ${s}`)}}}function eo(i){return qx(On(),e=>ji(i,e))}function va(i,e){return qx(ui(e),t=>ji(i,t))}function hV(...i){return e=>i.reduceRight(lV,e)}function Wt(i,...e){const t=hV(...e);return(n,s)=>{switch(n){case Kc:return tr(i,t(s));case rp:I_(i);return}}}function Ek(i,e){return i===e}function Ar(i=Ek){let e;return t=>n=>{i(e,n)||(e=n,t(n))}}function ln(i){return e=>t=>{i(t)&&e(t)}}function Ai(i){return e=>Tk(e,i)}function Ko(i){return e=>()=>e(i)}function el(i,e){return t=>n=>t(e=i(e,n))}function $h(i){return e=>t=>{i>0?i--:e(t)}}function Pc(i){let e=null,t;return n=>s=>{e=s,!t&&(t=setTimeout(()=>{t=void 0,n(e)},i))}}function XC(i){let e,t;return n=>s=>{e=s,t&&clearTimeout(t),t=setTimeout(()=>{n(e)},i)}}function kn(...i){const e=new Array(i.length);let t=0,n=null;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const r=Math.pow(2,u);tr(l,p=>{const f=t;t=t|r,e[u]=p,f!==s&&t===s&&n&&(n(),n=null)})}),l=>u=>{const r=()=>l([u].concat(e));t===s?r():n=r}}function KC(...i){return function(e,t){switch(e){case Kc:return uV(...i.map(n=>tr(n,t)));case rp:return;default:throw new Error(`unrecognized action ${e}`)}}}function pn(i,e=Ek){return Wt(i,Ar(e))}function xs(...i){const e=On(),t=new Array(i.length);let n=0;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const r=Math.pow(2,u);tr(l,p=>{t[u]=p,n=n|r,n===s&&Tn(e,t)})}),function(l,u){switch(l){case Kc:return n===s&&u(t),tr(e,u);case rp:return I_(e);default:throw new Error(`unrecognized action ${l}`)}}}function ir(i,e=[],{singleton:t}={singleton:!0}){return{id:pV(),constructor:i,dependencies:e,singleton:t}}const pV=()=>Symbol();function fV(i){const e=new Map,t=({id:n,constructor:s,dependencies:l,singleton:u})=>{if(u&&e.has(n))return e.get(n);const r=s(l.map(p=>t(p)));return u&&e.set(n,r),r};return t(i)}function mV(i,e){const t={},n={};let s=0;const l=i.length;for(;s<l;)n[i[s]]=1,s+=1;for(const u in e)n.hasOwnProperty(u)||(t[u]=e[u]);return t}const ey=typeof document<"u"?pe.useLayoutEffect:pe.useEffect;function kk(i,e,t){const n=Object.keys(e.required||{}),s=Object.keys(e.optional||{}),l=Object.keys(e.methods||{}),u=Object.keys(e.events||{}),r=pe.createContext({});function p(S,x){S.propsReady&&Tn(S.propsReady,!1);for(const A of n){const D=S[e.required[A]];Tn(D,x[A])}for(const A of s)if(A in x){const D=S[e.optional[A]];Tn(D,x[A])}S.propsReady&&Tn(S.propsReady,!0)}function f(S){return l.reduce((x,A)=>(x[A]=D=>{const T=S[e.methods[A]];Tn(T,D)},x),{})}function m(S){return u.reduce((x,A)=>(x[A]=dV(S[e.events[A]]),x),{})}const v=pe.forwardRef((S,x)=>{const{children:A,...D}=S,[T]=pe.useState(()=>qx(fV(i),W=>p(W,D))),[k]=pe.useState(YC(m,T));ey(()=>{for(const W of u)W in D&&tr(k[W],D[W]);return()=>{Object.values(k).map(I_)}},[D,k,T]),ey(()=>{p(T,D)}),pe.useImperativeHandle(x,ZC(f(T)));const N=t;return Y.jsx(r.Provider,{value:T,children:t?Y.jsx(N,{...mV([...n,...s,...u],D),children:A}):A})}),y=S=>pe.useCallback(Sk(Tn,pe.useContext(r)[S]),[S]),_=S=>{const A=pe.useContext(r)[S],D=pe.useCallback(T=>tr(A,T),[A]);return pe.useSyncExternalStore(D,()=>ea(A),()=>ea(A))},b=S=>{const A=pe.useContext(r)[S],[D,T]=pe.useState(YC(ea,A));return ey(()=>tr(A,k=>{k!==D&&T(ZC(k))}),[A,D]),D},C=pe.version.startsWith("18")?_:b;return{Component:v,usePublisher:y,useEmitterValue:C,useEmitter:(S,x)=>{const D=pe.useContext(r)[S];ey(()=>tr(D,x),[x,D])}}}const Ak=typeof document<"u"?pe.useLayoutEffect:pe.useEffect;var to=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(to||{});const gV={0:"debug",1:"log",2:"warn",3:"error"},yV=()=>typeof globalThis>"u"?window:globalThis,Qc=ir(()=>{const i=ui(3);return{log:ui((t,n,s=1)=>{var l;const u=(l=yV().VIRTUOSO_LOG_LEVEL)!=null?l:ea(i);s>=u&&console[gV[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:i}},[],{singleton:!0});function D_(i,e,t){const n=pe.useRef(null);let s=l=>{};if(typeof ResizeObserver<"u"){const l=pe.useMemo(()=>new ResizeObserver(u=>{const r=()=>{const p=u[0].target;p.offsetParent!==null&&i(p)};t?r():requestAnimationFrame(r)}),[i]);s=u=>{u&&e?(l.observe(u),n.current=u):(n.current&&l.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:s}}function bd(i,e,t){return D_(i,e,t).callbackRef}function xV(i,e,t,n,s,l,u,r,p){const f=pe.useCallback(m=>{const v=vV(m.children,e,r?"offsetWidth":"offsetHeight",s);let y=m.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const _=y.lastElementChild.dataset.viewportType==="window",b=u?r?u.scrollLeft:u.scrollTop:_?r?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:r?y.scrollLeft:y.scrollTop,C=u?r?u.scrollWidth:u.scrollHeight:_?r?document.documentElement.scrollWidth:document.documentElement.scrollHeight:r?y.scrollWidth:y.scrollHeight,E=u?r?u.offsetWidth:u.offsetHeight:_?r?window.innerWidth:window.innerHeight:r?y.offsetWidth:y.offsetHeight;n({scrollTop:Math.max(b,0),scrollHeight:C,viewportHeight:E}),l==null||l(r?QC("column-gap",getComputedStyle(m).columnGap,s):QC("row-gap",getComputedStyle(m).rowGap,s)),v!==null&&i(v)},[i,e,s,l,u,n]);return D_(f,t,p)}function vV(i,e,t,n){const s=i.length;if(s===0)return null;const l=[];for(let u=0;u<s;u++){const r=i.item(u);if(!r||r.dataset.index===void 0)continue;const p=parseInt(r.dataset.index),f=parseFloat(r.dataset.knownSize),m=e(r,t);if(m===0&&n("Zero-sized element, this should not happen",{child:r},to.ERROR),m===f)continue;const v=l[l.length-1];l.length===0||v.size!==m||v.endIndex!==p-1?l.push({startIndex:p,endIndex:p,size:m}):l[l.length-1].endIndex++}return l}function QC(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,to.WARN),e==="normal"?0:parseInt(e??"0",10)}function $c(i,e){return Math.round(i.getBoundingClientRect()[e])}function Mk(i,e){return Math.abs(i-e)<1.01}function Pk(i,e,t,n=sp,s,l){const u=pe.useRef(null),r=pe.useRef(null),p=pe.useRef(null),f=pe.useCallback(y=>{const _=y.target,b=_===window||_===document,C=l?b?window.pageXOffset||document.documentElement.scrollLeft:_.scrollLeft:b?window.pageYOffset||document.documentElement.scrollTop:_.scrollTop,E=l?b?document.documentElement.scrollWidth:_.scrollWidth:b?document.documentElement.scrollHeight:_.scrollHeight,S=l?b?window.innerWidth:_.offsetWidth:b?window.innerHeight:_.offsetHeight,x=()=>{i({scrollTop:Math.max(C,0),scrollHeight:E,viewportHeight:S})};y.suppressFlushSync?x():uI.flushSync(x),r.current!==null&&(C===r.current||C<=0||C===E-S)&&(r.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[i,e]);pe.useEffect(()=>{const y=s||u.current;return n(s||u.current),f({target:y,suppressFlushSync:!0}),y.addEventListener("scroll",f,{passive:!0}),()=>{n(null),y.removeEventListener("scroll",f)}},[u,f,t,n,s]);function m(y){const _=u.current;if(!_||(l?"offsetWidth"in _&&_.offsetWidth===0:"offsetHeight"in _&&_.offsetHeight===0))return;const b=y.behavior==="smooth";let C,E,S;_===window?(E=Math.max($c(document.documentElement,l?"width":"height"),l?document.documentElement.scrollWidth:document.documentElement.scrollHeight),C=l?window.innerWidth:window.innerHeight,S=l?document.documentElement.scrollLeft:document.documentElement.scrollTop):(E=_[l?"scrollWidth":"scrollHeight"],C=$c(_,l?"width":"height"),S=_[l?"scrollLeft":"scrollTop"]);const x=E-C;if(y.top=Math.ceil(Math.max(Math.min(x,y.top),0)),Mk(C,E)||y.top===S){i({scrollTop:S,scrollHeight:E,viewportHeight:C}),b&&e(!0);return}b?(r.current=y.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,r.current=null,e(!0)},1e3)):r.current=null,l&&(y={left:y.top,behavior:y.behavior}),_.scrollTo(y)}function v(y){l&&(y={left:y.top,behavior:y.behavior}),u.current.scrollBy(y)}return{scrollerRef:u,scrollByCallback:v,scrollToCallback:m}}const ka=ir(()=>{const i=On(),e=On(),t=ui(0),n=On(),s=ui(0),l=On(),u=On(),r=ui(0),p=ui(0),f=ui(0),m=ui(0),v=On(),y=On(),_=ui(!1),b=ui(!1),C=ui(!1);return ji(Wt(i,Ai(({scrollTop:E})=>E)),e),ji(Wt(i,Ai(({scrollHeight:E})=>E)),u),ji(e,s),{scrollContainerState:i,scrollTop:e,viewportHeight:l,headerHeight:r,fixedHeaderHeight:p,fixedFooterHeight:f,footerHeight:m,scrollHeight:u,smoothScrollTargetReached:n,horizontalDirection:b,skipAnimationFrameInResizeObserver:C,scrollTo:v,scrollBy:y,statefulScrollTop:s,deviation:t,scrollingInProgress:_}},[],{singleton:!0}),Vf={lvl:0};function Ik(i,e,t,n=Vf,s=Vf){return{k:i,v:e,lvl:t,l:n,r:s}}function pr(i){return i===Vf}function Ph(){return Vf}function e1(i,e){if(pr(i))return Vf;const{k:t,l:n,r:s}=i;if(e===t){if(pr(n))return s;if(pr(s))return n;{const[l,u]=Dk(n);return _y(ms(i,{k:l,v:u,l:Rk(n)}))}}else return e<t?_y(ms(i,{l:e1(n,e)})):_y(ms(i,{r:e1(s,e)}))}function Gf(i,e){if(!pr(i))return e===i.k?i.v:e<i.k?Gf(i.l,e):Gf(i.r,e)}function No(i,e,t="k"){if(pr(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const n=No(i.r,e,t);return n[0]===-1/0?[i.k,i.v]:n}return No(i.l,e,t)}function Ka(i,e,t){return pr(i)?Ik(e,t,1):e===i.k?ms(i,{k:e,v:t}):e<i.k?JC(ms(i,{l:Ka(i.l,e,t)})):JC(ms(i,{r:Ka(i.r,e,t)}))}function t1(i,e,t){if(pr(i))return[];const{k:n,v:s,l,r:u}=i;let r=[];return n>e&&(r=r.concat(t1(l,e,t))),n>=e&&n<=t&&r.push({k:n,v:s}),n<=t&&(r=r.concat(t1(u,e,t))),r}function Uu(i){return pr(i)?[]:[...Uu(i.l),{k:i.k,v:i.v},...Uu(i.r)]}function Dk(i){return pr(i.r)?[i.k,i.v]:Dk(i.r)}function Rk(i){return pr(i.r)?i.l:_y(ms(i,{r:Rk(i.r)}))}function ms(i,e){return Ik(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function kv(i){return pr(i)||i.lvl>i.r.lvl}function JC(i){return i1(Nk(i))}function _y(i){const{l:e,r:t,lvl:n}=i;if(t.lvl>=n-1&&e.lvl>=n-1)return i;if(n>t.lvl+1){if(kv(e))return Nk(ms(i,{lvl:n-1}));if(!pr(e)&&!pr(e.r))return ms(e.r,{l:ms(e,{r:e.r.l}),r:ms(i,{l:e.r.r,lvl:n-1}),lvl:n});throw new Error("Unexpected empty nodes")}else{if(kv(i))return i1(ms(i,{lvl:n-1}));if(!pr(t)&&!pr(t.l)){const s=t.l,l=kv(s)?t.lvl-1:t.lvl;return ms(s,{l:ms(i,{r:s.l,lvl:n-1}),r:i1(ms(t,{l:s.r,lvl:l})),lvl:s.lvl+1})}else throw new Error("Unexpected empty nodes")}}function Wx(i,e,t){if(pr(i))return[];const n=No(i,e)[0];return bV(t1(i,n,t))}function Lk(i,e){const t=i.length;if(t===0)return[];let{index:n,value:s}=e(i[0]);const l=[];for(let u=1;u<t;u++){const{index:r,value:p}=e(i[u]);l.push({start:n,end:r-1,value:s}),n=r,s=p}return l.push({start:n,end:1/0,value:s}),l}function bV(i){return Lk(i,({k:e,v:t})=>({index:e,value:t}))}function i1(i){const{r:e,lvl:t}=i;return!pr(e)&&!pr(e.r)&&e.lvl===t&&e.r.lvl===t?ms(e,{l:ms(i,{r:e.l}),lvl:t+1}):i}function Nk(i){const{l:e}=i;return!pr(e)&&e.lvl===i.lvl?ms(e,{r:ms(i,{l:e.r})}):i}function qy(i,e,t,n=0){let s=i.length-1;for(;n<=s;){const l=Math.floor((n+s)/2),u=i[l],r=t(u,e);if(r===0)return l;if(r===-1){if(s-n<2)return l-1;s=l-1}else{if(s===n)return l;n=l+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function zk(i,e,t){return i[qy(i,e,t)]}function _V(i,e,t,n){const s=qy(i,e,n),l=qy(i,t,n,s);return i.slice(s,l+1)}const R_=ir(()=>({recalcInProgress:ui(!1)}),[],{singleton:!0});function wV(i){const{size:e,startIndex:t,endIndex:n}=i;return s=>s.start===t&&(s.end===n||s.end===1/0)&&s.value===e}function eT(i,e){let t=0,n=0;for(;t<i;)t+=e[n+1]-e[n]-1,n++;return n-(t===i?0:1)}function CV(i,e){let t=pr(i)?0:1/0;for(const n of e){const{size:s,startIndex:l,endIndex:u}=n;if(t=Math.min(t,l),pr(i)){i=Ka(i,0,s);continue}const r=Wx(i,l-1,u+1);if(r.some(wV(n)))continue;let p=!1,f=!1;for(const{start:m,end:v,value:y}of r)p?(u>=m||s===y)&&(i=e1(i,m)):(f=y!==s,p=!0),v>u&&u>=m&&y!==s&&(i=Ka(i,u+1,y));f&&(i=Ka(i,l,s))}return[i,t]}function TV(){return{offsetTree:[],sizeTree:Ph(),groupOffsetTree:Ph(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function L_({index:i},e){return e===i?0:e<i?-1:1}function SV({offset:i},e){return e===i?0:e<i?-1:1}function EV(i){return{index:i.index,value:i}}function kV(i,e,t,n=0){return n>0&&(e=Math.max(e,zk(i,n,L_).offset)),Lk(_V(i,e,t,SV),EV)}function n1(i,e,t,n){let s=i,l=0,u=0,r=0,p=0;if(e!==0){p=qy(s,e-1,L_),r=s[p].offset;const m=No(t,e-1);l=m[0],u=m[1],s.length&&s[p].size===No(t,e)[1]&&(p-=1),s=s.slice(0,p+1)}else s=[];for(const{start:f,value:m}of Wx(t,e,1/0)){const v=f-l,y=v*u+r+v*n;s.push({offset:y,size:m,index:f}),l=f,r=y,u=m}return{offsetTree:s,lastIndex:l,lastOffset:r,lastSize:u}}function AV(i,[e,t,n,s]){e.length>0&&n("received item sizes",e,to.DEBUG);const l=i.sizeTree;let u=l,r=0;if(t.length>0&&pr(l)&&e.length===2){const y=e[0].size,_=e[1].size;u=t.reduce((b,C)=>Ka(Ka(b,C,y),C+1,_),u)}else[u,r]=CV(u,e);if(u===l)return i;const{offsetTree:p,lastIndex:f,lastSize:m,lastOffset:v}=n1(i.offsetTree,r,u,s);return{sizeTree:u,offsetTree:p,lastIndex:f,lastOffset:v,lastSize:m,groupOffsetTree:t.reduce((y,_)=>Ka(y,_,Hf(_,p,s)),Ph()),groupIndices:t}}function Hf(i,e,t){if(e.length===0)return 0;const{offset:n,index:s,size:l}=zk(e,i,L_),u=i-s,r=l*u+(u-1)*t+n;return r>0?r+t:r}function MV(i){return typeof i.groupIndex<"u"}function jk(i,e,t){if(MV(i))return e.groupIndices[i.groupIndex]+1;{const n=i.index==="LAST"?t:i.index;let s=Ok(n,e);return s=Math.max(0,s,Math.min(t,s)),s}}function Ok(i,e){if(!Yx(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function Yx(i){return!pr(i.groupOffsetTree)}function PV(i){return Uu(i).map(({k:e,v:t},n,s)=>{const l=s[n+1],u=l?l.k-1:1/0;return{startIndex:e,endIndex:u,size:t}})}const IV={offsetHeight:"height",offsetWidth:"width"},ml=ir(([{log:i},{recalcInProgress:e}])=>{const t=On(),n=On(),s=va(n,0),l=On(),u=On(),r=ui(0),p=ui([]),f=ui(void 0),m=ui(void 0),v=ui((T,k)=>$c(T,IV[k])),y=ui(void 0),_=ui(0),b=TV(),C=va(Wt(t,kn(p,i,_),el(AV,b),Ar()),b),E=va(Wt(p,Ar(),el((T,k)=>({prev:T.current,current:k}),{prev:[],current:[]}),Ai(({prev:T})=>T)),[]);ji(Wt(p,ln(T=>T.length>0),kn(C,_),Ai(([T,k,N])=>{const W=T.reduce((Z,K,j)=>Ka(Z,K,Hf(K,k.offsetTree,N)||j),Ph());return{...k,groupIndices:T,groupOffsetTree:W}})),C),ji(Wt(n,kn(C),ln(([T,{lastIndex:k}])=>T<k),Ai(([T,{lastIndex:k,lastSize:N}])=>[{startIndex:T,endIndex:k,size:N}])),t),ji(f,m);const S=va(Wt(f,Ai(T=>T===void 0)),!0);ji(Wt(m,ln(T=>T!==void 0&&pr(ea(C).sizeTree)),Ai(T=>[{startIndex:0,endIndex:0,size:T}])),t);const x=eo(Wt(t,kn(C),el(({sizes:T},[k,N])=>({changed:N!==T,sizes:N}),{changed:!1,sizes:b}),Ai(T=>T.changed)));tr(Wt(r,el((T,k)=>({diff:T.prev-k,prev:k}),{diff:0,prev:0}),Ai(T=>T.diff)),T=>{const{groupIndices:k}=ea(C);if(T>0)Tn(e,!0),Tn(l,T+eT(T,k));else if(T<0){const N=ea(E);N.length>0&&(T-=eT(-T,N)),Tn(u,T)}}),tr(Wt(r,kn(i)),([T,k])=>{T<0&&k("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:r},to.ERROR)});const A=eo(l);ji(Wt(l,kn(C),Ai(([T,k])=>{const N=k.groupIndices.length>0,W=[],Z=k.lastSize;if(N){const K=Gf(k.sizeTree,0);let j=0,V=0;for(;j<T;){const R=k.groupIndices[V],G=k.groupIndices.length===V+1?1/0:k.groupIndices[V+1]-R-1;W.push({startIndex:R,endIndex:R,size:K}),W.push({startIndex:R+1,endIndex:R+1+G-1,size:Z}),V++,j+=G+1}const $=Uu(k.sizeTree);return j!==T&&$.shift(),$.reduce((R,{k:G,v:U})=>{let B=R.ranges;return R.prevSize!==0&&(B=[...R.ranges,{startIndex:R.prevIndex,endIndex:G+T-1,size:R.prevSize}]),{ranges:B,prevIndex:G+T,prevSize:U}},{ranges:W,prevIndex:T,prevSize:0}).ranges}return Uu(k.sizeTree).reduce((K,{k:j,v:V})=>({ranges:[...K.ranges,{startIndex:K.prevIndex,endIndex:j+T-1,size:K.prevSize}],prevIndex:j+T,prevSize:V}),{ranges:[],prevIndex:0,prevSize:Z}).ranges})),t);const D=eo(Wt(u,kn(C,_),Ai(([T,{offsetTree:k},N])=>{const W=-T;return Hf(W,k,N)})));return ji(Wt(u,kn(C,_),Ai(([T,k,N])=>{if(k.groupIndices.length>0){if(pr(k.sizeTree))return k;let Z=Ph();const K=ea(E);let j=0,V=0,$=0;for(;j<-T;){$=K[V];const R=K[V+1]-$-1;V++,j+=R+1}if(Z=Uu(k.sizeTree).reduce((R,{k:G,v:U})=>Ka(R,Math.max(0,G+T),U),Z),j!==-T){const R=Gf(k.sizeTree,$);Z=Ka(Z,0,R);const G=No(k.sizeTree,-T+1)[1];Z=Ka(Z,1,G)}return{...k,sizeTree:Z,...n1(k.offsetTree,0,Z,N)}}else{const Z=Uu(k.sizeTree).reduce((K,{k:j,v:V})=>Ka(K,Math.max(0,j+T),V),Ph());return{...k,sizeTree:Z,...n1(k.offsetTree,0,Z,N)}}})),C),{data:y,totalCount:n,sizeRanges:t,groupIndices:p,defaultItemSize:m,fixedItemSize:f,unshiftWith:l,shiftWith:u,shiftWithOffset:D,beforeUnshiftWith:A,firstItemIndex:r,gap:_,sizes:C,listRefresh:x,statefulTotalCount:s,trackItemSizes:S,itemSize:v}},Ir(Qc,R_),{singleton:!0}),DV=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Fk(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!DV)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Im=ir(([{sizes:i,totalCount:e,listRefresh:t,gap:n},{scrollingInProgress:s,viewportHeight:l,scrollTo:u,smoothScrollTargetReached:r,headerHeight:p,footerHeight:f,fixedHeaderHeight:m,fixedFooterHeight:v},{log:y}])=>{const _=On(),b=On(),C=ui(0);let E=null,S=null,x=null;function A(){E&&(E(),E=null),x&&(x(),x=null),S&&(clearTimeout(S),S=null),Tn(s,!1)}return ji(Wt(_,kn(i,l,e,C,p,f,y),kn(n,m,v),Ai(([[D,T,k,N,W,Z,K,j],V,$,L])=>{const R=Fk(D),{align:G,behavior:U,offset:B}=R,H=N-1,q=jk(R,T,H);let ae=Hf(q,T.offsetTree,V)+Z;G==="end"?(ae+=$+No(T.sizeTree,q)[1]-k+L,q===H&&(ae+=K)):G==="center"?ae+=($+No(T.sizeTree,q)[1]-k+L)/2:ae-=W,B&&(ae+=B);const fe=re=>{A(),re?(j("retrying to scroll to",{location:D},to.DEBUG),Tn(_,D)):(Tn(b,!0),j("list did not change, scroll successful",{},to.DEBUG))};if(A(),U==="smooth"){let re=!1;x=tr(t,ce=>{re=re||ce}),E=cl(r,()=>{fe(re)})}else E=cl(Wt(t,RV(150)),fe);return S=setTimeout(()=>{A()},1200),Tn(s,!0),j("scrolling from index to",{index:q,top:ae,behavior:U},to.DEBUG),{top:ae,behavior:U}})),u),{scrollToIndex:_,scrollTargetReached:b,topListHeight:C}},Ir(ml,ka,Qc),{singleton:!0});function RV(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return n=>{n&&(e(!0),clearTimeout(t))}}}const qf="up",Pf="down",LV="none",NV={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},zV=0,Dm=ir(([{scrollContainerState:i,scrollTop:e,viewportHeight:t,headerHeight:n,footerHeight:s,scrollBy:l}])=>{const u=ui(!1),r=ui(!0),p=On(),f=On(),m=ui(4),v=ui(zV),y=va(Wt(KC(Wt(pn(e),$h(1),Ko(!0)),Wt(pn(e),$h(1),Ko(!1),XC(100))),Ar()),!1),_=va(Wt(KC(Wt(l,Ko(!0)),Wt(l,Ko(!1),XC(200))),Ar()),!1);ji(Wt(xs(pn(e),pn(v)),Ai(([x,A])=>x<=A),Ar()),r),ji(Wt(r,Pc(50)),f);const b=eo(Wt(xs(i,pn(t),pn(n),pn(s),pn(m)),el((x,[{scrollTop:A,scrollHeight:D},T,k,N,W])=>{const Z=A+T-D>-W,K={viewportHeight:T,scrollTop:A,scrollHeight:D};if(Z){let V,$;return A>x.state.scrollTop?(V="SCROLLED_DOWN",$=x.state.scrollTop-A):(V="SIZE_DECREASED",$=x.state.scrollTop-A||x.scrollTopDelta),{atBottom:!0,state:K,atBottomBecause:V,scrollTopDelta:$}}let j;return K.scrollHeight>x.state.scrollHeight?j="SIZE_INCREASED":T<x.state.viewportHeight?j="VIEWPORT_HEIGHT_DECREASING":A<x.state.scrollTop?j="SCROLLING_UPWARDS":j="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:j,state:K}},NV),Ar((x,A)=>x&&x.atBottom===A.atBottom))),C=va(Wt(i,el((x,{scrollTop:A,scrollHeight:D,viewportHeight:T})=>{if(Mk(x.scrollHeight,D))return{scrollTop:A,scrollHeight:D,jump:0,changed:!1};{const k=D-(A+T)<1;return x.scrollTop!==A&&k?{scrollHeight:D,scrollTop:A,jump:x.scrollTop-A,changed:!0}:{scrollHeight:D,scrollTop:A,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),ln(x=>x.changed),Ai(x=>x.jump)),0);ji(Wt(b,Ai(x=>x.atBottom)),u),ji(Wt(u,Pc(50)),p);const E=ui(Pf);ji(Wt(i,Ai(({scrollTop:x})=>x),Ar(),el((x,A)=>ea(_)?{direction:x.direction,prevScrollTop:A}:{direction:A<x.prevScrollTop?qf:Pf,prevScrollTop:A},{direction:Pf,prevScrollTop:0}),Ai(x=>x.direction)),E),ji(Wt(i,Pc(50),Ko(LV)),E);const S=ui(0);return ji(Wt(y,ln(x=>!x),Ko(0)),S),ji(Wt(e,Pc(100),kn(y),ln(([x,A])=>!!A),el(([x,A],[D])=>[A,D],[0,0]),Ai(([x,A])=>A-x)),S),{isScrolling:y,isAtTop:r,isAtBottom:u,atBottomState:b,atTopStateChange:f,atBottomStateChange:p,scrollDirection:E,atBottomThreshold:m,atTopThreshold:v,scrollVelocity:S,lastJumpDueToItemResize:C}},Ir(ka)),Jc=ir(([{log:i}])=>{const e=ui(!1),t=eo(Wt(e,ln(n=>n),Ar()));return tr(e,n=>{n&&ea(i)("props updated",{},to.DEBUG)}),{propsReady:e,didMount:t}},Ir(Qc),{singleton:!0});function N_(i,e){i==0?e():requestAnimationFrame(()=>N_(i-1,e))}function z_(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const Rm=ir(([{sizes:i,listRefresh:e,defaultItemSize:t},{scrollTop:n},{scrollToIndex:s,scrollTargetReached:l},{didMount:u}])=>{const r=ui(!0),p=ui(0),f=ui(!0);return ji(Wt(u,kn(p),ln(([m,v])=>!!v),Ko(!1)),r),ji(Wt(u,kn(p),ln(([m,v])=>!!v),Ko(!1)),f),tr(Wt(xs(e,u),kn(r,i,t,f),ln(([[,m],v,{sizeTree:y},_,b])=>m&&(!pr(y)||P_(_))&&!v&&!b),kn(p)),([,m])=>{cl(l,()=>{Tn(f,!0)}),N_(4,()=>{cl(n,()=>{Tn(r,!0)}),Tn(s,m)})}),{scrolledToInitialItem:r,initialTopMostItemIndex:p,initialItemFinalLocationReached:f}},Ir(ml,ka,Im,Jc),{singleton:!0});function tT(i){return i?i==="smooth"?"smooth":"auto":!1}const jV=(i,e)=>typeof i=="function"?tT(i(e)):e&&tT(i),OV=ir(([{totalCount:i,listRefresh:e},{isAtBottom:t,atBottomState:n},{scrollToIndex:s},{scrolledToInitialItem:l},{propsReady:u,didMount:r},{log:p},{scrollingInProgress:f}])=>{const m=ui(!1),v=On();let y=null;function _(C){Tn(s,{index:"LAST",align:"end",behavior:C})}tr(Wt(xs(Wt(pn(i),$h(1)),r),kn(pn(m),t,l,f),Ai(([[C,E],S,x,A,D])=>{let T=E&&A,k="auto";return T&&(k=jV(S,x||D),T=T&&!!k),{totalCount:C,shouldFollow:T,followOutputBehavior:k}}),ln(({shouldFollow:C})=>C)),({totalCount:C,followOutputBehavior:E})=>{y&&(y(),y=null),y=cl(e,()=>{ea(p)("following output to ",{totalCount:C},to.DEBUG),_(E),y=null})});function b(C){const E=cl(n,S=>{C&&!S.atBottom&&S.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(ea(p)("scrolling to bottom due to increased size",{},to.DEBUG),_("auto"))});setTimeout(E,100)}return tr(Wt(xs(pn(m),i,u),ln(([C,,E])=>C&&E),el(({value:C},[,E])=>({refreshed:C===E,value:E}),{refreshed:!1,value:0}),ln(({refreshed:C})=>C),kn(m,i)),([,C])=>{ea(l)&&b(C!==!1)}),tr(v,()=>{b(ea(m)!==!1)}),tr(xs(pn(m),n),([C,E])=>{C&&!E.atBottom&&E.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&_("auto")}),{followOutput:m,autoscrollToBottom:v}},Ir(ml,Dm,Im,Rm,Jc,Qc,ka));function FV(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}const Bk=ir(([{totalCount:i,groupIndices:e,sizes:t},{scrollTop:n,headerHeight:s}])=>{const l=On(),u=On(),r=eo(Wt(l,Ai(FV)));return ji(Wt(r,Ai(p=>p.totalCount)),i),ji(Wt(r,Ai(p=>p.groupIndices)),e),ji(Wt(xs(n,t,s),ln(([p,f])=>Yx(f)),Ai(([p,f,m])=>No(f.groupOffsetTree,Math.max(p-m,0),"v")[0]),Ar(),Ai(p=>[p])),u),{groupCounts:l,topItemsIndexes:u}},Ir(ml,ka));function Wf(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}function $k(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}const Wy="top",Yy="bottom",iT="none";function nT(i,e,t){return typeof i=="number"?t===qf&&e===Wy||t===Pf&&e===Yy?i:0:t===qf?e===Wy?i.main:i.reverse:e===Yy?i.main:i.reverse}function rT(i,e){return typeof i=="number"?i:i[e]||0}const j_=ir(([{scrollTop:i,viewportHeight:e,deviation:t,headerHeight:n,fixedHeaderHeight:s}])=>{const l=On(),u=ui(0),r=ui(0),p=ui(0),f=va(Wt(xs(pn(i),pn(e),pn(n),pn(l,Wf),pn(p),pn(u),pn(s),pn(t),pn(r)),Ai(([m,v,y,[_,b],C,E,S,x,A])=>{const D=m-x,T=E+S,k=Math.max(y-D,0);let N=iT;const W=rT(A,Wy),Z=rT(A,Yy);return _-=x,_+=y+S,b+=y+S,b-=x,_>m+T-W&&(N=qf),b<m-k+v+Z&&(N=Pf),N!==iT?[Math.max(D-y-nT(C,Wy,N)-W,0),D-k-S+v+nT(C,Yy,N)+Z]:null}),ln(m=>m!=null),Ar(Wf)),[0,0]);return{listBoundary:l,overscan:p,topListHeight:u,increaseViewportBy:r,visibleRange:f}},Ir(ka),{singleton:!0});function BV(i,e,t){if(Yx(e)){const n=Ok(i,e);return[{index:No(e.groupOffsetTree,n)[0],size:0,offset:0},{index:n,size:0,offset:0,data:t&&t[0]}]}return[{index:i,size:0,offset:0,data:t&&t[0]}]}const Av={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function sT(i,e,t){if(i.length===0)return[];if(!Yx(e))return i.map(f=>({...f,index:f.index+t,originalIndex:f.index}));const n=i[0].index,s=i[i.length-1].index,l=[],u=Wx(e.groupOffsetTree,n,s);let r,p=0;for(const f of i){(!r||r.end<f.index)&&(r=u.shift(),p=e.groupIndices.indexOf(r.start));let m;f.index===r.start?m={type:"group",index:p}:m={index:f.index-(p+1)+t,groupIndex:p},l.push({...m,size:f.size,offset:f.offset,originalIndex:f.index,data:f.data})}return l}function wy(i,e,t,n,s,l){const{lastSize:u,lastOffset:r,lastIndex:p}=s;let f=0,m=0;if(i.length>0){f=i[0].offset;const C=i[i.length-1];m=C.offset+C.size}const v=t-p,y=r+v*u+(v-1)*n,_=f,b=y-m;return{items:sT(i,s,l),topItems:sT(e,s,l),topListHeight:e.reduce((C,E)=>E.size+C,0),offsetTop:f,offsetBottom:b,top:_,bottom:m,totalCount:t,firstItemIndex:l}}function Uk(i,e,t,n,s,l){let u=0;if(t.groupIndices.length>0)for(const m of t.groupIndices){if(m-u>=i)break;u++}const r=i+u,p=z_(e,r),f=Array.from({length:r}).map((m,v)=>({index:v+p,size:0,offset:0,data:l[v+p]}));return wy(f,[],r,s,t,n)}const _d=ir(([{sizes:i,totalCount:e,data:t,firstItemIndex:n,gap:s},l,{visibleRange:u,listBoundary:r,topListHeight:p},{scrolledToInitialItem:f,initialTopMostItemIndex:m},{topListHeight:v},y,{didMount:_},{recalcInProgress:b}])=>{const C=ui([]),E=ui(0),S=On();ji(l.topItemsIndexes,C);const x=va(Wt(xs(_,b,pn(u,Wf),pn(e),pn(i),pn(m),f,pn(C),pn(n),pn(s),t),ln(([k,N,,W,,,,,,,Z])=>{const K=Z&&Z.length!==W;return k&&!N&&!K}),Ai(([,,[k,N],W,Z,K,j,V,$,L,R])=>{const G=Z,{sizeTree:U,offsetTree:B}=G,H=ea(E);if(W===0)return{...Av,totalCount:W};if(k===0&&N===0)return H===0?{...Av,totalCount:W}:Uk(H,K,Z,$,L,R||[]);if(pr(U))return H>0?null:wy(BV(z_(K,W),G,R),[],W,L,G,$);const q=[];if(V.length>0){const ke=V[0],ve=V[V.length-1];let Ee=0;for(const Q of Wx(U,ke,ve)){const ee=Q.value,oe=Math.max(Q.start,ke),we=Math.min(Q.end,ve);for(let J=oe;J<=we;J++)q.push({index:J,size:ee,offset:Ee,data:R&&R[J]}),Ee+=ee}}if(!j)return wy([],q,W,L,G,$);const ae=V.length>0?V[V.length-1]+1:0,fe=kV(B,k,N,ae);if(fe.length===0)return null;const re=W-1,ce=qx([],ke=>{for(const ve of fe){const Ee=ve.value;let Q=Ee.offset,ee=ve.start;const oe=Ee.size;if(Ee.offset<k){ee+=Math.floor((k-Ee.offset+L)/(oe+L));const J=ee-ve.start;Q+=J*oe+J*L}ee<ae&&(Q+=(ae-ee)*oe,ee=ae);const we=Math.min(ve.end,re);for(let J=ee;J<=we&&!(Q>=N);J++)ke.push({index:J,size:oe,offset:Q,data:R&&R[J]}),Q+=oe+L}});return wy(ce,q,W,L,G,$)}),ln(k=>k!==null),Ar()),Av);ji(Wt(t,ln(P_),Ai(k=>k==null?void 0:k.length)),e),ji(Wt(x,Ai(k=>k.topListHeight)),v),ji(v,p),ji(Wt(x,Ai(k=>[k.top,k.bottom])),r),ji(Wt(x,Ai(k=>k.items)),S);const A=eo(Wt(x,ln(({items:k})=>k.length>0),kn(e,t),ln(([{items:k},N])=>k[k.length-1].originalIndex===N-1),Ai(([,k,N])=>[k-1,N]),Ar(Wf),Ai(([k])=>k))),D=eo(Wt(x,Pc(200),ln(({items:k,topItems:N})=>k.length>0&&k[0].originalIndex===N.length),Ai(({items:k})=>k[0].index),Ar())),T=eo(Wt(x,ln(({items:k})=>k.length>0),Ai(({items:k})=>{let N=0,W=k.length-1;for(;k[N].type==="group"&&N<W;)N++;for(;k[W].type==="group"&&W>N;)W--;return{startIndex:k[N].index,endIndex:k[W].index}}),Ar($k)));return{listState:x,topItemsIndexes:C,endReached:A,startReached:D,rangeChanged:T,itemsRendered:S,initialItemCount:E,...y}},Ir(ml,Bk,j_,Rm,Im,Dm,Jc,R_),{singleton:!0}),$V=ir(([{sizes:i,firstItemIndex:e,data:t,gap:n},{initialTopMostItemIndex:s},{initialItemCount:l,listState:u},{didMount:r}])=>(ji(Wt(r,kn(l),ln(([,p])=>p!==0),kn(s,i,e,n,t),Ai(([[,p],f,m,v,y,_=[]])=>Uk(p,f,m,v,y,_))),u),{}),Ir(ml,Rm,_d,Jc),{singleton:!0}),Vk=ir(([{scrollVelocity:i}])=>{const e=ui(!1),t=On(),n=ui(!1);return ji(Wt(i,kn(n,e,t),ln(([s,l])=>!!l),Ai(([s,l,u,r])=>{const{exit:p,enter:f}=l;if(u){if(p(s,r))return!1}else if(f(s,r))return!0;return u}),Ar()),e),tr(Wt(xs(e,i,t),kn(n)),([[s,l,u],r])=>s&&r&&r.change&&r.change(l,u)),{isSeeking:e,scrollSeekConfiguration:n,scrollVelocity:i,scrollSeekRangeChanged:t}},Ir(Dm),{singleton:!0}),UV=ir(([{topItemsIndexes:i}])=>{const e=ui(0);return ji(Wt(e,ln(t=>t>=0),Ai(t=>Array.from({length:t}).map((n,s)=>s))),i),{topItemCount:e}},Ir(_d)),Gk=ir(([{footerHeight:i,headerHeight:e,fixedHeaderHeight:t,fixedFooterHeight:n},{listState:s}])=>{const l=On(),u=va(Wt(xs(i,n,e,t,s),Ai(([r,p,f,m,v])=>r+p+f+m+v.offsetBottom+v.bottom)),0);return ji(pn(u),l),{totalListHeight:u,totalListHeightChanged:l}},Ir(ka,_d),{singleton:!0});function Hk(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const VV=Hk(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),GV=ir(([{scrollBy:i,scrollTop:e,deviation:t,scrollingInProgress:n},{isScrolling:s,isAtBottom:l,scrollDirection:u,lastJumpDueToItemResize:r},{listState:p},{beforeUnshiftWith:f,shiftWithOffset:m,sizes:v,gap:y},{log:_},{recalcInProgress:b}])=>{const C=eo(Wt(p,kn(r),el(([,S,x,A],[{items:D,totalCount:T,bottom:k,offsetBottom:N},W])=>{const Z=k+N;let K=0;return x===T&&S.length>0&&D.length>0&&(D[0].originalIndex===0&&S[0].originalIndex===0||(K=Z-A,K!==0&&(K+=W))),[K,D,T,Z]},[0,[],0,0]),ln(([S])=>S!==0),kn(e,u,n,l,_,b),ln(([,S,x,A,,,D])=>!D&&!A&&S!==0&&x===qf),Ai(([[S],,,,,x])=>(x("Upward scrolling compensation",{amount:S},to.DEBUG),S))));function E(S){S>0?(Tn(i,{top:-S,behavior:"auto"}),Tn(t,0)):(Tn(t,0),Tn(i,{top:-S,behavior:"auto"}))}return tr(Wt(C,kn(t,s)),([S,x,A])=>{A&&VV()?Tn(t,x-S):E(-S)}),tr(Wt(xs(va(s,!1),t,b),ln(([S,x,A])=>!S&&!A&&x!==0),Ai(([S,x])=>x),Pc(1)),E),ji(Wt(m,Ai(S=>({top:-S}))),i),tr(Wt(f,kn(v,y),Ai(([S,{lastSize:x,groupIndices:A,sizeTree:D},T])=>{function k(N){return N*(x+T)}if(A.length===0)return k(S);{let N=0;const W=Gf(D,0);let Z=0,K=0;for(;Z<S;){Z++,N+=W;let j=A.length===K+1?1/0:A[K+1]-A[K]-1;Z+j>S&&(N-=W,j=S-Z+1),Z+=j,N+=k(j),K++}return N}})),S=>{Tn(t,S),requestAnimationFrame(()=>{Tn(i,{top:S}),requestAnimationFrame(()=>{Tn(t,0),Tn(b,!1)})})}),{deviation:t}},Ir(ka,Dm,_d,ml,Qc,R_)),HV=ir(([{didMount:i},{scrollTo:e},{listState:t}])=>{const n=ui(0);return tr(Wt(i,kn(n),ln(([,s])=>s!==0),Ai(([,s])=>({top:s}))),s=>{cl(Wt(t,$h(1),ln(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{Tn(e,s)})})}),{initialScrollTop:n}},Ir(Jc,ka,_d),{singleton:!0}),qV=ir(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ui(!1),n=va(Wt(xs(t,i,e),ln(([s])=>s),Ai(([,s,l])=>Math.max(0,s-l)),Pc(0),Ar()),0);return{alignToBottom:t,paddingTopAddition:n}},Ir(ka,Gk),{singleton:!0}),O_=ir(([{scrollTo:i,scrollContainerState:e}])=>{const t=On(),n=On(),s=On(),l=ui(!1),u=ui(void 0);return ji(Wt(xs(t,n),Ai(([{viewportHeight:r,scrollTop:p,scrollHeight:f},{offsetTop:m}])=>({scrollTop:Math.max(0,p-m),scrollHeight:f,viewportHeight:r}))),e),ji(Wt(i,kn(n),Ai(([r,{offsetTop:p}])=>({...r,top:r.top+p}))),s),{useWindowScroll:l,customScrollParent:u,windowScrollContainerState:t,windowViewportRect:n,windowScrollTo:s}},Ir(ka)),WV=({itemTop:i,itemBottom:e,viewportTop:t,viewportBottom:n,locationParams:{behavior:s,align:l,...u}})=>i<t?{...u,behavior:s,align:l??"start"}:e>n?{...u,behavior:s,align:l??"end"}:null,YV=ir(([{sizes:i,totalCount:e,gap:t},{scrollTop:n,viewportHeight:s,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:r,scrollingInProgress:p},{scrollToIndex:f}])=>{const m=On();return ji(Wt(m,kn(i,s,e,l,u,r,n),kn(t),Ai(([[v,y,_,b,C,E,S,x],A])=>{const{done:D,behavior:T,align:k,calculateViewLocation:N=WV,...W}=v,Z=jk(v,y,b-1),K=Hf(Z,y.offsetTree,A)+C+E,j=K+No(y.sizeTree,Z)[1],V=x+E,$=x+_-S,L=N({itemTop:K,itemBottom:j,viewportTop:V,viewportBottom:$,locationParams:{behavior:T,align:k,...W}});return L?D&&cl(Wt(p,ln(R=>R===!1),$h(ea(p)?1:2)),D):D&&D(),L}),ln(v=>v!==null)),f),{scrollIntoView:m}},Ir(ml,ka,Im,_d,Qc),{singleton:!0}),ZV=ir(([{sizes:i,sizeRanges:e},{scrollTop:t,headerHeight:n},{initialTopMostItemIndex:s},{didMount:l},{useWindowScroll:u,windowScrollContainerState:r,windowViewportRect:p}])=>{const f=On(),m=ui(void 0),v=ui(null),y=ui(null);return ji(r,v),ji(p,y),tr(Wt(f,kn(i,t,u,v,y,n)),([_,b,C,E,S,x,A])=>{const D=PV(b.sizeTree);E&&S!==null&&x!==null&&(C=S.scrollTop-x.offsetTop),C-=A,_({ranges:D,scrollTop:C})}),ji(Wt(m,ln(P_),Ai(XV)),s),ji(Wt(l,kn(m),ln(([,_])=>_!==void 0),Ar(),Ai(([,_])=>_.ranges)),e),{getState:f,restoreStateFrom:m}},Ir(ml,ka,Rm,Jc,O_));function XV(i){return{offset:i.scrollTop,index:0,align:"start"}}const KV=ir(([i,e,t,n,s,l,u,r,p,f])=>({...i,...e,...t,...n,...s,...l,...u,...r,...p,...f}),Ir(j_,$V,Jc,Vk,Gk,HV,qV,O_,YV,Qc)),QV=ir(([{totalCount:i,sizeRanges:e,fixedItemSize:t,defaultItemSize:n,trackItemSizes:s,itemSize:l,data:u,firstItemIndex:r,groupIndices:p,statefulTotalCount:f,gap:m,sizes:v},{initialTopMostItemIndex:y,scrolledToInitialItem:_,initialItemFinalLocationReached:b},C,E,S,{listState:x,topItemsIndexes:A,...D},{scrollToIndex:T},k,{topItemCount:N},{groupCounts:W},Z])=>(ji(D.rangeChanged,Z.scrollSeekRangeChanged),ji(Wt(Z.windowViewportRect,Ai(K=>K.visibleHeight)),C.viewportHeight),{totalCount:i,data:u,firstItemIndex:r,sizeRanges:e,initialTopMostItemIndex:y,scrolledToInitialItem:_,initialItemFinalLocationReached:b,topItemsIndexes:A,topItemCount:N,groupCounts:W,fixedItemHeight:t,defaultItemHeight:n,gap:m,...S,statefulTotalCount:f,listState:x,scrollToIndex:T,trackItemSizes:s,itemSize:l,groupIndices:p,...D,...Z,...C,sizes:v,...E}),Ir(ml,Rm,ka,ZV,OV,_d,Im,GV,UV,Bk,KV)),Mv="-webkit-sticky",aT="sticky",qk=Hk(()=>{if(typeof document>"u")return aT;const i=document.createElement("div");return i.style.position=Mv,i.style.position===Mv?Mv:aT});function Wk(i,e,t){const n=pe.useRef(null),s=pe.useCallback(p=>{if(p===null||!p.offsetParent)return;const f=p.getBoundingClientRect(),m=f.width;let v,y;if(e){const _=e.getBoundingClientRect(),b=f.top-_.top;v=_.height-Math.max(0,b),y=b+e.scrollTop}else v=window.innerHeight-Math.max(0,f.top),y=f.top+window.pageYOffset;n.current={offsetTop:y,visibleHeight:v,visibleWidth:m},i(n.current)},[i,e]),{callbackRef:l,ref:u}=D_(s,!0,t),r=pe.useCallback(()=>{s(u.current)},[s,u]);return pe.useEffect(()=>{if(e){e.addEventListener("scroll",r);const p=new ResizeObserver(()=>{requestAnimationFrame(r)});return p.observe(e),()=>{e.removeEventListener("scroll",r),p.unobserve(e)}}else return window.addEventListener("scroll",r),window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[r,e]),l}const Yk=pe.createContext(void 0),Zk=pe.createContext(void 0);function Xk(i){return i}const JV=ir(()=>{const i=ui(p=>`Item ${p}`),e=ui(null),t=ui(p=>`Group ${p}`),n=ui({}),s=ui(Xk),l=ui("div"),u=ui(sp),r=(p,f=null)=>va(Wt(n,Ai(m=>m[p]),Ar()),f);return{context:e,itemContent:i,groupContent:t,components:n,computeItemKey:s,HeaderFooterTag:l,scrollerRef:u,FooterComponent:r("Footer"),HeaderComponent:r("Header"),TopItemListComponent:r("TopItemList"),ListComponent:r("List","div"),ItemComponent:r("Item","div"),GroupComponent:r("Group","div"),ScrollerComponent:r("Scroller","div"),EmptyPlaceholder:r("EmptyPlaceholder"),ScrollSeekPlaceholder:r("ScrollSeekPlaceholder")}}),eG=ir(([i,e])=>({...i,...e}),Ir(QV,JV)),tG=({height:i})=>Y.jsx("div",{style:{height:i}}),iG={position:qk(),zIndex:1,overflowAnchor:"none"},Kk={overflowAnchor:"none"},nG={...Kk,display:"inline-block",height:"100%"},oT=pe.memo(function({showTopList:e=!1}){const t=mn("listState"),n=mo("sizeRanges"),s=mn("useWindowScroll"),l=mn("customScrollParent"),u=mo("windowScrollContainerState"),r=mo("scrollContainerState"),p=l||s?u:r,f=mn("itemContent"),m=mn("context"),v=mn("groupContent"),y=mn("trackItemSizes"),_=mn("itemSize"),b=mn("log"),C=mo("gap"),E=mn("horizontalDirection"),{callbackRef:S}=xV(n,_,y,e?sp:p,b,C,l,E,mn("skipAnimationFrameInResizeObserver")),[x,A]=pe.useState(0);F_("deviation",R=>{x!==R&&A(R)});const D=mn("EmptyPlaceholder"),T=mn("ScrollSeekPlaceholder")||tG,k=mn("ListComponent"),N=mn("ItemComponent"),W=mn("GroupComponent"),Z=mn("computeItemKey"),K=mn("isSeeking"),j=mn("groupIndices").length>0,V=mn("alignToBottom"),$=mn("initialItemFinalLocationReached"),L=e?{}:{boxSizing:"border-box",...E?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:x!==0?x:V?"auto":0}:{marginTop:x!==0?x:V?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...$?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&D?Y.jsx(D,{...xa(D,m)}):Y.jsx(k,{...xa(k,m),ref:S,style:L,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(R=>{const G=R.originalIndex,U=Z(G+t.firstItemIndex,R.data,m);return K?Fe.createElement(T,{...xa(T,m),key:U,index:R.index,height:R.size,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?Fe.createElement(W,{...xa(W,m),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,style:iG},v(R.index,m)):Fe.createElement(N,{...xa(N,m),...oG(N,R.data),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,"data-item-group-index":R.groupIndex,style:E?nG:Kk},j?f(R.index,R.groupIndex,R.data,m):f(R.index,R.data,m))})})}),rG={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},sG={outline:"none",overflowX:"auto",position:"relative"},Zx=i=>({width:"100%",height:"100%",position:"absolute",top:0,...i?{display:"flex",flexDirection:"column"}:{}}),aG={width:"100%",position:qk(),top:0,zIndex:1};function xa(i,e){if(typeof i!="string")return{context:e}}function oG(i,e){return{item:typeof i=="string"?void 0:e}}const lG=pe.memo(function(){const e=mn("HeaderComponent"),t=mo("headerHeight"),n=mn("HeaderFooterTag"),s=bd(pe.useMemo(()=>u=>t($c(u,"height")),[t]),!0,mn("skipAnimationFrameInResizeObserver")),l=mn("context");return e?Y.jsx(n,{ref:s,children:Y.jsx(e,{...xa(e,l)})}):null}),cG=pe.memo(function(){const e=mn("FooterComponent"),t=mo("footerHeight"),n=mn("HeaderFooterTag"),s=bd(pe.useMemo(()=>u=>t($c(u,"height")),[t]),!0,mn("skipAnimationFrameInResizeObserver")),l=mn("context");return e?Y.jsx(n,{ref:s,children:Y.jsx(e,{...xa(e,l)})}):null});function Qk({usePublisher:i,useEmitter:e,useEmitterValue:t}){return pe.memo(function({style:l,children:u,...r}){const p=i("scrollContainerState"),f=t("ScrollerComponent"),m=i("smoothScrollTargetReached"),v=t("scrollerRef"),y=t("context"),_=t("horizontalDirection")||!1,{scrollerRef:b,scrollByCallback:C,scrollToCallback:E}=Pk(p,m,f,v,void 0,_);e("scrollTo",E),e("scrollBy",C);const S=_?sG:rG;return Y.jsx(f,{ref:b,style:{...S,...l},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...r,...xa(f,y),children:u})})}function Jk({usePublisher:i,useEmitter:e,useEmitterValue:t}){return pe.memo(function({style:l,children:u,...r}){const p=i("windowScrollContainerState"),f=t("ScrollerComponent"),m=i("smoothScrollTargetReached"),v=t("totalListHeight"),y=t("deviation"),_=t("customScrollParent"),b=t("context"),{scrollerRef:C,scrollByCallback:E,scrollToCallback:S}=Pk(p,m,f,sp,_);return Ak(()=>(C.current=_||window,()=>{C.current=null}),[C,_]),e("windowScrollTo",S),e("scrollBy",E),Y.jsx(f,{style:{position:"relative",...l,...v!==0?{height:v+y}:{}},"data-virtuoso-scroller":!0,...r,...xa(f,b),children:u})})}const uG=({children:i})=>{const e=pe.useContext(Yk),t=mo("viewportHeight"),n=mo("fixedItemHeight"),s=mn("alignToBottom"),l=mn("horizontalDirection"),u=pe.useMemo(()=>Tk(t,p=>$c(p,l?"width":"height")),[t,l]),r=bd(u,!0,mn("skipAnimationFrameInResizeObserver"));return pe.useEffect(()=>{e&&(t(e.viewportHeight),n(e.itemHeight))},[e,t,n]),Y.jsx("div",{style:Zx(s),ref:r,"data-viewport-type":"element",children:i})},dG=({children:i})=>{const e=pe.useContext(Yk),t=mo("windowViewportRect"),n=mo("fixedItemHeight"),s=mn("customScrollParent"),l=Wk(t,s,mn("skipAnimationFrameInResizeObserver")),u=mn("alignToBottom");return pe.useEffect(()=>{e&&(n(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,n]),Y.jsx("div",{ref:l,style:Zx(u),"data-viewport-type":"window",children:i})},hG=({children:i})=>{const e=mn("TopItemListComponent")||"div",t=mn("headerHeight"),n={...aG,marginTop:`${t}px`},s=mn("context");return Y.jsx(e,{style:n,...xa(e,s),children:i})},pG=pe.memo(function(e){const t=mn("useWindowScroll"),n=mn("topItemsIndexes").length>0,s=mn("customScrollParent"),l=s||t?gG:mG,u=s||t?dG:uG;return Y.jsxs(l,{...e,children:[n&&Y.jsx(hG,{children:Y.jsx(oT,{showTopList:!0})}),Y.jsxs(u,{children:[Y.jsx(lG,{}),Y.jsx(oT,{}),Y.jsx(cG,{})]})]})}),{Component:fG,usePublisher:mo,useEmitterValue:mn,useEmitter:F_}=kk(eG,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},pG),mG=Qk({usePublisher:mo,useEmitterValue:mn,useEmitter:F_}),gG=Jk({usePublisher:mo,useEmitterValue:mn,useEmitter:F_}),yG=fG,lT={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},xG={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:cT,ceil:uT,floor:Zy,min:Pv,max:If}=Math;function vG(i){return{...xG,items:i}}function dT(i,e,t){return Array.from({length:e-i+1}).map((n,s)=>{const l=t===null?null:t[s+i];return{index:s+i,data:l}})}function bG(i,e){return i&&i.column===e.column&&i.row===e.row}function ty(i,e){return i&&i.width===e.width&&i.height===e.height}const _G=ir(([{overscan:i,visibleRange:e,listBoundary:t,increaseViewportBy:n},{scrollTop:s,viewportHeight:l,scrollBy:u,scrollTo:r,smoothScrollTargetReached:p,scrollContainerState:f,footerHeight:m,headerHeight:v},y,_,{propsReady:b,didMount:C},{windowViewportRect:E,useWindowScroll:S,customScrollParent:x,windowScrollContainerState:A,windowScrollTo:D},T])=>{const k=ui(0),N=ui(0),W=ui(lT),Z=ui({height:0,width:0}),K=ui({height:0,width:0}),j=On(),V=On(),$=ui(0),L=ui(null),R=ui({row:0,column:0}),G=On(),U=On(),B=ui(!1),H=ui(0),q=ui(!0),ae=ui(!1),fe=ui(!1);tr(Wt(C,kn(H),ln(([Q,ee])=>!!ee)),()=>{Tn(q,!1)}),tr(Wt(xs(C,q,K,Z,H,ae),ln(([Q,ee,oe,we,,J])=>Q&&!ee&&oe.height!==0&&we.height!==0&&!J)),([,,,,Q])=>{Tn(ae,!0),N_(1,()=>{Tn(j,Q)}),cl(Wt(s),()=>{Tn(t,[0,0]),Tn(q,!0)})}),ji(Wt(U,ln(Q=>Q!=null&&Q.scrollTop>0),Ko(0)),N),tr(Wt(C,kn(U),ln(([,Q])=>Q!=null)),([,Q])=>{Q&&(Tn(Z,Q.viewport),Tn(K,Q==null?void 0:Q.item),Tn(R,Q.gap),Q.scrollTop>0&&(Tn(B,!0),cl(Wt(s,$h(1)),ee=>{Tn(B,!1)}),Tn(r,{top:Q.scrollTop})))}),ji(Wt(Z,Ai(({height:Q})=>Q)),l),ji(Wt(xs(pn(Z,ty),pn(K,ty),pn(R,(Q,ee)=>Q&&Q.column===ee.column&&Q.row===ee.row),pn(s)),Ai(([Q,ee,oe,we])=>({viewport:Q,item:ee,gap:oe,scrollTop:we}))),G),ji(Wt(xs(pn(k),e,pn(R,bG),pn(K,ty),pn(Z,ty),pn(L),pn(N),pn(B),pn(q),pn(H)),ln(([,,,,,,,Q])=>!Q),Ai(([Q,[ee,oe],we,J,se,de,xe,,Ce,Ne])=>{const{row:Te,column:Ie}=we,{height:Ue,width:qe}=J,{width:Ae}=se;if(xe===0&&(Q===0||Ae===0))return lT;if(qe===0){const ht=z_(Ne,Q),gt=ht+Math.max(xe-1,0);return vG(dT(ht,gt,de))}const ye=eA(Ae,qe,Ie);let ge,Me;Ce?ee===0&&oe===0&&xe>0?(ge=0,Me=xe-1):(ge=ye*Zy((ee+Te)/(Ue+Te)),Me=ye*uT((oe+Te)/(Ue+Te))-1,Me=Pv(Q-1,If(Me,ye-1)),ge=Pv(Me,If(0,ge))):(ge=0,Me=-1);const De=dT(ge,Me,de),{top:Pe,bottom:$e}=hT(se,we,J,De),Ke=uT(Q/ye),nt=Ke*Ue+(Ke-1)*Te-$e;return{items:De,offsetTop:Pe,offsetBottom:nt,top:Pe,bottom:$e,itemHeight:Ue,itemWidth:qe}})),W),ji(Wt(L,ln(Q=>Q!==null),Ai(Q=>Q.length)),k),ji(Wt(xs(Z,K,W,R),ln(([Q,ee,{items:oe}])=>oe.length>0&&ee.height!==0&&Q.height!==0),Ai(([Q,ee,{items:oe},we])=>{const{top:J,bottom:se}=hT(Q,we,ee,oe);return[J,se]}),Ar(Wf)),t);const re=ui(!1);ji(Wt(s,kn(re),Ai(([Q,ee])=>ee||Q!==0)),re);const ce=eo(Wt(xs(W,k),ln(([{items:Q}])=>Q.length>0),kn(re),ln(([[Q,ee],oe])=>{const J=Q.items[Q.items.length-1].index===ee-1;return(oe||Q.bottom>0&&Q.itemHeight>0&&Q.offsetBottom===0&&Q.items.length===ee)&&J}),Ai(([[,Q]])=>Q-1),Ar())),ke=eo(Wt(pn(W),ln(({items:Q})=>Q.length>0&&Q[0].index===0),Ko(0),Ar())),ve=eo(Wt(pn(W),kn(B),ln(([{items:Q},ee])=>Q.length>0&&!ee),Ai(([{items:Q}])=>({startIndex:Q[0].index,endIndex:Q[Q.length-1].index})),Ar($k),Pc(0)));ji(ve,_.scrollSeekRangeChanged),ji(Wt(j,kn(Z,K,k,R),Ai(([Q,ee,oe,we,J])=>{const se=Fk(Q),{align:de,behavior:xe,offset:Ce}=se;let Ne=se.index;Ne==="LAST"&&(Ne=we-1),Ne=If(0,Ne,Pv(we-1,Ne));let Te=r1(ee,J,oe,Ne);return de==="end"?Te=cT(Te-ee.height+oe.height):de==="center"&&(Te=cT(Te-ee.height/2+oe.height/2)),Ce&&(Te+=Ce),{top:Te,behavior:xe}})),r);const Ee=va(Wt(W,Ai(Q=>Q.offsetBottom+Q.bottom)),0);return ji(Wt(E,Ai(Q=>({width:Q.visibleWidth,height:Q.visibleHeight}))),Z),{data:L,totalCount:k,viewportDimensions:Z,itemDimensions:K,scrollTop:s,scrollHeight:V,overscan:i,increaseViewportBy:n,scrollBy:u,scrollTo:r,scrollToIndex:j,smoothScrollTargetReached:p,windowViewportRect:E,windowScrollTo:D,useWindowScroll:S,customScrollParent:x,windowScrollContainerState:A,deviation:$,scrollContainerState:f,footerHeight:m,headerHeight:v,initialItemCount:N,gap:R,restoreStateFrom:U,..._,initialTopMostItemIndex:H,horizontalDirection:fe,gridState:W,totalListHeight:Ee,...y,startReached:ke,endReached:ce,rangeChanged:ve,stateChanged:G,propsReady:b,stateRestoreInProgress:B,...T}},Ir(j_,ka,Dm,Vk,Jc,O_,Qc));function hT(i,e,t,n){const{height:s}=t;if(s===void 0||n.length===0)return{top:0,bottom:0};const l=r1(i,e,t,n[0].index),u=r1(i,e,t,n[n.length-1].index)+s;return{top:l,bottom:u}}function r1(i,e,t,n){const s=eA(i.width,t.width,e.column),l=Zy(n/s),u=l*t.height+If(0,l-1)*e.row;return u>0?u+e.row:u}function eA(i,e,t){return If(1,Zy((i+t)/(Zy(e)+t)))}const wG=ir(()=>{const i=ui(v=>`Item ${v}`),e=ui({}),t=ui(null),n=ui("virtuoso-grid-item"),s=ui("virtuoso-grid-list"),l=ui(Xk),u=ui("div"),r=ui(sp),p=(v,y=null)=>va(Wt(e,Ai(_=>_[v]),Ar()),y),f=ui(!1),m=ui(!1);return ji(pn(m),f),{readyStateChanged:f,reportReadyState:m,context:t,itemContent:i,components:e,computeItemKey:l,itemClassName:n,listClassName:s,headerFooterTag:u,scrollerRef:r,FooterComponent:p("Footer"),HeaderComponent:p("Header"),ListComponent:p("List","div"),ItemComponent:p("Item","div"),ScrollerComponent:p("Scroller","div"),ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),CG=ir(([i,e])=>({...i,...e}),Ir(_G,wG)),TG=pe.memo(function(){const e=Lr("gridState"),t=Lr("listClassName"),n=Lr("itemClassName"),s=Lr("itemContent"),l=Lr("computeItemKey"),u=Lr("isSeeking"),r=go("scrollHeight"),p=Lr("ItemComponent"),f=Lr("ListComponent"),m=Lr("ScrollSeekPlaceholder"),v=Lr("context"),y=go("itemDimensions"),_=go("gap"),b=Lr("log"),C=Lr("stateRestoreInProgress"),E=go("reportReadyState"),S=bd(pe.useMemo(()=>x=>{const A=x.parentElement.parentElement.scrollHeight;r(A);const D=x.firstChild;if(D){const{width:T,height:k}=D.getBoundingClientRect();y({width:T,height:k})}_({row:pT("row-gap",getComputedStyle(x).rowGap,b),column:pT("column-gap",getComputedStyle(x).columnGap,b)})},[r,y,_,b]),!0,!1);return Ak(()=>{e.itemHeight>0&&e.itemWidth>0&&E(!0)},[e]),C?null:Y.jsx(f,{ref:S,className:t,...xa(f,v),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(x=>{const A=l(x.index,x.data,v);return u?Y.jsx(m,{...xa(m,v),index:x.index,height:e.itemHeight,width:e.itemWidth},A):Fe.createElement(p,{...xa(p,v),className:n,"data-index":x.index,key:A},s(x.index,x.data,v))})})}),SG=pe.memo(function(){const e=Lr("HeaderComponent"),t=go("headerHeight"),n=Lr("headerFooterTag"),s=bd(pe.useMemo(()=>u=>t($c(u,"height")),[t]),!0,!1),l=Lr("context");return e?Y.jsx(n,{ref:s,children:Y.jsx(e,{...xa(e,l)})}):null}),EG=pe.memo(function(){const e=Lr("FooterComponent"),t=go("footerHeight"),n=Lr("headerFooterTag"),s=bd(pe.useMemo(()=>u=>t($c(u,"height")),[t]),!0,!1),l=Lr("context");return e?Y.jsx(n,{ref:s,children:Y.jsx(e,{...xa(e,l)})}):null}),kG=({children:i})=>{const e=pe.useContext(Zk),t=go("itemDimensions"),n=go("viewportDimensions"),s=bd(pe.useMemo(()=>l=>{n(l.getBoundingClientRect())},[n]),!0,!1);return pe.useEffect(()=>{e&&(n({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,n,t]),Y.jsx("div",{style:Zx(!1),ref:s,children:i})},AG=({children:i})=>{const e=pe.useContext(Zk),t=go("windowViewportRect"),n=go("itemDimensions"),s=Lr("customScrollParent"),l=Wk(t,s,!1);return pe.useEffect(()=>{e&&(n({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,n]),Y.jsx("div",{ref:l,style:Zx(!1),children:i})},MG=pe.memo(function({...e}){const t=Lr("useWindowScroll"),n=Lr("customScrollParent"),s=n||t?IG:PG,l=n||t?AG:kG;return Y.jsx(s,{...e,children:Y.jsxs(l,{children:[Y.jsx(SG,{}),Y.jsx(TG,{}),Y.jsx(EG,{})]})})}),{Component:Hee,usePublisher:go,useEmitterValue:Lr,useEmitter:tA}=kk(CG,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},MG),PG=Qk({usePublisher:go,useEmitterValue:Lr,useEmitter:tA}),IG=Jk({usePublisher:go,useEmitterValue:Lr,useEmitter:tA});function pT(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,to.WARN),e==="normal"?0:parseInt(e??"0",10)}const DG=i=>{let{evaluationPerOrgUnits:e,useVirtuoso:t=!0,useVirtuosoWindowScroll:n=!1}=i;function s(){const l=u=>{const r=e[u];return r?pe.createElement("div",{key:r.orgUnitId},pe.createElement(WC,{orgUnitsData:r})):null};return l.displayName="ItemContent",l}return t?pe.createElement("div",null,pe.createElement(yG,{style:{height:"60vh"},useWindowScroll:n,totalCount:e.length,itemContent:s()})):pe.createElement(pe.Fragment,null,e.map(l=>l?pe.createElement(WC,{key:l.orgUnitId,orgUnitsData:l}):null))},RG=i=>{let{splitPeriods:e,setSelectedSplitPeriod:t,selectedSplitPeriod:n}=i;return e.includes(n)?pe.createElement("div",null,pe.createElement("div",null,pe.createElement(gs,{selected:n,onChange:s=>t(s.selected)},e.map((s,l)=>pe.createElement(Ca,{key:l,label:wk(s),value:s}))))):pe.createElement(pe.Fragment,null)},LG="_orgUnitsSelction_1ir4t_1",NG="_wrapper_1ir4t_7",zG="_filterCheckbox_1ir4t_14",jG="_filter_1ir4t_14",OG="_plots_1ir4t_25",FG="_searchInput_1ir4t_29",BG="_filterTitle_1ir4t_34",Ru={orgUnitsSelction:LG,wrapper:NG,filterCheckbox:zG,filter:jG,plots:OG,searchInput:FG,filterTitle:BG},$G=i=>{var e;let{evaluationName:t,modelName:n,evaluations:s,splitPeriods:l}=i;const[u,r]=Fe.useState([]),[p,f]=Fe.useState(),[m,v]=Fe.useState([]),[y,_]=Fe.useState([]),[b,C]=Fe.useState(l[0]);Fe.useEffect(()=>{const S=s[0];v(S.evaluation.map(x=>x.orgUnitId)),_(S.evaluation.map(x=>({name:x.orgUnitName,id:x.orgUnitId}))),C(S.splitPoint),r(S.evaluation)},[s,l]),Fe.useEffect(()=>{const S=s.find(A=>A.splitPoint===b),x=m==null?void 0:m.map(A=>S.evaluation.find(D=>D.orgUnitId===A&&D.orgUnitName.toLocaleLowerCase().includes(p?p.toLocaleLowerCase():"")));r(x)},[b,m,p]);const E=S=>{const x=S.checked?[...m,S.value]:m.filter(A=>A!==S.value);v(x)};return pe.createElement(pe.Fragment,null,pe.createElement("div",{className:Ru.wrapper},pe.createElement("div",{className:Ru.filter},pe.createElement("div",null,pe.createElement("h2",null,"Evaluation: ",t)),pe.createElement("div",null,pe.createElement("div",{className:Ru.filterTitle},"Split period:"),pe.createElement(RG,{splitPeriods:l,setSelectedSplitPeriod:C,selectedSplitPeriod:b})),pe.createElement("div",null,pe.createElement("div",{className:Ru.filterTitle},"Organization units:"),pe.createElement("div",{className:Ru.filterCheckbox},y.map(S=>pe.createElement(td,{checked:m.filter(x=>x==S.id).length>0,onChange:E,label:S.name,key:S.id,value:S.id}))))),pe.createElement("div",{className:Ru.plots},pe.createElement("div",null,pe.createElement("h3",null,"Model: ",n)),pe.createElement("div",{className:Ru.searchInput},pe.createElement(il,{label:"Search for organization units:",placeholder:((e=y[0])===null||e===void 0?void 0:e.name)+"..",onChange:S=>f(S.value),value:p})),pe.createElement(DG,{evaluationPerOrgUnits:u,useVirtuoso:!0}))))},UG="_table_11vie_1",VG="_quantile_low_11vie_22",GG="_quantile_high_11vie_26",HG={table:UG,quantile_low:VG,quantile_high:GG},fT=i=>[...new Set(i.map(e=>e.period))],qG=i=>[...new Set(i.map(e=>e.orgUnit))],WG=i=>[...new Set(i.map(e=>e.dataElement))],YG=(i,e)=>{var t;return(t=e.find(n=>n.orgUnit===i))===null||t===void 0?void 0:t.displayName},ZG=i=>{let{data:e}=i;const t=e.dataValues;return pe.createElement(pe.Fragment,null,qG(t).map(n=>pe.createElement("div",{key:n},pe.createElement("h3",null,Oe.t("Prediction for {{orgUnitName}}",{orgUnitName:YG(n,t)})),pe.createElement("table",{className:HG.table},pe.createElement("thead",null,pe.createElement("tr",null,pe.createElement("th",null,"Quantiles"),fT(t).map(s=>pe.createElement("th",{key:s},k_({periodId:s,calendar:"gregory"}).displayName)))),pe.createElement("tbody",null,WG(t).map(s=>pe.createElement("tr",{key:s},pe.createElement("td",null,s.replaceAll("_"," ")),fT(t).map(l=>pe.createElement("td",{key:l},t.filter(u=>u.dataElement===s&&u.orgUnit===n&&u.period===l)[0].value)))))))))};var XG={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Xa,function(){var t,n,s;function l(r,p){if(!t)t=p;else if(!n)n=p;else{var f="var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk);",m={};t(m),s=p(m),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}}l(["exports"],function(r){var p=f;function f(c,a,d,g){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=d,this.p2y=g}function m(c,a,d,g){const P=new p(c,a,d,g);return function(z){return P.solve(z)}}f.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,g=0;g<8;g++){var P=this.sampleCurveX(d)-c;if(Math.abs(P)<a)return d;var z=this.sampleCurveDerivativeX(d);if(Math.abs(z)<1e-6)break;d-=P/z}var F=0,ie=1;for(d=c,g=0;g<20&&(P=this.sampleCurveX(d),!(Math.abs(P-c)<a));g++)c>P?F=d:ie=d,d=.5*(ie-F)+F;return d},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};const v=m(.25,.1,.25,1);function y(c,a,d){return Math.min(d,Math.max(a,c))}function _(c,a,d){const g=d-a,P=((c-a)%g+g)%g+a;return P===a?d:P}function b(c,...a){for(const d of a)for(const g in d)c[g]=d[g];return c}let C=1;function E(c,a){c.forEach(d=>{a[d]&&(a[d]=a[d].bind(a))})}function S(c,a,d){const g={};for(const P in c)g[P]=a.call(d||this,c[P],P,c);return g}function x(c,a,d){const g={};for(const P in c)a.call(d||this,c[P],P,c)&&(g[P]=c[P]);return g}function A(c){return Array.isArray(c)?c.map(A):typeof c=="object"&&c?S(c,A):c}const D={};function T(c){D[c]||(typeof console<"u"&&console.warn(c),D[c]=!0)}function k(c,a,d){return(d.y-c.y)*(a.x-c.x)>(a.y-c.y)*(d.x-c.x)}function N(c){let a=0;for(let d,g,P=0,z=c.length,F=z-1;P<z;F=P++)d=c[P],g=c[F],a+=(g.x-d.x)*(d.y+g.y);return a}function W(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,g,P,z)=>{const F=P||z;return a[g]=!F||F.toLowerCase(),""}),a["max-age"]){const d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}let K,j,V=null;function $(c){if(V==null){const a=c.navigator?c.navigator.userAgent:null;V=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return V}function L(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const a=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(c,a=0){const d=window.document.createElement("canvas"),g=d.getContext("2d");if(!g)throw new Error("failed to create canvas 2d context");return d.width=c.width,d.height=c.height,g.drawImage(c,0,0,c.width,c.height),g.getImageData(-a,-a,c.width+2*a,c.height+2*a)},resolveURL:c=>(K||(K=document.createElement("a")),K.href=c,K.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(j==null&&(j=matchMedia("(prefers-reduced-motion: reduce)")),j.matches)}};var G=U;function U(c,a){this.x=c,this.y=a}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,d=c.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),d=Math.sin(c),g=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=g,this},_rotateAround:function(c,a){var d=Math.cos(c),g=Math.sin(c),P=a.y+g*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-g*(this.y-a.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U.convert=function(c){return c instanceof U?c:Array.isArray(c)?new U(c[0],c[1]):c};const B={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},H="mapbox-tiles";let q,ae=500,fe=50;function re(){typeof caches>"u"||q||(q=caches.open(H))}let ce=1/0;const ke={supported:!1,testSupport:function(c){!Q&&Ee&&(ee?oe(c):ve=c)}};let ve,Ee,Q=!1,ee=!1;function oe(c){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Ee),c.isContextLost())return;ke.supported=!0}catch{}c.deleteTexture(a),Q=!0}typeof document<"u"&&(Ee=document.createElement("img"),Ee.onload=function(){ve&&oe(ve),ve=null,ee=!0},Ee.onerror=function(){Q=!0,ve=null},Ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const we={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(we);class J extends Error{constructor(a,d,g,P){super(`AJAXError: ${d} (${a}): ${g}`),this.status=a,this.statusText=d,this.url=g,this.body=P}}const se=W()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function de(c,a){const d=new AbortController,g=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:se(),signal:d.signal});let P=!1,z=!1;return c.type==="json"&&g.headers.set("Accept","application/json"),((F,ie,le)=>{z||fetch(g).then(_e=>_e.ok?((Re,Be,He)=>{(c.type==="arrayBuffer"?Re.arrayBuffer():c.type==="json"?Re.json():Re.text()).then(Ze=>{z||(P=!0,a(null,Ze,Re.headers.get("Cache-Control"),Re.headers.get("Expires")))}).catch(Ze=>{z||a(new Error(Ze.message))})})(_e):_e.blob().then(Re=>a(new J(_e.status,_e.statusText,c.url,Re)))).catch(_e=>{_e.code!==20&&a(new Error(_e.message))})})(),{cancel:()=>{z=!0,P||d.abort()}}}const xe=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(W()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a);if(!W()){const g=c.url.substring(0,c.url.indexOf("://"));return(B.REGISTERED_PROTOCOLS[g]||de)(c,a)}}if(!(/^file:/.test(d=c.url)||/^file:/.test(se())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return de(c,a);if(W()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var d;return function(g,P){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const F in g.headers)z.setRequestHeader(F,g.headers[F]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{P(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let F=z.response;if(g.type==="json")try{F=JSON.parse(z.response)}catch(ie){return P(ie)}P(null,F,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const F=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});P(new J(z.status,z.statusText,g.url,F))}},z.send(g.body),{cancel:()=>z.abort()}}(c,a)},Ce=function(c,a){return xe(b(c,{type:"arrayBuffer"}),a)};function Ne(c){const a=window.document.createElement("a");return a.href=c,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Ue;Ie=[],Ue=0;const qe=function(c,a){if(ke.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Ue>=B.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:c,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(z),z}Ue++;let d=!1;const g=()=>{if(!d)for(d=!0,Ue--;Ie.length&&Ue<B.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ie.shift(),{requestParameters:F,callback:ie,cancelled:le}=z;le||(z.cancel=qe(F,ie).cancel)}},P=Ce(c,(z,F,ie,le)=>{g(),z?a(z):F&&function(_e,Re){typeof createImageBitmap=="function"?function(Be,He){const Ze=new Blob([new Uint8Array(Be)],{type:"image/png"});createImageBitmap(Ze).then(Xe=>{He(null,Xe)}).catch(Xe=>{He(new Error(`Could not load image because of ${Xe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_e,Re):function(Be,He){const Ze=new Image;Ze.onload=()=>{He(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=Te})},Ze.onerror=()=>He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Xe=new Blob([new Uint8Array(Be)],{type:"image/png"});Ze.src=Be.byteLength?URL.createObjectURL(Xe):Te}(_e,Re)}(F,(_e,Re)=>{_e!=null?a(_e):Re!=null&&a(null,Re,{cacheControl:ie,expires:le})})});return{cancel:()=>{P.cancel(),g()}}};function Ae(c,a,d){d[c]&&d[c].indexOf(a)!==-1||(d[c]=d[c]||[],d[c].push(a))}function ye(c,a,d){if(d&&d[c]){const g=d[c].indexOf(a);g!==-1&&d[c].splice(g,1)}}class ge{constructor(a,d={}){b(this,d),this.type=a}}class Me extends ge{constructor(a,d={}){super("error",b({error:a},d))}}class De{on(a,d){return this._listeners=this._listeners||{},Ae(a,d,this._listeners),this}off(a,d){return ye(a,d,this._listeners),ye(a,d,this._oneTimeListeners),this}once(a,d){return this._oneTimeListeners=this._oneTimeListeners||{},Ae(a,d,this._oneTimeListeners),this}fire(a,d){typeof a=="string"&&(a=new ge(a,d||{}));const g=a.type;if(this.listens(g)){a.target=this;const P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const ie of P)ie.call(this,a);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const ie of z)ye(g,ie,this._oneTimeListeners),ie.call(this,a);const F=this._eventedParent;F&&(b(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(a))}else a instanceof Me&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,d){return this._eventedParent=a,this._eventedParentData=d,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class $e{constructor(a,d,g,P){this.message=(a?`${a}: `:"")+g,P&&(this.identifier=P),d!=null&&d.__line__&&(this.line=d.__line__)}}function Ke(c){const a=c.value;return a?[new $e(c.key,a,"constants have been deprecated as of v8")]:[]}function tt(c,...a){for(const d of a)for(const g in d)c[g]=d[g];return c}function nt(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ht(c){if(Array.isArray(c))return c.map(ht);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const d in c)a[d]=ht(c[d]);return a}return nt(c)}class gt extends Error{constructor(a,d){super(d),this.message=d,this.key=a}}class Ct{constructor(a,d=[]){this.parent=a,this.bindings={};for(const[g,P]of d)this.bindings[g]=P}concat(a){return new Ct(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Lt={kind:"null"},ft={kind:"number"},Et={kind:"string"},Tt={kind:"boolean"},ai={kind:"color"},hi={kind:"object"},qt={kind:"value"},un={kind:"collator"},Qi={kind:"formatted"},bn={kind:"padding"},Bn={kind:"resolvedImage"};function an(c,a){return{kind:"array",itemType:c,N:a}}function dt(c){if(c.kind==="array"){const a=dt(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const vt=[Lt,ft,Et,Tt,ai,Qi,hi,an(qt),bn,Bn];function It(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!It(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const d of vt)if(!It(d,a))return null}}return`Expected ${dt(c)} but found ${dt(a)} instead.`}function Ft(c,a){return a.some(d=>d.kind===c.kind)}function Yt(c,a){return a.some(d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c)}var vi,Oi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function pi(c){return(c=Math.round(c))<0?0:c>255?255:c}function We(c){return pi(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function be(c){return(a=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:a>1?1:a;var a}function Le(c,a,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(a-c)*d*6:2*d<1?a:3*d<2?c+(a-c)*(2/3-d)*6:c}try{vi={}.parseCSSColor=function(c){var a,d=c.replace(/ /g,"").toLowerCase();if(d in Oi)return Oi[d].slice();if(d[0]==="#")return d.length===4?(a=parseInt(d.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:d.length===7&&(a=parseInt(d.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var g=d.indexOf("("),P=d.indexOf(")");if(g!==-1&&P+1===d.length){var z=d.substr(0,g),F=d.substr(g+1,P-(g+1)).split(","),ie=1;switch(z){case"rgba":if(F.length!==4)return null;ie=be(F.pop());case"rgb":return F.length!==3?null:[We(F[0]),We(F[1]),We(F[2]),ie];case"hsla":if(F.length!==4)return null;ie=be(F.pop());case"hsl":if(F.length!==3)return null;var le=(parseFloat(F[0])%360+360)%360/360,_e=be(F[1]),Re=be(F[2]),Be=Re<=.5?Re*(_e+1):Re+_e-Re*_e,He=2*Re-Be;return[pi(255*Le(He,Be,le+1/3)),pi(255*Le(He,Be,le)),pi(255*Le(He,Be,le-1/3)),ie];default:return null}}return null}}catch{}class Ge{constructor(a,d,g,P=1){this.r=a,this.g=d,this.b=g,this.a=P}static parse(a){if(!a)return;if(a instanceof Ge)return a;if(typeof a!="string")return;const d=vi(a);return d?new Ge(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[a,d,g,P]=this.toArray();return`rgba(${Math.round(a)},${Math.round(d)},${Math.round(g)},${P})`}toArray(){const{r:a,g:d,b:g,a:P}=this;return P===0?[0,0,0,0]:[255*a/P,255*d/P,255*g/P,P]}}Ge.black=new Ge(0,0,0,1),Ge.white=new Ge(1,1,1,1),Ge.transparent=new Ge(0,0,0,0),Ge.red=new Ge(1,0,0,1);class Qe{constructor(a,d,g){this.sensitivity=a?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,d){return this.collator.compare(a,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class st{constructor(a,d,g,P,z){this.text=a,this.image=d,this.scale=g,this.fontStack=P,this.textColor=z}}class ct{constructor(a){this.sections=a}static fromString(a){return new ct([new st(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof ct?a:ct.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class ot{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ot)return a;if(typeof a=="number")return new ot([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const d of a)if(typeof d!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new ot(a)}}toString(){return JSON.stringify(this.values)}}class rt{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new rt({name:a,available:!1}):null}}function mt(c,a,d,g){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[c,a,d,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[c,a,d,g]:[c,a,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function At(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ge||c instanceof Qe||c instanceof ct||c instanceof ot||c instanceof rt)return!0;if(Array.isArray(c)){for(const a of c)if(!At(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!At(c[a]))return!1;return!0}return!1}function zt(c){if(c===null)return Lt;if(typeof c=="string")return Et;if(typeof c=="boolean")return Tt;if(typeof c=="number")return ft;if(c instanceof Ge)return ai;if(c instanceof Qe)return un;if(c instanceof ct)return Qi;if(c instanceof ot)return bn;if(c instanceof rt)return Bn;if(Array.isArray(c)){const a=c.length;let d;for(const g of c){const P=zt(g);if(d){if(d===P)continue;d=qt;break}d=P}return an(d||qt,a)}return hi}function Rt(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof Ge||c instanceof ct||c instanceof ot||c instanceof rt?c.toString():JSON.stringify(c)}class li{constructor(a,d){this.type=a,this.value=d}static parse(a,d){if(a.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!At(a[1]))return d.error("invalid value");const g=a[1];let P=zt(g);const z=d.expectedType;return P.kind!=="array"||P.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(P=z),new li(P,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qt{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const fi={string:Et,number:ft,boolean:Tt,object:hi};class bi{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let g,P=1;const z=a[0];if(z==="array"){let ie,le;if(a.length>2){const _e=a[1];if(typeof _e!="string"||!(_e in fi)||_e==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);ie=fi[_e],P++}else ie=qt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return d.error('The length argument to "array" must be a positive integer literal',2);le=a[2],P++}g=an(ie,le)}else{if(!fi[z])throw new Error(`Types doesn't contain name = ${z}`);g=fi[z]}const F=[];for(;P<a.length;P++){const ie=d.parse(a[P],P,qt);if(!ie)return null;F.push(ie)}return new bi(g,F)}evaluate(a){for(let d=0;d<this.args.length;d++){const g=this.args[d].evaluate(a);if(!It(this.type,zt(g)))return g;if(d===this.args.length-1)throw new Qt(`Expected value to be of type ${dt(this.type)}, but found ${dt(zt(g))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Ui={"to-boolean":Tt,"to-color":ai,"to-number":ft,"to-string":Et};class _i{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const g=a[0];if(!Ui[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&a.length!==2)return d.error("Expected one argument.");const P=Ui[g],z=[];for(let F=1;F<a.length;F++){const ie=d.parse(a[F],F,qt);if(!ie)return null;z.push(ie)}return new _i(P,z)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let d,g;for(const P of this.args){if(d=P.evaluate(a),g=null,d instanceof Ge)return d;if(typeof d=="string"){const z=a.parseColor(d);if(z)return z}else if(Array.isArray(d)&&(g=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:mt(d[0],d[1],d[2],d[3]),!g))return new Ge(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Qt(g||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="padding"){let d;for(const g of this.args){d=g.evaluate(a);const P=ot.parse(d);if(P)return P}throw new Qt(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="number"){let d=null;for(const g of this.args){if(d=g.evaluate(a),d===null)return 0;const P=Number(d);if(!isNaN(P))return P}throw new Qt(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Rt(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?rt.fromString(Rt(this.args[0].evaluate(a))):Rt(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Pi=["Unknown","Point","LineString","Polygon"];class Vi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let d=this._parseColorCache[a];return d||(d=this._parseColorCache[a]=Ge.parse(a)),d}}class Fi{constructor(a,d,g,P){this.name=a,this.type=d,this._evaluate=g,this.args=P}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,d){const g=a[0],P=Fi.definitions[g];if(!P)return d.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(P)?P[0]:P.type,F=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,ie=F.filter(([_e])=>!Array.isArray(_e)||_e.length===a.length-1);let le=null;for(const[_e,Re]of ie){le=new Sd(d.registry,d.path,null,d.scope);const Be=[];let He=!1;for(let Ze=1;Ze<a.length;Ze++){const Xe=a[Ze],ut=Array.isArray(_e)?_e[Ze-1]:_e.type,lt=le.parse(Xe,1+Be.length,ut);if(!lt){He=!0;break}Be.push(lt)}if(!He)if(Array.isArray(_e)&&_e.length!==Be.length)le.error(`Expected ${_e.length} arguments, but found ${Be.length} instead.`);else{for(let Ze=0;Ze<Be.length;Ze++){const Xe=Array.isArray(_e)?_e[Ze]:_e.type,ut=Be[Ze];le.concat(Ze+1).checkSubtype(Xe,ut.type)}if(le.errors.length===0)return new Fi(g,z,Re,Be)}}if(ie.length===1)d.errors.push(...le.errors);else{const _e=(ie.length?ie:F).map(([Be])=>{return He=Be,Array.isArray(He)?`(${He.map(dt).join(", ")})`:`(${dt(He.type)}...)`;var He}).join(" | "),Re=[];for(let Be=1;Be<a.length;Be++){const He=d.parse(a[Be],1+Re.length);if(!He)return null;Re.push(dt(He.type))}d.error(`Expected arguments of type ${_e}, but found (${Re.join(", ")}) instead.`)}return null}static register(a,d){Fi.definitions=d;for(const g in d)a[g]=Fi}}class fn{constructor(a,d,g){this.type=un,this.locale=g,this.caseSensitive=a,this.diacriticSensitive=d}static parse(a,d){if(a.length!==2)return d.error("Expected one argument.");const g=a[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");const P=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Tt);if(!P)return null;const z=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Tt);if(!z)return null;let F=null;return g.locale&&(F=d.parse(g.locale,1,Et),!F)?null:new fn(P,z,F)}evaluate(a){return new Qe(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Yn=8192;function br(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function Hr(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function ap(c,a){const d=(180+c[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,P=Math.pow(2,a.z);return[Math.round(d*P*Yn),Math.round(g*P*Yn)]}function tu(c,a,d){const g=c[0]-a[0],P=c[1]-a[1],z=c[0]-d[0],F=c[1]-d[1];return g*F-z*P==0&&g*z<=0&&P*F<=0}function $n(c,a){let d=!1;for(let F=0,ie=a.length;F<ie;F++){const le=a[F];for(let _e=0,Re=le.length;_e<Re-1;_e++){if(tu(c,le[_e],le[_e+1]))return!1;(P=le[_e])[1]>(g=c)[1]!=(z=le[_e+1])[1]>g[1]&&g[0]<(z[0]-P[0])*(g[1]-P[1])/(z[1]-P[1])+P[0]&&(d=!d)}}var g,P,z;return d}function Jx(c,a){for(let d=0;d<a.length;d++)if($n(c,a[d]))return!0;return!1}function wd(c,a,d,g){const P=g[0]-d[0],z=g[1]-d[1],F=(c[0]-d[0])*z-P*(c[1]-d[1]),ie=(a[0]-d[0])*z-P*(a[1]-d[1]);return F>0&&ie<0||F<0&&ie>0}function e0(c,a,d){for(const _e of d)for(let Re=0;Re<_e.length-1;++Re)if((ie=[(F=_e[Re+1])[0]-(z=_e[Re])[0],F[1]-z[1]])[0]*(le=[(P=a)[0]-(g=c)[0],P[1]-g[1]])[1]-ie[1]*le[0]!=0&&wd(g,P,z,F)&&wd(z,F,g,P))return!0;var g,P,z,F,ie,le;return!1}function op(c,a){for(let d=0;d<c.length;++d)if(!$n(c[d],a))return!1;for(let d=0;d<c.length-1;++d)if(e0(c[d],c[d+1],a))return!1;return!0}function jm(c,a){for(let d=0;d<a.length;d++)if(op(c,a[d]))return!0;return!1}function lp(c,a,d){const g=[];for(let P=0;P<c.length;P++){const z=[];for(let F=0;F<c[P].length;F++){const ie=ap(c[P][F],d);br(a,ie),z.push(ie)}g.push(z)}return g}function cp(c,a,d){const g=[];for(let P=0;P<c.length;P++){const z=lp(c[P],a,d);g.push(z)}return g}function up(c,a,d,g){if(c[0]<d[0]||c[0]>d[2]){const P=.5*g;let z=c[0]-d[0]>P?-g:d[0]-c[0]>P?g:0;z===0&&(z=c[0]-d[2]>P?-g:d[2]-c[0]>P?g:0),c[0]+=z}br(a,c)}function Om(c,a,d,g){const P=Math.pow(2,g.z)*Yn,z=[g.x*Yn,g.y*Yn],F=[];for(const ie of c)for(const le of ie){const _e=[le.x+z[0],le.y+z[1]];up(_e,a,d,P),F.push(_e)}return F}function Fm(c,a,d,g){const P=Math.pow(2,g.z)*Yn,z=[g.x*Yn,g.y*Yn],F=[];for(const le of c){const _e=[];for(const Re of le){const Be=[Re.x+z[0],Re.y+z[1]];br(a,Be),_e.push(Be)}F.push(_e)}if(a[2]-a[0]<=P/2){(ie=a)[0]=ie[1]=1/0,ie[2]=ie[3]=-1/0;for(const le of F)for(const _e of le)up(_e,a,d,P)}var ie;return F}class gl{constructor(a,d){this.type=Tt,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(At(a[1])){const g=a[1];if(g.type==="FeatureCollection")for(let P=0;P<g.features.length;++P){const z=g.features[P].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new gl(g,g.features[P].geometry)}else if(g.type==="Feature"){const P=g.geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new gl(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new gl(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,g){const P=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){const ie=lp(g.coordinates,z,F),le=Om(d.geometry(),P,z,F);if(!Hr(P,z))return!1;for(const _e of le)if(!$n(_e,ie))return!1}if(g.type==="MultiPolygon"){const ie=cp(g.coordinates,z,F),le=Om(d.geometry(),P,z,F);if(!Hr(P,z))return!1;for(const _e of le)if(!Jx(_e,ie))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,g){const P=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){const ie=lp(g.coordinates,z,F),le=Fm(d.geometry(),P,z,F);if(!Hr(P,z))return!1;for(const _e of le)if(!op(_e,ie))return!1}if(g.type==="MultiPolygon"){const ie=cp(g.coordinates,z,F),le=Fm(d.geometry(),P,z,F);if(!Hr(P,z))return!1;for(const _e of le)if(!jm(_e,ie))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Cd(c){if(c instanceof Fi&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof gl)return!1;let a=!0;return c.eachChild(d=>{a&&!Cd(d)&&(a=!1)}),a}function Kl(c){if(c instanceof Fi&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(d=>{a&&!Kl(d)&&(a=!1)}),a}function iu(c,a){if(c instanceof Fi&&a.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild(g=>{d&&!iu(g,a)&&(d=!1)}),d}class Td{constructor(a,d){this.type=d.type,this.name=a,this.boundExpression=d}static parse(a,d){if(a.length!==2||typeof a[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const g=a[1];return d.scope.has(g)?new Td(g,d.scope.get(g)):d.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Sd{constructor(a,d=[],g,P=new Ct,z=[]){this.registry=a,this.path=d,this.key=d.map(F=>`[${F}]`).join(""),this.scope=P,this.errors=z,this.expectedType=g}parse(a,d,g,P,z={}){return d?this.concat(d,g,P)._parse(a,z):this._parse(a,z)}_parse(a,d){function g(P,z,F){return F==="assert"?new bi(z,[P]):F==="coerce"?new _i(z,[P]):P}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const P=a[0];if(typeof P!="string")return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[P];if(z){let F=z.parse(a,this);if(!F)return null;if(this.expectedType){const ie=this.expectedType,le=F.type;if(ie.kind!=="string"&&ie.kind!=="number"&&ie.kind!=="boolean"&&ie.kind!=="object"&&ie.kind!=="array"||le.kind!=="value")if(ie.kind!=="color"&&ie.kind!=="formatted"&&ie.kind!=="resolvedImage"||le.kind!=="value"&&le.kind!=="string")if(ie.kind!=="padding"||le.kind!=="value"&&le.kind!=="number"&&le.kind!=="array"){if(this.checkSubtype(ie,le))return null}else F=g(F,ie,d.typeAnnotation||"coerce");else F=g(F,ie,d.typeAnnotation||"coerce");else F=g(F,ie,d.typeAnnotation||"assert")}if(!(F instanceof li)&&F.type.kind!=="resolvedImage"&&nu(F)){const ie=new Vi;try{F=new li(F.type,F.evaluate(ie))}catch(le){return this.error(le.message),null}}return F}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,d,g){const P=typeof a=="number"?this.path.concat(a):this.path,z=g?this.scope.concat(g):this.scope;return new Sd(this.registry,P,d||null,z,this.errors)}error(a,...d){const g=`${this.key}${d.map(P=>`[${P}]`).join("")}`;this.errors.push(new gt(g,a))}checkSubtype(a,d){const g=It(a,d);return g&&this.error(g),g}}function nu(c){if(c instanceof Td)return nu(c.boundExpression);if(c instanceof Fi&&c.name==="error"||c instanceof fn||c instanceof gl)return!1;const a=c instanceof _i||c instanceof bi;let d=!0;return c.eachChild(g=>{d=a?d&&nu(g):d&&g instanceof li}),!!d&&Cd(c)&&iu(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ed(c,a){const d=c.length-1;let g,P,z=0,F=d,ie=0;for(;z<=F;)if(ie=Math.floor((z+F)/2),g=c[ie],P=c[ie+1],g<=a){if(ie===d||a<P)return ie;z=ie+1}else{if(!(g>a))throw new Qt("Input is not a number.");F=ie-1}return 0}class ru{constructor(a,d,g){this.type=a,this.input=d,this.labels=[],this.outputs=[];for(const[P,z]of g)this.labels.push(P),this.outputs.push(z)}static parse(a,d){if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");const g=d.parse(a[1],1,ft);if(!g)return null;const P=[];let z=null;d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType);for(let F=1;F<a.length;F+=2){const ie=F===1?-1/0:a[F],le=a[F+1],_e=F,Re=F+1;if(typeof ie!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(P.length&&P[P.length-1][0]>=ie)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const Be=d.parse(le,Re,z);if(!Be)return null;z=z||Be.type,P.push([ie,Be])}return new ru(z,g,P)}evaluate(a){const d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(a);const P=this.input.evaluate(a);if(P<=d[0])return g[0].evaluate(a);const z=d.length;return P>=d[z-1]?g[z-1].evaluate(a):g[Ed(d,P)].evaluate(a)}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function fr(c,a,d){return c*(1-d)+a*d}var su=Object.freeze({__proto__:null,number:fr,color:function(c,a,d){return new Ge(fr(c.r,a.r,d),fr(c.g,a.g,d),fr(c.b,a.b,d),fr(c.a,a.a,d))},array:function(c,a,d){return c.map((g,P)=>fr(g,a[P],d))},padding:function(c,a,d){const g=c.values,P=a.values;return new ot([fr(g[0],P[0],d),fr(g[1],P[1],d),fr(g[2],P[2],d),fr(g[3],P[3],d)])}});const dp=.95047,Bm=1.08883,$m=4/29,kd=6/29,hp=3*kd*kd,t0=Math.PI/180,i0=180/Math.PI;function pp(c){return c>.008856451679035631?Math.pow(c,1/3):c/hp+$m}function fp(c){return c>kd?c*c*c:hp*(c-$m)}function mp(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function gp(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Um(c){const a=gp(c.r),d=gp(c.g),g=gp(c.b),P=pp((.4124564*a+.3575761*d+.1804375*g)/dp),z=pp((.2126729*a+.7151522*d+.072175*g)/1);return{l:116*z-16,a:500*(P-z),b:200*(z-pp((.0193339*a+.119192*d+.9503041*g)/Bm)),alpha:c.a}}function Rn(c){let a=(c.l+16)/116,d=isNaN(c.a)?a:a+c.a/500,g=isNaN(c.b)?a:a-c.b/200;return a=1*fp(a),d=dp*fp(d),g=Bm*fp(g),new Ge(mp(3.2404542*d-1.5371385*a-.4985314*g),mp(-.969266*d+1.8760108*a+.041556*g),mp(.0556434*d-.2040259*a+1.0572252*g),c.alpha)}function n0(c,a,d){const g=a-c;return c+d*(g>180||g<-180?g-360*Math.round(g/360):g)}const au={forward:Um,reverse:Rn,interpolate:function(c,a,d){return{l:fr(c.l,a.l,d),a:fr(c.a,a.a,d),b:fr(c.b,a.b,d),alpha:fr(c.alpha,a.alpha,d)}}},ou={forward:function(c){const{l:a,a:d,b:g}=Um(c),P=Math.atan2(g,d)*i0;return{h:P<0?P+360:P,c:Math.sqrt(d*d+g*g),l:a,alpha:c.a}},reverse:function(c){const a=c.h*t0,d=c.c;return Rn({l:c.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:c.alpha})},interpolate:function(c,a,d){return{h:n0(c.h,a.h,d),c:fr(c.c,a.c,d),l:fr(c.l,a.l,d),alpha:fr(c.alpha,a.alpha,d)}}};var Vm=Object.freeze({__proto__:null,lab:au,hcl:ou});class ra{constructor(a,d,g,P,z){this.type=a,this.operator=d,this.interpolation=g,this.input=P,this.labels=[],this.outputs=[];for(const[F,ie]of z)this.labels.push(F),this.outputs.push(ie)}static interpolationFactor(a,d,g,P){let z=0;if(a.name==="exponential")z=yp(d,a.base,g,P);else if(a.name==="linear")z=yp(d,1,g,P);else if(a.name==="cubic-bezier"){const F=a.controlPoints;z=new p(F[0],F[1],F[2],F[3]).solve(yp(d,1,g,P))}return z}static parse(a,d){let[g,P,z,...F]=a;if(!Array.isArray(P)||P.length===0)return d.error("Expected an interpolation type expression.",1);if(P[0]==="linear")P={name:"linear"};else if(P[0]==="exponential"){const _e=P[1];if(typeof _e!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:_e}}else{if(P[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(P[0])}`,1,0);{const _e=P.slice(1);if(_e.length!==4||_e.some(Re=>typeof Re!="number"||Re<0||Re>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:_e}}}if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(z=d.parse(z,2,ft),!z)return null;const ie=[];let le=null;g==="interpolate-hcl"||g==="interpolate-lab"?le=ai:d.expectedType&&d.expectedType.kind!=="value"&&(le=d.expectedType);for(let _e=0;_e<F.length;_e+=2){const Re=F[_e],Be=F[_e+1],He=_e+3,Ze=_e+4;if(typeof Re!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',He);if(ie.length&&ie[ie.length-1][0]>=Re)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',He);const Xe=d.parse(Be,Ze,le);if(!Xe)return null;le=le||Xe.type,ie.push([Re,Xe])}return le.kind==="number"||le.kind==="color"||le.kind==="padding"||le.kind==="array"&&le.itemType.kind==="number"&&typeof le.N=="number"?new ra(le,g,P,z,ie):d.error(`Type ${dt(le)} is not interpolatable.`)}evaluate(a){const d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(a);const P=this.input.evaluate(a);if(P<=d[0])return g[0].evaluate(a);const z=d.length;if(P>=d[z-1])return g[z-1].evaluate(a);const F=Ed(d,P),ie=ra.interpolationFactor(this.interpolation,P,d[F],d[F+1]),le=g[F].evaluate(a),_e=g[F+1].evaluate(a);return this.operator==="interpolate"?su[this.type.kind.toLowerCase()](le,_e,ie):this.operator==="interpolate-hcl"?ou.reverse(ou.interpolate(ou.forward(le),ou.forward(_e),ie)):au.reverse(au.interpolate(au.forward(le),au.forward(_e),ie))}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function yp(c,a,d,g){const P=g-d,z=c-d;return P===0?0:a===1?z/P:(Math.pow(a,z)-1)/(Math.pow(a,P)-1)}class Ad{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expectected at least one argument.");let g=null;const P=d.expectedType;P&&P.kind!=="value"&&(g=P);const z=[];for(const ie of a.slice(1)){const le=d.parse(ie,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!le)return null;g=g||le.type,z.push(le)}if(!g)throw new Error("No output type");const F=P&&z.some(ie=>It(P,ie.type));return new Ad(F?qt:g,z)}evaluate(a){let d,g=null,P=0;for(const z of this.args)if(P++,g=z.evaluate(a),g&&g instanceof rt&&!g.available&&(d||(d=g.name),g=null,P===this.args.length&&(g=d)),g!==null)break;return g}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class Md{constructor(a,d){this.type=d.type,this.bindings=[].concat(a),this.result=d}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const d of this.bindings)a(d[1]);a(this.result)}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const g=[];for(let z=1;z<a.length-1;z+=2){const F=a[z];if(typeof F!="string")return d.error(`Expected string, but found ${typeof F} instead.`,z);if(/[^a-zA-Z0-9_]/.test(F))return d.error("Variable names must contain only alphanumeric characters or '_'.",z);const ie=d.parse(a[z+1],z+1);if(!ie)return null;g.push([F,ie])}const P=d.parse(a[a.length-1],a.length-1,d.expectedType,g);return P?new Md(g,P):null}outputDefined(){return this.result.outputDefined()}}class xp{constructor(a,d,g){this.type=a,this.index=d,this.input=g}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const g=d.parse(a[1],1,ft),P=d.parse(a[2],2,an(d.expectedType||qt));return g&&P?new xp(P.type.itemType,g,P):null}evaluate(a){const d=this.index.evaluate(a),g=this.input.evaluate(a);if(d<0)throw new Qt(`Array index out of bounds: ${d} < 0.`);if(d>=g.length)throw new Qt(`Array index out of bounds: ${d} > ${g.length-1}.`);if(d!==Math.floor(d))throw new Qt(`Array index must be an integer, but found ${d} instead.`);return g[d]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class vp{constructor(a,d){this.type=Tt,this.needle=a,this.haystack=d}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const g=d.parse(a[1],1,qt),P=d.parse(a[2],2,qt);return g&&P?Ft(g.type,[Tt,Et,ft,Lt,qt])?new vp(g,P):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(g.type)} instead`):null}evaluate(a){const d=this.needle.evaluate(a),g=this.haystack.evaluate(a);if(!g)return!1;if(!Yt(d,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(zt(d))} instead.`);if(!Yt(g,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${dt(zt(g))} instead.`);return g.indexOf(d)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class Pd{constructor(a,d,g){this.type=ft,this.needle=a,this.haystack=d,this.fromIndex=g}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const g=d.parse(a[1],1,qt),P=d.parse(a[2],2,qt);if(!g||!P)return null;if(!Ft(g.type,[Tt,Et,ft,Lt,qt]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(g.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new Pd(g,P,z):null}return new Pd(g,P)}evaluate(a){const d=this.needle.evaluate(a),g=this.haystack.evaluate(a);if(!Yt(d,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(zt(d))} instead.`);if(!Yt(g,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${dt(zt(g))} instead.`);if(this.fromIndex){const P=this.fromIndex.evaluate(a);return g.indexOf(d,P)}return g.indexOf(d)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class bp{constructor(a,d,g,P,z,F){this.inputType=a,this.type=d,this.input=g,this.cases=P,this.outputs=z,this.otherwise=F}static parse(a,d){if(a.length<5)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return d.error("Expected an even number of arguments.");let g,P;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);const z={},F=[];for(let _e=2;_e<a.length-1;_e+=2){let Re=a[_e];const Be=a[_e+1];Array.isArray(Re)||(Re=[Re]);const He=d.concat(_e);if(Re.length===0)return He.error("Expected at least one branch label.");for(const Xe of Re){if(typeof Xe!="number"&&typeof Xe!="string")return He.error("Branch labels must be numbers or strings.");if(typeof Xe=="number"&&Math.abs(Xe)>Number.MAX_SAFE_INTEGER)return He.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Xe=="number"&&Math.floor(Xe)!==Xe)return He.error("Numeric branch labels must be integer values.");if(g){if(He.checkSubtype(g,zt(Xe)))return null}else g=zt(Xe);if(z[String(Xe)]!==void 0)return He.error("Branch labels must be unique.");z[String(Xe)]=F.length}const Ze=d.parse(Be,_e,P);if(!Ze)return null;P=P||Ze.type,F.push(Ze)}const ie=d.parse(a[1],1,qt);if(!ie)return null;const le=d.parse(a[a.length-1],a.length-1,P);return le?ie.type.kind!=="value"&&d.concat(1).checkSubtype(g,ie.type)?null:new bp(g,P,ie,z,F,le):null}evaluate(a){const d=this.input.evaluate(a);return(zt(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class _p{constructor(a,d,g){this.type=a,this.branches=d,this.otherwise=g}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return d.error("Expected an odd number of arguments.");let g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const P=[];for(let F=1;F<a.length-1;F+=2){const ie=d.parse(a[F],F,Tt);if(!ie)return null;const le=d.parse(a[F+1],F+1,g);if(!le)return null;P.push([ie,le]),g=g||le.type}const z=d.parse(a[a.length-1],a.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new _p(g,P,z)}evaluate(a){for(const[d,g]of this.branches)if(d.evaluate(a))return g.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[d,g]of this.branches)a(d),a(g);a(this.otherwise)}outputDefined(){return this.branches.every(([a,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Id{constructor(a,d,g,P){this.type=a,this.input=d,this.beginIndex=g,this.endIndex=P}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const g=d.parse(a[1],1,qt),P=d.parse(a[2],2,ft);if(!g||!P)return null;if(!Ft(g.type,[an(qt),Et,qt]))return d.error(`Expected first argument to be of type array or string, but found ${dt(g.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new Id(g.type,g,P,z):null}return new Id(g.type,g,P)}evaluate(a){const d=this.input.evaluate(a),g=this.beginIndex.evaluate(a);if(!Yt(d,["string","array"]))throw new Qt(`Expected first argument to be of type array or string, but found ${dt(zt(d))} instead.`);if(this.endIndex){const P=this.endIndex.evaluate(a);return d.slice(g,P)}return d.slice(g)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Gm(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Hm(c,a,d,g){return g.compare(a,d)===0}function Ql(c,a,d){const g=c!=="=="&&c!=="!=";return class iA{constructor(z,F,ie){this.type=Tt,this.lhs=z,this.rhs=F,this.collator=ie,this.hasUntypedArgument=z.type.kind==="value"||F.type.kind==="value"}static parse(z,F){if(z.length!==3&&z.length!==4)return F.error("Expected two or three arguments.");const ie=z[0];let le=F.parse(z[1],1,qt);if(!le)return null;if(!Gm(ie,le.type))return F.concat(1).error(`"${ie}" comparisons are not supported for type '${dt(le.type)}'.`);let _e=F.parse(z[2],2,qt);if(!_e)return null;if(!Gm(ie,_e.type))return F.concat(2).error(`"${ie}" comparisons are not supported for type '${dt(_e.type)}'.`);if(le.type.kind!==_e.type.kind&&le.type.kind!=="value"&&_e.type.kind!=="value")return F.error(`Cannot compare types '${dt(le.type)}' and '${dt(_e.type)}'.`);g&&(le.type.kind==="value"&&_e.type.kind!=="value"?le=new bi(_e.type,[le]):le.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new bi(le.type,[_e])));let Re=null;if(z.length===4){if(le.type.kind!=="string"&&_e.type.kind!=="string"&&le.type.kind!=="value"&&_e.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(Re=F.parse(z[3],3,un),!Re)return null}return new iA(le,_e,Re)}evaluate(z){const F=this.lhs.evaluate(z),ie=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const le=zt(F),_e=zt(ie);if(le.kind!==_e.kind||le.kind!=="string"&&le.kind!=="number")throw new Qt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${le.kind}, ${_e.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const le=zt(F),_e=zt(ie);if(le.kind!=="string"||_e.kind!=="string")return a(z,F,ie)}return this.collator?d(z,F,ie,this.collator.evaluate(z)):a(z,F,ie)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const r0=Ql("==",function(c,a,d){return a===d},Hm),s0=Ql("!=",function(c,a,d){return a!==d},function(c,a,d,g){return!Hm(0,a,d,g)}),a0=Ql("<",function(c,a,d){return a<d},function(c,a,d,g){return g.compare(a,d)<0}),o0=Ql(">",function(c,a,d){return a>d},function(c,a,d,g){return g.compare(a,d)>0}),l0=Ql("<=",function(c,a,d){return a<=d},function(c,a,d,g){return g.compare(a,d)<=0}),c0=Ql(">=",function(c,a,d){return a>=d},function(c,a,d,g){return g.compare(a,d)>=0});class wp{constructor(a,d,g,P,z){this.type=Et,this.number=a,this.locale=d,this.currency=g,this.minFractionDigits=P,this.maxFractionDigits=z}static parse(a,d){if(a.length!==3)return d.error("Expected two arguments.");const g=d.parse(a[1],1,ft);if(!g)return null;const P=a[2];if(typeof P!="object"||Array.isArray(P))return d.error("NumberFormat options argument must be an object.");let z=null;if(P.locale&&(z=d.parse(P.locale,1,Et),!z))return null;let F=null;if(P.currency&&(F=d.parse(P.currency,1,Et),!F))return null;let ie=null;if(P["min-fraction-digits"]&&(ie=d.parse(P["min-fraction-digits"],1,ft),!ie))return null;let le=null;return P["max-fraction-digits"]&&(le=d.parse(P["max-fraction-digits"],1,ft),!le)?null:new wp(g,z,F,ie,le)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Dd{constructor(a){this.type=Qi,this.sections=a}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const g=a[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");const P=[];let z=!1;for(let F=1;F<=a.length-1;++F){const ie=a[F];if(z&&typeof ie=="object"&&!Array.isArray(ie)){z=!1;let le=null;if(ie["font-scale"]&&(le=d.parse(ie["font-scale"],1,ft),!le))return null;let _e=null;if(ie["text-font"]&&(_e=d.parse(ie["text-font"],1,an(Et)),!_e))return null;let Re=null;if(ie["text-color"]&&(Re=d.parse(ie["text-color"],1,ai),!Re))return null;const Be=P[P.length-1];Be.scale=le,Be.font=_e,Be.textColor=Re}else{const le=d.parse(a[F],1,qt);if(!le)return null;const _e=le.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,P.push({content:le,scale:null,font:null,textColor:null})}}return new Dd(P)}evaluate(a){return new ct(this.sections.map(d=>{const g=d.content.evaluate(a);return zt(g)===Bn?new st("",g,null,null,null):new st(Rt(g),null,d.scale?d.scale.evaluate(a):null,d.font?d.font.evaluate(a).join(","):null,d.textColor?d.textColor.evaluate(a):null)}))}eachChild(a){for(const d of this.sections)a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor)}outputDefined(){return!1}}class Cp{constructor(a){this.type=Bn,this.input=a}static parse(a,d){if(a.length!==2)return d.error("Expected two arguments.");const g=d.parse(a[1],1,Et);return g?new Cp(g):d.error("No image name provided.")}evaluate(a){const d=this.input.evaluate(a),g=rt.fromString(d);return g&&a.availableImages&&(g.available=a.availableImages.indexOf(d)>-1),g}eachChild(a){a(this.input)}outputDefined(){return!1}}class Tp{constructor(a){this.type=ft,this.input=a}static parse(a,d){if(a.length!==2)return d.error(`Expected 1 argument, but found ${a.length-1} instead.`);const g=d.parse(a[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${dt(g.type)} instead.`):new Tp(g):null}evaluate(a){const d=this.input.evaluate(a);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Qt(`Expected value to be of type string or array, but found ${dt(zt(d))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Jl={"==":r0,"!=":s0,">":o0,"<":a0,">=":c0,"<=":l0,array:bi,at:xp,boolean:bi,case:_p,coalesce:Ad,collator:fn,format:Dd,image:Cp,in:vp,"index-of":Pd,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:Tp,let:Md,literal:li,match:bp,number:bi,"number-format":wp,object:bi,slice:Id,step:ru,string:bi,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:Td,within:gl};function qm(c,[a,d,g,P]){a=a.evaluate(c),d=d.evaluate(c),g=g.evaluate(c);const z=P?P.evaluate(c):1,F=mt(a,d,g,z);if(F)throw new Qt(F);return new Ge(a/255*z,d/255*z,g/255*z,z)}function Wm(c,a){return c in a}function Sp(c,a){const d=a[c];return d===void 0?null:d}function Fo(c){return{type:c}}function Ym(c){return{result:"success",value:c}}function ec(c){return{result:"error",value:c}}function tc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function wr(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ep(c){return!!c.expression&&c.expression.interpolated}function Ci(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function ic(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function mr(c){return c}function nr(c,a){const d=a.type==="color",g=c.stops&&typeof c.stops[0][0]=="object",P=g||!(g||c.property!==void 0),z=c.type||(Ep(a)?"exponential":"interval");if(d||a.type==="padding"){const _e=d?Ge.parse:ot.parse;(c=tt({},c)).stops&&(c.stops=c.stops.map(Re=>[Re[0],_e(Re[1])])),c.default=_e(c.default?c.default:a.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!Vm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let F,ie,le;if(z==="exponential")F=Xm;else if(z==="interval")F=u0;else if(z==="categorical"){F=Zm,ie=Object.create(null);for(const _e of c.stops)ie[_e[0]]=_e[1];le=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);F=d0}if(g){const _e={},Re=[];for(let Ze=0;Ze<c.stops.length;Ze++){const Xe=c.stops[Ze],ut=Xe[0].zoom;_e[ut]===void 0&&(_e[ut]={zoom:ut,type:c.type,property:c.property,default:c.default,stops:[]},Re.push(ut)),_e[ut].stops.push([Xe[0].value,Xe[1]])}const Be=[];for(const Ze of Re)Be.push([_e[Ze].zoom,nr(_e[Ze],a)]);const He={name:"linear"};return{kind:"composite",interpolationType:He,interpolationFactor:ra.interpolationFactor.bind(void 0,He),zoomStops:Be.map(Ze=>Ze[0]),evaluate:({zoom:Ze},Xe)=>Xm({stops:Be,base:c.base},a,Ze).evaluate(Ze,Xe)}}if(P){const _e=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:_e,interpolationFactor:ra.interpolationFactor.bind(void 0,_e),zoomStops:c.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>F(c,a,Re,ie,le)}}return{kind:"source",evaluate(_e,Re){const Be=Re&&Re.properties?Re.properties[c.property]:void 0;return Be===void 0?Bo(c.default,a.default):F(c,a,Be,ie,le)}}}function Bo(c,a,d){return c!==void 0?c:a!==void 0?a:d!==void 0?d:void 0}function Zm(c,a,d,g,P){return Bo(typeof d===P?g[d]:void 0,c.default,a.default)}function u0(c,a,d){if(Ci(d)!=="number")return Bo(c.default,a.default);const g=c.stops.length;if(g===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[g-1][0])return c.stops[g-1][1];const P=Ed(c.stops.map(z=>z[0]),d);return c.stops[P][1]}function Xm(c,a,d){const g=c.base!==void 0?c.base:1;if(Ci(d)!=="number")return Bo(c.default,a.default);const P=c.stops.length;if(P===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[P-1][0])return c.stops[P-1][1];const z=Ed(c.stops.map(Re=>Re[0]),d),F=function(Re,Be,He,Ze){const Xe=Ze-He,ut=Re-He;return Xe===0?0:Be===1?ut/Xe:(Math.pow(Be,ut)-1)/(Math.pow(Be,Xe)-1)}(d,g,c.stops[z][0],c.stops[z+1][0]),ie=c.stops[z][1],le=c.stops[z+1][1];let _e=su[a.type]||mr;if(c.colorSpace&&c.colorSpace!=="rgb"){const Re=Vm[c.colorSpace];_e=(Be,He)=>Re.reverse(Re.interpolate(Re.forward(Be),Re.forward(He),F))}return typeof ie.evaluate=="function"?{evaluate(...Re){const Be=ie.evaluate.apply(void 0,Re),He=le.evaluate.apply(void 0,Re);if(Be!==void 0&&He!==void 0)return _e(Be,He,F)}}:_e(ie,le,F)}function d0(c,a,d){switch(a.type){case"color":d=Ge.parse(d);break;case"formatted":d=ct.fromString(d.toString());break;case"resolvedImage":d=rt.fromString(d.toString());break;case"padding":d=ot.parse(d);break;default:Ci(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0)}return Bo(d,c.default,a.default)}Fi.register(Jl,{error:[{kind:"error"},[Et],(c,[a])=>{throw new Qt(a.evaluate(c))}],typeof:[Et,[qt],(c,[a])=>dt(zt(a.evaluate(c)))],"to-rgba":[an(ft,4),[ai],(c,[a])=>a.evaluate(c).toArray()],rgb:[ai,[ft,ft,ft],qm],rgba:[ai,[ft,ft,ft,ft],qm],has:{type:Tt,overloads:[[[Et],(c,[a])=>Wm(a.evaluate(c),c.properties())],[[Et,hi],(c,[a,d])=>Wm(a.evaluate(c),d.evaluate(c))]]},get:{type:qt,overloads:[[[Et],(c,[a])=>Sp(a.evaluate(c),c.properties())],[[Et,hi],(c,[a,d])=>Sp(a.evaluate(c),d.evaluate(c))]]},"feature-state":[qt,[Et],(c,[a])=>Sp(a.evaluate(c),c.featureState||{})],properties:[hi,[],c=>c.properties()],"geometry-type":[Et,[],c=>c.geometryType()],id:[qt,[],c=>c.id()],zoom:[ft,[],c=>c.globals.zoom],"heatmap-density":[ft,[],c=>c.globals.heatmapDensity||0],"line-progress":[ft,[],c=>c.globals.lineProgress||0],accumulated:[qt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ft,Fo(ft),(c,a)=>{let d=0;for(const g of a)d+=g.evaluate(c);return d}],"*":[ft,Fo(ft),(c,a)=>{let d=1;for(const g of a)d*=g.evaluate(c);return d}],"-":{type:ft,overloads:[[[ft,ft],(c,[a,d])=>a.evaluate(c)-d.evaluate(c)],[[ft],(c,[a])=>-a.evaluate(c)]]},"/":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)/d.evaluate(c)],"%":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)%d.evaluate(c)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(c,[a,d])=>Math.pow(a.evaluate(c),d.evaluate(c))],sqrt:[ft,[ft],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))],log2:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[ft,[ft],(c,[a])=>Math.sin(a.evaluate(c))],cos:[ft,[ft],(c,[a])=>Math.cos(a.evaluate(c))],tan:[ft,[ft],(c,[a])=>Math.tan(a.evaluate(c))],asin:[ft,[ft],(c,[a])=>Math.asin(a.evaluate(c))],acos:[ft,[ft],(c,[a])=>Math.acos(a.evaluate(c))],atan:[ft,[ft],(c,[a])=>Math.atan(a.evaluate(c))],min:[ft,Fo(ft),(c,a)=>Math.min(...a.map(d=>d.evaluate(c)))],max:[ft,Fo(ft),(c,a)=>Math.max(...a.map(d=>d.evaluate(c)))],abs:[ft,[ft],(c,[a])=>Math.abs(a.evaluate(c))],round:[ft,[ft],(c,[a])=>{const d=a.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[ft,[ft],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[ft,[ft],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[Tt,[Et,qt],(c,[a,d])=>c.properties()[a.value]===d.value],"filter-id-==":[Tt,[qt],(c,[a])=>c.id()===a.value],"filter-type-==":[Tt,[Et],(c,[a])=>c.geometryType()===a.value],"filter-<":[Tt,[Et,qt],(c,[a,d])=>{const g=c.properties()[a.value],P=d.value;return typeof g==typeof P&&g<P}],"filter-id-<":[Tt,[qt],(c,[a])=>{const d=c.id(),g=a.value;return typeof d==typeof g&&d<g}],"filter->":[Tt,[Et,qt],(c,[a,d])=>{const g=c.properties()[a.value],P=d.value;return typeof g==typeof P&&g>P}],"filter-id->":[Tt,[qt],(c,[a])=>{const d=c.id(),g=a.value;return typeof d==typeof g&&d>g}],"filter-<=":[Tt,[Et,qt],(c,[a,d])=>{const g=c.properties()[a.value],P=d.value;return typeof g==typeof P&&g<=P}],"filter-id-<=":[Tt,[qt],(c,[a])=>{const d=c.id(),g=a.value;return typeof d==typeof g&&d<=g}],"filter->=":[Tt,[Et,qt],(c,[a,d])=>{const g=c.properties()[a.value],P=d.value;return typeof g==typeof P&&g>=P}],"filter-id->=":[Tt,[qt],(c,[a])=>{const d=c.id(),g=a.value;return typeof d==typeof g&&d>=g}],"filter-has":[Tt,[qt],(c,[a])=>a.value in c.properties()],"filter-has-id":[Tt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Tt,[an(Et)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[Tt,[an(qt)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[Tt,[Et,an(qt)],(c,[a,d])=>d.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[Tt,[Et,an(qt)],(c,[a,d])=>function(g,P,z,F){for(;z<=F;){const ie=z+F>>1;if(P[ie]===g)return!0;P[ie]>g?F=ie-1:z=ie+1}return!1}(c.properties()[a.value],d.value,0,d.value.length-1)],all:{type:Tt,overloads:[[[Tt,Tt],(c,[a,d])=>a.evaluate(c)&&d.evaluate(c)],[Fo(Tt),(c,a)=>{for(const d of a)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],(c,[a,d])=>a.evaluate(c)||d.evaluate(c)],[Fo(Tt),(c,a)=>{for(const d of a)if(d.evaluate(c))return!0;return!1}]]},"!":[Tt,[Tt],(c,[a])=>!a.evaluate(c)],"is-supported-script":[Tt,[Et],(c,[a])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(a.evaluate(c))}],upcase:[Et,[Et],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[Et,[Et],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[Et,Fo(qt),(c,a)=>a.map(d=>Rt(d.evaluate(c))).join("")],"resolved-locale":[Et,[un],(c,[a])=>a.evaluate(c).resolvedLocale()]});class kp{constructor(a,d){this.expression=a,this._warningHistory={},this._evaluator=new Vi,this._defaultValue=d?function(g){return g.type==="color"&&ic(g.default)?new Ge(0,0,0,0):g.type==="color"?Ge.parse(g.default)||null:g.type==="padding"?ot.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(a,d,g,P,z,F){return this._evaluator.globals=a,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=P,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(a,d,g,P,z,F){this._evaluator.globals=a,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=P,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F||null;try{const ie=this.expression.evaluate(this._evaluator);if(ie==null||typeof ie=="number"&&ie!=ie)return this._defaultValue;if(this._enumValues&&!(ie in this._enumValues))throw new Qt(`Expected value to be one of ${Object.keys(this._enumValues).map(le=>JSON.stringify(le)).join(", ")}, but found ${JSON.stringify(ie)} instead.`);return ie}catch(ie){return this._warningHistory[ie.message]||(this._warningHistory[ie.message]=!0,typeof console<"u"&&console.warn(ie.message)),this._defaultValue}}}function lu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Jl}function cu(c,a){const d=new Sd(Jl,[],a?function(P){const z={color:ai,string:Et,number:ft,enum:Et,boolean:Tt,formatted:Qi,padding:bn,resolvedImage:Bn};return P.type==="array"?an(z[P.value]||qt,P.length):z[P.type]}(a):void 0),g=d.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Ym(new kp(g,a)):ec(d.errors)}class Rd{constructor(a,d){this.kind=a,this._styleExpression=d,this.isStateDependent=a!=="constant"&&!Kl(d.expression)}evaluateWithoutErrorHandling(a,d,g,P,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,g,P,z,F)}evaluate(a,d,g,P,z,F){return this._styleExpression.evaluate(a,d,g,P,z,F)}}class uu{constructor(a,d,g,P){this.kind=a,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=a!=="camera"&&!Kl(d.expression),this.interpolationType=P}evaluateWithoutErrorHandling(a,d,g,P,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,g,P,z,F)}evaluate(a,d,g,P,z,F){return this._styleExpression.evaluate(a,d,g,P,z,F)}interpolationFactor(a,d,g){return this.interpolationType?ra.interpolationFactor(this.interpolationType,a,d,g):0}}function Km(c,a){const d=cu(c,a);if(d.result==="error")return d;const g=d.value.expression,P=Cd(g);if(!P&&!tc(a))return ec([new gt("","data expressions not supported")]);const z=iu(g,["zoom"]);if(!z&&!wr(a))return ec([new gt("","zoom expressions not supported")]);const F=Nd(g);return F||z?F instanceof gt?ec([F]):F instanceof ra&&!Ep(a)?ec([new gt("",'"interpolate" expressions cannot be used with this property')]):Ym(F?new uu(P?"camera":"composite",d.value,F.labels,F instanceof ra?F.interpolation:void 0):new Rd(P?"constant":"source",d.value)):ec([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ld{constructor(a,d){this._parameters=a,this._specification=d,tt(this,nr(this._parameters,this._specification))}static deserialize(a){return new Ld(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Nd(c){let a=null;if(c instanceof Md)a=Nd(c.result);else if(c instanceof Ad){for(const d of c.args)if(a=Nd(d),a)break}else(c instanceof ru||c instanceof ra)&&c.input instanceof Fi&&c.input.name==="zoom"&&(a=c);return a instanceof gt||c.eachChild(d=>{const g=Nd(d);g instanceof gt?a=g:!a&&g?a=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&g&&a!==g&&(a=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Fa(c){const a=c.key,d=c.value,g=c.valueSpec||{},P=c.objectElementValidators||{},z=c.style,F=c.styleSpec;let ie=[];const le=Ci(d);if(le!=="object")return[new $e(a,d,`object expected, ${le} found`)];for(const _e in d){const Re=_e.split(".")[0],Be=g[Re]||g["*"];let He;if(P[Re])He=P[Re];else if(g[Re])He=_s;else if(P["*"])He=P["*"];else{if(!g["*"]){ie.push(new $e(a,d[_e],`unknown property "${_e}"`));continue}He=_s}ie=ie.concat(He({key:(a&&`${a}.`)+_e,value:d[_e],valueSpec:Be,style:z,styleSpec:F,object:d,objectKey:_e},d))}for(const _e in g)P[_e]||g[_e].required&&g[_e].default===void 0&&d[_e]===void 0&&ie.push(new $e(a,d,`missing required property "${_e}"`));return ie}function Qm(c){const a=c.value,d=c.valueSpec,g=c.style,P=c.styleSpec,z=c.key,F=c.arrayElementValidator||_s;if(Ci(a)!=="array")return[new $e(z,a,`array expected, ${Ci(a)} found`)];if(d.length&&a.length!==d.length)return[new $e(z,a,`array length ${d.length} expected, length ${a.length} found`)];if(d["min-length"]&&a.length<d["min-length"])return[new $e(z,a,`array length at least ${d["min-length"]} expected, length ${a.length} found`)];let ie={type:d.value,values:d.values};P.$version<7&&(ie.function=d.function),Ci(d.value)==="object"&&(ie=d.value);let le=[];for(let _e=0;_e<a.length;_e++)le=le.concat(F({array:a,arrayIndex:_e,value:a[_e],valueSpec:ie,style:g,styleSpec:P,key:`${z}[${_e}]`}));return le}function Ap(c){const a=c.key,d=c.value,g=c.valueSpec;let P=Ci(d);return P==="number"&&d!=d&&(P="NaN"),P!=="number"?[new $e(a,d,`number expected, ${P} found`)]:"minimum"in g&&d<g.minimum?[new $e(a,d,`${d} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&d>g.maximum?[new $e(a,d,`${d} is greater than the maximum value ${g.maximum}`)]:[]}function Jm(c){const a=c.valueSpec,d=nt(c.value.type);let g,P,z,F={};const ie=d!=="categorical"&&c.value.property===void 0,le=!ie,_e=Ci(c.value.stops)==="array"&&Ci(c.value.stops[0])==="array"&&Ci(c.value.stops[0][0])==="object",Re=Fa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Ze){if(d==="identity")return[new $e(Ze.key,Ze.value,'identity function may not have a "stops" property')];let Xe=[];const ut=Ze.value;return Xe=Xe.concat(Qm({key:Ze.key,value:ut,valueSpec:Ze.valueSpec,style:Ze.style,styleSpec:Ze.styleSpec,arrayElementValidator:Be})),Ci(ut)==="array"&&ut.length===0&&Xe.push(new $e(Ze.key,ut,"array must have at least one stop")),Xe},default:function(Ze){return _s({key:Ze.key,value:Ze.value,valueSpec:a,style:Ze.style,styleSpec:Ze.styleSpec})}}});return d==="identity"&&ie&&Re.push(new $e(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||Re.push(new $e(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Ep(c.valueSpec)&&Re.push(new $e(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(le&&!tc(c.valueSpec)?Re.push(new $e(c.key,c.value,"property functions not supported")):ie&&!wr(c.valueSpec)&&Re.push(new $e(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!_e||c.value.property!==void 0||Re.push(new $e(c.key,c.value,'"property" property is required')),Re;function Be(Ze){let Xe=[];const ut=Ze.value,lt=Ze.key;if(Ci(ut)!=="array")return[new $e(lt,ut,`array expected, ${Ci(ut)} found`)];if(ut.length!==2)return[new $e(lt,ut,`array length 2 expected, length ${ut.length} found`)];if(_e){if(Ci(ut[0])!=="object")return[new $e(lt,ut,`object expected, ${Ci(ut[0])} found`)];if(ut[0].zoom===void 0)return[new $e(lt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new $e(lt,ut,"object stop key must have value")];if(z&&z>nt(ut[0].zoom))return[new $e(lt,ut[0].zoom,"stop zoom values must appear in ascending order")];nt(ut[0].zoom)!==z&&(z=nt(ut[0].zoom),P=void 0,F={}),Xe=Xe.concat(Fa({key:`${lt}[0]`,value:ut[0],valueSpec:{zoom:{}},style:Ze.style,styleSpec:Ze.styleSpec,objectElementValidators:{zoom:Ap,value:He}}))}else Xe=Xe.concat(He({key:`${lt}[0]`,value:ut[0],valueSpec:{},style:Ze.style,styleSpec:Ze.styleSpec},ut));return lu(ht(ut[1]))?Xe.concat([new $e(`${lt}[1]`,ut[1],"expressions are not allowed in function stops.")]):Xe.concat(_s({key:`${lt}[1]`,value:ut[1],valueSpec:a,style:Ze.style,styleSpec:Ze.styleSpec}))}function He(Ze,Xe){const ut=Ci(Ze.value),lt=nt(Ze.value),bt=Ze.value!==null?Ze.value:Xe;if(g){if(ut!==g)return[new $e(Ze.key,bt,`${ut} stop domain type must match previous stop domain type ${g}`)]}else g=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new $e(Ze.key,bt,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&d!=="categorical"){let Dt=`number expected, ${ut} found`;return tc(a)&&d===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(Ze.key,bt,Dt)]}return d!=="categorical"||ut!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&ut==="number"&&P!==void 0&&lt<P?[new $e(Ze.key,bt,"stop domain values must appear in ascending order")]:(P=lt,d==="categorical"&&lt in F?[new $e(Ze.key,bt,"stop domain values must be unique")]:(F[lt]=!0,[])):[new $e(Ze.key,bt,`integer expected, found ${lt}`)]}}function nc(c){const a=(c.expressionContext==="property"?Km:cu)(ht(c.value),c.valueSpec);if(a.result==="error")return a.value.map(g=>new $e(`${c.key}${g.key}`,c.value,g.message));const d=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new $e(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Kl(d))return[new $e(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Kl(d))return[new $e(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!iu(d,["zoom","feature-state"]))return[new $e(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Cd(d))return[new $e(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function du(c){const a=c.key,d=c.value,g=c.valueSpec,P=[];return Array.isArray(g.values)?g.values.indexOf(nt(d))===-1&&P.push(new $e(a,d,`expected one of [${g.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(g.values).indexOf(nt(d))===-1&&P.push(new $e(a,d,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(d)} found`)),P}function zd(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!zd(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const jd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mp(c){if(c==null)return{filter:()=>!0,needGeometry:!1};zd(c)||(c=Od(c));const a=cu(c,jd);if(a.result==="error")throw new Error(a.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,g,P)=>a.value.evaluate(d,g,{},P),needGeometry:Pp(c)}}function eg(c,a){return c<a?-1:c>a?1:0}function Pp(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Pp(c[a]))return!0;return!1}function Od(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?Fd(c[1],c[2],"=="):a==="!="?yl(Fd(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Fd(c[1],c[2],a):a==="any"?(d=c.slice(1),["any"].concat(d.map(Od))):a==="all"?["all"].concat(c.slice(1).map(Od)):a==="none"?["all"].concat(c.slice(1).map(Od).map(yl)):a==="in"?tg(c[1],c.slice(2)):a==="!in"?yl(tg(c[1],c.slice(2))):a==="has"?Bd(c[1]):a==="!has"?yl(Bd(c[1])):a!=="within"||c;var d}function Fd(c,a,d){switch(c){case"$type":return[`filter-type-${d}`,a];case"$id":return[`filter-id-${d}`,a];default:return[`filter-${d}`,c,a]}}function tg(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(d=>typeof d!=typeof a[0])?["filter-in-large",c,["literal",a.sort(eg)]]:["filter-in-small",c,["literal",a]]}}function Bd(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function yl(c){return["!",c]}function hu(c){return zd(ht(c.value))?nc(tt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$d(c)}function $d(c){const a=c.value,d=c.key;if(Ci(a)!=="array")return[new $e(d,a,`array expected, ${Ci(a)} found`)];const g=c.styleSpec;let P,z=[];if(a.length<1)return[new $e(d,a,"filter array must have at least 1 element")];switch(z=z.concat(du({key:`${d}[0]`,value:a[0],valueSpec:g.filter_operator,style:c.style,styleSpec:c.styleSpec})),nt(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&nt(a[1])==="$type"&&z.push(new $e(d,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&z.push(new $e(d,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(P=Ci(a[1]),P!=="string"&&z.push(new $e(`${d}[1]`,a[1],`string expected, ${P} found`)));for(let F=2;F<a.length;F++)P=Ci(a[F]),nt(a[1])==="$type"?z=z.concat(du({key:`${d}[${F}]`,value:a[F],valueSpec:g.geometry_type,style:c.style,styleSpec:c.styleSpec})):P!=="string"&&P!=="number"&&P!=="boolean"&&z.push(new $e(`${d}[${F}]`,a[F],`string, number, or boolean expected, ${P} found`));break;case"any":case"all":case"none":for(let F=1;F<a.length;F++)z=z.concat($d({key:`${d}[${F}]`,value:a[F],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":P=Ci(a[1]),a.length!==2?z.push(new $e(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):P!=="string"&&z.push(new $e(`${d}[1]`,a[1],`string expected, ${P} found`));break;case"within":P=Ci(a[1]),a.length!==2?z.push(new $e(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):P!=="object"&&z.push(new $e(`${d}[1]`,a[1],`object expected, ${P} found`))}return z}function ig(c,a){const d=c.key,g=c.style,P=c.styleSpec,z=c.value,F=c.objectKey,ie=P[`${a}_${c.layerType}`];if(!ie)return[];const le=F.match(/^(.*)-transition$/);if(a==="paint"&&le&&ie[le[1]]&&ie[le[1]].transition)return _s({key:d,value:z,valueSpec:P.transition,style:g,styleSpec:P});const _e=c.valueSpec||ie[F];if(!_e)return[new $e(d,z,`unknown property "${F}"`)];let Re;if(Ci(z)==="string"&&tc(_e)&&!_e.tokens&&(Re=/^{([^}]+)}$/.exec(z)))return[new $e(d,z,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Be=[];return c.layerType==="symbol"&&(F==="text-field"&&g&&!g.glyphs&&Be.push(new $e(d,z,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&ic(ht(z))&&nt(z.type)==="identity"&&Be.push(new $e(d,z,'"text-font" does not support identity functions'))),Be.concat(_s({key:c.key,value:z,valueSpec:_e,style:g,styleSpec:P,expressionContext:"property",propertyType:a,propertyKey:F}))}function pu(c){return ig(c,"paint")}function ng(c){return ig(c,"layout")}function rg(c){let a=[];const d=c.value,g=c.key,P=c.style,z=c.styleSpec;d.type||d.ref||a.push(new $e(g,d,'either "type" or "ref" is required'));let F=nt(d.type);const ie=nt(d.ref);if(d.id){const le=nt(d.id);for(let _e=0;_e<c.arrayIndex;_e++){const Re=P.layers[_e];nt(Re.id)===le&&a.push(new $e(g,d.id,`duplicate layer id "${d.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in d){let le;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in d&&a.push(new $e(g,d[_e],`"${_e}" is prohibited for ref layers`))}),P.layers.forEach(_e=>{nt(_e.id)===ie&&(le=_e)}),le?le.ref?a.push(new $e(g,d.ref,"ref cannot reference another ref layer")):F=nt(le.type):a.push(new $e(g,d.ref,`ref layer "${ie}" not found`))}else if(F!=="background")if(d.source){const le=P.sources&&P.sources[d.source],_e=le&&nt(le.type);le?_e==="vector"&&F==="raster"?a.push(new $e(g,d.source,`layer "${d.id}" requires a raster source`)):_e==="raster"&&F!=="raster"?a.push(new $e(g,d.source,`layer "${d.id}" requires a vector source`)):_e!=="vector"||d["source-layer"]?_e==="raster-dem"&&F!=="hillshade"?a.push(new $e(g,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!d.paint||!d.paint["line-gradient"]||_e==="geojson"&&le.lineMetrics||a.push(new $e(g,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new $e(g,d,`layer "${d.id}" must specify a "source-layer"`)):a.push(new $e(g,d.source,`source "${d.source}" not found`))}else a.push(new $e(g,d,'missing required property "source"'));return a=a.concat(Fa({key:g,value:d,valueSpec:z.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>_s({key:`${g}.type`,value:d.type,valueSpec:z.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:hu,layout:le=>Fa({layer:d,key:le.key,value:le.value,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{"*":_e=>ng(tt({layerType:F},_e))}}),paint:le=>Fa({layer:d,key:le.key,value:le.value,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{"*":_e=>pu(tt({layerType:F},_e))}})}})),a}function rc(c){const a=c.value,d=c.key,g=Ci(a);return g!=="string"?[new $e(d,a,`string expected, ${g} found`)]:[]}const sg={promoteId:function({key:c,value:a}){if(Ci(a)==="string")return rc({key:c,value:a});{const d=[];for(const g in a)d.push(...rc({key:`${c}.${g}`,value:a[g]}));return d}}};function ag(c){const a=c.value,d=c.key,g=c.styleSpec,P=c.style;if(!a.type)return[new $e(d,a,'"type" is required')];const z=nt(a.type);let F;switch(z){case"vector":case"raster":case"raster-dem":return F=Fa({key:d,value:a,valueSpec:g[`source_${z.replace("-","_")}`],style:c.style,styleSpec:g,objectElementValidators:sg}),F;case"geojson":if(F=Fa({key:d,value:a,valueSpec:g.source_geojson,style:P,styleSpec:g,objectElementValidators:sg}),a.cluster)for(const ie in a.clusterProperties){const[le,_e]=a.clusterProperties[ie],Re=typeof le=="string"?[le,["accumulated"],["get",ie]]:le;F.push(...nc({key:`${d}.${ie}.map`,value:_e,expressionContext:"cluster-map"})),F.push(...nc({key:`${d}.${ie}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return F;case"video":return Fa({key:d,value:a,valueSpec:g.source_video,style:P,styleSpec:g});case"image":return Fa({key:d,value:a,valueSpec:g.source_image,style:P,styleSpec:g});case"canvas":return[new $e(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return du({key:`${d}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:g})}}function fu(c){const a=c.value,d=c.styleSpec,g=d.light,P=c.style;let z=[];const F=Ci(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new $e("light",a,`object expected, ${F} found`)]),z;for(const ie in a){const le=ie.match(/^(.*)-transition$/);z=z.concat(le&&g[le[1]]&&g[le[1]].transition?_s({key:ie,value:a[ie],valueSpec:d.transition,style:P,styleSpec:d}):g[ie]?_s({key:ie,value:a[ie],valueSpec:g[ie],style:P,styleSpec:d}):[new $e(ie,a[ie],`unknown property "${ie}"`)])}return z}function mu(c){const a=c.value,d=c.styleSpec,g=d.terrain,P=c.style;let z=[];const F=Ci(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new $e("terrain",a,`object expected, ${F} found`)]),z;for(const ie in a)z=z.concat(g[ie]?_s({key:ie,value:a[ie],valueSpec:g[ie],style:P,styleSpec:d}):[new $e(ie,a[ie],`unknown property "${ie}"`)]);return z}const sa={"*":()=>[],array:Qm,boolean:function(c){const a=c.value,d=c.key,g=Ci(a);return g!=="boolean"?[new $e(d,a,`boolean expected, ${g} found`)]:[]},number:Ap,color:function(c){const a=c.key,d=c.value,g=Ci(d);return g!=="string"?[new $e(a,d,`color expected, ${g} found`)]:vi(d)===null?[new $e(a,d,`color expected, "${d}" found`)]:[]},constants:Ke,enum:du,filter:hu,function:Jm,layer:rg,object:Fa,source:ag,light:fu,terrain:mu,string:rc,formatted:function(c){return rc(c).length===0?[]:nc(c)},resolvedImage:function(c){return rc(c).length===0?[]:nc(c)},padding:function(c){const a=c.key,d=c.value;if(Ci(d)==="array"){if(d.length<1||d.length>4)return[new $e(a,d,`padding requires 1 to 4 values; ${d.length} values found`)];const g={type:"number"};let P=[];for(let z=0;z<d.length;z++)P=P.concat(_s({key:`${a}[${z}]`,value:d[z],valueSpec:g}));return P}return Ap({key:a,value:d,valueSpec:{}})}};function _s(c){const a=c.value,d=c.valueSpec,g=c.styleSpec;return d.expression&&ic(nt(a))?Jm(c):d.expression&&lu(ht(a))?nc(c):d.type&&sa[d.type]?sa[d.type](c):Fa(tt({},c,{valueSpec:d.type?g[d.type]:d}))}function h0(c){const a=c.value,d=c.key,g=rc(c);return g.length||(a.indexOf("{fontstack}")===-1&&g.push(new $e(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&g.push(new $e(d,a,'"glyphs" url must include a "{range}" token'))),g}function $o(c,a=Pe){let d=[];return d=d.concat(_s({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,objectElementValidators:{glyphs:h0,"*":()=>[]}})),c.constants&&(d=d.concat(Ke({key:"constants",value:c.constants,style:c,styleSpec:a}))),og(d)}function og(c){return[].concat(c).sort((a,d)=>a.line-d.line)}function xl(c){return function(...a){return og(c.apply(this,a))}}$o.source=xl(ag),$o.light=xl(fu),$o.terrain=xl(mu),$o.layer=xl(rg),$o.filter=xl(hu),$o.paintProperty=xl(pu),$o.layoutProperty=xl(ng);const vl=$o,p0=vl.light,Ip=vl.paintProperty,f0=vl.layoutProperty;function lg(c,a){let d=!1;if(a&&a.length)for(const g of a)c.fire(new Me(new Error(g.message))),d=!0;return d}class bl{constructor(a,d,g){const P=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const F=new Int32Array(this.arrayBuffer);a=F[0],this.d=(d=F[1])+2*(g=F[2]);for(let le=0;le<this.d*this.d;le++){const _e=F[3+le],Re=F[3+le+1];P.push(_e===Re?null:F.subarray(_e,Re))}const ie=F[3+P.length+1];this.keys=F.subarray(F[3+P.length],ie),this.bboxes=F.subarray(ie),this.insert=this._insertReadonly}else{this.d=d+2*g;for(let F=0;F<this.d*this.d;F++)P.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=a,this.padding=g,this.scale=d/a,this.uid=0;const z=g/d*a;this.min=-z,this.max=a+z}insert(a,d,g,P,z){this._forEachCell(d,g,P,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(P),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,d,g,P,z,F){this.cells[z].push(F)}query(a,d,g,P,z){const F=this.min,ie=this.max;if(a<=F&&d<=F&&ie<=g&&ie<=P&&!z)return Array.prototype.slice.call(this.keys);{const le=[];return this._forEachCell(a,d,g,P,this._queryCell,le,{},z),le}}_queryCell(a,d,g,P,z,F,ie,le){const _e=this.cells[z];if(_e!==null){const Re=this.keys,Be=this.bboxes;for(let He=0;He<_e.length;He++){const Ze=_e[He];if(ie[Ze]===void 0){const Xe=4*Ze;(le?le(Be[Xe+0],Be[Xe+1],Be[Xe+2],Be[Xe+3]):a<=Be[Xe+2]&&d<=Be[Xe+3]&&g>=Be[Xe+0]&&P>=Be[Xe+1])?(ie[Ze]=!0,F.push(Re[Ze])):ie[Ze]=!1}}}}_forEachCell(a,d,g,P,z,F,ie,le){const _e=this._convertToCellCoord(a),Re=this._convertToCellCoord(d),Be=this._convertToCellCoord(g),He=this._convertToCellCoord(P);for(let Ze=_e;Ze<=Be;Ze++)for(let Xe=Re;Xe<=He;Xe++){const ut=this.d*Xe+Ze;if((!le||le(this._convertFromCellCoord(Ze),this._convertFromCellCoord(Xe),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(Xe+1)))&&z.call(this,a,d,g,P,ut,F,ie,le))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,d=3+this.cells.length+1+1;let g=0;for(let F=0;F<this.cells.length;F++)g+=this.cells[F].length;const P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let z=d;for(let F=0;F<a.length;F++){const ie=a[F];P[3+F]=z,P.set(ie,z),z+=ie.length}return P[3+a.length]=z,P.set(this.keys,z),z+=this.keys.length,P[3+a.length+1]=z,P.set(this.bboxes,z),z+=this.bboxes.length,P.buffer}static serialize(a,d){const g=a.toArrayBuffer();return d&&d.push(g),{buffer:g}}static deserialize(a){return new bl(a.buffer)}}const Uo={};function mi(c,a,d={}){if(Uo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),Uo[c]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}mi("Object",Object),mi("TransferableGridIndex",bl),mi("Color",Ge),mi("Error",Error),mi("AJAXError",J),mi("ResolvedImage",rt),mi("StylePropertyFunction",Ld),mi("StyleExpression",kp,{omit:["_evaluator"]}),mi("ZoomDependentExpression",uu),mi("ZoomConstantExpression",Rd),mi("CompoundExpression",Fi,{omit:["_evaluate"]});for(const c in Jl)Jl[c]._classRegistryKey||mi(`Expression_${c}`,Jl[c]);function Dp(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function gu(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Dp(c)||L(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return a&&a.push(d.buffer),d}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const g of c)d.push(gu(g,a));return d}if(typeof c=="object"){const d=c.constructor,g=d._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!Uo[g])throw new Error(`${g} is not registered.`);const P=d.serialize?d.serialize(c,a):{};if(d.serialize){if(a&&P===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in c){if(!c.hasOwnProperty(z)||Uo[g].omit.indexOf(z)>=0)continue;const F=c[z];P[z]=Uo[g].shallow.indexOf(z)>=0?F:gu(F,a)}c instanceof Error&&(P.message=c.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(P.$name=g),P}throw new Error("can't serialize object of type "+typeof c)}function _l(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Dp(c)||L(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(_l);if(typeof c=="object"){const a=c.$name||"Object";if(!Uo[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:d}=Uo[a];if(!d)throw new Error(`can't deserialize unregistered class ${a}`);if(d.deserialize)return d.deserialize(c);const g=Object.create(d.prototype);for(const P of Object.keys(c)){if(P==="$name")continue;const z=c[P];g[P]=Uo[a].shallow.indexOf(P)>=0?z:_l(z)}return g}throw new Error("can't deserialize object of type "+typeof c)}class yu{constructor(){this.first=!0}update(a,d){const g=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=g,!0))}}const ti={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Rp(c){for(const a of c)if(xu(a.charCodeAt(0)))return!0;return!1}function cg(c){for(const a of c)if(!m0(a.charCodeAt(0)))return!1;return!0}function m0(c){return!(ti.Arabic(c)||ti["Arabic Supplement"](c)||ti["Arabic Extended-A"](c)||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c))}function xu(c){return!(c!==746&&c!==747&&(c<4352||!(ti["Bopomofo Extended"](c)||ti.Bopomofo(c)||ti["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||ti["CJK Compatibility Ideographs"](c)||ti["CJK Compatibility"](c)||ti["CJK Radicals Supplement"](c)||ti["CJK Strokes"](c)||!(!ti["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||ti["CJK Unified Ideographs Extension A"](c)||ti["CJK Unified Ideographs"](c)||ti["Enclosed CJK Letters and Months"](c)||ti["Hangul Compatibility Jamo"](c)||ti["Hangul Jamo Extended-A"](c)||ti["Hangul Jamo Extended-B"](c)||ti["Hangul Jamo"](c)||ti["Hangul Syllables"](c)||ti.Hiragana(c)||ti["Ideographic Description Characters"](c)||ti.Kanbun(c)||ti["Kangxi Radicals"](c)||ti["Katakana Phonetic Extensions"](c)||ti.Katakana(c)&&c!==12540||!(!ti["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!ti["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||ti["Unified Canadian Aboriginal Syllabics"](c)||ti["Unified Canadian Aboriginal Syllabics Extended"](c)||ti["Vertical Forms"](c)||ti["Yijing Hexagram Symbols"](c)||ti["Yi Syllables"](c)||ti["Yi Radicals"](c))))}function ug(c){return!(xu(c)||function(a){return!!(ti["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||ti["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||ti["Letterlike Symbols"](a)||ti["Number Forms"](a)||ti["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||ti["Control Pictures"](a)&&a!==9251||ti["Optical Character Recognition"](a)||ti["Enclosed Alphanumerics"](a)||ti["Geometric Shapes"](a)||ti["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||ti["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||ti["CJK Symbols and Punctuation"](a)||ti.Katakana(a)||ti["Private Use Area"](a)||ti["CJK Compatibility Forms"](a)||ti["Small Form Variants"](a)||ti["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function dg(c){return c>=1424&&c<=2303||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c)}function g0(c,a){return!(!a&&dg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||ti.Khmer(c))}function y0(c){for(const a of c)if(dg(a.charCodeAt(0)))return!0;return!1}const Ud="deferred",Lp="loading",Np="loaded";let zp=null,Hs="unavailable",Vo=null;const hg=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Hs="error"),zp&&zp(c)};function jp(){sc.fire(new ge("pluginStateChange",{pluginStatus:Hs,pluginURL:Vo}))}const sc=new De,Op=function(){return Hs},Vd=function(){if(Hs!==Ud||!Vo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hs=Lp,jp(),Vo&&Ce({url:Vo},c=>{c?hg(c):(Hs=Np,jp())})},Aa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hs===Np||Aa.applyArabicShaping!=null,isLoading:()=>Hs===Lp,setState(c){if(!W())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Hs=c.pluginStatus,Vo=c.pluginURL},isParsed(){if(!W())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Aa.applyArabicShaping!=null&&Aa.processBidirectionalText!=null&&Aa.processStyledBidirectionalText!=null},getPluginURL(){if(!W())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Vo}};class cr{constructor(a,d){this.zoom=a,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new yu,this.transition={})}isSupportedScript(a){return function(d,g){for(const P of d)if(!g0(P.charCodeAt(0),g))return!1;return!0}(a,Aa.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,d=a-Math.floor(a),g=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}}}class Gd{constructor(a,d){this.property=a,this.value=d,this.expression=function(g,P){if(ic(g))return new Ld(g,P);if(lu(g)){const z=Km(g,P);if(z.result==="error")throw new Error(z.value.map(F=>`${F.key}: ${F.message}`).join(", "));return z.value}{let z=g;return P.type==="color"&&typeof g=="string"?z=Ge.parse(g):P.type!=="padding"||typeof g!="number"&&!Array.isArray(g)||(z=ot.parse(g)),{kind:"constant",evaluate:()=>z}}}(d===void 0?a.specification.default:d,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,d,g){return this.property.possiblyEvaluate(this,a,d,g)}}class Hd{constructor(a){this.property=a,this.value=new Gd(a,void 0)}transitioned(a,d){return new pg(this.property,this.value,d,b({},a.transition,this.transition),a.now)}untransitioned(){return new pg(this.property,this.value,null,{},0)}}class Fp{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return A(this._values[a].value.value)}setValue(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Hd(this._values[a].property)),this._values[a].value=new Gd(this._values[a].property,d===null?void 0:A(d))}getTransition(a){return A(this._values[a].transition)}setTransition(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Hd(this._values[a].property)),this._values[a].transition=A(d)||void 0}serialize(){const a={};for(const d of Object.keys(this._values)){const g=this.getValue(d);g!==void 0&&(a[d]=g);const P=this.getTransition(d);P!==void 0&&(a[`${d}-transition`]=P)}return a}transitioned(a,d){const g=new fg(this._properties);for(const P of Object.keys(this._values))g._values[P]=this._values[P].transitioned(a,d._values[P]);return g}untransitioned(){const a=new fg(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].untransitioned();return a}}class pg{constructor(a,d,g,P,z){this.property=a,this.value=d,this.begin=z+P.delay||0,this.end=this.begin+P.duration||0,a.specification.transition&&(P.delay||P.duration)&&(this.prior=g)}possiblyEvaluate(a,d,g){const P=a.now||0,z=this.value.possiblyEvaluate(a,d,g),F=this.prior;if(F){if(P>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(P<this.begin)return F.possiblyEvaluate(a,d,g);{const ie=(P-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(a,d,g),z,function(le){if(le<=0)return 0;if(le>=1)return 1;const _e=le*le,Re=_e*le;return 4*(le<.5?Re:3*(le-_e)+Re-.75)}(ie))}}return z}}class fg{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,d,g){const P=new qd(this._properties);for(const z of Object.keys(this._values))P._values[z]=this._values[z].possiblyEvaluate(a,d,g);return P}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class x0{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return A(this._values[a].value)}setValue(a,d){this._values[a]=new Gd(this._values[a].property,d===null?void 0:A(d))}serialize(){const a={};for(const d of Object.keys(this._values)){const g=this.getValue(d);g!==void 0&&(a[d]=g)}return a}possiblyEvaluate(a,d,g){const P=new qd(this._properties);for(const z of Object.keys(this._values))P._values[z]=this._values[z].possiblyEvaluate(a,d,g);return P}}class so{constructor(a,d,g){this.property=a,this.value=d,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,d,g,P){return this.property.evaluate(this.value,this.parameters,a,d,g,P)}}class qd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ei{constructor(a){this.specification=a}possiblyEvaluate(a,d){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(d)}interpolate(a,d,g){const P=su[this.specification.type];return P?P(a,d,g):a}}class Di{constructor(a,d){this.specification=a,this.overrides=d}possiblyEvaluate(a,d,g,P){return new so(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(d,null,{},g,P)}:a.expression,d)}interpolate(a,d,g){if(a.value.kind!=="constant"||d.value.kind!=="constant")return a;if(a.value.value===void 0||d.value.value===void 0)return new so(this,{kind:"constant",value:void 0},a.parameters);const P=su[this.specification.type];return P?new so(this,{kind:"constant",value:P(a.value.value,d.value.value,g)},a.parameters):a}evaluate(a,d,g,P,z,F){return a.kind==="constant"?a.value:a.evaluate(d,g,P,z,F)}}class vu extends Di{possiblyEvaluate(a,d,g,P){if(a.value===void 0)return new so(this,{kind:"constant",value:void 0},d);if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},g,P),F=a.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,ie=this._calculate(F,F,F,d);return new so(this,{kind:"constant",value:ie},d)}if(a.expression.kind==="camera"){const z=this._calculate(a.expression.evaluate({zoom:d.zoom-1}),a.expression.evaluate({zoom:d.zoom}),a.expression.evaluate({zoom:d.zoom+1}),d);return new so(this,{kind:"constant",value:z},d)}return new so(this,a.expression,d)}evaluate(a,d,g,P,z,F){if(a.kind==="source"){const ie=a.evaluate(d,g,P,z,F);return this._calculate(ie,ie,ie,d)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(d.zoom)-1},g,P),a.evaluate({zoom:Math.floor(d.zoom)},g,P),a.evaluate({zoom:Math.floor(d.zoom)+1},g,P),d):a.value}_calculate(a,d,g,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:g,to:d}}interpolate(a){return a}}class bu{constructor(a){this.specification=a}possiblyEvaluate(a,d,g,P){if(a.value!==void 0){if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},g,P);return this._calculate(z,z,z,d)}return this._calculate(a.expression.evaluate(new cr(Math.floor(d.zoom-1),d)),a.expression.evaluate(new cr(Math.floor(d.zoom),d)),a.expression.evaluate(new cr(Math.floor(d.zoom+1),d)),d)}}_calculate(a,d,g,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:g,to:d}}interpolate(a){return a}}class Bp{constructor(a){this.specification=a}possiblyEvaluate(a,d,g,P){return!!a.expression.evaluate(d,null,{},g,P)}interpolate(){return!1}}class qr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in a){const g=a[d];g.specification.overridable&&this.overridableProperties.push(d);const P=this.defaultPropertyValues[d]=new Gd(g,void 0),z=this.defaultTransitionablePropertyValues[d]=new Hd(g);this.defaultTransitioningPropertyValues[d]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=P.possiblyEvaluate({})}}}mi("DataDrivenProperty",Di),mi("DataConstantProperty",Ei),mi("CrossFadedDataDrivenProperty",vu),mi("CrossFadedProperty",bu),mi("ColorRampProperty",Bp);const wl="-transition";class qs extends De{constructor(a,d){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),d.layout&&(this._unevaluatedLayout=new x0(d.layout)),d.paint)){this._transitionablePaint=new Fp(d.paint);for(const g in a.paint)this.setPaintProperty(g,a.paint[g],{validate:!1});for(const g in a.layout)this.setLayoutProperty(g,a.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qd(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,d,g={}){d!=null&&this._validate(f0,`layers.${this.id}.layout.${a}`,a,d,g)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,d):this.visibility=d)}getPaintProperty(a){return a.endsWith(wl)?this._transitionablePaint.getTransition(a.slice(0,-wl.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,d,g={}){if(d!=null&&this._validate(Ip,`layers.${this.id}.paint.${a}`,a,d,g))return!1;if(a.endsWith(wl))return this._transitionablePaint.setTransition(a.slice(0,-wl.length),d||void 0),!1;{const P=this._transitionablePaint._values[a],z=P.property.specification["property-type"]==="cross-faded-data-driven",F=P.value.isDataDriven(),ie=P.value;this._transitionablePaint.setValue(a,d),this._handleSpecialPaintPropertyUpdate(a);const le=this._transitionablePaint._values[a].value;return le.isDataDriven()||F||z||this._handleOverridablePaintPropertyUpdate(a,ie,le)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,d,g){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,d){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,d)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),x(a,(d,g)=>!(d===void 0||g==="layout"&&!Object.keys(d).length||g==="paint"&&!Object.keys(d).length))}_validate(a,d,g,P,z={}){return(!z||z.validate!==!1)&&lg(this,a.call(vl,{key:d,layerType:this.type,objectKey:g,value:P,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const d=this.paint.get(a);if(d instanceof so&&tc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const v0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _u{constructor(a,d){this._structArray=a,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,d){return a._trim(),d&&(a.isTransferred=!0,d.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const d=Object.create(this.prototype);return d.arrayBuffer=a.arrayBuffer,d.length=a.length,d.capacity=a.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Fr(c,a=1){let d=0,g=0;return{members:c.map(P=>{const z=v0[P.type].BYTES_PER_ELEMENT,F=d=mg(d,Math.max(a,z)),ie=P.components||1;return g=Math.max(g,z),d+=z*ie,{name:P.name,type:P.type,components:ie,offset:F}}),size:mg(d,Math.max(g,a)),alignment:a}}function mg(c,a){return Math.ceil(c/a)*a}class ac extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d){const g=this.length;return this.resize(g+1),this.emplace(g,a,d)}emplace(a,d,g){const P=2*a;return this.int16[P+0]=d,this.int16[P+1]=g,a}}ac.prototype.bytesPerElement=4,mi("StructArrayLayout2i4",ac);class wu extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g,P){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,g,P)}emplace(a,d,g,P,z){const F=4*a;return this.int16[F+0]=d,this.int16[F+1]=g,this.int16[F+2]=P,this.int16[F+3]=z,a}}wu.prototype.bytesPerElement=8,mi("StructArrayLayout4i8",wu);class M extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,g,P,z,F)}emplace(a,d,g,P,z,F,ie){const le=6*a;return this.int16[le+0]=d,this.int16[le+1]=g,this.int16[le+2]=P,this.int16[le+3]=z,this.int16[le+4]=F,this.int16[le+5]=ie,a}}M.prototype.bytesPerElement=12,mi("StructArrayLayout2i4i12",M);class o extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,g,P,z,F)}emplace(a,d,g,P,z,F,ie){const le=4*a,_e=8*a;return this.int16[le+0]=d,this.int16[le+1]=g,this.uint8[_e+4]=P,this.uint8[_e+5]=z,this.uint8[_e+6]=F,this.uint8[_e+7]=ie,a}}o.prototype.bytesPerElement=8,mi("StructArrayLayout2i4ub8",o);class h extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d){const g=this.length;return this.resize(g+1),this.emplace(g,a,d)}emplace(a,d,g){const P=2*a;return this.float32[P+0]=d,this.float32[P+1]=g,a}}h.prototype.bytesPerElement=8,mi("StructArrayLayout2f8",h);class w extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F,ie,le,_e,Re){const Be=this.length;return this.resize(Be+1),this.emplace(Be,a,d,g,P,z,F,ie,le,_e,Re)}emplace(a,d,g,P,z,F,ie,le,_e,Re,Be){const He=10*a;return this.uint16[He+0]=d,this.uint16[He+1]=g,this.uint16[He+2]=P,this.uint16[He+3]=z,this.uint16[He+4]=F,this.uint16[He+5]=ie,this.uint16[He+6]=le,this.uint16[He+7]=_e,this.uint16[He+8]=Re,this.uint16[He+9]=Be,a}}w.prototype.bytesPerElement=20,mi("StructArrayLayout10ui20",w);class I extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F,ie,le,_e,Re,Be,He){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,a,d,g,P,z,F,ie,le,_e,Re,Be,He)}emplace(a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze){const Xe=12*a;return this.int16[Xe+0]=d,this.int16[Xe+1]=g,this.int16[Xe+2]=P,this.int16[Xe+3]=z,this.uint16[Xe+4]=F,this.uint16[Xe+5]=ie,this.uint16[Xe+6]=le,this.uint16[Xe+7]=_e,this.int16[Xe+8]=Re,this.int16[Xe+9]=Be,this.int16[Xe+10]=He,this.int16[Xe+11]=Ze,a}}I.prototype.bytesPerElement=24,mi("StructArrayLayout4i4ui4i24",I);class O extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,g){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,g)}emplace(a,d,g,P){const z=3*a;return this.float32[z+0]=d,this.float32[z+1]=g,this.float32[z+2]=P,a}}O.prototype.bytesPerElement=12,mi("StructArrayLayout3f12",O);class te extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint32[1*a+0]=d,a}}te.prototype.bytesPerElement=4,mi("StructArrayLayout1ul4",te);class ue extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F,ie,le,_e){const Re=this.length;return this.resize(Re+1),this.emplace(Re,a,d,g,P,z,F,ie,le,_e)}emplace(a,d,g,P,z,F,ie,le,_e,Re){const Be=10*a,He=5*a;return this.int16[Be+0]=d,this.int16[Be+1]=g,this.int16[Be+2]=P,this.int16[Be+3]=z,this.int16[Be+4]=F,this.int16[Be+5]=ie,this.uint32[He+3]=le,this.uint16[Be+8]=_e,this.uint16[Be+9]=Re,a}}ue.prototype.bytesPerElement=20,mi("StructArrayLayout6i1ul2ui20",ue);class me extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,g,P,z,F)}emplace(a,d,g,P,z,F,ie){const le=6*a;return this.int16[le+0]=d,this.int16[le+1]=g,this.int16[le+2]=P,this.int16[le+3]=z,this.int16[le+4]=F,this.int16[le+5]=ie,a}}me.prototype.bytesPerElement=12,mi("StructArrayLayout2i2i2i12",me);class Se extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z){const F=this.length;return this.resize(F+1),this.emplace(F,a,d,g,P,z)}emplace(a,d,g,P,z,F){const ie=4*a,le=8*a;return this.float32[ie+0]=d,this.float32[ie+1]=g,this.float32[ie+2]=P,this.int16[le+6]=z,this.int16[le+7]=F,a}}Se.prototype.bytesPerElement=16,mi("StructArrayLayout2f1f2i16",Se);class ze extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,g,P){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,g,P)}emplace(a,d,g,P,z){const F=12*a,ie=3*a;return this.uint8[F+0]=d,this.uint8[F+1]=g,this.float32[ie+1]=P,this.float32[ie+2]=z,a}}ze.prototype.bytesPerElement=12,mi("StructArrayLayout2ub2f12",ze);class Ve extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,g){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,g)}emplace(a,d,g,P){const z=3*a;return this.uint16[z+0]=d,this.uint16[z+1]=g,this.uint16[z+2]=P,a}}Ve.prototype.bytesPerElement=6,mi("StructArrayLayout3ui6",Ve);class Ye extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt)}emplace(a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt,Dt){const xt=24*a,Pt=12*a,$t=48*a;return this.int16[xt+0]=d,this.int16[xt+1]=g,this.uint16[xt+2]=P,this.uint16[xt+3]=z,this.uint32[Pt+2]=F,this.uint32[Pt+3]=ie,this.uint32[Pt+4]=le,this.uint16[xt+10]=_e,this.uint16[xt+11]=Re,this.uint16[xt+12]=Be,this.float32[Pt+7]=He,this.float32[Pt+8]=Ze,this.uint8[$t+36]=Xe,this.uint8[$t+37]=ut,this.uint8[$t+38]=lt,this.uint32[Pt+10]=bt,this.int16[xt+22]=Dt,a}}Ye.prototype.bytesPerElement=48,mi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ye);class it extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt,Dt,xt,Pt,$t,Bt,xi,Ti,ii,Kt,Zt,ni){const ei=this.length;return this.resize(ei+1),this.emplace(ei,a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt,Dt,xt,Pt,$t,Bt,xi,Ti,ii,Kt,Zt,ni)}emplace(a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut,lt,bt,Dt,xt,Pt,$t,Bt,xi,Ti,ii,Kt,Zt,ni,ei){const Gt=34*a,Mi=17*a;return this.int16[Gt+0]=d,this.int16[Gt+1]=g,this.int16[Gt+2]=P,this.int16[Gt+3]=z,this.int16[Gt+4]=F,this.int16[Gt+5]=ie,this.int16[Gt+6]=le,this.int16[Gt+7]=_e,this.uint16[Gt+8]=Re,this.uint16[Gt+9]=Be,this.uint16[Gt+10]=He,this.uint16[Gt+11]=Ze,this.uint16[Gt+12]=Xe,this.uint16[Gt+13]=ut,this.uint16[Gt+14]=lt,this.uint16[Gt+15]=bt,this.uint16[Gt+16]=Dt,this.uint16[Gt+17]=xt,this.uint16[Gt+18]=Pt,this.uint16[Gt+19]=$t,this.uint16[Gt+20]=Bt,this.uint16[Gt+21]=xi,this.uint16[Gt+22]=Ti,this.uint32[Mi+12]=ii,this.float32[Mi+13]=Kt,this.float32[Mi+14]=Zt,this.float32[Mi+15]=ni,this.float32[Mi+16]=ei,a}}it.prototype.bytesPerElement=68,mi("StructArrayLayout8i15ui1ul4f68",it);class Je extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.float32[1*a+0]=d,a}}Je.prototype.bytesPerElement=4,mi("StructArrayLayout1f4",Je);class et extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,g){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,g)}emplace(a,d,g,P){const z=3*a;return this.int16[z+0]=d,this.int16[z+1]=g,this.int16[z+2]=P,a}}et.prototype.bytesPerElement=6,mi("StructArrayLayout3i6",et);class pt extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,g){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,g)}emplace(a,d,g,P){const z=4*a;return this.uint32[2*a+0]=d,this.uint16[z+2]=g,this.uint16[z+3]=P,a}}pt.prototype.bytesPerElement=8,mi("StructArrayLayout1ul2ui8",pt);class yt extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d){const g=this.length;return this.resize(g+1),this.emplace(g,a,d)}emplace(a,d,g){const P=2*a;return this.uint16[P+0]=d,this.uint16[P+1]=g,a}}yt.prototype.bytesPerElement=4,mi("StructArrayLayout2ui4",yt);class wt extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint16[1*a+0]=d,a}}wt.prototype.bytesPerElement=2,mi("StructArrayLayout1ui2",wt);class at extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,g,P){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,g,P)}emplace(a,d,g,P,z){const F=4*a;return this.float32[F+0]=d,this.float32[F+1]=g,this.float32[F+2]=P,this.float32[F+3]=z,a}}at.prototype.bytesPerElement=16,mi("StructArrayLayout4f16",at);class Mt extends _u{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}Mt.prototype.size=20;class St extends ue{get(a){return new Mt(this,a)}}mi("CollisionBoxArray",St);class jt extends _u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}jt.prototype.size=48;class Ot extends Ye{get(a){return new jt(this,a)}}mi("PlacedSymbolArray",Ot);class Vt extends _u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Vt.prototype.size=68;class Nt extends it{get(a){return new Vt(this,a)}}mi("SymbolInstanceArray",Nt);class oi extends Je{getoffsetX(a){return this.float32[1*a+0]}}mi("GlyphOffsetArray",oi);class Xt extends et{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}mi("SymbolLineVertexArray",Xt);class ci extends _u{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ci.prototype.size=8;class Ji extends pt{get(a){return new ci(this,a)}}mi("FeatureIndexArray",Ji);class dn extends ac{}class Ii extends ac{}class Un extends ac{}class Vn extends M{}class Cn extends o{}class Sn extends h{}class An extends w{}class aa extends I{}class ao extends O{}class Ba extends te{}class $a extends me{}class Cl extends ze{}class ds extends Ve{}class Ua extends yt{}const Tl=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wd}=Tl;class Mn{constructor(a=[]){this.segments=a}prepareSegment(a,d,g,P){let z=this.segments[this.segments.length-1];return a>Mn.MAX_VERTEX_ARRAY_LENGTH&&T(`Max vertices per segment is ${Mn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!z||z.vertexLength+a>Mn.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==P)&&(z={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},P!==void 0&&(z.sortKey=P),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const a of this.segments)for(const d in a.vaos)a.vaos[d].destroy()}static simpleSegment(a,d,g,P){return new Mn([{vertexOffset:a,primitiveOffset:d,vertexLength:g,primitiveLength:P,vaos:{},sortKey:0}])}}function sr(c,a){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(a),0,255)}Mn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mi("SegmentVector",Mn);const In=Fr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Br={exports:{}},Ws={exports:{}};Ws.exports=function(c,a){var d,g,P,z,F,ie,le,_e;for(g=c.length-(d=3&c.length),P=a,F=3432918353,ie=461845907,_e=0;_e<g;)le=255&c.charCodeAt(_e)|(255&c.charCodeAt(++_e))<<8|(255&c.charCodeAt(++_e))<<16|(255&c.charCodeAt(++_e))<<24,++_e,P=27492+(65535&(z=5*(65535&(P=(P^=le=(65535&(le=(le=(65535&le)*F+(((le>>>16)*F&65535)<<16)&4294967295)<<15|le>>>17))*ie+(((le>>>16)*ie&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(le=0,d){case 3:le^=(255&c.charCodeAt(_e+2))<<16;case 2:le^=(255&c.charCodeAt(_e+1))<<8;case 1:P^=le=(65535&(le=(le=(65535&(le^=255&c.charCodeAt(_e)))*F+(((le>>>16)*F&65535)<<16)&4294967295)<<15|le>>>17))*ie+(((le>>>16)*ie&65535)<<16)&4294967295}return P^=c.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0};var ur={exports:{}};ur.exports=function(c,a){for(var d,g=c.length,P=a^g,z=0;g>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(z)|(255&c.charCodeAt(++z))<<8|(255&c.charCodeAt(++z))<<16|(255&c.charCodeAt(++z))<<24))+((1540483477*(d>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:P^=(255&c.charCodeAt(z+2))<<16;case 2:P^=(255&c.charCodeAt(z+1))<<8;case 1:P=1540483477*(65535&(P^=255&c.charCodeAt(z)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0};var Ma=Ws.exports,oc=ur.exports;Br.exports=Ma,Br.exports.murmur3=Ma,Br.exports.murmur2=oc;class lc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,d,g,P){this.ids.push(Yd(a)),this.positions.push(d,g,P)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Yd(a);let g=0,P=this.ids.length-1;for(;g<P;){const F=g+P>>1;this.ids[F]>=d?P=F:g=F+1}const z=[];for(;this.ids[g]===d;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(a,d){const g=new Float64Array(a.ids),P=new Uint32Array(a.positions);return $p(g,P,0,g.length-1),d&&d.push(g.buffer,P.buffer),{ids:g,positions:P}}static deserialize(a){const d=new lc;return d.ids=a.ids,d.positions=a.positions,d.indexed=!0,d}}function Yd(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Br.exports(String(c))}function $p(c,a,d,g){for(;d<g;){const P=c[d+g>>1];let z=d-1,F=g+1;for(;;){do z++;while(c[z]<P);do F--;while(c[F]>P);if(z>=F)break;Zd(c,z,F),Zd(a,3*z,3*F),Zd(a,3*z+1,3*F+1),Zd(a,3*z+2,3*F+2)}F-d<g-F?($p(c,a,d,F),d=F+1):($p(c,a,F+1,g),g=F)}}function Zd(c,a,d){const g=c[a];c[a]=c[d],c[d]=g}mi("FeaturePositionMap",lc);class Va{constructor(a,d){this.gl=a.gl,this.location=d}}class Xd extends Va{constructor(a,d){super(a,d),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Cu extends Va{constructor(a,d){super(a,d),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Kd extends Va{constructor(a,d){super(a,d),this.current=Ge.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const lM=new Float32Array(16);function b0(c){return[sr(255*c.r,255*c.g),sr(255*c.b,255*c.a)]}class Up{constructor(a,d,g){this.value=a,this.uniformNames=d.map(P=>`u_${P}`),this.type=g}setUniform(a,d,g){a.set(g.constantOr(this.value))}getBinding(a,d,g){return this.type==="color"?new Kd(a,d):new Xd(a,d)}}class Qd{constructor(a,d){this.uniformNames=d.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=a.tlbr}setUniform(a,d,g,P){const z=P==="u_pattern_to"?this.patternTo:P==="u_pattern_from"?this.patternFrom:P==="u_pixel_ratio_to"?this.pixelRatioTo:P==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&a.set(z)}getBinding(a,d,g){return g.substr(0,9)==="u_pattern"?new Cu(a,d):new Xd(a,d)}}class Sl{constructor(a,d,g,P){this.expression=a,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(a,d,g,P,z){const F=this.paintVertexArray.length,ie=this.expression.evaluate(new cr(0),d,{},P,[],z);this.paintVertexArray.resize(a),this._setPaintValue(F,a,ie)}updatePaintArray(a,d,g,P){const z=this.expression.evaluate({zoom:0},g,P);this._setPaintValue(a,d,z)}_setPaintValue(a,d,g){if(this.type==="color"){const P=b0(g);for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,P[0],P[1])}else{for(let P=a;P<d;P++)this.paintVertexArray.emplace(P,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bo{constructor(a,d,g,P,z,F){this.expression=a,this.uniformNames=d.map(ie=>`u_${ie}_t`),this.type=g,this.useIntegerZoom=P,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=d.map(ie=>({name:`a_${ie}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(a,d,g,P,z){const F=this.expression.evaluate(new cr(this.zoom),d,{},P,[],z),ie=this.expression.evaluate(new cr(this.zoom+1),d,{},P,[],z),le=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(le,a,F,ie)}updatePaintArray(a,d,g,P){const z=this.expression.evaluate({zoom:this.zoom},g,P),F=this.expression.evaluate({zoom:this.zoom+1},g,P);this._setPaintValue(a,d,z,F)}_setPaintValue(a,d,g,P){if(this.type==="color"){const z=b0(g),F=b0(P);for(let ie=a;ie<d;ie++)this.paintVertexArray.emplace(ie,z[0],z[1],F[0],F[1])}else{for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,g,P);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(P))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,d){const g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,P=y(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);a.set(P)}getBinding(a,d,g){return new Xd(a,d)}}class cc{constructor(a,d,g,P,z,F){this.expression=a,this.type=d,this.useIntegerZoom=g,this.zoom=P,this.layerId=F,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(a,d,g){const P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(P,a,d.patterns&&d.patterns[this.layerId],g)}updatePaintArray(a,d,g,P,z){this._setPaintValues(a,d,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(a,d,g,P){if(!P||!g)return;const{min:z,mid:F,max:ie}=g,le=P[z],_e=P[F],Re=P[ie];if(le&&_e&&Re)for(let Be=a;Be<d;Be++)this.zoomInPaintVertexArray.emplace(Be,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],le.tl[0],le.tl[1],le.br[0],le.br[1],_e.pixelRatio,le.pixelRatio),this.zoomOutPaintVertexArray.emplace(Be,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],_e.pixelRatio,Re.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,In.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,In.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Q_{constructor(a,d,g){this.binders={},this._buffers=[];const P=[];for(const z in a.paint._values){if(!g(z))continue;const F=a.paint.get(z);if(!(F instanceof so&&tc(F.property.specification)))continue;const ie=cM(z,a.type),le=F.value,_e=F.property.specification.type,Re=F.property.useIntegerZoom,Be=F.property.specification["property-type"],He=Be==="cross-faded"||Be==="cross-faded-data-driven";if(le.kind==="constant")this.binders[z]=He?new Qd(le.value,ie):new Up(le.value,ie,_e),P.push(`/u_${z}`);else if(le.kind==="source"||He){const Ze=J_(z,_e,"source");this.binders[z]=He?new cc(le,_e,Re,d,Ze,a.id):new Sl(le,ie,_e,Ze),P.push(`/a_${z}`)}else{const Ze=J_(z,_e,"composite");this.binders[z]=new bo(le,ie,_e,Re,d,Ze),P.push(`/z_${z}`)}}this.cacheKey=P.sort().join("")}getMaxValue(a){const d=this.binders[a];return d instanceof Sl||d instanceof bo?d.maxValue:0}populatePaintArrays(a,d,g,P,z){for(const F in this.binders){const ie=this.binders[F];(ie instanceof Sl||ie instanceof bo||ie instanceof cc)&&ie.populatePaintArray(a,d,g,P,z)}}setConstantPatternPositions(a,d){for(const g in this.binders){const P=this.binders[g];P instanceof Qd&&P.setConstantPatternPositions(a,d)}}updatePaintArrays(a,d,g,P,z){let F=!1;for(const ie in a){const le=d.getPositions(ie);for(const _e of le){const Re=g.feature(_e.index);for(const Be in this.binders){const He=this.binders[Be];if((He instanceof Sl||He instanceof bo||He instanceof cc)&&He.expression.isStateDependent===!0){const Ze=P.paint.get(Be);He.expression=Ze.value,He.updatePaintArray(_e.start,_e.end,Re,a[ie],z),F=!0}}}}return F}defines(){const a=[];for(const d in this.binders){const g=this.binders[d];(g instanceof Up||g instanceof Qd)&&a.push(...g.uniformNames.map(P=>`#define HAS_UNIFORM_${P}`))}return a}getBinderAttributes(){const a=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Sl||g instanceof bo)for(let P=0;P<g.paintVertexAttributes.length;P++)a.push(g.paintVertexAttributes[P].name);else if(g instanceof cc)for(let P=0;P<In.members.length;P++)a.push(In.members[P].name)}return a}getBinderUniforms(){const a=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Up||g instanceof Qd||g instanceof bo)for(const P of g.uniformNames)a.push(P)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,d){const g=[];for(const P in this.binders){const z=this.binders[P];if(z instanceof Up||z instanceof Qd||z instanceof bo){for(const F of z.uniformNames)if(d[F]){const ie=z.getBinding(a,d[F],F);g.push({name:F,property:P,binding:ie})}}}return g}setUniforms(a,d,g,P){for(const{name:z,property:F,binding:ie}of d)this.binders[F].setUniform(ie,P,g.get(F),z)}updatePaintBuffers(a){this._buffers=[];for(const d in this.binders){const g=this.binders[d];if(a&&g instanceof cc){const P=a.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;P&&this._buffers.push(P)}else(g instanceof Sl||g instanceof bo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(a){for(const d in this.binders){const g=this.binders[d];(g instanceof Sl||g instanceof bo||g instanceof cc)&&g.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const d=this.binders[a];(d instanceof Sl||d instanceof bo||d instanceof cc)&&d.destroy()}}}class Tu{constructor(a,d,g=()=>!0){this.programConfigurations={};for(const P of a)this.programConfigurations[P.id]=new Q_(P,d,g);this.needsUpload=!1,this._featureMap=new lc,this._bufferOffset=0}populatePaintArrays(a,d,g,P,z,F){for(const ie in this.programConfigurations)this.programConfigurations[ie].populatePaintArrays(a,d,P,z,F);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,d,g,P){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(a,this._featureMap,d,z,P)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function cM(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function J_(c,a,d){const g={color:{source:h,composite:at},number:{source:Je,composite:h}},P=function(z){return{"line-pattern":{source:An,composite:An},"fill-pattern":{source:An,composite:An},"fill-extrusion-pattern":{source:An,composite:An}}[z]}(c);return P&&P[d]||g[a][d]}mi("ConstantBinder",Up),mi("CrossFadedConstantBinder",Qd),mi("SourceExpressionBinder",Sl),mi("CrossFadedCompositeBinder",cc),mi("CompositeExpressionBinder",bo),mi("ProgramConfiguration",Q_,{omit:["_buffers"]}),mi("ProgramConfigurationSet",Tu);var Wr=8192;const _0=Math.pow(2,14)-1,ew=-_0-1;function Su(c){const a=Wr/c.extent,d=c.loadGeometry();for(let g=0;g<d.length;g++){const P=d[g];for(let z=0;z<P.length;z++){const F=P[z],ie=Math.round(F.x*a),le=Math.round(F.y*a);F.x=y(ie,ew,_0),F.y=y(le,ew,_0),(ie<F.x||ie>F.x+1||le<F.y||le>F.y+1)&&T("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Eu(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?Su(c):[]}}function gg(c,a,d,g,P){c.emplaceBack(2*a+(g+1)/2,2*d+(P+1)/2)}class w0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new ds,this.segments=new Mn,this.programConfigurations=new Tu(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,g){const P=this.layers[0],z=[];let F=null,ie=!1;P.type==="circle"&&(F=P.layout.get("circle-sort-key"),ie=!F.isConstant());for(const{feature:le,id:_e,index:Re,sourceLayerIndex:Be}of a){const He=this.layers[0]._featureFilter.needGeometry,Ze=Eu(le,He);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),Ze,g))continue;const Xe=ie?F.evaluate(Ze,{},g):void 0,ut={id:_e,properties:le.properties,type:le.type,sourceLayerIndex:Be,index:Re,geometry:He?Ze.geometry:Su(le),patterns:{},sortKey:Xe};z.push(ut)}ie&&z.sort((le,_e)=>le.sortKey-_e.sortKey);for(const le of z){const{geometry:_e,index:Re,sourceLayerIndex:Be}=le,He=a[Re].feature;this.addFeature(le,_e,Re,g),d.featureIndex.insert(He,_e,Re,Be,this.index)}}update(a,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Wd),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,d,g,P){for(const z of d)for(const F of z){const ie=F.x,le=F.y;if(ie<0||ie>=Wr||le<0||le>=Wr)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Re=_e.vertexLength;gg(this.layoutVertexArray,ie,le,-1,-1),gg(this.layoutVertexArray,ie,le,1,-1),gg(this.layoutVertexArray,ie,le,1,1),gg(this.layoutVertexArray,ie,le,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,g,{},P)}}function tw(c,a){for(let d=0;d<c.length;d++)if(Jd(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(Jd(c,a[d]))return!0;return!!C0(c,a)}function uM(c,a,d){return!!Jd(c,a)||!!T0(a,c,d)}function iw(c,a){if(c.length===1)return rw(a,c[0]);for(let d=0;d<a.length;d++){const g=a[d];for(let P=0;P<g.length;P++)if(Jd(c,g[P]))return!0}for(let d=0;d<c.length;d++)if(rw(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(C0(c,a[d]))return!0;return!1}function dM(c,a,d){if(c.length>1){if(C0(c,a))return!0;for(let g=0;g<a.length;g++)if(T0(a[g],c,d))return!0}for(let g=0;g<c.length;g++)if(T0(c[g],a,d))return!0;return!1}function C0(c,a){if(c.length===0||a.length===0)return!1;for(let d=0;d<c.length-1;d++){const g=c[d],P=c[d+1];for(let z=0;z<a.length-1;z++)if(hM(g,P,a[z],a[z+1]))return!0}return!1}function hM(c,a,d,g){return k(c,d,g)!==k(a,d,g)&&k(c,a,d)!==k(c,a,g)}function T0(c,a,d){const g=d*d;if(a.length===1)return c.distSqr(a[0])<g;for(let P=1;P<a.length;P++)if(nw(c,a[P-1],a[P])<g)return!0;return!1}function nw(c,a,d){const g=a.distSqr(d);if(g===0)return c.distSqr(a);const P=((c.x-a.x)*(d.x-a.x)+(c.y-a.y)*(d.y-a.y))/g;return c.distSqr(P<0?a:P>1?d:d.sub(a)._mult(P)._add(a))}function rw(c,a){let d,g,P,z=!1;for(let F=0;F<c.length;F++){d=c[F];for(let ie=0,le=d.length-1;ie<d.length;le=ie++)g=d[ie],P=d[le],g.y>a.y!=P.y>a.y&&a.x<(P.x-g.x)*(a.y-g.y)/(P.y-g.y)+g.x&&(z=!z)}return z}function Jd(c,a){let d=!1;for(let g=0,P=c.length-1;g<c.length;P=g++){const z=c[g],F=c[P];z.y>a.y!=F.y>a.y&&a.x<(F.x-z.x)*(a.y-z.y)/(F.y-z.y)+z.x&&(d=!d)}return d}function pM(c,a,d){const g=d[0],P=d[2];if(c.x<g.x&&a.x<g.x||c.x>P.x&&a.x>P.x||c.y<g.y&&a.y<g.y||c.y>P.y&&a.y>P.y)return!1;const z=k(c,a,d[0]);return z!==k(c,a,d[1])||z!==k(c,a,d[2])||z!==k(c,a,d[3])}function Vp(c,a,d){const g=a.paint.get(c).value;return g.kind==="constant"?g.value:d.programConfigurations.get(a.id).getMaxValue(c)}function yg(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function xg(c,a,d,g,P){if(!a[0]&&!a[1])return c;const z=G.convert(a)._mult(P);d==="viewport"&&z._rotate(-g);const F=[];for(let ie=0;ie<c.length;ie++)F.push(c[ie].sub(z));return F}mi("CircleBucket",w0,{omit:["layers"]});const fM=new qr({"circle-sort-key":new Di(Pe.layout_circle["circle-sort-key"])});var mM={paint:new qr({"circle-radius":new Di(Pe.paint_circle["circle-radius"]),"circle-color":new Di(Pe.paint_circle["circle-color"]),"circle-blur":new Di(Pe.paint_circle["circle-blur"]),"circle-opacity":new Di(Pe.paint_circle["circle-opacity"]),"circle-translate":new Ei(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Ei(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ei(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ei(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Pe.paint_circle["circle-stroke-opacity"])}),layout:fM},Ys=1e-6,Zs=typeof Float32Array<"u"?Float32Array:Array;function sw(){var c=new Zs(9);return Zs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function S0(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function aw(c,a,d){var g=a[0],P=a[1],z=a[2],F=a[3],ie=a[4],le=a[5],_e=a[6],Re=a[7],Be=a[8],He=a[9],Ze=a[10],Xe=a[11],ut=a[12],lt=a[13],bt=a[14],Dt=a[15],xt=d[0],Pt=d[1],$t=d[2],Bt=d[3];return c[0]=xt*g+Pt*ie+$t*Be+Bt*ut,c[1]=xt*P+Pt*le+$t*He+Bt*lt,c[2]=xt*z+Pt*_e+$t*Ze+Bt*bt,c[3]=xt*F+Pt*Re+$t*Xe+Bt*Dt,c[4]=(xt=d[4])*g+(Pt=d[5])*ie+($t=d[6])*Be+(Bt=d[7])*ut,c[5]=xt*P+Pt*le+$t*He+Bt*lt,c[6]=xt*z+Pt*_e+$t*Ze+Bt*bt,c[7]=xt*F+Pt*Re+$t*Xe+Bt*Dt,c[8]=(xt=d[8])*g+(Pt=d[9])*ie+($t=d[10])*Be+(Bt=d[11])*ut,c[9]=xt*P+Pt*le+$t*He+Bt*lt,c[10]=xt*z+Pt*_e+$t*Ze+Bt*bt,c[11]=xt*F+Pt*Re+$t*Xe+Bt*Dt,c[12]=(xt=d[12])*g+(Pt=d[13])*ie+($t=d[14])*Be+(Bt=d[15])*ut,c[13]=xt*P+Pt*le+$t*He+Bt*lt,c[14]=xt*z+Pt*_e+$t*Ze+Bt*bt,c[15]=xt*F+Pt*Re+$t*Xe+Bt*Dt,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var Gp,gM=aw;function ow(){var c=new Zs(3);return Zs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function lw(c,a,d){var g=new Zs(3);return g[0]=c,g[1]=a,g[2]=d,g}function vg(c,a,d){var g=a[0],P=a[1],z=a[2],F=a[3];return c[0]=d[0]*g+d[4]*P+d[8]*z+d[12]*F,c[1]=d[1]*g+d[5]*P+d[9]*z+d[13]*F,c[2]=d[2]*g+d[6]*P+d[10]*z+d[14]*F,c[3]=d[3]*g+d[7]*P+d[11]*z+d[15]*F,c}function cw(){var c=new Zs(4);return Zs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function uw(c,a){const d=vg([],[c.x,c.y,0,1],a);return new G(d[0]/d[3],d[1]/d[3])}ow(),Gp=new Zs(4),Zs!=Float32Array&&(Gp[0]=0,Gp[1]=0,Gp[2]=0,Gp[3]=0),ow(),lw(1,0,0),lw(0,1,0),cw(),cw(),sw(),function(){var c;c=new Zs(2),Zs!=Float32Array&&(c[0]=0,c[1]=0)}();class dw extends w0{}mi("HeatmapBucket",dw,{omit:["layers"]});var yM={paint:new qr({"heatmap-radius":new Di(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ei(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bp(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ei(Pe.paint_heatmap["heatmap-opacity"])})};function E0(c,{width:a,height:d},g,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==a*d*g)throw new RangeError(`mismatched image size. expected: ${P.length} but got: ${a*d*g}`)}else P=new Uint8Array(a*d*g);return c.width=a,c.height=d,c.data=P,c}function hw(c,{width:a,height:d},g){if(a===c.width&&d===c.height)return;const P=E0({},{width:a,height:d},g);k0(c,P,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,d)},g),c.width=a,c.height=d,c.data=P.data}function k0(c,a,d,g,P,z){if(P.width===0||P.height===0)return a;if(P.width>c.width||P.height>c.height||d.x>c.width-P.width||d.y>c.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>a.width||P.height>a.height||g.x>a.width-P.width||g.y>a.height-P.height)throw new RangeError("out of range destination coordinates for image copy");const F=c.data,ie=a.data;if(F===ie)throw new Error("srcData equals dstData, so image is already copied");for(let le=0;le<P.height;le++){const _e=((d.y+le)*c.width+d.x)*z,Re=((g.y+le)*a.width+g.x)*z;for(let Be=0;Be<P.width*z;Be++)ie[Re+Be]=F[_e+Be]}return a}class Hp{constructor(a,d){E0(this,a,1,d)}resize(a){hw(this,a,1)}clone(){return new Hp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,g,P,z){k0(a,d,g,P,z,1)}}class Ga{constructor(a,d){E0(this,a,4,d)}resize(a){hw(this,a,4)}replace(a,d){d?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Ga({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,g,P,z){k0(a,d,g,P,z,4)}}function pw(c){const a={},d=c.resolution||256,g=c.clips?c.clips.length:1,P=c.image||new Ga({width:d,height:g});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const z=(F,ie,le)=>{a[c.evaluationKey]=le;const _e=c.expression.evaluate(a);P.data[F+ie+0]=Math.floor(255*_e.r/_e.a),P.data[F+ie+1]=Math.floor(255*_e.g/_e.a),P.data[F+ie+2]=Math.floor(255*_e.b/_e.a),P.data[F+ie+3]=Math.floor(255*_e.a)};if(c.clips)for(let F=0,ie=0;F<g;++F,ie+=4*d)for(let le=0,_e=0;le<d;le++,_e+=4){const Re=le/(d-1),{start:Be,end:He}=c.clips[F];z(ie,_e,Be*(1-Re)+He*Re)}else for(let F=0,ie=0;F<d;F++,ie+=4)z(0,ie,F/(d-1));return P}mi("AlphaImage",Hp),mi("RGBAImage",Ga);var xM={paint:new qr({"hillshade-illumination-direction":new Ei(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ei(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ei(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ei(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ei(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ei(Pe.paint_hillshade["hillshade-accent-color"])})};const vM=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:bM}=vM;var bg={exports:{}};function _g(c,a,d){d=d||2;var g,P,z,F,ie,le,_e,Re=a&&a.length,Be=Re?a[0]*d:c.length,He=fw(c,0,Be,d,!0),Ze=[];if(!He||He.next===He.prev)return Ze;if(Re&&(He=function(ut,lt,bt,Dt){var xt,Pt,$t,Bt=[];for(xt=0,Pt=lt.length;xt<Pt;xt++)($t=fw(ut,lt[xt]*Dt,xt<Pt-1?lt[xt+1]*Dt:ut.length,Dt,!1))===$t.next&&($t.steiner=!0),Bt.push(AM($t));for(Bt.sort(SM),xt=0;xt<Bt.length;xt++)bt=EM(Bt[xt],bt);return bt}(c,a,He,d)),c.length>80*d){g=z=c[0],P=F=c[1];for(var Xe=d;Xe<Be;Xe+=d)(ie=c[Xe])<g&&(g=ie),(le=c[Xe+1])<P&&(P=le),ie>z&&(z=ie),le>F&&(F=le);_e=(_e=Math.max(z-g,F-P))!==0?32767/_e:0}return qp(He,Ze,d,g,P,_e,0),Ze}function fw(c,a,d,g,P){var z,F;if(P===P0(c,a,d,g)>0)for(z=a;z<d;z+=g)F=yw(z,c[z],c[z+1],F);else for(z=d-g;z>=a;z-=g)F=yw(z,c[z],c[z+1],F);return F&&wg(F,F.next)&&(Yp(F),F=F.next),F}function ku(c,a){if(!c)return c;a||(a=c);var d,g=c;do if(d=!1,g.steiner||!wg(g,g.next)&&Dr(g.prev,g,g.next)!==0)g=g.next;else{if(Yp(g),(g=a=g.prev)===g.next)break;d=!0}while(d||g!==a);return a}function qp(c,a,d,g,P,z,F){if(c){!F&&z&&function(Re,Be,He,Ze){var Xe=Re;do Xe.z===0&&(Xe.z=A0(Xe.x,Xe.y,Be,He,Ze)),Xe.prevZ=Xe.prev,Xe.nextZ=Xe.next,Xe=Xe.next;while(Xe!==Re);Xe.prevZ.nextZ=null,Xe.prevZ=null,function(ut){var lt,bt,Dt,xt,Pt,$t,Bt,xi,Ti=1;do{for(bt=ut,ut=null,Pt=null,$t=0;bt;){for($t++,Dt=bt,Bt=0,lt=0;lt<Ti&&(Bt++,Dt=Dt.nextZ);lt++);for(xi=Ti;Bt>0||xi>0&&Dt;)Bt!==0&&(xi===0||!Dt||bt.z<=Dt.z)?(xt=bt,bt=bt.nextZ,Bt--):(xt=Dt,Dt=Dt.nextZ,xi--),Pt?Pt.nextZ=xt:ut=xt,xt.prevZ=Pt,Pt=xt;bt=Dt}Pt.nextZ=null,Ti*=2}while($t>1)}(Xe)}(c,g,P,z);for(var ie,le,_e=c;c.prev!==c.next;)if(ie=c.prev,le=c.next,z?wM(c,g,P,z):_M(c))a.push(ie.i/d|0),a.push(c.i/d|0),a.push(le.i/d|0),Yp(c),c=le.next,_e=le.next;else if((c=le)===_e){F?F===1?qp(c=CM(ku(c),a,d),a,d,g,P,z,2):F===2&&TM(c,a,d,g,P,z):qp(ku(c),a,d,g,P,z,1);break}}}function _M(c){var a=c.prev,d=c,g=c.next;if(Dr(a,d,g)>=0)return!1;for(var P=a.x,z=d.x,F=g.x,ie=a.y,le=d.y,_e=g.y,Re=P<z?P<F?P:F:z<F?z:F,Be=ie<le?ie<_e?ie:_e:le<_e?le:_e,He=P>z?P>F?P:F:z>F?z:F,Ze=ie>le?ie>_e?ie:_e:le>_e?le:_e,Xe=g.next;Xe!==a;){if(Xe.x>=Re&&Xe.x<=He&&Xe.y>=Be&&Xe.y<=Ze&&eh(P,ie,z,le,F,_e,Xe.x,Xe.y)&&Dr(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.next}return!0}function wM(c,a,d,g){var P=c.prev,z=c,F=c.next;if(Dr(P,z,F)>=0)return!1;for(var ie=P.x,le=z.x,_e=F.x,Re=P.y,Be=z.y,He=F.y,Ze=ie<le?ie<_e?ie:_e:le<_e?le:_e,Xe=Re<Be?Re<He?Re:He:Be<He?Be:He,ut=ie>le?ie>_e?ie:_e:le>_e?le:_e,lt=Re>Be?Re>He?Re:He:Be>He?Be:He,bt=A0(Ze,Xe,a,d,g),Dt=A0(ut,lt,a,d,g),xt=c.prevZ,Pt=c.nextZ;xt&&xt.z>=bt&&Pt&&Pt.z<=Dt;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Xe&&xt.y<=lt&&xt!==P&&xt!==F&&eh(ie,Re,le,Be,_e,He,xt.x,xt.y)&&Dr(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Xe&&Pt.y<=lt&&Pt!==P&&Pt!==F&&eh(ie,Re,le,Be,_e,He,Pt.x,Pt.y)&&Dr(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;xt&&xt.z>=bt;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Xe&&xt.y<=lt&&xt!==P&&xt!==F&&eh(ie,Re,le,Be,_e,He,xt.x,xt.y)&&Dr(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Pt&&Pt.z<=Dt;){if(Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Xe&&Pt.y<=lt&&Pt!==P&&Pt!==F&&eh(ie,Re,le,Be,_e,He,Pt.x,Pt.y)&&Dr(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function CM(c,a,d){var g=c;do{var P=g.prev,z=g.next.next;!wg(P,z)&&mw(P,g,g.next,z)&&Wp(P,z)&&Wp(z,P)&&(a.push(P.i/d|0),a.push(g.i/d|0),a.push(z.i/d|0),Yp(g),Yp(g.next),g=c=z),g=g.next}while(g!==c);return ku(g)}function TM(c,a,d,g,P,z){var F=c;do{for(var ie=F.next.next;ie!==F.prev;){if(F.i!==ie.i&&MM(F,ie)){var le=gw(F,ie);return F=ku(F,F.next),le=ku(le,le.next),qp(F,a,d,g,P,z,0),void qp(le,a,d,g,P,z,0)}ie=ie.next}F=F.next}while(F!==c)}function SM(c,a){return c.x-a.x}function EM(c,a){var d=function(P,z){var F,ie=z,le=P.x,_e=P.y,Re=-1/0;do{if(_e<=ie.y&&_e>=ie.next.y&&ie.next.y!==ie.y){var Be=ie.x+(_e-ie.y)*(ie.next.x-ie.x)/(ie.next.y-ie.y);if(Be<=le&&Be>Re&&(Re=Be,F=ie.x<ie.next.x?ie:ie.next,Be===le))return F}ie=ie.next}while(ie!==z);if(!F)return null;var He,Ze=F,Xe=F.x,ut=F.y,lt=1/0;ie=F;do le>=ie.x&&ie.x>=Xe&&le!==ie.x&&eh(_e<ut?le:Re,_e,Xe,ut,_e<ut?Re:le,_e,ie.x,ie.y)&&(He=Math.abs(_e-ie.y)/(le-ie.x),Wp(ie,P)&&(He<lt||He===lt&&(ie.x>F.x||ie.x===F.x&&kM(F,ie)))&&(F=ie,lt=He)),ie=ie.next;while(ie!==Ze);return F}(c,a);if(!d)return a;var g=gw(d,c);return ku(g,g.next),ku(d,d.next)}function kM(c,a){return Dr(c.prev,c,a.prev)<0&&Dr(a.next,c,c.next)<0}function A0(c,a,d,g,P){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*P|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-g)*P|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function AM(c){var a=c,d=c;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==c);return d}function eh(c,a,d,g,P,z,F,ie){return(P-F)*(a-ie)>=(c-F)*(z-ie)&&(c-F)*(g-ie)>=(d-F)*(a-ie)&&(d-F)*(z-ie)>=(P-F)*(g-ie)}function MM(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(d,g){var P=d;do{if(P.i!==d.i&&P.next.i!==d.i&&P.i!==g.i&&P.next.i!==g.i&&mw(P,P.next,d,g))return!0;P=P.next}while(P!==d);return!1}(c,a)&&(Wp(c,a)&&Wp(a,c)&&function(d,g){var P=d,z=!1,F=(d.x+g.x)/2,ie=(d.y+g.y)/2;do P.y>ie!=P.next.y>ie&&P.next.y!==P.y&&F<(P.next.x-P.x)*(ie-P.y)/(P.next.y-P.y)+P.x&&(z=!z),P=P.next;while(P!==d);return z}(c,a)&&(Dr(c.prev,c,a.prev)||Dr(c,a.prev,a))||wg(c,a)&&Dr(c.prev,c,c.next)>0&&Dr(a.prev,a,a.next)>0)}function Dr(c,a,d){return(a.y-c.y)*(d.x-a.x)-(a.x-c.x)*(d.y-a.y)}function wg(c,a){return c.x===a.x&&c.y===a.y}function mw(c,a,d,g){var P=Tg(Dr(c,a,d)),z=Tg(Dr(c,a,g)),F=Tg(Dr(d,g,c)),ie=Tg(Dr(d,g,a));return P!==z&&F!==ie||!(P!==0||!Cg(c,d,a))||!(z!==0||!Cg(c,g,a))||!(F!==0||!Cg(d,c,g))||!(ie!==0||!Cg(d,a,g))}function Cg(c,a,d){return a.x<=Math.max(c.x,d.x)&&a.x>=Math.min(c.x,d.x)&&a.y<=Math.max(c.y,d.y)&&a.y>=Math.min(c.y,d.y)}function Tg(c){return c>0?1:c<0?-1:0}function Wp(c,a){return Dr(c.prev,c,c.next)<0?Dr(c,a,c.next)>=0&&Dr(c,c.prev,a)>=0:Dr(c,a,c.prev)<0||Dr(c,c.next,a)<0}function gw(c,a){var d=new M0(c.i,c.x,c.y),g=new M0(a.i,a.x,a.y),P=c.next,z=a.prev;return c.next=a,a.prev=c,d.next=P,P.prev=d,g.next=d,d.prev=g,z.next=g,g.prev=z,g}function yw(c,a,d,g){var P=new M0(c,a,d);return g?(P.next=g.next,P.prev=g,g.next.prev=P,g.next=P):(P.prev=P,P.next=P),P}function Yp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function M0(c,a,d){this.i=c,this.x=a,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P0(c,a,d,g){for(var P=0,z=a,F=d-g;z<d;z+=g)P+=(c[F]-c[z])*(c[z+1]+c[F+1]),F=z;return P}function PM(c,a,d,g,P){xw(c,a,d,g||c.length-1,P)}function xw(c,a,d,g,P){for(;g>d;){if(g-d>600){var z=g-d+1,F=a-d+1,ie=Math.log(z),le=.5*Math.exp(2*ie/3),_e=.5*Math.sqrt(ie*le*(z-le)/z)*(F-z/2<0?-1:1);xw(c,a,Math.max(d,Math.floor(a-F*le/z+_e)),Math.min(g,Math.floor(a+(z-F)*le/z+_e)),P)}var Re=c[a],Be=d,He=g;for(Zp(c,d,a),P(c[g],Re)>0&&Zp(c,d,g);Be<He;){for(Zp(c,Be,He),Be++,He--;P(c[Be],Re)<0;)Be++;for(;P(c[He],Re)>0;)He--}P(c[d],Re)===0?Zp(c,d,He):Zp(c,++He,g),He<=a&&(d=He+1),a<=He&&(g=He-1)}}function Zp(c,a,d){var g=c[a];c[a]=c[d],c[d]=g}function I0(c,a){const d=c.length;if(d<=1)return[c];const g=[];let P,z;for(let F=0;F<d;F++){const ie=N(c[F]);ie!==0&&(c[F].area=Math.abs(ie),z===void 0&&(z=ie<0),z===ie<0?(P&&g.push(P),P=[c[F]]):P.push(c[F]))}if(P&&g.push(P),a>1)for(let F=0;F<g.length;F++)g[F].length<=a||(PM(g[F],a,1,g[F].length-1,IM),g[F]=g[F].slice(0,a));return g}function IM(c,a){return a.area-c.area}function D0(c,a,d){const g=d.patternDependencies;let P=!1;for(const z of a){const F=z.paint.get(`${c}-pattern`);F.isConstant()||(P=!0);const ie=F.constantOr(null);ie&&(P=!0,g[ie.to]=!0,g[ie.from]=!0)}return P}function R0(c,a,d,g,P){const z=P.patternDependencies;for(const F of a){const ie=F.paint.get(`${c}-pattern`).value;if(ie.kind!=="constant"){let le=ie.evaluate({zoom:g-1},d,{},P.availableImages),_e=ie.evaluate({zoom:g},d,{},P.availableImages),Re=ie.evaluate({zoom:g+1},d,{},P.availableImages);le=le&&le.name?le.name:le,_e=_e&&_e.name?_e.name:_e,Re=Re&&Re.name?Re.name:Re,z[le]=!0,z[_e]=!0,z[Re]=!0,d.patterns[F.id]={min:le,mid:_e,max:Re}}}return d}bg.exports=_g,bg.exports.default=_g,_g.deviation=function(c,a,d,g){var P=a&&a.length,z=Math.abs(P0(c,0,P?a[0]*d:c.length,d));if(P)for(var F=0,ie=a.length;F<ie;F++)z-=Math.abs(P0(c,a[F]*d,F<ie-1?a[F+1]*d:c.length,d));var le=0;for(F=0;F<g.length;F+=3){var _e=g[F]*d,Re=g[F+1]*d,Be=g[F+2]*d;le+=Math.abs((c[_e]-c[Be])*(c[Re+1]-c[_e+1])-(c[_e]-c[Re])*(c[Be+1]-c[_e+1]))}return z===0&&le===0?0:Math.abs((le-z)/z)},_g.flatten=function(c){for(var a=c[0][0].length,d={vertices:[],holes:[],dimensions:a},g=0,P=0;P<c.length;P++){for(var z=0;z<c[P].length;z++)for(var F=0;F<a;F++)d.vertices.push(c[P][z][F]);P>0&&d.holes.push(g+=c[P-1].length)}return d};class L0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Un,this.indexArray=new ds,this.indexArray2=new Ua,this.programConfigurations=new Tu(a.layers,a.zoom),this.segments=new Mn,this.segments2=new Mn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,g){this.hasPattern=D0("fill",this.layers,d);const P=this.layers[0].layout.get("fill-sort-key"),z=!P.isConstant(),F=[];for(const{feature:ie,id:le,index:_e,sourceLayerIndex:Re}of a){const Be=this.layers[0]._featureFilter.needGeometry,He=Eu(ie,Be);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),He,g))continue;const Ze=z?P.evaluate(He,{},g,d.availableImages):void 0,Xe={id:le,properties:ie.properties,type:ie.type,sourceLayerIndex:Re,index:_e,geometry:Be?He.geometry:Su(ie),patterns:{},sortKey:Ze};F.push(Xe)}z&&F.sort((ie,le)=>ie.sortKey-le.sortKey);for(const ie of F){const{geometry:le,index:_e,sourceLayerIndex:Re}=ie;if(this.hasPattern){const Be=R0("fill",this.layers,ie,this.zoom,d);this.patternFeatures.push(Be)}else this.addFeature(ie,le,_e,g,{});d.featureIndex.insert(a[_e].feature,le,_e,Re,this.index)}}update(a,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,g)}addFeatures(a,d,g){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,bM),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,d,g,P,z){for(const F of I0(d,500)){let ie=0;for(const Ze of F)ie+=Ze.length;const le=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray),_e=le.vertexLength,Re=[],Be=[];for(const Ze of F){if(Ze.length===0)continue;Ze!==F[0]&&Be.push(Re.length/2);const Xe=this.segments2.prepareSegment(Ze.length,this.layoutVertexArray,this.indexArray2),ut=Xe.vertexLength;this.layoutVertexArray.emplaceBack(Ze[0].x,Ze[0].y),this.indexArray2.emplaceBack(ut+Ze.length-1,ut),Re.push(Ze[0].x),Re.push(Ze[0].y);for(let lt=1;lt<Ze.length;lt++)this.layoutVertexArray.emplaceBack(Ze[lt].x,Ze[lt].y),this.indexArray2.emplaceBack(ut+lt-1,ut+lt),Re.push(Ze[lt].x),Re.push(Ze[lt].y);Xe.vertexLength+=Ze.length,Xe.primitiveLength+=Ze.length}const He=bg.exports(Re,Be);for(let Ze=0;Ze<He.length;Ze+=3)this.indexArray.emplaceBack(_e+He[Ze],_e+He[Ze+1],_e+He[Ze+2]);le.vertexLength+=ie,le.primitiveLength+=He.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,g,z,P)}}mi("FillBucket",L0,{omit:["layers","patternFeatures"]});const DM=new qr({"fill-sort-key":new Di(Pe.layout_fill["fill-sort-key"])});var RM={paint:new qr({"fill-antialias":new Ei(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Di(Pe.paint_fill["fill-opacity"]),"fill-color":new Di(Pe.paint_fill["fill-color"]),"fill-outline-color":new Di(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Ei(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Ei(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new vu(Pe.paint_fill["fill-pattern"])}),layout:DM};const LM=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),NM=Fr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:zM}=LM;var uc={},jM=G,vw=th;function th(c,a,d,g,P){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=g,this._values=P,c.readFields(OM,this,a)}function OM(c,a,d){c==1?a.id=d.readVarint():c==2?function(g,P){for(var z=g.readVarint()+g.pos;g.pos<z;){var F=P._keys[g.readVarint()],ie=P._values[g.readVarint()];P.properties[F]=ie}}(d,a):c==3?a.type=d.readVarint():c==4&&(a._geometry=d.pos)}function FM(c){for(var a,d,g=0,P=0,z=c.length,F=z-1;P<z;F=P++)g+=((d=c[F]).x-(a=c[P]).x)*(a.y+d.y);return g}th.types=["Unknown","Point","LineString","Polygon"],th.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,d=c.readVarint()+c.pos,g=1,P=0,z=0,F=0,ie=[];c.pos<d;){if(P<=0){var le=c.readVarint();g=7&le,P=le>>3}if(P--,g===1||g===2)z+=c.readSVarint(),F+=c.readSVarint(),g===1&&(a&&ie.push(a),a=[]),a.push(new jM(z,F));else{if(g!==7)throw new Error("unknown command "+g);a&&a.push(a[0].clone())}}return a&&ie.push(a),ie},th.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,d=1,g=0,P=0,z=0,F=1/0,ie=-1/0,le=1/0,_e=-1/0;c.pos<a;){if(g<=0){var Re=c.readVarint();d=7&Re,g=Re>>3}if(g--,d===1||d===2)(P+=c.readSVarint())<F&&(F=P),P>ie&&(ie=P),(z+=c.readSVarint())<le&&(le=z),z>_e&&(_e=z);else if(d!==7)throw new Error("unknown command "+d)}return[F,le,ie,_e]},th.prototype.toGeoJSON=function(c,a,d){var g,P,z=this.extent*Math.pow(2,d),F=this.extent*c,ie=this.extent*a,le=this.loadGeometry(),_e=th.types[this.type];function Re(Ze){for(var Xe=0;Xe<Ze.length;Xe++){var ut=Ze[Xe];Ze[Xe]=[360*(ut.x+F)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+ie)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var Be=[];for(g=0;g<le.length;g++)Be[g]=le[g][0];Re(le=Be);break;case 2:for(g=0;g<le.length;g++)Re(le[g]);break;case 3:for(le=function(Ze){var Xe=Ze.length;if(Xe<=1)return[Ze];for(var ut,lt,bt=[],Dt=0;Dt<Xe;Dt++){var xt=FM(Ze[Dt]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ut&&bt.push(ut),ut=[Ze[Dt]]):ut.push(Ze[Dt]))}return ut&&bt.push(ut),bt}(le),g=0;g<le.length;g++)for(P=0;P<le[g].length;P++)Re(le[g][P])}le.length===1?le=le[0]:_e="Multi"+_e;var He={type:"Feature",geometry:{type:_e,coordinates:le},properties:this.properties};return"id"in this&&(He.id=this.id),He};var BM=vw,bw=_w;function _w(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields($M,this,a),this.length=this._features.length}function $M(c,a,d){c===15?a.version=d.readVarint():c===1?a.name=d.readString():c===5?a.extent=d.readVarint():c===2?a._features.push(d.pos):c===3?a._keys.push(d.readString()):c===4&&a._values.push(function(g){for(var P=null,z=g.readVarint()+g.pos;g.pos<z;){var F=g.readVarint()>>3;P=F===1?g.readString():F===2?g.readFloat():F===3?g.readDouble():F===4?g.readVarint64():F===5?g.readVarint():F===6?g.readSVarint():F===7?g.readBoolean():null}return P}(d))}_w.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new BM(this._pbf,a,this.extent,this._keys,this._values)};var UM=bw;function VM(c,a,d){if(c===3){var g=new UM(d,d.readVarint()+d.pos);g.length&&(a[g.name]=g)}}uc.VectorTile=function(c,a){this.layers=c.readFields(VM,{},a)},uc.VectorTileFeature=vw,uc.VectorTileLayer=bw;const GM=uc.VectorTileFeature.types,N0=Math.pow(2,13);function Xp(c,a,d,g,P,z,F,ie){c.emplaceBack(a,d,2*Math.floor(g*N0)+F,P*N0*2,z*N0*2,Math.round(ie))}class z0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Vn,this.centroidVertexArray=new dn,this.indexArray=new ds,this.programConfigurations=new Tu(a.layers,a.zoom),this.segments=new Mn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,g){this.features=[],this.hasPattern=D0("fill-extrusion",this.layers,d);for(const{feature:P,id:z,index:F,sourceLayerIndex:ie}of a){const le=this.layers[0]._featureFilter.needGeometry,_e=Eu(P,le);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),_e,g))continue;const Re={id:z,sourceLayerIndex:ie,index:F,geometry:le?_e.geometry:Su(P),properties:P.properties,type:P.type,patterns:{}};this.hasPattern?this.features.push(R0("fill-extrusion",this.layers,Re,this.zoom,d)):this.addFeature(Re,Re.geometry,F,g,{}),d.featureIndex.insert(P,Re.geometry,F,ie,this.index,!0)}}addFeatures(a,d,g){for(const P of this.features){const{geometry:z}=P;this.addFeature(P,z,P.index,d,g)}}update(a,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,zM),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,NM.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,d,g,P,z){const F={x:0,y:0,vertexCount:0};for(const ie of I0(d,500)){let le=0;for(const Xe of ie)le+=Xe.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Xe of ie){if(Xe.length===0||qM(Xe))continue;let ut=0;for(let lt=0;lt<Xe.length;lt++){const bt=Xe[lt];if(lt>=1){const Dt=Xe[lt-1];if(!HM(bt,Dt)){_e.vertexLength+4>Mn.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=bt.sub(Dt)._perp()._unit(),Pt=Dt.dist(bt);ut+Pt>32768&&(ut=0),Xp(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,0,ut),Xp(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,1,ut),F.x+=2*bt.x,F.y+=2*bt.y,F.vertexCount+=2,ut+=Pt,Xp(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,0,ut),Xp(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,1,ut),F.x+=2*Dt.x,F.y+=2*Dt.y,F.vertexCount+=2;const $t=_e.vertexLength;this.indexArray.emplaceBack($t,$t+2,$t+1),this.indexArray.emplaceBack($t+1,$t+2,$t+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+le>Mn.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray)),GM[a.type]!=="Polygon")continue;const Re=[],Be=[],He=_e.vertexLength;for(const Xe of ie)if(Xe.length!==0){Xe!==ie[0]&&Be.push(Re.length/2);for(let ut=0;ut<Xe.length;ut++){const lt=Xe[ut];Xp(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),F.x+=lt.x,F.y+=lt.y,F.vertexCount+=1,Re.push(lt.x),Re.push(lt.y)}}const Ze=bg.exports(Re,Be);for(let Xe=0;Xe<Ze.length;Xe+=3)this.indexArray.emplaceBack(He+Ze[Xe],He+Ze[Xe+2],He+Ze[Xe+1]);_e.primitiveLength+=Ze.length/3,_e.vertexLength+=le}for(let ie=0;ie<F.vertexCount;ie++)this.centroidVertexArray.emplaceBack(Math.floor(F.x/F.vertexCount),Math.floor(F.y/F.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,g,z,P)}}function HM(c,a){return c.x===a.x&&(c.x<0||c.x>Wr)||c.y===a.y&&(c.y<0||c.y>Wr)}function qM(c){return c.every(a=>a.x<0)||c.every(a=>a.x>Wr)||c.every(a=>a.y<0)||c.every(a=>a.y>Wr)}mi("FillExtrusionBucket",z0,{omit:["layers","features"]});var WM={paint:new qr({"fill-extrusion-opacity":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vu(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Kp(c,a){return c.x*a.x+c.y*a.y}function ww(c,a){if(c.length===1){let d=0;const g=a[d++];let P;for(;!P||g.equals(P);)if(P=a[d++],!P)return 1/0;for(;d<a.length;d++){const z=a[d],F=c[0],ie=P.sub(g),le=z.sub(g),_e=F.sub(g),Re=Kp(ie,ie),Be=Kp(ie,le),He=Kp(le,le),Ze=Kp(_e,ie),Xe=Kp(_e,le),ut=Re*He-Be*Be,lt=(He*Ze-Be*Xe)/ut,bt=(Re*Xe-Be*Ze)/ut,Dt=g.z*(1-lt-bt)+P.z*lt+z.z*bt;if(isFinite(Dt))return Dt}return 1/0}{let d=1/0;for(const g of a)d=Math.min(d,g.z);return d}}const YM=Fr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ZM}=YM,XM=Fr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:KM}=XM,QM=uc.VectorTileFeature.types,JM=Math.cos(Math.PI/180*37.5),Cw=Math.pow(2,14)/.5;class j0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Cn,this.layoutVertexArray2=new Sn,this.indexArray=new ds,this.programConfigurations=new Tu(a.layers,a.zoom),this.segments=new Mn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,g){this.hasPattern=D0("line",this.layers,d);const P=this.layers[0].layout.get("line-sort-key"),z=!P.isConstant(),F=[];for(const{feature:ie,id:le,index:_e,sourceLayerIndex:Re}of a){const Be=this.layers[0]._featureFilter.needGeometry,He=Eu(ie,Be);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),He,g))continue;const Ze=z?P.evaluate(He,{},g):void 0,Xe={id:le,properties:ie.properties,type:ie.type,sourceLayerIndex:Re,index:_e,geometry:Be?He.geometry:Su(ie),patterns:{},sortKey:Ze};F.push(Xe)}z&&F.sort((ie,le)=>ie.sortKey-le.sortKey);for(const ie of F){const{geometry:le,index:_e,sourceLayerIndex:Re}=ie;if(this.hasPattern){const Be=R0("line",this.layers,ie,this.zoom,d);this.patternFeatures.push(Be)}else this.addFeature(ie,le,_e,g,{});d.featureIndex.insert(a[_e].feature,le,_e,Re,this.index)}}update(a,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,g)}addFeatures(a,d,g){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,KM)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ZM),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,d,g,P,z){const F=this.layers[0].layout,ie=F.get("line-join").evaluate(a,{}),le=F.get("line-cap"),_e=F.get("line-miter-limit"),Re=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Be of d)this.addLine(Be,a,ie,le,_e,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,g,z,P)}addLine(a,d,g,P,z,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let bt=0;bt<a.length-1;bt++)this.totalDistance+=a[bt].dist(a[bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=QM[d.type]==="Polygon";let le=a.length;for(;le>=2&&a[le-1].equals(a[le-2]);)le--;let _e=0;for(;_e<le-1&&a[_e].equals(a[_e+1]);)_e++;if(le<(ie?3:2))return;g==="bevel"&&(z=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,Be=this.segments.prepareSegment(10*le,this.layoutVertexArray,this.indexArray);let He,Ze,Xe,ut,lt;this.e1=this.e2=-1,ie&&(He=a[le-2],lt=a[_e].sub(He)._unit()._perp());for(let bt=_e;bt<le;bt++){if(Xe=bt===le-1?ie?a[_e+1]:void 0:a[bt+1],Xe&&a[bt].equals(Xe))continue;lt&&(ut=lt),He&&(Ze=He),He=a[bt],lt=Xe?Xe.sub(He)._unit()._perp():ut,ut=ut||lt;let Dt=ut.add(lt);Dt.x===0&&Dt.y===0||Dt._unit();const xt=ut.x*lt.x+ut.y*lt.y,Pt=Dt.x*lt.x+Dt.y*lt.y,$t=Pt!==0?1/Pt:1/0,Bt=2*Math.sqrt(2-2*Pt),xi=Pt<JM&&Ze&&Xe,Ti=ut.x*lt.y-ut.y*lt.x>0;if(xi&&bt>_e){const Zt=He.dist(Ze);if(Zt>2*Re){const ni=He.sub(He.sub(Ze)._mult(Re/Zt)._round());this.updateDistance(Ze,ni),this.addCurrentVertex(ni,ut,0,0,Be),Ze=ni}}const ii=Ze&&Xe;let Kt=ii?g:ie?"butt":P;if(ii&&Kt==="round"&&($t<F?Kt="miter":$t<=2&&(Kt="fakeround")),Kt==="miter"&&$t>z&&(Kt="bevel"),Kt==="bevel"&&($t>2&&(Kt="flipbevel"),$t<z&&(Kt="miter")),Ze&&this.updateDistance(Ze,He),Kt==="miter")Dt._mult($t),this.addCurrentVertex(He,Dt,0,0,Be);else if(Kt==="flipbevel"){if($t>100)Dt=lt.mult(-1);else{const Zt=$t*ut.add(lt).mag()/ut.sub(lt).mag();Dt._perp()._mult(Zt*(Ti?-1:1))}this.addCurrentVertex(He,Dt,0,0,Be),this.addCurrentVertex(He,Dt.mult(-1),0,0,Be)}else if(Kt==="bevel"||Kt==="fakeround"){const Zt=-Math.sqrt($t*$t-1),ni=Ti?Zt:0,ei=Ti?0:Zt;if(Ze&&this.addCurrentVertex(He,ut,ni,ei,Be),Kt==="fakeround"){const Gt=Math.round(180*Bt/Math.PI/20);for(let Mi=1;Mi<Gt;Mi++){let ki=Mi/Gt;if(ki!==.5){const ar=ki-.5;ki+=ki*ar*(ki-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*ar*ar+(.848013+xt*(.215638*xt-1.06021)))}const hn=lt.sub(ut)._mult(ki)._add(ut)._unit()._mult(Ti?-1:1);this.addHalfVertex(He,hn.x,hn.y,!1,Ti,0,Be)}}Xe&&this.addCurrentVertex(He,lt,-ni,-ei,Be)}else if(Kt==="butt")this.addCurrentVertex(He,Dt,0,0,Be);else if(Kt==="square"){const Zt=Ze?1:-1;this.addCurrentVertex(He,Dt,Zt,Zt,Be)}else Kt==="round"&&(Ze&&(this.addCurrentVertex(He,ut,0,0,Be),this.addCurrentVertex(He,ut,1,1,Be,!0)),Xe&&(this.addCurrentVertex(He,lt,-1,-1,Be,!0),this.addCurrentVertex(He,lt,0,0,Be)));if(xi&&bt<le-1){const Zt=He.dist(Xe);if(Zt>2*Re){const ni=He.add(Xe.sub(He)._mult(Re/Zt)._round());this.updateDistance(He,ni),this.addCurrentVertex(ni,lt,0,0,Be),He=ni}}}}addCurrentVertex(a,d,g,P,z,F=!1){const ie=d.y*P-d.x,le=-d.y-d.x*P;this.addHalfVertex(a,d.x+d.y*g,d.y-d.x*g,F,!1,g,z),this.addHalfVertex(a,ie,le,F,!0,-P,z),this.distance>Cw/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,d,g,P,z,F))}addHalfVertex({x:a,y:d},g,P,z,F,ie,le){const _e=.5*(this.lineClips?this.scaledDistance*(Cw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(z?1:0),(d<<1)+(F?1:0),Math.round(63*g)+128,Math.round(63*P)+128,1+(ie===0?0:ie<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=le.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),le.primitiveLength++),F?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,d){this.distance+=a.dist(d),this.updateScaledDistance()}}mi("LineBucket",j0,{omit:["layers","patternFeatures"]});const eP=new qr({"line-cap":new Ei(Pe.layout_line["line-cap"]),"line-join":new Di(Pe.layout_line["line-join"]),"line-miter-limit":new Ei(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Ei(Pe.layout_line["line-round-limit"]),"line-sort-key":new Di(Pe.layout_line["line-sort-key"])});var Tw={paint:new qr({"line-opacity":new Di(Pe.paint_line["line-opacity"]),"line-color":new Di(Pe.paint_line["line-color"]),"line-translate":new Ei(Pe.paint_line["line-translate"]),"line-translate-anchor":new Ei(Pe.paint_line["line-translate-anchor"]),"line-width":new Di(Pe.paint_line["line-width"]),"line-gap-width":new Di(Pe.paint_line["line-gap-width"]),"line-offset":new Di(Pe.paint_line["line-offset"]),"line-blur":new Di(Pe.paint_line["line-blur"]),"line-dasharray":new bu(Pe.paint_line["line-dasharray"]),"line-pattern":new vu(Pe.paint_line["line-pattern"]),"line-gradient":new Bp(Pe.paint_line["line-gradient"])}),layout:eP};const Sw=new class extends Di{possiblyEvaluate(c,a){return a=new cr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(c,a)}evaluate(c,a,d,g){return a=b({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(c,a,d,g)}}(Tw.paint.properties["line-width"].specification);function Ew(c,a){return a>0?a+2*c:c}Sw.useIntegerZoom=!0;const tP=Fr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),iP=Fr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nP=Fr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Fr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kw=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rP=Fr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sP(c,a,d){return c.sections.forEach(g=>{g.text=function(P,z,F){const ie=z.layout.get("text-transform").evaluate(F,{});return ie==="uppercase"?P=P.toLocaleUpperCase():ie==="lowercase"&&(P=P.toLocaleLowerCase()),Aa.applyArabicShaping&&(P=Aa.applyArabicShaping(P)),P}(g.text,a,d)}),c}Fr([{name:"triangle",components:3,type:"Uint16"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fr([{type:"Float32",name:"offsetX"}]),Fr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Qp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var hs=24,O0=Zn,Aw=function(c,a,d,g,P){var z,F,ie=8*P-g-1,le=(1<<ie)-1,_e=le>>1,Re=-7,Be=P-1,He=-1,Ze=c[a+Be];for(Be+=He,z=Ze&(1<<-Re)-1,Ze>>=-Re,Re+=ie;Re>0;z=256*z+c[a+Be],Be+=He,Re-=8);for(F=z&(1<<-Re)-1,z>>=-Re,Re+=g;Re>0;F=256*F+c[a+Be],Be+=He,Re-=8);if(z===0)z=1-_e;else{if(z===le)return F?NaN:1/0*(Ze?-1:1);F+=Math.pow(2,g),z-=_e}return(Ze?-1:1)*F*Math.pow(2,z-g)},Mw=function(c,a,d,g,P,z){var F,ie,le,_e=8*z-P-1,Re=(1<<_e)-1,Be=Re>>1,He=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ze=0,Xe=1,ut=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(ie=isNaN(a)?1:0,F=Re):(F=Math.floor(Math.log(a)/Math.LN2),a*(le=Math.pow(2,-F))<1&&(F--,le*=2),(a+=F+Be>=1?He/le:He*Math.pow(2,1-Be))*le>=2&&(F++,le/=2),F+Be>=Re?(ie=0,F=Re):F+Be>=1?(ie=(a*le-1)*Math.pow(2,P),F+=Be):(ie=a*Math.pow(2,Be-1)*Math.pow(2,P),F=0));P>=8;c[d+Ze]=255&ie,Ze+=Xe,ie/=256,P-=8);for(F=F<<P|ie,_e+=P;_e>0;c[d+Ze]=255&F,Ze+=Xe,F/=256,_e-=8);c[d+Ze-Xe]|=128*ut};function Zn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Zn.Varint=0,Zn.Fixed64=1,Zn.Bytes=2,Zn.Fixed32=5;var dc,F0=4294967296,Pw=1/F0,Iw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function El(c){return c.type===Zn.Bytes?c.readVarint()+c.pos:c.pos+1}function ih(c,a,d){return d?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function Dw(c,a,d){var g=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));d.realloc(g);for(var P=d.pos-1;P>=c;P--)d.buf[P+g]=d.buf[P]}function aP(c,a){for(var d=0;d<c.length;d++)a.writeVarint(c[d])}function oP(c,a){for(var d=0;d<c.length;d++)a.writeSVarint(c[d])}function lP(c,a){for(var d=0;d<c.length;d++)a.writeFloat(c[d])}function cP(c,a){for(var d=0;d<c.length;d++)a.writeDouble(c[d])}function uP(c,a){for(var d=0;d<c.length;d++)a.writeBoolean(c[d])}function dP(c,a){for(var d=0;d<c.length;d++)a.writeFixed32(c[d])}function hP(c,a){for(var d=0;d<c.length;d++)a.writeSFixed32(c[d])}function pP(c,a){for(var d=0;d<c.length;d++)a.writeFixed64(c[d])}function fP(c,a){for(var d=0;d<c.length;d++)a.writeSFixed64(c[d])}function Sg(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function nh(c,a,d){c[d]=a,c[d+1]=a>>>8,c[d+2]=a>>>16,c[d+3]=a>>>24}function Rw(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}function mP(c,a,d){c===1&&d.readMessage(gP,a)}function gP(c,a,d){if(c===3){const{id:g,bitmap:P,width:z,height:F,left:ie,top:le,advance:_e}=d.readMessage(yP,{});a.push({id:g,bitmap:new Hp({width:z+6,height:F+6},P),metrics:{width:z,height:F,left:ie,top:le,advance:_e}})}}function yP(c,a,d){c===1?a.id=d.readVarint():c===2?a.bitmap=d.readBytes():c===3?a.width=d.readVarint():c===4?a.height=d.readVarint():c===5?a.left=d.readSVarint():c===6?a.top=d.readSVarint():c===7&&(a.advance=d.readVarint())}function Lw(c){let a=0,d=0;for(const F of c)a+=F.w*F.h,d=Math.max(d,F.w);c.sort((F,ie)=>ie.h-F.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}];let P=0,z=0;for(const F of c)for(let ie=g.length-1;ie>=0;ie--){const le=g[ie];if(!(F.w>le.w||F.h>le.h)){if(F.x=le.x,F.y=le.y,z=Math.max(z,F.y+F.h),P=Math.max(P,F.x+F.w),F.w===le.w&&F.h===le.h){const _e=g.pop();ie<g.length&&(g[ie]=_e)}else F.h===le.h?(le.x+=F.w,le.w-=F.w):F.w===le.w?(le.y+=F.h,le.h-=F.h):(g.push({x:le.x+F.w,y:le.y,w:le.w-F.w,h:F.h}),le.y+=F.h,le.h-=F.h);break}}return{w:P,h:z,fill:a/(P*z)||0}}Zn.prototype={destroy:function(){this.buf=null},readFields:function(c,a,d){for(d=d||this.length;this.pos<d;){var g=this.readVarint(),P=g>>3,z=this.pos;this.type=7&g,c(P,a,this),this.pos===z&&this.skip(g)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=Sg(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Rw(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Sg(this.buf,this.pos)+Sg(this.buf,this.pos+4)*F0;return this.pos+=8,c},readSFixed64:function(){var c=Sg(this.buf,this.pos)+Rw(this.buf,this.pos+4)*F0;return this.pos+=8,c},readFloat:function(){var c=Aw(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Aw(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,d,g=this.buf;return a=127&(d=g[this.pos++]),d<128?a:(a|=(127&(d=g[this.pos++]))<<7,d<128?a:(a|=(127&(d=g[this.pos++]))<<14,d<128?a:(a|=(127&(d=g[this.pos++]))<<21,d<128?a:function(P,z,F){var ie,le,_e=F.buf;if(ie=(112&(le=_e[F.pos++]))>>4,le<128||(ie|=(127&(le=_e[F.pos++]))<<3,le<128)||(ie|=(127&(le=_e[F.pos++]))<<10,le<128)||(ie|=(127&(le=_e[F.pos++]))<<17,le<128)||(ie|=(127&(le=_e[F.pos++]))<<24,le<128)||(ie|=(1&(le=_e[F.pos++]))<<31,le<128))return ih(P,ie,z);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(d=g[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&Iw?function(d,g,P){return Iw.decode(d.subarray(g,P))}(this.buf,a,c):function(d,g,P){for(var z="",F=g;F<P;){var ie,le,_e,Re=d[F],Be=null,He=Re>239?4:Re>223?3:Re>191?2:1;if(F+He>P)break;He===1?Re<128&&(Be=Re):He===2?(192&(ie=d[F+1]))==128&&(Be=(31&Re)<<6|63&ie)<=127&&(Be=null):He===3?(le=d[F+2],(192&(ie=d[F+1]))==128&&(192&le)==128&&((Be=(15&Re)<<12|(63&ie)<<6|63&le)<=2047||Be>=55296&&Be<=57343)&&(Be=null)):He===4&&(le=d[F+2],_e=d[F+3],(192&(ie=d[F+1]))==128&&(192&le)==128&&(192&_e)==128&&((Be=(15&Re)<<18|(63&ie)<<12|(63&le)<<6|63&_e)<=65535||Be>=1114112)&&(Be=null)),Be===null?(Be=65533,He=1):Be>65535&&(Be-=65536,z+=String.fromCharCode(Be>>>10&1023|55296),Be=56320|1023&Be),z+=String.fromCharCode(Be),F+=He}return z}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==Zn.Bytes)return c.push(this.readVarint(a));var d=El(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==Zn.Bytes)return c.push(this.readSVarint());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Zn.Bytes)return c.push(this.readBoolean());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Zn.Bytes)return c.push(this.readFloat());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Zn.Bytes)return c.push(this.readDouble());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Zn.Bytes)return c.push(this.readFixed32());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Zn.Bytes)return c.push(this.readSFixed32());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Zn.Bytes)return c.push(this.readFixed64());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Zn.Bytes)return c.push(this.readSFixed64());var a=El(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===Zn.Varint)for(;this.buf[this.pos++]>127;);else if(a===Zn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Zn.Fixed32)this.pos+=4;else{if(a!==Zn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var d=new Uint8Array(a);d.set(this.buf),this.buf=d,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),nh(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),nh(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),nh(this.buf,-1&c,this.pos),nh(this.buf,Math.floor(c*Pw),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),nh(this.buf,-1&c,this.pos),nh(this.buf,Math.floor(c*Pw),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,d){var g,P;if(a>=0?(g=a%4294967296|0,P=a/4294967296|0):(P=~(-a/4294967296),4294967295^(g=~(-a%4294967296))?g=g+1|0:(g=0,P=P+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(z,F,ie){ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,ie.buf[ie.pos]=127&(z>>>=7)}(g,0,d),function(z,F){var ie=(7&z)<<4;F.buf[F.pos++]|=ie|((z>>>=3)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z)))))}(P,d)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(g,P,z){for(var F,ie,le=0;le<P.length;le++){if((F=P.charCodeAt(le))>55295&&F<57344){if(!ie){F>56319||le+1===P.length?(g[z++]=239,g[z++]=191,g[z++]=189):ie=F;continue}if(F<56320){g[z++]=239,g[z++]=191,g[z++]=189,ie=F;continue}F=ie-55296<<10|F-56320|65536,ie=null}else ie&&(g[z++]=239,g[z++]=191,g[z++]=189,ie=null);F<128?g[z++]=F:(F<2048?g[z++]=F>>6|192:(F<65536?g[z++]=F>>12|224:(g[z++]=F>>18|240,g[z++]=F>>12&63|128),g[z++]=F>>6&63|128),g[z++]=63&F|128)}return z}(this.buf,c,this.pos);var d=this.pos-a;d>=128&&Dw(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),Mw(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Mw(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var d=0;d<a;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,a){this.pos++;var d=this.pos;c(a,this);var g=this.pos-d;g>=128&&Dw(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeMessage:function(c,a,d){this.writeTag(c,Zn.Bytes),this.writeRawMessage(a,d)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,aP,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,oP,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,uP,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,lP,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,cP,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,dP,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,hP,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,pP,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,fP,a)},writeBytesField:function(c,a){this.writeTag(c,Zn.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,Zn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,Zn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,Zn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,Zn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,Zn.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,Zn.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,Zn.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,Zn.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,Zn.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};class B0{constructor(a,{pixelRatio:d,version:g,stretchX:P,stretchY:z,content:F}){this.paddedRect=a,this.pixelRatio=d,this.stretchX=P,this.stretchY=z,this.content=F,this.version=g}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nw{constructor(a,d){const g={},P={};this.haveRenderCallbacks=[];const z=[];this.addImages(a,g,z),this.addImages(d,P,z);const{w:F,h:ie}=Lw(z),le=new Ga({width:F||1,height:ie||1});for(const _e in a){const Re=a[_e],Be=g[_e].paddedRect;Ga.copy(Re.data,le,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Re.data)}for(const _e in d){const Re=d[_e],Be=P[_e].paddedRect,He=Be.x+1,Ze=Be.y+1,Xe=Re.data.width,ut=Re.data.height;Ga.copy(Re.data,le,{x:0,y:0},{x:He,y:Ze},Re.data),Ga.copy(Re.data,le,{x:0,y:ut-1},{x:He,y:Ze-1},{width:Xe,height:1}),Ga.copy(Re.data,le,{x:0,y:0},{x:He,y:Ze+ut},{width:Xe,height:1}),Ga.copy(Re.data,le,{x:Xe-1,y:0},{x:He-1,y:Ze},{width:1,height:ut}),Ga.copy(Re.data,le,{x:0,y:0},{x:He+Xe,y:Ze},{width:1,height:ut})}this.image=le,this.iconPositions=g,this.patternPositions=P}addImages(a,d,g){for(const P in a){const z=a[P],F={x:0,y:0,w:z.data.width+2,h:z.data.height+2};g.push(F),d[P]=new B0(F,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(P)}}patchUpdatedImages(a,d){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in a.updatedImages)this.patchUpdatedImage(this.iconPositions[g],a.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],a.getImage(g),d)}patchUpdatedImage(a,d,g){if(!a||!d||a.version===d.version)return;a.version=d.version;const[P,z]=a.tl;g.update(d.data,void 0,{x:P,y:z})}}mi("ImagePosition",B0),mi("ImageAtlas",Nw),r.WritingMode=void 0,(dc=r.WritingMode||(r.WritingMode={}))[dc.none=0]="none",dc[dc.horizontal=1]="horizontal",dc[dc.vertical=2]="vertical",dc[dc.horizontalOnly=3]="horizontalOnly";const Eg=-17;class Jp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,d){const g=new Jp;return g.scale=a||1,g.fontStack=d,g}static forImage(a){const d=new Jp;return d.imageName=a,d}}class rh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,d){const g=new rh;for(let P=0;P<a.sections.length;P++){const z=a.sections[P];z.image?g.addImageSection(z):g.addTextSection(z,d)}return g}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let d="";for(let g=0;g<a.length;g++){const P=a.charCodeAt(g+1)||null,z=a.charCodeAt(g-1)||null;d+=P&&ug(P)&&!Qp[a[g+1]]||z&&ug(z)&&!Qp[a[g-1]]||!Qp[a[g]]?a[g]:Qp[a[g]]}return d}(this.text)}trim(){let a=0;for(let g=0;g<this.text.length&&Ag[this.text.charCodeAt(g)];g++)a++;let d=this.text.length;for(let g=this.text.length-1;g>=0&&g>=a&&Ag[this.text.charCodeAt(g)];g--)d--;this.text=this.text.substring(a,d),this.sectionIndex=this.sectionIndex.slice(a,d)}substring(a,d){const g=new rh;return g.text=this.text.substring(a,d),g.sectionIndex=this.sectionIndex.slice(a,d),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,d)=>Math.max(a,this.sections[d].scale),0)}addTextSection(a,d){this.text+=a.text,this.sections.push(Jp.forText(a.scale,a.fontStack||d));const g=this.sections.length-1;for(let P=0;P<a.text.length;++P)this.sectionIndex.push(g)}addImageSection(a){const d=a.image?a.image.name:"";if(d.length===0)return void T("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Jp.forImage(d)),this.sectionIndex.push(this.sections.length-1)):T("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function kg(c,a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut){const lt=rh.fromFeature(c,P);let bt;Be===r.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:Dt,processStyledBidirectionalText:xt}=Aa;if(Dt&&lt.sections.length===1){bt=[];const Bt=Dt(lt.toString(),$0(lt,_e,z,a,g,Ze,Xe));for(const xi of Bt){const Ti=new rh;Ti.text=xi,Ti.sections=lt.sections;for(let ii=0;ii<xi.length;ii++)Ti.sectionIndex.push(0);bt.push(Ti)}}else if(xt){bt=[];const Bt=xt(lt.text,lt.sectionIndex,$0(lt,_e,z,a,g,Ze,Xe));for(const xi of Bt){const Ti=new rh;Ti.text=xi[0],Ti.sectionIndex=xi[1],Ti.sections=lt.sections,bt.push(Ti)}}else bt=function(Bt,xi){const Ti=[],ii=Bt.text;let Kt=0;for(const Zt of xi)Ti.push(Bt.substring(Kt,Zt)),Kt=Zt;return Kt<ii.length&&Ti.push(Bt.substring(Kt,ii.length)),Ti}(lt,$0(lt,_e,z,a,g,Ze,Xe));const Pt=[],$t={positionedLines:Pt,text:lt.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Be,iconsInText:!1,verticalizable:!1};return function(Bt,xi,Ti,ii,Kt,Zt,ni,ei,Gt,Mi,ki,hn){let ar=0,dr=Eg,Yr=0,qa=0;const ws=ei==="right"?1:ei==="left"?0:.5;let $r=0;for(const Ur of Kt){Ur.trim();const Ts=Ur.getMaxScale(),Ds=(Ts-1)*hs,Xs={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[$r]=Xs;const la=Xs.positionedGlyphs;let ca=0;if(!Ur.length()){dr+=Zt,++$r;continue}for(let rs=0;rs<Ur.length();rs++){const gn=Ur.getSection(rs),Pa=Ur.getSectionIndex(rs),Ss=Ur.getCharCode(rs);let Rs=0,oo=null,_o=null,wo=null,Al=hs;const lo=!(Gt===r.WritingMode.horizontal||!ki&&!xu(Ss)||ki&&(Ag[Ss]||(ns=Ss,ti.Arabic(ns)||ti["Arabic Supplement"](ns)||ti["Arabic Extended-A"](ns)||ti["Arabic Presentation Forms-A"](ns)||ti["Arabic Presentation Forms-B"](ns))));if(gn.imageName){const Wa=ii[gn.imageName];if(!Wa)continue;wo=gn.imageName,Bt.iconsInText=Bt.iconsInText||!0,_o=Wa.paddedRect;const ua=Wa.displaySize;gn.scale=gn.scale*hs/hn,oo={width:ua[0],height:ua[1],left:1,top:-3,advance:lo?ua[1]:ua[0]},Rs=Ds+(hs-ua[1]*gn.scale),Al=oo.advance;const Ml=lo?ua[0]*gn.scale-hs*Ts:ua[1]*gn.scale-hs*Ts;Ml>0&&Ml>ca&&(ca=Ml)}else{const Wa=Ti[gn.fontStack],ua=Wa&&Wa[Ss];if(ua&&ua.rect)_o=ua.rect,oo=ua.metrics;else{const Ml=xi[gn.fontStack],nf=Ml&&Ml[Ss];if(!nf)continue;oo=nf.metrics}Rs=(Ts-gn.scale)*hs}lo?(Bt.verticalizable=!0,la.push({glyph:Ss,imageName:wo,x:ar,y:dr+Rs,vertical:lo,scale:gn.scale,fontStack:gn.fontStack,sectionIndex:Pa,metrics:oo,rect:_o}),ar+=Al*gn.scale+Mi):(la.push({glyph:Ss,imageName:wo,x:ar,y:dr+Rs,vertical:lo,scale:gn.scale,fontStack:gn.fontStack,sectionIndex:Pa,metrics:oo,rect:_o}),ar+=oo.advance*gn.scale+Mi)}la.length!==0&&(Yr=Math.max(ar-Mi,Yr),bP(la,0,la.length-1,ws,ca)),ar=0;const gr=Zt*Ts+ca;Xs.lineOffset=Math.max(ca,Ds),dr+=gr,qa=Math.max(gr,qa),++$r}var ns;const Cs=dr-Eg,{horizontalAlign:Is,verticalAlign:oa}=U0(ni);(function(Ur,Ts,Ds,Xs,la,ca,gr,rs,gn){const Pa=(Ts-Ds)*la;let Ss=0;Ss=ca!==gr?-rs*Xs-Eg:(-Xs*gn+.5)*gr;for(const Rs of Ur)for(const oo of Rs.positionedGlyphs)oo.x+=Pa,oo.y+=Ss})(Bt.positionedLines,ws,Is,oa,Yr,qa,Zt,Cs,Kt.length),Bt.top+=-oa*Cs,Bt.bottom=Bt.top+Cs,Bt.left+=-Is*Yr,Bt.right=Bt.left+Yr}($t,a,d,g,bt,F,ie,le,Be,_e,He,ut),!function(Bt){for(const xi of Bt)if(xi.positionedGlyphs.length!==0)return!1;return!0}(Pt)&&$t}const Ag={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zw(c,a,d,g,P,z){if(a.imageName){const F=g[a.imageName];return F?F.displaySize[0]*a.scale*hs/z+P:0}{const F=d[a.fontStack],ie=F&&F[c];return ie?ie.metrics.advance*a.scale+P:0}}function jw(c,a,d,g){const P=Math.pow(c-a,2);return g?c<a?P/2:2*P:P+Math.abs(d)*d}function vP(c,a,d){let g=0;return c===10&&(g-=1e4),d&&(g+=150),c!==40&&c!==65288||(g+=50),a!==41&&a!==65289||(g+=50),g}function Ow(c,a,d,g,P,z){let F=null,ie=jw(a,d,P,z);for(const le of g){const _e=jw(a-le.x,d,P,z)+le.badness;_e<=ie&&(F=le,ie=_e)}return{index:c,x:a,priorBreak:F,badness:ie}}function Fw(c){return c?Fw(c.priorBreak).concat(c.index):[]}function $0(c,a,d,g,P,z,F){if(z!=="point")return[];if(!c)return[];const ie=[],le=function(He,Ze,Xe,ut,lt,bt){let Dt=0;for(let xt=0;xt<He.length();xt++){const Pt=He.getSection(xt);Dt+=zw(He.getCharCode(xt),Pt,ut,lt,Ze,bt)}return Dt/Math.max(1,Math.ceil(Dt/Xe))}(c,a,d,g,P,F),_e=c.text.indexOf("")>=0;let Re=0;for(let He=0;He<c.length();He++){const Ze=c.getSection(He),Xe=c.getCharCode(He);if(Ag[Xe]||(Re+=zw(Xe,Ze,g,P,a,F)),He<c.length()-1){const ut=!((Be=Xe)<11904||!(ti["Bopomofo Extended"](Be)||ti.Bopomofo(Be)||ti["CJK Compatibility Forms"](Be)||ti["CJK Compatibility Ideographs"](Be)||ti["CJK Compatibility"](Be)||ti["CJK Radicals Supplement"](Be)||ti["CJK Strokes"](Be)||ti["CJK Symbols and Punctuation"](Be)||ti["CJK Unified Ideographs Extension A"](Be)||ti["CJK Unified Ideographs"](Be)||ti["Enclosed CJK Letters and Months"](Be)||ti["Halfwidth and Fullwidth Forms"](Be)||ti.Hiragana(Be)||ti["Ideographic Description Characters"](Be)||ti["Kangxi Radicals"](Be)||ti["Katakana Phonetic Extensions"](Be)||ti.Katakana(Be)||ti["Vertical Forms"](Be)||ti["Yi Radicals"](Be)||ti["Yi Syllables"](Be)));(xP[Xe]||ut||Ze.imageName)&&ie.push(Ow(He+1,Re,le,ie,vP(Xe,c.getCharCode(He+1),ut&&_e),!1))}}var Be;return Fw(Ow(c.length(),Re,le,ie,0,!0))}function U0(c){let a=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function bP(c,a,d,g,P){if(!g&&!P)return;const z=c[d],F=(c[d].x+z.metrics.advance*z.scale)*g;for(let ie=a;ie<=d;ie++)c[ie].x-=F,c[ie].y+=P}function _P(c,a,d){const{horizontalAlign:g,verticalAlign:P}=U0(d),z=a[0]-c.displaySize[0]*g,F=a[1]-c.displaySize[1]*P;return{image:c,top:F,bottom:F+c.displaySize[1],left:z,right:z+c.displaySize[0]}}function Bw(c,a,d,g,P,z){const F=c.image;let ie;if(F.content){const lt=F.content,bt=F.pixelRatio||1;ie=[lt[0]/bt,lt[1]/bt,F.displaySize[0]-lt[2]/bt,F.displaySize[1]-lt[3]/bt]}const le=a.left*z,_e=a.right*z;let Re,Be,He,Ze;d==="width"||d==="both"?(Ze=P[0]+le-g[3],Be=P[0]+_e+g[1]):(Ze=P[0]+(le+_e-F.displaySize[0])/2,Be=Ze+F.displaySize[0]);const Xe=a.top*z,ut=a.bottom*z;return d==="height"||d==="both"?(Re=P[1]+Xe-g[0],He=P[1]+ut+g[2]):(Re=P[1]+(Xe+ut-F.displaySize[1])/2,He=Re+F.displaySize[1]),{image:F,top:Re,right:Be,bottom:He,left:Ze,collisionPadding:ie}}const kl=128;function $w(c,a){const{expression:d}=a;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new cr(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:P}=d;let z=0;for(;z<g.length&&g[z]<=c;)z++;z=Math.max(0,z-1);let F=z;for(;F<g.length&&g[F]<c+1;)F++;F=Math.min(g.length-1,F);const ie=g[z],le=g[F];return d.kind==="composite"?{kind:"composite",minZoom:ie,maxZoom:le,interpolationType:P}:{kind:"camera",minZoom:ie,maxZoom:le,minSize:d.evaluate(new cr(ie)),maxSize:d.evaluate(new cr(le)),interpolationType:P}}}class hc extends G{constructor(a,d,g,P){super(a,d),this.angle=g,P!==void 0&&(this.segment=P)}clone(){return new hc(this.x,this.y,this.angle,this.segment)}}function Uw(c,a,d,g,P){if(a.segment===void 0)return!0;let z=a,F=a.segment+1,ie=0;for(;ie>-d/2;){if(F--,F<0)return!1;ie-=c[F].dist(z),z=c[F]}ie+=c[F].dist(c[F+1]),F++;const le=[];let _e=0;for(;ie<d/2;){const Re=c[F],Be=c[F+1];if(!Be)return!1;let He=c[F-1].angleTo(Re)-Re.angleTo(Be);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),le.push({distance:ie,angleDelta:He}),_e+=He;ie-le[0].distance>g;)_e-=le.shift().angleDelta;if(_e>P)return!1;F++,ie+=Re.dist(Be)}return!0}function Vw(c){let a=0;for(let d=0;d<c.length-1;d++)a+=c[d].dist(c[d+1]);return a}function Gw(c,a,d){return c?.6*a*d:0}function Hw(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function wP(c,a,d,g,P,z){const F=Gw(d,P,z),ie=Hw(d,g)*z;let le=0;const _e=Vw(c)/2;for(let Re=0;Re<c.length-1;Re++){const Be=c[Re],He=c[Re+1],Ze=Be.dist(He);if(le+Ze>_e){const Xe=(_e-le)/Ze,ut=fr(Be.x,He.x,Xe),lt=fr(Be.y,He.y,Xe),bt=new hc(ut,lt,He.angleTo(Be),Re);return bt._round(),!F||Uw(c,bt,ie,F,a)?bt:void 0}le+=Ze}}function CP(c,a,d,g,P,z,F,ie,le){const _e=Gw(g,z,F),Re=Hw(g,P),Be=Re*F,He=c[0].x===0||c[0].x===le||c[0].y===0||c[0].y===le;return a-Be<a/4&&(a=Be+a/4),qw(c,He?a/2*ie%a:(Re/2+2*z)*F*ie%a,a,_e,d,Be,He,!1,le)}function qw(c,a,d,g,P,z,F,ie,le){const _e=z/2,Re=Vw(c);let Be=0,He=a-d,Ze=[];for(let Xe=0;Xe<c.length-1;Xe++){const ut=c[Xe],lt=c[Xe+1],bt=ut.dist(lt),Dt=lt.angleTo(ut);for(;He+d<Be+bt;){He+=d;const xt=(He-Be)/bt,Pt=fr(ut.x,lt.x,xt),$t=fr(ut.y,lt.y,xt);if(Pt>=0&&Pt<le&&$t>=0&&$t<le&&He-_e>=0&&He+_e<=Re){const Bt=new hc(Pt,$t,Dt,Xe);Bt._round(),g&&!Uw(c,Bt,z,g,P)||Ze.push(Bt)}}Be+=bt}return ie||Ze.length||F||(Ze=qw(c,Be/2,d,g,P,z,F,!0,le)),Ze}function Ww(c,a,d,g,P){const z=[];for(let F=0;F<c.length;F++){const ie=c[F];let le;for(let _e=0;_e<ie.length-1;_e++){let Re=ie[_e],Be=ie[_e+1];Re.x<a&&Be.x<a||(Re.x<a?Re=new G(a,Re.y+(a-Re.x)/(Be.x-Re.x)*(Be.y-Re.y))._round():Be.x<a&&(Be=new G(a,Re.y+(a-Re.x)/(Be.x-Re.x)*(Be.y-Re.y))._round()),Re.y<d&&Be.y<d||(Re.y<d?Re=new G(Re.x+(d-Re.y)/(Be.y-Re.y)*(Be.x-Re.x),d)._round():Be.y<d&&(Be=new G(Re.x+(d-Re.y)/(Be.y-Re.y)*(Be.x-Re.x),d)._round()),Re.x>=g&&Be.x>=g||(Re.x>=g?Re=new G(g,Re.y+(g-Re.x)/(Be.x-Re.x)*(Be.y-Re.y))._round():Be.x>=g&&(Be=new G(g,Re.y+(g-Re.x)/(Be.x-Re.x)*(Be.y-Re.y))._round()),Re.y>=P&&Be.y>=P||(Re.y>=P?Re=new G(Re.x+(P-Re.y)/(Be.y-Re.y)*(Be.x-Re.x),P)._round():Be.y>=P&&(Be=new G(Re.x+(P-Re.y)/(Be.y-Re.y)*(Be.x-Re.x),P)._round()),le&&Re.equals(le[le.length-1])||(le=[Re],z.push(le)),le.push(Be)))))}}return z}function Yw(c,a,d,g){const P=[],z=c.image,F=z.pixelRatio,ie=z.paddedRect.w-2,le=z.paddedRect.h-2,_e=c.right-c.left,Re=c.bottom-c.top,Be=z.stretchX||[[0,ie]],He=z.stretchY||[[0,le]],Ze=(Zt,ni)=>Zt+ni[1]-ni[0],Xe=Be.reduce(Ze,0),ut=He.reduce(Ze,0),lt=ie-Xe,bt=le-ut;let Dt=0,xt=Xe,Pt=0,$t=ut,Bt=0,xi=lt,Ti=0,ii=bt;if(z.content&&g){const Zt=z.content;Dt=Mg(Be,0,Zt[0]),Pt=Mg(He,0,Zt[1]),xt=Mg(Be,Zt[0],Zt[2]),$t=Mg(He,Zt[1],Zt[3]),Bt=Zt[0]-Dt,Ti=Zt[1]-Pt,xi=Zt[2]-Zt[0]-xt,ii=Zt[3]-Zt[1]-$t}const Kt=(Zt,ni,ei,Gt)=>{const Mi=Pg(Zt.stretch-Dt,xt,_e,c.left),ki=Ig(Zt.fixed-Bt,xi,Zt.stretch,Xe),hn=Pg(ni.stretch-Pt,$t,Re,c.top),ar=Ig(ni.fixed-Ti,ii,ni.stretch,ut),dr=Pg(ei.stretch-Dt,xt,_e,c.left),Yr=Ig(ei.fixed-Bt,xi,ei.stretch,Xe),qa=Pg(Gt.stretch-Pt,$t,Re,c.top),ws=Ig(Gt.fixed-Ti,ii,Gt.stretch,ut),$r=new G(Mi,hn),ns=new G(dr,hn),Cs=new G(dr,qa),Is=new G(Mi,qa),oa=new G(ki/F,ar/F),Ur=new G(Yr/F,ws/F),Ts=a*Math.PI/180;if(Ts){const la=Math.sin(Ts),ca=Math.cos(Ts),gr=[ca,-la,la,ca];$r._matMult(gr),ns._matMult(gr),Is._matMult(gr),Cs._matMult(gr)}const Ds=Zt.stretch+Zt.fixed,Xs=ni.stretch+ni.fixed;return{tl:$r,tr:ns,bl:Is,br:Cs,tex:{x:z.paddedRect.x+1+Ds,y:z.paddedRect.y+1+Xs,w:ei.stretch+ei.fixed-Ds,h:Gt.stretch+Gt.fixed-Xs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:oa,pixelOffsetBR:Ur,minFontScaleX:xi/F/_e,minFontScaleY:ii/F/Re,isSDF:d}};if(g&&(z.stretchX||z.stretchY)){const Zt=Zw(Be,lt,Xe),ni=Zw(He,bt,ut);for(let ei=0;ei<Zt.length-1;ei++){const Gt=Zt[ei],Mi=Zt[ei+1];for(let ki=0;ki<ni.length-1;ki++)P.push(Kt(Gt,ni[ki],Mi,ni[ki+1]))}}else P.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ie+1},{fixed:0,stretch:le+1}));return P}function Mg(c,a,d){let g=0;for(const P of c)g+=Math.max(a,Math.min(d,P[1]))-Math.max(a,Math.min(d,P[0]));return g}function Zw(c,a,d){const g=[{fixed:-1,stretch:0}];for(const[P,z]of c){const F=g[g.length-1];g.push({fixed:P-F.stretch,stretch:F.stretch}),g.push({fixed:P-F.stretch,stretch:F.stretch+(z-P)})}return g.push({fixed:a+1,stretch:d}),g}function Pg(c,a,d,g){return c/a*d+g}function Ig(c,a,d,g){return c-a*d/g}mi("Anchor",hc);class Dg{constructor(a,d,g,P,z,F,ie,le,_e,Re){if(this.boxStartIndex=a.length,_e){let Be=F.top,He=F.bottom;const Ze=F.collisionPadding;Ze&&(Be-=Ze[1],He+=Ze[3]);let Xe=He-Be;Xe>0&&(Xe=Math.max(10,Xe),this.circleDiameter=Xe)}else{let Be=F.top*ie-le[0],He=F.bottom*ie+le[2],Ze=F.left*ie-le[3],Xe=F.right*ie+le[1];const ut=F.collisionPadding;if(ut&&(Ze-=ut[0]*ie,Be-=ut[1]*ie,Xe+=ut[2]*ie,He+=ut[3]*ie),Re){const lt=new G(Ze,Be),bt=new G(Xe,Be),Dt=new G(Ze,He),xt=new G(Xe,He),Pt=Re*Math.PI/180;lt._rotate(Pt),bt._rotate(Pt),Dt._rotate(Pt),xt._rotate(Pt),Ze=Math.min(lt.x,bt.x,Dt.x,xt.x),Xe=Math.max(lt.x,bt.x,Dt.x,xt.x),Be=Math.min(lt.y,bt.y,Dt.y,xt.y),He=Math.max(lt.y,bt.y,Dt.y,xt.y)}a.emplaceBack(d.x,d.y,Ze,Be,Xe,He,g,P,z)}this.boxEndIndex=a.length}}class TP{constructor(a=[],d=SP){if(this.data=a,this.length=this.data.length,this.compare=d,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:d,compare:g}=this,P=d[a];for(;a>0;){const z=a-1>>1,F=d[z];if(g(P,F)>=0)break;d[a]=F,a=z}d[a]=P}_down(a){const{data:d,compare:g}=this,P=this.length>>1,z=d[a];for(;a<P;){let F=1+(a<<1),ie=d[F];const le=F+1;if(le<this.length&&g(d[le],ie)<0&&(F=le,ie=d[le]),g(ie,z)>=0)break;d[a]=ie,a=F}d[a]=z}}function SP(c,a){return c<a?-1:c>a?1:0}function EP(c,a=1,d=!1){let g=1/0,P=1/0,z=-1/0,F=-1/0;const ie=c[0];for(let Ze=0;Ze<ie.length;Ze++){const Xe=ie[Ze];(!Ze||Xe.x<g)&&(g=Xe.x),(!Ze||Xe.y<P)&&(P=Xe.y),(!Ze||Xe.x>z)&&(z=Xe.x),(!Ze||Xe.y>F)&&(F=Xe.y)}const le=Math.min(z-g,F-P);let _e=le/2;const Re=new TP([],kP);if(le===0)return new G(g,P);for(let Ze=g;Ze<z;Ze+=le)for(let Xe=P;Xe<F;Xe+=le)Re.push(new sh(Ze+_e,Xe+_e,_e,c));let Be=function(Ze){let Xe=0,ut=0,lt=0;const bt=Ze[0];for(let Dt=0,xt=bt.length,Pt=xt-1;Dt<xt;Pt=Dt++){const $t=bt[Dt],Bt=bt[Pt],xi=$t.x*Bt.y-Bt.x*$t.y;ut+=($t.x+Bt.x)*xi,lt+=($t.y+Bt.y)*xi,Xe+=3*xi}return new sh(ut/Xe,lt/Xe,0,Ze)}(c),He=Re.length;for(;Re.length;){const Ze=Re.pop();(Ze.d>Be.d||!Be.d)&&(Be=Ze,d&&console.log("found best %d after %d probes",Math.round(1e4*Ze.d)/1e4,He)),Ze.max-Be.d<=a||(_e=Ze.h/2,Re.push(new sh(Ze.p.x-_e,Ze.p.y-_e,_e,c)),Re.push(new sh(Ze.p.x+_e,Ze.p.y-_e,_e,c)),Re.push(new sh(Ze.p.x-_e,Ze.p.y+_e,_e,c)),Re.push(new sh(Ze.p.x+_e,Ze.p.y+_e,_e,c)),He+=4)}return d&&(console.log(`num probes: ${He}`),console.log(`best distance: ${Be.d}`)),Be.p}function kP(c,a){return a.max-c.max}function sh(c,a,d,g){this.p=new G(c,a),this.h=d,this.d=function(P,z){let F=!1,ie=1/0;for(let le=0;le<z.length;le++){const _e=z[le];for(let Re=0,Be=_e.length,He=Be-1;Re<Be;He=Re++){const Ze=_e[Re],Xe=_e[He];Ze.y>P.y!=Xe.y>P.y&&P.x<(Xe.x-Ze.x)*(P.y-Ze.y)/(Xe.y-Ze.y)+Ze.x&&(F=!F),ie=Math.min(ie,nw(P,Ze,Xe))}}return(F?1:-1)*Math.sqrt(ie)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}const V0=Number.POSITIVE_INFINITY;function Xw(c,a){return a[1]!==V0?function(d,g,P){let z=0,F=0;switch(g=Math.abs(g),P=Math.abs(P),d){case"top-right":case"top-left":case"top":F=P-7;break;case"bottom-right":case"bottom-left":case"bottom":F=7-P}switch(d){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,F]}(c,a[0],a[1]):function(d,g){let P=0,z=0;g<0&&(g=0);const F=g/Math.sqrt(2);switch(d){case"top-right":case"top-left":z=F-7;break;case"bottom-right":case"bottom-left":z=7-F;break;case"bottom":z=7-g;break;case"top":z=g-7}switch(d){case"top-right":case"bottom-right":P=-F;break;case"top-left":case"bottom-left":P=F;break;case"left":P=g;break;case"right":P=-g}return[P,z]}(c,a[0])}function G0(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function AP(c,a,d,g,P,z,F,ie,le,_e,Re){let Be=z.textMaxSize.evaluate(a,{});Be===void 0&&(Be=F);const He=c.layers[0].layout,Ze=He.get("icon-offset").evaluate(a,{},Re),Xe=Qw(d.horizontal),ut=F/24,lt=c.tilePixelRatio*ut,bt=c.tilePixelRatio*Be/24,Dt=c.tilePixelRatio*ie,xt=c.tilePixelRatio*He.get("symbol-spacing"),Pt=He.get("text-padding")*c.tilePixelRatio,$t=function(Gt,Mi,ki,hn=1){const ar=Gt.get("icon-padding").evaluate(Mi,{},ki),dr=ar&&ar.values;return[dr[0]*hn,dr[1]*hn,dr[2]*hn,dr[3]*hn]}(He,a,Re,c.tilePixelRatio),Bt=He.get("text-max-angle")/180*Math.PI,xi=He.get("text-rotation-alignment")!=="viewport"&&He.get("symbol-placement")!=="point",Ti=He.get("icon-rotation-alignment")==="map"&&He.get("symbol-placement")!=="point",ii=He.get("symbol-placement"),Kt=xt/2,Zt=He.get("icon-text-fit");let ni;g&&Zt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(ni=Bw(g,d.vertical,Zt,He.get("icon-text-fit-padding"),Ze,ut)),Xe&&(g=Bw(g,Xe,Zt,He.get("icon-text-fit-padding"),Ze,ut)));const ei=(Gt,Mi)=>{Mi.x<0||Mi.x>=Wr||Mi.y<0||Mi.y>=Wr||function(ki,hn,ar,dr,Yr,qa,ws,$r,ns,Cs,Is,oa,Ur,Ts,Ds,Xs,la,ca,gr,rs,gn,Pa,Ss,Rs,oo){const _o=ki.addToLineVertexArray(hn,ar);let wo,Al,lo,Wa,ua=0,Ml=0,nf=0,f2=0,ev=-1,tv=-1;const Pl={};let m2=Br.exports(""),iv=0,nv=0;if($r._unevaluatedLayout.getValue("text-radial-offset")===void 0?[iv,nv]=$r.layout.get("text-offset").evaluate(gn,{},Rs).map(da=>da*hs):(iv=$r.layout.get("text-radial-offset").evaluate(gn,{},Rs)*hs,nv=V0),ki.allowVerticalPlacement&&dr.vertical){const da=$r.layout.get("text-rotate").evaluate(gn,{},Rs)+90;lo=new Dg(ns,hn,Cs,Is,oa,dr.vertical,Ur,Ts,Ds,da),ws&&(Wa=new Dg(ns,hn,Cs,Is,oa,ws,la,ca,Ds,da))}if(Yr){const da=$r.layout.get("icon-rotate").evaluate(gn,{}),Go=$r.layout.get("icon-text-fit")!=="none",rf=Yw(Yr,da,Ss,Go),sf=ws?Yw(ws,da,Ss,Go):void 0;Al=new Dg(ns,hn,Cs,Is,oa,Yr,la,ca,!1,da),ua=4*rf.length;const x2=ki.iconSizeData;let Mu=null;x2.kind==="source"?(Mu=[kl*$r.layout.get("icon-size").evaluate(gn,{})],Mu[0]>pc&&T(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):x2.kind==="composite"&&(Mu=[kl*Pa.compositeIconSizes[0].evaluate(gn,{},Rs),kl*Pa.compositeIconSizes[1].evaluate(gn,{},Rs)],(Mu[0]>pc||Mu[1]>pc)&&T(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ki.addSymbols(ki.icon,rf,Mu,rs,gr,gn,r.WritingMode.none,hn,_o.lineStartIndex,_o.lineLength,-1,Rs),ev=ki.icon.placedSymbolArray.length-1,sf&&(Ml=4*sf.length,ki.addSymbols(ki.icon,sf,Mu,rs,gr,gn,r.WritingMode.vertical,hn,_o.lineStartIndex,_o.lineLength,-1,Rs),tv=ki.icon.placedSymbolArray.length-1)}const g2=Object.keys(dr.horizontal);for(const da of g2){const Go=dr.horizontal[da];if(!wo){m2=Br.exports(Go.text);const sf=$r.layout.get("text-rotate").evaluate(gn,{},Rs);wo=new Dg(ns,hn,Cs,Is,oa,Go,Ur,Ts,Ds,sf)}const rf=Go.positionedLines.length===1;if(nf+=Kw(ki,hn,Go,qa,$r,Ds,gn,Xs,_o,dr.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,rf?g2:[da],Pl,ev,Pa,Rs),rf)break}dr.vertical&&(f2+=Kw(ki,hn,dr.vertical,qa,$r,Ds,gn,Xs,_o,r.WritingMode.vertical,["vertical"],Pl,tv,Pa,Rs));const $P=wo?wo.boxStartIndex:ki.collisionBoxArray.length,UP=wo?wo.boxEndIndex:ki.collisionBoxArray.length,VP=lo?lo.boxStartIndex:ki.collisionBoxArray.length,GP=lo?lo.boxEndIndex:ki.collisionBoxArray.length,HP=Al?Al.boxStartIndex:ki.collisionBoxArray.length,qP=Al?Al.boxEndIndex:ki.collisionBoxArray.length,WP=Wa?Wa.boxStartIndex:ki.collisionBoxArray.length,YP=Wa?Wa.boxEndIndex:ki.collisionBoxArray.length;let Co=-1;const jg=(da,Go)=>da&&da.circleDiameter?Math.max(da.circleDiameter,Go):Go;Co=jg(wo,Co),Co=jg(lo,Co),Co=jg(Al,Co),Co=jg(Wa,Co);const y2=Co>-1?1:0;y2&&(Co*=oo/hs),ki.glyphOffsetArray.length>=ah.MAX_GLYPHS&&T("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gn.sortKey!==void 0&&ki.addToSortKeyRanges(ki.symbolInstances.length,gn.sortKey),ki.symbolInstances.emplaceBack(hn.x,hn.y,Pl.right>=0?Pl.right:-1,Pl.center>=0?Pl.center:-1,Pl.left>=0?Pl.left:-1,Pl.vertical||-1,ev,tv,m2,$P,UP,VP,GP,HP,qP,WP,YP,Cs,nf,f2,ua,Ml,y2,0,Ur,iv,nv,Co)}(c,Mi,Gt,d,g,P,ni,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,lt,[Pt,Pt,Pt,Pt],xi,le,Dt,$t,Ti,Ze,a,z,_e,Re,F)};if(ii==="line")for(const Gt of Ww(a.geometry,0,0,Wr,Wr)){const Mi=CP(Gt,xt,Bt,d.vertical||Xe,g,24,bt,c.overscaling,Wr);for(const ki of Mi){const hn=Xe;hn&&MP(c,hn.text,Kt,ki)||ei(Gt,ki)}}else if(ii==="line-center"){for(const Gt of a.geometry)if(Gt.length>1){const Mi=wP(Gt,Bt,d.vertical||Xe,g,24,bt);Mi&&ei(Gt,Mi)}}else if(a.type==="Polygon")for(const Gt of I0(a.geometry,0)){const Mi=EP(Gt,16);ei(Gt[0],new hc(Mi.x,Mi.y,0))}else if(a.type==="LineString")for(const Gt of a.geometry)ei(Gt,new hc(Gt[0].x,Gt[0].y,0));else if(a.type==="Point")for(const Gt of a.geometry)for(const Mi of Gt)ei([Mi],new hc(Mi.x,Mi.y,0))}const pc=32640;function Kw(c,a,d,g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe){const ut=function(Dt,xt,Pt,$t,Bt,xi,Ti,ii){const Kt=$t.layout.get("text-rotate").evaluate(xi,{})*Math.PI/180,Zt=[];for(const ni of xt.positionedLines)for(const ei of ni.positionedGlyphs){if(!ei.rect)continue;const Gt=ei.rect||{};let Mi=4,ki=!0,hn=1,ar=0;const dr=(Bt||ii)&&ei.vertical,Yr=ei.metrics.advance*ei.scale/2;if(ii&&xt.verticalizable){const gr=(ei.scale-1)*hs,rs=(hs-ei.metrics.width*ei.scale)/2;ar=ni.lineOffset/2-(ei.imageName?-rs:gr)}if(ei.imageName){const gr=Ti[ei.imageName];ki=gr.sdf,hn=gr.pixelRatio,Mi=1/hn}const qa=Bt?[ei.x+Yr,ei.y]:[0,0];let ws=Bt?[0,0]:[ei.x+Yr+Pt[0],ei.y+Pt[1]-ar],$r=[0,0];dr&&($r=ws,ws=[0,0]);const ns=(ei.metrics.left-Mi)*ei.scale-Yr+ws[0],Cs=(-ei.metrics.top-Mi)*ei.scale+ws[1],Is=ns+Gt.w*ei.scale/hn,oa=Cs+Gt.h*ei.scale/hn,Ur=new G(ns,Cs),Ts=new G(Is,Cs),Ds=new G(ns,oa),Xs=new G(Is,oa);if(dr){const gr=new G(-Yr,Yr-Eg),rs=-Math.PI/2,gn=12-Yr,Pa=new G(22-gn,-(ei.imageName?gn:0)),Ss=new G(...$r);Ur._rotateAround(rs,gr)._add(Pa)._add(Ss),Ts._rotateAround(rs,gr)._add(Pa)._add(Ss),Ds._rotateAround(rs,gr)._add(Pa)._add(Ss),Xs._rotateAround(rs,gr)._add(Pa)._add(Ss)}if(Kt){const gr=Math.sin(Kt),rs=Math.cos(Kt),gn=[rs,-gr,gr,rs];Ur._matMult(gn),Ts._matMult(gn),Ds._matMult(gn),Xs._matMult(gn)}const la=new G(0,0),ca=new G(0,0);Zt.push({tl:Ur,tr:Ts,bl:Ds,br:Xs,tex:Gt,writingMode:xt.writingMode,glyphOffset:qa,sectionIndex:ei.sectionIndex,isSDF:ki,pixelOffsetTL:la,pixelOffsetBR:ca,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,d,ie,P,z,F,g,c.allowVerticalPlacement),lt=c.textSizeData;let bt=null;lt.kind==="source"?(bt=[kl*P.layout.get("text-size").evaluate(F,{})],bt[0]>pc&&T(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(bt=[kl*Ze.compositeTextSizes[0].evaluate(F,{},Xe),kl*Ze.compositeTextSizes[1].evaluate(F,{},Xe)],(bt[0]>pc||bt[1]>pc)&&T(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ut,bt,ie,z,F,_e,a,le.lineStartIndex,le.lineLength,He,Xe);for(const Dt of Re)Be[Dt]=c.text.placedSymbolArray.length-1;return 4*ut.length}function Qw(c){for(const a in c)return c[a];return null}function MP(c,a,d,g){const P=c.compareText;if(a in P){const z=P[a];for(let F=z.length-1;F>=0;F--)if(g.dist(z[F])<d)return!0}else P[a]=[];return P[a].push(g),!1}const PP=uc.VectorTileFeature.types,IP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rg(c,a,d,g,P,z,F,ie,le,_e,Re,Be,He){const Ze=ie?Math.min(pc,Math.round(ie[0])):0,Xe=ie?Math.min(pc,Math.round(ie[1])):0;c.emplaceBack(a,d,Math.round(32*g),Math.round(32*P),z,F,(Ze<<1)+(le?1:0),Xe,16*_e,16*Re,256*Be,256*He)}function H0(c,a,d){c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d)}function DP(c){for(const a of c.sections)if(y0(a.text))return!0;return!1}class q0{constructor(a){this.layoutVertexArray=new aa,this.indexArray=new ds,this.programConfigurations=a,this.segments=new Mn,this.dynamicLayoutVertexArray=new ao,this.opacityVertexArray=new Ba,this.placedSymbolArray=new Ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,d,g,P){this.isEmpty()||(g&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,tP.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,iP.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,IP,!0),this.opacityVertexBuffer.itemSize=1),(g||P)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mi("SymbolBuffers",q0);class W0{constructor(a,d,g){this.layoutVertexArray=new a,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Mn,this.collisionVertexArray=new Cl}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,nP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mi("CollisionBuffers",W0);class ah{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(F=>F.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=S0([]),this.placementViewportMatrix=S0([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$w(this.zoom,d["text-size"]),this.iconSizeData=$w(this.zoom,d["icon-size"]);const g=this.layers[0].layout,P=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=Z0(g,"text-overlap","text-allow-overlap")!=="never"||Z0(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!P.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(F=>r.WritingMode[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=a.sourceID}createArrays(){this.text=new q0(new Tu(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new q0(new Tu(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new oi,this.lineVertexArray=new Xt,this.symbolInstances=new Nt}calculateGlyphDependencies(a,d,g,P,z){for(let F=0;F<a.length;F++)if(d[a.charCodeAt(F)]=!0,(g||P)&&z){const ie=Qp[a.charAt(F)];ie&&(d[ie.charCodeAt(0)]=!0)}}populate(a,d,g){const P=this.layers[0],z=P.layout,F=z.get("text-font"),ie=z.get("text-field"),le=z.get("icon-image"),_e=(ie.value.kind!=="constant"||ie.value.value instanceof ct&&!ie.value.value.isEmpty()||ie.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Re=le.value.kind!=="constant"||!!le.value.value||Object.keys(le.parameters).length>0,Be=z.get("symbol-sort-key");if(this.features=[],!_e&&!Re)return;const He=d.iconDependencies,Ze=d.glyphDependencies,Xe=d.availableImages,ut=new cr(this.zoom);for(const{feature:lt,id:bt,index:Dt,sourceLayerIndex:xt}of a){const Pt=P._featureFilter.needGeometry,$t=Eu(lt,Pt);if(!P._featureFilter.filter(ut,$t,g))continue;let Bt,xi;if(Pt||($t.geometry=Su(lt)),_e){const ii=P.getValueAndResolveTokens("text-field",$t,g,Xe),Kt=ct.factory(ii);DP(Kt)&&(this.hasRTLText=!0),(!this.hasRTLText||Op()==="unavailable"||this.hasRTLText&&Aa.isParsed())&&(Bt=sP(Kt,P,$t))}if(Re){const ii=P.getValueAndResolveTokens("icon-image",$t,g,Xe);xi=ii instanceof rt?ii:rt.fromString(ii)}if(!Bt&&!xi)continue;const Ti=this.sortFeaturesByKey?Be.evaluate($t,{},g):void 0;if(this.features.push({id:bt,text:Bt,icon:xi,index:Dt,sourceLayerIndex:xt,geometry:$t.geometry,properties:lt.properties,type:PP[lt.type],sortKey:Ti}),xi&&(He[xi.name]=!0),Bt){const ii=F.evaluate($t,{},g).join(","),Kt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const Zt of Bt.sections)if(Zt.image)He[Zt.image.name]=!0;else{const ni=Rp(Bt.toString()),ei=Zt.fontStack||ii,Gt=Ze[ei]=Ze[ei]||{};this.calculateGlyphDependencies(Zt.text,Gt,Kt,this.allowVerticalPlacement,ni)}}}z.get("symbol-placement")==="line"&&(this.features=function(lt){const bt={},Dt={},xt=[];let Pt=0;function $t(ii){xt.push(lt[ii]),Pt++}function Bt(ii,Kt,Zt){const ni=Dt[ii];return delete Dt[ii],Dt[Kt]=ni,xt[ni].geometry[0].pop(),xt[ni].geometry[0]=xt[ni].geometry[0].concat(Zt[0]),ni}function xi(ii,Kt,Zt){const ni=bt[Kt];return delete bt[Kt],bt[ii]=ni,xt[ni].geometry[0].shift(),xt[ni].geometry[0]=Zt[0].concat(xt[ni].geometry[0]),ni}function Ti(ii,Kt,Zt){const ni=Zt?Kt[0][Kt[0].length-1]:Kt[0][0];return`${ii}:${ni.x}:${ni.y}`}for(let ii=0;ii<lt.length;ii++){const Kt=lt[ii],Zt=Kt.geometry,ni=Kt.text?Kt.text.toString():null;if(!ni){$t(ii);continue}const ei=Ti(ni,Zt),Gt=Ti(ni,Zt,!0);if(ei in Dt&&Gt in bt&&Dt[ei]!==bt[Gt]){const Mi=xi(ei,Gt,Zt),ki=Bt(ei,Gt,xt[Mi].geometry);delete bt[ei],delete Dt[Gt],Dt[Ti(ni,xt[ki].geometry,!0)]=ki,xt[Mi].geometry=null}else ei in Dt?Bt(ei,Gt,Zt):Gt in bt?xi(ei,Gt,Zt):($t(ii),bt[ei]=Pt-1,Dt[Gt]=Pt-1)}return xt.filter(ii=>ii.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,bt)=>lt.sortKey-bt.sortKey)}update(a,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(a,d,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,d){const g=this.lineVertexArray.length;if(a.segment!==void 0){let P=a.dist(d[a.segment+1]),z=a.dist(d[a.segment]);const F={};for(let ie=a.segment+1;ie<d.length;ie++)F[ie]={x:d[ie].x,y:d[ie].y,tileUnitDistanceFromAnchor:P},ie<d.length-1&&(P+=d[ie+1].dist(d[ie]));for(let ie=a.segment||0;ie>=0;ie--)F[ie]={x:d[ie].x,y:d[ie].y,tileUnitDistanceFromAnchor:z},ie>0&&(z+=d[ie-1].dist(d[ie]));for(let ie=0;ie<d.length;ie++){const le=F[ie];this.lineVertexArray.emplaceBack(le.x,le.y,le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(a,d,g,P,z,F,ie,le,_e,Re,Be,He){const Ze=a.indexArray,Xe=a.layoutVertexArray,ut=a.segments.prepareSegment(4*d.length,Xe,Ze,this.canOverlap?F.sortKey:void 0),lt=this.glyphOffsetArray.length,bt=ut.vertexLength,Dt=this.allowVerticalPlacement&&ie===r.WritingMode.vertical?Math.PI/2:0,xt=F.text&&F.text.sections;for(let Pt=0;Pt<d.length;Pt++){const{tl:$t,tr:Bt,bl:xi,br:Ti,tex:ii,pixelOffsetTL:Kt,pixelOffsetBR:Zt,minFontScaleX:ni,minFontScaleY:ei,glyphOffset:Gt,isSDF:Mi,sectionIndex:ki}=d[Pt],hn=ut.vertexLength,ar=Gt[1];Rg(Xe,le.x,le.y,$t.x,ar+$t.y,ii.x,ii.y,g,Mi,Kt.x,Kt.y,ni,ei),Rg(Xe,le.x,le.y,Bt.x,ar+Bt.y,ii.x+ii.w,ii.y,g,Mi,Zt.x,Kt.y,ni,ei),Rg(Xe,le.x,le.y,xi.x,ar+xi.y,ii.x,ii.y+ii.h,g,Mi,Kt.x,Zt.y,ni,ei),Rg(Xe,le.x,le.y,Ti.x,ar+Ti.y,ii.x+ii.w,ii.y+ii.h,g,Mi,Zt.x,Zt.y,ni,ei),H0(a.dynamicLayoutVertexArray,le,Dt),Ze.emplaceBack(hn,hn+1,hn+2),Ze.emplaceBack(hn+1,hn+2,hn+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gt[0]),Pt!==d.length-1&&ki===d[Pt+1].sectionIndex||a.programConfigurations.populatePaintArrays(Xe.length,F,F.index,{},He,xt&&xt[ki])}a.placedSymbolArray.emplaceBack(le.x,le.y,lt,this.glyphOffsetArray.length-lt,bt,_e,Re,le.segment,g?g[0]:0,g?g[1]:0,P[0],P[1],ie,0,!1,0,Be)}_addCollisionDebugVertex(a,d,g,P,z,F){return d.emplaceBack(0,0),a.emplaceBack(g.x,g.y,P,z,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(a,d,g,P,z,F,ie){const le=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),_e=le.vertexLength,Re=z.layoutVertexArray,Be=z.collisionVertexArray,He=ie.anchorX,Ze=ie.anchorY;this._addCollisionDebugVertex(Re,Be,F,He,Ze,new G(a,d)),this._addCollisionDebugVertex(Re,Be,F,He,Ze,new G(g,d)),this._addCollisionDebugVertex(Re,Be,F,He,Ze,new G(g,P)),this._addCollisionDebugVertex(Re,Be,F,He,Ze,new G(a,P)),le.vertexLength+=4;const Xe=z.indexArray;Xe.emplaceBack(_e,_e+1),Xe.emplaceBack(_e+1,_e+2),Xe.emplaceBack(_e+2,_e+3),Xe.emplaceBack(_e+3,_e),le.primitiveLength+=4}addDebugCollisionBoxes(a,d,g,P){for(let z=a;z<d;z++){const F=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,P?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new W0($a,kw.members,Ua),this.iconCollisionBox=new W0($a,kw.members,Ua);for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(a,d,g,P,z,F,ie,le,_e){const Re={};for(let Be=d;Be<g;Be++){const He=a.get(Be);Re.textBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},Re.textFeatureIndex=He.featureIndex;break}for(let Be=P;Be<z;Be++){const He=a.get(Be);Re.verticalTextBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},Re.verticalTextFeatureIndex=He.featureIndex;break}for(let Be=F;Be<ie;Be++){const He=a.get(Be);Re.iconBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},Re.iconFeatureIndex=He.featureIndex;break}for(let Be=le;Be<_e;Be++){const He=a.get(Be);Re.verticalIconBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},Re.verticalIconFeatureIndex=He.featureIndex;break}return Re}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,d){const g=a.placedSymbolArray.get(d),P=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<P;z+=4)a.indexArray.emplaceBack(z,z+1,z+2),a.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(a),g=Math.cos(a),P=[],z=[],F=[];for(let ie=0;ie<this.symbolInstances.length;++ie){F.push(ie);const le=this.symbolInstances.get(ie);P.push(0|Math.round(d*le.anchorX+g*le.anchorY)),z.push(le.featureIndex)}return F.sort((ie,le)=>P[ie]-P[le]||z[le]-z[ie]),F}addToSortKeyRanges(a,d){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const g=this.symbolInstances.get(d);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((P,z,F)=>{P>=0&&F.indexOf(P)===z&&this.addIndicesForPlacedSymbol(this.text,P)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}mi("SymbolBucket",ah,{omit:["layers","collisionBoxArray","features","compareText"]}),ah.MAX_GLYPHS=65535,ah.addDynamicAttributes=H0;const RP=new qr({"symbol-placement":new Ei(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Ei(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ei(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ei(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ei(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ei(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ei(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ei(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ei(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Ei(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ei(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Pe.layout_symbol["icon-image"]),"icon-rotate":new Di(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Di(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Ei(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Di(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ei(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ei(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ei(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Pe.layout_symbol["text-field"]),"text-font":new Di(Pe.layout_symbol["text-font"]),"text-size":new Di(Pe.layout_symbol["text-size"]),"text-max-width":new Di(Pe.layout_symbol["text-max-width"]),"text-line-height":new Ei(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Di(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ei(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Ei(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Ei(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Pe.layout_symbol["text-rotate"]),"text-padding":new Ei(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Ei(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Di(Pe.layout_symbol["text-transform"]),"text-offset":new Di(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Ei(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Ei(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Ei(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Ei(Pe.layout_symbol["text-optional"])});var Y0={paint:new qr({"icon-opacity":new Di(Pe.paint_symbol["icon-opacity"]),"icon-color":new Di(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Di(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Ei(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ei(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Pe.paint_symbol["text-opacity"]),"text-color":new Di(Pe.paint_symbol["text-color"],{runtimeType:ai,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Di(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Ei(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Ei(Pe.paint_symbol["text-translate-anchor"])}),layout:RP};class Jw{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Lt,this.defaultValue=a}evaluate(a){if(a.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(a.formattedSection))return d.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mi("FormatSectionOverride",Jw,{omit:["defaultValue"]});class Lg extends qs{constructor(a){super(a,Y0)}recalculate(a,d){if(super.recalculate(a,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const P=[];for(const z of g)P.indexOf(z)<0&&P.push(z);this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,d,g,P){const z=this.layout.get(a).evaluate(d,{},g,P),F=this._unevaluatedLayout._values[a];return F.isDataDriven()||lu(F.value)||!z?z:function(ie,le){return le.replace(/{([^{}]+)}/g,(_e,Re)=>Re in ie?String(ie[Re]):"")}(d.properties,z)}createBucket(a){return new ah(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of Y0.paint.overridableProperties){if(!Lg.hasPaintOverride(this.layout,a))continue;const d=this.paint.get(a),g=new Jw(d),P=new kp(g,d.property.specification);let z=null;z=d.value.kind==="constant"||d.value.kind==="source"?new Rd("source",P):new uu("composite",P,d.value.zoomStops),this.paint._values[a]=new so(d.property,z,d.parameters)}}_handleOverridablePaintPropertyUpdate(a,d,g){return!(!this.layout||d.isDataDriven()||g.isDataDriven())&&Lg.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,d){const g=a.get("text-field"),P=Y0.paint.properties[d];let z=!1;const F=ie=>{for(const le of ie)if(P.overrides&&P.overrides.hasOverride(le))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof ct)F(g.value.value.sections);else if(g.value.kind==="source"){const ie=_e=>{z||(_e instanceof li&&zt(_e.value)===Qi?F(_e.value.sections):_e instanceof Dd?F(_e.sections):_e.eachChild(ie))},le=g.value;le._styleExpression&&ie(le._styleExpression.expression)}return z}}function Z0(c,a,d){let g="never";const P=c.get(a);return P?g=P:c.get(d)&&(g="always"),g}var LP={paint:new qr({"background-color":new Ei(Pe.paint_background["background-color"]),"background-pattern":new bu(Pe.paint_background["background-pattern"]),"background-opacity":new Ei(Pe.paint_background["background-opacity"])})},NP={paint:new qr({"raster-opacity":new Ei(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ei(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ei(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ei(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Ei(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Ei(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Ei(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Ei(Pe.paint_raster["raster-fade-duration"])})};class zP extends qs{constructor(a){super(a,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const jP={circle:class extends qs{constructor(c){super(c,mM)}createBucket(c){return new w0(c)}queryRadius(c){const a=c;return Vp("circle-radius",this,a)+Vp("circle-stroke-width",this,a)+yg(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,d,g,P,z,F,ie){const le=xg(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,F),_e=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),Re=this.paint.get("circle-pitch-alignment")==="map",Be=Re?le:function(Ze,Xe){return Ze.map(ut=>uw(ut,Xe))}(le,ie),He=Re?_e*F:_e;for(const Ze of g)for(const Xe of Ze){const ut=Re?Xe:uw(Xe,ie);let lt=He;const bt=vg([],[Xe.x,Xe.y,0,1],ie);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=bt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=z.cameraToCenterDistance/bt[3]),uM(Be,ut,lt))return!0}return!1}},heatmap:class extends qs{constructor(c){super(c,yM),this._updateColorRamp()}createBucket(c){return new dw(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends qs{constructor(c){super(c,xM)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends qs{constructor(c){super(c,RM)}recalculate(c,a){super.recalculate(c,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new L0(c)}queryRadius(){return yg(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,d,g,P,z,F){return iw(xg(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,F),g)}isTileClipped(){return!0}},"fill-extrusion":class extends qs{constructor(c){super(c,WM)}createBucket(c){return new z0(c)}queryRadius(){return yg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,a,d,g,P,z,F,ie){const le=xg(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,F),_e=this.paint.get("fill-extrusion-height").evaluate(a,d),Re=this.paint.get("fill-extrusion-base").evaluate(a,d),Be=function(Ze,Xe,ut,lt){const bt=[];for(const Dt of Ze){const xt=[Dt.x,Dt.y,0,1];vg(xt,xt,Xe),bt.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return bt}(le,ie),He=function(Ze,Xe,ut,lt){const bt=[],Dt=[],xt=lt[8]*Xe,Pt=lt[9]*Xe,$t=lt[10]*Xe,Bt=lt[11]*Xe,xi=lt[8]*ut,Ti=lt[9]*ut,ii=lt[10]*ut,Kt=lt[11]*ut;for(const Zt of Ze){const ni=[],ei=[];for(const Gt of Zt){const Mi=Gt.x,ki=Gt.y,hn=lt[0]*Mi+lt[4]*ki+lt[12],ar=lt[1]*Mi+lt[5]*ki+lt[13],dr=lt[2]*Mi+lt[6]*ki+lt[14],Yr=lt[3]*Mi+lt[7]*ki+lt[15],qa=dr+$t,ws=Yr+Bt,$r=hn+xi,ns=ar+Ti,Cs=dr+ii,Is=Yr+Kt,oa=new G((hn+xt)/ws,(ar+Pt)/ws);oa.z=qa/ws,ni.push(oa);const Ur=new G($r/Is,ns/Is);Ur.z=Cs/Is,ei.push(Ur)}bt.push(ni),Dt.push(ei)}return[bt,Dt]}(g,Re,_e,ie);return function(Ze,Xe,ut){let lt=1/0;iw(ut,Xe)&&(lt=ww(ut,Xe[0]));for(let bt=0;bt<Xe.length;bt++){const Dt=Xe[bt],xt=Ze[bt];for(let Pt=0;Pt<Dt.length-1;Pt++){const $t=Dt[Pt],Bt=[$t,Dt[Pt+1],xt[Pt+1],xt[Pt],$t];tw(ut,Bt)&&(lt=Math.min(lt,ww(ut,Bt)))}}return lt!==1/0&&lt}(He[0],He[1],Be)}},line:class extends qs{constructor(c){super(c,Tw),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ru,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=Sw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new j0(c)}queryRadius(c){const a=c,d=Ew(Vp("line-width",this,a),Vp("line-gap-width",this,a)),g=Vp("line-offset",this,a);return d/2+Math.abs(g)+yg(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,d,g,P,z,F){const ie=xg(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,F),le=F/2*Ew(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),_e=this.paint.get("line-offset").evaluate(a,d);return _e&&(g=function(Re,Be){const He=[];for(let Ze=0;Ze<Re.length;Ze++){const Xe=Re[Ze],ut=[];for(let lt=0;lt<Xe.length;lt++){const bt=Xe[lt-1],Dt=Xe[lt],xt=Xe[lt+1],Pt=lt===0?new G(0,0):Dt.sub(bt)._unit()._perp(),$t=lt===Xe.length-1?new G(0,0):xt.sub(Dt)._unit()._perp(),Bt=Pt._add($t)._unit(),xi=Bt.x*$t.x+Bt.y*$t.y;xi!==0&&Bt._mult(1/xi),ut.push(Bt._mult(Be)._add(Dt))}He.push(ut)}return He}(g,_e*F)),function(Re,Be,He){for(let Ze=0;Ze<Be.length;Ze++){const Xe=Be[Ze];if(Re.length>=3){for(let ut=0;ut<Xe.length;ut++)if(Jd(Re,Xe[ut]))return!0}if(dM(Re,Xe,He))return!0}return!1}(ie,g,le)}isTileClipped(){return!0}},symbol:Lg,background:class extends qs{constructor(c){super(c,LP)}},raster:class extends qs{constructor(c){super(c,NP)}}};class OP{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const e2=63710088e-1;class Cr{constructor(a,d){if(isNaN(a)||isNaN(d))throw new Error(`Invalid LngLat object: (${a}, ${d})`);if(this.lng=+a,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cr(_(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const d=Math.PI/180,g=this.lat*d,P=a.lat*d,z=Math.sin(g)*Math.sin(P)+Math.cos(g)*Math.cos(P)*Math.cos((a.lng-this.lng)*d);return e2*Math.acos(Math.min(z,1))}toBounds(a=0){const d=360*a/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new Au(new Cr(this.lng-g,this.lat-d),new Cr(this.lng+g,this.lat+d))}static convert(a){if(a instanceof Cr)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Cr(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Cr(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Au{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof Cr?new Cr(a.lng,a.lat):Cr.convert(a),this}setSouthWest(a){return this._sw=a instanceof Cr?new Cr(a.lng,a.lat):Cr.convert(a),this}extend(a){const d=this._sw,g=this._ne;let P,z;if(a instanceof Cr)P=a,z=a;else{if(!(a instanceof Au))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Au.convert(a)):this.extend(Cr.convert(a)):this;if(P=a._sw,z=a._ne,!P||!z)return this}return d||g?(d.lng=Math.min(P.lng,d.lng),d.lat=Math.min(P.lat,d.lat),g.lng=Math.max(z.lng,g.lng),g.lat=Math.max(z.lat,g.lat)):(this._sw=new Cr(P.lng,P.lat),this._ne=new Cr(z.lng,z.lat)),this}getCenter(){return new Cr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Cr(this.getWest(),this.getNorth())}getSouthEast(){return new Cr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:g}=Cr.convert(a);let P=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&P}static convert(a){return a instanceof Au?a:a&&new Au(a)}}const t2=2*Math.PI*e2;function i2(c){return t2*Math.cos(c*Math.PI/180)}function n2(c){return(180+c)/360}function r2(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function s2(c,a){return c/i2(a)}function X0(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Ng{constructor(a,d,g=0){this.x=+a,this.y=+d,this.z=+g}static fromLngLat(a,d=0){const g=Cr.convert(a);return new Ng(n2(g.lng),r2(g.lat),s2(d,g.lat))}toLngLat(){return new Cr(360*this.x-180,X0(this.y))}toAltitude(){return this.z*i2(X0(this.y))}meterInMercatorCoordinateUnits(){return 1/t2*(a=X0(this.y),1/Math.cos(a*Math.PI/180));var a}}function a2(c,a,d){var g=2*Math.PI*6378137/256/Math.pow(2,d);return[c*g-2*Math.PI*6378137/2,a*g-2*Math.PI*6378137/2]}class K0{constructor(a,d,g){if(a<0||a>25||g<0||g>=Math.pow(2,a)||d<0||d>=Math.pow(2,a))throw new Error(`x=${d}, y=${g}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=d,this.y=g,this.key=ef(0,a,a,d,g)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,d,g){const P=(F=this.y,ie=this.z,le=a2(256*(z=this.x),256*(F=Math.pow(2,ie)-F-1),ie),_e=a2(256*(z+1),256*(F+1),ie),le[0]+","+le[1]+","+_e[0]+","+_e[1]);var z,F,ie,le,_e;const Re=function(Be,He,Ze){let Xe,ut="";for(let lt=Be;lt>0;lt--)Xe=1<<lt-1,ut+=(He&Xe?1:0)+(Ze&Xe?2:0);return ut}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,P)}isChildOf(a){const d=this.z-a.z;return d>0&&a.x===this.x>>d&&a.y===this.y>>d}getTilePoint(a){const d=Math.pow(2,this.z);return new G((a.x*d-this.x)*Wr,(a.y*d-this.y)*Wr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class o2{constructor(a,d){this.wrap=a,this.canonical=d,this.key=ef(a,d.z,d.z,d.x,d.y)}}class Ha{constructor(a,d,g,P,z){if(a<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${g}`);this.overscaledZ=a,this.wrap=d,this.canonical=new K0(g,+P,+z),this.key=ef(d,a,g,P,z)}clone(){return new Ha(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-a;return a>this.canonical.z?new Ha(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ha(a,this.wrap,a,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(a,d){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-a;return a>this.canonical.z?ef(this.wrap*+d,a,this.canonical.z,this.canonical.x,this.canonical.y):ef(this.wrap*+d,a,a,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const d=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>d&&a.canonical.y===this.canonical.y>>d}children(a){if(this.overscaledZ>=a)return[new Ha(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,g=2*this.canonical.x,P=2*this.canonical.y;return[new Ha(d,this.wrap,d,g,P),new Ha(d,this.wrap,d,g+1,P),new Ha(d,this.wrap,d,g,P+1),new Ha(d,this.wrap,d,g+1,P+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Ha(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Ha(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new o2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Ng(a.x-this.wrap,a.y))}}function ef(c,a,d,g,P){(c*=2)<0&&(c=-1*c-1);const z=1<<d;return(z*z*c+z*P+g).toString(36)+d.toString(36)+a.toString(36)}mi("CanonicalTileID",K0),mi("OverscaledTileID",Ha,{omit:["posMatrix"]});class l2{constructor(a,d,g){if(this.uid=a,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return void T(`"${g}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const P=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(let z=0;z<P;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(P,z)]=this.data[this._idx(P-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,P)]=this.data[this._idx(z,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<P;z++)for(let F=0;F<P;F++){const ie=this.get(z,F);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(a,d){const g=new Uint8Array(this.data.buffer),P=4*this._idx(a,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[P],g[P+1],g[P+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,d){if(a<-1||a>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(a+1)}_unpackMapbox(a,d,g){return(256*a*256+256*d+g)/10-1e4}_unpackTerrarium(a,d,g){return 256*a+d+g/256-32768}getPixels(){return new Ga({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,d,g){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let P=d*this.dim,z=d*this.dim+this.dim,F=g*this.dim,ie=g*this.dim+this.dim;switch(d){case-1:P=z-1;break;case 1:z=P+1}switch(g){case-1:F=ie-1;break;case 1:ie=F+1}const le=-d*this.dim,_e=-g*this.dim;for(let Re=F;Re<ie;Re++)for(let Be=P;Be<z;Be++)this.data[this._idx(Be,Re)]=a.data[this._idx(Be+le,Re+_e)]}}mi("DEMData",l2);class c2{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){const g=a[d];this._stringToNumber[g]=d,this._numberToString[d]=g}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class u2{constructor(a,d,g,P,z){this.type="Feature",this._vectorTileFeature=a,a._z=d,a._x=g,a._y=P,this.properties=a.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(a[d]=this[d]);return a}}class d2{constructor(a,d){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new bl(Wr,16,0),this.grid3D=new bl(Wr,16,0),this.featureIndexArray=new Ji,this.promoteId=d}insert(a,d,g,P,z,F){const ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,P,z);const le=F?this.grid3D:this.grid;for(let _e=0;_e<d.length;_e++){const Re=d[_e],Be=[1/0,1/0,-1/0,-1/0];for(let He=0;He<Re.length;He++){const Ze=Re[He];Be[0]=Math.min(Be[0],Ze.x),Be[1]=Math.min(Be[1],Ze.y),Be[2]=Math.max(Be[2],Ze.x),Be[3]=Math.max(Be[3],Ze.y)}Be[0]<Wr&&Be[1]<Wr&&Be[2]>=0&&Be[3]>=0&&le.insert(ie,Be[0],Be[1],Be[2],Be[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new uc.VectorTile(new O0(this.rawTileData)).layers,this.sourceLayerCoder=new c2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,d,g,P){this.loadVTLayers();const z=a.params||{},F=Wr/a.tileSize/a.scale,ie=Mp(z.filter),le=a.queryGeometry,_e=a.queryPadding*F,Re=p2(le),Be=this.grid.query(Re.minX-_e,Re.minY-_e,Re.maxX+_e,Re.maxY+_e),He=p2(a.cameraQueryGeometry),Ze=this.grid3D.query(He.minX-_e,He.minY-_e,He.maxX+_e,He.maxY+_e,(lt,bt,Dt,xt)=>function(Pt,$t,Bt,xi,Ti){for(const Kt of Pt)if($t<=Kt.x&&Bt<=Kt.y&&xi>=Kt.x&&Ti>=Kt.y)return!0;const ii=[new G($t,Bt),new G($t,Ti),new G(xi,Ti),new G(xi,Bt)];if(Pt.length>2){for(const Kt of ii)if(Jd(Pt,Kt))return!0}for(let Kt=0;Kt<Pt.length-1;Kt++)if(pM(Pt[Kt],Pt[Kt+1],ii))return!0;return!1}(a.cameraQueryGeometry,lt-_e,bt-_e,Dt+_e,xt+_e));for(const lt of Ze)Be.push(lt);Be.sort(FP);const Xe={};let ut;for(let lt=0;lt<Be.length;lt++){const bt=Be[lt];if(bt===ut)continue;ut=bt;const Dt=this.featureIndexArray.get(bt);let xt=null;this.loadMatchingFeature(Xe,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,ie,z.layers,z.availableImages,d,g,P,(Pt,$t,Bt)=>(xt||(xt=Su(Pt)),$t.queryIntersectsFeature(le,Pt,Bt,xt,this.z,a.transform,F,a.pixelPosMatrix)))}return Xe}loadMatchingFeature(a,d,g,P,z,F,ie,le,_e,Re,Be){const He=this.bucketLayerIDs[d];if(F&&!function(lt,bt){for(let Dt=0;Dt<lt.length;Dt++)if(bt.indexOf(lt[Dt])>=0)return!0;return!1}(F,He))return;const Ze=this.sourceLayerCoder.decode(g),Xe=this.vtLayers[Ze].feature(P);if(z.needGeometry){const lt=Eu(Xe,!0);if(!z.filter(new cr(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!z.filter(new cr(this.tileID.overscaledZ),Xe))return;const ut=this.getId(Xe,Ze);for(let lt=0;lt<He.length;lt++){const bt=He[lt];if(F&&F.indexOf(bt)<0)continue;const Dt=le[bt];if(!Dt)continue;let xt={};ut&&Re&&(xt=Re.getState(Dt.sourceLayer||"_geojsonTileLayer",ut));const Pt=b({},_e[bt]);Pt.paint=h2(Pt.paint,Dt.paint,Xe,xt,ie),Pt.layout=h2(Pt.layout,Dt.layout,Xe,xt,ie);const $t=!Be||Be(Xe,Dt,xt);if(!$t)continue;const Bt=new u2(Xe,this.z,this.x,this.y,ut);Bt.layer=Pt;let xi=a[bt];xi===void 0&&(xi=a[bt]=[]),xi.push({featureIndex:P,feature:Bt,intersectionZ:$t})}}lookupSymbolFeatures(a,d,g,P,z,F,ie,le){const _e={};this.loadVTLayers();const Re=Mp(z);for(const Be of a)this.loadMatchingFeature(_e,g,P,Be,Re,F,ie,le,d);return _e}hasLayer(a){for(const d of this.bucketLayerIDs)for(const g of d)if(a===g)return!0;return!1}getId(a,d){let g=a.id;return this.promoteId&&(g=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof g=="boolean"&&(g=Number(g))),g}}function h2(c,a,d,g,P){return S(c,(z,F)=>{const ie=a instanceof qd?a.get(F):null;return ie&&ie.evaluate?ie.evaluate(d,g,P):ie})}function p2(c){let a=1/0,d=1/0,g=-1/0,P=-1/0;for(const z of c)a=Math.min(a,z.x),d=Math.min(d,z.y),g=Math.max(g,z.x),P=Math.max(P,z.y);return{minX:a,minY:d,maxX:g,maxY:P}}function FP(c,a){return a-c}var Q0;mi("FeatureIndex",d2,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(Q0=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",Q0.load="load",Q0.fullLoad="fullLoad";let zg=null,tf=[];const J0=1e3/30,BP={mark(c){performance.mark(c)},frame(c){const a=c;zg!=null&&tf.push(a-zg),zg=a},clearMetrics(){zg=null,tf=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,a=performance.getEntriesByName("fullLoadTime")[0].duration,d=tf.length,g=1/(tf.reduce((z,F)=>z+F,0)/d/1e3),P=tf.filter(z=>z>J0).reduce((z,F)=>z+(F-J0)/J0,0);return{loadTime:c,fullLoadTime:a,fps:g,percentDroppedFrames:P/(d+P)*100}}};r.AJAXError=J,r.ARRAY_TYPE=Zs,r.Actor=class{constructor(c,a,d){this.target=c,this.parent=a,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new OP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=W()?c:window}send(c,a,d,g,P=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[z]=d);const F=$(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:c,hasCallback:!!d,targetMapId:g,mustQueue:P,sourceMapId:this.mapId,data:gu(a,F)},F),{cancel:()=>{d&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(c){const a=c.data,d=a.id;if(d&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[d];const g=this.cancelCallbacks[d];delete this.cancelCallbacks[d],g&&g()}else W()||a.mustQueue?(this.tasks[d]=a,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,a)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){if(a.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(a.error?d(_l(a.error)):d(null,_l(a.data)))}else{let d=!1;const g=$(this.globalScope)?void 0:[],P=a.hasCallback?(ie,le)=>{d=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:ie?gu(ie):null,data:gu(le,g)},g)}:ie=>{d=!0};let z=null;const F=_l(a.data);if(this.parent[a.type])z=this.parent[a.type](a.sourceMapId,F,P);else if(this.parent.getWorkerSource){const ie=a.type.split(".");z=this.parent.getWorkerSource(a.sourceMapId,ie[0],F.source)[ie[1]](F,P)}else P(new Error(`Could not find function ${a.type}`));!d&&z&&z.cancel&&(this.cancelCallbacks[c]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=Hp,r.CanonicalTileID=K0,r.CollisionBoxArray=St,r.CollisionCircleLayoutArray=class extends Se{},r.Color=Ge,r.DEMData=l2,r.DataConstantProperty=Ei,r.DictionaryCoder=c2,r.EXTENT=Wr,r.ErrorEvent=Me,r.EvaluationParameters=cr,r.Event=ge,r.Evented=De,r.FeatureIndex=d2,r.FillBucket=L0,r.FillExtrusionBucket=z0,r.GeoJSONFeature=u2,r.ImageAtlas=Nw,r.ImagePosition=B0,r.LineBucket=j0,r.LineStripIndexArray=class extends wt{},r.LngLat=Cr,r.LngLatBounds=Au,r.MercatorCoordinate=Ng,r.ONE_EM=hs,r.OverscaledTileID=Ha,r.PerformanceUtils=BP,r.PosArray=dn,r.Properties=qr,r.QuadTriangleArray=class extends Ve{},r.RGBAImage=Ga,r.RasterBoundsArray=class extends wu{},r.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},r.ResourceType=we,r.SegmentVector=Mn,r.SymbolBucket=ah,r.Transitionable=Fp,r.TriangleIndexArray=ds,r.Uniform1f=Xd,r.Uniform1i=class extends Va{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},r.Uniform2f=class extends Va{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},r.Uniform3f=class extends Va{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},r.Uniform4f=Cu,r.UniformColor=Kd,r.UniformMatrix4f=class extends Va{constructor(c,a){super(c,a),this.current=lM}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},r.UnwrappedTileID=o2,r.ValidationError=$e,r.ZoomHistory=yu,r.add=function(c,a,d){return c[0]=a[0]+d[0],c[1]=a[1]+d[1],c[2]=a[2]+d[2],c},r.addDynamicAttributes=H0,r.asyncAll=function(c,a,d){if(!c.length)return d(null,[]);let g=c.length;const P=new Array(c.length);let z=null;c.forEach((F,ie)=>{a(F,(le,_e)=>{le&&(z=le),P[ie]=_e,--g==0&&d(z,P)})})},r.bezier=m,r.bindAll=E,r.cacheEntryPossiblyAdded=function(c){ce++,ce>fe&&(c.getActor().send("enforceCacheSizeLimit",ae),ce=0)},r.clamp=y,r.clearTileCache=function(c){const a=caches.delete(H);c&&a.catch(c).then(()=>c())},r.clipLine=Ww,r.clone=function(c){var a=new Zs(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},r.clone$1=A,r.clone$2=function(c){var a=new Zs(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a},r.collisionCircleLayout=rP,r.config=B,r.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.create=function(){var c=new Zs(16);return Zs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},r.create$1=sw,r.createExpression=cu,r.createFilter=Mp,r.createLayout=Fr,r.createStyleLayer=function(c){return c.type==="custom"?new zP(c):new jP[c.type](c)},r.cross=function(c,a,d){var g=a[0],P=a[1],z=a[2],F=d[0],ie=d[1],le=d[2];return c[0]=P*le-z*ie,c[1]=z*F-g*le,c[2]=g*ie-P*F,c},r.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},r.dot$1=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},r.ease=v,r.emitValidationErrors=lg,r.enforceCacheSizeLimit=function(c){re(),q&&q.then(a=>{a.keys().then(d=>{for(let g=0;g<d.length-c;g++)a.delete(d[g])})})},r.equals=function(c,a){var d=c[0],g=c[1],P=c[2],z=c[3],F=c[4],ie=c[5],le=c[6],_e=c[7],Re=c[8],Be=c[9],He=c[10],Ze=c[11],Xe=c[12],ut=c[13],lt=c[14],bt=c[15],Dt=a[0],xt=a[1],Pt=a[2],$t=a[3],Bt=a[4],xi=a[5],Ti=a[6],ii=a[7],Kt=a[8],Zt=a[9],ni=a[10],ei=a[11],Gt=a[12],Mi=a[13],ki=a[14],hn=a[15];return Math.abs(d-Dt)<=Ys*Math.max(1,Math.abs(d),Math.abs(Dt))&&Math.abs(g-xt)<=Ys*Math.max(1,Math.abs(g),Math.abs(xt))&&Math.abs(P-Pt)<=Ys*Math.max(1,Math.abs(P),Math.abs(Pt))&&Math.abs(z-$t)<=Ys*Math.max(1,Math.abs(z),Math.abs($t))&&Math.abs(F-Bt)<=Ys*Math.max(1,Math.abs(F),Math.abs(Bt))&&Math.abs(ie-xi)<=Ys*Math.max(1,Math.abs(ie),Math.abs(xi))&&Math.abs(le-Ti)<=Ys*Math.max(1,Math.abs(le),Math.abs(Ti))&&Math.abs(_e-ii)<=Ys*Math.max(1,Math.abs(_e),Math.abs(ii))&&Math.abs(Re-Kt)<=Ys*Math.max(1,Math.abs(Re),Math.abs(Kt))&&Math.abs(Be-Zt)<=Ys*Math.max(1,Math.abs(Be),Math.abs(Zt))&&Math.abs(He-ni)<=Ys*Math.max(1,Math.abs(He),Math.abs(ni))&&Math.abs(Ze-ei)<=Ys*Math.max(1,Math.abs(Ze),Math.abs(ei))&&Math.abs(Xe-Gt)<=Ys*Math.max(1,Math.abs(Xe),Math.abs(Gt))&&Math.abs(ut-Mi)<=Ys*Math.max(1,Math.abs(ut),Math.abs(Mi))&&Math.abs(lt-ki)<=Ys*Math.max(1,Math.abs(lt),Math.abs(ki))&&Math.abs(bt-hn)<=Ys*Math.max(1,Math.abs(bt),Math.abs(hn))},r.evaluateSizeForFeature=function(c,{uSize:a,uSizeT:d},{lowerSize:g,upperSize:P}){return c.kind==="source"?g/kl:c.kind==="composite"?fr(g/kl,P/kl,d):a},r.evaluateSizeForZoom=function(c,a){let d=0,g=0;if(c.kind==="constant")g=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:P,minZoom:z,maxZoom:F}=c,ie=P?y(ra.interpolationFactor(P,a,z,F),0,1):0;c.kind==="camera"?g=fr(c.minSize,c.maxSize,ie):d=ie}return{uSizeT:d,uSize:g}},r.evaluateVariableOffset=Xw,r.evented=sc,r.exported=R,r.exported$1=ke,r.extend=b,r.filterObject=x,r.fromRotation=function(c,a){var d=Math.sin(a),g=Math.cos(a);return c[0]=g,c[1]=d,c[2]=0,c[3]=-d,c[4]=g,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},r.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},r.getAnchorAlignment=U0,r.getAnchorJustification=G0,r.getArrayBuffer=Ce,r.getImage=qe,r.getJSON=function(c,a){return xe(b(c,{type:"json"}),a)},r.getOverlapMode=Z0,r.getRTLTextPluginStatus=Op,r.getReferrer=se,r.getVideo=function(c,a){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){a(null,d)};for(let g=0;g<c.length;g++){const P=window.document.createElement("source");Ne(c[g])||(d.crossOrigin="Anonymous"),P.src=c[g],d.appendChild(P)}return{cancel:()=>{}}},r.identity=S0,r.invert=function(c,a){var d=a[0],g=a[1],P=a[2],z=a[3],F=a[4],ie=a[5],le=a[6],_e=a[7],Re=a[8],Be=a[9],He=a[10],Ze=a[11],Xe=a[12],ut=a[13],lt=a[14],bt=a[15],Dt=d*ie-g*F,xt=d*le-P*F,Pt=d*_e-z*F,$t=g*le-P*ie,Bt=g*_e-z*ie,xi=P*_e-z*le,Ti=Re*ut-Be*Xe,ii=Re*lt-He*Xe,Kt=Re*bt-Ze*Xe,Zt=Be*lt-He*ut,ni=Be*bt-Ze*ut,ei=He*bt-Ze*lt,Gt=Dt*ei-xt*ni+Pt*Zt+$t*Kt-Bt*ii+xi*Ti;return Gt?(c[0]=(ie*ei-le*ni+_e*Zt)*(Gt=1/Gt),c[1]=(P*ni-g*ei-z*Zt)*Gt,c[2]=(ut*xi-lt*Bt+bt*$t)*Gt,c[3]=(He*Bt-Be*xi-Ze*$t)*Gt,c[4]=(le*Kt-F*ei-_e*ii)*Gt,c[5]=(d*ei-P*Kt+z*ii)*Gt,c[6]=(lt*Pt-Xe*xi-bt*xt)*Gt,c[7]=(Re*xi-He*Pt+Ze*xt)*Gt,c[8]=(F*ni-ie*Kt+_e*Ti)*Gt,c[9]=(g*Kt-d*ni-z*Ti)*Gt,c[10]=(Xe*Bt-ut*Pt+bt*Dt)*Gt,c[11]=(Be*Pt-Re*Bt-Ze*Dt)*Gt,c[12]=(ie*ii-F*Zt-le*Ti)*Gt,c[13]=(d*Zt-g*ii+P*Ti)*Gt,c[14]=(ut*xt-Xe*$t-lt*Dt)*Gt,c[15]=(Re*$t-Be*xt+He*Dt)*Gt,c):null},r.isImageBitmap=L,r.isSafari=$,r.isWorker=W,r.keysDifference=function(c,a){const d=[];for(const g in c)g in a||d.push(g);return d},r.lazyLoadRTLTextPlugin=function(){Aa.isLoading()||Aa.isLoaded()||Op()!=="deferred"||Vd()},r.makeRequest=xe,r.mapObject=S,r.mercatorXfromLng=n2,r.mercatorYfromLat=r2,r.mercatorZfromAltitude=s2,r.mul=gM,r.mul$1=function(c,a,d){return c[0]=a[0]*d[0],c[1]=a[1]*d[1],c[2]=a[2]*d[2],c[3]=a[3]*d[3],c},r.multiply=aw,r.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},r.normalize=function(c,a){var d=a[0],g=a[1],P=a[2],z=d*d+g*g+P*P;return z>0&&(z=1/Math.sqrt(z)),c[0]=a[0]*z,c[1]=a[1]*z,c[2]=a[2]*z,c},r.number=fr,r.ortho=function(c,a,d,g,P,z,F){var ie=1/(a-d),le=1/(g-P),_e=1/(z-F);return c[0]=-2*ie,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*le,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*_e,c[11]=0,c[12]=(a+d)*ie,c[13]=(P+g)*le,c[14]=(F+z)*_e,c[15]=1,c},r.parseCacheControl=Z,r.parseGlyphPbf=function(c){return new O0(c).readFields(mP,[])},r.pbf=O0,r.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Wr/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0].layout,d=c.bucket.layers[0]._unevaluatedLayout._values,g={layoutIconSize:d["icon-size"].possiblyEvaluate(new cr(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new cr(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new cr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:le,maxZoom:_e}=c.bucket.textSizeData;g.compositeTextSizes=[d["text-size"].possiblyEvaluate(new cr(le),c.canonical),d["text-size"].possiblyEvaluate(new cr(_e),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:le,maxZoom:_e}=c.bucket.iconSizeData;g.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new cr(le),c.canonical),d["icon-size"].possiblyEvaluate(new cr(_e),c.canonical)]}const P=a.get("text-line-height")*hs,z=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",F=a.get("text-keep-upright"),ie=a.get("text-size");for(const le of c.bucket.features){const _e=a.get("text-font").evaluate(le,{},c.canonical).join(","),Re=ie.evaluate(le,{},c.canonical),Be=g.layoutTextSize.evaluate(le,{},c.canonical),He=g.layoutIconSize.evaluate(le,{},c.canonical),Ze={horizontal:{},vertical:void 0},Xe=le.text;let ut,lt=[0,0];if(Xe){const xt=Xe.toString(),Pt=a.get("text-letter-spacing").evaluate(le,{},c.canonical)*hs,$t=cg(xt)?Pt:0,Bt=a.get("text-anchor").evaluate(le,{},c.canonical),xi=a.get("text-variable-anchor");if(!xi){const ni=a.get("text-radial-offset").evaluate(le,{},c.canonical);lt=ni?Xw(Bt,[ni*hs,V0]):a.get("text-offset").evaluate(le,{},c.canonical).map(ei=>ei*hs)}let Ti=z?"center":a.get("text-justify").evaluate(le,{},c.canonical);const ii=a.get("symbol-placement"),Kt=ii==="point"?a.get("text-max-width").evaluate(le,{},c.canonical)*hs:0,Zt=()=>{c.bucket.allowVerticalPlacement&&Rp(xt)&&(Ze.vertical=kg(Xe,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,P,Bt,"left",$t,lt,r.WritingMode.vertical,!0,ii,Be,Re))};if(!z&&xi){const ni=Ti==="auto"?xi.map(Gt=>G0(Gt)):[Ti];let ei=!1;for(let Gt=0;Gt<ni.length;Gt++){const Mi=ni[Gt];if(!Ze.horizontal[Mi])if(ei)Ze.horizontal[Mi]=Ze.horizontal[0];else{const ki=kg(Xe,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,P,"center",Mi,$t,lt,r.WritingMode.horizontal,!1,ii,Be,Re);ki&&(Ze.horizontal[Mi]=ki,ei=ki.positionedLines.length===1)}}Zt()}else{Ti==="auto"&&(Ti=G0(Bt));const ni=kg(Xe,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,P,Bt,Ti,$t,lt,r.WritingMode.horizontal,!1,ii,Be,Re);ni&&(Ze.horizontal[Ti]=ni),Zt(),Rp(xt)&&z&&F&&(Ze.vertical=kg(Xe,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,P,Bt,Ti,$t,lt,r.WritingMode.vertical,!1,ii,Be,Re))}}let bt=!1;if(le.icon&&le.icon.name){const xt=c.imageMap[le.icon.name];xt&&(ut=_P(c.imagePositions[le.icon.name],a.get("icon-offset").evaluate(le,{},c.canonical),a.get("icon-anchor").evaluate(le,{},c.canonical)),bt=!!xt.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=bt:c.bucket.sdfIcons!==bt&&T("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==c.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Dt=Qw(Ze.horizontal)||Ze.vertical;c.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||ut)&&AP(c.bucket,le,Ze,ut,c.imageMap,g,Be,He,lt,bt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},r.perspective=function(c,a,d,g,P){var z,F=1/Math.tan(a/2);return c[0]=F/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=F,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,P!=null&&P!==1/0?(c[10]=(P+g)*(z=1/(g-P)),c[14]=2*P*g*z):(c[10]=-1,c[14]=-2*g),c},r.pick=function(c,a){const d={};for(let g=0;g<a.length;g++){const P=a[g];P in c&&(d[P]=c[P])}return d},r.plugin=Aa,r.pointGeometry=G,r.polygonIntersectsPolygon=tw,r.potpack=Lw,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=mi,r.registerForPluginStateChange=function(c){return c({pluginStatus:Hs,pluginURL:Vo}),sc.on("pluginStateChange",c),c},r.renderColorRamp=pw,r.rotateX=function(c,a,d){var g=Math.sin(d),P=Math.cos(d),z=a[4],F=a[5],ie=a[6],le=a[7],_e=a[8],Re=a[9],Be=a[10],He=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=z*P+_e*g,c[5]=F*P+Re*g,c[6]=ie*P+Be*g,c[7]=le*P+He*g,c[8]=_e*P-z*g,c[9]=Re*P-F*g,c[10]=Be*P-ie*g,c[11]=He*P-le*g,c},r.rotateZ=function(c,a,d){var g=Math.sin(d),P=Math.cos(d),z=a[0],F=a[1],ie=a[2],le=a[3],_e=a[4],Re=a[5],Be=a[6],He=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=z*P+_e*g,c[1]=F*P+Re*g,c[2]=ie*P+Be*g,c[3]=le*P+He*g,c[4]=_e*P-z*g,c[5]=Re*P-F*g,c[6]=Be*P-ie*g,c[7]=He*P-le*g,c},r.scale=function(c,a,d){var g=d[0],P=d[1],z=d[2];return c[0]=a[0]*g,c[1]=a[1]*g,c[2]=a[2]*g,c[3]=a[3]*g,c[4]=a[4]*P,c[5]=a[5]*P,c[6]=a[6]*P,c[7]=a[7]*P,c[8]=a[8]*z,c[9]=a[9]*z,c[10]=a[10]*z,c[11]=a[11]*z,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.scale$1=function(c,a,d){return c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c},r.setCacheLimits=function(c,a){ae=c,fe=a},r.setRTLTextPlugin=function(c,a,d=!1){if(Hs===Ud||Hs===Lp||Hs===Np)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vo=R.resolveURL(c),Hs=Ud,zp=a,jp(),d||Vd()},r.spec=Pe,r.sphericalToCartesian=function([c,a,d]){return a+=90,a*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(d),y:c*Math.sin(a)*Math.sin(d),z:c*Math.cos(d)}},r.sqrLen=function(c){var a=c[0],d=c[1];return a*a+d*d},r.sub=function(c,a,d){return c[0]=a[0]-d[0],c[1]=a[1]-d[1],c[2]=a[2]-d[2],c},r.toEvaluationFeature=Eu,r.transformMat3=function(c,a,d){var g=a[0],P=a[1],z=a[2];return c[0]=g*d[0]+P*d[3]+z*d[6],c[1]=g*d[1]+P*d[4]+z*d[7],c[2]=g*d[2]+P*d[5]+z*d[8],c},r.transformMat4=vg,r.transformMat4$1=function(c,a,d){var g=a[0],P=a[1];return c[0]=d[0]*g+d[4]*P+d[12],c[1]=d[1]*g+d[5]*P+d[13],c},r.translate=function(c,a,d){var g,P,z,F,ie,le,_e,Re,Be,He,Ze,Xe,ut=d[0],lt=d[1],bt=d[2];return a===c?(c[12]=a[0]*ut+a[4]*lt+a[8]*bt+a[12],c[13]=a[1]*ut+a[5]*lt+a[9]*bt+a[13],c[14]=a[2]*ut+a[6]*lt+a[10]*bt+a[14],c[15]=a[3]*ut+a[7]*lt+a[11]*bt+a[15]):(P=a[1],z=a[2],F=a[3],ie=a[4],le=a[5],_e=a[6],Re=a[7],Be=a[8],He=a[9],Ze=a[10],Xe=a[11],c[0]=g=a[0],c[1]=P,c[2]=z,c[3]=F,c[4]=ie,c[5]=le,c[6]=_e,c[7]=Re,c[8]=Be,c[9]=He,c[10]=Ze,c[11]=Xe,c[12]=g*ut+ie*lt+Be*bt+a[12],c[13]=P*ut+le*lt+He*bt+a[13],c[14]=z*ut+_e*lt+Ze*bt+a[14],c[15]=F*ut+Re*lt+Xe*bt+a[15]),c},r.triggerPluginCompletionEvent=hg,r.unicodeBlockLookup=ti,r.uniqueId=function(){return C++},r.validateCustomStyleLayer=function(c){const a=[],d=c.id;return d===void 0&&a.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),a},r.validateLight=p0,r.validateStyle=vl,r.vectorTile=uc,r.warnOnce=T,r.wrap=_}),l(["./shared"],function(r){function p(We){const be=typeof We;if(be==="number"||be==="boolean"||be==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){let Qe="[";for(const st of We)Qe+=`${p(st)},`;return`${Qe}]`}const Le=Object.keys(We).sort();let Ge="{";for(let Qe=0;Qe<Le.length;Qe++)Ge+=`${JSON.stringify(Le[Qe])}:${p(We[Le[Qe]])},`;return`${Ge}}`}function f(We){let be="";for(const Le of r.refProperties)be+=`/${p(We[Le])}`;return be}class m{constructor(be){this.keyCache={},be&&this.replace(be)}replace(be){this._layerConfigs={},this._layers={},this.update(be,[])}update(be,Le){for(const Qe of be){this._layerConfigs[Qe.id]=Qe;const st=this._layers[Qe.id]=r.createStyleLayer(Qe);st._featureFilter=r.createFilter(st.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(const Qe of Le)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const Ge=function(Qe,st){const ct={};for(let rt=0;rt<Qe.length;rt++){const mt=st&&st[Qe[rt].id]||f(Qe[rt]);st&&(st[Qe[rt].id]=mt);let At=ct[mt];At||(At=ct[mt]=[]),At.push(Qe[rt])}const ot=[];for(const rt in ct)ot.push(ct[rt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Qe of Ge){const st=Qe.map(zt=>this._layers[zt.id]),ct=st[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let rt=this.familiesBySource[ot];rt||(rt=this.familiesBySource[ot]={});const mt=ct.sourceLayer||"_geojsonTileLayer";let At=rt[mt];At||(At=rt[mt]=[]),At.push(st)}}}class v{constructor(be){const Le={},Ge=[];for(const ot in be){const rt=be[ot],mt=Le[ot]={};for(const At in rt){const zt=rt[+At];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Rt={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};Ge.push(Rt),mt[At]={rect:Rt,metrics:zt.metrics}}}const{w:Qe,h:st}=r.potpack(Ge),ct=new r.AlphaImage({width:Qe||1,height:st||1});for(const ot in be){const rt=be[ot];for(const mt in rt){const At=rt[+mt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const zt=Le[ot][mt].rect;r.AlphaImage.copy(At.bitmap,ct,{x:0,y:0},{x:zt.x+1,y:zt.y+1},At.bitmap)}}this.image=ct,this.positions=Le}}r.register("GlyphAtlas",v);class y{constructor(be){this.tileID=new r.OverscaledTileID(be.tileID.overscaledZ,be.tileID.wrap,be.tileID.canonical.z,be.tileID.canonical.x,be.tileID.canonical.y),this.uid=be.uid,this.zoom=be.zoom,this.pixelRatio=be.pixelRatio,this.tileSize=be.tileSize,this.source=be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=be.showCollisionBoxes,this.collectResourceTiming=!!be.collectResourceTiming,this.returnDependencies=!!be.returnDependencies,this.promoteId=be.promoteId}parse(be,Le,Ge,Qe,st){this.status="parsing",this.data=be,this.collisionBoxArray=new r.CollisionBoxArray;const ct=new r.DictionaryCoder(Object.keys(be.layers).sort()),ot=new r.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const rt={},mt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ge},At=Le.familiesBySource[this.source];for(const Pi in At){const Vi=be.layers[Pi];if(!Vi)continue;Vi.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${Pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fi=ct.encode(Pi),fn=[];for(let Yn=0;Yn<Vi.length;Yn++){const br=Vi.feature(Yn),Hr=ot.getId(br,Pi);fn.push({feature:br,id:Hr,index:Yn,sourceLayerIndex:Fi})}for(const Yn of At[Pi]){const br=Yn[0];br.source!==this.source&&r.warnOnce(`layer.source = ${br.source} does not equal this.source = ${this.source}`),br.minzoom&&this.zoom<Math.floor(br.minzoom)||br.maxzoom&&this.zoom>=br.maxzoom||br.visibility!=="none"&&(_(Yn,this.zoom,Ge),(rt[br.id]=br.createBucket({index:ot.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fi,sourceID:this.source})).populate(fn,mt,this.tileID.canonical),ot.bucketLayerIDs.push(Yn.map(Hr=>Hr.id)))}}let zt,Rt,li,Qt;const fi=r.mapObject(mt.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(fi).length?Qe.send("getGlyphs",{uid:this.uid,stacks:fi},(Pi,Vi)=>{zt||(zt=Pi,Rt=Vi,_i.call(this))}):Rt={};const bi=Object.keys(mt.iconDependencies);bi.length?Qe.send("getImages",{icons:bi,source:this.source,tileID:this.tileID,type:"icons"},(Pi,Vi)=>{zt||(zt=Pi,li=Vi,_i.call(this))}):li={};const Ui=Object.keys(mt.patternDependencies);function _i(){if(zt)return st(zt);if(Rt&&li&&Qt){const Pi=new v(Rt),Vi=new r.ImageAtlas(li,Qt);for(const Fi in rt){const fn=rt[Fi];fn instanceof r.SymbolBucket?(_(fn.layers,this.zoom,Ge),r.performSymbolLayout({bucket:fn,glyphMap:Rt,glyphPositions:Pi.positions,imageMap:li,imagePositions:Vi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):fn.hasPattern&&(fn instanceof r.LineBucket||fn instanceof r.FillBucket||fn instanceof r.FillExtrusionBucket)&&(_(fn.layers,this.zoom,Ge),fn.addFeatures(mt,this.tileID.canonical,Vi.patternPositions))}this.status="done",st(null,{buckets:Object.values(rt).filter(Fi=>!Fi.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pi.image,imageAtlas:Vi,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?li:null,glyphPositions:this.returnDependencies?Pi.positions:null})}}Ui.length?Qe.send("getImages",{icons:Ui,source:this.source,tileID:this.tileID,type:"patterns"},(Pi,Vi)=>{zt||(zt=Pi,Qt=Vi,_i.call(this))}):Qt={},_i.call(this)}}function _(We,be,Le){const Ge=new r.EvaluationParameters(be);for(const Qe of We)Qe.recalculate(Ge,Le)}function b(We,be){const Le=r.getArrayBuffer(We.request,(Ge,Qe,st,ct)=>{Ge?be(Ge):Qe&&be(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(Qe)),rawData:Qe,cacheControl:st,expires:ct})});return()=>{Le.cancel(),be()}}class C{constructor(be,Le,Ge,Qe){this.actor=be,this.layerIndex=Le,this.availableImages=Ge,this.loadVectorData=Qe||b,this.loading={},this.loaded={}}loadTile(be,Le){const Ge=be.uid;this.loading||(this.loading={});const Qe=!!(be&&be.request&&be.request.collectResourceTiming)&&new r.RequestPerformance(be.request),st=this.loading[Ge]=new y(be);st.abort=this.loadVectorData(be,(ct,ot)=>{if(delete this.loading[Ge],ct||!ot)return st.status="done",this.loaded[Ge]=st,Le(ct);const rt=ot.rawData,mt={};ot.expires&&(mt.expires=ot.expires),ot.cacheControl&&(mt.cacheControl=ot.cacheControl);const At={};if(Qe){const zt=Qe.finish();zt&&(At.resourceTiming=JSON.parse(JSON.stringify(zt)))}st.vectorTile=ot.vectorTile,st.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Rt)=>{if(zt||!Rt)return Le(zt);Le(null,r.extend({rawTileData:rt.slice(0)},Rt,mt,At))}),this.loaded=this.loaded||{},this.loaded[Ge]=st})}reloadTile(be,Le){const Ge=this.loaded,Qe=be.uid,st=this;if(Ge&&Ge[Qe]){const ct=Ge[Qe];ct.showCollisionBoxes=be.showCollisionBoxes;const ot=(rt,mt)=>{const At=ct.reloadCallback;At&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,st.layerIndex,this.availableImages,st.actor,At)),Le(rt,mt)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(be,Le){const Ge=this.loading,Qe=be.uid;Ge&&Ge[Qe]&&Ge[Qe].abort&&(Ge[Qe].abort(),delete Ge[Qe]),Le()}removeTile(be,Le){const Ge=this.loaded,Qe=be.uid;Ge&&Ge[Qe]&&delete Ge[Qe],Le()}}class E{constructor(){this.loaded={}}loadTile(be,Le){const{uid:Ge,encoding:Qe,rawImageData:st}=be,ct=r.isImageBitmap(st)?this.getImageData(st):st,ot=new r.DEMData(Ge,ct,Qe);this.loaded=this.loaded||{},this.loaded[Ge]=ot,Le(null,ot)}getImageData(be){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(be.width,be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=be.width,this.offscreenCanvas.height=be.height,this.offscreenCanvasContext.drawImage(be,0,0,be.width,be.height);const Le=this.offscreenCanvasContext.getImageData(-1,-1,be.width+2,be.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Le.width,height:Le.height},Le.data)}removeTile(be){const Le=this.loaded,Ge=be.uid;Le&&Le[Ge]&&delete Le[Ge]}}var S=function We(be,Le){var Ge,Qe=be&&be.type;if(Qe==="FeatureCollection")for(Ge=0;Ge<be.features.length;Ge++)We(be.features[Ge],Le);else if(Qe==="GeometryCollection")for(Ge=0;Ge<be.geometries.length;Ge++)We(be.geometries[Ge],Le);else if(Qe==="Feature")We(be.geometry,Le);else if(Qe==="Polygon")x(be.coordinates,Le);else if(Qe==="MultiPolygon")for(Ge=0;Ge<be.coordinates.length;Ge++)x(be.coordinates[Ge],Le);return be};function x(We,be){if(We.length!==0){A(We[0],be);for(var Le=1;Le<We.length;Le++)A(We[Le],!1)}}function A(We,be){for(var Le=0,Ge=0,Qe=0,st=We.length,ct=st-1;Qe<st;ct=Qe++){var ot=(We[Qe][0]-We[ct][0])*(We[ct][1]+We[Qe][1]),rt=Le+ot;Ge+=Math.abs(Le)>=Math.abs(ot)?Le-rt+ot:ot-rt+Le,Le=rt}Le+Ge>=0!=!!be&&We.reverse()}const D=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class T{constructor(be){this._feature=be,this.extent=r.EXTENT,this.type=be.type,this.properties=be.tags,"id"in be&&!isNaN(be.id)&&(this.id=parseInt(be.id,10))}loadGeometry(){if(this._feature.type===1){const be=[];for(const Le of this._feature.geometry)be.push([new r.pointGeometry(Le[0],Le[1])]);return be}{const be=[];for(const Le of this._feature.geometry){const Ge=[];for(const Qe of Le)Ge.push(new r.pointGeometry(Qe[0],Qe[1]));be.push(Ge)}return be}}toGeoJSON(be,Le,Ge){return D.call(this,be,Le,Ge)}}class k{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=be.length,this._features=be}feature(be){return new T(this._features[be])}}var N={exports:{}},W=r.pointGeometry,Z=r.vectorTile.VectorTileFeature,K=j;function j(We,be){this.options=be||{},this.features=We,this.length=We.length}function V(We,be){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=be||4096}j.prototype.feature=function(We){return new V(this.features[We],this.options.extent)},V.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var be=0;be<We.length;be++){for(var Le=We[be],Ge=[],Qe=0;Qe<Le.length;Qe++)Ge.push(new W(Le[Qe][0],Le[Qe][1]));this.geometry.push(Ge)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,be=1/0,Le=-1/0,Ge=1/0,Qe=-1/0,st=0;st<We.length;st++)for(var ct=We[st],ot=0;ot<ct.length;ot++){var rt=ct[ot];be=Math.min(be,rt.x),Le=Math.max(Le,rt.x),Ge=Math.min(Ge,rt.y),Qe=Math.max(Qe,rt.y)}return[be,Ge,Le,Qe]},V.prototype.toGeoJSON=Z.prototype.toGeoJSON;var $=r.pbf,L=K;function R(We){var be=new $;return function(Le,Ge){for(var Qe in Le.layers)Ge.writeMessage(3,G,Le.layers[Qe])}(We,be),be.finish()}function G(We,be){var Le;be.writeVarintField(15,We.version||1),be.writeStringField(1,We.name||""),be.writeVarintField(5,We.extent||4096);var Ge={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<We.length;Le++)Ge.feature=We.feature(Le),be.writeMessage(2,U,Ge);var Qe=Ge.keys;for(Le=0;Le<Qe.length;Le++)be.writeStringField(3,Qe[Le]);var st=Ge.values;for(Le=0;Le<st.length;Le++)be.writeMessage(4,fe,st[Le])}function U(We,be){var Le=We.feature;Le.id!==void 0&&be.writeVarintField(1,Le.id),be.writeMessage(2,B,We),be.writeVarintField(3,Le.type),be.writeMessage(4,ae,Le)}function B(We,be){var Le=We.feature,Ge=We.keys,Qe=We.values,st=We.keycache,ct=We.valuecache;for(var ot in Le.properties){var rt=Le.properties[ot],mt=st[ot];if(rt!==null){mt===void 0&&(Ge.push(ot),st[ot]=mt=Ge.length-1),be.writeVarint(mt);var At=typeof rt;At!=="string"&&At!=="boolean"&&At!=="number"&&(rt=JSON.stringify(rt));var zt=At+":"+rt,Rt=ct[zt];Rt===void 0&&(Qe.push(rt),ct[zt]=Rt=Qe.length-1),be.writeVarint(Rt)}}}function H(We,be){return(be<<3)+(7&We)}function q(We){return We<<1^We>>31}function ae(We,be){for(var Le=We.loadGeometry(),Ge=We.type,Qe=0,st=0,ct=Le.length,ot=0;ot<ct;ot++){var rt=Le[ot],mt=1;Ge===1&&(mt=rt.length),be.writeVarint(H(1,mt));for(var At=Ge===3?rt.length-1:rt.length,zt=0;zt<At;zt++){zt===1&&Ge!==1&&be.writeVarint(H(2,At-1));var Rt=rt[zt].x-Qe,li=rt[zt].y-st;be.writeVarint(q(Rt)),be.writeVarint(q(li)),Qe+=Rt,st+=li}Ge===3&&be.writeVarint(H(7,1))}}function fe(We,be){var Le=typeof We;Le==="string"?be.writeStringField(1,We):Le==="boolean"?be.writeBooleanField(7,We):Le==="number"&&(We%1!=0?be.writeDoubleField(3,We):We<0?be.writeSVarintField(6,We):be.writeVarintField(5,We))}function re(We,be,Le,Ge,Qe,st){if(Qe-Ge<=Le)return;const ct=Ge+Qe>>1;ce(We,be,ct,Ge,Qe,st%2),re(We,be,Le,Ge,ct-1,st+1),re(We,be,Le,ct+1,Qe,st+1)}function ce(We,be,Le,Ge,Qe,st){for(;Qe>Ge;){if(Qe-Ge>600){const mt=Qe-Ge+1,At=Le-Ge+1,zt=Math.log(mt),Rt=.5*Math.exp(2*zt/3),li=.5*Math.sqrt(zt*Rt*(mt-Rt)/mt)*(At-mt/2<0?-1:1);ce(We,be,Le,Math.max(Ge,Math.floor(Le-At*Rt/mt+li)),Math.min(Qe,Math.floor(Le+(mt-At)*Rt/mt+li)),st)}const ct=be[2*Le+st];let ot=Ge,rt=Qe;for(ke(We,be,Ge,Le),be[2*Qe+st]>ct&&ke(We,be,Ge,Qe);ot<rt;){for(ke(We,be,ot,rt),ot++,rt--;be[2*ot+st]<ct;)ot++;for(;be[2*rt+st]>ct;)rt--}be[2*Ge+st]===ct?ke(We,be,Ge,rt):(rt++,ke(We,be,rt,Qe)),rt<=Le&&(Ge=rt+1),Le<=rt&&(Qe=rt-1)}}function ke(We,be,Le,Ge){ve(We,Le,Ge),ve(be,2*Le,2*Ge),ve(be,2*Le+1,2*Ge+1)}function ve(We,be,Le){const Ge=We[be];We[be]=We[Le],We[Le]=Ge}function Ee(We,be,Le,Ge){const Qe=We-Le,st=be-Ge;return Qe*Qe+st*st}N.exports=R,N.exports.fromVectorTileJs=R,N.exports.fromGeojsonVt=function(We,be){be=be||{};var Le={};for(var Ge in We)Le[Ge]=new L(We[Ge].features,be),Le[Ge].name=Ge,Le[Ge].version=be.version,Le[Ge].extent=be.extent;return R({layers:Le})},N.exports.GeoJSONWrapper=L;const Q=We=>We[0],ee=We=>We[1];class oe{constructor(be,Le=Q,Ge=ee,Qe=64,st=Float64Array){this.nodeSize=Qe,this.points=be;const ct=be.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(be.length),rt=this.coords=new st(2*be.length);for(let mt=0;mt<be.length;mt++)ot[mt]=mt,rt[2*mt]=Le(be[mt]),rt[2*mt+1]=Ge(be[mt]);re(ot,rt,Qe,0,ot.length-1,0)}range(be,Le,Ge,Qe){return function(st,ct,ot,rt,mt,At,zt){const Rt=[0,st.length-1,0],li=[];let Qt,fi;for(;Rt.length;){const bi=Rt.pop(),Ui=Rt.pop(),_i=Rt.pop();if(Ui-_i<=zt){for(let Fi=_i;Fi<=Ui;Fi++)Qt=ct[2*Fi],fi=ct[2*Fi+1],Qt>=ot&&Qt<=mt&&fi>=rt&&fi<=At&&li.push(st[Fi]);continue}const Pi=Math.floor((_i+Ui)/2);Qt=ct[2*Pi],fi=ct[2*Pi+1],Qt>=ot&&Qt<=mt&&fi>=rt&&fi<=At&&li.push(st[Pi]);const Vi=(bi+1)%2;(bi===0?ot<=Qt:rt<=fi)&&(Rt.push(_i),Rt.push(Pi-1),Rt.push(Vi)),(bi===0?mt>=Qt:At>=fi)&&(Rt.push(Pi+1),Rt.push(Ui),Rt.push(Vi))}return li}(this.ids,this.coords,be,Le,Ge,Qe,this.nodeSize)}within(be,Le,Ge){return function(Qe,st,ct,ot,rt,mt){const At=[0,Qe.length-1,0],zt=[],Rt=rt*rt;for(;At.length;){const li=At.pop(),Qt=At.pop(),fi=At.pop();if(Qt-fi<=mt){for(let Vi=fi;Vi<=Qt;Vi++)Ee(st[2*Vi],st[2*Vi+1],ct,ot)<=Rt&&zt.push(Qe[Vi]);continue}const bi=Math.floor((fi+Qt)/2),Ui=st[2*bi],_i=st[2*bi+1];Ee(Ui,_i,ct,ot)<=Rt&&zt.push(Qe[bi]);const Pi=(li+1)%2;(li===0?ct-rt<=Ui:ot-rt<=_i)&&(At.push(fi),At.push(bi-1),At.push(Pi)),(li===0?ct+rt>=Ui:ot+rt>=_i)&&(At.push(bi+1),At.push(Qt),At.push(Pi))}return zt}(this.ids,this.coords,be,Le,Ge,this.nodeSize)}}const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:We=>We},J=Math.fround||(se=new Float32Array(1),We=>(se[0]=+We,se[0]));var se;class de{constructor(be){this.options=Ae(Object.create(we),be),this.trees=new Array(this.options.maxZoom+1)}load(be){const{log:Le,minZoom:Ge,maxZoom:Qe,nodeSize:st}=this.options;Le&&console.time("total time");const ct=`prepare ${be.length} points`;Le&&console.time(ct),this.points=be;let ot=[];for(let rt=0;rt<be.length;rt++)be[rt].geometry&&ot.push(Ce(be[rt],rt));this.trees[Qe+1]=new oe(ot,ye,ge,st,Float32Array),Le&&console.timeEnd(ct);for(let rt=Qe;rt>=Ge;rt--){const mt=+Date.now();ot=this._cluster(ot,rt),this.trees[rt]=new oe(ot,ye,ge,st,Float32Array),Le&&console.log("z%d: %d clusters in %dms",rt,ot.length,+Date.now()-mt)}return Le&&console.timeEnd("total time"),this}getClusters(be,Le){let Ge=((be[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,be[1]));let st=be[2]===180?180:((be[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,be[3]));if(be[2]-be[0]>=360)Ge=-180,st=180;else if(Ge>st){const At=this.getClusters([Ge,Qe,180,ct],Le),zt=this.getClusters([-180,Qe,st,ct],Le);return At.concat(zt)}const ot=this.trees[this._limitZoom(Le)],rt=ot.range(Ie(Ge),Ue(ct),Ie(st),Ue(Qe)),mt=[];for(const At of rt){const zt=ot.points[At];mt.push(zt.numPoints?Ne(zt):this.points[zt.index])}return mt}getChildren(be){const Le=this._getOriginId(be),Ge=this._getOriginZoom(be),Qe="No cluster with the specified id.",st=this.trees[Ge];if(!st)throw new Error(Qe);const ct=st.points[Le];if(!ct)throw new Error(Qe);const ot=this.options.radius/(this.options.extent*Math.pow(2,Ge-1)),rt=st.within(ct.x,ct.y,ot),mt=[];for(const At of rt){const zt=st.points[At];zt.parentId===be&&mt.push(zt.numPoints?Ne(zt):this.points[zt.index])}if(mt.length===0)throw new Error(Qe);return mt}getLeaves(be,Le,Ge){const Qe=[];return this._appendLeaves(Qe,be,Le=Le||10,Ge=Ge||0,0),Qe}getTile(be,Le,Ge){const Qe=this.trees[this._limitZoom(be)],st=Math.pow(2,be),{extent:ct,radius:ot}=this.options,rt=ot/ct,mt=(Ge-rt)/st,At=(Ge+1+rt)/st,zt={features:[]};return this._addTileFeatures(Qe.range((Le-rt)/st,mt,(Le+1+rt)/st,At),Qe.points,Le,Ge,st,zt),Le===0&&this._addTileFeatures(Qe.range(1-rt/st,mt,1,At),Qe.points,st,Ge,st,zt),Le===st-1&&this._addTileFeatures(Qe.range(0,mt,rt/st,At),Qe.points,-1,Ge,st,zt),zt.features.length?zt:null}getClusterExpansionZoom(be){let Le=this._getOriginZoom(be)-1;for(;Le<=this.options.maxZoom;){const Ge=this.getChildren(be);if(Le++,Ge.length!==1)break;be=Ge[0].properties.cluster_id}return Le}_appendLeaves(be,Le,Ge,Qe,st){const ct=this.getChildren(Le);for(const ot of ct){const rt=ot.properties;if(rt&&rt.cluster?st+rt.point_count<=Qe?st+=rt.point_count:st=this._appendLeaves(be,rt.cluster_id,Ge,Qe,st):st<Qe?st++:be.push(ot),be.length===Ge)break}return st}_addTileFeatures(be,Le,Ge,Qe,st,ct){for(const ot of be){const rt=Le[ot],mt=rt.numPoints;let At,zt,Rt;if(mt)At=Te(rt),zt=rt.x,Rt=rt.y;else{const fi=this.points[rt.index];At=fi.properties,zt=Ie(fi.geometry.coordinates[0]),Rt=Ue(fi.geometry.coordinates[1])}const li={type:1,geometry:[[Math.round(this.options.extent*(zt*st-Ge)),Math.round(this.options.extent*(Rt*st-Qe))]],tags:At};let Qt;mt?Qt=rt.id:this.options.generateId?Qt=rt.index:this.points[rt.index].id&&(Qt=this.points[rt.index].id),Qt!==void 0&&(li.id=Qt),ct.features.push(li)}}_limitZoom(be){return Math.max(this.options.minZoom,Math.min(Math.floor(+be),this.options.maxZoom+1))}_cluster(be,Le){const Ge=[],{radius:Qe,extent:st,reduce:ct,minPoints:ot}=this.options,rt=Qe/(st*Math.pow(2,Le));for(let mt=0;mt<be.length;mt++){const At=be[mt];if(At.zoom<=Le)continue;At.zoom=Le;const zt=this.trees[Le+1],Rt=zt.within(At.x,At.y,rt),li=At.numPoints||1;let Qt=li;for(const fi of Rt){const bi=zt.points[fi];bi.zoom>Le&&(Qt+=bi.numPoints||1)}if(Qt>li&&Qt>=ot){let fi=At.x*li,bi=At.y*li,Ui=ct&&li>1?this._map(At,!0):null;const _i=(mt<<5)+(Le+1)+this.points.length;for(const Pi of Rt){const Vi=zt.points[Pi];if(Vi.zoom<=Le)continue;Vi.zoom=Le;const Fi=Vi.numPoints||1;fi+=Vi.x*Fi,bi+=Vi.y*Fi,Vi.parentId=_i,ct&&(Ui||(Ui=this._map(At,!0)),ct(Ui,this._map(Vi)))}At.parentId=_i,Ge.push(xe(fi/Qt,bi/Qt,_i,Qt,Ui))}else if(Ge.push(At),Qt>1)for(const fi of Rt){const bi=zt.points[fi];bi.zoom<=Le||(bi.zoom=Le,Ge.push(bi))}}return Ge}_getOriginId(be){return be-this.points.length>>5}_getOriginZoom(be){return(be-this.points.length)%32}_map(be,Le){if(be.numPoints)return Le?Ae({},be.properties):be.properties;const Ge=this.points[be.index].properties,Qe=this.options.map(Ge);return Le&&Qe===Ge?Ae({},Qe):Qe}}function xe(We,be,Le,Ge,Qe){return{x:J(We),y:J(be),zoom:1/0,id:Le,parentId:-1,numPoints:Ge,properties:Qe}}function Ce(We,be){const[Le,Ge]=We.geometry.coordinates;return{x:J(Ie(Le)),y:J(Ue(Ge)),zoom:1/0,index:be,parentId:-1}}function Ne(We){return{type:"Feature",id:We.id,properties:Te(We),geometry:{type:"Point",coordinates:[(be=We.x,360*(be-.5)),qe(We.y)]}};var be}function Te(We){const be=We.numPoints,Le=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be;return Ae(Ae({},We.properties),{cluster:!0,cluster_id:We.id,point_count:be,point_count_abbreviated:Le})}function Ie(We){return We/360+.5}function Ue(We){const be=Math.sin(We*Math.PI/180),Le=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return Le<0?0:Le>1?1:Le}function qe(We){const be=(180-360*We)*Math.PI/180;return 360*Math.atan(Math.exp(be))/Math.PI-90}function Ae(We,be){for(const Le in be)We[Le]=be[Le];return We}function ye(We){return We.x}function ge(We){return We.y}function Me(We,be,Le,Ge){for(var Qe,st=Ge,ct=Le-be>>1,ot=Le-be,rt=We[be],mt=We[be+1],At=We[Le],zt=We[Le+1],Rt=be+3;Rt<Le;Rt+=3){var li=De(We[Rt],We[Rt+1],rt,mt,At,zt);if(li>st)Qe=Rt,st=li;else if(li===st){var Qt=Math.abs(Rt-ct);Qt<ot&&(Qe=Rt,ot=Qt)}}st>Ge&&(Qe-be>3&&Me(We,be,Qe,Ge),We[Qe+2]=st,Le-Qe>3&&Me(We,Qe,Le,Ge))}function De(We,be,Le,Ge,Qe,st){var ct=Qe-Le,ot=st-Ge;if(ct!==0||ot!==0){var rt=((We-Le)*ct+(be-Ge)*ot)/(ct*ct+ot*ot);rt>1?(Le=Qe,Ge=st):rt>0&&(Le+=ct*rt,Ge+=ot*rt)}return(ct=We-Le)*ct+(ot=be-Ge)*ot}function Pe(We,be,Le,Ge){var Qe={id:We===void 0?null:We,type:be,geometry:Le,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var ct=st.geometry,ot=st.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")$e(st,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var rt=0;rt<ct.length;rt++)$e(st,ct[rt]);else if(ot==="MultiPolygon")for(rt=0;rt<ct.length;rt++)for(var mt=0;mt<ct[rt].length;mt++)$e(st,ct[rt][mt])}(Qe),Qe}function $e(We,be){for(var Le=0;Le<be.length;Le+=3)We.minX=Math.min(We.minX,be[Le]),We.minY=Math.min(We.minY,be[Le+1]),We.maxX=Math.max(We.maxX,be[Le]),We.maxY=Math.max(We.maxY,be[Le+1])}function Ke(We,be,Le,Ge){if(be.geometry){var Qe=be.geometry.coordinates,st=be.geometry.type,ct=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),ot=[],rt=be.id;if(Le.promoteId?rt=be.properties[Le.promoteId]:Le.generateId&&(rt=Ge||0),st==="Point")tt(Qe,ot);else if(st==="MultiPoint")for(var mt=0;mt<Qe.length;mt++)tt(Qe[mt],ot);else if(st==="LineString")nt(Qe,ot,ct,!1);else if(st==="MultiLineString"){if(Le.lineMetrics){for(mt=0;mt<Qe.length;mt++)nt(Qe[mt],ot=[],ct,!1),We.push(Pe(rt,"LineString",ot,be.properties));return}ht(Qe,ot,ct,!1)}else if(st==="Polygon")ht(Qe,ot,ct,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(mt=0;mt<be.geometry.geometries.length;mt++)Ke(We,{id:rt,geometry:be.geometry.geometries[mt],properties:be.properties},Le,Ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Qe.length;mt++){var At=[];ht(Qe[mt],At,ct,!0),ot.push(At)}}We.push(Pe(rt,st,ot,be.properties))}}function tt(We,be){be.push(gt(We[0])),be.push(Ct(We[1])),be.push(0)}function nt(We,be,Le,Ge){for(var Qe,st,ct=0,ot=0;ot<We.length;ot++){var rt=gt(We[ot][0]),mt=Ct(We[ot][1]);be.push(rt),be.push(mt),be.push(0),ot>0&&(ct+=Ge?(Qe*mt-rt*st)/2:Math.sqrt(Math.pow(rt-Qe,2)+Math.pow(mt-st,2))),Qe=rt,st=mt}var At=be.length-3;be[2]=1,Me(be,0,At,Le),be[At+2]=1,be.size=Math.abs(ct),be.start=0,be.end=be.size}function ht(We,be,Le,Ge){for(var Qe=0;Qe<We.length;Qe++){var st=[];nt(We[Qe],st,Le,Ge),be.push(st)}}function gt(We){return We/360+.5}function Ct(We){var be=Math.sin(We*Math.PI/180),Le=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return Le<0?0:Le>1?1:Le}function Lt(We,be,Le,Ge,Qe,st,ct,ot){if(Ge/=be,st>=(Le/=be)&&ct<Ge)return We;if(ct<Le||st>=Ge)return null;for(var rt=[],mt=0;mt<We.length;mt++){var At=We[mt],zt=At.geometry,Rt=At.type,li=Qe===0?At.minX:At.minY,Qt=Qe===0?At.maxX:At.maxY;if(li>=Le&&Qt<Ge)rt.push(At);else if(!(Qt<Le||li>=Ge)){var fi=[];if(Rt==="Point"||Rt==="MultiPoint")ft(zt,fi,Le,Ge,Qe);else if(Rt==="LineString")Et(zt,fi,Le,Ge,Qe,!1,ot.lineMetrics);else if(Rt==="MultiLineString")ai(zt,fi,Le,Ge,Qe,!1);else if(Rt==="Polygon")ai(zt,fi,Le,Ge,Qe,!0);else if(Rt==="MultiPolygon")for(var bi=0;bi<zt.length;bi++){var Ui=[];ai(zt[bi],Ui,Le,Ge,Qe,!0),Ui.length&&fi.push(Ui)}if(fi.length){if(ot.lineMetrics&&Rt==="LineString"){for(bi=0;bi<fi.length;bi++)rt.push(Pe(At.id,Rt,fi[bi],At.tags));continue}Rt!=="LineString"&&Rt!=="MultiLineString"||(fi.length===1?(Rt="LineString",fi=fi[0]):Rt="MultiLineString"),Rt!=="Point"&&Rt!=="MultiPoint"||(Rt=fi.length===3?"Point":"MultiPoint"),rt.push(Pe(At.id,Rt,fi,At.tags))}}}return rt.length?rt:null}function ft(We,be,Le,Ge,Qe){for(var st=0;st<We.length;st+=3){var ct=We[st+Qe];ct>=Le&&ct<=Ge&&(be.push(We[st]),be.push(We[st+1]),be.push(We[st+2]))}}function Et(We,be,Le,Ge,Qe,st,ct){for(var ot,rt,mt=Tt(We),At=Qe===0?qt:un,zt=We.start,Rt=0;Rt<We.length-3;Rt+=3){var li=We[Rt],Qt=We[Rt+1],fi=We[Rt+2],bi=We[Rt+3],Ui=We[Rt+4],_i=Qe===0?li:Qt,Pi=Qe===0?bi:Ui,Vi=!1;ct&&(ot=Math.sqrt(Math.pow(li-bi,2)+Math.pow(Qt-Ui,2))),_i<Le?Pi>Le&&(rt=At(mt,li,Qt,bi,Ui,Le),ct&&(mt.start=zt+ot*rt)):_i>Ge?Pi<Ge&&(rt=At(mt,li,Qt,bi,Ui,Ge),ct&&(mt.start=zt+ot*rt)):hi(mt,li,Qt,fi),Pi<Le&&_i>=Le&&(rt=At(mt,li,Qt,bi,Ui,Le),Vi=!0),Pi>Ge&&_i<=Ge&&(rt=At(mt,li,Qt,bi,Ui,Ge),Vi=!0),!st&&Vi&&(ct&&(mt.end=zt+ot*rt),be.push(mt),mt=Tt(We)),ct&&(zt+=ot)}var Fi=We.length-3;li=We[Fi],Qt=We[Fi+1],fi=We[Fi+2],(_i=Qe===0?li:Qt)>=Le&&_i<=Ge&&hi(mt,li,Qt,fi),Fi=mt.length-3,st&&Fi>=3&&(mt[Fi]!==mt[0]||mt[Fi+1]!==mt[1])&&hi(mt,mt[0],mt[1],mt[2]),mt.length&&be.push(mt)}function Tt(We){var be=[];return be.size=We.size,be.start=We.start,be.end=We.end,be}function ai(We,be,Le,Ge,Qe,st){for(var ct=0;ct<We.length;ct++)Et(We[ct],be,Le,Ge,Qe,st,!1)}function hi(We,be,Le,Ge){We.push(be),We.push(Le),We.push(Ge)}function qt(We,be,Le,Ge,Qe,st){var ct=(st-be)/(Ge-be);return We.push(st),We.push(Le+(Qe-Le)*ct),We.push(1),ct}function un(We,be,Le,Ge,Qe,st){var ct=(st-Le)/(Qe-Le);return We.push(be+(Ge-be)*ct),We.push(st),We.push(1),ct}function Qi(We,be){for(var Le=[],Ge=0;Ge<We.length;Ge++){var Qe,st=We[Ge],ct=st.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Qe=bn(st.geometry,be);else if(ct==="MultiLineString"||ct==="Polygon"){Qe=[];for(var ot=0;ot<st.geometry.length;ot++)Qe.push(bn(st.geometry[ot],be))}else if(ct==="MultiPolygon")for(Qe=[],ot=0;ot<st.geometry.length;ot++){for(var rt=[],mt=0;mt<st.geometry[ot].length;mt++)rt.push(bn(st.geometry[ot][mt],be));Qe.push(rt)}Le.push(Pe(st.id,ct,Qe,st.tags))}return Le}function bn(We,be){var Le=[];Le.size=We.size,We.start!==void 0&&(Le.start=We.start,Le.end=We.end);for(var Ge=0;Ge<We.length;Ge+=3)Le.push(We[Ge]+be,We[Ge+1],We[Ge+2]);return Le}function Bn(We,be){if(We.transformed)return We;var Le,Ge,Qe,st=1<<We.z,ct=We.x,ot=We.y;for(Le=0;Le<We.features.length;Le++){var rt=We.features[Le],mt=rt.geometry,At=rt.type;if(rt.geometry=[],At===1)for(Ge=0;Ge<mt.length;Ge+=2)rt.geometry.push(an(mt[Ge],mt[Ge+1],be,st,ct,ot));else for(Ge=0;Ge<mt.length;Ge++){var zt=[];for(Qe=0;Qe<mt[Ge].length;Qe+=2)zt.push(an(mt[Ge][Qe],mt[Ge][Qe+1],be,st,ct,ot));rt.geometry.push(zt)}}return We.transformed=!0,We}function an(We,be,Le,Ge,Qe,st){return[Math.round(Le*(We*Ge-Qe)),Math.round(Le*(be*Ge-st))]}function dt(We,be,Le,Ge,Qe){for(var st=be===Qe.maxZoom?0:Qe.tolerance/((1<<be)*Qe.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:Ge,z:be,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<We.length;ot++){ct.numFeatures++,vt(ct,We[ot],st,Qe);var rt=We[ot].minX,mt=We[ot].minY,At=We[ot].maxX,zt=We[ot].maxY;rt<ct.minX&&(ct.minX=rt),mt<ct.minY&&(ct.minY=mt),At>ct.maxX&&(ct.maxX=At),zt>ct.maxY&&(ct.maxY=zt)}return ct}function vt(We,be,Le,Ge){var Qe=be.geometry,st=be.type,ct=[];if(st==="Point"||st==="MultiPoint")for(var ot=0;ot<Qe.length;ot+=3)ct.push(Qe[ot]),ct.push(Qe[ot+1]),We.numPoints++,We.numSimplified++;else if(st==="LineString")It(ct,Qe,We,Le,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ot=0;ot<Qe.length;ot++)It(ct,Qe[ot],We,Le,st==="Polygon",ot===0);else if(st==="MultiPolygon")for(var rt=0;rt<Qe.length;rt++){var mt=Qe[rt];for(ot=0;ot<mt.length;ot++)It(ct,mt[ot],We,Le,!0,ot===0)}if(ct.length){var At=be.tags||null;if(st==="LineString"&&Ge.lineMetrics){for(var zt in At={},be.tags)At[zt]=be.tags[zt];At.mapbox_clip_start=Qe.start/Qe.size,At.mapbox_clip_end=Qe.end/Qe.size}var Rt={geometry:ct,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:At};be.id!==null&&(Rt.id=be.id),We.features.push(Rt)}}function It(We,be,Le,Ge,Qe,st){var ct=Ge*Ge;if(Ge>0&&be.size<(Qe?ct:Ge))Le.numPoints+=be.length/3;else{for(var ot=[],rt=0;rt<be.length;rt+=3)(Ge===0||be[rt+2]>ct)&&(Le.numSimplified++,ot.push(be[rt]),ot.push(be[rt+1])),Le.numPoints++;Qe&&function(mt,At){for(var zt=0,Rt=0,li=mt.length,Qt=li-2;Rt<li;Qt=Rt,Rt+=2)zt+=(mt[Rt]-mt[Qt])*(mt[Rt+1]+mt[Qt+1]);if(zt>0===At)for(Rt=0,li=mt.length;Rt<li/2;Rt+=2){var fi=mt[Rt],bi=mt[Rt+1];mt[Rt]=mt[li-2-Rt],mt[Rt+1]=mt[li-1-Rt],mt[li-2-Rt]=fi,mt[li-1-Rt]=bi}}(ot,st),We.push(ot)}}function Ft(We,be){var Le=(be=this.options=function(Qe,st){for(var ct in st)Qe[ct]=st[ct];return Qe}(Object.create(this.options),be)).debug;if(Le&&console.time("preprocess data"),be.maxZoom<0||be.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(be.promoteId&&be.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge=function(Qe,st){var ct=[];if(Qe.type==="FeatureCollection")for(var ot=0;ot<Qe.features.length;ot++)Ke(ct,Qe.features[ot],st,ot);else Ke(ct,Qe.type==="Feature"?Qe:{geometry:Qe},st);return ct}(We,be);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",be.indexMaxZoom,be.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ge=function(Qe,st){var ct=st.buffer/st.extent,ot=Qe,rt=Lt(Qe,1,-1-ct,ct,0,-1,2,st),mt=Lt(Qe,1,1-ct,2+ct,0,-1,2,st);return(rt||mt)&&(ot=Lt(Qe,1,-ct,1+ct,0,-1,2,st)||[],rt&&(ot=Qi(rt,1).concat(ot)),mt&&(ot=ot.concat(Qi(mt,-1)))),ot}(Ge,be),Ge.length&&this.splitTile(Ge,0,0,0),Le&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(We,be,Le){return 32*((1<<We)*Le+be)+We}function vi(We,be){const Le=We.tileID.canonical;if(!this._geoJSONIndex)return be(null,null);const Ge=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!Ge)return be(null,null);const Qe=new k(Ge.features);let st=N.exports(Qe);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),be(null,{vectorTile:Qe,rawData:st.buffer})}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(We,be,Le,Ge,Qe,st,ct){for(var ot=[We,be,Le,Ge],rt=this.options,mt=rt.debug;ot.length;){Ge=ot.pop(),Le=ot.pop(),be=ot.pop(),We=ot.pop();var At=1<<be,zt=Yt(be,Le,Ge),Rt=this.tiles[zt];if(!Rt&&(mt>1&&console.time("creation"),Rt=this.tiles[zt]=dt(We,be,Le,Ge,rt),this.tileCoords.push({z:be,x:Le,y:Ge}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",be,Le,Ge,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));var li="z"+be;this.stats[li]=(this.stats[li]||0)+1,this.total++}if(Rt.source=We,Qe){if(be===rt.maxZoom||be===Qe)continue;var Qt=1<<Qe-be;if(Le!==Math.floor(st/Qt)||Ge!==Math.floor(ct/Qt))continue}else if(be===rt.indexMaxZoom||Rt.numPoints<=rt.indexMaxPoints)continue;if(Rt.source=null,We.length!==0){mt>1&&console.time("clipping");var fi,bi,Ui,_i,Pi,Vi,Fi=.5*rt.buffer/rt.extent,fn=.5-Fi,Yn=.5+Fi,br=1+Fi;fi=bi=Ui=_i=null,Pi=Lt(We,At,Le-Fi,Le+Yn,0,Rt.minX,Rt.maxX,rt),Vi=Lt(We,At,Le+fn,Le+br,0,Rt.minX,Rt.maxX,rt),We=null,Pi&&(fi=Lt(Pi,At,Ge-Fi,Ge+Yn,1,Rt.minY,Rt.maxY,rt),bi=Lt(Pi,At,Ge+fn,Ge+br,1,Rt.minY,Rt.maxY,rt),Pi=null),Vi&&(Ui=Lt(Vi,At,Ge-Fi,Ge+Yn,1,Rt.minY,Rt.maxY,rt),_i=Lt(Vi,At,Ge+fn,Ge+br,1,Rt.minY,Rt.maxY,rt),Vi=null),mt>1&&console.timeEnd("clipping"),ot.push(fi||[],be+1,2*Le,2*Ge),ot.push(bi||[],be+1,2*Le,2*Ge+1),ot.push(Ui||[],be+1,2*Le+1,2*Ge),ot.push(_i||[],be+1,2*Le+1,2*Ge+1)}}},Ft.prototype.getTile=function(We,be,Le){var Ge=this.options,Qe=Ge.extent,st=Ge.debug;if(We<0||We>24)return null;var ct=1<<We,ot=Yt(We,be=(be%ct+ct)%ct,Le);if(this.tiles[ot])return Bn(this.tiles[ot],Qe);st>1&&console.log("drilling down to z%d-%d-%d",We,be,Le);for(var rt,mt=We,At=be,zt=Le;!rt&&mt>0;)mt--,At=Math.floor(At/2),zt=Math.floor(zt/2),rt=this.tiles[Yt(mt,At,zt)];return rt&&rt.source?(st>1&&console.log("found parent tile z%d-%d-%d",mt,At,zt),st>1&&console.time("drilling down"),this.splitTile(rt.source,mt,At,zt,We,be,Le),st>1&&console.timeEnd("drilling down"),this.tiles[ot]?Bn(this.tiles[ot],Qe):null):null};class Oi extends C{constructor(be,Le,Ge,Qe){super(be,Le,Ge,vi),Qe&&(this.loadGeoJSON=Qe)}loadData(be,Le){var Ge;(Ge=this._pendingRequest)===null||Ge===void 0||Ge.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Qe=!!(be&&be.request&&be.request.collectResourceTiming)&&new r.RequestPerformance(be.request);this._pendingCallback=Le,this._pendingRequest=this.loadGeoJSON(be,(st,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,st||!ct)return Le(st);if(typeof ct!="object")return Le(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));{S(ct,!0);try{if(be.filter){const rt=r.createExpression(be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map(At=>`${At.key}: ${At.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(At=>rt.value.evaluate({zoom:0},At))}}this._geoJSONIndex=be.cluster?new de(function({superclusterOptions:rt,clusterProperties:mt}){if(!mt||!rt)return rt;const At={},zt={},Rt={accumulated:null,zoom:0},li={properties:null},Qt=Object.keys(mt);for(const fi of Qt){const[bi,Ui]=mt[fi],_i=r.createExpression(Ui),Pi=r.createExpression(typeof bi=="string"?[bi,["accumulated"],["get",fi]]:bi);At[fi]=_i.value,zt[fi]=Pi.value}return rt.map=fi=>{li.properties=fi;const bi={};for(const Ui of Qt)bi[Ui]=At[Ui].evaluate(Rt,li);return bi},rt.reduce=(fi,bi)=>{li.properties=bi;for(const Ui of Qt)Rt.accumulated=fi[Ui],fi[Ui]=zt[Ui].evaluate(Rt,li)},rt}(be)).load(ct.features):function(rt,mt){return new Ft(rt,mt)}(ct,be.geojsonVtOptions)}catch(rt){return Le(rt)}this.loaded={};const ot={};if(Qe){const rt=Qe.finish();rt&&(ot.resourceTiming={},ot.resourceTiming[be.source]=JSON.parse(JSON.stringify(rt)))}Le(null,ot)}})}reloadTile(be,Le){const Ge=this.loaded;return Ge&&Ge[be.uid]?super.reloadTile(be,Le):this.loadTile(be,Le)}loadGeoJSON(be,Le){if(be.request)return r.getJSON(be.request,Le);if(typeof be.data=="string")try{Le(null,JSON.parse(be.data))}catch{Le(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`))}else Le(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(be,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()}getClusterExpansionZoom(be,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(be.clusterId))}catch(Ge){Le(Ge)}}getClusterChildren(be,Le){try{Le(null,this._geoJSONIndex.getChildren(be.clusterId))}catch(Ge){Le(Ge)}}getClusterLeaves(be,Le){try{Le(null,this._geoJSONIndex.getLeaves(be.clusterId,be.limit,be.offset))}catch(Ge){Le(Ge)}}}class pi{constructor(be){this.self=be,this.actor=new r.Actor(be,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:Oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Le,Ge)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=Ge},this.self.registerRTLTextPlugin=Le=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Le.applyArabicShaping,r.plugin.processBidirectionalText=Le.processBidirectionalText,r.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}}setReferrer(be,Le){this.referrer=Le}setImages(be,Le,Ge){this.availableImages[be]=Le;for(const Qe in this.workerSources[be]){const st=this.workerSources[be][Qe];for(const ct in st)st[ct].availableImages=Le}Ge()}setLayers(be,Le,Ge){this.getLayerIndex(be).replace(Le),Ge()}updateLayers(be,Le,Ge){this.getLayerIndex(be).update(Le.layers,Le.removedIds),Ge()}loadTile(be,Le,Ge){this.getWorkerSource(be,Le.type,Le.source).loadTile(Le,Ge)}loadDEMTile(be,Le,Ge){this.getDEMWorkerSource(be,Le.source).loadTile(Le,Ge)}reloadTile(be,Le,Ge){this.getWorkerSource(be,Le.type,Le.source).reloadTile(Le,Ge)}abortTile(be,Le,Ge){this.getWorkerSource(be,Le.type,Le.source).abortTile(Le,Ge)}removeTile(be,Le,Ge){this.getWorkerSource(be,Le.type,Le.source).removeTile(Le,Ge)}removeDEMTile(be,Le){this.getDEMWorkerSource(be,Le.source).removeTile(Le)}removeSource(be,Le,Ge){if(!this.workerSources[be]||!this.workerSources[be][Le.type]||!this.workerSources[be][Le.type][Le.source])return;const Qe=this.workerSources[be][Le.type][Le.source];delete this.workerSources[be][Le.type][Le.source],Qe.removeSource!==void 0?Qe.removeSource(Le,Ge):Ge()}loadWorkerSource(be,Le,Ge){try{this.self.importScripts(Le.url),Ge()}catch(Qe){Ge(Qe.toString())}}syncRTLPluginState(be,Le,Ge){try{r.plugin.setState(Le);const Qe=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Qe!=null){this.self.importScripts(Qe);const st=r.plugin.isParsed();Ge(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Qe}`),st)}}catch(Qe){Ge(Qe.toString())}}getAvailableImages(be){let Le=this.availableImages[be];return Le||(Le=[]),Le}getLayerIndex(be){let Le=this.layerIndexes[be];return Le||(Le=this.layerIndexes[be]=new m),Le}getWorkerSource(be,Le,Ge){if(this.workerSources[be]||(this.workerSources[be]={}),this.workerSources[be][Le]||(this.workerSources[be][Le]={}),!this.workerSources[be][Le][Ge]){const Qe={send:(st,ct,ot)=>{this.actor.send(st,ct,ot,be)}};this.workerSources[be][Le][Ge]=new this.workerSourceTypes[Le](Qe,this.getLayerIndex(be),this.getAvailableImages(be))}return this.workerSources[be][Le][Ge]}getDEMWorkerSource(be,Le){return this.demWorkerSources[be]||(this.demWorkerSources[be]={}),this.demWorkerSources[be][Le]||(this.demWorkerSources[be][Le]=new E),this.demWorkerSources[be][Le]}enforceCacheSizeLimit(be,Le){r.enforceCacheSizeLimit(Le)}}return r.isWorker()&&(self.worker=new pi(self)),pi}),l(["./shared"],function(r){var p=f;function f(M){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,I,O=new Blob([""],{type:"text/javascript"}),te=URL.createObjectURL(O);try{I=new Worker(te),w=!0}catch{w=!1}return I&&I.terminate(),URL.revokeObjectURL(te),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var I=w.getContext("2d");if(!I)return!1;var O=I.getImageData(0,0,1,1);return O&&O.width===w.width}()?(m[h=o&&o.failIfMajorPerformanceCaveat]===void 0&&(m[h]=function(w){var I,O=function(te){var ue=document.createElement("canvas"),me=Object.create(f.webGLContextAttributes);return me.failIfMajorPerformanceCaveat=te,ue.getContext("webgl",me)||ue.getContext("experimental-webgl",me)}(w);if(!O)return!1;try{I=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!I||O.isContextLost())&&(O.shaderSource(I,"void main() {}"),O.compileShader(I),O.getShaderParameter(I,O.COMPILE_STATUS)===!0)}(h)),m[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(M)}var m={};function v(M,o){if(Array.isArray(M)){if(!Array.isArray(o)||M.length!==o.length)return!1;for(let h=0;h<M.length;h++)if(!v(M[h],o[h]))return!1;return!0}if(typeof M=="object"&&M!==null&&o!==null){if(typeof o!="object"||Object.keys(M).length!==Object.keys(o).length)return!1;for(const h in M)if(!v(M[h],o[h]))return!1;return!0}return M===o}f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(o){if(!y.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in y.docStyle)return o[h];return o[0]}static create(o,h,w){const I=window.document.createElement(o);return h!==void 0&&(I.className=h),w&&w.appendChild(I),I}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(o,h){o.style[y.transformProp]=h}static addEventListener(o,h,w,I={}){o.addEventListener(h,w,"passive"in I?I:I.capture)}static removeEventListener(o,h,w,I={}){o.removeEventListener(h,w,"passive"in I?I:I.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(o,h){const w=o.getBoundingClientRect();return new r.pointGeometry(h.clientX-w.left-o.clientLeft,h.clientY-w.top-o.clientTop)}static touchPos(o,h){const w=o.getBoundingClientRect(),I=[];for(let O=0;O<h.length;O++)I.push(new r.pointGeometry(h[O].clientX-w.left-o.clientLeft,h[O].clientY-w.top-o.clientTop));return I}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class _{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,w){const I=function(O){const te=O.match(b);if(!te)throw new Error(`Unable to parse URL "${O}"`);return{protocol:te[1],authority:te[2],path:te[3]||"/",params:te[4]?te[4].split("&"):[]}}(o);return I.path+=`${h}${w}`,function(O){const te=O.params.length?`?${O.params.join("&")}`:"";return`${O.protocol}://${O.authority}${O.path}${te}`}(I)}setTransformRequest(o){this._transformRequestFn=o}}const b=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class C{constructor(o,h,w,I){this.context=o,this.format=w,this.texture=o.gl.createTexture(),this.update(h,I)}update(o,h,w){const{width:I,height:O}=o,te=!(this.size&&this.size[0]===I&&this.size[1]===O||w),{context:ue}=this,{gl:me}=ue;if(this.useMipmap=!!(h&&h.useMipmap),me.bindTexture(me.TEXTURE_2D,this.texture),ue.pixelStoreUnpackFlipY.set(!1),ue.pixelStoreUnpack.set(1),ue.pixelStoreUnpackPremultiplyAlpha.set(this.format===me.RGBA&&(!h||h.premultiply!==!1)),te)this.size=[I,O],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?me.texImage2D(me.TEXTURE_2D,0,this.format,this.format,me.UNSIGNED_BYTE,o):me.texImage2D(me.TEXTURE_2D,0,this.format,I,O,0,this.format,me.UNSIGNED_BYTE,o.data);else{const{x:Se,y:ze}=w||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?me.texSubImage2D(me.TEXTURE_2D,0,Se,ze,me.RGBA,me.UNSIGNED_BYTE,o):me.texSubImage2D(me.TEXTURE_2D,0,Se,ze,I,O,me.RGBA,me.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&me.generateMipmap(me.TEXTURE_2D)}bind(o,h,w){const{context:I}=this,{gl:O}=I;O.bindTexture(O.TEXTURE_2D,this.texture),w!==O.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=O.LINEAR),o!==this.filter&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,o),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,w||o),this.filter=o),h!==this.wrap&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,h),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function E(M){const{userImage:o}=M;return!!(o&&o.render&&o.render())&&(M.data.replace(new Uint8Array(o.data.buffer)),!0)}class S extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:h,callback:w}of this.requestors)this._notify(h,w);this.requestors=[]}}getImage(o){return this.images[o]}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let w=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),w=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),w=!1),this._validateContent(h.content,h)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),w=!1),w}_validateStretch(o,h){if(!o)return!0;let w=0;for(const I of o){if(I[0]<w||I[1]<I[0]||h<I[1])return!1;w=I[1]}return!0}_validateContent(o,h){return!(o&&(o.length!==4||o[0]<0||h.data.width<o[0]||o[1]<0||h.data.height<o[1]||o[2]<0||h.data.width<o[2]||o[3]<0||h.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,h){const w=this.images[o];if(w.data.width!==h.data.width||w.data.height!==h.data.height)throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=w.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){const h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,h){let w=!0;if(!this.isLoaded())for(const I of o)this.images[I]||(w=!1);this.isLoaded()||w?this._notify(o,h):this.requestors.push({ids:o,callback:h})}_notify(o,h){const w={};for(const I of o){this.images[I]||this.fire(new r.Event("styleimagemissing",{id:I}));const O=this.images[I];O?w[I]={data:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,hasRenderCallback:!!(O.userImage&&O.userImage.render)}:r.warnOnce(`Image "${I}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,w)}getPixelSize(){const{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){const h=this.patterns[o],w=this.getImage(o);if(!w)return null;if(h&&h.position.version===w.version)return h.position;if(h)h.position.version=w.version;else{const I={w:w.data.width+2,h:w.data.height+2,x:0,y:0},O=new r.ImagePosition(I,w);this.patterns[o]={bin:I,position:O}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new C(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const O in this.patterns)o.push(this.patterns[O].bin);const{w:h,h:w}=r.potpack(o),I=this.atlasImage;I.resize({width:h||1,height:w||1});for(const O in this.patterns){const{bin:te}=this.patterns[O],ue=te.x+1,me=te.y+1,Se=this.images[O].data,ze=Se.width,Ve=Se.height;r.RGBAImage.copy(Se,I,{x:0,y:0},{x:ue,y:me},{width:ze,height:Ve}),r.RGBAImage.copy(Se,I,{x:0,y:Ve-1},{x:ue,y:me-1},{width:ze,height:1}),r.RGBAImage.copy(Se,I,{x:0,y:0},{x:ue,y:me+Ve},{width:ze,height:1}),r.RGBAImage.copy(Se,I,{x:ze-1,y:0},{x:ue-1,y:me},{width:1,height:Ve}),r.RGBAImage.copy(Se,I,{x:0,y:0},{x:ue+ze,y:me},{width:1,height:Ve})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const w=this.images[h];w||r.warnOnce(`Image with ID: "${h}" was not found`),E(w)&&this.updateImage(h,w)}}}const x=1e20;function A(M,o,h,w,I,O,te,ue,me){for(let Se=o;Se<o+w;Se++)D(M,h*O+Se,O,I,te,ue,me);for(let Se=h;Se<h+I;Se++)D(M,Se*O+o,1,w,te,ue,me)}function D(M,o,h,w,I,O,te){O[0]=0,te[0]=-1e20,te[1]=x,I[0]=M[o];for(let ue=1,me=0,Se=0;ue<w;ue++){I[ue]=M[o+ue*h];const ze=ue*ue;do{const Ve=O[me];Se=(I[ue]-I[Ve]+ze-Ve*Ve)/(ue-Ve)/2}while(Se<=te[me]&&--me>-1);me++,O[me]=ue,te[me]=Se,te[me+1]=x}for(let ue=0,me=0;ue<w;ue++){for(;te[me+1]<ue;)me++;const Se=O[me],ze=ue-Se;M[o+ue*h]=I[Se]+ze*ze}}class T{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o,h){const w=[];for(const I in o)for(const O of o[I])w.push({stack:I,id:O});r.asyncAll(w,({stack:I,id:O},te)=>{let ue=this.entries[I];ue||(ue=this.entries[I]={glyphs:{},requests:{},ranges:{}});let me=ue.glyphs[O];if(me!==void 0)return void te(null,{stack:I,id:O,glyph:me});if(me=this._tinySDF(ue,I,O),me)return ue.glyphs[O]=me,void te(null,{stack:I,id:O,glyph:me});const Se=Math.floor(O/256);if(256*Se>65535)return void te(new Error("glyphs > 65535 not supported"));if(ue.ranges[Se])return void te(null,{stack:I,id:O,glyph:me});let ze=ue.requests[Se];ze||(ze=ue.requests[Se]=[],T.loadGlyphRange(I,Se,this.url,this.requestManager,(Ve,Ye)=>{if(Ye){for(const it in Ye)this._doesCharSupportLocalGlyph(+it)||(ue.glyphs[+it]=Ye[+it]);ue.ranges[Se]=!0}for(const it of ze)it(Ve,Ye);delete ue.requests[Se]})),ze.push((Ve,Ye)=>{Ve?te(Ve):Ye&&te(null,{stack:I,id:O,glyph:Ye[O]||null})})},(I,O)=>{if(I)h(I);else if(O){const te={};for(const{stack:ue,id:me,glyph:Se}of O)(te[ue]||(te[ue]={}))[me]=Se&&{id:Se.id,bitmap:Se.bitmap.clone(),metrics:Se.metrics};h(null,te)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](o)||r.unicodeBlockLookup["Hangul Syllables"](o)||r.unicodeBlockLookup.Hiragana(o)||r.unicodeBlockLookup.Katakana(o))}_tinySDF(o,h,w){const I=this.localIdeographFontFamily;if(!I||!this._doesCharSupportLocalGlyph(w))return;let O=o.tinySDF;if(!O){let ue="400";/bold/i.test(h)?ue="900":/medium/i.test(h)?ue="500":/light/i.test(h)&&(ue="200"),O=o.tinySDF=new T.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:I,fontWeight:ue})}const te=O.draw(String.fromCharCode(w));return{id:w,bitmap:new r.AlphaImage({width:te.width||30,height:te.height||30},te.data),metrics:{width:te.glyphWidth||24,height:te.glyphHeight||24,left:te.glyphLeft||0,top:te.glyphTop-27||-8,advance:te.glyphAdvance||24}}}}T.loadGlyphRange=function(M,o,h,w,I){const O=256*o,te=O+255,ue=w.transformRequest(h.replace("{fontstack}",M).replace("{range}",`${O}-${te}`),r.ResourceType.Glyphs);r.getArrayBuffer(ue,(me,Se)=>{if(me)I(me);else if(Se){const ze={};for(const Ve of r.parseGlyphPbf(Se))ze[Ve.id]=Ve;I(null,ze)}})},T.TinySDF=class{constructor({fontSize:M=24,buffer:o=3,radius:h=8,cutoff:w=.25,fontFamily:I="sans-serif",fontWeight:O="normal",fontStyle:te="normal"}={}){this.buffer=o,this.cutoff=w,this.radius=h;const ue=this.size=M+4*o,me=this._createCanvas(ue),Se=this.ctx=me.getContext("2d",{willReadFrequently:!0});Se.font=`${te} ${O} ${M}px ${I}`,Se.textBaseline="alphabetic",Se.textAlign="left",Se.fillStyle="black",this.gridOuter=new Float64Array(ue*ue),this.gridInner=new Float64Array(ue*ue),this.f=new Float64Array(ue),this.z=new Float64Array(ue+1),this.v=new Uint16Array(ue)}_createCanvas(M){const o=document.createElement("canvas");return o.width=o.height=M,o}draw(M){const{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:w,actualBoundingBoxLeft:I,actualBoundingBoxRight:O}=this.ctx.measureText(M),te=Math.ceil(h),ue=Math.min(this.size-this.buffer,Math.ceil(O-I)),me=Math.min(this.size-this.buffer,te+Math.ceil(w)),Se=ue+2*this.buffer,ze=me+2*this.buffer,Ve=Math.max(Se*ze,0),Ye=new Uint8ClampedArray(Ve),it={data:Ye,width:Se,height:ze,glyphWidth:ue,glyphHeight:me,glyphTop:te,glyphLeft:0,glyphAdvance:o};if(ue===0||me===0)return it;const{ctx:Je,buffer:et,gridInner:pt,gridOuter:yt}=this;Je.clearRect(et,et,ue,me),Je.fillText(M,et,et+te);const wt=Je.getImageData(et,et,ue,me);yt.fill(x,0,Ve),pt.fill(0,0,Ve);for(let at=0;at<me;at++)for(let Mt=0;Mt<ue;Mt++){const St=wt.data[4*(at*ue+Mt)+3]/255;if(St===0)continue;const jt=(at+et)*Se+Mt+et;if(St===1)yt[jt]=0,pt[jt]=x;else{const Ot=.5-St;yt[jt]=Ot>0?Ot*Ot:0,pt[jt]=Ot<0?Ot*Ot:0}}A(yt,0,0,Se,ze,Se,this.f,this.v,this.z),A(pt,et,et,ue,me,Se,this.f,this.v,this.z);for(let at=0;at<Ve;at++){const Mt=Math.sqrt(yt[at])-Math.sqrt(pt[at]);Ye[at]=Math.round(255-255*(Mt/this.radius+this.cutoff))}return it}};const k=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(M,o){return r.sphericalToCartesian(M.expression.evaluate(o))}interpolate(M,o,h){return{x:r.number(M.x,o.x,h),y:r.number(M.y,o.y,h),z:r.number(M.z,o.z,h)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),N="-transition";class W extends r.Evented{constructor(o){super(),this._transitionable=new r.Transitionable(k),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(r.validateLight,o,h))for(const w in o){const I=o[w];w.endsWith(N)?this._transitionable.setTransition(w.slice(0,-N.length),I):this._transitionable.setValue(w,I)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,w){return(!w||w.validate!==!1)&&r.emitValidationErrors(this,o.call(r.validateStyle,r.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class Z{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){const w=o.join(",")+String(h);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(o,h)),this.dashEntry[w]}getDashRanges(o,h,w){const I=[];let O=o.length%2==1?-o[o.length-1]*w:0,te=o[0]*w,ue=!0;I.push({left:O,right:te,isDash:ue,zeroLength:o[0]===0});let me=o[0];for(let Se=1;Se<o.length;Se++){ue=!ue;const ze=o[Se];O=me*w,me+=ze,te=me*w,I.push({left:O,right:te,isDash:ue,zeroLength:ze===0})}return I}addRoundDash(o,h,w){const I=h/2;for(let O=-w;O<=w;O++){const te=this.width*(this.nextRow+w+O);let ue=0,me=o[ue];for(let Se=0;Se<this.width;Se++){Se/me.right>1&&(me=o[++ue]);const ze=Math.abs(Se-me.left),Ve=Math.abs(Se-me.right),Ye=Math.min(ze,Ve);let it;const Je=O/w*(I+1);if(me.isDash){const et=I-Math.abs(Je);it=Math.sqrt(Ye*Ye+et*et)}else it=I-Math.sqrt(Ye*Ye+Je*Je);this.data[te+Se]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(o){for(let ue=o.length-1;ue>=0;--ue){const me=o[ue],Se=o[ue+1];me.zeroLength?o.splice(ue,1):Se&&Se.isDash===me.isDash&&(Se.left=me.left,o.splice(ue,1))}const h=o[0],w=o[o.length-1];h.isDash===w.isDash&&(h.left=w.left-this.width,w.right=h.right+this.width);const I=this.width*this.nextRow;let O=0,te=o[O];for(let ue=0;ue<this.width;ue++){ue/te.right>1&&(te=o[++O]);const me=Math.abs(ue-te.left),Se=Math.abs(ue-te.right),ze=Math.min(me,Se);this.data[I+ue]=Math.max(0,Math.min(255,(te.isDash?ze:-ze)+128))}}addDash(o,h){const w=h?7:0,I=2*w+1;if(this.nextRow+I>this.height)return r.warnOnce("LineAtlas out of space"),null;let O=0;for(let ue=0;ue<o.length;ue++)O+=o[ue];if(O!==0){const ue=this.width/O,me=this.getDashRanges(o,this.width,ue);h?this.addRoundDash(me,ue,w):this.addRegularDash(me)}const te={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:O};return this.nextRow+=I,this.dirty=!0,te}bind(o){const h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class K{constructor(o,h){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const w=this.workerPool.acquire(this.id);for(let I=0;I<w.length;I++){const O=new K.Actor(w[I],h,this.id);O.name=`Worker ${I}`,this.actors.push(O)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h,w){r.asyncAll(this.actors,(I,O)=>{I.send(o,h,O)},w=w||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function j(M,o,h){const w=function(I,O){if(I)return h(I);if(O){const te=r.pick(r.extend(O,M),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(te.vectorLayers=O.vector_layers,te.vectorLayerIds=te.vectorLayers.map(ue=>ue.id)),h(null,te)}};return M.url?r.getJSON(o.transformRequest(M.url,r.ResourceType.Source),w):r.exported.frame(()=>w(null,M))}K.Actor=r.Actor;class V{constructor(o,h,w){this.bounds=r.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=w||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const h=Math.pow(2,o.z),w=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*h),I=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*h),O=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*h),te=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*h);return o.x>=w&&o.x<O&&o.y>=I&&o.y<te}}class $ extends r.Evented{constructor(o,h,w,I){if(super(),this.id=o,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(h,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(I)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new r.ErrorEvent(o)):h&&(r.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(o,h){const w=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),I={request:this.map._requestManager.transformRequest(w,r.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function O(te,ue){return delete o.request,o.aborted?h(null):te&&te.status!==404?h(te):(ue&&ue.resourceTiming&&(o.resourceTiming=ue.resourceTiming),this.map._refreshExpiredTiles&&ue&&o.setExpiryData(ue),o.loadVectorData(ue,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}I.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",I,O.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",I,O.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class L extends r.Evented{constructor(o,h,w,I){super(),this.id=o,this.dispatcher=w,this.setEventedParent(I),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},h),r.extend(this,r.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):h&&(r.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,h){const w=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=r.getImage(this.map._requestManager.transformRequest(w,r.ResourceType.Tile),(I,O,te)=>{if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(I)o.state="errored",h(I);else if(O){this.map._refreshExpiredTiles&&o.setExpiryData(te);const ue=this.map.painter.context,me=ue.gl;o.texture=this.map.painter.getTileTexture(O.width),o.texture?o.texture.update(O,{useMipmap:!0}):(o.texture=new C(ue,O,me.RGBA,{useMipmap:!0}),o.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),ue.extTextureFilterAnisotropic&&me.texParameterf(me.TEXTURE_2D,ue.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ue.extTextureFilterAnisotropicMax)),o.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),h(null)}})}abortTile(o,h){o.request&&(o.request.cancel(),delete o.request),h()}unloadTile(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()}hasTransition(){return!1}}let R;class G extends L{constructor(o,h,w,I){super(o,h,w,I),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,h){const w=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function I(O,te){O&&(o.state="errored",h(O)),te&&(o.dem=te,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",h(null))}o.request=r.getImage(this.map._requestManager.transformRequest(w,r.ResourceType.Tile),(function(O,te){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(O)o.state="errored",h(O);else if(te){this.map._refreshExpiredTiles&&o.setExpiryData(te),delete te.cacheControl,delete te.expires;const ue=r.isImageBitmap(te)&&(R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R)?te:r.exported.getImageData(te,1),me={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:ue,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",me,I.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const h=o.canonical,w=Math.pow(2,h.z),I=(h.x-1+w)%w,O=h.x===0?o.wrap-1:o.wrap,te=(h.x+1+w)%w,ue=h.x+1===w?o.wrap+1:o.wrap,me={};return me[new r.OverscaledTileID(o.overscaledZ,O,h.z,I,h.y).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ue,h.z,te,h.y).key]={backfilled:!1},h.y>0&&(me[new r.OverscaledTileID(o.overscaledZ,O,h.z,I,h.y-1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ue,h.z,te,h.y-1).key]={backfilled:!1}),h.y+1<w&&(me[new r.OverscaledTileID(o.overscaledZ,O,h.z,I,h.y+1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ue,h.z,te,h.y+1).key]={backfilled:!1}),me}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class U extends r.Evented{constructor(o,h,w,I){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(I),this._data=h.data,this._options=r.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const O=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*O,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*O,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:r.EXTENT,radius:(h.clusterRadius||50)*O,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData("content"),this}getClusterExpansionZoom(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this}getClusterChildren(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this}getClusterLeaves(o,h,w,I){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:w},I),this}_updateWorkerData(o){const h=r.extend({},this.workerOptions),w=this._data;typeof w=="string"?(h.request=this.map._requestManager.transformRequest(r.exported.resolveURL(w),r.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(w),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(I,O)=>{if(this._pendingLoads--,this._removed||O&&O.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:o}));let te=null;if(O&&O.resourceTiming&&O.resourceTiming[this.id]&&(te=O.resourceTiming[this.id].slice(0)),I)return void this.fire(new r.ErrorEvent(I));const ue={dataType:"source",sourceDataType:o};this._collectResourceTiming&&te&&te.length>0&&r.extend(ue,{resourceTiming:te}),this.fire(new r.Event("data",ue))})}loaded(){return this._pendingLoads===0}loadTile(o,h){const w=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const I={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(w,I,(O,te)=>(delete o.request,o.unloadVectorData(),o.aborted?h(null):O?h(O):(o.loadVectorData(te,this.map.painter,w==="reloadTile"),h(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var B=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class H extends r.Evented{constructor(o,h,w,I){super(),this.id=o,this.dispatcher=w,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(I),this.options=h}load(o,h){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(w,I)=>{this._loaded=!0,w?this.fire(new r.ErrorEvent(w)):I&&(this.image=I,o&&(this.coordinates=o),h&&h(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}setCoordinates(o){this.coordinates=o;const h=o.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(I){let O=1/0,te=1/0,ue=-1/0,me=-1/0;for(const Ye of I)O=Math.min(O,Ye.x),te=Math.min(te,Ye.y),ue=Math.max(ue,Ye.x),me=Math.max(me,Ye.y);const Se=Math.max(ue-O,me-te),ze=Math.max(0,Math.floor(-Math.log(Se)/Math.LN2)),Ve=Math.pow(2,ze);return new r.CanonicalTileID(ze,Math.floor((O+ue)/2*Ve),Math.floor((te+me)/2*Ve))}(h),this.minzoom=this.maxzoom=this.tileID.z;const w=h.map(I=>this.tileID.getTilePoint(I)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new C(o,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const w in this.tiles){const I=this.tiles[w];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture)}}loadTile(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class q extends H{constructor(o,h,w,I){super(o,h,w,I),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const h of o.urls)this.urls.push(this.map._requestManager.transformRequest(h,r.ResourceType.Source).url);r.getVideo(this.urls,(h,w)=>{this._loaded=!0,h?this.fire(new r.ErrorEvent(h)):w&&(this.video=w,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new C(o,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const w in this.tiles){const I=this.tiles[w];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ae extends H{constructor(o,h,w,I){super(o,h,w,I),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(O=>!Array.isArray(O)||O.length!==2||O.some(te=>typeof te!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,w=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new C(h,this.canvas,w.RGBA,{premultiply:!0});for(const I in this.tiles){const O=this.tiles[I];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const fe={vector:$,raster:L,"raster-dem":G,geojson:U,video:q,image:H,canvas:ae};function re(M,o){const h=r.create();return r.translate(h,h,[1,1,0]),r.scale(h,h,[.5*M.width,.5*M.height,1]),r.multiply(h,h,M.calculatePosMatrix(o.toUnwrapped()))}function ce(M,o,h,w,I,O){const te=function(Ve,Ye,it){if(Ve)for(const Je of Ve){const et=Ye[Je];if(et&&et.source===it&&et.type==="fill-extrusion")return!0}else for(const Je in Ye){const et=Ye[Je];if(et.source===it&&et.type==="fill-extrusion")return!0}return!1}(I&&I.layers,o,M.id),ue=O.maxPitchScaleFactor(),me=M.tilesIn(w,ue,te);me.sort(ke);const Se=[];for(const Ve of me)Se.push({wrappedTileID:Ve.tileID.wrapped().key,queryResults:Ve.tile.queryRenderedFeatures(o,h,M._state,Ve.queryGeometry,Ve.cameraQueryGeometry,Ve.scale,I,O,ue,re(M.transform,Ve.tileID))});const ze=function(Ve){const Ye={},it={};for(const Je of Ve){const et=Je.queryResults,pt=Je.wrappedTileID,yt=it[pt]=it[pt]||{};for(const wt in et){const at=et[wt],Mt=yt[wt]=yt[wt]||{},St=Ye[wt]=Ye[wt]||[];for(const jt of at)Mt[jt.featureIndex]||(Mt[jt.featureIndex]=!0,St.push(jt))}}return Ye}(Se);for(const Ve in ze)ze[Ve].forEach(Ye=>{const it=Ye.feature,Je=M.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=Je});return ze}function ke(M,o){const h=M.tileID,w=o.tileID;return h.overscaledZ-w.overscaledZ||h.canonical.y-w.canonical.y||h.wrap-w.wrap||h.canonical.x-w.canonical.x}class ve{constructor(o,h){this.tileID=o,this.uid=r.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const h=o+this.timeAdded;h<r.exported.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.textures.forEach(h=>o.saveTileTexture(h)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(o,h,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(I,O){const te={};if(!O)return te;for(const ue of I){const me=ue.layerIds.map(Se=>O.getLayer(Se)).filter(Boolean);if(me.length!==0){ue.layers=me,ue.stateDependentLayerIds&&(ue.stateDependentLayers=ue.stateDependentLayerIds.map(Se=>me.filter(ze=>ze.id===Se)[0]));for(const Se of me)te[Se.id]=ue}}return te}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(const I in this.buckets){const O=this.buckets[I];if(O instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!w)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const I in this.buckets){const O=this.buckets[I];if(O instanceof r.SymbolBucket&&O.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const I in this.buckets){const O=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(I).queryRadius(O))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const w in this.buckets){const I=this.buckets[w];I.uploadPending()&&I.upload(o)}const h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new C(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new C(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,w,I,O,te,ue,me,Se,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:I,cameraQueryGeometry:O,scale:te,tileSize:this.tileSize,pixelPosMatrix:ze,transform:me,params:ue,queryPadding:this.queryPadding*Se},o,h,w):{}}querySourceFeatures(o,h){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const I=w.loadVTLayers(),O=h?h.sourceLayer:"",te=I._geojsonTileLayer||I[O];if(!te)return;const ue=r.createFilter(h&&h.filter),{z:me,x:Se,y:ze}=this.tileID.canonical,Ve={z:me,x:Se,y:ze};for(let Ye=0;Ye<te.length;Ye++){const it=te.feature(Ye);if(ue.needGeometry){const pt=r.toEvaluationFeature(it,!0);if(!ue.filter(new r.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!ue.filter(new r.EvaluationParameters(this.tileID.overscaledZ),it))continue;const Je=w.getId(it,O),et=new r.GeoJSONFeature(it,me,Se,ze,Je);et.tile=Ve,o.push(et)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const h=this.expirationTime;if(o.cacheControl){const w=r.parseCacheControl(o.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const w=Date.now();let I=!1;if(this.expirationTime>w)I=!1;else if(h)if(this.expirationTime<h)I=!0;else{const O=this.expirationTime-h;O?this.expirationTime=w+Math.max(O,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const I in this.buckets){if(!h.style.hasLayer(I))continue;const O=this.buckets[I],te=O.layers[0].sourceLayer||"_geojsonTileLayer",ue=w[te],me=o[te];if(!ue||!me||Object.keys(me).length===0)continue;O.update(me,ue,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Se=h&&h.style&&h.style.getLayer(I);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(O)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=r.exported.now()+o}setDependencies(o,h){const w={};for(const I of h)w[I]=!0;this.dependencies[o]=w}hasDependency(o,h){for(const w of o){const I=this.dependencies[w];if(I){for(const O of h)if(I[O])return!0}}return!1}}class Ee{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(const o in this.data)for(const h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,w){const I=o.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);const O={value:h,timeout:void 0};if(w!==void 0&&(O.timeout=setTimeout(()=>{this.remove(o,O)},w)),this.data[I].push(O),this.order.push(I),this.order.length>this.max){const te=this._getAndRemoveByKey(this.order[0]);te&&this.onRemove(te)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){const h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;const w=o.wrapped().key,I=h===void 0?0:this.data[w].indexOf(h),O=this.data[w][I];return this.data[w].splice(I,1),O.timeout&&clearTimeout(O.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(O.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){const h=[];for(const w in this.data)for(const I of this.data[w])o(I.value)||h.push(I);for(const w of h)this.remove(w.value.tileID,w)}}class Q{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,w){const I=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][I]=this.stateChanges[o][I]||{},r.extend(this.stateChanges[o][I],w),this.deletedStates[o]===null){this.deletedStates[o]={};for(const O in this.state[o])O!==I&&(this.deletedStates[o][O]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][I]===null){this.deletedStates[o][I]={};for(const O in this.state[o][I])w[O]||(this.deletedStates[o][I][O]=null)}else for(const O in w)this.deletedStates[o]&&this.deletedStates[o][I]&&this.deletedStates[o][I][O]===null&&delete this.deletedStates[o][I][O]}removeFeatureState(o,h,w){if(this.deletedStates[o]===null)return;const I=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},w&&h!==void 0)this.deletedStates[o][I]!==null&&(this.deletedStates[o][I]=this.deletedStates[o][I]||{},this.deletedStates[o][I][w]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][I])for(w in this.deletedStates[o][I]={},this.stateChanges[o][I])this.deletedStates[o][I][w]=null;else this.deletedStates[o][I]=null;else this.deletedStates[o]=null}getState(o,h){const w=String(h),I=r.extend({},(this.state[o]||{})[w],(this.stateChanges[o]||{})[w]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const O=this.deletedStates[o][h];if(O===null)return{};for(const te in O)delete I[te]}return I}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){const w={};for(const I in this.stateChanges){this.state[I]=this.state[I]||{};const O={};for(const te in this.stateChanges[I])this.state[I][te]||(this.state[I][te]={}),r.extend(this.state[I][te],this.stateChanges[I][te]),O[te]=this.state[I][te];w[I]=O}for(const I in this.deletedStates){this.state[I]=this.state[I]||{};const O={};if(this.deletedStates[I]===null)for(const te in this.state[I])O[te]={},this.state[I][te]={};else for(const te in this.deletedStates[I]){if(this.deletedStates[I][te]===null)this.state[I][te]={};else for(const ue of Object.keys(this.deletedStates[I][te]))delete this.state[I][te][ue];O[te]=this.state[I][te]}w[I]=w[I]||{},r.extend(w[I],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const I in o)o[I].setFeatureState(w,h)}}class ee extends r.Evented{constructor(o,h,w){super(),this.id=o,this.dispatcher=w,this.on("data",I=>{I.dataType==="source"&&I.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&I.dataType==="source"&&I.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(I,O,te,ue){const me=new fe[O.type](I,O,te,ue);if(me.id!==I)throw new Error(`Expected Source id to be ${I} instead of ${me.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],me),me}(o,h,w,this),this._tiles={},this._cache=new Ee(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Q}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h){return this._source.loadTile(o,h)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new r.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const w=this._tiles[h];w.upload(o),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(oe).map(o=>o.key)}getRenderableIds(o){const h=[];for(const w in this._tiles)this._isIdRenderable(w,o)&&h.push(this._tiles[w]);return o?h.sort((w,I)=>{const O=w.tileID,te=I.tileID,ue=new r.pointGeometry(O.canonical.x,O.canonical.y)._rotate(this.transform.angle),me=new r.pointGeometry(te.canonical.x,te.canonical.y)._rotate(this.transform.angle);return O.overscaledZ-te.overscaledZ||me.y-ue.y||me.x-ue.x}).map(w=>w.tileID.key):h.map(w=>w.tileID).sort(oe).map(w=>w.key)}hasRenderableParent(o){const h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){const w=this._tiles[o];w&&(w.state!=="loading"&&(w.state=h),this._loadTile(w,this._tileLoaded.bind(this,w,o,h)))}_tileLoaded(o,h,w,I){if(I)return o.state="errored",void(I.status!==404?this._source.fire(new r.ErrorEvent(I,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=r.exported.now(),w==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const h=this.getRenderableIds();for(let I=0;I<h.length;I++){const O=h[I];if(o.neighboringTiles&&o.neighboringTiles[O]){const te=this.getTileByID(O);w(o,te),w(te,o)}}function w(I,O){I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let te=O.tileID.canonical.x-I.tileID.canonical.x;const ue=O.tileID.canonical.y-I.tileID.canonical.y,me=Math.pow(2,I.tileID.canonical.z),Se=O.tileID.key;te===0&&ue===0||Math.abs(ue)>1||(Math.abs(te)>1&&(Math.abs(te+me)===1?te+=me:Math.abs(te-me)===1&&(te-=me)),O.dem&&I.dem&&(I.dem.backfillBorder(O.dem,te,ue),I.neighboringTiles&&I.neighboringTiles[Se]&&(I.neighboringTiles[Se].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,w,I){for(const O in this._tiles){let te=this._tiles[O];if(I[O]||!te.hasData()||te.tileID.overscaledZ<=h||te.tileID.overscaledZ>w)continue;let ue=te.tileID;for(;te&&te.tileID.overscaledZ>h+1;){const Se=te.tileID.scaledTo(te.tileID.overscaledZ-1);te=this._tiles[Se.key],te&&te.hasData()&&(ue=Se)}let me=ue;for(;me.overscaledZ>h;)if(me=me.scaledTo(me.overscaledZ-1),o[me.key]){I[ue.key]=ue;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){const w=this._loadedParentTiles[o.key];return w&&w.tileID.overscaledZ>=h?w:null}for(let w=o.overscaledZ-1;w>=h;w--){const I=o.scaledTo(w),O=this._getLoadedTile(I);if(O)return O}}_getLoadedTile(o){const h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const h=Math.ceil(o.width/this._source.tileSize)+1,w=Math.ceil(o.height/this._source.tileSize)+1,I=Math.floor(h*w*5),O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(O)}handleWrapJump(o){const h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){const w={};for(const I in this._tiles){const O=this._tiles[I];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+h),w[O.tileID.key]=O}this._tiles=w;for(const I in this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(const I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}}update(o,h){if(this.transform=o,this.terrain=h,!this._sourceLoaded||this._paused)return;let w;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(Se=>new r.OverscaledTileID(Se.canonical.z,Se.wrap,Se.canonical.z,Se.canonical.x,Se.canonical.y)):(w=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(w=w.filter(Se=>this._source.hasTile(Se)))):w=[];const I=o.coveringZoomLevel(this._source),O=Math.max(I-ee.maxOverzooming,this._source.minzoom),te=Math.max(I+ee.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Se={};for(const ze of w)if(ze.canonical.z>this._source.minzoom){const Ve=ze.scaledTo(ze.canonical.z-1);Se[Ve.key]=Ve;const Ye=ze.scaledTo(Math.max(this._source.minzoom,Math.min(ze.canonical.z,5)));Se[Ye.key]=Ye}w=w.concat(Object.values(Se))}const ue=this._updateRetainedTiles(w,I);if(we(this._source.type)){const Se={},ze={},Ve=Object.keys(ue);for(const Ye of Ve){const it=ue[Ye],Je=this._tiles[Ye];if(!Je||Je.fadeEndTime&&Je.fadeEndTime<=r.exported.now())continue;const et=this.findLoadedParent(it,O);et&&(this._addTile(et.tileID),Se[et.tileID.key]=et.tileID),ze[Ye]=it}this._retainLoadedChildren(ze,I,te,ue);for(const Ye in Se)ue[Ye]||(this._coveredTiles[Ye]=!0,ue[Ye]=Se[Ye]);if(h){const Ye={},it={};for(const Je of w)this._tiles[Je.key].hasData()?Ye[Je.key]=Je:it[Je.key]=Je;for(const Je in it){const et=it[Je].children(this._source.maxzoom);this._tiles[et[0].key]&&this._tiles[et[1].key]&&this._tiles[et[2].key]&&this._tiles[et[3].key]&&(Ye[et[0].key]=ue[et[0].key]=et[0],Ye[et[1].key]=ue[et[1].key]=et[1],Ye[et[2].key]=ue[et[2].key]=et[2],Ye[et[3].key]=ue[et[3].key]=et[3],delete it[Je])}for(const Je in it){const et=this.findLoadedParent(it[Je],this._source.minzoom);if(et){Ye[et.tileID.key]=ue[et.tileID.key]=et.tileID;for(const pt in Ye)Ye[pt].isChildOf(et.tileID)&&delete Ye[pt]}}for(const Je in this._tiles)Ye[Je]||(this._coveredTiles[Je]=!0)}}for(const Se in ue)this._tiles[Se].clearFadeHold();const me=r.keysDifference(this._tiles,ue);for(const Se of me){const ze=this._tiles[Se];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){const w={},I={},O=Math.max(h-ee.maxOverzooming,this._source.minzoom),te=Math.max(h+ee.maxUnderzooming,this._source.minzoom),ue={};for(const me of o){const Se=this._addTile(me);w[me.key]=me,Se.hasData()||h<this._source.maxzoom&&(ue[me.key]=me)}this._retainLoadedChildren(ue,h,te,w);for(const me of o){let Se=this._tiles[me.key];if(Se.hasData())continue;if(h+1>this._source.maxzoom){const Ve=me.children(this._source.maxzoom)[0],Ye=this.getTile(Ve);if(Ye&&Ye.hasData()){w[Ve.key]=Ve;continue}}else{const Ve=me.children(this._source.maxzoom);if(w[Ve[0].key]&&w[Ve[1].key]&&w[Ve[2].key]&&w[Ve[3].key])continue}let ze=Se.wasRequested();for(let Ve=me.overscaledZ-1;Ve>=O;--Ve){const Ye=me.scaledTo(Ve);if(I[Ye.key]||(I[Ye.key]=!0,Se=this.getTile(Ye),!Se&&ze&&(Se=this._addTile(Ye)),Se&&(w[Ye.key]=Ye,ze=Se.wasRequested(),Se.hasData())))break}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const h=[];let w,I=this._tiles[o].tileID;for(;I.overscaledZ>0;){if(I.key in this._loadedParentTiles){w=this._loadedParentTiles[I.key];break}h.push(I.key);const O=I.scaledTo(I.overscaledZ-1);if(w=this._getLoadedTile(O),w)break;I=O}for(const O of h)this._loadedParentTiles[O]=w}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));const w=h;return h||(h=new ve(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h.uses++,this._tiles[o.key]=h,w||this._source.fire(new r.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const w=h.getExpiryTimeout();w&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},w))}_removeTile(o){const h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,w){const I=[],O=this.transform;if(!O)return I;const te=w?O.getCameraQueryGeometry(o):o,ue=o.map(Je=>O.pointCoordinate(Je,this.terrain)),me=te.map(Je=>O.pointCoordinate(Je,this.terrain)),Se=this.getIds();let ze=1/0,Ve=1/0,Ye=-1/0,it=-1/0;for(const Je of me)ze=Math.min(ze,Je.x),Ve=Math.min(Ve,Je.y),Ye=Math.max(Ye,Je.x),it=Math.max(it,Je.y);for(let Je=0;Je<Se.length;Je++){const et=this._tiles[Se[Je]];if(et.holdingForFade())continue;const pt=et.tileID,yt=Math.pow(2,O.zoom-et.tileID.overscaledZ),wt=h*et.queryPadding*r.EXTENT/et.tileSize/yt,at=[pt.getTilePoint(new r.MercatorCoordinate(ze,Ve)),pt.getTilePoint(new r.MercatorCoordinate(Ye,it))];if(at[0].x-wt<r.EXTENT&&at[0].y-wt<r.EXTENT&&at[1].x+wt>=0&&at[1].y+wt>=0){const Mt=ue.map(jt=>pt.getTilePoint(jt)),St=me.map(jt=>pt.getTilePoint(jt));I.push({tile:et,tileID:pt,queryGeometry:Mt,cameraQueryGeometry:St,scale:yt})}}return I}getVisibleCoordinates(o){const h=this.getRenderableIds(o).map(w=>this._tiles[w].tileID);for(const w of h)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type))for(const o in this._tiles){const h=this._tiles[o];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(o,h,w){this._state.updateState(o=o||"_geojsonTileLayer",h,w)}removeFeatureState(o,h,w){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,w)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,w){const I=this._tiles[o];I&&I.setDependencies(h,w)}reloadTilesForDependencies(o,h){for(const w in this._tiles)this._tiles[w].hasDependency(o,h)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(o,h))}}function oe(M,o){const h=Math.abs(2*M.wrap)-+(M.wrap<0),w=Math.abs(2*o.wrap)-+(o.wrap<0);return M.overscaledZ-o.overscaledZ||w-h||o.canonical.y-M.canonical.y||o.canonical.x-M.canonical.x}function we(M){return M==="raster"||M==="image"||M==="video"}ee.maxOverzooming=10,ee.maxUnderzooming=3;const J="mapboxgl_preloaded_worker_pool";class se{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<se.workerCount;)this.workers.push(new Worker(wu.workerUrl));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[J]}numActive(){return Object.keys(this.active).length}}const de=Math.floor(r.exported.hardwareConcurrency/2);let xe;function Ce(){return xe||(xe=new se),xe}function Ne(M,o){const h={};for(const w in M)w!=="ref"&&(h[w]=M[w]);return r.refProperties.forEach(w=>{w in o&&(h[w]=o[w])}),h}function Te(M){M=M.slice();const o=Object.create(null);for(let h=0;h<M.length;h++)o[M[h].id]=M[h];for(let h=0;h<M.length;h++)"ref"in M[h]&&(M[h]=Ne(M[h],o[M[h].ref]));return M}se.workerCount=Math.max(Math.min(de,6),1);const Ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ue(M,o,h){h.push({command:Ie.addSource,args:[M,o[M]]})}function qe(M,o,h){o.push({command:Ie.removeSource,args:[M]}),h[M]=!0}function Ae(M,o,h,w){qe(M,h,w),Ue(M,o,h)}function ye(M,o,h){let w;for(w in M[h])if(Object.prototype.hasOwnProperty.call(M[h],w)&&w!=="data"&&!v(M[h][w],o[h][w]))return!1;for(w in o[h])if(Object.prototype.hasOwnProperty.call(o[h],w)&&w!=="data"&&!v(M[h][w],o[h][w]))return!1;return!0}function ge(M,o,h,w,I,O){let te;for(te in o=o||{},M=M||{})Object.prototype.hasOwnProperty.call(M,te)&&(v(M[te],o[te])||h.push({command:O,args:[w,te,o[te],I]}));for(te in o)Object.prototype.hasOwnProperty.call(o,te)&&!Object.prototype.hasOwnProperty.call(M,te)&&(v(M[te],o[te])||h.push({command:O,args:[w,te,o[te],I]}))}function Me(M){return M.id}function De(M,o){return M[o.id]=o,M}class Pe{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=r.clamp(o,0,1);let h=1,w=this._distances[h];const I=o*this.paddedLength+this.padding;for(;w<I&&h<this._distances.length;)w=this._distances[++h];const O=h-1,te=this._distances[O],ue=w-te,me=ue>0?(I-te)/ue:0;return this.points[O].mult(1-me).add(this.points[h].mult(me))}}function $e(M,o){let h=!0;return M==="always"||M!=="never"&&o!=="never"||(h=!1),h}class Ke{constructor(o,h,w){const I=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(o/w),this.yCellCount=Math.ceil(h/w);for(let te=0;te<this.xCellCount*this.yCellCount;te++)I.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,w,I,O){this._forEachCell(h,w,I,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(w),this.bboxes.push(I),this.bboxes.push(O)}insertCircle(o,h,w,I){this._forEachCell(h-I,w-I,h+I,w+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(w),this.circles.push(I)}_insertBoxCell(o,h,w,I,O,te){this.boxCells[O].push(te)}_insertCircleCell(o,h,w,I,O,te){this.circleCells[O].push(te)}_query(o,h,w,I,O,te,ue){if(w<0||o>this.width||I<0||h>this.height)return[];const me=[];if(o<=0&&h<=0&&this.width<=w&&this.height<=I){if(O)return[{key:null,x1:o,y1:h,x2:w,y2:I}];for(let Se=0;Se<this.boxKeys.length;Se++)me.push({key:this.boxKeys[Se],x1:this.bboxes[4*Se],y1:this.bboxes[4*Se+1],x2:this.bboxes[4*Se+2],y2:this.bboxes[4*Se+3]});for(let Se=0;Se<this.circleKeys.length;Se++){const ze=this.circles[3*Se],Ve=this.circles[3*Se+1],Ye=this.circles[3*Se+2];me.push({key:this.circleKeys[Se],x1:ze-Ye,y1:Ve-Ye,x2:ze+Ye,y2:Ve+Ye})}}else this._forEachCell(o,h,w,I,this._queryCell,me,{hitTest:O,overlapMode:te,seenUids:{box:{},circle:{}}},ue);return me}query(o,h,w,I){return this._query(o,h,w,I,!1,null)}hitTest(o,h,w,I,O,te){return this._query(o,h,w,I,!0,O,te).length>0}hitTestCircle(o,h,w,I,O){const te=o-w,ue=o+w,me=h-w,Se=h+w;if(ue<0||te>this.width||Se<0||me>this.height)return!1;const ze=[];return this._forEachCell(te,me,ue,Se,this._queryCellCircle,ze,{hitTest:!0,overlapMode:I,circle:{x:o,y:h,radius:w},seenUids:{box:{},circle:{}}},O),ze.length>0}_queryCell(o,h,w,I,O,te,ue,me){const{seenUids:Se,hitTest:ze,overlapMode:Ve}=ue,Ye=this.boxCells[O];if(Ye!==null){const Je=this.bboxes;for(const et of Ye)if(!Se.box[et]){Se.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(o<=Je[pt+2]&&h<=Je[pt+3]&&w>=Je[pt+0]&&I>=Je[pt+1]&&(!me||me(yt))&&(!ze||!$e(Ve,yt.overlapMode))&&(te.push({key:yt,x1:Je[pt],y1:Je[pt+1],x2:Je[pt+2],y2:Je[pt+3]}),ze))return!0}}const it=this.circleCells[O];if(it!==null){const Je=this.circles;for(const et of it)if(!Se.circle[et]){Se.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circleAndRectCollide(Je[pt],Je[pt+1],Je[pt+2],o,h,w,I)&&(!me||me(yt))&&(!ze||!$e(Ve,yt.overlapMode))){const wt=Je[pt],at=Je[pt+1],Mt=Je[pt+2];if(te.push({key:yt,x1:wt-Mt,y1:at-Mt,x2:wt+Mt,y2:at+Mt}),ze)return!0}}}return!1}_queryCellCircle(o,h,w,I,O,te,ue,me){const{circle:Se,seenUids:ze,overlapMode:Ve}=ue,Ye=this.boxCells[O];if(Ye!==null){const Je=this.bboxes;for(const et of Ye)if(!ze.box[et]){ze.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,Je[pt+0],Je[pt+1],Je[pt+2],Je[pt+3])&&(!me||me(yt))&&!$e(Ve,yt.overlapMode))return te.push(!0),!0}}const it=this.circleCells[O];if(it!==null){const Je=this.circles;for(const et of it)if(!ze.circle[et]){ze.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circlesCollide(Je[pt],Je[pt+1],Je[pt+2],Se.x,Se.y,Se.radius)&&(!me||me(yt))&&!$e(Ve,yt.overlapMode))return te.push(!0),!0}}}_forEachCell(o,h,w,I,O,te,ue,me){const Se=this._convertToXCellCoord(o),ze=this._convertToYCellCoord(h),Ve=this._convertToXCellCoord(w),Ye=this._convertToYCellCoord(I);for(let it=Se;it<=Ve;it++)for(let Je=ze;Je<=Ye;Je++)if(O.call(this,o,h,w,I,this.xCellCount*Je+it,te,ue,me))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,w,I,O,te){const ue=I-o,me=O-h,Se=w+te;return Se*Se>ue*ue+me*me}_circleAndRectCollide(o,h,w,I,O,te,ue){const me=(te-I)/2,Se=Math.abs(o-(I+me));if(Se>me+w)return!1;const ze=(ue-O)/2,Ve=Math.abs(h-(O+ze));if(Ve>ze+w)return!1;if(Se<=me||Ve<=ze)return!0;const Ye=Se-me,it=Ve-ze;return Ye*Ye+it*it<=w*w}}function tt(M,o,h,w,I){const O=r.create();return o?(r.scale(O,O,[1/I,1/I,1]),h||r.rotateZ(O,O,w.angle)):r.multiply(O,w.labelPlaneMatrix,M),O}function nt(M,o,h,w,I){if(o){const O=r.clone(M);return r.scale(O,O,[I,I,1]),h||r.rotateZ(O,O,-w.angle),O}return w.glCoordMatrix}function ht(M,o,h){let w;h?(w=[M.x,M.y,h(M.x,M.y),1],r.transformMat4(w,w,o)):(w=[M.x,M.y,0,1],Qi(w,w,o));const I=w[3];return{point:new r.pointGeometry(w[0]/I,w[1]/I),signedDistanceFromCamera:I}}function gt(M,o){return .5+M/o*.5}function Ct(M,o){const h=M[0]/M[3],w=M[1]/M[3];return h>=-o[0]&&h<=o[0]&&w>=-o[1]&&w<=o[1]}function Lt(M,o,h,w,I,O,te,ue,me,Se){const ze=w?M.textSizeData:M.iconSizeData,Ve=r.evaluateSizeForZoom(ze,h.transform.zoom),Ye=[256/h.width*2+1,256/h.height*2+1],it=w?M.text.dynamicLayoutVertexArray:M.icon.dynamicLayoutVertexArray;it.clear();const Je=M.lineVertexArray,et=w?M.text.placedSymbolArray:M.icon.placedSymbolArray,pt=h.transform.width/h.transform.height;let yt=!1;for(let wt=0;wt<et.length;wt++){const at=et.get(wt);if(at.hidden||at.writingMode===r.WritingMode.vertical&&!yt){un(at.numGlyphs,it);continue}let Mt;if(yt=!1,Se?(Mt=[at.anchorX,at.anchorY,Se(at.anchorX,at.anchorY),1],r.transformMat4(Mt,Mt,o)):(Mt=[at.anchorX,at.anchorY,0,1],Qi(Mt,Mt,o)),!Ct(Mt,Ye)){un(at.numGlyphs,it);continue}const St=gt(h.transform.cameraToCenterDistance,Mt[3]),jt=r.evaluateSizeForFeature(ze,Ve,at),Ot=te?jt/St:jt*St,Vt=new r.pointGeometry(at.anchorX,at.anchorY),Nt=ht(Vt,I,Se).point,oi={},Xt=Tt(at,Ot,!1,ue,o,I,O,M.glyphOffsetArray,Je,it,Nt,Vt,oi,pt,me,Se);yt=Xt.useVertical,(Xt.notEnoughRoom||yt||Xt.needsFlipping&&Tt(at,Ot,!0,ue,o,I,O,M.glyphOffsetArray,Je,it,Nt,Vt,oi,pt,me,Se).notEnoughRoom)&&un(at.numGlyphs,it)}w?M.text.dynamicLayoutVertexBuffer.updateData(it):M.icon.dynamicLayoutVertexBuffer.updateData(it)}function ft(M,o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye){const it=ue.glyphStartIndex+ue.numGlyphs,Je=ue.lineStartIndex,et=ue.lineStartIndex+ue.lineLength,pt=o.getoffsetX(ue.glyphStartIndex),yt=o.getoffsetX(it-1),wt=hi(M*pt,h,w,I,O,te,ue.segment,Je,et,me,Se,ze,Ve,Ye);if(!wt)return null;const at=hi(M*yt,h,w,I,O,te,ue.segment,Je,et,me,Se,ze,Ve,Ye);return at?{first:wt,last:at}:null}function Et(M,o,h,w){return M===r.WritingMode.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*w?{useVertical:!0}:(M===r.WritingMode.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function Tt(M,o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye,it,Je,et){const pt=o/24,yt=M.lineOffsetX*pt,wt=M.lineOffsetY*pt;let at;if(M.numGlyphs>1){const Mt=M.glyphStartIndex+M.numGlyphs,St=M.lineStartIndex,jt=M.lineStartIndex+M.lineLength,Ot=ft(pt,ue,yt,wt,h,ze,Ve,M,me,O,Ye,Je,et);if(!Ot)return{notEnoughRoom:!0};const Vt=ht(Ot.first.point,te,et).point,Nt=ht(Ot.last.point,te,et).point;if(w&&!h){const oi=Et(M.writingMode,Vt,Nt,it);if(oi)return oi}at=[Ot.first];for(let oi=M.glyphStartIndex+1;oi<Mt-1;oi++)at.push(hi(pt*ue.getoffsetX(oi),yt,wt,h,ze,Ve,M.segment,St,jt,me,O,Ye,Je,et));at.push(Ot.last)}else{if(w&&!h){const St=ht(Ve,I,et).point,jt=M.lineStartIndex+M.segment+1,Ot=new r.pointGeometry(me.getx(jt),me.gety(jt)),Vt=ht(Ot,I,et),Nt=Vt.signedDistanceFromCamera>0?Vt.point:ai(Ve,Ot,St,1,I,et),oi=Et(M.writingMode,St,Nt,it);if(oi)return oi}const Mt=hi(pt*ue.getoffsetX(M.glyphStartIndex),yt,wt,h,ze,Ve,M.segment,M.lineStartIndex,M.lineStartIndex+M.lineLength,me,O,Ye,Je,et);if(!Mt)return{notEnoughRoom:!0};at=[Mt]}for(const Mt of at)r.addDynamicAttributes(Se,Mt.point,Mt.angle);return{}}function ai(M,o,h,w,I,O){const te=ht(M.add(M.sub(o)._unit()),I,O).point,ue=h.sub(te);return h.add(ue._mult(w/ue.mag()))}function hi(M,o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye,it){const Je=w?M-o:M+o;let et=Je>0?1:-1,pt=0;w&&(et*=-1,pt=Math.PI),et<0&&(pt+=Math.PI);let yt=et>0?ue+te:ue+te+1,wt=I,at=I,Mt=0,St=0;const jt=Math.abs(Je),Ot=[];for(;Mt+St<=jt;){if(yt+=et,yt<ue||yt>=me)return null;if(at=wt,Ot.push(wt),wt=Ve[yt],wt===void 0){const ci=new r.pointGeometry(Se.getx(yt),Se.gety(yt)),Ji=ht(ci,ze,it);if(Ji.signedDistanceFromCamera>0)wt=Ve[yt]=Ji.point;else{const dn=yt-et;wt=ai(Mt===0?O:new r.pointGeometry(Se.getx(dn),Se.gety(dn)),ci,at,jt-Mt+1,ze,it)}}Mt+=St,St=at.dist(wt)}const Vt=(jt-Mt)/St,Nt=wt.sub(at),oi=Nt.mult(Vt)._add(at);oi._add(Nt._unit()._perp()._mult(h*et));const Xt=pt+Math.atan2(wt.y-at.y,wt.x-at.x);return Ot.push(oi),{point:oi,angle:Ye?Xt:0,path:Ot}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function un(M,o){for(let h=0;h<M;h++){const w=o.length;o.resize(w+4),o.float32.set(qt,3*w)}}function Qi(M,o,h){const w=o[0],I=o[1];return M[0]=h[0]*w+h[4]*I+h[12],M[1]=h[1]*w+h[5]*I+h[13],M[3]=h[3]*w+h[7]*I+h[15],M}const bn=100;class Bn{constructor(o,h=new Ke(o.width+200,o.height+200,25),w=new Ke(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=w,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+bn,this.screenBottomBoundary=o.height+bn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,w,I,O,te){const ue=this.projectAndGetPerspectiveRatio(I,o.anchorPointX,o.anchorPointY,te),me=w*ue.perspectiveRatio,Se=o.x1*me+ue.point.x,ze=o.y1*me+ue.point.y,Ve=o.x2*me+ue.point.x,Ye=o.y2*me+ue.point.y;return!this.isInsideGrid(Se,ze,Ve,Ye)||h!=="always"&&this.grid.hitTest(Se,ze,Ve,Ye,h,O)||ue.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Se,ze,Ve,Ye],offscreen:this.isOffscreen(Se,ze,Ve,Ye)}}placeCollisionCircles(o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye,it,Je){const et=[],pt=new r.pointGeometry(h.anchorX,h.anchorY),yt=ht(pt,te,Je),wt=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),at=(ze?O/wt:O*wt)/r.ONE_EM,Mt=ht(pt,ue,Je).point,St=ft(at,I,h.lineOffsetX*at,h.lineOffsetY*at,!1,Mt,pt,h,w,ue,{},!1,Je);let jt=!1,Ot=!1,Vt=!0;if(St){const Nt=.5*Ye*wt+it,oi=new r.pointGeometry(-100,-100),Xt=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ci=new Pe,Ji=St.first,dn=St.last;let Ii=[];for(let Cn=Ji.path.length-1;Cn>=1;Cn--)Ii.push(Ji.path[Cn]);for(let Cn=1;Cn<dn.path.length;Cn++)Ii.push(dn.path[Cn]);const Un=2.5*Nt;if(me){const Cn=Ii.map(Sn=>ht(Sn,me,Je));Ii=Cn.some(Sn=>Sn.signedDistanceFromCamera<=0)?[]:Cn.map(Sn=>Sn.point)}let Vn=[];if(Ii.length>0){const Cn=Ii[0].clone(),Sn=Ii[0].clone();for(let An=1;An<Ii.length;An++)Cn.x=Math.min(Cn.x,Ii[An].x),Cn.y=Math.min(Cn.y,Ii[An].y),Sn.x=Math.max(Sn.x,Ii[An].x),Sn.y=Math.max(Sn.y,Ii[An].y);Vn=Cn.x>=oi.x&&Sn.x<=Xt.x&&Cn.y>=oi.y&&Sn.y<=Xt.y?[Ii]:Sn.x<oi.x||Cn.x>Xt.x||Sn.y<oi.y||Cn.y>Xt.y?[]:r.clipLine([Ii],oi.x,oi.y,Xt.x,Xt.y)}for(const Cn of Vn){ci.reset(Cn,.25*Nt);let Sn=0;Sn=ci.length<=.5*Nt?1:Math.ceil(ci.paddedLength/Un)+1;for(let An=0;An<Sn;An++){const aa=An/Math.max(Sn-1,1),ao=ci.lerp(aa),Ba=ao.x+bn,$a=ao.y+bn;et.push(Ba,$a,Nt,0);const Cl=Ba-Nt,ds=$a-Nt,Ua=Ba+Nt,Tl=$a+Nt;if(Vt=Vt&&this.isOffscreen(Cl,ds,Ua,Tl),Ot=Ot||this.isInsideGrid(Cl,ds,Ua,Tl),o!=="always"&&this.grid.hitTestCircle(Ba,$a,Nt,o,Ve)&&(jt=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:jt}}}}return{circles:!Se&&jt||!Ot||wt<this.perspectiveRatioCutoff?[]:et,offscreen:Vt,collisionDetected:jt}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let w=1/0,I=1/0,O=-1/0,te=-1/0;for(const ze of o){const Ve=new r.pointGeometry(ze.x+bn,ze.y+bn);w=Math.min(w,Ve.x),I=Math.min(I,Ve.y),O=Math.max(O,Ve.x),te=Math.max(te,Ve.y),h.push(Ve)}const ue=this.grid.query(w,I,O,te).concat(this.ignoredGrid.query(w,I,O,te)),me={},Se={};for(const ze of ue){const Ve=ze.key;if(me[Ve.bucketInstanceId]===void 0&&(me[Ve.bucketInstanceId]={}),me[Ve.bucketInstanceId][Ve.featureIndex])continue;const Ye=[new r.pointGeometry(ze.x1,ze.y1),new r.pointGeometry(ze.x2,ze.y1),new r.pointGeometry(ze.x2,ze.y2),new r.pointGeometry(ze.x1,ze.y2)];r.polygonIntersectsPolygon(h,Ye)&&(me[Ve.bucketInstanceId][Ve.featureIndex]=!0,Se[Ve.bucketInstanceId]===void 0&&(Se[Ve.bucketInstanceId]=[]),Se[Ve.bucketInstanceId].push(Ve.featureIndex))}return Se}insertCollisionBox(o,h,w,I,O,te){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:O,collisionGroupID:te,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,w,I,O,te){const ue=w?this.ignoredGrid:this.grid,me={bucketInstanceId:I,featureIndex:O,collisionGroupID:te,overlapMode:h};for(let Se=0;Se<o.length;Se+=4)ue.insertCircle(me,o[Se],o[Se+1],o[Se+2])}projectAndGetPerspectiveRatio(o,h,w,I){let O;return I?(O=[h,w,I(h,w),1],r.transformMat4(O,O,o)):(O=[h,w,0,1],Qi(O,O,o)),{point:new r.pointGeometry((O[0]/O[3]+1)/2*this.transform.width+bn,(-O[1]/O[3]+1)/2*this.transform.height+bn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}}isOffscreen(o,h,w,I){return w<bn||o>=this.screenRightBoundary||I<bn||h>this.screenBottomBoundary}isInsideGrid(o,h,w,I){return w>=0&&o<this.gridRightBoundary&&I>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const o=r.identity([]);return r.translate(o,o,[-100,-100,0]),o}}function an(M,o,h){return o*(r.EXTENT/(M.tileSize*Math.pow(2,h-M.tileID.overscaledZ)))}class dt{constructor(o,h,w,I){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):I&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class vt{constructor(o,h,w,I,O){this.text=new dt(o?o.text:null,h,w,O),this.icon=new dt(o?o.icon:null,h,I,O)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class It{constructor(o,h,w){this.text=o,this.icon=h,this.skipFade=w}}class Ft{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class Yt{constructor(o,h,w,I,O){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=w,this.bucketIndex=I,this.tileID=O}}class vi{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:w=>w.collisionGroupID===h}}return this.collisionGroups[o]}}function Oi(M,o,h,w,I){const{horizontalAlign:O,verticalAlign:te}=r.getAnchorAlignment(M),ue=-(O-.5)*o,me=-(te-.5)*h,Se=r.evaluateVariableOffset(M,w);return new r.pointGeometry(ue+Se[0]*I,me+Se[1]*I)}function pi(M,o,h,w,I,O){const{x1:te,x2:ue,y1:me,y2:Se,anchorPointX:ze,anchorPointY:Ve}=M,Ye=new r.pointGeometry(o,h);return w&&Ye._rotate(I?O:-O),{x1:te+Ye.x,y1:me+Ye.y,x2:ue+Ye.x,y2:Se+Ye.y,anchorPointX:ze,anchorPointY:Ve}}class We{constructor(o,h,w,I,O){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new Bn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new vi(I),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,w,I){const O=w.getBucket(h),te=w.latestFeatureIndex;if(!O||!te||h.id!==O.layerIds[0])return;const ue=w.collisionBoxArray,me=O.layers[0].layout,Se=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),ze=w.tileSize/r.EXTENT,Ve=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Ye=me.get("text-pitch-alignment")==="map",it=me.get("text-rotation-alignment")==="map",Je=an(w,1,this.transform.zoom),et=tt(Ve,Ye,it,this.transform,Je);let pt=null;if(Ye){const wt=nt(Ve,Ye,it,this.transform,Je);pt=r.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[O.bucketInstanceId]=new Yt(O.bucketInstanceId,te,O.sourceLayerIndex,O.index,w.tileID);const yt={bucket:O,layout:me,posMatrix:Ve,textLabelPlaneMatrix:et,labelToScreenMatrix:pt,scale:Se,textPixelRatio:ze,holdingForFade:w.holdingForFade(),collisionBoxArray:ue,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(O.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(O.sourceID)};if(I)for(const wt of O.sortKeyRanges){const{sortKey:at,symbolInstanceStart:Mt,symbolInstanceEnd:St}=wt;o.push({sortKey:at,symbolInstanceStart:Mt,symbolInstanceEnd:St,parameters:yt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:O.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye,it,Je,et,pt){const yt=[Ye.textOffset0,Ye.textOffset1],wt=Oi(o,w,I,yt,O),at=this.collisionIndex.placeCollisionBox(pi(h,wt.x,wt.y,te,ue,this.transform.angle),Ve,me,Se,ze.predicate,pt);if((!et||this.collisionIndex.placeCollisionBox(pi(et,wt.x,wt.y,te,ue,this.transform.angle),Ve,me,Se,ze.predicate,pt).box.length!==0)&&at.box.length>0){let Mt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID].text&&(Mt=this.prevPlacement.variableOffsets[Ye.crossTileID].anchor),Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ye.crossTileID]={textOffset:yt,width:w,height:I,anchor:o,textBoxScale:O,prevAnchor:Mt},this.markUsedJustification(it,o,Ye,Je),it.allowVerticalPlacement&&(this.markUsedOrientation(it,Je,Ye),this.placedOrientations[Ye.crossTileID]=Je),{shift:wt,placedGlyphBoxes:at}}}placeLayerBucketPart(o,h,w){const{bucket:I,layout:O,posMatrix:te,textLabelPlaneMatrix:ue,labelToScreenMatrix:me,textPixelRatio:Se,holdingForFade:ze,collisionBoxArray:Ve,partiallyEvaluatedTextSize:Ye,collisionGroup:it}=o.parameters,Je=O.get("text-optional"),et=O.get("icon-optional"),pt=r.getOverlapMode(O,"text-overlap","text-allow-overlap"),yt=pt==="always",wt=r.getOverlapMode(O,"icon-overlap","icon-allow-overlap"),at=wt==="always",Mt=O.get("text-rotation-alignment")==="map",St=O.get("text-pitch-alignment")==="map",jt=O.get("icon-text-fit")!=="none",Ot=O.get("symbol-z-order")==="viewport-y",Vt=yt&&(at||!I.hasIconData()||et),Nt=at&&(yt||!I.hasTextData()||Je);!I.collisionArrays&&Ve&&I.deserializeCollisionBoxes(Ve);const oi=(Xt,ci)=>{if(h[Xt.crossTileID])return;if(ze)return void(this.placements[Xt.crossTileID]=new It(!1,!1,!1));let Ji=!1,dn=!1,Ii=!0,Un=null,Vn={box:null,offscreen:null},Cn={box:null,offscreen:null},Sn=null,An=null,aa=null,ao=0,Ba=0,$a=0;ci.textFeatureIndex?ao=ci.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(ao=Xt.featureIndex),ci.verticalTextFeatureIndex&&(Ba=ci.verticalTextFeatureIndex);const Cl=this.retainedQueryData[I.bucketInstanceId].tileID,ds=this.terrain?(Mn,sr)=>this.terrain.getElevation(Cl,Mn,sr):null;for(const Mn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const sr=ci[Mn];sr&&(sr.elevation=ds?ds(sr.anchorPointX,sr.anchorPointY):0)}const Ua=ci.textBox;if(Ua){const Mn=In=>{let Br=r.WritingMode.horizontal;if(I.allowVerticalPlacement&&!In&&this.prevPlacement){const Ws=this.prevPlacement.placedOrientations[Xt.crossTileID];Ws&&(this.placedOrientations[Xt.crossTileID]=Ws,Br=Ws,this.markUsedOrientation(I,Br,Xt))}return Br},sr=(In,Br)=>{if(I.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&ci.verticalTextBox){for(const Ws of I.writingModes)if(Ws===r.WritingMode.vertical?(Vn=Br(),Cn=Vn):Vn=In(),Vn&&Vn.box&&Vn.box.length)break}else Vn=In()};if(O.get("text-variable-anchor")){let In=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Xt.crossTileID]){const ur=this.prevPlacement.variableOffsets[Xt.crossTileID];In.indexOf(ur.anchor)>0&&(In=In.filter(Ma=>Ma!==ur.anchor),In.unshift(ur.anchor))}const Br=(ur,Ma,oc)=>{const lc=ur.x2-ur.x1,Yd=ur.y2-ur.y1,$p=Xt.textBoxScale,Zd=jt&&wt==="never"?Ma:null;let Va={box:[],offscreen:!1};const Xd=pt!=="never"?2*In.length:In.length;for(let Cu=0;Cu<Xd;++Cu){const Kd=this.attemptAnchorPlacement(In[Cu%In.length],ur,lc,Yd,$p,Mt,St,Se,te,it,Cu>=In.length?pt:"never",Xt,I,oc,Zd,ds);if(Kd&&(Va=Kd.placedGlyphBoxes,Va&&Va.box&&Va.box.length)){Ji=!0,Un=Kd.shift;break}}return Va};sr(()=>Br(Ua,ci.iconBox,r.WritingMode.horizontal),()=>{const ur=ci.verticalTextBox;return I.allowVerticalPlacement&&!(Vn&&Vn.box&&Vn.box.length)&&Xt.numVerticalGlyphVertices>0&&ur?Br(ur,ci.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),Vn&&(Ji=Vn.box,Ii=Vn.offscreen);const Ws=Mn(Vn&&Vn.box);if(!Ji&&this.prevPlacement){const ur=this.prevPlacement.variableOffsets[Xt.crossTileID];ur&&(this.variableOffsets[Xt.crossTileID]=ur,this.markUsedJustification(I,ur.anchor,Xt,Ws))}}else{const In=(Br,Ws)=>{const ur=this.collisionIndex.placeCollisionBox(Br,pt,Se,te,it.predicate,ds);return ur&&ur.box&&ur.box.length&&(this.markUsedOrientation(I,Ws,Xt),this.placedOrientations[Xt.crossTileID]=Ws),ur};sr(()=>In(Ua,r.WritingMode.horizontal),()=>{const Br=ci.verticalTextBox;return I.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&Br?In(Br,r.WritingMode.vertical):{box:null,offscreen:null}}),Mn(Vn&&Vn.box&&Vn.box.length)}}if(Sn=Vn,Ji=Sn&&Sn.box&&Sn.box.length>0,Ii=Sn&&Sn.offscreen,Xt.useRuntimeCollisionCircles){const Mn=I.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex),sr=r.evaluateSizeForFeature(I.textSizeData,Ye,Mn),In=O.get("text-padding");An=this.collisionIndex.placeCollisionCircles(pt,Mn,I.lineVertexArray,I.glyphOffsetArray,sr,te,ue,me,w,St,it.predicate,Xt.collisionCircleDiameter,In,ds),An.circles.length&&An.collisionDetected&&!w&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Ji=yt||An.circles.length>0&&!An.collisionDetected,Ii=Ii&&An.offscreen}if(ci.iconFeatureIndex&&($a=ci.iconFeatureIndex),ci.iconBox){const Mn=sr=>{const In=jt&&Un?pi(sr,Un.x,Un.y,Mt,St,this.transform.angle):sr;return this.collisionIndex.placeCollisionBox(In,wt,Se,te,it.predicate,ds)};Cn&&Cn.box&&Cn.box.length&&ci.verticalIconBox?(aa=Mn(ci.verticalIconBox),dn=aa.box.length>0):(aa=Mn(ci.iconBox),dn=aa.box.length>0),Ii=Ii&&aa.offscreen}const Tl=Je||Xt.numHorizontalGlyphVertices===0&&Xt.numVerticalGlyphVertices===0,Wd=et||Xt.numIconVertices===0;if(Tl||Wd?Wd?Tl||(dn=dn&&Ji):Ji=dn&&Ji:dn=Ji=dn&&Ji,Ji&&Sn&&Sn.box&&this.collisionIndex.insertCollisionBox(Sn.box,pt,O.get("text-ignore-placement"),I.bucketInstanceId,Cn&&Cn.box&&Ba?Ba:ao,it.ID),dn&&aa&&this.collisionIndex.insertCollisionBox(aa.box,wt,O.get("icon-ignore-placement"),I.bucketInstanceId,$a,it.ID),An&&(Ji&&this.collisionIndex.insertCollisionCircles(An.circles,pt,O.get("text-ignore-placement"),I.bucketInstanceId,ao,it.ID),w)){const Mn=I.bucketInstanceId;let sr=this.collisionCircleArrays[Mn];sr===void 0&&(sr=this.collisionCircleArrays[Mn]=new Ft);for(let In=0;In<An.circles.length;In+=4)sr.circles.push(An.circles[In+0]),sr.circles.push(An.circles[In+1]),sr.circles.push(An.circles[In+2]),sr.circles.push(An.collisionDetected?1:0)}if(Xt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(I.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xt.crossTileID]=new It(Ji||Vt,dn||Nt,Ii||I.justReloaded),h[Xt.crossTileID]=!0};if(Ot){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xt=I.getSortedSymbolIndexes(this.transform.angle);for(let ci=Xt.length-1;ci>=0;--ci){const Ji=Xt[ci];oi(I.symbolInstances.get(Ji),I.collisionArrays[Ji])}}else for(let Xt=o.symbolInstanceStart;Xt<o.symbolInstanceEnd;Xt++)oi(I.symbolInstances.get(Xt),I.collisionArrays[Xt]);if(w&&I.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[I.bucketInstanceId];r.invert(Xt.invProjMatrix,te),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(o,h,w,I){let O;O=I===r.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(h)];const te=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const ue of te)ue>=0&&(o.text.placedSymbolArray.get(ue).crossTileID=O>=0&&ue!==O?0:w.crossTileID)}markUsedOrientation(o,h,w){const I=h===r.WritingMode.horizontal||h===r.WritingMode.horizontalOnly?h:0,O=h===r.WritingMode.vertical?h:0,te=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const ue of te)o.text.placedSymbolArray.get(ue).placedOrientation=I;w.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=O)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let w=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const I=h?h.symbolFadeChange(o):1,O=h?h.opacities:{},te=h?h.variableOffsets:{},ue=h?h.placedOrientations:{};for(const me in this.placements){const Se=this.placements[me],ze=O[me];ze?(this.opacities[me]=new vt(ze,I,Se.text,Se.icon),w=w||Se.text!==ze.text.placed||Se.icon!==ze.icon.placed):(this.opacities[me]=new vt(null,I,Se.text,Se.icon,Se.skipFade),w=w||Se.text||Se.icon)}for(const me in O){const Se=O[me];if(!this.opacities[me]){const ze=new vt(Se,I,!1,!1);ze.isHidden()||(this.opacities[me]=ze,w=w||Se.text.placed||Se.icon.placed)}}for(const me in te)this.variableOffsets[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.variableOffsets[me]=te[me]);for(const me in ue)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=ue[me]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){const w={};for(const I of h){const O=I.getBucket(o);O&&I.latestFeatureIndex&&o.id===O.layerIds[0]&&this.updateBucketOpacities(O,w,I.collisionBoxArray)}}updateBucketOpacities(o,h,w){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const I=o.layers[0].layout,O=new vt(null,0,!1,!1,!0),te=I.get("text-allow-overlap"),ue=I.get("icon-allow-overlap"),me=I.get("text-variable-anchor"),Se=I.get("text-rotation-alignment")==="map",ze=I.get("text-pitch-alignment")==="map",Ve=I.get("icon-text-fit")!=="none",Ye=new vt(null,0,te&&(ue||!o.hasIconData()||I.get("icon-optional")),ue&&(te||!o.hasTextData()||I.get("text-optional")),!0);!o.collisionArrays&&w&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(w);const it=(Je,et,pt)=>{for(let yt=0;yt<et/4;yt++)Je.opacityVertexArray.emplaceBack(pt)};for(let Je=0;Je<o.symbolInstances.length;Je++){const et=o.symbolInstances.get(Je),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:wt}=et;let at=this.opacities[wt];h[wt]?at=O:at||(at=Ye,this.opacities[wt]=at),h[wt]=!0;const Mt=et.numIconVertices>0,St=this.placedOrientations[et.crossTileID],jt=St===r.WritingMode.vertical,Ot=St===r.WritingMode.horizontal||St===r.WritingMode.horizontalOnly;if(pt>0||yt>0){const Vt=mt(at.text);it(o.text,pt,jt?At:Vt),it(o.text,yt,Ot?At:Vt);const Nt=at.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(ci=>{ci>=0&&(o.text.placedSymbolArray.get(ci).hidden=Nt||jt?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=Nt||Ot?1:0);const oi=this.variableOffsets[et.crossTileID];oi&&this.markUsedJustification(o,oi.anchor,et,St);const Xt=this.placedOrientations[et.crossTileID];Xt&&(this.markUsedJustification(o,"left",et,Xt),this.markUsedOrientation(o,Xt,et))}if(Mt){const Vt=mt(at.icon),Nt=!(Ve&&et.verticalPlacedIconSymbolIndex&&jt);et.placedIconSymbolIndex>=0&&(it(o.icon,et.numIconVertices,Nt?Vt:At),o.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=at.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(it(o.icon,et.numVerticalIconVertices,Nt?At:Vt),o.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Vt=o.collisionArrays[Je];if(Vt){let Nt=new r.pointGeometry(0,0);if(Vt.textBox||Vt.verticalTextBox){let Xt=!0;if(me){const ci=this.variableOffsets[wt];ci?(Nt=Oi(ci.anchor,ci.width,ci.height,ci.textOffset,ci.textBoxScale),Se&&Nt._rotate(ze?this.transform.angle:-this.transform.angle)):Xt=!1}Vt.textBox&&be(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||jt,Nt.x,Nt.y),Vt.verticalTextBox&&be(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||Ot,Nt.x,Nt.y)}const oi=!!(!Ot&&Vt.verticalIconBox);Vt.iconBox&&be(o.iconCollisionBox.collisionVertexArray,at.icon.placed,oi,Ve?Nt.x:0,Ve?Nt.y:0),Vt.verticalIconBox&&be(o.iconCollisionBox.collisionVertexArray,at.icon.placed,!oi,Ve?Nt.x:0,Ve?Nt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Je.invProjMatrix,o.placementViewportMatrix=Je.viewportMatrix,o.collisionCircleArray=Je.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){const w=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*w>o}setStale(){this.stale=!0}}function be(M,o,h,w,I){M.emplaceBack(o?1:0,h?1:0,w||0,I||0),M.emplaceBack(o?1:0,h?1:0,w||0,I||0),M.emplaceBack(o?1:0,h?1:0,w||0,I||0),M.emplaceBack(o?1:0,h?1:0,w||0,I||0)}const Le=Math.pow(2,25),Ge=Math.pow(2,24),Qe=Math.pow(2,17),st=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),rt=Math.pow(2,1);function mt(M){if(M.opacity===0&&!M.placed)return 0;if(M.opacity===1&&M.placed)return 4294967295;const o=M.placed?1:0,h=Math.floor(127*M.opacity);return h*Le+o*Ge+h*Qe+o*st+h*ct+o*ot+h*rt+o}const At=0;class zt{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,w,I,O){const te=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(te,I,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,te.sort((ue,me)=>ue.sortKey-me.sortKey));this._currentPartIndex<te.length;)if(h.placeLayerBucketPart(te[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,O())return!0;return!1}}class Rt{constructor(o,h,w,I,O,te,ue,me){this.placement=new We(o,h,te,ue,me),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=O,this._done=!1}isDone(){return this._done}continuePlacement(o,h,w){const I=r.exported.now(),O=()=>{const te=r.exported.now()-I;return!this._forceFullPlacement&&te>2};for(;this._currentPlacementIndex>=0;){const te=h[o[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(te.type==="symbol"&&(!te.minzoom||te.minzoom<=ue)&&(!te.maxzoom||te.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new zt(te)),this._inProgressLayer.continuePlacement(w[te.source],this.placement,this._showCollisionBoxes,te,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const li=512/r.EXTENT/2;class Qt{constructor(o,h,w){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=w;for(let I=0;I<h.length;I++){const O=h.get(I),te=O.key;this.indexedSymbolInstances[te]||(this.indexedSymbolInstances[te]=[]),this.indexedSymbolInstances[te].push({crossTileID:O.crossTileID,coord:this.getScaledCoordinates(O,o)})}}getScaledCoordinates(o,h){const w=li/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*r.EXTENT+o.anchorX)*w),y:Math.floor((h.canonical.y*r.EXTENT+o.anchorY)*w)}}findMatches(o,h,w){const I=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let O=0;O<o.length;O++){const te=o.get(O);if(te.crossTileID)continue;const ue=this.indexedSymbolInstances[te.key];if(!ue)continue;const me=this.getScaledCoordinates(te,h);for(const Se of ue)if(Math.abs(Se.coord.x-me.x)<=I&&Math.abs(Se.coord.y-me.y)<=I&&!w[Se.crossTileID]){w[Se.crossTileID]=!0,te.crossTileID=Se.crossTileID;break}}}}class fi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const h=Math.round((o-this.lng)/360);if(h!==0)for(const w in this.indexes){const I=this.indexes[w],O={};for(const te in I){const ue=I[te];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+h),O[ue.tileID.key]=ue}this.indexes[w]=O}this.lng=o}addBucket(o,h,w){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let O=0;O<h.symbolInstances.length;O++)h.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const I=this.usedCrossTileIDs[o.overscaledZ];for(const O in this.indexes){const te=this.indexes[O];if(Number(O)>o.overscaledZ)for(const ue in te){const me=te[ue];me.tileID.isChildOf(o)&&me.findMatches(h.symbolInstances,o,I)}else{const ue=te[o.scaledTo(Number(O)).key];ue&&ue.findMatches(h.symbolInstances,o,I)}}for(let O=0;O<h.symbolInstances.length;O++){const te=h.symbolInstances.get(O);te.crossTileID||(te.crossTileID=w.generate(),I[te.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Qt(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(const w in h.indexedSymbolInstances)for(const I of h.indexedSymbolInstances[w])delete this.usedCrossTileIDs[o][I.crossTileID]}removeStaleBuckets(o){let h=!1;for(const w in this.indexes){const I=this.indexes[w];for(const O in I)o[I[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,I[O]),delete I[O],h=!0)}return h}}class Ui{constructor(){this.layerIndexes={},this.crossTileIDs=new fi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,w){let I=this.layerIndexes[o.id];I===void 0&&(I=this.layerIndexes[o.id]=new bi);let O=!1;const te={};I.handleWrapJump(w);for(const ue of h){const me=ue.getBucket(o);me&&o.id===me.layerIds[0]&&(me.bucketInstanceId||(me.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(ue.tileID,me,this.crossTileIDs)&&(O=!0),te[me.bucketInstanceId]=!0)}return I.removeStaleBuckets(te)&&(O=!0),O}pruneUnusedLayers(o){const h={};o.forEach(w=>{h[w]=!0});for(const w in this.layerIndexes)h[w]||delete this.layerIndexes[w]}}var _i=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Pi extends r.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=o._cache.max,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const o in this._tiles){const h=this._tiles[o];h.textures.forEach(w=>w.destroy()),h.textures=[]}}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];for(const w of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.posMatrix=new Float64Array(16),r.ortho(w.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[w.key]=new ve(w,this.tileSize))}removeOutdated(o){const h={};this.renderHistory=this.renderHistory.filter((w,I)=>this.renderHistory.indexOf(w)===I).slice(0,this.renderHistorySize);for(const w of this._renderableTilesKeys)h[w]=!0;for(const w of this.renderHistory)h[w]=!0;for(const w in this._tiles)h[w]||(this._tiles[w].clearTextures(o),delete this._tiles[w])}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const h={};for(const w of this._renderableTilesKeys){const I=this._tiles[w].tileID;if(I.canonical.equals(o.canonical)){const O=o.clone();O.posMatrix=new Float64Array(16),r.ortho(O.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),h[w]=O}else if(I.canonical.isChildOf(o.canonical)){const O=o.clone();O.posMatrix=new Float64Array(16);const te=I.canonical.z-o.canonical.z,ue=I.canonical.x-(I.canonical.x>>te<<te),me=I.canonical.y-(I.canonical.y>>te<<te),Se=r.EXTENT>>te;r.ortho(O.posMatrix,0,Se,0,Se,0,1),r.translate(O.posMatrix,O.posMatrix,[-ue*Se,-me*Se,0]),h[w]=O}else if(o.canonical.isChildOf(I.canonical)){const O=o.clone();O.posMatrix=new Float64Array(16);const te=o.canonical.z-I.canonical.z,ue=o.canonical.x-(o.canonical.x>>te<<te),me=o.canonical.y-(o.canonical.y>>te<<te),Se=r.EXTENT>>te;r.ortho(O.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(O.posMatrix,O.posMatrix,[ue*Se,me*Se,0]),r.scale(O.posMatrix,O.posMatrix,[1/2**te,1/2**te,0]),h[w]=O}}return h}getSourceTile(o,h){const w=this.sourceCache._source;let I=o.overscaledZ-this.deltaZoom;if(I>w.maxzoom&&(I=w.maxzoom),I<w.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(I).key);let O=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!O||!O.dem)&&h)for(;I>=w.minzoom&&(!O||!O.dem);)O=this.sourceCache.getTileByID(o.scaledTo(I--).key);return O}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeLoaded>=o)}}class Vi{constructor(o,h,w){this.style=o,this.sourceCache=new Pi(h),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.elevationOffset=typeof w.elevationOffset=="number"?w.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(o,h,w,I=r.EXTENT){if(!(h>=0&&h<I&&w>=0&&w<I))return this.elevationOffset;let O=0;const te=this.getTerrainData(o);if(te.tile&&te.tile.dem){const ue=r.transformMat4$1([],[h/I*r.EXTENT,w/I*r.EXTENT],te.u_terrain_matrix),me=[ue[0]*te.tile.dem.dim,ue[1]*te.tile.dem.dim],Se=[Math.floor(me[0]),Math.floor(me[1])],ze=te.tile.dem.get(Se[0],Se[1]),Ve=te.tile.dem.get(Se[0],Se[1]+1),Ye=te.tile.dem.get(Se[0]+1,Se[1]),it=te.tile.dem.get(Se[0]+1,Se[1]+1);O=r.number(r.number(ze,Ve,me[0]-Se[0]),r.number(Ye,it,me[0]-Se[0]),me[1]-Se[1])}return O}rememberForRerender(o,h){for(const w in this.sourceCache._tiles){const I=this.sourceCache._tiles[w];(I.tileID.equals(h)||I.tileID.isChildOf(h))&&(o===this.sourceCache.sourceCache.id&&(I.timeLoaded=Date.now()),this._rerender[o]=this._rerender[o]||{},this._rerender[o][I.tileID.key]=!0)}}needsRerender(o,h){return this._rerender[o]&&this._rerender[o][h.key]}clearRerenderCache(){this._rerender={}}getElevation(o,h,w,I=r.EXTENT){return(this.getDEMElevation(o,h,w,I)+this.elevationOffset)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const I=this.style.map.painter.context,O=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new C(I,O,I.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new C(I,new r.RGBAImage({width:1,height:1}),I.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const I=this.style.map.painter.context;h.demTexture=this.style.map.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new C(I,h.dem.getPixels(),I.gl.RGBA,{premultiply:!1}),h.demTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const w=h&&h+h.tileID.key+o.key;if(w&&!this._demMatrixCache[w]){const I=this.sourceCache.sourceCache._source.maxzoom;let O=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=I?O=o.canonical.z-I:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const te=o.canonical.x-(o.canonical.x>>O<<O),ue=o.canonical.y-(o.canonical.y>>O<<O),me=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<O),1/(r.EXTENT<<O),0]);r.translate(me,me,[te*r.EXTENT,ue*r.EXTENT,0]),this._demMatrixCache[o.key]={matrix:me,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getRTTFramebuffer(){const o=this.style.map.painter;if(!this._rttFramebuffer){const h=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=o.context.createFramebuffer(h,h,!0),this._rttFramebuffer.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,h))}return this._rttFramebuffer}getFramebuffer(o){const h=this.style.map.painter,w=h.width/devicePixelRatio,I=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===I||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new C(h.context,{width:w,height:I,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new C(h.context,{width:w,height:I,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(w,I,!0),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,w,I))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let O=0,te=0;O<this._coordsTextureSize;O++)for(let ue=0;ue<this._coordsTextureSize;ue++,te+=4)h[te+0]=255&ue,h[te+1]=255&O,h[te+2]=ue>>8<<4|O>>8,h[te+3]=0;const w=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),I=new C(o,w,o.gl.RGBA,{premultiply:!1});return I.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=I,I}pointCoordinate(o){const h=new Uint8Array(4),w=this.style.map.painter,I=w.context,O=I.gl;I.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),O.readPixels(o.x,w.height/devicePixelRatio-o.y-1,1,1,O.RGBA,O.UNSIGNED_BYTE,h),I.bindFramebuffer.set(null);const te=h[0]+(h[2]>>4<<8),ue=h[1]+((15&h[2])<<8),me=this.coordsIndex[255-h[3]],Se=me&&this.sourceCache.getTileByID(me);if(!Se)return null;const ze=this._coordsTextureSize,Ve=(1<<Se.tileID.canonical.z)*ze;return new r.MercatorCoordinate((Se.tileID.canonical.x*ze+te)/Ve,(Se.tileID.canonical.y*ze+ue)/Ve,this.getElevation(Se.tileID,te,ue,ze))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.style.map.painter.context,h=new r.PosArray,w=new r.TriangleIndexArray,I=this.meshSize,O=r.EXTENT/I,te=I*I;for(let ue=0;ue<=I;ue++)for(let me=0;me<=I;me++)h.emplaceBack(me*O,ue*O);for(let ue=0;ue<te;ue+=I+1)for(let me=0;me<I;me++)w.emplaceBack(me+ue,I+me+ue+1,I+me+ue+2),w.emplaceBack(me+ue,I+me+ue+2,me+ue+1);return this._mesh={indexBuffer:o.createIndexBuffer(w),vertexBuffer:o.createVertexBuffer(h,_i.members),segments:r.SegmentVector.simpleSegment(0,0,h.length,w.length)},this._mesh}getMinMaxElevation(o){const h=this.getTerrainData(o).tile,w={minElevation:null,maxElevation:null};return h&&h.dem&&(w.minElevation=(h.dem.min+this.elevationOffset)*this.exaggeration,w.maxElevation=(h.dem.max+this.elevationOffset)*this.exaggeration),w}}const Fi=(M,o)=>r.emitValidationErrors(M,o&&o.filter(h=>h.identifier!=="source.canvas")),fn=r.pick(Ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yn=r.pick(Ie,["setCenter","setZoom","setBearing","setPitch"]),br=function(){const M={},o=r.spec.$version;for(const h in r.spec.$root){const w=r.spec.$root[h];if(w.required){let I=null;I=h==="version"?o:w.type==="array"?[]:{},I!=null&&(M[h]=I)}}return M}();class Hr extends r.Evented{constructor(o,h={}){super(),this.map=o,this.dispatcher=new K(Ce(),this),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new T(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new Z(256,512),this.crossTileSymbolIndex=new Ui,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const w=this;this._rtlTextPluginCallback=Hr.registerForPluginStateChange(I=>{w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:I.pluginStatus,pluginURL:I.pluginURL},(O,te)=>{if(r.triggerPluginCompletionEvent(O),te&&te.every(ue=>ue))for(const ue in w.sourceCaches)w.sourceCaches[ue].reload()})}),this.on("data",I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const O=this.sourceCaches[I.sourceId];if(!O)return;const te=O.getSource();if(te&&te.vectorLayerIds)for(const ue in this._layers){const me=this._layers[ue];me.source===te.id&&this._validateLayer(me)}})}loadURL(o,h={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const w=typeof h.validate!="boolean"||h.validate,I=this.map._requestManager.transformRequest(o,r.ResourceType.Style);this._request=r.getJSON(I,(O,te)=>{this._request=null,O?this.fire(new r.ErrorEvent(O)):te&&this._load(te,w)})}loadJSON(o,h={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(o,h.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(br,!1)}_load(o,h){if(h&&Fi(this,r.validateStyle(o)))return;this._loaded=!0,this.stylesheet=o;for(const I in o.sources)this.addSource(I,o.sources[I],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);const w=Te(this.stylesheet.layers);this._order=w.map(I=>I.id),this._layers={},this._serializedLayers={};for(let I of w)I=r.createStyleLayer(I),I.setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new W(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(o){this._spriteRequest=function(h,w,I,O){let te,ue,me;const Se=I>1?"@2x":"";let ze=r.getJSON(w.transformRequest(w.normalizeSpriteURL(h,Se,".json"),r.ResourceType.SpriteJSON),(it,Je)=>{ze=null,me||(me=it,te=Je,Ye())}),Ve=r.getImage(w.transformRequest(w.normalizeSpriteURL(h,Se,".png"),r.ResourceType.SpriteImage),(it,Je)=>{Ve=null,me||(me=it,ue=Je,Ye())});function Ye(){if(me)O(me);else if(te&&ue){const it=r.exported.getImageData(ue),Je={};for(const et in te){const{width:pt,height:yt,x:wt,y:at,sdf:Mt,pixelRatio:St,stretchX:jt,stretchY:Ot,content:Vt}=te[et],Nt=new r.RGBAImage({width:pt,height:yt});r.RGBAImage.copy(it,Nt,{x:wt,y:at},{x:0,y:0},{width:pt,height:yt}),Je[et]={data:Nt,pixelRatio:St,sdf:Mt,stretchX:jt,stretchY:Ot,content:Vt}}O(null,Je)}}return{cancel(){ze&&(ze.cancel(),ze=null),Ve&&(Ve.cancel(),Ve=null)}}}(o,this.map._requestManager,this.map.getPixelRatio(),(h,w)=>{if(this._spriteRequest=null,h)this.fire(new r.ErrorEvent(h));else if(w)for(const I in w)this.imageManager.addImage(I,w[I]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(o){const h=this.sourceCaches[o.source];if(!h)return;const w=o.sourceLayer;if(!w)return;const I=h.getSource();(I.type==="geojson"||I.vectorLayerIds&&I.vectorLayerIds.indexOf(w)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${w}" does not exist on source "${I.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const h=[];for(const w of o){const I=this._layers[w];I.type!=="custom"&&h.push(I.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const h=this._changed;if(this._changed){const I=Object.keys(this._updatedLayers),O=Object.keys(this._removedLayers);(I.length||O.length)&&this._updateWorkerLayers(I,O);for(const te in this._updatedSources){const ue=this._updatedSources[te];if(ue==="reload")this._reloadSource(te);else{if(ue!=="clear")throw new Error(`Invalid action ${ue}`);this._clearSource(te)}}this._updateTilesForChangedImages();for(const te in this._updatedPaintProps)this._layers[te].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const w={};for(const I in this.sourceCaches){const O=this.sourceCaches[I];w[I]=O.used,O.used=!1}for(const I of this._order){const O=this._layers[I];O.recalculate(o,this._availableImages),!O.isHidden(o.zoom)&&O.source&&(this.sourceCaches[O.source].used=!0)}for(const I in w){const O=this.sourceCaches[I];w[I]!==O.used&&O.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:I}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(o){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),o){const h=this.sourceCaches[o.source];if(!h)throw new Error(`cannot load terrain, because there exists no source with ID: ${o.source}`);this.terrain=new Vi(this,h,o),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=w=>{w.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=w=>{w.tile&&(w.sourceId===o.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(w.sourceId,w.tile.tileID)):w.source.type==="geojson"&&this.terrain.rememberForRerender(w.sourceId,w.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:o}))}setState(o){if(this._checkLoaded(),Fi(this,r.validateStyle(o)))return!1;(o=r.clone$1(o)).layers=Te(o.layers);const h=function(I,O){if(!I)return[{command:Ie.setStyle,args:[O]}];let te=[];try{if(!v(I.version,O.version))return[{command:Ie.setStyle,args:[O]}];v(I.center,O.center)||te.push({command:Ie.setCenter,args:[O.center]}),v(I.zoom,O.zoom)||te.push({command:Ie.setZoom,args:[O.zoom]}),v(I.bearing,O.bearing)||te.push({command:Ie.setBearing,args:[O.bearing]}),v(I.pitch,O.pitch)||te.push({command:Ie.setPitch,args:[O.pitch]}),v(I.sprite,O.sprite)||te.push({command:Ie.setSprite,args:[O.sprite]}),v(I.glyphs,O.glyphs)||te.push({command:Ie.setGlyphs,args:[O.glyphs]}),v(I.transition,O.transition)||te.push({command:Ie.setTransition,args:[O.transition]}),v(I.light,O.light)||te.push({command:Ie.setLight,args:[O.light]});const ue={},me=[];(function(ze,Ve,Ye,it){let Je;for(Je in Ve=Ve||{},ze=ze||{})Object.prototype.hasOwnProperty.call(ze,Je)&&(Object.prototype.hasOwnProperty.call(Ve,Je)||qe(Je,Ye,it));for(Je in Ve)Object.prototype.hasOwnProperty.call(Ve,Je)&&(Object.prototype.hasOwnProperty.call(ze,Je)?v(ze[Je],Ve[Je])||(ze[Je].type==="geojson"&&Ve[Je].type==="geojson"&&ye(ze,Ve,Je)?Ye.push({command:Ie.setGeoJSONSourceData,args:[Je,Ve[Je].data]}):Ae(Je,Ve,Ye,it)):Ue(Je,Ve,Ye))})(I.sources,O.sources,me,ue);const Se=[];I.layers&&I.layers.forEach(ze=>{ue[ze.source]?te.push({command:Ie.removeLayer,args:[ze.id]}):Se.push(ze)}),te=te.concat(me),function(ze,Ve,Ye){Ve=Ve||[];const it=(ze=ze||[]).map(Me),Je=Ve.map(Me),et=ze.reduce(De,{}),pt=Ve.reduce(De,{}),yt=it.slice(),wt=Object.create(null);let at,Mt,St,jt,Ot,Vt,Nt;for(at=0,Mt=0;at<it.length;at++)St=it[at],Object.prototype.hasOwnProperty.call(pt,St)?Mt++:(Ye.push({command:Ie.removeLayer,args:[St]}),yt.splice(yt.indexOf(St,Mt),1));for(at=0,Mt=0;at<Je.length;at++)St=Je[Je.length-1-at],yt[yt.length-1-at]!==St&&(Object.prototype.hasOwnProperty.call(et,St)?(Ye.push({command:Ie.removeLayer,args:[St]}),yt.splice(yt.lastIndexOf(St,yt.length-Mt),1)):Mt++,Vt=yt[yt.length-at],Ye.push({command:Ie.addLayer,args:[pt[St],Vt]}),yt.splice(yt.length-at,0,St),wt[St]=!0);for(at=0;at<Je.length;at++)if(St=Je[at],jt=et[St],Ot=pt[St],!wt[St]&&!v(jt,Ot))if(v(jt.source,Ot.source)&&v(jt["source-layer"],Ot["source-layer"])&&v(jt.type,Ot.type)){for(Nt in ge(jt.layout,Ot.layout,Ye,St,null,Ie.setLayoutProperty),ge(jt.paint,Ot.paint,Ye,St,null,Ie.setPaintProperty),v(jt.filter,Ot.filter)||Ye.push({command:Ie.setFilter,args:[St,Ot.filter]}),v(jt.minzoom,Ot.minzoom)&&v(jt.maxzoom,Ot.maxzoom)||Ye.push({command:Ie.setLayerZoomRange,args:[St,Ot.minzoom,Ot.maxzoom]}),jt)Object.prototype.hasOwnProperty.call(jt,Nt)&&Nt!=="layout"&&Nt!=="paint"&&Nt!=="filter"&&Nt!=="metadata"&&Nt!=="minzoom"&&Nt!=="maxzoom"&&(Nt.indexOf("paint.")===0?ge(jt[Nt],Ot[Nt],Ye,St,Nt.slice(6),Ie.setPaintProperty):v(jt[Nt],Ot[Nt])||Ye.push({command:Ie.setLayerProperty,args:[St,Nt,Ot[Nt]]}));for(Nt in Ot)Object.prototype.hasOwnProperty.call(Ot,Nt)&&!Object.prototype.hasOwnProperty.call(jt,Nt)&&Nt!=="layout"&&Nt!=="paint"&&Nt!=="filter"&&Nt!=="metadata"&&Nt!=="minzoom"&&Nt!=="maxzoom"&&(Nt.indexOf("paint.")===0?ge(jt[Nt],Ot[Nt],Ye,St,Nt.slice(6),Ie.setPaintProperty):v(jt[Nt],Ot[Nt])||Ye.push({command:Ie.setLayerProperty,args:[St,Nt,Ot[Nt]]}))}else Ye.push({command:Ie.removeLayer,args:[St]}),Vt=yt[yt.lastIndexOf(St)+1],Ye.push({command:Ie.addLayer,args:[Ot,Vt]})}(Se,O.layers,te)}catch(ue){console.warn("Unable to compute style diff:",ue),te=[{command:Ie.setStyle,args:[O]}]}return te}(this.serialize(),o).filter(I=>!(I.command in Yn));if(h.length===0)return!1;const w=h.filter(I=>!(I.command in fn));if(w.length>0)throw new Error(`Unimplemented: ${w.map(I=>I.command).join(", ")}.`);return h.forEach(I=>{I.command!=="setTransition"&&this[I.command].apply(this,I.args)}),this.stylesheet=o,!0}addImage(o,h){if(this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,w={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(r.validateStyle.source,`sources.${o}`,h,null,w))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const I=this.sourceCaches[o]=new ee(o,h,this.dispatcher);I.style=this,I.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:I.serialize(),sourceId:o})),I.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===o)return this.fire(new r.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${w}" is using it.`)));const h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const w=this.sourceCaches[o].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,w={}){this._checkLoaded();const I=o.id;if(this.getLayer(I))return void this.fire(new r.ErrorEvent(new Error(`Layer "${I}" already exists on this map.`)));let O;if(o.type==="custom"){if(Fi(this,r.validateCustomStyleLayer(o)))return;O=r.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(I,o.source),o=r.clone$1(o),o=r.extend(o,{source:I})),this._validate(r.validateStyle.layer,`layers.${I}`,o,{arrayIndex:-1},w))return;O=r.createStyleLayer(o),this._validateLayer(O),O.setEventedParent(this,{layer:{id:I}}),this._serializedLayers[O.id]=O.serialize()}const te=h?this._order.indexOf(h):this._order.length;if(h&&te===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${I}" before non-existing layer "${h}".`)));else{if(this._order.splice(te,0,I),this._layerOrderChanged=!0,this._layers[I]=O,this._removedLayers[I]&&O.source&&O.type!=="custom"){const ue=this._removedLayers[I];delete this._removedLayers[I],ue.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.sourceCaches[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;const w=this._order.indexOf(o);this._order.splice(w,1);const I=h?this._order.indexOf(h):this._order.length;h&&I===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(I,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const h=this._layers[o];if(!h)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);const w=this._order.indexOf(o);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,w){this._checkLoaded();const I=this.getLayer(o);I?I.minzoom===h&&I.maxzoom===w||(h!=null&&(I.minzoom=h),w!=null&&(I.maxzoom=w),this._updateLayer(I)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,w={}){this._checkLoaded();const I=this.getLayer(o);if(I){if(!v(I.filter,h))return h==null?(I.filter=void 0,void this._updateLayer(I)):void(this._validate(r.validateStyle.filter,`layers.${I.id}.filter`,h,null,w)||(I.filter=r.clone$1(h),this._updateLayer(I)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return r.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,h,w,I={}){this._checkLoaded();const O=this.getLayer(o);O?v(O.getLayoutProperty(h),w)||(O.setLayoutProperty(h,w,I),this._updateLayer(O)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){const w=this.getLayer(o);if(w)return w.getLayoutProperty(h);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,w,I={}){this._checkLoaded();const O=this.getLayer(o);O?v(O.getPaintProperty(h),w)||(O.setPaintProperty(h,w,I)&&this._updateLayer(O),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();const w=o.source,I=o.sourceLayer,O=this.sourceCaches[w];if(O===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${w}' does not exist in the map's style.`)));const te=O.getSource().type;te==="geojson"&&I?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):te!=="vector"||I?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),O.setFeatureState(I,o.id,h)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();const w=o.source,I=this.sourceCaches[w];if(I===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${w}' does not exist in the map's style.`)));const O=I.getSource().type,te=O==="vector"?o.sourceLayer:void 0;O!=="vector"||te?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):I.removeFeatureState(te,o.id,h):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const h=o.source,w=o.sourceLayer,I=this.sourceCaches[h];if(I!==void 0)return I.getSource().type!=="vector"||w?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),I.getFeatureState(w,o.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,o=>o.serialize()),layers:this._serializeLayers(this._order)},o=>o!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(o){const h=te=>this._layers[te].type==="fill-extrusion",w={},I=[];for(let te=this._order.length-1;te>=0;te--){const ue=this._order[te];if(h(ue)){w[ue]=te;for(const me of o){const Se=me[ue];if(Se)for(const ze of Se)I.push(ze)}}}I.sort((te,ue)=>ue.intersectionZ-te.intersectionZ);const O=[];for(let te=this._order.length-1;te>=0;te--){const ue=this._order[te];if(h(ue))for(let me=I.length-1;me>=0;me--){const Se=I[me].feature;if(w[Se.layer.id]<te)break;O.push(Se),I.pop()}else for(const me of o){const Se=me[ue];if(Se)for(const ze of Se)O.push(ze.feature)}}return O}queryRenderedFeatures(o,h,w){h&&h.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const I={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const te of h.layers){const ue=this._layers[te];if(!ue)return this.fire(new r.ErrorEvent(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];I[ue.source]=!0}}const O=[];h.availableImages=this._availableImages;for(const te in this.sourceCaches)h.layers&&!I[te]||O.push(ce(this.sourceCaches[te],this._layers,this._serializedLayers,o,h,w));return this.placement&&O.push(function(te,ue,me,Se,ze,Ve,Ye){const it={},Je=Ve.queryRenderedSymbols(Se),et=[];for(const pt of Object.keys(Je).map(Number))et.push(Ye[pt]);et.sort(ke);for(const pt of et){const yt=pt.featureIndex.lookupSymbolFeatures(Je[pt.bucketInstanceId],ue,pt.bucketIndex,pt.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,te);for(const wt in yt){const at=it[wt]=it[wt]||[],Mt=yt[wt];Mt.sort((St,jt)=>{const Ot=pt.featureSortOrder;if(Ot){const Vt=Ot.indexOf(St.featureIndex);return Ot.indexOf(jt.featureIndex)-Vt}return jt.featureIndex-St.featureIndex});for(const St of Mt)at.push(St)}}for(const pt in it)it[pt].forEach(yt=>{const wt=yt.feature,at=me[te[pt].source].getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=at});return it}(this._layers,this._serializedLayers,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(O)}querySourceFeatures(o,h){h&&h.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const w=this.sourceCaches[o];return w?function(I,O){const te=I.getRenderableIds().map(Se=>I.getTileByID(Se)),ue=[],me={};for(let Se=0;Se<te.length;Se++){const ze=te[Se],Ve=ze.tileID.canonical.key;me[Ve]||(me[Ve]=!0,ze.querySourceFeatures(ue,O))}return ue}(w,h):[]}addSourceType(o,h,w){return Hr.getSourceType(o)?w(new Error(`A source type called "${o}" already exists.`)):(Hr.setSourceType(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},w):w(null,null))}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();const w=this.light.getLight();let I=!1;for(const te in o)if(!v(o[te],w[te])){I=!0;break}if(!I)return;const O={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(O)}_validate(o,h,w,I,O={}){return(!O||O.validate!==!1)&&Fi(this,o.call(r.validateStyle,r.extend({key:h,style:this.serialize(),value:w,styleSpec:r.spec},I)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const h in this.sourceCaches)this.sourceCaches[h].update(o,this.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,w,I,O=!1){let te=!1,ue=!1;const me={};for(const Se of this._order){const ze=this._layers[Se];if(ze.type!=="symbol")continue;if(!me[ze.source]){const Ye=this.sourceCaches[ze.source];me[ze.source]=Ye.getRenderableIds(!0).map(it=>Ye.getTileByID(it)).sort((it,Je)=>Je.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(Je.tileID)?-1:1))}const Ve=this.crossTileSymbolIndex.addLayer(ze,me[ze.source],o.center.lng);te=te||Ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),o.zoom))&&(this.pauseablePlacement=new Rt(o,this.terrain,this._order,O,h,w,I,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,me),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),ue=!0),te&&this.pauseablePlacement.placement.setStale()),ue||te)for(const Se of this._order){const ze=this._layers[Se];ze.type==="symbol"&&this.placement.updateLayerOpacities(ze,me[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h,w){this.imageManager.getImages(h.icons,w),this._updateTilesForChangedImages();const I=this.sourceCaches[h.source];I&&I.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(o,h,w){this.glyphManager.getGlyphs(h.stacks,w)}getResource(o,h,w){return r.makeRequest(h,w)}}Hr.getSourceType=function(M){return fe[M]},Hr.setSourceType=function(M,o){fe[M]=o},Hr.registerForPluginStateChange=r.registerForPluginStateChange;var ap="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const tu={prelude:$n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:$n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$n("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ap),terrainDepth:$n("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ap),terrainCoords:$n("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ap)};function $n(M,o){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=o.match(/attribute ([\w]+) ([\w]+)/g),I=M.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=O?O.concat(I):I,ue={};return{fragmentSource:M=M.replace(h,(me,Se,ze,Ve,Ye)=>(ue[Ye]=!0,Se==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
varying ${ze} ${Ve} ${Ye};
#else
uniform ${ze} ${Ve} u_${Ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ye}
    ${ze} ${Ve} ${Ye} = u_${Ye};
#endif
`)),vertexSource:o=o.replace(h,(me,Se,ze,Ve,Ye)=>{const it=Ve==="float"?"vec2":"vec4",Je=Ye.match(/color/)?"color":it;return ue[Ye]?Se==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${ze} ${it} a_${Ye};
varying ${ze} ${Ve} ${Ye};
#else
uniform ${ze} ${Ve} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = a_${Ye};
#else
    ${ze} ${Ve} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${ze} ${Ve} ${Ye} = u_${Ye};
#endif
`:Se==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${ze} ${it} a_${Ye};
#else
uniform ${ze} ${Ve} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${ze} ${Ve} ${Ye} = a_${Ye};
#else
    ${ze} ${Ve} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${ze} ${Ve} ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${ze} ${Ve} ${Ye} = u_${Ye};
#endif
`}),staticAttributes:w,staticUniforms:te}}class Jx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,w,I,O,te,ue,me,Se){this.context=o;let ze=this.boundPaintVertexBuffers.length!==I.length;for(let Ve=0;!ze&&Ve<I.length;Ve++)this.boundPaintVertexBuffers[Ve]!==I[Ve]&&(ze=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===w&&!ze&&this.boundIndexBuffer===O&&this.boundVertexOffset===te&&this.boundDynamicVertexBuffer===ue&&this.boundDynamicVertexBuffer2===me&&this.boundDynamicVertexBuffer3===Se?(o.bindVertexArrayOES.set(this.vao),ue&&ue.bind(),O&&O.dynamicDraw&&O.bind(),me&&me.bind(),Se&&Se.bind()):this.freshBind(h,w,I,O,te,ue,me,Se)}freshBind(o,h,w,I,O,te,ue,me){let Se;const ze=o.numAttributes,Ve=this.context,Ye=Ve.gl;if(Ve.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ve.extVertexArrayObject.createVertexArrayOES(),Ve.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=I,this.boundVertexOffset=O,this.boundDynamicVertexBuffer=te,this.boundDynamicVertexBuffer2=ue,this.boundDynamicVertexBuffer3=me;else{Se=Ve.currentNumAttributes||0;for(let it=ze;it<Se;it++)Ye.disableVertexAttribArray(it)}h.enableAttributes(Ye,o);for(const it of w)it.enableAttributes(Ye,o);te&&te.enableAttributes(Ye,o),ue&&ue.enableAttributes(Ye,o),me&&me.enableAttributes(Ye,o),h.bind(),h.setVertexAttribPointers(Ye,o,O);for(const it of w)it.bind(),it.setVertexAttribPointers(Ye,o,O);te&&(te.bind(),te.setVertexAttribPointers(Ye,o,O)),I&&I.bind(),ue&&(ue.bind(),ue.setVertexAttribPointers(Ye,o,O)),me&&(me.bind(),me.setVertexAttribPointers(Ye,o,O)),Ve.currentNumAttributes=ze}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function wd(M){const o=[];for(let h=0;h<M.length;h++){if(M[h]===null)continue;const w=M[h].split(" ");o.push(w.pop())}return o}class e0{constructor(o,h,w,I,O,te,ue){const me=o.gl;this.program=me.createProgram();const Se=wd(w.staticAttributes),ze=I?I.getBinderAttributes():[],Ve=Se.concat(ze),Ye=tu.prelude.staticUniforms?wd(tu.prelude.staticUniforms):[],it=w.staticUniforms?wd(w.staticUniforms):[],Je=I?I.getBinderUniforms():[],et=Ye.concat(it).concat(Je),pt=[];for(const Ot of et)pt.indexOf(Ot)<0&&pt.push(Ot);const yt=I?I.defines():[];te&&yt.push("#define OVERDRAW_INSPECTOR;"),ue&&yt.push("#define TERRAIN3D;");const wt=yt.concat(tu.prelude.fragmentSource,w.fragmentSource).join(`
`),at=yt.concat(tu.prelude.vertexSource,w.vertexSource).join(`
`),Mt=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);me.shaderSource(Mt,wt),me.compileShader(Mt),me.attachShader(this.program,Mt);const St=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);me.shaderSource(St,at),me.compileShader(St),me.attachShader(this.program,St),this.attributes={};const jt={};this.numAttributes=Ve.length;for(let Ot=0;Ot<this.numAttributes;Ot++)Ve[Ot]&&(me.bindAttribLocation(this.program,Ot,Ve[Ot]),this.attributes[Ve[Ot]]=Ot);me.linkProgram(this.program),me.deleteShader(St),me.deleteShader(Mt);for(let Ot=0;Ot<pt.length;Ot++){const Vt=pt[Ot];if(Vt&&!jt[Vt]){const Nt=me.getUniformLocation(this.program,Vt);Nt&&(jt[Vt]=Nt)}}this.fixedUniforms=O(o,jt),this.terrainUniforms=((Ot,Vt)=>({u_depth:new r.Uniform1i(Ot,Vt.u_depth),u_terrain:new r.Uniform1i(Ot,Vt.u_terrain),u_terrain_dim:new r.Uniform1f(Ot,Vt.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(Ot,Vt.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(Ot,Vt.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(Ot,Vt.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(Ot,Vt.u_terrain_exaggeration)}))(o,jt),this.binderUniforms=I?I.getUniforms(o,jt):[]}draw(o,h,w,I,O,te,ue,me,Se,ze,Ve,Ye,it,Je,et,pt,yt,wt){const at=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(w),o.setStencilMode(I),o.setColorMode(O),o.setCullFace(te),me){o.activeTexture.set(at.TEXTURE2),at.bindTexture(at.TEXTURE_2D,me.depthTexture),o.activeTexture.set(at.TEXTURE3),at.bindTexture(at.TEXTURE_2D,me.texture);for(const St in this.terrainUniforms)this.terrainUniforms[St].set(me[St])}for(const St in this.fixedUniforms)this.fixedUniforms[St].set(ue[St]);et&&et.setUniforms(o,this.binderUniforms,it,{zoom:Je});let Mt=0;switch(h){case at.LINES:Mt=2;break;case at.TRIANGLES:Mt=3;break;case at.LINE_STRIP:Mt=1}for(const St of Ye.get()){const jt=St.vaos||(St.vaos={});(jt[Se]||(jt[Se]=new Jx)).bind(o,this,ze,et?et.getPaintVertexBuffers():[],Ve,St.vertexOffset,pt,yt,wt),at.drawElements(h,St.primitiveLength*Mt,at.UNSIGNED_SHORT,St.primitiveOffset*Mt*2)}}}function op(M,o,h){const w=1/an(h,1,o.transform.tileZoom),I=Math.pow(2,h.tileID.overscaledZ),O=h.tileSize*Math.pow(2,o.transform.tileZoom)/I,te=O*(h.tileID.canonical.x+h.tileID.wrap*I),ue=O*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[w,M.fromScale,M.toScale],u_fade:M.t,u_pixel_coord_upper:[te>>16,ue>>16],u_pixel_coord_lower:[65535&te,65535&ue]}}const jm=(M,o,h,w)=>{const I=o.style.light,O=I.properties.get("position"),te=[O.x,O.y,O.z],ue=r.create$1();I.properties.get("anchor")==="viewport"&&r.fromRotation(ue,-o.transform.angle),r.transformMat3(te,te,ue);const me=I.properties.get("color");return{u_matrix:M,u_lightpos:te,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[me.r,me.g,me.b],u_vertical_gradient:+h,u_opacity:w}},lp=(M,o,h,w,I,O,te)=>r.extend(jm(M,o,h,w),op(O,o,te),{u_height_factor:-Math.pow(2,I.overscaledZ)/te.tileSize/8}),cp=M=>({u_matrix:M}),up=(M,o,h,w)=>r.extend(cp(M),op(h,o,w)),Om=(M,o)=>({u_matrix:M,u_world:o}),Fm=(M,o,h,w,I)=>r.extend(up(M,o,h,w),{u_world:I}),gl=(M,o,h,w)=>{const I=M.transform;let O,te;if(w.paint.get("circle-pitch-alignment")==="map"){const ue=an(h,1,I.zoom);O=!0,te=[ue,ue]}else O=!1,te=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:M.translatePosMatrix(o.posMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+O,u_device_pixel_ratio:M.pixelRatio,u_extrude_scale:te}},Cd=(M,o,h)=>{const w=an(h,1,o.zoom),I=Math.pow(2,o.zoom-h.tileID.overscaledZ),O=h.tileID.overscaleFactor();return{u_matrix:M,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[o.pixelsToGLUnits[0]/(w*I),o.pixelsToGLUnits[1]/(w*I)],u_overscale_factor:O}},Kl=(M,o,h=1)=>({u_matrix:M,u_color:o,u_overlay:0,u_overlay_scale:h}),iu=M=>({u_matrix:M}),Td=(M,o,h,w)=>({u_matrix:M,u_extrude_scale:an(o,1,h),u_intensity:w});function Sd(M,o){const h=Math.pow(2,o.canonical.z),w=o.canonical.y;return[new r.MercatorCoordinate(0,w/h).toLngLat().lat,new r.MercatorCoordinate(0,(w+1)/h).toLngLat().lat]}const nu=(M,o,h,w)=>{const I=M.transform;return{u_matrix:dp(M,o,h,w),u_ratio:1/an(o,1,I.zoom),u_device_pixel_ratio:M.pixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Ed=(M,o,h,w,I)=>r.extend(nu(M,o,h,I),{u_image:0,u_image_height:w}),ru=(M,o,h,w,I)=>{const O=M.transform,te=su(o,O);return{u_matrix:dp(M,o,h,I),u_texsize:o.imageAtlasTexture.size,u_ratio:1/an(o,1,O.zoom),u_device_pixel_ratio:M.pixelRatio,u_image:0,u_scale:[te,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},fr=(M,o,h,w,I,O)=>{const te=M.lineAtlas,ue=su(o,M.transform),me=h.layout.get("line-cap")==="round",Se=te.getDash(w.from,me),ze=te.getDash(w.to,me),Ve=Se.width*I.fromScale,Ye=ze.width*I.toScale;return r.extend(nu(M,o,h,O),{u_patternscale_a:[ue/Ve,-Se.height/2],u_patternscale_b:[ue/Ye,-ze.height/2],u_sdfgamma:te.width/(256*Math.min(Ve,Ye)*M.pixelRatio)/2,u_image:0,u_tex_y_a:Se.y,u_tex_y_b:ze.y,u_mix:I.t})};function su(M,o){return 1/an(M,1,o.tileZoom)}function dp(M,o,h,w){return M.translatePosMatrix(w?w.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Bm=(M,o,h,w,I)=>{return{u_matrix:M,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(te=I.paint.get("raster-saturation"),te>0?1-1/(1.001-te):-te),u_contrast_factor:(O=I.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:$m(I.paint.get("raster-hue-rotate"))};var O,te};function $m(M){M*=Math.PI/180;const o=Math.sin(M),h=Math.cos(M);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}const kd=(M,o,h,w,I,O,te,ue,me,Se)=>{const ze=I.transform;return{u_is_size_zoom_constant:+(M==="constant"||M==="source"),u_is_size_feature_constant:+(M==="constant"||M==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:ze.width/ze.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:te,u_coord_matrix:ue,u_is_text:+me,u_pitch_with_map:+w,u_texsize:Se,u_texture:0}},hp=(M,o,h,w,I,O,te,ue,me,Se,ze)=>{const Ve=I.transform;return r.extend(kd(M,o,h,w,I,O,te,ue,me,Se),{u_gamma_scale:w?Math.cos(Ve._pitch)*Ve.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},t0=(M,o,h,w,I,O,te,ue,me,Se)=>r.extend(hp(M,o,h,w,I,O,te,ue,!0,me),{u_texsize_icon:Se,u_texture_icon:1}),i0=(M,o,h)=>({u_matrix:M,u_opacity:o,u_color:h}),pp=(M,o,h,w,I,O)=>r.extend(function(te,ue,me,Se){const ze=me.imageManager.getPattern(te.from.toString()),Ve=me.imageManager.getPattern(te.to.toString()),{width:Ye,height:it}=me.imageManager.getPixelSize(),Je=Math.pow(2,Se.tileID.overscaledZ),et=Se.tileSize*Math.pow(2,me.transform.tileZoom)/Je,pt=et*(Se.tileID.canonical.x+Se.tileID.wrap*Je),yt=et*Se.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Ve.tl,u_pattern_br_b:Ve.br,u_texsize:[Ye,it],u_mix:ue.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Ve.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/an(Se,1,me.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(w,O,h,I),{u_matrix:M,u_opacity:o}),fp={fillExtrusion:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_lightpos:new r.Uniform3f(M,o.u_lightpos),u_lightintensity:new r.Uniform1f(M,o.u_lightintensity),u_lightcolor:new r.Uniform3f(M,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(M,o.u_vertical_gradient),u_opacity:new r.Uniform1f(M,o.u_opacity)}),fillExtrusionPattern:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_lightpos:new r.Uniform3f(M,o.u_lightpos),u_lightintensity:new r.Uniform1f(M,o.u_lightintensity),u_lightcolor:new r.Uniform3f(M,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(M,o.u_vertical_gradient),u_height_factor:new r.Uniform1f(M,o.u_height_factor),u_image:new r.Uniform1i(M,o.u_image),u_texsize:new r.Uniform2f(M,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(M,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(M,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(M,o.u_scale),u_fade:new r.Uniform1f(M,o.u_fade),u_opacity:new r.Uniform1f(M,o.u_opacity)}),fill:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix)}),fillPattern:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_image:new r.Uniform1i(M,o.u_image),u_texsize:new r.Uniform2f(M,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(M,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(M,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(M,o.u_scale),u_fade:new r.Uniform1f(M,o.u_fade)}),fillOutline:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_world:new r.Uniform2f(M,o.u_world)}),fillOutlinePattern:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_world:new r.Uniform2f(M,o.u_world),u_image:new r.Uniform1i(M,o.u_image),u_texsize:new r.Uniform2f(M,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(M,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(M,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(M,o.u_scale),u_fade:new r.Uniform1f(M,o.u_fade)}),circle:(M,o)=>({u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(M,o.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(M,o.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(M,o.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(M,o.u_matrix)}),collisionBox:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(M,o.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(M,o.u_extrude_scale),u_overscale_factor:new r.Uniform1f(M,o.u_overscale_factor)}),collisionCircle:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_inv_matrix:new r.UniformMatrix4f(M,o.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(M,o.u_viewport_size)}),debug:(M,o)=>({u_color:new r.UniformColor(M,o.u_color),u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_overlay:new r.Uniform1i(M,o.u_overlay),u_overlay_scale:new r.Uniform1f(M,o.u_overlay_scale)}),clippingMask:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix)}),heatmap:(M,o)=>({u_extrude_scale:new r.Uniform1f(M,o.u_extrude_scale),u_intensity:new r.Uniform1f(M,o.u_intensity),u_matrix:new r.UniformMatrix4f(M,o.u_matrix)}),heatmapTexture:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_world:new r.Uniform2f(M,o.u_world),u_image:new r.Uniform1i(M,o.u_image),u_color_ramp:new r.Uniform1i(M,o.u_color_ramp),u_opacity:new r.Uniform1f(M,o.u_opacity)}),hillshade:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_image:new r.Uniform1i(M,o.u_image),u_latrange:new r.Uniform2f(M,o.u_latrange),u_light:new r.Uniform2f(M,o.u_light),u_shadow:new r.UniformColor(M,o.u_shadow),u_highlight:new r.UniformColor(M,o.u_highlight),u_accent:new r.UniformColor(M,o.u_accent)}),hillshadePrepare:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_image:new r.Uniform1i(M,o.u_image),u_dimension:new r.Uniform2f(M,o.u_dimension),u_zoom:new r.Uniform1f(M,o.u_zoom),u_unpack:new r.Uniform4f(M,o.u_unpack)}),line:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_ratio:new r.Uniform1f(M,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(M,o.u_units_to_pixels)}),lineGradient:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_ratio:new r.Uniform1f(M,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(M,o.u_units_to_pixels),u_image:new r.Uniform1i(M,o.u_image),u_image_height:new r.Uniform1f(M,o.u_image_height)}),linePattern:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_texsize:new r.Uniform2f(M,o.u_texsize),u_ratio:new r.Uniform1f(M,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_image:new r.Uniform1i(M,o.u_image),u_units_to_pixels:new r.Uniform2f(M,o.u_units_to_pixels),u_scale:new r.Uniform3f(M,o.u_scale),u_fade:new r.Uniform1f(M,o.u_fade)}),lineSDF:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_ratio:new r.Uniform1f(M,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(M,o.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(M,o.u_patternscale_a),u_patternscale_b:new r.Uniform2f(M,o.u_patternscale_b),u_sdfgamma:new r.Uniform1f(M,o.u_sdfgamma),u_image:new r.Uniform1i(M,o.u_image),u_tex_y_a:new r.Uniform1f(M,o.u_tex_y_a),u_tex_y_b:new r.Uniform1f(M,o.u_tex_y_b),u_mix:new r.Uniform1f(M,o.u_mix)}),raster:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_tl_parent:new r.Uniform2f(M,o.u_tl_parent),u_scale_parent:new r.Uniform1f(M,o.u_scale_parent),u_buffer_scale:new r.Uniform1f(M,o.u_buffer_scale),u_fade_t:new r.Uniform1f(M,o.u_fade_t),u_opacity:new r.Uniform1f(M,o.u_opacity),u_image0:new r.Uniform1i(M,o.u_image0),u_image1:new r.Uniform1i(M,o.u_image1),u_brightness_low:new r.Uniform1f(M,o.u_brightness_low),u_brightness_high:new r.Uniform1f(M,o.u_brightness_high),u_saturation_factor:new r.Uniform1f(M,o.u_saturation_factor),u_contrast_factor:new r.Uniform1f(M,o.u_contrast_factor),u_spin_weights:new r.Uniform3f(M,o.u_spin_weights)}),symbolIcon:(M,o)=>({u_is_size_zoom_constant:new r.Uniform1i(M,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(M,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(M,o.u_size_t),u_size:new r.Uniform1f(M,o.u_size),u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(M,o.u_pitch),u_rotate_symbol:new r.Uniform1i(M,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(M,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(M,o.u_fade_change),u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(M,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(M,o.u_coord_matrix),u_is_text:new r.Uniform1i(M,o.u_is_text),u_pitch_with_map:new r.Uniform1i(M,o.u_pitch_with_map),u_texsize:new r.Uniform2f(M,o.u_texsize),u_texture:new r.Uniform1i(M,o.u_texture)}),symbolSDF:(M,o)=>({u_is_size_zoom_constant:new r.Uniform1i(M,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(M,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(M,o.u_size_t),u_size:new r.Uniform1f(M,o.u_size),u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(M,o.u_pitch),u_rotate_symbol:new r.Uniform1i(M,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(M,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(M,o.u_fade_change),u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(M,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(M,o.u_coord_matrix),u_is_text:new r.Uniform1i(M,o.u_is_text),u_pitch_with_map:new r.Uniform1i(M,o.u_pitch_with_map),u_texsize:new r.Uniform2f(M,o.u_texsize),u_texture:new r.Uniform1i(M,o.u_texture),u_gamma_scale:new r.Uniform1f(M,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(M,o.u_is_halo)}),symbolTextAndIcon:(M,o)=>({u_is_size_zoom_constant:new r.Uniform1i(M,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(M,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(M,o.u_size_t),u_size:new r.Uniform1f(M,o.u_size),u_camera_to_center_distance:new r.Uniform1f(M,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(M,o.u_pitch),u_rotate_symbol:new r.Uniform1i(M,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(M,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(M,o.u_fade_change),u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(M,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(M,o.u_coord_matrix),u_is_text:new r.Uniform1i(M,o.u_is_text),u_pitch_with_map:new r.Uniform1i(M,o.u_pitch_with_map),u_texsize:new r.Uniform2f(M,o.u_texsize),u_texsize_icon:new r.Uniform2f(M,o.u_texsize_icon),u_texture:new r.Uniform1i(M,o.u_texture),u_texture_icon:new r.Uniform1i(M,o.u_texture_icon),u_gamma_scale:new r.Uniform1f(M,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(M,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(M,o.u_is_halo)}),background:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_opacity:new r.Uniform1f(M,o.u_opacity),u_color:new r.UniformColor(M,o.u_color)}),backgroundPattern:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_opacity:new r.Uniform1f(M,o.u_opacity),u_image:new r.Uniform1i(M,o.u_image),u_pattern_tl_a:new r.Uniform2f(M,o.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(M,o.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(M,o.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(M,o.u_pattern_br_b),u_texsize:new r.Uniform2f(M,o.u_texsize),u_mix:new r.Uniform1f(M,o.u_mix),u_pattern_size_a:new r.Uniform2f(M,o.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(M,o.u_pattern_size_b),u_scale_a:new r.Uniform1f(M,o.u_scale_a),u_scale_b:new r.Uniform1f(M,o.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(M,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(M,o.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(M,o.u_tile_units_to_pixels)}),terrain:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_texture:new r.Uniform1i(M,o.u_texture)}),terrainDepth:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix)}),terrainCoords:(M,o)=>({u_matrix:new r.UniformMatrix4f(M,o.u_matrix),u_texture:new r.Uniform1i(M,o.u_texture),u_terrain_coords_id:new r.Uniform1f(M,o.u_terrain_coords_id)})};class mp{constructor(o,h,w){this.context=o;const I=o.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const gp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Um{constructor(o,h,w,I){this.length=h.length,this.attributes=w,this.itemSize=h.bytesPerElement,this.dynamicDraw=I,this.context=o;const O=o.gl;this.buffer=O.createBuffer(),o.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let w=0;w<this.attributes.length;w++){const I=h.attributes[this.attributes[w].name];I!==void 0&&o.enableVertexAttribArray(I)}}setVertexAttribPointers(o,h,w){for(let I=0;I<this.attributes.length;I++){const O=this.attributes[I],te=h.attributes[O.name];te!==void 0&&o.vertexAttribPointer(te,O.components,o[gp[O.type]],!1,this.itemSize,O.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class n0 extends Rn{getDefault(){return r.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class au extends Rn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class ou extends Rn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Vm extends Rn{getDefault(){return[!0,!0,!0,!0]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class ra extends Rn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class yp extends Rn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ad extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Md extends Rn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class xp extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class vp extends Rn{getDefault(){return[0,1]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Pd extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class bp extends Rn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class _p extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class Id extends Rn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Gm extends Rn{getDefault(){return r.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Hm extends Rn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Ql extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class r0 extends Rn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class s0 extends Rn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class a0 extends Rn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class o0 extends Rn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class l0 extends Rn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class c0 extends Rn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class wp extends Rn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Dd extends Rn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Cp extends Rn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Tp extends Rn{getDefault(){return null}set(o){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Jl extends Rn{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class qm extends Rn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Wm extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Sp extends Rn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Fo extends Rn{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class Ym extends Fo{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class ec extends Fo{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class tc{constructor(o,h,w,I){this.context=o,this.width=h,this.height=w;const O=o.gl,te=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new Ym(o,te),I&&(this.depthAttachment=new ec(o,te)),O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){const w=this.depthAttachment.get();w&&o.deleteRenderbuffer(w)}o.deleteFramebuffer(this.framebuffer)}}class wr{constructor(o,h,w){this.blendFunction=o,this.blendColor=h,this.mask=w}}wr.Replace=[1,0],wr.disabled=new wr(wr.Replace,r.Color.transparent,[!1,!1,!1,!1]),wr.unblended=new wr(wr.Replace,r.Color.transparent,[!0,!0,!0,!0]),wr.alphaBlended=new wr([1,771],r.Color.transparent,[!0,!0,!0,!0]);class Ep{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new n0(this),this.clearDepth=new au(this),this.clearStencil=new ou(this),this.colorMask=new Vm(this),this.depthMask=new ra(this),this.stencilMask=new yp(this),this.stencilFunc=new Ad(this),this.stencilOp=new Md(this),this.stencilTest=new xp(this),this.depthRange=new vp(this),this.depthTest=new Pd(this),this.depthFunc=new bp(this),this.blend=new _p(this),this.blendFunc=new Id(this),this.blendColor=new Gm(this),this.blendEquation=new Hm(this),this.cullFace=new Ql(this),this.cullFaceSide=new r0(this),this.frontFace=new s0(this),this.program=new a0(this),this.activeTexture=new o0(this),this.viewport=new l0(this),this.bindFramebuffer=new c0(this),this.bindRenderbuffer=new wp(this),this.bindTexture=new Dd(this),this.bindVertexBuffer=new Cp(this),this.bindElementBuffer=new Tp(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Jl(this),this.pixelStoreUnpack=new qm(this),this.pixelStoreUnpackPremultiplyAlpha=new Wm(this),this.pixelStoreUnpackFlipY=new Sp(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new mp(this,o,h)}createVertexBuffer(o,h,w){return new Um(this,o,h,w)}createRenderbuffer(o,h,w){const I=this.gl,O=I.createRenderbuffer();return this.bindRenderbuffer.set(O),I.renderbufferStorage(I.RENDERBUFFER,o,h,w),this.bindRenderbuffer.set(null),O}createFramebuffer(o,h,w){return new tc(this,o,h,w)}clear({color:o,depth:h}){const w=this.gl;let I=0;o&&(I|=w.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(I|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),w.clear(I)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){v(o.blendFunction,wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ci{constructor(o,h,w){this.func=o,this.mask=h,this.range=w}}Ci.ReadOnly=!1,Ci.ReadWrite=!0,Ci.disabled=new Ci(519,Ci.ReadOnly,[0,1]);const ic=7680;class mr{constructor(o,h,w,I,O,te){this.test=o,this.ref=h,this.mask=w,this.fail=I,this.depthFail=O,this.pass=te}}mr.disabled=new mr({func:519,mask:0},0,0,ic,ic,ic);class nr{constructor(o,h,w){this.enable=o,this.mode=h,this.frontFace=w}}let Bo;function Zm(M,o,h,w,I,O,te){const ue=M.context,me=ue.gl,Se=M.useProgram("collisionBox"),ze=[];let Ve=0,Ye=0;for(let at=0;at<w.length;at++){const Mt=w[at],St=o.getTile(Mt),jt=St.getBucket(h);if(!jt)continue;let Ot=Mt.posMatrix;I[0]===0&&I[1]===0||(Ot=M.translatePosMatrix(Mt.posMatrix,St,I,O));const Vt=te?jt.textCollisionBox:jt.iconCollisionBox,Nt=jt.collisionCircleArray;if(Nt.length>0){const oi=r.create(),Xt=Ot;r.mul(oi,jt.placementInvProjMatrix,M.transform.glCoordMatrix),r.mul(oi,oi,jt.placementViewportMatrix),ze.push({circleArray:Nt,circleOffset:Ye,transform:Xt,invTransform:oi,coord:Mt}),Ve+=Nt.length/4,Ye=Ve}Vt&&Se.draw(ue,me.LINES,Ci.disabled,mr.disabled,M.colorModeForRenderPass(),nr.disabled,Cd(Ot,M.transform,St),M.style.terrain&&M.style.terrain.getTerrainData(Mt),h.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,M.transform.zoom,null,null,Vt.collisionVertexBuffer)}if(!te||!ze.length)return;const it=M.useProgram("collisionCircle"),Je=new r.CollisionCircleLayoutArray;Je.resize(4*Ve),Je._trim();let et=0;for(const at of ze)for(let Mt=0;Mt<at.circleArray.length/4;Mt++){const St=4*Mt,jt=at.circleArray[St+0],Ot=at.circleArray[St+1],Vt=at.circleArray[St+2],Nt=at.circleArray[St+3];Je.emplace(et++,jt,Ot,Vt,Nt,0),Je.emplace(et++,jt,Ot,Vt,Nt,1),Je.emplace(et++,jt,Ot,Vt,Nt,2),Je.emplace(et++,jt,Ot,Vt,Nt,3)}(!Bo||Bo.length<2*Ve)&&(Bo=function(at){const Mt=2*at,St=new r.QuadTriangleArray;St.resize(Mt),St._trim();for(let jt=0;jt<Mt;jt++){const Ot=6*jt;St.uint16[Ot+0]=4*jt+0,St.uint16[Ot+1]=4*jt+1,St.uint16[Ot+2]=4*jt+2,St.uint16[Ot+3]=4*jt+2,St.uint16[Ot+4]=4*jt+3,St.uint16[Ot+5]=4*jt+0}return St}(Ve));const pt=ue.createIndexBuffer(Bo,!0),yt=ue.createVertexBuffer(Je,r.collisionCircleLayout.members,!0);for(const at of ze){const Mt={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(wt=M.transform).cameraToCenterDistance,u_viewport_size:[wt.width,wt.height]};it.draw(ue,me.TRIANGLES,Ci.disabled,mr.disabled,M.colorModeForRenderPass(),nr.disabled,Mt,M.style.terrain&&M.style.terrain.getTerrainData(at.coord),h.id,yt,pt,r.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,M.transform.zoom,null,null,null)}var wt;yt.destroy(),pt.destroy()}nr.disabled=new nr(!1,1029,2305),nr.backCCW=new nr(!0,1029,2305);const u0=r.identity(new Float32Array(16));function Xm(M,o,h,w,I,O){const{horizontalAlign:te,verticalAlign:ue}=r.getAnchorAlignment(M),me=-(te-.5)*o,Se=-(ue-.5)*h,ze=r.evaluateVariableOffset(M,w);return new r.pointGeometry((me/I+ze[0])*O,(Se/I+ze[1])*O)}function d0(M,o,h,w,I,O,te,ue,me,Se,ze){const Ve=M.text.placedSymbolArray,Ye=M.text.dynamicLayoutVertexArray,it=M.icon.dynamicLayoutVertexArray,Je={};Ye.clear();for(let et=0;et<Ve.length;et++){const pt=Ve.get(et),yt=M.allowVerticalPlacement&&!pt.placedOrientation,wt=pt.hidden||!pt.crossTileID||yt?null:w[pt.crossTileID];if(wt){const at=new r.pointGeometry(pt.anchorX,pt.anchorY),Mt=ht(at,h?te:O,ze),St=gt(I.cameraToCenterDistance,Mt.signedDistanceFromCamera);let jt=r.evaluateSizeForFeature(M.textSizeData,me,pt)*St/r.ONE_EM;h&&(jt*=M.tilePixelRatio/ue);const{width:Ot,height:Vt,anchor:Nt,textOffset:oi,textBoxScale:Xt}=wt,ci=Xm(Nt,Ot,Vt,oi,Xt,jt),Ji=h?ht(at.add(ci),O,ze).point:Mt.point.add(o?ci.rotate(-I.angle):ci),dn=M.allowVerticalPlacement&&pt.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let Ii=0;Ii<pt.numGlyphs;Ii++)r.addDynamicAttributes(Ye,Ji,dn);Se&&pt.associatedIconIndex>=0&&(Je[pt.associatedIconIndex]={shiftedAnchor:Ji,angle:dn})}else un(pt.numGlyphs,Ye)}if(Se){it.clear();const et=M.icon.placedSymbolArray;for(let pt=0;pt<et.length;pt++){const yt=et.get(pt);if(yt.hidden)un(yt.numGlyphs,it);else{const wt=Je[pt];if(wt)for(let at=0;at<yt.numGlyphs;at++)r.addDynamicAttributes(it,wt.shiftedAnchor,wt.angle);else un(yt.numGlyphs,it)}}M.icon.dynamicLayoutVertexBuffer.updateData(it)}M.text.dynamicLayoutVertexBuffer.updateData(Ye)}function kp(M,o,h){return h.iconsInText&&o?"symbolTextAndIcon":M?"symbolSDF":"symbolIcon"}function lu(M,o,h,w,I,O,te,ue,me,Se,ze,Ve){const Ye=M.context,it=Ye.gl,Je=M.transform,et=ue==="map",pt=me==="map",yt=ue!=="viewport"&&h.layout.get("symbol-placement")!=="point",wt=et&&!pt&&!yt,at=!h.layout.get("symbol-sort-key").isConstant();let Mt=!1;const St=M.depthModeForSublayer(0,Ci.ReadOnly),jt=h.layout.get("text-variable-anchor"),Ot=[];for(const Vt of w){const Nt=o.getTile(Vt),oi=Nt.getBucket(h);if(!oi)continue;const Xt=I?oi.text:oi.icon;if(!Xt||!Xt.segments.get().length)continue;const ci=Xt.programConfigurations.get(h.id),Ji=I||oi.sdfIcons,dn=I?oi.textSizeData:oi.iconSizeData,Ii=pt||Je.pitch!==0,Un=M.useProgram(kp(Ji,I,oi),ci),Vn=r.evaluateSizeForZoom(dn,Je.zoom),Cn=M.style.terrain&&M.style.terrain.getTerrainData(Vt);let Sn,An,aa,ao,Ba=[0,0],$a=null;if(I){if(An=Nt.glyphAtlasTexture,aa=it.LINEAR,Sn=Nt.glyphAtlasTexture.size,oi.iconsInText){Ba=Nt.imageAtlasTexture.size,$a=Nt.imageAtlasTexture;const Ma=dn.kind==="composite"||dn.kind==="camera";ao=Ii||M.options.rotating||M.options.zooming||Ma?it.LINEAR:it.NEAREST}}else{const Ma=h.layout.get("icon-size").constantOr(0)!==1||oi.iconsNeedLinear;An=Nt.imageAtlasTexture,aa=Ji||M.options.rotating||M.options.zooming||Ma||Ii?it.LINEAR:it.NEAREST,Sn=Nt.imageAtlasTexture.size}const Cl=an(Nt,1,M.transform.zoom),ds=tt(Vt.posMatrix,pt,et,M.transform,Cl),Ua=nt(Vt.posMatrix,pt,et,M.transform,Cl),Tl=jt&&oi.hasTextData(),Wd=h.layout.get("icon-text-fit")!=="none"&&Tl&&oi.hasIconData();if(yt){const Ma=M.style.terrain?(lc,Yd)=>M.style.terrain.getElevation(Vt,lc,Yd):null,oc=h.layout.get("text-rotation-alignment")==="map";Lt(oi,Vt.posMatrix,M,I,ds,Ua,pt,Se,oc,Ma)}const Mn=M.translatePosMatrix(Vt.posMatrix,Nt,O,te),sr=yt||I&&jt||Wd?u0:ds,In=M.translatePosMatrix(Ua,Nt,O,te,!0),Br=Ji&&h.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ws;Ws=Ji?oi.iconsInText?t0(dn.kind,Vn,wt,pt,M,Mn,sr,In,Sn,Ba):hp(dn.kind,Vn,wt,pt,M,Mn,sr,In,I,Sn):kd(dn.kind,Vn,wt,pt,M,Mn,sr,In,I,Sn);const ur={program:Un,buffers:Xt,uniformValues:Ws,atlasTexture:An,atlasTextureIcon:$a,atlasInterpolation:aa,atlasInterpolationIcon:ao,isSDF:Ji,hasHalo:Br};if(at&&oi.canOverlap){Mt=!0;const Ma=Xt.segments.get();for(const oc of Ma)Ot.push({segments:new r.SegmentVector([oc]),sortKey:oc.sortKey,state:ur,terrainData:Cn})}else Ot.push({segments:Xt.segments,sortKey:0,state:ur,terrainData:Cn})}Mt&&Ot.sort((Vt,Nt)=>Vt.sortKey-Nt.sortKey);for(const Vt of Ot){const Nt=Vt.state;if(Ye.activeTexture.set(it.TEXTURE0),Nt.atlasTexture.bind(Nt.atlasInterpolation,it.CLAMP_TO_EDGE),Nt.atlasTextureIcon&&(Ye.activeTexture.set(it.TEXTURE1),Nt.atlasTextureIcon&&Nt.atlasTextureIcon.bind(Nt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),Nt.isSDF){const oi=Nt.uniformValues;Nt.hasHalo&&(oi.u_is_halo=1,cu(Nt.buffers,Vt.segments,h,M,Nt.program,St,ze,Ve,oi,Vt.terrainData)),oi.u_is_halo=0}cu(Nt.buffers,Vt.segments,h,M,Nt.program,St,ze,Ve,Nt.uniformValues,Vt.terrainData)}}function cu(M,o,h,w,I,O,te,ue,me,Se){const ze=w.context;I.draw(ze,ze.gl.TRIANGLES,O,te,ue,nr.disabled,me,Se,h.id,M.layoutVertexBuffer,M.indexBuffer,o,h.paint,w.transform.zoom,M.programConfigurations.get(h.id),M.dynamicLayoutVertexBuffer,M.opacityVertexBuffer)}function Rd(M,o,h,w,I,O,te){const ue=M.context.gl,me=h.paint.get("fill-pattern"),Se=me&&me.constantOr(1),ze=h.getCrossfadeParameters();let Ve,Ye,it,Je,et;te?(Ye=Se&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ve=ue.LINES):(Ye=Se?"fillPattern":"fill",Ve=ue.TRIANGLES);for(const pt of w){const yt=o.getTile(pt);if(Se&&!yt.patternsLoaded())continue;const wt=yt.getBucket(h);if(!wt)continue;const at=wt.programConfigurations.get(h.id),Mt=M.useProgram(Ye,at),St=M.style.terrain&&M.style.terrain.getTerrainData(pt);Se&&(M.context.activeTexture.set(ue.TEXTURE0),yt.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),at.updatePaintBuffers(ze));const jt=me.constantOr(null);if(jt&&yt.imageAtlas){const Nt=yt.imageAtlas,oi=Nt.patternPositions[jt.to.toString()],Xt=Nt.patternPositions[jt.from.toString()];oi&&Xt&&at.setConstantPatternPositions(oi,Xt)}const Ot=St?pt:null,Vt=M.translatePosMatrix(Ot?Ot.posMatrix:pt.posMatrix,yt,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(te){Je=wt.indexBuffer2,et=wt.segments2;const Nt=[ue.drawingBufferWidth,ue.drawingBufferHeight];it=Ye==="fillOutlinePattern"&&Se?Fm(Vt,M,ze,yt,Nt):Om(Vt,Nt)}else Je=wt.indexBuffer,et=wt.segments,it=Se?up(Vt,M,ze,yt):cp(Vt);Mt.draw(M.context,Ve,I,M.stencilModeForClipping(pt),O,nr.disabled,it,St,h.id,wt.layoutVertexBuffer,Je,et,h.paint,M.transform.zoom,at)}}function uu(M,o,h,w,I,O,te){const ue=M.context,me=ue.gl,Se=h.paint.get("fill-extrusion-pattern"),ze=Se.constantOr(1),Ve=h.getCrossfadeParameters(),Ye=h.paint.get("fill-extrusion-opacity");for(const it of w){const Je=o.getTile(it),et=Je.getBucket(h);if(!et)continue;const pt=M.style.terrain&&M.style.terrain.getTerrainData(it),yt=et.programConfigurations.get(h.id),wt=M.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",yt);ze&&(M.context.activeTexture.set(me.TEXTURE0),Je.imageAtlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),yt.updatePaintBuffers(Ve));const at=Se.constantOr(null);if(at&&Je.imageAtlas){const Ot=Je.imageAtlas,Vt=Ot.patternPositions[at.to.toString()],Nt=Ot.patternPositions[at.from.toString()];Vt&&Nt&&yt.setConstantPatternPositions(Vt,Nt)}const Mt=M.translatePosMatrix(it.posMatrix,Je,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),St=h.paint.get("fill-extrusion-vertical-gradient"),jt=ze?lp(Mt,M,St,Ye,it,Ve,Je):jm(Mt,M,St,Ye);wt.draw(ue,ue.gl.TRIANGLES,I,O,te,nr.backCCW,jt,pt,h.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,h.paint,M.transform.zoom,yt,M.style.terrain&&et.centroidVertexBuffer)}}function Km(M,o,h,w,I,O,te){const ue=M.context,me=ue.gl,Se=h.fbo;if(!Se)return;const ze=M.useProgram("hillshade"),Ve=M.style.terrain&&M.style.terrain.getTerrainData(o);ue.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,Se.colorAttachment.get()),ze.draw(ue,me.TRIANGLES,I,O,te,nr.disabled,((Ye,it,Je,et)=>{const pt=Je.paint.get("hillshade-shadow-color"),yt=Je.paint.get("hillshade-highlight-color"),wt=Je.paint.get("hillshade-accent-color");let at=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(at-=Ye.transform.angle);const Mt=!Ye.options.moving;return{u_matrix:et?et.posMatrix:Ye.transform.calculatePosMatrix(it.tileID.toUnwrapped(),Mt),u_image:0,u_latrange:Sd(0,it.tileID),u_light:[Je.paint.get("hillshade-exaggeration"),at],u_shadow:pt,u_highlight:yt,u_accent:wt}})(M,h,w,Ve?o:null),Ve,w.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}function Ld(M,o,h,w,I,O){const te=M.context,ue=te.gl,me=o.dem;if(me&&me.data){const Se=me.dim,ze=me.stride,Ve=me.getPixels();if(te.activeTexture.set(ue.TEXTURE1),te.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||M.getTileTexture(ze),o.demTexture){const it=o.demTexture;it.update(Ve,{premultiply:!1}),it.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else o.demTexture=new C(te,Ve,ue.RGBA,{premultiply:!1}),o.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);te.activeTexture.set(ue.TEXTURE0);let Ye=o.fbo;if(!Ye){const it=new C(te,{width:Se,height:Se,data:null},ue.RGBA);it.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ye=o.fbo=te.createFramebuffer(Se,Se,!0),Ye.colorAttachment.set(it.texture)}te.bindFramebuffer.set(Ye.framebuffer),te.viewport.set([0,0,Se,Se]),M.useProgram("hillshadePrepare").draw(te,ue.TRIANGLES,w,I,O,nr.disabled,((it,Je)=>{const et=Je.stride,pt=r.create();return r.ortho(pt,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(pt,pt,[0,-r.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[et,et],u_zoom:it.overscaledZ,u_unpack:Je.getUnpackVector()}})(o.tileID,me),null,h.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function Nd(M,o,h,w,I,O){const te=w.paint.get("raster-fade-duration");if(!O&&te>0){const ue=r.exported.now(),me=(ue-M.timeAdded)/te,Se=o?(ue-o.timeAdded)/te:-1,ze=h.getSource(),Ve=I.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),Ye=!o||Math.abs(o.tileID.overscaledZ-Ve)>Math.abs(M.tileID.overscaledZ-Ve),it=Ye&&M.refreshedUponExpiration?1:r.clamp(Ye?me:1-Se,0,1);return M.refreshedUponExpiration&&me>=1&&(M.refreshedUponExpiration=!1),o?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const Fa=new r.Color(1,0,0,1),Qm=new r.Color(0,1,0,1),Ap=new r.Color(0,0,1,1),Jm=new r.Color(1,0,1,1),nc=new r.Color(0,1,1,1);function du(M,o,h,w){jd(M,0,o+h/2,M.transform.width,h,w)}function zd(M,o,h,w){jd(M,o-h/2,0,h,M.transform.height,w)}function jd(M,o,h,w,I,O){const te=M.context,ue=te.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(o*M.pixelRatio,h*M.pixelRatio,w*M.pixelRatio,I*M.pixelRatio),te.clear({color:O}),ue.disable(ue.SCISSOR_TEST)}function Mp(M,o,h){const w=M.context,I=w.gl,O=h.posMatrix,te=M.useProgram("debug"),ue=Ci.disabled,me=mr.disabled,Se=M.colorModeForRenderPass(),ze="$debug",Ve=M.style.terrain&&M.style.terrain.getTerrainData(h);w.activeTexture.set(I.TEXTURE0),M.emptyTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE);const Ye=o.getTileByID(h.key).latestRawTileData,it=Math.floor((Ye&&Ye.byteLength||0)/1024),Je=o.getTile(h).tileSize,et=512/Math.min(Je,512)*(h.overscaledZ/M.transform.zoom)*.5;let pt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(pt+=` => ${h.overscaledZ}`),function(yt,wt){yt.initDebugOverlayCanvas();const at=yt.debugOverlayCanvas,Mt=yt.context.gl,St=yt.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,at.width,at.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(wt,5,5),St.strokeText(wt,5,5),yt.debugOverlayTexture.update(at),yt.debugOverlayTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}(M,`${pt} ${it}kB`),te.draw(w,I.TRIANGLES,ue,me,wr.alphaBlended,nr.disabled,Kl(O,r.Color.transparent,et),null,ze,M.debugBuffer,M.quadTriangleIndexBuffer,M.debugSegments),te.draw(w,I.LINE_STRIP,ue,me,Se,nr.disabled,Kl(O,r.Color.red),Ve,ze,M.debugBuffer,M.tileBorderIndexBuffer,M.debugSegments)}function eg(M,o,h){const w=M.context,I=w.gl,O=M.colorModeForRenderPass(),te=new Ci(I.LEQUAL,Ci.ReadWrite,M.depthRangeFor3D),ue=M.useProgram("terrain"),me=o.getTerrainMesh(),Se=o.getTerrainData(h.tileID);w.bindFramebuffer.set(null),w.viewport.set([0,0,M.width,M.height]),w.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,o.getRTTFramebuffer().colorAttachment.get());const ze=M.transform.calculatePosMatrix(h.tileID.toUnwrapped());ue.draw(w,I.TRIANGLES,te,mr.disabled,O,nr.backCCW,{u_matrix:ze,u_texture:0},Se,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}function Pp(M,o,h,w){const I=M.context,O=h.tileSize*o.qualityFactor;h.textures[w]||(h.textures[w]=M.getTileTexture(O)||new C(I,{width:O,height:O,data:null},I.gl.RGBA),h.textures[w].bind(I.gl.LINEAR,I.gl.CLAMP_TO_EDGE),w===0&&o.sourceCache.renderHistory.unshift(h.tileID.key));const te=o.getRTTFramebuffer();te.colorAttachment.set(h.textures[w].texture),I.bindFramebuffer.set(te.framebuffer),I.viewport.set([0,0,O,O])}class Od{constructor(o){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=o,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=o.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const o=this.painter.style,h=o.terrain;for(const w in o.sourceCaches){this._coordsDescendingInv[w]={};const I=o.sourceCaches[w].getVisibleCoordinates();for(const O of I){const te=h.sourceCache.getTerrainCoords(O);for(const ue in te)this._coordsDescendingInv[w][ue]||(this._coordsDescendingInv[w][ue]=[]),this._coordsDescendingInv[w][ue].push(te[ue])}}for(const w of o._order){const I=o._layers[w],O=I.source;if(this._renderToTexture[I.type]&&!this._coordsDescendingInvStr[O]){this._coordsDescendingInvStr[O]={};for(const te in this._coordsDescendingInv[O])this._coordsDescendingInvStr[O][te]=this._coordsDescendingInv[O][te].map(ue=>ue.key).sort().join()}}return this._renderableTiles.forEach(w=>{for(const I in this._coordsDescendingInvStr){const O=this._coordsDescendingInvStr[I][w.tileID.key];O&&O!==w.textureCoords[I]&&w.clearTextures(this.painter),h.needsRerender(I,w.tileID)&&w.clearTextures(this.painter)}this._rerender[w.tileID.key]=!w.textures.length}),h.clearRerenderCache(),h.sourceCache.removeOutdated(this.painter),this}renderLayer(o){const h=o.type,w=this.painter,I=w.style._order,O=w.currentLayer,te=O+1===I.length;if(this._renderToTexture[h]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(I[O]),!te))return!0;if(this._renderToTexture[this._prevType]||h==="hillshade"||this._renderToTexture[h]&&te){this._prevType=h;const ue=this._stacks.length-1,me=this._stacks[ue]||[];for(const Se of this._renderableTiles){if(Pp(w,w.style.terrain,Se,ue),this._rerender[Se.tileID.key]){w.context.clear({color:r.Color.transparent});for(let ze=0;ze<me.length;ze++){const Ve=w.style._layers[me[ze]],Ye=Ve.source?this._coordsDescendingInv[Ve.source][Se.tileID.key]:[Se.tileID];w._renderTileClippingMasks(Ve,Ye),w.renderLayer(w,w.style.sourceCaches[Ve.source],Ve,Ye),Ve.source&&(Se.textureCoords[Ve.source]=this._coordsDescendingInvStr[Ve.source][Se.tileID.key])}}eg(w,w.style.terrain,Se)}if(h==="hillshade"){this._stacks.push([I[O]]);for(const Se of this._renderableTiles){const ze=this._coordsDescendingInv[o.source][Se.tileID.key];Pp(w,w.style.terrain,Se,this._stacks.length-1),w.context.clear({color:r.Color.transparent}),w._renderTileClippingMasks(o,ze),w.renderLayer(w,w.style.sourceCaches[o.source],o,ze),eg(w,w.style.terrain,Se)}return!0}return this._renderToTexture[h]}return!1}}const Fd={symbol:function(M,o,h,w,I){if(M.renderPass!=="translucent")return;const O=mr.disabled,te=M.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(ue,me,Se,ze,Ve,Ye,it){const Je=me.transform,et=Ve==="map",pt=Ye==="map";for(const yt of ue){const wt=ze.getTile(yt),at=wt.getBucket(Se);if(!at||!at.text||!at.text.segments.get().length)continue;const Mt=r.evaluateSizeForZoom(at.textSizeData,Je.zoom),St=an(wt,1,me.transform.zoom),jt=tt(yt.posMatrix,pt,et,me.transform,St),Ot=Se.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(Mt){const Vt=Math.pow(2,Je.zoom-wt.tileID.overscaledZ);d0(at,et,pt,it,Je,jt,yt.posMatrix,Vt,Mt,Ot,me.style.terrain?(Nt,oi)=>me.style.terrain.getElevation(yt,Nt,oi):null)}}}(w,M,h,o,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),I),h.paint.get("icon-opacity").constantOr(1)!==0&&lu(M,o,h,w,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),O,te),h.paint.get("text-opacity").constantOr(1)!==0&&lu(M,o,h,w,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),O,te),o.map.showCollisionBoxes&&(Zm(M,o,h,w,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Zm(M,o,h,w,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(M,o,h,w){if(M.renderPass!=="translucent")return;const I=h.paint.get("circle-opacity"),O=h.paint.get("circle-stroke-width"),te=h.paint.get("circle-stroke-opacity"),ue=!h.layout.get("circle-sort-key").isConstant();if(I.constantOr(1)===0&&(O.constantOr(1)===0||te.constantOr(1)===0))return;const me=M.context,Se=me.gl,ze=M.depthModeForSublayer(0,Ci.ReadOnly),Ve=mr.disabled,Ye=M.colorModeForRenderPass(),it=[];for(let Je=0;Je<w.length;Je++){const et=w[Je],pt=o.getTile(et),yt=pt.getBucket(h);if(!yt)continue;const wt=yt.programConfigurations.get(h.id),at=M.useProgram("circle",wt),Mt=yt.layoutVertexBuffer,St=yt.indexBuffer,jt=M.style.terrain&&M.style.terrain.getTerrainData(et),Ot={programConfiguration:wt,program:at,layoutVertexBuffer:Mt,indexBuffer:St,uniformValues:gl(M,et,pt,h),terrainData:jt};if(ue){const Vt=yt.segments.get();for(const Nt of Vt)it.push({segments:new r.SegmentVector([Nt]),sortKey:Nt.sortKey,state:Ot})}else it.push({segments:yt.segments,sortKey:0,state:Ot})}ue&&it.sort((Je,et)=>Je.sortKey-et.sortKey);for(const Je of it){const{programConfiguration:et,program:pt,layoutVertexBuffer:yt,indexBuffer:wt,uniformValues:at,terrainData:Mt}=Je.state;pt.draw(me,Se.TRIANGLES,ze,Ve,Ye,nr.disabled,at,Mt,h.id,yt,wt,Je.segments,h.paint,M.transform.zoom,et)}},heatmap:function(M,o,h,w){if(h.paint.get("heatmap-opacity")!==0)if(M.renderPass==="offscreen"){const I=M.context,O=I.gl,te=mr.disabled,ue=new wr([O.ONE,O.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(me,Se,ze){const Ve=me.gl;me.activeTexture.set(Ve.TEXTURE1),me.viewport.set([0,0,Se.width/4,Se.height/4]);let Ye=ze.heatmapFbo;if(Ye)Ve.bindTexture(Ve.TEXTURE_2D,Ye.colorAttachment.get()),me.bindFramebuffer.set(Ye.framebuffer);else{const it=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,it),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),Ye=ze.heatmapFbo=me.createFramebuffer(Se.width/4,Se.height/4,!1),function(Je,et,pt,yt){const wt=Je.gl;wt.texImage2D(wt.TEXTURE_2D,0,wt.RGBA,et.width/4,et.height/4,0,wt.RGBA,Je.extRenderToTextureHalfFloat?Je.extTextureHalfFloat.HALF_FLOAT_OES:wt.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(me,Se,it,Ye)}})(I,M,h),I.clear({color:r.Color.transparent});for(let me=0;me<w.length;me++){const Se=w[me];if(o.hasRenderableParent(Se))continue;const ze=o.getTile(Se),Ve=ze.getBucket(h);if(!Ve)continue;const Ye=Ve.programConfigurations.get(h.id),it=M.useProgram("heatmap",Ye),{zoom:Je}=M.transform;it.draw(I,O.TRIANGLES,Ci.disabled,te,ue,nr.disabled,Td(Se.posMatrix,ze,Je,h.paint.get("heatmap-intensity")),null,h.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,h.paint,M.transform.zoom,Ye)}I.viewport.set([0,0,M.width,M.height])}else M.renderPass==="translucent"&&(M.context.setColorMode(M.colorModeForRenderPass()),function(I,O){const te=I.context,ue=te.gl,me=O.heatmapFbo;if(!me)return;te.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,me.colorAttachment.get()),te.activeTexture.set(ue.TEXTURE1);let Se=O.colorRampTexture;Se||(Se=O.colorRampTexture=new C(te,O.colorRamp,ue.RGBA)),Se.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),I.useProgram("heatmapTexture").draw(te,ue.TRIANGLES,Ci.disabled,mr.disabled,I.colorModeForRenderPass(),nr.disabled,((ze,Ve,Ye,it)=>{const Je=r.create();r.ortho(Je,0,ze.width,ze.height,0,0,1);const et=ze.context.gl;return{u_matrix:Je,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ve.paint.get("heatmap-opacity")}})(I,O),null,O.id,I.viewportBuffer,I.quadTriangleIndexBuffer,I.viewportSegments,O.paint,I.transform.zoom)}(M,h))},line:function(M,o,h,w){if(M.renderPass!=="translucent")return;const I=h.paint.get("line-opacity"),O=h.paint.get("line-width");if(I.constantOr(1)===0||O.constantOr(1)===0)return;const te=M.depthModeForSublayer(0,Ci.ReadOnly),ue=M.colorModeForRenderPass(),me=h.paint.get("line-dasharray"),Se=h.paint.get("line-pattern"),ze=Se.constantOr(1),Ve=h.paint.get("line-gradient"),Ye=h.getCrossfadeParameters(),it=ze?"linePattern":me?"lineSDF":Ve?"lineGradient":"line",Je=M.context,et=Je.gl;let pt=!0;for(const yt of w){const wt=o.getTile(yt);if(ze&&!wt.patternsLoaded())continue;const at=wt.getBucket(h);if(!at)continue;const Mt=at.programConfigurations.get(h.id),St=M.context.program.get(),jt=M.useProgram(it,Mt),Ot=pt||jt.program!==St,Vt=M.style.terrain&&M.style.terrain.getTerrainData(yt),Nt=Se.constantOr(null);if(Nt&&wt.imageAtlas){const ci=wt.imageAtlas,Ji=ci.patternPositions[Nt.to.toString()],dn=ci.patternPositions[Nt.from.toString()];Ji&&dn&&Mt.setConstantPatternPositions(Ji,dn)}const oi=Vt?yt:null,Xt=ze?ru(M,wt,h,Ye,oi):me?fr(M,wt,h,me,Ye,oi):Ve?Ed(M,wt,h,at.lineClipsArray.length,oi):nu(M,wt,h,oi);if(ze)Je.activeTexture.set(et.TEXTURE0),wt.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Mt.updatePaintBuffers(Ye);else if(me&&(Ot||M.lineAtlas.dirty))Je.activeTexture.set(et.TEXTURE0),M.lineAtlas.bind(Je);else if(Ve){const ci=at.gradients[h.id];let Ji=ci.texture;if(h.gradientVersion!==ci.version){let dn=256;if(h.stepInterpolant){const Ii=o.getSource().maxzoom,Un=yt.canonical.z===Ii?Math.ceil(1<<M.transform.maxZoom-yt.canonical.z):1;dn=r.clamp(r.nextPowerOfTwo(at.maxLineLength/r.EXTENT*1024*Un),256,Je.maxTextureSize)}ci.gradient=r.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:dn,image:ci.gradient||void 0,clips:at.lineClipsArray}),ci.texture?ci.texture.update(ci.gradient):ci.texture=new C(Je,ci.gradient,et.RGBA),ci.version=h.gradientVersion,Ji=ci.texture}Je.activeTexture.set(et.TEXTURE0),Ji.bind(h.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}jt.draw(Je,et.TRIANGLES,te,M.stencilModeForClipping(yt),ue,nr.disabled,Xt,Vt,h.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,h.paint,M.transform.zoom,Mt,at.layoutVertexBuffer2),pt=!1}},fill:function(M,o,h,w){const I=h.paint.get("fill-color"),O=h.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const te=M.colorModeForRenderPass(),ue=h.paint.get("fill-pattern"),me=M.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&I.constantOr(r.Color.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===me){const Se=M.depthModeForSublayer(1,M.renderPass==="opaque"?Ci.ReadWrite:Ci.ReadOnly);Rd(M,o,h,w,Se,te,!1)}if(M.renderPass==="translucent"&&h.paint.get("fill-antialias")){const Se=M.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,Ci.ReadOnly);Rd(M,o,h,w,Se,te,!0)}},"fill-extrusion":function(M,o,h,w){const I=h.paint.get("fill-extrusion-opacity");if(I!==0&&M.renderPass==="translucent"){const O=new Ci(M.context.gl.LEQUAL,Ci.ReadWrite,M.depthRangeFor3D);if(I!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))uu(M,o,h,w,O,mr.disabled,wr.disabled),uu(M,o,h,w,O,M.stencilModeFor3D(),M.colorModeForRenderPass());else{const te=M.colorModeForRenderPass();uu(M,o,h,w,O,mr.disabled,te)}}},hillshade:function(M,o,h,w){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const I=M.context,O=M.depthModeForSublayer(0,Ci.ReadOnly),te=M.colorModeForRenderPass(),[ue,me]=M.renderPass==="translucent"?M.stencilConfigForOverlap(w):[{},w];for(const Se of me){const ze=o.getTile(Se);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&M.renderPass==="offscreen"?Ld(M,ze,h,O,mr.disabled,te):M.renderPass==="translucent"&&Km(M,Se,ze,h,O,ue[Se.overscaledZ],te)}I.viewport.set([0,0,M.width,M.height])},raster:function(M,o,h,w){if(M.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!w.length)return;const I=M.context,O=I.gl,te=o.getSource(),ue=M.useProgram("raster"),me=M.colorModeForRenderPass(),[Se,ze]=te instanceof H?[{},w]:M.stencilConfigForOverlap(w),Ve=ze[ze.length-1].overscaledZ,Ye=!M.options.moving;for(const it of ze){const Je=M.depthModeForSublayer(it.overscaledZ-Ve,h.paint.get("raster-opacity")===1?Ci.ReadWrite:Ci.ReadOnly,O.LESS),et=o.getTile(it);et.registerFadeDuration(h.paint.get("raster-fade-duration"));const pt=o.findLoadedParent(it,0),yt=Nd(et,pt,o,h,M.transform,M.style.terrain);let wt,at;const Mt=h.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;I.activeTexture.set(O.TEXTURE0),et.texture.bind(Mt,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),I.activeTexture.set(O.TEXTURE1),pt?(pt.texture.bind(Mt,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,pt.tileID.overscaledZ-et.tileID.overscaledZ),at=[et.tileID.canonical.x*wt%1,et.tileID.canonical.y*wt%1]):et.texture.bind(Mt,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST);const St=M.style.terrain&&M.style.terrain.getTerrainData(it),jt=St?it:null,Ot=jt?jt.posMatrix:M.transform.calculatePosMatrix(it.toUnwrapped(),Ye),Vt=Bm(Ot,at||[0,0],wt||1,yt,h);te instanceof H?ue.draw(I,O.TRIANGLES,Je,mr.disabled,me,nr.disabled,Vt,St,h.id,te.boundsBuffer,M.quadTriangleIndexBuffer,te.boundsSegments):ue.draw(I,O.TRIANGLES,Je,Se[it.overscaledZ],me,nr.disabled,Vt,St,h.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}},background:function(M,o,h,w){const I=h.paint.get("background-color"),O=h.paint.get("background-opacity");if(O===0)return;const te=M.context,ue=te.gl,me=M.transform,Se=me.tileSize,ze=h.paint.get("background-pattern");if(M.isPatternMissing(ze))return;const Ve=!ze&&I.a===1&&O===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Ve)return;const Ye=mr.disabled,it=M.depthModeForSublayer(0,Ve==="opaque"?Ci.ReadWrite:Ci.ReadOnly),Je=M.colorModeForRenderPass(),et=M.useProgram(ze?"backgroundPattern":"background"),pt=w||me.coveringTiles({tileSize:Se,terrain:M.style.terrain});ze&&(te.activeTexture.set(ue.TEXTURE0),M.imageManager.bind(M.context));const yt=h.getCrossfadeParameters();for(const wt of pt){const at=w?wt.posMatrix:M.transform.calculatePosMatrix(wt.toUnwrapped()),Mt=ze?pp(at,O,M,ze,{tileID:wt,tileSize:Se},yt):i0(at,O,I),St=M.style.terrain&&M.style.terrain.getTerrainData(wt);et.draw(te,ue.TRIANGLES,it,Ye,Je,nr.disabled,Mt,St,h.id,M.tileExtentBuffer,M.quadTriangleIndexBuffer,M.tileExtentSegments)}},debug:function(M,o,h){for(let w=0;w<h.length;w++)Mp(M,o,h[w])},custom:function(M,o,h){const w=M.context,I=h.implementation;if(M.renderPass==="offscreen"){const O=I.prerender;O&&(M.setCustomLayerDefaults(),w.setColorMode(M.colorModeForRenderPass()),O.call(I,w.gl,M.transform.customLayerMatrix()),w.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),w.setColorMode(M.colorModeForRenderPass()),w.setStencilMode(mr.disabled);const O=I.renderingMode==="3d"?new Ci(M.context.gl.LEQUAL,Ci.ReadWrite,M.depthRangeFor3D):M.depthModeForSublayer(0,Ci.ReadOnly);w.setDepthMode(O),I.render(w.gl,M.transform.customLayerMatrix()),w.setDirty(),M.setBaseState(),w.bindFramebuffer.set(null)}}};class tg{constructor(o,h){this.context=new Ep(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=ee.maxUnderzooming+ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ui,this.gpuTimers={}}resize(o,h,w){if(this.width=o*w,this.height=h*w,this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style._order)this.style._layers[I].resize()}setup(){const o=this.context,h=new r.PosArray;h.emplaceBack(0,0),h.emplaceBack(r.EXTENT,0),h.emplaceBack(0,r.EXTENT),h.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(h,_i.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const w=new r.PosArray;w.emplaceBack(0,0),w.emplaceBack(r.EXTENT,0),w.emplaceBack(0,r.EXTENT),w.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=o.createVertexBuffer(w,_i.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const I=new r.RasterBoundsArray;I.emplaceBack(0,0,0,0),I.emplaceBack(r.EXTENT,0,r.EXTENT,0),I.emplaceBack(0,r.EXTENT,0,r.EXTENT),I.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(I,B.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const O=new r.PosArray;O.emplaceBack(0,0),O.emplaceBack(1,0),O.emplaceBack(0,1),O.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(O,_i.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const te=new r.LineStripIndexArray;te.emplaceBack(0),te.emplaceBack(1),te.emplaceBack(3),te.emplaceBack(2),te.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(te);const ue=new r.TriangleIndexArray;ue.emplaceBack(0,1,2),ue.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(ue),this.emptyTexture=new C(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);const me=this.context.gl;this.stencilClearMode=new mr({func:me.ALWAYS,mask:0},0,255,me.ZERO,me.ZERO,me.ZERO)}clearStencil(){const o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=r.create();r.ortho(w,0,this.width,this.height,0,0,1),r.scale(w,w,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,Ci.disabled,this.stencilClearMode,wr.disabled,nr.disabled,iu(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;const w=this.context,I=w.gl;this.nextStencilID+h.length>256&&this.clearStencil(),w.setColorMode(wr.disabled),w.setDepthMode(Ci.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const te of h){const ue=this._tileClippingMaskIDs[te.key]=this.nextStencilID++,me=this.style.terrain&&this.style.terrain.getTerrainData(te);O.draw(w,I.TRIANGLES,Ci.disabled,new mr({func:I.ALWAYS,mask:0},ue,255,I.KEEP,I.KEEP,I.REPLACE),wr.disabled,nr.disabled,iu(te.posMatrix),me,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,h=this.context.gl;return new mr({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){const h=this.context.gl;return new mr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){const h=this.context.gl,w=o.sort((te,ue)=>ue.overscaledZ-te.overscaledZ),I=w[w.length-1].overscaledZ,O=w[0].overscaledZ-I+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();const te={};for(let ue=0;ue<O;ue++)te[ue+I]=new mr({func:h.GEQUAL,mask:255},ue+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=O,[te,w]}return[{[I]:mr.disabled},w]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new wr([o.CONSTANT_COLOR,o.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?wr.unblended:wr.alphaBlended}depthModeForSublayer(o,h,w){if(!this.opaquePassEnabledForLayer())return Ci.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Ci(w||this.context.gl.LEQUAL,h,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const w=this.style._order,I=this.style.sourceCaches,O=this.style.terrain&&new Od(this);for(const Se in I){const ze=I[Se];ze.used&&ze.prepare(this.context)}const te={},ue={},me={};for(const Se in I){const ze=I[Se];te[Se]=ze.getVisibleCoordinates(),ue[Se]=te[Se].slice().reverse(),me[Se]=ze.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<w.length;Se++)if(this.style._layers[w[Se]].is3D()){this.opaquePassCutoff=Se;break}if(O){this.opaquePassCutoff=0;const Se=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Se.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ze,Ve){const Ye=ze.context,it=Ye.gl,Je=wr.unblended,et=new Ci(it.LEQUAL,Ci.ReadWrite,[0,1]),pt=Ve.getTerrainMesh(),yt=Ve.sourceCache.getRenderableTiles(),wt=ze.useProgram("terrainDepth");Ye.bindFramebuffer.set(Ve.getFramebuffer("depth").framebuffer),Ye.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),Ye.clear({color:r.Color.transparent,depth:1});for(const at of yt){const Mt=Ve.getTerrainData(at.tileID),St=ze.transform.calculatePosMatrix(at.tileID.toUnwrapped());wt.draw(Ye,it.TRIANGLES,et,mr.disabled,Je,nr.backCCW,{u_matrix:St},Mt,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain),function(ze,Ve){const Ye=ze.context,it=Ye.gl,Je=wr.unblended,et=new Ci(it.LEQUAL,Ci.ReadWrite,[0,1]),pt=Ve.getTerrainMesh(),yt=Ve.getCoordsTexture(),wt=Ve.sourceCache.getRenderableTiles(),at=ze.useProgram("terrainCoords");Ye.bindFramebuffer.set(Ve.getFramebuffer("coords").framebuffer),Ye.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),Ye.clear({color:r.Color.transparent,depth:1}),Ve.coordsIndex=[];for(const Mt of wt){const St=Ve.getTerrainData(Mt.tileID);Ye.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,yt.texture);const jt=ze.transform.calculatePosMatrix(Mt.tileID.toUnwrapped());at.draw(Ye,it.TRIANGLES,et,mr.disabled,Je,nr.backCCW,{u_matrix:jt,u_terrain_coords_id:(255-Ve.coordsIndex.length)/255,u_texture:0},St,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Ve.coordsIndex.push(Mt.tileID.key)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Se of w){const ze=this.style._layers[Se];if(!ze.hasOffscreenPass()||ze.isHidden(this.transform.zoom))continue;const Ve=ue[ze.source];(ze.type==="custom"||Ve.length)&&this.renderLayer(this,I[ze.source],ze,Ve)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!O)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[w[this.currentLayer]],ze=I[Se.source],Ve=te[Se.source];this._renderTileClippingMasks(Se,Ve),this.renderLayer(this,ze,Se,Ve)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const Se=this.style._layers[w[this.currentLayer]],ze=I[Se.source];if(O&&O.renderLayer(Se))continue;const Ve=(Se.type==="symbol"?me:ue)[Se.source];this._renderTileClippingMasks(Se,te[Se.source]),this.renderLayer(this,ze,Se,Ve)}if(this.options.showTileBoundaries){let Se,ze;Object.values(this.style._layers).forEach(Ve=>{Ve.source&&!Ve.isHidden(this.transform.zoom)&&(Ve.source!==(ze&&ze.id)&&(ze=this.style.sourceCaches[Ve.source]),(!Se||Se.getSource().maxzoom<ze.getSource().maxzoom)&&(Se=ze))}),Se&&Fd.debug(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const ze=Se.transform.padding;du(Se,Se.transform.height-(ze.top||0),3,Fa),du(Se,ze.bottom||0,3,Qm),zd(Se,ze.left||0,3,Ap),zd(Se,Se.transform.width-(ze.right||0),3,Jm);const Ve=Se.transform.centerPoint;(function(Ye,it,Je,et){jd(Ye,it-1,Je-10,2,20,et),jd(Ye,it-10,Je-1,20,2,et)})(Se,Ve.x,Se.transform.height-Ve.y,nc)}(this),this.context.setDefault()}renderLayer(o,h,w,I){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||(I||[]).length)&&(this.id=w.id,this.gpuTimingStart(w),Fd[w.type](o,h,w,I,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let w=this.gpuTimers[o.id];w||(w=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),w.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,w.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}queryGpuTimers(o){const h={};for(const w in o){const I=o[w],O=this.context.extTimerQuery,te=O.getQueryObjectEXT(I.query,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(I.query),h[w]=te}return h}translatePosMatrix(o,h,w,I,O){if(!w[0]&&!w[1])return o;const te=O?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(te){const Se=Math.sin(te),ze=Math.cos(te);w=[w[0]*ze-w[1]*Se,w[0]*Se+w[1]*ze]}const ue=[O?w[0]:an(h,w[0],this.transform.zoom),O?w[1]:an(h,w[1],this.transform.zoom),0],me=new Float32Array(16);return r.translate(me,o,ue),me}saveTileTexture(o){const h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const h=this.imageManager.getPattern(o.from.toString()),w=this.imageManager.getPattern(o.to.toString());return!h||!w}useProgram(o,h){this.cache=this.cache||{};const w=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new e0(this.context,o,tu[o],h,fp[o],this._showOverdrawInspector,this.style.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new C(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Bd{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,w){const I=Math.pow(2,w),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ue=>{const me=1/(ue=r.transformMat4([],ue,o))[3]/h*I;return r.mul$1(ue,ue,[me,me,1/ue[3],me])}),te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ue=>{const me=r.sub([],O[ue[0]],O[ue[1]]),Se=r.sub([],O[ue[2]],O[ue[1]]),ze=r.normalize([],r.cross([],me,Se)),Ve=-r.dot(ze,O[ue[1]]);return ze.concat(Ve)});return new Bd(O,te)}}class yl{constructor(o,h){this.min=o,this.max=h,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(o){const h=[o%2==0,o<2],w=r.clone$2(this.min),I=r.clone$2(this.max);for(let O=0;O<h.length;O++)w[O]=h[O]?this.min[O]:this.center[O],I[O]=h[O]?this.center[O]:this.max[O];return I[2]=this.max[2],new yl(w,I)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let I=0;I<o.planes.length;I++){const O=o.planes[I];let te=0;for(let ue=0;ue<h.length;ue++)r.dot$1(O,h[ue])>=0&&te++;if(te===0)return 0;te!==h.length&&(w=!1)}if(w)return 2;for(let I=0;I<3;I++){let O=Number.MAX_VALUE,te=-Number.MAX_VALUE;for(let ue=0;ue<o.points.length;ue++){const me=o.points[ue][I]-this.min[I];O=Math.min(O,me),te=Math.max(te,me)}if(te<0||O>this.max[I]-this.min[I])return 0}return 1}}class hu{constructor(o=0,h=0,w=0,I=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(w)||w<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=w,this.right=I}interpolate(o,h,w){return h.top!=null&&o.top!=null&&(this.top=r.number(o.top,h.top,w)),h.bottom!=null&&o.bottom!=null&&(this.bottom=r.number(o.bottom,h.bottom,w)),h.left!=null&&o.left!=null&&(this.left=r.number(o.left,h.left,w)),h.right!=null&&o.right!=null&&(this.right=r.number(o.right,h.right,w)),this}getCenter(o,h){const w=r.clamp((this.left+o-this.right)/2,0,o),I=r.clamp((this.top+h-this.bottom)/2,0,h);return new r.pointGeometry(w,I)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new hu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class $d{constructor(o,h,w,I,O){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=O===void 0||!!O,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=w??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hu,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new $d(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o._elevation=this._elevation,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const h=-r.wrap(o,-180,180)*Math.PI/180;var w;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(w=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w),function(I,O,te){var ue=O[0],me=O[1],Se=O[2],ze=O[3],Ve=Math.sin(te),Ye=Math.cos(te);I[0]=ue*Ye+Se*Ve,I[1]=me*Ye+ze*Ve,I[2]=ue*-Ve+Se*Ye,I[3]=me*-Ve+ze*Ye}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const h=r.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,w){this._unmodified=!1,this._edgeInsets.interpolate(o,h,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){const h=[new r.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const w=this.pointCoordinate(new r.pointGeometry(0,0)),I=this.pointCoordinate(new r.pointGeometry(this.width,0)),O=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),te=this.pointCoordinate(new r.pointGeometry(0,this.height)),ue=Math.floor(Math.min(w.x,I.x,O.x,te.x)),me=Math.floor(Math.max(w.x,I.x,O.x,te.x)),Se=1;for(let ze=ue-Se;ze<=me+Se;ze++)ze!==0&&h.push(new r.UnwrappedTileID(ze,o))}return h}coveringTiles(o){var h,w;let I=this.coveringZoomLevel(o);const O=I;if(o.minzoom!==void 0&&I<o.minzoom)return[];o.maxzoom!==void 0&&I>o.maxzoom&&(I=o.maxzoom);const te=this.pointCoordinate(this.getCameraPoint()),ue=r.MercatorCoordinate.fromLngLat(this.center),me=Math.pow(2,I),Se=[me*te.x,me*te.y,0],ze=[me*ue.x,me*ue.y,0],Ve=Bd.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I);let Ye=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ye=I);const it=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,Je=at=>({aabb:new yl([at*me,0,0],[(at+1)*me,me,0]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),et=[],pt=[],yt=I,wt=o.reparseOverscaled?O:I;if(this._renderWorldCopies)for(let at=1;at<=3;at++)et.push(Je(-at)),et.push(Je(at));for(et.push(Je(0));et.length>0;){const at=et.pop(),Mt=at.x,St=at.y;let jt=at.fullyVisible;if(!jt){const ci=at.aabb.intersects(Ve);if(ci===0)continue;jt=ci===2}const Ot=o.terrain?Se:ze,Vt=at.aabb.distanceX(Ot),Nt=at.aabb.distanceY(Ot),oi=Math.max(Math.abs(Vt),Math.abs(Nt)),Xt=it+(1<<yt-at.zoom)-2;if(at.zoom===yt||oi>Xt&&at.zoom>=Ye){const ci=yt-at.zoom,Ji=Se[0]-.5-(Mt<<ci),dn=Se[1]-.5-(St<<ci);pt.push({tileID:new r.OverscaledTileID(at.zoom===yt?wt:at.zoom,at.wrap,at.zoom,Mt,St),distanceSq:r.sqrLen([ze[0]-.5-Mt,ze[1]-.5-St]),tileDistanceToCamera:Math.sqrt(Ji*Ji+dn*dn)})}else for(let ci=0;ci<4;ci++){const Ji=(Mt<<1)+ci%2,dn=(St<<1)+(ci>>1),Ii=at.zoom+1;let Un=at.aabb.quadrant(ci);if(o.terrain){const Vn=new r.OverscaledTileID(Ii,at.wrap,Ii,Ji,dn),Cn=o.terrain.getMinMaxElevation(Vn),Sn=(h=Cn.minElevation)!==null&&h!==void 0?h:this.elevation,An=(w=Cn.maxElevation)!==null&&w!==void 0?w:this.elevation;Un=new yl([Un.min[0],Un.min[1],Sn],[Un.max[0],Un.max[1],An])}et.push({aabb:Un,zoom:Ii,x:Ji,y:dn,wrap:at.wrap,fullyVisible:jt})}}return pt.sort((at,Mt)=>at.distanceSq-Mt.distanceSq).map(at=>at.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const h=r.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(o.lng)*this.worldSize,r.mercatorYfromLat(h)*this.worldSize)}unproject(o){return new r.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,h){const w=r.MercatorCoordinate.fromLngLat(o),I=(1<<this.tileZoom)*r.EXTENT,O=w.x*I,te=w.y*I,ue=Math.floor(O/r.EXTENT),me=Math.floor(te/r.EXTENT),Se=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,ue,me);return h.getElevation(Se,O%r.EXTENT,te%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const h=this.pointLocation(this.centerPoint,o),w=this.getElevation(h,o);if(!(this.elevation-w))return;const I=this.getCameraPosition(),O=r.MercatorCoordinate.fromLngLat(I.lngLat,I.altitude),te=r.MercatorCoordinate.fromLngLat(h,w),ue=O.x-te.x,me=O.y-te.y,Se=O.z-te.z,ze=Math.sqrt(ue*ue+me*me+Se*Se),Ve=this.scaleZoom(this.cameraToCenterDistance/ze/this.tileSize);this._elevation=w,this._center=h,this.zoom=Ve}setLocationAtPoint(o,h){const w=this.pointCoordinate(h),I=this.pointCoordinate(this.centerPoint),O=this.locationCoordinate(o),te=new r.MercatorCoordinate(O.x-(w.x-I.x),O.y-(w.y-I.y));this.center=this.coordinateLocation(te),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,h),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return r.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){const Ye=h.pointCoordinate(o);if(Ye!=null)return Ye}const w=[o.x,o.y,0,1],I=[o.x,o.y,1,1];r.transformMat4(w,w,this.pixelMatrixInverse),r.transformMat4(I,I,this.pixelMatrixInverse);const O=w[3],te=I[3],ue=w[1]/O,me=I[1]/te,Se=w[2]/O,ze=I[2]/te,Ve=Se===ze?0:(0-Se)/(ze-Se);return new r.MercatorCoordinate(r.number(w[0]/O,I[0]/te,Ve)/this.worldSize,r.number(ue,me,Ve)/this.worldSize)}coordinatePoint(o,h=0,w=this.pixelMatrix){const I=[o.x*this.worldSize,o.y*this.worldSize,h,1];return r.transformMat4(I,I,w),new r.pointGeometry(I[0]/I[3],I[1]/I[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,o))).extend(this.pointLocation(new r.pointGeometry(this.width,o))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,h=!1){const w=o.key,I=h?this._alignedPosMatrixCache:this._posMatrixCache;if(I[w])return I[w];const O=o.canonical,te=this.worldSize/this.zoomScale(O.z),ue=O.x+Math.pow(2,O.z)*o.wrap,me=r.identity(new Float64Array(16));return r.translate(me,me,[ue*te,O.y*te,0]),r.scale(me,me,[te/r.EXTENT,te/r.EXTENT,1]),r.multiply(me,h?this.alignedProjMatrix:this.projMatrix,me),I[w]=new Float32Array(me),I[w]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,h,w,I,O=-90,te=90,ue=-180,me=180;const Se=this.size,ze=this._unmodified;if(this.latRange){const it=this.latRange;O=r.mercatorYfromLat(it[1])*this.worldSize,te=r.mercatorYfromLat(it[0])*this.worldSize,o=te-O<Se.y?Se.y/(te-O):0}if(this.lngRange){const it=this.lngRange;ue=r.wrap(r.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),me=r.wrap(r.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),me<ue&&(me+=this.worldSize),h=me-ue<Se.x?Se.x/(me-ue):0}const Ve=this.point,Ye=Math.max(h||0,o||0);if(Ye)return this.center=this.unproject(new r.pointGeometry(h?(me+ue)/2:Ve.x,o?(te+O)/2:Ve.y)),this.zoom+=this.scaleZoom(Ye),this._unmodified=ze,void(this._constraining=!1);if(this.latRange){const it=Ve.y,Je=Se.y/2;it-Je<O&&(I=O+Je),it+Je>te&&(I=te-Je)}if(this.lngRange){const it=(ue+me)/2,Je=r.wrap(Ve.x,it-this.worldSize/2,it+this.worldSize/2),et=Se.x/2;Je-et<ue&&(w=ue+et),Je+et>me&&(w=me-et)}w===void 0&&I===void 0||(this.center=this.unproject(new r.pointGeometry(w!==void 0?w:Ve.x,I!==void 0?I:Ve.y)).wrap()),this._unmodified=ze,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,h=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let I=r.identity(new Float64Array(16));r.scale(I,I,[this.width/2,-this.height/2,1]),r.translate(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=r.identity(new Float64Array(16)),r.scale(I,I,[1,-1,1]),r.translate(I,I,[-1,-1,0]),r.scale(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const O=Math.PI/2+this._pitch,te=this._fov*(.5+o.y/this.height),ue=Math.sin(te)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-O-te,.01,Math.PI-.01)),me=this.getHorizon(),Se=2*Math.atan(me/this.cameraToCenterDistance)*(.5+o.y/(2*me)),ze=Math.sin(Se)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-O-Se,.01,Math.PI-.01)),Ve=Math.cos(Math.PI/2-this._pitch)*ue+this.cameraToSeaLevelDistance,Ye=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToSeaLevelDistance,it=1.01*Math.min(Ve,Ye),Je=this.height/50;I=new Float64Array(16),r.perspective(I,this._fov,this.width/this.height,Je,it),I[8]=2*-o.x/this.width,I[9]=2*o.y/this.height,r.scale(I,I,[1,-1,1]),r.translate(I,I,[0,0,-this.cameraToCenterDistance]),r.rotateX(I,I,this._pitch),r.rotateZ(I,I,this.angle),r.translate(I,I,[-h,-w,0]),this.mercatorMatrix=r.scale([],I,[this.worldSize,this.worldSize,this.worldSize]),r.scale(I,I,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,I),r.translate(I,I,[0,0,-this.elevation]),this.projMatrix=I,this.invProjMatrix=r.invert([],I),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,I);const et=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),wt=Math.sin(this.angle),at=h-Math.round(h)+yt*et+wt*pt,Mt=w-Math.round(w)+yt*pt+wt*et,St=new Float64Array(I);if(r.translate(St,St,[at>.5?at-1:at,Mt>.5?Mt-1:Mt,0]),this.alignedProjMatrix=St,I=r.invert(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");this.pixelMatrixInverse=I,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new r.pointGeometry(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return r.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,o))}getCameraQueryGeometry(o){const h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let w=h.x,I=h.y,O=h.x,te=h.y;for(const ue of o)w=Math.min(w,ue.x),I=Math.min(I,ue.y),O=Math.max(O,ue.x),te=Math.max(te,ue.y);return[new r.pointGeometry(w,I),new r.pointGeometry(O,I),new r.pointGeometry(O,te),new r.pointGeometry(w,te),new r.pointGeometry(w,I)]}}}class ig{constructor(o){this._hashName=o&&encodeURIComponent(o),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(h,w){let I=!1,O=null;const te=()=>{O=null,I&&(h(),O=setTimeout(te,300),I=!1)};return()=>(I=!0,O||te(),O)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const h=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,I=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,I),te=Math.round(h.lng*O)/O,ue=Math.round(h.lat*O)/O,me=this._map.getBearing(),Se=this._map.getPitch();let ze="";if(ze+=o?`/${te}/${ue}/${w}`:`${w}/${ue}/${te}`,(me||Se)&&(ze+="/"+Math.round(10*me)/10),Se&&(ze+=`/${Math.round(Se)}`),this._hashName){const Ve=this._hashName;let Ye=!1;const it=window.location.hash.slice(1).split("&").map(Je=>{const et=Je.split("=")[0];return et===Ve?(Ye=!0,`${et}=${ze}`):Je}).filter(Je=>Je);return Ye||it.push(`${Ve}=${ze}`),`#${it.join("&")}`}return`#${ze}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(h=w)}),(h&&h[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const pu={linearity:.3,easing:r.bezier(0,0,.3,1)},ng=r.extend({deceleration:2500,maxSpeed:1400},pu),rg=r.extend({deceleration:20,maxSpeed:1400},pu),rc=r.extend({deceleration:1e3,maxSpeed:360},pu),sg=r.extend({deceleration:1e3,maxSpeed:90},pu);class ag{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,h=r.exported.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:O}of this._inertiaBuffer)h.zoom+=O.zoomDelta||0,h.bearing+=O.bearingDelta||0,h.pitch+=O.pitchDelta||0,O.panDelta&&h.pan._add(O.panDelta),O.around&&(h.around=O.around),O.pinchAround&&(h.pinchAround=O.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,I={};if(h.pan.mag()){const O=mu(h.pan.mag(),w,r.extend({},ng,o||{}));I.offset=h.pan.mult(O.amount/h.pan.mag()),I.center=this._map.transform.center,fu(I,O)}if(h.zoom){const O=mu(h.zoom,w,rg);I.zoom=this._map.transform.zoom+O.amount,fu(I,O)}if(h.bearing){const O=mu(h.bearing,w,rc);I.bearing=this._map.transform.bearing+r.clamp(O.amount,-179,179),fu(I,O)}if(h.pitch){const O=mu(h.pitch,w,sg);I.pitch=this._map.transform.pitch+O.amount,fu(I,O)}if(I.zoom||I.bearing){const O=h.pinchAround===void 0?h.around:h.pinchAround;I.around=O?this._map.unproject(O):this._map.getCenter()}return this.clear(),r.extend(I,{noMoveStart:!0})}}function fu(M,o){(!M.duration||M.duration<o.duration)&&(M.duration=o.duration,M.easing=o.easing)}function mu(M,o,h){const{maxSpeed:w,linearity:I,deceleration:O}=h,te=r.clamp(M*I/(o/1e3),-w,w),ue=Math.abs(te)/(O*I);return{easing:h.easing,duration:1e3*ue,amount:te*(ue/2)}}class sa extends r.Event{constructor(o,h,w,I={}){const O=y.mousePos(h.getCanvasContainer(),w),te=h.unproject(O);super(o,r.extend({point:O,lngLat:te,originalEvent:w},I)),this._defaultPrevented=!1,this.target=h}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class _s extends r.Event{constructor(o,h,w){const I=o==="touchend"?w.changedTouches:w.touches,O=y.touchPos(h.getCanvasContainer(),I),te=O.map(me=>h.unproject(me)),ue=O.reduce((me,Se,ze,Ve)=>me.add(Se.div(Ve.length)),new r.pointGeometry(0,0));super(o,{points:O,point:ue,lngLats:te,lngLat:h.unproject(ue),originalEvent:w}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class h0 extends r.Event{constructor(o,h,w){super(o,{originalEvent:w}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class $o{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new h0(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new sa(o.type,this._map,o))}mouseup(o){this._map.fire(new sa(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new sa(o.type,this._map,o))}dblclick(o){return this._firePreventable(new sa(o.type,this._map,o))}mouseover(o){this._map.fire(new sa(o.type,this._map,o))}mouseout(o){this._map.fire(new sa(o.type,this._map,o))}touchstart(o){return this._firePreventable(new _s(o.type,this._map,o))}touchmove(o){this._map.fire(new _s(o.type,this._map,o))}touchend(o){this._map.fire(new _s(o.type,this._map,o))}touchcancel(o){this._map.fire(new _s(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class og{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new sa(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new sa(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xl{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(y.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;const w=h;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const I=this._startPos;this._lastPos=w,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const O=Math.min(I.x,w.x),te=Math.max(I.x,w.x),ue=Math.min(I.y,w.y),me=Math.max(I.y,w.y);y.setTransform(this._box,`translate(${O}px,${ue}px)`),this._box.style.width=te-O+"px",this._box.style.height=me-ue+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;const w=this._startPos,I=h;if(this.reset(),y.suppressClick(),w.x!==I.x||w.y!==I.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:O=>O.fitScreenCoordinates(w,I,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new r.Event(o,{originalEvent:h}))}}function vl(M,o){if(M.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${M.length}, points ${o.length}`);const h={};for(let w=0;w<M.length;w++)h[M[w].identifier]=o[w];return h}class p0{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),w.length===this.numTouches&&(this.centroid=function(I){const O=new r.pointGeometry(0,0);for(const te of I)O._add(te);return O.div(I.length)}(h),this.touches=vl(w,h)))}touchmove(o,h,w){if(this.aborted||!this.centroid)return;const I=vl(w,h);for(const O in this.touches){const te=this.touches[O],ue=I[O];(!ue||ue.dist(te)>30)&&(this.aborted=!0)}}touchend(o,h,w){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const I=!this.aborted&&this.centroid;if(this.reset(),I)return I}}}class Ip{constructor(o){this.singleTap=new p0(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,w){this.singleTap.touchstart(o,h,w)}touchmove(o,h,w){this.singleTap.touchmove(o,h,w)}touchend(o,h,w){const I=this.singleTap.touchend(o,h,w);if(I){const O=o.timeStamp-this.lastTime<500,te=!this.lastTap||this.lastTap.dist(I)<30;if(O&&te||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}}}class f0{constructor(){this._zoomIn=new Ip({numTouches:1,numTaps:2}),this._zoomOut=new Ip({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,w){this._zoomIn.touchstart(o,h,w),this._zoomOut.touchstart(o,h,w)}touchmove(o,h,w){this._zoomIn.touchmove(o,h,w),this._zoomOut.touchmove(o,h,w)}touchend(o,h,w){const I=this._zoomIn.touchend(o,h,w),O=this._zoomOut.touchend(o,h,w);return I?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()+1,around:te.unproject(I)},{originalEvent:o})}):O?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()-1,around:te.unproject(O)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const lg={0:1,2:2};class bl{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(o,h){return!1}_move(o,h){return{}}mousedown(o,h){if(this._lastPoint)return;const w=y.mouseButton(o);this._correctButton(o,w)&&(this._lastPoint=h,this._eventButton=w)}mousemoveWindow(o,h){const w=this._lastPoint;if(w){if(o.preventDefault(),function(I,O){const te=lg[O];return I.buttons===void 0||(I.buttons&te)!==te}(o,this._eventButton))this.reset();else if(this._moved||!(h.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(w,h)}}mouseupWindow(o){this._lastPoint&&y.mouseButton(o)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uo extends bl{mousedown(o,h){super.mousedown(o,h),this._lastPoint&&(this._active=!0)}_correctButton(o,h){return h===0&&!o.ctrlKey}_move(o,h){return{around:h,panDelta:h.sub(o)}}}class mi extends bl{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const w=.8*(h.x-o.x);if(w)return this._active=!0,{bearingDelta:w}}contextmenu(o){o.preventDefault()}}class Dp extends bl{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const w=-.5*(h.y-o.y);if(w)return this._active=!0,{pitchDelta:w}}contextmenu(o){o.preventDefault()}}class gu{constructor(o,h){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,h,w){return this._calculateTransform(o,h,w)}touchmove(o,h,w){if(this._map._cooperativeGestures&&(this._minTouches===2&&w.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,w.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(w.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,h,w)}touchend(o,h,w){this._calculateTransform(o,h,w),this._active&&w.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,w){w.length>0&&(this._active=!0);const I=vl(w,h),O=new r.pointGeometry(0,0),te=new r.pointGeometry(0,0);let ue=0;for(const Se in I){const ze=I[Se],Ve=this._touches[Se];Ve&&(O._add(ze),te._add(ze.sub(Ve)),ue++,I[Se]=ze)}if(this._touches=I,ue<this._minTouches||!te.mag())return;const me=te.div(ue);return this._sum._add(me),this._sum.mag()<this._clickTolerance?void 0:{around:O.div(ue),panDelta:me}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _l{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,h,w){return{}}touchstart(o,h,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,w){if(!this._firstTwoTouches)return;o.preventDefault();const[I,O]=this._firstTwoTouches,te=yu(w,h,I),ue=yu(w,h,O);if(!te||!ue)return;const me=this._aroundCenter?null:te.add(ue).div(2);return this._move([te,ue],me,o)}touchend(o,h,w){if(!this._firstTwoTouches)return;const[I,O]=this._firstTwoTouches,te=yu(w,h,I),ue=yu(w,h,O);te&&ue||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function yu(M,o,h){for(let w=0;w<M.length;w++)if(M[w].identifier===h)return o[w]}function ti(M,o){return Math.log(M/o)/Math.LN2}class Rp extends _l{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){const w=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ti(this._distance,w),pinchAround:h}}}function cg(M,o){return 180*M.angleWith(o)/Math.PI}class m0 extends _l{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h){const w=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:cg(this._vector,w),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const h=25/(Math.PI*this._minDiameter)*360,w=cg(o,this._startVector);return Math.abs(w)<h}}function xu(M){return Math.abs(M.y)>Math.abs(M.x)}class ug extends _l{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,w){super.touchstart(o,h,w),this._currentTouchCount=w.length}_start(o){this._lastPoints=o,xu(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,w){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const I=o[0].sub(this._lastPoints[0]),O=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(I,O,w.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(I.y+O.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,w){if(this._valid!==void 0)return this._valid;const I=o.mag()>=2,O=h.mag()>=2;if(!I&&!O)return;if(!I||!O)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const te=o.y>0==h.y>0;return xu(o)&&xu(h)&&te}}const dg={panStep:100,bearingStep:15,pitchStep:10};class g0{constructor(){const o=dg;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,w=0,I=0,O=0,te=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?w=-1:(o.preventDefault(),O=-1);break;case 39:o.shiftKey?w=1:(o.preventDefault(),O=1);break;case 38:o.shiftKey?I=1:(o.preventDefault(),te=-1);break;case 40:o.shiftKey?I=-1:(o.preventDefault(),te=1);break;default:return}return this._rotationDisabled&&(w=0,I=0),{cameraAnimation:ue=>{const me=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:y0,zoom:h?Math.round(me)+h*(o.shiftKey?2:1):me,bearing:ue.getBearing()+w*this._bearingStep,pitch:ue.getPitch()+I*this._pitchStep,offset:[-O*this._panStep,-te*this._panStep],center:ue.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function y0(M){return M*(2-M)}const Ud=4.000244140625;class Lp{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;o.preventDefault()}let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const w=r.exported.now(),I=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,h!==0&&h%Ud==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(I*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=y.mousePos(this._el,o);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;if(this._delta!==0){const ue=this._type==="wheel"&&Math.abs(this._delta)>Ud?this._wheelZoomRate:this._defaultZoomRate;let me=2/(1+Math.exp(-Math.abs(this._delta*ue)));this._delta<0&&me!==0&&(me=1/me);const Se=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(Se*me))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,w=this._startZoom,I=this._easing;let O,te=!1;if(this._type==="wheel"&&w&&I){const ue=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),me=I(ue);O=r.number(w,h,me),ue<1?this._frameId||(this._frameId=!0):te=!0}else O=h,te=!0;return this._active=!0,te&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!te,zoomDelta:O-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=r.ease;if(this._prevEase){const w=this._prevEase,I=(r.exported.now()-w.start)/w.duration,O=w.easing(I+.01)-w.easing(I),te=.27/Math.sqrt(O*O+1e-4)*.01,ue=Math.sqrt(.0729-te*te);h=r.bezier(te,ue,.25,1)}return this._prevEase={start:r.exported.now(),duration:o,easing:h},h}reset(){this._active=!1}}class Np{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zp{constructor(){this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:w.getZoom()+(o.shiftKey?-1:1),around:w.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hs{constructor(){this._tap=new Ip({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,h,w){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=h[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(o,h,w))}touchmove(o,h,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const I=h[0],O=I.y-this._swipePoint.y;return this._swipePoint=I,o.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(o,h,w)}touchend(o,h,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(o,h,w)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(o,h,w){this._el=o,this._mousePan=h,this._touchPan=w}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hg{constructor(o,h,w){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jp{constructor(o,h,w,I){this._el=o,this._touchZoom=h,this._touchRotate=w,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const sc=M=>M.zoom||M.drag||M.pitch||M.rotate;class Op extends r.Event{}function Vd(M){return M.panDelta&&M.panDelta.mag()||M.zoomDelta||M.bearingDelta||M.pitchDelta}class Aa{constructor(o,h){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ag(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),r.bindAll(["handleEvent","handleWindowEvent"],this);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[I,O,te]of this._listeners)y.addEventListener(I,O,I===document?this.handleWindowEvent:this.handleEvent,te)}destroy(){for(const[o,h,w]of this._listeners)y.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(o){const h=this._map,w=h.getCanvasContainer();this._add("mapEvent",new $o(h,o));const I=h.boxZoom=new xl(h,o);this._add("boxZoom",I);const O=new f0,te=new zp;h.doubleClickZoom=new Np(te,O),this._add("tapZoom",O),this._add("clickZoom",te);const ue=new Hs;this._add("tapDragZoom",ue);const me=h.touchPitch=new ug(h);this._add("touchPitch",me);const Se=new mi(o),ze=new Dp(o);h.dragRotate=new hg(o,Se,ze),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",ze,["mouseRotate"]);const Ve=new Uo(o),Ye=new gu(o,h);h.dragPan=new Vo(w,Ve,Ye),this._add("mousePan",Ve),this._add("touchPan",Ye,["touchZoom","touchRotate"]);const it=new m0,Je=new Rp;h.touchZoomRotate=new jp(w,Je,it,ue),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",Je,["touchPan","touchRotate"]);const et=h.scrollZoom=new Lp(h,this);this._add("scrollZoom",et,["mousePan"]);const pt=h.keyboard=new g0;this._add("keyboard",pt),this._add("blockableMapEvent",new og(h));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[yt]&&h[yt].enable(o[yt])}_add(o,h,w){this._handlers.push({handlerName:o,handler:h,allowed:w}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!sc(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,w){for(const I in o)if(I!==w&&(!h||h.indexOf(I)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const h=[];for(const w of o)this._el.contains(w.target)&&h.push(w);return h}handleEvent(o,h){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=o.type==="renderFrame"?void 0:o,I={needsRenderFrame:!1},O={},te={},ue=o.touches,me=ue?this._getMapTouches(ue):void 0,Se=me?y.touchPos(this._el,me):y.mousePos(this._el,o);for(const{handlerName:Ye,handler:it,allowed:Je}of this._handlers){if(!it.isEnabled())continue;let et;this._blockedByActive(te,Je,Ye)?it.reset():it[h||o.type]&&(et=it[h||o.type](o,Se,me),this.mergeHandlerResult(I,O,et,Ye,w),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||it.isActive())&&(te[Ye]=it)}const ze={};for(const Ye in this._previousActiveHandlers)te[Ye]||(ze[Ye]=w);this._previousActiveHandlers=te,(Object.keys(ze).length||Vd(I))&&(this._changes.push([I,O,ze]),this._triggerRenderFrame()),(Object.keys(te).length||Vd(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ve}=I;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))}mergeHandlerResult(o,h,w,I,O){if(!w)return;r.extend(o,w);const te={handlerName:I,originalEvent:w.originalEvent||O};w.zoomDelta!==void 0&&(h.zoom=te),w.panDelta!==void 0&&(h.drag=te),w.pitchDelta!==void 0&&(h.pitch=te),w.bearingDelta!==void 0&&(h.rotate=te)}_applyChanges(){const o={},h={},w={};for(const[I,O,te]of this._changes)I.panDelta&&(o.panDelta=(o.panDelta||new r.pointGeometry(0,0))._add(I.panDelta)),I.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+I.zoomDelta),I.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+I.bearingDelta),I.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+I.pitchDelta),I.around!==void 0&&(o.around=I.around),I.pinchAround!==void 0&&(o.pinchAround=I.pinchAround),I.noInertia&&(o.noInertia=I.noInertia),r.extend(h,O),r.extend(w,te);this._updateMapTransform(o,h,w),this._changes=[]}_updateMapTransform(o,h,w){const I=this._map,O=I.transform,te=I.style&&I.style.terrain;if(!(Vd(o)||te&&this._drag))return this._fireEvents(h,w,!0);let{panDelta:ue,zoomDelta:me,bearingDelta:Se,pitchDelta:ze,around:Ve,pinchAround:Ye}=o;Ye!==void 0&&(Ve=Ye),I._stop(!0),Ve=Ve||I.transform.centerPoint;const it=O.pointLocation(ue?Ve.sub(ue):Ve);Se&&(O.bearing+=Se),ze&&(O.pitch+=ze),me&&(O.zoom+=me),te?h.drag&&!this._drag?(this._drag={center:O.centerPoint,lngLat:O.pointLocation(Ve),point:Ve,handlerName:h.drag.handlerName},I.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&w[this._drag.handlerName]?(I.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):h.drag&&this._drag&&(O.center=O.pointLocation(O.centerPoint.sub(ue))):O.setLocationAtPoint(it,Ve),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,w,!0)}_fireEvents(o,h,w){const I=sc(this._eventsInProgress),O=sc(o),te={};for(const ze in o){const{originalEvent:Ve}=o[ze];this._eventsInProgress[ze]||(te[`${ze}start`]=Ve),this._eventsInProgress[ze]=o[ze]}!I&&O&&this._fireEvent("movestart",O.originalEvent);for(const ze in te)this._fireEvent(ze,te[ze]);O&&this._fireEvent("move",O.originalEvent);for(const ze in o){const{originalEvent:Ve}=o[ze];this._fireEvent(ze,Ve)}const ue={};let me;for(const ze in this._eventsInProgress){const{handlerName:Ve,originalEvent:Ye}=this._eventsInProgress[ze];this._handlersById[Ve].isActive()||(delete this._eventsInProgress[ze],me=h[Ve]||Ye,ue[`${ze}end`]=me)}for(const ze in ue)this._fireEvent(ze,ue[ze]);const Se=sc(this._eventsInProgress);if(w&&(I||O)&&!Se){this._updatingCamera=!0;const ze=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ve=Ye=>Ye!==0&&-this._bearingSnap<Ye&&Ye<this._bearingSnap;ze?(Ve(ze.bearing||this._map.getBearing())&&(ze.bearing=0),this._map.easeTo(ze,{originalEvent:me})):(this._map.fire(new r.Event("moveend",{originalEvent:me})),Ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new r.Event(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new Op("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const cr={extend:(M,...o)=>r.extend(M,...o),run(M){M()},logToElement(M,o=!1,h="log"){const w=window.document.getElementById(h);w&&(o&&(w.innerHTML=""),w.innerHTML+=`<br>${M}`)}};class Gd extends r.Evented{constructor(o,h){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,w){return o=r.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,r.extend({offset:o},h),w)}panTo(o,h,w){return this.easeTo(r.extend({center:o},h),w)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,w){return this.easeTo(r.extend({zoom:o},h),w)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,w){return this.easeTo(r.extend({bearing:o},h),w)}resetNorth(o,h){return this.rotateTo(0,r.extend({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=r.LngLatBounds.convert(o);const w=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),w,h)}_cameraForBoxAndBearing(o,h,w,I){const O={top:0,bottom:0,right:0,left:0};if(typeof(I=r.extend({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},I)).padding=="number"){const St=I.padding;I.padding={top:St,bottom:St,right:St,left:St}}I.padding=r.extend(O,I.padding);const te=this.transform,ue=te.padding,me=te.project(r.LngLat.convert(o)),Se=te.project(r.LngLat.convert(h)),ze=me.rotate(-w*Math.PI/180),Ve=Se.rotate(-w*Math.PI/180),Ye=new r.pointGeometry(Math.max(ze.x,Ve.x),Math.max(ze.y,Ve.y)),it=new r.pointGeometry(Math.min(ze.x,Ve.x),Math.min(ze.y,Ve.y)),Je=Ye.sub(it),et=(te.width-(ue.left+ue.right+I.padding.left+I.padding.right))/Je.x,pt=(te.height-(ue.top+ue.bottom+I.padding.top+I.padding.bottom))/Je.y;if(pt<0||et<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(te.scaleZoom(te.scale*Math.min(et,pt)),I.maxZoom),wt=r.pointGeometry.convert(I.offset),at=new r.pointGeometry((I.padding.left-I.padding.right)/2,(I.padding.top-I.padding.bottom)/2).rotate(w*Math.PI/180),Mt=wt.add(at).mult(te.scale/te.zoomScale(yt));return{center:te.unproject(me.add(Se).div(2).sub(Mt)),zoom:yt,bearing:w}}fitBounds(o,h,w){return this._fitInternal(this.cameraForBounds(o,h),h,w)}fitScreenCoordinates(o,h,w,I,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(o)),this.transform.pointLocation(r.pointGeometry.convert(h)),w,I),I,O)}_fitInternal(o,h,w){return o?(delete(h=r.extend(o,h)).padding,h.linear?this.easeTo(h,w):this.flyTo(h,w)):this}jumpTo(o,h){this.stop();const w=this.transform;let I=!1,O=!1,te=!1;return"zoom"in o&&w.zoom!==+o.zoom&&(I=!0,w.zoom=+o.zoom),o.center!==void 0&&(w.center=r.LngLat.convert(o.center)),"bearing"in o&&w.bearing!==+o.bearing&&(O=!0,w.bearing=+o.bearing),"pitch"in o&&w.pitch!==+o.pitch&&(te=!0,w.pitch=+o.pitch),o.padding==null||w.isPaddingEqual(o.padding)||(w.padding=o.padding),this.fire(new r.Event("movestart",h)).fire(new r.Event("move",h)),I&&this.fire(new r.Event("zoomstart",h)).fire(new r.Event("zoom",h)).fire(new r.Event("zoomend",h)),O&&this.fire(new r.Event("rotatestart",h)).fire(new r.Event("rotate",h)).fire(new r.Event("rotateend",h)),te&&this.fire(new r.Event("pitchstart",h)).fire(new r.Event("pitch",h)).fire(new r.Event("pitchend",h)),this.fire(new r.Event("moveend",h))}calculateCameraOptionsFromTo(o,h,w,I=0){const O=r.MercatorCoordinate.fromLngLat(o,h),te=r.MercatorCoordinate.fromLngLat(w,I),ue=te.x-O.x,me=te.y-O.y,Se=te.z-O.z,ze=Math.hypot(ue,me,Se);if(ze===0)throw new Error("Can't calculate camera options with same From and To");const Ve=Math.hypot(ue,me),Ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ze/this.transform.tileSize),it=180*Math.atan2(ue,-me)/Math.PI;let Je=180*Math.acos(Ve/ze)/Math.PI;return Je=Se<0?90-Je:90+Je,{center:te.toLngLat(),zoom:Ye,pitch:Je,bearing:it}}easeTo(o,h){this._stop(!1,o.easeId),((o=r.extend({offset:[0,0],duration:500,easing:r.ease},o)).animate===!1||!o.essential&&r.exported.prefersReducedMotion)&&(o.duration=0);const w=this.transform,I=this.getZoom(),O=this.getBearing(),te=this.getPitch(),ue=this.getPadding(),me="zoom"in o?+o.zoom:I,Se="bearing"in o?this._normalizeBearing(o.bearing,O):O,ze="pitch"in o?+o.pitch:te,Ve="padding"in o?o.padding:w.padding,Ye=r.pointGeometry.convert(o.offset);let it=w.centerPoint.add(Ye);const Je=w.pointLocation(it),et=r.LngLat.convert(o.center||Je);this._normalizeCenter(et);const pt=w.project(Je),yt=w.project(et).sub(pt),wt=w.zoomScale(me-I);let at,Mt;o.around&&(at=r.LngLat.convert(o.around),Mt=w.locationPoint(at));const St={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||me!==I,this._rotating=this._rotating||O!==Se,this._pitching=this._pitching||ze!==te,this._padding=!w.isPaddingEqual(Ve),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,St),this._ease(jt=>{if(this._zooming&&(w.zoom=r.number(I,me,jt)),this._rotating&&(w.bearing=r.number(O,Se,jt)),this._pitching&&(w.pitch=r.number(te,ze,jt)),this._padding&&(w.interpolatePadding(ue,Ve,jt),it=w.centerPoint.add(Ye)),at)w.setLocationAtPoint(at,Mt);else{const Ot=w.zoomScale(w.zoom-I),Vt=me>I?Math.min(2,wt):Math.max(.5,wt),Nt=Math.pow(Vt,1-jt),oi=w.unproject(pt.add(yt.mult(jt*Nt)).mult(Ot));w.setLocationAtPoint(w.renderWorldCopies?oi.wrap():oi,it)}this._fireMoveEvents(h)},jt=>{this._afterEase(h,jt)},o),this}_prepareEase(o,h,w={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),h||w.moving||this.fire(new r.Event("movestart",o)),this._zooming&&!w.zooming&&this.fire(new r.Event("zoomstart",o)),this._rotating&&!w.rotating&&this.fire(new r.Event("rotatestart",o)),this._pitching&&!w.pitching&&this.fire(new r.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new r.Event("move",o)),this._zooming&&this.fire(new r.Event("zoom",o)),this._rotating&&this.fire(new r.Event("rotate",o)),this._pitching&&this.fire(new r.Event("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const w=this._zooming,I=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new r.Event("zoomend",o)),I&&this.fire(new r.Event("rotateend",o)),O&&this.fire(new r.Event("pitchend",o)),this.fire(new r.Event("moveend",o))}flyTo(o,h){if(!o.essential&&r.exported.prefersReducedMotion){const Ii=r.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ii,h)}this.stop(),o=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},o);const w=this.transform,I=this.getZoom(),O=this.getBearing(),te=this.getPitch(),ue=this.getPadding(),me="zoom"in o?r.clamp(+o.zoom,w.minZoom,w.maxZoom):I,Se="bearing"in o?this._normalizeBearing(o.bearing,O):O,ze="pitch"in o?+o.pitch:te,Ve="padding"in o?o.padding:w.padding,Ye=w.zoomScale(me-I),it=r.pointGeometry.convert(o.offset);let Je=w.centerPoint.add(it);const et=w.pointLocation(Je),pt=r.LngLat.convert(o.center||et);this._normalizeCenter(pt);const yt=w.project(et),wt=w.project(pt).sub(yt);let at=o.curve;const Mt=Math.max(w.width,w.height),St=Mt/Ye,jt=wt.mag();if("minZoom"in o){const Ii=r.clamp(Math.min(o.minZoom,I,me),w.minZoom,w.maxZoom),Un=Mt/w.zoomScale(Ii-I);at=Math.sqrt(Un/jt*2)}const Ot=at*at;function Vt(Ii){const Un=(St*St-Mt*Mt+(Ii?-1:1)*Ot*Ot*jt*jt)/(2*(Ii?St:Mt)*Ot*jt);return Math.log(Math.sqrt(Un*Un+1)-Un)}function Nt(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function oi(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}const Xt=Vt(0);let ci=function(Ii){return oi(Xt)/oi(Xt+at*Ii)},Ji=function(Ii){return Mt*((oi(Xt)*(Nt(Un=Xt+at*Ii)/oi(Un))-Nt(Xt))/Ot)/jt;var Un},dn=(Vt(1)-Xt)/at;if(Math.abs(jt)<1e-6||!isFinite(dn)){if(Math.abs(Mt-St)<1e-6)return this.easeTo(o,h);const Ii=St<Mt?-1:1;dn=Math.abs(Math.log(St/Mt))/at,Ji=function(){return 0},ci=function(Un){return Math.exp(Ii*at*Un)}}return o.duration="duration"in o?+o.duration:1e3*dn/("screenSpeed"in o?+o.screenSpeed/at:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=O!==Se,this._pitching=ze!==te,this._padding=!w.isPaddingEqual(Ve),this._prepareEase(h,!1),this._ease(Ii=>{const Un=Ii*dn,Vn=1/ci(Un);w.zoom=Ii===1?me:I+w.scaleZoom(Vn),this._rotating&&(w.bearing=r.number(O,Se,Ii)),this._pitching&&(w.pitch=r.number(te,ze,Ii)),this._padding&&(w.interpolatePadding(ue,Ve,Ii),Je=w.centerPoint.add(it));const Cn=Ii===1?pt:w.unproject(yt.add(wt.mult(Ji(Un))).mult(Vn));w.setLocationAtPoint(w.renderWorldCopies?Cn.wrap():Cn,Je),this._fireMoveEvents(h)},()=>this._afterEase(h),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,h)}if(!o){const w=this.handlers;w&&w.stop(!1)}return this}_ease(o,h,w){w.animate===!1||w.duration===0?(o(1),h()):(this._easeStart=r.exported.now(),this._easeOptions=w,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,h){o=r.wrap(o,-180,180);const w=Math.abs(o-h);return Math.abs(o-360-h)<w&&(o-=360),Math.abs(o+360-h)<w&&(o+=360),o}_normalizeCenter(o){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const w=o.lng-h.center.lng;o.lng+=w>180?-360:w<-180?360:0}}class Hd{constructor(o={}){this.options=o,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){const w=this._map._getUIString(`AttributionControl.${h}`);o.title=w,o.setAttribute("aria-label",w)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(I=>typeof I!="string"?"":I)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}const h=this._map.style.sourceCaches;for(const I in h){const O=h[I];if(O.used||O.usedForTerrain){const te=O.getSource();te.attribution&&o.indexOf(te.attribution)<0&&o.push(te.attribution)}}o=o.filter(I=>String(I).trim()),o.sort((I,O)=>I.length-O.length),o=o.filter((I,O)=>{for(let te=O+1;te<o.length;te++)if(o[te].indexOf(I)>=0)return!1;return!0});const w=o.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,o.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Fp{constructor(o={}){this.options=o,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const h=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact","mapboxgl-compact"):h.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class pg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){const h=this._currentlyRunning,w=h?this._queue.concat(h):this._queue;for(const I of w)if(I.id===o)return void(I.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const w of h)if(!w.cancelled&&(w.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const fg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},x0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},so={showCompass:!0,showZoom:!0,visualizePitch:!1};class qd{constructor(o,h,w=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new mi({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,w&&(this.mousePitch=new Dp({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(h,"mousedown",this.mousedown),y.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(h,"touchmove",this.touchmove),y.addEventListener(h,"touchend",this.touchend),y.addEventListener(h,"touchcancel",this.reset)}down(o,h){this.mouseRotate.mousedown(o,h),this.mousePitch&&this.mousePitch.mousedown(o,h),y.disableDrag()}move(o,h){const w=this.map,I=this.mouseRotate.mousemoveWindow(o,h);if(I&&I.bearingDelta&&w.setBearing(w.getBearing()+I.bearingDelta),this.mousePitch){const O=this.mousePitch.mousemoveWindow(o,h);O&&O.pitchDelta&&w.setPitch(w.getPitch()+O.pitchDelta)}}off(){const o=this.element;y.removeEventListener(o,"mousedown",this.mousedown),y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(o,"touchmove",this.touchmove),y.removeEventListener(o,"touchend",this.touchend),y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(o){this.down(r.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),y.mousePos(this.element,o)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.move(o,y.mousePos(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ei(M,o,h){if(M=new r.LngLat(M.lng,M.lat),o){const w=new r.LngLat(M.lng-360,M.lat),I=new r.LngLat(M.lng+360,M.lat),O=h.locationPoint(M).distSqr(o);h.locationPoint(w).distSqr(o)<O?M=w:h.locationPoint(I).distSqr(o)<O&&(M=I)}for(;Math.abs(M.lng-h.center.lng)>180;){const w=h.locationPoint(M);if(w.x>=0&&w.y>=0&&w.x<=h.width&&w.y<=h.height)break;M.lng>h.center.lng?M.lng-=360:M.lng+=360}return M}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vu(M,o,h){const w=M.classList;for(const I in Di)w.remove(`maplibregl-${h}-anchor-${I}`,`mapboxgl-${h}-anchor-${I}`);w.add(`maplibregl-${h}-anchor-${o}`,`mapboxgl-${h}-anchor-${o}`)}class bu extends r.Evented{constructor(o,h){if(super(),(o instanceof HTMLElement||h)&&(o=r.extend({element:o},h)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=r.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const w=y.createNS("http://www.w3.org/2000/svg","svg"),I=41,O=27;w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height",`${I}px`),w.setAttributeNS(null,"width",`${O}px`),w.setAttributeNS(null,"viewBox",`0 0 ${O} ${I}`);const te=y.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");const ue=y.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"fill-rule","nonzero");const me=y.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(3.0, 29.0)"),me.setAttributeNS(null,"fill","#000000");const Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const wt of Se){const at=y.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",wt.rx),at.setAttributeNS(null,"ry",wt.ry),me.appendChild(at)}const ze=y.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"fill",this._color);const Ve=y.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ze.appendChild(Ve);const Ye=y.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"fill","#000000");const it=y.createNS("http://www.w3.org/2000/svg","path");it.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ye.appendChild(it);const Je=y.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Je.setAttributeNS(null,"fill","#FFFFFF");const et=y.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=y.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=y.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),et.appendChild(pt),et.appendChild(yt),ue.appendChild(me),ue.appendChild(ze),ue.appendChild(Ye),ue.appendChild(Je),ue.appendChild(et),w.appendChild(ue),w.setAttributeNS(null,"height",I*this._scale+"px"),w.setAttributeNS(null,"width",O*this._scale+"px"),this._element.appendChild(w),this._offset=r.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()}),vu(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=r.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const I=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(38.1-13.5+I)],"bottom-right":[-I,-1*(38.1-13.5+I)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const h=o.code,w=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&w!==32&&w!==13||this.togglePopup()}_onMapClick(o){const h=o.originalEvent.target,w=this._element;this._popup&&(h===w||w.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${h}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const I=this._map.unproject(this._pos),O=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=I.distanceTo(this._lngLat)>20*O?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=r.pointGeometry.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Bp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let qr,wl=0,qs=!1;const v0={maxWidth:100,unit:"metric"};function _u(M,o,h){const w=h&&h.maxWidth||100,I=M._container.clientHeight/2,O=M.unproject([0,I]),te=M.unproject([w,I]),ue=O.distanceTo(te);if(h&&h.unit==="imperial"){const me=3.2808*ue;me>5280?rr(o,w,me/5280,M._getUIString("ScaleControl.Miles")):rr(o,w,me,M._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?rr(o,w,ue/1852,M._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?rr(o,w,ue/1e3,M._getUIString("ScaleControl.Kilometers")):rr(o,w,ue,M._getUIString("ScaleControl.Meters"))}function rr(M,o,h,w){const I=function(O){const te=Math.pow(10,`${Math.floor(O)}`.length-1);let ue=O/te;return ue=ue>=10?10:ue>=5?5:ue>=3?3:ue>=2?2:ue>=1?1:function(me){const Se=Math.pow(10,Math.ceil(-Math.log(me)/Math.LN10));return Math.round(me*Se)/Se}(ue),te*ue}(h);M.style.width=o*(I/h)+"px",M.innerHTML=`${I}&nbsp;${w}`}const Fr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},mg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ac(M){if(M){if(typeof M=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(M,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,M),"top-left":new r.pointGeometry(o,o),"top-right":new r.pointGeometry(-o,o),bottom:new r.pointGeometry(0,-M),"bottom-left":new r.pointGeometry(o,-o),"bottom-right":new r.pointGeometry(-o,-o),left:new r.pointGeometry(M,0),right:new r.pointGeometry(-M,0)}}if(M instanceof r.pointGeometry||Array.isArray(M)){const o=r.pointGeometry.convert(M);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:r.pointGeometry.convert(M.center||[0,0]),top:r.pointGeometry.convert(M.top||[0,0]),"top-left":r.pointGeometry.convert(M["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(M["top-right"]||[0,0]),bottom:r.pointGeometry.convert(M.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(M["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(M["bottom-right"]||[0,0]),left:r.pointGeometry.convert(M.left||[0,0]),right:r.pointGeometry.convert(M.right||[0,0])}}return ac(new r.pointGeometry(0,0))}const wu={supported:p,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends Gd{constructor(M){var o;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(M=r.extend({},x0,M)).minZoom!=null&&M.maxZoom!=null&&M.minZoom>M.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(M.minPitch!=null&&M.maxPitch!=null&&M.minPitch>M.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(M.minPitch!=null&&M.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(M.maxPitch!=null&&M.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $d(M.minZoom,M.maxZoom,M.minPitch,M.maxPitch,M.renderWorldCopies),{bearingSnap:M.bearingSnap}),this._interactive=M.interactive,this._cooperativeGestures=M.cooperativeGestures,this._maxTileCacheSize=M.maxTileCacheSize,this._failIfMajorPerformanceCaveat=M.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=M.preserveDrawingBuffer,this._antialias=M.antialias,this._trackResize=M.trackResize,this._bearingSnap=M.bearingSnap,this._refreshExpiredTiles=M.refreshExpiredTiles,this._fadeDuration=M.fadeDuration,this._crossSourceCollisions=M.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=M.collectResourceTiming,this._renderTaskQueue=new pg,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},fg,M.locale),this._clickTolerance=M.clickTolerance,this._pixelRatio=(o=M.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this._requestManager=new _(M.transformRequest),typeof M.container=="string"){if(this._container=document.getElementById(M.container),!this._container)throw new Error(`Container '${M.container}' not found.`)}else{if(!(M.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=M.container}if(M.maxBounds&&this.setMaxBounds(M.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Aa(this,M),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=M.hash&&new ig(typeof M.hash=="string"&&M.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}),M.bounds&&(this.resize(),this.fitBounds(M.bounds,r.extend({},M.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=M.localIdeographFontFamily,M.style&&this.setStyle(M.style,{localIdeographFontFamily:M.localIdeographFontFamily}),M.attributionControl&&this.addControl(new Hd({customAttribution:M.customAttribution})),M.maplibreLogo&&this.addControl(new Fp,M.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new r.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new r.Event(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new r.Event("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(M,o){if(o===void 0&&(o=M.getDefaultPosition?M.getDefaultPosition():"top-right"),!M||!M.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=M.onAdd(this);this._controls.push(M);const w=this._controlPositions[o];return o.indexOf("bottom")!==-1?w.insertBefore(h,w.firstChild):w.appendChild(h),this}removeControl(M){if(!M||!M.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(M);return o>-1&&this._controls.splice(o,1),M.onRemove(this),this}hasControl(M){return this._controls.indexOf(M)>-1}calculateCameraOptionsFromTo(M,o,h,w){return w==null&&this.style.terrain&&(w=this.transform.getElevation(h,this.style.terrain)),super.calculateCameraOptionsFromTo(M,o,h,w)}resize(M){const o=this._containerDimensions(),h=o[0],w=o[1];this._resizeCanvas(h,w,this.getPixelRatio()),this.transform.resize(h,w),this.painter.resize(h,w,this.getPixelRatio());const I=!this._moving;return I&&(this.stop(),this.fire(new r.Event("movestart",M)).fire(new r.Event("move",M))),this.fire(new r.Event("resize",M)),I&&this.fire(new r.Event("moveend",M)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(M){const[o,h]=this._containerDimensions();this._pixelRatio=M,this._resizeCanvas(o,h,M),this.painter.resize(o,h,M)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(M){return this.transform.setMaxBounds(r.LngLatBounds.convert(M)),this._update()}setMinZoom(M){if((M=M??-2)>=-2&&M<=this.transform.maxZoom)return this.transform.minZoom=M,this._update(),this.getZoom()<M&&this.setZoom(M),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(M){if((M=M??22)>=this.transform.minZoom)return this.transform.maxZoom=M,this._update(),this.getZoom()>M&&this.setZoom(M),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(M){if((M=M??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(M>=0&&M<=this.transform.maxPitch)return this.transform.minPitch=M,this._update(),this.getPitch()<M&&this.setPitch(M),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(M){if((M=M??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(M>=this.transform.minPitch)return this.transform.maxPitch=M,this._update(),this.getPitch()>M&&this.setPitch(M),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(M){return this.transform.renderWorldCopies=M,this._update()}project(M){return this.transform.locationPoint(r.LngLat.convert(M),this.style&&this.style.terrain)}unproject(M){return this.transform.pointLocation(r.pointGeometry.convert(M),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(M,o,h){if(M==="mouseenter"||M==="mouseover"){let w=!1;return{layer:o,listener:h,delegates:{mousemove:O=>{const te=this.getLayer(o)?this.queryRenderedFeatures(O.point,{layers:[o]}):[];te.length?w||(w=!0,h.call(this,new sa(M,this,O.originalEvent,{features:te}))):w=!1},mouseout:()=>{w=!1}}}}if(M==="mouseleave"||M==="mouseout"){let w=!1;return{layer:o,listener:h,delegates:{mousemove:te=>{(this.getLayer(o)?this.queryRenderedFeatures(te.point,{layers:[o]}):[]).length?w=!0:w&&(w=!1,h.call(this,new sa(M,this,te.originalEvent)))},mouseout:te=>{w&&(w=!1,h.call(this,new sa(M,this,te.originalEvent)))}}}}{const w=I=>{const O=this.getLayer(o)?this.queryRenderedFeatures(I.point,{layers:[o]}):[];O.length&&(I.features=O,h.call(this,I),delete I.features)};return{layer:o,listener:h,delegates:{[M]:w}}}}on(M,o,h){if(h===void 0)return super.on(M,o);const w=this._createDelegatedListener(M,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[M]=this._delegatedListeners[M]||[],this._delegatedListeners[M].push(w);for(const I in w.delegates)this.on(I,w.delegates[I]);return this}once(M,o,h){if(h===void 0)return super.once(M,o);const w=this._createDelegatedListener(M,o,h);for(const I in w.delegates)this.once(I,w.delegates[I]);return this}off(M,o,h){return h===void 0?super.off(M,o):(this._delegatedListeners&&this._delegatedListeners[M]&&(w=>{const I=this._delegatedListeners[M];for(let O=0;O<I.length;O++){const te=I[O];if(te.layer===o&&te.listener===h){for(const ue in te.delegates)this.off(ue,te.delegates[ue]);return I.splice(O,1),this}}})(),this)}queryRenderedFeatures(M,o){if(!this.style)return[];let h;if(o!==void 0||M===void 0||M instanceof r.pointGeometry||Array.isArray(M)||(o=M,M=void 0),o=o||{},(M=M||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof M[0]=="number")h=[r.pointGeometry.convert(M)];else{const w=r.pointGeometry.convert(M[0]),I=r.pointGeometry.convert(M[1]);h=[w,new r.pointGeometry(I.x,w.y),I,new r.pointGeometry(w.x,I.y),w]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(M,o){return this.style.querySourceFeatures(M,o)}setStyle(M,o){return(o=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&M?(this._diffStyle(M,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(M,o))}setTransformRequest(M){return this._requestManager.setTransformRequest(M),this}_getUIString(M){const o=this._locale[M];if(o==null)throw new Error(`Missing UI string '${M}'`);return o}_updateStyle(M,o){return this.style&&(this.style.setEventedParent(null),this.style._remove()),M?(this.style=new Hr(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof M=="string"?this.style.loadURL(M):this.style.loadJSON(M),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(M,o){if(typeof M=="string"){const h=this._requestManager.transformRequest(M,r.ResourceType.Style);r.getJSON(h,(w,I)=>{w?this.fire(new r.ErrorEvent(w)):I&&this._updateDiff(I,o)})}else typeof M=="object"&&this._updateDiff(M,o)}_updateDiff(M,o){try{this.style.setState(M)&&this._update(!0)}catch(h){r.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(M,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(M,o){return this._lazyInitEmptyStyle(),this.style.addSource(M,o),this._update(!0)}isSourceLoaded(M){const o=this.style&&this.style.sourceCaches[M];if(o!==void 0)return o.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${M}'`)))}setTerrain(M){return this.style.setTerrain(M),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const M=this.style&&this.style.sourceCaches;for(const o in M){const h=M[o]._tiles;for(const w in h){const I=h[w];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0}addSourceType(M,o,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(M,o,h)}removeSource(M){return this.style.removeSource(M),this._update(!0)}getSource(M){return this.style.getSource(M)}addImage(M,o,{pixelRatio:h=1,sdf:w=!1,stretchX:I,stretchY:O,content:te}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||r.isImageBitmap(o)){const{width:ue,height:me,data:Se}=r.exported.getImageData(o);this.style.addImage(M,{data:new r.RGBAImage({width:ue,height:me},Se),pixelRatio:h,stretchX:I,stretchY:O,content:te,sdf:w,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ue,height:me,data:Se}=o,ze=o;this.style.addImage(M,{data:new r.RGBAImage({width:ue,height:me},new Uint8Array(Se)),pixelRatio:h,stretchX:I,stretchY:O,content:te,sdf:w,version:0,userImage:ze}),ze.onAdd&&ze.onAdd(this,M)}}}updateImage(M,o){const h=this.style.getImage(M);if(!h)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=o instanceof HTMLImageElement||r.isImageBitmap(o)?r.exported.getImageData(o):o,{width:I,height:O,data:te}=w;if(I===void 0||O===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(I!==h.data.width||O!==h.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ue=!(o instanceof HTMLImageElement||r.isImageBitmap(o));h.data.replace(te,ue),this.style.updateImage(M,h)}hasImage(M){return M?!!this.style.getImage(M):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(M){this.style.removeImage(M)}loadImage(M,o){r.getImage(this._requestManager.transformRequest(M,r.ResourceType.Image),o)}listImages(){return this.style.listImages()}addLayer(M,o){return this._lazyInitEmptyStyle(),this.style.addLayer(M,o),this._update(!0)}moveLayer(M,o){return this.style.moveLayer(M,o),this._update(!0)}removeLayer(M){return this.style.removeLayer(M),this._update(!0)}getLayer(M){return this.style.getLayer(M)}setLayerZoomRange(M,o,h){return this.style.setLayerZoomRange(M,o,h),this._update(!0)}setFilter(M,o,h={}){return this.style.setFilter(M,o,h),this._update(!0)}getFilter(M){return this.style.getFilter(M)}setPaintProperty(M,o,h,w={}){return this.style.setPaintProperty(M,o,h,w),this._update(!0)}getPaintProperty(M,o){return this.style.getPaintProperty(M,o)}setLayoutProperty(M,o,h,w={}){return this.style.setLayoutProperty(M,o,h,w),this._update(!0)}getLayoutProperty(M,o){return this.style.getLayoutProperty(M,o)}setLight(M,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(M,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(M,o){return this.style.setFeatureState(M,o),this._update()}removeFeatureState(M,o){return this.style.removeFeatureState(M,o),this._update()}getFeatureState(M){return this.style.getFeatureState(M)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let M=0,o=0;return this._container&&(M=this._container.clientWidth||400,o=this._container.clientHeight||300),[M,o]}_setupContainer(){const M=this._container;M.classList.add("maplibregl-map","mapboxgl-map");const o=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",M);this._interactive&&o.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions();this._resizeCanvas(h[0],h[1],this.getPixelRatio());const w=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",M),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(O=>{I[O]=y.create("div",`maplibregl-ctrl-${O} mapboxgl-ctrl-${O}`,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const M=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",M);let o="Control",h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",o="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${h}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",w=>{w.key===o&&(this._metaPress=!0)}),document.addEventListener("keyup",w=>{w.key===o&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",w=>{this._onCooperativeGesture(w,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(M,o,h){this._canvas.width=h*M,this._canvas.height=h*o,this._canvas.style.width=`${M}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const M=r.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",M)||this._canvas.getContext("experimental-webgl",M);o?(this.painter=new tg(o,this.transform),r.exported$1.testSupport(o)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(M){M.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:M}))}_contextRestored(M){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:M}))}_onMapScroll(M){if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(M,o,h){return!o&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(M){return this.style?(this._styleDirty=this._styleDirty||M,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(M){return this._update(),this._renderTaskQueue.add(M)}_cancelRenderFrame(M){this._renderTaskQueue.remove(M)}_render(M){let o,h=0;const w=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(o=w.createQueryEXT(),w.beginQueryEXT(w.TIME_ELAPSED_EXT,o),h=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(M),this._removed)return;let I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const te=this.transform.zoom,ue=r.exported.now();this.style.zoomHistory.update(te,ue);const me=new r.EvaluationParameters(te,{now:ue,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Se=me.crossFadingFactor();Se===1&&Se===this._crossFadingFactor||(I=!0,this._crossFadingFactor=Se),this.style.update(me)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const te=r.exported.now()-h;w.endQueryEXT(w.TIME_ELAPSED_EXT,o),setTimeout(()=>{const ue=w.getQueryObjectEXT(o,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(o),this.fire(new r.Event("gpu-timing-frame",{cpuTime:te,gpuTime:ue}))},50)}if(this.listens("gpu-timing-layer")){const te=this.painter.collectGpuTimers();setTimeout(()=>{const ue=this.painter.queryGpuTimers(te);this.fire(new r.Event("gpu-timing-layer",{layerTimes:ue}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const M=this.painter.context.gl.getExtension("WEBGL_lose_context");M&&M.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(M=>{r.PerformanceUtils.frame(M),this._frame=null,this._render(M)}))}_onWindowOnline(){this._update()}_onWindowResize(M){this._trackResize&&this.resize({originalEvent:M})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(M){this._showTileBoundaries!==M&&(this._showTileBoundaries=M,this._update())}get showPadding(){return!!this._showPadding}set showPadding(M){this._showPadding!==M&&(this._showPadding=M,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(M){this._showCollisionBoxes!==M&&(this._showCollisionBoxes=M,M?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(M){this._showOverdrawInspector!==M&&(this._showOverdrawInspector=M,this._update())}get repaint(){return!!this._repaint}set repaint(M){this._repaint!==M&&(this._repaint=M,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(M){this._vertices=M,this._update()}_setCacheLimits(M,o){r.setCacheLimits(M,o)}get version(){return"2.4.0"}},NavigationControl:class{constructor(M){this.options=r.extend({},so,M),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const M=this._map.getZoom(),o=M===this._map.getMaxZoom(),h=M===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const M=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=M}onAdd(M){return this._map=M,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(M,o){const h=y.create("button",M,this._container);return h.type="button",h.addEventListener("click",o),h}_setButtonTitle(M,o){const h=this._map._getUIString(`NavigationControl.${o}`);M.title=h,M.setAttribute("aria-label",h)}},GeolocateControl:class extends r.Evented{constructor(M){super(),this.options=r.extend({},Bp,M),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(M){var o;return this._map=M,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,qr!==void 0?o(qr):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(h=>{qr=h.state!=="denied",o(qr)}):(qr=!!window.navigator.geolocation,o(qr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,wl=0,qs=!1}_isOutOfMapMaxBounds(M){const o=this._map.getMaxBounds(),h=M.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(M){if(this._map){if(this._isOutOfMapMaxBounds(M))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",M)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=M,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(M),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(M),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",M)),this._finish()}}_updateCamera(M){const o=new r.LngLat(M.coords.longitude,M.coords.latitude),h=M.coords.accuracy,w=this._map.getBearing(),I=r.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(h),I,{geolocateSource:!0})}_updateMarker(M){if(M){const o=new r.LngLat(M.coords.longitude,M.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=M.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const M=this._map._container.clientHeight/2,o=this._map.unproject([0,M]),h=this._map.unproject([1,M]),w=o.distanceTo(h),I=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=`${I}px`,this._circleElement.style.height=`${I}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(M){if(this._map){if(this.options.trackUserLocation)if(M.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(M.code===3&&qs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",M)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(M){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",M===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new bu(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":wl--,qs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let M;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),wl++,wl>1?(M={maximumAge:6e5,timeout:0},qs=!0):(M=this.options.positionOptions,qs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,M)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Hd,LogoControl:Fp,ScaleControl:class{constructor(M){this.options=r.extend({},v0,M),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){_u(this._map,this._container,this.options)}onAdd(M){return this._map=M,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",M.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(M){this.options.unit=M,_u(this._map,this._container,this.options)}},FullscreenControl:class{constructor(M){this._fullscreen=!1,M&&M.container&&(M.container instanceof HTMLElement?this._container=M.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(M){return this._map=M,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const M=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",M).setAttribute("aria-hidden","true"),M.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const M=this._getTitle();this._fullscreenButton.setAttribute("aria-label",M),this._fullscreenButton.title=M}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(M){this.options=M,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(M){return this._map=M,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(M){super(),this.options=r.extend(Object.create(Fr),M),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(M){return this._map&&this.remove(),this._map=M,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(M){return this._lngLat=r.LngLat.convert(M),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(M){return this.setDOMContent(document.createTextNode(M))}setHTML(M){const o=document.createDocumentFragment(),h=document.createElement("body");let w;for(h.innerHTML=M;w=h.firstChild,w;)o.appendChild(w);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(M){return this.options.maxWidth=M,this._update(),this}setDOMContent(M){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(M),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(M){this._container&&this._container.classList.add(M)}removeClassName(M){this._container&&this._container.classList.remove(M)}setOffset(M){return this.options.offset=M,this._update(),this}toggleClassName(M){if(this._container)return this._container.classList.toggle(M)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(M){this._update(M.point)}_onMouseMove(M){this._update(M.point)}_onDrag(M){this._update(M.point)}_update(M){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(O=>this._container.classList.add(O)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!M))return;const o=this._pos=this._trackPointer&&M?M:this._map.project(this._lngLat);let h=this.options.anchor;const w=ac(this.options.offset);if(!h){const O=this._container.offsetWidth,te=this._container.offsetHeight;let ue;ue=o.y+w.bottom.y<te?["top"]:o.y>this._map.transform.height-te?["bottom"]:[],o.x<O/2?ue.push("left"):o.x>this._map.transform.width-O/2&&ue.push("right"),h=ue.length===0?"bottom":ue.join("-")}const I=o.add(w[h]).round();y.setTransform(this._container,`${Di[h]} translate(${I.x}px,${I.y}px)`),vu(this._container,h,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const M=this._container.querySelector(mg);M&&M.focus()}_onClose(){this.remove()}},Marker:bu,Style:Hr,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:ae,GeoJSONSource:U,ImageSource:H,RasterDEMTileSource:G,RasterTileSource:L,VectorTileSource:$,VideoSource:q,prewarm:function(){Ce().acquire(J)},clearPrewarmedResources:function(){const M=xe;M&&(M.isPreloaded()&&M.numActive()===1?(M.release(J),xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return se.workerCount},set workerCount(M){se.workerCount=M},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(M){r.config.MAX_PARALLEL_IMAGE_REQUESTS=M},clearStorage(M){r.clearTileCache(M)},workerUrl:"",addProtocol(M,o){r.config.REGISTERED_PROTOCOLS[M]=o},removeProtocol(M){delete r.config.REGISTERED_PROTOCOLS[M]}};return cr.extend(wu,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),wu});var u=s;return u})})(XG);var nA={exports:{}};class KG{constructor(e=[],t=QG){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,s=t[e];for(;e>0;){const l=e-1>>1,u=t[l];if(n(s,u)>=0)break;t[e]=u,e=l}t[e]=s}_down(e){const{data:t,compare:n}=this,s=this.length>>1,l=t[e];for(;e<s;){let u=(e<<1)+1,r=t[u];const p=u+1;if(p<this.length&&n(t[p],r)<0&&(u=p,r=t[p]),n(r,l)>=0)break;t[e]=r,e=u}t[e]=l}}function QG(i,e){return i<e?-1:i>e?1:0}const JG=Object.freeze(Object.defineProperty({__proto__:null,default:KG},Symbol.toStringTag,{value:"Module"})),eH=dI(JG);var Cy=eH;Cy.default&&(Cy=Cy.default);nA.exports=rA;nA.exports.default=rA;function rA(i,e,t){e=e||1;for(var n,s,l,u,r=0;r<i[0].length;r++){var p=i[0][r];(!r||p[0]<n)&&(n=p[0]),(!r||p[1]<s)&&(s=p[1]),(!r||p[0]>l)&&(l=p[0]),(!r||p[1]>u)&&(u=p[1])}var f=l-n,m=u-s,v=Math.min(f,m),y=v/2;if(v===0){var _=[n,s];return _.distance=0,_}for(var b=new Cy(void 0,tH),C=n;C<l;C+=v)for(var E=s;E<u;E+=v)b.push(new _c(C+y,E+y,y,i));var S=nH(i),x=new _c(n+f/2,s+m/2,0,i);x.d>S.d&&(S=x);for(var A=b.length;b.length;){var D=b.pop();D.d>S.d&&(S=D,t&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,A)),!(D.max-S.d<=e)&&(y=D.h/2,b.push(new _c(D.x-y,D.y-y,y,i)),b.push(new _c(D.x+y,D.y-y,y,i)),b.push(new _c(D.x-y,D.y+y,y,i)),b.push(new _c(D.x+y,D.y+y,y,i)),A+=4)}t&&(console.log("num probes: "+A),console.log("best distance: "+S.d));var T=[S.x,S.y];return T.distance=S.d,T}function tH(i,e){return e.max-i.max}function _c(i,e,t,n){this.x=i,this.y=e,this.h=t,this.d=iH(i,e,n),this.max=this.d+this.h*Math.SQRT2}function iH(i,e,t){for(var n=!1,s=1/0,l=0;l<t.length;l++)for(var u=t[l],r=0,p=u.length,f=p-1;r<p;f=r++){var m=u[r],v=u[f];m[1]>e!=v[1]>e&&i<(v[0]-m[0])*(e-m[1])/(v[1]-m[1])+m[0]&&(n=!n),s=Math.min(s,rH(i,e,m,v))}return s===0?0:(n?1:-1)*Math.sqrt(s)}function nH(i){for(var e=0,t=0,n=0,s=i[0],l=0,u=s.length,r=u-1;l<u;r=l++){var p=s[l],f=s[r],m=p[0]*f[1]-f[0]*p[1];t+=(p[0]+f[0])*m,n+=(p[1]+f[1])*m,e+=m*3}return e===0?new _c(s[0][0],s[0][1],0,i):new _c(t/e,n/e,0,i)}function rH(i,e,t,n){var s=t[0],l=t[1],u=n[0]-s,r=n[1]-l;if(u!==0||r!==0){var p=((i-s)*u+(e-l)*r)/(u*u+r*r);p>1?(s=n[0],l=n[1]):p>0&&(s+=u*p,l+=r*p)}return u=i-s,r=e-l,u*u+r*r}var sH=typeof Xa=="object"&&Xa&&Xa.Object===Object&&Xa,aH=typeof self=="object"&&self&&self.Object===Object&&self;sH||aH||Function("return this")();var oH={exports:{}};(function(i,e){var t=function(){var n={},s=Math.PI/180,l=180/Math.PI,u=6378137,r=20037508342789244e-9;function p(m){return Number(m)===m&&m%1!==0}function f(m){if(m=m||{},this.size=m.size||256,this.expansion=m.antimeridian===!0?2:1,!n[this.size]){var v=this.size,y=n[this.size]={};y.Bc=[],y.Cc=[],y.zc=[],y.Ac=[];for(var _=0;_<30;_++)y.Bc.push(v/360),y.Cc.push(v/(2*Math.PI)),y.zc.push(v/2),y.Ac.push(v),v*=2}this.Bc=n[this.size].Bc,this.Cc=n[this.size].Cc,this.zc=n[this.size].zc,this.Ac=n[this.size].Ac}return f.prototype.px=function(m,v){if(p(v)){var y=this.size*Math.pow(2,v),_=y/2,b=y/360,C=y/(2*Math.PI),E=y,S=Math.min(Math.max(Math.sin(s*m[1]),-.9999),.9999),x=_+m[0]*b,A=_+.5*Math.log((1+S)/(1-S))*-C;return x>E*this.expansion&&(x=E*this.expansion),A>E&&(A=E),[x,A]}else{var _=this.zc[v],S=Math.min(Math.max(Math.sin(s*m[1]),-.9999),.9999),x=Math.round(_+m[0]*this.Bc[v]),A=Math.round(_+.5*Math.log((1+S)/(1-S))*-this.Cc[v]);return x>this.Ac[v]*this.expansion&&(x=this.Ac[v]*this.expansion),A>this.Ac[v]&&(A=this.Ac[v]),[x,A]}},f.prototype.ll=function(m,v){if(p(v)){var y=this.size*Math.pow(2,v),_=y/360,b=y/(2*Math.PI),C=y/2,E=(m[1]-C)/-b,S=(m[0]-C)/_,x=l*(2*Math.atan(Math.exp(E))-.5*Math.PI);return[S,x]}else{var E=(m[1]-this.zc[v])/-this.Cc[v],S=(m[0]-this.zc[v])/this.Bc[v],x=l*(2*Math.atan(Math.exp(E))-.5*Math.PI);return[S,x]}},f.prototype.bbox=function(m,v,y,_,b){_&&(v=Math.pow(2,y)-1-v);var C=[m*this.size,(+v+1)*this.size],E=[(+m+1)*this.size,v*this.size],S=this.ll(C,y).concat(this.ll(E,y));return b==="900913"?this.convert(S,"900913"):S},f.prototype.xyz=function(m,v,y,_){_==="900913"&&(m=this.convert(m,"WGS84"));var b=[m[0],m[1]],C=[m[2],m[3]],E=this.px(b,v),S=this.px(C,v),x=[Math.floor(E[0]/this.size),Math.floor((S[0]-1)/this.size)],A=[Math.floor(S[1]/this.size),Math.floor((E[1]-1)/this.size)],D={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,A)};if(y){var T={minY:Math.pow(2,v)-1-D.maxY,maxY:Math.pow(2,v)-1-D.minY};D.minY=T.minY,D.maxY=T.maxY}return D},f.prototype.convert=function(m,v){return v==="900913"?this.forward(m.slice(0,2)).concat(this.forward(m.slice(2,4))):this.inverse(m.slice(0,2)).concat(this.inverse(m.slice(2,4)))},f.prototype.forward=function(m){var v=[u*m[0]*s,u*Math.log(Math.tan(Math.PI*.25+.5*m[1]*s))];return v[0]>r&&(v[0]=r),v[0]<-20037508342789244e-9&&(v[0]=-20037508342789244e-9),v[1]>r&&(v[1]=r),v[1]<-20037508342789244e-9&&(v[1]=-20037508342789244e-9),v},f.prototype.inverse=function(m){return[m[0]*l/u,(Math.PI*.5-2*Math.atan(Math.exp(-m[1]/u)))*l]},f}();i.exports=t})(oH);var mT={exports:{}};(function(i,e){(function(t,n){n(e,i)})(Xa,function(t,n){var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function l(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function u(f){try{delete window[f]}catch{window[f]=void 0}}function r(f){var m=document.getElementById(f);m&&document.getElementsByTagName("head")[0].removeChild(m)}function p(f){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=f,y=m.timeout||s.timeout,_=m.jsonpCallback||s.jsonpCallback,b=void 0;return new Promise(function(C,E){var S=m.jsonpCallbackFunction||l(),x=_+"_"+S;window[S]=function(D){C({ok:!0,json:function(){return Promise.resolve(D)}}),b&&clearTimeout(b),r(x),u(S)},v+=v.indexOf("?")===-1?"?":"&";var A=document.createElement("script");A.setAttribute("src",""+v+_+"="+S),m.charset&&A.setAttribute("charset",m.charset),m.nonce&&A.setAttribute("nonce",m.nonce),m.referrerPolicy&&A.setAttribute("referrerPolicy",m.referrerPolicy),m.crossorigin&&A.setAttribute("crossorigin","true"),A.id=x,document.getElementsByTagName("head")[0].appendChild(A),b=setTimeout(function(){E(new Error("JSONP request to "+f+" timed out")),u(S),r(x),window[S]=function(){u(S)}},y),A.onerror=function(){E(new Error("JSONP request to "+f+" failed")),u(S),r(x),b&&clearTimeout(b)}})}n.exports=p})})(mT,mT.exports);var lH=uH,cH=Object.prototype.hasOwnProperty;function uH(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)cH.call(t,n)&&(i[n]=t[n])}return i}var sA={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(n,s){return s.filter(function(l){return t.test(n,l)})},t.test=function(n,s){return t.match(n,s)!==null},t.match=function(n,s,l){l=l||{};var u=0,r=[],p=s.length,f=0,m=0,v=l.pre||"",y=l.post||"",_=l.caseSensitive&&s||s.toLowerCase(),b;n=l.caseSensitive&&n||n.toLowerCase();for(var C=0;C<p;C++)b=s[C],_[C]===n[u]?(b=v+b+y,u+=1,m+=1+m):m=0,f+=m,r[r.length]=b;return u===n.length?(f=_===n?1/0:f,{rendered:r.join(""),score:f}):null},t.filter=function(n,s,l){return!s||s.length===0?[]:typeof n!="string"?s:(l=l||{},s.reduce(function(u,r,p,f){var m=r;l.extract&&(m=l.extract(r));var v=t.match(n,m,l);return v!=null&&(u[u.length]={string:v.rendered,score:v.score,index:p,original:r}),u},[]).sort(function(u,r){var p=r.score-u.score;return p||u.index-r.index}))}})()})(sA);var dH=sA.exports,Oa=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};Oa.prototype.show=function(){this.element.style.display="block"};Oa.prototype.hide=function(){this.element.style.display="none"};Oa.prototype.add=function(i){this.items.push(i)};Oa.prototype.clear=function(){this.items=[],this.active=0};Oa.prototype.isEmpty=function(){return!this.items.length};Oa.prototype.isVisible=function(){return this.element.style.display==="block"};Oa.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};Oa.prototype.drawItem=function(i,e){var t=document.createElement("li"),n=document.createElement("a");e&&(t.className+=" active"),n.innerHTML=i.string,t.appendChild(n),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};Oa.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};Oa.prototype.move=function(i){this.active=i,this.draw()};Oa.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Oa.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Oa.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var hH=Oa,pH=lH,fH=dH,mH=hH,na=function(i,e,t){return t=t||{},this.options=pH({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new mH(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(n){this.handleKeyUp(n.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(n){this.handleKeyDown(n)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(n){this.handlePaste(n)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};na.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};na.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};na.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};na.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};na.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};na.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};na.prototype.update=function(i){this.data=i,this.handleKeyUp()};na.prototype.clear=function(){this.data=[],this.list.clear()};na.prototype.normalize=function(i){return i=i.toLowerCase(),i};na.prototype.match=function(i,e){return i.indexOf(e)>-1};na.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};na.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(n){return this.getItemValue(n)}).bind(this)},t;this.options.filter?(t=fH.filter(this.query,this.data,e),t=t.map((function(n){return{original:n.original,string:this.render(n.original,n.string)}}).bind(this))):t=this.data.map((function(n){var s=this.render(n);return{original:n,string:s}}).bind(this)),i(t)};na.prototype.getItemValue=function(i){return i};na.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),n=this.normalize(t),s=n.lastIndexOf(this.query);s>-1;){var l=s+this.query.length;t=t.slice(0,s)+"<strong>"+t.slice(s,l)+"</strong>"+t.slice(l),s=n.slice(0,s).lastIndexOf(this.query)}return t};na.prototype.renderError=function(i){this.list.drawError(i)};var gH=na,yH=gH;typeof window<"u"&&(window.Suggestions=yH);const xH="_pillWrapper_cps7i_1",vH="_pill_cps7i_1",bH="_destructive_cps7i_18",_H="_info_cps7i_23",wH="_warning_cps7i_28",CH="_success_cps7i_33",Lu={pillWrapper:xH,pill:vH,default:"_default_cps7i_13",destructive:bH,info:_H,warning:wH,success:CH},TH=i=>{let{children:e,variant:t="default"}=i;return pe.createElement("span",{className:vn(Lu.pillWrapper,{[Lu.default]:t==="default",[Lu.destructive]:t==="destructive",[Lu.info]:t==="info",[Lu.warning]:t==="warning",[Lu.success]:t==="success"})},pe.createElement("div",{className:Lu.pill},e))},SH="_wrapper_ff9cy_1",EH="_ping_ff9cy_8",kH="_active_ff9cy_16",AH="_dot_ff9cy_20",MH="_destructive_ff9cy_39",PH="_info_ff9cy_43",IH="_warning_ff9cy_47",DH="_success_ff9cy_51",ph={wrapper:SH,ping:EH,active:kH,dot:AH,default:"_default_ff9cy_35",destructive:MH,info:PH,warning:IH,success:DH},RH=i=>{let{active:e=!1,variant:t="default"}=i;return pe.createElement("span",{className:ph.wrapper},pe.createElement("span",{className:vn(ph.ping,ph[t],{[ph.active]:e})}),pe.createElement("span",{className:vn(ph.dot,ph[t])}))},LH="_card_1fxs6_1",NH={card:LH},aA=i=>{let{children:e,className:t}=i;return pe.createElement("div",{className:`${NH.card} ${t||""}`},e)},oA=i=>{let{label:e,primary:t,secondary:n,small:s,large:l,disabled:u,onClick:r,open:p,icon:f,dataTest:m,component:v}=i;const[y,_]=Fe.useState(!1),b=Fe.useRef(null),C=p!==void 0?p:y,E=()=>{p===void 0&&_(S=>!S),r==null||r()};return pe.createElement("div",{ref:b},pe.createElement(sn,{title:e??Oe.t("More"),primary:t,secondary:n,dataTest:m,disabled:u,small:s,large:l,onClick:E,icon:f},e),C&&pe.createElement(ux,{onBackdropClick:E},pe.createElement(qh,{reference:b,placement:"bottom-start"},v)))},zH="_contentWrapper_137cv_1",jH={contentWrapper:zH},OH=i=>{let{label:e,variant:t="default",active:n=!1}=i;return pe.createElement(TH,{variant:t},pe.createElement("div",{className:jH.contentWrapper},pe.createElement(RH,{variant:t,active:n}),pe.createElement("span",null,e)))};var lA={exports:{}};(function(i,e){(function(t,n){n()})(Xa,function(){function t(f,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,m,v){var y=new XMLHttpRequest;y.open("GET",f),y.responseType="blob",y.onload=function(){p(y.response,m,v)},y.onerror=function(){console.error("could not download file")},y.send()}function s(f){var m=new XMLHttpRequest;m.open("HEAD",f,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function l(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(m)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Xa=="object"&&Xa.global===Xa?Xa:void 0,r=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(f,m,v){var y=u.URL||u.webkitURL,_=document.createElement("a");m=m||f.name||"download",_.download=m,_.rel="noopener",typeof f=="string"?(_.href=f,_.origin===location.origin?l(_):s(_.href)?n(f,m,v):l(_,_.target="_blank")):(_.href=y.createObjectURL(f),setTimeout(function(){y.revokeObjectURL(_.href)},4e4),setTimeout(function(){l(_)},0))}:"msSaveOrOpenBlob"in navigator?function(f,m,v){if(m=m||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,v),m);else if(s(f))n(f,m,v);else{var y=document.createElement("a");y.href=f,y.target="_blank",setTimeout(function(){l(y)})}}:function(f,m,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof f=="string")return n(f,m,v);var _=f.type==="application/octet-stream",b=/constructor/i.test(u.HTMLElement)||u.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||_&&b||r)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var A=E.result;A=C?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=A:location=A,y=null},E.readAsDataURL(f)}else{var S=u.URL||u.webkitURL,x=S.createObjectURL(f);y?y.location=x:location.href=x,y=null,setTimeout(function(){S.revokeObjectURL(x)},4e4)}});u.saveAs=p.saveAs=p,i.exports=p})})(lA);var FH=lA.exports;const BH=Yh(FH),$H="_errorChap_1v22m_1",UH="_errorBar_1v22m_6",VH="_errorHeader_1v22m_16",GH="_detailedError_1v22m_23",HH="_scrollMissingData_1v22m_29",qH="_notFoundDataTable_1v22m_34",fh={errorChap:$H,errorBar:UH,errorHeader:VH,detailedError:GH,scrollMissingData:HH,notFoundDataTable:qH},WH="_buttons_1a7lz_1",YH="_text_1a7lz_7",gT={buttons:WH,text:YH},ZH=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:n,onClickDownloadOrPostData:s,onButtonSendAction:l})=>{const u=()=>{if(n.length===0)return!0;const f=n[0].path.split("/").length;return n.every(m=>m.path.split("/").length===f)},r=l==="predict"?"Send prediction":"Create dataset",p=l==="predict"?Y.jsx(fx,{}):Y.jsx(w1,{});return Y.jsxs("div",{children:[Y.jsxs("div",{className:gT.buttons,children:[Y.jsx(sn,{icon:Y.jsx(JT,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!u(),onClick:()=>s("download"),children:"Download data"}),Y.jsx(sn,{icon:p,primary:!0,loading:i.startDownload&&i.action===l||e,disabled:!t||i.startDownload||!u(),onClick:()=>s(l),children:r})]}),e&&Y.jsx("p",{className:gT.text,children:"Sending data.."})]})},cA=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:n,selectedPeriodItems:s,selectedOrgUnits:l,orgUnitLevel:u,dataLayers:r})=>{const p=vo(),[f,m]=Fe.useState({action:"download",startDownload:!1}),[v,y]=Fe.useState(!1),[_,b]=Fe.useState(void 0),[C,E]=Fe.useState(),[S,x]=Fe.useState({}),A=r.filter(re=>re.origin==="dataItem"),[D,T]=Fe.useState([]),[k,N]=Fe.useState([]),[W,Z]=Fe.useState(""),K=()=>!(u===void 0||l.length==0||s.length==0||n===""||s.length==0||r.length==0||r.some(re=>re.feature===""||re.dataSource===""||re.origin==="")),j=re=>{b(void 0),E(void 0),N([]),m({action:re,startDownload:!0})};Fe.useEffect(()=>{if(_&&C){if(Z(""),m(re=>({...re,startDownload:!1})),f.action==="download"){fe();return}if($(_))return;f.action==="predict"&&ae(),f.action==="new-dataset"&&q()}},[_,C]);const V=(re,ce,ke,ve)=>{var ee;const Ee=[],Q=[...new Set(re.map(oe=>oe.orgUnit))];s.forEach(oe=>{Q.forEach(we=>{var se;let J=!0;re.filter(de=>de.featureName===ke).forEach(de=>{if(oe.id==de.period){J=!1;return}}),J&&Ee.push({covariate:ve,orgUnitName:((se=S[we])==null?void 0:se.name)||"",period:oe.id})})}),Ee.length>0&&ce.push({title:ve+" is missing for the following orgUnit and time periods: ",description:Y.jsxs("div",{children:[Y.jsxs("p",{children:["Total missing: ",Ee.length," | Use the"," ",Y.jsx("a",{target:"_blank",href:((ee=L==null?void 0:L.systemInfo)==null?void 0:ee.contextPath)+"/api/apps/climate-data/index.html#/import",rel:"noreferrer",children:"Climate App"})," ","to import climate data."]}),Y.jsx("div",{className:fh.scrollMissingData,children:Y.jsxs("table",{className:fh.notFoundDataTable,children:[Y.jsx("thead",{children:Y.jsxs("tr",{children:[Y.jsx("th",{children:"Organisation unit:"}),Y.jsx("th",{children:"Time period:"})]})}),Y.jsx("tbody",{children:Ee.map(oe=>Y.jsxs("tr",{children:[Y.jsx("td",{children:oe.orgUnitName}),Y.jsx("td",{children:k_({periodId:oe.period,calendar:"gregory"}).displayName})]},`${oe.orgUnitName}-${oe.period}`))})]})})]})})},$=re=>{const ce=[];return r.filter(ke=>ke.origin=="dataItem").forEach(ke=>{var ve;if(((ve=re.filter(Ee=>Ee.featureName===ke.feature))==null?void 0:ve.length)===0){const Ee='Thes selected data item for covarate "'+ke.feature+'" returned no data.';ce.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:Ee})}}),r.find(ke=>ke.feature==="rainfall"&&ke.origin=="dataItem")&&V(re,ce,"rainfall","Rainfall"),r.find(ke=>ke.feature==="mean_temperature"&&ke.origin=="dataItem")&&V(re,ce,"mean_temperature","Mean Temperature"),ce.length>0?(N([...k,...ce]),!0):!1},L=hx(),R=()=>{var re,ce;return{appVersion:((re=L==null?void 0:L.appVersion)==null?void 0:re.full)||"Unknown",dhis2Version:((ce=L==null?void 0:L.systemInfo)==null?void 0:ce.version)||"Unknown",dataItemMapper:D}},G=()=>({name:n,dataToBeFetched:H(),metaData:R(),providedData:_,geojson:C}),U=()=>G(),B=()=>({type:"predict",modelId:t==null?void 0:t.name,...G()}),H=()=>r.filter(re=>re.origin==="CHAP").map(re=>({dataSourceName:re.dataSource,featureName:re.feature})),q=async()=>{const re=U();y(!0),await Bh.makeDatasetAnalyticsMakeDatasetPost(re).then(()=>{Z(""),e(),p.invalidateQueries({queryKey:["jobs"]})}).catch(ce=>{var ke,ve;(ke=ce==null?void 0:ce.body)!=null&&ke.detail?Z(JSON.stringify((ve=ce==null?void 0:ce.body)==null?void 0:ve.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{y(!1)})},ae=async()=>{const re=B();y(!0),await Bh.makePredictionAnalyticsMakePredictionPost(re).then(()=>{e(),p.invalidateQueries({queryKey:["jobs"]})}).catch(ce=>{var ke,ve;(ke=ce==null?void 0:ce.body)!=null&&ke.detail?Z(JSON.stringify((ve=ce==null?void 0:ce.body)==null?void 0:ve.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{y(!1)})},fe=()=>{let re={};i==="predict"&&(re=B()),i==="new-dataset"&&(re=U());const ce=new Blob([JSON.stringify(re,null,2)],{type:"application/json"}),ke=new Date;BH(ce,i.replaceAll("-","_")+"_chap_request_data_"+ke.toJSON()+".json")};return Y.jsxs("div",{children:[Y.jsx(ZH,{formValid:K(),onButtonSendAction:i,onClickDownloadOrPostData:j,orgUnits:l,isSendingDataToChap:v,startDownload:f}),Y.jsx("p",{className:fh.errorChap,children:W}),f.startDownload&&K()&&Y.jsx(a7,{setAnalyticsMetaData:x,setFeatureDataItemMapper:T,model_id:t==null?void 0:t.name,setObservations:b,setGeoJSon:E,analyticsDataLayers:A,startDownload:f,setStartDownload:m,selectedPeriodItems:s,setErrorMessages:N,selectedOrgUnits:l,orgUnitLevel:u}),k.map((re,ce)=>Y.jsxs("div",{className:fh.errorBar,children:[Y.jsxs("div",{className:fh.errorHeader,children:[Y.jsx(k1,{}),Y.jsx("span",{children:re.title})]}),Y.jsx("span",{className:fh.detailedError,children:re.description})]},ce))]})},XH="_dataLineWrapper_epwpx_1",KH="_selectField_epwpx_9",QH="_buttonRight_epwpx_13",JH="_selectDataLineWrapper_epwpx_19",eq="_predictLabel_epwpx_27",pf={dataLineWrapper:XH,selectField:KH,buttonRight:QH,selectDataLineWrapper:JH,predictLabel:eq},tq="_searchSelectField_fpa7s_1",iq="_inputField_fpa7s_6",nq="_input_fpa7s_6",rq="_dropDown_fpa7s_33",sq="_dropDownItem_fpa7s_50",aq="_rightDropDownItem_fpa7s_60",oq="_label_fpa7s_69",lq="_infoSearchItem_fpa7s_75",Rl={searchSelectField:tq,inputField:iq,input:nq,dropDown:rq,dropDownItem:sq,rightDropDownItem:aq,label:oq,infoSearchItem:lq},cq=i=>({results:{resource:"dataItems",params:{filter:"displayName:ilike:"+i,fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}}}),uq=({feature:i,onChangeSearchSelectField:e})=>{const[t,n]=Fe.useState(""),s=Wh(),[l,u]=Fe.useState([]),[r,p]=Fe.useState(!1),f=async()=>{try{const x=await s.query(cq(t));u(x.results.dataItems)}catch(x){console.error("Error fetching data:",x)}finally{p(!1)}};Fe.useEffect(()=>{if(t.length===0){u([]);return}p(!0);const x=setTimeout(()=>{f()},300);return()=>{clearTimeout(x)}},[t]);const[m,v]=Fe.useState(!1),y=x=>{v(!0);const A=x.target.value;n(A)},_=x=>{n(x.displayName),e(i,x.id,x.displayName),v(!1)},b=Fe.useRef(null),C=x=>x.replaceAll("_"," ").split(" ").map(A=>A.charAt(0).toUpperCase()+A.slice(1).toLowerCase()).join(" "),E=x=>{b.current&&!b.current.contains(x.target)&&v(!1)},S=()=>r?Y.jsx("li",{className:Rl.infoSearchItem,children:"Loading..."}):l.length==0&&t.length==0?Y.jsx("li",{className:Rl.infoSearchItem,children:"Start to search by typing"}):l.length==0?Y.jsx("li",{className:Rl.infoSearchItem,children:"No match found"}):Y.jsx(Y.Fragment,{children:l.map(x=>Y.jsxs("li",{onClick:()=>_(x),className:Rl.dropDownItem,children:[Y.jsx("div",{children:x.displayName}),Y.jsx("div",{className:Rl.rightDropDownItem,children:C(x.dimensionItemType)??""})]},x.id))});return Fe.useEffect(()=>(document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}),[]),Y.jsxs("div",{ref:b,className:Rl.searchSelectField,children:[Y.jsx("label",{className:Rl.label,children:Y.jsx("span",{children:C(i.name??"")})}),Y.jsx("input",{type:"search",value:t,onChange:y,placeholder:"Search for indicators, Data Elements, Data Sets, Event Data Items, Program Indicators...",className:Rl.inputField}),m&&Y.jsx("ul",{className:Rl.dropDown,children:S()})]})},uA=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[n,s]=Fe.useState([]),l=async()=>{await Bh.getDataSourcesAnalyticsDataSourcesGet().then(p=>{s(p)})};Fe.useEffect(()=>{l()},[]);const u=(p,f,m)=>{const v=[...i];p.selected!=null&&(v[m][f]=p.selected,e(v))},r=(p,f)=>{u({selected:p},"dataSource",f)};return Y.jsxs("div",{children:[Y.jsx("h3",{children:"Covariates"}),Y.jsx("div",{className:pf.selectDataLineWrapper,children:i.map((p,f)=>{var m,v,y;return Y.jsx("div",{children:Y.jsxs("div",{className:pf.dataLineWrapper,children:[t?Y.jsx("div",{className:pf.predictLabel,children:((m=Ty.filter(_=>_.id===p.feature)[0])==null?void 0:m.name)+":"}):Y.jsx("div",{className:pf.predictLabel,children:((v=Ty.filter(_=>_.id===p.feature)[0])==null?void 0:v.name)+":"}),Y.jsxs("div",{className:pf.selectField,children:[(p.origin==="CHAP"||p.origin==="")&&Y.jsx(gs,{disabled:p.origin==="",label:"Data Element",onChange:_=>u(_,"dataSource",f),selected:p.dataSource,children:n.map(_=>_.supportedFeatures.includes(p.feature)&&Y.jsx(Ca,{label:`${_.dataset.toUpperCase()} - ${_.displayName}`,value:_.dataset},_.name))}),p.origin==="dataItem"&&Y.jsx(uq,{feature:{name:(y=Ty.filter(_=>_.id===p.feature)[0])==null?void 0:y.name,id:p.feature,description:""},onChangeSearchSelectField:(_,b)=>r(b,f)})]})]})},f)})})]})},Ty=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],dq=()=>Ty.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),hq=({onDrawerSubmit:i})=>{const[e,t]=Fe.useState(dq()),[n,s]=Fe.useState([]),[l,u]=Fe.useState([]),[r,p]=Fe.useState(void 0),[f,m]=Fe.useState("");return Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:EB.formWrapper,children:[Y.jsx(il,{autoComplete:"",label:"Dataset name",value:f,onChange:v=>m(v.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),Y.jsx(uA,{setDataLayers:t,datasetLayers:e}),Y.jsx(Q3,{setTimePeriods:u}),Y.jsx(J3,{orgUnits:n,setOrgUnits:s,orgUnitLevel:r,setOrgUnitLevel:p}),Y.jsx(cA,{onDrawerSubmit:i,name:f,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:r,selectedPeriodItems:l,selectedOrgUnits:n})]})})},pq="_newDatasetWrapper_1jun0_1",fq="_newEvaluationDatasetTitle_1jun0_5",mq="_navFooterOuter_1jun0_12",gq="_navFooter_1jun0_12",yT={newDatasetWrapper:pq,newEvaluationDatasetTitle:fq,navFooterOuter:mq,navFooter:gq},yq=({onDrawerClose:i,onDrawerSubmit:e})=>Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:yT.newDatasetWrapper,children:[Y.jsxs("div",{className:yT.newEvaluationDatasetTitle,children:[Y.jsx("h2",{children:"New evaluation dataset"}),Y.jsx(sn,{icon:Y.jsx(b1,{}),onClick:i})]}),Y.jsx(hq,{onDrawerSubmit:e})]})}),xq=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return Y.jsx("div",{children:Y.jsx(C_,{open:i,onClose:t,direction:"right",size:n,children:Y.jsx("div",{className:CB.drawerWrapper,children:Y.jsx(yq,{onDrawerClose:t,onDrawerSubmit:e})})})})},vq="_pageHeader_1or2f_1",bq="_pageDescription_1or2f_8",xT={pageHeader:vq,pageDescription:bq},Uh=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:n})=>Y.jsxs("div",{className:xT.pageHeader,children:[Y.jsxs("div",{children:[Y.jsx("h2",{children:i}),Y.jsx("p",{className:xT.pageDescription,children:e})]}),t&&n&&Y.jsx(sn,{onClick:()=>t(!0),icon:Y.jsx(px,{}),primary:!0,children:n})]}),_q="_jobResultPanelContainer_16af9_1",wq="_boxPanel_16af9_9",Cq="_flexMedium_16af9_17",Tq="_flexItemRight_16af9_21",Sq="_inProgress_16af9_26",Eq="_notStarted_16af9_31",kq="_completed_16af9_36",Aq="_failed_16af9_41",Mq="_resultTextHeader_16af9_46",Pq="_evaluationModal_16af9_53",Iq="_jobLogsModal_16af9_58",wc={jobResultPanelContainer:_q,boxPanel:wq,flexMedium:Cq,flexItemRight:Tq,inProgress:Sq,notStarted:Eq,completed:kq,failed:Aq,resultTextHeader:Mq,evaluationModal:Pq,jobLogsModal:Iq},Dq="_modal_1k0a4_1",Rq={modal:Dq},Lq="_container_mngpy_1",Nq="_innerContainer_mngpy_6",zq="_prediction_mngpy_21",jq="_warning_mngpy_26",Oq="_footer_mngpy_31",Fq="_post_mngpy_36",Bq="_redText_mngpy_40",$q="_greenText_mngpy_45",yc={container:Lq,innerContainer:Nq,prediction:zq,warning:jq,footer:Oq,post:Fq,redText:Bq,greenText:$q},Uq={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},dA=()=>{const[i,e]=Fe.useState(),{loading:t,error:n}=ja(Uq,{onComplete:s=>e(s.orgUnits)});return{orgUnits:i,error:n,loading:t}},Vq=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:n,setPostHttpError:s,setPostStatus:l})=>{const u=b=>{if(b==="quantile_low")return e;if(b==="median")return t;if(b==="quantile_high")return n},r=b=>b.dataValues.map(C=>({dataElement:u(C.dataElement),period:C.period,orgUnit:C.orgUnit,value:C.value})),p=b=>({resource:"dataValueSets",type:"create",data:{dataValues:b}}),[f,{error:m,loading:v,called:y}]=LE(p(r(i))),_=async()=>{await f()};return Fe.useEffect(()=>{_()},[]),Fe.useEffect(()=>{y&&(v||(m&&(s("Something went wrong when posting the prediction."),l("error")),m||(s(""),l("finish"))))},[v]),null},Gq="_selectWrapper_8vdsv_1",Hq="_select_8vdsv_1",vT={selectWrapper:Gq,select:Hq},Iv=({value:i,onChange:e,label:t,dataElements:n})=>{const s=u=>{e({displayName:n==null?void 0:n.find(r=>r.id===u.selected).displayName,id:u.selected})},l=(n==null?void 0:n.length)===0&&n!=null;return Y.jsx("div",{children:Y.jsx("div",{children:Y.jsx("div",{className:vT.select,children:Y.jsxs("div",{className:vT.selectWrapper,children:[Y.jsx("span",{children:t}),Y.jsx(gs,{tabIndex:"1",placeholder:Oe.t("Select data element"),disabled:l,selected:i?i.id:"",warning:l,onChange:s,children:n==null?void 0:n.map(u=>Y.jsx(Ca,{label:u.displayName,value:u.id},u.id))})]})})})})},qq="_textWarning_3ldzr_1",Wq="_wrapper_3ldzr_6",Yq="_wrapperWarning_3ldzr_14",Dv={textWarning:qq,wrapper:Wq,wrapperWarning:Yq},Zq="_dataTable_1koi3_1",Xq="_dataValueTables_1koi3_10",Kq="_warning_1koi3_17",s1={dataTable:Zq,dataValueTables:Xq,warning:Kq},Qq=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const n=hx();return e&&Y.jsx(Do,{large:!0,onClose:()=>i(!1),children:Y.jsxs(Wc,{children:[Y.jsx("h2",{children:Oe.t("Add required Data Elements")}),Y.jsxs("p",{children:[Oe.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),Y.jsx("a",{target:"_blank",href:`${n.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,rel:"noreferrer",children:"Maintenance"}),Oe.t("-app and create the Data Elements listed below.")]}),Y.jsx("p",{className:s1.warning,children:Oe.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),Y.jsx("p",{children:Oe.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),Y.jsxs("div",{className:s1.dataValueTables,children:[Y.jsx(Rv,{q:"Low",disease:t}),Y.jsx(Rv,{q:"Median",disease:t}),Y.jsx(Rv,{q:"High",disease:t})]})]})})},Rv=({q:i,disease:e})=>Y.jsx("table",{className:s1.dataTable,children:Y.jsxs("tbody",{children:[Y.jsxs("tr",{children:[Y.jsx("th",{children:Oe.t("Name")}),Y.jsxs("td",{children:["CHAP",Oe.t(` ${e} Quantile ${i}`)]})]}),Y.jsxs("tr",{children:[Y.jsx("th",{children:Oe.t("Short name")}),Y.jsxs("td",{children:["CHAP",Oe.t(` ${e} Quantile ${i}`)]})]}),Y.jsxs("tr",{children:[Y.jsx("th",{children:Oe.t("Code")}),Y.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),Y.jsxs("tr",{children:[Y.jsx("th",{children:Oe.t("Domain type")}),Y.jsx("td",{children:Oe.t("Aggregate")})]}),Y.jsxs("tr",{children:[Y.jsx("th",{children:Oe.t("Aggregation levels")}),Y.jsx("td",{children:Y.jsx("em",{children:Oe.t("Assign all org unit levels")})})]})]})}),Jq=({predictionTarget:i,warning:e})=>{const[t,n]=Fe.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:e?Dv.wrapperWarning:Dv.wrapper,children:[Y.jsx("div",{className:Dv.textWarning,children:e&&Y.jsx(Y.Fragment,{children:Y.jsx("p",{children:Oe.t("It seems like you missing Data Elements for CHAP prediction.")})})}),Y.jsx("div",{children:Y.jsx(sn,{icon:Y.jsx(w1,{}),onClick:()=>n(!0),children:Oe.t("Add data elements")})})]}),Y.jsx(Qq,{modalOpen:t,setModalOpen:n,predictionTarget:i})]})},eW=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),Lv=i=>{const[e,t]=Fe.useState(),{loading:n,error:s}=ja(eW(i),{onComplete:l=>t(l.dataElements.dataElements)});return{dataElements:e,error:s,loading:n}},tW=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),iW=i=>{const[e,t]=Fe.useState(),{loading:n,error:s,engine:l}=ja({});Fe.useEffect(()=>{i&&u()},[i]);const u=async()=>{const r=await l.query(tW(i));r.dataItems.dataItems.length===0?t("?"):t(r.dataItems.dataItems[0].displayName)};return{displayName:e,error:s,loading:n}},nW=({prediction_unprocessed:i})=>{var G;const e=Xl(),[t,n]=Fe.useState("chart"),[s,l]=Fe.useState(),[u,r]=Fe.useState(null),[p,f]=Fe.useState(null),[m,v]=Fe.useState(null),y=(U,B)=>{if(!B)return 0;const H=[...B].sort((ce,ke)=>ce-ke),q=H.length,ae=U*(q-1),fe=Math.floor(ae),re=Math.ceil(ae);return Math.round(fe===re?H[fe]:H[fe]+(H[re]-H[fe])*(ae-fe))},_=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],b=()=>{var U,B;return((B=(U=i==null?void 0:i.metaData)==null?void 0:U.dataItemMapper)==null?void 0:B.find(H=>H.featureName==="disease_cases").dataItemId)??""},C=()=>({diseaseId:A,dataValues:i.forecasts.flatMap(U=>_.map(B=>({orgUnit:U.orgUnit,value:y(B.q,U.values),displayName:U.orgUnit,dataElement:B.name,period:U.period})))}),{dataElements:E}=Lv("CHAP_LOW"),{dataElements:S}=Lv("CHAP_MEDIAN"),{dataElements:x}=Lv("CHAP_HIGH"),A=b(),{displayName:D}=iW(A),{orgUnits:T,loading:k}=dA(),[N,W]=Fe.useState("initial"),[Z,K]=Fe.useState("");Fe.useEffect(()=>{T&&V()},[(G=e==null?void 0:e.state)==null?void 0:G.data,T]);const j=()=>(E==null?void 0:E.length)===0||(S==null?void 0:S.length)===0||(x==null?void 0:x.length)===0,V=async()=>{W("initial")};Fe.useEffect(()=>{D&&T&&i&&l(L(C()))},[D,T,i]),Fe.useEffect(()=>{if(E&&S&&x&&D){const U=E.find(q=>q.code===`CHAP_LOW_${D.toLocaleUpperCase().replaceAll(" ","_")}`);U&&r(U);const B=S.find(q=>q.code===`CHAP_MEDIAN_${D.toLocaleUpperCase().replaceAll(" ","_")}`);B&&f(B);const H=x.find(q=>q.code===`CHAP_HIGH_${D.toLocaleUpperCase().replaceAll(" ","_")}`);H&&v(H)}},[E,S,x,D]);const $=()=>!u&&!p&&!m?!1:!!(u&&!(u!=null&&u.displayName.includes(D))||p&&!(p!=null&&p.displayName.includes(D))||m&&!(m!=null&&m.displayName.includes(D))),L=U=>({dataValues:U.dataValues.map(B=>{var H;return{...B,displayName:(H=T==null?void 0:T.organisationUnits.find(q=>q.id===B.orgUnit))==null?void 0:H.displayName}}),diseaseId:U.diseaseId}),R=()=>!!(u&&p&&m);return Y.jsx("div",{className:yc.container,children:Y.jsxs("div",{className:yc.innerContainer,children:[k&&Y.jsx("p",{children:"Loading metadata from DHIS2.. "}),Y.jsxs("h1",{children:["Prediction: ",i.name]}),s&&Y.jsxs(Y.Fragment,{children:[Y.jsxs(u_,{scrollable:!0,children:[Y.jsx(Oh,{selected:t==="chart",onClick:()=>n("chart"),children:"Chart"}),Y.jsx(Oh,{selected:t==="table",onClick:()=>n("table"),children:"Table"})]}),Y.jsx("div",{className:yc.prediction,children:{chart:Y.jsx(RU,{predictionTargetName:D,data:s}),table:Y.jsx(ZG,{data:s}),map:Y.jsx(Y.Fragment,{})}[t]}),Y.jsx("h3",{children:Oe.t("Select which data element prediction should be imported to:")}),Y.jsx(Jq,{warning:j(),predictionTarget:D}),Y.jsx(Iv,{label:Oe.t("Select data element for low quantile"),dataElements:E,onChange:r,value:u}),Y.jsx(Iv,{label:Oe.t("Select data element for median quantile"),dataElements:S,onChange:f,value:p}),Y.jsx(Iv,{label:Oe.t("Select data element for high quantile"),dataElements:x,onChange:v,value:m}),$()&&Y.jsx("p",{className:yc.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),Y.jsx("div",{className:yc.footer,children:Y.jsx(sn,{onClick:()=>W("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!R(),icon:Y.jsx(fx,{}),primary:!0,children:Oe.t("Import prediction")})}),N==="loading"&&Y.jsx(Vq,{setPostHttpError:K,setPostStatus:W,prediction:s,qLowDataElementId:u==null?void 0:u.id,qMedianDataElementId:p==null?void 0:p.id,qHighDataElementId:m==null?void 0:m.id}),Y.jsxs("div",{className:yc.post,children:[N==="finish"&&Y.jsx("p",{className:yc.greenText,children:Oe.t("Prediction has been imported.")}),Y.jsx("p",{className:yc.redText,children:Oe.t(Z)})]})]})]})})},rW=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[n,s]=Fe.useState(),l=async u=>{await Ms.getPredictionCrudPredictionsPredictionIdGet(u).then(r=>{s(r)})};return Fe.useEffect(()=>{t&&l(Number(t))},[]),Y.jsx("div",{children:i&&Y.jsx(Y.Fragment,{children:Y.jsx(Do,{className:Rq.modal,onClose:()=>{e(!1)},children:Y.jsx(Y.Fragment,{children:n&&Y.jsx(nW,{prediction_unprocessed:n})})})})})},sW="_jobResultPanelContainer_8nqrq_1",aW="_boxPanel_8nqrq_9",oW="_flexMedium_8nqrq_17",lW="_flexItemRight_8nqrq_21",cW="_inProgress_8nqrq_29",uW="_notStarted_8nqrq_34",dW="_completed_8nqrq_39",hW="_failed_8nqrq_44",pW="_resultTextHeader_8nqrq_49",fW="_evaluationModal_8nqrq_56",mW="_jobLogsModal_8nqrq_61",gW="_popupMenuDiv_8nqrq_66",To={jobResultPanelContainer:sW,boxPanel:aW,flexMedium:oW,flexItemRight:lW,inProgress:cW,notStarted:uW,completed:dW,failed:hW,resultTextHeader:pW,evaluationModal:fW,jobLogsModal:mW,popupMenuDiv:gW},yW=(i,e)=>{Fe.useEffect(()=>{const t=n=>{const s=i.current;!s||s.contains(n.target)||e(n)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},xW=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:n,onClickImport:s,onClickViewLogs:l,onClickRemove:u})=>{const[r,p]=Fe.useState(!1),f=Fe.useRef(null),m=Fe.useRef(null);yW(m,_=>{var b;(b=f.current)!=null&&b.contains(_.target)||p(!1)});const v=_=>{switch(_){case"STARTED":return To.inProgress;case"PENDING":return To.notStarted;case"FAILURE":return To.failed;default:return To.completed}},y=_=>{switch(_){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return Y.jsx("div",{className:To.boxPanel,children:Y.jsxs("div",{className:To.jobResultPanelContainer,children:[Y.jsx("div",{className:To.flexMedium,children:e.name}),Y.jsx("div",{className:To.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),Y.jsx("div",{className:To.flexMedium,children:Y.jsx("span",{className:v(e.status),children:y(e.status)})}),Y.jsxs("div",{className:To.flexItemRight,children:[{prediction:Y.jsx(Y.Fragment,{children:e.status=="SUCCESS"&&Y.jsx(sn,{icon:Y.jsx(tS,{}),onClick:()=>s(e.result),small:!0,children:"Import"})}),dataset:Y.jsx(Y.Fragment,{children:e.status=="SUCCESS"&&Y.jsx(sn,{icon:Y.jsx(iS,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:Y.jsx(Y.Fragment,{children:e.status=="SUCCESS"&&Y.jsx(sn,{icon:Y.jsx(oS,{}),onClick:()=>n(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&Y.jsx(sn,{icon:Y.jsx(HT,{}),onClick:()=>l(e.id),small:!0,children:"Logs"}),Y.jsx("div",{ref:f,children:Y.jsx(JU,{enabled:e.status==="STARTED",content:Oe.t("Job is still running. Please wait until it is finished before doing any actions."),children:Y.jsx(sn,{small:!0,icon:Y.jsx(um,{}),disabled:e.status==="STARTED",onClick:()=>p(_=>!_)})})}),r&&Y.jsx(qh,{reference:f,placement:"top-end",children:Y.jsx("div",{ref:m,className:To.popupMenuDiv,children:Y.jsx(v1,{children:["SUCCESS","FAILURE"].includes(e.status)&&Y.jsx(Kr,{label:"Delete",icon:Y.jsx(QT,{}),destructive:!0,onClick:()=>{p(!1),u(e)}})})})})]})]})},i)},vW="_jobLogs_pzpzf_1",bW="_logContent_pzpzf_7",Nv={jobLogs:vW,logContent:bW},hA=(i,e)=>{const t=Fe.useRef(),n=Fe.useRef(null),s=()=>{n.current===null&&document.visibilityState==="visible"&&(n.current=setInterval(()=>{t.current&&t.current()},e))},l=()=>{n.current!==null&&(clearInterval(n.current),n.current=null)};Fe.useEffect(()=>{t.current=i},[i]),Fe.useEffect(()=>{const u=()=>{document.visibilityState==="visible"?s():l()};return document.addEventListener("visibilitychange",u),document.visibilityState==="visible"&&s(),()=>{l(),document.removeEventListener("visibilitychange",u)}},[e])},_W=({jobId:i})=>{const[e,t]=Fe.useState(null),[n,s]=Fe.useState(null),[l,u]=Fe.useState(!1),r=Fe.useRef(null),p=async()=>{if(i){console.log("fetching logs");try{const f=await od.getLogsJobsJobIdLogsGet(i);t(f)}catch(f){s(f.body.detail)}finally{u(!1)}}};return Fe.useEffect(()=>{u(!0),s(null),p()},[i]),Fe.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),hA(p,5e3),i?l?Y.jsx("p",{children:"Loading logs..."}):n?Y.jsxs("p",{className:Nv.error,children:["Error: ",n]}):Y.jsxs("div",{className:Nv.jobLogs,children:[Y.jsx("h2",{children:"Job Logs"}),Y.jsx("pre",{className:Nv.logContent,ref:r,children:e||"<No logs reported for this job>"})]}):Y.jsx("p",{children:"No job ID provided."})},wW="_drawerWrapper_l3raf_1",CW={drawerWrapper:wW},TW="_formWrapper_13v73_1",SW="_newEvaluationTitle_13v73_8",EW="_buttons_13v73_15",kW="_navFooterOuter_13v73_20",AW="_navFooter_13v73_20",zv={formWrapper:TW,newEvaluationTitle:SW,buttons:EW,navFooterOuter:kW,navFooter:AW},bT=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}},MW="_datasetDetailsWrapper_dewdk_1",PW="_datasetDetailsRow_dewdk_7",IW="_label_dewdk_13",Nu={datasetDetailsWrapper:MW,datasetDetailsRow:PW,label:IW},DW=({datasetId:i})=>{var p;const[e,t]=Fe.useState(null),[n,s]=Fe.useState(""),[l,u]=Fe.useState(!0),r=f=>{const m=f.observations.map(S=>S.period),v=Array.from(new Set(m)).sort(),y=v[0],_=v[v.length-1],C=Array.from(new Set(m)).length,E=Array.from(new Set(f.observations.map(S=>S.featureName).filter(S=>S!=="disease_cases")));return{name:f.name,created:f.created,startPeriod:y,endPeriod:_,orgUnitCount:C,covariates:E}};return Fe.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const m=await Ms.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",m);const v=r(m);t(v)}catch(m){s(m)}finally{u(!1)}})()},[i]),l?Y.jsxs("div",{className:Nu.datasetLoader,children:[Y.jsx(Ea,{}),Y.jsx("span",{children:"Loading dataset"})]}):n?Y.jsxs("p",{children:["Error: ",n]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("h3",{children:"Evaluation Dataset"}),Y.jsx(lm,{children:Y.jsxs("div",{className:Nu.datasetDetailsWrapper,children:[Y.jsxs("div",{children:[Y.jsx("span",{className:Nu.label,children:"Name: "}),Y.jsx("span",{children:e.name})]}),Y.jsxs("div",{children:[Y.jsx("span",{className:Nu.label,children:"Org Units: "}),Y.jsx("span",{children:e.orgUnitCount})]}),Y.jsxs("div",{children:[Y.jsx("span",{className:Nu.label,children:"Time period: "}),Y.jsxs("span",{children:[bT(e.startPeriod)," to ",bT(e.endPeriod)]})]}),Y.jsxs("div",{children:[Y.jsx("span",{className:Nu.label,children:"Covariates: "}),Y.jsx("span",{children:((p=e==null?void 0:e.covariates)==null?void 0:p.join(", "))||"None"})]}),Y.jsxs("div",{children:[Y.jsx("span",{className:Nu.label,children:"Created: "}),Y.jsx("span",{children:e.created})]})]})})]})},RW="_modelDetailsContainer_mnj31_1",LW="_loadingText_mnj31_5",NW="_selectedModelDetails_mnj31_10",zW="_modelAuthor_mnj31_17",jW="_modelAuthorLogo_mnj31_25",OW="_modelAuthorName_mnj31_32",FW="_modelHumanName_mnj31_36",BW="_modelEmail_mnj31_42",$W="_modelDescription_mnj31_47",UW="_modelDescriptionText_mnj31_52",VW="_modelCovariates_mnj31_57",GW="_modelCovariatesList_mnj31_62",HW="_modelCovariateItem_mnj31_71",qW="_modelCitation_mnj31_75",WW="_modelCitationText_mnj31_80",YW="_modelLink_mnj31_86",ha={modelDetailsContainer:RW,loadingText:LW,selectedModelDetails:NW,modelAuthor:zW,modelAuthorLogo:jW,modelAuthorName:OW,modelHumanName:FW,modelEmail:BW,modelDescription:$W,modelDescriptionText:UW,modelCovariates:VW,modelCovariatesList:GW,modelCovariateItem:HW,modelCitation:qW,modelCitationText:WW,modelLink:YW},ZW=({selectedModel:i,onChangeModel:e})=>Y.jsx("div",{className:ha.modelDetailsContainer,children:Y.jsxs("div",{className:ha.selectedModelDetails,children:[Y.jsx("h3",{className:ha.modelHumanName,children:i.displayName}),Y.jsxs("div",{className:ha.modelAuthor,children:[Y.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:ha.modelAuthorLogo}),Y.jsxs("span",{className:ha.modelAuthorName,children:[i.author," - ",i.organization]})]}),Y.jsxs("p",{className:ha.modelDescription,children:[Y.jsx("div",{children:"Description:"}),Y.jsx("div",{className:ha.modelDescriptionText,children:i.description||"Coming soon..."})]}),Y.jsxs("div",{className:ha.modelCovariates,children:[Y.jsx("span",{children:"Model inputs:"}),Y.jsx("ul",{className:ha.modelCovariatesList,children:i.covariates.map((t,n)=>Y.jsxs("li",{className:ha.modelCovariateItem,children:[" ",t.name]},n))})]}),Y.jsxs("div",{className:ha.modelCitation,children:[Y.jsx("span",{children:"Attribution:"}),Y.jsx("pre",{className:ha.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),Y.jsxs("p",{className:ha.modelLink,children:["External link: ",Y.jsx("a",{href:i.sourceUrl||"",target:"_blank",rel:"noreferrer",children:i.sourceUrl||"http://example.com"})]}),Y.jsxs("p",{className:ha.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&Y.jsx("div",{children:Y.jsx(sn,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),XW="_modelSelectContainer_1u7s7_1",KW="_loadingText_1u7s7_5",QW="_modelGrid_1u7s7_10",JW="_modelCard_1u7s7_17",eY="_selectedModelCard_1u7s7_31",tY="_selectedModelDetails_1u7s7_35",iY="_modelAuthor_1u7s7_42",nY="_modelAuthorLogo_1u7s7_50",rY="_modelAuthorName_1u7s7_57",sY="_modelHumanName_1u7s7_61",aY="_modelEmail_1u7s7_67",oY="_modelDescription_1u7s7_72",lY="_modelDescriptionText_1u7s7_77",cY="_modelCovariates_1u7s7_82",uY="_modelCovariatesList_1u7s7_87",dY="_modelCovariateItem_1u7s7_96",hY="_modelCitation_1u7s7_100",pY="_modelCitationText_1u7s7_105",fY="_modelLink_1u7s7_111",Wo={modelSelectContainer:XW,loadingText:KW,modelGrid:QW,modelCard:JW,selectedModelCard:eY,selectedModelDetails:tY,modelAuthor:iY,modelAuthorLogo:nY,modelAuthorName:rY,modelHumanName:sY,modelEmail:aY,modelDescription:oY,modelDescriptionText:lY,modelCovariates:cY,modelCovariatesList:uY,modelCovariateItem:dY,modelCitation:hY,modelCitationText:pY,modelLink:fY},_T={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},pA=({selectedModel:i,setSelectedModel:e})=>{const[t,n]=Fe.useState([]),[s,l]=Fe.useState(!0),[u,r]=Fe.useState(!0),p=async()=>{await Ms.listModelsCrudModelsGet().then(m=>{const v=m.map(y=>(y.covariates=y.covariates.concat(y.target),y));l(!1),n(v)}).catch(()=>{n([_T]),e(_T),l(!1)})},f=m=>{e(m),r(!1)};return Fe.useEffect(()=>{p()},[]),Y.jsx("div",{className:Wo.modelSelectContainer,children:s?Y.jsx("p",{children:"Loading models..."}):Y.jsxs(Y.Fragment,{children:[Y.jsx("h3",{children:"Prediction Model"}),!u&&i&&Y.jsx("div",{children:Y.jsx(ZW,{selectedModel:i,onChangeModel:()=>r(!0)})}),u&&Y.jsx("div",{children:Y.jsx("div",{className:Wo.modelGrid,children:t.map(m=>Y.jsxs("div",{className:`${Wo.modelCard} ${(i==null?void 0:i.name)===m.name?Wo.selectedModelCard:""}`,children:[Y.jsx("h3",{className:Wo.modelHumanName,children:m.displayName}),Y.jsxs("div",{className:Wo.modelAuthor,children:[Y.jsx("img",{src:m.organizationLogoUrl||"/default-model-logo.png",alt:m.name+" logo",className:Wo.modelAuthorLogo}),Y.jsxs("span",{className:Wo.modelAuthorName,children:[m.author," - ",m.organization]})]}),Y.jsx("ul",{className:Wo.modelCovariatesList,children:m.covariates.map((v,y)=>Y.jsxs("li",{className:Wo.modelCovariateItem,children:[" ",v.name]},y))}),Y.jsx(sn,{onClick:()=>f(m),primary:!0,children:(i==null?void 0:i.name)===m.name?"Selected":"Select Model"})]},m.name))})})]})})},mY=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const t=vo(),[n,s]=Fe.useState(""),[l,u]=Fe.useState(void 0),r=n&&e&&l,p=()=>{if(console.log("should evaluate",n,e,l),r)try{const f=Bh.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:n,datasetId:e,modelId:l.name});t.invalidateQueries({queryKey:["jobs"]}),console.log("evaluate response",f)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:zv.formWrapper,children:[Y.jsxs("div",{className:zv.newEvaluationTitle,children:[Y.jsx("h2",{children:"New model evaluation"}),Y.jsx(sn,{icon:Y.jsx(b1,{}),onClick:i})]}),Y.jsx(il,{autoComplete:"",label:"Evaluation name",value:n,onChange:f=>s(f.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),Y.jsx(DW,{datasetId:e}),Y.jsx(pA,{selectedModel:l,setSelectedModel:u}),Y.jsx("div",{className:zv.buttons,children:Y.jsx(sn,{primary:!0,icon:Y.jsx(fx,{}),onClick:p,disabled:!r,children:"Evaluate"})})]})})},gY=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return Y.jsx("div",{children:Y.jsx(C_,{open:i,onClose:()=>e(!1),direction:"right",size:n,children:Y.jsx("div",{className:CW.drawerWrapper,children:Y.jsx(mY,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},fA=({evaluationId:i})=>{const[e,t]=Fe.useState(""),[n,s]=Fe.useState([]),[l,u]=Fe.useState(),[r,p]=Fe.useState(),[f,m]=Fe.useState(""),[v,y]=Fe.useState(""),[_,b]=Fe.useState(!1),{orgUnits:C}=dA();Fe.useEffect(()=>{if(C&&r){const A=XU(r.predictions,r.actualCases.data,"");A.forEach(D=>{D.evaluation.forEach(T=>{const k=C==null?void 0:C.organisationUnits.find(N=>N.id===T.orgUnitId);k&&(T.orgUnitName=k.displayName)})}),u(A),s(QU(r.predictions))}},[C,r]);const E=async A=>(await Ms.getBacktestsCrudBacktestsGet()).find(T=>T.id===Number(A)),S=async A=>(await Ms.listModelsCrudModelsGet()).find(T=>T.name===A),x=async()=>{b(!0);const A=[.1,.25,.5,.75,.9];try{const[D,T,k]=await Promise.all([E(i),Bh.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,A),Bh.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!D)throw new Error("Evaluation info not found");m(D.name??"");const N=await S(D.modelId);y((N==null?void 0:N.displayName)??""),p({predictions:T,actualCases:k})}catch(D){t(D.toString())}finally{b(!1)}};return Fe.useEffect(()=>{x()},[]),Y.jsxs("div",{children:[e&&Y.jsx("p",{children:"Not available"}),_&&Y.jsx("p",{children:"Loading.."}),l&&Y.jsx($G,{evaluationName:f,modelName:v,evaluations:l,splitPeriods:n})]})},yY=({jobResults:i})=>{const[e,t]=Fe.useState(!1),[n,s]=Fe.useState(void 0),[l,u]=Fe.useState(!1),[r,p]=Fe.useState(!1),[f,m]=Fe.useState(void 0),[v,y]=Fe.useState(void 0),[_,b]=Fe.useState(!1),[C,E]=Fe.useState(void 0),S=k=>{t(!0),s(k)},x=k=>{p(!0),m(k)},A=k=>{b(!0),E(k)},D=k=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");const W=k.result;if(W)k.type=="dataset"?Ms.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(W)):k.type=="evaluation"?Ms.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(W)):k.type=="prediction"&&Ms.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(W));else{const Z=k.id;od.deleteJobJobsJobIdDelete(Z)}}},T=k=>{console.log("clicked evaluate dataset id",k),y(k),u(!0)};return Y.jsxs(Y.Fragment,{children:[i.map((k,N)=>Y.jsx(xW,{i:N,jobResult:k,onClickEvaluateDataset:T,onClickViewEvaluation:x,onClickImport:S,onClickRemove:D,onClickViewLogs:A},N)),e&&Y.jsx(rW,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:n}),Y.jsx(gY,{isOpen:l,setIsOpen:u,datasetIdToEvaluate:v}),r&&f&&Y.jsx(Do,{className:wc.evaluationModal,onClose:()=>{p(!1)},children:Y.jsx(fA,{evaluationId:f})}),_&&Y.jsx(Do,{className:wc.jobLogsModal,onClose:()=>{b(!1)},children:Y.jsx(_W,{jobId:C})})]})},xY=()=>Y.jsx("div",{children:Y.jsxs("div",{className:[wc.jobResultPanelContainer,wc.resultTextHeader].join(" "),children:[Y.jsx("div",{className:wc.flexMedium,children:"Name:"}),Y.jsx("div",{className:wc.flexMedium,children:"Created:"}),Y.jsx("div",{className:wc.flexMedium,children:"Status:"}),Y.jsx("div",{className:wc.flexItemRight})]})}),vY="_noticeBox_18bg1_1",bY="_details_18bg1_8",_Y="_button_18bg1_14",jv={noticeBox:vY,details:bY,button:_Y},wT=({error:i,type:e})=>{const[t,n]=Fe.useState(!1);return i==null?Y.jsx(Y.Fragment,{}):Y.jsx("div",{children:Y.jsxs(yo,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:jv.noticeBox,children:[Y.jsx("div",{className:jv.button,children:Y.jsx(sn,{small:!0,onClick:()=>n(!t),children:t?"Hide details":"See details"})}),t&&Y.jsx("div",{className:jv.details,children:Y.jsx("div",{children:i})})]})})},wY="_loaderWrapper_iu471_1",CY="_textLoad_iu471_8",TY="_loader_iu471_1",Ov={loaderWrapper:wY,textLoad:CY,loader:TY},SY=({type:i})=>Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:Ov.loaderWrapper,children:Y.jsx("div",{className:Ov.loader,children:Y.jsx(Ea,{})})}),Y.jsx("p",{className:Ov.textLoad,children:Y.jsxs("i",{children:["Loading ",i]})})]}),EY="_text_3x5i9_1",kY={text:EY},AY=({type:i})=>Y.jsxs("div",{className:kY.text,children:["No ",i," found"]}),a1=({type:i})=>{const[e,t]=Fe.useState([]),[n,s]=Fe.useState([]),[l,u]=Fe.useState([]),[r,p]=Fe.useState([]),[f,m]=Fe.useState([]),[v,y]=Fe.useState(),[_,b]=Fe.useState(),[C,E]=Fe.useState(!0),S=async k=>{for(let N=0;N<5;N++)try{const W=await k;return b(void 0),W}catch(W){if(N===4)return b((W==null?void 0:W.message)??`Couldn't fetch ${i}`),[]}},x=()=>{switch(i){case"predictions":return S(Ms.getPredictionsCrudPredictionsGet()).then(k=>s(k));case"datasets":return S(Ms.getDatasetsCrudDatasetsGet()).then(k=>u(k));case"evaluations":return S(Ms.getBacktestsCrudBacktestsGet()).then(k=>p(k))}},A=async()=>{let k=[];for(let N=0;N<6;N++)try{k=await od.listJobsJobsGet();break}catch(W){if(N===2)return y((W==null?void 0:W.message)??"Couldn't fetch jobs"),[]}return y(void 0),k},D=()=>{const k=[];l.filter(Z=>Z.type=="evaluation").forEach(Z=>{k.push({id:"Unknown",name:Z.name,created:new Date(Z.created??""),type:"dataset",status:"SUCCESS",result:Z.id.toString()})}),r.forEach(Z=>{k.push({id:"Unknown",name:Z.name??"",created:new Date(Z.created??""),type:"evaluation",status:"SUCCESS",result:Z.id.toString()})}),n.forEach(Z=>{k.push({id:"Unknown",name:Z.name,created:new Date(Z.created),type:"prediction",status:"SUCCESS",result:Z.id.toString(),datasetId:Z.datasetId,estimatorId:Z.modelId,nPeriods:Z.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},W={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Z=>Z.status!="SUCCESS"&&Z.type==N[i]).forEach(Z=>{k.push({id:Z.id,name:Z.name,created:new Date(Z.start_time),type:W[i],status:Z.status})}),k.sort((Z,K)=>K.created.getTime()-Z.created.getTime()),k},T=async()=>{await x();const k=await A();t(k),E(!1)};return Fe.useEffect(()=>{T()},[]),hA(T,5e3),Fe.useEffect(()=>{m(D())},[e,n,r,l]),Y.jsxs("div",{children:[Y.jsx(wT,{error:v,type:"jobs"}),Y.jsx(wT,{error:_,type:i}),C&&Y.jsx(SY,{type:i}),f.length>0&&Y.jsx(xY,{}),f.length==0&&!C&&Y.jsx(AY,{type:i}),Y.jsx(yY,{jobResults:f})]})},MY=()=>{const[i,e]=Fe.useState(!1),t=()=>{e(!1)};return Y.jsxs("div",{children:[Y.jsx(Uh,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),Y.jsx(a1,{type:"datasets"}),Y.jsx(xq,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),Y.jsx(Uh,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),Y.jsx(a1,{type:"evaluations"})]})},PY=()=>Y.jsx(MY,{}),mA=({route:i})=>{const{data:e,error:t,isLoading:n}=Gl({queryKey:["modelTemplates",i==null?void 0:i.url],queryFn:()=>Ms.listModelTemplatesCrudModelTemplatesGet(),enabled:!!i,retry:0});return{modelTemplates:e,error:t,isLoading:n}},gA=({query:i,queryKey:e,...t})=>{const n=Wh();return Gl({queryKey:e,queryFn:async()=>(await n.query({apiDataQuery:i})).apiDataQuery,...t})},IY={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},eu=()=>{const{data:i,error:e,isLoading:t,isError:n}=gA({queryKey:["routes","chap"],query:IY,select:s=>s.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:n}},DY="_loadingContainer_p70tz_1",RY="_errorContainer_p70tz_8",LY="_emptyContainer_p70tz_16",NY="_dataContainer_p70tz_23",zY="_configuredModelContainer_p70tz_38",Fv={loadingContainer:DY,errorContainer:RY,emptyContainer:LY,dataContainer:NY,configuredModelContainer:zY};var Lm=i=>i.type==="checkbox",Vu=i=>i instanceof Date,fa=i=>i==null;const yA=i=>typeof i=="object";var ts=i=>!fa(i)&&!Array.isArray(i)&&yA(i)&&!Vu(i),xA=i=>ts(i)&&i.target?Lm(i.target)?i.target.checked:i.target.value:i,jY=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,vA=(i,e)=>i.has(jY(e)),OY=i=>{const e=i.constructor&&i.constructor.prototype;return ts(e)&&e.hasOwnProperty("isPrototypeOf")},B_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Rr(i){let e;const t=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(B_&&(i instanceof Blob||n))&&(t||ts(i)))if(e=t?[]:{},!t&&!OY(i))e=i;else for(const s in i)i.hasOwnProperty(s)&&(e[s]=Rr(i[s]));else return i;return e}var Nm=i=>Array.isArray(i)?i.filter(Boolean):[],_r=i=>i===void 0,ri=(i,e,t)=>{if(!e||!ts(i))return t;const n=Nm(e.split(/[,[\].]+?/)).reduce((s,l)=>fa(s)?s:s[l],i);return _r(n)||n===i?_r(i[e])?t:i[e]:n},Za=i=>typeof i=="boolean",$_=i=>/^\w*$/.test(i),bA=i=>Nm(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Wn=(i,e,t)=>{let n=-1;const s=$_(e)?[e]:bA(e),l=s.length,u=l-1;for(;++n<l;){const r=s[n];let p=t;if(n!==u){const f=i[r];p=ts(f)||Array.isArray(f)?f:isNaN(+s[n+1])?{}:[]}if(r==="__proto__"||r==="constructor"||r==="prototype")return;i[r]=p,i=i[r]}};const Xy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},po={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ll={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},FY=pe.createContext(null),Xx=()=>pe.useContext(FY);var _A=(i,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const l in i)Object.defineProperty(s,l,{get:()=>{const u=l;return e._proxyFormState[u]!==po.all&&(e._proxyFormState[u]=!n||po.all),t&&(t[u]=!0),i[u]}});return s};const U_=typeof window<"u"?Fe.useLayoutEffect:Fe.useEffect;function BY(i){const e=Xx(),{control:t=e.control,disabled:n,name:s,exact:l}=i,[u,r]=pe.useState(t._formState),p=pe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return U_(()=>t._subscribe({name:s,formState:p.current,exact:l,callback:f=>{!n&&r({...t._formState,...f})}}),[s,n,l]),pe.useEffect(()=>{p.current.isValid&&t._setValid(!0)},[t]),pe.useMemo(()=>_A(u,t,p.current,!1),[u,t])}var tl=i=>typeof i=="string",wA=(i,e,t,n,s)=>tl(i)?(n&&e.watch.add(i),ri(t,i,s)):Array.isArray(i)?i.map(l=>(n&&e.watch.add(l),ri(t,l))):(n&&(e.watchAll=!0),t);function CA(i){const e=Xx(),{control:t=e.control,name:n,defaultValue:s,disabled:l,exact:u}=i||{},r=pe.useRef(s),[p,f]=pe.useState(t._getWatch(n,r.current));return U_(()=>t._subscribe({name:n,formState:{values:!0},exact:u,callback:m=>!l&&f(wA(n,t._names,m.values||t._formValues,!1,r.current))}),[n,t,l,u]),pe.useEffect(()=>t._removeUnmounted()),p}function $Y(i){const e=Xx(),{name:t,disabled:n,control:s=e.control,shouldUnregister:l}=i,u=vA(s._names.array,t),r=CA({control:s,name:t,defaultValue:ri(s._formValues,t,ri(s._defaultValues,t,i.defaultValue)),exact:!0}),p=BY({control:s,name:t,exact:!0}),f=pe.useRef(i),m=pe.useRef(s.register(t,{...i.rules,value:r,...Za(i.disabled)?{disabled:i.disabled}:{}})),v=pe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ri(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!ri(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!ri(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!ri(p.validatingFields,t)},error:{enumerable:!0,get:()=>ri(p.errors,t)}}),[p,t]),y=pe.useCallback(E=>m.current.onChange({target:{value:xA(E),name:t},type:Xy.CHANGE}),[t]),_=pe.useCallback(()=>m.current.onBlur({target:{value:ri(s._formValues,t),name:t},type:Xy.BLUR}),[t,s._formValues]),b=pe.useCallback(E=>{const S=ri(s._fields,t);S&&E&&(S._f.ref=E)},[s._fields,t]),C=pe.useMemo(()=>({name:t,value:r,...Za(n)||p.disabled?{disabled:p.disabled||n}:{},onChange:y,onBlur:_,ref:b}),[t,n,p.disabled,y,_,b,r]);return pe.useEffect(()=>{const E=s._options.shouldUnregister||l;s.register(t,{...f.current.rules,...Za(f.current.disabled)?{disabled:f.current.disabled}:{}});const S=(x,A)=>{const D=ri(s._fields,x);D&&D._f&&(D._f.mount=A)};if(S(t,!0),E){const x=Rr(ri(s._options.defaultValues,t));Wn(s._defaultValues,t,x),_r(ri(s._formValues,t))&&Wn(s._formValues,t,x)}return!u&&s.register(t),()=>{(u?E&&!s._state.action:E)?s.unregister(t):S(t,!1)}},[t,s,u,l]),pe.useEffect(()=>{s._setDisabledField({disabled:n,name:t})},[n,t,s]),pe.useMemo(()=>({field:C,formState:p,fieldState:v}),[C,p,v])}const Ic=i=>i.render($Y(i));var TA=(i,e,t,n,s)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[n]:s||!0}}:{},Na=i=>Array.isArray(i)?i:[i],CT=()=>{let i=[];return{get observers(){return i},next:s=>{for(const l of i)l.next&&l.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(l=>l!==s)}}),unsubscribe:()=>{i=[]}}},o1=i=>fa(i)||!yA(i);function Sc(i,e){if(o1(i)||o1(e))return i===e;if(Vu(i)&&Vu(e))return i.getTime()===e.getTime();const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const l=i[s];if(!n.includes(s))return!1;if(s!=="ref"){const u=e[s];if(Vu(l)&&Vu(u)||ts(l)&&ts(u)||Array.isArray(l)&&Array.isArray(u)?!Sc(l,u):l!==u)return!1}}return!0}var Js=i=>ts(i)&&!Object.keys(i).length,V_=i=>i.type==="file",ko=i=>typeof i=="function",Ky=i=>{if(!B_)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},SA=i=>i.type==="select-multiple",G_=i=>i.type==="radio",UY=i=>G_(i)||Lm(i),Bv=i=>Ky(i)&&i.isConnected;function VY(i,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)i=_r(i)?n++:i[e[n++]];return i}function GY(i){for(const e in i)if(i.hasOwnProperty(e)&&!_r(i[e]))return!1;return!0}function ss(i,e){const t=Array.isArray(e)?e:$_(e)?[e]:bA(e),n=t.length===1?i:VY(i,t),s=t.length-1,l=t[s];return n&&delete n[l],s!==0&&(ts(n)&&Js(n)||Array.isArray(n)&&GY(n))&&ss(i,t.slice(0,-1)),i}var EA=i=>{for(const e in i)if(ko(i[e]))return!0;return!1};function Qy(i,e={}){const t=Array.isArray(i);if(ts(i)||t)for(const n in i)Array.isArray(i[n])||ts(i[n])&&!EA(i[n])?(e[n]=Array.isArray(i[n])?[]:{},Qy(i[n],e[n])):fa(i[n])||(e[n]=!0);return e}function kA(i,e,t){const n=Array.isArray(i);if(ts(i)||n)for(const s in i)Array.isArray(i[s])||ts(i[s])&&!EA(i[s])?_r(e)||o1(t[s])?t[s]=Array.isArray(i[s])?Qy(i[s],[]):{...Qy(i[s])}:kA(i[s],fa(e)?{}:e[s],t[s]):t[s]=!Sc(i[s],e[s]);return t}var ff=(i,e)=>kA(i,e,Qy(e));const TT={value:!1,isValid:!1},ST={value:!0,isValid:!0};var AA=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!_r(i[0].attributes.value)?_r(i[0].value)||i[0].value===""?ST:{value:i[0].value,isValid:!0}:ST:TT}return TT},MA=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>_r(i)?i:e?i===""?NaN:i&&+i:t&&tl(i)?new Date(i):n?n(i):i;const ET={isValid:!1,value:null};var PA=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ET):ET;function kT(i){const e=i.ref;return V_(e)?e.files:G_(e)?PA(i.refs).value:SA(e)?[...e.selectedOptions].map(({value:t})=>t):Lm(e)?AA(i.refs).value:MA(_r(e.value)?i.ref.value:e.value,i)}var HY=(i,e,t,n)=>{const s={};for(const l of i){const u=ri(e,l);u&&Wn(s,l,u._f)}return{criteriaMode:t,names:[...i],fields:s,shouldUseNativeValidation:n}},Jy=i=>i instanceof RegExp,mf=i=>_r(i)?i:Jy(i)?i.source:ts(i)?Jy(i.value)?i.value.source:i.value:i,Ch=i=>({isOnSubmit:!i||i===po.onSubmit,isOnBlur:i===po.onBlur,isOnChange:i===po.onChange,isOnAll:i===po.all,isOnTouch:i===po.onTouched});const AT="AsyncFunction";var qY=i=>!!i&&!!i.validate&&!!(ko(i.validate)&&i.validate.constructor.name===AT||ts(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===AT)),WY=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),l1=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const Ih=(i,e,t,n)=>{for(const s of t||Object.keys(i)){const l=ri(i,s);if(l){const{_f:u,...r}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],s)&&!n)return!0;if(u.ref&&e(u.ref,u.name)&&!n)return!0;if(Ih(r,e))break}else if(ts(r)&&Ih(r,e))break}}};function MT(i,e,t){const n=ri(i,t);if(n||$_(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const l=s.join("."),u=ri(e,l),r=ri(i,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(r&&r.type)return{name:l,error:r};s.pop()}return{name:t}}var YY=(i,e,t,n)=>{t(i);const{name:s,...l}=i;return Js(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!n||po.all))},ZY=(i,e,t)=>!i||!e||i===e||Na(i).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),XY=(i,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||i):(t?n.isOnBlur:s.isOnBlur)?!i:(t?n.isOnChange:s.isOnChange)?i:!0,KY=(i,e)=>!Nm(ri(i,e)).length&&ss(i,e),IA=(i,e,t)=>{const n=Na(ri(i,t));return Wn(n,"root",e[t]),Wn(i,t,n),i},Sy=i=>tl(i);function PT(i,e,t="validate"){if(Sy(i)||Array.isArray(i)&&i.every(Sy)||Za(i)&&!i)return{type:t,message:Sy(i)?i:"",ref:e}}var mh=i=>ts(i)&&!Jy(i)?i:{value:i,message:""},c1=async(i,e,t,n,s,l)=>{const{ref:u,refs:r,required:p,maxLength:f,minLength:m,min:v,max:y,pattern:_,validate:b,name:C,valueAsNumber:E,mount:S}=i._f,x=ri(t,C);if(!S||e.has(C))return{};const A=r?r[0]:u,D=V=>{s&&A.reportValidity&&(A.setCustomValidity(Za(V)?"":V||""),A.reportValidity())},T={},k=G_(u),N=Lm(u),W=k||N,Z=(E||V_(u))&&_r(u.value)&&_r(x)||Ky(u)&&u.value===""||x===""||Array.isArray(x)&&!x.length,K=TA.bind(null,C,n,T),j=(V,$,L,R=Ll.maxLength,G=Ll.minLength)=>{const U=V?$:L;T[C]={type:V?R:G,message:U,ref:u,...K(V?R:G,U)}};if(l?!Array.isArray(x)||!x.length:p&&(!W&&(Z||fa(x))||Za(x)&&!x||N&&!AA(r).isValid||k&&!PA(r).isValid)){const{value:V,message:$}=Sy(p)?{value:!!p,message:p}:mh(p);if(V&&(T[C]={type:Ll.required,message:$,ref:A,...K(Ll.required,$)},!n))return D($),T}if(!Z&&(!fa(v)||!fa(y))){let V,$;const L=mh(y),R=mh(v);if(!fa(x)&&!isNaN(x)){const G=u.valueAsNumber||x&&+x;fa(L.value)||(V=G>L.value),fa(R.value)||($=G<R.value)}else{const G=u.valueAsDate||new Date(x),U=q=>new Date(new Date().toDateString()+" "+q),B=u.type=="time",H=u.type=="week";tl(L.value)&&x&&(V=B?U(x)>U(L.value):H?x>L.value:G>new Date(L.value)),tl(R.value)&&x&&($=B?U(x)<U(R.value):H?x<R.value:G<new Date(R.value))}if((V||$)&&(j(!!V,L.message,R.message,Ll.max,Ll.min),!n))return D(T[C].message),T}if((f||m)&&!Z&&(tl(x)||l&&Array.isArray(x))){const V=mh(f),$=mh(m),L=!fa(V.value)&&x.length>+V.value,R=!fa($.value)&&x.length<+$.value;if((L||R)&&(j(L,V.message,$.message),!n))return D(T[C].message),T}if(_&&!Z&&tl(x)){const{value:V,message:$}=mh(_);if(Jy(V)&&!x.match(V)&&(T[C]={type:Ll.pattern,message:$,ref:u,...K(Ll.pattern,$)},!n))return D($),T}if(b){if(ko(b)){const V=await b(x,t),$=PT(V,A);if($&&(T[C]={...$,...K(Ll.validate,$.message)},!n))return D($.message),T}else if(ts(b)){let V={};for(const $ in b){if(!Js(V)&&!n)break;const L=PT(await b[$](x,t),A,$);L&&(V={...L,...K($,L.message)},D(L.message),n&&(T[C]=V))}if(!Js(V)&&(T[C]={ref:A,...V},!n))return T}}return D(!0),T};const QY={mode:po.onSubmit,reValidateMode:po.onChange,shouldFocusError:!0};function JY(i={}){let e={...QY,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ko(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=ts(e.defaultValues)||ts(e.values)?Rr(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Rr(s),u={action:!1,mount:!1,watch:!1},r={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...m};const y={array:CT(),state:CT()},_=Ch(e.mode),b=Ch(e.reValidateMode),C=e.criteriaMode===po.all,E=Ae=>ye=>{clearTimeout(f),f=setTimeout(Ae,ye)},S=async Ae=>{if(!e.disabled&&(m.isValid||v.isValid||Ae)){const ye=e.resolver?Js((await Z()).errors):await j(n,!0);ye!==t.isValid&&y.state.next({isValid:ye})}},x=(Ae,ye)=>{!e.disabled&&(m.isValidating||m.validatingFields||v.isValidating||v.validatingFields)&&((Ae||Array.from(r.mount)).forEach(ge=>{ge&&(ye?Wn(t.validatingFields,ge,ye):ss(t.validatingFields,ge))}),y.state.next({validatingFields:t.validatingFields,isValidating:!Js(t.validatingFields)}))},A=(Ae,ye=[],ge,Me,De=!0,Pe=!0)=>{if(Me&&ge&&!e.disabled){if(u.action=!0,Pe&&Array.isArray(ri(n,Ae))){const $e=ge(ri(n,Ae),Me.argA,Me.argB);De&&Wn(n,Ae,$e)}if(Pe&&Array.isArray(ri(t.errors,Ae))){const $e=ge(ri(t.errors,Ae),Me.argA,Me.argB);De&&Wn(t.errors,Ae,$e),KY(t.errors,Ae)}if((m.touchedFields||v.touchedFields)&&Pe&&Array.isArray(ri(t.touchedFields,Ae))){const $e=ge(ri(t.touchedFields,Ae),Me.argA,Me.argB);De&&Wn(t.touchedFields,Ae,$e)}(m.dirtyFields||v.dirtyFields)&&(t.dirtyFields=ff(s,l)),y.state.next({name:Ae,isDirty:$(Ae,ye),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Wn(l,Ae,ye)},D=(Ae,ye)=>{Wn(t.errors,Ae,ye),y.state.next({errors:t.errors})},T=Ae=>{t.errors=Ae,y.state.next({errors:t.errors,isValid:!1})},k=(Ae,ye,ge,Me)=>{const De=ri(n,Ae);if(De){const Pe=ri(l,Ae,_r(ge)?ri(s,Ae):ge);_r(Pe)||Me&&Me.defaultChecked||ye?Wn(l,Ae,ye?Pe:kT(De._f)):G(Ae,Pe),u.mount&&S()}},N=(Ae,ye,ge,Me,De)=>{let Pe=!1,$e=!1;const Ke={name:Ae};if(!e.disabled){if(!ge||Me){(m.isDirty||v.isDirty)&&($e=t.isDirty,t.isDirty=Ke.isDirty=$(),Pe=$e!==Ke.isDirty);const tt=Sc(ri(s,Ae),ye);$e=!!ri(t.dirtyFields,Ae),tt?ss(t.dirtyFields,Ae):Wn(t.dirtyFields,Ae,!0),Ke.dirtyFields=t.dirtyFields,Pe=Pe||(m.dirtyFields||v.dirtyFields)&&$e!==!tt}if(ge){const tt=ri(t.touchedFields,Ae);tt||(Wn(t.touchedFields,Ae,ge),Ke.touchedFields=t.touchedFields,Pe=Pe||(m.touchedFields||v.touchedFields)&&tt!==ge)}Pe&&De&&y.state.next(Ke)}return Pe?Ke:{}},W=(Ae,ye,ge,Me)=>{const De=ri(t.errors,Ae),Pe=(m.isValid||v.isValid)&&Za(ye)&&t.isValid!==ye;if(e.delayError&&ge?(p=E(()=>D(Ae,ge)),p(e.delayError)):(clearTimeout(f),p=null,ge?Wn(t.errors,Ae,ge):ss(t.errors,Ae)),(ge?!Sc(De,ge):De)||!Js(Me)||Pe){const $e={...Me,...Pe&&Za(ye)?{isValid:ye}:{},errors:t.errors,name:Ae};t={...t,...$e},y.state.next($e)}},Z=async Ae=>{x(Ae,!0);const ye=await e.resolver(l,e.context,HY(Ae||r.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return x(Ae),ye},K=async Ae=>{const{errors:ye}=await Z(Ae);if(Ae)for(const ge of Ae){const Me=ri(ye,ge);Me?Wn(t.errors,ge,Me):ss(t.errors,ge)}else t.errors=ye;return ye},j=async(Ae,ye,ge={valid:!0})=>{for(const Me in Ae){const De=Ae[Me];if(De){const{_f:Pe,...$e}=De;if(Pe){const Ke=r.array.has(Pe.name),tt=De._f&&qY(De._f);tt&&m.validatingFields&&x([Me],!0);const nt=await c1(De,r.disabled,l,C,e.shouldUseNativeValidation&&!ye,Ke);if(tt&&m.validatingFields&&x([Me]),nt[Pe.name]&&(ge.valid=!1,ye))break;!ye&&(ri(nt,Pe.name)?Ke?IA(t.errors,nt,Pe.name):Wn(t.errors,Pe.name,nt[Pe.name]):ss(t.errors,Pe.name))}!Js($e)&&await j($e,ye,ge)}}return ge.valid},V=()=>{for(const Ae of r.unMount){const ye=ri(n,Ae);ye&&(ye._f.refs?ye._f.refs.every(ge=>!Bv(ge)):!Bv(ye._f.ref))&&ee(Ae)}r.unMount=new Set},$=(Ae,ye)=>!e.disabled&&(Ae&&ye&&Wn(l,Ae,ye),!Sc(fe(),s)),L=(Ae,ye,ge)=>wA(Ae,r,{...u.mount?l:_r(ye)?s:tl(Ae)?{[Ae]:ye}:ye},ge,ye),R=Ae=>Nm(ri(u.mount?l:s,Ae,e.shouldUnregister?ri(s,Ae,[]):[])),G=(Ae,ye,ge={})=>{const Me=ri(n,Ae);let De=ye;if(Me){const Pe=Me._f;Pe&&(!Pe.disabled&&Wn(l,Ae,MA(ye,Pe)),De=Ky(Pe.ref)&&fa(ye)?"":ye,SA(Pe.ref)?[...Pe.ref.options].forEach($e=>$e.selected=De.includes($e.value)):Pe.refs?Lm(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach($e=>(!$e.defaultChecked||!$e.disabled)&&($e.checked=Array.isArray(De)?!!De.find(Ke=>Ke===$e.value):De===$e.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!De):Pe.refs.forEach($e=>$e.checked=$e.value===De):V_(Pe.ref)?Pe.ref.value="":(Pe.ref.value=De,Pe.ref.type||y.state.next({name:Ae,values:Rr(l)})))}(ge.shouldDirty||ge.shouldTouch)&&N(Ae,De,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&ae(Ae)},U=(Ae,ye,ge)=>{for(const Me in ye){const De=ye[Me],Pe=`${Ae}.${Me}`,$e=ri(n,Pe);(r.array.has(Ae)||ts(De)||$e&&!$e._f)&&!Vu(De)?U(Pe,De,ge):G(Pe,De,ge)}},B=(Ae,ye,ge={})=>{const Me=ri(n,Ae),De=r.array.has(Ae),Pe=Rr(ye);Wn(l,Ae,Pe),De?(y.array.next({name:Ae,values:Rr(l)}),(m.isDirty||m.dirtyFields||v.isDirty||v.dirtyFields)&&ge.shouldDirty&&y.state.next({name:Ae,dirtyFields:ff(s,l),isDirty:$(Ae,Pe)})):Me&&!Me._f&&!fa(Pe)?U(Ae,Pe,ge):G(Ae,Pe,ge),l1(Ae,r)&&y.state.next({...t}),y.state.next({name:u.mount?Ae:void 0,values:Rr(l)})},H=async Ae=>{u.mount=!0;const ye=Ae.target;let ge=ye.name,Me=!0;const De=ri(n,ge),Pe=$e=>{Me=Number.isNaN($e)||Vu($e)&&isNaN($e.getTime())||Sc($e,ri(l,ge,$e))};if(De){let $e,Ke;const tt=ye.type?kT(De._f):xA(Ae),nt=Ae.type===Xy.BLUR||Ae.type===Xy.FOCUS_OUT,ht=!WY(De._f)&&!e.resolver&&!ri(t.errors,ge)&&!De._f.deps||XY(nt,ri(t.touchedFields,ge),t.isSubmitted,b,_),gt=l1(ge,r,nt);Wn(l,ge,tt),nt?(De._f.onBlur&&De._f.onBlur(Ae),p&&p(0)):De._f.onChange&&De._f.onChange(Ae);const Ct=N(ge,tt,nt),Lt=!Js(Ct)||gt;if(!nt&&y.state.next({name:ge,type:Ae.type,values:Rr(l)}),ht)return(m.isValid||v.isValid)&&(e.mode==="onBlur"?nt&&S():nt||S()),Lt&&y.state.next({name:ge,...gt?{}:Ct});if(!nt&&gt&&y.state.next({...t}),e.resolver){const{errors:ft}=await Z([ge]);if(Pe(tt),Me){const Et=MT(t.errors,n,ge),Tt=MT(ft,n,Et.name||ge);$e=Tt.error,ge=Tt.name,Ke=Js(ft)}}else x([ge],!0),$e=(await c1(De,r.disabled,l,C,e.shouldUseNativeValidation))[ge],x([ge]),Pe(tt),Me&&($e?Ke=!1:(m.isValid||v.isValid)&&(Ke=await j(n,!0)));Me&&(De._f.deps&&ae(De._f.deps),W(ge,Ke,$e,Ct))}},q=(Ae,ye)=>{if(ri(t.errors,ye)&&Ae.focus)return Ae.focus(),1},ae=async(Ae,ye={})=>{let ge,Me;const De=Na(Ae);if(e.resolver){const Pe=await K(_r(Ae)?Ae:De);ge=Js(Pe),Me=Ae?!De.some($e=>ri(Pe,$e)):ge}else Ae?(Me=(await Promise.all(De.map(async Pe=>{const $e=ri(n,Pe);return await j($e&&$e._f?{[Pe]:$e}:$e)}))).every(Boolean),!(!Me&&!t.isValid)&&S()):Me=ge=await j(n);return y.state.next({...!tl(Ae)||(m.isValid||v.isValid)&&ge!==t.isValid?{}:{name:Ae},...e.resolver||!Ae?{isValid:ge}:{},errors:t.errors}),ye.shouldFocus&&!Me&&Ih(n,q,Ae?De:r.mount),Me},fe=Ae=>{const ye={...u.mount?l:s};return _r(Ae)?ye:tl(Ae)?ri(ye,Ae):Ae.map(ge=>ri(ye,ge))},re=(Ae,ye)=>({invalid:!!ri((ye||t).errors,Ae),isDirty:!!ri((ye||t).dirtyFields,Ae),error:ri((ye||t).errors,Ae),isValidating:!!ri(t.validatingFields,Ae),isTouched:!!ri((ye||t).touchedFields,Ae)}),ce=Ae=>{Ae&&Na(Ae).forEach(ye=>ss(t.errors,ye)),y.state.next({errors:Ae?t.errors:{}})},ke=(Ae,ye,ge)=>{const Me=(ri(n,Ae,{_f:{}})._f||{}).ref,De=ri(t.errors,Ae)||{},{ref:Pe,message:$e,type:Ke,...tt}=De;Wn(t.errors,Ae,{...tt,...ye,ref:Me}),y.state.next({name:Ae,errors:t.errors,isValid:!1}),ge&&ge.shouldFocus&&Me&&Me.focus&&Me.focus()},ve=(Ae,ye)=>ko(Ae)?y.state.subscribe({next:ge=>Ae(L(void 0,ye),ge)}):L(Ae,ye,!0),Ee=Ae=>y.state.subscribe({next:ye=>{ZY(Ae.name,ye.name,Ae.exact)&&YY(ye,Ae.formState||m,Ie,Ae.reRenderRoot)&&Ae.callback({values:{...l},...t,...ye})}}).unsubscribe,Q=Ae=>(u.mount=!0,v={...v,...Ae.formState},Ee({...Ae,formState:v})),ee=(Ae,ye={})=>{for(const ge of Ae?Na(Ae):r.mount)r.mount.delete(ge),r.array.delete(ge),ye.keepValue||(ss(n,ge),ss(l,ge)),!ye.keepError&&ss(t.errors,ge),!ye.keepDirty&&ss(t.dirtyFields,ge),!ye.keepTouched&&ss(t.touchedFields,ge),!ye.keepIsValidating&&ss(t.validatingFields,ge),!e.shouldUnregister&&!ye.keepDefaultValue&&ss(s,ge);y.state.next({values:Rr(l)}),y.state.next({...t,...ye.keepDirty?{isDirty:$()}:{}}),!ye.keepIsValid&&S()},oe=({disabled:Ae,name:ye})=>{(Za(Ae)&&u.mount||Ae||r.disabled.has(ye))&&(Ae?r.disabled.add(ye):r.disabled.delete(ye))},we=(Ae,ye={})=>{let ge=ri(n,Ae);const Me=Za(ye.disabled)||Za(e.disabled);return Wn(n,Ae,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:Ae}},name:Ae,mount:!0,...ye}}),r.mount.add(Ae),ge?oe({disabled:Za(ye.disabled)?ye.disabled:e.disabled,name:Ae}):k(Ae,!0,ye.value),{...Me?{disabled:ye.disabled||e.disabled}:{},...e.progressive?{required:!!ye.required,min:mf(ye.min),max:mf(ye.max),minLength:mf(ye.minLength),maxLength:mf(ye.maxLength),pattern:mf(ye.pattern)}:{},name:Ae,onChange:H,onBlur:H,ref:De=>{if(De){we(Ae,ye),ge=ri(n,Ae);const Pe=_r(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,$e=UY(Pe),Ke=ge._f.refs||[];if($e?Ke.find(tt=>tt===Pe):Pe===ge._f.ref)return;Wn(n,Ae,{_f:{...ge._f,...$e?{refs:[...Ke.filter(Bv),Pe,...Array.isArray(ri(s,Ae))?[{}]:[]],ref:{type:Pe.type,name:Ae}}:{ref:Pe}}}),k(Ae,!1,void 0,Pe)}else ge=ri(n,Ae,{}),ge._f&&(ge._f.mount=!1),(e.shouldUnregister||ye.shouldUnregister)&&!(vA(r.array,Ae)&&u.action)&&r.unMount.add(Ae)}}},J=()=>e.shouldFocusError&&Ih(n,q,r.mount),se=Ae=>{Za(Ae)&&(y.state.next({disabled:Ae}),Ih(n,(ye,ge)=>{const Me=ri(n,ge);Me&&(ye.disabled=Me._f.disabled||Ae,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(De=>{De.disabled=Me._f.disabled||Ae}))},0,!1))},de=(Ae,ye)=>async ge=>{let Me;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let De=Rr(l);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:$e}=await Z();t.errors=Pe,De=$e}else await j(n);if(r.disabled.size)for(const Pe of r.disabled)Wn(De,Pe,void 0);if(ss(t.errors,"root"),Js(t.errors)){y.state.next({errors:{}});try{await Ae(De,ge)}catch(Pe){Me=Pe}}else ye&&await ye({...t.errors},ge),J(),setTimeout(J);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Js(t.errors)&&!Me,submitCount:t.submitCount+1,errors:t.errors}),Me)throw Me},xe=(Ae,ye={})=>{ri(n,Ae)&&(_r(ye.defaultValue)?B(Ae,Rr(ri(s,Ae))):(B(Ae,ye.defaultValue),Wn(s,Ae,Rr(ye.defaultValue))),ye.keepTouched||ss(t.touchedFields,Ae),ye.keepDirty||(ss(t.dirtyFields,Ae),t.isDirty=ye.defaultValue?$(Ae,Rr(ri(s,Ae))):$()),ye.keepError||(ss(t.errors,Ae),m.isValid&&S()),y.state.next({...t}))},Ce=(Ae,ye={})=>{const ge=Ae?Rr(Ae):s,Me=Rr(ge),De=Js(Ae),Pe=De?s:Me;if(ye.keepDefaultValues||(s=ge),!ye.keepValues){if(ye.keepDirtyValues){const $e=new Set([...r.mount,...Object.keys(ff(s,l))]);for(const Ke of Array.from($e))ri(t.dirtyFields,Ke)?Wn(Pe,Ke,ri(l,Ke)):B(Ke,ri(Pe,Ke))}else{if(B_&&_r(Ae))for(const $e of r.mount){const Ke=ri(n,$e);if(Ke&&Ke._f){const tt=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(Ky(tt)){const nt=tt.closest("form");if(nt){nt.reset();break}}}}for(const $e of r.mount)B($e,ri(Pe,$e))}l=Rr(Pe),y.array.next({values:{...Pe}}),y.state.next({values:{...Pe}})}r={mount:ye.keepDirtyValues?r.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!ye.keepIsValid||!!ye.keepDirtyValues,u.watch=!!e.shouldUnregister,y.state.next({submitCount:ye.keepSubmitCount?t.submitCount:0,isDirty:De?!1:ye.keepDirty?t.isDirty:!!(ye.keepDefaultValues&&!Sc(Ae,s)),isSubmitted:ye.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:De?{}:ye.keepDirtyValues?ye.keepDefaultValues&&l?ff(s,l):t.dirtyFields:ye.keepDefaultValues&&Ae?ff(s,Ae):ye.keepDirty?t.dirtyFields:{},touchedFields:ye.keepTouched?t.touchedFields:{},errors:ye.keepErrors?t.errors:{},isSubmitSuccessful:ye.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ne=(Ae,ye)=>Ce(ko(Ae)?Ae(l):Ae,ye),Te=(Ae,ye={})=>{const ge=ri(n,Ae),Me=ge&&ge._f;if(Me){const De=Me.refs?Me.refs[0]:Me.ref;De.focus&&(De.focus(),ye.shouldSelect&&ko(De.select)&&De.select())}},Ie=Ae=>{t={...t,...Ae}},qe={control:{register:we,unregister:ee,getFieldState:re,handleSubmit:de,setError:ke,_subscribe:Ee,_runSchema:Z,_getWatch:L,_getDirty:$,_setValid:S,_setFieldArray:A,_setDisabledField:oe,_setErrors:T,_getFieldArray:R,_reset:Ce,_resetDefaultValues:()=>ko(e.defaultValues)&&e.defaultValues().then(Ae=>{Ne(Ae,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:se,_subjects:y,_proxyFormState:m,get _fields(){return n},get _formValues(){return l},get _state(){return u},set _state(Ae){u=Ae},get _defaultValues(){return s},get _names(){return r},set _names(Ae){r=Ae},get _formState(){return t},get _options(){return e},set _options(Ae){e={...e,...Ae}}},subscribe:Q,trigger:ae,register:we,handleSubmit:de,watch:ve,setValue:B,getValues:fe,reset:Ne,resetField:xe,clearErrors:ce,unregister:ee,setError:ke,setFocus:Te,getFieldState:re};return{...qe,formControl:qe}}var xc=()=>{const i=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+i)%16|0;return(e=="x"?t:t&3|8).toString(16)})},$v=(i,e,t={})=>t.shouldFocus||_r(t.shouldFocus)?t.focusName||`${i}.${_r(t.focusIndex)?e:t.focusIndex}.`:"",Uv=(i,e)=>[...i,...Na(e)],Vv=i=>Array.isArray(i)?i.map(()=>{}):void 0;function Gv(i,e,t){return[...i.slice(0,e),...Na(t),...i.slice(e)]}var Hv=(i,e,t)=>Array.isArray(i)?(_r(i[t])&&(i[t]=void 0),i.splice(t,0,i.splice(e,1)[0]),i):[],qv=(i,e)=>[...Na(e),...Na(i)];function eZ(i,e){let t=0;const n=[...i];for(const s of e)n.splice(s-t,1),t++;return Nm(n).length?n:[]}var Wv=(i,e)=>_r(e)?[]:eZ(i,Na(e).sort((t,n)=>t-n)),Yv=(i,e,t)=>{[i[e],i[t]]=[i[t],i[e]]},IT=(i,e,t)=>(i[e]=t,i);function tZ(i){const e=Xx(),{control:t=e.control,name:n,keyName:s="id",shouldUnregister:l,rules:u}=i,[r,p]=pe.useState(t._getFieldArray(n)),f=pe.useRef(t._getFieldArray(n).map(xc)),m=pe.useRef(r),v=pe.useRef(n),y=pe.useRef(!1);v.current=n,m.current=r,t._names.array.add(n),u&&t.register(n,u),pe.useEffect(()=>t._subjects.array.subscribe({next:({values:k,name:N})=>{if(N===v.current||!N){const W=ri(k,v.current);Array.isArray(W)&&(p(W),f.current=W.map(xc))}}}).unsubscribe,[t]);const _=pe.useCallback(k=>{y.current=!0,t._setFieldArray(n,k)},[t,n]),b=(k,N)=>{const W=Na(Rr(k)),Z=Uv(t._getFieldArray(n),W);t._names.focus=$v(n,Z.length-1,N),f.current=Uv(f.current,W.map(xc)),_(Z),p(Z),t._setFieldArray(n,Z,Uv,{argA:Vv(k)})},C=(k,N)=>{const W=Na(Rr(k)),Z=qv(t._getFieldArray(n),W);t._names.focus=$v(n,0,N),f.current=qv(f.current,W.map(xc)),_(Z),p(Z),t._setFieldArray(n,Z,qv,{argA:Vv(k)})},E=k=>{const N=Wv(t._getFieldArray(n),k);f.current=Wv(f.current,k),_(N),p(N),!Array.isArray(ri(t._fields,n))&&Wn(t._fields,n,void 0),t._setFieldArray(n,N,Wv,{argA:k})},S=(k,N,W)=>{const Z=Na(Rr(N)),K=Gv(t._getFieldArray(n),k,Z);t._names.focus=$v(n,k,W),f.current=Gv(f.current,k,Z.map(xc)),_(K),p(K),t._setFieldArray(n,K,Gv,{argA:k,argB:Vv(N)})},x=(k,N)=>{const W=t._getFieldArray(n);Yv(W,k,N),Yv(f.current,k,N),_(W),p(W),t._setFieldArray(n,W,Yv,{argA:k,argB:N},!1)},A=(k,N)=>{const W=t._getFieldArray(n);Hv(W,k,N),Hv(f.current,k,N),_(W),p(W),t._setFieldArray(n,W,Hv,{argA:k,argB:N},!1)},D=(k,N)=>{const W=Rr(N),Z=IT(t._getFieldArray(n),k,W);f.current=[...Z].map((K,j)=>!K||j===k?xc():f.current[j]),_(Z),p([...Z]),t._setFieldArray(n,Z,IT,{argA:k,argB:W},!0,!1)},T=k=>{const N=Na(Rr(k));f.current=N.map(xc),_([...N]),p([...N]),t._setFieldArray(n,[...N],W=>W,{},!0,!1)};return pe.useEffect(()=>{if(t._state.action=!1,l1(n,t._names)&&t._subjects.state.next({...t._formState}),y.current&&(!Ch(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!Ch(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([n]).then(k=>{const N=ri(k.errors,n),W=ri(t._formState.errors,n);(W?!N&&W.type||N&&(W.type!==N.type||W.message!==N.message):N&&N.type)&&(N?Wn(t._formState.errors,n,N):ss(t._formState.errors,n),t._subjects.state.next({errors:t._formState.errors}))});else{const k=ri(t._fields,n);k&&k._f&&!(Ch(t._options.reValidateMode).isOnSubmit&&Ch(t._options.mode).isOnSubmit)&&c1(k,t._names.disabled,t._formValues,t._options.criteriaMode===po.all,t._options.shouldUseNativeValidation,!0).then(N=>!Js(N)&&t._subjects.state.next({errors:IA(t._formState.errors,N,n)}))}t._subjects.state.next({name:n,values:Rr(t._formValues)}),t._names.focus&&Ih(t._fields,(k,N)=>{if(t._names.focus&&N.startsWith(t._names.focus)&&k.focus)return k.focus(),1}),t._names.focus="",t._setValid(),y.current=!1},[r,n,t]),pe.useEffect(()=>(!ri(t._formValues,n)&&t._setFieldArray(n),()=>{const k=(N,W)=>{const Z=ri(t._fields,N);Z&&Z._f&&(Z._f.mount=W)};t._options.shouldUnregister||l?t.unregister(n):k(n,!1)}),[n,t,s,l]),{swap:pe.useCallback(x,[_,n,t]),move:pe.useCallback(A,[_,n,t]),prepend:pe.useCallback(C,[_,n,t]),append:pe.useCallback(b,[_,n,t]),remove:pe.useCallback(E,[_,n,t]),insert:pe.useCallback(S,[_,n,t]),update:pe.useCallback(D,[_,n,t]),replace:pe.useCallback(T,[_,n,t]),fields:pe.useMemo(()=>r.map((k,N)=>({...k,[s]:f.current[N]||xc()})),[r,s])}}function H_(i={}){const e=pe.useRef(void 0),t=pe.useRef(void 0),[n,s]=pe.useState({isDirty:!1,isValidating:!1,isLoading:ko(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:ko(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:JY(i),formState:n},i.formControl&&i.defaultValues&&!ko(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const l=e.current.control;return l._options=i,U_(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>s({...l._formState}),reRenderRoot:!0});return s(r=>({...r,isReady:!0})),l._formState.isReady=!0,u},[l]),pe.useEffect(()=>l._disableForm(i.disabled),[l,i.disabled]),pe.useEffect(()=>{i.mode&&(l._options.mode=i.mode),i.reValidateMode&&(l._options.reValidateMode=i.reValidateMode),i.errors&&!Js(i.errors)&&l._setErrors(i.errors)},[l,i.errors,i.mode,i.reValidateMode]),pe.useEffect(()=>{i.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,i.shouldUnregister]),pe.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==n.isDirty&&l._subjects.state.next({isDirty:u})}},[l,n.isDirty]),pe.useEffect(()=>{i.values&&!Sc(i.values,t.current)?(l._reset(i.values,l._options.resetOptions),t.current=i.values,s(u=>({...u}))):l._resetDefaultValues()},[l,i.values]),pe.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=_A(n,l),e.current}const DT=(i,e,t)=>{if(i&&"reportValidity"in i){const n=ri(t,e);i.setCustomValidity(n&&n.message||""),i.reportValidity()}},DA=(i,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?DT(n.ref,t,i):n&&n.refs&&n.refs.forEach(s=>DT(s,t,i))}},iZ=(i,e)=>{e.shouldUseNativeValidation&&DA(i,e);const t={};for(const n in i){const s=ri(e.fields,n),l=Object.assign(i[n]||{},{ref:s&&s.ref});if(nZ(e.names||Object.keys(i),n)){const u=Object.assign({},ri(t,n));Wn(u,"root",l),Wn(t,n,u)}else Wn(t,n,l)}return t},nZ=(i,e)=>{const t=RT(e);return i.some(n=>RT(n).match(`^${t}\\.\\d+`))};function RT(i){return i.replace(/\]|\[/g,"")}function rZ(i,e){for(var t={};i.length;){var n=i[0],s=n.code,l=n.message,u=n.path.join(".");if(!t[u])if("unionErrors"in n){var r=n.unionErrors[0].errors[0];t[u]={message:r.message,type:r.code}}else t[u]={message:l,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(m){return m.errors.forEach(function(v){return i.push(v)})}),e){var p=t[u].types,f=p&&p[n.code];t[u]=TA(u,e,t,s,f?[].concat(f,n.message):n.message)}i.shift()}return t}function q_(i,e,t){return t===void 0&&(t={}),function(n,s,l){try{return Promise.resolve(function(u,r){try{var p=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(f){return l.shouldUseNativeValidation&&DA({},l),{errors:{},values:t.raw?Object.assign({},n):f}})}catch(f){return r(f)}return p&&p.then?p.then(void 0,r):p}(0,function(u){if(function(r){return Array.isArray(r==null?void 0:r.errors)}(u))return{values:{},errors:iZ(rZ(u.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw u}))}catch(u){return Promise.reject(u)}}}var Fn;(function(i){i.assertEqual=s=>s;function e(s){}i.assertIs=e;function t(s){throw new Error}i.assertNever=t,i.arrayToEnum=s=>{const l={};for(const u of s)l[u]=u;return l},i.getValidEnumValues=s=>{const l=i.objectKeys(s).filter(r=>typeof s[s[r]]!="number"),u={};for(const r of l)u[r]=s[r];return i.objectValues(u)},i.objectValues=s=>i.objectKeys(s).map(function(l){return s[l]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&l.push(u);return l},i.find=(s,l)=>{for(const u of s)if(l(u))return u},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,l=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}i.joinValues=n,i.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(Fn||(Fn={}));var u1;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(u1||(u1={}));const Si=Fn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fl=i=>{switch(typeof i){case"undefined":return Si.undefined;case"string":return Si.string;case"number":return isNaN(i)?Si.nan:Si.number;case"boolean":return Si.boolean;case"function":return Si.function;case"bigint":return Si.bigint;case"symbol":return Si.symbol;case"object":return Array.isArray(i)?Si.array:i===null?Si.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Si.promise:typeof Map<"u"&&i instanceof Map?Si.map:typeof Set<"u"&&i instanceof Set?Si.set:typeof Date<"u"&&i instanceof Date?Si.date:Si.object;default:return Si.unknown}},Ht=Fn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sZ=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class io extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},n={_errors:[]},s=l=>{for(const u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)n._errors.push(t(u));else{let r=n,p=0;for(;p<u.path.length;){const f=u.path[p];p===u.path.length-1?(r[f]=r[f]||{_errors:[]},r[f]._errors.push(t(u))):r[f]=r[f]||{_errors:[]},r=r[f],p++}}};return s(this),n}static assert(e){if(!(e instanceof io))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Fn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}io.create=i=>new io(i);const Vh=(i,e)=>{let t;switch(i.code){case Ht.invalid_type:i.received===Si.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Ht.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,Fn.jsonStringifyReplacer)}`;break;case Ht.unrecognized_keys:t=`Unrecognized key(s) in object: ${Fn.joinValues(i.keys,", ")}`;break;case Ht.invalid_union:t="Invalid input";break;case Ht.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Fn.joinValues(i.options)}`;break;case Ht.invalid_enum_value:t=`Invalid enum value. Expected ${Fn.joinValues(i.options)}, received '${i.received}'`;break;case Ht.invalid_arguments:t="Invalid function arguments";break;case Ht.invalid_return_type:t="Invalid function return type";break;case Ht.invalid_date:t="Invalid date";break;case Ht.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:Fn.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Ht.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Ht.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Ht.custom:t="Invalid input";break;case Ht.invalid_intersection_types:t="Intersection results could not be merged";break;case Ht.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Ht.not_finite:t="Number must be finite";break;default:t=e.defaultError,Fn.assertNever(i)}return{message:t}};let RA=Vh;function aZ(i){RA=i}function ex(){return RA}const tx=i=>{const{data:e,path:t,errorMaps:n,issueData:s}=i,l=[...t,...s.path||[]],u={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let r="";const p=n.filter(f=>!!f).slice().reverse();for(const f of p)r=f(u,{data:e,defaultError:r}).message;return{...s,path:l,message:r}},oZ=[];function yi(i,e){const t=ex(),n=tx({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===Vh?void 0:Vh].filter(s=>!!s)});i.common.issues.push(n)}class ia{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return rn;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const l=await s.key,u=await s.value;n.push({key:l,value:u})}return ia.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:l,value:u}=s;if(l.status==="aborted"||u.status==="aborted")return rn;l.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(n[l.value]=u.value)}return{status:e.value,value:n}}}const rn=Object.freeze({status:"aborted"}),Th=i=>({status:"dirty",value:i}),Sa=i=>({status:"valid",value:i}),d1=i=>i.status==="aborted",h1=i=>i.status==="dirty",ld=i=>i.status==="valid",Yf=i=>typeof Promise<"u"&&i instanceof Promise;function ix(i,e,t,n){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function LA(i,e,t,n,s){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var Ri;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ri||(Ri={}));var Cf,Tf;class ul{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const LT=(i,e)=>{if(ld(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new io(i.common.issues);return this._error=t,this._error}}};function xn(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,r)=>{var p,f;const{message:m}=i;return u.code==="invalid_enum_value"?{message:m??r.defaultError}:typeof r.data>"u"?{message:(p=m??n)!==null&&p!==void 0?p:r.defaultError}:u.code!=="invalid_type"?{message:r.defaultError}:{message:(f=m??t)!==null&&f!==void 0?f:r.defaultError}},description:s}}class wn{get description(){return this._def.description}_getType(e){return Fl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ia,ctx:{common:e.parent.common,data:e.data,parsedType:Fl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Yf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fl(e)},l=this._parseSync({data:e,path:s.path,parent:s});return LT(s,l)}"~validate"(e){var t,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fl(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return ld(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((n=(t=l==null?void 0:l.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>ld(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fl(e)},s=this._parse({data:e,path:n.path,parent:n}),l=await(Yf(s)?s:Promise.resolve(s));return LT(n,l)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,l)=>{const u=e(s),r=()=>l.addIssue({code:Ht.custom,...n(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(r(),!1)):u?!0:(r(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new zo({schema:this,typeName:nn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return sl.create(this,this._def)}nullable(){return Hc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Po.create(this)}promise(){return Hh.create(this,this._def)}or(e){return Qf.create([this,e],this._def)}and(e){return Jf.create(this,e,this._def)}transform(e){return new zo({...xn(this._def),schema:this,typeName:nn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new rm({...xn(this._def),innerType:this,defaultValue:t,typeName:nn.ZodDefault})}brand(){return new W_({typeName:nn.ZodBranded,type:this,...xn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new sm({...xn(this._def),innerType:this,catchValue:t,typeName:nn.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return zm.create(this,e)}readonly(){return am.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const lZ=/^c[^\s-]{8,}$/i,cZ=/^[0-9a-z]+$/,uZ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hZ=/^[a-z0-9_-]{21}$/i,pZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,mZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zv;const yZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,vZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_Z=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",CZ=new RegExp(`^${NA}$`);function zA(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function TZ(i){return new RegExp(`^${zA(i)}$`)}function jA(i){let e=`${NA}T${zA(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function SZ(i,e){return!!((e==="v4"||!e)&&yZ.test(i)||(e==="v6"||!e)&&vZ.test(i))}function EZ(i,e){if(!pZ.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function kZ(i,e){return!!((e==="v4"||!e)&&xZ.test(i)||(e==="v6"||!e)&&bZ.test(i))}class Ao extends wn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Si.string){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.string,received:l.parsedType}),rn}const n=new ia;let s;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="max")e.data.length>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="length"){const u=e.data.length>l.value,r=e.data.length<l.value;(u||r)&&(s=this._getOrReturnCtx(e,s),u?yi(s,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&yi(s,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),n.dirty())}else if(l.kind==="email")mZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"email",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="emoji")Zv||(Zv=new RegExp(gZ,"u")),Zv.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"emoji",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="uuid")dZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"uuid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="nanoid")hZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"nanoid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid")lZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid2")cZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid2",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="ulid")uZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ulid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),yi(s,{validation:"url",code:Ht.invalid_string,message:l.message}),n.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"regex",code:Ht.invalid_string,message:l.message}),n.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),n.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{startsWith:l.value},message:l.message}),n.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{endsWith:l.value},message:l.message}),n.dirty()):l.kind==="datetime"?jA(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"datetime",message:l.message}),n.dirty()):l.kind==="date"?CZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"date",message:l.message}),n.dirty()):l.kind==="time"?TZ(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"time",message:l.message}),n.dirty()):l.kind==="duration"?fZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"duration",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="ip"?SZ(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ip",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="jwt"?EZ(e.data,l.alg)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"jwt",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="cidr"?kZ(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cidr",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="base64"?_Z.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="base64url"?wZ.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64url",code:Ht.invalid_string,message:l.message}),n.dirty()):Fn.assertNever(l);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Ht.invalid_string,...Ri.errToObj(n)})}_addCheck(e){return new Ao({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ri.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ri.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ri.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ri.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ri.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ri.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ri.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ri.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ri.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ri.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ri.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ri.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ri.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ri.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ri.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ri.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ri.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ri.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ri.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ri.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ri.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ri.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ri.errToObj(t)})}nonempty(e){return this.min(1,Ri.errToObj(e))}trim(){return new Ao({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ao({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ao({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ao.create=i=>{var e;return new Ao({checks:[],typeName:nn.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...xn(i)})};function AZ(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,l=parseInt(i.toFixed(s).replace(".","")),u=parseInt(e.toFixed(s).replace(".",""));return l%u/Math.pow(10,s)}class Uc extends wn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Si.number){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.number,received:l.parsedType}),rn}let n;const s=new ia;for(const l of this._def.checks)l.kind==="int"?Fn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.invalid_type,expected:"integer",received:"float",message:l.message}),s.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="multipleOf"?AZ(e.data,l.value)!==0&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_finite,message:l.message}),s.dirty()):Fn.assertNever(l);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,n,s){return new Uc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ri.toString(s)}]})}_addCheck(e){return new Uc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ri.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ri.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ri.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ri.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Fn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Uc.create=i=>new Uc({checks:[],typeName:nn.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...xn(i)});class Vc extends wn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Si.bigint)return this._getInvalidInput(e);let n;const s=new ia;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):Fn.assertNever(l);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Si.bigint,received:t.parsedType}),rn}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,n,s){return new Vc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ri.toString(s)}]})}_addCheck(e){return new Vc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Vc.create=i=>{var e;return new Vc({checks:[],typeName:nn.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...xn(i)})};class Zf extends wn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Si.boolean){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.boolean,received:n.parsedType}),rn}return Sa(e.data)}}Zf.create=i=>new Zf({typeName:nn.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...xn(i)});class cd extends wn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Si.date){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.date,received:l.parsedType}),rn}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_date}),rn}const n=new ia;let s;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),n.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),n.dirty()):Fn.assertNever(l);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cd({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ri.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ri.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}cd.create=i=>new cd({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:nn.ZodDate,...xn(i)});class nx extends wn{_parse(e){if(this._getType(e)!==Si.symbol){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.symbol,received:n.parsedType}),rn}return Sa(e.data)}}nx.create=i=>new nx({typeName:nn.ZodSymbol,...xn(i)});class Xf extends wn{_parse(e){if(this._getType(e)!==Si.undefined){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.undefined,received:n.parsedType}),rn}return Sa(e.data)}}Xf.create=i=>new Xf({typeName:nn.ZodUndefined,...xn(i)});class Kf extends wn{_parse(e){if(this._getType(e)!==Si.null){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.null,received:n.parsedType}),rn}return Sa(e.data)}}Kf.create=i=>new Kf({typeName:nn.ZodNull,...xn(i)});class Gh extends wn{constructor(){super(...arguments),this._any=!0}_parse(e){return Sa(e.data)}}Gh.create=i=>new Gh({typeName:nn.ZodAny,...xn(i)});class ed extends wn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Sa(e.data)}}ed.create=i=>new ed({typeName:nn.ZodUnknown,...xn(i)});class Wl extends wn{_parse(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Si.never,received:t.parsedType}),rn}}Wl.create=i=>new Wl({typeName:nn.ZodNever,...xn(i)});class rx extends wn{_parse(e){if(this._getType(e)!==Si.undefined){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.void,received:n.parsedType}),rn}return Sa(e.data)}}rx.create=i=>new rx({typeName:nn.ZodVoid,...xn(i)});class Po extends wn{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==Si.array)return yi(t,{code:Ht.invalid_type,expected:Si.array,received:t.parsedType}),rn;if(s.exactLength!==null){const u=t.data.length>s.exactLength.value,r=t.data.length<s.exactLength.value;(u||r)&&(yi(t,{code:u?Ht.too_big:Ht.too_small,minimum:r?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(yi(t,{code:Ht.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(yi(t,{code:Ht.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((u,r)=>s.type._parseAsync(new ul(t,u,t.path,r)))).then(u=>ia.mergeArray(n,u));const l=[...t.data].map((u,r)=>s.type._parseSync(new ul(t,u,t.path,r)));return ia.mergeArray(n,l)}get element(){return this._def.type}min(e,t){return new Po({...this._def,minLength:{value:e,message:Ri.toString(t)}})}max(e,t){return new Po({...this._def,maxLength:{value:e,message:Ri.toString(t)}})}length(e,t){return new Po({...this._def,exactLength:{value:e,message:Ri.toString(t)}})}nonempty(e){return this.min(1,e)}}Po.create=(i,e)=>new Po({type:i,minLength:null,maxLength:null,exactLength:null,typeName:nn.ZodArray,...xn(e)});function wh(i){if(i instanceof Nr){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=sl.create(wh(n))}return new Nr({...i._def,shape:()=>e})}else return i instanceof Po?new Po({...i._def,type:wh(i.element)}):i instanceof sl?sl.create(wh(i.unwrap())):i instanceof Hc?Hc.create(wh(i.unwrap())):i instanceof dl?dl.create(i.items.map(e=>wh(e))):i}class Nr extends wn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Fn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Si.object){const f=this._getOrReturnCtx(e);return yi(f,{code:Ht.invalid_type,expected:Si.object,received:f.parsedType}),rn}const{status:n,ctx:s}=this._processInputParams(e),{shape:l,keys:u}=this._getCached(),r=[];if(!(this._def.catchall instanceof Wl&&this._def.unknownKeys==="strip"))for(const f in s.data)u.includes(f)||r.push(f);const p=[];for(const f of u){const m=l[f],v=s.data[f];p.push({key:{status:"valid",value:f},value:m._parse(new ul(s,v,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof Wl){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of r)p.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(f==="strict")r.length>0&&(yi(s,{code:Ht.unrecognized_keys,keys:r}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of r){const v=s.data[m];p.push({key:{status:"valid",value:m},value:f._parse(new ul(s,v,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of p){const v=await m.key,y=await m.value;f.push({key:v,value:y,alwaysSet:m.alwaysSet})}return f}).then(f=>ia.mergeObjectSync(n,f)):ia.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return Ri.errToObj,new Nr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,l,u,r;const p=(u=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,t,n).message)!==null&&u!==void 0?u:n.defaultError;return t.code==="unrecognized_keys"?{message:(r=Ri.errToObj(e).message)!==null&&r!==void 0?r:p}:{message:p}}}:{}})}strip(){return new Nr({...this._def,unknownKeys:"strip"})}passthrough(){return new Nr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Nr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Nr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Nr({...this._def,catchall:e})}pick(e){const t={};return Fn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Nr({...this._def,shape:()=>t})}omit(e){const t={};return Fn.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Nr({...this._def,shape:()=>t})}deepPartial(){return wh(this)}partial(e){const t={};return Fn.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new Nr({...this._def,shape:()=>t})}required(e){const t={};return Fn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let l=this.shape[n];for(;l instanceof sl;)l=l._def.innerType;t[n]=l}}),new Nr({...this._def,shape:()=>t})}keyof(){return OA(Fn.objectKeys(this.shape))}}Nr.create=(i,e)=>new Nr({shape:()=>i,unknownKeys:"strip",catchall:Wl.create(),typeName:nn.ZodObject,...xn(e)});Nr.strictCreate=(i,e)=>new Nr({shape:()=>i,unknownKeys:"strict",catchall:Wl.create(),typeName:nn.ZodObject,...xn(e)});Nr.lazycreate=(i,e)=>new Nr({shape:i,unknownKeys:"strip",catchall:Wl.create(),typeName:nn.ZodObject,...xn(e)});class Qf extends wn{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(l){for(const r of l)if(r.result.status==="valid")return r.result;for(const r of l)if(r.result.status==="dirty")return t.common.issues.push(...r.ctx.common.issues),r.result;const u=l.map(r=>new io(r.ctx.common.issues));return yi(t,{code:Ht.invalid_union,unionErrors:u}),rn}if(t.common.async)return Promise.all(n.map(async l=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(s);{let l;const u=[];for(const p of n){const f={...t,common:{...t.common,issues:[]},parent:null},m=p._parseSync({data:t.data,path:t.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!l&&(l={result:m,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const r=u.map(p=>new io(p));return yi(t,{code:Ht.invalid_union,unionErrors:r}),rn}}get options(){return this._def.options}}Qf.create=(i,e)=>new Qf({options:i,typeName:nn.ZodUnion,...xn(e)});const Nl=i=>i instanceof tm?Nl(i.schema):i instanceof zo?Nl(i.innerType()):i instanceof im?[i.value]:i instanceof Gc?i.options:i instanceof nm?Fn.objectValues(i.enum):i instanceof rm?Nl(i._def.innerType):i instanceof Xf?[void 0]:i instanceof Kf?[null]:i instanceof sl?[void 0,...Nl(i.unwrap())]:i instanceof Hc?[null,...Nl(i.unwrap())]:i instanceof W_||i instanceof am?Nl(i.unwrap()):i instanceof sm?Nl(i._def.innerType):[];class Kx extends wn{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.object)return yi(t,{code:Ht.invalid_type,expected:Si.object,received:t.parsedType}),rn;const n=this.discriminator,s=t.data[n],l=this.optionsMap.get(s);return l?t.common.async?l._parseAsync({data:t.data,path:t.path,parent:t}):l._parseSync({data:t.data,path:t.path,parent:t}):(yi(t,{code:Ht.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),rn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const l of t){const u=Nl(l.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of u){if(s.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);s.set(r,l)}}return new Kx({typeName:nn.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...xn(n)})}}function p1(i,e){const t=Fl(i),n=Fl(e);if(i===e)return{valid:!0,data:i};if(t===Si.object&&n===Si.object){const s=Fn.objectKeys(e),l=Fn.objectKeys(i).filter(r=>s.indexOf(r)!==-1),u={...i,...e};for(const r of l){const p=p1(i[r],e[r]);if(!p.valid)return{valid:!1};u[r]=p.data}return{valid:!0,data:u}}else if(t===Si.array&&n===Si.array){if(i.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<i.length;l++){const u=i[l],r=e[l],p=p1(u,r);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return t===Si.date&&n===Si.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Jf extends wn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(l,u)=>{if(d1(l)||d1(u))return rn;const r=p1(l.value,u.value);return r.valid?((h1(l)||h1(u))&&t.dirty(),{status:t.value,value:r.data}):(yi(n,{code:Ht.invalid_intersection_types}),rn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([l,u])=>s(l,u)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Jf.create=(i,e,t)=>new Jf({left:i,right:e,typeName:nn.ZodIntersection,...xn(t)});class dl extends wn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.array)return yi(n,{code:Ht.invalid_type,expected:Si.array,received:n.parsedType}),rn;if(n.data.length<this._def.items.length)return yi(n,{code:Ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rn;!this._def.rest&&n.data.length>this._def.items.length&&(yi(n,{code:Ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...n.data].map((u,r)=>{const p=this._def.items[r]||this._def.rest;return p?p._parse(new ul(n,u,n.path,r)):null}).filter(u=>!!u);return n.common.async?Promise.all(l).then(u=>ia.mergeArray(t,u)):ia.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new dl({...this._def,rest:e})}}dl.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new dl({items:i,typeName:nn.ZodTuple,rest:null,...xn(e)})};class em extends wn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.object)return yi(n,{code:Ht.invalid_type,expected:Si.object,received:n.parsedType}),rn;const s=[],l=this._def.keyType,u=this._def.valueType;for(const r in n.data)s.push({key:l._parse(new ul(n,r,n.path,r)),value:u._parse(new ul(n,n.data[r],n.path,r)),alwaysSet:r in n.data});return n.common.async?ia.mergeObjectAsync(t,s):ia.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof wn?new em({keyType:e,valueType:t,typeName:nn.ZodRecord,...xn(n)}):new em({keyType:Ao.create(),valueType:e,typeName:nn.ZodRecord,...xn(t)})}}class sx extends wn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.map)return yi(n,{code:Ht.invalid_type,expected:Si.map,received:n.parsedType}),rn;const s=this._def.keyType,l=this._def.valueType,u=[...n.data.entries()].map(([r,p],f)=>({key:s._parse(new ul(n,r,n.path,[f,"key"])),value:l._parse(new ul(n,p,n.path,[f,"value"]))}));if(n.common.async){const r=new Map;return Promise.resolve().then(async()=>{for(const p of u){const f=await p.key,m=await p.value;if(f.status==="aborted"||m.status==="aborted")return rn;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),r.set(f.value,m.value)}return{status:t.value,value:r}})}else{const r=new Map;for(const p of u){const f=p.key,m=p.value;if(f.status==="aborted"||m.status==="aborted")return rn;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),r.set(f.value,m.value)}return{status:t.value,value:r}}}}sx.create=(i,e,t)=>new sx({valueType:e,keyType:i,typeName:nn.ZodMap,...xn(t)});class ud extends wn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.set)return yi(n,{code:Ht.invalid_type,expected:Si.set,received:n.parsedType}),rn;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(yi(n,{code:Ht.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(yi(n,{code:Ht.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const l=this._def.valueType;function u(p){const f=new Set;for(const m of p){if(m.status==="aborted")return rn;m.status==="dirty"&&t.dirty(),f.add(m.value)}return{status:t.value,value:f}}const r=[...n.data.values()].map((p,f)=>l._parse(new ul(n,p,n.path,f)));return n.common.async?Promise.all(r).then(p=>u(p)):u(r)}min(e,t){return new ud({...this._def,minSize:{value:e,message:Ri.toString(t)}})}max(e,t){return new ud({...this._def,maxSize:{value:e,message:Ri.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ud.create=(i,e)=>new ud({valueType:i,minSize:null,maxSize:null,typeName:nn.ZodSet,...xn(e)});class Dh extends wn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.function)return yi(t,{code:Ht.invalid_type,expected:Si.function,received:t.parsedType}),rn;function n(r,p){return tx({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ex(),Vh].filter(f=>!!f),issueData:{code:Ht.invalid_arguments,argumentsError:p}})}function s(r,p){return tx({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ex(),Vh].filter(f=>!!f),issueData:{code:Ht.invalid_return_type,returnTypeError:p}})}const l={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof Hh){const r=this;return Sa(async function(...p){const f=new io([]),m=await r._def.args.parseAsync(p,l).catch(_=>{throw f.addIssue(n(p,_)),f}),v=await Reflect.apply(u,this,m);return await r._def.returns._def.type.parseAsync(v,l).catch(_=>{throw f.addIssue(s(v,_)),f})})}else{const r=this;return Sa(function(...p){const f=r._def.args.safeParse(p,l);if(!f.success)throw new io([n(p,f.error)]);const m=Reflect.apply(u,this,f.data),v=r._def.returns.safeParse(m,l);if(!v.success)throw new io([s(m,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Dh({...this._def,args:dl.create(e).rest(ed.create())})}returns(e){return new Dh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Dh({args:e||dl.create([]).rest(ed.create()),returns:t||ed.create(),typeName:nn.ZodFunction,...xn(n)})}}class tm extends wn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tm.create=(i,e)=>new tm({getter:i,typeName:nn.ZodLazy,...xn(e)});class im extends wn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yi(t,{received:t.data,code:Ht.invalid_literal,expected:this._def.value}),rn}return{status:"valid",value:e.data}}get value(){return this._def.value}}im.create=(i,e)=>new im({value:i,typeName:nn.ZodLiteral,...xn(e)});function OA(i,e){return new Gc({values:i,typeName:nn.ZodEnum,...xn(e)})}class Gc extends wn{constructor(){super(...arguments),Cf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return yi(t,{expected:Fn.joinValues(n),received:t.parsedType,code:Ht.invalid_type}),rn}if(ix(this,Cf)||LA(this,Cf,new Set(this._def.values)),!ix(this,Cf).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return yi(t,{received:t.data,code:Ht.invalid_enum_value,options:n}),rn}return Sa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Gc.create(e,{...this._def,...t})}exclude(e,t=this._def){return Gc.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Cf=new WeakMap;Gc.create=OA;class nm extends wn{constructor(){super(...arguments),Tf.set(this,void 0)}_parse(e){const t=Fn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Si.string&&n.parsedType!==Si.number){const s=Fn.objectValues(t);return yi(n,{expected:Fn.joinValues(s),received:n.parsedType,code:Ht.invalid_type}),rn}if(ix(this,Tf)||LA(this,Tf,new Set(Fn.getValidEnumValues(this._def.values))),!ix(this,Tf).has(e.data)){const s=Fn.objectValues(t);return yi(n,{received:n.data,code:Ht.invalid_enum_value,options:s}),rn}return Sa(e.data)}get enum(){return this._def.values}}Tf=new WeakMap;nm.create=(i,e)=>new nm({values:i,typeName:nn.ZodNativeEnum,...xn(e)});class Hh extends wn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.promise&&t.common.async===!1)return yi(t,{code:Ht.invalid_type,expected:Si.promise,received:t.parsedType}),rn;const n=t.parsedType===Si.promise?t.data:Promise.resolve(t.data);return Sa(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Hh.create=(i,e)=>new Hh({type:i,typeName:nn.ZodPromise,...xn(e)});class zo extends wn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:u=>{yi(n,u),u.fatal?t.abort():t.dirty()},get path(){return n.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const u=s.transform(n.data,l);if(n.common.async)return Promise.resolve(u).then(async r=>{if(t.value==="aborted")return rn;const p=await this._def.schema._parseAsync({data:r,path:n.path,parent:n});return p.status==="aborted"?rn:p.status==="dirty"||t.value==="dirty"?Th(p.value):p});{if(t.value==="aborted")return rn;const r=this._def.schema._parseSync({data:u,path:n.path,parent:n});return r.status==="aborted"?rn:r.status==="dirty"||t.value==="dirty"?Th(r.value):r}}if(s.type==="refinement"){const u=r=>{const p=s.refinement(r,l);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return r};if(n.common.async===!1){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?rn:(r.status==="dirty"&&t.dirty(),u(r.value),{status:t.value,value:r.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(r=>r.status==="aborted"?rn:(r.status==="dirty"&&t.dirty(),u(r.value).then(()=>({status:t.value,value:r.value}))))}if(s.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ld(u))return u;const r=s.transform(u.value,l);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>ld(u)?Promise.resolve(s.transform(u.value,l)).then(r=>({status:t.value,value:r})):u);Fn.assertNever(s)}}zo.create=(i,e,t)=>new zo({schema:i,typeName:nn.ZodEffects,effect:e,...xn(t)});zo.createWithPreprocess=(i,e,t)=>new zo({schema:e,effect:{type:"preprocess",transform:i},typeName:nn.ZodEffects,...xn(t)});class sl extends wn{_parse(e){return this._getType(e)===Si.undefined?Sa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sl.create=(i,e)=>new sl({innerType:i,typeName:nn.ZodOptional,...xn(e)});class Hc extends wn{_parse(e){return this._getType(e)===Si.null?Sa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Hc.create=(i,e)=>new Hc({innerType:i,typeName:nn.ZodNullable,...xn(e)});class rm extends wn{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Si.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rm.create=(i,e)=>new rm({innerType:i,typeName:nn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xn(e)});class sm extends wn{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Yf(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new io(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new io(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}sm.create=(i,e)=>new sm({innerType:i,typeName:nn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xn(e)});class ax extends wn{_parse(e){if(this._getType(e)!==Si.nan){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.nan,received:n.parsedType}),rn}return{status:"valid",value:e.data}}}ax.create=i=>new ax({typeName:nn.ZodNaN,...xn(i)});const MZ=Symbol("zod_brand");class W_ extends wn{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class zm extends wn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?rn:l.status==="dirty"?(t.dirty(),Th(l.value)):this._def.out._parseAsync({data:l.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?rn:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new zm({in:e,out:t,typeName:nn.ZodPipeline})}}class am extends wn{_parse(e){const t=this._def.innerType._parse(e),n=s=>(ld(s)&&(s.value=Object.freeze(s.value)),s);return Yf(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}am.create=(i,e)=>new am({innerType:i,typeName:nn.ZodReadonly,...xn(e)});function NT(i,e){const t=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof t=="string"?{message:t}:t}function FA(i,e={},t){return i?Gh.create().superRefine((n,s)=>{var l,u;const r=i(n);if(r instanceof Promise)return r.then(p=>{var f,m;if(!p){const v=NT(e,n),y=(m=(f=v.fatal)!==null&&f!==void 0?f:t)!==null&&m!==void 0?m:!0;s.addIssue({code:"custom",...v,fatal:y})}});if(!r){const p=NT(e,n),f=(u=(l=p.fatal)!==null&&l!==void 0?l:t)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...p,fatal:f})}}):Gh.create()}const PZ={object:Nr.lazycreate};var nn;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(nn||(nn={}));const IZ=(i,e={message:`Input not instance of ${i.name}`})=>FA(t=>t instanceof i,e),BA=Ao.create,$A=Uc.create,DZ=ax.create,RZ=Vc.create,UA=Zf.create,LZ=cd.create,NZ=nx.create,zZ=Xf.create,jZ=Kf.create,OZ=Gh.create,FZ=ed.create,BZ=Wl.create,$Z=rx.create,UZ=Po.create,VZ=Nr.create,GZ=Nr.strictCreate,HZ=Qf.create,qZ=Kx.create,WZ=Jf.create,YZ=dl.create,ZZ=em.create,XZ=sx.create,KZ=ud.create,QZ=Dh.create,JZ=tm.create,eX=im.create,tX=Gc.create,iX=nm.create,nX=Hh.create,zT=zo.create,rX=sl.create,sX=Hc.create,aX=zo.createWithPreprocess,oX=zm.create,lX=()=>BA().optional(),cX=()=>$A().optional(),uX=()=>UA().optional(),dX={string:i=>Ao.create({...i,coerce:!0}),number:i=>Uc.create({...i,coerce:!0}),boolean:i=>Zf.create({...i,coerce:!0}),bigint:i=>Vc.create({...i,coerce:!0}),date:i=>cd.create({...i,coerce:!0})},hX=rn;var ho=Object.freeze({__proto__:null,defaultErrorMap:Vh,setErrorMap:aZ,getErrorMap:ex,makeIssue:tx,EMPTY_PATH:oZ,addIssueToContext:yi,ParseStatus:ia,INVALID:rn,DIRTY:Th,OK:Sa,isAborted:d1,isDirty:h1,isValid:ld,isAsync:Yf,get util(){return Fn},get objectUtil(){return u1},ZodParsedType:Si,getParsedType:Fl,ZodType:wn,datetimeRegex:jA,ZodString:Ao,ZodNumber:Uc,ZodBigInt:Vc,ZodBoolean:Zf,ZodDate:cd,ZodSymbol:nx,ZodUndefined:Xf,ZodNull:Kf,ZodAny:Gh,ZodUnknown:ed,ZodNever:Wl,ZodVoid:rx,ZodArray:Po,ZodObject:Nr,ZodUnion:Qf,ZodDiscriminatedUnion:Kx,ZodIntersection:Jf,ZodTuple:dl,ZodRecord:em,ZodMap:sx,ZodSet:ud,ZodFunction:Dh,ZodLazy:tm,ZodLiteral:im,ZodEnum:Gc,ZodNativeEnum:nm,ZodPromise:Hh,ZodEffects:zo,ZodTransformer:zo,ZodOptional:sl,ZodNullable:Hc,ZodDefault:rm,ZodCatch:sm,ZodNaN:ax,BRAND:MZ,ZodBranded:W_,ZodPipeline:zm,ZodReadonly:am,custom:FA,Schema:wn,ZodSchema:wn,late:PZ,get ZodFirstPartyTypeKind(){return nn},coerce:dX,any:OZ,array:UZ,bigint:RZ,boolean:UA,date:LZ,discriminatedUnion:qZ,effect:zT,enum:tX,function:QZ,instanceof:IZ,intersection:WZ,lazy:JZ,literal:eX,map:XZ,nan:DZ,nativeEnum:iX,never:BZ,null:jZ,nullable:sX,number:$A,object:VZ,oboolean:uX,onumber:cX,optional:rX,ostring:lX,pipeline:oX,preprocess:aX,promise:nX,record:ZZ,set:KZ,strictObject:GZ,string:BA,symbol:NZ,transformer:zT,tuple:YZ,undefined:zZ,union:HZ,unknown:FZ,void:$Z,NEVER:hX,ZodIssueCode:Ht,quotelessJson:sZ,ZodError:io});const pX="_formField_4q43h_1",fX="_userOptionsContainer_4q43h_5",mX="_arrayField_4q43h_13",gX="_arrayInput_4q43h_17",yX="_arrayItems_4q43h_28",Yo={formField:pX,userOptionsContainer:fX,arrayField:mX,arrayInput:gX,arrayItems:yX},xX=i=>{if(i.default!==void 0)return i.default;if(i.type==="integer"||i.type==="number")return 0;if(i.type==="boolean")return!1;if(i.type==="array")return[];if(i.type==="string")return"";if(i.anyOf){if(i.anyOf.some(n=>n.type==="null"))return null;const t=i.anyOf.find(n=>n.type!=="null");if((t==null?void 0:t.type)==="integer"||(t==null?void 0:t.type)==="number")return 0;if((t==null?void 0:t.type)==="boolean")return!1;if((t==null?void 0:t.type)==="string")return""}return null},jT=(i,e)=>{if(e.type==="integer"){const t=parseInt(i,10);return isNaN(t)?0:t}if(e.type==="number"){const t=parseFloat(i);return isNaN(t)?0:t}if(e.type==="boolean")return i==="true";if(e.anyOf){if(i===""||i===null||i==="null")return null;const t=e.anyOf.find(s=>s.type==="integer"),n=e.anyOf.find(s=>s.type==="number");if(t){const s=parseInt(i,10);return isNaN(s)?null:s}if(n){const s=parseFloat(i);return isNaN(s)?null:s}}return i},vX=({control:i,setValue:e,currentTemplate:t,disabled:n=!1})=>{const[s,l]=Fe.useState({}),u=(t==null?void 0:t.userOptions)||{},r=CA({control:i,name:"userOptions"});pe.useEffect(()=>{if(t!=null&&t.userOptions){const m={};Object.entries(t.userOptions).forEach(([v,y])=>{m[v]=xX(y)}),e("userOptions",m)}else e("userOptions",{})},[t,e]);const p=(m,v)=>{const y=(r==null?void 0:r[m])||[],_=s[m]||"",b=()=>{if(_.trim()&&!y.includes(_.trim())){const S=[...y,_.trim()];e(`userOptions.${m}`,S),l(x=>({...x,[m]:""}))}},C=S=>{const x=y.filter((A,D)=>D!==S);e(`userOptions.${m}`,x)},E=S=>{l(x=>({...x,[m]:S}))};return Y.jsxs("div",{className:Yo.formField,children:[Y.jsx(Hu,{children:v.title||m}),Y.jsxs("div",{className:Yo.arrayField,children:[Y.jsxs("div",{className:Yo.arrayInput,children:[Y.jsx(il,{value:_,placeholder:Oe.t("Enter item"),onChange:({value:S})=>E(S||""),disabled:n}),Y.jsx(sn,{onClick:b,disabled:!_.trim()||n,small:!0,children:Oe.t("Add")})]}),Y.jsx("div",{className:Yo.arrayItems,children:y.map((S,x)=>Y.jsx(kS,{onRemove:()=>C(x),children:S},x))})]})]},m)},f=(m,v)=>{const{type:y,title:_,enum:b,anyOf:C}=v,E=_||m;if(y==="array")return p(m,v);if(b&&b.length>0)return Y.jsxs("div",{className:Yo.formField,children:[Y.jsx(Hu,{children:E}),Y.jsx(Ic,{name:`userOptions.${m}`,control:i,render:({field:A})=>{var D;return Y.jsx(Hl,{selected:((D=A.value)==null?void 0:D.toString())||"",disabled:n,onChange:({selected:T})=>A.onChange(T),children:b.map(T=>Y.jsx(Ca,{label:T,value:T},T))})}})]},m);if(y==="boolean")return Y.jsx("div",{className:Yo.formField,children:Y.jsx(Ic,{name:`userOptions.${m}`,control:i,render:({field:A})=>Y.jsx(td,{label:E,checked:A.value||!1,disabled:n,onChange:({checked:D})=>A.onChange(D)})})},m);if(C){const A=C.some(T=>T.type==="null"),D=C.find(T=>T.type!=="null");if(A&&D){const T=D.type==="integer"||D.type==="number"?"number":"text",k=D.type==="number"?"any":D.type==="integer"?"1":void 0;return Y.jsx("div",{className:Yo.formField,children:Y.jsx(Ic,{name:`userOptions.${m}`,control:i,render:({field:N})=>{var W;return Y.jsx(il,{label:E,type:T,step:k,value:N.value===null?"":((W=N.value)==null?void 0:W.toString())||"",disabled:n,placeholder:Oe.t("Leave empty for null"),onChange:({value:Z})=>{const K=Z===""?null:jT(Z||"",v);N.onChange(K)}})}})},m)}}const S=y==="integer"||y==="number"?"number":"text",x=y==="number"?"any":y==="integer"?"1":void 0;return Y.jsx("div",{className:Yo.formField,children:Y.jsx(Ic,{name:`userOptions.${m}`,control:i,render:({field:A})=>{var D;return Y.jsx(il,{label:E,type:S,step:x,value:((D=A.value)==null?void 0:D.toString())||"",disabled:n,onChange:({value:T})=>{const k=jT(T||"",v);A.onChange(k)}})}})},m)};return Object.keys(u).length===0?null:Y.jsxs("div",{className:Yo.formField,children:[Y.jsx(Hu,{children:Oe.t("Model Parameters")}),Y.jsx("div",{className:Yo.userOptionsContainer,children:Object.entries(u).map(([m,v])=>f(m,v))})]})},bX="_formContainer_efg0v_1",_X="_formTitle_efg0v_9",wX="_formField_efg0v_14",CX="_errorText_efg0v_18",TX="_covariate_efg0v_24",SX="_covariateInput_efg0v_30",EX="_covariatesList_efg0v_35",kX="_covariateItem_efg0v_39",AX="_covariateItemText_efg0v_48",MX="_actionButtons_efg0v_52",PX="_requiredCovariateItem_efg0v_58",IX="_requiredLabel_efg0v_63",ps={formContainer:bX,formTitle:_X,formField:wX,errorText:CX,covariate:TX,covariateInput:SX,covariatesList:EX,covariateItem:kX,covariateItemText:AX,actionButtons:MX,requiredCovariateItem:PX,requiredLabel:IX},DX=ho.object({name:ho.string().min(1,{message:Oe.t("Name is required")}),templateId:ho.number().min(1,{message:Oe.t("Template is required")}),covariates:ho.array(ho.object({name:ho.string().min(1,{message:Oe.t("Covariate name is required")}).regex(/^\S*$/,{message:Oe.t("Covariate name cannot contain spaces")})})),userOptions:ho.record(ho.any())}),RX=({onSubmit:i,isSubmitting:e})=>{const{route:t}=eu(),{modelTemplates:n,isLoading:s}=mA({route:t}),[l,u]=Fe.useState(""),[r,p]=Fe.useState(""),{control:f,handleSubmit:m,formState:{errors:v},watch:y,setValue:_}=H_({resolver:q_(DX),defaultValues:{name:"",templateId:0,covariates:[],userOptions:{}}}),{fields:b,append:C,remove:E}=tZ({control:f,name:"covariates"}),S=y("templateId"),x=Fe.useMemo(()=>n==null?void 0:n.find(k=>k.id===S),[n,S]),A=(x==null?void 0:x.requiredCovariates)||[],D=()=>{if(l.trim()){const k=l.trim();if(/\s/.test(k)){p(Oe.t("Covariate name cannot contain spaces"));return}const N=A.includes(k),W=b.some(Z=>y(`covariates.${b.indexOf(Z)}.name`)===k);if(!N&&!W)C({name:k}),p("");else{p(Oe.t("Covariate already exists"));return}u("")}},T=k=>{i(k)};return Y.jsxs("div",{className:ps.formContainer,children:[Y.jsx("h2",{className:ps.formTitle,children:Oe.t("Configure Model")}),Y.jsxs("form",{onSubmit:m(T),children:[Y.jsxs("div",{className:ps.formField,children:[Y.jsx(Hu,{children:Oe.t("Model Template")}),Y.jsx(Ic,{name:"templateId",control:f,render:({field:k})=>Y.jsx(Hl,{selected:k.value>0?k.value.toString():"",loading:s,error:!!v.templateId,placeholder:Oe.t("Select a model template"),disabled:s||!n,onChange:({selected:N})=>k.onChange(N?Number(N):0),children:n==null?void 0:n.map(N=>Y.jsx(Ca,{label:N.displayName??N.name,value:N.id.toString()},N.id))})}),v.templateId&&Y.jsx("p",{className:ps.errorText,children:v.templateId.message})]}),Y.jsxs("div",{className:ps.formField,children:[Y.jsx(Ic,{name:"name",control:f,render:({field:k})=>Y.jsx(il,{label:Oe.t("Configured Model Name"),value:k.value,error:!!v.name,disabled:!S,placeholder:Oe.t('Enter something to identify your model, e.g. "Debug" or "Malaria"'),onChange:({value:N})=>k.onChange(N),helpText:k.value?Oe.t("Your model will be saved as {{modelName}} [{{configuredModelName}}]",{modelName:x==null?void 0:x.displayName,configuredModelName:k.value,escape:":"}):void 0})}),v.name&&Y.jsx("p",{className:ps.errorText,children:v.name.message})]}),Y.jsx(vX,{control:f,setValue:_,currentTemplate:x,disabled:!S}),Y.jsxs("div",{className:ps.formField,children:[Y.jsx(Hu,{children:Oe.t("Additional Covariates")}),Y.jsxs("div",{className:ps.covariate,children:[Y.jsx("div",{className:ps.covariateInput,children:Y.jsx(il,{value:l,placeholder:Oe.t("Enter covariate name"),onChange:({value:k})=>{u(k||""),r&&p("")},disabled:!S,error:!!r})}),Y.jsx(sn,{onClick:D,disabled:!l.trim(),children:Oe.t("Add")})]}),Y.jsxs("div",{className:ps.covariatesList,children:[A.map((k,N)=>Y.jsxs("div",{className:`${ps.covariateItem} ${ps.requiredCovariateItem}`,children:[Y.jsx("span",{className:ps.covariateItemText,children:k}),Y.jsx("span",{className:ps.requiredLabel,children:Oe.t("Required")})]},`required-${N}`)),b.map((k,N)=>Y.jsxs("div",{className:ps.covariateItem,children:[Y.jsx("span",{className:ps.covariateItemText,children:y(`covariates.${N}.name`)}),Y.jsx(sn,{onClick:()=>E(N),small:!0,children:Oe.t("Remove")})]},k.id))]}),r&&Y.jsx("p",{className:ps.errorText,children:r}),v.covariates&&Y.jsx("p",{className:ps.errorText,children:Oe.t("Please check covariates")})]}),Y.jsx("div",{className:ps.actionButtons,children:Y.jsx(pd,{children:Y.jsx(sn,{primary:!0,loading:e,type:"submit",children:Oe.t("Configure Model")})})})]})]})},LX=()=>{const i=vo(),e=Zc(),{show:t}=wa(Oe.t("Model configured"),{success:!0}),{show:n}=wa(Oe.t("Failed to configure model"),{error:!0});return Yc({mutationFn:s=>Ms.addConfiguredModelCrudConfiguredModelsPost({modelTemplateId:s.templateId,name:s.name,additionalContinuousCovariates:s.covariates.map(l=>l.name),userOptionValues:s.userOptions}),onSuccess:()=>{i.invalidateQueries({queryKey:["models"]}),e("/settings"),t()},onError:s=>{console.error(s),n()}})},NX=()=>{const{route:i}=eu(),{modelTemplates:e,error:t,isLoading:n}=mA({route:i}),{mutate:s,isLoading:l}=LX(),u=p=>{s(p)},r=()=>n?Y.jsx("div",{className:Fv.loadingContainer,children:Y.jsx(Ea,{})}):t?Y.jsxs("div",{className:Fv.errorContainer,children:[Y.jsx("p",{children:Oe.t("Error loading model templates:")}),Y.jsx("p",{children:t.message})]}):!e||e.length===0?Y.jsx("div",{className:Fv.emptyContainer,children:Y.jsx("p",{children:Oe.t("No model templates found.")})}):Y.jsx("div",{children:Y.jsx(RX,{onSubmit:u,isSubmitting:l})});return Y.jsxs("div",{children:[Y.jsx(Uh,{pageTitle:Oe.t("Model Templates"),pageDescription:Oe.t("Base models that can be configured with covariates and parameters to create configured models.")}),r()]})},zX=()=>Y.jsx(NX,{}),jX="_drawerWrapper_g5ang_1",OX={drawerWrapper:jX},FX="_formWrapper_1wb8p_1",BX="_newPredictionForm_1wb8p_8",$X="_newPredictionTitle_1wb8p_12",Xv={formWrapper:FX,newPredictionForm:BX,newPredictionTitle:$X},UX=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,n]=Fe.useState([]),[s,l]=Fe.useState([]),[u,r]=Fe.useState([]),[p,f]=Fe.useState(void 0),[m,v]=Fe.useState(""),[y,_]=Fe.useState(void 0);return Fe.useEffect(()=>{if(y==null)return;const b=y.covariates.map(C=>({feature:C.name,origin:"dataItem",dataSource:""}));n(b)},[y]),Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:Xv.newPredictionForm,children:[Y.jsxs("div",{className:Xv.newPredictionTitle,children:[Y.jsx("h2",{children:"New prediction"}),Y.jsx(sn,{icon:Y.jsx(b1,{}),onClick:i})]}),Y.jsxs("div",{className:Xv.formWrapper,children:[Y.jsx(il,{autoComplete:"",label:"Name of prediction",value:m,onChange:b=>v(b.value),placeholder:Oe.t("Prediction for Northern Province")}),Y.jsx(pA,{selectedModel:y,setSelectedModel:_}),Y.jsx(uA,{setDataLayers:n,datasetLayers:t,predictMode:!0}),Y.jsx(Q3,{setTimePeriods:r}),Y.jsx(J3,{orgUnits:s,setOrgUnits:l,orgUnitLevel:p,setOrgUnitLevel:f}),Y.jsx(cA,{onDrawerSubmit:e,selectedModel:y,name:m,dataLayers:t,onSendAction:"predict",orgUnitLevel:p,selectedPeriodItems:u,selectedOrgUnits:s})]})]})})},VX=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return Y.jsx("div",{children:Y.jsx(C_,{open:e,onClose:i,direction:"right",size:n,children:Y.jsx("div",{className:OX.drawerWrapper,children:Y.jsx(UX,{onDrawerClose:i,onDrawerSubmit:t})})})})},GX=()=>{const[i,e]=Fe.useState(!1),[t,n]=Fe.useState(!1),s=()=>{n(!1),e(!1)};return Fe.useEffect(()=>{n(!0)},[t]),Y.jsxs("div",{children:[Y.jsx(Uh,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),Y.jsx(VX,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:s}),t&&Y.jsx(a1,{type:"predictions"})]})},HX=({children:i})=>{const{baseUrl:e}=hx(),[t,n]=Fe.useState(!1);return Fe.useEffect(()=>{zi.WITH_CREDENTIALS=!0,zi.BASE=e+"/api/routes/chap/run",n(!0)},[e]),t?Y.jsx(Y.Fragment,{children:i}):Y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Y.jsx(Ea,{})})},qX="_settingsContainer_11gky_1",WX={settingsContainer:qX},YX="_container_15il8_1",ZX="_header_15il8_6",XX="_settingsContainer_15il8_17",KX="_loaderContainer_15il8_23",QX="_mutedText_15il8_33",JX="_errorMessage_15il8_38",eK="_routeInfo_15il8_44",tK="_routeInfoHeader_15il8_51",iK="_infoGrid_15il8_65",nK="_label_15il8_72",rK="_value_15il8_77",sK="_authorities_15il8_83",aK="_authority_15il8_89",Er={container:YX,header:ZX,settingsContainer:XX,loaderContainer:KX,mutedText:QX,errorMessage:JX,routeInfo:eK,routeInfoHeader:tK,infoGrid:iK,label:nK,value:rK,authorities:sK,authority:aK},oK="F_CHAP_MODELING_APP",VA=({onSuccess:i,onError:e}={})=>{const t=vo(),n=Wh(),{show:s}=wa(Oe.t("Error saving route"),{critical:!0}),{show:l}=wa(Oe.t("Route saved successfully"),{success:!0}),u=Yc(async r=>{const{id:p,url:f}=r;if(p){const m=["routes","chap"],v=t.getQueryData(m);if(!v)throw new Error(`Route data not found in cache for key ${m}.`);const y=v.routes.find(b=>b.id===p);if(!y)throw new Error(`Route with id ${p} not found in cache for update.`);const _={resource:"routes",type:"update",id:p,data:{...y||{},url:f}};return n.mutate(_)}else{const m={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:f,authorities:[oK],headers:{"Content-Type":"application/json"}}};return n.mutate(m)}},{onSuccess:()=>{l(),t.invalidateQueries(["routes"]),i==null||i()},onError:r=>{s(),console.error("Error saving route:",r),e==null||e(r)}});return{saveRoute:u.mutate,isSaving:u.isLoading,error:u.error}},lK=ho.object({url:ho.string().url({message:Oe.t("Invalid URL format")}).min(1,{message:Oe.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:Oe.t("URL must end with a double wildcard (/**)")})}),GA=({onClose:i,onSubmit:e,isLoading:t,initialUrl:n="",modalTitle:s,submitButtonText:l})=>{const{control:u,handleSubmit:r,formState:{errors:p}}=H_({resolver:q_(lK),defaultValues:{url:n}}),f=m=>e(m);return Y.jsx(Do,{onClose:i,dataTest:"route-form-modal",children:Y.jsxs("form",{onSubmit:r(f),children:[Y.jsx(dd,{children:s}),Y.jsxs(Wc,{children:[Y.jsx(Hu,{htmlFor:"url",children:Oe.t("CHAP Core URL")}),Y.jsx(Ic,{name:"url",control:u,render:({field:m})=>Y.jsx(om,{...m,type:"text",error:!!p.url,onChange:v=>m.onChange(v.value),dataTest:"route-url-input"})}),p.url?Y.jsx("p",{className:Er.mutedText,children:p.url.message}):null]}),Y.jsx(hd,{children:Y.jsxs(pd,{children:[Y.jsx(sn,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:Oe.t("Cancel")}),Y.jsx(sn,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:l})]})})]})})},cK=()=>{const[i,e]=Fe.useState(!1),{saveRoute:t,isSaving:n}=VA({onSuccess:()=>{e(!1)}}),s=r=>{t({url:r.url})},l=()=>{e(!0)},u=()=>{e(!1)};return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{children:[Y.jsx("p",{className:Er.mutedText,children:Oe.t("No route found.")}),Y.jsx(sn,{onClick:l,icon:Y.jsx(px,{}),small:!0,loading:n,dataTest:"add-route-button",children:Oe.t("Add route")})]}),i&&Y.jsx(GA,{onClose:u,onSubmit:s,isLoading:n,initialUrl:"",modalTitle:Oe.t("Add route"),submitButtonText:Oe.t("Add")})]})},uK=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:n}=VA({onSuccess:()=>{e()}}),s=l=>{t({id:i.id,url:l.url})};return Y.jsx(GA,{onClose:e,onSubmit:s,isLoading:n,initialUrl:i.url,modalTitle:Oe.t("Edit route"),submitButtonText:Oe.t("Save")})},dK=({id:i,onSuccess:e,onError:t})=>{const n=Wh(),s=vo(),{show:l}=wa(Oe.t("Error deleting route"),{critical:!0}),{show:u}=wa(Oe.t("Route deleted successfully"),{success:!0}),r={resource:"routes",id:i,type:"delete"},{mutate:p,isLoading:f}=Yc(()=>n.mutate(r),{onSuccess:()=>{u(),s.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:m=>{l(),console.error("Error deleting route:",m),t==null||t(m)}});return{deleteRoute:p,isDeleting:f}},hK=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:n}=dK({id:i,onSuccess:()=>{e()}});return Y.jsxs(Do,{onClose:e,small:!0,children:[Y.jsx(dd,{children:Oe.t("Delete route")}),Y.jsx(Wc,{children:Y.jsx("p",{children:Oe.t("Are you sure you want to delete this route?")})}),Y.jsx(hd,{children:Y.jsxs(pd,{children:[Y.jsx(sn,{onClick:e,secondary:!0,children:Oe.t("Cancel")}),Y.jsx(sn,{onClick:()=>t(),destructive:!0,loading:n,children:Oe.t("Delete")})]})})]})},pK="_routeActions_1etwp_2",fK={routeActions:pK},mK=({route:i})=>{const e=vo(),[t,n]=Fe.useState(!1),[s,l]=Fe.useState(!1),[u,r]=Fe.useState(!1),[p,f]=Fe.useState(!1),m=Fe.useRef(null);return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:fK.routeActions,children:[Y.jsx(sn,{icon:Y.jsx(pb,{}),small:!0,onClick:()=>l(!0),children:Oe.t("Sharing")}),Y.jsxs("div",{ref:m,children:[Y.jsx(sn,{small:!0,onClick:()=>n(!t),children:Y.jsx(um,{})}),t&&Y.jsx(ux,{onBackdropClick:()=>n(!1),children:Y.jsx(qh,{placement:"bottom-end",reference:m,children:Y.jsxs(_1,{children:[Y.jsx(Kr,{dense:!0,onClick:()=>{f(!0),n(!1)},label:Oe.t("Edit"),icon:Y.jsx(E1,{})}),Y.jsx(Kr,{dense:!0,onClick:()=>{l(!0),n(!1)},label:Oe.t("Sharing"),icon:Y.jsx(pb,{})}),Y.jsx(Kr,{dense:!0,destructive:!0,onClick:()=>{r(!0),n(!1)},label:Oe.t("Delete"),icon:Y.jsx(cm,{})})]})})})]})]}),s&&Y.jsx(T3,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),l(!1)}}),u&&Y.jsx(hK,{routeId:i.id,onClose:()=>r(!1)}),p&&Y.jsx(uK,{route:i,onClose:()=>f(!1)})]})},gK=({route:i})=>Fe.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?Y.jsx(yo,{warning:!0,title:Oe.t("Public access"),children:Oe.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,yK=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:n}=gA({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:n}},xK=({authority:i})=>{const{user:e,isLoading:t,error:n}=yK(),s=Fe.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:Fe.useMemo(()=>{if(e)return s?!0:Array.isArray(i)?i.some(u=>e.authorities.includes(u)):e.authorities.includes(i)},[e,i,s]),isSuperUser:s,isLoading:t,error:n}},gf=({children:i})=>Y.jsx(lm,{children:Y.jsxs("div",{className:Er.container,children:[Y.jsx("div",{className:Er.header,children:Y.jsx("h2",{children:Oe.t("Route settings")})}),i]})}),vK="F_ROUTE_PRIVATE_ADD",bK="F_ROUTE_PUBLIC_ADD",_K=()=>{const{route:i,isLoading:e,error:t}=eu(),{hasAuthority:n,isLoading:s}=xK({authority:[vK,bK]});return Fe.useEffect(()=>{t&&console.error(t)},[t]),e||s?Y.jsx(gf,{children:Y.jsx("div",{className:Er.loaderContainer,children:Y.jsx(Ea,{})})}):t?Y.jsx(gf,{children:Y.jsxs("div",{className:Er.loaderContainer,children:[Y.jsx("p",{className:Er.mutedText,children:Oe.t("There was an error loading the route settings. Please try to reload the page.")}),Y.jsx("p",{className:Er.mutedText,children:Oe.t("If the problem persists, please contact your system administrator.")})]})}):n?i?Y.jsx(gf,{children:Y.jsxs("div",{className:Er.settingsContainer,children:[Y.jsx(gK,{route:i}),Y.jsxs("div",{className:Er.routeInfo,children:[Y.jsxs("div",{className:Er.routeInfoHeader,children:[Y.jsx("h3",{children:Oe.t("Route configuration")}),Y.jsx(mK,{route:i})]}),Y.jsxs("div",{className:Er.infoGrid,children:[Y.jsx("span",{className:Er.label,children:Oe.t("Name")}),Y.jsx("span",{className:Er.value,children:i.displayName}),Y.jsx("span",{className:Er.label,children:Oe.t("Code")}),Y.jsx("span",{className:Er.value,children:i.code}),Y.jsx("span",{className:Er.label,children:Oe.t("URL")}),Y.jsx("span",{className:Er.value,children:i.url}),i.authorities.length>0?Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{className:Er.label,children:Oe.t("Authorities")}),Y.jsx("div",{className:Er.authorities,children:i.authorities.map((l,u)=>Y.jsx("span",{className:Er.authority,children:l},u))})]}):null]})]})]})}):Y.jsx(gf,{children:Y.jsx(cK,{})}):Y.jsx(gf,{children:Y.jsxs("div",{className:Er.loaderContainer,children:[Y.jsx("p",{className:Er.mutedText,children:Oe.t("You do not have permission to add or modify routes.")}),Y.jsx("p",{className:Er.mutedText,children:Oe.t("If you think this is an error, please contact your system administrator.")})]})})},wK="_container_xs21r_1",CK="_header_xs21r_6",TK="_loaderContainer_xs21r_17",SK="_mutedText_xs21r_27",EK="_info_xs21r_32",kK="_infoHeader_xs21r_39",AK="_settingsContainer_xs21r_53",MK="_infoGrid_xs21r_59",PK="_label_xs21r_66",IK="_value_xs21r_71",Es={container:wK,header:CK,loaderContainer:TK,mutedText:SK,info:EK,infoHeader:kK,settingsContainer:AK,infoGrid:MK,label:PK,value:IK},HA=({route:i})=>{const{data:e,error:t,isLoading:n}=Gl({queryKey:["systemInfo",i==null?void 0:i.url],queryFn:()=>bk.systemInfoSystemInfoGet(),enabled:!!i,staleTime:3e5,cacheTime:3e5,retry:0});return{status:e,error:t,isLoading:n}},DK=()=>{const{route:i}=eu(),{data:e,isLoading:t,error:n}=Gl({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(s=>s.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:n||!e?Y.jsx(yo,{title:Oe.t("Your server might not be secure"),children:Y.jsx("span",{className:Es.mutedText,children:Oe.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):Y.jsx(Y.Fragment,{children:Y.jsx(yo,{error:!0,title:Oe.t("Your server is not secure"),children:Y.jsx("span",{className:Es.mutedText,children:Oe.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},Kv=({children:i})=>Y.jsx(lm,{children:Y.jsxs("div",{className:Es.container,children:[Y.jsx("div",{className:Es.header,children:Y.jsx("h2",{children:Oe.t("CHAP settings")})}),i]})}),RK=({route:i})=>{const{status:e,error:t,isLoading:n}=HA({route:i});return Fe.useEffect(()=>{t&&console.error(t)},[t]),n?Y.jsx(Kv,{children:Y.jsx("div",{className:Es.loaderContainer,children:Y.jsx(Ea,{})})}):t||!e?Y.jsx(Kv,{children:Y.jsx("div",{children:Y.jsx(yo,{error:!0,title:Oe.t("An error occurred while connecting to the CHAP server."),className:Es.mutedText,children:Oe.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):Y.jsx(Kv,{children:Y.jsxs("div",{className:Es.settingsContainer,children:[Y.jsx(DK,{}),Y.jsxs("div",{className:Es.info,children:[Y.jsx("div",{className:Es.infoHeader,children:Y.jsx("h3",{children:Oe.t("Server information")})}),Y.jsxs("div",{className:Es.infoGrid,children:[e.chap_core_version&&Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{className:Es.label,children:Oe.t("CHAP Version")}),Y.jsx("span",{className:Es.value,children:e.chap_core_version})]}),e.python_version&&Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{className:Es.label,children:Oe.t("Python Version")}),Y.jsx("span",{className:Es.value,children:e.python_version})]}),e.os&&Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{className:Es.label,children:Oe.t("Operating System")}),Y.jsx("span",{className:Es.value,children:e.os})]}),Y.jsx("span",{className:Es.label,children:Oe.t("Status")}),Y.jsx("span",{className:Es.value,style:{color:je.green600},children:Oe.t("Connected")})]})]})]})})},LK="_container_9uxn8_1",NK="_header_9uxn8_6",zK="_loaderContainer_9uxn8_17",jK="_mutedText_9uxn8_27",OK="_info_9uxn8_32",FK="_infoHeader_9uxn8_39",BK="_settingsContainer_9uxn8_53",$K="_infoGrid_9uxn8_59",UK="_label_9uxn8_66",VK="_value_9uxn8_71",Xo={container:LK,header:NK,loaderContainer:zK,mutedText:jK,info:OK,infoHeader:FK,settingsContainer:BK,infoGrid:$K,label:UK,value:VK},qA=()=>{const{data:i,error:e,isLoading:t}=Gl({queryKey:["models"],queryFn:()=>Ms.listModelsCrudModelsGet(),staleTime:1/0,cacheTime:1/0,retry:0});return{models:i,error:e,isLoading:t}},Qv=({children:i})=>Y.jsx(lm,{children:Y.jsxs("div",{className:Xo.container,children:[Y.jsx("div",{className:Xo.header,children:Y.jsx("h2",{children:Oe.t("Model settings")})}),i]})}),GK=()=>{const{models:i,error:e,isLoading:t}=qA(),n=Zc();if(Fe.useEffect(()=>{e&&console.error(e)},[e]),t)return Y.jsx(Qv,{children:Y.jsx("div",{className:Xo.loaderContainer,children:Y.jsx(Ea,{})})});if(e)return Y.jsx(Qv,{children:Y.jsx("div",{children:Y.jsx(yo,{error:!0,title:Oe.t("An error occurred while loading models."),className:Xo.mutedText,children:Oe.t("Please try to reload the page. If the problem persists, contact your system administrator.")})})});const s=()=>{n("/settings/models")};return Y.jsx(Qv,{children:Y.jsx("div",{className:Xo.settingsContainer,children:Y.jsxs("div",{className:Xo.info,children:[Y.jsxs("div",{className:Xo.infoHeader,children:[Y.jsx("h3",{children:Oe.t("Configured models")}),Y.jsx(sn,{small:!0,onClick:s,icon:Y.jsx(rS,{}),children:Oe.t("Configure")})]}),Y.jsxs("div",{className:Xo.infoGrid,children:[Y.jsx("span",{className:Xo.label,children:Oe.t("Models configured")}),Y.jsx("span",{className:Xo.value,children:(i==null?void 0:i.length)||0})]})]})})})},HK=()=>{const{route:i}=eu();return Y.jsxs("div",{className:WX.settingsContainer,children:[Y.jsx(_K,{}),i&&Y.jsx(RK,{route:i}),i&&Y.jsx(GK,{})]})},qK=function(){return null},WK="_noMatchMessage_35hxr_1",YK="_asideWrapper_35hxr_11",ZK="_collapsed_35hxr_18",XK="_iconWrapper_35hxr_33",KK="_collapseButton_35hxr_53",yf={noMatchMessage:WK,asideWrapper:YK,collapsed:ZK,iconWrapper:XK,collapseButton:KK},QK="_active_1ej51_129",Da={"sidenav-wrap":"_sidenav-wrap_1ej51_22","sidenav-items":"_sidenav-items_1ej51_40","sidenav-parent":"_sidenav-parent_1ej51_48","sidenav-parent-chevron":"_sidenav-parent-chevron_1ej51_83","parent-is-open":"_parent-is-open_1ej51_89","sidenav-link-wrapper":"_sidenav-link-wrapper_1ej51_94","sidenav-link":"_sidenav-link_1ej51_94","sidenav-link-disabled":"_sidenav-link-disabled_1ej51_120",active:QK,"sidenav-item-icon":"_sidenav-item-icon_1ej51_144","sidenav-parent-has-icon":"_sidenav-parent-has-icon_1ej51_154","sidenav-divider":"_sidenav-divider_1ej51_159","sidenav-section-title":"_sidenav-section-title_1ej51_165","sidenav-footer":"_sidenav-footer_1ej51_173","sidenav-filter":"_sidenav-filter_1ej51_177"},JK=({children:i,className:e})=>Y.jsx("nav",{"data-test":"sidenav",className:vn(Da["sidenav-wrap"],e),children:i}),eQ=({children:i})=>Y.jsx("ul",{className:Da["sidenav-items"],children:i}),tQ=({label:i,icon:e,disabled:t,children:n,open:s,onClick:l})=>Y.jsx(Y.Fragment,{children:Y.jsxs("li",{className:vn(Da["sidenav-parent"],{[Da["sidenav-parent-has-icon"]]:e,[Da["parent-is-open"]]:s}),children:[Y.jsxs("button",{onClick:l,disabled:t,children:[e&&Y.jsx("span",{className:Da["sidenav-item-icon"],children:e}),Y.jsx("span",{className:Da["sidenav-parent-label"],children:i}),Y.jsx("span",{className:Da["sidenav-parent-chevron"],children:Y.jsx(C1,{})})]}),s&&Y.jsx("ul",{className:Da["sidenav-submenu"],children:n})]})}),iQ=({children:i,disabled:e})=>Y.jsx("li",{className:vn(Da["sidenav-link"],{[Da["sidenav-link-disabled"]]:e}),children:i}),nQ=({icon:i,active:e,disabled:t,children:n,to:s,LinkComponent:l,label:u,end:r})=>{const p=l?Y.jsxs(l,{to:s,end:r,children:[i&&Y.jsx("span",{className:Da["sidenav-item-icon"],children:i}),u]}):Y.jsxs("a",{href:s,className:vn({[Da.active]:e}),children:[i&&Y.jsx("span",{className:Da["sidenav-item-icon"],children:i}),u]});return Y.jsx(iQ,{disabled:t,children:pe.Children.count(n)>0?n:p})},Sh=({to:i,label:e,disabled:t,end:n})=>Y.jsx(nQ,{to:i,disabled:t,LinkComponent:Z3,label:e,end:n}),rQ=({label:i,links:e=[],initiallyOpen:t=!0})=>{const[n,s]=Fe.useState(t),l=()=>{s(!n)};return e.length===1?Y.jsx(Sh,{to:e[0].to,label:e[0].label,end:!0}):Y.jsx(tQ,{label:i,open:n,onClick:l,children:e.map(({to:u,label:r})=>Y.jsx(Sh,{to:u,label:r,end:!0},r))})},sQ=({className:i,hideSidebar:e})=>{const[t,n]=Fe.useState(!1);return Fe.useEffect(()=>{e!==void 0&&n(e)},[e]),Y.jsxs("aside",{className:vn(yf.asideWrapper,i,{[yf.collapsed]:t}),children:[Y.jsx(JK,{children:Y.jsxs(eQ,{children:[Y.jsx(rQ,{label:Oe.t("Evaluate"),links:[{label:Oe.t("Overview"),to:"/evaluate"},{label:Oe.t("Compare"),to:"/evaluate/compare"}]}),Y.jsx(Sh,{to:"/evaluationsWIP",label:Oe.t("Evaluations (WIP)")}),Y.jsx(Sh,{to:"/predict",label:Oe.t("Predict")}),Y.jsx(Sh,{to:"/jobs",label:Oe.t("Jobs")}),Y.jsx(Sh,{to:"/settings",label:Oe.t("Settings")})]})}),Y.jsx("button",{className:yf.collapseButton,type:"button",onClick:()=>n(!t),children:Y.jsx("div",{className:vn(yf.iconWrapper,{[yf.collapsed]:t}),children:Y.jsx(ZT,{})})})]})},aQ="_wrapper_mpm4i_8",oQ="_main_mpm4i_18",lQ="_sidebar_mpm4i_26",cQ="_hide_mpm4i_30",uQ="_pageTitle_mpm4i_36",dQ="_footer_mpm4i_43",ox={"m-medium":"(min-width: 768px)",wrapper:aQ,main:oQ,sidebar:lQ,hide:cQ,pageTitle:uQ,footer:dQ},hQ=({children:i,sidebar:e})=>Y.jsxs("div",{className:ox.wrapper,children:[e,Y.jsx("div",{className:ox.main,children:i})]}),pQ=({children:i,hideSidebar:e})=>Y.jsx(hQ,{sidebar:Y.jsx(sQ,{hideSidebar:e,className:vn(ox.sidebar,{[ox.hide]:e})}),children:i}),fQ=()=>Y.jsx(pQ,{children:Y.jsx(Kb,{})}),mQ="_loadingContainer_111ob_1",gQ="_noRouteContainer_111ob_8",yQ="_noRouteContent_111ob_15",xQ="_noRouteTitle_111ob_22",vQ="_noRouteText_111ob_31",bQ="_noRouteLink_111ob_38",gh={loadingContainer:mQ,noRouteContainer:gQ,noRouteContent:yQ,noRouteTitle:xQ,noRouteText:vQ,noRouteLink:bQ},_Q=()=>Y.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Y.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),Y.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),Y.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),Y.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),Y.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),Y.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),Y.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),Y.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),Y.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),Y.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),Y.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),Y.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),Y.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),Y.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),Y.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),Y.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),Y.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),Y.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),Y.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),Y.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),Y.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),wQ=({children:i})=>{const{route:e,isLoading:t}=eu(),n=Zc();return t?Y.jsx("div",{className:gh.loadingContainer,children:Y.jsx(Ea,{})}):e?i:Y.jsx("div",{className:gh.noRouteContainer,children:Y.jsxs("div",{className:gh.noRouteContent,children:[Y.jsx(_Q,{}),Y.jsx("h1",{className:gh.noRouteTitle,children:Oe.t("Get started with the Modeling app")}),Y.jsxs("div",{className:gh.noRouteText,children:[Y.jsx("p",{children:Oe.t("To get started, create a route that points to a running CHAP server.")}),Y.jsx("p",{children:Oe.t("Route and servers are configured on the settings page.")}),Y.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:gh.noRouteLink,children:Oe.t("Learn more about Modeling and CHAP")})]}),Y.jsx(sn,{onClick:()=>n("/settings"),children:Oe.t("Configure settings")})]})})},CQ="_infoAboutReportingBugs_7cpvy_1",TQ="_infoAboutReportingBugsInner_7cpvy_7",SQ="_icon_7cpvy_17",Jv={infoAboutReportingBugs:CQ,infoAboutReportingBugsInner:TQ,icon:SQ},EQ=()=>{const[i,e]=Fe.useState(!0);return Y.jsx("div",{className:Jv.infoAboutReportingBugs,children:i&&Y.jsxs("div",{className:Jv.infoAboutReportingBugsInner,style:{maxWidth:"1400px"},children:[Y.jsxs("div",{children:[Y.jsx("span",{className:Jv.icon,children:Y.jsx(lS,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",Y.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),Y.jsx("div",{children:Y.jsx(sn,{small:!0,onClick:()=>e(!i),children:Y.jsx(hI,{})})})]})})},kQ="_warningMargin_z0zs1_1",AQ="_warningMarginInner_z0zs1_6",OT={warningMargin:kQ,warningMarginInner:AQ},MQ=()=>{const{appVersion:i}=hx(),{route:e,isLoading:t}=eu(),n=Fe.useRef(void 0),[s,l]=Fe.useState(void 0),u=async()=>{i&&await bk.isCompatibleIsCompatibleGet(i==null?void 0:i.full).then(r=>{l(r)}).catch(()=>{l({compatible:!1,description:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})})};return Fe.useEffect(()=>{!i||t||n.current!==(e==null?void 0:e.url)&&(u(),n.current=e==null?void 0:e.url)},[i,e==null?void 0:e.url]),Y.jsx(Y.Fragment,{children:s&&!(s!=null&&s.compatible)&&Y.jsx("div",{className:OT.warningMargin,style:{maxWidth:"1400px"},children:Y.jsx("div",{className:OT.warningMarginInner,children:Y.jsxs(yo,{error:!0,title:"Incompatible versions",children:["Version of the Modeling App is not compatible with the backend (Chap core)",Y.jsx("br",{}),Y.jsx("br",{}),Y.jsx("i",{children:s.description})]})})})})},PQ="_container_zakw0_1",IQ="_loadingContainer_zakw0_5",DQ="_errorContainer_zakw0_12",RQ="_emptyContainer_zakw0_13",eb={container:PQ,loadingContainer:IQ,errorContainer:DQ,emptyContainer:RQ},LQ=()=>{const{data:i,error:e,isLoading:t}=Gl({queryKey:["backtests"],queryFn:()=>Ms.getBacktestsCrudBacktestsGet(),staleTime:3e5,cacheTime:3e5,retry:0});return{backtests:i,error:e,isLoading:t}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function WA(){return{accessor:(i,e)=>typeof i=="function"?{...e,accessorFn:i}:{...e,accessorKey:i},display:i=>i,group:i=>i}}function Dc(i,e){return typeof i=="function"?i(e):i}function no(i,e){return t=>{e.setState(n=>({...n,[i]:Dc(t,n[i])}))}}function Qx(i){return i instanceof Function}function NQ(i){return Array.isArray(i)&&i.every(e=>typeof e=="number")}function zQ(i,e){const t=[],n=s=>{s.forEach(l=>{t.push(l);const u=e(l);u!=null&&u.length&&n(u)})};return n(i),t}function Gi(i,e,t){let n=[],s;return l=>{let u;t.key&&t.debug&&(u=Date.now());const r=i(l);if(!(r.length!==n.length||r.some((m,v)=>n[v]!==m)))return s;n=r;let f;if(t.key&&t.debug&&(f=Date.now()),s=e(...r),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const m=Math.round((Date.now()-u)*100)/100,v=Math.round((Date.now()-f)*100)/100,y=v/16,_=(b,C)=>{for(b=String(b);b.length<C;)b=" "+b;return b};console.info(`%c ${_(v,5)} /${_(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,t==null?void 0:t.key)}return s}}function Hi(i,e,t,n){return{debug:()=>{var s;return(s=i==null?void 0:i.debugAll)!=null?s:i[e]},key:!1,onChange:n}}function jQ(i,e,t,n){const s=()=>{var u;return(u=l.getValue())!=null?u:i.options.renderFallbackValue},l={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(n),renderValue:s,getContext:Gi(()=>[i,t,e,l],(u,r,p,f)=>({table:u,column:r,row:p,cell:f,getValue:f.getValue,renderValue:f.renderValue}),Hi(i.options,"debugCells"))};return i._features.forEach(u=>{u.createCell==null||u.createCell(l,t,e,i)},{}),l}function OQ(i,e,t,n){var s,l;const r={...i._getDefaultColumnDef(),...e},p=r.accessorKey;let f=(s=(l=r.id)!=null?l:p?typeof String.prototype.replaceAll=="function"?p.replaceAll(".","_"):p.replace(/\./g,"_"):void 0)!=null?s:typeof r.header=="string"?r.header:void 0,m;if(r.accessorFn?m=r.accessorFn:p&&(p.includes(".")?m=y=>{let _=y;for(const C of p.split(".")){var b;_=(b=_)==null?void 0:b[C]}return _}:m=y=>y[r.accessorKey]),!f)throw new Error;let v={id:`${String(f)}`,accessorFn:m,parent:n,depth:t,columnDef:r,columns:[],getFlatColumns:Gi(()=>[!0],()=>{var y;return[v,...(y=v.columns)==null?void 0:y.flatMap(_=>_.getFlatColumns())]},Hi(i.options,"debugColumns")),getLeafColumns:Gi(()=>[i._getOrderColumnsFn()],y=>{var _;if((_=v.columns)!=null&&_.length){let b=v.columns.flatMap(C=>C.getLeafColumns());return y(b)}return[v]},Hi(i.options,"debugColumns"))};for(const y of i._features)y.createColumn==null||y.createColumn(v,i);return v}const Ks="debugHeaders";function FT(i,e,t){var n;let l={id:(n=t.id)!=null?n:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const u=[],r=p=>{p.subHeaders&&p.subHeaders.length&&p.subHeaders.map(r),u.push(p)};return r(l),u},getContext:()=>({table:i,header:l,column:e})};return i._features.forEach(u=>{u.createHeader==null||u.createHeader(l,i)}),l}const FQ={createTable:i=>{i.getHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n,s)=>{var l,u;const r=(l=n==null?void 0:n.map(v=>t.find(y=>y.id===v)).filter(Boolean))!=null?l:[],p=(u=s==null?void 0:s.map(v=>t.find(y=>y.id===v)).filter(Boolean))!=null?u:[],f=t.filter(v=>!(n!=null&&n.includes(v.id))&&!(s!=null&&s.includes(v.id)));return iy(e,[...r,...f,...p],i)},Hi(i.options,Ks)),i.getCenterHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n,s)=>(t=t.filter(l=>!(n!=null&&n.includes(l.id))&&!(s!=null&&s.includes(l.id))),iy(e,t,i,"center")),Hi(i.options,Ks)),i.getLeftHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(e,t,n)=>{var s;const l=(s=n==null?void 0:n.map(u=>t.find(r=>r.id===u)).filter(Boolean))!=null?s:[];return iy(e,l,i,"left")},Hi(i.options,Ks)),i.getRightHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(e,t,n)=>{var s;const l=(s=n==null?void 0:n.map(u=>t.find(r=>r.id===u)).filter(Boolean))!=null?s:[];return iy(e,l,i,"right")},Hi(i.options,Ks)),i.getFooterGroups=Gi(()=>[i.getHeaderGroups()],e=>[...e].reverse(),Hi(i.options,Ks)),i.getLeftFooterGroups=Gi(()=>[i.getLeftHeaderGroups()],e=>[...e].reverse(),Hi(i.options,Ks)),i.getCenterFooterGroups=Gi(()=>[i.getCenterHeaderGroups()],e=>[...e].reverse(),Hi(i.options,Ks)),i.getRightFooterGroups=Gi(()=>[i.getRightHeaderGroups()],e=>[...e].reverse(),Hi(i.options,Ks)),i.getFlatHeaders=Gi(()=>[i.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),Hi(i.options,Ks)),i.getLeftFlatHeaders=Gi(()=>[i.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),Hi(i.options,Ks)),i.getCenterFlatHeaders=Gi(()=>[i.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),Hi(i.options,Ks)),i.getRightFlatHeaders=Gi(()=>[i.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),Hi(i.options,Ks)),i.getCenterLeafHeaders=Gi(()=>[i.getCenterFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),Hi(i.options,Ks)),i.getLeftLeafHeaders=Gi(()=>[i.getLeftFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),Hi(i.options,Ks)),i.getRightLeafHeaders=Gi(()=>[i.getRightFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),Hi(i.options,Ks)),i.getLeafHeaders=Gi(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(e,t,n)=>{var s,l,u,r,p,f;return[...(s=(l=e[0])==null?void 0:l.headers)!=null?s:[],...(u=(r=t[0])==null?void 0:r.headers)!=null?u:[],...(p=(f=n[0])==null?void 0:f.headers)!=null?p:[]].map(m=>m.getLeafHeaders()).flat()},Hi(i.options,Ks))}};function iy(i,e,t,n){var s,l;let u=0;const r=function(y,_){_===void 0&&(_=1),u=Math.max(u,_),y.filter(b=>b.getIsVisible()).forEach(b=>{var C;(C=b.columns)!=null&&C.length&&r(b.columns,_+1)},0)};r(i);let p=[];const f=(y,_)=>{const b={depth:_,id:[n,`${_}`].filter(Boolean).join("_"),headers:[]},C=[];y.forEach(E=>{const S=[...C].reverse()[0],x=E.column.depth===b.depth;let A,D=!1;if(x&&E.column.parent?A=E.column.parent:(A=E.column,D=!0),S&&(S==null?void 0:S.column)===A)S.subHeaders.push(E);else{const T=FT(t,A,{id:[n,_,A.id,E==null?void 0:E.id].filter(Boolean).join("_"),isPlaceholder:D,placeholderId:D?`${C.filter(k=>k.column===A).length}`:void 0,depth:_,index:C.length});T.subHeaders.push(E),C.push(T)}b.headers.push(E),E.headerGroup=b}),p.push(b),_>0&&f(C,_-1)},m=e.map((y,_)=>FT(t,y,{depth:u,index:_}));f(m,u-1),p.reverse();const v=y=>y.filter(b=>b.column.getIsVisible()).map(b=>{let C=0,E=0,S=[0];b.subHeaders&&b.subHeaders.length?(S=[],v(b.subHeaders).forEach(A=>{let{colSpan:D,rowSpan:T}=A;C+=D,S.push(T)})):C=1;const x=Math.min(...S);return E=E+x,b.colSpan=C,b.rowSpan=E,{colSpan:C,rowSpan:E}});return v((s=(l=p[0])==null?void 0:l.headers)!=null?s:[]),p}const Y_=(i,e,t,n,s,l,u)=>{let r={id:e,index:n,original:t,depth:s,parentId:u,_valuesCache:{},_uniqueValuesCache:{},getValue:p=>{if(r._valuesCache.hasOwnProperty(p))return r._valuesCache[p];const f=i.getColumn(p);if(f!=null&&f.accessorFn)return r._valuesCache[p]=f.accessorFn(r.original,n),r._valuesCache[p]},getUniqueValues:p=>{if(r._uniqueValuesCache.hasOwnProperty(p))return r._uniqueValuesCache[p];const f=i.getColumn(p);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(r._uniqueValuesCache[p]=f.columnDef.getUniqueValues(r.original,n),r._uniqueValuesCache[p]):(r._uniqueValuesCache[p]=[r.getValue(p)],r._uniqueValuesCache[p])},renderValue:p=>{var f;return(f=r.getValue(p))!=null?f:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>zQ(r.subRows,p=>p.subRows),getParentRow:()=>r.parentId?i.getRow(r.parentId,!0):void 0,getParentRows:()=>{let p=[],f=r;for(;;){const m=f.getParentRow();if(!m)break;p.push(m),f=m}return p.reverse()},getAllCells:Gi(()=>[i.getAllLeafColumns()],p=>p.map(f=>jQ(i,r,f,f.id)),Hi(i.options,"debugRows")),_getAllCellsByColumnId:Gi(()=>[r.getAllCells()],p=>p.reduce((f,m)=>(f[m.column.id]=m,f),{}),Hi(i.options,"debugRows"))};for(let p=0;p<i._features.length;p++){const f=i._features[p];f==null||f.createRow==null||f.createRow(r,i)}return r},BQ={createColumn:(i,e)=>{i._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():e.getPreFilteredRowModel(),i._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},YA=(i,e,t)=>{var n,s;const l=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((s=i.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(l))};YA.autoRemove=i=>Io(i);const ZA=(i,e,t)=>{var n;return!!(!((n=i.getValue(e))==null||(n=n.toString())==null)&&n.includes(t))};ZA.autoRemove=i=>Io(i);const XA=(i,e,t)=>{var n;return((n=i.getValue(e))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(t==null?void 0:t.toLowerCase())};XA.autoRemove=i=>Io(i);const KA=(i,e,t)=>{var n;return(n=i.getValue(e))==null?void 0:n.includes(t)};KA.autoRemove=i=>Io(i);const QA=(i,e,t)=>!t.some(n=>{var s;return!((s=i.getValue(e))!=null&&s.includes(n))});QA.autoRemove=i=>Io(i)||!(i!=null&&i.length);const JA=(i,e,t)=>t.some(n=>{var s;return(s=i.getValue(e))==null?void 0:s.includes(n)});JA.autoRemove=i=>Io(i)||!(i!=null&&i.length);const eM=(i,e,t)=>i.getValue(e)===t;eM.autoRemove=i=>Io(i);const tM=(i,e,t)=>i.getValue(e)==t;tM.autoRemove=i=>Io(i);const Z_=(i,e,t)=>{let[n,s]=t;const l=i.getValue(e);return l>=n&&l<=s};Z_.resolveFilterValue=i=>{let[e,t]=i,n=typeof e!="number"?parseFloat(e):e,s=typeof t!="number"?parseFloat(t):t,l=e===null||Number.isNaN(n)?-1/0:n,u=t===null||Number.isNaN(s)?1/0:s;if(l>u){const r=l;l=u,u=r}return[l,u]};Z_.autoRemove=i=>Io(i)||Io(i[0])&&Io(i[1]);const zl={includesString:YA,includesStringSensitive:ZA,equalsString:XA,arrIncludes:KA,arrIncludesAll:QA,arrIncludesSome:JA,equals:eM,weakEquals:tM,inNumberRange:Z_};function Io(i){return i==null||i===""}const $Q={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:no("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,e)=>{i.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(i.id);return typeof n=="string"?zl.includesString:typeof n=="number"?zl.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?zl.equals:Array.isArray(n)?zl.arrIncludes:zl.weakEquals},i.getFilterFn=()=>{var t,n;return Qx(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[i.columnDef.filterFn])!=null?t:zl[i.columnDef.filterFn]},i.getCanFilter=()=>{var t,n,s;return((t=i.columnDef.enableColumnFilter)!=null?t:!0)&&((n=e.options.enableColumnFilters)!=null?n:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(n=>n.id===i.id))==null?void 0:t.value},i.getFilterIndex=()=>{var t,n;return(t=(n=e.getState().columnFilters)==null?void 0:n.findIndex(s=>s.id===i.id))!=null?t:-1},i.setFilterValue=t=>{e.setColumnFilters(n=>{const s=i.getFilterFn(),l=n==null?void 0:n.find(m=>m.id===i.id),u=Dc(t,l?l.value:void 0);if(BT(s,u,i)){var r;return(r=n==null?void 0:n.filter(m=>m.id!==i.id))!=null?r:[]}const p={id:i.id,value:u};if(l){var f;return(f=n==null?void 0:n.map(m=>m.id===i.id?p:m))!=null?f:[]}return n!=null&&n.length?[...n,p]:[p]})}},createRow:(i,e)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=e=>{const t=i.getAllLeafColumns(),n=s=>{var l;return(l=Dc(e,s))==null?void 0:l.filter(u=>{const r=t.find(p=>p.id===u.id);if(r){const p=r.getFilterFn();if(BT(p,u.value,r))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(n)},i.resetColumnFilters=e=>{var t,n;i.setColumnFilters(e?[]:(t=(n=i.initialState)==null?void 0:n.columnFilters)!=null?t:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function BT(i,e,t){return(i&&i.autoRemove?i.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const UQ=(i,e,t)=>t.reduce((n,s)=>{const l=s.getValue(i);return n+(typeof l=="number"?l:0)},0),VQ=(i,e,t)=>{let n;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(n>l||n===void 0&&l>=l)&&(n=l)}),n},GQ=(i,e,t)=>{let n;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(n<l||n===void 0&&l>=l)&&(n=l)}),n},HQ=(i,e,t)=>{let n,s;return t.forEach(l=>{const u=l.getValue(i);u!=null&&(n===void 0?u>=u&&(n=s=u):(n>u&&(n=u),s<u&&(s=u)))}),[n,s]},qQ=(i,e)=>{let t=0,n=0;if(e.forEach(s=>{let l=s.getValue(i);l!=null&&(l=+l)>=l&&(++t,n+=l)}),t)return n/t},WQ=(i,e)=>{if(!e.length)return;const t=e.map(l=>l.getValue(i));if(!NQ(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),s=t.sort((l,u)=>l-u);return t.length%2!==0?s[n]:(s[n-1]+s[n])/2},YQ=(i,e)=>Array.from(new Set(e.map(t=>t.getValue(i))).values()),ZQ=(i,e)=>new Set(e.map(t=>t.getValue(i))).size,XQ=(i,e)=>e.length,tb={sum:UQ,min:VQ,max:GQ,extent:HQ,mean:qQ,median:WQ,unique:YQ,uniqueCount:ZQ,count:XQ},KQ={getDefaultColumnDef:()=>({aggregatedCell:i=>{var e,t;return(e=(t=i.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:no("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,e)=>{i.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(i.id)?t.filter(n=>n!==i.id):[...t??[],i.id])},i.getCanGroup=()=>{var t,n;return((t=i.columnDef.enableGrouping)!=null?t:!0)&&((n=e.options.enableGrouping)!=null?n:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(i.id)},i.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const t=i.getCanGroup();return()=>{t&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(i.id);if(typeof n=="number")return tb.sum;if(Object.prototype.toString.call(n)==="[object Date]")return tb.extent},i.getAggregationFn=()=>{var t,n;if(!i)throw new Error;return Qx(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(t=(n=e.options.aggregationFns)==null?void 0:n[i.columnDef.aggregationFn])!=null?t:tb[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=e=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(e),i.resetGrouping=e=>{var t,n;i.setGrouping(e?[]:(t=(n=i.initialState)==null?void 0:n.grouping)!=null?t:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,e)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=t=>{if(i._groupingValuesCache.hasOwnProperty(t))return i._groupingValuesCache[t];const n=e.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(i._groupingValuesCache[t]=n.columnDef.getGroupingValue(i.original),i._groupingValuesCache[t]):i.getValue(t)},i._groupingValuesCache={}},createCell:(i,e,t,n)=>{i.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&e.getIsGrouped(),i.getIsAggregated=()=>{var s;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function QQ(i,e,t){if(!(e!=null&&e.length)||!t)return i;const n=i.filter(l=>!e.includes(l.id));return t==="remove"?n:[...e.map(l=>i.find(u=>u.id===l)).filter(Boolean),...n]}const JQ={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:no("columnOrder",i)}),createColumn:(i,e)=>{i.getIndex=Gi(t=>[Df(e,t)],t=>t.findIndex(n=>n.id===i.id),Hi(e.options,"debugColumns")),i.getIsFirstColumn=t=>{var n;return((n=Df(e,t)[0])==null?void 0:n.id)===i.id},i.getIsLastColumn=t=>{var n;const s=Df(e,t);return((n=s[s.length-1])==null?void 0:n.id)===i.id}},createTable:i=>{i.setColumnOrder=e=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(e),i.resetColumnOrder=e=>{var t;i.setColumnOrder(e?[]:(t=i.initialState.columnOrder)!=null?t:[])},i._getOrderColumnsFn=Gi(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(e,t,n)=>s=>{let l=[];if(!(e!=null&&e.length))l=s;else{const u=[...e],r=[...s];for(;r.length&&u.length;){const p=u.shift(),f=r.findIndex(m=>m.id===p);f>-1&&l.push(r.splice(f,1)[0])}l=[...l,...r]}return QQ(l,t,n)},Hi(i.options,"debugTable"))}},ib=()=>({left:[],right:[]}),eJ={getInitialState:i=>({columnPinning:ib(),...i}),getDefaultOptions:i=>({onColumnPinningChange:no("columnPinning",i)}),createColumn:(i,e)=>{i.pin=t=>{const n=i.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var l,u;if(t==="right"){var r,p;return{left:((r=s==null?void 0:s.left)!=null?r:[]).filter(v=>!(n!=null&&n.includes(v))),right:[...((p=s==null?void 0:s.right)!=null?p:[]).filter(v=>!(n!=null&&n.includes(v))),...n]}}if(t==="left"){var f,m;return{left:[...((f=s==null?void 0:s.left)!=null?f:[]).filter(v=>!(n!=null&&n.includes(v))),...n],right:((m=s==null?void 0:s.right)!=null?m:[]).filter(v=>!(n!=null&&n.includes(v)))}}return{left:((l=s==null?void 0:s.left)!=null?l:[]).filter(v=>!(n!=null&&n.includes(v))),right:((u=s==null?void 0:s.right)!=null?u:[]).filter(v=>!(n!=null&&n.includes(v)))}})},i.getCanPin=()=>i.getLeafColumns().some(n=>{var s,l,u;return((s=n.columnDef.enablePinning)!=null?s:!0)&&((l=(u=e.options.enableColumnPinning)!=null?u:e.options.enablePinning)!=null?l:!0)}),i.getIsPinned=()=>{const t=i.getLeafColumns().map(r=>r.id),{left:n,right:s}=e.getState().columnPinning,l=t.some(r=>n==null?void 0:n.includes(r)),u=t.some(r=>s==null?void 0:s.includes(r));return l?"left":u?"right":!1},i.getPinnedIndex=()=>{var t,n;const s=i.getIsPinned();return s?(t=(n=e.getState().columnPinning)==null||(n=n[s])==null?void 0:n.indexOf(i.id))!=null?t:-1:0}},createRow:(i,e)=>{i.getCenterVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const l=[...n??[],...s??[]];return t.filter(u=>!l.includes(u.column.id))},Hi(e.options,"debugRows")),i.getLeftVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"left"})),Hi(e.options,"debugRows")),i.getRightVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"right"})),Hi(e.options,"debugRows"))},createTable:i=>{i.setColumnPinning=e=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(e),i.resetColumnPinning=e=>{var t,n;return i.setColumnPinning(e?ib():(t=(n=i.initialState)==null?void 0:n.columnPinning)!=null?t:ib())},i.getIsSomeColumnsPinned=e=>{var t;const n=i.getState().columnPinning;if(!e){var s,l;return!!((s=n.left)!=null&&s.length||(l=n.right)!=null&&l.length)}return!!((t=n[e])!=null&&t.length)},i.getLeftLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(e,t)=>(t??[]).map(n=>e.find(s=>s.id===n)).filter(Boolean),Hi(i.options,"debugColumns")),i.getRightLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(e,t)=>(t??[]).map(n=>e.find(s=>s.id===n)).filter(Boolean),Hi(i.options,"debugColumns")),i.getCenterLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n)=>{const s=[...t??[],...n??[]];return e.filter(l=>!s.includes(l.id))},Hi(i.options,"debugColumns"))}};function tJ(i){return i||(typeof document<"u"?document:null)}const ny={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nb=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),iJ={getDefaultColumnDef:()=>ny,getInitialState:i=>({columnSizing:{},columnSizingInfo:nb(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:no("columnSizing",i),onColumnSizingInfoChange:no("columnSizingInfo",i)}),createColumn:(i,e)=>{i.getSize=()=>{var t,n,s;const l=e.getState().columnSizing[i.id];return Math.min(Math.max((t=i.columnDef.minSize)!=null?t:ny.minSize,(n=l??i.columnDef.size)!=null?n:ny.size),(s=i.columnDef.maxSize)!=null?s:ny.maxSize)},i.getStart=Gi(t=>[t,Df(e,t),e.getState().columnSizing],(t,n)=>n.slice(0,i.getIndex(t)).reduce((s,l)=>s+l.getSize(),0),Hi(e.options,"debugColumns")),i.getAfter=Gi(t=>[t,Df(e,t),e.getState().columnSizing],(t,n)=>n.slice(i.getIndex(t)+1).reduce((s,l)=>s+l.getSize(),0),Hi(e.options,"debugColumns")),i.resetSize=()=>{e.setColumnSizing(t=>{let{[i.id]:n,...s}=t;return s})},i.getCanResize=()=>{var t,n;return((t=i.columnDef.enableResizing)!=null?t:!0)&&((n=e.options.enableColumnResizing)!=null?n:!0)},i.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,e)=>{i.getSize=()=>{let t=0;const n=s=>{if(s.subHeaders.length)s.subHeaders.forEach(n);else{var l;t+=(l=s.column.getSize())!=null?l:0}};return n(i),t},i.getStart=()=>{if(i.index>0){const t=i.headerGroup.headers[i.index-1];return t.getStart()+t.getSize()}return 0},i.getResizeHandler=t=>{const n=e.getColumn(i.column.id),s=n==null?void 0:n.getCanResize();return l=>{if(!n||!s||(l.persist==null||l.persist(),rb(l)&&l.touches&&l.touches.length>1))return;const u=i.getSize(),r=i?i.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[n.id,n.getSize()]],p=rb(l)?Math.round(l.touches[0].clientX):l.clientX,f={},m=(S,x)=>{typeof x=="number"&&(e.setColumnSizingInfo(A=>{var D,T;const k=e.options.columnResizeDirection==="rtl"?-1:1,N=(x-((D=A==null?void 0:A.startOffset)!=null?D:0))*k,W=Math.max(N/((T=A==null?void 0:A.startSize)!=null?T:0),-.999999);return A.columnSizingStart.forEach(Z=>{let[K,j]=Z;f[K]=Math.round(Math.max(j+j*W,0)*100)/100}),{...A,deltaOffset:N,deltaPercentage:W}}),(e.options.columnResizeMode==="onChange"||S==="end")&&e.setColumnSizing(A=>({...A,...f})))},v=S=>m("move",S),y=S=>{m("end",S),e.setColumnSizingInfo(x=>({...x,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},_=tJ(t),b={moveHandler:S=>v(S.clientX),upHandler:S=>{_==null||_.removeEventListener("mousemove",b.moveHandler),_==null||_.removeEventListener("mouseup",b.upHandler),y(S.clientX)}},C={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),v(S.touches[0].clientX),!1),upHandler:S=>{var x;_==null||_.removeEventListener("touchmove",C.moveHandler),_==null||_.removeEventListener("touchend",C.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),y((x=S.touches[0])==null?void 0:x.clientX)}},E=nJ()?{passive:!1}:!1;rb(l)?(_==null||_.addEventListener("touchmove",C.moveHandler,E),_==null||_.addEventListener("touchend",C.upHandler,E)):(_==null||_.addEventListener("mousemove",b.moveHandler,E),_==null||_.addEventListener("mouseup",b.upHandler,E)),e.setColumnSizingInfo(S=>({...S,startOffset:p,startSize:u,deltaOffset:0,deltaPercentage:0,columnSizingStart:r,isResizingColumn:n.id}))}}},createTable:i=>{i.setColumnSizing=e=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(e),i.setColumnSizingInfo=e=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(e),i.resetColumnSizing=e=>{var t;i.setColumnSizing(e?{}:(t=i.initialState.columnSizing)!=null?t:{})},i.resetHeaderSizeInfo=e=>{var t;i.setColumnSizingInfo(e?nb():(t=i.initialState.columnSizingInfo)!=null?t:nb())},i.getTotalSize=()=>{var e,t;return(e=(t=i.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getLeftTotalSize=()=>{var e,t;return(e=(t=i.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getCenterTotalSize=()=>{var e,t;return(e=(t=i.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getRightTotalSize=()=>{var e,t;return(e=(t=i.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0}}};let ry=null;function nJ(){if(typeof ry=="boolean")return ry;let i=!1;try{const e={get passive(){return i=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{i=!1}return ry=i,ry}function rb(i){return i.type==="touchstart"}const rJ={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:no("columnVisibility",i)}),createColumn:(i,e)=>{i.toggleVisibility=t=>{i.getCanHide()&&e.setColumnVisibility(n=>({...n,[i.id]:t??!i.getIsVisible()}))},i.getIsVisible=()=>{var t,n;const s=i.columns;return(t=s.length?s.some(l=>l.getIsVisible()):(n=e.getState().columnVisibility)==null?void 0:n[i.id])!=null?t:!0},i.getCanHide=()=>{var t,n;return((t=i.columnDef.enableHiding)!=null?t:!0)&&((n=e.options.enableHiding)!=null?n:!0)},i.getToggleVisibilityHandler=()=>t=>{i.toggleVisibility==null||i.toggleVisibility(t.target.checked)}},createRow:(i,e)=>{i._getAllVisibleCells=Gi(()=>[i.getAllCells(),e.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),Hi(e.options,"debugRows")),i.getVisibleCells=Gi(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(t,n,s)=>[...t,...n,...s],Hi(e.options,"debugRows"))},createTable:i=>{const e=(t,n)=>Gi(()=>[n(),n().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(l=>l.getIsVisible==null?void 0:l.getIsVisible()),Hi(i.options,"debugColumns"));i.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=t=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(t),i.resetColumnVisibility=t=>{var n;i.setColumnVisibility(t?{}:(n=i.initialState.columnVisibility)!=null?n:{})},i.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((s,l)=>({...s,[l.id]:t||!(l.getCanHide!=null&&l.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;i.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function Df(i,e){return e?e==="center"?i.getCenterVisibleLeafColumns():e==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const sJ={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},aJ={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:no("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const n=(t=i.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(i,e)=>{i.getCanGlobalFilter=()=>{var t,n,s,l;return((t=i.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=e.options.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((l=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(i))!=null?l:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>zl.includesString,i.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:n}=i.options;return Qx(n)?n:n==="auto"?i.getGlobalAutoFilterFn():(e=(t=i.options.filterFns)==null?void 0:t[n])!=null?e:zl[n]},i.setGlobalFilter=e=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(e)},i.resetGlobalFilter=e=>{i.setGlobalFilter(e?void 0:i.initialState.globalFilter)}}},oJ={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:no("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let e=!1,t=!1;i._autoResetExpanded=()=>{var n,s;if(!e){i._queue(()=>{e=!0});return}if((n=(s=i.options.autoResetAll)!=null?s:i.options.autoResetExpanded)!=null?n:!i.options.manualExpanding){if(t)return;t=!0,i._queue(()=>{i.resetExpanded(),t=!1})}},i.setExpanded=n=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(n),i.toggleAllRowsExpanded=n=>{n??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=n=>{var s,l;i.setExpanded(n?{}:(s=(l=i.initialState)==null?void 0:l.expanded)!=null?s:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const n=i.getState().expanded;return n===!0||Object.values(n).some(Boolean)},i.getIsAllRowsExpanded=()=>{const n=i.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||i.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},i.getExpandedDepth=()=>{let n=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(l=>{const u=l.split(".");n=Math.max(n,u.length)}),n},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,e)=>{i.toggleExpanded=t=>{e.setExpanded(n=>{var s;const l=n===!0?!0:!!(n!=null&&n[i.id]);let u={};if(n===!0?Object.keys(e.getRowModel().rowsById).forEach(r=>{u[r]=!0}):u=n,t=(s=t)!=null?s:!l,!l&&t)return{...u,[i.id]:!0};if(l&&!t){const{[i.id]:r,...p}=u;return p}return n})},i.getIsExpanded=()=>{var t;const n=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(i))!=null?t:n===!0||n!=null&&n[i.id])},i.getCanExpand=()=>{var t,n,s;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(i))!=null?t:((n=e.options.enableExpanding)!=null?n:!0)&&!!((s=i.subRows)!=null&&s.length)},i.getIsAllParentsExpanded=()=>{let t=!0,n=i;for(;t&&n.parentId;)n=e.getRow(n.parentId,!0),t=n.getIsExpanded();return t},i.getToggleExpandedHandler=()=>{const t=i.getCanExpand();return()=>{t&&i.toggleExpanded()}}}},f1=0,m1=10,sb=()=>({pageIndex:f1,pageSize:m1}),lJ={getInitialState:i=>({...i,pagination:{...sb(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:no("pagination",i)}),createTable:i=>{let e=!1,t=!1;i._autoResetPageIndex=()=>{var n,s;if(!e){i._queue(()=>{e=!0});return}if((n=(s=i.options.autoResetAll)!=null?s:i.options.autoResetPageIndex)!=null?n:!i.options.manualPagination){if(t)return;t=!0,i._queue(()=>{i.resetPageIndex(),t=!1})}},i.setPagination=n=>{const s=l=>Dc(n,l);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(s)},i.resetPagination=n=>{var s;i.setPagination(n?sb():(s=i.initialState.pagination)!=null?s:sb())},i.setPageIndex=n=>{i.setPagination(s=>{let l=Dc(n,s.pageIndex);const u=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return l=Math.max(0,Math.min(l,u)),{...s,pageIndex:l}})},i.resetPageIndex=n=>{var s,l;i.setPageIndex(n?f1:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageIndex)!=null?s:f1)},i.resetPageSize=n=>{var s,l;i.setPageSize(n?m1:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageSize)!=null?s:m1)},i.setPageSize=n=>{i.setPagination(s=>{const l=Math.max(1,Dc(n,s.pageSize)),u=s.pageSize*s.pageIndex,r=Math.floor(u/l);return{...s,pageIndex:r,pageSize:l}})},i.setPageCount=n=>i.setPagination(s=>{var l;let u=Dc(n,(l=i.options.pageCount)!=null?l:-1);return typeof u=="number"&&(u=Math.max(-1,u)),{...s,pageCount:u}}),i.getPageOptions=Gi(()=>[i.getPageCount()],n=>{let s=[];return n&&n>0&&(s=[...new Array(n)].fill(null).map((l,u)=>u)),s},Hi(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:n}=i.getState().pagination,s=i.getPageCount();return s===-1?!0:s===0?!1:n<s-1},i.previousPage=()=>i.setPageIndex(n=>n-1),i.nextPage=()=>i.setPageIndex(n=>n+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var n;return(n=i.options.pageCount)!=null?n:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var n;return(n=i.options.rowCount)!=null?n:i.getPrePaginationRowModel().rows.length}}},ab=()=>({top:[],bottom:[]}),cJ={getInitialState:i=>({rowPinning:ab(),...i}),getDefaultOptions:i=>({onRowPinningChange:no("rowPinning",i)}),createRow:(i,e)=>{i.pin=(t,n,s)=>{const l=n?i.getLeafRows().map(p=>{let{id:f}=p;return f}):[],u=s?i.getParentRows().map(p=>{let{id:f}=p;return f}):[],r=new Set([...u,i.id,...l]);e.setRowPinning(p=>{var f,m;if(t==="bottom"){var v,y;return{top:((v=p==null?void 0:p.top)!=null?v:[]).filter(C=>!(r!=null&&r.has(C))),bottom:[...((y=p==null?void 0:p.bottom)!=null?y:[]).filter(C=>!(r!=null&&r.has(C))),...Array.from(r)]}}if(t==="top"){var _,b;return{top:[...((_=p==null?void 0:p.top)!=null?_:[]).filter(C=>!(r!=null&&r.has(C))),...Array.from(r)],bottom:((b=p==null?void 0:p.bottom)!=null?b:[]).filter(C=>!(r!=null&&r.has(C)))}}return{top:((f=p==null?void 0:p.top)!=null?f:[]).filter(C=>!(r!=null&&r.has(C))),bottom:((m=p==null?void 0:p.bottom)!=null?m:[]).filter(C=>!(r!=null&&r.has(C)))}})},i.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:s}=e.options;return typeof n=="function"?n(i):(t=n??s)!=null?t:!0},i.getIsPinned=()=>{const t=[i.id],{top:n,bottom:s}=e.getState().rowPinning,l=t.some(r=>n==null?void 0:n.includes(r)),u=t.some(r=>s==null?void 0:s.includes(r));return l?"top":u?"bottom":!1},i.getPinnedIndex=()=>{var t,n;const s=i.getIsPinned();if(!s)return-1;const l=(t=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(u=>{let{id:r}=u;return r});return(n=l==null?void 0:l.indexOf(i.id))!=null?n:-1}},createTable:i=>{i.setRowPinning=e=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(e),i.resetRowPinning=e=>{var t,n;return i.setRowPinning(e?ab():(t=(n=i.initialState)==null?void 0:n.rowPinning)!=null?t:ab())},i.getIsSomeRowsPinned=e=>{var t;const n=i.getState().rowPinning;if(!e){var s,l;return!!((s=n.top)!=null&&s.length||(l=n.bottom)!=null&&l.length)}return!!((t=n[e])!=null&&t.length)},i._getPinnedRows=(e,t,n)=>{var s;return((s=i.options.keepPinnedRows)==null||s?(t??[]).map(u=>{const r=i.getRow(u,!0);return r.getIsAllParentsExpanded()?r:null}):(t??[]).map(u=>e.find(r=>r.id===u))).filter(Boolean).map(u=>({...u,position:n}))},i.getTopRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(e,t)=>i._getPinnedRows(e,t,"top"),Hi(i.options,"debugRows")),i.getBottomRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(e,t)=>i._getPinnedRows(e,t,"bottom"),Hi(i.options,"debugRows")),i.getCenterRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(e,t,n)=>{const s=new Set([...t??[],...n??[]]);return e.filter(l=>!s.has(l.id))},Hi(i.options,"debugRows"))}},uJ={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:no("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=e=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(e),i.resetRowSelection=e=>{var t;return i.setRowSelection(e?{}:(t=i.initialState.rowSelection)!=null?t:{})},i.toggleAllRowsSelected=e=>{i.setRowSelection(t=>{e=typeof e<"u"?e:!i.getIsAllRowsSelected();const n={...t},s=i.getPreGroupedRowModel().flatRows;return e?s.forEach(l=>{l.getCanSelect()&&(n[l.id]=!0)}):s.forEach(l=>{delete n[l.id]}),n})},i.toggleAllPageRowsSelected=e=>i.setRowSelection(t=>{const n=typeof e<"u"?e:!i.getIsAllPageRowsSelected(),s={...t};return i.getRowModel().rows.forEach(l=>{g1(s,l.id,n,!0,i)}),s}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getCoreRowModel()],(e,t)=>Object.keys(e).length?ob(i,t):{rows:[],flatRows:[],rowsById:{}},Hi(i.options,"debugTable")),i.getFilteredSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(e,t)=>Object.keys(e).length?ob(i,t):{rows:[],flatRows:[],rowsById:{}},Hi(i.options,"debugTable")),i.getGroupedSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getSortedRowModel()],(e,t)=>Object.keys(e).length?ob(i,t):{rows:[],flatRows:[],rowsById:{}},Hi(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const e=i.getFilteredRowModel().flatRows,{rowSelection:t}=i.getState();let n=!!(e.length&&Object.keys(t).length);return n&&e.some(s=>s.getCanSelect()&&!t[s.id])&&(n=!1),n},i.getIsAllPageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=i.getState();let n=!!e.length;return n&&e.some(s=>!t[s.id])&&(n=!1),n},i.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=i.getState().rowSelection)!=null?e:{}).length;return t>0&&t<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>e=>{i.toggleAllRowsSelected(e.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>e=>{i.toggleAllPageRowsSelected(e.target.checked)}},createRow:(i,e)=>{i.toggleSelected=(t,n)=>{const s=i.getIsSelected();e.setRowSelection(l=>{var u;if(t=typeof t<"u"?t:!s,i.getCanSelect()&&s===t)return l;const r={...l};return g1(r,i.id,t,(u=n==null?void 0:n.selectChildren)!=null?u:!0,e),r})},i.getIsSelected=()=>{const{rowSelection:t}=e.getState();return X_(i,t)},i.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return y1(i,t)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return y1(i,t)==="all"},i.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(i):(t=e.options.enableRowSelection)!=null?t:!0},i.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(i):(t=e.options.enableSubRowSelection)!=null?t:!0},i.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(i):(t=e.options.enableMultiRowSelection)!=null?t:!0},i.getToggleSelectedHandler=()=>{const t=i.getCanSelect();return n=>{var s;t&&i.toggleSelected((s=n.target)==null?void 0:s.checked)}}}},g1=(i,e,t,n,s)=>{var l;const u=s.getRow(e,!0);t?(u.getCanMultiSelect()||Object.keys(i).forEach(r=>delete i[r]),u.getCanSelect()&&(i[e]=!0)):delete i[e],n&&(l=u.subRows)!=null&&l.length&&u.getCanSelectSubRows()&&u.subRows.forEach(r=>g1(i,r.id,t,n,s))};function ob(i,e){const t=i.getState().rowSelection,n=[],s={},l=function(u,r){return u.map(p=>{var f;const m=X_(p,t);if(m&&(n.push(p),s[p.id]=p),(f=p.subRows)!=null&&f.length&&(p={...p,subRows:l(p.subRows)}),m)return p}).filter(Boolean)};return{rows:l(e.rows),flatRows:n,rowsById:s}}function X_(i,e){var t;return(t=e[i.id])!=null?t:!1}function y1(i,e,t){var n;if(!((n=i.subRows)!=null&&n.length))return!1;let s=!0,l=!1;return i.subRows.forEach(u=>{if(!(l&&!s)&&(u.getCanSelect()&&(X_(u,e)?l=!0:s=!1),u.subRows&&u.subRows.length)){const r=y1(u,e);r==="all"?l=!0:(r==="some"&&(l=!0),s=!1)}}),s?"all":l?"some":!1}const x1=/([0-9]+)/gm,dJ=(i,e,t)=>iM(qc(i.getValue(t)).toLowerCase(),qc(e.getValue(t)).toLowerCase()),hJ=(i,e,t)=>iM(qc(i.getValue(t)),qc(e.getValue(t))),pJ=(i,e,t)=>K_(qc(i.getValue(t)).toLowerCase(),qc(e.getValue(t)).toLowerCase()),fJ=(i,e,t)=>K_(qc(i.getValue(t)),qc(e.getValue(t))),mJ=(i,e,t)=>{const n=i.getValue(t),s=e.getValue(t);return n>s?1:n<s?-1:0},gJ=(i,e,t)=>K_(i.getValue(t),e.getValue(t));function K_(i,e){return i===e?0:i>e?1:-1}function qc(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function iM(i,e){const t=i.split(x1).filter(Boolean),n=e.split(x1).filter(Boolean);for(;t.length&&n.length;){const s=t.shift(),l=n.shift(),u=parseInt(s,10),r=parseInt(l,10),p=[u,r].sort();if(isNaN(p[0])){if(s>l)return 1;if(l>s)return-1;continue}if(isNaN(p[1]))return isNaN(u)?-1:1;if(u>r)return 1;if(r>u)return-1}return t.length-n.length}const xf={alphanumeric:dJ,alphanumericCaseSensitive:hJ,text:pJ,textCaseSensitive:fJ,datetime:mJ,basic:gJ},yJ={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:no("sorting",i),isMultiSortEvent:e=>e.shiftKey}),createColumn:(i,e)=>{i.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const s of t){const l=s==null?void 0:s.getValue(i.id);if(Object.prototype.toString.call(l)==="[object Date]")return xf.datetime;if(typeof l=="string"&&(n=!0,l.split(x1).length>1))return xf.alphanumeric}return n?xf.text:xf.basic},i.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var t,n;if(!i)throw new Error;return Qx(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(t=(n=e.options.sortingFns)==null?void 0:n[i.columnDef.sortingFn])!=null?t:xf[i.columnDef.sortingFn]},i.toggleSorting=(t,n)=>{const s=i.getNextSortingOrder(),l=typeof t<"u"&&t!==null;e.setSorting(u=>{const r=u==null?void 0:u.find(_=>_.id===i.id),p=u==null?void 0:u.findIndex(_=>_.id===i.id);let f=[],m,v=l?t:s==="desc";if(u!=null&&u.length&&i.getCanMultiSort()&&n?r?m="toggle":m="add":u!=null&&u.length&&p!==u.length-1?m="replace":r?m="toggle":m="replace",m==="toggle"&&(l||s||(m="remove")),m==="add"){var y;f=[...u,{id:i.id,desc:v}],f.splice(0,f.length-((y=e.options.maxMultiSortColCount)!=null?y:Number.MAX_SAFE_INTEGER))}else m==="toggle"?f=u.map(_=>_.id===i.id?{..._,desc:v}:_):m==="remove"?f=u.filter(_=>_.id!==i.id):f=[{id:i.id,desc:v}];return f})},i.getFirstSortDir=()=>{var t,n;return((t=(n=i.columnDef.sortDescFirst)!=null?n:e.options.sortDescFirst)!=null?t:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=t=>{var n,s;const l=i.getFirstSortDir(),u=i.getIsSorted();return u?u!==l&&((n=e.options.enableSortingRemoval)==null||n)&&(!(t&&(s=e.options.enableMultiRemove)!=null)||s)?!1:u==="desc"?"asc":"desc":l},i.getCanSort=()=>{var t,n;return((t=i.columnDef.enableSorting)!=null?t:!0)&&((n=e.options.enableSorting)!=null?n:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var t,n;return(t=(n=i.columnDef.enableMultiSort)!=null?n:e.options.enableMultiSort)!=null?t:!!i.accessorFn},i.getIsSorted=()=>{var t;const n=(t=e.getState().sorting)==null?void 0:t.find(s=>s.id===i.id);return n?n.desc?"desc":"asc":!1},i.getSortIndex=()=>{var t,n;return(t=(n=e.getState().sorting)==null?void 0:n.findIndex(s=>s.id===i.id))!=null?t:-1},i.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==i.id):[])},i.getToggleSortingHandler=()=>{const t=i.getCanSort();return n=>{t&&(n.persist==null||n.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(n):!1))}}},createTable:i=>{i.setSorting=e=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(e),i.resetSorting=e=>{var t,n;i.setSorting(e?[]:(t=(n=i.initialState)==null?void 0:n.sorting)!=null?t:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},xJ=[FQ,rJ,JQ,eJ,BQ,$Q,sJ,aJ,yJ,KQ,oJ,lJ,cJ,uJ,iJ];function vJ(i){var e,t;const n=[...xJ,...(e=i._features)!=null?e:[]];let s={_features:n};const l=s._features.reduce((y,_)=>Object.assign(y,_.getDefaultOptions==null?void 0:_.getDefaultOptions(s)),{}),u=y=>s.options.mergeOptions?s.options.mergeOptions(l,y):{...l,...y};let p={...{},...(t=i.initialState)!=null?t:{}};s._features.forEach(y=>{var _;p=(_=y.getInitialState==null?void 0:y.getInitialState(p))!=null?_:p});const f=[];let m=!1;const v={_features:n,options:{...l,...i},initialState:p,_queue:y=>{f.push(y),m||(m=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();m=!1}).catch(_=>setTimeout(()=>{throw _})))},reset:()=>{s.setState(s.initialState)},setOptions:y=>{const _=Dc(y,s.options);s.options=u(_)},getState:()=>s.options.state,setState:y=>{s.options.onStateChange==null||s.options.onStateChange(y)},_getRowId:(y,_,b)=>{var C;return(C=s.options.getRowId==null?void 0:s.options.getRowId(y,_,b))!=null?C:`${b?[b.id,_].join("."):_}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(y,_)=>{let b=(_?s.getPrePaginationRowModel():s.getRowModel()).rowsById[y];if(!b&&(b=s.getCoreRowModel().rowsById[y],!b))throw new Error;return b},_getDefaultColumnDef:Gi(()=>[s.options.defaultColumn],y=>{var _;return y=(_=y)!=null?_:{},{header:b=>{const C=b.header.column.columnDef;return C.accessorKey?C.accessorKey:C.accessorFn?C.id:null},cell:b=>{var C,E;return(C=(E=b.renderValue())==null||E.toString==null?void 0:E.toString())!=null?C:null},...s._features.reduce((b,C)=>Object.assign(b,C.getDefaultColumnDef==null?void 0:C.getDefaultColumnDef()),{}),...y}},Hi(i,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Gi(()=>[s._getColumnDefs()],y=>{const _=function(b,C,E){return E===void 0&&(E=0),b.map(S=>{const x=OQ(s,S,E,C),A=S;return x.columns=A.columns?_(A.columns,x,E+1):[],x})};return _(y)},Hi(i,"debugColumns")),getAllFlatColumns:Gi(()=>[s.getAllColumns()],y=>y.flatMap(_=>_.getFlatColumns()),Hi(i,"debugColumns")),_getAllFlatColumnsById:Gi(()=>[s.getAllFlatColumns()],y=>y.reduce((_,b)=>(_[b.id]=b,_),{}),Hi(i,"debugColumns")),getAllLeafColumns:Gi(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(y,_)=>{let b=y.flatMap(C=>C.getLeafColumns());return _(b)},Hi(i,"debugColumns")),getColumn:y=>s._getAllFlatColumnsById()[y]};Object.assign(s,v);for(let y=0;y<s._features.length;y++){const _=s._features[y];_==null||_.createTable==null||_.createTable(s)}return s}function nM(){return i=>Gi(()=>[i.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(s,l,u){l===void 0&&(l=0);const r=[];for(let f=0;f<s.length;f++){const m=Y_(i,i._getRowId(s[f],f,u),s[f],f,l,void 0,u==null?void 0:u.id);if(t.flatRows.push(m),t.rowsById[m.id]=m,r.push(m),i.options.getSubRows){var p;m.originalSubRows=i.options.getSubRows(s[f],f),(p=m.originalSubRows)!=null&&p.length&&(m.subRows=n(m.originalSubRows,l+1,m))}}return r};return t.rows=n(e),t},Hi(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}function bJ(i){const e=[],t=n=>{var s;e.push(n),(s=n.subRows)!=null&&s.length&&n.getIsExpanded()&&n.subRows.forEach(t)};return i.rows.forEach(t),{rows:e,flatRows:i.flatRows,rowsById:i.rowsById}}function _J(i,e,t){return t.options.filterFromLeafRows?wJ(i,e,t):CJ(i,e,t)}function wJ(i,e,t){var n;const s=[],l={},u=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,r=function(p,f){f===void 0&&(f=0);const m=[];for(let y=0;y<p.length;y++){var v;let _=p[y];const b=Y_(t,_.id,_.original,_.index,_.depth,void 0,_.parentId);if(b.columnFilters=_.columnFilters,(v=_.subRows)!=null&&v.length&&f<u){if(b.subRows=r(_.subRows,f+1),_=b,e(_)&&!b.subRows.length){m.push(_),l[_.id]=_,s.push(_);continue}if(e(_)||b.subRows.length){m.push(_),l[_.id]=_,s.push(_);continue}}else _=b,e(_)&&(m.push(_),l[_.id]=_,s.push(_))}return m};return{rows:r(i),flatRows:s,rowsById:l}}function CJ(i,e,t){var n;const s=[],l={},u=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,r=function(p,f){f===void 0&&(f=0);const m=[];for(let y=0;y<p.length;y++){let _=p[y];if(e(_)){var v;if((v=_.subRows)!=null&&v.length&&f<u){const C=Y_(t,_.id,_.original,_.index,_.depth,void 0,_.parentId);C.subRows=r(_.subRows,f+1),_=C}m.push(_),s.push(_),l[_.id]=_}}return m};return{rows:r(i),flatRows:s,rowsById:l}}function rM(){return i=>Gi(()=>[i.getPreFilteredRowModel(),i.getState().columnFilters,i.getState().globalFilter],(e,t,n)=>{if(!e.rows.length||!(t!=null&&t.length)&&!n){for(let y=0;y<e.flatRows.length;y++)e.flatRows[y].columnFilters={},e.flatRows[y].columnFiltersMeta={};return e}const s=[],l=[];(t??[]).forEach(y=>{var _;const b=i.getColumn(y.id);if(!b)return;const C=b.getFilterFn();C&&s.push({id:y.id,filterFn:C,resolvedValue:(_=C.resolveFilterValue==null?void 0:C.resolveFilterValue(y.value))!=null?_:y.value})});const u=(t??[]).map(y=>y.id),r=i.getGlobalFilterFn(),p=i.getAllLeafColumns().filter(y=>y.getCanGlobalFilter());n&&r&&p.length&&(u.push("__global__"),p.forEach(y=>{var _;l.push({id:y.id,filterFn:r,resolvedValue:(_=r.resolveFilterValue==null?void 0:r.resolveFilterValue(n))!=null?_:n})}));let f,m;for(let y=0;y<e.flatRows.length;y++){const _=e.flatRows[y];if(_.columnFilters={},s.length)for(let b=0;b<s.length;b++){f=s[b];const C=f.id;_.columnFilters[C]=f.filterFn(_,C,f.resolvedValue,E=>{_.columnFiltersMeta[C]=E})}if(l.length){for(let b=0;b<l.length;b++){m=l[b];const C=m.id;if(m.filterFn(_,C,m.resolvedValue,E=>{_.columnFiltersMeta[C]=E})){_.columnFilters.__global__=!0;break}}_.columnFilters.__global__!==!0&&(_.columnFilters.__global__=!1)}}const v=y=>{for(let _=0;_<u.length;_++)if(y.columnFilters[u[_]]===!1)return!1;return!0};return _J(e.rows,v,i)},Hi(i.options,"debugTable","getFilteredRowModel",()=>i._autoResetPageIndex()))}function sM(i){return e=>Gi(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:s,pageIndex:l}=t;let{rows:u,flatRows:r,rowsById:p}=n;const f=s*l,m=f+s;u=u.slice(f,m);let v;e.options.paginateExpandedRows?v={rows:u,flatRows:r,rowsById:p}:v=bJ({rows:u,flatRows:r,rowsById:p}),v.flatRows=[];const y=_=>{v.flatRows.push(_),_.subRows.length&&_.subRows.forEach(y)};return v.rows.forEach(y),v},Hi(e.options,"debugTable"))}function aM(){return i=>Gi(()=>[i.getState().sorting,i.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const n=i.getState().sorting,s=[],l=n.filter(p=>{var f;return(f=i.getColumn(p.id))==null?void 0:f.getCanSort()}),u={};l.forEach(p=>{const f=i.getColumn(p.id);f&&(u[p.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const r=p=>{const f=p.map(m=>({...m}));return f.sort((m,v)=>{for(let _=0;_<l.length;_+=1){var y;const b=l[_],C=u[b.id],E=C.sortUndefined,S=(y=b==null?void 0:b.desc)!=null?y:!1;let x=0;if(E){const A=m.getValue(b.id),D=v.getValue(b.id),T=A===void 0,k=D===void 0;if(T||k){if(E==="first")return T?-1:1;if(E==="last")return T?1:-1;x=T&&k?0:T?E:-E}}if(x===0&&(x=C.sortingFn(m,v,b.id)),x!==0)return S&&(x*=-1),C.invertSorting&&(x*=-1),x}return m.index-v.index}),f.forEach(m=>{var v;s.push(m),(v=m.subRows)!=null&&v.length&&(m.subRows=r(m.subRows))}),f};return{rows:r(t.rows),flatRows:s,rowsById:t.rowsById}},Hi(i.options,"debugTable","getSortedRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function lx(i,e){return i?TJ(i)?Fe.createElement(i,e):i:null}function TJ(i){return SJ(i)||typeof i=="function"||EJ(i)}function SJ(i){return typeof i=="function"&&(()=>{const e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()}function EJ(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function oM(i){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[t]=Fe.useState(()=>({current:vJ(e)})),[n,s]=Fe.useState(()=>t.current.initialState);return t.current.setOptions(l=>({...l,...i,state:{...n,...i.state},onStateChange:u=>{s(u),i.onStateChange==null||i.onStateChange(u)}})),t.current}const kJ="_buttonContainer_jed2c_1",AJ="_leftSection_jed2c_6",MJ="_rightSection_jed2c_13",PJ="_inputContainer_jed2c_20",IJ="_singleSelectContainer_jed2c_29",DJ="_singleSelectMenuItem_jed2c_38",lb={buttonContainer:kJ,leftSection:AJ,rightSection:MJ,inputContainer:PJ,singleSelectContainer:IJ,singleSelectMenuItem:DJ},RJ="_mutedText_tjqo0_1",LJ={mutedText:RJ},NJ=({onSuccess:i,onError:e}={})=>{const t=vo(),{show:n}=wa(Oe.t("Error renaming evaluation"),{critical:!0}),{mutate:s,isLoading:l,error:u}=Yc(({id:r,name:p})=>Ms.updateBacktestCrudBacktestsBacktestIdPatch(r,{name:p}),{onSuccess:(r,p)=>{t.setQueryData(["backtests"],f=>f==null?void 0:f.map(m=>m.id===p.id?{...m,name:p.name}:m)),i==null||i()},onError:r=>{n(),console.log("There was an error renaming the evaluation",r),e==null||e()}});return{renameEvaluation:s,isSubmitting:l,error:u}},zJ=ho.object({name:ho.string().min(1,{message:Oe.t("Name is required")})}),jJ=({id:i,onClose:e,initialName:t=""})=>{const{renameEvaluation:n,isSubmitting:s}=NJ({onSuccess:()=>{e()}}),{control:l,handleSubmit:u,formState:{errors:r}}=H_({resolver:q_(zJ),defaultValues:{name:t}}),p=f=>{n({id:i,name:f.name})};return Y.jsx(Do,{onClose:e,dataTest:"edit-backtest-modal",children:Y.jsxs("form",{onSubmit:u(p),children:[Y.jsx(dd,{children:Oe.t("Rename evaluation")}),Y.jsxs(Wc,{children:[Y.jsx(Hu,{htmlFor:"backtest-name",children:Oe.t("Name")}),Y.jsx(Ic,{name:"name",control:l,render:({field:f})=>Y.jsx(om,{...f,type:"text",error:!!r.name,onChange:m=>f.onChange(m.value),dataTest:"backtest-name-input"})}),r.name&&Y.jsx("p",{className:LJ.mutedText,children:r.name.message})]}),Y.jsx(hd,{children:Y.jsxs(pd,{children:[Y.jsx(sn,{onClick:e,secondary:!0,disabled:s,dataTest:"cancel-edit-backtest-button",children:Oe.t("Cancel")}),Y.jsx(sn,{type:"submit",primary:!0,loading:s,disabled:s,dataTest:"submit-edit-backtest-button",children:Oe.t("Save")})]})})]})})},OJ=({onSuccess:i,onError:e}={})=>{const t=vo(),{show:n}=wa(Oe.t("Evaluation deleted"),{success:!0}),{show:s}=wa(Oe.t("Failed to delete evaluation"),{success:!1}),{mutate:l,isLoading:u,isError:r,error:p}=Yc({mutationFn:f=>Ms.deleteBacktestCrudBacktestsBacktestIdDelete(f),onSuccess:f=>{t.invalidateQueries({queryKey:["backtests"]}),n(),i==null||i({id:f})},onError:f=>{console.error(f),s(),e==null||e()}});return{deleteBacktest:l,isLoading:u,isError:r,error:p}},FJ=({id:i,onClose:e})=>{const{deleteBacktest:t,isLoading:n}=OJ({onSuccess:()=>{e()}});return Y.jsxs(Do,{onClose:e,dataTest:"delete-backtest-modal",children:[Y.jsx(dd,{children:Oe.t("Delete evaluation")}),Y.jsx(Wc,{children:Y.jsx("p",{children:Oe.t("Are you sure you want to delete this evaluation? This action cannot be undone.")})}),Y.jsx(hd,{children:Y.jsxs(pd,{children:[Y.jsx(sn,{onClick:e,secondary:!0,disabled:n,dataTest:"cancel-delete-backtest-button",children:Oe.t("Cancel")}),Y.jsx(sn,{primary:!0,onClick:()=>t(i),destructive:!0,loading:n,disabled:n,dataTest:"submit-delete-backtest-button",children:Oe.t("Delete")})]})})]})},BJ=({id:i,name:e})=>{const[t,n]=Fe.useState(!1),[s,l]=Fe.useState(!1),[u,r]=Fe.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsx(oA,{small:!0,open:t,icon:Y.jsx(um,{}),onClick:()=>{n(p=>!p)},component:Y.jsxs(_1,{dense:!0,children:[Y.jsx(Kr,{label:Oe.t("Rename"),dataTest:"backtest-overflow-rename",icon:Y.jsx(E1,{}),onClick:()=>{r(!0),n(!1)}}),Y.jsx(Kr,{label:Oe.t("Delete"),dataTest:"backtest-overflow-delete",destructive:!0,icon:Y.jsx(cm,{}),onClick:()=>{l(!0),n(!1)}})]})}),u&&Y.jsx(jJ,{id:i,initialName:e??"",onClose:()=>r(!1)}),s&&Y.jsx(FJ,{id:i,onClose:()=>l(!1)})]})},$J="_inputContainer_1xqyj_1",UJ="_singleSelectContainer_1xqyj_10",VJ="_singleSelectMenuItem_1xqyj_19",cb={inputContainer:$J,singleSelectContainer:UJ,singleSelectMenuItem:VJ},GJ=({table:i,models:e})=>{var t,n;return Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:cb.inputContainer,children:Y.jsx(om,{dense:!0,placeholder:Oe.t("Search"),value:((t=i.getColumn("name"))==null?void 0:t.getFilterValue())??"",onChange:s=>{var l;return(l=i.getColumn("name"))==null?void 0:l.setFilterValue(s.value)}})}),Y.jsx("div",{className:cb.singleSelectContainer,children:Y.jsx(Hl,{filterable:!0,noMatchText:Oe.t("No models found"),dense:!0,clearable:!0,clearText:Oe.t("Clear"),selected:(n=i.getColumn("modelId"))==null?void 0:n.getFilterValue(),placeholder:Oe.t("Model"),onChange:s=>{var l;return(l=i.getColumn("modelId"))==null?void 0:l.setFilterValue(s.selected)},children:e.map(s=>Y.jsx(Kr,{className:cb.singleSelectMenuItem,label:s.displayName??s.name,value:s.name.toString()},s.id))})})]})},HJ="_batchActionsContainer_1q9sy_1",qJ="_leftSection_1q9sy_10",WJ="_rightSection_1q9sy_16",ub={batchActionsContainer:HJ,leftSection:qJ,rightSection:WJ},YJ=({onSuccess:i,onError:e}={})=>{const t=vo(),{show:n}=wa(Oe.t("Evaluations deleted"),{success:!0}),{show:s}=wa(Oe.t("Failed to delete evaluations"),{critical:!0}),{mutate:l,isLoading:u}=Yc({mutationFn:r=>Ms.deleteBacktestBatchCrudBacktestsDelete(r.join(",")),onSuccess:()=>{t.invalidateQueries({queryKey:["backtests"]}),n(),i==null||i()},onError:r=>{s(),console.error("Failed to delete evaluations",r),e==null||e(r)}});return{deleteBacktests:l,isSubmitting:u}},ZJ=({table:i})=>{const{deleteBacktests:e,isSubmitting:t}=YJ({onSuccess:()=>{i.resetRowSelection()}}),n=()=>{const s=i.getSelectedRowModel().rows.map(l=>l.original.id);e(s)};return Y.jsxs("div",{className:ub.batchActionsContainer,children:[Y.jsx("div",{className:ub.leftSection,children:Oe.t("{{count}} evaluations selected",{count:i.getSelectedRowModel().rows.length,defaultValue:"{{count}} evaluation selected",defaultValue_plural:"{{count}} evaluations selected"})}),Y.jsxs("div",{className:ub.rightSection,children:[Y.jsx(sn,{icon:Y.jsx(cm,{}),small:!0,onClick:n,loading:t,children:Oe.t("Delete")}),Y.jsx(sn,{small:!0,onClick:()=>i.resetRowSelection(),disabled:t,children:Oe.t("Cancel")})]})]})},yh=WA(),XJ=[yh.display({id:"select",header:({table:i})=>Y.jsx(td,{checked:i.getIsAllPageRowsSelected(),onChange:()=>i.toggleAllPageRowsSelected(),disabled:i.getRowModel().rows.length===0}),cell:({row:i})=>Y.jsx(td,{checked:i.getIsSelected(),onChange:()=>i.toggleSelected()})}),yh.accessor("id",{header:Oe.t("ID"),filterFn:"equals"}),yh.accessor("name",{header:Oe.t("Name"),filterFn:"includesString"}),yh.accessor("created",{header:Oe.t("Created"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0}),yh.accessor("modelId",{header:Oe.t("Model"),filterFn:"equals"}),yh.display({id:"actions",header:Oe.t("Actions"),cell:i=>Y.jsx(BJ,{id:i.row.original.id,name:i.row.original.name})})],KJ=i=>i.getIsSorted()||"default",QJ=({backtests:i,models:e})=>{const t=Zc(),n=oM({data:i||[],columns:XJ,initialState:{sorting:[{id:"created",desc:!0}]},getRowId:l=>l.id.toString(),enableRowSelection:!0,getSortedRowModel:aM(),getCoreRowModel:nM(),getFilteredRowModel:rM(),getPaginationRowModel:sM()}),s=n.getRowModel().rows.length>0;return Y.jsxs("div",{children:[n.getIsSomeRowsSelected()||n.getIsAllRowsSelected()?Y.jsx(ZJ,{table:n}):Y.jsxs("div",{className:lb.buttonContainer,children:[Y.jsx("div",{className:lb.leftSection,children:Y.jsx(GJ,{table:n,models:e})}),Y.jsx("div",{className:lb.rightSection,children:Y.jsx(sn,{primary:!0,icon:Y.jsx(px,{}),small:!0,disabled:!0,onClick:()=>{t("/evaluations/new")},children:Oe.t("New evaluation")})})]}),Y.jsxs(Fx,{children:[Y.jsx(jx,{children:n.getHeaderGroups().map(l=>Y.jsx(Jo,{children:l.headers.map(u=>Y.jsx(Bx,{fixed:!0,top:!0,...u.column.getCanSort()?{sortDirection:KJ(u.column),sortIconTitle:Oe.t("Sort by {{column}}",{column:u.column.id}),onSortIconClick:()=>u.column.toggleSorting()}:{},children:u.isPlaceholder?null:lx(u.column.columnDef.header,u.getContext())},u.id))},l.id))}),Y.jsx(Rx,{children:s?n.getRowModel().rows.map(l=>Y.jsx(Jo,{selected:l.getIsSelected(),children:l.getVisibleCells().map(u=>Y.jsx(Rc,{children:lx(u.column.columnDef.cell,u.getContext())},u.id))},l.id)):Y.jsx(Jo,{children:Y.jsx(Rc,{colSpan:String(n.getAllColumns().length),align:"center",children:Oe.t("No evaluations available")})})}),Y.jsx(zx,{children:Y.jsx(Jo,{children:Y.jsx(Rc,{colSpan:String(n.getAllColumns().length),children:Y.jsx(l_,{page:n.getState().pagination.pageIndex+1,pageSize:n.getState().pagination.pageSize,onPageSizeChange:l=>n.setPageSize(l),pageCount:n.getPageCount(),total:n.getRowCount(),isLastPage:!n.getCanNextPage(),onPageChange:l=>n.setPageIndex(l-1)})})})})]})]})},JJ=()=>{const{backtests:i,error:e,isLoading:t}=LQ(),{models:n,error:s,isLoading:l}=qA();return t||l?Y.jsx("div",{className:eb.loadingContainer,children:Y.jsx(Ea,{})}):e||s?Y.jsx("div",{className:eb.errorContainer,children:Y.jsx(yo,{error:!0,title:Oe.t("Error loading evaluations"),children:(e==null?void 0:e.message)||(s==null?void 0:s.message)||Oe.t("An unknown error occurred")})}):Y.jsxs(Y.Fragment,{children:[Y.jsx(Uh,{pageTitle:Oe.t("Evaluations"),pageDescription:Oe.t("Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.")}),Y.jsx(aA,{className:eb.container,children:Y.jsx(QJ,{backtests:i||[],models:n||[]})})]})},eee="_loadingContainer_1jc2q_1",tee="_noChapContainer_1jc2q_8",iee="_noChapIcon_1jc2q_15",nee="_noChapContent_1jc2q_26",ree="_noChapTitle_1jc2q_33",see="_noChapText_1jc2q_42",aee="_noChapLink_1jc2q_49",zu={loadingContainer:eee,noChapContainer:tee,noChapIcon:iee,noChapContent:nee,noChapTitle:ree,noChapText:see,noChapLink:aee},oee=({children:i})=>{const{route:e}=eu(),{status:t,error:n,isLoading:s}=HA({route:e}),l=Zc();return Fe.useEffect(()=>{n&&console.error("CHAP connection error:",n)},[n]),s?Y.jsx("div",{className:zu.loadingContainer,children:Y.jsx(Ea,{})}):n||!t?Y.jsx("div",{className:zu.noChapContainer,children:Y.jsxs("div",{className:zu.noChapContent,children:[Y.jsx("div",{className:zu.noChapIcon,children:Y.jsx(k1,{})}),Y.jsx("h1",{className:zu.noChapTitle,children:Oe.t("Could not connect to CHAP")}),Y.jsxs("div",{className:zu.noChapText,children:[Y.jsx("p",{children:Oe.t("The app is not able to connect to the CHAP server.")}),Y.jsx("p",{children:Oe.t("Please check your route configuration and make sure the CHAP server is running.")}),Y.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:zu.noChapLink,children:Oe.t("Learn more about Modeling and CHAP")})]}),Y.jsx(sn,{onClick:()=>l("/settings"),children:Oe.t("Configure settings")})]})}):i},lee="_container_1a6i8_1",cee="_loadingContainer_1a6i8_5",uee="_errorContainer_1a6i8_12",dee="_emptyContainer_1a6i8_13",db={container:lee,loadingContainer:cee,errorContainer:uee,emptyContainer:dee},Gr={SUCCESS:"SUCCESS",PENDING:"PENDING",STARTED:"STARTED",FAILED:"FAILURE"},Mo={BACKTEST:"create_backtest",CREATE_BACKTEST_WITH_DATA:"create_backtest_with_data",MAKE_PREDICTION:"create_prediction",CREATE_DATASET:"create_dataset"},hee=()=>{const i=vo(),{data:e,error:t,isLoading:n}=Gl({queryKey:["jobs"],queryFn:()=>od.listJobsJobsGet(),staleTime:5*60*1e3,cacheTime:5*60*1e3,retry:0}),s=Fe.useMemo(()=>new Set((e==null?void 0:e.filter(u=>u.status===Gr.PENDING||u.status===Gr.STARTED).map(u=>u.id))??[]),[e]),{data:l}=Gl({queryKey:["jobs","active"],queryFn:()=>od.listJobsJobsGet(Array.from(s)),refetchInterval:()=>s.size>0?5e3:!1,enabled:s.size>0});return Fe.useEffect(()=>{l!=null&&l.length&&i.setQueryData(["jobs"],u=>u==null?void 0:u.map(r=>{if(s.has(r.id)){const p=l.find(f=>f.id===r.id);if(p&&p.status!==r.status)return p}return r}))},[l]),{jobs:e,error:t,isLoading:n}},pee="_buttonContainer_urbmf_1",fee="_leftSection_urbmf_7",mee="_rightSection_urbmf_12",$T={buttonContainer:pee,leftSection:fee,rightSection:mee},gee="_inputContainer_1ore4_1",yee="_singleSelectContainer_1ore4_11",xee="_singleSelectMenuItem_1ore4_16",hb={inputContainer:gee,singleSelectContainer:yee,singleSelectMenuItem:xee},vee=({table:i})=>{var e,t,n;return Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:hb.inputContainer,children:Y.jsx(om,{dense:!0,placeholder:Oe.t("Search"),value:((e=i.getColumn("name"))==null?void 0:e.getFilterValue())??"",onChange:s=>{var l;return(l=i.getColumn("name"))==null?void 0:l.setFilterValue(s.value)}})}),Y.jsx("div",{className:hb.singleSelectContainer,children:Y.jsxs(Hl,{dense:!0,clearable:!0,clearText:Oe.t("Clear"),selected:(t=i.getColumn("status"))==null?void 0:t.getFilterValue(),placeholder:Oe.t("Status"),onChange:s=>{var l;return(l=i.getColumn("status"))==null?void 0:l.setFilterValue(s.selected)},children:[Y.jsx(Kr,{label:Oe.t("Pending"),value:Gr.PENDING}),Y.jsx(Kr,{label:Oe.t("Running"),value:Gr.STARTED}),Y.jsx(Kr,{label:Oe.t("Success"),value:Gr.SUCCESS}),Y.jsx(Kr,{label:Oe.t("Failed"),value:Gr.FAILED})]})}),Y.jsx("div",{className:hb.singleSelectContainer,children:Y.jsxs(Hl,{dense:!0,clearable:!0,clearText:Oe.t("Clear"),selected:(n=i.getColumn("type"))==null?void 0:n.getFilterValue(),placeholder:Oe.t("Type"),onChange:s=>{var l;return(l=i.getColumn("type"))==null?void 0:l.setFilterValue(s.selected)},children:[Y.jsx(Kr,{label:Oe.t("Create evaluation"),value:Mo.BACKTEST}),Y.jsx(Kr,{label:Oe.t("Evaluation with data"),value:Mo.CREATE_BACKTEST_WITH_DATA}),Y.jsx(Kr,{label:Oe.t("Make prediction"),value:Mo.MAKE_PREDICTION}),Y.jsx(Kr,{label:Oe.t("Create dataset"),value:Mo.CREATE_DATASET})]})})]})},bee={[Gr.SUCCESS]:Oe.t("Success"),[Gr.PENDING]:Oe.t("Pending"),[Gr.STARTED]:Oe.t("Running"),[Gr.FAILED]:Oe.t("Failed")},_ee={[Gr.SUCCESS]:"success",[Gr.PENDING]:"default",[Gr.STARTED]:"info",[Gr.FAILED]:"destructive"},wee={[Gr.SUCCESS]:!1,[Gr.PENDING]:!1,[Gr.STARTED]:!0,[Gr.FAILED]:!1},Cee=({status:i})=>{const e=i,t=bee[e]||e,n=_ee[e]||"default",s=wee[e]||!1;return i?Y.jsx(OH,{label:t,variant:n,active:s}):null},Tee={[Mo.BACKTEST]:Oe.t("Create evaluation"),[Mo.CREATE_BACKTEST_WITH_DATA]:Oe.t("Create evaluation with data"),[Mo.MAKE_PREDICTION]:Oe.t("Make prediction"),[Mo.CREATE_DATASET]:Oe.t("Create dataset")},See=({jobType:i})=>{const e=i,t=Tee[e]||e;return Y.jsx(Y.Fragment,{children:t})},Eee="_modal_1rrd7_1",kee="_loading_1rrd7_9",Aee="_logContent_1rrd7_19",Mee="_error_1rrd7_30",xh={modal:Eee,loading:kee,logContent:Aee,error:Mee},Gu={LOADING:"loading",ERROR:"error",SUCCESS:"success"},Pee=({isLoading:i,error:e})=>i?Gu.LOADING:e?Gu.ERROR:Gu.SUCCESS,Iee=({jobId:i,status:e,onClose:t})=>{const n=Fe.useRef(null),{data:s,error:l,isLoading:u}=Gl({queryKey:["jobLogs",i],queryFn:()=>od.getLogsJobsJobIdLogsGet(i),refetchInterval:()=>e===Gr.PENDING||e===Gr.STARTED?5*60*1e3:!1,enabled:!!i});Fe.useEffect(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[s]);const r=Pee({isLoading:u,error:l});return Y.jsxs(Do,{onClose:t,fluid:r===Gu.SUCCESS,children:[Y.jsxs(dd,{children:[Oe.t("Job Logs")," - ",i]}),Y.jsxs(Wc,{className:xh.modal,children:[r===Gu.LOADING&&Y.jsx("div",{className:xh.loading,children:Y.jsx(Ea,{})}),r===Gu.ERROR&&Y.jsxs("div",{className:xh.loading,children:[Y.jsx("p",{className:xh.error,children:Oe.t("An error occurred while loading the logs.")}),l&&Y.jsx("p",{className:xh.error,children:l.message})]}),r===Gu.SUCCESS&&Y.jsx("pre",{className:xh.logContent,ref:n,children:s||Oe.t("No logs reported for this job")})]}),Y.jsx(hd,{children:Y.jsx(sn,{onClick:t,secondary:!0,children:Oe.t("Close")})})]})},Dee=({onSuccess:i,onError:e}={})=>{const t=vo(),{show:n}=wa(Oe.t("Job deleted"),{success:!0}),{show:s}=wa(Oe.t("Failed to delete job"),{success:!1}),{mutate:l,isLoading:u,isError:r,error:p}=Yc({mutationFn:f=>od.deleteJobJobsJobIdDelete(f),onSuccess:(f,m)=>{t.invalidateQueries({queryKey:["jobs"]}),n(),i==null||i({id:m})},onError:f=>{console.error(f),s(),e==null||e()}});return{deleteJob:l,isLoading:u,isError:r,error:p}},Ree=({id:i,onClose:e,onDelete:t})=>{const{deleteJob:n,isLoading:s}=Dee({onSuccess:()=>{t==null||t(),e()}});return Y.jsxs(Do,{onClose:e,small:!0,children:[Y.jsx(dd,{children:Oe.t("Delete job")}),Y.jsx(Wc,{children:Oe.t("Are you sure you want to delete this job? This action cannot be undone.")}),Y.jsx(hd,{children:Y.jsxs(pd,{end:!0,children:[Y.jsx(sn,{onClick:e,secondary:!0,disabled:s,children:Oe.t("Cancel")}),Y.jsx(sn,{onClick:()=>n(i),destructive:!0,disabled:s,loading:s,children:Oe.t("Delete")})]})})]})},Lee=async i=>{if(!(navigator!=null&&navigator.clipboard))throw new Error("Clipboard API not available");await navigator.clipboard.writeText(i)},Nee=({onSuccess:i,onError:e}={})=>{const t=Yc({mutationFn:Lee,onSuccess:()=>{setTimeout(()=>{t.reset()},1500),i==null||i()},onError:()=>{e==null||e()}});return{copy:t.mutate,isCopied:t.isSuccess,isLoading:t.isLoading,error:t.error,reset:t.reset}},zee=({jobId:i,status:e,result:t,type:n})=>{const s=Zc(),[l,u]=Fe.useState(!1),[r,p]=Fe.useState(!1),[f,m]=Fe.useState(!1),{show:v}=wa(Oe.t("Failed to copy job ID"),{success:!1}),{copy:y,isCopied:_}=Nee({onError:()=>v()}),b=()=>{u(!1),p(!0)},C=()=>{console.log("type",n),n===Mo.CREATE_BACKTEST_WITH_DATA||n===Mo.BACKTEST?s(`/evaluationsWIP?id=${t}`):n===Mo.MAKE_PREDICTION&&s("/predict"),u(!1)};return Y.jsxs(Y.Fragment,{children:[Y.jsx(oA,{small:!0,open:l,icon:Y.jsx(um,{}),onClick:()=>{u(E=>!E)},component:Y.jsxs(_1,{dense:!0,children:[Y.jsx(Kr,{label:Oe.t("Go to result"),dataTest:"job-overflow-go-to-result",disabled:!t,icon:Y.jsx(qT,{}),onClick:C}),Y.jsx(Kr,{label:Oe.t("View Logs"),dataTest:"job-overflow-view-logs",icon:Y.jsx(aS,{}),onClick:b}),Y.jsx(Kr,{label:Oe.t("Copy Job ID"),dataTest:"job-overflow-copy-job-id",icon:_?Y.jsx(WT,{}):Y.jsx(KT,{}),onClick:()=>{y(i)}}),Y.jsx(Kr,{label:Oe.t("Delete"),dataTest:"job-overflow-delete",destructive:!0,disabled:e===Gr.PENDING||e===Gr.STARTED,icon:Y.jsx(cm,{}),onClick:()=>{m(!0),u(!1)}})]})}),r&&Y.jsx(Iee,{jobId:i,status:e,onClose:()=>p(!1)}),f&&Y.jsx(Ree,{id:i,onClose:()=>m(!1)})]})},ju=WA(),jee=[ju.accessor("id",{header:Oe.t("ID"),enableSorting:!1}),ju.accessor("status",{header:Oe.t("Status"),filterFn:"equals",enableSorting:!1,cell:i=>Y.jsx(Cee,{status:i.getValue()})}),ju.accessor("name",{header:Oe.t("Name"),filterFn:"includesString"}),ju.accessor("type",{header:Oe.t("Type"),enableSorting:!1,cell:i=>Y.jsx(See,{jobType:i.getValue()})}),ju.accessor("start_time",{header:Oe.t("Start Time"),cell:i=>{const e=i.getValue();return e?new Date(e).toLocaleString():void 0}}),ju.accessor("end_time",{header:Oe.t("End Time"),cell:i=>{const e=i.getValue();return e?new Date(e).toLocaleString():void 0}}),ju.display({id:"actions",header:Oe.t("Actions"),cell:i=>{const e=i.row.original.status;return Y.jsx(zee,{jobId:i.row.original.id,result:i.row.original.result,status:e,type:i.row.original.type})}})],Oee=i=>i.getIsSorted()||"default",Fee=({jobs:i})=>{const e=oM({data:i||[],columns:jee,initialState:{sorting:[{id:"start_time",desc:!0}],columnVisibility:{id:!1}},getRowId:n=>n.id.toString(),enableRowSelection:!1,getSortedRowModel:aM(),getCoreRowModel:nM(),getFilteredRowModel:rM(),getPaginationRowModel:sM()}),t=e.getRowModel().rows.length>0;return Y.jsxs("div",{children:[Y.jsx("div",{className:$T.buttonContainer,children:Y.jsx("div",{className:$T.leftSection,children:Y.jsx(vee,{table:e})})}),Y.jsxs(Fx,{children:[Y.jsx(jx,{children:e.getHeaderGroups().map(n=>Y.jsx(Jo,{children:n.headers.map(s=>Y.jsx(Bx,{fixed:!0,top:!0,...s.column.getCanSort()?{sortDirection:Oee(s.column),sortIconTitle:Oe.t("Sort by {{column}}",{column:s.column.id}),onSortIconClick:()=>s.column.toggleSorting()}:{},children:s.isPlaceholder?null:lx(s.column.columnDef.header,s.getContext())},s.id))},n.id))}),Y.jsx(Rx,{children:t?e.getRowModel().rows.map(n=>Y.jsx(Jo,{children:n.getVisibleCells().map(s=>Y.jsx(Rc,{children:lx(s.column.columnDef.cell,s.getContext())},s.id))},n.id)):Y.jsx(Jo,{children:Y.jsx(Rc,{colSpan:String(e.getAllColumns().length),align:"center",children:Oe.t("No jobs available")})})}),Y.jsx(zx,{children:Y.jsx(Jo,{children:Y.jsx(Rc,{colSpan:String(e.getAllColumns().length),children:Y.jsx(l_,{page:e.getState().pagination.pageIndex+1,pageSize:e.getState().pagination.pageSize,onPageSizeChange:n=>e.setPageSize(n),pageCount:e.getPageCount(),total:e.getRowCount(),isLastPage:!e.getCanNextPage(),onPageChange:n=>e.setPageIndex(n-1)})})})})]})]})},Bee=()=>{const{jobs:i,error:e,isLoading:t}=hee();return t?Y.jsx("div",{className:db.loadingContainer,children:Y.jsx(Ea,{})}):e?Y.jsx("div",{className:db.errorContainer,children:Y.jsx(yo,{error:!0,title:Oe.t("Error loading jobs"),children:e.message||Oe.t("An unknown error occurred")})}):Y.jsxs(Y.Fragment,{children:[Y.jsx(Uh,{pageTitle:Oe.t("Active jobs"),pageDescription:Oe.t("View and manage currently running jobs and their status.")}),Y.jsx(aA,{className:db.container,children:Y.jsx(Fee,{jobs:i||[]})})]})},$ee=wF([{element:Y.jsx(fQ,{}),errorElement:Y.jsx(LF,{}),children:[{path:"/",element:Y.jsx(K8,{to:"/evaluate",replace:!0})},{element:Y.jsx(wQ,{children:Y.jsxs(oee,{children:[Y.jsx(EQ,{}),Y.jsx(MQ,{}),Y.jsx($C,{children:Y.jsx(Kb,{})})]})}),children:[{path:"/evaluate",children:[{index:!0,element:Y.jsx(PY,{})},{path:"compare",handle:{fullWidth:!0},element:Y.jsx(fA,{evaluationId:1})}]},{path:"/evaluationsWIP",element:Y.jsx(JJ,{})},{path:"/jobs",element:Y.jsx(Bee,{})},{path:"/predict",element:Y.jsx(GX,{})}]},{path:"/settings",element:Y.jsx($C,{children:Y.jsx(Kb,{})}),children:[{path:"/settings",element:Y.jsx(HK,{})},{path:"/settings/models",element:Y.jsx(zX,{})}]}]}]),qee=()=>Y.jsxs(Y.Fragment,{children:[Y.jsx(pI,{}),Y.jsx(RE,{theme:!0,spacers:!0,colors:!0,elevations:!0}),Y.jsx(HX,{children:Y.jsx(RF,{router:$ee})}),Y.jsx(qK,{position:"bottom-right"})]});export{qee as default};
