var Q5=Object.defineProperty;var J5=(i,e,t)=>e in i?Q5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ei=(i,e,t)=>J5(i,typeof e!="symbol"?e+"":e,t);import{P as X,c as ze,e as Ky,l as v3,s as eR,a as Bt,b as tR,t as Jt,r as Ae,R as he,_ as vt,d as ir,m as lv,f as Gs,L as Wm,g as Bd,C as ka,I as $d,h as iR,S as x3,i as be,F as rR,B as Qy,j as b3,n as Mm,k as gT,o as nR,Q as sR,p as aR,q as oR,u as Ws,v as lR,w as cR,x as uR,y as dR,z as hR,A as w3,D as yT,E as vT,G as pR,H as fR,J as mR,K as gR,M as _3,N as yR,O as Ud,T as qa,U as Ci,V as ua,W as Mo,X as so,Y as Ao,Z as Wa,$ as Ym,a0 as cv,a1 as Rl,a2 as zw,a3 as es,a4 as vR,a5 as xR,a6 as da,a7 as ha,a8 as bR,a9 as z,aa as wn,ab as Cp,ac as wR,ad as _R,ae as Zm,af as Vo,ag as Sa,ah as C3,ai as jw,aj as Ow,ak as xT,al as CR,am as bT,an as x1,ao as TR}from"./main-BGzK7Xnu.js";const SR=i=>typeof i>"u"||i===null||i==="",wT=(i,e,t)=>(r,n,a)=>{const c=r[n];return t?new Error(`Property \`${n}\` on component \`${a}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(r)&&SR(c)?new Error(`Invalid prop \`${n}\` supplied to \`${a}\`, this prop is conditionally required but has value \`${c}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(X.checkPropTypes({[n]:e},r,"prop",a),null)};function Fn(i,e){const t=wT(i,e,!1);return t.isRequired=wT(i,e,!0),t}const ER=Object.freeze(Object.defineProperty({__proto__:null,colors:ze,elevations:Ky,layers:v3,sharedPropTypes:eR,spacers:Bt,spacersNum:tR,theme:Jt},Symbol.toStringTag,{value:"Module"}));function uv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}uv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Fw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}Fw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function T3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}T3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Xm(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M7.354 2.646a.5.5 0 01.057.638l-.057.07L3.207 7.5H14a.5.5 0 01.09.992L14 8.5H3.207l4.147 4.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-5-5a.5.5 0 01-.057-.638l.057-.07 5-5a.5.5 0 01.708 0z",fill:"currentColor"}))}Xm.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Bw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M9.284 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0114.5 8v.02a.503.503 0 01-.005.052L14.5 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L12.793 8.5H2a.5.5 0 01-.09-.992L2 7.5h10.793L8.646 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}Bw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function dv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}dv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function S3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M5.784 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0111 8v.02a.503.503 0 01-.005.052L11 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L9.293 8.5H1.5a.5.5 0 01-.09-.992L1.5 7.5h7.793L5.146 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057zm4 0l.07.057 5 5a.5.5 0 01.057.638l-.057.07-5 5a.5.5 0 01-.765-.638l.057-.07L13.793 8 9.146 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}S3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function E3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M13.646 3.646a.5.5 0 01.765.638l-.057.07-8 8a.5.5 0 01-.638.057l-.07-.057-3-3a.5.5 0 01.638-.765l.07.057L6 11.293z",fill:"currentColor"}))}E3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function hv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}hv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function k3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M11.293 15.707a1 1 0 001.414 0l5-5a1 1 0 00-1.414-1.414L12 13.586 7.707 9.293a1 1 0 00-1.414 1.414z",fill:"currentColor"}))}k3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function $w(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}$w.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function M3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M13.293 6.293a1 1 0 011.497 1.32l-.083.094L10.415 12l4.292 4.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.32.083l-.094-.083-5-5a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}M3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Uw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}Uw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function A3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M11.293 8.293a1 1 0 011.32-.083l.094.083 5 5a1 1 0 01-1.32 1.497l-.094-.083L12 10.415l-4.293 4.292a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}A3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function I3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("g",{fill:"currentColor"},Ae.createElement("path",{d:"M14 3a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1zm0 1H4v10h10z"}),Ae.createElement("path",{d:"M11 1v1H2v9H1V2a1 1 0 011-1z"})))}I3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Km(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}Km.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function P3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}P3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function D3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M12 1a1 1 0 011 1v11a1 1 0 01-1 1H4a1 1 0 01-1-1V2a1 1 0 011-1zm-8 9v3h8v-3zm2 1v1H5v-1zm0-4v1H5V7zm6-5H4v3h8zM6 3v1H5V3zM4 9h8V6H4z",fill:"currentColor"}))}D3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function R3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M6 1v4H4v2h6V6h4v4h-4V8H4v4h6v-1h4v4h-4v-2H3.5a.5.5 0 01-.492-.41L3 12.5V5H2V1zm7 11h-2v2h2zm0-5h-2v2h2zM5 2H3v2h2z",fill:"currentColor"}))}R3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function L3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}L3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function N3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M9.5 16a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3z",fill:"currentColor",fillRule:"evenodd"}))}N3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Vw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}Vw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Hw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}Hw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function z3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M8 1a7 7 0 110 14A7 7 0 018 1zm0 1a6 6 0 100 12A6 6 0 008 2zm.5 5v4H10v1H6v-1h1.5V7zM8 4a.75.75 0 110 1.5A.75.75 0 018 4z",fill:"currentColor"}))}z3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function j3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}j3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Qm(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}Qm.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function O3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}O3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function F3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M6 1a5 5 0 013.871 8.164l4.483 4.482-.708.708L9.164 9.87A5 5 0 116 1zm0 1a4 4 0 100 8 4 4 0 000-8z",fill:"currentColor"}))}F3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Gw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M10 1v2.416l.264.125a5 5 0 01.689.424l.014.011 2.095-1.208 2 3.464-2.094 1.209.016.15.009.136L13 8c0 .182-.01.364-.03.543l-.002.015 2.094 1.21-2 3.464-2.095-1.209-.236.166a4.991 4.991 0 01-.712.386l-.019.008V15H6v-2.417l-.263-.123a5 5 0 01-.69-.425l-.015-.012-2.094 1.209-2-3.464 2.093-1.21-.015-.15-.009-.135L3 8c0-.183.01-.364.03-.543l.001-.016L.938 6.232l2-3.464 2.094 1.208.238-.165c.226-.148.464-.277.711-.386L6 3.416V1zM9 2H7v2.126a3.996 3.996 0 00-1.853 1.07L3.304 4.135l-1 1.732 1.841 1.063a4.004 4.004 0 000 2.142l-1.841 1.063 1 1.732 1.843-1.063c.501.51 1.139.887 1.853 1.071V14h2v-2.126a3.996 3.996 0 001.853-1.07l1.843 1.062 1-1.732-1.84-1.064a4.004 4.004 0 000-2.14l1.84-1.064-1-1.732-1.843 1.063a3.996 3.996 0 00-1.852-1.07zM8 6a2 2 0 110 4 2 2 0 010-4zm0 1a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}Gw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function b1(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}b1.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function B3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M4.854 10.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3-3-.011-.013a.503.503 0 01-.033-.039l.044.052A.502.502 0 011 7.5v-.01c0-.022.002-.043.005-.064L1 7.5a.502.502 0 01.089-.284l.013-.018a.503.503 0 01.033-.04l.011-.012 3-3a.5.5 0 01.765.638l-.057.07L2.706 7H12a3 3 0 01.176 5.995L12 13H9.5a.5.5 0 01-.09-.992L9.5 12H12a2 2 0 00.15-3.995L12 8H2.708z",fill:"currentColor"}))}B3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function $3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}$3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function qw(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M8 3c4 0 7 4 7 5s-3 5-7 5-7-4-7-5 3-5 7-5zm0 1c-1.52 0-3.033.7-4.331 1.868a8.15 8.15 0 00-1.306 1.484A4.336 4.336 0 002 8l.042.091c.055.114.164.321.321.557a8.15 8.15 0 001.306 1.484C4.967 11.3 6.479 12 8 12s3.033-.7 4.331-1.868a8.15 8.15 0 001.306-1.484C13.873 8.294 14 8.004 14 8l-.042-.091a4.902 4.902 0 00-.321-.557 8.15 8.15 0 00-1.306-1.484C11.033 4.7 9.521 4 8 4zm0 1a3 3 0 110 6 3 3 0 010-6zm0 1a2 2 0 100 4 2 2 0 000-4z",fill:"currentColor"}))}qw.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function U3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M1 0v15h15v1H0V0zm1 3l4 5 4-2 5 5v3H2z",fill:"currentColor",fillRule:"evenodd"}))}U3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function V3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ae.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}V3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function H3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ae.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.92 3.606l2.498 5.831 3.757-2.819 4 5.001L20.4 11.2l1.2 1.6-4.775 3.582-4-5.001-4.243 3.182-3.501-8.17 1.838-.787z"}))}H3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function G3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ae.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.91 1.586L8.898 7.96l2.313-2.774 1.94 3.882 2.743-4.936 2.968 4.155 1.228-2.7 1.82.828-1.706 3.752 1.61 2.253-1.628 1.162-.938-1.313-3.205 7.054-2.985-5.968-2.147 3.866-2.516-5.533-1.627 1.953-1.536-1.28 2.244-2.695L5.09 4.414l1.82-.828zm9.196 4.282l-1.871 3.367 1.722 3.442 1.949-4.289-1.8-2.52zm-5.317.947l-.972 1.166 1.272 2.798.885-1.593-1.185-2.371z"}))}G3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function q3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}q3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function W3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:16,viewBox:"0 0 15 16",width:15,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 11a1 1 0 100 2 1 1 0 000-2zm1-6H7v5h2z",fill:"currentColor"}))}W3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Y3(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ae.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ae.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}Y3.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};const Ba=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${ze.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${ze.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${ze.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${ze.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${ze.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${ze.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${ze.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${ze.white};}`];Ba.__hash="4069423049";function Z3(i){let{className:e}=i;return he.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${Ba.__hash} `+vt.dynamic([["2753140462",[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]]])+" "+(e||"")},he.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${Ba.__hash} `+vt.dynamic([["2753140462",[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]]])+" background"}),he.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${Ba.__hash} `+vt.dynamic([["2753140462",[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]]])+" border"}),he.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${Ba.__hash} `+vt.dynamic([["2753140462",[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]]])+" checkmark"}),he.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${Ba.__hash} `+vt.dynamic([["2753140462",[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]]])+" indeterminate"}),he.createElement(vt,{id:Ba.__hash},Ba),he.createElement(vt,{id:"2753140462",dynamic:[ze.grey300,ze.grey400,ze.blue600,ze.blue700,ze.yellow700,ze.yellow800,ze.red500,ze.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${ze.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.red700};}`]))}Z3.propTypes={className:X.string};function X3(i){let{className:e}=i;return he.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${Ba.__hash} `+vt.dynamic([["86695588",[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]]])+" "+(e||"")},he.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${Ba.__hash} `+vt.dynamic([["86695588",[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]]])+" background"}),he.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${Ba.__hash} `+vt.dynamic([["86695588",[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]]])+" border"}),he.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${Ba.__hash} `+vt.dynamic([["86695588",[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]]])+" checkmark"}),he.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${Ba.__hash} `+vt.dynamic([["86695588",[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]]])+" indeterminate"}),he.createElement(vt,{id:Ba.__hash},Ba),he.createElement(vt,{id:"86695588",dynamic:[ze.grey400,ze.grey400,ze.grey500,ze.blue600,ze.blue800,ze.yellow700,ze.yellow800,ze.red500,ze.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${ze.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${ze.red800};}`]))}X3.propTypes={className:X.string};function Zh(i,e,t){return(e=kR(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function kR(i){var e=MR(i,"string");return typeof e=="symbol"?e:e+""}function MR(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class el extends Ae.Component{constructor(){super(...arguments),Zh(this,"ref",Ae.createRef()),Zh(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),Zh(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),Zh(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),Zh(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:r,disabled:n,error:a,label:c,name:s,tabIndex:h,valid:f,value:m,warning:y,dense:g,dataTest:b="dhis2-uicore-checkbox"}=this.props,v=ir({checked:e,indeterminate:t,disabled:n,valid:f,error:a,warning:y});return he.createElement("label",{"data-test":b,className:vt.dynamic([["1252368010",[ze.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])+" "+(ir(r,{disabled:n,dense:g})||"")},he.createElement("input",{type:"checkbox",ref:this.ref,name:s,value:m,checked:e,disabled:n,tabIndex:h,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:vt.dynamic([["1252368010",[ze.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])}),he.createElement("div",{className:vt.dynamic([["1252368010",[ze.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])+" "+(ir("icon",{dense:g})||"")},g?he.createElement(X3,{className:v}):he.createElement(Z3,{className:v})),c,he.createElement(vt,{id:"1252368010",dynamic:[ze.grey900,Jt.disabled,Bt.dp4,Jt.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${ze.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${Jt.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Bt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${Jt.focus};outline-offset:-3px;}`]))}}Zh(el,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const _T=lv(["checked","indeterminate"],X.bool);el.propTypes={checked:_T,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,error:Gs,indeterminate:_T,initialFocus:X.bool,label:X.node,name:X.string,tabIndex:X.string,valid:Gs,value:X.string,warning:Gs,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};var AR=void 0;const IR=(i,e,t)=>{let r;return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];const s=AR,h=()=>{r=null,i.apply(s,a)};clearTimeout(r),r=setTimeout(h,e)}},K3=i=>{let{dataTest:e,onToggle:t,children:r,tabIndex:n="0",error:a,warning:c,valid:s,disabled:h,dense:f,className:m,inputRef:y}=i;const g=ir(m,"root",{error:a,warning:c,valid:s,disabled:h,dense:f});return he.createElement("div",{onClick:t,tabIndex:n,ref:y,"data-test":e,className:vt.dynamic([["1240267656",[ze.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,ze.grey100,ze.grey500,Jt.disabled]]])+" "+(g||"")},he.createElement("div",{className:vt.dynamic([["1240267656",[ze.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,ze.grey100,ze.grey500,Jt.disabled]]])+" root-children"},r),he.createElement("div",{className:vt.dynamic([["1240267656",[ze.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,ze.grey100,ze.grey500,Jt.disabled]]])+" root-right"},he.createElement(hv,null)),he.createElement(vt,{id:"1240267656",dynamic:[ze.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,ze.grey100,ze.grey500,Jt.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${ze.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px 6px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${Jt.focus};border-color:${Jt.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${Jt.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${Jt.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${Jt.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${ze.grey100};border-color:${ze.grey500};color:${Jt.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px 4px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:2px;}"]))};K3.propTypes={dataTest:X.string.isRequired,inputRef:X.object.isRequired,onToggle:X.func.isRequired,children:X.element,className:X.string,dense:X.bool,disabled:X.bool,error:Gs,tabIndex:X.string,valid:Gs,warning:Gs};const Q3=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:n,onClick:a,selectRef:c}=i;return he.createElement(Wm,{onBackdropClick:a,transparent:!0},he.createElement(Bd,{reference:c,placement:"bottom-start",observeReferenceResize:!0},he.createElement("div",{"data-test":`${t}-menuwrapper`,className:vt.dynamic([["1871652546",[n,r,ze.white,ze.grey200,Ky.popover]]])},e,he.createElement(vt,{id:"1871652546",dynamic:[n,r,ze.white,ze.grey200,Ky.popover]},[`div.__jsx-style-dynamic-selector{width:${n};height:auto;max-height:${r};overflow:auto;background:${ze.white};border:1px solid ${ze.grey200};border-radius:3px;box-shadow:${Ky.popover};}`]))))};Q3.propTypes={dataTest:X.string.isRequired,menuWidth:X.string.isRequired,selectRef:X.object.isRequired,children:X.node,maxHeight:X.string,onClick:X.func};function No(i,e,t){return(e=PR(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function PR(i){var e=DR(i,"string");return typeof e=="symbol"?e:e+""}function DR(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const RR=27,LR=32,NR=38,zR=40;class pv extends Ae.Component{constructor(){super(...arguments),No(this,"state",{open:!1,menuWidth:"auto"}),No(this,"selectRef",he.createRef()),No(this,"inputRef",he.createRef()),No(this,"onResize",IR(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),No(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),No(this,"onFocus",e=>{const{onFocus:t,disabled:r,selected:n}=this.props;r||!t||t({selected:n},e)}),No(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),No(this,"handleClose",()=>{this.setState({open:!1})}),No(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),No(this,"onOutsideClick",e=>{const{onBlur:t,disabled:r,selected:n}=this.props;r||(this.handleClose(),t&&t({selected:n},e))}),No(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:r,selected:n}=this.props;if(r||(t&&t({selected:n},e),e.defaultPrevented))return;e.stopPropagation();const{open:a}=this.state,{keyCode:c}=e,s=!a&&(c===LR||c===NR||c===zR);if(a&&c===RR)return this.handleClose();if(s)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:r,className:n,selected:a,onChange:c,tabIndex:s,maxHeight:h,error:f,warning:m,valid:y,disabled:g,dense:b,dataTest:v}=this.props,_={selected:a,onChange:c,options:r,disabled:g},T=he.cloneElement(this.props.input,_),k={selected:a,onChange:c,options:r,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},w=he.cloneElement(this.props.menu,k);return he.createElement("div",{className:n,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":v},he.createElement(K3,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:g?"-1":s,error:f,warning:m,valid:y,disabled:g,dense:b,dataTest:`${v}-input`},T),e&&he.createElement(Q3,{onClick:this.onOutsideClick,maxHeight:h,selectRef:this.selectRef,menuWidth:t,dataTest:`${v}-menu`},w))}}No(pv,"defaultProps",{dataTest:"dhis2-uicore-select"});pv.propTypes={input:X.element.isRequired,menu:X.element.isRequired,selected:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,children:X.node,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,error:Gs,initialFocus:X.bool,maxHeight:X.string,tabIndex:X.string,valid:Gs,warning:Gs,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const Ww=i=>{let{message:e,className:t,dataTest:r}=i;return he.createElement("div",{"data-test":r,className:vt.dynamic([["3603755746",[Bt.dp16,ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(ir(t,"container")||"")},he.createElement("div",{className:vt.dynamic([["3603755746",[Bt.dp16,ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])},he.createElement(ka,{small:!0})),e,he.createElement(vt,{id:"3603755746",dynamic:[Bt.dp16,ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${ze.grey700};font-family:${Jt.fonts};font-size:13px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};}`]))};Ww.propTypes={dataTest:X.string.isRequired,className:X.string,message:X.string};const w1=i=>{let{value:e,onChange:t,placeholder:r,className:n,dataTest:a}=i;return he.createElement("div",{className:vt.dynamic([["730881408",[ze.white,Bt.dp8,Bt.dp8,Bt.dp4,Bt.dp8]]])+" "+(n||"")},he.createElement($d,{dense:!0,dataTest:a,value:e,onChange:t,type:"text",name:"filter",placeholder:r,initialFocus:!0}),he.createElement(vt,{id:"730881408",dynamic:[ze.white,Bt.dp8,Bt.dp8,Bt.dp4,Bt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${ze.white};padding-block-start:${Bt.dp8};padding-inline-end:${Bt.dp8};padding-block-end:${Bt.dp4};padding-inline-start:${Bt.dp8};z-index:1;}`]))};w1.propTypes={dataTest:X.string.isRequired,value:X.string.isRequired,className:X.string,placeholder:X.string,onChange:X.func};const J3=i=>{let{message:e,className:t}=i;return he.createElement("div",{className:vt.dynamic([["3788156646",[ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(t||"")},e,he.createElement(vt,{id:"3788156646",dynamic:[ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`div.__jsx-style-dynamic-selector{color:${ze.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};text-align:center;}`]))};J3.propTypes={message:X.string.isRequired,className:X.string};const Yw=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,Zw=i=>he.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),ek=(i,e)=>he.Children.toArray(e).find(t=>t.props?i===t.props.value:!1),jR=(i,e)=>e.find(t=>i===t),tk=(i,e)=>e.filter(t=>t!==i);function v0(){return v0=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},v0.apply(null,arguments)}function CT(i,e,t){return(e=OR(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function OR(i){var e=FR(i,"string");return typeof e=="symbol"?e:e+""}function FR(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let Xw=class extends Ae.Component{constructor(){super(...arguments),CT(this,"state",{filter:""}),CT(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:f,Menu:m}=this.props,{filter:y}=this.state,g={onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,dataTest:e},b=Zw(t);if(he.Children.count(b)===0||!y)return he.createElement(he.Fragment,null,he.createElement(w1,{dataTest:`${e}-filterinput`,placeholder:h,value:y,onChange:this.onFilterChange}),he.createElement(m,v0({},g,{options:t})));const v=he.Children.map(t,T=>{if(!Yw(T))return null;const{label:w}=T.props;return w.toLowerCase().includes(y.toLowerCase())?T:null}),_=he.Children.count(v)>0;return he.createElement(he.Fragment,null,he.createElement(w1,{dataTest:`${e}-filterinput`,placeholder:h,value:y,onChange:this.onFilterChange}),_?he.createElement(m,v0({},g,{options:v})):he.createElement(J3,{message:f}))}};Xw.propTypes={Menu:X.elementType.isRequired,dataTest:X.string.isRequired,noMatchText:X.string.isRequired,selected:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,onChange:X.func};const Kw=i=>{let{message:e,className:t,dataTest:r}=i;return he.createElement("div",{"data-test":r,className:vt.dynamic([["3788156646",[ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(t||"")},e,he.createElement(vt,{id:"3788156646",dynamic:[ze.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`div.__jsx-style-dynamic-selector{color:${ze.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};text-align:center;}`]))};Kw.propTypes={dataTest:X.string.isRequired,message:X.string.isRequired,className:X.string};const BR=4,TT={styles:he.createElement(vt,{id:"1892168270"},[`.jsx-1892168270{z-index:${v3.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},$R={name:"offset",options:{offset:[0,BR]}},UR={name:"hide"},VR={name:"flip",options:{altBoundary:!0}},Vd=i=>{let{children:e,className:t,closeDelay:r=200,content:n,dataTest:a="dhis2-uicore-tooltip",maxWidth:c=300,openDelay:s=200,placement:h="top"}=i;const[f,m]=Ae.useState(!1),y=Ae.useRef(),g=Ae.useRef(null),b=Ae.useRef(null),v=()=>{clearTimeout(b.current),g.current=setTimeout(()=>{m(!0)},s)},_=()=>{clearTimeout(g.current),b.current=setTimeout(()=>{m(!1)},r)},T=()=>{clearTimeout(b.current),g.current=setTimeout(()=>{m(!0)},s)},k=()=>{clearTimeout(g.current),b.current=setTimeout(()=>{m(!1)},r)},w=E=>{E.key==="Escape"&&(b.current=setTimeout(()=>{m(!1)},r))};return Ae.useEffect(()=>(document.addEventListener("keydown",w),()=>{clearTimeout(g.current),clearTimeout(b.current),document.removeEventListener("keydown",w)}),[]),he.createElement(he.Fragment,null,typeof e=="function"?e({onMouseOver:v,onMouseOut:_,onFocus:T,onBlur:k,ref:y}):he.createElement("span",{onMouseOver:v,onMouseOut:_,onFocus:T,onBlur:k,ref:y,tabIndex:0,"aria-describedby":f?"tooltipContenDhis2Ui":"","data-test":`${a}-reference`,className:vt.dynamic([["3515683788",[c,ze.grey900,ze.white]]])},e),f&&he.createElement(iR,null,he.createElement(Bd,{className:TT.className,placement:h,reference:y,modifiers:[$R,VR,UR]},he.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:v,onMouseOut:_,"data-test":`${a}-content`,role:"tooltip",className:vt.dynamic([["3515683788",[c,ze.grey900,ze.white]]])+" "+(t||"")},n))),TT.styles,he.createElement(vt,{id:"3515683788",dynamic:[c,ze.grey900,ze.white]},[`div.__jsx-style-dynamic-selector{max-width:${c}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${ze.grey900};border-radius:3px;color:${ze.white};font-size:13px;line-height:17px;}`]))};Vd.propTypes={children:X.oneOfType([X.node,X.func]),className:X.string,closeDelay:X.number,content:X.node,dataTest:X.string,maxWidth:X.number,openDelay:X.number,placement:X.oneOf(["top","right","bottom","left"])};const Qw=i=>{let{onClear:e,clearText:t,className:r,dataTest:n}=i;return he.createElement(Vd,{openDelay:500,content:t},he.createElement("button",{"data-test":n,onClick:e,type:"button",className:vt.dynamic([["2859518049",[ze.grey500,ze.grey800,ze.grey200,Jt.focus]]])+" "+(r||"")},he.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:vt.dynamic([["2859518049",[ze.grey500,ze.grey800,ze.grey200,Jt.focus]]])},he.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:vt.dynamic([["2859518049",[ze.grey500,ze.grey800,ze.grey200,Jt.focus]]])})),he.createElement(vt,{id:"2859518049",dynamic:[ze.grey500,ze.grey800,ze.grey200,Jt.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}","button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${ze.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${ze.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${ze.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${Jt.focus};}`])))};Qw.propTypes={clearText:X.string.isRequired,dataTest:X.string.isRequired,onClear:X.func.isRequired,className:X.string};const Jw=i=>{let{placeholder:e,className:t,dataTest:r}=i;return e?he.createElement("div",{"data-test":r,className:vt.dynamic([["1027033961",[ze.grey600]]])+" "+(t||"")},e,he.createElement(vt,{id:"1027033961",dynamic:[ze.grey600]},[`div.__jsx-style-dynamic-selector{color:${ze.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};Jw.propTypes={dataTest:X.string.isRequired,className:X.string,placeholder:X.string};const e_=i=>{let{prefix:e,className:t,dataTest:r}=i;return e?he.createElement("div",{"data-test":r,className:vt.dynamic([["1343055987",[ze.grey600,Bt.dp12]]])+" "+(t||"")},e,he.createElement(vt,{id:"1343055987",dynamic:[ze.grey600,Bt.dp12]},[`div.__jsx-style-dynamic-selector{color:${ze.grey600};padding-inline-end:${Bt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};e_.propTypes={dataTest:X.string.isRequired,className:X.string,prefix:X.string};const HR=(i,e)=>{e.stopPropagation(),e.preventDefault()},GR=i=>{let{isActive:e,onChange:t,selected:r,value:n}=i;return(a,c)=>{if(c.stopPropagation(),e){const f={selected:tk(n,r)};return t(f,c)}const s={selected:r.concat([n])};return t(s,c)}},t_=i=>{let{options:e,onChange:t,selected:r,empty:n="",dataTest:a}=i;const c=Zw(e);if(he.Children.count(c)===0)return typeof n=="string"?he.createElement(Kw,{message:n,dataTest:`${a}-empty`}):n;const s=he.Children.map(e,h=>{if(!Yw(h))return h;const{value:m,label:y,disabled:g}=h.props,b=!!jR(m,r),v=g?HR:GR({isActive:b,onChange:t,selected:r,value:m});return he.cloneElement(h,{...h.props,onClick:v,active:b})});return he.createElement(he.Fragment,null,s)};t_.propTypes={dataTest:X.string.isRequired,empty:X.node,options:X.node,selected:X.arrayOf(X.string),onChange:X.func};const ik=i=>{let{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:f}=i;return he.createElement(Xw,{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:f,Menu:t_})};ik.propTypes={dataTest:X.string.isRequired,noMatchText:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,selected:X.arrayOf(X.string),onChange:X.func};const rk=i=>{let{children:e,overflow:t}=i;return he.createElement("span",{className:vt.dynamic([["765109298",[Bt.dp12]]])+" "+(ir({overflow:t})||"")},e,he.createElement(vt,{id:"765109298",dynamic:[Bt.dp12]},[`span.__jsx-style-dynamic-selector{margin:0 ${Bt.dp12};color:inherit;white-space:nowrap;}`,".overflow.__jsx-style-dynamic-selector{max-width:150px;overflow:hidden;text-overflow:ellipsis;}"]))};rk.propTypes={children:X.any,overflow:X.bool};const nk=i=>{let{icon:e,dataTest:t}=i;return e?he.createElement("span",{"data-test":t,className:vt.dynamic([["1889825154",[Bt.dp4]]])},e,he.createElement(vt,{id:"1889825154",dynamic:[Bt.dp4]},[`span.__jsx-style-dynamic-selector{width:24px;height:24px;margin-inline-start:${Bt.dp4};margin-inline-end:-6px;border-radius:50%;overflow:hidden;}`,"span.__jsx-style-dynamic-selector>*{max-height:24px;max-width:24px;}"])):null};nk.propTypes={dataTest:X.string.isRequired,icon:X.element};function sk(i){let{className:e}=i;return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"jsx-2898942518 "+(e||"")},he.createElement("path",{d:"M11.2928932,3.29289322 L12.7071068,4.70710678 L9.41389322,7.99989322 L12.7071068,11.2928932 L11.2928932,12.7071068 L7.99989322,9.41389322 L4.70710678,12.7071068 L3.29289322,11.2928932 L6.58589322,7.99989322 L3.29289322,4.70710678 L4.70710678,3.29289322 L7.99989322,6.58589322 L11.2928932,3.29289322 Z",className:"jsx-2898942518"}),he.createElement(vt,{id:"2898942518"},["svg.jsx-2898942518{fill:inherit;height:16px;width:16px;vertical-align:middle;pointer-events:none;}"]))}sk.propTypes={className:X.string};const Jy=["span.jsx-2824632002{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;width:20px;margin-inline-end:4px;border-radius:12px;margin-inline-start:-8px;}",`span.jsx-2824632002:hover{background:${ze.grey400};}`];Jy.__hash="2824632002";const ST={styles:he.createElement(vt,{id:"2658726446"},[`svg.jsx-2658726446{fill:${ze.grey600};height:16px;width:16px;cursor:pointer;opacity:1;pointer-events:all;}`]),className:"jsx-2658726446"},ak=i=>{let{onRemove:e,dataTest:t}=i;return e?he.createElement("span",{onClick:r=>{r.stopPropagation(),e({},r)},"data-test":t,className:`jsx-${Jy.__hash}`},he.createElement(sk,{className:ST.className}),ST.styles,he.createElement(vt,{id:Jy.__hash},Jy)):null};ak.propTypes={dataTest:X.string.isRequired,onRemove:X.func};const Oh="4",i_=i=>{var e,t,r,n;let{selected:a,dense:c,disabled:s,dragging:h,overflow:f,className:m,children:y,onRemove:g,onClick:b,icon:v,dataTest:_="dhis2-uicore-chip",marginBottom:T=4,marginLeft:k,marginRight:w,marginTop:E=4,marginInlineStart:A,marginInlineEnd:M}=i;return he.createElement("span",{onClick:S=>{!s&&b&&b({},S)},"data-test":_,className:vt.dynamic([["3780556490",[ze.grey200,ze.grey900,ze.grey300,Jt.secondary600,ze.white]],["1687525377",[T&&`margin-bottom: ${T}px;`,(e=A??k)!==null&&e!==void 0?e:Oh,(t=M??w)!==null&&t!==void 0?t:Oh,E&&`margin-top: ${E}px`]]])+" "+(ir(m,{selected:a,dense:c,disabled:s,dragging:h})||"")},he.createElement(nk,{icon:v,dataTest:`${_}-icon`}),he.createElement(rk,{overflow:f},y),he.createElement(ak,{onRemove:g,dataTest:`${_}-remove`}),he.createElement(vt,{id:"3780556490",dynamic:[ze.grey200,ze.grey900,ze.grey300,Jt.secondary600,ze.white]},[`span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;border-radius:16px;background-color:${ze.grey200};font-size:14px;line-height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:${ze.grey900};}`,".dense.__jsx-style-dynamic-selector{height:24px;font-size:13px;line-height:15px;}",`span.__jsx-style-dynamic-selector:hover{background-color:${ze.grey300};}`,`.selected.__jsx-style-dynamic-selector{background-color:${Jt.secondary600};font-weight:500;}`,".selected.__jsx-style-dynamic-selector:hover{background-color:#00695c;}",`.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{color:${ze.white};}`,".disabled.__jsx-style-dynamic-selector{cursor:not-allowed;opacity:0.3;}",".disabled.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{pointer-events:none;}",".dragging.__jsx-style-dynamic-selector{box-shadow:0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);}"]),he.createElement(vt,{id:"1687525377",dynamic:[T&&`margin-bottom: ${T}px;`,(e=A??k)!==null&&e!==void 0?e:Oh,(t=M??w)!==null&&t!==void 0?t:Oh,E&&`margin-top: ${E}px`]},[`span.__jsx-style-dynamic-selector{${T&&`margin-bottom: ${T}px;`} margin-inline-start:${(r=A??k)!==null&&r!==void 0?r:Oh}px;margin-inline-end:${(n=M??w)!==null&&n!==void 0?n:Oh}px;${E&&`margin-top: ${E}px`};}`]))};i_.propTypes={children:X.any,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,dragging:X.bool,icon:X.element,marginBottom:X.number,marginInlineEnd:X.number,marginInlineStart:X.number,marginLeft:X.number,marginRight:X.number,marginTop:X.number,overflow:X.bool,selected:X.bool,onClick:X.func,onRemove:X.func};const qR=i=>{let{selected:e,onChange:t,value:r}=i;return(n,a)=>{const s={selected:tk(r,e)};t(s,a)}},ok=i=>{let{selected:e,onChange:t,disabled:r,options:n}=i;return he.createElement(he.Fragment,null,e.map(a=>{const c=ek(a,n);if(!c){const m=`There is no option with the value: "${a}". Make sure that all the values passed to the selected prop match the value of an existing option.`;console.error(m)}const s=c&&c.props.disabled||r,h=c?c.props.label:a,f=s?void 0:qR({selected:e,onChange:t,value:a});return he.createElement(i_,{key:a,onRemove:f,disabled:s,marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,overflow:!0,dense:!0},h)}))};ok.propTypes={disabled:X.bool,options:X.node,selected:X.arrayOf(X.string),onChange:X.func};const lk=i=>{let{selected:e,onChange:t,clearable:r,clearText:n,placeholder:a,dataTest:c,prefix:s,options:h,className:f,disabled:m,inputMaxHeight:y="100px"}=i;const g=e.length>0,b=v=>{const _={selected:[]};v.stopPropagation(),t(_,v)};return he.createElement("div",{className:vt.dynamic([["64009541",[ze.grey900]],["1331770409",[y]]])+" "+(ir("root",f)||"")},he.createElement(e_,{prefix:s,dataTest:`${c}-prefix`}),!g&&!s&&he.createElement(Jw,{placeholder:a,dataTest:`${c}-placeholder`}),g&&he.createElement("div",{className:vt.dynamic([["64009541",[ze.grey900]],["1331770409",[y]]])+" root-input"},he.createElement(ok,{selected:e,onChange:t,options:h,disabled:m})),g&&r&&!m&&he.createElement("div",{className:vt.dynamic([["64009541",[ze.grey900]],["1331770409",[y]]])+" root-right"},he.createElement(Qw,{onClear:b,clearText:n,dataTest:`${c}-clear`})),he.createElement(vt,{id:"64009541",dynamic:[ze.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${ze.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;gap:4px;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),he.createElement(vt,{id:"1331770409",dynamic:[y]},[`.root-input.__jsx-style-dynamic-selector{max-height:${y};}`]))};lk.propTypes={dataTest:X.string.isRequired,className:X.string,clearText:Fn(i=>i.clearable,X.string),clearable:X.bool,disabled:X.bool,inputMaxHeight:X.string,options:X.node,placeholder:X.string,prefix:X.string,selected:X.arrayOf(X.string),onChange:X.func};const WR=[],r_=i=>{let{className:e,selected:t=WR,tabIndex:r,maxHeight:n,inputMaxHeight:a,onChange:c,onFocus:s,onKeyDown:h,onBlur:f,loading:m,error:y,warning:g,valid:b,disabled:v,children:_,clearable:T,clearText:k,filterable:w,filterPlaceholder:E,placeholder:A,prefix:M,empty:S,loadingText:N,noMatchText:Y,initialFocus:Z,dense:K,dataTest:B="dhis2-uicore-multiselect"}=i;const F=w?he.createElement(ik,{dataTest:B,empty:S,noMatchText:Y,placeholder:E}):he.createElement(t_,{empty:S,dataTest:B});return he.createElement("div",{"data-test":B,className:vt.dynamic([["2180377457",[Bt.dp8]]])+" root"},he.createElement("div",{className:vt.dynamic([["2180377457",[Bt.dp8]]])+" root-input"},he.createElement(pv,{className:e,selected:t,input:he.createElement(lk,{clearable:T,clearText:k,dataTest:B,placeholder:A,prefix:M,inputMaxHeight:a}),menu:F,tabIndex:r,maxHeight:n,onChange:c,onFocus:s,onKeyDown:h,onBlur:f,error:y,warning:g,valid:b,disabled:v,initialFocus:Z,dense:K},_,m&&he.createElement(Ww,{message:N,dataTest:`${B}-loading`}))),he.createElement(x3,{error:y,valid:b,warning:g}),he.createElement(vt,{id:"2180377457",dynamic:[Bt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};r_.propTypes={children:X.node,className:X.string,clearText:Fn(i=>i.clearable,X.string),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.node,error:Gs,filterPlaceholder:X.string,filterable:X.bool,initialFocus:X.bool,inputMaxHeight:X.string,loading:X.bool,loadingText:X.string,maxHeight:X.string,noMatchText:Fn(i=>i.filterable,X.string),placeholder:X.string,prefix:X.string,selected:X.arrayOf(X.string),tabIndex:X.string,valid:Gs,warning:Gs,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const YR="",ZR={Clear:YR,"No data found":"   ","Type to filter options":"  ","Loading options":" ","No options found":"    "},XR="",KR={Clear:XR,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},QR="",JR={Clear:QR,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},eL="Vyistit",tL={Clear:eL,"No data found":"Nenalezena dn data","Type to filter options":"Zadnm filtrujete monosti","Loading options":"Monosti natn","No options found":"Nenalezeny dn monosti"},iL="Clear",rL={Clear:iL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},nL="",sL={Clear:nL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},aL="Limpiar",oL={Clear:aL,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opcin"},lL="Limpiar",cL={Clear:lL,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},uL="Effacer",dL={Clear:uL,"No data found":"Aucune valeur trouve","Type to filter options":"","Loading options":"Chargement des options","No options found":""},hL="Hapus",pL={Clear:hL,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},fL="",mL={Clear:fL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},gL="",yL={Clear:gL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},vL="",xL={Clear:vL,"No data found":"data ","Type to filter options":"","Loading options":"","No options found":""},bL="Fjern",wL={Clear:bL,"No data found":"Ingen data funnet","Type to filter options":"Skriv for  filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},_L="Duidelijk",CL={Clear:_L,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},TL=" ",SL={Clear:TL,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},EL="  ",kL={Clear:EL,"No data found":"      ","Type to filter options":"","Loading options":"","No options found":""},ML="Limpar",AL={Clear:ML,"No data found":"No foram encontrados dados","Type to filter options":"Tipo de opes de filtros","Loading options":"Carregando opes","No options found":"No foram encontradas opes"},IL="Limpar",PL={Clear:IL,"No data found":"Dado no encontrado","Type to filter options":"","Loading options":"","No options found":""},DL="",RL={Clear:DL,"No data found":"  ","Type to filter options":"    ","Loading options":" ","No options found":"  "},LL="Klar",NL={Clear:LL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},zL="Hams",jL={Clear:zL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},OL=" ",FL={Clear:OL,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},BL="",$L={Clear:BL,"No data found":"  ","Type to filter options":"  ","Loading options":" ","No options found":"  "},UL="",VL={Clear:UL,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},HL="",GL={Clear:HL,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},qL="",WL={Clear:qL,"No data found":" ","Type to filter options":"","Loading options":" ","No options found":""},YL="",ZL={Clear:YL,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},XL="Xa",KL={Clear:XL,"No data found":"Khng tm thy d liu","Type to filter options":"Nhp  lc ty chn","Loading options":"","No options found":""},QL="",JL={Clear:QL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},eN="",tN={Clear:eN,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},Jr="default";be.addResources("ar",Jr,ZR);be.addResources("ar_IQ",Jr,KR);be.addResources("ckb",Jr,JR);be.addResources("cs",Jr,tL);be.addResources("da",Jr,rL);be.addResources("en",Jr,sL);be.addResources("es",Jr,oL);be.addResources("es_419",Jr,cL);be.addResources("fr",Jr,dL);be.addResources("id",Jr,pL);be.addResources("km",Jr,mL);be.addResources("lo",Jr,yL);be.addResources("my",Jr,xL);be.addResources("nb",Jr,wL);be.addResources("nl",Jr,CL);be.addResources("prs",Jr,SL);be.addResources("ps",Jr,kL);be.addResources("pt",Jr,AL);be.addResources("pt_BR",Jr,PL);be.addResources("ru",Jr,RL);be.addResources("sv",Jr,NL);be.addResources("tet",Jr,jL);be.addResources("tg",Jr,FL);be.addResources("uk",Jr,$L);be.addResources("ur",Jr,VL);be.addResources("uz_Latn",Jr,GL);be.addResources("uz_UZ_Cyrl",Jr,WL);be.addResources("uz_UZ_Latn",Jr,ZL);be.addResources("vi",Jr,KL);be.addResources("zh",Jr,JL);be.addResources("zh_CN",Jr,tN);const{styles:iN,className:rN}={styles:he.createElement(vt,{id:"2013783366"},[`.jsx-2013783366{padding:${Bt.dp8} ${Bt.dp12};}`]),className:"jsx-2013783366"},n_=i=>{let{label:e,active:t,disabled:r,onClick:n,className:a,dataTest:c="dhis2-uicore-multiselectoption",value:s}=i;return he.createElement("div",{"data-test":c,"data-value":s,"data-label":e,className:vt.dynamic([["2722881483",[ze.grey200,ze.teal050]]])+" "+(ir(a,{active:t,disabled:r})||"")},he.createElement(el,{name:e,className:rN,checked:t,label:e,onChange:n,disabled:r,dense:!0}),iN,he.createElement(vt,{id:"2722881483",dynamic:[ze.grey200,ze.teal050]},[`div.__jsx-style-dynamic-selector:hover{background-color:${ze.grey200};}`,`div.active.__jsx-style-dynamic-selector{background-color:${ze.teal050};}`,"div.active.__jsx-style-dynamic-selector:hover{background-color:#e6f4f4;}","div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};n_.propTypes={label:X.string.isRequired,value:X.string.isRequired,active:X.bool,className:X.string,dataTest:X.string,disabled:X.bool,onClick:X.func};const nN=(i,e)=>{e.stopPropagation(),e.preventDefault()},s_=i=>{let{options:e,onChange:t,selected:r,empty:n="",handleFocusInput:a,handleClose:c,dataTest:s}=i;const h=Zw(e);if(he.Children.count(h)===0)return typeof n=="string"?he.createElement(Kw,{message:n,dataTest:`${s}-empty`}):n;const f=he.Children.map(e,m=>{if(!Yw(m))return m;const{value:g,disabled:b}=m.props,v=g===r,_=(k,w)=>{const E={selected:g};w.stopPropagation(),t(E,w),c(),a()},T=v||b;return he.cloneElement(m,{...m.props,onClick:T?nN:_,active:v})});return he.createElement(he.Fragment,null,f)};s_.propTypes={dataTest:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,selected:X.string,onChange:X.func};const ck=i=>{let{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:f}=i;return he.createElement(Xw,{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:f,Menu:s_})};ck.propTypes={dataTest:X.string.isRequired,noMatchText:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,selected:X.string,onChange:X.func};const uk=i=>{let{options:e,selected:t,className:r}=i;const n=ek(t,e);if(!n){const s=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(s)}const a=n&&n.props.icon,c=n?n.props.label:t;return he.createElement("div",{className:vt.dynamic([["1914911415",[Bt.dp8,Bt.dp16,Bt.dp16]]])+" "+(ir(r,"root")||"")},a&&he.createElement("div",{className:vt.dynamic([["1914911415",[Bt.dp8,Bt.dp16,Bt.dp16]]])+" root-icon"},a),c,he.createElement(vt,{id:"1914911415",dynamic:[Bt.dp8,Bt.dp16,Bt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Bt.dp8};width:${Bt.dp16};height:${Bt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};uk.propTypes={className:X.string,options:X.node,selected:X.string};const dk=i=>{let{selected:e,onChange:t,clearable:r,clearText:n,placeholder:a,dataTest:c,prefix:s,options:h,className:f,disabled:m,inputMaxHeight:y="100px"}=i;const g=e&&typeof e=="string",b=v=>{const _={selected:""};v.stopPropagation(),t(_,v)};return he.createElement("div",{className:vt.dynamic([["2186325794",[ze.grey900]],["1331770409",[y]]])+" "+(ir("root",f)||"")},he.createElement(e_,{prefix:s,dataTest:`${c}-prefix`}),!g&&!s&&he.createElement(Jw,{placeholder:a,dataTest:`${c}-placeholder`}),g&&he.createElement("div",{className:vt.dynamic([["2186325794",[ze.grey900]],["1331770409",[y]]])+" root-input"},he.createElement(uk,{selected:e,options:h})),g&&r&&!m&&he.createElement("div",{className:vt.dynamic([["2186325794",[ze.grey900]],["1331770409",[y]]])+" root-right"},he.createElement(Qw,{onClear:b,clearText:n,dataTest:`${c}-clear`})),he.createElement(vt,{id:"2186325794",dynamic:[ze.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${ze.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),he.createElement(vt,{id:"1331770409",dynamic:[y]},[`.root-input.__jsx-style-dynamic-selector{max-height:${y};}`]))};dk.propTypes={dataTest:X.string.isRequired,className:X.string,clearText:Fn(i=>i.clearable,X.string),clearable:X.bool,disabled:X.bool,inputMaxHeight:X.string,options:X.node,placeholder:X.string,prefix:X.string,selected:X.string,onChange:X.func};const Ll=i=>{let{className:e,selected:t="",tabIndex:r,maxHeight:n,inputMaxHeight:a,onChange:c,onFocus:s,onKeyDown:h,onBlur:f,loading:m,error:y,warning:g,valid:b,disabled:v,children:_,clearable:T,clearText:k,filterable:w,filterPlaceholder:E,placeholder:A,prefix:M,empty:S,loadingText:N,noMatchText:Y,initialFocus:Z,dense:K,dataTest:B="dhis2-uicore-singleselect"}=i;const F=w?he.createElement(ck,{dataTest:B,empty:S,noMatchText:Y,placeholder:E}):he.createElement(s_,{empty:S,dataTest:B});return he.createElement("div",{"data-test":B,className:vt.dynamic([["2180377457",[Bt.dp8]]])+" root"},he.createElement("div",{className:vt.dynamic([["2180377457",[Bt.dp8]]])+" root-input"},he.createElement(pv,{className:e,selected:t,input:he.createElement(dk,{clearable:T,clearText:k,dataTest:B,placeholder:A,prefix:M,inputMaxHeight:a}),menu:F,tabIndex:r,maxHeight:n,onChange:c,onFocus:s,onKeyDown:h,onBlur:f,error:y,warning:g,valid:b,disabled:v,initialFocus:Z,dense:K},_,m&&he.createElement(Ww,{message:N,dataTest:`${B}-loading`}))),he.createElement(x3,{error:y,valid:b,warning:g}),he.createElement(vt,{id:"2180377457",dynamic:[Bt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};Ll.propTypes={children:X.node,className:X.string,clearText:Fn(i=>i.clearable,X.string),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.node,error:Gs,filterPlaceholder:X.string,filterable:X.bool,initialFocus:X.bool,inputMaxHeight:X.string,loading:X.bool,loadingText:X.string,maxHeight:X.string,noMatchText:Fn(i=>i.filterable,X.string),placeholder:X.string,prefix:X.string,selected:X.string,tabIndex:X.string,valid:Gs,warning:Gs,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};function sN(i,e,t){return(e=aN(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function aN(i){var e=oN(i,"string");return typeof e=="symbol"?e:e+""}function oN(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const zf=(i,e)=>typeof i=="function"?i(e):i;class ls extends he.Component{render(){const{className:e,onChange:t,onFocus:r,onKeyDown:n,onBlur:a,required:c,label:s,valid:h,error:f,warning:m,disabled:y,loading:g,selected:b=ls.defaultProps.selected,tabIndex:v,helpText:_,validationText:T,maxHeight:k,inputMaxHeight:w,inputWidth:E,children:A,clearable:M,clearText:S=ls.defaultProps.clearText,filterable:N,filterPlaceholder:Y=ls.defaultProps.filterPlaceholder,placeholder:Z,prefix:K,empty:B=ls.defaultProps.empty,loadingText:F=ls.defaultProps.loadingText,noMatchText:O=ls.defaultProps.noMatchText,initialFocus:R,dense:L,dataTest:G=ls.defaultProps.dataTest}=this.props;return he.createElement(rR,{className:e,dataTest:G,disabled:y,required:c,label:s,helpText:_,validationText:T,error:f,warning:m,valid:h},he.createElement(Qy,{width:E,minWidth:"100px"},he.createElement(Ll,{selected:b,tabIndex:v,maxHeight:k,inputMaxHeight:w,onChange:t,onFocus:r,onKeyDown:n,onBlur:a,loading:g,error:f,warning:m,valid:h,disabled:y,clearable:M,clearText:zf(S),filterable:N,filterPlaceholder:zf(Y),placeholder:Z,prefix:K,empty:zf(B),loadingText:zf(F),noMatchText:zf(O),initialFocus:R,dense:L},A)))}}sN(ls,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>be.t("Clear"),empty:()=>be.t("No data found"),filterPlaceholder:()=>be.t("Type to filter options"),loadingText:()=>be.t("Loading options"),noMatchText:()=>be.t("No options found")});ls.propTypes={children:X.node,className:X.string,clearText:X.oneOfType([X.string,X.func]),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.oneOfType([X.node,X.func]),error:Gs,filterPlaceholder:X.oneOfType([X.node,X.func]),filterable:X.bool,helpText:X.string,initialFocus:X.bool,inputMaxHeight:X.string,inputWidth:X.string,label:X.string,loading:X.bool,loadingText:X.oneOfType([X.string,X.func]),maxHeight:X.string,noMatchText:X.oneOfType([X.string,X.func]),placeholder:X.string,prefix:X.string,required:X.bool,selected:X.string,tabIndex:X.string,valid:Gs,validationText:X.string,warning:Gs,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const Cs=i=>{let{label:e,active:t,disabled:r,onClick:n,className:a,dataTest:c="dhis2-uicore-singleselectoption",value:s}=i;return he.createElement("div",{onClick:h=>n({},h),"data-test":c,"data-value":s,"data-label":e,className:vt.dynamic([["1307386342",[ze.grey900,Bt.dp8,Bt.dp12,ze.grey200,ze.teal050,ze.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" "+(ir(a,{disabled:r,active:t})||"")},he.createElement("span",{"aria-hidden":"true",className:vt.dynamic([["1307386342",[ze.grey900,Bt.dp8,Bt.dp12,ze.grey200,ze.teal050,ze.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" checkmark"}),he.createElement("span",{className:vt.dynamic([["1307386342",[ze.grey900,Bt.dp8,Bt.dp12,ze.grey200,ze.teal050,ze.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" content"},e),he.createElement(vt,{id:"1307386342",dynamic:[ze.grey900,Bt.dp8,Bt.dp12,ze.grey200,ze.teal050,ze.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${ze.grey900};padding-block:${Bt.dp8};padding-inline:6px ${Bt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${ze.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${ze.teal050};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${ze.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}",`div.__jsx-style-dynamic-selector .checkmark.__jsx-style-dynamic-selector{width:16px;height:16px;margin-inline-end:6px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;background-size:contain;background-repeat:no-repeat;background-image:${t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"};}`]))};Cs.propTypes={label:X.string.isRequired,value:X.string.isRequired,active:X.bool,className:X.string,dataTest:X.string,disabled:X.bool,onClick:X.func};class de extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,de.prototype),e>de.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return de.__zero();if(de.__isOneDigitInt(e))return 0>e?de.__oneDigit(-e,!0):de.__oneDigit(e,!1);if(!r(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return de.__fromDouble(e)}if(typeof e=="string"){const n=de.__fromString(e);if(n===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return n}if(typeof e=="boolean")return e===!0?de.__oneDigit(1,!1):de.__zero();if(typeof e=="object"){if(e.constructor===de)return e;const n=de.__toPrimitive(e);return de.BigInt(n)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?de.__toStringGeneric(this,e,!1):de.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const T=e.__unsignedDigit(0);return e.sign?-T:T}const r=e.__digit(t-1),n=de.__clz30(r),a=30*t-n;if(1024<a)return e.sign?-1/0:1/0;let c=a-1,s=r,h=t-1;const f=n+3;let m=f===32?0:s<<f;m>>>=12;const y=f-12;let g=12<=f?0:s<<20+f,b=20+f;for(0<y&&0<h&&(h--,s=e.__digit(h),m|=s>>>30-y,g=s<<y+2,b=y+2);0<b&&0<h;)h--,s=e.__digit(h),g|=30<=b?s<<b-30:s>>>30-b,b-=30;const v=de.__decideRounding(e,b,h,s);if((v===1||v===0&&(1&g)==1)&&(g=g+1>>>0,g===0&&(m++,m>>>20!=0&&(m=0,c++,1023<c))))return e.sign?-1/0:1/0;const _=e.sign?-2147483648:0;return c=c+1023<<20,de.__kBitConversionInts[de.__kBitConversionIntHigh]=_|c|m,de.__kBitConversionInts[de.__kBitConversionIntLow]=g,de.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?de.__absoluteSubOne(e).__trim():de.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return de.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?de.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(r===1)return e;if(r>=de.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const c=1+(0|r/30),s=e.sign&&(1&r)!=0,h=new de(c,s);h.__initializeDigits();const f=1<<r%30;return h.__setDigit(c-1,f),h}let n=null,a=e;for(1&r&&(n=e),r>>=1;r!==0;r>>=1)a=de.multiply(a,a),1&r&&(n===null?n=a:n=de.multiply(n,a));return n}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;const n=new de(r,e.sign!==t.sign);n.__initializeDigits();for(let a=0;a<e.length;a++)de.__multiplyAccumulate(t,e.__digit(a),n,a);return n.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return de.__zero();const r=e.sign!==t.sign,n=t.__unsignedDigit(0);let a;if(t.length===1&&32767>=n){if(n===1)return r===e.sign?e:de.unaryMinus(e);a=de.__absoluteDivSmall(e,n,null)}else a=de.__absoluteDivLarge(e,t,!0,!1);return a.sign=r,a.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return e;const r=t.__unsignedDigit(0);if(t.length===1&&32767>=r){if(r===1)return de.__zero();const a=de.__absoluteModSmall(e,r);return a===0?de.__zero():de.__oneDigit(a,e.sign)}const n=de.__absoluteDivLarge(e,t,!1,!0);return n.sign=e.sign,n.__trim()}static add(e,t){const r=e.sign;return r===t.sign?de.__absoluteAdd(e,t,r):0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,r):de.__absoluteSub(t,e,!r)}static subtract(e,t){const r=e.sign;return r===t.sign?0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,r):de.__absoluteSub(t,e,!r):de.__absoluteAdd(e,t,r)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__rightShiftByAbsolute(e,t):de.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__leftShiftByAbsolute(e,t):de.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>de.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=de.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<de.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=de.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!de.equal(e,t)}static bitwiseAnd(e,t){var r=Math.max;if(!e.sign&&!t.sign)return de.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const n=r(e.length,t.length)+1;let a=de.__absoluteSubOne(e,n);const c=de.__absoluteSubOne(t);return a=de.__absoluteOr(a,c,a),de.__absoluteAddOne(a,!0,a).__trim()}return e.sign&&([e,t]=[t,e]),de.__absoluteAndNot(e,de.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var r=Math.max;if(!e.sign&&!t.sign)return de.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const c=r(e.length,t.length),s=de.__absoluteSubOne(e,c),h=de.__absoluteSubOne(t);return de.__absoluteXor(s,h,s).__trim()}const n=r(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let a=de.__absoluteSubOne(t,n);return a=de.__absoluteXor(a,e,a),de.__absoluteAddOne(a,!0,a).__trim()}static bitwiseOr(e,t){var r=Math.max;const n=r(e.length,t.length);if(!e.sign&&!t.sign)return de.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let c=de.__absoluteSubOne(e,n);const s=de.__absoluteSubOne(t);return c=de.__absoluteAnd(c,s,c),de.__absoluteAddOne(c,!0,c).__trim()}e.sign&&([e,t]=[t,e]);let a=de.__absoluteSubOne(t,n);return a=de.__absoluteAndNot(a,e,a),de.__absoluteAddOne(a,!0,a).__trim()}static asIntN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(e>=de.__kMaxLengthBits)return t;const n=0|(e+29)/30;if(t.length<n)return t;const a=t.__unsignedDigit(n-1),c=1<<(e-1)%30;if(t.length===n&&a<c)return t;if((a&c)!==c)return de.__truncateToNBits(e,t);if(!t.sign)return de.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(a&c-1)){for(let s=n-2;0<=s;s--)if(t.__digit(s)!==0)return de.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&a===c?t:de.__truncateToNBits(e,t)}return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(t.sign){if(e>de.__kMaxLengthBits)throw new RangeError("BigInt too big");return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=de.__kMaxLengthBits)return t;const n=0|(e+29)/30;if(t.length<n)return t;const a=e%30;return t.length==n&&(a===0||!(t.__digit(n-1)>>>a))?t:de.__truncateToNBits(e,t)}static ADD(e,t){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)&&de.__isBigInt(t))return de.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return de.__compare(e,t,0)}static LE(e,t){return de.__compare(e,t,1)}static GT(e,t){return de.__compare(e,t,2)}static GE(e,t){return de.__compare(e,t,3)}static EQ(e,t){for(;;){if(de.__isBigInt(e))return de.__isBigInt(t)?de.equal(e,t):de.EQ(t,e);if(typeof e=="number"){if(de.__isBigInt(t))return de.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="string"){if(de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.equal(e,t);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="boolean"){if(de.__isBigInt(t))return de.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="symbol"){if(de.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==de)return e==t;e=de.__toPrimitive(e)}else return e==t}}static NE(e,t){return!de.EQ(e,t)}static DataViewGetBigInt64(e,t,r=!1){return de.asIntN(64,de.DataViewGetBigUint64(e,t,r))}static DataViewGetBigUint64(e,t,r=!1){const[n,a]=r?[4,0]:[0,4],c=e.getUint32(t+n,r),s=e.getUint32(t+a,r),h=new de(3,!1);return h.__setDigit(0,1073741823&s),h.__setDigit(1,(268435455&c)<<2|s>>>30),h.__setDigit(2,c>>>28),h.__trim()}static DataViewSetBigInt64(e,t,r,n=!1){de.DataViewSetBigUint64(e,t,r,n)}static DataViewSetBigUint64(e,t,r,n=!1){r=de.asUintN(64,r);let a=0,c=0;if(0<r.length&&(c=r.__digit(0),1<r.length)){const f=r.__digit(1);c|=f<<30,a=f>>>2,2<r.length&&(a|=r.__digit(2)<<28)}const[s,h]=n?[4,0]:[0,4];e.setUint32(t+s,a,n),e.setUint32(t+h,c,n)}static __zero(){return new de(0,!1)}static __oneDigit(e,t){const r=new de(1,t);return r.__setDigit(0,e),r}__copy(){const e=new de(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,n){if(0<t)return-1;let a;if(0>t)a=-t-1;else{if(r===0)return-1;r--,n=e.__digit(r),a=29}let c=1<<a;if(!(n&c))return-1;if(c-=1,(n&c)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){de.__kBitConversionDouble[0]=e;const t=2047&de.__kBitConversionInts[de.__kBitConversionIntHigh]>>>20,r=t-1023,n=(0|r/30)+1,a=new de(n,0>e);let c=1048575&de.__kBitConversionInts[de.__kBitConversionIntHigh]|1048576,s=de.__kBitConversionInts[de.__kBitConversionIntLow];const h=20,f=r%30;let m,y=0;if(f<20){const g=h-f;y=g+32,m=c>>>g,c=c<<32-g|s>>>g,s<<=32-g}else if(f===20)y=32,m=c,c=s,s=0;else{const g=f-h;y=32-g,m=c<<g|s>>>32-g,c=s<<g,s=0}a.__setDigit(n-1,m);for(let g=n-2;0<=g;g--)0<y?(y-=30,m=c>>>2,c=c<<30|s>>>2,s<<=30):m=0,a.__setDigit(g,m);return a.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let r=0;const n=e.length;let a=0;if(a===n)return de.__zero();let c=e.charCodeAt(a);for(;de.__isWhitespace(c);){if(++a===n)return de.__zero();c=e.charCodeAt(a)}if(c===43){if(++a===n)return null;c=e.charCodeAt(a),r=1}else if(c===45){if(++a===n)return null;c=e.charCodeAt(a),r=-1}if(t===0){if(t=10,c===48){if(++a===n)return de.__zero();if(c=e.charCodeAt(a),c===88||c===120){if(t=16,++a===n)return null;c=e.charCodeAt(a)}else if(c===79||c===111){if(t=8,++a===n)return null;c=e.charCodeAt(a)}else if(c===66||c===98){if(t=2,++a===n)return null;c=e.charCodeAt(a)}}}else if(t===16&&c===48){if(++a===n)return de.__zero();if(c=e.charCodeAt(a),c===88||c===120){if(++a===n)return null;c=e.charCodeAt(a)}}if(r!=0&&t!==10)return null;for(;c===48;){if(++a===n)return de.__zero();c=e.charCodeAt(a)}const s=n-a;let h=de.__kMaxBitsPerChar[t],f=de.__kBitsPerCharTableMultiplier-1;if(s>1073741824/h)return null;const m=h*s+f>>>de.__kBitsPerCharTableShift,y=new de(0|(m+29)/30,!1),g=10>t?t:10,b=10<t?t-10:0;if(t&t-1){y.__initializeDigits();let v=!1,_=0;do{let T=0,k=1;for(;;){let E;if(c-48>>>0<g)E=c-48;else if((32|c)-97>>>0<b)E=(32|c)-87;else{v=!0;break}const A=k*t;if(1073741823<A)break;if(k=A,T=T*t+E,_++,++a===n){v=!0;break}c=e.charCodeAt(a)}f=30*de.__kBitsPerCharTableMultiplier-1;const w=0|(h*_+f>>>de.__kBitsPerCharTableShift)/30;y.__inplaceMultiplyAdd(k,T,w)}while(!v)}else{h>>=de.__kBitsPerCharTableShift;const v=[],_=[];let T=!1;do{let k=0,w=0;for(;;){let E;if(c-48>>>0<g)E=c-48;else if((32|c)-97>>>0<b)E=(32|c)-87;else{T=!0;break}if(w+=h,k=k<<h|E,++a===n){T=!0;break}if(c=e.charCodeAt(a),30<w+h)break}v.push(k),_.push(w)}while(!T);de.__fillFromParts(y,v,_)}if(a!==n){if(!de.__isWhitespace(c))return null;for(a++;a<n;a++)if(c=e.charCodeAt(a),!de.__isWhitespace(c))return null}return y.sign=r==-1,y.__trim()}static __fillFromParts(e,t,r){let n=0,a=0,c=0;for(let s=t.length-1;0<=s;s--){const h=t[s],f=r[s];a|=h<<c,c+=f,c===30?(e.__setDigit(n++,a),c=0,a=0):30<c&&(e.__setDigit(n++,1073741823&a),c-=30,a=h>>>f-c)}if(a!==0){if(n>=e.length)throw new Error("implementation bug");e.__setDigit(n++,a)}for(;n<e.length;n++)e.__setDigit(n,0)}static __toStringBasePowerOfTwo(e,t){const r=e.length;let n=t-1;n=(85&n>>>1)+(85&n),n=(51&n>>>2)+(51&n),n=(15&n>>>4)+(15&n);const a=n,c=t-1,s=e.__digit(r-1),h=de.__clz30(s);let f=0|(30*r-h+a-1)/a;if(e.sign&&f++,268435456<f)throw new Error("string too long");const m=Array(f);let y=f-1,g=0,b=0;for(let _=0;_<r-1;_++){const T=e.__digit(_),k=(g|T<<b)&c;m[y--]=de.__kConversionChars[k];const w=a-b;for(g=T>>>w,b=30-w;b>=a;)m[y--]=de.__kConversionChars[g&c],g>>>=a,b-=a}const v=(g|s<<b)&c;for(m[y--]=de.__kConversionChars[v],g=s>>>a-b;g!==0;)m[y--]=de.__kConversionChars[g&c],g>>>=a;if(e.sign&&(m[y--]="-"),y!=-1)throw new Error("implementation bug");return m.join("")}static __toStringGeneric(e,t,r){const n=e.length;if(n===0)return"";if(n===1){let _=e.__unsignedDigit(0).toString(t);return r===!1&&e.sign&&(_="-"+_),_}const a=30*n-de.__clz30(e.__digit(n-1)),c=de.__kMaxBitsPerChar[t],s=c-1;let h=a*de.__kBitsPerCharTableMultiplier;h+=s-1,h=0|h/s;const f=h+1>>1,m=de.exponentiate(de.__oneDigit(t,!1),de.__oneDigit(f,!1));let y,g;const b=m.__unsignedDigit(0);if(m.length===1&&32767>=b){y=new de(e.length,!1),y.__initializeDigits();let _=0;for(let T=2*e.length-1;0<=T;T--){const k=_<<15|e.__halfDigit(T);y.__setHalfDigit(T,0|k/b),_=0|k%b}g=_.toString(t)}else{const _=de.__absoluteDivLarge(e,m,!0,!0);y=_.quotient;const T=_.remainder.__trim();g=de.__toStringGeneric(T,t,!0)}y.__trim();let v=de.__toStringGeneric(y,t,!0);for(;g.length<f;)g="0"+g;return r===!1&&e.sign&&(v="-"+v),v+g}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const r=e.sign;if(r!==t.sign)return de.__unequalSign(r);const n=de.__absoluteCompare(e,t);return 0<n?de.__absoluteGreater(r):0>n?de.__absoluteLess(r):0}static __compareToNumber(e,t){if(de.__isOneDigitInt(t)){const r=e.sign,n=0>t;if(r!==n)return de.__unequalSign(r);if(e.length===0){if(n)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return de.__absoluteGreater(r);const a=Math.abs(t),c=e.__unsignedDigit(0);return c>a?de.__absoluteGreater(r):c<a?de.__absoluteLess(r):0}return de.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const r=e.sign;if(r!==0>t)return de.__unequalSign(r);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;de.__kBitConversionDouble[0]=t;const n=2047&de.__kBitConversionInts[de.__kBitConversionIntHigh]>>>20;if(n==2047)throw new Error("implementation bug: handled elsewhere");const a=n-1023;if(0>a)return de.__absoluteGreater(r);const c=e.length;let s=e.__digit(c-1);const h=de.__clz30(s),f=30*c-h,m=a+1;if(f<m)return de.__absoluteLess(r);if(f>m)return de.__absoluteGreater(r);let y=1048576|1048575&de.__kBitConversionInts[de.__kBitConversionIntHigh],g=de.__kBitConversionInts[de.__kBitConversionIntLow];const b=20,v=29-h;if(v!==(0|(f-1)%30))throw new Error("implementation bug");let _,T=0;if(20>v){const k=b-v;T=k+32,_=y>>>k,y=y<<32-k|g>>>k,g<<=32-k}else if(v===20)T=32,_=y,y=g,g=0;else{const k=v-b;T=32-k,_=y<<k|g>>>32-k,y=g<<k,g=0}if(s>>>=0,_>>>=0,s>_)return de.__absoluteGreater(r);if(s<_)return de.__absoluteLess(r);for(let k=c-2;0<=k;k--){0<T?(T-=30,_=y>>>2,y=y<<30|g>>>2,g<<=30):_=0;const w=e.__unsignedDigit(k);if(w>_)return de.__absoluteGreater(r);if(w<_)return de.__absoluteLess(r)}if(y!==0||g!==0){if(T===0)throw new Error("implementation bug");return de.__absoluteLess(r)}return 0}static __equalToNumber(e,t){var r=Math.abs;return de.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):de.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,r){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(de.__isBigInt(e)&&typeof t=="string")return t=de.__fromString(t),t!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),r);if(typeof e=="string"&&de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),r);if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)){if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToBigInt(e,t),r);if(typeof t!="number")throw new Error("implementation bug");return de.__comparisonResultToBool(de.__compareToNumber(e,t),r)}if(typeof e!="number")throw new Error("implementation bug");if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToNumber(t,e),2^r);if(typeof t!="number")throw new Error("implementation bug");return r===0?e<t:r===1?e<=t:r===2?e>t:r===3?e>=t:void 0}__clzmsd(){return de.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return de.__absoluteAdd(t,e,r);if(e.length===0)return e;if(t.length===0)return e.sign===r?e:de.unaryMinus(e);let n=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&n++;const a=new de(n,r);let c=0,s=0;for(;s<t.length;s++){const h=e.__digit(s)+t.__digit(s)+c;c=h>>>30,a.__setDigit(s,1073741823&h)}for(;s<e.length;s++){const h=e.__digit(s)+c;c=h>>>30,a.__setDigit(s,1073741823&h)}return s<a.length&&a.__setDigit(s,c),a.__trim()}static __absoluteSub(e,t,r){if(e.length===0)return e;if(t.length===0)return e.sign===r?e:de.unaryMinus(e);const n=new de(e.length,r);let a=0,c=0;for(;c<t.length;c++){const s=e.__digit(c)-t.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}for(;c<e.length;c++){const s=e.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}return n.__trim()}static __absoluteAddOne(e,t,r=null){const n=e.length;r===null?r=new de(n,t):r.sign=t;let a=1;for(let c=0;c<n;c++){const s=e.__digit(c)+a;a=s>>>30,r.__setDigit(c,1073741823&s)}return a!=0&&r.__setDigitGrow(n,1),r}static __absoluteSubOne(e,t){const r=e.length;t=t||r;const n=new de(t,!1);let a=1;for(let c=0;c<r;c++){const s=e.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}if(a!=0)throw new Error("implementation bug");for(let c=r;c<t;c++)n.__setDigit(c,0);return n}static __absoluteAnd(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const f=e,m=n;e=t,n=a,t=f,a=m}let s=c;r===null?r=new de(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)&t.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteAndNot(e,t,r=null){const n=e.length,a=t.length;let c=a;n<a&&(c=n);let s=n;r===null?r=new de(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)&~t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteOr(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const f=e,m=n;e=t,n=a,t=f,a=m}let s=n;r===null?r=new de(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)|t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteXor(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const f=e,m=n;e=t,n=a,t=f,a=m}let s=n;r===null?r=new de(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)^t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteCompare(e,t){const r=e.length-t.length;if(r!=0)return r;let n=e.length-1;for(;0<=n&&e.__digit(n)===t.__digit(n);)n--;return 0>n?0:e.__unsignedDigit(n)>t.__unsignedDigit(n)?1:-1}static __multiplyAccumulate(e,t,r,n){if(t===0)return;const a=32767&t,c=t>>>15;let s=0,h=0;for(let f,m=0;m<e.length;m++,n++){f=r.__digit(n);const y=e.__digit(m),g=32767&y,b=y>>>15,v=de.__imul(g,a),_=de.__imul(g,c),T=de.__imul(b,a),k=de.__imul(b,c);f+=h+v+s,s=f>>>30,f&=1073741823,f+=((32767&_)<<15)+((32767&T)<<15),s+=f>>>30,h=k+(_>>>15)+(T>>>15),r.__setDigit(n,1073741823&f)}for(;s!=0||h!==0;n++){let f=r.__digit(n);f+=s+h,h=0,s=f>>>30,r.__setDigit(n,1073741823&f)}}static __internalMultiplyAdd(e,t,r,n,a){let c=r,s=0;for(let h=0;h<n;h++){const f=e.__digit(h),m=de.__imul(32767&f,t),y=de.__imul(f>>>15,t),g=m+((32767&y)<<15)+s+c;c=g>>>30,s=y>>>15,a.__setDigit(h,1073741823&g)}if(a.length>n)for(a.__setDigit(n++,c+s);n<a.length;)a.__setDigit(n++,0);else if(c+s!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);const n=32767&e,a=e>>>15;let c=0,s=t;for(let h=0;h<r;h++){const f=this.__digit(h),m=32767&f,y=f>>>15,g=de.__imul(m,n),b=de.__imul(m,a),v=de.__imul(y,n),_=de.__imul(y,a);let T=s+g+c;c=T>>>30,T&=1073741823,T+=((32767&b)<<15)+((32767&v)<<15),c+=T>>>30,s=_+(b>>>15)+(v>>>15),this.__setDigit(h,1073741823&T)}if(c!=0||s!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){r===null&&(r=new de(e.length,!1));let n=0;for(let a,c=2*e.length-1;0<=c;c-=2){a=(n<<15|e.__halfDigit(c))>>>0;const s=0|a/t;n=0|a%t,a=(n<<15|e.__halfDigit(c-1))>>>0;const h=0|a/t;n=0|a%t,r.__setDigit(c>>>1,s<<15|h)}return r}static __absoluteModSmall(e,t){let r=0;for(let n=2*e.length-1;0<=n;n--)r=0|((r<<15|e.__halfDigit(n))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,n){const a=t.__halfDigitLength(),c=t.length,s=e.__halfDigitLength()-a;let h=null;r&&(h=new de(s+2>>>1,!1),h.__initializeDigits());const f=new de(a+2>>>1,!1);f.__initializeDigits();const m=de.__clz15(t.__halfDigit(a-1));0<m&&(t=de.__specialLeftShift(t,m,0));const y=de.__specialLeftShift(e,m,1),g=t.__halfDigit(a-1);let b=0;for(let v,_=s;0<=_;_--){v=32767;const T=y.__halfDigit(_+a);if(T!==g){const w=(T<<15|y.__halfDigit(_+a-1))>>>0;v=0|w/g;let E=0|w%g;const A=t.__halfDigit(a-2),M=y.__halfDigit(_+a-2);for(;de.__imul(v,A)>>>0>(E<<16|M)>>>0&&(v--,E+=g,!(32767<E)););}de.__internalMultiplyAdd(t,v,0,c,f);let k=y.__inplaceSub(f,_,a+1);k!==0&&(k=y.__inplaceAdd(t,_,a),y.__setHalfDigit(_+a,32767&y.__halfDigit(_+a)+k),v--),r&&(1&_?b=v<<15:h.__setDigit(_>>>1,b|v))}if(n)return y.__inplaceRightShift(m),r?{quotient:h,remainder:y}:y;if(r)return h;throw new Error("unreachable")}static __clz15(e){return de.__clz30(e)-15}__inplaceAdd(e,t,r){let n=0;for(let a=0;a<r;a++){const c=this.__halfDigit(t+a)+e.__halfDigit(a)+n;n=c>>>15,this.__setHalfDigit(t+a,32767&c)}return n}__inplaceSub(e,t,r){let n=0;if(1&t){t>>=1;let a=this.__digit(t),c=32767&a,s=0;for(;s<r-1>>>1;s++){const m=e.__digit(s),y=(a>>>15)-(32767&m)-n;n=1&y>>>15,this.__setDigit(t+s,(32767&y)<<15|32767&c),a=this.__digit(t+s+1),c=(32767&a)-(m>>>15)-n,n=1&c>>>15}const h=e.__digit(s),f=(a>>>15)-(32767&h)-n;if(n=1&f>>>15,this.__setDigit(t+s,(32767&f)<<15|32767&c),t+s+1>=this.length)throw new RangeError("out of bounds");!(1&r)&&(a=this.__digit(t+s+1),c=(32767&a)-(h>>>15)-n,n=1&c>>>15,this.__setDigit(t+e.length,1073709056&a|32767&c))}else{t>>=1;let a=0;for(;a<e.length-1;a++){const m=this.__digit(t+a),y=e.__digit(a),g=(32767&m)-(32767&y)-n;n=1&g>>>15;const b=(m>>>15)-(y>>>15)-n;n=1&b>>>15,this.__setDigit(t+a,(32767&b)<<15|32767&g)}const c=this.__digit(t+a),s=e.__digit(a),h=(32767&c)-(32767&s)-n;n=1&h>>>15;let f=0;!(1&r)&&(f=(c>>>15)-(s>>>15)-n,n=1&f>>>15),this.__setDigit(t+a,(32767&f)<<15|32767&h)}return n}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const r=this.length-1;for(let n=0;n<r;n++){const a=this.__digit(n+1);this.__setDigit(n,1073741823&a<<30-e|t),t=a>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){const n=e.length,a=new de(n+r,!1);if(t===0){for(let s=0;s<n;s++)a.__setDigit(s,e.__digit(s));return 0<r&&a.__setDigit(n,0),a}let c=0;for(let s=0;s<n;s++){const h=e.__digit(s);a.__setDigit(s,1073741823&h<<t|c),c=h>>>30-t}return 0<r&&a.__setDigit(n,c),a}static __leftShiftByAbsolute(e,t){const r=de.__toShiftAmount(t);if(0>r)throw new RangeError("BigInt too big");const n=0|r/30,a=r%30,c=e.length,s=a!==0&&e.__digit(c-1)>>>30-a!=0,h=c+n+(s?1:0),f=new de(h,e.sign);if(a===0){let m=0;for(;m<n;m++)f.__setDigit(m,0);for(;m<h;m++)f.__setDigit(m,e.__digit(m-n))}else{let m=0;for(let y=0;y<n;y++)f.__setDigit(y,0);for(let y=0;y<c;y++){const g=e.__digit(y);f.__setDigit(y+n,1073741823&g<<a|m),m=g>>>30-a}if(s)f.__setDigit(c+n,m);else if(m!==0)throw new Error("implementation bug")}return f.__trim()}static __rightShiftByAbsolute(e,t){const r=e.length,n=e.sign,a=de.__toShiftAmount(t);if(0>a)return de.__rightShiftByMaximum(n);const c=0|a/30,s=a%30;let h=r-c;if(0>=h)return de.__rightShiftByMaximum(n);let f=!1;if(n){if(e.__digit(c)&(1<<s)-1)f=!0;else for(let y=0;y<c;y++)if(e.__digit(y)!==0){f=!0;break}}f&&s===0&&!~e.__digit(r-1)&&h++;let m=new de(h,n);if(s===0){m.__setDigit(h-1,0);for(let y=c;y<r;y++)m.__setDigit(y-c,e.__digit(y))}else{let y=e.__digit(c)>>>s;const g=r-c-1;for(let b=0;b<g;b++){const v=e.__digit(b+c+1);m.__setDigit(b,1073741823&v<<30-s|y),y=v>>>s}m.__setDigit(g,y)}return f&&(m=de.__absoluteAddOne(m,!0,m)),m.__trim()}static __rightShiftByMaximum(e){return e?de.__oneDigit(1,!0):de.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>de.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===de)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"&&e[Symbol.toPrimitive]){const a=e[Symbol.toPrimitive](t);if(typeof a!="object")return a;throw new TypeError("Cannot convert object to primitive value")}const r=e.valueOf;if(r){const a=r.call(e);if(typeof a!="object")return a}const n=e.toString;if(n){const a=n.call(e);if(typeof a!="object")return a}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return de.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===de}static __truncateToNBits(e,t){const r=0|(e+29)/30,n=new de(r,t.sign),a=r-1;for(let s=0;s<a;s++)n.__setDigit(s,t.__digit(s));let c=t.__digit(a);if(e%30!=0){const s=32-e%30;c=c<<s>>>s}return n.__setDigit(a,c),n.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){var n=Math.min;const a=0|(e+29)/30,c=new de(a,r);let s=0;const h=a-1;let f=0;for(const b=n(h,t.length);s<b;s++){const v=0-t.__digit(s)-f;f=1&v>>>30,c.__setDigit(s,1073741823&v)}for(;s<h;s++)c.__setDigit(s,0|1073741823&-f);let m=h<t.length?t.__digit(h):0;const y=e%30;let g;if(y==0)g=0-m-f,g&=1073741823;else{const b=32-y;m=m<<b>>>b;const v=1<<32-b;g=v-m-f,g&=v-1}return c.__setDigit(h,g),c.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const r=e>>>1,n=this.__digit(r),a=1&e?32767&n|t<<15:1073709056&n|32767&t;this.__setDigit(r,a)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __detectBigEndian(){return de.__kBitConversionDouble[0]=-0,de.__kBitConversionInts[0]!==0}static __isOneDigitInt(e){return(1073741823&e)===e}}de.__kMaxLength=33554432,de.__kMaxLengthBits=de.__kMaxLength<<5,de.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],de.__kBitsPerCharTableShift=5,de.__kBitsPerCharTableMultiplier=1<<de.__kBitsPerCharTableShift,de.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],de.__kBitConversionBuffer=new ArrayBuffer(8),de.__kBitConversionDouble=new Float64Array(de.__kBitConversionBuffer),de.__kBitConversionInts=new Int32Array(de.__kBitConversionBuffer),de.__kBitConversionIntHigh=de.__detectBigEndian()?0:1,de.__kBitConversionIntLow=de.__detectBigEndian()?1:0,de.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},de.__imul=Math.imul||function(i,e){return 0|i*e};const _1={};function Bl(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const r=Object.getOwnPropertyDescriptor(i,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i,t,r))}for(const t of Object.getOwnPropertyNames(i.prototype)){const r=Object.getOwnPropertyDescriptor(i.prototype,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i.prototype,t,r))}C1(e,i),C1(`${e}.prototype`,i.prototype)}function C1(i,e){const t=`%${i}%`;if(_1[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);_1[t]=e}function ji(i){return _1[i]}const zi="slot-epochNanoSeconds",iu="slot-timezone-identifier",oi="slot-year",di="slot-month",pi="slot-day",Wi="slot-hour",Yi="slot-minute",Zi="slot-second",Xi="slot-millisecond",Ki="slot-microsecond",Qi="slot-nanosecond",At="slot-calendar",Hs="slot-cached-instant",jr="slot-time-zone",Qs="slot-years",xs="slot-months",wa="slot-weeks",Js="slot-days",ea="slot-hours",ta="slot-minutes",ia="slot-seconds",ra="slot-milliseconds",na="slot-microseconds",sa="slot-nanoseconds",zn="slot-calendar-identifier",hk=new WeakMap;function $l(i){hk.set(i,Object.create(null))}function a_(i){return hk.get(i)}function fs(i,...e){if(!i||typeof i!="object")return!1;const t=a_(i);return!!t&&e.reduce((r,n)=>r&&n in t,!0)}function Q(i,e){const t=a_(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function tr(i,e,t){a_(i)[e]=t}const ET=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,lN=new RegExp(`(?:(?:${ET.source})(?:\\/(?:${ET.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),kT=/[A-Za-z0-9]{3,8}/,cN=new RegExp(`(?:${kT.source}(?:-${kT.source})*)`),pk=/(?:[+\u2212-]\d{6}|\d{4})/,x0=/(?:0[1-9]|1[0-2])/,T1=/(?:0[1-9]|[12]\d|3[01])/,uN=new RegExp(`(${pk.source})(?:-(${x0.source})-(${T1.source})|(${x0.source})(${T1.source}))`),fk=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,mk=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,gk=new RegExp(`(?:([zZ])|(?:${mk.source})?)(?:\\[(${lN.source})\\])?`),yk=new RegExp(`\\[u-ca=(${cN.source})\\]`),dN=new RegExp(`^${uN.source}(?:(?:T|\\s+)${fk.source})?${gk.source}(?:${yk.source})?$`,"i"),hN=new RegExp(`^T?${fk.source}(?:${gk.source})?(?:${yk.source})?$`,"i"),pN=new RegExp(`^(${pk.source})-?(${x0.source})$`),fN=new RegExp(`^(?:--)?(${x0.source})-?(${T1.source})$`),ab=/(\d+)(?:[.,](\d{1,9}))?/,mN=new RegExp(`(?:${ab.source}H)?(?:${ab.source}M)?(?:${ab.source}S)?`),gN=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${mN.source})?$`,"i"),vk=Array.prototype.includes,o_=Array.prototype.push,xk=globalThis.Intl.DateTimeFormat,yN=Math.min,vN=Math.max,Sr=Math.abs,cs=Math.floor,Am=Math.sign,Xh=Math.trunc,Jm=Number.isNaN,_s=Number.isFinite,xN=Number,eg=String,bN=Number.MAX_SAFE_INTEGER,bk=Object.assign,Ls=Object.create,wN=Object.getOwnPropertyDescriptor,_N=Object.is,l_=Reflect.apply,On=de.BigInt(0),c_=de.BigInt(1),Sd=de.BigInt(60),Or=de.BigInt(1e3),Co=de.BigInt(1e6),xc=de.BigInt(1e9),CN=de.BigInt(-1),gu=de.multiply(de.BigInt(86400),xc),Im=de.multiply(de.BigInt(-86400),de.BigInt(1e17)),Pm=de.multiply(de.BigInt(86400),de.BigInt(1e17)),wk=de.multiply(de.BigInt(-388152),de.BigInt(1e13)),TN=de.multiply(gu,de.BigInt(3660)),_k=de.multiply(gu,de.BigInt(366)),Ck=de.multiply(gu,de.BigInt(14)),SN=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function Tk(i){if(typeof i!="number"||!_s(i))return!1;const e=Sr(i);return cs(e)===e}function rn(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Dm(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return xN(i)}function Fr(i){const e=Dm(i);if(Jm(e))return 0;const t=Xh(e);return e===0?0:t}function Ui(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return eg(i)}function Yr(i){const e=Fr(i);if(!_s(e))throw new RangeError("infinity is out of range");return e}function Rm(i,e){const t=Fr(i);if(!_s(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function os(i){const e=Dm(i);if(Jm(e))return 0;if(!_s(e))throw new RangeError("infinity is out of range");if(!Tk(e))throw new RangeError(`unsupported fractional value ${e}`);return Fr(e)}function as(i,e){return{quotient:de.divide(i,e),remainder:de.remainder(i,e)}}function u_(i){return de.lessThan(i,On)?de.multiply(i,CN):i}function S1(i,...e){return o_.apply(i,e),i}const MT=new Map([["year",Yr],["month",Rm],["monthCode",Ui],["day",Rm],["hour",Yr],["minute",Yr],["second",Yr],["millisecond",Yr],["microsecond",Yr],["nanosecond",Yr],["years",os],["months",os],["weeks",os],["days",os],["hours",os],["minutes",os],["seconds",os],["milliseconds",os],["microseconds",os],["nanoseconds",os],["era",Ui],["eraYear",Fr],["offset",Ui]]),EN=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Tp=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],b0=new Map(Tp.map(i=>[i[0],i[1]])),kN=new Map(Tp.map(([i,e])=>[e,i])),AT=Tp.map(([,i])=>i),IT=Array.from(b0.keys()).sort(),PT=new Map;function Sk(i){let e=PT.get(i);return e===void 0&&(e=new xk("en-us",{timeZone:eg(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),PT.set(i,e)),e}function Jn(i){return fs(i,zi)&&!fs(i,jr,At)}function xl(i){return fs(i,iu)}function Nn(i){return fs(i,zn)}function kn(i){return fs(i,Qs,xs,Js,ea,ta,ia,ra,na,sa)}function gr(i){return fs(i,"slot-date-brand")}function Mn(i){return fs(i,Wi,Yi,Zi,Xi,Ki,Qi)&&!fs(i,oi,di,pi)}function er(i){return fs(i,oi,di,pi,Wi,Yi,Zi,Xi,Ki,Qi)}function Ir(i){return fs(i,"slot-year-month-brand")}function bs(i){return fs(i,"slot-month-day-brand")}function bi(i){return fs(i,zi,jr,At)}function Sp(i){if(fs(i,At)||fs(i,jr))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Ek(i){let{ianaName:e,offset:t,z:r}=function(a){try{let c=y_(a);if(c)return{ianaName:c.toString()}}catch{}try{const c=Ul(a);if(c.z||c.offset||c.ianaName)return c}catch{}throw new RangeError(`Invalid time zone: ${a}`)}(i);return e||(r?"UTC":t)}function tg(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function Ul(i){const e=dN.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]===""&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const r=Fr(t),n=Fr(e[2]||e[4]),a=Fr(e[3]||e[5]),c=Fr(e[6]),s=e[6]!==void 0,h=Fr(e[7]||e[10]);let f=Fr(e[8]||e[11]);f===60&&(f=59);const m=(e[9]||e[12])+"000000000",y=Fr(m.slice(0,3)),g=Fr(m.slice(3,6)),b=Fr(m.slice(6,9));let v,_=!1;if(e[13])v=void 0,_=!0;else if(e[14]&&e[15]){const w=e[14]==="-"||e[14]===""?"-":"+",E=e[15]||"00",A=e[16]||"00",M=e[17]||"00";let S=e[18]||"0";if(v=`${w}${E}:${A}`,+S){for(;S.endsWith("0");)S=S.slice(0,-1);v+=`:${M}.${S}`}else+M&&(v+=`:${M}`);v==="-00:00"&&(v="+00:00")}let T=e[19];if(T)try{T=y_(T).toString()}catch{}const k=e[20];return w_(r,n,a,c,h,f,y,g,b),{year:r,month:n,day:a,hasTime:s,hour:c,minute:h,second:f,millisecond:y,microsecond:g,nanosecond:b,ianaName:T,offset:v,z:_,calendar:k}}function kk(i){const e=pN.exec(i);let t,r,n,a;if(e){let c=e[1];if(c[0]===""&&(c=`-${c.slice(1)}`),c==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=Fr(c),r=Fr(e[2]),n=e[3]}else{let c;if({year:t,month:r,calendar:n,day:a,z:c}=Ul(i),c)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:r,calendar:n,referenceISODay:a}}function Mk(i){const e=fN.exec(i);let t,r,n,a;if(e)t=Fr(e[1]),r=Fr(e[2]);else{let c;if({month:t,day:r,calendar:n,year:a,z:c}=Ul(i),c)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:r,calendar:n,referenceISOYear:a}}function MN(i){const e=gN.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(T=>T===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]===""?-1:1,r=Fr(e[2])*t,n=Fr(e[3])*t,a=Fr(e[4])*t,c=Fr(e[5])*t,s=Fr(e[6])*t;let h=e[7],f=Fr(e[8])*t,m=e[9],y=Fr(e[10])*t;const g=e[11]+"000000000";let b=Fr(g.slice(0,3))*t,v=Fr(g.slice(3,6))*t,_=Fr(g.slice(6,9))*t;return h=h?t*Fr(h)/10**h.length:0,m=m?t*Fr(m)/10**m.length:0,{minutes:f,seconds:y,milliseconds:b,microseconds:v,nanoseconds:_}=function(k,w,E,A,M,S,N){let Y=k,Z=w,K=E,B=A,F=M,O=S,R=N;if(Y!==0){[Z,K,B,F,O,R].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*Y;Z=Xh(L),K=L%1}if(K!==0){[B,F,O,R].forEach(V=>{if(V!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*K;B=Xh(L);const G=L%1;if(G!==0){const V=1e3*G;F=Xh(V);const $=V%1;if($!==0){const q=1e3*$;O=Xh(q);const W=q%1;W!==0&&(R=Xh(1e3*W))}}}return{minutes:Z,seconds:B,milliseconds:F,microseconds:O,nanoseconds:R}}(h,f,m,y,b,v,_),kv(r,n,a,c,s,f,y,b,v,_),{years:r,months:n,weeks:a,days:c,hours:s,minutes:f,seconds:y,milliseconds:b,microseconds:v,nanoseconds:_}}function AN(i){let{year:e,month:t,day:r,hour:n,minute:a,second:c,millisecond:s,microsecond:h,nanosecond:f,offset:m,z:y}=function(_){const T=Ul(_);if(!T.z&&!T.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return T}(i);if(!y&&!m)throw new RangeError("Temporal.Instant requires a time zone offset");const g=y?0:jd(m);({year:e,month:t,day:r,hour:n,minute:a,second:c,millisecond:s,microsecond:h,nanosecond:f}=x_(e,t,r,n,a,c,s,h,f-g));const b=xu(e,t,r,n,a,c,s,h,f);if(b===null)throw new RangeError("DateTime outside of supported range");return b}function w0(i,e,t,r){let n=i,a=e,c=t;switch(r){case"reject":Nl(n,a,c);break;case"constrain":({year:n,month:a,day:c}=Vk(n,a,c))}return{year:n,month:a,day:c}}function fv(i,e,t,r,n,a,c){let s=i,h=e,f=t,m=r,y=n,g=a;switch(c){case"reject":Ev(s,h,f,m,y,g);break;case"constrain":({hour:s,minute:h,second:f,millisecond:m,microsecond:y,nanosecond:g}=function(v,_,T,k,w,E){const A=Ua(v,0,23),M=Ua(_,0,59),S=Ua(T,0,59),N=Ua(k,0,999),Y=Ua(w,0,999),Z=Ua(E,0,999);return{hour:A,minute:M,second:S,millisecond:N,microsecond:Y,nanosecond:Z}}(s,h,f,m,y,g))}return{hour:s,minute:h,second:f,millisecond:m,microsecond:y,nanosecond:g}}function Hd(i){if(!rn(i))return MN(Ui(i));if(kn(i))return{years:Q(i,Qs),months:Q(i,xs),weeks:Q(i,wa),days:Q(i,Js),hours:Q(i,ea),minutes:Q(i,ta),seconds:Q(i,ia),milliseconds:Q(i,ra),microseconds:Q(i,na),nanoseconds:Q(i,sa)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(v){if(!rn(v))throw new TypeError("invalid duration-like");const _={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let T=!1;for(const k of IT){const w=v[k];w!==void 0&&(T=!0,_[k]=os(w))}if(!T)throw new TypeError("invalid duration-like");return _}(i);for(const b of IT){const v=t[b];v!==void 0&&(e[b]=v)}let{years:r,months:n,weeks:a,days:c,hours:s,minutes:h,seconds:f,milliseconds:m,microseconds:y,nanoseconds:g}=e;return kv(r,n,a,c,s,h,f,m,y,g),{years:r,months:n,weeks:a,days:c,hours:s,minutes:h,seconds:f,milliseconds:m,microseconds:y,nanoseconds:g}}function Bn(i){return i===void 0?"constrain":wu(i,"overflow",["constrain","reject"],"constrain")}function Lm(i){return i===void 0?"compatible":wu(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Ea(i,e){return wu(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function ig(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function E1(i,e){return i===void 0?e:wu(i,"offset",["prefer","use","ignore","reject"],e)}function rg(i){return wu(i,"calendarName",["auto","always","never"],"auto")}function kc(i,e,t){let r=1/0;e!==void 0&&(r=e),t||e===void 0||(r=e>1?e-1:1);const n=function(c,s,h,f,m){let y=c[s];if(y===void 0)return m;const g=Dm(y);if(Jm(g)||g<h||g>f)throw new RangeError(`${String(s)} must be between ${h} and ${f}, not ${g}`);return cs(g)}(i,"roundingIncrement",1,r,1);if(e!==void 0&&e%n!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return n}function d_(i,e){return kc(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function ng(i){const e=hs(i,"smallestUnit","time",void 0);if(e==="hour"){const n=Tp.reduce((a,[c,s,h])=>(h==="time"&&s!=="hour"&&a.push(s,c),a),[]);throw new RangeError(`smallestUnit must be one of ${n.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const n=Ui(t);if(n==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`)}if(Jm(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const r=cs(t);switch(r){case 0:return{precision:r,unit:"second",increment:1};case 1:case 2:case 3:return{precision:r,unit:"millisecond",increment:10**(3-r)};case 4:case 5:case 6:return{precision:r,unit:"microsecond",increment:10**(6-r)};case 7:case 8:case 9:return{precision:r,unit:"nanosecond",increment:10**(9-r)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Ld=Symbol("~required~");function hs(i,e,t,r,n=[]){const a=[];for(const[,f,m]of Tp)t!=="datetime"&&t!==m||a.push(f);a.push(...n);let c=r;c===Ld?c=void 0:c!==void 0&&a.push(c);const s=[...a];for(const f of a){const m=kN.get(f);m!==void 0&&s.push(m)}let h=wu(i,e,s,c);if(h===void 0&&r===Ld)throw new RangeError(`${e} is required`);return b0.has(h)?b0.get(h):h}function e0(i){const e=i.relativeTo;if(e===void 0)return e;let t,r,n,a,c,s,h,f,m,y,g,b,v="option",_=!1;if(rn(e)){if(bi(e)||gr(e))return e;if(er(e))return up(e);y=Ep(e);const T=sr(e,qn(y,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),k=Ls(null);k.overflow="constrain",{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m}=sg(y,T,k),b=e.offset,b===void 0&&(v="wall"),g=e.timeZone}else{let T,k;({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m,calendar:y,ianaName:T,offset:b,z:k}=Ul(Ui(e))),T&&(g=T),k?v="exact":b||(v="wall"),y||(y=$n()),y=Ts(y),_=!0}if(g!==void 0){g=ca(g);let T=0;return v==="option"&&(T=jd(Ui(b))),Is(C0(t,r,n,a,c,s,h,f,m,v,T,g,"compatible","reject",_),g,y)}return Ho(t,r,n,y)}function k1(i,e,t,r,n,a,c,s,h,f){for(const[m,y]of[["years",i],["months",e],["weeks",t],["days",r],["hours",n],["minutes",a],["seconds",c],["milliseconds",s],["microseconds",h],["nanoseconds",f]])if(y!==0)return b0.get(m);return"nanosecond"}function Ha(i,e){return AT.indexOf(i)>AT.indexOf(e)?e:i}function mv(i,e){let t=i;return t===void 0&&(t=Ls(null)),bk(Ls(null),t,{largestUnit:e})}function sr(i,e,t,{emptySourceErrorMessage:r}={emptySourceErrorMessage:"no supported properties found"}){const n=Ls(null);let a=!1;for(const c of e){let s=i[c];if(s!==void 0)a=!0,MT.has(c)&&(s=MT.get(c)(s)),n[c]=s;else if(t!=="partial"){if(vk.call(t,c))throw new TypeError(`required property '${c}' missing or undefined`);s=EN.get(c),n[c]=s}}if(t==="partial"&&!a)throw new TypeError(r);if(n.era===void 0!=(n.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return n}function _0(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],r=sr(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),n={};for(const a of t){const c=wN(r,a);c!==void 0?n[a]=c.value:e==="complete"&&(n[a]=0)}return n}function Wr(i,e){let t=i;if(rn(t)){if(gr(t))return t;if(bi(t)&&(Bn(e),t=ro(Q(t,jr),Q(t,Hs),Q(t,At))),er(t))return Bn(e),Ho(Q(t,oi),Q(t,di),Q(t,pi),Q(t,At));const h=Ep(t);return vu(h,sr(t,qn(h,["day","month","monthCode","year"]),[]),e)}Bn(e);const{year:r,month:n,day:a,calendar:c,z:s}=function(f){return Ul(f)}(Ui(t));if(s)throw new RangeError("Z designator not supported for PlainDate");return new(ji("%Temporal.PlainDate%"))(r,n,a,c)}function sg(i,e,t){let{hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=_0(e);const f=Bn(t),m=vu(i,e,t),y=Q(m,oi),g=Q(m,di),b=Q(m,pi);return{hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=fv(r,n,a,c,s,h,f),{year:y,month:g,day:b,hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}}function bd(i,e){let t,r,n,a,c,s,h,f,m,y;if(rn(i)){if(er(i))return i;if(bi(i))return Bn(e),ro(Q(i,jr),Q(i,Hs),Q(i,At));if(gr(i))return Bn(e),$a(Q(i,oi),Q(i,di),Q(i,pi),0,0,0,0,0,0,Q(i,At));y=Ep(i);const g=sr(i,qn(y,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m}=sg(y,g,e))}else{let g;if(Bn(e),{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m,calendar:y,z:g}=function(v){return Ul(v)}(Ui(i)),g)throw new RangeError("Z designator not supported for PlainDateTime");w_(t,r,n,a,c,s,h,f,m),y===void 0&&(y=$n()),y=Ts(y)}return $a(t,r,n,a,c,s,h,f,m,y)}function ip(i){if(kn(i))return i;let{years:e,months:t,weeks:r,days:n,hours:a,minutes:c,seconds:s,milliseconds:h,microseconds:f,nanoseconds:m}=Hd(i);return new(ji("%Temporal.Duration%"))(e,t,r,n,a,c,s,h,f,m)}function _l(i){if(Jn(i))return i;if(bi(i))return new(ji("%Temporal.Instant%"))(Q(i,zi));const e=AN(Ui(i));return new(ji("%Temporal.Instant%"))(e)}function DT(i,e){let t=i;if(rn(t)){if(bs(t))return t;let h,f;if(fs(t,At))h=Q(t,At),f=!1;else{let y=t.calendar;f=y===void 0,y===void 0&&(y=$n()),h=Ts(y)}t=t;const m=sr(t,qn(h,["day","month","monthCode","year"]),[]);return f&&m.month!==void 0&&m.monthCode===void 0&&m.year===void 0&&(m.year=1972),cp(h,m,e)}Bn(e);let{month:r,day:n,referenceISOYear:a,calendar:c}=Mk(Ui(t)),s=c;return s===void 0&&(s=$n()),s=Ts(s),a===void 0?(Nl(1972,r,n),Nm(r,n,s)):cp(s,Nm(r,n,s,a))}function yc(i,e="constrain"){let t,r,n,a,c,s,h,f=i;if(rn(f)){if(Mn(f))return f;if(bi(f)&&(f=ro(Q(f,jr),Q(f,Hs),Q(f,At))),er(f))return new(ji("%Temporal.PlainTime%"))(Q(f,Wi),Q(f,Yi),Q(f,Zi),Q(f,Xi),Q(f,Ki),Q(f,Qi));if(h=Ep(f),Ui(h)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s}=_0(f)),{hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s}=fv(t,r,n,a,c,s,e)}else if({hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s,calendar:h}=function(y){const g=hN.exec(y);let b,v,_,T,k,w,E;if(g){b=Fr(g[1]),v=Fr(g[2]||g[5]),_=Fr(g[3]||g[6]),_===60&&(_=59);const A=(g[4]||g[7])+"000000000";T=Fr(A.slice(0,3)),k=Fr(A.slice(3,6)),w=Fr(A.slice(6,9)),E=g[15]}else{let A,M;if({hasTime:M,hour:b,minute:v,second:_,millisecond:T,microsecond:k,nanosecond:w,calendar:E,z:A}=Ul(y),!M)throw new RangeError(`time is missing in string: ${y}`);if(A)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(y))return{hour:b,minute:v,second:_,millisecond:T,microsecond:k,nanosecond:w,calendar:E};try{const{month:A,day:M}=Mk(y);Nl(1972,A,M)}catch{try{const{year:A,month:M}=kk(y);Nl(A,M,1)}catch{return{hour:b,minute:v,second:_,millisecond:T,microsecond:k,nanosecond:w,calendar:E}}}throw new RangeError(`invalid ISO 8601 time-only string ${y}; may need a T prefix`)}(Ui(f)),Ev(t,r,n,a,c,s),h!==void 0&&h!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(ji("%Temporal.PlainTime%"))(t,r,n,a,c,s)}function nm(i,e){if(rn(i)){if(Ir(i))return i;const s=Ep(i);return zd(s,sr(i,qn(s,["month","monthCode","year"]),[]),e)}Bn(e);let{year:t,month:r,referenceISODay:n,calendar:a}=kk(Ui(i)),c=a;return c===void 0&&(c=$n()),c=Ts(c),n===void 0?(Nl(t,r,1),zm(t,r,c)):zd(c,zm(t,r,c,n))}function C0(i,e,t,r,n,a,c,s,h,f,m,y,g,b,v){const _=new(ji("%Temporal.PlainDateTime%"))(i,e,t,r,n,a,c,s,h);if(f==="wall"||b==="ignore")return Q(oa(y,_,g),zi);if(f==="exact"||b==="use"){const k=xu(i,e,t,r,n,a,c,s,h);if(k===null)throw new RangeError("ZonedDateTime outside of supported range");return de.subtract(k,de.BigInt(m))}const T=T0(y,_);for(const k of T){const w=rl(y,k),E=de.toNumber(Oa(de.BigInt(w),6e10,"halfExpand"));if(w===m||v&&E===m)return Q(k,zi)}if(b==="reject"){const k=v_(m),w=xl(y)?Q(y,iu):"time zone";throw new RangeError(`Offset ${k} is invalid for ${_.toString()} in ${w}`)}return Q(zk(T,y,_,g),zi)}function sm(i,e){let t,r,n,a,c,s,h,f,m,y,g,b,v=!1,_="option";if(rn(i)){if(bi(i))return i;b=Ep(i);const k=sr(i,S1(qn(b,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m}=sg(b,k,e)),y=ca(k.timeZone),g=k.offset,g===void 0?_="wall":g=Ui(g)}else{let k,w;if(Bn(e),{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m,ianaName:k,offset:g,z:w,calendar:b}=function(A){const M=Ul(A);if(!M.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return M}(Ui(i)),!k)throw new RangeError("time zone ID required in brackets");w?_="exact":g||(_="wall"),y=new(ji("%Temporal.TimeZone%"))(k),b||(b=$n()),b=Ts(b),v=!0}let T=0;return _==="option"&&(T=jd(g)),Is(C0(t,r,n,a,c,s,h,f,m,_,T,y,Lm(e),E1(e,"reject"),v),y,b)}function Ak(i,e,t,r,n){Nl(e,t,r),Hk(e,t,r),$l(i),tr(i,oi,e),tr(i,di,t),tr(i,pi,r),tr(i,At,n),tr(i,"slot-date-brand",!0)}function Ho(i,e,t,r=$n()){const n=ji("%Temporal.PlainDate%"),a=Ls(n.prototype);return Ak(a,i,e,t,r),a}function Ik(i,e,t,r,n,a,c,s,h,f,m){w_(e,t,r,n,a,c,s,h,f),Gk(e,t,r,n,a,c,s,h,f),$l(i),tr(i,oi,e),tr(i,di,t),tr(i,pi,r),tr(i,Wi,n),tr(i,Yi,a),tr(i,Zi,c),tr(i,Xi,s),tr(i,Ki,h),tr(i,Qi,f),tr(i,At,m)}function $a(i,e,t,r,n,a,c,s,h,f=$n()){const m=ji("%Temporal.PlainDateTime%"),y=Ls(m.prototype);return Ik(y,i,e,t,r,n,a,c,s,h,f),y}function Pk(i,e,t,r,n){Nl(n,e,t),Hk(n,e,t),$l(i),tr(i,di,e),tr(i,pi,t),tr(i,oi,n),tr(i,At,r),tr(i,"slot-month-day-brand",!0)}function Nm(i,e,t=$n(),r=1972){const n=ji("%Temporal.PlainMonthDay%"),a=Ls(n.prototype);return Pk(a,i,e,t,r),a}function Dk(i,e,t,r,n){Nl(e,t,n),function(c,s){Ds(c,-271821,275760),c===-271821?Ds(s,4,12):c===275760&&Ds(s,1,9)}(e,t),$l(i),tr(i,oi,e),tr(i,di,t),tr(i,pi,n),tr(i,At,r),tr(i,"slot-year-month-brand",!0)}function zm(i,e,t=$n(),r=1){const n=ji("%Temporal.PlainYearMonth%"),a=Ls(n.prototype);return Dk(a,i,e,t,r),a}function Rk(i,e,t,r){yd(e),$l(i),tr(i,zi,e),tr(i,jr,t),tr(i,At,r);const n=new(ji("%Temporal.Instant%"))(Q(i,zi));tr(i,Hs,n)}function Is(i,e,t=$n()){const r=ji("%Temporal.ZonedDateTime%"),n=Ls(r.prototype);return Rk(n,i,e,t),n}function $n(){return new(ji("%Temporal.Calendar%"))("iso8601")}function qn(i,e){let t=e;i.fields&&(t=i.fields(t));const r=[];for(const n of t){if(typeof n!="string")throw new TypeError("bad return from calendar.fields()");o_.call(r,n)}return r}function Nd(i,e,t){const r=i.mergeFields;if(!r)return{...e,...t};const n=Reflect.apply(r,i,[e,t]);if(!rn(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function aa(i,e,t,r,n){let a=n;a===void 0&&(a=i.dateAdd);const c=l_(a,i,[e,t,r]);if(!gr(c))throw new TypeError("invalid result");return c}function yu(i,e,t,r,n){let a=n;a===void 0&&(a=i.dateUntil);const c=l_(a,i,[e,t,r]);if(!kn(c))throw new TypeError("invalid result");return c}function gv(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Yr(t)}function yv(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return Rm(t)}function ag(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Ui(t)}function vv(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return Rm(t)}function xv(i,e){let t=i.era(e);return t!==void 0&&(t=Ui(t)),t}function bv(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Yr(t)),t}function h_(i,e){return i.dayOfWeek(e)}function p_(i,e){return i.dayOfYear(e)}function f_(i,e){return i.weekOfYear(e)}function m_(i,e){return i.daysInWeek(e)}function og(i,e){return i.daysInMonth(e)}function wv(i,e){return i.daysInYear(e)}function _v(i,e){return i.monthsInYear(e)}function Cv(i,e){return i.inLeapYear(e)}function Ts(i){let e=i;if(rn(e)){if(fs(e,At))return Q(e,At);if(!("calendar"in e)||(e=e.calendar,rn(e)&&!("calendar"in e)))return e}const t=Ui(e),r=ji("%Temporal.Calendar%");if(Kk(t))return new r(t);let n;try{({calendar:n}=Ul(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return n||(n="iso8601"),new r(n)}function Ep(i){if(fs(i,At))return Q(i,At);const{calendar:e}=i;return e===void 0?$n():Ts(e)}function lg(i,e){return i===e?!0:Ui(i)===Ui(e)}function Lk(i,e){if(i===e)return e;const t=Ui(i),r=Ui(e);if(t===r||t==="iso8601")return e;if(r==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function vu(i,e,t){const r=i.dateFromFields(e,t);if(!gr(r))throw new TypeError("invalid result");return r}function zd(i,e,t){const r=i.yearMonthFromFields(e,t);if(!Ir(r))throw new TypeError("invalid result");return r}function cp(i,e,t){const r=i.monthDayFromFields(e,t);if(!bs(r))throw new TypeError("invalid result");return r}function ca(i){let e=i;if(rn(e)){if(bi(e))return Q(e,jr);if(!("timeZone"in e)||(e=e.timeZone,rn(e)&&!("timeZone"in e)))return e}const t=Ek(Ui(e));return new(ji("%Temporal.TimeZone%"))(t)}function Nk(i,e){return i===e?!0:Ui(i)===Ui(e)}function up(i){return Ho(Q(i,oi),Q(i,di),Q(i,pi),Q(i,At))}function g_(i){return new(ji("%Temporal.PlainTime%"))(Q(i,Wi),Q(i,Yi),Q(i,Zi),Q(i,Xi),Q(i,Ki),Q(i,Qi))}function rl(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const r=Reflect.apply(t,i,[e]);if(typeof r!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!Tk(r)||Sr(r)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return r}function M1(i,e){return v_(rl(i,e))}function ro(i,e,t){const r=Q(e,zi),n=rl(i,e);let{year:a,month:c,day:s,hour:h,minute:f,second:m,millisecond:y,microsecond:g,nanosecond:b}=Ok(r);return{year:a,month:c,day:s,hour:h,minute:f,second:m,millisecond:y,microsecond:g,nanosecond:b}=x_(a,c,s,h,f,m,y,g,b+n),$a(a,c,s,h,f,m,y,g,b,t)}function oa(i,e,t){return zk(T0(i,e),i,e,t)}function zk(i,e,t,r){const n=ji("%Temporal.Instant%"),a=i.length;if(a===1)return i[0];if(a)switch(r){case"compatible":case"earlier":return i[0];case"later":return i[a-1];case"reject":throw new RangeError("multiple instants found")}const c=Q(t,oi),s=Q(t,di),h=Q(t,pi),f=Q(t,Wi),m=Q(t,Yi),y=Q(t,Zi),g=Q(t,Xi),b=Q(t,Ki),v=Q(t,Qi),_=xu(c,s,h,f,m,y,g,b,v);if(_===null)throw new RangeError("DateTime outside of supported range");const T=new n(de.subtract(_,gu)),k=new n(de.add(_,gu)),w=rl(e,T),E=rl(e,k)-w;switch(r){case"earlier":{const A=Q(t,At),M=ji("%Temporal.PlainDateTime%"),S=I1(c,s,h,f,m,y,g,b,v,A,0,0,0,0,0,0,0,0,0,-E,void 0);return T0(e,new M(S.year,S.month,S.day,S.hour,S.minute,S.second,S.millisecond,S.microsecond,S.nanosecond,A))[0]}case"compatible":case"later":{const A=Q(t,At),M=ji("%Temporal.PlainDateTime%"),S=I1(c,s,h,f,m,y,g,b,v,A,0,0,0,0,0,0,0,0,0,E,void 0),N=T0(e,new M(S.year,S.month,S.day,S.hour,S.minute,S.second,S.millisecond,S.microsecond,S.nanosecond,A));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function T0(i,e){const t=i.getPossibleInstantsFor(e),r=[];for(const n of t){if(!Jn(n))throw new TypeError("bad return from getPossibleInstantsFor");o_.call(r,n)}return r}function Gd(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${Sr(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function gn(i){return`00${i}`.slice(-2)}function Tv(i,e,t,r,n){if(n==="minute")return"";const a=`:${gn(i)}`;let c,s=1e6*e+1e3*t+r;if(n==="auto"){if(s===0)return a;for(c=`${s}`.padStart(9,"0");c[c.length-1]==="0";)c=c.slice(0,-1)}else{if(n===0)return a;c=`${s}`.padStart(9,"0").slice(0,n)}return`${a}.${c}`}function RT(i,e,t){let r=e;r===void 0&&(r=new(ji("%Temporal.TimeZone%"))("UTC"));const n=ro(r,i,$n()),a=Gd(Q(n,oi)),c=gn(Q(n,di)),s=gn(Q(n,pi)),h=gn(Q(n,Wi)),f=gn(Q(n,Yi)),m=Tv(Q(n,Zi),Q(n,Xi),Q(n,Ki),Q(n,Qi),t);let y="Z";return e!==void 0&&(y=jk(rl(r,i))),`${a}-${c}-${s}T${h}:${f}${m}${y}`}function ob(i,e="auto",t){function r(Z){return Z<=bN?Z.toString(10):de.BigInt(Z).toString(10)}const n=Q(i,Qs),a=Q(i,xs),c=Q(i,wa),s=Q(i,Js),h=Q(i,ea),f=Q(i,ta);let m=Q(i,ia),y=Q(i,ra),g=Q(i,na),b=Q(i,sa);const v=Il(n,a,c,s,h,f,m,y,g,b);if(t){const{unit:Z,increment:K,roundingMode:B}=t;({seconds:m,milliseconds:y,microseconds:g,nanoseconds:b}=bu(0,0,0,0,0,0,m,y,g,b,K,Z,B))}const _=[];n&&_.push(`${r(Sr(n))}Y`),a&&_.push(`${r(Sr(a))}M`),c&&_.push(`${r(Sr(c))}W`),s&&_.push(`${r(Sr(s))}D`);const T=[];h&&T.push(`${r(Sr(h))}H`),f&&T.push(`${r(Sr(f))}M`);const k=[];let w,E,A,M,S=dp(0,0,0,m,y,g,b,0);({quotient:S,remainder:w}=as(S,Or)),{quotient:S,remainder:E}=as(S,Or),{quotient:M,remainder:A}=as(S,Or);const N=1e6*Sr(de.toNumber(A))+1e3*Sr(de.toNumber(E))+Sr(de.toNumber(w));let Y;if(e==="auto"){if(N!==0)for(Y=`${N}`.padStart(9,"0");Y[Y.length-1]==="0";)Y=Y.slice(0,-1)}else e!==0&&(Y=`${N}`.padStart(9,"0").slice(0,e));return Y&&k.unshift(".",Y),de.equal(M,On)&&!k.length&&e==="auto"||k.unshift(u_(M).toString()),k.length&&T.push(`${k.join("")}S`),T.length&&T.unshift("T"),_.length||T.length?`${v<0?"-":""}P${_.join("")}${T.join("")}`:"PT0S"}function LT(i,e="auto"){return`${Gd(Q(i,oi))}-${gn(Q(i,di))}-${gn(Q(i,pi))}${tg(Ui(Q(i,At)),e)}`}function NT(i,e,t="auto",r){let n=Q(i,oi),a=Q(i,di),c=Q(i,pi),s=Q(i,Wi),h=Q(i,Yi),f=Q(i,Zi),m=Q(i,Xi),y=Q(i,Ki),g=Q(i,Qi);if(r){const{unit:b,increment:v,roundingMode:_}=r;({year:n,month:a,day:c,hour:s,minute:h,second:f,millisecond:m,microsecond:y,nanosecond:g}=S_(n,a,c,s,h,f,m,y,g,v,b,_))}return`${Gd(n)}-${gn(a)}-${gn(c)}T${gn(s)}:${gn(h)}${Tv(f,m,y,g,e)}${tg(Ui(Q(i,At)),t)}`}function zT(i,e="auto"){let t=`${gn(Q(i,di))}-${gn(Q(i,pi))}`;const r=Ui(Q(i,At));(e==="always"||r!=="iso8601")&&(t=`${Gd(Q(i,oi))}-${t}`);const n=tg(r,e);return n&&(t+=n),t}function jT(i,e="auto"){let t=`${Gd(Q(i,oi))}-${gn(Q(i,di))}`;const r=Ui(Q(i,At));(e==="always"||r!=="iso8601")&&(t+=`-${gn(Q(i,pi))}`);const n=tg(r,e);return n&&(t+=n),t}function OT(i,e,t="auto",r="auto",n="auto",a){let c=Q(i,Hs);if(a){const{unit:m,increment:y,roundingMode:g}=a,b=E0(Q(i,zi),y,m,g);c=new(ji("%Temporal.Instant%"))(b)}const s=Q(i,jr),h=ro(s,c,$n());let f=`${Gd(Q(h,oi))}-${gn(Q(h,di))}-${gn(Q(h,pi))}T${gn(Q(h,Wi))}:${gn(Q(h,Yi))}${Tv(Q(h,Zi),Q(h,Xi),Q(h,Ki),Q(h,Qi),e)}`;return n!=="never"&&(f+=jk(rl(s,c))),r!=="never"&&(f+=`[${s}]`),f+=tg(Ui(Q(i,At)),t),f}function am(i){return Qk.test(eg(i))}function jd(i){const e=Qk.exec(eg(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]===""?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function y_(i){return am(i)?v_(jd(i)):Sk(eg(i)).resolvedOptions().timeZone}function mc(i,e){const{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:f,nanosecond:m}=Fk(i,e),y=xu(t,r,n,a,c,s,h,f,m);if(y===null)throw new RangeError("Date outside of supported range");return de.toNumber(de.subtract(y,i))}function v_(i){const e=i<0?"-":"+",t=Sr(i),r=t%1e9,n=cs(t/1e9)%60,a=cs(t/6e10)%60,c=gn(cs(t/36e11)),s=gn(a),h=gn(n);let f="";if(r){let m=`${r}`.padStart(9,"0");for(;m[m.length-1]==="0";)m=m.slice(0,-1);f=`:${h}.${m}`}else n&&(f=`:${h}`);return`${e}${c}:${s}${f}`}function jk(i){let e=de.toNumber(Oa(de.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=Sr(e);const r=e/6e10%60;return`${t}${gn(cs(e/36e11))}:${gn(r)}`}function xu(i,e,t,r,n,a,c,s,h){const f=new Date;f.setUTCHours(r,n,a,c),f.setUTCFullYear(i,e-1,t);const m=f.getTime();if(Jm(m))return null;let y=de.multiply(de.BigInt(m),Co);return y=de.add(y,de.multiply(de.BigInt(s),Or)),y=de.add(y,de.BigInt(h)),de.lessThan(y,Im)||de.greaterThan(y,Pm)?null:y}function Ok(i){const{quotient:e,remainder:t}=as(i,Co);let r=de.toNumber(e),n=de.toNumber(t);n<0&&(n+=1e6,r-=1);const a=cs(n/1e3)%1e3,c=n%1e3,s=new Date(r);return{epochMilliseconds:r,year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),microsecond:a,nanosecond:c}}function Fk(i,e){const{epochMilliseconds:t,millisecond:r,microsecond:n,nanosecond:a}=Ok(i),{year:c,month:s,day:h,hour:f,minute:m,second:y}=function(b,v){const _=Sk(b);return function(k){const w=k.split(/[^\w]+/);if(w.length!==7)throw new RangeError(`expected 7 parts in "${k}`);const E=+w[0],A=+w[1];let M=+w[2];const S=w[3].toUpperCase();if(S==="B"||S==="BC")M=1-M;else if(S!=="A"&&S!=="AD")throw new RangeError(`Unknown era ${S} in "${k}`);let N=+w[4];N===24&&(N=0);const Y=+w[5],Z=+w[6];if(!(_s(M)&&_s(E)&&_s(A)&&_s(N)&&_s(Y)&&_s(Z)))throw new RangeError(`Invalid number in "${k}`);return{year:M,month:E,day:A,hour:N,minute:Y,second:Z}}(_.format(new Date(v)))}(e,t);return x_(c,s,h,f,m,y,r,n,a)}function FT(i,e){return de.lessThan(i,e)?e:i}function Bk(){return de.add(k_(),TN)}function $k(i,e){const t=Bk(),r=de.greaterThan(i,t),n=r?de.subtract(i,_k):wk;let a=de.subtract(i,c_);const c=mc(a,e);let s=a,h=c;for(;c===h&&de.greaterThan(a,n);)s=de.subtract(a,Ck),h=mc(s,e),c===h&&(a=s);return c===h?r?$k(de.subtract(t,gu),e):null:Jk(f=>mc(f,e),s,a,h,c)}function cu(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function bc(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[cu(i)?"leapyear":"standard"][e-1]}function lb(i,e,t){const r=e+(e<3?10:-2),n=i-(e<3?1:0),a=cs(n/100),c=n-100*a,s=(t+cs(2.6*r-.2)+(c+cs(c/4))+(cs(a/4)-2*a))%7;return s+(s<=0?7:0)}function S0(i,e,t){let r=t;for(let n=e-1;n>0;n--)r+=bc(i,n);return r}function Il(i,e,t,r,n,a,c,s,h,f){for(const m of[i,e,t,r,n,a,c,s,h,f])if(m!==0)return m<0?-1:1;return 0}function t0(i,e){let t=i,r=e;if(!_s(t)||!_s(r))throw new RangeError("infinity is out of range");return r-=1,t+=cs(r/12),r%=12,r<0&&(r+=12),r+=1,{year:t,month:r}}function Sv(i,e,t){let r=i,n=e,a=t;if(!_s(a))throw new RangeError("infinity is out of range");({year:r,month:n}=t0(r,n));let c=0,s=n>2?r:r-1;for(;c=cu(s)?366:365,a<-c;)r-=1,s-=1,a+=c;for(s+=1;c=cu(s)?366:365,a>c;)r+=1,s+=1,a-=c;for(;a<1;)({year:r,month:n}=t0(r,n-1)),a+=bc(r,n);for(;a>bc(r,n);)a-=bc(r,n),{year:r,month:n}=t0(r,n+1);return{year:r,month:n,day:a}}function x_(i,e,t,r,n,a,c,s,h){const{deltaDays:f,hour:m,minute:y,second:g,millisecond:b,microsecond:v,nanosecond:_}=gc(r,n,a,c,s,h),{year:T,month:k,day:w}=Sv(i,e,t+f);return{year:T,month:k,day:w,hour:m,minute:y,second:g,millisecond:b,microsecond:v,nanosecond:_}}function gc(i,e,t,r,n,a){let c=i,s=e,h=t,f=r,m=n,y=a;if(!(_s(c)&&_s(s)&&_s(h)&&_s(f)&&_s(m)&&_s(y)))throw new RangeError("infinity is out of range");m+=cs(y/1e3),y=Fh(y,1e3),f+=cs(m/1e3),m=Fh(m,1e3),h+=cs(f/1e3),f=Fh(f,1e3),s+=cs(h/60),h=Fh(h,60),c+=cs(s/60),s=Fh(s,60);const g=cs(c/24);return c=Fh(c,24),{deltaDays:g,hour:c,minute:s,second:h,millisecond:f,microsecond:m,nanosecond:y}}function dp(i,e,t,r,n,a,c,s){const h=de.BigInt(i);let f=de.BigInt(c);i!==0&&(f=de.subtract(de.BigInt(c),de.BigInt(s)));const m=de.add(de.BigInt(e),de.multiply(h,de.BigInt(24))),y=de.add(de.BigInt(t),de.multiply(m,Sd)),g=de.add(de.BigInt(r),de.multiply(y,Sd)),b=de.add(de.BigInt(n),de.multiply(g,Or)),v=de.add(de.BigInt(a),de.multiply(b,Or));return de.add(de.BigInt(f),de.multiply(v,Or))}function b_(i,e){const t=ji("%Temporal.Instant%"),r=Am(de.toNumber(i));let n=de.BigInt(i),a=864e11;if(r===0)return{days:0,nanoseconds:On,dayLengthNs:a};if(!bi(e)){let w;return{quotient:w,remainder:n}=as(n,de.BigInt(a)),{days:de.toNumber(w),nanoseconds:n,dayLengthNs:a}}const c=Q(e,zi),s=Q(e,Hs),h=de.add(c,n),f=new t(h),m=Q(e,jr),y=Q(e,At),g=ro(m,s,y),b=ro(m,f,y);let{days:v}=T_(Q(g,oi),Q(g,di),Q(g,pi),Q(g,Wi),Q(g,Yi),Q(g,Zi),Q(g,Xi),Q(g,Ki),Q(g,Qi),Q(b,oi),Q(b,di),Q(b,pi),Q(b,Wi),Q(b,Yi),Q(b,Zi),Q(b,Xi),Q(b,Ki),Q(b,Qi),y,"day",Ls(null)),_=To(s,m,y,0,0,0,v,0,0,0,0,0,0);if(r===1)for(;v>0&&de.greaterThan(_,h);)--v,_=To(s,m,y,0,0,0,v,0,0,0,0,0,0);n=de.subtract(h,_);let T=!1,k=new t(_);do{const w=To(k,m,y,0,0,0,r,0,0,0,0,0,0),E=Q(k,zi);a=de.toNumber(de.subtract(w,E)),T=de.greaterThan(de.multiply(de.subtract(n,de.BigInt(a)),de.BigInt(r)),On),T&&(n=de.subtract(n,de.BigInt(a)),k=new t(w),v+=r)}while(T);return{days:v,nanoseconds:n,dayLengthNs:Sr(a)}}function Va(i,e,t,r,n,a,c,s,h){let f,m,y,g,b,v,_=i;if(bi(h)){const k=To(Q(h,Hs),Q(h,jr),Q(h,At),0,0,0,_,e,t,r,n,a,c),w=Q(h,zi);f=de.subtract(k,w)}else f=dp(_,e,t,r,n,a,c,0);s==="year"||s==="month"||s==="week"||s==="day"?{days:_,nanoseconds:f}=b_(f,h):_=0;const T=de.lessThan(f,On)?-1:1;switch(f=u_(f),m=y=g=b=v=On,s){case"year":case"month":case"week":case"day":case"hour":({quotient:m,remainder:f}=as(f,Or)),{quotient:y,remainder:m}=as(m,Or),{quotient:g,remainder:y}=as(y,Or),{quotient:b,remainder:g}=as(g,Sd),{quotient:v,remainder:b}=as(b,Sd);break;case"minute":({quotient:m,remainder:f}=as(f,Or)),{quotient:y,remainder:m}=as(m,Or),{quotient:g,remainder:y}=as(y,Or),{quotient:b,remainder:g}=as(g,Sd);break;case"second":({quotient:m,remainder:f}=as(f,Or)),{quotient:y,remainder:m}=as(m,Or),{quotient:g,remainder:y}=as(y,Or);break;case"millisecond":({quotient:m,remainder:f}=as(f,Or)),{quotient:y,remainder:m}=as(m,Or);break;case"microsecond":({quotient:m,remainder:f}=as(f,Or));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:_,hours:de.toNumber(v)*T,minutes:de.toNumber(b)*T,seconds:de.toNumber(g)*T,milliseconds:de.toNumber(y)*T,microseconds:de.toNumber(m)*T,nanoseconds:de.toNumber(f)*T}}function Ty(i,e,t,r,n,a){let c=i,s=e,h=t,f=r;const m=ji("%Temporal.Duration%"),y=Il(c,s,h,f,0,0,0,0,0,0);let g,b;a&&(b=Wr(a),g=Q(b,At));const v=new m(y),_=new m(0,y),T=new m(0,0,y);switch(n){case"year":break;case"month":{if(!g)throw new RangeError("a starting point is required for months balancing");const k=g.dateAdd,w=g.dateUntil;let E=b;for(;Sr(c)>0;){const A=aa(g,E,v,void 0,k),M=Ls(null);M.largestUnit="month";const S=Q(yu(g,E,A,M,w),xs);E=A,s+=S,c-=y}}break;case"week":if(!g)throw new RangeError("a starting point is required for weeks balancing");for(;Sr(c)>0;){let k;({relativeTo:b,days:k}=Us(g,b,v)),f+=k,c-=y}for(;Sr(s)>0;){let k;({relativeTo:b,days:k}=Us(g,b,_)),f+=k,s-=y}break;default:for(;Sr(c)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:b,days:k}=Us(g,b,v)),f+=k,c-=y}for(;Sr(s)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:b,days:k}=Us(g,b,_)),f+=k,s-=y}for(;Sr(h)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:b,days:k}=Us(g,b,T)),f+=k,h-=y}}return{years:c,months:s,weeks:h,days:f}}function BT(i,e,t,r,n){if(bi(i)){const a=Q(i,Hs),c=Q(i,jr),s=Q(i,At),h=rl(c,a),f=To(a,c,s,e,t,r,n,0,0,0,0,0,0);return rl(c,new(ji("%Temporal.Instant%"))(f))-h}return 0}function Uk(i){return new(ji("%Temporal.Duration%"))(-Q(i,Qs),-Q(i,xs),-Q(i,wa),-Q(i,Js),-Q(i,ea),-Q(i,ta),-Q(i,ia),-Q(i,ra),-Q(i,na),-Q(i,sa))}function Ua(i,e,t){return yN(t,vN(e,i))}function Vk(i,e,t){const r=Ua(e,1,12);return{year:i,month:r,day:Ua(t,1,bc(i,r))}}function Ds(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function Nl(i,e,t){Ds(e,1,12),Ds(t,1,bc(i,e))}function Hk(i,e,t){Gk(i,e,t,12,0,0,0,0,0)}function Ev(i,e,t,r,n,a){Ds(i,0,23),Ds(e,0,59),Ds(t,0,59),Ds(r,0,999),Ds(n,0,999),Ds(a,0,999)}function w_(i,e,t,r,n,a,c,s,h){Nl(i,e,t),Ev(r,n,a,c,s,h)}function Gk(i,e,t,r,n,a,c,s,h){if(Ds(i,-271821,275760),i===-271821&&xu(i,e,t+1,r,n,a,c,s,h-1)==null||i===275760&&xu(i,e,t-1,r,n,a,c,s,h+1)==null)throw new RangeError("DateTime outside of supported range")}function yd(i){if(de.lessThan(i,Im)||de.greaterThan(i,Pm))throw new RangeError("Instant outside of supported range")}function kv(i,e,t,r,n,a,c,s,h,f){const m=Il(i,e,t,r,n,a,c,s,h,f);for(const y of[i,e,t,r,n,a,c,s,h,f]){if(!_s(y))throw new RangeError("infinite values not allowed as duration fields");const g=Am(y);if(g!==0&&g!==m)throw new RangeError("mixed-sign values not allowed as duration fields")}}function __(i,e,t,r,n,a,c){switch(c){case"year":case"month":{const s=-uu(i,e,t,r,n,a);if(s===0)return{years:0,months:0,weeks:0,days:0};const h={year:i,month:e},f={year:r,month:n,day:a};let m=f.year-h.year,y=Ed(i,e,t,m,0,0,0,"constrain"),g=-uu(y.year,y.month,y.day,r,n,a);if(g===0)return c==="year"?{years:m,months:0,weeks:0,days:0}:{years:0,months:12*m,weeks:0,days:0};let b=f.month-h.month;if(g!==s&&(m-=s,b+=12*s),y=Ed(i,e,t,m,b,0,0,"constrain"),g=-uu(y.year,y.month,y.day,r,n,a),g===0)return c==="year"?{years:m,months:b,weeks:0,days:0}:{years:0,months:b+12*m,weeks:0,days:0};g!==s&&(b-=s,b===-s&&(m-=s,b=11*s),y=Ed(i,e,t,m,b,0,0,"constrain"));let v=0;return v=y.month===f.month?f.day-y.day:s<0?-y.day-(bc(f.year,f.month)-f.day):f.day+(bc(y.year,y.month)-y.day),c==="month"&&(b+=12*m,m=0),{years:m,months:b,weeks:0,days:v}}case"week":case"day":{let s,h,f;uu(i,e,t,r,n,a)<0?(h={year:i,month:e,day:t},s={year:r,month:n,day:a},f=1):(h={year:r,month:n,day:a},s={year:i,month:e,day:t},f=-1);let m=S0(s.year,s.month,s.day)-S0(h.year,h.month,h.day);for(let g=h.year;g<s.year;++g)m+=cu(g)?366:365;let y=0;return c==="week"&&(y=cs(m/7),m%=7),y*=f,m*=f,{years:0,months:0,weeks:y,days:m}}default:throw new Error("assert not reached")}}function qk(i,e,t,r,n,a,c,s,h,f,m,y){let g=c-i,b=s-e,v=h-t,_=f-r,T=m-n,k=y-a;const w=Il(0,0,0,0,g,b,v,_,T,k);g*=w,b*=w,v*=w,_*=w,T*=w,k*=w;let E=0;if({deltaDays:E,hour:g,minute:b,second:v,millisecond:_,microsecond:T,nanosecond:k}=gc(g,b,v,_,T,k),E!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return g*=w,b*=w,v*=w,_*=w,T*=w,k*=w,{hours:g,minutes:b,seconds:v,milliseconds:_,microseconds:T,nanoseconds:k}}function C_(i,e,t,r,n){const a=de.subtract(e,i),c=de.remainder(a,de.BigInt(864e11)),s=de.subtract(a,c),h=Oa(c,M_[r]*t,n),f=de.add(s,h),m=de.toNumber(de.remainder(f,Or)),y=de.toNumber(de.remainder(de.divide(f,Or),Or)),g=de.toNumber(de.remainder(de.divide(f,Co),Or));return{seconds:de.toNumber(de.divide(f,xc)),milliseconds:g,microseconds:y,nanoseconds:m}}function T_(i,e,t,r,n,a,c,s,h,f,m,y,g,b,v,_,T,k,w,E,A){let M=i,S=e,N=t,{hours:Y,minutes:Z,seconds:K,milliseconds:B,microseconds:F,nanoseconds:O}=qk(r,n,a,c,s,h,g,b,v,_,T,k);const R=Il(0,0,0,0,Y,Z,K,B,F,O);uu(f,m,y,M,S,N)===-R&&({year:M,month:S,day:N}=Sv(M,S,N-R),{hours:Y,minutes:Z,seconds:K,milliseconds:B,microseconds:F,nanoseconds:O}=Va(-R,Y,Z,K,B,F,O,E));const L=Ho(M,S,N,w),G=Ho(f,m,y,w),V=mv(A,Ha("day",E));let{years:$,months:q,weeks:W,days:se}=yu(w,L,G,V);return{days:se,hours:Y,minutes:Z,seconds:K,milliseconds:B,microseconds:F,nanoseconds:O}=Va(se,Y,Z,K,B,F,O,E),{years:$,months:q,weeks:W,days:se,hours:Y,minutes:Z,seconds:K,milliseconds:B,microseconds:F,nanoseconds:O}}function Wk(i,e,t,r,n,a){const c=de.subtract(e,i);if(de.equal(c,On))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const s=ji("%Temporal.Instant%"),h=new s(i),f=new s(e),m=ro(t,h,r),y=ro(t,f,r);let{years:g,months:b,weeks:v,days:_}=T_(Q(m,oi),Q(m,di),Q(m,pi),Q(m,Wi),Q(m,Yi),Q(m,Zi),Q(m,Xi),Q(m,Ki),Q(m,Qi),Q(y,oi),Q(y,di),Q(y,pi),Q(y,Wi),Q(y,Yi),Q(y,Zi),Q(y,Xi),Q(y,Ki),Q(y,Qi),r,n,a);const T=To(h,t,r,g,b,v,0,0,0,0,0,0,0);let k=de.subtract(e,T);const w=Is(T,t,r);({nanoseconds:k,days:_}=b_(k,w));const{hours:E,minutes:A,seconds:M,milliseconds:S,microseconds:N,nanoseconds:Y}=Va(0,0,0,0,0,0,de.toNumber(k),"hour");return{years:g,months:b,weeks:v,days:_,hours:E,minutes:A,seconds:M,milliseconds:S,microseconds:N,nanoseconds:Y}}function $T(i,e,t,r){const n=_l(t);let a,c;[a,c]=i==="until"?[e,n]:[n,e];const s=or(r),h=hs(s,"smallestUnit","time","nanosecond"),f=Ha("second",h);let m=hs(s,"largestUnit","time","auto");if(m==="auto"&&(m=f),Ha(m,h)!==m)throw new RangeError(`largestUnit ${m} cannot be smaller than smallestUnit ${h}`);const y=Ea(s,"trunc"),g=kc(s,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[h],!1),b=Q(a,zi),v=Q(c,zi);let _,T,{seconds:k,milliseconds:w,microseconds:E,nanoseconds:A}=C_(b,v,g,h,y);return{hours:_,minutes:T,seconds:k,milliseconds:w,microseconds:E,nanoseconds:A}=Va(0,0,0,k,w,E,A,m),new(ji("%Temporal.Duration%"))(0,0,0,0,_,T,k,w,E,A)}function UT(i,e,t,r){const n=i==="since"?-1:1,a=Wr(t),c=Q(e,At),s=Q(a,At),h=Ui(c),f=Ui(s);if(h!==f)throw new RangeError(`cannot compute difference between dates of ${h} and ${f} calendars`);const m=or(r),y=hs(m,"smallestUnit","date","day"),g=Ha("day",y);let b=hs(m,"largestUnit","date","auto");if(b==="auto"&&(b=g),Ha(b,y)!==b)throw new RangeError(`largestUnit ${b} cannot be smaller than smallestUnit ${y}`);let v=Ea(m,"trunc");i==="since"&&(v=ig(v));const _=kc(m,void 0,!1),T=mv(m,b);let{years:k,months:w,weeks:E,days:A}=yu(c,e,a,T);return y==="day"&&_===1||({years:k,months:w,weeks:E,days:A}=bu(k,w,E,A,0,0,0,0,0,0,_,y,v,e)),new(ji("%Temporal.Duration%"))(n*k,n*w,n*E,n*A,0,0,0,0,0,0)}function VT(i,e,t,r){const n=i==="since"?-1:1,a=bd(t),c=Q(e,At),s=Q(a,At),h=Ui(c),f=Ui(s);if(h!==f)throw new RangeError(`cannot compute difference between dates of ${h} and ${f} calendars`);const m=or(r),y=hs(m,"smallestUnit","datetime","nanosecond"),g=Ha("day",y);let b=hs(m,"largestUnit","datetime","auto");if(b==="auto"&&(b=g),Ha(b,y)!==b)throw new RangeError(`largestUnit ${b} cannot be smaller than smallestUnit ${y}`);let v=Ea(m,"trunc");i==="since"&&(v=ig(v));const _=d_(m,y);let{years:T,months:k,weeks:w,days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=T_(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(a,oi),Q(a,di),Q(a,pi),Q(a,Wi),Q(a,Yi),Q(a,Zi),Q(a,Xi),Q(a,Ki),Q(a,Qi),c,b,m);const K=up(e);return{years:T,months:k,weeks:w,days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=bu(T,k,w,E,A,M,S,N,Y,Z,_,y,v,K),{days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=Va(E,A,M,S,N,Y,Z,b),new(ji("%Temporal.Duration%"))(n*T,n*k,n*w,n*E,n*A,n*M,n*S,n*N,n*Y,n*Z)}function HT(i,e,t,r){const n=i==="since"?-1:1,a=yc(t),c=or(r);let s=hs(c,"largestUnit","time","auto");s==="auto"&&(s="hour");const h=hs(c,"smallestUnit","time","nanosecond");if(Ha(s,h)!==s)throw new RangeError(`largestUnit ${s} cannot be smaller than smallestUnit ${h}`);let f=Ea(c,"trunc");i==="since"&&(f=ig(f));const m=kc(c,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[h],!1);let{hours:y,minutes:g,seconds:b,milliseconds:v,microseconds:_,nanoseconds:T}=qk(Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(a,Wi),Q(a,Yi),Q(a,Zi),Q(a,Xi),Q(a,Ki),Q(a,Qi));return{hours:y,minutes:g,seconds:b,milliseconds:v,microseconds:_,nanoseconds:T}=bu(0,0,0,0,y,g,b,v,_,T,m,h,f),{hours:y,minutes:g,seconds:b,milliseconds:v,microseconds:_,nanoseconds:T}=Va(0,y,g,b,v,_,T,s),new(ji("%Temporal.Duration%"))(0,0,0,0,n*y,n*g,n*b,n*v,n*_,n*T)}function GT(i,e,t,r){const n=i==="since"?-1:1,a=nm(t),c=Q(e,At),s=Q(a,At),h=Ui(c),f=Ui(s);if(h!==f)throw new RangeError(`cannot compute difference between months of ${h} and ${f} calendars`);const m=or(r),y=Tp.reduce((Y,[Z,K,B])=>(B==="date"&&K!=="week"&&K!=="day"&&Y.push(K,Z),Y),[]),g=hs(m,"smallestUnit","date","month");if(g==="week"||g==="day")throw new RangeError(`smallestUnit must be one of ${y.join(", ")}, not ${g}`);let b=hs(m,"largestUnit","date","auto");if(b==="week"||b==="day")throw new RangeError(`largestUnit must be one of ${y.join(", ")}, not ${b}`);if(b==="auto"&&(b="year"),Ha(b,g)!==b)throw new RangeError(`largestUnit ${b} cannot be smaller than smallestUnit ${g}`);let v=Ea(m,"trunc");i==="since"&&(v=ig(v));const _=kc(m,void 0,!1),T=qn(c,["monthCode","year"]),k=sr(a,T,[]);k.day=1;const w=sr(e,T,[]);w.day=1;const E=vu(c,k),A=vu(c,w),M=mv(m,b);let{years:S,months:N}=yu(c,A,E,M);return g==="month"&&_===1||({years:S,months:N}=bu(S,N,0,0,0,0,0,0,0,0,_,g,v,A)),new(ji("%Temporal.Duration%"))(n*S,n*N,0,0,0,0,0,0,0,0)}function qT(i,e,t,r){const n=i==="since"?-1:1,a=sm(t),c=Q(e,At),s=Q(a,At),h=Ui(c),f=Ui(s);if(h!==f)throw new RangeError(`cannot compute difference between dates of ${h} and ${f} calendars`);const m=or(r),y=hs(m,"smallestUnit","datetime","nanosecond"),g=Ha("hour",y);let b=hs(m,"largestUnit","datetime","auto");if(b==="auto"&&(b=g),Ha(b,y)!==b)throw new RangeError(`largestUnit ${b} cannot be smaller than smallestUnit ${y}`);let v=Ea(m,"trunc");i==="since"&&(v=ig(v));const _=d_(m,y),T=Q(e,zi),k=Q(a,zi);let w,E,A,M,S,N,Y,Z,K,B;if(b!=="year"&&b!=="month"&&b!=="week"&&b!=="day")w=0,E=0,A=0,M=0,{seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:B}=C_(T,k,_,y,v),{hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:B}=Va(0,0,0,Y,Z,K,B,b);else{const F=Q(e,jr);if(!Nk(F,Q(a,jr)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const O=mv(m,b);({years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:B}=Wk(T,k,F,c,b,O)),{years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:B}=bu(w,E,A,M,S,N,Y,Z,K,B,_,y,v,e),{years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:B}=Xk(w,E,A,M,S,N,Y,Z,K,B,_,y,v,e)}return new(ji("%Temporal.Duration%"))(n*w,n*E,n*A,n*M,n*S,n*N,n*Y,n*Z,n*K,n*B)}function Ed(i,e,t,r,n,a,c,s){let h=i,f=e,m=t,y=a,g=c;return h+=r,f+=n,{year:h,month:f}=t0(h,f),{year:h,month:f,day:m}=w0(h,f,m,s),g+=7*y,m+=g,{year:h,month:f,day:m}=Sv(h,f,m),{year:h,month:f,day:m}}function Yk(i,e,t,r,n,a,c,s,h,f,m,y){let g=i,b=e,v=t,_=r,T=n,k=a;g+=c,b+=s,v+=h,_+=f,T+=m,k+=y;let w=0;return{deltaDays:w,hour:g,minute:b,second:v,millisecond:_,microsecond:T,nanosecond:k}=gc(g,b,v,_,T,k),{deltaDays:w,hour:g,minute:b,second:v,millisecond:_,microsecond:T,nanosecond:k}}function Zk(i,e,t,r,n,a,c,s,h,f,m,y,g,b,v,_,T,k,w,E,A){const M=Ha(k1(i,e,t,r,n,a,c,s,h,f),k1(m,y,g,b,v,_,T,k,w,E));let S,N,Y,Z,K,B,F,O,R,L;if(A)if(gr(A)){const G=ji("%Temporal.Duration%"),V=Q(A,At),$=new G(i,e,t,r,0,0,0,0,0,0),q=new G(m,y,g,b,0,0,0,0,0,0),W=V.dateAdd,se=aa(V,A,$,void 0,W),fe=aa(V,se,q,void 0,W),re=Ha("day",M),le=Ls(null);le.largestUnit=re,{years:S,months:N,weeks:Y,days:Z}=yu(V,A,fe,le),{days:Z,hours:K,minutes:B,seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}=Va(Z,n+v,a+_,c+T,s+k,h+w,f+E,M)}else{const G=ji("%Temporal.Instant%"),V=Q(A,jr),$=Q(A,At),q=To(Q(A,Hs),V,$,i,e,t,r,n,a,c,s,h,f),W=To(new G(q),V,$,m,y,g,b,v,_,T,k,w,E);M!=="year"&&M!=="month"&&M!=="week"&&M!=="day"?(S=0,N=0,Y=0,Z=0,{seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}=C_(Q(A,zi),W,1,"nanosecond","halfExpand"),{hours:K,minutes:B,seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}=Va(0,0,0,F,O,R,L,M)):{years:S,months:N,weeks:Y,days:Z,hours:K,minutes:B,seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}=Wk(Q(A,zi),W,V,$,M,Ls(null))}else{if(M==="year"||M==="month"||M==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");S=N=Y=0,{days:Z,hours:K,minutes:B,seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}=Va(r+b,n+v,a+_,c+T,s+k,h+w,f+E,M)}return kv(S,N,Y,Z,K,B,F,O,R,L),{years:S,months:N,weeks:Y,days:Z,hours:K,minutes:B,seconds:F,milliseconds:O,microseconds:R,nanoseconds:L}}function A1(i,e,t,r,n,a,c){let s=On;s=de.add(s,de.BigInt(c)),s=de.add(s,de.multiply(de.BigInt(a),Or)),s=de.add(s,de.multiply(de.BigInt(n),Co)),s=de.add(s,de.multiply(de.BigInt(r),xc)),s=de.add(s,de.multiply(de.BigInt(t),de.BigInt(6e10))),s=de.add(s,de.multiply(de.BigInt(e),de.BigInt(36e11)));const h=de.add(i,s);return yd(h),h}function I1(i,e,t,r,n,a,c,s,h,f,m,y,g,b,v,_,T,k,w,E,A){let M=b,{deltaDays:S,hour:N,minute:Y,second:Z,millisecond:K,microsecond:B,nanosecond:F}=Yk(r,n,a,c,s,h,v,_,T,k,w,E);M+=S;const O=ji("%Temporal.Duration%"),R=aa(f,Ho(i,e,t,f),new O(m,y,g,M,0,0,0,0,0,0),A);return{year:Q(R,oi),month:Q(R,di),day:Q(R,pi),hour:N,minute:Y,second:Z,millisecond:K,microsecond:B,nanosecond:F}}function To(i,e,t,r,n,a,c,s,h,f,m,y,g,b){const v=ji("%Temporal.Duration%");if(Il(r,n,a,c,0,0,0,0,0,0)===0)return A1(Q(i,zi),s,h,f,m,y,g);const _=ro(e,i,t),T=aa(t,Ho(Q(_,oi),Q(_,di),Q(_,pi),t),new v(r,n,a,c,0,0,0,0,0,0),b),k=$a(Q(T,oi),Q(T,di),Q(T,pi),Q(_,Wi),Q(_,Yi),Q(_,Zi),Q(_,Xi),Q(_,Ki),Q(_,Qi),t);return A1(Q(oa(e,k,"compatible"),zi),s,h,f,m,y,g)}function WT(i,e,t,r){const n=i==="subtract"?-1:1;let{years:a,months:c,weeks:s,days:h,hours:f,minutes:m,seconds:y,milliseconds:g,microseconds:b,nanoseconds:v}=Hd(t);const _=e0(or(r));return{years:a,months:c,weeks:s,days:h,hours:f,minutes:m,seconds:y,milliseconds:g,microseconds:b,nanoseconds:v}=Zk(Q(e,Qs),Q(e,xs),Q(e,wa),Q(e,Js),Q(e,ea),Q(e,ta),Q(e,ia),Q(e,ra),Q(e,na),Q(e,sa),n*a,n*c,n*s,n*h,n*f,n*m,n*y,n*g,n*b,n*v,_),new(ji("%Temporal.Duration%"))(a,c,s,h,f,m,y,g,b,v)}function YT(i,e,t){const r=i==="subtract"?-1:1,{hours:n,minutes:a,seconds:c,milliseconds:s,microseconds:h,nanoseconds:f}=function(g,b){let v=Hd(g);for(const _ of b)if(v[_]!==0)throw new RangeError(`Duration field ${_} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return v}(t,["years","months","weeks","days"]),m=A1(Q(e,zi),r*n,r*a,r*c,r*s,r*h,r*f);return new(ji("%Temporal.Instant%"))(m)}function ZT(i,e,t,r){const n=i==="subtract"?-1:1,{years:a,months:c,weeks:s,days:h,hours:f,minutes:m,seconds:y,milliseconds:g,microseconds:b,nanoseconds:v}=Hd(t),_=or(r),T=Q(e,At),{year:k,month:w,day:E,hour:A,minute:M,second:S,millisecond:N,microsecond:Y,nanosecond:Z}=I1(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),T,n*a,n*c,n*s,n*h,n*f,n*m,n*y,n*g,n*b,n*v,_);return $a(k,w,E,A,M,S,N,Y,Z,T)}function XT(i,e,t){const r=i==="subtract"?-1:1,{hours:n,minutes:a,seconds:c,milliseconds:s,microseconds:h,nanoseconds:f}=Hd(t);let{hour:m,minute:y,second:g,millisecond:b,microsecond:v,nanosecond:_}=Yk(Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),r*n,r*a,r*c,r*s,r*h,r*f);return{hour:m,minute:y,second:g,millisecond:b,microsecond:v,nanosecond:_}=fv(m,y,g,b,v,_,"reject"),new(ji("%Temporal.PlainTime%"))(m,y,g,b,v,_)}function KT(i,e,t,r){let n=Hd(t);i==="subtract"&&(n={years:-n.years,months:-n.months,weeks:-n.weeks,days:-n.days,hours:-n.hours,minutes:-n.minutes,seconds:-n.seconds,milliseconds:-n.milliseconds,microseconds:-n.microseconds,nanoseconds:-n.nanoseconds});let{years:a,months:c,weeks:s,days:h,hours:f,minutes:m,seconds:y,milliseconds:g,microseconds:b,nanoseconds:v}=n;({days:h}=Va(h,f,m,y,g,b,v,"day"));const _=or(r),T=Q(e,At),k=qn(T,["monthCode","year"]),w=sr(e,k,[]),E=Il(a,c,s,h,0,0,0,0,0,0);w.day=E<0?Rm(og(T,e)):1;const A=vu(T,w),M=new(ji("%Temporal.Duration%"))(a,c,s,h,0,0,0,0,0,0),S=bk(Ls(null),_);return zd(T,sr(aa(T,A,M,_),k,[]),S)}function QT(i,e,t,r){const n=i==="subtract"?-1:1,{years:a,months:c,weeks:s,days:h,hours:f,minutes:m,seconds:y,milliseconds:g,microseconds:b,nanoseconds:v}=Hd(t),_=or(r),T=Q(e,jr),k=Q(e,At);return Is(To(Q(e,Hs),T,k,n*a,n*c,n*s,n*h,n*f,n*m,n*y,n*g,n*b,n*v,_),T,k)}function Oa(i,e,t){if(e===1)return i;let{quotient:r,remainder:n}=as(i,de.BigInt(e));if(de.equal(n,On))return i;const a=de.lessThan(n,On)?-1:1;switch(t){case"ceil":a>0&&(r=de.add(r,de.BigInt(a)));break;case"floor":a<0&&(r=de.add(r,de.BigInt(a)));break;case"trunc":break;case"halfExpand":de.toNumber(u_(de.multiply(n,de.BigInt(2))))>=e&&(r=de.add(r,de.BigInt(a)))}return de.multiply(r,de.BigInt(e))}function E0(i,e,t,r){let n=de.remainder(i,de.BigInt(864e11));de.lessThan(n,On)&&(n=de.add(n,de.BigInt(864e11)));const a=de.subtract(i,n),c=Oa(n,M_[t]*e,r);return de.add(a,c)}function S_(i,e,t,r,n,a,c,s,h,f,m,y,g=864e11){const{deltaDays:b,hour:v,minute:_,second:T,millisecond:k,microsecond:w,nanosecond:E}=E_(r,n,a,c,s,h,f,m,y,g),{year:A,month:M,day:S}=Sv(i,e,t+b);return{year:A,month:M,day:S,hour:v,minute:_,second:T,millisecond:k,microsecond:w,nanosecond:E}}function E_(i,e,t,r,n,a,c,s,h,f=864e11){let m=On;switch(s){case"day":case"hour":m=de.BigInt(i);case"minute":m=de.add(de.multiply(m,Sd),de.BigInt(e));case"second":m=de.add(de.multiply(m,Sd),de.BigInt(t));case"millisecond":m=de.add(de.multiply(m,Or),de.BigInt(r));case"microsecond":m=de.add(de.multiply(m,Or),de.BigInt(n));case"nanosecond":m=de.add(de.multiply(m,Or),de.BigInt(a))}const y=s==="day"?f:M_[s],g=Oa(m,y*c,h),b=de.toNumber(de.divide(g,de.BigInt(y)));switch(s){case"day":return{deltaDays:b,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return gc(b,0,0,0,0,0);case"minute":return gc(i,b,0,0,0,0);case"second":return gc(i,e,b,0,0,0);case"millisecond":return gc(i,e,t,b,0,0);case"microsecond":return gc(i,e,t,r,b,0);case"nanosecond":return gc(i,e,t,r,n,b);default:throw new Error(`Invalid unit ${s}`)}}function i0(i,e){return __(Q(i,oi),Q(i,di),Q(i,pi),Q(e,oi),Q(e,di),Q(e,pi),"day").days}function Us(i,e,t){const r=aa(i,e,t,void 0);return{relativeTo:r,days:i0(e,r)}}function P1(i,e,t,r,n){const a=Q(i,jr),c=Q(i,At);return Is(To(Q(i,Hs),a,c,e,t,r,n,0,0,0,0,0,0),a,c)}function Xk(i,e,t,r,n,a,c,s,h,f,m,y,g,b){let v=i,_=e,T=t,k=r,w=n,E=a,A=c,M=s,S=h,N=f;if(!bi(b)||y==="year"||y==="month"||y==="week"||y==="day"||y==="nanosecond"&&m===1)return{years:v,months:_,weeks:T,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N};let Y=dp(0,w,E,A,M,S,N,0);const Z=Am(de.toNumber(Y)),K=Q(b,jr),B=Q(b,At),F=To(Q(b,Hs),K,B,v,_,T,k,0,0,0,0,0,0),O=To(new(ji("%Temporal.Instant%"))(F),K,B,0,0,0,Z,0,0,0,0,0,0),R=de.subtract(O,F);return de.greaterThanOrEqual(de.multiply(de.subtract(Y,R),de.BigInt(Z)),On)&&({years:v,months:_,weeks:T,days:k}=Zk(v,_,T,k,0,0,0,0,0,0,0,0,0,Z,0,0,0,0,0,0,b),Y=E0(de.subtract(Y,R),m,y,g),{hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N}=Va(0,0,0,0,0,0,de.toNumber(Y),"hour")),{years:v,months:_,weeks:T,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N}}function bu(i,e,t,r,n,a,c,s,h,f,m,y,g,b){let v=i,_=e,T=t,k=r,w=n,E=a,A=c,M=s,S=h,N=de.BigInt(f);const Y=ji("%Temporal.Duration%");let Z,K,B,F,O=b;if(O){if(bi(O))K=O,O=Wr(O);else if(!gr(O))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Z=Q(O,At)}if(y==="year"||y==="month"||y==="week"||y==="day"){let R,L,G;N=dp(0,w,E,A,M,S,f,0),K&&(R=P1(K,v,_,T,k)),{days:L,nanoseconds:N,dayLengthNs:G}=b_(N,R),B=de.BigInt(G),k+=L,w=E=A=M=S=0}switch(y){case"year":{if(!Z)throw new RangeError("A starting point is required for years rounding");const R=new Y(v),L=Z.dateAdd,G=aa(Z,O,R,void 0,L),V=aa(Z,O,new Y(v,_,T),void 0,L);O=G,k+=i0(G,V);const $=aa(Z,O,{days:k},void 0,L),q=Ls(null);q.largestUnit="year";const W=yu(Z,O,$,q).years;v+=W;const se=O;O=aa(Z,O,{years:W},void 0,L),k-=i0(se,O);const fe=new Y(k<0?-1:1);let{days:re}=Us(Z,O,fe);re=Sr(re);const le=de.multiply(de.BigInt(re),B);N=de.add(de.add(de.multiply(le,de.BigInt(v)),de.multiply(de.BigInt(k),B)),N);const Se=Oa(N,de.toNumber(de.multiply(le,de.BigInt(m))),g);F=de.toNumber(N)/de.toNumber(le),v=de.toNumber(de.divide(Se,le)),N=On,_=T=k=0;break}case"month":{if(!Z)throw new RangeError("A starting point is required for months rounding");const R=new Y(v,_),L=Z.dateAdd,G=aa(Z,O,R,void 0,L),V=aa(Z,O,new Y(v,_,T),void 0,L);O=G,k+=i0(G,V);const $=Am(k),q=new Y(0,k<0?-1:1);let W;for({relativeTo:O,days:W}=Us(Z,O,q);Sr(k)>=Sr(W);)_+=$,k-=W,{relativeTo:O,days:W}=Us(Z,O,q);W=Sr(W);const se=de.multiply(de.BigInt(W),B);N=de.add(de.add(de.multiply(se,de.BigInt(_)),de.multiply(de.BigInt(k),B)),N);const fe=Oa(N,de.toNumber(de.multiply(se,de.BigInt(m))),g);F=de.toNumber(N)/de.toNumber(se),_=de.toNumber(de.divide(fe,se)),N=On,T=k=0;break}case"week":{if(!Z)throw new RangeError("A starting point is required for weeks rounding");const R=Am(k),L=new Y(0,0,k<0?-1:1);let G;for({relativeTo:O,days:G}=Us(Z,O,L);Sr(k)>=Sr(G);)T+=R,k-=G,{relativeTo:O,days:G}=Us(Z,O,L);G=Sr(G);const V=de.multiply(de.BigInt(G),B);N=de.add(de.add(de.multiply(V,de.BigInt(T)),de.multiply(de.BigInt(k),B)),N);const $=Oa(N,de.toNumber(de.multiply(V,de.BigInt(m))),g);F=de.toNumber(N)/de.toNumber(V),T=de.toNumber(de.divide($,V)),N=On,k=0;break}case"day":{const R=B;N=de.add(de.multiply(R,de.BigInt(k)),N);const L=Oa(N,de.toNumber(de.multiply(R,de.BigInt(m))),g);F=de.toNumber(N)/de.toNumber(R),k=de.toNumber(de.divide(L,R)),N=On;break}case"hour":{let L=de.multiply(de.BigInt(w),de.BigInt(36e11));L=de.add(L,de.multiply(de.BigInt(E),de.BigInt(6e10))),L=de.add(L,de.multiply(de.BigInt(A),xc)),L=de.add(L,de.multiply(de.BigInt(M),Co)),L=de.add(L,de.multiply(de.BigInt(S),Or)),L=de.add(L,N),F=de.toNumber(L)/36e11;const G=Oa(L,36e11*m,g);w=de.toNumber(de.divide(G,de.BigInt(36e11))),N=On,E=A=M=S=0;break}case"minute":{let L=de.multiply(de.BigInt(E),de.BigInt(6e10));L=de.add(L,de.multiply(de.BigInt(A),xc)),L=de.add(L,de.multiply(de.BigInt(M),Co)),L=de.add(L,de.multiply(de.BigInt(S),Or)),L=de.add(L,N),F=de.toNumber(L)/6e10;const G=Oa(L,6e10*m,g);E=de.toNumber(de.divide(G,de.BigInt(6e10))),N=On,A=M=S=0;break}case"second":{let L=de.multiply(de.BigInt(A),xc);L=de.add(L,de.multiply(de.BigInt(M),Co)),L=de.add(L,de.multiply(de.BigInt(S),Or)),L=de.add(L,N),F=de.toNumber(L)/1e9;const G=Oa(L,1e9*m,g);A=de.toNumber(de.divide(G,de.BigInt(1e9))),N=On,M=S=0;break}case"millisecond":{let L=de.multiply(de.BigInt(M),Co);L=de.add(L,de.multiply(de.BigInt(S),Or)),L=de.add(L,N),F=de.toNumber(L)/1e6;const G=Oa(L,1e6*m,g);M=de.toNumber(de.divide(G,de.BigInt(1e6))),N=On,S=0;break}case"microsecond":{let L=de.multiply(de.BigInt(S),Or);L=de.add(L,N),F=de.toNumber(L)/1e3;const G=Oa(L,1e3*m,g);S=de.toNumber(de.divide(G,de.BigInt(1e3))),N=On;break}case"nanosecond":F=de.toNumber(N),N=Oa(N,m,g)}return{years:v,months:_,weeks:T,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:de.toNumber(N),total:F}}function uu(i,e,t,r,n,a){for(const[c,s]of[[i,r],[e,n],[t,a]])if(c!==s)return kd(c-s);return 0}function Fh(i,e){let t=i%e;return _N(t,-0)?0:(t<0&&(t+=e),t)}function k0(i){const e=gm(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function gm(i){if(i instanceof de)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=l_(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return de.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?c_:On}}const k_=(()=>{let i=de.BigInt(Date.now()%1e6);return()=>{const e=de.BigInt(Date.now()),t=de.add(de.multiply(e,Co),i);return i=de.remainder(e,Co),de.greaterThan(t,Pm)?Pm:de.lessThan(t,Im)?Im:t}})();function kd(i){return i<0?-1:i>0?1:i}function or(i){if(i===void 0)return Ls(null);if(rn(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function hp(i,e){const t=Ls(null);return t[i]=e,t}function wu(i,e,t,r){let n=i[e];if(n!==void 0){if(n=Ui(n),!t.includes(n))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${n}`);return n}return r}function Kk(i){return vk.call(SN,i)}const Qk=new RegExp(`^${mk.source}$`);function Jk(i,e,t,r=i(e),n=i(t)){let a=de.BigInt(e),c=de.BigInt(t),s=r,h=n;for(;de.greaterThan(de.subtract(c,a),c_);){const f=de.divide(de.add(a,c),de.BigInt(2)),m=i(f);if(m===s)a=f,s=m;else{if(m!==h)throw new Error(`invalid state in bisection ${s} - ${m} - ${h}`);c=f,h=m}}return c}const M_={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},eM=Symbol("date"),tM=Symbol("ym"),iM=Symbol("md"),rM=Symbol("time"),nM=Symbol("datetime"),sM=Symbol("zoneddatetime"),aM=Symbol("instant"),rp=Symbol("original"),D1=Symbol("timezone"),r0=Symbol("timezone-id-given"),Qa=Symbol("calendar-id"),oM=Symbol("locale"),R1=Symbol("options"),ym=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),Md=globalThis.Intl.DateTimeFormat,zl=Object.assign,IN=Object.prototype.hasOwnProperty,PN=Reflect.apply;function ld(i,e){let t=i[e];return typeof t=="function"&&(t=new Md(i[oM],t(i[R1])),i[e]=t),t}function jf(i){let e=i[D1];return typeof e=="string"&&(e=ca(e),i[D1]=e),e}function Od(i,e={}){if(!(this instanceof Od))return new Od(i,e);const t=e!==void 0,r=t?zl({},e):{},n=new Md(i,r),a=n.resolvedOptions();if(t){const c=zl({},a);for(const s in c)PN(IN,r,[s])||delete c[s];this[R1]=c}else this[R1]=r;this[r0]=r.timeZone?r.timeZone:null,this[oM]=a.locale,this[rp]=n,this[D1]=a.timeZone,this[Qa]=a.calendar,this[eM]=NN,this[tM]=RN,this[iM]=LN,this[rM]=DN,this[nM]=zN,this[sM]=jN,this[aM]=ON}Object.defineProperty(Od,"name",{writable:!0,value:"DateTimeFormat"}),Od.supportedLocalesOf=function(i,e){return Md.supportedLocalesOf(i,e)};const cb={resolvedOptions:ym(function(){return this[rp].resolvedOptions()}),format:ym(function(e,...t){let{instant:r,formatter:n,timeZone:a}=np(e,this);return r&&n?(n=M0(n,a),n.format(r.epochMilliseconds)):this[rp].format(e,...t)}),formatRange:ym(function(e,t){if(pp(e)||pp(t)){if(!lM(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:r,formatter:n,timeZone:a}=np(e,this),{instant:c,formatter:s,timeZone:h}=np(t,this);if(a&&h&&a!==h)throw new RangeError("cannot format range between different time zones");if(r&&c&&n&&s&&n===s)return M0(n,a).formatRange(r.epochMilliseconds,c.epochMilliseconds)}return this[rp].formatRange(e,t)})};"formatToParts"in Md.prototype&&(cb.formatToParts=ym(function(e,...t){let{instant:r,formatter:n,timeZone:a}=np(e,this);return r&&n?(n=M0(n,a),n.formatToParts(r.epochMilliseconds)):this[rp].formatToParts(e,...t)})),"formatRangeToParts"in Md.prototype&&(cb.formatRangeToParts=ym(function(e,t){if(pp(e)||pp(t)){if(!lM(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:r,formatter:n,timeZone:a}=np(e,this),{instant:c,formatter:s,timeZone:h}=np(t,this);if(a&&h&&a!==h)throw new RangeError("cannot format range between different time zones");if(r&&c&&n&&s&&n===s)return M0(n,a).formatRangeToParts(r.epochMilliseconds,c.epochMilliseconds)}return this[rp].formatRangeToParts(e,t)})),Od.prototype=Object.create(Md.prototype,cb),Object.defineProperty(Od,"prototype",{writable:!1,enumerable:!1,configurable:!1});const qd=Od;function M0(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new Md(t.locale,{...t,timeZone:e}))}function cg(i={},e={}){const t=zl({},i);for(const r of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[r]=r in e?e[r]:t[r],t[r]!==!1&&t[r]!==void 0||delete t[r];return t}function DN(i){let e=cg(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return Av(e)||(e=zl({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function RN(i){let e=cg(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=zl(e,{year:"numeric",month:"numeric"})),e}function LN(i){let e=cg(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=zl({},e,{month:"numeric",day:"numeric"})),e}function NN(i){let e=cg(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Mv(e)||(e=zl({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function zN(i){let e=cg(i,{timeZoneName:!1});return Av(e)||Mv(e)||(e=zl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function jN(i){let e=i;return Av(e)||Mv(e)||(e=zl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function ON(i){let e=i;return Av(e)||Mv(e)||(e=zl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Mv(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function Av(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function pp(i){return gr(i)||Mn(i)||er(i)||bi(i)||Ir(i)||bs(i)||Jn(i)}function lM(i,e){return!(!pp(i)||!pp(e))&&!(Mn(i)&&!Mn(e))&&!(gr(i)&&!gr(e))&&!(er(i)&&!er(e))&&!(bi(i)&&!bi(e))&&!(Ir(i)&&!Ir(e))&&!(bs(i)&&!bs(e))&&!(Jn(i)&&!Jn(e))}function np(i,e){const t=ji("%Temporal.PlainDateTime%");if(Mn(i)){const r=new t(1970,1,1,Q(i,Wi),Q(i,Yi),Q(i,Zi),Q(i,Xi),Q(i,Ki),Q(i,Qi),e[Qa]);return{instant:oa(jf(e),r,"compatible"),formatter:ld(e,rM)}}if(Ir(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Ui(Q(i,At));if(c!==e[Qa])throw new RangeError(`cannot format PlainYearMonth with calendar ${c} in locale with calendar ${e[Qa]}`);const s=new t(r,n,a,12,0,0,0,0,0,c);return{instant:oa(jf(e),s,"compatible"),formatter:ld(e,tM)}}if(bs(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Ui(Q(i,At));if(c!==e[Qa])throw new RangeError(`cannot format PlainMonthDay with calendar ${c} in locale with calendar ${e[Qa]}`);const s=new t(r,n,a,12,0,0,0,0,0,c);return{instant:oa(jf(e),s,"compatible"),formatter:ld(e,iM)}}if(gr(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Ui(Q(i,At));if(c!=="iso8601"&&c!==e[Qa])throw new RangeError(`cannot format PlainDate with calendar ${c} in locale with calendar ${e[Qa]}`);const s=new t(r,n,a,12,0,0,0,0,0,e[Qa]);return{instant:oa(jf(e),s,"compatible"),formatter:ld(e,eM)}}if(er(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Q(i,Wi),s=Q(i,Yi),h=Q(i,Zi),f=Q(i,Xi),m=Q(i,Ki),y=Q(i,Qi),g=Ui(Q(i,At));if(g!=="iso8601"&&g!==e[Qa])throw new RangeError(`cannot format PlainDateTime with calendar ${g} in locale with calendar ${e[Qa]}`);let b=i;return g==="iso8601"&&(b=new t(r,n,a,c,s,h,f,m,y,e[Qa])),{instant:oa(jf(e),b,"compatible"),formatter:ld(e,nM)}}if(bi(i)){const r=Ui(Q(i,At));if(r!=="iso8601"&&r!==e[Qa])throw new RangeError(`cannot format ZonedDateTime with calendar ${r} in locale with calendar ${e[Qa]}`);const n=Ui(Q(i,jr));if(e[r0]&&e[r0]!==n)throw new RangeError(`timeZone option ${e[r0]} doesn't match actual time zone ${n}`);return{instant:Q(i,Hs),formatter:ld(e,sM),timeZone:n}}return Jn(i)?{instant:i,formatter:ld(e,aM)}:{}}class Ko{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=gm(e);yd(t),$l(this),tr(this,zi,t)}get epochSeconds(){if(!Jn(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return de.toNumber(de.divide(e,xc))}get epochMilliseconds(){if(!Jn(this))throw new TypeError("invalid receiver");const e=de.BigInt(Q(this,zi));return de.toNumber(de.divide(e,Co))}get epochMicroseconds(){if(!Jn(this))throw new TypeError("invalid receiver");const e=de.BigInt(Q(this,zi));return k0(de.divide(e,Or))}get epochNanoseconds(){if(!Jn(this))throw new TypeError("invalid receiver");return k0(de.BigInt(Q(this,zi)))}add(e){if(!Jn(this))throw new TypeError("invalid receiver");return YT("add",this,e)}subtract(e){if(!Jn(this))throw new TypeError("invalid receiver");return YT("subtract",this,e)}until(e,t){if(!Jn(this))throw new TypeError("invalid receiver");return $T("until",this,e,t)}since(e,t){if(!Jn(this))throw new TypeError("invalid receiver");return $T("since",this,e,t)}round(e){if(!Jn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?hp("smallestUnit",e):or(e),r=hs(t,"smallestUnit","time",Ld),n=Ea(t,"halfExpand"),a=kc(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[r],!0),c=E0(Q(this,zi),a,r,n);return new Ko(c)}equals(e){if(!Jn(this))throw new TypeError("invalid receiver");const t=_l(e),r=Q(this,zi),n=Q(t,zi);return de.equal(de.BigInt(r),de.BigInt(n))}toString(e){if(!Jn(this))throw new TypeError("invalid receiver");const t=or(e);let r=t.timeZone;r!==void 0&&(r=ca(r));const{precision:n,unit:a,increment:c}=ng(t),s=Ea(t,"trunc"),h=E0(Q(this,zi),c,a,s);return RT(new Ko(h),r,n)}toJSON(){if(!Jn(this))throw new TypeError("invalid receiver");return RT(this,void 0,"auto")}toLocaleString(e,t){if(!Jn(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Jn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const r=Ts(t),n=e.timeZone;if(n===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const a=ca(n);return Is(Q(this,zi),a,r)}toZonedDateTimeISO(e){let t=e;if(!Jn(this))throw new TypeError("invalid receiver");if(rn(t)){const a=t.timeZone;a!==void 0&&(t=a)}const r=ca(t),n=$n();return Is(Q(this,zi),r,n)}static fromEpochSeconds(e){const t=Dm(e),r=de.multiply(de.BigInt(t),xc);return yd(r),new Ko(r)}static fromEpochMilliseconds(e){const t=Dm(e),r=de.multiply(de.BigInt(t),Co);return yd(r),new Ko(r)}static fromEpochMicroseconds(e){const t=gm(e),r=de.multiply(t,Or);return yd(r),new Ko(r)}static fromEpochNanoseconds(e){const t=gm(e);return yd(t),new Ko(t)}static from(e){return Jn(e)?new Ko(Q(e,zi)):_l(e)}static compare(e,t){const r=_l(e),n=_l(t),a=Q(r,zi),c=Q(n,zi);return de.lessThan(a,c)?-1:de.greaterThan(a,c)?1:0}}Bl(Ko,"Temporal.Instant");const A0=Array.prototype.includes,FN=Array.prototype.push,BN=globalThis.Intl.DateTimeFormat,$N=Array.prototype.sort,UN=Math.abs,VN=Math.floor,L1=Object.entries,JT=Object.keys,An={};class I0{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Ui(e);if(!Kk(t))throw new RangeError(`invalid calendar identifier ${t}`);$l(this),tr(this,zn,t)}get id(){if(!Nn(this))throw new TypeError("invalid receiver");return Ui(this)}dateFromFields(e,t){if(!Nn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid fields");const r=or(t);return An[Q(this,zn)].dateFromFields(e,r,this)}yearMonthFromFields(e,t){if(!Nn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid fields");const r=or(t);return An[Q(this,zn)].yearMonthFromFields(e,r,this)}monthDayFromFields(e,t){if(!Nn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid fields");const r=or(t);return An[Q(this,zn)].monthDayFromFields(e,r,this)}fields(e){if(!Nn(this))throw new TypeError("invalid receiver");const t=[],r=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const n of e){if(typeof n!="string")throw new TypeError("invalid fields");if(!r.has(n))throw new RangeError(`invalid field name ${n}`);r.delete(n),FN.call(t,n)}return An[Q(this,zn)].fields(t)}mergeFields(e,t){if(!Nn(this))throw new TypeError("invalid receiver");return An[Q(this,zn)].mergeFields(e,t)}dateAdd(e,t,r){if(!Nn(this))throw new TypeError("invalid receiver");const n=Wr(e),a=ip(t),c=Bn(or(r)),{days:s}=Va(Q(a,Js),Q(a,ea),Q(a,ta),Q(a,ia),Q(a,ra),Q(a,na),Q(a,sa),"day");return An[Q(this,zn)].dateAdd(n,Q(a,Qs),Q(a,xs),Q(a,wa),s,c,this)}dateUntil(e,t,r){if(!Nn(this))throw new TypeError("invalid receiver");const n=Wr(e),a=Wr(t);let c=hs(or(r),"largestUnit","date","auto");c==="auto"&&(c="day");const{years:s,months:h,weeks:f,days:m}=An[Q(this,zn)].dateUntil(n,a,c);return new(ji("%Temporal.Duration%"))(s,h,f,m,0,0,0,0,0,0)}year(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].year(t)}month(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");if(bs(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].month(t)}monthCode(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||bs(t)||(t=Wr(t)),An[Q(this,zn)].monthCode(t)}day(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return bs(t)||(t=Wr(t)),An[Q(this,zn)].day(t)}era(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].era(t)}eraYear(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].eraYear(t)}dayOfWeek(e){if(!Nn(this))throw new TypeError("invalid receiver");const t=Wr(e);return An[Q(this,zn)].dayOfWeek(t)}dayOfYear(e){if(!Nn(this))throw new TypeError("invalid receiver");const t=Wr(e);return An[Q(this,zn)].dayOfYear(t)}weekOfYear(e){if(!Nn(this))throw new TypeError("invalid receiver");const t=Wr(e);return An[Q(this,zn)].weekOfYear(t)}daysInWeek(e){if(!Nn(this))throw new TypeError("invalid receiver");const t=Wr(e);return An[Q(this,zn)].daysInWeek(t)}daysInMonth(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].daysInMonth(t)}daysInYear(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].daysInYear(t)}monthsInYear(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].monthsInYear(t)}inLeapYear(e){let t=e;if(!Nn(this))throw new TypeError("invalid receiver");return Ir(t)||(t=Wr(t)),An[Q(this,zn)].inLeapYear(t)}toString(){if(!Nn(this))throw new TypeError("invalid receiver");return Q(this,zn)}toJSON(){if(!Nn(this))throw new TypeError("invalid receiver");return Ui(this)}static from(e){return Ts(e)}}function A_(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function wc(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function n0(i,e,t=12){let{month:r,monthCode:n}=i;if(n===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&Ds(r,1,t),e==="constrain"&&(r=Ua(r,1,t)),n=wc(r)}else{const a=A_(n);if(r!==void 0&&r!==a)throw new RangeError(`monthCode ${n} and month ${r} must match if both are present`);if(n!==wc(a))throw new RangeError(`Invalid month code: ${n}`);if(r=a,r<1||r>t)throw new RangeError(`Invalid monthCode: ${n}`)}return{...i,month:r,monthCode:n}}Bl(I0,"Temporal.Calendar"),C1("Temporal.Calendar.from",I0.from),An.iso8601={dateFromFields(i,e,t){const r=Bn(e);let n=sr(i,["day","month","monthCode","year"],["year","day"]);n=n0(n);let{year:a,month:c,day:s}=n;return{year:a,month:c,day:s}=w0(a,c,s,r),Ho(a,c,s,t)},yearMonthFromFields(i,e,t){const r=Bn(e);let n=sr(i,["month","monthCode","year"],["year"]);n=n0(n);let{year:a,month:c}=n;return{year:a,month:c}=function(h,f,m){let y=h,g=f;switch(m){case"reject":Nl(y,g,1);break;case"constrain":({year:y,month:g}=Vk(y,g))}return{year:y,month:g}}(a,c,r),zm(a,c,t,1)},monthDayFromFields(i,e,t){const r=Bn(e);let n=sr(i,["day","month","monthCode","year"],["day"]);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const a=n.monthCode===void 0;n=n0(n);let{month:c,day:s,year:h}=n;return{month:c,day:s}=w0(a?h:1972,c,s,r),Nm(c,s,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const n of JT(i))n!=="month"&&n!=="monthCode"&&(t[n]=i[n]);const r=JT(e);for(const n of r)t[n]=e[n];if(!A0.call(r,"month")&&!A0.call(r,"monthCode")){const{month:n,monthCode:a}=i;n!==void 0&&(t.month=n),a!==void 0&&(t.monthCode=a)}return t},dateAdd(i,e,t,r,n,a,c){let s=Q(i,oi),h=Q(i,di),f=Q(i,pi);return{year:s,month:h,day:f}=Ed(s,h,f,e,t,r,n,a),Ho(s,h,f,c)},dateUntil:(i,e,t)=>__(Q(i,oi),Q(i,di),Q(i,pi),Q(e,oi),Q(e,di),Q(e,pi),t),year:i=>Q(i,oi),era(){},eraYear(){},month:i=>Q(i,di),monthCode:i=>wc(Q(i,di)),day:i=>Q(i,pi),dayOfWeek:i=>lb(Q(i,oi),Q(i,di),Q(i,pi)),dayOfYear:i=>S0(Q(i,oi),Q(i,di),Q(i,pi)),weekOfYear:i=>function(t,r,n){const a=S0(t,r,n),c=lb(t,r,n)||7,s=lb(t,1,1),h=cs((a-c+10)/7);return h<1?s===5||s===6&&cu(t-1)?53:52:h===53&&(cu(t)?366:365)-a<4-c?1:h}(Q(i,oi),Q(i,di),Q(i,pi)),daysInWeek:()=>7,daysInMonth:i=>bc(Q(i,oi),Q(i,di)),daysInYear(i){let e=i;return fs(e,oi)||(e=Wr(e)),cu(Q(e,oi))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return fs(e,oi)||(e=Wr(e)),cu(Q(e,oi))}};class bn{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const r of e.map.entries()){if(++t>bn.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(bn.objectMap.get(e))throw new RangeError("object already cached");bn.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=bn.objectMap.get(e);return t||(t=new bn,bn.objectMap.set(e,t)),t}}function cM({isoYear:i,isoMonth:e,isoDay:t}){return`${Gd(i)}-${gn(e)}-${gn(t)}T00:00Z`}function ub(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}bn.objectMap=new WeakMap,bn.MAX_CACHE_ENTRIES=1e3;class kp{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new BN(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:r,month:n,day:a}=e,c=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:n,isoDay:a,id:this.id}),s=t.get(c);if(s)return s;const h=this.getFormatter();let f,m;try{m=cM({isoYear:r,isoMonth:n,isoDay:a}),f=h.formatToParts(new Date(m))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:r,isoMonth:n,isoDay:a})}`)}const y={};for(let{type:b,value:v}of f){if(b==="year"&&(y.eraYear=+v),b==="relatedYear"&&(y.eraYear=+v),b==="month"){const _=/^([0-9]*)(.*?)$/.exec(v);if(!_||_.length!=3||!_[1]&&!_[2])throw new RangeError(`Unexpected month: ${v}`);if(y.month=_[1]?+_[1]:1,y.month<1)throw new RangeError(`Invalid month ${v} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(y.month>13)throw new RangeError(`Invalid month ${v} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);_[2]&&(y.monthExtra=_[2])}b==="day"&&(y.day=+v),this.hasEra&&b==="era"&&v!=null&&v!==""&&(v=v.split(" (")[0],y.era=v.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(y.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:b,eraYear:v}=this.reviseIntlEra(y,e);y.era=b,y.eraYear=v}this.checkIcuBugs&&this.checkIcuBugs(e);const g=this.adjustCalendarDate(y,t,"constrain",!0);if(g.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(g.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(g.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(c,g),["constrain","reject"].forEach(b=>{const v=JSON.stringify({func:"calendarToIsoDate",year:g.year,month:g.month,day:g.day,overflow:b,id:this.id});t.set(v,e)}),g}validateCalendarDate(e){const{era:t,month:r,year:n,day:a,eraYear:c,monthCode:s,monthExtra:h}=e;if(h!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(n===void 0&&c===void 0)throw new TypeError("year or eraYear is required");if(r===void 0&&s===void 0)throw new TypeError("month or monthCode is required");if(a===void 0)throw new RangeError("Missing day");if(s!==void 0){if(typeof s!="string")throw new RangeError("monthCode must be a string, not "+typeof s);if(!/^M([01]?\d)(L?)$/.test(s))throw new RangeError(`Invalid monthCode: ${s}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(c!==void 0&&n!==void 0&&c!==n)throw new RangeError(`eraYear ${c} does not match year ${n}`)}}adjustCalendarDate(e,t,r="constrain",n=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let a=e;if(this.validateCalendarDate(a),this.constantEra){const{year:f,eraYear:m}=a;a={...a,era:this.constantEra,year:f!==void 0?f:m,eraYear:m!==void 0?m:f}}const c=this.monthsInYear(a,t);let{month:s,monthCode:h}=a;return{month:s,monthCode:h}=n0(a,r,c),{...a,month:s,monthCode:h}}regulateMonthDayNaive(e,t,r){const n=this.monthsInYear(e,r);let{month:a,day:c}=e;return t==="reject"?(Ds(a,1,n),Ds(c,1,this.maximumMonthLength(e))):(a=Ua(a,1,n),c=Ua(c,1,this.maximumMonthLength({...e,month:a}))),{...e,month:a,day:c}}calendarToIsoDate(e,t="constrain",r){const n=e;let a=this.adjustCalendarDate(e,r,t,!1);a=this.regulateMonthDayNaive(a,t,r);const{year:c,month:s,day:h}=a,f=JSON.stringify({func:"calendarToIsoDate",year:c,month:s,day:h,overflow:t,id:this.id});let m,y=r.get(f);if(y||n.year!==void 0&&n.month!==void 0&&n.day!==void 0&&(n.year!==a.year||n.month!==a.month||n.day!==a.day)&&(m=JSON.stringify({func:"calendarToIsoDate",year:n.year,month:n.month,day:n.day,overflow:t,id:this.id}),y=r.get(m),y))return y;let g=this.estimateIsoDate({year:c,month:s,day:h});const b=E=>{let A=this.addDaysIso(g,E);if(a.day>this.minimumMonthLength(a)){let M=this.isoToCalendarDate(A,r);for(;M.month!==s||M.year!==c;){if(t==="reject")throw new RangeError(`day ${h} does not exist in month ${s} of year ${c}`);A=this.addDaysIso(A,-1),M=this.isoToCalendarDate(A,r)}}return A};let v=0,_=this.isoToCalendarDate(g,r),T=ub(a,_);if(T.years!==0||T.months!==0||T.days!==0){const E=365*T.years+30*T.months+T.days;g=this.addDaysIso(g,E),_=this.isoToCalendarDate(g,r),T=ub(a,_),T.years===0&&T.months===0?g=b(T.days):v=this.compareCalendarDates(a,_)}let k=8,w=!1;for(;v;){g=this.addDaysIso(g,v*k);const E=_;_=this.isoToCalendarDate(g,r);const A=v;if(v=this.compareCalendarDates(a,_),v){if(T=ub(a,_),T.years===0&&T.months===0)g=b(T.days),v=0,w=a.day>this.minimumMonthLength(a);else if(A&&v!==A)if(k>1)k/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...n})}`);this.compareCalendarDates(_,E)>0&&(g=this.addDaysIso(g,-1)),w=!0,v=0}}}if(r.set(f,g),m&&r.set(m,g),a.year===void 0||a.month===void 0||a.day===void 0||a.monthCode===void 0||this.hasEra&&(a.era===void 0||a.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!w){const E=JSON.stringify({func:"isoToCalendarDate",isoYear:g.year,isoMonth:g.month,isoDay:g.day,id:this.id});r.set(E,a)}return g}temporalToCalendarDate(e,t){const r={year:Q(e,oi),month:Q(e,di),day:Q(e,pi)};return this.isoToCalendarDate(r,t)}compareCalendarDates(e,t){const r=sr(e,["day","month","year"],["day","month","year"]),n=sr(t,["day","month","year"],["day","month","year"]);return r.year!==n.year?kd(r.year-n.year):r.month!==n.month?kd(r.month-n.month):r.day!==n.day?kd(r.day-n.day):0}regulateDate(e,t="constrain",r){const n=this.calendarToIsoDate(e,t,r);return this.isoToCalendarDate(n,r)}addDaysIso(e,t){return Ed(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,r){const n=this.calendarToIsoDate(e,"constrain",r),a=this.addDaysIso(n,t);return this.isoToCalendarDate(a,r)}addMonthsCalendar(e,t,r,n){let a=e;const{day:c}=a;for(let s=0,h=UN(t);s<h;s++){const{month:f}=a,m=a,y=t<0?-Math.max(c,this.daysInPreviousMonth(a,n)):this.daysInMonth(a,n),g=this.calendarToIsoDate(a,"constrain",n);let b=this.addDaysIso(g,y);if(a=this.isoToCalendarDate(b,n),t>0){const v=this.monthsInYear(m,n);for(;a.month-1!=f%v;)b=this.addDaysIso(b,-1),a=this.isoToCalendarDate(b,n)}a.day!==c&&(a=this.regulateDate({...a,day:c},"constrain",n))}if(r==="reject"&&a.day!==c)throw new RangeError(`Day ${c} does not exist in resulting calendar month`);return a}addCalendar(e,{years:t=0,months:r=0,weeks:n=0,days:a=0},c,s){const{year:h,day:f,monthCode:m}=e,y=this.adjustCalendarDate({year:h+t,monthCode:m,day:f},s),g=this.addMonthsCalendar(y,r,c,s),b=a+7*n;return this.addDaysCalendar(g,b,s)}untilCalendar(e,t,r,n){let a=0,c=0,s=0,h=0;switch(r){case"day":a=this.calendarDaysUntil(e,t,n);break;case"week":{const f=this.calendarDaysUntil(e,t,n);a=f%7,c=(f-a)/7;break}case"month":case"year":{const f=t.year-e.year,m=t.month-e.month,y=t.day-e.day,g=this.compareCalendarDates(t,e);if(!g)return{years:0,months:0,weeks:0,days:0};r==="year"&&f&&(h=m*g<0||m===0&&y*g<0?f-g:f);let b,v=h?this.addCalendar(e,{years:h},"constrain",n):e;do s+=g,b=v,v=this.addMonthsCalendar(b,g,"constrain",n),v.day!==e.day&&(v=this.regulateDate({...v,day:e.day},"constrain",n));while(this.compareCalendarDates(t,v)*g>=0);s-=g,a=this.calendarDaysUntil(b,t,n);break}}return{years:h,months:s,weeks:c,days:a}}daysInMonth(e,t){const{day:r}=e,n=this.maximumMonthLength(e),a=this.minimumMonthLength(e);if(a===n)return a;const c=r<=n-a?n:a,s=this.calendarToIsoDate(e,"constrain",t),h=this.addDaysIso(s,c),f=this.isoToCalendarDate(h,t),m=this.addDaysIso(h,-f.day);return this.isoToCalendarDate(m,t).day}daysInPreviousMonth(e,t){const{day:r,month:n,year:a}=e;let c={year:n>1?a:a-1,month:n,day:1};const s=n>1?n-1:this.monthsInYear(c,t);c={...c,month:s};const h=this.minimumMonthLength(c),f=this.maximumMonthLength(c);if(h===f)return f;const m=this.calendarToIsoDate(e,"constrain",t),y=this.addDaysIso(m,-r);return this.isoToCalendarDate(y,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,r){const n=this.calendarToIsoDate(e,"constrain",r),a=this.calendarToIsoDate(t,"constrain",r);return this.isoDaysUntil(n,a)}isoDaysUntil(e,t){return __(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,r){let n,a,c,s,h,{year:f,month:m,monthCode:y,day:g,era:b,eraYear:v}=e;if(y===void 0){if(f===void 0&&(b===void 0||v===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:y,year:f}=this.adjustCalendarDate({year:f,month:m,monthCode:y,day:g,era:b,eraYear:v},r,t))}const{year:_}=this.isoToCalendarDate({year:1972,month:1,day:1},r);for(let T=0;T<100;T++){const k=this.adjustCalendarDate({day:g,monthCode:y,year:_-T},r),w=this.calendarToIsoDate(k,"constrain",r),E=this.isoToCalendarDate(w,r);if({year:n,month:a,day:c}=w,E.monthCode===y&&E.day===g)return{month:a,day:c,year:n};t==="constrain"&&(s===void 0||E.monthCode===s.monthCode&&E.day>s.day)&&(s=E,h=w)}if(t==="constrain"&&h!==void 0)return h;throw new RangeError(`No recent ${this.id} year with monthCode ${y} and day ${g}`)}}class HN extends kp{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:r,year:n}=e,a=this.getMonthCode(n,r),c=L1(this.months).find(h=>h[1].monthCode===a);if(c===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const s=c[1].days;return typeof s=="number"?s:s[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?wc(5,!0):wc(t<6?t:t-1):wc(t)}adjustCalendarDate(e,t,r="constrain",n=!1){let{year:a,eraYear:c,month:s,monthCode:h,day:f,monthExtra:m}=e;if(a===void 0&&c!==void 0&&(a=c),c===void 0&&a!==void 0&&(c=a),n){if(m){const y=this.months[m];if(!y)throw new RangeError(`Unrecognized month from formatToParts: ${m}`);s=this.inLeapYear({year:a})?y.leap:y.regular}return h=this.getMonthCode(a,s),{year:a,month:s,day:f,era:void 0,eraYear:c,monthCode:h}}if(this.validateCalendarDate(e),s===void 0)if(h.endsWith("L")){if(h!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${h}`);if(s=6,!this.inLeapYear({year:a})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${a} which is not a leap year`);s=5,f=30,h="M05"}}else{s=A_(h),this.inLeapYear({year:a})&&s>=6&&s++;const y=this.monthsInYear({year:a});if(s<1||s>y)throw new RangeError(`Invalid monthCode: ${h}`)}else if(r==="reject"?(Ds(s,1,this.monthsInYear({year:a})),Ds(f,1,this.maximumMonthLength({year:a,month:s}))):(s=Ua(s,1,this.monthsInYear({year:a})),f=Ua(f,1,this.maximumMonthLength({year:a,month:s}))),h===void 0)h=this.getMonthCode(a,s);else if(this.getMonthCode(a,s)!==h)throw new RangeError(`monthCode ${h} doesn't correspond to month ${s} in Hebrew year ${a}`);return{...e,day:f,month:s,monthCode:h,year:a,eraYear:c}}}class Mp extends kp{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:VN(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class uM extends Mp{constructor(){super(...arguments),this.id="islamic"}}class GN extends Mp{constructor(){super(...arguments),this.id="islamic-umalqura"}}class qN extends Mp{constructor(){super(...arguments),this.id="islamic-tbla"}}class WN extends Mp{constructor(){super(...arguments),this.id="islamic-civil"}}class YN extends Mp{constructor(){super(...arguments),this.id="islamic-rgsa"}}class ZN extends Mp{constructor(){super(...arguments),this.id="islamicc"}}class XN extends kp{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return uM.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class KN extends kp{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return dM(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let r=this.months[t];if(r===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&r.leap&&(r=r.leap),r}estimateIsoDate(e){const t=this.adjustCalendarDate(e),r=this.getMonthInfo(t);return Ed(t.year+78+(r.nextYear?1:0),r.month,r.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function dM(i){return i%4==0&&(i%100!=0||i%400==0)}class ug extends kp{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:r,anchorEra:n}=function(c){let s,h=c;if(h.length===0)throw new RangeError("Invalid era data: eras are required");if(h.length===1&&h[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(h.length===1&&!h[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(h.filter(m=>m.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");h.forEach(m=>{if(m.isAnchor||!m.anchorEpoch&&!m.reverseOf){if(s)throw new RangeError("Invalid era data: cannot have multiple anchor eras");s=m,m.anchorEpoch={year:m.hasYearZero?0:1}}else if(!m.name)throw new RangeError("If era name is blank, it must be the anchor era")}),h=h.filter(m=>m.name),h.forEach(m=>{const{reverseOf:y}=m;if(y){const g=h.find(b=>b.name===y);if(g===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${y}`);m.reverseOf=g,m.anchorEpoch=g.anchorEpoch,m.isoEpoch=g.isoEpoch}m.anchorEpoch.month===void 0&&(m.anchorEpoch.month=1),m.anchorEpoch.day===void 0&&(m.anchorEpoch.day=1)}),$N.call(h,(m,y)=>{if(m.reverseOf)return 1;if(y.reverseOf)return-1;if(!m.isoEpoch||!y.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return y.isoEpoch.year-m.isoEpoch.year});const f=h[h.length-1].reverseOf;if(f&&f!==h[h.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return h.forEach((m,y)=>{m.genericName="era"+(h.length-1-y)}),{eras:h,anchorEra:s||h[0]}}(t);this.anchorEra=n,this.eras=r}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return dM(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(s,h)=>{const f=e[s];if(f!=null&&f!=h)throw new RangeError(`Input ${s} ${f} doesn't match calculated value ${h}`)},r=s=>{let h;const f={...e,year:s},m=this.eras.find((y,g)=>{if(g===this.eras.length-1){if(y.reverseOf){if(s>0)throw new RangeError(`Signed year ${s} is invalid for era ${y.name}`);return h=y.anchorEpoch.year-s,!0}return h=s-y.anchorEpoch.year+(y.hasYearZero?0:1),!0}return this.compareCalendarDates(f,y.anchorEpoch)>=0&&(h=s-y.anchorEpoch.year+(y.hasYearZero?0:1),!0)});if(!m)throw new RangeError(`Year ${s} was not matched by any era`);return{eraYear:h,era:m.name}};let{year:n,eraYear:a,era:c}=e;if(n!=null)({eraYear:a,era:c}=r(n)),t("era",c),t("eraYear",a);else{if(a==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const s=c===void 0?void 0:this.eras.find(h=>h.name===c||h.genericName===c);if(!s)throw new RangeError(`Era ${c} (ISO year ${a}) was not matched by any era`);if(a<1&&s.reverseOf)throw new RangeError(`Years in ${c} era must be positive, not ${n}`);n=s.reverseOf?s.anchorEpoch.year-a:a+s.anchorEpoch.year-(s.hasYearZero?0:1),t("year",n),{eraYear:a,era:c}=r(n)}}return{...e,year:n,eraYear:a,era:c}}adjustCalendarDate(e,t,r="constrain"){let n=e;const{month:a,monthCode:c}=n;return a===void 0&&(n={...n,month:A_(c)}),this.validateCalendarDate(n),n=this.completeEraYear(n),super.adjustCalendarDate(n,t,r)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:r,month:n,day:a}=t,{anchorEra:c}=this;return w0(r+c.isoEpoch.year-(c.hasYearZero?0:1),n,a,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&uu(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class I_ extends ug{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class QN extends I_{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class JN extends I_{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class e4 extends I_{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class t4 extends ug{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class i4 extends ug{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class r4 extends ug{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:r}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:r}}}class n4 extends ug{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:r,eraYear:n}=e,{year:a}=t;return this.eras.find(c=>c.name===r)?{era:r,eraYear:n}:a<1?{era:"bce",eraYear:1-a}:{era:"ce",eraYear:a}}}class hM extends kp{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const r=this.getMonthList(e.year,t);return L1(r).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),n=t.get(r);if(n)return n;const a=this.getFormatter(),c=(T,k)=>{const w=cM({isoYear:T,isoMonth:2,isoDay:1}),E=new Date(w);E.setUTCDate(k+1);const A=a.formatToParts(E),M=A.find(Y=>Y.type==="month").value,S=+A.find(Y=>Y.type==="day").value;let N=A.find(Y=>Y.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:M,calendarDay:S,calendarYearToVerify:N}};let s=17,{calendarMonthString:h,calendarDay:f,calendarYearToVerify:m}=c(e,s);h!=="1"&&(s+=29,{calendarMonthString:h,calendarDay:f}=c(e,s)),s-=f-5;const y={};let g,b,v=1,_=!1;do({calendarMonthString:h,calendarDay:f,calendarYearToVerify:m}=c(e,s)),g&&(y[b].daysInMonth=g+30-f),m!==e?_=!0:(y[h]={monthIndex:v++},s+=30),g=f,b=h;while(!_);return y[b].daysInMonth=g+30-f,t.set(r,y),y}estimateIsoDate(e){const{year:t,month:r}=e;return{year:t,month:r>=12?12:r+1,day:1}}adjustCalendarDate(e,t,r="constrain",n=!1){let{year:a,month:c,monthExtra:s,day:h,monthCode:f,eraYear:m}=e;if(n){if(a=m,s&&s!=="bis")throw new RangeError(`Unexpected leap month suffix: ${s}`);const y=wc(c,s!==void 0),g=`${c}${s||""}`,b=this.getMonthList(a,t)[g];if(b===void 0)throw new RangeError(`Unmatched month ${g} in Chinese year ${a}`);return c=b.monthIndex,{year:a,month:c,day:h,era:void 0,eraYear:m,monthCode:y}}if(this.validateCalendarDate(e),a===void 0&&(a=m),m===void 0&&(m=a),c===void 0){const y=this.getMonthList(a,t);let g=f.replace("L","bis").slice(1);g[0]==="0"&&(g=g.slice(1));let b=y[g];if(c=b&&b.monthIndex,c===void 0&&f.endsWith("L")&&!A0.call(["M01L","M12L","M13L"],f)&&r==="constrain"){let v=f.slice(1,-1);v[0]==="0"&&(v=v.slice(1)),b=y[v],b&&({daysInMonth:h,monthIndex:c}=b,f=wc(v))}if(c===void 0)throw new RangeError(`Unmatched month ${f} in Chinese year ${a}`)}else if(f===void 0){const y=this.getMonthList(a,t),g=L1(y),b=g.length;r==="reject"?(Ds(c,1,b),Ds(h,1,this.maximumMonthLength())):(c=Ua(c,1,b),h=Ua(h,1,this.maximumMonthLength()));const v=g.find(([,_])=>_.monthIndex===c);if(v===void 0)throw new RangeError(`Invalid month ${c} in Chinese year ${a}`);f=wc(v[0].replace("bis",""),v[0].indexOf("bis")!==-1)}else{const y=this.getMonthList(a,t);let g=f.replace("L","bis").slice(1);g[0]==="0"&&(g=g.slice(1));const b=y[g];if(!b)throw new RangeError(`Unmatched monthCode ${f} in Chinese year ${a}`);if(c!==b.monthIndex)throw new RangeError(`monthCode ${f} doesn't correspond to month ${c} in Chinese year ${a}`)}return{...e,year:a,eraYear:m,month:c,monthCode:f,day:h}}}class s4 extends hM{constructor(){super(...arguments),this.id="chinese"}}class a4 extends hM{constructor(){super(...arguments),this.id="dangi"}}const o4={helper:void 0,dateFromFields(i,e,t){const r=Bn(e),n=new bn,a=sr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:c,month:s,day:h}=this.helper.calendarToIsoDate(a,r,n),f=Ho(c,s,h,t);return n.setObject(f),f},yearMonthFromFields(i,e,t){const r=Bn(e),n=new bn,a=sr(i,["era","eraYear","month","monthCode","year"],[]),{year:c,month:s,day:h}=this.helper.calendarToIsoDate({...a,day:1},r,n),f=zm(c,s,t,h);return n.setObject(f),f},monthDayFromFields(i,e,t){const r=Bn(e),n=new bn,a=sr(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:c,month:s,day:h}=this.helper.monthDayFromFields(a,r,n),f=Nm(s,h,t,c);return n.setObject(f),f},fields(i){let e=i;return A0.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},r={...e},{month:n,monthCode:a,year:c,era:s,eraYear:h,...f}=t,{month:m,monthCode:y,year:g,era:b,eraYear:v}=r;return m===void 0&&y===void 0&&(f.month=n,f.monthCode=a),g===void 0&&b===void 0&&v===void 0&&(f.year=c),{...f,...r}},dateAdd(i,e,t,r,n,a,c){const s=bn.getCacheForObject(i),h=this.helper.temporalToCalendarDate(i,s),f=this.helper.addCalendar(h,{years:e,months:t,weeks:r,days:n},a,s),m=this.helper.calendarToIsoDate(f,"constrain",s),{year:y,month:g,day:b}=m,v=Ho(y,g,b,c);return new bn(s).setObject(v),v},dateUntil(i,e,t){const r=bn.getCacheForObject(i),n=bn.getCacheForObject(e),a=this.helper.temporalToCalendarDate(i,r),c=this.helper.temporalToCalendarDate(e,n);return this.helper.untilCalendar(a,c,t,r)},year(i){const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=bn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>An.iso8601.dayOfWeek(i),dayOfYear(i){const e=bn.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),r=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(r,t,e)+1},weekOfYear:i=>An.iso8601.weekOfYear(i),daysInWeek:i=>An.iso8601.daysInWeek(i),daysInMonth(i){const e=bn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),r=this.helper.maximumMonthLength(t);if(r===this.helper.minimumMonthLength(t))return r;const n=this.helper.startOfCalendarMonth(t),a=this.helper.addMonthsCalendar(n,1,"constrain",e);return this.helper.calendarDaysUntil(n,a,e)},daysInYear(i){let e=i;fs(e,oi)||(e=Wr(e));const t=bn.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t),n=this.helper.startOfCalendarYear(r),a=this.helper.addCalendar(n,{years:1},"constrain",t);return this.helper.calendarDaysUntil(n,a,t)},monthsInYear(i){const e=bn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;fs(e,oi)||(e=Wr(e));const t=bn.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(r,t)}};for(const i of[HN,XN,e4,QN,JN,s4,a4,t4,KN,i4,r4,n4,uM,GN,qN,WN,YN,ZN]){const e=new i;An[e.id]={...o4,helper:e}}class dg{constructor(e,t,r,n=$n()){const a=Yr(e),c=Yr(t),s=Yr(r),h=Ts(n);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");Ak(this,a,c,s,h)}get calendar(){if(!gr(this))throw new TypeError("invalid receiver");return Q(this,At)}get era(){if(!gr(this))throw new TypeError("invalid receiver");return xv(Q(this,At),this)}get eraYear(){if(!gr(this))throw new TypeError("invalid receiver");return bv(Q(this,At),this)}get year(){if(!gr(this))throw new TypeError("invalid receiver");return gv(Q(this,At),this)}get month(){if(!gr(this))throw new TypeError("invalid receiver");return yv(Q(this,At),this)}get monthCode(){if(!gr(this))throw new TypeError("invalid receiver");return ag(Q(this,At),this)}get day(){if(!gr(this))throw new TypeError("invalid receiver");return vv(Q(this,At),this)}get dayOfWeek(){if(!gr(this))throw new TypeError("invalid receiver");return h_(Q(this,At),this)}get dayOfYear(){if(!gr(this))throw new TypeError("invalid receiver");return p_(Q(this,At),this)}get weekOfYear(){if(!gr(this))throw new TypeError("invalid receiver");return f_(Q(this,At),this)}get daysInWeek(){if(!gr(this))throw new TypeError("invalid receiver");return m_(Q(this,At),this)}get daysInMonth(){if(!gr(this))throw new TypeError("invalid receiver");return og(Q(this,At),this)}get daysInYear(){if(!gr(this))throw new TypeError("invalid receiver");return wv(Q(this,At),this)}get monthsInYear(){if(!gr(this))throw new TypeError("invalid receiver");return _v(Q(this,At),this)}get inLeapYear(){if(!gr(this))throw new TypeError("invalid receiver");return Cv(Q(this,At),this)}with(e,t){if(!gr(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");Sp(e);const r=Q(this,At),n=qn(r,["day","month","monthCode","year"]),a=sr(e,n,"partial");if(!a)throw new TypeError("invalid date-like");let c=sr(this,n,[]);return c=Nd(r,c,a),c=sr(c,n,[]),vu(r,c,or(t))}withCalendar(e){if(!gr(this))throw new TypeError("invalid receiver");const t=Ts(e);return new dg(Q(this,oi),Q(this,di),Q(this,pi),t)}add(e,t){if(!gr(this))throw new TypeError("invalid receiver");const r=ip(e),n=or(t);return aa(Q(this,At),this,r,n)}subtract(e,t){if(!gr(this))throw new TypeError("invalid receiver");const r=Uk(ip(e)),n=or(t);return aa(Q(this,At),this,r,n)}until(e,t){if(!gr(this))throw new TypeError("invalid receiver");return UT("until",this,e,t)}since(e,t){if(!gr(this))throw new TypeError("invalid receiver");return UT("since",this,e,t)}equals(e){if(!gr(this))throw new TypeError("invalid receiver");const t=Wr(e);for(const r of[oi,di,pi])if(Q(this,r)!==Q(t,r))return!1;return lg(Q(this,At),Q(t,At))}toString(e){if(!gr(this))throw new TypeError("invalid receiver");return LT(this,rg(or(e)))}toJSON(){if(!gr(this))throw new TypeError("invalid receiver");return LT(this)}toLocaleString(e,t){if(!gr(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!gr(this))throw new TypeError("invalid receiver");const t=Q(this,oi),r=Q(this,di),n=Q(this,pi),a=Q(this,At);if(e===void 0)return $a(t,r,n,0,0,0,0,0,0,a);const c=yc(e);return $a(t,r,n,Q(c,Wi),Q(c,Yi),Q(c,Zi),Q(c,Xi),Q(c,Ki),Q(c,Qi),a)}toZonedDateTime(e){if(!gr(this))throw new TypeError("invalid receiver");let t,r;if(rn(e)){const v=e.timeZone;v===void 0?t=ca(e):(t=ca(v),r=e.plainTime)}else t=ca(e);const n=Q(this,oi),a=Q(this,di),c=Q(this,pi),s=Q(this,At);let h=0,f=0,m=0,y=0,g=0,b=0;return r!==void 0&&(r=yc(r),h=Q(r,Wi),f=Q(r,Yi),m=Q(r,Zi),y=Q(r,Xi),g=Q(r,Ki),b=Q(r,Qi)),Is(Q(oa(t,$a(n,a,c,h,f,m,y,g,b,s),"compatible"),zi),t,s)}toPlainYearMonth(){if(!gr(this))throw new TypeError("invalid receiver");const e=Q(this,At);return zd(e,sr(this,qn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!gr(this))throw new TypeError("invalid receiver");const e=Q(this,At);return cp(e,sr(this,qn(e,["day","monthCode"]),[]))}getISOFields(){if(!gr(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=or(t);return gr(e)?(Bn(r),Ho(Q(e,oi),Q(e,di),Q(e,pi),Q(e,At))):Wr(e,r)}static compare(e,t){const r=Wr(e),n=Wr(t);return uu(Q(r,oi),Q(r,di),Q(r,pi),Q(n,oi),Q(n,di),Q(n,pi))}}Bl(dg,"Temporal.PlainDate");class hg{constructor(e,t,r,n=0,a=0,c=0,s=0,h=0,f=0,m=$n()){const y=Yr(e),g=Yr(t),b=Yr(r),v=Yr(n),_=Yr(a),T=Yr(c),k=Yr(s),w=Yr(h),E=Yr(f),A=Ts(m);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");Ik(this,y,g,b,v,_,T,k,w,E,A)}get calendar(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,At)}get year(){if(!er(this))throw new TypeError("invalid receiver");return gv(Q(this,At),this)}get month(){if(!er(this))throw new TypeError("invalid receiver");return yv(Q(this,At),this)}get monthCode(){if(!er(this))throw new TypeError("invalid receiver");return ag(Q(this,At),this)}get day(){if(!er(this))throw new TypeError("invalid receiver");return vv(Q(this,At),this)}get hour(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Wi)}get minute(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Yi)}get second(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Zi)}get millisecond(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Xi)}get microsecond(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Ki)}get nanosecond(){if(!er(this))throw new TypeError("invalid receiver");return Q(this,Qi)}get era(){if(!er(this))throw new TypeError("invalid receiver");return xv(Q(this,At),this)}get eraYear(){if(!er(this))throw new TypeError("invalid receiver");return bv(Q(this,At),this)}get dayOfWeek(){if(!er(this))throw new TypeError("invalid receiver");return h_(Q(this,At),this)}get dayOfYear(){if(!er(this))throw new TypeError("invalid receiver");return p_(Q(this,At),this)}get weekOfYear(){if(!er(this))throw new TypeError("invalid receiver");return f_(Q(this,At),this)}get daysInWeek(){if(!er(this))throw new TypeError("invalid receiver");return m_(Q(this,At),this)}get daysInYear(){if(!er(this))throw new TypeError("invalid receiver");return wv(Q(this,At),this)}get daysInMonth(){if(!er(this))throw new TypeError("invalid receiver");return og(Q(this,At),this)}get monthsInYear(){if(!er(this))throw new TypeError("invalid receiver");return _v(Q(this,At),this)}get inLeapYear(){if(!er(this))throw new TypeError("invalid receiver");return Cv(Q(this,At),this)}with(e,t){if(!er(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");Sp(e);const r=or(t),n=Q(this,At),a=qn(n,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),c=sr(e,a,"partial");if(!c)throw new TypeError("invalid date-time-like");let s=sr(this,a,[]);s=Nd(n,s,c),s=sr(s,a,[]);const{year:h,month:f,day:m,hour:y,minute:g,second:b,millisecond:v,microsecond:_,nanosecond:T}=sg(n,s,r);return $a(h,f,m,y,g,b,v,_,T,n)}withPlainTime(e){if(!er(this))throw new TypeError("invalid receiver");const t=Q(this,oi),r=Q(this,di),n=Q(this,pi),a=Q(this,At);if(e===void 0)return $a(t,r,n,0,0,0,0,0,0,a);const c=yc(e);return $a(t,r,n,Q(c,Wi),Q(c,Yi),Q(c,Zi),Q(c,Xi),Q(c,Ki),Q(c,Qi),a)}withPlainDate(e){if(!er(this))throw new TypeError("invalid receiver");const t=Wr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi);let c=Q(t,At);const s=Q(this,Wi),h=Q(this,Yi),f=Q(this,Zi),m=Q(this,Xi),y=Q(this,Ki),g=Q(this,Qi);return c=Lk(Q(this,At),c),$a(r,n,a,s,h,f,m,y,g,c)}withCalendar(e){if(!er(this))throw new TypeError("invalid receiver");const t=Ts(e);return new hg(Q(this,oi),Q(this,di),Q(this,pi),Q(this,Wi),Q(this,Yi),Q(this,Zi),Q(this,Xi),Q(this,Ki),Q(this,Qi),t)}add(e,t){if(!er(this))throw new TypeError("invalid receiver");return ZT("add",this,e,t)}subtract(e,t){if(!er(this))throw new TypeError("invalid receiver");return ZT("subtract",this,e,t)}until(e,t){if(!er(this))throw new TypeError("invalid receiver");return VT("until",this,e,t)}since(e,t){if(!er(this))throw new TypeError("invalid receiver");return VT("since",this,e,t)}round(e){if(!er(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?hp("smallestUnit",e):or(e),r=hs(t,"smallestUnit","time",Ld,["day"]),n=Ea(t,"halfExpand"),a=kc(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let c=Q(this,oi),s=Q(this,di),h=Q(this,pi),f=Q(this,Wi),m=Q(this,Yi),y=Q(this,Zi),g=Q(this,Xi),b=Q(this,Ki),v=Q(this,Qi);return{year:c,month:s,day:h,hour:f,minute:m,second:y,millisecond:g,microsecond:b,nanosecond:v}=S_(c,s,h,f,m,y,g,b,v,a,r,n),$a(c,s,h,f,m,y,g,b,v,Q(this,At))}equals(e){if(!er(this))throw new TypeError("invalid receiver");const t=bd(e);for(const r of[oi,di,pi,Wi,Yi,Zi,Xi,Ki,Qi])if(Q(this,r)!==Q(t,r))return!1;return lg(Q(this,At),Q(t,At))}toString(e){if(!er(this))throw new TypeError("invalid receiver");const t=or(e),{precision:r,unit:n,increment:a}=ng(t);return NT(this,r,rg(t),{unit:n,increment:a,roundingMode:Ea(t,"trunc")})}toJSON(){if(!er(this))throw new TypeError("invalid receiver");return NT(this,"auto")}toLocaleString(e,t){if(!er(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!er(this))throw new TypeError("invalid receiver");const r=ca(e);return Is(Q(oa(r,this,Lm(or(t))),zi),r,Q(this,At))}toPlainDate(){if(!er(this))throw new TypeError("invalid receiver");return up(this)}toPlainYearMonth(){if(!er(this))throw new TypeError("invalid receiver");const e=Q(this,At);return zd(e,sr(this,qn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!er(this))throw new TypeError("invalid receiver");const e=Q(this,At);return cp(e,sr(this,qn(e,["day","monthCode"]),[]))}toPlainTime(){if(!er(this))throw new TypeError("invalid receiver");return g_(this)}getISOFields(){if(!er(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoHour:Q(this,Wi),isoMicrosecond:Q(this,Ki),isoMillisecond:Q(this,Xi),isoMinute:Q(this,Yi),isoMonth:Q(this,di),isoNanosecond:Q(this,Qi),isoSecond:Q(this,Zi),isoYear:Q(this,oi)}}static from(e,t){const r=or(t);return er(e)?(Bn(r),$a(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,At))):bd(e,r)}static compare(e,t){const r=bd(e),n=bd(t);for(const a of[oi,di,pi,Wi,Yi,Zi,Xi,Ki,Qi]){const c=Q(r,a),s=Q(n,a);if(c!==s)return kd(c-s)}return 0}}Bl(hg,"Temporal.PlainDateTime");let P_=class om{constructor(e=0,t=0,r=0,n=0,a=0,c=0,s=0,h=0,f=0,m=0){const y=os(e),g=os(t),b=os(r),v=os(n),_=os(a),T=os(c),k=os(s),w=os(h),E=os(f),A=os(m);kv(y,g,b,v,_,T,k,w,E,A),$l(this),tr(this,Qs,y),tr(this,xs,g),tr(this,wa,b),tr(this,Js,v),tr(this,ea,_),tr(this,ta,T),tr(this,ia,k),tr(this,ra,w),tr(this,na,E),tr(this,sa,A)}get years(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,Qs)}get months(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,xs)}get weeks(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,wa)}get days(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,Js)}get hours(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,ea)}get minutes(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,ta)}get seconds(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,ia)}get milliseconds(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,ra)}get microseconds(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,na)}get nanoseconds(){if(!kn(this))throw new TypeError("invalid receiver");return Q(this,sa)}get sign(){if(!kn(this))throw new TypeError("invalid receiver");return Il(Q(this,Qs),Q(this,xs),Q(this,wa),Q(this,Js),Q(this,ea),Q(this,ta),Q(this,ia),Q(this,ra),Q(this,na),Q(this,sa))}get blank(){if(!kn(this))throw new TypeError("invalid receiver");return Il(Q(this,Qs),Q(this,xs),Q(this,wa),Q(this,Js),Q(this,ea),Q(this,ta),Q(this,ia),Q(this,ra),Q(this,na),Q(this,sa))===0}with(e){if(!kn(this))throw new TypeError("invalid receiver");const t=sr(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:r=Q(this,Qs),months:n=Q(this,xs),weeks:a=Q(this,wa),days:c=Q(this,Js),hours:s=Q(this,ea),minutes:h=Q(this,ta),seconds:f=Q(this,ia),milliseconds:m=Q(this,ra),microseconds:y=Q(this,na),nanoseconds:g=Q(this,sa)}=t;return new om(r,n,a,c,s,h,f,m,y,g)}negated(){if(!kn(this))throw new TypeError("invalid receiver");return Uk(this)}abs(){if(!kn(this))throw new TypeError("invalid receiver");return new om(Math.abs(Q(this,Qs)),Math.abs(Q(this,xs)),Math.abs(Q(this,wa)),Math.abs(Q(this,Js)),Math.abs(Q(this,ea)),Math.abs(Q(this,ta)),Math.abs(Q(this,ia)),Math.abs(Q(this,ra)),Math.abs(Q(this,na)),Math.abs(Q(this,sa)))}add(e,t){if(!kn(this))throw new TypeError("invalid receiver");return WT("add",this,e,t)}subtract(e,t){if(!kn(this))throw new TypeError("invalid receiver");return WT("subtract",this,e,t)}round(e){if(!kn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Q(this,Qs),r=Q(this,xs),n=Q(this,wa),a=Q(this,Js),c=Q(this,ea),s=Q(this,ta),h=Q(this,ia),f=Q(this,ra),m=Q(this,na),y=Q(this,sa),g=k1(t,r,n,a,c,s,h,f,m,y);const b=typeof e=="string"?hp("smallestUnit",e):or(e);let v=hs(b,"smallestUnit","datetime",void 0),_=!0;v||(_=!1,v="nanosecond"),g=Ha(g,v);let T=hs(b,"largestUnit","datetime",void 0,["auto"]),k=!0;if(T||(k=!1,T=g),T==="auto"&&(T=g),!_&&!k)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Ha(T,v)!==T)throw new RangeError(`largestUnit ${T} cannot be smaller than smallestUnit ${v}`);const w=Ea(b,"halfExpand"),E=d_(b,v);let A=e0(b);return{years:t,months:r,weeks:n,days:a}=Ty(t,r,n,a,T,A),{years:t,months:r,weeks:n,days:a,hours:c,minutes:s,seconds:h,milliseconds:f,microseconds:m,nanoseconds:y}=bu(t,r,n,a,c,s,h,f,m,y,E,v,w,A),{years:t,months:r,weeks:n,days:a,hours:c,minutes:s,seconds:h,milliseconds:f,microseconds:m,nanoseconds:y}=Xk(t,r,n,a,c,s,h,f,m,y,E,v,w,A),{years:t,months:r,weeks:n,days:a}=function(S,N,Y,Z,K,B){let F=S,O=N,R=Y,L=Z;const G=ji("%Temporal.Duration%"),V=Il(F,O,R,L,0,0,0,0,0,0);if(V===0)return{years:F,months:O,weeks:R,days:L};let $,q;B&&(q=Wr(B),$=Q(q,At));const W=new G(V),se=new G(0,V),fe=new G(0,0,V);switch(K){case"year":{if(!$)throw new RangeError("a starting point is required for years balancing");let re,le,Se;for({relativeTo:re,days:le}=Us($,q,W);Sr(L)>=Sr(le);)L-=le,F+=V,q=re,{relativeTo:re,days:le}=Us($,q,W);for({relativeTo:re,days:Se}=Us($,q,se);Sr(L)>=Sr(Se);)L-=Se,O+=V,q=re,{relativeTo:re,days:Se}=Us($,q,se);const ye=$.dateAdd;re=aa($,q,W,void 0,ye);const Ee=$.dateUntil,J=Ls(null);J.largestUnit="month";let ie=yu($,q,re,J,Ee),oe=Q(ie,xs);for(;Sr(O)>=Sr(oe);){O-=oe,F+=V,q=re,re=aa($,q,W,void 0,ye);const we=Ls(null);we.largestUnit="month",ie=yu($,q,re,we,Ee),oe=Q(ie,xs)}break}case"month":{if(!$)throw new RangeError("a starting point is required for months balancing");let re,le;for({relativeTo:re,days:le}=Us($,q,se);Sr(L)>=Sr(le);)L-=le,O+=V,q=re,{relativeTo:re,days:le}=Us($,q,se);break}case"week":{if(!$)throw new RangeError("a starting point is required for weeks balancing");let re,le;for({relativeTo:re,days:le}=Us($,q,fe);Sr(L)>=Sr(le);)L-=le,R+=V,q=re,{relativeTo:re,days:le}=Us($,q,fe);break}}return{years:F,months:O,weeks:R,days:L}}(t,r,n,a,T,A),bi(A)&&(A=P1(A,t,r,n,0)),{days:a,hours:c,minutes:s,seconds:h,milliseconds:f,microseconds:m,nanoseconds:y}=Va(a,c,s,h,f,m,y,T,A),new om(t,r,n,a,c,s,h,f,m,y)}total(e){if(!kn(this))throw new TypeError("invalid receiver");let t=Q(this,Qs),r=Q(this,xs),n=Q(this,wa),a=Q(this,Js),c=Q(this,ea),s=Q(this,ta),h=Q(this,ia),f=Q(this,ra),m=Q(this,na),y=Q(this,sa);if(e===void 0)throw new TypeError("options argument is required");const g=typeof e=="string"?hp("unit",e):or(e),b=hs(g,"unit","datetime",Ld),v=e0(g);let _;({years:t,months:r,weeks:n,days:a}=Ty(t,r,n,a,b,v)),bi(v)&&(_=P1(v,t,r,n,0)),{days:a,hours:c,minutes:s,seconds:h,milliseconds:f,microseconds:m,nanoseconds:y}=Va(a,c,s,h,f,m,y,b,_);const{total:T}=bu(t,r,n,a,c,s,h,f,m,y,1,b,"trunc",v);return T}toString(e){if(!kn(this))throw new TypeError("invalid receiver");const t=or(e),{precision:r,unit:n,increment:a}=ng(t);if(r==="minute")throw new RangeError('smallestUnit must not be "minute"');return ob(this,r,{unit:n,increment:a,roundingMode:Ea(t,"trunc")})}toJSON(){if(!kn(this))throw new TypeError("invalid receiver");return ob(this)}toLocaleString(e,t){if(!kn(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),ob(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return kn(e)?new om(Q(e,Qs),Q(e,xs),Q(e,wa),Q(e,Js),Q(e,ea),Q(e,ta),Q(e,ia),Q(e,ra),Q(e,na),Q(e,sa)):ip(e)}static compare(e,t,r){const n=ip(e),a=ip(t),c=e0(or(r)),s=Q(n,Qs),h=Q(n,xs),f=Q(n,wa);let m=Q(n,Js);const y=Q(n,ea),g=Q(n,ta),b=Q(n,ia),v=Q(n,ra),_=Q(n,na);let T=Q(n,sa);const k=Q(a,Qs),w=Q(a,xs),E=Q(a,wa);let A=Q(a,Js);const M=Q(a,ea),S=Q(a,ta),N=Q(a,ia),Y=Q(a,ra),Z=Q(a,na);let K=Q(a,sa);const B=BT(c,s,h,f,m),F=BT(c,k,w,E,A);s===0&&k===0&&h===0&&w===0&&f===0&&E===0||({days:m}=Ty(s,h,f,m,"day",c),{days:A}=Ty(k,w,E,A,"day",c));const O=dp(m,y,g,b,v,_,T,B),R=dp(A,M,S,N,Y,Z,K,F);return kd(de.toNumber(de.subtract(O,R)))}};Bl(P_,"Temporal.Duration");const l4=Object.create;class D_{constructor(e,t,r=$n(),n=1972){const a=Yr(e),c=Yr(t),s=Ts(r),h=Yr(n);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");Pk(this,a,c,s,h)}get monthCode(){if(!bs(this))throw new TypeError("invalid receiver");return ag(Q(this,At),this)}get day(){if(!bs(this))throw new TypeError("invalid receiver");return vv(Q(this,At),this)}get calendar(){if(!bs(this))throw new TypeError("invalid receiver");return Q(this,At)}with(e,t){if(!bs(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");Sp(e);const r=Q(this,At),n=qn(r,["day","month","monthCode","year"]),a=sr(e,n,"partial");if(!a)throw new TypeError("invalid month-day-like");let c=sr(this,n,[]);return c=Nd(r,c,a),c=sr(c,n,[]),cp(r,c,or(t))}equals(e){if(!bs(this))throw new TypeError("invalid receiver");const t=DT(e);for(const r of[di,pi,oi])if(Q(this,r)!==Q(t,r))return!1;return lg(Q(this,At),Q(t,At))}toString(e){if(!bs(this))throw new TypeError("invalid receiver");return zT(this,rg(or(e)))}toJSON(){if(!bs(this))throw new TypeError("invalid receiver");return zT(this)}toLocaleString(e,t){if(!bs(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!bs(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("argument should be an object");const t=Q(this,At),r=qn(t,["day","monthCode"]),n=sr(this,r,[]),a=qn(t,["year"]);let c=Nd(t,n,sr(e,a,[]));c=sr(c,[...new Set([...r,...a])],[]);const s=l4(null);return s.overflow="reject",vu(t,c,s)}getISOFields(){if(!bs(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=or(t);return bs(e)?(Bn(r),Nm(Q(e,di),Q(e,pi),Q(e,At),Q(e,oi))):DT(e,r)}}Bl(D_,"Temporal.PlainMonthDay");const R_=()=>new(ji("%Temporal.Instant%"))(k_()),eS=(i,e=au())=>{const t=ca(e),r=Ts(i);return ro(t,R_(),r)},db=(i=au())=>{const e=ca(i),t=$n();return ro(e,R_(),t)},tS=(i,e=au())=>{const t=ca(e),r=Ts(i);return Is(k_(),t,r)},au=()=>function(){const e=new xk("en-us");return new(ji("%Temporal.TimeZone%"))(Ek(e.resolvedOptions().timeZone))}(),pM={instant:R_,plainDateTime:eS,plainDateTimeISO:db,plainDate:(i,e=au())=>up(eS(i,e)),plainDateISO:(i=au())=>up(db(i)),plainTimeISO:(i=au())=>g_(db(i)),timeZone:au,zonedDateTime:tS,zonedDateTimeISO:(i=au())=>tS($n(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(pM,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const c4=Object.assign;function iS(i,e,t){let r=Q(i,Wi),n=Q(i,Yi),a=Q(i,Zi),c=Q(i,Xi),s=Q(i,Ki),h=Q(i,Qi);if(t){const{unit:f,increment:m,roundingMode:y}=t;({hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=E_(r,n,a,c,s,h,m,f,y))}return`${gn(r)}:${gn(n)}${Tv(a,c,s,h,e)}`}class Ad{constructor(e=0,t=0,r=0,n=0,a=0,c=0){const s=Yr(e),h=Yr(t),f=Yr(r),m=Yr(n),y=Yr(a),g=Yr(c);Ev(s,h,f,m,y,g),$l(this),tr(this,Wi,s),tr(this,Yi,h),tr(this,Zi,f),tr(this,Xi,m),tr(this,Ki,y),tr(this,Qi,g),tr(this,At,$n())}get calendar(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,At)}get hour(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Wi)}get minute(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Yi)}get second(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Zi)}get millisecond(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Xi)}get microsecond(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Ki)}get nanosecond(){if(!Mn(this))throw new TypeError("invalid receiver");return Q(this,Qi)}with(e,t){if(!Mn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");Sp(e);const r=_0(e,"partial"),n=Bn(or(t)),a=_0(this);let{hour:c,minute:s,second:h,millisecond:f,microsecond:m,nanosecond:y}=c4(a,r);return{hour:c,minute:s,second:h,millisecond:f,microsecond:m,nanosecond:y}=fv(c,s,h,f,m,y,n),new Ad(c,s,h,f,m,y)}add(e){if(!Mn(this))throw new TypeError("invalid receiver");return XT("add",this,e)}subtract(e){if(!Mn(this))throw new TypeError("invalid receiver");return XT("subtract",this,e)}until(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return HT("until",this,e,t)}since(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return HT("since",this,e,t)}round(e){if(!Mn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?hp("smallestUnit",e):or(e),r=hs(t,"smallestUnit","time",Ld),n=Ea(t,"halfExpand"),a=kc(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let c=Q(this,Wi),s=Q(this,Yi),h=Q(this,Zi),f=Q(this,Xi),m=Q(this,Ki),y=Q(this,Qi);return{hour:c,minute:s,second:h,millisecond:f,microsecond:m,nanosecond:y}=E_(c,s,h,f,m,y,a,r,n),new Ad(c,s,h,f,m,y)}equals(e){if(!Mn(this))throw new TypeError("invalid receiver");const t=yc(e);for(const r of[Wi,Yi,Zi,Xi,Ki,Qi])if(Q(this,r)!==Q(t,r))return!1;return!0}toString(e){if(!Mn(this))throw new TypeError("invalid receiver");const t=or(e),{precision:r,unit:n,increment:a}=ng(t);return iS(this,r,{unit:n,increment:a,roundingMode:Ea(t,"trunc")})}toJSON(){if(!Mn(this))throw new TypeError("invalid receiver");return iS(this,"auto")}toLocaleString(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!Mn(this))throw new TypeError("invalid receiver");const t=Wr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi),c=Q(t,At);return $a(r,n,a,Q(this,Wi),Q(this,Yi),Q(this,Zi),Q(this,Xi),Q(this,Ki),Q(this,Qi),c)}toZonedDateTime(e){if(!Mn(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const r=Wr(t),n=e.timeZone;if(n===void 0)throw new TypeError("missing timeZone property");const a=ca(n),c=Q(r,oi),s=Q(r,di),h=Q(r,pi),f=Q(r,At),m=Q(this,Wi),y=Q(this,Yi),g=Q(this,Zi),b=Q(this,Xi),v=Q(this,Ki),_=Q(this,Qi);return Is(Q(oa(a,new(ji("%Temporal.PlainDateTime%"))(c,s,h,m,y,g,b,v,_,f),"compatible"),zi),a,f)}getISOFields(){if(!Mn(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoHour:Q(this,Wi),isoMicrosecond:Q(this,Ki),isoMillisecond:Q(this,Xi),isoMinute:Q(this,Yi),isoNanosecond:Q(this,Qi),isoSecond:Q(this,Zi)}}static from(e,t){const r=Bn(or(t));return Mn(e)?new Ad(Q(e,Wi),Q(e,Yi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi)):yc(e,r)}static compare(e,t){const r=yc(e),n=yc(t);for(const a of[Wi,Yi,Zi,Xi,Ki,Qi]){const c=Q(r,a),s=Q(n,a);if(c!==s)return kd(c-s)}return 0}}Bl(Ad,"Temporal.PlainTime");class L_{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=y_(e);$l(this),tr(this,iu,t)}get id(){if(!xl(this))throw new TypeError("invalid receiver");return Ui(this)}getOffsetNanosecondsFor(e){if(!xl(this))throw new TypeError("invalid receiver");const t=_l(e),r=Q(this,iu);return am(r)?jd(r):mc(Q(t,zi),r)}getOffsetStringFor(e){if(!xl(this))throw new TypeError("invalid receiver");return M1(this,_l(e))}getPlainDateTimeFor(e,t=$n()){return ro(this,_l(e),Ts(t))}getInstantFor(e,t){if(!xl(this))throw new TypeError("invalid receiver");return oa(this,bd(e),Lm(or(t)))}getPossibleInstantsFor(e){if(!xl(this))throw new TypeError("invalid receiver");const t=bd(e),r=ji("%Temporal.Instant%"),n=Q(this,iu);if(am(n)){const a=xu(Q(t,oi),Q(t,di),Q(t,pi),Q(t,Wi),Q(t,Yi),Q(t,Zi),Q(t,Xi),Q(t,Ki),Q(t,Qi));if(a===null)throw new RangeError("DateTime outside of supported range");const c=jd(n);return[new r(de.subtract(a,de.BigInt(c)))]}return function(c,s,h,f,m,y,g,b,v,_){const T=xu(s,h,f,m,y,g,b,v,_);if(T===null)throw new RangeError("DateTime outside of supported range");let k=de.subtract(T,gu);de.lessThan(k,Im)&&(k=T);let w=de.add(T,gu);de.greaterThan(w,Pm)&&(w=T);const E=mc(k,c),A=mc(w,c);return(E===A?[E]:[E,A]).map(M=>{const S=de.subtract(T,de.BigInt(M)),N=Fk(S,c);if(s===N.year&&h===N.month&&f===N.day&&m===N.hour&&y===N.minute&&g===N.second&&b===N.millisecond&&v===N.microsecond&&_===N.nanosecond)return S}).filter(M=>M!==void 0)}(n,Q(t,oi),Q(t,di),Q(t,pi),Q(t,Wi),Q(t,Yi),Q(t,Zi),Q(t,Xi),Q(t,Ki),Q(t,Qi)).map(a=>new r(a))}getNextTransition(e){if(!xl(this))throw new TypeError("invalid receiver");const t=_l(e),r=Q(this,iu);if(am(r)||r==="UTC")return null;let n=Q(t,zi);const a=ji("%Temporal.Instant%");return n=function(s,h){const f=de.add(s,_k),m=FT(Bk(),f);let y=FT(wk,s);const g=mc(y,h);let b=y,v=g;for(;g===v&&de.lessThan(de.BigInt(y),m);)b=de.add(y,Ck),v=mc(b,h),g===v&&(y=b);return g===v?null:Jk(_=>mc(_,h),y,b,g,v)}(n,r),n===null?null:new a(n)}getPreviousTransition(e){if(!xl(this))throw new TypeError("invalid receiver");const t=_l(e),r=Q(this,iu);if(am(r)||r==="UTC")return null;let n=Q(t,zi);const a=ji("%Temporal.Instant%");return n=$k(n,r),n===null?null:new a(n)}toString(){if(!xl(this))throw new TypeError("invalid receiver");return Ui(Q(this,iu))}toJSON(){if(!xl(this))throw new TypeError("invalid receiver");return Ui(this)}static from(e){return ca(e)}}Bl(L_,"Temporal.TimeZone");const u4=Object.create;class N_{constructor(e,t,r=$n(),n=1){const a=Yr(e),c=Yr(t),s=Ts(r),h=Yr(n);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");Dk(this,a,c,s,h)}get year(){if(!Ir(this))throw new TypeError("invalid receiver");return gv(Q(this,At),this)}get month(){if(!Ir(this))throw new TypeError("invalid receiver");return yv(Q(this,At),this)}get monthCode(){if(!Ir(this))throw new TypeError("invalid receiver");return ag(Q(this,At),this)}get calendar(){if(!Ir(this))throw new TypeError("invalid receiver");return Q(this,At)}get era(){if(!Ir(this))throw new TypeError("invalid receiver");return xv(Q(this,At),this)}get eraYear(){if(!Ir(this))throw new TypeError("invalid receiver");return bv(Q(this,At),this)}get daysInMonth(){if(!Ir(this))throw new TypeError("invalid receiver");return og(Q(this,At),this)}get daysInYear(){if(!Ir(this))throw new TypeError("invalid receiver");return wv(Q(this,At),this)}get monthsInYear(){if(!Ir(this))throw new TypeError("invalid receiver");return _v(Q(this,At),this)}get inLeapYear(){if(!Ir(this))throw new TypeError("invalid receiver");return Cv(Q(this,At),this)}with(e,t){if(!Ir(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid argument");Sp(e);const r=Q(this,At),n=qn(r,["month","monthCode","year"]),a=sr(e,n,"partial");if(!a)throw new TypeError("invalid year-month-like");let c=sr(this,n,[]);return c=Nd(r,c,a),c=sr(c,n,[]),zd(r,c,or(t))}add(e,t){if(!Ir(this))throw new TypeError("invalid receiver");return KT("add",this,e,t)}subtract(e,t){if(!Ir(this))throw new TypeError("invalid receiver");return KT("subtract",this,e,t)}until(e,t){if(!Ir(this))throw new TypeError("invalid receiver");return GT("until",this,e,t)}since(e,t){if(!Ir(this))throw new TypeError("invalid receiver");return GT("since",this,e,t)}equals(e){if(!Ir(this))throw new TypeError("invalid receiver");const t=nm(e);for(const r of[oi,di,pi])if(Q(this,r)!==Q(t,r))return!1;return lg(Q(this,At),Q(t,At))}toString(e){if(!Ir(this))throw new TypeError("invalid receiver");return jT(this,rg(or(e)))}toJSON(){if(!Ir(this))throw new TypeError("invalid receiver");return jT(this)}toLocaleString(e,t){if(!Ir(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Ir(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("argument should be an object");const t=Q(this,At),r=qn(t,["monthCode","year"]),n=sr(this,r,[]),a=qn(t,["day"]);let c=Nd(t,n,sr(e,a,[]));c=sr(c,[...new Set([...r,...a])],[]);const s=u4(null);return s.overflow="reject",vu(t,c,s)}getISOFields(){if(!Ir(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=or(t);return Ir(e)?(Bn(r),zm(Q(e,oi),Q(e,di),Q(e,At),Q(e,pi))):nm(e,r)}static compare(e,t){const r=nm(e),n=nm(t);return uu(Q(r,oi),Q(r,di),Q(r,pi),Q(n,oi),Q(n,di),Q(n,pi))}}Bl(N_,"Temporal.PlainYearMonth");class z_{constructor(e,t,r=$n()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Rk(this,gm(e),ca(t),Ts(r))}get calendar(){if(!bi(this))throw new TypeError("invalid receiver");return Q(this,At)}get timeZone(){if(!bi(this))throw new TypeError("invalid receiver");return Q(this,jr)}get year(){if(!bi(this))throw new TypeError("invalid receiver");return gv(Q(this,At),sn(this))}get month(){if(!bi(this))throw new TypeError("invalid receiver");return yv(Q(this,At),sn(this))}get monthCode(){if(!bi(this))throw new TypeError("invalid receiver");return ag(Q(this,At),sn(this))}get day(){if(!bi(this))throw new TypeError("invalid receiver");return vv(Q(this,At),sn(this))}get hour(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Wi)}get minute(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Yi)}get second(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Zi)}get millisecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Xi)}get microsecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Ki)}get nanosecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(sn(this),Qi)}get era(){if(!bi(this))throw new TypeError("invalid receiver");return xv(Q(this,At),sn(this))}get eraYear(){if(!bi(this))throw new TypeError("invalid receiver");return bv(Q(this,At),sn(this))}get epochSeconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return de.toNumber(de.divide(e,xc))}get epochMilliseconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return de.toNumber(de.divide(e,Co))}get epochMicroseconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return k0(de.divide(e,Or))}get epochNanoseconds(){if(!bi(this))throw new TypeError("invalid receiver");return k0(Q(this,zi))}get dayOfWeek(){if(!bi(this))throw new TypeError("invalid receiver");return h_(Q(this,At),sn(this))}get dayOfYear(){if(!bi(this))throw new TypeError("invalid receiver");return p_(Q(this,At),sn(this))}get weekOfYear(){if(!bi(this))throw new TypeError("invalid receiver");return f_(Q(this,At),sn(this))}get hoursInDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=sn(this),t=ji("%Temporal.PlainDateTime%"),r=Q(e,oi),n=Q(e,di),a=Q(e,pi),c=new t(r,n,a,0,0,0,0,0,0),s=Ed(r,n,a,0,0,0,1,"reject"),h=new t(s.year,s.month,s.day,0,0,0,0,0,0),f=Q(this,jr),m=Q(oa(f,c,"compatible"),zi),y=Q(oa(f,h,"compatible"),zi);return de.toNumber(de.subtract(y,m))/36e11}get daysInWeek(){if(!bi(this))throw new TypeError("invalid receiver");return m_(Q(this,At),sn(this))}get daysInMonth(){if(!bi(this))throw new TypeError("invalid receiver");return og(Q(this,At),sn(this))}get daysInYear(){if(!bi(this))throw new TypeError("invalid receiver");return wv(Q(this,At),sn(this))}get monthsInYear(){if(!bi(this))throw new TypeError("invalid receiver");return _v(Q(this,At),sn(this))}get inLeapYear(){if(!bi(this))throw new TypeError("invalid receiver");return Cv(Q(this,At),sn(this))}get offset(){if(!bi(this))throw new TypeError("invalid receiver");return M1(Q(this,jr),Q(this,Hs))}get offsetNanoseconds(){if(!bi(this))throw new TypeError("invalid receiver");return rl(Q(this,jr),Q(this,Hs))}with(e,t){if(!bi(this))throw new TypeError("invalid receiver");if(!rn(e))throw new TypeError("invalid zoned-date-time-like");Sp(e);const r=or(t),n=Lm(r),a=E1(r,"prefer"),c=Q(this,jr),s=Q(this,At),h=S1(qn(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),f=sr(e,h,"partial"),m=S1(h,"timeZone");let y=sr(this,m,["timeZone","offset"]);y=Nd(s,y,f),y=sr(y,m,["timeZone","offset"]);let{year:g,month:b,day:v,hour:_,minute:T,second:k,millisecond:w,microsecond:E,nanosecond:A}=sg(s,y,r);return Is(C0(g,b,v,_,T,k,w,E,A,"option",jd(y.offset),c,n,a,!1),Q(this,jr),s)}withPlainDate(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Wr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi);let c=Q(t,At);const s=sn(this),h=Q(s,Wi),f=Q(s,Yi),m=Q(s,Zi),y=Q(s,Xi),g=Q(s,Ki),b=Q(s,Qi);c=Lk(Q(this,At),c);const v=Q(this,jr);return Is(Q(oa(v,new(ji("%Temporal.PlainDateTime%"))(r,n,a,h,f,m,y,g,b,c),"compatible"),zi),v,c)}withPlainTime(e){if(!bi(this))throw new TypeError("invalid receiver");const t=ji("%Temporal.PlainTime%"),r=e===void 0?new t:yc(e),n=sn(this),a=Q(n,oi),c=Q(n,di),s=Q(n,pi),h=Q(this,At),f=Q(r,Wi),m=Q(r,Yi),y=Q(r,Zi),g=Q(r,Xi),b=Q(r,Ki),v=Q(r,Qi),_=Q(this,jr);return Is(Q(oa(_,new(ji("%Temporal.PlainDateTime%"))(a,c,s,f,m,y,g,b,v,h),"compatible"),zi),_,h)}withTimeZone(e){if(!bi(this))throw new TypeError("invalid receiver");const t=ca(e);return Is(Q(this,zi),t,Q(this,At))}withCalendar(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Ts(e);return Is(Q(this,zi),Q(this,jr),t)}add(e,t){if(!bi(this))throw new TypeError("invalid receiver");return QT("add",this,e,t)}subtract(e,t){if(!bi(this))throw new TypeError("invalid receiver");return QT("subtract",this,e,t)}until(e,t){if(!bi(this))throw new TypeError("invalid receiver");return qT("until",this,e,t)}since(e,t){if(!bi(this))throw new TypeError("invalid receiver");return qT("since",this,e,t)}round(e){if(!bi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?hp("smallestUnit",e):or(e),r=hs(t,"smallestUnit","time",Ld,["day"]),n=Ea(t,"halfExpand"),a=kc(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1),c=sn(this);let s=Q(c,oi),h=Q(c,di),f=Q(c,pi),m=Q(c,Wi),y=Q(c,Yi),g=Q(c,Zi),b=Q(c,Xi),v=Q(c,Ki),_=Q(c,Qi);const T=ji("%Temporal.PlainDateTime%"),k=Q(this,jr),w=Q(this,At),E=oa(k,new T(Q(c,oi),Q(c,di),Q(c,pi),0,0,0,0,0,0),"compatible"),A=To(E,k,w,0,0,0,1,0,0,0,0,0,0),M=de.subtract(A,de.BigInt(Q(E,zi)));if(de.equal(M,On))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:s,month:h,day:f,hour:m,minute:y,second:g,millisecond:b,microsecond:v,nanosecond:_}=S_(s,h,f,m,y,g,b,v,_,a,r,n,de.toNumber(M)),Is(C0(s,h,f,m,y,g,b,v,_,"option",rl(k,Q(this,Hs)),k,"compatible","prefer",!1),k,Q(this,At))}equals(e){if(!bi(this))throw new TypeError("invalid receiver");const t=sm(e),r=Q(this,zi),n=Q(t,zi);return!!de.equal(de.BigInt(r),de.BigInt(n))&&!!Nk(Q(this,jr),Q(t,jr))&&lg(Q(this,At),Q(t,At))}toString(e){if(!bi(this))throw new TypeError("invalid receiver");const t=or(e),{precision:r,unit:n,increment:a}=ng(t),c=Ea(t,"trunc");return OT(this,r,rg(t),function(h){return wu(h,"timeZoneName",["auto","never"],"auto")}(t),function(h){return wu(h,"offset",["auto","never"],"auto")}(t),{unit:n,increment:a,roundingMode:c})}toLocaleString(e,t){if(!bi(this))throw new TypeError("invalid receiver");return new qd(e,t).format(this)}toJSON(){if(!bi(this))throw new TypeError("invalid receiver");return OT(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=sn(this),t=ji("%Temporal.PlainDateTime%"),r=Q(this,At),n=new t(Q(e,oi),Q(e,di),Q(e,pi),0,0,0,0,0,0,r),a=Q(this,jr);return Is(Q(oa(a,n,"compatible"),zi),a,r)}toInstant(){if(!bi(this))throw new TypeError("invalid receiver");return new(ji("%Temporal.Instant%"))(Q(this,zi))}toPlainDate(){if(!bi(this))throw new TypeError("invalid receiver");return up(sn(this))}toPlainTime(){if(!bi(this))throw new TypeError("invalid receiver");return g_(sn(this))}toPlainDateTime(){if(!bi(this))throw new TypeError("invalid receiver");return sn(this)}toPlainYearMonth(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,At);return zd(e,sr(this,qn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,At);return cp(e,sr(this,qn(e,["day","monthCode"]),[]))}getISOFields(){if(!bi(this))throw new TypeError("invalid receiver");const e=sn(this),t=Q(this,jr);return{calendar:Q(this,At),isoDay:Q(e,pi),isoHour:Q(e,Wi),isoMicrosecond:Q(e,Ki),isoMillisecond:Q(e,Xi),isoMinute:Q(e,Yi),isoMonth:Q(e,di),isoNanosecond:Q(e,Qi),isoSecond:Q(e,Zi),isoYear:Q(e,oi),offset:M1(t,Q(this,Hs)),timeZone:t}}static from(e,t){const r=or(t);return bi(e)?(Bn(r),Lm(r),E1(r,"reject"),Is(Q(e,zi),Q(e,jr),Q(e,At))):sm(e,r)}static compare(e,t){const r=sm(e),n=sm(t),a=Q(r,zi),c=Q(n,zi);return de.lessThan(de.BigInt(a),de.BigInt(c))?-1:de.greaterThan(de.BigInt(a),de.BigInt(c))?1:0}}function sn(i){return ro(Q(i,jr),Q(i,Hs),Q(i,At))}Bl(z_,"Temporal.ZonedDateTime");var Gn=Object.freeze({__proto__:null,Instant:Ko,Calendar:I0,PlainDate:dg,PlainDateTime:hg,Duration:P_,PlainMonthDay:D_,Now:pM,PlainTime:Ad,TimeZone:L_,PlainYearMonth:N_,ZonedDateTime:z_});const d4=[Ko,I0,dg,hg,P_,D_,Ad,L_,N_,z_];for(const i of d4){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}const h4=i=>Object.entries(ER[i]).reduce((e,t)=>{let[r,n]=t;return e[`${i}-${r}`]=n,e},{}),p4=i=>Object.entries(i).map(e=>{let[t,r]=e;return`--${t}: ${r};`}).join(`
`),fM=i=>{let{colors:e=!1,theme:t=!1,layers:r=!1,spacers:n=!1,elevations:a=!1}=i;const c={colors:e,theme:t,layers:r,spacers:n,elevations:a},s=Object.keys(c).filter(h=>c[h]).map(h4).map(p4).join(`
`);return he.createElement(vt,{id:"3443925957",dynamic:[s]},[`html{${s};}`])};fM.propTypes={colors:X.bool,elevations:X.bool,layers:X.bool,spacers:X.bool,theme:X.bool};class f4 extends b3{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,Mm.batch(()=>{const r=this.observers,n=this.findMatchingObservers(this.queries);n.forEach(f=>f.observer.setOptions(f.defaultedQueryOptions,t));const a=n.map(f=>f.observer),c=Object.fromEntries(a.map(f=>[f.options.queryHash,f])),s=a.map(f=>f.getCurrentResult()),h=a.some((f,m)=>f!==r[m]);r.length===a.length&&!h||(this.observers=a,this.observersMap=c,this.result=s,this.hasListeners()&&(gT(r,a).forEach(f=>{f.destroy()}),gT(a,r).forEach(f=>{f.subscribe(m=>{this.onUpdate(f,m)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,r=new Map(t.map(b=>[b.options.queryHash,b])),n=e.map(b=>this.client.defaultQueryOptions(b)),a=n.flatMap(b=>{const v=r.get(b.queryHash);return v!=null?[{defaultedQueryOptions:b,observer:v}]:[]}),c=new Set(a.map(b=>b.defaultedQueryOptions.queryHash)),s=n.filter(b=>!c.has(b.queryHash)),h=new Set(a.map(b=>b.observer)),f=t.filter(b=>!h.has(b)),m=b=>{const v=this.client.defaultQueryOptions(b),_=this.observersMap[v.queryHash];return _??new sR(this.client,v)},y=s.map((b,v)=>{if(b.keepPreviousData){const _=f[v];if(_!==void 0)return{defaultedQueryOptions:b,observer:_}}return{defaultedQueryOptions:b,observer:m(b)}}),g=(b,v)=>n.indexOf(b.defaultedQueryOptions)-n.indexOf(v.defaultedQueryOptions);return a.concat(y).sort(g)}onUpdate(e,t){const r=this.observers.indexOf(e);r!==-1&&(this.result=nR(this.result,r,t),this.notify())}notify(){Mm.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}let m4=class extends b3{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),aR(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:oR(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){Mm.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,r,n,a;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(a=this.mutateOptions).onSettled)==null||n.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var c,s,h,f;(c=(s=this.mutateOptions).onError)==null||c.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(h=(f=this.mutateOptions).onSettled)==null||h.call(f,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:m})=>{m(this.currentResult)})})}};function g4({queries:i,context:e}){const t=Ws({context:e}),r=lR(),n=cR(),a=Ae.useMemo(()=>i.map(g=>{const b=t.defaultQueryOptions(g);return b._optimisticResults=r?"isRestoring":"optimistic",b}),[i,t,r]);a.forEach(g=>{uR(g),dR(g,n)}),hR(n);const[c]=Ae.useState(()=>new f4(t,a)),s=c.getOptimisticResult(a);w3(Ae.useCallback(g=>r?()=>{}:c.subscribe(Mm.batchCalls(g)),[c,r]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Ae.useEffect(()=>{c.setQueries(a,{listeners:!1})},[a,c]);const f=s.some((g,b)=>yT(a[b],g,r))?s.flatMap((g,b)=>{const v=a[b],_=c.getObservers()[b];if(v&&_){if(yT(v,g,r))return vT(v,_,n);pR(g,r)&&vT(v,_,n)}return[]}):[];if(f.length>0)throw Promise.all(f);const m=c.getQueries(),y=s.find((g,b)=>{var v,_;return fR({result:g,errorResetBoundary:n,useErrorBoundary:(v=(_=a[b])==null?void 0:_.useErrorBoundary)!=null?v:!1,query:m[b]})});if(y!=null&&y.error)throw y.error;return s}function Vl(i,e,t){const r=mR(i,e,t),n=Ws({context:r.context}),[a]=Ae.useState(()=>new m4(n,r));Ae.useEffect(()=>{a.setOptions(r)},[a,r]);const c=w3(Ae.useCallback(h=>a.subscribe(Mm.batchCalls(h)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=Ae.useCallback((h,f)=>{a.mutate(h,f).catch(y4)},[a]);if(c.error&&gR(a.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:s,mutateAsync:c.mutate}}function y4(){}const v4=i=>{let{execute:e,variables:t,singular:r,immediate:n,onComplete:a,onError:c}=i;const[s]=_3(e),[h,f]=Ae.useState({called:!!n,loading:!!n}),m=Ae.useRef(t),y=Ae.useRef([]),g=Ae.useCallback(()=>{y.current.forEach(_=>_.abort()),y.current=[]},[]),b=Ae.useCallback(()=>{g(),f(_=>({called:_.called,loading:!1,error:new yR({type:"aborted",message:"Aborted"})}))},[g]),v=Ae.useCallback(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f(w=>!w.called||!w.loading?{called:!0,loading:!0}:w),r&&g();const T=new AbortController;y.current.push(T),m.current={...m.current,..._};const k={variables:m.current,signal:T.signal,onComplete:a,onError:c};return s(k).then(w=>T.signal.aborted?new Promise(()=>{}):(f({called:!0,loading:!1,data:w}),w)).catch(w=>(T.signal.aborted||f({called:!0,loading:!1,error:w}),new Promise(()=>{})))},[g,a,c,r,s]);return Ae.useEffect(()=>(n&&v(),g),[]),{refetch:v,abort:b,...h}},x4={},mM=function(i){let{onComplete:e,onError:t,variables:r=x4,lazy:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=Ud(),[c]=_3(i,{warn:!0,name:"mutation"}),s=Ae.useCallback(b=>a.mutate(c,b),[a,c]),{refetch:h,called:f,loading:m,error:y,data:g}=v4({execute:s,variables:r,singular:!1,immediate:!n,onComplete:e,onError:t});return[h,{engine:a,called:f,loading:m,error:y,data:g}]},gM=i=>{let{children:e,open:t,dataTest:r}=i;return he.createElement("div",{"data-test":r,className:"jsx-3677374542 "+(ir({open:t})||"")},e,he.createElement(vt,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};gM.propTypes={children:X.node,dataTest:X.string,open:X.bool};const b4=()=>he.createElement("div",{className:"jsx-2503342345"},he.createElement(vt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),w4=()=>he.createElement("div",{className:"nodeArrow"},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},he.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),he.createElement(vt,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),yM=i=>{let{open:e,onOpen:t,onClose:r,dataTest:n}=i;const a=e?r:t;return he.createElement("div",{"data-test":n,onClick:c=>a&&a({open:!e},c),className:vt.dynamic([["375729792",[ze.grey400,ze.grey900,ze.grey100]]])+" "+(ir({open:e})||"")},he.createElement("span",{className:vt.dynamic([["375729792",[ze.grey400,ze.grey900,ze.grey100]]])},he.createElement(w4,null)),he.createElement(vt,{id:"375729792",dynamic:[ze.grey400,ze.grey900,ze.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${ze.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${ze.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${ze.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};yM.propTypes={dataTest:X.string.isRequired,open:X.bool,onClose:X.func,onOpen:X.func};const vM=i=>{let{open:e,className:t,component:r,children:n,icon:a,onOpen:c,onClose:s,dataTest:h="dhis2-uicore-node"}=i;const f=!!he.Children.toArray(n).filter(g=>g).length,m=!a&&f,y=!a&&!f;return he.createElement("div",{"data-test":h,className:"jsx-1433072554 "+(ir("node",t)||"")},a&&he.createElement("div",{"data-test":`${h}-icon`,className:"jsx-1433072554"},a),m&&he.createElement(yM,{open:e,onOpen:c,onClose:s,dataTest:`${h}-toggle`}),y&&he.createElement(b4,null),he.createElement("div",{"data-test":`${h}-content`,className:"jsx-1433072554"},he.createElement("div",{"data-test":`${h}-label`,className:"jsx-1433072554"},r),he.createElement(gM,{open:e,dataTest:`${h}-leaves`},n)),he.createElement(vt,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};vM.propTypes={children:X.node,className:X.string,component:X.element,dataTest:X.string,icon:X.node,open:X.bool,onClose:X.func,onOpen:X.func};const xM=(i,e)=>i.some(r=>e===r?!0:r.startsWith(`${e}/`)),_4=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),C4=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),T4={"No children match filter":"","Could not load children":"  ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},S4={"No children match filter":"Filtru neodpovdaj dn podzen","Could not load children":"Nelze nast podazen","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},E4={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},k4={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},M4={"No children match filter":"Ningn descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},A4={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},I4={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":" {{ ERRORMESSAGE }}"},P4={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},D4={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},R4={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"No foi possvel carregar os filhos","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},L4={"No children match filter":"  ,  ","Could not load children":"    ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},N4={"No children match filter":"  ',   ","Could not load children":"    '","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},z4={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},j4={"No children match filter":"     ","Could not load children":" ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},O4={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},F4={"No children match filter":"Khng c n v con ph hp vi b lc","Could not load children":"Khng th ti n v con","Error: {{ ERRORMESSAGE }}":"Li: {{ ERRORMESSAGE }}"},B4={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"{{ ERRORMESSAGE }}"},$4={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":""},Ys="default";be.addResources("ar",Ys,T4);be.addResources("cs",Ys,S4);be.addResources("en",Ys,E4);be.addResources("es",Ys,k4);be.addResources("es_419",Ys,M4);be.addResources("fr",Ys,A4);be.addResources("lo",Ys,I4);be.addResources("nb",Ys,P4);be.addResources("nl",Ys,D4);be.addResources("pt",Ys,R4);be.addResources("ru",Ys,L4);be.addResources("uk",Ys,N4);be.addResources("uz_Latn",Ys,z4);be.addResources("uz_UZ_Cyrl",Ys,j4);be.addResources("uz_UZ_Latn",Ys,O4);be.addResources("vi",Ys,F4);be.addResources("zh",Ys,B4);be.addResources("zh_CN",Ys,$4);const U4="[a-zA-Z][a-zA-Z0-9]{10}",V4=new RegExp(`(/${U4})+`),to=(i,e,t,r,n)=>{if(!V4.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${n}\``)},bM=i=>{let{children:e,dataTest:t}=i;return he.createElement("span",{"data-test":`${t}-error`,className:vt.dynamic([["3198585030",[ze.grey800,Bt.dp4,Jt.error]]])},e,he.createElement(vt,{id:"3198585030",dynamic:[ze.grey800,Bt.dp4,Jt.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${ze.grey800};margin:${Bt.dp4};color:${Jt.error};}`]))};bM.propTypes={children:X.any.isRequired,dataTest:X.string.isRequired};const H4=(i,e)=>e.some(t=>{const r=!t.match(new RegExp(`${i}$`)),n=t.match(new RegExp(i));return r&&n}),j_=i=>{let{checked:e,children:t,onChange:r,loading:n}=i;return he.createElement("span",{onClick:a=>{r({checked:!e},a)},className:vt.dynamic([["321503310",[ze.grey900,ze.teal700]]])+" "+(ir({checked:e,loading:n})||"")},t,he.createElement(vt,{id:"321503310",dynamic:[ze.grey900,ze.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${ze.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${ze.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};j_.propTypes={children:X.any.isRequired,checked:X.bool,loading:X.bool,onChange:X.func};const wM=i=>{let{children:e,loading:t,onToggleOpen:r}=i;return he.createElement(j_,{checked:!1,loading:t,onChange:r},e)};wM.propTypes={children:X.any.isRequired,onToggleOpen:X.func.isRequired,loading:X.bool};const _M=i=>{let{dataTest:e}=i;return he.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},he.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),he.createElement(vt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};_M.propTypes={dataTest:X.string.isRequired};const CM=i=>{let{dataTest:e}=i;return he.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},he.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},he.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),he.createElement(vt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};CM.propTypes={dataTest:X.string.isRequired};const TM=i=>{let{dataTest:e}=i;return he.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},he.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},he.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},he.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),he.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),he.createElement(vt,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};TM.propTypes={dataTest:X.string.isRequired};const SM=i=>{let{dataTest:e}=i;return he.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},he.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},he.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),he.createElement(vt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};SM.propTypes={dataTest:X.string.isRequired};const EM=i=>{let{loading:e,hasChildren:t,open:r,dataTest:n}=i;return e?he.createElement(_M,{dataTest:n}):t?r?he.createElement(TM,{dataTest:n}):he.createElement(CM,{dataTest:n}):he.createElement(SM,{dataTest:n})};EM.propTypes={dataTest:X.string.isRequired,hasChildren:X.bool,loading:X.bool,open:X.bool};const kM=i=>{let{checked:e,dataTest:t,hasChildren:r,indeterminate:n,children:a,loading:c,name:s,open:h,value:f,onChange:m}=i;const y=he.createElement(EM,{loading:c,open:h,hasChildren:r,dataTest:t}),g=he.createElement(he.Fragment,null,he.createElement("span",{className:"jsx-1000763175"},y),a,he.createElement(vt,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return he.createElement(he.Fragment,null,he.createElement(el,{dense:!0,checked:e,name:s,value:f,label:g,indeterminate:n,onChange:m}))};kM.propTypes={checked:X.bool.isRequired,children:X.any.isRequired,dataTest:X.string.isRequired,hasChildren:X.bool.isRequired,indeterminate:X.bool.isRequired,loading:X.bool.isRequired,name:X.string.isRequired,open:X.bool.isRequired,value:X.string.isRequired,onChange:X.func.isRequired};const s0=i=>{let{highlighted:e,children:t}=i;return he.createElement("div",{className:vt.dynamic([["1387769986",[ze.teal200]]])+" "+(ir({highlighted:e})||"")},he.createElement("span",{className:vt.dynamic([["1387769986",[ze.teal200]]])},t),he.createElement(vt,{id:"1387769986",dynamic:[ze.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${ze.teal200};padding-inline-end:4px;}`]))};s0.propTypes={children:X.node,highlighted:X.bool};const G4=i=>{let{selected:e,path:t,checked:r,singleSelection:n}=i;const a=e.indexOf(t);if(r&&a!==-1)return e;if(n&&r)return[t];if(r)return[...e,t];if(a===-1)return e;if(n)return[];if(e.indexOf(t)===0)return e.slice(1);const c=e.slice(0,a),s=e.slice(a+1);return[...c,...s]},MM=i=>{let{checked:e,children:t,dataTest:r,disableSelection:n,fullPath:a,hasChildren:c,hasSelectedDescendants:s,highlighted:h,loading:f,node:m,onChange:y,onToggleOpen:g,open:b,rootId:v,selected:_,singleSelection:T}=i;const k=(w,E)=>{let{checked:A}=w;const M=G4({path:a,selected:_,checked:A,singleSelection:T}),S={...m,path:a,checked:A,selected:M};y(S,E)};return n?he.createElement(s0,{highlighted:h},he.createElement(wM,{loading:f,onToggleOpen:g},t)):T?he.createElement(s0,{highlighted:h},he.createElement(j_,{checked:e,onChange:k,loading:f},t)):he.createElement(s0,{highlighted:h},he.createElement(kM,{dataTest:r,checked:e,name:"org-unit",value:m.id,loading:f,indeterminate:!e&&s,onChange:k,open:b,hasChildren:c},t))};MM.propTypes={children:X.any.isRequired,dataTest:X.string.isRequired,fullPath:X.string.isRequired,hasChildren:X.bool.isRequired,loading:X.bool.isRequired,node:X.shape({displayName:X.string.isRequired,id:X.string.isRequired,children:X.number,path:X.string}).isRequired,open:X.bool.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,onToggleOpen:X.func.isRequired,checked:X.bool,disableSelection:X.bool,hasSelectedDescendants:X.bool,highlighted:X.bool,selected:X.arrayOf(to),singleSelection:X.bool};const rS={styles:he.createElement(vt,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},AM=()=>he.createElement("div",{className:"jsx-2503342345"},he.createElement(ka,{extrasmall:!0,className:rS.className}),he.createElement("style",null,rS.styles),he.createElement(vt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),q4={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},W4=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:r}=i;const n=Ae.useRef(!1),{called:a,loading:c,error:s,data:h}=qa(q4,{variables:{id:e.id}}),f=Ae.useMemo(()=>{if(!h)return;if(!e.children)return[];const{orgUnit:m}=h;return t?m.children:C4(m.children)},[h,t]);return Ae.useEffect(()=>{r&&f&&!n.current&&(r({...e,children:f}),n.current=!0)},[r,f,n]),{called:a,loading:c,error:s||null,data:f}},Y4=i=>{let{orgChildren:e,filter:t,node:r}=i;return t!=null&&t.length?e.filter(n=>xM(t,`${r.path}/${n.id}`)):e},IM=i=>{let{node:e,autoExpandLoadingError:t,dataTest:r,disableSelection:n,expanded:a,filter:c,highlighted:s,isUserDataViewFallback:h,onChange:f,onChildrenLoaded:m,onCollapse:y,onExpand:g,parentPath:b,renderNodeLabel:v,rootId:_,selected:T,singleSelection:k,suppressAlphabeticalSorting:w,OrganisationUnitNode:E}=i;const A=W4({node:e,suppressAlphabeticalSorting:w,onComplete:m}),M=A.called&&!A.loading&&!A.error,S=M?Y4({orgChildren:A.data,filter:c,node:e}):[];return he.createElement(he.Fragment,null,A.loading&&he.createElement(AM,null),A.error&&`Error: ${A.error}`,M&&!S.length&&be.t("No children match filter"),!!S.length&&S.map(N=>{const Y=`${b}/${N.id}`;return he.createElement(E,{autoExpandLoadingError:t,dataTest:r,disableSelection:n,displayName:N.displayName,expanded:a,filter:c,highlighted:s,id:N.id,isUserDataViewFallback:h,key:Y,onChange:f,onChildrenLoaded:m,onCollapse:y,onExpand:g,path:Y,renderNodeLabel:v,rootId:_,selected:T,singleSelection:k,suppressAlphabeticalSorting:w})}))};IM.propTypes={OrganisationUnitNode:X.func.isRequired,dataTest:X.string.isRequired,node:X.object.isRequired,parentPath:X.string.isRequired,renderNodeLabel:X.func.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,disableSelection:X.bool,expanded:X.arrayOf(to),filter:X.arrayOf(to),highlighted:X.arrayOf(to),isUserDataViewFallback:X.bool,selected:X.arrayOf(to),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const Z4=i=>{let{path:e,expanded:t,onExpand:r,onCollapse:n,errorMessage:a,autoExpandLoadingError:c}=i;const s=c&&!!a,[h,f]=Ae.useState(!!a);Ae.useEffect(()=>{s&&!h&&(r({path:e}),f(!0))},[s,h]);const m=s&&!h||!!t.includes(e);return{open:m,onToggleOpen:()=>m?n({path:e}):r({path:e}),openedOnceDueToError:h}},X4={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},K4=(i,e)=>{let{displayName:t,isUserDataViewFallback:r}=e;if(!t)throw new Error('"displayName" is required');const n={id:i,isUserDataViewFallback:r},{loading:a,error:c,data:s={}}=qa(X4,{variables:n});return{loading:a,error:c||null,data:{id:i,displayName:t,...s.orgUnit}}},O_=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:r,displayName:n,expanded:a,highlighted:c,id:s,isUserDataViewFallback:h,path:f,renderNodeLabel:m,rootId:y,selected:g,singleSelection:b,filter:v,suppressAlphabeticalSorting:_,onChange:T,onChildrenLoaded:k,onCollapse:w,onExpand:E}=i;const A=K4(s,{isUserDataViewFallback:h,displayName:n}),M=_4(f,y),S={displayName:n,id:s,...A.data||{},path:M},N=!!S.children&&S.children>0,Y=H4(M,g),Z=c.includes(f),{open:K,onToggleOpen:B}=Z4({autoExpandLoadingError:e,errorMessage:A.error&&A.error.toString(),path:M,expanded:a,onExpand:E,onCollapse:w}),F=!!g.find(V=>V.match(new RegExp(`${M}$`))),O=m({disableSelection:r,hasChildren:N,hasSelectedDescendants:Y,loading:A.loading,error:A.error,selected:g,open:K,path:f,singleSelection:b,node:S,label:n,checked:F,highlighted:Z}),R=he.createElement(MM,{node:S,fullPath:f,open:K,loading:A.loading,checked:F,rootId:y,onChange:T,dataTest:`${t}-label`,selected:g,hasChildren:N,highlighted:Z,onToggleOpen:B,disableSelection:r,singleSelection:b,hasSelectedDescendants:Y},O),L=N&&!K&&!A.error,G=N&&K&&!A.error;return he.createElement(vM,{dataTest:`${t}-node`,open:K,onOpen:B,onClose:B,component:R,icon:A.loading&&he.createElement(AM,null)},A.error&&he.createElement(bM,{dataTest:t},be.t("Could not load children")),L&&he.createElement("span",{"data-test":`${t}-placeholder`}),G&&he.createElement(IM,{OrganisationUnitNode:O_,node:S,autoExpandLoadingError:e,dataTest:t,disableSelection:r,expanded:a,filter:v,highlighted:c,isUserDataViewFallback:h,onChange:T,onChildrenLoaded:k,onCollapse:w,onExpand:E,parentPath:f,renderNodeLabel:m,rootId:y,selected:g,singleSelection:b,suppressAlphabeticalSorting:_}))};O_.propTypes={dataTest:X.string.isRequired,id:X.string.isRequired,renderNodeLabel:X.func.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,disableSelection:X.bool,displayName:X.string,expanded:X.arrayOf(to),filter:X.arrayOf(to),highlighted:X.arrayOf(to),isUserDataViewFallback:X.bool,path:to,selected:X.arrayOf(to),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const Q4=i=>{let{label:e}=i;return e},J4=(i,e)=>i!=null&&i.length?e.filter(t=>xM(i,`/${t}`)):e,PM=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return he.createElement("div",{"data-test":e},be.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};PM.propTypes={error:X.string.isRequired,dataTest:X.string};const DM=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return he.createElement("div",{"data-test":e,className:"jsx-814846266"},he.createElement(ka,{small:!0}),he.createElement(vt,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};DM.propTypes={dataTest:X.string};const ez=i=>Array.from(new Set(i)),tz=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((r,n)=>`/${e.slice(0,n+1).join("/")}`);return ez(t)},iz=i=>i.reduce((e,t)=>{const r=tz(t);return[...e,...r]},[]),rz=i=>{let{expanded:e,setExpanded:t,onExpand:r,onCollapse:n}=i;return{handleExpand:s=>{let{path:h,...f}=s;e.includes(h)||(t([...e,h]),r&&r({path:h,...f}))},handleCollapse:s=>{let{path:h,...f}=s;const m=e.indexOf(h);if(m!==-1){const y=m===0?e.slice(1):[...e.slice(0,m),...e.slice(m+1)];t(y),n&&n({path:h,...f})}}}},nz=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:r,expandedControlled:n,handleExpandControlled:a,handleCollapseControlled:c}=i;const s=!!n,h=s?[]:iz(e),[f,m]=Ae.useState(h);if(s)return{expanded:n,handleExpand:a,handleCollapse:c};const{handleExpand:y,handleCollapse:g}=rz({expanded:f,setExpanded:m,onExpand:t,onCollapse:r});return{expanded:f,handleExpand:y,handleCollapse:g}},sz=i=>{const[e,t]=Ae.useState(0);return Ae.useEffect(()=>{const r=e+1;i===!0&&t(r)},[i]),e},az=i=>{const t=Object.entries(i).map(r=>{let[n,a]=r;const c=a.displayName||"";return[n,{...a,displayName:c}]});return Object.fromEntries(t)},oz=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:r=>{let{isUserDataViewFallback:n}=r;return{isUserDataViewFallback:n,fields:["displayName","path","id"]}}}}),{}),lz=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=Ae.useMemo(()=>oz(i),[i]),n=qa(t,{variables:{isUserDataViewFallback:e}}),{called:a,loading:c,error:s,data:h,refetch:f}=n,m=Ae.useMemo(()=>h&&az(h),[h]);return{called:a,loading:c,error:s||null,data:m||null,refetch:f}},Sy=[],F_=i=>{let{onChange:e,roots:t,autoExpandLoadingError:r,dataTest:n="dhis2-uiwidgets-orgunittree",disableSelection:a,forceReload:c,highlighted:s=Sy,isUserDataViewFallback:h,initiallyExpanded:f=Sy,filter:m=Sy,renderNodeLabel:y=Q4,selected:g=Sy,singleSelection:b,suppressAlphabeticalSorting:v,expanded:_,handleExpand:T,handleCollapse:k,onExpand:w,onCollapse:E,onChildrenLoaded:A}=i;const M=J4(m,Array.isArray(t)?t:[t]),S=sz(c),[N,Y]=Ae.useState(S),{called:Z,loading:K,error:B,data:F,refetch:O}=lz(M,{isUserDataViewFallback:h,suppressAlphabeticalSorting:v}),{expanded:R,handleExpand:L,handleCollapse:G}=nz({initiallyExpanded:f,onExpand:w,onCollapse:E,expandedControlled:_,handleExpandControlled:T,handleCollapseControlled:k});Ae.useEffect(()=>(O&&S>0&&S!==N&&(O(),Y(S)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[S,N,O]);const V=!Z||K;return he.createElement("div",{"data-test":n},V&&he.createElement(DM,null),B&&he.createElement(PM,{error:B}),!B&&!V&&M.map($=>{const q=F[$];return he.createElement(O_,{key:q.path,rootId:$,autoExpandLoadingError:r,dataTest:n,disableSelection:a,displayName:q.displayName,expanded:R,highlighted:s,id:$,isUserDataViewFallback:h,filter:m,path:q.path,renderNodeLabel:y,selected:g,singleSelection:b,suppressAlphabeticalSorting:v,onChange:e,onChildrenLoaded:A,onCollapse:G,onExpand:L})}))};F_.propTypes={roots:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,dataTest:X.string,disableSelection:X.bool,expanded:Fn(i=>!!i.handleExpand||!!i.handleCollapse,X.arrayOf(X.string)),filter:X.arrayOf(to),forceReload:X.bool,handleCollapse:Fn(i=>!!i.expanded||!!i.handleExpand,X.func),handleExpand:Fn(i=>!!i.expanded||!!i.handleCollapse,X.func),highlighted:X.arrayOf(to),initiallyExpanded:X.arrayOf(to),isUserDataViewFallback:X.bool,renderNodeLabel:X.func,selected:X.arrayOf(to),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const cz="",uz="",dz="",hz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}}   {{firstItem}} - {{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}}   {{firstItem}} - {{lastItem}}","Page {{page}}":" {{page}}",Next:cz,Page:uz,"Items per page":"  ",Previous:dz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"   {{page}}   {{firstItem}} - {{lastItem}}    {{pageCount}}   {{total}} "},pz="",fz="",mz="",gz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:pz,Page:fz,"Items per page":"",Previous:mz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},yz="",vz="",xz="",bz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:yz,Page:vz,"Items per page":"",Previous:xz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},wz="",_z="",Cz="",Tz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:wz,Page:_z,"Items per page":"",Previous:Cz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Sz="Dal",Ez="Strana",kz="Pedchoz",Mz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Strnka {{page}} z {{pageCount}}, poloky {{firstItem}}-{{lastItem}} z {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Strnka {{page}}, poloky {{firstItem}}-{{lastItem}}","Page {{page}}":"Strnka {{page}}",Next:Sz,Page:Ez,"Items per page":"Poloek na strnce",Previous:kz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Nachzte se na strnce {{page}} zobrazujc poloky {{firstItem}}-{{lastItem}}, ale je zde {{pageCount}} strnek a {{total}} poloek"},Az="Next",Iz="",Pz="",Dz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Az,Page:Iz,"Items per page":"",Previous:Pz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Rz="Next",Lz="Page",Nz="Previous",zz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Page {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Page {{page}}",Next:Rz,Page:Lz,"Items per page":"Items per page",Previous:Nz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items"},jz="Siguiente",Oz="Pgina",Fz="Anterior",Bz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pgina {{page}} de {{pageCount}}, elementos {{firstItem}} - {{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pgina {{page}}, elementos {{firstItem}}-{{lastItem}}","Page {{page}}":"Pgina {{page}}",Next:jz,Page:Oz,"Items per page":"Elementos por pgina",Previous:Fz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},$z="Siguiente",Uz="Pgina",Vz="Anterior",Hz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pgina {{page}} de {{pageCount}}, puntos {{firstItem}}-{{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pgina {{page}}, artculos {{firstItem}}-{{lastItem}}","Page {{page}}":"Pgina {{page}}",Next:$z,Page:Uz,"Items per page":"Artculos por pgina",Previous:Vz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Usted est en la pgina {{page}} que muestra los artculos {{firstItem}}-{{lastItem}}, pero hay pginas {{pageCount}} y artculos {{total}} "},Gz="Suivant",qz="Page",Wz="Prcdent",Yz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Page {{page}}",Next:Gz,Page:qz,"Items per page":"",Previous:Wz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Zz="",Xz="",Kz="",Qz={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Zz,Page:Xz,"Items per page":"",Previous:Kz,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Jz="Selanjutnya",ej="Halaman",tj="Sebelumnya",ij={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Halaman {{page}}",Next:Jz,Page:ej,"Items per page":"",Previous:tj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},rj="",nj="",sj="",aj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:rj,Page:nj,"Items per page":"",Previous:sj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},oj="",lj="",cj="",uj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}} ,  {{firstItem}} - {{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}} ,  {{firstItem}} - {{lastItem}}","Page {{page}}":" {{page}}",Next:oj,Page:lj,"Items per page":"",Previous:cj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":" {{page}}  {{firstItem}} - {{lastItem}} ,  {{pageCount}}  {{total}} "},dj="",hj="",pj="",fj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:dj,Page:hj,"Items per page":"",Previous:pj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},mj="Neste",gj="Side",yj="Forrige",vj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Side {{page}} av {{pageCount}}, elementer {{firstItem}}-{{lastItem}} av {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Side {{page}}, elementer {{firstItem}}-{{lastItem}}","Page {{page}}":"Side {{page}}",Next:mj,Page:gj,"Items per page":"Elementer per side",Previous:yj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Du er p side {{page}} som viser elementer {{firstItem}}-{{lastItem}}, men det er {{pageCount}} sider og {{total}} elementer."},xj="Volgende",bj="Bladzijde",wj="Vorige",_j={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pagina {{page}} van {{pageCount}}, items {{firstItem}}-{{lastItem}} van {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pagina {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Pagina {{page}}",Next:xj,Page:bj,"Items per page":"Items per pagina",Previous:wj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"U bevindt zich op pagina {{page}} laat items zien {{firstItem}}-{{lastItem}}, maar er zijn {{pageCount}} pagina's en {{total}} items"},Cj="",Tj="\\:",Sj="",Ej={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Cj,Page:Tj,"Items per page":"",Previous:Sj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},kj="",Mj="",Aj="",Ij={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:kj,Page:Mj,"Items per page":"",Previous:Aj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Pj="Prximo",Dj="Pgina",Rj="Anterior",Lj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pgina {{page}} de {{pageCount}}, itens {{firstItem}}-{{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pgina {{page}}, itens {{firstItem}}-{{lastItem}}","Page {{page}}":"Pgina {{page}}",Next:Pj,Page:Dj,"Items per page":"Itens por pgina",Previous:Rj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Est na pgina {{page}} que mostra os itens {{firstItem}}-{{lastItem}}, mas existem pginas {{pageCount}} e itens {{total}} "},Nj="Prximo",zj="Pgina",jj="Anterior",Oj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Nj,Page:zj,"Items per page":"",Previous:jj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Fj="Urmtorul",Bj="",$j="",Uj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Pagina {{page}}",Next:Fj,Page:Bj,"Items per page":"",Previous:$j,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Vj="",Hj="",Gj="",qj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}},  {{firstItem}}-{{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}},  {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:Vj,Page:Hj,"Items per page":"   ",Previous:Gj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"    {{page}},    {{firstItem}}-{{lastItem}},     -{{pageCount}},   - {{total}}."},Wj="Nsta",Yj="Sida",Zj="Tidigare",Xj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Wj,Page:Yj,"Items per page":"",Previous:Zj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Kj="Prximu",Qj="",Jj="Anterior",eO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Kj,Page:Qj,"Items per page":"",Previous:Jj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},tO="",iO="",rO="",nO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:tO,Page:iO,"Items per page":"",Previous:rO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},sO="",aO="",oO="",lO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}}, ' {{firstItem}}-{{lastItem}}  {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}}, ' {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:sO,Page:aO,"Items per page":"'  ",Previous:oO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"    {{page}},   ' {{firstItem}}-{{lastItem}},   {{pageCount}}   {{total}} '"},cO="",uO="",dO="",hO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:cO,Page:uO,"Items per page":"",Previous:dO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},pO="",fO="Sahifa",mO="Oldingi",gO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:pO,Page:fO,"Items per page":"",Previous:mO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},yO="",vO="",xO="",bO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"{{page}} ",Next:yO,Page:vO,"Items per page":"",Previous:xO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},wO="",_O="Sahifa",CO="Oldingi",TO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"{{page}} sahifasi",Next:wO,Page:_O,"Items per page":"",Previous:CO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},SO="Sau",EO="Trang",kO="Trc",MO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Trang {{page}}",Next:SO,Page:EO,"Items per page":"",Previous:kO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},AO="",IO="",PO="",DO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":" {{page}}  {{pageCount}} {{firstItem}}-{{lastItem}}  {{total}} ","Page {{page}}, items {{firstItem}}-{{lastItem}}":" {{page}} {{firstItem}}-{{lastItem}}","Page {{page}}":" {{page}}",Next:AO,Page:IO,"Items per page":"",Previous:PO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":" {{page}}  {{firstItem}}-{{lastItem}} {{pageCount}}  {{total}} "},RO="",LO="",NO="",zO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"{{page}}",Next:RO,Page:LO,"Items per page":"",Previous:NO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Hr="default";be.addResources("ar",Hr,hz);be.addResources("ar_IQ",Hr,gz);be.addResources("bn",Hr,bz);be.addResources("ckb",Hr,Tz);be.addResources("cs",Hr,Mz);be.addResources("da",Hr,Dz);be.addResources("en",Hr,zz);be.addResources("es",Hr,Bz);be.addResources("es_419",Hr,Hz);be.addResources("fr",Hr,Yz);be.addResources("hi_IN",Hr,Qz);be.addResources("id",Hr,ij);be.addResources("km",Hr,aj);be.addResources("lo",Hr,uj);be.addResources("my",Hr,fj);be.addResources("nb",Hr,vj);be.addResources("nl",Hr,_j);be.addResources("prs",Hr,Ej);be.addResources("ps",Hr,Ij);be.addResources("pt",Hr,Lj);be.addResources("pt_BR",Hr,Oj);be.addResources("ro",Hr,Uj);be.addResources("ru",Hr,qj);be.addResources("sv",Hr,Xj);be.addResources("tet",Hr,eO);be.addResources("tg",Hr,nO);be.addResources("uk",Hr,lO);be.addResources("ur",Hr,hO);be.addResources("uz_Latn",Hr,gO);be.addResources("uz_UZ_Cyrl",Hr,bO);be.addResources("uz_UZ_Latn",Hr,TO);be.addResources("vi",Hr,MO);be.addResources("zh",Hr,DO);be.addResources("zh_CN",Hr,zO);const hb=i=>typeof i=="number"&&!isNaN(i),jO=i=>{let{firstItem:e,lastItem:t,page:r,pageCount:n,total:a}=i;return hb(a)&&hb(t)?be.t("Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}",{page:r,pageCount:n,firstItem:e,lastItem:t,total:a}):hb(t)?be.t("Page {{page}}, items {{firstItem}}-{{lastItem}}",{page:r,firstItem:e,lastItem:t}):be.t("Page {{page}}",{page:r})},OO=i=>{let{isLastPage:e,page:t,pageLength:r,pageSize:n,total:a}=i,c=(t-1)*n+1,s=c+n-1;return typeof a=="number"&&(a===0?(c=0,s=0):s>a&&(s=a)),typeof r=="number"&&(s=c+r-1),e&&isNaN(a)&&isNaN(r)&&(s=NaN),{firstItem:c,lastItem:s}},nS=(i,e)=>typeof i=="function"?i(e):i,RM=i=>{let{dataTest:e,isNextDisabled:t,isPreviousDisabled:r,nextPageText:n,page:a,previousPageText:c,onClick:s}=i;return he.createElement("div",{"data-test":`${e}-pagecontrols`,className:vt.dynamic([["3252926163",[Bt.dp4]]])},he.createElement(Ci,{secondary:!0,className:"button-previous",small:!0,disabled:r,onClick:()=>s(a-1),dataTest:`${e}-page-previous`},he.createElement("div",{className:vt.dynamic([["3252926163",[Bt.dp4]]])+" navigator-icon"},he.createElement($w,null)),nS(c)),he.createElement(Ci,{secondary:!0,className:"button-next",small:!0,disabled:t,onClick:()=>s(a+1),dataTest:`${e}-page-next`},nS(n),he.createElement("div",{className:vt.dynamic([["3252926163",[Bt.dp4]]])+" navigator-icon"},he.createElement(Uw,null))),he.createElement(vt,{id:"3252926163",dynamic:[Bt.dp4]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","div.__jsx-style-dynamic-selector .button-previous{height:32px;padding-inline-start:0;}",`div.__jsx-style-dynamic-selector .button-next{height:32px;padding-inline-end:0;margin-inline-start:${Bt.dp4};}`,"div.__jsx-style-dynamic-selector .navigator-icon.__jsx-style-dynamic-selector:dir(rtl){-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}"]))};RM.propTypes={dataTest:X.string.isRequired,nextPageText:X.oneOfType([X.string,X.func]).isRequired,page:X.number.isRequired,previousPageText:X.oneOfType([X.string,X.func]).isRequired,onClick:X.func.isRequired,isNextDisabled:X.bool,isPreviousDisabled:X.bool};const FO=(i,e)=>typeof i=="function"?i(e):i,BO=i=>Array.from({length:i},(e,t)=>(t+1).toString()),LM=i=>{let{dataTest:e,disabled:t,pageSelectText:r,onChange:n,page:a,pageCount:c}=i;return he.createElement("div",{"data-test":`${e}-gotopage`,className:vt.dynamic([["599400768",[Bt.dp12]]])},he.createElement(Ll,{dense:!0,disabled:t,selected:a.toString(),onChange:s=>{let{selected:h}=s;return n(parseInt(h,10))},className:"select",dataTest:`${e}-page-select`,prefix:FO(r)},BO(c).map(s=>he.createElement(Cs,{key:s,value:s,label:s}))),he.createElement(vt,{id:"599400768",dynamic:[Bt.dp12]},[`div.__jsx-style-dynamic-selector{margin-inline-end:${Bt.dp12};}`]))};LM.propTypes={dataTest:X.string.isRequired,page:X.number.isRequired,pageCount:X.number.isRequired,pageSelectText:X.oneOfType([X.string,X.func]).isRequired,onChange:X.func.isRequired,disabled:X.bool};const $O=(i,e)=>typeof i=="function"?i(e):i,NM=i=>{let{dataTest:e,disabled:t,pageSizeSelectText:r,pageSize:n,pageSizes:a,onChange:c}=i;return he.createElement("div",{"data-test":`${e}-pagesize`,className:vt.dynamic([["3539890457",[Bt.dp12]]])},he.createElement(Ll,{dense:!0,disabled:t,selected:n.toString(),onChange:s=>{let{selected:h}=s;return c(parseInt(h,10))},className:"select",dataTest:`${e}-pagesize-select`,prefix:$O(r)},a.map(s=>he.createElement(Cs,{key:s,value:s,label:s}))),he.createElement(vt,{id:"3539890457",dynamic:[Bt.dp12]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Bt.dp12};-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}`]))};NM.propTypes={dataTest:X.string.isRequired,pageSize:X.number.isRequired,pageSizeSelectText:X.oneOfType([X.string,X.func]).isRequired,pageSizes:X.arrayOf(X.string).isRequired,onChange:X.func.isRequired,disabled:X.bool};const UO=(i,e)=>typeof i=="function"?i(e):i,zM=i=>{let{dataTest:e,firstItem:t,inactive:r,lastItem:n,page:a,pageCount:c,pageSummaryText:s,total:h}=i;const f=UO(s,{firstItem:t,lastItem:n,page:a,pageCount:c,total:h});return he.createElement("div",{"data-test":`${e}-summary`,className:vt.dynamic([["3973865131",[Bt.dp12,ze.grey700,ze.grey500]]])},he.createElement("span",{className:vt.dynamic([["3973865131",[Bt.dp12,ze.grey700,ze.grey500]]])+" "+(ir({inactive:r})||"")},f),he.createElement(vt,{id:"3973865131",dynamic:[Bt.dp12,ze.grey700,ze.grey500]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Bt.dp12};}`,`span.__jsx-style-dynamic-selector{color:${ze.grey700};font-size:14px;}`,`span.inactive.__jsx-style-dynamic-selector{color:${ze.grey500};}`]))};zM.propTypes={dataTest:X.string.isRequired,page:X.number.isRequired,pageSummaryText:X.oneOfType([X.string,X.func]).isRequired,firstItem:X.number,inactive:X.bool,lastItem:X.number,pageCount:X.number,total:X.number};const VO=2e3,cd={dataTest:"dhis2-uiwidgets-pagination",nextPageText:()=>be.t("Next"),pageSelectText:()=>be.t("Page"),pageSizes:["5","10","20","30","40","50","75","100"],pageSizeSelectText:()=>be.t("Items per page"),pageSummaryText:jO,previousPageText:()=>be.t("Previous")},B_=i=>{let{className:e,dataTest:t=cd.dataTest,disabled:r,hidePageSelect:n,hidePageSizeSelect:a,hidePageSummary:c,isLastPage:s,nextPageText:h=cd.nextPageText,onPageChange:f,onPageSizeChange:m,page:y,pageCount:g,pageLength:b,pageSelectText:v=cd.pageSelectText,pageSize:_,pageSizes:T=cd.pageSizes,pageSizeSelectText:k=cd.pageSizeSelectText,pageSummaryText:w=cd.pageSummaryText,previousPageText:E=cd.previousPageText,total:A}=i;const{firstItem:M,lastItem:S}=OO({isLastPage:s,page:y,pageLength:b,pageSize:_,total:A}),N=!n&&typeof g=="number"&&g>1&&g<=VO;return he.createElement("div",{"data-test":t,className:vt.dynamic([["3796520840",[Bt.dp4]]])+" "+(ir("container",e)||"")},a?he.createElement("div",{className:vt.dynamic([["3796520840",[Bt.dp4]]])+" spacer"}):he.createElement(NM,{dataTest:t,disabled:r,pageSize:_,pageSizes:T,onChange:m,pageSizeSelectText:k}),!c&&he.createElement(zM,{dataTest:t,inactive:r,firstItem:M,lastItem:S,page:y,pageCount:g,pageSummaryText:w,total:A}),he.createElement("div",{className:vt.dynamic([["3796520840",[Bt.dp4]]])+" page-navigation"},N&&he.createElement(LM,{dataTest:t,disabled:r,pageSelectText:v,page:y,pageCount:g,onChange:f}),he.createElement(RM,{dataTest:t,nextPageText:h,page:y,previousPageText:E,onClick:f,isNextDisabled:r||s||y===g,isPreviousDisabled:r||y===1})),he.createElement(vt,{id:"3796520840",dynamic:[Bt.dp4]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;row-gap:${Bt.dp4};}`,".spacer.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".page-navigation.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;}"]))};B_.propTypes={page:X.number.isRequired,pageSize:X.number.isRequired,className:X.string,dataTest:X.string,disabled:X.bool,hidePageSelect:X.bool,hidePageSizeSelect:X.bool,hidePageSummary:X.bool,isLastPage:X.bool,nextPageText:X.oneOfType([X.string,X.func]),pageCount:X.number,pageLength:Fn(i=>i.isLastPage,X.number),pageSelectText:X.oneOfType([X.string,X.func]),pageSizeSelectText:X.oneOfType([X.string,X.func]),pageSizes:X.arrayOf(X.string),pageSummaryText:X.oneOfType([X.string,X.func]),previousPageText:X.oneOfType([X.string,X.func]),total:X.number,onPageChange:X.func,onPageSizeChange:X.func};const br="ACCESS_NONE",cn="ACCESS_VIEW_ONLY",mn="ACCESS_VIEW_AND_EDIT",$_="SHARE_TARGET_EXTERNAL",Wd="SHARE_TARGET_PUBLIC",Yd="SHARE_TARGET_USER",Ap="SHARE_TARGET_GROUP",jM={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DATASTORE:"dataStore",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},OM=Object.values(jM),P0=Ae.createContext(!1);var HO=void 0;const GO=(i,e,t)=>{let r;return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];const s=HO,h=()=>{r=null,i.apply(s,a)};clearTimeout(r),r=setTimeout(h,e)}},pb=i=>i===void 0?br:typeof i=="boolean"?i?cn:br:i.startsWith("rw")?mn:i.startsWith("r-")?cn:br,FM=i=>{if(typeof i=="boolean")return{data:br,metadata:pb(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:pb(t),metadata:pb(e)}},sS=i=>{switch(i){case br:return"--";case cn:return"r-";case mn:return"rw";default:return"--"}},vm=i=>`${sS(i.metadata)}${sS(i.data)}----`,Ey=i=>{let{access:e,...t}=i;return{...t,access:FM(e)}},qO=[$_,Wd],aS=i=>!qO.includes(i),WO=i=>{let{object:e,type:t,access:r,id:n}=i;switch(t){case"public":return{object:{...e,publicAccess:vm(r)}};case"group":{const a=e.userGroupAccesses.map(s=>s.id!==n?s:{...s,access:vm(r)}),c={object:{...e,userGroupAccesses:a}};return console.log(c),c}case"user":{const a=e.userAccesses.map(s=>s.id!==n?s:{...s,access:vm(r)});return{object:{...e,userAccesses:a}}}}},YO=i=>{let{object:e,type:t,id:r,access:n,name:a}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:r,name:a,access:vm(n)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:r,name:a,access:vm(n)}]}}}},ZO=i=>{let{object:e,type:t,id:r}=i;switch(t){case"group":{const n=e.userGroupAccesses.filter(c=>c.id!==r);return{object:{...e,userGroupAccesses:n}}}case"user":{const n=e.userAccesses.filter(c=>c.id!==r);return{object:{...e,userAccesses:n}}}}},XO="",KO="",QO=" ",JO="",e6="",t6={"View only":" ","View and edit":" ","No access":"  ","Give access to a user or group":"      ","Data access level":"","Choose a level":"","Not available offline":"     ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"      ","User / Group":"","All users":" ","Anyone logged in":"","User group":" ",User:XO,Data:KO,"Remove access":" ",Metadata:QO,"User or group":"  ",Search:JO,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:e6,"Dashboard sharing":""},i6="",r6="",n6="",s6="",a6="",o6={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:i6,Data:r6,"Remove access":"",Metadata:n6,"User or group":"",Search:s6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:a6,"Dashboard sharing":""},l6=" ",c6="",u6="",d6={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:l6,"Remove access":"","User or group":"",Search:c6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:u6,"Dashboard sharing":""},h6="Uivatel",p6="Data",f6="Metadata",m6="Hledat",g6="Zavt",y6={"View only":"Pouze zobrazen","View and edit":"Zobrazen a pravy","No access":"dn pstup","Give access to a user or group":"Udlte pstup uivateli nebo skupin","Data access level":"","Choose a level":"","Not available offline":"Nen k dispozici offline","Metadata access level":"","Access level":"rove pstupu","Give access":"Povolit pstup","Users and groups that currently have access":"Uivatel a skupiny, kte maj aktuln pstup","User / Group":"Uivatel / Skupina","All users":"Vichni uivatel","Anyone logged in":"","User group":"Uivatelsk skupina",User:h6,Data:p6,"Remove access":"Odebrat pstup",Metadata:f6,"User or group":"Uivatel nebo skupina",Search:m6,"Apply dashboard sharing settings to visualizations":"Na vizualizace pouijte nastaven sdlen ovldacho panelu","Something went wrong":"Nco se pokazilo","Apply sharing to dashboard visualizations":"Pout sdlen na vizualizace ovldacho panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovny dn vizualizace. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne vechny vizualizace bylo mon spn aktualizovat. {{ success }} aktualizovno spn, {{ failed }} se nepodailo aktualizovat. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovny dn vizualizace, protoe nastaven sdlen je ji dostaujc.","Successfully updated sharing for all visualizations.":"spn aktualizovno sdlen pro vechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne vechna nastaven sdlen vizualizac bylo nutn aktualizovat. {{ updated }} aktualizovno, {{ skipped }} ji m dostaten nastaven sdlen.","There are no users or groups to apply sharing settings for.":"Nejsou dn uivatel ani skupiny, pro kter by bylo mon pout nastaven sdlen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Poet vizualizac na tomto dicm panelu, kter potenciln zskaj aktualizovan nastaven sdlen: {{ visualizationsCount }}. Poet uivatel nebo skupin, na kter se tato aktualizovan nastaven budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Pouit stejnch nastaven sdlen zajist, e uivatel a skupiny, kter maj pstup k dicmu panelu, budou mt tak pstup k jeho vizualizacm (grafy, tabulky, mapy, grafy udlost a zprvy o udlostech) alespo Pouze zobrazen.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uivatel nebo skupina ji m k vizualizaci pstup Zobrazen a pravy, nebude to omezeno na Pouze zobrazen. rove pstupu Vichni uivatel nebude aktualizovna ani zmnna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Pouit sdlen nelze vrtit zpt a je nutn jej provst znovu, pokud na ovldac panel pidte nov vizualizace nebo se zmn jeho nastaven sdlen.","Sharing and access: {{- objectName}}":"Sdlen a pstup: {{- objectName}}","Sharing and access":"Sdlen a pstup",Close:g6,"Dashboard sharing":"Sdlen ovldacho panelu"},v6="",x6="",b6="",w6="",_6="Close",C6={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:v6,Data:x6,"Remove access":"",Metadata:b6,"User or group":"",Search:w6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_6,"Dashboard sharing":""},T6="User",S6="Data",E6="Metadata",k6="Search",M6="Close",A6={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:T6,Data:S6,"Remove access":"Remove access",Metadata:E6,"User or group":"User or group",Search:k6,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:M6,"Dashboard sharing":"Dashboard sharing"},I6="Usuario",P6="Datos",D6="Metadatos",R6="Buscar",L6="Cerrar",N6={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:I6,Data:P6,"Remove access":"Eliminar acceso",Metadata:D6,"User or group":"Usuario o Grupo",Search:R6,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuracin compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con xito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuracin de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuracin para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuracin de uso compartido actualizado con xito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualizacin. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuracin de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este tablero que potencialmente actualizarn su confugiracin de uso compartido: {{ visualizationsCount }}. El nmero de usuarios o grupos a los que se aplicarn estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicacin de la misma configuracin para compartir garantiza que los usuarios y grupos que tienen acceso al tablero tambin tienen al menos acceso de "Solo lectura" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, este no se reducir a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuracin de uso compartido no puede deshacerse, y debers hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuracin de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:L6,"Dashboard sharing":"Compartir tablero"},z6="",j6="Datos",O6="Metadatos",F6="Buscar",B6="Cerrar",$6={"View only":"Ver slo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:z6,Data:j6,"Remove access":"Eliminar el acceso",Metadata:O6,"User or group":"Usuario o grupo",Search:F6,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la comparticin a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualizacin. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la comparticin de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualizacin porque los ajustes de comparticin ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con xito la comparticin de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de comparticin de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tena suficientes ajustes de comparticin.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuracin de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este cuadro de mando que potencialmente obtendrn ajustes de uso compartido actualizados: {{ visualizationsCount }}. Nmero de usuarios o grupos a los que se aplicarn estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuracin de comparticin se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando tambin tienen al menos acceso de "slo visualizacin" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, ste no se reducir a "Slo ver". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicacin de la comparticin no puede deshacerse, y debe hacerse de nuevo si se aaden nuevas visualizaciones al cuadro de mandos o se cambia su configuracin de comparticin.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:B6,"Dashboard sharing":"Compartir el cuadro de mandos"},U6="",V6="",H6="",G6={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:U6,"Remove access":"","User or group":"",Search:V6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:H6,"Dashboard sharing":""},q6="Utilisateur",W6="Donnes",Y6="Mtadonnes",Z6="Chercher",X6="Fermer",K6={"View only":"","View and edit":"","No access":"Pas d'accs","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accs","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:q6,Data:W6,"Remove access":"",Metadata:Y6,"User or group":"",Search:Z6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourn","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:X6,"Dashboard sharing":""},Q6="",J6="",e9="",t9="",i9=" ",r9={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Q6,Data:J6,"Remove access":"",Metadata:e9,"User or group":"",Search:t9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:i9,"Dashboard sharing":""},n9="",s9="Data",a9="Metadata",o9="Pencarian",l9="Tutup",c9={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:n9,Data:s9,"Remove access":"",Metadata:a9,"User or group":"",Search:o9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:l9,"Dashboard sharing":""},u9="",d9="Data",h9="",p9="",f9="",m9={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:u9,Data:d9,"Remove access":"",Metadata:h9,"User or group":"",Search:p9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:f9,"Dashboard sharing":""},g9="",y9="",v9="",x9="",b9="",w9={"View only":"","View and edit":"  ","No access":"","Give access to a user or group":"  ","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"  ","User / Group":" / ","All users":"","Anyone logged in":"","User group":"",User:g9,Data:y9,"Remove access":"",Metadata:v9,"User or group":"  ",Search:x9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":". .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":".  {{ success }} , {{ failed }} . .","No visualizations were updated because sharing settings are already sufficient.":".","Successfully updated sharing for all visualizations.":".","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":". {{ updated }} , {{ skipped }} .","There are no users or groups to apply sharing settings for.":"  .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":": {{ visualizationsCount }}.  : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'   ""  (, , ,   ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'   " "  "".  ""   .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":",    .","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:b9,"Dashboard sharing":""},_9="",C9="",T9="",S9="",E9="",k9={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:_9,Data:C9,"Remove access":"",Metadata:T9,"User or group":"",Search:S9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:E9,"Dashboard sharing":""},M9="Bruker",A9="Data",I9="Metadata",P9="Sk",D9="Lukk",R9={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsniv","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:M9,Data:A9,"Remove access":"",Metadata:I9,"User or group":"",Search:P9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:D9,"Dashboard sharing":""},L9="",N9="",z9="",j9={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:L9,"Remove access":"","User or group":"",Search:N9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:z9,"Dashboard sharing":""},O9="Gebruiker",F9="Gegevens",B9="Metagegevens",$9="Zoek",U9="Sluit",V9={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:O9,Data:F9,"Remove access":"Toegang verwijderen",Metadata:B9,"User or group":"Gebruiker of groep",Search:$9,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is gepdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk gepdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:U9,"Dashboard sharing":"Dashboard delen"},H9=" ",G9="",q9="",W9="",Y9="",Z9={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"  ",User:H9,Data:G9,"Remove access":"",Metadata:q9,"User or group":"",Search:W9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Y9,"Dashboard sharing":""},X9="",K9=" ()",Q9="",J9="",e8="  ",t8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:X9,Data:K9,"Remove access":"",Metadata:Q9,"User or group":"",Search:J9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:e8,"Dashboard sharing":""},i8="Utilizador",r8="Dados",n8="Metadados",s8="Pesquisar",a8="Fechar",o8={"View only":"Ver apenas","View and edit":"Visualizar e editar","No access":"Sem acesso","Give access to a user or group":"Atribuir acesso a um utilizador ou grupo","Data access level":"Nvel de acesso aos dados","Choose a level":"Escolher um nvel","Not available offline":"No disponvel offline","Metadata access level":"Nvel de acesso aos metadados","Access level":"Niveis de acesso ","Give access":"Atribuir acesso","Users and groups that currently have access":"Utilizadores e grupos que tm atualmente acesso","User / Group":"Utilizador / Grupo","All users":"Todos os utilizadores","Anyone logged in":"Qualquer pessoa com sesso iniciada","User group":"Grupo de usurios",User:i8,Data:r8,"Remove access":"Remover o acesso",Metadata:n8,"User or group":"Utilizador ou grupo",Search:s8,"Apply dashboard sharing settings to visualizations":"Aplicar definies de partilha do dashboard s visualizaes","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"Aplicar a partilha s visualizaes de dashboard","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nenhuma visualizao foi atualizada. Verifique se voc tem permisso para alterar a compartilha de todas as visualizaes.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Nem todas as visualizaes puderam ser atualizadas com sucesso. {{ success }} foi atualizado com sucesso, {{ failed }} falhou na atualizao. Verifique se voc tem permisso para alterar a compartilha de todas as visualizaes.","No visualizations were updated because sharing settings are already sufficient.":"No foram actualizadas quaisquer visualizaes porque as definies de partilha j so suficientes.","Successfully updated sharing for all visualizations.":"Partilha actualizada com xito para todas as visualizaes.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Nem todas as definies de partilha de visualizaes precisavam de ser actualizadas. {{ updated }} atualizado, {{ skipped }} j tinha definies de partilha suficientes.","There are no users or groups to apply sharing settings for.":"No existem utilizadores ou grupos aos quais aplicar definies de partilha.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaes neste painel que potencialmente recebero definies de partilha actualizadas: {{ visualizationsCount }}. O nmero de utilizadores ou grupos aos quais estas definies actualizadas se aplicaro: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Aplicar as mesmas configuraes de partilha garante que os utilizadores e grupos que tm acesso ao dashboard tambm tenham, pelo menos, acesso de 'Apenas visualizao' s suas visualizaes (grficos, tabelas, mapas, grficos de eventos e relatrios de eventos).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Se um utilizador ou grupo j tem acesso de 'Visualizar e editar' a uma visualizao, este acesso no ser reduzido para 'Apenas visualizao'. O nvel de acesso 'Todos os utilizadores' no ser atualizado nem alterado.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar as configuraes de partilha no pode ser desfeito, e precisa ser feito novamente se novas visualizaes forem adicionadas ao dashboard ou se as suas configuraes de partilha forem alteradas.","Sharing and access: {{- objectName}}":"Partilha e acesso: {{- objectName}}","Sharing and access":"Partilha e acesso",Close:a8,"Dashboard sharing":"Partilha do painel"},l8="Usurio",c8="Dados",u8="Metadados",d8="Pesquisar",h8="Fechar",p8={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:l8,Data:c8,"Remove access":"",Metadata:u8,"User or group":"",Search:d8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:h8,"Dashboard sharing":""},f8="",m8="Cutare",g8="nchidere",y8={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:f8,"Remove access":"","User or group":"",Search:m8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:g8,"Dashboard sharing":""},v8="",x8="",b8="",w8="",_8="",C8={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:v8,Data:x8,"Remove access":" ",Metadata:b8,"User or group":"  ",Search:w8,"Apply dashboard sharing settings to visualizations":"      ","Something went wrong":"-   ","Apply sharing to dashboard visualizations":"     ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"   . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"     . : {{ success }},  : {{ failed }} . ,             .","No visualizations were updated because sharing settings are already sufficient.":"   ,     .","Successfully updated sharing for all visualizations.":"     ","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"       . : {{ updated }},   : {{ skipped }}.","There are no users or groups to apply sharing settings for.":"        .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"    ,      : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"       ,    ,  (   )    (, , ,    ).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'        "  "  ,      " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"   .    ,          .","Sharing and access: {{- objectName}}":": {{- objectName}}","Sharing and access":"   ",Close:_8,"Dashboard sharing":"  "},T8="",S8="",E8="",k8="",M8="",A8={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"  ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:T8,Data:S8,"Remove access":"",Metadata:E8,"User or group":"",Search:k8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:M8,"Dashboard sharing":""},I8="",P8="Data",D8="Metadata",R8="Sk",L8="Stnga",N8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:I8,Data:P8,"Remove access":"",Metadata:D8,"User or group":"",Search:R8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ngot gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:L8,"Dashboard sharing":""},z8="",j8="Dadus",O8="",F8="",B8="Taka",$8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:z8,Data:j8,"Remove access":"",Metadata:O8,"User or group":"",Search:F8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:B8,"Dashboard sharing":""},U8="",V8="",H8="",G8="",q8="",W8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:U8,Data:V8,"Remove access":"",Metadata:H8,"User or group":"",Search:G8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:q8,"Dashboard sharing":""},Y8="",Z8="",X8="",K8="",Q8="",J8={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"  ,    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:Y8,Data:Z8,"Remove access":" ",Metadata:X8,"User or group":"  ",Search:K8,"Apply dashboard sharing settings to visualizations":"        ","Something went wrong":" ","Apply sharing to dashboard visualizations":"      ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"  . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"    . {{ success }}  , {{ failed }}   . ,            .","No visualizations were updated because sharing settings are already sufficient.":"  ,      .","Successfully updated sharing for all visualizations.":"      .","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"         . {{ updated }} , {{ skipped }}      .","There are no users or groups to apply sharing settings for.":"   ,       .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"     ,       : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'     ,    ,      ,     " "    (, , ,      ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'         "  ",       " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"    ,     ,            .","Sharing and access: {{- objectName}}":" : {{- objectName}}","Sharing and access":" ",Close:Q8,"Dashboard sharing":"    "},eF="",tF="",iF=" ",rF=" ",nF="",sF={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":" ",User:eF,Data:tF,"Remove access":"",Metadata:iF,"User or group":"",Search:rF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:nF,"Dashboard sharing":""},aF="Metadata",oF="Izlash",lF="Yopmoq",cF={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taqiqlangan","Can view":" ","Can view and edit":"",Metadata:aF,"Remove access":"","User or group":"",Search:oF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:lF,"Dashboard sharing":""},uF="",dF="",hF="",pF="",fF="",mF={"View only":"  ","View and edit":"  ","No access":"   ","Give access to a user or group":"     ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":"   ","Give access":" ","Users and groups that currently have access":"     ","User / Group":"/","All users":" ","Anyone logged in":"","User group":" ",User:uF,Data:dF,"Remove access":"  ",Metadata:hF,"User or group":"  ",Search:pF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:fF,"Dashboard sharing":"  "},gF="Foydalanuvchi",yF="",vF="Metadata",xF="Izlash",bF="Yopmoq",wF={"View only":"","View and edit":"","No access":"Kirish taqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:gF,Data:yF,"Remove access":"",Metadata:vF,"User or group":"",Search:xF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:bF,"Dashboard sharing":""},_F="Ngi dng",CF="D liu",TF="Siu d liu",SF="Tm kim",EF="ng li",kF={"View only":"Ch xem","View and edit":"","No access":"Khng truy cp","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Khng c cho ngoi tuyn","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhm Ngi Dng",User:_F,Data:CF,"Remove access":"",Metadata:TF,"User or group":"",Search:SF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"C li","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:EF,"Dashboard sharing":""},MF="",AF="",IF="",PF="",DF="",RF={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"/","All users":"","Anyone logged in":"","User group":"",User:MF,Data:AF,"Remove access":"",Metadata:IF,"User or group":"",Search:PF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":" {{ success }}{{ failed }}","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":" {{ updated }}{{ skipped }}","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"{{ visualizationsCount }}{{ entityAmount }}",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':" ","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"{{- objectName}}","Sharing and access":"",Close:DF,"Dashboard sharing":""},LF="",NF="",zF="",jF="",OF="",FF={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User",User:LF,Data:NF,"Remove access":"",Metadata:zF,"User or group":"",Search:jF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:OF,"Dashboard sharing":""},Lr="default";be.addResources("ar",Lr,t6);be.addResources("ar_IQ",Lr,o6);be.addResources("ckb",Lr,d6);be.addResources("cs",Lr,y6);be.addResources("da",Lr,C6);be.addResources("en",Lr,A6);be.addResources("es",Lr,N6);be.addResources("es_419",Lr,$6);be.addResources("fi",Lr,G6);be.addResources("fr",Lr,K6);be.addResources("hi_IN",Lr,r9);be.addResources("id",Lr,c9);be.addResources("km",Lr,m9);be.addResources("lo",Lr,w9);be.addResources("my",Lr,k9);be.addResources("nb",Lr,R9);be.addResources("ne",Lr,j9);be.addResources("nl",Lr,V9);be.addResources("prs",Lr,Z9);be.addResources("ps",Lr,t8);be.addResources("pt",Lr,o8);be.addResources("pt_BR",Lr,p8);be.addResources("ro",Lr,y8);be.addResources("ru",Lr,C8);be.addResources("si",Lr,A8);be.addResources("sv",Lr,N8);be.addResources("tet",Lr,$8);be.addResources("tg",Lr,W8);be.addResources("uk",Lr,J8);be.addResources("ur",Lr,sF);be.addResources("uz_Latn",Lr,cF);be.addResources("uz_UZ_Cyrl",Lr,mF);be.addResources("uz_UZ_Latn",Lr,wF);be.addResources("vi",Lr,kF);be.addResources("zh",Lr,RF);be.addResources("zh_CN",Lr,FF);const N1=i=>{let{onClose:e,name:t,children:r,dataTest:n="dhis2-uicore-sharingdialog-modal"}=i;const a=t?be.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):be.t("Sharing and access");return he.createElement(ua,{large:!0,position:"top",onClose:e,dataTest:n},he.createElement(Mo,null,a),he.createElement(so,null,r),he.createElement(Ao,null,he.createElement(Wa,{end:!0},he.createElement(Ci,{type:"button",secondary:!0,onClick:e},be.t("Close")))))};N1.propTypes={children:X.node.isRequired,dataTest:X.string,name:X.string,onClose:X.func};const fp=he.forwardRef((i,e)=>{let{icon:t,onClick:r,selected:n,disabled:a,children:c,className:s,dataTest:h="dhis2-uicore-tab"}=i,f=Ae.useRef(null);e&&(f=e);const[m,y]=Ae.useState(!1);return Ae.useEffect(()=>{(()=>{const b=f.current.scrollWidth>f.current.clientWidth;y(b)})()},[]),he.createElement("button",{onClick:a?void 0:g=>r({},g),"data-test":h,ref:f,role:"tab","aria-selected":n?"true":"false","aria-disabled":a?"true":"false",onFocus:a?void 0:g=>r({},g),tabIndex:-1,className:vt.dynamic([["2433456263",[ze.grey400,ze.grey600,Jt.focus,ze.grey600,ze.grey900,ze.grey600,ze.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,ze.grey500,ze.grey500]]])+` ${ir("tab",s,{selected:n,disabled:a})}`},t,m?he.createElement(Vd,{content:c,maxWidth:"100%"},he.createElement("span",{ref:f,className:vt.dynamic([["2433456263",[ze.grey400,ze.grey600,Jt.focus,ze.grey600,ze.grey900,ze.grey600,ze.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,ze.grey500,ze.grey500]]])},c)):he.createElement("span",{ref:f,className:vt.dynamic([["2433456263",[ze.grey400,ze.grey600,Jt.focus,ze.grey600,ze.grey900,ze.grey600,ze.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,ze.grey500,ze.grey500]]])},c),he.createElement(vt,{id:"2433456263",dynamic:[ze.grey400,ze.grey600,Jt.focus,ze.grey600,ze.grey900,ze.grey600,ze.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,ze.grey500,ze.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${ze.grey400};color:${ze.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${Jt.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${ze.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${ze.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${ze.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${ze.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${Jt.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${Jt.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${ze.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${ze.grey500};}`]))});fp.propTypes={children:X.node,className:X.string,dataTest:X.string,disabled:X.bool,icon:X.element,selected:X.bool,onClick:X.func};fp.displayName="Tab";const BM=250,BF=.5;function $F(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=i.scrollLeft,n=UF(i,r,t),a=n-r,c=VF({scrollBox:i,callback:e,startValue:r,endValue:n,change:a});window.requestAnimationFrame(c)}function UF(i,e,t){const r=i.clientWidth*BF;return Math.floor(e+r*(t?-1:1))}function VF(i){let{scrollBox:e,callback:t,startValue:r,endValue:n,change:a}=i,c,s,h;return function f(m){c||(c=m),s=m-c,h=HF({currentTime:s,startValue:r,change:a}),s>=BM?(h!==n&&(e.scrollLeft=n),t&&t()):(e.scrollLeft=h,window.requestAnimationFrame(f))}}function HF(i){let{currentTime:e,startValue:t,change:r}=i;return(e/=BM/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t}let ky;const z1="__vertical-scrollbar-height-test__",GF=`
    .${z1} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${z1}::-webkit-scrollbar {
        display: none;
    }
`;function qF(){if(ky)return ky;const i=document.createElement("style");i.innerHTML=GF;const e=document.createElement("div");return e.classList.add(z1),document.body.appendChild(i),document.body.appendChild(e),ky=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),ky}const D0=i=>{let{children:e,disabled:t,hidden:r,onClick:n}=i;return he.createElement("button",{onClick:t?void 0:n,className:vt.dynamic([["2701682090",[ze.white,ze.grey400,ze.grey600,ze.grey100,ze.grey200,ze.grey500]]])+" "+(ir("scroll-button",{disabled:t,hidden:r})||"")},e,he.createElement(vt,{id:"2701682090",dynamic:[ze.white,ze.grey400,ze.grey600,ze.grey100,ze.grey200,ze.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${ze.white};border:none;border-bottom:1px solid ${ze.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${ze.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${ze.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${ze.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${ze.grey500};}`]))};D0.displayName="ScrollButton";D0.propTypes={children:X.any.isRequired,disabled:X.bool,hidden:X.bool,onClick:X.func};function lc(i,e,t){return(e=WF(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function WF(i){var e=YF(i,"string");return typeof e=="symbol"?e:e+""}function YF(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class $M extends Ae.Component{constructor(e){super(e),lc(this,"scrollBox",Ae.createRef()),lc(this,"scrollArea",Ae.createRef()),lc(this,"horizontalScrollBarHeight",qF()),lc(this,"scrollBoxResizeObserver",null),lc(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:r}=this.scrollArea,n=r.offsetWidth,a=t.offsetWidth,c=n<=a;this.setState({hideScrollButtons:c}),c||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),lc(this,"scrollRight",()=>this.scroll()),lc(this,"scrollLeft",()=>this.scroll(!0)),lc(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),lc(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:r}=this.scrollBox.current,{offsetWidth:n}=this.scrollArea.current,a=t<=0,c=t+r>=n;(this.state.scrolledToStart!==a||this.state.scrolledToEnd!==c)&&this.setState({scrolledToStart:a,scrolledToEnd:c})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),$F(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const r=t.offsetLeft+t.offsetWidth;r>e.offsetWidth&&(e.scrollLeft=r-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:r,hideScrollButtons:n}=this.state,{children:a,className:c,dataTest:s}=this.props,h=!r||n;return he.createElement("div",{"data-test":s,className:"jsx-191575146 "+vt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(ir("scroll-bar",c)||"")},he.createElement(D0,{disabled:e,onClick:this.scrollLeft,hidden:h},he.createElement($w,null)),he.createElement("div",{className:"jsx-191575146 "+vt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},he.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+vt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},he.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+vt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},a))),he.createElement(D0,{disabled:t,onClick:this.scrollRight,hidden:h},he.createElement(Uw,null)),he.createElement(vt,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),he.createElement(vt,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}$M.propTypes={children:X.node.isRequired,dataTest:X.string.isRequired,className:X.string};const j1=i=>{let{children:e,fixed:t,dataTest:r}=i;const n=Ae.useRef(null),a=Ae.useMemo(()=>he.Children.map(e,()=>he.createRef()),[e]),c=s=>{const h=document.activeElement;if(n.current&&n.current===h){a.length>0&&a[0].current&&a[0].current.focus();return}const f=a.findIndex(m=>m.current===h);if(f!==-1){if(s.key==="ArrowRight"){s.preventDefault();const m=(f+1)%a.length;a[m].current.focus()}if(s.key==="ArrowLeft"){s.preventDefault();const m=(f-1+a.length)%a.length;a[m].current.focus()}}};return he.createElement("div",{ref:n,"data-test":r,role:"tablist",tabIndex:0,onKeyDown:c,className:vt.dynamic([["771129571",[ze.grey400,ze.white]]])+" "+(ir({fixed:t})||"")},he.Children.map(e,(s,h)=>he.isValidElement(s)?he.cloneElement(s,{ref:a[h]}):he.createElement("span",{ref:a[h],tabIndex:-1,className:vt.dynamic([["771129571",[ze.grey400,ze.white]]])},s)),he.createElement(vt,{id:"771129571",dynamic:[ze.grey400,ze.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${ze.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${ze.white};}`]))};j1.propTypes={dataTest:X.string.isRequired,children:X.node,fixed:X.bool};const U_=i=>{let{fixed:e,children:t,className:r,scrollable:n,dataTest:a="dhis2-uicore-tabbar"}=i;return n?he.createElement("div",{className:r,"data-test":a},he.createElement($M,{dataTest:`${a}-scrollbar`},he.createElement(j1,{fixed:e,dataTest:`${a}-tabs`},t))):he.createElement("div",{className:r,"data-test":a},he.createElement(j1,{fixed:e,dataTest:`${a}-tabs`},t))};U_.propTypes={children:X.node,className:X.string,dataTest:X.string,fixed:X.bool,scrollable:X.bool};var Id=[],ZF=function(){return Id.some(function(i){return i.activeTargets.length>0})},XF=function(){return Id.some(function(i){return i.skippedTargets.length>0})},oS="ResizeObserver loop completed with undelivered notifications.",KF=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:oS}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=oS),window.dispatchEvent(i)},jm;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(jm||(jm={}));var Pd=function(i){return Object.freeze(i)},QF=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,Pd(this)}return i}(),UM=function(){function i(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Pd(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,r=e.y,n=e.top,a=e.right,c=e.bottom,s=e.left,h=e.width,f=e.height;return{x:t,y:r,top:n,right:a,bottom:c,left:s,width:h,height:f}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),V_=function(i){return i instanceof SVGElement&&"getBBox"in i},VM=function(i){if(V_(i)){var e=i.getBBox(),t=e.width,r=e.height;return!t&&!r}var n=i,a=n.offsetWidth,c=n.offsetHeight;return!(a||c||i.getClientRects().length)},lS=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},JF=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},xm=typeof window<"u"?window:{},My=new WeakMap,cS=/auto|scroll/,eB=/^tb|vertical/,tB=/msie|trident/i.test(xm.navigator&&xm.navigator.userAgent),ml=function(i){return parseFloat(i||"0")},sp=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new QF((t?e:i)||0,(t?i:e)||0)},uS=Pd({devicePixelContentBoxSize:sp(),borderBoxSize:sp(),contentBoxSize:sp(),contentRect:new UM(0,0,0,0)}),HM=function(i,e){if(e===void 0&&(e=!1),My.has(i)&&!e)return My.get(i);if(VM(i))return My.set(i,uS),uS;var t=getComputedStyle(i),r=V_(i)&&i.ownerSVGElement&&i.getBBox(),n=!tB&&t.boxSizing==="border-box",a=eB.test(t.writingMode||""),c=!r&&cS.test(t.overflowY||""),s=!r&&cS.test(t.overflowX||""),h=r?0:ml(t.paddingTop),f=r?0:ml(t.paddingRight),m=r?0:ml(t.paddingBottom),y=r?0:ml(t.paddingLeft),g=r?0:ml(t.borderTopWidth),b=r?0:ml(t.borderRightWidth),v=r?0:ml(t.borderBottomWidth),_=r?0:ml(t.borderLeftWidth),T=y+f,k=h+m,w=_+b,E=g+v,A=s?i.offsetHeight-E-i.clientHeight:0,M=c?i.offsetWidth-w-i.clientWidth:0,S=n?T+w:0,N=n?k+E:0,Y=r?r.width:ml(t.width)-S-M,Z=r?r.height:ml(t.height)-N-A,K=Y+T+M+w,B=Z+k+A+E,F=Pd({devicePixelContentBoxSize:sp(Math.round(Y*devicePixelRatio),Math.round(Z*devicePixelRatio),a),borderBoxSize:sp(K,B,a),contentBoxSize:sp(Y,Z,a),contentRect:new UM(y,h,Y,Z)});return My.set(i,F),F},GM=function(i,e,t){var r=HM(i,t),n=r.borderBoxSize,a=r.contentBoxSize,c=r.devicePixelContentBoxSize;switch(e){case jm.DEVICE_PIXEL_CONTENT_BOX:return c;case jm.BORDER_BOX:return n;default:return a}},iB=function(){function i(e){var t=HM(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Pd([t.borderBoxSize]),this.contentBoxSize=Pd([t.contentBoxSize]),this.devicePixelContentBoxSize=Pd([t.devicePixelContentBoxSize])}return i}(),qM=function(i){if(VM(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},rB=function(){var i=1/0,e=[];Id.forEach(function(c){if(c.activeTargets.length!==0){var s=[];c.activeTargets.forEach(function(f){var m=new iB(f.target),y=qM(f.target);s.push(m),f.lastReportedSize=GM(f.target,f.observedBox),y<i&&(i=y)}),e.push(function(){c.callback.call(c.observer,s,c.observer)}),c.activeTargets.splice(0,c.activeTargets.length)}});for(var t=0,r=e;t<r.length;t++){var n=r[t];n()}return i},dS=function(i){Id.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(qM(n.target)>i?t.activeTargets.push(n):t.skippedTargets.push(n))})})},nB=function(){var i=0;for(dS(i);ZF();)i=rB(),dS(i);return XF()&&KF(),i>0},fb,WM=[],sB=function(){return WM.splice(0).forEach(function(i){return i()})},aB=function(i){if(!fb){var e=0,t=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return sB()}).observe(t,r),fb=function(){t.textContent="".concat(e?e--:e++)}}WM.push(i),fb()},oB=function(i){aB(function(){requestAnimationFrame(i)})},a0=0,lB=function(){return!!a0},cB=250,uB={attributes:!0,characterData:!0,childList:!0,subtree:!0},hS=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],pS=function(i){return i===void 0&&(i=0),Date.now()+i},mb=!1,dB=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=cB),!mb){mb=!0;var r=pS(e);oB(function(){var n=!1;try{n=nB()}finally{if(mb=!1,e=r-pS(),!lB())return;n?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,uB)};document.body?t():xm.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),hS.forEach(function(t){return xm.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),hS.forEach(function(t){return xm.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),O1=new dB,fS=function(i){!a0&&i>0&&O1.start(),a0+=i,!a0&&O1.stop()},hB=function(i){return!V_(i)&&!JF(i)&&getComputedStyle(i).display==="inline"},pB=function(){function i(e,t){this.target=e,this.observedBox=t||jm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=GM(this.target,this.observedBox,!0);return hB(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),fB=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),Ay=new WeakMap,mS=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},Iy=function(){function i(){}return i.connect=function(e,t){var r=new fB(e,t);Ay.set(e,r)},i.observe=function(e,t,r){var n=Ay.get(e),a=n.observationTargets.length===0;mS(n.observationTargets,t)<0&&(a&&Id.push(n),n.observationTargets.push(new pB(t,r&&r.box)),fS(1),O1.schedule())},i.unobserve=function(e,t){var r=Ay.get(e),n=mS(r.observationTargets,t),a=r.observationTargets.length===1;n>=0&&(a&&Id.splice(Id.indexOf(r),1),r.observationTargets.splice(n,1),fS(-1))},i.disconnect=function(e){var t=this,r=Ay.get(e);r.observationTargets.slice().forEach(function(n){return t.unobserve(e,n.target)}),r.activeTargets.splice(0,r.activeTargets.length)},i}(),mB=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Iy.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!lS(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Iy.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!lS(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Iy.unobserve(this,e)},i.prototype.disconnect=function(){Iy.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const YM=he[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],gB=i=>{const e=Ae.useRef(i);return Ae.useEffect(()=>{e.current=i}),e},yB=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:mB;function vB(){}function xB(i,e){const t=wB(),r=gB(e);return YM(()=>{let n=!1;const a=i&&"current"in i?i.current:i;if(!a)return vB;function c(s,h){n||r.current(s,h)}return t.subscribe(a,c),()=>{n=!0,t.unsubscribe(a,c)}},[i,t,r]),t.observer}function bB(){let i=!1,e=[];const t=new Map,r=new yB((n,a)=>{e=e.concat(n);function c(){const s=new Set;for(let h=0;h<e.length;h++){if(s.has(e[h].target))continue;s.add(e[h].target);const f=t.get(e[h].target);f==null||f.forEach(m=>m(e[h],a))}e=[],i=!1}i||window.requestAnimationFrame(c),i=!0});return{observer:r,subscribe(n,a){var c;r.observe(n);const s=(c=t.get(n))!==null&&c!==void 0?c:[];s.push(a),t.set(n,s)},unsubscribe(n,a){var c;const s=(c=t.get(n))!==null&&c!==void 0?c:[];if(s.length===1){r.unobserve(n),t.delete(n);return}const h=s.indexOf(a);h!==-1&&s.splice(h,1),t.set(n,s)}}}let gb;const wB=()=>gb||(gb=bB()),_B=(i,e)=>{const[t,r]=Ae.useState(()=>{var n,a;const c=i&&"current"in i?i.current:i;return c?[c.offsetWidth,c.offsetHeight]:[(n=void 0)!==null&&n!==void 0?n:0,(a=void 0)!==null&&a!==void 0?a:0]});return YM(()=>{const n=i&&"current"in i?i.current:i;n&&r([n.offsetWidth,n.offsetHeight])},[i]),xB(i,n=>{const a=n.target;r([a.offsetWidth,a.offsetHeight])}),t},ZM=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:n,onClick:a,menuRef:c}=i;return he.createElement(Wm,{onBackdropClick:a,transparent:!0},he.createElement(Bd,{reference:c,placement:"bottom",observeReferenceResize:!0},he.createElement("div",{"data-test":`${t}-menuwrapper`,className:vt.dynamic([["1686499909",[n,r]]])+" card"},he.createElement(Ym,null,e))),he.createElement(vt,{id:"1686499909",dynamic:[n,r]},[`.card.__jsx-style-dynamic-selector{width:${n};max-height:${r};}`]))};ZM.propTypes={dataTest:X.string.isRequired,menuRef:X.object.isRequired,menuWidth:X.string.isRequired,children:X.node,maxHeight:X.string,onClick:X.func};const XM=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:r,loading:n,onClose:a,onSearch:c,onSelect:s,placeholder:h,search:f,searchResults:m}=i;const y=Ae.useRef(null),[g]=_B(y),{isDisconnected:b}=cv();return he.createElement(he.Fragment,null,he.createElement("div",{ref:y},he.createElement(Rl,{label:r,loading:n,placeholder:h,onChange:v=>{let{value:_}=v;return c(_)},value:f,inputWidth:t,disabled:b,helpText:b?be.t("Not available offline"):""})),m.length>0&&he.createElement(ZM,{onClick:a,menuWidth:`${g}px`,menuRef:y,dataTest:`${e}-menu`},he.createElement(zw,null,m.map(v=>he.createElement(es,{key:v.id,label:v.displayName,value:v.id,onClick:_=>{let{value:T}=_;return s(T)}})))))};XM.propTypes={searchResults:X.arrayOf(X.shape({displayName:X.string,id:X.string})).isRequired,dataTest:X.string,inputWidth:X.string,label:X.string,loading:X.bool,placeholder:X.string,search:X.string,onClose:X.func,onSearch:X.func,onSelect:X.func};const CB={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},KM=i=>{var e,t;let{selected:r,onSelection:n}=i;const[a,c]=Ae.useState(""),[s,h]=Ae.useState(!1),{data:f,refetch:m,fetching:y}=qa(CB,{lazy:!0,onComplete:()=>h(!0)});Ae.useEffect(()=>c(r),[r]);const g=Ae.useCallback(GO(m,250),[m]);Ae.useEffect(()=>{a&&a===r||(a?g({search:a}):(n(null),h(!1)))},[a]);let b=[];if(f!=null&&(e=f.search)!==null&&e!==void 0&&e.users){const v=f.search.users.map(_=>({..._,type:"user"}));b=b.concat(v)}if(f!=null&&(t=f.search)!==null&&t!==void 0&&t.userGroups){const v=f.search.userGroups.map(_=>({..._,type:"group"}));b=b.concat(v)}return he.createElement(XM,{inputWidth:"100%",label:be.t("User or group"),loading:y,placeholder:be.t("Search"),search:a,searchResults:s?b:[],onClose:()=>h(!1),onSearch:c,onSelect:v=>{n(b.find(_=>_.id===v)),h(!1)}})};KM.propTypes={onSelection:X.func.isRequired,selected:X.string};const Iv=i=>{let{children:e}=i;return he.createElement(he.Fragment,null,he.createElement("h2",{className:vt.dynamic([["2416527184",[ze.grey900]]])},e),he.createElement(vt,{id:"2416527184",dynamic:[ze.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${ze.grey900};}`]))};Iv.propTypes={children:X.node.isRequired};const F1=i=>{let{onAdd:e,dataSharing:t}=i;const r=Ae.useContext(P0),[n,a]=Ae.useState(null),[c,s]=Ae.useState(""),[h,f]=Ae.useState(""),{isDisconnected:m}=cv(),y=v=>{v.preventDefault(),e({type:n.type,id:n.id,name:n.displayName||n.name,access:{data:c,metadata:h}}),a(null),s(""),f("")},g=[{value:cn,label:be.t("View only")},{value:mn,label:be.t("View and edit")}],b=[...g,{value:br,label:be.t("No access")}];return he.createElement(he.Fragment,null,he.createElement(Iv,null,be.t("Give access to a user or group")),he.createElement("form",{onSubmit:y,className:vt.dynamic([["3476690250",[ze.grey100,ze.grey900,Bt.dp8]]])},he.createElement("div",{className:vt.dynamic([["3476690250",[ze.grey100,ze.grey900,Bt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},he.createElement(KM,{selected:(n==null?void 0:n.displayName)||(n==null?void 0:n.name),onSelection:a})),he.createElement("div",{className:vt.dynamic([["3476690250",[ze.grey100,ze.grey900,Bt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&he.createElement("div",{className:vt.dynamic([["3476690250",[ze.grey100,ze.grey900,Bt.dp8]]])+" select-wrapper"},he.createElement(ls,{label:be.t("Data access level"),placeholder:be.t("Choose a level"),disabled:m,selected:c,helpText:m?be.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s(_)}},b.map(v=>{let{value:_,label:T}=v;return he.createElement(Cs,{key:_,label:T,value:_,active:_===c})}))),he.createElement("div",{className:vt.dynamic([["3476690250",[ze.grey100,ze.grey900,Bt.dp8]]])+" select-wrapper"},he.createElement(ls,{label:t?be.t("Metadata access level"):be.t("Access level"),placeholder:be.t("Choose a level"),disabled:m,selected:h,helpText:m?be.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return f(_)}},(t?b:g).map(v=>{let{value:_,label:T}=v;return he.createElement(Cs,{key:_,label:T,value:_,active:_===h})}))),he.createElement(Ci,{type:"submit",disabled:m||r||!n||t&&!c||!h||c===br&&h===br},be.t("Give access")))),he.createElement(vt,{id:"3476690250",dynamic:[ze.grey100,ze.grey900,Bt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${ze.grey100};color:${ze.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Bt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};F1.propTypes={onAdd:X.func.isRequired,dataSharing:X.bool};const B1=i=>{let{label:e,onClick:t}=i;return he.createElement("div",{onClick:t,className:vt.dynamic([["1009072197",[ze.red700,Bt.dp8,Bt.dp12,ze.red050]]])},e,he.createElement(vt,{id:"1009072197",dynamic:[ze.red700,Bt.dp8,Bt.dp12,ze.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${ze.red700};padding:${Bt.dp8} ${Bt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${ze.red050};}`]))};B1.propTypes={label:X.string.isRequired,onClick:X.func.isRequired};const TB={[Wd]:be.t("Anyone logged in"),[Ap]:be.t("User group"),[Yd]:be.t("User")},QM=i=>{var e;let{target:t,id:r}=i;return he.createElement(he.Fragment,null,he.createElement("p",{className:vt.dynamic([["2525483302",[ze.grey700]]])},t===Yd?r:(e=TB[t])!==null&&e!==void 0?e:""),he.createElement(vt,{id:"2525483302",dynamic:[ze.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${ze.grey700};margin:6px 0 0 0;padding:0;}`]))};QM.propTypes={target:X.oneOf([Wd,Ap,Yd]).isRequired,id:X.string};const JM=i=>{let{target:e,name:t}=i;switch(e){case $_:return he.createElement(Y3,{color:ze.grey600});case Wd:case Ap:return he.createElement($3,{color:ze.grey600});case Yd:return he.createElement(vR,{name:t,small:!0});default:return null}};JM.propTypes={target:X.oneOf([$_,Wd,Yd,Ap]).isRequired,name:X.string};const gS=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===br:!0},o0=i=>{let{name:e,id:t,target:r,access:n,accessOptions:a,disabled:c,onChange:s,onRemove:h,dataSharing:f,allUsersItem:m=!1}=i;const y=Ae.useContext(P0),{isDisconnected:g}=cv(),b={ACCESS_NONE:be.t("No access"),ACCESS_VIEW_ONLY:be.t("View only"),ACCESS_VIEW_AND_EDIT:be.t("View and edit")};return he.createElement(he.Fragment,null,he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" wrapper"},he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" "+((f?"detailsWithData":"detailsMetadata")||"")},he.createElement(JM,{target:r,name:e}),he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" details-text"},he.createElement("p",{className:vt.dynamic([["650548845",[ze.grey900]]])+" details-name"},e),he.createElement(QM,{target:r,id:t}))),he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" "+((f?"selectWrapperWithData":"selectWrapperMetadata")||"")},f&&he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" select"},he.createElement(ls,{disabled:c||g||y,prefix:be.t("Data"),selected:n.data,helpText:g?be.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s({...n,data:_})}},a.map(v=>he.createElement(Cs,{key:v,label:b[v],value:v,active:v===n.data})),aS(r)&&gS({accessOtherField:n.metadata,dataSharing:f})&&he.createElement(B1,{onClick:h,label:be.t("Remove access")}))),he.createElement("div",{className:vt.dynamic([["650548845",[ze.grey900]]])+" select"},he.createElement(ls,{disabled:c||g||y,prefix:be.t("Metadata"),selected:n.metadata,helpText:g?be.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s({...n,metadata:_})}},a.map(v=>he.createElement(Cs,{key:v,label:b[v],value:v,active:v===n.metadata,disabled:!m&&v===br&&!f})),aS(r)&&gS({accessOtherField:n.data,dataSharing:f})&&he.createElement(B1,{onClick:h,label:be.t("Remove access")}))))),he.createElement(xR,null),he.createElement(vt,{id:"650548845",dynamic:[ze.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${ze.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};o0.propTypes={access:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,accessOptions:X.arrayOf(X.oneOf([br,cn,mn])).isRequired,dataSharing:X.bool.isRequired,name:X.string.isRequired,target:X.oneOf([Wd,Ap,Yd]).isRequired,onChange:X.func.isRequired,allUsersItem:X.bool,disabled:X.bool,id:X.string,onRemove:X.func};const $1=i=>{let{onChange:e,onRemove:t,publicAccess:r,allowPublicAccess:n,users:a,groups:c,dataSharing:s}=i;const h=[br,cn,mn];return he.createElement(he.Fragment,null,he.createElement(Iv,null,be.t("Users and groups that currently have access")),he.createElement("div",{className:vt.dynamic([["3415079234",[ze.grey200,ze.grey900]]])+" header"},he.createElement("div",{className:vt.dynamic([["3415079234",[ze.grey200,ze.grey900]]])+" "+((s?"header-start-column-data":"header-start-column-metadata")||"")},be.t("User / Group")),he.createElement("div",{className:vt.dynamic([["3415079234",[ze.grey200,ze.grey900]]])+" "+((s?"header-end-column-data":"header-end-column-metadata")||"")},he.createElement("span",{className:vt.dynamic([["3415079234",[ze.grey200,ze.grey900]]])+" hea"},be.t("Access level")))),he.createElement("div",{className:vt.dynamic([["3415079234",[ze.grey200,ze.grey900]]])+" list"},he.createElement(o0,{name:be.t("All users"),target:Wd,access:r,accessOptions:h,disabled:!n,onChange:f=>e({type:"public",access:f}),dataSharing:s,allUsersItem:!0}),c.map(f=>{let{id:m,name:y,access:g}=f;return he.createElement(o0,{key:m,name:y,target:Ap,access:g,accessOptions:h,onChange:b=>e({type:"group",id:m,access:b}),onRemove:()=>t({type:"group",id:m}),dataSharing:s})}),a.map(f=>{let{id:m,name:y,access:g}=f;return g&&he.createElement(o0,{key:m,id:m,name:y,target:Yd,access:g,accessOptions:h,onChange:b=>e({type:"user",id:m,access:b}),onRemove:()=>t({type:"user",id:m}),dataSharing:s})})),he.createElement(vt,{id:"3415079234",dynamic:[ze.grey200,ze.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${ze.grey200};color:${ze.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};$1.propTypes={allowPublicAccess:X.bool.isRequired,dataSharing:X.bool.isRequired,groups:X.arrayOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])})})).isRequired,publicAccess:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,users:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,onChange:X.func.isRequired,onRemove:X.func.isRequired};const eA=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},SB=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:r,updatedItems:n}=i;if(r){if(n===0)return be.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(n&&e)return be.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:n,failed:t-n})}return n===0?be.t("No visualizations were updated because sharing settings are already sufficient."):n===t?be.t("Successfully updated sharing for all visualizations."):n<t?be.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:n,skipped:t-n}):""},EB=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?be.t("There are no users or groups to apply sharing settings for."):be.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},tA=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:r,itemsCount:n}=i;const a=eA(r);if(!a)return null;const c=SB({visualizationsCount:a,itemsCount:n,hasErrors:e,updatedItems:t});return he.createElement(da,null,c)};tA.propTypes={dashboardItems:X.array.isRequired,hasErrors:X.bool.isRequired,itemsCount:X.number.isRequired,updatedItems:X.number.isRequired};const kB={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},iA=i=>{let{id:e,entityAmount:t}=i;const{data:r,loading:n}=qa(kB,{variables:{id:e}});if(n)return null;const{dashboard:a}=r,c=eA(a.dashboardItems);if(!c)return null;const s=EB({visualizationsCount:c,entityAmount:t});return he.createElement(da,null,s)};iA.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const MB={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},rA=i=>{var e;let{id:t,entityAmount:r}=i;const{isDisconnected:n}=cv(),{data:a,refetch:c}=qa(MB,{variables:{id:t}});Ae.useEffect(()=>{c({id:t})},[c,t]);const s=Ud(),[h,f]=Ae.useState(!1),[m,y]=Ae.useState(!1),[g,b]=Ae.useState(null),[v,_]=Ae.useState(null),T={resource:`dashboards/cascadeSharing/${t}`,type:"create"},k=()=>{f(!0),y(!0),_(null),b(null),s.mutate(T).then(A=>{_(A)}).catch(A=>{b(A.message||be.t("Something went wrong"))}).finally(()=>{y(!1)})},w=(v==null||(e=v.errorReports)===null||e===void 0?void 0:e.length)>0,E=v==null?void 0:v.countUpdatedDashboardItems;return he.createElement(he.Fragment,null,!h&&he.createElement(iA,{id:t,entityAmount:r}),g&&he.createElement(Qy,{marginTop:Bt.dp12},he.createElement(da,{error:!0},g)),a&&v&&he.createElement(Qy,{marginTop:Bt.dp12},he.createElement(tA,{hasErrors:w,updatedItems:E,dashboardItems:a.dashboard.dashboardItems,itemsCount:a.dashboard.itemsCount})),he.createElement(Qy,{marginTop:Bt.dp12},he.createElement(Ci,{type:"button",disabled:n||m||!r,loading:m,secondary:!0,onClick:k},be.t("Apply sharing to dashboard visualizations"))))};rA.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const AB=()=>he.createElement(he.Fragment,null,he.createElement("p",{className:vt.dynamic([["3321084332",[ze.grey800]]])},be.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),he.createElement("p",{className:vt.dynamic([["3321084332",[ze.grey800]]])},be.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),he.createElement("p",{className:vt.dynamic([["3321084332",[ze.grey800]]])},be.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),he.createElement(vt,{id:"3321084332",dynamic:[ze.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${ze.grey800};}`])),nA=i=>{let{id:e,entityAmount:t}=i;return he.createElement(he.Fragment,null,he.createElement(Iv,null,be.t("Apply dashboard sharing settings to visualizations")),he.createElement(AB,null),he.createElement(rA,{id:e,entityAmount:t}))};nA.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const U1=i=>{let{type:e,users:t,groups:r,publicAccess:n,allowPublicAccess:a,id:c,onAdd:s,onChange:h,onRemove:f,dataSharing:m,cascadeDashboardSharing:y}=i;const[g,b]=Ae.useState(0);return e===jM.DASHBOARD&&y?he.createElement(he.Fragment,null,he.createElement(U_,null,he.createElement(fp,{onClick:()=>b(0),selected:g===0},be.t("Dashboard sharing")),he.createElement(fp,{onClick:()=>b(1),selected:g===1},be.t("Apply sharing to dashboard visualizations"))),he.createElement("div",null,g===0&&he.createElement(he.Fragment,null,he.createElement(F1,{onAdd:s,dataSharing:m}),he.createElement($1,{users:t,groups:r,publicAccess:n,allowPublicAccess:a,onChange:h,onRemove:f,dataSharing:m})),g===1&&he.createElement(nA,{id:c,entityAmount:t.length+r.length}))):he.createElement(he.Fragment,null,he.createElement(F1,{onAdd:s,dataSharing:m}),he.createElement($1,{users:t,groups:r,publicAccess:n,allowPublicAccess:a,onChange:h,onRemove:f,dataSharing:m}))};U1.propTypes={allowPublicAccess:X.bool.isRequired,cascadeDashboardSharing:X.bool.isRequired,dataSharing:X.bool.isRequired,groups:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,id:X.string.isRequired,publicAccess:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,type:X.oneOf(OM).isRequired,users:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,onAdd:X.func.isRequired,onChange:X.func.isRequired,onRemove:X.func.isRequired};const IB={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},PB={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},yb=()=>{},DB={name:"",allowPublic:!0,public:{data:br,metadata:br},groups:[],users:[]},RB=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:br,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:br,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:br,metadata:t.access}}:t),e},sA=i=>{let{id:e,type:t,onClose:r=yb,onError:n=yb,onSave:a=yb,initialSharingSettings:c=DB,dataTest:s="dhis2-uicore-sharingdialog",dataSharing:h=!1,cascadeDashboardSharing:f=!0}=i;const{show:m}=ha(K=>K,{critical:!0}),y=RB(c),{data:g,refetch:b,loading:v,fetching:_}=qa(IB,{variables:{id:e,type:t},onError:K=>{m(K),n(K)}}),[T,{loading:k}]=mM(PB,{variables:{type:t,id:e},onError:K=>{m(K),n(K),b()},onComplete:()=>{b(),a()}});if(Ae.useEffect(()=>{b({type:t,id:e})},[t,e]),v){const K=Object.keys(c.users).map(Ey),B=Object.keys(c.groups).map(Ey);return he.createElement(P0.Provider,{value:!0},he.createElement(N1,{onClose:r},he.createElement(U1,{id:e,users:K,groups:B,publicAccess:y.public,allowPublicAccess:y.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:h,cascadeDashboardSharing:f})))}const{object:w,meta:E}=g.sharing,A=FM(w.publicAccess),M=w.userAccesses.map(Ey),S=w.userGroupAccesses.map(Ey),N=K=>{let{type:B,id:F,access:O,name:R}=K;const L=YO({object:w,type:B,access:O,id:F,name:R});T({data:L,type:t,id:e})},Y=K=>{let{type:B,id:F,access:O}=K;const R=WO({object:w,type:B,access:O,id:F});T({data:R,type:t,id:e})},Z=K=>{let{type:B,id:F}=K;const O=ZO({object:w,type:B,id:F});T({data:O,type:t,id:e})};return he.createElement(P0.Provider,{value:k||_},he.createElement(N1,{onClose:r,name:w.displayName||w.name,dataTest:s},he.createElement(U1,{id:e,users:M,groups:S,publicAccess:A,allowPublicAccess:E.allowPublicAccess,type:t,onAdd:N,onChange:Y,onRemove:Z,dataSharing:h,cascadeDashboardSharing:f})))};sA.propTypes={id:X.string.isRequired,type:X.oneOf(OM).isRequired,cascadeDashboardSharing:X.bool,dataSharing:X.bool,dataTest:X.string,initialSharingSettings:X.shape({allowPublic:X.bool.isRequired,groups:X.objectOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.oneOfType([X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}),X.oneOf([br,cn,mn])])})),name:X.string,public:X.oneOfType([X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}),X.oneOf([br,cn,mn])]),users:X.objectOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.oneOfType([X.shape({data:X.oneOf([br,cn,mn]),metadata:X.oneOf([br,cn,mn])}),X.oneOf([br,cn,mn])])}))}),onClose:X.func,onError:X.func,onSave:X.func};function V1(){return V1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},V1.apply(null,arguments)}const H_=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-table",layout:a="auto",role:c,borderless:s,width:h="100%",...f}=i;return he.createElement("table",V1({},f,{"data-test":n,ref:e,role:c,className:vt.dynamic([["3140496910",[a,h,ze.grey300]]])+" "+(ir(r,{borderless:s})||"")}),t,he.createElement(vt,{id:"3140496910",dynamic:[a,h,ze.grey300]},[`table.__jsx-style-dynamic-selector{table-layout:${a};border-collapse:separate;border-spacing:0;width:${h};box-sizing:border-box;border:1px solid ${ze.grey300};}`,"table.borderless.__jsx-style-dynamic-selector{border:none;}"]))});H_.displayName="Table";H_.propTypes={borderless:X.bool,children:X.node,className:X.string,dataTest:X.string,layout:X.oneOf(["auto","fixed","initial","inherit"]),role:X.string,width:X.string};function H1(){return H1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},H1.apply(null,arguments)}const Pv=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablebody",role:a,loading:c,...s}=i;return he.createElement("tbody",H1({},s,{"data-test":n,ref:e,role:a,className:vt.dynamic([["2478922139",[ze.blue600]]])+" "+(ir(r,{loading:c})||"")}),t,he.createElement(vt,{id:"2478922139",dynamic:[ze.blue600]},["tbody.__jsx-style-dynamic-selector{position:relative;}",".loading.__jsx-style-dynamic-selector:before{content:'';position:absolute;top:0;bottom:0;inset-inline-start:0;inset-inline-end:0;background-color:rgba(255,255,255,0.8);}",`.loading.__jsx-style-dynamic-selector:after{content:'';position:absolute;top:calc(50% - 24px);inset-inline-start:calc(50% - 24px);width:48px;height:48px;border:6px solid rgba(110,122,138,0.15);border-bottom-color:${ze.blue600};border-radius:50%;-webkit-animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;}`,"@-webkit-keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]))});Pv.displayName="TableBody";Pv.propTypes={children:X.node,className:X.string,dataTest:X.string,loading:X.bool,role:X.string};const l0=[`td.jsx-533878895{padding:14px 12px;font-size:14px;border:1px solid transparant;border-bottom:1px solid ${ze.grey300};color:${ze.grey900};}`,`td.active.jsx-533878895{outline:2px solid ${ze.grey600};outline-offset:-2px;}`,`td.bordered.jsx-533878895{border-inline-end:1px solid ${ze.grey300};}`,"td.bordered.jsx-533878895:last-child{border-inline-end:1px solid transparent;}",`td.error.jsx-533878895{color:${ze.red700};}`,`td.muted.jsx-533878895{color:${ze.grey700};font-style:italic;}`,`td.valid.jsx-533878895{color:${ze.green700};}`,"td.large.jsx-533878895{padding:20px 12px;font-size:16px;}","tr:last-child td.jsx-533878895{border-bottom:1px solid transparent;}",`tfoot tr:first-child td.jsx-533878895{border-top:1px solid ${ze.grey300};}`];l0.__hash="533878895";function G1(){return G1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},G1.apply(null,arguments)}const LB={left:"right",right:"left",center:"center"},Ip=Ae.forwardRef((i,e)=>{var t;let{active:r,align:n="left",backgroundColor:a,bordered:c,children:s,className:h,colSpan:f,dataTest:m="dhis2-uicore-tabledatacel",error:y,large:g,left:b="auto",muted:v,role:_,rowSpan:T,scope:k,staticStyle:w,valid:E,width:A="auto",onClick:M,...S}=i;const N=(t=LB[n])!==null&&t!==void 0?t:n;return he.createElement("td",G1({},S,{ref:e,colSpan:f,rowSpan:T,onClick:M,"data-test":m,role:_,scope:k,className:`jsx-${l0.__hash} `+vt.dynamic([["836058623",[b,n,A,a||ze.white,N,a||ze.teal100,a||ze.grey100,a||ze.grey200,a||"#cdeae8"]]])+" "+(ir(h,{active:r,bordered:c,error:y,large:g,muted:v,staticStyle:w,valid:E})||"")}),s,he.createElement(vt,{id:l0.__hash},l0),he.createElement(vt,{id:"836058623",dynamic:[b,n,A,a||ze.white,N,a||ze.teal100,a||ze.grey100,a||ze.grey200,a||"#cdeae8"]},[`td.__jsx-style-dynamic-selector{inset-inline-start:${b};text-align:${n};width:${A};background-color:${a||ze.white};}`,`.__jsx-style-dynamic-selector:dir(rtl){text-align:${N};}`,`tr.selected>td.__jsx-style-dynamic-selector{background-color:${a||ze.teal100};}`,`tr:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||ze.grey100};}`,`tr:active>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||ze.grey200};}`,`tr.selected:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||"#cdeae8"};}`]))});Ip.displayName="TableDataCell";const vb=lv(["valid","error","muted"],X.bool);Ip.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:vb,large:X.bool,left:Fn(i=>i.fixed,X.string),muted:vb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,valid:vb,width:X.string,onClick:X.func};const c0=[`th.jsx-2895298632{padding:12px;border:1px solid transparant;border-bottom:1px solid ${ze.grey300};color:${ze.grey800};font-weight:normal;font-size:14px;vertical-align:top;}`,"thead th.jsx-2895298632{padding:8px 12px;font-size:13px;}",`th.jsx-2895298632:last-of-type{border-inline-end:1px solid ${ze.grey300};}`,`th.active.jsx-2895298632{outline:2px solid ${ze.grey600};outline-offset:-2px;}`,`th.bordered.jsx-2895298632{border-inline-end:1px solid ${ze.grey300};}`,"th.bordered.jsx-2895298632:last-child{border-inline-end:1px solid transparent;}",`th.error.jsx-2895298632{color:${ze.red700};}`,`th.muted.jsx-2895298632{color:${ze.grey700};font-style:italic;}`,`th.valid.jsx-2895298632{color:${ze.green700};}`,"th.large.jsx-2895298632{padding:14px 12px;font-size:16px;}","thead th.large.jsx-2895298632{padding:13px 12px;font-size:15px;}","th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:1;}","thead th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:2;}","thead th.fixedHorizontally.jsx-2895298632{z-index:3;}","tr:last-child th.jsx-2895298632{border-bottom:1px solid transparent;}",`thead tr:last-child th.jsx-2895298632{border-bottom:1px solid ${ze.grey300};}`,`tfoot>tr:first-child th.jsx-2895298632{border-top:1px solid ${ze.grey300};}`];c0.__hash="2895298632";function q1(){return q1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},q1.apply(null,arguments)}const Py="auto",Dv=Ae.forwardRef((i,e)=>{let{active:t,align:r="left",backgroundColor:n,bordered:a,children:c,className:s,colSpan:h,dataTest:f="dhis2-uicore-tablecell",error:m,fixed:y,large:g,left:b=Py,muted:v,rowSpan:_,role:T,scope:k,staticStyle:w,top:E=Py,valid:A,width:M=Py,onClick:S,...N}=i;return he.createElement("th",q1({},N,{ref:e,colSpan:h,rowSpan:_,onClick:S,"data-test":f,role:T,scope:k,className:`jsx-${c0.__hash} `+vt.dynamic([["2588011372",[b,E,r,M,n||ze.grey200,n||ze.grey300,n||ze.grey300,n||ze.grey200]]])+" "+(ir(s,{active:t,bordered:a,error:m,fixed:y,fixedHorizontally:y&&b!==Py,large:g,muted:v,staticStyle:w,valid:A})||"")}),c,he.createElement(vt,{id:c0.__hash},c0),he.createElement(vt,{id:"2588011372",dynamic:[b,E,r,M,n||ze.grey200,n||ze.grey300,n||ze.grey300,n||ze.grey200]},[`th.__jsx-style-dynamic-selector{inset-inline-start:${b};top:${E};text-align:${r};width:${M};background-color:${n||ze.grey200};}`,`thead th.fixedHorizontally.__jsx-style-dynamic-selector{background-color:${n||ze.grey300};}`,`tbody>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle),tfoot>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${n||ze.grey300};}`,`tbody>tr:active>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${n||ze.grey200};}`]))});Dv.displayName="TableHeaderCell";const xb=lv(["valid","error","muted"],X.bool);Dv.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:xb,fixed:X.bool,large:X.bool,left:Fn(i=>i.fixed&&!i.top,X.string),muted:xb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,top:Fn(i=>i.fixed&&!i.left,X.string),valid:xb,width:X.string,onClick:X.func};function W1(){return W1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},W1.apply(null,arguments)}const Rv=Ae.forwardRef((i,e)=>{let{onClick:t,children:r,className:n,dataTest:a="dhis2-uicore-tableheadercellaction",title:c,...s}=i;return he.createElement("button",W1({},s,{"data-test":a,onClick:t,title:c,ref:e,className:vt.dynamic([["4225768774",[ze.grey400]]])+" "+(n||"")}),r,he.createElement(vt,{id:"4225768774",dynamic:[ze.grey400]},["button.__jsx-style-dynamic-selector{border:none;padding:0;background:transparent;width:24px;height:24px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;cursor:pointer;border-radius:4px;margin-inline-start:2px;}",`button.__jsx-style-dynamic-selector:hover,button.__jsx-style-dynamic-selector:focus-visible{background:${ze.grey400};}`,"button.__jsx-style-dynamic-selector:active,button.__jsx-style-dynamic-selector:focus{outline:none;}"]))});Rv.displayName="TableHeaderCellAction";Rv.propTypes={children:X.node,className:X.string,dataTest:X.string,title:X.string,onClick:X.func};function Y1(){return Y1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Y1.apply(null,arguments)}const Lv=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablefoot",role:a,...c}=i;return he.createElement("tfoot",Y1({},c,{className:r,"data-test":n,ref:e,role:a}),t)});Lv.displayName="TableFoot";Lv.propTypes={children:X.node,className:X.string,dataTest:X.string,role:X.string};function Z1(){return Z1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Z1.apply(null,arguments)}const Nv=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n,role:a,...c}=i;return he.createElement("thead",Z1({},c,{className:r,"data-test":n,ref:e,role:a}),t)});Nv.displayName="TableHead";Nv.propTypes={children:X.node,className:X.string,dataTest:X.string,role:X.string};function X1(){return X1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},X1.apply(null,arguments)}const zv=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablerow",draggable:a,role:c,selected:s,...h}=i;return he.createElement("tr",X1({},h,{ref:e,"data-test":n,role:c,className:"jsx-1820444258 "+(ir(r,{selected:s,draggable:a})||"")}),t,he.createElement(vt,{id:"1820444258"},["tbody>tr.draggable.jsx-1820444258,tfoot>tr.draggable.jsx-1820444258{cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))});zv.displayName="TableRow";zv.propTypes={children:X.node,className:X.string,dataTest:X.string,draggable:X.bool,role:X.string,selected:X.bool};function K1(){return K1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},K1.apply(null,arguments)}const G_=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablescrollbox",maxHeight:a="auto",maxWidth:c="auto",...s}=i;return he.createElement("div",K1({},s,{"data-test":n,ref:e,className:vt.dynamic([["2859562182",[ze.grey300,a,c]]])+" "+(r||"")}),t,he.createElement(vt,{id:"2859562182",dynamic:[ze.grey300,a,c]},[`div.__jsx-style-dynamic-selector{border:1px solid ${ze.grey300};border-top:none;box-sizing:border-box;max-height:${a};max-width:${c};overflow:auto;}`]))});G_.displayName="TableScrollBox";G_.propTypes={children:X.node,className:X.string,dataTest:X.string,maxHeight:X.string,maxWidth:X.string};const jv=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-datatable",layout:a="auto",role:c,scrollHeight:s,scrollWidth:h,width:f="100%"}=i;const m=!!(s||h),y=he.createElement(H_,{borderless:m,className:r,dataTest:n,layout:a,ref:e,role:c,width:f},t);return m?he.createElement(G_,{className:ir(r,"tablescrollbox"),dataTest:`${n}-scrollbox`,maxHeight:s,maxWidth:h},y):y});jv.displayName="DataTable";jv.propTypes={children:X.node,className:X.string,dataTest:X.string,layout:X.oneOf(["auto","fixed","initial","inherit"]),role:X.string,scrollHeight:X.string,scrollWidth:X.string,width:X.string};function Q1(){return Q1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Q1.apply(null,arguments)}const fu=Ae.forwardRef((i,e)=>{let{active:t,align:r="left",backgroundColor:n,bordered:a,children:c,className:s,colSpan:h,dataTest:f="dhis2-uicore-datatablecell",error:m,fixed:y,large:g,left:b="auto",muted:v,rowSpan:_,role:T,scope:k,staticStyle:w,tag:E,valid:A,width:M="auto",onClick:S,...N}=i;const Y=!E&&y||E&&E==="th"?Dv:Ip;return he.createElement(Y,Q1({},N,{active:t,align:r,backgroundColor:n,bordered:a,className:s,colSpan:h,dataTest:f,error:m,fixed:y,large:g,left:b,muted:v,rowSpan:_,ref:e,role:T,staticStyle:w,scope:k,valid:A,width:M,onClick:S}),c)});fu.displayName="DataTableCell";const bb=lv(["valid","error","muted"],X.bool),yS=Fn(i=>i.fixed,X.string);fu.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:bb,fixed:X.bool,large:X.bool,left:yS,muted:bb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,tag:X.oneOf(["td","th"]),valid:bb,width:yS,onClick:X.func};const Kh=["span.container.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}","span.top.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}","span.content.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:24px;}"];Kh.__hash="1552921066";const vS={styles:he.createElement(vt,{id:"1231353820"},["thead>tr>th.DataTableColumnHeader.jsx-1231353820{padding-top:6px;padding-bottom:6px;}","thead>tr>th.DataTableColumnHeader.large.jsx-1231353820{padding-top:12px;padding-bottom:12px;}"]),className:"jsx-1231353820"},NB={"Toggle filter":"","Sort items":" "},zB={"Toggle filter":"Pepnout filtr","Sort items":"Tdit poloky"},jB={"Toggle filter":"Toggle filter","Sort items":"Sort items"},OB={"Toggle filter":"Alternar filtro","Sort items":"Ordena elementos"},FB={"Toggle filter":"Alternar filtro","Sort items":"Clasificar artculos"},BB={"Toggle filter":"","Sort items":""},$B={"Toggle filter":"","Sort items":""},UB={"Toggle filter":"Sl p filter","Sort items":"Sorter elementer"},VB={"Toggle filter":"Schakelfilter","Sort items":"Items sorteren"},HB={"Toggle filter":"Alternar filtro","Sort items":"Ordenar itens"},GB={"Toggle filter":" ","Sort items":" "},qB={"Toggle filter":" ","Sort items":" '"},WB={"Toggle filter":" ","Sort items":" "},YB={"Toggle filter":"","Sort items":""},ao="default";be.addResources("ar",ao,NB);be.addResources("cs",ao,zB);be.addResources("en",ao,jB);be.addResources("es",ao,OB);be.addResources("es_419",ao,FB);be.addResources("km",ao,BB);be.addResources("lo",ao,$B);be.addResources("nb",ao,UB);be.addResources("nl",ao,VB);be.addResources("pt",ao,HB);be.addResources("ru",ao,GB);be.addResources("uk",ao,qB);be.addResources("uz_UZ_Cyrl",ao,WB);be.addResources("zh",ao,YB);const aA=i=>{let{active:e,name:t,onClick:r}=i;const n=e?ze.blue700:ze.grey600,a=r?c=>{r({name:t,show:!e},c)}:void 0;return he.createElement(Rv,{onClick:a,title:be.t("Toggle filter")},he.createElement(F3,{color:n}))};aA.propTypes={active:X.bool,name:X.string,onClick:X.func};const ZB="asc",XB="desc",KB="default",bm=[KB,ZB,XB],QB=i=>{const t=(bm.indexOf(i)+1)%bm.length;return bm[t]},oA=i=>{let{name:e,sortDirection:t,title:r,onClick:n}=i;const a=QB(t),c=n?s=>{n({name:e,direction:a},s)}:void 0;return he.createElement(Rv,{onClick:c,title:r||be.t("Sort items")},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:vt.dynamic([["884818973",[ze.grey500,ze.blue700]]])+" "+(t||"")},he.createElement("g",{fill:"none",fillRule:"evenodd",className:vt.dynamic([["884818973",[ze.grey500,ze.blue700]]])},he.createElement("polygon",{points:"4 9 12 9 8 14",className:vt.dynamic([["884818973",[ze.grey500,ze.blue700]]])+" top"}),he.createElement("polygon",{points:"4 7 12 7 8 2",className:vt.dynamic([["884818973",[ze.grey500,ze.blue700]]])+" bottom"}))),he.createElement(vt,{id:"884818973",dynamic:[ze.grey500,ze.blue700]},[`svg.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${ze.grey500};}`,`svg.asc.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.desc.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${ze.blue700};}`]))};oA.propTypes={name:X.string,sortDirection:Fn(i=>i.onClick,X.oneOf(bm)),title:X.string,onClick:X.func};const Dy={left:"flex-start",center:"center",right:"flex-end"},Ov=Ae.forwardRef((i,e)=>{let{align:t,children:r,className:n,colSpan:a,dataTest:c="dhis2-uicore-datatablecellhead",filter:s,fixed:h,large:f,left:m,name:y,role:g,rowSpan:b,scope:v,showFilter:_,sortDirection:T,sortIconTitle:k,top:w,width:E,onFilterIconClick:A,onSortIconClick:M}=i;return he.createElement(Dv,{align:t,className:ir(n,"DataTableColumnHeader",vS.className),colSpan:a,dataTest:c,fixed:h,large:f,left:m,ref:e,rowSpan:b,role:g,scope:v,top:w,width:E},he.createElement("span",{className:`jsx-3463223249 jsx-${Kh.__hash} container`},he.createElement("span",{className:`jsx-3463223249 jsx-${Kh.__hash} `+(ir("top",{large:f})||"")},he.createElement("span",{className:`jsx-3463223249 jsx-${Kh.__hash} content`},r),T&&he.createElement(oA,{name:y,sortDirection:T,onClick:M,title:k}),s&&he.createElement(aA,{name:y,active:_,onClick:A})),_&&s),vS.styles,he.createElement(vt,{id:Kh.__hash},Kh),he.createElement(vt,{id:"3463223249"},[`.label.jsx-3463223249{-webkit-box-pack:${Dy[t]};-webkit-justify-content:${Dy[t]};-ms-flex-pack:${Dy[t]};justify-content:${Dy[t]};}`]))});Ov.displayName="DataTableColumnHeader";Ov.propTypes={align:X.oneOf(["left","center","right"]),children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,filter:Fn(i=>i.onFilterIconClick||i.showFilter,X.node),fixed:X.bool,large:X.bool,left:Fn(i=>i.fixed&&!i.top,X.string),name:X.string,role:X.string,rowSpan:X.string,scope:X.string,showFilter:Fn(i=>i.filter,X.bool),sortDirection:Fn(i=>i.onSortIconClick,X.oneOf(bm)),sortIconTitle:X.string,top:Fn(i=>i.fixed&&!i.left,X.string),width:X.string,onFilterIconClick:Fn(i=>i.filter,X.func),onSortIconClick:Fn(i=>i.sortDirection,X.func)};const xS={styles:he.createElement(vt,{id:"1795567040"},[`tr.isHoveringExpandedContent.jsx-1795567040>td{background-color:${ze.grey100};}`,`tr.isHoveringExpandedContent.jsx-1795567040>th{background-color:${ze.grey300};}`,"tr.selected.isHoveringExpandedContent.jsx-1795567040>td{background-color:#cdeae8;}","tr.expanded.jsx-1795567040>td{border-bottom-color:transparent;}",`tr.expanded.jsx-1795567040>td.bordered{border-bottom-color:${ze.grey300};}`]),className:"jsx-1795567040"},JB=()=>he.createElement(Ip,{width:"48px"},he.createElement(N3,null)),bS={styles:he.createElement(vt,{id:"927553068"},["td.jsx-927553068{cursor:pointer;}"]),className:"jsx-927553068"},lA=i=>{let{expanded:e,onClick:t}=i;return he.createElement(Ip,{className:ir(bS.className,{expanded:e}),onClick:()=>t({expanded:!e}),width:"48px"},e?he.createElement(A3,null):he.createElement(k3,null),bS.styles)};lA.propTypes={expanded:X.bool,onClick:X.func};const{className:e7,styles:t7}={styles:he.createElement(vt,{id:"626485122"},[`tr.expanded:hover+tr>td.jsx-626485122{background-color:${ze.grey100};}`,`tr.expanded:active+tr>td.jsx-626485122{background-color:${ze.grey200};}`,"tr.selected.expanded:hover+tr.jsx-626485122>td.jsx-626485122{background-color:#cdeae8;}"]),className:"jsx-626485122"},cA=i=>{let{children:e,className:t,colSpan:r,dataTest:n,selected:a,setIsHoveringExpandedContent:c}=i;return he.createElement(zv,{onMouseOver:()=>c(!0),onMouseOut:()=>c(!1),className:ir({[`${t}-expandedrow`]:!!t}),selected:a,dataTest:n&&`${n}-expandedrow`},he.createElement(Ip,{className:e7,colSpan:r},e,t7))};cA.propTypes={children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,selected:X.bool,setIsHoveringExpandedContent:X.func};function J1(){return J1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},J1.apply(null,arguments)}const Sl=Ae.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-datatablerow",expandableContent:a,expanded:c,selected:s,draggable:h,role:f,onExpandToggle:m,...y}=i;const[g,b]=Ae.useState(!1),v=ir(r,xS.className,{expanded:c,selected:s,draggable:h,isHoveringExpandedContent:g}),_=he.Children.count(t),T=String(h||a?_+1:_);return he.createElement(he.Fragment,null,he.createElement(zv,J1({ref:e,className:v,dataTest:n,selected:s,draggable:h,role:f},y),h&&he.createElement(JB,null),a&&he.createElement(lA,{expanded:c,onClick:m}),t,xS.styles),a&&c&&he.createElement(cA,{className:r,dataTest:n,setIsHoveringExpandedContent:b,colSpan:T,selected:s},a))});Sl.displayName="DataTableRow";Sl.propTypes={children:X.node,className:X.string,dataTest:X.string,draggable:X.bool,expandableContent:Fn(i=>i.onExpandToggle,X.node),expanded:X.bool,role:X.string,selected:X.bool,onExpandToggle:Fn(i=>i.expandableContent,X.func)};var q_={};Object.defineProperty(q_,"__esModule",{value:!0});q_.parse=l7;q_.serialize=c7;const i7=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r7=/^[\u0021-\u003A\u003C-\u007E]*$/,n7=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s7=/^[\u0020-\u003A\u003D-\u007E]*$/,a7=Object.prototype.toString,o7=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function l7(i,e){const t=new o7,r=i.length;if(r<2)return t;const n=(e==null?void 0:e.decode)||u7;let a=0;do{const c=i.indexOf("=",a);if(c===-1)break;const s=i.indexOf(";",a),h=s===-1?r:s;if(c>h){a=i.lastIndexOf(";",c-1)+1;continue}const f=wS(i,a,c),m=_S(i,c,f),y=i.slice(f,m);if(t[y]===void 0){let g=wS(i,c+1,h),b=_S(i,h,g);const v=n(i.slice(g,b));t[y]=v}a=h+1}while(a<r);return t}function wS(i,e,t){do{const r=i.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function _S(i,e,t){for(;e>t;){const r=i.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function c7(i,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!i7.test(i))throw new TypeError(`argument name is invalid: ${i}`);const n=r(e);if(!r7.test(n))throw new TypeError(`argument val is invalid: ${e}`);let a=i+"="+n;if(!t)return a;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);a+="; Max-Age="+t.maxAge}if(t.domain){if(!n7.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);a+="; Domain="+t.domain}if(t.path){if(!s7.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);a+="; Path="+t.path}if(t.expires){if(!d7(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);a+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(a+="; HttpOnly"),t.secure&&(a+="; Secure"),t.partitioned&&(a+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return a}function u7(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function d7(i){return a7.call(i)==="[object Date]"}/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uA=i=>{throw TypeError(i)},h7=(i,e,t)=>e.has(i)||uA("Cannot "+t),wb=(i,e,t)=>(h7(i,e,"read from private field"),t?t.call(i):e.get(i)),p7=(i,e,t)=>e.has(i)?uA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),CS="popstate";function f7(i={}){function e(n,a){let{pathname:c="/",search:s="",hash:h=""}=Mc(n.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Om("",{pathname:c,search:s,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(n,a){let c=n.document.querySelector("base"),s="";if(c&&c.getAttribute("href")){let h=n.location.href,f=h.indexOf("#");s=f===-1?h:h.slice(0,f)}return s+"#"+(typeof a=="string"?a:_u(a))}function r(n,a){Wn(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return g7(e,t,r,i)}function kr(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Wn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m7(){return Math.random().toString(36).substring(2,10)}function TS(i,e){return{usr:i.state,key:i.key,idx:e}}function Om(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Mc(e):e,state:t,key:e&&e.key||r||m7()}}function _u({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Mc(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function g7(i,e,t,r={}){let{window:n=document.defaultView,v5Compat:a=!1}=r,c=n.history,s="POP",h=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function y(){s="POP";let T=m(),k=T==null?null:T-f;f=T,h&&h({action:s,location:_.location,delta:k})}function g(T,k){s="PUSH";let w=Om(_.location,T,k);t&&t(w,T),f=m()+1;let E=TS(w,f),A=_.createHref(w);try{c.pushState(E,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;n.location.assign(A)}a&&h&&h({action:s,location:_.location,delta:1})}function b(T,k){s="REPLACE";let w=Om(_.location,T,k);t&&t(w,T),f=m();let E=TS(w,f),A=_.createHref(w);c.replaceState(E,"",A),a&&h&&h({action:s,location:_.location,delta:0})}function v(T){return dA(T)}let _={get action(){return s},get location(){return i(n,c)},listen(T){if(h)throw new Error("A history only accepts one active listener");return n.addEventListener(CS,y),h=T,()=>{n.removeEventListener(CS,y),h=null}},createHref(T){return e(n,T)},createURL:v,encodeLocation(T){let k=v(T);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:b,go(T){return c.go(T)}};return _}function dA(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),kr(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:_u(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var lm,SS=class{constructor(i){if(p7(this,lm,new Map),i)for(let[e,t]of i)this.set(e,t)}get(i){if(wb(this,lm).has(i))return wb(this,lm).get(i);if(i.defaultValue!==void 0)return i.defaultValue;throw new Error("No value found for context")}set(i,e){wb(this,lm).set(i,e)}};lm=new WeakMap;var y7=new Set(["lazy","caseSensitive","path","id","index","children"]);function v7(i){return y7.has(i)}var x7=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function b7(i){return x7.has(i)}function w7(i){return i.index===!0}function R0(i,e,t=[],r={}){return i.map((n,a)=>{let c=[...t,String(a)],s=typeof n.id=="string"?n.id:c.join("-");if(kr(n.index!==!0||!n.children,"Cannot specify children on an index route"),kr(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),w7(n)){let h={...n,...e(n),id:s};return r[s]=h,h}else{let h={...n,...e(n),id:s,children:void 0};return r[s]=h,n.children&&(h.children=R0(n.children,e,c,r)),h}})}function ou(i,e,t="/"){return u0(i,e,t,!1)}function u0(i,e,t,r){let n=typeof e=="string"?Mc(e):e,a=no(n.pathname||"/",t);if(a==null)return null;let c=pA(i);_7(c);let s=null;for(let h=0;s==null&&h<c.length;++h){let f=R7(a);s=P7(c[h],f,r)}return s}function hA(i,e){let{route:t,pathname:r,params:n}=i;return{id:t.id,pathname:r,params:n,data:e[t.id],handle:t.handle}}function pA(i,e=[],t=[],r=""){let n=(a,c,s)=>{let h={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(kr(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=Pl([r,h.relativePath]),m=t.concat(h);a.children&&a.children.length>0&&(kr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),pA(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:A7(f,a.index),routesMeta:m})};return i.forEach((a,c)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))n(a,c);else for(let h of fA(a.path))n(a,c,h)}),e}function fA(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return n?[a,""]:[a];let c=fA(r.join("/")),s=[];return s.push(...c.map(h=>h===""?a:[a,h].join("/"))),n&&s.push(...c),s.map(h=>i.startsWith("/")&&h===""?"/":h)}function _7(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:I7(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var C7=/^:[\w-]+$/,T7=3,S7=2,E7=1,k7=10,M7=-2,ES=i=>i==="*";function A7(i,e){let t=i.split("/"),r=t.length;return t.some(ES)&&(r+=M7),e&&(r+=S7),t.filter(n=>!ES(n)).reduce((n,a)=>n+(C7.test(a)?T7:a===""?E7:k7),r)}function I7(i,e){return i.length===e.length&&i.slice(0,-1).every((r,n)=>r===e[n])?i[i.length-1]-e[e.length-1]:0}function P7(i,e,t=!1){let{routesMeta:r}=i,n={},a="/",c=[];for(let s=0;s<r.length;++s){let h=r[s],f=s===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",y=L0({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),g=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=L0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(n,y.params),c.push({params:n,pathname:Pl([a,y.pathname]),pathnameBase:z7(Pl([a,y.pathnameBase])),route:g}),y.pathnameBase!=="/"&&(a=Pl([a,y.pathnameBase]))}return c}function L0(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=D7(i.path,i.caseSensitive,i.end),n=e.match(t);if(!n)return null;let a=n[0],c=a.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:r.reduce((f,{paramName:m,isOptional:y},g)=>{if(m==="*"){let v=s[g]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const b=s[g];return y&&!b?f[m]=void 0:f[m]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:i}}function D7(i,e=!1,t=!0){Wn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],n="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,s,h)=>(r.push({paramName:s,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),n+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":i!==""&&i!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function R7(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function no(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function L7(i,e="/"){let{pathname:t,search:r="",hash:n=""}=typeof i=="string"?Mc(i):i;return{pathname:t?t.startsWith("/")?t:N7(t,e):e,search:j7(r),hash:O7(n)}}function N7(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function _b(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mA(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fv(i){let e=mA(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Bv(i,e,t,r=!1){let n;typeof i=="string"?n=Mc(i):(n={...i},kr(!n.pathname||!n.pathname.includes("?"),_b("?","pathname","search",n)),kr(!n.pathname||!n.pathname.includes("#"),_b("#","pathname","hash",n)),kr(!n.search||!n.search.includes("#"),_b("#","search","hash",n)));let a=i===""||n.pathname==="",c=a?"/":n.pathname,s;if(c==null)s=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let g=c.split("/");for(;g[0]==="..";)g.shift(),y-=1;n.pathname=g.join("/")}s=y>=0?e[y]:"/"}let h=L7(n,s),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}var Pl=i=>i.join("/").replace(/\/\/+/g,"/"),z7=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),j7=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,O7=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,N0=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function mp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var gA=["POST","PUT","PATCH","DELETE"],F7=new Set(gA),B7=["GET",...gA],$7=new Set(B7),U7=new Set([301,302,303,307,308]),V7=new Set([307,308]),Cb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},H7={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Qh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G7=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),yA="remix-router-transitions",vA=Symbol("ResetLoaderData");function q7(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";kr(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=i.hydrationRouteProperties||[],n=i.mapRouteProperties||G7,a={},c=R0(i.routes,n,void 0,a),s,h=i.basename||"/",f=i.dataStrategy||K7,m={unstable_middleware:!1,...i.future},y=null,g=new Set,b=null,v=null,_=null,T=i.hydrationData!=null,k=ou(c,i.history.location,h),w=!1,E=null,A;if(k==null&&!i.patchRoutesOnNavigation){let ht=zo(404,{pathname:i.history.location.pathname}),{matches:bt,route:Mt}=OS(c);A=!0,k=bt,E={[Mt.id]:ht}}else if(k&&!i.hydrationData&&yr(k,c,i.history.location.pathname).active&&(k=null),k)if(k.some(ht=>ht.route.lazy))A=!1;else if(!k.some(ht=>ht.route.loader))A=!0;else{let ht=i.hydrationData?i.hydrationData.loaderData:null,bt=i.hydrationData?i.hydrationData.errors:null;if(bt){let Mt=k.findIndex($t=>bt[$t.route.id]!==void 0);A=k.slice(0,Mt+1).every($t=>!tw($t.route,ht,bt))}else A=k.every(Mt=>!tw(Mt.route,ht,bt))}else{A=!1,k=[];let ht=yr(null,c,i.history.location.pathname);ht.active&&ht.matches&&(w=!0,k=ht.matches)}let M,S={historyAction:i.history.action,location:i.history.location,matches:k,initialized:A,navigation:Cb,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||E,fetchers:new Map,blockers:new Map},N="POP",Y=!1,Z,K=!1,B=new Map,F=null,O=!1,R=!1,L=new Set,G=new Map,V=0,$=-1,q=new Map,W=new Set,se=new Map,fe=new Map,re=new Set,le=new Map,Se,ye=null;function Ee(){if(y=i.history.listen(({action:ht,location:bt,delta:Mt})=>{if(Se){Se(),Se=void 0;return}Wn(le.size===0||Mt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let $t=kt({currentLocation:S.location,nextLocation:bt,historyAction:ht});if($t&&Mt!=null){let Zt=new Promise(ki=>{Se=ki});i.history.go(Mt*-1),St($t,{state:"blocked",location:bt,proceed(){St($t,{state:"proceeding",proceed:void 0,reset:void 0,location:bt}),Zt.then(()=>i.history.go(Mt))},reset(){let ki=new Map(S.blockers);ki.set($t,Qh),oe({blockers:ki})}});return}return ue(ht,bt)}),t){l$(e,B);let ht=()=>c$(e,B);e.addEventListener("pagehide",ht),F=()=>e.removeEventListener("pagehide",ht)}return S.initialized||ue("POP",S.location,{initialHydration:!0}),M}function J(){y&&y(),F&&F(),g.clear(),Z&&Z.abort(),S.fetchers.forEach((ht,bt)=>Qe(bt)),S.blockers.forEach((ht,bt)=>mt(bt))}function ie(ht){return g.add(ht),()=>g.delete(ht)}function oe(ht,bt={}){S={...S,...ht};let Mt=[],$t=[];S.fetchers.forEach((Zt,ki)=>{Zt.state==="idle"&&(re.has(ki)?Mt.push(ki):$t.push(ki))}),re.forEach(Zt=>{!S.fetchers.has(Zt)&&!G.has(Zt)&&Mt.push(Zt)}),[...g].forEach(Zt=>Zt(S,{deletedFetchers:Mt,viewTransitionOpts:bt.viewTransitionOpts,flushSync:bt.flushSync===!0})),Mt.forEach(Zt=>Qe(Zt)),$t.forEach(Zt=>S.fetchers.delete(Zt))}function we(ht,bt,{flushSync:Mt}={}){var Le,Ve;let $t=S.actionData!=null&&S.navigation.formMethod!=null&&bo(S.navigation.formMethod)&&S.navigation.state==="loading"&&((Le=ht.state)==null?void 0:Le._isRedirect)!==!0,Zt;bt.actionData?Object.keys(bt.actionData).length>0?Zt=bt.actionData:Zt=null:$t?Zt=S.actionData:Zt=null;let ki=bt.loaderData?zS(S.loaderData,bt.loaderData,bt.matches||[],bt.errors):S.loaderData,Di=S.blockers;Di.size>0&&(Di=new Map(Di),Di.forEach((Xe,et)=>Di.set(et,Qh)));let We=Y===!0||S.navigation.formMethod!=null&&bo(S.navigation.formMethod)&&((Ve=ht.state)==null?void 0:Ve._isRedirect)!==!0;s&&(c=s,s=void 0),O||N==="POP"||(N==="PUSH"?i.history.push(ht,ht.state):N==="REPLACE"&&i.history.replace(ht,ht.state));let _e;if(N==="POP"){let Xe=B.get(S.location.pathname);Xe&&Xe.has(ht.pathname)?_e={currentLocation:S.location,nextLocation:ht}:B.has(ht.pathname)&&(_e={currentLocation:ht,nextLocation:S.location})}else if(K){let Xe=B.get(S.location.pathname);Xe?Xe.add(ht.pathname):(Xe=new Set([ht.pathname]),B.set(S.location.pathname,Xe)),_e={currentLocation:S.location,nextLocation:ht}}oe({...bt,actionData:Zt,loaderData:ki,historyAction:N,location:ht,initialized:!0,navigation:Cb,revalidation:"idle",restoreScrollPosition:rr(ht,bt.matches||S.matches),preventScrollReset:We,blockers:Di},{viewTransitionOpts:_e,flushSync:Mt===!0}),N="POP",Y=!1,K=!1,O=!1,R=!1,ye==null||ye.resolve(),ye=null}async function ee(ht,bt){if(typeof ht=="number"){i.history.go(ht);return}let Mt=ew(S.location,S.matches,h,ht,bt==null?void 0:bt.fromRouteId,bt==null?void 0:bt.relative),{path:$t,submission:Zt,error:ki}=kS(!1,Mt,bt),Di=S.location,We=Om(S.location,$t,bt&&bt.state);We={...We,...i.history.encodeLocation(We)};let _e=bt&&bt.replace!=null?bt.replace:void 0,Le="PUSH";_e===!0?Le="REPLACE":_e===!1||Zt!=null&&bo(Zt.formMethod)&&Zt.formAction===S.location.pathname+S.location.search&&(Le="REPLACE");let Ve=bt&&"preventScrollReset"in bt?bt.preventScrollReset===!0:void 0,Xe=(bt&&bt.flushSync)===!0,et=kt({currentLocation:Di,nextLocation:We,historyAction:Le});if(et){St(et,{state:"blocked",location:We,proceed(){St(et,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),ee(ht,bt)},reset(){let ct=new Map(S.blockers);ct.set(et,Qh),oe({blockers:ct})}});return}await ue(Le,We,{submission:Zt,pendingError:ki,preventScrollReset:Ve,replace:bt&&bt.replace,enableViewTransition:bt&&bt.viewTransition,flushSync:Xe})}function ae(){ye||(ye=u$()),Ie(),oe({revalidation:"loading"});let ht=ye.promise;return S.navigation.state==="submitting"?ht:S.navigation.state==="idle"?(ue(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),ht):(ue(N||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:K===!0}),ht)}async function ue(ht,bt,Mt){Z&&Z.abort(),Z=null,N=ht,O=(Mt&&Mt.startUninterruptedRevalidation)===!0,hr(S.location,S.matches),Y=(Mt&&Mt.preventScrollReset)===!0,K=(Mt&&Mt.enableViewTransition)===!0;let $t=s||c,Zt=Mt&&Mt.overrideNavigation,ki=Mt!=null&&Mt.initialHydration&&S.matches&&S.matches.length>0&&!w?S.matches:ou($t,bt,h),Di=(Mt&&Mt.flushSync)===!0;if(ki&&S.initialized&&!R&&r$(S.location,bt)&&!(Mt&&Mt.submission&&bo(Mt.submission.formMethod))){we(bt,{matches:ki},{flushSync:Di});return}let We=yr(ki,$t,bt.pathname);if(We.active&&We.matches&&(ki=We.matches),!ki){let{error:nt,notFoundMatches:ft,route:wt}=ii(bt.pathname);we(bt,{matches:ft,loaderData:{},errors:{[wt.id]:nt}},{flushSync:Di});return}Z=new AbortController;let _e=Jh(i.history,bt,Z.signal,Mt&&Mt.submission),Le=new SS(i.unstable_getContext?await i.unstable_getContext():void 0),Ve;if(Mt&&Mt.pendingError)Ve=[vd(ki).route.id,{type:"error",error:Mt.pendingError}];else if(Mt&&Mt.submission&&bo(Mt.submission.formMethod)){let nt=await ve(_e,bt,Mt.submission,ki,Le,We.active,Mt&&Mt.initialHydration===!0,{replace:Mt.replace,flushSync:Di});if(nt.shortCircuited)return;if(nt.pendingActionResult){let[ft,wt]=nt.pendingActionResult;if(xo(wt)&&mp(wt.error)&&wt.error.status===404){Z=null,we(bt,{matches:nt.matches,loaderData:{},errors:{[ft]:wt.error}});return}}ki=nt.matches||ki,Ve=nt.pendingActionResult,Zt=Tb(bt,Mt.submission),Di=!1,We.active=!1,_e=Jh(i.history,_e.url,_e.signal)}let{shortCircuited:Xe,matches:et,loaderData:ct,errors:ot}=await Ce(_e,bt,ki,Le,We.active,Zt,Mt&&Mt.submission,Mt&&Mt.fetcherSubmission,Mt&&Mt.replace,Mt&&Mt.initialHydration===!0,Di,Ve);Xe||(Z=null,we(bt,{matches:et||ki,...jS(Ve),loaderData:ct,errors:ot}))}async function ve(ht,bt,Mt,$t,Zt,ki,Di,We={}){Ie();let _e=a$(bt,Mt);if(oe({navigation:_e},{flushSync:We.flushSync===!0}),ki){let Xe=await Dr($t,bt.pathname,ht.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let et=vd(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,pendingActionResult:[et,{type:"error",error:Xe.error}]}}else if(Xe.matches)$t=Xe.matches;else{let{notFoundMatches:et,error:ct,route:ot}=ii(bt.pathname);return{matches:et,pendingActionResult:[ot.id,{type:"error",error:ct}]}}}let Le,Ve=cm($t,bt);if(!Ve.route.action&&!Ve.route.lazy)Le={type:"error",error:zo(405,{method:ht.method,pathname:bt.pathname,routeId:Ve.route.id})};else{let Xe=ap(n,a,ht,$t,Ve,Di?[]:r,Zt),et=await Pe(ht,Xe,Zt,null);if(Le=et[Ve.route.id],!Le){for(let ct of $t)if(et[ct.route.id]){Le=et[ct.route.id];break}}if(ht.signal.aborted)return{shortCircuited:!0}}if(wd(Le)){let Xe;return We&&We.replace!=null?Xe=We.replace:Xe=RS(Le.response.headers.get("Location"),new URL(ht.url),h)===S.location.pathname+S.location.search,await Ue(ht,Le,!0,{submission:Mt,replace:Xe}),{shortCircuited:!0}}if(xo(Le)){let Xe=vd($t,Ve.route.id);return(We&&We.replace)!==!0&&(N="PUSH"),{matches:$t,pendingActionResult:[Xe.route.id,Le,Ve.route.id]}}return{matches:$t,pendingActionResult:[Ve.route.id,Le]}}async function Ce(ht,bt,Mt,$t,Zt,ki,Di,We,_e,Le,Ve,Xe){let et=ki||Tb(bt,Di),ct=Di||We||BS(et),ot=!O&&!Le;if(Zt){if(ot){let Ri=je(Xe);oe({navigation:et,...Ri!==void 0?{actionData:Ri}:{}},{flushSync:Ve})}let mi=await Dr(Mt,bt.pathname,ht.signal);if(mi.type==="aborted")return{shortCircuited:!0};if(mi.type==="error"){let Ri=vd(mi.partialMatches).route.id;return{matches:mi.partialMatches,loaderData:{},errors:{[Ri]:mi.error}}}else if(mi.matches)Mt=mi.matches;else{let{error:Ri,notFoundMatches:Zr,route:nn}=ii(bt.pathname);return{matches:Zr,loaderData:{},errors:{[nn.id]:Ri}}}}let nt=s||c,{dsMatches:ft,revalidatingFetchers:wt}=MS(ht,$t,n,a,i.history,S,Mt,ct,bt,Le?[]:r,Le===!0,R,L,re,se,W,nt,h,Xe);if($=++V,!i.dataStrategy&&!ft.some(mi=>mi.shouldLoad)&&wt.length===0){let mi=gt();return we(bt,{matches:Mt,loaderData:{},errors:Xe&&xo(Xe[1])?{[Xe[0]]:Xe[1].error}:null,...jS(Xe),...mi?{fetchers:new Map(S.fetchers)}:{}},{flushSync:Ve}),{shortCircuited:!0}}if(ot){let mi={};if(!Zt){mi.navigation=et;let Ri=je(Xe);Ri!==void 0&&(mi.actionData=Ri)}wt.length>0&&(mi.fetchers=Me(wt)),oe(mi,{flushSync:Ve})}wt.forEach(mi=>{rt(mi.key),mi.controller&&G.set(mi.key,mi.controller)});let zt=()=>wt.forEach(mi=>rt(mi.key));Z&&Z.signal.addEventListener("abort",zt);let{loaderResults:Rt,fetcherResults:ci}=await Te(ft,wt,ht,$t);if(ht.signal.aborted)return{shortCircuited:!0};Z&&Z.signal.removeEventListener("abort",zt),wt.forEach(mi=>G.delete(mi.key));let Wt=Ry(Rt);if(Wt)return await Ue(ht,Wt.result,!0,{replace:_e}),{shortCircuited:!0};if(Wt=Ry(ci),Wt)return W.add(Wt.key),await Ue(ht,Wt.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:gi,errors:vi}=NS(S,Mt,Rt,Xe,wt,ci);Le&&S.errors&&(vi={...S.errors,...vi});let Vi=gt(),$i=Tt($),Hi=Vi||$i||wt.length>0;return{matches:Mt,loaderData:gi,errors:vi,...Hi?{fetchers:new Map(S.fetchers)}:{}}}function je(ht){if(ht&&!xo(ht[1]))return{[ht[0]]:ht[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Me(ht){return ht.forEach(bt=>{let Mt=S.fetchers.get(bt.key),$t=Of(void 0,Mt?Mt.data:void 0);S.fetchers.set(bt.key,$t)}),new Map(S.fetchers)}async function Re(ht,bt,Mt,$t){rt(ht);let Zt=($t&&$t.flushSync)===!0,ki=s||c,Di=ew(S.location,S.matches,h,Mt,bt,$t==null?void 0:$t.relative),We=ou(ki,Di,h),_e=yr(We,ki,Di);if(_e.active&&_e.matches&&(We=_e.matches),!We){Oe(ht,bt,zo(404,{pathname:Di}),{flushSync:Zt});return}let{path:Le,submission:Ve,error:Xe}=kS(!0,Di,$t);if(Xe){Oe(ht,bt,Xe,{flushSync:Zt});return}let et=cm(We,Le),ct=new SS(i.unstable_getContext?await i.unstable_getContext():void 0),ot=($t&&$t.preventScrollReset)===!0;if(Ve&&bo(Ve.formMethod)){await me(ht,bt,Le,et,We,ct,_e.active,Zt,ot,Ve);return}se.set(ht,{routeId:bt,path:Le}),await De(ht,bt,Le,et,We,ct,_e.active,Zt,ot,Ve)}async function me(ht,bt,Mt,$t,Zt,ki,Di,We,_e,Le){Ie(),se.delete(ht);function Ve(xr){if(!xr.route.action&&!xr.route.lazy){let Io=zo(405,{method:Le.formMethod,pathname:Mt,routeId:bt});return Oe(ht,bt,Io,{flushSync:We}),!0}return!1}if(!Di&&Ve($t))return;let Xe=S.fetchers.get(ht);Fe(ht,o$(Le,Xe),{flushSync:We});let et=new AbortController,ct=Jh(i.history,Mt,et.signal,Le);if(Di){let xr=await Dr(Zt,Mt,ct.signal,ht);if(xr.type==="aborted")return;if(xr.type==="error"){Oe(ht,bt,xr.error,{flushSync:We});return}else if(xr.matches){if(Zt=xr.matches,$t=cm(Zt,Mt),Ve($t))return}else{Oe(ht,bt,zo(404,{pathname:Mt}),{flushSync:We});return}}G.set(ht,et);let ot=V,nt=ap(n,a,ct,Zt,$t,r,ki),wt=(await Pe(ct,nt,ki,ht))[$t.route.id];if(ct.signal.aborted){G.get(ht)===et&&G.delete(ht);return}if(re.has(ht)){if(wd(wt)||xo(wt)){Fe(ht,tu(void 0));return}}else{if(wd(wt))if(G.delete(ht),$>ot){Fe(ht,tu(void 0));return}else return W.add(ht),Fe(ht,Of(Le)),Ue(ct,wt,!1,{fetcherSubmission:Le,preventScrollReset:_e});if(xo(wt)){Oe(ht,bt,wt.error);return}}let zt=S.navigation.location||S.location,Rt=Jh(i.history,zt,et.signal),ci=s||c,Wt=S.navigation.state!=="idle"?ou(ci,S.navigation.location,h):S.matches;kr(Wt,"Didn't find any matches after fetcher action");let gi=++V;q.set(ht,gi);let vi=Of(Le,wt.data);S.fetchers.set(ht,vi);let{dsMatches:Vi,revalidatingFetchers:$i}=MS(Rt,ki,n,a,i.history,S,Wt,Le,zt,r,!1,R,L,re,se,W,ci,h,[$t.route.id,wt]);$i.filter(xr=>xr.key!==ht).forEach(xr=>{let Io=xr.key,ll=S.fetchers.get(Io),Nr=Of(void 0,ll?ll.data:void 0);S.fetchers.set(Io,Nr),rt(Io),xr.controller&&G.set(Io,xr.controller)}),oe({fetchers:new Map(S.fetchers)});let Hi=()=>$i.forEach(xr=>rt(xr.key));et.signal.addEventListener("abort",Hi);let{loaderResults:mi,fetcherResults:Ri}=await Te(Vi,$i,Rt,ki);if(et.signal.aborted)return;if(et.signal.removeEventListener("abort",Hi),q.delete(ht),G.delete(ht),$i.forEach(xr=>G.delete(xr.key)),S.fetchers.has(ht)){let xr=tu(wt.data);S.fetchers.set(ht,xr)}let Zr=Ry(mi);if(Zr)return Ue(Rt,Zr.result,!1,{preventScrollReset:_e});if(Zr=Ry(Ri),Zr)return W.add(Zr.key),Ue(Rt,Zr.result,!1,{preventScrollReset:_e});let{loaderData:nn,errors:Cn}=NS(S,Wt,mi,void 0,$i,Ri);Tt(gi),S.navigation.state==="loading"&&gi>$?(kr(N,"Expected pending action"),Z&&Z.abort(),we(S.navigation.location,{matches:Wt,loaderData:nn,errors:Cn,fetchers:new Map(S.fetchers)})):(oe({errors:Cn,loaderData:zS(S.loaderData,nn,Wt,Cn),fetchers:new Map(S.fetchers)}),R=!1)}async function De(ht,bt,Mt,$t,Zt,ki,Di,We,_e,Le){let Ve=S.fetchers.get(ht);Fe(ht,Of(Le,Ve?Ve.data:void 0),{flushSync:We});let Xe=new AbortController,et=Jh(i.history,Mt,Xe.signal);if(Di){let wt=await Dr(Zt,Mt,et.signal,ht);if(wt.type==="aborted")return;if(wt.type==="error"){Oe(ht,bt,wt.error,{flushSync:We});return}else if(wt.matches)Zt=wt.matches,$t=cm(Zt,Mt);else{Oe(ht,bt,zo(404,{pathname:Mt}),{flushSync:We});return}}G.set(ht,Xe);let ct=V,ot=ap(n,a,et,Zt,$t,r,ki),ft=(await Pe(et,ot,ki,ht))[$t.route.id];if(G.get(ht)===Xe&&G.delete(ht),!et.signal.aborted){if(re.has(ht)){Fe(ht,tu(void 0));return}if(wd(ft))if($>ct){Fe(ht,tu(void 0));return}else{W.add(ht),await Ue(et,ft,!1,{preventScrollReset:_e});return}if(xo(ft)){Oe(ht,bt,ft.error);return}Fe(ht,tu(ft.data))}}async function Ue(ht,bt,Mt,{submission:$t,fetcherSubmission:Zt,preventScrollReset:ki,replace:Di}={}){bt.response.headers.has("X-Remix-Revalidate")&&(R=!0);let We=bt.response.headers.get("Location");kr(We,"Expected a Location header on the redirect Response"),We=RS(We,new URL(ht.url),h);let _e=Om(S.location,We,{_isRedirect:!0});if(t){let ot=!1;if(bt.response.headers.has("X-Remix-Reload-Document"))ot=!0;else if(W_.test(We)){const nt=dA(We,!0);ot=nt.origin!==e.location.origin||no(nt.pathname,h)==null}if(ot){Di?e.location.replace(We):e.location.assign(We);return}}Z=null;let Le=Di===!0||bt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ve,formAction:Xe,formEncType:et}=S.navigation;!$t&&!Zt&&Ve&&Xe&&et&&($t=BS(S.navigation));let ct=$t||Zt;if(V7.has(bt.response.status)&&ct&&bo(ct.formMethod))await ue(Le,_e,{submission:{...ct,formAction:We},preventScrollReset:ki||Y,enableViewTransition:Mt?K:void 0});else{let ot=Tb(_e,$t);await ue(Le,_e,{overrideNavigation:ot,fetcherSubmission:Zt,preventScrollReset:ki||Y,enableViewTransition:Mt?K:void 0})}}async function Pe(ht,bt,Mt,$t){let Zt,ki={};try{Zt=await Q7(f,ht,bt,$t,Mt,!1)}catch(Di){return bt.filter(We=>We.shouldLoad).forEach(We=>{ki[We.route.id]={type:"error",error:Di}}),ki}if(ht.signal.aborted)return ki;for(let[Di,We]of Object.entries(Zt))if(n$(We)){let _e=We.result;ki[Di]={type:"redirect",response:t$(_e,ht,Di,bt,h)}}else ki[Di]=await e$(We);return ki}async function Te(ht,bt,Mt,$t){let Zt=Pe(Mt,ht,$t,null),ki=Promise.all(bt.map(async _e=>{if(_e.matches&&_e.match&&_e.request&&_e.controller){let Ve=(await Pe(_e.request,_e.matches,$t,_e.key))[_e.match.route.id];return{[_e.key]:Ve}}else return Promise.resolve({[_e.key]:{type:"error",error:zo(404,{pathname:_e.path})}})})),Di=await Zt,We=(await ki).reduce((_e,Le)=>Object.assign(_e,Le),{});return{loaderResults:Di,fetcherResults:We}}function Ie(){R=!0,se.forEach((ht,bt)=>{G.has(bt)&&L.add(bt),rt(bt)})}function Fe(ht,bt,Mt={}){S.fetchers.set(ht,bt),oe({fetchers:new Map(S.fetchers)},{flushSync:(Mt&&Mt.flushSync)===!0})}function Oe(ht,bt,Mt,$t={}){let Zt=vd(S.matches,bt);Qe(ht),oe({errors:{[Zt.route.id]:Mt},fetchers:new Map(S.fetchers)},{flushSync:($t&&$t.flushSync)===!0})}function Ge(ht){return fe.set(ht,(fe.get(ht)||0)+1),re.has(ht)&&re.delete(ht),S.fetchers.get(ht)||H7}function Qe(ht){let bt=S.fetchers.get(ht);G.has(ht)&&!(bt&&bt.state==="loading"&&q.has(ht))&&rt(ht),se.delete(ht),q.delete(ht),W.delete(ht),re.delete(ht),L.delete(ht),S.fetchers.delete(ht)}function at(ht){let bt=(fe.get(ht)||0)-1;bt<=0?(fe.delete(ht),re.add(ht)):fe.set(ht,bt),oe({fetchers:new Map(S.fetchers)})}function rt(ht){let bt=G.get(ht);bt&&(bt.abort(),G.delete(ht))}function dt(ht){for(let bt of ht){let Mt=Ge(bt),$t=tu(Mt.data);S.fetchers.set(bt,$t)}}function gt(){let ht=[],bt=!1;for(let Mt of W){let $t=S.fetchers.get(Mt);kr($t,`Expected fetcher: ${Mt}`),$t.state==="loading"&&(W.delete(Mt),ht.push(Mt),bt=!0)}return dt(ht),bt}function Tt(ht){let bt=[];for(let[Mt,$t]of q)if($t<ht){let Zt=S.fetchers.get(Mt);kr(Zt,`Expected fetcher: ${Mt}`),Zt.state==="loading"&&(rt(Mt),q.delete(Mt),bt.push(Mt))}return dt(bt),bt.length>0}function Nt(ht,bt){let Mt=S.blockers.get(ht)||Qh;return le.get(ht)!==bt&&le.set(ht,bt),Mt}function mt(ht){S.blockers.delete(ht),le.delete(ht)}function St(ht,bt){let Mt=S.blockers.get(ht)||Qh;kr(Mt.state==="unblocked"&&bt.state==="blocked"||Mt.state==="blocked"&&bt.state==="blocked"||Mt.state==="blocked"&&bt.state==="proceeding"||Mt.state==="blocked"&&bt.state==="unblocked"||Mt.state==="proceeding"&&bt.state==="unblocked",`Invalid blocker state transition: ${Mt.state} -> ${bt.state}`);let $t=new Map(S.blockers);$t.set(ht,bt),oe({blockers:$t})}function kt({currentLocation:ht,nextLocation:bt,historyAction:Mt}){if(le.size===0)return;le.size>1&&Wn(!1,"A router only supports one blocker at a time");let $t=Array.from(le.entries()),[Zt,ki]=$t[$t.length-1],Di=S.blockers.get(Zt);if(!(Di&&Di.state==="proceeding")&&ki({currentLocation:ht,nextLocation:bt,historyAction:Mt}))return Zt}function ii(ht){let bt=zo(404,{pathname:ht}),Mt=s||c,{matches:$t,route:Zt}=OS(Mt);return{notFoundMatches:$t,route:Zt,error:bt}}function fi(ht,bt,Mt){if(b=ht,_=bt,v=Mt||null,!T&&S.navigation===Cb){T=!0;let $t=rr(S.location,S.matches);$t!=null&&oe({restoreScrollPosition:$t})}return()=>{b=null,_=null,v=null}}function Gt(ht,bt){return v&&v(ht,bt.map($t=>hA($t,S.loaderData)))||ht.key}function hr(ht,bt){if(b&&_){let Mt=Gt(ht,bt);b[Mt]=_()}}function rr(ht,bt){if(b){let Mt=Gt(ht,bt),$t=b[Mt];if(typeof $t=="number")return $t}return null}function yr(ht,bt,Mt){if(i.patchRoutesOnNavigation)if(ht){if(Object.keys(ht[0].params).length>0)return{active:!0,matches:u0(bt,Mt,h,!0)}}else return{active:!0,matches:u0(bt,Mt,h,!0)||[]};return{active:!1,matches:null}}async function Dr(ht,bt,Mt,$t){if(!i.patchRoutesOnNavigation)return{type:"success",matches:ht};let Zt=ht;for(;;){let ki=s==null,Di=s||c,We=a;try{await i.patchRoutesOnNavigation({signal:Mt,path:bt,matches:Zt,fetcherKey:$t,patch:(Ve,Xe)=>{Mt.aborted||AS(Ve,Xe,Di,We,n)}})}catch(Ve){return{type:"error",error:Ve,partialMatches:Zt}}finally{ki&&!Mt.aborted&&(c=[...c])}if(Mt.aborted)return{type:"aborted"};let _e=ou(Di,bt,h);if(_e)return{type:"success",matches:_e};let Le=u0(Di,bt,h,!0);if(!Le||Zt.length===Le.length&&Zt.every((Ve,Xe)=>Ve.route.id===Le[Xe].route.id))return{type:"success",matches:null};Zt=Le}}function nr(ht){a={},s=R0(ht,n,void 0,a)}function vr(ht,bt){let Mt=s==null;AS(ht,bt,s||c,a,n),Mt&&(c=[...c],oe({}))}return M={get basename(){return h},get future(){return m},get state(){return S},get routes(){return c},get window(){return e},initialize:Ee,subscribe:ie,enableScrollRestoration:fi,navigate:ee,fetch:Re,revalidate:ae,createHref:ht=>i.history.createHref(ht),encodeLocation:ht=>i.history.encodeLocation(ht),getFetcher:Ge,deleteFetcher:at,dispose:J,getBlocker:Nt,deleteBlocker:mt,patchRoutes:vr,_internalFetchControllers:G,_internalSetRoutes:nr},M}function W7(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function ew(i,e,t,r,n,a){let c,s;if(n){c=[];for(let f of e)if(c.push(f),f.route.id===n){s=f;break}}else c=e,s=e[e.length-1];let h=Bv(r||".",Fv(c),no(i.pathname,t)||i.pathname,a==="path");if(r==null&&(h.search=i.search,h.hash=i.hash),(r==null||r===""||r===".")&&s){let f=Y_(h.search);if(s.route.index&&!f)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&f){let m=new URLSearchParams(h.search),y=m.getAll("index");m.delete("index"),y.filter(b=>b).forEach(b=>m.append("index",b));let g=m.toString();h.search=g?`?${g}`:""}}return t!=="/"&&(h.pathname=h.pathname==="/"?t:Pl([t,h.pathname])),_u(h)}function kS(i,e,t){if(!t||!W7(t))return{path:e};if(t.formMethod&&!s$(t.formMethod))return{path:e,error:zo(405,{method:t.formMethod})};let r=()=>({path:e,error:zo(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),c=TA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!bo(a))return r();let y=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((g,[b,v])=>`${g}${b}=${v}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:y}}}else if(t.formEncType==="application/json"){if(!bo(a))return r();try{let y=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:c,formEncType:t.formEncType,formData:void 0,json:y,text:void 0}}}catch{return r()}}}kr(typeof FormData=="function","FormData is not available in this environment");let s,h;if(t.formData)s=rw(t.formData),h=t.formData;else if(t.body instanceof FormData)s=rw(t.body),h=t.body;else if(t.body instanceof URLSearchParams)s=t.body,h=LS(s);else if(t.body==null)s=new URLSearchParams,h=new FormData;else try{s=new URLSearchParams(t.body),h=LS(s)}catch{return r()}let f={formMethod:a,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(bo(f.formMethod))return{path:e,submission:f};let m=Mc(e);return i&&m.search&&Y_(m.search)&&s.append("index",""),m.search=`?${s}`,{path:_u(m),submission:f}}function MS(i,e,t,r,n,a,c,s,h,f,m,y,g,b,v,_,T,k,w){var F;let E=w?xo(w[1])?w[1].error:w[1].data:void 0,A=n.createURL(a.location),M=n.createURL(h),S;if(m&&a.errors){let O=Object.keys(a.errors)[0];S=c.findIndex(R=>R.route.id===O)}else if(w&&xo(w[1])){let O=w[0];S=c.findIndex(R=>R.route.id===O)-1}let N=w?w[1].statusCode:void 0,Y=N&&N>=400,Z={currentUrl:A,currentParams:((F=a.matches[0])==null?void 0:F.params)||{},nextUrl:M,nextParams:c[0].params,...s,actionResult:E,actionStatus:N},K=c.map((O,R)=>{let{route:L}=O,G=null;if(S!=null&&R>S?G=!1:L.lazy?G=!0:L.loader==null?G=!1:m?G=tw(L,a.loaderData,a.errors):Y7(a.loaderData,a.matches[R],O)&&(G=!0),G!==null)return iw(t,r,i,O,f,e,G);let V=Y?!1:y||A.pathname+A.search===M.pathname+M.search||A.search!==M.search||Z7(a.matches[R],O),$={...Z,defaultShouldRevalidate:V},q=z0(O,$);return iw(t,r,i,O,f,e,q,$)}),B=[];return v.forEach((O,R)=>{if(m||!c.some(se=>se.route.id===O.routeId)||b.has(R))return;let L=ou(T,O.path,k);if(!L){B.push({key:R,routeId:O.routeId,path:O.path,matches:null,match:null,request:null,controller:null});return}if(_.has(R))return;let G=a.fetchers.get(R),V=cm(L,O.path),$=new AbortController,q=Jh(n,O.path,$.signal),W=null;if(g.has(R))g.delete(R),W=ap(t,r,q,L,V,f,e);else if(G&&G.state!=="idle"&&G.data===void 0)y&&(W=ap(t,r,q,L,V,f,e));else{let se={...Z,defaultShouldRevalidate:Y?!1:y};z0(V,se)&&(W=ap(t,r,q,L,V,f,e,se))}W&&B.push({key:R,routeId:O.routeId,path:O.path,matches:W,match:V,request:q,controller:$})}),{dsMatches:K,revalidatingFetchers:B}}function tw(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let r=e!=null&&i.id in e,n=t!=null&&t[i.id]!==void 0;return!r&&n?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!r&&!n}function Y7(i,e,t){let r=!e||t.route.id!==e.route.id,n=!i.hasOwnProperty(t.route.id);return r||n}function Z7(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function z0(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function AS(i,e,t,r,n){let a;if(i){let h=r[i];kr(h,`No route found to patch children into: routeId = ${i}`),h.children||(h.children=[]),a=h.children}else a=t;let c=e.filter(h=>!a.some(f=>xA(h,f))),s=R0(c,n,[i||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function xA(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,r)=>{var n;return(n=e.children)==null?void 0:n.some(a=>xA(t,a))}):!1}var IS=new WeakMap,bA=({key:i,route:e,manifest:t,mapRouteProperties:r})=>{let n=t[e.id];if(kr(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let a=n.lazy[i];if(!a)return;let c=IS.get(n);c||(c={},IS.set(n,c));let s=c[i];if(s)return s;let h=(async()=>{let f=v7(i),y=n[i]!==void 0&&i!=="hasErrorBoundary";if(f)Wn(!f,"Route property "+i+" is not a supported lazy route property. This property will be ignored."),c[i]=Promise.resolve();else if(y)Wn(!1,`Route "${n.id}" has a static property "${i}" defined. The lazy property will be ignored.`);else{let g=await a();g!=null&&(Object.assign(n,{[i]:g}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[i]=void 0,Object.values(n.lazy).every(g=>g===void 0)&&(n.lazy=void 0))})();return c[i]=h,h},PS=new WeakMap;function X7(i,e,t,r,n){let a=t[i.id];if(kr(a,"No route found in manifest"),!i.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof i.lazy=="function"){let m=PS.get(a);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let y=(async()=>{kr(typeof i.lazy=="function","No lazy route function found");let g=await i.lazy(),b={};for(let v in g){let _=g[v];if(_===void 0)continue;let T=b7(v),w=a[v]!==void 0&&v!=="hasErrorBoundary";T?Wn(!T,"Route property "+v+" is not a supported property to be returned from a lazy route function. This property will be ignored."):w?Wn(!w,`Route "${a.id}" has a static property "${v}" defined but its lazy function is also returning a value for this property. The lazy route property "${v}" will be ignored.`):b[v]=_}Object.assign(a,b),Object.assign(a,{...r(a),lazy:void 0})})();return PS.set(a,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(i.lazy),s=[],h;for(let m of c){if(n&&n.includes(m))continue;let y=bA({key:m,route:i,manifest:t,mapRouteProperties:r});y&&(s.push(y),m===e&&(h=y))}let f=s.length>0?Promise.all(s).then(()=>{}):void 0;return f==null||f.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:h}}async function DS(i){let e=i.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,a)=>{t[e[a].route.id]=n}),t}async function K7(i){return i.matches.some(e=>e.route.unstable_middleware)?wA(i,!1,()=>DS(i),(e,t)=>({[t]:{type:"error",result:e}})):DS(i)}async function wA(i,e,t,r){let{matches:n,request:a,params:c,context:s}=i,h={handlerResult:void 0};try{let f=n.flatMap(y=>y.route.unstable_middleware?y.route.unstable_middleware.map(g=>[y.route.id,g]):[]),m=await _A({request:a,params:c,context:s},f,e,h,t);return e?m:h.handlerResult}catch(f){if(!h.middlewareError)throw f;let m=await r(h.middlewareError.error,h.middlewareError.routeId);return h.handlerResult?Object.assign(h.handlerResult,m):m}}async function _A(i,e,t,r,n,a=0){let{request:c}=i;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let s=e[a];if(!s)return r.handlerResult=await n(),r.handlerResult;let[h,f]=s,m=!1,y,g=async()=>{if(m)throw new Error("You may only call `next()` once per middleware");m=!0,await _A(i,e,t,r,n,a+1)};try{let b=await f({request:i.request,params:i.params,context:i.context},g);return m?b===void 0?y:b:g()}catch(b){throw r.middlewareError?r.middlewareError.error!==b&&(r.middlewareError={routeId:h,error:b}):r.middlewareError={routeId:h,error:b},b}}function CA(i,e,t,r,n){let a=bA({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:i}),c=X7(r.route,bo(t.method)?"action":"loader",e,i,n);return{middleware:a,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function iw(i,e,t,r,n,a,c,s=null){let h=!1,f=CA(i,e,t,r,n);return{...r,_lazyPromises:f,shouldLoad:c,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler(m){return h=!0,s?typeof m=="boolean"?z0(r,{...s,defaultShouldRevalidate:m}):z0(r,s):c},resolve(m){return h||c||m&&t.method==="GET"&&(r.route.lazy||r.route.loader)?J7({request:t,match:r,lazyHandlerPromise:f==null?void 0:f.handler,lazyRoutePromise:f==null?void 0:f.route,handlerOverride:m,scopedContext:a}):Promise.resolve({type:"data",result:void 0})}}}function ap(i,e,t,r,n,a,c,s=null){return r.map(h=>h.route.id!==n.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler:()=>!1,_lazyPromises:CA(i,e,t,h,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:iw(i,e,t,h,a,c,!0,s))}async function Q7(i,e,t,r,n,a){t.some(f=>{var m;return(m=f._lazyPromises)==null?void 0:m.middleware})&&await Promise.all(t.map(f=>{var m;return(m=f._lazyPromises)==null?void 0:m.middleware}));let c={request:e,params:t[0].params,context:n,matches:t},h=await i({...c,fetcherKey:r,unstable_runClientMiddleware:f=>{let m=c;return wA(m,!1,()=>f({...m,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(y,g)=>({[g]:{type:"error",result:y}}))}});try{await Promise.all(t.flatMap(f=>{var m,y;return[(m=f._lazyPromises)==null?void 0:m.handler,(y=f._lazyPromises)==null?void 0:y.route]}))}catch{}return h}async function J7({request:i,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:n,scopedContext:a}){let c,s,h=bo(i.method),f=h?"action":"loader",m=y=>{let g,b=new Promise((T,k)=>g=k);s=()=>g(),i.signal.addEventListener("abort",s);let v=T=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${e.route.id}]`)):y({request:i,params:e.params,context:a},...T!==void 0?[T]:[]),_=(async()=>{try{return{type:"data",result:await(n?n(k=>v(k)):v())}}catch(T){return{type:"error",result:T}}})();return Promise.race([_,b])};try{let y=h?e.route.action:e.route.loader;if(t||r)if(y){let g,[b]=await Promise.all([m(y).catch(v=>{g=v}),t,r]);if(g!==void 0)throw g;c=b}else{await t;let g=h?e.route.action:e.route.loader;if(g)[c]=await Promise.all([m(g),r]);else if(f==="action"){let b=new URL(i.url),v=b.pathname+b.search;throw zo(405,{method:i.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(y)c=await m(y);else{let g=new URL(i.url),b=g.pathname+g.search;throw zo(404,{pathname:b})}}catch(y){return{type:"error",result:y}}finally{s&&i.signal.removeEventListener("abort",s)}return c}async function e$(i){var r,n,a,c,s,h;let{result:e,type:t}=i;if(SA(e)){let f;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(m){return{type:"error",error:m}}return t==="error"?{type:"error",error:new N0(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return t==="error"?FS(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(n=e.init)!=null&&n.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new N0(((a=e.init)==null?void 0:a.status)||500,void 0,e.data),statusCode:mp(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:mp(e)?e.status:void 0}:FS(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function t$(i,e,t,r,n){let a=i.headers.get("Location");if(kr(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!W_.test(a)){let c=r.slice(0,r.findIndex(s=>s.route.id===t)+1);a=ew(new URL(e.url),c,n,a),i.headers.set("Location",a)}return i}function RS(i,e,t){if(W_.test(i)){let r=i,n=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=no(n.pathname,t)!=null;if(n.origin===e.origin&&a)return n.pathname+n.search+n.hash}return i}function Jh(i,e,t,r){let n=i.createURL(TA(e)).toString(),a={signal:t};if(r&&bo(r.formMethod)){let{formMethod:c,formEncType:s}=r;a.method=c.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=rw(r.formData):a.body=r.formData}return new Request(n,a)}function rw(i){let e=new URLSearchParams;for(let[t,r]of i.entries())e.append(t,typeof r=="string"?r:r.name);return e}function LS(i){let e=new FormData;for(let[t,r]of i.entries())e.append(t,r);return e}function i$(i,e,t,r=!1,n=!1){let a={},c=null,s,h=!1,f={},m=t&&xo(t[1])?t[1].error:void 0;return i.forEach(y=>{if(!(y.route.id in e))return;let g=y.route.id,b=e[g];if(kr(!wd(b),"Cannot handle redirect results in processLoaderData"),xo(b)){let v=b.error;if(m!==void 0&&(v=m,m=void 0),c=c||{},n)c[g]=v;else{let _=vd(i,g);c[_.route.id]==null&&(c[_.route.id]=v)}r||(a[g]=vA),h||(h=!0,s=mp(b.error)?b.error.status:500),b.headers&&(f[g]=b.headers)}else a[g]=b.data,b.statusCode&&b.statusCode!==200&&!h&&(s=b.statusCode),b.headers&&(f[g]=b.headers)}),m!==void 0&&t&&(c={[t[0]]:m},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:c,statusCode:s||200,loaderHeaders:f}}function NS(i,e,t,r,n,a){let{loaderData:c,errors:s}=i$(e,t,r);return n.filter(h=>!h.matches||h.matches.some(f=>f.shouldLoad)).forEach(h=>{let{key:f,match:m,controller:y}=h,g=a[f];if(kr(g,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(xo(g)){let b=vd(i.matches,m==null?void 0:m.route.id);s&&s[b.route.id]||(s={...s,[b.route.id]:g.error}),i.fetchers.delete(f)}else if(wd(g))kr(!1,"Unhandled fetcher revalidation redirect");else{let b=tu(g.data);i.fetchers.set(f,b)}}),{loaderData:c,errors:s}}function zS(i,e,t,r){let n=Object.entries(e).filter(([,a])=>a!==vA).reduce((a,[c,s])=>(a[c]=s,a),{});for(let a of t){let c=a.route.id;if(!e.hasOwnProperty(c)&&i.hasOwnProperty(c)&&a.route.loader&&(n[c]=i[c]),r&&r.hasOwnProperty(c))break}return n}function jS(i){return i?xo(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function vd(i,e){return(e?i.slice(0,i.findIndex(r=>r.route.id===e)+1):[...i]).reverse().find(r=>r.route.hasErrorBoundary===!0)||i[0]}function OS(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function zo(i,{pathname:e,routeId:t,method:r,type:n,message:a}={}){let c="Unknown Server Error",s="Unknown @remix-run/router error";return i===400?(c="Bad Request",r&&e&&t?s=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(s="Unable to encode submission body")):i===403?(c="Forbidden",s=`Route "${t}" does not match URL "${e}"`):i===404?(c="Not Found",s=`No route matches URL "${e}"`):i===405&&(c="Method Not Allowed",r&&e&&t?s=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new N0(i||500,c,new Error(s),!0)}function Ry(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[r,n]=e[t];if(wd(n))return{key:r,result:n}}}function TA(i){let e=typeof i=="string"?Mc(i):i;return _u({...e,hash:""})}function r$(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function n$(i){return SA(i.result)&&U7.has(i.result.status)}function xo(i){return i.type==="error"}function wd(i){return(i&&i.type)==="redirect"}function FS(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function SA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function s$(i){return $7.has(i.toUpperCase())}function bo(i){return F7.has(i.toUpperCase())}function Y_(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function cm(i,e){let t=typeof e=="string"?Mc(e).search:e.search;if(i[i.length-1].route.index&&Y_(t||""))return i[i.length-1];let r=mA(i);return r[r.length-1]}function BS(i){let{formMethod:e,formAction:t,formEncType:r,text:n,formData:a,json:c}=i;if(!(!e||!t||!r)){if(n!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:n};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:c,text:void 0}}}function Tb(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function a$(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Of(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function o$(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function tu(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function l$(i,e){try{let t=i.sessionStorage.getItem(yA);if(t){let r=JSON.parse(t);for(let[n,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(n,new Set(a||[]))}}catch{}}function c$(i,e){if(e.size>0){let t={};for(let[r,n]of e)t[r]=[...n];try{i.sessionStorage.setItem(yA,JSON.stringify(t))}catch(r){Wn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function u$(){let i,e,t=new Promise((r,n)=>{i=async a=>{r(a);try{await t}catch{}},e=async a=>{n(a);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var Zd=Ae.createContext(null);Zd.displayName="DataRouter";var pg=Ae.createContext(null);pg.displayName="DataRouterState";var Z_=Ae.createContext({isTransitioning:!1});Z_.displayName="ViewTransition";var EA=Ae.createContext(new Map);EA.displayName="Fetchers";var d$=Ae.createContext(null);d$.displayName="Await";var al=Ae.createContext(null);al.displayName="Navigation";var $v=Ae.createContext(null);$v.displayName="Location";var ol=Ae.createContext({outlet:null,matches:[],isDataRoute:!1});ol.displayName="Route";var X_=Ae.createContext(null);X_.displayName="RouteError";function h$(i,{relative:e}={}){kr(Pp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Ae.useContext(al),{hash:n,pathname:a,search:c}=fg(i,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:Pl([t,a])),r.createHref({pathname:s,search:c,hash:n})}function Pp(){return Ae.useContext($v)!=null}function Hl(){return kr(Pp(),"useLocation() may be used only in the context of a <Router> component."),Ae.useContext($v).location}var kA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function MA(i){Ae.useContext(al).static||Ae.useLayoutEffect(i)}function oo(){let{isDataRoute:i}=Ae.useContext(ol);return i?k$():p$()}function p$(){kr(Pp(),"useNavigate() may be used only in the context of a <Router> component.");let i=Ae.useContext(Zd),{basename:e,navigator:t}=Ae.useContext(al),{matches:r}=Ae.useContext(ol),{pathname:n}=Hl(),a=JSON.stringify(Fv(r)),c=Ae.useRef(!1);return MA(()=>{c.current=!0}),Ae.useCallback((h,f={})=>{if(Wn(c.current,kA),!c.current)return;if(typeof h=="number"){t.go(h);return}let m=Bv(h,JSON.parse(a),n,f.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Pl([e,m.pathname])),(f.replace?t.replace:t.push)(m,f.state,f)},[e,t,a,n,i])}var f$=Ae.createContext(null);function m$(i){let e=Ae.useContext(ol).outlet;return e&&Ae.createElement(f$.Provider,{value:i},e)}function fg(i,{relative:e}={}){let{matches:t}=Ae.useContext(ol),{pathname:r}=Hl(),n=JSON.stringify(Fv(t));return Ae.useMemo(()=>Bv(i,JSON.parse(n),r,e==="path"),[i,n,r,e])}function g$(i,e,t,r){kr(Pp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:a}=Ae.useContext(al),{matches:c}=Ae.useContext(ol),s=c[c.length-1],h=s?s.params:{},f=s?s.pathname:"/",m=s?s.pathnameBase:"/",y=s&&s.route;{let w=y&&y.path||"";PA(f,!y||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Hl(),b;b=g;let v=b.pathname||"/",_=v;if(m!=="/"){let w=m.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let T=!a&&t&&t.matches&&t.matches.length>0?t.matches:ou(i,{pathname:_});return Wn(y||T!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Wn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),w$(T&&T.map(w=>Object.assign({},w,{params:Object.assign({},h,w.params),pathname:Pl([m,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?m:Pl([m,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),c,t,r)}function y$(){let i=IA(),e=mp(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=Ae.createElement(Ae.Fragment,null,Ae.createElement("p",null," Hey developer "),Ae.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ae.createElement("code",{style:a},"ErrorBoundary")," or"," ",Ae.createElement("code",{style:a},"errorElement")," prop on your route.")),Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",null,"Unexpected Application Error!"),Ae.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ae.createElement("pre",{style:n},t):null,c)}var v$=Ae.createElement(y$,null),x$=class extends Ae.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Ae.createElement(ol.Provider,{value:this.props.routeContext},Ae.createElement(X_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b$({routeContext:i,match:e,children:t}){let r=Ae.useContext(Zd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Ae.createElement(ol.Provider,{value:i},t)}function w$(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let n=i,a=t==null?void 0:t.errors;if(a!=null){let h=n.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);kr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,h+1))}let c=!1,s=-1;if(t)for(let h=0;h<n.length;h++){let f=n[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=h),f.route.id){let{loaderData:m,errors:y}=t,g=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){c=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((h,f,m)=>{let y,g=!1,b=null,v=null;t&&(y=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||v$,c&&(s<0&&m===0?(PA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):s===m&&(g=!0,v=f.route.hydrateFallbackElement||null)));let _=e.concat(n.slice(0,m+1)),T=()=>{let k;return y?k=b:g?k=v:f.route.Component?k=Ae.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=h,Ae.createElement(b$,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:k})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?Ae.createElement(x$,{location:t.location,revalidation:t.revalidation,component:b,error:y,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function K_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AA(i){let e=Ae.useContext(Zd);return kr(e,K_(i)),e}function Q_(i){let e=Ae.useContext(pg);return kr(e,K_(i)),e}function _$(i){let e=Ae.useContext(ol);return kr(e,K_(i)),e}function J_(i){let e=_$(i),t=e.matches[e.matches.length-1];return kr(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function C$(){return J_("useRouteId")}function T$(){let{matches:i,loaderData:e}=Q_("useMatches");return Ae.useMemo(()=>i.map(t=>hA(t,e)),[i,e])}function IA(){var r;let i=Ae.useContext(X_),e=Q_("useRouteError"),t=J_("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}var S$=0;function E$(i){let{router:e,basename:t}=AA("useBlocker"),r=Q_("useBlocker"),[n,a]=Ae.useState(""),c=Ae.useCallback(s=>{if(typeof i!="function")return!!i;if(t==="/")return i(s);let{currentLocation:h,nextLocation:f,historyAction:m}=s;return i({currentLocation:{...h,pathname:no(h.pathname,t)||h.pathname},nextLocation:{...f,pathname:no(f.pathname,t)||f.pathname},historyAction:m})},[t,i]);return Ae.useEffect(()=>{let s=String(++S$);return a(s),()=>e.deleteBlocker(s)},[e]),Ae.useEffect(()=>{n!==""&&e.getBlocker(n,c)},[e,n,c]),n&&r.blockers.has(n)?r.blockers.get(n):Qh}function k$(){let{router:i}=AA("useNavigate"),e=J_("useNavigate"),t=Ae.useRef(!1);return MA(()=>{t.current=!0}),Ae.useCallback(async(n,a={})=>{Wn(t.current,kA),t.current&&(typeof n=="number"?i.navigate(n):await i.navigate(n,{fromRouteId:e,...a}))},[i,e])}var $S={};function PA(i,e,t){!e&&!$S[i]&&($S[i]=!0,Wn(!1,t))}var US={};function VS(i,e){!i&&!US[e]&&(US[e]=!0,console.warn(e))}function M$(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&Wn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Ae.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&Wn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Ae.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&Wn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Ae.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var A$=["HydrateFallback","hydrateFallbackElement"],I$=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function P$({router:i,flushSync:e}){let[t,r]=Ae.useState(i.state),[n,a]=Ae.useState(),[c,s]=Ae.useState({isTransitioning:!1}),[h,f]=Ae.useState(),[m,y]=Ae.useState(),[g,b]=Ae.useState(),v=Ae.useRef(new Map),_=Ae.useCallback((E,{deletedFetchers:A,flushSync:M,viewTransitionOpts:S})=>{E.fetchers.forEach((Y,Z)=>{Y.data!==void 0&&v.current.set(Z,Y.data)}),A.forEach(Y=>v.current.delete(Y)),VS(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(VS(S==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!S||!N){e&&M?e(()=>r(E)):Ae.startTransition(()=>r(E));return}if(e&&M){e(()=>{m&&(h&&h.resolve(),m.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:S.currentLocation,nextLocation:S.nextLocation})});let Y=i.window.document.startViewTransition(()=>{e(()=>r(E))});Y.finished.finally(()=>{e(()=>{f(void 0),y(void 0),a(void 0),s({isTransitioning:!1})})}),e(()=>y(Y));return}m?(h&&h.resolve(),m.skipTransition(),b({state:E,currentLocation:S.currentLocation,nextLocation:S.nextLocation})):(a(E),s({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}))},[i.window,e,m,h]);Ae.useLayoutEffect(()=>i.subscribe(_),[i,_]),Ae.useEffect(()=>{c.isTransitioning&&!c.flushSync&&f(new I$)},[c]),Ae.useEffect(()=>{if(h&&n&&i.window){let E=n,A=h.promise,M=i.window.document.startViewTransition(async()=>{Ae.startTransition(()=>r(E)),await A});M.finished.finally(()=>{f(void 0),y(void 0),a(void 0),s({isTransitioning:!1})}),y(M)}},[n,h,i.window]),Ae.useEffect(()=>{h&&n&&t.location.key===n.location.key&&h.resolve()},[h,m,t.location,n]),Ae.useEffect(()=>{!c.isTransitioning&&g&&(a(g.state),s({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),b(void 0))},[c.isTransitioning,g]);let T=Ae.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:E=>i.navigate(E),push:(E,A,M)=>i.navigate(E,{state:A,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(E,A,M)=>i.navigate(E,{replace:!0,state:A,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[i]),k=i.basename||"/",w=Ae.useMemo(()=>({router:i,navigator:T,static:!1,basename:k}),[i,T,k]);return Ae.createElement(Ae.Fragment,null,Ae.createElement(Zd.Provider,{value:w},Ae.createElement(pg.Provider,{value:t},Ae.createElement(EA.Provider,{value:v.current},Ae.createElement(Z_.Provider,{value:c},Ae.createElement(N$,{basename:k,location:t.location,navigationType:t.historyAction,navigator:T},Ae.createElement(D$,{routes:i.routes,future:i.future,state:t})))))),null)}var D$=Ae.memo(R$);function R$({routes:i,future:e,state:t}){return g$(i,void 0,t,e)}function L$({to:i,replace:e,state:t,relative:r}){kr(Pp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=Ae.useContext(al);Wn(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Ae.useContext(ol),{pathname:c}=Hl(),s=oo(),h=Bv(i,Fv(a),c,r==="path"),f=JSON.stringify(h);return Ae.useEffect(()=>{s(JSON.parse(f),{replace:e,state:t,relative:r})},[s,f,r,e,t]),null}function nw(i){return m$(i.context)}function N$({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:n,static:a=!1}){kr(!Pp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),s=Ae.useMemo(()=>({basename:c,navigator:n,static:a,future:{}}),[c,n,a]);typeof t=="string"&&(t=Mc(t));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:g="default"}=t,b=Ae.useMemo(()=>{let v=no(h,c);return v==null?null:{location:{pathname:v,search:f,hash:m,state:y,key:g},navigationType:r}},[c,h,f,m,y,g,r]);return Wn(b!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:Ae.createElement(al.Provider,{value:s},Ae.createElement($v.Provider,{children:e,value:b}))}var d0="get",h0="application/x-www-form-urlencoded";function Uv(i){return i!=null&&typeof i.tagName=="string"}function z$(i){return Uv(i)&&i.tagName.toLowerCase()==="button"}function j$(i){return Uv(i)&&i.tagName.toLowerCase()==="form"}function O$(i){return Uv(i)&&i.tagName.toLowerCase()==="input"}function F$(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function B$(i,e){return i.button===0&&(!e||e==="_self")&&!F$(i)}function sw(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let r=i[t];return e.concat(Array.isArray(r)?r.map(n=>[t,n]):[[t,r]])},[]))}function $$(i,e){let t=sw(i);return e&&e.forEach((r,n)=>{t.has(n)||e.getAll(n).forEach(a=>{t.append(n,a)})}),t}var Ly=null;function U$(){if(Ly===null)try{new FormData(document.createElement("form"),0),Ly=!1}catch{Ly=!0}return Ly}var V$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sb(i){return i!=null&&!V$.has(i)?(Wn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${h0}"`),null):i}function H$(i,e){let t,r,n,a,c;if(j$(i)){let s=i.getAttribute("action");r=s?no(s,e):null,t=i.getAttribute("method")||d0,n=Sb(i.getAttribute("enctype"))||h0,a=new FormData(i)}else if(z$(i)||O$(i)&&(i.type==="submit"||i.type==="image")){let s=i.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||s.getAttribute("action");if(r=h?no(h,e):null,t=i.getAttribute("formmethod")||s.getAttribute("method")||d0,n=Sb(i.getAttribute("formenctype"))||Sb(s.getAttribute("enctype"))||h0,a=new FormData(s,i),!U$()){let{name:f,type:m,value:y}=i;if(m==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,y)}}else{if(Uv(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=d0,r=null,n=h0,c=i}return a&&n==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:n,formData:a,body:c}}function e2(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function G$(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function q$(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function W$(i,e,t){let r=await Promise.all(i.map(async n=>{let a=e.routes[n.route.id];if(a){let c=await G$(a,t);return c.links?c.links():[]}return[]}));return K$(r.flat(1).filter(q$).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function HS(i,e,t,r,n,a){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,s=(h,f)=>{var m;return t[f].pathname!==h.pathname||((m=t[f].route.path)==null?void 0:m.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,f)=>c(h,f)||s(h,f)):a==="data"?e.filter((h,f)=>{var y;let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(c(h,f)||s(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Y$(i,e,{includeHydrateFallback:t}={}){return Z$(i.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function Z$(i){return[...new Set(i)]}function X$(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function K$(i,e){let t=new Set;return new Set(e),i.reduce((r,n)=>{let a=JSON.stringify(X$(n));return t.has(a)||(t.add(a),r.push({key:a,link:n})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Q$=new Set([100,101,204,205]);function J$(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&no(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function DA(){let i=Ae.useContext(Zd);return e2(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function eU(){let i=Ae.useContext(pg);return e2(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var t2=Ae.createContext(void 0);t2.displayName="FrameworkContext";function RA(){let i=Ae.useContext(t2);return e2(i,"You must render this element inside a <HydratedRouter> element"),i}function tU(i,e){let t=Ae.useContext(t2),[r,n]=Ae.useState(!1),[a,c]=Ae.useState(!1),{onFocus:s,onBlur:h,onMouseEnter:f,onMouseLeave:m,onTouchStart:y}=e,g=Ae.useRef(null);Ae.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let _=k=>{k.forEach(w=>{c(w.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[i]),Ae.useEffect(()=>{if(r){let _=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(_)}}},[r]);let b=()=>{n(!0)},v=()=>{n(!1),c(!1)};return t?i!=="intent"?[a,g,{}]:[a,g,{onFocus:Ff(s,b),onBlur:Ff(h,v),onMouseEnter:Ff(f,b),onMouseLeave:Ff(m,v),onTouchStart:Ff(y,b)}]:[!1,g,{}]}function Ff(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function iU({page:i,...e}){let{router:t}=DA(),r=Ae.useMemo(()=>ou(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?Ae.createElement(nU,{page:i,matches:r,...e}):null}function rU(i){let{manifest:e,routeModules:t}=RA(),[r,n]=Ae.useState([]);return Ae.useEffect(()=>{let a=!1;return W$(i,e,t).then(c=>{a||n(c)}),()=>{a=!0}},[i,e,t]),r}function nU({page:i,matches:e,...t}){let r=Hl(),{manifest:n,routeModules:a}=RA(),{basename:c}=DA(),{loaderData:s,matches:h}=eU(),f=Ae.useMemo(()=>HS(i,e,h,n,r,"data"),[i,e,h,n,r]),m=Ae.useMemo(()=>HS(i,e,h,n,r,"assets"),[i,e,h,n,r]),y=Ae.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let v=new Set,_=!1;if(e.forEach(k=>{var E;let w=n.routes[k.route.id];!w||!w.hasLoader||(!f.some(A=>A.route.id===k.route.id)&&k.route.id in s&&((E=a[k.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?_=!0:v.add(k.route.id))}),v.size===0)return[];let T=J$(i,c);return _&&v.size>0&&T.searchParams.set("_routes",e.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[T.pathname+T.search]},[c,s,r,n,f,e,i,a]),g=Ae.useMemo(()=>Y$(m,n),[m,n]),b=rU(m);return Ae.createElement(Ae.Fragment,null,y.map(v=>Ae.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),g.map(v=>Ae.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),b.map(({key:v,link:_})=>Ae.createElement("link",{key:v,..._})))}function sU(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LA&&(window.__reactRouterVersion="7.6.0")}catch{}function aU(i,e){return q7({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:f7({window:e==null?void 0:e.window}),hydrationData:oU(),routes:i,mapRouteProperties:M$,hydrationRouteProperties:A$,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function oU(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:lU(i.errors)}),i}function lU(i){if(!i)return null;let e=Object.entries(i),t={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")t[r]=new N0(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let a=window[n.__subType];if(typeof a=="function")try{let c=new a(n.message);c.stack="",t[r]=c}catch{}}if(t[r]==null){let a=new Error(n.message);a.stack="",t[r]=a}}else t[r]=n;return t}var NA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i2=Ae.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:a,replace:c,state:s,target:h,to:f,preventScrollReset:m,viewTransition:y,...g},b){let{basename:v}=Ae.useContext(al),_=typeof f=="string"&&NA.test(f),T,k=!1;if(typeof f=="string"&&_&&(T=f,LA))try{let Z=new URL(window.location.href),K=f.startsWith("//")?new URL(Z.protocol+f):new URL(f),B=no(K.pathname,v);K.origin===Z.origin&&B!=null?f=B+K.search+K.hash:k=!0}catch{Wn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=h$(f,{relative:n}),[E,A,M]=tU(r,g),S=dU(f,{replace:c,state:s,target:h,preventScrollReset:m,relative:n,viewTransition:y});function N(Z){e&&e(Z),Z.defaultPrevented||S(Z)}let Y=Ae.createElement("a",{...g,...M,href:T||w,onClick:k||a?e:N,ref:sU(b,A),target:h,"data-discover":!_&&t==="render"?"true":void 0});return E&&!_?Ae.createElement(Ae.Fragment,null,Y,Ae.createElement(iU,{page:w})):Y});i2.displayName="Link";var zA=Ae.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:a,to:c,viewTransition:s,children:h,...f},m){let y=fg(c,{relative:f.relative}),g=Hl(),b=Ae.useContext(pg),{navigator:v,basename:_}=Ae.useContext(al),T=b!=null&&gU(y)&&s===!0,k=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,w=g.pathname,E=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(w=w.toLowerCase(),E=E?E.toLowerCase():null,k=k.toLowerCase()),E&&_&&(E=no(E,_)||E);const A=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let M=w===k||!n&&w.startsWith(k)&&w.charAt(A)==="/",S=E!=null&&(E===k||!n&&E.startsWith(k)&&E.charAt(k.length)==="/"),N={isActive:M,isPending:S,isTransitioning:T},Y=M?e:void 0,Z;typeof r=="function"?Z=r(N):Z=[r,M?"active":null,S?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let K=typeof a=="function"?a(N):a;return Ae.createElement(i2,{...f,"aria-current":Y,className:Z,ref:m,style:K,to:c,viewTransition:s},typeof h=="function"?h(N):h)});zA.displayName="NavLink";var cU=Ae.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:n,state:a,method:c=d0,action:s,onSubmit:h,relative:f,preventScrollReset:m,viewTransition:y,...g},b)=>{let v=fU(),_=mU(s,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",k=typeof s=="string"&&NA.test(s),w=E=>{if(h&&h(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,M=(A==null?void 0:A.getAttribute("formmethod"))||c;v(A||E.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:n,state:a,relative:f,preventScrollReset:m,viewTransition:y})};return Ae.createElement("form",{ref:b,method:T,action:_,onSubmit:r?h:w,...g,"data-discover":!k&&i==="render"?"true":void 0})});cU.displayName="Form";function uU(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jA(i){let e=Ae.useContext(Zd);return kr(e,uU(i)),e}function dU(i,{target:e,replace:t,state:r,preventScrollReset:n,relative:a,viewTransition:c}={}){let s=oo(),h=Hl(),f=fg(i,{relative:a});return Ae.useCallback(m=>{if(B$(m,e)){m.preventDefault();let y=t!==void 0?t:_u(h)===_u(f);s(i,{replace:y,state:r,preventScrollReset:n,relative:a,viewTransition:c})}},[h,s,f,t,r,e,i,n,a,c])}function r2(i){Wn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Ae.useRef(sw(i)),t=Ae.useRef(!1),r=Hl(),n=Ae.useMemo(()=>$$(r.search,t.current?null:e.current),[r.search]),a=oo(),c=Ae.useCallback((s,h)=>{const f=sw(typeof s=="function"?s(n):s);t.current=!0,a("?"+f,h)},[a,n]);return[n,c]}var hU=0,pU=()=>`__${String(++hU)}__`;function fU(){let{router:i}=jA("useSubmit"),{basename:e}=Ae.useContext(al),t=C$();return Ae.useCallback(async(r,n={})=>{let{action:a,method:c,encType:s,formData:h,body:f}=H$(r,e);if(n.navigate===!1){let m=n.fetcherKey||pU();await i.fetch(m,t,n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:f,formMethod:n.method||c,formEncType:n.encType||s,flushSync:n.flushSync})}else await i.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:f,formMethod:n.method||c,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[i,e,t])}function mU(i,{relative:e}={}){let{basename:t}=Ae.useContext(al),r=Ae.useContext(ol);kr(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),a={...fg(i||".",{relative:e})},c=Hl();if(i==null){a.search=c.search;let s=new URLSearchParams(a.search),h=s.getAll("index");if(h.some(m=>m==="")){s.delete("index"),h.filter(y=>y).forEach(y=>s.append("index",y));let m=s.toString();a.search=m?`?${m}`:""}}return(!i||i===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Pl([t,a.pathname])),_u(a)}function gU(i,e={}){let t=Ae.useContext(Z_);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jA("useViewTransitionState"),n=fg(i,{relative:e.relative});if(!t.isTransitioning)return!1;let a=no(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=no(t.nextLocation.pathname,r)||t.nextLocation.pathname;return L0(n.pathname,c)!=null||L0(n.pathname,a)!=null}[...Q$];/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yU(i){return Ae.createElement(P$,{flushSync:bR.flushSync,...i})}const GS=()=>{const i=IA();return console.error(i),mp(i)?z.jsxs("div",{id:"error-page",children:[z.jsx("h1",{children:be.t("Oops!")}),z.jsx("p",{children:be.t("Sorry, an unexpected error has occurred.")}),z.jsx("p",{children:z.jsx("i",{children:i.statusText})})]}):z.jsxs("div",{id:"error-page",children:[z.jsx("h1",{children:be.t("Oops!")}),z.jsx("p",{children:be.t("Sorry, an unexpected error has occurred.")})]})},vU="View",xU="Rename",bU="Delete",wU="Cancel",_U="Name",CU="Save",TU="ID",SU="Created",EU="Model",kU="Actions",MU="Search",AU="Clear",IU="Close",PU="Status",DU="Type",RU="Duration",LU="Pending",NU="Running",zU="Success",jU="Failed",OU="Revoked",FU="Cancelled",BU="Target",$U="Selected",UU="Daily",VU="Weekly",HU="Monthly",GU="Evaluate",qU="Overview",WU="Compare",YU="Predict",ZU="Jobs",XU="Settings",KU="Code",QU="Aggregate",JU="Range",eV="Add",tV="Required",iV="Remove",rV="Indicator",nV="Loading",sV="Evaluation",aV="Connected",oV="Configure",lV="Sharing",cV="Edit",uV="URL",dV="Authorities",hV="Period",pV="Evaluations",fV={View:vU,Rename:xU,Delete:bU,"Delete evaluation":"Delete evaluation","Are you sure you want to delete this evaluation? This action cannot be undone.":"Are you sure you want to delete this evaluation? This action cannot be undone.",Cancel:wU,"Name is required":"Name is required","Rename evaluation":"Rename evaluation",Name:_U,Save:CU,ID:TU,Created:SU,Model:EU,"CRPS (Norm)":"CRPS (Norm)","Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy":"Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy",Actions:kU,"New evaluation":"New evaluation","Sort by {{column}}":"Sort by {{column}}","No evaluations available":"No evaluations available",Search:MU,"No models found":"No models found",Clear:AU,"There are running jobs in the background":"There are running jobs in the background","Running jobs":"Running jobs","Evaluations deleted":"Evaluations deleted","Failed to delete evaluations":"Failed to delete evaluations","Evaluation deleted":"Evaluation deleted","Failed to delete evaluation":"Failed to delete evaluation","Error renaming evaluation":"Error renaming evaluation","Could not connect to CHAP":"Could not connect to CHAP","The app is not able to connect to the CHAP server.":"The app is not able to connect to the CHAP server.","Please check your route configuration and make sure the CHAP server is running.":"Please check your route configuration and make sure the CHAP server is running.","Learn more about Modeling and CHAP":"Learn more about Modeling and CHAP","Configure settings":"Configure settings","Oops!":"Oops!","Sorry, an unexpected error has occurred.":"Sorry, an unexpected error has occurred.","Inspect dataset":"Inspect dataset",Close:IU,"Cancel job":"Cancel job","Are you sure you want to cancel this job? This action cannot be undone.":"Are you sure you want to cancel this job? This action cannot be undone.","Delete job":"Delete job","Are you sure you want to delete this job? This action cannot be undone.":"Are you sure you want to delete this job? This action cannot be undone.","Failed to copy job ID":"Failed to copy job ID","Go to result":"Go to result","View Logs":"View Logs","Copy Job ID":"Copy Job ID","Job Logs":"Job Logs","An error occurred while loading the logs.":"An error occurred while loading the logs.","No logs reported for this job":"No logs reported for this job","Job cancelled":"Job cancelled","Failed to cancel job":"Failed to cancel job","Job deleted":"Job deleted","Failed to delete job":"Failed to delete job",Status:PU,Type:DU,"Start date":"Start date","End date":"End date",Duration:RU,"No jobs available":"No jobs available",Pending:LU,Running:NU,Success:zU,Failed:jU,Revoked:OU,"Create evaluation":"Create evaluation","Make prediction":"Make prediction","Create dataset (deprecated)":"Create dataset (deprecated)","Create evaluation (deprecated)":"Create evaluation (deprecated)","Create evaluation (Legacy)":"Create evaluation (Legacy)","Create dataset":"Create dataset",Cancelled:FU,"Unsaved changes":"Unsaved changes","You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?":"You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?","Leave page":"Leave page","Back to evaluations":"Back to evaluations","Error starting evaluation job":"Error starting evaluation job","Start job":"Start job","Map Data Items":"Map Data Items","Map the model features to corresponding data items in DHIS2":"Map the model features to corresponding data items in DHIS2",Target:BU,"Map the model target to the corresponding data item in DHIS2":"Map the model target to the corresponding data item in DHIS2","Map each model covariate to the corresponding data item in DHIS2":"Map each model covariate to the corresponding data item in DHIS2","Save Mappings":"Save Mappings","No model selected":"No model selected","All data items mapped":"All data items mapped","{{mapped}}/{{total}} data items mapped":"{{mapped}}/{{total}} data items mapped","Dataset Configuration":"Dataset Configuration","Configure sources":"Configure sources","The Data Visualizer app is not compatible with this feature. Please update to a newer version.":"The Data Visualizer app is not compatible with this feature. Please update to a newer version.","Please map all model covariates to valid data items":"Please map all model covariates to valid data items",'Target "{{targetName}}" must be mapped to a data item':'Target "{{targetName}}" must be mapped to a data item','Covariate "{{covariateName}}" must be mapped to a data item':'Covariate "{{covariateName}}" must be mapped to a data item',"Organisation Units":"Organisation Units","Select organisation units":"Select organisation units","Select Organisation Units":"Select Organisation Units","Organisation unit levels":"Organisation unit levels","Some models require you to only select organisation units from the same level.":"Some models require you to only select organisation units from the same level.","All org units must be at the same level":"All org units must be at the same level","Confirm Selection":"Confirm Selection",Selected:$U,"Select Model":"Select Model","Filter models":"Filter models","Search by name":"Search by name","Select model":"Select model","Evaluation name":"Evaluation name","EWARS Evaluation 22-24":"EWARS Evaluation 22-24","Period type":"Period type",Daily:UU,Weekly:VU,Monthly:HU,"From period":"From period","To period":"To period","Missing id for org unit":"Missing id for org unit","Period type is required":"Period type is required","Start date is required":"Start date is required","End date is required":"End date is required","At least one org unit is required":"At least one org unit is required","Please select a model":"Please select a model","Please map the covariates to valid data items":"Please map the covariates to valid data items","Please map the target to a valid data item":"Please map the target to a valid data item","End period must be after start period":"End period must be after start period","Selected: {{commaSeparatedListOfOrganisationUnits}}":"Selected: {{commaSeparatedListOfOrganisationUnits}}","Nothing selected":"Nothing selected","User organisation unit":"User organisation unit","User sub-units":"User sub-units","User sub-x2-units":"User sub-x2-units","Select a level":"Select a level","Select a group":"Select a group","Deselect all":"Deselect all","Search organisation units":"Search organisation units","You cannot select more than {{max}} organisation units at a time":"You cannot select more than {{max}} organisation units at a time","Get started with the Modeling app":"Get started with the Modeling app","To get started, create a route that points to a running CHAP server.":"To get started, create a route that points to a running CHAP server.","Route and servers are configured on the settings page.":"Route and servers are configured on the settings page.",Evaluate:GU,Overview:qU,Compare:WU,Predict:YU,Jobs:ZU,Settings:XU,"The version of the Modeling App is not compatible with the backend (Chap core).":"The version of the Modeling App is not compatible with the backend (Chap core).","Compare evaluations":"Compare evaluations","Compare evaluations to assess model, co-variates and data performance.":"Compare evaluations to assess model, co-variates and data performance.","Select base evaluation":"Select base evaluation","Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.":"Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.","An error occurred while fetching chart data ":"An error occurred while fetching chart data ","Select two evaluations to compare their results. The\n                    selected evaluations must be compatible.":`Select two evaluations to compare their results. The
                    selected evaluations must be compatible.`,"Compatible evaluations have overlapping organisation units and split periods.":"Compatible evaluations have overlapping organisation units and split periods.","Split period":"Split period","Add required Data Elements":"Add required Data Elements","This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ":"This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ","-app and create the Data Elements listed below.":"-app and create the Data Elements listed below.","NB! Make sure the CODE property for each data element is exactly the same as below.":"NB! Make sure the CODE property for each data element is exactly the same as below.","Properties in the new Data Element form not specified in the tables below should have the default value.":"Properties in the new Data Element form not specified in the tables below should have the default value.","Short name":"Short name",Code:KU,"Domain type":"Domain type",Aggregate:QU,"Aggregation levels":"Aggregation levels","Assign all org unit levels":"Assign all org unit levels","Prediction for {{predictionTargetName}} for {{orgUnitName}}":"Prediction for {{predictionTargetName}} for {{orgUnitName}}","Quantile median":"Quantile median",Range:JU,"Quantile low":"Quantile low","Select data element for low quantile":"Select data element for low quantile","Select data element for median quantile":"Select data element for median quantile","Select data element for high quantile":"Select data element for high quantile","Import prediction":"Import prediction","Prediction has been imported.":"Prediction has been imported.","CHAP Core results":"CHAP Core results","Select data element":"Select data element","It seems like you missing Data Elements for CHAP prediction.":"It seems like you missing Data Elements for CHAP prediction.","Add data elements":"Add data elements","Job is still running. Please wait until it is finished before doing any actions.":"Job is still running. Please wait until it is finished before doing any actions.","Unknown error":"Unknown error","No model templates found.":"No model templates found.","Model Templates":"Model Templates","Configure new models based on generic model templates":"Configure new models based on generic model templates","Back to settings":"Back to settings","Configure Model":"Configure Model","Model Template":"Model Template","Select a model template":"Select a model template","Configured Model Name":"Configured Model Name",'Enter something to identify your model, e.g. "Debug" or "Malaria"':'Enter something to identify your model, e.g. "Debug" or "Malaria"',"Your model will be saved as {{modelName}} [{{configuredModelName}}]":"Your model will be saved as {{modelName}} [{{configuredModelName}}]","Additional Covariates":"Additional Covariates","Enter covariate name":"Enter covariate name",Add:eV,Required:tV,Remove:iV,"Please check covariates":"Please check covariates","Template is required":"Template is required","Covariate name is required":"Covariate name is required","Covariate name cannot contain spaces":"Covariate name cannot contain spaces","Covariate already exists":"Covariate already exists","Model Parameters":"Model Parameters","Enter item":"Enter item","Leave empty for null":"Leave empty for null","Model configured":"Model configured","Failed to configure model":"Failed to configure model","Prediction for Northern Province":"Prediction for Northern Province","Organisation unit level":"Organisation unit level","Organisation unit level to import data to":"Organisation unit level to import data to","Organisation units":"Organisation units","Data Element":"Data Element",Indicator:rV,"Program Indicator":"Program Indicator",Loading:nV,"Start typing to search for data items":"Start typing to search for data items","No matches found":"No matches found","Search for indicators, data elements, or program indicators":"Search for indicators, data elements, or program indicators","No compatible evaluations found":"No compatible evaluations found","Select evaluation to compare with":"Select evaluation to compare with","No evaluations found":"No evaluations found",Evaluation:sV,"CHAP settings":"CHAP settings","An error occurred while connecting to the CHAP server.":"An error occurred while connecting to the CHAP server.","Are you sure you have configured your route correctly? See the console for more details.":"Are you sure you have configured your route correctly? See the console for more details.","Server information":"Server information","CHAP Version":"CHAP Version","Python Version":"Python Version","Operating System":"Operating System",Connected:aV,"Your server might not be secure":"Your server might not be secure","CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.":"CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.","Your server is not secure":"Your server is not secure","Model settings":"Model settings","An error occurred while loading models.":"An error occurred while loading models.","Please try to reload the page. If the problem persists, contact your system administrator.":"Please try to reload the page. If the problem persists, contact your system administrator.","Model templates":"Model templates","Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.":"Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.","Configured models":"Configured models",Configure:oV,"Models configured":"Models configured","Route configuration":"Route configuration","No route found.":"No route found.","Add route":"Add route","Delete route":"Delete route","Are you sure you want to delete this route?":"Are you sure you want to delete this route?","Edit route":"Edit route","Public access":"Public access",'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".':'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".',Sharing:lV,Edit:cV,"Invalid URL format":"Invalid URL format","URL is required":"URL is required","URL must end with a double wildcard (/**)":"URL must end with a double wildcard (/**)","CHAP Core URL":"CHAP Core URL","Route settings":"Route settings","There was an error loading the route settings. Please try to reload the page.":"There was an error loading the route settings. Please try to reload the page.","If the problem persists, please contact your system administrator.":"If the problem persists, please contact your system administrator.","You do not have permission to add or modify routes.":"You do not have permission to add or modify routes.","If you think this is an error, please contact your system administrator.":"If you think this is an error, please contact your system administrator.",URL:uV,Authorities:dV,"Error deleting route":"Error deleting route","Route deleted successfully":"Route deleted successfully","Error saving route":"Error saving route","Route saved successfully":"Route saved successfully",Period:hV,"Start month":"Start month","End month":"End month","Error loading evaluations":"Error loading evaluations","An unknown error occurred":"An unknown error occurred",Evaluations:pV,"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.":"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.","Error loading jobs":"Error loading jobs","Active jobs":"Active jobs","View and manage currently running jobs and their status.":"View and manage currently running jobs and their status.","Create a new evaluation to assess the performance of a model":"Create a new evaluation to assess the performance of a model","__MANIFEST_APP_TITLE_Application title":"Modeling","__MANIFEST_APP_DESCRIPTION_Application description":""},mV="default";be.addResources("en",mV,fV);const OA="1400px",gV={maxWidth:OA,marginLeft:"auto",marginRight:"auto",padding:"20px 16px",width:"100%"},qS=({children:i,maxWidth:e})=>{const t=T$().some(r=>{var n;return!!((n=r.handle)!=null&&n.fullWidth)});return z.jsx("div",{style:{...gV,maxWidth:t?"none":e||OA,width:"100%"},children:i})},yV="_drawerWrapper_1jnc9_1",vV={drawerWrapper:yV};function aw(){return aw=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},aw.apply(this,arguments)}var xV=function(e,t){var r={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return r[e]},n2=function(e){var t=e.open,r=e.onClose,n=r===void 0?function(){}:r,a=e.children,c=e.style,s=e.enableOverlay,h=s===void 0?!0:s,f=e.overlayColor,m=f===void 0?"#000":f,y=e.overlayOpacity,g=y===void 0?.4:y,b=e.zIndex,v=b===void 0?100:b,_=e.duration,T=_===void 0?500:_,k=e.direction,w=e.size,E=w===void 0?250:w,A=e.className,M=e.customIdSuffix,S=e.lockBackgroundScroll,N=S===void 0?!1:S,Y=e.overlayClassName,Z=Y===void 0?"":Y,K=Ae.useRef(null);Ae.useEffect(function(){var R=function(){K.current=window.document.querySelector("body"),K.current&&N&&(K.current.style.overflow=t?"hidden":"")};R()},[t]);var B=Ae.useMemo(function(){return M||(Math.random()+1).toString(36).substring(7)},[M]),F={backgroundColor:m.toString(),opacity:g,zIndex:v},O=aw({zIndex:v+1,transitionDuration:T+"ms"},xV(k,E),c);return he.createElement("div",{id:"EZDrawer"+B,className:"EZDrawer"},he.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+B,className:"EZDrawer__checkbox",onChange:n,checked:t}),he.createElement("nav",{role:"navigation",id:"EZDrawer__container"+B,style:O,className:"EZDrawer__container "+A},a),h&&he.createElement("label",{htmlFor:"EZDrawer__checkbox"+B,id:"EZDrawer__overlay"+B,className:"EZDrawer__overlay "+Z,style:F}))};const bV="_formWrapper_6d4wk_1",wV={formWrapper:bV},_V=({value:i,onChange:e})=>z.jsx("div",{children:z.jsxs(ls,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[z.jsx(Cs,{value:"week",label:"Weekly"}),z.jsx(Cs,{value:"month",label:"Monthly"})]})}),CV="_datePicker_1yiz7_1",TV="_label_1yiz7_5",SV="_content_1yiz7_14",EV="_box_1yiz7_18",kV="_inputDiv_1yiz7_23",MV="_input_1yiz7_23",Bh={datePicker:CV,label:TV,content:SV,box:EV,inputDiv:kV,input:MV},WS=({label:i,name:e,onChange:t,periodeType:r})=>{const n=Ae.useRef(null);return z.jsxs("div",{className:Bh.datePicker,style:{opacity:r===""?.6:1},children:[z.jsx("label",{className:Bh.label,children:i}),z.jsx("div",{className:Bh.content,children:z.jsx("div",{className:Bh.box,children:z.jsx("div",{className:Bh.inputDiv,children:z.jsx("input",{disabled:r==="",className:Bh.input,ref:n,type:r,name:e,onChange:a=>t(a.target.value)})})})})]})},AV="_timePeriodeSelector_fpkps_1",IV="_timePeriodeSelectorInputFields_fpkps_7",PV="_timePeriodeSelectorInputFieldsChild_fpkps_13",Ny={timePeriodeSelector:AV,timePeriodeSelectorInputFields:IV,timePeriodeSelectorInputFieldsChild:PV},FA=6048e5,DV=864e5,Vv=6e4,Hv=36e5,RV=1e3,YS=Symbol.for("constructDateFrom");function ts(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&YS in i?i[YS](e):i instanceof Date?new i.constructor(e):new Date(e)}function Pr(i,e){return ts(e||i,i)}function Gv(i,e,t){const r=Pr(i,t==null?void 0:t.in);return isNaN(e)?ts((t==null?void 0:t.in)||i,NaN):(e&&r.setDate(r.getDate()+e),r)}function BA(i,e,t){const r=Pr(i,t==null?void 0:t.in);if(isNaN(e))return ts(i,NaN);if(!e)return r;const n=r.getDate(),a=ts(i,r.getTime());a.setMonth(r.getMonth()+e+1,0);const c=a.getDate();return n>=c?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function Bf(i,e,t){const{years:r=0,months:n=0,weeks:a=0,days:c=0,hours:s=0,minutes:h=0,seconds:f=0}=e,m=Pr(i,t==null?void 0:t.in),y=n||r?BA(m,n+r*12):m,g=c||a?Gv(y,c+a*7):y,b=h+s*60,_=(f+b*60)*1e3;return ts(i,+g+_)}let LV={};function Xd(){return LV}function Cu(i,e){var s,h,f,m;const t=Xd(),r=(e==null?void 0:e.weekStartsOn)??((h=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,n=Pr(i,e==null?void 0:e.in),a=n.getDay(),c=(a<r?7:0)+a-r;return n.setDate(n.getDate()-c),n.setHours(0,0,0,0),n}function _c(i,e){return Cu(i,{...e,weekStartsOn:1})}function $A(i,e){const t=Pr(i,e==null?void 0:e.in),r=t.getFullYear(),n=ts(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=_c(n),c=ts(t,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const s=_c(c);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function j0(i){const e=Pr(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function Gl(i,...e){const t=ts.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ZS(i,e){const t=Pr(i,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function UA(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e),a=ZS(r),c=ZS(n),s=+a-j0(a),h=+c-j0(c);return Math.round((s-h)/DV)}function NV(i,e){const t=$A(i,e),r=ts(i,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),_c(r)}function zV(i,e,t){return Gv(i,e*7,t)}function wm(i,e){const t=+Pr(i)-+Pr(e);return t<0?-1:t>0?1:t}function jV(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function Fm(i){return!(!jV(i)&&typeof i!="number"||isNaN(+Pr(i)))}function OV(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e),a=r.getFullYear()-n.getFullYear(),c=r.getMonth()-n.getMonth();return a*12+c}function FV(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e);return r.getFullYear()-n.getFullYear()}function BV(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e),a=XS(r,n),c=Math.abs(UA(r,n));r.setDate(r.getDate()-a*c);const s=+(XS(r,n)===-a),h=a*(c-s);return h===0?0:h}function XS(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function s2(i){return e=>{const r=(i?Math[i]:Math.trunc)(e);return r===0?0:r}}function $V(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e),a=(+r-+n)/Hv;return s2(t==null?void 0:t.roundingMethod)(a)}function VA(i,e){return+Pr(i)-+Pr(e)}function UV(i,e,t){const r=VA(i,e)/Vv;return s2(t==null?void 0:t.roundingMethod)(r)}function VV(i,e){const t=Pr(i,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function HA(i,e){const t=Pr(i,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function HV(i,e){const t=Pr(i,e==null?void 0:e.in);return+VV(t,e)==+HA(t,e)}function GV(i,e,t){const[r,n,a]=Gl(t==null?void 0:t.in,i,i,e),c=wm(n,a),s=Math.abs(OV(n,a));if(s<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-c*s);let h=wm(n,a)===-c;HV(r)&&s===1&&wm(r,a)===1&&(h=!1);const f=c*(s-+h);return f===0?0:f}function qV(i,e,t){const r=VA(i,e)/1e3;return s2(t==null?void 0:t.roundingMethod)(r)}function WV(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e),a=wm(r,n),c=Math.abs(FV(r,n));r.setFullYear(1584),n.setFullYear(1584);const s=wm(r,n)===-a,h=a*(c-+s);return h===0?0:h}function YV(i,e){const[t,r]=Gl(i,e.start,e.end);return{start:t,end:r}}function ZV(i,e){const t=Pr(i,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function XV(i,e){const t=Pr(i,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function KV(i,e){const t=e==null?void 0:e.weekStartsOn,r=Pr(i,e==null?void 0:e.in),n=r.getDay(),a=(n<t?-7:0)+6-(n-t);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}function QV(i,e){return KV(i,{...e,weekStartsOn:1})}const JV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eH=(i,e,t)=>{let r;const n=JV[i];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Eb(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const tH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nH={date:Eb({formats:tH,defaultWidth:"full"}),time:Eb({formats:iH,defaultWidth:"full"}),dateTime:Eb({formats:rH,defaultWidth:"full"})},sH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aH=(i,e,t,r)=>sH[i];function $f(i){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let n;if(r==="formatting"&&i.formattingValues){const c=i.defaultFormattingWidth||i.defaultWidth,s=t!=null&&t.width?String(t.width):c;n=i.formattingValues[s]||i.formattingValues[c]}else{const c=i.defaultWidth,s=t!=null&&t.width?String(t.width):i.defaultWidth;n=i.values[s]||i.values[c]}const a=i.argumentCallback?i.argumentCallback(e):e;return n[a]}}const oH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pH=(i,e)=>{const t=Number(i),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},fH={ordinalNumber:pH,era:$f({values:oH,defaultWidth:"wide"}),quarter:$f({values:lH,defaultWidth:"wide",argumentCallback:i=>i-1}),month:$f({values:cH,defaultWidth:"wide"}),day:$f({values:uH,defaultWidth:"wide"}),dayPeriod:$f({values:dH,defaultWidth:"wide",formattingValues:hH,defaultFormattingWidth:"wide"})};function Uf(i){return(e,t={})=>{const r=t.width,n=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],a=e.match(n);if(!a)return null;const c=a[0],s=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],h=Array.isArray(s)?gH(s,y=>y.test(c)):mH(s,y=>y.test(c));let f;f=i.valueCallback?i.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(c.length);return{value:f,rest:m}}}function mH(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function gH(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function yH(i){return(e,t={})=>{const r=e.match(i.matchPattern);if(!r)return null;const n=r[0],a=e.match(i.parsePattern);if(!a)return null;let c=i.valueCallback?i.valueCallback(a[0]):a[0];c=t.valueCallback?t.valueCallback(c):c;const s=e.slice(n.length);return{value:c,rest:s}}}const vH=/^(\d+)(th|st|nd|rd)?/i,xH=/\d+/i,bH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wH={any:[/^b/i,/^(a|c)/i]},_H={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},CH={any:[/1/i,/2/i,/3/i,/4/i]},TH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},EH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},MH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},IH={ordinalNumber:yH({matchPattern:vH,parsePattern:xH,valueCallback:i=>parseInt(i,10)}),era:Uf({matchPatterns:bH,defaultMatchWidth:"wide",parsePatterns:wH,defaultParseWidth:"any"}),quarter:Uf({matchPatterns:_H,defaultMatchWidth:"wide",parsePatterns:CH,defaultParseWidth:"any",valueCallback:i=>i+1}),month:Uf({matchPatterns:TH,defaultMatchWidth:"wide",parsePatterns:SH,defaultParseWidth:"any"}),day:Uf({matchPatterns:EH,defaultMatchWidth:"wide",parsePatterns:kH,defaultParseWidth:"any"}),dayPeriod:Uf({matchPatterns:MH,defaultMatchWidth:"any",parsePatterns:AH,defaultParseWidth:"any"})},a2={code:"en-US",formatDistance:eH,formatLong:nH,formatRelative:aH,localize:fH,match:IH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PH(i,e){const t=Pr(i,e==null?void 0:e.in);return UA(t,XV(t))+1}function o2(i,e){const t=Pr(i,e==null?void 0:e.in),r=+_c(t)-+NV(t);return Math.round(r/FA)+1}function l2(i,e){var m,y,g,b;const t=Pr(i,e==null?void 0:e.in),r=t.getFullYear(),n=Xd(),a=(e==null?void 0:e.firstWeekContainsDate)??((y=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(g=n.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,c=ts((e==null?void 0:e.in)||i,0);c.setFullYear(r+1,0,a),c.setHours(0,0,0,0);const s=Cu(c,e),h=ts((e==null?void 0:e.in)||i,0);h.setFullYear(r,0,a),h.setHours(0,0,0,0);const f=Cu(h,e);return+t>=+s?r+1:+t>=+f?r:r-1}function DH(i,e){var s,h,f,m;const t=Xd(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:h.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,n=l2(i,e),a=ts((e==null?void 0:e.in)||i,0);return a.setFullYear(n,0,r),a.setHours(0,0,0,0),Cu(a,e)}function GA(i,e){const t=Pr(i,e==null?void 0:e.in),r=+Cu(t,e)-+DH(t,e);return Math.round(r/FA)+1}function ln(i,e){const t=i<0?"-":"",r=Math.abs(i).toString().padStart(e,"0");return t+r}const Wc={y(i,e){const t=i.getFullYear(),r=t>0?t:1-t;return ln(e==="yy"?r%100:r,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):ln(t+1,2)},d(i,e){return ln(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return ln(i.getHours()%12||12,e.length)},H(i,e){return ln(i.getHours(),e.length)},m(i,e){return ln(i.getMinutes(),e.length)},s(i,e){return ln(i.getSeconds(),e.length)},S(i,e){const t=e.length,r=i.getMilliseconds(),n=Math.trunc(r*Math.pow(10,t-3));return ln(n,e.length)}},$h={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KS={G:function(i,e,t){const r=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const r=i.getFullYear(),n=r>0?r:1-r;return t.ordinalNumber(n,{unit:"year"})}return Wc.y(i,e)},Y:function(i,e,t,r){const n=l2(i,r),a=n>0?n:1-n;if(e==="YY"){const c=a%100;return ln(c,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):ln(a,e.length)},R:function(i,e){const t=$A(i);return ln(t,e.length)},u:function(i,e){const t=i.getFullYear();return ln(t,e.length)},Q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ln(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ln(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(i,e,t){const r=i.getMonth();switch(e){case"M":case"MM":return Wc.M(i,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(i,e,t){const r=i.getMonth();switch(e){case"L":return String(r+1);case"LL":return ln(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(i,e,t,r){const n=GA(i,r);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):ln(n,e.length)},I:function(i,e,t){const r=o2(i);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):ln(r,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Wc.d(i,e)},D:function(i,e,t){const r=PH(i);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):ln(r,e.length)},E:function(i,e,t){const r=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(i,e,t,r){const n=i.getDay(),a=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ln(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(i,e,t,r){const n=i.getDay(),a=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ln(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(i,e,t){const r=i.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return ln(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(i,e,t){const n=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(i,e,t){const r=i.getHours();let n;switch(r===12?n=$h.noon:r===0?n=$h.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(i,e,t){const r=i.getHours();let n;switch(r>=17?n=$h.evening:r>=12?n=$h.afternoon:r>=4?n=$h.morning:n=$h.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let r=i.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Wc.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Wc.H(i,e)},K:function(i,e,t){const r=i.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},k:function(i,e,t){let r=i.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Wc.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Wc.s(i,e)},S:function(i,e){return Wc.S(i,e)},X:function(i,e,t){const r=i.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return JS(r);case"XXXX":case"XX":return gd(r);case"XXXXX":case"XXX":default:return gd(r,":")}},x:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"x":return JS(r);case"xxxx":case"xx":return gd(r);case"xxxxx":case"xxx":default:return gd(r,":")}},O:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QS(r,":");case"OOOO":default:return"GMT"+gd(r,":")}},z:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QS(r,":");case"zzzz":default:return"GMT"+gd(r,":")}},t:function(i,e,t){const r=Math.trunc(+i/1e3);return ln(r,e.length)},T:function(i,e,t){return ln(+i,e.length)}};function QS(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=Math.trunc(r/60),a=r%60;return a===0?t+String(n):t+String(n)+e+ln(a,2)}function JS(i,e){return i%60===0?(i>0?"-":"+")+ln(Math.abs(i)/60,2):gd(i,e)}function gd(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=ln(Math.trunc(r/60),2),a=ln(r%60,2);return t+n+e+a}const eE=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},qA=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},RH=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],r=t[1],n=t[2];if(!n)return eE(i,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",eE(r,e)).replace("{{time}}",qA(n,e))},ow={p:qA,P:RH},LH=/^D+$/,NH=/^Y+$/,zH=["D","DD","YY","YYYY"];function WA(i){return LH.test(i)}function YA(i){return NH.test(i)}function lw(i,e,t){const r=jH(i,e,t);if(console.warn(r),zH.includes(i))throw new RangeError(r)}function jH(i,e,t){const r=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BH=/^'([^]*?)'?$/,$H=/''/g,UH=/[a-zA-Z]/;function Dd(i,e,t){var m,y,g,b;const r=Xd(),n=r.locale??a2,a=r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,c=r.weekStartsOn??((b=(g=r.locale)==null?void 0:g.options)==null?void 0:b.weekStartsOn)??0,s=Pr(i,t==null?void 0:t.in);if(!Fm(s))throw new RangeError("Invalid time value");let h=e.match(FH).map(v=>{const _=v[0];if(_==="p"||_==="P"){const T=ow[_];return T(v,n.formatLong)}return v}).join("").match(OH).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const _=v[0];if(_==="'")return{isToken:!1,value:VH(v)};if(KS[_])return{isToken:!0,value:v};if(_.match(UH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(h=n.localize.preprocessor(s,h));const f={firstWeekContainsDate:a,weekStartsOn:c,locale:n};return h.map(v=>{if(!v.isToken)return v.value;const _=v.value;(YA(_)||WA(_))&&lw(_,e,String(i));const T=KS[_[0]];return T(s,_,n.localize,f)}).join("")}function VH(i){const e=i.match(BH);return e?e[1].replace($H,"'"):i}const HH=["years","months","weeks","days","hours","minutes","seconds"];function GH(i,e){const t=Xd(),r=(e==null?void 0:e.locale)??t.locale??a2,n=(e==null?void 0:e.format)??HH,a=(e==null?void 0:e.zero)??!1,c=e==null?void 0:e.delimiter;return r.formatDistance?n.reduce((h,f)=>{const m=`x${f.replace(/(^.)/,g=>g.toUpperCase())}`,y=i[f];return y!==void 0&&(a||i[f])?h.concat(r.formatDistance(m,y)):h},[]).join(c):""}function qH(){return Object.assign({},Xd())}function WH(i,e){const t=Pr(i,e==null?void 0:e.in).getDay();return t===0?7:t}function YH(i,e){const{start:t,end:r}=YV(e==null?void 0:e.in,i),n={},a=WV(r,t);a&&(n.years=a);const c=Bf(t,{years:n.years}),s=GV(r,c);s&&(n.months=s);const h=Bf(c,{months:n.months}),f=BV(r,h);f&&(n.days=f);const m=Bf(h,{days:n.days}),y=$V(r,m);y&&(n.hours=y);const g=Bf(m,{hours:n.hours}),b=UV(r,g);b&&(n.minutes=b);const v=Bf(g,{minutes:n.minutes}),_=qV(r,v);return _&&(n.seconds=_),n}function c2(i,e){return+Pr(i)>+Pr(e)}function ZH(i,e){return+Pr(i)==+Pr(e)}function XH(i,e){const t=KH(e)?new e(0):ts(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function KH(i){var e;return typeof i=="function"&&((e=i.prototype)==null?void 0:e.constructor)===i}const QH=10;class ZA{constructor(){Ei(this,"subPriority",0)}validate(e,t){return!0}}class JH extends ZA{constructor(e,t,r,n,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class eG extends ZA{constructor(t,r){super();Ei(this,"priority",QH);Ei(this,"subPriority",-1);this.context=t||(n=>ts(r,n))}set(t,r){return r.timestampIsSet?t:ts(t,XH(t,this.context))}}class en{run(e,t,r,n){const a=this.parse(e,t,r,n);return a?{setter:new JH(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class tG extends en{constructor(){super(...arguments);Ei(this,"priority",140);Ei(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}const us={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Cl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ds(i,e){return i&&{value:e(i.value),rest:i.rest}}function Hn(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Tl(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:r*(n*Hv+a*Vv+c*RV),rest:e.slice(t[0].length)}}function XA(i){return Hn(us.anyDigitsSigned,i)}function is(i,e){switch(i){case 1:return Hn(us.singleDigit,e);case 2:return Hn(us.twoDigits,e);case 3:return Hn(us.threeDigits,e);case 4:return Hn(us.fourDigits,e);default:return Hn(new RegExp("^\\d{1,"+i+"}"),e)}}function O0(i,e){switch(i){case 1:return Hn(us.singleDigitSigned,e);case 2:return Hn(us.twoDigitsSigned,e);case 3:return Hn(us.threeDigitsSigned,e);case 4:return Hn(us.fourDigitsSigned,e);default:return Hn(new RegExp("^-?\\d{1,"+i+"}"),e)}}function u2(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function KA(i,e){const t=e>0,r=t?e:1-e;let n;if(r<=50)n=i||100;else{const a=r+50,c=Math.trunc(a/100)*100,s=i>=a%100;n=i+c-(s?100:0)}return t?n:1-n}function QA(i){return i%400===0||i%4===0&&i%100!==0}class iG extends en{constructor(){super(...arguments);Ei(this,"priority",130);Ei(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,n){const a=c=>({year:c,isTwoDigitYear:r==="yy"});switch(r){case"y":return ds(is(4,t),a);case"yo":return ds(n.ordinalNumber(t,{unit:"year"}),a);default:return ds(is(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const a=t.getFullYear();if(n.isTwoDigitYear){const s=KA(n.year,a);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}const c=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class rG extends en{constructor(){super(...arguments);Ei(this,"priority",130);Ei(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,n){const a=c=>({year:c,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ds(is(4,t),a);case"Yo":return ds(n.ordinalNumber(t,{unit:"year"}),a);default:return ds(is(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,a){const c=l2(t,a);if(n.isTwoDigitYear){const h=KA(n.year,c);return t.setFullYear(h,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Cu(t,a)}const s=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(s,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Cu(t,a)}}class nG extends en{constructor(){super(...arguments);Ei(this,"priority",130);Ei(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return O0(r==="R"?4:r.length,t)}set(t,r,n){const a=ts(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),_c(a)}}class sG extends en{constructor(){super(...arguments);Ei(this,"priority",130);Ei(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return O0(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}class aG extends en{constructor(){super(...arguments);Ei(this,"priority",120);Ei(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"Q":case"QQ":return is(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class oG extends en{constructor(){super(...arguments);Ei(this,"priority",120);Ei(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"q":case"qq":return is(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class lG extends en{constructor(){super(...arguments);Ei(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ei(this,"priority",110)}parse(t,r,n){const a=c=>c-1;switch(r){case"M":return ds(Hn(us.month,t),a);case"MM":return ds(is(2,t),a);case"Mo":return ds(n.ordinalNumber(t,{unit:"month"}),a);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class cG extends en{constructor(){super(...arguments);Ei(this,"priority",110);Ei(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,n){const a=c=>c-1;switch(r){case"L":return ds(Hn(us.month,t),a);case"LL":return ds(is(2,t),a);case"Lo":return ds(n.ordinalNumber(t,{unit:"month"}),a);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}function uG(i,e,t){const r=Pr(i,t==null?void 0:t.in),n=GA(r,t)-e;return r.setDate(r.getDate()-n*7),Pr(r,t==null?void 0:t.in)}class dG extends en{constructor(){super(...arguments);Ei(this,"priority",100);Ei(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,n){switch(r){case"w":return Hn(us.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return is(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,a){return Cu(uG(t,n,a),a)}}function hG(i,e,t){const r=Pr(i,t==null?void 0:t.in),n=o2(r,t)-e;return r.setDate(r.getDate()-n*7),r}class pG extends en{constructor(){super(...arguments);Ei(this,"priority",100);Ei(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,n){switch(r){case"I":return Hn(us.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return is(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return _c(hG(t,n))}}const fG=[31,28,31,30,31,30,31,31,30,31,30,31],mG=[31,29,31,30,31,30,31,31,30,31,30,31];class gG extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"subPriority",1);Ei(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"d":return Hn(us.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return is(r.length,t)}}validate(t,r){const n=t.getFullYear(),a=QA(n),c=t.getMonth();return a?r>=1&&r<=mG[c]:r>=1&&r<=fG[c]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}}class yG extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"subpriority",1);Ei(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,n){switch(r){case"D":case"DD":return Hn(us.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return is(r.length,t)}}validate(t,r){const n=t.getFullYear();return QA(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}}function d2(i,e,t){var y,g,b,v;const r=Xd(),n=(t==null?void 0:t.weekStartsOn)??((g=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(b=r.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,a=Pr(i,t==null?void 0:t.in),c=a.getDay(),h=(e%7+7)%7,f=7-n,m=e<0||e>6?e-(c+f)%7:(h+f)%7-(c+f)%7;return Gv(a,m,t)}class vG extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=d2(t,n,a),t.setHours(0,0,0,0),t}}class xG extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,n,a){const c=s=>{const h=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+h};switch(r){case"e":case"ee":return ds(is(r.length,t),c);case"eo":return ds(n.ordinalNumber(t,{unit:"day"}),c);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=d2(t,n,a),t.setHours(0,0,0,0),t}}class bG extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,n,a){const c=s=>{const h=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+h};switch(r){case"c":case"cc":return ds(is(r.length,t),c);case"co":return ds(n.ordinalNumber(t,{unit:"day"}),c);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=d2(t,n,a),t.setHours(0,0,0,0),t}}function wG(i,e,t){const r=Pr(i,t==null?void 0:t.in),n=WH(r,t),a=e-n;return Gv(r,a,t)}class _G extends en{constructor(){super(...arguments);Ei(this,"priority",90);Ei(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,n){const a=c=>c===0?7:c;switch(r){case"i":case"ii":return is(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return ds(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ds(n.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ds(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ds(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=wG(t,n),t.setHours(0,0,0,0),t}}class CG extends en{constructor(){super(...arguments);Ei(this,"priority",80);Ei(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(u2(n),0,0,0),t}}class TG extends en{constructor(){super(...arguments);Ei(this,"priority",80);Ei(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(u2(n),0,0,0),t}}class SG extends en{constructor(){super(...arguments);Ei(this,"priority",80);Ei(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(u2(n),0,0,0),t}}class EG extends en{constructor(){super(...arguments);Ei(this,"priority",70);Ei(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,n){switch(r){case"h":return Hn(us.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return is(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const a=t.getHours()>=12;return a&&n<12?t.setHours(n+12,0,0,0):!a&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}}class kG extends en{constructor(){super(...arguments);Ei(this,"priority",70);Ei(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,n){switch(r){case"H":return Hn(us.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return is(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}}class MG extends en{constructor(){super(...arguments);Ei(this,"priority",70);Ei(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,n){switch(r){case"K":return Hn(us.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return is(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}}class AG extends en{constructor(){super(...arguments);Ei(this,"priority",70);Ei(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,n){switch(r){case"k":return Hn(us.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return is(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const a=n<=24?n%24:n;return t.setHours(a,0,0,0),t}}class IG extends en{constructor(){super(...arguments);Ei(this,"priority",60);Ei(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"m":return Hn(us.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return is(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}}class PG extends en{constructor(){super(...arguments);Ei(this,"priority",50);Ei(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"s":return Hn(us.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return is(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}}class DG extends en{constructor(){super(...arguments);Ei(this,"priority",30);Ei(this,"incompatibleTokens",["t","T"])}parse(t,r){const n=a=>Math.trunc(a*Math.pow(10,-r.length+3));return ds(is(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}}class RG extends en{constructor(){super(...arguments);Ei(this,"priority",10);Ei(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Tl(Cl.basicOptionalMinutes,t);case"XX":return Tl(Cl.basic,t);case"XXXX":return Tl(Cl.basicOptionalSeconds,t);case"XXXXX":return Tl(Cl.extendedOptionalSeconds,t);case"XXX":default:return Tl(Cl.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ts(t,t.getTime()-j0(t)-n)}}class LG extends en{constructor(){super(...arguments);Ei(this,"priority",10);Ei(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Tl(Cl.basicOptionalMinutes,t);case"xx":return Tl(Cl.basic,t);case"xxxx":return Tl(Cl.basicOptionalSeconds,t);case"xxxxx":return Tl(Cl.extendedOptionalSeconds,t);case"xxx":default:return Tl(Cl.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ts(t,t.getTime()-j0(t)-n)}}class NG extends en{constructor(){super(...arguments);Ei(this,"priority",40);Ei(this,"incompatibleTokens","*")}parse(t){return XA(t)}set(t,r,n){return[ts(t,n*1e3),{timestampIsSet:!0}]}}class zG extends en{constructor(){super(...arguments);Ei(this,"priority",20);Ei(this,"incompatibleTokens","*")}parse(t){return XA(t)}set(t,r,n){return[ts(t,n),{timestampIsSet:!0}]}}const jG={G:new tG,y:new iG,Y:new rG,R:new nG,u:new sG,Q:new aG,q:new oG,M:new lG,L:new cG,w:new dG,I:new pG,d:new gG,D:new yG,E:new vG,e:new xG,c:new bG,i:new _G,a:new CG,b:new TG,B:new SG,h:new EG,H:new kG,K:new MG,k:new AG,m:new IG,s:new PG,S:new DG,X:new RG,x:new LG,t:new NG,T:new zG},OG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BG=/^'([^]*?)'?$/,$G=/''/g,UG=/\S/,VG=/[a-zA-Z]/;function F0(i,e,t,r){var T,k,w,E;const n=()=>ts(t,NaN),a=qH(),c=a.locale??a2,s=a.firstWeekContainsDate??((k=(T=a.locale)==null?void 0:T.options)==null?void 0:k.firstWeekContainsDate)??1,h=a.weekStartsOn??((E=(w=a.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)??0;if(!e)return i?n():Pr(t,r==null?void 0:r.in);const f={firstWeekContainsDate:s,weekStartsOn:h,locale:c},m=[new eG(r==null?void 0:r.in,t)],y=e.match(FG).map(A=>{const M=A[0];if(M in ow){const S=ow[M];return S(A,c.formatLong)}return A}).join("").match(OG),g=[];for(let A of y){YA(A)&&lw(A,e,i),WA(A)&&lw(A,e,i);const M=A[0],S=jG[M];if(S){const{incompatibleTokens:N}=S;if(Array.isArray(N)){const Z=g.find(K=>N.includes(K.token)||K.token===M);if(Z)throw new RangeError(`The format string mustn't contain \`${Z.fullToken}\` and \`${A}\` at the same time`)}else if(S.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${A}\` and any other token at the same time`);g.push({token:M,fullToken:A});const Y=S.run(i,A,c.match,f);if(!Y)return n();m.push(Y.setter),i=Y.rest}else{if(M.match(VG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(A==="''"?A="'":M==="'"&&(A=HG(A)),i.indexOf(A)===0)i=i.slice(A.length);else return n()}}if(i.length>0&&UG.test(i))return n();const b=m.map(A=>A.priority).sort((A,M)=>M-A).filter((A,M,S)=>S.indexOf(A)===M).map(A=>m.filter(M=>M.priority===A).sort((M,S)=>S.subPriority-M.subPriority)).map(A=>A[0]);let v=Pr(t,r==null?void 0:r.in);if(isNaN(+v))return n();const _={};for(const A of b){if(!A.validate(v,f))return n();const M=A.set(v,_,f);Array.isArray(M)?(v=M[0],Object.assign(_,M[1])):v=M}return v}function HG(i){return i.match(BG)[1].replace($G,"'")}function GG(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function qG(i,e,t){const[r,n]=Gl(t==null?void 0:t.in,i,e);return r.getFullYear()===n.getFullYear()}function tE(i,e){const t=()=>ts(e==null?void 0:e.in,NaN),n=XG(i);let a;if(n.date){const f=KG(n.date,2);a=QG(f.restDateString,f.year)}if(!a||isNaN(+a))return t();const c=+a;let s=0,h;if(n.time&&(s=JG(n.time),isNaN(s)))return t();if(n.timezone){if(h=eq(n.timezone),isNaN(h))return t()}else{const f=new Date(c+s),m=Pr(0,e==null?void 0:e.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return Pr(c+s+h,e==null?void 0:e.in)}const zy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},WG=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YG=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ZG=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XG(i){const e={},t=i.split(zy.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],zy.timeZoneDelimiter.test(e.date)&&(e.date=i.split(zy.timeZoneDelimiter)[0],r=i.substr(e.date.length,i.length))),r){const n=zy.timezone.exec(r);n?(e.time=r.replace(n[1],""),e.timezone=n[1]):e.time=r}return e}function KG(i,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=i.match(t);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?n:a*100,restDateString:i.slice((r[1]||r[2]).length)}}function QG(i,e){if(e===null)return new Date(NaN);const t=i.match(WG);if(!t)return new Date(NaN);const r=!!t[4],n=Vf(t[1]),a=Vf(t[2])-1,c=Vf(t[3]),s=Vf(t[4]),h=Vf(t[5])-1;if(r)return sq(e,s,h)?tq(e,s,h):new Date(NaN);{const f=new Date(0);return!rq(e,a,c)||!nq(e,n)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(n,c)),f)}}function Vf(i){return i?parseInt(i):1}function JG(i){const e=i.match(YG);if(!e)return NaN;const t=kb(e[1]),r=kb(e[2]),n=kb(e[3]);return aq(t,r,n)?t*Hv+r*Vv+n*1e3:NaN}function kb(i){return i&&parseFloat(i.replace(",","."))||0}function eq(i){if(i==="Z")return 0;const e=i.match(ZG);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return oq(r,n)?t*(r*Hv+n*Vv):NaN}function tq(i,e,t){const r=new Date(0);r.setUTCFullYear(i,0,4);const n=r.getUTCDay()||7,a=(e-1)*7+t+1-n;return r.setUTCDate(r.getUTCDate()+a),r}const iq=[31,null,31,30,31,30,31,31,30,31,30,31];function JA(i){return i%400===0||i%4===0&&i%100!==0}function rq(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(iq[e]||(JA(i)?29:28))}function nq(i,e){return e>=1&&e<=(JA(i)?366:365)}function sq(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function aq(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function oq(i,e){return e>=0&&e<=59}const h2=(i,e,t)=>t==="week"?lq(i,e):t==="month"?cq(i,e):(console.error("Invalid period type:",t),[]),lq=(i,e)=>{try{const t=F0(i,"RRRR-'W'II",new Date),r=F0(e,"RRRR-'W'II",new Date);if(!Fm(t)||!Fm(r))return console.error("Invalid date format provided for weeks:",{start:i,end:e}),[];if(r.getFullYear()-t.getFullYear()>100)return[];const a=[];let c=_c(t);const s=_c(r);for(;!c2(c,s);){const h=c.getFullYear(),f=o2(c),m=`${h}W${String(f).padStart(2,"0")}`,y=_c(c),g=QV(c);a.push({endDate:new Date(Dd(g,"yyyy-MM-dd")),startDate:new Date(Dd(y,"yyyy-MM-dd")),id:m}),c=zV(c,1)}return a}catch(t){return console.error("Error parsing week dates:",t),[]}},cq=(i,e)=>{try{const t=F0(i,"yyyy-MM",new Date),r=F0(e,"yyyy-MM",new Date);if(!Fm(t)||!Fm(r))return console.error("Invalid date format provided for months:",{start:i,end:e}),[];if(r.getFullYear()-t.getFullYear()>100)return[];const a=[];let c=t;for(;c2(r,c)||qG(c,r)&&GG(c,r);){const s=Dd(c,"yyyyMM"),h=ZV(c),f=HA(c);a.push({id:s,endDate:new Date(Dd(f,"yyyy-MM-dd")),startDate:new Date(Dd(h,"yyyy-MM-dd"))}),c=BA(c,1)}return a}catch(t){return console.error("Error parsing month dates:",t),[]}},eI=({setTimePeriods:i})=>{const[e,t]=Ae.useState(""),[r,n]=Ae.useState(""),[a,c]=Ae.useState(""),s=h=>{n(""),c(""),t(h)};return Ae.useEffect(()=>{i(h2(r,a,e))},[r,a]),z.jsxs("div",{children:[z.jsx("h3",{children:"Period"}),z.jsxs("div",{className:Ny.timePeriodeSelector,children:[z.jsx(_V,{value:e,onChange:s}),z.jsxs("div",{className:Ny.timePeriodeSelectorInputFields,children:[z.jsx("div",{className:Ny.timePeriodeSelectorInputFieldsChild,children:z.jsx(WS,{periodeType:e,label:"Dateset start:",name:"",onChange:n})}),z.jsx("div",{className:Ny.timePeriodeSelectorInputFieldsChild,children:z.jsx(WS,{periodeType:e,label:"Dateset end:",name:"",onChange:c})})]})]})]})},uq="_error_1rljs_1",dq={error:uq},hq={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},pq=()=>{var r;const{loading:i,error:e,data:t}=qa(hq);return{roots:(r=t==null?void 0:t.roots)==null?void 0:r.organisationUnits,error:e,loading:i}},fq=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:r}=pq();return Ae.useEffect(()=>{if(t&&!i){const[n]=t;e({...n,selected:[n.path]})}},[t]),t?z.jsxs("div",{children:[z.jsx("h3",{children:be.t("Organisation units")}),z.jsx(F_,{roots:t.map(n=>n.id),selected:i==null?void 0:i.map(n=>n.path),onChange:e,initiallyExpanded:t.map(n=>n.path)})]}):r?z.jsx("div",{children:r.message}):null},mq={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},gq=()=>{var r;const{loading:i,error:e,data:t}=qa(mq);return{levels:(r=t==null?void 0:t.levels)==null?void 0:r.organisationUnitLevels,error:e,loading:i}},yq="_selectField_2clxr_1",vq={selectField:yq},xq=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:r,error:n}=gq(),a=c=>{const s={id:c.selected,level:t.find(h=>h.id===c.selected).level};e(s)};return Ae.useEffect(()=>{var c;(t==null?void 0:t.length)>2&&!i&&e({id:(c=t[1])==null?void 0:c.id,level:t[1].level})},[t,i,e]),t?z.jsx("div",{className:vq.selectField,children:z.jsx(ls,{label:be.t("Organisation unit level"),helpText:be.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:r,error:!!n,onChange:a,children:t.map(c=>z.jsx(Cs,{value:c.id,label:c.name},c.id))})}):null},tI=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:r})=>{const n=c=>{c.checked?i([...e,c]):i(e.filter(s=>s.path!==c.path))};function a(){if(e.length===0)return!0;const c=e[0].path.split("/").length;return e.every(s=>s.path.split("/").length===c)}return z.jsxs(z.Fragment,{children:[z.jsx(fq,{selectedOrgUnits:e,onChange:c=>{n(c)}}),!a()&&z.jsx("p",{className:dq.error,children:"Only select organization units that are one the same level."}),z.jsx(xq,{orgUnitLevels:t,onChange:r})]})},bq=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),wq=(i,e,t)=>{var s,h,f;const r=i.map(m=>m.dataSource);if(r.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:n,error:a,data:c}=qa(bq({dataElements:r,periodes:e,orgUnit:t}));return!n&&c&&!a?{data:(s=c==null?void 0:c.request)==null?void 0:s.rows,metaData:(f=(h=c==null?void 0:c.request)==null?void 0:h.metaData)==null?void 0:f.items,error:a,loading:n}:{data:c,metaData:{},error:a,loading:n}},_q={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},Cq=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:r,properties:n})=>({type:e,id:t,properties:n,geometry:r})),...i}),Tq=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(r=>r.id===t.id||t.properties.parentGraph.includes(r.id)))}),Sq=(i,e)=>{const{data:t,loading:r,error:n}=qa(_q,{variables:{level:i}});return{data:t&&Tq(Cq(t),e),error:n,loading:r}},Eq="_text_b9rbg_1",kq={text:Eq},Mq=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:r,setAnalyticsMetaData:n,setStartDownload:a,orgUnitLevel:c,selectedOrgUnits:s,analyticsDataLayers:h,setErrorMessages:f})=>{if(c==null)return z.jsx(z.Fragment,{});const m="LEVEL-"+c.id+";"+s.map(M=>M.id).join(";"),y=M=>M.map(S=>S.id),{data:g,error:b,loading:v,metaData:_}=wq(h,y(i),m),{data:T,error:k,loading:w}=Sq(c.level,s),E=M=>M.map(S=>({featureName:h.filter(N=>N.dataSource===S)[0].feature,dataItemId:S})),A=M=>{const S=[...new Set(M.map(Y=>Y[0]))],N=E(S);return r(N),M.map(Y=>({featureName:N.filter(Z=>Z.dataItemId===Y[0])[0].featureName,orgUnit:Y[1],period:Y[2],value:parseFloat(Y[3])}))};return Ae.useEffect(()=>{if(!(v||w)&&(g&&T&&(f([]),e(T),t(A(g)),n(_)),b||k)){const M=[];b&&M.push({description:JSON.stringify(b),title:"Analytics request failed"}),k&&M.push({description:JSON.stringify(k),title:"OrgUnits request failed"}),f(M),a(S=>({...S,startDownload:!1}))}},[v,w]),z.jsx("p",{className:kq.text,children:"Downloading data.."})};var iI={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:wn,function(e){var t={};function r(n,a,c,s){!n.hasOwnProperty(a)&&(n[a]=s.apply(null,c),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}return r(t,"Core/Globals.js",[],function(){var n,a;return(a=n||(n={})).SVG_NS="http://www.w3.org/2000/svg",a.product="Highcharts",a.version="11.4.8",a.win=e!==void 0?e:{},a.doc=a.win.document,a.svg=a.doc&&a.doc.createElementNS&&!!a.doc.createElementNS(a.SVG_NS,"svg").createSVGRect,a.userAgent=a.win.navigator&&a.win.navigator.userAgent||"",a.isChrome=a.win.chrome,a.isFirefox=a.userAgent.indexOf("Firefox")!==-1,a.isMS=/(edge|msie|trident)/i.test(a.userAgent)&&!a.win.opera,a.isSafari=!a.isChrome&&a.userAgent.indexOf("Safari")!==-1,a.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(a.userAgent),a.isWebKit=a.userAgent.indexOf("AppleWebKit")!==-1,a.deg2rad=2*Math.PI/360,a.hasBidiBug=a.isFirefox&&4>parseInt(a.userAgent.split("Firefox/")[1],10),a.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],a.noop=function(){},a.supportsPassiveEvents=function(){let c=!1;if(!a.isMS){let s=Object.defineProperty({},"passive",{get:function(){c=!0}});a.win.addEventListener&&a.win.removeEventListener&&(a.win.addEventListener("testPassive",a.noop,s),a.win.removeEventListener("testPassive",a.noop,s))}return c}(),a.charts=[],a.composed=[],a.dateFormats={},a.seriesTypes={},a.symbolSizes={},a.chartCount=0,n}),r(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(n){let a,{charts:c,doc:s,win:h}=n;function f(R,L,G,V){let $=L?"Highcharts error":"Highcharts warning";R===32&&(R=`${$}: Deprecated member`);let q=T(R),W=q?`${$} #${R}: www.highcharts.com/errors/${R}/`:R.toString();if(V!==void 0){let se="";q&&(W+="?"),K(V,function(fe,re){se+=`
 - ${re}: ${fe}`,q&&(W+=encodeURI(re)+"="+encodeURI(fe))}),W+=se}F(n,"displayError",{chart:G,code:R,message:W,params:V},function(){if(L)throw Error(W);h.console&&f.messages.indexOf(W)===-1&&console.warn(W)}),f.messages.push(W)}function m(R,L){return parseInt(R,L||10)}function y(R){return typeof R=="string"}function g(R){let L=Object.prototype.toString.call(R);return L==="[object Array]"||L==="[object Array Iterator]"}function b(R,L){return!!R&&typeof R=="object"&&(!L||!g(R))}function v(R){return b(R)&&typeof R.nodeType=="number"}function _(R){let L=R&&R.constructor;return!!(b(R,!0)&&!v(R)&&L&&L.name&&L.name!=="Object")}function T(R){return typeof R=="number"&&!isNaN(R)&&R<1/0&&R>-1/0}function k(R){return R!=null}function w(R,L,G){let V,$=y(L)&&!k(G),q=(W,se)=>{k(W)?R.setAttribute(se,W):$?(V=R.getAttribute(se))||se!=="class"||(V=R.getAttribute(se+"Name")):R.removeAttribute(se)};return y(L)?q(G,L):K(L,q),V}function E(R){return g(R)?R:[R]}function A(R,L){let G;for(G in R||(R={}),L)R[G]=L[G];return R}function M(){let R=arguments,L=R.length;for(let G=0;G<L;G++){let V=R[G];if(V!=null)return V}}function S(R,L){A(R.style,L)}function N(R){return Math.pow(10,Math.floor(Math.log(R)/Math.LN10))}function Y(R,L){return R>1e14?R:parseFloat(R.toPrecision(L||14))}(f||(f={})).messages=[],Math.easeInOutSine=function(R){return-.5*(Math.cos(Math.PI*R)-1)};let Z=Array.prototype.find?function(R,L){return R.find(L)}:function(R,L){let G,V=R.length;for(G=0;G<V;G++)if(L(R[G],G))return R[G]};function K(R,L,G){for(let V in R)Object.hasOwnProperty.call(R,V)&&L.call(G||R[V],R[V],V,R)}function B(R,L,G){function V(W,se){let fe=R.removeEventListener;fe&&fe.call(R,W,se,!1)}function $(W){let se,fe;R.nodeName&&(L?(se={})[L]=!0:se=W,K(se,function(re,le){if(W[le])for(fe=W[le].length;fe--;)V(le,W[le][fe].fn)}))}let q=typeof R=="function"&&R.prototype||R;if(Object.hasOwnProperty.call(q,"hcEvents")){let W=q.hcEvents;if(L){let se=W[L]||[];G?(W[L]=se.filter(function(fe){return G!==fe.fn}),V(L,G)):($(W),W[L]=[])}else $(W),delete q.hcEvents}}function F(R,L,G,V){if(G=G||{},s.createEvent&&(R.dispatchEvent||R.fireEvent&&R!==n)){let $=s.createEvent("Events");$.initEvent(L,!0,!0),G=A($,G),R.dispatchEvent?R.dispatchEvent(G):R.fireEvent(L,G)}else if(R.hcEvents){G.target||A(G,{preventDefault:function(){G.defaultPrevented=!0},target:R,type:L});let $=[],q=R,W=!1;for(;q.hcEvents;)Object.hasOwnProperty.call(q,"hcEvents")&&q.hcEvents[L]&&($.length&&(W=!0),$.unshift.apply($,q.hcEvents[L])),q=Object.getPrototypeOf(q);W&&$.sort((se,fe)=>se.order-fe.order),$.forEach(se=>{se.fn.call(R,G)===!1&&G.preventDefault()})}V&&!G.defaultPrevented&&V.call(R,G)}K({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(R,L){n[L]=function(G){return f(32,!1,void 0,{[`Highcharts.${L}`]:`use Array.${R}`}),Array.prototype[R].apply(G,[].slice.call(arguments,1))}});let O=function(){let R=Math.random().toString(36).substring(2,9)+"-",L=0;return function(){return"highcharts-"+(a?"":R)+L++}}();return h.jQuery&&(h.jQuery.fn.highcharts=function(){let R=[].slice.call(arguments);if(this[0])return R[0]?(new n[y(R[0])?R.shift():"Chart"](this[0],R[0],R[1]),this):c[w(this[0],"data-highcharts-chart")]}),{addEvent:function(R,L,G,V={}){let $=typeof R=="function"&&R.prototype||R;Object.hasOwnProperty.call($,"hcEvents")||($.hcEvents={});let q=$.hcEvents;n.Point&&R instanceof n.Point&&R.series&&R.series.chart&&(R.series.chart.runTrackerClick=!0);let W=R.addEventListener;W&&W.call(R,L,G,!!n.supportsPassiveEvents&&{passive:V.passive===void 0?L.indexOf("touch")!==-1:V.passive,capture:!1}),q[L]||(q[L]=[]);let se={fn:G,order:typeof V.order=="number"?V.order:1/0};return q[L].push(se),q[L].sort((fe,re)=>fe.order-re.order),function(){B(R,L,G)}},arrayMax:function(R){let L=R.length,G=R[0];for(;L--;)R[L]>G&&(G=R[L]);return G},arrayMin:function(R){let L=R.length,G=R[0];for(;L--;)R[L]<G&&(G=R[L]);return G},attr:w,clamp:function(R,L,G){return R>L?R<G?R:G:L},clearTimeout:function(R){k(R)&&clearTimeout(R)},correctFloat:Y,createElement:function(R,L,G,V,$){let q=s.createElement(R);return L&&A(q,L),$&&S(q,{padding:"0",border:"none",margin:"0"}),G&&S(q,G),V&&V.appendChild(q),q},crisp:(R,L=0,G)=>{let V=L%2/2,$=G?-1:1;return(Math.round(R*$-V)+V)*$},css:S,defined:k,destroyObjectProperties:function(R,L,G){K(R,function(V,$){V!==L&&(V!=null&&V.destroy)&&V.destroy(),(V!=null&&V.destroy||!G)&&delete R[$]})},diffObjects:function(R,L,G,V){let $={};return function q(W,se,fe,re){let le=G?se:W;K(W,function(Se,ye){if(!re&&V&&V.indexOf(ye)>-1&&se[ye]){Se=E(Se),fe[ye]=[];for(let Ee=0;Ee<Math.max(Se.length,se[ye].length);Ee++)se[ye][Ee]&&(Se[Ee]===void 0?fe[ye][Ee]=se[ye][Ee]:(fe[ye][Ee]={},q(Se[Ee],se[ye][Ee],fe[ye][Ee],re+1)))}else b(Se,!0)&&!Se.nodeType?(fe[ye]=g(Se)?[]:{},q(Se,se[ye]||{},fe[ye],re+1),Object.keys(fe[ye]).length!==0||ye==="colorAxis"&&re===0||delete fe[ye]):(W[ye]!==se[ye]||ye in W&&!(ye in se))&&ye!=="__proto__"&&ye!=="constructor"&&(fe[ye]=le[ye])})}(R,L,$,0),$},discardElement:function(R){R&&R.parentElement&&R.parentElement.removeChild(R)},erase:function(R,L){let G=R.length;for(;G--;)if(R[G]===L){R.splice(G,1);break}},error:f,extend:A,extendClass:function(R,L){let G=function(){};return G.prototype=new R,A(G.prototype,L),G},find:Z,fireEvent:F,getClosestDistance:function(R,L){let G,V,$,q=!L;return R.forEach(W=>{if(W.length>1)for($=W.length-1;$>0;$--)(V=W[$]-W[$-1])<0&&!q?(L==null||L(),L=void 0):V&&(G===void 0||V<G)&&(G=V)}),G},getMagnitude:N,getNestedProperty:function(R,L){let G=R.split(".");for(;G.length&&k(L);){let V=G.shift();if(V===void 0||V==="__proto__")return;if(V==="this"){let q;return b(L)&&(q=L["@this"]),q??L}let $=L[V];if(!k($)||typeof $=="function"||typeof $.nodeType=="number"||$===h)return;L=$}return L},getStyle:function R(L,G,V){let $;if(G==="width"){let W=Math.min(L.offsetWidth,L.scrollWidth),se=L.getBoundingClientRect&&L.getBoundingClientRect().width;return se<W&&se>=W-1&&(W=Math.floor(se)),Math.max(0,W-(R(L,"padding-left",!0)||0)-(R(L,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(L.offsetHeight,L.scrollHeight)-(R(L,"padding-top",!0)||0)-(R(L,"padding-bottom",!0)||0));let q=h.getComputedStyle(L,void 0);return q&&($=q.getPropertyValue(G),M(V,G!=="opacity")&&($=m($))),$},inArray:function(R,L,G){return f(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),L.indexOf(R,G)},insertItem:function(R,L){let G,V=R.options.index,$=L.length;for(G=R.options.isInternal?$:0;G<$+1;G++)if(!L[G]||T(V)&&V<M(L[G].options.index,L[G]._i)||L[G].options.isInternal){L.splice(G,0,R);break}return G},isArray:g,isClass:_,isDOMElement:v,isFunction:function(R){return typeof R=="function"},isNumber:T,isObject:b,isString:y,keys:function(R){return f(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(R)},merge:function(){let R,L=arguments,G={},V=function(q,W){return typeof q!="object"&&(q={}),K(W,function(se,fe){fe!=="__proto__"&&fe!=="constructor"&&(!b(se,!0)||_(se)||v(se)?q[fe]=W[fe]:q[fe]=V(q[fe]||{},se))}),q};L[0]===!0&&(G=L[1],L=Array.prototype.slice.call(L,2));let $=L.length;for(R=0;R<$;R++)G=V(G,L[R]);return G},normalizeTickInterval:function(R,L,G,V,$){let q,W=R;G=M(G,N(R));let se=R/G;for(!L&&(L=$?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],V===!1&&(G===1?L=L.filter(function(fe){return fe%1==0}):G<=.1&&(L=[1/G]))),q=0;q<L.length&&(W=L[q],(!$||!(W*G>=R))&&($||!(se<=(L[q]+(L[q+1]||L[q]))/2)));q++);return Y(W*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:K,offset:function(R){let L=s.documentElement,G=R.parentElement||R.parentNode?R.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(h.pageYOffset||L.scrollTop)-(L.clientTop||0),left:G.left+(h.pageXOffset||L.scrollLeft)-(L.clientLeft||0),width:G.width,height:G.height}},pad:function(R,L,G){return Array((L||2)+1-String(R).replace("-","").length).join(G||"0")+R},pick:M,pInt:m,pushUnique:function(R,L){return 0>R.indexOf(L)&&!!R.push(L)},relativeLength:function(R,L,G){return/%$/.test(R)?L*parseFloat(R)/100+(G||0):parseFloat(R)},removeEvent:B,replaceNested:function(R,...L){let G,V;do for(V of(G=R,L))R=R.replace(V[0],V[1]);while(R!==G);return R},splat:E,stableSort:function(R,L){let G,V,$=R.length;for(V=0;V<$;V++)R[V].safeI=V;for(R.sort(function(q,W){return(G=L(q,W))===0?q.safeI-W.safeI:G}),V=0;V<$;V++)delete R[V].safeI},syncTimeout:function(R,L,G){return L>0?setTimeout(R,L,G):(R.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:O,useSerialIds:function(R){return a=M(R,a)},wrap:function(R,L,G){let V=R[L];R[L]=function(){let $=arguments,q=this;return G.apply(this,[function(){return V.apply(q,arguments.length?arguments:$)}].concat([].slice.call(arguments)))}}}}),r(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),r(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),r(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{win:c}=n,{defined:s,error:h,extend:f,isNumber:m,isObject:y,merge:g,objectEach:b,pad:v,pick:_,splat:T,timeUnits:k}=a,w=n.isSafari&&c.Intl&&c.Intl.DateTimeFormat.prototype.formatRange,E=n.isSafari&&c.Intl&&!c.Intl.DateTimeFormat.prototype.formatRange;class A{constructor(S){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=c.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(S)}get(S,N){if(this.variableTimezone||this.timezoneOffset){let Y=N.getTime(),Z=Y-this.getTimezoneOffset(N);N.setTime(Z);let K=N["getUTC"+S]();return N.setTime(Y),K}return this.useUTC?N["getUTC"+S]():N["get"+S]()}set(S,N,Y){if(this.variableTimezone||this.timezoneOffset){if(S==="Milliseconds"||S==="Seconds"||S==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+S](Y);let Z=this.getTimezoneOffset(N),K=N.getTime()-Z;N.setTime(K),N["setUTC"+S](Y);let B=this.getTimezoneOffset(N);return K=N.getTime()+B,N.setTime(K)}return this.useUTC||w&&S==="FullYear"?N["setUTC"+S](Y):N["set"+S](Y)}update(S={}){let N=_(S.useUTC,!0);this.options=S=g(!0,this.options,S),this.Date=S.Date||c.Date||Date,this.useUTC=N,this.timezoneOffset=N&&S.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(S.getTimezoneOffset||S.timezone)}makeTime(S,N,Y,Z,K,B){let F,O,R;return this.useUTC?(F=this.Date.UTC.apply(0,arguments),O=this.getTimezoneOffset(F),F+=O,O!==(R=this.getTimezoneOffset(F))?F+=R-O:O-36e5!==this.getTimezoneOffset(F-36e5)||E||(F-=36e5)):F=new this.Date(S,N,_(Y,1),_(Z,0),_(K,0),_(B,0)).getTime(),F}timezoneOffsetFunction(){let S=this,N=this.options,Y=N.getTimezoneOffset;return this.useUTC?N.timezone?Z=>{try{let K=`shortOffset,${N.timezone||""}`,[B,F,O,R,L=0]=(A.formatCache[K]=A.formatCache[K]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Z).split(/(GMT|:)/).map(Number),G=-(36e5*(O+L/60));if(m(G))return G}catch{h(34)}return 0}:this.useUTC&&Y?Z=>6e4*Y(Z.valueOf()):()=>6e4*(S.timezoneOffset||0):Z=>6e4*new Date(Z.toString()).getTimezoneOffset()}dateFormat(S,N,Y){if(!s(N)||isNaN(N))return n.defaultOptions.lang&&n.defaultOptions.lang.invalidDate||"";S=_(S,"%Y-%m-%d %H:%M:%S");let Z=this,K=new this.Date(N),B=this.get("Hours",K),F=this.get("Day",K),O=this.get("Date",K),R=this.get("Month",K),L=this.get("FullYear",K),G=n.defaultOptions.lang,V=G&&G.weekdays,$=G&&G.shortWeekdays;return b(f({a:$?$[F]:V[F].substr(0,3),A:V[F],d:v(O),e:v(O,2," "),w:F,b:G.shortMonths[R],B:G.months[R],m:v(R+1),o:R+1,y:L.toString().substr(2,2),Y:L,H:v(B),k:B,I:v(B%12||12),l:B%12||12,M:v(this.get("Minutes",K)),p:B<12?"AM":"PM",P:B<12?"am":"pm",S:v(this.get("Seconds",K)),L:v(Math.floor(N%1e3),3)},n.dateFormats),function(q,W){for(;S.indexOf("%"+W)!==-1;)S=S.replace("%"+W,typeof q=="function"?q.call(Z,N):q)}),Y?S.substr(0,1).toUpperCase()+S.substr(1):S}resolveDTLFormat(S){return y(S,!0)?S:{main:(S=T(S))[0],from:S[1],to:S[2]}}getTimeTicks(S,N,Y,Z){let K,B,F,O,R=this,L=R.Date,G=[],V={},$=new L(N),q=S.unitRange,W=S.count||1;if(Z=_(Z,1),s(N)){R.set("Milliseconds",$,q>=k.second?0:W*Math.floor(R.get("Milliseconds",$)/W)),q>=k.second&&R.set("Seconds",$,q>=k.minute?0:W*Math.floor(R.get("Seconds",$)/W)),q>=k.minute&&R.set("Minutes",$,q>=k.hour?0:W*Math.floor(R.get("Minutes",$)/W)),q>=k.hour&&R.set("Hours",$,q>=k.day?0:W*Math.floor(R.get("Hours",$)/W)),q>=k.day&&R.set("Date",$,q>=k.month?1:Math.max(1,W*Math.floor(R.get("Date",$)/W))),q>=k.month&&(R.set("Month",$,q>=k.year?0:W*Math.floor(R.get("Month",$)/W)),B=R.get("FullYear",$)),q>=k.year&&(B-=B%W,R.set("FullYear",$,B)),q===k.week&&(O=R.get("Day",$),R.set("Date",$,R.get("Date",$)-O+Z+(O<Z?-7:0))),B=R.get("FullYear",$);let se=R.get("Month",$),fe=R.get("Date",$),re=R.get("Hours",$);N=$.getTime(),(R.variableTimezone||!R.useUTC)&&s(Y)&&(F=Y-N>4*k.month||R.getTimezoneOffset(N)!==R.getTimezoneOffset(Y));let le=$.getTime();for(K=1;le<Y;)G.push(le),q===k.year?le=R.makeTime(B+K*W,0):q===k.month?le=R.makeTime(B,se+K*W):F&&(q===k.day||q===k.week)?le=R.makeTime(B,se,fe+K*W*(q===k.day?1:7)):F&&q===k.hour&&W>1?le=R.makeTime(B,se,fe,re+K*W):le+=q*W,K++;G.push(le),q<=k.hour&&G.length<1e4&&G.forEach(function(Se){Se%18e5==0&&R.dateFormat("%H%M%S%L",Se)==="000000000"&&(V[Se]="day")})}return G.info=f(S,{higherRanks:V,totalRange:q*W}),G}getDateFormat(S,N,Y,Z){let K=this.dateFormat("%m-%d %H:%M:%S.%L",N),B="01-01 00:00:00.000",F={millisecond:15,second:12,minute:9,hour:6,day:3},O="millisecond",R=O;for(O in k){if(S===k.week&&+this.dateFormat("%w",N)===Y&&K.substr(6)===B.substr(6)){O="week";break}if(k[O]>S){O=R;break}if(F[O]&&K.substr(F[O])!==B.substr(F[O]))break;O!=="week"&&(R=O)}return this.resolveDTLFormat(Z[O]).main}}return A.formatCache={},A}),r(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{isTouchDevice:f}=a,{fireEvent:m,merge:y}=h,g={colors:c.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:n,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:v=>Math.sqrt(1-Math.pow(v-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:f?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};g.chart.styledMode=!1;let b=new s(g.time);return{defaultOptions:g,defaultTime:b,getOptions:function(){return g},setOptions:function(v){return m(a,"setOptions",{options:v}),y(!0,g,v),(v.time||v.global)&&(a.time?a.time.update(y(g.global,g.time,v.global,v.time)):a.time=b),g}}}),r(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{isNumber:c,merge:s,pInt:h}=a;class f{static parse(y){return y?new f(y):f.None}constructor(y){let g,b,v,_;this.rgba=[NaN,NaN,NaN,NaN],this.input=y;let T=n.Color;if(T&&T!==f)return new T(y);if(typeof y=="object"&&y.stops!==void 0)this.stops=y.stops.map(k=>new f(k[1]));else if(typeof y=="string"){if(this.input=y=f.names[y.toLowerCase()]||y,y.charAt(0)==="#"){let k=y.length,w=parseInt(y.substr(1),16);k===7?b=[(16711680&w)>>16,(65280&w)>>8,255&w,1]:k===4&&(b=[(3840&w)>>4|(3840&w)>>8,(240&w)>>4|240&w,(15&w)<<4|15&w,1])}if(!b)for(v=f.parsers.length;v--&&!b;)(g=(_=f.parsers[v]).regex.exec(y))&&(b=_.parse(g))}b&&(this.rgba=b)}get(y){let g=this.input,b=this.rgba;if(typeof g=="object"&&this.stops!==void 0){let v=s(g);return v.stops=[].slice.call(v.stops),this.stops.forEach((_,T)=>{v.stops[T]=[v.stops[T][0],_.get(y)]}),v}return b&&c(b[0])?y!=="rgb"&&(y||b[3]!==1)?y==="a"?`${b[3]}`:"rgba("+b.join(",")+")":"rgb("+b[0]+","+b[1]+","+b[2]+")":g}brighten(y){let g=this.rgba;if(this.stops)this.stops.forEach(function(b){b.brighten(y)});else if(c(y)&&y!==0)for(let b=0;b<3;b++)g[b]+=h(255*y),g[b]<0&&(g[b]=0),g[b]>255&&(g[b]=255);return this}setOpacity(y){return this.rgba[3]=y,this}tweenTo(y,g){let b=this.rgba,v=y.rgba;if(!c(b[0])||!c(v[0]))return y.input||"none";let _=v[3]!==1||b[3]!==1;return(_?"rgba(":"rgb(")+Math.round(v[0]+(b[0]-v[0])*(1-g))+","+Math.round(v[1]+(b[1]-v[1])*(1-g))+","+Math.round(v[2]+(b[2]-v[2])*(1-g))+(_?","+(v[3]+(b[3]-v[3])*(1-g)):"")+")"}}return f.names={white:"#ffffff",black:"#000000"},f.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(m){return[h(m[1]),h(m[2]),h(m[3]),parseFloat(m[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(m){return[h(m[1]),h(m[2]),h(m[3]),1]}}],f.None=new f(""),f}),r(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{parse:s}=n,{win:h}=a,{isNumber:f,objectEach:m}=c;class y{constructor(b,v,_){this.pos=NaN,this.options=v,this.elem=b,this.prop=_}dSetter(){let b=this.paths,v=b&&b[0],_=b&&b[1],T=this.now||0,k=[];if(T!==1&&v&&_)if(v.length===_.length&&T<1)for(let w=0;w<_.length;w++){let E=v[w],A=_[w],M=[];for(let S=0;S<A.length;S++){let N=E[S],Y=A[S];f(N)&&f(Y)&&!(A[0]==="A"&&(S===4||S===5))?M[S]=N+T*(Y-N):M[S]=Y}k.push(M)}else k=_;else k=this.toD||[];this.elem.attr("d",k,void 0,!0)}update(){let b=this.elem,v=this.prop,_=this.now,T=this.options.step;this[v+"Setter"]?this[v+"Setter"]():b.attr?b.element&&b.attr(v,_,null,!0):b.style[v]=_+this.unit,T&&T.call(b,_,this)}run(b,v,_){let T=this,k=T.options,w=function(M){return!w.stopped&&T.step(M)},E=h.requestAnimationFrame||function(M){setTimeout(M,13)},A=function(){for(let M=0;M<y.timers.length;M++)y.timers[M]()||y.timers.splice(M--,1);y.timers.length&&E(A)};b!==v||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=b,this.end=v,this.unit=_,this.now=this.start,this.pos=0,w.elem=this.elem,w.prop=this.prop,w()&&y.timers.push(w)===1&&E(A)):(delete k.curAnim[this.prop],k.complete&&Object.keys(k.curAnim).length===0&&k.complete.call(this.elem))}step(b){let v,_,T=+new Date,k=this.options,w=this.elem,E=k.complete,A=k.duration,M=k.curAnim;return w.attr&&!w.element?v=!1:b||T>=A+this.startTime?(this.now=this.end,this.pos=1,this.update(),M[this.prop]=!0,_=!0,m(M,function(S){S!==!0&&(_=!1)}),_&&E&&E.call(w),v=!1):(this.pos=k.easing((T-this.startTime)/A),this.now=this.start+(this.end-this.start)*this.pos,this.update(),v=!0),v}initPath(b,v,_){let T=b.startX,k=b.endX,w=_.slice(),E=b.isArea,A=E?2:1,M=v&&_.length>v.length&&_.hasStackedCliffs,S,N,Y,Z,K=v&&v.slice();if(!K||M)return[w,w];function B(O,R){for(;O.length<N;){let L=O[0],G=R[N-O.length];if(G&&L[0]==="M"&&(G[0]==="C"?O[0]=["C",L[1],L[2],L[1],L[2],L[1],L[2]]:O[0]=["L",L[1],L[2]]),O.unshift(L),E){let V=O.pop();O.push(O[O.length-1],V)}}}function F(O){for(;O.length<N;){let R=O[Math.floor(O.length/A)-1].slice();if(R[0]==="C"&&(R[1]=R[5],R[2]=R[6]),E){let L=O[Math.floor(O.length/A)].slice();O.splice(O.length/2,0,R,L)}else O.push(R)}}if(T&&k&&k.length){for(Y=0;Y<T.length;Y++){if(T[Y]===k[0]){S=Y;break}if(T[0]===k[k.length-T.length+Y]){S=Y,Z=!0;break}if(T[T.length-1]===k[k.length-T.length+Y]){S=T.length-Y;break}}S===void 0&&(K=[])}return K.length&&f(S)&&(N=w.length+S*A,Z?(B(K,w),F(w)):(B(w,K),F(K))),[K,w]}fillSetter(){y.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,s(this.start).tweenTo(s(this.end),this.pos),void 0,!0)}}return y.timers=[],y}),r(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(n,a){let{defined:c,getStyle:s,isArray:h,isNumber:f,isObject:m,merge:y,objectEach:g,pick:b}=a;function v(T){return m(T)?y({duration:500,defer:0},T):{duration:T?500:0,defer:0}}function _(T,k){let w=n.timers.length;for(;w--;)n.timers[w].elem!==T||k&&k!==n.timers[w].prop||(n.timers[w].stopped=!0)}return{animate:function(T,k,w){let E,A="",M,S,N;m(w)||(N=arguments,w={duration:N[2],easing:N[3],complete:N[4]}),f(w.duration)||(w.duration=400),w.easing=typeof w.easing=="function"?w.easing:Math[w.easing]||Math.easeInOutSine,w.curAnim=y(k),g(k,function(Y,Z){_(T,Z),S=new n(T,w,Z),M=void 0,Z==="d"&&h(k.d)?(S.paths=S.initPath(T,T.pathArray,k.d),S.toD=k.d,E=0,M=1):T.attr?E=T.attr(Z):(E=parseFloat(s(T,Z))||0,Z!=="opacity"&&(A="px")),M||(M=Y),typeof M=="string"&&M.match("px")&&(M=M.replace(/px/g,"")),S.run(E,M,A)})},animObject:v,getDeferredAnimation:function(T,k,w){let E=v(k),A=w?[w]:T.series,M=0,S=0;return A.forEach(N=>{let Y=v(N.options.animation);M=m(k)&&c(k.defer)?E.defer:Math.max(M,Y.duration+Y.defer),S=Math.min(E.duration,Y.duration)}),T.renderer.forExport&&(M=0),{defer:Math.max(0,M-S),duration:Math.min(M,S)}},setAnimation:function(T,k){k.renderer.globalAnimation=b(T,k.options.chart.animation,!0)},stop:_}}),r(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{SVG_NS:c,win:s}=n,{attr:h,createElement:f,css:m,error:y,isFunction:g,isString:b,objectEach:v,splat:_}=a,{trustedTypes:T}=s,k=T&&g(T.createPolicy)&&T.createPolicy("highcharts",{createHTML:M=>M}),w=k?k.createHTML(""):"",E=function(){try{return!!new DOMParser().parseFromString(w,"text/html")}catch{return!1}}();class A{static filterUserAttributes(S){return v(S,(N,Y)=>{let Z=!0;A.allowedAttributes.indexOf(Y)===-1&&(Z=!1),["background","dynsrc","href","lowsrc","src"].indexOf(Y)!==-1&&(Z=b(N)&&A.allowedReferences.some(K=>N.indexOf(K)===0)),Z||(y(33,!1,void 0,{"Invalid attribute in config":`${Y}`}),delete S[Y]),b(N)&&S[Y]&&(S[Y]=N.replace(/</g,"&lt;"))}),S}static parseStyle(S){return S.split(";").reduce((N,Y)=>{let Z=Y.split(":").map(B=>B.trim()),K=Z.shift();return K&&Z.length&&(N[K.replace(/-([a-z])/g,B=>B[1].toUpperCase())]=Z.join(":")),N},{})}static setElementHTML(S,N){S.innerHTML=A.emptyHTML,N&&new A(N).addToDOM(S)}constructor(S){this.nodes=typeof S=="string"?this.parseMarkup(S):S}addToDOM(S){return function N(Y,Z){let K;return _(Y).forEach(function(B){let F,O=B.tagName,R=B.textContent?n.doc.createTextNode(B.textContent):void 0,L=A.bypassHTMLFiltering;if(O)if(O==="#text")F=R;else if(A.allowedTags.indexOf(O)!==-1||L){let G=O==="svg"?c:Z.namespaceURI||c,V=n.doc.createElementNS(G,O),$=B.attributes||{};v(B,function(q,W){W!=="tagName"&&W!=="attributes"&&W!=="children"&&W!=="style"&&W!=="textContent"&&($[W]=q)}),h(V,L?$:A.filterUserAttributes($)),B.style&&m(V,B.style),R&&V.appendChild(R),N(B.children||[],V),F=V}else y(33,!1,void 0,{"Invalid tagName in config":O});F&&Z.appendChild(F),K=F}),K}(this.nodes,S)}parseMarkup(S){let N,Y=[];if(S=S.trim().replace(/ style=(["'])/g," data-style=$1"),E)N=new DOMParser().parseFromString(k?k.createHTML(S):S,"text/html");else{let K=f("div");K.innerHTML=S,N={body:K}}let Z=(K,B)=>{let F=K.nodeName.toLowerCase(),O={tagName:F};F==="#text"&&(O.textContent=K.textContent||"");let R=K.attributes;if(R){let L={};[].forEach.call(R,G=>{G.name==="data-style"?O.style=A.parseStyle(G.value):L[G.name]=G.value}),O.attributes=L}if(K.childNodes.length){let L=[];[].forEach.call(K.childNodes,G=>{Z(G,L)}),L.length&&(O.children=L)}B.push(O)};return[].forEach.call(N.body.childNodes,K=>Z(K,Y)),Y}}return A.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],A.allowedReferences=["https://","http://","mailto:","/","../","./","#"],A.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],A.emptyHTML=w,A.bypassHTMLFiltering=!1,A}),r(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(n,a){let{defaultOptions:c,defaultTime:s}=n,{extend:h,getNestedProperty:f,isArray:m,isNumber:y,isObject:g,pick:b,pInt:v}=a,_={add:(w,E)=>w+E,divide:(w,E)=>E!==0?w/E:"",eq:(w,E)=>w==E,each:function(w){let E=arguments[arguments.length-1];return!!m(w)&&w.map((A,M)=>T(E.body,h(g(A)?A:{"@this":A},{"@index":M,"@first":M===0,"@last":M===w.length-1}))).join("")},ge:(w,E)=>w>=E,gt:(w,E)=>w>E,if:w=>!!w,le:(w,E)=>w<=E,lt:(w,E)=>w<E,multiply:(w,E)=>w*E,ne:(w,E)=>w!=E,subtract:(w,E)=>w-E,unless:w=>!w};function T(w="",E,A){let M=/\{([\w\:\.\,;\-\/<>%@"'= #\(\)]+)\}/g,S=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],Y=/f$/,Z=/\.(\d)/,K=c.lang,B=A&&A.time||s,F=A&&A.numberFormatter||k,O=($="")=>{let q;return $==="true"||$!=="false"&&((q=Number($)).toString()===$?q:f($,E))},R,L,G=0,V;for(;(R=M.exec(w))!==null;){let $=S.exec(R[1]);$&&(R=$,V=!0),L&&L.isBlock||(L={ctx:E,expression:R[1],find:R[0],isBlock:R[1].charAt(0)==="#",start:R.index,startInner:R.index+R[0].length,length:R[0].length});let q=R[1].split(" ")[0].replace("#","");_[q]&&(L.isBlock&&q===L.fn&&G++,L.fn||(L.fn=q));let W=R[1]==="else";if(L.isBlock&&L.fn&&(R[1]===`/${L.fn}`||W))if(G)!W&&G--;else{let se=L.startInner,fe=w.substr(se,R.index-se);L.body===void 0?(L.body=fe,L.startInner=R.index+R[0].length):L.elseBody=fe,L.find+=fe+R[0],W||(N.push(L),L=void 0)}else L.isBlock||N.push(L);if($&&!(L!=null&&L.isBlock))break}return N.forEach($=>{let q,W,{body:se,elseBody:fe,expression:re,fn:le}=$;if(le){let Se=[$],ye=re.split(" ");for(W=_[le].length;W--;)Se.unshift(O(ye[W+1]));q=_[le].apply(E,Se),$.isBlock&&typeof q=="boolean"&&(q=T(q?se:fe,E,A))}else{let Se=re.split(":");if(q=O(Se.shift()||""),Se.length&&typeof q=="number"){let ye=Se.join(":");if(Y.test(ye)){let Ee=parseInt((ye.match(Z)||["","-1"])[1],10);q!==null&&(q=F(q,Ee,K.decimalPoint,ye.indexOf(",")>-1?K.thousandsSep:""))}else q=B.dateFormat(ye,q)}}w=w.replace($.find,b(q,""))}),V?T(w,E,A):w}function k(w,E,A,M){let S,N;w=+w||0,E=+E;let Y=c.lang,Z=(w.toString().split(".")[1]||"").split("e")[0].length,K=w.toString().split("e"),B=E;E===-1?E=Math.min(Z,20):y(E)?E&&K[1]&&K[1]<0&&((N=E+ +K[1])>=0?(K[0]=(+K[0]).toExponential(N).split("e")[0],E=N):(K[0]=K[0].split(".")[0]||0,w=E<20?(K[0]*Math.pow(10,K[1])).toFixed(E):0,K[1]=0)):E=2;let F=(Math.abs(K[1]?K[0]:w)+Math.pow(10,-Math.max(E,Z)-1)).toFixed(E),O=String(v(F)),R=O.length>3?O.length%3:0;return A=b(A,Y.decimalPoint),M=b(M,Y.thousandsSep),S=(w<0?"-":"")+(R?O.substr(0,R)+M:""),0>+K[1]&&!B?S="0":S+=O.substr(R).replace(/(\d{3})(?=\d)/g,"$1"+M),E?S+=A+F.slice(-E):+S==0&&(S="0"),K[1]&&+S!=0&&(S+="e"+K[1]),S}return{dateFormat:function(w,E,A){return s.dateFormat(w,E,A)},format:T,helpers:_,numberFormat:k}}),r(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(n){var a,c;let s;return(c=a||(a={})).rendererTypes={},c.getRendererType=function(h=s){return c.rendererTypes[h]||c.rendererTypes[s]},c.registerRendererType=function(h,f,m){c.rendererTypes[h]=f,(!s||m)&&(s=h,n.Renderer=f)},a}),r(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(n){var a;let{clamp:c,pick:s,pushUnique:h,stableSort:f}=n;return(a||(a={})).distribute=function m(y,g,b){let v=y,_=v.reducedLen||g,T=(O,R)=>O.target-R.target,k=[],w=y.length,E=[],A=k.push,M,S,N,Y=!0,Z,K,B=0,F;for(M=w;M--;)B+=y[M].size;if(B>_){for(f(y,(O,R)=>(R.rank||0)-(O.rank||0)),N=(F=y[0].rank===y[y.length-1].rank)?w/2:-1,S=F?N:w-1;N&&B>_;)Z=y[M=Math.floor(S)],h(E,M)&&(B-=Z.size),S+=N,F&&S>=y.length&&(N/=2,S=N);E.sort((O,R)=>R-O).forEach(O=>A.apply(k,y.splice(O,1)))}for(f(y,T),y=y.map(O=>({size:O.size,targets:[O.target],align:s(O.align,.5)}));Y;){for(M=y.length;M--;)Z=y[M],K=(Math.min.apply(0,Z.targets)+Math.max.apply(0,Z.targets))/2,Z.pos=c(K-Z.size*Z.align,0,g-Z.size);for(M=y.length,Y=!1;M--;)M>0&&y[M-1].pos+y[M-1].size>y[M].pos&&(y[M-1].size+=y[M].size,y[M-1].targets=y[M-1].targets.concat(y[M].targets),y[M-1].align=.5,y[M-1].pos+y[M-1].size>g&&(y[M-1].pos=g-y[M-1].size),y.splice(M,1),Y=!0)}return A.apply(v,k),M=0,y.some(O=>{let R=0;return(O.targets||[]).some(()=>(v[M].pos=O.pos+R,b!==void 0&&Math.abs(v[M].pos-v[M].target)>b?(v.slice(0,M+1).forEach(L=>delete L.pos),v.reducedLen=(v.reducedLen||g)-.1*g,v.reducedLen>.1*g&&m(v,g,b),!0):(R+=v[M].size,M++,!1)))}),f(v,T),v},a}),r(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{animate:h,animObject:f,stop:m}=n,{deg2rad:y,doc:g,svg:b,SVG_NS:v,win:_}=c,{addEvent:T,attr:k,createElement:w,crisp:E,css:A,defined:M,erase:S,extend:N,fireEvent:Y,isArray:Z,isFunction:K,isObject:B,isString:F,merge:O,objectEach:R,pick:L,pInt:G,pushUnique:V,replaceNested:$,syncTimeout:q,uniqueKey:W}=s;class se{_defaultGetter(re){let le=L(this[re+"Value"],this[re],this.element?this.element.getAttribute(re):null,0);return/^-?[\d\.]+$/.test(le)&&(le=parseFloat(le)),le}_defaultSetter(re,le,Se){Se.setAttribute(le,re)}add(re){let le,Se=this.renderer,ye=this.element;return re&&(this.parentGroup=re),this.textStr!==void 0&&this.element.nodeName==="text"&&Se.buildText(this),this.added=!0,(!re||re.handleZ||this.zIndex)&&(le=this.zIndexSetter()),le||(re?re.element:Se.box).appendChild(ye),this.onAdd&&this.onAdd(),this}addClass(re,le){let Se=le?"":this.attr("class")||"";return(re=(re||"").split(/ /g).reduce(function(ye,Ee){return Se.indexOf(Ee)===-1&&ye.push(Ee),ye},Se?[Se]:[]).join(" "))!==Se&&this.attr("class",re),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(re,le,Se,ye=!0){let Ee,J,ie,oe,we={},ee=this.renderer,ae=ee.alignedObjects,ue=!!re;re?(this.alignOptions=re,this.alignByTranslate=le,this.alignTo=Se):(re=this.alignOptions||{},le=this.alignByTranslate,Se=this.alignTo);let ve=!Se||F(Se)?Se||"renderer":void 0;ve&&(ue&&V(ae,this),Se=void 0);let Ce=L(Se,ee[ve],ee),je=re.align,Me=re.verticalAlign;return Ee=(Ce.x||0)+(re.x||0),J=(Ce.y||0)+(re.y||0),je==="right"?ie=1:je==="center"&&(ie=2),ie&&(Ee+=((Ce.width||0)-(re.width||0))/ie),we[le?"translateX":"x"]=Math.round(Ee),Me==="bottom"?oe=1:Me==="middle"&&(oe=2),oe&&(J+=((Ce.height||0)-(re.height||0))/oe),we[le?"translateY":"y"]=Math.round(J),ye&&(this[this.placed?"animate":"attr"](we),this.placed=!0),this.alignAttr=we,this}alignSetter(re){let le={left:"start",center:"middle",right:"end"};le[re]&&(this.alignValue=re,this.element.setAttribute("text-anchor",le[re]))}animate(re,le,Se){let ye=f(L(le,this.renderer.globalAnimation,!0)),Ee=ye.defer;return g.hidden&&(ye.duration=0),ye.duration!==0?(Se&&(ye.complete=Se),q(()=>{this.element&&h(this,re,ye)},Ee)):(this.attr(re,void 0,Se||ye.complete),R(re,function(J,ie){ye.step&&ye.step.call(this,J,{prop:ie,pos:1,elem:this})},this)),this}applyTextOutline(re){let le=this.element;re.indexOf("contrast")!==-1&&(re=re.replace(/contrast/g,this.renderer.getContrast(le.style.fill)));let Se=re.split(" "),ye=Se[Se.length-1],Ee=Se[0];if(Ee&&Ee!=="none"&&c.svg){this.fakeTS=!0,Ee=Ee.replace(/(^[\d\.]+)(.*?)$/g,function(ee,ae,ue){return 2*Number(ae)+ue}),this.removeTextOutline();let J=g.createElementNS(v,"tspan");k(J,{class:"highcharts-text-outline",fill:ye,stroke:ye,"stroke-width":Ee,"stroke-linejoin":"round"});let ie=le.querySelector("textPath")||le;[].forEach.call(ie.childNodes,ee=>{let ae=ee.cloneNode(!0);ae.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ue=>ae.removeAttribute(ue)),J.appendChild(ae)});let oe=0;[].forEach.call(ie.querySelectorAll("text tspan"),ee=>{oe+=Number(ee.getAttribute("dy"))});let we=g.createElementNS(v,"tspan");we.textContent="",k(we,{x:Number(le.getAttribute("x")),dy:-oe}),J.appendChild(we),ie.insertBefore(J,ie.firstChild)}}attr(re,le,Se,ye){let{element:Ee}=this,J=se.symbolCustomAttribs,ie,oe,we=this,ee;return typeof re=="string"&&le!==void 0&&(ie=re,(re={})[ie]=le),typeof re=="string"?we=(this[re+"Getter"]||this._defaultGetter).call(this,re,Ee):(R(re,function(ae,ue){ee=!1,ye||m(this,ue),this.symbolName&&J.indexOf(ue)!==-1&&(oe||(this.symbolAttr(re),oe=!0),ee=!0),this.rotation&&(ue==="x"||ue==="y")&&(this.doTransform=!0),ee||(this[ue+"Setter"]||this._defaultSetter).call(this,ae,ue,Ee)},this),this.afterSetters()),Se&&Se.call(this),we}clip(re){if(re&&!re.clipPath){let le=W()+"-",Se=this.renderer.createElement("clipPath").attr({id:le}).add(this.renderer.defs);N(re,{clipPath:Se,id:le,count:0}),re.add(Se)}return this.attr("clip-path",re?`url(${this.renderer.url}#${re.id})`:"none")}crisp(re,le){le=Math.round(le||re.strokeWidth||0);let Se=re.x||this.x||0,ye=re.y||this.y||0,Ee=(re.width||this.width||0)+Se,J=(re.height||this.height||0)+ye,ie=E(Se,le),oe=E(ye,le);return N(re,{x:ie,y:oe,width:E(Ee,le)-ie,height:E(J,le)-oe}),M(re.strokeWidth)&&(re.strokeWidth=le),re}complexColor(re,le,Se){let ye=this.renderer,Ee,J,ie,oe,we,ee,ae,ue,ve,Ce,je=[],Me;Y(this.renderer,"complexColor",{args:arguments},function(){if(re.radialGradient?J="radialGradient":re.linearGradient&&(J="linearGradient"),J){if(ie=re[J],we=ye.gradients,ee=re.stops,ve=Se.radialReference,Z(ie)&&(re[J]=ie={x1:ie[0],y1:ie[1],x2:ie[2],y2:ie[3],gradientUnits:"userSpaceOnUse"}),J==="radialGradient"&&ve&&!M(ie.gradientUnits)&&(oe=ie,ie=O(ie,ye.getRadialAttr(ve,oe),{gradientUnits:"userSpaceOnUse"})),R(ie,function(Re,me){me!=="id"&&je.push(me,Re)}),R(ee,function(Re){je.push(Re)}),we[je=je.join(",")])Ce=we[je].attr("id");else{ie.id=Ce=W();let Re=we[je]=ye.createElement(J).attr(ie).add(ye.defs);Re.radAttr=oe,Re.stops=[],ee.forEach(function(me){me[1].indexOf("rgba")===0?(ae=(Ee=a.parse(me[1])).get("rgb"),ue=Ee.get("a")):(ae=me[1],ue=1);let De=ye.createElement("stop").attr({offset:me[0],"stop-color":ae,"stop-opacity":ue}).add(Re);Re.stops.push(De)})}Me="url("+ye.url+"#"+Ce+")",Se.setAttribute(le,Me),Se.gradient=je,re.toString=function(){return Me}}})}css(re){let le=this.styles,Se={},ye=this.element,Ee,J=!le;if(le&&R(re,function(ie,oe){le&&le[oe]!==ie&&(Se[oe]=ie,J=!0)}),J){le&&(re=N(le,Se)),re.width===null||re.width==="auto"?delete this.textWidth:ye.nodeName.toLowerCase()==="text"&&re.width&&(Ee=this.textWidth=G(re.width)),N(this.styles,re),Ee&&!b&&this.renderer.forExport&&delete re.width;let ie=O(re);ye.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(oe=>ie&&delete ie[oe]),ie.color&&(ie.fill=ie.color)),A(ye,ie)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),re.textOutline&&this.applyTextOutline(re.textOutline)),this}dashstyleSetter(re){let le,Se=this["stroke-width"];if(Se==="inherit"&&(Se=1),re=re&&re.toLowerCase()){let ye=re.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(le=ye.length;le--;)ye[le]=""+G(ye[le])*L(Se,NaN);re=ye.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",re)}}destroy(){var oe;let re=this,le=re.element||{},Se=re.renderer,ye=le.ownerSVGElement,Ee=le.nodeName==="SPAN"&&re.parentGroup||void 0,J,ie;if(le.onclick=le.onmouseout=le.onmouseover=le.onmousemove=le.point=null,m(re),re.clipPath&&ye){let we=re.clipPath;[].forEach.call(ye.querySelectorAll("[clip-path],[CLIP-PATH]"),function(ee){ee.getAttribute("clip-path").indexOf(we.element.id)>-1&&ee.removeAttribute("clip-path")}),re.clipPath=we.destroy()}if(re.connector=(oe=re.connector)==null?void 0:oe.destroy(),re.stops){for(ie=0;ie<re.stops.length;ie++)re.stops[ie].destroy();re.stops.length=0,re.stops=void 0}for(re.safeRemoveChild(le);Ee&&Ee.div&&Ee.div.childNodes.length===0;)J=Ee.parentGroup,re.safeRemoveChild(Ee.div),delete Ee.div,Ee=J;re.alignOptions&&S(Se.alignedObjects,re),R(re,function(we,ee){re[ee]&&re[ee].parentGroup===re&&re[ee].destroy&&re[ee].destroy(),delete re[ee]})}dSetter(re,le,Se){Z(re)&&(typeof re[0]=="string"&&(re=this.renderer.pathToSegments(re)),this.pathArray=re,re=re.reduce((ye,Ee,J)=>Ee&&Ee.join?(J?ye+" ":"")+Ee.join(" "):(Ee||"").toString(),"")),/(NaN| {2}|^$)/.test(re)&&(re="M 0 0"),this[le]!==re&&(Se.setAttribute(le,re),this[le]=re)}fillSetter(re,le,Se){typeof re=="string"?Se.setAttribute(le,re):re&&this.complexColor(re,le,Se)}hrefSetter(re,le,Se){Se.setAttributeNS("http://www.w3.org/1999/xlink",le,re)}getBBox(re,le){let Se,ye,Ee,J,{alignValue:ie,element:oe,renderer:we,styles:ee,textStr:ae}=this,{cache:ue,cacheKeys:ve}=we,Ce=oe.namespaceURI===this.SVG_NS,je=L(le,this.rotation,0),Me=we.styledMode?oe&&se.prototype.getStyle.call(oe,"font-size"):ee.fontSize;if(M(ae)&&((J=ae.toString()).indexOf("<")===-1&&(J=J.replace(/\d/g,"0")),J+=["",we.rootFontSize,Me,je,this.textWidth,ie,ee.textOverflow,ee.fontWeight].join(",")),J&&!re&&(Se=ue[J]),!Se||Se.polygon){if(Ce||we.forExport){try{Ee=this.fakeTS&&function(me){let De=oe.querySelector(".highcharts-text-outline");De&&A(De,{display:me})},K(Ee)&&Ee("none"),Se=oe.getBBox?N({},oe.getBBox()):{width:oe.offsetWidth,height:oe.offsetHeight,x:0,y:0},K(Ee)&&Ee("")}catch{}(!Se||Se.width<0)&&(Se={x:0,y:0,width:0,height:0})}else Se=this.htmlGetBBox();ye=Se.height,Ce&&(Se.height=ye={"11px,17":14,"13px,20":16}[`${Me||""},${Math.round(ye)}`]||ye),je&&(Se=this.getRotatedBox(Se,je));let Re={bBox:Se};Y(this,"afterGetBBox",Re),Se=Re.bBox}if(J&&(ae===""||Se.height>0)){for(;ve.length>250;)delete ue[ve.shift()];ue[J]||ve.push(J),ue[J]=Se}return Se}getRotatedBox(re,le){let{x:Se,y:ye,width:Ee,height:J}=re,{alignValue:ie,translateY:oe,rotationOriginX:we=0,rotationOriginY:ee=0}=this,ae={right:1,center:.5}[ie||0]||0,ue=Number(this.element.getAttribute("y")||0)-(oe?0:ye),ve=le*y,Ce=(le-90)*y,je=Math.cos(ve),Me=Math.sin(ve),Re=Ee*je,me=Ee*Me,De=Math.cos(Ce),Ue=Math.sin(Ce),[[Pe,Te],[Ie,Fe]]=[we,ee].map(ii=>[ii-ii*je,ii*Me]),Oe=Se+ae*(Ee-Re)+Pe+Fe+ue*De,Ge=Oe+Re,Qe=Ge-J*De,at=Qe-Re,rt=ye+ue-ae*me-Te+Ie+ue*Ue,dt=rt+me,gt=dt-J*Ue,Tt=gt-me,Nt=Math.min(Oe,Ge,Qe,at),mt=Math.min(rt,dt,gt,Tt),St=Math.max(Oe,Ge,Qe,at)-Nt,kt=Math.max(rt,dt,gt,Tt)-mt;return{x:Nt,y:mt,width:St,height:kt,polygon:[[Oe,rt],[Ge,dt],[Qe,gt],[at,Tt]]}}getStyle(re){return _.getComputedStyle(this.element||this,"").getPropertyValue(re)}hasClass(re){return(""+this.attr("class")).split(" ").indexOf(re)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(re,le){this.onEvents={},this.opacity=1,this.SVG_NS=v,this.element=le==="span"||le==="body"?w(le):g.createElementNS(this.SVG_NS,le),this.renderer=re,this.styles={},Y(this,"afterInit")}on(re,le){let{onEvents:Se}=this;return Se[re]&&Se[re](),Se[re]=T(this.element,re,le),this}opacitySetter(re,le,Se){let ye=Number(Number(re).toFixed(3));this.opacity=ye,Se.setAttribute(le,ye)}reAlign(){var re;(re=this.alignOptions)!=null&&re.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(re){return this.attr("class",(""+this.attr("class")).replace(F(re)?RegExp(`(^| )${re}( |$)`):re," ").replace(/ +/g," ").trim())}removeTextOutline(){let re=this.element.querySelector("tspan.highcharts-text-outline");re&&this.safeRemoveChild(re)}safeRemoveChild(re){let le=re.parentNode;le&&le.removeChild(re)}setRadialReference(re){let le=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=re,le&&le.radAttr&&le.animate(this.renderer.getRadialAttr(re,le.radAttr)),this}shadow(re){var Ee;let{renderer:le}=this,Se=O(((Ee=this.parentGroup)==null?void 0:Ee.rotation)===90?{offsetX:-1,offsetY:-1}:{},B(re)?re:{}),ye=le.shadowDefinition(Se);return this.attr({filter:re?`url(${le.url}#${ye})`:"none"})}show(re=!0){return this.attr({visibility:re?"inherit":"visible"})}"stroke-widthSetter"(re,le,Se){this[le]=re,Se.setAttribute(le,re)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let re=this.getStyle("stroke-width"),le=0,Se;return/px$/.test(re)?le=G(re):re!==""&&(k(Se=g.createElementNS(v,"rect"),{width:re,"stroke-width":0}),this.element.parentNode.appendChild(Se),le=Se.getBBox().width,Se.parentNode.removeChild(Se)),le}symbolAttr(re){let le=this;se.symbolCustomAttribs.forEach(function(Se){le[Se]=L(re[Se],le[Se])}),le.attr({d:le.renderer.symbols[le.symbolName](le.x,le.y,le.width,le.height,le)})}textSetter(re){re!==this.textStr&&(delete this.textPxLength,this.textStr=re,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(re){let le=this.element,Se=le.getElementsByTagName("title")[0]||g.createElementNS(this.SVG_NS,"title");le.insertBefore?le.insertBefore(Se,le.firstChild):le.appendChild(Se),Se.textContent=$(L(re,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let re=this.element;return re.parentNode.appendChild(re),this}translate(re,le){return this.attr({translateX:re,translateY:le})}updateTransform(re="transform"){var ue;let{element:le,matrix:Se,rotation:ye=0,rotationOriginX:Ee,rotationOriginY:J,scaleX:ie,scaleY:oe,translateX:we=0,translateY:ee=0}=this,ae=["translate("+we+","+ee+")"];M(Se)&&ae.push("matrix("+Se.join(",")+")"),ye&&(ae.push("rotate("+ye+" "+L(Ee,le.getAttribute("x"),0)+" "+L(J,le.getAttribute("y")||0)+")"),((ue=this.text)==null?void 0:ue.element.tagName)==="SPAN"&&this.text.attr({rotation:ye,rotationOriginX:(Ee||0)-this.padding,rotationOriginY:(J||0)-this.padding})),(M(ie)||M(oe))&&ae.push("scale("+L(ie,1)+" "+L(oe,1)+")"),ae.length&&!(this.text||this).textPath&&le.setAttribute(re,ae.join(" "))}visibilitySetter(re,le,Se){re==="inherit"?Se.removeAttribute(le):this[le]!==re&&Se.setAttribute(le,re),this[le]=re}xGetter(re){return this.element.nodeName==="circle"&&(re==="x"?re="cx":re==="y"&&(re="cy")),this._defaultGetter(re)}zIndexSetter(re,le){let Se=this.renderer,ye=this.parentGroup,Ee=(ye||Se).element||Se.box,J=this.element,ie=Ee===Se.box,oe,we,ee,ae=!1,ue,ve=this.added,Ce;if(M(re)?(J.setAttribute("data-z-index",re),re=+re,this[le]===re&&(ve=!1)):M(this[le])&&J.removeAttribute("data-z-index"),this[le]=re,ve){for((re=this.zIndex)&&ye&&(ye.handleZ=!0),Ce=(oe=Ee.childNodes).length-1;Ce>=0&&!ae;Ce--)ue=!M(ee=(we=oe[Ce]).getAttribute("data-z-index")),we!==J&&(re<0&&ue&&!ie&&!Ce?(Ee.insertBefore(J,oe[Ce]),ae=!0):(G(ee)<=re||ue&&(!M(re)||re>=0))&&(Ee.insertBefore(J,oe[Ce+1]),ae=!0));ae||(Ee.insertBefore(J,oe[ie?3:0]),ae=!0)}return ae}}return se.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],se.prototype.strokeSetter=se.prototype.fillSetter,se.prototype.yGetter=se.prototype.xGetter,se.prototype.matrixSetter=se.prototype.rotationOriginXSetter=se.prototype.rotationOriginYSetter=se.prototype.rotationSetter=se.prototype.scaleXSetter=se.prototype.scaleYSetter=se.prototype.translateXSetter=se.prototype.translateYSetter=se.prototype.verticalAlignSetter=function(fe,re){this[re]=fe,this.doTransform=!0},se}),r(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a){let{defined:c,extend:s,isNumber:h,merge:f,pick:m,removeEvent:y}=a;class g extends n{constructor(v,_,T,k,w,E,A,M,S,N){let Y;super(v,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=_,this.x=T,this.y=k,this.anchorX=E,this.anchorY=A,this.baseline=S,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=v.text(void 0,0,0,M).attr({zIndex:1}),typeof w=="string"&&((Y=/^url\((.*?)\)$/.test(w))||this.renderer.symbols[w])&&(this.symbolKey=w),this.bBox=g.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=v.styledMode||Y,this.deferredAttr={},this.alignFactor=0}alignSetter(v){let _={left:0,center:.5,right:1}[v];_!==this.alignFactor&&(this.alignFactor=_,this.bBox&&h(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(v,_){this.anchorX=v,this.boxAttr(_,Math.round(v)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(v,_){this.anchorY=v,this.boxAttr(_,v-this.ySetting)}boxAttr(v,_){this.box?this.box.attr(v,_):this.deferredAttr[v]=_}css(v){if(v){let _={};v=f(v),g.textProps.forEach(T=>{v[T]!==void 0&&(_[T]=v[T],delete v[T])}),this.text.css(_),"fontSize"in _||"fontWeight"in _?this.updateTextPadding():("width"in _||"textOverflow"in _)&&this.updateBoxSize()}return n.prototype.css.call(this,v)}destroy(){y(this.element,"mouseenter"),y(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),n.prototype.destroy.call(this)}fillSetter(v,_){v&&(this.needsBox=!0),this.fill=v,this.boxAttr(_,v)}getBBox(v,_){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:T,height:k=0,translateX:w=0,translateY:E=0,width:A=0}=this,M=m(this.paddingLeft,T),S=_??(this.rotation||0),N={width:A,height:k,x:w+this.bBox.x-M,y:E+this.bBox.y-T+this.baselineOffset};return S&&(N=this.getRotatedBox(N,S)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(v){this.heightSetting=v,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:m(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&c(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(v,_){h(v)?v!==this[_]&&(this[_]=v,this.updateTextPadding()):this[_]=void 0}rSetter(v,_){this.boxAttr(_,v)}strokeSetter(v,_){this.stroke=v,this.boxAttr(_,v)}"stroke-widthSetter"(v,_){v&&(this.needsBox=!0),this["stroke-width"]=v,this.boxAttr(_,v)}"text-alignSetter"(v){this.textAlign=v}textSetter(v){v!==void 0&&this.text.attr({text:v}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let v,_=this.text,T={},k=this.padding,w=this.bBox=(!h(this.widthSetting)||!h(this.heightSetting)||this.textAlign)&&c(_.textStr)?_.getBBox(void 0,0):g.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||w.height||0)+2*k;let E=this.renderer.fontMetrics(_);if(this.baselineOffset=k+Math.min((this.text.firstLineMetrics||E).b,w.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-E.h)/2),this.needsBox&&!_.textPath){if(!this.box){let A=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();A.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),A.add(this)}v=this.getCrispAdjust(),T.x=v,T.y=(this.baseline?-this.baselineOffset:0)+v,T.width=Math.round(this.width),T.height=Math.round(this.height),this.box.attr(s(T,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let v=this.text;if(!v.textPath){this.updateBoxSize();let _=this.baseline?0:this.baselineOffset,T=m(this.paddingLeft,this.padding);c(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(T+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(T!==v.x||_!==v.y)&&(v.attr("x",T),v.hasBoxWidthChanged&&(this.bBox=v.getBBox(!0)),_!==void 0&&v.attr("y",_)),v.x=T,v.y=_}}widthSetter(v){this.widthSetting=h(v)?v:void 0,this.doUpdate=!0}getPaddedWidth(){let v=this.padding,_=m(this.paddingLeft,v),T=m(this.paddingRight,v);return(this.widthSetting||this.bBox.width||0)+_+T}xSetter(v){this.x=v,this.alignFactor&&(v-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(v),this.attr("translateX",this.xSetting)}ySetter(v){this.ySetting=this.y=Math.round(v),this.attr("translateY",this.ySetting)}}return g.emptyBBox={width:0,height:0,x:0,y:0},g.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],g}),r(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(n){let{defined:a,isNumber:c,pick:s}=n;function h(y,g,b,v,_){let T=[];if(_){let k=_.start||0,w=s(_.r,b),E=s(_.r,v||b),A=2e-4/(_.borderRadius?1:Math.max(w,1)),M=Math.abs((_.end||0)-k-2*Math.PI)<A,S=(_.end||0)-(M?A:0),N=_.innerR,Y=s(_.open,M),Z=Math.cos(k),K=Math.sin(k),B=Math.cos(S),F=Math.sin(S),O=s(_.longArc,S-k-Math.PI<A?0:1),R=["A",w,E,0,O,s(_.clockwise,1),y+w*B,g+E*F];R.params={start:k,end:S,cx:y,cy:g},T.push(["M",y+w*Z,g+E*K],R),a(N)&&((R=["A",N,N,0,O,a(_.clockwise)?1-_.clockwise:0,y+N*Z,g+N*K]).params={start:S,end:k,cx:y,cy:g},T.push(Y?["M",y+N*B,g+N*F]:["L",y+N*B,g+N*F],R)),Y||T.push(["Z"])}return T}function f(y,g,b,v,_){return _&&_.r?m(y,g,b,v,_):[["M",y,g],["L",y+b,g],["L",y+b,g+v],["L",y,g+v],["Z"]]}function m(y,g,b,v,_){let T=(_==null?void 0:_.r)||0;return[["M",y+T,g],["L",y+b-T,g],["A",T,T,0,0,1,y+b,g+T],["L",y+b,g+v-T],["A",T,T,0,0,1,y+b-T,g+v],["L",y+T,g+v],["A",T,T,0,0,1,y,g+v-T],["L",y,g+T],["A",T,T,0,0,1,y+T,g],["Z"]]}return{arc:h,callout:function(y,g,b,v,_){let T=Math.min(_&&_.r||0,b,v),k=T+6,w=_&&_.anchorX,E=_&&_.anchorY||0,A=m(y,g,b,v,{r:T});if(!c(w)||w<b&&w>0&&E<v&&E>0)return A;if(y+w>b-k)if(E>g+k&&E<g+v-k)A.splice(3,1,["L",y+b,E-6],["L",y+b+6,E],["L",y+b,E+6],["L",y+b,g+v-T]);else if(w<b){let M=E<g+k,S=M?g:g+v;A.splice(M?2:5,0,["L",w,E],["L",y+b-T,S])}else A.splice(3,1,["L",y+b,v/2],["L",w,E],["L",y+b,v/2],["L",y+b,g+v-T]);else if(y+w<k)if(E>g+k&&E<g+v-k)A.splice(7,1,["L",y,E+6],["L",y-6,E],["L",y,E-6],["L",y,g+T]);else if(w>0){let M=E<g+k,S=M?g:g+v;A.splice(M?1:6,0,["L",w,E],["L",y+T,S])}else A.splice(7,1,["L",y,v/2],["L",w,E],["L",y,v/2],["L",y,g+T]);else E>v&&w<b-k?A.splice(5,1,["L",w+6,g+v],["L",w,g+v+6],["L",w-6,g+v],["L",y+T,g+v]):E<0&&w>k&&A.splice(1,1,["L",w-6,g],["L",w,g-6],["L",w+6,g],["L",b-T,g]);return A},circle:function(y,g,b,v){return h(y+b/2,g+v/2,b/2,v/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(y,g,b,v){return[["M",y+b/2,g],["L",y+b,g+v/2],["L",y+b/2,g+v],["L",y,g+v/2],["Z"]]},rect:f,roundedRect:m,square:f,triangle:function(y,g,b,v){return[["M",y+b/2,g],["L",y+b,g+v],["L",y,g+v],["Z"]]},"triangle-down":function(y,g,b,v){return[["M",y,g],["L",y+b,g],["L",y+b/2,g+v],["Z"]]}}}),r(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{doc:s,SVG_NS:h,win:f}=a,{attr:m,extend:y,fireEvent:g,isString:b,objectEach:v,pick:_}=c;return class{constructor(T){let k=T.styles;this.renderer=T.renderer,this.svgElement=T,this.width=T.textWidth,this.textLineHeight=k&&k.lineHeight,this.textOutline=k&&k.textOutline,this.ellipsis=!!(k&&k.textOverflow==="ellipsis"),this.noWrap=!!(k&&k.whiteSpace==="nowrap")}buildSVG(){let T=this.svgElement,k=T.element,w=T.renderer,E=_(T.textStr,"").toString(),A=E.indexOf("<")!==-1,M=k.childNodes,S=!T.added&&w.box,N=[E,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,T.getStyle("font-size"),this.width].join(",");if(N!==T.textCache){T.textCache=N,delete T.actualWidth;for(let Y=M.length;Y--;)k.removeChild(M[Y]);if(A||this.ellipsis||this.width||T.textPath||E.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(E))){if(E!==""){S&&S.appendChild(k);let Y=new n(E);this.modifyTree(Y.nodes),Y.addToDOM(k),this.modifyDOM(),this.ellipsis&&(k.textContent||"").indexOf("")!==-1&&T.attr("title",this.unescapeEntities(T.textStr||"",["&lt;","&gt;"])),S&&S.removeChild(k)}}else k.appendChild(s.createTextNode(this.unescapeEntities(E)));b(this.textOutline)&&T.applyTextOutline&&T.applyTextOutline(this.textOutline)}}modifyDOM(){let T,k=this.svgElement,w=m(k.element,"x");for(k.firstLineMetrics=void 0;(T=k.element.firstChild)&&/^[\s\u200B]*$/.test(T.textContent||" ");)k.element.removeChild(T);[].forEach.call(k.element.querySelectorAll("tspan.highcharts-br"),(S,N)=>{S.nextSibling&&S.previousSibling&&(N===0&&S.previousSibling.nodeType===1&&(k.firstLineMetrics=k.renderer.fontMetrics(S.previousSibling)),m(S,{dy:this.getLineHeight(S.nextSibling),x:w}))});let E=this.width||0;if(!E)return;let A=(S,N)=>{let Y=S.textContent||"",Z=Y.replace(/([^\^])-/g,"$1- ").split(" "),K=!this.noWrap&&(Z.length>1||k.element.childNodes.length>1),B=this.getLineHeight(N),F=0,O=k.actualWidth;if(this.ellipsis)Y&&this.truncate(S,Y,void 0,0,Math.max(0,E-.8*B),(R,L)=>R.substring(0,L)+"");else if(K){let R=[],L=[];for(;N.firstChild&&N.firstChild!==S;)L.push(N.firstChild),N.removeChild(N.firstChild);for(;Z.length;)Z.length&&!this.noWrap&&F>0&&(R.push(S.textContent||""),S.textContent=Z.join(" ").replace(/- /g,"-")),this.truncate(S,void 0,Z,F===0&&O||0,E,(G,V)=>Z.slice(0,V).join(" ").replace(/- /g,"-")),O=k.actualWidth,F++;L.forEach(G=>{N.insertBefore(G,S)}),R.forEach(G=>{N.insertBefore(s.createTextNode(G),S);let V=s.createElementNS(h,"tspan");V.textContent="",m(V,{dy:B,x:w}),N.insertBefore(V,S)})}},M=S=>{[].slice.call(S.childNodes).forEach(N=>{N.nodeType===f.Node.TEXT_NODE?A(N,S):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(k.actualWidth=0),M(N))})};M(k.element)}getLineHeight(T){let k=T.nodeType===f.Node.TEXT_NODE?T.parentElement:T;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(k||this.svgElement.element).h}modifyTree(T){let k=(w,E)=>{let{attributes:A={},children:M,style:S={},tagName:N}=w,Y=this.renderer.styledMode;if(N==="b"||N==="strong"?Y?A.class="highcharts-strong":S.fontWeight="bold":(N==="i"||N==="em")&&(Y?A.class="highcharts-emphasized":S.fontStyle="italic"),S&&S.color&&(S.fill=S.color),N==="br"){A.class="highcharts-br",w.textContent="";let Z=T[E+1];Z&&Z.textContent&&(Z.textContent=Z.textContent.replace(/^ +/gm,""))}else N==="a"&&M&&M.some(Z=>Z.tagName==="#text")&&(w.children=[{children:M,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(w.tagName="tspan"),y(w,{attributes:A,style:S}),M&&M.filter(Z=>Z.tagName!=="#text").forEach(k)};T.forEach(k),g(this.svgElement,"afterModifyTree",{nodes:T})}truncate(T,k,w,E,A,M){let S,N,Y=this.svgElement,{rotation:Z}=Y,K=[],B=w?1:0,F=(k||w||"").length,O=F,R=function(L,G){let V=G||L,$=T.parentNode;if($&&K[V]===void 0&&$.getSubStringLength)try{K[V]=E+$.getSubStringLength(0,w?V+1:V)}catch{}return K[V]};if(Y.rotation=0,E+(N=R(T.textContent.length))>A){for(;B<=F;)O=Math.ceil((B+F)/2),w&&(S=M(w,O)),N=R(O,S&&S.length-1),B===F?B=F+1:N>A?F=O-1:B=O;F===0?T.textContent="":k&&F===k.length-1||(T.textContent=S||M(k||w,O))}w&&w.splice(0,O),Y.actualWidth=N,Y.rotation=Z}unescapeEntities(T,k){return v(this.renderer.escapes,function(w,E){k&&k.indexOf(w)!==-1||(T=T.toString().replace(RegExp(w,"g"),E))}),T}}}),r(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g,b){let v,{defaultOptions:_}=a,{charts:T,deg2rad:k,doc:w,isFirefox:E,isMS:A,isWebKit:M,noop:S,SVG_NS:N,symbolSizes:Y,win:Z}=s,{addEvent:K,attr:B,createElement:F,crisp:O,css:R,defined:L,destroyObjectProperties:G,extend:V,isArray:$,isNumber:q,isObject:W,isString:se,merge:fe,pick:re,pInt:le,replaceNested:Se,uniqueKey:ye}=b;class Ee{constructor(ie,oe,we,ee,ae,ue,ve){let Ce,je,Me=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Re=Me.element;ve||Me.css(this.getStyle(ee||{})),ie.appendChild(Re),B(ie,"dir","ltr"),ie.innerHTML.indexOf("xmlns")===-1&&B(Re,"xmlns",this.SVG_NS),this.box=Re,this.boxWrapper=Me,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(w.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ue,this.forExport=ae,this.styledMode=ve,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Me.getStyle("font-size"),this.setSize(oe,we,!1),E&&ie.getBoundingClientRect&&((Ce=function(){R(ie,{left:0,top:0}),je=ie.getBoundingClientRect(),R(ie,{left:Math.ceil(je.left)-je.left+"px",top:Math.ceil(je.top)-je.top+"px"})})(),this.unSubPixelFix=K(Z,"resize",Ce))}definition(ie){return new n([ie]).addToDOM(this.defs.element)}getReferenceURL(){if((E||M)&&w.getElementsByTagName("base").length){if(!L(v)){let ie=ye(),oe=new n([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:ie},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${ie})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(w.body);R(oe,{position:"fixed",top:0,left:0,zIndex:9e5});let we=w.elementFromPoint(6,6);v=(we&&we.id)==="hitme",w.body.removeChild(oe)}if(v)return Se(Z.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(ie){return this.style=V({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},ie),this.style}setStyle(ie){this.boxWrapper.css(this.getStyle(ie))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let ie=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=ie.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(ie){return new this.Element(this,ie)}getRadialAttr(ie,oe){return{cx:ie[0]-ie[2]/2+(oe.cx||0)*ie[2],cy:ie[1]-ie[2]/2+(oe.cy||0)*ie[2],r:(oe.r||0)*ie[2]}}shadowDefinition(ie){let oe=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(ie).map(ee=>`${ee}-${ie[ee]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),we=fe({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},ie);return this.defs.element.querySelector(`#${oe}`)||this.definition({tagName:"filter",attributes:{id:oe,filterUnits:we.filterUnits},children:this.getShadowFilterContent(we)}),oe}getShadowFilterContent(ie){return[{tagName:"feDropShadow",attributes:{dx:ie.offsetX,dy:ie.offsetY,"flood-color":ie.color,"flood-opacity":Math.min(5*ie.opacity,1),stdDeviation:ie.width/2}}]}buildText(ie){new g(ie).buildSVG()}getContrast(ie){let oe=c.parse(ie).rgba.map(ee=>{let ae=ee/255;return ae<=.03928?ae/12.92:Math.pow((ae+.055)/1.055,2.4)}),we=.2126*oe[0]+.7152*oe[1]+.0722*oe[2];return 1.05/(we+.05)>(we+.05)/.05?"#FFFFFF":"#000000"}button(ie,oe,we,ee,ae={},ue,ve,Ce,je,Me){let Re=this.label(ie,oe,we,je,void 0,void 0,Me,void 0,"button"),me=this.styledMode,De=arguments,Ue=0;ae=fe(_.global.buttonTheme,ae),me&&(delete ae.fill,delete ae.stroke,delete ae["stroke-width"]);let Pe=ae.states||{},Te=ae.style||{};delete ae.states,delete ae.style;let Ie=[n.filterUserAttributes(ae)],Fe=[Te];return me||["hover","select","disabled"].forEach((Oe,Ge)=>{Ie.push(fe(Ie[0],n.filterUserAttributes(De[Ge+5]||Pe[Oe]||{}))),Fe.push(Ie[Ge+1].style),delete Ie[Ge+1].style}),K(Re.element,A?"mouseover":"mouseenter",function(){Ue!==3&&Re.setState(1)}),K(Re.element,A?"mouseout":"mouseleave",function(){Ue!==3&&Re.setState(Ue)}),Re.setState=(Oe=0)=>{if(Oe!==1&&(Re.state=Ue=Oe),Re.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Oe]),!me){Re.attr(Ie[Oe]);let Ge=Fe[Oe];W(Ge)&&Re.css(Ge)}},Re.attr(Ie[0]),!me&&(Re.css(V({cursor:"default"},Te)),Me&&Re.text.css({pointerEvents:"none"})),Re.on("touchstart",Oe=>Oe.stopPropagation()).on("click",function(Oe){Ue!==3&&ee.call(Re,Oe)})}crispLine(ie,oe){let[we,ee]=ie;return L(we[1])&&we[1]===ee[1]&&(we[1]=ee[1]=O(we[1],oe)),L(we[2])&&we[2]===ee[2]&&(we[2]=ee[2]=O(we[2],oe)),ie}path(ie){let oe=this.styledMode?{}:{fill:"none"};return $(ie)?oe.d=ie:W(ie)&&V(oe,ie),this.createElement("path").attr(oe)}circle(ie,oe,we){let ee=W(ie)?ie:ie===void 0?{}:{x:ie,y:oe,r:we},ae=this.createElement("circle");return ae.xSetter=ae.ySetter=function(ue,ve,Ce){Ce.setAttribute("c"+ve,ue)},ae.attr(ee)}arc(ie,oe,we,ee,ae,ue){let ve;W(ie)?(oe=(ve=ie).y,we=ve.r,ee=ve.innerR,ae=ve.start,ue=ve.end,ie=ve.x):ve={innerR:ee,start:ae,end:ue};let Ce=this.symbol("arc",ie,oe,we,we,ve);return Ce.r=we,Ce}rect(ie,oe,we,ee,ae,ue){let ve=W(ie)?ie:ie===void 0?{}:{x:ie,y:oe,r:ae,width:Math.max(we||0,0),height:Math.max(ee||0,0)},Ce=this.createElement("rect");return this.styledMode||(ue!==void 0&&(ve["stroke-width"]=ue,V(ve,Ce.crisp(ve))),ve.fill="none"),Ce.rSetter=function(je,Me,Re){Ce.r=je,B(Re,{rx:je,ry:je})},Ce.rGetter=function(){return Ce.r||0},Ce.attr(ve)}roundedRect(ie){return this.symbol("roundedRect").attr(ie)}setSize(ie,oe,we){this.width=ie,this.height=oe,this.boxWrapper.animate({width:ie,height:oe},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:re(we,!0)?void 0:0}),this.alignElements()}g(ie){let oe=this.createElement("g");return ie?oe.attr({class:"highcharts-"+ie}):oe}image(ie,oe,we,ee,ae,ue){let ve={preserveAspectRatio:"none"};q(oe)&&(ve.x=oe),q(we)&&(ve.y=we),q(ee)&&(ve.width=ee),q(ae)&&(ve.height=ae);let Ce=this.createElement("image").attr(ve),je=function(Me){Ce.attr({href:ie}),ue.call(Ce,Me)};if(ue){Ce.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Me=new Z.Image;K(Me,"load",je),Me.src=ie,Me.complete&&je({})}else Ce.attr({href:ie});return Ce}symbol(ie,oe,we,ee,ae,ue){let ve,Ce,je,Me,Re=this,me=/^url\((.*?)\)$/,De=me.test(ie),Ue=!De&&(this.symbols[ie]?ie:"circle"),Pe=Ue&&this.symbols[Ue];if(Pe)typeof oe=="number"&&(Ce=Pe.call(this.symbols,oe||0,we||0,ee||0,ae||0,ue)),ve=this.path(Ce),Re.styledMode||ve.attr("fill","none"),V(ve,{symbolName:Ue||void 0,x:oe,y:we,width:ee,height:ae}),ue&&V(ve,ue);else if(De){je=ie.match(me)[1];let Te=ve=this.image(je);Te.imgwidth=re(ue&&ue.width,Y[je]&&Y[je].width),Te.imgheight=re(ue&&ue.height,Y[je]&&Y[je].height),Me=Ie=>Ie.attr({width:Ie.width,height:Ie.height}),["width","height"].forEach(Ie=>{Te[`${Ie}Setter`]=function(Fe,Oe){this[Oe]=Fe;let{alignByTranslate:Ge,element:Qe,width:at,height:rt,imgwidth:dt,imgheight:gt}=this,Tt=Oe==="width"?dt:gt,Nt=1;ue&&ue.backgroundSize==="within"&&at&&rt&&dt&&gt?(Nt=Math.min(at/dt,rt/gt),B(Qe,{width:Math.round(dt*Nt),height:Math.round(gt*Nt)})):Qe&&Tt&&Qe.setAttribute(Oe,Tt),!Ge&&dt&&gt&&this.translate(((at||0)-dt*Nt)/2,((rt||0)-gt*Nt)/2)}}),L(oe)&&Te.attr({x:oe,y:we}),Te.isImg=!0,Te.symbolUrl=ie,L(Te.imgwidth)&&L(Te.imgheight)?Me(Te):(Te.attr({width:0,height:0}),F("img",{onload:function(){let Ie=T[Re.chartIndex];this.width===0&&(R(this,{position:"absolute",top:"-999em"}),w.body.appendChild(this)),Y[je]={width:this.width,height:this.height},Te.imgwidth=this.width,Te.imgheight=this.height,Te.element&&Me(Te),this.parentNode&&this.parentNode.removeChild(this),Re.imgCount--,Re.imgCount||!Ie||Ie.hasLoaded||Ie.onload()},src:je}),this.imgCount++)}return ve}clipRect(ie,oe,we,ee){return this.rect(ie,oe,we,ee,0)}text(ie,oe,we,ee){let ae={};if(ee&&(this.allowHTML||!this.forExport))return this.html(ie,oe,we);ae.x=Math.round(oe||0),we&&(ae.y=Math.round(we)),L(ie)&&(ae.text=ie);let ue=this.createElement("text").attr(ae);return ee&&(!this.forExport||this.allowHTML)||(ue.xSetter=function(ve,Ce,je){let Me=je.getElementsByTagName("tspan"),Re=je.getAttribute(Ce);for(let me=0,De;me<Me.length;me++)(De=Me[me]).getAttribute(Ce)===Re&&De.setAttribute(Ce,ve);je.setAttribute(Ce,ve)}),ue}fontMetrics(ie){let oe=le(f.prototype.getStyle.call(ie,"font-size")||0),we=oe<24?oe+3:Math.round(1.2*oe),ee=Math.round(.8*we);return{h:we,b:ee,f:oe}}rotCorr(ie,oe,we){let ee=ie;return oe&&we&&(ee=Math.max(ee*Math.cos(oe*k),4)),{x:-ie/3*Math.sin(oe*k),y:ee}}pathToSegments(ie){let oe=[],we=[],ee={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let ae=0;ae<ie.length;ae++)se(we[0])&&q(ie[ae])&&we.length===ee[we[0].toUpperCase()]&&ie.splice(ae,0,we[0].replace("M","L").replace("m","l")),typeof ie[ae]=="string"&&(we.length&&oe.push(we.slice(0)),we.length=0),we.push(ie[ae]);return oe.push(we.slice(0)),oe}label(ie,oe,we,ee,ae,ue,ve,Ce,je){return new m(this,ie,oe,we,ee,ae,ue,ve,Ce,je)}alignElements(){this.alignedObjects.forEach(ie=>ie.align())}}return V(Ee.prototype,{Element:f,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:y,draw:S}),h.registerRendererType("svg",Ee,!0),Ee}),r(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{composed:h}=a,{attr:f,css:m,createElement:y,defined:g,extend:b,pInt:v,pushUnique:_}=s;function T(A,M,S){var Y;let N=((Y=this.div)==null?void 0:Y.style)||S.style;c.prototype[`${M}Setter`].call(this,A,M,S),N&&(N[M]=A)}let k=(A,M)=>{var S;if(!A.div){let N=f(A.element,"class"),Y=A.css,Z=y("div",N?{className:N}:void 0,{position:"absolute",left:`${A.translateX||0}px`,top:`${A.translateY||0}px`,...A.styles,display:A.display,opacity:A.opacity,visibility:A.visibility},((S=A.parentGroup)==null?void 0:S.div)||M);A.classSetter=(K,B,F)=>{F.setAttribute("class",K),Z.className=K},A.translateXSetter=A.translateYSetter=(K,B)=>{A[B]=K,Z.style[B==="translateX"?"left":"top"]=`${K}px`,A.doTransform=!0},A.opacitySetter=A.visibilitySetter=T,A.css=K=>(Y.call(A,K),K.cursor&&(Z.style.cursor=K.cursor),K.pointerEvents&&(Z.style.pointerEvents=K.pointerEvents),A),A.on=function(){return c.prototype.on.apply({element:Z,onEvents:A.onEvents},arguments),A},A.div=Z}return A.div};class w extends c{static compose(M){_(h,this.compose)&&(M.prototype.html=function(S,N,Y){return new w(this,"span").attr({text:S,x:Math.round(N),y:Math.round(Y)})})}constructor(M,S){super(M,S),this.css({position:"absolute",...M.styledMode?{}:{fontFamily:M.style.fontFamily,fontSize:M.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(M,S,N){this.xCorr=-M*N,this.yCorr=-S}css(M){let S,{element:N}=this,Y=N.tagName==="SPAN"&&M&&"width"in M,Z=Y&&M.width;return Y&&(delete M.width,this.textWidth=v(Z)||void 0,S=!0),(M==null?void 0:M.textOverflow)==="ellipsis"&&(M.whiteSpace="nowrap",M.overflow="hidden"),b(this.styles,M),m(N,M),S&&this.updateTransform(),this}htmlGetBBox(){let{element:M}=this;return{x:M.offsetLeft,y:M.offsetTop,width:M.offsetWidth,height:M.offsetHeight}}updateTransform(){var q;if(!this.added){this.alignOnAdd=!0;return}let{element:M,renderer:S,rotation:N,rotationOriginX:Y,rotationOriginY:Z,styles:K,textAlign:B="left",textWidth:F,translateX:O=0,translateY:R=0,x:L=0,y:G=0}=this,V={left:0,center:.5,right:1}[B],$=K.whiteSpace;if(m(M,{marginLeft:`${O}px`,marginTop:`${R}px`}),M.tagName==="SPAN"){let W=[N,B,M.innerHTML,F,this.textAlign].join(","),se=-(((q=this.parentGroup)==null?void 0:q.padding)*1)||0,fe,re=!1;if(F!==this.oldTextWidth){let J=this.textPxLength?this.textPxLength:(m(M,{width:"",whiteSpace:$||"nowrap"}),M.offsetWidth),ie=F||0;(ie>this.oldTextWidth||J>ie)&&(/[ \-]/.test(M.textContent||M.innerText)||M.style.textOverflow==="ellipsis")&&(m(M,{width:J>ie||N?F+"px":"auto",display:"block",whiteSpace:$||"normal"}),this.oldTextWidth=F,re=!0)}this.hasBoxWidthChanged=re,W!==this.cTT&&(fe=S.fontMetrics(M).b,g(N)&&(N!==(this.oldRotation||0)||B!==this.oldAlign)&&this.setSpanRotation(N,se,se),this.getSpanCorrection(!g(N)&&this.textPxLength||M.offsetWidth,fe,V));let{xCorr:le=0,yCorr:Se=0}=this,ye=(Y??L)-le-L-se,Ee=(Z??G)-Se-G-se;m(M,{left:`${L+le}px`,top:`${G+Se}px`,transformOrigin:`${ye}px ${Ee}px`}),this.cTT=W,this.oldRotation=N,this.oldAlign=B}}setSpanRotation(M,S,N){m(this.element,{transform:`rotate(${M}deg)`,transformOrigin:`${S}% ${N}px`})}add(M){let S,N=this.renderer.box.parentNode,Y=[];if(this.parentGroup=M,M&&!(S=M.div)){let Z=M;for(;Z;)Y.push(Z),Z=Z.parentGroup;for(let K of Y.reverse())S=k(K,N)}return(S||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(M){M!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,n.setElementHTML(this.element,M??""),this.textStr=M,this.doTransform=!0)}alignSetter(M){this.alignValue=this.textAlign=M,this.doTransform=!0}xSetter(M,S){this[S]=M,this.doTransform=!0}}let E=w.prototype;return E.visibilitySetter=E.opacitySetter=T,E.ySetter=E.rotationSetter=E.rotationOriginXSetter=E.rotationOriginYSetter=E.xSetter,w}),r(t,"Core/Axis/AxisDefaults.js",[],function(){var n,a;return(a=n||(n={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},a.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:c}=this.axis.chart;return c(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},n}),r(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,isFunction:s,objectEach:h,removeEvent:f}=n;return(a||(a={})).registerEventOptions=function(m,y){m.eventOptions=m.eventOptions||{},h(y.events,function(g,b){m.eventOptions[b]!==g&&(m.eventOptions[b]&&(f(m,b,m.eventOptions[b]),delete m.eventOptions[b]),s(g)&&(m.eventOptions[b]=g,c(m,b,g,{order:0})))})},a}),r(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{deg2rad:s}=a,{clamp:h,correctFloat:f,defined:m,destroyObjectProperties:y,extend:g,fireEvent:b,isNumber:v,merge:_,objectEach:T,pick:k}=c;return class{constructor(w,E,A,M,S){this.isNew=!0,this.isNewLabel=!0,this.axis=w,this.pos=E,this.type=A||"",this.parameters=S||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,b(this,"init"),A||M||this.addLabel()}addLabel(){let w=this,E=w.axis,A=E.options,M=E.chart,S=E.categories,N=E.logarithmic,Y=E.names,Z=w.pos,K=k(w.options&&w.options.labels,A.labels),B=E.tickPositions,F=Z===B[0],O=Z===B[B.length-1],R=(!K.step||K.step===1)&&E.tickInterval===1,L=B.info,G=w.label,V,$,q,W=this.parameters.category||(S?k(S[Z],Y[Z],Z):Z);N&&v(W)&&(W=f(N.lin2log(W))),E.dateTime&&(L?V=($=M.time.resolveDTLFormat(A.dateTimeLabelFormats[!A.grid&&L.higherRanks[Z]||L.unitName])).main:v(W)&&(V=E.dateTime.getXDateFormat(W,A.dateTimeLabelFormats||{}))),w.isFirst=F,w.isLast=O;let se={axis:E,chart:M,dateTimeLabelFormat:V,isFirst:F,isLast:O,pos:Z,tick:w,tickPositionInfo:L,value:W};b(this,"labelFormat",se);let fe=Se=>K.formatter?K.formatter.call(Se,Se):K.format?(Se.text=E.defaultLabelFormatter.call(Se),n.format(K.format,Se,M)):E.defaultLabelFormatter.call(Se),re=fe.call(se,se),le=$&&$.list;le?w.shortenLabel=function(){for(q=0;q<le.length;q++)if(g(se,{dateTimeLabelFormat:le[q]}),G.attr({text:fe.call(se,se)}),G.getBBox().width<E.getSlotWidth(w)-2*(K.padding||0))return;G.attr({text:""})}:w.shortenLabel=void 0,R&&E._addedPlotLB&&w.moveLabel(re,K),m(G)||w.movedLabel?G&&G.textStr!==re&&!R&&(!G.textWidth||K.style.width||G.styles.width||G.css({width:null}),G.attr({text:re}),G.textPxLength=G.getBBox().width):(w.label=G=w.createLabel(re,K),w.rotation=0)}createLabel(w,E,A){let M=this.axis,S=M.chart,N=m(w)&&E.enabled?S.renderer.text(w,A==null?void 0:A.x,A==null?void 0:A.y,E.useHTML).add(M.labelGroup):void 0;return N&&(S.styledMode||N.css(_(E.style)),N.textPxLength=N.getBBox().width),N}destroy(){y(this,this.axis)}getPosition(w,E,A,M){let S=this.axis,N=S.chart,Y=M&&N.oldChartHeight||N.chartHeight,Z={x:w?f(S.translate(E+A,void 0,void 0,M)+S.transB):S.left+S.offset+(S.opposite?(M&&N.oldChartWidth||N.chartWidth)-S.right-S.left:0),y:w?Y-S.bottom+S.offset-(S.opposite?S.height:0):f(Y-S.translate(E+A,void 0,void 0,M)-S.transB)};return Z.y=h(Z.y,-1e9,1e9),b(this,"afterGetPosition",{pos:Z}),Z}getLabelPosition(w,E,A,M,S,N,Y,Z){let K,B,F=this.axis,O=F.transA,R=F.isLinked&&F.linkedParent?F.linkedParent.reversed:F.reversed,L=F.staggerLines,G=F.tickRotCorr||{x:0,y:0},V=M||F.reserveSpaceDefault?0:-F.labelOffset*(F.labelAlign==="center"?.5:1),$=S.distance,q={};return K=F.side===0?A.rotation?-$:-A.getBBox().height:F.side===2?G.y+$:Math.cos(A.rotation*s)*(G.y-A.getBBox(!1,0).height/2),m(S.y)&&(K=F.side===0&&F.horiz?S.y+K:S.y),w=w+k(S.x,[0,1,0,-1][F.side]*$)+V+G.x-(N&&M?N*O*(R?-1:1):0),E=E+K-(N&&!M?N*O*(R?1:-1):0),L&&(B=Y/(Z||1)%L,F.opposite&&(B=L-B-1),E+=B*(F.labelOffset/L)),q.x=w,q.y=Math.round(E),b(this,"afterGetLabelPosition",{pos:q,tickmarkOffset:N,index:Y}),q}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(w,E,A,M,S=!1,N){return N.crispLine([["M",w,E],["L",w+(S?0:-A),E+(S?A:0)]],M)}handleOverflow(w){let E=this.axis,A=E.options.labels,M=w.x,S=E.chart.chartWidth,N=E.chart.spacing,Y=k(E.labelLeft,Math.min(E.pos,N[3])),Z=k(E.labelRight,Math.max(E.isRadial?0:E.pos+E.len,S-N[1])),K=this.label,B=this.rotation,F={left:0,center:.5,right:1}[E.labelAlign||K.attr("align")],O=K.getBBox().width,R=E.getSlotWidth(this),L={},G=R,V=1,$,q,W;B||A.overflow!=="justify"?B<0&&M-F*O<Y?W=Math.round(M/Math.cos(B*s)-Y):B>0&&M+F*O>Z&&(W=Math.round((S-M)/Math.cos(B*s))):($=M-F*O,q=M+(1-F)*O,$<Y?G=w.x+G*(1-F)-Y:q>Z&&(G=Z-w.x+G*F,V=-1),(G=Math.min(R,G))<R&&E.labelAlign==="center"&&(w.x+=V*(R-G-F*(R-Math.min(O,G)))),(O>G||E.autoRotation&&(K.styles||{}).width)&&(W=G)),W&&(this.shortenLabel?this.shortenLabel():(L.width=Math.floor(W)+"px",(A.style||{}).textOverflow||(L.textOverflow="ellipsis"),K.css(L)))}moveLabel(w,E){let A=this,M=A.label,S=A.axis,N=!1,Y;M&&M.textStr===w?(A.movedLabel=M,N=!0,delete A.label):T(S.ticks,function(Z){N||Z.isNew||Z===A||!Z.label||Z.label.textStr!==w||(A.movedLabel=Z.label,N=!0,Z.labelPos=A.movedLabel.xy,delete Z.label)}),!N&&(A.labelPos||M)&&(Y=A.labelPos||M.xy,A.movedLabel=A.createLabel(w,E,Y),A.movedLabel&&A.movedLabel.attr({opacity:0}))}render(w,E,A){let M=this.axis,S=M.horiz,N=this.pos,Y=k(this.tickmarkOffset,M.tickmarkOffset),Z=this.getPosition(S,N,Y,E),K=Z.x,B=Z.y,F=M.pos,O=F+M.len,R=S?K:B;!M.chart.polar&&this.isNew&&(f(R)<F||R>O)&&(A=0);let L=k(A,this.label&&this.label.newOpacity,1);A=k(A,1),this.isActive=!0,this.renderGridLine(E,A),this.renderMark(Z,A),this.renderLabel(Z,E,L,w),this.isNew=!1,b(this,"afterRender")}renderGridLine(w,E){let A=this.axis,M=A.options,S={},N=this.pos,Y=this.type,Z=k(this.tickmarkOffset,A.tickmarkOffset),K=A.chart.renderer,B=this.gridLine,F,O=M.gridLineWidth,R=M.gridLineColor,L=M.gridLineDashStyle;this.type==="minor"&&(O=M.minorGridLineWidth,R=M.minorGridLineColor,L=M.minorGridLineDashStyle),B||(A.chart.styledMode||(S.stroke=R,S["stroke-width"]=O||0,S.dashstyle=L),Y||(S.zIndex=1),w&&(E=0),this.gridLine=B=K.path().attr(S).addClass("highcharts-"+(Y?Y+"-":"")+"grid-line").add(A.gridGroup)),B&&(F=A.getPlotLinePath({value:N+Z,lineWidth:B.strokeWidth(),force:"pass",old:w,acrossPanes:!1}))&&B[w||this.isNew?"attr":"animate"]({d:F,opacity:E})}renderMark(w,E){let A=this.axis,M=A.options,S=A.chart.renderer,N=this.type,Y=A.tickSize(N?N+"Tick":"tick"),Z=w.x,K=w.y,B=k(M[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&A.isXAxis?1:0),F=M[N!=="minor"?"tickColor":"minorTickColor"],O=this.mark,R=!O;Y&&(A.opposite&&(Y[0]=-Y[0]),O||(this.mark=O=S.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(A.axisGroup),A.chart.styledMode||O.attr({stroke:F,"stroke-width":B})),O[R?"attr":"animate"]({d:this.getMarkPath(Z,K,Y[0],O.strokeWidth(),A.horiz,S),opacity:E}))}renderLabel(w,E,A,M){let S=this.axis,N=S.horiz,Y=S.options,Z=this.label,K=Y.labels,B=K.step,F=k(this.tickmarkOffset,S.tickmarkOffset),O=w.x,R=w.y,L=!0;Z&&v(O)&&(Z.xy=w=this.getLabelPosition(O,R,Z,N,K,F,M,B),(!this.isFirst||this.isLast||Y.showFirstLabel)&&(!this.isLast||this.isFirst||Y.showLastLabel)?!N||K.step||K.rotation||E||A===0||this.handleOverflow(w):L=!1,B&&M%B&&(L=!1),L&&v(w.y)?(w.opacity=A,Z[this.isNewLabel?"attr":"animate"](w).show(!0),this.isNewLabel=!1):(Z.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let w=this.label,E=this.axis;w&&!this.isNew&&(w.animate({opacity:0},void 0,w.destroy),delete this.label),E.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),r(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y){let{animObject:g}=n,{xAxis:b,yAxis:v}=a,{defaultOptions:_}=s,{registerEventOptions:T}=h,{deg2rad:k}=f,{arrayMax:w,arrayMin:E,clamp:A,correctFloat:M,defined:S,destroyObjectProperties:N,erase:Y,error:Z,extend:K,fireEvent:B,getClosestDistance:F,insertItem:O,isArray:R,isNumber:L,isString:G,merge:V,normalizeTickInterval:$,objectEach:q,pick:W,relativeLength:se,removeEvent:fe,splat:re,syncTimeout:le}=y,Se=(Ee,J)=>$(J,void 0,void 0,W(Ee.options.allowDecimals,J<.5||Ee.tickAmount!==void 0),!!Ee.tickAmount);K(_,{xAxis:b,yAxis:V(b,v)});class ye{constructor(J,ie,oe){this.init(J,ie,oe)}init(J,ie,oe=this.coll){let we=oe==="xAxis",ee=this.isZAxis||(J.inverted?!we:we);this.chart=J,this.horiz=ee,this.isXAxis=we,this.coll=oe,B(this,"init",{userOptions:ie}),this.opposite=W(ie.opposite,this.opposite),this.side=W(ie.side,this.side,ee?this.opposite?0:2:this.opposite?1:3),this.setOptions(ie);let ae=this.options,ue=ae.labels;this.type??(this.type=ae.type||"linear"),this.uniqueNames??(this.uniqueNames=ae.uniqueNames??!0),B(this,"afterSetType"),this.userOptions=ie,this.minPixelPadding=0,this.reversed=W(ae.reversed,this.reversed),this.visible=ae.visible,this.zoomEnabled=ae.zoomEnabled,this.hasNames=this.type==="category"||ae.categories===!0,this.categories=R(ae.categories)&&ae.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=S(ae.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=ae.minRange||ae.maxZoom,this.range=ae.range,this.offset=ae.offset||0,this.max=void 0,this.min=void 0;let ve=W(ae.crosshair,re(J.options.tooltip.crosshairs)[we?0:1]);this.crosshair=ve===!0?{}:ve,J.axes.indexOf(this)===-1&&(we?J.axes.splice(J.xAxis.length,0,this):J.axes.push(this),O(this,J[this.coll])),J.orderItems(this.coll),this.series=this.series||[],J.inverted&&!this.isZAxis&&we&&!S(this.reversed)&&(this.reversed=!0),this.labelRotation=L(ue.rotation)?ue.rotation:void 0,T(this,ae),B(this,"afterInit")}setOptions(J){let ie=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=V(ie,_[this.coll],J),B(this,"afterSetOptions",{userOptions:J})}defaultLabelFormatter(){let J=this.axis,{numberFormatter:ie}=this.chart,oe=L(this.value)?this.value:NaN,we=J.chart.time,ee=J.categories,ae=this.dateTimeLabelFormat,ue=_.lang,ve=ue.numericSymbols,Ce=ue.numericSymbolMagnitude||1e3,je=J.logarithmic?Math.abs(oe):J.tickInterval,Me=ve&&ve.length,Re,me;if(ee)me=`${this.value}`;else if(ae)me=we.dateFormat(ae,oe);else if(Me&&ve&&je>=1e3)for(;Me--&&me===void 0;)je>=(Re=Math.pow(Ce,Me+1))&&10*oe%Re==0&&ve[Me]!==null&&oe!==0&&(me=ie(oe/Re,-1)+ve[Me]);return me===void 0&&(me=Math.abs(oe)>=1e4?ie(oe,-1):ie(oe,-1,void 0,"")),me}getSeriesExtremes(){let J,ie=this;B(this,"getSeriesExtremes",null,function(){ie.hasVisibleSeries=!1,ie.dataMin=ie.dataMax=ie.threshold=void 0,ie.softThreshold=!ie.isXAxis,ie.series.forEach(oe=>{if(oe.reserveSpace()){let we=oe.options,ee,ae=we.threshold,ue,ve;if(ie.hasVisibleSeries=!0,ie.positiveValuesOnly&&0>=(ae||0)&&(ae=void 0),ie.isXAxis)(ee=oe.xData)&&ee.length&&(ee=ie.logarithmic?ee.filter(Ce=>Ce>0):ee,ue=(J=oe.getXExtremes(ee)).min,ve=J.max,L(ue)||ue instanceof Date||(ee=ee.filter(L),ue=(J=oe.getXExtremes(ee)).min,ve=J.max),ee.length&&(ie.dataMin=Math.min(W(ie.dataMin,ue),ue),ie.dataMax=Math.max(W(ie.dataMax,ve),ve)));else{let Ce=oe.applyExtremes();L(Ce.dataMin)&&(ue=Ce.dataMin,ie.dataMin=Math.min(W(ie.dataMin,ue),ue)),L(Ce.dataMax)&&(ve=Ce.dataMax,ie.dataMax=Math.max(W(ie.dataMax,ve),ve)),S(ae)&&(ie.threshold=ae),(!we.softThreshold||ie.positiveValuesOnly)&&(ie.softThreshold=!1)}}})}),B(this,"afterGetSeriesExtremes")}translate(J,ie,oe,we,ee,ae){var Ue;let ue=this.linkedParent||this,ve=we&&ue.old?ue.old.min:ue.min;if(!L(ve))return NaN;let Ce=ue.minPixelPadding,je=(ue.isOrdinal||((Ue=ue.brokenAxis)==null?void 0:Ue.hasBreaks)||ue.logarithmic&&ee)&&ue.lin2val,Me=1,Re=0,me=we&&ue.old?ue.old.transA:ue.transA,De=0;return me||(me=ue.transA),oe&&(Me*=-1,Re=ue.len),ue.reversed&&(Me*=-1,Re-=Me*(ue.sector||ue.len)),ie?(De=(J=J*Me+Re-Ce)/me+ve,je&&(De=ue.lin2val(De))):(je&&(J=ue.val2lin(J)),De=Me*(J-ve)*me+Re+Me*Ce+(L(ae)?me*ae:0),ue.isRadial||(De=M(De))),De}toPixels(J,ie){return this.translate(J,!1,!this.horiz,void 0,!0)+(ie?0:this.pos)}toValue(J,ie){return this.translate(J-(ie?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(J){let ie=this,oe=ie.chart,we=ie.left,ee=ie.top,ae=J.old,ue=J.value,ve=J.lineWidth,Ce=ae&&oe.oldChartHeight||oe.chartHeight,je=ae&&oe.oldChartWidth||oe.chartWidth,Me=ie.transB,Re=J.translatedValue,me=J.force,De,Ue,Pe,Te,Ie;function Fe(Ge,Qe,at){return me!=="pass"&&(Ge<Qe||Ge>at)&&(me?Ge=A(Ge,Qe,at):Ie=!0),Ge}let Oe={value:ue,lineWidth:ve,old:ae,force:me,acrossPanes:J.acrossPanes,translatedValue:Re};return B(this,"getPlotLinePath",Oe,function(Ge){De=Pe=(Re=A(Re=W(Re,ie.translate(ue,void 0,void 0,ae)),-1e9,1e9))+Me,Ue=Te=Ce-Re-Me,L(Re)?ie.horiz?(Ue=ee,Te=Ce-ie.bottom+(ie.options.isInternal?0:oe.scrollablePixelsY||0),De=Pe=Fe(De,we,we+ie.width)):(De=we,Pe=je-ie.right+(oe.scrollablePixelsX||0),Ue=Te=Fe(Ue,ee,ee+ie.height)):(Ie=!0,me=!1),Ge.path=Ie&&!me?void 0:oe.renderer.crispLine([["M",De,Ue],["L",Pe,Te]],ve||1)}),Oe.path}getLinearTickPositions(J,ie,oe){let we,ee,ae,ue=M(Math.floor(ie/J)*J),ve=M(Math.ceil(oe/J)*J),Ce=[];if(M(ue+J)===ue&&(ae=20),this.single)return[ie];for(we=ue;we<=ve&&(Ce.push(we),(we=M(we+J,ae))!==ee);)ee=we;return Ce}getMinorTickInterval(){let{minorTicks:J,minorTickInterval:ie}=this.options;return J===!0?W(ie,"auto"):J!==!1?ie:void 0}getMinorTickPositions(){let J=this.options,ie=this.tickPositions,oe=this.minorTickInterval,we=this.pointRangePadding||0,ee=(this.min||0)-we,ae=(this.max||0)+we,ue=ae-ee,ve=[],Ce;if(ue&&ue/oe<this.len/3){let je=this.logarithmic;if(je)this.paddedTicks.forEach(function(Me,Re,me){Re&&ve.push.apply(ve,je.getLogTickPositions(oe,me[Re-1],me[Re],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")ve=ve.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(oe),ee,ae,J.startOfWeek));else for(Ce=ee+(ie[0]-ee)%oe;Ce<=ae&&Ce!==ve[0];Ce+=oe)ve.push(Ce)}return ve.length!==0&&this.trimTicks(ve),ve}adjustForMinRange(){let J=this.options,ie=this.logarithmic,{max:oe,min:we,minRange:ee}=this,ae,ue,ve,Ce;this.isXAxis&&ee===void 0&&!ie&&(ee=S(J.min)||S(J.max)||S(J.floor)||S(J.ceiling)?null:Math.min(5*(F(this.series.map(je=>{var Me;return(je.xIncrement?(Me=je.xData)==null?void 0:Me.slice(0,2):je.xData)||[]}))||0),this.dataMax-this.dataMin)),L(oe)&&L(we)&&L(ee)&&oe-we<ee&&(ue=this.dataMax-this.dataMin>=ee,ae=(ee-oe+we)/2,ve=[we-ae,W(J.min,we-ae)],ue&&(ve[2]=ie?ie.log2lin(this.dataMin):this.dataMin),Ce=[(we=w(ve))+ee,W(J.max,we+ee)],ue&&(Ce[2]=ie?ie.log2lin(this.dataMax):this.dataMax),(oe=E(Ce))-we<ee&&(ve[0]=oe-ee,ve[1]=W(J.min,oe-ee),we=w(ve))),this.minRange=ee,this.min=we,this.max=oe}getClosest(){let J,ie;if(this.categories)ie=1;else{let oe=[];this.series.forEach(function(we){var ae;let ee=we.closestPointRange;((ae=we.xData)==null?void 0:ae.length)===1?oe.push(we.xData[0]):!we.noSharedTooltip&&S(ee)&&we.reserveSpace()&&(ie=S(ie)?Math.min(ie,ee):ee)}),oe.length&&(oe.sort((we,ee)=>we-ee),J=F([oe]))}return J&&ie?Math.min(J,ie):J||ie}nameToX(J){let ie=R(this.options.categories),oe=ie?this.categories:this.names,we=J.options.x,ee;return J.series.requireSorting=!1,S(we)||(we=this.uniqueNames&&oe?ie?oe.indexOf(J.name):W(oe.keys[J.name],-1):J.series.autoIncrement()),we===-1?!ie&&oe&&(ee=oe.length):ee=we,ee!==void 0?(this.names[ee]=J.name,this.names.keys[J.name]=ee):J.x&&(ee=J.x),ee}updateNames(){let J=this,ie=this.names;ie.length>0&&(Object.keys(ie.keys).forEach(function(oe){delete ie.keys[oe]}),ie.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(oe=>{oe.xIncrement=null,(!oe.points||oe.isDirtyData)&&(J.max=Math.max(J.max,oe.xData.length-1),oe.processData(),oe.generatePoints()),oe.data.forEach(function(we,ee){let ae;we!=null&&we.options&&we.name!==void 0&&(ae=J.nameToX(we))!==void 0&&ae!==we.x&&(we.x=ae,oe.xData[ee]=ae)})}))}setAxisTranslation(){let J=this,ie=J.max-J.min,oe=J.linkedParent,we=!!J.categories,ee=J.isXAxis,ae=J.axisPointRange||0,ue,ve=0,Ce=0,je,Me=J.transA;(ee||we||ae)&&(ue=J.getClosest(),oe?(ve=oe.minPointOffset,Ce=oe.pointRangePadding):J.series.forEach(function(Re){let me=we?1:ee?W(Re.options.pointRange,ue,0):J.axisPointRange||0,De=Re.options.pointPlacement;if(ae=Math.max(ae,me),!J.single||we){let Ue=Re.is("xrange")?!ee:ee;ve=Math.max(ve,Ue&&G(De)?0:me/2),Ce=Math.max(Ce,Ue&&De==="on"?0:me)}}),je=J.ordinal&&J.ordinal.slope&&ue?J.ordinal.slope/ue:1,J.minPointOffset=ve*=je,J.pointRangePadding=Ce*=je,J.pointRange=Math.min(ae,J.single&&we?1:ie),ee&&ue&&(J.closestPointRange=ue)),J.translationSlope=J.transA=Me=J.staticScale||J.len/(ie+Ce||1),J.transB=J.horiz?J.left:J.bottom,J.minPixelPadding=Me*ve,B(this,"afterSetAxisTranslation")}minFromRange(){let{max:J,min:ie}=this;return L(J)&&L(ie)&&J-ie||void 0}setTickInterval(J){var St,kt,ii,fi;let{categories:ie,chart:oe,dataMax:we,dataMin:ee,dateTime:ae,isXAxis:ue,logarithmic:ve,options:Ce,softThreshold:je}=this,Me=L(this.threshold)?this.threshold:void 0,Re=this.minRange||0,{ceiling:me,floor:De,linkedTo:Ue,softMax:Pe,softMin:Te}=Ce,Ie=L(Ue)&&((St=oe[this.coll])==null?void 0:St[Ue]),Fe=Ce.tickPixelInterval,Oe=Ce.maxPadding,Ge=Ce.minPadding,Qe=0,at,rt=L(Ce.tickInterval)&&Ce.tickInterval>=0?Ce.tickInterval:void 0,dt,gt,Tt,Nt;if(ae||ie||Ie||this.getTickAmount(),Tt=W(this.userMin,Ce.min),Nt=W(this.userMax,Ce.max),Ie?(this.linkedParent=Ie,at=Ie.getExtremes(),this.min=W(at.min,at.dataMin),this.max=W(at.max,at.dataMax),this.type!==Ie.type&&Z(11,!0,oe)):(je&&S(Me)&&L(we)&&L(ee)&&(ee>=Me?(dt=Me,Ge=0):we<=Me&&(gt=Me,Oe=0)),this.min=W(Tt,dt,ee),this.max=W(Nt,gt,we)),L(this.max)&&L(this.min)&&(ve&&(this.positiveValuesOnly&&!J&&0>=Math.min(this.min,W(ee,this.min))&&Z(10,!0,oe),this.min=M(ve.log2lin(this.min),16),this.max=M(ve.log2lin(this.max),16)),this.range&&L(ee)&&(this.userMin=this.min=Tt=Math.max(ee,this.minFromRange()||0),this.userMax=Nt=this.max,this.range=void 0)),B(this,"foundExtremes"),this.adjustForMinRange(),L(this.min)&&L(this.max)){if(!L(this.userMin)&&L(Te)&&Te<this.min&&(this.min=Tt=Te),!L(this.userMax)&&L(Pe)&&Pe>this.max&&(this.max=Nt=Pe),ie||this.axisPointRange||(kt=this.stacking)!=null&&kt.usePercentage||Ie||!(Qe=this.max-this.min)||(!S(Tt)&&Ge&&(this.min-=Qe*Ge),S(Nt)||!Oe||(this.max+=Qe*Oe)),!L(this.userMin)&&L(De)&&(this.min=Math.max(this.min,De)),!L(this.userMax)&&L(me)&&(this.max=Math.min(this.max,me)),je&&L(ee)&&L(we)){let Gt=Me||0;!S(Tt)&&this.min<Gt&&ee>=Gt?this.min=Ce.minRange?Math.min(Gt,this.max-Re):Gt:!S(Nt)&&this.max>Gt&&we<=Gt&&(this.max=Ce.minRange?Math.max(Gt,this.min+Re):Gt)}!oe.polar&&this.min>this.max&&(S(Ce.min)?this.max=this.min:S(Ce.max)&&(this.min=this.max)),Qe=this.max-this.min}if(this.min!==this.max&&L(this.min)&&L(this.max)?Ie&&!rt&&Fe===Ie.options.tickPixelInterval?this.tickInterval=rt=Ie.tickInterval:this.tickInterval=W(rt,this.tickAmount?Qe/Math.max(this.tickAmount-1,1):void 0,ie?1:Qe*Fe/Math.max(this.len,Fe)):this.tickInterval=1,ue&&!J){let Gt=this.min!==((ii=this.old)==null?void 0:ii.min)||this.max!==((fi=this.old)==null?void 0:fi.max);this.series.forEach(function(hr){var rr;hr.forceCrop=(rr=hr.forceCropping)==null?void 0:rr.call(hr),hr.processData(Gt)}),B(this,"postProcessData",{hasExtremesChanged:Gt})}this.setAxisTranslation(),B(this,"initialAxisTranslation"),this.pointRange&&!rt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let mt=W(Ce.minTickInterval,ae&&!this.series.some(Gt=>Gt.noSharedTooltip)?this.closestPointRange:0);!rt&&this.tickInterval<mt&&(this.tickInterval=mt),ae||ve||rt||(this.tickInterval=Se(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var je,Me;let J=this.options,ie=J.tickPositions,oe=J.tickPositioner,we=this.getMinorTickInterval(),ee=!this.isPanning,ae=ee&&J.startOnTick,ue=ee&&J.endOnTick,ve=[],Ce;if(this.tickmarkOffset=this.categories&&J.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&S(this.min)&&!this.tickAmount&&(this.min%1==0||J.allowDecimals!==!1),ie)ve=ie.slice();else if(L(this.min)&&L(this.max)){if(!((je=this.ordinal)!=null&&je.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))ve=[this.min,this.max],Z(19,!1,this.chart);else if(this.dateTime)ve=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,J.units),this.min,this.max,J.startOfWeek,(Me=this.ordinal)==null?void 0:Me.positions,this.closestPointRange,!0);else if(this.logarithmic)ve=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Re=this.tickInterval,me=Re;for(;me<=2*Re&&(ve=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&ve.length>this.tickAmount);)this.tickInterval=Se(this,me*=1.1)}ve.length>this.len&&(ve=[ve[0],ve[ve.length-1]])[0]===ve[1]&&(ve.length=1),oe&&(this.tickPositions=ve,(Ce=oe.apply(this,[this.min,this.max]))&&(ve=Ce))}this.tickPositions=ve,this.minorTickInterval=we==="auto"&&this.tickInterval?this.tickInterval/J.minorTicksPerMajor:we,this.paddedTicks=ve.slice(0),this.trimTicks(ve,ae,ue),!this.isLinked&&L(this.min)&&L(this.max)&&(this.single&&ve.length<2&&!this.categories&&!this.series.some(Re=>Re.is("heatmap")&&Re.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),ie||Ce||this.adjustTickAmount()),B(this,"afterSetTickPositions")}trimTicks(J,ie,oe){let we=J[0],ee=J[J.length-1],ae=!this.isOrdinal&&this.minPointOffset||0;if(B(this,"trimTicks"),!this.isLinked){if(ie&&we!==-1/0)this.min=we;else for(;this.min-ae>J[0];)J.shift();if(oe)this.max=ee;else for(;this.max+ae<J[J.length-1];)J.pop();J.length===0&&S(we)&&!this.options.tickPositions&&J.push((ee+we)/2)}}alignToOthers(){let J,ie=this,oe=ie.chart,we=[this],ee=ie.options,ae=oe.options.chart,ue=this.coll==="yAxis"&&ae.alignThresholds,ve=[];if(ie.thresholdAlignment=void 0,(ae.alignTicks!==!1&&ee.alignTicks||ue)&&ee.startOnTick!==!1&&ee.endOnTick!==!1&&!ie.logarithmic){let Ce=Me=>{let{horiz:Re,options:me}=Me;return[Re?me.left:me.top,me.width,me.height,me.pane].join(",")},je=Ce(this);oe[this.coll].forEach(function(Me){let{series:Re}=Me;Re.length&&Re.some(me=>me.visible)&&Me!==ie&&Ce(Me)===je&&(J=!0,we.push(Me))})}if(J&&ue){we.forEach(je=>{let Me=je.getThresholdAlignment(ie);L(Me)&&ve.push(Me)});let Ce=ve.length>1?ve.reduce((je,Me)=>je+=Me,0)/ve.length:void 0;we.forEach(je=>{je.thresholdAlignment=Ce})}return J}getThresholdAlignment(J){if((!L(this.dataMin)||this!==J&&this.series.some(ie=>ie.isDirty||ie.isDirtyData))&&this.getSeriesExtremes(),L(this.threshold)){let ie=A((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(ie=1-ie),ie}}getTickAmount(){let J=this.options,ie=J.tickPixelInterval,oe=J.tickAmount;S(J.tickInterval)||oe||!(this.len<ie)||this.isRadial||this.logarithmic||!J.startOnTick||!J.endOnTick||(oe=2),!oe&&this.alignToOthers()&&(oe=Math.ceil(this.len/ie)+1),oe<4&&(this.finalTickAmt=oe,oe=5),this.tickAmount=oe}adjustTickAmount(){let J=this,{finalTickAmt:ie,max:oe,min:we,options:ee,tickPositions:ae,tickAmount:ue,thresholdAlignment:ve}=J,Ce=ae==null?void 0:ae.length,je=W(J.threshold,J.softThreshold?0:null),Me,Re,me=J.tickInterval,De,Ue=()=>ae.push(M(ae[ae.length-1]+me)),Pe=()=>ae.unshift(M(ae[0]-me));if(L(ve)&&(De=ve<.5?Math.ceil(ve*(ue-1)):Math.floor(ve*(ue-1)),ee.reversed&&(De=ue-1-De)),J.hasData()&&L(we)&&L(oe)){let Te=()=>{J.transA*=(Ce-1)/(ue-1),J.min=ee.startOnTick?ae[0]:Math.min(we,ae[0]),J.max=ee.endOnTick?ae[ae.length-1]:Math.max(oe,ae[ae.length-1])};if(L(De)&&L(J.threshold)){for(;ae[De]!==je||ae.length!==ue||ae[0]>we||ae[ae.length-1]<oe;){for(ae.length=0,ae.push(J.threshold);ae.length<ue;)ae[De]===void 0||ae[De]>J.threshold?Pe():Ue();if(me>8*J.tickInterval)break;me*=2}Te()}else if(Ce<ue){for(;ae.length<ue;)ae.length%2||we===je?Ue():Pe();Te()}if(S(ie)){for(Re=Me=ae.length;Re--;)(ie===3&&Re%2==1||ie<=2&&Re>0&&Re<Me-1)&&ae.splice(Re,1);J.finalTickAmt=void 0}}}setScale(){var ae,ue;let{coll:J,stacking:ie}=this,oe=!1,we=!1;this.series.forEach(ve=>{oe=oe||ve.isDirtyData||ve.isDirty,we=we||ve.xAxis&&ve.xAxis.isDirty||!1}),this.setAxisSize();let ee=this.len!==(this.old&&this.old.len);ee||oe||we||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(ie&&J==="yAxis"&&ie.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),ie&&J==="xAxis"&&ie.buildStacks(),this.isDirty||(this.isDirty=ee||this.min!==((ae=this.old)==null?void 0:ae.min)||this.max!==((ue=this.old)==null?void 0:ue.max))):ie&&ie.cleanStacks(),oe&&delete this.allExtremes,B(this,"afterSetScale")}setExtremes(J,ie,oe=!0,we,ee){this.series.forEach(ae=>{delete ae.kdTree}),B(this,"setExtremes",ee=K(ee,{min:J,max:ie}),ae=>{this.userMin=ae.min,this.userMax=ae.max,this.eventArgs=ae,oe&&this.chart.redraw(we)})}setAxisSize(){let J=this.chart,ie=this.options,oe=ie.offsets||[0,0,0,0],we=this.horiz,ee=this.width=Math.round(se(W(ie.width,J.plotWidth-oe[3]+oe[1]),J.plotWidth)),ae=this.height=Math.round(se(W(ie.height,J.plotHeight-oe[0]+oe[2]),J.plotHeight)),ue=this.top=Math.round(se(W(ie.top,J.plotTop+oe[0]),J.plotHeight,J.plotTop)),ve=this.left=Math.round(se(W(ie.left,J.plotLeft+oe[3]),J.plotWidth,J.plotLeft));this.bottom=J.chartHeight-ae-ue,this.right=J.chartWidth-ee-ve,this.len=Math.max(we?ee:ae,0),this.pos=we?ve:ue}getExtremes(){let J=this.logarithmic;return{min:J?M(J.lin2log(this.min)):this.min,max:J?M(J.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(J){let ie=this.logarithmic,oe=ie?ie.lin2log(this.min):this.min,we=ie?ie.lin2log(this.max):this.max;return J===null||J===-1/0?J=oe:J===1/0?J=we:oe>J?J=oe:we<J&&(J=we),this.translate(J,0,1,0,1)}autoLabelAlign(J){let ie=(W(J,0)-90*this.side+720)%360,oe={align:"center"};return B(this,"autoLabelAlign",oe,function(we){ie>15&&ie<165?we.align="right":ie>195&&ie<345&&(we.align="left")}),oe.align}tickSize(J){let ie=this.options,oe=W(ie[J==="tick"?"tickWidth":"minorTickWidth"],J==="tick"&&this.isXAxis&&!this.categories?1:0),we=ie[J==="tick"?"tickLength":"minorTickLength"],ee;oe&&we&&(ie[J+"Position"]==="inside"&&(we=-we),ee=[we,oe]);let ae={tickSize:ee};return B(this,"afterTickSize",ae),ae.tickSize}labelMetrics(){let J=this.chart.renderer,ie=this.ticks,oe=ie[Object.keys(ie)[0]]||{};return this.chart.renderer.fontMetrics(oe.label||oe.movedLabel||J.box)}unsquish(){let J=this.options.labels,ie=J.padding||0,oe=this.horiz,we=this.tickInterval,ee=this.len/(((this.categories?1:0)+this.max-this.min)/we),ae=J.rotation,ue=M(.8*this.labelMetrics().h),ve=Math.max(this.max-this.min,0),Ce=function(De){let Ue=(De+2*ie)/(ee||1);return(Ue=Ue>1?Math.ceil(Ue):1)*we>ve&&De!==1/0&&ee!==1/0&&ve&&(Ue=Math.ceil(ve/we)),M(Ue*we)},je=we,Me,Re=Number.MAX_VALUE,me;if(oe){if(!J.staggerLines&&(L(ae)?me=[ae]:ee<J.autoRotationLimit&&(me=J.autoRotation)),me){let De,Ue;for(let Pe of me)(Pe===ae||Pe&&Pe>=-90&&Pe<=90)&&(Ue=(De=Ce(Math.abs(ue/Math.sin(k*Pe))))+Math.abs(Pe/360))<Re&&(Re=Ue,Me=Pe,je=De)}}else je=Ce(.75*ue);return this.autoRotation=me,this.labelRotation=W(Me,L(ae)?ae:0),J.step?we:je}getSlotWidth(J){let ie=this.chart,oe=this.horiz,we=this.options.labels,ee=Math.max(this.tickPositions.length-(this.categories?0:1),1),ae=ie.margin[3];if(J&&L(J.slotWidth))return J.slotWidth;if(oe&&we.step<2)return we.rotation?0:(this.staggerLines||1)*this.len/ee;if(!oe){let ue=we.style.width;if(ue!==void 0)return parseInt(String(ue),10);if(ae)return ae-ie.spacing[3]}return .33*ie.chartWidth}renderUnsquish(){let J=this.chart,ie=J.renderer,oe=this.tickPositions,we=this.ticks,ee=this.options.labels,ae=ee.style,ue=this.horiz,ve=this.getSlotWidth(),Ce=Math.max(1,Math.round(ve-(ue?2*(ee.padding||0):ee.distance||0))),je={},Me=this.labelMetrics(),Re=ae.textOverflow,me,De,Ue=0,Pe,Te;if(G(ee.rotation)||(je.rotation=ee.rotation||0),oe.forEach(function(Ie){let Fe=we[Ie];Fe.movedLabel&&Fe.replaceMovedLabel(),Fe&&Fe.label&&Fe.label.textPxLength>Ue&&(Ue=Fe.label.textPxLength)}),this.maxLabelLength=Ue,this.autoRotation)Ue>Ce&&Ue>Me.h?je.rotation=this.labelRotation:this.labelRotation=0;else if(ve&&(me=Ce,!Re))for(De="clip",Te=oe.length;!ue&&Te--;)(Pe=we[oe[Te]].label)&&(Pe.styles.textOverflow==="ellipsis"?Pe.css({textOverflow:"clip"}):Pe.textPxLength>ve&&Pe.css({width:ve+"px"}),Pe.getBBox().height>this.len/oe.length-(Me.h-Me.f)&&(Pe.specificTextOverflow="ellipsis"));je.rotation&&(me=Ue>.5*J.chartHeight?.33*J.chartHeight:Ue,Re||(De="ellipsis")),this.labelAlign=ee.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(je.align=this.labelAlign),oe.forEach(function(Ie){let Fe=we[Ie],Oe=Fe&&Fe.label,Ge=ae.width,Qe={};Oe&&(Oe.attr(je),Fe.shortenLabel?Fe.shortenLabel():me&&!Ge&&ae.whiteSpace!=="nowrap"&&(me<Oe.textPxLength||Oe.element.tagName==="SPAN")?(Qe.width=me+"px",Re||(Qe.textOverflow=Oe.specificTextOverflow||De),Oe.css(Qe)):!Oe.styles.width||Qe.width||Ge||Oe.css({width:null}),delete Oe.specificTextOverflow,Fe.rotation=je.rotation)},this),this.tickRotCorr=ie.rotCorr(Me.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(J){return J.hasData()})||this.options.showEmpty&&S(this.min)&&S(this.max)}addTitle(J){let ie,oe=this.chart.renderer,we=this.horiz,ee=this.opposite,ae=this.options.title,ue=this.chart.styledMode;this.axisTitle||((ie=ae.textAlign)||(ie=(we?{low:"left",middle:"center",high:"right"}:{low:ee?"right":"left",middle:"center",high:ee?"left":"right"})[ae.align]),this.axisTitle=oe.text(ae.text||"",0,0,ae.useHTML).attr({zIndex:7,rotation:ae.rotation||0,align:ie}).addClass("highcharts-axis-title"),ue||this.axisTitle.css(V(ae.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ue||ae.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[J?"show":"hide"](J)}generateTick(J){let ie=this.ticks;ie[J]?ie[J].addLabel():ie[J]=new m(this,J)}createGroups(){let{axisParent:J,chart:ie,coll:oe,options:we}=this,ee=ie.renderer,ae=(ue,ve,Ce)=>ee.g(ue).attr({zIndex:Ce}).addClass(`highcharts-${oe.toLowerCase()}${ve} `+(this.isRadial?`highcharts-radial-axis${ve} `:"")+(we.className||"")).add(J);this.axisGroup||(this.gridGroup=ae("grid","-grid",we.gridZIndex),this.axisGroup=ae("axis","",we.zIndex),this.labelGroup=ae("axis-labels","-labels",we.labels.zIndex))}getOffset(){let J=this,{chart:ie,horiz:oe,options:we,side:ee,ticks:ae,tickPositions:ue,coll:ve}=J,Ce=ie.inverted&&!J.isZAxis?[1,0,3,2][ee]:ee,je=J.hasData(),Me=we.title,Re=we.labels,me=L(we.crossing),De=ie.axisOffset,Ue=ie.clipOffset,Pe=[-1,1,1,-1][ee],Te,Ie=0,Fe,Oe=0,Ge=0,Qe,at;if(J.showAxis=Te=je||we.showEmpty,J.staggerLines=J.horiz&&Re.staggerLines||void 0,J.createGroups(),je||J.isLinked?(ue.forEach(function(rt){J.generateTick(rt)}),J.renderUnsquish(),J.reserveSpaceDefault=ee===0||ee===2||{1:"left",3:"right"}[ee]===J.labelAlign,W(Re.reserveSpace,!me&&null,J.labelAlign==="center"||null,J.reserveSpaceDefault)&&ue.forEach(function(rt){Ge=Math.max(ae[rt].getLabelSize(),Ge)}),J.staggerLines&&(Ge*=J.staggerLines),J.labelOffset=Ge*(J.opposite?-1:1)):q(ae,function(rt,dt){rt.destroy(),delete ae[dt]}),Me!=null&&Me.text&&Me.enabled!==!1&&(J.addTitle(Te),Te&&!me&&Me.reserveSpace!==!1&&(J.titleOffset=Ie=J.axisTitle.getBBox()[oe?"height":"width"],Oe=S(Fe=Me.offset)?0:W(Me.margin,oe?5:10))),J.renderLine(),J.offset=Pe*W(we.offset,De[ee]?De[ee]+(we.margin||0):0),J.tickRotCorr=J.tickRotCorr||{x:0,y:0},at=ee===0?-J.labelMetrics().h:ee===2?J.tickRotCorr.y:0,Qe=Math.abs(Ge)+Oe,Ge&&(Qe-=at,Qe+=Pe*(oe?W(Re.y,J.tickRotCorr.y+Pe*Re.distance):W(Re.x,Pe*Re.distance))),J.axisTitleMargin=W(Fe,Qe),J.getMaxLabelDimensions&&(J.maxLabelDimensions=J.getMaxLabelDimensions(ae,ue)),ve!=="colorAxis"&&Ue){let rt=this.tickSize("tick");De[ee]=Math.max(De[ee],(J.axisTitleMargin||0)+Ie+Pe*J.offset,Qe,ue&&ue.length&&rt?rt[0]+Pe*J.offset:0);let dt=!J.axisLine||we.offset?0:J.axisLine.strokeWidth()/2;Ue[Ce]=Math.max(Ue[Ce],dt)}B(this,"afterGetOffset")}getLinePath(J){let ie=this.chart,oe=this.opposite,we=this.offset,ee=this.horiz,ae=this.left+(oe?this.width:0)+we,ue=ie.chartHeight-this.bottom-(oe?this.height:0)+we;return oe&&(J*=-1),ie.renderer.crispLine([["M",ee?this.left:ae,ee?ue:this.top],["L",ee?ie.chartWidth-this.right:ae,ee?ue:ie.chartHeight-this.bottom]],J)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(J){let ie=this.horiz,oe=this.left,we=this.top,ee=this.len,ae=this.options.title,ue=ie?oe:we,ve=this.opposite,Ce=this.offset,je=ae.x,Me=ae.y,Re=this.chart.renderer.fontMetrics(J),me=J?Math.max(J.getBBox(!1,0).height-Re.h-1,0):0,De={low:ue+(ie?0:ee),middle:ue+ee/2,high:ue+(ie?ee:0)}[ae.align],Ue=(ie?we+this.height:oe)+(ie?1:-1)*(ve?-1:1)*(this.axisTitleMargin||0)+[-me,me,Re.f,-me][this.side],Pe={x:ie?De+je:Ue+(ve?this.width:0)+Ce+je,y:ie?Ue+Me-(ve?this.height:0)+Ce:De+Me};return B(this,"afterGetTitlePosition",{titlePosition:Pe}),Pe}renderMinorTick(J,ie){let oe=this.minorTicks;oe[J]||(oe[J]=new m(this,J,"minor")),ie&&oe[J].isNew&&oe[J].render(null,!0),oe[J].render(null,!1,1)}renderTick(J,ie,oe){let we=this.isLinked,ee=this.ticks;(!we||J>=this.min&&J<=this.max||this.grid&&this.grid.isColumn)&&(ee[J]||(ee[J]=new m(this,J)),oe&&ee[J].isNew&&ee[J].render(ie,!0,-1),ee[J].render(ie))}render(){let J,ie,oe=this,we=oe.chart,ee=oe.logarithmic,ae=we.renderer,ue=oe.options,ve=oe.isLinked,Ce=oe.tickPositions,je=oe.axisTitle,Me=oe.ticks,Re=oe.minorTicks,me=oe.alternateBands,De=ue.stackLabels,Ue=ue.alternateGridColor,Pe=ue.crossing,Te=oe.tickmarkOffset,Ie=oe.axisLine,Fe=oe.showAxis,Oe=g(ae.globalAnimation);if(oe.labelEdge.length=0,oe.overlap=!1,[Me,Re,me].forEach(function(Ge){q(Ge,function(Qe){Qe.isActive=!1})}),L(Pe)){let Ge=this.isXAxis?we.yAxis[0]:we.xAxis[0],Qe=[1,-1,-1,1][this.side];if(Ge){let at=Ge.toPixels(Pe,!0);oe.horiz&&(at=Ge.len-at),oe.offset=Qe*at}}if(oe.hasData()||ve){let Ge=oe.chart.hasRendered&&oe.old&&L(oe.old.min);oe.minorTickInterval&&!oe.categories&&oe.getMinorTickPositions().forEach(function(Qe){oe.renderMinorTick(Qe,Ge)}),Ce.length&&(Ce.forEach(function(Qe,at){oe.renderTick(Qe,at,Ge)}),Te&&(oe.min===0||oe.single)&&(Me[-1]||(Me[-1]=new m(oe,-1,null,!0)),Me[-1].render(-1))),Ue&&Ce.forEach(function(Qe,at){ie=Ce[at+1]!==void 0?Ce[at+1]+Te:oe.max-Te,at%2==0&&Qe<oe.max&&ie<=oe.max+(we.polar?-Te:Te)&&(me[Qe]||(me[Qe]=new f.PlotLineOrBand(oe,{})),J=Qe+Te,me[Qe].options={from:ee?ee.lin2log(J):J,to:ee?ee.lin2log(ie):ie,color:Ue,className:"highcharts-alternate-grid"},me[Qe].render(),me[Qe].isActive=!0)}),oe._addedPlotLB||(oe._addedPlotLB=!0,(ue.plotLines||[]).concat(ue.plotBands||[]).forEach(function(Qe){oe.addPlotBandOrLine(Qe)}))}[Me,Re,me].forEach(function(Ge){let Qe=[],at=Oe.duration;q(Ge,function(rt,dt){rt.isActive||(rt.render(dt,!1,0),rt.isActive=!1,Qe.push(dt))}),le(function(){let rt=Qe.length;for(;rt--;)Ge[Qe[rt]]&&!Ge[Qe[rt]].isActive&&(Ge[Qe[rt]].destroy(),delete Ge[Qe[rt]])},Ge!==me&&we.hasRendered&&at?at:0)}),Ie&&(Ie[Ie.isPlaced?"animate":"attr"]({d:this.getLinePath(Ie.strokeWidth())}),Ie.isPlaced=!0,Ie[Fe?"show":"hide"](Fe)),je&&Fe&&(je[je.isNew?"attr":"animate"](oe.getTitlePosition(je)),je.isNew=!1),De&&De.enabled&&oe.stacking&&oe.stacking.renderStackTotals(),oe.old={len:oe.len,max:oe.max,min:oe.min,transA:oe.transA,userMax:oe.userMax,userMin:oe.userMin},oe.isDirty=!1,B(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(J){J.render()})),this.series.forEach(function(J){J.isDirty=!0})}getKeepProps(){return this.keepProps||ye.keepProps}destroy(J){let ie=this,oe=ie.plotLinesAndBands,we=this.eventOptions;if(B(this,"destroy",{keepEvents:J}),J||fe(ie),[ie.ticks,ie.minorTicks,ie.alternateBands].forEach(function(ee){N(ee)}),oe){let ee=oe.length;for(;ee--;)oe[ee].destroy()}for(let ee in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(ae){ie[ae]&&(ie[ae]=ie[ae].destroy())}),ie.plotLinesAndBandsGroups)ie.plotLinesAndBandsGroups[ee]=ie.plotLinesAndBandsGroups[ee].destroy();q(ie,function(ee,ae){ie.getKeepProps().indexOf(ae)===-1&&delete ie[ae]}),this.eventOptions=we}drawCrosshair(J,ie){let oe=this.crosshair,we=W(oe&&oe.snap,!0),ee=this.chart,ae,ue,ve,Ce=this.cross,je;if(B(this,"drawCrosshair",{e:J,point:ie}),J||(J=this.cross&&this.cross.e),oe&&(S(ie)||!we)!==!1){if(we?S(ie)&&(ue=W(this.coll!=="colorAxis"?ie.crosshairPos:null,this.isXAxis?ie.plotX:this.len-ie.plotY)):ue=J&&(this.horiz?J.chartX-this.pos:this.len-J.chartY+this.pos),S(ue)&&(je={value:ie&&(this.isXAxis?ie.x:W(ie.stackY,ie.y)),translatedValue:ue},ee.polar&&K(je,{isCrosshair:!0,chartX:J&&J.chartX,chartY:J&&J.chartY,point:ie}),ae=this.getPlotLinePath(je)||null),!S(ae)){this.hideCrosshair();return}ve=this.categories&&!this.isRadial,Ce||(this.cross=Ce=ee.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(ve?"category ":"thin ")+(oe.className||"")).attr({zIndex:W(oe.zIndex,2)}).add(),!ee.styledMode&&(Ce.attr({stroke:oe.color||(ve?c.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":W(oe.width,1)}).css({"pointer-events":"none"}),oe.dashStyle&&Ce.attr({dashstyle:oe.dashStyle}))),Ce.show().attr({d:ae}),ve&&!oe.width&&Ce.attr({"stroke-width":this.transA}),this.cross.e=J}else this.hideCrosshair();B(this,"afterDrawCrosshair",{e:J,point:ie})}hideCrosshair(){this.cross&&this.cross.hide(),B(this,"afterHideCrosshair")}update(J,ie){let oe=this.chart;J=V(this.userOptions,J),this.destroy(!0),this.init(oe,J),oe.isDirtyBox=!0,W(ie,!0)&&oe.redraw()}remove(J){let ie=this.chart,oe=this.coll,we=this.series,ee=we.length;for(;ee--;)we[ee]&&we[ee].remove(!1);Y(ie.axes,this),Y(ie[oe]||[],this),ie.orderItems(oe),this.destroy(),ie.isDirtyBox=!0,W(J,!0)&&ie.redraw()}setTitle(J,ie){this.update({title:J},ie)}setCategories(J,ie){this.update({categories:J},ie)}}return ye.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],ye}),r(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,getMagnitude:s,normalizeTickInterval:h,timeUnits:f}=n;return function(m){function y(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function g(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new b(this))}m.compose=function(v){return v.keepProps.includes("dateTime")||(v.keepProps.push("dateTime"),v.prototype.getTimeTicks=y,c(v,"afterSetType",g)),v};class b{constructor(_){this.axis=_}normalizeTimeTickInterval(_,T){let k=T||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],w=k[k.length-1],E=f[w[0]],A=w[1],M;for(M=0;M<k.length&&(E=f[(w=k[M])[0]],A=w[1],!k[M+1]||!(_<=(E*A[A.length-1]+f[k[M+1][0]])/2));M++);E===f.year&&_<5*E&&(A=[1,2,5]);let S=h(_/E,A,w[0]==="year"?Math.max(s(_/E),1):1);return{unitRange:E,count:S,unitName:w[0]}}getXDateFormat(_,T){let{axis:k}=this,w=k.chart.time;return k.closestPointRange?w.getDateFormat(k.closestPointRange,_,k.options.startOfWeek,T)||w.resolveDTLFormat(T.year).main:w.resolveDTLFormat(T.day).main}}m.Additions=b}(a||(a={})),a}),r(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,normalizeTickInterval:s,pick:h}=n;return function(f){function m(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new g(this))}function y(){let b=this.logarithmic;b&&(this.lin2val=function(v){return b.lin2log(v)},this.val2lin=function(v){return b.log2lin(v)})}f.compose=function(b){return b.keepProps.includes("logarithmic")||(b.keepProps.push("logarithmic"),c(b,"afterSetType",m),c(b,"afterInit",y)),b};class g{constructor(v){this.axis=v}getLogTickPositions(v,_,T,k){let w=this.axis,E=w.len,A=w.options,M=[];if(k||(this.minorAutoInterval=void 0),v>=.5)v=Math.round(v),M=w.getLinearTickPositions(v,_,T);else if(v>=.08){let S,N,Y,Z,K,B,F,O=Math.floor(_);for(S=v>.3?[1,2,4]:v>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=O;N<T+1&&!F;N++)for(Y=0,Z=S.length;Y<Z&&!F;Y++)(K=this.log2lin(this.lin2log(N)*S[Y]))>_&&(!k||B<=T)&&B!==void 0&&M.push(B),B>T&&(F=!0),B=K}else{let S=this.lin2log(_),N=this.lin2log(T),Y=k?w.getMinorTickInterval():A.tickInterval,Z=A.tickPixelInterval/(k?5:1),K=k?E/w.tickPositions.length:E;v=s(v=h(Y==="auto"?null:Y,this.minorAutoInterval,(N-S)*Z/(K||1))),M=w.getLinearTickPositions(v,S,N).map(this.log2lin),k||(this.minorAutoInterval=v/5)}return k||(w.tickInterval=v),M}lin2log(v){return Math.pow(10,v)}log2lin(v){return Math.log(v)/Math.LN10}}f.Additions=g}(a||(a={})),a}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{erase:c,extend:s,isNumber:h}=n;return function(f){let m;function y(w){return this.addPlotBandOrLine(w,"plotBands")}function g(w,E){let A=this.userOptions,M=new m(this,w);if(this.visible&&(M=M.render()),M){if(this._addedPlotLB||(this._addedPlotLB=!0,(A.plotLines||[]).concat(A.plotBands||[]).forEach(S=>{this.addPlotBandOrLine(S)})),E){let S=A[E]||[];S.push(w),A[E]=S}this.plotLinesAndBands.push(M)}return M}function b(w){return this.addPlotBandOrLine(w,"plotLines")}function v(w,E,A){A=A||this.options;let M=this.getPlotLinePath({value:E,force:!0,acrossPanes:A.acrossPanes}),S=[],N=this.horiz,Y=!h(this.min)||!h(this.max)||w<this.min&&E<this.min||w>this.max&&E>this.max,Z=this.getPlotLinePath({value:w,force:!0,acrossPanes:A.acrossPanes}),K,B=1,F;if(Z&&M)for(Y&&(F=Z.toString()===M.toString(),B=0),K=0;K<Z.length;K+=2){let O=Z[K],R=Z[K+1],L=M[K],G=M[K+1];(O[0]==="M"||O[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&L[1]===O[1]?(L[1]+=B,G[1]+=B):N||L[2]!==O[2]||(L[2]+=B,G[2]+=B),S.push(["M",O[1],O[2]],["L",R[1],R[2]],["L",G[1],G[2]],["L",L[1],L[2]],["Z"])),S.isFlat=F}return S}function _(w){this.removePlotBandOrLine(w)}function T(w){let E=this.plotLinesAndBands,A=this.options,M=this.userOptions;if(E){let S=E.length;for(;S--;)E[S].id===w&&E[S].destroy();[A.plotLines||[],M.plotLines||[],A.plotBands||[],M.plotBands||[]].forEach(function(N){for(S=N.length;S--;)(N[S]||{}).id===w&&c(N,N[S])})}}function k(w){this.removePlotBandOrLine(w)}f.compose=function(w,E){let A=E.prototype;return A.addPlotBand||(m=w,s(A,{addPlotBand:y,addPlotLine:b,addPlotBandOrLine:g,getPlotBandPath:v,removePlotBand:_,removePlotLine:k,removePlotBandOrLine:T})),E}}(a||(a={})),a}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(n,a){let{addEvent:c,arrayMax:s,arrayMin:h,defined:f,destroyObjectProperties:m,erase:y,fireEvent:g,merge:b,objectEach:v,pick:_}=a;class T{static compose(w,E){return c(w,"afterInit",function(){this.labelCollectors.push(()=>{var M;let A=[];for(let S of this.axes)for(let{label:N,options:Y}of S.plotLinesAndBands)N&&!((M=Y==null?void 0:Y.label)!=null&&M.allowOverlap)&&A.push(N);return A})}),n.compose(T,E)}constructor(w,E){this.axis=w,this.options=E,this.id=E.id}render(){g(this,"render");let{axis:w,options:E}=this,{horiz:A,logarithmic:M}=w,{color:S,events:N,zIndex:Y=0}=E,Z={},K=w.chart.renderer,B=E.to,F=E.from,O=E.value,R=E.borderWidth,L=E.label,{label:G,svgElem:V}=this,$=[],q,W=f(F)&&f(B),se=f(O),fe=!V,re={class:"highcharts-plot-"+(W?"band ":"line ")+(E.className||"")},le=W?"bands":"lines";if(!w.chart.styledMode&&(se?(re.stroke=S||"#999999",re["stroke-width"]=_(E.width,1),E.dashStyle&&(re.dashstyle=E.dashStyle)):W&&(re.fill=S||"#e6e9ff",R&&(re.stroke=E.borderColor,re["stroke-width"]=R))),Z.zIndex=Y,le+="-"+Y,(q=w.plotLinesAndBandsGroups[le])||(w.plotLinesAndBandsGroups[le]=q=K.g("plot-"+le).attr(Z).add()),V||(this.svgElem=V=K.path().attr(re).add(q)),f(O))$=w.getPlotLinePath({value:(M==null?void 0:M.log2lin(O))??O,lineWidth:V.strokeWidth(),acrossPanes:E.acrossPanes});else{if(!(f(F)&&f(B)))return;$=w.getPlotBandPath((M==null?void 0:M.log2lin(F))??F,(M==null?void 0:M.log2lin(B))??B,E)}return!this.eventsAdded&&N&&(v(N,(Se,ye)=>{V==null||V.on(ye,Ee=>{N[ye].apply(this,[Ee])})}),this.eventsAdded=!0),(fe||!V.d)&&($!=null&&$.length)?V.attr({d:$}):V&&($?(V.show(),V.animate({d:$})):V.d&&(V.hide(),G&&(this.label=G=G.destroy()))),L&&(f(L.text)||f(L.formatter))&&($!=null&&$.length)&&w.width>0&&w.height>0&&!$.isFlat?(L=b({align:A&&W?"center":void 0,x:A?!W&&4:10,verticalAlign:!A&&W?"middle":void 0,y:A?W?16:10:W?6:-4,rotation:A&&!W?90:0,...W?{inside:!0}:{}},L),this.renderLabel(L,$,W,Y)):G&&G.hide(),this}renderLabel(w,E,A,M){var L;let S=this.axis,N=S.chart.renderer,Y=w.inside,Z=this.label;Z||(this.label=Z=N.text(this.getLabelText(w),0,0,w.useHTML).attr({align:w.textAlign||w.align,rotation:w.rotation,class:"highcharts-plot-"+(A?"band":"line")+"-label "+(w.className||""),zIndex:M}),S.chart.styledMode||Z.css(b({fontSize:"0.8em",textOverflow:A&&!Y?"":"ellipsis"},w.style)),Z.add());let K=E.xBounds||[E[0][1],E[1][1],A?E[2][1]:E[0][1]],B=E.yBounds||[E[0][2],E[1][2],A?E[2][2]:E[0][2]],F=h(K),O=h(B),R=s(K)-F;Z.align(w,!1,{x:F,y:O,width:R,height:s(B)-O}),(!Z.alignValue||Z.alignValue==="left"||f(Y))&&Z.css({width:(((L=w.style)==null?void 0:L.width)||(A&&Y?R:Z.rotation===90?S.height-(Z.alignAttr.y-S.top):(w.clip?S.width:S.chart.chartWidth)-(Z.alignAttr.x-S.left)))+"px"}),Z.show(!0)}getLabelText(w){return f(w.formatter)?w.formatter.call(this):w.text}destroy(){y(this.axis.plotLinesAndBands,this),delete this.axis,m(this)}}return T}),r(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f){var m;let{animObject:y}=n,{format:g}=a,{composed:b,doc:v,isSafari:_}=c,{distribute:T}=s,{addEvent:k,clamp:w,css:E,discardElement:A,extend:M,fireEvent:S,isArray:N,isNumber:Y,isString:Z,merge:K,pick:B,pushUnique:F,splat:O,syncTimeout:R}=f;class L{constructor(V,$,q){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=V,this.init(V,$),this.pointer=q}bodyFormatter(V){return V.map(function($){let q=$.series.tooltipOptions;return(q[($.point.formatPrefix||"point")+"Formatter"]||$.point.tooltipFormatter).call($.point,q[($.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(V){this.chart.series.forEach(function($){let q=$&&$.tt;q&&(!q.isActive||V?$.tt=q.destroy():q.isActive=!1)})}defaultFormatter(V){let $,q=this.points||O(this);return($=($=[V.tooltipFooterHeaderFormatter(q[0])]).concat(V.bodyFormatter(q))).push(V.tooltipFooterHeaderFormatter(q[0],!0)),$}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),A(this.container)),f.clearTimeout(this.hideTimer)}getAnchor(V,$){let q,{chart:W,pointer:se}=this,fe=W.inverted,re=W.plotTop,le=W.plotLeft;if((V=O(V))[0].series&&V[0].series.yAxis&&!V[0].series.yAxis.options.reversedStacks&&(V=V.slice().reverse()),this.followPointer&&$)$.chartX===void 0&&($=se.normalize($)),q=[$.chartX-le,$.chartY-re];else if(V[0].tooltipPos)q=V[0].tooltipPos;else{let Se=0,ye=0;V.forEach(function(Ee){let J=Ee.pos(!0);J&&(Se+=J[0],ye+=J[1])}),Se/=V.length,ye/=V.length,this.shared&&V.length>1&&$&&(fe?Se=$.chartX:ye=$.chartY),q=[Se-le,ye-re]}return q.map(Math.round)}getClassName(V,$,q){let W=this.options,se=V.series,fe=se.options;return[W.className,"highcharts-label",q&&"highcharts-tooltip-header",$?"highcharts-tooltip-box":"highcharts-tooltip",!q&&"highcharts-color-"+B(V.colorIndex,se.colorIndex),fe&&fe.className].filter(Z).join(" ")}getLabel({anchorX:V,anchorY:$}={anchorX:0,anchorY:0}){let q=this,W=this.chart.styledMode,se=this.options,fe=this.split&&this.allowShared,re=this.container,le=this.chart.renderer;if(this.label){let Se=!this.label.hasClass("highcharts-label");(!fe&&Se||fe&&!Se)&&this.destroy()}if(!this.label){if(this.outside){let Se=this.chart.options.chart.style,ye=h.getRendererType();this.container=re=c.doc.createElement("div"),re.className="highcharts-tooltip-container",E(re,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(Se&&Se.zIndex||0)+3)}),this.renderer=le=new ye(re,0,0,Se,void 0,void 0,le.styledMode)}if(fe?this.label=le.g("tooltip"):(this.label=le.label("",V,$,se.shape,void 0,void 0,se.useHTML,void 0,"tooltip").attr({padding:se.padding,r:se.borderRadius}),W||this.label.attr({fill:se.backgroundColor,"stroke-width":se.borderWidth||0}).css(se.style).css({pointerEvents:se.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),q.outside){let Se=this.label;[Se.xSetter,Se.ySetter].forEach((ye,Ee)=>{Se[Ee?"ySetter":"xSetter"]=J=>{ye.call(Se,q.distance),Se[Ee?"y":"x"]=J,re&&(re.style[Ee?"top":"left"]=`${J}px`)}})}this.label.attr({zIndex:8}).shadow(se.shadow).add()}return re&&!re.parentElement&&c.doc.body.appendChild(re),this.label}getPlayingField(){let{body:V,documentElement:$}=v,{chart:q,distance:W,outside:se}=this;return{width:se?Math.max(V.scrollWidth,$.scrollWidth,V.offsetWidth,$.offsetWidth,$.clientWidth)-2*W:q.chartWidth,height:se?Math.max(V.scrollHeight,$.scrollHeight,V.offsetHeight,$.offsetHeight,$.clientHeight):q.chartHeight}}getPosition(V,$,q){var Oe,Ge;let{distance:W,chart:se,outside:fe,pointer:re}=this,{inverted:le,plotLeft:Se,plotTop:ye,polar:Ee}=se,{plotX:J=0,plotY:ie=0}=q,oe={},we=le&&q.h||0,{height:ee,width:ae}=this.getPlayingField(),ue=re.getChartPosition(),ve=Qe=>Qe*ue.scaleX,Ce=Qe=>Qe*ue.scaleY,je=Qe=>{let at=Qe==="x";return[Qe,at?ae:ee,at?V:$].concat(fe?[at?ve(V):Ce($),at?ue.left-W+ve(J+Se):ue.top-W+Ce(ie+ye),0,at?ae:ee]:[at?V:$,at?J+Se:ie+ye,at?Se:ye,at?Se+se.plotWidth:ye+se.plotHeight])},Me=je("y"),Re=je("x"),me,De=!!q.negative;!Ee&&((Ge=(Oe=se.hoverSeries)==null?void 0:Oe.yAxis)!=null&&Ge.reversed)&&(De=!De);let Ue=!this.followPointer&&B(q.ttBelow,!Ee&&!le===De),Pe=function(Qe,at,rt,dt,gt,Tt,Nt){let mt=fe?Qe==="y"?Ce(W):ve(W):W,St=(rt-dt)/2,kt=dt<gt-W,ii=gt+W+dt<at,fi=gt-mt-rt+St,Gt=gt+mt-St;if(Ue&&ii)oe[Qe]=Gt;else if(!Ue&&kt)oe[Qe]=fi;else if(kt)oe[Qe]=Math.min(Nt-dt,fi-we<0?fi:fi-we);else{if(!ii)return!1;oe[Qe]=Math.max(Tt,Gt+we+rt>at?Gt:Gt+we)}},Te=function(Qe,at,rt,dt,gt){if(gt<W||gt>at-W)return!1;gt<rt/2?oe[Qe]=1:gt>at-dt/2?oe[Qe]=at-dt-2:oe[Qe]=gt-rt/2},Ie=function(Qe){[Me,Re]=[Re,Me],me=Qe},Fe=()=>{Pe.apply(0,Me)!==!1?Te.apply(0,Re)!==!1||me||(Ie(!0),Fe()):me?oe.x=oe.y=0:(Ie(!0),Fe())};return(le&&!Ee||this.len>1)&&Ie(),Fe(),oe}hide(V){let $=this;f.clearTimeout(this.hideTimer),V=B(V,this.options.hideDelay),this.isHidden||(this.hideTimer=R(function(){let q=$.getLabel();$.getLabel().animate({opacity:0},{duration:V&&150,complete:()=>{q.hide(),$.container&&$.container.remove()}}),$.isHidden=!0},V))}init(V,$){this.chart=V,this.options=$,this.crosshairs=[],this.isHidden=!0,this.split=$.split&&!V.inverted&&!V.polar,this.shared=$.shared||this.split,this.outside=B($.outside,!!(V.scrollablePixelsX||V.scrollablePixelsY))}shouldStickOnContact(V){return!!(!this.followPointer&&this.options.stickOnContact&&(!V||this.pointer.inClass(V.target,"highcharts-tooltip")))}move(V,$,q,W){let se=this,fe=y(!se.isHidden&&se.options.animation),re=se.followPointer||(se.len||0)>1,le={x:V,y:$};re||(le.anchorX=q,le.anchorY=W),fe.step=()=>se.drawTracker(),se.getLabel().animate(le,fe)}refresh(V,$){let{chart:q,options:W,pointer:se,shared:fe}=this,re=O(V),le=re[0],Se=[],ye=W.format,Ee=W.formatter||this.defaultFormatter,J=q.styledMode,ie={},oe=this.allowShared;if(!W.enabled||!le.series)return;f.clearTimeout(this.hideTimer),this.allowShared=!(!N(V)&&V.series&&V.series.noSharedTooltip),oe=oe&&!this.allowShared,this.followPointer=!this.split&&le.series.tooltipOptions.followPointer;let we=this.getAnchor(V,$),ee=we[0],ae=we[1];fe&&this.allowShared?(se.applyInactiveState(re),re.forEach(function(Ce){Ce.setState("hover"),Se.push(Ce.getLabelConfig())}),(ie=le.getLabelConfig()).points=Se):ie=le.getLabelConfig(),this.len=Se.length;let ue=Z(ye)?g(ye,ie,q):Ee.call(ie,this),ve=le.series;if(this.distance=B(ve.tooltipOptions.distance,16),ue===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ue,re);else{let Ce=ee,je=ae;if($&&se.isDirectTouch&&(Ce=$.chartX-q.plotLeft,je=$.chartY-q.plotTop),q.polar||ve.options.clip===!1||re.some(Me=>se.isDirectTouch||Me.series.shouldShowTooltip(Ce,je))){let Me=this.getLabel(oe&&this.tt||{});(!W.style.width||J)&&Me.css({width:(this.outside?this.getPlayingField():q.spacingBox).width+"px"}),Me.attr({class:this.getClassName(le),text:ue&&ue.join?ue.join(""):ue}),this.outside&&Me.attr({x:w(Me.x||0,0,this.getPlayingField().width-(Me.width||0))}),J||Me.attr({stroke:W.borderColor||le.color||ve.color||"#666666"}),this.updatePosition({plotX:ee,plotY:ae,negative:le.negative,ttBelow:le.ttBelow,h:we[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}S(this,"refresh")}renderSplit(V,$){var at;let q=this,{chart:W,chart:{chartWidth:se,chartHeight:fe,plotHeight:re,plotLeft:le,plotTop:Se,scrollablePixelsY:ye=0,scrollablePixelsX:Ee,styledMode:J},distance:ie,options:oe,options:{positioner:we},pointer:ee}=q,{scrollLeft:ae=0,scrollTop:ue=0}=((at=W.scrollablePlotArea)==null?void 0:at.scrollingContainer)||{},ve=q.outside&&typeof Ee!="number"?v.documentElement.getBoundingClientRect():{left:ae,right:ae+se},Ce=q.getLabel(),je=this.renderer||W.renderer,Me=!!(W.xAxis[0]&&W.xAxis[0].opposite),{left:Re,top:me}=ee.getChartPosition(),De=Se+ue,Ue=0,Pe=re-ye;function Te(rt,dt,gt,Tt,Nt=!0){let mt,St;return gt?(mt=Me?0:Pe,St=w(rt-Tt/2,ve.left,ve.right-Tt-(q.outside?Re:0))):(mt=dt-De,St=w(St=Nt?rt-Tt-ie:rt+ie,Nt?St:ve.left,ve.right)),{x:St,y:mt}}Z(V)&&(V=[!1,V]);let Ie=V.slice(0,$.length+1).reduce(function(rt,dt,gt){if(dt!==!1&&dt!==""){let Tt=$[gt-1]||{isHeader:!0,plotX:$[0].plotX,plotY:re,series:{}},Nt=Tt.isHeader,mt=Nt?q:Tt.series,St=mt.tt=function(hr,rr,yr){let Dr=hr,{isHeader:nr,series:vr}=rr;if(!Dr){let ht={padding:oe.padding,r:oe.borderRadius};J||(ht.fill=oe.backgroundColor,ht["stroke-width"]=oe.borderWidth??1),Dr=je.label("",0,0,oe[nr?"headerShape":"shape"],void 0,void 0,oe.useHTML).addClass(q.getClassName(rr,!0,nr)).attr(ht).add(Ce)}return Dr.isActive=!0,Dr.attr({text:yr}),J||Dr.css(oe.style).attr({stroke:oe.borderColor||rr.color||vr.color||"#333333"}),Dr}(mt.tt,Tt,dt.toString()),kt=St.getBBox(),ii=kt.width+St.strokeWidth();Nt&&(Ue=kt.height,Pe+=Ue,Me&&(De-=Ue));let{anchorX:fi,anchorY:Gt}=function(hr){let rr,yr,{isHeader:Dr,plotX:nr=0,plotY:vr=0,series:ht}=hr;if(Dr)rr=Math.max(le+nr,le),yr=Se+re/2;else{let{xAxis:bt,yAxis:Mt}=ht;rr=bt.pos+w(nr,-ie,bt.len+ie),ht.shouldShowTooltip(0,Mt.pos-Se+vr,{ignoreX:!0})&&(yr=Mt.pos+vr)}return{anchorX:rr=w(rr,ve.left-ie,ve.right+ie),anchorY:yr}}(Tt);if(typeof Gt=="number"){let hr=kt.height+1,rr=we?we.call(q,ii,hr,Tt):Te(fi,Gt,Nt,ii);rt.push({align:we?0:void 0,anchorX:fi,anchorY:Gt,boxWidth:ii,point:Tt,rank:B(rr.rank,Nt?1:0),size:hr,target:rr.y,tt:St,x:rr.x})}else St.isActive=!1}return rt},[]);!we&&Ie.some(rt=>{let{outside:dt}=q,gt=(dt?Re:0)+rt.anchorX;return gt<ve.left&&gt+rt.boxWidth<ve.right||gt<Re-ve.left+rt.boxWidth&&ve.right-gt>gt})&&(Ie=Ie.map(rt=>{let{x:dt,y:gt}=Te(rt.anchorX,rt.anchorY,rt.point.isHeader,rt.boxWidth,!1);return M(rt,{target:gt,x:dt})})),q.cleanSplit(),T(Ie,Pe);let Fe={left:Re,right:Re};Ie.forEach(function(rt){let{x:dt,boxWidth:gt,isHeader:Tt}=rt;!Tt&&(q.outside&&Re+dt<Fe.left&&(Fe.left=Re+dt),!Tt&&q.outside&&Fe.left+gt>Fe.right&&(Fe.right=Re+dt))}),Ie.forEach(function(rt){let{x:dt,anchorX:gt,anchorY:Tt,pos:Nt,point:{isHeader:mt}}=rt,St={visibility:Nt===void 0?"hidden":"inherit",x:dt,y:(Nt||0)+De,anchorX:gt,anchorY:Tt};if(q.outside&&dt<gt){let kt=Re-Fe.left;kt>0&&(mt||(St.x=dt+kt,St.anchorX=gt+kt),mt&&(St.x=(Fe.right-Fe.left)/2,St.anchorX=gt+kt))}rt.tt.attr(St)});let{container:Oe,outside:Ge,renderer:Qe}=q;if(Ge&&Oe&&Qe){let{width:rt,height:dt,x:gt,y:Tt}=Ce.getBBox();Qe.setSize(rt+gt,dt+Tt,!1),Oe.style.left=Fe.left+"px",Oe.style.top=me+"px"}_&&Ce.attr({opacity:Ce.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let V=this.chart,$=this.label,q=this.shared?V.hoverPoints:V.hoverPoint;if(!$||!q)return;let W={x:0,y:0,width:0,height:0},se=this.getAnchor(q),fe=$.getBBox();se[0]+=V.plotLeft-($.translateX||0),se[1]+=V.plotTop-($.translateY||0),W.x=Math.min(0,se[0]),W.y=Math.min(0,se[1]),W.width=se[0]<0?Math.max(Math.abs(se[0]),fe.width-se[0]):Math.max(Math.abs(se[0]),fe.width),W.height=se[1]<0?Math.max(Math.abs(se[1]),fe.height-Math.abs(se[1])):Math.max(Math.abs(se[1]),fe.height),this.tracker?this.tracker.attr(W):(this.tracker=$.renderer.rect(W).addClass("highcharts-tracker").add($),V.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(V){return V.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(V,$){let q=V.series,W=q.tooltipOptions,se=q.xAxis,fe=se&&se.dateTime,re={isFooter:$,labelConfig:V},le=W.xDateFormat,Se=W[$?"footerFormat":"headerFormat"];return S(this,"headerFormatter",re,function(ye){fe&&!le&&Y(V.key)&&(le=fe.getXDateFormat(V.key,W.dateTimeLabelFormats)),fe&&le&&(V.point&&V.point.tooltipDateKeys||["key"]).forEach(function(Ee){Se=Se.replace("{point."+Ee+"}","{point."+Ee+":"+le+"}")}),q.chart.styledMode&&(Se=this.styledModeFormat(Se)),ye.text=g(Se,{point:V,series:q},this.chart)}),re.text}update(V){this.destroy(),this.init(this.chart,K(!0,this.options,V))}updatePosition(V){let{chart:$,container:q,distance:W,options:se,pointer:fe,renderer:re}=this,{height:le=0,width:Se=0}=this.getLabel(),{left:ye,top:Ee,scaleX:J,scaleY:ie}=fe.getChartPosition(),oe=(se.positioner||this.getPosition).call(this,Se,le,V),we=(V.plotX||0)+$.plotLeft,ee=(V.plotY||0)+$.plotTop,ae;re&&q&&(se.positioner&&(oe.x+=ye-W,oe.y+=Ee-W),ae=(se.borderWidth||0)+2*W+2,re.setSize(Se+ae,le+ae,!1),(J!==1||ie!==1)&&(E(q,{transform:`scale(${J}, ${ie})`}),we*=J,ee*=ie),we+=ye-oe.x,ee+=Ee-oe.y),this.move(Math.round(oe.x),Math.round(oe.y||0),we,ee)}}return(m=L||(L={})).compose=function(G){F(b,"Core.Tooltip")&&k(G,"afterInit",function(){let V=this.chart;V.options.tooltip&&(V.tooltip=new m(V,V.options.tooltip,this))})},L}),r(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{animObject:f}=a,{defaultOptions:m}=c,{format:y}=s,{addEvent:g,crisp:b,erase:v,extend:_,fireEvent:T,getNestedProperty:k,isArray:w,isFunction:E,isNumber:A,isObject:M,merge:S,pick:N,syncTimeout:Y,removeEvent:Z,uniqueKey:K}=h;class B{animateBeforeDestroy(){let O=this,R={x:O.startXPos,opacity:0},L=O.getGraphicalProps();L.singular.forEach(function(G){O[G]=O[G].animate(G==="dataLabel"?{x:O[G].startXPos,y:O[G].startYPos,opacity:0}:R)}),L.plural.forEach(function(G){O[G].forEach(function(V){V.element&&V.animate(_({x:O.startXPos},V.startYPos?{x:V.startXPos,y:V.startYPos}:{}))})})}applyOptions(O,R){let L=this.series,G=L.options.pointValKey||L.pointValKey;return _(this,O=B.prototype.optionsToObject.call(this,O)),this.options=this.options?_(this.options,O):O,O.group&&delete this.group,O.dataLabels&&delete this.dataLabels,G&&(this.y=B.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&R===void 0&&L.xAxis&&L.xAxis.hasNames&&(this.x=L.xAxis.nameToX(this)),this.x===void 0&&L?this.x=R??L.autoIncrement():A(O.x)&&L.options.relativeXValue&&(this.x=L.autoIncrement(O.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let O=this,R=O.series,L=R.chart,G=R.options.dataSorting,V=L.hoverPoints,$=f(O.series.chart.renderer.globalAnimation),q=()=>{for(let W in(O.graphic||O.graphics||O.dataLabel||O.dataLabels)&&(Z(O),O.destroyElements()),O)delete O[W]};O.legendItem&&L.legend.destroyItem(O),V&&(O.setState(),v(V,O),V.length||(L.hoverPoints=null)),O===L.hoverPoint&&O.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),Y(q,$.duration)):q(),L.pointCount--}this.destroyed=!0}destroyElements(O){let R=this,L=R.getGraphicalProps(O);L.singular.forEach(function(G){R[G]=R[G].destroy()}),L.plural.forEach(function(G){R[G].forEach(function(V){V&&V.element&&V.destroy()}),delete R[G]})}firePointEvent(O,R,L){let G=this,V=this.series.options;G.manageEvent(O),O==="click"&&V.allowPointSelect&&(L=function($){!G.destroyed&&G.select&&G.select(null,$.ctrlKey||$.metaKey||$.shiftKey)}),T(G,O,R,L)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(O){let R,L,G=this,V=[],$={singular:[],plural:[]};for((O=O||{graphic:1,dataLabel:1}).graphic&&V.push("graphic","connector"),O.dataLabel&&V.push("dataLabel","dataLabelPath","dataLabelUpper"),L=V.length;L--;)G[R=V[L]]&&$.singular.push(R);return["graphic","dataLabel"].forEach(function(q){let W=q+"s";O[q]&&G[W]&&$.plural.push(W)}),$}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(O){return O?O.indexOf("custom.")===0?k(O,this.options):this[O]:void 0}getZone(){let O=this.series,R=O.zones,L=O.zoneAxis||"y",G,V=0;for(G=R[0];this[L]>=G.value;)G=R[++V];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(O,R,L){this.formatPrefix="point",this.visible=!0,this.series=O,this.applyOptions(R,L),this.id??(this.id=K()),this.resolveColor(),O.chart.pointCount++,T(this,"afterInit")}isValid(){return(A(this.x)||this.x instanceof Date)&&A(this.y)}optionsToObject(O){let R=this.series,L=R.options.keys,G=L||R.pointArrayMap||["y"],V=G.length,$={},q,W=0,se=0;if(A(O)||O===null)$[G[0]]=O;else if(w(O))for(!L&&O.length>V&&((q=typeof O[0])=="string"?$.name=O[0]:q==="number"&&($.x=O[0]),W++);se<V;)L&&O[W]===void 0||(G[se].indexOf(".")>0?B.prototype.setNestedProperty($,O[W],G[se]):$[G[se]]=O[W]),W++,se++;else typeof O=="object"&&($=O,O.dataLabels&&(R.hasDataLabels=()=>!0),O.marker&&(R._hasPointMarkers=!0));return $}pos(O,R=this.plotY){if(!this.destroyed){let{plotX:L,series:G}=this,{chart:V,xAxis:$,yAxis:q}=G,W=0,se=0;if(A(L)&&A(R))return O&&(W=$?$.pos:V.plotLeft,se=q?q.pos:V.plotTop),V.inverted&&$&&q?[q.len-R+se,$.len-L+W]:[L+W,R+se]}}resolveColor(){let O=this.series,R=O.chart.options.chart,L=O.chart.styledMode,G,V,$=R.colorCount,q;delete this.nonZonedColor,O.options.colorByPoint?(L||(G=(V=O.options.colors||O.chart.options.colors)[O.colorCounter],$=V.length),q=O.colorCounter,O.colorCounter++,O.colorCounter===$&&(O.colorCounter=0)):(L||(G=O.color),q=O.colorIndex),this.colorIndex=N(this.options.colorIndex,q),this.color=N(this.options.color,G)}setNestedProperty(O,R,L){return L.split(".").reduce(function(G,V,$,q){let W=q.length-1===$;return G[V]=W?R:M(G[V],!0)?G[V]:{},G[V]},O),O}shouldDraw(){return!this.isNull}tooltipFormatter(O){let R=this.series,L=R.tooltipOptions,G=N(L.valueDecimals,""),V=L.valuePrefix||"",$=L.valueSuffix||"";return R.chart.styledMode&&(O=R.chart.tooltip.styledModeFormat(O)),(R.pointArrayMap||["y"]).forEach(function(q){q="{point."+q,(V||$)&&(O=O.replace(RegExp(q+"}","g"),V+q+"}"+$)),O=O.replace(RegExp(q+"}","g"),q+":,."+G+"f}")}),y(O,{point:this,series:this.series},R.chart)}update(O,R,L,G){let V,$=this,q=$.series,W=$.graphic,se=q.chart,fe=q.options;function re(){$.applyOptions(O);let le=W&&$.hasMockGraphic,Se=$.y===null?!le:le;W&&Se&&($.graphic=W.destroy(),delete $.hasMockGraphic),M(O,!0)&&(W&&W.element&&O&&O.marker&&O.marker.symbol!==void 0&&($.graphic=W.destroy()),O!=null&&O.dataLabels&&$.dataLabel&&($.dataLabel=$.dataLabel.destroy())),V=$.index,q.updateParallelArrays($,V),fe.data[V]=M(fe.data[V],!0)||M(O,!0)?$.options:N(O,fe.data[V]),q.isDirty=q.isDirtyData=!0,!q.fixedBox&&q.hasCartesianSeries&&(se.isDirtyBox=!0),fe.legendType==="point"&&(se.isDirtyLegend=!0),R&&se.redraw(L)}R=N(R,!0),G===!1?re():$.firePointEvent("update",{options:O},re)}remove(O,R){this.series.removePoint(this.series.data.indexOf(this),O,R)}select(O,R){let L=this,G=L.series,V=G.chart;O=N(O,!L.selected),this.selectedStaging=O,L.firePointEvent(O?"select":"unselect",{accumulate:R},function(){L.selected=L.options.selected=O,G.options.data[G.data.indexOf(L)]=L.options,L.setState(O&&"select"),R||V.getSelectedPoints().forEach(function($){let q=$.series;$.selected&&$!==L&&($.selected=$.options.selected=!1,q.options.data[q.data.indexOf($)]=$.options,$.setState(V.hoverPoints&&q.options.inactiveOtherPoints?"inactive":""),$.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(O){let{inverted:R,pointer:L}=this.series.chart;L&&(O=O?L.normalize(O):L.getChartCoordinatesFromPoint(this,R),L.runPointActions(O,this))}onMouseOut(){let O=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(O.hoverPoints||[]).forEach(function(R){R.setState()}),O.hoverPoints=O.hoverPoint=null}manageEvent(O){var G,V,$,q,W,se;let R=S(this.series.options.point,this.options),L=(G=R.events)==null?void 0:G[O];E(L)&&(!((V=this.hcEvents)!=null&&V[O])||((q=($=this.hcEvents)==null?void 0:$[O])==null?void 0:q.map(fe=>fe.fn).indexOf(L))===-1)?((W=this.importedUserEvent)==null||W.call(this),this.importedUserEvent=g(this,O,L)):this.importedUserEvent&&!L&&((se=this.hcEvents)!=null&&se[O])&&(Z(this,O),delete this.hcEvents[O],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(O,R){var ue;let L=this.series,G=this.state,V=L.options.states[O||"normal"]||{},$=m.plotOptions[L.type].marker&&L.options.marker,q=$&&$.enabled===!1,W=$&&$.states&&$.states[O||"normal"]||{},se=W.enabled===!1,fe=this.marker||{},re=L.chart,le=$&&L.markerAttribs,Se=L.halo,ye,Ee,J,ie=L.stateMarkerGraphic,oe;if((O=O||"")===this.state&&!R||this.selected&&O!=="select"||V.enabled===!1||O&&(se||q&&W.enabled===!1)||O&&fe.states&&fe.states[O]&&fe.states[O].enabled===!1)return;if(this.state=O,le&&(ye=L.markerAttribs(this,O)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),O&&this.graphic.addClass("highcharts-point-"+O),!re.styledMode){Ee=L.pointAttribs(this,O),J=N(re.options.chart.animation,V.animation);let ve=Ee.opacity;L.options.inactiveOtherPoints&&A(ve)&&(this.dataLabels||[]).forEach(function(Ce){Ce&&!Ce.hasClass("highcharts-data-label-hidden")&&(Ce.animate({opacity:ve},J),Ce.connector&&Ce.connector.animate({opacity:ve},J))}),this.graphic.animate(Ee,J)}ye&&this.graphic.animate(ye,N(re.options.chart.animation,W.animation,$.animation)),ie&&ie.hide()}else O&&W&&(oe=fe.symbol||L.symbol,ie&&ie.currentSymbol!==oe&&(ie=ie.destroy()),ye&&(ie?ie[R?"animate":"attr"]({x:ye.x,y:ye.y}):oe&&(L.stateMarkerGraphic=ie=re.renderer.symbol(oe,ye.x,ye.y,ye.width,ye.height).add(L.markerGroup),ie.currentSymbol=oe)),!re.styledMode&&ie&&this.state!=="inactive"&&ie.attr(L.pointAttribs(this,O))),ie&&(ie[O&&this.isInside?"show":"hide"](),ie.element.point=this,ie.addClass(this.getClassName(),!0));let we=V.halo,ee=this.graphic||ie,ae=ee&&ee.visibility||"inherit";we&&we.size&&ee&&ae!=="hidden"&&!this.isCluster?(Se||(L.halo=Se=re.renderer.path().add(ee.parentGroup)),Se.show()[R?"animate":"attr"]({d:this.haloPath(we.size)}),Se.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,L.colorIndex)+(this.className?" "+this.className:""),visibility:ae,zIndex:-1}),Se.point=this,re.styledMode||Se.attr(_({fill:this.color||L.color,"fill-opacity":we.opacity},n.filterUserAttributes(we.attributes||{})))):(ue=Se==null?void 0:Se.point)!=null&&ue.haloPath&&!Se.point.destroyed&&Se.animate({d:Se.point.haloPath(0)},null,Se.hide),T(this,"afterSetState",{state:O})}haloPath(O){let R=this.pos();return R?this.series.chart.renderer.symbols.circle(b(R[0],1)-O,R[1]-O,2*O,2*O):[]}}return B}),r(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{parse:h}=n,{charts:f,composed:m,isTouchDevice:y}=a,{addEvent:g,attr:b,css:v,extend:_,find:T,fireEvent:k,isNumber:w,isObject:E,objectEach:A,offset:M,pick:S,pushUnique:N,splat:Y}=c;class Z{applyInactiveState(B){let F=[],O;(B||[]).forEach(function(R){O=R.series,F.push(O),O.linkedParent&&F.push(O.linkedParent),O.linkedSeries&&(F=F.concat(O.linkedSeries)),O.navigatorSeries&&F.push(O.navigatorSeries)}),this.chart.series.forEach(function(R){F.indexOf(R)===-1?R.setState("inactive",!0):R.options.inactiveOtherPoints&&R.setAllPointsToState("inactive")})}destroy(){let B=this;this.eventsToUnbind.forEach(F=>F()),this.eventsToUnbind=[],!a.chartCount&&(Z.unbindDocumentMouseUp&&Z.unbindDocumentMouseUp.forEach(F=>F()),Z.unbindDocumentTouchEnd&&(Z.unbindDocumentTouchEnd=Z.unbindDocumentTouchEnd())),clearInterval(B.tooltipTimeout),A(B,function(F,O){B[O]=void 0})}getSelectionMarkerAttrs(B,F){let O={args:{chartX:B,chartY:F},attrs:{},shapeType:"rect"};return k(this,"getSelectionMarkerAttrs",O,R=>{let L,{chart:G,zoomHor:V,zoomVert:$}=this,{mouseDownX:q=0,mouseDownY:W=0}=G,se=R.attrs;se.x=G.plotLeft,se.y=G.plotTop,se.width=V?1:G.plotWidth,se.height=$?1:G.plotHeight,V&&(L=B-q,se.width=Math.max(1,Math.abs(L)),se.x=(L>0?0:L)+q),$&&(L=F-W,se.height=Math.max(1,Math.abs(L)),se.y=(L>0?0:L)+W)}),O}drag(B){let{chart:F}=this,{mouseDownX:O=0,mouseDownY:R=0}=F,{panning:L,panKey:G,selectionMarkerFill:V}=F.options.chart,$=F.plotLeft,q=F.plotTop,W=F.plotWidth,se=F.plotHeight,fe=E(L)?L.enabled:L,re=G&&B[`${G}Key`],le=B.chartX,Se=B.chartY,ye,Ee=this.selectionMarker;if((!Ee||!Ee.touch)&&(le<$?le=$:le>$+W&&(le=$+W),Se<q?Se=q:Se>q+se&&(Se=q+se),this.hasDragged=Math.sqrt(Math.pow(O-le,2)+Math.pow(R-Se,2)),this.hasDragged>10)){ye=F.isInsidePlot(O-$,R-q,{visiblePlotOnly:!0});let{shapeType:J,attrs:ie}=this.getSelectionMarkerAttrs(le,Se);(F.hasCartesianSeries||F.mapView)&&this.hasZoom&&ye&&!re&&!Ee&&(this.selectionMarker=Ee=F.renderer[J](),Ee.attr({class:"highcharts-selection-marker",zIndex:7}).add(),F.styledMode||Ee.attr({fill:V||h("#334eff").setOpacity(.25).get()})),Ee&&Ee.attr(ie),ye&&!Ee&&fe&&F.pan(B,L)}}dragStart(B){let F=this.chart;F.mouseIsDown=B.type,F.cancelClick=!1,F.mouseDownX=B.chartX,F.mouseDownY=B.chartY}getSelectionBox(B){let F={args:{marker:B},result:B.getBBox()};return k(this,"getSelectionBox",F),F.result}drop(B){let F,{chart:O,selectionMarker:R}=this;for(let L of O.axes)L.isPanning&&(L.isPanning=!1,(L.options.startOnTick||L.options.endOnTick||L.series.some(G=>G.boosted))&&(L.forceRedraw=!0,L.setExtremes(L.userMin,L.userMax,!1),F=!0));if(F&&O.redraw(),R&&B){if(this.hasDragged){let L=this.getSelectionBox(R);O.transform({axes:O.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:B,xAxis:[],yAxis:[],...L},from:L})}w(O.index)&&(this.selectionMarker=R.destroy())}O&&w(O.index)&&(v(O.container,{cursor:O._cursor}),O.cancelClick=this.hasDragged>10,O.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(B,F,O){let R;return B.forEach(function(L){let G=!(L.noSharedTooltip&&F)&&0>L.options.findNearestPointBy.indexOf("y"),V=L.searchPoint(O,G);E(V,!0)&&V.series&&(!E(R,!0)||function($,q){var re,le;let W=$.distX-q.distX,se=$.dist-q.dist,fe=((re=q.series.group)==null?void 0:re.zIndex)-((le=$.series.group)==null?void 0:le.zIndex);return W!==0&&F?W:se!==0?se:fe!==0?fe:$.series.index>q.series.index?-1:1}(R,V)>0)&&(R=V)}),R}getChartCoordinatesFromPoint(B,F){let{xAxis:O,yAxis:R}=B.series,L=B.shapeArgs;if(O&&R){let G=B.clientX??B.plotX??0,V=B.plotY||0;return B.isNode&&L&&w(L.x)&&w(L.y)&&(G=L.x,V=L.y),F?{chartX:R.len+R.pos-V,chartY:O.len+O.pos-G}:{chartX:G+O.pos,chartY:V+R.pos}}if(L&&L.x&&L.y)return{chartX:L.x,chartY:L.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:B}=this.chart,F=M(B);this.chartPosition={left:F.left,top:F.top,scaleX:1,scaleY:1};let{offsetHeight:O,offsetWidth:R}=B;return R>2&&O>2&&(this.chartPosition.scaleX=F.width/R,this.chartPosition.scaleY=F.height/O),this.chartPosition}getCoordinates(B){let F={xAxis:[],yAxis:[]};for(let O of this.chart.axes)F[O.isXAxis?"xAxis":"yAxis"].push({axis:O,value:O.toValue(B[O.horiz?"chartX":"chartY"])});return F}getHoverData(B,F,O,R,L,G){let V=[],$=function(re){return re.visible&&!(!L&&re.directTouch)&&S(re.options.enableMouseTracking,!0)},q=F,W,se={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:L};k(this,"beforeGetHoverData",se),W=q&&!q.stickyTracking?[q]:O.filter(re=>re.stickyTracking&&(se.filter||$)(re));let fe=R&&B||!G?B:this.findNearestKDPoint(W,L,G);return q=fe&&fe.series,fe&&(L&&!q.noSharedTooltip?(W=O.filter(function(re){return se.filter?se.filter(re):$(re)&&!re.noSharedTooltip})).forEach(function(re){let le=T(re.points,function(Se){return Se.x===fe.x&&!Se.isNull});E(le)&&(re.boosted&&re.boost&&(le=re.boost.getPoint(le)),V.push(le))}):V.push(fe)),k(this,"afterGetHoverData",se={hoverPoint:fe}),{hoverPoint:se.hoverPoint,hoverSeries:q,hoverPoints:V}}getPointFromEvent(B){let F=B.target,O;for(;F&&!O;)O=F.point,F=F.parentNode;return O}onTrackerMouseOut(B){let F=this.chart,O=B.relatedTarget,R=F.hoverSeries;this.isDirectTouch=!1,!R||!O||R.stickyTracking||this.inClass(O,"highcharts-tooltip")||this.inClass(O,"highcharts-series-"+R.index)&&this.inClass(O,"highcharts-tracker")||R.onMouseOut()}inClass(B,F){let O=B,R;for(;O;){if(R=b(O,"class")){if(R.indexOf(F)!==-1)return!0;if(R.indexOf("highcharts-container")!==-1)return!1}O=O.parentElement}}constructor(B,F){var O;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=F,this.chart=B,this.runChartClick=!!((O=F.chart.events)!=null&&O.click),this.pinchDown=[],this.setDOMEvents(),k(this,"afterInit")}normalize(B,F){let O=B.touches,R=O?O.length?O.item(0):S(O.changedTouches,B.changedTouches)[0]:B;F||(F=this.getChartPosition());let L=R.pageX-F.left,G=R.pageY-F.top;return _(B,{chartX:Math.round(L/=F.scaleX),chartY:Math.round(G/=F.scaleY)})}onContainerClick(B){let F=this.chart,O=F.hoverPoint,R=this.normalize(B),L=F.plotLeft,G=F.plotTop;!F.cancelClick&&(O&&this.inClass(R.target,"highcharts-tracker")?(k(O.series,"click",_(R,{point:O})),F.hoverPoint&&O.firePointEvent("click",R)):(_(R,this.getCoordinates(R)),F.isInsidePlot(R.chartX-L,R.chartY-G,{visiblePlotOnly:!0})&&k(F,"click",R)))}onContainerMouseDown(B){var O;let F=(1&(B.buttons||B.button))==1;B=this.normalize(B),a.isFirefox&&B.button!==0&&this.onContainerMouseMove(B),(B.button===void 0||F)&&(this.zoomOption(B),F&&((O=B.preventDefault)==null||O.call(B)),this.dragStart(B))}onContainerMouseLeave(B){let{pointer:F}=f[S(Z.hoverChartIndex,-1)]||{};B=this.normalize(B),this.onContainerMouseMove(B),F&&!this.inClass(B.relatedTarget,"highcharts-tooltip")&&(F.reset(),F.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(B){let F=this.chart,O=F.tooltip,R=this.normalize(B);this.setHoverChartIndex(B),(F.mouseIsDown==="mousedown"||this.touchSelect(R))&&this.drag(R),!F.openMenu&&(this.inClass(R.target,"highcharts-tracker")||F.isInsidePlot(R.chartX-F.plotLeft,R.chartY-F.plotTop,{visiblePlotOnly:!0}))&&!(O&&O.shouldStickOnContact(R))&&(this.inClass(R.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(R))}onDocumentTouchEnd(B){this.onDocumentMouseUp(B)}onContainerTouchMove(B){this.touchSelect(B)?this.onContainerMouseMove(B):this.touch(B)}onContainerTouchStart(B){this.touchSelect(B)?this.onContainerMouseDown(B):(this.zoomOption(B),this.touch(B,!0))}onDocumentMouseMove(B){let F=this.chart,O=F.tooltip,R=this.chartPosition,L=this.normalize(B,R);!R||F.isInsidePlot(L.chartX-F.plotLeft,L.chartY-F.plotTop,{visiblePlotOnly:!0})||O&&O.shouldStickOnContact(L)||L.target!==F.container.ownerDocument&&this.inClass(L.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(B){var F,O;(O=(F=f[S(Z.hoverChartIndex,-1)])==null?void 0:F.pointer)==null||O.drop(B)}pinch(B){let F=this,{chart:O,hasZoom:R,lastTouches:L}=F,G=[].map.call(B.touches||[],se=>F.normalize(se)),V=G.length,$=V===1&&(F.inClass(B.target,"highcharts-tracker")&&O.runTrackerClick||F.runChartClick),q=O.tooltip,W=V===1&&S(q==null?void 0:q.options.followTouchMove,!0);V>1?F.initiated=!0:W&&(F.initiated=!1),R&&F.initiated&&!$&&B.cancelable!==!1&&B.preventDefault(),B.type==="touchstart"?(F.pinchDown=G,F.res=!0,O.mouseDownX=B.chartX):W?this.runPointActions(F.normalize(B)):L&&(k(O,"touchpan",{originalEvent:B,touches:G},()=>{let se=fe=>{let re=fe[0],le=fe[1]||re;return{x:re.chartX,y:re.chartY,width:le.chartX-re.chartX,height:le.chartY-re.chartY}};O.transform({axes:O.axes.filter(fe=>fe.zoomEnabled&&(this.zoomHor&&fe.horiz||this.zoomVert&&!fe.horiz)),to:se(G),from:se(L),trigger:B.type})}),F.res&&(F.res=!1,this.reset(!1,0))),F.lastTouches=G}reset(B,F){let O=this.chart,R=O.hoverSeries,L=O.hoverPoint,G=O.hoverPoints,V=O.tooltip,$=V&&V.shared?G:L;B&&$&&Y($).forEach(function(q){q.series.isCartesian&&q.plotX===void 0&&(B=!1)}),B?V&&$&&Y($).length&&(V.refresh($),V.shared&&G?G.forEach(function(q){q.setState(q.state,!0),q.series.isCartesian&&(q.series.xAxis.crosshair&&q.series.xAxis.drawCrosshair(null,q),q.series.yAxis.crosshair&&q.series.yAxis.drawCrosshair(null,q))}):L&&(L.setState(L.state,!0),O.axes.forEach(function(q){q.crosshair&&L.series[q.coll]===q&&q.drawCrosshair(null,L)}))):(L&&L.onMouseOut(),G&&G.forEach(function(q){q.setState()}),R&&R.onMouseOut(),V&&V.hide(F),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),O.axes.forEach(function(q){q.hideCrosshair()}),O.hoverPoints=O.hoverPoint=void 0)}runPointActions(B,F,O){let R=this.chart,L=R.series,G=R.tooltip&&R.tooltip.options.enabled?R.tooltip:void 0,V=!!G&&G.shared,$=F||R.hoverPoint,q=$&&$.series||R.hoverSeries,W=(!B||B.type!=="touchmove")&&(!!F||q&&q.directTouch&&this.isDirectTouch),se=this.getHoverData($,q,L,W,V,B);$=se.hoverPoint,q=se.hoverSeries;let fe=se.hoverPoints,re=q&&q.tooltipOptions.followPointer&&!q.tooltipOptions.split,le=V&&q&&!q.noSharedTooltip;if($&&(O||$!==R.hoverPoint||G&&G.isHidden)){if((R.hoverPoints||[]).forEach(function(Se){fe.indexOf(Se)===-1&&Se.setState()}),R.hoverSeries!==q&&q.onMouseOver(),this.applyInactiveState(fe),(fe||[]).forEach(function(Se){Se.setState("hover")}),R.hoverPoint&&R.hoverPoint.firePointEvent("mouseOut"),!$.series)return;R.hoverPoints=fe,R.hoverPoint=$,$.firePointEvent("mouseOver",void 0,()=>{G&&$&&G.refresh(le?fe:$,B)})}else if(re&&G&&!G.isHidden){let Se=G.getAnchor([{}],B);R.isInsidePlot(Se[0],Se[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:Se[0],plotY:Se[1]})}this.unDocMouseMove||(this.unDocMouseMove=g(R.container.ownerDocument,"mousemove",Se=>{var ye,Ee;return(Ee=(ye=f[Z.hoverChartIndex??-1])==null?void 0:ye.pointer)==null?void 0:Ee.onDocumentMouseMove(Se)}),this.eventsToUnbind.push(this.unDocMouseMove)),R.axes.forEach(function(Se){let ye,Ee=S((Se.crosshair||{}).snap,!0);!Ee||(ye=R.hoverPoint)&&ye.series[Se.coll]===Se||(ye=T(fe,J=>J.series&&J.series[Se.coll]===Se)),ye||!Ee?Se.drawCrosshair(B,ye):Se.hideCrosshair()})}setDOMEvents(){let B=this.chart.container,F=B.ownerDocument;B.onmousedown=this.onContainerMouseDown.bind(this),B.onmousemove=this.onContainerMouseMove.bind(this),B.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(g(B,"mouseenter",this.onContainerMouseEnter.bind(this)),g(B,"mouseleave",this.onContainerMouseLeave.bind(this))),Z.unbindDocumentMouseUp||(Z.unbindDocumentMouseUp=[]),Z.unbindDocumentMouseUp.push(g(F,"mouseup",this.onDocumentMouseUp.bind(this)));let O=this.chart.renderTo.parentElement;for(;O&&O.tagName!=="BODY";)this.eventsToUnbind.push(g(O,"scroll",()=>{delete this.chartPosition})),O=O.parentElement;this.eventsToUnbind.push(g(B,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),g(B,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Z.unbindDocumentTouchEnd||(Z.unbindDocumentTouchEnd=g(F,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),g(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var L,G;if(!y)return;let B=this.pointerCaptureEventsToUnbind,F=this.chart,O=F.container,R=S((L=F.options.tooltip)==null?void 0:L.followTouchMove,!0)&&F.series.some(V=>V.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&R?(B.push(g(O,"pointerdown",V=>{var $,q;($=V.target)!=null&&$.hasPointerCapture(V.pointerId)&&((q=V.target)==null||q.releasePointerCapture(V.pointerId))}),g(O,"pointermove",V=>{var $,q;(q=($=F.pointer)==null?void 0:$.getPointFromEvent(V))==null||q.onMouseOver(V)})),F.styledMode||v(O,{"touch-action":"none"}),O.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!R&&(B.forEach(V=>V()),B.length=0,F.styledMode||v(O,{"touch-action":S((G=F.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),O.className=O.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(B){var R;let F=this.chart,O=a.charts[S(Z.hoverChartIndex,-1)];if(O&&O!==F){let L={relatedTarget:F.container};B&&!(B!=null&&B.relatedTarget)&&(B={...L,...B}),(R=O.pointer)==null||R.onContainerMouseLeave(B||L)}O&&O.mouseIsDown||(Z.hoverChartIndex=F.index)}touch(B,F){let O,{chart:R,pinchDown:L=[]}=this;this.setHoverChartIndex(),(B=this.normalize(B)).touches.length===1?R.isInsidePlot(B.chartX-R.plotLeft,B.chartY-R.plotTop,{visiblePlotOnly:!0})&&!R.openMenu?(F&&this.runPointActions(B),B.type==="touchmove"&&(O=!!L[0]&&Math.pow(L[0].chartX-B.chartX,2)+Math.pow(L[0].chartY-B.chartY,2)>=16),S(O,!0)&&this.pinch(B)):F&&this.reset():B.touches.length===2&&this.pinch(B)}touchSelect(B){return!!(this.chart.zooming.singleTouch&&B.touches&&B.touches.length===1)}zoomOption(B){let F=this.chart,O=F.inverted,R=F.zooming.type||"",L,G;/touch/.test(B.type)&&(R=S(F.zooming.pinchType,R)),this.zoomX=L=/x/.test(R),this.zoomY=G=/y/.test(R),this.zoomHor=L&&!O||G&&O,this.zoomVert=G&&!O||L&&O,this.hasZoom=L||G}}return(s=Z||(Z={})).compose=function(K){N(m,"Core.Pointer")&&g(K,"beforeRender",function(){this.pointer=new s(this,this.options)})},Z}),r(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(n){var a;let{extend:c,merge:s,pick:h}=n;return function(f){function m(y,g,b){var O,R;let v=this.legendItem=this.legendItem||{},{chart:_,options:T}=this,{baseline:k=0,symbolWidth:w,symbolHeight:E}=y,A=this.symbol||"circle",M=E/2,S=_.renderer,N=v.group,Y=k-Math.round((((O=y.fontMetrics)==null?void 0:O.b)||E)*(b?.4:.3)),Z={},K,B=T.marker,F=0;if(_.styledMode||(Z["stroke-width"]=Math.min(T.lineWidth||0,24),T.dashStyle?Z.dashstyle=T.dashStyle:T.linecap==="square"||(Z["stroke-linecap"]="round")),v.line=S.path().addClass("highcharts-graph").attr(Z).add(N),b&&(v.area=S.path().addClass("highcharts-area").add(N)),Z["stroke-linecap"]&&(F=Math.min(v.line.strokeWidth(),w)/2),w){let L=[["M",F,Y],["L",w-F,Y]];v.line.attr({d:L}),(R=v.area)==null||R.attr({d:[...L,["L",w-F,k],["L",F,k]]})}if(B&&B.enabled!==!1&&w){let L=Math.min(h(B.radius,M),M);A.indexOf("url")===0&&(B=s(B,{width:E,height:E}),L=0),v.symbol=K=S.symbol(A,w/2-L,Y-L,2*L,2*L,c({context:"legend"},B)).addClass("highcharts-point").add(N),K.isMarker=!0}}f.areaMarker=function(y,g){m.call(this,y,g,!0)},f.lineMarker=m,f.rectangle=function(y,g){let b=g.legendItem||{},v=y.options,_=y.symbolHeight,T=v.squareSymbol,k=T?_:y.symbolWidth;b.symbol=this.chart.renderer.rect(T?(y.symbolWidth-_)/2:0,y.baseline-_+1,k,_,h(y.options.symbolRadius,_/2)).addClass("highcharts-point").attr({zIndex:3}).add(b.group)}}(a||(a={})),a}),r(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:n}=this.series.chart;return typeof this.y!="number"?"":n(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),r(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{defaultOptions:f}=a,{extend:m,extendClass:y,merge:g}=s;return function(b){function v(_,T){let k=f.plotOptions||{},w=T.defaultOptions,E=T.prototype;return E.type=_,E.pointClass||(E.pointClass=c),!b.seriesTypes[_]&&(w&&(k[_]=w),b.seriesTypes[_]=T,!0)}b.seriesTypes=n.seriesTypes,b.registerSeriesType=v,b.seriesType=function(_,T,k,w,E){let A=f.plotOptions||{};if(T=T||"",A[_]=g(A[T],k),delete b.seriesTypes[_],v(_,y(b.seriesTypes[T]||function(){},w)),b.seriesTypes[_].prototype.type=_,E){class M extends c{}m(M.prototype,E),b.seriesTypes[_].prototype.pointClass=M}return b.seriesTypes[_]}}(h||(h={})),h}),r(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g,b){let{animObject:v,setAnimation:_}=n,{defaultOptions:T}=a,{registerEventOptions:k}=c,{svg:w,win:E}=s,{seriesTypes:A}=y,{arrayMax:M,arrayMin:S,clamp:N,correctFloat:Y,crisp:Z,defined:K,destroyObjectProperties:B,diffObjects:F,erase:O,error:R,extend:L,find:G,fireEvent:V,getClosestDistance:$,getNestedProperty:q,insertItem:W,isArray:se,isNumber:fe,isString:re,merge:le,objectEach:Se,pick:ye,removeEvent:Ee,splat:J,syncTimeout:ie}=b;class oe{constructor(){this.zoneAxis="y"}init(ee,ae){let ue;V(this,"init",{options:ae});let ve=this,Ce=ee.series;this.eventsToUnbind=[],ve.chart=ee,ve.options=ve.setOptions(ae);let je=ve.options,Me=je.visible!==!1;ve.linkedSeries=[],ve.bindAxes(),L(ve,{name:je.name,state:"",visible:Me,selected:je.selected===!0}),k(this,je);let Re=je.events;(Re&&Re.click||je.point&&je.point.events&&je.point.events.click||je.allowPointSelect)&&(ee.runTrackerClick=!0),ve.getColor(),ve.getSymbol(),ve.parallelArrays.forEach(function(me){ve[me+"Data"]||(ve[me+"Data"]=[])}),ve.isCartesian&&(ee.hasCartesianSeries=!0),Ce.length&&(ue=Ce[Ce.length-1]),ve._i=ye(ue&&ue._i,-1)+1,ve.opacity=ve.options.opacity,ee.orderItems("series",W(this,Ce)),je.dataSorting&&je.dataSorting.enabled?ve.setDataSortingOptions():ve.points||ve.data||ve.setData(je.data,!1),V(this,"afterInit")}is(ee){return A[ee]&&this instanceof A[ee]}bindAxes(){let ee,ae=this,ue=ae.options,ve=ae.chart;V(this,"bindAxes",null,function(){(ae.axisTypes||[]).forEach(function(Ce){(ve[Ce]||[]).forEach(function(je){ee=je.options,(ye(ue[Ce],0)===je.index||ue[Ce]!==void 0&&ue[Ce]===ee.id)&&(W(ae,je.series),ae[Ce]=je,je.isDirty=!0)}),ae[Ce]||ae.optionalAxis===Ce||R(18,!0,ve)})}),V(this,"afterBindAxes")}updateParallelArrays(ee,ae,ue){let ve=ee.series,Ce=fe(ae)?function(je){let Me=je==="y"&&ve.toYData?ve.toYData(ee):ee[je];ve[je+"Data"][ae]=Me}:function(je){Array.prototype[ae].apply(ve[je+"Data"],ue)};ve.parallelArrays.forEach(Ce)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(ee,ae){let ue=ee.marker,ve=ae.marker||{};return ue&&(ve.enabled&&!ue.enabled||ve.symbol!==ue.symbol||ve.height!==ue.height||ve.width!==ue.width)}autoIncrement(ee){let ae=this.options,ue=ae.pointIntervalUnit,ve=ae.relativeXValue,Ce=this.chart.time,je=this.xIncrement,Me,Re;return je=ye(je,ae.pointStart,0),this.pointInterval=Re=ye(this.pointInterval,ae.pointInterval,1),ve&&fe(ee)&&(Re*=ee),ue&&(Me=new Ce.Date(je),ue==="day"?Ce.set("Date",Me,Ce.get("Date",Me)+Re):ue==="month"?Ce.set("Month",Me,Ce.get("Month",Me)+Re):ue==="year"&&Ce.set("FullYear",Me,Ce.get("FullYear",Me)+Re),Re=Me.getTime()-je),ve&&fe(ee)?je+Re:(this.xIncrement=je+Re,je)}setDataSortingOptions(){let ee=this.options;L(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),K(ee.pointRange)||(ee.pointRange=1)}setOptions(ee){var Oe,Ge;let ae,ue=this.chart,ve=ue.options.plotOptions,Ce=ue.userOptions||{},je=le(ee),Me=ue.styledMode,Re={plotOptions:ve,userOptions:je};V(this,"setOptions",Re);let me=Re.plotOptions[this.type],De=Ce.plotOptions||{},Ue=De.series||{},Pe=T.plotOptions[this.type]||{},Te=De[this.type]||{};this.userOptions=Re.userOptions;let Ie=le(me,ve.series,Te,je);this.tooltipOptions=le(T.tooltip,(Oe=T.plotOptions.series)==null?void 0:Oe.tooltip,Pe==null?void 0:Pe.tooltip,ue.userOptions.tooltip,(Ge=De.series)==null?void 0:Ge.tooltip,Te.tooltip,je.tooltip),this.stickyTracking=ye(je.stickyTracking,Te.stickyTracking,Ue.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Ie.stickyTracking),me.marker===null&&delete Ie.marker,this.zoneAxis=Ie.zoneAxis||"y";let Fe=this.zones=(Ie.zones||[]).map(Qe=>({...Qe}));return(Ie.negativeColor||Ie.negativeFillColor)&&!Ie.zones&&(ae={value:Ie[this.zoneAxis+"Threshold"]||Ie.threshold||0,className:"highcharts-negative"},Me||(ae.color=Ie.negativeColor,ae.fillColor=Ie.negativeFillColor),Fe.push(ae)),Fe.length&&K(Fe[Fe.length-1].value)&&Fe.push(Me?{}:{color:this.color,fillColor:this.fillColor}),V(this,"afterSetOptions",{options:Ie}),Ie}getName(){return ye(this.options.name,"Series "+(this.index+1))}getCyclic(ee,ae,ue){let ve,Ce,je=this.chart,Me=`${ee}Index`,Re=`${ee}Counter`,me=(ue==null?void 0:ue.length)||je.options.chart.colorCount;!ae&&(K(Ce=ye(ee==="color"?this.options.colorIndex:void 0,this[Me]))?ve=Ce:(je.series.length||(je[Re]=0),ve=je[Re]%me,je[Re]+=1),ue&&(ae=ue[ve])),ve!==void 0&&(this[Me]=ve),this[ee]=ae}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||T.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let ee=this.options.marker;this.getCyclic("symbol",ee.symbol,this.chart.options.symbols)}findPointIndex(ee,ae){let ue,ve,Ce,je=ee.id,Me=ee.x,Re=this.points,me=this.options.dataSorting;if(je){let De=this.chart.get(je);De instanceof f&&(ue=De)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let De=Ue=>!Ue.touched&&Ue.index===ee.index;if(me&&me.matchByName?De=Ue=>!Ue.touched&&Ue.name===ee.name:this.options.relativeXValue&&(De=Ue=>!Ue.touched&&Ue.options.x===ee.x),!(ue=G(Re,De)))return}return ue&&(Ce=ue&&ue.index)!==void 0&&(ve=!0),Ce===void 0&&fe(Me)&&(Ce=this.xData.indexOf(Me,ae)),Ce!==-1&&Ce!==void 0&&this.cropped&&(Ce=Ce>=this.cropStart?Ce-this.cropStart:Ce),!ve&&fe(Ce)&&Re[Ce]&&Re[Ce].touched&&(Ce=void 0),Ce}updateData(ee,ae){let ue=this.options,ve=ue.dataSorting,Ce=this.points,je=[],Me=this.requireSorting,Re=ee.length===Ce.length,me,De,Ue,Pe,Te=!0;if(this.xIncrement=null,ee.forEach(function(Ie,Fe){let Oe,Ge=K(Ie)&&this.pointClass.prototype.optionsToObject.call({series:this},Ie)||{},Qe=Ge.x;Ge.id||fe(Qe)?((Oe=this.findPointIndex(Ge,Pe))===-1||Oe===void 0?je.push(Ie):Ce[Oe]&&Ie!==ue.data[Oe]?(Ce[Oe].update(Ie,!1,null,!1),Ce[Oe].touched=!0,Me&&(Pe=Oe+1)):Ce[Oe]&&(Ce[Oe].touched=!0),(!Re||Fe!==Oe||ve&&ve.enabled||this.hasDerivedData)&&(me=!0)):je.push(Ie)},this),me)for(De=Ce.length;De--;)(Ue=Ce[De])&&!Ue.touched&&Ue.remove&&Ue.remove(!1,ae);else!Re||ve&&ve.enabled?Te=!1:(ee.forEach(function(Ie,Fe){Ie===Ce[Fe].y||Ce[Fe].destroyed||Ce[Fe].update(Ie,!1,null,!1)}),je.length=0);return Ce.forEach(function(Ie){Ie&&(Ie.touched=!1)}),!!Te&&(je.forEach(function(Ie){this.addPoint(Ie,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=M(this.xData),this.autoIncrement()),!0)}setData(ee,ae=!0,ue,ve){var mt;let Ce=this,je=Ce.points,Me=je&&je.length||0,Re=Ce.options,me=Ce.chart,De=Re.dataSorting,Ue=Ce.xAxis,Pe=Re.turboThreshold,Te=this.xData,Ie=this.yData,Fe=Ce.pointArrayMap,Oe=Fe&&Fe.length,Ge=Re.keys,Qe,at,rt,dt=0,gt=1,Tt;me.options.chart.allowMutatingData||(Re.data&&delete Ce.options.data,Ce.userOptions.data&&delete Ce.userOptions.data,Tt=le(!0,ee));let Nt=(ee=Tt||ee||[]).length;if(De&&De.enabled&&(ee=this.sortData(ee)),me.options.chart.allowMutatingData&&ve!==!1&&Nt&&Me&&!Ce.cropped&&!Ce.hasGroupedData&&Ce.visible&&!Ce.boosted&&(rt=this.updateData(ee,ue)),!rt){Ce.xIncrement=null,Ce.colorCounter=0,this.parallelArrays.forEach(function(kt){Ce[kt+"Data"].length=0});let St=Pe&&Nt>Pe;if(St){let kt=Ce.getFirstValidPoint(ee),ii=Ce.getFirstValidPoint(ee,Nt-1,-1),fi=Gt=>!!(se(Gt)&&(Ge||fe(Gt[0])));if(fe(kt)&&fe(ii))for(Qe=0;Qe<Nt;Qe++)Te[Qe]=this.autoIncrement(),Ie[Qe]=ee[Qe];else if(fi(kt)&&fi(ii))if(Oe)if(kt.length===Oe)for(Qe=0;Qe<Nt;Qe++)Te[Qe]=this.autoIncrement(),Ie[Qe]=ee[Qe];else for(Qe=0;Qe<Nt;Qe++)at=ee[Qe],Te[Qe]=at[0],Ie[Qe]=at.slice(1,Oe+1);else if(Ge&&(dt=Ge.indexOf("x"),gt=Ge.indexOf("y"),dt=dt>=0?dt:0,gt=gt>=0?gt:1),kt.length===1&&(gt=0),dt===gt)for(Qe=0;Qe<Nt;Qe++)Te[Qe]=this.autoIncrement(),Ie[Qe]=ee[Qe][gt];else for(Qe=0;Qe<Nt;Qe++)at=ee[Qe],Te[Qe]=at[dt],Ie[Qe]=at[gt];else St=!1}if(!St)for(Qe=0;Qe<Nt;Qe++)at={series:Ce},Ce.pointClass.prototype.applyOptions.apply(at,[ee[Qe]]),Ce.updateParallelArrays(at,Qe);for(Ie&&re(Ie[0])&&R(14,!0,me),Ce.data=[],Ce.options.data=Ce.userOptions.data=ee,Qe=Me;Qe--;)(mt=je[Qe])==null||mt.destroy();Ue&&(Ue.minRange=Ue.userMinRange),Ce.isDirty=me.isDirtyBox=!0,Ce.isDirtyData=!!je,ue=!1}Re.legendType==="point"&&(this.processData(),this.generatePoints()),ae&&me.redraw(ue)}sortData(ee){let ae=this,ue=ae.options.dataSorting.sortKey||"y",ve=function(Ce,je){return K(je)&&Ce.pointClass.prototype.optionsToObject.call({series:Ce},je)||{}};return ee.forEach(function(Ce,je){ee[je]=ve(ae,Ce),ee[je].index=je},this),ee.concat().sort((Ce,je)=>{let Me=q(ue,Ce),Re=q(ue,je);return Re<Me?-1:Re>Me?1:0}).forEach(function(Ce,je){Ce.x=je},this),ae.linkedSeries&&ae.linkedSeries.forEach(function(Ce){let je=Ce.options,Me=je.data;je.dataSorting&&je.dataSorting.enabled||!Me||(Me.forEach(function(Re,me){Me[me]=ve(Ce,Re),ee[me]&&(Me[me].x=ee[me].x,Me[me].index=me)}),Ce.setData(Me,!1))}),ee}getProcessedData(ee){let ae=this,ue=ae.xAxis,ve=ae.options.cropThreshold,Ce=ue==null?void 0:ue.logarithmic,je=ae.isCartesian,Me,Re,me=0,De,Ue,Pe,Te=ae.xData,Ie=ae.yData,Fe=!1,Oe=Te.length;ue&&(Ue=(De=ue.getExtremes()).min,Pe=De.max,Fe=!!(ue.categories&&!ue.names.length)),je&&ae.sorted&&!ee&&(!ve||Oe>ve||ae.forceCrop)&&(Te[Oe-1]<Ue||Te[0]>Pe?(Te=[],Ie=[]):ae.yData&&(Te[0]<Ue||Te[Oe-1]>Pe)&&(Te=(Me=this.cropData(ae.xData,ae.yData,Ue,Pe)).xData,Ie=Me.yData,me=Me.start,Re=!0));let Ge=$([Ce?Te.map(Ce.log2lin):Te],()=>ae.requireSorting&&!Fe&&R(15,!1,ae.chart));return{xData:Te,yData:Ie,cropped:Re,cropStart:me,closestPointRange:Ge}}processData(ee){let ae=this.xAxis;if(this.isCartesian&&!this.isDirty&&!ae.isDirty&&!this.yAxis.isDirty&&!ee)return!1;let ue=this.getProcessedData();this.cropped=ue.cropped,this.cropStart=ue.cropStart,this.processedXData=ue.xData,this.processedYData=ue.yData,this.closestPointRange=this.basePointRange=ue.closestPointRange,V(this,"afterProcessData")}cropData(ee,ae,ue,ve){let Ce=ee.length,je,Me,Re=0,me=Ce;for(je=0;je<Ce;je++)if(ee[je]>=ue){Re=Math.max(0,je-1);break}for(Me=je;Me<Ce;Me++)if(ee[Me]>ve){me=Me+1;break}return{xData:ee.slice(Re,me),yData:ae.slice(Re,me),start:Re,end:me}}generatePoints(){let ee=this.options,ae=this.processedData||ee.data,ue=this.processedXData,ve=this.processedYData,Ce=this.pointClass,je=ue.length,Me=this.cropStart||0,Re=this.hasGroupedData,me=ee.keys,De=[],Ue=ee.dataGrouping&&ee.dataGrouping.groupAll?Me:0,Pe,Te,Ie,Fe,Oe=this.data;if(!Oe&&!Re){let Ge=[];Ge.length=ae.length,Oe=this.data=Ge}for(me&&Re&&(this.options.keys=!1),Fe=0;Fe<je;Fe++)Te=Me+Fe,Re?((Ie=new Ce(this,[ue[Fe]].concat(J(ve[Fe])))).dataGroup=this.groupMap[Ue+Fe],Ie.dataGroup.options&&(Ie.options=Ie.dataGroup.options,L(Ie,Ie.dataGroup.options),delete Ie.dataLabels)):(Ie=Oe[Te])||ae[Te]===void 0||(Oe[Te]=Ie=new Ce(this,ae[Te],ue[Fe])),Ie&&(Ie.index=Re?Ue+Fe:Te,De[Fe]=Ie);if(this.options.keys=me,Oe&&(je!==(Pe=Oe.length)||Re))for(Fe=0;Fe<Pe;Fe++)Fe!==Me||Re||(Fe+=je),Oe[Fe]&&(Oe[Fe].destroyElements(),Oe[Fe].plotX=void 0);this.data=Oe,this.points=De,V(this,"afterGeneratePoints")}getXExtremes(ee){return{min:S(ee),max:M(ee)}}getExtremes(ee,ae){let ue=this.xAxis,ve=this.yAxis,Ce=[],je=this.requireSorting&&!this.is("column")?1:0,Me=!!ve&&ve.positiveValuesOnly,Re=ae||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:me,processedYData:De}=this,Ue,Pe,Te,Ie,Fe,Oe,Ge,Qe=0,at=0,rt=0;if(this.cropped&&Re){let Nt=this.getProcessedData(!0);me=Nt.xData,De=Nt.yData}let dt=(ee=ee||this.stackedYData||De||[]).length,gt=me||this.xData;for(ue&&(Qe=(Ue=ue.getExtremes()).min,at=Ue.max),Oe=0;Oe<dt;Oe++)if(Ie=gt[Oe],Pe=(fe(Fe=ee[Oe])||se(Fe))&&((fe(Fe)?Fe>0:Fe.length)||!Me),Te=ae||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ue||(gt[Oe+je]||Ie)>=Qe&&(gt[Oe-je]||Ie)<=at,Pe&&Te)if(Ge=Fe.length)for(;Ge--;)fe(Fe[Ge])&&(Ce[rt++]=Fe[Ge]);else Ce[rt++]=Fe;let Tt={activeYData:Ce,dataMin:S(Ce),dataMax:M(Ce)};return V(this,"afterGetExtremes",{dataExtremes:Tt}),Tt}applyExtremes(){let ee=this.getExtremes();return this.dataMin=ee.dataMin,this.dataMax=ee.dataMax,ee}getFirstValidPoint(ee,ae=0,ue=1){let ve=ee.length,Ce=ae;for(;Ce>=0&&Ce<ve;){if(K(ee[Ce]))return ee[Ce];Ce+=ue}}translate(){var at;this.processedXData||this.processData(),this.generatePoints();let ee=this.options,ae=ee.stacking,ue=this.xAxis,ve=ue.categories,Ce=this.enabledDataSorting,je=this.yAxis,Me=this.points,Re=Me.length,me=this.pointPlacementToXValue(),De=!!me,Ue=ee.threshold,Pe=ee.startFromThreshold?Ue:0,Te,Ie,Fe,Oe,Ge=Number.MAX_VALUE;function Qe(rt){return N(rt,-1e9,1e9)}for(Te=0;Te<Re;Te++){let rt,dt=Me[Te],gt=dt.x,Tt,Nt,mt=dt.y,St=dt.low,kt=ae&&((at=je.stacking)==null?void 0:at.stacks[(this.negStacks&&mt<(Pe?0:Ue)?"-":"")+this.stackKey]);Ie=ue.translate(gt,!1,!1,!1,!0,me),dt.plotX=fe(Ie)?Y(Qe(Ie)):void 0,ae&&this.visible&&kt&&kt[gt]&&(Oe=this.getStackIndicator(Oe,gt,this.index),!dt.isNull&&Oe.key&&(Nt=(Tt=kt[gt]).points[Oe.key]),Tt&&se(Nt)&&(St=Nt[0],mt=Nt[1],St===Pe&&Oe.key===kt[gt].base&&(St=ye(fe(Ue)?Ue:je.min)),je.positiveValuesOnly&&K(St)&&St<=0&&(St=void 0),dt.total=dt.stackTotal=ye(Tt.total),dt.percentage=K(dt.y)&&Tt.total?dt.y/Tt.total*100:void 0,dt.stackY=mt,this.irregularWidths||Tt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),dt.yBottom=K(St)?Qe(je.translate(St,!1,!0,!1,!0)):void 0,this.dataModify&&(mt=this.dataModify.modifyValue(mt,Te)),fe(mt)&&dt.plotX!==void 0&&(rt=fe(rt=je.translate(mt,!1,!0,!1,!0))?Qe(rt):void 0),dt.plotY=rt,dt.isInside=this.isPointInside(dt),dt.clientX=De?Y(ue.translate(gt,!1,!1,!1,!0,me)):Ie,dt.negative=(dt.y||0)<(Ue||0),dt.category=ye(ve&&ve[dt.x],dt.x),dt.isNull||dt.visible===!1||(Fe!==void 0&&(Ge=Math.min(Ge,Math.abs(Ie-Fe))),Fe=Ie),dt.zone=this.zones.length?dt.getZone():void 0,!dt.graphic&&this.group&&Ce&&(dt.isNew=!0)}this.closestPointRangePx=Ge,V(this,"afterTranslate")}getValidPoints(ee,ae,ue){let ve=this.chart;return(ee||this.points||[]).filter(function(Ce){let{plotX:je,plotY:Me}=Ce;return!!((ue||!Ce.isNull&&fe(Me))&&(!ae||ve.isInsidePlot(je,Me,{inverted:ve.inverted})))&&Ce.visible!==!1})}getClipBox(){let{chart:ee,xAxis:ae,yAxis:ue}=this,{x:ve,y:Ce,width:je,height:Me}=le(ee.clipBox);return ae&&ae.len!==ee.plotSizeX&&(je=ae.len),ue&&ue.len!==ee.plotSizeY&&(Me=ue.len),ee.inverted&&!this.invertible&&([je,Me]=[Me,je]),{x:ve,y:Ce,width:je,height:Me}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:ee,group:ae,markerGroup:ue}=this,ve=ee.sharedClips,Ce=ee.renderer,je=this.getClipBox(),Me=this.getSharedClipKey(),Re=ve[Me];Re?Re.animate(je):ve[Me]=Re=Ce.clipRect(je),ae&&ae.clip(this.options.clip===!1?void 0:Re),ue&&ue.clip()}animate(ee){let{chart:ae,group:ue,markerGroup:ve}=this,Ce=ae.inverted,je=v(this.options.animation),Me=[this.getSharedClipKey(),je.duration,je.easing,je.defer].join(","),Re=ae.sharedClips[Me],me=ae.sharedClips[Me+"m"];if(ee&&ue){let De=this.getClipBox();if(Re)Re.attr("height",De.height);else{De.width=0,Ce&&(De.x=ae.plotHeight),Re=ae.renderer.clipRect(De),ae.sharedClips[Me]=Re;let Ue={x:-99,y:-99,width:Ce?ae.plotWidth+199:99,height:Ce?99:ae.plotHeight+199};me=ae.renderer.clipRect(Ue),ae.sharedClips[Me+"m"]=me}ue.clip(Re),ve==null||ve.clip(me)}else if(Re&&!Re.hasClass("highcharts-animating")){let De=this.getClipBox(),Ue=je.step;(ve!=null&&ve.element.childNodes.length||ae.series.length>1)&&(je.step=function(Pe,Te){Ue&&Ue.apply(Te,arguments),Te.prop==="width"&&(me!=null&&me.element)&&me.attr(Ce?"height":"width",Pe+99)}),Re.addClass("highcharts-animating").animate(De,je)}}afterAnimate(){this.setClip(),Se(this.chart.sharedClips,(ee,ae,ue)=>{ee&&!this.chart.container.querySelector(`[clip-path="url(#${ee.id})"]`)&&(ee.destroy(),delete ue[ae])}),this.finishedAnimating=!0,V(this,"afterAnimate")}drawPoints(ee=this.points){let ae,ue,ve,Ce,je,Me,Re,me=this.chart,De=me.styledMode,{colorAxis:Ue,options:Pe}=this,Te=Pe.marker,Ie=this[this.specialGroup||"markerGroup"],Fe=this.xAxis,Oe=ye(Te.enabled,!Fe||!!Fe.isRadial||null,this.closestPointRangePx>=Te.enabledThreshold*Te.radius);if(Te.enabled!==!1||this._hasPointMarkers)for(ae=0;ae<ee.length;ae++)if(Ce=(ve=(ue=ee[ae]).graphic)?"animate":"attr",je=ue.marker||{},Me=!!ue.marker,(Oe&&je.enabled===void 0||je.enabled)&&!ue.isNull&&ue.visible!==!1){let Ge=ye(je.symbol,this.symbol,"rect");Re=this.markerAttribs(ue,ue.selected&&"select"),this.enabledDataSorting&&(ue.startXPos=Fe.reversed?-(Re.width||0):Fe.width);let Qe=ue.isInside!==!1;if(!ve&&Qe&&((Re.width||0)>0||ue.hasImage)&&(ue.graphic=ve=me.renderer.symbol(Ge,Re.x,Re.y,Re.width,Re.height,Me?je:Te).add(Ie),this.enabledDataSorting&&me.hasRendered&&(ve.attr({x:ue.startXPos}),Ce="animate")),ve&&Ce==="animate"&&ve[Qe?"show":"hide"](Qe).animate(Re),ve){let at=this.pointAttribs(ue,De||!ue.selected?void 0:"select");De?Ue&&ve.css({fill:at.fill}):ve[Ce](at)}ve&&ve.addClass(ue.getClassName(),!0)}else ve&&(ue.graphic=ve.destroy())}markerAttribs(ee,ae){let ue=this.options,ve=ue.marker,Ce=ee.marker||{},je=Ce.symbol||ve.symbol,Me={},Re,me,De=ye(Ce.radius,ve&&ve.radius);ae&&(Re=ve.states[ae],De=ye((me=Ce.states&&Ce.states[ae])&&me.radius,Re&&Re.radius,De&&De+(Re&&Re.radiusPlus||0))),ee.hasImage=je&&je.indexOf("url")===0,ee.hasImage&&(De=0);let Ue=ee.pos();return fe(De)&&Ue&&(ue.crisp&&(Ue[0]=Z(Ue[0],ee.hasImage?0:je==="rect"?(ve==null?void 0:ve.lineWidth)||0:1)),Me.x=Ue[0]-De,Me.y=Ue[1]-De),De&&(Me.width=Me.height=2*De),Me}pointAttribs(ee,ae){let ue=this.options.marker,ve=ee&&ee.options,Ce=ve&&ve.marker||{},je=ve&&ve.color,Me=ee&&ee.color,Re=ee&&ee.zone&&ee.zone.color,me,De,Ue=this.color,Pe,Te,Ie=ye(Ce.lineWidth,ue.lineWidth),Fe=1;return Ue=je||Re||Me||Ue,Pe=Ce.fillColor||ue.fillColor||Ue,Te=Ce.lineColor||ue.lineColor||Ue,ae=ae||"normal",me=ue.states[ae]||{},Ie=ye((De=Ce.states&&Ce.states[ae]||{}).lineWidth,me.lineWidth,Ie+ye(De.lineWidthPlus,me.lineWidthPlus,0)),Pe=De.fillColor||me.fillColor||Pe,{stroke:Te=De.lineColor||me.lineColor||Te,"stroke-width":Ie,fill:Pe,opacity:Fe=ye(De.opacity,me.opacity,Fe)}}destroy(ee){let ae,ue,ve,Ce=this,je=Ce.chart,Me=/AppleWebKit\/533/.test(E.navigator.userAgent),Re=Ce.data||[];for(V(Ce,"destroy",{keepEventsForUpdate:ee}),this.removeEvents(ee),(Ce.axisTypes||[]).forEach(function(me){(ve=Ce[me])&&ve.series&&(O(ve.series,Ce),ve.isDirty=ve.forceRedraw=!0)}),Ce.legendItem&&Ce.chart.legend.destroyItem(Ce),ae=Re.length;ae--;)(ue=Re[ae])&&ue.destroy&&ue.destroy();for(let me of Ce.zones)B(me,void 0,!0);b.clearTimeout(Ce.animationTimeout),Se(Ce,function(me,De){me instanceof g&&!me.survive&&me[Me&&De==="group"?"hide":"destroy"]()}),je.hoverSeries===Ce&&(je.hoverSeries=void 0),O(je.series,Ce),je.orderItems("series"),Se(Ce,function(me,De){ee&&De==="hcEvents"||delete Ce[De]})}applyZones(){let{area:ee,chart:ae,graph:ue,zones:ve,points:Ce,xAxis:je,yAxis:Me,zoneAxis:Re}=this,{inverted:me,renderer:De}=ae,Ue=this[`${Re}Axis`],{isXAxis:Pe,len:Te=0}=Ue||{},Ie=((ue==null?void 0:ue.strokeWidth())||0)/2+1,Fe=(Oe,Ge=0,Qe=0)=>{me&&(Qe=Te-Qe);let{translated:at=0,lineClip:rt}=Oe,dt=Qe-at;rt==null||rt.push(["L",Ge,Math.abs(dt)<Ie?Qe-Ie*(dt<=0?-1:1):at])};if(ve.length&&(ue||ee)&&Ue&&fe(Ue.min)){let Oe=Ue.getExtremes().max,Ge=rt=>{rt.forEach((dt,gt)=>{(dt[0]==="M"||dt[0]==="L")&&(rt[gt]=[dt[0],Pe?Te-dt[1]:dt[1],Pe?dt[2]:Te-dt[2]])})};if(ve.forEach(rt=>{rt.lineClip=[],rt.translated=N(Ue.toPixels(ye(rt.value,Oe),!0)||0,0,Te)}),ue&&!this.showLine&&ue.hide(),ee&&ee.hide(),Re==="y"&&Ce.length<je.len)for(let rt of Ce){let{plotX:dt,plotY:gt,zone:Tt}=rt,Nt=Tt&&ve[ve.indexOf(Tt)-1];Tt&&Fe(Tt,dt,gt),Nt&&Fe(Nt,dt,gt)}let Qe=[],at=Ue.toPixels(Ue.getExtremes().min,!0);ve.forEach(rt=>{var hr,rr;let dt=rt.lineClip||[],gt=Math.round(rt.translated||0);je.reversed&&dt.reverse();let{clip:Tt,simpleClip:Nt}=rt,mt=0,St=0,kt=je.len,ii=Me.len;Pe?(mt=gt,kt=at):(St=gt,ii=at);let fi=[["M",mt,St],["L",kt,St],["L",kt,ii],["L",mt,ii],["Z"]],Gt=[fi[0],...dt,fi[1],fi[2],...Qe,fi[3],fi[4]];Qe=dt.reverse(),at=gt,me&&(Ge(Gt),ee&&Ge(fi)),Tt?(Tt.animate({d:Gt}),Nt==null||Nt.animate({d:fi})):(Tt=rt.clip=De.path(Gt),ee&&(Nt=rt.simpleClip=De.path(fi))),ue&&((hr=rt.graph)==null||hr.clip(Tt)),ee&&((rr=rt.area)==null||rr.clip(Nt))})}else this.visible&&(ue&&ue.show(),ee&&ee.show())}plotGroup(ee,ae,ue,ve,Ce){let je=this[ee],Me=!je,Re={visibility:ue,zIndex:ve||.1};return K(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Re.opacity=this.opacity),je||(this[ee]=je=this.chart.renderer.g().add(Ce)),je.addClass("highcharts-"+ae+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(K(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(je.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),je.attr(Re)[Me?"attr":"animate"](this.getPlotBox(ae)),je}getPlotBox(ee){let ae=this.xAxis,ue=this.yAxis,ve=this.chart,Ce=ve.inverted&&!ve.polar&&ae&&this.invertible&&ee==="series";return ve.inverted&&(ae=ue,ue=this.xAxis),{translateX:ae?ae.left:ve.plotLeft,translateY:ue?ue.top:ve.plotTop,rotation:Ce?90:0,rotationOriginX:Ce?(ae.len-ue.len)/2:0,rotationOriginY:Ce?(ae.len+ue.len)/2:0,scaleX:Ce?-1:1,scaleY:1}}removeEvents(ee){let{eventsToUnbind:ae}=this;ee||Ee(this),ae.length&&(ae.forEach(ue=>{ue()}),ae.length=0)}render(){var De,Ue,Pe,Te,Ie;let ee=this,{chart:ae,options:ue,hasRendered:ve}=ee,Ce=v(ue.animation),je=ee.visible?"inherit":"hidden",Me=ue.zIndex,Re=ae.seriesGroup,me=ee.finishedAnimating?0:Ce.duration;V(this,"render"),ee.plotGroup("group","series",je,Me,Re),ee.markerGroup=ee.plotGroup("markerGroup","markers",je,Me,Re),ue.clip!==!1&&ee.setClip(),me&&((De=ee.animate)==null||De.call(ee,!0)),ee.drawGraph&&(ee.drawGraph(),ee.applyZones()),ee.visible&&ee.drawPoints(),(Ue=ee.drawDataLabels)==null||Ue.call(ee),(Pe=ee.redrawPoints)==null||Pe.call(ee),ue.enableMouseTracking&&((Te=ee.drawTracker)==null||Te.call(ee)),me&&((Ie=ee.animate)==null||Ie.call(ee)),ve||(me&&Ce.defer&&(me+=Ce.defer),ee.animationTimeout=ie(()=>{ee.afterAnimate()},me||0)),ee.isDirty=!1,ee.hasRendered=!0,V(ee,"afterRender")}redraw(){let ee=this.isDirty||this.isDirtyData;this.translate(),this.render(),ee&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(ee,ae){let{xAxis:ue,yAxis:ve}=this,Ce=this.chart.inverted;return this.searchKDTree({clientX:Ce?ue.len-ee.chartY+ue.pos:ee.chartX-ue.pos,plotY:Ce?ve.len-ee.chartX+ve.pos:ee.chartY-ve.pos},ae,ee)}buildKDTree(ee){this.buildingKdTree=!0;let ae=this,ue=ae.options.findNearestPointBy.indexOf("y")>-1?2:1;delete ae.kdTree,ie(function(){ae.kdTree=function ve(Ce,je,Me){let Re,me,De=Ce==null?void 0:Ce.length;if(De)return Re=ae.kdAxisArray[je%Me],Ce.sort((Ue,Pe)=>(Ue[Re]||0)-(Pe[Re]||0)),{point:Ce[me=Math.floor(De/2)],left:ve(Ce.slice(0,me),je+1,Me),right:ve(Ce.slice(me+1),je+1,Me)}}(ae.getValidPoints(void 0,!ae.directTouch),ue,ue),ae.buildingKdTree=!1},ae.options.kdNow||(ee==null?void 0:ee.type)==="touchstart"?0:1)}searchKDTree(ee,ae,ue){let ve=this,[Ce,je]=this.kdAxisArray,Me=ae?"distX":"dist",Re=(ve.options.findNearestPointBy||"").indexOf("y")>-1?2:1,me=!!ve.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ue),this.kdTree)return function De(Ue,Pe,Te,Ie){var Tt;let Fe=Pe.point,Oe=ve.kdAxisArray[Te%Ie],Ge,Qe,at=Fe;(function(Nt,mt){var yr;let St=Nt[Ce],kt=mt[Ce],ii=K(St)&&K(kt)?St-kt:null,fi=Nt[je],Gt=mt[je],hr=K(fi)&&K(Gt)?fi-Gt:0,rr=me&&((yr=mt.marker)==null?void 0:yr.radius)||0;mt.dist=Math.sqrt((ii&&ii*ii||0)+hr*hr)-rr,mt.distX=K(ii)?Math.abs(ii)-rr:Number.MAX_VALUE})(Ue,Fe);let rt=(Ue[Oe]||0)-(Fe[Oe]||0)+(me&&((Tt=Fe.marker)==null?void 0:Tt.radius)||0),dt=rt<0?"left":"right",gt=rt<0?"right":"left";return Pe[dt]&&(at=(Ge=De(Ue,Pe[dt],Te+1,Ie))[Me]<at[Me]?Ge:Fe),Pe[gt]&&Math.sqrt(rt*rt)<at[Me]&&(at=(Qe=De(Ue,Pe[gt],Te+1,Ie))[Me]<at[Me]?Qe:at),at}(ee,this.kdTree,Re,Re)}pointPlacementToXValue(){let{options:ee,xAxis:ae}=this,ue=ee.pointPlacement;return ue==="between"&&(ue=ae.reversed?-.5:.5),fe(ue)?ue*(ee.pointRange||ae.pointRange):0}isPointInside(ee){let{chart:ae,xAxis:ue,yAxis:ve}=this,{plotX:Ce=-1,plotY:je=-1}=ee;return je>=0&&je<=(ve?ve.len:ae.plotHeight)&&Ce>=0&&Ce<=(ue?ue.len:ae.plotWidth)}drawTracker(){var Pe;let ee=this,ae=ee.options,ue=ae.trackByArea,ve=[].concat((ue?ee.areaPath:ee.graphPath)||[]),Ce=ee.chart,je=Ce.pointer,Me=Ce.renderer,Re=((Pe=Ce.options.tooltip)==null?void 0:Pe.snap)||0,me=()=>{ae.enableMouseTracking&&Ce.hoverSeries!==ee&&ee.onMouseOver()},De="rgba(192,192,192,"+(w?1e-4:.002)+")",Ue=ee.tracker;Ue?Ue.attr({d:ve}):ee.graph&&(ee.tracker=Ue=Me.path(ve).attr({visibility:ee.visible?"inherit":"hidden",zIndex:2}).addClass(ue?"highcharts-tracker-area":"highcharts-tracker-line").add(ee.group),Ce.styledMode||Ue.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:De,fill:ue?De:"none","stroke-width":ee.graph.strokeWidth()+(ue?0:2*Re)}),[ee.tracker,ee.markerGroup,ee.dataLabelsGroup].forEach(Te=>{Te&&(Te.addClass("highcharts-tracker").on("mouseover",me).on("mouseout",Ie=>{je==null||je.onTrackerMouseOut(Ie)}),ae.cursor&&!Ce.styledMode&&Te.css({cursor:ae.cursor}),Te.on("touchstart",me))})),V(this,"afterDrawTracker")}addPoint(ee,ae,ue,ve,Ce){let je,Me,Re=this.options,me=this.data,De=this.chart,Ue=this.xAxis,Pe=Ue&&Ue.hasNames&&Ue.names,Te=Re.data,Ie=this.xData;ae=ye(ae,!0);let Fe={series:this};this.pointClass.prototype.applyOptions.apply(Fe,[ee]);let Oe=Fe.x;if(Me=Ie.length,this.requireSorting&&Oe<Ie[Me-1])for(je=!0;Me&&Ie[Me-1]>Oe;)Me--;this.updateParallelArrays(Fe,"splice",[Me,0,0]),this.updateParallelArrays(Fe,Me),Pe&&Fe.name&&(Pe[Oe]=Fe.name),Te.splice(Me,0,ee),(je||this.processedData)&&(this.data.splice(Me,0,null),this.processData()),Re.legendType==="point"&&this.generatePoints(),ue&&(me[0]&&me[0].remove?me[0].remove(!1):(me.shift(),this.updateParallelArrays(Fe,"shift"),Te.shift())),Ce!==!1&&V(this,"addPoint",{point:Fe}),this.isDirty=!0,this.isDirtyData=!0,ae&&De.redraw(ve)}removePoint(ee,ae,ue){let ve=this,Ce=ve.data,je=Ce[ee],Me=ve.points,Re=ve.chart,me=function(){Me&&Me.length===Ce.length&&Me.splice(ee,1),Ce.splice(ee,1),ve.options.data.splice(ee,1),ve.updateParallelArrays(je||{series:ve},"splice",[ee,1]),je&&je.destroy(),ve.isDirty=!0,ve.isDirtyData=!0,ae&&Re.redraw()};_(ue,Re),ae=ye(ae,!0),je?je.firePointEvent("remove",null,me):me()}remove(ee,ae,ue,ve){let Ce=this,je=Ce.chart;function Me(){Ce.destroy(ve),je.isDirtyLegend=je.isDirtyBox=!0,je.linkSeries(ve),ye(ee,!0)&&je.redraw(ae)}ue!==!1?V(Ce,"remove",null,Me):Me()}update(ee,ae){var Ge,Qe,at;V(this,"update",{options:ee=F(ee,this.userOptions)});let ue=this,ve=ue.chart,Ce=ue.userOptions,je=ue.initialType||ue.type,Me=ve.options.plotOptions,Re=A[je].prototype,me=ue.finishedAnimating&&{animation:!1},De={},Ue,Pe,Te=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Ie=ee.type||Ce.type||ve.options.chart.type,Fe=!(this.hasDerivedData||Ie&&Ie!==this.type||ee.pointStart!==void 0||ee.pointInterval!==void 0||ee.relativeXValue!==void 0||ee.joinBy||ee.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(rt=>ue.hasOptionChanged(rt)));Ie=Ie||je,Fe&&(Te.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),ee.visible!==!1&&Te.push("area","graph"),ue.parallelArrays.forEach(function(rt){Te.push(rt+"Data")}),ee.data&&(ee.dataSorting&&L(ue.options.dataSorting,ee.dataSorting),this.setData(ee.data,!1))),ee=le(Ce,{index:Ce.index===void 0?ue.index:Ce.index,pointStart:((Ge=Me==null?void 0:Me.series)==null?void 0:Ge.pointStart)??Ce.pointStart??((Qe=ue.xData)==null?void 0:Qe[0])},!Fe&&{data:ue.options.data},ee,me),Fe&&ee.data&&(ee.data=ue.options.data),(Te=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(Te)).forEach(function(rt){Te[rt]=ue[rt],delete ue[rt]});let Oe=!1;if(A[Ie]){if(Oe=Ie!==ue.type,ue.remove(!1,!1,!1,!0),Oe)if(ve.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ue,A[Ie].prototype);else{let rt=Object.hasOwnProperty.call(ue,"hcEvents")&&ue.hcEvents;for(Pe in Re)ue[Pe]=void 0;L(ue,A[Ie].prototype),rt?ue.hcEvents=rt:delete ue.hcEvents}}else R(17,!0,ve,{missingModuleFor:Ie});if(Te.forEach(function(rt){ue[rt]=Te[rt]}),ue.init(ve,ee),Fe&&this.points)for(let rt of((Ue=ue.options).visible===!1?(De.graphic=1,De.dataLabel=1):(this.hasMarkerChanged(Ue,Ce)&&(De.graphic=1),(at=ue.hasDataLabels)!=null&&at.call(ue)||(De.dataLabel=1)),this.points))rt&&rt.series&&(rt.resolveColor(),Object.keys(De).length&&rt.destroyElements(De),Ue.showInLegend===!1&&rt.legendItem&&ve.legend.destroyItem(rt));ue.initialType=je,ve.linkSeries(),ve.setSortedData(),Oe&&ue.linkedSeries.length&&(ue.isDirtyData=!0),V(this,"afterUpdate"),ye(ae,!0)&&ve.redraw(!!Fe&&void 0)}setName(ee){this.name=this.options.name=this.userOptions.name=ee,this.chart.isDirtyLegend=!0}hasOptionChanged(ee){var Me,Re;let ae=this.chart,ue=this.options[ee],ve=ae.options.plotOptions,Ce=this.userOptions[ee],je=ye((Me=ve==null?void 0:ve[this.type])==null?void 0:Me[ee],(Re=ve==null?void 0:ve.series)==null?void 0:Re[ee]);return Ce&&!K(je)?ue!==Ce:ue!==ye(je,ue)}onMouseOver(){let ee=this.chart,ae=ee.hoverSeries,ue=ee.pointer;ue==null||ue.setHoverChartIndex(),ae&&ae!==this&&ae.onMouseOut(),this.options.events.mouseOver&&V(this,"mouseOver"),this.setState("hover"),ee.hoverSeries=this}onMouseOut(){let ee=this.options,ae=this.chart,ue=ae.tooltip,ve=ae.hoverPoint;ae.hoverSeries=null,ve&&ve.onMouseOut(),this&&ee.events.mouseOut&&V(this,"mouseOut"),ue&&!this.stickyTracking&&(!ue.shared||this.noSharedTooltip)&&ue.hide(),ae.series.forEach(function(Ce){Ce.setState("",!0)})}setState(ee,ae){let ue=this,ve=ue.options,Ce=ue.graph,je=ve.inactiveOtherPoints,Me=ve.states,Re=ye(Me[ee||"normal"]&&Me[ee||"normal"].animation,ue.chart.options.chart.animation),me=ve.lineWidth,De=ve.opacity;if(ee=ee||"",ue.state!==ee&&([ue.group,ue.markerGroup,ue.dataLabelsGroup].forEach(function(Ue){Ue&&(ue.state&&Ue.removeClass("highcharts-series-"+ue.state),ee&&Ue.addClass("highcharts-series-"+ee))}),ue.state=ee,!ue.chart.styledMode)){if(Me[ee]&&Me[ee].enabled===!1)return;if(ee&&(me=Me[ee].lineWidth||me+(Me[ee].lineWidthPlus||0),De=ye(Me[ee].opacity,De)),Ce&&!Ce.dashstyle&&fe(me))for(let Ue of[Ce,...this.zones.map(Pe=>Pe.graph)])Ue==null||Ue.animate({"stroke-width":me},Re);je||[ue.group,ue.markerGroup,ue.dataLabelsGroup,ue.labelBySeries].forEach(function(Ue){Ue&&Ue.animate({opacity:De},Re)})}ae&&je&&ue.points&&ue.setAllPointsToState(ee||void 0)}setAllPointsToState(ee){this.points.forEach(function(ae){ae.setState&&ae.setState(ee)})}setVisible(ee,ae){var Re;let ue=this,ve=ue.chart,Ce=ve.options.chart.ignoreHiddenSeries,je=ue.visible;ue.visible=ee=ue.options.visible=ue.userOptions.visible=ee===void 0?!je:ee;let Me=ee?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(me=>{var De;(De=ue[me])==null||De[Me]()}),(ve.hoverSeries===ue||((Re=ve.hoverPoint)==null?void 0:Re.series)===ue)&&ue.onMouseOut(),ue.legendItem&&ve.legend.colorizeItem(ue,ee),ue.isDirty=!0,ue.options.stacking&&ve.series.forEach(me=>{me.options.stacking&&me.visible&&(me.isDirty=!0)}),ue.linkedSeries.forEach(me=>{me.setVisible(ee,!1)}),Ce&&(ve.isDirtyBox=!0),V(ue,Me),ae!==!1&&ve.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(ee){this.selected=ee=this.options.selected=ee===void 0?!this.selected:ee,this.checkbox&&(this.checkbox.checked=ee),V(this,ee?"select":"unselect")}shouldShowTooltip(ee,ae,ue={}){return ue.series=this,ue.visiblePlotOnly=!0,this.chart.isInsidePlot(ee,ae,ue)}drawLegendSymbol(ee,ae){var ue;(ue=h[this.options.legendSymbol||"rectangle"])==null||ue.call(this,ee,ae)}}return oe.defaultOptions=m,oe.types=y.seriesTypes,oe.registerType=y.registerSeriesType,L(oe.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:f,requireSorting:!0,sorted:!0}),y.series=oe,oe}),r(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y){var g;let{animObject:b,setAnimation:v}=n,{registerEventOptions:_}=a,{composed:T,marginNames:k}=c,{distribute:w}=f,{format:E}=m,{addEvent:A,createElement:M,css:S,defined:N,discardElement:Y,find:Z,fireEvent:K,isNumber:B,merge:F,pick:O,pushUnique:R,relativeLength:L,stableSort:G,syncTimeout:V}=y;class ${constructor(W,se){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=W,this.setOptions(se),se.enabled&&(this.render(),_(this,se),A(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),A(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(W){let se=O(W.padding,8);this.options=W,this.chart.styledMode||(this.itemStyle=W.itemStyle,this.itemHiddenStyle=F(this.itemStyle,W.itemHiddenStyle)),this.itemMarginTop=W.itemMarginTop,this.itemMarginBottom=W.itemMarginBottom,this.padding=se,this.initialItemY=se-5,this.symbolWidth=O(W.symbolWidth,16),this.pages=[],this.proximate=W.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(W,se){let fe=this.chart;this.setOptions(F(!0,this.options,W)),"events"in this.options&&_(this,this.options),this.destroy(),fe.isDirtyLegend=fe.isDirtyBox=!0,O(se,!0)&&fe.redraw(),K(this,"afterUpdate",{redraw:se})}colorizeItem(W,se){let{area:fe,group:re,label:le,line:Se,symbol:ye}=W.legendItem||{};if(re==null||re[se?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Ee={}}=this,J=Ee.color,{fillColor:ie,fillOpacity:oe,lineColor:we,marker:ee}=W.options,ae=ue=>(!se&&(ue.fill&&(ue.fill=J),ue.stroke&&(ue.stroke=J)),ue);le==null||le.css(F(se?this.itemStyle:Ee)),Se==null||Se.attr(ae({stroke:we||W.color})),ye&&ye.attr(ae(ee&&ye.isMarker?W.pointAttribs():{fill:W.color})),fe==null||fe.attr(ae({fill:ie||W.color,"fill-opacity":ie?1:oe??.75}))}K(this,"afterColorizeItem",{item:W,visible:se})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(W){let{group:se,x:fe=0,y:re=0}=W.legendItem||{},le=this.options,Se=le.symbolPadding,ye=!le.rtl,Ee=W.checkbox;if(se&&se.element){let J={translateX:ye?fe:this.legendWidth-fe-2*Se-4,translateY:re};se[N(se.translateY)?"animate":"attr"](J,void 0,()=>{K(this,"afterPositionItem",{item:W})})}Ee&&(Ee.x=fe,Ee.y=re)}destroyItem(W){let se=W.checkbox,fe=W.legendItem||{};for(let re of["group","label","line","symbol"])fe[re]&&(fe[re]=fe[re].destroy());se&&Y(se),W.legendItem=void 0}destroy(){for(let W of this.getAllItems())this.destroyItem(W);for(let W of["clipRect","up","down","pager","nav","box","title","group"])this[W]&&(this[W]=this[W].destroy());this.display=null}positionCheckboxes(){let W,se=this.group&&this.group.alignAttr,fe=this.clipHeight||this.legendHeight,re=this.titleHeight;se&&(W=se.translateY,this.allItems.forEach(function(le){let Se,ye=le.checkbox;ye&&(Se=W+re+ye.y+(this.scrollOffset||0)+3,S(ye,{left:se.translateX+le.checkboxOffset+ye.x-20+"px",top:Se+"px",display:this.proximate||Se>W-6&&Se<W+fe-6?"":"none"}))},this))}renderTitle(){let W=this.options,se=this.padding,fe=W.title,re,le=0;fe.text&&(this.title||(this.title=this.chart.renderer.label(fe.text,se-3,se-4,void 0,void 0,void 0,W.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(fe.style),this.title.add(this.group)),fe.width||this.title.css({width:this.maxLegendWidth+"px"}),le=(re=this.title.getBBox()).height,this.offsetWidth=re.width,this.contentGroup.attr({translateY:le})),this.titleHeight=le}setText(W){let se=this.options;W.legendItem.label.attr({text:se.labelFormat?E(se.labelFormat,W,this.chart):se.labelFormatter.call(W)})}renderItem(W){let se=W.legendItem=W.legendItem||{},fe=this.chart,re=fe.renderer,le=this.options,Se=le.layout==="horizontal",ye=this.symbolWidth,Ee=le.symbolPadding||0,J=this.itemStyle,ie=this.itemHiddenStyle,oe=Se?O(le.itemDistance,20):0,we=!le.rtl,ee=!W.series,ae=!ee&&W.series.drawLegendSymbol?W.series:W,ue=ae.options,ve=!!this.createCheckboxForItem&&ue&&ue.showCheckbox,Ce=le.useHTML,je=W.options.className,Me=se.label,Re=ye+Ee+oe+(ve?20:0);!Me&&(se.group=re.g("legend-item").addClass("highcharts-"+ae.type+"-series highcharts-color-"+W.colorIndex+(je?" "+je:"")+(ee?" highcharts-series-"+W.index:"")).attr({zIndex:1}).add(this.scrollGroup),se.label=Me=re.text("",we?ye+Ee:-Ee,this.baseline||0,Ce),fe.styledMode||Me.css(F(W.visible?J:ie)),Me.attr({align:we?"left":"right",zIndex:2}).add(se.group),!this.baseline&&(this.fontMetrics=re.fontMetrics(Me),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Me.attr("y",this.baseline),this.symbolHeight=O(le.symbolHeight,this.fontMetrics.f),le.squareSymbol&&(this.symbolWidth=O(le.symbolWidth,Math.max(this.symbolHeight,16)),Re=this.symbolWidth+Ee+oe+(ve?20:0),we&&Me.attr("x",this.symbolWidth+Ee))),ae.drawLegendSymbol(this,W),this.setItemEvents&&this.setItemEvents(W,Me,Ce)),ve&&!W.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(W),this.colorizeItem(W,W.visible),(fe.styledMode||!J.width)&&Me.css({width:(le.itemWidth||this.widthOption||fe.spacingBox.width)-Re+"px"}),this.setText(W);let me=Me.getBBox(),De=this.fontMetrics&&this.fontMetrics.h||0;W.itemWidth=W.checkboxOffset=le.itemWidth||se.labelWidth||me.width+Re,this.maxItemWidth=Math.max(this.maxItemWidth,W.itemWidth),this.totalItemWidth+=W.itemWidth,this.itemHeight=W.itemHeight=Math.round(se.labelHeight||(me.height>1.5*De?me.height:De))}layoutItem(W){let se=this.options,fe=this.padding,re=se.layout==="horizontal",le=W.itemHeight,Se=this.itemMarginBottom,ye=this.itemMarginTop,Ee=re?O(se.itemDistance,20):0,J=this.maxLegendWidth,ie=se.alignColumns&&this.totalItemWidth>J?this.maxItemWidth:W.itemWidth,oe=W.legendItem||{};re&&this.itemX-fe+ie>J&&(this.itemX=fe,this.lastLineHeight&&(this.itemY+=ye+this.lastLineHeight+Se),this.lastLineHeight=0),this.lastItemY=ye+this.itemY+Se,this.lastLineHeight=Math.max(le,this.lastLineHeight),oe.x=this.itemX,oe.y=this.itemY,re?this.itemX+=ie:(this.itemY+=ye+le+Se,this.lastLineHeight=le),this.offsetWidth=this.widthOption||Math.max((re?this.itemX-fe-(W.checkbox?0:Ee):ie)+fe,this.offsetWidth)}getAllItems(){let W=[];return this.chart.series.forEach(function(se){let fe=se&&se.options;se&&O(fe.showInLegend,!N(fe.linkedTo)&&void 0,!0)&&(W=W.concat((se.legendItem||{}).labels||(fe.legendType==="point"?se.data:se)))}),K(this,"afterGetAllItems",{allItems:W}),W}getAlignment(){let W=this.options;return this.proximate?W.align.charAt(0)+"tv":W.floating?"":W.align.charAt(0)+W.verticalAlign.charAt(0)+W.layout.charAt(0)}adjustMargins(W,se){let fe=this.chart,re=this.options,le=this.getAlignment();le&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(Se,ye){Se.test(le)&&!N(W[ye])&&(fe[k[ye]]=Math.max(fe[k[ye]],fe.legend[(ye+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][ye]*re[ye%2?"x":"y"]+O(re.margin,12)+se[ye]+(fe.titleOffset[ye]||0)))})}proximatePositions(){let W,se=this.chart,fe=[],re=this.options.align==="left";for(let le of(this.allItems.forEach(function(Se){let ye,Ee,J=re,ie,oe;Se.yAxis&&(Se.xAxis.options.reversed&&(J=!J),Se.points&&(ye=Z(J?Se.points:Se.points.slice(0).reverse(),function(we){return B(we.plotY)})),Ee=this.itemMarginTop+Se.legendItem.label.getBBox().height+this.itemMarginBottom,oe=Se.yAxis.top-se.plotTop,ie=Se.visible?(ye?ye.plotY:Se.yAxis.height)+(oe-.3*Ee):oe+Se.yAxis.height,fe.push({target:ie,size:Ee,item:Se}))},this),w(fe,se.plotHeight)))W=le.item.legendItem||{},B(le.pos)&&(W.y=se.plotTop-se.spacing[0]+le.pos)}render(){let W=this.chart,se=W.renderer,fe=this.options,re=this.padding,le=this.getAllItems(),Se,ye,Ee,J=this.group,ie,oe=this.box;this.itemX=re,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=L(fe.width,W.spacingBox.width-re),ie=W.spacingBox.width-2*re-fe.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(ie/=2),this.maxLegendWidth=this.widthOption||ie,J||(this.group=J=se.g("legend").addClass(fe.className||"").attr({zIndex:7}).add(),this.contentGroup=se.g().attr({zIndex:1}).add(J),this.scrollGroup=se.g().add(this.contentGroup)),this.renderTitle(),G(le,(we,ee)=>(we.options&&we.options.legendIndex||0)-(ee.options&&ee.options.legendIndex||0)),fe.reversed&&le.reverse(),this.allItems=le,this.display=Se=!!le.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,le.forEach(this.renderItem,this),le.forEach(this.layoutItem,this),ye=(this.widthOption||this.offsetWidth)+re,Ee=this.lastItemY+this.lastLineHeight+this.titleHeight,Ee=this.handleOverflow(Ee)+re,oe||(this.box=oe=se.rect().addClass("highcharts-legend-box").attr({r:fe.borderRadius}).add(J)),W.styledMode||oe.attr({stroke:fe.borderColor,"stroke-width":fe.borderWidth||0,fill:fe.backgroundColor||"none"}).shadow(fe.shadow),ye>0&&Ee>0&&oe[oe.placed?"animate":"attr"](oe.crisp.call({},{x:0,y:0,width:ye,height:Ee},oe.strokeWidth())),J[Se?"show":"hide"](),W.styledMode&&J.getStyle("display")==="none"&&(ye=Ee=0),this.legendWidth=ye,this.legendHeight=Ee,Se&&this.align(),this.proximate||this.positionItems(),K(this,"afterRender")}align(W=this.chart.spacingBox){let se=this.chart,fe=this.options,re=W.y;/(lth|ct|rth)/.test(this.getAlignment())&&se.titleOffset[0]>0?re+=se.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&se.titleOffset[2]>0&&(re-=se.titleOffset[2]),re!==W.y&&(W=F(W,{y:re})),se.hasRendered||(this.group.placed=!1),this.group.align(F(fe,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":fe.verticalAlign}),!0,W)}handleOverflow(W){let se=this,fe=this.chart,re=fe.renderer,le=this.options,Se=le.y,ye=le.verticalAlign==="top",Ee=this.padding,J=le.maxHeight,ie=le.navigation,oe=O(ie.animation,!0),we=ie.arrowSize||12,ee=this.pages,ae=this.allItems,ue=function(Ue){typeof Ue=="number"?De.attr({height:Ue}):De&&(se.clipRect=De.destroy(),se.contentGroup.clip()),se.contentGroup.div&&(se.contentGroup.div.style.clip=Ue?"rect("+Ee+"px,9999px,"+(Ee+Ue)+"px,0)":"auto")},ve=function(Ue){return se[Ue]=re.circle(0,0,1.3*we).translate(we/2,we/2).add(me),fe.styledMode||se[Ue].attr("fill","rgba(0,0,0,0.0001)"),se[Ue]},Ce,je,Me,Re=fe.spacingBox.height+(ye?-Se:Se)-Ee,me=this.nav,De=this.clipRect;return le.layout!=="horizontal"||le.verticalAlign==="middle"||le.floating||(Re/=2),J&&(Re=Math.min(Re,J)),ee.length=0,W&&Re>0&&W>Re&&ie.enabled!==!1?(this.clipHeight=Ce=Math.max(Re-20-this.titleHeight-Ee,0),this.currentPage=O(this.currentPage,1),this.fullHeight=W,ae.forEach((Ue,Pe)=>{let Te=(Me=Ue.legendItem||{}).y||0,Ie=Math.round(Me.label.getBBox().height),Fe=ee.length;(!Fe||Te-ee[Fe-1]>Ce&&(je||Te)!==ee[Fe-1])&&(ee.push(je||Te),Fe++),Me.pageIx=Fe-1,je&&((ae[Pe-1].legendItem||{}).pageIx=Fe-1),Pe===ae.length-1&&Te+Ie-ee[Fe-1]>Ce&&Te>ee[Fe-1]&&(ee.push(Te),Me.pageIx=Fe),Te!==je&&(je=Te)}),De||(De=se.clipRect=re.clipRect(0,Ee-2,9999,0),se.contentGroup.clip(De)),ue(Ce),me||(this.nav=me=re.g().attr({zIndex:1}).add(this.group),this.up=re.symbol("triangle",0,0,we,we).add(me),ve("upTracker").on("click",function(){se.scroll(-1,oe)}),this.pager=re.text("",15,10).addClass("highcharts-legend-navigation"),!fe.styledMode&&ie.style&&this.pager.css(ie.style),this.pager.add(me),this.down=re.symbol("triangle-down",0,0,we,we).add(me),ve("downTracker").on("click",function(){se.scroll(1,oe)})),se.scroll(0),W=Re):me&&(ue(),this.nav=me.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),W}scroll(W,se){let fe=this.chart,re=this.pages,le=re.length,Se=this.clipHeight,ye=this.options.navigation,Ee=this.pager,J=this.padding,ie=this.currentPage+W;ie>le&&(ie=le),ie>0&&(se!==void 0&&v(se,fe),this.nav.attr({translateX:J,translateY:Se+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(oe){oe.attr({class:ie===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Ee.attr({text:ie+"/"+le}),[this.down,this.downTracker].forEach(function(oe){oe.attr({x:18+this.pager.getBBox().width,class:ie===le?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),fe.styledMode||(this.up.attr({fill:ie===1?ye.inactiveColor:ye.activeColor}),this.upTracker.css({cursor:ie===1?"default":"pointer"}),this.down.attr({fill:ie===le?ye.inactiveColor:ye.activeColor}),this.downTracker.css({cursor:ie===le?"default":"pointer"})),this.scrollOffset=-re[ie-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=ie,this.positionCheckboxes(),V(()=>{K(this,"afterScroll",{currentPage:ie})},b(O(se,fe.renderer.globalAnimation,!0)).duration))}setItemEvents(W,se,fe){let re=this,le=W.legendItem||{},Se=re.chart.renderer.boxWrapper,ye=W instanceof h,Ee=W instanceof s,J="highcharts-legend-"+(ye?"point":"series")+"-active",ie=re.chart.styledMode,oe=fe?[se,le.symbol]:[le.group],we=ee=>{re.allItems.forEach(ae=>{W!==ae&&[ae].concat(ae.linkedSeries||[]).forEach(ue=>{ue.setState(ee,!ye)})})};for(let ee of oe)ee&&ee.on("mouseover",function(){W.visible&&we("inactive"),W.setState("hover"),W.visible&&Se.addClass(J),ie||se.css(re.options.itemHoverStyle)}).on("mouseout",function(){re.chart.styledMode||se.css(F(W.visible?re.itemStyle:re.itemHiddenStyle)),we(""),Se.removeClass(J),W.setState()}).on("click",function(ae){let ue=function(){W.setVisible&&W.setVisible(),we(W.visible?"inactive":"")};Se.removeClass(J),K(re,"itemClick",{browserEvent:ae,legendItem:W},ue),ye?W.firePointEvent("legendItemClick",{browserEvent:ae}):Ee&&K(W,"legendItemClick",{browserEvent:ae})})}createCheckboxForItem(W){W.checkbox=M("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:W.selected,defaultChecked:W.selected},this.options.itemCheckboxStyle,this.chart.container),A(W.checkbox,"click",function(se){let fe=se.target;K(W.series||W,"checkboxClick",{checked:fe.checked,item:W},function(){W.select()})})}}return(g=$||($={})).compose=function(q){R(T,"Core.Legend")&&A(q,"beforeMargins",function(){this.legend=new g(this,this.options.legend)})},$}),r(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(n,a,c,s,h,f,m,y,g,b,v,_,T,k){let{animate:w,animObject:E,setAnimation:A}=n,{defaultOptions:M,defaultTime:S}=c,{numberFormat:N}=s,{registerEventOptions:Y}=h,{charts:Z,doc:K,marginNames:B,svg:F,win:O}=f,{seriesTypes:R}=g,{addEvent:L,attr:G,createElement:V,css:$,defined:q,diffObjects:W,discardElement:se,erase:fe,error:re,extend:le,find:Se,fireEvent:ye,getStyle:Ee,isArray:J,isNumber:ie,isObject:oe,isString:we,merge:ee,objectEach:ae,pick:ue,pInt:ve,relativeLength:Ce,removeEvent:je,splat:Me,syncTimeout:Re,uniqueKey:me}=_;class De{static chart(Pe,Te,Ie){return new De(Pe,Te,Ie)}constructor(Pe,Te,Ie){this.sharedClips={};let Fe=[...arguments];(we(Pe)||Pe.nodeName)&&(this.renderTo=Fe.shift()),this.init(Fe[0],Fe[1])}setZoomOptions(){let Pe=this.options.chart,Te=Pe.zooming;this.zooming={...Te,type:ue(Pe.zoomType,Te.type),key:ue(Pe.zoomKey,Te.key),pinchType:ue(Pe.pinchType,Te.pinchType),singleTouch:ue(Pe.zoomBySingleTouch,Te.singleTouch,!1),resetButton:ee(Te.resetButton,Pe.resetZoomButton)}}init(Pe,Te){ye(this,"init",{args:arguments},function(){let Ie=ee(M,Pe),Fe=Ie.chart;this.userOptions=le({},Pe),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=Te,this.isResizing=0,this.options=Ie,this.axes=[],this.series=[],this.time=Pe.time&&Object.keys(Pe.time).length?new v(Pe.time):f.time,this.numberFormatter=Fe.numberFormatter||N,this.styledMode=Fe.styledMode,this.hasCartesianSeries=Fe.showAxes,this.index=Z.length,Z.push(this),f.chartCount++,Y(this,Fe),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),ye(this,"afterInit"),this.firstRender()})}initSeries(Pe){let Te=this.options.chart,Ie=Pe.type||Te.type,Fe=R[Ie];Fe||re(17,!0,this,{missingModuleFor:Ie});let Oe=new Fe;return typeof Oe.init=="function"&&Oe.init(this,Pe),Oe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(Pe){Pe.points||Pe.data||!Pe.enabledDataSorting||Pe.setData(Pe.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(Pe,Te){return Pe.linkedSeries.length||Te.linkedSeries.length?Te.linkedSeries.length-Pe.linkedSeries.length:0})}orderItems(Pe,Te=0){let Ie=this[Pe],Fe=this.options[Pe]=Me(this.options[Pe]).slice(),Oe=this.userOptions[Pe]=this.userOptions[Pe]?Me(this.userOptions[Pe]).slice():[];if(this.hasRendered&&(Fe.splice(Te),Oe.splice(Te)),Ie)for(let Ge=Te,Qe=Ie.length;Ge<Qe;++Ge){let at=Ie[Ge];at&&(at.index=Ge,at instanceof y&&(at.name=at.getName()),at.options.isInternal||(Fe[Ge]=at.options,Oe[Ge]=at.userOptions))}}isInsidePlot(Pe,Te,Ie={}){var kt;let{inverted:Fe,plotBox:Oe,plotLeft:Ge,plotTop:Qe,scrollablePlotBox:at}=this,{scrollLeft:rt=0,scrollTop:dt=0}=Ie.visiblePlotOnly&&((kt=this.scrollablePlotArea)==null?void 0:kt.scrollingContainer)||{},gt=Ie.series,Tt=Ie.visiblePlotOnly&&at||Oe,Nt=Ie.inverted?Te:Pe,mt=Ie.inverted?Pe:Te,St={x:Nt,y:mt,isInsidePlot:!0,options:Ie};if(!Ie.ignoreX){let ii=gt&&(Fe&&!this.polar?gt.yAxis:gt.xAxis)||{pos:Ge,len:1/0},fi=Ie.paneCoordinates?ii.pos+Nt:Ge+Nt;fi>=Math.max(rt+Ge,ii.pos)&&fi<=Math.min(rt+Ge+Tt.width,ii.pos+ii.len)||(St.isInsidePlot=!1)}if(!Ie.ignoreY&&St.isInsidePlot){let ii=!Fe&&Ie.axis&&!Ie.axis.isXAxis&&Ie.axis||gt&&(Fe?gt.xAxis:gt.yAxis)||{pos:Qe,len:1/0},fi=Ie.paneCoordinates?ii.pos+mt:Qe+mt;fi>=Math.max(dt+Qe,ii.pos)&&fi<=Math.min(dt+Qe+Tt.height,ii.pos+ii.len)||(St.isInsidePlot=!1)}return ye(this,"afterIsInsidePlot",St),St.isInsidePlot}redraw(Pe){ye(this,"beforeRedraw");let Te=this.hasCartesianSeries?this.axes:this.colorAxis||[],Ie=this.series,Fe=this.pointer,Oe=this.legend,Ge=this.userOptions.legend,Qe=this.renderer,at=Qe.isHidden(),rt=[],dt,gt,Tt,Nt=this.isDirtyBox,mt=this.isDirtyLegend,St;for(Qe.rootFontSize=Qe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),A(!!this.hasRendered&&Pe,this),at&&this.temporaryDisplay(),this.layOutTitles(!1),Tt=Ie.length;Tt--;)if(((St=Ie[Tt]).options.stacking||St.options.centerInCategory)&&(gt=!0,St.isDirty)){dt=!0;break}if(dt)for(Tt=Ie.length;Tt--;)(St=Ie[Tt]).options.stacking&&(St.isDirty=!0);Ie.forEach(function(kt){kt.isDirty&&(kt.options.legendType==="point"?(typeof kt.updateTotals=="function"&&kt.updateTotals(),mt=!0):Ge&&(Ge.labelFormatter||Ge.labelFormat)&&(mt=!0)),kt.isDirtyData&&ye(kt,"updatedData")}),mt&&Oe&&Oe.options.enabled&&(Oe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),Te.forEach(function(kt){kt.updateNames(),kt.setScale()}),this.getMargins(),Te.forEach(function(kt){kt.isDirty&&(Nt=!0)}),Te.forEach(function(kt){let ii=kt.min+","+kt.max;kt.extKey!==ii&&(kt.extKey=ii,rt.push(function(){ye(kt,"afterSetExtremes",le(kt.eventArgs,kt.getExtremes())),delete kt.eventArgs})),(Nt||gt)&&kt.redraw()}),Nt&&this.drawChartBox(),ye(this,"predraw"),Ie.forEach(function(kt){(Nt||kt.isDirty)&&kt.visible&&kt.redraw(),kt.isDirtyData=!1}),Fe&&Fe.reset(!0),Qe.draw(),ye(this,"redraw"),ye(this,"render"),at&&this.temporaryDisplay(!0),rt.forEach(function(kt){kt.call()})}get(Pe){let Te=this.series;function Ie(Oe){return Oe.id===Pe||Oe.options&&Oe.options.id===Pe}let Fe=Se(this.axes,Ie)||Se(this.series,Ie);for(let Oe=0;!Fe&&Oe<Te.length;Oe++)Fe=Se(Te[Oe].points||[],Ie);return Fe}getAxes(){let Pe=this.userOptions;for(let Te of(ye(this,"getAxes"),["xAxis","yAxis"]))for(let Ie of Pe[Te]=Me(Pe[Te]||{}))new a(this,Ie,Te);ye(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((Pe,Te)=>(Te.getPointsCollection().forEach(Ie=>{ue(Ie.selectedStaging,Ie.selected)&&Pe.push(Ie)}),Pe),[])}getSelectedSeries(){return this.series.filter(function(Pe){return Pe.selected})}setTitle(Pe,Te,Ie){this.applyDescription("title",Pe),this.applyDescription("subtitle",Te),this.applyDescription("caption",void 0),this.layOutTitles(Ie)}applyDescription(Pe,Te){let Ie=this,Fe=this.options[Pe]=ee(this.options[Pe],Te),Oe=this[Pe];Oe&&Te&&(this[Pe]=Oe=Oe.destroy()),Fe&&!Oe&&((Oe=this.renderer.text(Fe.text,0,0,Fe.useHTML).attr({align:Fe.align,class:"highcharts-"+Pe,zIndex:Fe.zIndex||4}).add()).update=function(Ge,Qe){Ie.applyDescription(Pe,Ge),Ie.layOutTitles(Qe)},this.styledMode||Oe.css(le(Pe==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},Fe.style)),this[Pe]=Oe)}layOutTitles(Pe=!0){let Te=[0,0,0],Ie=this.renderer,Fe=this.spacingBox;["title","subtitle","caption"].forEach(function(Ge){let Qe=this[Ge],at=this.options[Ge],rt=at.verticalAlign||"top",dt=Ge==="title"?rt==="top"?-3:0:rt==="top"?Te[0]+2:0;if(Qe){Qe.css({width:(at.width||Fe.width+(at.widthAdjust||0))+"px"});let gt=Ie.fontMetrics(Qe).b,Tt=Math.round(Qe.getBBox(at.useHTML).height);Qe.align(le({y:rt==="bottom"?gt:dt+gt,height:Tt},at),!1,"spacingBox"),at.floating||(rt==="top"?Te[0]=Math.ceil(Te[0]+Tt):rt==="bottom"&&(Te[2]=Math.ceil(Te[2]+Tt)))}},this),Te[0]&&(this.options.title.verticalAlign||"top")==="top"&&(Te[0]+=this.options.title.margin),Te[2]&&this.options.caption.verticalAlign==="bottom"&&(Te[2]+=this.options.caption.margin);let Oe=!this.titleOffset||this.titleOffset.join(",")!==Te.join(",");this.titleOffset=Te,ye(this,"afterLayOutTitles"),!this.isDirtyBox&&Oe&&(this.isDirtyBox=this.isDirtyLegend=Oe,this.hasRendered&&Pe&&this.isDirtyBox&&this.redraw())}getContainerBox(){let Pe=[].map.call(this.renderTo.children,Ie=>{if(Ie!==this.container){let Fe=Ie.style.display;return Ie.style.display="none",[Ie,Fe]}}),Te={width:Ee(this.renderTo,"width",!0)||0,height:Ee(this.renderTo,"height",!0)||0};return Pe.filter(Boolean).forEach(([Ie,Fe])=>{Ie.style.display=Fe}),Te}getChartSize(){var Ge;let Pe=this.options.chart,Te=Pe.width,Ie=Pe.height,Fe=this.getContainerBox(),Oe=Fe.height>1&&!(!((Ge=this.renderTo.parentElement)!=null&&Ge.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,Te||Fe.width||600),this.chartHeight=Math.max(0,Ce(Ie,this.chartWidth)||(Oe?Fe.height:400)),this.containerBox=Fe}temporaryDisplay(Pe){let Te=this.renderTo,Ie;if(Pe)for(;Te&&Te.style;)Te.hcOrigStyle&&($(Te,Te.hcOrigStyle),delete Te.hcOrigStyle),Te.hcOrigDetached&&(K.body.removeChild(Te),Te.hcOrigDetached=!1),Te=Te.parentNode;else for(;Te&&Te.style&&(K.body.contains(Te)||Te.parentNode||(Te.hcOrigDetached=!0,K.body.appendChild(Te)),(Ee(Te,"display",!1)==="none"||Te.hcOricDetached)&&(Te.hcOrigStyle={display:Te.style.display,height:Te.style.height,overflow:Te.style.overflow},Ie={display:"block",overflow:"hidden"},Te!==this.renderTo&&(Ie.height=0),$(Te,Ie),Te.offsetWidth||Te.style.setProperty("display","block","important")),(Te=Te.parentNode)!==K.body););}setClassName(Pe){this.container.className="highcharts-container "+(Pe||"")}getContainer(){var Tt;let Pe=this.options,Te=Pe.chart,Ie="data-highcharts-chart",Fe=me(),Oe,Ge=this.renderTo;Ge||(this.renderTo=Ge=Te.renderTo),we(Ge)&&(this.renderTo=Ge=K.getElementById(Ge)),Ge||re(13,!0,this);let Qe=ve(G(Ge,Ie));ie(Qe)&&Z[Qe]&&Z[Qe].hasRendered&&Z[Qe].destroy(),G(Ge,Ie,this.index),Ge.innerHTML=T.emptyHTML,Te.skipClone||Ge.offsetWidth||this.temporaryDisplay(),this.getChartSize();let at=this.chartHeight,rt=this.chartWidth;$(Ge,{overflow:"hidden"}),this.styledMode||(Oe=le({position:"relative",overflow:"hidden",width:rt+"px",height:at+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},Te.style||{}));let dt=V("div",{id:Fe},Oe,Ge);this.container=dt,this.getChartSize(),rt===this.chartWidth||(rt=this.chartWidth,this.styledMode||$(dt,{width:ue((Tt=Te.style)==null?void 0:Tt.width,rt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=dt.style.cursor;let gt=Te.renderer||!F?m.getRendererType(Te.renderer):b;if(this.renderer=new gt(dt,rt,at,void 0,Te.forExport,Pe.exporting&&Pe.exporting.allowHTML,this.styledMode),A(void 0,this),this.setClassName(Te.className),this.styledMode)for(let Nt in Pe.defs)this.renderer.definition(Pe.defs[Nt]);else this.renderer.setStyle(Te.style);this.renderer.chartIndex=this.index,ye(this,"afterGetContainer")}getMargins(Pe){let{spacing:Te,margin:Ie,titleOffset:Fe}=this;this.resetMargins(),Fe[0]&&!q(Ie[0])&&(this.plotTop=Math.max(this.plotTop,Fe[0]+Te[0])),Fe[2]&&!q(Ie[2])&&(this.marginBottom=Math.max(this.marginBottom,Fe[2]+Te[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Ie,Te),ye(this,"getMargins"),Pe||this.getAxisMargins()}getAxisMargins(){let Pe=this,Te=Pe.axisOffset=[0,0,0,0],Ie=Pe.colorAxis,Fe=Pe.margin,Oe=function(Ge){Ge.forEach(function(Qe){Qe.visible&&Qe.getOffset()})};Pe.hasCartesianSeries?Oe(Pe.axes):Ie&&Ie.length&&Oe(Ie),B.forEach(function(Ge,Qe){q(Fe[Qe])||(Pe[Ge]+=Te[Qe])}),Pe.setChartSize()}getOptions(){return W(this.userOptions,M)}reflow(Pe){var Oe;let Te=this,Ie=Te.containerBox,Fe=Te.getContainerBox();(Oe=Te.pointer)==null||delete Oe.chartPosition,!Te.isPrinting&&!Te.isResizing&&Ie&&Fe.width&&((Fe.width!==Ie.width||Fe.height!==Ie.height)&&(_.clearTimeout(Te.reflowTimeout),Te.reflowTimeout=Re(function(){Te.container&&Te.setSize(void 0,void 0,!1)},Pe?100:0)),Te.containerBox=Fe)}setReflow(){let Pe=this,Te=Ie=>{var Fe;(Fe=Pe.options)!=null&&Fe.chart.reflow&&Pe.hasLoaded&&Pe.reflow(Ie)};if(typeof ResizeObserver=="function")new ResizeObserver(Te).observe(Pe.renderTo);else{let Ie=L(O,"resize",Te);L(this,"destroy",Ie)}}setSize(Pe,Te,Ie){let Fe=this,Oe=Fe.renderer;Fe.isResizing+=1,A(Ie,Fe);let Ge=Oe.globalAnimation;Fe.oldChartHeight=Fe.chartHeight,Fe.oldChartWidth=Fe.chartWidth,Pe!==void 0&&(Fe.options.chart.width=Pe),Te!==void 0&&(Fe.options.chart.height=Te),Fe.getChartSize();let{chartWidth:Qe,chartHeight:at,scrollablePixelsX:rt=0,scrollablePixelsY:dt=0}=Fe;(Fe.isDirtyBox||Qe!==Fe.oldChartWidth||at!==Fe.oldChartHeight)&&(Fe.styledMode||(Ge?w:$)(Fe.container,{width:`${Qe+rt}px`,height:`${at+dt}px`},Ge),Fe.setChartSize(!0),Oe.setSize(Qe,at,Ge),Fe.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),Fe.isDirtyLegend=!0,Fe.isDirtyBox=!0,Fe.layOutTitles(),Fe.getMargins(),Fe.redraw(Ge),Fe.oldChartHeight=void 0,ye(Fe,"resize"),setTimeout(()=>{Fe&&ye(Fe,"endResize")},E(Ge).duration)),Fe.isResizing-=1}setChartSize(Pe){let Te,Ie,Fe,Oe,{chartHeight:Ge,chartWidth:Qe,inverted:at,spacing:rt,renderer:dt}=this,gt=this.clipOffset,Tt=Math[at?"floor":"round"];this.plotLeft=Te=Math.round(this.plotLeft),this.plotTop=Ie=Math.round(this.plotTop),this.plotWidth=Fe=Math.max(0,Math.round(Qe-Te-this.marginRight)),this.plotHeight=Oe=Math.max(0,Math.round(Ge-Ie-this.marginBottom)),this.plotSizeX=at?Oe:Fe,this.plotSizeY=at?Fe:Oe,this.spacingBox=dt.spacingBox={x:rt[3],y:rt[0],width:Qe-rt[3]-rt[1],height:Ge-rt[0]-rt[2]},this.plotBox=dt.plotBox={x:Te,y:Ie,width:Fe,height:Oe},gt&&(this.clipBox={x:Tt(gt[3]),y:Tt(gt[0]),width:Tt(this.plotSizeX-gt[1]-gt[3]),height:Tt(this.plotSizeY-gt[0]-gt[2])}),Pe||(this.axes.forEach(function(Nt){Nt.setAxisSize(),Nt.setAxisTranslation()}),dt.alignElements()),ye(this,"afterSetChartSize",{skipAxes:Pe})}resetMargins(){ye(this,"resetMargins");let Pe=this,Te=Pe.options.chart,Ie=Te.plotBorderWidth||0,Fe=Ie/2;["margin","spacing"].forEach(function(Oe){let Ge=Te[Oe],Qe=oe(Ge)?Ge:[Ge,Ge,Ge,Ge];["Top","Right","Bottom","Left"].forEach(function(at,rt){Pe[Oe][rt]=ue(Te[Oe+at],Qe[rt])})}),B.forEach(function(Oe,Ge){Pe[Oe]=ue(Pe.margin[Ge],Pe.spacing[Ge])}),Pe.axisOffset=[0,0,0,0],Pe.clipOffset=[Fe,Fe,Fe,Fe],Pe.plotBorderWidth=Ie}drawChartBox(){let Pe=this.options.chart,Te=this.renderer,Ie=this.chartWidth,Fe=this.chartHeight,Oe=this.styledMode,Ge=this.plotBGImage,Qe=Pe.backgroundColor,at=Pe.plotBackgroundColor,rt=Pe.plotBackgroundImage,dt=this.plotLeft,gt=this.plotTop,Tt=this.plotWidth,Nt=this.plotHeight,mt=this.plotBox,St=this.clipRect,kt=this.clipBox,ii=this.chartBackground,fi=this.plotBackground,Gt=this.plotBorder,hr,rr,yr,Dr="animate";ii||(this.chartBackground=ii=Te.rect().addClass("highcharts-background").add(),Dr="attr"),Oe?hr=rr=ii.strokeWidth():(rr=(hr=Pe.borderWidth||0)+(Pe.shadow?8:0),yr={fill:Qe||"none"},(hr||ii["stroke-width"])&&(yr.stroke=Pe.borderColor,yr["stroke-width"]=hr),ii.attr(yr).shadow(Pe.shadow)),ii[Dr]({x:rr/2,y:rr/2,width:Ie-rr-hr%2,height:Fe-rr-hr%2,r:Pe.borderRadius}),Dr="animate",fi||(Dr="attr",this.plotBackground=fi=Te.rect().addClass("highcharts-plot-background").add()),fi[Dr](mt),!Oe&&(fi.attr({fill:at||"none"}).shadow(Pe.plotShadow),rt&&(Ge?(rt!==Ge.attr("href")&&Ge.attr("href",rt),Ge.animate(mt)):this.plotBGImage=Te.image(rt,dt,gt,Tt,Nt).add())),St?St.animate({width:kt.width,height:kt.height}):this.clipRect=Te.clipRect(kt),Dr="animate",Gt||(Dr="attr",this.plotBorder=Gt=Te.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Oe||Gt.attr({stroke:Pe.plotBorderColor,"stroke-width":Pe.plotBorderWidth||0,fill:"none"}),Gt[Dr](Gt.crisp({x:dt,y:gt,width:Tt,height:Nt},-Gt.strokeWidth())),this.isDirtyBox=!1,ye(this,"afterDrawChartBox")}propFromSeries(){let Pe,Te,Ie,Fe=this,Oe=Fe.options.chart,Ge=Fe.options.series;["inverted","angular","polar"].forEach(function(Qe){for(Te=R[Oe.type],Ie=Oe[Qe]||Te&&Te.prototype[Qe],Pe=Ge&&Ge.length;!Ie&&Pe--;)(Te=R[Ge[Pe].type])&&Te.prototype[Qe]&&(Ie=!0);Fe[Qe]=Ie})}linkSeries(Pe){let Te=this,Ie=Te.series;Ie.forEach(function(Fe){Fe.linkedSeries.length=0}),Ie.forEach(function(Fe){let{linkedTo:Oe}=Fe.options;if(we(Oe)){let Ge;(Ge=Oe===":previous"?Te.series[Fe.index-1]:Te.get(Oe))&&Ge.linkedParent!==Fe&&(Ge.linkedSeries.push(Fe),Fe.linkedParent=Ge,Ge.enabledDataSorting&&Fe.setDataSortingOptions(),Fe.visible=ue(Fe.options.visible,Ge.options.visible,Fe.visible))}}),ye(this,"afterLinkSeries",{isUpdating:Pe})}renderSeries(){this.series.forEach(function(Pe){Pe.translate(),Pe.render()})}render(){var dt;let Pe=this.axes,Te=this.colorAxis,Ie=this.renderer,Fe=this.options.chart.axisLayoutRuns||2,Oe=gt=>{gt.forEach(Tt=>{Tt.visible&&Tt.render()})},Ge=0,Qe=!0,at,rt=0;for(let gt of(this.setTitle(),ye(this,"beforeMargins"),(dt=this.getStacks)==null||dt.call(this),this.getMargins(!0),this.setChartSize(),Pe)){let{options:Tt}=gt,{labels:Nt}=Tt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Nt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){Ge=Tt.tickLength,gt.createGroups();let mt=new k(gt,0,"",!0),St=mt.createLabel("x",Nt);if(mt.destroy(),St&&ue(Nt.reserveSpace,!ie(Tt.crossing))&&(Ge=St.getBBox().height+Nt.distance+Math.max(Tt.offset||0,0)),Ge){St==null||St.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-Ge,0);(Qe||at||Fe>1)&&rt<Fe;){let gt=this.plotWidth,Tt=this.plotHeight;for(let Nt of Pe)rt===0?Nt.setScale():(Nt.horiz&&Qe||!Nt.horiz&&at)&&Nt.setTickInterval(!0);rt===0?this.getAxisMargins():this.getMargins(),Qe=gt/this.plotWidth>(rt?1:1.1),at=Tt/this.plotHeight>(rt?1:1.05),rt++}this.drawChartBox(),this.hasCartesianSeries?Oe(Pe):Te&&Te.length&&Oe(Te),this.seriesGroup||(this.seriesGroup=Ie.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(Pe){let Te=this,Ie=ee(!0,this.options.credits,Pe);Ie.enabled&&!this.credits&&(this.credits=this.renderer.text(Ie.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Ie.href&&(O.location.href=Ie.href)}).attr({align:Ie.position.align,zIndex:8}),Te.styledMode||this.credits.css(Ie.style),this.credits.add().align(Ie.position),this.credits.update=function(Fe){Te.credits=Te.credits.destroy(),Te.addCredits(Fe)})}destroy(){let Pe,Te=this,Ie=Te.axes,Fe=Te.series,Oe=Te.container,Ge=Oe&&Oe.parentNode;for(ye(Te,"destroy"),Te.renderer.forExport?fe(Z,Te):Z[Te.index]=void 0,f.chartCount--,Te.renderTo.removeAttribute("data-highcharts-chart"),je(Te),Pe=Ie.length;Pe--;)Ie[Pe]=Ie[Pe].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),Pe=Fe.length;Pe--;)Fe[Pe]=Fe[Pe].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Qe){let at=Te[Qe];at&&at.destroy&&(Te[Qe]=at.destroy())}),Oe&&(Oe.innerHTML=T.emptyHTML,je(Oe),Ge&&se(Oe)),ae(Te,function(Qe,at){delete Te[at]})}firstRender(){var Fe;let Pe=this,Te=Pe.options;Pe.getContainer(),Pe.resetMargins(),Pe.setChartSize(),Pe.propFromSeries(),Pe.getAxes();let Ie=J(Te.series)?Te.series:[];Te.series=[],Ie.forEach(function(Oe){Pe.initSeries(Oe)}),Pe.linkSeries(),Pe.setSortedData(),ye(Pe,"beforeRender"),Pe.render(),(Fe=Pe.pointer)==null||Fe.getChartPosition(),Pe.renderer.imgCount||Pe.hasLoaded||Pe.onload(),Pe.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(Pe){Pe&&this.index!==void 0&&Pe.apply(this,[this])},this),ye(this,"load"),ye(this,"render"),q(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:Pe,title:Te}=this;!Pe||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(Te&&Te.element.textContent||"").replace(/</g,"&lt;")}),Pe.accessibility&&Pe.accessibility.enabled===!1||re('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(Pe,Te,Ie){let Fe,Oe=this;return Pe&&(Te=ue(Te,!0),ye(Oe,"addSeries",{options:Pe},function(){Fe=Oe.initSeries(Pe),Oe.isDirtyLegend=!0,Oe.linkSeries(),Fe.enabledDataSorting&&Fe.setData(Pe.data,!1),ye(Oe,"afterAddSeries",{series:Fe}),Te&&Oe.redraw(Ie)})),Fe}addAxis(Pe,Te,Ie,Fe){return this.createAxis(Te?"xAxis":"yAxis",{axis:Pe,redraw:Ie,animation:Fe})}addColorAxis(Pe,Te,Ie){return this.createAxis("colorAxis",{axis:Pe,redraw:Te,animation:Ie})}createAxis(Pe,Te){let Ie=new a(this,Te.axis,Pe);return ue(Te.redraw,!0)&&this.redraw(Te.animation),Ie}showLoading(Pe){let Te=this,Ie=Te.options,Fe=Ie.loading,Oe=function(){Ge&&$(Ge,{left:Te.plotLeft+"px",top:Te.plotTop+"px",width:Te.plotWidth+"px",height:Te.plotHeight+"px"})},Ge=Te.loadingDiv,Qe=Te.loadingSpan;Ge||(Te.loadingDiv=Ge=V("div",{className:"highcharts-loading highcharts-loading-hidden"},null,Te.container)),Qe||(Te.loadingSpan=Qe=V("span",{className:"highcharts-loading-inner"},null,Ge),L(Te,"redraw",Oe)),Ge.className="highcharts-loading",T.setElementHTML(Qe,ue(Pe,Ie.lang.loading,"")),Te.styledMode||($(Ge,le(Fe.style,{zIndex:10})),$(Qe,Fe.labelStyle),Te.loadingShown||($(Ge,{opacity:0,display:""}),w(Ge,{opacity:Fe.style.opacity||.5},{duration:Fe.showDuration||0}))),Te.loadingShown=!0,Oe()}hideLoading(){let Pe=this.options,Te=this.loadingDiv;Te&&(Te.className="highcharts-loading highcharts-loading-hidden",this.styledMode||w(Te,{opacity:0},{duration:Pe.loading.hideDuration||100,complete:function(){$(Te,{display:"none"})}})),this.loadingShown=!1}update(Pe,Te,Ie,Fe){let Oe,Ge,Qe,at=this,rt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},dt=Pe.isResponsiveOptions,gt=[];ye(at,"update",{options:Pe}),dt||at.setResponsive(!1,!0),Pe=W(Pe,at.options),at.userOptions=ee(at.userOptions,Pe);let Tt=Pe.chart;Tt&&(ee(!0,at.options.chart,Tt),this.setZoomOptions(),"className"in Tt&&at.setClassName(Tt.className),("inverted"in Tt||"polar"in Tt||"type"in Tt)&&(at.propFromSeries(),Oe=!0),"alignTicks"in Tt&&(Oe=!0),"events"in Tt&&Y(this,Tt),ae(Tt,function(St,kt){at.propsRequireUpdateSeries.indexOf("chart."+kt)!==-1&&(Ge=!0),at.propsRequireDirtyBox.indexOf(kt)!==-1&&(at.isDirtyBox=!0),at.propsRequireReflow.indexOf(kt)===-1||(at.isDirtyBox=!0,dt||(Qe=!0))}),!at.styledMode&&Tt.style&&at.renderer.setStyle(at.options.chart.style||{})),!at.styledMode&&Pe.colors&&(this.options.colors=Pe.colors),Pe.time&&(this.time===S&&(this.time=new v(Pe.time)),ee(!0,at.options.time,Pe.time)),ae(Pe,function(St,kt){at[kt]&&typeof at[kt].update=="function"?at[kt].update(St,!1):typeof at[rt[kt]]=="function"?at[rt[kt]](St):kt!=="colors"&&at.collectionsWithUpdate.indexOf(kt)===-1&&ee(!0,at.options[kt],Pe[kt]),kt!=="chart"&&at.propsRequireUpdateSeries.indexOf(kt)!==-1&&(Ge=!0)}),this.collectionsWithUpdate.forEach(function(St){Pe[St]&&(Me(Pe[St]).forEach(function(kt,ii){let fi,Gt=q(kt.id);Gt&&(fi=at.get(kt.id)),!fi&&at[St]&&(fi=at[St][ue(kt.index,ii)])&&(Gt&&q(fi.options.id)||fi.options.isInternal)&&(fi=void 0),fi&&fi.coll===St&&(fi.update(kt,!1),Ie&&(fi.touched=!0)),!fi&&Ie&&at.collectionsWithInit[St]&&(at.collectionsWithInit[St][0].apply(at,[kt].concat(at.collectionsWithInit[St][1]||[]).concat([!1])).touched=!0)}),Ie&&at[St].forEach(function(kt){kt.touched||kt.options.isInternal?delete kt.touched:gt.push(kt)}))}),gt.forEach(function(St){St.chart&&St.remove&&St.remove(!1)}),Oe&&at.axes.forEach(function(St){St.update({},!1)}),Ge&&at.getSeriesOrderByLinks().forEach(function(St){St.chart&&St.update({},!1)},this);let Nt=Tt&&Tt.width,mt=Tt&&(we(Tt.height)?Ce(Tt.height,Nt||at.chartWidth):Tt.height);Qe||ie(Nt)&&Nt!==at.chartWidth||ie(mt)&&mt!==at.chartHeight?at.setSize(Nt,mt,Fe):ue(Te,!0)&&at.redraw(Fe),ye(at,"afterUpdate",{options:Pe,redraw:Te,animation:Fe})}setSubtitle(Pe,Te){this.applyDescription("subtitle",Pe),this.layOutTitles(Te)}setCaption(Pe,Te){this.applyDescription("caption",Pe),this.layOutTitles(Te)}showResetZoom(){let Pe=this,Te=M.lang,Ie=Pe.zooming.resetButton,Fe=Ie.theme,Oe=Ie.relativeTo==="chart"||Ie.relativeTo==="spacingBox"?null:"plotBox";function Ge(){Pe.zoomOut()}ye(this,"beforeShowResetZoom",null,function(){Pe.resetZoomButton=Pe.renderer.button(Te.resetZoom,null,null,Ge,Fe).attr({align:Ie.position.align,title:Te.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Ie.position,!1,Oe)}),ye(this,"afterShowResetZoom")}zoomOut(){ye(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(Pe,Te){let Ie=this,Fe=typeof Te=="object"?Te:{enabled:Te,type:"x"},Oe=Fe.type,Ge=Oe&&Ie[{x:"xAxis",xy:"axes",y:"yAxis"}[Oe]].filter(at=>at.options.panningEnabled&&!at.options.isInternal),Qe=Ie.options.chart;Qe!=null&&Qe.panning&&(Qe.panning=Fe),ye(this,"pan",{originalEvent:Pe},()=>{Ie.transform({axes:Ge,event:Pe,to:{x:Pe.chartX-(Ie.mouseDownX||0),y:Pe.chartY-(Ie.mouseDownY||0)},trigger:"pan"}),$(Ie.container,{cursor:"move"})})}transform(Pe){var Nt;let{axes:Te=this.axes,event:Ie,from:Fe={},reset:Oe,selection:Ge,to:Qe={},trigger:at}=Pe,{inverted:rt}=this,dt=!1,gt,Tt;for(let mt of((Nt=this.hoverPoints)==null||Nt.forEach(St=>St.setState()),Te)){let{horiz:St,len:kt,minPointOffset:ii=0,options:fi,reversed:Gt}=mt,hr=St?"width":"height",rr=St?"x":"y",yr=ue(Qe[hr],mt.len),Dr=ue(Fe[hr],mt.len),nr=10>Math.abs(yr)?1:yr/Dr,vr=(Fe[rr]||0)+Dr/2-mt.pos,ht=vr-((Qe[rr]??mt.pos)+yr/2-mt.pos)/nr,bt=Gt&&!rt||!Gt&&rt?-1:1;if(!Oe&&(vr<0||vr>mt.len))continue;let Mt=mt.toValue(ht,!0)+(Ge||mt.isOrdinal?0:ii*bt),$t=mt.toValue(ht+kt/nr,!0)-(Ge||mt.isOrdinal?0:ii*bt||0),Zt=mt.allExtremes;if(Mt>$t&&([Mt,$t]=[$t,Mt]),nr===1&&!Oe&&mt.coll==="yAxis"&&!Zt){for(let zt of mt.series){let Rt=zt.getExtremes(zt.getProcessedData(!0).yData,!0);Zt??(Zt={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),ie(Rt.dataMin)&&ie(Rt.dataMax)&&(Zt.dataMin=Math.min(Rt.dataMin,Zt.dataMin),Zt.dataMax=Math.max(Rt.dataMax,Zt.dataMax))}mt.allExtremes=Zt}let{dataMin:ki,dataMax:Di,min:We,max:_e}=le(mt.getExtremes(),Zt||{}),Le=ki??fi.min,Ve=Di??fi.max,Xe=$t-Mt,et=mt.categories?0:Math.min(Xe,Ve-Le),ct=Le-et*(q(fi.min)?0:fi.minPadding),ot=Ve+et*(q(fi.max)?0:fi.maxPadding),nt=mt.allowZoomOutside||nr===1||at!=="zoom"&&nr>1,ft=Math.min(fi.min??ct,ct,nt?We:ct),wt=Math.max(fi.max??ot,ot,nt?_e:ot);(!mt.isOrdinal||mt.options.overscroll||nr!==1||Oe)&&(Mt<ft&&(Mt=ft,nr>=1&&($t=Mt+Xe)),$t>wt&&($t=wt,nr>=1&&(Mt=$t-Xe)),(Oe||mt.series.length&&(Mt!==We||$t!==_e)&&Mt>=ft&&$t<=wt)&&(Ge?Ge[mt.coll].push({axis:mt,min:Mt,max:$t}):(mt.isPanning=at!=="zoom",mt.isPanning&&(Tt=!0),mt.setExtremes(Oe?void 0:Mt,Oe?void 0:$t,!1,!1,{move:ht,trigger:at,scale:nr}),!Oe&&(Mt>ft||$t<wt)&&at!=="mousewheel"&&(gt=!0)),dt=!0),Ie&&(this[St?"mouseDownX":"mouseDownY"]=Ie[St?"chartX":"chartY"]))}return dt&&(Ge?ye(this,"selection",Ge,()=>{delete Pe.selection,Pe.trigger="zoom",this.transform(Pe)}):(!gt||Tt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(at==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),dt}}return le(De.prototype,{callbacks:[],collectionsWithInit:{xAxis:[De.prototype.addAxis,[!0]],yAxis:[De.prototype.addAxis,[!1]],series:[De.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),De}),r(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{stop:h}=n,{composed:f}=a,{addEvent:m,createElement:y,css:g,defined:b,merge:v,pushUnique:_}=s;function T(){let E=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!E&&(this.scrollablePlotArea=E=new w(this)),E==null||E.applyFixed()}function k(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class w{static compose(A,M,S){_(f,this.compose)&&(m(A,"afterInit",k),m(M,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),m(M,"render",T),m(S,"show",k))}static afterSetSize(A,M){let S,N,Y,{minWidth:Z,minHeight:K}=A.options.chart.scrollablePlotArea||{},{clipBox:B,plotBox:F,inverted:O,renderer:R}=A;if(!R.forExport&&(Z?(A.scrollablePixelsX=S=Math.max(0,Z-A.chartWidth),S&&(A.scrollablePlotBox=v(A.plotBox),F.width=A.plotWidth+=S,B[O?"height":"width"]+=S,Y=!0)):K&&(A.scrollablePixelsY=N=Math.max(0,K-A.chartHeight),b(N)&&(A.scrollablePlotBox=v(A.plotBox),F.height=A.plotHeight+=N,B[O?"width":"height"]+=N,Y=!1)),b(Y)&&!M.skipAxes))for(let L of A.axes)L.horiz===Y&&(L.setAxisSize(),L.setAxisTranslation())}constructor(A){var G;let M,S=A.options.chart,N=c.getRendererType(),Y=S.scrollablePlotArea||{},Z=this.moveFixedElements.bind(this),K={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};A.scrollablePixelsX&&(K.overflowX="auto"),A.scrollablePixelsY&&(K.overflowY="auto"),this.chart=A;let B=this.parentDiv=y("div",{className:"highcharts-scrolling-parent"},{position:"relative"},A.renderTo),F=this.scrollingContainer=y("div",{className:"highcharts-scrolling"},K,B),O=this.innerContainer=y("div",{className:"highcharts-inner-container"},void 0,F),R=this.fixedDiv=y("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=S.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),L=this.fixedRenderer=new N(R,A.chartWidth,A.chartHeight,S.style);this.mask=L.path().attr({fill:S.backgroundColor||"#fff","fill-opacity":Y.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),F.parentNode.insertBefore(R,F),g(A.renderTo,{overflow:"visible"}),m(A,"afterShowResetZoom",Z),m(A,"afterApplyDrilldown",Z),m(A,"afterLayOutTitles",Z),m(F,"scroll",()=>{let{pointer:V,hoverPoint:$}=A;V&&(delete V.chartPosition,$&&(M=$),V.runPointActions(void 0,M,!0))}),O.appendChild(A.container)}applyFixed(){var ie;let{chart:A,fixedRenderer:M,isDirty:S,scrollingContainer:N}=this,{axisOffset:Y,chartWidth:Z,chartHeight:K,container:B,plotHeight:F,plotLeft:O,plotTop:R,plotWidth:L,scrollablePixelsX:G=0,scrollablePixelsY:V=0}=A,{scrollPositionX:$=0,scrollPositionY:q=0}=A.options.chart.scrollablePlotArea||{},W=Z+G,se=K+V;M.setSize(Z,K),(S??!0)&&(this.isDirty=!1,this.moveFixedElements()),h(A.container),g(B,{width:`${W}px`,height:`${se}px`}),A.renderer.boxWrapper.attr({width:W,height:se,viewBox:[0,0,W,se].join(" ")}),(ie=A.chartBackground)==null||ie.attr({width:W,height:se}),g(N,{width:`${Z}px`,height:`${K}px`}),b(S)||(N.scrollLeft=G*$,N.scrollTop=V*q);let fe=R-Y[0]-1,re=O-Y[3]-1,le=R+F+Y[2]+1,Se=O+L+Y[1]+1,ye=O+L-G,Ee=R+F-V,J=[["M",0,0]];G?J=[["M",0,fe],["L",O-1,fe],["L",O-1,le],["L",0,le],["Z"],["M",ye,fe],["L",Z,fe],["L",Z,le],["L",ye,le],["Z"]]:V&&(J=[["M",re,0],["L",re,R-1],["L",Se,R-1],["L",Se,0],["Z"],["M",re,Ee],["L",re,K],["L",Se,K],["L",Se,Ee],["Z"]]),A.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:J})}moveFixedElements(){let A,{container:M,inverted:S,scrollablePixelsX:N,scrollablePixelsY:Y}=this.chart,Z=this.fixedRenderer,K=w.fixedSelectors;for(let B of(N&&!S?A=".highcharts-yaxis":N&&S||Y&&!S?A=".highcharts-xaxis":Y&&S&&(A=".highcharts-yaxis"),A&&K.push(`${A}:not(.highcharts-radial-axis)`,`${A}-labels:not(.highcharts-radial-axis-labels)`),K))[].forEach.call(M.querySelectorAll(B),F=>{(F.namespaceURI===Z.SVG_NS?Z.box:Z.box.parentNode).appendChild(F),F.style.pointerEvents="auto"})}}return w.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],w}),r(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{format:s}=n,{series:h}=a,{destroyObjectProperties:f,fireEvent:m,isNumber:y,pick:g}=c;return class{constructor(b,v,_,T,k){let w=b.chart.inverted,E=b.reversed;this.axis=b;let A=this.isNegative=!!_!=!!E;this.options=v=v||{},this.x=T,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=k,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:v.align||(w?A?"left":"right":"center"),verticalAlign:v.verticalAlign||(w?"middle":A?"bottom":"top"),y:v.y,x:v.x},this.textAlign=v.textAlign||(w?A?"right":"left":"center")}destroy(){f(this,this.axis)}render(b){let v=this.axis.chart,_=this.options,T=_.format,k=T?s(T,this,v):_.formatter.call(this);if(this.label)this.label.attr({text:k,visibility:"hidden"});else{this.label=v.renderer.label(k,null,void 0,_.shape,void 0,void 0,_.useHTML,!1,"stack-labels");let w={r:_.borderRadius||0,text:k,padding:g(_.padding,5),visibility:"hidden"};v.styledMode||(w.fill=_.backgroundColor,w.stroke=_.borderColor,w["stroke-width"]=_.borderWidth,this.label.css(_.style||{})),this.label.attr(w),this.label.added||this.label.add(b)}this.label.labelrank=v.plotSizeY,m(this,"afterRender")}setOffset(b,v,_,T,k,w){let{alignOptions:E,axis:A,label:M,options:S,textAlign:N}=this,Y=A.chart,Z=this.getStackBox({xOffset:b,width:v,boxBottom:_,boxTop:T,defaultX:k,xAxis:w}),{verticalAlign:K}=E;if(M&&Z){let B=M.getBBox(void 0,0),F=M.padding,O=g(S.overflow,"justify")==="justify",R;E.x=S.x||0,E.y=S.y||0;let{x:L,y:G}=this.adjustStackPosition({labelBox:B,verticalAlign:K,textAlign:N});Z.x-=L,Z.y-=G,M.align(E,!1,Z),(R=Y.isInsidePlot(M.alignAttr.x+E.x+L,M.alignAttr.y+E.y+G))||(O=!1),O&&h.prototype.justifyDataLabel.call(A,M,E,M.alignAttr,B,Z),M.attr({x:M.alignAttr.x,y:M.alignAttr.y,rotation:S.rotation,rotationOriginX:B.width*{left:0,center:.5,right:1}[S.textAlign||"center"],rotationOriginY:B.height/2}),g(!O&&S.crop,!0)&&(R=y(M.x)&&y(M.y)&&Y.isInsidePlot(M.x-F+(M.width||0),M.y)&&Y.isInsidePlot(M.x+F,M.y)),M[R?"show":"hide"]()}m(this,"afterSetOffset",{xOffset:b,width:v})}adjustStackPosition({labelBox:b,verticalAlign:v,textAlign:_}){let T={bottom:0,middle:1,top:2,right:1,center:0,left:-1},k=T[v],w=T[_];return{x:b.width/2+b.width/2*w,y:b.height/2*k}}getStackBox(b){let v=this.axis,_=v.chart,{boxTop:T,defaultX:k,xOffset:w,width:E,boxBottom:A}=b,M=v.stacking.usePercentage?100:g(T,this.total,0),S=v.toPixels(M),N=b.xAxis||_.xAxis[0],Y=g(k,N.translate(this.x))+w,Z=Math.abs(S-v.toPixels(A||y(v.min)&&v.logarithmic&&v.logarithmic.lin2log(v.min)||0)),K=_.inverted,B=this.isNegative;return K?{x:(B?S:S-Z)-_.plotLeft,y:N.height-Y-E+N.top-_.plotTop,width:Z,height:E}:{x:Y+N.transB-_.plotLeft,y:(B?S-Z:S)-_.plotTop,width:E,height:Z}}}}),r(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){var f;let{getDeferredAnimation:m}=n,{series:{prototype:y}}=c,{addEvent:g,correctFloat:b,defined:v,destroyObjectProperties:_,fireEvent:T,isArray:k,isNumber:w,objectEach:E,pick:A}=h;function M(){let R=this.inverted;this.axes.forEach(L=>{L.stacking&&L.stacking.stacks&&L.hasVisibleSeries&&(L.stacking.oldStacks=L.stacking.stacks)}),this.series.forEach(L=>{let G=L.xAxis&&L.xAxis.options||{};L.options.stacking&&L.reserveSpace()&&(L.stackKey=[L.type,A(L.options.stack,""),R?G.top:G.left,R?G.height:G.width].join(","))})}function S(){var L;let R=this.stacking;if(R){let G=R.stacks;E(G,(V,$)=>{_(V),delete G[$]}),(L=R.stackTotalGroup)==null||L.destroy()}}function N(){this.stacking||(this.stacking=new O(this))}function Y(R,L,G,V){return!v(R)||R.x!==L||V&&R.stackKey!==V?R={x:L,index:0,key:V,stackKey:V}:R.index++,R.key=[G,L,R.index].join(","),R}function Z(){let R,L=this,G=L.yAxis,V=L.stackKey||"",$=G.stacking.stacks,q=L.processedXData,W=L.options.stacking,se=L[W+"Stacker"];se&&[V,"-"+V].forEach(fe=>{var Ee;let re=q.length,le,Se,ye;for(;re--;)le=q[re],R=L.getStackIndicator(R,le,L.index,fe),Se=(Ee=$[fe])==null?void 0:Ee[le],(ye=Se==null?void 0:Se.points[R.key||""])&&se.call(L,ye,Se,re)})}function K(R,L,G){let V=L.total?100/L.total:0;R[0]=b(R[0]*V),R[1]=b(R[1]*V),this.stackedYData[G]=R[1]}function B(R){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?y.setStackedPoints.call(this,R,"group"):R.stacking.resetStacks())}function F(R,L){var me,De;let G,V,$,q,W,se,fe,re,le,Se=L||this.options.stacking;if(!Se||!this.reserveSpace()||({group:"xAxis"}[Se]||"yAxis")!==R.coll)return;let ye=this.processedXData,Ee=this.processedYData,J=[],ie=Ee.length,oe=this.options,we=oe.threshold||0,ee=oe.startFromThreshold?we:0,ae=oe.stack,ue=L?`${this.type},${Se}`:this.stackKey||"",ve="-"+ue,Ce=this.negStacks,je=R.stacking,Me=je.stacks,Re=je.oldStacks;for(je.stacksTouched+=1,fe=0;fe<ie;fe++){re=ye[fe],le=Ee[fe],se=(G=this.getStackIndicator(G,re,this.index)).key||"",Me[W=(V=Ce&&le<(ee?0:we))?ve:ue]||(Me[W]={}),Me[W][re]||((me=Re[W])!=null&&me[re]?(Me[W][re]=Re[W][re],Me[W][re].total=null):Me[W][re]=new s(R,R.options.stackLabels,!!V,re,ae)),$=Me[W][re],le!==null?($.points[se]=$.points[this.index]=[A($.cumulative,ee)],v($.cumulative)||($.base=se),$.touched=je.stacksTouched,G.index>0&&this.singleStacks===!1&&($.points[se][0]=$.points[this.index+","+re+",0"][0])):(delete $.points[se],delete $.points[this.index]);let Ue=$.total||0;Se==="percent"?(q=V?ue:ve,Ue=Ce&&((De=Me[q])!=null&&De[re])?(q=Me[q][re]).total=Math.max(q.total||0,Ue)+Math.abs(le)||0:b(Ue+(Math.abs(le)||0))):Se==="group"?(k(le)&&(le=le[0]),le!==null&&Ue++):Ue=b(Ue+(le||0)),Se==="group"?$.cumulative=(Ue||1)-1:$.cumulative=b(A($.cumulative,ee)+(le||0)),$.total=Ue,le!==null&&($.points[se].push($.cumulative),J[fe]=$.cumulative,$.hasValidPoints=!0)}Se==="percent"&&(je.usePercentage=!0),Se!=="group"&&(this.stackedYData=J),je.oldStacks={}}class O{constructor(L){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=L}buildStacks(){let L,G,V=this.axis,$=V.series,q=V.coll==="xAxis",W=V.options.reversedStacks,se=$.length;for(this.resetStacks(),this.usePercentage=!1,G=se;G--;)L=$[W?G:se-G-1],q&&L.setGroupedPoints(V),L.setStackedPoints(V);if(!q)for(G=0;G<se;G++)$[G].modifyStacks();T(V,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,E(this.stacks,L=>{E(L,G=>{G.cumulative=G.total})}))}resetStacks(){E(this.stacks,L=>{E(L,(G,V)=>{w(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete L[V]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var se;let L=this.axis,G=L.chart,V=G.renderer,$=this.stacks,q=m(G,((se=L.options.stackLabels)==null?void 0:se.animation)||!1),W=this.stackTotalGroup=this.stackTotalGroup||V.g("stack-labels").attr({zIndex:6,opacity:0}).add();W.translate(G.plotLeft,G.plotTop),E($,fe=>{E(fe,re=>{re.render(W)})}),W.animate({opacity:1},q)}}return(f||(f={})).compose=function(R,L,G){let V=L.prototype,$=G.prototype;V.getStacks||(g(R,"init",N),g(R,"destroy",S),V.getStacks=M,$.getStackIndicator=Y,$.modifyStacks=Z,$.percentStacker=K,$.setGroupedPoints=B,$.setStackedPoints=F)},f}),r(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{defined:s,merge:h,isObject:f}=c;class m extends n{drawGraph(){let g=this.options,b=(this.gappedPath||this.getGraphPath).call(this),v=this.chart.styledMode;[this,...this.zones].forEach((_,T)=>{let k,w=_.graph,E=w?"animate":"attr",A=_.dashStyle||g.dashStyle;w?(w.endX=this.preventGraphAnimation?null:b.xMap,w.animate({d:b})):b.length&&(_.graph=w=this.chart.renderer.path(b).addClass("highcharts-graph"+(T?` highcharts-zone-graph-${T-1} `:" ")+(T&&_.className||"")).attr({zIndex:1}).add(this.group)),w&&!v&&(k={stroke:!T&&g.lineColor||_.color||this.color||"#cccccc","stroke-width":g.lineWidth||0,fill:this.fillGraph&&this.color||"none"},A?k.dashstyle=A:g.linecap!=="square"&&(k["stroke-linecap"]=k["stroke-linejoin"]="round"),w[E](k).shadow(T<2&&g.shadow&&h({filterUnits:"userSpaceOnUse"},f(g.shadow)?g.shadow:{}))),w&&(w.startX=b.xMap,w.isArea=b.isArea)})}getGraphPath(g,b,v){let _=this,T=_.options,k=[],w=[],E,A=T.step,M=(g=g||_.points).reversed;return M&&g.reverse(),(A={right:1,center:2}[A]||A&&3)&&M&&(A=4-A),(g=this.getValidPoints(g,!1,!(T.connectNulls&&!b&&!v))).forEach(function(S,N){let Y,Z=S.plotX,K=S.plotY,B=g[N-1],F=S.isNull||typeof K!="number";(S.leftCliff||B&&B.rightCliff)&&!v&&(E=!0),F&&!s(b)&&N>0?E=!T.connectNulls:F&&!b?E=!0:(N===0||E?Y=[["M",S.plotX,S.plotY]]:_.getPointSpline?Y=[_.getPointSpline(g,S,N)]:A?(Y=A===1?[["L",B.plotX,K]]:A===2?[["L",(B.plotX+Z)/2,B.plotY],["L",(B.plotX+Z)/2,K]]:[["L",Z,B.plotY]]).push(["L",Z,K]):Y=[["L",Z,K]],w.push(S.x),A&&(w.push(S.x),A===2&&w.push(S.x)),k.push.apply(k,Y),E=!1)}),k.xMap=w,_.graphPath=k,k}}return m.defaultOptions=h(n.defaultOptions,{legendSymbol:"lineMarker"}),a.registerSeriesType("line",m),m}),r(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),r(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{seriesTypes:{line:s}}=a,{extend:h,merge:f,objectEach:m,pick:y}=c;class g extends s{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:v,options:_}=this;[this,...this.zones].forEach((T,k)=>{let w={},E=T.fillColor||_.fillColor,A=T.area,M=A?"animate":"attr";A?(A.endX=this.preventGraphAnimation?null:v.xMap,A.animate({d:v})):(w.zIndex=0,(A=T.area=this.chart.renderer.path(v).addClass("highcharts-area"+(k?` highcharts-zone-area-${k-1} `:" ")+(k&&T.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(w.fill=E||T.color||this.color,w["fill-opacity"]=E?1:_.fillOpacity??.75,A.css({pointerEvents:this.stickyTracking?"none":"auto"})),A[M](w),A.startX=v.xMap,A.shiftUnit=_.step?2:1})}getGraphPath(v){let _,T,k,w=s.prototype.getGraphPath,E=this.options,A=E.stacking,M=this.yAxis,S=[],N=[],Y=this.index,Z=M.stacking.stacks[this.stackKey],K=E.threshold,B=Math.round(M.getThreshold(E.threshold)),F=y(E.connectNulls,A==="percent"),O=function(q,W,se){let fe=v[q],re=A&&Z[fe.x].points[Y],le=fe[se+"Null"]||0,Se=fe[se+"Cliff"]||0,ye,Ee,J=!0;Se||le?(ye=(le?re[0]:re[1])+Se,Ee=re[0]+Se,J=!!le):!A&&v[W]&&v[W].isNull&&(ye=Ee=K),ye!==void 0&&(N.push({plotX:_,plotY:ye===null?B:M.getThreshold(ye),isNull:J,isCliff:!0}),S.push({plotX:_,plotY:Ee===null?B:M.getThreshold(Ee),doCurve:!1}))};v=v||this.points,A&&(v=this.getStackPoints(v));for(let q=0,W=v.length;q<W;++q)A||(v[q].leftCliff=v[q].rightCliff=v[q].leftNull=v[q].rightNull=void 0),T=v[q].isNull,_=y(v[q].rectPlotX,v[q].plotX),k=A?y(v[q].yBottom,B):B,T&&!F||(F||O(q,q-1,"left"),T&&!A&&F||(N.push(v[q]),S.push({x:q,plotX:_,plotY:k})),F||O(q,q+1,"right"));let R=w.call(this,N,!0,!0);S.reversed=!0;let L=w.call(this,S,!0,!0),G=L[0];G&&G[0]==="M"&&(L[0]=["L",G[1],G[2]]);let V=R.concat(L);V.length&&V.push(["Z"]);let $=w.call(this,N,!1,F);return this.chart.series.length>1&&A&&N.some(q=>q.isCliff)&&(V.hasStackedCliffs=$.hasStackedCliffs=!0),V.xMap=R.xMap,this.areaPath=V,$}getStackPoints(v){let _=this,T=[],k=[],w=this.xAxis,E=this.yAxis,A=E.stacking.stacks[this.stackKey],M={},S=E.series,N=S.length,Y=E.options.reversedStacks?1:-1,Z=S.indexOf(_);if(v=v||this.points,this.options.stacking){for(let B=0;B<v.length;B++)v[B].leftNull=v[B].rightNull=void 0,M[v[B].x]=v[B];m(A,function(B,F){B.total!==null&&k.push(F)}),k.sort(function(B,F){return B-F});let K=S.map(B=>B.visible);k.forEach(function(B,F){let O=0,R,L;if(M[B]&&!M[B].isNull)T.push(M[B]),[-1,1].forEach(function(G){let V=G===1?"rightNull":"leftNull",$=A[k[F+G]],q=0;if($){let W=Z;for(;W>=0&&W<N;){let se=S[W].index;!(R=$.points[se])&&(se===_.index?M[B][V]=!0:K[W]&&(L=A[B].points[se])&&(q-=L[1]-L[0])),W+=Y}}M[B][G===1?"rightCliff":"leftCliff"]=q});else{let G=Z;for(;G>=0&&G<N;){let V=S[G].index;if(R=A[B].points[V]){O=R[1];break}G+=Y}O=y(O,0),O=E.translate(O,0,1,0,1),T.push({isNull:!0,plotX:w.translate(B,0,0,0,1),x:B,plotY:O,yBottom:O})}})}return T}}return g.defaultOptions=f(s.defaultOptions,n),h(g.prototype,{singleStacks:!1}),a.registerSeriesType("area",g),g}),r(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{line:c}=n.seriesTypes,{merge:s,pick:h}=a;class f extends c{getPointSpline(y,g,b){let v,_,T,k,w=g.plotX||0,E=g.plotY||0,A=y[b-1],M=y[b+1];function S(Y){return Y&&!Y.isNull&&Y.doCurve!==!1&&!g.isCliff}if(S(A)&&S(M)){let Y=A.plotX||0,Z=A.plotY||0,K=M.plotX||0,B=M.plotY||0,F=0;v=(1.5*w+Y)/2.5,_=(1.5*E+Z)/2.5,T=(1.5*w+K)/2.5,k=(1.5*E+B)/2.5,T!==v&&(F=(k-_)*(T-w)/(T-v)+E-k),_+=F,k+=F,_>Z&&_>E?(_=Math.max(Z,E),k=2*E-_):_<Z&&_<E&&(_=Math.min(Z,E),k=2*E-_),k>B&&k>E?(k=Math.max(B,E),_=2*E-k):k<B&&k<E&&(k=Math.min(B,E),_=2*E-k),g.rightContX=T,g.rightContY=k,g.controlPoints={low:[v,_],high:[T,k]}}let N=["C",h(A.rightContX,A.plotX,0),h(A.rightContY,A.plotY,0),h(v,w,0),h(_,E,0),w,E];return A.rightContX=A.rightContY=void 0,N}}return f.defaultOptions=s(c.defaultOptions),n.registerSeriesType("spline",f),f}),r(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{area:s,area:{prototype:h}}=a.seriesTypes,{extend:f,merge:m}=c;class y extends n{}return y.defaultOptions=m(n.defaultOptions,s.defaultOptions),f(y.prototype,{getGraphPath:h.getGraphPath,getStackPoints:h.getStackPoints,drawGraph:h.drawGraph}),a.registerSeriesType("areaspline",y),y}),r(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),r(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m){let{animObject:y}=n,{parse:g}=a,{noop:b}=s,{clamp:v,crisp:_,defined:T,extend:k,fireEvent:w,isArray:E,isNumber:A,merge:M,pick:S,objectEach:N}=m;class Y extends h{animate(K){let B,F,O=this,R=this.yAxis,L=R.pos,G=R.reversed,V=O.options,{clipOffset:$,inverted:q}=this.chart,W={},se=q?"translateX":"translateY";K&&$?(W.scaleY=.001,F=v(R.toPixels(V.threshold),L,L+R.len),q?(F+=G?-Math.floor($[0]):Math.ceil($[2]),W.translateX=F-R.len):(F+=G?Math.ceil($[0]):-Math.floor($[2]),W.translateY=F),O.clipBox&&O.setClip(),O.group.attr(W)):(B=Number(O.group.attr(se)),O.group.animate({scaleY:1},k(y(O.options.animation),{step:function(fe,re){O.group&&(W[se]=B+re.pos*(L-B),O.group.attr(W))}})))}init(K,B){super.init.apply(this,arguments);let F=this;(K=F.chart).hasRendered&&K.series.forEach(function(O){O.type===F.type&&(O.isDirty=!0)})}getColumnMetrics(){var le,Se;let K=this,B=K.options,F=K.xAxis,O=K.yAxis,R=F.options.reversedStacks,L=F.reversed&&!R||!F.reversed&&R,G={},V,$=0;B.grouping===!1?$=1:K.chart.series.forEach(function(ye){let Ee,J=ye.yAxis,ie=ye.options;ye.type===K.type&&ye.reserveSpace()&&O.len===J.len&&O.pos===J.pos&&(ie.stacking&&ie.stacking!=="group"?(G[V=ye.stackKey]===void 0&&(G[V]=$++),Ee=G[V]):ie.grouping!==!1&&(Ee=$++),ye.columnIndex=Ee)});let q=Math.min(Math.abs(F.transA)*(!((le=F.brokenAxis)!=null&&le.hasBreaks)&&((Se=F.ordinal)==null?void 0:Se.slope)||B.pointRange||F.closestPointRange||F.tickInterval||1),F.len),W=q*B.groupPadding,se=(q-2*W)/($||1),fe=Math.min(B.maxPointWidth||F.len,S(B.pointWidth,se*(1-2*B.pointPadding))),re=(K.columnIndex||0)+(L?1:0);return K.columnMetrics={width:fe,offset:(se-fe)/2+(W+re*se-q/2)*(L?-1:1),paddedWidth:se,columnCount:$},K.columnMetrics}crispCol(K,B,F,O){let R=this.borderWidth,L=this.chart.inverted;return O=_(B+O,R,L)-(B=_(B,R,L)),this.options.crisp&&(F=_(K+F,R)-(K=_(K,R))),{x:K,y:B,width:F,height:O}}adjustForMissingColumns(K,B,F,O){var R;if(!F.isNull&&O.columnCount>1){let L=this.xAxis.series.filter(q=>q.visible).map(q=>q.index),G=0,V=0;N((R=this.xAxis.stacking)==null?void 0:R.stacks,q=>{if(typeof F.x=="number"){let W=q[F.x.toString()];if(W&&E(W.points[this.index])){let se=Object.keys(W.points).filter(fe=>!fe.match(",")&&W.points[fe]&&W.points[fe].length>1).map(parseFloat).filter(fe=>L.indexOf(fe)!==-1).sort((fe,re)=>re-fe);G=se.indexOf(this.index),V=se.length}}}),G=this.xAxis.reversed?V-1-G:G;let $=(V-1)*O.paddedWidth+B;K=(F.plotX||0)+$/2-B-G*O.paddedWidth}return K}translate(){let K=this,B=K.chart,F=K.options,O=K.dense=K.closestPointRange*K.xAxis.transA<2,R=K.borderWidth=S(F.borderWidth,O?0:1),L=K.xAxis,G=K.yAxis,V=F.threshold,$=S(F.minPointLength,5),q=K.getColumnMetrics(),W=q.width,se=K.pointXOffset=q.offset,fe=K.dataMin,re=K.dataMax,le=K.translatedThreshold=G.getThreshold(V),Se=K.barW=Math.max(W,1+2*R);F.pointPadding&&(Se=Math.ceil(Se)),h.prototype.translate.apply(K),K.points.forEach(function(ye){let Ee=S(ye.yBottom,le),J=999+Math.abs(Ee),ie=ye.plotX||0,oe=v(ye.plotY,-J,G.len+J),we,ee=Math.min(oe,Ee),ae=Math.max(oe,Ee)-ee,ue=W,ve=ie+se,Ce=Se;$&&Math.abs(ae)<$&&(ae=$,we=!G.reversed&&!ye.negative||G.reversed&&ye.negative,A(V)&&A(re)&&ye.y===V&&re<=V&&(G.min||0)<V&&(fe!==re||(G.max||0)<=V)&&(we=!we,ye.negative=!ye.negative),ee=Math.abs(ee-le)>$?Ee-$:le-(we?$:0)),T(ye.options.pointWidth)&&(ve-=Math.round(((ue=Ce=Math.ceil(ye.options.pointWidth))-W)/2)),F.centerInCategory&&!F.stacking&&(ve=K.adjustForMissingColumns(ve,ue,ye,q)),ye.barX=ve,ye.pointWidth=ue,ye.tooltipPos=B.inverted?[v(G.len+G.pos-B.plotLeft-oe,G.pos-B.plotLeft,G.len+G.pos-B.plotLeft),L.len+L.pos-B.plotTop-ve-Ce/2,ae]:[L.left-B.plotLeft+ve+Ce/2,v(oe+G.pos-B.plotTop,G.pos-B.plotTop,G.len+G.pos-B.plotTop),ae],ye.shapeType=K.pointClass.prototype.shapeType||"roundedRect",ye.shapeArgs=K.crispCol(ve,ye.isNull?le:ee,Ce,ye.isNull?0:ae)}),w(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(K,B){let F=this.options,O=this.pointAttrToOptions||{},R=O.stroke||"borderColor",L=O["stroke-width"]||"borderWidth",G,V,$,q=K&&K.color||this.color,W=K&&K[R]||F[R]||q,se=K&&K.options.dashStyle||F.dashStyle,fe=K&&K[L]||F[L]||this[L]||0,re=S(K&&K.opacity,F.opacity,1);K&&this.zones.length&&(V=K.getZone(),q=K.options.color||V&&(V.color||K.nonZonedColor)||this.color,V&&(W=V.borderColor||W,se=V.dashStyle||se,fe=V.borderWidth||fe)),B&&K&&($=(G=M(F.states[B],K.options.states&&K.options.states[B]||{})).brightness,q=G.color||$!==void 0&&g(q).brighten(G.brightness).get()||q,W=G[R]||W,fe=G[L]||fe,se=G.dashStyle||se,re=S(G.opacity,re));let le={fill:q,stroke:W,"stroke-width":fe,opacity:re};return se&&(le.dashstyle=se),le}drawPoints(K=this.points){let B,F=this,O=this.chart,R=F.options,L=O.renderer,G=R.animationLimit||250;K.forEach(function(V){let $=V.plotY,q=V.graphic,W=!!q,se=q&&O.pointCount<G?"animate":"attr";A($)&&V.y!==null?(B=V.shapeArgs,q&&V.hasNewShapeType()&&(q=q.destroy()),F.enabledDataSorting&&(V.startXPos=F.xAxis.reversed?-(B&&B.width||0):F.xAxis.width),!q&&(V.graphic=q=L[V.shapeType](B).add(V.group||F.group),q&&F.enabledDataSorting&&O.hasRendered&&O.pointCount<G&&(q.attr({x:V.startXPos}),W=!0,se="animate")),q&&W&&q[se](M(B)),O.styledMode||q[se](F.pointAttribs(V,V.selected&&"select")).shadow(V.allowShadow!==!1&&R.shadow),q&&(q.addClass(V.getClassName(),!0),q.attr({visibility:V.visible?"inherit":"hidden"}))):q&&(V.graphic=q.destroy())})}drawTracker(K=this.points){let B,F=this,O=F.chart,R=O.pointer,L=function(G){let V=R==null?void 0:R.getPointFromEvent(G);R&&V&&F.options.enableMouseTracking&&(R.isDirectTouch=!0,V.onMouseOver(G))};K.forEach(function(G){B=E(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),B.forEach(function(V){(V.div||V.element).point=G})}),F._hasTracking||(F.trackerGroups.forEach(function(G){F[G]&&(F[G].addClass("highcharts-tracker").on("mouseover",L).on("mouseout",function(V){R==null||R.onTrackerMouseOut(V)}).on("touchstart",L),!O.styledMode&&F.options.cursor&&F[G].css({cursor:F.options.cursor}))}),F._hasTracking=!0),w(this,"afterDrawTracker")}remove(){let K=this,B=K.chart;B.hasRendered&&B.series.forEach(function(F){F.type===K.type&&(F.isDirty=!0)}),h.prototype.remove.apply(K,arguments)}}return Y.defaultOptions=M(h.defaultOptions,c),k(Y.prototype,{directTouch:!0,getSymbol:b,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),f.registerSeriesType("column",Y),Y}),r(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{getDeferredAnimation:h}=n,{format:f}=a,{defined:m,extend:y,fireEvent:g,isArray:b,isString:v,merge:_,objectEach:T,pick:k,pInt:w,splat:E}=c;return function(A){function M(){return F(this).some(R=>R==null?void 0:R.enabled)}function S(R,L,G,V,$){var oe;let{chart:q,enabledDataSorting:W}=this,se=this.isCartesian&&q.inverted,fe=R.plotX,re=R.plotY,le=G.rotation||0,Se=m(fe)&&m(re)&&q.isInsidePlot(fe,Math.round(re),{inverted:se,paneCoordinates:!0,series:this}),ye=le===0&&k(G.overflow,W?"none":"justify")==="justify",Ee=this.visible&&R.visible!==!1&&m(fe)&&(R.series.forceDL||W&&!ye||Se||k(G.inside,!!this.options.stacking)&&V&&q.isInsidePlot(fe,se?V.x+1:V.y+V.height-1,{inverted:se,paneCoordinates:!0,series:this})),J=R.pos();if(Ee&&J){var ie;let we=L.getBBox(),ee=L.getBBox(void 0,0),ae={right:1,center:.5}[G.align||0]||0,ue={bottom:1,middle:.5}[G.verticalAlign||0]||0;if(V=y({x:J[0],y:Math.round(J[1]),width:0,height:0},V||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(V[se?"x":"y"]=0,V[se?"width":"height"]=((oe=this.yAxis)==null?void 0:oe.len)||0),y(G,{width:we.width,height:we.height}),ie=V,W&&this.xAxis&&!ye&&this.setDataLabelStartPos(R,L,$,Se,ie),L.align(_(G,{width:ee.width,height:ee.height}),!1,V,!1),L.alignAttr.x+=ae*(ee.width-we.width),L.alignAttr.y+=ue*(ee.height-we.height),L[L.placed?"animate":"attr"]({x:L.alignAttr.x+(we.width-ee.width)/2,y:L.alignAttr.y+(we.height-ee.height)/2,rotationOriginX:(L.width||0)/2,rotationOriginY:(L.height||0)/2}),ye&&V.height>=0)this.justifyDataLabel(L,G,L.alignAttr,we,V,$);else if(k(G.crop,!0)){let{x:ve,y:Ce}=L.alignAttr;Ee=q.isInsidePlot(ve,Ce,{paneCoordinates:!0,series:this})&&q.isInsidePlot(ve+we.width-1,Ce+we.height-1,{paneCoordinates:!0,series:this})}G.shape&&!le&&L[$?"attr":"animate"]({anchorX:J[0],anchorY:J[1]})}$&&W&&(L.placed=!1),Ee||W&&!ye?(L.show(),L.placed=!0):(L.hide(),L.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function Y(R){let L=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+L});return!L&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},R):G.attr({opacity:1})),G}function Z(R){var Ee;let L;R=R||this.points;let G=this,V=G.chart,$=G.options,q=V.renderer,{backgroundColor:W,plotBackgroundColor:se}=V.options.chart,fe=q.getContrast(v(se)&&se||v(W)&&W||"#000000"),re=F(G),{animation:le,defer:Se}=re[0],ye=Se?h(V,le,G):{defer:0,duration:0};g(this,"drawDataLabels"),(Ee=G.hasDataLabels)!=null&&Ee.call(G)&&(L=this.initDataLabels(ye),R.forEach(J=>{var we,ee;let ie=J.dataLabels||[];E(B(re,J.dlOptions||((we=J.options)==null?void 0:we.dataLabels))).forEach((ae,ue)=>{let ve=ae.enabled&&(J.visible||J.dataLabelOnHidden)&&(!J.isNull||J.dataLabelOnNull)&&function(Ge,Qe){let at=Qe.filter;if(at){let rt=at.operator,dt=Ge[at.property],gt=at.value;return rt===">"&&dt>gt||rt==="<"&&dt<gt||rt===">="&&dt>=gt||rt==="<="&&dt<=gt||rt==="=="&&dt==gt||rt==="==="&&dt===gt||rt==="!="&&dt!=gt||rt==="!=="&&dt!==gt}return!0}(J,ae),{backgroundColor:Ce,borderColor:je,distance:Me,style:Re={}}=ae,me,De,Ue,Pe,Te={},Ie=ie[ue],Fe=!Ie,Oe;ve&&(De=k(ae[J.formatPrefix+"Format"],ae.format),me=J.getLabelConfig(),Ue=m(De)?f(De,me,V):(ae[J.formatPrefix+"Formatter"]||ae.formatter).call(me,ae),Pe=ae.rotation,!V.styledMode&&(Re.color=k(ae.color,Re.color,v(G.color)?G.color:void 0,"#000000"),Re.color==="contrast"?(Ce!=="none"&&(Oe=Ce),J.contrastColor=q.getContrast(Oe!=="auto"&&Oe||J.color||G.color),Re.color=Oe||!m(Me)&&ae.inside||0>w(Me||0)||$.stacking?J.contrastColor:fe):delete J.contrastColor,$.cursor&&(Re.cursor=$.cursor)),Te={r:ae.borderRadius||0,rotation:Pe,padding:ae.padding,zIndex:1},V.styledMode||(Te.fill=Ce==="auto"?J.color:Ce,Te.stroke=je==="auto"?J.color:je,Te["stroke-width"]=ae.borderWidth),T(Te,(Ge,Qe)=>{Ge===void 0&&delete Te[Qe]})),!Ie||ve&&m(Ue)&&!!Ie.div==!!ae.useHTML&&(Ie.rotation&&ae.rotation||Ie.rotation===ae.rotation)||(Ie=void 0,Fe=!0),ve&&m(Ue)&&(Ie?Te.text=Ue:(Ie=q.label(Ue,0,0,ae.shape,void 0,void 0,ae.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+J.colorIndex+" "+(ae.className||"")+(ae.useHTML?" highcharts-tracker":"")),Ie&&(Ie.options=ae,Ie.attr(Te),V.styledMode?Re.width&&Ie.css({width:Re.width,textOverflow:Re.textOverflow}):Ie.css(Re).shadow(ae.shadow),g(Ie,"beforeAddingDataLabel",{labelOptions:ae,point:J}),Ie.added||Ie.add(L),G.alignDataLabel(J,Ie,ae,void 0,Fe),Ie.isActive=!0,ie[ue]&&ie[ue]!==Ie&&ie[ue].destroy(),ie[ue]=Ie))});let oe=ie.length;for(;oe--;)ie[oe]&&ie[oe].isActive?ie[oe].isActive=!1:((ee=ie[oe])==null||ee.destroy(),ie.splice(oe,1));J.dataLabel=ie[0],J.dataLabels=ie})),g(this,"afterDrawDataLabels")}function K(R,L,G,V,$,q){let W=this.chart,se=L.align,fe=L.verticalAlign,re=R.box?0:R.padding||0,le=W.inverted?this.yAxis:this.xAxis,Se=le?le.left-W.plotLeft:0,ye=W.inverted?this.xAxis:this.yAxis,Ee=ye?ye.top-W.plotTop:0,{x:J=0,y:ie=0}=L,oe,we;return(oe=(G.x||0)+re+Se)<0&&(se==="right"&&J>=0?(L.align="left",L.inside=!0):J-=oe,we=!0),(oe=(G.x||0)+V.width-re+Se)>W.plotWidth&&(se==="left"&&J<=0?(L.align="right",L.inside=!0):J+=W.plotWidth-oe,we=!0),(oe=G.y+re+Ee)<0&&(fe==="bottom"&&ie>=0?(L.verticalAlign="top",L.inside=!0):ie-=oe,we=!0),(oe=(G.y||0)+V.height-re+Ee)>W.plotHeight&&(fe==="top"&&ie<=0?(L.verticalAlign="bottom",L.inside=!0):ie+=W.plotHeight-oe,we=!0),we&&(L.x=J,L.y=ie,R.placed=!q,R.align(L,void 0,$)),we}function B(R,L){let G=[],V;if(b(R)&&!b(L))G=R.map(function($){return _($,L)});else if(b(L)&&!b(R))G=L.map(function($){return _(R,$)});else if(b(R)||b(L)){if(b(R)&&b(L))for(V=Math.max(R.length,L.length);V--;)G[V]=_(R[V],L[V])}else G=_(R,L);return G}function F(R){var G,V;let L=R.chart.options.plotOptions;return E(B(B((G=L==null?void 0:L.series)==null?void 0:G.dataLabels,(V=L==null?void 0:L[R.type])==null?void 0:V.dataLabels),R.options.dataLabels))}function O(R,L,G,V,$){let q=this.chart,W=q.inverted,se=this.xAxis,fe=se.reversed,re=((W?L.height:L.width)||0)/2,le=R.pointWidth,Se=le?le/2:0;L.startXPos=W?$.x:fe?-re-Se:se.width-re+Se,L.startYPos=W?fe?this.yAxis.height-re+Se:-re-Se:$.y,V?L.visibility==="hidden"&&(L.show(),L.attr({opacity:0}).animate({opacity:1})):L.attr({opacity:1}).animate({opacity:0},void 0,L.hide),q.hasRendered&&(G&&L.attr({x:L.startXPos,y:L.startYPos}),L.placed=!0)}A.compose=function(R){let L=R.prototype;L.initDataLabels||(L.initDataLabels=Y,L.initDataLabelsGroup=N,L.alignDataLabel=S,L.drawDataLabels=Z,L.justifyDataLabel=K,L.setDataLabelStartPos=O,L.hasDataLabels=M)}}(s||(s={})),s}),r(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{composed:f}=a,{series:m}=c,{merge:y,pick:g,pushUnique:b}=s;return function(v){function _(T,k,w,E,A){let M=this.chart.inverted,S=T.series,N=(S.xAxis?S.xAxis.len:this.chart.plotSizeX)||0,Y=(S.yAxis?S.yAxis.len:this.chart.plotSizeY)||0,Z=T.dlBox||T.shapeArgs,K=g(T.below,T.plotY>g(this.translatedThreshold,Y)),B=g(w.inside,!!this.options.stacking);if(Z){if(E=y(Z),!(w.overflow==="allow"&&w.crop===!1)){E.y<0&&(E.height+=E.y,E.y=0);let F=E.y+E.height-Y;F>0&&F<E.height-1&&(E.height-=F)}M&&(E={x:Y-E.y-E.height,y:N-E.x-E.width,width:E.height,height:E.width}),B||(M?(E.x+=K?0:E.width,E.width=0):(E.y+=K?E.height:0,E.height=0))}w.align=g(w.align,!M||B?"center":K?"right":"left"),w.verticalAlign=g(w.verticalAlign,M||B?"middle":K?"top":"bottom"),m.prototype.alignDataLabel.call(this,T,k,w,E,A),w.inside&&T.contrastColor&&k.css({color:T.contrastColor})}v.compose=function(T){n.compose(m),b(f,"ColumnDataLabel")&&(T.prototype.alignDataLabel=_)}}(h||(h={})),h}),r(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{extend:s,merge:h}=c;class f extends n{}return f.defaultOptions=h(n.defaultOptions,{}),s(f.prototype,{inverted:!0}),a.registerSeriesType("bar",f),f}),r(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),r(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{column:s,line:h}=a.seriesTypes,{addEvent:f,extend:m,merge:y}=c;class g extends h{applyJitter(){let v=this,_=this.options.jitter,T=this.points.length;_&&this.points.forEach(function(k,w){["x","y"].forEach(function(E,A){if(_[E]&&!k.isNull){let M=`plot${E.toUpperCase()}`,S=v[`${E}Axis`],N=_[E]*S.transA;if(S&&!S.logarithmic){let Y=Math.max(0,(k[M]||0)-N),Z=Math.min(S.len,(k[M]||0)+N);k[M]=Y+(Z-Y)*function(K){let B=1e4*Math.sin(K);return B-Math.floor(B)}(w+A*T),E==="x"&&(k.clientX=k.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return g.defaultOptions=y(h.defaultOptions,n),m(g.prototype,{drawTracker:s.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),f(g,"afterTranslate",function(){this.applyJitter()}),a.registerSeriesType("scatter",g),g}),r(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(n,a,c){var s,h;let{deg2rad:f}=n,{fireEvent:m,isNumber:y,pick:g,relativeLength:b}=c;return(h=s||(s={})).getCenter=function(){let v=this.options,_=this.chart,T=2*(v.slicedOffset||0),k=_.plotWidth-2*T,w=_.plotHeight-2*T,E=v.center,A=Math.min(k,w),M=v.thickness,S,N=v.size,Y=v.innerSize||0,Z,K;typeof N=="string"&&(N=parseFloat(N)),typeof Y=="string"&&(Y=parseFloat(Y));let B=[g(E[0],"50%"),g(E[1],"50%"),g(N&&N<0?void 0:v.size,"100%"),g(Y&&Y<0?void 0:v.innerSize||0,"0%")];for(!_.angular||this instanceof a||(B[3]=0),Z=0;Z<4;++Z)K=B[Z],S=Z<2||Z===2&&/%$/.test(K),B[Z]=b(K,[k,w,A,B[2]][Z])+(S?T:0);return B[3]>B[2]&&(B[3]=B[2]),y(M)&&2*M<B[2]&&M>0&&(B[3]=B[2]-2*M),m(this,"afterGetCenter",{positions:B}),B},h.getStartAndEndRadians=function(v,_){let T=y(v)?v:0,k=y(_)&&_>T&&_-T<360?_:T+360;return{start:f*(T+-90),end:f*(k+-90)}},s}),r(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c){let{setAnimation:s}=n,{addEvent:h,defined:f,extend:m,isNumber:y,pick:g,relativeLength:b}=c;class v extends a{getConnectorPath(T){let k=T.dataLabelPosition,w=T.options||{},E=w.connectorShape,A=this.connectorShapes[E]||E;return k&&A.call(this,{...k.computed,alignment:k.alignment},k.connectorPosition,w)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(T){let k=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(k.x,k.y,k.r+T,k.r+T,{innerR:k.r-1,start:k.start,end:k.end,borderRadius:k.borderRadius})}constructor(T,k,w){super(T,k,w),this.half=0,this.name??(this.name="Slice");let E=A=>{this.slice(A.type==="select")};h(this,"select",E),h(this,"unselect",E)}isValid(){return y(this.y)&&this.y>=0}setVisible(T,k=!0){T!==this.visible&&this.update({visible:T??!this.visible},k,void 0,!1)}slice(T,k,w){let E=this.series;s(w,E.chart),k=g(k,!0),this.sliced=this.options.sliced=T=f(T)?T:!this.sliced,E.options.data[E.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return m(v.prototype,{connectorShapes:{fixedOffset:function(_,T,k){let w=T.breakAt,E=T.touchingSliceAt,A=k.softConnector?["C",_.x+(_.alignment==="left"?-5:5),_.y,2*w.x-E.x,2*w.y-E.y,w.x,w.y]:["L",w.x,w.y];return[["M",_.x,_.y],A,["L",E.x,E.y]]},straight:function(_,T){let k=T.touchingSliceAt;return[["M",_.x,_.y],["L",k.x,k.y]]},crookedLine:function(_,T,k){let{breakAt:w,touchingSliceAt:E}=T,{series:A}=this,[M,S,N]=A.center,Y=N/2,{plotLeft:Z,plotWidth:K}=A.chart,B=_.alignment==="left",{x:F,y:O}=_,R=w.x;if(k.crookDistance){let G=b(k.crookDistance,1);R=B?M+Y+(K+Z-M-Y)*(1-G):Z+(M-Y)*G}else R=M+(S-O)*Math.tan((this.angle||0)-Math.PI/2);let L=[["M",F,O]];return(B?R<=F&&R>=w.x:R>=F&&R<=w.x)&&L.push(["L",R,O]),L.push(["L",w.x,w.y],["L",E.x,E.y]),L}}}),v}),r(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),r(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g){let{getStartAndEndRadians:b}=n,{noop:v}=c,{clamp:_,extend:T,fireEvent:k,merge:w,pick:E}=g;class A extends f{animate(S){let N=this,Y=N.points,Z=N.startAngleRad;S||Y.forEach(function(K){let B=K.graphic,F=K.shapeArgs;B&&F&&(B.attr({r:E(K.startR,N.center&&N.center[3]/2),start:Z,end:Z}),B.animate({r:F.r,start:F.start,end:F.end},N.options.animation))})}drawEmpty(){let S,N,Y=this.startAngleRad,Z=this.endAngleRad,K=this.options;this.total===0&&this.center?(S=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(S,N,this.center[1]/2,0,Y,Z).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:y.arc(S,N,this.center[2]/2,0,{start:Y,end:Z,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":K.borderWidth,fill:K.fillColor||"none",stroke:K.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let S=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=S[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(S,N,Y,Z){let K=this.center,B=this.radii?this.radii[Y.index]||0:K[2]/2,F=Z.dataLabelPosition,O=(F==null?void 0:F.distance)||0,R=Math.asin(_((S-K[1])/(B+O),-1,1));return K[0]+Math.cos(R)*(B+O)*(N?-1:1)+(O>0?(N?-1:1)*(Z.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let S,N,Y,Z,K=this,B=K.chart;this.drawEmpty(),K.group&&!B.styledMode&&K.group.shadow(K.options.shadow),K.points.forEach(function(F){let O={};N=F.graphic,!F.isNull&&N?(Z=F.shapeArgs,S=F.getTranslate(),B.styledMode||(Y=K.pointAttribs(F,F.selected&&"select")),F.delayedRendering?(N.setRadialReference(K.center).attr(Z).attr(S),B.styledMode||N.attr(Y).attr({"stroke-linejoin":"round"}),F.delayedRendering=!1):(N.setRadialReference(K.center),B.styledMode||w(!0,O,Y),w(!0,O,Z,S),N.animate(O)),N.attr({visibility:F.visible?"inherit":"hidden"}),N.addClass(F.getClassName(),!0)):N&&(F.graphic=N.destroy())})}sortByAngle(S,N){S.sort(function(Y,Z){return Y.angle!==void 0&&(Z.angle-Y.angle)*N})}translate(S){k(this,"translate"),this.generatePoints();let N=this.options,Y=N.slicedOffset,Z=b(N.startAngle,N.endAngle),K=this.startAngleRad=Z.start,B=(this.endAngleRad=Z.end)-K,F=this.points,O=N.ignoreHiddenPoint,R=F.length,L,G,V,$,q,W,se,fe=0;for(S||(this.center=S=this.getCenter()),W=0;W<R;W++){se=F[W],L=K+fe*B,se.isValid()&&(!O||se.visible)&&(fe+=se.percentage/100),G=K+fe*B;let re={x:S[0],y:S[1],r:S[2]/2,innerR:S[3]/2,start:Math.round(1e3*L)/1e3,end:Math.round(1e3*G)/1e3};se.shapeType="arc",se.shapeArgs=re,(V=(G+L)/2)>1.5*Math.PI?V-=2*Math.PI:V<-Math.PI/2&&(V+=2*Math.PI),se.slicedTranslation={translateX:Math.round(Math.cos(V)*Y),translateY:Math.round(Math.sin(V)*Y)},$=Math.cos(V)*S[2]/2,q=Math.sin(V)*S[2]/2,se.tooltipPos=[S[0]+.7*$,S[1]+.7*q],se.half=V<-Math.PI/2||V>Math.PI/2?1:0,se.angle=V}k(this,"afterTranslate")}updateTotals(){let S=this.points,N=S.length,Y=this.options.ignoreHiddenPoint,Z,K,B=0;for(Z=0;Z<N;Z++)(K=S[Z]).isValid()&&(!Y||K.visible)&&(B+=K.y);for(Z=0,this.total=B;Z<N;Z++)(K=S[Z]).percentage=B>0&&(K.visible||!Y)?K.y/B*100:0,K.total=B}}return A.defaultOptions=w(f.defaultOptions,h),T(A.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:a.prototype.drawTracker,getCenter:n.getCenter,getSymbol:v,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:a.prototype.pointAttribs,pointClass:s,requireSorting:!1,searchPoint:v,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("pie",A),A}),r(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){var f;let{composed:m,noop:y}=a,{distribute:g}=c,{series:b}=s,{arrayMax:v,clamp:_,defined:T,pick:k,pushUnique:w,relativeLength:E}=h;return function(A){let M={radialDistributionY:function(K,B){var F;return(((F=B.dataLabelPosition)==null?void 0:F.top)||0)+K.distributeBox.pos},radialDistributionX:function(K,B,F,O,R){let L=R.dataLabelPosition;return K.getX(F<((L==null?void 0:L.top)||0)+2||F>((L==null?void 0:L.bottom)||0)-2?O:F,B.half,B,R)},justify:function(K,B,F,O){var R;return O[0]+(K.half?-1:1)*(F+(((R=B.dataLabelPosition)==null?void 0:R.distance)||0))},alignToPlotEdges:function(K,B,F,O){let R=K.getBBox().width;return B?R+O:F-R-O},alignToConnectors:function(K,B,F,O){let R=0,L;return K.forEach(function(G){(L=G.dataLabel.getBBox().width)>R&&(R=L)}),B?R+O:F-R-O}};function S(K,B){let{center:F,options:O}=this,R=F[2]/2,L=K.angle||0,G=Math.cos(L),V=Math.sin(L),$=F[0]+G*R,q=F[1]+V*R,W=Math.min((O.slicedOffset||0)+(O.borderWidth||0),B/5);return{natural:{x:$+G*B,y:q+V*B},computed:{},alignment:B<0?"center":K.half?"right":"left",connectorPosition:{breakAt:{x:$+G*W,y:q+V*W},touchingSliceAt:{x:$,y:q}},distance:B}}function N(){var Ee;let K=this,B=K.points,F=K.chart,O=F.plotWidth,R=F.plotHeight,L=F.plotLeft,G=Math.round(F.chartWidth/3),V=K.center,$=V[2]/2,q=V[1],W=[[],[]],se=[0,0,0,0],fe=K.dataLabelPositioners,re,le,Se,ye=0;K.visible&&((Ee=K.hasDataLabels)!=null&&Ee.call(K))&&(B.forEach(J=>{(J.dataLabels||[]).forEach(ie=>{ie.shortened&&(ie.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),ie.shortened=!1)})}),b.prototype.drawDataLabels.apply(K),B.forEach(J=>{(J.dataLabels||[]).forEach((ie,oe)=>{var ue;let we=V[2]/2,ee=ie.options,ae=E((ee==null?void 0:ee.distance)||0,we);oe===0&&W[J.half].push(J),!T((ue=ee==null?void 0:ee.style)==null?void 0:ue.width)&&ie.getBBox().width>G&&(ie.css({width:Math.round(.7*G)+"px"}),ie.shortened=!0),ie.dataLabelPosition=this.getDataLabelPosition(J,ae),ye=Math.max(ye,ae)})}),W.forEach((J,ie)=>{let oe=J.length,we=[],ee,ae,ue=0,ve;oe&&(K.sortByAngle(J,ie-.5),ye>0&&(ee=Math.max(0,q-$-ye),ae=Math.min(q+$+ye,F.plotHeight),J.forEach(Ce=>{(Ce.dataLabels||[]).forEach(je=>{var Re;let Me=je.dataLabelPosition;Me&&Me.distance>0&&(Me.top=Math.max(0,q-$-Me.distance),Me.bottom=Math.min(q+$+Me.distance,F.plotHeight),ue=je.getBBox().height||21,je.lineHeight=F.renderer.fontMetrics(je.text||je).h+2*je.padding,Ce.distributeBox={target:(((Re=je.dataLabelPosition)==null?void 0:Re.natural.y)||0)-Me.top+je.lineHeight/2,size:ue,rank:Ce.y},we.push(Ce.distributeBox))})}),g(we,ve=ae+ue-ee,ve/5)),J.forEach(Ce=>{(Ce.dataLabels||[]).forEach(je=>{let Me=je.options||{},Re=Ce.distributeBox,me=je.dataLabelPosition,De=(me==null?void 0:me.natural.y)||0,Ue=Me.connectorPadding||0,Pe=je.lineHeight||21,Te=(Pe-je.getBBox().height)/2,Ie=0,Fe=De,Oe="inherit";if(me){if(we&&T(Re)&&me.distance>0&&(Re.pos===void 0?Oe="hidden":(Se=Re.size,Fe=fe.radialDistributionY(Ce,je))),Me.justify)Ie=fe.justify(Ce,je,$,V);else switch(Me.alignTo){case"connectors":Ie=fe.alignToConnectors(J,ie,O,L);break;case"plotEdges":Ie=fe.alignToPlotEdges(je,ie,O,L);break;default:Ie=fe.radialDistributionX(K,Ce,Fe-Te,De,je)}if(me.attribs={visibility:Oe,align:me.alignment},me.posAttribs={x:Ie+(Me.x||0)+({left:Ue,right:-Ue}[me.alignment]||0),y:Fe+(Me.y||0)-Pe/2},me.computed.x=Ie,me.computed.y=Fe-Te,k(Me.crop,!0)){let Ge;Ie-(le=je.getBBox().width)<Ue&&ie===1?(Ge=Math.round(le-Ie+Ue),se[3]=Math.max(Ge,se[3])):Ie+le>O-Ue&&ie===0&&(Ge=Math.round(Ie+le-O+Ue),se[1]=Math.max(Ge,se[1])),Fe-Se/2<0?se[0]=Math.max(Math.round(-Fe+Se/2),se[0]):Fe+Se/2>R&&(se[2]=Math.max(Math.round(Fe+Se/2-R),se[2])),me.sideOverflow=Ge}}})}))}),(v(se)===0||this.verifyDataLabelOverflow(se))&&(this.placeDataLabels(),this.points.forEach(J=>{(J.dataLabels||[]).forEach(ie=>{var ae;let{connectorColor:oe,connectorWidth:we=1}=ie.options||{},ee=ie.dataLabelPosition;if(we){let ue;re=ie.connector,ee&&ee.distance>0?(ue=!re,re||(ie.connector=re=F.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+J.colorIndex+(J.className?" "+J.className:"")).add(K.dataLabelsGroup)),F.styledMode||re.attr({"stroke-width":we,stroke:oe||J.color||"#666666"}),re[ue?"attr":"animate"]({d:J.getConnectorPath(ie)}),re.attr({visibility:(ae=ee.attribs)==null?void 0:ae.visibility})):re&&(ie.connector=re.destroy())}})})))}function Y(){this.points.forEach(K=>{(K.dataLabels||[]).forEach(B=>{var O;let F=B.dataLabelPosition;F?(F.sideOverflow&&(B.css({width:Math.max(B.getBBox().width-F.sideOverflow,0)+"px",textOverflow:(((O=B.options)==null?void 0:O.style)||{}).textOverflow||"ellipsis"}),B.shortened=!0),B.attr(F.attribs),B[B.moved?"animate":"attr"](F.posAttribs),B.moved=!0):B&&B.attr({y:-9999})}),delete K.distributeBox},this)}function Z(K){let B=this.center,F=this.options,O=F.center,R=F.minSize||80,L=R,G=F.size!==null;return!G&&(O[0]!==null?L=Math.max(B[2]-Math.max(K[1],K[3]),R):(L=Math.max(B[2]-K[1]-K[3],R),B[0]+=(K[3]-K[1])/2),O[1]!==null?L=_(L,R,B[2]-Math.max(K[0],K[2])):(L=_(L,R,B[2]-K[0]-K[2]),B[1]+=(K[0]-K[2])/2),L<B[2]?(B[2]=L,B[3]=Math.min(F.thickness?Math.max(0,L-2*F.thickness):Math.max(0,E(F.innerSize||0,L)),L),this.translate(B),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}A.compose=function(K){if(n.compose(b),w(m,"PieDataLabel")){let B=K.prototype;B.dataLabelPositioners=M,B.alignDataLabel=y,B.drawDataLabels=N,B.getDataLabelPosition=S,B.placeDataLabels=Y,B.verifyDataLabelOverflow=Z}}}(f||(f={})),f}),r(t,"Core/Geometry/GeometryUtilities.js",[],function(){var n,a;return(a=n||(n={})).getCenterOfPoints=function(c){let s=c.reduce((h,f)=>(h.x+=f.x,h.y+=f.y,h),{x:0,y:0});return{x:s.x/c.length,y:s.y/c.length}},a.getDistanceBetweenPoints=function(c,s){return Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2))},a.getAngleBetweenPoints=function(c,s){return Math.atan2(s.x-c.x,s.y-c.y)},a.pointInPolygon=function({x:c,y:s},h){let f=h.length,m,y,g=!1;for(m=0,y=f-1;m<f;y=m++){let[b,v]=h[m],[_,T]=h[y];v>s!=T>s&&c<(_-b)*(s-v)/(T-v)+b&&(g=!g)}return g},n}),r(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(n,a){let{pointInPolygon:c}=n,{addEvent:s,fireEvent:h,objectEach:f,pick:m}=a;function y(v){let _=v.length,T=(Y,Z)=>!(Z.x>=Y.x+Y.width||Z.x+Z.width<=Y.x||Z.y>=Y.y+Y.height||Z.y+Z.height<=Y.y),k=(Y,Z)=>{for(let K of Y)if(c({x:K[0],y:K[1]},Z))return!0;return!1},w,E,A,M,S,N=!1;for(let Y=0;Y<_;Y++)(w=v[Y])&&(w.oldOpacity=w.opacity,w.newOpacity=1,w.absoluteBox=function(Z){var K,B;if(Z&&(!Z.alignAttr||Z.placed)){let F=Z.box?0:Z.padding||0,O=Z.alignAttr||{x:Z.attr("x"),y:Z.attr("y")},R=Z.getBBox();return Z.width=R.width,Z.height=R.height,{x:O.x+(((K=Z.parentGroup)==null?void 0:K.translateX)||0)+F,y:O.y+(((B=Z.parentGroup)==null?void 0:B.translateY)||0)+F,width:(Z.width||0)-2*F,height:(Z.height||0)-2*F,polygon:R==null?void 0:R.polygon}}}(w));v.sort((Y,Z)=>(Z.labelrank||0)-(Y.labelrank||0));for(let Y=0;Y<_;++Y){M=(E=v[Y])&&E.absoluteBox;let Z=M==null?void 0:M.polygon;for(let K=Y+1;K<_;++K){S=(A=v[K])&&A.absoluteBox;let B=!1;if(M&&S&&E!==A&&E.newOpacity!==0&&A.newOpacity!==0&&E.visibility!=="hidden"&&A.visibility!=="hidden"){let F=S.polygon;if(Z&&F&&Z!==F?k(Z,F)&&(B=!0):T(M,S)&&(B=!0),B){let O=E.labelrank<A.labelrank?E:A,R=O.text;O.newOpacity=0,R!=null&&R.element.querySelector("textPath")&&R.hide()}}}}for(let Y of v)g(Y,this)&&(N=!0);N&&h(this,"afterHideAllOverlappingLabels")}function g(v,_){let T,k,w=!1;return v&&(k=v.newOpacity,v.oldOpacity!==k&&(v.hasClass("highcharts-data-label")?(v[k?"removeClass":"addClass"]("highcharts-data-label-hidden"),T=function(){_.styledMode||v.css({pointerEvents:k?"auto":"none"})},w=!0,v[v.isOld?"animate":"attr"]({opacity:k},void 0,T),h(_,"afterHideOverlappingLabel")):v.attr({opacity:k})),v.isOld=!0),w}function b(){var T;let v=this,_=[];for(let k of v.labelCollectors||[])_=_.concat(k());for(let k of v.yAxis||[])k.stacking&&k.options.stackLabels&&!k.options.stackLabels.allowOverlap&&f(k.stacking.stacks,w=>{f(w,E=>{E.label&&_.push(E.label)})});for(let k of v.series||[])if(k.visible&&((T=k.hasDataLabels)!=null&&T.call(k))){let w=E=>{for(let A of E)A.visible&&(A.dataLabels||[]).forEach(M=>{var N;let S=M.options||{};M.labelrank=m(S.labelrank,A.labelrank,(N=A.shapeArgs)==null?void 0:N.height),S.allowOverlap??Number(S.distance)>0?(M.oldOpacity=M.opacity,M.newOpacity=1,g(M,v)):_.push(M)})};w(k.nodes||[]),w(k.points)}this.hideOverlappingLabels(_)}return{compose:function(v){let _=v.prototype;_.hideOverlappingLabels||(_.hideOverlappingLabels=y,s(v,"render",b))}}}),r(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{defaultOptions:s}=n,{noop:h}=a,{addEvent:f,extend:m,isObject:y,merge:g,relativeLength:b}=c,v={radius:0,scope:"stack",where:void 0},_=h,T=h;function k(S,N,Y,Z,K={}){let B=_(S,N,Y,Z,K),{innerR:F=0,r:O=Y,start:R=0,end:L=0}=K;if(K.open||!K.borderRadius)return B;let G=L-R,V=Math.sin(G/2),$=Math.max(Math.min(b(K.borderRadius||0,O-F),(O-F)/2,O*V/(1+V)),0),q=Math.min($,G/Math.PI*2*F),W=B.length-1;for(;W--;)(function(se,fe,re){let le,Se,ye,Ee=se[fe],J=se[fe+1];if(J[0]==="Z"&&(J=se[0]),(Ee[0]==="M"||Ee[0]==="L")&&J[0]==="A"?(le=Ee,Se=J,ye=!0):Ee[0]==="A"&&(J[0]==="M"||J[0]==="L")&&(le=J,Se=Ee),le&&Se&&Se.params){let ie=Se[1],oe=Se[5],we=Se.params,{start:ee,end:ae,cx:ue,cy:ve}=we,Ce=oe?ie-re:ie+re,je=Ce?Math.asin(re/Ce):0,Me=oe?je:-je,Re=Math.cos(je)*Ce;ye?(we.start=ee+Me,le[1]=ue+Re*Math.cos(ee),le[2]=ve+Re*Math.sin(ee),se.splice(fe+1,0,["A",re,re,0,0,1,ue+ie*Math.cos(we.start),ve+ie*Math.sin(we.start)])):(we.end=ae-Me,Se[6]=ue+ie*Math.cos(we.end),Se[7]=ve+ie*Math.sin(we.end),se.splice(fe+1,0,["A",re,re,0,0,1,ue+Re*Math.cos(ae),ve+Re*Math.sin(ae)])),Se[4]=Math.abs(we.end-we.start)<Math.PI?0:1}})(B,W,W>1?q:$);return B}function w(){var S,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:Y,yAxis:Z}=this,K=Y.stacking==="percent",B=(N=(S=s.plotOptions)==null?void 0:S[this.type])==null?void 0:N.borderRadius,F=E(Y.borderRadius,y(B)?B:{}),O=Z.options.reversed;for(let R of this.points){let{shapeArgs:L}=R;if(R.shapeType==="roundedRect"&&L){let{width:G=0,height:V=0,y:$=0}=L,q=$,W=V;if(F.scope==="stack"&&R.stackTotal){let le=Z.translate(K?100:R.stackTotal,!1,!0,!1,!0),Se=Z.translate(Y.threshold||0,!1,!0,!1,!0),ye=this.crispCol(0,Math.min(le,Se),0,Math.abs(le-Se));q=ye.y,W=ye.height}let se=(R.negative?-1:1)*(O?-1:1)==-1,fe=F.where;!fe&&this.is("waterfall")&&Math.abs((R.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(fe="all"),fe||(fe="end");let re=Math.min(b(F.radius,G),G/2,fe==="all"?V/2:1/0)||0;fe==="end"&&(se&&(q-=re),W+=re),m(L,{brBoxHeight:W,brBoxY:q,r:re})}}}}function E(S,N){return y(S)||(S={radius:S||0}),g(v,N,S)}function A(){let S=E(this.options.borderRadius);for(let N of this.points){let Y=N.shapeArgs;Y&&(Y.borderRadius=b(S.radius,(Y.r||0)-(Y.innerR||0)))}}function M(S,N,Y,Z,K={}){let B=T(S,N,Y,Z,K),{r:F=0,brBoxHeight:O=Z,brBoxY:R=N}=K,L=N-R,G=R+O-(N+Z),V=L-F>-.1?0:F,$=G-F>-.1?0:F,q=Math.max(V&&L,0),W=Math.max($&&G,0),se=[S+V,N],fe=[S+Y-V,N],re=[S+Y,N+V],le=[S+Y,N+Z-$],Se=[S+Y-$,N+Z],ye=[S+$,N+Z],Ee=[S,N+Z-$],J=[S,N+V],ie=(oe,we)=>Math.sqrt(Math.pow(oe,2)-Math.pow(we,2));if(q){let oe=ie(V,V-q);se[0]-=oe,fe[0]+=oe,re[1]=J[1]=N+V-q}if(Z<V-q){let oe=ie(V,V-q-Z);re[0]=le[0]=S+Y-V+oe,Se[0]=Math.min(re[0],Se[0]),ye[0]=Math.max(le[0],ye[0]),Ee[0]=J[0]=S+V-oe,re[1]=J[1]=N+Z}if(W){let oe=ie($,$-W);Se[0]+=oe,ye[0]-=oe,le[1]=Ee[1]=N+Z-$+W}if(Z<$-W){let oe=ie($,$-W-Z);re[0]=le[0]=S+Y-$+oe,fe[0]=Math.min(re[0],fe[0]),se[0]=Math.max(le[0],se[0]),Ee[0]=J[0]=S+$-oe,le[1]=Ee[1]=N}return B.length=0,B.push(["M",...se],["L",...fe],["A",V,V,0,0,1,...re],["L",...le],["A",$,$,0,0,1,...Se],["L",...ye],["A",$,$,0,0,1,...Ee],["L",...J],["A",V,V,0,0,1,...se],["Z"]),B}return{compose:function(S,N,Y){let Z=S.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let K=Y.prototype.symbols;f(S,"afterColumnTranslate",w,{order:9}),f(Z,"afterTranslate",A),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),_=K.arc,T=K.roundedRect,K.arc=k,K.roundedRect=M}},optionsToObject:E}}),r(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(n){var a;let{diffObjects:c,extend:s,find:h,merge:f,pick:m,uniqueKey:y}=n;return function(g){function b(_,T){let k=_.condition;(k.callback||function(){return this.chartWidth<=m(k.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=m(k.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=m(k.minWidth,0)&&this.chartHeight>=m(k.minHeight,0)}).call(this)&&T.push(_._id)}function v(_,T){let k=this.options.responsive,w=this.currentResponsive,E=[],A;!T&&k&&k.rules&&k.rules.forEach(N=>{N._id===void 0&&(N._id=y()),this.matchResponsiveRule(N,E)},this);let M=f(...E.map(N=>h((k||{}).rules||[],Y=>Y._id===N)).map(N=>N&&N.chartOptions));M.isResponsiveOptions=!0,E=E.toString()||void 0;let S=w&&w.ruleIds;E===S||(w&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(w.undoOptions,_,!0),this.updatingResponsive=!1),E?((A=c(M,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:E,mergedOptions:M,undoOptions:A},this.updatingResponsive||this.update(M,_,!0)):this.currentResponsive=void 0)}g.compose=function(_){let T=_.prototype;return T.matchResponsiveRule||s(T,{matchResponsiveRule:b,setResponsive:v}),_}}(a||(a={})),a}),r(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(n,a,c,s,h,f,m,y,g,b,v,_,T,k,w,E,A,M,S,N,Y,Z,K,B,F,O,R,L,G,V,$,q,W,se,fe,re){return n.AST=f,n.Axis=T,n.Chart=K,n.Color=fe,n.DataLabel=$,n.Fx=s,n.HTMLElement=_,n.Legend=Y,n.LegendSymbol=Z,n.OverlappingDataLabels=n.OverlappingDataLabels||q,n.PlotLineOrBand=E,n.Point=S,n.Pointer=N,n.RendererRegistry=y,n.Series=R,n.SeriesRegistry=L,n.StackItem=O,n.SVGElement=b,n.SVGRenderer=v,n.Templating=m,n.Tick=A,n.Time=re,n.Tooltip=M,n.animate=h.animate,n.animObject=h.animObject,n.chart=K.chart,n.color=fe.parse,n.dateFormat=m.dateFormat,n.defaultOptions=c.defaultOptions,n.distribute=g.distribute,n.format=m.format,n.getDeferredAnimation=h.getDeferredAnimation,n.getOptions=c.getOptions,n.numberFormat=m.numberFormat,n.seriesType=L.seriesType,n.setAnimation=h.setAnimation,n.setOptions=c.setOptions,n.stop=h.stop,n.time=c.defaultTime,n.timers=s.timers,W.compose(n.Series,n.SVGElement,n.SVGRenderer),G.compose(n.Series.types.column),$.compose(n.Series),k.compose(n.Axis),_.compose(n.SVGRenderer),Y.compose(n.Chart),w.compose(n.Axis),q.compose(n.Chart),V.compose(n.Series.types.pie),E.compose(n.Chart,n.Axis),N.compose(n.Chart),se.compose(n.Chart),B.compose(n.Axis,n.Chart,n.Series),F.compose(n.Axis,n.Chart,n.Series),M.compose(n.Pointer),a.extend(n,a),n}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(iI);var Aq=iI.exports;const Dp=Cp(Aq);var rI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{doc:c,win:s}=n,{css:h}=a,f=s.EventTarget&&new s.EventTarget||"none";function m(g){if(typeof s.MouseEvent=="function")return new s.MouseEvent(g.type,g);if(c.createEvent){let b=c.createEvent("MouseEvent");if(b.initMouseEvent)return b.initMouseEvent(g.type,g.bubbles,g.cancelable,g.view||s,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget),b}return y(g.type)}function y(g,b,v){let _=b||{x:0,y:0};if(typeof s.MouseEvent=="function")return new s.MouseEvent(g,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:v||f,view:s,detail:g==="click"?1:0,screenX:_.x,screenY:_.y,clientX:_.x,clientY:_.y});if(c.createEvent){let T=c.createEvent("MouseEvent");if(T.initMouseEvent)return T.initMouseEvent(g,!0,!0,s,g==="click"?1:0,_.x,_.y,_.x,_.y,!1,!1,!1,!1,0,null),T}return{type:g}}return{addClass:function(g,b){g.classList?g.classList.add(b):0>g.className.indexOf(b)&&(g.className+=" "+b)},cloneMouseEvent:m,cloneTouchEvent:function(g){let b=_=>{let T=[];for(let k=0;k<_.length;++k){let w=_.item(k);w&&T.push(w)}return T};if(typeof s.TouchEvent=="function"){let _=new s.TouchEvent(g.type,{touches:b(g.touches),targetTouches:b(g.targetTouches),changedTouches:b(g.changedTouches),ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g.altKey,metaKey:g.metaKey,bubbles:g.bubbles,cancelable:g.cancelable,composed:g.composed,detail:g.detail,view:g.view});return g.defaultPrevented&&_.preventDefault(),_}let v=m(g);return v.touches=g.touches,v.changedTouches=g.changedTouches,v.targetTouches=g.targetTouches,v},escapeStringForHTML:function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(g){return c.getElementById(g)},getFakeMouseEvent:y,getHeadingTagNameForElement:function(g){let b=k=>"h"+Math.min(6,parseInt(k.slice(1),10)+1),v=k=>/^H[1-6]$/i.test(k),_=k=>{let w=k;for(;w=w.previousSibling;){let E=w.tagName||"";if(v(E))return E}return""},T=k=>{let w=_(k);if(w)return b(w);let E=k.parentElement;if(!E)return"p";let A=E.tagName;return v(A)?b(A):T(E)};return T(g)},removeChildNodes:function(g){for(;g.lastChild;)g.removeChild(g.lastChild)},removeClass:function(g,b){g.classList?g.classList.remove(b):g.className=g.className.replace(RegExp(b,"g"),"")},removeElement:function(g){g&&g.parentNode&&g.parentNode.removeChild(g)},reverseChildNodes:function(g){let b=g.childNodes.length;for(;b--;)g.appendChild(g.childNodes[b])},simulatedEventTarget:f,stripHTMLTagsFromString:function(g,b=!1){return typeof g=="string"?b?g.replace(/<\/?[^>]+(>|$)/g,""):g.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):g},visuallyHideElement:function(g){h(g,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),r(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a){var c;let{format:s}=n,{getNestedProperty:h,pick:f}=a;return function(m){function y(b,v,_){let T=(M,S)=>{let N=M.slice(S||0),Y=N.indexOf("{"),Z=N.indexOf("}");if(Y>-1&&Z>Y)return{statement:N.substring(Y+1,Z),begin:S+Y+1,end:S+Z}},k=[],w,E,A=0;do w=T(b,A),(E=b.substring(A,w&&w.begin-1)).length&&k.push({value:E,type:"constant"}),w&&k.push({value:w.statement,type:"statement"}),A=w?w.end+1:A+1;while(w);return k.forEach(M=>{M.type==="statement"&&(M.value=function(S,N){let Y,Z,K=S.indexOf("#each("),B=S.indexOf("#plural("),F=S.indexOf("["),O=S.indexOf("]");if(K>-1){let L=S.slice(K).indexOf(")")+K,G=S.substring(0,K),V=S.substring(L+1),$=S.substring(K+6,L).split(","),q=Number($[1]),W;if(Z="",Y=h($[0],N)){W=(q=isNaN(q)?Y.length:q)<0?Y.length+q:Math.min(q,Y.length);for(let se=0;se<W;++se)Z+=G+Y[se]+V}return Z.length?Z:""}if(B>-1){var R;let L=S.slice(B).indexOf(")")+B,G=S.substring(B+8,L).split(",");switch(Number(h(G[0],N))){case 0:Z=f(G[4],G[1]);break;case 1:Z=f(G[2],G[1]);break;case 2:Z=f(G[3],G[1]);break;default:Z=G[1]}return Z?(R=Z).trim&&R.trim()||R.replace(/^\s+|\s+$/g,""):""}if(F>-1){let L,G=S.substring(0,F),V=Number(S.substring(F+1,O));return Y=h(G,N),!isNaN(V)&&Y&&(V<0?(L=Y[Y.length+V])===void 0&&(L=Y[0]):(L=Y[V])===void 0&&(L=Y[Y.length-1])),L!==void 0?L:""}return"{"+S+"}"}(M.value,v))}),s(k.reduce((M,S)=>M+S.value,""),v,_)}function g(b,v){let _=b.split("."),T=this.options.lang,k=0;for(;k<_.length;++k)T=T&&T[_[k]];return typeof T=="string"?y(T,v,this):""}m.compose=function(b){let v=b.prototype;v.langFormat||(v.langFormat=g)},m.i18nFormat=y}(c||(c={})),c}),r(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c){let{doc:s}=n,{stripHTMLTagsFromString:h}=a,{defined:f,find:m,fireEvent:y}=c;function g(v){if(v.points&&v.points.length){let _=m(v.points,T=>!!T.graphic);return _&&_.graphic&&_.graphic.element}}function b(v){let _=g(v);return _&&_.parentNode||v.graph&&v.graph.element||v.group&&v.group.element}return{fireEventOnWrappedOrUnwrappedElement:function v(_,T){let k=T.type,w=_.hcEvents;s.createEvent&&(_.dispatchEvent||_.fireEvent)?_.dispatchEvent?_.dispatchEvent(T):_.fireEvent(k,T):w&&w[k]?y(_,k,T):_.element&&v(_.element,T)},getChartTitle:function(v){return h(v.options.title.text||v.langFormat("accessibility.defaultChartTitle",{chart:v}),v.renderer.forExport)},getAxisDescription:function(v){var _,T;return v&&(((_=v.options.accessibility)==null?void 0:_.description)||((T=v.axisTitle)==null?void 0:T.textStr)||v.options.id||v.categories&&"categories"||v.dateTime&&"Time"||"values")},getAxisRangeDescription:function(v){let _=v.options||{};return _.accessibility&&_.accessibility.rangeDescription!==void 0?_.accessibility.rangeDescription:v.categories?function(T){let k=T.chart;return T.dataMax&&T.dataMin?k.langFormat("accessibility.axis.rangeCategories",{chart:k,axis:T,numCategories:T.dataMax-T.dataMin+1}):""}(v):v.dateTime&&(v.min===0||v.dataMin===0)?function(T){let k=T.chart,w={},E=T.dataMin||T.min||0,A=T.dataMax||T.max||0,M="Seconds";w.Seconds=(A-E)/1e3,w.Minutes=w.Seconds/60,w.Hours=w.Minutes/60,w.Days=w.Hours/24,["Minutes","Hours","Days"].forEach(function(N){w[N]>2&&(M=N)});let S=w[M].toFixed(M!=="Seconds"&&M!=="Minutes"?1:0);return k.langFormat("accessibility.axis.timeRange"+M,{chart:k,axis:T,range:S.replace(".0","")})}(v):function(T){let k=T.chart,w=k.options,E=w&&w.accessibility&&w.accessibility.screenReaderSection.axisRangeDateFormat||"",A={min:T.dataMin||T.min||0,max:T.dataMax||T.max||0},M=function(S){return T.dateTime?k.time.dateFormat(E,A[S]):A[S].toString()};return k.langFormat("accessibility.axis.rangeFromTo",{chart:k,axis:T,rangeFrom:M("min"),rangeTo:M("max")})}(v)},getPointFromXY:function(v,_,T){let k=v.length,w;for(;k--;)if(w=m(v[k].points||[],function(E){return E.x===_&&E.y===T}))return w},getSeriesFirstPointElement:g,getSeriesFromName:function(v,_){return _?(v.series||[]).filter(function(T){return T.name===_}):v.series},getSeriesA11yElement:b,unhideChartElementFromAT:function v(_,T){T.setAttribute("aria-hidden",!1),T!==_.renderTo&&T.parentNode&&T.parentNode!==s.body&&(Array.prototype.forEach.call(T.parentNode.childNodes,function(k){k.hasAttribute("aria-hidden")||k.setAttribute("aria-hidden",!0)}),v(_,T.parentNode))},hideSeriesFromAT:function(v){let _=b(v);_&&_.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(v){let _=v.series.xAxis,T=v.series.yAxis,k=_&&_.scrollbar?_:T,w=k&&k.scrollbar;if(w&&f(w.to)&&f(w.from)){let E=w.to-w.from,A=function(M,S){if(!f(M.dataMin)||!f(M.dataMax))return 0;let N=M.toPixels(M.dataMin),Y=M.toPixels(M.dataMax),Z=M.coll==="xAxis"?"x":"y";return(M.toPixels(S[Z]||0)-N)/(Y-N)}(k,v);w.updatePosition(A-E/2,A+E/2),y(w,"changed",{from:w.from,to:w.to,trigger:"scrollbar",DOMEvent:null})}}}}),r(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a){let{doc:c}=n,{removeElement:s}=a;return class{constructor(){this.elements=[]}createElement(){let h=c.createElement.apply(c,arguments);return this.elements.push(h),h}removeElement(h){s(h),this.elements.splice(this.elements.indexOf(h),1)}destroyCreatedElements(){this.elements.forEach(function(h){s(h)}),this.elements=[]}}}),r(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{addEvent:c}=a;return class{constructor(){this.eventRemovers=[]}addEvent(){let s=c.apply(n,arguments);return this.eventRemovers.push({element:arguments[0],remover:s}),s}removeEvent(s){let h=this.eventRemovers.map(f=>f.remover).indexOf(s);this.eventRemovers[h].remover(),this.eventRemovers.splice(h,1)}removeAddedEvents(){this.eventRemovers.map(s=>s.remover).forEach(s=>s()),this.eventRemovers=[]}}}),r(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s){let{fireEventOnWrappedOrUnwrappedElement:h}=n,{getFakeMouseEvent:f}=s;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(m,y){this.chart=m,this.eventProvider=new c,this.domElementProvider=new a,this.proxyProvider=y,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(m,y,g,b){return this.eventProvider.addEvent(m,y,g,b)}createElement(m,y){return this.domElementProvider.createElement(m,y)}fakeClickEvent(m){h(m,f("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),r(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(n){let{find:a}=n;return class{constructor(c,s){this.chart=c,this.keyCodeMap=s.keyCodeMap||[],this.validate=s.validate,this.init=s.init,this.terminate=s.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(c){let s=c.which||c.keyCode,h=this.response.noHandler,f=a(this.keyCodeMap,function(m){return m[0].indexOf(s)>-1});return f?h=f[1].call(this,s,c):s===9&&(h=this.response[c.shiftKey?"prev":"next"]),h}}}),r(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:f,getChartTitle:m}=c,{doc:y}=s,{stripHTMLTagsFromString:g}=h;return class extends n{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let b=this.chart,v="highcharts-title-"+b.index,_=g(b.langFormat("accessibility.svgContainerTitle",{chartTitle:m(b)}));if(_.length){let T=this.svgTitleElement=this.svgTitleElement||y.createElementNS("http://www.w3.org/2000/svg","title");T.textContent=_,T.id=v,b.renderTo.insertBefore(T,b.renderTo.firstChild)}}setSVGContainerLabel(){let b=this.chart,v=b.langFormat("accessibility.svgContainerLabel",{chartTitle:m(b)});b.renderer.box&&v.length&&b.renderer.box.setAttribute("aria-label",v)}setGraphicContainerAttrs(){let b=this.chart,v=b.langFormat("accessibility.graphicContainerLabel",{chartTitle:m(b)});v.length&&b.container.setAttribute("aria-label",v)}setRenderToAttrs(){let b=this.chart,v=b.options.accessibility.landmarkVerbosity!=="disabled",_=b.langFormat("accessibility.chartContainerLabel",{title:m(b),chart:b});_&&(b.renderTo.setAttribute("role",v?"region":"group"),b.renderTo.setAttribute("aria-label",_))}makeCreditsAccessible(){let b=this.chart,v=b.credits;v&&(v.textStr&&v.element.setAttribute("aria-label",b.langFormat("accessibility.credits",{creditsStr:g(v.textStr,b.renderer.forExport)})),f(b,v.element))}getKeyboardNavigation(){let b=this.chart;return new a(b,{keyCodeMap:[],validate:function(){return!0},init:function(){let v=b.accessibility;v&&v.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),r(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,pick:s}=n;return function(h){let f=["x","y","transform","width","height","r","d","stroke-width"];function m(){let v=this.focusElement,_=this.options.accessibility.keyboardNavigation.focusBorder;v&&(v.removeFocusBorder(),_.enabled&&v.addFocusBorder(_.margin,{stroke:_.style.color,strokeWidth:_.style.lineWidth,r:_.style.borderRadius}))}function y(v,_){let T=this.options.accessibility.keyboardNavigation.focusBorder,k=_||v.element;k&&k.focus&&(k.hcEvents&&k.hcEvents.focusin||c(k,"focusin",function(){}),k.focus(),T.hideBrowserFocusOutline&&(k.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=v,this.renderFocusBorder()}function g(v,_){this.focusBorder&&this.removeFocusBorder();let T=this.getBBox(),k=s(v,3),w=this.parentGroup,E=this.scaleX||w&&w.scaleX,A=this.scaleY||w&&w.scaleY,M=(E?!A:A)?Math.abs(E||A||1):(Math.abs(E||1)+Math.abs(A||1))/2;T.x+=this.translateX?this.translateX:0,T.y+=this.translateY?this.translateY:0;let S=T.x-k,N=T.y-k,Y=T.width+2*k,Z=T.height+2*k,K=!!this.text;if(this.element.nodeName==="text"||K){let B,F,O=!!this.rotation,R=K?{x:O?1:0,y:0}:(B=0,F=0,this.attr("text-anchor")==="middle"?B=F=.5:this.rotation?B=.25:F=.75,{x:B,y:F}),L=+this.attr("x"),G=+this.attr("y");if(isNaN(L)||(S=L-T.width*R.x-k),isNaN(G)||(N=G-T.height*R.y-k),K&&O){let V=Y;Y=Z,Z=V,isNaN(L)||(S=L-T.height*R.x-k),isNaN(G)||(N=G-T.width*R.y-k)}}this.focusBorder=this.renderer.rect(S,N,Y,Z,parseInt((_&&_.r||0).toString(),10)/M).addClass("highcharts-focus-border").attr({zIndex:99}).add(w),this.renderer.styledMode||this.focusBorder.attr({stroke:_&&_.stroke,"stroke-width":(_&&_.strokeWidth||0)/M}),function(B,...F){B.focusBorderUpdateHooks||(B.focusBorderUpdateHooks={},f.forEach(O=>{let R=O+"Setter",L=B[R]||B._defaultSetter;B.focusBorderUpdateHooks[R]=L,B[R]=function(){let G=L.apply(B,arguments);return B.addFocusBorder.apply(B,F),G}}))}(this,v,_),function(B){if(B.focusBorderDestroyHook)return;let F=B.destroy;B.destroy=function(){return B.focusBorder&&B.focusBorder.destroy&&B.focusBorder.destroy(),F.apply(B,arguments)},B.focusBorderDestroyHook=F}(this)}function b(){var v;v=this,v.focusBorderUpdateHooks&&(Object.keys(v.focusBorderUpdateHooks).forEach(_=>{let T=v.focusBorderUpdateHooks[_];T===v._defaultSetter?delete v[_]:v[_]=T}),delete v.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}h.compose=function(v,_){let T=v.prototype,k=_.prototype;T.renderFocusBorder||(T.renderFocusBorder=m,T.setFocusToElement=y),k.addFocusBorder||(k.addFocusBorder=g,k.removeFocusBorder=b)}}(a||(a={})),a}),r(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{doc:f}=c,{addClass:m,visuallyHideElement:y}=s,{attr:g}=h;return class{constructor(b,v){this.chart=b,this.domElementProvider=new a,this.announceRegion=this.addAnnounceRegion(v)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(b){n.setElementHTML(this.announceRegion,b),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=n.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(b){let v=this.chart.announcerContainer||this.createAnnouncerContainer(),_=this.domElementProvider.createElement("div");return g(_,{"aria-hidden":!1,"aria-live":b,"aria-atomic":!0}),this.chart.styledMode?m(_,"highcharts-visually-hidden"):y(_),v.appendChild(_),_}createAnnouncerContainer(){let b=this.chart,v=f.createElement("div");return g(v,{"aria-hidden":!1,class:"highcharts-announcer-container"}),v.style.position="relative",b.renderTo.insertBefore(v,b.renderTo.firstChild),b.announcerContainer=v,v}}}),r(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(n){let{escapeStringForHTML:a,stripHTMLTagsFromString:c}=n;function s(y){return(y.annotations||[]).reduce((g,b)=>(b.options&&b.options.visible!==!1&&(g=g.concat(b.labels)),g),[])}function h(y){return y.options&&y.options.accessibility&&y.options.accessibility.description||y.graphic&&y.graphic.text&&y.graphic.text.textStr||""}function f(y){let g=y.options&&y.options.accessibility&&y.options.accessibility.description;if(g)return g;let b=y.chart,v=h(y),_=y.points,T=M=>M.graphic&&M.graphic.element&&M.graphic.element.getAttribute("aria-label")||"",k=_.filter(M=>!!M.graphic).map(M=>{let S=M.accessibility&&M.accessibility.valueDescription||T(M),N=M&&M.series.name||"";return(N?N+", ":"")+"data point "+S}).filter(M=>!!M),w=k.length,E=w>1?"MultiplePoints":w?"SinglePoint":"NoPoints",A={annotationText:v,annotation:y,numPoints:w,annotationPoint:k[0],additionalAnnotationPoints:k.slice(1)};return b.langFormat("accessibility.screenReaderSection.annotations.description"+E,A)}function m(y){return s(y).map(g=>{let b=a(c(f(g),y.renderer.forExport));return b?`<li>${b}</li>`:""})}return{getAnnotationsInfoHTML:function(y){let g=y.annotations;return g&&g.length?`<ul style="list-style-type: none">${m(y).join(" ")}</ul>`:""},getAnnotationLabelDescription:f,getAnnotationListItems:m,getPointAnnotationTexts:function(y){let g=s(y.series.chart).filter(b=>b.points.indexOf(y)>-1);return g.length?g.map(b=>`${h(b)}`):[]}}}),r(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g,b){let{getAnnotationsInfoHTML:v}=s,{getAxisDescription:_,getAxisRangeDescription:T,getChartTitle:k,unhideChartElementFromAT:w}=f,{format:E}=m,{doc:A}=y,{addClass:M,getElement:S,getHeadingTagNameForElement:N,stripHTMLTagsFromString:Y,visuallyHideElement:Z}=g,{attr:K,pick:B,replaceNested:F}=b;function O(R){return F(R,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends a{constructor(){super(...arguments),this.screenReaderSections={}}init(){let R=this.chart,L=this;this.initRegionsDefinitions(),this.addEvent(R,"aftergetTableAST",function(G){L.onDataTableCreated(G)}),this.addEvent(R,"afterViewData",function(G){G.wasHidden&&(L.dataTableDiv=G.element,setTimeout(function(){L.focusDataTable()},300))}),this.addEvent(R,"afterHideData",function(){L.viewDataTableButton&&L.viewDataTableButton.setAttribute("aria-expanded","false")}),R.exporting&&this.addEvent(R,"afterPrint",function(){L.updateAllScreenReaderSections()}),this.announcer=new c(R,"assertive")}initRegionsDefinitions(){let R=this,L=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let V=L.screenReaderSection.beforeChartFormatter;return V?V(G):R.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,V){V.renderTo.insertBefore(G,V.renderTo.firstChild)},afterInserted:function(){R.sonifyButtonId!==void 0&&R.initSonifyButton(R.sonifyButtonId),R.dataTableButtonId!==void 0&&R.initDataTableButton(R.dataTableButtonId)}},after:{element:null,buildContent:function(G){let V=L.screenReaderSection.afterChartFormatter;return V?V(G):R.defaultAfterChartFormatter()},insertIntoDOM:function(G,V){V.renderTo.insertBefore(G,V.container.nextSibling)},afterInserted:function(){R.chart.accessibility&&L.keyboardNavigation.enabled&&R.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let R=this;Object.keys(this.screenReaderSections).forEach(function(L){R.updateScreenReaderSection(L)})}getLinkedDescriptionElement(){let R=this.chart.options.accessibility.linkedDescription;if(!R)return;if(typeof R!="string")return R;let L=E(R,this.chart),G=A.querySelectorAll(L);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let R=this.linkedDescriptionElement;R&&(R.setAttribute("aria-hidden","true"),M(R,"highcharts-linked-description"))}updateScreenReaderSection(R){let L=this.chart,G=this.screenReaderSections[R],V=G.buildContent(L),$=G.element=G.element||this.createElement("div"),q=$.firstChild||this.createElement("div");V?(this.setScreenReaderSectionAttribs($,R),h.setElementHTML(q,V),$.appendChild(q),G.insertIntoDOM($,L),L.styledMode?M(q,"highcharts-visually-hidden"):Z(q),w(L,q),G.afterInserted&&G.afterInserted()):($.parentNode&&$.parentNode.removeChild($),G.element=null)}setScreenReaderSectionAttribs(R,L){let G=this.chart,V=G.langFormat("accessibility.screenReaderSection."+L+"RegionLabel",{chart:G,chartTitle:k(G)});K(R,{id:`highcharts-screen-reader-region-${L}-${G.index}`,"aria-label":V||void 0}),R.style.position="relative",V&&R.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.beforeChartFormat;if(!L)return"";let G=this.getAxesDescription(),V=R.sonify&&R.options.sonification&&R.options.sonification.enabled,$="highcharts-a11y-sonify-data-btn-"+R.index,q="hc-linkto-highcharts-data-table-"+R.index,W=v(R),se=R.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:R}),fe={headingTagName:N(R.renderTo),chartTitle:k(R),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:V?this.getSonifyButtonText($):"",viewTableButton:R.getCSV?this.getDataTableButtonText(q):"",annotationsTitle:W?se:"",annotationsList:W},re=n.i18nFormat(L,fe,R);return this.dataTableButtonId=q,this.sonifyButtonId=$,O(re)}defaultAfterChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.afterChartFormat;if(!L)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return O(n.i18nFormat(L,G,R))}getLinkedDescription(){let R=this.linkedDescriptionElement;return Y(R&&R.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let R=this.chart.options,L=R.caption,G=L&&L.text,V=this.getLinkedDescription();return R.accessibility.description||V||G||""}getTypeDescriptionText(){let R=this.chart;return R.types?R.options.accessibility.typeDescription||function(L,G){let V=G[0],$=L.series&&L.series[0]||{},q=L.mapView&&L.mapView.geoMap&&L.mapView.geoMap.title,W={numSeries:L.series.length,numPoints:$.points&&$.points.length,chart:L,mapTitle:q};return V?V==="map"||V==="tiledwebmap"?W.mapTitle?L.langFormat("accessibility.chartTypes.mapTypeDescription",W):L.langFormat("accessibility.chartTypes.unknownMap",W):L.types.length>1?L.langFormat("accessibility.chartTypes.combinationChart",W):function(se,fe,re){let le=fe[0],Se=se.langFormat("accessibility.seriesTypeDescriptions."+le,re),ye=se.series&&se.series.length<2?"Single":"Multiple";return(se.langFormat("accessibility.chartTypes."+le+ye,re)||se.langFormat("accessibility.chartTypes.default"+ye,re))+(Se?" "+Se:"")}(L,G,W):L.langFormat("accessibility.chartTypes.emptyChart",W)}(R,R.types):""}getDataTableButtonText(R){let L=this.chart;return'<button id="'+R+'">'+L.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSonifyButtonText(R){let L=this.chart;return L.options.sonification&&L.options.sonification.enabled===!1?"":'<button id="'+R+'">'+L.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSubtitleText(){let R=this.chart.options.subtitle;return Y(R&&R.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let R=S(`highcharts-end-of-chart-marker-${this.chart.index}`);if(R)return R.outerHTML;let L=this.chart,G=L.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:L});return'<div id="highcharts-end-of-chart-marker-'+L.index+'">'+G+"</div>"}onDataTableCreated(R){let L=this.chart;if(L.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=R.tree.attributes||{};G.tabindex=-1,G.summary=L.langFormat("accessibility.table.tableSummary",{chart:L}),R.tree.attributes=G}}focusDataTable(){let R=this.dataTableDiv,L=R&&R.getElementsByTagName("table")[0];L&&L.focus&&L.focus()}initSonifyButton(R){let L=this.sonifyButton=S(R),G=this.chart,V=$=>{L&&(L.setAttribute("aria-hidden","true"),L.setAttribute("aria-label","")),$.preventDefault(),$.stopPropagation();let q=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(q),setTimeout(()=>{L&&(L.removeAttribute("aria-hidden"),L.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};L&&G&&(L.setAttribute("tabindex",-1),L.onclick=function($){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||V).call(this,$,G)})}initDataTableButton(R){let L=this.viewDataTableButton=S(R),G=this.chart,V=R.replace("hc-linkto-","");L&&(K(L,{tabindex:-1,"aria-expanded":!!S(V)}),L.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let R=this.chart,L=function(se,fe){let re=R[se];return re.length>1||re[0]&&B(re[0].options.accessibility&&re[0].options.accessibility.enabled,fe)},G=!!R.types&&0>R.types.indexOf("map")&&0>R.types.indexOf("treemap")&&0>R.types.indexOf("tilemap"),V=!!R.hasCartesianSeries,$=L("xAxis",!R.angular&&V&&G),q=L("yAxis",V&&G),W={};return $&&(W.xAxis=this.getAxisDescriptionText("xAxis")),q&&(W.yAxis=this.getAxisDescriptionText("yAxis")),W}getAxisDescriptionText(R){let L=this.chart,G=L[R];return L.langFormat("accessibility.axis."+R+"Description"+(G.length>1?"Plural":"Singular"),{chart:L,names:G.map(function(V){return _(V)}),ranges:G.map(function(V){return T(V)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),r(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{attr:f}=n,{getChartTitle:m,unhideChartElementFromAT:y}=s,{getFakeMouseEvent:g}=h;function b(_){return _.exportSVGElements&&_.exportSVGElements[0]}class v extends a{init(){let T=this.chart,k=this;this.addEvent(T,"exportMenuShown",function(){k.onMenuShown()}),this.addEvent(T,"exportMenuHidden",function(){k.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let T=this.chart.exportContextMenu;T&&T.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let T=this.chart,k=T.exportContextMenu;k&&(this.addAccessibleContextMenuAttribs(),y(T,k)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(T){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",T)}onChartRender(){let T=this.chart,k=T.focusElement,w=T.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&k&&k===T.exportingGroup&&(k.focusBorder?T.setFocusToElement(k,this.exportButtonProxy.innerElement):w&&w.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let T=this.chart,k=this.proxyProvider,w=b(T);(function(E){let A=E.options.exporting,M=b(E);return!!(A&&A.enabled!==!1&&A.accessibility&&A.accessibility.enabled&&M&&M.element)})(T)&&w&&(this.exportButtonProxy=k.addProxyElement("chartMenu",{click:w},"button",{"aria-label":T.langFormat("accessibility.exporting.menuButtonLabel",{chart:T,chartTitle:m(T)}),"aria-expanded":!1,title:T.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let T=this.chart,k=T.exportDivElements;if(k&&k.length){k.forEach(E=>{E&&(E.tagName!=="LI"||E.children&&E.children.length?E.setAttribute("aria-hidden","true"):E.setAttribute("tabindex",-1))});let w=k[0]&&k[0].parentNode;w&&f(w,{"aria-hidden":void 0,"aria-label":T.langFormat("accessibility.exporting.chartMenuLabel",{chart:T}),role:"list"})}}getKeyboardNavigation(){let T=this.keyCodes,k=this.chart,w=this;return new c(k,{keyCodeMap:[[[T.left,T.up],function(){return w.onKbdPrevious(this)}],[[T.right,T.down],function(){return w.onKbdNext(this)}],[[T.enter,T.space],function(){return w.onKbdClick(this)}]],validate:function(){return!!k.exporting&&k.options.exporting.enabled!==!1&&k.options.exporting.accessibility.enabled!==!1},init:function(){let E=w.exportButtonProxy,A=w.chart.exportingGroup;E&&A&&k.setFocusToElement(A,E.innerElement)},terminate:function(){k.hideExportMenu()}})}onKbdPrevious(T){let k=this.chart,w=k.options.accessibility,E=T.response,A=k.highlightedExportItemIx||0;for(;A--;)if(k.highlightExportItem(A))return E.success;return w.keyboardNavigation.wrapAround?(k.highlightLastExportItem(),E.success):E.prev}onKbdNext(T){let k=this.chart,w=k.options.accessibility,E=T.response;for(let A=(k.highlightedExportItemIx||0)+1;A<k.exportDivElements.length;++A)if(k.highlightExportItem(A))return E.success;return w.keyboardNavigation.wrapAround?(k.highlightExportItem(0),E.success):E.next}onKbdClick(T){let k=this.chart,w=k.exportDivElements[k.highlightedExportItemIx],E=b(k).element;return k.openMenu?this.fakeClickEvent(w):(this.fakeClickEvent(E),k.highlightExportItem(0)),T.response.success}}return function(_){function T(){let A=b(this);if(A){let M=A.element;M.onclick&&M.onclick(g("click"))}}function k(){let A=this.exportDivElements;A&&this.exportContextMenu&&this.openMenu&&(A.forEach(M=>{M&&M.className==="highcharts-menu-item"&&M.onmouseout&&M.onmouseout(g("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function w(A){let M=this.exportDivElements&&this.exportDivElements[A],S=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(M&&M.tagName==="LI"&&!(M.children&&M.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return M.focus&&N&&M.focus(),S&&S.onmouseout&&S.onmouseout(g("mouseout")),M.onmouseover&&M.onmouseover(g("mouseover")),this.highlightedExportItemIx=A,!0}return!1}function E(){if(this.exportDivElements){let A=this.exportDivElements.length;for(;A--;)if(this.highlightExportItem(A))return!0}return!1}_.compose=function(A){let M=A.prototype;M.hideExportMenu||(M.hideExportMenu=k,M.highlightExportItem=w,M.highlightLastExportItem=E,M.showExportMenu=T)}}(v||(v={})),v}),r(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{doc:f,win:m}=n,{addEvent:y,defined:g,fireEvent:b}=c,{getElement:v,simulatedEventTarget:_}=h;class T{constructor(w,E){this.currentModuleIx=NaN,this.modules=[],this.init(w,E)}init(w,E){let A=this.eventProvider=new s;this.chart=w,this.components=E,this.modules=[],this.currentModuleIx=0,this.update(),A.addEvent(this.tabindexContainer,"keydown",M=>this.onKeydown(M)),A.addEvent(this.tabindexContainer,"focus",M=>this.onFocus(M)),["mouseup","touchend"].forEach(M=>A.addEvent(f,M,S=>this.onMouseUp(S))),["mousedown","touchstart"].forEach(M=>A.addEvent(w.renderTo,M,()=>{this.isClickingChart=!0}))}update(w){let E=this.chart.options.accessibility,A=E&&E.keyboardNavigation,M=this.components;this.updateContainerTabindex(),A&&A.enabled&&w&&w.length?(this.modules=w.reduce(function(S,N){let Y=M[N].getKeyboardNavigation();return S.concat(Y)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let w=v(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),w?(this.makeElementAnExitAnchor(w),this.exitAnchor=w):this.createExitAnchor()}move(w){let E=this.modules&&this.modules[this.currentModuleIx];E&&E.terminate&&E.terminate(w),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=w;let A=this.modules&&this.modules[this.currentModuleIx];if(A){if(A.validate&&!A.validate())return this.move(w);if(A.init)return A.init(w),!0}return this.currentModuleIx=0,this.exiting=!0,w>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(w){let E=this.chart,A=w.relatedTarget&&E.container.contains(w.relatedTarget),M=E.options.accessibility,S=M&&M.keyboardNavigation;if(S&&S.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!A){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(w){if(delete this.isClickingChart,!this.keyboardReset&&w.relatedTarget!==_){let E=this.chart;if(!w.target||!E.container.contains(w.target)){let A=this.modules&&this.modules[this.currentModuleIx||0];A&&A.terminate&&A.terminate(),this.currentModuleIx=0}E.focusElement&&(E.focusElement.removeFocusBorder(),delete E.focusElement),this.keyboardReset=!0}}onKeydown(w){let E,A=w||m.event,M=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],S=A.target;if((!S||S.nodeName!=="INPUT"||S.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,M)){let N=M.run(A);N===M.response.success?E=!0:N===M.response.prev?E=this.move(-1):N===M.response.next&&(E=this.move(1)),E&&(A.preventDefault(),A.stopPropagation())}}updateContainerTabindex(){let w,E=this.chart.options.accessibility,A=E&&E.keyboardNavigation,M=!(A&&A.enabled===!1),S=this.chart,N=S.container;S.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),w=S.renderTo):w=N,this.tabindexContainer=w;let Y=w.getAttribute("tabindex");M&&!Y?w.setAttribute("tabindex","0"):M||S.container.removeAttribute("tabindex")}createExitAnchor(){let w=this.chart,E=this.exitAnchor=f.createElement("div");w.renderTo.appendChild(E),this.makeElementAnExitAnchor(E)}makeElementAnExitAnchor(w){let E=this.tabindexContainer.getAttribute("tabindex")||0;w.setAttribute("class","highcharts-exit-anchor"),w.setAttribute("tabindex",E),w.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(w)}removeExitAnchor(){if(this.exitAnchor){let w=this.eventProvider.eventRemovers.find(E=>E.element===this.exitAnchor);w&&g(w.remover)&&this.eventProvider.removeEvent(w.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(w){let E=this.chart,A=this;this.eventProvider.addEvent(w,"focus",function(M){let S=M||m.event,N=!(S.relatedTarget&&E.container.contains(S.relatedTarget)||A.exiting);if(E.focusElement&&delete E.focusElement,N){if(A.tabbingInBackwards=!0,A.tabindexContainer.focus(),delete A.tabbingInBackwards,S.preventDefault(),A.modules&&A.modules.length){A.currentModuleIx=A.modules.length-1;let Y=A.modules[A.currentModuleIx];Y&&Y.validate&&!Y.validate()?A.move(-1):Y&&Y.init(-1)}}else A.exiting=!1})}getFirstValidModuleIx(){let w=this.modules.length;for(let E=0;E<w;++E){let A=this.modules[E];if(!A.validate||A.validate())return E}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(k){function w(){let A=this;b(this,"dismissPopupContent",{},function(){A.tooltip&&A.tooltip.hide(0),A.hideExportMenu()})}function E(A){(A.which||A.keyCode)===27&&n.charts&&n.charts.forEach(M=>{M&&M.dismissPopupContent&&M.dismissPopupContent()})}k.compose=function(A){a.compose(A);let M=A.prototype;return M.dismissPopupContent||(M.dismissPopupContent=w,y(f,"keydown",E)),A}}(T||(T={})),T}),r(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h,f,m,y){let{animObject:g}=n,{doc:b}=a,{addEvent:v,fireEvent:_,isNumber:T,pick:k,syncTimeout:w}=s,{getChartTitle:E}=m,{stripHTMLTagsFromString:A,addClass:M,removeClass:S}=y;function N(K){let B=K.legend&&K.legend.allItems,F=K.options.legend.accessibility||{},O=K.colorAxis&&K.colorAxis.some(R=>!R.dataClasses||!R.dataClasses.length);return!!(B&&B.length&&!O&&F.enabled!==!1)}function Y(K,B){let F=B.legendItem||{};for(let O of(B.setState(K?"hover":"",!0),["group","label","symbol"])){let R=F[O],L=R&&R.element||R;L&&_(L,K?"mouseover":"mouseout")}}class Z extends h{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let B=this;this.recreateProxies(),this.addEvent(c,"afterScroll",function(){this.chart===B.chart&&(B.proxyProvider.updateGroupProxyElementPositions("legend"),B.updateLegendItemProxyVisibility(),B.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(B.highlightedLegendItemIx))}),this.addEvent(c,"afterPositionItem",function(F){this.chart===B.chart&&this.chart.renderer&&B.updateProxyPositionForItem(F.item)}),this.addEvent(c,"afterRender",function(){this.chart===B.chart&&this.chart.renderer&&B.recreateProxies()&&w(()=>B.proxyProvider.updateGroupProxyElementPositions("legend"),g(k(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let B,F=this.chart,O=F.legend,R=O.allItems||[],L=O.currentPage||1,G=O.clipHeight||0;R.forEach(V=>{if(V.a11yProxyElement){let $=O.pages&&O.pages.length,q=V.a11yProxyElement.element,W=!1;if(B=V.legendItem||{},$){let se=B.pageIx||0;W=(B.y||0)+(B.label?Math.round(B.label.getBBox().height):0)-O.pages[se]>G||se!==L-1}W?F.styledMode?M(q,"highcharts-a11y-invisible"):q.style.visibility="hidden":(S(q,"highcharts-a11y-invisible"),q.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(B){let F=this.chart,O=F.legend,R=(O.currentPage||1)+B,L=O.pages||[];if(R>0&&R<=L.length){let G=0;for(let V of O.allItems)((V.legendItem||{}).pageIx||0)+1===R&&F.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(B){B.a11yProxyElement&&B.a11yProxyElement.refreshPosition()}recreateProxies(){let B=b.activeElement,F=this.proxyGroup,O=B&&F&&F.contains(B);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),O&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let B=this.chart,F=A((B.legend&&B.legend.options.title&&B.legend.options.title.text||"").replace(/<br ?\/?>/g," "),B.renderer.forExport),O=B.langFormat("accessibility.legend.legendLabel"+(F?"":"NoTitle"),{chart:B,legendTitle:F,chartTitle:E(B)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":O})}addLegendProxyGroup(){let B=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:B})}proxyLegendItems(){let B,F=this;((this.chart.legend||{}).allItems||[]).forEach(O=>{(B=O.legendItem||{}).label&&B.label.element&&F.proxyLegendItem(O)})}proxyLegendItem(B){let F=B.legendItem||{};if(!F.label||!F.group)return;let O=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:A(B.name,this.chart.renderer.forExport),item:B}),R={tabindex:-1,"aria-pressed":B.visible,"aria-label":O},L=F.group.div?F.label:F.group;B.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:F.label,visual:L.element},"button",R)}getKeyboardNavigation(){let B=this.keyCodes,F=this,O=this.chart;return new f(O,{keyCodeMap:[[[B.left,B.right,B.up,B.down],function(R){return F.onKbdArrowKey(this,R)}],[[B.enter,B.space],function(){return F.onKbdClick(this)}],[[B.pageDown,B.pageUp],function(R){let L=R===B.pageDown?1:-1;return F.highlightAdjacentLegendPage(L),this.response.success}]],validate:function(){return F.shouldHaveLegendNavigation()},init:function(){O.highlightLegendItem(0),F.highlightedLegendItemIx=0},terminate:function(){F.highlightedLegendItemIx=-1,O.legend.allItems.forEach(R=>Y(!1,R))}})}onKbdArrowKey(B,F){let{keyCodes:{left:O,up:R},highlightedLegendItemIx:L,chart:G}=this,V=G.legend.allItems.length,$=G.options.accessibility.keyboardNavigation.wrapAround,q=F===O||F===R?-1:1;return G.highlightLegendItem(L+q)?this.highlightedLegendItemIx+=q:$&&V>1&&(this.highlightedLegendItemIx=q>0?0:V-1,G.highlightLegendItem(this.highlightedLegendItemIx)),B.response.success}onKbdClick(B){let F=this.chart.legend.allItems[this.highlightedLegendItemIx];return F&&F.a11yProxyElement&&F.a11yProxyElement.click(),B.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let B=this.chart,F=(B.options.legend||{}).accessibility||{};return!!(B.legend.display&&F.keyboardNavigation&&F.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(K){function B(O){let R=this.legend.allItems,L=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=R[O],V=(G==null?void 0:G.legendItem)||{};if(G){T(L)&&R[L]&&Y(!1,R[L]),function(W,se){let fe=(W.allItems[se].legendItem||{}).pageIx,re=W.currentPage;fe!==void 0&&fe+1!==re&&W.scroll(1+fe-re)}(this.legend,O);let $=V.label,q=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return $&&$.element&&q&&this.setFocusToElement($,q),Y(!0,G),!0}return!1}function F(O){let R=this.chart.options.accessibility,L=O.item;R.enabled&&L&&L.a11yProxyElement&&L.a11yProxyElement.innerElement.setAttribute("aria-pressed",O.visible?"true":"false")}K.compose=function(O,R){let L=O.prototype;L.highlightLegendItem||(L.highlightLegendItem=B,v(R,"afterColorizeItem",F))}}(Z||(Z={})),Z}),r(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let c,{isTouchDevice:s}=n,{addEvent:h,merge:f,pick:m}=a,y=[];function g(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function b(){var Y;let E,A,M,S=this.legend,N=this.navigator;if(N){E=S&&S.options,A=N.xAxis,M=N.yAxis;let{scrollbarHeight:Z,scrollButtonSize:K}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Z-N.height:this.spacing[3]+Z,N.top=this.plotTop+K):(N.left=m(A.left,this.plotLeft+K),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Z-(((Y=this.scrollbar)==null?void 0:Y.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(E&&E.verticalAlign==="bottom"&&E.layout!=="proximate"&&E.enabled&&!E.floating?S.legendHeight+m(E.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),A&&M&&(this.inverted?A.options.left=M.options.left=N.left:A.options.top=M.options.top=N.top,A.setAxisSize(),M.setAxisSize())}}function v(E){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new c(this),m(E.redraw,!0)&&this.redraw(E.animation))}function _(){let E=this.options;(E.navigator.enabled||E.scrollbar.enabled)&&(this.scroller=this.navigator=new c(this))}function T(){let E=this.options,A=E.navigator,M=E.rangeSelector;if((A&&A.enabled||M&&M.enabled)&&(!s&&this.zooming.type==="x"||s&&this.zooming.pinchType==="x"))return!1}function k(E){let A=E.navigator;if(A&&E.xAxis[0]){let M=E.xAxis[0].getExtremes();A.render(M.min,M.max)}}function w(E){let A=E.options.navigator||{},M=E.options.scrollbar||{};!this.navigator&&!this.scroller&&(A.enabled||M.enabled)&&(f(!0,this.options.navigator,A),f(!0,this.options.scrollbar,M),delete E.options.navigator,delete E.options.scrollbar)}return{compose:function(E,A){if(a.pushUnique(y,E)){let M=E.prototype;c=A,M.callbacks.push(k),h(E,"afterAddSeries",g),h(E,"afterSetChartSize",b),h(E,"afterUpdate",v),h(E,"beforeRender",_),h(E,"beforeShowResetZoom",T),h(E,"update",w)}}}}),r(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{isTouchDevice:c}=n,{addEvent:s,correctFloat:h,defined:f,isNumber:m,pick:y}=a;function g(){this.navigatorAxis||(this.navigatorAxis=new v(this))}function b(_){let T,k=this.chart,w=k.options,E=w.navigator,A=this.navigatorAxis,M=k.zooming.pinchType,S=w.rangeSelector,N=k.zooming.type;if(this.isXAxis&&(E!=null&&E.enabled||S!=null&&S.enabled)){if(N==="y"&&_.trigger==="zoom")T=!1;else if((_.trigger==="zoom"&&N==="xy"||c&&M==="xy")&&this.options.range){let Y=A.previousZoom;f(_.min)?A.previousZoom=[this.min,this.max]:Y&&(_.min=Y[0],_.max=Y[1],A.previousZoom=void 0)}}T!==void 0&&_.preventDefault()}class v{static compose(T){T.keepProps.includes("navigatorAxis")||(T.keepProps.push("navigatorAxis"),s(T,"init",g),s(T,"setExtremes",b))}constructor(T){this.axis=T}destroy(){this.axis=void 0}toFixedRange(T,k,w,E){let A=this.axis,M=(A.pointRange||0)/2,S=y(w,A.translate(T,!0,!A.horiz)),N=y(E,A.translate(k,!0,!A.horiz));return f(w)||(S=h(S+M)),f(E)||(N=h(N-M)),m(S)&&m(N)||(S=N=void 0),{min:S,max:N}}}return v}),r(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(n,a){let{parse:c}=n,{seriesTypes:s}=a;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:c("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:s.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),r(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(n,a){let{relativeLength:c}=a;return{"navigator-handle":function(s,h,f,m,y={}){let g=y.width?y.width/2:f,b=c(y.borderRadius||0,Math.min(2*g,m));return[["M",-1.5,(m=y.height||m)/2-3.5],["L",-1.5,m/2+4.5],["M",.5,m/2-3.5],["L",.5,m/2+4.5],...n.rect(-g-1,.5,2*g+1,m,{r:b})]}}}),r(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(n){let{defined:a}=n;return{setFixedRange:function(c){let s=this.xAxis[0];a(s.dataMax)&&a(s.dataMin)&&c?this.fixedRange=Math.min(c,s.dataMax-s.dataMin):this.fixedRange=c}}}),r(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y){let{setOptions:g}=n,{composed:b}=a,{getRendererType:v}=f,{setFixedRange:_}=m,{addEvent:T,extend:k,pushUnique:w}=y;function E(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(A,M,S){c.compose(M),w(b,"Navigator")&&(A.prototype.setFixedRange=_,k(v().prototype.symbols,h),T(S,"afterUpdate",E),g({navigator:s}))}}}),r(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){var c;let{composed:s}=n,{addEvent:h,defined:f,pick:m,pushUnique:y}=a;return function(g){let b;function v(w){let E=m(w.options&&w.options.min,w.min),A=m(w.options&&w.options.max,w.max);return{axisMin:E,axisMax:A,scrollMin:f(w.dataMin)?Math.min(E,w.min,w.dataMin,m(w.threshold,1/0)):E,scrollMax:f(w.dataMax)?Math.max(A,w.max,w.dataMax,m(w.threshold,-1/0)):A}}function _(){let w=this.scrollbar,E=w&&!w.options.opposite,A=this.horiz?2:E?3:1;w&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[A]+=w.size+(w.options.margin||0))}function T(){let w=this;w.options&&w.options.scrollbar&&w.options.scrollbar.enabled&&(w.options.scrollbar.vertical=!w.horiz,w.options.startOnTick=w.options.endOnTick=!1,w.scrollbar=new b(w.chart.renderer,w.options.scrollbar,w.chart),h(w.scrollbar,"changed",function(E){let A,M,{axisMin:S,axisMax:N,scrollMin:Y,scrollMax:Z}=v(w),K=Z-Y;if(f(S)&&f(N))if(w.horiz&&!w.reversed||!w.horiz&&w.reversed?(A=Y+K*this.to,M=Y+K*this.from):(A=Y+K*(1-this.from),M=Y+K*(1-this.to)),this.shouldUpdateExtremes(E.DOMType)){let B=E.DOMType!=="mousemove"&&E.DOMType!=="touchmove"&&void 0;w.setExtremes(M,A,!0,B,E)}else this.setRange(this.from,this.to)}))}function k(){let w,E,A,{scrollMin:M,scrollMax:S}=v(this),N=this.scrollbar,Y=this.axisTitleMargin+(this.titleOffset||0),Z=this.chart.scrollbarsOffsets,K=this.options.margin||0;if(N&&Z){if(this.horiz)this.opposite||(Z[1]+=Y),N.position(this.left,this.top+this.height+2+Z[1]-(this.opposite?K:0),this.width,this.height),this.opposite||(Z[1]+=K),w=1;else{let B;this.opposite&&(Z[0]+=Y),B=N.options.opposite?this.left+this.width+2+Z[0]-(this.opposite?0:K):this.opposite?0:K,N.position(B,this.top,this.width,this.height),this.opposite&&(Z[0]+=K),w=0}if(Z[w]+=N.size+(N.options.margin||0),isNaN(M)||isNaN(S)||!f(this.min)||!f(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let B=this.pointRange/(this.dataMax+1);E=B*this.min,A=B*(this.max+1),N.setRange(E,A)}else E=(this.min-M)/(S-M),A=(this.max-M)/(S-M),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(E,A):N.setRange(1-A,1-E)}}g.compose=function(w,E){y(s,"Axis.Scrollbar")&&(b=E,h(w,"afterGetOffset",_),h(w,"afterInit",T),h(w,"afterRender",k))}}(c||(c={})),c}),r(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),r(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{defaultOptions:f}=n,{addEvent:m,correctFloat:y,crisp:g,defined:b,destroyObjectProperties:v,fireEvent:_,merge:T,pick:k,removeEvent:w}=h;class E{static compose(M){c.compose(M,E)}static swapXY(M,S){return S&&M.forEach(N=>{let Y,Z=N.length;for(let K=0;K<Z;K+=2)typeof(Y=N[K+1])=="number"&&(N[K+1]=N[K+2],N[K+2]=Y)}),M}constructor(M,S,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(M,S,N)}addEvents(){let M=this.options.inverted?[1,0]:[0,1],S=this.scrollbarButtons,N=this.scrollbarGroup.element,Y=this.track.element,Z=this.mouseDownHandler.bind(this),K=this.mouseMoveHandler.bind(this),B=this.mouseUpHandler.bind(this),F=[[S[M[0]].element,"click",this.buttonToMinClick.bind(this)],[S[M[1]].element,"click",this.buttonToMaxClick.bind(this)],[Y,"click",this.trackClick.bind(this)],[N,"mousedown",Z],[N.ownerDocument,"mousemove",K],[N.ownerDocument,"mouseup",B],[N,"touchstart",Z],[N.ownerDocument,"touchmove",K],[N.ownerDocument,"touchend",B]];F.forEach(function(O){m.apply(null,O)}),this._events=F}buttonToMaxClick(M){let S=(this.to-this.from)*k(this.options.step,.2);this.updatePosition(this.from+S,this.to+S),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}buttonToMinClick(M){let S=y(this.to-this.from)*k(this.options.step,.2);this.updatePosition(y(this.from-S),y(this.to-S)),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}cursorToScrollbarPosition(M){let S=this.options,N=S.minWidth>this.calculatedWidth?S.minWidth:0;return{chartX:(M.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(M.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let M=this,S=M.chart.scroller;M.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){M[N]&&M[N].destroy&&(M[N]=M[N].destroy())}),S&&M===S.scrollbar&&(S.scrollbar=null,v(S.scrollbarButtons))}drawScrollbarButton(M){let S=this.renderer,N=this.scrollbarButtons,Y=this.options,Z=this.size,K=S.g().add(this.group);if(N.push(K),Y.buttonsEnabled){let B=S.rect().addClass("highcharts-scrollbar-button").add(K);this.chart.styledMode||B.attr({stroke:Y.buttonBorderColor,"stroke-width":Y.buttonBorderWidth,fill:Y.buttonBackgroundColor}),B.attr(B.crisp({x:-.5,y:-.5,width:Z,height:Z,r:Y.buttonBorderRadius},B.strokeWidth()));let F=S.path(E.swapXY([["M",Z/2+(M?-1:1),Z/2-3],["L",Z/2+(M?-1:1),Z/2+3],["L",Z/2+(M?2:-2),Z/2]],Y.vertical)).addClass("highcharts-scrollbar-arrow").add(N[M]);this.chart.styledMode||F.attr({fill:Y.buttonArrowColor})}}init(M,S,N){this.scrollbarButtons=[],this.renderer=M,this.userOptions=S,this.options=T(s,f.scrollbar,S),this.options.margin=k(this.options.margin,10),this.chart=N,this.size=k(this.options.size,this.options.height),S.enabled&&(this.render(),this.addEvents())}mouseDownHandler(M){var Y;let S=((Y=this.chart.pointer)==null?void 0:Y.normalize(M))||M,N=this.cursorToScrollbarPosition(S);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(M){var K;let S,N=((K=this.chart.pointer)==null?void 0:K.normalize(M))||M,Y=this.options.vertical?"chartY":"chartX",Z=this.initPositions||[];this.grabbedCenter&&(!M.touches||M.touches[0][Y]!==0)&&(S=this.cursorToScrollbarPosition(N)[Y]-this[Y],this.hasDragged=!0,this.updatePosition(Z[0]+S,Z[1]+S),this.hasDragged&&_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:M.type,DOMEvent:M}))}mouseUpHandler(M){this.hasDragged&&_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:M.type,DOMEvent:M}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(M,S,N,Y){let{buttonsEnabled:Z,margin:K=0,vertical:B}=this.options,F=this.rendered?"animate":"attr",O=Y,R=0;this.group.show(),this.x=M,this.y=S+this.trackBorderWidth,this.width=N,this.height=Y,this.xOffset=O,this.yOffset=R,B?(this.width=this.yOffset=N=R=this.size,this.xOffset=O=0,this.yOffset=R=Z?this.size:0,this.barWidth=Y-(Z?2*N:0),this.x=M+=K):(this.height=Y=this.size,this.xOffset=O=Z?this.size:0,this.barWidth=N-(Z?2*Y:0),this.y=this.y+K),this.group[F]({translateX:M,translateY:this.y}),this.track[F]({width:N,height:Y}),this.scrollbarButtons[1][F]({translateX:B?0:N-O,translateY:B?Y-R:0})}removeEvents(){this._events.forEach(function(M){w.apply(null,M)}),this._events.length=0}render(){let M=this.renderer,S=this.options,N=this.size,Y=this.chart.styledMode,Z=M.g("scrollbar").attr({zIndex:S.zIndex}).hide().add();this.group=Z,this.track=M.rect().addClass("highcharts-scrollbar-track").attr({r:S.trackBorderRadius||0,height:N,width:N}).add(Z),Y||this.track.attr({fill:S.trackBackgroundColor,stroke:S.trackBorderColor,"stroke-width":S.trackBorderWidth});let K=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-g(0,K),y:-g(0,K)}),this.scrollbarGroup=M.g().add(Z),this.scrollbar=M.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-K,width:N-K,r:S.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=M.path(E.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],S.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),Y||(this.scrollbar.attr({fill:S.barBackgroundColor,stroke:S.barBorderColor,"stroke-width":S.barBorderWidth}),this.scrollbarRifles.attr({stroke:S.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-g(0,this.scrollbarStrokeWidth),-g(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(M,S){let N,Y,Z=this.options,K=Z.vertical,B=Z.minWidth,F=this.barWidth,O=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!b(F))return;let R=F*Math.min(S,1);N=Math.ceil(F*(M=Math.max(M,0))),this.calculatedWidth=Y=y(R-N),Y<B&&(N=(F-B+Y)*M,Y=B);let L=Math.floor(N+this.xOffset+this.yOffset),G=Y/2-.5;this.from=M,this.to=S,K?(this.scrollbarGroup[O]({translateY:L}),this.scrollbar[O]({height:Y}),this.scrollbarRifles[O]({translateY:G}),this.scrollbarTop=L,this.scrollbarLeft=0):(this.scrollbarGroup[O]({translateX:L}),this.scrollbar[O]({width:Y}),this.scrollbarRifles[O]({translateX:G}),this.scrollbarLeft=L,this.scrollbarTop=0),Y<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Z.showFull===!1&&(M<=0&&S>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(M){return k(this.options.liveRedraw,a.svg&&!a.isTouchDevice&&!this.chart.boosted)||M==="mouseup"||M==="touchend"||!b(M)}trackClick(M){var K;let S=((K=this.chart.pointer)==null?void 0:K.normalize(M))||M,N=this.to-this.from,Y=this.y+this.scrollbarTop,Z=this.x+this.scrollbarLeft;this.options.vertical&&S.chartY>Y||!this.options.vertical&&S.chartX>Z?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}update(M){this.destroy(),this.init(this.chart.renderer,T(!0,this.options,M),this.chart)}updatePosition(M,S){S>1&&(M=y(1-y(S-M)),S=1),M<0&&(S=y(S-M),M=0),this.from=M,this.to=S}}return E.defaultOptions=s,f.scrollbar=T(!0,E.defaultOptions,f.scrollbar),E}),r(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g){let{defaultOptions:b}=c,{isTouchDevice:v}=s,{prototype:{symbols:_}}=y,{addEvent:T,clamp:k,correctFloat:w,defined:E,destroyObjectProperties:A,erase:M,extend:S,find:N,fireEvent:Y,isArray:Z,isNumber:K,merge:B,pick:F,removeEvent:O,splat:R}=g;function L(V,...$){let q=[].filter.call($,K);if(q.length)return Math[V].apply(0,q)}class G{static compose($,q,W){a.compose($,G),f.compose($,q,W)}constructor($){this.isDirty=!1,this.scrollbarHeight=0,this.init($)}drawHandle($,q,W,se){let fe=this.navigatorOptions.handles.height;this.handles[q][se](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt($,10)+.5-fe)}:{translateX:Math.round(this.left+parseInt($,10)),translateY:Math.round(this.top+this.height/2-fe/2-1)})}drawOutline($,q,W,se){let fe=this.navigatorOptions.maskInside,re=this.outline.strokeWidth(),le=re/2,Se=re%2/2,ye=this.scrollButtonSize,Ee=this.size,J=this.top,ie=this.height,oe=J-le,we=J+ie,ee=this.left,ae,ue;W?(ae=J+q+Se,q=J+$+Se,ue=[["M",ee+ie,J-ye-Se],["L",ee+ie,ae],["L",ee,ae],["M",ee,q],["L",ee+ie,q],["L",ee+ie,J+Ee+ye]],fe&&ue.push(["M",ee+ie,ae-le],["L",ee+ie,q+le])):(ee-=ye,$+=ee+ye-Se,q+=ee+ye-Se,ue=[["M",ee,oe],["L",$,oe],["L",$,we],["M",q,we],["L",q,oe],["L",ee+Ee+2*ye,oe]],fe&&ue.push(["M",$-le,oe],["L",q+le,oe])),this.outline[se]({d:ue})}drawMasks($,q,W,se){let fe,re,le,Se,ye=this.left,Ee=this.top,J=this.height;W?(le=[ye,ye,ye],Se=[Ee,Ee+$,Ee+q],re=[J,J,J],fe=[$,q-$,this.size-q]):(le=[ye,ye+$,ye+q],Se=[Ee,Ee,Ee],re=[$,q-$,this.size-q],fe=[J,J,J]),this.shades.forEach((ie,oe)=>{ie[se]({x:le[oe],y:Se[oe],width:re[oe],height:fe[oe]})})}renderElements(){var ye;let $=this,q=$.navigatorOptions,W=q.maskInside,se=$.chart,fe=se.inverted,re=se.renderer,le={cursor:fe?"ns-resize":"ew-resize"},Se=$.navigatorGroup??($.navigatorGroup=re.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((Ee,J)=>{let ie=$.shades[J]??($.shades[J]=re.rect().addClass("highcharts-navigator-mask"+(J===1?"-inside":"-outside")).add(Se));se.styledMode||(ie.attr({fill:Ee?q.maskFill:"rgba(0,0,0,0)"}),J===1&&ie.css(le))}),$.outline||($.outline=re.path().addClass("highcharts-navigator-outline").add(Se)),se.styledMode||$.outline.attr({"stroke-width":q.outlineWidth,stroke:q.outlineColor}),(ye=q.handles)==null?void 0:ye.enabled){let Ee=q.handles,{height:J,width:ie}=Ee;[0,1].forEach(oe=>{var ee;let we=Ee.symbols[oe];if($.handles[oe]&&$.handles[oe].symbolUrl===we){if(!$.handles[oe].isImg&&$.handles[oe].symbolName!==we){let ae=_[we].call(_,-ie/2-1,0,ie,J);$.handles[oe].attr({d:ae}),$.handles[oe].symbolName=we}}else(ee=$.handles[oe])==null||ee.destroy(),$.handles[oe]=re.symbol(we,-ie/2-1,0,ie,J,Ee),$.handles[oe].attr({zIndex:7-oe}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][oe]).add(Se),$.addMouseEvents();se.inverted&&$.handles[oe].attr({rotation:90,rotationOriginX:Math.floor(-ie/2),rotationOriginY:(J+ie)/2}),se.styledMode||$.handles[oe].attr({fill:Ee.backgroundColor,stroke:Ee.borderColor,"stroke-width":Ee.lineWidth,width:Ee.width,height:Ee.height,x:-ie/2-1,y:0}).css(le)})}}update($,q=!1){var fe;let W=this.chart,se=W.options.chart.inverted!==((fe=W.scrollbar)==null?void 0:fe.options.vertical);if(B(!0,W.options.navigator,$),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),E($.enabled)||se)return this.destroy(),this.navigatorEnabled=$.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,$.adaptToUpdatedData===!1&&this.baseSeries.forEach(re=>{O(re,"updatedData",this.updatedDataHandler)},this),$.adaptToUpdatedData&&this.baseSeries.forEach(re=>{re.eventsToUnbind.push(T(re,"updatedData",this.updatedDataHandler))},this),($.series||$.baseSeries)&&this.setBaseSeries(void 0,!1),$.height||$.xAxis||$.yAxis)){this.height=$.height??this.height;let re=this.getXAxisOffsets();this.xAxis.update({...$.xAxis,offsets:re,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...$.yAxis,[W.inverted?"width":"height"]:this.height},!1)}q&&W.redraw()}render($,q,W,se){let fe=this.chart,re=this.xAxis,le=re.pointRange||0,Se=re.navigatorAxis.fake?fe.xAxis[0]:re,ye=this.navigatorEnabled,Ee=this.rendered,J=fe.inverted,ie=fe.xAxis[0].minRange,oe=fe.xAxis[0].options.maxRange,we=this.scrollButtonSize,ee,ae,ue,ve=this.scrollbarHeight,Ce,je;if(this.hasDragged&&!E(W))return;if(this.isDirty&&this.renderElements(),$=w($-le/2),q=w(q+le/2),!K($)||!K(q)){if(!Ee)return;W=0,se=F(re.width,Se.width)}this.left=F(re.left,fe.plotLeft+we+(J?fe.plotWidth:0));let Me=this.size=Ce=F(re.len,(J?fe.plotHeight:fe.plotWidth)-2*we);ee=J?ve:Ce+2*we,W=F(W,re.toPixels($,!0)),se=F(se,re.toPixels(q,!0)),K(W)&&Math.abs(W)!==1/0||(W=0,se=ee);let Re=re.toValue(W,!0),me=re.toValue(se,!0),De=Math.abs(w(me-Re));De<ie?this.grabbedLeft?W=re.toPixels(me-ie-le,!0):this.grabbedRight&&(se=re.toPixels(Re+ie+le,!0)):E(oe)&&w(De-le)>oe&&(this.grabbedLeft?W=re.toPixels(me-oe-le,!0):this.grabbedRight&&(se=re.toPixels(Re+oe+le,!0))),this.zoomedMax=k(Math.max(W,se),0,Me),this.zoomedMin=k(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,se),0,Me),this.range=this.zoomedMax-this.zoomedMin,Me=Math.round(this.zoomedMax);let Ue=Math.round(this.zoomedMin);ye&&(this.navigatorGroup.attr({visibility:"inherit"}),je=Ee&&!this.hasDragged?"animate":"attr",this.drawMasks(Ue,Me,J,je),this.drawOutline(Ue,Me,J,je),this.navigatorOptions.handles.enabled&&(this.drawHandle(Ue,0,J,je),this.drawHandle(Me,1,J,je))),this.scrollbar&&(J?(ue=this.top-we,ae=this.left-ve+(ye||!Se.opposite?0:(Se.titleOffset||0)+Se.axisTitleMargin),ve=Ce+2*we):(ue=this.top+(ye?this.height:-ve),ae=this.left-we),this.scrollbar.position(ae,ue,ee,ve),this.scrollbar.setRange(this.zoomedMin/(Ce||1),this.zoomedMax/(Ce||1))),this.rendered=!0,this.isDirty=!1,Y(this,"afterRender")}addMouseEvents(){let $=this,q=$.chart,W=q.container,se=[],fe,re;$.mouseMoveHandler=fe=function(le){$.onMouseMove(le)},$.mouseUpHandler=re=function(le){$.onMouseUp(le)},(se=$.getPartsEvents("mousedown")).push(T(q.renderTo,"mousemove",fe),T(W.ownerDocument,"mouseup",re),T(q.renderTo,"touchmove",fe),T(W.ownerDocument,"touchend",re)),se.concat($.getPartsEvents("touchstart")),$.eventsToUnbind=se,$.series&&$.series[0]&&se.push(T($.series[0].xAxis,"foundExtremes",function(){q.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents($){let q=this,W=[];return["shades","handles"].forEach(function(se){q[se].forEach(function(fe,re){W.push(T(fe.element,$,function(le){q[se+"Mousedown"](le,re)}))})}),W}shadesMousedown($,q){var we;$=((we=this.chart.pointer)==null?void 0:we.normalize($))||$;let W=this.chart,se=this.xAxis,fe=this.zoomedMin,re=this.size,le=this.range,Se=this.left,ye=$.chartX,Ee,J,ie,oe;W.inverted&&(ye=$.chartY,Se=this.top),q===1?(this.grabbedCenter=ye,this.fixedWidth=le,this.dragOffset=ye-fe):(oe=ye-Se-le/2,q===0?oe=Math.max(0,oe):q===2&&oe+le>=re&&(oe=re-le,this.reversedExtremes?(oe-=le,J=this.getUnionExtremes().dataMin):Ee=this.getUnionExtremes().dataMax),oe!==fe&&(this.fixedWidth=le,E((ie=se.navigatorAxis.toFixedRange(oe,oe+le,J,Ee)).min)&&Y(this,"setRange",{min:Math.min(ie.min,ie.max),max:Math.max(ie.min,ie.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown($,q){var re;$=((re=this.chart.pointer)==null?void 0:re.normalize($))||$;let W=this.chart,se=W.xAxis[0],fe=this.reversedExtremes;q===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=fe?se.min:se.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=fe?se.max:se.min),W.setFixedRange(void 0)}onMouseMove($){var Ee;let q=this,W=q.chart,se=q.navigatorSize,fe=q.range,re=q.dragOffset,le=W.inverted,Se=q.left,ye;(!$.touches||$.touches[0].pageX!==0)&&(ye=($=((Ee=W.pointer)==null?void 0:Ee.normalize($))||$).chartX,le&&(Se=q.top,ye=$.chartY),q.grabbedLeft?(q.hasDragged=!0,q.render(0,0,ye-Se,q.otherHandlePos)):q.grabbedRight?(q.hasDragged=!0,q.render(0,0,q.otherHandlePos,ye-Se)):q.grabbedCenter&&(q.hasDragged=!0,ye<re?ye=re:ye>se+re-fe&&(ye=se+re-fe),q.render(0,0,ye-re,ye-re+fe)),q.hasDragged&&q.scrollbar&&F(q.scrollbar.options.liveRedraw,!v&&!this.chart.boosted)&&($.DOMType=$.type,setTimeout(function(){q.onMouseUp($)},0)))}onMouseUp($){let q,W,se,fe,re,le,Se=this.chart,ye=this.xAxis,Ee=this.scrollbar,J=$.DOMEvent||$,ie=Se.inverted,oe=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Ee||!Ee.hasDragged)||$.trigger==="scrollbar")&&(se=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?fe=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(re=this.fixedExtreme),this.zoomedMax===this.size&&(re=this.reversedExtremes?se.dataMin:se.dataMax),this.zoomedMin===0&&(fe=this.reversedExtremes?se.dataMax:se.dataMin),E((le=ye.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,fe,re)).min)&&Y(this,"setRange",{min:Math.min(le.min,le.max),max:Math.max(le.min,le.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:J}})),$.DOMType!=="mousemove"&&$.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&K(this.zoomedMin)&&K(this.zoomedMax)&&(W=Math.round(this.zoomedMin),q=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,q,ie,oe),this.outline&&this.drawOutline(W,q,ie,oe),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,ie,oe),this.drawHandle(q,1,ie,oe)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function($){$()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let $=this.baseSeries||[];this.navigatorEnabled&&$[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&$.forEach(function(q){O(q,"updatedData",this.updatedDataHandler)},this),$[0].xAxis&&O($[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init($){var ee;let q=$.options,W=q.navigator||{},se=W.enabled,fe=q.scrollbar||{},re=fe.enabled,le=se&&W.height||0,Se=re&&fe.height||0,ye=fe.buttonsEnabled&&Se||0;this.handles=[],this.shades=[],this.chart=$,this.setBaseSeries(),this.height=le,this.scrollbarHeight=Se,this.scrollButtonSize=ye,this.scrollbarEnabled=re,this.navigatorEnabled=se,this.navigatorOptions=W,this.scrollbarOptions=fe,this.setOpposite();let Ee=this,J=Ee.baseSeries,ie=$.xAxis.length,oe=$.yAxis.length,we=J&&J[0]&&J[0].xAxis||$.xAxis[0]||{options:{}};if($.isDirtyBox=!0,Ee.navigatorEnabled){let ae=this.getXAxisOffsets();Ee.xAxis=new n($,B({breaks:we.options.breaks,ordinal:we.options.ordinal,overscroll:we.options.overscroll},W.xAxis,{type:"datetime",yAxis:(ee=W.yAxis)==null?void 0:ee.id,index:ie,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:we.options.ordinal?0:we.options.minPadding,maxPadding:we.options.ordinal?0:we.options.maxPadding,zoomEnabled:!1},$.inverted?{offsets:ae,width:le}:{offsets:ae,height:le}),"xAxis"),Ee.yAxis=new n($,B(W.yAxis,{alignTicks:!1,offset:0,index:oe,isInternal:!0,reversed:F(W.yAxis&&W.yAxis.reversed,$.yAxis[0]&&$.yAxis[0].reversed,!1),zoomEnabled:!1},$.inverted?{width:le}:{height:le}),"yAxis"),J||W.series.data?Ee.updateNavigatorSeries(!1):$.series.length===0&&(Ee.unbindRedraw=T($,"beforeRedraw",function(){$.series.length>0&&!Ee.series&&(Ee.setBaseSeries(),Ee.unbindRedraw())})),Ee.reversedExtremes=$.inverted&&!Ee.xAxis.reversed||!$.inverted&&Ee.xAxis.reversed,Ee.renderElements(),Ee.addMouseEvents()}else Ee.xAxis={chart:$,navigatorAxis:{fake:!0},translate:function(ae,ue){let ve=$.xAxis[0],Ce=ve.getExtremes(),je=ve.len-2*ye,Me=L("min",ve.options.min,Ce.dataMin),Re=L("max",ve.options.max,Ce.dataMax)-Me;return ue?ae*Re/je+Me:je*(ae-Me)/Re},toPixels:function(ae){return this.translate(ae)},toValue:function(ae){return this.translate(ae,!0)}},Ee.xAxis.navigatorAxis.axis=Ee.xAxis,Ee.xAxis.navigatorAxis.toFixedRange=h.prototype.toFixedRange.bind(Ee.xAxis.navigatorAxis);if($.options.scrollbar.enabled){let ae=B($.options.scrollbar,{vertical:$.inverted});!K(ae.margin)&&Ee.navigatorEnabled&&(ae.margin=$.inverted?-3:3),$.scrollbar=Ee.scrollbar=new m($.renderer,ae,$),T(Ee.scrollbar,"changed",function(ue){let ve=Ee.size,Ce=ve*this.to,je=ve*this.from;Ee.hasDragged=Ee.scrollbar.hasDragged,Ee.render(0,0,je,Ce),this.shouldUpdateExtremes(ue.DOMType)&&setTimeout(function(){Ee.onMouseUp(ue)})})}Ee.addBaseSeriesEvents(),Ee.addChartEvents()}setOpposite(){let $=this.navigatorOptions,q=this.navigatorEnabled,W=this.chart;this.opposite=F($.opposite,!!(!q&&W.inverted))}getUnionExtremes($){let q,W=this.chart.xAxis[0],se=this.xAxis,fe=se.options,re=W.options;return $&&W.dataMin===null||(q={dataMin:F(fe&&fe.min,L("min",re.min,W.dataMin,se.dataMin,se.min)),dataMax:F(fe&&fe.max,L("max",re.max,W.dataMax,se.dataMax,se.max))}),q}setBaseSeries($,q){let W=this.chart,se=this.baseSeries=[];$=$||W.options&&W.options.navigator.baseSeries||(W.series.length?N(W.series,fe=>!fe.options.isInternal).index:0),(W.series||[]).forEach((fe,re)=>{!fe.options.isInternal&&(fe.options.showInNavigator||(re===$||fe.options.id===$)&&fe.options.showInNavigator!==!1)&&se.push(fe)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,q)}updateNavigatorSeries($,q){var ie,oe;let W=this,se=W.chart,fe=W.baseSeries,re={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(ie=this.navigatorOptions.xAxis)==null?void 0:ie.id,yAxis:(oe=this.navigatorOptions.yAxis)==null?void 0:oe.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},le=W.series=(W.series||[]).filter(we=>{let ee=we.baseSeries;return!(0>fe.indexOf(ee))||(ee&&(O(ee,"updatedData",W.updatedDataHandler),delete ee.navigatorSeries),we.chart&&we.destroy(),!1)}),Se,ye,Ee=W.navigatorOptions.series,J;fe&&fe.length&&fe.forEach(we=>{let ee=we.navigatorSeries,ae=S({color:we.color,visible:we.visible},Z(Ee)?b.navigator.series:Ee);if(ee&&W.navigatorOptions.adaptToUpdatedData===!1)return;re.name="Navigator "+fe.length,J=(Se=we.options||{}).navigatorOptions||{},ae.dataLabels=R(ae.dataLabels),(ye=B(Se,re,ae,J)).pointRange=F(ae.pointRange,J.pointRange,b.plotOptions[ye.type||"line"].pointRange);let ue=J.data||ae.data;W.hasNavigatorData=W.hasNavigatorData||!!ue,ye.data=ue||Se.data&&Se.data.slice(0),ee&&ee.options?ee.update(ye,q):(we.navigatorSeries=se.initSeries(ye),se.setSortedData(),we.navigatorSeries.baseSeries=we,le.push(we.navigatorSeries))}),(Ee.data&&!(fe&&fe.length)||Z(Ee))&&(W.hasNavigatorData=!1,(Ee=R(Ee)).forEach((we,ee)=>{re.name="Navigator "+(le.length+1),(ye=B(b.navigator.series,{color:se.series[ee]&&!se.series[ee].options.isInternal&&se.series[ee].color||se.options.colors[ee]||se.options.colors[0]},re,we)).data=we.data,ye.data&&(W.hasNavigatorData=!0,le.push(se.initSeries(ye)))})),$&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let $=this,q=$.baseSeries||[];q[0]&&q[0].xAxis&&q[0].eventsToUnbind.push(T(q[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),q.forEach(W=>{W.eventsToUnbind.push(T(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(T(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(T(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(T(W,"remove",function(){q&&M(q,W),this.navigatorSeries&&(M($.series,this.navigatorSeries),E(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin($){return this.baseSeries.reduce(function(q,W){return Math.min(q,W.xData&&W.xData.length?W.xData[0]:q)},$)}modifyNavigatorAxisExtremes(){let $=this.xAxis;if($.getExtremes!==void 0){let q=this.getUnionExtremes(!0);q&&(q.dataMin!==$.min||q.dataMax!==$.max)&&($.min=q.dataMin,$.max=q.dataMax)}}modifyBaseAxisExtremes(){var ee;let $,q,W=this.chart.navigator,se=this.getExtremes(),fe=se.min,re=se.max,le=se.dataMin,Se=se.dataMax,ye=re-fe,Ee=W.stickToMin,J=W.stickToMax,ie=F((ee=this.ordinal)==null?void 0:ee.convertOverscroll(this.options.overscroll),0),oe=W.series&&W.series[0],we=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Ee&&($=(q=le)+ye),J&&($=Se+ie,Ee||(q=Math.max(le,$-ye,W.getBaseSeriesMin(oe&&oe.xData?oe.xData[0]:-Number.MAX_VALUE)))),we&&(Ee||J)&&K(q)&&(this.min=this.userMin=q,this.max=this.userMax=$)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let $=this.chart.navigator,q=this.navigatorSeries,W=$.reversedExtremes?Math.round($.zoomedMin)===0:Math.round($.zoomedMax)>=Math.round($.size);$.stickToMax=F(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),$.stickToMin=$.shouldStickToMin(this,$),q&&!$.hasNavigatorData&&(q.options.pointStart=this.xData[0],q.setData(this.options.data,!1,null,!1))}shouldStickToMin($,q){let W=q.getBaseSeriesMin($.xData[0]),se=$.xAxis,fe=se.max,re=se.min,le=se.options.range;return!!(K(fe)&&K(re))&&(le&&fe-W>0?fe-W<le:re<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(T(this.chart,"redraw",function(){let $=this.navigator,q=$&&($.baseSeries&&$.baseSeries[0]&&$.baseSeries[0].xAxis||this.xAxis[0]);q&&$.render(q.min,q.max)}),T(this.chart,"getMargins",function(){let $=this.navigator,q=$.opposite?"plotTop":"marginBottom";this.inverted&&(q=$.opposite?"marginRight":"plotLeft"),this[q]=(this[q]||0)+($.navigatorEnabled||!this.inverted?$.height+$.scrollbarHeight:0)+$.navigatorOptions.margin}),T(G,"setRange",function($){this.chart.xAxis[0].setExtremes($.min,$.max,$.redraw,$.animation,$.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(M(this.chart.xAxis,this.xAxis),M(this.chart.axes,this.xAxis)),this.yAxis&&(M(this.chart.yAxis,this.yAxis),M(this.chart.axes,this.yAxis)),(this.series||[]).forEach($=>{$.destroy&&$.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach($=>{this[$]&&this[$].destroy&&this[$].destroy(),this[$]=null}),[this.handles].forEach($=>{A($)}),this.navigatorEnabled=!1}}return G}),r(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(n,a,c,s,h,f,m,y,g){let{animObject:b}=h,{format:v}=f,{clamp:_,pick:T,syncTimeout:k}=m,{getFakeMouseEvent:w}=y,{getAxisRangeDescription:E,fireEventOnWrappedOrUnwrappedElement:A}=g;return class extends n{init(){let M=this.chart,S=this;this.announcer=new a(M,"polite"),this.addEvent(s,"afterRender",function(){this.chart===S.chart&&this.chart.renderer&&k(()=>{S.proxyProvider.updateGroupProxyElementPositions("navigator"),S.updateHandleValues()},b(T(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var Y,Z,K;let M=this.chart,S=M.options,N=S.navigator;if(N.enabled&&((Y=N.accessibility)!=null&&Y.enabled)){let B=S.accessibility.landmarkVerbosity,F=(Z=S.lang.accessibility)==null?void 0:Z.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:B==="all"?"region":"group","aria-label":v(F,{chart:M},M)});let O=(K=S.lang.accessibility)==null?void 0:K.navigator.handleLabel;[0,1].forEach(R=>{let L=this.getHandleByIx(R);if(L){let G=this.proxyProvider.addProxyElement("navigator",{click:L},"input",{type:"range","aria-label":v(O,{handleIx:R,chart:M},M)});this[R?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(M){let S=this,N=this.chart,Y=M?this.maxHandleProxy:this.minHandleProxy,Z=this.keyCodes;return new c(N,{keyCodeMap:[[[Z.left,Z.right,Z.up,Z.down],function(K){if(Y){let B=K===Z.left||K===Z.up?-1:1;Y.value=""+_(parseFloat(Y.value)+B,0,100),S.updateNavigator(()=>{let F=S.getHandleByIx(M);F&&N.setFocusToElement(F,Y)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(M),Y)},validate:()=>{var K;return!!(this.getHandleByIx(M)&&Y&&((K=N.options.navigator.accessibility)!=null&&K.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let M=this.chart.navigator;if(M&&this.minHandleProxy&&this.maxHandleProxy){let S=M.size;this.minHandleProxy.value=""+Math.round(M.zoomedMin/S*100),this.maxHandleProxy.value=""+Math.round(M.zoomedMax/S*100)}}getHandleByIx(M){let S=this.chart.navigator;return S&&S.handles&&S.handles[M]}updateNavigator(M){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((S=>{var K;let N=this.chart,{navigator:Y,pointer:Z}=N;if(Y&&Z&&this.minHandleProxy&&this.maxHandleProxy){let B=Z.getChartPosition(),F=parseFloat(this.minHandleProxy.value)/100*Y.size,O=parseFloat(this.maxHandleProxy.value)/100*Y.size;[[0,"mousedown",Y.zoomedMin],[0,"mousemove",F],[0,"mouseup",F],[1,"mousedown",Y.zoomedMax],[1,"mousemove",O],[1,"mouseup",O]].forEach(([G,V,$])=>{var W;let q=(W=this.getHandleByIx(G))==null?void 0:W.element;q&&A(q,w(V,{x:B.left+Y.left+$,y:B.top+Y.top},q))}),S&&S();let R=(K=N.options.lang.accessibility)==null?void 0:K.navigator.changeAnnouncement,L=E(N.xAxis[0]);this.announcer.announce(v(R,{axisRangeDescription:L,chart:N},N))}}).bind(this,M),20)}}}),r(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{getPointAnnotationTexts:f}=n,{getAxisDescription:m,getSeriesFirstPointElement:y,getSeriesA11yElement:g,unhideChartElementFromAT:b}=a,{format:v,numberFormat:_}=c,{reverseChildNodes:T,stripHTMLTagsFromString:k}=s,{find:w,isNumber:E,isString:A,pick:M,defined:S}=h;function N(F){let O=F.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(O!==!1&&F.points&&F.points.length>=+O)}function Y(F,O){let R=F.series,L=R.chart,G=L.options.accessibility.point||{},V=R.options.accessibility&&R.options.accessibility.point||{},$=R.tooltipOptions||{},q=L.options.lang;return E(O)?_(O,V.valueDecimals||G.valueDecimals||$.valueDecimals||-1,q.decimalPoint,q.accessibility.thousandsSep||q.thousandsSep):O}function Z(F,O){let R=F[O];return F.chart.langFormat("accessibility.series."+O+"Description",{name:m(R),series:F})}function K(F){let O=F.series,R=O.chart.series.length>1||O.options.name,L=function(q){let W=q.series,se=W.chart,fe=W.options.accessibility,re=fe&&fe.point&&fe.point.valueDescriptionFormat||se.options.accessibility.point.valueDescriptionFormat,le=M(W.xAxis&&W.xAxis.options.accessibility&&W.xAxis.options.accessibility.enabled,!se.angular&&W.type!=="flowmap"),Se=le?function(ye){let Ee=function(we){let ee=we.series,ae=ee.chart,ue=ee.options.accessibility&&ee.options.accessibility.point||{},ve=ae.options.accessibility.point||{},Ce=ee.xAxis&&ee.xAxis.dateTime;if(Ce){let je=Ce.getXDateFormat(we.x||0,ae.options.tooltip.dateTimeLabelFormats),Me=ue.dateFormatter&&ue.dateFormatter(we)||ve.dateFormatter&&ve.dateFormatter(we)||ue.dateFormat||ve.dateFormat||je;return ae.time.dateFormat(Me,we.x||0,void 0)}}(ye),J=(ye.series.xAxis||{}).categories&&S(ye.category)&&(""+ye.category).replace("<br/>"," "),ie=S(ye.id)&&0>(""+ye.id).indexOf("highcharts-"),oe="x, "+ye.x;return ye.name||Ee||J||(ie?ye.id:oe)}(q):"";return v(re,{point:q,index:S(q.index)?q.index+1:"",xDescription:Se,value:function(ye){let Ee=ye.series,J=Ee.chart.options.accessibility.point||{},ie=Ee.chart.options.accessibility&&Ee.chart.options.accessibility.point||{},oe=Ee.tooltipOptions||{},we=ie.valuePrefix||J.valuePrefix||oe.valuePrefix||"",ee=ie.valueSuffix||J.valueSuffix||oe.valueSuffix||"",ae=ye.value!==void 0?"value":"y",ue=Y(ye,ye[ae]);return ye.isNull?Ee.chart.langFormat("accessibility.series.nullPointValue",{point:ye}):Ee.pointArrayMap?function(ve,Ce,je){let Me=Ce||"",Re=je||"",me=function(De){let Ue=Y(ve,M(ve[De],ve.options[De]));return Ue!==void 0?De+": "+Me+Ue+Re:Ue};return ve.series.pointArrayMap.reduce(function(De,Ue){let Pe=me(Ue);return Pe?De+(De.length?", ":"")+Pe:De},"")}(ye,we,ee):we+ue+ee}(q),separator:le?", ":""},se)}(F),G=F.options&&F.options.accessibility&&F.options.accessibility.description,V=R?" "+O.name+".":"",$=function(q){let W=q.series.chart,se=f(q);return se.length?W.langFormat("accessibility.series.pointAnnotationsDescription",{point:q,annotations:se}):""}(F);return F.accessibility=F.accessibility||{},F.accessibility.valueDescription=L,L+(G?" "+G:"")+V+($?" "+$:"")}function B(F){let O=F.chart,R=O.types||[],L=function(le){let Se=(le.options.accessibility||{}).description;return Se&&le.chart.langFormat("accessibility.series.description",{description:Se,series:le})||""}(F),G=function(le){return O[le]&&O[le].length>1&&F[le]},V=F.index+1,$=Z(F,"xAxis"),q=Z(F,"yAxis"),W={seriesNumber:V,series:F,chart:O},se=R.length>1?"Combination":"",fe=O.langFormat("accessibility.series.summary."+F.type+se,W)||O.langFormat("accessibility.series.summary.default"+se,W),re=(G("yAxis")?" "+q+".":"")+(G("xAxis")?" "+$+".":"");return v(M(F.options.accessibility&&F.options.accessibility.descriptionFormat,O.options.accessibility.series.descriptionFormat,""),{seriesDescription:fe,authorDescription:L?" "+L:"",axisDescription:re,series:F,chart:O,seriesNumber:V},void 0)}return{defaultPointDescriptionFormatter:K,defaultSeriesDescriptionFormatter:B,describeSeries:function(F){let O=F.chart,R=y(F),L=g(F),G=O.is3d&&O.is3d();L&&(L.lastChild!==R||G||T(L),function(V){let $=function(se){let fe=se.options.accessibility||{};return!N(se)&&!fe.exposeAsGroupOnly}(V),q=function(se){let fe=se.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(se.points&&(se.points.length<+fe.pointNavigationEnabledThreshold||fe.pointNavigationEnabledThreshold===!1))}(V),W=V.chart.options.accessibility.point.describeNull;($||q)&&V.points.forEach(se=>{let fe=se.graphic&&se.graphic.element||function(le){let Se=le.series,ye=Se&&Se.chart,Ee=Se&&Se.is("sunburst"),J=le.isNull,ie=ye&&ye.options.accessibility.point.describeNull;return J&&!Ee&&ie}(se)&&function(le){let Se=le.series,ye=function(we){let ee=we.index;return we.series&&we.series.data&&S(ee)&&w(we.series.data,function(ae){return!!(ae&&ae.index!==void 0&&ae.index>ee&&ae.graphic&&ae.graphic.element)})||null}(le),Ee=ye&&ye.graphic,J=Ee?Ee.parentGroup:Se.graph||Se.group,ie=ye?{x:M(le.plotX,ye.plotX,0),y:M(le.plotY,ye.plotY,0)}:{x:M(le.plotX,0),y:M(le.plotY,0)},oe=function(we,ee){let ae=we.series.chart.renderer.rect(ee.x,ee.y,1,1);return ae.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),ae}(le,ie);if(J&&J.element)return le.graphic=oe,le.hasMockGraphic=!0,oe.add(J),J.element.insertBefore(oe.element,Ee?Ee.element:null),oe.element}(se),re=se.options&&se.options.accessibility&&se.options.accessibility.enabled===!1;if(fe){if(se.isNull&&!W){fe.setAttribute("aria-hidden",!0);return}fe.setAttribute("tabindex","-1"),V.chart.styledMode||(fe.style.outline="none"),$&&!re?function(le,Se){var oe,we,ee;let ye=le.series,Ee=((oe=ye.options.accessibility)==null?void 0:oe.point)||{},J=ye.chart.options.accessibility.point||{},ie=k(A(Ee.descriptionFormat)&&v(Ee.descriptionFormat,le,ye.chart)||((we=Ee.descriptionFormatter)==null?void 0:we.call(Ee,le))||A(J.descriptionFormat)&&v(J.descriptionFormat,le,ye.chart)||((ee=J.descriptionFormatter)==null?void 0:ee.call(J,le))||K(le),ye.chart.renderer.forExport);Se.setAttribute("role","img"),Se.setAttribute("aria-label",ie)}(se,fe):fe.setAttribute("aria-hidden",!0)}})}(F),b(O,L),function(V){let $=V.chart,q=$.options.chart,W=q.options3d&&q.options3d.enabled,se=$.series.length>1,fe=$.options.accessibility.series.describeSingleSeries,re=(V.options.accessibility||{}).exposeAsGroupOnly;return!(W&&se)&&(se||fe||re||N(V))}(F)?function(V,$){let q=V.options.accessibility||{},W=V.chart.options.accessibility,se=W.landmarkVerbosity;q.exposeAsGroupOnly?$.setAttribute("role","img"):se==="all"?$.setAttribute("role","region"):$.setAttribute("role","group"),$.setAttribute("tabindex","-1"),V.chart.styledMode||($.style.outline="none"),$.setAttribute("aria-label",k(W.series.descriptionFormatter&&W.series.descriptionFormatter(V)||B(V),V.chart.renderer.forExport))}(F,L):L.removeAttribute("aria-label"))}}}),r(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(n,a,c,s,h,f){let{composed:m}=n,{addEvent:y,defined:g,pushUnique:b}=a,{getChartTitle:v}=s,{defaultPointDescriptionFormatter:_,defaultSeriesDescriptionFormatter:T}=f;function k(E){return!!E.options.accessibility.announceNewData.enabled}class w{constructor(A){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=A}init(){let A=this.chart,M=A.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new h,this.announcer=new c(A,M),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let A=this,M=this.chart,S=this.eventProvider;S.addEvent(M,"afterApplyDrilldown",function(){A.lastAnnouncementTime=0}),S.addEvent(M,"afterAddSeries",function(N){A.onSeriesAdded(N.series)}),S.addEvent(M,"redraw",function(){A.announceDirtyData()})}onSeriesAdded(A){k(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[A.name+A.index]=A,this.dirty.newSeries=g(this.dirty.newSeries)?void 0:A)}announceDirtyData(){let A=this.chart,M=this;if(A.options.accessibility.announceNewData&&this.dirty.hasDirty){let S=this.dirty.newPoint;S&&(S=function(N){let Y=N.series.data.filter(Z=>N.x===Z.x&&N.y===Z.y);return Y.length===1?Y[0]:N}(S)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>M.dirty.allSeries[N]),this.dirty.newSeries,S),this.dirty={allSeries:{}}}}queueAnnouncement(A,M,S){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let Y=+new Date,Z=Y-this.lastAnnouncementTime,K=Math.max(0,N.minAnnounceInterval-Z),B=function(O,R){let L=(O||[]).concat(R||[]).reduce((G,V)=>(G[V.name+V.index]=V,G),{});return Object.keys(L).map(G=>L[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,A),F=this.buildAnnouncementMessage(B,M,S);F&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:Y,message:F,series:B},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},K))}}buildAnnouncementMessage(A,M,S){let N=this.chart,Y=N.options.accessibility.announceNewData;if(Y.announcementFormatter){let F=Y.announcementFormatter(A,M,S);if(F!==!1)return F.length?F:null}let Z=n.charts&&n.charts.length>1?"Multiple":"Single",K=M?"newSeriesAnnounce"+Z:S?"newPointAnnounce"+Z:"newDataAnnounce",B=v(N);return N.langFormat("accessibility.announceNewData."+K,{chartTitle:B,seriesDesc:M?T(M):null,pointDesc:S?_(S):null,point:S,series:M})}}return function(E){function A(S){var Z;let N=this.chart,Y=(Z=N.accessibility)==null?void 0:Z.components.series.newDataAnnouncer;Y&&Y.chart===N&&k(N)&&(Y.dirty.newPoint=g(Y.dirty.newPoint)?void 0:S.point)}function M(){var Y;let S=this.chart,N=(Y=S.accessibility)==null?void 0:Y.components.series.newDataAnnouncer;N&&N.chart===S&&k(S)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}E.compose=function(S){b(m,"A11y.NDA")&&(y(S,"addPoint",A),y(S,"updatedData",M))}}(w||(w={})),w}),r(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{doc:f}=n,{attr:m,css:y,merge:g}=a,{fireEventOnWrappedOrUnwrappedElement:b}=s,{cloneMouseEvent:v,cloneTouchEvent:_,getFakeMouseEvent:T,removeElement:k}=h;return class{constructor(w,E,A="button",M,S){this.chart=w,this.target=E,this.eventProvider=new c;let N=this.innerElement=f.createElement(A),Y=this.element=M?f.createElement(M):N;w.styledMode||this.hideElementVisually(N),M&&(M!=="li"||w.styledMode||(Y.style.listStyle="none"),Y.appendChild(N),this.element=Y),this.updateTarget(E,S)}click(){let w=this.getTargetPosition();w.x+=w.width/2,w.y+=w.height/2;let E=T("click",w);b(this.target.click,E)}updateTarget(w,E){this.target=w,this.updateCSSClassName();let A=E||{};Object.keys(A).forEach(S=>{A[S]===null&&delete A[S]});let M=this.getTargetAttr(w.click,"aria-label");m(this.innerElement,g(M?{"aria-label":M}:{},A)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,w.click),this.refreshPosition()}refreshPosition(){let w=this.getTargetPosition();y(this.innerElement,{width:(w.width||1)+"px",height:(w.height||1)+"px",left:(Math.round(w.x)||0)+"px",top:(Math.round(w.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),k(this.element)}updateCSSClassName(){let w=N=>N.indexOf("highcharts-no-tooltip")>-1,E=this.chart.legend,A=E.group&&E.group.div,M=w(A&&A.className||""),S=w(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=M||S?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(w,E){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(A=>{let M=A.indexOf("touch")===0;this.eventProvider.addEvent(w,A,S=>{let N=M?_(S):v(S);E&&b(E,N),S.stopPropagation(),M||S.preventDefault()},{passive:!1})})}hideElementVisually(w){y(w,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let w=this.target.click,E=w.element?w.element:w,A=this.target.visual||E,M=this.chart.renderTo,S=this.chart.pointer;if(M&&(A!=null&&A.getBoundingClientRect)&&S){let N=A.getBoundingClientRect(),Y=S.getChartPosition();return{x:(N.left-Y.left)/Y.scaleX,y:(N.top-Y.top)/Y.scaleY,width:N.right/Y.scaleX-N.left/Y.scaleX,height:N.bottom/Y.scaleY-N.top/Y.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(w,E){return w.element?w.element.getAttribute(E):w.getAttribute(E)}}}),r(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(n,a,c,s,h,f){let{doc:m}=n,{attr:y,css:g}=a,{unhideChartElementFromAT:b}=c,{removeChildNodes:v}=h;return class{constructor(_){this.chart=_,this.domElementProvider=new s,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(_,T,k="button",w){let E=this.groups[_];if(!E)throw Error("ProxyProvider.addProxyElement: Invalid group key "+_);let A=E.type==="ul"||E.type==="ol"?"li":void 0,M=new f(this.chart,T,k,A,w);return E.proxyContainerElement.appendChild(M.element),E.proxyElements.push(M),M}addGroup(_,T="div",k){let w,E=this.groups[_];if(E)return E.groupElement;let A=this.domElementProvider.createElement(T);return k&&k.role&&T!=="div"?(w=this.domElementProvider.createElement("div")).appendChild(A):w=A,w.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+_.replace(/\W/g,"-"),this.groups[_]={proxyContainerElement:A,groupElement:w,type:T,proxyElements:[]},y(w,k||{}),T==="ul"&&A.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(w),this.updateGroupOrder(this.groupOrder),w}updateGroupAttrs(_,T){let k=this.groups[_];if(!k)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+_);y(k.groupElement,T)}updateGroupOrder(_){if(this.groupOrder=_.slice(),this.isDOMOrderGroupOrder())return;let T=_.indexOf("series"),k=T>-1?_.slice(0,T):_,w=T>-1?_.slice(T+1):[],E=m.activeElement;["before","after"].forEach(A=>{let M=this[A==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];v(M),(A==="before"?k:w).forEach(S=>{let N=this.groups[S];N&&M.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(E)||this.afterChartProxyPosContainer.contains(E))&&E&&E.focus&&E.focus()}clearGroup(_){let T=this.groups[_];if(!T)throw Error("ProxyProvider.clearGroup: Invalid group key "+_);v(T.proxyContainerElement)}removeGroup(_){let T=this.groups[_];T&&(this.domElementProvider.removeElement(T.groupElement),T.groupElement!==T.proxyContainerElement&&this.domElementProvider.removeElement(T.proxyContainerElement),delete this.groups[_])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(_){let T=this.groups[_];T&&T.proxyElements.forEach(k=>k.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(_){let T=this.domElementProvider.createElement("div");return T.setAttribute("aria-hidden","false"),T.className="highcharts-a11y-proxy-container"+(_?"-"+_:""),g(T,{top:"0",left:"0"}),this.chart.styledMode||(T.style.whiteSpace="nowrap",T.style.position="absolute"),T}getCurrentGroupOrderInDOM(){let _=E=>{let A=Object.keys(this.groups),M=A.length;for(;M--;){let S=A[M],N=this.groups[S];if(N&&E===N.groupElement)return S}},T=E=>{let A=[],M=E.children;for(let S=0;S<M.length;++S){let N=_(M[S]);N&&A.push(N)}return A},k=T(this.beforeChartProxyPosContainer),w=T(this.afterChartProxyPosContainer);return k.push("series"),k.concat(w)}isDOMOrderGroupOrder(){let _=this.getCurrentGroupOrderInDOM(),T=this.groupOrder.filter(w=>w==="series"||!!this.groups[w]),k=_.length;if(k!==T.length)return!1;for(;k--;)if(_[k]!==T[k])return!1;return!0}updatePosContainerPositions(){let _=this.chart;if(_.renderer.forExport)return;let T=_.renderer.box;_.container.insertBefore(this.afterChartProxyPosContainer,T.nextSibling),_.container.insertBefore(this.beforeChartProxyPosContainer,T),b(this.chart,this.afterChartProxyPosContainer),b(this.chart,this.beforeChartProxyPosContainer)}}}),r(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:f,getAxisRangeDescription:m}=c,{addEvent:y,attr:g}=h;class b extends n{init(){let _=this.chart;this.announcer=new a(_,"polite")}onChartUpdate(){let _=this.chart,T=this,k=_.rangeSelector;k&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),k.buttons&&k.buttons.length&&k.buttons.forEach(w=>{T.setRangeButtonAttrs(w)}),k.maxInput&&k.minInput&&["minInput","maxInput"].forEach(function(w,E){let A=k[w];A&&(f(_,A),T.setRangeInputAttrs(A,"accessibility.rangeSelector."+(E?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let _=this.chart,T=_.rangeSelector,k=T&&T.dropdown,w=T&&T.buttons||[],E=A=>A.setAttribute("aria-hidden",!0);T&&T.hasVisibleDropdown&&k?(f(_,k),w.forEach(A=>E(A.element))):(k&&E(k),w.forEach(A=>f(_,A.element)))}setDropdownAttrs(){let _=this.chart,T=_.rangeSelector&&_.rangeSelector.dropdown;if(T){let k=_.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:_.options.lang.rangeSelectorZoom});T.setAttribute("aria-label",k),T.setAttribute("tabindex",-1)}}setRangeButtonAttrs(_){g(_.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(_,T){let k=this.chart;g(_,{tabindex:-1,"aria-label":k.langFormat(T,{chart:k})})}onButtonNavKbdArrowKey(_,T){let k=_.response,w=this.keyCodes,E=this.chart,A=E.options.accessibility.keyboardNavigation.wrapAround,M=T===w.left||T===w.up?-1:1;return E.highlightRangeSelectorButton(E.highlightedRangeSelectorItemIx+M)?k.success:A?(_.init(M),k.success):k[M>0?"next":"prev"]}onButtonNavKbdClick(_){let T=_.response,k=this.chart;return k.oldRangeSelectorItemState!==3&&this.fakeClickEvent(k.rangeSelector.buttons[k.highlightedRangeSelectorItemIx].element),T.success}onAfterBtnClick(){let _=this.chart,T=m(_.xAxis[0]),k=_.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:_,axisRangeDescription:T});k&&this.announcer.announce(k)}onInputKbdMove(_){let T=this.chart,k=T.rangeSelector,w=T.highlightedInputRangeIx=(T.highlightedInputRangeIx||0)+_;if(w>1||w<0){if(T.accessibility)return T.accessibility.keyboardNavigation.exiting=!0,T.accessibility.keyboardNavigation.tabindexContainer.focus(),T.accessibility.keyboardNavigation.move(_)}else if(k){let E=k[w?"maxDateBox":"minDateBox"],A=k[w?"maxInput":"minInput"];E&&A&&T.setFocusToElement(E,A)}return!0}onInputNavInit(_){let T=this,k=this.chart,w=_>0?0:1,E=k.rangeSelector,A=E&&E[w?"maxDateBox":"minDateBox"],M=E&&E.minInput,S=E&&E.maxInput;if(k.highlightedInputRangeIx=w,A&&M&&S){k.setFocusToElement(A,w?S:M),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=K=>{(K.which||K.keyCode)===this.keyCodes.tab&&T.onInputKbdMove(K.shiftKey?-1:1)&&(K.preventDefault(),K.stopPropagation())},Y=y(M,"keydown",N),Z=y(S,"keydown",N);this.removeInputKeydownHandler=()=>{Y(),Z()}}}onInputNavTerminate(){let _=this.chart.rangeSelector||{};_.maxInput&&_.hideInput("max"),_.minInput&&_.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let _=this.chart,T=_.rangeSelector,k=T&&T.dropdown;T&&k&&(_.setFocusToElement(T.buttonGroup,k),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=y(k,"keydown",w=>{let E=(w.which||w.keyCode)===this.keyCodes.tab,A=_.accessibility;E&&(w.preventDefault(),w.stopPropagation(),A&&(A.keyboardNavigation.tabindexContainer.focus(),A.keyboardNavigation.move(w.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let _=this.chart,T=this.keyCodes,k=this;return new s(_,{keyCodeMap:[[[T.left,T.right,T.up,T.down],function(w){return k.onButtonNavKbdArrowKey(this,w)}],[[T.enter,T.space],function(){return k.onButtonNavKbdClick(this)}]],validate:function(){return!!(_.rangeSelector&&_.rangeSelector.buttons&&_.rangeSelector.buttons.length)},init:function(w){let E=_.rangeSelector;if(E&&E.hasVisibleDropdown)k.initDropdownNav();else if(E){let A=E.buttons.length-1;_.highlightRangeSelectorButton(w>0?0:A)}},terminate:function(){k.removeDropdownKeydownHandler&&(k.removeDropdownKeydownHandler(),delete k.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let _=this.chart,T=this;return new s(_,{keyCodeMap:[],validate:function(){return!!(_.rangeSelector&&_.rangeSelector.inputGroup&&_.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&_.options.rangeSelector.inputEnabled!==!1&&_.rangeSelector.minInput&&_.rangeSelector.maxInput)},init:function(k){T.onInputNavInit(k)},terminate:function(){T.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(v){function _(k){let w=this.rangeSelector&&this.rangeSelector.buttons||[],E=this.highlightedRangeSelectorItemIx,A=this.rangeSelector&&this.rangeSelector.selected;return E!==void 0&&w[E]&&E!==A&&w[E].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=k,!!w[k]&&(this.setFocusToElement(w[k].box,w[k].element),k!==A&&(this.oldRangeSelectorItemState=w[k].state,w[k].setState(1)),!0)}function T(){let k=this.chart.accessibility;if(k&&k.components.rangeSelector)return k.components.rangeSelector.onAfterBtnClick()}v.compose=function(k,w){let E=k.prototype;E.highlightRangeSelectorButton||(E.highlightRangeSelectorButton=_,y(w,"afterBtnClick",T))}}(b||(b={})),b}),r(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){var c;let{composed:s}=n,{addEvent:h,merge:f,pushUnique:m}=a;return function(y){function g(E){f(!0,E,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function b(E){return E.marker.states&&E.marker.states.normal&&E.marker.states.normal.opacity}function v(E){return!!(E._hasPointMarkers&&E.points&&E.points.length)}function _(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),v(this)&&this.points.forEach(E=>{E.graphic&&(E.graphic[E.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),E.graphic[E.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function T(E){this.resetA11yMarkerOptions=f(E.options.marker||{},this.userOptions.marker||{})}function k(){let E=this.options;(function(A){let M=A.chart.options.accessibility.enabled,S=(A.options.accessibility&&A.options.accessibility.enabled)!==!1;return M&&S&&function(N){let Y=N.chart.options.accessibility;return N.points.length<Y.series.pointDescriptionEnabledThreshold||Y.series.pointDescriptionEnabledThreshold===!1}(A)})(this)?(E.marker&&E.marker.enabled===!1&&(this.a11yMarkersForced=!0,g(this.options)),v(this)&&function(A){let M=A.points.length;for(;M--;){let S=A.points[M],N=S.options,Y=S.hasForcedA11yMarker;if(delete S.hasForcedA11yMarker,N.marker){let Z=Y&&b(N)===0;N.marker.enabled&&!Z?(f(!0,N.marker,{states:{normal:{opacity:b(N)||1}}}),S.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(g(N),S.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(A){let M=A.resetA11yMarkerOptions;if(M){let S=M.states&&M.states.normal&&M.states.normal.opacity;A.userOptions&&A.userOptions.marker&&(A.userOptions.marker.enabled=!0),A.update({marker:{enabled:M.enabled,states:{normal:{opacity:S}}}})}}(this),delete this.resetA11yMarkerOptions)}function w(){this.boosted&&this.a11yMarkersForced&&(f(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}y.compose=function(E){m(s,"A11y.FM")&&(h(E,"afterSetOptions",T),h(E,"render",k),h(E,"afterRender",_),h(E,"renderCanvas",w))}}(c||(c={})),c}),r(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(n,a,c,s,h,f,m,y){let{seriesTypes:g}=c,{doc:b}=s,{defined:v,fireEvent:_}=h,{getPointFromXY:T,getSeriesFromName:k,scrollAxisToPoint:w}=y;function E(K){let B=K.index,F=K.series.points,O=F.length;if(F[B]===K)return B;for(;O--;)if(F[O]===K)return O}function A(K){let B=K.chart.options.accessibility.keyboardNavigation.seriesNavigation,F=K.options.accessibility||{},O=F.keyboardNavigation;return O&&O.enabled===!1||F.enabled===!1||K.options.enableMouseTracking===!1||!K.visible||B.pointNavigationEnabledThreshold&&+B.pointNavigationEnabledThreshold<=K.points.length}function M(K){let B=K.series.chart.options.accessibility,F=K.options.accessibility&&K.options.accessibility.enabled===!1;return K.isNull&&B.keyboardNavigation.seriesNavigation.skipNullPoints||K.visible===!1||K.isInside===!1||F||A(K.series)}function S(K){let B=K.series||[],F=B.length;for(let O=0;O<F;++O)if(!A(B[O])){let R=function(L){let G=L.points||[],V=G.length;for(let $=0;$<V;++$)if(!M(G[$]))return G[$];return null}(B[O]);if(R)return R}return null}function N(K){let B=K.series.length,F=!1;for(;B--&&(K.highlightedPoint=K.series[B].points[K.series[B].points.length-1],!(F=K.series[B].highlightNextValidPoint())););return F}function Y(K){delete K.highlightedPoint;let B=S(K);return!!B&&B.highlight()}class Z{constructor(B,F){this.keyCodes=F,this.chart=B}init(){let B=this,F=this.chart,O=this.eventProvider=new m;O.addEvent(a,"destroy",function(){return B.onSeriesDestroy(this)}),O.addEvent(F,"afterApplyDrilldown",function(){(function(R){let L=S(R);L&&L.highlight(!1)})(this)}),O.addEvent(F,"drilldown",function(R){let L=R.point,G=L.series;B.lastDrilledDownPoint={x:L.x,y:L.y,seriesName:G?G.name:""}}),O.addEvent(F,"drillupall",function(){setTimeout(function(){B.onDrillupAll()},10)}),O.addEvent(n,"afterSetState",function(){let R=this.graphic&&this.graphic.element,L=b.activeElement,G=L&&L.getAttribute("class"),V=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;F.highlightedPoint===this&&L!==R&&!V&&R&&R.focus&&R.focus()})}onDrillupAll(){let B,F=this.lastDrilledDownPoint,O=this.chart,R=F&&k(O,F.seriesName);F&&R&&v(F.x)&&v(F.y)&&(B=T(R,F.x,F.y)),B=B||S(O),O.container&&O.container.focus(),B&&B.highlight&&B.highlight(!1)}getKeyboardNavigationHandler(){let B=this,F=this.keyCodes,O=this.chart,R=O.inverted;return new f(O,{keyCodeMap:[[R?[F.up,F.down]:[F.left,F.right],function(L){return B.onKbdSideways(this,L)}],[R?[F.left,F.right]:[F.up,F.down],function(L){return B.onKbdVertical(this,L)}],[[F.enter,F.space],function(L,G){var $;let V=O.highlightedPoint;if(V){let{plotLeft:q,plotTop:W}=this.chart,{plotX:se=0,plotY:fe=0}=V;G={...G,chartX:q+se,chartY:W+fe,point:V,target:(($=V.graphic)==null?void 0:$.element)||G.target},_(V.series,"click",G),V.firePointEvent("click",G)}return this.response.success}],[[F.home],function(){return Y(O),this.response.success}],[[F.end],function(){return N(O),this.response.success}],[[F.pageDown,F.pageUp],function(L){return O.highlightAdjacentSeries(L===F.pageDown),this.response.success}]],init:function(){return B.onHandlerInit(this)},validate:function(){return!!S(O)},terminate:function(){return B.onHandlerTerminate()}})}onKbdSideways(B,F){let O=this.keyCodes,R=F===O.right||F===O.down;return this.attemptHighlightAdjacentPoint(B,R)}onHandlerInit(B){let F=this.chart;return F.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&F.highlightedPoint?F.highlightedPoint.highlight():Y(F),B.response.success}onKbdVertical(B,F){let O=this.chart,R=this.keyCodes,L=F===R.down||F===R.right,G=O.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(B,L);let V=O.highlightedPoint&&O.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return O[V](L),B.response.success}onHandlerTerminate(){let B=this.chart,F=B.options.accessibility.keyboardNavigation;B.tooltip&&B.tooltip.hide(0);let O=B.highlightedPoint&&B.highlightedPoint.series;O&&O.onMouseOut&&O.onMouseOut(),B.highlightedPoint&&B.highlightedPoint.onMouseOut&&B.highlightedPoint.onMouseOut(),F.seriesNavigation.rememberPointFocus||delete B.highlightedPoint}attemptHighlightAdjacentPoint(B,F){let O=this.chart,R=O.options.accessibility.keyboardNavigation.wrapAround;return O.highlightAdjacentPoint(F)||R&&(F?Y(O):N(O))?B.response.success:B.response[F?"next":"prev"]}onSeriesDestroy(B){let F=this.chart;F.highlightedPoint&&F.highlightedPoint.series===B&&(delete F.highlightedPoint,F.focusElement&&F.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(K){function B(G){let V,$,q=this.series,W=this.highlightedPoint,se=W&&E(W)||0,fe=W&&W.series.points||[],re=this.series&&this.series[this.series.length-1],le=re&&re.points&&re.points[re.points.length-1];if(!q[0]||!q[0].points)return!1;if(W){if(V=q[W.series.index+(G?1:-1)],($=fe[se+(G?1:-1)])||!V||($=V.points[G?0:V.points.length-1]),!$)return!1}else $=G?q[0].points[0]:le;return M($)?(A(V=$.series)?this.highlightedPoint=G?V.points[V.points.length-1]:V.points[0]:this.highlightedPoint=$,this.highlightAdjacentPoint(G)):$.highlight()}function F(G){let V=this.highlightedPoint,$=1/0,q;return!!(v(V.plotX)&&v(V.plotY))&&(this.series.forEach(W=>{A(W)||W.points.forEach(se=>{if(!v(se.plotY)||!v(se.plotX)||se===V)return;let fe=se.plotY-V.plotY,re=Math.abs(se.plotX-V.plotX),le=Math.abs(fe)*Math.abs(fe)+re*re*4;W.yAxis&&W.yAxis.reversed&&(fe*=-1),!(fe<=0&&G||fe>=0&&!G||le<5||M(se))&&le<$&&($=le,q=se)})}),!!q&&q.highlight())}function O(G){let V,$,q,W=this.highlightedPoint,se=this.series&&this.series[this.series.length-1],fe=se&&se.points&&se.points[se.points.length-1];return this.highlightedPoint?!!((V=this.series[W.series.index+(G?-1:1)])&&($=function(re,le,Se,ye){let Ee=1/0,J,ie,oe,we=le.points.length,ee=ae=>!(v(ae.plotX)&&v(ae.plotY));if(!ee(re)){for(;we--;)!ee(J=le.points[we])&&(oe=(re.plotX-J.plotX)*(re.plotX-J.plotX)*4+(re.plotY-J.plotY)*(re.plotY-J.plotY)*1)<Ee&&(Ee=oe,ie=we);return v(ie)?le.points[ie]:void 0}}(W,V)))&&(A(V)?($.highlight(),(q=this.highlightAdjacentSeries(G))?q:(W.highlight(),!1)):($.highlight(),$.series.highlightNextValidPoint())):(V=G?this.series&&this.series[0]:se,!!($=G?V&&V.points&&V.points[0]:fe)&&$.highlight())}function R(G=!0){var W,se;let V=this.series.chart,$=(se=(W=V.tooltip)==null?void 0:W.label)==null?void 0:se.element;!this.isNull&&G?this.onMouseOver():V.tooltip&&V.tooltip.hide(0),w(this),this.graphic&&(V.setFocusToElement(this.graphic),!G&&V.focusElement&&V.focusElement.removeFocusBorder()),V.highlightedPoint=this;let q=$==null?void 0:$.getBoundingClientRect().top;if($&&q&&q<0){let fe=window.scrollY;window.scrollTo({behavior:"smooth",top:fe+q})}return this}function L(){let G=this.chart.highlightedPoint,V=(G&&G.series)===this?E(G):0,$=this.points,q=$.length;if($&&q){for(let W=V;W<q;++W)if(!M($[W]))return $[W].highlight();for(let W=V;W>=0;--W)if(!M($[W]))return $[W].highlight()}return!1}K.compose=function(G,V,$){let q=G.prototype,W=V.prototype,se=$.prototype;q.highlightAdjacentPoint||(q.highlightAdjacentPoint=B,q.highlightAdjacentPointVertical=F,q.highlightAdjacentSeries=O,W.highlight=R,se.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(fe=>{g[fe]&&(g[fe].prototype.keyboardMoveVertical=!1)}),se.highlightNextValidPoint=L)}}(Z||(Z={})),Z}),r(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(n,a,c,s,h,f){let{hideSeriesFromAT:m}=a,{describeSeries:y}=h;return class extends n{static compose(g,b,v){s.compose(v),c.compose(v),f.compose(g,b,v)}init(){this.newDataAnnouncer=new s(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new f(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let g=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===g.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(g){g.labelBySeries&&g.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(g){(g.options.accessibility&&g.options.accessibility.enabled)!==!1&&g.visible&&g.getPointsCollection().length!==0?y(g):m(g)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),r(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:f}=a,{getFakeMouseEvent:m}=c,{attr:y,pick:g}=h;return class extends n{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let b=this,v=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(_=>{b.addEvent(v,_,function(){b.updateProxyOverlays()})})}onChartUpdate(){let b=this.chart,v=this;b.mapNavigation&&b.mapNavigation.navButtons.forEach((_,T)=>{f(b,_.element),v.setMapNavButtonAttrs(_.element,"accessibility.zoom.mapZoom"+(T?"Out":"In"))})}setMapNavButtonAttrs(b,v){let _=this.chart;y(b,{tabindex:-1,role:"button","aria-label":_.langFormat(v,{chart:_})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let b=this.chart;if(this.proxyProvider.clearGroup("zoom"),b.resetZoomButton&&this.createZoomProxyButton(b.resetZoomButton,"resetZoomProxyButton",b.langFormat("accessibility.zoom.resetZoomButton",{chart:b})),b.drillUpButton&&b.breadcrumbs&&b.breadcrumbs.list){let v=b.breadcrumbs.list[b.breadcrumbs.list.length-1];this.createZoomProxyButton(b.drillUpButton,"drillUpProxyButton",b.langFormat("accessibility.drillUpButton",{chart:b,buttonText:b.breadcrumbs.getButtonText(v)}))}}createZoomProxyButton(b,v,_){this[v]=this.proxyProvider.addProxyElement("zoom",{click:b},"button",{"aria-label":_,tabindex:-1})}getMapZoomNavigation(){let b=this.keyCodes,v=this.chart,_=this;return new s(v,{keyCodeMap:[[[b.up,b.down,b.left,b.right],function(T){return _.onMapKbdArrow(this,T)}],[[b.tab],function(T,k){return _.onMapKbdTab(this,k)}],[[b.space,b.enter],function(){return _.onMapKbdClick(this)}]],validate:function(){return!!(v.mapView&&v.mapNavigation&&v.mapNavigation.navButtons.length)},init:function(T){return _.onMapNavInit(T)}})}onMapKbdArrow(b,v){let _=this.chart,T=this.keyCodes,k=_.container,w=v===T.up||v===T.down,E=v===T.left||v===T.up?1:-1,A=(w?_.plotHeight:_.plotWidth)/10*E,M=10*Math.random(),S={x:k.offsetLeft+_.plotLeft+_.plotWidth/2+M,y:k.offsetTop+_.plotTop+_.plotHeight/2+M},N=w?{x:S.x,y:S.y+A}:{x:S.x+A,y:S.y};return[m("mousedown",S),m("mousemove",N),m("mouseup",N)].forEach(Y=>k.dispatchEvent(Y)),b.response.success}onMapKbdTab(b,v){let _=this.chart,T=b.response,k=v.shiftKey,w=k&&!this.focusedMapNavButtonIx||!k&&this.focusedMapNavButtonIx;if(_.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),w)return _.mapView&&_.mapView.zoomBy(),T[k?"prev":"next"];this.focusedMapNavButtonIx+=k?-1:1;let E=_.mapNavigation.navButtons[this.focusedMapNavButtonIx];return _.setFocusToElement(E.box,E.element),E.setState(2),T.success}onMapKbdClick(b){let v=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(v),b.response.success}onMapNavInit(b){let v=this.chart,_=v.mapNavigation.navButtons[0],T=v.mapNavigation.navButtons[1],k=b>0?_:T;v.setFocusToElement(k.box,k.element),k.setState(2),this.focusedMapNavButtonIx=b>0?0:1}simpleButtonNavigation(b,v,_){let T=this.keyCodes,k=this,w=this.chart;return new s(w,{keyCodeMap:[[[T.tab,T.up,T.down,T.left,T.right],function(E,A){let M=E===T.tab&&A.shiftKey||E===T.left||E===T.up;return this.response[M?"prev":"next"]}],[[T.space,T.enter],function(){return g(_(this,w),this.response.success)}]],validate:function(){return w[b]&&w[b].box&&k[v].innerElement},init:function(){w.setFocusToElement(w[b].box,k[v].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(b,v){v.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(b,v){return v.drillUp(),b.response.prev}),this.getMapZoomNavigation()]}}}),r(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(n){let{doc:a,isMS:c,win:s}=n;return{isHighContrastModeActive:function(){let h=/(Edg)/.test(s.navigator.userAgent);if(s.matchMedia&&h)return s.matchMedia("(-ms-high-contrast: active)").matches;if(c&&s.getComputedStyle){let f=a.createElement("div");f.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",a.body.appendChild(f);let m=(f.currentStyle||s.getComputedStyle(f)).backgroundImage;return a.body.removeChild(f),m==="none"}return s.matchMedia&&s.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(h){var y;h.highContrastModeActive=!0;let f=h.options.accessibility.highContrastTheme;h.update(f,!1);let m=((y=f.colors)==null?void 0:y.length)>1;h.series.forEach(function(g){let b=f.plotOptions[g.type]||{},v=m&&g.colorIndex!==void 0?f.colors[g.colorIndex]:b.color||"window",_={color:b.color||"windowText",colors:m?f.colors:[b.color||"windowText"],borderColor:b.borderColor||"window",fillColor:v};g.update(_,!1),g.points&&g.points.forEach(function(T){T.options&&T.options.color&&T.update({color:b.color||"windowText",borderColor:b.borderColor||"window"},!1)})}),h.redraw()}}}),r(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),r(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),r(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),r(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(n){let{error:a,pick:c}=n;function s(f,m,y){let g=f,b,v=0;for(;v<m.length-1;++v)g=g[b=m[v]]=c(g[b],{});g[m[m.length-1]]=y}function h(f,m,y,g){function b(T,k){return k.reduce(function(w,E){return w[E]},T)}let v=b(f.options,m),_=b(f.options,y);Object.keys(g).forEach(function(T){let k=v[T];k!==void 0&&(s(_,g[T],k),a(32,!1,f,{[m.join(".")+"."+T]:y.join(".")+"."+g[T].join(".")}))})}return function(f){(function(m){let y=m.options.chart,g=m.options.accessibility||{};["description","typeDescription"].forEach(function(b){y[b]&&(g[b]=y[b],a(32,!1,m,{[`chart.${b}`]:`use accessibility.${b}`}))})})(f),function(m){m.axes.forEach(function(y){let g=y.options;g&&g.description&&(g.accessibility=g.accessibility||{},g.accessibility.description=g.description,a(32,!1,m,{"axis.description":"use axis.accessibility.description"}))})}(f),f.series&&function(m){let y={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};m.series.forEach(function(g){Object.keys(y).forEach(function(b){let v=g.options[b];b==="accessibility.pointDescriptionFormatter"&&(v=g.options.accessibility&&g.options.accessibility.pointDescriptionFormatter),v!==void 0&&(s(g.options,y[b],b==="skipKeyboardNavigation"?!v:v),a(32,!1,m,{[`series.${b}`]:"series."+y[b].join(".")}))})})}(f),h(f,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),h(f,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),h(f,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),r(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(n,a,c,s,h,f,m,y,g,b,v,_,T,k,w,E,A,M,S,N,Y,Z){let{defaultOptions:K}=n,{doc:B}=a,{addEvent:F,extend:O,fireEvent:R,merge:L}=c,{removeElement:G}=s;class V{constructor(q){this.init(q)}init(q){if(this.chart=q,!B.addEventListener){this.zombie=!0,this.components={},q.renderTo.setAttribute("aria-hidden",!0);return}Z(q),this.proxyProvider=new k(this.chart),this.initComponents(),this.keyboardNavigation=new g(q,this.components)}initComponents(){let q=this.chart,W=this.proxyProvider,se=q.options.accessibility;this.components={container:new f,infoRegions:new y,legend:new b,chartMenu:new v,rangeSelector:new w,series:new E,zoom:new A,navigator:new _},se.customComponents&&O(this.components,se.customComponents);let fe=this.components;this.getComponentOrder().forEach(function(re){fe[re].initBase(q,W),fe[re].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(q=>q!=="series")):Object.keys(this.components):[]}update(){let q=this.components,W=this.chart,se=W.options.accessibility;R(W,"beforeA11yUpdate"),W.types=this.getChartTypes();let fe=se.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(fe),this.getComponentOrder().forEach(function(re){q[re].onChartUpdate(),R(W,"afterA11yComponentUpdate",{name:re,component:q[re]})}),this.keyboardNavigation.update(fe),!W.highContrastModeActive&&se.highContrastMode!==!1&&(M.isHighContrastModeActive()||se.highContrastMode===!0)&&M.setHighContrastTheme(W),R(W,"afterA11yUpdate",{accessibility:this})}destroy(){let q=this.chart||{},W=this.components;Object.keys(W).forEach(function(se){W[se].destroy(),W[se].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),q.announcerContainer&&G(q.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),q.renderTo&&q.renderTo.setAttribute("aria-hidden",!0),q.focusElement&&q.focusElement.removeFocusBorder()}getChartTypes(){let q={};return this.chart.series.forEach(function(W){q[W.type]=1}),Object.keys(q)}}return function($){function q(){this.accessibility&&this.accessibility.destroy()}function W(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let le=this.accessibility;le&&!le.zombie&&(le.proxyProvider.updateProxyElementPositions(),le.getComponentOrder().forEach(function(Se){le.components[Se].onChartRender()}))}function se(le){let Se=le.options.accessibility;Se&&(Se.customComponents&&(this.options.accessibility.customComponents=Se.customComponents,delete Se.customComponents),L(!0,this.options.accessibility,Se),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function fe(){let le=this.accessibility,Se=this.options.accessibility,ye=this.renderer.boxWrapper.element,Ee=this.title;if(Se&&Se.enabled)le&&!le.zombie?le.update():(this.accessibility=le=new $(this),le&&!le.zombie&&le.update(),ye.getAttribute("role")==="img"&&ye.removeAttribute("role"));else if(le)le.destroy&&le.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Ee&&Ee.element.textContent||"").replace(/</g,"&lt;")),ye.setAttribute("aria-hidden",!0);let J=document.getElementsByClassName("highcharts-description")[0];J&&(J.setAttribute("aria-hidden",!1),J.classList.remove("highcharts-linked-description"))}}function re(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}$.i18nFormat=h.i18nFormat,$.compose=function(le,Se,ye,Ee,J,ie){g.compose(le),T.compose(Ee),b.compose(le,Se),v.compose(le),E.compose(le,ye,Ee),h.compose(le),m.compose(le,J),ie&&w.compose(le,ie);let oe=le.prototype;oe.updateA11yEnabled||(oe.updateA11yEnabled=fe,F(le,"destroy",q),F(le,"render",W),F(le,"update",se),["addSeries","init"].forEach(we=>{F(le,we,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(we=>{F(le,we,function(){let ee=this.accessibility;ee&&!ee.zombie&&ee.update()})}),F(ye,"update",re),["update","updatedData","remove"].forEach(we=>{F(Ee,we,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}(V||(V={})),L(!0,K,N,{accessibility:{highContrastTheme:S},lang:Y}),V}),r(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(n,a,c,s,h,f,m){return n.i18nFormat=a.i18nFormat,n.A11yChartUtilities=s,n.A11yHTMLUtilities=h,n.AccessibilityComponent=c,n.KeyboardNavigationHandler=f,n.SeriesAccessibilityDescriber=m,a.compose(n.Chart,n.Legend,n.Point,n.Series,n.SVGElement,n.RangeSelector),n})})})(rI);var Iq=rI.exports;const Pq=Cp(Iq);var nI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(n){let{addEvent:a,correctFloat:c,defined:s,pick:h}=n;function f(v){let _,T=this;return v&&T.pane.forEach(k=>{m(v.chartX-T.plotLeft,v.chartY-T.plotTop,k.center)&&(_=k)}),_}function m(v,_,T,k,w){let E=!0,A=T[0],M=T[1],S=Math.sqrt(Math.pow(v-A,2)+Math.pow(_-M,2));if(s(k)&&s(w)){let N=Math.atan2(c(_-M,8),c(v-A,8));w!==k&&(E=k>w?N>=k&&N<=Math.PI||N<=w&&N>=-Math.PI:N>=k&&N<=c(w,8))}return S<=Math.ceil(T[2]/2)&&E}function y(v){this.polar&&(v.options.inverted&&([v.x,v.y]=[v.y,v.x]),v.isInsidePlot=this.pane.some(_=>m(v.x,v.y,_.center,_.axis&&_.axis.normalizedStartAngleRad,_.axis&&_.axis.normalizedEndAngleRad)))}function g(v){let _=this.chart;v.hoverPoint&&v.hoverPoint.plotX&&v.hoverPoint.plotY&&_.hoverPane&&!m(v.hoverPoint.plotX,v.hoverPoint.plotY,_.hoverPane.center)&&(v.hoverPoint=void 0)}function b(v){let _=this.chart;_.polar?(_.hoverPane=_.getHoverPane(v),v.filter=function(T){return T.visible&&!(!v.shared&&T.directTouch)&&h(T.options.enableMouseTracking,!0)&&(!_.hoverPane||T.xAxis.pane===_.hoverPane)}):_.hoverPane=void 0}return{compose:function(v,_){let T=v.prototype;T.getHoverPane||(T.collectionsWithUpdate.push("pane"),T.getHoverPane=f,a(v,"afterIsInsidePlot",y),a(_,"afterGetHoverData",g),a(_,"beforeGetHoverData",b))}}}),r(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),r(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{extend:h,merge:f,splat:m}=s;class y{constructor(b,v){this.coll="pane",this.init(b,v)}init(b,v){this.chart=v,this.background=[],v.pane.push(this),this.setOptions(b)}setOptions(b){this.options=b=f(c.pane,this.chart.angular?{background:{}}:void 0,b)}render(){let b=this.options,v=this.chart.renderer;this.group||(this.group=v.g("pane-group").attr({zIndex:b.zIndex||0}).add()),this.updateCenter();let _=this.options.background;if(_){let T=Math.max((_=m(_)).length,this.background.length||0);for(let k=0;k<T;k++)_[k]&&this.axis?this.renderBackground(f(c.background,_[k]),k):this.background[k]&&(this.background[k]=this.background[k].destroy(),this.background.splice(k,1))}}renderBackground(b,v){let _={class:"highcharts-pane "+(b.className||"")},T="animate";this.chart.styledMode||h(_,{fill:b.backgroundColor,stroke:b.borderColor,"stroke-width":b.borderWidth}),this.background[v]||(this.background[v]=this.chart.renderer.path().add(this.group),T="attr"),this.background[v][T]({d:this.axis.getPlotBandPath(b.from,b.to,b)}).attr(_)}updateCenter(b){this.center=(b||this.axis||{}).center=n.getCenter.call(this)}update(b,v){f(!0,this.options,b),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(_){_.pane===this&&(_.pane=null,_.update({},v))},this)}}return y.compose=a.compose,y}),r(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{area:{prototype:{pointClass:c,pointClass:{prototype:s}}}}=n.seriesTypes,{defined:h,isNumber:f}=a;return class extends c{setState(){let m=this.state,y=this.series,g=y.chart.polar;h(this.plotHigh)||(this.plotHigh=y.yAxis.toPixels(this.high,!0)),h(this.plotLow)||(this.plotLow=this.plotY=y.yAxis.toPixels(this.low,!0)),y.lowerStateMarkerGraphic=y.stateMarkerGraphic,y.stateMarkerGraphic=y.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,g&&f(this.plotHighX)&&(this.plotX=this.plotHighX),s.setState.apply(this,arguments),this.state=m,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],g&&f(this.plotLowX)&&(this.plotX=this.plotLowX),y.upperStateMarkerGraphic=y.stateMarkerGraphic,y.stateMarkerGraphic=y.lowerStateMarkerGraphic,y.lowerStateMarkerGraphic=void 0;let b=y.modifyMarkerSettings();s.setState.apply(this,arguments),y.restoreMarkerSettings(b)}haloPath(){let m=this.series.chart.polar,y=[];return this.plotY=this.plotLow,m&&f(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(y=s.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,m&&f(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(y=y.concat(s.haloPath.apply(this,arguments))),y}isValid(){return f(this.low)&&f(this.high)}}}),r(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{area:f,area:{prototype:m},column:{prototype:y}}=c.seriesTypes,{addEvent:g,defined:b,extend:v,isArray:_,isNumber:T,pick:k,merge:w}=s;class E extends f{toYData(M){return[M.low,M.high]}highToXY(M){let S=this.chart,N=this.xAxis.postTranslate(M.rectPlotX||0,this.yAxis.len-(M.plotHigh||0));M.plotHighX=N.x-S.plotLeft,M.plotHigh=N.y-S.plotTop,M.plotLowX=M.plotX}getGraphPath(M){let S=[],N=[],Y=m.getGraphPath,Z=this.options,K=this.chart.polar,B=K&&Z.connectEnds!==!1,F=Z.connectNulls,O,R,L,G=Z.step;for(O=(M=M||this.points).length;O--;){R=M[O];let se=K?{plotX:R.rectPlotX,plotY:R.yBottom,doCurve:!1}:{plotX:R.plotX,plotY:R.plotY,doCurve:!1};R.isNull||B||F||M[O+1]&&!M[O+1].isNull||N.push(se),L={polarPlotY:R.polarPlotY,rectPlotX:R.rectPlotX,yBottom:R.yBottom,plotX:k(R.plotHighX,R.plotX),plotY:R.plotHigh,isNull:R.isNull},N.push(L),S.push(L),R.isNull||B||F||M[O-1]&&!M[O-1].isNull||N.push(se)}let V=Y.call(this,M);G&&(G===!0&&(G="left"),Z.step={left:"right",center:"center",right:"left"}[G]);let $=Y.call(this,S),q=Y.call(this,N);Z.step=G;let W=[].concat(V,$);return!this.chart.polar&&q[0]&&q[0][0]==="M"&&(q[0]=["L",q[0][1],q[0][2]]),this.graphPath=W,this.areaPath=V.concat(q),W.isArea=!0,W.xMap=V.xMap,this.areaPath.xMap=V.xMap,W}drawDataLabels(){var L,G;let M,S,N,Y,Z,K=this.points,B=K.length,F=[],O=this.options.dataLabels,R=this.chart.inverted;if(O){if(_(O)?(Y=O[0]||{enabled:!1},Z=O[1]||{enabled:!1}):((Y=v({},O)).x=O.xHigh,Y.y=O.yHigh,(Z=v({},O)).x=O.xLow,Z.y=O.yLow),Y.enabled||((L=this.hasDataLabels)==null?void 0:L.call(this))){for(M=B;M--;)if(S=K[M]){let{plotHigh:V=0,plotLow:$=0}=S;N=Y.inside?V<$:V>$,S.y=S.high,S._plotY=S.plotY,S.plotY=V,F[M]=S.dataLabel,S.dataLabel=S.dataLabelUpper,S.below=N,R?Y.align||(Y.align=N?"right":"left"):Y.verticalAlign||(Y.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=Y,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments),M=B;M--;)(S=K[M])&&(S.dataLabelUpper=S.dataLabel,S.dataLabel=F[M],delete S.dataLabels,S.y=S.low,S.plotY=S._plotY)}if(Z.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(M=B;M--;)if(S=K[M]){let{plotHigh:V=0,plotLow:$=0}=S;N=Z.inside?V<$:V>$,S.below=!N,R?Z.align||(Z.align=N?"left":"right"):Z.verticalAlign||(Z.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Z,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments)}if(Y.enabled)for(M=B;M--;)(S=K[M])&&(S.dataLabels=[S.dataLabelUpper,S.dataLabel].filter(function(V){return!!V}));this.options.dataLabels=O}}alignDataLabel(){y.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let M={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:S,lowMarker:N}}=this;this.options.marker=w(S,N),N.symbol&&(this.symbol=N.symbol)}return M}restoreMarkerSettings(M){this.options.marker=M.marker,this.symbol=M.symbol}drawPoints(){let M,S,N=this.points.length,Y=this.modifyMarkerSettings();for(m.drawPoints.apply(this,arguments),this.restoreMarkerSettings(Y),M=0;M<N;)(S=this.points[M]).graphics=S.graphics||[],S.origProps={plotY:S.plotY,plotX:S.plotX,isInside:S.isInside,negative:S.negative,zone:S.zone,y:S.y},(S.graphic||S.graphics[0])&&(S.graphics[0]=S.graphic),S.graphic=S.graphics[1],S.plotY=S.plotHigh,b(S.plotHighX)&&(S.plotX=S.plotHighX),S.y=k(S.high,S.origProps.y),S.negative=S.y<(this.options.threshold||0),this.zones.length&&(S.zone=S.getZone()),this.chart.polar||(S.isInside=S.isTopInside=S.plotY!==void 0&&S.plotY>=0&&S.plotY<=this.yAxis.len&&S.plotX>=0&&S.plotX<=this.xAxis.len),M++;for(m.drawPoints.apply(this,arguments),M=0;M<N;)(S=this.points[M]).graphics=S.graphics||[],(S.graphic||S.graphics[1])&&(S.graphics[1]=S.graphic),S.graphic=S.graphics[0],S.origProps&&(v(S,S.origProps),delete S.origProps),M++}hasMarkerChanged(M,S){let N=M.lowMarker,Y=S.lowMarker||{};return N&&(N.enabled===!1||Y.symbol!==N.symbol||Y.height!==N.height||Y.width!==N.width)||super.hasMarkerChanged(M,S)}}return E.defaultOptions=w(f.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),g(E,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(A=>{let M=A.high,S=A.plotY;A.isNull?A.plotY=void 0:(A.plotLow=S,A.plotHigh=T(M)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(M):M,!1,!0,void 0,!0):void 0,this.dataModify&&(A.yBottom=A.plotHigh))})},{order:0}),g(E,"afterTranslate",function(){this.points.forEach(A=>{if(this.chart.polar)this.highToXY(A),A.plotLow=A.plotY,A.tooltipPos=[((A.plotHighX||0)+(A.plotLowX||0))/2,((A.plotHigh||0)+(A.plotLow||0))/2];else{let M=A.pos(!1,A.plotLow),S=A.pos(!1,A.plotHigh);M&&S&&(M[0]=(M[0]+S[0])/2,M[1]=(M[1]+S[1])/2),A.tooltipPos=M}})},{order:3}),v(E.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:n,pointValKey:"low",setStackedPoints:h}),c.registerSeriesType("arearange",E),E}),r(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{spline:{prototype:s}}=a.seriesTypes,{merge:h,extend:f}=c;class m extends n{}return m.defaultOptions=h(n.defaultOptions),f(m.prototype,{getPointSpline:s.getPointSpline}),a.registerSeriesType("areasplinerange",m),m}),r(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}"></span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),r(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{noop:f}=c,{crisp:m,extend:y,merge:g,pick:b}=h;class v extends a{pointAttribs(){return{}}translate(){let T=this.yAxis,k=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(w){k.forEach(function(E){w[E]!==null&&(w[E+"Plot"]=T.translate(w[E],0,1,0,1))}),w.plotHigh=w.highPlot})}drawPoints(){let T,k,w,E,A,M,S,N,Y,Z,K,B,F,O=this.points,R=this.options,L=this.chart,G=L.renderer,V=this.doQuartiles!==!1,$=this.options.whiskerLength;for(let q of O){let W=(N=q.graphic)?"animate":"attr",se=q.shapeArgs,fe={},re={},le={},Se={},ye=q.color||this.color;if(q.plotY!==void 0){let Ee;Y=se.width,K=(Z=se.x)+Y,B=Y/2,T=V?q.q1Plot:q.lowPlot,k=V?q.q3Plot:q.lowPlot,w=q.highPlot,E=q.lowPlot,N||(q.graphic=N=G.g("point").add(this.group),q.stem=G.path().addClass("highcharts-boxplot-stem").add(N),$&&(q.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),V&&(q.box=G.path(S).addClass("highcharts-boxplot-box").add(N)),q.medianShape=G.path(M).addClass("highcharts-boxplot-median").add(N)),L.styledMode||(re.stroke=q.stemColor||R.stemColor||ye,re["stroke-width"]=b(q.stemWidth,R.stemWidth,R.lineWidth),re.dashstyle=q.stemDashStyle||R.stemDashStyle||R.dashStyle,q.stem.attr(re),$&&(le.stroke=q.whiskerColor||R.whiskerColor||ye,le["stroke-width"]=b(q.whiskerWidth,R.whiskerWidth,R.lineWidth),le.dashstyle=q.whiskerDashStyle||R.whiskerDashStyle||R.dashStyle,q.whiskers.attr(le)),V&&(fe.fill=q.fillColor||R.fillColor||ye,fe.stroke=R.lineColor||ye,fe["stroke-width"]=R.lineWidth||0,fe.dashstyle=q.boxDashStyle||R.boxDashStyle||R.dashStyle,q.box.attr(fe)),Se.stroke=q.medianColor||R.medianColor||ye,Se["stroke-width"]=b(q.medianWidth,R.medianWidth,R.lineWidth),Se.dashstyle=q.medianDashStyle||R.medianDashStyle||R.dashStyle,q.medianShape.attr(Se));let J=m((q.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,q.stem.strokeWidth());if(Ee=[["M",J,k],["L",J,w],["M",J,T],["L",J,E]],q.stem[W]({d:Ee}),V){let ie=q.box.strokeWidth();T=m(T,ie),k=m(k,ie),Ee=[["M",Z=m(Z,ie),k],["L",Z,T],["L",K=m(K,ie),T],["L",K,k],["L",Z,k],["Z"]],q.box[W]({d:Ee})}if($){let ie=q.whiskers.strokeWidth();w=m(q.highPlot,ie),E=m(q.lowPlot,ie),Ee=[["M",m(J-(F=typeof $=="string"&&/%$/.test($)?B*parseFloat($)/100:Number($)/2)),w],["L",m(J+F),w],["M",m(J-F),E],["L",m(J+F),E]],q.whiskers[W]({d:Ee})}Ee=[["M",Z,A=m(q.medianPlot,q.medianShape.strokeWidth())],["L",K,A]],q.medianShape[W]({d:Ee})}}}toYData(T){return[T.low,T.q1,T.median,T.q3,T.high]}}return v.defaultOptions=g(a.defaultOptions,n),y(v.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:f,setStackedPoints:f}),s.registerSeriesType("boxplot",v),v}),r(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),r(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{parse:h}=n,{noop:f}=c,{arrayMax:m,arrayMin:y,isNumber:g,merge:b,pick:v,stableSort:_}=s;return class{constructor(T,k){this.setState=f,this.init(T,k)}init(T,k){this.options=T,this.visible=!0,this.chart=k.chart,this.legend=k}addToLegend(T){T.splice(this.options.legendIndex,0,this)}drawLegendSymbol(T){let k,w=v(T.options.itemDistance,20),E=this.legendItem||{},A=this.options,M=A.ranges,S=A.connectorDistance;if(!M||!M.length||!g(M[0].value)){T.options.bubbleLegend.autoRanges=!0;return}_(M,function(K,B){return B.value-K.value}),this.ranges=M,this.setOptions(),this.render();let N=this.getMaxLabelSize(),Y=this.ranges[0].radius,Z=2*Y;k=(k=S-Y+N.width)>0?k:0,this.maxLabel=N,this.movementX=A.labels.align==="left"?k:0,E.labelWidth=Z+k+w,E.labelHeight=Z+N.height/2}setOptions(){let T=this.ranges,k=this.options,w=this.chart.series[k.seriesIndex],E=this.legend.baseline,A={zIndex:k.zIndex,"stroke-width":k.borderWidth},M={zIndex:k.zIndex,"stroke-width":k.connectorWidth},S={align:this.legend.options.rtl||k.labels.align==="left"?"right":"left",zIndex:k.zIndex},N=w.options.marker.fillOpacity,Y=this.chart.styledMode;T.forEach(function(Z,K){Y||(A.stroke=v(Z.borderColor,k.borderColor,w.color),A.fill=v(Z.color,k.color,N!==1?h(w.color).setOpacity(N).get("rgba"):w.color),M.stroke=v(Z.connectorColor,k.connectorColor,w.color)),T[K].radius=this.getRangeRadius(Z.value),T[K]=b(T[K],{center:T[0].radius-T[K].radius+E}),Y||b(!0,T[K],{bubbleAttribs:b(A),connectorAttribs:b(M),labelAttribs:S})},this)}getRangeRadius(T){let k=this.options,w=this.options.seriesIndex,E=this.chart.series[w],A=k.ranges[0].value,M=k.ranges[k.ranges.length-1].value,S=k.minSize,N=k.maxSize;return E.getRadius.call(this,M,A,S,N,T)}render(){let T=this.legendItem||{},k=this.chart.renderer,w=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),T.symbol=k.g("bubble-legend"),T.label=k.g("bubble-legend-item").css(this.legend.itemStyle||{}),T.symbol.translateX=0,T.symbol.translateY=0,T.symbol.add(T.label),T.label.add(T.group),this.ranges))E.value>=w&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(T){let k=this.ranges[0],w=this.legend,E=this.options,A=E.labels,M=this.chart,S=M.series[E.seriesIndex],N=M.renderer,Y=this.symbols,Z=Y.labels,K=T.center,B=Math.abs(T.radius),F=E.connectorDistance||0,O=A.align,R=w.options.rtl,L=E.borderWidth,G=E.connectorWidth,V=k.radius||0,$=K-B-L/2+G/2,q=($%1?1:.5)-(G%2?0:.5),W=N.styledMode,se=R||O==="left"?-F:F;O==="center"&&(se=0,E.connectorDistance=0,T.labelAttribs.align="center"),Y.bubbleItems.push(N.circle(V,K+q,B).attr(W?{}:T.bubbleAttribs).addClass((W?"highcharts-color-"+S.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),Y.connectors.push(N.path(N.crispLine([["M",V,$],["L",V+se,$]],E.connectorWidth)).attr(W?{}:T.connectorAttribs).addClass((W?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let fe=N.text(this.formatLabel(T)).attr(W?{}:T.labelAttribs).css(W?{}:A.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),re={x:V+se+E.labels.x,y:$+E.labels.y+.4*fe.getBBox().height};fe.attr(re),Z.push(fe),fe.placed=!0,fe.alignAttr=re}getMaxLabelSize(){let T,k;return this.symbols.labels.forEach(function(w){k=w.getBBox(!0),T=T?k.width>T.width?k:T:k}),T||{}}formatLabel(T){let k=this.options,w=k.labels.formatter,E=k.labels.format,{numberFormatter:A}=this.chart;return E?a.format(E,T):w?w.call(T):A(T.value,1)}hideOverlappingLabels(){let T=this.chart,k=this.options.labels.allowOverlap,w=this.symbols;!k&&w&&(T.hideOverlappingLabels(w.labels),w.labels.forEach(function(E,A){E.newOpacity?E.newOpacity!==E.oldOpacity&&w.connectors[A].show():w.connectors[A].hide()}))}getRanges(){let T=this.legend.bubbleLegend,k=T.chart.series,w=T.options.ranges,E,A,M=Number.MAX_VALUE,S=-Number.MAX_VALUE;return k.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(A=N.zData.filter(g)).length&&(M=v(N.options.zMin,Math.min(M,Math.max(y(A),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),S=v(N.options.zMax,Math.max(S,m(A))))}),E=M===S?[{value:S}]:[{value:M},{value:(M+S)/2},{value:S,autoRanges:!0}],w.length&&w[0].radius&&E.reverse(),E.forEach(function(N,Y){w&&w[Y]&&(E[Y]=b(w[Y],N))}),E}predictBubbleSizes(){let T=this.chart,k=T.legend.options,w=k.floating,E=k.layout==="horizontal",A=E?T.legend.lastLineHeight:0,M=T.plotSizeX,S=T.plotSizeY,N=T.series[this.options.seriesIndex],Y=N.getPxExtremes(),Z=Math.ceil(Y.minPxSize),K=Math.ceil(Y.maxPxSize),B=Math.min(S,M),F,O=N.options.maxSize;return w||!/%$/.test(O)?F=K:(F=(B+A)*(O=parseFloat(O))/100/(O/100+1),(E&&S-F>=M||!E&&M-F>=S)&&(F=K)),[Z,Math.ceil(F)]}updateRanges(T,k){let w=this.legend.options.bubbleLegend;w.minSize=T,w.maxSize=k,w.ranges=this.getRanges()}correctSizes(){let T=this.legend,k=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(k.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,k.maxPxSize),T.render())}}}),r(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{setOptions:f}=c,{composed:m}=s,{addEvent:y,objectEach:g,pushUnique:b,wrap:v}=h;function _(M,S,N){let Y,Z,K,B=this.legend,F=T(this)>=0;B&&B.options.enabled&&B.bubbleLegend&&B.options.bubbleLegend.autoRanges&&F?(Y=B.bubbleLegend.options,Z=B.bubbleLegend.predictBubbleSizes(),B.bubbleLegend.updateRanges(Z[0],Z[1]),Y.placed||(B.group.placed=!1,B.allItems.forEach(O=>{(K=O.legendItem||{}).group&&(K.group.translateY=void 0)})),B.render(),Y.placed||(this.getMargins(),this.axes.forEach(function(O){O.visible&&O.render(),Y.placed||(O.setScale(),O.updateNames(),g(O.ticks,function(R){R.isNew=!0,R.isNewLabel=!0}))}),this.getMargins()),Y.placed=!0,M.call(this,S,N),B.bubbleLegend.correctSizes(),A(B,k(B))):(M.call(this,S,N),B&&B.options.enabled&&B.bubbleLegend&&(B.render(),A(B,k(B))))}function T(M){let S=M.series,N=0;for(;N<S.length;){if(S[N]&&S[N].isBubble&&S[N].visible&&S[N].zData.length)return N;N++}return-1}function k(M){let S=M.allItems,N=[],Y=S.length,Z,K,B,F=0,O=0;for(F=0;F<Y;F++)if(K=S[F].legendItem||{},B=(S[F+1]||{}).legendItem||{},K.labelHeight&&(S[F].itemHeight=K.labelHeight),S[F]===S[Y-1]||K.y!==B.y){for(N.push({height:0}),Z=N[N.length-1];O<=F;O++)S[O].itemHeight>Z.height&&(Z.height=S[O].itemHeight);Z.step=F}return N}function w(M){let S=this.bubbleLegend,N=this.options,Y=N.bubbleLegend,Z=T(this.chart);S&&S.ranges&&S.ranges.length&&(Y.ranges.length&&(Y.autoRanges=!!Y.ranges[0].autoRanges),this.destroyItem(S)),Z>=0&&N.enabled&&Y.enabled&&(Y.seriesIndex=Z,this.bubbleLegend=new a(Y,this),this.bubbleLegend.addToLegend(M.allItems))}function E(M){let S;if(M.defaultPrevented)return!1;let N=M.legendItem,Y=this.chart,Z=N.visible;this&&this.bubbleLegend&&(N.visible=!Z,N.ignoreSeries=Z,S=T(Y)>=0,this.bubbleLegend.visible!==S&&(this.update({bubbleLegend:{enabled:S}}),this.bubbleLegend.visible=S),N.visible=Z)}function A(M,S){let N=M.allItems,Y=M.options.rtl,Z,K,B,F,O=0;N.forEach((R,L)=>{(F=R.legendItem||{}).group&&(Z=F.group.translateX||0,K=F.y||0,((B=R.movementX)||Y&&R.ranges)&&(B=Y?Z-R.options.maxSize/2:Z+B,F.group.attr({translateX:B})),L>S[O].step&&O++,F.group.attr({translateY:Math.round(K+S[O].height/2)}),F.y=K+S[O].height/2)})}return{compose:function(M,S){b(m,"Series.BubbleLegend")&&(f({legend:{bubbleLegend:n}}),v(M.prototype,"drawChartBox",_),y(S,"afterGetAllItems",w),y(S,"itemClick",E))}}}),r(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{seriesTypes:{scatter:{prototype:{pointClass:s}}}}=a,{extend:h}=c;class f extends s{haloPath(y){let g=(y&&this.marker&&this.marker.radius||0)+y;if(this.series.chart.inverted){let b=this.pos()||[0,0],{xAxis:v,yAxis:_,chart:T}=this.series;return T.renderer.symbols.circle(v.len-b[1]-g,_.len-b[0]-g,2*g,2*g)}return n.prototype.haloPath.call(this,g)}}return h(f.prototype,{ttBelow:!1}),f}),r(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f){let{parse:m}=c,{composed:y,noop:g}=s,{series:b,seriesTypes:{column:{prototype:v},scatter:_}}=h,{addEvent:T,arrayMax:k,arrayMin:w,clamp:E,extend:A,isNumber:M,merge:S,pick:N,pushUnique:Y}=f;function Z(){let B=this.len,{coll:F,isXAxis:O,min:R}=this,L=O?"xData":"yData",G=(this.max||0)-(R||0),V=0,$=B,q=B/G,W;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(se=>{if(se.bubblePadding&&se.reserveSpace()){this.allowZoomOutside=!0,W=!0;let fe=se[L];if(O&&((se.onPoint||se).getRadii(0,0,se),se.onPoint&&(se.radii=se.onPoint.radii)),G>0){let re=fe.length;for(;re--;)if(M(fe[re])&&this.dataMin<=fe[re]&&fe[re]<=this.max){let le=se.radii&&se.radii[re]||0;V=Math.min((fe[re]-R)*q-le,V),$=Math.max((fe[re]-R)*q+le,$)}}}}),W&&G>0&&!this.logarithmic&&($-=B,q*=(B+Math.max(0,V)-Math.min($,B))/B,[["min","userMin",V],["max","userMax",$]].forEach(se=>{N(this.options[se[0]],this[se[1]])===void 0&&(this[se[0]]+=se[2]/q)})))}class K extends _{static compose(F,O,R){n.compose(O,R),Y(y,"Series.Bubble")&&T(F,"foundExtremes",Z)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(O){let{graphic:R,plotX:L=0,plotY:G=0}=O;R&&R.width&&(this.hasRendered||R.attr({x:L,y:G,width:1,height:1}),R.animate(this.markerAttribs(O),this.options.animation))},this)}getRadii(){let F=this.zData,O=this.yData,R=[],L,G,V,$=this.chart.bubbleZExtremes,{minPxSize:q,maxPxSize:W}=this.getPxExtremes();if(!$){let se,fe=Number.MAX_VALUE,re=-Number.MAX_VALUE;this.chart.series.forEach(le=>{if(le.bubblePadding&&le.reserveSpace()){let Se=(le.onPoint||le).getZExtremes();Se&&(fe=Math.min(N(fe,Se.zMin),Se.zMin),re=Math.max(N(re,Se.zMax),Se.zMax),se=!0)}}),se?($={zMin:fe,zMax:re},this.chart.bubbleZExtremes=$):$={zMin:0,zMax:0}}for(G=0,L=F.length;G<L;G++)V=F[G],R.push(this.getRadius($.zMin,$.zMax,q,W,V,O&&O[G]));this.radii=R}getRadius(F,O,R,L,G,V){let $=this.options,q=$.sizeBy!=="width",W=$.zThreshold,se=O-F,fe=.5;if(V===null||G===null)return null;if(M(G)){if($.sizeByAbsoluteValue&&(G=Math.abs(G-W),O=se=Math.max(O-W,Math.abs(F-W)),F=0),G<F)return R/2-1;se>0&&(fe=(G-F)/se)}return q&&fe>=0&&(fe=Math.sqrt(fe)),Math.ceil(R+fe*(L-R))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,O){let R=super.markerAttribs(F,O),{height:L=0,width:G=0}=R;return this.chart.inverted?A(R,{x:(F.plotX||0)-G/2,y:(F.plotY||0)-L/2}):R}pointAttribs(F,O){let R=this.options.marker.fillOpacity,L=b.prototype.pointAttribs.call(this,F,O);return R!==1&&(L.fill=m(L.fill).setOpacity(R).get("rgba")),L}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:O,radii:R}=this,{minPxSize:L}=this.getPxExtremes(),G=F.length;for(;G--;){let V=F[G],$=R?R[G]:0;this.zoneAxis==="z"&&(V.negative=(V.z||0)<(O.zThreshold||0)),M($)&&$>=L/2?(V.marker=A(V.marker,{radius:$,width:2*$,height:2*$}),V.dlBox={x:V.plotX-$,y:V.plotY-$,width:2*$,height:2*$}):(V.shapeArgs=V.plotY=V.dlBox=void 0,V.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),O=G=>{let V;return typeof G=="string"&&(V=/%$/.test(G),G=parseInt(G,10)),V?F*G/100:G},R=O(N(this.options.minSize,8)),L=Math.max(O(N(this.options.maxSize,"20%")),R);return{minPxSize:R,maxPxSize:L}}getZExtremes(){let F=this.options,O=(this.zData||[]).filter(M);if(O.length){let R=N(F.zMin,E(w(O),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),L=N(F.zMax,k(O));if(M(R)&&M(L))return{zMin:R,zMax:L}}}}return K.defaultOptions=S(_.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:B}=this.series.chart,{z:F}=this.point;return M(F)?B(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),A(K.prototype,{alignDataLabel:v.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:a,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),T(K,"updatedData",B=>{delete B.target.chart.bubbleZExtremes}),T(K,"remove",B=>{delete B.target.chart.bubbleZExtremes}),h.registerSeriesType("bubble",K),K}),r(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{seriesTypes:{column:{prototype:{pointClass:{prototype:c}}},arearange:{prototype:{pointClass:s}}}}=n,{extend:h,isNumber:f}=a;class m extends s{isValid(){return f(this.low)}}return h(m.prototype,{setState:c.setState}),m}),r(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{seriesTypes:{arearange:f,column:m,column:{prototype:y}}}=c,{addEvent:g,clamp:b,extend:v,isNumber:_,merge:T,pick:k}=s;class w extends f{setOptions(){return T(!0,arguments[0],{stacking:void 0}),f.prototype.setOptions.apply(this,arguments)}translate(){return y.translate.apply(this)}pointAttribs(){return y.pointAttribs.apply(this,arguments)}translate3dPoints(){return y.translate3dPoints.apply(this,arguments)}translate3dShapes(){return y.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let A,M,S,N,Y=this.yAxis,Z=this.xAxis,K=Z.startAngleRad,B=this.chart,F=this.xAxis.isRadial,O=Math.max(B.chartWidth,B.chartHeight)+999;this.points.forEach(R=>{let L=R.shapeArgs||{},G=this.options.minPointLength,V=R.plotY,$=Y.translate(R.high,0,1,0,1);if(_($)&&_(V))if(R.plotHigh=b($,-O,O),R.plotLow=b(V,-O,O),N=R.plotHigh,Math.abs(A=k(R.rectPlotY,R.plotY)-R.plotHigh)<G?(M=G-A,A+=M,N-=M/2):A<0&&(A*=-1,N-=A),F&&this.polar)S=R.barX+K,R.shapeType="arc",R.shapeArgs=this.polar.arc(N+A,N,S,S+R.pointWidth);else{L.height=A,L.y=N;let{x:q=0,width:W=0}=L;R.shapeArgs=T(R.shapeArgs,this.crispCol(q,N,W,A)),R.tooltipPos=B.inverted?[Y.len+Y.pos-B.plotLeft-N-A/2,Z.len+Z.pos-B.plotTop-q-W/2,A]:[Z.left-B.plotLeft+q+W/2,Y.pos-B.plotTop+N+A/2,A]}})}}return w.defaultOptions=T(m.defaultOptions,f.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),g(w,"afterColumnTranslate",function(){w.prototype.afterColumnTranslate.apply(this)},{order:5}),v(w.prototype,{directTouch:!0,pointClass:n,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:y.adjustForMissingColumns,animate:y.animate,crispCol:y.crispCol,drawGraph:h,drawPoints:y.drawPoints,getSymbol:h,drawTracker:y.drawTracker,getColumnMetrics:y.getColumnMetrics}),c.registerSeriesType("columnrange",w),w}),r(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),r(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{column:s}=a.seriesTypes,{clamp:h,merge:f,pick:m}=c;class y extends s{translate(){let b=this.chart,v=this.options,_=this.dense=this.closestPointRange*this.xAxis.transA<2,T=this.borderWidth=m(v.borderWidth,_?0:1),k=this.yAxis,w=v.threshold,E=m(v.minPointLength,5),A=this.getColumnMetrics(),M=A.width,S=this.pointXOffset=A.offset,N=this.translatedThreshold=k.getThreshold(w),Y=this.barW=Math.max(M,1+2*T);for(let Z of(b.inverted&&(N-=.5),v.pointPadding&&(Y=Math.ceil(Y)),super.translate(),this.points)){let K=m(Z.yBottom,N),B=999+Math.abs(K),F=h(Z.plotY,-B,k.len+B),O=Y/2,R=Math.min(F,K),L=Math.max(F,K)-R,G=Z.plotX+S,V,$,q,W,se,fe,re,le,Se,ye,Ee;v.centerInCategory&&(G=this.adjustForMissingColumns(G,M,Z,A)),Z.barX=G,Z.pointWidth=M,Z.tooltipPos=b.inverted?[k.len+k.pos-b.plotLeft-F,this.xAxis.len-G-O,L]:[G+O,F+k.pos-b.plotTop,L],V=w+(Z.total||Z.y),v.stacking==="percent"&&(V=w+(Z.y<0)?-100:100);let J=k.toPixels(V,!0);q=($=b.plotHeight-J-(b.plotHeight-N))?O*(R-J)/$:0,W=$?O*(R+L-J)/$:0,fe=G-q+O,re=G+q+O,le=G+W+O,Se=G-W+O,ye=R-E,Ee=R+L,Z.y<0&&(ye=R,Ee=R+L+E),b.inverted&&(se=k.width-R,$=J-(k.width-N),q=O*(J-se)/$,W=O*(J-(se-L))/$,re=(fe=G+O+q)-2*q,le=G-W+O,Se=G+W+O,ye=R,Ee=R+L-E,Z.y<0&&(Ee=R+L+E)),Z.shapeType="path",Z.shapeArgs={x:fe,y:ye,width:re-fe,height:L,d:[["M",fe,ye],["L",re,ye],["L",le,Ee],["L",Se,Ee],["Z"]]}}}}return y.defaultOptions=f(s.defaultOptions,n),a.registerSeriesType("columnpyramid",y),y}),r(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),r(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{arearange:f}=s.seriesTypes,{addEvent:m,merge:y,extend:g}=h;class b extends n{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||a.prototype.getColumnMetrics.call(this)}drawDataLabels(){let _=this.pointValKey;if(f)for(let T of(f.prototype.drawDataLabels.call(this),this.points))T.y=T[_]}toYData(_){return[_.low,_.high]}}return b.defaultOptions=y(n.defaultOptions,c),m(b,"afterTranslate",function(){for(let v of this.points)v.plotLow=v.plotY},{order:0}),g(b.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),s.registerSeriesType("errorbar",b),b}),r(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(n){let{series:{prototype:{pointClass:a}}}=n;return class extends a{setState(c){this.state=c}}}),r(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{series:f,seriesTypes:{column:m}}=c,{clamp:y,isNumber:g,extend:b,merge:v,pick:_,pInt:T,defined:k}=s;class w extends f{translate(){let A=this.yAxis,M=this.options,S=A.center;this.generatePoints(),this.points.forEach(N=>{let Y=v(M.dial,N.dial),Z=T(Y.radius)*S[2]/200,K=T(Y.baseLength)*Z/100,B=T(Y.rearLength)*Z/100,F=Y.baseWidth,O=Y.topWidth,R=M.overshoot,L=A.startAngleRad+A.translate(N.y,void 0,void 0,void 0,!0);(g(R)||M.wrap===!1)&&(R=g(R)?R/180*Math.PI:0,L=y(L,A.startAngleRad-R,A.endAngleRad+R)),L=180*L/Math.PI,N.shapeType="path";let G=Y.path||[["M",-B,-F/2],["L",K,-F/2],["L",Z,-O/2],["L",Z,O/2],["L",K,F/2],["L",-B,F/2],["Z"]];N.shapeArgs={d:G,translateX:S[0],translateY:S[1],rotation:L},N.plotX=S[0],N.plotY=S[1],k(N.y)&&A.max-A.min&&(N.percentage=(N.y-A.min)/(A.max-A.min)*100)})}drawPoints(){let A=this,M=A.chart,S=A.yAxis.center,N=A.pivot,Y=A.options,Z=Y.pivot,K=M.renderer;A.points.forEach(B=>{let F=B.graphic,O=B.shapeArgs,R=O.d,L=v(Y.dial,B.dial);F?(F.animate(O),O.d=R):B.graphic=K[B.shapeType](O).addClass("highcharts-dial").add(A.group),M.styledMode||B.graphic[F?"animate":"attr"]({stroke:L.borderColor,"stroke-width":L.borderWidth,fill:L.backgroundColor})}),N?N.animate({translateX:S[0],translateY:S[1]}):Z&&(A.pivot=K.circle(0,0,Z.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(S[0],S[1]).add(A.group),M.styledMode||A.pivot.attr({fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":Z.borderWidth}))}animate(A){let M=this;A||M.points.forEach(S=>{let N=S.graphic;N&&(N.attr({rotation:180*M.yAxis.startAngleRad/Math.PI}),N.animate({rotation:S.shapeArgs.rotation},M.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),f.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(A,M){f.prototype.setData.call(this,A,!1),this.processData(),this.generatePoints(),_(M,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return w.defaultOptions=v(f.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),b(w.prototype,{angular:!0,directTouch:!0,drawGraph:h,drawTracker:m.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:n,trackerGroups:["group","dataLabelsGroup"]}),c.registerSeriesType("gauge",w),w}),r(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{composed:c}=n,{addEvent:s,pushUnique:h}=a;function f(){let m,y,g,b=this;b.container&&(m=s(b.container,"mousedown",v=>{let _=b.hoverPoint;_&&_.series&&_.series.hasDraggableNodes&&_.series.options.draggable&&(_.series.onMouseDown(_,v),y=s(b.container,"mousemove",T=>_&&_.series&&_.series.onMouseMove(_,T)),g=s(b.container.ownerDocument,"mouseup",T=>(y(),g(),_&&_.series&&_.series.onMouseUp(_,T))))})),s(b,"destroy",function(){m()})}return{compose:function(m){h(c,"DragNodes")&&s(m,"load",f)},onMouseDown:function(m,y){var b;let g=((b=this.chart.pointer)==null?void 0:b.normalize(y))||y;m.fixedPosition={chartX:g.chartX,chartY:g.chartY,plotX:m.plotX,plotY:m.plotY},m.inDragMode=!0},onMouseMove:function(m,y){var g;if(m.fixedPosition&&m.inDragMode){let b,v,_=this.chart,T=((g=_.pointer)==null?void 0:g.normalize(y))||y,k=m.fixedPosition.chartX-T.chartX,w=m.fixedPosition.chartY-T.chartY,E=_.graphLayoutsLookup;(Math.abs(k)>5||Math.abs(w)>5)&&(b=m.fixedPosition.plotX-k,v=m.fixedPosition.plotY-w,_.isInsidePlot(b,v)&&(m.plotX=b,m.plotY=v,m.hasDragged=!0,this.redrawHalo(m),E.forEach(A=>{A.restartSimulation()})))}},onMouseUp:function(m){m.fixedPosition&&(m.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),m.inDragMode=m.hasDragged=!1,this.options.fixedDraggable||delete m.fixedPosition)},redrawHalo:function(m){m&&this.halo&&this.halo.attr({d:m.haloPath(this.options.states.hover.halo.size)})}}}),r(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{setAnimation:s}=n,{composed:h}=a,{addEvent:f,pushUnique:m}=c;function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(_=>{_.updateSimulation()}),this.redraw())}function g(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(_=>{_.updateSimulation(!1)}),this.redraw())}function b(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(_=>{_.stop()})}function v(){let _,T=!1,k=w=>{w.maxIterations--&&isFinite(w.temperature)&&!w.isStable()&&!w.enableSimulation&&(w.beforeStep&&w.beforeStep(),w.step(),_=!1,T=!0)};if(this.graphLayoutsLookup){for(s(!1,this),this.graphLayoutsLookup.forEach(w=>w.start());!_;)_=!0,this.graphLayoutsLookup.forEach(k);T&&this.series.forEach(w=>{w&&w.layout&&w.render()})}}return{compose:function(_){m(h,"GraphLayout")&&(f(_,"afterPrint",y),f(_,"beforePrint",g),f(_,"predraw",b),f(_,"render",v))},integrations:{},layouts:{}}}),r(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(n,a,c){let{seriesTypes:{bubble:{prototype:{pointClass:s}}}}=c;return class extends s{destroy(){var h;return(h=this.series)!=null&&h.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),a.prototype.destroy.apply(this,arguments)}firePointEvent(){let h=this.series.options;if(this.isParentNode&&h.parentNode){let f=h.allowPointSelect;h.allowPointSelect=h.parentNode.allowPointSelect,a.prototype.firePointEvent.apply(this,arguments),h.allowPointSelect=f}else a.prototype.firePointEvent.apply(this,arguments)}select(){let h=this.series.chart;this.isParentNode?(h.getSelectedPoints=h.getSelectedParentNodes,a.prototype.select.apply(this,arguments),h.getSelectedPoints=n.prototype.getSelectedPoints):a.prototype.select.apply(this,arguments)}}}),r(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(n){let{isNumber:a}=n;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:c}=this.series.chart,{value:s}=this.point;return a(s)?c(s,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),r(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(n,a,c){let s=n.getMass(),h=-c.x*a*this.diffTemperature,f=-c.y*a*this.diffTemperature;n.fromNode.fixedPosition||(n.fromNode.plotX-=h*s.fromNode/n.fromNode.degree,n.fromNode.plotY-=f*s.fromNode/n.fromNode.degree),n.toNode.fixedPosition||(n.toNode.plotX+=h*s.toNode/n.toNode.degree,n.toNode.plotY+=f*s.toNode/n.toNode.degree)},attractiveForceFunction:function(n,a){return(a-n)/n},barycenter:function(){let n=this.options.gravitationalConstant||0,a=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*n,c=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*n;this.nodes.forEach(function(s){s.fixedPosition||(s.plotX-=a/s.mass/s.degree,s.plotY-=c/s.mass/s.degree)})},getK:function(n){return Math.pow(n.box.width*n.box.height/n.nodes.length,.5)},integrate:function(n,a){let c=-n.options.friction,s=n.options.maxSpeed,h=a.prevX,f=a.prevY,m=(a.plotX+a.dispX-h)*c,y=(a.plotY+a.dispY-f)*c,g=Math.abs,b=g(m)/(m||1),v=g(y)/(y||1),_=b*Math.min(s,Math.abs(m)),T=v*Math.min(s,Math.abs(y));a.prevX=a.plotX+a.dispX,a.prevY=a.plotY+a.dispY,a.plotX+=_,a.plotY+=T,a.temperature=n.vectorLength({x:_,y:T})},repulsive:function(n,a,c){let s=a*this.diffTemperature/n.mass/n.degree;n.fixedPosition||(n.plotX+=c.x*s,n.plotY+=c.y*s)},repulsiveForceFunction:function(n,a){return(a-n)/n*(a>n?1:0)}}}),r(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(n,a){let{noop:c}=n;return{barycenter:function(){let s,h,f=this.options.gravitationalConstant,m=this.box,y=this.nodes;for(let g of y)this.options.splitSeries&&!g.isParentNode?(s=g.series.parentNode.plotX,h=g.series.parentNode.plotY):(s=m.width/2,h=m.height/2),g.fixedPosition||(g.plotX-=(g.plotX-s)*f/(g.mass*Math.sqrt(y.length)),g.plotY-=(g.plotY-h)*f/(g.mass*Math.sqrt(y.length)))},getK:c,integrate:a.integrate,repulsive:function(s,h,f,m){let y=h*this.diffTemperature/s.mass/s.degree,g=f.x*y,b=f.y*y;s.fixedPosition||(s.plotX+=g,s.plotY+=b),m.fixedPosition||(m.plotX-=g,m.plotY-=b)},repulsiveForceFunction:function(s,h,f,m){return Math.min(s,(f.marker.radius+m.marker.radius)/2)}}}),r(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(n,a,c,s){let h=n.getMass(),f=c.x/s*a,m=c.y/s*a;n.fromNode.fixedPosition||(n.fromNode.dispX-=f*h.fromNode/n.fromNode.degree,n.fromNode.dispY-=m*h.fromNode/n.fromNode.degree),n.toNode.fixedPosition||(n.toNode.dispX+=f*h.toNode/n.toNode.degree,n.toNode.dispY+=m*h.toNode/n.toNode.degree)},attractiveForceFunction:function(n,a){return n*n/a},barycenter:function(){let n=this.options.gravitationalConstant,a=this.barycenter.xFactor,c=this.barycenter.yFactor;this.nodes.forEach(function(s){if(!s.fixedPosition){let h=s.getDegree(),f=h*(1+h/2);s.dispX+=(a-s.plotX)*n*f/s.degree,s.dispY+=(c-s.plotY)*n*f/s.degree}})},getK:function(n){return Math.pow(n.box.width*n.box.height/n.nodes.length,.3)},integrate:function(n,a){a.dispX+=a.dispX*n.options.friction,a.dispY+=a.dispY*n.options.friction;let c=a.temperature=n.vectorLength({x:a.dispX,y:a.dispY});c!==0&&(a.plotX+=a.dispX/c*Math.min(Math.abs(a.dispX),n.temperature),a.plotY+=a.dispY/c*Math.min(Math.abs(a.dispY),n.temperature))},repulsive:function(n,a,c,s){n.dispX+=c.x/s*a/n.degree,n.dispY+=c.y/s*a/n.degree},repulsiveForceFunction:function(n,a){return a*a/n}}}),r(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class n{constructor(c){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=c,this.boxSize=Math.min(c.width,c.height)}divideBox(){let c=this.box.width/2,s=this.box.height/2;this.nodes[0]=new n({left:this.box.left,top:this.box.top,width:c,height:s}),this.nodes[1]=new n({left:this.box.left+c,top:this.box.top,width:c,height:s}),this.nodes[2]=new n({left:this.box.left+c,top:this.box.top+s,width:c,height:s}),this.nodes[3]=new n({left:this.box.left,top:this.box.top+s,width:c,height:s})}getBoxPosition(c){let s=c.plotX<this.box.left+this.box.width/2,h=c.plotY<this.box.top+this.box.height/2;return s?h?0:3:h?1:2}insert(c,s){let h;this.isInternal?this.nodes[this.getBoxPosition(c)].insert(c,s-1):(this.isEmpty=!1,this.body?s?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,s-1),this.body=!0),this.nodes[this.getBoxPosition(c)].insert(c,s-1)):((h=new n({top:c.plotX||NaN,left:c.plotY||NaN,width:.1,height:.1})).body=c,h.isInternal=!1,this.nodes.push(h)):(this.isInternal=!1,this.body=c))}updateMassAndCenter(){let c=0,s=0,h=0;if(this.isInternal){for(let f of this.nodes)f.isEmpty||(c+=f.mass,s+=f.plotX*f.mass,h+=f.plotY*f.mass);s/=c,h/=c}else this.body&&(c=this.body.mass,s=this.body.plotX,h=this.body.plotY);this.mass=c,this.plotX=s,this.plotY=h}}return n}),r(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(n){return class{constructor(a,c,s,h){this.box={left:a,top:c,width:s,height:h},this.maxDepth=25,this.root=new n(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(a){a.updateMassAndCenter()})}insertNodes(a){for(let c of a)this.root.insert(c,this.maxDepth)}visitNodeRecursive(a,c,s){let h;if(a||(a=this.root),a===this.root&&c&&(h=c(a)),h!==!1){for(let f of a.nodes){if(f.isInternal){if(c&&(h=c(f)),h===!1)continue;this.visitNodeRecursive(f,c,s)}else f.body&&c&&c(f.body);s&&s(f)}a===this.root&&s&&s(a)}}}}),r(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(n,a,c,s,h,f){let{win:m}=a,{clamp:y,defined:g,isFunction:b,fireEvent:v,pick:_}=h;class T{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(w){c.compose(w),c.integrations.euler=n,c.integrations.verlet=f,c.layouts["reingold-fruchterman"]=T}init(w){this.options=w,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=c.integrations[w.integration],this.enableSimulation=w.enableSimulation,this.attractiveForce=_(w.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=_(w.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=w.approximation}updateSimulation(w){this.enableSimulation=_(w,this.options.enableSimulation)}start(){let w=this.series,E=this.options;this.currentStep=0,this.forces=w[0]&&w[0].forces||[],this.chart=w[0]&&w[0].chart,this.initialRendering&&(this.initPositions(),w.forEach(function(A){A.finishedAnimating=!0,A.render()})),this.setK(),this.resetSimulation(E),this.enableSimulation&&this.step()}step(){let w=this.series;for(let E of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[E+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let E of w)E.chart&&E.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&m.cancelAnimationFrame(this.simulation),this.simulation=m.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(E=>{v(E,"afterSimulation")}))}}stop(){this.simulation&&m.cancelAnimationFrame(this.simulation)}setArea(w,E,A,M){this.box={left:w,top:E,width:A,height:M}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(w,E){for(let A of w)E.indexOf(A)===-1&&E.push(A)}removeElementFromCollection(w,E){let A=E.indexOf(w);A!==-1&&E.splice(A,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(w){this.maxIterations=_(w,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(w){this.initialRendering=w}createQuadTree(){this.quadTree=new s(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let w=this.options.initialPositions;if(b(w))for(let E of(w.call(this),this.nodes))g(E.prevX)||(E.prevX=E.plotX),g(E.prevY)||(E.prevY=E.plotY),E.dispX=0,E.dispY=0;else w==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let w,E=this.box,A=this.nodes,M=2*Math.PI/(A.length+1),S=A.filter(function(B){return B.linksTo.length===0}),N={},Y=this.options.initialPositionRadius,Z=B=>{for(let F of B.linksFrom||[])N[F.toNode.id]||(N[F.toNode.id]=!0,K.push(F.toNode),Z(F.toNode))},K=[];for(let B of S)K.push(B),Z(B);if(K.length)for(let B of A)K.indexOf(B)===-1&&K.push(B);else K=A;for(let B=0,F=K.length;B<F;++B)(w=K[B]).plotX=w.prevX=_(w.plotX,E.width/2+Y*Math.cos(B*M)),w.plotY=w.prevY=_(w.plotY,E.height/2+Y*Math.sin(B*M)),w.dispX=0,w.dispY=0}setRandomPositions(){let w,E=this.box,A=this.nodes,M=A.length+1,S=N=>{let Y=N*N/Math.PI;return Y-Math.floor(Y)};for(let N=0,Y=A.length;N<Y;++N)(w=A[N]).plotX=w.prevX=_(w.plotX,E.width*S(N)),w.plotY=w.prevY=_(w.plotY,E.height*S(M+N)),w.dispX=0,w.dispY=0}force(w,...E){this.integration[w].apply(this,E)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let w=0,E=0,A=0;for(let M of this.nodes)E+=M.plotX*M.mass,A+=M.plotY*M.mass,w+=M.mass;return this.barycenter={x:E,y:A,xFactor:E/w,yFactor:A/w},this.barycenter}barnesHutApproximation(w,E){let A,M,S=this.getDistXY(w,E),N=this.vectorLength(S);return w!==E&&N!==0&&(E.isInternal?E.boxSize/N<this.options.theta&&N!==0?(M=this.repulsiveForce(N,this.k),this.force("repulsive",w,M*E.mass,S,N),A=!1):A=!0:(M=this.repulsiveForce(N,this.k),this.force("repulsive",w,M*E.mass,S,N))),A}repulsiveForces(){if(this.approximation==="barnes-hut")for(let w of this.nodes)this.quadTree.visitNodeRecursive(null,E=>this.barnesHutApproximation(w,E));else{let w,E,A;for(let M of this.nodes)for(let S of this.nodes)M===S||M.fixedPosition||(A=this.getDistXY(M,S),(E=this.vectorLength(A))!==0&&(w=this.repulsiveForce(E,this.k),this.force("repulsive",M,w*S.mass,A,E)))}}attractiveForces(){let w,E,A;for(let M of this.links)M.fromNode&&M.toNode&&(w=this.getDistXY(M.fromNode,M.toNode),(E=this.vectorLength(w))!==0&&(A=this.attractiveForce(E,this.k),this.force("attractive",M,A,w,E)))}applyLimits(){for(let w of this.nodes)w.fixedPosition||(this.integration.integrate(this,w),this.applyLimitBox(w,this.box),w.dispX=0,w.dispY=0)}applyLimitBox(w,E){let A=w.radius;w.plotX=y(w.plotX,E.left+A,E.width-A),w.plotY=y(w.plotY,E.top+A,E.height-A)}coolDown(w,E,A){return w-E*A}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let w=0;for(let E of this.nodes)w+=E.temperature;return w}vectorLength(w){return Math.sqrt(w.x*w.x+w.y*w.y)}getDistR(w,E){let A=this.getDistXY(w,E);return this.vectorLength(A)}getDistXY(w,E){let A=w.plotX-E.plotX,M=w.plotY-E.plotY;return{x:A,y:M,absX:Math.abs(A),absY:Math.abs(M)}}}return T}),r(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{addEvent:h,pick:f}=s;function m(){let b=this.series,v=[];return b.forEach(_=>{_.parentNode&&_.parentNode.selected&&v.push(_.parentNode)}),v}function y(){this.allDataPoints&&delete this.allDataPoints}class g extends c{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(v){c.compose(v),n.integrations.packedbubble=a,n.layouts.packedbubble=g;let _=v.prototype;_.getSelectedParentNodes||(h(v,"beforeRedraw",y),_.getSelectedParentNodes=m)}beforeStep(){this.options.marker&&this.series.forEach(v=>{v&&v.calculateParentRadius()})}isStable(){let v=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&v<1e-5||this.temperature<=0}setCircularPositions(){let v=this.box,_=this.nodes,T=2*Math.PI/(_.length+1),k=this.options.initialPositionRadius,w,E,A=0;for(let M of _)this.options.splitSeries&&!M.isParentNode?(w=M.series.parentNode.plotX,E=M.series.parentNode.plotY):(w=v.width/2,E=v.height/2),M.plotX=M.prevX=f(M.plotX,w+k*Math.cos(M.index||A*T)),M.plotY=M.prevY=f(M.plotY,E+k*Math.sin(M.index||A*T)),M.dispX=0,M.dispY=0,A++}repulsiveForces(){let v,_,T,k=this,w=k.options.bubblePadding,E=k.nodes;E.forEach(A=>{A.degree=A.mass,A.neighbours=0,E.forEach(M=>{v=0,A!==M&&!A.fixedPosition&&(k.options.seriesInteraction||A.series===M.series)&&(T=k.getDistXY(A,M),(_=k.vectorLength(T)-(A.marker.radius+M.marker.radius+w))<0&&(A.degree+=.01,A.neighbours++,v=k.repulsiveForce(-_/Math.sqrt(A.neighbours),k.k,A,M)),k.force("repulsive",A,v*M.mass,T,M,_))})})}applyLimitBox(v,_){let T,k;this.options.splitSeries&&!v.isParentNode&&this.options.parentNodeLimit&&(T=this.getDistXY(v,v.series.parentNode),(k=v.series.parentNodeRadius-v.marker.radius-this.vectorLength(T))<0&&k>-2*v.marker.radius&&(v.plotX-=.01*T.x,v.plotY-=.01*T.y)),super.applyLimitBox(v,_)}}return n.layouts.packedbubble=g,g}),r(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(n,a){let{merge:c,syncTimeout:s}=n,{animObject:h}=a;return{initDataLabels:function(){let f=this.options.dataLabels;if(!this.dataLabelsGroup){let m=this.initDataLabelsGroup();return!this.chart.styledMode&&(f!=null&&f.style)&&m.css(f.style),m.attr({opacity:0}),this.visible&&m.show(),m}return this.dataLabelsGroup.attr(c({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var m;let f=this.options.dataLabels;f!=null&&f.defer&&((m=this.options.layoutAlgorithm)!=null&&m.enableSimulation)?s(()=>{this.deferDataLabels=!1},f?h(f.animation).defer:0):this.deferDataLabels=!1}}}),r(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{deg2rad:c}=n,{addEvent:s,merge:h,uniqueKey:f,defined:m,extend:y}=a;function g(_,T){T=h(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},T);let k=this.renderer.url,w=this.text||this,E=w.textPath,{attributes:A,enabled:M}=T;if(_=_||E&&E.path,E&&E.undo(),_&&M){let S=s(w,"afterModifyTree",N=>{if(_&&M){let Y=_.attr("id");Y||_.attr("id",Y=f());let Z={x:0,y:0};m(A.dx)&&(Z.dx=A.dx,delete A.dx),m(A.dy)&&(Z.dy=A.dy,delete A.dy),w.attr(Z),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let K=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:y(A,{"text-anchor":A.textAnchor,href:`${k}#${Y}`}),children:K}}});w.textPath={path:_,undo:S}}else w.attr({dx:0,dy:0}),delete w.textPath;return this.added&&(w.textCache="",this.renderer.buildText(w)),this}function b(_){var w;let T=_.bBox,k=(w=this.element)==null?void 0:w.querySelector("textPath");if(k){let E=[],{b:A,h:M}=this.renderer.fontMetrics(this.element),S=M-A,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),Y=k.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Z=Y.length,K=(B,F)=>{let{x:O,y:R}=F,L=(k.getRotationOfChar(B)-90)*c,G=Math.cos(L),V=Math.sin(L);return[[O-S*G,R-S*V],[O+A*G,R+A*V]]};for(let B=0,F=0;F<Z;F++){let O=Y[F].length;for(let R=0;R<O;R+=5)try{let L=B+R+F,[G,V]=K(L,k.getStartPositionOfChar(L));R===0?(E.push(V),E.push(G)):(F===0&&E.unshift(V),F===Z-1&&E.push(G))}catch{break}B+=O-1;try{let R=B+F,L=k.getEndPositionOfChar(R),[G,V]=K(R,L);E.unshift(V),E.unshift(G)}catch{break}}E.length&&E.push(E[0].slice()),T.polygon=E}return T}function v(_){var E;let T=_.labelOptions,k=_.point,w=T[k.formatPrefix+"TextPath"]||T.textPath;w&&!T.useHTML&&(this.setTextPath(((E=k.getDataLabelPath)==null?void 0:E.call(k,this))||k.graphic,w),k.dataLabelPath&&!w.enabled&&(k.dataLabelPath=k.dataLabelPath.destroy()))}return{compose:function(_){s(_,"afterGetBBox",b),s(_,"beforeAddingDataLabel",v);let T=_.prototype;T.setTextPath||(T.setTextPath=g)}}}),r(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(n,a,c,s,h,f,m,y,g,b,v,_){let{parse:T}=n,{noop:k}=s,{series:{prototype:w},seriesTypes:{bubble:E}}=y,{initDataLabels:A,initDataLabelsDefer:M}=g,{addEvent:S,clamp:N,defined:Y,extend:Z,fireEvent:K,isArray:B,isNumber:F,merge:O,pick:R}=b;_.compose(v);class L extends E{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(V,$,q){E.compose(V,$,q),a.compose($),m.compose($)}accumulateAllPoints(){let V,$=this.chart,q=[];for(let W of $.series)if(W.is("packedbubble")&&W.reserveSpace()){V=W.yData||[];for(let se=0;se<V.length;se++)q.push([null,null,V[se],W.index,se,{id:se,marker:{radius:0}}])}return q}addLayout(){let V=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},$=V.type||"packedbubble",q=this.chart.options.chart,W=this.chart.graphLayoutsStorage,se=this.chart.graphLayoutsLookup,fe;W||(this.chart.graphLayoutsStorage=W={},this.chart.graphLayoutsLookup=se=[]),(fe=W[$])||(V.enableSimulation=Y(q.forExport)?!q.forExport:V.enableSimulation,W[$]=fe=new c.layouts[$],fe.init(V),se.splice(fe.index,0,fe)),this.layout=fe,this.points.forEach(re=>{re.mass=2,re.degree=1,re.collisionNmb=1}),fe.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),fe.addElementsToCollection([this],fe.series),fe.addElementsToCollection(this.points,fe.nodes)}addSeriesLayout(){let V=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},$=V.type||"packedbubble",q=this.chart.graphLayoutsStorage,W=this.chart.graphLayoutsLookup,se=O(V,V.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),fe=q[$+"-series"];fe||(q[$+"-series"]=fe=new c.layouts[$],fe.init(se),W.splice(fe.index,0,fe)),this.parentNodeLayout=fe,this.createParentNodes()}calculateParentRadius(){let V=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,V?Math.max(Math.sqrt(Math.pow(V.width,2)+Math.pow(V.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let V=this.chart.series,$=this.options.zMin,q=this.options.zMax,W=1/0,se=-1/0;return $&&q?[$,q]:(V.forEach(fe=>{fe.yData.forEach(re=>{Y(re)&&(re>se&&(se=re),re<W&&(W=re))})}),[$=R($,W),q=R(q,se)])}checkOverlap(V,$){let q=V[0]-$[0],W=V[1]-$[1];return Math.sqrt(q*q+W*W)-Math.abs(V[2]+$[2])<-.001}createParentNodes(){let V=this.pointClass,$=this.chart,q=this.parentNodeLayout,W=this.layout.options,se,fe=this.parentNode,re={radius:this.parentNodeRadius,lineColor:this.color,fillColor:T(this.color).brighten(.4).get()};W.parentNodeOptions&&(re=O(W.parentNodeOptions.marker||{},re)),this.parentNodeMass=0,this.points.forEach(le=>{this.parentNodeMass+=Math.PI*Math.pow(le.marker.radius,2)}),this.calculateParentRadius(),q.nodes.forEach(le=>{le.seriesIndex===this.index&&(se=!0)}),q.setArea(0,0,$.plotWidth,$.plotHeight),se||(fe||(fe=new V(this,{mass:this.parentNodeRadius/2,marker:re,dataLabels:{inside:!1},states:{normal:{marker:re},hover:{marker:re}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(fe.plotX=this.parentNode.plotX,fe.plotY=this.parentNode.plotY),this.parentNode=fe,q.addElementsToCollection([this],q.series),q.addElementsToCollection([fe],q.nodes))}deferLayout(){let V=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),V.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(V=>{V.removeElementFromCollection(this,V.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),w.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(w.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",w.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var se;if(!this.layout||!this.layout.options.splitSeries)return;let V=this.chart,$=this.layout.options.parentNodeOptions.marker,q={fill:$.fillColor||T(this.color).brighten(.4).get(),opacity:$.fillOpacity,stroke:$.lineColor||this.color,"stroke-width":R($.lineWidth,this.options.lineWidth)},W={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,V.seriesGroup),(se=this.group)==null||se.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&Y(this.parentNode.plotX)&&Y(this.parentNode.plotY)&&Y(this.parentNodeRadius)&&(W=O({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},q),this.parentNode.graphic||(this.graph=this.parentNode.graphic=V.renderer.symbol(q.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(W))}drawTracker(){let V,$=this.parentNode;super.drawTracker(),$&&(V=B($.dataLabels)?$.dataLabels:$.dataLabel?[$.dataLabel]:[],$.graphic&&($.graphic.element.point=$),V.forEach(q=>{(q.div||q.element).point=$}))}getPointRadius(){let V,$,q,W,se=this.chart,fe=se.plotWidth,re=se.plotHeight,le=this.options,Se=le.useSimulation,ye=Math.min(fe,re),Ee={},J=[],ie=se.allDataPoints||[],oe=ie.length;["minSize","maxSize"].forEach(ee=>{let ae=parseInt(le[ee],10),ue=/%$/.test(le[ee]);Ee[ee]=ue?ye*ae/100:ae*Math.sqrt(oe)}),se.minRadius=V=Ee.minSize/Math.sqrt(oe),se.maxRadius=$=Ee.maxSize/Math.sqrt(oe);let we=Se?this.calculateZExtremes():[V,$];ie.forEach((ee,ae)=>{q=Se?N(ee[2],we[0],we[1]):ee[2],(W=this.getRadius(we[0],we[1],V,$,q))===0&&(W=null),ie[ae][2]=W,J.push(W)}),this.radii=J}init(){return w.init.apply(this,arguments),M.call(this),this.eventsToUnbind.push(S(this,"updatedData",function(){this.chart.series.forEach(V=>{V.type===this.type&&(V.isDirty=!0)},this)})),this}onMouseUp(V){if(V.fixedPosition&&!V.removed){let $,q=this.layout,W=this.parentNodeLayout;W&&q.options.dragBetweenSeries&&W.nodes.forEach(se=>{V&&V.marker&&se!==V.series.parentNode&&($=q.getDistXY(V,se),q.vectorLength($)-se.marker.radius-V.marker.radius<0&&(se.series.addPoint(O(V.options,{plotX:V.plotX,plotY:V.plotY}),!1),q.removeElementFromCollection(V,q.nodes),V.remove()))}),a.onMouseUp.apply(this,arguments)}}placeBubbles(V){let $=this.checkOverlap,q=this.positionBubble,W=[],se=1,fe=0,re=0,le,Se=[],ye,Ee=V.sort((J,ie)=>ie[2]-J[2]);if(Ee.length){if(W.push([[0,0,Ee[0][2],Ee[0][3],Ee[0][4]]]),Ee.length>1)for(W.push([[0,0-Ee[1][2]-Ee[0][2],Ee[1][2],Ee[1][3],Ee[1][4]]]),ye=2;ye<Ee.length;ye++)Ee[ye][2]=Ee[ye][2]||1,$(le=q(W[se][fe],W[se-1][re],Ee[ye]),W[se][0])?(W.push([]),re=0,W[se+1].push(q(W[se][fe],W[se][0],Ee[ye])),se++,fe=0):se>1&&W[se-1][re+1]&&$(le,W[se-1][re+1])?(re++,W[se].push(q(W[se][fe],W[se-1][re],Ee[ye])),fe++):(fe++,W[se].push(le));this.chart.stages=W,this.chart.rawPositions=[].concat.apply([],W),this.resizeRadius(),Se=this.chart.rawPositions}return Se}pointAttribs(V,$){let q=this.options,W=V&&V.isParentNode,se=q.marker;W&&q.layoutAlgorithm&&q.layoutAlgorithm.parentNodeOptions&&(se=q.layoutAlgorithm.parentNodeOptions.marker);let fe=se.fillOpacity,re=w.pointAttribs.call(this,V,$);return fe!==1&&(re["fill-opacity"]=fe),re}positionBubble(V,$,q){let W=Math.asin,se=Math.acos,fe=Math.pow,re=Math.abs,le=(0,Math.sqrt)(fe(V[0]-$[0],2)+fe(V[1]-$[1],2)),Se=se((fe(le,2)+fe(q[2]+$[2],2)-fe(q[2]+V[2],2))/(2*(q[2]+$[2])*le)),ye=W(re(V[0]-$[0])/le),Ee=(V[1]-$[1]<0?0:Math.PI)+Se+ye*((V[0]-$[0])*(V[1]-$[1])<0?1:-1),J=Math.cos(Ee),ie=Math.sin(Ee);return[$[0]+($[2]+q[2])*ie,$[1]-($[2]+q[2])*J,q[2],q[3],q[4]]}render(){let V=[];w.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach($=>{B($.dataLabels)&&$.dataLabels.forEach(q=>{V.push(q)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(V))}resizeRadius(){let V,$,q,W,se,fe=this.chart,re=fe.rawPositions,le=Math.min,Se=Math.max,ye=fe.plotLeft,Ee=fe.plotTop,J=fe.plotHeight,ie=fe.plotWidth;for(let ae of(V=q=Number.POSITIVE_INFINITY,$=W=Number.NEGATIVE_INFINITY,re))se=ae[2],V=le(V,ae[0]-se),$=Se($,ae[0]+se),q=le(q,ae[1]-se),W=Se(W,ae[1]+se);let oe=[$-V,W-q],we=[(ie-ye)/oe[0],(J-Ee)/oe[1]],ee=le.apply([],we);if(Math.abs(ee-1)>1e-10){for(let ae of re)ae[2]*=ee;this.placeBubbles(re)}else fe.diffY=J/2+Ee-q-(W-q)/2,fe.diffX=ie/2+ye-V-($-V)/2}seriesBox(){let V,$=this.chart,q=this.data,W=Math.max,se=Math.min,fe=[$.plotLeft,$.plotLeft+$.plotWidth,$.plotTop,$.plotTop+$.plotHeight];return q.forEach(re=>{Y(re.plotX)&&Y(re.plotY)&&re.marker.radius&&(V=re.marker.radius,fe[0]=se(fe[0],re.plotX-V),fe[1]=W(fe[1],re.plotX+V),fe[2]=se(fe[2],re.plotY-V),fe[3]=W(fe[3],re.plotY+V))}),F(fe.width/fe.height)?fe:null}setVisible(){let V=this;w.setVisible.apply(V,arguments),V.parentNodeLayout&&V.graph?V.visible?(V.graph.show(),V.parentNode.dataLabel&&V.parentNode.dataLabel.show()):(V.graph.hide(),V.parentNodeLayout.removeElementFromCollection(V.parentNode,V.parentNodeLayout.nodes),V.parentNode.dataLabel&&V.parentNode.dataLabel.hide()):V.layout&&(V.visible?V.layout.addElementsToCollection(V.points,V.layout.nodes):V.points.forEach($=>{V.layout.removeElementFromCollection($,V.layout.nodes)}))}translate(){let V,$,q,W=this.chart,se=this.data,fe=this.index,re=this.options.useSimulation;for(let le of(this.processedXData=this.xData,this.generatePoints(),Y(W.allDataPoints)||(W.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),re?q=W.allDataPoints:(q=this.placeBubbles(W.allDataPoints),this.options.draggable=!1),q))le[3]===fe&&(V=se[le[4]],$=R(le[2],void 0),re||(V.plotX=le[0]-W.plotLeft+W.diffX,V.plotY=le[1]-W.plotTop+W.diffY),F($)&&(V.marker=Z(V.marker,{radius:$,width:2*$,height:2*$}),V.radius=$));re&&this.deferLayout(),K(this,"afterTranslate")}}return L.defaultOptions=O(E.defaultOptions,f),Z(L.prototype,{pointClass:h,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:A,alignDataLabel:w.alignDataLabel,indexateNodes:k,onMouseDown:a.onMouseDown,onMouseMove:a.onMouseMove,redrawHalo:a.redrawHalo,searchPoint:k}),y.registerSeriesType("packedbubble",L),L}),r(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),r(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=n,{area:f,line:m,scatter:y}=c.seriesTypes,{extend:g,merge:b}=s;class v extends y{getGraphPath(){let T=m.prototype.getGraphPath.call(this),k=T.length+1;for(;k--;)(k===T.length||T[k][0]==="M")&&k>0&&T.splice(k,0,["Z"]);return this.areaPath=T,T}drawGraph(){this.options.fillColor=this.color,f.prototype.drawGraph.call(this)}}return v.defaultOptions=b(y.defaultOptions,a),g(v.prototype,{type:"polygon",drawTracker:m.prototype.drawTracker,setStackedPoints:h}),c.registerSeriesType("polygon",v),v}),r(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),r(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{defaultOptions:f}=a,{composed:m,noop:y}=c,{addEvent:g,correctFloat:b,defined:v,extend:_,fireEvent:T,isObject:k,merge:w,pick:E,pushUnique:A,relativeLength:M,wrap:S}=s;return function(N){function Y(){this.autoConnect=this.isCircular&&E(this.userMax,this.options.max)===void 0&&b(this.endAngleRad-this.startAngleRad)===b(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Z(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ae=>this.ticks[ae]&&this.ticks[ae].label).filter(ae=>!!ae)}}function K(){return y}function B(ae,ue,ve){let Ce=this.pane.center,je=ae.value,Me,Re,me;return this.isCircular?(v(je)?ae.point&&(ae.point.shapeArgs||{}).start&&(je=this.chart.inverted?this.translate(ae.point.rectPlotY,!0):ae.point.x):(Re=ae.chartX||0,me=ae.chartY||0,je=this.translate(Math.atan2(me-ve,Re-ue)-this.startAngleRad,!0)),Re=(Me=this.getPosition(je)).x,me=Me.y):(v(je)||(Re=ae.chartX,me=ae.chartY),v(Re)&&v(me)&&(ve=Ce[1]+this.chart.plotTop,je=this.translate(Math.min(Math.sqrt(Math.pow(Re-ue,2)+Math.pow(me-ve,2)),Ce[2]/2)-Ce[3]/2,!0))),[je,Re||0,me||0]}function F(ae,ue,ve){let Ce=this.pane.center,je=this.chart,Me=this.left||0,Re=this.top||0,me,De=E(ue,Ce[2]/2-this.offset),Ue;return ve===void 0&&(ve=this.horiz?0:this.center&&-this.center[3]/2),ve&&(De+=ve),this.isCircular||ue!==void 0?((Ue=this.chart.renderer.symbols.arc(Me+Ce[0],Re+Ce[1],De,De,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Me+Ce[0]],Ue.yBounds=[Re+Ce[1]-De]):(me=this.postTranslate(this.angleRad,De),Ue=[["M",this.center[0]+je.plotLeft,this.center[1]+je.plotTop],["L",me.x,me.y]]),Ue}function O(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function R(ae,ue,ve){let Ce=this.chart,je=Nt=>{if(typeof Nt=="string"){let mt=parseInt(Nt,10);return Te.test(Nt)&&(mt=mt*me/100),mt}return Nt},Me=this.center,Re=this.startAngleRad,me=Me[2]/2,De=Math.min(this.offset,0),Ue=this.left||0,Pe=this.top||0,Te=/%$/,Ie=this.isCircular,Fe,Oe,Ge,Qe,at,rt,dt=E(je(ve.outerRadius),me),gt=je(ve.innerRadius),Tt=E(je(ve.thickness),10);if(this.options.gridLineInterpolation==="polygon")rt=this.getPlotLinePath({value:ae}).concat(this.getPlotLinePath({value:ue,reverse:!0}));else{ae=Math.max(ae,this.min),ue=Math.min(ue,this.max);let Nt=this.translate(ae),mt=this.translate(ue);Ie||(dt=Nt||0,gt=mt||0),ve.shape!=="circle"&&Ie?(Fe=Re+(Nt||0),Oe=Re+(mt||0)):(Fe=-Math.PI/2,Oe=1.5*Math.PI,at=!0),dt-=De,Tt-=De,rt=Ce.renderer.symbols.arc(Ue+Me[0],Pe+Me[1],dt,dt,{start:Math.min(Fe,Oe),end:Math.max(Fe,Oe),innerR:E(gt,dt-Tt),open:at,borderRadius:ve.borderRadius}),Ie&&(Ge=(Oe+Fe)/2,Qe=Ue+Me[0]+Me[2]/2*Math.cos(Ge),rt.xBounds=Ge>-Math.PI/2&&Ge<Math.PI/2?[Qe,Ce.plotWidth]:[0,Qe],rt.yBounds=[Pe+Me[1]+Me[2]/2*Math.sin(Ge)],rt.yBounds[0]+=Ge>-Math.PI&&Ge<0||Ge>Math.PI?-10:10)}return rt}function L(ae){let ue=this.pane.center,ve=this.chart,Ce=ve.inverted,je=ae.reverse,Me=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Re=Me.innerRadius||"0%",me=Me.outerRadius||"100%",De=ue[0]+ve.plotLeft,Ue=ue[1]+ve.plotTop,Pe=this.height,Te=ae.isCrosshair,Ie=ue[3]/2,Fe=ae.value,Oe,Ge,Qe,at,rt,dt,gt,Tt,Nt,mt=this.getPosition(Fe),St=mt.x,kt=mt.y;if(Te&&(Fe=(Tt=this.getCrosshairPosition(ae,De,Ue))[0],St=Tt[1],kt=Tt[2]),this.isCircular)Ge=Math.sqrt(Math.pow(St-De,2)+Math.pow(kt-Ue,2)),Qe=typeof Re=="string"?M(Re,1):Re/Ge,at=typeof me=="string"?M(me,1):me/Ge,ue&&Ie&&(Qe<(Oe=Ie/Ge)&&(Qe=Oe),at<Oe&&(at=Oe)),Nt=[["M",De+Qe*(St-De),Ue-Qe*(Ue-kt)],["L",St-(1-at)*(St-De),kt+(1-at)*(Ue-kt)]];else if((Fe=this.translate(Fe))&&(Fe<0||Fe>Pe)&&(Fe=0),this.options.gridLineInterpolation==="circle")Nt=this.getLinePath(0,Fe,Ie);else if(Nt=[],ve[Ce?"yAxis":"xAxis"].forEach(ii=>{ii.pane===this.pane&&(rt=ii)}),rt){gt=rt.tickPositions,rt.autoConnect&&(gt=gt.concat([gt[0]])),je&&(gt=gt.slice().reverse()),Fe&&(Fe+=Ie);for(let ii=0;ii<gt.length;ii++)dt=rt.getPosition(gt[ii],Fe),Nt.push(ii?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Nt}function G(ae,ue){let ve=this.translate(ae);return this.postTranslate(this.isCircular?ve:this.angleRad,E(this.isCircular?ue:ve<0?0:ve,this.center[2]/2)-this.offset)}function V(){let ae=this.center,ue=this.chart,ve=this.options.title;return{x:ue.plotLeft+ae[0]+(ve.x||0),y:ue.plotTop+ae[1]-{high:.5,middle:.25,low:0}[ve.align]*ae[2]+(ve.y||0)}}function $(ae){ae.beforeSetTickPositions=Y,ae.createLabelCollector=Z,ae.getCrosshairPosition=B,ae.getLinePath=F,ae.getOffset=O,ae.getPlotBandPath=R,ae.getPlotLinePath=L,ae.getPosition=G,ae.getTitlePosition=V,ae.postTranslate=Ee,ae.setAxisSize=ie,ae.setAxisTranslation=oe,ae.setOptions=we}function q(){let ae=this.chart,ue=this.options,ve=ae.angular&&this.isXAxis,Ce=this.pane,je=Ce&&Ce.options;if(!ve&&Ce&&(ae.angular||ae.polar)){let Me=2*Math.PI,Re=(E(je.startAngle,0)-90)*Math.PI/180,me=(E(je.endAngle,E(je.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ue.angle||0)*Math.PI/180,this.startAngleRad=Re,this.endAngleRad=me,this.offset=ue.offset||0;let De=(Re%Me+Me)%Me,Ue=(me%Me+Me)%Me;De>Math.PI&&(De-=Me),Ue>Math.PI&&(Ue-=Me),this.normalizedStartAngleRad=De,this.normalizedEndAngleRad=Ue}}function W(ae){this.isRadial&&(ae.align=void 0,ae.preventDefault())}function se(){if(this.chart&&this.chart.labelCollectors){let ae=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ae>=0&&this.chart.labelCollectors.splice(ae,1)}}function fe(ae){let ue,ve=this.chart,Ce=ve.angular,je=ve.polar,Me=this.isXAxis,Re=this.coll,me=ae.userOptions.pane||0,De=this.pane=ve.pane&&ve.pane[me];if(Re==="colorAxis"){this.isRadial=!1;return}Ce?(Ce&&Me?(this.isHidden=!0,this.createLabelCollector=K,this.getOffset=y,this.redraw=J,this.render=J,this.setScale=y,this.setCategories=y,this.setTitle=y):$(this),ue=!Me):je&&($(this),ue=this.horiz),Ce||je?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&ve.labelCollectors.push(this.labelCollector)):this.isRadial=!1,De&&ue&&(De.axis=this),this.isCircular=ue}function re(){this.isRadial&&this.beforeSetTickPositions()}function le(ae){let ue=this.label;if(!ue)return;let ve=this.axis,Ce=ue.getBBox(),je=ve.options.labels,Me=(ve.translate(this.pos)+ve.startAngleRad+Math.PI/2)/Math.PI*180%360,Re=Math.round(Me),me=v(je.y)?0:-(.3*Ce.height),De=je.y,Ue,Pe=20,Te=je.align,Ie="end",Fe=Re<0?Re+360:Re,Oe=Fe,Ge=0,Qe=0;ve.isRadial&&(Ue=ve.getPosition(this.pos,ve.center[2]/2+M(E(je.distance,-25),ve.center[2]/2,-ve.center[2]/2)),je.rotation==="auto"?ue.attr({rotation:Me}):v(De)||(De=ve.chart.renderer.fontMetrics(ue).b-Ce.height/2),v(Te)||(ve.isCircular?(Ce.width>ve.len*ve.tickInterval/(ve.max-ve.min)&&(Pe=0),Te=Me>Pe&&Me<180-Pe?"left":Me>180+Pe&&Me<360-Pe?"right":"center"):Te="center",ue.attr({align:Te})),Te==="auto"&&ve.tickPositions.length===2&&ve.isCircular&&(Fe>90&&Fe<180?Fe=180-Fe:Fe>270&&Fe<=360&&(Fe=540-Fe),Oe>180&&Oe<=360&&(Oe=360-Oe),(ve.pane.options.startAngle===Re||ve.pane.options.startAngle===Re+360||ve.pane.options.startAngle===Re-360)&&(Ie="start"),Te=Re>=-90&&Re<=90||Re>=-360&&Re<=-270||Re>=270&&Re<=360?Ie==="start"?"right":"left":Ie==="start"?"left":"right",Oe>70&&Oe<110&&(Te="center"),Fe<15||Fe>=180&&Fe<195?Ge=.3*Ce.height:Fe>=15&&Fe<=35?Ge=Ie==="start"?0:.75*Ce.height:Fe>=195&&Fe<=215?Ge=Ie==="start"?.75*Ce.height:0:Fe>35&&Fe<=90?Ge=Ie==="start"?-(.25*Ce.height):Ce.height:Fe>215&&Fe<=270&&(Ge=Ie==="start"?Ce.height:-(.25*Ce.height)),Oe<15?Qe=Ie==="start"?-(.15*Ce.height):.15*Ce.height:Oe>165&&Oe<=180&&(Qe=Ie==="start"?.15*Ce.height:-(.15*Ce.height)),ue.attr({align:Te}),ue.translate(Qe,Ge+me)),ae.pos.x=Ue.x+(je.x||0),ae.pos.y=Ue.y+(De||0))}function Se(ae){this.axis.getPosition&&_(ae.pos,this.axis.getPosition(this.pos))}function ye({options:ae}){ae.xAxis&&w(!0,N.radialDefaultOptions.circular,ae.xAxis),ae.yAxis&&w(!0,N.radialDefaultOptions.radialGauge,ae.yAxis)}function Ee(ae,ue){let ve=this.chart,Ce=this.center;return ae=this.startAngleRad+ae,{x:ve.plotLeft+Ce[0]+Math.cos(ae)*ue,y:ve.plotTop+Ce[1]+Math.sin(ae)*ue}}function J(){this.isDirty=!1}function ie(){let ae,ue;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ae=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ue=this.postTranslate(this.angleRad,ae[3]/2),ae[0]=ue.x-this.chart.plotLeft,ae[1]=ue.y-this.chart.plotTop),this.len=this.width=this.height=(ae[2]-ae[3])*E(this.sector,1)/2)}function oe(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function we(ae){let{coll:ue}=this,{angular:ve,inverted:Ce,polar:je}=this.chart,Me={};ve?this.isXAxis||(Me=w(f.yAxis,N.radialDefaultOptions.radialGauge)):je&&(Me=this.horiz?w(f.xAxis,N.radialDefaultOptions.circular):w(ue==="xAxis"?f.xAxis:f.yAxis,N.radialDefaultOptions.radial)),Ce&&ue==="yAxis"&&(Me.stackLabels=k(f.yAxis,!0)?f.yAxis.stackLabels:{},Me.reversedStacks=!0);let Re=this.options=w(Me,ae);Re.plotBands||(Re.plotBands=[]),T(this,"afterSetOptions")}function ee(ae,ue,ve,Ce,je,Me,Re){let me,De=this.axis;return De.isRadial?["M",ue,ve,"L",(me=De.getPosition(this.pos,De.center[2]/2+Ce)).x,me.y]:ae.call(this,ue,ve,Ce,je,Me,Re)}N.radialDefaultOptions=w(n),N.compose=function(ae,ue){return A(m,"Axis.Radial")&&(g(ae,"afterInit",q),g(ae,"autoLabelAlign",W),g(ae,"destroy",se),g(ae,"init",fe),g(ae,"initialAxisTranslation",re),g(ue,"afterGetLabelPosition",le),g(ue,"afterGetPosition",Se),g(c,"setOptions",ye),S(ue.prototype,"getMarkPath",ee)),ae}}(h||(h={})),h}),r(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f){let{animObject:m}=n,{composed:y}=a,{addEvent:g,defined:b,find:v,isNumber:_,merge:T,pick:k,pushUnique:w,relativeLength:E,splat:A,uniqueKey:M,wrap:S}=f;function N(){(this.pane||[]).forEach(ye=>{ye.render()})}function Y(ye){let Ee=ye.args[0].xAxis,J=ye.args[0].yAxis,ie=ye.args[0].chart;Ee&&J&&(J.gridLineInterpolation==="polygon"?(Ee.startOnTick=!0,Ee.endOnTick=!0):Ee.gridLineInterpolation==="polygon"&&ie.inverted&&(J.startOnTick=!0,J.endOnTick=!0))}function Z(){this.pane||(this.pane=[]),this.options.pane=A(this.options.pane),this.options.pane.forEach(ye=>{new s(ye,this)},this)}function K(ye){let Ee=ye.args.marker,J=this.chart.xAxis[0],ie=this.chart.yAxis[0],oe=this.chart.inverted,we=oe?ie:J,ee=oe?J:ie;if(this.chart.polar){ye.preventDefault();let ae=(Ee.attr?Ee.attr("start"):Ee.start)-we.startAngleRad,ue=Ee.attr?Ee.attr("r"):Ee.r,ve=(Ee.attr?Ee.attr("end"):Ee.end)-we.startAngleRad,Ce=Ee.attr?Ee.attr("innerR"):Ee.innerR;ye.result.x=ae+we.pos,ye.result.width=ve-ae,ye.result.y=ee.len+ee.pos-ue,ye.result.height=ue-Ce}}function B(ye){let Ee=this.chart;if(Ee.polar&&Ee.hoverPane&&Ee.hoverPane.axis){ye.preventDefault();let J=Ee.hoverPane.center,ie=Ee.mouseDownX||0,oe=Ee.mouseDownY||0,we=ye.args.chartY,ee=ye.args.chartX,ae=2*Math.PI,ue=Ee.hoverPane.axis.startAngleRad,ve=Ee.hoverPane.axis.endAngleRad,Ce=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],je={},Me="arc";if(je.x=J[0]+Ee.plotLeft,je.y=J[1]+Ee.plotTop,this.zoomHor){let Re=ue>0?ve-ue:Math.abs(ue)+Math.abs(ve),me=Math.atan2(oe-Ee.plotTop-J[1],ie-Ee.plotLeft-J[0])-ue,De=Math.atan2(we-Ee.plotTop-J[1],ee-Ee.plotLeft-J[0])-ue;je.r=J[2]/2,je.innerR=J[3]/2,me<=0&&(me+=ae),De<=0&&(De+=ae),De<me&&(De=[me,me=De][0]),Re<ae&&ue+De>ve+(ae-Re)/2&&(De=me,me=ue<=0?ue:0);let Ue=je.start=Math.max(me+ue,ue),Pe=je.end=Math.min(De+ue,ve);if(Ce.options.gridLineInterpolation==="polygon"){let Te=Ee.hoverPane.axis,Ie=Ue-Te.startAngleRad+Te.pos,Fe=Ce.getPlotLinePath({value:Ce.max}),Oe=Te.toValue(Ie),Ge=Te.toValue(Ie+(Pe-Ue));if(Oe<Te.getExtremes().min){let{min:Qe,max:at}=Te.getExtremes();Oe=at-(Qe-Oe)}if(Ge<Te.getExtremes().min){let{min:Qe,max:at}=Te.getExtremes();Ge=at-(Qe-Ge)}Ge<Oe&&(Ge=[Oe,Oe=Ge][0]),(Fe=L(Fe,Oe,Ge,Te)).push(["L",J[0]+Ee.plotLeft,Ee.plotTop+J[1]]),je.d=Fe,Me="path"}}if(this.zoomVert){let Re=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],me=Math.sqrt(Math.pow(ie-Ee.plotLeft-J[0],2)+Math.pow(oe-Ee.plotTop-J[1],2)),De=Math.sqrt(Math.pow(ee-Ee.plotLeft-J[0],2)+Math.pow(we-Ee.plotTop-J[1],2));if(De<me&&(me=[De,De=me][0]),De>J[2]/2&&(De=J[2]/2),me<J[3]/2&&(me=J[3]/2),this.zoomHor||(je.start=ue,je.end=ve),je.r=De,je.innerR=me,Re.options.gridLineInterpolation==="polygon"){let Ue=Re.toValue(Re.len+Re.pos-me),Pe=Re.toValue(Re.len+Re.pos-De),Te=Re.getPlotLinePath({value:Pe}).concat(Re.getPlotLinePath({value:Ue,reverse:!0}));je.d=Te,Me="path"}}if(this.zoomHor&&this.zoomVert&&Ce.options.gridLineInterpolation==="polygon"){let Re=Ee.hoverPane.axis,me=je.start||0,De=je.end||0,Ue=me-Re.startAngleRad+Re.pos,Pe=Re.toValue(Ue),Te=Re.toValue(Ue+(De-me));if(je.d instanceof Array){let Ie=je.d.slice(0,je.d.length/2),Fe=je.d.slice(je.d.length/2,je.d.length);Fe=[...Fe].reverse();let Oe=Ee.hoverPane.axis;Ie=L(Ie,Pe,Te,Oe),(Fe=L(Fe,Pe,Te,Oe))&&(Fe[0][0]="L"),Fe=[...Fe].reverse(),je.d=Ie.concat(Fe),Me="path"}}ye.attrs=je,ye.shapeType=Me}}function F(){let ye=this.chart;ye.polar&&(this.polar=new Se(this),ye.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function O(){if(this.chart.polar&&this.xAxis){let{xAxis:ye,yAxis:Ee}=this,J=this.chart;this.kdByAngle=J.tooltip&&J.tooltip.shared,this.kdByAngle||J.inverted?this.searchPoint=R:this.options.findNearestPointBy="xy";let ie=this.points,oe=ie.length;for(;oe--;)this.is("column")||this.is("columnrange")||this.polar.toXY(ie[oe]),J.hasParallelCoordinates||this.yAxis.reversed||(k(ie[oe].y,Number.MIN_VALUE)<Ee.min||ie[oe].x<ye.min||ie[oe].x>ye.max?(ie[oe].isNull=!0,ie[oe].plotY=NaN):ie[oe].isNull=ie[oe].isValid&&!ie[oe].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(g(this,"afterRender",function(){let we;J.polar&&this.options.clip!==!1&&(we=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:we[0],y:we[1],r:we[2]/2,innerR:we[3]/2}):this.clipCircle=function(ee,ae,ue,ve,Ce){let je=M(),Me=ee.createElement("clipPath").attr({id:je}).add(ee.defs),Re=Ce?ee.arc(ae,ue,ve,Ce,0,2*Math.PI).add(Me):ee.circle(ae,ue,ve).add(Me);return Re.id=je,Re.clipPath=Me,Re}(J.renderer,we[0],we[1],we[2]/2,we[3]/2),this.group.clip(this.clipCircle),this.setClip=a.noop)})))}}function R(ye){let Ee=this.chart,J=this.xAxis,ie=this.yAxis,oe=J.pane&&J.pane.center,we=ye.chartX-(oe&&oe[0]||0)-Ee.plotLeft,ee=ye.chartY-(oe&&oe[1]||0)-Ee.plotTop,ae=Ee.inverted?{clientX:ye.chartX-ie.pos,plotY:ye.chartY-J.pos}:{clientX:180+-180/Math.PI*Math.atan2(we,ee)};return this.searchKDTree(ae)}function L(ye,Ee,J,ie){let oe=ie.tickInterval,we=ie.tickPositions,ee=v(we,ue=>ue>=J),ae=v([...we].reverse(),ue=>ue<=Ee);return b(ee)||(ee=we[we.length-1]),b(ae)||(ae=we[0],ee+=oe,ye[0][0]="L",ye.unshift(ye[ye.length-3])),(ye=ye.slice(we.indexOf(ae),we.indexOf(ee)+1))[0][0]="M",ye}function G(ye,Ee){return v(this.pane||[],J=>J.options.id===Ee)||ye.call(this,Ee)}function V(ye,Ee,J,ie,oe,we){let ee,ae,ue,ve=this.chart,Ce=k(ie.inside,!!this.options.stacking);if(ve.polar){if(ee=Ee.rectPlotX/Math.PI*180,ve.inverted)this.forceDL=ve.isInsidePlot(Ee.plotX,Ee.plotY),Ce&&Ee.shapeArgs?(ae=Ee.shapeArgs,oe=T(oe,{x:(ue=this.yAxis.postTranslate(((ae.start||0)+(ae.end||0))/2-this.xAxis.startAngleRad,Ee.barX+Ee.pointWidth/2)).x-ve.plotLeft,y:ue.y-ve.plotTop})):Ee.tooltipPos&&(oe=T(oe,{x:Ee.tooltipPos[0],y:Ee.tooltipPos[1]})),ie.align=k(ie.align,"center"),ie.verticalAlign=k(ie.verticalAlign,"middle");else{var je;let Me,Re;(je=ie).align===null&&(Me=ee>20&&ee<160?"left":ee>200&&ee<340?"right":"center",je.align=Me),je.verticalAlign===null&&(Re=ee<45||ee>315?"bottom":ee>135&&ee<225?"top":"middle",je.verticalAlign=Re),ie=je}c.prototype.alignDataLabel.call(this,Ee,J,ie,oe,we),this.isRadialBar&&Ee.shapeArgs&&Ee.shapeArgs.start===Ee.shapeArgs.end?J.hide():J.show()}else ye.call(this,Ee,J,ie,oe,we)}function $(){let ye=this.options,Ee=ye.stacking,J=this.chart,ie=this.xAxis,oe=this.yAxis,we=oe.reversed,ee=oe.center,ae=ie.startAngleRad,ue=ie.endAngleRad-ae,ve=ye.threshold,Ce=0,je,Me,Re,me,De,Ue=0,Pe=0,Te,Ie,Fe,Oe,Ge,Qe,at,rt;if(ie.isRadial)for(Re=(je=this.points).length,me=oe.translate(oe.min),De=oe.translate(oe.max),ve=ye.threshold||0,J.inverted&&_(ve)&&b(Ce=oe.translate(ve))&&(Ce<0?Ce=0:Ce>ue&&(Ce=ue),this.translatedThreshold=Ce+ae);Re--;){if(Qe=(Me=je[Re]).barX,Ie=Me.x,Fe=Me.y,Me.shapeType="arc",J.inverted){Me.plotY=oe.translate(Fe),Ee&&oe.stacking?(Ge=oe.stacking.stacks[(Fe<0?"-":"")+this.stackKey],this.visible&&Ge&&Ge[Ie]&&!Me.isNull&&(Oe=Ge[Ie].points[this.getStackIndicator(void 0,Ie,this.index).key],Ue=oe.translate(Oe[0]),Pe=oe.translate(Oe[1]),b(Ue)&&(Ue=f.clamp(Ue,0,ue)))):(Ue=Ce,Pe=Me.plotY),Ue>Pe&&(Pe=[Ue,Ue=Pe][0]),we?Pe>me?Pe=me:Ue<De?Ue=De:(Ue>me||Pe<De)&&(Ue=Pe=ue):Ue<me?Ue=me:Pe>De?Pe=De:(Pe<me||Ue>De)&&(Ue=Pe=0),oe.min>oe.max&&(Ue=Pe=we?ue:0),Ue+=ae,Pe+=ae,ee&&(Me.barX=Qe+=ee[3]/2),at=Math.max(Qe,0),rt=Math.max(Qe+Me.pointWidth,0);let dt=ye.borderRadius,gt=E((typeof dt=="object"?dt.radius:dt)||0,rt-at);Me.shapeArgs={x:ee[0],y:ee[1],r:rt,innerR:at,start:Ue,end:Pe,borderRadius:gt},Me.opacity=Ue===Pe?0:void 0,Me.plotY=(b(this.translatedThreshold)&&(Ue<this.translatedThreshold?Ue:Pe))-ae}else Ue=Qe+ae,Me.shapeArgs=this.polar.arc(Me.yBottom,Me.plotY,Ue,Ue+Me.pointWidth),Me.shapeArgs.borderRadius=0;this.polar.toXY(Me),J.inverted?(Te=oe.postTranslate(Me.rectPlotY,Qe+Me.pointWidth/2),Me.tooltipPos=[Te.x-J.plotLeft,Te.y-J.plotTop]):Me.tooltipPos=[Me.plotX,Me.plotY],ee&&(Me.ttBelow=Me.plotY>ee[1])}}function q(ye,Ee){let J,ie,oe=this;if(this.chart.polar){Ee=Ee||this.points;for(let ee=0;ee<Ee.length;ee++)if(!Ee[ee].isNull){J=ee;break}this.options.connectEnds!==!1&&J!==void 0&&(this.connectEnds=!0,Ee.splice(Ee.length,0,Ee[J]),ie=!0),Ee.forEach(ee=>{ee.polarPlotY===void 0&&oe.polar.toXY(ee)})}let we=ye.apply(this,[].slice.call(arguments,1));return ie&&Ee.pop(),we}function W(ye,Ee){let J=this.chart,ie={xAxis:[],yAxis:[]};return J.polar?J.axes.forEach(oe=>{if(oe.coll==="colorAxis")return;let we=oe.isXAxis,ee=oe.center,ae=Ee.chartX-ee[0]-J.plotLeft,ue=Ee.chartY-ee[1]-J.plotTop;ie[we?"xAxis":"yAxis"].push({axis:oe,value:oe.translate(we?Math.PI-Math.atan2(ae,ue):Math.sqrt(Math.pow(ae,2)+Math.pow(ue,2)),!0)})}):ie=ye.call(this,Ee),ie}function se(ye,Ee){this.chart.polar||ye.call(this,Ee)}function fe(ye,Ee){let J=this,ie=this.chart,oe=this.group,we=this.markerGroup,ee=this.xAxis&&this.xAxis.center,ae=ie.plotLeft,ue=ie.plotTop,ve=this.options.animation,Ce,je,Me,Re,me,De;ie.polar?J.isRadialBar?Ee||(J.startAngleRad=k(J.translatedThreshold,J.xAxis.startAngleRad),a.seriesTypes.pie.prototype.animate.call(J,Ee)):(ve=m(ve),J.is("column")?Ee||(je=ee[3]/2,J.points.forEach(Ue=>{Me=Ue.graphic,me=(Re=Ue.shapeArgs)&&Re.r,De=Re&&Re.innerR,Me&&Re&&(Me.attr({r:je,innerR:je}),Me.animate({r:me,innerR:De},J.options.animation))})):Ee?(Ce={translateX:ee[0]+ae,translateY:ee[1]+ue,scaleX:.001,scaleY:.001},oe.attr(Ce),we&&we.attr(Ce)):(Ce={translateX:ae,translateY:ue,scaleX:1,scaleY:1},oe.animate(Ce,ve),we&&we.animate(Ce,ve))):ye.call(this,Ee)}function re(ye,Ee,J,ie){let oe,we;if(this.chart.polar)if(ie){let ee=(we=function ue(ve,Ce,je,Me){let Re,me,De,Ue,Pe,Te,Ie=Me?1:0,Fe=(Re=Ce>=0&&Ce<=ve.length-1?Ce:Ce<0?ve.length-1+Ce:0)-1<0?ve.length-(1+Ie):Re-1,Oe=Re+1>ve.length-1?Ie:Re+1,Ge=ve[Fe],Qe=ve[Oe],at=Ge.plotX,rt=Ge.plotY,dt=Qe.plotX,gt=Qe.plotY,Tt=ve[Re].plotX,Nt=ve[Re].plotY;me=(1.5*Tt+at)/2.5,De=(1.5*Nt+rt)/2.5,Ue=(1.5*Tt+dt)/2.5,Pe=(1.5*Nt+gt)/2.5;let mt=Math.sqrt(Math.pow(me-Tt,2)+Math.pow(De-Nt,2)),St=Math.sqrt(Math.pow(Ue-Tt,2)+Math.pow(Pe-Nt,2)),kt=Math.atan2(De-Nt,me-Tt);Te=Math.PI/2+(kt+Math.atan2(Pe-Nt,Ue-Tt))/2,Math.abs(kt-Te)>Math.PI/2&&(Te-=Math.PI),me=Tt+Math.cos(Te)*mt,De=Nt+Math.sin(Te)*mt;let ii={rightContX:Ue=Tt+Math.cos(Math.PI+Te)*St,rightContY:Pe=Nt+Math.sin(Math.PI+Te)*St,leftContX:me,leftContY:De,plotX:Tt,plotY:Nt};return je&&(ii.prevPointCont=ue(ve,Fe,!1,Me)),ii}(Ee,ie,!0,this.connectEnds)).prevPointCont&&we.prevPointCont.rightContX,ae=we.prevPointCont&&we.prevPointCont.rightContY;oe=["C",_(ee)?ee:we.plotX,_(ae)?ae:we.plotY,_(we.leftContX)?we.leftContX:we.plotX,_(we.leftContY)?we.leftContY:we.plotY,we.plotX,we.plotY]}else oe=["M",J.plotX,J.plotY];else oe=ye.call(this,Ee,J,ie);return oe}function le(ye,Ee,J=this.plotY){if(!this.destroyed){let{plotX:ie,series:oe}=this,{chart:we}=oe;return we.polar&&_(ie)&&_(J)?[ie+(Ee?we.plotLeft:0),J+(Ee?we.plotTop:0)]:ye.call(this,Ee,J)}}class Se{static compose(Ee,J,ie,oe,we,ee,ae,ue,ve,Ce){if(s.compose(J,ie),h.compose(Ee,we),w(y,"Polar")){let je=J.prototype,Me=ee.prototype,Re=ie.prototype,me=oe.prototype;if(g(J,"afterDrawChartBox",N),g(J,"getAxes",Z),g(J,"init",Y),S(je,"get",G),S(Re,"getCoordinates",W),S(Re,"pinch",se),g(ie,"getSelectionMarkerAttrs",B),g(ie,"getSelectionBox",K),g(oe,"afterInit",F),g(oe,"afterTranslate",O,{order:2}),g(oe,"afterColumnTranslate",$,{order:4}),S(me,"animate",fe),S(Me,"pos",le),ue){let De=ue.prototype;S(De,"alignDataLabel",V),S(De,"animate",fe)}if(ve&&S(ve.prototype,"getGraphPath",q),Ce){let De=Ce.prototype;S(De,"getPointSpline",re),ae&&(ae.prototype.getPointSpline=De.getPointSpline)}}}constructor(Ee){this.series=Ee}arc(Ee,J,ie,oe){let we=this.series,ee=we.xAxis.center,ae=we.yAxis.len,ue=ee[3]/2,ve=ae-J+ue,Ce=ae-k(Ee,ae)+ue;return we.yAxis.reversed&&(ve<0&&(ve=ue),Ce<0&&(Ce=ue)),{x:ee[0],y:ee[1],r:ve,innerR:Ce,start:ie,end:oe}}toXY(Ee){let J=this.series,ie=J.chart,oe=J.xAxis,we=J.yAxis,ee=Ee.plotX,ae=ie.inverted,ue=Ee.y,ve=Ee.plotY,Ce=ae?ee:we.len-ve,je;if(ae&&J&&!J.isRadialBar&&(Ee.plotY=ve=_(ue)?we.translate(ue):0),Ee.rectPlotX=ee,Ee.rectPlotY=ve,we.center&&(Ce+=we.center[3]/2),_(ve)){let Me=ae?we.postTranslate(ve,Ce):oe.postTranslate(ee,Ce);Ee.plotX=Ee.polarPlotX=Me.x-ie.plotLeft,Ee.plotY=Ee.polarPlotY=Me.y-ie.plotTop}J.kdByAngle?((je=(ee/Math.PI*180+oe.pane.options.startAngle)%360)<0&&(je+=360),Ee.clientX=je):Ee.clientX=Ee.plotX}}return Se}),r(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{composed:h}=n,{addEvent:f,objectEach:m,pushUnique:y}=c;return function(g){function b(){let w=this.waterfall.stacks;w&&(w.changed=!1,delete w.alreadyChanged)}function v(){let w=this.options.stackLabels;w&&w.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function _(){this.waterfall||(this.waterfall=new k(this))}function T(){let w=this.axes;for(let E of this.series)if(E.options.stacking){for(let A of w)A.isXAxis||(A.waterfall.stacks.changed=!0);break}}g.compose=function(w,E){y(h,"Axis.Waterfall")&&(f(w,"init",_),f(w,"afterBuildStacks",b),f(w,"afterRender",v),f(E,"beforeRedraw",T))};class k{constructor(E){this.axis=E,this.stacks={changed:!1}}renderStackTotals(){let E=this.axis,A=E.waterfall.stacks,M=E.stacking&&E.stacking.stackTotalGroup,S=new a(E,E.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=S,M&&m(A,N=>{m(N,(Y,Z)=>{S.total=Y.stackTotal,S.x=+Z,Y.label&&(S.label=Y.label),a.prototype.render.call(S,M),Y.label=S.label,delete S.label})}),S.total=null}}g.Composition=k}(s||(s={})),s}),r(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c){let{isNumber:s}=c;class h extends n.prototype.pointClass{getClassName(){let m=a.prototype.getClassName.call(this);return this.isSum?m+=" highcharts-sum":this.isIntermediateSum&&(m+=" highcharts-intermediate-sum"),m}isValid(){return s(this.y)||this.isSum||!!this.isIntermediateSum}}return h}),r(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),r(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(n,a,c,s,h){let{column:f,line:m}=n.seriesTypes,{addEvent:y,arrayMax:g,arrayMin:b,correctFloat:v,crisp:_,extend:T,isNumber:k,merge:w,objectEach:E,pick:A}=a;function M(N,Y){return Object.hasOwnProperty.call(N,Y)}class S extends f{generatePoints(){f.prototype.generatePoints.apply(this);for(let Y=0,Z=this.points.length;Y<Z;Y++){let K=this.points[Y],B=this.processedYData[Y];k(B)&&(K.isIntermediateSum||K.isSum)&&(K.y=v(B))}}processData(Y){let Z,K,B,F,O,R,L=this.options,G=this.yData,V=L.data,$=G.length,q=L.threshold||0;B=K=F=O=0;for(let W=0;W<$;W++)R=G[W],Z=V&&V[W]?V[W]:{},R==="sum"||Z.isSum?G[W]=v(B):R==="intermediateSum"||Z.isIntermediateSum?(G[W]=v(K),K=0):(B+=R,K+=R),F=Math.min(B,F),O=Math.max(B,O);super.processData.call(this,Y),L.stacking||(this.dataMin=F+q,this.dataMax=O)}toYData(Y){return Y.isSum?"sum":Y.isIntermediateSum?"intermediateSum":Y.y}updateParallelArrays(Y,Z){super.updateParallelArrays.call(this,Y,Z),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(Y,Z){let K=this.options.upColor;K&&!Y.options.color&&k(Y.y)&&(Y.color=Y.y>0?K:void 0);let B=f.prototype.pointAttribs.call(this,Y,Z);return delete B.dashstyle,B}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let Y=this.data.filter(V=>k(V.y)),Z=this.yAxis,K=Y.length,B=((G=this.graph)==null?void 0:G.strokeWidth())||0,F=this.xAxis.reversed,O=this.yAxis.reversed,R=this.options.stacking,L=[];for(let V=1;V<K;V++){if(!(this.options.connectNulls||k(this.data[Y[V].index-1].y)))continue;let $=Y[V].box,q=Y[V-1],W=q.y||0,se=Y[V-1].box;if(!$||!se)continue;let fe=Z.waterfall.stacks[this.stackKey],re=W>0?-se.height:0;if(fe&&se&&$){let le,Se=fe[V-1];if(R){let ye=Se.connectorThreshold;le=_(Z.translate(ye,!1,!0,!1,!0)+(O?re:0),B)}else le=_(se.y+(q.minPointLengthOffset||0),B);L.push(["M",(se.x||0)+(F?0:se.width||0),le],["L",($.x||0)+(F&&$.width||0),le])}if(se&&L.length&&(!R&&W<0&&!O||W>0&&O)){let le=L[L.length-2];le&&typeof le[2]=="number"&&(le[2]+=se.height||0);let Se=L[L.length-1];Se&&typeof Se[2]=="number"&&(Se[2]+=se.height||0)}}return L}drawGraph(){m.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(Y){var oe;let Z=this.options,K=(oe=Y.waterfall)==null?void 0:oe.stacks,B=Z.threshold||0,F=this.stackKey,O=this.xData,R=O.length,L=B,G=L,V,$=0,q=0,W=0,se,fe,re,le,Se,ye,Ee,J,ie=(we,ee,ae,ue)=>{if(V){if(se)for(;ae<se;ae++)V.stackState[ae]+=ue;else V.stackState[0]=we,se=V.stackState.length;V.stackState.push(V.stackState[se-1]+ee)}};if(Y.stacking&&K&&this.reserveSpace()){J=K.changed,(Ee=K.alreadyChanged)&&0>Ee.indexOf(F)&&(J=!0),K[F]||(K[F]={});let we=K[F];if(we)for(let ee=0;ee<R;ee++)(!we[ye=O[ee]]||J)&&(we[ye]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:J&&we[ye]?we[ye].label:void 0}),V=we[ye],(Se=this.yData[ee])>=0?V.posTotal+=Se:V.negTotal+=Se,le=Z.data[ee],fe=V.absolutePos=V.posTotal,re=V.absoluteNeg=V.negTotal,V.stackTotal=fe+re,se=V.stackState.length,le&&le.isIntermediateSum?(ie(W,q,0,W),W=q,q=B,L^=G,G^=L,L^=G):le&&le.isSum?(ie(B,$,se,0),L=B):(ie(L,Se,0,$),le&&($+=Se,q+=Se)),V.stateIndex++,V.threshold=L,L+=V.stackTotal;K.changed=!1,K.alreadyChanged||(K.alreadyChanged=[]),K.alreadyChanged.push(F)}}getExtremes(){let Y,Z,K,B=this.options.stacking;return B?(Y=this.yAxis.waterfall.stacks,Z=this.stackedYNeg=[],K=this.stackedYPos=[],B==="overlap"?E(Y[this.stackKey],function(F){Z.push(b(F.stackState)),K.push(g(F.stackState))}):E(Y[this.stackKey],function(F){Z.push(F.negTotal+F.threshold),K.push(F.posTotal+F.threshold)}),{dataMin:b(Z),dataMax:g(K)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return S.defaultOptions=w(f.defaultOptions,h),S.compose=c.compose,T(S.prototype,{pointValKey:"y",showLine:!0,pointClass:s}),y(S,"afterColumnTranslate",function(){let{options:N,points:Y,yAxis:Z}=this,K=A(N.minPointLength,5),B=K/2,F=N.threshold||0,O=N.stacking,R=Z.waterfall.stacks[this.stackKey],L=F,G=F,V,$,q,W;for(let se=0;se<Y.length;se++){let fe=Y[se],re=this.processedYData[se],le=T({x:0,y:0,width:0,height:0},fe.shapeArgs||{});fe.box=le;let Se=[0,re],ye=fe.y||0;if(O){if(R){let ie=R[se];O==="overlap"?($=ie.stackState[ie.stateIndex--],V=ye>=0?$:$-ye,M(ie,"absolutePos")&&delete ie.absolutePos,M(ie,"absoluteNeg")&&delete ie.absoluteNeg):(ye>=0?($=ie.threshold+ie.posTotal,ie.posTotal-=ye,V=$):($=ie.threshold+ie.negTotal,ie.negTotal-=ye,V=$-ye),!ie.posTotal&&k(ie.absolutePos)&&M(ie,"absolutePos")&&(ie.posTotal=ie.absolutePos,delete ie.absolutePos),!ie.negTotal&&k(ie.absoluteNeg)&&M(ie,"absoluteNeg")&&(ie.negTotal=ie.absoluteNeg,delete ie.absoluteNeg)),fe.isSum||(ie.connectorThreshold=ie.threshold+ie.stackTotal),Z.reversed?(q=ye>=0?V-ye:V+ye,W=V):(q=V,W=V-ye),fe.below=q<=F,le.y=Z.translate(q,!1,!0,!1,!0),le.height=Math.abs(le.y-Z.translate(W,!1,!0,!1,!0));let oe=Z.waterfall.dummyStackItem;oe&&(oe.x=se,oe.label=R[se].label,oe.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[se],this.stackedYPos[se],void 0,this.xAxis))}}else V=Math.max(G,G+ye)+Se[0],le.y=Z.translate(V,!1,!0,!1,!0),fe.isSum?(le.y=Z.translate(Se[1],!1,!0,!1,!0),le.height=Math.min(Z.translate(Se[0],!1,!0,!1,!0),Z.len)-le.y,fe.below=Se[1]<=F):fe.isIntermediateSum?(ye>=0?(q=Se[1]+L,W=L):(q=L,W=Se[1]+L),Z.reversed&&(q^=W,W^=q,q^=W),le.y=Z.translate(q,!1,!0,!1,!0),le.height=Math.abs(le.y-Math.min(Z.translate(W,!1,!0,!1,!0),Z.len)),L+=Se[1],fe.below=q<=F):(le.height=re>0?Z.translate(G,!1,!0,!1,!0)-le.y:Z.translate(G,!1,!0,!1,!0)-Z.translate(G-re,!1,!0,!1,!0),G+=re,fe.below=G<F),le.height<0&&(le.y+=le.height,le.height*=-1);fe.plotY=le.y,fe.yBottom=le.y+le.height,le.height<=K&&!fe.isNull?(le.height=K,le.y-=B,fe.yBottom=le.y+le.height,fe.plotY=le.y,ye<0?fe.minPointLengthOffset=-B:fe.minPointLengthOffset=B):(fe.isNull&&(le.width=0),fe.minPointLengthOffset=0);let Ee=fe.plotY+(fe.negative?le.height:0);fe.below&&(fe.plotY+=le.height),fe.tooltipPos&&(this.chart.inverted?fe.tooltipPos[0]=Z.len-Ee:fe.tooltipPos[1]=Ee),fe.isInside=this.isPointInside(fe);let J=_(fe.yBottom,this.borderWidth);le.y=_(le.y,this.borderWidth),le.height=J-le.y,w(!0,fe.shapeArgs,le)}},{order:2}),n.registerSeriesType("waterfall",S),S}),r(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(n,a,c,s,h,f,m,y){return n.RadialAxis=m,s.compose(n.Axis,n.Chart,n.Legend),h.compose(n.Axis,n.Chart,n.Legend),c.compose(n.Chart,n.Pointer),f.compose(n.Axis,n.Chart,n.Pointer,n.Series,n.Tick,n.Point,a.seriesTypes.areasplinerange,a.seriesTypes.column,a.seriesTypes.line,a.seriesTypes.spline),y.compose(n.Axis,n.Chart),n})})})(nI);var Dq=nI.exports;const Rq=Cp(Dq);var sI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var n;return function(a){a.compose=function(s){return s.navigation||(s.navigation=new c(s)),s};class c{constructor(h){this.updates=[],this.chart=h}addUpdate(h){this.chart.navigation.updates.push(h)}update(h,f){this.updates.forEach(m=>{m.call(this.chart,h,f)})}}a.Additions=c}(n||(n={})),n}),r(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(n){let{isTouchDevice:a}=n;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:a?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),r(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var n;return function(a){let c=[];function s(f,m,y,g){return[["M",f,m+2.5],["L",f+y,m+2.5],["M",f,m+g/2+.5],["L",f+y,m+g/2+.5],["M",f,m+g-1.5],["L",f+y,m+g-1.5]]}function h(f,m,y,g){let b=g/3-2;return[].concat(this.circle(y-b,m,b,b),this.circle(y-b,m+b+4,b,b),this.circle(y-b,m+2*(b+4),b,b))}a.compose=function(f){if(c.indexOf(f)===-1){c.push(f);let m=f.prototype.symbols;m.menu=s,m.menuball=h.bind(m)}}}(n||(n={})),n}),r(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{composed:s}=a,{addEvent:h,fireEvent:f,pushUnique:m}=c;function y(){this.fullscreen=new g(this)}class g{static compose(v){m(s,"Fullscreen")&&h(v,"beforeRender",y)}constructor(v){this.chart=v,this.isOpen=!1;let _=v.renderTo;!this.browserProps&&(typeof _.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:_.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:_.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:_.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let v=this,_=v.chart,T=_.options.chart;f(_,"fullscreenClose",null,function(){v.isOpen&&v.browserProps&&_.container.ownerDocument instanceof Document&&_.container.ownerDocument[v.browserProps.exitFullscreen](),v.unbindFullscreenEvent&&(v.unbindFullscreenEvent=v.unbindFullscreenEvent()),_.setSize(v.origWidth,v.origHeight,!1),v.origWidth=void 0,v.origHeight=void 0,T.width=v.origWidthOption,T.height=v.origHeightOption,v.origWidthOption=void 0,v.origHeightOption=void 0,v.isOpen=!1,v.setButtonText()})}open(){let v=this,_=v.chart,T=_.options.chart;f(_,"fullscreenOpen",null,function(){if(T&&(v.origWidthOption=T.width,v.origHeightOption=T.height),v.origWidth=_.chartWidth,v.origHeight=_.chartHeight,v.browserProps){let k=h(_.container.ownerDocument,v.browserProps.fullscreenChange,function(){v.isOpen?(v.isOpen=!1,v.close()):(_.setSize(null,null,!1),v.isOpen=!0,v.setButtonText())}),w=h(_,"destroy",k);v.unbindFullscreenEvent=()=>{k(),w()};let E=_.renderTo[v.browserProps.requestFullscreen]();E&&E.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let v=this.chart,_=v.exportDivElements,T=v.options.exporting,k=T&&T.buttons&&T.buttons.contextButton.menuItems,w=v.options.lang;if(T&&T.menuItemDefinitions&&w&&w.exitFullscreen&&w.viewFullscreen&&k&&_){let E=_[k.indexOf("viewFullscreen")];E&&n.setElementHTML(E,this.isOpen?w.exitFullscreen:T.menuItemDefinitions.viewFullscreen.text||w.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return g}),r(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{win:c}=n,{discardElement:s,objectEach:h}=a,f={ajax:function(m){let y={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},g=new XMLHttpRequest;function b(v,_){m.error&&m.error(v,_)}if(!m.url)return!1;g.open((m.type||"get").toUpperCase(),m.url,!0),m.headers&&m.headers["Content-Type"]||g.setRequestHeader("Content-Type",y[m.dataType||"json"]||y.text),h(m.headers,function(v,_){g.setRequestHeader(_,v)}),m.responseType&&(g.responseType=m.responseType),g.onreadystatechange=function(){let v;if(g.readyState===4){if(g.status===200){if(m.responseType!=="blob"&&(v=g.responseText,m.dataType==="json"))try{v=JSON.parse(v)}catch(_){if(_ instanceof Error)return b(g,_)}return m.success&&m.success(v,g)}b(g,g.responseText)}},m.data&&typeof m.data!="string"&&(m.data=JSON.stringify(m.data)),g.send(m.data)},getJSON:function(m,y){f.ajax({url:m,success:y,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(m,y,g){let b=new c.FormData;h(y,function(T,k){b.append(k,T)}),b.append("b64","true");let{filename:v,type:_}=y;return c.fetch(m,{method:"POST",body:b,...g}).then(T=>{T.ok&&T.text().then(k=>{let w=document.createElement("a");w.href=`data:${_};base64,${k}`,w.download=v,w.click(),s(w)})})}};return f}),r(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,f,m,y,g,b){var v;let{defaultOptions:_}=s,{doc:T,SVG_NS:k,win:w}=y,{addEvent:E,css:A,createElement:M,discardElement:S,extend:N,find:Y,fireEvent:Z,isObject:K,merge:B,objectEach:F,pick:O,removeEvent:R,uniqueKey:L}=b;return function(G){let V,$=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],q=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let W=["clipPath","defs","desc"];function se(Me){let Re,me,De=this,Ue=De.renderer,Pe=B(De.options.navigation.buttonOptions,Me),Te=Pe.onclick,Ie=Pe.menuItems,Fe=Pe.symbolSize||12;if(De.btnCount||(De.btnCount=0),De.exportDivElements||(De.exportDivElements=[],De.exportSVGElements=[]),Pe.enabled===!1||!Pe.theme)return;let Oe=De.styledMode?{}:Pe.theme;Te?me=function(Qe){Qe&&Qe.stopPropagation(),Te.call(De,Qe)}:Ie&&(me=function(Qe){Qe&&Qe.stopPropagation(),De.contextMenu(Ge.menuClassName,Ie,Ge.translateX||0,Ge.translateY||0,Ge.width||0,Ge.height||0,Ge),Ge.setState(2)}),Pe.text&&Pe.symbol?Oe.paddingLeft=O(Oe.paddingLeft,30):Pe.text||N(Oe,{width:Pe.width,height:Pe.height,padding:0});let Ge=Ue.button(Pe.text,0,0,me,Oe,void 0,void 0,void 0,void 0,Pe.useHTML).addClass(Me.className).attr({title:O(De.options.lang[Pe._titleKey||Pe.titleKey],"")});Ge.menuClassName=Me.menuClassName||"highcharts-menu-"+De.btnCount++,Pe.symbol&&(Re=Ue.symbol(Pe.symbol,Math.round((Pe.symbolX||0)-Fe/2),Math.round((Pe.symbolY||0)-Fe/2),Fe,Fe,{width:Fe,height:Fe}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(Ge),De.styledMode||Re.attr({stroke:Pe.symbolStroke,fill:Pe.symbolFill,"stroke-width":Pe.symbolStrokeWidth||1})),Ge.add(De.exportingGroup).align(N(Pe,{width:Ge.width,x:O(Pe.x,De.buttonOffset)}),!0,"spacingBox"),De.buttonOffset+=((Ge.width||0)+Pe.buttonSpacing)*(Pe.align==="right"?-1:1),De.exportSVGElements.push(Ge,Re)}function fe(){if(!this.printReverseInfo)return;let{childNodes:Me,origDisplay:Re,resetParams:me}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Me,function(De,Ue){De.nodeType===1&&(De.style.display=Re[Ue]||"")}),this.isPrinting=!1,me&&this.setSize.apply(this,me),delete this.printReverseInfo,V=void 0,Z(this,"afterPrint")}function re(){var De;let Me=T.body,Re=this.options.exporting.printMaxWidth,me={childNodes:Me.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(De=this.pointer)==null||De.reset(void 0,0),Z(this,"beforePrint"),Re&&this.chartWidth>Re&&(me.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Re,void 0,!1)),[].forEach.call(me.childNodes,function(Ue,Pe){Ue.nodeType===1&&(me.origDisplay[Pe]=Ue.style.display,Ue.style.display="none")}),this.moveContainers(Me),this.printReverseInfo=me}function le(Me){Me.renderExporting(),E(Me,"redraw",Me.renderExporting),E(Me,"destroy",Me.destroyExport)}function Se(Me,Re,me,De,Ue,Pe,Te){var Tt,Nt;let Ie=this,Fe=Ie.options.navigation,Oe=Ie.chartWidth,Ge=Ie.chartHeight,Qe="cache-"+Me,at=Math.max(Ue,Pe),rt,dt=Ie[Qe];dt||(Ie.exportContextMenu=Ie[Qe]=dt=M("div",{className:Me},{position:"absolute",zIndex:1e3,padding:at+"px",pointerEvents:"auto",...Ie.renderer.style},((Tt=Ie.scrollablePlotArea)==null?void 0:Tt.fixedDiv)||Ie.container),rt=M("ul",{className:"highcharts-menu"},Ie.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),Ie.styledMode||A(rt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},Fe.menuStyle)),dt.hideMenu=function(){A(dt,{display:"none"}),Te&&Te.setState(0),Ie.openMenu=!1,A(Ie.renderTo,{overflow:"hidden"}),A(Ie.container,{overflow:"hidden"}),b.clearTimeout(dt.hideTimer),Z(Ie,"exportMenuHidden")},Ie.exportEvents.push(E(dt,"mouseleave",function(){dt.hideTimer=w.setTimeout(dt.hideMenu,500)}),E(dt,"mouseenter",function(){b.clearTimeout(dt.hideTimer)}),E(T,"mouseup",function(mt){var St;(St=Ie.pointer)!=null&&St.inClass(mt.target,Me)||dt.hideMenu()}),E(dt,"click",function(){Ie.openMenu&&dt.hideMenu()})),Re.forEach(function(mt){if(typeof mt=="string"&&(mt=Ie.options.exporting.menuItemDefinitions[mt]),K(mt,!0)){let St;mt.separator?St=M("hr",void 0,void 0,rt):(mt.textKey==="viewData"&&Ie.isDataTableVisible&&(mt.textKey="hideData"),St=M("li",{className:"highcharts-menu-item",onclick:function(kt){kt&&kt.stopPropagation(),dt.hideMenu(),typeof mt!="string"&&mt.onclick&&mt.onclick.apply(Ie,arguments)}},void 0,rt),n.setElementHTML(St,mt.text||Ie.options.lang[mt.textKey]),Ie.styledMode||(St.onmouseover=function(){A(this,Fe.menuItemHoverStyle)},St.onmouseout=function(){A(this,Fe.menuItemStyle)},A(St,N({cursor:"pointer"},Fe.menuItemStyle||{})))),Ie.exportDivElements.push(St)}}),Ie.exportDivElements.push(rt,dt),Ie.exportMenuWidth=dt.offsetWidth,Ie.exportMenuHeight=dt.offsetHeight);let gt={display:"block"};me+(Ie.exportMenuWidth||0)>Oe?gt.right=Oe-me-Ue-at+"px":gt.left=me-at+"px",De+Pe+(Ie.exportMenuHeight||0)>Ge&&((Nt=Te.alignOptions)==null?void 0:Nt.verticalAlign)!=="top"?gt.bottom=Ge-De-at+"px":gt.top=De+Pe-at+"px",A(dt,gt),A(Ie.renderTo,{overflow:""}),A(Ie.container,{overflow:""}),Ie.openMenu=!0,Z(Ie,"exportMenuShown")}function ye(Me){let Re,me=Me?Me.target:this,De=me.exportSVGElements,Ue=me.exportDivElements,Pe=me.exportEvents;De&&(De.forEach((Te,Ie)=>{Te&&(Te.onclick=Te.ontouchstart=null,me[Re="cache-"+Te.menuClassName]&&delete me[Re],De[Ie]=Te.destroy())}),De.length=0),me.exportingGroup&&(me.exportingGroup.destroy(),delete me.exportingGroup),Ue&&(Ue.forEach(function(Te,Ie){Te&&(b.clearTimeout(Te.hideTimer),R(Te,"mouseleave"),Ue[Ie]=Te.onmouseout=Te.onmouseover=Te.ontouchstart=Te.onclick=null,S(Te))}),Ue.length=0),Pe&&(Pe.forEach(function(Te){Te()}),Pe.length=0)}function Ee(Me,Re){let me=this.getSVGForExport(Me,Re);Me=B(this.options.exporting,Me),g.post(Me.url,{filename:Me.filename?Me.filename.replace(/\//g,"-"):this.getFilename(),type:Me.type,width:Me.width,scale:Me.scale,svg:me},Me.fetchOptions)}function J(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function ie(){let Me=this.userOptions.title&&this.userOptions.title.text,Re=this.options.exporting.filename;return Re?Re.replace(/\//g,"-"):(typeof Me=="string"&&(Re=Me.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Re||Re.length<5)&&(Re="chart"),Re)}function oe(Me){let Re,me,De=B(this.options,Me);De.plotOptions=B(this.userOptions.plotOptions,Me&&Me.plotOptions),De.time=B(this.userOptions.time,Me&&Me.time);let Ue=M("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},T.body),Pe=this.renderTo.style.width,Te=this.renderTo.style.height,Ie=De.exporting.sourceWidth||De.chart.width||/px$/.test(Pe)&&parseInt(Pe,10)||(De.isGantt?800:600),Fe=De.exporting.sourceHeight||De.chart.height||/px$/.test(Te)&&parseInt(Te,10)||400;N(De.chart,{animation:!1,renderTo:Ue,forExport:!0,renderer:"SVGRenderer",width:Ie,height:Fe}),De.exporting.enabled=!1,delete De.data,De.series=[],this.series.forEach(function(Qe){(me=B(Qe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Qe.visible})).isInternal||De.series.push(me)});let Oe={};this.axes.forEach(function(Qe){Qe.userOptions.internalKey||(Qe.userOptions.internalKey=L()),Qe.options.isInternal||(Oe[Qe.coll]||(Oe[Qe.coll]=!0,De[Qe.coll]=[]),De[Qe.coll].push(B(Qe.userOptions,{visible:Qe.visible,type:Qe.type,uniqueNames:Qe.uniqueNames})))}),De.colorAxis=this.userOptions.colorAxis;let Ge=new this.constructor(De,this.callback);return Me&&["xAxis","yAxis","series"].forEach(function(Qe){let at={};Me[Qe]&&(at[Qe]=Me[Qe],Ge.update(at))}),this.axes.forEach(function(Qe){let at=Y(Ge.axes,function(Tt){return Tt.options.internalKey===Qe.userOptions.internalKey}),rt=Qe.getExtremes(),dt=rt.userMin,gt=rt.userMax;at&&(dt!==void 0&&dt!==at.min||gt!==void 0&&gt!==at.max)&&at.setExtremes(dt,gt,!0,!1)}),Re=Ge.getChartHTML(),Z(this,"getSVG",{chartCopy:Ge}),Re=this.sanitizeSVG(Re,De),De=null,Ge.destroy(),S(Ue),Re}function we(Me,Re){let me=this.options.exporting;return this.getSVG(B({chart:{borderRadius:0}},me.chartOptions,Re,{exporting:{sourceWidth:Me&&Me.sourceWidth||me.sourceWidth,sourceHeight:Me&&Me.sourceHeight||me.sourceHeight}}))}function ee(){let Me,Re=G.inlineAllowlist,me={},De=T.createElement("iframe");A(De,{width:"1px",height:"1px",visibility:"hidden"}),T.body.appendChild(De);let Ue=De.contentWindow&&De.contentWindow.document;Ue&&Ue.body.appendChild(Ue.createElementNS(k,"svg")),function Pe(Te){let Ie,Fe,Oe,Ge,Qe,at,rt={};if(Ue&&Te.nodeType===1&&W.indexOf(Te.nodeName)===-1){if(Ie=w.getComputedStyle(Te,null),Fe=Te.nodeName==="svg"?{}:w.getComputedStyle(Te.parentNode,null),!me[Te.nodeName]){Me=Ue.getElementsByTagName("svg")[0],Oe=Ue.createElementNS(Te.namespaceURI,Te.nodeName),Me.appendChild(Oe);let dt=w.getComputedStyle(Oe,null),gt={};for(let Tt in dt)Tt.length<1e3&&typeof dt[Tt]=="string"&&!/^\d+$/.test(Tt)&&(gt[Tt]=dt[Tt]);me[Te.nodeName]=gt,Te.nodeName==="text"&&delete me.text.fill,Me.removeChild(Oe)}for(let dt in Ie)(y.isFirefox||y.isMS||y.isSafari||Object.hasOwnProperty.call(Ie,dt))&&function(gt,Tt){if(Ge=Qe=!1,Re.length){for(at=Re.length;at--&&!Qe;)Qe=Re[at].test(Tt);Ge=!Qe}for(Tt==="transform"&&gt==="none"&&(Ge=!0),at=$.length;at--&&!Ge;){if(Tt.length>1e3)throw Error("Input too long");Ge=$[at].test(Tt)||typeof gt=="function"}!Ge&&(Fe[Tt]!==gt||Te.nodeName==="svg")&&me[Te.nodeName][Tt]!==gt&&(q&&q.indexOf(Tt)===-1?rt[Tt]=gt:gt&&Te.setAttribute(Tt.replace(/[A-Z]/g,function(Nt){return"-"+Nt.toLowerCase()}),gt))}(Ie[dt],dt);if(A(Te,rt),Te.nodeName==="svg"&&Te.setAttribute("stroke-width","1px"),Te.nodeName==="text")return;[].forEach.call(Te.children||Te.childNodes,Pe)}}(this.container.querySelector("svg")),Me.parentNode.removeChild(Me),De.parentNode.removeChild(De)}function ae(Me){let{scrollablePlotArea:Re}=this;(Re?[Re.fixedDiv,Re.scrollingContainer]:[this.container]).forEach(function(me){Me.appendChild(me)})}function ue(){let Me=this,Re=(me,De,Ue)=>{Me.isDirtyExporting=!0,B(!0,Me.options[me],De),O(Ue,!0)&&Me.redraw()};Me.exporting={update:function(me,De){Re("exporting",me,De)}},c.compose(Me).navigation.addUpdate((me,De)=>{Re("navigation",me,De)})}function ve(){let Me=this;Me.isPrinting||(V=Me,y.isSafari||Me.beforePrint(),setTimeout(()=>{w.focus(),w.print(),y.isSafari||setTimeout(()=>{Me.afterPrint()},1e3)},1))}function Ce(){let Me=this,Re=Me.options.exporting,me=Re.buttons,De=Me.isDirtyExporting||!Me.exportSVGElements;Me.buttonOffset=0,Me.isDirtyExporting&&Me.destroyExport(),De&&Re.enabled!==!1&&(Me.exportEvents=[],Me.exportingGroup=Me.exportingGroup||Me.renderer.g("exporting-group").attr({zIndex:3}).add(),F(me,function(Ue){Me.addButton(Ue)}),Me.isDirtyExporting=!1)}function je(Me,Re){let me=Me.indexOf("</svg>")+6,De=Me.substr(me);return Me=Me.substr(0,me),Re&&Re.exporting&&Re.exporting.allowHTML&&De&&(De='<foreignObject x="0" y="0" width="'+Re.chart.width+'" height="'+Re.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+De.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Me=Me.replace("</svg>",De+"</svg>")),Me=Me.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"")}G.compose=function(Me,Re){f.compose(Re),m.compose(Me);let me=Me.prototype;me.exportChart||(me.afterPrint=fe,me.exportChart=Ee,me.inlineStyles=ee,me.print=ve,me.sanitizeSVG=je,me.getChartHTML=J,me.getSVG=oe,me.getSVGForExport=we,me.getFilename=ie,me.moveContainers=ae,me.beforePrint=re,me.contextMenu=Se,me.addButton=se,me.destroyExport=ye,me.renderExporting=Ce,me.callbacks.push(le),E(Me,"init",ue),y.isSafari&&w.matchMedia("print").addListener(function(De){V&&(De.matches?V.beforePrint():V.afterPrint())}),_.exporting=B(h.exporting,_.exporting),_.lang=B(h.lang,_.lang),_.navigation=B(h.navigation,_.navigation))}}(v||(v={})),v}),r(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(n,a,c){return n.HttpUtilities=n.HttpUtilities||c,n.ajax=n.HttpUtilities.ajax,n.getJSON=n.HttpUtilities.getJSON,n.post=n.HttpUtilities.post,a.compose(n.Chart,n.Renderer),n})})})(sI);var Lq=sI.exports;const Nq=Cp(Lq);var aI={exports:{}};(function(i,e){(function(t,r){i.exports=r(Ae)})(typeof self<"u"?self:wn,function(t){return function(r){function n(c){if(a[c])return a[c].exports;var s=a[c]={i:c,l:!1,exports:{}};return r[c].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var a={};return n.m=r,n.c=a,n.d=function(c,s,h){n.o(c,s)||Object.defineProperty(c,s,{configurable:!1,enumerable:!0,get:h})},n.n=function(c){var s=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(s,"a",s),s},n.o=function(c,s){return Object.prototype.hasOwnProperty.call(c,s)},n.p="",n(n.s=0)}([function(r,n,a){function c(){return c=Object.assign?Object.assign.bind():function(w){for(var E=1;E<arguments.length;E++){var A=arguments[E];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(w[M]=A[M])}return w},c.apply(this,arguments)}function s(w){return y(w)||m(w)||f(w)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(w,E){if(w){if(typeof w=="string")return g(w,E);var A=Object.prototype.toString.call(w).slice(8,-1);return A==="Object"&&w.constructor&&(A=w.constructor.name),A==="Map"||A==="Set"?Array.from(w):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?g(w,E):void 0}}function m(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function y(w){if(Array.isArray(w))return g(w)}function g(w,E){(E==null||E>w.length)&&(E=w.length);for(var A=0,M=new Array(E);A<E;A++)M[A]=w[A];return M}function b(w){"@babel/helpers - typeof";return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(w)}Object.defineProperty(n,"__esModule",{value:!0}),a.d(n,"HighchartsReact",function(){return k});var v=a(1),_=a.n(v),T=typeof window<"u"?v.useLayoutEffect:v.useEffect,k=Object(v.memo)(Object(v.forwardRef)(function(w,E){var A=Object(v.useRef)(),M=Object(v.useRef)(),S=Object(v.useRef)(w.constructorType),N=Object(v.useRef)(w.highcharts);return T(function(){function Y(){var K=w.highcharts||(typeof window>"u"?"undefined":b(window))==="object"&&window.Highcharts,B=w.constructorType||"chart";K?K[B]?w.options?M.current=K[B](A.current,w.options,w.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(M.current){if(w.allowChartUpdate!==!1)if(w.constructorType!==S.current||w.highcharts!==N.current)S.current=w.constructorType,N.current=w.highcharts,Y();else if(!w.immutable&&M.current){var Z;(Z=M.current).update.apply(Z,[w.options].concat(s(w.updateArgs||[!0,!0])))}else Y()}else Y()},[w.options,w.allowChartUpdate,w.updateArgs,w.containerProps,w.highcharts,w.constructorType]),T(function(){return function(){M.current&&(M.current.destroy(),M.current=null)}},[]),Object(v.useImperativeHandle)(E,function(){return{get chart(){return M.current},container:A}},[]),_.a.createElement("div",c({},w.containerProps,{ref:A}))}));n.default=k},function(r,n){r.exports=t}])})})(aI);var zq=aI.exports;const oI=Cp(zq),jq="_chartContainer_1sr1q_1",Oq="_chart_1sr1q_1",Fq="_menu_1sr1q_10",Mb={chartContainer:jq,chart:Oq,menu:Fq},Bq="",$q={"Bi-Week":" ",Week:Bq},Uq="Tden",Vq={"Bi-Week":"Dvoutden",Week:Uq},Hq="Week",Gq={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:Hq,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},qq="Semana",Wq={"Bi-Week":"Quincenal",Week:qq},Yq="Semana",Zq={"Bi-Week":"Cada dos semanas",Week:Yq},Xq="Semaine",Kq={"Bi-Week":"Bi-hebdomadaire",Week:Xq},Qq="Minggu",Jq={"Bi-Week":"",Week:Qq},eW="",tW={"Bi-Week":"",Week:eW},iW="Uke",rW={"Bi-Week":"Toukentlig",Week:iW},nW="Week",sW={"Bi-Week":"",Week:nW},aW="",oW={"Bi-Week":"",Week:aW},lW="",cW={"Bi-Week":"",Week:lW},uW="Semana",dW={"Bi-Week":"Bimensal",Week:uW},hW="Semana",pW={"Bi-Week":"",Week:hW},fW="",mW={"Bi-Week":"",Week:fW},gW="",yW={"Bi-Week":"",Week:gW},vW="",xW={"Bi-Week":"",Week:vW},bW="",wW={"Bi-Week":"",Week:bW},_W="",CW={"Bi-Week":"-",Week:_W},TW="Hafta",SW={"Bi-Week":"Juft-Hafta",Week:TW},EW="Tun",kW={"Bi-Week":"K 2 tun ny",Week:EW},MW="",AW={"Bi-Week":"",Week:MW},IW="",PW={"Bi-Week":"",Week:IW},Yn="default";be.addResources("ar",Yn,$q);be.addResources("cs",Yn,Vq);be.addResources("en",Yn,Gq);be.addResources("es",Yn,Wq);be.addResources("es_419",Yn,Zq);be.addResources("fr",Yn,Kq);be.addResources("id",Yn,Jq);be.addResources("lo",Yn,tW);be.addResources("nb",Yn,rW);be.addResources("nl",Yn,sW);be.addResources("prs",Yn,oW);be.addResources("ps",Yn,cW);be.addResources("pt",Yn,dW);be.addResources("pt_BR",Yn,pW);be.addResources("ru",Yn,mW);be.addResources("si",Yn,yW);be.addResources("uk",Yn,xW);be.addResources("ur",Yn,wW);be.addResources("uz_UZ_Cyrl",Yn,CW);be.addResources("uz_UZ_Latn",Yn,SW);be.addResources("vi",Yn,kW);be.addResources("zh",Yn,AW);be.addResources("zh_CN",Yn,PW);const lI={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},DW={nepali:{"ne-NP":{monthNames:["","","","","","","","","","","",""],dayNamesShort:["","","","","","",""],numbers:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},eo={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class RW extends Gn.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:r,isoMonth:n,isoDay:a}=e.getISOFields();return(t=Ib({year:r,month:n,day:a}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:r}=e;return eo[t][r]}month(e){var t;const{isoYear:r,isoMonth:n,isoDay:a}=e.getISOFields();return(t=Ib({year:r,month:n,day:a}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return cI(t)}day(e){const{isoYear:t,isoMonth:r,isoDay:n}=e.getISOFields(),{day:a}=Ib({year:t,month:r,day:n});return a}dateFromFields(e,t){const{year:r,day:n,month:a}=Ab({year:e.year,month:e.month,day:e.day},t);return new Gn.PlainDate(r,a,n,this)}yearMonthFromFields(e){const{year:t,day:r,month:n}=Ab({year:e.year,month:e.month,day:e.day});return new Gn.PlainYearMonth(t,n,this,r)}monthDayFromFields(e){const{year:t,day:r,month:n}=Ab({year:e.year,month:e.month,day:e.day});return new Gn.PlainMonthDay(r,n,this,t)}}const cw=Object.keys(eo),B0=Number(cw[0]),$0=Number(cw[cw.length-1]),Ab=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<B0||t>$0)throw new Error(`Conversions are only possible between ${B0} and ${$0} in Nepali calendar`);const{month:r,day:n=1}=i;if(e==="reject"&&(r<1||r>12||n>eo[t][r]))throw new Error("Invalid date in Nepali calendar");let a=0,c=r;const s=t-(r>9||c===9&&n>=eo[t][0]?56:57);for(r!==9&&(a=n,c--);c!==9;)c<=0&&(c=12,t--),a+=eo[t][c],c--;r===9?(a+=n-eo[t][0],a<0&&(a+=Gn.PlainDate.from({year:s,day:1,month:1}).daysInYear)):a+=eo[t][9]-eo[t][0];const h=Gn.PlainDate.from({year:s,month:1,day:1}).add({days:a});return{year:h.year,month:h.month,monthCode:cI(h.month),day:h.day}},Ib=i=>{const e=Gn.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,r=e.dayOfYear;let n=t+56;if(!eo[n])throw new Error(`Conversions are only possible between ${B0} and ${$0} in Nepali calendar`);let a=9;const c=eo[n][0];let s=eo[n][a]-c+1;for(;r>s;){var h;a++,a>12&&(a=1,n++),s+=(h=eo[n])===null||h===void 0?void 0:h[a]}if(!eo[n])throw new Error(`Conversions are only possible between ${B0} and ${$0} in Nepali calendar`);const f=eo[n][a]-(s-r);return{year:n,month:a,day:f}};function cI(i){return`M${i.toString().padStart(2,"0")}`}const p2={nepali:{calendar:new RW,locales:DW.nepali,defaultLocale:"en-NP"}},LW=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function NW(i,e){const t=i.match(LW);if(!t)throw new Error(be.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let r,n,a,c;t[1]?(r=t[1],n=t[3],a=t[5],c="YYYY-MM-DD"):(a=t[6],n=t[8],r=t[10],c="DD-MM-YYYY");const s=parseInt(r,10),h=parseInt(n,10),f=parseInt(a,10);return{year:s,month:h,day:f,format:c}}let iE;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(iE||(iE={}));const Au=i=>!!p2[i],du=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},Oo=(i,e,t)=>{var r;const n=(r=i.eraYear)!==null&&r!==void 0?r:i.year,a=du(i.month);let c=i.day;e==="endOfMonth"?c=i.daysInMonth:e==="startOfMonth"&&(c=1);const s=du(c);return t==="DD-MM-YYYY"?`${s}-${a}-${n}`:`${n}-${a}-${s}`},uI=i=>{var e;if(!Au(i))return i;const r=(e=p2[i])===null||e===void 0?void 0:e.calendar;if(!r)throw new Error(`No implemenation found for custom calendar ${i}`);return r},zW=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],jW=(i,e)=>{const t=Object.keys(i).find(r=>{var n,a;return((n=r.split("-"))===null||n===void 0||(a=n[0])===null||a===void 0?void 0:a.toLowerCase())===e});if(t)return i[t]},f2=(i,e)=>{var t,r;const n=p2[i];if(!n)return;const a=n.locales||{},c=(t=(r=e&&(a==null?void 0:a[e]))!==null&&r!==void 0?r:jW(a,e))!==null&&t!==void 0?t:a==null?void 0:a[n.defaultLocale];if(!c)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${n.defaultLocale}`);return c},OW=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const r=Au(e.calendar),n=i instanceof Gn.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return r?Oo(i):n.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},FW=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const r=Au(e.calendar),n=f2(e.calendar,e.locale);return r?(n==null||(t=n.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:zW.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},BW=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const r=Au(e.calendar),n=f2(e.calendar,e.locale);return r?n==null?void 0:n.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},$W=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=Au(e.calendar),r=f2(e.calendar,e.locale),n=r==null?void 0:r.dayNamesShort[i.dayOfWeek-1];return t&&n?n:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},UW=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return Au(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},Rd={localiseYear:UW,localiseDateLabel:OW,localiseWeekLabel:FW,localiseMonth:BW,localiseWeekDayLabel:$W},dI=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,r]=i.replace(/_/g,"-").split("-");let n=e;r&&(n=`${n}-${r}`),t&&(n=`${n}-${t}`);try{const a=Intl.DateTimeFormat.supportedLocalesOf(n);return a&&a.length===1?n:void 0}catch{return}},VW=i=>{let{date:e,calendar:t}=i;const{year:r,month:n,day:a}=NW(e);return Gn.PlainDate.from({year:r,month:n,day:a,calendar:t})},Tc=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return VW({date:e,calendar:t});if(e instanceof Date)return Gn.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Gn.PlainDate)return Gn.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(be.t('Unrecognized date, received "{{date}}"',{date:e}))},Ss=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],HW=Ss.filter(i=>i.match(/WEEKLY/)),hI=Ss.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),mg=Ss.filter(i=>i.match(/QUARTERLY/)),gg=Ss.filter(i=>i.match(/SIXMONTHLY/)),GW=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],qW=Ss.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),pI=hI.filter(i=>i!=="MONTHLY"),WW=Ss.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),YW=Ss.filter(i=>i.match(/^FY[A-Z]{3}$/));[...GW,...Ss.filter(i=>i.match(/JAN$/))];const ZW=Ss.filter(i=>i.match(/FEB$/)),XW=Ss.filter(i=>i.match(/MAR$/)),KW=Ss.filter(i=>i.match(/APR$/)),QW=Ss.filter(i=>i.match(/MAY$/)),JW=Ss.filter(i=>i.match(/JUN$/)),eY=Ss.filter(i=>i.match(/JUL$/)),tY=Ss.filter(i=>i.match(/AUG$/)),iY=Ss.filter(i=>i.match(/SEP$/)),rY=Ss.filter(i=>i.match(/OCT$/)),nY=Ss.filter(i=>i.match(/NOV$/)),sY=Ss.filter(i=>i.match(/DEC/)),{localiseDateLabel:aY}=Rd,fI=i=>{let{date:e,calendar:t,locale:r}=i;const n=e.year,a=String(e.month).padStart(2,"0"),c=String(e.day).padStart(2,"0"),s=`${n}${a}${c}`,h=aY(e,{calendar:t,locale:r},{dateStyle:"long"});return{periodType:"DAILY",id:s,iso:s,displayName:h,name:Oo(e),startDate:Oo(e),endDate:Oo(e)}},oY=i=>{let{year:e,calendar:t,endsBefore:r,locale:n}=i;const a=r?Tc({calendar:t,date:r}):null,c=Gn.PlainDate.from({year:e,month:1,day:1,calendar:t}),s=[];for(let h=0;h<c.daysInYear;h++){const f=c.add({days:h});if(a&&Gn.PlainDate.compare(f,a)>-1)break;const m=fI({date:f,calendar:t,locale:n});s.push(m)}return s},gp=i=>ZW.includes(i)?"FEB":XW.includes(i)?"MAR":KW.includes(i)?"APR":QW.includes(i)?"MAY":JW.includes(i)?"JUN":eY.includes(i)?"JUL":tY.includes(i)?"AUG":iY.includes(i)?"SEP":rY.includes(i)?"OCT":nY.includes(i)?"NOV":sY.includes(i)?"DEC":"JAN",jl={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},lY=i=>{let{periodType:e,month:t,year:r,calendar:n,locale:a}=i;const c=pY({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),s=uY(e),h=t.add({months:s}),f=cY({periodType:e,currentMonth:t,year:r,index:c});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const m=Gn.PlainDate.from({year:h.year,month:h.month,day:1,calendar:h.calendar}).subtract({days:1}),y=dY({periodType:e,month:t,locale:a,calendar:n,nextMonth:h.subtract({months:1})});return{periodType:e,id:f,iso:f,name:y,displayName:y,startDate:Oo(t,"startOfMonth"),endDate:Oo(m,"endOfMonth")}},cY=i=>{let{periodType:e,currentMonth:t,year:r,index:n}=i;if(e==="BIMONTHLY")return`${r}${du(n)}B`;if(e==="QUARTERLY")return`${r}Q${n}`;if(e==="SIXMONTHLY")return`${r}S${n}`;if(mg.includes(e)){const a=jl[gp(e)].name;return`${r}${a}Q${n}`}if(gg.includes(e)){const a=jl[gp(e)].name;return`${r}${a}S${n}`}return`${r}${du(t.month)}`},uY=i=>{if(gg.includes(i))return 6;if(mg.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},dY=i=>{const{periodType:e,month:t,nextMonth:r,calendar:n,locale:a}=i;if(Au(n))return hY(i);const c={month:"long",year:"numeric",calendar:n},s={month:"long",calendar:n};let h="";if(pI.includes(e)){const f=t.year===r.year?s:c;h=`${t.toLocaleString(a,f)} - ${r.toLocaleString(a,c)}`}else h=`${t.toLocaleString(a,c)}`;return h=h.replace(/ERA\d+\s*/g,"").trim(),h},hY=i=>{let{periodType:e,month:t,nextMonth:r,calendar:n,locale:a}=i,c="";if(pI.includes(e)){const s=t.year!==r.year;c=`${Rd.localiseMonth(t,{locale:a,calendar:n},{})}${s?` ${t.year}`:""} - ${Rd.localiseMonth(r,{locale:a,calendar:n},{})} ${r.year}`}else c=`${Rd.localiseMonth(t,{locale:a,calendar:n},{})} ${r.year}`;return c},pY=i=>{let{periodType:e,month:t,monthsInYear:r}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(mg.includes(e))return mY(e,t,r);if(gg.includes(e))return fY(e,t,r);throw new Error(`Unrecognized period type "${e}"`)},mI=(i,e)=>[...Array(e-i+1).fill(null).map((r,n)=>n+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),gI=(i,e)=>{const t=[];for(let r=0;r<12;r+=e)t.push(i.slice(r,r+e));return t},fY=(i,e,t)=>{const r=gp(i),n=jl[r].value,a=mI(n,t);return gI(a,6)[1].includes(e)?2:1},mY=(i,e,t)=>{const r=gp(i),n=jl[r].value,a=mI(n,t),c=gI(a,3);return c[1].includes(e)?2:c[2].includes(e)?3:c[3].includes(e)?4:1},m2=i=>{let{period:e,date:t,calendar:r}=i;const n=Tc({calendar:r,date:e.startDate}),a=Tc({calendar:r,date:e.endDate}),c=Gn.PlainDate.compare(t,n)<1,s=Gn.PlainDate.compare(n,t)===-1,h=Gn.PlainDate.compare(t,a)<1;return c||s&&h},gY=i=>{let{year:e,calendar:t,periodType:r,endsBefore:n,locale:a}=i,c=Gn.PlainDate.from({year:e,month:vY(r),day:t.toString()==="nepali"?14:1,calendar:t});const s=[];for(;c.year===e||xY(r,s.length);){const h=bY({periodType:r,currentMonth:c.month});if(!yY(t,c)){const y=lY({periodType:r,month:c,year:e,calendar:t,locale:a});if(n&&m2({period:y,date:n,calendar:t}))break;s.push(y)}const m=c.add({months:h});c=Tc({date:m,calendar:t})}return s},yY=(i,e)=>i==="ethiopic"&&e.month===13,vY=i=>{if(qW.includes(i)){const e=gp(i);return jl[e].value}return 1},xY=(i,e)=>gg.includes(i)?e<2:mg.includes(i)?e<4:!1,bY=i=>{let{periodType:e}=i;if(gg.includes(e))return 6;if(mg.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},Yc={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},wY=i=>{let{year:e,calendar:t,periodType:r,startingDay:n,endsBefore:a}=i;const c=_Y(r,n);let s=CY({year:e,calendar:t,startingDay:c});const h=[];let f=1;const m=r==="BIWEEKLY"?13:6;do{const y=s.add({days:m});if(a&&m2({period:{startDate:Oo(s),endDate:Oo(y)},date:a,calendar:t}))break;const g=SY({periodType:r,startingDay:c,year:e,weekIndex:f});if(!(y.year===e+1&&y.day>=4)){const b=EY({periodType:r,date:s,nextWeek:y,weekIndex:f});h.push({periodType:r,id:g,iso:g,name:b,displayName:b,startDate:Oo(s),endDate:Oo(y)})}s=Tc({date:y,calendar:t}).add({days:1}),f++}while(s.year===e);return h},_Y=(i,e)=>{switch(i){case"WEEKLYMON":return Yc.Monday;case"WEEKLYTUE":return Yc.Tuesday;case"WEEKLYWED":return Yc.Wednesday;case"WEEKLYTHU":return Yc.Thursday;case"WEEKLYFRI":return Yc.Friday;case"WEEKLYSAT":return Yc.Saturday;case"WEEKLYSUN":return Yc.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||Yc.Monday}},CY=i=>{const{year:e,calendar:t,startingDay:r}=i,n=Gn.PlainDate.from({year:e,month:1,day:4,calendar:t}),a=n.dayOfWeek-r;return a>0?n.subtract({days:a}):a<0?n.subtract({days:a+7}):n},TY={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},SY=i=>{let{startingDay:e,periodType:t,year:r,weekIndex:n}=i;const a=t==="BIWEEKLY"?"BiW":"W";return`${r}${TY[e]}${a}${n}`},EY=i=>{let{periodType:e,date:t,nextWeek:r,weekIndex:n}=i;const{year:a,month:c,day:s}=t,{year:h,month:f,day:m}=r;return`${e==="BIWEEKLY"?be.t("Bi-Week"):be.t("Week")} ${n} - ${a}-${du(c)}-${du(s)} - ${h}-${du(f)}-${du(m)}`},yI=i=>{if(i==="YEARLY")return 1;const e=gp(i),t=jl[e];return(t==null?void 0:t.value)||1},vI={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},xI=i=>{let{periodType:e,year:t,locale:r,calendar:n}=i;const a=yI(e),c=kY({periodType:e,year:t,month:a}),s=a.toString().padStart(2,"0"),h=Tc({date:`${t}-${s}-01`,calendar:n}),f=Tc({date:`${t+1}-${s}-01`,calendar:n}).subtract({days:1}),m=AY(e,h,{locale:r,calendar:n});return{periodType:e,id:c,iso:c,name:m,displayName:m,startDate:Oo(h,"startOfMonth"),endDate:Oo(f,"endOfMonth")}},kY=i=>{let{periodType:e,year:t,month:r}=i;if(e==="YEARLY")return t.toString();if(MY(e)){const n=vI[r];return`${t}${n}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},MY=i=>YW.includes(i),AY=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(Au(t.calendar))return IY(e,t);const r={month:"long",year:"numeric",calendar:t.calendar},n=Rd.localiseMonth(e,t,r),a=Rd.localiseMonth(e.add({months:e.monthsInYear-1}),t,r);let c=`${n} - ${a}`;return c=c.replace(/ERA\d+\s*/g,"").trim(),c},IY=(i,e)=>{const t=a=>`${Rd.localiseMonth(a,e,{})} ${a.year}`,r=Gn.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(r)}`},PY=i=>{let{year:e,calendar:t,periodType:r,endsBefore:n,yearsCount:a,locale:c}=i;const s=yI(r),h=Gn.PlainDate.from({year:e,month:s,day:t.toString()==="nepali"?14:1,calendar:t}),f=Gn.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),m=f.eraYear||f.year,y=[],g=a??e-m+1;for(let b=0;b<g;b++){const v=h.year-b,_=xI({periodType:r,year:v,locale:c,calendar:t});n&&m2({period:_,date:n,calendar:t})||y.push(_)}return y},jy=i=>{var e,t;let{periodType:r,year:n,endsBefore:a,calendar:c,locale:s="en",yearsCount:h=10,startingDay:f=1}=i,m;if(typeof n=="number")m=n;else if(!isNaN(n)&&!isNaN(parseInt(n)))m=parseInt(n);else throw new Error("year must be a number");const y=uI((e=lI[c])!==null&&e!==void 0?e:c),g=(t=dI(s))!==null&&t!==void 0?t:"en",b=a?Tc({calendar:y,date:a}):void 0;if(HW.includes(r))return wY({year:m,periodType:r,calendar:y,startingDay:f,endsBefore:b});if(WW.includes(r))return PY({year:m,periodType:r,locale:g,calendar:y,endsBefore:b,yearsCount:h});if(hI.includes(r))return gY({year:m,periodType:r,locale:g,calendar:y,endsBefore:b});if(r==="DAILY")return oY({year:m,locale:g,calendar:y,endsBefore:b});throw new Error(`can not generate period for unrecognised period type "${r}"`)},DY=new RegExp("^([0-9]{4})W([0-9]+)$"),RY=new RegExp("^([0-9]{4})BiW([0-9]+)$"),LY=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),NY=new RegExp("^([0-9]{4})([0-9]{2})$"),zY=new RegExp("^([0-9]{4})([0-9]{2})B$"),jY=new RegExp("^([0-9]{4})Q([0-9])$"),OY=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),FY=new RegExp("^([0-9]{4})S([0-9])$"),BY=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),$Y=new RegExp("^([0-9]{4})$"),UY=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),VY=Object.values(vI).slice(1).join("|"),HY=new RegExp(`^[0-9]{4}(${VY})?$`),GY=i=>HY.test(i),rE=Object.values(jl).map(i=>{let{name:e}=i;return e}).join("|"),qY=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${rE})?Q[0-9]$`,`^[0-9]{4}(${rE})?S[0-9]$`].join("|"),WY=new RegExp(qY),YY=i=>WY.test(i),ZY=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),XY=i=>/^[0-9]{8}$/.test(i),KY=i=>{if(NY.test(i))return"MONTHLY";if(zY.test(i))return"BIMONTHLY";if(jY.test(i))return"QUARTERLY";const e=i.match(OY);if(e){const r=e[2],n=Object.entries(jl).find(c=>{let[,{name:s}]=c;return s===r});if(!n)throw new Error("@TODO");const[a]=n;return`QUARTERLY${a}`}if(FY.test(i))return"SIXMONTHLY";const t=i.match(BY);if(t){const r=t[2],n=Object.entries(jl).find(c=>{let[,{name:s}]=c;return s===r});if(!n)throw new Error("@TODO");const[a]=n;return`SIXMONTHLY${a}`}throw new Error(be.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},QY=i=>{if(DY.test(i))return"WEEKLY";if(RY.test(i))return"BIWEEKLY";const e=i.match(LY);if(e){const[,,t]=e,r=`WEEKLY${t.toUpperCase()}`;if(!Ss.includes(r))throw new Error(be.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return r}throw new Error(be.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},JY=i=>{if($Y.test(i))return"YEARLY";const e=i.match(UY);if(e){const t=e[2].slice(0,3),r=Object.entries(jl).find(a=>{let[,{name:c}]=a;return c.startsWith(t)});if(!r)throw new Error("@TODO");const[n]=r;return`FY${n}`}throw new Error(be.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},g2=i=>{var e,t;let{periodId:r,calendar:n,locale:a="en"}=i;const c=uI((e=lI[n])!==null&&e!==void 0?e:n),s=(t=dI(a))!==null&&t!==void 0?t:"en";if(GY(r)){const h=parseInt(r.substring(0,4),10),f=JY(r);return xI({year:h,periodType:f,calendar:c,locale:a})}if(YY(r)){const h=KY(r),f=parseInt(r.substring(0,4),10),y=jy({periodType:h,year:f,calendar:c,locale:s}).find(v=>{let{id:_}=v;return _===r});if(y)return y;const b=jy({year:f+1,periodType:h,calendar:c,locale:s}).slice(-1).find(v=>{let{id:_}=v;return _===r});if(!b)throw new Error(be.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:r}));return b}if(ZY(r)){const h=parseInt(r.substring(0,4),10),f=QY(r),y=jy({year:h,periodType:f,calendar:c,locale:a}).find(b=>{let{id:v}=b;return v===r});if(y)return y;const[g]=jy({year:h-1,periodType:f,calendar:c,locale:a}).slice(-1);if(g.id===r)return g;throw new Error(be.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:r}))}if(XY(r)){const h=r.substring(0,4),f=r.substring(4,6),m=r.substring(6),y=Tc({date:`${h}-${f}-${m}`,calendar:c});return fI({date:y,locale:a,calendar:c})}throw new Error(be.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:r}))};Pq(Dp);Nq(Dp);Rq(Dp);const nE=(i,e)=>{const t=i.filter(n=>n.dataElement==="median").map(n=>[n.period,n.value]),r=i.filter(n=>n.dataElement==="quantile_low").map(n=>[n.period,n.value,i.filter(a=>a.dataElement==="quantile_high"&&a.period===n.period)[0].value]);return{title:{text:be.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return g2({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:be.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:be.t("Range"),data:r,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function eZ(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(r=>r.orgUnit===t))}const tZ=({data:i,predictionTargetName:e})=>{const t=eZ(i.dataValues),[r,n]=Ae.useState(nE(t[0],e)),[a,c]=Ae.useState(0),s=h=>{c(h),n(nE(t[h],e))};return he.createElement(he.Fragment,null,he.createElement("div",{className:Mb.chartContainer},he.createElement("div",null,he.createElement(zw,{dense:!0},t.map((h,f)=>he.createElement(es,{className:Mb.menu,active:a==f,key:f,label:h[0].displayName,onClick:()=>s(f)})))),he.createElement("div",{className:Mb.chart},he.createElement(oI,{highcharts:Dp,constructorType:"chart",options:r}))))};function Hf(i,e,t){return(e=iZ(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function iZ(i){var e=rZ(i,"string");return typeof e=="symbol"?e:e+""}function rZ(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class sE extends Error{constructor(e,t,r){super(r),Hf(this,"url",void 0),Hf(this,"status",void 0),Hf(this,"statusText",void 0),Hf(this,"body",void 0),Hf(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function ud(i,e,t){nZ(i,e),e.set(i,t)}function nZ(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function an(i,e){return i.get(bI(i,e))}function gl(i,e,t){return i.set(bI(i,e),t),t}function bI(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class sZ extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var Zc=new WeakMap,Xc=new WeakMap,cc=new WeakMap,Uh=new WeakMap,Gf=new WeakMap,Oy=new WeakMap,Vh=new WeakMap;class aZ{constructor(e){ud(this,Zc,void 0),ud(this,Xc,void 0),ud(this,cc,void 0),ud(this,Uh,void 0),ud(this,Gf,void 0),ud(this,Oy,void 0),ud(this,Vh,void 0),gl(Zc,this,!1),gl(Xc,this,!1),gl(cc,this,!1),gl(Uh,this,[]),gl(Gf,this,new Promise((t,r)=>{gl(Oy,this,t),gl(Vh,this,r);const n=s=>{an(Zc,this)||an(Xc,this)||an(cc,this)||(gl(Zc,this,!0),an(Oy,this)&&an(Oy,this).call(this,s))},a=s=>{an(Zc,this)||an(Xc,this)||an(cc,this)||(gl(Xc,this,!0),an(Vh,this)&&an(Vh,this).call(this,s))},c=s=>{an(Zc,this)||an(Xc,this)||an(cc,this)||an(Uh,this).push(s)};return Object.defineProperty(c,"isResolved",{get:()=>an(Zc,this)}),Object.defineProperty(c,"isRejected",{get:()=>an(Xc,this)}),Object.defineProperty(c,"isCancelled",{get:()=>an(cc,this)}),e(n,a,c)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return an(Gf,this).then(e,t)}catch(e){return an(Gf,this).catch(e)}finally(e){return an(Gf,this).finally(e)}cancel(){if(!(an(Zc,this)||an(Xc,this)||an(cc,this))){if(gl(cc,this,!0),an(Uh,this).length)try{for(const e of an(Uh,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}an(Uh,this).length=0,an(Vh,this)&&an(Vh,this).call(this,new sZ("Request aborted"))}}get isCancelled(){return an(cc,this)}}const Oi={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},y2=i=>i!=null,yg=i=>typeof i=="string",Pb=i=>yg(i)&&i!=="",v2=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),wI=i=>i instanceof FormData,oZ=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},lZ=i=>{const e=[],t=(n,a)=>{e.push(`${encodeURIComponent(n)}=${encodeURIComponent(String(a))}`)},r=(n,a)=>{y2(a)&&(Array.isArray(a)?a.forEach(c=>{r(n,c)}):typeof a=="object"?Object.entries(a).forEach(([c,s])=>{r(`${n}[${c}]`,s)}):t(n,a))};return Object.entries(i).forEach(([n,a])=>{r(n,a)}),e.length>0?`?${e.join("&")}`:""},cZ=(i,e)=>{const t=encodeURI,r=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(a,c)=>{var s;return(s=e.path)!==null&&s!==void 0&&s.hasOwnProperty(c)?t(String(e.path[c])):a}),n=`${i.BASE}${r}`;return e.query?`${n}${lZ(e.query)}`:n},uZ=i=>{if(i.formData){const e=new FormData,t=(r,n)=>{yg(n)||v2(n)?e.append(r,n):e.append(r,JSON.stringify(n))};return Object.entries(i.formData).filter(([r,n])=>y2(n)).forEach(([r,n])=>{Array.isArray(n)?n.forEach(a=>t(r,a)):t(r,n)}),e}},Fy=async(i,e)=>e,dZ=async(i,e)=>{const[t,r,n,a]=await Promise.all([Fy(e,i.TOKEN),Fy(e,i.USERNAME),Fy(e,i.PASSWORD),Fy(e,i.HEADERS)]),c=Object.entries({Accept:"application/json",...a,...e.headers}).filter(([s,h])=>y2(h)).reduce((s,[h,f])=>({...s,[h]:String(f)}),{});if(Pb(t)&&(c.Authorization=`Bearer ${t}`),Pb(r)&&Pb(n)){const s=oZ(`${r}:${n}`);c.Authorization=`Basic ${s}`}return e.body!==void 0&&(e.mediaType?c["Content-Type"]=e.mediaType:v2(e.body)?c["Content-Type"]=e.body.type||"application/octet-stream":yg(e.body)?c["Content-Type"]="text/plain":wI(e.body)||(c["Content-Type"]="application/json")),new Headers(c)},hZ=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):yg(i.body)||v2(i.body)||wI(i.body)?i.body:JSON.stringify(i.body)}},pZ=async(i,e,t,r,n,a,c)=>{const s=new AbortController,h={headers:a,body:r??n,method:e.method,signal:s.signal};return i.WITH_CREDENTIALS&&(h.credentials=i.CREDENTIALS),c(()=>s.abort()),await fetch(t,h)},fZ=(i,e)=>{if(e){const t=i.headers.get(e);if(yg(t))return t}},mZ=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(n=>e.toLowerCase().startsWith(n))?await i.json():await i.text()}catch(e){console.error(e)}},gZ=(i,e)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(r)throw new sE(i,e,r);if(!e.ok){var n,a;const c=(n=e.status)!==null&&n!==void 0?n:"unknown",s=(a=e.statusText)!==null&&a!==void 0?a:"unknown",h=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new sE(i,e,`Generic Error: status: ${c}; status text: ${s}; body: ${h}`)}},Bi=(i,e)=>new aZ(async(t,r,n)=>{try{const a=cZ(i,e),c=uZ(e),s=hZ(e),h=await dZ(i,e);if(!n.isCancelled){const f=await pZ(i,e,a,s,c,h,n),m=await mZ(f),y=fZ(f,e.responseHeader),g={url:a,ok:f.ok,status:f.status,statusText:f.statusText,body:y??m};gZ(e,g),t(g.body)}}catch(a){r(a)}});class nl{static makeDatasetAnalyticsMakeDatasetPost(e){return Bi(Oi,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(e){return Bi(Oi,{method:"GET",url:"/analytics/compatible-backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t){return Bi(Oi,{method:"GET",url:"/analytics/backtest-overlap/{backtestId1}/{backtestId2}",path:{backtestId1:e,backtestId2:t},errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t,r,n){return Bi(Oi,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t,splitPeriod:r,orgUnits:n},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return Bi(Oi,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return Bi(Oi,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return Bi(Oi,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e,t){return Bi(Oi,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},query:{orgUnits:t},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return Bi(Oi,{method:"GET",url:"/analytics/data-sources"})}static createBacktestWithDataAnalyticsCreateBacktestWithDataPost(e){return Bi(Oi,{method:"POST",url:"/analytics/create-backtest-with-data",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}}class qs{static getBacktestsCrudBacktestsGet(){return Bi(Oi,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return Bi(Oi,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteBacktestBatchCrudBacktestsDelete(e){return Bi(Oi,{method:"DELETE",url:"/crud/backtests",query:{ids:e},errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return Bi(Oi,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return Bi(Oi,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static updateBacktestCrudBacktestsBacktestIdPatch(e,t){return Bi(Oi,{method:"PATCH",url:"/crud/backtests/{backtestId}",path:{backtestId:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return Bi(Oi,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return Bi(Oi,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return Bi(Oi,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return Bi(Oi,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return Bi(Oi,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return Bi(Oi,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return Bi(Oi,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return Bi(Oi,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return Bi(Oi,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelTemplatesCrudModelTemplatesGet(){return Bi(Oi,{method:"GET",url:"/crud/model-templates"})}static listConfiguredModelsCrudConfiguredModelsGet(){return Bi(Oi,{method:"GET",url:"/crud/configured-models"})}static addConfiguredModelCrudConfiguredModelsPost(e){return Bi(Oi,{method:"POST",url:"/crud/configured-models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return Bi(Oi,{method:"GET",url:"/crud/models"})}static addModelCrudModelsPost(e){return Bi(Oi,{method:"POST",url:"/crud/models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static debugEntryCrudDebugPost(){return Bi(Oi,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return Bi(Oi,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}}class _I{static faviconfaviconIcoGet(){return Bi(Oi,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return Bi(Oi,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t,r=1){return Bi(Oi,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:r},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return Bi(Oi,{method:"GET",url:"/list-models"})}static listFeaturesListFeaturesGet(){return Bi(Oi,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return Bi(Oi,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return Bi(Oi,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return Bi(Oi,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return Bi(Oi,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return Bi(Oi,{method:"GET",url:"/status"})}static healthHealthGet(){return Bi(Oi,{method:"GET",url:"/health"})}static versionVersionGet(){return Bi(Oi,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return Bi(Oi,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return Bi(Oi,{method:"GET",url:"/system-info"})}}class Tu{static listJobsJobsGet(e,t,r){return Bi(Oi,{method:"GET",url:"/jobs",query:{ids:e,status:t,type:r},errors:{422:"Validation Error"}})}static getJobStatusJobsJobIdGet(e){return Bi(Oi,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return Bi(Oi,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static cancelJobJobsJobIdCancelPost(e){return Bi(Oi,{method:"POST",url:"/jobs/{job_id}/cancel",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return Bi(Oi,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return Bi(Oi,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return Bi(Oi,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return Bi(Oi,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function CI(i,e){const t=r=>{if(r.includes("W")){const[n,a]=r.split("W").map(Number),c=new Date(n,0,1),s=(a-1)*7;return new Date(c.setDate(c.getDate()+s))}else{const n=Number(r.slice(0,4)),a=Number(r.slice(4,6))-1;return new Date(n,a)}};return t(i).getTime()-t(e).getTime()}function TI(i,e){var t;const r=e.map(b=>b.pe).sort(CI),n=r.map(b=>{var v,_;return(v=(_=e.find(T=>T.pe===b))===null||_===void 0?void 0:_.value)!==null&&v!==void 0?v:null}),a=(b,v)=>{if(!v)return new Map;const _=new Map;for(let T=0;T<b.length;T++)_.set(b[T],v[T]);return _},c=a(i.periods,i.averages.slice()),s=a(i.periods,i.ranges.slice()),h=a(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),f=(b,v)=>b.map(_=>{var T;return(T=v.get(_))!==null&&T!==void 0?T:null}),m=f(r,c),y=f(r,s),g=f(r,h);return{periods:r,ranges:y,averages:m,realValues:n,midranges:g}}const yZ=(i,e,t)=>{const r=Array.from(new Set(i.map(m=>m.quantile))).sort(),n=r[0],a=r[1],c=r[r.length-2],s=r[r.length-1],h=m=>m.quantile===n?"quantile_low":m.quantile===s?"quantile_high":m.quantile===.5?"median":m.quantile===a?"quantile_mid_low":m.quantile===c?"quantile_mid_high":"unknown",f=Array.from(new Set(i.map(m=>m.modelName||t)));return Array.from(new Set(i.map(m=>m.splitPeriod))).map(m=>({splitPoint:m,evaluation:Array.from(new Set(i.map(y=>y.orgUnit))).map(y=>({orgUnitName:y,orgUnitId:y,models:f.map(g=>{const b=SI(i.filter(_=>_.orgUnit===y&&_.splitPeriod===m&&((_==null?void 0:_.modelName)||t)===g),h),v=TI(b,e.filter(_=>_.ou===y));return{modelName:g,data:v}})}))}))};function SI(i,e){const t=Array.from(new Set(i.map(s=>s.period))).sort(CI),r=[],n=[],a=[];return t.forEach(s=>{var h,f,m,y,g;const b=((h=i.find(w=>w.period===s&&e(w)==="quantile_low"))===null||h===void 0?void 0:h.value)||0,v=((f=i.find(w=>w.period===s&&e(w)==="quantile_high"))===null||f===void 0?void 0:f.value)||0,_=((m=i.find(w=>w.period===s&&e(w)==="median"))===null||m===void 0?void 0:m.value)||0,T=((y=i.find(w=>w.period===s&&e(w)==="quantile_mid_high"))===null||y===void 0?void 0:y.value)||0,k=((g=i.find(w=>w.period===s&&e(w)==="quantile_mid_low"))===null||g===void 0?void 0:g.value)||0;r.push([b,v]),n.push([_]),a.push([k,T])}),{periods:t,ranges:r,averages:n,midranges:a}}function EI(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const vZ=i=>{const{enabled:e,wrapperClassName:t,children:r,...n}=i;return e?he.createElement(Vd,n,({onMouseOver:a,onMouseOut:c,ref:s})=>he.createElement("span",{className:t,ref:h=>{h&&(h.onpointerenter=a,h.onpointerleave=c,s.current=h)}},r)):r},kI=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.includes("W")){const e=i.match(/(\d{4})W(\d{1,2})/);if(!e||e.length<3)return i;const[t,r]=e.slice(1,3);return`Week ${r.replace(/0/,"")} ${t}`}if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}return i};function xZ(i){Dp.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const bZ=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],wZ=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return kI(this.value.toString())},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:xZ},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:bZ(i)}),_Z=({data:i,modelName:e,syncZoom:t})=>he.createElement(he.Fragment,null,he.createElement(oI,{highcharts:Dp,options:wZ(i,e,t)})),CZ="_title_4ki8g_1",TZ="_comparionBox_4ki8g_7",SZ="_comparionBoxSideBySide_4ki8g_15",EZ="_comparionBoxSideBySideItem_4ki8g_22",By={title:CZ,comparionBox:TZ,comparionBoxSideBySide:SZ,comparionBoxSideBySideItem:EZ},aE=({orgUnitsData:i})=>he.createElement("div",{className:By.comparionBox},he.createElement("div",{className:By.title},i.orgUnitName),he.createElement("div",{className:By.comparionBoxSideBySide},i.models.map((e,t)=>he.createElement("div",{key:t,className:By.comparionBoxSideBySideItem},he.createElement(_Z,{syncZoom:i.models.length>1,data:e.data,modelName:e.modelName}))))),qv=0,Iu=1,Rp=2,MI=4;function oE(i){return()=>i}function kZ(i){i()}function AI(i,e){return t=>i(e(t))}function lE(i,e){return()=>i(e)}function MZ(i,e){return t=>i(e,t)}function x2(i){return i!==void 0}function AZ(...i){return()=>{i.map(kZ)}}function Lp(){}function Wv(i,e){return e(i),i}function IZ(i,e){return e(i)}function Dn(...i){return i}function un(i,e){return i(Iu,e)}function Cr(i,e){i(qv,e)}function b2(i){i(Rp)}function Ca(i){return i(MI)}function Fi(i,e){return un(i,MZ(e,qv))}function Ol(i,e){const t=i(Iu,r=>{t(),e(r)});return t}function cE(i){let e,t;return r=>n=>{e=n,t&&clearTimeout(t),t=setTimeout(()=>{r(e)},i)}}function II(i,e){return i===e}function Pn(i=II){let e;return t=>r=>{i(e,r)||(e=r,t(r))}}function ar(i){return e=>t=>{i(t)&&e(t)}}function Mi(i){return e=>AI(e,i)}function wl(i){return e=>()=>{e(i)}}function qt(i,...e){const t=PZ(...e);return(r,n)=>{switch(r){case Rp:b2(i);return;case Iu:return un(i,t(n))}}}function El(i,e){return t=>r=>{t(e=i(e,r))}}function yp(i){return e=>t=>{i>0?i--:e(t)}}function hu(i){let e=null,t;return r=>n=>{e=n,!t&&(t=setTimeout(()=>{t=void 0,r(e)},i))}}function Er(...i){const e=new Array(i.length);let t=0,r=null;const n=Math.pow(2,i.length)-1;return i.forEach((a,c)=>{const s=Math.pow(2,c);un(a,h=>{const f=t;t=t|s,e[c]=h,f!==n&&t===n&&r&&(r(),r=null)})}),a=>c=>{const s=()=>{a([c].concat(e))};t===n?s():r=s}}function PZ(...i){return e=>i.reduceRight(IZ,e)}function DZ(i){let e,t;const r=()=>e==null?void 0:e();return function(n,a){switch(n){case Iu:return a?t===a?void 0:(r(),t=a,e=un(i,a),e):(r(),Lp);case Rp:r(),t=null;return}}}function ti(i){let e=i;const t=Ur();return(r,n)=>{switch(r){case qv:e=n;break;case Iu:{n(e);break}case MI:return e}return t(r,n)}}function Ta(i,e){return Wv(ti(e),t=>Fi(i,t))}function Ur(){const i=[];return(e,t)=>{switch(e){case qv:i.slice().forEach(r=>{r(t)});return;case Rp:i.splice(0,i.length);return;case Iu:return i.push(t),()=>{const r=i.indexOf(t);r>-1&&i.splice(r,1)}}}}function So(i){return Wv(Ur(),e=>Fi(i,e))}function tn(i,e=[],{singleton:t}={singleton:!0}){return{constructor:i,dependencies:e,id:RZ(),singleton:t}}const RZ=()=>Symbol();function LZ(i){const e=new Map,t=({constructor:r,dependencies:n,id:a,singleton:c})=>{if(c&&e.has(a))return e.get(a);const s=r(n.map(h=>t(h)));return c&&e.set(a,s),s};return t(i)}function Rs(...i){const e=Ur(),t=new Array(i.length);let r=0;const n=Math.pow(2,i.length)-1;return i.forEach((a,c)=>{const s=Math.pow(2,c);un(a,h=>{t[c]=h,r=r|s,r===n&&Cr(e,t)})}),function(a,c){switch(a){case Rp:{b2(e);return}case Iu:return r===n&&c(t),un(e,c)}}}function dr(i,e=II){return qt(i,Pn(e))}function uE(...i){return function(e,t){switch(e){case Rp:return;case Iu:return AZ(...i.map(r=>un(r,t)))}}}var Eo=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Eo||{});const NZ={0:"debug",3:"error",1:"log",2:"warn"},zZ=()=>typeof globalThis>"u"?window:globalThis,Pu=tn(()=>{const i=ti(3);return{log:ti((e,t,r=1)=>{var n;const a=(n=zZ().VIRTUOSO_LOG_LEVEL)!=null?n:Ca(i);r>=a&&console[NZ[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,t)}),logLevel:i}},[],{singleton:!0});function Kd(i,e,t){return w2(i,e,t).callbackRef}function w2(i,e,t){const r=he.useRef(null);let n=c=>{};const a=he.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(c=>{const s=()=>{const h=c[0].target;h.offsetParent!==null&&i(h)};t?s():requestAnimationFrame(s)}):null,[i,t]);return n=c=>{c&&e?(a==null||a.observe(c),r.current=c):(r.current&&(a==null||a.unobserve(r.current)),r.current=null)},{callbackRef:n,ref:r}}function jZ(i,e,t,r,n,a,c,s,h){const f=he.useCallback(m=>{const y=OZ(m.children,e,s?"offsetWidth":"offsetHeight",n);let g=m.parentElement;for(;!g.dataset.virtuosoScroller;)g=g.parentElement;const b=g.lastElementChild.dataset.viewportType==="window";let v;b&&(v=g.ownerDocument.defaultView);const _=c?s?c.scrollLeft:c.scrollTop:b?s?v.scrollX||v.document.documentElement.scrollLeft:v.scrollY||v.document.documentElement.scrollTop:s?g.scrollLeft:g.scrollTop,T=c?s?c.scrollWidth:c.scrollHeight:b?s?v.document.documentElement.scrollWidth:v.document.documentElement.scrollHeight:s?g.scrollWidth:g.scrollHeight,k=c?s?c.offsetWidth:c.offsetHeight:b?s?v.innerWidth:v.innerHeight:s?g.offsetWidth:g.offsetHeight;r({scrollHeight:T,scrollTop:Math.max(_,0),viewportHeight:k}),a==null||a(s?dE("column-gap",getComputedStyle(m).columnGap,n):dE("row-gap",getComputedStyle(m).rowGap,n)),y!==null&&i(y)},[i,e,n,a,c,r,s]);return w2(f,t,h)}function OZ(i,e,t,r){const n=i.length;if(n===0)return null;const a=[];for(let c=0;c<n;c++){const s=i.item(c);if(s.dataset.index===void 0)continue;const h=parseInt(s.dataset.index),f=parseFloat(s.dataset.knownSize),m=e(s,t);if(m===0&&r("Zero-sized element, this should not happen",{child:s},Eo.ERROR),m===f)continue;const y=a[a.length-1];a.length===0||y.size!==m||y.endIndex!==h-1?a.push({endIndex:h,size:m,startIndex:h}):a[a.length-1].endIndex++}return a}function dE(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Eo.WARN),e==="normal"?0:parseInt(e??"0",10)}function PI(i,e,t){const r=he.useRef(null),n=he.useCallback(h=>{if(!(h!=null&&h.offsetParent))return;const f=h.getBoundingClientRect(),m=f.width;let y,g;if(e){const b=e.getBoundingClientRect(),v=f.top-b.top;g=b.height-Math.max(0,v),y=v+e.scrollTop}else{const b=c.current.ownerDocument.defaultView;g=b.innerHeight-Math.max(0,f.top),y=f.top+b.scrollY}r.current={offsetTop:y,visibleHeight:g,visibleWidth:m},i(r.current)},[i,e]),{callbackRef:a,ref:c}=w2(n,!0,t),s=he.useCallback(()=>{n(c.current)},[n,c]);return he.useEffect(()=>{var h;if(e){e.addEventListener("scroll",s);const f=new ResizeObserver(()=>{requestAnimationFrame(s)});return f.observe(e),()=>{e.removeEventListener("scroll",s),f.unobserve(e)}}else{const f=(h=c.current)==null?void 0:h.ownerDocument.defaultView;return f==null||f.addEventListener("scroll",s),f==null||f.addEventListener("resize",s),()=>{f==null||f.removeEventListener("scroll",s),f==null||f.removeEventListener("resize",s)}}},[s,e,c]),a}const Ya=tn(()=>{const i=Ur(),e=Ur(),t=ti(0),r=Ur(),n=ti(0),a=Ur(),c=Ur(),s=ti(0),h=ti(0),f=ti(0),m=ti(0),y=Ur(),g=Ur(),b=ti(!1),v=ti(!1),_=ti(!1);return Fi(qt(i,Mi(({scrollTop:T})=>T)),e),Fi(qt(i,Mi(({scrollHeight:T})=>T)),c),Fi(e,n),{deviation:t,fixedFooterHeight:f,fixedHeaderHeight:h,footerHeight:m,headerHeight:s,horizontalDirection:v,scrollBy:g,scrollContainerState:i,scrollHeight:c,scrollingInProgress:b,scrollTo:y,scrollTop:e,skipAnimationFrameInResizeObserver:_,smoothScrollTargetReached:r,statefulScrollTop:n,viewportHeight:a}},[],{singleton:!0}),Bm={lvl:0};function DI(i,e){const t=i.length;if(t===0)return[];let{index:r,value:n}=e(i[0]);const a=[];for(let c=1;c<t;c++){const{index:s,value:h}=e(i[c]);a.push({end:s-1,start:r,value:n}),r=s,n=h}return a.push({end:1/0,start:r,value:n}),a}function _n(i){return i===Bm}function $m(i,e){if(!_n(i))return e===i.k?i.v:e<i.k?$m(i.l,e):$m(i.r,e)}function sl(i,e,t="k"){if(_n(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const r=sl(i.r,e,t);return r[0]===-1/0?[i.k,i.v]:r}return sl(i.l,e,t)}function _o(i,e,t){return _n(i)?NI(e,t,1):e===i.k?Ps(i,{k:e,v:t}):e<i.k?hE(Ps(i,{l:_o(i.l,e,t)})):hE(Ps(i,{r:_o(i.r,e,t)}))}function op(){return Bm}function Yv(i,e,t){if(_n(i))return[];const r=sl(i,e)[0];return FZ(dw(i,r,t))}function uw(i,e){if(_n(i))return Bm;const{k:t,l:r,r:n}=i;if(e===t){if(_n(r))return n;if(_n(n))return r;{const[a,c]=LI(r);return p0(Ps(i,{k:a,l:RI(r),v:c}))}}else return e<t?p0(Ps(i,{l:uw(r,e)})):p0(Ps(i,{r:uw(n,e)}))}function _d(i){return _n(i)?[]:[..._d(i.l),{k:i.k,v:i.v},..._d(i.r)]}function dw(i,e,t){if(_n(i))return[];const{k:r,l:n,r:a,v:c}=i;let s=[];return r>e&&(s=s.concat(dw(n,e,t))),r>=e&&r<=t&&s.push({k:r,v:c}),r<=t&&(s=s.concat(dw(a,e,t))),s}function p0(i){const{l:e,lvl:t,r}=i;if(r.lvl>=t-1&&e.lvl>=t-1)return i;if(t>r.lvl+1){if(Db(e))return zI(Ps(i,{lvl:t-1}));if(!_n(e)&&!_n(e.r))return Ps(e.r,{l:Ps(e,{r:e.r.l}),lvl:t,r:Ps(i,{l:e.r.r,lvl:t-1})});throw new Error("Unexpected empty nodes")}else{if(Db(i))return hw(Ps(i,{lvl:t-1}));if(!_n(r)&&!_n(r.l)){const n=r.l,a=Db(n)?r.lvl-1:r.lvl;return Ps(n,{l:Ps(i,{lvl:t-1,r:n.l}),lvl:n.lvl+1,r:hw(Ps(r,{l:n.r,lvl:a}))})}else throw new Error("Unexpected empty nodes")}}function Ps(i,e){return NI(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function RI(i){return _n(i.r)?i.l:p0(Ps(i,{r:RI(i.r)}))}function Db(i){return _n(i)||i.lvl>i.r.lvl}function LI(i){return _n(i.r)?[i.k,i.v]:LI(i.r)}function NI(i,e,t,r=Bm,n=Bm){return{k:i,l:r,lvl:t,r:n,v:e}}function hE(i){return hw(zI(i))}function zI(i){const{l:e}=i;return!_n(e)&&e.lvl===i.lvl?Ps(e,{r:Ps(i,{l:e.r})}):i}function hw(i){const{lvl:e,r:t}=i;return!_n(t)&&!_n(t.r)&&t.lvl===e&&t.r.lvl===e?Ps(t,{l:Ps(i,{r:t.l}),lvl:e+1}):i}function FZ(i){return DI(i,({k:e,v:t})=>({index:e,value:t}))}function jI(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}function Um(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}const _2=tn(()=>({recalcInProgress:ti(!1)}),[],{singleton:!0});function OI(i,e,t){return i[U0(i,e,t)]}function U0(i,e,t,r=0){let n=i.length-1;for(;r<=n;){const a=Math.floor((r+n)/2),c=i[a],s=t(c,e);if(s===0)return a;if(s===-1){if(n-r<2)return a-1;n=a-1}else{if(n===r)return a;r=a+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function BZ(i,e,t,r){const n=U0(i,e,r),a=U0(i,t,r,n);return i.slice(n,a+1)}function Su(i,e){return Math.round(i.getBoundingClientRect()[e])}function Zv(i){return!_n(i.groupOffsetTree)}function C2({index:i},e){return e===i?0:e<i?-1:1}function $Z(){return{groupIndices:[],groupOffsetTree:op(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:op()}}function UZ(i,e){let t=_n(i)?0:1/0;for(const r of e){const{endIndex:n,size:a,startIndex:c}=r;if(t=Math.min(t,c),_n(i)){i=_o(i,0,a);continue}const s=Yv(i,c-1,n+1);if(s.some(ZZ(r)))continue;let h=!1,f=!1;for(const{end:m,start:y,value:g}of s)h?(n>=y||a===g)&&(i=uw(i,y)):(f=g!==a,h=!0),m>n&&n>=y&&g!==a&&(i=_o(i,n+1,g));f&&(i=_o(i,c,a))}return[i,t]}function VZ(i){return typeof i.groupIndex<"u"}function HZ({offset:i},e){return e===i?0:e<i?-1:1}function Vm(i,e,t){if(e.length===0)return 0;const{index:r,offset:n,size:a}=OI(e,i,C2),c=i-r,s=a*c+(c-1)*t+n;return s>0?s+t:s}function FI(i,e){if(!Zv(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function BI(i,e,t){if(VZ(i))return e.groupIndices[i.groupIndex]+1;{const r=i.index==="LAST"?t:i.index;let n=FI(r,e);return n=Math.max(0,n,Math.min(t,n)),n}}function GZ(i,e,t,r=0){return r>0&&(e=Math.max(e,OI(i,r,C2).offset)),DI(BZ(i,e,t,HZ),YZ)}function qZ(i,[e,t,r,n]){e.length>0&&r("received item sizes",e,Eo.DEBUG);const a=i.sizeTree;let c=a,s=0;if(t.length>0&&_n(a)&&e.length===2){const g=e[0].size,b=e[1].size;c=t.reduce((v,_)=>_o(_o(v,_,g),_+1,b),c)}else[c,s]=UZ(c,e);if(c===a)return i;const{lastIndex:h,lastOffset:f,lastSize:m,offsetTree:y}=pw(i.offsetTree,s,c,n);return{groupIndices:t,groupOffsetTree:t.reduce((g,b)=>_o(g,b,Vm(b,y,n)),op()),lastIndex:h,lastOffset:f,lastSize:m,offsetTree:y,sizeTree:c}}function WZ(i){return _d(i).map(({k:e,v:t},r,n)=>{const a=n[r+1];return{endIndex:a?a.k-1:1/0,size:t,startIndex:e}})}function pE(i,e){let t=0,r=0;for(;t<i;)t+=e[r+1]-e[r]-1,r++;return r-(t===i?0:1)}function pw(i,e,t,r){let n=i,a=0,c=0,s=0,h=0;if(e!==0){h=U0(n,e-1,C2),s=n[h].offset;const f=sl(t,e-1);a=f[0],c=f[1],n.length&&n[h].size===sl(t,e)[1]&&(h-=1),n=n.slice(0,h+1)}else n=[];for(const{start:f,value:m}of Yv(t,e,1/0)){const y=f-a,g=y*c+s+y*r;n.push({index:f,offset:g,size:m}),a=f,s=g,c=m}return{lastIndex:a,lastOffset:s,lastSize:c,offsetTree:n}}function YZ(i){return{index:i.index,value:i}}function ZZ(i){const{endIndex:e,size:t,startIndex:r}=i;return n=>n.start===r&&(n.end===e||n.end===1/0)&&n.value===t}const XZ={offsetHeight:"height",offsetWidth:"width"},ql=tn(([{log:i},{recalcInProgress:e}])=>{const t=Ur(),r=Ur(),n=Ta(r,0),a=Ur(),c=Ur(),s=ti(0),h=ti([]),f=ti(void 0),m=ti(void 0),y=ti((M,S)=>Su(M,XZ[S])),g=ti(void 0),b=ti(0),v=$Z(),_=Ta(qt(t,Er(h,i,b),El(qZ,v),Pn()),v),T=Ta(qt(h,Pn(),El((M,S)=>({current:S,prev:M.current}),{current:[],prev:[]}),Mi(({prev:M})=>M)),[]);Fi(qt(h,ar(M=>M.length>0),Er(_,b),Mi(([M,S,N])=>{const Y=M.reduce((Z,K,B)=>_o(Z,K,Vm(K,S.offsetTree,N)||B),op());return{...S,groupIndices:M,groupOffsetTree:Y}})),_),Fi(qt(r,Er(_),ar(([M,{lastIndex:S}])=>M<S),Mi(([M,{lastIndex:S,lastSize:N}])=>[{endIndex:S,size:N,startIndex:M}])),t),Fi(f,m);const k=Ta(qt(f,Mi(M=>M===void 0)),!0);Fi(qt(m,ar(M=>M!==void 0&&_n(Ca(_).sizeTree)),Mi(M=>[{endIndex:0,size:M,startIndex:0}])),t);const w=So(qt(t,Er(_),El(({sizes:M},[S,N])=>({changed:N!==M,sizes:N}),{changed:!1,sizes:v}),Mi(M=>M.changed)));un(qt(s,El((M,S)=>({diff:M.prev-S,prev:S}),{diff:0,prev:0}),Mi(M=>M.diff)),M=>{const{groupIndices:S}=Ca(_);if(M>0)Cr(e,!0),Cr(a,M+pE(M,S));else if(M<0){const N=Ca(T);N.length>0&&(M-=pE(-M,N)),Cr(c,M)}}),un(qt(s,Er(i)),([M,S])=>{M<0&&S("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},Eo.ERROR)});const E=So(a);Fi(qt(a,Er(_),Mi(([M,S])=>{const N=S.groupIndices.length>0,Y=[],Z=S.lastSize;if(N){const K=$m(S.sizeTree,0);let B=0,F=0;for(;B<M;){const R=S.groupIndices[F],L=S.groupIndices.length===F+1?1/0:S.groupIndices[F+1]-R-1;Y.push({endIndex:R,size:K,startIndex:R}),Y.push({endIndex:R+1+L-1,size:Z,startIndex:R+1}),F++,B+=L+1}const O=_d(S.sizeTree);return B!==M&&O.shift(),O.reduce((R,{k:L,v:G})=>{let V=R.ranges;return R.prevSize!==0&&(V=[...R.ranges,{endIndex:L+M-1,size:R.prevSize,startIndex:R.prevIndex}]),{prevIndex:L+M,prevSize:G,ranges:V}},{prevIndex:M,prevSize:0,ranges:Y}).ranges}return _d(S.sizeTree).reduce((K,{k:B,v:F})=>({prevIndex:B+M,prevSize:F,ranges:[...K.ranges,{endIndex:B+M-1,size:K.prevSize,startIndex:K.prevIndex}]}),{prevIndex:0,prevSize:Z,ranges:[]}).ranges})),t);const A=So(qt(c,Er(_,b),Mi(([M,{offsetTree:S},N])=>{const Y=-M;return Vm(Y,S,N)})));return Fi(qt(c,Er(_,b),Mi(([M,S,N])=>{if(S.groupIndices.length>0){if(_n(S.sizeTree))return S;let Y=op();const Z=Ca(T);let K=0,B=0,F=0;for(;K<-M;){F=Z[B];const O=Z[B+1]-F-1;B++,K+=O+1}if(Y=_d(S.sizeTree).reduce((O,{k:R,v:L})=>_o(O,Math.max(0,R+M),L),Y),K!==-M){const O=$m(S.sizeTree,F);Y=_o(Y,0,O);const R=sl(S.sizeTree,-M+1)[1];Y=_o(Y,1,R)}return{...S,sizeTree:Y,...pw(S.offsetTree,0,Y,N)}}else{const Y=_d(S.sizeTree).reduce((Z,{k:K,v:B})=>_o(Z,Math.max(0,K+M),B),op());return{...S,sizeTree:Y,...pw(S.offsetTree,0,Y,N)}}})),_),{beforeUnshiftWith:E,data:g,defaultItemSize:m,firstItemIndex:s,fixedItemSize:f,gap:b,groupIndices:h,itemSize:y,listRefresh:w,shiftWith:c,shiftWithOffset:A,sizeRanges:t,sizes:_,statefulTotalCount:n,totalCount:r,trackItemSizes:k,unshiftWith:a}},Dn(Pu,_2),{singleton:!0});function KZ(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{groupIndices:[],totalCount:0})}const $I=tn(([{groupIndices:i,sizes:e,totalCount:t},{headerHeight:r,scrollTop:n}])=>{const a=Ur(),c=Ur(),s=So(qt(a,Mi(KZ)));return Fi(qt(s,Mi(h=>h.totalCount)),t),Fi(qt(s,Mi(h=>h.groupIndices)),i),Fi(qt(Rs(n,e,r),ar(([h,f])=>Zv(f)),Mi(([h,f,m])=>sl(f.groupOffsetTree,Math.max(h-m,0),"v")[0]),Pn(),Mi(h=>[h])),c),{groupCounts:a,topItemsIndexes:c}},Dn(ql,Ya)),Du=tn(([{log:i}])=>{const e=ti(!1),t=So(qt(e,ar(r=>r),Pn()));return un(e,r=>{r&&Ca(i)("props updated",{},Eo.DEBUG)}),{didMount:t,propsReady:e}},Dn(Pu),{singleton:!0}),QZ=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function UI(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!QZ)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const vg=tn(([{gap:i,listRefresh:e,sizes:t,totalCount:r},{fixedFooterHeight:n,fixedHeaderHeight:a,footerHeight:c,headerHeight:s,scrollingInProgress:h,scrollTo:f,smoothScrollTargetReached:m,viewportHeight:y},{log:g}])=>{const b=Ur(),v=Ur(),_=ti(0);let T=null,k=null,w=null;function E(){T&&(T(),T=null),w&&(w(),w=null),k&&(clearTimeout(k),k=null),Cr(h,!1)}return Fi(qt(b,Er(t,y,r,_,s,c,g),Er(i,a,n),Mi(([[A,M,S,N,Y,Z,K,B],F,O,R])=>{const L=UI(A),{align:G,behavior:V,offset:$}=L,q=N-1,W=BI(L,M,q);let se=Vm(W,M.offsetTree,F)+Z;G==="end"?(se+=O+sl(M.sizeTree,W)[1]-S+R,W===q&&(se+=K)):G==="center"?se+=(O+sl(M.sizeTree,W)[1]-S+R)/2:se-=Y,$&&(se+=$);const fe=re=>{E(),re?(B("retrying to scroll to",{location:A},Eo.DEBUG),Cr(b,A)):(Cr(v,!0),B("list did not change, scroll successful",{},Eo.DEBUG))};if(E(),V==="smooth"){let re=!1;w=un(e,le=>{re=re||le}),T=Ol(m,()=>{fe(re)})}else T=Ol(qt(e,JZ(150)),fe);return k=setTimeout(()=>{E()},1200),Cr(h,!0),B("scrolling from index to",{behavior:V,index:W,top:se},Eo.DEBUG),{behavior:V,top:se}})),f),{scrollTargetReached:v,scrollToIndex:b,topListHeight:_}},Dn(ql,Ya,Pu),{singleton:!0});function JZ(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return r=>{r&&(e(!0),clearTimeout(t))}}}function T2(i,e){i==0?e():requestAnimationFrame(()=>{T2(i-1,e)})}function S2(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const xg=tn(([{defaultItemSize:i,listRefresh:e,sizes:t},{scrollTop:r},{scrollTargetReached:n,scrollToIndex:a},{didMount:c}])=>{const s=ti(!0),h=ti(0),f=ti(!0);return Fi(qt(c,Er(h),ar(([m,y])=>!!y),wl(!1)),s),Fi(qt(c,Er(h),ar(([m,y])=>!!y),wl(!1)),f),un(qt(Rs(e,c),Er(s,t,i,f),ar(([[,m],y,{sizeTree:g},b,v])=>m&&(!_n(g)||x2(b))&&!y&&!v),Er(h)),([,m])=>{Ol(n,()=>{Cr(f,!0)}),T2(4,()=>{Ol(r,()=>{Cr(s,!0)}),Cr(a,m)})}),{initialItemFinalLocationReached:f,initialTopMostItemIndex:h,scrolledToInitialItem:s}},Dn(ql,Ya,vg,Du),{singleton:!0});function VI(i,e){return Math.abs(i-e)<1.01}const Hm="up",_m="down",eX="none",tX={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},iX=0,bg=tn(([{footerHeight:i,headerHeight:e,scrollBy:t,scrollContainerState:r,scrollTop:n,viewportHeight:a}])=>{const c=ti(!1),s=ti(!0),h=Ur(),f=Ur(),m=ti(4),y=ti(iX),g=Ta(qt(uE(qt(dr(n),yp(1),wl(!0)),qt(dr(n),yp(1),wl(!1),cE(100))),Pn()),!1),b=Ta(qt(uE(qt(t,wl(!0)),qt(t,wl(!1),cE(200))),Pn()),!1);Fi(qt(Rs(dr(n),dr(y)),Mi(([w,E])=>w<=E),Pn()),s),Fi(qt(s,hu(50)),f);const v=So(qt(Rs(r,dr(a),dr(e),dr(i),dr(m)),El((w,[{scrollHeight:E,scrollTop:A},M,S,N,Y])=>{const Z=A+M-E>-Y,K={scrollHeight:E,scrollTop:A,viewportHeight:M};if(Z){let F,O;return A>w.state.scrollTop?(F="SCROLLED_DOWN",O=w.state.scrollTop-A):(F="SIZE_DECREASED",O=w.state.scrollTop-A||w.scrollTopDelta),{atBottom:!0,atBottomBecause:F,scrollTopDelta:O,state:K}}let B;return K.scrollHeight>w.state.scrollHeight?B="SIZE_INCREASED":M<w.state.viewportHeight?B="VIEWPORT_HEIGHT_DECREASING":A<w.state.scrollTop?B="SCROLLING_UPWARDS":B="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:B,state:K}},tX),Pn((w,E)=>w&&w.atBottom===E.atBottom))),_=Ta(qt(r,El((w,{scrollHeight:E,scrollTop:A,viewportHeight:M})=>{if(VI(w.scrollHeight,E))return{changed:!1,jump:0,scrollHeight:E,scrollTop:A};{const S=E-(A+M)<1;return w.scrollTop!==A&&S?{changed:!0,jump:w.scrollTop-A,scrollHeight:E,scrollTop:A}:{changed:!0,jump:0,scrollHeight:E,scrollTop:A}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),ar(w=>w.changed),Mi(w=>w.jump)),0);Fi(qt(v,Mi(w=>w.atBottom)),c),Fi(qt(c,hu(50)),h);const T=ti(_m);Fi(qt(r,Mi(({scrollTop:w})=>w),Pn(),El((w,E)=>Ca(b)?{direction:w.direction,prevScrollTop:E}:{direction:E<w.prevScrollTop?Hm:_m,prevScrollTop:E},{direction:_m,prevScrollTop:0}),Mi(w=>w.direction)),T),Fi(qt(r,hu(50),wl(eX)),T);const k=ti(0);return Fi(qt(g,ar(w=>!w),wl(0)),k),Fi(qt(n,hu(100),Er(g),ar(([w,E])=>!!E),El(([w,E],[A])=>[E,A],[0,0]),Mi(([w,E])=>E-w)),k),{atBottomState:v,atBottomStateChange:h,atBottomThreshold:m,atTopStateChange:f,atTopThreshold:y,isAtBottom:c,isAtTop:s,isScrolling:g,lastJumpDueToItemResize:_,scrollDirection:T,scrollVelocity:k}},Dn(Ya)),V0="top",H0="bottom",fE="none";function mE(i,e,t){return typeof i=="number"?t===Hm&&e===V0||t===_m&&e===H0?i:0:t===Hm?e===V0?i.main:i.reverse:e===H0?i.main:i.reverse}function gE(i,e){var t;return typeof i=="number"?i:(t=i[e])!=null?t:0}const E2=tn(([{deviation:i,fixedHeaderHeight:e,headerHeight:t,scrollTop:r,viewportHeight:n}])=>{const a=Ur(),c=ti(0),s=ti(0),h=ti(0),f=Ta(qt(Rs(dr(r),dr(n),dr(t),dr(a,Um),dr(h),dr(c),dr(e),dr(i),dr(s)),Mi(([m,y,g,[b,v],_,T,k,w,E])=>{const A=m-w,M=T+k,S=Math.max(g-A,0);let N=fE;const Y=gE(E,V0),Z=gE(E,H0);return b-=w,b+=g+k,v+=g+k,v-=w,b>m+M-Y&&(N=Hm),v<m-S+y+Z&&(N=_m),N!==fE?[Math.max(A-g-mE(_,V0,N)-Y,0),A-S-k+y+mE(_,H0,N)+Z]:null}),ar(m=>m!=null),Pn(Um)),[0,0]);return{increaseViewportBy:s,listBoundary:a,overscan:h,topListHeight:c,visibleRange:f}},Dn(Ya),{singleton:!0});function rX(i,e,t){if(Zv(e)){const r=FI(i,e);return[{index:sl(e.groupOffsetTree,r)[0],offset:0,size:0},{data:t==null?void 0:t[0],index:r,offset:0,size:0}]}return[{data:t==null?void 0:t[0],index:i,offset:0,size:0}]}const Rb={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function f0(i,e,t,r,n,a){const{lastIndex:c,lastOffset:s,lastSize:h}=n;let f=0,m=0;if(i.length>0){f=i[0].offset;const _=i[i.length-1];m=_.offset+_.size}const y=t-c,g=s+y*h+(y-1)*r,b=f,v=g-m;return{bottom:m,firstItemIndex:a,items:yE(i,n,a),offsetBottom:v,offsetTop:f,top:b,topItems:yE(e,n,a),topListHeight:e.reduce((_,T)=>T.size+_,0),totalCount:t}}function HI(i,e,t,r,n,a){let c=0;if(t.groupIndices.length>0)for(const m of t.groupIndices){if(m-c>=i)break;c++}const s=i+c,h=S2(e,s),f=Array.from({length:s}).map((m,y)=>({data:a[y+h],index:y+h,offset:0,size:0}));return f0(f,[],s,n,t,r)}function yE(i,e,t){if(i.length===0)return[];if(!Zv(e))return i.map(f=>({...f,index:f.index+t,originalIndex:f.index}));const r=i[0].index,n=i[i.length-1].index,a=[],c=Yv(e.groupOffsetTree,r,n);let s,h=0;for(const f of i){(!s||s.end<f.index)&&(s=c.shift(),h=e.groupIndices.indexOf(s.start));let m;f.index===s.start?m={index:h,type:"group"}:m={groupIndex:h,index:f.index-(h+1)+t},a.push({...m,data:f.data,offset:f.offset,originalIndex:f.index,size:f.size})}return a}const Qd=tn(([{data:i,firstItemIndex:e,gap:t,sizes:r,totalCount:n},a,{listBoundary:c,topListHeight:s,visibleRange:h},{initialTopMostItemIndex:f,scrolledToInitialItem:m},{topListHeight:y},g,{didMount:b},{recalcInProgress:v}])=>{const _=ti([]),T=ti(0),k=Ur();Fi(a.topItemsIndexes,_);const w=Ta(qt(Rs(b,v,dr(h,Um),dr(n),dr(r),dr(f),m,dr(_),dr(e),dr(t),i),ar(([S,N,,Y,,,,,,,Z])=>{const K=Z&&Z.length!==Y;return S&&!N&&!K}),Mi(([,,[S,N],Y,Z,K,B,F,O,R,L])=>{const G=Z,{offsetTree:V,sizeTree:$}=G,q=Ca(T);if(Y===0)return{...Rb,totalCount:Y};if(S===0&&N===0)return q===0?{...Rb,totalCount:Y}:HI(q,K,Z,O,R,L||[]);if(_n($))return q>0?null:f0(rX(S2(K,Y),G,L),[],Y,R,G,O);const W=[];if(F.length>0){const Se=F[0],ye=F[F.length-1];let Ee=0;for(const J of Yv($,Se,ye)){const ie=J.value,oe=Math.max(J.start,Se),we=Math.min(J.end,ye);for(let ee=oe;ee<=we;ee++)W.push({data:L==null?void 0:L[ee],index:ee,offset:Ee,size:ie}),Ee+=ie}}if(!B)return f0([],W,Y,R,G,O);const se=F.length>0?F[F.length-1]+1:0,fe=GZ(V,S,N,se);if(fe.length===0)return null;const re=Y-1,le=Wv([],Se=>{for(const ye of fe){const Ee=ye.value;let J=Ee.offset,ie=ye.start;const oe=Ee.size;if(Ee.offset<S){ie+=Math.floor((S-Ee.offset+R)/(oe+R));const ee=ie-ye.start;J+=ee*oe+ee*R}ie<se&&(J+=(se-ie)*oe,ie=se);const we=Math.min(ye.end,re);for(let ee=ie;ee<=we&&!(J>=N);ee++)Se.push({data:L==null?void 0:L[ee],index:ee,offset:J,size:oe}),J+=oe+R}});return f0(le,W,Y,R,G,O)}),ar(S=>S!==null),Pn()),Rb);Fi(qt(i,ar(x2),Mi(S=>S==null?void 0:S.length)),n),Fi(qt(w,Mi(S=>S.topListHeight)),y),Fi(y,s),Fi(qt(w,Mi(S=>[S.top,S.bottom])),c),Fi(qt(w,Mi(S=>S.items)),k);const E=So(qt(w,ar(({items:S})=>S.length>0),Er(n,i),ar(([{items:S},N])=>S[S.length-1].originalIndex===N-1),Mi(([,S,N])=>[S-1,N]),Pn(Um),Mi(([S])=>S))),A=So(qt(w,hu(200),ar(({items:S,topItems:N})=>S.length>0&&S[0].originalIndex===N.length),Mi(({items:S})=>S[0].index),Pn())),M=So(qt(w,ar(({items:S})=>S.length>0),Mi(({items:S})=>{let N=0,Y=S.length-1;for(;S[N].type==="group"&&N<Y;)N++;for(;S[Y].type==="group"&&Y>N;)Y--;return{endIndex:S[Y].index,startIndex:S[N].index}}),Pn(jI)));return{endReached:E,initialItemCount:T,itemsRendered:k,listState:w,rangeChanged:M,startReached:A,topItemsIndexes:_,...g}},Dn(ql,$I,E2,xg,vg,bg,Du,_2),{singleton:!0}),GI=tn(([{fixedFooterHeight:i,fixedHeaderHeight:e,footerHeight:t,headerHeight:r},{listState:n}])=>{const a=Ur(),c=Ta(qt(Rs(t,i,r,e,n),Mi(([s,h,f,m,y])=>s+h+f+m+y.offsetBottom+y.bottom)),0);return Fi(dr(c),a),{totalListHeight:c,totalListHeightChanged:a}},Dn(Ya,Qd),{singleton:!0}),nX=tn(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ti(!1),r=Ta(qt(Rs(t,i,e),ar(([n])=>n),Mi(([,n,a])=>Math.max(0,n-a)),hu(0),Pn()),0);return{alignToBottom:t,paddingTopAddition:r}},Dn(Ya,GI),{singleton:!0});function vE(i){return i?i==="smooth"?"smooth":"auto":!1}const sX=(i,e)=>typeof i=="function"?vE(i(e)):e&&vE(i),aX=tn(([{listRefresh:i,totalCount:e},{atBottomState:t,isAtBottom:r},{scrollToIndex:n},{scrolledToInitialItem:a},{didMount:c,propsReady:s},{log:h},{scrollingInProgress:f}])=>{const m=ti(!1),y=Ur();let g=null;function b(_){Cr(n,{align:"end",behavior:_,index:"LAST"})}un(qt(Rs(qt(dr(e),yp(1)),c),Er(dr(m),r,a,f),Mi(([[_,T],k,w,E,A])=>{let M=T&&E,S="auto";return M&&(S=sX(k,w||A),M=M&&!!S),{followOutputBehavior:S,shouldFollow:M,totalCount:_}}),ar(({shouldFollow:_})=>_)),({followOutputBehavior:_,totalCount:T})=>{g&&(g(),g=null),g=Ol(i,()=>{Ca(h)("following output to ",{totalCount:T},Eo.DEBUG),b(_),g=null})});function v(_){const T=Ol(t,k=>{_&&!k.atBottom&&k.notAtBottomBecause==="SIZE_INCREASED"&&!g&&(Ca(h)("scrolling to bottom due to increased size",{},Eo.DEBUG),b("auto"))});setTimeout(T,100)}return un(qt(Rs(dr(m),e,s),ar(([_,,T])=>_&&T),El(({value:_},[,T])=>({refreshed:_===T,value:T}),{refreshed:!1,value:0}),ar(({refreshed:_})=>_),Er(m,e)),([,_])=>{Ca(a)&&v(_!==!1)}),un(y,()=>{v(Ca(m)!==!1)}),un(Rs(dr(m),t),([_,T])=>{_&&!T.atBottom&&T.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&b("auto")}),{autoscrollToBottom:y,followOutput:m}},Dn(ql,bg,vg,xg,Du,Pu,Ya)),oX=tn(([{data:i,firstItemIndex:e,gap:t,sizes:r},{initialTopMostItemIndex:n},{initialItemCount:a,listState:c},{didMount:s}])=>(Fi(qt(s,Er(a),ar(([,h])=>h!==0),Er(n,r,e,t,i),Mi(([[,h],f,m,y,g,b=[]])=>HI(h,f,m,y,g,b))),c),{}),Dn(ql,xg,Qd,Du),{singleton:!0}),lX=tn(([{didMount:i},{scrollTo:e},{listState:t}])=>{const r=ti(0);return un(qt(i,Er(r),ar(([,n])=>n!==0),Mi(([,n])=>({top:n}))),n=>{Ol(qt(t,yp(1),ar(a=>a.items.length>1)),()=>{requestAnimationFrame(()=>{Cr(e,n)})})}),{initialScrollTop:r}},Dn(Du,Ya,Qd),{singleton:!0}),cX=({itemBottom:i,itemTop:e,locationParams:{align:t,behavior:r,...n},viewportBottom:a,viewportTop:c})=>e<c?{...n,align:t??"start",behavior:r}:i>a?{...n,align:t??"end",behavior:r}:null,uX=tn(([{gap:i,sizes:e,totalCount:t},{fixedFooterHeight:r,fixedHeaderHeight:n,headerHeight:a,scrollingInProgress:c,scrollTop:s,viewportHeight:h},{scrollToIndex:f}])=>{const m=Ur();return Fi(qt(m,Er(e,h,t,a,n,r,s),Er(i),Mi(([[y,g,b,v,_,T,k,w],E])=>{const{align:A,behavior:M,calculateViewLocation:S=cX,done:N,...Y}=y,Z=BI(y,g,v-1),K=Vm(Z,g.offsetTree,E)+_+T,B=K+sl(g.sizeTree,Z)[1],F=w+T,O=w+b-k,R=S({itemBottom:B,itemTop:K,locationParams:{align:A,behavior:M,...Y},viewportBottom:O,viewportTop:F});return R?N&&Ol(qt(c,ar(L=>!L),yp(Ca(c)?1:2)),N):N&&N(),R}),ar(y=>y!==null)),f),{scrollIntoView:m}},Dn(ql,Ya,vg,Qd,Pu),{singleton:!0}),qI=tn(([{scrollVelocity:i}])=>{const e=ti(!1),t=Ur(),r=ti(!1);return Fi(qt(i,Er(r,e,t),ar(([n,a])=>!!a),Mi(([n,a,c,s])=>{const{enter:h,exit:f}=a;if(c){if(f(n,s))return!1}else if(h(n,s))return!0;return c}),Pn()),e),un(qt(Rs(e,i,t),Er(r)),([[n,a,c],s])=>{n&&s&&s.change&&s.change(a,c)}),{isSeeking:e,scrollSeekConfiguration:r,scrollSeekRangeChanged:t,scrollVelocity:i}},Dn(bg),{singleton:!0}),k2=tn(([{scrollContainerState:i,scrollTo:e}])=>{const t=Ur(),r=Ur(),n=Ur(),a=ti(!1),c=ti(void 0);return Fi(qt(Rs(t,r),Mi(([{scrollHeight:s,scrollTop:h,viewportHeight:f},{offsetTop:m}])=>({scrollHeight:s,scrollTop:Math.max(0,h-m),viewportHeight:f}))),i),Fi(qt(e,Er(r),Mi(([s,{offsetTop:h}])=>({...s,top:s.top+h}))),n),{customScrollParent:c,useWindowScroll:a,windowScrollContainerState:t,windowScrollTo:n,windowViewportRect:r}},Dn(Ya)),dX=tn(([{sizeRanges:i,sizes:e},{headerHeight:t,scrollTop:r},{initialTopMostItemIndex:n},{didMount:a},{useWindowScroll:c,windowScrollContainerState:s,windowViewportRect:h}])=>{const f=Ur(),m=ti(void 0),y=ti(null),g=ti(null);return Fi(s,y),Fi(h,g),un(qt(f,Er(e,r,c,y,g,t)),([b,v,_,T,k,w,E])=>{const A=WZ(v.sizeTree);T&&k!==null&&w!==null&&(_=k.scrollTop-w.offsetTop),_-=E,b({ranges:A,scrollTop:_})}),Fi(qt(m,ar(x2),Mi(hX)),n),Fi(qt(a,Er(m),ar(([,b])=>b!==void 0),Pn(),Mi(([,b])=>b.ranges)),i),{getState:f,restoreStateFrom:m}},Dn(ql,Ya,xg,Du,k2));function hX(i){return{align:"start",index:0,offset:i.scrollTop}}const pX=tn(([{topItemsIndexes:i}])=>{const e=ti(0);return Fi(qt(e,ar(t=>t>=0),Mi(t=>Array.from({length:t}).map((r,n)=>n))),i),{topItemCount:e}},Dn(Qd));function WI(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const fX=WI(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),mX=tn(([{deviation:i,scrollBy:e,scrollingInProgress:t,scrollTop:r},{isAtBottom:n,isScrolling:a,lastJumpDueToItemResize:c,scrollDirection:s},{listState:h},{beforeUnshiftWith:f,gap:m,shiftWithOffset:y,sizes:g},{log:b},{recalcInProgress:v}])=>{const _=So(qt(h,Er(c),El(([,k,w,E],[{bottom:A,items:M,offsetBottom:S,totalCount:N},Y])=>{const Z=A+S;let K=0;return w===N&&k.length>0&&M.length>0&&(M[0].originalIndex===0&&k[0].originalIndex===0||(K=Z-E,K!==0&&(K+=Y))),[K,M,N,Z]},[0,[],0,0]),ar(([k])=>k!==0),Er(r,s,t,n,b,v),ar(([,k,w,E,,,A])=>!A&&!E&&k!==0&&w===Hm),Mi(([[k],,,,,w])=>(w("Upward scrolling compensation",{amount:k},Eo.DEBUG),k))));function T(k){k>0?(Cr(e,{behavior:"auto",top:-k}),Cr(i,0)):(Cr(i,0),Cr(e,{behavior:"auto",top:-k}))}return un(qt(_,Er(i,a)),([k,w,E])=>{E&&fX()?Cr(i,w-k):T(-k)}),un(qt(Rs(Ta(a,!1),i,v),ar(([k,w,E])=>!k&&!E&&w!==0),Mi(([k,w])=>w),hu(1)),T),Fi(qt(y,Mi(k=>({top:-k}))),e),un(qt(f,Er(g,m),Mi(([k,{groupIndices:w,lastSize:E,sizeTree:A},M])=>{function S(N){return N*(E+M)}if(w.length===0)return S(k);{let N=0;const Y=$m(A,0);let Z=0,K=0;for(;Z<k;){Z++,N+=Y;let B=w.length===K+1?1/0:w[K+1]-w[K]-1;Z+B>k&&(N-=Y,B=k-Z+1),Z+=B,N+=S(B),K++}return N}})),k=>{Cr(i,k),requestAnimationFrame(()=>{Cr(e,{top:k}),requestAnimationFrame(()=>{Cr(i,0),Cr(v,!1)})})}),{deviation:i}},Dn(Ya,bg,Qd,ql,Pu,_2)),gX=tn(([i,e,t,r,n,a,c,s,h,f])=>({...i,...e,...t,...r,...n,...a,...c,...s,...h,...f}),Dn(E2,oX,Du,qI,GI,lX,nX,k2,uX,Pu)),YI=tn(([{data:i,defaultItemSize:e,firstItemIndex:t,fixedItemSize:r,gap:n,groupIndices:a,itemSize:c,sizeRanges:s,sizes:h,statefulTotalCount:f,totalCount:m,trackItemSizes:y},{initialItemFinalLocationReached:g,initialTopMostItemIndex:b,scrolledToInitialItem:v},_,T,k,{listState:w,topItemsIndexes:E,...A},{scrollToIndex:M},S,{topItemCount:N},{groupCounts:Y},Z])=>(Fi(A.rangeChanged,Z.scrollSeekRangeChanged),Fi(qt(Z.windowViewportRect,Mi(K=>K.visibleHeight)),_.viewportHeight),{data:i,defaultItemHeight:e,firstItemIndex:t,fixedItemHeight:r,gap:n,groupCounts:Y,initialItemFinalLocationReached:g,initialTopMostItemIndex:b,scrolledToInitialItem:v,sizeRanges:s,topItemCount:N,topItemsIndexes:E,totalCount:m,...k,groupIndices:a,itemSize:c,listState:w,scrollToIndex:M,statefulTotalCount:f,trackItemSizes:y,...A,...Z,..._,sizes:h,...T}),Dn(ql,xg,Ya,dX,aX,Qd,vg,mX,pX,$I,gX));function yX(i,e){const t={},r={};let n=0;const a=i.length;for(;n<a;)r[i[n]]=1,n+=1;for(const c in e)Object.hasOwn(r,c)||(t[c]=e[c]);return t}const $y=typeof document<"u"?he.useLayoutEffect:he.useEffect;function ZI(i,e,t){const r=Object.keys(e.required||{}),n=Object.keys(e.optional||{}),a=Object.keys(e.methods||{}),c=Object.keys(e.events||{}),s=he.createContext({});function h(T,k){T.propsReady&&Cr(T.propsReady,!1);for(const w of r){const E=T[e.required[w]];Cr(E,k[w])}for(const w of n)if(w in k){const E=T[e.optional[w]];Cr(E,k[w])}T.propsReady&&Cr(T.propsReady,!0)}function f(T){return a.reduce((k,w)=>(k[w]=E=>{const A=T[e.methods[w]];Cr(A,E)},k),{})}function m(T){return c.reduce((k,w)=>(k[w]=DZ(T[e.events[w]]),k),{})}const y=he.forwardRef((T,k)=>{const{children:w,...E}=T,[A]=he.useState(()=>Wv(LZ(i),N=>{h(N,E)})),[M]=he.useState(lE(m,A));$y(()=>{for(const N of c)N in E&&un(M[N],E[N]);return()=>{Object.values(M).map(b2)}},[E,M,A]),$y(()=>{h(A,E)}),he.useImperativeHandle(k,oE(f(A)));const S=t;return z.jsx(s.Provider,{value:A,children:t?z.jsx(S,{...yX([...r,...n,...c],E),children:w}):w})}),g=T=>{const k=he.useContext(s);return he.useCallback(w=>{Cr(k[T],w)},[k,T])},b=T=>{const k=he.useContext(s)[T],w=he.useCallback(E=>un(k,E),[k]);return he.useSyncExternalStore(w,()=>Ca(k),()=>Ca(k))},v=T=>{const k=he.useContext(s)[T],[w,E]=he.useState(lE(Ca,k));return $y(()=>un(k,A=>{A!==w&&E(oE(A))}),[k,w]),w},_=he.version.startsWith("18")?b:v;return{Component:y,useEmitter:(T,k)=>{const w=he.useContext(s)[T];$y(()=>un(w,k),[k,w])},useEmitterValue:_,usePublisher:g}}const XI=he.createContext(void 0),KI=he.createContext(void 0),QI=typeof document<"u"?he.useLayoutEffect:he.useEffect;function Lb(i){return"self"in i}function vX(i){return"body"in i}function JI(i,e,t,r=Lp,n,a){const c=he.useRef(null),s=he.useRef(null),h=he.useRef(null),f=he.useCallback(g=>{let b,v,_;const T=g.target;if(vX(T)||Lb(T)){const w=Lb(T)?T:T.defaultView;_=a?w.scrollX:w.scrollY,b=a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight,v=a?w.innerWidth:w.innerHeight}else _=a?T.scrollLeft:T.scrollTop,b=a?T.scrollWidth:T.scrollHeight,v=a?T.offsetWidth:T.offsetHeight;const k=()=>{i({scrollHeight:b,scrollTop:Math.max(_,0),viewportHeight:v})};g.suppressFlushSync?k():wR.flushSync(k),s.current!==null&&(_===s.current||_<=0||_===b-v)&&(s.current=null,e(!0),h.current&&(clearTimeout(h.current),h.current=null))},[i,e,a]);he.useEffect(()=>{const g=n||c.current;return r(n||c.current),f({suppressFlushSync:!0,target:g}),g.addEventListener("scroll",f,{passive:!0}),()=>{r(null),g.removeEventListener("scroll",f)}},[c,f,t,r,n]);function m(g){const b=c.current;if(!b||(a?"offsetWidth"in b&&b.offsetWidth===0:"offsetHeight"in b&&b.offsetHeight===0))return;const v=g.behavior==="smooth";let _,T,k;Lb(b)?(T=Math.max(Su(b.document.documentElement,a?"width":"height"),a?b.document.documentElement.scrollWidth:b.document.documentElement.scrollHeight),_=a?b.innerWidth:b.innerHeight,k=a?window.scrollX:window.scrollY):(T=b[a?"scrollWidth":"scrollHeight"],_=Su(b,a?"width":"height"),k=b[a?"scrollLeft":"scrollTop"]);const w=T-_;if(g.top=Math.ceil(Math.max(Math.min(w,g.top),0)),VI(_,T)||g.top===k){i({scrollHeight:T,scrollTop:k,viewportHeight:_}),v&&e(!0);return}v?(s.current=g.top,h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{h.current=null,s.current=null,e(!0)},1e3)):s.current=null,a&&(g={behavior:g.behavior,left:g.top}),b.scrollTo(g)}function y(g){a&&(g={behavior:g.behavior,left:g.top}),c.current.scrollBy(g)}return{scrollByCallback:y,scrollerRef:c,scrollToCallback:m}}const Nb="-webkit-sticky",xE="sticky",eP=WI(()=>{if(typeof document>"u")return xE;const i=document.createElement("div");return i.style.position=Nb,i.style.position===Nb?Nb:xE});function M2(i){return i}const xX=tn(()=>{const i=ti(h=>`Item ${h}`),e=ti(null),t=ti(h=>`Group ${h}`),r=ti({}),n=ti(M2),a=ti("div"),c=ti(Lp),s=(h,f=null)=>Ta(qt(r,Mi(m=>m[h]),Pn()),f);return{components:r,computeItemKey:n,context:e,EmptyPlaceholder:s("EmptyPlaceholder"),FooterComponent:s("Footer"),GroupComponent:s("Group","div"),groupContent:t,HeaderComponent:s("Header"),HeaderFooterTag:a,ItemComponent:s("Item","div"),itemContent:i,ListComponent:s("List","div"),ScrollerComponent:s("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TopItemListComponent:s("TopItemList")}}),bX=tn(([i,e])=>({...i,...e}),Dn(YI,xX)),wX=({height:i})=>z.jsx("div",{style:{height:i}}),_X={overflowAnchor:"none",position:eP(),zIndex:1},tP={overflowAnchor:"none"},CX={...tP,display:"inline-block",height:"100%"},bE=he.memo(function({showTopList:i=!1}){const e=pr("listState"),t=Fo("sizeRanges"),r=pr("useWindowScroll"),n=pr("customScrollParent"),a=Fo("windowScrollContainerState"),c=Fo("scrollContainerState"),s=n||r?a:c,h=pr("itemContent"),f=pr("context"),m=pr("groupContent"),y=pr("trackItemSizes"),g=pr("itemSize"),b=pr("log"),v=Fo("gap"),_=pr("horizontalDirection"),{callbackRef:T}=jZ(t,g,y,i?Lp:s,b,v,n,_,pr("skipAnimationFrameInResizeObserver")),[k,w]=he.useState(0);A2("deviation",R=>{k!==R&&w(R)});const E=pr("EmptyPlaceholder"),A=pr("ScrollSeekPlaceholder")||wX,M=pr("ListComponent"),S=pr("ItemComponent"),N=pr("GroupComponent"),Y=pr("computeItemKey"),Z=pr("isSeeking"),K=pr("groupIndices").length>0,B=pr("alignToBottom"),F=pr("initialItemFinalLocationReached"),O=i?{}:{boxSizing:"border-box",..._?{display:"inline-block",height:"100%",marginLeft:k!==0?k:B?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:k!==0?k:B?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...F?{}:{visibility:"hidden"}};return!i&&e.totalCount===0&&E?z.jsx(E,{...la(E,f)}):z.jsx(M,{...la(M,f),"data-testid":i?"virtuoso-top-item-list":"virtuoso-item-list",ref:T,style:O,children:(i?e.topItems:e.items).map(R=>{const L=R.originalIndex,G=Y(L+e.firstItemIndex,R.data,f);return Z?Ae.createElement(A,{...la(A,f),height:R.size,index:R.index,key:G,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?Ae.createElement(N,{...la(N,f),"data-index":L,"data-item-index":R.index,"data-known-size":R.size,key:G,style:_X},m(R.index,f)):Ae.createElement(S,{...la(S,f),...kX(S,R.data),"data-index":L,"data-item-group-index":R.groupIndex,"data-item-index":R.index,"data-known-size":R.size,key:G,style:_?CX:tP},K?h(R.index,R.groupIndex,R.data,f):h(R.index,R.data,f))})})}),TX={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},SX={outline:"none",overflowX:"auto",position:"relative"},Xv=i=>({height:"100%",position:"absolute",top:0,width:"100%",...i?{display:"flex",flexDirection:"column"}:{}}),EX={position:eP(),top:0,width:"100%",zIndex:1};function la(i,e){if(typeof i!="string")return{context:e}}function kX(i,e){return{item:typeof i=="string"?void 0:e}}const MX=he.memo(function(){const i=pr("HeaderComponent"),e=Fo("headerHeight"),t=pr("HeaderFooterTag"),r=Kd(he.useMemo(()=>a=>{e(Su(a,"height"))},[e]),!0,pr("skipAnimationFrameInResizeObserver")),n=pr("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...la(i,n)})}):null}),AX=he.memo(function(){const i=pr("FooterComponent"),e=Fo("footerHeight"),t=pr("HeaderFooterTag"),r=Kd(he.useMemo(()=>a=>{e(Su(a,"height"))},[e]),!0,pr("skipAnimationFrameInResizeObserver")),n=pr("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...la(i,n)})}):null});function iP({useEmitter:i,useEmitterValue:e,usePublisher:t}){return he.memo(function({children:r,style:n,...a}){const c=t("scrollContainerState"),s=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),f=e("scrollerRef"),m=e("context"),y=e("horizontalDirection")||!1,{scrollByCallback:g,scrollerRef:b,scrollToCallback:v}=JI(c,h,s,f,void 0,y);return i("scrollTo",v),i("scrollBy",g),z.jsx(s,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:b,style:{...y?SX:TX,...n},tabIndex:0,...a,...la(s,m),children:r})})}function rP({useEmitter:i,useEmitterValue:e,usePublisher:t}){return he.memo(function({children:r,style:n,...a}){const c=t("windowScrollContainerState"),s=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),f=e("totalListHeight"),m=e("deviation"),y=e("customScrollParent"),g=e("context"),b=he.useRef(null),v=e("scrollerRef"),{scrollByCallback:_,scrollerRef:T,scrollToCallback:k}=JI(c,h,s,v,y);return QI(()=>{var w;return T.current=y||((w=b.current)==null?void 0:w.ownerDocument.defaultView),()=>{T.current=null}},[T,y]),i("windowScrollTo",k),i("scrollBy",_),z.jsx(s,{ref:b,"data-virtuoso-scroller":!0,style:{position:"relative",...n,...f!==0?{height:f+m}:{}},...a,...la(s,g),children:r})})}const IX=({children:i})=>{const e=he.useContext(XI),t=Fo("viewportHeight"),r=Fo("fixedItemHeight"),n=pr("alignToBottom"),a=pr("horizontalDirection"),c=he.useMemo(()=>AI(t,h=>Su(h,a?"width":"height")),[t,a]),s=Kd(c,!0,pr("skipAnimationFrameInResizeObserver"));return he.useEffect(()=>{e&&(t(e.viewportHeight),r(e.itemHeight))},[e,t,r]),z.jsx("div",{"data-viewport-type":"element",ref:s,style:Xv(n),children:i})},PX=({children:i})=>{const e=he.useContext(XI),t=Fo("windowViewportRect"),r=Fo("fixedItemHeight"),n=pr("customScrollParent"),a=PI(t,n,pr("skipAnimationFrameInResizeObserver")),c=pr("alignToBottom");return he.useEffect(()=>{e&&(r(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,r]),z.jsx("div",{"data-viewport-type":"window",ref:a,style:Xv(c),children:i})},DX=({children:i})=>{const e=pr("TopItemListComponent")||"div",t=pr("headerHeight"),r={...EX,marginTop:`${t}px`},n=pr("context");return z.jsx(e,{style:r,...la(e,n),children:i})},RX=he.memo(function(i){const e=pr("useWindowScroll"),t=pr("topItemsIndexes").length>0,r=pr("customScrollParent"),n=pr("context"),a=r||e?zX:NX,c=r||e?PX:IX;return z.jsxs(a,{...i,...la(a,n),children:[t&&z.jsx(DX,{children:z.jsx(bE,{showTopList:!0})}),z.jsxs(c,{children:[z.jsx(MX,{}),z.jsx(bE,{}),z.jsx(AX,{})]})]})}),{Component:LX,useEmitter:A2,useEmitterValue:pr,usePublisher:Fo}=ZI(bX,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},RX),NX=iP({useEmitter:A2,useEmitterValue:pr,usePublisher:Fo}),zX=rP({useEmitter:A2,useEmitterValue:pr,usePublisher:Fo}),jX=LX,OX=tn(()=>{const i=ti(h=>z.jsxs("td",{children:["Item $",h]})),e=ti(null),t=ti(null),r=ti(null),n=ti({}),a=ti(M2),c=ti(Lp),s=(h,f=null)=>Ta(qt(n,Mi(m=>m[h]),Pn()),f);return{components:n,computeItemKey:a,context:e,EmptyPlaceholder:s("EmptyPlaceholder"),FillerRow:s("FillerRow"),fixedFooterContent:r,fixedHeaderContent:t,itemContent:i,ScrollerComponent:s("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TableBodyComponent:s("TableBody","tbody"),TableComponent:s("Table","table"),TableFooterComponent:s("TableFoot","tfoot"),TableHeadComponent:s("TableHead","thead"),TableRowComponent:s("TableRow","tr")}});Dn(YI,OX);const wE={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},FX={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:_E,floor:G0,max:Cm,min:zb,round:CE}=Math;function TE(i,e,t){return Array.from({length:e-i+1}).map((r,n)=>({data:t===null?null:t[n+i],index:n+i}))}function BX(i){return{...FX,items:i}}function Uy(i,e){return i&&i.width===e.width&&i.height===e.height}function $X(i,e){return i&&i.column===e.column&&i.row===e.row}const UX=tn(([{increaseViewportBy:i,listBoundary:e,overscan:t,visibleRange:r},{footerHeight:n,headerHeight:a,scrollBy:c,scrollContainerState:s,scrollTo:h,scrollTop:f,smoothScrollTargetReached:m,viewportHeight:y},g,b,{didMount:v,propsReady:_},{customScrollParent:T,useWindowScroll:k,windowScrollContainerState:w,windowScrollTo:E,windowViewportRect:A},M])=>{const S=ti(0),N=ti(0),Y=ti(wE),Z=ti({height:0,width:0}),K=ti({height:0,width:0}),B=Ur(),F=Ur(),O=ti(0),R=ti(null),L=ti({column:0,row:0}),G=Ur(),V=Ur(),$=ti(!1),q=ti(0),W=ti(!0),se=ti(!1),fe=ti(!1);un(qt(v,Er(q),ar(([J,ie])=>!!ie)),()=>{Cr(W,!1)}),un(qt(Rs(v,W,K,Z,q,se),ar(([J,ie,oe,we,,ee])=>J&&!ie&&oe.height!==0&&we.height!==0&&!ee)),([,,,,J])=>{Cr(se,!0),T2(1,()=>{Cr(B,J)}),Ol(qt(f),()=>{Cr(e,[0,0]),Cr(W,!0)})}),Fi(qt(V,ar(J=>J!=null&&J.scrollTop>0),wl(0)),N),un(qt(v,Er(V),ar(([,J])=>J!=null)),([,J])=>{J&&(Cr(Z,J.viewport),Cr(K,J.item),Cr(L,J.gap),J.scrollTop>0&&(Cr($,!0),Ol(qt(f,yp(1)),ie=>{Cr($,!1)}),Cr(h,{top:J.scrollTop})))}),Fi(qt(Z,Mi(({height:J})=>J)),y),Fi(qt(Rs(dr(Z,Uy),dr(K,Uy),dr(L,(J,ie)=>J&&J.column===ie.column&&J.row===ie.row),dr(f)),Mi(([J,ie,oe,we])=>({gap:oe,item:ie,scrollTop:we,viewport:J}))),G),Fi(qt(Rs(dr(S),r,dr(L,$X),dr(K,Uy),dr(Z,Uy),dr(R),dr(N),dr($),dr(W),dr(q)),ar(([,,,,,,,J])=>!J),Mi(([J,[ie,oe],we,ee,ae,ue,ve,,Ce,je])=>{const{column:Me,row:Re}=we,{height:me,width:De}=ee,{width:Ue}=ae;if(ve===0&&(J===0||Ue===0))return wE;if(De===0){const rt=S2(je,J),dt=rt+Math.max(ve-1,0);return BX(TE(rt,dt,ue))}const Pe=nP(Ue,De,Me);let Te,Ie;Ce?ie===0&&oe===0&&ve>0?(Te=0,Ie=ve-1):(Te=Pe*G0((ie+Re)/(me+Re)),Ie=Pe*_E((oe+Re)/(me+Re))-1,Ie=zb(J-1,Cm(Ie,Pe-1)),Te=zb(Ie,Cm(0,Te))):(Te=0,Ie=-1);const Fe=TE(Te,Ie,ue),{bottom:Oe,top:Ge}=SE(ae,we,ee,Fe),Qe=_E(J/Pe),at=Qe*me+(Qe-1)*Re-Oe;return{bottom:Oe,itemHeight:me,items:Fe,itemWidth:De,offsetBottom:at,offsetTop:Ge,top:Ge}})),Y),Fi(qt(R,ar(J=>J!==null),Mi(J=>J.length)),S),Fi(qt(Rs(Z,K,Y,L),ar(([J,ie,{items:oe}])=>oe.length>0&&ie.height!==0&&J.height!==0),Mi(([J,ie,{items:oe},we])=>{const{bottom:ee,top:ae}=SE(J,we,ie,oe);return[ae,ee]}),Pn(Um)),e);const re=ti(!1);Fi(qt(f,Er(re),Mi(([J,ie])=>ie||J!==0)),re);const le=So(qt(Rs(Y,S),ar(([{items:J}])=>J.length>0),Er(re),ar(([[J,ie],oe])=>{const we=J.items[J.items.length-1].index===ie-1;return(oe||J.bottom>0&&J.itemHeight>0&&J.offsetBottom===0&&J.items.length===ie)&&we}),Mi(([[,J]])=>J-1),Pn())),Se=So(qt(dr(Y),ar(({items:J})=>J.length>0&&J[0].index===0),wl(0),Pn())),ye=So(qt(dr(Y),Er($),ar(([{items:J},ie])=>J.length>0&&!ie),Mi(([{items:J}])=>({endIndex:J[J.length-1].index,startIndex:J[0].index})),Pn(jI),hu(0)));Fi(ye,b.scrollSeekRangeChanged),Fi(qt(B,Er(Z,K,S,L),Mi(([J,ie,oe,we,ee])=>{const ae=UI(J),{align:ue,behavior:ve,offset:Ce}=ae;let je=ae.index;je==="LAST"&&(je=we-1),je=Cm(0,je,zb(we-1,je));let Me=fw(ie,ee,oe,je);return ue==="end"?Me=CE(Me-ie.height+oe.height):ue==="center"&&(Me=CE(Me-ie.height/2+oe.height/2)),Ce&&(Me+=Ce),{behavior:ve,top:Me}})),h);const Ee=Ta(qt(Y,Mi(J=>J.offsetBottom+J.bottom)),0);return Fi(qt(A,Mi(J=>({height:J.visibleHeight,width:J.visibleWidth}))),Z),{customScrollParent:T,data:R,deviation:O,footerHeight:n,gap:L,headerHeight:a,increaseViewportBy:i,initialItemCount:N,itemDimensions:K,overscan:t,restoreStateFrom:V,scrollBy:c,scrollContainerState:s,scrollHeight:F,scrollTo:h,scrollToIndex:B,scrollTop:f,smoothScrollTargetReached:m,totalCount:S,useWindowScroll:k,viewportDimensions:Z,windowScrollContainerState:w,windowScrollTo:E,windowViewportRect:A,...b,gridState:Y,horizontalDirection:fe,initialTopMostItemIndex:q,totalListHeight:Ee,...g,endReached:le,propsReady:_,rangeChanged:ye,startReached:Se,stateChanged:G,stateRestoreInProgress:$,...M}},Dn(E2,Ya,bg,qI,Du,k2,Pu));function nP(i,e,t){return Cm(1,G0((i+t)/(G0(e)+t)))}function SE(i,e,t,r){const{height:n}=t;if(n===void 0||r.length===0)return{bottom:0,top:0};const a=fw(i,e,t,r[0].index);return{bottom:fw(i,e,t,r[r.length-1].index)+n,top:a}}function fw(i,e,t,r){const n=nP(i.width,t.width,e.column),a=G0(r/n),c=a*t.height+Cm(0,a-1)*e.row;return c>0?c+e.row:c}const VX=tn(()=>{const i=ti(y=>`Item ${y}`),e=ti({}),t=ti(null),r=ti("virtuoso-grid-item"),n=ti("virtuoso-grid-list"),a=ti(M2),c=ti("div"),s=ti(Lp),h=(y,g=null)=>Ta(qt(e,Mi(b=>b[y]),Pn()),g),f=ti(!1),m=ti(!1);return Fi(dr(m),f),{components:e,computeItemKey:a,context:t,FooterComponent:h("Footer"),HeaderComponent:h("Header"),headerFooterTag:c,itemClassName:r,ItemComponent:h("Item","div"),itemContent:i,listClassName:n,ListComponent:h("List","div"),readyStateChanged:f,reportReadyState:m,ScrollerComponent:h("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder","div")}}),HX=tn(([i,e])=>({...i,...e}),Dn(UX,VX)),GX=he.memo(function(){const i=jn("gridState"),e=jn("listClassName"),t=jn("itemClassName"),r=jn("itemContent"),n=jn("computeItemKey"),a=jn("isSeeking"),c=Bo("scrollHeight"),s=jn("ItemComponent"),h=jn("ListComponent"),f=jn("ScrollSeekPlaceholder"),m=jn("context"),y=Bo("itemDimensions"),g=Bo("gap"),b=jn("log"),v=jn("stateRestoreInProgress"),_=Bo("reportReadyState"),T=Kd(he.useMemo(()=>k=>{const w=k.parentElement.parentElement.scrollHeight;c(w);const E=k.firstChild;if(E){const{height:A,width:M}=E.getBoundingClientRect();y({height:A,width:M})}g({column:EE("column-gap",getComputedStyle(k).columnGap,b),row:EE("row-gap",getComputedStyle(k).rowGap,b)})},[c,y,g,b]),!0,!1);return QI(()=>{i.itemHeight>0&&i.itemWidth>0&&_(!0)},[i]),v?null:z.jsx(h,{className:e,ref:T,...la(h,m),"data-testid":"virtuoso-item-list",style:{paddingBottom:i.offsetBottom,paddingTop:i.offsetTop},children:i.items.map(k=>{const w=n(k.index,k.data,m);return a?z.jsx(f,{...la(f,m),height:i.itemHeight,index:k.index,width:i.itemWidth},w):Ae.createElement(s,{...la(s,m),className:t,"data-index":k.index,key:w},r(k.index,k.data,m))})})}),qX=he.memo(function(){const i=jn("HeaderComponent"),e=Bo("headerHeight"),t=jn("headerFooterTag"),r=Kd(he.useMemo(()=>a=>{e(Su(a,"height"))},[e]),!0,!1),n=jn("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...la(i,n)})}):null}),WX=he.memo(function(){const i=jn("FooterComponent"),e=Bo("footerHeight"),t=jn("headerFooterTag"),r=Kd(he.useMemo(()=>a=>{e(Su(a,"height"))},[e]),!0,!1),n=jn("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...la(i,n)})}):null}),YX=({children:i})=>{const e=he.useContext(KI),t=Bo("itemDimensions"),r=Bo("viewportDimensions"),n=Kd(he.useMemo(()=>a=>{r(a.getBoundingClientRect())},[r]),!0,!1);return he.useEffect(()=>{e&&(r({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,r,t]),z.jsx("div",{ref:n,style:Xv(!1),children:i})},ZX=({children:i})=>{const e=he.useContext(KI),t=Bo("windowViewportRect"),r=Bo("itemDimensions"),n=jn("customScrollParent"),a=PI(t,n,!1);return he.useEffect(()=>{e&&(r({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,r]),z.jsx("div",{ref:a,style:Xv(!1),children:i})},XX=he.memo(function({...i}){const e=jn("useWindowScroll"),t=jn("customScrollParent"),r=t||e?QX:KX,n=t||e?ZX:YX,a=jn("context");return z.jsx(r,{...i,...la(r,a),children:z.jsxs(n,{children:[z.jsx(qX,{}),z.jsx(GX,{}),z.jsx(WX,{})]})})}),{useEmitter:sP,useEmitterValue:jn,usePublisher:Bo}=ZI(HX,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},XX),KX=iP({useEmitter:sP,useEmitterValue:jn,usePublisher:Bo}),QX=rP({useEmitter:sP,useEmitterValue:jn,usePublisher:Bo});function EE(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Eo.WARN),e==="normal"?0:parseInt(e??"0",10)}const aP=({evaluationPerOrgUnits:i,useVirtuoso:e=!0,useVirtuosoWindowScroll:t=!1})=>{function r(){const n=a=>{const c=i[a];return c?he.createElement("div",{key:c.orgUnitId},he.createElement(aE,{orgUnitsData:c})):null};return n.displayName="ItemContent",n}return e?he.createElement("div",null,he.createElement(jX,{style:{height:"60vh"},useWindowScroll:t,totalCount:i.length,itemContent:r()})):he.createElement(he.Fragment,null,i.map(n=>n?he.createElement(aE,{key:n.orgUnitId,orgUnitsData:n}):null))};function mw(){return mw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},mw.apply(null,arguments)}const JX=({splitPeriods:i,setSelectedSplitPeriod:e,selectedSplitPeriod:t,...r})=>{const n=i.includes(t);return he.createElement("div",null,he.createElement("div",null,he.createElement(ls,mw({},r,{selected:n?t:void 0,onChange:a=>e(a.selected)}),i.map((a,c)=>he.createElement(Cs,{key:c,label:kI(a),value:a})))))},eK="_wrapper_1ir4t_7",tK="_filterCheckbox_1ir4t_14",iK="_filter_1ir4t_14",rK="_plots_1ir4t_25",nK="_searchInput_1ir4t_29",sK="_filterTitle_1ir4t_34",dd={wrapper:eK,filterCheckbox:tK,filter:iK,plots:rK,searchInput:nK,filterTitle:sK},aK=({evaluationName:i,modelName:e,evaluations:t,splitPeriods:r})=>{var n;const[a,c]=Ae.useState([]),[s,h]=Ae.useState(),[f,m]=Ae.useState([]),[y,g]=Ae.useState([]),[b,v]=Ae.useState(r[0]);Ae.useEffect(()=>{const T=t[0];m(T.evaluation.map(k=>k.orgUnitId)),g(T.evaluation.map(k=>({name:k.orgUnitName,id:k.orgUnitId}))),v(T.splitPoint),c(T.evaluation)},[t,r]),Ae.useEffect(()=>{const T=t.find(w=>w.splitPoint===b),k=f==null?void 0:f.map(w=>T.evaluation.find(E=>E.orgUnitId===w&&E.orgUnitName.toLocaleLowerCase().includes(s?s.toLocaleLowerCase():"")));c(k)},[b,f,s]);const _=T=>{const k=T.checked?[...f,T.value]:f.filter(w=>w!==T.value);m(k)};return he.createElement(he.Fragment,null,he.createElement("div",{className:dd.wrapper},he.createElement("div",{className:dd.filter},he.createElement("div",null,he.createElement("h2",null,"Evaluation: ",i)),he.createElement("div",null,he.createElement("div",{className:dd.filterTitle},"Split period:"),he.createElement(JX,{splitPeriods:r,setSelectedSplitPeriod:v,selectedSplitPeriod:b})),he.createElement("div",null,he.createElement("div",{className:dd.filterTitle},"Organization units:"),he.createElement("div",{className:dd.filterCheckbox},y.map(T=>he.createElement(el,{checked:f.filter(k=>k==T.id).length>0,onChange:_,label:T.name,key:T.id,value:T.id}))))),he.createElement("div",{className:dd.plots},he.createElement("div",null,he.createElement("h3",null,"Model: ",e)),he.createElement("div",{className:dd.searchInput},he.createElement(Rl,{label:"Search for organization units:",placeholder:((n=y[0])===null||n===void 0?void 0:n.name)+"..",onChange:T=>h(T.value),value:s})),he.createElement(aP,{evaluationPerOrgUnits:a,useVirtuoso:!0}))))},oK="_table_11vie_1",lK={table:oK},kE=i=>[...new Set(i.map(e=>e.period))],cK=i=>[...new Set(i.map(e=>e.orgUnit))],uK=i=>[...new Set(i.map(e=>e.dataElement))],dK=(i,e)=>{var t;return(t=e.find(r=>r.orgUnit===i))===null||t===void 0?void 0:t.displayName},hK=({data:i})=>{const e=i.dataValues;return he.createElement(he.Fragment,null,cK(e).map(t=>he.createElement("div",{key:t},he.createElement("h3",null,be.t("Prediction for {{orgUnitName}}",{orgUnitName:dK(t,e)})),he.createElement("table",{className:lK.table},he.createElement("thead",null,he.createElement("tr",null,he.createElement("th",null,"Quantiles"),kE(e).map(r=>he.createElement("th",{key:r},g2({periodId:r,calendar:"gregory"}).displayName)))),he.createElement("tbody",null,uK(e).map(r=>he.createElement("tr",{key:r},he.createElement("td",null,r.replaceAll("_"," ")),kE(e).map(n=>he.createElement("td",{key:n},e.filter(a=>a.dataElement===r&&a.orgUnit===t&&a.period===n)[0].value)))))))))};var pK={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(wn,function(){var t,r,n;function a(s,h){if(!t)t=h;else if(!r)r=h;else{var f="var sharedChunk = {}; ("+t+")(sharedChunk); ("+r+")(sharedChunk);",m={};t(m),n=h(m),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}}a(["exports"],function(s){var h=f;function f(u,o,d,x){this.cx=3*u,this.bx=3*(d-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(x-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=o,this.p2x=d,this.p2y=x}function m(u,o,d,x){const P=new h(u,o,d,x);return function(j){return P.solve(j)}}f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,o){if(o===void 0&&(o=1e-6),u<0)return 0;if(u>1)return 1;for(var d=u,x=0;x<8;x++){var P=this.sampleCurveX(d)-u;if(Math.abs(P)<o)return d;var j=this.sampleCurveDerivativeX(d);if(Math.abs(j)<1e-6)break;d-=P/j}var H=0,ne=1;for(d=u,x=0;x<20&&(P=this.sampleCurveX(d),!(Math.abs(P-u)<o));x++)u>P?H=d:ne=d,d=.5*(ne-H)+H;return d},solve:function(u,o){return this.sampleCurveY(this.solveCurveX(u,o))}};const y=m(.25,.1,.25,1);function g(u,o,d){return Math.min(d,Math.max(o,u))}function b(u,o,d){const x=d-o,P=((u-o)%x+x)%x+o;return P===o?d:P}function v(u,...o){for(const d of o)for(const x in d)u[x]=d[x];return u}let _=1;function T(u,o){u.forEach(d=>{o[d]&&(o[d]=o[d].bind(o))})}function k(u,o,d){const x={};for(const P in u)x[P]=o.call(d||this,u[P],P,u);return x}function w(u,o,d){const x={};for(const P in u)o.call(d||this,u[P],P,u)&&(x[P]=u[P]);return x}function E(u){return Array.isArray(u)?u.map(E):typeof u=="object"&&u?k(u,E):u}const A={};function M(u){A[u]||(typeof console<"u"&&console.warn(u),A[u]=!0)}function S(u,o,d){return(d.y-u.y)*(o.x-u.x)>(o.y-u.y)*(d.x-u.x)}function N(u){let o=0;for(let d,x,P=0,j=u.length,H=j-1;P<j;H=P++)d=u[P],x=u[H],o+=(x.x-d.x)*(d.y+x.y);return o}function Y(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,x,P,j)=>{const H=P||j;return o[x]=!H||H.toLowerCase(),""}),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let K,B,F=null;function O(u){if(F==null){const o=u.navigator?u.navigator.userAgent:null;F=!!u.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return F}function R(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){const d=window.document.createElement("canvas"),x=d.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return d.width=u.width,d.height=u.height,x.drawImage(u,0,0,u.width,u.height),x.getImageData(-o,-o,u.width+2*o,u.height+2*o)},resolveURL:u=>(K||(K=document.createElement("a")),K.href=u,K.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};var G=V;function V(u,o){this.x=u,this.y=o}V.prototype={clone:function(){return new V(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,o){return this.clone()._rotateAround(u,o)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var o=u.x-this.x,d=u.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,o){return Math.atan2(this.x*o-this.y*u,this.x*u+this.y*o)},_matMult:function(u){var o=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=o,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var o=Math.cos(u),d=Math.sin(u),x=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=x,this},_rotateAround:function(u,o){var d=Math.cos(u),x=Math.sin(u),P=o.y+x*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-x*(this.y-o.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},V.convert=function(u){return u instanceof V?u:Array.isArray(u)?new V(u[0],u[1]):u};const $={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},q="mapbox-tiles";let W,se=500,fe=50;function re(){typeof caches>"u"||W||(W=caches.open(q))}let le=1/0;const Se={supported:!1,testSupport:function(u){!J&&Ee&&(ie?oe(u):ye=u)}};let ye,Ee,J=!1,ie=!1;function oe(u){const o=u.createTexture();u.bindTexture(u.TEXTURE_2D,o);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ee),u.isContextLost())return;Se.supported=!0}catch{}u.deleteTexture(o),J=!0}typeof document<"u"&&(Ee=document.createElement("img"),Ee.onload=function(){ye&&oe(ye),ye=null,ie=!0},Ee.onerror=function(){J=!0,ye=null},Ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const we={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(we);class ee extends Error{constructor(o,d,x,P){super(`AJAXError: ${d} (${o}): ${x}`),this.status=o,this.statusText=d,this.url=x,this.body=P}}const ae=Y()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ue(u,o){const d=new AbortController,x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:ae(),signal:d.signal});let P=!1,j=!1;return u.type==="json"&&x.headers.set("Accept","application/json"),((H,ne,ce)=>{j||fetch(x).then(xe=>xe.ok?((Ne,$e,qe)=>{(u.type==="arrayBuffer"?Ne.arrayBuffer():u.type==="json"?Ne.json():Ne.text()).then(Ze=>{j||(P=!0,o(null,Ze,Ne.headers.get("Cache-Control"),Ne.headers.get("Expires")))}).catch(Ze=>{j||o(new Error(Ze.message))})})(xe):xe.blob().then(Ne=>o(new ee(xe.status,xe.statusText,u.url,Ne)))).catch(xe=>{xe.code!==20&&o(new Error(xe.message))})})(),{cancel:()=>{j=!0,P||d.abort()}}}const ve=function(u,o){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o);if(!Y()){const x=u.url.substring(0,u.url.indexOf("://"));return($.REGISTERED_PROTOCOLS[x]||ue)(u,o)}}if(!(/^file:/.test(d=u.url)||/^file:/.test(ae())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ue(u,o);if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var d;return function(x,P){const j=new XMLHttpRequest;j.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(j.responseType="arraybuffer");for(const H in x.headers)j.setRequestHeader(H,x.headers[H]);return x.type==="json"&&(j.responseType="text",j.setRequestHeader("Accept","application/json")),j.withCredentials=x.credentials==="include",j.onerror=()=>{P(new Error(j.statusText))},j.onload=()=>{if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){let H=j.response;if(x.type==="json")try{H=JSON.parse(j.response)}catch(ne){return P(ne)}P(null,H,j.getResponseHeader("Cache-Control"),j.getResponseHeader("Expires"))}else{const H=new Blob([j.response],{type:j.getResponseHeader("Content-Type")});P(new ee(j.status,j.statusText,x.url,H))}},j.send(x.body),{cancel:()=>j.abort()}}(u,o)},Ce=function(u,o){return ve(v(u,{type:"arrayBuffer"}),o)};function je(u){const o=window.document.createElement("a");return o.href=u,o.protocol===window.document.location.protocol&&o.host===window.document.location.host}const Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Re,me;Re=[],me=0;const De=function(u,o){if(Se.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),me>=$.MAX_PARALLEL_IMAGE_REQUESTS){const j={requestParameters:u,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Re.push(j),j}me++;let d=!1;const x=()=>{if(!d)for(d=!0,me--;Re.length&&me<$.MAX_PARALLEL_IMAGE_REQUESTS;){const j=Re.shift(),{requestParameters:H,callback:ne,cancelled:ce}=j;ce||(j.cancel=De(H,ne).cancel)}},P=Ce(u,(j,H,ne,ce)=>{x(),j?o(j):H&&function(xe,Ne){typeof createImageBitmap=="function"?function($e,qe){const Ze=new Blob([new Uint8Array($e)],{type:"image/png"});createImageBitmap(Ze).then(Ke=>{qe(null,Ke)}).catch(Ke=>{qe(new Error(`Could not load image because of ${Ke.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(xe,Ne):function($e,qe){const Ze=new Image;Ze.onload=()=>{qe(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=Me})},Ze.onerror=()=>qe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ke=new Blob([new Uint8Array($e)],{type:"image/png"});Ze.src=$e.byteLength?URL.createObjectURL(Ke):Me}(xe,Ne)}(H,(xe,Ne)=>{xe!=null?o(xe):Ne!=null&&o(null,Ne,{cacheControl:ne,expires:ce})})});return{cancel:()=>{P.cancel(),x()}}};function Ue(u,o,d){d[u]&&d[u].indexOf(o)!==-1||(d[u]=d[u]||[],d[u].push(o))}function Pe(u,o,d){if(d&&d[u]){const x=d[u].indexOf(o);x!==-1&&d[u].splice(x,1)}}class Te{constructor(o,d={}){v(this,d),this.type=o}}class Ie extends Te{constructor(o,d={}){super("error",v({error:o},d))}}class Fe{on(o,d){return this._listeners=this._listeners||{},Ue(o,d,this._listeners),this}off(o,d){return Pe(o,d,this._listeners),Pe(o,d,this._oneTimeListeners),this}once(o,d){return this._oneTimeListeners=this._oneTimeListeners||{},Ue(o,d,this._oneTimeListeners),this}fire(o,d){typeof o=="string"&&(o=new Te(o,d||{}));const x=o.type;if(this.listens(x)){o.target=this;const P=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const ne of P)ne.call(this,o);const j=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const ne of j)Pe(x,ne,this._oneTimeListeners),ne.call(this,o);const H=this._eventedParent;H&&(v(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),H.fire(o))}else o instanceof Ie&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ge{constructor(o,d,x,P){this.message=(o?`${o}: `:"")+x,P&&(this.identifier=P),d!=null&&d.__line__&&(this.line=d.__line__)}}function Qe(u){const o=u.value;return o?[new Ge(u.key,o,"constants have been deprecated as of v8")]:[]}function at(u,...o){for(const d of o)for(const x in d)u[x]=d[x];return u}function rt(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function dt(u){if(Array.isArray(u))return u.map(dt);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const d in u)o[d]=dt(u[d]);return o}return rt(u)}class gt extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}class Tt{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[x,P]of d)this.bindings[x]=P}concat(o){return new Tt(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Nt={kind:"null"},mt={kind:"number"},St={kind:"string"},kt={kind:"boolean"},ii={kind:"color"},fi={kind:"object"},Gt={kind:"value"},hr={kind:"collator"},rr={kind:"formatted"},yr={kind:"padding"},Dr={kind:"resolvedImage"};function nr(u,o){return{kind:"array",itemType:u,N:o}}function vr(u){if(u.kind==="array"){const o=vr(u.itemType);return typeof u.N=="number"?`array<${o}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${o}>`}return u.kind}const ht=[Nt,mt,St,kt,ii,rr,fi,nr(Gt),yr,Dr];function bt(u,o){if(o.kind==="error")return null;if(u.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!bt(u.itemType,o.itemType))&&(typeof u.N!="number"||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if(u.kind==="value"){for(const d of ht)if(!bt(d,o))return null}}return`Expected ${vr(u)} but found ${vr(o)} instead.`}function Mt(u,o){return o.some(d=>d.kind===u.kind)}function $t(u,o){return o.some(d=>d==="null"?u===null:d==="array"?Array.isArray(u):d==="object"?u&&!Array.isArray(u)&&typeof u=="object":d===typeof u)}var Zt,ki={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Di(u){return(u=Math.round(u))<0?0:u>255?255:u}function We(u){return Di(u[u.length-1]==="%"?parseFloat(u)/100*255:parseInt(u))}function _e(u){return(o=u[u.length-1]==="%"?parseFloat(u)/100:parseFloat(u))<0?0:o>1?1:o;var o}function Le(u,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?u+(o-u)*d*6:2*d<1?o:3*d<2?u+(o-u)*(2/3-d)*6:u}try{Zt={}.parseCSSColor=function(u){var o,d=u.replace(/ /g,"").toLowerCase();if(d in ki)return ki[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var x=d.indexOf("("),P=d.indexOf(")");if(x!==-1&&P+1===d.length){var j=d.substr(0,x),H=d.substr(x+1,P-(x+1)).split(","),ne=1;switch(j){case"rgba":if(H.length!==4)return null;ne=_e(H.pop());case"rgb":return H.length!==3?null:[We(H[0]),We(H[1]),We(H[2]),ne];case"hsla":if(H.length!==4)return null;ne=_e(H.pop());case"hsl":if(H.length!==3)return null;var ce=(parseFloat(H[0])%360+360)%360/360,xe=_e(H[1]),Ne=_e(H[2]),$e=Ne<=.5?Ne*(xe+1):Ne+xe-Ne*xe,qe=2*Ne-$e;return[Di(255*Le(qe,$e,ce+1/3)),Di(255*Le(qe,$e,ce)),Di(255*Le(qe,$e,ce-1/3)),ne];default:return null}}return null}}catch{}class Ve{constructor(o,d,x,P=1){this.r=o,this.g=d,this.b=x,this.a=P}static parse(o){if(!o)return;if(o instanceof Ve)return o;if(typeof o!="string")return;const d=Zt(o);return d?new Ve(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,x,P]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(x)},${P})`}toArray(){const{r:o,g:d,b:x,a:P}=this;return P===0?[0,0,0,0]:[255*o/P,255*d/P,255*x/P,P]}}Ve.black=new Ve(0,0,0,1),Ve.white=new Ve(1,1,1,1),Ve.transparent=new Ve(0,0,0,0),Ve.red=new Ve(1,0,0,1);class Xe{constructor(o,d,x){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class et{constructor(o,d,x,P,j){this.text=o,this.image=d,this.scale=x,this.fontStack=P,this.textColor=j}}class ct{constructor(o){this.sections=o}static fromString(o){return new ct([new et(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof ct?o:ct.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class ot{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ot)return o;if(typeof o=="number")return new ot([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const d of o)if(typeof d!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new ot(o)}}toString(){return JSON.stringify(this.values)}}class nt{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new nt({name:o,available:!1}):null}}function ft(u,o,d,x){return typeof u=="number"&&u>=0&&u<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[u,o,d,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[u,o,d,x]:[u,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wt(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Ve||u instanceof Xe||u instanceof ct||u instanceof ot||u instanceof nt)return!0;if(Array.isArray(u)){for(const o of u)if(!wt(o))return!1;return!0}if(typeof u=="object"){for(const o in u)if(!wt(u[o]))return!1;return!0}return!1}function zt(u){if(u===null)return Nt;if(typeof u=="string")return St;if(typeof u=="boolean")return kt;if(typeof u=="number")return mt;if(u instanceof Ve)return ii;if(u instanceof Xe)return hr;if(u instanceof ct)return rr;if(u instanceof ot)return yr;if(u instanceof nt)return Dr;if(Array.isArray(u)){const o=u.length;let d;for(const x of u){const P=zt(x);if(d){if(d===P)continue;d=Gt;break}d=P}return nr(d||Gt,o)}return fi}function Rt(u){const o=typeof u;return u===null?"":o==="string"||o==="number"||o==="boolean"?String(u):u instanceof Ve||u instanceof ct||u instanceof ot||u instanceof nt?u.toString():JSON.stringify(u)}class ci{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!wt(o[1]))return d.error("invalid value");const x=o[1];let P=zt(x);const j=d.expectedType;return P.kind!=="array"||P.N!==0||!j||j.kind!=="array"||typeof j.N=="number"&&j.N!==0||(P=j),new ci(P,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wt{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const gi={string:St,number:mt,boolean:kt,object:fi};class vi{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let x,P=1;const j=o[0];if(j==="array"){let ne,ce;if(o.length>2){const xe=o[1];if(typeof xe!="string"||!(xe in gi)||xe==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);ne=gi[xe],P++}else ne=Gt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);ce=o[2],P++}x=nr(ne,ce)}else{if(!gi[j])throw new Error(`Types doesn't contain name = ${j}`);x=gi[j]}const H=[];for(;P<o.length;P++){const ne=d.parse(o[P],P,Gt);if(!ne)return null;H.push(ne)}return new vi(x,H)}evaluate(o){for(let d=0;d<this.args.length;d++){const x=this.args[d].evaluate(o);if(!bt(this.type,zt(x)))return x;if(d===this.args.length-1)throw new Wt(`Expected value to be of type ${vr(this.type)}, but found ${vr(zt(x))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Vi={"to-boolean":kt,"to-color":ii,"to-number":mt,"to-string":St};class $i{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const x=o[0];if(!Vi[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&o.length!==2)return d.error("Expected one argument.");const P=Vi[x],j=[];for(let H=1;H<o.length;H++){const ne=d.parse(o[H],H,Gt);if(!ne)return null;j.push(ne)}return new $i(P,j)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,x;for(const P of this.args){if(d=P.evaluate(o),x=null,d instanceof Ve)return d;if(typeof d=="string"){const j=o.parseColor(d);if(j)return j}else if(Array.isArray(d)&&(x=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:ft(d[0],d[1],d[2],d[3]),!x))return new Ve(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Wt(x||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="padding"){let d;for(const x of this.args){d=x.evaluate(o);const P=ot.parse(d);if(P)return P}throw new Wt(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="number"){let d=null;for(const x of this.args){if(d=x.evaluate(o),d===null)return 0;const P=Number(d);if(!isNaN(P))return P}throw new Wt(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Rt(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?nt.fromString(Rt(this.args[0].evaluate(o))):Rt(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Hi=["Unknown","Point","LineString","Polygon"];class mi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let d=this._parseColorCache[o];return d||(d=this._parseColorCache[o]=Ve.parse(o)),d}}class Ri{constructor(o,d,x,P){this.name=o,this.type=d,this._evaluate=x,this.args=P}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,d){const x=o[0],P=Ri.definitions[x];if(!P)return d.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const j=Array.isArray(P)?P[0]:P.type,H=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,ne=H.filter(([xe])=>!Array.isArray(xe)||xe.length===o.length-1);let ce=null;for(const[xe,Ne]of ne){ce=new ih(d.registry,d.path,null,d.scope);const $e=[];let qe=!1;for(let Ze=1;Ze<o.length;Ze++){const Ke=o[Ze],ut=Array.isArray(xe)?xe[Ze-1]:xe.type,lt=ce.parse(Ke,1+$e.length,ut);if(!lt){qe=!0;break}$e.push(lt)}if(!qe)if(Array.isArray(xe)&&xe.length!==$e.length)ce.error(`Expected ${xe.length} arguments, but found ${$e.length} instead.`);else{for(let Ze=0;Ze<$e.length;Ze++){const Ke=Array.isArray(xe)?xe[Ze]:xe.type,ut=$e[Ze];ce.concat(Ze+1).checkSubtype(Ke,ut.type)}if(ce.errors.length===0)return new Ri(x,j,Ne,$e)}}if(ne.length===1)d.errors.push(...ce.errors);else{const xe=(ne.length?ne:H).map(([$e])=>{return qe=$e,Array.isArray(qe)?`(${qe.map(vr).join(", ")})`:`(${vr(qe.type)}...)`;var qe}).join(" | "),Ne=[];for(let $e=1;$e<o.length;$e++){const qe=d.parse(o[$e],1+Ne.length);if(!qe)return null;Ne.push(vr(qe.type))}d.error(`Expected arguments of type ${xe}, but found (${Ne.join(", ")}) instead.`)}return null}static register(o,d){Ri.definitions=d;for(const x in d)o[x]=Ri}}class Zr{constructor(o,d,x){this.type=hr,this.locale=x,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const x=o[1];if(typeof x!="object"||Array.isArray(x))return d.error("Collator options argument must be an object.");const P=d.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,kt);if(!P)return null;const j=d.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,kt);if(!j)return null;let H=null;return x.locale&&(H=d.parse(x.locale,1,St),!H)?null:new Zr(P,j,H)}evaluate(o){return new Xe(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const nn=8192;function Cn(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function xr(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function Io(u,o){const d=(180+u[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,o.z);return[Math.round(d*P*nn),Math.round(x*P*nn)]}function ll(u,o,d){const x=u[0]-o[0],P=u[1]-o[1],j=u[0]-d[0],H=u[1]-d[1];return x*H-j*P==0&&x*j<=0&&P*H<=0}function Nr(u,o){let d=!1;for(let H=0,ne=o.length;H<ne;H++){const ce=o[H];for(let xe=0,Ne=ce.length;xe<Ne-1;xe++){if(ll(u,ce[xe],ce[xe+1]))return!1;(P=ce[xe])[1]>(x=u)[1]!=(j=ce[xe+1])[1]>x[1]&&x[0]<(j[0]-P[0])*(x[1]-P[1])/(j[1]-P[1])+P[0]&&(d=!d)}}var x,P,j;return d}function tx(u,o){for(let d=0;d<o.length;d++)if(Nr(u,o[d]))return!0;return!1}function Jd(u,o,d,x){const P=x[0]-d[0],j=x[1]-d[1],H=(u[0]-d[0])*j-P*(u[1]-d[1]),ne=(o[0]-d[0])*j-P*(o[1]-d[1]);return H>0&&ne<0||H<0&&ne>0}function ix(u,o,d){for(const xe of d)for(let Ne=0;Ne<xe.length-1;++Ne)if((ne=[(H=xe[Ne+1])[0]-(j=xe[Ne])[0],H[1]-j[1]])[0]*(ce=[(P=o)[0]-(x=u)[0],P[1]-x[1]])[1]-ne[1]*ce[0]!=0&&Jd(x,P,j,H)&&Jd(j,H,x,P))return!0;var x,P,j,H,ne,ce;return!1}function jp(u,o){for(let d=0;d<u.length;++d)if(!Nr(u[d],o))return!1;for(let d=0;d<u.length-1;++d)if(ix(u[d],u[d+1],o))return!1;return!0}function Cg(u,o){for(let d=0;d<o.length;d++)if(jp(u,o[d]))return!0;return!1}function Op(u,o,d){const x=[];for(let P=0;P<u.length;P++){const j=[];for(let H=0;H<u[P].length;H++){const ne=Io(u[P][H],d);Cn(o,ne),j.push(ne)}x.push(j)}return x}function Fp(u,o,d){const x=[];for(let P=0;P<u.length;P++){const j=Op(u[P],o,d);x.push(j)}return x}function Bp(u,o,d,x){if(u[0]<d[0]||u[0]>d[2]){const P=.5*x;let j=u[0]-d[0]>P?-x:d[0]-u[0]>P?x:0;j===0&&(j=u[0]-d[2]>P?-x:d[2]-u[0]>P?x:0),u[0]+=j}Cn(o,u)}function Tg(u,o,d,x){const P=Math.pow(2,x.z)*nn,j=[x.x*nn,x.y*nn],H=[];for(const ne of u)for(const ce of ne){const xe=[ce.x+j[0],ce.y+j[1]];Bp(xe,o,d,P),H.push(xe)}return H}function Sg(u,o,d,x){const P=Math.pow(2,x.z)*nn,j=[x.x*nn,x.y*nn],H=[];for(const ce of u){const xe=[];for(const Ne of ce){const $e=[Ne.x+j[0],Ne.y+j[1]];Cn(o,$e),xe.push($e)}H.push(xe)}if(o[2]-o[0]<=P/2){(ne=o)[0]=ne[1]=1/0,ne[2]=ne[3]=-1/0;for(const ce of H)for(const xe of ce)Bp(xe,o,d,P)}var ne;return H}class Wl{constructor(o,d){this.type=kt,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(wt(o[1])){const x=o[1];if(x.type==="FeatureCollection")for(let P=0;P<x.features.length;++P){const j=x.features[P].geometry.type;if(j==="Polygon"||j==="MultiPolygon")return new Wl(x,x.features[P].geometry)}else if(x.type==="Feature"){const P=x.geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Wl(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new Wl(x,x)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,x){const P=[1/0,1/0,-1/0,-1/0],j=[1/0,1/0,-1/0,-1/0],H=d.canonicalID();if(x.type==="Polygon"){const ne=Op(x.coordinates,j,H),ce=Tg(d.geometry(),P,j,H);if(!xr(P,j))return!1;for(const xe of ce)if(!Nr(xe,ne))return!1}if(x.type==="MultiPolygon"){const ne=Fp(x.coordinates,j,H),ce=Tg(d.geometry(),P,j,H);if(!xr(P,j))return!1;for(const xe of ce)if(!tx(xe,ne))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,x){const P=[1/0,1/0,-1/0,-1/0],j=[1/0,1/0,-1/0,-1/0],H=d.canonicalID();if(x.type==="Polygon"){const ne=Op(x.coordinates,j,H),ce=Sg(d.geometry(),P,j,H);if(!xr(P,j))return!1;for(const xe of ce)if(!jp(xe,ne))return!1}if(x.type==="MultiPolygon"){const ne=Fp(x.coordinates,j,H),ce=Sg(d.geometry(),P,j,H);if(!xr(P,j))return!1;for(const xe of ce)if(!Cg(xe,ne))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function eh(u){if(u instanceof Ri&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Wl)return!1;let o=!0;return u.eachChild(d=>{o&&!eh(d)&&(o=!1)}),o}function Ic(u){if(u instanceof Ri&&u.name==="feature-state")return!1;let o=!0;return u.eachChild(d=>{o&&!Ic(d)&&(o=!1)}),o}function Lu(u,o){if(u instanceof Ri&&o.indexOf(u.name)>=0)return!1;let d=!0;return u.eachChild(x=>{d&&!Lu(x,o)&&(d=!1)}),d}class th{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const x=o[1];return d.scope.has(x)?new th(x,d.scope.get(x)):d.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class ih{constructor(o,d=[],x,P=new Tt,j=[]){this.registry=o,this.path=d,this.key=d.map(H=>`[${H}]`).join(""),this.scope=P,this.errors=j,this.expectedType=x}parse(o,d,x,P,j={}){return d?this.concat(d,x,P)._parse(o,j):this._parse(o,j)}_parse(o,d){function x(P,j,H){return H==="assert"?new vi(j,[P]):H==="coerce"?new $i(j,[P]):P}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const P=o[0];if(typeof P!="string")return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const j=this.registry[P];if(j){let H=j.parse(o,this);if(!H)return null;if(this.expectedType){const ne=this.expectedType,ce=H.type;if(ne.kind!=="string"&&ne.kind!=="number"&&ne.kind!=="boolean"&&ne.kind!=="object"&&ne.kind!=="array"||ce.kind!=="value")if(ne.kind!=="color"&&ne.kind!=="formatted"&&ne.kind!=="resolvedImage"||ce.kind!=="value"&&ce.kind!=="string")if(ne.kind!=="padding"||ce.kind!=="value"&&ce.kind!=="number"&&ce.kind!=="array"){if(this.checkSubtype(ne,ce))return null}else H=x(H,ne,d.typeAnnotation||"coerce");else H=x(H,ne,d.typeAnnotation||"coerce");else H=x(H,ne,d.typeAnnotation||"assert")}if(!(H instanceof ci)&&H.type.kind!=="resolvedImage"&&Nu(H)){const ne=new mi;try{H=new ci(H.type,H.evaluate(ne))}catch(ce){return this.error(ce.message),null}}return H}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,x){const P=typeof o=="number"?this.path.concat(o):this.path,j=x?this.scope.concat(x):this.scope;return new ih(this.registry,P,d||null,j,this.errors)}error(o,...d){const x=`${this.key}${d.map(P=>`[${P}]`).join("")}`;this.errors.push(new gt(x,o))}checkSubtype(o,d){const x=bt(o,d);return x&&this.error(x),x}}function Nu(u){if(u instanceof th)return Nu(u.boundExpression);if(u instanceof Ri&&u.name==="error"||u instanceof Zr||u instanceof Wl)return!1;const o=u instanceof $i||u instanceof vi;let d=!0;return u.eachChild(x=>{d=o?d&&Nu(x):d&&x instanceof ci}),!!d&&eh(u)&&Lu(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function rh(u,o){const d=u.length-1;let x,P,j=0,H=d,ne=0;for(;j<=H;)if(ne=Math.floor((j+H)/2),x=u[ne],P=u[ne+1],x<=o){if(ne===d||o<P)return ne;j=ne+1}else{if(!(x>o))throw new Wt("Input is not a number.");H=ne-1}return 0}class zu{constructor(o,d,x){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[P,j]of x)this.labels.push(P),this.outputs.push(j)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const x=d.parse(o[1],1,mt);if(!x)return null;const P=[];let j=null;d.expectedType&&d.expectedType.kind!=="value"&&(j=d.expectedType);for(let H=1;H<o.length;H+=2){const ne=H===1?-1/0:o[H],ce=o[H+1],xe=H,Ne=H+1;if(typeof ne!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xe);if(P.length&&P[P.length-1][0]>=ne)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',xe);const $e=d.parse(ce,Ne,j);if(!$e)return null;j=j||$e.type,P.push([ne,$e])}return new zu(j,x,P)}evaluate(o){const d=this.labels,x=this.outputs;if(d.length===1)return x[0].evaluate(o);const P=this.input.evaluate(o);if(P<=d[0])return x[0].evaluate(o);const j=d.length;return P>=d[j-1]?x[j-1].evaluate(o):x[rh(d,P)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Tn(u,o,d){return u*(1-d)+o*d}var ju=Object.freeze({__proto__:null,number:Tn,color:function(u,o,d){return new Ve(Tn(u.r,o.r,d),Tn(u.g,o.g,d),Tn(u.b,o.b,d),Tn(u.a,o.a,d))},array:function(u,o,d){return u.map((x,P)=>Tn(x,o[P],d))},padding:function(u,o,d){const x=u.values,P=o.values;return new ot([Tn(x[0],P[0],d),Tn(x[1],P[1],d),Tn(x[2],P[2],d),Tn(x[3],P[3],d)])}});const $p=.95047,Eg=1.08883,kg=4/29,nh=6/29,Up=3*nh*nh,rx=Math.PI/180,nx=180/Math.PI;function Vp(u){return u>.008856451679035631?Math.pow(u,1/3):u/Up+kg}function Hp(u){return u>nh?u*u*u:Up*(u-kg)}function Gp(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function qp(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Mg(u){const o=qp(u.r),d=qp(u.g),x=qp(u.b),P=Vp((.4124564*o+.3575761*d+.1804375*x)/$p),j=Vp((.2126729*o+.7151522*d+.072175*x)/1);return{l:116*j-16,a:500*(P-j),b:200*(j-Vp((.0193339*o+.119192*d+.9503041*x)/Eg)),alpha:u.a}}function zr(u){let o=(u.l+16)/116,d=isNaN(u.a)?o:o+u.a/500,x=isNaN(u.b)?o:o-u.b/200;return o=1*Hp(o),d=$p*Hp(d),x=Eg*Hp(x),new Ve(Gp(3.2404542*d-1.5371385*o-.4985314*x),Gp(-.969266*d+1.8760108*o+.041556*x),Gp(.0556434*d-.2040259*o+1.0572252*x),u.alpha)}function sx(u,o,d){const x=o-u;return u+d*(x>180||x<-180?x-360*Math.round(x/360):x)}const Ou={forward:Mg,reverse:zr,interpolate:function(u,o,d){return{l:Tn(u.l,o.l,d),a:Tn(u.a,o.a,d),b:Tn(u.b,o.b,d),alpha:Tn(u.alpha,o.alpha,d)}}},Fu={forward:function(u){const{l:o,a:d,b:x}=Mg(u),P=Math.atan2(x,d)*nx;return{h:P<0?P+360:P,c:Math.sqrt(d*d+x*x),l:o,alpha:u.a}},reverse:function(u){const o=u.h*rx,d=u.c;return zr({l:u.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:u.alpha})},interpolate:function(u,o,d){return{h:sx(u.h,o.h,d),c:Tn(u.c,o.c,d),l:Tn(u.l,o.l,d),alpha:Tn(u.alpha,o.alpha,d)}}};var Ag=Object.freeze({__proto__:null,lab:Ou,hcl:Fu});class Aa{constructor(o,d,x,P,j){this.type=o,this.operator=d,this.interpolation=x,this.input=P,this.labels=[],this.outputs=[];for(const[H,ne]of j)this.labels.push(H),this.outputs.push(ne)}static interpolationFactor(o,d,x,P){let j=0;if(o.name==="exponential")j=Wp(d,o.base,x,P);else if(o.name==="linear")j=Wp(d,1,x,P);else if(o.name==="cubic-bezier"){const H=o.controlPoints;j=new h(H[0],H[1],H[2],H[3]).solve(Wp(d,1,x,P))}return j}static parse(o,d){let[x,P,j,...H]=o;if(!Array.isArray(P)||P.length===0)return d.error("Expected an interpolation type expression.",1);if(P[0]==="linear")P={name:"linear"};else if(P[0]==="exponential"){const xe=P[1];if(typeof xe!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:xe}}else{if(P[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(P[0])}`,1,0);{const xe=P.slice(1);if(xe.length!==4||xe.some(Ne=>typeof Ne!="number"||Ne<0||Ne>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:xe}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(j=d.parse(j,2,mt),!j)return null;const ne=[];let ce=null;x==="interpolate-hcl"||x==="interpolate-lab"?ce=ii:d.expectedType&&d.expectedType.kind!=="value"&&(ce=d.expectedType);for(let xe=0;xe<H.length;xe+=2){const Ne=H[xe],$e=H[xe+1],qe=xe+3,Ze=xe+4;if(typeof Ne!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',qe);if(ne.length&&ne[ne.length-1][0]>=Ne)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',qe);const Ke=d.parse($e,Ze,ce);if(!Ke)return null;ce=ce||Ke.type,ne.push([Ne,Ke])}return ce.kind==="number"||ce.kind==="color"||ce.kind==="padding"||ce.kind==="array"&&ce.itemType.kind==="number"&&typeof ce.N=="number"?new Aa(ce,x,P,j,ne):d.error(`Type ${vr(ce)} is not interpolatable.`)}evaluate(o){const d=this.labels,x=this.outputs;if(d.length===1)return x[0].evaluate(o);const P=this.input.evaluate(o);if(P<=d[0])return x[0].evaluate(o);const j=d.length;if(P>=d[j-1])return x[j-1].evaluate(o);const H=rh(d,P),ne=Aa.interpolationFactor(this.interpolation,P,d[H],d[H+1]),ce=x[H].evaluate(o),xe=x[H+1].evaluate(o);return this.operator==="interpolate"?ju[this.type.kind.toLowerCase()](ce,xe,ne):this.operator==="interpolate-hcl"?Fu.reverse(Fu.interpolate(Fu.forward(ce),Fu.forward(xe),ne)):Ou.reverse(Ou.interpolate(Ou.forward(ce),Ou.forward(xe),ne))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Wp(u,o,d,x){const P=x-d,j=u-d;return P===0?0:o===1?j/P:(Math.pow(o,j)-1)/(Math.pow(o,P)-1)}class sh{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let x=null;const P=d.expectedType;P&&P.kind!=="value"&&(x=P);const j=[];for(const ne of o.slice(1)){const ce=d.parse(ne,1+j.length,x,void 0,{typeAnnotation:"omit"});if(!ce)return null;x=x||ce.type,j.push(ce)}if(!x)throw new Error("No output type");const H=P&&j.some(ne=>bt(P,ne.type));return new sh(H?Gt:x,j)}evaluate(o){let d,x=null,P=0;for(const j of this.args)if(P++,x=j.evaluate(o),x&&x instanceof nt&&!x.available&&(d||(d=x.name),x=null,P===this.args.length&&(x=d)),x!==null)break;return x}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class ah{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const x=[];for(let j=1;j<o.length-1;j+=2){const H=o[j];if(typeof H!="string")return d.error(`Expected string, but found ${typeof H} instead.`,j);if(/[^a-zA-Z0-9_]/.test(H))return d.error("Variable names must contain only alphanumeric characters or '_'.",j);const ne=d.parse(o[j+1],j+1);if(!ne)return null;x.push([H,ne])}const P=d.parse(o[o.length-1],o.length-1,d.expectedType,x);return P?new ah(x,P):null}outputDefined(){return this.result.outputDefined()}}class Yp{constructor(o,d,x){this.type=o,this.index=d,this.input=x}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const x=d.parse(o[1],1,mt),P=d.parse(o[2],2,nr(d.expectedType||Gt));return x&&P?new Yp(P.type.itemType,x,P):null}evaluate(o){const d=this.index.evaluate(o),x=this.input.evaluate(o);if(d<0)throw new Wt(`Array index out of bounds: ${d} < 0.`);if(d>=x.length)throw new Wt(`Array index out of bounds: ${d} > ${x.length-1}.`);if(d!==Math.floor(d))throw new Wt(`Array index must be an integer, but found ${d} instead.`);return x[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Zp{constructor(o,d){this.type=kt,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const x=d.parse(o[1],1,Gt),P=d.parse(o[2],2,Gt);return x&&P?Mt(x.type,[kt,St,mt,Nt,Gt])?new Zp(x,P):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(x.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),x=this.haystack.evaluate(o);if(!x)return!1;if(!$t(d,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${vr(zt(d))} instead.`);if(!$t(x,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${vr(zt(x))} instead.`);return x.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class oh{constructor(o,d,x){this.type=mt,this.needle=o,this.haystack=d,this.fromIndex=x}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const x=d.parse(o[1],1,Gt),P=d.parse(o[2],2,Gt);if(!x||!P)return null;if(!Mt(x.type,[kt,St,mt,Nt,Gt]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(x.type)} instead`);if(o.length===4){const j=d.parse(o[3],3,mt);return j?new oh(x,P,j):null}return new oh(x,P)}evaluate(o){const d=this.needle.evaluate(o),x=this.haystack.evaluate(o);if(!$t(d,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${vr(zt(d))} instead.`);if(!$t(x,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${vr(zt(x))} instead.`);if(this.fromIndex){const P=this.fromIndex.evaluate(o);return x.indexOf(d,P)}return x.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Xp{constructor(o,d,x,P,j,H){this.inputType=o,this.type=d,this.input=x,this.cases=P,this.outputs=j,this.otherwise=H}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let x,P;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);const j={},H=[];for(let xe=2;xe<o.length-1;xe+=2){let Ne=o[xe];const $e=o[xe+1];Array.isArray(Ne)||(Ne=[Ne]);const qe=d.concat(xe);if(Ne.length===0)return qe.error("Expected at least one branch label.");for(const Ke of Ne){if(typeof Ke!="number"&&typeof Ke!="string")return qe.error("Branch labels must be numbers or strings.");if(typeof Ke=="number"&&Math.abs(Ke)>Number.MAX_SAFE_INTEGER)return qe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ke=="number"&&Math.floor(Ke)!==Ke)return qe.error("Numeric branch labels must be integer values.");if(x){if(qe.checkSubtype(x,zt(Ke)))return null}else x=zt(Ke);if(j[String(Ke)]!==void 0)return qe.error("Branch labels must be unique.");j[String(Ke)]=H.length}const Ze=d.parse($e,xe,P);if(!Ze)return null;P=P||Ze.type,H.push(Ze)}const ne=d.parse(o[1],1,Gt);if(!ne)return null;const ce=d.parse(o[o.length-1],o.length-1,P);return ce?ne.type.kind!=="value"&&d.concat(1).checkSubtype(x,ne.type)?null:new Xp(x,P,ne,j,H,ce):null}evaluate(o){const d=this.input.evaluate(o);return(zt(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Kp{constructor(o,d,x){this.type=o,this.branches=d,this.otherwise=x}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let x;d.expectedType&&d.expectedType.kind!=="value"&&(x=d.expectedType);const P=[];for(let H=1;H<o.length-1;H+=2){const ne=d.parse(o[H],H,kt);if(!ne)return null;const ce=d.parse(o[H+1],H+1,x);if(!ce)return null;P.push([ne,ce]),x=x||ce.type}const j=d.parse(o[o.length-1],o.length-1,x);if(!j)return null;if(!x)throw new Error("Can't infer output type");return new Kp(x,P,j)}evaluate(o){for(const[d,x]of this.branches)if(d.evaluate(o))return x.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,x]of this.branches)o(d),o(x);o(this.otherwise)}outputDefined(){return this.branches.every(([o,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class lh{constructor(o,d,x,P){this.type=o,this.input=d,this.beginIndex=x,this.endIndex=P}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const x=d.parse(o[1],1,Gt),P=d.parse(o[2],2,mt);if(!x||!P)return null;if(!Mt(x.type,[nr(Gt),St,Gt]))return d.error(`Expected first argument to be of type array or string, but found ${vr(x.type)} instead`);if(o.length===4){const j=d.parse(o[3],3,mt);return j?new lh(x.type,x,P,j):null}return new lh(x.type,x,P)}evaluate(o){const d=this.input.evaluate(o),x=this.beginIndex.evaluate(o);if(!$t(d,["string","array"]))throw new Wt(`Expected first argument to be of type array or string, but found ${vr(zt(d))} instead.`);if(this.endIndex){const P=this.endIndex.evaluate(o);return d.slice(x,P)}return d.slice(x)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Ig(u,o){return u==="=="||u==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Pg(u,o,d,x){return x.compare(o,d)===0}function Pc(u,o,d){const x=u!=="=="&&u!=="!=";return class oP{constructor(j,H,ne){this.type=kt,this.lhs=j,this.rhs=H,this.collator=ne,this.hasUntypedArgument=j.type.kind==="value"||H.type.kind==="value"}static parse(j,H){if(j.length!==3&&j.length!==4)return H.error("Expected two or three arguments.");const ne=j[0];let ce=H.parse(j[1],1,Gt);if(!ce)return null;if(!Ig(ne,ce.type))return H.concat(1).error(`"${ne}" comparisons are not supported for type '${vr(ce.type)}'.`);let xe=H.parse(j[2],2,Gt);if(!xe)return null;if(!Ig(ne,xe.type))return H.concat(2).error(`"${ne}" comparisons are not supported for type '${vr(xe.type)}'.`);if(ce.type.kind!==xe.type.kind&&ce.type.kind!=="value"&&xe.type.kind!=="value")return H.error(`Cannot compare types '${vr(ce.type)}' and '${vr(xe.type)}'.`);x&&(ce.type.kind==="value"&&xe.type.kind!=="value"?ce=new vi(xe.type,[ce]):ce.type.kind!=="value"&&xe.type.kind==="value"&&(xe=new vi(ce.type,[xe])));let Ne=null;if(j.length===4){if(ce.type.kind!=="string"&&xe.type.kind!=="string"&&ce.type.kind!=="value"&&xe.type.kind!=="value")return H.error("Cannot use collator to compare non-string types.");if(Ne=H.parse(j[3],3,hr),!Ne)return null}return new oP(ce,xe,Ne)}evaluate(j){const H=this.lhs.evaluate(j),ne=this.rhs.evaluate(j);if(x&&this.hasUntypedArgument){const ce=zt(H),xe=zt(ne);if(ce.kind!==xe.kind||ce.kind!=="string"&&ce.kind!=="number")throw new Wt(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${ce.kind}, ${xe.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const ce=zt(H),xe=zt(ne);if(ce.kind!=="string"||xe.kind!=="string")return o(j,H,ne)}return this.collator?d(j,H,ne,this.collator.evaluate(j)):o(j,H,ne)}eachChild(j){j(this.lhs),j(this.rhs),this.collator&&j(this.collator)}outputDefined(){return!0}}}const ax=Pc("==",function(u,o,d){return o===d},Pg),ox=Pc("!=",function(u,o,d){return o!==d},function(u,o,d,x){return!Pg(0,o,d,x)}),lx=Pc("<",function(u,o,d){return o<d},function(u,o,d,x){return x.compare(o,d)<0}),cx=Pc(">",function(u,o,d){return o>d},function(u,o,d,x){return x.compare(o,d)>0}),ux=Pc("<=",function(u,o,d){return o<=d},function(u,o,d,x){return x.compare(o,d)<=0}),dx=Pc(">=",function(u,o,d){return o>=d},function(u,o,d,x){return x.compare(o,d)>=0});class Qp{constructor(o,d,x,P,j){this.type=St,this.number=o,this.locale=d,this.currency=x,this.minFractionDigits=P,this.maxFractionDigits=j}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const x=d.parse(o[1],1,mt);if(!x)return null;const P=o[2];if(typeof P!="object"||Array.isArray(P))return d.error("NumberFormat options argument must be an object.");let j=null;if(P.locale&&(j=d.parse(P.locale,1,St),!j))return null;let H=null;if(P.currency&&(H=d.parse(P.currency,1,St),!H))return null;let ne=null;if(P["min-fraction-digits"]&&(ne=d.parse(P["min-fraction-digits"],1,mt),!ne))return null;let ce=null;return P["max-fraction-digits"]&&(ce=d.parse(P["max-fraction-digits"],1,mt),!ce)?null:new Qp(x,j,H,ne,ce)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class ch{constructor(o){this.type=rr,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const x=o[1];if(!Array.isArray(x)&&typeof x=="object")return d.error("First argument must be an image or text section.");const P=[];let j=!1;for(let H=1;H<=o.length-1;++H){const ne=o[H];if(j&&typeof ne=="object"&&!Array.isArray(ne)){j=!1;let ce=null;if(ne["font-scale"]&&(ce=d.parse(ne["font-scale"],1,mt),!ce))return null;let xe=null;if(ne["text-font"]&&(xe=d.parse(ne["text-font"],1,nr(St)),!xe))return null;let Ne=null;if(ne["text-color"]&&(Ne=d.parse(ne["text-color"],1,ii),!Ne))return null;const $e=P[P.length-1];$e.scale=ce,$e.font=xe,$e.textColor=Ne}else{const ce=d.parse(o[H],1,Gt);if(!ce)return null;const xe=ce.type.kind;if(xe!=="string"&&xe!=="value"&&xe!=="null"&&xe!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");j=!0,P.push({content:ce,scale:null,font:null,textColor:null})}}return new ch(P)}evaluate(o){return new ct(this.sections.map(d=>{const x=d.content.evaluate(o);return zt(x)===Dr?new et("",x,null,null,null):new et(Rt(x),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)}))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}}class Jp{constructor(o){this.type=Dr,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const x=d.parse(o[1],1,St);return x?new Jp(x):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),x=nt.fromString(d);return x&&o.availableImages&&(x.available=o.availableImages.indexOf(d)>-1),x}eachChild(o){o(this.input)}outputDefined(){return!1}}class ef{constructor(o){this.type=mt,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const x=d.parse(o[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${vr(x.type)} instead.`):new ef(x):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Wt(`Expected value to be of type string or array, but found ${vr(zt(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Dc={"==":ax,"!=":ox,">":cx,"<":lx,">=":dx,"<=":ux,array:vi,at:Yp,boolean:vi,case:Kp,coalesce:sh,collator:Zr,format:ch,image:Jp,in:Zp,"index-of":oh,interpolate:Aa,"interpolate-hcl":Aa,"interpolate-lab":Aa,length:ef,let:ah,literal:ci,match:Xp,number:vi,"number-format":Qp,object:vi,slice:lh,step:zu,string:vi,"to-boolean":$i,"to-color":$i,"to-number":$i,"to-string":$i,var:th,within:Wl};function Dg(u,[o,d,x,P]){o=o.evaluate(u),d=d.evaluate(u),x=x.evaluate(u);const j=P?P.evaluate(u):1,H=ft(o,d,x,j);if(H)throw new Wt(H);return new Ve(o/255*j,d/255*j,x/255*j,j)}function Rg(u,o){return u in o}function tf(u,o){const d=o[u];return d===void 0?null:d}function cl(u){return{type:u}}function Lg(u){return{result:"success",value:u}}function Rc(u){return{result:"error",value:u}}function Lc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Rn(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function rf(u){return!!u.expression&&u.expression.interpolated}function wi(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Nc(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Sn(u){return u}function dn(u,o){const d=o.type==="color",x=u.stops&&typeof u.stops[0][0]=="object",P=x||!(x||u.property!==void 0),j=u.type||(rf(o)?"exponential":"interval");if(d||o.type==="padding"){const xe=d?Ve.parse:ot.parse;(u=at({},u)).stops&&(u.stops=u.stops.map(Ne=>[Ne[0],xe(Ne[1])])),u.default=xe(u.default?u.default:o.default)}if(u.colorSpace&&u.colorSpace!=="rgb"&&!Ag[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let H,ne,ce;if(j==="exponential")H=zg;else if(j==="interval")H=hx;else if(j==="categorical"){H=Ng,ne=Object.create(null);for(const xe of u.stops)ne[xe[0]]=xe[1];ce=typeof u.stops[0][0]}else{if(j!=="identity")throw new Error(`Unknown function type "${j}"`);H=px}if(x){const xe={},Ne=[];for(let Ze=0;Ze<u.stops.length;Ze++){const Ke=u.stops[Ze],ut=Ke[0].zoom;xe[ut]===void 0&&(xe[ut]={zoom:ut,type:u.type,property:u.property,default:u.default,stops:[]},Ne.push(ut)),xe[ut].stops.push([Ke[0].value,Ke[1]])}const $e=[];for(const Ze of Ne)$e.push([xe[Ze].zoom,dn(xe[Ze],o)]);const qe={name:"linear"};return{kind:"composite",interpolationType:qe,interpolationFactor:Aa.interpolationFactor.bind(void 0,qe),zoomStops:$e.map(Ze=>Ze[0]),evaluate:({zoom:Ze},Ke)=>zg({stops:$e,base:u.base},o,Ze).evaluate(Ze,Ke)}}if(P){const xe=j==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:xe,interpolationFactor:Aa.interpolationFactor.bind(void 0,xe),zoomStops:u.stops.map(Ne=>Ne[0]),evaluate:({zoom:Ne})=>H(u,o,Ne,ne,ce)}}return{kind:"source",evaluate(xe,Ne){const $e=Ne&&Ne.properties?Ne.properties[u.property]:void 0;return $e===void 0?ul(u.default,o.default):H(u,o,$e,ne,ce)}}}function ul(u,o,d){return u!==void 0?u:o!==void 0?o:d!==void 0?d:void 0}function Ng(u,o,d,x,P){return ul(typeof d===P?x[d]:void 0,u.default,o.default)}function hx(u,o,d){if(wi(d)!=="number")return ul(u.default,o.default);const x=u.stops.length;if(x===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[x-1][0])return u.stops[x-1][1];const P=rh(u.stops.map(j=>j[0]),d);return u.stops[P][1]}function zg(u,o,d){const x=u.base!==void 0?u.base:1;if(wi(d)!=="number")return ul(u.default,o.default);const P=u.stops.length;if(P===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[P-1][0])return u.stops[P-1][1];const j=rh(u.stops.map(Ne=>Ne[0]),d),H=function(Ne,$e,qe,Ze){const Ke=Ze-qe,ut=Ne-qe;return Ke===0?0:$e===1?ut/Ke:(Math.pow($e,ut)-1)/(Math.pow($e,Ke)-1)}(d,x,u.stops[j][0],u.stops[j+1][0]),ne=u.stops[j][1],ce=u.stops[j+1][1];let xe=ju[o.type]||Sn;if(u.colorSpace&&u.colorSpace!=="rgb"){const Ne=Ag[u.colorSpace];xe=($e,qe)=>Ne.reverse(Ne.interpolate(Ne.forward($e),Ne.forward(qe),H))}return typeof ne.evaluate=="function"?{evaluate(...Ne){const $e=ne.evaluate.apply(void 0,Ne),qe=ce.evaluate.apply(void 0,Ne);if($e!==void 0&&qe!==void 0)return xe($e,qe,H)}}:xe(ne,ce,H)}function px(u,o,d){switch(o.type){case"color":d=Ve.parse(d);break;case"formatted":d=ct.fromString(d.toString());break;case"resolvedImage":d=nt.fromString(d.toString());break;case"padding":d=ot.parse(d);break;default:wi(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0)}return ul(d,u.default,o.default)}Ri.register(Dc,{error:[{kind:"error"},[St],(u,[o])=>{throw new Wt(o.evaluate(u))}],typeof:[St,[Gt],(u,[o])=>vr(zt(o.evaluate(u)))],"to-rgba":[nr(mt,4),[ii],(u,[o])=>o.evaluate(u).toArray()],rgb:[ii,[mt,mt,mt],Dg],rgba:[ii,[mt,mt,mt,mt],Dg],has:{type:kt,overloads:[[[St],(u,[o])=>Rg(o.evaluate(u),u.properties())],[[St,fi],(u,[o,d])=>Rg(o.evaluate(u),d.evaluate(u))]]},get:{type:Gt,overloads:[[[St],(u,[o])=>tf(o.evaluate(u),u.properties())],[[St,fi],(u,[o,d])=>tf(o.evaluate(u),d.evaluate(u))]]},"feature-state":[Gt,[St],(u,[o])=>tf(o.evaluate(u),u.featureState||{})],properties:[fi,[],u=>u.properties()],"geometry-type":[St,[],u=>u.geometryType()],id:[Gt,[],u=>u.id()],zoom:[mt,[],u=>u.globals.zoom],"heatmap-density":[mt,[],u=>u.globals.heatmapDensity||0],"line-progress":[mt,[],u=>u.globals.lineProgress||0],accumulated:[Gt,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[mt,cl(mt),(u,o)=>{let d=0;for(const x of o)d+=x.evaluate(u);return d}],"*":[mt,cl(mt),(u,o)=>{let d=1;for(const x of o)d*=x.evaluate(u);return d}],"-":{type:mt,overloads:[[[mt,mt],(u,[o,d])=>o.evaluate(u)-d.evaluate(u)],[[mt],(u,[o])=>-o.evaluate(u)]]},"/":[mt,[mt,mt],(u,[o,d])=>o.evaluate(u)/d.evaluate(u)],"%":[mt,[mt,mt],(u,[o,d])=>o.evaluate(u)%d.evaluate(u)],ln2:[mt,[],()=>Math.LN2],pi:[mt,[],()=>Math.PI],e:[mt,[],()=>Math.E],"^":[mt,[mt,mt],(u,[o,d])=>Math.pow(o.evaluate(u),d.evaluate(u))],sqrt:[mt,[mt],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))],log2:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[mt,[mt],(u,[o])=>Math.sin(o.evaluate(u))],cos:[mt,[mt],(u,[o])=>Math.cos(o.evaluate(u))],tan:[mt,[mt],(u,[o])=>Math.tan(o.evaluate(u))],asin:[mt,[mt],(u,[o])=>Math.asin(o.evaluate(u))],acos:[mt,[mt],(u,[o])=>Math.acos(o.evaluate(u))],atan:[mt,[mt],(u,[o])=>Math.atan(o.evaluate(u))],min:[mt,cl(mt),(u,o)=>Math.min(...o.map(d=>d.evaluate(u)))],max:[mt,cl(mt),(u,o)=>Math.max(...o.map(d=>d.evaluate(u)))],abs:[mt,[mt],(u,[o])=>Math.abs(o.evaluate(u))],round:[mt,[mt],(u,[o])=>{const d=o.evaluate(u);return d<0?-Math.round(-d):Math.round(d)}],floor:[mt,[mt],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[mt,[mt],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[kt,[St,Gt],(u,[o,d])=>u.properties()[o.value]===d.value],"filter-id-==":[kt,[Gt],(u,[o])=>u.id()===o.value],"filter-type-==":[kt,[St],(u,[o])=>u.geometryType()===o.value],"filter-<":[kt,[St,Gt],(u,[o,d])=>{const x=u.properties()[o.value],P=d.value;return typeof x==typeof P&&x<P}],"filter-id-<":[kt,[Gt],(u,[o])=>{const d=u.id(),x=o.value;return typeof d==typeof x&&d<x}],"filter->":[kt,[St,Gt],(u,[o,d])=>{const x=u.properties()[o.value],P=d.value;return typeof x==typeof P&&x>P}],"filter-id->":[kt,[Gt],(u,[o])=>{const d=u.id(),x=o.value;return typeof d==typeof x&&d>x}],"filter-<=":[kt,[St,Gt],(u,[o,d])=>{const x=u.properties()[o.value],P=d.value;return typeof x==typeof P&&x<=P}],"filter-id-<=":[kt,[Gt],(u,[o])=>{const d=u.id(),x=o.value;return typeof d==typeof x&&d<=x}],"filter->=":[kt,[St,Gt],(u,[o,d])=>{const x=u.properties()[o.value],P=d.value;return typeof x==typeof P&&x>=P}],"filter-id->=":[kt,[Gt],(u,[o])=>{const d=u.id(),x=o.value;return typeof d==typeof x&&d>=x}],"filter-has":[kt,[Gt],(u,[o])=>o.value in u.properties()],"filter-has-id":[kt,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[kt,[nr(St)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[kt,[nr(Gt)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[kt,[St,nr(Gt)],(u,[o,d])=>d.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[kt,[St,nr(Gt)],(u,[o,d])=>function(x,P,j,H){for(;j<=H;){const ne=j+H>>1;if(P[ne]===x)return!0;P[ne]>x?H=ne-1:j=ne+1}return!1}(u.properties()[o.value],d.value,0,d.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(u,[o,d])=>o.evaluate(u)&&d.evaluate(u)],[cl(kt),(u,o)=>{for(const d of o)if(!d.evaluate(u))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(u,[o,d])=>o.evaluate(u)||d.evaluate(u)],[cl(kt),(u,o)=>{for(const d of o)if(d.evaluate(u))return!0;return!1}]]},"!":[kt,[kt],(u,[o])=>!o.evaluate(u)],"is-supported-script":[kt,[St],(u,[o])=>{const d=u.globals&&u.globals.isSupportedScript;return!d||d(o.evaluate(u))}],upcase:[St,[St],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[St,[St],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[St,cl(Gt),(u,o)=>o.map(d=>Rt(d.evaluate(u))).join("")],"resolved-locale":[St,[hr],(u,[o])=>o.evaluate(u).resolvedLocale()]});class nf{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new mi,this._defaultValue=d?function(x){return x.type==="color"&&Nc(x.default)?new Ve(0,0,0,0):x.type==="color"?Ve.parse(x.default)||null:x.type==="padding"?ot.parse(x.default)||null:x.default===void 0?null:x.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,x,P,j,H){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=x,this._evaluator.canonical=P,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=H,this.expression.evaluate(this._evaluator)}evaluate(o,d,x,P,j,H){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=x||null,this._evaluator.canonical=P,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=H||null;try{const ne=this.expression.evaluate(this._evaluator);if(ne==null||typeof ne=="number"&&ne!=ne)return this._defaultValue;if(this._enumValues&&!(ne in this._enumValues))throw new Wt(`Expected value to be one of ${Object.keys(this._enumValues).map(ce=>JSON.stringify(ce)).join(", ")}, but found ${JSON.stringify(ne)} instead.`);return ne}catch(ne){return this._warningHistory[ne.message]||(this._warningHistory[ne.message]=!0,typeof console<"u"&&console.warn(ne.message)),this._defaultValue}}}function Bu(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Dc}function $u(u,o){const d=new ih(Dc,[],o?function(P){const j={color:ii,string:St,number:mt,enum:St,boolean:kt,formatted:rr,padding:yr,resolvedImage:Dr};return P.type==="array"?nr(j[P.value]||Gt,P.length):j[P.type]}(o):void 0),x=d.parse(u,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Lg(new nf(x,o)):Rc(d.errors)}class uh{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!Ic(d.expression)}evaluateWithoutErrorHandling(o,d,x,P,j,H){return this._styleExpression.evaluateWithoutErrorHandling(o,d,x,P,j,H)}evaluate(o,d,x,P,j,H){return this._styleExpression.evaluate(o,d,x,P,j,H)}}class Uu{constructor(o,d,x,P){this.kind=o,this.zoomStops=x,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!Ic(d.expression),this.interpolationType=P}evaluateWithoutErrorHandling(o,d,x,P,j,H){return this._styleExpression.evaluateWithoutErrorHandling(o,d,x,P,j,H)}evaluate(o,d,x,P,j,H){return this._styleExpression.evaluate(o,d,x,P,j,H)}interpolationFactor(o,d,x){return this.interpolationType?Aa.interpolationFactor(this.interpolationType,o,d,x):0}}function jg(u,o){const d=$u(u,o);if(d.result==="error")return d;const x=d.value.expression,P=eh(x);if(!P&&!Lc(o))return Rc([new gt("","data expressions not supported")]);const j=Lu(x,["zoom"]);if(!j&&!Rn(o))return Rc([new gt("","zoom expressions not supported")]);const H=hh(x);return H||j?H instanceof gt?Rc([H]):H instanceof Aa&&!rf(o)?Rc([new gt("",'"interpolate" expressions cannot be used with this property')]):Lg(H?new Uu(P?"camera":"composite",d.value,H.labels,H instanceof Aa?H.interpolation:void 0):new uh(P?"constant":"source",d.value)):Rc([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class dh{constructor(o,d){this._parameters=o,this._specification=d,at(this,dn(this._parameters,this._specification))}static deserialize(o){return new dh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function hh(u){let o=null;if(u instanceof ah)o=hh(u.result);else if(u instanceof sh){for(const d of u.args)if(o=hh(d),o)break}else(u instanceof zu||u instanceof Aa)&&u.input instanceof Ri&&u.input.name==="zoom"&&(o=u);return o instanceof gt||u.eachChild(d=>{const x=hh(d);x instanceof gt?o=x:!o&&x?o=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&x&&o!==x&&(o=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function co(u){const o=u.key,d=u.value,x=u.valueSpec||{},P=u.objectElementValidators||{},j=u.style,H=u.styleSpec;let ne=[];const ce=wi(d);if(ce!=="object")return[new Ge(o,d,`object expected, ${ce} found`)];for(const xe in d){const Ne=xe.split(".")[0],$e=x[Ne]||x["*"];let qe;if(P[Ne])qe=P[Ne];else if(x[Ne])qe=Ns;else if(P["*"])qe=P["*"];else{if(!x["*"]){ne.push(new Ge(o,d[xe],`unknown property "${xe}"`));continue}qe=Ns}ne=ne.concat(qe({key:(o&&`${o}.`)+xe,value:d[xe],valueSpec:$e,style:j,styleSpec:H,object:d,objectKey:xe},d))}for(const xe in x)P[xe]||x[xe].required&&x[xe].default===void 0&&d[xe]===void 0&&ne.push(new Ge(o,d,`missing required property "${xe}"`));return ne}function Og(u){const o=u.value,d=u.valueSpec,x=u.style,P=u.styleSpec,j=u.key,H=u.arrayElementValidator||Ns;if(wi(o)!=="array")return[new Ge(j,o,`array expected, ${wi(o)} found`)];if(d.length&&o.length!==d.length)return[new Ge(j,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new Ge(j,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let ne={type:d.value,values:d.values};P.$version<7&&(ne.function=d.function),wi(d.value)==="object"&&(ne=d.value);let ce=[];for(let xe=0;xe<o.length;xe++)ce=ce.concat(H({array:o,arrayIndex:xe,value:o[xe],valueSpec:ne,style:x,styleSpec:P,key:`${j}[${xe}]`}));return ce}function sf(u){const o=u.key,d=u.value,x=u.valueSpec;let P=wi(d);return P==="number"&&d!=d&&(P="NaN"),P!=="number"?[new Ge(o,d,`number expected, ${P} found`)]:"minimum"in x&&d<x.minimum?[new Ge(o,d,`${d} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&d>x.maximum?[new Ge(o,d,`${d} is greater than the maximum value ${x.maximum}`)]:[]}function Fg(u){const o=u.valueSpec,d=rt(u.value.type);let x,P,j,H={};const ne=d!=="categorical"&&u.value.property===void 0,ce=!ne,xe=wi(u.value.stops)==="array"&&wi(u.value.stops[0])==="array"&&wi(u.value.stops[0][0])==="object",Ne=co({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Ze){if(d==="identity")return[new Ge(Ze.key,Ze.value,'identity function may not have a "stops" property')];let Ke=[];const ut=Ze.value;return Ke=Ke.concat(Og({key:Ze.key,value:ut,valueSpec:Ze.valueSpec,style:Ze.style,styleSpec:Ze.styleSpec,arrayElementValidator:$e})),wi(ut)==="array"&&ut.length===0&&Ke.push(new Ge(Ze.key,ut,"array must have at least one stop")),Ke},default:function(Ze){return Ns({key:Ze.key,value:Ze.value,valueSpec:o,style:Ze.style,styleSpec:Ze.styleSpec})}}});return d==="identity"&&ne&&Ne.push(new Ge(u.key,u.value,'missing required property "property"')),d==="identity"||u.value.stops||Ne.push(new Ge(u.key,u.value,'missing required property "stops"')),d==="exponential"&&u.valueSpec.expression&&!rf(u.valueSpec)&&Ne.push(new Ge(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(ce&&!Lc(u.valueSpec)?Ne.push(new Ge(u.key,u.value,"property functions not supported")):ne&&!Rn(u.valueSpec)&&Ne.push(new Ge(u.key,u.value,"zoom functions not supported"))),d!=="categorical"&&!xe||u.value.property!==void 0||Ne.push(new Ge(u.key,u.value,'"property" property is required')),Ne;function $e(Ze){let Ke=[];const ut=Ze.value,lt=Ze.key;if(wi(ut)!=="array")return[new Ge(lt,ut,`array expected, ${wi(ut)} found`)];if(ut.length!==2)return[new Ge(lt,ut,`array length 2 expected, length ${ut.length} found`)];if(xe){if(wi(ut[0])!=="object")return[new Ge(lt,ut,`object expected, ${wi(ut[0])} found`)];if(ut[0].zoom===void 0)return[new Ge(lt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new Ge(lt,ut,"object stop key must have value")];if(j&&j>rt(ut[0].zoom))return[new Ge(lt,ut[0].zoom,"stop zoom values must appear in ascending order")];rt(ut[0].zoom)!==j&&(j=rt(ut[0].zoom),P=void 0,H={}),Ke=Ke.concat(co({key:`${lt}[0]`,value:ut[0],valueSpec:{zoom:{}},style:Ze.style,styleSpec:Ze.styleSpec,objectElementValidators:{zoom:sf,value:qe}}))}else Ke=Ke.concat(qe({key:`${lt}[0]`,value:ut[0],style:Ze.style,styleSpec:Ze.styleSpec},ut));return Bu(dt(ut[1]))?Ke.concat([new Ge(`${lt}[1]`,ut[1],"expressions are not allowed in function stops.")]):Ke.concat(Ns({key:`${lt}[1]`,value:ut[1],valueSpec:o,style:Ze.style,styleSpec:Ze.styleSpec}))}function qe(Ze,Ke){const ut=wi(Ze.value),lt=rt(Ze.value),_t=Ze.value!==null?Ze.value:Ke;if(x){if(ut!==x)return[new Ge(Ze.key,_t,`${ut} stop domain type must match previous stop domain type ${x}`)]}else x=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new Ge(Ze.key,_t,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&d!=="categorical"){let Dt=`number expected, ${ut} found`;return Lc(o)&&d===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Ze.key,_t,Dt)]}return d!=="categorical"||ut!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&ut==="number"&&P!==void 0&&lt<P?[new Ge(Ze.key,_t,"stop domain values must appear in ascending order")]:(P=lt,d==="categorical"&&lt in H?[new Ge(Ze.key,_t,"stop domain values must be unique")]:(H[lt]=!0,[])):[new Ge(Ze.key,_t,`integer expected, found ${lt}`)]}}function zc(u){const o=(u.expressionContext==="property"?jg:$u)(dt(u.value),u.valueSpec);if(o.result==="error")return o.value.map(x=>new Ge(`${u.key}${x.key}`,u.value,x.message));const d=o.value.expression||o.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!d.outputDefined())return[new Ge(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Ic(d))return[new Ge(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Ic(d))return[new Ge(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Lu(d,["zoom","feature-state"]))return[new Ge(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!eh(d))return[new Ge(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Vu(u){const o=u.key,d=u.value,x=u.valueSpec,P=[];return Array.isArray(x.values)?x.values.indexOf(rt(d))===-1&&P.push(new Ge(o,d,`expected one of [${x.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(x.values).indexOf(rt(d))===-1&&P.push(new Ge(o,d,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(d)} found`)),P}function ph(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!ph(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const fh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function af(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ph(u)||(u=mh(u));const o=$u(u,fh);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,x,P)=>o.value.evaluate(d,x,{},P),needGeometry:of(u)}}function Bg(u,o){return u<o?-1:u>o?1:0}function of(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(let o=1;o<u.length;o++)if(of(u[o]))return!0;return!1}function mh(u){if(!u)return!0;const o=u[0];return u.length<=1?o!=="any":o==="=="?gh(u[1],u[2],"=="):o==="!="?Yl(gh(u[1],u[2],"==")):o==="<"||o===">"||o==="<="||o===">="?gh(u[1],u[2],o):o==="any"?(d=u.slice(1),["any"].concat(d.map(mh))):o==="all"?["all"].concat(u.slice(1).map(mh)):o==="none"?["all"].concat(u.slice(1).map(mh).map(Yl)):o==="in"?$g(u[1],u.slice(2)):o==="!in"?Yl($g(u[1],u.slice(2))):o==="has"?yh(u[1]):o==="!has"?Yl(yh(u[1])):o!=="within"||u;var d}function gh(u,o,d){switch(u){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,u,o]}}function $g(u,o){if(o.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(d=>typeof d!=typeof o[0])?["filter-in-large",u,["literal",o.sort(Bg)]]:["filter-in-small",u,["literal",o]]}}function yh(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Yl(u){return["!",u]}function Hu(u){return ph(dt(u.value))?zc(at({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):vh(u)}function vh(u){const o=u.value,d=u.key;if(wi(o)!=="array")return[new Ge(d,o,`array expected, ${wi(o)} found`)];const x=u.styleSpec;let P,j=[];if(o.length<1)return[new Ge(d,o,"filter array must have at least 1 element")];switch(j=j.concat(Vu({key:`${d}[0]`,value:o[0],valueSpec:x.filter_operator,style:u.style,styleSpec:u.styleSpec})),rt(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&rt(o[1])==="$type"&&j.push(new Ge(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&j.push(new Ge(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(P=wi(o[1]),P!=="string"&&j.push(new Ge(`${d}[1]`,o[1],`string expected, ${P} found`)));for(let H=2;H<o.length;H++)P=wi(o[H]),rt(o[1])==="$type"?j=j.concat(Vu({key:`${d}[${H}]`,value:o[H],valueSpec:x.geometry_type,style:u.style,styleSpec:u.styleSpec})):P!=="string"&&P!=="number"&&P!=="boolean"&&j.push(new Ge(`${d}[${H}]`,o[H],`string, number, or boolean expected, ${P} found`));break;case"any":case"all":case"none":for(let H=1;H<o.length;H++)j=j.concat(vh({key:`${d}[${H}]`,value:o[H],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":P=wi(o[1]),o.length!==2?j.push(new Ge(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):P!=="string"&&j.push(new Ge(`${d}[1]`,o[1],`string expected, ${P} found`));break;case"within":P=wi(o[1]),o.length!==2?j.push(new Ge(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):P!=="object"&&j.push(new Ge(`${d}[1]`,o[1],`object expected, ${P} found`))}return j}function Ug(u,o){const d=u.key,x=u.style,P=u.styleSpec,j=u.value,H=u.objectKey,ne=P[`${o}_${u.layerType}`];if(!ne)return[];const ce=H.match(/^(.*)-transition$/);if(o==="paint"&&ce&&ne[ce[1]]&&ne[ce[1]].transition)return Ns({key:d,value:j,valueSpec:P.transition,style:x,styleSpec:P});const xe=u.valueSpec||ne[H];if(!xe)return[new Ge(d,j,`unknown property "${H}"`)];let Ne;if(wi(j)==="string"&&Lc(xe)&&!xe.tokens&&(Ne=/^{([^}]+)}$/.exec(j)))return[new Ge(d,j,`"${H}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ne[1])} }\`.`)];const $e=[];return u.layerType==="symbol"&&(H==="text-field"&&x&&!x.glyphs&&$e.push(new Ge(d,j,'use of "text-field" requires a style "glyphs" property')),H==="text-font"&&Nc(dt(j))&&rt(j.type)==="identity"&&$e.push(new Ge(d,j,'"text-font" does not support identity functions'))),$e.concat(Ns({key:u.key,value:j,valueSpec:xe,style:x,styleSpec:P,expressionContext:"property",propertyType:o,propertyKey:H}))}function Gu(u){return Ug(u,"paint")}function Vg(u){return Ug(u,"layout")}function Hg(u){let o=[];const d=u.value,x=u.key,P=u.style,j=u.styleSpec;d.type||d.ref||o.push(new Ge(x,d,'either "type" or "ref" is required'));let H=rt(d.type);const ne=rt(d.ref);if(d.id){const ce=rt(d.id);for(let xe=0;xe<u.arrayIndex;xe++){const Ne=P.layers[xe];rt(Ne.id)===ce&&o.push(new Ge(x,d.id,`duplicate layer id "${d.id}", previously used at line ${Ne.id.__line__}`))}}if("ref"in d){let ce;["type","source","source-layer","filter","layout"].forEach(xe=>{xe in d&&o.push(new Ge(x,d[xe],`"${xe}" is prohibited for ref layers`))}),P.layers.forEach(xe=>{rt(xe.id)===ne&&(ce=xe)}),ce?ce.ref?o.push(new Ge(x,d.ref,"ref cannot reference another ref layer")):H=rt(ce.type):o.push(new Ge(x,d.ref,`ref layer "${ne}" not found`))}else if(H!=="background")if(d.source){const ce=P.sources&&P.sources[d.source],xe=ce&&rt(ce.type);ce?xe==="vector"&&H==="raster"?o.push(new Ge(x,d.source,`layer "${d.id}" requires a raster source`)):xe==="raster"&&H!=="raster"?o.push(new Ge(x,d.source,`layer "${d.id}" requires a vector source`)):xe!=="vector"||d["source-layer"]?xe==="raster-dem"&&H!=="hillshade"?o.push(new Ge(x,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="line"||!d.paint||!d.paint["line-gradient"]||xe==="geojson"&&ce.lineMetrics||o.push(new Ge(x,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Ge(x,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new Ge(x,d.source,`source "${d.source}" not found`))}else o.push(new Ge(x,d,'missing required property "source"'));return o=o.concat(co({key:x,value:d,valueSpec:j.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ns({key:`${x}.type`,value:d.type,valueSpec:j.layer.type,style:u.style,styleSpec:u.styleSpec,object:d,objectKey:"type"}),filter:Hu,layout:ce=>co({layer:d,key:ce.key,value:ce.value,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{"*":xe=>Vg(at({layerType:H},xe))}}),paint:ce=>co({layer:d,key:ce.key,value:ce.value,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{"*":xe=>Gu(at({layerType:H},xe))}})}})),o}function jc(u){const o=u.value,d=u.key,x=wi(o);return x!=="string"?[new Ge(d,o,`string expected, ${x} found`)]:[]}const Gg={promoteId:function({key:u,value:o}){if(wi(o)==="string")return jc({key:u,value:o});{const d=[];for(const x in o)d.push(...jc({key:`${u}.${x}`,value:o[x]}));return d}}};function qg(u){const o=u.value,d=u.key,x=u.styleSpec,P=u.style;if(!o.type)return[new Ge(d,o,'"type" is required')];const j=rt(o.type);let H;switch(j){case"vector":case"raster":case"raster-dem":return H=co({key:d,value:o,valueSpec:x[`source_${j.replace("-","_")}`],style:u.style,styleSpec:x,objectElementValidators:Gg}),H;case"geojson":if(H=co({key:d,value:o,valueSpec:x.source_geojson,style:P,styleSpec:x,objectElementValidators:Gg}),o.cluster)for(const ne in o.clusterProperties){const[ce,xe]=o.clusterProperties[ne],Ne=typeof ce=="string"?[ce,["accumulated"],["get",ne]]:ce;H.push(...zc({key:`${d}.${ne}.map`,value:xe,expressionContext:"cluster-map"})),H.push(...zc({key:`${d}.${ne}.reduce`,value:Ne,expressionContext:"cluster-reduce"}))}return H;case"video":return co({key:d,value:o,valueSpec:x.source_video,style:P,styleSpec:x});case"image":return co({key:d,value:o,valueSpec:x.source_image,style:P,styleSpec:x});case"canvas":return[new Ge(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vu({key:`${d}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qu(u){const o=u.value,d=u.styleSpec,x=d.light,P=u.style;let j=[];const H=wi(o);if(o===void 0)return j;if(H!=="object")return j=j.concat([new Ge("light",o,`object expected, ${H} found`)]),j;for(const ne in o){const ce=ne.match(/^(.*)-transition$/);j=j.concat(ce&&x[ce[1]]&&x[ce[1]].transition?Ns({key:ne,value:o[ne],valueSpec:d.transition,style:P,styleSpec:d}):x[ne]?Ns({key:ne,value:o[ne],valueSpec:x[ne],style:P,styleSpec:d}):[new Ge(ne,o[ne],`unknown property "${ne}"`)])}return j}function Wu(u){const o=u.value,d=u.styleSpec,x=d.terrain,P=u.style;let j=[];const H=wi(o);if(o===void 0)return j;if(H!=="object")return j=j.concat([new Ge("terrain",o,`object expected, ${H} found`)]),j;for(const ne in o)j=j.concat(x[ne]?Ns({key:ne,value:o[ne],valueSpec:x[ne],style:P,styleSpec:d}):[new Ge(ne,o[ne],`unknown property "${ne}"`)]);return j}const Ia={"*":()=>[],array:Og,boolean:function(u){const o=u.value,d=u.key,x=wi(o);return x!=="boolean"?[new Ge(d,o,`boolean expected, ${x} found`)]:[]},number:sf,color:function(u){const o=u.key,d=u.value,x=wi(d);return x!=="string"?[new Ge(o,d,`color expected, ${x} found`)]:Zt(d)===null?[new Ge(o,d,`color expected, "${d}" found`)]:[]},constants:Qe,enum:Vu,filter:Hu,function:Fg,layer:Hg,object:co,source:qg,light:qu,terrain:Wu,string:jc,formatted:function(u){return jc(u).length===0?[]:zc(u)},resolvedImage:function(u){return jc(u).length===0?[]:zc(u)},padding:function(u){const o=u.key,d=u.value;if(wi(d)==="array"){if(d.length<1||d.length>4)return[new Ge(o,d,`padding requires 1 to 4 values; ${d.length} values found`)];const x={type:"number"};let P=[];for(let j=0;j<d.length;j++)P=P.concat(Ns({key:`${o}[${j}]`,value:d[j],valueSpec:x}));return P}return sf({key:o,value:d,valueSpec:{}})}};function Ns(u){const o=u.value,d=u.valueSpec,x=u.styleSpec;return d.expression&&Nc(rt(o))?Fg(u):d.expression&&Bu(dt(o))?zc(u):d.type&&Ia[d.type]?Ia[d.type](u):co(at({},u,{valueSpec:d.type?x[d.type]:d}))}function fx(u){const o=u.value,d=u.key,x=jc(u);return x.length||(o.indexOf("{fontstack}")===-1&&x.push(new Ge(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&x.push(new Ge(d,o,'"glyphs" url must include a "{range}" token'))),x}function dl(u,o=Oe){let d=[];return d=d.concat(Ns({key:"",value:u,valueSpec:o.$root,styleSpec:o,style:u,objectElementValidators:{glyphs:fx,"*":()=>[]}})),u.constants&&(d=d.concat(Qe({key:"constants",value:u.constants}))),Wg(d)}function Wg(u){return[].concat(u).sort((o,d)=>o.line-d.line)}function Zl(u){return function(...o){return Wg(u.apply(this,o))}}dl.source=Zl(qg),dl.light=Zl(qu),dl.terrain=Zl(Wu),dl.layer=Zl(Hg),dl.filter=Zl(Hu),dl.paintProperty=Zl(Gu),dl.layoutProperty=Zl(Vg);const Xl=dl,mx=Xl.light,lf=Xl.paintProperty,gx=Xl.layoutProperty;function Yg(u,o){let d=!1;if(o&&o.length)for(const x of o)u.fire(new Ie(new Error(x.message))),d=!0;return d}class Kl{constructor(o,d,x){const P=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const H=new Int32Array(this.arrayBuffer);o=H[0],this.d=(d=H[1])+2*(x=H[2]);for(let ce=0;ce<this.d*this.d;ce++){const xe=H[3+ce],Ne=H[3+ce+1];P.push(xe===Ne?null:H.subarray(xe,Ne))}const ne=H[3+P.length+1];this.keys=H.subarray(H[3+P.length],ne),this.bboxes=H.subarray(ne),this.insert=this._insertReadonly}else{this.d=d+2*x;for(let H=0;H<this.d*this.d;H++)P.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=o,this.padding=x,this.scale=d/o,this.uid=0;const j=x/d*o;this.min=-j,this.max=o+j}insert(o,d,x,P,j){this._forEachCell(d,x,P,j,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(P),this.bboxes.push(j)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,d,x,P,j,H){this.cells[j].push(H)}query(o,d,x,P,j){const H=this.min,ne=this.max;if(o<=H&&d<=H&&ne<=x&&ne<=P&&!j)return Array.prototype.slice.call(this.keys);{const ce=[];return this._forEachCell(o,d,x,P,this._queryCell,ce,{},j),ce}}_queryCell(o,d,x,P,j,H,ne,ce){const xe=this.cells[j];if(xe!==null){const Ne=this.keys,$e=this.bboxes;for(let qe=0;qe<xe.length;qe++){const Ze=xe[qe];if(ne[Ze]===void 0){const Ke=4*Ze;(ce?ce($e[Ke+0],$e[Ke+1],$e[Ke+2],$e[Ke+3]):o<=$e[Ke+2]&&d<=$e[Ke+3]&&x>=$e[Ke+0]&&P>=$e[Ke+1])?(ne[Ze]=!0,H.push(Ne[Ze])):ne[Ze]=!1}}}}_forEachCell(o,d,x,P,j,H,ne,ce){const xe=this._convertToCellCoord(o),Ne=this._convertToCellCoord(d),$e=this._convertToCellCoord(x),qe=this._convertToCellCoord(P);for(let Ze=xe;Ze<=$e;Ze++)for(let Ke=Ne;Ke<=qe;Ke++){const ut=this.d*Ke+Ze;if((!ce||ce(this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ke),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(Ke+1)))&&j.call(this,o,d,x,P,ut,H,ne,ce))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,d=3+this.cells.length+1+1;let x=0;for(let H=0;H<this.cells.length;H++)x+=this.cells[H].length;const P=new Int32Array(d+x+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let j=d;for(let H=0;H<o.length;H++){const ne=o[H];P[3+H]=j,P.set(ne,j),j+=ne.length}return P[3+o.length]=j,P.set(this.keys,j),j+=this.keys.length,P[3+o.length+1]=j,P.set(this.bboxes,j),j+=this.bboxes.length,P.buffer}static serialize(o,d){const x=o.toArrayBuffer();return d&&d.push(x),{buffer:x}}static deserialize(o){return new Kl(o.buffer)}}const hl={};function hi(u,o,d={}){if(hl[u])throw new Error(`${u} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:u,writeable:!1}),hl[u]={klass:o,omit:d.omit||[],shallow:d.shallow||[]}}hi("Object",Object),hi("TransferableGridIndex",Kl),hi("Color",Ve),hi("Error",Error),hi("AJAXError",ee),hi("ResolvedImage",nt),hi("StylePropertyFunction",dh),hi("StyleExpression",nf,{omit:["_evaluator"]}),hi("ZoomDependentExpression",Uu),hi("ZoomConstantExpression",uh),hi("CompoundExpression",Ri,{omit:["_evaluate"]});for(const u in Dc)Dc[u]._classRegistryKey||hi(`Expression_${u}`,Dc[u]);function cf(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Yu(u,o){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob)return u;if(cf(u)||R(u))return o&&o.push(u),u;if(ArrayBuffer.isView(u)){const d=u;return o&&o.push(d.buffer),d}if(u instanceof ImageData)return o&&o.push(u.data.buffer),u;if(Array.isArray(u)){const d=[];for(const x of u)d.push(Yu(x,o));return d}if(typeof u=="object"){const d=u.constructor,x=d._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");if(!hl[x])throw new Error(`${x} is not registered.`);const P=d.serialize?d.serialize(u,o):{};if(d.serialize){if(o&&P===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const j in u){if(!u.hasOwnProperty(j)||hl[x].omit.indexOf(j)>=0)continue;const H=u[j];P[j]=hl[x].shallow.indexOf(j)>=0?H:Yu(H,o)}u instanceof Error&&(P.message=u.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return x!=="Object"&&(P.$name=x),P}throw new Error("can't serialize object of type "+typeof u)}function Ql(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||cf(u)||R(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(Ql);if(typeof u=="object"){const o=u.$name||"Object";if(!hl[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:d}=hl[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(u);const x=Object.create(d.prototype);for(const P of Object.keys(u)){if(P==="$name")continue;const j=u[P];x[P]=hl[o].shallow.indexOf(P)>=0?j:Ql(j)}return x}throw new Error("can't deserialize object of type "+typeof u)}class Zu{constructor(){this.first=!0}update(o,d){const x=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=d),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=x,!0))}}const ri={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function uf(u){for(const o of u)if(Xu(o.charCodeAt(0)))return!0;return!1}function Zg(u){for(const o of u)if(!yx(o.charCodeAt(0)))return!1;return!0}function yx(u){return!(ri.Arabic(u)||ri["Arabic Supplement"](u)||ri["Arabic Extended-A"](u)||ri["Arabic Presentation Forms-A"](u)||ri["Arabic Presentation Forms-B"](u))}function Xu(u){return!(u!==746&&u!==747&&(u<4352||!(ri["Bopomofo Extended"](u)||ri.Bopomofo(u)||ri["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||ri["CJK Compatibility Ideographs"](u)||ri["CJK Compatibility"](u)||ri["CJK Radicals Supplement"](u)||ri["CJK Strokes"](u)||!(!ri["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||ri["CJK Unified Ideographs Extension A"](u)||ri["CJK Unified Ideographs"](u)||ri["Enclosed CJK Letters and Months"](u)||ri["Hangul Compatibility Jamo"](u)||ri["Hangul Jamo Extended-A"](u)||ri["Hangul Jamo Extended-B"](u)||ri["Hangul Jamo"](u)||ri["Hangul Syllables"](u)||ri.Hiragana(u)||ri["Ideographic Description Characters"](u)||ri.Kanbun(u)||ri["Kangxi Radicals"](u)||ri["Katakana Phonetic Extensions"](u)||ri.Katakana(u)&&u!==12540||!(!ri["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!ri["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||ri["Unified Canadian Aboriginal Syllabics"](u)||ri["Unified Canadian Aboriginal Syllabics Extended"](u)||ri["Vertical Forms"](u)||ri["Yijing Hexagram Symbols"](u)||ri["Yi Syllables"](u)||ri["Yi Radicals"](u))))}function Xg(u){return!(Xu(u)||function(o){return!!(ri["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||ri["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||ri["Letterlike Symbols"](o)||ri["Number Forms"](o)||ri["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||ri["Control Pictures"](o)&&o!==9251||ri["Optical Character Recognition"](o)||ri["Enclosed Alphanumerics"](o)||ri["Geometric Shapes"](o)||ri["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||ri["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||ri["CJK Symbols and Punctuation"](o)||ri.Katakana(o)||ri["Private Use Area"](o)||ri["CJK Compatibility Forms"](o)||ri["Small Form Variants"](o)||ri["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(u))}function Kg(u){return u>=1424&&u<=2303||ri["Arabic Presentation Forms-A"](u)||ri["Arabic Presentation Forms-B"](u)}function vx(u,o){return!(!o&&Kg(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||ri.Khmer(u))}function xx(u){for(const o of u)if(Kg(o.charCodeAt(0)))return!0;return!1}const xh="deferred",df="loading",hf="loaded";let pf=null,pa="unavailable",pl=null;const Qg=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(pa="error"),pf&&pf(u)};function ff(){Oc.fire(new Te("pluginStateChange",{pluginStatus:pa,pluginURL:pl}))}const Oc=new Fe,mf=function(){return pa},bh=function(){if(pa!==xh||!pl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pa=df,ff(),pl&&Ce({url:pl},u=>{u?Qg(u):(pa=hf,ff())})},Za={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>pa===hf||Za.applyArabicShaping!=null,isLoading:()=>pa===df,setState(u){if(!Y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");pa=u.pluginStatus,pl=u.pluginURL},isParsed(){if(!Y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Za.applyArabicShaping!=null&&Za.processBidirectionalText!=null&&Za.processStyledBidirectionalText!=null},getPluginURL(){if(!Y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return pl}};class yn{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zu,this.transition={})}isSupportedScript(o){return function(d,x){for(const P of d)if(!vx(P.charCodeAt(0),x))return!1;return!0}(o,Za.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,d=o-Math.floor(o),x=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*d}}}class wh{constructor(o,d){this.property=o,this.value=d,this.expression=function(x,P){if(Nc(x))return new dh(x,P);if(Bu(x)){const j=jg(x,P);if(j.result==="error")throw new Error(j.value.map(H=>`${H.key}: ${H.message}`).join(", "));return j.value}{let j=x;return P.type==="color"&&typeof x=="string"?j=Ve.parse(x):P.type!=="padding"||typeof x!="number"&&!Array.isArray(x)||(j=ot.parse(x)),{kind:"constant",evaluate:()=>j}}}(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,x){return this.property.possiblyEvaluate(this,o,d,x)}}class _h{constructor(o){this.property=o,this.value=new wh(o,void 0)}transitioned(o,d){return new Jg(this.property,this.value,d,v({},o.transition,this.transition),o.now)}untransitioned(){return new Jg(this.property,this.value,null,{},0)}}class gf{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return E(this._values[o].value.value)}setValue(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new _h(this._values[o].property)),this._values[o].value=new wh(this._values[o].property,d===null?void 0:E(d))}getTransition(o){return E(this._values[o].transition)}setTransition(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new _h(this._values[o].property)),this._values[o].transition=E(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const x=this.getValue(d);x!==void 0&&(o[d]=x);const P=this.getTransition(d);P!==void 0&&(o[`${d}-transition`]=P)}return o}transitioned(o,d){const x=new ey(this._properties);for(const P of Object.keys(this._values))x._values[P]=this._values[P].transitioned(o,d._values[P]);return x}untransitioned(){const o=new ey(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class Jg{constructor(o,d,x,P,j){this.property=o,this.value=d,this.begin=j+P.delay||0,this.end=this.begin+P.duration||0,o.specification.transition&&(P.delay||P.duration)&&(this.prior=x)}possiblyEvaluate(o,d,x){const P=o.now||0,j=this.value.possiblyEvaluate(o,d,x),H=this.prior;if(H){if(P>this.end)return this.prior=null,j;if(this.value.isDataDriven())return this.prior=null,j;if(P<this.begin)return H.possiblyEvaluate(o,d,x);{const ne=(P-this.begin)/(this.end-this.begin);return this.property.interpolate(H.possiblyEvaluate(o,d,x),j,function(ce){if(ce<=0)return 0;if(ce>=1)return 1;const xe=ce*ce,Ne=xe*ce;return 4*(ce<.5?Ne:3*(ce-xe)+Ne-.75)}(ne))}}return j}}class ey{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,x){const P=new Ch(this._properties);for(const j of Object.keys(this._values))P._values[j]=this._values[j].possiblyEvaluate(o,d,x);return P}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class bx{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return E(this._values[o].value)}setValue(o,d){this._values[o]=new wh(this._values[o].property,d===null?void 0:E(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const x=this.getValue(d);x!==void 0&&(o[d]=x)}return o}possiblyEvaluate(o,d,x){const P=new Ch(this._properties);for(const j of Object.keys(this._values))P._values[j]=this._values[j].possiblyEvaluate(o,d,x);return P}}class Po{constructor(o,d,x){this.property=o,this.value=d,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,x,P){return this.property.evaluate(this.value,this.parameters,o,d,x,P)}}class Ch{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Ti{constructor(o){this.specification=o}possiblyEvaluate(o,d){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(d)}interpolate(o,d,x){const P=ju[this.specification.type];return P?P(o,d,x):o}}class Li{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,x,P){return new Po(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},x,P)}:o.expression,d)}interpolate(o,d,x){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new Po(this,{kind:"constant",value:void 0},o.parameters);const P=ju[this.specification.type];return P?new Po(this,{kind:"constant",value:P(o.value.value,d.value.value,x)},o.parameters):o}evaluate(o,d,x,P,j,H){return o.kind==="constant"?o.value:o.evaluate(d,x,P,j,H)}}class Ku extends Li{possiblyEvaluate(o,d,x,P){if(o.value===void 0)return new Po(this,{kind:"constant",value:void 0},d);if(o.expression.kind==="constant"){const j=o.expression.evaluate(d,null,{},x,P),H=o.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,ne=this._calculate(H,H,H,d);return new Po(this,{kind:"constant",value:ne},d)}if(o.expression.kind==="camera"){const j=this._calculate(o.expression.evaluate({zoom:d.zoom-1}),o.expression.evaluate({zoom:d.zoom}),o.expression.evaluate({zoom:d.zoom+1}),d);return new Po(this,{kind:"constant",value:j},d)}return new Po(this,o.expression,d)}evaluate(o,d,x,P,j,H){if(o.kind==="source"){const ne=o.evaluate(d,x,P,j,H);return this._calculate(ne,ne,ne,d)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(d.zoom)-1},x,P),o.evaluate({zoom:Math.floor(d.zoom)},x,P),o.evaluate({zoom:Math.floor(d.zoom)+1},x,P),d):o.value}_calculate(o,d,x,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:x,to:d}}interpolate(o){return o}}class Qu{constructor(o){this.specification=o}possiblyEvaluate(o,d,x,P){if(o.value!==void 0){if(o.expression.kind==="constant"){const j=o.expression.evaluate(d,null,{},x,P);return this._calculate(j,j,j,d)}return this._calculate(o.expression.evaluate(new yn(Math.floor(d.zoom-1),d)),o.expression.evaluate(new yn(Math.floor(d.zoom),d)),o.expression.evaluate(new yn(Math.floor(d.zoom+1),d)),d)}}_calculate(o,d,x,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:x,to:d}}interpolate(o){return o}}class yf{constructor(o){this.specification=o}possiblyEvaluate(o,d,x,P){return!!o.expression.evaluate(d,null,{},x,P)}interpolate(){return!1}}class rs{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in o){const x=o[d];x.specification.overridable&&this.overridableProperties.push(d);const P=this.defaultPropertyValues[d]=new wh(x,void 0),j=this.defaultTransitionablePropertyValues[d]=new _h(x);this.defaultTransitioningPropertyValues[d]=j.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=P.possiblyEvaluate({})}}}hi("DataDrivenProperty",Li),hi("DataConstantProperty",Ti),hi("CrossFadedDataDrivenProperty",Ku),hi("CrossFadedProperty",Qu),hi("ColorRampProperty",yf);const Jl="-transition";class fa extends Fe{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new bx(d.layout)),d.paint)){this._transitionablePaint=new gf(d.paint);for(const x in o.paint)this.setPaintProperty(x,o.paint[x],{validate:!1});for(const x in o.layout)this.setLayoutProperty(x,o.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ch(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,x={}){d!=null&&this._validate(gx,`layers.${this.id}.layout.${o}`,o,d,x)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return o.endsWith(Jl)?this._transitionablePaint.getTransition(o.slice(0,-Jl.length)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,x={}){if(d!=null&&this._validate(lf,`layers.${this.id}.paint.${o}`,o,d,x))return!1;if(o.endsWith(Jl))return this._transitionablePaint.setTransition(o.slice(0,-Jl.length),d||void 0),!1;{const P=this._transitionablePaint._values[o],j=P.property.specification["property-type"]==="cross-faded-data-driven",H=P.value.isDataDriven(),ne=P.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const ce=this._transitionablePaint._values[o].value;return ce.isDataDriven()||H||j||this._handleOverridablePaintPropertyUpdate(o,ne,ce)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,d,x){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),w(o,(d,x)=>!(d===void 0||x==="layout"&&!Object.keys(d).length||x==="paint"&&!Object.keys(d).length))}_validate(o,d,x,P,j={}){return(!j||j.validate!==!1)&&Yg(this,o.call(Xl,{key:d,layerType:this.type,objectKey:x,value:P,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof Po&&Lc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const wx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ju{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Zn(u,o=1){let d=0,x=0;return{members:u.map(P=>{const j=wx[P.type].BYTES_PER_ELEMENT,H=d=ty(d,Math.max(o,j)),ne=P.components||1;return x=Math.max(x,j),d+=j*ne,{name:P.name,type:P.type,components:ne,offset:H}}),size:ty(d,Math.max(x,o)),alignment:o}}function ty(u,o){return Math.ceil(u/o)*o}class Fc extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const x=this.length;return this.resize(x+1),this.emplace(x,o,d)}emplace(o,d,x){const P=2*o;return this.int16[P+0]=d,this.int16[P+1]=x,o}}Fc.prototype.bytesPerElement=4,hi("StructArrayLayout2i4",Fc);class ed extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x,P){const j=this.length;return this.resize(j+1),this.emplace(j,o,d,x,P)}emplace(o,d,x,P,j){const H=4*o;return this.int16[H+0]=d,this.int16[H+1]=x,this.int16[H+2]=P,this.int16[H+3]=j,o}}ed.prototype.bytesPerElement=8,hi("StructArrayLayout4i8",ed);class I extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,x,P,j,H)}emplace(o,d,x,P,j,H,ne){const ce=6*o;return this.int16[ce+0]=d,this.int16[ce+1]=x,this.int16[ce+2]=P,this.int16[ce+3]=j,this.int16[ce+4]=H,this.int16[ce+5]=ne,o}}I.prototype.bytesPerElement=12,hi("StructArrayLayout2i4i12",I);class l extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,x,P,j,H)}emplace(o,d,x,P,j,H,ne){const ce=4*o,xe=8*o;return this.int16[ce+0]=d,this.int16[ce+1]=x,this.uint8[xe+4]=P,this.uint8[xe+5]=j,this.uint8[xe+6]=H,this.uint8[xe+7]=ne,o}}l.prototype.bytesPerElement=8,hi("StructArrayLayout2i4ub8",l);class p extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const x=this.length;return this.resize(x+1),this.emplace(x,o,d)}emplace(o,d,x){const P=2*o;return this.float32[P+0]=d,this.float32[P+1]=x,o}}p.prototype.bytesPerElement=8,hi("StructArrayLayout2f8",p);class C extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H,ne,ce,xe,Ne){const $e=this.length;return this.resize($e+1),this.emplace($e,o,d,x,P,j,H,ne,ce,xe,Ne)}emplace(o,d,x,P,j,H,ne,ce,xe,Ne,$e){const qe=10*o;return this.uint16[qe+0]=d,this.uint16[qe+1]=x,this.uint16[qe+2]=P,this.uint16[qe+3]=j,this.uint16[qe+4]=H,this.uint16[qe+5]=ne,this.uint16[qe+6]=ce,this.uint16[qe+7]=xe,this.uint16[qe+8]=Ne,this.uint16[qe+9]=$e,o}}C.prototype.bytesPerElement=20,hi("StructArrayLayout10ui20",C);class D extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe)}emplace(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze){const Ke=12*o;return this.int16[Ke+0]=d,this.int16[Ke+1]=x,this.int16[Ke+2]=P,this.int16[Ke+3]=j,this.uint16[Ke+4]=H,this.uint16[Ke+5]=ne,this.uint16[Ke+6]=ce,this.uint16[Ke+7]=xe,this.int16[Ke+8]=Ne,this.int16[Ke+9]=$e,this.int16[Ke+10]=qe,this.int16[Ke+11]=Ze,o}}D.prototype.bytesPerElement=24,hi("StructArrayLayout4i4ui4i24",D);class U extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,x){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,x)}emplace(o,d,x,P){const j=3*o;return this.float32[j+0]=d,this.float32[j+1]=x,this.float32[j+2]=P,o}}U.prototype.bytesPerElement=12,hi("StructArrayLayout3f12",U);class te extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}te.prototype.bytesPerElement=4,hi("StructArrayLayout1ul4",te);class pe extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H,ne,ce,xe){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,o,d,x,P,j,H,ne,ce,xe)}emplace(o,d,x,P,j,H,ne,ce,xe,Ne){const $e=10*o,qe=5*o;return this.int16[$e+0]=d,this.int16[$e+1]=x,this.int16[$e+2]=P,this.int16[$e+3]=j,this.int16[$e+4]=H,this.int16[$e+5]=ne,this.uint32[qe+3]=ce,this.uint16[$e+8]=xe,this.uint16[$e+9]=Ne,o}}pe.prototype.bytesPerElement=20,hi("StructArrayLayout6i1ul2ui20",pe);class ge extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,x,P,j,H)}emplace(o,d,x,P,j,H,ne){const ce=6*o;return this.int16[ce+0]=d,this.int16[ce+1]=x,this.int16[ce+2]=P,this.int16[ce+3]=j,this.int16[ce+4]=H,this.int16[ce+5]=ne,o}}ge.prototype.bytesPerElement=12,hi("StructArrayLayout2i2i2i12",ge);class ke extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j){const H=this.length;return this.resize(H+1),this.emplace(H,o,d,x,P,j)}emplace(o,d,x,P,j,H){const ne=4*o,ce=8*o;return this.float32[ne+0]=d,this.float32[ne+1]=x,this.float32[ne+2]=P,this.int16[ce+6]=j,this.int16[ce+7]=H,o}}ke.prototype.bytesPerElement=16,hi("StructArrayLayout2f1f2i16",ke);class Be extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,x,P){const j=this.length;return this.resize(j+1),this.emplace(j,o,d,x,P)}emplace(o,d,x,P,j){const H=12*o,ne=3*o;return this.uint8[H+0]=d,this.uint8[H+1]=x,this.float32[ne+1]=P,this.float32[ne+2]=j,o}}Be.prototype.bytesPerElement=12,hi("StructArrayLayout2ub2f12",Be);class He extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,x){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,x)}emplace(o,d,x,P){const j=3*o;return this.uint16[j+0]=d,this.uint16[j+1]=x,this.uint16[j+2]=P,o}}He.prototype.bytesPerElement=6,hi("StructArrayLayout3ui6",He);class Ye extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t)}emplace(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t,Dt){const xt=24*o,Pt=12*o,Ut=48*o;return this.int16[xt+0]=d,this.int16[xt+1]=x,this.uint16[xt+2]=P,this.uint16[xt+3]=j,this.uint32[Pt+2]=H,this.uint32[Pt+3]=ne,this.uint32[Pt+4]=ce,this.uint16[xt+10]=xe,this.uint16[xt+11]=Ne,this.uint16[xt+12]=$e,this.float32[Pt+7]=qe,this.float32[Pt+8]=Ze,this.uint8[Ut+36]=Ke,this.uint8[Ut+37]=ut,this.uint8[Ut+38]=lt,this.uint32[Pt+10]=_t,this.int16[xt+22]=Dt,o}}Ye.prototype.bytesPerElement=48,hi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ye);class it extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si){const ei=this.length;return this.resize(ei+1),this.emplace(ei,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si)}emplace(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si,ei){const Ht=34*o,Ii=17*o;return this.int16[Ht+0]=d,this.int16[Ht+1]=x,this.int16[Ht+2]=P,this.int16[Ht+3]=j,this.int16[Ht+4]=H,this.int16[Ht+5]=ne,this.int16[Ht+6]=ce,this.int16[Ht+7]=xe,this.uint16[Ht+8]=Ne,this.uint16[Ht+9]=$e,this.uint16[Ht+10]=qe,this.uint16[Ht+11]=Ze,this.uint16[Ht+12]=Ke,this.uint16[Ht+13]=ut,this.uint16[Ht+14]=lt,this.uint16[Ht+15]=_t,this.uint16[Ht+16]=Dt,this.uint16[Ht+17]=xt,this.uint16[Ht+18]=Pt,this.uint16[Ht+19]=Ut,this.uint16[Ht+20]=Ft,this.uint16[Ht+21]=yi,this.uint16[Ht+22]=_i,this.uint32[Ii+12]=ni,this.float32[Ii+13]=Qt,this.float32[Ii+14]=Yt,this.float32[Ii+15]=si,this.float32[Ii+16]=ei,o}}it.prototype.bytesPerElement=68,hi("StructArrayLayout8i15ui1ul4f68",it);class Je extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Je.prototype.bytesPerElement=4,hi("StructArrayLayout1f4",Je);class tt extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,x){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,x)}emplace(o,d,x,P){const j=3*o;return this.int16[j+0]=d,this.int16[j+1]=x,this.int16[j+2]=P,o}}tt.prototype.bytesPerElement=6,hi("StructArrayLayout3i6",tt);class pt extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,x){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,x)}emplace(o,d,x,P){const j=4*o;return this.uint32[2*o+0]=d,this.uint16[j+2]=x,this.uint16[j+3]=P,o}}pt.prototype.bytesPerElement=8,hi("StructArrayLayout1ul2ui8",pt);class yt extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const x=this.length;return this.resize(x+1),this.emplace(x,o,d)}emplace(o,d,x){const P=2*o;return this.uint16[P+0]=d,this.uint16[P+1]=x,o}}yt.prototype.bytesPerElement=4,hi("StructArrayLayout2ui4",yt);class Ct extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}Ct.prototype.bytesPerElement=2,hi("StructArrayLayout1ui2",Ct);class st extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,x,P){const j=this.length;return this.resize(j+1),this.emplace(j,o,d,x,P)}emplace(o,d,x,P,j){const H=4*o;return this.float32[H+0]=d,this.float32[H+1]=x,this.float32[H+2]=P,this.float32[H+3]=j,o}}st.prototype.bytesPerElement=16,hi("StructArrayLayout4f16",st);class It extends Ju{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}It.prototype.size=20;class Et extends pe{get(o){return new It(this,o)}}hi("CollisionBoxArray",Et);class jt extends Ju{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}jt.prototype.size=48;class Ot extends Ye{get(o){return new jt(this,o)}}hi("PlacedSymbolArray",Ot);class Vt extends Ju{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Vt.prototype.size=68;class Lt extends it{get(o){return new Vt(this,o)}}hi("SymbolInstanceArray",Lt);class li extends Je{getoffsetX(o){return this.float32[1*o+0]}}hi("GlyphOffsetArray",li);class Kt extends tt{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}hi("SymbolLineVertexArray",Kt);class ui extends Ju{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ui.prototype.size=8;class Ji extends pt{get(o){return new ui(this,o)}}hi("FeatureIndexArray",Ji);class cr extends Fc{}class Pi extends Fc{}class Gr extends Fc{}class qr extends I{}class _r extends l{}class Tr extends p{}class Mr extends C{}class Pa extends D{}class Do extends U{}class uo extends te{}class ho extends ge{}class ec extends Be{}class Es extends He{}class po extends yt{}const tc=Zn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Th}=tc;class Ar{constructor(o=[]){this.segments=o}prepareSegment(o,d,x,P){let j=this.segments[this.segments.length-1];return o>Ar.MAX_VERTEX_ARRAY_LENGTH&&M(`Max vertices per segment is ${Ar.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!j||j.vertexLength+o>Ar.MAX_VERTEX_ARRAY_LENGTH||j.sortKey!==P)&&(j={vertexOffset:d.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},P!==void 0&&(j.sortKey=P),this.segments.push(j)),j}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,x,P){return new Ar([{vertexOffset:o,primitiveOffset:d,vertexLength:x,primitiveLength:P,vaos:{},sortKey:0}])}}function pn(u,o){return 256*(u=g(Math.floor(u),0,255))+g(Math.floor(o),0,255)}Ar.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hi("SegmentVector",Ar);const Rr=Zn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xn={exports:{}},ma={exports:{}};ma.exports=function(u,o){var d,x,P,j,H,ne,ce,xe;for(x=u.length-(d=3&u.length),P=o,H=3432918353,ne=461845907,xe=0;xe<x;)ce=255&u.charCodeAt(xe)|(255&u.charCodeAt(++xe))<<8|(255&u.charCodeAt(++xe))<<16|(255&u.charCodeAt(++xe))<<24,++xe,P=27492+(65535&(j=5*(65535&(P=(P^=ce=(65535&(ce=(ce=(65535&ce)*H+(((ce>>>16)*H&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(ce=0,d){case 3:ce^=(255&u.charCodeAt(xe+2))<<16;case 2:ce^=(255&u.charCodeAt(xe+1))<<8;case 1:P^=ce=(65535&(ce=(ce=(65535&(ce^=255&u.charCodeAt(xe)))*H+(((ce>>>16)*H&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295}return P^=u.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0};var vn={exports:{}};vn.exports=function(u,o){for(var d,x=u.length,P=o^x,j=0;x>=4;)d=1540483477*(65535&(d=255&u.charCodeAt(j)|(255&u.charCodeAt(++j))<<8|(255&u.charCodeAt(++j))<<16|(255&u.charCodeAt(++j))<<24))+((1540483477*(d>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),x-=4,++j;switch(x){case 3:P^=(255&u.charCodeAt(j+2))<<16;case 2:P^=(255&u.charCodeAt(j+1))<<8;case 1:P=1540483477*(65535&(P^=255&u.charCodeAt(j)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0};var Xa=ma.exports,Bc=vn.exports;Xn.exports=Xa,Xn.exports.murmur3=Xa,Xn.exports.murmur2=Bc;class $c{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,x,P){this.ids.push(Sh(o)),this.positions.push(d,x,P)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Sh(o);let x=0,P=this.ids.length-1;for(;x<P;){const H=x+P>>1;this.ids[H]>=d?P=H:x=H+1}const j=[];for(;this.ids[x]===d;)j.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return j}static serialize(o,d){const x=new Float64Array(o.ids),P=new Uint32Array(o.positions);return vf(x,P,0,x.length-1),d&&d.push(x.buffer,P.buffer),{ids:x,positions:P}}static deserialize(o){const d=new $c;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function Sh(u){const o=+u;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Xn.exports(String(u))}function vf(u,o,d,x){for(;d<x;){const P=u[d+x>>1];let j=d-1,H=x+1;for(;;){do j++;while(u[j]<P);do H--;while(u[H]>P);if(j>=H)break;Eh(u,j,H),Eh(o,3*j,3*H),Eh(o,3*j+1,3*H+1),Eh(o,3*j+2,3*H+2)}H-d<x-H?(vf(u,o,d,H),d=H+1):(vf(u,o,H+1,x),x=H)}}function Eh(u,o,d){const x=u[o];u[o]=u[d],u[d]=x}hi("FeaturePositionMap",$c);class fo{constructor(o,d){this.gl=o.gl,this.location=d}}class kh extends fo{constructor(o,d){super(o,d),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class td extends fo{constructor(o,d){super(o,d),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class Mh extends fo{constructor(o,d){super(o,d),this.current=Ve.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const uD=new Float32Array(16);function _x(u){return[pn(255*u.r,255*u.g),pn(255*u.b,255*u.a)]}class xf{constructor(o,d,x){this.value=o,this.uniformNames=d.map(P=>`u_${P}`),this.type=x}setUniform(o,d,x){o.set(x.constantOr(this.value))}getBinding(o,d,x){return this.type==="color"?new Mh(o,d):new kh(o,d)}}class Ah{constructor(o,d){this.uniformNames=d.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=o.tlbr}setUniform(o,d,x,P){const j=P==="u_pattern_to"?this.patternTo:P==="u_pattern_from"?this.patternFrom:P==="u_pixel_ratio_to"?this.pixelRatioTo:P==="u_pixel_ratio_from"?this.pixelRatioFrom:null;j&&o.set(j)}getBinding(o,d,x){return x.substr(0,9)==="u_pattern"?new td(o,d):new kh(o,d)}}class ic{constructor(o,d,x,P){this.expression=o,this.type=x,this.maxValue=0,this.paintVertexAttributes=d.map(j=>({name:`a_${j}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(o,d,x,P,j){const H=this.paintVertexArray.length,ne=this.expression.evaluate(new yn(0),d,{},P,[],j);this.paintVertexArray.resize(o),this._setPaintValue(H,o,ne)}updatePaintArray(o,d,x,P){const j=this.expression.evaluate({zoom:0},x,P);this._setPaintValue(o,d,j)}_setPaintValue(o,d,x){if(this.type==="color"){const P=_x(x);for(let j=o;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1])}else{for(let P=o;P<d;P++)this.paintVertexArray.emplace(P,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qo{constructor(o,d,x,P,j,H){this.expression=o,this.uniformNames=d.map(ne=>`u_${ne}_t`),this.type=x,this.useIntegerZoom=P,this.zoom=j,this.maxValue=0,this.paintVertexAttributes=d.map(ne=>({name:`a_${ne}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new H}populatePaintArray(o,d,x,P,j){const H=this.expression.evaluate(new yn(this.zoom),d,{},P,[],j),ne=this.expression.evaluate(new yn(this.zoom+1),d,{},P,[],j),ce=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(ce,o,H,ne)}updatePaintArray(o,d,x,P){const j=this.expression.evaluate({zoom:this.zoom},x,P),H=this.expression.evaluate({zoom:this.zoom+1},x,P);this._setPaintValue(o,d,j,H)}_setPaintValue(o,d,x,P){if(this.type==="color"){const j=_x(x),H=_x(P);for(let ne=o;ne<d;ne++)this.paintVertexArray.emplace(ne,j[0],j[1],H[0],H[1])}else{for(let j=o;j<d;j++)this.paintVertexArray.emplace(j,x,P);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(P))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d){const x=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,P=g(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);o.set(P)}getBinding(o,d,x){return new kh(o,d)}}class Uc{constructor(o,d,x,P,j,H){this.expression=o,this.type=d,this.useIntegerZoom=x,this.zoom=P,this.layerId=H,this.zoomInPaintVertexArray=new j,this.zoomOutPaintVertexArray=new j}populatePaintArray(o,d,x){const P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(P,o,d.patterns&&d.patterns[this.layerId],x)}updatePaintArray(o,d,x,P,j){this._setPaintValues(o,d,x.patterns&&x.patterns[this.layerId],j)}_setPaintValues(o,d,x,P){if(!P||!x)return;const{min:j,mid:H,max:ne}=x,ce=P[j],xe=P[H],Ne=P[ne];if(ce&&xe&&Ne)for(let $e=o;$e<d;$e++)this.zoomInPaintVertexArray.emplace($e,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],ce.tl[0],ce.tl[1],ce.br[0],ce.br[1],xe.pixelRatio,ce.pixelRatio),this.zoomOutPaintVertexArray.emplace($e,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],xe.pixelRatio,Ne.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Rr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Rr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Z2{constructor(o,d,x){this.binders={},this._buffers=[];const P=[];for(const j in o.paint._values){if(!x(j))continue;const H=o.paint.get(j);if(!(H instanceof Po&&Lc(H.property.specification)))continue;const ne=dD(j,o.type),ce=H.value,xe=H.property.specification.type,Ne=H.property.useIntegerZoom,$e=H.property.specification["property-type"],qe=$e==="cross-faded"||$e==="cross-faded-data-driven";if(ce.kind==="constant")this.binders[j]=qe?new Ah(ce.value,ne):new xf(ce.value,ne,xe),P.push(`/u_${j}`);else if(ce.kind==="source"||qe){const Ze=X2(j,xe,"source");this.binders[j]=qe?new Uc(ce,xe,Ne,d,Ze,o.id):new ic(ce,ne,xe,Ze),P.push(`/a_${j}`)}else{const Ze=X2(j,xe,"composite");this.binders[j]=new qo(ce,ne,xe,Ne,d,Ze),P.push(`/z_${j}`)}}this.cacheKey=P.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof ic||d instanceof qo?d.maxValue:0}populatePaintArrays(o,d,x,P,j){for(const H in this.binders){const ne=this.binders[H];(ne instanceof ic||ne instanceof qo||ne instanceof Uc)&&ne.populatePaintArray(o,d,x,P,j)}}setConstantPatternPositions(o,d){for(const x in this.binders){const P=this.binders[x];P instanceof Ah&&P.setConstantPatternPositions(o,d)}}updatePaintArrays(o,d,x,P,j){let H=!1;for(const ne in o){const ce=d.getPositions(ne);for(const xe of ce){const Ne=x.feature(xe.index);for(const $e in this.binders){const qe=this.binders[$e];if((qe instanceof ic||qe instanceof qo||qe instanceof Uc)&&qe.expression.isStateDependent===!0){const Ze=P.paint.get($e);qe.expression=Ze.value,qe.updatePaintArray(xe.start,xe.end,Ne,o[ne],j),H=!0}}}}return H}defines(){const o=[];for(const d in this.binders){const x=this.binders[d];(x instanceof xf||x instanceof Ah)&&o.push(...x.uniformNames.map(P=>`#define HAS_UNIFORM_${P}`))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const x=this.binders[d];if(x instanceof ic||x instanceof qo)for(let P=0;P<x.paintVertexAttributes.length;P++)o.push(x.paintVertexAttributes[P].name);else if(x instanceof Uc)for(let P=0;P<Rr.members.length;P++)o.push(Rr.members[P].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const x=this.binders[d];if(x instanceof xf||x instanceof Ah||x instanceof qo)for(const P of x.uniformNames)o.push(P)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,d){const x=[];for(const P in this.binders){const j=this.binders[P];if(j instanceof xf||j instanceof Ah||j instanceof qo){for(const H of j.uniformNames)if(d[H]){const ne=j.getBinding(o,d[H],H);x.push({name:H,property:P,binding:ne})}}}return x}setUniforms(o,d,x,P){for(const{name:j,property:H,binding:ne}of d)this.binders[H].setUniform(ne,P,x.get(H),j)}updatePaintBuffers(o){this._buffers=[];for(const d in this.binders){const x=this.binders[d];if(o&&x instanceof Uc){const P=o.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;P&&this._buffers.push(P)}else(x instanceof ic||x instanceof qo)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(o){for(const d in this.binders){const x=this.binders[d];(x instanceof ic||x instanceof qo||x instanceof Uc)&&x.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof ic||d instanceof qo||d instanceof Uc)&&d.destroy()}}}class id{constructor(o,d,x=()=>!0){this.programConfigurations={};for(const P of o)this.programConfigurations[P.id]=new Z2(P,d,x);this.needsUpload=!1,this._featureMap=new $c,this._bufferOffset=0}populatePaintArrays(o,d,x,P,j,H){for(const ne in this.programConfigurations)this.programConfigurations[ne].populatePaintArrays(o,d,P,j,H);d.id!==void 0&&this._featureMap.add(d.id,x,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,x,P){for(const j of x)this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(o,this._featureMap,d,j,P)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function dD(u,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}function X2(u,o,d){const x={color:{source:p,composite:st},number:{source:Je,composite:p}},P=function(j){return{"line-pattern":{source:Mr,composite:Mr},"fill-pattern":{source:Mr,composite:Mr},"fill-extrusion-pattern":{source:Mr,composite:Mr}}[j]}(u);return P&&P[d]||x[o][d]}hi("ConstantBinder",xf),hi("CrossFadedConstantBinder",Ah),hi("SourceExpressionBinder",ic),hi("CrossFadedCompositeBinder",Uc),hi("CompositeExpressionBinder",qo),hi("ProgramConfiguration",Z2,{omit:["_buffers"]}),hi("ProgramConfigurationSet",id);var ns=8192;const Cx=Math.pow(2,14)-1,K2=-Cx-1;function rd(u){const o=ns/u.extent,d=u.loadGeometry();for(let x=0;x<d.length;x++){const P=d[x];for(let j=0;j<P.length;j++){const H=P[j],ne=Math.round(H.x*o),ce=Math.round(H.y*o);H.x=g(ne,K2,Cx),H.y=g(ce,K2,Cx),(ne<H.x||ne>H.x+1||ce<H.y||ce>H.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function nd(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?rd(u):[]}}function iy(u,o,d,x,P){u.emplaceBack(2*o+(x+1)/2,2*d+(P+1)/2)}class Tx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Pi,this.indexArray=new Es,this.segments=new Ar,this.programConfigurations=new id(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,x){const P=this.layers[0],j=[];let H=null,ne=!1;P.type==="circle"&&(H=P.layout.get("circle-sort-key"),ne=!H.isConstant());for(const{feature:ce,id:xe,index:Ne,sourceLayerIndex:$e}of o){const qe=this.layers[0]._featureFilter.needGeometry,Ze=nd(ce,qe);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),Ze,x))continue;const Ke=ne?H.evaluate(Ze,{},x):void 0,ut={id:xe,properties:ce.properties,type:ce.type,sourceLayerIndex:$e,index:Ne,geometry:qe?Ze.geometry:rd(ce),patterns:{},sortKey:Ke};j.push(ut)}ne&&j.sort((ce,xe)=>ce.sortKey-xe.sortKey);for(const ce of j){const{geometry:xe,index:Ne,sourceLayerIndex:$e}=ce,qe=o[Ne].feature;this.addFeature(ce,xe,Ne,x),d.featureIndex.insert(qe,xe,Ne,$e,this.index)}}update(o,d,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Th),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,x,P){for(const j of d)for(const H of j){const ne=H.x,ce=H.y;if(ne<0||ne>=ns||ce<0||ce>=ns)continue;const xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Ne=xe.vertexLength;iy(this.layoutVertexArray,ne,ce,-1,-1),iy(this.layoutVertexArray,ne,ce,1,-1),iy(this.layoutVertexArray,ne,ce,1,1),iy(this.layoutVertexArray,ne,ce,-1,1),this.indexArray.emplaceBack(Ne,Ne+1,Ne+2),this.indexArray.emplaceBack(Ne,Ne+3,Ne+2),xe.vertexLength+=4,xe.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,x,{},P)}}function Q2(u,o){for(let d=0;d<u.length;d++)if(Ih(o,u[d]))return!0;for(let d=0;d<o.length;d++)if(Ih(u,o[d]))return!0;return!!Sx(u,o)}function hD(u,o,d){return!!Ih(u,o)||!!Ex(o,u,d)}function J2(u,o){if(u.length===1)return tC(o,u[0]);for(let d=0;d<o.length;d++){const x=o[d];for(let P=0;P<x.length;P++)if(Ih(u,x[P]))return!0}for(let d=0;d<u.length;d++)if(tC(o,u[d]))return!0;for(let d=0;d<o.length;d++)if(Sx(u,o[d]))return!0;return!1}function pD(u,o,d){if(u.length>1){if(Sx(u,o))return!0;for(let x=0;x<o.length;x++)if(Ex(o[x],u,d))return!0}for(let x=0;x<u.length;x++)if(Ex(u[x],o,d))return!0;return!1}function Sx(u,o){if(u.length===0||o.length===0)return!1;for(let d=0;d<u.length-1;d++){const x=u[d],P=u[d+1];for(let j=0;j<o.length-1;j++)if(fD(x,P,o[j],o[j+1]))return!0}return!1}function fD(u,o,d,x){return S(u,d,x)!==S(o,d,x)&&S(u,o,d)!==S(u,o,x)}function Ex(u,o,d){const x=d*d;if(o.length===1)return u.distSqr(o[0])<x;for(let P=1;P<o.length;P++)if(eC(u,o[P-1],o[P])<x)return!0;return!1}function eC(u,o,d){const x=o.distSqr(d);if(x===0)return u.distSqr(o);const P=((u.x-o.x)*(d.x-o.x)+(u.y-o.y)*(d.y-o.y))/x;return u.distSqr(P<0?o:P>1?d:d.sub(o)._mult(P)._add(o))}function tC(u,o){let d,x,P,j=!1;for(let H=0;H<u.length;H++){d=u[H];for(let ne=0,ce=d.length-1;ne<d.length;ce=ne++)x=d[ne],P=d[ce],x.y>o.y!=P.y>o.y&&o.x<(P.x-x.x)*(o.y-x.y)/(P.y-x.y)+x.x&&(j=!j)}return j}function Ih(u,o){let d=!1;for(let x=0,P=u.length-1;x<u.length;P=x++){const j=u[x],H=u[P];j.y>o.y!=H.y>o.y&&o.x<(H.x-j.x)*(o.y-j.y)/(H.y-j.y)+j.x&&(d=!d)}return d}function mD(u,o,d){const x=d[0],P=d[2];if(u.x<x.x&&o.x<x.x||u.x>P.x&&o.x>P.x||u.y<x.y&&o.y<x.y||u.y>P.y&&o.y>P.y)return!1;const j=S(u,o,d[0]);return j!==S(u,o,d[1])||j!==S(u,o,d[2])||j!==S(u,o,d[3])}function bf(u,o,d){const x=o.paint.get(u).value;return x.kind==="constant"?x.value:d.programConfigurations.get(o.id).getMaxValue(u)}function ry(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ny(u,o,d,x,P){if(!o[0]&&!o[1])return u;const j=G.convert(o)._mult(P);d==="viewport"&&j._rotate(-x);const H=[];for(let ne=0;ne<u.length;ne++)H.push(u[ne].sub(j));return H}hi("CircleBucket",Tx,{omit:["layers"]});const gD=new rs({"circle-sort-key":new Li(Oe.layout_circle["circle-sort-key"])});var yD={paint:new rs({"circle-radius":new Li(Oe.paint_circle["circle-radius"]),"circle-color":new Li(Oe.paint_circle["circle-color"]),"circle-blur":new Li(Oe.paint_circle["circle-blur"]),"circle-opacity":new Li(Oe.paint_circle["circle-opacity"]),"circle-translate":new Ti(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Ti(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ti(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ti(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Li(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Li(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Li(Oe.paint_circle["circle-stroke-opacity"])}),layout:gD},ga=1e-6,ya=typeof Float32Array<"u"?Float32Array:Array;function iC(){var u=new ya(9);return ya!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function kx(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function rC(u,o,d){var x=o[0],P=o[1],j=o[2],H=o[3],ne=o[4],ce=o[5],xe=o[6],Ne=o[7],$e=o[8],qe=o[9],Ze=o[10],Ke=o[11],ut=o[12],lt=o[13],_t=o[14],Dt=o[15],xt=d[0],Pt=d[1],Ut=d[2],Ft=d[3];return u[0]=xt*x+Pt*ne+Ut*$e+Ft*ut,u[1]=xt*P+Pt*ce+Ut*qe+Ft*lt,u[2]=xt*j+Pt*xe+Ut*Ze+Ft*_t,u[3]=xt*H+Pt*Ne+Ut*Ke+Ft*Dt,u[4]=(xt=d[4])*x+(Pt=d[5])*ne+(Ut=d[6])*$e+(Ft=d[7])*ut,u[5]=xt*P+Pt*ce+Ut*qe+Ft*lt,u[6]=xt*j+Pt*xe+Ut*Ze+Ft*_t,u[7]=xt*H+Pt*Ne+Ut*Ke+Ft*Dt,u[8]=(xt=d[8])*x+(Pt=d[9])*ne+(Ut=d[10])*$e+(Ft=d[11])*ut,u[9]=xt*P+Pt*ce+Ut*qe+Ft*lt,u[10]=xt*j+Pt*xe+Ut*Ze+Ft*_t,u[11]=xt*H+Pt*Ne+Ut*Ke+Ft*Dt,u[12]=(xt=d[12])*x+(Pt=d[13])*ne+(Ut=d[14])*$e+(Ft=d[15])*ut,u[13]=xt*P+Pt*ce+Ut*qe+Ft*lt,u[14]=xt*j+Pt*xe+Ut*Ze+Ft*_t,u[15]=xt*H+Pt*Ne+Ut*Ke+Ft*Dt,u}Math.hypot||(Math.hypot=function(){for(var u=0,o=arguments.length;o--;)u+=arguments[o]*arguments[o];return Math.sqrt(u)});var wf,vD=rC;function nC(){var u=new ya(3);return ya!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function sC(u,o,d){var x=new ya(3);return x[0]=u,x[1]=o,x[2]=d,x}function sy(u,o,d){var x=o[0],P=o[1],j=o[2],H=o[3];return u[0]=d[0]*x+d[4]*P+d[8]*j+d[12]*H,u[1]=d[1]*x+d[5]*P+d[9]*j+d[13]*H,u[2]=d[2]*x+d[6]*P+d[10]*j+d[14]*H,u[3]=d[3]*x+d[7]*P+d[11]*j+d[15]*H,u}function aC(){var u=new ya(4);return ya!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function oC(u,o){const d=sy([],[u.x,u.y,0,1],o);return new G(d[0]/d[3],d[1]/d[3])}nC(),wf=new ya(4),ya!=Float32Array&&(wf[0]=0,wf[1]=0,wf[2]=0,wf[3]=0),nC(),sC(1,0,0),sC(0,1,0),aC(),aC(),iC(),function(){var u;u=new ya(2),ya!=Float32Array&&(u[0]=0,u[1]=0)}();class lC extends Tx{}hi("HeatmapBucket",lC,{omit:["layers"]});var xD={paint:new rs({"heatmap-radius":new Li(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Li(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ti(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yf(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ti(Oe.paint_heatmap["heatmap-opacity"])})};function Mx(u,{width:o,height:d},x,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==o*d*x)throw new RangeError(`mismatched image size. expected: ${P.length} but got: ${o*d*x}`)}else P=new Uint8Array(o*d*x);return u.width=o,u.height=d,u.data=P,u}function cC(u,{width:o,height:d},x){if(o===u.width&&d===u.height)return;const P=Mx({},{width:o,height:d},x);Ax(u,P,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,o),height:Math.min(u.height,d)},x),u.width=o,u.height=d,u.data=P.data}function Ax(u,o,d,x,P,j){if(P.width===0||P.height===0)return o;if(P.width>u.width||P.height>u.height||d.x>u.width-P.width||d.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>o.width||P.height>o.height||x.x>o.width-P.width||x.y>o.height-P.height)throw new RangeError("out of range destination coordinates for image copy");const H=u.data,ne=o.data;if(H===ne)throw new Error("srcData equals dstData, so image is already copied");for(let ce=0;ce<P.height;ce++){const xe=((d.y+ce)*u.width+d.x)*j,Ne=((x.y+ce)*o.width+x.x)*j;for(let $e=0;$e<P.width*j;$e++)ne[Ne+$e]=H[xe+$e]}return o}class _f{constructor(o,d){Mx(this,o,1,d)}resize(o){cC(this,o,1)}clone(){return new _f({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,x,P,j){Ax(o,d,x,P,j,1)}}class mo{constructor(o,d){Mx(this,o,4,d)}resize(o){cC(this,o,4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,x,P,j){Ax(o,d,x,P,j,4)}}function uC(u){const o={},d=u.resolution||256,x=u.clips?u.clips.length:1,P=u.image||new mo({width:d,height:x});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const j=(H,ne,ce)=>{o[u.evaluationKey]=ce;const xe=u.expression.evaluate(o);P.data[H+ne+0]=Math.floor(255*xe.r/xe.a),P.data[H+ne+1]=Math.floor(255*xe.g/xe.a),P.data[H+ne+2]=Math.floor(255*xe.b/xe.a),P.data[H+ne+3]=Math.floor(255*xe.a)};if(u.clips)for(let H=0,ne=0;H<x;++H,ne+=4*d)for(let ce=0,xe=0;ce<d;ce++,xe+=4){const Ne=ce/(d-1),{start:$e,end:qe}=u.clips[H];j(ne,xe,$e*(1-Ne)+qe*Ne)}else for(let H=0,ne=0;H<d;H++,ne+=4)j(0,ne,H/(d-1));return P}hi("AlphaImage",_f),hi("RGBAImage",mo);var bD={paint:new rs({"hillshade-illumination-direction":new Ti(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ti(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ti(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ti(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ti(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ti(Oe.paint_hillshade["hillshade-accent-color"])})};const wD=Zn([{name:"a_pos",components:2,type:"Int16"}],4),{members:_D}=wD;var ay={exports:{}};function oy(u,o,d){d=d||2;var x,P,j,H,ne,ce,xe,Ne=o&&o.length,$e=Ne?o[0]*d:u.length,qe=dC(u,0,$e,d,!0),Ze=[];if(!qe||qe.next===qe.prev)return Ze;if(Ne&&(qe=function(ut,lt,_t,Dt){var xt,Pt,Ut,Ft=[];for(xt=0,Pt=lt.length;xt<Pt;xt++)(Ut=dC(ut,lt[xt]*Dt,xt<Pt-1?lt[xt+1]*Dt:ut.length,Dt,!1))===Ut.next&&(Ut.steiner=!0),Ft.push(ID(Ut));for(Ft.sort(kD),xt=0;xt<Ft.length;xt++)_t=MD(Ft[xt],_t);return _t}(u,o,qe,d)),u.length>80*d){x=j=u[0],P=H=u[1];for(var Ke=d;Ke<$e;Ke+=d)(ne=u[Ke])<x&&(x=ne),(ce=u[Ke+1])<P&&(P=ce),ne>j&&(j=ne),ce>H&&(H=ce);xe=(xe=Math.max(j-x,H-P))!==0?32767/xe:0}return Cf(qe,Ze,d,x,P,xe,0),Ze}function dC(u,o,d,x,P){var j,H;if(P===Dx(u,o,d,x)>0)for(j=o;j<d;j+=x)H=fC(j,u[j],u[j+1],H);else for(j=d-x;j>=o;j-=x)H=fC(j,u[j],u[j+1],H);return H&&ly(H,H.next)&&(Sf(H),H=H.next),H}function sd(u,o){if(!u)return u;o||(o=u);var d,x=u;do if(d=!1,x.steiner||!ly(x,x.next)&&Un(x.prev,x,x.next)!==0)x=x.next;else{if(Sf(x),(x=o=x.prev)===x.next)break;d=!0}while(d||x!==o);return o}function Cf(u,o,d,x,P,j,H){if(u){!H&&j&&function(Ne,$e,qe,Ze){var Ke=Ne;do Ke.z===0&&(Ke.z=Ix(Ke.x,Ke.y,$e,qe,Ze)),Ke.prevZ=Ke.prev,Ke.nextZ=Ke.next,Ke=Ke.next;while(Ke!==Ne);Ke.prevZ.nextZ=null,Ke.prevZ=null,function(ut){var lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i=1;do{for(_t=ut,ut=null,Pt=null,Ut=0;_t;){for(Ut++,Dt=_t,Ft=0,lt=0;lt<_i&&(Ft++,Dt=Dt.nextZ);lt++);for(yi=_i;Ft>0||yi>0&&Dt;)Ft!==0&&(yi===0||!Dt||_t.z<=Dt.z)?(xt=_t,_t=_t.nextZ,Ft--):(xt=Dt,Dt=Dt.nextZ,yi--),Pt?Pt.nextZ=xt:ut=xt,xt.prevZ=Pt,Pt=xt;_t=Dt}Pt.nextZ=null,_i*=2}while(Ut>1)}(Ke)}(u,x,P,j);for(var ne,ce,xe=u;u.prev!==u.next;)if(ne=u.prev,ce=u.next,j?TD(u,x,P,j):CD(u))o.push(ne.i/d|0),o.push(u.i/d|0),o.push(ce.i/d|0),Sf(u),u=ce.next,xe=ce.next;else if((u=ce)===xe){H?H===1?Cf(u=SD(sd(u),o,d),o,d,x,P,j,2):H===2&&ED(u,o,d,x,P,j):Cf(sd(u),o,d,x,P,j,1);break}}}function CD(u){var o=u.prev,d=u,x=u.next;if(Un(o,d,x)>=0)return!1;for(var P=o.x,j=d.x,H=x.x,ne=o.y,ce=d.y,xe=x.y,Ne=P<j?P<H?P:H:j<H?j:H,$e=ne<ce?ne<xe?ne:xe:ce<xe?ce:xe,qe=P>j?P>H?P:H:j>H?j:H,Ze=ne>ce?ne>xe?ne:xe:ce>xe?ce:xe,Ke=x.next;Ke!==o;){if(Ke.x>=Ne&&Ke.x<=qe&&Ke.y>=$e&&Ke.y<=Ze&&Ph(P,ne,j,ce,H,xe,Ke.x,Ke.y)&&Un(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.next}return!0}function TD(u,o,d,x){var P=u.prev,j=u,H=u.next;if(Un(P,j,H)>=0)return!1;for(var ne=P.x,ce=j.x,xe=H.x,Ne=P.y,$e=j.y,qe=H.y,Ze=ne<ce?ne<xe?ne:xe:ce<xe?ce:xe,Ke=Ne<$e?Ne<qe?Ne:qe:$e<qe?$e:qe,ut=ne>ce?ne>xe?ne:xe:ce>xe?ce:xe,lt=Ne>$e?Ne>qe?Ne:qe:$e>qe?$e:qe,_t=Ix(Ze,Ke,o,d,x),Dt=Ix(ut,lt,o,d,x),xt=u.prevZ,Pt=u.nextZ;xt&&xt.z>=_t&&Pt&&Pt.z<=Dt;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Ke&&xt.y<=lt&&xt!==P&&xt!==H&&Ph(ne,Ne,ce,$e,xe,qe,xt.x,xt.y)&&Un(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Ke&&Pt.y<=lt&&Pt!==P&&Pt!==H&&Ph(ne,Ne,ce,$e,xe,qe,Pt.x,Pt.y)&&Un(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;xt&&xt.z>=_t;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Ke&&xt.y<=lt&&xt!==P&&xt!==H&&Ph(ne,Ne,ce,$e,xe,qe,xt.x,xt.y)&&Un(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Pt&&Pt.z<=Dt;){if(Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Ke&&Pt.y<=lt&&Pt!==P&&Pt!==H&&Ph(ne,Ne,ce,$e,xe,qe,Pt.x,Pt.y)&&Un(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function SD(u,o,d){var x=u;do{var P=x.prev,j=x.next.next;!ly(P,j)&&hC(P,x,x.next,j)&&Tf(P,j)&&Tf(j,P)&&(o.push(P.i/d|0),o.push(x.i/d|0),o.push(j.i/d|0),Sf(x),Sf(x.next),x=u=j),x=x.next}while(x!==u);return sd(x)}function ED(u,o,d,x,P,j){var H=u;do{for(var ne=H.next.next;ne!==H.prev;){if(H.i!==ne.i&&PD(H,ne)){var ce=pC(H,ne);return H=sd(H,H.next),ce=sd(ce,ce.next),Cf(H,o,d,x,P,j,0),void Cf(ce,o,d,x,P,j,0)}ne=ne.next}H=H.next}while(H!==u)}function kD(u,o){return u.x-o.x}function MD(u,o){var d=function(P,j){var H,ne=j,ce=P.x,xe=P.y,Ne=-1/0;do{if(xe<=ne.y&&xe>=ne.next.y&&ne.next.y!==ne.y){var $e=ne.x+(xe-ne.y)*(ne.next.x-ne.x)/(ne.next.y-ne.y);if($e<=ce&&$e>Ne&&(Ne=$e,H=ne.x<ne.next.x?ne:ne.next,$e===ce))return H}ne=ne.next}while(ne!==j);if(!H)return null;var qe,Ze=H,Ke=H.x,ut=H.y,lt=1/0;ne=H;do ce>=ne.x&&ne.x>=Ke&&ce!==ne.x&&Ph(xe<ut?ce:Ne,xe,Ke,ut,xe<ut?Ne:ce,xe,ne.x,ne.y)&&(qe=Math.abs(xe-ne.y)/(ce-ne.x),Tf(ne,P)&&(qe<lt||qe===lt&&(ne.x>H.x||ne.x===H.x&&AD(H,ne)))&&(H=ne,lt=qe)),ne=ne.next;while(ne!==Ze);return H}(u,o);if(!d)return o;var x=pC(d,u);return sd(x,x.next),sd(d,d.next)}function AD(u,o){return Un(u.prev,u,o.prev)<0&&Un(o.next,u,u.next)<0}function Ix(u,o,d,x,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-d)*P|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-x)*P|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function ID(u){var o=u,d=u;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==u);return d}function Ph(u,o,d,x,P,j,H,ne){return(P-H)*(o-ne)>=(u-H)*(j-ne)&&(u-H)*(x-ne)>=(d-H)*(o-ne)&&(d-H)*(j-ne)>=(P-H)*(x-ne)}function PD(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(d,x){var P=d;do{if(P.i!==d.i&&P.next.i!==d.i&&P.i!==x.i&&P.next.i!==x.i&&hC(P,P.next,d,x))return!0;P=P.next}while(P!==d);return!1}(u,o)&&(Tf(u,o)&&Tf(o,u)&&function(d,x){var P=d,j=!1,H=(d.x+x.x)/2,ne=(d.y+x.y)/2;do P.y>ne!=P.next.y>ne&&P.next.y!==P.y&&H<(P.next.x-P.x)*(ne-P.y)/(P.next.y-P.y)+P.x&&(j=!j),P=P.next;while(P!==d);return j}(u,o)&&(Un(u.prev,u,o.prev)||Un(u,o.prev,o))||ly(u,o)&&Un(u.prev,u,u.next)>0&&Un(o.prev,o,o.next)>0)}function Un(u,o,d){return(o.y-u.y)*(d.x-o.x)-(o.x-u.x)*(d.y-o.y)}function ly(u,o){return u.x===o.x&&u.y===o.y}function hC(u,o,d,x){var P=uy(Un(u,o,d)),j=uy(Un(u,o,x)),H=uy(Un(d,x,u)),ne=uy(Un(d,x,o));return P!==j&&H!==ne||!(P!==0||!cy(u,d,o))||!(j!==0||!cy(u,x,o))||!(H!==0||!cy(d,u,x))||!(ne!==0||!cy(d,o,x))}function cy(u,o,d){return o.x<=Math.max(u.x,d.x)&&o.x>=Math.min(u.x,d.x)&&o.y<=Math.max(u.y,d.y)&&o.y>=Math.min(u.y,d.y)}function uy(u){return u>0?1:u<0?-1:0}function Tf(u,o){return Un(u.prev,u,u.next)<0?Un(u,o,u.next)>=0&&Un(u,u.prev,o)>=0:Un(u,o,u.prev)<0||Un(u,u.next,o)<0}function pC(u,o){var d=new Px(u.i,u.x,u.y),x=new Px(o.i,o.x,o.y),P=u.next,j=o.prev;return u.next=o,o.prev=u,d.next=P,P.prev=d,x.next=d,d.prev=x,j.next=x,x.prev=j,x}function fC(u,o,d,x){var P=new Px(u,o,d);return x?(P.next=x.next,P.prev=x,x.next.prev=P,x.next=P):(P.prev=P,P.next=P),P}function Sf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Px(u,o,d){this.i=u,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dx(u,o,d,x){for(var P=0,j=o,H=d-x;j<d;j+=x)P+=(u[H]-u[j])*(u[j+1]+u[H+1]),H=j;return P}function DD(u,o,d,x,P){mC(u,o,d,x||u.length-1,P||RD)}function mC(u,o,d,x,P){for(;x>d;){if(x-d>600){var j=x-d+1,H=o-d+1,ne=Math.log(j),ce=.5*Math.exp(2*ne/3),xe=.5*Math.sqrt(ne*ce*(j-ce)/j)*(H-j/2<0?-1:1);mC(u,o,Math.max(d,Math.floor(o-H*ce/j+xe)),Math.min(x,Math.floor(o+(j-H)*ce/j+xe)),P)}var Ne=u[o],$e=d,qe=x;for(Ef(u,d,o),P(u[x],Ne)>0&&Ef(u,d,x);$e<qe;){for(Ef(u,$e,qe),$e++,qe--;P(u[$e],Ne)<0;)$e++;for(;P(u[qe],Ne)>0;)qe--}P(u[d],Ne)===0?Ef(u,d,qe):Ef(u,++qe,x),qe<=o&&(d=qe+1),o<=qe&&(x=qe-1)}}function Ef(u,o,d){var x=u[o];u[o]=u[d],u[d]=x}function RD(u,o){return u<o?-1:u>o?1:0}function Rx(u,o){const d=u.length;if(d<=1)return[u];const x=[];let P,j;for(let H=0;H<d;H++){const ne=N(u[H]);ne!==0&&(u[H].area=Math.abs(ne),j===void 0&&(j=ne<0),j===ne<0?(P&&x.push(P),P=[u[H]]):P.push(u[H]))}if(P&&x.push(P),o>1)for(let H=0;H<x.length;H++)x[H].length<=o||(DD(x[H],o,1,x[H].length-1,LD),x[H]=x[H].slice(0,o));return x}function LD(u,o){return o.area-u.area}function Lx(u,o,d){const x=d.patternDependencies;let P=!1;for(const j of o){const H=j.paint.get(`${u}-pattern`);H.isConstant()||(P=!0);const ne=H.constantOr(null);ne&&(P=!0,x[ne.to]=!0,x[ne.from]=!0)}return P}function Nx(u,o,d,x,P){const j=P.patternDependencies;for(const H of o){const ne=H.paint.get(`${u}-pattern`).value;if(ne.kind!=="constant"){let ce=ne.evaluate({zoom:x-1},d,{},P.availableImages),xe=ne.evaluate({zoom:x},d,{},P.availableImages),Ne=ne.evaluate({zoom:x+1},d,{},P.availableImages);ce=ce&&ce.name?ce.name:ce,xe=xe&&xe.name?xe.name:xe,Ne=Ne&&Ne.name?Ne.name:Ne,j[ce]=!0,j[xe]=!0,j[Ne]=!0,d.patterns[H.id]={min:ce,mid:xe,max:Ne}}}return d}ay.exports=oy,ay.exports.default=oy,oy.deviation=function(u,o,d,x){var P=o&&o.length,j=Math.abs(Dx(u,0,P?o[0]*d:u.length,d));if(P)for(var H=0,ne=o.length;H<ne;H++)j-=Math.abs(Dx(u,o[H]*d,H<ne-1?o[H+1]*d:u.length,d));var ce=0;for(H=0;H<x.length;H+=3){var xe=x[H]*d,Ne=x[H+1]*d,$e=x[H+2]*d;ce+=Math.abs((u[xe]-u[$e])*(u[Ne+1]-u[xe+1])-(u[xe]-u[Ne])*(u[$e+1]-u[xe+1]))}return j===0&&ce===0?0:Math.abs((ce-j)/j)},oy.flatten=function(u){for(var o=u[0][0].length,d={vertices:[],holes:[],dimensions:o},x=0,P=0;P<u.length;P++){for(var j=0;j<u[P].length;j++)for(var H=0;H<o;H++)d.vertices.push(u[P][j][H]);P>0&&d.holes.push(x+=u[P-1].length)}return d};class zx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gr,this.indexArray=new Es,this.indexArray2=new po,this.programConfigurations=new id(o.layers,o.zoom),this.segments=new Ar,this.segments2=new Ar,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,x){this.hasPattern=Lx("fill",this.layers,d);const P=this.layers[0].layout.get("fill-sort-key"),j=!P.isConstant(),H=[];for(const{feature:ne,id:ce,index:xe,sourceLayerIndex:Ne}of o){const $e=this.layers[0]._featureFilter.needGeometry,qe=nd(ne,$e);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),qe,x))continue;const Ze=j?P.evaluate(qe,{},x,d.availableImages):void 0,Ke={id:ce,properties:ne.properties,type:ne.type,sourceLayerIndex:Ne,index:xe,geometry:$e?qe.geometry:rd(ne),patterns:{},sortKey:Ze};H.push(Ke)}j&&H.sort((ne,ce)=>ne.sortKey-ce.sortKey);for(const ne of H){const{geometry:ce,index:xe,sourceLayerIndex:Ne}=ne;if(this.hasPattern){const $e=Nx("fill",this.layers,ne,this.zoom,d);this.patternFeatures.push($e)}else this.addFeature(ne,ce,xe,x,{});d.featureIndex.insert(o[xe].feature,ce,xe,Ne,this.index)}}update(o,d,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,x)}addFeatures(o,d,x){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,_D),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,x,P,j){for(const H of Rx(d,500)){let ne=0;for(const Ze of H)ne+=Ze.length;const ce=this.segments.prepareSegment(ne,this.layoutVertexArray,this.indexArray),xe=ce.vertexLength,Ne=[],$e=[];for(const Ze of H){if(Ze.length===0)continue;Ze!==H[0]&&$e.push(Ne.length/2);const Ke=this.segments2.prepareSegment(Ze.length,this.layoutVertexArray,this.indexArray2),ut=Ke.vertexLength;this.layoutVertexArray.emplaceBack(Ze[0].x,Ze[0].y),this.indexArray2.emplaceBack(ut+Ze.length-1,ut),Ne.push(Ze[0].x),Ne.push(Ze[0].y);for(let lt=1;lt<Ze.length;lt++)this.layoutVertexArray.emplaceBack(Ze[lt].x,Ze[lt].y),this.indexArray2.emplaceBack(ut+lt-1,ut+lt),Ne.push(Ze[lt].x),Ne.push(Ze[lt].y);Ke.vertexLength+=Ze.length,Ke.primitiveLength+=Ze.length}const qe=ay.exports(Ne,$e);for(let Ze=0;Ze<qe.length;Ze+=3)this.indexArray.emplaceBack(xe+qe[Ze],xe+qe[Ze+1],xe+qe[Ze+2]);ce.vertexLength+=ne,ce.primitiveLength+=qe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,x,j,P)}}hi("FillBucket",zx,{omit:["layers","patternFeatures"]});const ND=new rs({"fill-sort-key":new Li(Oe.layout_fill["fill-sort-key"])});var zD={paint:new rs({"fill-antialias":new Ti(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Li(Oe.paint_fill["fill-opacity"]),"fill-color":new Li(Oe.paint_fill["fill-color"]),"fill-outline-color":new Li(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Ti(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Ti(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ku(Oe.paint_fill["fill-pattern"])}),layout:ND};const jD=Zn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),OD=Zn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:FD}=jD;var Vc={},BD=G,gC=Dh;function Dh(u,o,d,x,P){this.properties={},this.extent=d,this.type=0,this._pbf=u,this._geometry=-1,this._keys=x,this._values=P,u.readFields($D,this,o)}function $D(u,o,d){u==1?o.id=d.readVarint():u==2?function(x,P){for(var j=x.readVarint()+x.pos;x.pos<j;){var H=P._keys[x.readVarint()],ne=P._values[x.readVarint()];P.properties[H]=ne}}(d,o):u==3?o.type=d.readVarint():u==4&&(o._geometry=d.pos)}function UD(u){for(var o,d,x=0,P=0,j=u.length,H=j-1;P<j;H=P++)x+=((d=u[H]).x-(o=u[P]).x)*(o.y+d.y);return x}Dh.types=["Unknown","Point","LineString","Polygon"],Dh.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var o,d=u.readVarint()+u.pos,x=1,P=0,j=0,H=0,ne=[];u.pos<d;){if(P<=0){var ce=u.readVarint();x=7&ce,P=ce>>3}if(P--,x===1||x===2)j+=u.readSVarint(),H+=u.readSVarint(),x===1&&(o&&ne.push(o),o=[]),o.push(new BD(j,H));else{if(x!==7)throw new Error("unknown command "+x);o&&o.push(o[0].clone())}}return o&&ne.push(o),ne},Dh.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var o=u.readVarint()+u.pos,d=1,x=0,P=0,j=0,H=1/0,ne=-1/0,ce=1/0,xe=-1/0;u.pos<o;){if(x<=0){var Ne=u.readVarint();d=7&Ne,x=Ne>>3}if(x--,d===1||d===2)(P+=u.readSVarint())<H&&(H=P),P>ne&&(ne=P),(j+=u.readSVarint())<ce&&(ce=j),j>xe&&(xe=j);else if(d!==7)throw new Error("unknown command "+d)}return[H,ce,ne,xe]},Dh.prototype.toGeoJSON=function(u,o,d){var x,P,j=this.extent*Math.pow(2,d),H=this.extent*u,ne=this.extent*o,ce=this.loadGeometry(),xe=Dh.types[this.type];function Ne(Ze){for(var Ke=0;Ke<Ze.length;Ke++){var ut=Ze[Ke];Ze[Ke]=[360*(ut.x+H)/j-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+ne)/j)*Math.PI/180))-90]}}switch(this.type){case 1:var $e=[];for(x=0;x<ce.length;x++)$e[x]=ce[x][0];Ne(ce=$e);break;case 2:for(x=0;x<ce.length;x++)Ne(ce[x]);break;case 3:for(ce=function(Ze){var Ke=Ze.length;if(Ke<=1)return[Ze];for(var ut,lt,_t=[],Dt=0;Dt<Ke;Dt++){var xt=UD(Ze[Dt]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ut&&_t.push(ut),ut=[Ze[Dt]]):ut.push(Ze[Dt]))}return ut&&_t.push(ut),_t}(ce),x=0;x<ce.length;x++)for(P=0;P<ce[x].length;P++)Ne(ce[x][P])}ce.length===1?ce=ce[0]:xe="Multi"+xe;var qe={type:"Feature",geometry:{type:xe,coordinates:ce},properties:this.properties};return"id"in this&&(qe.id=this.id),qe};var VD=gC,yC=vC;function vC(u,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(HD,this,o),this.length=this._features.length}function HD(u,o,d){u===15?o.version=d.readVarint():u===1?o.name=d.readString():u===5?o.extent=d.readVarint():u===2?o._features.push(d.pos):u===3?o._keys.push(d.readString()):u===4&&o._values.push(function(x){for(var P=null,j=x.readVarint()+x.pos;x.pos<j;){var H=x.readVarint()>>3;P=H===1?x.readString():H===2?x.readFloat():H===3?x.readDouble():H===4?x.readVarint64():H===5?x.readVarint():H===6?x.readSVarint():H===7?x.readBoolean():null}return P}(d))}vC.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var o=this._pbf.readVarint()+this._pbf.pos;return new VD(this._pbf,o,this.extent,this._keys,this._values)};var GD=yC;function qD(u,o,d){if(u===3){var x=new GD(d,d.readVarint()+d.pos);x.length&&(o[x.name]=x)}}Vc.VectorTile=function(u,o){this.layers=u.readFields(qD,{},o)},Vc.VectorTileFeature=gC,Vc.VectorTileLayer=yC;const WD=Vc.VectorTileFeature.types,jx=Math.pow(2,13);function kf(u,o,d,x,P,j,H,ne){u.emplaceBack(o,d,2*Math.floor(x*jx)+H,P*jx*2,j*jx*2,Math.round(ne))}class Ox{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new qr,this.centroidVertexArray=new cr,this.indexArray=new Es,this.programConfigurations=new id(o.layers,o.zoom),this.segments=new Ar,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,x){this.features=[],this.hasPattern=Lx("fill-extrusion",this.layers,d);for(const{feature:P,id:j,index:H,sourceLayerIndex:ne}of o){const ce=this.layers[0]._featureFilter.needGeometry,xe=nd(P,ce);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),xe,x))continue;const Ne={id:j,sourceLayerIndex:ne,index:H,geometry:ce?xe.geometry:rd(P),properties:P.properties,type:P.type,patterns:{}};this.hasPattern?this.features.push(Nx("fill-extrusion",this.layers,Ne,this.zoom,d)):this.addFeature(Ne,Ne.geometry,H,x,{}),d.featureIndex.insert(P,Ne.geometry,H,ne,this.index,!0)}}addFeatures(o,d,x){for(const P of this.features){const{geometry:j}=P;this.addFeature(P,j,P.index,d,x)}}update(o,d,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,FD),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,OD.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,d,x,P,j){const H={x:0,y:0,vertexCount:0};for(const ne of Rx(d,500)){let ce=0;for(const Ke of ne)ce+=Ke.length;let xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ke of ne){if(Ke.length===0||ZD(Ke))continue;let ut=0;for(let lt=0;lt<Ke.length;lt++){const _t=Ke[lt];if(lt>=1){const Dt=Ke[lt-1];if(!YD(_t,Dt)){xe.vertexLength+4>Ar.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=_t.sub(Dt)._perp()._unit(),Pt=Dt.dist(_t);ut+Pt>32768&&(ut=0),kf(this.layoutVertexArray,_t.x,_t.y,xt.x,xt.y,0,0,ut),kf(this.layoutVertexArray,_t.x,_t.y,xt.x,xt.y,0,1,ut),H.x+=2*_t.x,H.y+=2*_t.y,H.vertexCount+=2,ut+=Pt,kf(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,0,ut),kf(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,1,ut),H.x+=2*Dt.x,H.y+=2*Dt.y,H.vertexCount+=2;const Ut=xe.vertexLength;this.indexArray.emplaceBack(Ut,Ut+2,Ut+1),this.indexArray.emplaceBack(Ut+1,Ut+2,Ut+3),xe.vertexLength+=4,xe.primitiveLength+=2}}}}if(xe.vertexLength+ce>Ar.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(ce,this.layoutVertexArray,this.indexArray)),WD[o.type]!=="Polygon")continue;const Ne=[],$e=[],qe=xe.vertexLength;for(const Ke of ne)if(Ke.length!==0){Ke!==ne[0]&&$e.push(Ne.length/2);for(let ut=0;ut<Ke.length;ut++){const lt=Ke[ut];kf(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),H.x+=lt.x,H.y+=lt.y,H.vertexCount+=1,Ne.push(lt.x),Ne.push(lt.y)}}const Ze=ay.exports(Ne,$e);for(let Ke=0;Ke<Ze.length;Ke+=3)this.indexArray.emplaceBack(qe+Ze[Ke],qe+Ze[Ke+2],qe+Ze[Ke+1]);xe.primitiveLength+=Ze.length/3,xe.vertexLength+=ce}for(let ne=0;ne<H.vertexCount;ne++)this.centroidVertexArray.emplaceBack(Math.floor(H.x/H.vertexCount),Math.floor(H.y/H.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,x,j,P)}}function YD(u,o){return u.x===o.x&&(u.x<0||u.x>ns)||u.y===o.y&&(u.y<0||u.y>ns)}function ZD(u){return u.every(o=>o.x<0)||u.every(o=>o.x>ns)||u.every(o=>o.y<0)||u.every(o=>o.y>ns)}hi("FillExtrusionBucket",Ox,{omit:["layers","features"]});var XD={paint:new rs({"fill-extrusion-opacity":new Ti(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Li(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ti(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ti(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ku(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Li(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Li(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ti(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Mf(u,o){return u.x*o.x+u.y*o.y}function xC(u,o){if(u.length===1){let d=0;const x=o[d++];let P;for(;!P||x.equals(P);)if(P=o[d++],!P)return 1/0;for(;d<o.length;d++){const j=o[d],H=u[0],ne=P.sub(x),ce=j.sub(x),xe=H.sub(x),Ne=Mf(ne,ne),$e=Mf(ne,ce),qe=Mf(ce,ce),Ze=Mf(xe,ne),Ke=Mf(xe,ce),ut=Ne*qe-$e*$e,lt=(qe*Ze-$e*Ke)/ut,_t=(Ne*Ke-$e*Ze)/ut,Dt=x.z*(1-lt-_t)+P.z*lt+j.z*_t;if(isFinite(Dt))return Dt}return 1/0}{let d=1/0;for(const x of o)d=Math.min(d,x.z);return d}}const KD=Zn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:QD}=KD,JD=Zn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:e5}=JD,t5=Vc.VectorTileFeature.types,i5=Math.cos(Math.PI/180*37.5),bC=Math.pow(2,14)/.5;class Fx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new _r,this.layoutVertexArray2=new Tr,this.indexArray=new Es,this.programConfigurations=new id(o.layers,o.zoom),this.segments=new Ar,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,x){this.hasPattern=Lx("line",this.layers,d);const P=this.layers[0].layout.get("line-sort-key"),j=!P.isConstant(),H=[];for(const{feature:ne,id:ce,index:xe,sourceLayerIndex:Ne}of o){const $e=this.layers[0]._featureFilter.needGeometry,qe=nd(ne,$e);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),qe,x))continue;const Ze=j?P.evaluate(qe,{},x):void 0,Ke={id:ce,properties:ne.properties,type:ne.type,sourceLayerIndex:Ne,index:xe,geometry:$e?qe.geometry:rd(ne),patterns:{},sortKey:Ze};H.push(Ke)}j&&H.sort((ne,ce)=>ne.sortKey-ce.sortKey);for(const ne of H){const{geometry:ce,index:xe,sourceLayerIndex:Ne}=ne;if(this.hasPattern){const $e=Nx("line",this.layers,ne,this.zoom,d);this.patternFeatures.push($e)}else this.addFeature(ne,ce,xe,x,{});d.featureIndex.insert(o[xe].feature,ce,xe,Ne,this.index)}}update(o,d,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,x)}addFeatures(o,d,x){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,e5)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,QD),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,x,P,j){const H=this.layers[0].layout,ne=H.get("line-join").evaluate(o,{}),ce=H.get("line-cap"),xe=H.get("line-miter-limit"),Ne=H.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const $e of d)this.addLine($e,o,ne,ce,xe,Ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,x,j,P)}addLine(o,d,x,P,j,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _t=0;_t<o.length-1;_t++)this.totalDistance+=o[_t].dist(o[_t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=t5[d.type]==="Polygon";let ce=o.length;for(;ce>=2&&o[ce-1].equals(o[ce-2]);)ce--;let xe=0;for(;xe<ce-1&&o[xe].equals(o[xe+1]);)xe++;if(ce<(ne?3:2))return;x==="bevel"&&(j=1.05);const Ne=this.overscaling<=16?122880/(512*this.overscaling):0,$e=this.segments.prepareSegment(10*ce,this.layoutVertexArray,this.indexArray);let qe,Ze,Ke,ut,lt;this.e1=this.e2=-1,ne&&(qe=o[ce-2],lt=o[xe].sub(qe)._unit()._perp());for(let _t=xe;_t<ce;_t++){if(Ke=_t===ce-1?ne?o[xe+1]:void 0:o[_t+1],Ke&&o[_t].equals(Ke))continue;lt&&(ut=lt),qe&&(Ze=qe),qe=o[_t],lt=Ke?Ke.sub(qe)._unit()._perp():ut,ut=ut||lt;let Dt=ut.add(lt);Dt.x===0&&Dt.y===0||Dt._unit();const xt=ut.x*lt.x+ut.y*lt.y,Pt=Dt.x*lt.x+Dt.y*lt.y,Ut=Pt!==0?1/Pt:1/0,Ft=2*Math.sqrt(2-2*Pt),yi=Pt<i5&&Ze&&Ke,_i=ut.x*lt.y-ut.y*lt.x>0;if(yi&&_t>xe){const Yt=qe.dist(Ze);if(Yt>2*Ne){const si=qe.sub(qe.sub(Ze)._mult(Ne/Yt)._round());this.updateDistance(Ze,si),this.addCurrentVertex(si,ut,0,0,$e),Ze=si}}const ni=Ze&&Ke;let Qt=ni?x:ne?"butt":P;if(ni&&Qt==="round"&&(Ut<H?Qt="miter":Ut<=2&&(Qt="fakeround")),Qt==="miter"&&Ut>j&&(Qt="bevel"),Qt==="bevel"&&(Ut>2&&(Qt="flipbevel"),Ut<j&&(Qt="miter")),Ze&&this.updateDistance(Ze,qe),Qt==="miter")Dt._mult(Ut),this.addCurrentVertex(qe,Dt,0,0,$e);else if(Qt==="flipbevel"){if(Ut>100)Dt=lt.mult(-1);else{const Yt=Ut*ut.add(lt).mag()/ut.sub(lt).mag();Dt._perp()._mult(Yt*(_i?-1:1))}this.addCurrentVertex(qe,Dt,0,0,$e),this.addCurrentVertex(qe,Dt.mult(-1),0,0,$e)}else if(Qt==="bevel"||Qt==="fakeround"){const Yt=-Math.sqrt(Ut*Ut-1),si=_i?Yt:0,ei=_i?0:Yt;if(Ze&&this.addCurrentVertex(qe,ut,si,ei,$e),Qt==="fakeround"){const Ht=Math.round(180*Ft/Math.PI/20);for(let Ii=1;Ii<Ht;Ii++){let Si=Ii/Ht;if(Si!==.5){const fn=Si-.5;Si+=Si*fn*(Si-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*fn*fn+(.848013+xt*(.215638*xt-1.06021)))}const ur=lt.sub(ut)._mult(Si)._add(ut)._unit()._mult(_i?-1:1);this.addHalfVertex(qe,ur.x,ur.y,!1,_i,0,$e)}}Ke&&this.addCurrentVertex(qe,lt,-si,-ei,$e)}else if(Qt==="butt")this.addCurrentVertex(qe,Dt,0,0,$e);else if(Qt==="square"){const Yt=Ze?1:-1;this.addCurrentVertex(qe,Dt,Yt,Yt,$e)}else Qt==="round"&&(Ze&&(this.addCurrentVertex(qe,ut,0,0,$e),this.addCurrentVertex(qe,ut,1,1,$e,!0)),Ke&&(this.addCurrentVertex(qe,lt,-1,-1,$e,!0),this.addCurrentVertex(qe,lt,0,0,$e)));if(yi&&_t<ce-1){const Yt=qe.dist(Ke);if(Yt>2*Ne){const si=qe.add(Ke.sub(qe)._mult(Ne/Yt)._round());this.updateDistance(qe,si),this.addCurrentVertex(si,lt,0,0,$e),qe=si}}}}addCurrentVertex(o,d,x,P,j,H=!1){const ne=d.y*P-d.x,ce=-d.y-d.x*P;this.addHalfVertex(o,d.x+d.y*x,d.y-d.x*x,H,!1,x,j),this.addHalfVertex(o,ne,ce,H,!0,-P,j),this.distance>bC/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,d,x,P,j,H))}addHalfVertex({x:o,y:d},x,P,j,H,ne,ce){const xe=.5*(this.lineClips?this.scaledDistance*(bC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(j?1:0),(d<<1)+(H?1:0),Math.round(63*x)+128,Math.round(63*P)+128,1+(ne===0?0:ne<0?-1:1)|(63&xe)<<2,xe>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ne=ce.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ne),ce.primitiveLength++),H?this.e2=Ne:this.e1=Ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}hi("LineBucket",Fx,{omit:["layers","patternFeatures"]});const r5=new rs({"line-cap":new Ti(Oe.layout_line["line-cap"]),"line-join":new Li(Oe.layout_line["line-join"]),"line-miter-limit":new Ti(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Ti(Oe.layout_line["line-round-limit"]),"line-sort-key":new Li(Oe.layout_line["line-sort-key"])});var wC={paint:new rs({"line-opacity":new Li(Oe.paint_line["line-opacity"]),"line-color":new Li(Oe.paint_line["line-color"]),"line-translate":new Ti(Oe.paint_line["line-translate"]),"line-translate-anchor":new Ti(Oe.paint_line["line-translate-anchor"]),"line-width":new Li(Oe.paint_line["line-width"]),"line-gap-width":new Li(Oe.paint_line["line-gap-width"]),"line-offset":new Li(Oe.paint_line["line-offset"]),"line-blur":new Li(Oe.paint_line["line-blur"]),"line-dasharray":new Qu(Oe.paint_line["line-dasharray"]),"line-pattern":new Ku(Oe.paint_line["line-pattern"]),"line-gradient":new yf(Oe.paint_line["line-gradient"])}),layout:r5};const _C=new class extends Li{possiblyEvaluate(u,o){return o=new yn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(u,o)}evaluate(u,o,d,x){return o=v({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(u,o,d,x)}}(wC.paint.properties["line-width"].specification);function CC(u,o){return o>0?o+2*u:u}_C.useIntegerZoom=!0;const n5=Zn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s5=Zn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Zn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const a5=Zn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Zn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const TC=Zn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),o5=Zn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function l5(u,o,d){return u.sections.forEach(x=>{x.text=function(P,j,H){const ne=j.layout.get("text-transform").evaluate(H,{});return ne==="uppercase"?P=P.toLocaleUpperCase():ne==="lowercase"&&(P=P.toLocaleLowerCase()),Za.applyArabicShaping&&(P=Za.applyArabicShaping(P)),P}(x.text,o,d)}),u}Zn([{name:"triangle",components:3,type:"Uint16"}]),Zn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Zn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Zn([{type:"Float32",name:"offsetX"}]),Zn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Af={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ks=24,Bx=Qr,SC=function(u,o,d,x,P){var j,H,ne=8*P-x-1,ce=(1<<ne)-1,xe=ce>>1,Ne=-7,$e=P-1,qe=-1,Ze=u[o+$e];for($e+=qe,j=Ze&(1<<-Ne)-1,Ze>>=-Ne,Ne+=ne;Ne>0;j=256*j+u[o+$e],$e+=qe,Ne-=8);for(H=j&(1<<-Ne)-1,j>>=-Ne,Ne+=x;Ne>0;H=256*H+u[o+$e],$e+=qe,Ne-=8);if(j===0)j=1-xe;else{if(j===ce)return H?NaN:1/0*(Ze?-1:1);H+=Math.pow(2,x),j-=xe}return(Ze?-1:1)*H*Math.pow(2,j-x)},EC=function(u,o,d,x,P,j){var H,ne,ce,xe=8*j-P-1,Ne=(1<<xe)-1,$e=Ne>>1,qe=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ze=0,Ke=1,ut=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(ne=isNaN(o)?1:0,H=Ne):(H=Math.floor(Math.log(o)/Math.LN2),o*(ce=Math.pow(2,-H))<1&&(H--,ce*=2),(o+=H+$e>=1?qe/ce:qe*Math.pow(2,1-$e))*ce>=2&&(H++,ce/=2),H+$e>=Ne?(ne=0,H=Ne):H+$e>=1?(ne=(o*ce-1)*Math.pow(2,P),H+=$e):(ne=o*Math.pow(2,$e-1)*Math.pow(2,P),H=0));P>=8;u[d+Ze]=255&ne,Ze+=Ke,ne/=256,P-=8);for(H=H<<P|ne,xe+=P;xe>0;u[d+Ze]=255&H,Ze+=Ke,H/=256,xe-=8);u[d+Ze-Ke]|=128*ut};function Qr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Qr.Varint=0,Qr.Fixed64=1,Qr.Bytes=2,Qr.Fixed32=5;var Hc,$x=4294967296,kC=1/$x,MC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function rc(u){return u.type===Qr.Bytes?u.readVarint()+u.pos:u.pos+1}function Rh(u,o,d){return d?4294967296*o+(u>>>0):4294967296*(o>>>0)+(u>>>0)}function AC(u,o,d){var x=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(x);for(var P=d.pos-1;P>=u;P--)d.buf[P+x]=d.buf[P]}function c5(u,o){for(var d=0;d<u.length;d++)o.writeVarint(u[d])}function u5(u,o){for(var d=0;d<u.length;d++)o.writeSVarint(u[d])}function d5(u,o){for(var d=0;d<u.length;d++)o.writeFloat(u[d])}function h5(u,o){for(var d=0;d<u.length;d++)o.writeDouble(u[d])}function p5(u,o){for(var d=0;d<u.length;d++)o.writeBoolean(u[d])}function f5(u,o){for(var d=0;d<u.length;d++)o.writeFixed32(u[d])}function m5(u,o){for(var d=0;d<u.length;d++)o.writeSFixed32(u[d])}function g5(u,o){for(var d=0;d<u.length;d++)o.writeFixed64(u[d])}function y5(u,o){for(var d=0;d<u.length;d++)o.writeSFixed64(u[d])}function dy(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+16777216*u[o+3]}function Lh(u,o,d){u[d]=o,u[d+1]=o>>>8,u[d+2]=o>>>16,u[d+3]=o>>>24}function IC(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+(u[o+3]<<24)}function v5(u,o,d){u===1&&d.readMessage(x5,o)}function x5(u,o,d){if(u===3){const{id:x,bitmap:P,width:j,height:H,left:ne,top:ce,advance:xe}=d.readMessage(b5,{});o.push({id:x,bitmap:new _f({width:j+6,height:H+6},P),metrics:{width:j,height:H,left:ne,top:ce,advance:xe}})}}function b5(u,o,d){u===1?o.id=d.readVarint():u===2?o.bitmap=d.readBytes():u===3?o.width=d.readVarint():u===4?o.height=d.readVarint():u===5?o.left=d.readSVarint():u===6?o.top=d.readSVarint():u===7&&(o.advance=d.readVarint())}function PC(u){let o=0,d=0;for(const H of u)o+=H.w*H.h,d=Math.max(d,H.w);u.sort((H,ne)=>ne.h-H.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let P=0,j=0;for(const H of u)for(let ne=x.length-1;ne>=0;ne--){const ce=x[ne];if(!(H.w>ce.w||H.h>ce.h)){if(H.x=ce.x,H.y=ce.y,j=Math.max(j,H.y+H.h),P=Math.max(P,H.x+H.w),H.w===ce.w&&H.h===ce.h){const xe=x.pop();ne<x.length&&(x[ne]=xe)}else H.h===ce.h?(ce.x+=H.w,ce.w-=H.w):H.w===ce.w?(ce.y+=H.h,ce.h-=H.h):(x.push({x:ce.x+H.w,y:ce.y,w:ce.w-H.w,h:H.h}),ce.y+=H.h,ce.h-=H.h);break}}return{w:P,h:j,fill:o/(P*j)||0}}Qr.prototype={destroy:function(){this.buf=null},readFields:function(u,o,d){for(d=d||this.length;this.pos<d;){var x=this.readVarint(),P=x>>3,j=this.pos;this.type=7&x,u(P,o,this),this.pos===j&&this.skip(x)}return o},readMessage:function(u,o){return this.readFields(u,o,this.readVarint()+this.pos)},readFixed32:function(){var u=dy(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=IC(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=dy(this.buf,this.pos)+dy(this.buf,this.pos+4)*$x;return this.pos+=8,u},readSFixed64:function(){var u=dy(this.buf,this.pos)+IC(this.buf,this.pos+4)*$x;return this.pos+=8,u},readFloat:function(){var u=SC(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=SC(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var o,d,x=this.buf;return o=127&(d=x[this.pos++]),d<128?o:(o|=(127&(d=x[this.pos++]))<<7,d<128?o:(o|=(127&(d=x[this.pos++]))<<14,d<128?o:(o|=(127&(d=x[this.pos++]))<<21,d<128?o:function(P,j,H){var ne,ce,xe=H.buf;if(ne=(112&(ce=xe[H.pos++]))>>4,ce<128||(ne|=(127&(ce=xe[H.pos++]))<<3,ce<128)||(ne|=(127&(ce=xe[H.pos++]))<<10,ce<128)||(ne|=(127&(ce=xe[H.pos++]))<<17,ce<128)||(ne|=(127&(ce=xe[H.pos++]))<<24,ce<128)||(ne|=(1&(ce=xe[H.pos++]))<<31,ce<128))return Rh(P,ne,j);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(d=x[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,o=this.pos;return this.pos=u,u-o>=12&&MC?function(d,x,P){return MC.decode(d.subarray(x,P))}(this.buf,o,u):function(d,x,P){for(var j="",H=x;H<P;){var ne,ce,xe,Ne=d[H],$e=null,qe=Ne>239?4:Ne>223?3:Ne>191?2:1;if(H+qe>P)break;qe===1?Ne<128&&($e=Ne):qe===2?(192&(ne=d[H+1]))==128&&($e=(31&Ne)<<6|63&ne)<=127&&($e=null):qe===3?(ce=d[H+2],(192&(ne=d[H+1]))==128&&(192&ce)==128&&(($e=(15&Ne)<<12|(63&ne)<<6|63&ce)<=2047||$e>=55296&&$e<=57343)&&($e=null)):qe===4&&(ce=d[H+2],xe=d[H+3],(192&(ne=d[H+1]))==128&&(192&ce)==128&&(192&xe)==128&&(($e=(15&Ne)<<18|(63&ne)<<12|(63&ce)<<6|63&xe)<=65535||$e>=1114112)&&($e=null)),$e===null?($e=65533,qe=1):$e>65535&&($e-=65536,j+=String.fromCharCode($e>>>10&1023|55296),$e=56320|1023&$e),j+=String.fromCharCode($e),H+=qe}return j}(this.buf,o,u)},readBytes:function(){var u=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,u);return this.pos=u,o},readPackedVarint:function(u,o){if(this.type!==Qr.Bytes)return u.push(this.readVarint(o));var d=rc(this);for(u=u||[];this.pos<d;)u.push(this.readVarint(o));return u},readPackedSVarint:function(u){if(this.type!==Qr.Bytes)return u.push(this.readSVarint());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Qr.Bytes)return u.push(this.readBoolean());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Qr.Bytes)return u.push(this.readFloat());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Qr.Bytes)return u.push(this.readDouble());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Qr.Bytes)return u.push(this.readFixed32());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Qr.Bytes)return u.push(this.readSFixed32());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Qr.Bytes)return u.push(this.readFixed64());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Qr.Bytes)return u.push(this.readSFixed64());var o=rc(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed64());return u},skip:function(u){var o=7&u;if(o===Qr.Varint)for(;this.buf[this.pos++]>127;);else if(o===Qr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Qr.Fixed32)this.pos+=4;else{if(o!==Qr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(u,o){this.writeVarint(u<<3|o)},realloc:function(u){for(var o=this.length||16;o<this.pos+u;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Lh(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Lh(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Lh(this.buf,-1&u,this.pos),Lh(this.buf,Math.floor(u*kC),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Lh(this.buf,-1&u,this.pos),Lh(this.buf,Math.floor(u*kC),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(o,d){var x,P;if(o>=0?(x=o%4294967296|0,P=o/4294967296|0):(P=~(-o/4294967296),4294967295^(x=~(-o%4294967296))?x=x+1|0:(x=0,P=P+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(j,H,ne){ne.buf[ne.pos++]=127&j|128,j>>>=7,ne.buf[ne.pos++]=127&j|128,j>>>=7,ne.buf[ne.pos++]=127&j|128,j>>>=7,ne.buf[ne.pos++]=127&j|128,ne.buf[ne.pos]=127&(j>>>=7)}(x,0,d),function(j,H){var ne=(7&j)<<4;H.buf[H.pos++]|=ne|((j>>>=3)?128:0),j&&(H.buf[H.pos++]=127&j|((j>>>=7)?128:0),j&&(H.buf[H.pos++]=127&j|((j>>>=7)?128:0),j&&(H.buf[H.pos++]=127&j|((j>>>=7)?128:0),j&&(H.buf[H.pos++]=127&j|((j>>>=7)?128:0),j&&(H.buf[H.pos++]=127&j)))))}(P,d)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var o=this.pos;this.pos=function(x,P,j){for(var H,ne,ce=0;ce<P.length;ce++){if((H=P.charCodeAt(ce))>55295&&H<57344){if(!ne){H>56319||ce+1===P.length?(x[j++]=239,x[j++]=191,x[j++]=189):ne=H;continue}if(H<56320){x[j++]=239,x[j++]=191,x[j++]=189,ne=H;continue}H=ne-55296<<10|H-56320|65536,ne=null}else ne&&(x[j++]=239,x[j++]=191,x[j++]=189,ne=null);H<128?x[j++]=H:(H<2048?x[j++]=H>>6|192:(H<65536?x[j++]=H>>12|224:(x[j++]=H>>18|240,x[j++]=H>>12&63|128),x[j++]=H>>6&63|128),x[j++]=63&H|128)}return j}(this.buf,u,this.pos);var d=this.pos-o;d>=128&&AC(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(u){this.realloc(4),EC(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),EC(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var o=u.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=u[d]},writeRawMessage:function(u,o){this.pos++;var d=this.pos;u(o,this);var x=this.pos-d;x>=128&&AC(d,x,this),this.pos=d-1,this.writeVarint(x),this.pos+=x},writeMessage:function(u,o,d){this.writeTag(u,Qr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(u,o){o.length&&this.writeMessage(u,c5,o)},writePackedSVarint:function(u,o){o.length&&this.writeMessage(u,u5,o)},writePackedBoolean:function(u,o){o.length&&this.writeMessage(u,p5,o)},writePackedFloat:function(u,o){o.length&&this.writeMessage(u,d5,o)},writePackedDouble:function(u,o){o.length&&this.writeMessage(u,h5,o)},writePackedFixed32:function(u,o){o.length&&this.writeMessage(u,f5,o)},writePackedSFixed32:function(u,o){o.length&&this.writeMessage(u,m5,o)},writePackedFixed64:function(u,o){o.length&&this.writeMessage(u,g5,o)},writePackedSFixed64:function(u,o){o.length&&this.writeMessage(u,y5,o)},writeBytesField:function(u,o){this.writeTag(u,Qr.Bytes),this.writeBytes(o)},writeFixed32Field:function(u,o){this.writeTag(u,Qr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(u,o){this.writeTag(u,Qr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(u,o){this.writeTag(u,Qr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(u,o){this.writeTag(u,Qr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(u,o){this.writeTag(u,Qr.Varint),this.writeVarint(o)},writeSVarintField:function(u,o){this.writeTag(u,Qr.Varint),this.writeSVarint(o)},writeStringField:function(u,o){this.writeTag(u,Qr.Bytes),this.writeString(o)},writeFloatField:function(u,o){this.writeTag(u,Qr.Fixed32),this.writeFloat(o)},writeDoubleField:function(u,o){this.writeTag(u,Qr.Fixed64),this.writeDouble(o)},writeBooleanField:function(u,o){this.writeVarintField(u,!!o)}};class Ux{constructor(o,{pixelRatio:d,version:x,stretchX:P,stretchY:j,content:H}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=P,this.stretchY=j,this.content=H,this.version=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class DC{constructor(o,d){const x={},P={};this.haveRenderCallbacks=[];const j=[];this.addImages(o,x,j),this.addImages(d,P,j);const{w:H,h:ne}=PC(j),ce=new mo({width:H||1,height:ne||1});for(const xe in o){const Ne=o[xe],$e=x[xe].paddedRect;mo.copy(Ne.data,ce,{x:0,y:0},{x:$e.x+1,y:$e.y+1},Ne.data)}for(const xe in d){const Ne=d[xe],$e=P[xe].paddedRect,qe=$e.x+1,Ze=$e.y+1,Ke=Ne.data.width,ut=Ne.data.height;mo.copy(Ne.data,ce,{x:0,y:0},{x:qe,y:Ze},Ne.data),mo.copy(Ne.data,ce,{x:0,y:ut-1},{x:qe,y:Ze-1},{width:Ke,height:1}),mo.copy(Ne.data,ce,{x:0,y:0},{x:qe,y:Ze+ut},{width:Ke,height:1}),mo.copy(Ne.data,ce,{x:Ke-1,y:0},{x:qe-1,y:Ze},{width:1,height:ut}),mo.copy(Ne.data,ce,{x:0,y:0},{x:qe+Ke,y:Ze},{width:1,height:ut})}this.image=ce,this.iconPositions=x,this.patternPositions=P}addImages(o,d,x){for(const P in o){const j=o[P],H={x:0,y:0,w:j.data.width+2,h:j.data.height+2};x.push(H),d[P]=new Ux(H,j),j.hasRenderCallback&&this.haveRenderCallbacks.push(P)}}patchUpdatedImages(o,d){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in o.updatedImages)this.patchUpdatedImage(this.iconPositions[x],o.getImage(x),d),this.patchUpdatedImage(this.patternPositions[x],o.getImage(x),d)}patchUpdatedImage(o,d,x){if(!o||!d||o.version===d.version)return;o.version=d.version;const[P,j]=o.tl;x.update(d.data,void 0,{x:P,y:j})}}hi("ImagePosition",Ux),hi("ImageAtlas",DC),s.WritingMode=void 0,(Hc=s.WritingMode||(s.WritingMode={}))[Hc.none=0]="none",Hc[Hc.horizontal=1]="horizontal",Hc[Hc.vertical=2]="vertical",Hc[Hc.horizontalOnly=3]="horizontalOnly";const hy=-17;class If{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const x=new If;return x.scale=o||1,x.fontStack=d,x}static forImage(o){const d=new If;return d.imageName=o,d}}class Nh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const x=new Nh;for(let P=0;P<o.sections.length;P++){const j=o.sections[P];j.image?x.addImageSection(j):x.addTextSection(j,d)}return x}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let d="";for(let x=0;x<o.length;x++){const P=o.charCodeAt(x+1)||null,j=o.charCodeAt(x-1)||null;d+=P&&Xg(P)&&!Af[o[x+1]]||j&&Xg(j)&&!Af[o[x-1]]||!Af[o[x]]?o[x]:Af[o[x]]}return d}(this.text)}trim(){let o=0;for(let x=0;x<this.text.length&&fy[this.text.charCodeAt(x)];x++)o++;let d=this.text.length;for(let x=this.text.length-1;x>=0&&x>=o&&fy[this.text.charCodeAt(x)];x--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const x=new Nh;return x.text=this.text.substring(o,d),x.sectionIndex=this.sectionIndex.slice(o,d),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,d)=>Math.max(o,this.sections[d].scale),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(If.forText(o.scale,o.fontStack||d));const x=this.sections.length-1;for(let P=0;P<o.text.length;++P)this.sectionIndex.push(x)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void M("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(If.forImage(d)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function py(u,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut){const lt=Nh.fromFeature(u,P);let _t;$e===s.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:Dt,processStyledBidirectionalText:xt}=Za;if(Dt&&lt.sections.length===1){_t=[];const Ft=Dt(lt.toString(),Vx(lt,xe,j,o,x,Ze,Ke));for(const yi of Ft){const _i=new Nh;_i.text=yi,_i.sections=lt.sections;for(let ni=0;ni<yi.length;ni++)_i.sectionIndex.push(0);_t.push(_i)}}else if(xt){_t=[];const Ft=xt(lt.text,lt.sectionIndex,Vx(lt,xe,j,o,x,Ze,Ke));for(const yi of Ft){const _i=new Nh;_i.text=yi[0],_i.sectionIndex=yi[1],_i.sections=lt.sections,_t.push(_i)}}else _t=function(Ft,yi){const _i=[],ni=Ft.text;let Qt=0;for(const Yt of yi)_i.push(Ft.substring(Qt,Yt)),Qt=Yt;return Qt<ni.length&&_i.push(Ft.substring(Qt,ni.length)),_i}(lt,Vx(lt,xe,j,o,x,Ze,Ke));const Pt=[],Ut={positionedLines:Pt,text:lt.toString(),top:Ne[1],bottom:Ne[1],left:Ne[0],right:Ne[0],writingMode:$e,iconsInText:!1,verticalizable:!1};return function(Ft,yi,_i,ni,Qt,Yt,si,ei,Ht,Ii,Si,ur){let fn=0,xn=hy,ss=0,yo=0;const zs=ei==="right"?1:ei==="left"?0:.5;let Kn=0;for(const Qn of Qt){Qn.trim();const Os=Qn.getMaxScale(),Xs=(Os-1)*ks,va={positionedGlyphs:[],lineOffset:0};Ft.positionedLines[Kn]=va;const Ra=va.positionedGlyphs;let La=0;if(!Qn.length()){xn+=Yt,++Kn;continue}for(let gs=0;gs<Qn.length();gs++){const mr=Qn.getSection(gs),Ka=Qn.getSectionIndex(gs),Fs=Qn.getCharCode(gs);let Ks=0,Ro=null,Wo=null,Yo=null,sc=ks;const Lo=!(Ht===s.WritingMode.horizontal||!Si&&!Xu(Fs)||Si&&(fy[Fs]||(ms=Fs,ri.Arabic(ms)||ri["Arabic Supplement"](ms)||ri["Arabic Extended-A"](ms)||ri["Arabic Presentation Forms-A"](ms)||ri["Arabic Presentation Forms-B"](ms))));if(mr.imageName){const vo=ni[mr.imageName];if(!vo)continue;Yo=mr.imageName,Ft.iconsInText=Ft.iconsInText||!0,Wo=vo.paddedRect;const Na=vo.displaySize;mr.scale=mr.scale*ks/ur,Ro={width:Na[0],height:Na[1],left:1,top:-3,advance:Lo?Na[1]:Na[0]},Ks=Xs+(ks-Na[1]*mr.scale),sc=Ro.advance;const ac=Lo?Na[0]*mr.scale-ks*Os:Na[1]*mr.scale-ks*Os;ac>0&&ac>La&&(La=ac)}else{const vo=_i[mr.fontStack],Na=vo&&vo[Fs];if(Na&&Na.rect)Wo=Na.rect,Ro=Na.metrics;else{const ac=yi[mr.fontStack],Rf=ac&&ac[Fs];if(!Rf)continue;Ro=Rf.metrics}Ks=(Os-mr.scale)*ks}Lo?(Ft.verticalizable=!0,Ra.push({glyph:Fs,imageName:Yo,x:fn,y:xn+Ks,vertical:Lo,scale:mr.scale,fontStack:mr.fontStack,sectionIndex:Ka,metrics:Ro,rect:Wo}),fn+=sc*mr.scale+Ii):(Ra.push({glyph:Fs,imageName:Yo,x:fn,y:xn+Ks,vertical:Lo,scale:mr.scale,fontStack:mr.fontStack,sectionIndex:Ka,metrics:Ro,rect:Wo}),fn+=Ro.advance*mr.scale+Ii)}Ra.length!==0&&(ss=Math.max(fn-Ii,ss),C5(Ra,0,Ra.length-1,zs,La)),fn=0;const En=Yt*Os+La;va.lineOffset=Math.max(La,Xs),xn+=En,yo=Math.max(En,yo),++Kn}var ms;const js=xn-hy,{horizontalAlign:Zs,verticalAlign:Da}=Hx(si);(function(Qn,Os,Xs,va,Ra,La,En,gs,mr){const Ka=(Os-Xs)*Ra;let Fs=0;Fs=La!==En?-gs*va-hy:(-va*mr+.5)*En;for(const Ks of Qn)for(const Ro of Ks.positionedGlyphs)Ro.x+=Ka,Ro.y+=Fs})(Ft.positionedLines,zs,Zs,Da,ss,yo,Yt,js,Qt.length),Ft.top+=-Da*js,Ft.bottom=Ft.top+js,Ft.left+=-Zs*ss,Ft.right=Ft.left+ss}(Ut,o,d,x,_t,H,ne,ce,$e,xe,qe,ut),!function(Ft){for(const yi of Ft)if(yi.positionedGlyphs.length!==0)return!1;return!0}(Pt)&&Ut}const fy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},w5={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function RC(u,o,d,x,P,j){if(o.imageName){const H=x[o.imageName];return H?H.displaySize[0]*o.scale*ks/j+P:0}{const H=d[o.fontStack],ne=H&&H[u];return ne?ne.metrics.advance*o.scale+P:0}}function LC(u,o,d,x){const P=Math.pow(u-o,2);return x?u<o?P/2:2*P:P+Math.abs(d)*d}function _5(u,o,d){let x=0;return u===10&&(x-=1e4),d&&(x+=150),u!==40&&u!==65288||(x+=50),o!==41&&o!==65289||(x+=50),x}function NC(u,o,d,x,P,j){let H=null,ne=LC(o,d,P,j);for(const ce of x){const xe=LC(o-ce.x,d,P,j)+ce.badness;xe<=ne&&(H=ce,ne=xe)}return{index:u,x:o,priorBreak:H,badness:ne}}function zC(u){return u?zC(u.priorBreak).concat(u.index):[]}function Vx(u,o,d,x,P,j,H){if(j!=="point")return[];if(!u)return[];const ne=[],ce=function(qe,Ze,Ke,ut,lt,_t){let Dt=0;for(let xt=0;xt<qe.length();xt++){const Pt=qe.getSection(xt);Dt+=RC(qe.getCharCode(xt),Pt,ut,lt,Ze,_t)}return Dt/Math.max(1,Math.ceil(Dt/Ke))}(u,o,d,x,P,H),xe=u.text.indexOf("")>=0;let Ne=0;for(let qe=0;qe<u.length();qe++){const Ze=u.getSection(qe),Ke=u.getCharCode(qe);if(fy[Ke]||(Ne+=RC(Ke,Ze,x,P,o,H)),qe<u.length()-1){const ut=!(($e=Ke)<11904||!(ri["Bopomofo Extended"]($e)||ri.Bopomofo($e)||ri["CJK Compatibility Forms"]($e)||ri["CJK Compatibility Ideographs"]($e)||ri["CJK Compatibility"]($e)||ri["CJK Radicals Supplement"]($e)||ri["CJK Strokes"]($e)||ri["CJK Symbols and Punctuation"]($e)||ri["CJK Unified Ideographs Extension A"]($e)||ri["CJK Unified Ideographs"]($e)||ri["Enclosed CJK Letters and Months"]($e)||ri["Halfwidth and Fullwidth Forms"]($e)||ri.Hiragana($e)||ri["Ideographic Description Characters"]($e)||ri["Kangxi Radicals"]($e)||ri["Katakana Phonetic Extensions"]($e)||ri.Katakana($e)||ri["Vertical Forms"]($e)||ri["Yi Radicals"]($e)||ri["Yi Syllables"]($e)));(w5[Ke]||ut||Ze.imageName)&&ne.push(NC(qe+1,Ne,ce,ne,_5(Ke,u.getCharCode(qe+1),ut&&xe),!1))}}var $e;return zC(NC(u.length(),Ne,ce,ne,0,!0))}function Hx(u){let o=.5,d=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function C5(u,o,d,x,P){if(!x&&!P)return;const j=u[d],H=(u[d].x+j.metrics.advance*j.scale)*x;for(let ne=o;ne<=d;ne++)u[ne].x-=H,u[ne].y+=P}function T5(u,o,d){const{horizontalAlign:x,verticalAlign:P}=Hx(d),j=o[0]-u.displaySize[0]*x,H=o[1]-u.displaySize[1]*P;return{image:u,top:H,bottom:H+u.displaySize[1],left:j,right:j+u.displaySize[0]}}function jC(u,o,d,x,P,j){const H=u.image;let ne;if(H.content){const lt=H.content,_t=H.pixelRatio||1;ne=[lt[0]/_t,lt[1]/_t,H.displaySize[0]-lt[2]/_t,H.displaySize[1]-lt[3]/_t]}const ce=o.left*j,xe=o.right*j;let Ne,$e,qe,Ze;d==="width"||d==="both"?(Ze=P[0]+ce-x[3],$e=P[0]+xe+x[1]):(Ze=P[0]+(ce+xe-H.displaySize[0])/2,$e=Ze+H.displaySize[0]);const Ke=o.top*j,ut=o.bottom*j;return d==="height"||d==="both"?(Ne=P[1]+Ke-x[0],qe=P[1]+ut+x[2]):(Ne=P[1]+(Ke+ut-H.displaySize[1])/2,qe=Ne+H.displaySize[1]),{image:H,top:Ne,right:$e,bottom:qe,left:Ze,collisionPadding:ne}}const nc=128;function OC(u,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new yn(u+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:P}=d;let j=0;for(;j<x.length&&x[j]<=u;)j++;j=Math.max(0,j-1);let H=j;for(;H<x.length&&x[H]<u+1;)H++;H=Math.min(x.length-1,H);const ne=x[j],ce=x[H];return d.kind==="composite"?{kind:"composite",minZoom:ne,maxZoom:ce,interpolationType:P}:{kind:"camera",minZoom:ne,maxZoom:ce,minSize:d.evaluate(new yn(ne)),maxSize:d.evaluate(new yn(ce)),interpolationType:P}}}class Gc extends G{constructor(o,d,x,P){super(o,d),this.angle=x,P!==void 0&&(this.segment=P)}clone(){return new Gc(this.x,this.y,this.angle,this.segment)}}function FC(u,o,d,x,P){if(o.segment===void 0)return!0;let j=o,H=o.segment+1,ne=0;for(;ne>-d/2;){if(H--,H<0)return!1;ne-=u[H].dist(j),j=u[H]}ne+=u[H].dist(u[H+1]),H++;const ce=[];let xe=0;for(;ne<d/2;){const Ne=u[H],$e=u[H+1];if(!$e)return!1;let qe=u[H-1].angleTo(Ne)-Ne.angleTo($e);for(qe=Math.abs((qe+3*Math.PI)%(2*Math.PI)-Math.PI),ce.push({distance:ne,angleDelta:qe}),xe+=qe;ne-ce[0].distance>x;)xe-=ce.shift().angleDelta;if(xe>P)return!1;H++,ne+=Ne.dist($e)}return!0}function BC(u){let o=0;for(let d=0;d<u.length-1;d++)o+=u[d].dist(u[d+1]);return o}function $C(u,o,d){return u?.6*o*d:0}function UC(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function S5(u,o,d,x,P,j){const H=$C(d,P,j),ne=UC(d,x)*j;let ce=0;const xe=BC(u)/2;for(let Ne=0;Ne<u.length-1;Ne++){const $e=u[Ne],qe=u[Ne+1],Ze=$e.dist(qe);if(ce+Ze>xe){const Ke=(xe-ce)/Ze,ut=Tn($e.x,qe.x,Ke),lt=Tn($e.y,qe.y,Ke),_t=new Gc(ut,lt,qe.angleTo($e),Ne);return _t._round(),!H||FC(u,_t,ne,H,o)?_t:void 0}ce+=Ze}}function E5(u,o,d,x,P,j,H,ne,ce){const xe=$C(x,j,H),Ne=UC(x,P),$e=Ne*H,qe=u[0].x===0||u[0].x===ce||u[0].y===0||u[0].y===ce;return o-$e<o/4&&(o=$e+o/4),VC(u,qe?o/2*ne%o:(Ne/2+2*j)*H*ne%o,o,xe,d,$e,qe,!1,ce)}function VC(u,o,d,x,P,j,H,ne,ce){const xe=j/2,Ne=BC(u);let $e=0,qe=o-d,Ze=[];for(let Ke=0;Ke<u.length-1;Ke++){const ut=u[Ke],lt=u[Ke+1],_t=ut.dist(lt),Dt=lt.angleTo(ut);for(;qe+d<$e+_t;){qe+=d;const xt=(qe-$e)/_t,Pt=Tn(ut.x,lt.x,xt),Ut=Tn(ut.y,lt.y,xt);if(Pt>=0&&Pt<ce&&Ut>=0&&Ut<ce&&qe-xe>=0&&qe+xe<=Ne){const Ft=new Gc(Pt,Ut,Dt,Ke);Ft._round(),x&&!FC(u,Ft,j,x,P)||Ze.push(Ft)}}$e+=_t}return ne||Ze.length||H||(Ze=VC(u,$e/2,d,x,P,j,H,!0,ce)),Ze}function HC(u,o,d,x,P){const j=[];for(let H=0;H<u.length;H++){const ne=u[H];let ce;for(let xe=0;xe<ne.length-1;xe++){let Ne=ne[xe],$e=ne[xe+1];Ne.x<o&&$e.x<o||(Ne.x<o?Ne=new G(o,Ne.y+(o-Ne.x)/($e.x-Ne.x)*($e.y-Ne.y))._round():$e.x<o&&($e=new G(o,Ne.y+(o-Ne.x)/($e.x-Ne.x)*($e.y-Ne.y))._round()),Ne.y<d&&$e.y<d||(Ne.y<d?Ne=new G(Ne.x+(d-Ne.y)/($e.y-Ne.y)*($e.x-Ne.x),d)._round():$e.y<d&&($e=new G(Ne.x+(d-Ne.y)/($e.y-Ne.y)*($e.x-Ne.x),d)._round()),Ne.x>=x&&$e.x>=x||(Ne.x>=x?Ne=new G(x,Ne.y+(x-Ne.x)/($e.x-Ne.x)*($e.y-Ne.y))._round():$e.x>=x&&($e=new G(x,Ne.y+(x-Ne.x)/($e.x-Ne.x)*($e.y-Ne.y))._round()),Ne.y>=P&&$e.y>=P||(Ne.y>=P?Ne=new G(Ne.x+(P-Ne.y)/($e.y-Ne.y)*($e.x-Ne.x),P)._round():$e.y>=P&&($e=new G(Ne.x+(P-Ne.y)/($e.y-Ne.y)*($e.x-Ne.x),P)._round()),ce&&Ne.equals(ce[ce.length-1])||(ce=[Ne],j.push(ce)),ce.push($e)))))}}return j}function GC(u,o,d,x){const P=[],j=u.image,H=j.pixelRatio,ne=j.paddedRect.w-2,ce=j.paddedRect.h-2,xe=u.right-u.left,Ne=u.bottom-u.top,$e=j.stretchX||[[0,ne]],qe=j.stretchY||[[0,ce]],Ze=(Yt,si)=>Yt+si[1]-si[0],Ke=$e.reduce(Ze,0),ut=qe.reduce(Ze,0),lt=ne-Ke,_t=ce-ut;let Dt=0,xt=Ke,Pt=0,Ut=ut,Ft=0,yi=lt,_i=0,ni=_t;if(j.content&&x){const Yt=j.content;Dt=my($e,0,Yt[0]),Pt=my(qe,0,Yt[1]),xt=my($e,Yt[0],Yt[2]),Ut=my(qe,Yt[1],Yt[3]),Ft=Yt[0]-Dt,_i=Yt[1]-Pt,yi=Yt[2]-Yt[0]-xt,ni=Yt[3]-Yt[1]-Ut}const Qt=(Yt,si,ei,Ht)=>{const Ii=gy(Yt.stretch-Dt,xt,xe,u.left),Si=yy(Yt.fixed-Ft,yi,Yt.stretch,Ke),ur=gy(si.stretch-Pt,Ut,Ne,u.top),fn=yy(si.fixed-_i,ni,si.stretch,ut),xn=gy(ei.stretch-Dt,xt,xe,u.left),ss=yy(ei.fixed-Ft,yi,ei.stretch,Ke),yo=gy(Ht.stretch-Pt,Ut,Ne,u.top),zs=yy(Ht.fixed-_i,ni,Ht.stretch,ut),Kn=new G(Ii,ur),ms=new G(xn,ur),js=new G(xn,yo),Zs=new G(Ii,yo),Da=new G(Si/H,fn/H),Qn=new G(ss/H,zs/H),Os=o*Math.PI/180;if(Os){const Ra=Math.sin(Os),La=Math.cos(Os),En=[La,-Ra,Ra,La];Kn._matMult(En),ms._matMult(En),Zs._matMult(En),js._matMult(En)}const Xs=Yt.stretch+Yt.fixed,va=si.stretch+si.fixed;return{tl:Kn,tr:ms,bl:Zs,br:js,tex:{x:j.paddedRect.x+1+Xs,y:j.paddedRect.y+1+va,w:ei.stretch+ei.fixed-Xs,h:Ht.stretch+Ht.fixed-va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Da,pixelOffsetBR:Qn,minFontScaleX:yi/H/xe,minFontScaleY:ni/H/Ne,isSDF:d}};if(x&&(j.stretchX||j.stretchY)){const Yt=qC($e,lt,Ke),si=qC(qe,_t,ut);for(let ei=0;ei<Yt.length-1;ei++){const Ht=Yt[ei],Ii=Yt[ei+1];for(let Si=0;Si<si.length-1;Si++)P.push(Qt(Ht,si[Si],Ii,si[Si+1]))}}else P.push(Qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ne+1},{fixed:0,stretch:ce+1}));return P}function my(u,o,d){let x=0;for(const P of u)x+=Math.max(o,Math.min(d,P[1]))-Math.max(o,Math.min(d,P[0]));return x}function qC(u,o,d){const x=[{fixed:-1,stretch:0}];for(const[P,j]of u){const H=x[x.length-1];x.push({fixed:P-H.stretch,stretch:H.stretch}),x.push({fixed:P-H.stretch,stretch:H.stretch+(j-P)})}return x.push({fixed:o+1,stretch:d}),x}function gy(u,o,d,x){return u/o*d+x}function yy(u,o,d,x){return u-o*d/x}hi("Anchor",Gc);class vy{constructor(o,d,x,P,j,H,ne,ce,xe,Ne){if(this.boxStartIndex=o.length,xe){let $e=H.top,qe=H.bottom;const Ze=H.collisionPadding;Ze&&($e-=Ze[1],qe+=Ze[3]);let Ke=qe-$e;Ke>0&&(Ke=Math.max(10,Ke),this.circleDiameter=Ke)}else{let $e=H.top*ne-ce[0],qe=H.bottom*ne+ce[2],Ze=H.left*ne-ce[3],Ke=H.right*ne+ce[1];const ut=H.collisionPadding;if(ut&&(Ze-=ut[0]*ne,$e-=ut[1]*ne,Ke+=ut[2]*ne,qe+=ut[3]*ne),Ne){const lt=new G(Ze,$e),_t=new G(Ke,$e),Dt=new G(Ze,qe),xt=new G(Ke,qe),Pt=Ne*Math.PI/180;lt._rotate(Pt),_t._rotate(Pt),Dt._rotate(Pt),xt._rotate(Pt),Ze=Math.min(lt.x,_t.x,Dt.x,xt.x),Ke=Math.max(lt.x,_t.x,Dt.x,xt.x),$e=Math.min(lt.y,_t.y,Dt.y,xt.y),qe=Math.max(lt.y,_t.y,Dt.y,xt.y)}o.emplaceBack(d.x,d.y,Ze,$e,Ke,qe,x,P,j)}this.boxEndIndex=o.length}}class k5{constructor(o=[],d=M5){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:x}=this,P=d[o];for(;o>0;){const j=o-1>>1,H=d[j];if(x(P,H)>=0)break;d[o]=H,o=j}d[o]=P}_down(o){const{data:d,compare:x}=this,P=this.length>>1,j=d[o];for(;o<P;){let H=1+(o<<1),ne=d[H];const ce=H+1;if(ce<this.length&&x(d[ce],ne)<0&&(H=ce,ne=d[ce]),x(ne,j)>=0)break;d[o]=ne,o=H}d[o]=j}}function M5(u,o){return u<o?-1:u>o?1:0}function A5(u,o=1,d=!1){let x=1/0,P=1/0,j=-1/0,H=-1/0;const ne=u[0];for(let Ze=0;Ze<ne.length;Ze++){const Ke=ne[Ze];(!Ze||Ke.x<x)&&(x=Ke.x),(!Ze||Ke.y<P)&&(P=Ke.y),(!Ze||Ke.x>j)&&(j=Ke.x),(!Ze||Ke.y>H)&&(H=Ke.y)}const ce=Math.min(j-x,H-P);let xe=ce/2;const Ne=new k5([],I5);if(ce===0)return new G(x,P);for(let Ze=x;Ze<j;Ze+=ce)for(let Ke=P;Ke<H;Ke+=ce)Ne.push(new zh(Ze+xe,Ke+xe,xe,u));let $e=function(Ze){let Ke=0,ut=0,lt=0;const _t=Ze[0];for(let Dt=0,xt=_t.length,Pt=xt-1;Dt<xt;Pt=Dt++){const Ut=_t[Dt],Ft=_t[Pt],yi=Ut.x*Ft.y-Ft.x*Ut.y;ut+=(Ut.x+Ft.x)*yi,lt+=(Ut.y+Ft.y)*yi,Ke+=3*yi}return new zh(ut/Ke,lt/Ke,0,Ze)}(u),qe=Ne.length;for(;Ne.length;){const Ze=Ne.pop();(Ze.d>$e.d||!$e.d)&&($e=Ze,d&&console.log("found best %d after %d probes",Math.round(1e4*Ze.d)/1e4,qe)),Ze.max-$e.d<=o||(xe=Ze.h/2,Ne.push(new zh(Ze.p.x-xe,Ze.p.y-xe,xe,u)),Ne.push(new zh(Ze.p.x+xe,Ze.p.y-xe,xe,u)),Ne.push(new zh(Ze.p.x-xe,Ze.p.y+xe,xe,u)),Ne.push(new zh(Ze.p.x+xe,Ze.p.y+xe,xe,u)),qe+=4)}return d&&(console.log(`num probes: ${qe}`),console.log(`best distance: ${$e.d}`)),$e.p}function I5(u,o){return o.max-u.max}function zh(u,o,d,x){this.p=new G(u,o),this.h=d,this.d=function(P,j){let H=!1,ne=1/0;for(let ce=0;ce<j.length;ce++){const xe=j[ce];for(let Ne=0,$e=xe.length,qe=$e-1;Ne<$e;qe=Ne++){const Ze=xe[Ne],Ke=xe[qe];Ze.y>P.y!=Ke.y>P.y&&P.x<(Ke.x-Ze.x)*(P.y-Ze.y)/(Ke.y-Ze.y)+Ze.x&&(H=!H),ne=Math.min(ne,eC(P,Ze,Ke))}}return(H?1:-1)*Math.sqrt(ne)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}const Gx=Number.POSITIVE_INFINITY;function WC(u,o){return o[1]!==Gx?function(d,x,P){let j=0,H=0;switch(x=Math.abs(x),P=Math.abs(P),d){case"top-right":case"top-left":case"top":H=P-7;break;case"bottom-right":case"bottom-left":case"bottom":H=7-P}switch(d){case"top-right":case"bottom-right":case"right":j=-x;break;case"top-left":case"bottom-left":case"left":j=x}return[j,H]}(u,o[0],o[1]):function(d,x){let P=0,j=0;x<0&&(x=0);const H=x/Math.sqrt(2);switch(d){case"top-right":case"top-left":j=H-7;break;case"bottom-right":case"bottom-left":j=7-H;break;case"bottom":j=7-x;break;case"top":j=x-7}switch(d){case"top-right":case"bottom-right":P=-H;break;case"top-left":case"bottom-left":P=H;break;case"left":P=x;break;case"right":P=-x}return[P,j]}(u,o[0])}function qx(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function P5(u,o,d,x,P,j,H,ne,ce,xe,Ne){let $e=j.textMaxSize.evaluate(o,{});$e===void 0&&($e=H);const qe=u.layers[0].layout,Ze=qe.get("icon-offset").evaluate(o,{},Ne),Ke=ZC(d.horizontal),ut=H/24,lt=u.tilePixelRatio*ut,_t=u.tilePixelRatio*$e/24,Dt=u.tilePixelRatio*ne,xt=u.tilePixelRatio*qe.get("symbol-spacing"),Pt=qe.get("text-padding")*u.tilePixelRatio,Ut=function(Ht,Ii,Si,ur=1){const fn=Ht.get("icon-padding").evaluate(Ii,{},Si),xn=fn&&fn.values;return[xn[0]*ur,xn[1]*ur,xn[2]*ur,xn[3]*ur]}(qe,o,Ne,u.tilePixelRatio),Ft=qe.get("text-max-angle")/180*Math.PI,yi=qe.get("text-rotation-alignment")!=="viewport"&&qe.get("symbol-placement")!=="point",_i=qe.get("icon-rotation-alignment")==="map"&&qe.get("symbol-placement")!=="point",ni=qe.get("symbol-placement"),Qt=xt/2,Yt=qe.get("icon-text-fit");let si;x&&Yt!=="none"&&(u.allowVerticalPlacement&&d.vertical&&(si=jC(x,d.vertical,Yt,qe.get("icon-text-fit-padding"),Ze,ut)),Ke&&(x=jC(x,Ke,Yt,qe.get("icon-text-fit-padding"),Ze,ut)));const ei=(Ht,Ii)=>{Ii.x<0||Ii.x>=ns||Ii.y<0||Ii.y>=ns||function(Si,ur,fn,xn,ss,yo,zs,Kn,ms,js,Zs,Da,Qn,Os,Xs,va,Ra,La,En,gs,mr,Ka,Fs,Ks,Ro){const Wo=Si.addToLineVertexArray(ur,fn);let Yo,sc,Lo,vo,Na=0,ac=0,Rf=0,dT=0,ib=-1,rb=-1;const oc={};let hT=Xn.exports(""),nb=0,sb=0;if(Kn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[nb,sb]=Kn.layout.get("text-offset").evaluate(mr,{},Ks).map(za=>za*ks):(nb=Kn.layout.get("text-radial-offset").evaluate(mr,{},Ks)*ks,sb=Gx),Si.allowVerticalPlacement&&xn.vertical){const za=Kn.layout.get("text-rotate").evaluate(mr,{},Ks)+90;Lo=new vy(ms,ur,js,Zs,Da,xn.vertical,Qn,Os,Xs,za),zs&&(vo=new vy(ms,ur,js,Zs,Da,zs,Ra,La,Xs,za))}if(ss){const za=Kn.layout.get("icon-rotate").evaluate(mr,{}),fl=Kn.layout.get("icon-text-fit")!=="none",Lf=GC(ss,za,Fs,fl),Nf=zs?GC(zs,za,Fs,fl):void 0;sc=new vy(ms,ur,js,Zs,Da,ss,Ra,La,!1,za),Na=4*Lf.length;const mT=Si.iconSizeData;let od=null;mT.kind==="source"?(od=[nc*Kn.layout.get("icon-size").evaluate(mr,{})],od[0]>qc&&M(`${Si.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):mT.kind==="composite"&&(od=[nc*Ka.compositeIconSizes[0].evaluate(mr,{},Ks),nc*Ka.compositeIconSizes[1].evaluate(mr,{},Ks)],(od[0]>qc||od[1]>qc)&&M(`${Si.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Si.addSymbols(Si.icon,Lf,od,gs,En,mr,s.WritingMode.none,ur,Wo.lineStartIndex,Wo.lineLength,-1,Ks),ib=Si.icon.placedSymbolArray.length-1,Nf&&(ac=4*Nf.length,Si.addSymbols(Si.icon,Nf,od,gs,En,mr,s.WritingMode.vertical,ur,Wo.lineStartIndex,Wo.lineLength,-1,Ks),rb=Si.icon.placedSymbolArray.length-1)}const pT=Object.keys(xn.horizontal);for(const za of pT){const fl=xn.horizontal[za];if(!Yo){hT=Xn.exports(fl.text);const Nf=Kn.layout.get("text-rotate").evaluate(mr,{},Ks);Yo=new vy(ms,ur,js,Zs,Da,fl,Qn,Os,Xs,Nf)}const Lf=fl.positionedLines.length===1;if(Rf+=YC(Si,ur,fl,yo,Kn,Xs,mr,va,Wo,xn.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Lf?pT:[za],oc,ib,Ka,Ks),Lf)break}xn.vertical&&(dT+=YC(Si,ur,xn.vertical,yo,Kn,Xs,mr,va,Wo,s.WritingMode.vertical,["vertical"],oc,rb,Ka,Ks));const H5=Yo?Yo.boxStartIndex:Si.collisionBoxArray.length,G5=Yo?Yo.boxEndIndex:Si.collisionBoxArray.length,q5=Lo?Lo.boxStartIndex:Si.collisionBoxArray.length,W5=Lo?Lo.boxEndIndex:Si.collisionBoxArray.length,Y5=sc?sc.boxStartIndex:Si.collisionBoxArray.length,Z5=sc?sc.boxEndIndex:Si.collisionBoxArray.length,X5=vo?vo.boxStartIndex:Si.collisionBoxArray.length,K5=vo?vo.boxEndIndex:Si.collisionBoxArray.length;let Zo=-1;const Cy=(za,fl)=>za&&za.circleDiameter?Math.max(za.circleDiameter,fl):fl;Zo=Cy(Yo,Zo),Zo=Cy(Lo,Zo),Zo=Cy(sc,Zo),Zo=Cy(vo,Zo);const fT=Zo>-1?1:0;fT&&(Zo*=Ro/ks),Si.glyphOffsetArray.length>=jh.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mr.sortKey!==void 0&&Si.addToSortKeyRanges(Si.symbolInstances.length,mr.sortKey),Si.symbolInstances.emplaceBack(ur.x,ur.y,oc.right>=0?oc.right:-1,oc.center>=0?oc.center:-1,oc.left>=0?oc.left:-1,oc.vertical||-1,ib,rb,hT,H5,G5,q5,W5,Y5,Z5,X5,K5,js,Rf,dT,Na,ac,fT,0,Qn,nb,sb,Zo)}(u,Ii,Ht,d,x,P,si,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,lt,[Pt,Pt,Pt,Pt],yi,ce,Dt,Ut,_i,Ze,o,j,xe,Ne,H)};if(ni==="line")for(const Ht of HC(o.geometry,0,0,ns,ns)){const Ii=E5(Ht,xt,Ft,d.vertical||Ke,x,24,_t,u.overscaling,ns);for(const Si of Ii){const ur=Ke;ur&&D5(u,ur.text,Qt,Si)||ei(Ht,Si)}}else if(ni==="line-center"){for(const Ht of o.geometry)if(Ht.length>1){const Ii=S5(Ht,Ft,d.vertical||Ke,x,24,_t);Ii&&ei(Ht,Ii)}}else if(o.type==="Polygon")for(const Ht of Rx(o.geometry,0)){const Ii=A5(Ht,16);ei(Ht[0],new Gc(Ii.x,Ii.y,0))}else if(o.type==="LineString")for(const Ht of o.geometry)ei(Ht,new Gc(Ht[0].x,Ht[0].y,0));else if(o.type==="Point")for(const Ht of o.geometry)for(const Ii of Ht)ei([Ii],new Gc(Ii.x,Ii.y,0))}const qc=32640;function YC(u,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke){const ut=function(Dt,xt,Pt,Ut,Ft,yi,_i,ni){const Qt=Ut.layout.get("text-rotate").evaluate(yi,{})*Math.PI/180,Yt=[];for(const si of xt.positionedLines)for(const ei of si.positionedGlyphs){if(!ei.rect)continue;const Ht=ei.rect||{};let Ii=4,Si=!0,ur=1,fn=0;const xn=(Ft||ni)&&ei.vertical,ss=ei.metrics.advance*ei.scale/2;if(ni&&xt.verticalizable){const En=(ei.scale-1)*ks,gs=(ks-ei.metrics.width*ei.scale)/2;fn=si.lineOffset/2-(ei.imageName?-gs:En)}if(ei.imageName){const En=_i[ei.imageName];Si=En.sdf,ur=En.pixelRatio,Ii=1/ur}const yo=Ft?[ei.x+ss,ei.y]:[0,0];let zs=Ft?[0,0]:[ei.x+ss+Pt[0],ei.y+Pt[1]-fn],Kn=[0,0];xn&&(Kn=zs,zs=[0,0]);const ms=(ei.metrics.left-Ii)*ei.scale-ss+zs[0],js=(-ei.metrics.top-Ii)*ei.scale+zs[1],Zs=ms+Ht.w*ei.scale/ur,Da=js+Ht.h*ei.scale/ur,Qn=new G(ms,js),Os=new G(Zs,js),Xs=new G(ms,Da),va=new G(Zs,Da);if(xn){const En=new G(-ss,ss-hy),gs=-Math.PI/2,mr=12-ss,Ka=new G(22-mr,-(ei.imageName?mr:0)),Fs=new G(...Kn);Qn._rotateAround(gs,En)._add(Ka)._add(Fs),Os._rotateAround(gs,En)._add(Ka)._add(Fs),Xs._rotateAround(gs,En)._add(Ka)._add(Fs),va._rotateAround(gs,En)._add(Ka)._add(Fs)}if(Qt){const En=Math.sin(Qt),gs=Math.cos(Qt),mr=[gs,-En,En,gs];Qn._matMult(mr),Os._matMult(mr),Xs._matMult(mr),va._matMult(mr)}const Ra=new G(0,0),La=new G(0,0);Yt.push({tl:Qn,tr:Os,bl:Xs,br:va,tex:Ht,writingMode:xt.writingMode,glyphOffset:yo,sectionIndex:ei.sectionIndex,isSDF:Si,pixelOffsetTL:Ra,pixelOffsetBR:La,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,d,ne,P,j,H,x,u.allowVerticalPlacement),lt=u.textSizeData;let _t=null;lt.kind==="source"?(_t=[nc*P.layout.get("text-size").evaluate(H,{})],_t[0]>qc&&M(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(_t=[nc*Ze.compositeTextSizes[0].evaluate(H,{},Ke),nc*Ze.compositeTextSizes[1].evaluate(H,{},Ke)],(_t[0]>qc||_t[1]>qc)&&M(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ut,_t,ne,j,H,xe,o,ce.lineStartIndex,ce.lineLength,qe,Ke);for(const Dt of Ne)$e[Dt]=u.text.placedSymbolArray.length-1;return 4*ut.length}function ZC(u){for(const o in u)return u[o];return null}function D5(u,o,d,x){const P=u.compareText;if(o in P){const j=P[o];for(let H=j.length-1;H>=0;H--)if(x.dist(j[H])<d)return!0}else P[o]=[];return P[o].push(x),!1}const R5=Vc.VectorTileFeature.types,L5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xy(u,o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe){const Ze=ne?Math.min(qc,Math.round(ne[0])):0,Ke=ne?Math.min(qc,Math.round(ne[1])):0;u.emplaceBack(o,d,Math.round(32*x),Math.round(32*P),j,H,(Ze<<1)+(ce?1:0),Ke,16*xe,16*Ne,256*$e,256*qe)}function Wx(u,o,d){u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d)}function N5(u){for(const o of u.sections)if(xx(o.text))return!0;return!1}class Yx{constructor(o){this.layoutVertexArray=new Pa,this.indexArray=new Es,this.programConfigurations=o,this.segments=new Ar,this.dynamicLayoutVertexArray=new Do,this.opacityVertexArray=new uo,this.placedSymbolArray=new Ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,x,P){this.isEmpty()||(x&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,n5.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,s5.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,L5,!0),this.opacityVertexBuffer.itemSize=1),(x||P)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hi("SymbolBuffers",Yx);class Zx{constructor(o,d,x){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new x,this.segments=new Ar,this.collisionVertexArray=new ec}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,a5.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hi("CollisionBuffers",Zx);class jh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(H=>H.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kx([]),this.placementViewportMatrix=kx([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=OC(this.zoom,d["text-size"]),this.iconSizeData=OC(this.zoom,d["icon-size"]);const x=this.layers[0].layout,P=x.get("symbol-sort-key"),j=x.get("symbol-z-order");this.canOverlap=Kx(x,"text-overlap","text-allow-overlap")!=="never"||Kx(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=j!=="viewport-y"&&!P.isConstant(),this.sortFeaturesByY=(j==="viewport-y"||j==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(H=>s.WritingMode[H])),this.stateDependentLayerIds=this.layers.filter(H=>H.isStateDependent()).map(H=>H.id),this.sourceID=o.sourceID}createArrays(){this.text=new Yx(new id(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Yx(new id(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new li,this.lineVertexArray=new Kt,this.symbolInstances=new Lt}calculateGlyphDependencies(o,d,x,P,j){for(let H=0;H<o.length;H++)if(d[o.charCodeAt(H)]=!0,(x||P)&&j){const ne=Af[o.charAt(H)];ne&&(d[ne.charCodeAt(0)]=!0)}}populate(o,d,x){const P=this.layers[0],j=P.layout,H=j.get("text-font"),ne=j.get("text-field"),ce=j.get("icon-image"),xe=(ne.value.kind!=="constant"||ne.value.value instanceof ct&&!ne.value.value.isEmpty()||ne.value.value.toString().length>0)&&(H.value.kind!=="constant"||H.value.value.length>0),Ne=ce.value.kind!=="constant"||!!ce.value.value||Object.keys(ce.parameters).length>0,$e=j.get("symbol-sort-key");if(this.features=[],!xe&&!Ne)return;const qe=d.iconDependencies,Ze=d.glyphDependencies,Ke=d.availableImages,ut=new yn(this.zoom);for(const{feature:lt,id:_t,index:Dt,sourceLayerIndex:xt}of o){const Pt=P._featureFilter.needGeometry,Ut=nd(lt,Pt);if(!P._featureFilter.filter(ut,Ut,x))continue;let Ft,yi;if(Pt||(Ut.geometry=rd(lt)),xe){const ni=P.getValueAndResolveTokens("text-field",Ut,x,Ke),Qt=ct.factory(ni);N5(Qt)&&(this.hasRTLText=!0),(!this.hasRTLText||mf()==="unavailable"||this.hasRTLText&&Za.isParsed())&&(Ft=l5(Qt,P,Ut))}if(Ne){const ni=P.getValueAndResolveTokens("icon-image",Ut,x,Ke);yi=ni instanceof nt?ni:nt.fromString(ni)}if(!Ft&&!yi)continue;const _i=this.sortFeaturesByKey?$e.evaluate(Ut,{},x):void 0;if(this.features.push({id:_t,text:Ft,icon:yi,index:Dt,sourceLayerIndex:xt,geometry:Ut.geometry,properties:lt.properties,type:R5[lt.type],sortKey:_i}),yi&&(qe[yi.name]=!0),Ft){const ni=H.evaluate(Ut,{},x).join(","),Qt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Yt of Ft.sections)if(Yt.image)qe[Yt.image.name]=!0;else{const si=uf(Ft.toString()),ei=Yt.fontStack||ni,Ht=Ze[ei]=Ze[ei]||{};this.calculateGlyphDependencies(Yt.text,Ht,Qt,this.allowVerticalPlacement,si)}}}j.get("symbol-placement")==="line"&&(this.features=function(lt){const _t={},Dt={},xt=[];let Pt=0;function Ut(ni){xt.push(lt[ni]),Pt++}function Ft(ni,Qt,Yt){const si=Dt[ni];return delete Dt[ni],Dt[Qt]=si,xt[si].geometry[0].pop(),xt[si].geometry[0]=xt[si].geometry[0].concat(Yt[0]),si}function yi(ni,Qt,Yt){const si=_t[Qt];return delete _t[Qt],_t[ni]=si,xt[si].geometry[0].shift(),xt[si].geometry[0]=Yt[0].concat(xt[si].geometry[0]),si}function _i(ni,Qt,Yt){const si=Yt?Qt[0][Qt[0].length-1]:Qt[0][0];return`${ni}:${si.x}:${si.y}`}for(let ni=0;ni<lt.length;ni++){const Qt=lt[ni],Yt=Qt.geometry,si=Qt.text?Qt.text.toString():null;if(!si){Ut(ni);continue}const ei=_i(si,Yt),Ht=_i(si,Yt,!0);if(ei in Dt&&Ht in _t&&Dt[ei]!==_t[Ht]){const Ii=yi(ei,Ht,Yt),Si=Ft(ei,Ht,xt[Ii].geometry);delete _t[ei],delete Dt[Ht],Dt[_i(si,xt[Si].geometry,!0)]=Si,xt[Ii].geometry=null}else ei in Dt?Ft(ei,Ht,Yt):Ht in _t?yi(ei,Ht,Yt):(Ut(ni),_t[ei]=Pt-1,Dt[Ht]=Pt-1)}return xt.filter(ni=>ni.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,_t)=>lt.sortKey-_t.sortKey)}update(o,d,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,x),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const x=this.lineVertexArray.length;if(o.segment!==void 0){let P=o.dist(d[o.segment+1]),j=o.dist(d[o.segment]);const H={};for(let ne=o.segment+1;ne<d.length;ne++)H[ne]={x:d[ne].x,y:d[ne].y,tileUnitDistanceFromAnchor:P},ne<d.length-1&&(P+=d[ne+1].dist(d[ne]));for(let ne=o.segment||0;ne>=0;ne--)H[ne]={x:d[ne].x,y:d[ne].y,tileUnitDistanceFromAnchor:j},ne>0&&(j+=d[ne-1].dist(d[ne]));for(let ne=0;ne<d.length;ne++){const ce=H[ne];this.lineVertexArray.emplaceBack(ce.x,ce.y,ce.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(o,d,x,P,j,H,ne,ce,xe,Ne,$e,qe){const Ze=o.indexArray,Ke=o.layoutVertexArray,ut=o.segments.prepareSegment(4*d.length,Ke,Ze,this.canOverlap?H.sortKey:void 0),lt=this.glyphOffsetArray.length,_t=ut.vertexLength,Dt=this.allowVerticalPlacement&&ne===s.WritingMode.vertical?Math.PI/2:0,xt=H.text&&H.text.sections;for(let Pt=0;Pt<d.length;Pt++){const{tl:Ut,tr:Ft,bl:yi,br:_i,tex:ni,pixelOffsetTL:Qt,pixelOffsetBR:Yt,minFontScaleX:si,minFontScaleY:ei,glyphOffset:Ht,isSDF:Ii,sectionIndex:Si}=d[Pt],ur=ut.vertexLength,fn=Ht[1];xy(Ke,ce.x,ce.y,Ut.x,fn+Ut.y,ni.x,ni.y,x,Ii,Qt.x,Qt.y,si,ei),xy(Ke,ce.x,ce.y,Ft.x,fn+Ft.y,ni.x+ni.w,ni.y,x,Ii,Yt.x,Qt.y,si,ei),xy(Ke,ce.x,ce.y,yi.x,fn+yi.y,ni.x,ni.y+ni.h,x,Ii,Qt.x,Yt.y,si,ei),xy(Ke,ce.x,ce.y,_i.x,fn+_i.y,ni.x+ni.w,ni.y+ni.h,x,Ii,Yt.x,Yt.y,si,ei),Wx(o.dynamicLayoutVertexArray,ce,Dt),Ze.emplaceBack(ur,ur+1,ur+2),Ze.emplaceBack(ur+1,ur+2,ur+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ht[0]),Pt!==d.length-1&&Si===d[Pt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Ke.length,H,H.index,{},qe,xt&&xt[Si])}o.placedSymbolArray.emplaceBack(ce.x,ce.y,lt,this.glyphOffsetArray.length-lt,_t,xe,Ne,ce.segment,x?x[0]:0,x?x[1]:0,P[0],P[1],ne,0,!1,0,$e)}_addCollisionDebugVertex(o,d,x,P,j,H){return d.emplaceBack(0,0),o.emplaceBack(x.x,x.y,P,j,Math.round(H.x),Math.round(H.y))}addCollisionDebugVertices(o,d,x,P,j,H,ne){const ce=j.segments.prepareSegment(4,j.layoutVertexArray,j.indexArray),xe=ce.vertexLength,Ne=j.layoutVertexArray,$e=j.collisionVertexArray,qe=ne.anchorX,Ze=ne.anchorY;this._addCollisionDebugVertex(Ne,$e,H,qe,Ze,new G(o,d)),this._addCollisionDebugVertex(Ne,$e,H,qe,Ze,new G(x,d)),this._addCollisionDebugVertex(Ne,$e,H,qe,Ze,new G(x,P)),this._addCollisionDebugVertex(Ne,$e,H,qe,Ze,new G(o,P)),ce.vertexLength+=4;const Ke=j.indexArray;Ke.emplaceBack(xe,xe+1),Ke.emplaceBack(xe+1,xe+2),Ke.emplaceBack(xe+2,xe+3),Ke.emplaceBack(xe+3,xe),ce.primitiveLength+=4}addDebugCollisionBoxes(o,d,x,P){for(let j=o;j<d;j++){const H=this.collisionBoxArray.get(j);this.addCollisionDebugVertices(H.x1,H.y1,H.x2,H.y2,P?this.textCollisionBox:this.iconCollisionBox,H.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zx(ho,TC.members,po),this.iconCollisionBox=new Zx(ho,TC.members,po);for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(o,d,x,P,j,H,ne,ce,xe){const Ne={};for(let $e=d;$e<x;$e++){const qe=o.get($e);Ne.textBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ne.textFeatureIndex=qe.featureIndex;break}for(let $e=P;$e<j;$e++){const qe=o.get($e);Ne.verticalTextBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ne.verticalTextFeatureIndex=qe.featureIndex;break}for(let $e=H;$e<ne;$e++){const qe=o.get($e);Ne.iconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ne.iconFeatureIndex=qe.featureIndex;break}for(let $e=ce;$e<xe;$e++){const qe=o.get($e);Ne.verticalIconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ne.verticalIconFeatureIndex=qe.featureIndex;break}return Ne}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const x=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const x=o.placedSymbolArray.get(d),P=x.vertexStartIndex+4*x.numGlyphs;for(let j=x.vertexStartIndex;j<P;j+=4)o.indexArray.emplaceBack(j,j+1,j+2),o.indexArray.emplaceBack(j+1,j+2,j+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),x=Math.cos(o),P=[],j=[],H=[];for(let ne=0;ne<this.symbolInstances.length;++ne){H.push(ne);const ce=this.symbolInstances.get(ne);P.push(0|Math.round(d*ce.anchorX+x*ce.anchorY)),j.push(ce.featureIndex)}return H.sort((ne,ce)=>P[ne]-P[ce]||j[ce]-j[ne]),H}addToSortKeyRanges(o,d){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===d?x.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const x=this.symbolInstances.get(d);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((P,j,H)=>{P>=0&&H.indexOf(P)===j&&this.addIndicesForPlacedSymbol(this.text,P)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}hi("SymbolBucket",jh,{omit:["layers","collisionBoxArray","features","compareText"]}),jh.MAX_GLYPHS=65535,jh.addDynamicAttributes=Wx;const z5=new rs({"symbol-placement":new Ti(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Ti(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ti(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Li(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ti(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ti(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ti(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ti(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ti(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ti(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Li(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Ti(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ti(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Li(Oe.layout_symbol["icon-image"]),"icon-rotate":new Li(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Li(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Ti(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Li(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Li(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ti(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ti(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ti(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Li(Oe.layout_symbol["text-field"]),"text-font":new Li(Oe.layout_symbol["text-font"]),"text-size":new Li(Oe.layout_symbol["text-size"]),"text-max-width":new Li(Oe.layout_symbol["text-max-width"]),"text-line-height":new Ti(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Li(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Li(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Li(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ti(Oe.layout_symbol["text-variable-anchor"]),"text-anchor":new Li(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Ti(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Ti(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Li(Oe.layout_symbol["text-rotate"]),"text-padding":new Ti(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Ti(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Li(Oe.layout_symbol["text-transform"]),"text-offset":new Li(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Ti(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Ti(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Ti(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Ti(Oe.layout_symbol["text-optional"])});var Xx={paint:new rs({"icon-opacity":new Li(Oe.paint_symbol["icon-opacity"]),"icon-color":new Li(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Li(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Li(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Li(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Ti(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ti(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Li(Oe.paint_symbol["text-opacity"]),"text-color":new Li(Oe.paint_symbol["text-color"],{runtimeType:ii,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Li(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Li(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Li(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Ti(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Ti(Oe.paint_symbol["text-translate-anchor"])}),layout:z5};class XC{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Nt,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hi("FormatSectionOverride",XC,{omit:["defaultValue"]});class by extends fa{constructor(o){super(o,Xx)}recalculate(o,d){if(super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const P=[];for(const j of x)P.indexOf(j)<0&&P.push(j);this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,d,x,P){const j=this.layout.get(o).evaluate(d,{},x,P),H=this._unevaluatedLayout._values[o];return H.isDataDriven()||Bu(H.value)||!j?j:function(ne,ce){return ce.replace(/{([^{}]+)}/g,(xe,Ne)=>Ne in ne?String(ne[Ne]):"")}(d.properties,j)}createBucket(o){return new jh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Xx.paint.overridableProperties){if(!by.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),x=new XC(d),P=new nf(x,d.property.specification);let j=null;j=d.value.kind==="constant"||d.value.kind==="source"?new uh("source",P):new Uu("composite",P,d.value.zoomStops),this.paint._values[o]=new Po(d.property,j,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,x){return!(!this.layout||d.isDataDriven()||x.isDataDriven())&&by.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const x=o.get("text-field"),P=Xx.paint.properties[d];let j=!1;const H=ne=>{for(const ce of ne)if(P.overrides&&P.overrides.hasOverride(ce))return void(j=!0)};if(x.value.kind==="constant"&&x.value.value instanceof ct)H(x.value.value.sections);else if(x.value.kind==="source"){const ne=xe=>{j||(xe instanceof ci&&zt(xe.value)===rr?H(xe.value.sections):xe instanceof ch?H(xe.sections):xe.eachChild(ne))},ce=x.value;ce._styleExpression&&ne(ce._styleExpression.expression)}return j}}function Kx(u,o,d){let x="never";const P=u.get(o);return P?x=P:u.get(d)&&(x="always"),x}var j5={paint:new rs({"background-color":new Ti(Oe.paint_background["background-color"]),"background-pattern":new Qu(Oe.paint_background["background-pattern"]),"background-opacity":new Ti(Oe.paint_background["background-opacity"])})},O5={paint:new rs({"raster-opacity":new Ti(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ti(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ti(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ti(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Ti(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Ti(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Ti(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Ti(Oe.paint_raster["raster-fade-duration"])})};class F5 extends fa{constructor(o){super(o,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const B5={circle:class extends fa{constructor(u){super(u,yD)}createBucket(u){return new Tx(u)}queryRadius(u){const o=u;return bf("circle-radius",this,o)+bf("circle-stroke-width",this,o)+ry(this.paint.get("circle-translate"))}queryIntersectsFeature(u,o,d,x,P,j,H,ne){const ce=ny(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),j.angle,H),xe=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),Ne=this.paint.get("circle-pitch-alignment")==="map",$e=Ne?ce:function(Ze,Ke){return Ze.map(ut=>oC(ut,Ke))}(ce,ne),qe=Ne?xe*H:xe;for(const Ze of x)for(const Ke of Ze){const ut=Ne?Ke:oC(Ke,ne);let lt=qe;const _t=sy([],[Ke.x,Ke.y,0,1],ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=_t[3]/j.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=j.cameraToCenterDistance/_t[3]),hD($e,ut,lt))return!0}return!1}},heatmap:class extends fa{constructor(u){super(u,xD),this._updateColorRamp()}createBucket(u){return new lC(u)}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uC({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends fa{constructor(u){super(u,bD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends fa{constructor(u){super(u,zD)}recalculate(u,o){super.recalculate(u,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new zx(u)}queryRadius(){return ry(this.paint.get("fill-translate"))}queryIntersectsFeature(u,o,d,x,P,j,H){return J2(ny(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),j.angle,H),x)}isTileClipped(){return!0}},"fill-extrusion":class extends fa{constructor(u){super(u,XD)}createBucket(u){return new Ox(u)}queryRadius(){return ry(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,o,d,x,P,j,H,ne){const ce=ny(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),j.angle,H),xe=this.paint.get("fill-extrusion-height").evaluate(o,d),Ne=this.paint.get("fill-extrusion-base").evaluate(o,d),$e=function(Ze,Ke,ut,lt){const _t=[];for(const Dt of Ze){const xt=[Dt.x,Dt.y,0,1];sy(xt,xt,Ke),_t.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return _t}(ce,ne),qe=function(Ze,Ke,ut,lt){const _t=[],Dt=[],xt=lt[8]*Ke,Pt=lt[9]*Ke,Ut=lt[10]*Ke,Ft=lt[11]*Ke,yi=lt[8]*ut,_i=lt[9]*ut,ni=lt[10]*ut,Qt=lt[11]*ut;for(const Yt of Ze){const si=[],ei=[];for(const Ht of Yt){const Ii=Ht.x,Si=Ht.y,ur=lt[0]*Ii+lt[4]*Si+lt[12],fn=lt[1]*Ii+lt[5]*Si+lt[13],xn=lt[2]*Ii+lt[6]*Si+lt[14],ss=lt[3]*Ii+lt[7]*Si+lt[15],yo=xn+Ut,zs=ss+Ft,Kn=ur+yi,ms=fn+_i,js=xn+ni,Zs=ss+Qt,Da=new G((ur+xt)/zs,(fn+Pt)/zs);Da.z=yo/zs,si.push(Da);const Qn=new G(Kn/Zs,ms/Zs);Qn.z=js/Zs,ei.push(Qn)}_t.push(si),Dt.push(ei)}return[_t,Dt]}(x,Ne,xe,ne);return function(Ze,Ke,ut){let lt=1/0;J2(ut,Ke)&&(lt=xC(ut,Ke[0]));for(let _t=0;_t<Ke.length;_t++){const Dt=Ke[_t],xt=Ze[_t];for(let Pt=0;Pt<Dt.length-1;Pt++){const Ut=Dt[Pt],Ft=[Ut,Dt[Pt+1],xt[Pt+1],xt[Pt],Ut];Q2(ut,Ft)&&(lt=Math.min(lt,xC(ut,Ft)))}}return lt!==1/0&&lt}(qe[0],qe[1],$e)}},line:class extends fa{constructor(u){super(u,wC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(u){u==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof zu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,o){super.recalculate(u,o),this.paint._values["line-floorwidth"]=_C.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Fx(u)}queryRadius(u){const o=u,d=CC(bf("line-width",this,o),bf("line-gap-width",this,o)),x=bf("line-offset",this,o);return d/2+Math.abs(x)+ry(this.paint.get("line-translate"))}queryIntersectsFeature(u,o,d,x,P,j,H){const ne=ny(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),j.angle,H),ce=H/2*CC(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),xe=this.paint.get("line-offset").evaluate(o,d);return xe&&(x=function(Ne,$e){const qe=[];for(let Ze=0;Ze<Ne.length;Ze++){const Ke=Ne[Ze],ut=[];for(let lt=0;lt<Ke.length;lt++){const _t=Ke[lt-1],Dt=Ke[lt],xt=Ke[lt+1],Pt=lt===0?new G(0,0):Dt.sub(_t)._unit()._perp(),Ut=lt===Ke.length-1?new G(0,0):xt.sub(Dt)._unit()._perp(),Ft=Pt._add(Ut)._unit(),yi=Ft.x*Ut.x+Ft.y*Ut.y;yi!==0&&Ft._mult(1/yi),ut.push(Ft._mult($e)._add(Dt))}qe.push(ut)}return qe}(x,xe*H)),function(Ne,$e,qe){for(let Ze=0;Ze<$e.length;Ze++){const Ke=$e[Ze];if(Ne.length>=3){for(let ut=0;ut<Ke.length;ut++)if(Ih(Ne,Ke[ut]))return!0}if(pD(Ne,Ke,qe))return!0}return!1}(ne,x,ce)}isTileClipped(){return!0}},symbol:by,background:class extends fa{constructor(u){super(u,j5)}},raster:class extends fa{constructor(u){super(u,O5)}}};class $5{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const KC=63710088e-1;class Ln{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ln(b(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,x=this.lat*d,P=o.lat*d,j=Math.sin(x)*Math.sin(P)+Math.cos(x)*Math.cos(P)*Math.cos((o.lng-this.lng)*d);return KC*Math.acos(Math.min(j,1))}toBounds(o=0){const d=360*o/40075017,x=d/Math.cos(Math.PI/180*this.lat);return new ad(new Ln(this.lng-x,this.lat-d),new Ln(this.lng+x,this.lat+d))}static convert(o){if(o instanceof Ln)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Ln(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Ln(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ad{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Ln?new Ln(o.lng,o.lat):Ln.convert(o),this}setSouthWest(o){return this._sw=o instanceof Ln?new Ln(o.lng,o.lat):Ln.convert(o),this}extend(o){const d=this._sw,x=this._ne;let P,j;if(o instanceof Ln)P=o,j=o;else{if(!(o instanceof ad))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(ad.convert(o)):this.extend(Ln.convert(o)):this;if(P=o._sw,j=o._ne,!P||!j)return this}return d||x?(d.lng=Math.min(P.lng,d.lng),d.lat=Math.min(P.lat,d.lat),x.lng=Math.max(j.lng,x.lng),x.lat=Math.max(j.lat,x.lat)):(this._sw=new Ln(P.lng,P.lat),this._ne=new Ln(j.lng,j.lat)),this}getCenter(){return new Ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ln(this.getWest(),this.getNorth())}getSouthEast(){return new Ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:x}=Ln.convert(o);let P=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&P}static convert(o){return o instanceof ad?o:o&&new ad(o)}}const QC=2*Math.PI*KC;function JC(u){return QC*Math.cos(u*Math.PI/180)}function eT(u){return(180+u)/360}function tT(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function iT(u,o){return u/JC(o)}function Qx(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class wy{constructor(o,d,x=0){this.x=+o,this.y=+d,this.z=+x}static fromLngLat(o,d=0){const x=Ln.convert(o);return new wy(eT(x.lng),tT(x.lat),iT(d,x.lat))}toLngLat(){return new Ln(360*this.x-180,Qx(this.y))}toAltitude(){return this.z*JC(Qx(this.y))}meterInMercatorCoordinateUnits(){return 1/QC*(o=Qx(this.y),1/Math.cos(o*Math.PI/180));var o}}function rT(u,o,d){var x=2*Math.PI*6378137/256/Math.pow(2,d);return[u*x-2*Math.PI*6378137/2,o*x-2*Math.PI*6378137/2]}class Jx{constructor(o,d,x){if(o<0||o>25||x<0||x>=Math.pow(2,o)||d<0||d>=Math.pow(2,o))throw new Error(`x=${d}, y=${x}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=d,this.y=x,this.key=Pf(0,o,o,d,x)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d,x){const P=(H=this.y,ne=this.z,ce=rT(256*(j=this.x),256*(H=Math.pow(2,ne)-H-1),ne),xe=rT(256*(j+1),256*(H+1),ne),ce[0]+","+ce[1]+","+xe[0]+","+xe[1]);var j,H,ne,ce,xe;const Ne=function($e,qe,Ze){let Ke,ut="";for(let lt=$e;lt>0;lt--)Ke=1<<lt-1,ut+=(qe&Ke?1:0)+(Ze&Ke?2:0);return ut}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Ne).replace(/{bbox-epsg-3857}/g,P)}isChildOf(o){const d=this.z-o.z;return d>0&&o.x===this.x>>d&&o.y===this.y>>d}getTilePoint(o){const d=Math.pow(2,this.z);return new G((o.x*d-this.x)*ns,(o.y*d-this.y)*ns)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nT{constructor(o,d){this.wrap=o,this.canonical=d,this.key=Pf(o,d.z,d.z,d.x,d.y)}}class go{constructor(o,d,x,P,j){if(o<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${x}`);this.overscaledZ=o,this.wrap=d,this.canonical=new Jx(x,+P,+j),this.key=Pf(d,o,x,P,j)}clone(){return new go(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?new go(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new go(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-o;return o>this.canonical.z?Pf(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y):Pf(this.wrap*+d,o,o,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new go(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,x=2*this.canonical.x,P=2*this.canonical.y;return[new go(d,this.wrap,d,x,P),new go(d,this.wrap,d,x+1,P),new go(d,this.wrap,d,x,P+1),new go(d,this.wrap,d,x+1,P+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new go(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new go(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new wy(o.x-this.wrap,o.y))}}function Pf(u,o,d,x,P){(u*=2)<0&&(u=-1*u-1);const j=1<<d;return(j*j*u+j*P+x).toString(36)+d.toString(36)+o.toString(36)}hi("CanonicalTileID",Jx),hi("OverscaledTileID",go,{omit:["posMatrix"]});class sT{constructor(o,d,x){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(x&&x!=="mapbox"&&x!=="terrarium")return void M(`"${x}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const P=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=x||"mapbox";for(let j=0;j<P;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(P,j)]=this.data[this._idx(P-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,P)]=this.data[this._idx(j,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<P;j++)for(let H=0;H<P;H++){const ne=this.get(j,H);ne>this.max&&(this.max=ne),ne<this.min&&(this.min=ne)}}get(o,d){const x=new Uint8Array(this.data.buffer),P=4*this._idx(o,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(x[P],x[P+1],x[P+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}_unpackMapbox(o,d,x){return(256*o*256+256*d+x)/10-1e4}_unpackTerrarium(o,d,x){return 256*o+d+x/256-32768}getPixels(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,d,x){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let P=d*this.dim,j=d*this.dim+this.dim,H=x*this.dim,ne=x*this.dim+this.dim;switch(d){case-1:P=j-1;break;case 1:j=P+1}switch(x){case-1:H=ne-1;break;case 1:ne=H+1}const ce=-d*this.dim,xe=-x*this.dim;for(let Ne=H;Ne<ne;Ne++)for(let $e=P;$e<j;$e++)this.data[this._idx($e,Ne)]=o.data[this._idx($e+ce,Ne+xe)]}}hi("DEMData",sT);class aT{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const x=o[d];this._stringToNumber[x]=d,this._numberToString[d]=x}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class oT{constructor(o,d,x,P,j){this.type="Feature",this._vectorTileFeature=o,o._z=d,o._x=x,o._y=P,this.properties=o.properties,this.id=j}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(o[d]=this[d]);return o}}class lT{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Kl(ns,16,0),this.grid3D=new Kl(ns,16,0),this.featureIndexArray=new Ji,this.promoteId=d}insert(o,d,x,P,j,H){const ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,P,j);const ce=H?this.grid3D:this.grid;for(let xe=0;xe<d.length;xe++){const Ne=d[xe],$e=[1/0,1/0,-1/0,-1/0];for(let qe=0;qe<Ne.length;qe++){const Ze=Ne[qe];$e[0]=Math.min($e[0],Ze.x),$e[1]=Math.min($e[1],Ze.y),$e[2]=Math.max($e[2],Ze.x),$e[3]=Math.max($e[3],Ze.y)}$e[0]<ns&&$e[1]<ns&&$e[2]>=0&&$e[3]>=0&&ce.insert(ne,$e[0],$e[1],$e[2],$e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vc.VectorTile(new Bx(this.rawTileData)).layers,this.sourceLayerCoder=new aT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,d,x,P){this.loadVTLayers();const j=o.params||{},H=ns/o.tileSize/o.scale,ne=af(j.filter),ce=o.queryGeometry,xe=o.queryPadding*H,Ne=uT(ce),$e=this.grid.query(Ne.minX-xe,Ne.minY-xe,Ne.maxX+xe,Ne.maxY+xe),qe=uT(o.cameraQueryGeometry),Ze=this.grid3D.query(qe.minX-xe,qe.minY-xe,qe.maxX+xe,qe.maxY+xe,(lt,_t,Dt,xt)=>function(Pt,Ut,Ft,yi,_i){for(const Qt of Pt)if(Ut<=Qt.x&&Ft<=Qt.y&&yi>=Qt.x&&_i>=Qt.y)return!0;const ni=[new G(Ut,Ft),new G(Ut,_i),new G(yi,_i),new G(yi,Ft)];if(Pt.length>2){for(const Qt of ni)if(Ih(Pt,Qt))return!0}for(let Qt=0;Qt<Pt.length-1;Qt++)if(mD(Pt[Qt],Pt[Qt+1],ni))return!0;return!1}(o.cameraQueryGeometry,lt-xe,_t-xe,Dt+xe,xt+xe));for(const lt of Ze)$e.push(lt);$e.sort(U5);const Ke={};let ut;for(let lt=0;lt<$e.length;lt++){const _t=$e[lt];if(_t===ut)continue;ut=_t;const Dt=this.featureIndexArray.get(_t);let xt=null;this.loadMatchingFeature(Ke,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,ne,j.layers,j.availableImages,d,x,P,(Pt,Ut,Ft)=>(xt||(xt=rd(Pt)),Ut.queryIntersectsFeature(ce,Pt,Ft,xt,this.z,o.transform,H,o.pixelPosMatrix)))}return Ke}loadMatchingFeature(o,d,x,P,j,H,ne,ce,xe,Ne,$e){const qe=this.bucketLayerIDs[d];if(H&&!function(lt,_t){for(let Dt=0;Dt<lt.length;Dt++)if(_t.indexOf(lt[Dt])>=0)return!0;return!1}(H,qe))return;const Ze=this.sourceLayerCoder.decode(x),Ke=this.vtLayers[Ze].feature(P);if(j.needGeometry){const lt=nd(Ke,!0);if(!j.filter(new yn(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!j.filter(new yn(this.tileID.overscaledZ),Ke))return;const ut=this.getId(Ke,Ze);for(let lt=0;lt<qe.length;lt++){const _t=qe[lt];if(H&&H.indexOf(_t)<0)continue;const Dt=ce[_t];if(!Dt)continue;let xt={};ut&&Ne&&(xt=Ne.getState(Dt.sourceLayer||"_geojsonTileLayer",ut));const Pt=v({},xe[_t]);Pt.paint=cT(Pt.paint,Dt.paint,Ke,xt,ne),Pt.layout=cT(Pt.layout,Dt.layout,Ke,xt,ne);const Ut=!$e||$e(Ke,Dt,xt);if(!Ut)continue;const Ft=new oT(Ke,this.z,this.x,this.y,ut);Ft.layer=Pt;let yi=o[_t];yi===void 0&&(yi=o[_t]=[]),yi.push({featureIndex:P,feature:Ft,intersectionZ:Ut})}}lookupSymbolFeatures(o,d,x,P,j,H,ne,ce){const xe={};this.loadVTLayers();const Ne=af(j);for(const $e of o)this.loadMatchingFeature(xe,x,P,$e,Ne,H,ne,ce,d);return xe}hasLayer(o){for(const d of this.bucketLayerIDs)for(const x of d)if(o===x)return!0;return!1}getId(o,d){let x=o.id;return this.promoteId&&(x=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof x=="boolean"&&(x=Number(x))),x}}function cT(u,o,d,x,P){return k(u,(j,H)=>{const ne=o instanceof Ch?o.get(H):null;return ne&&ne.evaluate?ne.evaluate(d,x,P):ne})}function uT(u){let o=1/0,d=1/0,x=-1/0,P=-1/0;for(const j of u)o=Math.min(o,j.x),d=Math.min(d,j.y),x=Math.max(x,j.x),P=Math.max(P,j.y);return{minX:o,minY:d,maxX:x,maxY:P}}function U5(u,o){return o-u}var eb;hi("FeatureIndex",lT,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(eb=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",eb.load="load",eb.fullLoad="fullLoad";let _y=null,Df=[];const tb=1e3/30,V5={mark(u){performance.mark(u)},frame(u){const o=u;_y!=null&&Df.push(o-_y),_y=o},clearMetrics(){_y=null,Df=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const u in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[u])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const u=performance.getEntriesByName("loadTime")[0].duration,o=performance.getEntriesByName("fullLoadTime")[0].duration,d=Df.length,x=1/(Df.reduce((j,H)=>j+H,0)/d/1e3),P=Df.filter(j=>j>tb).reduce((j,H)=>j+(H-tb)/tb,0);return{loadTime:u,fullLoadTime:o,fps:x,percentDroppedFrames:P/(d+P)*100}}};s.AJAXError=ee,s.ARRAY_TYPE=ya,s.Actor=class{constructor(u,o,d){this.target=u,this.parent=o,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},T(["receive","process"],this),this.invoker=new $5(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Y()?u:window}send(u,o,d,x,P=!1){const j=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[j]=d);const H=O(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:u,hasCallback:!!d,targetMapId:x,mustQueue:P,sourceMapId:this.mapId,data:Yu(o,H)},H),{cancel:()=>{d&&delete this.callbacks[j],this.target.postMessage({id:j,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}receive(u){const o=u.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){delete this.tasks[d];const x=this.cancelCallbacks[d];delete this.cancelCallbacks[d],x&&x()}else Y()||o.mustQueue?(this.tasks[d]=o,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,o)}process(){if(!this.taskQueue.length)return;const u=this.taskQueue.shift(),o=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(u,o)}processTask(u,o){if(o.type==="<response>"){const d=this.callbacks[u];delete this.callbacks[u],d&&(o.error?d(Ql(o.error)):d(null,Ql(o.data)))}else{let d=!1;const x=O(this.globalScope)?void 0:[],P=o.hasCallback?(ne,ce)=>{d=!0,delete this.cancelCallbacks[u],this.target.postMessage({id:u,type:"<response>",sourceMapId:this.mapId,error:ne?Yu(ne):null,data:Yu(ce,x)},x)}:ne=>{d=!0};let j=null;const H=Ql(o.data);if(this.parent[o.type])j=this.parent[o.type](o.sourceMapId,H,P);else if(this.parent.getWorkerSource){const ne=o.type.split(".");j=this.parent.getWorkerSource(o.sourceMapId,ne[0],H.source)[ne[1]](H,P)}else P(new Error(`Could not find function ${o.type}`));!d&&j&&j.cancel&&(this.cancelCallbacks[u]=j.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=_f,s.CanonicalTileID=Jx,s.CollisionBoxArray=Et,s.CollisionCircleLayoutArray=class extends ke{},s.Color=Ve,s.DEMData=sT,s.DataConstantProperty=Ti,s.DictionaryCoder=aT,s.EXTENT=ns,s.ErrorEvent=Ie,s.EvaluationParameters=yn,s.Event=Te,s.Evented=Fe,s.FeatureIndex=lT,s.FillBucket=zx,s.FillExtrusionBucket=Ox,s.GeoJSONFeature=oT,s.ImageAtlas=DC,s.ImagePosition=Ux,s.LineBucket=Fx,s.LineStripIndexArray=class extends Ct{},s.LngLat=Ln,s.LngLatBounds=ad,s.MercatorCoordinate=wy,s.ONE_EM=ks,s.OverscaledTileID=go,s.PerformanceUtils=V5,s.PosArray=cr,s.Properties=rs,s.QuadTriangleArray=class extends He{},s.RGBAImage=mo,s.RasterBoundsArray=class extends ed{},s.RequestPerformance=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},s.ResourceType=we,s.SegmentVector=Ar,s.SymbolBucket=jh,s.Transitionable=gf,s.TriangleIndexArray=Es,s.Uniform1f=kh,s.Uniform1i=class extends fo{constructor(u,o){super(u,o),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},s.Uniform2f=class extends fo{constructor(u,o){super(u,o),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},s.Uniform3f=class extends fo{constructor(u,o){super(u,o),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},s.Uniform4f=td,s.UniformColor=Mh,s.UniformMatrix4f=class extends fo{constructor(u,o){super(u,o),this.current=uD}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let o=1;o<16;o++)if(u[o]!==this.current[o]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},s.UnwrappedTileID=nT,s.ValidationError=Ge,s.ZoomHistory=Zu,s.add=function(u,o,d){return u[0]=o[0]+d[0],u[1]=o[1]+d[1],u[2]=o[2]+d[2],u},s.addDynamicAttributes=Wx,s.asyncAll=function(u,o,d){if(!u.length)return d(null,[]);let x=u.length;const P=new Array(u.length);let j=null;u.forEach((H,ne)=>{o(H,(ce,xe)=>{ce&&(j=ce),P[ne]=xe,--x==0&&d(j,P)})})},s.bezier=m,s.bindAll=T,s.cacheEntryPossiblyAdded=function(u){le++,le>fe&&(u.getActor().send("enforceCacheSizeLimit",se),le=0)},s.clamp=g,s.clearTileCache=function(u){const o=caches.delete(q);u&&o.catch(u).then(()=>u())},s.clipLine=HC,s.clone=function(u){var o=new ya(16);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},s.clone$1=E,s.clone$2=function(u){var o=new ya(3);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o},s.collisionCircleLayout=o5,s.config=$,s.copy=function(u,o){return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},s.create=function(){var u=new ya(16);return ya!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},s.create$1=iC,s.createExpression=$u,s.createFilter=af,s.createLayout=Zn,s.createStyleLayer=function(u){return u.type==="custom"?new F5(u):new B5[u.type](u)},s.cross=function(u,o,d){var x=o[0],P=o[1],j=o[2],H=d[0],ne=d[1],ce=d[2];return u[0]=P*ce-j*ne,u[1]=j*H-x*ce,u[2]=x*ne-P*H,u},s.dot=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},s.dot$1=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]+u[3]*o[3]},s.ease=y,s.emitValidationErrors=Yg,s.enforceCacheSizeLimit=function(u){re(),W&&W.then(o=>{o.keys().then(d=>{for(let x=0;x<d.length-u;x++)o.delete(d[x])})})},s.equals=function(u,o){var d=u[0],x=u[1],P=u[2],j=u[3],H=u[4],ne=u[5],ce=u[6],xe=u[7],Ne=u[8],$e=u[9],qe=u[10],Ze=u[11],Ke=u[12],ut=u[13],lt=u[14],_t=u[15],Dt=o[0],xt=o[1],Pt=o[2],Ut=o[3],Ft=o[4],yi=o[5],_i=o[6],ni=o[7],Qt=o[8],Yt=o[9],si=o[10],ei=o[11],Ht=o[12],Ii=o[13],Si=o[14],ur=o[15];return Math.abs(d-Dt)<=ga*Math.max(1,Math.abs(d),Math.abs(Dt))&&Math.abs(x-xt)<=ga*Math.max(1,Math.abs(x),Math.abs(xt))&&Math.abs(P-Pt)<=ga*Math.max(1,Math.abs(P),Math.abs(Pt))&&Math.abs(j-Ut)<=ga*Math.max(1,Math.abs(j),Math.abs(Ut))&&Math.abs(H-Ft)<=ga*Math.max(1,Math.abs(H),Math.abs(Ft))&&Math.abs(ne-yi)<=ga*Math.max(1,Math.abs(ne),Math.abs(yi))&&Math.abs(ce-_i)<=ga*Math.max(1,Math.abs(ce),Math.abs(_i))&&Math.abs(xe-ni)<=ga*Math.max(1,Math.abs(xe),Math.abs(ni))&&Math.abs(Ne-Qt)<=ga*Math.max(1,Math.abs(Ne),Math.abs(Qt))&&Math.abs($e-Yt)<=ga*Math.max(1,Math.abs($e),Math.abs(Yt))&&Math.abs(qe-si)<=ga*Math.max(1,Math.abs(qe),Math.abs(si))&&Math.abs(Ze-ei)<=ga*Math.max(1,Math.abs(Ze),Math.abs(ei))&&Math.abs(Ke-Ht)<=ga*Math.max(1,Math.abs(Ke),Math.abs(Ht))&&Math.abs(ut-Ii)<=ga*Math.max(1,Math.abs(ut),Math.abs(Ii))&&Math.abs(lt-Si)<=ga*Math.max(1,Math.abs(lt),Math.abs(Si))&&Math.abs(_t-ur)<=ga*Math.max(1,Math.abs(_t),Math.abs(ur))},s.evaluateSizeForFeature=function(u,{uSize:o,uSizeT:d},{lowerSize:x,upperSize:P}){return u.kind==="source"?x/nc:u.kind==="composite"?Tn(x/nc,P/nc,d):o},s.evaluateSizeForZoom=function(u,o){let d=0,x=0;if(u.kind==="constant")x=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:P,minZoom:j,maxZoom:H}=u,ne=P?g(Aa.interpolationFactor(P,o,j,H),0,1):0;u.kind==="camera"?x=Tn(u.minSize,u.maxSize,ne):d=ne}return{uSizeT:d,uSize:x}},s.evaluateVariableOffset=WC,s.evented=Oc,s.exported=L,s.exported$1=Se,s.extend=v,s.filterObject=w,s.fromRotation=function(u,o){var d=Math.sin(o),x=Math.cos(o);return u[0]=x,u[1]=d,u[2]=0,u[3]=-d,u[4]=x,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},s.fromScaling=function(u,o){return u[0]=o[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=o[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=o[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},s.getAnchorAlignment=Hx,s.getAnchorJustification=qx,s.getArrayBuffer=Ce,s.getImage=De,s.getJSON=function(u,o){return ve(v(u,{type:"json"}),o)},s.getOverlapMode=Kx,s.getRTLTextPluginStatus=mf,s.getReferrer=ae,s.getVideo=function(u,o){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let x=0;x<u.length;x++){const P=window.document.createElement("source");je(u[x])||(d.crossOrigin="Anonymous"),P.src=u[x],d.appendChild(P)}return{cancel:()=>{}}},s.identity=kx,s.invert=function(u,o){var d=o[0],x=o[1],P=o[2],j=o[3],H=o[4],ne=o[5],ce=o[6],xe=o[7],Ne=o[8],$e=o[9],qe=o[10],Ze=o[11],Ke=o[12],ut=o[13],lt=o[14],_t=o[15],Dt=d*ne-x*H,xt=d*ce-P*H,Pt=d*xe-j*H,Ut=x*ce-P*ne,Ft=x*xe-j*ne,yi=P*xe-j*ce,_i=Ne*ut-$e*Ke,ni=Ne*lt-qe*Ke,Qt=Ne*_t-Ze*Ke,Yt=$e*lt-qe*ut,si=$e*_t-Ze*ut,ei=qe*_t-Ze*lt,Ht=Dt*ei-xt*si+Pt*Yt+Ut*Qt-Ft*ni+yi*_i;return Ht?(u[0]=(ne*ei-ce*si+xe*Yt)*(Ht=1/Ht),u[1]=(P*si-x*ei-j*Yt)*Ht,u[2]=(ut*yi-lt*Ft+_t*Ut)*Ht,u[3]=(qe*Ft-$e*yi-Ze*Ut)*Ht,u[4]=(ce*Qt-H*ei-xe*ni)*Ht,u[5]=(d*ei-P*Qt+j*ni)*Ht,u[6]=(lt*Pt-Ke*yi-_t*xt)*Ht,u[7]=(Ne*yi-qe*Pt+Ze*xt)*Ht,u[8]=(H*si-ne*Qt+xe*_i)*Ht,u[9]=(x*Qt-d*si-j*_i)*Ht,u[10]=(Ke*Ft-ut*Pt+_t*Dt)*Ht,u[11]=($e*Pt-Ne*Ft-Ze*Dt)*Ht,u[12]=(ne*ni-H*Yt-ce*_i)*Ht,u[13]=(d*Yt-x*ni+P*_i)*Ht,u[14]=(ut*xt-Ke*Ut-lt*Dt)*Ht,u[15]=(Ne*Ut-$e*xt+qe*Dt)*Ht,u):null},s.isImageBitmap=R,s.isSafari=O,s.isWorker=Y,s.keysDifference=function(u,o){const d=[];for(const x in u)x in o||d.push(x);return d},s.lazyLoadRTLTextPlugin=function(){Za.isLoading()||Za.isLoaded()||mf()!=="deferred"||bh()},s.makeRequest=ve,s.mapObject=k,s.mercatorXfromLng=eT,s.mercatorYfromLat=tT,s.mercatorZfromAltitude=iT,s.mul=vD,s.mul$1=function(u,o,d){return u[0]=o[0]*d[0],u[1]=o[1]*d[1],u[2]=o[2]*d[2],u[3]=o[3]*d[3],u},s.multiply=rC,s.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},s.normalize=function(u,o){var d=o[0],x=o[1],P=o[2],j=d*d+x*x+P*P;return j>0&&(j=1/Math.sqrt(j)),u[0]=o[0]*j,u[1]=o[1]*j,u[2]=o[2]*j,u},s.number=Tn,s.ortho=function(u,o,d,x,P,j,H){var ne=1/(o-d),ce=1/(x-P),xe=1/(j-H);return u[0]=-2*ne,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*ce,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*xe,u[11]=0,u[12]=(o+d)*ne,u[13]=(P+x)*ce,u[14]=(H+j)*xe,u[15]=1,u},s.parseCacheControl=Z,s.parseGlyphPbf=function(u){return new Bx(u).readFields(v5,[])},s.pbf=Bx,s.performSymbolLayout=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=ns/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const o=u.bucket.layers[0].layout,d=u.bucket.layers[0]._unevaluatedLayout._values,x={layoutIconSize:d["icon-size"].possiblyEvaluate(new yn(u.bucket.zoom+1),u.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new yn(u.bucket.zoom+1),u.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new yn(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:ce,maxZoom:xe}=u.bucket.textSizeData;x.compositeTextSizes=[d["text-size"].possiblyEvaluate(new yn(ce),u.canonical),d["text-size"].possiblyEvaluate(new yn(xe),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:ce,maxZoom:xe}=u.bucket.iconSizeData;x.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new yn(ce),u.canonical),d["icon-size"].possiblyEvaluate(new yn(xe),u.canonical)]}const P=o.get("text-line-height")*ks,j=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",H=o.get("text-keep-upright"),ne=o.get("text-size");for(const ce of u.bucket.features){const xe=o.get("text-font").evaluate(ce,{},u.canonical).join(","),Ne=ne.evaluate(ce,{},u.canonical),$e=x.layoutTextSize.evaluate(ce,{},u.canonical),qe=x.layoutIconSize.evaluate(ce,{},u.canonical),Ze={horizontal:{},vertical:void 0},Ke=ce.text;let ut,lt=[0,0];if(Ke){const xt=Ke.toString(),Pt=o.get("text-letter-spacing").evaluate(ce,{},u.canonical)*ks,Ut=Zg(xt)?Pt:0,Ft=o.get("text-anchor").evaluate(ce,{},u.canonical),yi=o.get("text-variable-anchor");if(!yi){const si=o.get("text-radial-offset").evaluate(ce,{},u.canonical);lt=si?WC(Ft,[si*ks,Gx]):o.get("text-offset").evaluate(ce,{},u.canonical).map(ei=>ei*ks)}let _i=j?"center":o.get("text-justify").evaluate(ce,{},u.canonical);const ni=o.get("symbol-placement"),Qt=ni==="point"?o.get("text-max-width").evaluate(ce,{},u.canonical)*ks:0,Yt=()=>{u.bucket.allowVerticalPlacement&&uf(xt)&&(Ze.vertical=py(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,xe,Qt,P,Ft,"left",Ut,lt,s.WritingMode.vertical,!0,ni,$e,Ne))};if(!j&&yi){const si=_i==="auto"?yi.map(Ht=>qx(Ht)):[_i];let ei=!1;for(let Ht=0;Ht<si.length;Ht++){const Ii=si[Ht];if(!Ze.horizontal[Ii])if(ei)Ze.horizontal[Ii]=Ze.horizontal[0];else{const Si=py(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,xe,Qt,P,"center",Ii,Ut,lt,s.WritingMode.horizontal,!1,ni,$e,Ne);Si&&(Ze.horizontal[Ii]=Si,ei=Si.positionedLines.length===1)}}Yt()}else{_i==="auto"&&(_i=qx(Ft));const si=py(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,xe,Qt,P,Ft,_i,Ut,lt,s.WritingMode.horizontal,!1,ni,$e,Ne);si&&(Ze.horizontal[_i]=si),Yt(),uf(xt)&&j&&H&&(Ze.vertical=py(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,xe,Qt,P,Ft,_i,Ut,lt,s.WritingMode.vertical,!1,ni,$e,Ne))}}let _t=!1;if(ce.icon&&ce.icon.name){const xt=u.imageMap[ce.icon.name];xt&&(ut=T5(u.imagePositions[ce.icon.name],o.get("icon-offset").evaluate(ce,{},u.canonical),o.get("icon-anchor").evaluate(ce,{},u.canonical)),_t=!!xt.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=_t:u.bucket.sdfIcons!==_t&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==u.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Dt=ZC(Ze.horizontal)||Ze.vertical;u.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||ut)&&P5(u.bucket,ce,Ze,ut,u.imageMap,x,$e,qe,lt,_t,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},s.perspective=function(u,o,d,x,P){var j,H=1/Math.tan(o/2);return u[0]=H/d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=H,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+x)*(j=1/(x-P)),u[14]=2*P*x*j):(u[10]=-1,u[14]=-2*x),u},s.pick=function(u,o){const d={};for(let x=0;x<o.length;x++){const P=o[x];P in u&&(d[P]=u[P])}return d},s.plugin=Za,s.pointGeometry=G,s.polygonIntersectsPolygon=Q2,s.potpack=PC,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=hi,s.registerForPluginStateChange=function(u){return u({pluginStatus:pa,pluginURL:pl}),Oc.on("pluginStateChange",u),u},s.renderColorRamp=uC,s.rotateX=function(u,o,d){var x=Math.sin(d),P=Math.cos(d),j=o[4],H=o[5],ne=o[6],ce=o[7],xe=o[8],Ne=o[9],$e=o[10],qe=o[11];return o!==u&&(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[4]=j*P+xe*x,u[5]=H*P+Ne*x,u[6]=ne*P+$e*x,u[7]=ce*P+qe*x,u[8]=xe*P-j*x,u[9]=Ne*P-H*x,u[10]=$e*P-ne*x,u[11]=qe*P-ce*x,u},s.rotateZ=function(u,o,d){var x=Math.sin(d),P=Math.cos(d),j=o[0],H=o[1],ne=o[2],ce=o[3],xe=o[4],Ne=o[5],$e=o[6],qe=o[7];return o!==u&&(u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=j*P+xe*x,u[1]=H*P+Ne*x,u[2]=ne*P+$e*x,u[3]=ce*P+qe*x,u[4]=xe*P-j*x,u[5]=Ne*P-H*x,u[6]=$e*P-ne*x,u[7]=qe*P-ce*x,u},s.scale=function(u,o,d){var x=d[0],P=d[1],j=d[2];return u[0]=o[0]*x,u[1]=o[1]*x,u[2]=o[2]*x,u[3]=o[3]*x,u[4]=o[4]*P,u[5]=o[5]*P,u[6]=o[6]*P,u[7]=o[7]*P,u[8]=o[8]*j,u[9]=o[9]*j,u[10]=o[10]*j,u[11]=o[11]*j,u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},s.scale$1=function(u,o,d){return u[0]=o[0]*d,u[1]=o[1]*d,u[2]=o[2]*d,u},s.setCacheLimits=function(u,o){se=u,fe=o},s.setRTLTextPlugin=function(u,o,d=!1){if(pa===xh||pa===df||pa===hf)throw new Error("setRTLTextPlugin cannot be called multiple times.");pl=L.resolveURL(u),pa=xh,pf=o,ff(),d||bh()},s.spec=Oe,s.sphericalToCartesian=function([u,o,d]){return o+=90,o*=Math.PI/180,d*=Math.PI/180,{x:u*Math.cos(o)*Math.sin(d),y:u*Math.sin(o)*Math.sin(d),z:u*Math.cos(d)}},s.sqrLen=function(u){var o=u[0],d=u[1];return o*o+d*d},s.sub=function(u,o,d){return u[0]=o[0]-d[0],u[1]=o[1]-d[1],u[2]=o[2]-d[2],u},s.toEvaluationFeature=nd,s.transformMat3=function(u,o,d){var x=o[0],P=o[1],j=o[2];return u[0]=x*d[0]+P*d[3]+j*d[6],u[1]=x*d[1]+P*d[4]+j*d[7],u[2]=x*d[2]+P*d[5]+j*d[8],u},s.transformMat4=sy,s.transformMat4$1=function(u,o,d){var x=o[0],P=o[1];return u[0]=d[0]*x+d[4]*P+d[12],u[1]=d[1]*x+d[5]*P+d[13],u},s.translate=function(u,o,d){var x,P,j,H,ne,ce,xe,Ne,$e,qe,Ze,Ke,ut=d[0],lt=d[1],_t=d[2];return o===u?(u[12]=o[0]*ut+o[4]*lt+o[8]*_t+o[12],u[13]=o[1]*ut+o[5]*lt+o[9]*_t+o[13],u[14]=o[2]*ut+o[6]*lt+o[10]*_t+o[14],u[15]=o[3]*ut+o[7]*lt+o[11]*_t+o[15]):(P=o[1],j=o[2],H=o[3],ne=o[4],ce=o[5],xe=o[6],Ne=o[7],$e=o[8],qe=o[9],Ze=o[10],Ke=o[11],u[0]=x=o[0],u[1]=P,u[2]=j,u[3]=H,u[4]=ne,u[5]=ce,u[6]=xe,u[7]=Ne,u[8]=$e,u[9]=qe,u[10]=Ze,u[11]=Ke,u[12]=x*ut+ne*lt+$e*_t+o[12],u[13]=P*ut+ce*lt+qe*_t+o[13],u[14]=j*ut+xe*lt+Ze*_t+o[14],u[15]=H*ut+Ne*lt+Ke*_t+o[15]),u},s.triggerPluginCompletionEvent=Qg,s.unicodeBlockLookup=ri,s.uniqueId=function(){return _++},s.validateCustomStyleLayer=function(u){const o=[],d=u.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),u.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateLight=mx,s.validateStyle=Xl,s.vectorTile=Vc,s.warnOnce=M,s.wrap=b}),a(["./shared"],function(s){function h(We){const _e=typeof We;if(_e==="number"||_e==="boolean"||_e==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){let Xe="[";for(const et of We)Xe+=`${h(et)},`;return`${Xe}]`}const Le=Object.keys(We).sort();let Ve="{";for(let Xe=0;Xe<Le.length;Xe++)Ve+=`${JSON.stringify(Le[Xe])}:${h(We[Le[Xe]])},`;return`${Ve}}`}function f(We){let _e="";for(const Le of s.refProperties)_e+=`/${h(We[Le])}`;return _e}class m{constructor(_e){this.keyCache={},_e&&this.replace(_e)}replace(_e){this._layerConfigs={},this._layers={},this.update(_e,[])}update(_e,Le){for(const Xe of _e){this._layerConfigs[Xe.id]=Xe;const et=this._layers[Xe.id]=s.createStyleLayer(Xe);et._featureFilter=s.createFilter(et.filter),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id]}for(const Xe of Le)delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe];this.familiesBySource={};const Ve=function(Xe,et){const ct={};for(let nt=0;nt<Xe.length;nt++){const ft=et&&et[Xe[nt].id]||f(Xe[nt]);et&&(et[Xe[nt].id]=ft);let wt=ct[ft];wt||(wt=ct[ft]=[]),wt.push(Xe[nt])}const ot=[];for(const nt in ct)ot.push(ct[nt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Xe of Ve){const et=Xe.map(zt=>this._layers[zt.id]),ct=et[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let nt=this.familiesBySource[ot];nt||(nt=this.familiesBySource[ot]={});const ft=ct.sourceLayer||"_geojsonTileLayer";let wt=nt[ft];wt||(wt=nt[ft]=[]),wt.push(et)}}}class y{constructor(_e){const Le={},Ve=[];for(const ot in _e){const nt=_e[ot],ft=Le[ot]={};for(const wt in nt){const zt=nt[+wt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Rt={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};Ve.push(Rt),ft[wt]={rect:Rt,metrics:zt.metrics}}}const{w:Xe,h:et}=s.potpack(Ve),ct=new s.AlphaImage({width:Xe||1,height:et||1});for(const ot in _e){const nt=_e[ot];for(const ft in nt){const wt=nt[+ft];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const zt=Le[ot][ft].rect;s.AlphaImage.copy(wt.bitmap,ct,{x:0,y:0},{x:zt.x+1,y:zt.y+1},wt.bitmap)}}this.image=ct,this.positions=Le}}s.register("GlyphAtlas",y);class g{constructor(_e){this.tileID=new s.OverscaledTileID(_e.tileID.overscaledZ,_e.tileID.wrap,_e.tileID.canonical.z,_e.tileID.canonical.x,_e.tileID.canonical.y),this.uid=_e.uid,this.zoom=_e.zoom,this.pixelRatio=_e.pixelRatio,this.tileSize=_e.tileSize,this.source=_e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=_e.showCollisionBoxes,this.collectResourceTiming=!!_e.collectResourceTiming,this.returnDependencies=!!_e.returnDependencies,this.promoteId=_e.promoteId}parse(_e,Le,Ve,Xe,et){this.status="parsing",this.data=_e,this.collisionBoxArray=new s.CollisionBoxArray;const ct=new s.DictionaryCoder(Object.keys(_e.layers).sort()),ot=new s.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const nt={},ft={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},wt=Le.familiesBySource[this.source];for(const Hi in wt){const mi=_e.layers[Hi];if(!mi)continue;mi.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${Hi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ri=ct.encode(Hi),Zr=[];for(let nn=0;nn<mi.length;nn++){const Cn=mi.feature(nn),xr=ot.getId(Cn,Hi);Zr.push({feature:Cn,id:xr,index:nn,sourceLayerIndex:Ri})}for(const nn of wt[Hi]){const Cn=nn[0];Cn.source!==this.source&&s.warnOnce(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(b(nn,this.zoom,Ve),(nt[Cn.id]=Cn.createBucket({index:ot.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ri,sourceID:this.source})).populate(Zr,ft,this.tileID.canonical),ot.bucketLayerIDs.push(nn.map(xr=>xr.id)))}}let zt,Rt,ci,Wt;const gi=s.mapObject(ft.glyphDependencies,Hi=>Object.keys(Hi).map(Number));Object.keys(gi).length?Xe.send("getGlyphs",{uid:this.uid,stacks:gi},(Hi,mi)=>{zt||(zt=Hi,Rt=mi,$i.call(this))}):Rt={};const vi=Object.keys(ft.iconDependencies);vi.length?Xe.send("getImages",{icons:vi,source:this.source,tileID:this.tileID,type:"icons"},(Hi,mi)=>{zt||(zt=Hi,ci=mi,$i.call(this))}):ci={};const Vi=Object.keys(ft.patternDependencies);function $i(){if(zt)return et(zt);if(Rt&&ci&&Wt){const Hi=new y(Rt),mi=new s.ImageAtlas(ci,Wt);for(const Ri in nt){const Zr=nt[Ri];Zr instanceof s.SymbolBucket?(b(Zr.layers,this.zoom,Ve),s.performSymbolLayout({bucket:Zr,glyphMap:Rt,glyphPositions:Hi.positions,imageMap:ci,imagePositions:mi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Zr.hasPattern&&(Zr instanceof s.LineBucket||Zr instanceof s.FillBucket||Zr instanceof s.FillExtrusionBucket)&&(b(Zr.layers,this.zoom,Ve),Zr.addFeatures(ft,this.tileID.canonical,mi.patternPositions))}this.status="done",et(null,{buckets:Object.values(nt).filter(Ri=>!Ri.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Hi.image,imageAtlas:mi,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?ci:null,glyphPositions:this.returnDependencies?Hi.positions:null})}}Vi.length?Xe.send("getImages",{icons:Vi,source:this.source,tileID:this.tileID,type:"patterns"},(Hi,mi)=>{zt||(zt=Hi,Wt=mi,$i.call(this))}):Wt={},$i.call(this)}}function b(We,_e,Le){const Ve=new s.EvaluationParameters(_e);for(const Xe of We)Xe.recalculate(Ve,Le)}function v(We,_e){const Le=s.getArrayBuffer(We.request,(Ve,Xe,et,ct)=>{Ve?_e(Ve):Xe&&_e(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(Xe)),rawData:Xe,cacheControl:et,expires:ct})});return()=>{Le.cancel(),_e()}}class _{constructor(_e,Le,Ve,Xe){this.actor=_e,this.layerIndex=Le,this.availableImages=Ve,this.loadVectorData=Xe||v,this.loading={},this.loaded={}}loadTile(_e,Le){const Ve=_e.uid;this.loading||(this.loading={});const Xe=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new s.RequestPerformance(_e.request),et=this.loading[Ve]=new g(_e);et.abort=this.loadVectorData(_e,(ct,ot)=>{if(delete this.loading[Ve],ct||!ot)return et.status="done",this.loaded[Ve]=et,Le(ct);const nt=ot.rawData,ft={};ot.expires&&(ft.expires=ot.expires),ot.cacheControl&&(ft.cacheControl=ot.cacheControl);const wt={};if(Xe){const zt=Xe.finish();zt&&(wt.resourceTiming=JSON.parse(JSON.stringify(zt)))}et.vectorTile=ot.vectorTile,et.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Rt)=>{if(zt||!Rt)return Le(zt);Le(null,s.extend({rawTileData:nt.slice(0)},Rt,ft,wt))}),this.loaded=this.loaded||{},this.loaded[Ve]=et})}reloadTile(_e,Le){const Ve=this.loaded,Xe=_e.uid,et=this;if(Ve&&Ve[Xe]){const ct=Ve[Xe];ct.showCollisionBoxes=_e.showCollisionBoxes;const ot=(nt,ft)=>{const wt=ct.reloadCallback;wt&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,et.layerIndex,this.availableImages,et.actor,wt)),Le(nt,ft)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(_e,Le){const Ve=this.loading,Xe=_e.uid;Ve&&Ve[Xe]&&Ve[Xe].abort&&(Ve[Xe].abort(),delete Ve[Xe]),Le()}removeTile(_e,Le){const Ve=this.loaded,Xe=_e.uid;Ve&&Ve[Xe]&&delete Ve[Xe],Le()}}class T{constructor(){this.loaded={}}loadTile(_e,Le){const{uid:Ve,encoding:Xe,rawImageData:et}=_e,ct=s.isImageBitmap(et)?this.getImageData(et):et,ot=new s.DEMData(Ve,ct,Xe);this.loaded=this.loaded||{},this.loaded[Ve]=ot,Le(null,ot)}getImageData(_e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(_e.width,_e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=_e.width,this.offscreenCanvas.height=_e.height,this.offscreenCanvasContext.drawImage(_e,0,0,_e.width,_e.height);const Le=this.offscreenCanvasContext.getImageData(-1,-1,_e.width+2,_e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:Le.width,height:Le.height},Le.data)}removeTile(_e){const Le=this.loaded,Ve=_e.uid;Le&&Le[Ve]&&delete Le[Ve]}}var k=function We(_e,Le){var Ve,Xe=_e&&_e.type;if(Xe==="FeatureCollection")for(Ve=0;Ve<_e.features.length;Ve++)We(_e.features[Ve],Le);else if(Xe==="GeometryCollection")for(Ve=0;Ve<_e.geometries.length;Ve++)We(_e.geometries[Ve],Le);else if(Xe==="Feature")We(_e.geometry,Le);else if(Xe==="Polygon")w(_e.coordinates,Le);else if(Xe==="MultiPolygon")for(Ve=0;Ve<_e.coordinates.length;Ve++)w(_e.coordinates[Ve],Le);return _e};function w(We,_e){if(We.length!==0){E(We[0],_e);for(var Le=1;Le<We.length;Le++)E(We[Le],!1)}}function E(We,_e){for(var Le=0,Ve=0,Xe=0,et=We.length,ct=et-1;Xe<et;ct=Xe++){var ot=(We[Xe][0]-We[ct][0])*(We[ct][1]+We[Xe][1]),nt=Le+ot;Ve+=Math.abs(Le)>=Math.abs(ot)?Le-nt+ot:ot-nt+Le,Le=nt}Le+Ve>=0!=!!_e&&We.reverse()}const A=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class M{constructor(_e){this._feature=_e,this.extent=s.EXTENT,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){const _e=[];for(const Le of this._feature.geometry)_e.push([new s.pointGeometry(Le[0],Le[1])]);return _e}{const _e=[];for(const Le of this._feature.geometry){const Ve=[];for(const Xe of Le)Ve.push(new s.pointGeometry(Xe[0],Xe[1]));_e.push(Ve)}return _e}}toGeoJSON(_e,Le,Ve){return A.call(this,_e,Le,Ve)}}class S{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=_e.length,this._features=_e}feature(_e){return new M(this._features[_e])}}var N={exports:{}},Y=s.pointGeometry,Z=s.vectorTile.VectorTileFeature,K=B;function B(We,_e){this.options=_e||{},this.features=We,this.length=We.length}function F(We,_e){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=_e||4096}B.prototype.feature=function(We){return new F(this.features[We],this.options.extent)},F.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var _e=0;_e<We.length;_e++){for(var Le=We[_e],Ve=[],Xe=0;Xe<Le.length;Xe++)Ve.push(new Y(Le[Xe][0],Le[Xe][1]));this.geometry.push(Ve)}return this.geometry},F.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,_e=1/0,Le=-1/0,Ve=1/0,Xe=-1/0,et=0;et<We.length;et++)for(var ct=We[et],ot=0;ot<ct.length;ot++){var nt=ct[ot];_e=Math.min(_e,nt.x),Le=Math.max(Le,nt.x),Ve=Math.min(Ve,nt.y),Xe=Math.max(Xe,nt.y)}return[_e,Ve,Le,Xe]},F.prototype.toGeoJSON=Z.prototype.toGeoJSON;var O=s.pbf,R=K;function L(We){var _e=new O;return function(Le,Ve){for(var Xe in Le.layers)Ve.writeMessage(3,G,Le.layers[Xe])}(We,_e),_e.finish()}function G(We,_e){var Le;_e.writeVarintField(15,We.version||1),_e.writeStringField(1,We.name||""),_e.writeVarintField(5,We.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<We.length;Le++)Ve.feature=We.feature(Le),_e.writeMessage(2,V,Ve);var Xe=Ve.keys;for(Le=0;Le<Xe.length;Le++)_e.writeStringField(3,Xe[Le]);var et=Ve.values;for(Le=0;Le<et.length;Le++)_e.writeMessage(4,fe,et[Le])}function V(We,_e){var Le=We.feature;Le.id!==void 0&&_e.writeVarintField(1,Le.id),_e.writeMessage(2,$,We),_e.writeVarintField(3,Le.type),_e.writeMessage(4,se,Le)}function $(We,_e){var Le=We.feature,Ve=We.keys,Xe=We.values,et=We.keycache,ct=We.valuecache;for(var ot in Le.properties){var nt=Le.properties[ot],ft=et[ot];if(nt!==null){ft===void 0&&(Ve.push(ot),et[ot]=ft=Ve.length-1),_e.writeVarint(ft);var wt=typeof nt;wt!=="string"&&wt!=="boolean"&&wt!=="number"&&(nt=JSON.stringify(nt));var zt=wt+":"+nt,Rt=ct[zt];Rt===void 0&&(Xe.push(nt),ct[zt]=Rt=Xe.length-1),_e.writeVarint(Rt)}}}function q(We,_e){return(_e<<3)+(7&We)}function W(We){return We<<1^We>>31}function se(We,_e){for(var Le=We.loadGeometry(),Ve=We.type,Xe=0,et=0,ct=Le.length,ot=0;ot<ct;ot++){var nt=Le[ot],ft=1;Ve===1&&(ft=nt.length),_e.writeVarint(q(1,ft));for(var wt=Ve===3?nt.length-1:nt.length,zt=0;zt<wt;zt++){zt===1&&Ve!==1&&_e.writeVarint(q(2,wt-1));var Rt=nt[zt].x-Xe,ci=nt[zt].y-et;_e.writeVarint(W(Rt)),_e.writeVarint(W(ci)),Xe+=Rt,et+=ci}Ve===3&&_e.writeVarint(q(7,1))}}function fe(We,_e){var Le=typeof We;Le==="string"?_e.writeStringField(1,We):Le==="boolean"?_e.writeBooleanField(7,We):Le==="number"&&(We%1!=0?_e.writeDoubleField(3,We):We<0?_e.writeSVarintField(6,We):_e.writeVarintField(5,We))}function re(We,_e,Le,Ve,Xe,et){if(Xe-Ve<=Le)return;const ct=Ve+Xe>>1;le(We,_e,ct,Ve,Xe,et%2),re(We,_e,Le,Ve,ct-1,et+1),re(We,_e,Le,ct+1,Xe,et+1)}function le(We,_e,Le,Ve,Xe,et){for(;Xe>Ve;){if(Xe-Ve>600){const ft=Xe-Ve+1,wt=Le-Ve+1,zt=Math.log(ft),Rt=.5*Math.exp(2*zt/3),ci=.5*Math.sqrt(zt*Rt*(ft-Rt)/ft)*(wt-ft/2<0?-1:1);le(We,_e,Le,Math.max(Ve,Math.floor(Le-wt*Rt/ft+ci)),Math.min(Xe,Math.floor(Le+(ft-wt)*Rt/ft+ci)),et)}const ct=_e[2*Le+et];let ot=Ve,nt=Xe;for(Se(We,_e,Ve,Le),_e[2*Xe+et]>ct&&Se(We,_e,Ve,Xe);ot<nt;){for(Se(We,_e,ot,nt),ot++,nt--;_e[2*ot+et]<ct;)ot++;for(;_e[2*nt+et]>ct;)nt--}_e[2*Ve+et]===ct?Se(We,_e,Ve,nt):(nt++,Se(We,_e,nt,Xe)),nt<=Le&&(Ve=nt+1),Le<=nt&&(Xe=nt-1)}}function Se(We,_e,Le,Ve){ye(We,Le,Ve),ye(_e,2*Le,2*Ve),ye(_e,2*Le+1,2*Ve+1)}function ye(We,_e,Le){const Ve=We[_e];We[_e]=We[Le],We[Le]=Ve}function Ee(We,_e,Le,Ve){const Xe=We-Le,et=_e-Ve;return Xe*Xe+et*et}N.exports=L,N.exports.fromVectorTileJs=L,N.exports.fromGeojsonVt=function(We,_e){_e=_e||{};var Le={};for(var Ve in We)Le[Ve]=new R(We[Ve].features,_e),Le[Ve].name=Ve,Le[Ve].version=_e.version,Le[Ve].extent=_e.extent;return L({layers:Le})},N.exports.GeoJSONWrapper=R;const J=We=>We[0],ie=We=>We[1];class oe{constructor(_e,Le=J,Ve=ie,Xe=64,et=Float64Array){this.nodeSize=Xe,this.points=_e;const ct=_e.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(_e.length),nt=this.coords=new et(2*_e.length);for(let ft=0;ft<_e.length;ft++)ot[ft]=ft,nt[2*ft]=Le(_e[ft]),nt[2*ft+1]=Ve(_e[ft]);re(ot,nt,Xe,0,ot.length-1,0)}range(_e,Le,Ve,Xe){return function(et,ct,ot,nt,ft,wt,zt){const Rt=[0,et.length-1,0],ci=[];let Wt,gi;for(;Rt.length;){const vi=Rt.pop(),Vi=Rt.pop(),$i=Rt.pop();if(Vi-$i<=zt){for(let Ri=$i;Ri<=Vi;Ri++)Wt=ct[2*Ri],gi=ct[2*Ri+1],Wt>=ot&&Wt<=ft&&gi>=nt&&gi<=wt&&ci.push(et[Ri]);continue}const Hi=Math.floor(($i+Vi)/2);Wt=ct[2*Hi],gi=ct[2*Hi+1],Wt>=ot&&Wt<=ft&&gi>=nt&&gi<=wt&&ci.push(et[Hi]);const mi=(vi+1)%2;(vi===0?ot<=Wt:nt<=gi)&&(Rt.push($i),Rt.push(Hi-1),Rt.push(mi)),(vi===0?ft>=Wt:wt>=gi)&&(Rt.push(Hi+1),Rt.push(Vi),Rt.push(mi))}return ci}(this.ids,this.coords,_e,Le,Ve,Xe,this.nodeSize)}within(_e,Le,Ve){return function(Xe,et,ct,ot,nt,ft){const wt=[0,Xe.length-1,0],zt=[],Rt=nt*nt;for(;wt.length;){const ci=wt.pop(),Wt=wt.pop(),gi=wt.pop();if(Wt-gi<=ft){for(let mi=gi;mi<=Wt;mi++)Ee(et[2*mi],et[2*mi+1],ct,ot)<=Rt&&zt.push(Xe[mi]);continue}const vi=Math.floor((gi+Wt)/2),Vi=et[2*vi],$i=et[2*vi+1];Ee(Vi,$i,ct,ot)<=Rt&&zt.push(Xe[vi]);const Hi=(ci+1)%2;(ci===0?ct-nt<=Vi:ot-nt<=$i)&&(wt.push(gi),wt.push(vi-1),wt.push(Hi)),(ci===0?ct+nt>=Vi:ot+nt>=$i)&&(wt.push(vi+1),wt.push(Wt),wt.push(Hi))}return zt}(this.ids,this.coords,_e,Le,Ve,this.nodeSize)}}const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:We=>We},ee=Math.fround||(ae=new Float32Array(1),We=>(ae[0]=+We,ae[0]));var ae;class ue{constructor(_e){this.options=Ue(Object.create(we),_e),this.trees=new Array(this.options.maxZoom+1)}load(_e){const{log:Le,minZoom:Ve,maxZoom:Xe,nodeSize:et}=this.options;Le&&console.time("total time");const ct=`prepare ${_e.length} points`;Le&&console.time(ct),this.points=_e;let ot=[];for(let nt=0;nt<_e.length;nt++)_e[nt].geometry&&ot.push(Ce(_e[nt],nt));this.trees[Xe+1]=new oe(ot,Pe,Te,et,Float32Array),Le&&console.timeEnd(ct);for(let nt=Xe;nt>=Ve;nt--){const ft=+Date.now();ot=this._cluster(ot,nt),this.trees[nt]=new oe(ot,Pe,Te,et,Float32Array),Le&&console.log("z%d: %d clusters in %dms",nt,ot.length,+Date.now()-ft)}return Le&&console.timeEnd("total time"),this}getClusters(_e,Le){let Ve=((_e[0]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,_e[1]));let et=_e[2]===180?180:((_e[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,_e[3]));if(_e[2]-_e[0]>=360)Ve=-180,et=180;else if(Ve>et){const wt=this.getClusters([Ve,Xe,180,ct],Le),zt=this.getClusters([-180,Xe,et,ct],Le);return wt.concat(zt)}const ot=this.trees[this._limitZoom(Le)],nt=ot.range(Re(Ve),me(ct),Re(et),me(Xe)),ft=[];for(const wt of nt){const zt=ot.points[wt];ft.push(zt.numPoints?je(zt):this.points[zt.index])}return ft}getChildren(_e){const Le=this._getOriginId(_e),Ve=this._getOriginZoom(_e),Xe="No cluster with the specified id.",et=this.trees[Ve];if(!et)throw new Error(Xe);const ct=et.points[Le];if(!ct)throw new Error(Xe);const ot=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),nt=et.within(ct.x,ct.y,ot),ft=[];for(const wt of nt){const zt=et.points[wt];zt.parentId===_e&&ft.push(zt.numPoints?je(zt):this.points[zt.index])}if(ft.length===0)throw new Error(Xe);return ft}getLeaves(_e,Le,Ve){const Xe=[];return this._appendLeaves(Xe,_e,Le=Le||10,Ve=Ve||0,0),Xe}getTile(_e,Le,Ve){const Xe=this.trees[this._limitZoom(_e)],et=Math.pow(2,_e),{extent:ct,radius:ot}=this.options,nt=ot/ct,ft=(Ve-nt)/et,wt=(Ve+1+nt)/et,zt={features:[]};return this._addTileFeatures(Xe.range((Le-nt)/et,ft,(Le+1+nt)/et,wt),Xe.points,Le,Ve,et,zt),Le===0&&this._addTileFeatures(Xe.range(1-nt/et,ft,1,wt),Xe.points,et,Ve,et,zt),Le===et-1&&this._addTileFeatures(Xe.range(0,ft,nt/et,wt),Xe.points,-1,Ve,et,zt),zt.features.length?zt:null}getClusterExpansionZoom(_e){let Le=this._getOriginZoom(_e)-1;for(;Le<=this.options.maxZoom;){const Ve=this.getChildren(_e);if(Le++,Ve.length!==1)break;_e=Ve[0].properties.cluster_id}return Le}_appendLeaves(_e,Le,Ve,Xe,et){const ct=this.getChildren(Le);for(const ot of ct){const nt=ot.properties;if(nt&&nt.cluster?et+nt.point_count<=Xe?et+=nt.point_count:et=this._appendLeaves(_e,nt.cluster_id,Ve,Xe,et):et<Xe?et++:_e.push(ot),_e.length===Ve)break}return et}_addTileFeatures(_e,Le,Ve,Xe,et,ct){for(const ot of _e){const nt=Le[ot],ft=nt.numPoints;let wt,zt,Rt;if(ft)wt=Me(nt),zt=nt.x,Rt=nt.y;else{const gi=this.points[nt.index];wt=gi.properties,zt=Re(gi.geometry.coordinates[0]),Rt=me(gi.geometry.coordinates[1])}const ci={type:1,geometry:[[Math.round(this.options.extent*(zt*et-Ve)),Math.round(this.options.extent*(Rt*et-Xe))]],tags:wt};let Wt;ft?Wt=nt.id:this.options.generateId?Wt=nt.index:this.points[nt.index].id&&(Wt=this.points[nt.index].id),Wt!==void 0&&(ci.id=Wt),ct.features.push(ci)}}_limitZoom(_e){return Math.max(this.options.minZoom,Math.min(Math.floor(+_e),this.options.maxZoom+1))}_cluster(_e,Le){const Ve=[],{radius:Xe,extent:et,reduce:ct,minPoints:ot}=this.options,nt=Xe/(et*Math.pow(2,Le));for(let ft=0;ft<_e.length;ft++){const wt=_e[ft];if(wt.zoom<=Le)continue;wt.zoom=Le;const zt=this.trees[Le+1],Rt=zt.within(wt.x,wt.y,nt),ci=wt.numPoints||1;let Wt=ci;for(const gi of Rt){const vi=zt.points[gi];vi.zoom>Le&&(Wt+=vi.numPoints||1)}if(Wt>ci&&Wt>=ot){let gi=wt.x*ci,vi=wt.y*ci,Vi=ct&&ci>1?this._map(wt,!0):null;const $i=(ft<<5)+(Le+1)+this.points.length;for(const Hi of Rt){const mi=zt.points[Hi];if(mi.zoom<=Le)continue;mi.zoom=Le;const Ri=mi.numPoints||1;gi+=mi.x*Ri,vi+=mi.y*Ri,mi.parentId=$i,ct&&(Vi||(Vi=this._map(wt,!0)),ct(Vi,this._map(mi)))}wt.parentId=$i,Ve.push(ve(gi/Wt,vi/Wt,$i,Wt,Vi))}else if(Ve.push(wt),Wt>1)for(const gi of Rt){const vi=zt.points[gi];vi.zoom<=Le||(vi.zoom=Le,Ve.push(vi))}}return Ve}_getOriginId(_e){return _e-this.points.length>>5}_getOriginZoom(_e){return(_e-this.points.length)%32}_map(_e,Le){if(_e.numPoints)return Le?Ue({},_e.properties):_e.properties;const Ve=this.points[_e.index].properties,Xe=this.options.map(Ve);return Le&&Xe===Ve?Ue({},Xe):Xe}}function ve(We,_e,Le,Ve,Xe){return{x:ee(We),y:ee(_e),zoom:1/0,id:Le,parentId:-1,numPoints:Ve,properties:Xe}}function Ce(We,_e){const[Le,Ve]=We.geometry.coordinates;return{x:ee(Re(Le)),y:ee(me(Ve)),zoom:1/0,index:_e,parentId:-1}}function je(We){return{type:"Feature",id:We.id,properties:Me(We),geometry:{type:"Point",coordinates:[(_e=We.x,360*(_e-.5)),De(We.y)]}};var _e}function Me(We){const _e=We.numPoints,Le=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e;return Ue(Ue({},We.properties),{cluster:!0,cluster_id:We.id,point_count:_e,point_count_abbreviated:Le})}function Re(We){return We/360+.5}function me(We){const _e=Math.sin(We*Math.PI/180),Le=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Le<0?0:Le>1?1:Le}function De(We){const _e=(180-360*We)*Math.PI/180;return 360*Math.atan(Math.exp(_e))/Math.PI-90}function Ue(We,_e){for(const Le in _e)We[Le]=_e[Le];return We}function Pe(We){return We.x}function Te(We){return We.y}function Ie(We,_e,Le,Ve){for(var Xe,et=Ve,ct=Le-_e>>1,ot=Le-_e,nt=We[_e],ft=We[_e+1],wt=We[Le],zt=We[Le+1],Rt=_e+3;Rt<Le;Rt+=3){var ci=Fe(We[Rt],We[Rt+1],nt,ft,wt,zt);if(ci>et)Xe=Rt,et=ci;else if(ci===et){var Wt=Math.abs(Rt-ct);Wt<ot&&(Xe=Rt,ot=Wt)}}et>Ve&&(Xe-_e>3&&Ie(We,_e,Xe,Ve),We[Xe+2]=et,Le-Xe>3&&Ie(We,Xe,Le,Ve))}function Fe(We,_e,Le,Ve,Xe,et){var ct=Xe-Le,ot=et-Ve;if(ct!==0||ot!==0){var nt=((We-Le)*ct+(_e-Ve)*ot)/(ct*ct+ot*ot);nt>1?(Le=Xe,Ve=et):nt>0&&(Le+=ct*nt,Ve+=ot*nt)}return(ct=We-Le)*ct+(ot=_e-Ve)*ot}function Oe(We,_e,Le,Ve){var Xe={id:We===void 0?null:We,type:_e,geometry:Le,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(et){var ct=et.geometry,ot=et.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")Ge(et,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var nt=0;nt<ct.length;nt++)Ge(et,ct[nt]);else if(ot==="MultiPolygon")for(nt=0;nt<ct.length;nt++)for(var ft=0;ft<ct[nt].length;ft++)Ge(et,ct[nt][ft])}(Xe),Xe}function Ge(We,_e){for(var Le=0;Le<_e.length;Le+=3)We.minX=Math.min(We.minX,_e[Le]),We.minY=Math.min(We.minY,_e[Le+1]),We.maxX=Math.max(We.maxX,_e[Le]),We.maxY=Math.max(We.maxY,_e[Le+1])}function Qe(We,_e,Le,Ve){if(_e.geometry){var Xe=_e.geometry.coordinates,et=_e.geometry.type,ct=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),ot=[],nt=_e.id;if(Le.promoteId?nt=_e.properties[Le.promoteId]:Le.generateId&&(nt=Ve||0),et==="Point")at(Xe,ot);else if(et==="MultiPoint")for(var ft=0;ft<Xe.length;ft++)at(Xe[ft],ot);else if(et==="LineString")rt(Xe,ot,ct,!1);else if(et==="MultiLineString"){if(Le.lineMetrics){for(ft=0;ft<Xe.length;ft++)rt(Xe[ft],ot=[],ct,!1),We.push(Oe(nt,"LineString",ot,_e.properties));return}dt(Xe,ot,ct,!1)}else if(et==="Polygon")dt(Xe,ot,ct,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(ft=0;ft<_e.geometry.geometries.length;ft++)Qe(We,{id:nt,geometry:_e.geometry.geometries[ft],properties:_e.properties},Le,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ft=0;ft<Xe.length;ft++){var wt=[];dt(Xe[ft],wt,ct,!0),ot.push(wt)}}We.push(Oe(nt,et,ot,_e.properties))}}function at(We,_e){_e.push(gt(We[0])),_e.push(Tt(We[1])),_e.push(0)}function rt(We,_e,Le,Ve){for(var Xe,et,ct=0,ot=0;ot<We.length;ot++){var nt=gt(We[ot][0]),ft=Tt(We[ot][1]);_e.push(nt),_e.push(ft),_e.push(0),ot>0&&(ct+=Ve?(Xe*ft-nt*et)/2:Math.sqrt(Math.pow(nt-Xe,2)+Math.pow(ft-et,2))),Xe=nt,et=ft}var wt=_e.length-3;_e[2]=1,Ie(_e,0,wt,Le),_e[wt+2]=1,_e.size=Math.abs(ct),_e.start=0,_e.end=_e.size}function dt(We,_e,Le,Ve){for(var Xe=0;Xe<We.length;Xe++){var et=[];rt(We[Xe],et,Le,Ve),_e.push(et)}}function gt(We){return We/360+.5}function Tt(We){var _e=Math.sin(We*Math.PI/180),Le=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Le<0?0:Le>1?1:Le}function Nt(We,_e,Le,Ve,Xe,et,ct,ot){if(Ve/=_e,et>=(Le/=_e)&&ct<Ve)return We;if(ct<Le||et>=Ve)return null;for(var nt=[],ft=0;ft<We.length;ft++){var wt=We[ft],zt=wt.geometry,Rt=wt.type,ci=Xe===0?wt.minX:wt.minY,Wt=Xe===0?wt.maxX:wt.maxY;if(ci>=Le&&Wt<Ve)nt.push(wt);else if(!(Wt<Le||ci>=Ve)){var gi=[];if(Rt==="Point"||Rt==="MultiPoint")mt(zt,gi,Le,Ve,Xe);else if(Rt==="LineString")St(zt,gi,Le,Ve,Xe,!1,ot.lineMetrics);else if(Rt==="MultiLineString")ii(zt,gi,Le,Ve,Xe,!1);else if(Rt==="Polygon")ii(zt,gi,Le,Ve,Xe,!0);else if(Rt==="MultiPolygon")for(var vi=0;vi<zt.length;vi++){var Vi=[];ii(zt[vi],Vi,Le,Ve,Xe,!0),Vi.length&&gi.push(Vi)}if(gi.length){if(ot.lineMetrics&&Rt==="LineString"){for(vi=0;vi<gi.length;vi++)nt.push(Oe(wt.id,Rt,gi[vi],wt.tags));continue}Rt!=="LineString"&&Rt!=="MultiLineString"||(gi.length===1?(Rt="LineString",gi=gi[0]):Rt="MultiLineString"),Rt!=="Point"&&Rt!=="MultiPoint"||(Rt=gi.length===3?"Point":"MultiPoint"),nt.push(Oe(wt.id,Rt,gi,wt.tags))}}}return nt.length?nt:null}function mt(We,_e,Le,Ve,Xe){for(var et=0;et<We.length;et+=3){var ct=We[et+Xe];ct>=Le&&ct<=Ve&&(_e.push(We[et]),_e.push(We[et+1]),_e.push(We[et+2]))}}function St(We,_e,Le,Ve,Xe,et,ct){for(var ot,nt,ft=kt(We),wt=Xe===0?Gt:hr,zt=We.start,Rt=0;Rt<We.length-3;Rt+=3){var ci=We[Rt],Wt=We[Rt+1],gi=We[Rt+2],vi=We[Rt+3],Vi=We[Rt+4],$i=Xe===0?ci:Wt,Hi=Xe===0?vi:Vi,mi=!1;ct&&(ot=Math.sqrt(Math.pow(ci-vi,2)+Math.pow(Wt-Vi,2))),$i<Le?Hi>Le&&(nt=wt(ft,ci,Wt,vi,Vi,Le),ct&&(ft.start=zt+ot*nt)):$i>Ve?Hi<Ve&&(nt=wt(ft,ci,Wt,vi,Vi,Ve),ct&&(ft.start=zt+ot*nt)):fi(ft,ci,Wt,gi),Hi<Le&&$i>=Le&&(nt=wt(ft,ci,Wt,vi,Vi,Le),mi=!0),Hi>Ve&&$i<=Ve&&(nt=wt(ft,ci,Wt,vi,Vi,Ve),mi=!0),!et&&mi&&(ct&&(ft.end=zt+ot*nt),_e.push(ft),ft=kt(We)),ct&&(zt+=ot)}var Ri=We.length-3;ci=We[Ri],Wt=We[Ri+1],gi=We[Ri+2],($i=Xe===0?ci:Wt)>=Le&&$i<=Ve&&fi(ft,ci,Wt,gi),Ri=ft.length-3,et&&Ri>=3&&(ft[Ri]!==ft[0]||ft[Ri+1]!==ft[1])&&fi(ft,ft[0],ft[1],ft[2]),ft.length&&_e.push(ft)}function kt(We){var _e=[];return _e.size=We.size,_e.start=We.start,_e.end=We.end,_e}function ii(We,_e,Le,Ve,Xe,et){for(var ct=0;ct<We.length;ct++)St(We[ct],_e,Le,Ve,Xe,et,!1)}function fi(We,_e,Le,Ve){We.push(_e),We.push(Le),We.push(Ve)}function Gt(We,_e,Le,Ve,Xe,et){var ct=(et-_e)/(Ve-_e);return We.push(et),We.push(Le+(Xe-Le)*ct),We.push(1),ct}function hr(We,_e,Le,Ve,Xe,et){var ct=(et-Le)/(Xe-Le);return We.push(_e+(Ve-_e)*ct),We.push(et),We.push(1),ct}function rr(We,_e){for(var Le=[],Ve=0;Ve<We.length;Ve++){var Xe,et=We[Ve],ct=et.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Xe=yr(et.geometry,_e);else if(ct==="MultiLineString"||ct==="Polygon"){Xe=[];for(var ot=0;ot<et.geometry.length;ot++)Xe.push(yr(et.geometry[ot],_e))}else if(ct==="MultiPolygon")for(Xe=[],ot=0;ot<et.geometry.length;ot++){for(var nt=[],ft=0;ft<et.geometry[ot].length;ft++)nt.push(yr(et.geometry[ot][ft],_e));Xe.push(nt)}Le.push(Oe(et.id,ct,Xe,et.tags))}return Le}function yr(We,_e){var Le=[];Le.size=We.size,We.start!==void 0&&(Le.start=We.start,Le.end=We.end);for(var Ve=0;Ve<We.length;Ve+=3)Le.push(We[Ve]+_e,We[Ve+1],We[Ve+2]);return Le}function Dr(We,_e){if(We.transformed)return We;var Le,Ve,Xe,et=1<<We.z,ct=We.x,ot=We.y;for(Le=0;Le<We.features.length;Le++){var nt=We.features[Le],ft=nt.geometry,wt=nt.type;if(nt.geometry=[],wt===1)for(Ve=0;Ve<ft.length;Ve+=2)nt.geometry.push(nr(ft[Ve],ft[Ve+1],_e,et,ct,ot));else for(Ve=0;Ve<ft.length;Ve++){var zt=[];for(Xe=0;Xe<ft[Ve].length;Xe+=2)zt.push(nr(ft[Ve][Xe],ft[Ve][Xe+1],_e,et,ct,ot));nt.geometry.push(zt)}}return We.transformed=!0,We}function nr(We,_e,Le,Ve,Xe,et){return[Math.round(Le*(We*Ve-Xe)),Math.round(Le*(_e*Ve-et))]}function vr(We,_e,Le,Ve,Xe){for(var et=_e===Xe.maxZoom?0:Xe.tolerance/((1<<_e)*Xe.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:Ve,z:_e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<We.length;ot++){ct.numFeatures++,ht(ct,We[ot],et,Xe);var nt=We[ot].minX,ft=We[ot].minY,wt=We[ot].maxX,zt=We[ot].maxY;nt<ct.minX&&(ct.minX=nt),ft<ct.minY&&(ct.minY=ft),wt>ct.maxX&&(ct.maxX=wt),zt>ct.maxY&&(ct.maxY=zt)}return ct}function ht(We,_e,Le,Ve){var Xe=_e.geometry,et=_e.type,ct=[];if(et==="Point"||et==="MultiPoint")for(var ot=0;ot<Xe.length;ot+=3)ct.push(Xe[ot]),ct.push(Xe[ot+1]),We.numPoints++,We.numSimplified++;else if(et==="LineString")bt(ct,Xe,We,Le,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(ot=0;ot<Xe.length;ot++)bt(ct,Xe[ot],We,Le,et==="Polygon",ot===0);else if(et==="MultiPolygon")for(var nt=0;nt<Xe.length;nt++){var ft=Xe[nt];for(ot=0;ot<ft.length;ot++)bt(ct,ft[ot],We,Le,!0,ot===0)}if(ct.length){var wt=_e.tags||null;if(et==="LineString"&&Ve.lineMetrics){for(var zt in wt={},_e.tags)wt[zt]=_e.tags[zt];wt.mapbox_clip_start=Xe.start/Xe.size,wt.mapbox_clip_end=Xe.end/Xe.size}var Rt={geometry:ct,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:wt};_e.id!==null&&(Rt.id=_e.id),We.features.push(Rt)}}function bt(We,_e,Le,Ve,Xe,et){var ct=Ve*Ve;if(Ve>0&&_e.size<(Xe?ct:Ve))Le.numPoints+=_e.length/3;else{for(var ot=[],nt=0;nt<_e.length;nt+=3)(Ve===0||_e[nt+2]>ct)&&(Le.numSimplified++,ot.push(_e[nt]),ot.push(_e[nt+1])),Le.numPoints++;Xe&&function(ft,wt){for(var zt=0,Rt=0,ci=ft.length,Wt=ci-2;Rt<ci;Wt=Rt,Rt+=2)zt+=(ft[Rt]-ft[Wt])*(ft[Rt+1]+ft[Wt+1]);if(zt>0===wt)for(Rt=0,ci=ft.length;Rt<ci/2;Rt+=2){var gi=ft[Rt],vi=ft[Rt+1];ft[Rt]=ft[ci-2-Rt],ft[Rt+1]=ft[ci-1-Rt],ft[ci-2-Rt]=gi,ft[ci-1-Rt]=vi}}(ot,et),We.push(ot)}}function Mt(We,_e){var Le=(_e=this.options=function(Xe,et){for(var ct in et)Xe[ct]=et[ct];return Xe}(Object.create(this.options),_e)).debug;if(Le&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve=function(Xe,et){var ct=[];if(Xe.type==="FeatureCollection")for(var ot=0;ot<Xe.features.length;ot++)Qe(ct,Xe.features[ot],et,ot);else Qe(ct,Xe.type==="Feature"?Xe:{geometry:Xe},et);return ct}(We,_e);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ve=function(Xe,et){var ct=et.buffer/et.extent,ot=Xe,nt=Nt(Xe,1,-1-ct,ct,0,-1,2,et),ft=Nt(Xe,1,1-ct,2+ct,0,-1,2,et);return(nt||ft)&&(ot=Nt(Xe,1,-ct,1+ct,0,-1,2,et)||[],nt&&(ot=rr(nt,1).concat(ot)),ft&&(ot=ot.concat(rr(ft,-1)))),ot}(Ve,_e),Ve.length&&this.splitTile(Ve,0,0,0),Le&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $t(We,_e,Le){return 32*((1<<We)*Le+_e)+We}function Zt(We,_e){const Le=We.tileID.canonical;if(!this._geoJSONIndex)return _e(null,null);const Ve=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!Ve)return _e(null,null);const Xe=new S(Ve.features);let et=N.exports(Xe);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),_e(null,{vectorTile:Xe,rawData:et.buffer})}Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(We,_e,Le,Ve,Xe,et,ct){for(var ot=[We,_e,Le,Ve],nt=this.options,ft=nt.debug;ot.length;){Ve=ot.pop(),Le=ot.pop(),_e=ot.pop(),We=ot.pop();var wt=1<<_e,zt=$t(_e,Le,Ve),Rt=this.tiles[zt];if(!Rt&&(ft>1&&console.time("creation"),Rt=this.tiles[zt]=vr(We,_e,Le,Ve,nt),this.tileCoords.push({z:_e,x:Le,y:Ve}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,Le,Ve,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));var ci="z"+_e;this.stats[ci]=(this.stats[ci]||0)+1,this.total++}if(Rt.source=We,Xe){if(_e===nt.maxZoom||_e===Xe)continue;var Wt=1<<Xe-_e;if(Le!==Math.floor(et/Wt)||Ve!==Math.floor(ct/Wt))continue}else if(_e===nt.indexMaxZoom||Rt.numPoints<=nt.indexMaxPoints)continue;if(Rt.source=null,We.length!==0){ft>1&&console.time("clipping");var gi,vi,Vi,$i,Hi,mi,Ri=.5*nt.buffer/nt.extent,Zr=.5-Ri,nn=.5+Ri,Cn=1+Ri;gi=vi=Vi=$i=null,Hi=Nt(We,wt,Le-Ri,Le+nn,0,Rt.minX,Rt.maxX,nt),mi=Nt(We,wt,Le+Zr,Le+Cn,0,Rt.minX,Rt.maxX,nt),We=null,Hi&&(gi=Nt(Hi,wt,Ve-Ri,Ve+nn,1,Rt.minY,Rt.maxY,nt),vi=Nt(Hi,wt,Ve+Zr,Ve+Cn,1,Rt.minY,Rt.maxY,nt),Hi=null),mi&&(Vi=Nt(mi,wt,Ve-Ri,Ve+nn,1,Rt.minY,Rt.maxY,nt),$i=Nt(mi,wt,Ve+Zr,Ve+Cn,1,Rt.minY,Rt.maxY,nt),mi=null),ft>1&&console.timeEnd("clipping"),ot.push(gi||[],_e+1,2*Le,2*Ve),ot.push(vi||[],_e+1,2*Le,2*Ve+1),ot.push(Vi||[],_e+1,2*Le+1,2*Ve),ot.push($i||[],_e+1,2*Le+1,2*Ve+1)}}},Mt.prototype.getTile=function(We,_e,Le){var Ve=this.options,Xe=Ve.extent,et=Ve.debug;if(We<0||We>24)return null;var ct=1<<We,ot=$t(We,_e=(_e%ct+ct)%ct,Le);if(this.tiles[ot])return Dr(this.tiles[ot],Xe);et>1&&console.log("drilling down to z%d-%d-%d",We,_e,Le);for(var nt,ft=We,wt=_e,zt=Le;!nt&&ft>0;)ft--,wt=Math.floor(wt/2),zt=Math.floor(zt/2),nt=this.tiles[$t(ft,wt,zt)];return nt&&nt.source?(et>1&&console.log("found parent tile z%d-%d-%d",ft,wt,zt),et>1&&console.time("drilling down"),this.splitTile(nt.source,ft,wt,zt,We,_e,Le),et>1&&console.timeEnd("drilling down"),this.tiles[ot]?Dr(this.tiles[ot],Xe):null):null};class ki extends _{constructor(_e,Le,Ve,Xe){super(_e,Le,Ve,Zt),Xe&&(this.loadGeoJSON=Xe)}loadData(_e,Le){var Ve;(Ve=this._pendingRequest)===null||Ve===void 0||Ve.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Xe=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new s.RequestPerformance(_e.request);this._pendingCallback=Le,this._pendingRequest=this.loadGeoJSON(_e,(et,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,et||!ct)return Le(et);if(typeof ct!="object")return Le(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));{k(ct,!0);try{if(_e.filter){const nt=s.createExpression(_e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(wt=>`${wt.key}: ${wt.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(wt=>nt.value.evaluate({zoom:0},wt))}}this._geoJSONIndex=_e.cluster?new ue(function({superclusterOptions:nt,clusterProperties:ft}){if(!ft||!nt)return nt;const wt={},zt={},Rt={accumulated:null,zoom:0},ci={properties:null},Wt=Object.keys(ft);for(const gi of Wt){const[vi,Vi]=ft[gi],$i=s.createExpression(Vi),Hi=s.createExpression(typeof vi=="string"?[vi,["accumulated"],["get",gi]]:vi);wt[gi]=$i.value,zt[gi]=Hi.value}return nt.map=gi=>{ci.properties=gi;const vi={};for(const Vi of Wt)vi[Vi]=wt[Vi].evaluate(Rt,ci);return vi},nt.reduce=(gi,vi)=>{ci.properties=vi;for(const Vi of Wt)Rt.accumulated=gi[Vi],gi[Vi]=zt[Vi].evaluate(Rt,ci)},nt}(_e)).load(ct.features):function(nt,ft){return new Mt(nt,ft)}(ct,_e.geojsonVtOptions)}catch(nt){return Le(nt)}this.loaded={};const ot={};if(Xe){const nt=Xe.finish();nt&&(ot.resourceTiming={},ot.resourceTiming[_e.source]=JSON.parse(JSON.stringify(nt)))}Le(null,ot)}})}reloadTile(_e,Le){const Ve=this.loaded;return Ve&&Ve[_e.uid]?super.reloadTile(_e,Le):this.loadTile(_e,Le)}loadGeoJSON(_e,Le){if(_e.request)return s.getJSON(_e.request,Le);if(typeof _e.data=="string")try{Le(null,JSON.parse(_e.data))}catch{Le(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`))}else Le(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(_e,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()}getClusterExpansionZoom(_e,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(_e.clusterId))}catch(Ve){Le(Ve)}}getClusterChildren(_e,Le){try{Le(null,this._geoJSONIndex.getChildren(_e.clusterId))}catch(Ve){Le(Ve)}}getClusterLeaves(_e,Le){try{Le(null,this._geoJSONIndex.getLeaves(_e.clusterId,_e.limit,_e.offset))}catch(Ve){Le(Ve)}}}class Di{constructor(_e){this.self=_e,this.actor=new s.Actor(_e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_,geojson:ki},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Le,Ve)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=Ve},this.self.registerRTLTextPlugin=Le=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Le.applyArabicShaping,s.plugin.processBidirectionalText=Le.processBidirectionalText,s.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}}setReferrer(_e,Le){this.referrer=Le}setImages(_e,Le,Ve){this.availableImages[_e]=Le;for(const Xe in this.workerSources[_e]){const et=this.workerSources[_e][Xe];for(const ct in et)et[ct].availableImages=Le}Ve()}setLayers(_e,Le,Ve){this.getLayerIndex(_e).replace(Le),Ve()}updateLayers(_e,Le,Ve){this.getLayerIndex(_e).update(Le.layers,Le.removedIds),Ve()}loadTile(_e,Le,Ve){this.getWorkerSource(_e,Le.type,Le.source).loadTile(Le,Ve)}loadDEMTile(_e,Le,Ve){this.getDEMWorkerSource(_e,Le.source).loadTile(Le,Ve)}reloadTile(_e,Le,Ve){this.getWorkerSource(_e,Le.type,Le.source).reloadTile(Le,Ve)}abortTile(_e,Le,Ve){this.getWorkerSource(_e,Le.type,Le.source).abortTile(Le,Ve)}removeTile(_e,Le,Ve){this.getWorkerSource(_e,Le.type,Le.source).removeTile(Le,Ve)}removeDEMTile(_e,Le){this.getDEMWorkerSource(_e,Le.source).removeTile(Le)}removeSource(_e,Le,Ve){if(!this.workerSources[_e]||!this.workerSources[_e][Le.type]||!this.workerSources[_e][Le.type][Le.source])return;const Xe=this.workerSources[_e][Le.type][Le.source];delete this.workerSources[_e][Le.type][Le.source],Xe.removeSource!==void 0?Xe.removeSource(Le,Ve):Ve()}loadWorkerSource(_e,Le,Ve){try{this.self.importScripts(Le.url),Ve()}catch(Xe){Ve(Xe.toString())}}syncRTLPluginState(_e,Le,Ve){try{s.plugin.setState(Le);const Xe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);const et=s.plugin.isParsed();Ve(et?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Xe}`),et)}}catch(Xe){Ve(Xe.toString())}}getAvailableImages(_e){let Le=this.availableImages[_e];return Le||(Le=[]),Le}getLayerIndex(_e){let Le=this.layerIndexes[_e];return Le||(Le=this.layerIndexes[_e]=new m),Le}getWorkerSource(_e,Le,Ve){if(this.workerSources[_e]||(this.workerSources[_e]={}),this.workerSources[_e][Le]||(this.workerSources[_e][Le]={}),!this.workerSources[_e][Le][Ve]){const Xe={send:(et,ct,ot)=>{this.actor.send(et,ct,ot,_e)}};this.workerSources[_e][Le][Ve]=new this.workerSourceTypes[Le](Xe,this.getLayerIndex(_e),this.getAvailableImages(_e))}return this.workerSources[_e][Le][Ve]}getDEMWorkerSource(_e,Le){return this.demWorkerSources[_e]||(this.demWorkerSources[_e]={}),this.demWorkerSources[_e][Le]||(this.demWorkerSources[_e][Le]=new T),this.demWorkerSources[_e][Le]}enforceCacheSizeLimit(_e,Le){s.enforceCacheSizeLimit(Le)}}return s.isWorker()&&(self.worker=new Di(self)),Di}),a(["./shared"],function(s){var h=f;function f(I){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,D,U=new Blob([""],{type:"text/javascript"}),te=URL.createObjectURL(U);try{D=new Worker(te),C=!0}catch{C=!1}return D&&D.terminate(),URL.revokeObjectURL(te),C}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var C=document.createElement("canvas");C.width=C.height=1;var D=C.getContext("2d");if(!D)return!1;var U=D.getImageData(0,0,1,1);return U&&U.width===C.width}()?(m[p=l&&l.failIfMajorPerformanceCaveat]===void 0&&(m[p]=function(C){var D,U=function(te){var pe=document.createElement("canvas"),ge=Object.create(f.webGLContextAttributes);return ge.failIfMajorPerformanceCaveat=te,pe.getContext("webgl",ge)||pe.getContext("experimental-webgl",ge)}(C);if(!U)return!1;try{D=U.createShader(U.VERTEX_SHADER)}catch{return!1}return!(!D||U.isContextLost())&&(U.shaderSource(D,"void main() {}"),U.compileShader(D),U.getShaderParameter(D,U.COMPILE_STATUS)===!0)}(p)),m[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(I)}var m={};function y(I,l){if(Array.isArray(I)){if(!Array.isArray(l)||I.length!==l.length)return!1;for(let p=0;p<I.length;p++)if(!y(I[p],l[p]))return!1;return!0}if(typeof I=="object"&&I!==null&&l!==null){if(typeof l!="object"||Object.keys(I).length!==Object.keys(l).length)return!1;for(const p in I)if(!y(I[p],l[p]))return!1;return!0}return I===l}f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class g{static testProp(l){if(!g.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in g.docStyle)return l[p];return l[0]}static create(l,p,C){const D=window.document.createElement(l);return p!==void 0&&(D.className=p),C&&C.appendChild(D),D}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(l,p){l.style[g.transformProp]=p}static addEventListener(l,p,C,D={}){l.addEventListener(p,C,"passive"in D?D:D.capture)}static removeEventListener(l,p,C,D={}){l.removeEventListener(p,C,"passive"in D?D:D.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(l,p){const C=l.getBoundingClientRect();return new s.pointGeometry(p.clientX-C.left-l.clientLeft,p.clientY-C.top-l.clientTop)}static touchPos(l,p){const C=l.getBoundingClientRect(),D=[];for(let U=0;U<p.length;U++)D.push(new s.pointGeometry(p[U].clientX-C.left-l.clientLeft,p[U].clientY-C.top-l.clientTop));return D}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);class b{constructor(l){this._transformRequestFn=l}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}normalizeSpriteURL(l,p,C){const D=function(U){const te=U.match(v);if(!te)throw new Error(`Unable to parse URL "${U}"`);return{protocol:te[1],authority:te[2],path:te[3]||"/",params:te[4]?te[4].split("&"):[]}}(l);return D.path+=`${p}${C}`,function(U){const te=U.params.length?`?${U.params.join("&")}`:"";return`${U.protocol}://${U.authority}${U.path}${te}`}(D)}setTransformRequest(l){this._transformRequestFn=l}}const v=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class _{constructor(l,p,C,D){this.context=l,this.format=C,this.texture=l.gl.createTexture(),this.update(p,D)}update(l,p,C){const{width:D,height:U}=l,te=!(this.size&&this.size[0]===D&&this.size[1]===U||C),{context:pe}=this,{gl:ge}=pe;if(this.useMipmap=!!(p&&p.useMipmap),ge.bindTexture(ge.TEXTURE_2D,this.texture),pe.pixelStoreUnpackFlipY.set(!1),pe.pixelStoreUnpack.set(1),pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===ge.RGBA&&(!p||p.premultiply!==!1)),te)this.size=[D,U],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.isImageBitmap(l)?ge.texImage2D(ge.TEXTURE_2D,0,this.format,this.format,ge.UNSIGNED_BYTE,l):ge.texImage2D(ge.TEXTURE_2D,0,this.format,D,U,0,this.format,ge.UNSIGNED_BYTE,l.data);else{const{x:ke,y:Be}=C||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.isImageBitmap(l)?ge.texSubImage2D(ge.TEXTURE_2D,0,ke,Be,ge.RGBA,ge.UNSIGNED_BYTE,l):ge.texSubImage2D(ge.TEXTURE_2D,0,ke,Be,D,U,ge.RGBA,ge.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ge.generateMipmap(ge.TEXTURE_2D)}bind(l,p,C){const{context:D}=this,{gl:U}=D;U.bindTexture(U.TEXTURE_2D,this.texture),C!==U.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=U.LINEAR),l!==this.filter&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,l),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,C||l),this.filter=l),p!==this.wrap&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,p),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function T(I){const{userImage:l}=I;return!!(l&&l.render&&l.render())&&(I.data.replace(new Uint8Array(l.data.buffer)),!0)}class k extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,callback:C}of this.requestors)this._notify(p,C);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const D of l){if(D[0]<C||D[1]<D[0]||p<D[1])return!1;C=D[1]}return!0}_validateContent(l,p){return!(l&&(l.length!==4||l[0]<0||p.data.width<l[0]||l[1]<0||p.data.height<l[1]||l[2]<0||p.data.width<l[2]||l[3]<0||p.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,p){const C=this.images[l];if(C.data.width!==p.data.width||C.data.height!==p.data.height)throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=C.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,p){let C=!0;if(!this.isLoaded())for(const D of l)this.images[D]||(C=!1);this.isLoaded()||C?this._notify(l,p):this.requestors.push({ids:l,callback:p})}_notify(l,p){const C={};for(const D of l){this.images[D]||this.fire(new s.Event("styleimagemissing",{id:D}));const U=this.images[D];U?C[D]={data:U.data.clone(),pixelRatio:U.pixelRatio,sdf:U.sdf,version:U.version,stretchX:U.stretchX,stretchY:U.stretchY,content:U.content,hasRenderCallback:!!(U.userImage&&U.userImage.render)}:s.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,C)}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const D={w:C.data.width+2,h:C.data.height+2,x:0,y:0},U=new s.ImagePosition(D,C);this.patterns[l]={bin:D,position:U}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const U in this.patterns)l.push(this.patterns[U].bin);const{w:p,h:C}=s.potpack(l),D=this.atlasImage;D.resize({width:p||1,height:C||1});for(const U in this.patterns){const{bin:te}=this.patterns[U],pe=te.x+1,ge=te.y+1,ke=this.images[U].data,Be=ke.width,He=ke.height;s.RGBAImage.copy(ke,D,{x:0,y:0},{x:pe,y:ge},{width:Be,height:He}),s.RGBAImage.copy(ke,D,{x:0,y:He-1},{x:pe,y:ge-1},{width:Be,height:1}),s.RGBAImage.copy(ke,D,{x:0,y:0},{x:pe,y:ge+He},{width:Be,height:1}),s.RGBAImage.copy(ke,D,{x:Be-1,y:0},{x:pe-1,y:ge},{width:1,height:He}),s.RGBAImage.copy(ke,D,{x:0,y:0},{x:pe+Be,y:ge},{width:1,height:He})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.images[p];C||s.warnOnce(`Image with ID: "${p}" was not found`),T(C)&&this.updateImage(p,C)}}}const w=1e20;function E(I,l,p,C,D,U,te,pe,ge){for(let ke=l;ke<l+C;ke++)A(I,p*U+ke,U,D,te,pe,ge);for(let ke=p;ke<p+D;ke++)A(I,ke*U+l,1,C,te,pe,ge)}function A(I,l,p,C,D,U,te){U[0]=0,te[0]=-1e20,te[1]=w,D[0]=I[l];for(let pe=1,ge=0,ke=0;pe<C;pe++){D[pe]=I[l+pe*p];const Be=pe*pe;do{const He=U[ge];ke=(D[pe]-D[He]+Be-He*He)/(pe-He)/2}while(ke<=te[ge]&&--ge>-1);ge++,U[ge]=pe,te[ge]=ke,te[ge+1]=w}for(let pe=0,ge=0;pe<C;pe++){for(;te[ge+1]<pe;)ge++;const ke=U[ge],Be=pe-ke;I[l+pe*p]=D[ke]+Be*Be}}class M{constructor(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}}setURL(l){this.url=l}getGlyphs(l,p){const C=[];for(const D in l)for(const U of l[D])C.push({stack:D,id:U});s.asyncAll(C,({stack:D,id:U},te)=>{let pe=this.entries[D];pe||(pe=this.entries[D]={glyphs:{},requests:{},ranges:{}});let ge=pe.glyphs[U];if(ge!==void 0)return void te(null,{stack:D,id:U,glyph:ge});if(ge=this._tinySDF(pe,D,U),ge)return pe.glyphs[U]=ge,void te(null,{stack:D,id:U,glyph:ge});const ke=Math.floor(U/256);if(256*ke>65535)return void te(new Error("glyphs > 65535 not supported"));if(pe.ranges[ke])return void te(null,{stack:D,id:U,glyph:ge});let Be=pe.requests[ke];Be||(Be=pe.requests[ke]=[],M.loadGlyphRange(D,ke,this.url,this.requestManager,(He,Ye)=>{if(Ye){for(const it in Ye)this._doesCharSupportLocalGlyph(+it)||(pe.glyphs[+it]=Ye[+it]);pe.ranges[ke]=!0}for(const it of Be)it(He,Ye);delete pe.requests[ke]})),Be.push((He,Ye)=>{He?te(He):Ye&&te(null,{stack:D,id:U,glyph:Ye[U]||null})})},(D,U)=>{if(D)p(D);else if(U){const te={};for(const{stack:pe,id:ge,glyph:ke}of U)(te[pe]||(te[pe]={}))[ge]=ke&&{id:ke.id,bitmap:ke.bitmap.clone(),metrics:ke.metrics};p(null,te)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](l)||s.unicodeBlockLookup["Hangul Syllables"](l)||s.unicodeBlockLookup.Hiragana(l)||s.unicodeBlockLookup.Katakana(l))}_tinySDF(l,p,C){const D=this.localIdeographFontFamily;if(!D||!this._doesCharSupportLocalGlyph(C))return;let U=l.tinySDF;if(!U){let pe="400";/bold/i.test(p)?pe="900":/medium/i.test(p)?pe="500":/light/i.test(p)&&(pe="200"),U=l.tinySDF=new M.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:D,fontWeight:pe})}const te=U.draw(String.fromCharCode(C));return{id:C,bitmap:new s.AlphaImage({width:te.width||30,height:te.height||30},te.data),metrics:{width:te.glyphWidth||24,height:te.glyphHeight||24,left:te.glyphLeft||0,top:te.glyphTop-27||-8,advance:te.glyphAdvance||24}}}}M.loadGlyphRange=function(I,l,p,C,D){const U=256*l,te=U+255,pe=C.transformRequest(p.replace("{fontstack}",I).replace("{range}",`${U}-${te}`),s.ResourceType.Glyphs);s.getArrayBuffer(pe,(ge,ke)=>{if(ge)D(ge);else if(ke){const Be={};for(const He of s.parseGlyphPbf(ke))Be[He.id]=He;D(null,Be)}})},M.TinySDF=class{constructor({fontSize:I=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:D="sans-serif",fontWeight:U="normal",fontStyle:te="normal"}={}){this.buffer=l,this.cutoff=C,this.radius=p;const pe=this.size=I+4*l,ge=this._createCanvas(pe),ke=this.ctx=ge.getContext("2d",{willReadFrequently:!0});ke.font=`${te} ${U} ${I}px ${D}`,ke.textBaseline="alphabetic",ke.textAlign="left",ke.fillStyle="black",this.gridOuter=new Float64Array(pe*pe),this.gridInner=new Float64Array(pe*pe),this.f=new Float64Array(pe),this.z=new Float64Array(pe+1),this.v=new Uint16Array(pe)}_createCanvas(I){const l=document.createElement("canvas");return l.width=l.height=I,l}draw(I){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:D,actualBoundingBoxRight:U}=this.ctx.measureText(I),te=Math.ceil(p),pe=Math.min(this.size-this.buffer,Math.ceil(U-D)),ge=Math.min(this.size-this.buffer,te+Math.ceil(C)),ke=pe+2*this.buffer,Be=ge+2*this.buffer,He=Math.max(ke*Be,0),Ye=new Uint8ClampedArray(He),it={data:Ye,width:ke,height:Be,glyphWidth:pe,glyphHeight:ge,glyphTop:te,glyphLeft:0,glyphAdvance:l};if(pe===0||ge===0)return it;const{ctx:Je,buffer:tt,gridInner:pt,gridOuter:yt}=this;Je.clearRect(tt,tt,pe,ge),Je.fillText(I,tt,tt+te);const Ct=Je.getImageData(tt,tt,pe,ge);yt.fill(w,0,He),pt.fill(0,0,He);for(let st=0;st<ge;st++)for(let It=0;It<pe;It++){const Et=Ct.data[4*(st*pe+It)+3]/255;if(Et===0)continue;const jt=(st+tt)*ke+It+tt;if(Et===1)yt[jt]=0,pt[jt]=w;else{const Ot=.5-Et;yt[jt]=Ot>0?Ot*Ot:0,pt[jt]=Ot<0?Ot*Ot:0}}E(yt,0,0,ke,Be,ke,this.f,this.v,this.z),E(pt,tt,tt,pe,ge,ke,this.f,this.v,this.z);for(let st=0;st<He;st++){const It=Math.sqrt(yt[st])-Math.sqrt(pt[st]);Ye[st]=Math.round(255-255*(It/this.radius+this.cutoff))}return it}};const S=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(I,l){return s.sphericalToCartesian(I.expression.evaluate(l))}interpolate(I,l,p){return{x:s.number(I.x,l.x,p),y:s.number(I.y,l.y,p),z:s.number(I.z,l.z,p)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),N="-transition";class Y extends s.Evented{constructor(l){super(),this._transitionable=new s.Transitionable(S),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(s.validateLight,l,p))for(const C in l){const D=l[C];C.endsWith(N)?this._transitionable.setTransition(C.slice(0,-N.length),D):this._transitionable.setValue(C,D)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Z{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const D=[];let U=l.length%2==1?-l[l.length-1]*C:0,te=l[0]*C,pe=!0;D.push({left:U,right:te,isDash:pe,zeroLength:l[0]===0});let ge=l[0];for(let ke=1;ke<l.length;ke++){pe=!pe;const Be=l[ke];U=ge*C,ge+=Be,te=ge*C,D.push({left:U,right:te,isDash:pe,zeroLength:Be===0})}return D}addRoundDash(l,p,C){const D=p/2;for(let U=-C;U<=C;U++){const te=this.width*(this.nextRow+C+U);let pe=0,ge=l[pe];for(let ke=0;ke<this.width;ke++){ke/ge.right>1&&(ge=l[++pe]);const Be=Math.abs(ke-ge.left),He=Math.abs(ke-ge.right),Ye=Math.min(Be,He);let it;const Je=U/C*(D+1);if(ge.isDash){const tt=D-Math.abs(Je);it=Math.sqrt(Ye*Ye+tt*tt)}else it=D-Math.sqrt(Ye*Ye+Je*Je);this.data[te+ke]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(l){for(let pe=l.length-1;pe>=0;--pe){const ge=l[pe],ke=l[pe+1];ge.zeroLength?l.splice(pe,1):ke&&ke.isDash===ge.isDash&&(ke.left=ge.left,l.splice(pe,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const D=this.width*this.nextRow;let U=0,te=l[U];for(let pe=0;pe<this.width;pe++){pe/te.right>1&&(te=l[++U]);const ge=Math.abs(pe-te.left),ke=Math.abs(pe-te.right),Be=Math.min(ge,ke);this.data[D+pe]=Math.max(0,Math.min(255,(te.isDash?Be:-Be)+128))}}addDash(l,p){const C=p?7:0,D=2*C+1;if(this.nextRow+D>this.height)return s.warnOnce("LineAtlas out of space"),null;let U=0;for(let pe=0;pe<l.length;pe++)U+=l[pe];if(U!==0){const pe=this.width/U,ge=this.getDashRanges(l,this.width,pe);p?this.addRoundDash(ge,pe,C):this.addRegularDash(ge)}const te={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:U};return this.nextRow+=D,this.dirty=!0,te}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}class K{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const C=this.workerPool.acquire(this.id);for(let D=0;D<C.length;D++){const U=new K.Actor(C[D],p,this.id);U.name=`Worker ${D}`,this.actors.push(U)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p,C){s.asyncAll(this.actors,(D,U)=>{D.send(l,p,U)},C=C||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function B(I,l,p){const C=function(D,U){if(D)return p(D);if(U){const te=s.pick(s.extend(U,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);U.vector_layers&&(te.vectorLayers=U.vector_layers,te.vectorLayerIds=te.vectorLayers.map(pe=>pe.id)),p(null,te)}};return I.url?s.getJSON(l.transformRequest(I.url,s.ResourceType.Source),C):s.exported.frame(()=>C(null,I))}K.Actor=s.Actor;class F{constructor(l,p,C){this.bounds=s.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*p),D=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*p),U=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*p),te=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*p);return l.x>=C&&l.x<U&&l.y>=D&&l.y<te}}class O extends s.Evented{constructor(l,p,C,D){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(p,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,(l,p)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new s.ErrorEvent(l)):p&&(s.extend(this,p),p.bounds&&(this.tileBounds=new F(p.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(l,p){const C=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),D={request:this.map._requestManager.transformRequest(C,s.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function U(te,pe){return delete l.request,l.aborted?p(null):te&&te.status!==404?p(te):(pe&&pe.resourceTiming&&(l.resourceTiming=pe.resourceTiming),this.map._refreshExpiredTiles&&pe&&l.setExpiryData(pe),l.loadVectorData(pe,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}D.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=p:l.request=l.actor.send("reloadTile",D,U.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",D,U.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class R extends s.Evented{constructor(l,p,C,D){super(),this.id=l,this.dispatcher=C,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},p),s.extend(this,s.pick(p,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,(l,p)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):p&&(s.extend(this,p),p.bounds&&(this.tileBounds=new F(p.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,p){const C=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=s.getImage(this.map._requestManager.transformRequest(C,s.ResourceType.Tile),(D,U,te)=>{if(delete l.request,l.aborted)l.state="unloaded",p(null);else if(D)l.state="errored",p(D);else if(U){this.map._refreshExpiredTiles&&l.setExpiryData(te);const pe=this.map.painter.context,ge=pe.gl;l.texture=this.map.painter.getTileTexture(U.width),l.texture?l.texture.update(U,{useMipmap:!0}):(l.texture=new _(pe,U,ge.RGBA,{useMipmap:!0}),l.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),pe.extTextureFilterAnisotropic&&ge.texParameterf(ge.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax)),l.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),p(null)}})}abortTile(l,p){l.request&&(l.request.cancel(),delete l.request),p()}unloadTile(l,p){l.texture&&this.map.painter.saveTileTexture(l.texture),p()}hasTransition(){return!1}}let L;class G extends R{constructor(l,p,C,D){super(l,p,C,D),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,p){const C=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function D(U,te){U&&(l.state="errored",p(U)),te&&(l.dem=te,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",p(null))}l.request=s.getImage(this.map._requestManager.transformRequest(C,s.ResourceType.Tile),(function(U,te){if(delete l.request,l.aborted)l.state="unloaded",p(null);else if(U)l.state="errored",p(U);else if(te){this.map._refreshExpiredTiles&&l.setExpiryData(te),delete te.cacheControl,delete te.expires;const pe=s.isImageBitmap(te)&&(L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L)?te:s.exported.getImageData(te,1),ge={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:pe,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",ge,D.bind(this)))}}).bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),D=(p.x-1+C)%C,U=p.x===0?l.wrap-1:l.wrap,te=(p.x+1+C)%C,pe=p.x+1===C?l.wrap+1:l.wrap,ge={};return ge[new s.OverscaledTileID(l.overscaledZ,U,p.z,D,p.y).key]={backfilled:!1},ge[new s.OverscaledTileID(l.overscaledZ,pe,p.z,te,p.y).key]={backfilled:!1},p.y>0&&(ge[new s.OverscaledTileID(l.overscaledZ,U,p.z,D,p.y-1).key]={backfilled:!1},ge[new s.OverscaledTileID(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},ge[new s.OverscaledTileID(l.overscaledZ,pe,p.z,te,p.y-1).key]={backfilled:!1}),p.y+1<C&&(ge[new s.OverscaledTileID(l.overscaledZ,U,p.z,D,p.y+1).key]={backfilled:!1},ge[new s.OverscaledTileID(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},ge[new s.OverscaledTileID(l.overscaledZ,pe,p.z,te,p.y+1).key]={backfilled:!1}),ge}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class V extends s.Evented{constructor(l,p,C,D){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(D),this._data=p.data,this._options=s.extend({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const U=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*U,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*U,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:s.EXTENT,radius:(p.clusterRadius||50)*U,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},p),this}getClusterChildren(l,p){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},p),this}getClusterLeaves(l,p,C,D){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:p,offset:C},D),this}_updateWorkerData(l){const p=s.extend({},this.workerOptions),C=this._data;typeof C=="string"?(p.request=this.map._requestManager.transformRequest(s.exported.resolveURL(C),s.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(C),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,p,(D,U)=>{if(this._pendingLoads--,this._removed||U&&U.abandoned)return void this.fire(new s.Event("dataabort",{dataType:"source",sourceDataType:l}));let te=null;if(U&&U.resourceTiming&&U.resourceTiming[this.id]&&(te=U.resourceTiming[this.id].slice(0)),D)return void this.fire(new s.ErrorEvent(D));const pe={dataType:"source",sourceDataType:l};this._collectResourceTiming&&te&&te.length>0&&s.extend(pe,{resourceTiming:te}),this.fire(new s.Event("data",pe))})}loaded(){return this._pendingLoads===0}loadTile(l,p){const C=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const D={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(C,D,(U,te)=>(delete l.request,l.unloadVectorData(),l.aborted?p(null):U?p(U):(l.loadVectorData(te,this.map.painter,C==="reloadTile"),p(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var $=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class q extends s.Evented{constructor(l,p,C,D){super(),this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=p}load(l,p){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(C,D)=>{this._loaded=!0,C?this.fire(new s.ErrorEvent(C)):D&&(this.image=D,l&&(this.coordinates=l),p&&p(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const p=l.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(D){let U=1/0,te=1/0,pe=-1/0,ge=-1/0;for(const Ye of D)U=Math.min(U,Ye.x),te=Math.min(te,Ye.y),pe=Math.max(pe,Ye.x),ge=Math.max(ge,Ye.y);const ke=Math.max(pe-U,ge-te),Be=Math.max(0,Math.floor(-Math.log(ke)/Math.LN2)),He=Math.pow(2,Be);return new s.CanonicalTileID(Be,Math.floor((U+pe)/2*He),Math.floor((te+ge)/2*He))}(p),this.minzoom=this.maxzoom=this.tileID.z;const C=p.map(D=>this.tileID.getTilePoint(D)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(C[0].x,C[0].y,0,0),this._boundsArray.emplaceBack(C[1].x,C[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(C[3].x,C[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(C[2].x,C[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,$.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const C in this.tiles){const D=this.tiles[C];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}loadTile(l,p){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},p(null)):(l.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class W extends q{constructor(l,p,C,D){super(l,p,C,D),this.roundZoom=!0,this.type="video",this.options=p}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,s.ResourceType.Source).url);s.getVideo(this.urls,(p,C)=>{this._loaded=!0,p?this.fire(new s.ErrorEvent(p)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,$.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new _(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const C in this.tiles){const D=this.tiles[C];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class se extends q{constructor(l,p,C,D){super(l,p,C,D),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(U=>!Array.isArray(U)||U.length!==2||U.some(te=>typeof te!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,$.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _(p,this.canvas,C.RGBA,{premultiply:!0});for(const D in this.tiles){const U=this.tiles[D];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const fe={vector:O,raster:R,"raster-dem":G,geojson:V,video:W,image:q,canvas:se};function re(I,l){const p=s.create();return s.translate(p,p,[1,1,0]),s.scale(p,p,[.5*I.width,.5*I.height,1]),s.multiply(p,p,I.calculatePosMatrix(l.toUnwrapped()))}function le(I,l,p,C,D,U){const te=function(He,Ye,it){if(He)for(const Je of He){const tt=Ye[Je];if(tt&&tt.source===it&&tt.type==="fill-extrusion")return!0}else for(const Je in Ye){const tt=Ye[Je];if(tt.source===it&&tt.type==="fill-extrusion")return!0}return!1}(D&&D.layers,l,I.id),pe=U.maxPitchScaleFactor(),ge=I.tilesIn(C,pe,te);ge.sort(Se);const ke=[];for(const He of ge)ke.push({wrappedTileID:He.tileID.wrapped().key,queryResults:He.tile.queryRenderedFeatures(l,p,I._state,He.queryGeometry,He.cameraQueryGeometry,He.scale,D,U,pe,re(I.transform,He.tileID))});const Be=function(He){const Ye={},it={};for(const Je of He){const tt=Je.queryResults,pt=Je.wrappedTileID,yt=it[pt]=it[pt]||{};for(const Ct in tt){const st=tt[Ct],It=yt[Ct]=yt[Ct]||{},Et=Ye[Ct]=Ye[Ct]||[];for(const jt of st)It[jt.featureIndex]||(It[jt.featureIndex]=!0,Et.push(jt))}}return Ye}(ke);for(const He in Be)Be[He].forEach(Ye=>{const it=Ye.feature,Je=I.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=Je});return Be}function Se(I,l){const p=I.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}class ye{constructor(l,p){this.tileID=l,this.uid=s.uniqueId(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const p=l+this.timeAdded;p<s.exported.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.textures.forEach(p=>l.saveTileTexture(p)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(D,U){const te={};if(!U)return te;for(const pe of D){const ge=pe.layerIds.map(ke=>U.getLayer(ke)).filter(Boolean);if(ge.length!==0){pe.layers=ge,pe.stateDependentLayerIds&&(pe.stateDependentLayers=pe.stateDependentLayerIds.map(ke=>ge.filter(Be=>Be.id===ke)[0]));for(const ke of ge)te[ke.id]=pe}}return te}(l.buckets,p.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const U=this.buckets[D];if(U instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!C)break;U.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const U=this.buckets[D];if(U instanceof s.SymbolBucket&&U.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const D in this.buckets){const U=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(D).queryRadius(U))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const D=this.buckets[C];D.uploadPending()&&D.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,D,U,te,pe,ge,ke,Be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:D,cameraQueryGeometry:U,scale:te,tileSize:this.tileSize,pixelPosMatrix:Be,transform:ge,params:pe,queryPadding:this.queryPadding*ke},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const D=C.loadVTLayers(),U=p?p.sourceLayer:"",te=D._geojsonTileLayer||D[U];if(!te)return;const pe=s.createFilter(p&&p.filter),{z:ge,x:ke,y:Be}=this.tileID.canonical,He={z:ge,x:ke,y:Be};for(let Ye=0;Ye<te.length;Ye++){const it=te.feature(Ye);if(pe.needGeometry){const pt=s.toEvaluationFeature(it,!0);if(!pe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!pe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),it))continue;const Je=C.getId(it,U),tt=new s.GeoJSONFeature(it,ge,ke,Be,Je);tt.tile=He,l.push(tt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=s.parseCacheControl(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let D=!1;if(this.expirationTime>C)D=!1;else if(p)if(this.expirationTime<p)D=!0;else{const U=this.expirationTime-p;U?this.expirationTime=C+Math.max(U,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!p.style.hasLayer(D))continue;const U=this.buckets[D],te=U.layers[0].sourceLayer||"_geojsonTileLayer",pe=C[te],ge=l[te];if(!pe||!ge||Object.keys(ge).length===0)continue;U.update(ge,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ke=p&&p.style&&p.style.getLayer(D);ke&&(this.queryPadding=Math.max(this.queryPadding,ke.queryRadius(U)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=s.exported.now()+l}setDependencies(l,p){const C={};for(const D of p)C[D]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const D=this.dependencies[C];if(D){for(const U of p)if(D[U])return!0}}return!1}}class Ee{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const D=l.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);const U={value:p,timeout:void 0};if(C!==void 0&&(U.timeout=setTimeout(()=>{this.remove(l,U)},C)),this.data[D].push(U),this.order.push(D),this.order.length>this.max){const te=this._getAndRemoveByKey(this.order[0]);te&&this.onRemove(te)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,D=p===void 0?0:this.data[C].indexOf(p),U=this.data[C][D];return this.data[C].splice(D,1),U.timeout&&clearTimeout(U.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(U.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const D of this.data[C])l(D.value)||p.push(D);for(const C of p)this.remove(C.value.tileID,C)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const D=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][D]=this.stateChanges[l][D]||{},s.extend(this.stateChanges[l][D],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const U in this.state[l])U!==D&&(this.deletedStates[l][U]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][D]===null){this.deletedStates[l][D]={};for(const U in this.state[l][D])C[U]||(this.deletedStates[l][D][U]=null)}else for(const U in C)this.deletedStates[l]&&this.deletedStates[l][D]&&this.deletedStates[l][D][U]===null&&delete this.deletedStates[l][D][U]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const D=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][D]!==null&&(this.deletedStates[l][D]=this.deletedStates[l][D]||{},this.deletedStates[l][D][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][D])for(C in this.deletedStates[l][D]={},this.stateChanges[l][D])this.deletedStates[l][D][C]=null;else this.deletedStates[l][D]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),D=s.extend({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const U=this.deletedStates[l][p];if(U===null)return{};for(const te in U)delete D[te]}return D}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const U={};for(const te in this.stateChanges[D])this.state[D][te]||(this.state[D][te]={}),s.extend(this.state[D][te],this.stateChanges[D][te]),U[te]=this.state[D][te];C[D]=U}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const U={};if(this.deletedStates[D]===null)for(const te in this.state[D])U[te]={},this.state[D][te]={};else for(const te in this.deletedStates[D]){if(this.deletedStates[D][te]===null)this.state[D][te]={};else for(const pe of Object.keys(this.deletedStates[D][te]))delete this.state[D][te][pe];U[te]=this.state[D][te]}C[D]=C[D]||{},s.extend(C[D],U)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const D in l)l[D].setFeatureState(C,p)}}class ie extends s.Evented{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",D=>{D.dataType==="source"&&D.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&D.dataType==="source"&&D.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(D,U,te,pe){const ge=new fe[U.type](D,U,te,pe);if(ge.id!==D)throw new Error(`Expected Source id to be ${D} instead of ${ge.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],ge),ge}(l,p,C,this),this._tiles={},this._cache=new Ee(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p){return this._source.loadTile(l,p)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new s.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(oe).map(l=>l.key)}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort((C,D)=>{const U=C.tileID,te=D.tileID,pe=new s.pointGeometry(U.canonical.x,U.canonical.y)._rotate(this.transform.angle),ge=new s.pointGeometry(te.canonical.x,te.canonical.y)._rotate(this.transform.angle);return U.overscaledZ-te.overscaledZ||ge.y-pe.y||ge.x-pe.x}).map(C=>C.tileID.key):p.map(C=>C.tileID).sort(oe).map(C=>C.key)}hasRenderableParent(l){const p=this.findLoadedParent(l,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(l,p){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(p||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,p){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),this._loadTile(C,this._tileLoaded.bind(this,C,l,p)))}_tileLoaded(l,p,C,D){if(D)return l.state="errored",void(D.status!==404?this._source.fire(new s.ErrorEvent(D,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=s.exported.now(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let D=0;D<p.length;D++){const U=p[D];if(l.neighboringTiles&&l.neighboringTiles[U]){const te=this.getTileByID(U);C(l,te),C(te,l)}}function C(D,U){D.needsHillshadePrepare=!0,D.needsTerrainPrepare=!0;let te=U.tileID.canonical.x-D.tileID.canonical.x;const pe=U.tileID.canonical.y-D.tileID.canonical.y,ge=Math.pow(2,D.tileID.canonical.z),ke=U.tileID.key;te===0&&pe===0||Math.abs(pe)>1||(Math.abs(te)>1&&(Math.abs(te+ge)===1?te+=ge:Math.abs(te-ge)===1&&(te-=ge)),U.dem&&D.dem&&(D.dem.backfillBorder(U.dem,te,pe),D.neighboringTiles&&D.neighboringTiles[ke]&&(D.neighboringTiles[ke].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p,C,D){for(const U in this._tiles){let te=this._tiles[U];if(D[U]||!te.hasData()||te.tileID.overscaledZ<=p||te.tileID.overscaledZ>C)continue;let pe=te.tileID;for(;te&&te.tileID.overscaledZ>p+1;){const ke=te.tileID.scaledTo(te.tileID.overscaledZ-1);te=this._tiles[ke.key],te&&te.hasData()&&(pe=ke)}let ge=pe;for(;ge.overscaledZ>p;)if(ge=ge.scaledTo(ge.overscaledZ-1),l[ge.key]){D[pe.key]=pe;break}}}findLoadedParent(l,p){if(l.key in this._loadedParentTiles){const C=this._loadedParentTiles[l.key];return C&&C.tileID.overscaledZ>=p?C:null}for(let C=l.overscaledZ-1;C>=p;C--){const D=l.scaledTo(C),U=this._getLoadedTile(D);if(U)return U}}_getLoadedTile(l){const p=this._tiles[l.key];return p&&p.hasData()?p:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,D=Math.floor(p*C*5),U=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(U)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const D in this._tiles){const U=this._tiles[D];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+p),C[U.tileID.key]=U}this._tiles=C;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}}update(l,p){if(this.transform=l,this.terrain=p,!this._sourceLoaded||this._paused)return;let C;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(ke=>new s.OverscaledTileID(ke.canonical.z,ke.wrap,ke.canonical.z,ke.canonical.x,ke.canonical.y)):(C=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(C=C.filter(ke=>this._source.hasTile(ke)))):C=[];const D=l.coveringZoomLevel(this._source),U=Math.max(D-ie.maxOverzooming,this._source.minzoom),te=Math.max(D+ie.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ke={};for(const Be of C)if(Be.canonical.z>this._source.minzoom){const He=Be.scaledTo(Be.canonical.z-1);ke[He.key]=He;const Ye=Be.scaledTo(Math.max(this._source.minzoom,Math.min(Be.canonical.z,5)));ke[Ye.key]=Ye}C=C.concat(Object.values(ke))}const pe=this._updateRetainedTiles(C,D);if(we(this._source.type)){const ke={},Be={},He=Object.keys(pe);for(const Ye of He){const it=pe[Ye],Je=this._tiles[Ye];if(!Je||Je.fadeEndTime&&Je.fadeEndTime<=s.exported.now())continue;const tt=this.findLoadedParent(it,U);tt&&(this._addTile(tt.tileID),ke[tt.tileID.key]=tt.tileID),Be[Ye]=it}this._retainLoadedChildren(Be,D,te,pe);for(const Ye in ke)pe[Ye]||(this._coveredTiles[Ye]=!0,pe[Ye]=ke[Ye]);if(p){const Ye={},it={};for(const Je of C)this._tiles[Je.key].hasData()?Ye[Je.key]=Je:it[Je.key]=Je;for(const Je in it){const tt=it[Je].children(this._source.maxzoom);this._tiles[tt[0].key]&&this._tiles[tt[1].key]&&this._tiles[tt[2].key]&&this._tiles[tt[3].key]&&(Ye[tt[0].key]=pe[tt[0].key]=tt[0],Ye[tt[1].key]=pe[tt[1].key]=tt[1],Ye[tt[2].key]=pe[tt[2].key]=tt[2],Ye[tt[3].key]=pe[tt[3].key]=tt[3],delete it[Je])}for(const Je in it){const tt=this.findLoadedParent(it[Je],this._source.minzoom);if(tt){Ye[tt.tileID.key]=pe[tt.tileID.key]=tt.tileID;for(const pt in Ye)Ye[pt].isChildOf(tt.tileID)&&delete Ye[pt]}}for(const Je in this._tiles)Ye[Je]||(this._coveredTiles[Je]=!0)}}for(const ke in pe)this._tiles[ke].clearFadeHold();const ge=s.keysDifference(this._tiles,pe);for(const ke of ge){const Be=this._tiles[ke];Be.hasSymbolBuckets&&!Be.holdingForFade()?Be.setHoldDuration(this.map._fadeDuration):Be.hasSymbolBuckets&&!Be.symbolFadeFinished()||this._removeTile(ke)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){const C={},D={},U=Math.max(p-ie.maxOverzooming,this._source.minzoom),te=Math.max(p+ie.maxUnderzooming,this._source.minzoom),pe={};for(const ge of l){const ke=this._addTile(ge);C[ge.key]=ge,ke.hasData()||p<this._source.maxzoom&&(pe[ge.key]=ge)}this._retainLoadedChildren(pe,p,te,C);for(const ge of l){let ke=this._tiles[ge.key];if(ke.hasData())continue;if(p+1>this._source.maxzoom){const He=ge.children(this._source.maxzoom)[0],Ye=this.getTile(He);if(Ye&&Ye.hasData()){C[He.key]=He;continue}}else{const He=ge.children(this._source.maxzoom);if(C[He[0].key]&&C[He[1].key]&&C[He[2].key]&&C[He[3].key])continue}let Be=ke.wasRequested();for(let He=ge.overscaledZ-1;He>=U;--He){const Ye=ge.scaledTo(He);if(D[Ye.key]||(D[Ye.key]=!0,ke=this.getTile(Ye),!ke&&Be&&(ke=this._addTile(Ye)),ke&&(C[Ye.key]=Ye,Be=ke.wasRequested(),ke.hasData())))break}}return C}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const p=[];let C,D=this._tiles[l].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){C=this._loadedParentTiles[D.key];break}p.push(D.key);const U=D.scaledTo(D.overscaledZ-1);if(C=this._getLoadedTile(U),C)break;D=U}for(const U of p)this._loadedParentTiles[U]=C}}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,p)));const C=p;return p||(p=new ye(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,l.key,p.state))),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new s.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},C))}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const D=[],U=this.transform;if(!U)return D;const te=C?U.getCameraQueryGeometry(l):l,pe=l.map(Je=>U.pointCoordinate(Je,this.terrain)),ge=te.map(Je=>U.pointCoordinate(Je,this.terrain)),ke=this.getIds();let Be=1/0,He=1/0,Ye=-1/0,it=-1/0;for(const Je of ge)Be=Math.min(Be,Je.x),He=Math.min(He,Je.y),Ye=Math.max(Ye,Je.x),it=Math.max(it,Je.y);for(let Je=0;Je<ke.length;Je++){const tt=this._tiles[ke[Je]];if(tt.holdingForFade())continue;const pt=tt.tileID,yt=Math.pow(2,U.zoom-tt.tileID.overscaledZ),Ct=p*tt.queryPadding*s.EXTENT/tt.tileSize/yt,st=[pt.getTilePoint(new s.MercatorCoordinate(Be,He)),pt.getTilePoint(new s.MercatorCoordinate(Ye,it))];if(st[0].x-Ct<s.EXTENT&&st[0].y-Ct<s.EXTENT&&st[1].x+Ct>=0&&st[1].y+Ct>=0){const It=pe.map(jt=>pt.getTilePoint(jt)),Et=ge.map(jt=>pt.getTilePoint(jt));D.push({tile:tt,tileID:pt,queryGeometry:It,cameraQueryGeometry:Et,scale:yt})}}return D}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map(C=>this._tiles[C].tileID);for(const C of p)C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type))for(const l in this._tiles){const p=this._tiles[l];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const D=this._tiles[l];D&&D.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(l,p))}}function oe(I,l){const p=Math.abs(2*I.wrap)-+(I.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return I.overscaledZ-l.overscaledZ||C-p||l.canonical.y-I.canonical.y||l.canonical.x-I.canonical.x}function we(I){return I==="raster"||I==="image"||I==="video"}ie.maxOverzooming=10,ie.maxUnderzooming=3;const ee="mapboxgl_preloaded_worker_pool";class ae{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<ae.workerCount;)this.workers.push(new Worker(ed.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ee]}numActive(){return Object.keys(this.active).length}}const ue=Math.floor(s.exported.hardwareConcurrency/2);let ve;function Ce(){return ve||(ve=new ae),ve}function je(I,l){const p={};for(const C in I)C!=="ref"&&(p[C]=I[C]);return s.refProperties.forEach(C=>{C in l&&(p[C]=l[C])}),p}function Me(I){I=I.slice();const l=Object.create(null);for(let p=0;p<I.length;p++)l[I[p].id]=I[p];for(let p=0;p<I.length;p++)"ref"in I[p]&&(I[p]=je(I[p],l[I[p].ref]));return I}ae.workerCount=Math.max(Math.min(ue,6),1);const Re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function me(I,l,p){p.push({command:Re.addSource,args:[I,l[I]]})}function De(I,l,p){l.push({command:Re.removeSource,args:[I]}),p[I]=!0}function Ue(I,l,p,C){De(I,p,C),me(I,l,p)}function Pe(I,l,p){let C;for(C in I[p])if(Object.prototype.hasOwnProperty.call(I[p],C)&&C!=="data"&&!y(I[p][C],l[p][C]))return!1;for(C in l[p])if(Object.prototype.hasOwnProperty.call(l[p],C)&&C!=="data"&&!y(I[p][C],l[p][C]))return!1;return!0}function Te(I,l,p,C,D,U){let te;for(te in l=l||{},I=I||{})Object.prototype.hasOwnProperty.call(I,te)&&(y(I[te],l[te])||p.push({command:U,args:[C,te,l[te],D]}));for(te in l)Object.prototype.hasOwnProperty.call(l,te)&&!Object.prototype.hasOwnProperty.call(I,te)&&(y(I[te],l[te])||p.push({command:U,args:[C,te,l[te],D]}))}function Ie(I){return I.id}function Fe(I,l){return I[l.id]=l,I}class Oe{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.clamp(l,0,1);let p=1,C=this._distances[p];const D=l*this.paddedLength+this.padding;for(;C<D&&p<this._distances.length;)C=this._distances[++p];const U=p-1,te=this._distances[U],pe=C-te,ge=pe>0?(D-te)/pe:0;return this.points[U].mult(1-ge).add(this.points[p].mult(ge))}}function Ge(I,l){let p=!0;return I==="always"||I!=="never"&&l!=="never"||(p=!1),p}class Qe{constructor(l,p,C){const D=this.boxCells=[],U=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let te=0;te<this.xCellCount*this.yCellCount;te++)D.push([]),U.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,D,U){this._forEachCell(p,C,D,U,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(D),this.bboxes.push(U)}insertCircle(l,p,C,D){this._forEachCell(p-D,C-D,p+D,C+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(D)}_insertBoxCell(l,p,C,D,U,te){this.boxCells[U].push(te)}_insertCircleCell(l,p,C,D,U,te){this.circleCells[U].push(te)}_query(l,p,C,D,U,te,pe){if(C<0||l>this.width||D<0||p>this.height)return[];const ge=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=D){if(U)return[{key:null,x1:l,y1:p,x2:C,y2:D}];for(let ke=0;ke<this.boxKeys.length;ke++)ge.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(let ke=0;ke<this.circleKeys.length;ke++){const Be=this.circles[3*ke],He=this.circles[3*ke+1],Ye=this.circles[3*ke+2];ge.push({key:this.circleKeys[ke],x1:Be-Ye,y1:He-Ye,x2:Be+Ye,y2:He+Ye})}}else this._forEachCell(l,p,C,D,this._queryCell,ge,{hitTest:U,overlapMode:te,seenUids:{box:{},circle:{}}},pe);return ge}query(l,p,C,D){return this._query(l,p,C,D,!1,null)}hitTest(l,p,C,D,U,te){return this._query(l,p,C,D,!0,U,te).length>0}hitTestCircle(l,p,C,D,U){const te=l-C,pe=l+C,ge=p-C,ke=p+C;if(pe<0||te>this.width||ke<0||ge>this.height)return!1;const Be=[];return this._forEachCell(te,ge,pe,ke,this._queryCellCircle,Be,{hitTest:!0,overlapMode:D,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},U),Be.length>0}_queryCell(l,p,C,D,U,te,pe,ge){const{seenUids:ke,hitTest:Be,overlapMode:He}=pe,Ye=this.boxCells[U];if(Ye!==null){const Je=this.bboxes;for(const tt of Ye)if(!ke.box[tt]){ke.box[tt]=!0;const pt=4*tt,yt=this.boxKeys[tt];if(l<=Je[pt+2]&&p<=Je[pt+3]&&C>=Je[pt+0]&&D>=Je[pt+1]&&(!ge||ge(yt))&&(!Be||!Ge(He,yt.overlapMode))&&(te.push({key:yt,x1:Je[pt],y1:Je[pt+1],x2:Je[pt+2],y2:Je[pt+3]}),Be))return!0}}const it=this.circleCells[U];if(it!==null){const Je=this.circles;for(const tt of it)if(!ke.circle[tt]){ke.circle[tt]=!0;const pt=3*tt,yt=this.circleKeys[tt];if(this._circleAndRectCollide(Je[pt],Je[pt+1],Je[pt+2],l,p,C,D)&&(!ge||ge(yt))&&(!Be||!Ge(He,yt.overlapMode))){const Ct=Je[pt],st=Je[pt+1],It=Je[pt+2];if(te.push({key:yt,x1:Ct-It,y1:st-It,x2:Ct+It,y2:st+It}),Be)return!0}}}return!1}_queryCellCircle(l,p,C,D,U,te,pe,ge){const{circle:ke,seenUids:Be,overlapMode:He}=pe,Ye=this.boxCells[U];if(Ye!==null){const Je=this.bboxes;for(const tt of Ye)if(!Be.box[tt]){Be.box[tt]=!0;const pt=4*tt,yt=this.boxKeys[tt];if(this._circleAndRectCollide(ke.x,ke.y,ke.radius,Je[pt+0],Je[pt+1],Je[pt+2],Je[pt+3])&&(!ge||ge(yt))&&!Ge(He,yt.overlapMode))return te.push(!0),!0}}const it=this.circleCells[U];if(it!==null){const Je=this.circles;for(const tt of it)if(!Be.circle[tt]){Be.circle[tt]=!0;const pt=3*tt,yt=this.circleKeys[tt];if(this._circlesCollide(Je[pt],Je[pt+1],Je[pt+2],ke.x,ke.y,ke.radius)&&(!ge||ge(yt))&&!Ge(He,yt.overlapMode))return te.push(!0),!0}}}_forEachCell(l,p,C,D,U,te,pe,ge){const ke=this._convertToXCellCoord(l),Be=this._convertToYCellCoord(p),He=this._convertToXCellCoord(C),Ye=this._convertToYCellCoord(D);for(let it=ke;it<=He;it++)for(let Je=Be;Je<=Ye;Je++)if(U.call(this,l,p,C,D,this.xCellCount*Je+it,te,pe,ge))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,D,U,te){const pe=D-l,ge=U-p,ke=C+te;return ke*ke>pe*pe+ge*ge}_circleAndRectCollide(l,p,C,D,U,te,pe){const ge=(te-D)/2,ke=Math.abs(l-(D+ge));if(ke>ge+C)return!1;const Be=(pe-U)/2,He=Math.abs(p-(U+Be));if(He>Be+C)return!1;if(ke<=ge||He<=Be)return!0;const Ye=ke-ge,it=He-Be;return Ye*Ye+it*it<=C*C}}function at(I,l,p,C,D){const U=s.create();return l?(s.scale(U,U,[1/D,1/D,1]),p||s.rotateZ(U,U,C.angle)):s.multiply(U,C.labelPlaneMatrix,I),U}function rt(I,l,p,C,D){if(l){const U=s.clone(I);return s.scale(U,U,[D,D,1]),p||s.rotateZ(U,U,-C.angle),U}return C.glCoordMatrix}function dt(I,l,p){let C;p?(C=[I.x,I.y,p(I.x,I.y),1],s.transformMat4(C,C,l)):(C=[I.x,I.y,0,1],rr(C,C,l));const D=C[3];return{point:new s.pointGeometry(C[0]/D,C[1]/D),signedDistanceFromCamera:D}}function gt(I,l){return .5+I/l*.5}function Tt(I,l){const p=I[0]/I[3],C=I[1]/I[3];return p>=-l[0]&&p<=l[0]&&C>=-l[1]&&C<=l[1]}function Nt(I,l,p,C,D,U,te,pe,ge,ke){const Be=C?I.textSizeData:I.iconSizeData,He=s.evaluateSizeForZoom(Be,p.transform.zoom),Ye=[256/p.width*2+1,256/p.height*2+1],it=C?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;it.clear();const Je=I.lineVertexArray,tt=C?I.text.placedSymbolArray:I.icon.placedSymbolArray,pt=p.transform.width/p.transform.height;let yt=!1;for(let Ct=0;Ct<tt.length;Ct++){const st=tt.get(Ct);if(st.hidden||st.writingMode===s.WritingMode.vertical&&!yt){hr(st.numGlyphs,it);continue}let It;if(yt=!1,ke?(It=[st.anchorX,st.anchorY,ke(st.anchorX,st.anchorY),1],s.transformMat4(It,It,l)):(It=[st.anchorX,st.anchorY,0,1],rr(It,It,l)),!Tt(It,Ye)){hr(st.numGlyphs,it);continue}const Et=gt(p.transform.cameraToCenterDistance,It[3]),jt=s.evaluateSizeForFeature(Be,He,st),Ot=te?jt/Et:jt*Et,Vt=new s.pointGeometry(st.anchorX,st.anchorY),Lt=dt(Vt,D,ke).point,li={},Kt=kt(st,Ot,!1,pe,l,D,U,I.glyphOffsetArray,Je,it,Lt,Vt,li,pt,ge,ke);yt=Kt.useVertical,(Kt.notEnoughRoom||yt||Kt.needsFlipping&&kt(st,Ot,!0,pe,l,D,U,I.glyphOffsetArray,Je,it,Lt,Vt,li,pt,ge,ke).notEnoughRoom)&&hr(st.numGlyphs,it)}C?I.text.dynamicLayoutVertexBuffer.updateData(it):I.icon.dynamicLayoutVertexBuffer.updateData(it)}function mt(I,l,p,C,D,U,te,pe,ge,ke,Be,He,Ye){const it=pe.glyphStartIndex+pe.numGlyphs,Je=pe.lineStartIndex,tt=pe.lineStartIndex+pe.lineLength,pt=l.getoffsetX(pe.glyphStartIndex),yt=l.getoffsetX(it-1),Ct=fi(I*pt,p,C,D,U,te,pe.segment,Je,tt,ge,ke,Be,He,Ye);if(!Ct)return null;const st=fi(I*yt,p,C,D,U,te,pe.segment,Je,tt,ge,ke,Be,He,Ye);return st?{first:Ct,last:st}:null}function St(I,l,p,C){return I===s.WritingMode.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(I===s.WritingMode.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function kt(I,l,p,C,D,U,te,pe,ge,ke,Be,He,Ye,it,Je,tt){const pt=l/24,yt=I.lineOffsetX*pt,Ct=I.lineOffsetY*pt;let st;if(I.numGlyphs>1){const It=I.glyphStartIndex+I.numGlyphs,Et=I.lineStartIndex,jt=I.lineStartIndex+I.lineLength,Ot=mt(pt,pe,yt,Ct,p,Be,He,I,ge,U,Ye,Je,tt);if(!Ot)return{notEnoughRoom:!0};const Vt=dt(Ot.first.point,te,tt).point,Lt=dt(Ot.last.point,te,tt).point;if(C&&!p){const li=St(I.writingMode,Vt,Lt,it);if(li)return li}st=[Ot.first];for(let li=I.glyphStartIndex+1;li<It-1;li++)st.push(fi(pt*pe.getoffsetX(li),yt,Ct,p,Be,He,I.segment,Et,jt,ge,U,Ye,Je,tt));st.push(Ot.last)}else{if(C&&!p){const Et=dt(He,D,tt).point,jt=I.lineStartIndex+I.segment+1,Ot=new s.pointGeometry(ge.getx(jt),ge.gety(jt)),Vt=dt(Ot,D,tt),Lt=Vt.signedDistanceFromCamera>0?Vt.point:ii(He,Ot,Et,1,D,tt),li=St(I.writingMode,Et,Lt,it);if(li)return li}const It=fi(pt*pe.getoffsetX(I.glyphStartIndex),yt,Ct,p,Be,He,I.segment,I.lineStartIndex,I.lineStartIndex+I.lineLength,ge,U,Ye,Je,tt);if(!It)return{notEnoughRoom:!0};st=[It]}for(const It of st)s.addDynamicAttributes(ke,It.point,It.angle);return{}}function ii(I,l,p,C,D,U){const te=dt(I.add(I.sub(l)._unit()),D,U).point,pe=p.sub(te);return p.add(pe._mult(C/pe.mag()))}function fi(I,l,p,C,D,U,te,pe,ge,ke,Be,He,Ye,it){const Je=C?I-l:I+l;let tt=Je>0?1:-1,pt=0;C&&(tt*=-1,pt=Math.PI),tt<0&&(pt+=Math.PI);let yt=tt>0?pe+te:pe+te+1,Ct=D,st=D,It=0,Et=0;const jt=Math.abs(Je),Ot=[];for(;It+Et<=jt;){if(yt+=tt,yt<pe||yt>=ge)return null;if(st=Ct,Ot.push(Ct),Ct=He[yt],Ct===void 0){const ui=new s.pointGeometry(ke.getx(yt),ke.gety(yt)),Ji=dt(ui,Be,it);if(Ji.signedDistanceFromCamera>0)Ct=He[yt]=Ji.point;else{const cr=yt-tt;Ct=ii(It===0?U:new s.pointGeometry(ke.getx(cr),ke.gety(cr)),ui,st,jt-It+1,Be,it)}}It+=Et,Et=st.dist(Ct)}const Vt=(jt-It)/Et,Lt=Ct.sub(st),li=Lt.mult(Vt)._add(st);li._add(Lt._unit()._perp()._mult(p*tt));const Kt=pt+Math.atan2(Ct.y-st.y,Ct.x-st.x);return Ot.push(li),{point:li,angle:Ye?Kt:0,path:Ot}}const Gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hr(I,l){for(let p=0;p<I;p++){const C=l.length;l.resize(C+4),l.float32.set(Gt,3*C)}}function rr(I,l,p){const C=l[0],D=l[1];return I[0]=p[0]*C+p[4]*D+p[12],I[1]=p[1]*C+p[5]*D+p[13],I[3]=p[3]*C+p[7]*D+p[15],I}const yr=100;class Dr{constructor(l,p=new Qe(l.width+200,l.height+200,25),C=new Qe(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+yr,this.screenBottomBoundary=l.height+yr,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,D,U,te){const pe=this.projectAndGetPerspectiveRatio(D,l.anchorPointX,l.anchorPointY,te),ge=C*pe.perspectiveRatio,ke=l.x1*ge+pe.point.x,Be=l.y1*ge+pe.point.y,He=l.x2*ge+pe.point.x,Ye=l.y2*ge+pe.point.y;return!this.isInsideGrid(ke,Be,He,Ye)||p!=="always"&&this.grid.hitTest(ke,Be,He,Ye,p,U)||pe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ke,Be,He,Ye],offscreen:this.isOffscreen(ke,Be,He,Ye)}}placeCollisionCircles(l,p,C,D,U,te,pe,ge,ke,Be,He,Ye,it,Je){const tt=[],pt=new s.pointGeometry(p.anchorX,p.anchorY),yt=dt(pt,te,Je),Ct=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),st=(Be?U/Ct:U*Ct)/s.ONE_EM,It=dt(pt,pe,Je).point,Et=mt(st,D,p.lineOffsetX*st,p.lineOffsetY*st,!1,It,pt,p,C,pe,{},!1,Je);let jt=!1,Ot=!1,Vt=!0;if(Et){const Lt=.5*Ye*Ct+it,li=new s.pointGeometry(-100,-100),Kt=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ui=new Oe,Ji=Et.first,cr=Et.last;let Pi=[];for(let _r=Ji.path.length-1;_r>=1;_r--)Pi.push(Ji.path[_r]);for(let _r=1;_r<cr.path.length;_r++)Pi.push(cr.path[_r]);const Gr=2.5*Lt;if(ge){const _r=Pi.map(Tr=>dt(Tr,ge,Je));Pi=_r.some(Tr=>Tr.signedDistanceFromCamera<=0)?[]:_r.map(Tr=>Tr.point)}let qr=[];if(Pi.length>0){const _r=Pi[0].clone(),Tr=Pi[0].clone();for(let Mr=1;Mr<Pi.length;Mr++)_r.x=Math.min(_r.x,Pi[Mr].x),_r.y=Math.min(_r.y,Pi[Mr].y),Tr.x=Math.max(Tr.x,Pi[Mr].x),Tr.y=Math.max(Tr.y,Pi[Mr].y);qr=_r.x>=li.x&&Tr.x<=Kt.x&&_r.y>=li.y&&Tr.y<=Kt.y?[Pi]:Tr.x<li.x||_r.x>Kt.x||Tr.y<li.y||_r.y>Kt.y?[]:s.clipLine([Pi],li.x,li.y,Kt.x,Kt.y)}for(const _r of qr){ui.reset(_r,.25*Lt);let Tr=0;Tr=ui.length<=.5*Lt?1:Math.ceil(ui.paddedLength/Gr)+1;for(let Mr=0;Mr<Tr;Mr++){const Pa=Mr/Math.max(Tr-1,1),Do=ui.lerp(Pa),uo=Do.x+yr,ho=Do.y+yr;tt.push(uo,ho,Lt,0);const ec=uo-Lt,Es=ho-Lt,po=uo+Lt,tc=ho+Lt;if(Vt=Vt&&this.isOffscreen(ec,Es,po,tc),Ot=Ot||this.isInsideGrid(ec,Es,po,tc),l!=="always"&&this.grid.hitTestCircle(uo,ho,Lt,l,He)&&(jt=!0,!ke))return{circles:[],offscreen:!1,collisionDetected:jt}}}}return{circles:!ke&&jt||!Ot||Ct<this.perspectiveRatioCutoff?[]:tt,offscreen:Vt,collisionDetected:jt}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let C=1/0,D=1/0,U=-1/0,te=-1/0;for(const Be of l){const He=new s.pointGeometry(Be.x+yr,Be.y+yr);C=Math.min(C,He.x),D=Math.min(D,He.y),U=Math.max(U,He.x),te=Math.max(te,He.y),p.push(He)}const pe=this.grid.query(C,D,U,te).concat(this.ignoredGrid.query(C,D,U,te)),ge={},ke={};for(const Be of pe){const He=Be.key;if(ge[He.bucketInstanceId]===void 0&&(ge[He.bucketInstanceId]={}),ge[He.bucketInstanceId][He.featureIndex])continue;const Ye=[new s.pointGeometry(Be.x1,Be.y1),new s.pointGeometry(Be.x2,Be.y1),new s.pointGeometry(Be.x2,Be.y2),new s.pointGeometry(Be.x1,Be.y2)];s.polygonIntersectsPolygon(p,Ye)&&(ge[He.bucketInstanceId][He.featureIndex]=!0,ke[He.bucketInstanceId]===void 0&&(ke[He.bucketInstanceId]=[]),ke[He.bucketInstanceId].push(He.featureIndex))}return ke}insertCollisionBox(l,p,C,D,U,te){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:D,featureIndex:U,collisionGroupID:te,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,D,U,te){const pe=C?this.ignoredGrid:this.grid,ge={bucketInstanceId:D,featureIndex:U,collisionGroupID:te,overlapMode:p};for(let ke=0;ke<l.length;ke+=4)pe.insertCircle(ge,l[ke],l[ke+1],l[ke+2])}projectAndGetPerspectiveRatio(l,p,C,D){let U;return D?(U=[p,C,D(p,C),1],s.transformMat4(U,U,l)):(U=[p,C,0,1],rr(U,U,l)),{point:new s.pointGeometry((U[0]/U[3]+1)/2*this.transform.width+yr,(-U[1]/U[3]+1)/2*this.transform.height+yr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/U[3]*.5}}isOffscreen(l,p,C,D){return C<yr||l>=this.screenRightBoundary||D<yr||p>this.screenBottomBoundary}isInsideGrid(l,p,C,D){return C>=0&&l<this.gridRightBoundary&&D>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=s.identity([]);return s.translate(l,l,[-100,-100,0]),l}}function nr(I,l,p){return l*(s.EXTENT/(I.tileSize*Math.pow(2,p-I.tileID.overscaledZ)))}class vr{constructor(l,p,C,D){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):D&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class ht{constructor(l,p,C,D,U){this.text=new vr(l?l.text:null,p,C,U),this.icon=new vr(l?l.icon:null,p,D,U)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bt{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Mt{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class $t{constructor(l,p,C,D,U){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=D,this.tileID=U}}class Zt{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function ki(I,l,p,C,D){const{horizontalAlign:U,verticalAlign:te}=s.getAnchorAlignment(I),pe=-(U-.5)*l,ge=-(te-.5)*p,ke=s.evaluateVariableOffset(I,C);return new s.pointGeometry(pe+ke[0]*D,ge+ke[1]*D)}function Di(I,l,p,C,D,U){const{x1:te,x2:pe,y1:ge,y2:ke,anchorPointX:Be,anchorPointY:He}=I,Ye=new s.pointGeometry(l,p);return C&&Ye._rotate(D?U:-U),{x1:te+Ye.x,y1:ge+Ye.y,x2:pe+Ye.x,y2:ke+Ye.y,anchorPointX:Be,anchorPointY:He}}class We{constructor(l,p,C,D,U){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new Dr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Zt(D),this.collisionCircleArrays={},this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,p,C,D){const U=C.getBucket(p),te=C.latestFeatureIndex;if(!U||!te||p.id!==U.layerIds[0])return;const pe=C.collisionBoxArray,ge=U.layers[0].layout,ke=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Be=C.tileSize/s.EXTENT,He=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Ye=ge.get("text-pitch-alignment")==="map",it=ge.get("text-rotation-alignment")==="map",Je=nr(C,1,this.transform.zoom),tt=at(He,Ye,it,this.transform,Je);let pt=null;if(Ye){const Ct=rt(He,Ye,it,this.transform,Je);pt=s.multiply([],this.transform.labelPlaneMatrix,Ct)}this.retainedQueryData[U.bucketInstanceId]=new $t(U.bucketInstanceId,te,U.sourceLayerIndex,U.index,C.tileID);const yt={bucket:U,layout:ge,posMatrix:He,textLabelPlaneMatrix:tt,labelToScreenMatrix:pt,scale:ke,textPixelRatio:Be,holdingForFade:C.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(U.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(U.sourceID)};if(D)for(const Ct of U.sortKeyRanges){const{sortKey:st,symbolInstanceStart:It,symbolInstanceEnd:Et}=Ct;l.push({sortKey:st,symbolInstanceStart:It,symbolInstanceEnd:Et,parameters:yt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:U.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(l,p,C,D,U,te,pe,ge,ke,Be,He,Ye,it,Je,tt,pt){const yt=[Ye.textOffset0,Ye.textOffset1],Ct=ki(l,C,D,yt,U),st=this.collisionIndex.placeCollisionBox(Di(p,Ct.x,Ct.y,te,pe,this.transform.angle),He,ge,ke,Be.predicate,pt);if((!tt||this.collisionIndex.placeCollisionBox(Di(tt,Ct.x,Ct.y,te,pe,this.transform.angle),He,ge,ke,Be.predicate,pt).box.length!==0)&&st.box.length>0){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID].text&&(It=this.prevPlacement.variableOffsets[Ye.crossTileID].anchor),Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ye.crossTileID]={textOffset:yt,width:C,height:D,anchor:l,textBoxScale:U,prevAnchor:It},this.markUsedJustification(it,l,Ye,Je),it.allowVerticalPlacement&&(this.markUsedOrientation(it,Je,Ye),this.placedOrientations[Ye.crossTileID]=Je),{shift:Ct,placedGlyphBoxes:st}}}placeLayerBucketPart(l,p,C){const{bucket:D,layout:U,posMatrix:te,textLabelPlaneMatrix:pe,labelToScreenMatrix:ge,textPixelRatio:ke,holdingForFade:Be,collisionBoxArray:He,partiallyEvaluatedTextSize:Ye,collisionGroup:it}=l.parameters,Je=U.get("text-optional"),tt=U.get("icon-optional"),pt=s.getOverlapMode(U,"text-overlap","text-allow-overlap"),yt=pt==="always",Ct=s.getOverlapMode(U,"icon-overlap","icon-allow-overlap"),st=Ct==="always",It=U.get("text-rotation-alignment")==="map",Et=U.get("text-pitch-alignment")==="map",jt=U.get("icon-text-fit")!=="none",Ot=U.get("symbol-z-order")==="viewport-y",Vt=yt&&(st||!D.hasIconData()||tt),Lt=st&&(yt||!D.hasTextData()||Je);!D.collisionArrays&&He&&D.deserializeCollisionBoxes(He);const li=(Kt,ui)=>{if(p[Kt.crossTileID])return;if(Be)return void(this.placements[Kt.crossTileID]=new bt(!1,!1,!1));let Ji=!1,cr=!1,Pi=!0,Gr=null,qr={box:null,offscreen:null},_r={box:null},Tr=null,Mr=null,Pa=null,Do=0,uo=0,ho=0;ui.textFeatureIndex?Do=ui.textFeatureIndex:Kt.useRuntimeCollisionCircles&&(Do=Kt.featureIndex),ui.verticalTextFeatureIndex&&(uo=ui.verticalTextFeatureIndex);const ec=this.retainedQueryData[D.bucketInstanceId].tileID,Es=this.terrain?(Ar,pn)=>this.terrain.getElevation(ec,Ar,pn):null;for(const Ar of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const pn=ui[Ar];pn&&(pn.elevation=Es?Es(pn.anchorPointX,pn.anchorPointY):0)}const po=ui.textBox;if(po){const Ar=Rr=>{let Xn=s.WritingMode.horizontal;if(D.allowVerticalPlacement&&!Rr&&this.prevPlacement){const ma=this.prevPlacement.placedOrientations[Kt.crossTileID];ma&&(this.placedOrientations[Kt.crossTileID]=ma,Xn=ma,this.markUsedOrientation(D,Xn,Kt))}return Xn},pn=(Rr,Xn)=>{if(D.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&ui.verticalTextBox){for(const ma of D.writingModes)if(ma===s.WritingMode.vertical?(qr=Xn(),_r=qr):qr=Rr(),qr&&qr.box&&qr.box.length)break}else qr=Rr()};if(U.get("text-variable-anchor")){let Rr=U.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Kt.crossTileID]){const vn=this.prevPlacement.variableOffsets[Kt.crossTileID];Rr.indexOf(vn.anchor)>0&&(Rr=Rr.filter(Xa=>Xa!==vn.anchor),Rr.unshift(vn.anchor))}const Xn=(vn,Xa,Bc)=>{const $c=vn.x2-vn.x1,Sh=vn.y2-vn.y1,vf=Kt.textBoxScale,Eh=jt&&Ct==="never"?Xa:null;let fo={box:[],offscreen:!1};const kh=pt!=="never"?2*Rr.length:Rr.length;for(let td=0;td<kh;++td){const Mh=this.attemptAnchorPlacement(Rr[td%Rr.length],vn,$c,Sh,vf,It,Et,ke,te,it,td>=Rr.length?pt:"never",Kt,D,Bc,Eh,Es);if(Mh&&(fo=Mh.placedGlyphBoxes,fo&&fo.box&&fo.box.length)){Ji=!0,Gr=Mh.shift;break}}return fo};pn(()=>Xn(po,ui.iconBox,s.WritingMode.horizontal),()=>{const vn=ui.verticalTextBox;return D.allowVerticalPlacement&&!(qr&&qr.box&&qr.box.length)&&Kt.numVerticalGlyphVertices>0&&vn?Xn(vn,ui.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),qr&&(Ji=qr.box,Pi=qr.offscreen);const ma=Ar(qr&&qr.box);if(!Ji&&this.prevPlacement){const vn=this.prevPlacement.variableOffsets[Kt.crossTileID];vn&&(this.variableOffsets[Kt.crossTileID]=vn,this.markUsedJustification(D,vn.anchor,Kt,ma))}}else{const Rr=(Xn,ma)=>{const vn=this.collisionIndex.placeCollisionBox(Xn,pt,ke,te,it.predicate,Es);return vn&&vn.box&&vn.box.length&&(this.markUsedOrientation(D,ma,Kt),this.placedOrientations[Kt.crossTileID]=ma),vn};pn(()=>Rr(po,s.WritingMode.horizontal),()=>{const Xn=ui.verticalTextBox;return D.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&Xn?Rr(Xn,s.WritingMode.vertical):{box:null,offscreen:null}}),Ar(qr&&qr.box&&qr.box.length)}}if(Tr=qr,Ji=Tr&&Tr.box&&Tr.box.length>0,Pi=Tr&&Tr.offscreen,Kt.useRuntimeCollisionCircles){const Ar=D.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex),pn=s.evaluateSizeForFeature(D.textSizeData,Ye,Ar),Rr=U.get("text-padding");Mr=this.collisionIndex.placeCollisionCircles(pt,Ar,D.lineVertexArray,D.glyphOffsetArray,pn,te,pe,ge,C,Et,it.predicate,Kt.collisionCircleDiameter,Rr,Es),Mr.circles.length&&Mr.collisionDetected&&!C&&s.warnOnce("Collisions detected, but collision boxes are not shown"),Ji=yt||Mr.circles.length>0&&!Mr.collisionDetected,Pi=Pi&&Mr.offscreen}if(ui.iconFeatureIndex&&(ho=ui.iconFeatureIndex),ui.iconBox){const Ar=pn=>{const Rr=jt&&Gr?Di(pn,Gr.x,Gr.y,It,Et,this.transform.angle):pn;return this.collisionIndex.placeCollisionBox(Rr,Ct,ke,te,it.predicate,Es)};_r&&_r.box&&_r.box.length&&ui.verticalIconBox?(Pa=Ar(ui.verticalIconBox),cr=Pa.box.length>0):(Pa=Ar(ui.iconBox),cr=Pa.box.length>0),Pi=Pi&&Pa.offscreen}const tc=Je||Kt.numHorizontalGlyphVertices===0&&Kt.numVerticalGlyphVertices===0,Th=tt||Kt.numIconVertices===0;if(tc||Th?Th?tc||(cr=cr&&Ji):Ji=cr&&Ji:cr=Ji=cr&&Ji,Ji&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,pt,U.get("text-ignore-placement"),D.bucketInstanceId,_r&&_r.box&&uo?uo:Do,it.ID),cr&&Pa&&this.collisionIndex.insertCollisionBox(Pa.box,Ct,U.get("icon-ignore-placement"),D.bucketInstanceId,ho,it.ID),Mr&&(Ji&&this.collisionIndex.insertCollisionCircles(Mr.circles,pt,U.get("text-ignore-placement"),D.bucketInstanceId,Do,it.ID),C)){const Ar=D.bucketInstanceId;let pn=this.collisionCircleArrays[Ar];pn===void 0&&(pn=this.collisionCircleArrays[Ar]=new Mt);for(let Rr=0;Rr<Mr.circles.length;Rr+=4)pn.circles.push(Mr.circles[Rr+0]),pn.circles.push(Mr.circles[Rr+1]),pn.circles.push(Mr.circles[Rr+2]),pn.circles.push(Mr.collisionDetected?1:0)}if(Kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(D.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Kt.crossTileID]=new bt(Ji||Vt,cr||Lt,Pi||D.justReloaded),p[Kt.crossTileID]=!0};if(Ot){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Kt=D.getSortedSymbolIndexes(this.transform.angle);for(let ui=Kt.length-1;ui>=0;--ui){const Ji=Kt[ui];li(D.symbolInstances.get(Ji),D.collisionArrays[Ji])}}else for(let Kt=l.symbolInstanceStart;Kt<l.symbolInstanceEnd;Kt++)li(D.symbolInstances.get(Kt),D.collisionArrays[Kt]);if(C&&D.bucketInstanceId in this.collisionCircleArrays){const Kt=this.collisionCircleArrays[D.bucketInstanceId];s.invert(Kt.invProjMatrix,te),Kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(l,p,C,D){let U;U=D===s.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(p)];const te=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const pe of te)pe>=0&&(l.text.placedSymbolArray.get(pe).crossTileID=U>=0&&pe!==U?0:C.crossTileID)}markUsedOrientation(l,p,C){const D=p===s.WritingMode.horizontal||p===s.WritingMode.horizontalOnly?p:0,U=p===s.WritingMode.vertical?p:0,te=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const pe of te)l.text.placedSymbolArray.get(pe).placedOrientation=D;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=U)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const D=p?p.symbolFadeChange(l):1,U=p?p.opacities:{},te=p?p.variableOffsets:{},pe=p?p.placedOrientations:{};for(const ge in this.placements){const ke=this.placements[ge],Be=U[ge];Be?(this.opacities[ge]=new ht(Be,D,ke.text,ke.icon),C=C||ke.text!==Be.text.placed||ke.icon!==Be.icon.placed):(this.opacities[ge]=new ht(null,D,ke.text,ke.icon,ke.skipFade),C=C||ke.text||ke.icon)}for(const ge in U){const ke=U[ge];if(!this.opacities[ge]){const Be=new ht(ke,D,!1,!1);Be.isHidden()||(this.opacities[ge]=Be,C=C||ke.text.placed||ke.icon.placed)}}for(const ge in te)this.variableOffsets[ge]||!this.opacities[ge]||this.opacities[ge].isHidden()||(this.variableOffsets[ge]=te[ge]);for(const ge in pe)this.placedOrientations[ge]||!this.opacities[ge]||this.opacities[ge].isHidden()||(this.placedOrientations[ge]=pe[ge]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const D of p){const U=D.getBucket(l);U&&D.latestFeatureIndex&&l.id===U.layerIds[0]&&this.updateBucketOpacities(U,C,D.collisionBoxArray)}}updateBucketOpacities(l,p,C){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const D=l.layers[0].layout,U=new ht(null,0,!1,!1,!0),te=D.get("text-allow-overlap"),pe=D.get("icon-allow-overlap"),ge=D.get("text-variable-anchor"),ke=D.get("text-rotation-alignment")==="map",Be=D.get("text-pitch-alignment")==="map",He=D.get("icon-text-fit")!=="none",Ye=new ht(null,0,te&&(pe||!l.hasIconData()||D.get("icon-optional")),pe&&(te||!l.hasTextData()||D.get("text-optional")),!0);!l.collisionArrays&&C&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(C);const it=(Je,tt,pt)=>{for(let yt=0;yt<tt/4;yt++)Je.opacityVertexArray.emplaceBack(pt)};for(let Je=0;Je<l.symbolInstances.length;Je++){const tt=l.symbolInstances.get(Je),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:Ct}=tt;let st=this.opacities[Ct];p[Ct]?st=U:st||(st=Ye,this.opacities[Ct]=st),p[Ct]=!0;const It=tt.numIconVertices>0,Et=this.placedOrientations[tt.crossTileID],jt=Et===s.WritingMode.vertical,Ot=Et===s.WritingMode.horizontal||Et===s.WritingMode.horizontalOnly;if(pt>0||yt>0){const Vt=ft(st.text);it(l.text,pt,jt?wt:Vt),it(l.text,yt,Ot?wt:Vt);const Lt=st.text.isHidden();[tt.rightJustifiedTextSymbolIndex,tt.centerJustifiedTextSymbolIndex,tt.leftJustifiedTextSymbolIndex].forEach(ui=>{ui>=0&&(l.text.placedSymbolArray.get(ui).hidden=Lt||jt?1:0)}),tt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(tt.verticalPlacedTextSymbolIndex).hidden=Lt||Ot?1:0);const li=this.variableOffsets[tt.crossTileID];li&&this.markUsedJustification(l,li.anchor,tt,Et);const Kt=this.placedOrientations[tt.crossTileID];Kt&&(this.markUsedJustification(l,"left",tt,Kt),this.markUsedOrientation(l,Kt,tt))}if(It){const Vt=ft(st.icon),Lt=!(He&&tt.verticalPlacedIconSymbolIndex&&jt);tt.placedIconSymbolIndex>=0&&(it(l.icon,tt.numIconVertices,Lt?Vt:wt),l.icon.placedSymbolArray.get(tt.placedIconSymbolIndex).hidden=st.icon.isHidden()),tt.verticalPlacedIconSymbolIndex>=0&&(it(l.icon,tt.numVerticalIconVertices,Lt?wt:Vt),l.icon.placedSymbolArray.get(tt.verticalPlacedIconSymbolIndex).hidden=st.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Vt=l.collisionArrays[Je];if(Vt){let Lt=new s.pointGeometry(0,0);if(Vt.textBox||Vt.verticalTextBox){let Kt=!0;if(ge){const ui=this.variableOffsets[Ct];ui?(Lt=ki(ui.anchor,ui.width,ui.height,ui.textOffset,ui.textBoxScale),ke&&Lt._rotate(Be?this.transform.angle:-this.transform.angle)):Kt=!1}Vt.textBox&&_e(l.textCollisionBox.collisionVertexArray,st.text.placed,!Kt||jt,Lt.x,Lt.y),Vt.verticalTextBox&&_e(l.textCollisionBox.collisionVertexArray,st.text.placed,!Kt||Ot,Lt.x,Lt.y)}const li=!!(!Ot&&Vt.verticalIconBox);Vt.iconBox&&_e(l.iconCollisionBox.collisionVertexArray,st.icon.placed,li,He?Lt.x:0,He?Lt.y:0),Vt.verticalIconBox&&_e(l.iconCollisionBox.collisionVertexArray,st.icon.placed,!li,He?Lt.x:0,He?Lt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Je.invProjMatrix,l.placementViewportMatrix=Je.viewportMatrix,l.collisionCircleArray=Je.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function _e(I,l,p,C,D){I.emplaceBack(l?1:0,p?1:0,C||0,D||0),I.emplaceBack(l?1:0,p?1:0,C||0,D||0),I.emplaceBack(l?1:0,p?1:0,C||0,D||0),I.emplaceBack(l?1:0,p?1:0,C||0,D||0)}const Le=Math.pow(2,25),Ve=Math.pow(2,24),Xe=Math.pow(2,17),et=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),nt=Math.pow(2,1);function ft(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const l=I.placed?1:0,p=Math.floor(127*I.opacity);return p*Le+l*Ve+p*Xe+l*et+p*ct+l*ot+p*nt+l}const wt=0;class zt{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,D,U){const te=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(te,D,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,U())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,te.sort((pe,ge)=>pe.sortKey-ge.sortKey));this._currentPartIndex<te.length;)if(p.placeLayerBucketPart(te[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,U())return!0;return!1}}class Rt{constructor(l,p,C,D,U,te,pe,ge){this.placement=new We(l,p,te,pe,ge),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=D,this._showCollisionBoxes=U,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const D=s.exported.now(),U=()=>{const te=s.exported.now()-D;return!this._forceFullPlacement&&te>2};for(;this._currentPlacementIndex>=0;){const te=p[l[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if(te.type==="symbol"&&(!te.minzoom||te.minzoom<=pe)&&(!te.maxzoom||te.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new zt(te)),this._inProgressLayer.continuePlacement(C[te.source],this.placement,this._showCollisionBoxes,te,U))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ci=512/s.EXTENT/2;class Wt{constructor(l,p,C){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(let D=0;D<p.length;D++){const U=p.get(D),te=U.key;this.indexedSymbolInstances[te]||(this.indexedSymbolInstances[te]=[]),this.indexedSymbolInstances[te].push({crossTileID:U.crossTileID,coord:this.getScaledCoordinates(U,l)})}}getScaledCoordinates(l,p){const C=ci/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*s.EXTENT+l.anchorX)*C),y:Math.floor((p.canonical.y*s.EXTENT+l.anchorY)*C)}}findMatches(l,p,C){const D=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let U=0;U<l.length;U++){const te=l.get(U);if(te.crossTileID)continue;const pe=this.indexedSymbolInstances[te.key];if(!pe)continue;const ge=this.getScaledCoordinates(te,p);for(const ke of pe)if(Math.abs(ke.coord.x-ge.x)<=D&&Math.abs(ke.coord.y-ge.y)<=D&&!C[ke.crossTileID]){C[ke.crossTileID]=!0,te.crossTileID=ke.crossTileID;break}}}}class gi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const D=this.indexes[C],U={};for(const te in D){const pe=D[te];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+p),U[pe.tileID.key]=pe}this.indexes[C]=U}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let U=0;U<p.symbolInstances.length;U++)p.symbolInstances.get(U).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const D=this.usedCrossTileIDs[l.overscaledZ];for(const U in this.indexes){const te=this.indexes[U];if(Number(U)>l.overscaledZ)for(const pe in te){const ge=te[pe];ge.tileID.isChildOf(l)&&ge.findMatches(p.symbolInstances,l,D)}else{const pe=te[l.scaledTo(Number(U)).key];pe&&pe.findMatches(p.symbolInstances,l,D)}}for(let U=0;U<p.symbolInstances.length;U++){const te=p.symbolInstances.get(U);te.crossTileID||(te.crossTileID=C.generate(),D[te.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Wt(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C in p.indexedSymbolInstances)for(const D of p.indexedSymbolInstances[C])delete this.usedCrossTileIDs[l][D.crossTileID]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const D=this.indexes[C];for(const U in D)l[D[U].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,D[U]),delete D[U],p=!0)}return p}}class Vi{constructor(){this.layerIndexes={},this.crossTileIDs=new gi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let D=this.layerIndexes[l.id];D===void 0&&(D=this.layerIndexes[l.id]=new vi);let U=!1;const te={};D.handleWrapJump(C);for(const pe of p){const ge=pe.getBucket(l);ge&&l.id===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),D.addBucket(pe.tileID,ge,this.crossTileIDs)&&(U=!0),te[ge.bucketInstanceId]=!0)}return D.removeStaleBuckets(te)&&(U=!0),U}pruneUnusedLayers(l){const p={};l.forEach(C=>{p[C]=!0});for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var $i=s.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Hi extends s.Evented{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=l._cache.max,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const l in this._tiles){const p=this._tiles[l];p.textures.forEach(C=>C.destroy()),p.textures=[]}}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];for(const C of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.posMatrix=new Float64Array(16),s.ortho(C.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[C.key]=new ye(C,this.tileSize))}removeOutdated(l){const p={};this.renderHistory=this.renderHistory.filter((C,D)=>this.renderHistory.indexOf(C)===D).slice(0,this.renderHistorySize);for(const C of this._renderableTilesKeys)p[C]=!0;for(const C of this.renderHistory)p[C]=!0;for(const C in this._tiles)p[C]||(this._tiles[C].clearTextures(l),delete this._tiles[C])}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const p={};for(const C of this._renderableTilesKeys){const D=this._tiles[C].tileID;if(D.canonical.equals(l.canonical)){const U=l.clone();U.posMatrix=new Float64Array(16),s.ortho(U.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),p[C]=U}else if(D.canonical.isChildOf(l.canonical)){const U=l.clone();U.posMatrix=new Float64Array(16);const te=D.canonical.z-l.canonical.z,pe=D.canonical.x-(D.canonical.x>>te<<te),ge=D.canonical.y-(D.canonical.y>>te<<te),ke=s.EXTENT>>te;s.ortho(U.posMatrix,0,ke,0,ke,0,1),s.translate(U.posMatrix,U.posMatrix,[-pe*ke,-ge*ke,0]),p[C]=U}else if(l.canonical.isChildOf(D.canonical)){const U=l.clone();U.posMatrix=new Float64Array(16);const te=l.canonical.z-D.canonical.z,pe=l.canonical.x-(l.canonical.x>>te<<te),ge=l.canonical.y-(l.canonical.y>>te<<te),ke=s.EXTENT>>te;s.ortho(U.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(U.posMatrix,U.posMatrix,[pe*ke,ge*ke,0]),s.scale(U.posMatrix,U.posMatrix,[1/2**te,1/2**te,0]),p[C]=U}}return p}getSourceTile(l,p){const C=this.sourceCache._source;let D=l.overscaledZ-this.deltaZoom;if(D>C.maxzoom&&(D=C.maxzoom),D<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(D).key);let U=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!U||!U.dem)&&p)for(;D>=C.minzoom&&(!U||!U.dem);)U=this.sourceCache.getTileByID(l.scaledTo(D--).key);return U}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(p=>p.timeLoaded>=l)}}class mi{constructor(l,p,C){this.style=l,this.sourceCache=new Hi(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.elevationOffset=typeof C.elevationOffset=="number"?C.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(l,p,C,D=s.EXTENT){if(!(p>=0&&p<D&&C>=0&&C<D))return this.elevationOffset;let U=0;const te=this.getTerrainData(l);if(te.tile&&te.tile.dem){const pe=s.transformMat4$1([],[p/D*s.EXTENT,C/D*s.EXTENT],te.u_terrain_matrix),ge=[pe[0]*te.tile.dem.dim,pe[1]*te.tile.dem.dim],ke=[Math.floor(ge[0]),Math.floor(ge[1])],Be=te.tile.dem.get(ke[0],ke[1]),He=te.tile.dem.get(ke[0],ke[1]+1),Ye=te.tile.dem.get(ke[0]+1,ke[1]),it=te.tile.dem.get(ke[0]+1,ke[1]+1);U=s.number(s.number(Be,He,ge[0]-ke[0]),s.number(Ye,it,ge[0]-ke[0]),ge[1]-ke[1])}return U}rememberForRerender(l,p){for(const C in this.sourceCache._tiles){const D=this.sourceCache._tiles[C];(D.tileID.equals(p)||D.tileID.isChildOf(p))&&(l===this.sourceCache.sourceCache.id&&(D.timeLoaded=Date.now()),this._rerender[l]=this._rerender[l]||{},this._rerender[l][D.tileID.key]=!0)}}needsRerender(l,p){return this._rerender[l]&&this._rerender[l][p.key]}clearRerenderCache(){this._rerender={}}getElevation(l,p,C,D=s.EXTENT){return(this.getDEMElevation(l,p,C,D)+this.elevationOffset)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const D=this.style.map.painter.context,U=new s.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _(D,U,D.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _(D,new s.RGBAImage({width:1,height:1}),D.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const D=this.style.map.painter.context;p.demTexture=this.style.map.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new _(D,p.dem.getPixels(),D.gl.RGBA,{premultiply:!1}),p.demTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const D=this.sourceCache.sourceCache._source.maxzoom;let U=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=D?U=l.canonical.z-D:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const te=l.canonical.x-(l.canonical.x>>U<<U),pe=l.canonical.y-(l.canonical.y>>U<<U),ge=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<U),1/(s.EXTENT<<U),0]);s.translate(ge,ge,[te*s.EXTENT,pe*s.EXTENT,0]),this._demMatrixCache[l.key]={matrix:ge,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getRTTFramebuffer(){const l=this.style.map.painter;if(!this._rttFramebuffer){const p=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=l.context.createFramebuffer(p,p,!0),this._rttFramebuffer.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,p,p))}return this._rttFramebuffer}getFramebuffer(l){const p=this.style.map.painter,C=p.width/devicePixelRatio,D=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===D||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _(p.context,{width:C,height:D,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _(p.context,{width:C,height:D,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,D,!0),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,D))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let U=0,te=0;U<this._coordsTextureSize;U++)for(let pe=0;pe<this._coordsTextureSize;pe++,te+=4)p[te+0]=255&pe,p[te+1]=255&U,p[te+2]=pe>>8<<4|U>>8,p[te+3]=0;const C=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),D=new _(l,C,l.gl.RGBA,{premultiply:!1});return D.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=D,D}pointCoordinate(l){const p=new Uint8Array(4),C=this.style.map.painter,D=C.context,U=D.gl;D.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),U.readPixels(l.x,C.height/devicePixelRatio-l.y-1,1,1,U.RGBA,U.UNSIGNED_BYTE,p),D.bindFramebuffer.set(null);const te=p[0]+(p[2]>>4<<8),pe=p[1]+((15&p[2])<<8),ge=this.coordsIndex[255-p[3]],ke=ge&&this.sourceCache.getTileByID(ge);if(!ke)return null;const Be=this._coordsTextureSize,He=(1<<ke.tileID.canonical.z)*Be;return new s.MercatorCoordinate((ke.tileID.canonical.x*Be+te)/He,(ke.tileID.canonical.y*Be+pe)/He,this.getElevation(ke.tileID,te,pe,Be))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.style.map.painter.context,p=new s.PosArray,C=new s.TriangleIndexArray,D=this.meshSize,U=s.EXTENT/D,te=D*D;for(let pe=0;pe<=D;pe++)for(let ge=0;ge<=D;ge++)p.emplaceBack(ge*U,pe*U);for(let pe=0;pe<te;pe+=D+1)for(let ge=0;ge<D;ge++)C.emplaceBack(ge+pe,D+ge+pe+1,D+ge+pe+2),C.emplaceBack(ge+pe,D+ge+pe+2,ge+pe+1);return this._mesh={indexBuffer:l.createIndexBuffer(C),vertexBuffer:l.createVertexBuffer(p,$i.members),segments:s.SegmentVector.simpleSegment(0,0,p.length,C.length)},this._mesh}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=(p.dem.min+this.elevationOffset)*this.exaggeration,C.maxElevation=(p.dem.max+this.elevationOffset)*this.exaggeration),C}}const Ri=(I,l)=>s.emitValidationErrors(I,l&&l.filter(p=>p.identifier!=="source.canvas")),Zr=s.pick(Re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),nn=s.pick(Re,["setCenter","setZoom","setBearing","setPitch"]),Cn=function(){const I={},l=s.spec.$version;for(const p in s.spec.$root){const C=s.spec.$root[p];if(C.required){let D=null;D=p==="version"?l:C.type==="array"?[]:{},D!=null&&(I[p]=D)}}return I}();class xr extends s.Evented{constructor(l,p={}){super(),this.map=l,this.dispatcher=new K(Ce(),this),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new M(l._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Z(256,512),this.crossTileSymbolIndex=new Vi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const C=this;this._rtlTextPluginCallback=xr.registerForPluginStateChange(D=>{C.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(U,te)=>{if(s.triggerPluginCompletionEvent(U),te&&te.every(pe=>pe))for(const pe in C.sourceCaches)C.sourceCaches[pe].reload()})}),this.on("data",D=>{if(D.dataType!=="source"||D.sourceDataType!=="metadata")return;const U=this.sourceCaches[D.sourceId];if(!U)return;const te=U.getSource();if(te&&te.vectorLayerIds)for(const pe in this._layers){const ge=this._layers[pe];ge.source===te.id&&this._validateLayer(ge)}})}loadURL(l,p={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const C=typeof p.validate!="boolean"||p.validate,D=this.map._requestManager.transformRequest(l,s.ResourceType.Style);this._request=s.getJSON(D,(U,te)=>{this._request=null,U?this.fire(new s.ErrorEvent(U)):te&&this._load(te,C)})}loadJSON(l,p={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(l,p.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Cn,!1)}_load(l,p){if(p&&Ri(this,s.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const D in l.sources)this.addSource(D,l.sources[D],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const C=Me(this.stylesheet.layers);this._order=C.map(D=>D.id),this._layers={},this._serializedLayers={};for(let D of C)D=s.createStyleLayer(D),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(p,C,D,U){let te,pe,ge;const ke=D>1?"@2x":"";let Be=s.getJSON(C.transformRequest(C.normalizeSpriteURL(p,ke,".json"),s.ResourceType.SpriteJSON),(it,Je)=>{Be=null,ge||(ge=it,te=Je,Ye())}),He=s.getImage(C.transformRequest(C.normalizeSpriteURL(p,ke,".png"),s.ResourceType.SpriteImage),(it,Je)=>{He=null,ge||(ge=it,pe=Je,Ye())});function Ye(){if(ge)U(ge);else if(te&&pe){const it=s.exported.getImageData(pe),Je={};for(const tt in te){const{width:pt,height:yt,x:Ct,y:st,sdf:It,pixelRatio:Et,stretchX:jt,stretchY:Ot,content:Vt}=te[tt],Lt=new s.RGBAImage({width:pt,height:yt});s.RGBAImage.copy(it,Lt,{x:Ct,y:st},{x:0,y:0},{width:pt,height:yt}),Je[tt]={data:Lt,pixelRatio:Et,sdf:It,stretchX:jt,stretchY:Ot,content:Vt}}U(null,Je)}}return{cancel(){Be&&(Be.cancel(),Be=null),He&&(He.cancel(),He=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(p,C)=>{if(this._spriteRequest=null,p)this.fire(new s.ErrorEvent(p));else if(C)for(const D in C)this.imageManager.addImage(D,C[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const D=p.getSource();(D.type==="geojson"||D.vectorLayerIds&&D.vectorLayerIds.indexOf(C)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${C}" does not exist on source "${D.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const p=[];for(const C of l){const D=this._layers[C];D.type!=="custom"&&p.push(D.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),U=Object.keys(this._removedLayers);(D.length||U.length)&&this._updateWorkerLayers(D,U);for(const te in this._updatedSources){const pe=this._updatedSources[te];if(pe==="reload")this._reloadSource(te);else{if(pe!=="clear")throw new Error(`Invalid action ${pe}`);this._clearSource(te)}}this._updateTilesForChangedImages();for(const te in this._updatedPaintProps)this._layers[te].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const C={};for(const D in this.sourceCaches){const U=this.sourceCaches[D];C[D]=U.used,U.used=!1}for(const D of this._order){const U=this._layers[D];U.recalculate(l,this._availableImages),!U.isHidden(l.zoom)&&U.source&&(this.sourceCaches[U.source].used=!0)}for(const D in C){const U=this.sourceCaches[D];C[D]!==U.used&&U.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:D}))}this.light.recalculate(l),this.z=l.zoom,p&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(l){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),l){const p=this.sourceCaches[l.source];if(!p)throw new Error(`cannot load terrain, because there exists no source with ID: ${l.source}`);this.terrain=new mi(this,p,l),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=C=>{C.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=C=>{C.tile&&(C.sourceId===l.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(C.sourceId,C.tile.tileID)):C.source.type==="geojson"&&this.terrain.rememberForRerender(C.sourceId,C.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new s.Event("terrain",{terrain:l}))}setState(l){if(this._checkLoaded(),Ri(this,s.validateStyle(l)))return!1;(l=s.clone$1(l)).layers=Me(l.layers);const p=function(D,U){if(!D)return[{command:Re.setStyle,args:[U]}];let te=[];try{if(!y(D.version,U.version))return[{command:Re.setStyle,args:[U]}];y(D.center,U.center)||te.push({command:Re.setCenter,args:[U.center]}),y(D.zoom,U.zoom)||te.push({command:Re.setZoom,args:[U.zoom]}),y(D.bearing,U.bearing)||te.push({command:Re.setBearing,args:[U.bearing]}),y(D.pitch,U.pitch)||te.push({command:Re.setPitch,args:[U.pitch]}),y(D.sprite,U.sprite)||te.push({command:Re.setSprite,args:[U.sprite]}),y(D.glyphs,U.glyphs)||te.push({command:Re.setGlyphs,args:[U.glyphs]}),y(D.transition,U.transition)||te.push({command:Re.setTransition,args:[U.transition]}),y(D.light,U.light)||te.push({command:Re.setLight,args:[U.light]});const pe={},ge=[];(function(Be,He,Ye,it){let Je;for(Je in He=He||{},Be=Be||{})Object.prototype.hasOwnProperty.call(Be,Je)&&(Object.prototype.hasOwnProperty.call(He,Je)||De(Je,Ye,it));for(Je in He)Object.prototype.hasOwnProperty.call(He,Je)&&(Object.prototype.hasOwnProperty.call(Be,Je)?y(Be[Je],He[Je])||(Be[Je].type==="geojson"&&He[Je].type==="geojson"&&Pe(Be,He,Je)?Ye.push({command:Re.setGeoJSONSourceData,args:[Je,He[Je].data]}):Ue(Je,He,Ye,it)):me(Je,He,Ye))})(D.sources,U.sources,ge,pe);const ke=[];D.layers&&D.layers.forEach(Be=>{pe[Be.source]?te.push({command:Re.removeLayer,args:[Be.id]}):ke.push(Be)}),te=te.concat(ge),function(Be,He,Ye){He=He||[];const it=(Be=Be||[]).map(Ie),Je=He.map(Ie),tt=Be.reduce(Fe,{}),pt=He.reduce(Fe,{}),yt=it.slice(),Ct=Object.create(null);let st,It,Et,jt,Ot,Vt,Lt;for(st=0,It=0;st<it.length;st++)Et=it[st],Object.prototype.hasOwnProperty.call(pt,Et)?It++:(Ye.push({command:Re.removeLayer,args:[Et]}),yt.splice(yt.indexOf(Et,It),1));for(st=0,It=0;st<Je.length;st++)Et=Je[Je.length-1-st],yt[yt.length-1-st]!==Et&&(Object.prototype.hasOwnProperty.call(tt,Et)?(Ye.push({command:Re.removeLayer,args:[Et]}),yt.splice(yt.lastIndexOf(Et,yt.length-It),1)):It++,Vt=yt[yt.length-st],Ye.push({command:Re.addLayer,args:[pt[Et],Vt]}),yt.splice(yt.length-st,0,Et),Ct[Et]=!0);for(st=0;st<Je.length;st++)if(Et=Je[st],jt=tt[Et],Ot=pt[Et],!Ct[Et]&&!y(jt,Ot))if(y(jt.source,Ot.source)&&y(jt["source-layer"],Ot["source-layer"])&&y(jt.type,Ot.type)){for(Lt in Te(jt.layout,Ot.layout,Ye,Et,null,Re.setLayoutProperty),Te(jt.paint,Ot.paint,Ye,Et,null,Re.setPaintProperty),y(jt.filter,Ot.filter)||Ye.push({command:Re.setFilter,args:[Et,Ot.filter]}),y(jt.minzoom,Ot.minzoom)&&y(jt.maxzoom,Ot.maxzoom)||Ye.push({command:Re.setLayerZoomRange,args:[Et,Ot.minzoom,Ot.maxzoom]}),jt)Object.prototype.hasOwnProperty.call(jt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?Te(jt[Lt],Ot[Lt],Ye,Et,Lt.slice(6),Re.setPaintProperty):y(jt[Lt],Ot[Lt])||Ye.push({command:Re.setLayerProperty,args:[Et,Lt,Ot[Lt]]}));for(Lt in Ot)Object.prototype.hasOwnProperty.call(Ot,Lt)&&!Object.prototype.hasOwnProperty.call(jt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?Te(jt[Lt],Ot[Lt],Ye,Et,Lt.slice(6),Re.setPaintProperty):y(jt[Lt],Ot[Lt])||Ye.push({command:Re.setLayerProperty,args:[Et,Lt,Ot[Lt]]}))}else Ye.push({command:Re.removeLayer,args:[Et]}),Vt=yt[yt.lastIndexOf(Et)+1],Ye.push({command:Re.addLayer,args:[Ot,Vt]})}(ke,U.layers,te)}catch(pe){console.warn("Unable to compute style diff:",pe),te=[{command:Re.setStyle,args:[U]}]}return te}(this.serialize(),l).filter(D=>!(D.command in nn));if(p.length===0)return!1;const C=p.filter(D=>!(D.command in Zr));if(C.length>0)throw new Error(`Unimplemented: ${C.map(D=>D.command).join(", ")}.`);return p.forEach(D=>{D.command!=="setTransition"&&this[D.command].apply(this,D.args)}),this.stylesheet=l,!0}addImage(l,p){if(this.getImage(l))return this.fire(new s.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new s.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(s.validateStyle.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const D=this.sourceCaches[l]=new ie(l,p,this.dispatcher);D.style=this,D.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:D.serialize(),sourceId:l})),D.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const D=l.id;if(this.getLayer(D))return void this.fire(new s.ErrorEvent(new Error(`Layer "${D}" already exists on this map.`)));let U;if(l.type==="custom"){if(Ri(this,s.validateCustomStyleLayer(l)))return;U=s.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(D,l.source),l=s.clone$1(l),l=s.extend(l,{source:D})),this._validate(s.validateStyle.layer,`layers.${D}`,l,{arrayIndex:-1},C))return;U=s.createStyleLayer(l),this._validateLayer(U),U.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[U.id]=U.serialize()}const te=p?this._order.indexOf(p):this._order.length;if(p&&te===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${D}" before non-existing layer "${p}".`)));else{if(this._order.splice(te,0,D),this._layerOrderChanged=!0,this._layers[D]=U,this._removedLayers[D]&&U.source&&U.type!=="custom"){const pe=this._removedLayers[D];delete this._removedLayers[D],pe.type!==U.type?this._updatedSources[U.source]="clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())}this._updateLayer(U),U.onAdd&&U.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const D=p?this._order.indexOf(p):this._order.length;p&&D===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(D,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const D=this.getLayer(l);D?D.minzoom===p&&D.maxzoom===C||(p!=null&&(D.minzoom=p),C!=null&&(D.maxzoom=C),this._updateLayer(D)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const D=this.getLayer(l);if(D){if(!y(D.filter,p))return p==null?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(s.validateStyle.filter,`layers.${D.id}.filter`,p,null,C)||(D.filter=s.clone$1(p),this._updateLayer(D)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return s.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,p,C,D={}){this._checkLoaded();const U=this.getLayer(l);U?y(U.getLayoutProperty(p),C)||(U.setLayoutProperty(p,C,D),this._updateLayer(U)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,D={}){this._checkLoaded();const U=this.getLayer(l);U?y(U.getPaintProperty(p),C)||(U.setPaintProperty(p,C,D)&&this._updateLayer(U),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,D=l.sourceLayer,U=this.sourceCaches[C];if(U===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const te=U.getSource().type;te==="geojson"&&D?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):te!=="vector"||D?(l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),U.setFeatureState(D,l.id,p)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,D=this.sourceCaches[C];if(D===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const U=D.getSource().type,te=U==="vector"?l.sourceLayer:void 0;U!=="vector"||te?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):D.removeFeatureState(te,l.id,p):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,D=this.sourceCaches[p];if(D!==void 0)return D.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),D.getFeatureState(C,l.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=te=>this._layers[te].type==="fill-extrusion",C={},D=[];for(let te=this._order.length-1;te>=0;te--){const pe=this._order[te];if(p(pe)){C[pe]=te;for(const ge of l){const ke=ge[pe];if(ke)for(const Be of ke)D.push(Be)}}}D.sort((te,pe)=>pe.intersectionZ-te.intersectionZ);const U=[];for(let te=this._order.length-1;te>=0;te--){const pe=this._order[te];if(p(pe))for(let ge=D.length-1;ge>=0;ge--){const ke=D[ge].feature;if(C[ke.layer.id]<te)break;U.push(ke),D.pop()}else for(const ge of l){const ke=ge[pe];if(ke)for(const Be of ke)U.push(Be.feature)}}return U}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);const D={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const te of p.layers){const pe=this._layers[te];if(!pe)return this.fire(new s.ErrorEvent(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];D[pe.source]=!0}}const U=[];p.availableImages=this._availableImages;for(const te in this.sourceCaches)p.layers&&!D[te]||U.push(le(this.sourceCaches[te],this._layers,this._serializedLayers,l,p,C));return this.placement&&U.push(function(te,pe,ge,ke,Be,He,Ye){const it={},Je=He.queryRenderedSymbols(ke),tt=[];for(const pt of Object.keys(Je).map(Number))tt.push(Ye[pt]);tt.sort(Se);for(const pt of tt){const yt=pt.featureIndex.lookupSymbolFeatures(Je[pt.bucketInstanceId],pe,pt.bucketIndex,pt.sourceLayerIndex,Be.filter,Be.layers,Be.availableImages,te);for(const Ct in yt){const st=it[Ct]=it[Ct]||[],It=yt[Ct];It.sort((Et,jt)=>{const Ot=pt.featureSortOrder;if(Ot){const Vt=Ot.indexOf(Et.featureIndex);return Ot.indexOf(jt.featureIndex)-Vt}return jt.featureIndex-Et.featureIndex});for(const Et of It)st.push(Et)}}for(const pt in it)it[pt].forEach(yt=>{const Ct=yt.feature,st=ge[te[pt].source].getFeatureState(Ct.layer["source-layer"],Ct.id);Ct.source=Ct.layer.source,Ct.layer["source-layer"]&&(Ct.sourceLayer=Ct.layer["source-layer"]),Ct.state=st});return it}(this._layers,this._serializedLayers,this.sourceCaches,l,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(U)}querySourceFeatures(l,p){p&&p.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.sourceCaches[l];return C?function(D,U){const te=D.getRenderableIds().map(ke=>D.getTileByID(ke)),pe=[],ge={};for(let ke=0;ke<te.length;ke++){const Be=te[ke],He=Be.tileID.canonical.key;ge[He]||(ge[He]=!0,Be.querySourceFeatures(pe,U))}return pe}(C,p):[]}addSourceType(l,p,C){return xr.getSourceType(l)?C(new Error(`A source type called "${l}" already exists.`)):(xr.setSourceType(l,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:p.workerSourceURL},C):C(null,null))}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let D=!1;for(const te in l)if(!y(l[te],C[te])){D=!0;break}if(!D)return;const U={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(U)}_validate(l,p,C,D,U={}){return(!U||U.validate!==!1)&&Ri(this,l.call(s.validateStyle,s.extend({key:p,style:this.serialize(),value:C,styleSpec:s.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const p=this.sourceCaches[l];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,C,D,U=!1){let te=!1,pe=!1;const ge={};for(const ke of this._order){const Be=this._layers[ke];if(Be.type!=="symbol")continue;if(!ge[Be.source]){const Ye=this.sourceCaches[Be.source];ge[Be.source]=Ye.getRenderableIds(!0).map(it=>Ye.getTileByID(it)).sort((it,Je)=>Je.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(Je.tileID)?-1:1))}const He=this.crossTileSymbolIndex.addLayer(Be,ge[Be.source],l.center.lng);te=te||He}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((U=U||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),l.zoom))&&(this.pauseablePlacement=new Rt(l,this.terrain,this._order,U,p,C,D,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),pe=!0),te&&this.pauseablePlacement.placement.setStale()),pe||te)for(const ke of this._order){const Be=this._layers[ke];Be.type==="symbol"&&this.placement.updateLayerOpacities(Be,ge[Be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p,C){this.imageManager.getImages(p.icons,C),this._updateTilesForChangedImages();const D=this.sourceCaches[p.source];D&&D.setDependencies(p.tileID.key,p.type,p.icons)}getGlyphs(l,p,C){this.glyphManager.getGlyphs(p.stacks,C)}getResource(l,p,C){return s.makeRequest(p,C)}}xr.getSourceType=function(I){return fe[I]},xr.setSourceType=function(I,l){fe[I]=l},xr.registerForPluginStateChange=s.registerForPluginStateChange;var Io="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ll={prelude:Nr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Nr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Nr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Nr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Nr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Nr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Nr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Nr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Nr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Io),terrainDepth:Nr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Io),terrainCoords:Nr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Io)};function Nr(I,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/attribute ([\w]+) ([\w]+)/g),D=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=U?U.concat(D):D,pe={};return{fragmentSource:I=I.replace(p,(ge,ke,Be,He,Ye)=>(pe[Ye]=!0,ke==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
varying ${Be} ${He} ${Ye};
#else
uniform ${Be} ${He} u_${Ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ye}
    ${Be} ${He} ${Ye} = u_${Ye};
#endif
`)),vertexSource:l=l.replace(p,(ge,ke,Be,He,Ye)=>{const it=He==="float"?"vec2":"vec4",Je=Ye.match(/color/)?"color":it;return pe[Ye]?ke==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Be} ${it} a_${Ye};
varying ${Be} ${He} ${Ye};
#else
uniform ${Be} ${He} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = a_${Ye};
#else
    ${Be} ${He} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${Be} ${He} ${Ye} = u_${Ye};
#endif
`:ke==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Be} ${it} a_${Ye};
#else
uniform ${Be} ${He} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Be} ${He} ${Ye} = a_${Ye};
#else
    ${Be} ${He} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Be} ${He} ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${Be} ${He} ${Ye} = u_${Ye};
#endif
`}),staticAttributes:C,staticUniforms:te}}class tx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,D,U,te,pe,ge,ke){this.context=l;let Be=this.boundPaintVertexBuffers.length!==D.length;for(let He=0;!Be&&He<D.length;He++)this.boundPaintVertexBuffers[He]!==D[He]&&(Be=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===C&&!Be&&this.boundIndexBuffer===U&&this.boundVertexOffset===te&&this.boundDynamicVertexBuffer===pe&&this.boundDynamicVertexBuffer2===ge&&this.boundDynamicVertexBuffer3===ke?(l.bindVertexArrayOES.set(this.vao),pe&&pe.bind(),U&&U.dynamicDraw&&U.bind(),ge&&ge.bind(),ke&&ke.bind()):this.freshBind(p,C,D,U,te,pe,ge,ke)}freshBind(l,p,C,D,U,te,pe,ge){let ke;const Be=l.numAttributes,He=this.context,Ye=He.gl;if(He.extVertexArrayObject)this.vao&&this.destroy(),this.vao=He.extVertexArrayObject.createVertexArrayOES(),He.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=D,this.boundVertexOffset=U,this.boundDynamicVertexBuffer=te,this.boundDynamicVertexBuffer2=pe,this.boundDynamicVertexBuffer3=ge;else{ke=He.currentNumAttributes||0;for(let it=Be;it<ke;it++)Ye.disableVertexAttribArray(it)}p.enableAttributes(Ye,l);for(const it of C)it.enableAttributes(Ye,l);te&&te.enableAttributes(Ye,l),pe&&pe.enableAttributes(Ye,l),ge&&ge.enableAttributes(Ye,l),p.bind(),p.setVertexAttribPointers(Ye,l,U);for(const it of C)it.bind(),it.setVertexAttribPointers(Ye,l,U);te&&(te.bind(),te.setVertexAttribPointers(Ye,l,U)),D&&D.bind(),pe&&(pe.bind(),pe.setVertexAttribPointers(Ye,l,U)),ge&&(ge.bind(),ge.setVertexAttribPointers(Ye,l,U)),He.currentNumAttributes=Be}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Jd(I){const l=[];for(let p=0;p<I.length;p++){if(I[p]===null)continue;const C=I[p].split(" ");l.push(C.pop())}return l}class ix{constructor(l,p,C,D,U,te,pe){const ge=l.gl;this.program=ge.createProgram();const ke=Jd(C.staticAttributes),Be=D?D.getBinderAttributes():[],He=ke.concat(Be),Ye=ll.prelude.staticUniforms?Jd(ll.prelude.staticUniforms):[],it=C.staticUniforms?Jd(C.staticUniforms):[],Je=D?D.getBinderUniforms():[],tt=Ye.concat(it).concat(Je),pt=[];for(const Ot of tt)pt.indexOf(Ot)<0&&pt.push(Ot);const yt=D?D.defines():[];te&&yt.push("#define OVERDRAW_INSPECTOR;"),pe&&yt.push("#define TERRAIN3D;");const Ct=yt.concat(ll.prelude.fragmentSource,C.fragmentSource).join(`
`),st=yt.concat(ll.prelude.vertexSource,C.vertexSource).join(`
`),It=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);ge.shaderSource(It,Ct),ge.compileShader(It),ge.attachShader(this.program,It);const Et=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);ge.shaderSource(Et,st),ge.compileShader(Et),ge.attachShader(this.program,Et),this.attributes={};const jt={};this.numAttributes=He.length;for(let Ot=0;Ot<this.numAttributes;Ot++)He[Ot]&&(ge.bindAttribLocation(this.program,Ot,He[Ot]),this.attributes[He[Ot]]=Ot);ge.linkProgram(this.program),ge.deleteShader(Et),ge.deleteShader(It);for(let Ot=0;Ot<pt.length;Ot++){const Vt=pt[Ot];if(Vt&&!jt[Vt]){const Lt=ge.getUniformLocation(this.program,Vt);Lt&&(jt[Vt]=Lt)}}this.fixedUniforms=U(l,jt),this.terrainUniforms=((Ot,Vt)=>({u_depth:new s.Uniform1i(Ot,Vt.u_depth),u_terrain:new s.Uniform1i(Ot,Vt.u_terrain),u_terrain_dim:new s.Uniform1f(Ot,Vt.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(Ot,Vt.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(Ot,Vt.u_terrain_unpack),u_terrain_offset:new s.Uniform1f(Ot,Vt.u_terrain_offset),u_terrain_exaggeration:new s.Uniform1f(Ot,Vt.u_terrain_exaggeration)}))(l,jt),this.binderUniforms=D?D.getUniforms(l,jt):[]}draw(l,p,C,D,U,te,pe,ge,ke,Be,He,Ye,it,Je,tt,pt,yt,Ct){const st=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(D),l.setColorMode(U),l.setCullFace(te),ge){l.activeTexture.set(st.TEXTURE2),st.bindTexture(st.TEXTURE_2D,ge.depthTexture),l.activeTexture.set(st.TEXTURE3),st.bindTexture(st.TEXTURE_2D,ge.texture);for(const Et in this.terrainUniforms)this.terrainUniforms[Et].set(ge[Et])}for(const Et in this.fixedUniforms)this.fixedUniforms[Et].set(pe[Et]);tt&&tt.setUniforms(l,this.binderUniforms,it,{zoom:Je});let It=0;switch(p){case st.LINES:It=2;break;case st.TRIANGLES:It=3;break;case st.LINE_STRIP:It=1}for(const Et of Ye.get()){const jt=Et.vaos||(Et.vaos={});(jt[ke]||(jt[ke]=new tx)).bind(l,this,Be,tt?tt.getPaintVertexBuffers():[],He,Et.vertexOffset,pt,yt,Ct),st.drawElements(p,Et.primitiveLength*It,st.UNSIGNED_SHORT,Et.primitiveOffset*It*2)}}}function jp(I,l,p){const C=1/nr(p,1,l.transform.tileZoom),D=Math.pow(2,p.tileID.overscaledZ),U=p.tileSize*Math.pow(2,l.transform.tileZoom)/D,te=U*(p.tileID.canonical.x+p.tileID.wrap*D),pe=U*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[te>>16,pe>>16],u_pixel_coord_lower:[65535&te,65535&pe]}}const Cg=(I,l,p,C)=>{const D=l.style.light,U=D.properties.get("position"),te=[U.x,U.y,U.z],pe=s.create$1();D.properties.get("anchor")==="viewport"&&s.fromRotation(pe,-l.transform.angle),s.transformMat3(te,te,pe);const ge=D.properties.get("color");return{u_matrix:I,u_lightpos:te,u_lightintensity:D.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+p,u_opacity:C}},Op=(I,l,p,C,D,U,te)=>s.extend(Cg(I,l,p,C),jp(U,l,te),{u_height_factor:-Math.pow(2,D.overscaledZ)/te.tileSize/8}),Fp=I=>({u_matrix:I}),Bp=(I,l,p,C)=>s.extend(Fp(I),jp(p,l,C)),Tg=(I,l)=>({u_matrix:I,u_world:l}),Sg=(I,l,p,C,D)=>s.extend(Bp(I,l,p,C),{u_world:D}),Wl=(I,l,p,C)=>{const D=I.transform;let U,te;if(C.paint.get("circle-pitch-alignment")==="map"){const pe=nr(p,1,D.zoom);U=!0,te=[pe,pe]}else U=!1,te=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(l.posMatrix,p,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+U,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:te}},eh=(I,l,p)=>{const C=nr(p,1,l.zoom),D=Math.pow(2,l.zoom-p.tileID.overscaledZ),U=p.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[l.pixelsToGLUnits[0]/(C*D),l.pixelsToGLUnits[1]/(C*D)],u_overscale_factor:U}},Ic=(I,l,p=1)=>({u_matrix:I,u_color:l,u_overlay:0,u_overlay_scale:p}),Lu=I=>({u_matrix:I}),th=(I,l,p,C)=>({u_matrix:I,u_extrude_scale:nr(l,1,p),u_intensity:C});function ih(I,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new s.MercatorCoordinate(0,C/p).toLngLat().lat,new s.MercatorCoordinate(0,(C+1)/p).toLngLat().lat]}const Nu=(I,l,p,C)=>{const D=I.transform;return{u_matrix:$p(I,l,p,C),u_ratio:1/nr(l,1,D.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},rh=(I,l,p,C,D)=>s.extend(Nu(I,l,p,D),{u_image:0,u_image_height:C}),zu=(I,l,p,C,D)=>{const U=I.transform,te=ju(l,U);return{u_matrix:$p(I,l,p,D),u_texsize:l.imageAtlasTexture.size,u_ratio:1/nr(l,1,U.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[te,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},Tn=(I,l,p,C,D,U)=>{const te=I.lineAtlas,pe=ju(l,I.transform),ge=p.layout.get("line-cap")==="round",ke=te.getDash(C.from,ge),Be=te.getDash(C.to,ge),He=ke.width*D.fromScale,Ye=Be.width*D.toScale;return s.extend(Nu(I,l,p,U),{u_patternscale_a:[pe/He,-ke.height/2],u_patternscale_b:[pe/Ye,-Be.height/2],u_sdfgamma:te.width/(256*Math.min(He,Ye)*I.pixelRatio)/2,u_image:0,u_tex_y_a:ke.y,u_tex_y_b:Be.y,u_mix:D.t})};function ju(I,l){return 1/nr(I,1,l.tileZoom)}function $p(I,l,p,C){return I.translatePosMatrix(C?C.posMatrix:l.tileID.posMatrix,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Eg=(I,l,p,C,D)=>{return{u_matrix:I,u_tl_parent:l,u_scale_parent:p,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(te=D.paint.get("raster-saturation"),te>0?1-1/(1.001-te):-te),u_contrast_factor:(U=D.paint.get("raster-contrast"),U>0?1/(1-U):1+U),u_spin_weights:kg(D.paint.get("raster-hue-rotate"))};var U,te};function kg(I){I*=Math.PI/180;const l=Math.sin(I),p=Math.cos(I);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const nh=(I,l,p,C,D,U,te,pe,ge,ke)=>{const Be=D.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Be.cameraToCenterDistance,u_pitch:Be.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Be.width/Be.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:U,u_label_plane_matrix:te,u_coord_matrix:pe,u_is_text:+ge,u_pitch_with_map:+C,u_texsize:ke,u_texture:0}},Up=(I,l,p,C,D,U,te,pe,ge,ke,Be)=>{const He=D.transform;return s.extend(nh(I,l,p,C,D,U,te,pe,ge,ke),{u_gamma_scale:C?Math.cos(He._pitch)*He.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:1})},rx=(I,l,p,C,D,U,te,pe,ge,ke)=>s.extend(Up(I,l,p,C,D,U,te,pe,!0,ge),{u_texsize_icon:ke,u_texture_icon:1}),nx=(I,l,p)=>({u_matrix:I,u_opacity:l,u_color:p}),Vp=(I,l,p,C,D,U)=>s.extend(function(te,pe,ge,ke){const Be=ge.imageManager.getPattern(te.from.toString()),He=ge.imageManager.getPattern(te.to.toString()),{width:Ye,height:it}=ge.imageManager.getPixelSize(),Je=Math.pow(2,ke.tileID.overscaledZ),tt=ke.tileSize*Math.pow(2,ge.transform.tileZoom)/Je,pt=tt*(ke.tileID.canonical.x+ke.tileID.wrap*Je),yt=tt*ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Be.tl,u_pattern_br_a:Be.br,u_pattern_tl_b:He.tl,u_pattern_br_b:He.br,u_texsize:[Ye,it],u_mix:pe.t,u_pattern_size_a:Be.displaySize,u_pattern_size_b:He.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/nr(ke,1,ge.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(C,U,p,D),{u_matrix:I,u_opacity:l}),Hp={fillExtrusion:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_lightpos:new s.Uniform3f(I,l.u_lightpos),u_lightintensity:new s.Uniform1f(I,l.u_lightintensity),u_lightcolor:new s.Uniform3f(I,l.u_lightcolor),u_vertical_gradient:new s.Uniform1f(I,l.u_vertical_gradient),u_opacity:new s.Uniform1f(I,l.u_opacity)}),fillExtrusionPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_lightpos:new s.Uniform3f(I,l.u_lightpos),u_lightintensity:new s.Uniform1f(I,l.u_lightintensity),u_lightcolor:new s.Uniform3f(I,l.u_lightcolor),u_vertical_gradient:new s.Uniform1f(I,l.u_vertical_gradient),u_height_factor:new s.Uniform1f(I,l.u_height_factor),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade),u_opacity:new s.Uniform1f(I,l.u_opacity)}),fill:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),fillPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),fillOutline:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world)}),fillOutlinePattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),circle:(I,l)=>({u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(I,l.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(I,l.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),collisionBox:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(I,l.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(I,l.u_extrude_scale),u_overscale_factor:new s.Uniform1f(I,l.u_overscale_factor)}),collisionCircle:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_inv_matrix:new s.UniformMatrix4f(I,l.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(I,l.u_viewport_size)}),debug:(I,l)=>({u_color:new s.UniformColor(I,l.u_color),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_overlay:new s.Uniform1i(I,l.u_overlay),u_overlay_scale:new s.Uniform1f(I,l.u_overlay_scale)}),clippingMask:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),heatmap:(I,l)=>({u_extrude_scale:new s.Uniform1f(I,l.u_extrude_scale),u_intensity:new s.Uniform1f(I,l.u_intensity),u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),heatmapTexture:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world),u_image:new s.Uniform1i(I,l.u_image),u_color_ramp:new s.Uniform1i(I,l.u_color_ramp),u_opacity:new s.Uniform1f(I,l.u_opacity)}),hillshade:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_latrange:new s.Uniform2f(I,l.u_latrange),u_light:new s.Uniform2f(I,l.u_light),u_shadow:new s.UniformColor(I,l.u_shadow),u_highlight:new s.UniformColor(I,l.u_highlight),u_accent:new s.UniformColor(I,l.u_accent)}),hillshadePrepare:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_dimension:new s.Uniform2f(I,l.u_dimension),u_zoom:new s.Uniform1f(I,l.u_zoom),u_unpack:new s.Uniform4f(I,l.u_unpack)}),line:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels)}),lineGradient:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_image:new s.Uniform1i(I,l.u_image),u_image_height:new s.Uniform1f(I,l.u_image_height)}),linePattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texsize:new s.Uniform2f(I,l.u_texsize),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_image:new s.Uniform1i(I,l.u_image),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),lineSDF:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(I,l.u_patternscale_a),u_patternscale_b:new s.Uniform2f(I,l.u_patternscale_b),u_sdfgamma:new s.Uniform1f(I,l.u_sdfgamma),u_image:new s.Uniform1i(I,l.u_image),u_tex_y_a:new s.Uniform1f(I,l.u_tex_y_a),u_tex_y_b:new s.Uniform1f(I,l.u_tex_y_b),u_mix:new s.Uniform1f(I,l.u_mix)}),raster:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_tl_parent:new s.Uniform2f(I,l.u_tl_parent),u_scale_parent:new s.Uniform1f(I,l.u_scale_parent),u_buffer_scale:new s.Uniform1f(I,l.u_buffer_scale),u_fade_t:new s.Uniform1f(I,l.u_fade_t),u_opacity:new s.Uniform1f(I,l.u_opacity),u_image0:new s.Uniform1i(I,l.u_image0),u_image1:new s.Uniform1i(I,l.u_image1),u_brightness_low:new s.Uniform1f(I,l.u_brightness_low),u_brightness_high:new s.Uniform1f(I,l.u_brightness_high),u_saturation_factor:new s.Uniform1f(I,l.u_saturation_factor),u_contrast_factor:new s.Uniform1f(I,l.u_contrast_factor),u_spin_weights:new s.Uniform3f(I,l.u_spin_weights)}),symbolIcon:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texture:new s.Uniform1i(I,l.u_texture)}),symbolSDF:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texture:new s.Uniform1i(I,l.u_texture),u_gamma_scale:new s.Uniform1f(I,l.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(I,l.u_is_halo)}),symbolTextAndIcon:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texsize_icon:new s.Uniform2f(I,l.u_texsize_icon),u_texture:new s.Uniform1i(I,l.u_texture),u_texture_icon:new s.Uniform1i(I,l.u_texture_icon),u_gamma_scale:new s.Uniform1f(I,l.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(I,l.u_is_halo)}),background:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_opacity:new s.Uniform1f(I,l.u_opacity),u_color:new s.UniformColor(I,l.u_color)}),backgroundPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_opacity:new s.Uniform1f(I,l.u_opacity),u_image:new s.Uniform1i(I,l.u_image),u_pattern_tl_a:new s.Uniform2f(I,l.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(I,l.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(I,l.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(I,l.u_pattern_br_b),u_texsize:new s.Uniform2f(I,l.u_texsize),u_mix:new s.Uniform1f(I,l.u_mix),u_pattern_size_a:new s.Uniform2f(I,l.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(I,l.u_pattern_size_b),u_scale_a:new s.Uniform1f(I,l.u_scale_a),u_scale_b:new s.Uniform1f(I,l.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(I,l.u_tile_units_to_pixels)}),terrain:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texture:new s.Uniform1i(I,l.u_texture)}),terrainDepth:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),terrainCoords:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texture:new s.Uniform1i(I,l.u_texture),u_terrain_coords_id:new s.Uniform1f(I,l.u_terrain_coords_id)})};class Gp{constructor(l,p,C){this.context=l;const D=l.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mg{constructor(l,p,C,D){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=D,this.context=l;const U=l.gl;this.buffer=U.createBuffer(),l.bindVertexBuffer.set(this.buffer),U.bufferData(U.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const D=p.attributes[this.attributes[C].name];D!==void 0&&l.enableVertexAttribArray(D)}}setVertexAttribPointers(l,p,C){for(let D=0;D<this.attributes.length;D++){const U=this.attributes[D],te=p.attributes[U.name];te!==void 0&&l.vertexAttribPointer(te,U.components,l[qp[U.type]],!1,this.itemSize,U.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class sx extends zr{getDefault(){return s.Color.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ou extends zr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Fu extends zr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Ag extends zr{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Aa extends zr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Wp extends zr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class sh extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class ah extends zr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Yp extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class Zp extends zr{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class oh extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class Xp extends zr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Kp extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class lh extends zr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ig extends zr{getDefault(){return s.Color.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Pg extends zr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Pc extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class ax extends zr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class ox extends zr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class lx extends zr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class cx extends zr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class ux extends zr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class dx extends zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Qp extends zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ch extends zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Jp extends zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ef extends zr{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Dc extends zr{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Dg extends zr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Rg extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class tf extends zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class cl extends zr{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class Lg extends cl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Rc extends cl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Lc{constructor(l,p,C,D){this.context=l,this.width=p,this.height=C;const U=l.gl,te=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new Lg(l,te),D&&(this.depthAttachment=new Rc(l,te)),U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class Rn{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}Rn.Replace=[1,0],Rn.disabled=new Rn(Rn.Replace,s.Color.transparent,[!1,!1,!1,!1]),Rn.unblended=new Rn(Rn.Replace,s.Color.transparent,[!0,!0,!0,!0]),Rn.alphaBlended=new Rn([1,771],s.Color.transparent,[!0,!0,!0,!0]);class rf{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new sx(this),this.clearDepth=new Ou(this),this.clearStencil=new Fu(this),this.colorMask=new Ag(this),this.depthMask=new Aa(this),this.stencilMask=new Wp(this),this.stencilFunc=new sh(this),this.stencilOp=new ah(this),this.stencilTest=new Yp(this),this.depthRange=new Zp(this),this.depthTest=new oh(this),this.depthFunc=new Xp(this),this.blend=new Kp(this),this.blendFunc=new lh(this),this.blendColor=new Ig(this),this.blendEquation=new Pg(this),this.cullFace=new Pc(this),this.cullFaceSide=new ax(this),this.frontFace=new ox(this),this.program=new lx(this),this.activeTexture=new cx(this),this.viewport=new ux(this),this.bindFramebuffer=new dx(this),this.bindRenderbuffer=new Qp(this),this.bindTexture=new ch(this),this.bindVertexBuffer=new Jp(this),this.bindElementBuffer=new ef(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Dc(this),this.pixelStoreUnpack=new Dg(this),this.pixelStoreUnpackPremultiplyAlpha=new Rg(this),this.pixelStoreUnpackFlipY=new tf(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new Gp(this,l,p)}createVertexBuffer(l,p,C){return new Mg(this,l,p,C)}createRenderbuffer(l,p,C){const D=this.gl,U=D.createRenderbuffer();return this.bindRenderbuffer.set(U),D.renderbufferStorage(D.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),U}createFramebuffer(l,p,C){return new Lc(this,l,p,C)}clear({color:l,depth:p}){const C=this.gl;let D=0;l&&(D|=C.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(D|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C.clear(D)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){y(l.blendFunction,Rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wi{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}wi.ReadOnly=!1,wi.ReadWrite=!0,wi.disabled=new wi(519,wi.ReadOnly,[0,1]);const Nc=7680;class Sn{constructor(l,p,C,D,U,te){this.test=l,this.ref=p,this.mask=C,this.fail=D,this.depthFail=U,this.pass=te}}Sn.disabled=new Sn({func:519,mask:0},0,0,Nc,Nc,Nc);class dn{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}let ul;function Ng(I,l,p,C,D,U,te){const pe=I.context,ge=pe.gl,ke=I.useProgram("collisionBox"),Be=[];let He=0,Ye=0;for(let st=0;st<C.length;st++){const It=C[st],Et=l.getTile(It),jt=Et.getBucket(p);if(!jt)continue;let Ot=It.posMatrix;D[0]===0&&D[1]===0||(Ot=I.translatePosMatrix(It.posMatrix,Et,D,U));const Vt=te?jt.textCollisionBox:jt.iconCollisionBox,Lt=jt.collisionCircleArray;if(Lt.length>0){const li=s.create(),Kt=Ot;s.mul(li,jt.placementInvProjMatrix,I.transform.glCoordMatrix),s.mul(li,li,jt.placementViewportMatrix),Be.push({circleArray:Lt,circleOffset:Ye,transform:Kt,invTransform:li,coord:It}),He+=Lt.length/4,Ye=He}Vt&&ke.draw(pe,ge.LINES,wi.disabled,Sn.disabled,I.colorModeForRenderPass(),dn.disabled,eh(Ot,I.transform,Et),I.style.terrain&&I.style.terrain.getTerrainData(It),p.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,I.transform.zoom,null,null,Vt.collisionVertexBuffer)}if(!te||!Be.length)return;const it=I.useProgram("collisionCircle"),Je=new s.CollisionCircleLayoutArray;Je.resize(4*He),Je._trim();let tt=0;for(const st of Be)for(let It=0;It<st.circleArray.length/4;It++){const Et=4*It,jt=st.circleArray[Et+0],Ot=st.circleArray[Et+1],Vt=st.circleArray[Et+2],Lt=st.circleArray[Et+3];Je.emplace(tt++,jt,Ot,Vt,Lt,0),Je.emplace(tt++,jt,Ot,Vt,Lt,1),Je.emplace(tt++,jt,Ot,Vt,Lt,2),Je.emplace(tt++,jt,Ot,Vt,Lt,3)}(!ul||ul.length<2*He)&&(ul=function(st){const It=2*st,Et=new s.QuadTriangleArray;Et.resize(It),Et._trim();for(let jt=0;jt<It;jt++){const Ot=6*jt;Et.uint16[Ot+0]=4*jt+0,Et.uint16[Ot+1]=4*jt+1,Et.uint16[Ot+2]=4*jt+2,Et.uint16[Ot+3]=4*jt+2,Et.uint16[Ot+4]=4*jt+3,Et.uint16[Ot+5]=4*jt+0}return Et}(He));const pt=pe.createIndexBuffer(ul,!0),yt=pe.createVertexBuffer(Je,s.collisionCircleLayout.members,!0);for(const st of Be){const It={u_matrix:st.transform,u_inv_matrix:st.invTransform,u_camera_to_center_distance:(Ct=I.transform).cameraToCenterDistance,u_viewport_size:[Ct.width,Ct.height]};it.draw(pe,ge.TRIANGLES,wi.disabled,Sn.disabled,I.colorModeForRenderPass(),dn.disabled,It,I.style.terrain&&I.style.terrain.getTerrainData(st.coord),p.id,yt,pt,s.SegmentVector.simpleSegment(0,2*st.circleOffset,st.circleArray.length,st.circleArray.length/2),null,I.transform.zoom,null,null,null)}var Ct;yt.destroy(),pt.destroy()}dn.disabled=new dn(!1,1029,2305),dn.backCCW=new dn(!0,1029,2305);const hx=s.identity(new Float32Array(16));function zg(I,l,p,C,D,U){const{horizontalAlign:te,verticalAlign:pe}=s.getAnchorAlignment(I),ge=-(te-.5)*l,ke=-(pe-.5)*p,Be=s.evaluateVariableOffset(I,C);return new s.pointGeometry((ge/D+Be[0])*U,(ke/D+Be[1])*U)}function px(I,l,p,C,D,U,te,pe,ge,ke,Be){const He=I.text.placedSymbolArray,Ye=I.text.dynamicLayoutVertexArray,it=I.icon.dynamicLayoutVertexArray,Je={};Ye.clear();for(let tt=0;tt<He.length;tt++){const pt=He.get(tt),yt=I.allowVerticalPlacement&&!pt.placedOrientation,Ct=pt.hidden||!pt.crossTileID||yt?null:C[pt.crossTileID];if(Ct){const st=new s.pointGeometry(pt.anchorX,pt.anchorY),It=dt(st,p?te:U,Be),Et=gt(D.cameraToCenterDistance,It.signedDistanceFromCamera);let jt=s.evaluateSizeForFeature(I.textSizeData,ge,pt)*Et/s.ONE_EM;p&&(jt*=I.tilePixelRatio/pe);const{width:Ot,height:Vt,anchor:Lt,textOffset:li,textBoxScale:Kt}=Ct,ui=zg(Lt,Ot,Vt,li,Kt,jt),Ji=p?dt(st.add(ui),U,Be).point:It.point.add(l?ui.rotate(-D.angle):ui),cr=I.allowVerticalPlacement&&pt.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Pi=0;Pi<pt.numGlyphs;Pi++)s.addDynamicAttributes(Ye,Ji,cr);ke&&pt.associatedIconIndex>=0&&(Je[pt.associatedIconIndex]={shiftedAnchor:Ji,angle:cr})}else hr(pt.numGlyphs,Ye)}if(ke){it.clear();const tt=I.icon.placedSymbolArray;for(let pt=0;pt<tt.length;pt++){const yt=tt.get(pt);if(yt.hidden)hr(yt.numGlyphs,it);else{const Ct=Je[pt];if(Ct)for(let st=0;st<yt.numGlyphs;st++)s.addDynamicAttributes(it,Ct.shiftedAnchor,Ct.angle);else hr(yt.numGlyphs,it)}}I.icon.dynamicLayoutVertexBuffer.updateData(it)}I.text.dynamicLayoutVertexBuffer.updateData(Ye)}function nf(I,l,p){return p.iconsInText&&l?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function Bu(I,l,p,C,D,U,te,pe,ge,ke,Be,He){const Ye=I.context,it=Ye.gl,Je=I.transform,tt=pe==="map",pt=ge==="map",yt=pe!=="viewport"&&p.layout.get("symbol-placement")!=="point",Ct=tt&&!pt&&!yt,st=!p.layout.get("symbol-sort-key").isConstant();let It=!1;const Et=I.depthModeForSublayer(0,wi.ReadOnly),jt=p.layout.get("text-variable-anchor"),Ot=[];for(const Vt of C){const Lt=l.getTile(Vt),li=Lt.getBucket(p);if(!li)continue;const Kt=D?li.text:li.icon;if(!Kt||!Kt.segments.get().length)continue;const ui=Kt.programConfigurations.get(p.id),Ji=D||li.sdfIcons,cr=D?li.textSizeData:li.iconSizeData,Pi=pt||Je.pitch!==0,Gr=I.useProgram(nf(Ji,D,li),ui),qr=s.evaluateSizeForZoom(cr,Je.zoom),_r=I.style.terrain&&I.style.terrain.getTerrainData(Vt);let Tr,Mr,Pa,Do,uo=[0,0],ho=null;if(D){if(Mr=Lt.glyphAtlasTexture,Pa=it.LINEAR,Tr=Lt.glyphAtlasTexture.size,li.iconsInText){uo=Lt.imageAtlasTexture.size,ho=Lt.imageAtlasTexture;const Xa=cr.kind==="composite"||cr.kind==="camera";Do=Pi||I.options.rotating||I.options.zooming||Xa?it.LINEAR:it.NEAREST}}else{const Xa=p.layout.get("icon-size").constantOr(0)!==1||li.iconsNeedLinear;Mr=Lt.imageAtlasTexture,Pa=Ji||I.options.rotating||I.options.zooming||Xa||Pi?it.LINEAR:it.NEAREST,Tr=Lt.imageAtlasTexture.size}const ec=nr(Lt,1,I.transform.zoom),Es=at(Vt.posMatrix,pt,tt,I.transform,ec),po=rt(Vt.posMatrix,pt,tt,I.transform,ec),tc=jt&&li.hasTextData(),Th=p.layout.get("icon-text-fit")!=="none"&&tc&&li.hasIconData();if(yt){const Xa=I.style.terrain?($c,Sh)=>I.style.terrain.getElevation(Vt,$c,Sh):null,Bc=p.layout.get("text-rotation-alignment")==="map";Nt(li,Vt.posMatrix,I,D,Es,po,pt,ke,Bc,Xa)}const Ar=I.translatePosMatrix(Vt.posMatrix,Lt,U,te),pn=yt||D&&jt||Th?hx:Es,Rr=I.translatePosMatrix(po,Lt,U,te,!0),Xn=Ji&&p.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ma;ma=Ji?li.iconsInText?rx(cr.kind,qr,Ct,pt,I,Ar,pn,Rr,Tr,uo):Up(cr.kind,qr,Ct,pt,I,Ar,pn,Rr,D,Tr):nh(cr.kind,qr,Ct,pt,I,Ar,pn,Rr,D,Tr);const vn={program:Gr,buffers:Kt,uniformValues:ma,atlasTexture:Mr,atlasTextureIcon:ho,atlasInterpolation:Pa,atlasInterpolationIcon:Do,isSDF:Ji,hasHalo:Xn};if(st&&li.canOverlap){It=!0;const Xa=Kt.segments.get();for(const Bc of Xa)Ot.push({segments:new s.SegmentVector([Bc]),sortKey:Bc.sortKey,state:vn,terrainData:_r})}else Ot.push({segments:Kt.segments,sortKey:0,state:vn,terrainData:_r})}It&&Ot.sort((Vt,Lt)=>Vt.sortKey-Lt.sortKey);for(const Vt of Ot){const Lt=Vt.state;if(Ye.activeTexture.set(it.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,it.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(Ye.activeTexture.set(it.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),Lt.isSDF){const li=Lt.uniformValues;Lt.hasHalo&&(li.u_is_halo=1,$u(Lt.buffers,Vt.segments,p,I,Lt.program,Et,Be,He,li,Vt.terrainData)),li.u_is_halo=0}$u(Lt.buffers,Vt.segments,p,I,Lt.program,Et,Be,He,Lt.uniformValues,Vt.terrainData)}}function $u(I,l,p,C,D,U,te,pe,ge,ke){const Be=C.context;D.draw(Be,Be.gl.TRIANGLES,U,te,pe,dn.disabled,ge,ke,p.id,I.layoutVertexBuffer,I.indexBuffer,l,p.paint,C.transform.zoom,I.programConfigurations.get(p.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function uh(I,l,p,C,D,U,te){const pe=I.context.gl,ge=p.paint.get("fill-pattern"),ke=ge&&ge.constantOr(1),Be=p.getCrossfadeParameters();let He,Ye,it,Je,tt;te?(Ye=ke&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",He=pe.LINES):(Ye=ke?"fillPattern":"fill",He=pe.TRIANGLES);for(const pt of C){const yt=l.getTile(pt);if(ke&&!yt.patternsLoaded())continue;const Ct=yt.getBucket(p);if(!Ct)continue;const st=Ct.programConfigurations.get(p.id),It=I.useProgram(Ye,st),Et=I.style.terrain&&I.style.terrain.getTerrainData(pt);ke&&(I.context.activeTexture.set(pe.TEXTURE0),yt.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),st.updatePaintBuffers(Be));const jt=ge.constantOr(null);if(jt&&yt.imageAtlas){const Lt=yt.imageAtlas,li=Lt.patternPositions[jt.to.toString()],Kt=Lt.patternPositions[jt.from.toString()];li&&Kt&&st.setConstantPatternPositions(li,Kt)}const Ot=Et?pt:null,Vt=I.translatePosMatrix(Ot?Ot.posMatrix:pt.posMatrix,yt,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(te){Je=Ct.indexBuffer2,tt=Ct.segments2;const Lt=[pe.drawingBufferWidth,pe.drawingBufferHeight];it=Ye==="fillOutlinePattern"&&ke?Sg(Vt,I,Be,yt,Lt):Tg(Vt,Lt)}else Je=Ct.indexBuffer,tt=Ct.segments,it=ke?Bp(Vt,I,Be,yt):Fp(Vt);It.draw(I.context,He,D,I.stencilModeForClipping(pt),U,dn.disabled,it,Et,p.id,Ct.layoutVertexBuffer,Je,tt,p.paint,I.transform.zoom,st)}}function Uu(I,l,p,C,D,U,te){const pe=I.context,ge=pe.gl,ke=p.paint.get("fill-extrusion-pattern"),Be=ke.constantOr(1),He=p.getCrossfadeParameters(),Ye=p.paint.get("fill-extrusion-opacity");for(const it of C){const Je=l.getTile(it),tt=Je.getBucket(p);if(!tt)continue;const pt=I.style.terrain&&I.style.terrain.getTerrainData(it),yt=tt.programConfigurations.get(p.id),Ct=I.useProgram(Be?"fillExtrusionPattern":"fillExtrusion",yt);Be&&(I.context.activeTexture.set(ge.TEXTURE0),Je.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),yt.updatePaintBuffers(He));const st=ke.constantOr(null);if(st&&Je.imageAtlas){const Ot=Je.imageAtlas,Vt=Ot.patternPositions[st.to.toString()],Lt=Ot.patternPositions[st.from.toString()];Vt&&Lt&&yt.setConstantPatternPositions(Vt,Lt)}const It=I.translatePosMatrix(it.posMatrix,Je,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Et=p.paint.get("fill-extrusion-vertical-gradient"),jt=Be?Op(It,I,Et,Ye,it,He,Je):Cg(It,I,Et,Ye);Ct.draw(pe,pe.gl.TRIANGLES,D,U,te,dn.backCCW,jt,pt,p.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,p.paint,I.transform.zoom,yt,I.style.terrain&&tt.centroidVertexBuffer)}}function jg(I,l,p,C,D,U,te){const pe=I.context,ge=pe.gl,ke=p.fbo;if(!ke)return;const Be=I.useProgram("hillshade"),He=I.style.terrain&&I.style.terrain.getTerrainData(l);pe.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,ke.colorAttachment.get()),Be.draw(pe,ge.TRIANGLES,D,U,te,dn.disabled,((Ye,it,Je,tt)=>{const pt=Je.paint.get("hillshade-shadow-color"),yt=Je.paint.get("hillshade-highlight-color"),Ct=Je.paint.get("hillshade-accent-color");let st=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(st-=Ye.transform.angle);const It=!Ye.options.moving;return{u_matrix:tt?tt.posMatrix:Ye.transform.calculatePosMatrix(it.tileID.toUnwrapped(),It),u_image:0,u_latrange:ih(0,it.tileID),u_light:[Je.paint.get("hillshade-exaggeration"),st],u_shadow:pt,u_highlight:yt,u_accent:Ct}})(I,p,C,He?l:null),He,C.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}function dh(I,l,p,C,D,U){const te=I.context,pe=te.gl,ge=l.dem;if(ge&&ge.data){const ke=ge.dim,Be=ge.stride,He=ge.getPixels();if(te.activeTexture.set(pe.TEXTURE1),te.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||I.getTileTexture(Be),l.demTexture){const it=l.demTexture;it.update(He,{premultiply:!1}),it.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else l.demTexture=new _(te,He,pe.RGBA,{premultiply:!1}),l.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);te.activeTexture.set(pe.TEXTURE0);let Ye=l.fbo;if(!Ye){const it=new _(te,{width:ke,height:ke,data:null},pe.RGBA);it.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ye=l.fbo=te.createFramebuffer(ke,ke,!0),Ye.colorAttachment.set(it.texture)}te.bindFramebuffer.set(Ye.framebuffer),te.viewport.set([0,0,ke,ke]),I.useProgram("hillshadePrepare").draw(te,pe.TRIANGLES,C,D,U,dn.disabled,((it,Je)=>{const tt=Je.stride,pt=s.create();return s.ortho(pt,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(pt,pt,[0,-s.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[tt,tt],u_zoom:it.overscaledZ,u_unpack:Je.getUnpackVector()}})(l.tileID,ge),null,p.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function hh(I,l,p,C,D,U){const te=C.paint.get("raster-fade-duration");if(!U&&te>0){const pe=s.exported.now(),ge=(pe-I.timeAdded)/te,ke=l?(pe-l.timeAdded)/te:-1,Be=p.getSource(),He=D.coveringZoomLevel({tileSize:Be.tileSize,roundZoom:Be.roundZoom}),Ye=!l||Math.abs(l.tileID.overscaledZ-He)>Math.abs(I.tileID.overscaledZ-He),it=Ye&&I.refreshedUponExpiration?1:s.clamp(Ye?ge:1-ke,0,1);return I.refreshedUponExpiration&&ge>=1&&(I.refreshedUponExpiration=!1),l?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const co=new s.Color(1,0,0,1),Og=new s.Color(0,1,0,1),sf=new s.Color(0,0,1,1),Fg=new s.Color(1,0,1,1),zc=new s.Color(0,1,1,1);function Vu(I,l,p,C){fh(I,0,l+p/2,I.transform.width,p,C)}function ph(I,l,p,C){fh(I,l-p/2,0,p,I.transform.height,C)}function fh(I,l,p,C,D,U){const te=I.context,pe=te.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(l*I.pixelRatio,p*I.pixelRatio,C*I.pixelRatio,D*I.pixelRatio),te.clear({color:U}),pe.disable(pe.SCISSOR_TEST)}function af(I,l,p){const C=I.context,D=C.gl,U=p.posMatrix,te=I.useProgram("debug"),pe=wi.disabled,ge=Sn.disabled,ke=I.colorModeForRenderPass(),Be="$debug",He=I.style.terrain&&I.style.terrain.getTerrainData(p);C.activeTexture.set(D.TEXTURE0),I.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE);const Ye=l.getTileByID(p.key).latestRawTileData,it=Math.floor((Ye&&Ye.byteLength||0)/1024),Je=l.getTile(p).tileSize,tt=512/Math.min(Je,512)*(p.overscaledZ/I.transform.zoom)*.5;let pt=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(pt+=` => ${p.overscaledZ}`),function(yt,Ct){yt.initDebugOverlayCanvas();const st=yt.debugOverlayCanvas,It=yt.context.gl,Et=yt.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,st.width,st.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(Ct,5,5),Et.strokeText(Ct,5,5),yt.debugOverlayTexture.update(st),yt.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)}(I,`${pt} ${it}kB`),te.draw(C,D.TRIANGLES,pe,ge,Rn.alphaBlended,dn.disabled,Ic(U,s.Color.transparent,tt),null,Be,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),te.draw(C,D.LINE_STRIP,pe,ge,ke,dn.disabled,Ic(U,s.Color.red),He,Be,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function Bg(I,l,p){const C=I.context,D=C.gl,U=I.colorModeForRenderPass(),te=new wi(D.LEQUAL,wi.ReadWrite,I.depthRangeFor3D),pe=I.useProgram("terrain"),ge=l.getTerrainMesh(),ke=l.getTerrainData(p.tileID);C.bindFramebuffer.set(null),C.viewport.set([0,0,I.width,I.height]),C.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,l.getRTTFramebuffer().colorAttachment.get());const Be=I.transform.calculatePosMatrix(p.tileID.toUnwrapped());pe.draw(C,D.TRIANGLES,te,Sn.disabled,U,dn.backCCW,{u_matrix:Be,u_texture:0},ke,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}function of(I,l,p,C){const D=I.context,U=p.tileSize*l.qualityFactor;p.textures[C]||(p.textures[C]=I.getTileTexture(U)||new _(D,{width:U,height:U,data:null},D.gl.RGBA),p.textures[C].bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),C===0&&l.sourceCache.renderHistory.unshift(p.tileID.key));const te=l.getRTTFramebuffer();te.colorAttachment.set(p.textures[C].texture),D.bindFramebuffer.set(te.framebuffer),D.viewport.set([0,0,U,U])}class mh{constructor(l){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=l,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=l.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const l=this.painter.style,p=l.terrain;for(const C in l.sourceCaches){this._coordsDescendingInv[C]={};const D=l.sourceCaches[C].getVisibleCoordinates();for(const U of D){const te=p.sourceCache.getTerrainCoords(U);for(const pe in te)this._coordsDescendingInv[C][pe]||(this._coordsDescendingInv[C][pe]=[]),this._coordsDescendingInv[C][pe].push(te[pe])}}for(const C of l._order){const D=l._layers[C],U=D.source;if(this._renderToTexture[D.type]&&!this._coordsDescendingInvStr[U]){this._coordsDescendingInvStr[U]={};for(const te in this._coordsDescendingInv[U])this._coordsDescendingInvStr[U][te]=this._coordsDescendingInv[U][te].map(pe=>pe.key).sort().join()}}return this._renderableTiles.forEach(C=>{for(const D in this._coordsDescendingInvStr){const U=this._coordsDescendingInvStr[D][C.tileID.key];U&&U!==C.textureCoords[D]&&C.clearTextures(this.painter),p.needsRerender(D,C.tileID)&&C.clearTextures(this.painter)}this._rerender[C.tileID.key]=!C.textures.length}),p.clearRerenderCache(),p.sourceCache.removeOutdated(this.painter),this}renderLayer(l){const p=l.type,C=this.painter,D=C.style._order,U=C.currentLayer,te=U+1===D.length;if(this._renderToTexture[p]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(D[U]),!te))return!0;if(this._renderToTexture[this._prevType]||p==="hillshade"||this._renderToTexture[p]&&te){this._prevType=p;const pe=this._stacks.length-1,ge=this._stacks[pe]||[];for(const ke of this._renderableTiles){if(of(C,C.style.terrain,ke,pe),this._rerender[ke.tileID.key]){C.context.clear({color:s.Color.transparent});for(let Be=0;Be<ge.length;Be++){const He=C.style._layers[ge[Be]],Ye=He.source?this._coordsDescendingInv[He.source][ke.tileID.key]:[ke.tileID];C._renderTileClippingMasks(He,Ye),C.renderLayer(C,C.style.sourceCaches[He.source],He,Ye),He.source&&(ke.textureCoords[He.source]=this._coordsDescendingInvStr[He.source][ke.tileID.key])}}Bg(C,C.style.terrain,ke)}if(p==="hillshade"){this._stacks.push([D[U]]);for(const ke of this._renderableTiles){const Be=this._coordsDescendingInv[l.source][ke.tileID.key];of(C,C.style.terrain,ke,this._stacks.length-1),C.context.clear({color:s.Color.transparent}),C._renderTileClippingMasks(l,Be),C.renderLayer(C,C.style.sourceCaches[l.source],l,Be),Bg(C,C.style.terrain,ke)}return!0}return this._renderToTexture[p]}return!1}}const gh={symbol:function(I,l,p,C,D){if(I.renderPass!=="translucent")return;const U=Sn.disabled,te=I.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(pe,ge,ke,Be,He,Ye,it){const Je=ge.transform,tt=He==="map",pt=Ye==="map";for(const yt of pe){const Ct=Be.getTile(yt),st=Ct.getBucket(ke);if(!st||!st.text||!st.text.segments.get().length)continue;const It=s.evaluateSizeForZoom(st.textSizeData,Je.zoom),Et=nr(Ct,1,ge.transform.zoom),jt=at(yt.posMatrix,pt,tt,ge.transform,Et),Ot=ke.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(It){const Vt=Math.pow(2,Je.zoom-Ct.tileID.overscaledZ);px(st,tt,pt,it,Je,jt,yt.posMatrix,Vt,It,Ot,ge.style.terrain?(Lt,li)=>ge.style.terrain.getElevation(yt,Lt,li):null)}}}(C,I,p,l,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),D),p.paint.get("icon-opacity").constantOr(1)!==0&&Bu(I,l,p,C,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),U,te),p.paint.get("text-opacity").constantOr(1)!==0&&Bu(I,l,p,C,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),U,te),l.map.showCollisionBoxes&&(Ng(I,l,p,C,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Ng(I,l,p,C,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(I,l,p,C){if(I.renderPass!=="translucent")return;const D=p.paint.get("circle-opacity"),U=p.paint.get("circle-stroke-width"),te=p.paint.get("circle-stroke-opacity"),pe=!p.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(U.constantOr(1)===0||te.constantOr(1)===0))return;const ge=I.context,ke=ge.gl,Be=I.depthModeForSublayer(0,wi.ReadOnly),He=Sn.disabled,Ye=I.colorModeForRenderPass(),it=[];for(let Je=0;Je<C.length;Je++){const tt=C[Je],pt=l.getTile(tt),yt=pt.getBucket(p);if(!yt)continue;const Ct=yt.programConfigurations.get(p.id),st=I.useProgram("circle",Ct),It=yt.layoutVertexBuffer,Et=yt.indexBuffer,jt=I.style.terrain&&I.style.terrain.getTerrainData(tt),Ot={programConfiguration:Ct,program:st,layoutVertexBuffer:It,indexBuffer:Et,uniformValues:Wl(I,tt,pt,p),terrainData:jt};if(pe){const Vt=yt.segments.get();for(const Lt of Vt)it.push({segments:new s.SegmentVector([Lt]),sortKey:Lt.sortKey,state:Ot})}else it.push({segments:yt.segments,sortKey:0,state:Ot})}pe&&it.sort((Je,tt)=>Je.sortKey-tt.sortKey);for(const Je of it){const{programConfiguration:tt,program:pt,layoutVertexBuffer:yt,indexBuffer:Ct,uniformValues:st,terrainData:It}=Je.state;pt.draw(ge,ke.TRIANGLES,Be,He,Ye,dn.disabled,st,It,p.id,yt,Ct,Je.segments,p.paint,I.transform.zoom,tt)}},heatmap:function(I,l,p,C){if(p.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){const D=I.context,U=D.gl,te=Sn.disabled,pe=new Rn([U.ONE,U.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(ge,ke,Be){const He=ge.gl;ge.activeTexture.set(He.TEXTURE1),ge.viewport.set([0,0,ke.width/4,ke.height/4]);let Ye=Be.heatmapFbo;if(Ye)He.bindTexture(He.TEXTURE_2D,Ye.colorAttachment.get()),ge.bindFramebuffer.set(Ye.framebuffer);else{const it=He.createTexture();He.bindTexture(He.TEXTURE_2D,it),He.texParameteri(He.TEXTURE_2D,He.TEXTURE_WRAP_S,He.CLAMP_TO_EDGE),He.texParameteri(He.TEXTURE_2D,He.TEXTURE_WRAP_T,He.CLAMP_TO_EDGE),He.texParameteri(He.TEXTURE_2D,He.TEXTURE_MIN_FILTER,He.LINEAR),He.texParameteri(He.TEXTURE_2D,He.TEXTURE_MAG_FILTER,He.LINEAR),Ye=Be.heatmapFbo=ge.createFramebuffer(ke.width/4,ke.height/4,!1),function(Je,tt,pt,yt){const Ct=Je.gl;Ct.texImage2D(Ct.TEXTURE_2D,0,Ct.RGBA,tt.width/4,tt.height/4,0,Ct.RGBA,Je.extRenderToTextureHalfFloat?Je.extTextureHalfFloat.HALF_FLOAT_OES:Ct.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(ge,ke,it,Ye)}})(D,I,p),D.clear({color:s.Color.transparent});for(let ge=0;ge<C.length;ge++){const ke=C[ge];if(l.hasRenderableParent(ke))continue;const Be=l.getTile(ke),He=Be.getBucket(p);if(!He)continue;const Ye=He.programConfigurations.get(p.id),it=I.useProgram("heatmap",Ye),{zoom:Je}=I.transform;it.draw(D,U.TRIANGLES,wi.disabled,te,pe,dn.disabled,th(ke.posMatrix,Be,Je,p.paint.get("heatmap-intensity")),null,p.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,p.paint,I.transform.zoom,Ye)}D.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(D,U){const te=D.context,pe=te.gl,ge=U.heatmapFbo;if(!ge)return;te.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ge.colorAttachment.get()),te.activeTexture.set(pe.TEXTURE1);let ke=U.colorRampTexture;ke||(ke=U.colorRampTexture=new _(te,U.colorRamp,pe.RGBA)),ke.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(te,pe.TRIANGLES,wi.disabled,Sn.disabled,D.colorModeForRenderPass(),dn.disabled,((Be,He,Ye,it)=>{const Je=s.create();s.ortho(Je,0,Be.width,Be.height,0,0,1);const tt=Be.context.gl;return{u_matrix:Je,u_world:[tt.drawingBufferWidth,tt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:He.paint.get("heatmap-opacity")}})(D,U),null,U.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,U.paint,D.transform.zoom)}(I,p))},line:function(I,l,p,C){if(I.renderPass!=="translucent")return;const D=p.paint.get("line-opacity"),U=p.paint.get("line-width");if(D.constantOr(1)===0||U.constantOr(1)===0)return;const te=I.depthModeForSublayer(0,wi.ReadOnly),pe=I.colorModeForRenderPass(),ge=p.paint.get("line-dasharray"),ke=p.paint.get("line-pattern"),Be=ke.constantOr(1),He=p.paint.get("line-gradient"),Ye=p.getCrossfadeParameters(),it=Be?"linePattern":ge?"lineSDF":He?"lineGradient":"line",Je=I.context,tt=Je.gl;let pt=!0;for(const yt of C){const Ct=l.getTile(yt);if(Be&&!Ct.patternsLoaded())continue;const st=Ct.getBucket(p);if(!st)continue;const It=st.programConfigurations.get(p.id),Et=I.context.program.get(),jt=I.useProgram(it,It),Ot=pt||jt.program!==Et,Vt=I.style.terrain&&I.style.terrain.getTerrainData(yt),Lt=ke.constantOr(null);if(Lt&&Ct.imageAtlas){const ui=Ct.imageAtlas,Ji=ui.patternPositions[Lt.to.toString()],cr=ui.patternPositions[Lt.from.toString()];Ji&&cr&&It.setConstantPatternPositions(Ji,cr)}const li=Vt?yt:null,Kt=Be?zu(I,Ct,p,Ye,li):ge?Tn(I,Ct,p,ge,Ye,li):He?rh(I,Ct,p,st.lineClipsArray.length,li):Nu(I,Ct,p,li);if(Be)Je.activeTexture.set(tt.TEXTURE0),Ct.imageAtlasTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE),It.updatePaintBuffers(Ye);else if(ge&&(Ot||I.lineAtlas.dirty))Je.activeTexture.set(tt.TEXTURE0),I.lineAtlas.bind(Je);else if(He){const ui=st.gradients[p.id];let Ji=ui.texture;if(p.gradientVersion!==ui.version){let cr=256;if(p.stepInterpolant){const Pi=l.getSource().maxzoom,Gr=yt.canonical.z===Pi?Math.ceil(1<<I.transform.maxZoom-yt.canonical.z):1;cr=s.clamp(s.nextPowerOfTwo(st.maxLineLength/s.EXTENT*1024*Gr),256,Je.maxTextureSize)}ui.gradient=s.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:cr,image:ui.gradient||void 0,clips:st.lineClipsArray}),ui.texture?ui.texture.update(ui.gradient):ui.texture=new _(Je,ui.gradient,tt.RGBA),ui.version=p.gradientVersion,Ji=ui.texture}Je.activeTexture.set(tt.TEXTURE0),Ji.bind(p.stepInterpolant?tt.NEAREST:tt.LINEAR,tt.CLAMP_TO_EDGE)}jt.draw(Je,tt.TRIANGLES,te,I.stencilModeForClipping(yt),pe,dn.disabled,Kt,Vt,p.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,p.paint,I.transform.zoom,It,st.layoutVertexBuffer2),pt=!1}},fill:function(I,l,p,C){const D=p.paint.get("fill-color"),U=p.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const te=I.colorModeForRenderPass(),pe=p.paint.get("fill-pattern"),ge=I.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&D.constantOr(s.Color.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===ge){const ke=I.depthModeForSublayer(1,I.renderPass==="opaque"?wi.ReadWrite:wi.ReadOnly);uh(I,l,p,C,ke,te,!1)}if(I.renderPass==="translucent"&&p.paint.get("fill-antialias")){const ke=I.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,wi.ReadOnly);uh(I,l,p,C,ke,te,!0)}},"fill-extrusion":function(I,l,p,C){const D=p.paint.get("fill-extrusion-opacity");if(D!==0&&I.renderPass==="translucent"){const U=new wi(I.context.gl.LEQUAL,wi.ReadWrite,I.depthRangeFor3D);if(D!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))Uu(I,l,p,C,U,Sn.disabled,Rn.disabled),Uu(I,l,p,C,U,I.stencilModeFor3D(),I.colorModeForRenderPass());else{const te=I.colorModeForRenderPass();Uu(I,l,p,C,U,Sn.disabled,te)}}},hillshade:function(I,l,p,C){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const D=I.context,U=I.depthModeForSublayer(0,wi.ReadOnly),te=I.colorModeForRenderPass(),[pe,ge]=I.renderPass==="translucent"?I.stencilConfigForOverlap(C):[{},C];for(const ke of ge){const Be=l.getTile(ke);Be.needsHillshadePrepare!==void 0&&Be.needsHillshadePrepare&&I.renderPass==="offscreen"?dh(I,Be,p,U,Sn.disabled,te):I.renderPass==="translucent"&&jg(I,ke,Be,p,U,pe[ke.overscaledZ],te)}D.viewport.set([0,0,I.width,I.height])},raster:function(I,l,p,C){if(I.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!C.length)return;const D=I.context,U=D.gl,te=l.getSource(),pe=I.useProgram("raster"),ge=I.colorModeForRenderPass(),[ke,Be]=te instanceof q?[{},C]:I.stencilConfigForOverlap(C),He=Be[Be.length-1].overscaledZ,Ye=!I.options.moving;for(const it of Be){const Je=I.depthModeForSublayer(it.overscaledZ-He,p.paint.get("raster-opacity")===1?wi.ReadWrite:wi.ReadOnly,U.LESS),tt=l.getTile(it);tt.registerFadeDuration(p.paint.get("raster-fade-duration"));const pt=l.findLoadedParent(it,0),yt=hh(tt,pt,l,p,I.transform,I.style.terrain);let Ct,st;const It=p.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;D.activeTexture.set(U.TEXTURE0),tt.texture.bind(It,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(U.TEXTURE1),pt?(pt.texture.bind(It,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),Ct=Math.pow(2,pt.tileID.overscaledZ-tt.tileID.overscaledZ),st=[tt.tileID.canonical.x*Ct%1,tt.tileID.canonical.y*Ct%1]):tt.texture.bind(It,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Et=I.style.terrain&&I.style.terrain.getTerrainData(it),jt=Et?it:null,Ot=jt?jt.posMatrix:I.transform.calculatePosMatrix(it.toUnwrapped(),Ye),Vt=Eg(Ot,st||[0,0],Ct||1,yt,p);te instanceof q?pe.draw(D,U.TRIANGLES,Je,Sn.disabled,ge,dn.disabled,Vt,Et,p.id,te.boundsBuffer,I.quadTriangleIndexBuffer,te.boundsSegments):pe.draw(D,U.TRIANGLES,Je,ke[it.overscaledZ],ge,dn.disabled,Vt,Et,p.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,l,p,C){const D=p.paint.get("background-color"),U=p.paint.get("background-opacity");if(U===0)return;const te=I.context,pe=te.gl,ge=I.transform,ke=ge.tileSize,Be=p.paint.get("background-pattern");if(I.isPatternMissing(Be))return;const He=!Be&&D.a===1&&U===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==He)return;const Ye=Sn.disabled,it=I.depthModeForSublayer(0,He==="opaque"?wi.ReadWrite:wi.ReadOnly),Je=I.colorModeForRenderPass(),tt=I.useProgram(Be?"backgroundPattern":"background"),pt=C||ge.coveringTiles({tileSize:ke,terrain:I.style.terrain});Be&&(te.activeTexture.set(pe.TEXTURE0),I.imageManager.bind(I.context));const yt=p.getCrossfadeParameters();for(const Ct of pt){const st=C?Ct.posMatrix:I.transform.calculatePosMatrix(Ct.toUnwrapped()),It=Be?Vp(st,U,I,Be,{tileID:Ct,tileSize:ke},yt):nx(st,U,D),Et=I.style.terrain&&I.style.terrain.getTerrainData(Ct);tt.draw(te,pe.TRIANGLES,it,Ye,Je,dn.disabled,It,Et,p.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}},debug:function(I,l,p){for(let C=0;C<p.length;C++)af(I,l,p[C])},custom:function(I,l,p){const C=I.context,D=p.implementation;if(I.renderPass==="offscreen"){const U=D.prerender;U&&(I.setCustomLayerDefaults(),C.setColorMode(I.colorModeForRenderPass()),U.call(D,C.gl,I.transform.customLayerMatrix()),C.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),C.setColorMode(I.colorModeForRenderPass()),C.setStencilMode(Sn.disabled);const U=D.renderingMode==="3d"?new wi(I.context.gl.LEQUAL,wi.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,wi.ReadOnly);C.setDepthMode(U),D.render(C.gl,I.transform.customLayerMatrix()),C.setDirty(),I.setBaseState(),C.bindFramebuffer.set(null)}}};class $g{constructor(l,p){this.context=new rf(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.create(),renderTime:0},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vi,this.gpuTimers={}}resize(l,p,C){if(this.width=l*C,this.height=p*C,this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const D of this.style._order)this.style._layers[D].resize()}setup(){const l=this.context,p=new s.PosArray;p.emplaceBack(0,0),p.emplaceBack(s.EXTENT,0),p.emplaceBack(0,s.EXTENT),p.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(p,$i.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const C=new s.PosArray;C.emplaceBack(0,0),C.emplaceBack(s.EXTENT,0),C.emplaceBack(0,s.EXTENT),C.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=l.createVertexBuffer(C,$i.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const D=new s.RasterBoundsArray;D.emplaceBack(0,0,0,0),D.emplaceBack(s.EXTENT,0,s.EXTENT,0),D.emplaceBack(0,s.EXTENT,0,s.EXTENT),D.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(D,$.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const U=new s.PosArray;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(U,$i.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const te=new s.LineStripIndexArray;te.emplaceBack(0),te.emplaceBack(1),te.emplaceBack(3),te.emplaceBack(2),te.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(te);const pe=new s.TriangleIndexArray;pe.emplaceBack(0,1,2),pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(pe),this.emptyTexture=new _(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const ge=this.context.gl;this.stencilClearMode=new Sn({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=s.create();s.ortho(C,0,this.width,this.height,0,0,1),s.scale(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,wi.disabled,this.stencilClearMode,Rn.disabled,dn.disabled,Lu(C),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source;const C=this.context,D=C.gl;this.nextStencilID+p.length>256&&this.clearStencil(),C.setColorMode(Rn.disabled),C.setDepthMode(wi.disabled);const U=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const te of p){const pe=this._tileClippingMaskIDs[te.key]=this.nextStencilID++,ge=this.style.terrain&&this.style.terrain.getTerrainData(te);U.draw(C,D.TRIANGLES,wi.disabled,new Sn({func:D.ALWAYS,mask:0},pe,255,D.KEEP,D.KEEP,D.REPLACE),Rn.disabled,dn.disabled,Lu(te.posMatrix),ge,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new Sn({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new Sn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(l){const p=this.context.gl,C=l.sort((te,pe)=>pe.overscaledZ-te.overscaledZ),D=C[C.length-1].overscaledZ,U=C[0].overscaledZ-D+1;if(U>1){this.currentStencilSource=void 0,this.nextStencilID+U>256&&this.clearStencil();const te={};for(let pe=0;pe<U;pe++)te[pe+D]=new Sn({func:p.GEQUAL,mask:255},pe+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=U,[te,C]}return[{[D]:Sn.disabled},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Rn([l.CONSTANT_COLOR,l.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Rn.unblended:Rn.alphaBlended}depthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return wi.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new wi(C||this.context.gl.LEQUAL,p,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const C=this.style._order,D=this.style.sourceCaches,U=this.style.terrain&&new mh(this);for(const ke in D){const Be=D[ke];Be.used&&Be.prepare(this.context)}const te={},pe={},ge={};for(const ke in D){const Be=D[ke];te[ke]=Be.getVisibleCoordinates(),pe[ke]=te[ke].slice().reverse(),ge[ke]=Be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ke=0;ke<C.length;ke++)if(this.style._layers[C[ke]].is3D()){this.opaquePassCutoff=ke;break}if(U){this.opaquePassCutoff=0;const ke=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ke.length)&&(s.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Be,He){const Ye=Be.context,it=Ye.gl,Je=Rn.unblended,tt=new wi(it.LEQUAL,wi.ReadWrite,[0,1]),pt=He.getTerrainMesh(),yt=He.sourceCache.getRenderableTiles(),Ct=Be.useProgram("terrainDepth");Ye.bindFramebuffer.set(He.getFramebuffer("depth").framebuffer),Ye.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),Ye.clear({color:s.Color.transparent,depth:1});for(const st of yt){const It=He.getTerrainData(st.tileID),Et=Be.transform.calculatePosMatrix(st.tileID.toUnwrapped());Ct.draw(Ye,it.TRIANGLES,tt,Sn.disabled,Je,dn.backCCW,{u_matrix:Et},It,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain),function(Be,He){const Ye=Be.context,it=Ye.gl,Je=Rn.unblended,tt=new wi(it.LEQUAL,wi.ReadWrite,[0,1]),pt=He.getTerrainMesh(),yt=He.getCoordsTexture(),Ct=He.sourceCache.getRenderableTiles(),st=Be.useProgram("terrainCoords");Ye.bindFramebuffer.set(He.getFramebuffer("coords").framebuffer),Ye.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),Ye.clear({color:s.Color.transparent,depth:1}),He.coordsIndex=[];for(const It of Ct){const Et=He.getTerrainData(It.tileID);Ye.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,yt.texture);const jt=Be.transform.calculatePosMatrix(It.tileID.toUnwrapped());st.draw(Ye,it.TRIANGLES,tt,Sn.disabled,Je,dn.backCCW,{u_matrix:jt,u_terrain_coords_id:(255-He.coordsIndex.length)/255,u_texture:0},Et,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),He.coordsIndex.push(It.tileID.key)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const ke of C){const Be=this.style._layers[ke];if(!Be.hasOffscreenPass()||Be.isHidden(this.transform.zoom))continue;const He=pe[Be.source];(Be.type==="custom"||He.length)&&this.renderLayer(this,D[Be.source],Be,He)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!U)for(this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){const ke=this.style._layers[C[this.currentLayer]],Be=D[ke.source],He=te[ke.source];this._renderTileClippingMasks(ke,He),this.renderLayer(this,Be,ke,He)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){const ke=this.style._layers[C[this.currentLayer]],Be=D[ke.source];if(U&&U.renderLayer(ke))continue;const He=(ke.type==="symbol"?ge:pe)[ke.source];this._renderTileClippingMasks(ke,te[ke.source]),this.renderLayer(this,Be,ke,He)}if(this.options.showTileBoundaries){let ke,Be;Object.values(this.style._layers).forEach(He=>{He.source&&!He.isHidden(this.transform.zoom)&&(He.source!==(Be&&Be.id)&&(Be=this.style.sourceCaches[He.source]),(!ke||ke.getSource().maxzoom<Be.getSource().maxzoom)&&(ke=Be))}),ke&&gh.debug(this,ke,ke.getVisibleCoordinates())}this.options.showPadding&&function(ke){const Be=ke.transform.padding;Vu(ke,ke.transform.height-(Be.top||0),3,co),Vu(ke,Be.bottom||0,3,Og),ph(ke,Be.left||0,3,sf),ph(ke,ke.transform.width-(Be.right||0),3,Fg);const He=ke.transform.centerPoint;(function(Ye,it,Je,tt){fh(Ye,it-1,Je-10,2,20,tt),fh(Ye,it-10,Je-1,20,2,tt)})(ke,He.x,ke.transform.height-He.y,zc)}(this),this.context.setDefault()}renderLayer(l,p,C,D){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(D||[]).length)&&(this.id=C.id,this.gpuTimingStart(C),gh[C.type](l,p,C,D,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let C=this.gpuTimers[l.id];C||(C=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),C.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,C.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const p={};for(const C in l){const D=l[C],U=this.context.extTimerQuery,te=U.getQueryObjectEXT(D.query,U.QUERY_RESULT_EXT)/1e6;U.deleteQueryEXT(D.query),p[C]=te}return p}translatePosMatrix(l,p,C,D,U){if(!C[0]&&!C[1])return l;const te=U?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(te){const ke=Math.sin(te),Be=Math.cos(te);C=[C[0]*Be-C[1]*ke,C[0]*ke+C[1]*Be]}const pe=[U?C[0]:nr(p,C[0],this.transform.zoom),U?C[1]:nr(p,C[1],this.transform.zoom),0],ge=new Float32Array(16);return s.translate(ge,l,pe),ge}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p){this.cache=this.cache||{};const C=l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[C]||(this.cache[C]=new ix(this.context,l,ll[l],p,Hp[l],this._showOverdrawInspector,this.style.terrain)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class yh{constructor(l,p){this.points=l,this.planes=p}static fromInvProjectionMatrix(l,p,C){const D=Math.pow(2,C),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(pe=>{const ge=1/(pe=s.transformMat4([],pe,l))[3]/p*D;return s.mul$1(pe,pe,[ge,ge,1/pe[3],ge])}),te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(pe=>{const ge=s.sub([],U[pe[0]],U[pe[1]]),ke=s.sub([],U[pe[2]],U[pe[1]]),Be=s.normalize([],s.cross([],ge,ke)),He=-s.dot(Be,U[pe[1]]);return Be.concat(He)});return new yh(U,te)}}class Yl{constructor(l,p){this.min=l,this.max=p,this.center=s.scale$1([],s.add([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=s.clone$2(this.min),D=s.clone$2(this.max);for(let U=0;U<p.length;U++)C[U]=p[U]?this.min[U]:this.center[U],D[U]=p[U]?this.center[U]:this.max[U];return D[2]=this.max[2],new Yl(C,D)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let C=!0;for(let D=0;D<l.planes.length;D++){const U=l.planes[D];let te=0;for(let pe=0;pe<p.length;pe++)s.dot$1(U,p[pe])>=0&&te++;if(te===0)return 0;te!==p.length&&(C=!1)}if(C)return 2;for(let D=0;D<3;D++){let U=Number.MAX_VALUE,te=-Number.MAX_VALUE;for(let pe=0;pe<l.points.length;pe++){const ge=l.points[pe][D]-this.min[D];U=Math.min(U,ge),te=Math.max(te,ge)}if(te<0||U>this.max[D]-this.min[D])return 0}return 1}}class Hu{constructor(l=0,p=0,C=0,D=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=D}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=s.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=s.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=s.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=s.number(l.right,p.right,C)),this}getCenter(l,p){const C=s.clamp((this.left+l-this.right)/2,0,l),D=s.clamp((this.top+p-this.bottom)/2,0,p);return new s.pointGeometry(C,D)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Hu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class vh{constructor(l,p,C,D,U){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=U===void 0||!!U,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=C??0,this._maxPitch=D??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hu,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new vh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l._elevation=this._elevation,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const p=-s.wrap(l,-180,180)*Math.PI/180;var C;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(C=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C),function(D,U,te){var pe=U[0],ge=U[1],ke=U[2],Be=U[3],He=Math.sin(te),Ye=Math.cos(te);D[0]=pe*Ye+ke*He,D[1]=ge*Ye+Be*He,D[2]=pe*-He+ke*Ye,D[3]=ge*-He+Be*Ye}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const p=s.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(l){const p=[new s.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const C=this.pointCoordinate(new s.pointGeometry(0,0)),D=this.pointCoordinate(new s.pointGeometry(this.width,0)),U=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),te=this.pointCoordinate(new s.pointGeometry(0,this.height)),pe=Math.floor(Math.min(C.x,D.x,U.x,te.x)),ge=Math.floor(Math.max(C.x,D.x,U.x,te.x)),ke=1;for(let Be=pe-ke;Be<=ge+ke;Be++)Be!==0&&p.push(new s.UnwrappedTileID(Be,l))}return p}coveringTiles(l){var p,C;let D=this.coveringZoomLevel(l);const U=D;if(l.minzoom!==void 0&&D<l.minzoom)return[];l.maxzoom!==void 0&&D>l.maxzoom&&(D=l.maxzoom);const te=this.pointCoordinate(this.getCameraPoint()),pe=s.MercatorCoordinate.fromLngLat(this.center),ge=Math.pow(2,D),ke=[ge*te.x,ge*te.y,0],Be=[ge*pe.x,ge*pe.y,0],He=yh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,D);let Ye=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ye=D);const it=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,Je=st=>({aabb:new Yl([st*ge,0,0],[(st+1)*ge,ge,0]),zoom:0,x:0,y:0,wrap:st,fullyVisible:!1}),tt=[],pt=[],yt=D,Ct=l.reparseOverscaled?U:D;if(this._renderWorldCopies)for(let st=1;st<=3;st++)tt.push(Je(-st)),tt.push(Je(st));for(tt.push(Je(0));tt.length>0;){const st=tt.pop(),It=st.x,Et=st.y;let jt=st.fullyVisible;if(!jt){const ui=st.aabb.intersects(He);if(ui===0)continue;jt=ui===2}const Ot=l.terrain?ke:Be,Vt=st.aabb.distanceX(Ot),Lt=st.aabb.distanceY(Ot),li=Math.max(Math.abs(Vt),Math.abs(Lt)),Kt=it+(1<<yt-st.zoom)-2;if(st.zoom===yt||li>Kt&&st.zoom>=Ye){const ui=yt-st.zoom,Ji=ke[0]-.5-(It<<ui),cr=ke[1]-.5-(Et<<ui);pt.push({tileID:new s.OverscaledTileID(st.zoom===yt?Ct:st.zoom,st.wrap,st.zoom,It,Et),distanceSq:s.sqrLen([Be[0]-.5-It,Be[1]-.5-Et]),tileDistanceToCamera:Math.sqrt(Ji*Ji+cr*cr)})}else for(let ui=0;ui<4;ui++){const Ji=(It<<1)+ui%2,cr=(Et<<1)+(ui>>1),Pi=st.zoom+1;let Gr=st.aabb.quadrant(ui);if(l.terrain){const qr=new s.OverscaledTileID(Pi,st.wrap,Pi,Ji,cr),_r=l.terrain.getMinMaxElevation(qr),Tr=(p=_r.minElevation)!==null&&p!==void 0?p:this.elevation,Mr=(C=_r.maxElevation)!==null&&C!==void 0?C:this.elevation;Gr=new Yl([Gr.min[0],Gr.min[1],Tr],[Gr.max[0],Gr.max[1],Mr])}tt.push({aabb:Gr,zoom:Pi,x:Ji,y:cr,wrap:st.wrap,fullyVisible:jt})}}return pt.sort((st,It)=>st.distanceSq-It.distanceSq).map(st=>st.tileID)}resize(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const p=s.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(l.lng)*this.worldSize,s.mercatorYfromLat(p)*this.worldSize)}unproject(l){return new s.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(l){this.freezeElevation||(this.elevation=l?this.getElevation(this._center,l):0)}getElevation(l,p){const C=s.MercatorCoordinate.fromLngLat(l),D=(1<<this.tileZoom)*s.EXTENT,U=C.x*D,te=C.y*D,pe=Math.floor(U/s.EXTENT),ge=Math.floor(te/s.EXTENT),ke=new s.OverscaledTileID(this.tileZoom,0,this.tileZoom,pe,ge);return p.getElevation(ke,U%s.EXTENT,te%s.EXTENT,s.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const p=this.pointLocation(this.centerPoint,l),C=this.getElevation(p,l);if(!(this.elevation-C))return;const D=this.getCameraPosition(),U=s.MercatorCoordinate.fromLngLat(D.lngLat,D.altitude),te=s.MercatorCoordinate.fromLngLat(p,C),pe=U.x-te.x,ge=U.y-te.y,ke=U.z-te.z,Be=Math.sqrt(pe*pe+ge*ge+ke*ke),He=this.scaleZoom(this.cameraToCenterDistance/Be/this.tileSize);this._elevation=C,this._center=p,this.zoom=He}setLocationAtPoint(l,p){const C=this.pointCoordinate(p),D=this.pointCoordinate(this.centerPoint),U=this.locationCoordinate(l),te=new s.MercatorCoordinate(U.x-(C.x-D.x),U.y-(C.y-D.y));this.center=this.coordinateLocation(te),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,p){return p?this.coordinatePoint(this.locationCoordinate(l),this.getElevation(l,p),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,p){return this.coordinateLocation(this.pointCoordinate(l,p))}locationCoordinate(l){return s.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,p){if(p){const Ye=p.pointCoordinate(l);if(Ye!=null)return Ye}const C=[l.x,l.y,0,1],D=[l.x,l.y,1,1];s.transformMat4(C,C,this.pixelMatrixInverse),s.transformMat4(D,D,this.pixelMatrixInverse);const U=C[3],te=D[3],pe=C[1]/U,ge=D[1]/te,ke=C[2]/U,Be=D[2]/te,He=ke===Be?0:(0-ke)/(Be-ke);return new s.MercatorCoordinate(s.number(C[0]/U,D[0]/te,He)/this.worldSize,s.number(pe,ge,He)/this.worldSize)}coordinatePoint(l,p=0,C=this.pixelMatrix){const D=[l.x*this.worldSize,l.y*this.worldSize,p,1];return s.transformMat4(D,D,C),new s.pointGeometry(D[0]/D[3],D[1]/D[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,l))).extend(this.pointLocation(new s.pointGeometry(this.width,l))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,p=!1){const C=l.key,D=p?this._alignedPosMatrixCache:this._posMatrixCache;if(D[C])return D[C];const U=l.canonical,te=this.worldSize/this.zoomScale(U.z),pe=U.x+Math.pow(2,U.z)*l.wrap,ge=s.identity(new Float64Array(16));return s.translate(ge,ge,[pe*te,U.y*te,0]),s.scale(ge,ge,[te/s.EXTENT,te/s.EXTENT,1]),s.multiply(ge,p?this.alignedProjMatrix:this.projMatrix,ge),D[C]=new Float32Array(ge),D[C]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,p,C,D,U=-90,te=90,pe=-180,ge=180;const ke=this.size,Be=this._unmodified;if(this.latRange){const it=this.latRange;U=s.mercatorYfromLat(it[1])*this.worldSize,te=s.mercatorYfromLat(it[0])*this.worldSize,l=te-U<ke.y?ke.y/(te-U):0}if(this.lngRange){const it=this.lngRange;pe=s.wrap(s.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),ge=s.wrap(s.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),ge<pe&&(ge+=this.worldSize),p=ge-pe<ke.x?ke.x/(ge-pe):0}const He=this.point,Ye=Math.max(p||0,l||0);if(Ye)return this.center=this.unproject(new s.pointGeometry(p?(ge+pe)/2:He.x,l?(te+U)/2:He.y)),this.zoom+=this.scaleZoom(Ye),this._unmodified=Be,void(this._constraining=!1);if(this.latRange){const it=He.y,Je=ke.y/2;it-Je<U&&(D=U+Je),it+Je>te&&(D=te-Je)}if(this.lngRange){const it=(pe+ge)/2,Je=s.wrap(He.x,it-this.worldSize/2,it+this.worldSize/2),tt=ke.x/2;Je-tt<pe&&(C=pe+tt),Je+tt>ge&&(C=ge-tt)}C===void 0&&D===void 0||(this.center=this.unproject(new s.pointGeometry(C!==void 0?C:He.x,D!==void 0?D:He.y)).wrap()),this._unmodified=Be,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,p=this.point.x,C=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let D=s.identity(new Float64Array(16));s.scale(D,D,[this.width/2,-this.height/2,1]),s.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=s.identity(new Float64Array(16)),s.scale(D,D,[1,-1,1]),s.translate(D,D,[-1,-1,0]),s.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const U=Math.PI/2+this._pitch,te=this._fov*(.5+l.y/this.height),pe=Math.sin(te)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-U-te,.01,Math.PI-.01)),ge=this.getHorizon(),ke=2*Math.atan(ge/this.cameraToCenterDistance)*(.5+l.y/(2*ge)),Be=Math.sin(ke)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-U-ke,.01,Math.PI-.01)),He=Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToSeaLevelDistance,Ye=Math.cos(Math.PI/2-this._pitch)*Be+this.cameraToSeaLevelDistance,it=1.01*Math.min(He,Ye),Je=this.height/50;D=new Float64Array(16),s.perspective(D,this._fov,this.width/this.height,Je,it),D[8]=2*-l.x/this.width,D[9]=2*l.y/this.height,s.scale(D,D,[1,-1,1]),s.translate(D,D,[0,0,-this.cameraToCenterDistance]),s.rotateX(D,D,this._pitch),s.rotateZ(D,D,this.angle),s.translate(D,D,[-p,-C,0]),this.mercatorMatrix=s.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),s.scale(D,D,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D),s.translate(D,D,[0,0,-this.elevation]),this.projMatrix=D,this.invProjMatrix=s.invert([],D),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D);const tt=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),Ct=Math.sin(this.angle),st=p-Math.round(p)+yt*tt+Ct*pt,It=C-Math.round(C)+yt*pt+Ct*tt,Et=new Float64Array(D);if(s.translate(Et,Et,[st>.5?st-1:st,It>.5?It-1:It,0]),this.alignedProjMatrix=Et,D=s.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new s.pointGeometry(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return s.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,l))}getCameraQueryGeometry(l){const p=this.getCameraPoint();if(l.length===1)return[l[0],p];{let C=p.x,D=p.y,U=p.x,te=p.y;for(const pe of l)C=Math.min(C,pe.x),D=Math.min(D,pe.y),U=Math.max(U,pe.x),te=Math.max(te,pe.y);return[new s.pointGeometry(C,D),new s.pointGeometry(U,D),new s.pointGeometry(U,te),new s.pointGeometry(C,te),new s.pointGeometry(C,D)]}}}class Ug{constructor(l){this._hashName=l&&encodeURIComponent(l),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(p,C){let D=!1,U=null;const te=()=>{U=null,D&&(p(),U=setTimeout(te,300),D=!1)};return()=>(D=!0,U||te(),U)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,D=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),U=Math.pow(10,D),te=Math.round(p.lng*U)/U,pe=Math.round(p.lat*U)/U,ge=this._map.getBearing(),ke=this._map.getPitch();let Be="";if(Be+=l?`/${te}/${pe}/${C}`:`${C}/${pe}/${te}`,(ge||ke)&&(Be+="/"+Math.round(10*ge)/10),ke&&(Be+=`/${Math.round(ke)}`),this._hashName){const He=this._hashName;let Ye=!1;const it=window.location.hash.slice(1).split("&").map(Je=>{const tt=Je.split("=")[0];return tt===He?(Ye=!0,`${tt}=${Be}`):Je}).filter(Je=>Je);return Ye||it.push(`${He}=${Be}`),`#${it.join("&")}`}return`#${Be}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let p;return l.split("&").map(C=>C.split("=")).forEach(C=>{C[0]===this._hashName&&(p=C)}),(p&&p[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const Gu={linearity:.3,easing:s.bezier(0,0,.3,1)},Vg=s.extend({deceleration:2500,maxSpeed:1400},Gu),Hg=s.extend({deceleration:20,maxSpeed:1400},Gu),jc=s.extend({deceleration:1e3,maxSpeed:360},Gu),Gg=s.extend({deceleration:1e3,maxSpeed:90},Gu);class qg{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=s.exported.now();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:U}of this._inertiaBuffer)p.zoom+=U.zoomDelta||0,p.bearing+=U.bearingDelta||0,p.pitch+=U.pitchDelta||0,U.panDelta&&p.pan._add(U.panDelta),U.around&&(p.around=U.around),U.pinchAround&&(p.pinchAround=U.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(p.pan.mag()){const U=Wu(p.pan.mag(),C,s.extend({},Vg,l||{}));D.offset=p.pan.mult(U.amount/p.pan.mag()),D.center=this._map.transform.center,qu(D,U)}if(p.zoom){const U=Wu(p.zoom,C,Hg);D.zoom=this._map.transform.zoom+U.amount,qu(D,U)}if(p.bearing){const U=Wu(p.bearing,C,jc);D.bearing=this._map.transform.bearing+s.clamp(U.amount,-179,179),qu(D,U)}if(p.pitch){const U=Wu(p.pitch,C,Gg);D.pitch=this._map.transform.pitch+U.amount,qu(D,U)}if(D.zoom||D.bearing){const U=p.pinchAround===void 0?p.around:p.pinchAround;D.around=U?this._map.unproject(U):this._map.getCenter()}return this.clear(),s.extend(D,{noMoveStart:!0})}}function qu(I,l){(!I.duration||I.duration<l.duration)&&(I.duration=l.duration,I.easing=l.easing)}function Wu(I,l,p){const{maxSpeed:C,linearity:D,deceleration:U}=p,te=s.clamp(I*D/(l/1e3),-C,C),pe=Math.abs(te)/(U*D);return{easing:p.easing,duration:1e3*pe,amount:te*(pe/2)}}class Ia extends s.Event{constructor(l,p,C,D={}){const U=g.mousePos(p.getCanvasContainer(),C),te=p.unproject(U);super(l,s.extend({point:U,lngLat:te,originalEvent:C},D)),this._defaultPrevented=!1,this.target=p}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ns extends s.Event{constructor(l,p,C){const D=l==="touchend"?C.changedTouches:C.touches,U=g.touchPos(p.getCanvasContainer(),D),te=U.map(ge=>p.unproject(ge)),pe=U.reduce((ge,ke,Be,He)=>ge.add(ke.div(He.length)),new s.pointGeometry(0,0));super(l,{points:U,point:pe,lngLats:te,lngLat:p.unproject(pe),originalEvent:C}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fx extends s.Event{constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class dl{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new fx(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new Ia(l.type,this._map,l))}mouseup(l){this._map.fire(new Ia(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ia(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Ia(l.type,this._map,l))}mouseover(l){this._map.fire(new Ia(l.type,this._map,l))}mouseout(l){this._map.fire(new Ia(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Ns(l.type,this._map,l))}touchmove(l){this._map.fire(new Ns(l.type,this._map,l))}touchend(l){this._map.fire(new Ns(l.type,this._map,l))}touchcancel(l){this._map.fire(new Ns(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wg{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Ia(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ia("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Ia(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zl{constructor(l,p){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(g.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const D=this._startPos;this._lastPos=C,this._box||(this._box=g.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const U=Math.min(D.x,C.x),te=Math.max(D.x,C.x),pe=Math.min(D.y,C.y),ge=Math.max(D.y,C.y);g.setTransform(this._box,`translate(${U}px,${pe}px)`),this._box.style.width=te-U+"px",this._box.style.height=ge-pe+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,D=p;if(this.reset(),g.suppressClick(),C.x!==D.x||C.y!==D.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:U=>U.fitScreenCoordinates(C,D,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new s.Event(l,{originalEvent:p}))}}function Xl(I,l){if(I.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${l.length}`);const p={};for(let C=0;C<I.length;C++)p[I[C].identifier]=l[C];return p}class mx{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=function(D){const U=new s.pointGeometry(0,0);for(const te of D)U._add(te);return U.div(D.length)}(p),this.touches=Xl(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const D=Xl(C,p);for(const U in this.touches){const te=this.touches[U],pe=D[U];(!pe||pe.dist(te)>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class lf{constructor(l){this.singleTap=new mx(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const D=this.singleTap.touchend(l,p,C);if(D){const U=l.timeStamp-this.lastTime<500,te=!this.lastTap||this.lastTap.dist(D)<30;if(U&&te||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class gx{constructor(){this._zoomIn=new lf({numTouches:1,numTaps:2}),this._zoomOut=new lf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const D=this._zoomIn.touchend(l,p,C),U=this._zoomOut.touchend(l,p,C);return D?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()+1,around:te.unproject(D)},{originalEvent:l})}):U?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()-1,around:te.unproject(U)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Yg={0:1,2:2};class Kl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,p){return!1}_move(l,p){return{}}mousedown(l,p){if(this._lastPoint)return;const C=g.mouseButton(l);this._correctButton(l,C)&&(this._lastPoint=p,this._eventButton=C)}mousemoveWindow(l,p){const C=this._lastPoint;if(C){if(l.preventDefault(),function(D,U){const te=Yg[U];return D.buttons===void 0||(D.buttons&te)!==te}(l,this._eventButton))this.reset();else if(this._moved||!(p.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(C,p)}}mouseupWindow(l){this._lastPoint&&g.mouseButton(l)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hl extends Kl{mousedown(l,p){super.mousedown(l,p),this._lastPoint&&(this._active=!0)}_correctButton(l,p){return p===0&&!l.ctrlKey}_move(l,p){return{around:p,panDelta:p.sub(l)}}}class hi extends Kl{_correctButton(l,p){return p===0&&l.ctrlKey||p===2}_move(l,p){const C=.8*(p.x-l.x);if(C)return this._active=!0,{bearingDelta:C}}contextmenu(l){l.preventDefault()}}class cf extends Kl{_correctButton(l,p){return p===0&&l.ctrlKey||p===2}_move(l,p){const C=-.5*(p.y-l.y);if(C)return this._active=!0,{pitchDelta:C}}contextmenu(l){l.preventDefault()}}class Yu{constructor(l,p){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._map._cooperativeGestures&&(this._minTouches===2&&C.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,C.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(C.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,p,C)}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&C.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const D=Xl(C,p),U=new s.pointGeometry(0,0),te=new s.pointGeometry(0,0);let pe=0;for(const ke in D){const Be=D[ke],He=this._touches[ke];He&&(U._add(Be),te._add(Be.sub(He)),pe++,D[ke]=Be)}if(this._touches=D,pe<this._minTouches||!te.mag())return;const ge=te.div(pe);return this._sum._add(ge),this._sum.mag()<this._clickTolerance?void 0:{around:U.div(pe),panDelta:ge}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ql{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,p,C){return{}}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[D,U]=this._firstTwoTouches,te=Zu(C,p,D),pe=Zu(C,p,U);if(!te||!pe)return;const ge=this._aroundCenter?null:te.add(pe).div(2);return this._move([te,pe],ge,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[D,U]=this._firstTwoTouches,te=Zu(C,p,D),pe=Zu(C,p,U);te&&pe||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Zu(I,l,p){for(let C=0;C<I.length;C++)if(I[C].identifier===p)return l[C]}function ri(I,l){return Math.log(I/l)/Math.LN2}class uf extends Ql{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(ri(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ri(this._distance,C),pinchAround:p}}}function Zg(I,l){return 180*I.angleWith(l)/Math.PI}class yx extends Ql{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p){const C=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zg(this._vector,C),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=Zg(l,this._startVector);return Math.abs(C)<p}}function Xu(I){return Math.abs(I.y)>Math.abs(I.x)}class Xg extends Ql{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,Xu(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const D=l[0].sub(this._lastPoints[0]),U=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(D,U,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(D.y+U.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const D=l.mag()>=2,U=p.mag()>=2;if(!D&&!U)return;if(!D||!U)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const te=l.y>0==p.y>0;return Xu(l)&&Xu(p)&&te}}const Kg={panStep:100,bearingStep:15,pitchStep:10};class vx{constructor(){const l=Kg;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,D=0,U=0,te=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),U=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),U=1);break;case 38:l.shiftKey?D=1:(l.preventDefault(),te=-1);break;case 40:l.shiftKey?D=-1:(l.preventDefault(),te=1);break;default:return}return this._rotationDisabled&&(C=0,D=0),{cameraAnimation:pe=>{const ge=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:xx,zoom:p?Math.round(ge)+p*(l.shiftKey?2:1):ge,bearing:pe.getBearing()+C*this._bearingStep,pitch:pe.getPitch()+D*this._pitchStep,offset:[-U*this._panStep,-te*this._panStep],center:pe.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xx(I){return I*(2-I)}const xh=4.000244140625;class df{constructor(l,p){this._map=l,this._el=l.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;l.preventDefault()}let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=s.exported.now(),D=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%xh==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(D*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=g.mousePos(this._el,l);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>xh?this._wheelZoomRate:this._defaultZoomRate;let ge=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&ge!==0&&(ge=1/ge);const ke=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ke*ge))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,C=this._startZoom,D=this._easing;let U,te=!1;if(this._type==="wheel"&&C&&D){const pe=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),ge=D(pe);U=s.number(C,p,ge),pe<1?this._frameId||(this._frameId=!0):te=!0}else U=p,te=!0;return this._active=!0,te&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!te,zoomDelta:U-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=s.ease;if(this._prevEase){const C=this._prevEase,D=(s.exported.now()-C.start)/C.duration,U=C.easing(D+.01)-C.easing(D),te=.27/Math.sqrt(U*U+1e-4)*.01,pe=Math.sqrt(.0729-te*te);p=s.bezier(te,pe,.25,1)}return this._prevEase={start:s.exported.now(),duration:l,easing:p},p}reset(){this._active=!1}}class hf{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pf{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:C.getZoom()+(l.shiftKey?-1:1),around:C.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pa{constructor(){this._tap=new lf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,p,C){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=p[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(l,p,C))}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const D=p[0],U=D.y-this._swipePoint.y;return this._swipePoint=D,l.preventDefault(),this._active=!0,{zoomDelta:U/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(l,p,C)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qg{constructor(l,p,C){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ff{constructor(l,p,C,D){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Oc=I=>I.zoom||I.drag||I.pitch||I.rotate;class mf extends s.Event{}function bh(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta}class Za{constructor(l,p){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qg(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),s.bindAll(["handleEvent","handleWindowEvent"],this);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[D,U,te]of this._listeners)g.addEventListener(D,U,D===document?this.handleWindowEvent:this.handleEvent,te)}destroy(){for(const[l,p,C]of this._listeners)g.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new dl(p,l));const D=p.boxZoom=new Zl(p,l);this._add("boxZoom",D);const U=new gx,te=new pf;p.doubleClickZoom=new hf(te,U),this._add("tapZoom",U),this._add("clickZoom",te);const pe=new pa;this._add("tapDragZoom",pe);const ge=p.touchPitch=new Xg(p);this._add("touchPitch",ge);const ke=new hi(l),Be=new cf(l);p.dragRotate=new Qg(l,ke,Be),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",Be,["mouseRotate"]);const He=new hl(l),Ye=new Yu(l,p);p.dragPan=new pl(C,He,Ye),this._add("mousePan",He),this._add("touchPan",Ye,["touchZoom","touchRotate"]);const it=new yx,Je=new uf;p.touchZoomRotate=new ff(C,Je,it,pe),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",Je,["touchPan","touchRotate"]);const tt=p.scrollZoom=new df(p,this);this._add("scrollZoom",tt,["mousePan"]);const pt=p.keyboard=new vx;this._add("keyboard",pt),this._add("blockableMapEvent",new Wg(p));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[yt]&&p[yt].enable(l[yt])}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Oc(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const D in l)if(D!==C&&(!p||p.indexOf(D)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}handleEvent(l,p){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=l.type==="renderFrame"?void 0:l,D={needsRenderFrame:!1},U={},te={},pe=l.touches,ge=pe?this._getMapTouches(pe):void 0,ke=ge?g.touchPos(this._el,ge):g.mousePos(this._el,l);for(const{handlerName:Ye,handler:it,allowed:Je}of this._handlers){if(!it.isEnabled())continue;let tt;this._blockedByActive(te,Je,Ye)?it.reset():it[p||l.type]&&(tt=it[p||l.type](l,ke,ge),this.mergeHandlerResult(D,U,tt,Ye,C),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||it.isActive())&&(te[Ye]=it)}const Be={};for(const Ye in this._previousActiveHandlers)te[Ye]||(Be[Ye]=C);this._previousActiveHandlers=te,(Object.keys(Be).length||bh(D))&&(this._changes.push([D,U,Be]),this._triggerRenderFrame()),(Object.keys(te).length||bh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:He}=D;He&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],He(this._map))}mergeHandlerResult(l,p,C,D,U){if(!C)return;s.extend(l,C);const te={handlerName:D,originalEvent:C.originalEvent||U};C.zoomDelta!==void 0&&(p.zoom=te),C.panDelta!==void 0&&(p.drag=te),C.pitchDelta!==void 0&&(p.pitch=te),C.bearingDelta!==void 0&&(p.rotate=te)}_applyChanges(){const l={},p={},C={};for(const[D,U,te]of this._changes)D.panDelta&&(l.panDelta=(l.panDelta||new s.pointGeometry(0,0))._add(D.panDelta)),D.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+D.pitchDelta),D.around!==void 0&&(l.around=D.around),D.pinchAround!==void 0&&(l.pinchAround=D.pinchAround),D.noInertia&&(l.noInertia=D.noInertia),s.extend(p,U),s.extend(C,te);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const D=this._map,U=D.transform,te=D.style&&D.style.terrain;if(!(bh(l)||te&&this._drag))return this._fireEvents(p,C,!0);let{panDelta:pe,zoomDelta:ge,bearingDelta:ke,pitchDelta:Be,around:He,pinchAround:Ye}=l;Ye!==void 0&&(He=Ye),D._stop(!0),He=He||D.transform.centerPoint;const it=U.pointLocation(pe?He.sub(pe):He);ke&&(U.bearing+=ke),Be&&(U.pitch+=Be),ge&&(U.zoom+=ge),te?p.drag&&!this._drag?(this._drag={center:U.centerPoint,lngLat:U.pointLocation(He),point:He,handlerName:p.drag.handlerName},D.fire(new s.Event("freezeElevation",{freeze:!0}))):this._drag&&C[this._drag.handlerName]?(D.fire(new s.Event("freezeElevation",{freeze:!1})),this._drag=null):p.drag&&this._drag&&(U.center=U.pointLocation(U.centerPoint.sub(pe))):U.setLocationAtPoint(it,He),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_fireEvents(l,p,C){const D=Oc(this._eventsInProgress),U=Oc(l),te={};for(const Be in l){const{originalEvent:He}=l[Be];this._eventsInProgress[Be]||(te[`${Be}start`]=He),this._eventsInProgress[Be]=l[Be]}!D&&U&&this._fireEvent("movestart",U.originalEvent);for(const Be in te)this._fireEvent(Be,te[Be]);U&&this._fireEvent("move",U.originalEvent);for(const Be in l){const{originalEvent:He}=l[Be];this._fireEvent(Be,He)}const pe={};let ge;for(const Be in this._eventsInProgress){const{handlerName:He,originalEvent:Ye}=this._eventsInProgress[Be];this._handlersById[He].isActive()||(delete this._eventsInProgress[Be],ge=p[He]||Ye,pe[`${Be}end`]=ge)}for(const Be in pe)this._fireEvent(Be,pe[Be]);const ke=Oc(this._eventsInProgress);if(C&&(D||U)&&!ke){this._updatingCamera=!0;const Be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),He=Ye=>Ye!==0&&-this._bearingSnap<Ye&&Ye<this._bearingSnap;Be?(He(Be.bearing||this._map.getBearing())&&(Be.bearing=0),this._map.easeTo(Be,{originalEvent:ge})):(this._map.fire(new s.Event("moveend",{originalEvent:ge})),He(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new s.Event(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new mf("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const yn={extend:(I,...l)=>s.extend(I,...l),run(I){I()},logToElement(I,l=!1,p="log"){const C=window.document.getElementById(p);C&&(l&&(C.innerHTML=""),C.innerHTML+=`<br>${I}`)}};class wh extends s.Evented{constructor(l,p){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=p.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}panBy(l,p,C){return l=s.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,s.extend({offset:l},p),C)}panTo(l,p,C){return this.easeTo(s.extend({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(s.extend({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(s.extend({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,s.extend({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}cameraForBounds(l,p){l=s.LngLatBounds.convert(l);const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,D){const U={top:0,bottom:0,right:0,left:0};if(typeof(D=s.extend({padding:U,offset:[0,0],maxZoom:this.transform.maxZoom},D)).padding=="number"){const Et=D.padding;D.padding={top:Et,bottom:Et,right:Et,left:Et}}D.padding=s.extend(U,D.padding);const te=this.transform,pe=te.padding,ge=te.project(s.LngLat.convert(l)),ke=te.project(s.LngLat.convert(p)),Be=ge.rotate(-C*Math.PI/180),He=ke.rotate(-C*Math.PI/180),Ye=new s.pointGeometry(Math.max(Be.x,He.x),Math.max(Be.y,He.y)),it=new s.pointGeometry(Math.min(Be.x,He.x),Math.min(Be.y,He.y)),Je=Ye.sub(it),tt=(te.width-(pe.left+pe.right+D.padding.left+D.padding.right))/Je.x,pt=(te.height-(pe.top+pe.bottom+D.padding.top+D.padding.bottom))/Je.y;if(pt<0||tt<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(te.scaleZoom(te.scale*Math.min(tt,pt)),D.maxZoom),Ct=s.pointGeometry.convert(D.offset),st=new s.pointGeometry((D.padding.left-D.padding.right)/2,(D.padding.top-D.padding.bottom)/2).rotate(C*Math.PI/180),It=Ct.add(st).mult(te.scale/te.zoomScale(yt));return{center:te.unproject(ge.add(ke).div(2).sub(It)),zoom:yt,bearing:C}}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,D,U){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(l)),this.transform.pointLocation(s.pointGeometry.convert(p)),C,D),D,U)}_fitInternal(l,p,C){return l?(delete(p=s.extend(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this.transform;let D=!1,U=!1,te=!1;return"zoom"in l&&C.zoom!==+l.zoom&&(D=!0,C.zoom=+l.zoom),l.center!==void 0&&(C.center=s.LngLat.convert(l.center)),"bearing"in l&&C.bearing!==+l.bearing&&(U=!0,C.bearing=+l.bearing),"pitch"in l&&C.pitch!==+l.pitch&&(te=!0,C.pitch=+l.pitch),l.padding==null||C.isPaddingEqual(l.padding)||(C.padding=l.padding),this.fire(new s.Event("movestart",p)).fire(new s.Event("move",p)),D&&this.fire(new s.Event("zoomstart",p)).fire(new s.Event("zoom",p)).fire(new s.Event("zoomend",p)),U&&this.fire(new s.Event("rotatestart",p)).fire(new s.Event("rotate",p)).fire(new s.Event("rotateend",p)),te&&this.fire(new s.Event("pitchstart",p)).fire(new s.Event("pitch",p)).fire(new s.Event("pitchend",p)),this.fire(new s.Event("moveend",p))}calculateCameraOptionsFromTo(l,p,C,D=0){const U=s.MercatorCoordinate.fromLngLat(l,p),te=s.MercatorCoordinate.fromLngLat(C,D),pe=te.x-U.x,ge=te.y-U.y,ke=te.z-U.z,Be=Math.hypot(pe,ge,ke);if(Be===0)throw new Error("Can't calculate camera options with same From and To");const He=Math.hypot(pe,ge),Ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Be/this.transform.tileSize),it=180*Math.atan2(pe,-ge)/Math.PI;let Je=180*Math.acos(He/Be)/Math.PI;return Je=ke<0?90-Je:90+Je,{center:te.toLngLat(),zoom:Ye,pitch:Je,bearing:it}}easeTo(l,p){this._stop(!1,l.easeId),((l=s.extend({offset:[0,0],duration:500,easing:s.ease},l)).animate===!1||!l.essential&&s.exported.prefersReducedMotion)&&(l.duration=0);const C=this.transform,D=this.getZoom(),U=this.getBearing(),te=this.getPitch(),pe=this.getPadding(),ge="zoom"in l?+l.zoom:D,ke="bearing"in l?this._normalizeBearing(l.bearing,U):U,Be="pitch"in l?+l.pitch:te,He="padding"in l?l.padding:C.padding,Ye=s.pointGeometry.convert(l.offset);let it=C.centerPoint.add(Ye);const Je=C.pointLocation(it),tt=s.LngLat.convert(l.center||Je);this._normalizeCenter(tt);const pt=C.project(Je),yt=C.project(tt).sub(pt),Ct=C.zoomScale(ge-D);let st,It;l.around&&(st=s.LngLat.convert(l.around),It=C.locationPoint(st));const Et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==D,this._rotating=this._rotating||U!==ke,this._pitching=this._pitching||Be!==te,this._padding=!C.isPaddingEqual(He),this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Et),this._ease(jt=>{if(this._zooming&&(C.zoom=s.number(D,ge,jt)),this._rotating&&(C.bearing=s.number(U,ke,jt)),this._pitching&&(C.pitch=s.number(te,Be,jt)),this._padding&&(C.interpolatePadding(pe,He,jt),it=C.centerPoint.add(Ye)),st)C.setLocationAtPoint(st,It);else{const Ot=C.zoomScale(C.zoom-D),Vt=ge>D?Math.min(2,Ct):Math.max(.5,Ct),Lt=Math.pow(Vt,1-jt),li=C.unproject(pt.add(yt.mult(jt*Lt)).mult(Ot));C.setLocationAtPoint(C.renderWorldCopies?li.wrap():li,it)}this._fireMoveEvents(p)},jt=>{this._afterEase(p,jt)},l),this}_prepareEase(l,p,C={}){this._moving=!0,this.fire(new s.Event("freezeElevation",{freeze:!0})),p||C.moving||this.fire(new s.Event("movestart",l)),this._zooming&&!C.zooming&&this.fire(new s.Event("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new s.Event("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new s.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.Event("move",l)),this._zooming&&this.fire(new s.Event("zoom",l)),this._rotating&&this.fire(new s.Event("rotate",l)),this._pitching&&this.fire(new s.Event("pitch",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId,this.fire(new s.Event("freezeElevation",{freeze:!1}));const C=this._zooming,D=this._rotating,U=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,C&&this.fire(new s.Event("zoomend",l)),D&&this.fire(new s.Event("rotateend",l)),U&&this.fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))}flyTo(l,p){if(!l.essential&&s.exported.prefersReducedMotion){const Pi=s.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pi,p)}this.stop(),l=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},l);const C=this.transform,D=this.getZoom(),U=this.getBearing(),te=this.getPitch(),pe=this.getPadding(),ge="zoom"in l?s.clamp(+l.zoom,C.minZoom,C.maxZoom):D,ke="bearing"in l?this._normalizeBearing(l.bearing,U):U,Be="pitch"in l?+l.pitch:te,He="padding"in l?l.padding:C.padding,Ye=C.zoomScale(ge-D),it=s.pointGeometry.convert(l.offset);let Je=C.centerPoint.add(it);const tt=C.pointLocation(Je),pt=s.LngLat.convert(l.center||tt);this._normalizeCenter(pt);const yt=C.project(tt),Ct=C.project(pt).sub(yt);let st=l.curve;const It=Math.max(C.width,C.height),Et=It/Ye,jt=Ct.mag();if("minZoom"in l){const Pi=s.clamp(Math.min(l.minZoom,D,ge),C.minZoom,C.maxZoom),Gr=It/C.zoomScale(Pi-D);st=Math.sqrt(Gr/jt*2)}const Ot=st*st;function Vt(Pi){const Gr=(Et*Et-It*It+(Pi?-1:1)*Ot*Ot*jt*jt)/(2*(Pi?Et:It)*Ot*jt);return Math.log(Math.sqrt(Gr*Gr+1)-Gr)}function Lt(Pi){return(Math.exp(Pi)-Math.exp(-Pi))/2}function li(Pi){return(Math.exp(Pi)+Math.exp(-Pi))/2}const Kt=Vt(0);let ui=function(Pi){return li(Kt)/li(Kt+st*Pi)},Ji=function(Pi){return It*((li(Kt)*(Lt(Gr=Kt+st*Pi)/li(Gr))-Lt(Kt))/Ot)/jt;var Gr},cr=(Vt(1)-Kt)/st;if(Math.abs(jt)<1e-6||!isFinite(cr)){if(Math.abs(It-Et)<1e-6)return this.easeTo(l,p);const Pi=Et<It?-1:1;cr=Math.abs(Math.log(Et/It))/st,Ji=function(){return 0},ui=function(Gr){return Math.exp(Pi*st*Gr)}}return l.duration="duration"in l?+l.duration:1e3*cr/("screenSpeed"in l?+l.screenSpeed/st:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=U!==ke,this._pitching=Be!==te,this._padding=!C.isPaddingEqual(He),this._prepareEase(p,!1),this._ease(Pi=>{const Gr=Pi*cr,qr=1/ui(Gr);C.zoom=Pi===1?ge:D+C.scaleZoom(qr),this._rotating&&(C.bearing=s.number(U,ke,Pi)),this._pitching&&(C.pitch=s.number(te,Be,Pi)),this._padding&&(C.interpolatePadding(pe,He,Pi),Je=C.centerPoint.add(it));const _r=Pi===1?pt:C.unproject(yt.add(Ct.mult(Ji(Gr))).mult(qr));C.setLocationAtPoint(C.renderWorldCopies?_r.wrap():_r,Je),this._fireMoveEvents(p)},()=>this._afterEase(p),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,p)}if(!l){const C=this.handlers;C&&C.stop(!1)}return this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=s.exported.now(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,p){l=s.wrap(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}_normalizeCenter(l){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const C=l.lng-p.center.lng;l.lng+=C>180?-360:C<-180?360:0}}class _h{constructor(l={}){this.options=l,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(D=>typeof D!="string"?"":D)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const p=this._map.style.sourceCaches;for(const D in p){const U=p[D];if(U.used||U.usedForTerrain){const te=U.getSource();te.attribution&&l.indexOf(te.attribution)<0&&l.push(te.attribution)}}l=l.filter(D=>String(D).trim()),l.sort((D,U)=>D.length-U.length),l=l.filter((D,U)=>{for(let te=U+1;te<l.length;te++)if(l[te].indexOf(D)>=0)return!1;return!0});const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=C,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class gf{constructor(l={}){this.options=l,s.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl mapboxgl-ctrl");const p=g.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const p=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Jg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const D of C)if(D.id===l)return void(D.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ey={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},bx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Po={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ch{constructor(l,p,C=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new hi({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,C&&(this.mousePitch=new cf({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(p,"mousedown",this.mousedown),g.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(p,"touchmove",this.touchmove),g.addEventListener(p,"touchend",this.touchend),g.addEventListener(p,"touchcancel",this.reset)}down(l,p){this.mouseRotate.mousedown(l,p),this.mousePitch&&this.mousePitch.mousedown(l,p),g.disableDrag()}move(l,p){const C=this.map,D=this.mouseRotate.mousemoveWindow(l,p);if(D&&D.bearingDelta&&C.setBearing(C.getBearing()+D.bearingDelta),this.mousePitch){const U=this.mousePitch.mousemoveWindow(l,p);U&&U.pitchDelta&&C.setPitch(C.getPitch()+U.pitchDelta)}}off(){const l=this.element;g.removeEventListener(l,"mousedown",this.mousedown),g.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(l,"touchmove",this.touchmove),g.removeEventListener(l,"touchend",this.touchend),g.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(s.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),g.mousePos(this.element,l)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,g.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ti(I,l,p){if(I=new s.LngLat(I.lng,I.lat),l){const C=new s.LngLat(I.lng-360,I.lat),D=new s.LngLat(I.lng+360,I.lat),U=p.locationPoint(I).distSqr(l);p.locationPoint(C).distSqr(l)<U?I=C:p.locationPoint(D).distSqr(l)<U&&(I=D)}for(;Math.abs(I.lng-p.center.lng)>180;){const C=p.locationPoint(I);if(C.x>=0&&C.y>=0&&C.x<=p.width&&C.y<=p.height)break;I.lng>p.center.lng?I.lng-=360:I.lng+=360}return I}const Li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ku(I,l,p){const C=I.classList;for(const D in Li)C.remove(`maplibregl-${p}-anchor-${D}`,`mapboxgl-${p}-anchor-${D}`);C.add(`maplibregl-${p}-anchor-${l}`,`mapboxgl-${p}-anchor-${l}`)}class Qu extends s.Evented{constructor(l,p){if(super(),(l instanceof HTMLElement||p)&&(l=s.extend({element:l},p)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=s.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const C=g.createNS("http://www.w3.org/2000/svg","svg"),D=41,U=27;C.setAttributeNS(null,"display","block"),C.setAttributeNS(null,"height",`${D}px`),C.setAttributeNS(null,"width",`${U}px`),C.setAttributeNS(null,"viewBox",`0 0 ${U} ${D}`);const te=g.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");const pe=g.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"fill-rule","nonzero");const ge=g.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");const ke=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ct of ke){const st=g.createNS("http://www.w3.org/2000/svg","ellipse");st.setAttributeNS(null,"opacity","0.04"),st.setAttributeNS(null,"cx","10.5"),st.setAttributeNS(null,"cy","5.80029008"),st.setAttributeNS(null,"rx",Ct.rx),st.setAttributeNS(null,"ry",Ct.ry),ge.appendChild(st)}const Be=g.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"fill",this._color);const He=g.createNS("http://www.w3.org/2000/svg","path");He.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Be.appendChild(He);const Ye=g.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"fill","#000000");const it=g.createNS("http://www.w3.org/2000/svg","path");it.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ye.appendChild(it);const Je=g.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Je.setAttributeNS(null,"fill","#FFFFFF");const tt=g.createNS("http://www.w3.org/2000/svg","g");tt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=g.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=g.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),tt.appendChild(pt),tt.appendChild(yt),pe.appendChild(ge),pe.appendChild(Be),pe.appendChild(Ye),pe.appendChild(Je),pe.appendChild(tt),C.appendChild(pe),C.setAttributeNS(null,"height",D*this._scale+"px"),C.setAttributeNS(null,"width",U*this._scale+"px"),this._element.appendChild(C),this._offset=s.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()}),Ku(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(38.1-13.5+D)],"bottom-right":[-D,-1*(38.1-13.5+D)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const p=l.code,C=l.charCode||l.keyCode;p!=="Space"&&p!=="Enter"&&C!==32&&C!==13||this.togglePopup()}_onMapClick(l){const p=l.originalEvent.target,C=this._element;this._popup&&(p===C||C.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ti(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Li[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${p}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const D=this._map.unproject(this._pos),U=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=D.distanceTo(this._lngLat)>20*U?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(l){return this._offset=s.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const yf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rs,Jl=0,fa=!1;const wx={maxWidth:100,unit:"metric"};function Ju(I,l,p){const C=p&&p.maxWidth||100,D=I._container.clientHeight/2,U=I.unproject([0,D]),te=I.unproject([C,D]),pe=U.distanceTo(te);if(p&&p.unit==="imperial"){const ge=3.2808*pe;ge>5280?hn(l,C,ge/5280,I._getUIString("ScaleControl.Miles")):hn(l,C,ge,I._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?hn(l,C,pe/1852,I._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?hn(l,C,pe/1e3,I._getUIString("ScaleControl.Kilometers")):hn(l,C,pe,I._getUIString("ScaleControl.Meters"))}function hn(I,l,p,C){const D=function(U){const te=Math.pow(10,`${Math.floor(U)}`.length-1);let pe=U/te;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:function(ge){const ke=Math.pow(10,Math.ceil(-Math.log(ge)/Math.LN10));return Math.round(ge*ke)/ke}(pe),te*pe}(p);I.style.width=l*(D/p)+"px",I.innerHTML=`${D}&nbsp;${C}`}const Zn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ty=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fc(I){if(I){if(typeof I=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(I,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,I),"top-left":new s.pointGeometry(l,l),"top-right":new s.pointGeometry(-l,l),bottom:new s.pointGeometry(0,-I),"bottom-left":new s.pointGeometry(l,-l),"bottom-right":new s.pointGeometry(-l,-l),left:new s.pointGeometry(I,0),right:new s.pointGeometry(-I,0)}}if(I instanceof s.pointGeometry||Array.isArray(I)){const l=s.pointGeometry.convert(I);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:s.pointGeometry.convert(I.center||[0,0]),top:s.pointGeometry.convert(I.top||[0,0]),"top-left":s.pointGeometry.convert(I["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(I["top-right"]||[0,0]),bottom:s.pointGeometry.convert(I.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(I["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(I["bottom-right"]||[0,0]),left:s.pointGeometry.convert(I.left||[0,0]),right:s.pointGeometry.convert(I.right||[0,0])}}return Fc(new s.pointGeometry(0,0))}const ed={supported:h,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends wh{constructor(I){var l;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(I=s.extend({},bx,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vh(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies),{bearingSnap:I.bearingSnap}),this._interactive=I.interactive,this._cooperativeGestures=I.cooperativeGestures,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Jg,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},ey,I.locale),this._clickTolerance=I.clickTolerance,this._pixelRatio=(l=I.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new b(I.transformRequest),typeof I.container=="string"){if(this._container=document.getElementById(I.container),!this._container)throw new Error(`Container '${I.container}' not found.`)}else{if(!(I.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Za(this,I),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=I.hash&&new Ug(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,s.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new _h({customAttribution:I.customAttribution})),I.maplibreLogo&&this.addControl(new gf,I.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new s.Event(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new s.Event(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new s.Event("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(I,l){if(l===void 0&&(l=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=I.onAdd(this);this._controls.push(I);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(I);return l>-1&&this._controls.splice(l,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}calculateCameraOptionsFromTo(I,l,p,C){return C==null&&this.style.terrain&&(C=this.transform.getElevation(p,this.style.terrain)),super.calculateCameraOptionsFromTo(I,l,p,C)}resize(I){const l=this._containerDimensions(),p=l[0],C=l[1];this._resizeCanvas(p,C,this.getPixelRatio()),this.transform.resize(p,C),this.painter.resize(p,C,this.getPixelRatio());const D=!this._moving;return D&&(this.stop(),this.fire(new s.Event("movestart",I)).fire(new s.Event("move",I))),this.fire(new s.Event("resize",I)),D&&this.fire(new s.Event("moveend",I)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(I){const[l,p]=this._containerDimensions();this._pixelRatio=I,this._resizeCanvas(l,p,I),this.painter.resize(l,p,I)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(s.LngLatBounds.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.renderWorldCopies=I,this._update()}project(I){return this.transform.locationPoint(s.LngLat.convert(I),this.style&&this.style.terrain)}unproject(I){return this.transform.pointLocation(s.pointGeometry.convert(I),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(I,l,p){if(I==="mouseenter"||I==="mouseover"){let C=!1;return{layer:l,listener:p,delegates:{mousemove:U=>{const te=this.getLayer(l)?this.queryRenderedFeatures(U.point,{layers:[l]}):[];te.length?C||(C=!0,p.call(this,new Ia(I,this,U.originalEvent,{features:te}))):C=!1},mouseout:()=>{C=!1}}}}if(I==="mouseleave"||I==="mouseout"){let C=!1;return{layer:l,listener:p,delegates:{mousemove:te=>{(this.getLayer(l)?this.queryRenderedFeatures(te.point,{layers:[l]}):[]).length?C=!0:C&&(C=!1,p.call(this,new Ia(I,this,te.originalEvent)))},mouseout:te=>{C&&(C=!1,p.call(this,new Ia(I,this,te.originalEvent)))}}}}{const C=D=>{const U=this.getLayer(l)?this.queryRenderedFeatures(D.point,{layers:[l]}):[];U.length&&(D.features=U,p.call(this,D),delete D.features)};return{layer:l,listener:p,delegates:{[I]:C}}}}on(I,l,p){if(p===void 0)return super.on(I,l);const C=this._createDelegatedListener(I,l,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(C);for(const D in C.delegates)this.on(D,C.delegates[D]);return this}once(I,l,p){if(p===void 0)return super.once(I,l);const C=this._createDelegatedListener(I,l,p);for(const D in C.delegates)this.once(D,C.delegates[D]);return this}off(I,l,p){return p===void 0?super.off(I,l):(this._delegatedListeners&&this._delegatedListeners[I]&&(C=>{const D=this._delegatedListeners[I];for(let U=0;U<D.length;U++){const te=D[U];if(te.layer===l&&te.listener===p){for(const pe in te.delegates)this.off(pe,te.delegates[pe]);return D.splice(U,1),this}}})(),this)}queryRenderedFeatures(I,l){if(!this.style)return[];let p;if(l!==void 0||I===void 0||I instanceof s.pointGeometry||Array.isArray(I)||(l=I,I=void 0),l=l||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof I[0]=="number")p=[s.pointGeometry.convert(I)];else{const C=s.pointGeometry.convert(I[0]),D=s.pointGeometry.convert(I[1]);p=[C,new s.pointGeometry(D.x,C.y),D,new s.pointGeometry(C.x,D.y),C]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(I,l){return this.style.querySourceFeatures(I,l)}setStyle(I,l){return(l=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(I,l))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const l=this._locale[I];if(l==null)throw new Error(`Missing UI string '${I}'`);return l}_updateStyle(I,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new xr(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,l){if(typeof I=="string"){const p=this._requestManager.transformRequest(I,s.ResourceType.Style);s.getJSON(p,(C,D)=>{C?this.fire(new s.ErrorEvent(C)):D&&this._updateDiff(D,l)})}else typeof I=="object"&&this._updateDiff(I,l)}_updateDiff(I,l){try{this.style.setState(I)&&this._update(!0)}catch(p){s.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(I,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(I,l){return this._lazyInitEmptyStyle(),this.style.addSource(I,l),this._update(!0)}isSourceLoaded(I){const l=this.style&&this.style.sourceCaches[I];if(l!==void 0)return l.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){return this.style.setTerrain(I),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const l in I){const p=I[l]._tiles;for(const C in p){const D=p[C];if(D.state!=="loaded"&&D.state!=="errored")return!1}}return!0}addSourceType(I,l,p){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,l,p)}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}addImage(I,l,{pixelRatio:p=1,sdf:C=!1,stretchX:D,stretchY:U,content:te}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||s.isImageBitmap(l)){const{width:pe,height:ge,data:ke}=s.exported.getImageData(l);this.style.addImage(I,{data:new s.RGBAImage({width:pe,height:ge},ke),pixelRatio:p,stretchX:D,stretchY:U,content:te,sdf:C,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:ge,data:ke}=l,Be=l;this.style.addImage(I,{data:new s.RGBAImage({width:pe,height:ge},new Uint8Array(ke)),pixelRatio:p,stretchX:D,stretchY:U,content:te,sdf:C,version:0,userImage:Be}),Be.onAdd&&Be.onAdd(this,I)}}}updateImage(I,l){const p=this.style.getImage(I);if(!p)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||s.isImageBitmap(l)?s.exported.getImageData(l):l,{width:D,height:U,data:te}=C;if(D===void 0||U===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(D!==p.data.width||U!==p.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const pe=!(l instanceof HTMLImageElement||s.isImageBitmap(l));p.data.replace(te,pe),this.style.updateImage(I,p)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I,l){s.getImage(this._requestManager.transformRequest(I,s.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(I,l){return this._lazyInitEmptyStyle(),this.style.addLayer(I,l),this._update(!0)}moveLayer(I,l){return this.style.moveLayer(I,l),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}setLayerZoomRange(I,l,p){return this.style.setLayerZoomRange(I,l,p),this._update(!0)}setFilter(I,l,p={}){return this.style.setFilter(I,l,p),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,l,p,C={}){return this.style.setPaintProperty(I,l,p,C),this._update(!0)}getPaintProperty(I,l){return this.style.getPaintProperty(I,l)}setLayoutProperty(I,l,p,C={}){return this.style.setLayoutProperty(I,l,p,C),this._update(!0)}getLayoutProperty(I,l){return this.style.getLayoutProperty(I,l)}setLight(I,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(I,l){return this.style.setFeatureState(I,l),this._update()}removeFeatureState(I,l){return this.style.removeFeatureState(I,l),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,l=0;return this._container&&(I=this._container.clientWidth||400,l=this._container.clientHeight||300),[I,l]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=g.create("div","maplibregl-canvas-container mapboxgl-canvas-container",I);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions();this._resizeCanvas(p[0],p[1],this.getPixelRatio());const C=this._controlContainer=g.create("div","maplibregl-control-container mapboxgl-control-container",I),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(U=>{D[U]=g.create("div",`maplibregl-ctrl-${U} mapboxgl-ctrl-${U}`,C)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const I=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",I);let l="Control",p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",l="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",C=>{C.key===l&&(this._metaPress=!0)}),document.addEventListener("keyup",C=>{C.key===l&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",C=>{this._onCooperativeGesture(C,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(I,l,p){this._canvas.width=p*I,this._canvas.height=p*l,this._canvas.style.width=`${I}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const I=s.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);l?(this.painter=new $g(l,this.transform),s.exported$1.testSupport(l)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:I}))}_contextRestored(I){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:I}))}_onMapScroll(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(I,l,p){return!l&&p<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){let l,p=0;const C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,l),p=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const te=this.transform.zoom,pe=s.exported.now();this.style.zoomHistory.update(te,pe);const ge=new s.EvaluationParameters(te,{now:pe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ke=ge.crossFadingFactor();ke===1&&ke===this._crossFadingFactor||(D=!0,this._crossFadingFactor=ke),this.style.update(ge)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const te=s.exported.now()-p;C.endQueryEXT(C.TIME_ELAPSED_EXT,l),setTimeout(()=>{const pe=C.getQueryObjectEXT(l,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(l),this.fire(new s.Event("gpu-timing-frame",{cpuTime:te,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){const te=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(te);this.fire(new s.Event("gpu-timing-layer",{layerTimes:pe}))},50)}const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const I=this.painter.context.gl.getExtension("WEBGL_lose_context");I&&I.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&g.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(I=>{s.PerformanceUtils.frame(I),this._frame=null,this._render(I)}))}_onWindowOnline(){this._update()}_onWindowResize(I){this._trackResize&&this.resize({originalEvent:I})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}_setCacheLimits(I,l){s.setCacheLimits(I,l)}get version(){return"2.4.0"}},NavigationControl:class{constructor(I){this.options=s.extend({},Po,I),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const I=this._map.getZoom(),l=I===this._map.getMaxZoom(),p=I===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const I=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=I}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ch(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,l){const p=g.create("button",I,this._container);return p.type="button",p.addEventListener("click",l),p}_setButtonTitle(I,l){const p=this._map._getUIString(`NavigationControl.${l}`);I.title=p,I.setAttribute("aria-label",p)}},GeolocateControl:class extends s.Evented{constructor(I){super(),this.options=s.extend({},yf,I),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(I){var l;return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,rs!==void 0?l(rs):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{rs=p.state!=="denied",l(rs)}):(rs=!!window.navigator.geolocation,l(rs)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Jl=0,fa=!1}_isOutOfMapMaxBounds(I){const l=this._map.getMaxBounds(),p=I.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(I){if(this._map){if(this._isOutOfMapMaxBounds(I))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",I)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",I)),this._finish()}}_updateCamera(I){const l=new s.LngLat(I.coords.longitude,I.coords.latitude),p=I.coords.accuracy,C=this._map.getBearing(),D=s.extend({bearing:C},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(p),D,{geolocateSource:!0})}_updateMarker(I){if(I){const l=new s.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const I=this._map._container.clientHeight/2,l=this._map.unproject([0,I]),p=this._map.unproject([1,I]),C=l.distanceTo(p),D=Math.ceil(2*this._accuracy/C);this._circleElement.style.width=`${D}px`,this._circleElement.style.height=`${D}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&fa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",I)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(I){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",I===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qu(this._dotElement),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Jl--,fa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Jl++,Jl>1?(I={maximumAge:6e5,timeout:0},fa=!0):(I=this.options.positionOptions,fa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_h,LogoControl:gf,ScaleControl:class{constructor(I){this.options=s.extend({},wx,I),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ju(this._map,this._container,this.options)}onAdd(I){return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(I){this.options.unit=I,Ju(this._map,this._container,this.options)}},FullscreenControl:class{constructor(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const I=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(I){this.options=I,s.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(I){return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends s.Evented{constructor(I){super(),this.options=s.extend(Object.create(Zn),I),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=s.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=I;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){this._container&&this._container.classList.add(I)}removeClassName(I){this._container&&this._container.classList.remove(I)}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(I){this._update(I.point)}_onMouseMove(I){this._update(I.point)}_onDrag(I){this._update(I.point)}_update(I){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=g.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(U=>this._container.classList.add(U)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ti(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!I))return;const l=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat);let p=this.options.anchor;const C=Fc(this.options.offset);if(!p){const U=this._container.offsetWidth,te=this._container.offsetHeight;let pe;pe=l.y+C.bottom.y<te?["top"]:l.y>this._map.transform.height-te?["bottom"]:[],l.x<U/2?pe.push("left"):l.x>this._map.transform.width-U/2&&pe.push("right"),p=pe.length===0?"bottom":pe.join("-")}const D=l.add(C[p]).round();g.setTransform(this._container,`${Li[p]} translate(${D.x}px,${D.y}px)`),Ku(this._container,p,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(ty);I&&I.focus()}_onClose(){this.remove()}},Marker:Qu,Style:xr,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:se,GeoJSONSource:V,ImageSource:q,RasterDEMTileSource:G,RasterTileSource:R,VectorTileSource:O,VideoSource:W,prewarm:function(){Ce().acquire(ee)},clearPrewarmedResources:function(){const I=ve;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(ee),ve=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ae.workerCount},set workerCount(I){ae.workerCount=I},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(I){s.config.MAX_PARALLEL_IMAGE_REQUESTS=I},clearStorage(I){s.clearTileCache(I)},workerUrl:"",addProtocol(I,l){s.config.REGISTERED_PROTOCOLS[I]=l},removeProtocol(I){delete s.config.REGISTERED_PROTOCOLS[I]}};return yn.extend(ed,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),ed});var c=n;return c})})(pK);var lP={exports:{}};class fK{constructor(e=[],t=mK){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const a=e-1>>1,c=t[a];if(r(n,c)>=0)break;t[e]=c,e=a}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,a=t[e];for(;e<n;){let c=(e<<1)+1,s=t[c];const h=c+1;if(h<this.length&&r(t[h],s)<0&&(c=h,s=t[h]),r(s,a)>=0)break;t[e]=s,e=c}t[e]=a}}function mK(i,e){return i<e?-1:i>e?1:0}const gK=Object.freeze(Object.defineProperty({__proto__:null,default:fK},Symbol.toStringTag,{value:"Module"})),yK=_R(gK);var m0=yK;m0.default&&(m0=m0.default);lP.exports=cP;lP.exports.default=cP;function cP(i,e,t){e=e||1;for(var r,n,a,c,s=0;s<i[0].length;s++){var h=i[0][s];(!s||h[0]<r)&&(r=h[0]),(!s||h[1]<n)&&(n=h[1]),(!s||h[0]>a)&&(a=h[0]),(!s||h[1]>c)&&(c=h[1])}var f=a-r,m=c-n,y=Math.min(f,m),g=y/2;if(y===0){var b=[r,n];return b.distance=0,b}for(var v=new m0(void 0,vK),_=r;_<a;_+=y)for(var T=n;T<c;T+=y)v.push(new ru(_+g,T+g,g,i));var k=bK(i),w=new ru(r+f/2,n+m/2,0,i);w.d>k.d&&(k=w);for(var E=v.length;v.length;){var A=v.pop();A.d>k.d&&(k=A,t&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,E)),!(A.max-k.d<=e)&&(g=A.h/2,v.push(new ru(A.x-g,A.y-g,g,i)),v.push(new ru(A.x+g,A.y-g,g,i)),v.push(new ru(A.x-g,A.y+g,g,i)),v.push(new ru(A.x+g,A.y+g,g,i)),E+=4)}t&&(console.log("num probes: "+E),console.log("best distance: "+k.d));var M=[k.x,k.y];return M.distance=k.d,M}function vK(i,e){return e.max-i.max}function ru(i,e,t,r){this.x=i,this.y=e,this.h=t,this.d=xK(i,e,r),this.max=this.d+this.h*Math.SQRT2}function xK(i,e,t){for(var r=!1,n=1/0,a=0;a<t.length;a++)for(var c=t[a],s=0,h=c.length,f=h-1;s<h;f=s++){var m=c[s],y=c[f];m[1]>e!=y[1]>e&&i<(y[0]-m[0])*(e-m[1])/(y[1]-m[1])+m[0]&&(r=!r),n=Math.min(n,wK(i,e,m,y))}return n===0?0:(r?1:-1)*Math.sqrt(n)}function bK(i){for(var e=0,t=0,r=0,n=i[0],a=0,c=n.length,s=c-1;a<c;s=a++){var h=n[a],f=n[s],m=h[0]*f[1]-f[0]*h[1];t+=(h[0]+f[0])*m,r+=(h[1]+f[1])*m,e+=m*3}return e===0?new ru(n[0][0],n[0][1],0,i):new ru(t/e,r/e,0,i)}function wK(i,e,t,r){var n=t[0],a=t[1],c=r[0]-n,s=r[1]-a;if(c!==0||s!==0){var h=((i-n)*c+(e-a)*s)/(c*c+s*s);h>1?(n=r[0],a=r[1]):h>0&&(n+=c*h,a+=s*h)}return c=i-n,s=e-a,c*c+s*s}var _K=typeof wn=="object"&&wn&&wn.Object===Object&&wn,CK=typeof self=="object"&&self&&self.Object===Object&&self;_K||CK||Function("return this")();var TK={exports:{}};(function(i,e){var t=function(){var r={},n=Math.PI/180,a=180/Math.PI,c=6378137,s=20037508342789244e-9;function h(m){return Number(m)===m&&m%1!==0}function f(m){if(m=m||{},this.size=m.size||256,this.expansion=m.antimeridian===!0?2:1,!r[this.size]){var y=this.size,g=r[this.size]={};g.Bc=[],g.Cc=[],g.zc=[],g.Ac=[];for(var b=0;b<30;b++)g.Bc.push(y/360),g.Cc.push(y/(2*Math.PI)),g.zc.push(y/2),g.Ac.push(y),y*=2}this.Bc=r[this.size].Bc,this.Cc=r[this.size].Cc,this.zc=r[this.size].zc,this.Ac=r[this.size].Ac}return f.prototype.px=function(m,y){if(h(y)){var g=this.size*Math.pow(2,y),b=g/2,v=g/360,_=g/(2*Math.PI),T=g,k=Math.min(Math.max(Math.sin(n*m[1]),-.9999),.9999),w=b+m[0]*v,E=b+.5*Math.log((1+k)/(1-k))*-_;return w>T*this.expansion&&(w=T*this.expansion),E>T&&(E=T),[w,E]}else{var b=this.zc[y],k=Math.min(Math.max(Math.sin(n*m[1]),-.9999),.9999),w=Math.round(b+m[0]*this.Bc[y]),E=Math.round(b+.5*Math.log((1+k)/(1-k))*-this.Cc[y]);return w>this.Ac[y]*this.expansion&&(w=this.Ac[y]*this.expansion),E>this.Ac[y]&&(E=this.Ac[y]),[w,E]}},f.prototype.ll=function(m,y){if(h(y)){var g=this.size*Math.pow(2,y),b=g/360,v=g/(2*Math.PI),_=g/2,T=(m[1]-_)/-v,k=(m[0]-_)/b,w=a*(2*Math.atan(Math.exp(T))-.5*Math.PI);return[k,w]}else{var T=(m[1]-this.zc[y])/-this.Cc[y],k=(m[0]-this.zc[y])/this.Bc[y],w=a*(2*Math.atan(Math.exp(T))-.5*Math.PI);return[k,w]}},f.prototype.bbox=function(m,y,g,b,v){b&&(y=Math.pow(2,g)-1-y);var _=[m*this.size,(+y+1)*this.size],T=[(+m+1)*this.size,y*this.size],k=this.ll(_,g).concat(this.ll(T,g));return v==="900913"?this.convert(k,"900913"):k},f.prototype.xyz=function(m,y,g,b){b==="900913"&&(m=this.convert(m,"WGS84"));var v=[m[0],m[1]],_=[m[2],m[3]],T=this.px(v,y),k=this.px(_,y),w=[Math.floor(T[0]/this.size),Math.floor((k[0]-1)/this.size)],E=[Math.floor(k[1]/this.size),Math.floor((T[1]-1)/this.size)],A={minX:Math.min.apply(Math,w)<0?0:Math.min.apply(Math,w),minY:Math.min.apply(Math,E)<0?0:Math.min.apply(Math,E),maxX:Math.max.apply(Math,w),maxY:Math.max.apply(Math,E)};if(g){var M={minY:Math.pow(2,y)-1-A.maxY,maxY:Math.pow(2,y)-1-A.minY};A.minY=M.minY,A.maxY=M.maxY}return A},f.prototype.convert=function(m,y){return y==="900913"?this.forward(m.slice(0,2)).concat(this.forward(m.slice(2,4))):this.inverse(m.slice(0,2)).concat(this.inverse(m.slice(2,4)))},f.prototype.forward=function(m){var y=[c*m[0]*n,c*Math.log(Math.tan(Math.PI*.25+.5*m[1]*n))];return y[0]>s&&(y[0]=s),y[0]<-20037508342789244e-9&&(y[0]=-20037508342789244e-9),y[1]>s&&(y[1]=s),y[1]<-20037508342789244e-9&&(y[1]=-20037508342789244e-9),y},f.prototype.inverse=function(m){return[m[0]*a/c,(Math.PI*.5-2*Math.atan(Math.exp(-m[1]/c)))*a]},f}();i.exports=t})(TK);var ME={exports:{}};(function(i,e){(function(t,r){r(e,i)})(wn,function(t,r){var n={timeout:5e3,jsonpCallback:"callback"};function a(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function c(f){try{delete window[f]}catch{window[f]=void 0}}function s(f){var m=document.getElementById(f);m&&document.getElementsByTagName("head")[0].removeChild(m)}function h(f){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=f,g=m.timeout||n.timeout,b=m.jsonpCallback||n.jsonpCallback,v=void 0;return new Promise(function(_,T){var k=m.jsonpCallbackFunction||a(),w=b+"_"+k;window[k]=function(A){_({ok:!0,json:function(){return Promise.resolve(A)}}),v&&clearTimeout(v),s(w),c(k)},y+=y.indexOf("?")===-1?"?":"&";var E=document.createElement("script");E.setAttribute("src",""+y+b+"="+k),m.charset&&E.setAttribute("charset",m.charset),m.nonce&&E.setAttribute("nonce",m.nonce),m.referrerPolicy&&E.setAttribute("referrerPolicy",m.referrerPolicy),m.crossorigin&&E.setAttribute("crossorigin","true"),E.id=w,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){T(new Error("JSONP request to "+f+" timed out")),c(k),s(w),window[k]=function(){c(k)}},g),E.onerror=function(){T(new Error("JSONP request to "+f+" failed")),c(k),s(w),v&&clearTimeout(v)}})}r.exports=h})})(ME,ME.exports);var SK=kK,EK=Object.prototype.hasOwnProperty;function kK(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var r in t)EK.call(t,r)&&(i[r]=t[r])}return i}var uP={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(r,n){return n.filter(function(a){return t.test(r,a)})},t.test=function(r,n){return t.match(r,n)!==null},t.match=function(r,n,a){a=a||{};var c=0,s=[],h=n.length,f=0,m=0,y=a.pre||"",g=a.post||"",b=a.caseSensitive&&n||n.toLowerCase(),v;r=a.caseSensitive&&r||r.toLowerCase();for(var _=0;_<h;_++)v=n[_],b[_]===r[c]?(v=y+v+g,c+=1,m+=1+m):m=0,f+=m,s[s.length]=v;return c===r.length?(f=b===r?1/0:f,{rendered:s.join(""),score:f}):null},t.filter=function(r,n,a){return!n||n.length===0?[]:typeof r!="string"?n:(a=a||{},n.reduce(function(c,s,h,f){var m=s;a.extract&&(m=a.extract(s));var y=t.match(r,m,a);return y!=null&&(c[c.length]={string:y.rendered,score:y.score,index:h,original:s}),c},[]).sort(function(c,s){var h=s.score-c.score;return h||c.index-s.index}))}})()})(uP);var MK=uP.exports,lo=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};lo.prototype.show=function(){this.element.style.display="block"};lo.prototype.hide=function(){this.element.style.display="none"};lo.prototype.add=function(i){this.items.push(i)};lo.prototype.clear=function(){this.items=[],this.active=0};lo.prototype.isEmpty=function(){return!this.items.length};lo.prototype.isVisible=function(){return this.element.style.display==="block"};lo.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};lo.prototype.drawItem=function(i,e){var t=document.createElement("li"),r=document.createElement("a");e&&(t.className+=" active"),r.innerHTML=i.string,t.appendChild(r),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};lo.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};lo.prototype.move=function(i){this.active=i,this.draw()};lo.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};lo.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};lo.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var AK=lo,IK=SK,PK=MK,DK=AK,Ma=function(i,e,t){return t=t||{},this.options=IK({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new DK(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(r){this.handleKeyUp(r.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(r){this.handleKeyDown(r)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(r){this.handlePaste(r)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ma.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Ma.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ma.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ma.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};Ma.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};Ma.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ma.prototype.update=function(i){this.data=i,this.handleKeyUp()};Ma.prototype.clear=function(){this.data=[],this.list.clear()};Ma.prototype.normalize=function(i){return i=i.toLowerCase(),i};Ma.prototype.match=function(i,e){return i.indexOf(e)>-1};Ma.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Ma.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(r){return this.getItemValue(r)}).bind(this)},t;this.options.filter?(t=PK.filter(this.query,this.data,e),t=t.map((function(r){return{original:r.original,string:this.render(r.original,r.string)}}).bind(this))):t=this.data.map((function(r){var n=this.render(r);return{original:r,string:n}}).bind(this)),i(t)};Ma.prototype.getItemValue=function(i){return i};Ma.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),r=this.normalize(t),n=r.lastIndexOf(this.query);n>-1;){var a=n+this.query.length;t=t.slice(0,n)+"<strong>"+t.slice(n,a)+"</strong>"+t.slice(a),n=r.slice(0,n).lastIndexOf(this.query)}return t};Ma.prototype.renderError=function(i){this.list.drawError(i)};var RK=Ma,LK=RK;typeof window<"u"&&(window.Suggestions=LK);const NK="_pillWrapper_cps7i_1",zK="_pill_cps7i_1",jK="_destructive_cps7i_18",OK="_info_cps7i_23",FK="_warning_cps7i_28",BK="_success_cps7i_33",hd={pillWrapper:NK,pill:zK,default:"_default_cps7i_13",destructive:jK,info:OK,warning:FK,success:BK},$K=({children:i,variant:e="default"})=>he.createElement("span",{className:ir(hd.pillWrapper,{[hd.default]:e==="default",[hd.destructive]:e==="destructive",[hd.info]:e==="info",[hd.warning]:e==="warning",[hd.success]:e==="success"})},he.createElement("div",{className:hd.pill},i)),UK="_wrapper_ff9cy_1",VK="_ping_ff9cy_8",HK="_active_ff9cy_16",GK="_dot_ff9cy_20",qK="_destructive_ff9cy_39",WK="_info_ff9cy_43",YK="_warning_ff9cy_47",ZK="_success_ff9cy_51",Hh={wrapper:UK,ping:VK,active:HK,dot:GK,default:"_default_ff9cy_35",destructive:qK,info:WK,warning:YK,success:ZK},XK=({active:i=!1,variant:e="default"})=>he.createElement("span",{className:Hh.wrapper},he.createElement("span",{className:ir(Hh.ping,Hh[e],{[Hh.active]:i})}),he.createElement("span",{className:ir(Hh.dot,Hh[e])})),KK="_card_1fxs6_1",QK={card:KK},I2=({children:i,className:e})=>he.createElement("div",{className:`${QK.card} ${e||""}`},i),dP=({label:i,primary:e,secondary:t,small:r,large:n,disabled:a,onClick:c,open:s,icon:h,dataTest:f,component:m})=>{const[y,g]=Ae.useState(!1),b=Ae.useRef(null),v=s!==void 0?s:y,_=()=>{s===void 0&&g(T=>!T),c==null||c()};return he.createElement("div",{ref:b},he.createElement(Ci,{title:i??be.t("More"),primary:e,secondary:t,dataTest:f,disabled:a,small:r,large:n,onClick:_,icon:h},i),v&&he.createElement(Wm,{onBackdropClick:_},he.createElement(Bd,{reference:b,placement:"bottom-start"},m)))},JK="_contentWrapper_137cv_1",eQ={contentWrapper:JK},hP=({label:i,variant:e="default",active:t=!1})=>he.createElement($K,{variant:e},he.createElement("div",{className:eQ.contentWrapper},he.createElement(XK,{variant:e,active:t}),he.createElement("span",null,i)));var pP={exports:{}};(function(i,e){(function(t,r){r()})(wn,function(){function t(f,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,m,y){var g=new XMLHttpRequest;g.open("GET",f),g.responseType="blob",g.onload=function(){h(g.response,m,y)},g.onerror=function(){console.error("could not download file")},g.send()}function n(f){var m=new XMLHttpRequest;m.open("HEAD",f,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function a(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(m)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof wn=="object"&&wn.global===wn?wn:void 0,s=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(f,m,y){var g=c.URL||c.webkitURL,b=document.createElement("a");m=m||f.name||"download",b.download=m,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?a(b):n(b.href)?r(f,m,y):a(b,b.target="_blank")):(b.href=g.createObjectURL(f),setTimeout(function(){g.revokeObjectURL(b.href)},4e4),setTimeout(function(){a(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,m,y){if(m=m||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),m);else if(n(f))r(f,m,y);else{var g=document.createElement("a");g.href=f,g.target="_blank",setTimeout(function(){a(g)})}}:function(f,m,y,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof f=="string")return r(f,m,y);var b=f.type==="application/octet-stream",v=/constructor/i.test(c.HTMLElement)||c.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||b&&v||s)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var E=T.result;E=_?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=E:location=E,g=null},T.readAsDataURL(f)}else{var k=c.URL||c.webkitURL,w=k.createObjectURL(f);g?g.location=w:location.href=w,g=null,setTimeout(function(){k.revokeObjectURL(w)},4e4)}});c.saveAs=h.saveAs=h,i.exports=h})})(pP);var tQ=pP.exports;const iQ=Cp(tQ),rQ="_errorChap_1v22m_1",nQ="_errorBar_1v22m_6",sQ="_errorHeader_1v22m_16",aQ="_detailedError_1v22m_23",oQ="_scrollMissingData_1v22m_29",lQ="_notFoundDataTable_1v22m_34",Gh={errorChap:rQ,errorBar:nQ,errorHeader:sQ,detailedError:aQ,scrollMissingData:oQ,notFoundDataTable:lQ},cQ="_buttons_1a7lz_1",uQ="_text_1a7lz_7",AE={buttons:cQ,text:uQ},dQ=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:r,onClickDownloadOrPostData:n,onButtonSendAction:a})=>{const c=()=>{if(r.length===0)return!0;const f=r[0].path.split("/").length;return r.every(m=>m.path.split("/").length===f)},s=a==="predict"?"Send prediction":"Create dataset",h=a==="predict"?z.jsx(dv,{}):z.jsx(Fw,{});return z.jsxs("div",{children:[z.jsxs("div",{className:AE.buttons,children:[z.jsx(Ci,{icon:z.jsx(L3,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!c(),onClick:()=>n("download"),children:"Download data"}),z.jsx(Ci,{icon:h,primary:!0,loading:i.startDownload&&i.action===a||e,disabled:!t||i.startDownload||!c(),onClick:()=>n(a),children:s})]}),e&&z.jsx("p",{className:AE.text,children:"Sending data.."})]})},fP=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:r,selectedPeriodItems:n,selectedOrgUnits:a,orgUnitLevel:c,dataLayers:s})=>{const h=Ws(),[f,m]=Ae.useState({action:"download",startDownload:!1}),[y,g]=Ae.useState(!1),[b,v]=Ae.useState(void 0),[_,T]=Ae.useState(),[k,w]=Ae.useState({}),E=s.filter(re=>re.origin==="dataItem"),[A,M]=Ae.useState([]),[S,N]=Ae.useState([]),[Y,Z]=Ae.useState(""),K=()=>!(c===void 0||a.length==0||n.length==0||r===""||n.length==0||s.length==0||s.some(re=>re.feature===""||re.dataSource===""||re.origin==="")),B=re=>{v(void 0),T(void 0),N([]),m({action:re,startDownload:!0})};Ae.useEffect(()=>{if(b&&_){if(Z(""),m(re=>({...re,startDownload:!1})),f.action==="download"){fe();return}if(O(b))return;f.action==="predict"&&se(),f.action==="new-dataset"&&W()}},[b,_]);const F=(re,le,Se,ye)=>{var ie;const Ee=[],J=[...new Set(re.map(oe=>oe.orgUnit))];n.forEach(oe=>{J.forEach(we=>{var ae;let ee=!0;re.filter(ue=>ue.featureName===Se).forEach(ue=>{if(oe.id==ue.period){ee=!1;return}}),ee&&Ee.push({covariate:ye,orgUnitName:((ae=k[we])==null?void 0:ae.name)||"",period:oe.id})})}),Ee.length>0&&le.push({title:ye+" is missing for the following orgUnit and time periods: ",description:z.jsxs("div",{children:[z.jsxs("p",{children:["Total missing: ",Ee.length," | Use the"," ",z.jsx("a",{target:"_blank",href:((ie=R==null?void 0:R.systemInfo)==null?void 0:ie.contextPath)+"/api/apps/climate-data/index.html#/import",rel:"noreferrer",children:"Climate App"})," ","to import climate data."]}),z.jsx("div",{className:Gh.scrollMissingData,children:z.jsxs("table",{className:Gh.notFoundDataTable,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{children:"Organisation unit:"}),z.jsx("th",{children:"Time period:"})]})}),z.jsx("tbody",{children:Ee.map(oe=>z.jsxs("tr",{children:[z.jsx("td",{children:oe.orgUnitName}),z.jsx("td",{children:g2({periodId:oe.period,calendar:"gregory"}).displayName})]},`${oe.orgUnitName}-${oe.period}`))})]})})]})})},O=re=>{const le=[];return s.filter(Se=>Se.origin=="dataItem").forEach(Se=>{var ye;if(((ye=re.filter(Ee=>Ee.featureName===Se.feature))==null?void 0:ye.length)===0){const Ee='Thes selected data item for covarate "'+Se.feature+'" returned no data.';le.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:Ee})}}),s.find(Se=>Se.feature==="rainfall"&&Se.origin=="dataItem")&&F(re,le,"rainfall","Rainfall"),s.find(Se=>Se.feature==="mean_temperature"&&Se.origin=="dataItem")&&F(re,le,"mean_temperature","Mean Temperature"),le.length>0?(N([...S,...le]),!0):!1},R=Zm(),L=()=>{var re,le;return{appVersion:((re=R==null?void 0:R.appVersion)==null?void 0:re.full)||"Unknown",dhis2Version:((le=R==null?void 0:R.systemInfo)==null?void 0:le.version)||"Unknown",dataItemMapper:A}},G=()=>({name:r,dataToBeFetched:q(),metaData:L(),providedData:b,geojson:_}),V=()=>G(),$=()=>({type:"predict",modelId:t==null?void 0:t.name,...G()}),q=()=>s.filter(re=>re.origin==="CHAP").map(re=>({dataSourceName:re.dataSource,featureName:re.feature})),W=async()=>{const re=V();g(!0),await nl.makeDatasetAnalyticsMakeDatasetPost(re).then(()=>{Z(""),e(),h.invalidateQueries({queryKey:["jobs"]})}).catch(le=>{var Se,ye;(Se=le==null?void 0:le.body)!=null&&Se.detail?Z(JSON.stringify((ye=le==null?void 0:le.body)==null?void 0:ye.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{g(!1)})},se=async()=>{const re=$();g(!0),await nl.makePredictionAnalyticsMakePredictionPost(re).then(()=>{e(),h.invalidateQueries({queryKey:["jobs"]})}).catch(le=>{var Se,ye;(Se=le==null?void 0:le.body)!=null&&Se.detail?Z(JSON.stringify((ye=le==null?void 0:le.body)==null?void 0:ye.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{g(!1)})},fe=()=>{let re={};i==="predict"&&(re=$()),i==="new-dataset"&&(re=V());const le=new Blob([JSON.stringify(re,null,2)],{type:"application/json"}),Se=new Date;iQ(le,i.replaceAll("-","_")+"_chap_request_data_"+Se.toJSON()+".json")};return z.jsxs("div",{children:[z.jsx(dQ,{formValid:K(),onButtonSendAction:i,onClickDownloadOrPostData:B,orgUnits:a,isSendingDataToChap:y,startDownload:f}),z.jsx("p",{className:Gh.errorChap,children:Y}),f.startDownload&&K()&&z.jsx(Mq,{setAnalyticsMetaData:w,setFeatureDataItemMapper:M,model_id:t==null?void 0:t.name,setObservations:v,setGeoJSon:T,analyticsDataLayers:E,startDownload:f,setStartDownload:m,selectedPeriodItems:n,setErrorMessages:N,selectedOrgUnits:a,orgUnitLevel:c}),S.map((re,le)=>z.jsxs("div",{className:Gh.errorBar,children:[z.jsxs("div",{className:Gh.errorHeader,children:[z.jsx(Hw,{}),z.jsx("span",{children:re.title})]}),z.jsx("span",{className:Gh.detailedError,children:re.description})]},le))]})},hQ="_dataLineWrapper_epwpx_1",pQ="_selectField_epwpx_9",fQ="_selectDataLineWrapper_epwpx_19",mQ="_predictLabel_epwpx_27",qf={dataLineWrapper:hQ,selectField:pQ,selectDataLineWrapper:fQ,predictLabel:mQ},gQ="_searchSelectField_188cg_1",yQ="_label_188cg_5",vQ="_selectContainer_188cg_12",xQ="_triggerButton_188cg_18",bQ="_triggerText_188cg_45",wQ="_hasSelection_188cg_56",_Q="_iconContainer_188cg_60",CQ="_clearButton_188cg_68",TQ="_dropdownIcon_188cg_87",SQ="_dropDown_188cg_96",EQ="_searchContainer_188cg_105",kQ="_searchInput_188cg_110",MQ="_resultsList_188cg_125",AQ="_dropDownItem_188cg_133",IQ="_rightDropDownItem_188cg_152",PQ="_infoSearchItem_188cg_162",Bs={searchSelectField:gQ,label:yQ,selectContainer:vQ,triggerButton:xQ,triggerText:bQ,hasSelection:wQ,iconContainer:_Q,clearButton:CQ,dropdownIcon:TQ,dropDown:SQ,searchContainer:EQ,searchInput:kQ,resultsList:MQ,dropDownItem:AQ,rightDropDownItem:IQ,infoSearchItem:PQ},Np=({query:i,queryKey:e,...t})=>{const r=Ud();return Vo({queryKey:e,queryFn:async()=>(await r.query({apiDataQuery:i})).apiDataQuery,...t})},DQ=(i,e=300)=>{const[t,r]=Ae.useState(i);return Ae.useEffect(()=>{const n=setTimeout(()=>{r(i)},e);return()=>{clearTimeout(n)}},[i,e]),t},RQ={PROGRAM_DATA_ELEMENT:be.t("Data Element"),INDICATOR:be.t("Indicator"),PROGRAM_INDICATOR:be.t("Program Indicator"),DATA_ELEMENT:be.t("Data Element")},mP=({feature:i,onChangeSearchSelectField:e})=>{const[t,r]=Ae.useState(""),[n,a]=Ae.useState(null),[c,s]=Ae.useState(!1),h=DQ(t,300),f=Ae.useRef(null),m=Ae.useRef(null),{data:y,isLoading:g}=Np({queryKey:["dataItems",h],query:{resource:"dataItems",params:{filter:[...h?[`displayName:ilike:${h}`]:[],"dimensionItemType:in:[PROGRAM_DATA_ELEMENT,INDICATOR,PROGRAM_INDICATOR,DATA_ELEMENT]"],fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}},staleTime:5*60*1e3,cacheTime:10*60*1e3}),b=(y==null?void 0:y.dataItems)||[],v=()=>{s(!c),r(""),c||setTimeout(()=>{m.current&&m.current.focus()},100)},_=()=>{s(!1),r("")},T=A=>{const M=A.target.value;r(M)},k=A=>{a(A),r(""),s(!1),e(i,A.id,A.displayName)},w=A=>{A.stopPropagation(),a(null),r(""),e(i,"","")},E=()=>g?z.jsx("li",{className:Bs.infoSearchItem,children:be.t("Loading")}):b.length===0&&t.length===0?z.jsx("li",{className:Bs.infoSearchItem,children:be.t("Start typing to search for data items")}):b.length===0&&t.length>0?z.jsx("li",{className:Bs.infoSearchItem,children:be.t("No matches found")}):z.jsx(z.Fragment,{children:b.map(A=>z.jsxs("li",{onClick:()=>k(A),className:Bs.dropDownItem,children:[z.jsx("div",{children:A.displayName}),z.jsx("div",{className:Bs.rightDropDownItem,children:RQ[A.dimensionItemType]})]},A.id))});return z.jsxs("div",{className:Bs.searchSelectField,children:[z.jsx(Sa,{className:Bs.label,children:i.displayName}),z.jsx("div",{ref:f,className:Bs.selectContainer,children:z.jsxs("button",{type:"button",onClick:v,className:`${Bs.triggerButton} ${n?Bs.hasSelection:""}`,children:[z.jsx("span",{className:Bs.triggerText,children:n?n.displayName:"Select a data item..."}),z.jsxs("div",{className:Bs.iconContainer,children:[n&&z.jsx("button",{type:"button",onClick:w,className:Bs.clearButton,"aria-label":"Clear selection",children:z.jsx(C3,{})}),z.jsx("div",{className:Bs.dropdownIcon,children:z.jsx(hv,{})})]})]})}),c&&z.jsx(Wm,{onBackdropClick:_,children:z.jsx(Bd,{reference:f,placement:"bottom-start",children:z.jsxs("div",{className:Bs.dropDown,children:[z.jsx("div",{className:Bs.searchContainer,children:z.jsx("input",{ref:m,type:"text",value:t,onChange:T,placeholder:be.t("Search for indicators, data elements, or program indicators"),className:Bs.searchInput})}),z.jsx("ul",{className:Bs.resultsList,children:E()})]})})})]})},gP=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[r,n]=Ae.useState([]),a=async()=>{await nl.getDataSourcesAnalyticsDataSourcesGet().then(h=>{n(h)})};Ae.useEffect(()=>{a()},[]);const c=(h,f,m)=>{const y=[...i];h.selected!=null&&(y[m][f]=h.selected,e(y))},s=(h,f)=>{c({selected:h},"dataSource",f)};return z.jsxs("div",{children:[z.jsx("h3",{children:"Covariates"}),z.jsx("div",{className:qf.selectDataLineWrapper,children:i.map((h,f)=>{var m,y,g,b;return z.jsx("div",{children:z.jsxs("div",{className:qf.dataLineWrapper,children:[t?z.jsx("div",{className:qf.predictLabel,children:((m=um.filter(v=>v.id===h.feature)[0])==null?void 0:m.name)+":"}):z.jsx("div",{className:qf.predictLabel,children:((y=um.filter(v=>v.id===h.feature)[0])==null?void 0:y.name)+":"}),z.jsxs("div",{className:qf.selectField,children:[(h.origin==="CHAP"||h.origin==="")&&z.jsx(ls,{disabled:h.origin==="",label:"Data Element",onChange:v=>c(v,"dataSource",f),selected:h.dataSource,children:r.map(v=>v.supportedFeatures.includes(h.feature)&&z.jsx(Cs,{label:`${v.dataset.toUpperCase()} - ${v.displayName}`,value:v.dataset},v.name))}),h.origin==="dataItem"&&z.jsx(mP,{feature:{name:(g=um.filter(v=>v.id===h.feature)[0])==null?void 0:g.name,id:h.feature,description:"",displayName:((b=um.filter(v=>v.id===h.feature)[0])==null?void 0:b.name)||""},onChangeSearchSelectField:(v,_)=>s(_,f)})]})]})},f)})})]})},um=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],LQ=()=>um.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),NQ=({onDrawerSubmit:i})=>{const[e,t]=Ae.useState(LQ()),[r,n]=Ae.useState([]),[a,c]=Ae.useState([]),[s,h]=Ae.useState(void 0),[f,m]=Ae.useState("");return z.jsx(z.Fragment,{children:z.jsxs("div",{className:wV.formWrapper,children:[z.jsx(Rl,{autoComplete:"",label:"Dataset name",value:f,onChange:y=>m(y.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),z.jsx(gP,{setDataLayers:t,datasetLayers:e}),z.jsx(eI,{setTimePeriods:c}),z.jsx(tI,{orgUnits:r,setOrgUnits:n,orgUnitLevel:s,setOrgUnitLevel:h}),z.jsx(fP,{onDrawerSubmit:i,name:f,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:s,selectedPeriodItems:a,selectedOrgUnits:r})]})})},zQ="_newDatasetWrapper_1jun0_1",jQ="_newEvaluationDatasetTitle_1jun0_5",IE={newDatasetWrapper:zQ,newEvaluationDatasetTitle:jQ},OQ=({onDrawerClose:i,onDrawerSubmit:e})=>z.jsx(z.Fragment,{children:z.jsxs("div",{className:IE.newDatasetWrapper,children:[z.jsxs("div",{className:IE.newEvaluationDatasetTitle,children:[z.jsx("h2",{children:"New evaluation dataset"}),z.jsx(Ci,{icon:z.jsx(jw,{}),onClick:i})]}),z.jsx(NQ,{onDrawerSubmit:e})]})}),FQ=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(n2,{open:i,onClose:t,direction:"right",size:r,children:z.jsx("div",{className:vV.drawerWrapper,children:z.jsx(OQ,{onDrawerClose:t,onDrawerSubmit:e})})})})},BQ="_pageHeader_19yth_1",$Q="_pageDescription_19yth_11",PE={pageHeader:BQ,pageDescription:$Q},Eu=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:r})=>z.jsxs("div",{className:PE.pageHeader,children:[z.jsxs("div",{children:[z.jsx("h2",{children:i}),z.jsx("p",{className:PE.pageDescription,children:e})]}),t&&r&&z.jsx(Ci,{onClick:()=>t(!0),icon:z.jsx(uv,{}),primary:!0,children:r})]}),UQ="_jobResultPanelContainer_16af9_1",VQ="_flexMedium_16af9_17",HQ="_flexItemRight_16af9_21",GQ="_resultTextHeader_16af9_46",qQ="_evaluationModal_16af9_53",WQ="_jobLogsModal_16af9_58",nu={jobResultPanelContainer:UQ,flexMedium:VQ,flexItemRight:HQ,resultTextHeader:GQ,evaluationModal:qQ,jobLogsModal:WQ},YQ="_modal_1k0a4_1",ZQ={modal:YQ},XQ="_container_mngpy_1",KQ="_innerContainer_mngpy_6",QQ="_prediction_mngpy_21",JQ="_warning_mngpy_26",eJ="_footer_mngpy_31",tJ="_post_mngpy_36",iJ="_redText_mngpy_40",rJ="_greenText_mngpy_45",Kc={container:XQ,innerContainer:KQ,prediction:QQ,warning:JQ,footer:eJ,post:tJ,redText:iJ,greenText:rJ},nJ={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},yP=()=>{const[i,e]=Ae.useState(),{loading:t,error:r}=qa(nJ,{onComplete:n=>e(n.orgUnits)});return{orgUnits:i,error:r,loading:t}},sJ=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:r,setPostHttpError:n,setPostStatus:a})=>{const c=v=>{if(v==="quantile_low")return e;if(v==="median")return t;if(v==="quantile_high")return r},s=v=>v.dataValues.map(_=>({dataElement:c(_.dataElement),period:_.period,orgUnit:_.orgUnit,value:_.value})),h=v=>({resource:"dataValueSets",type:"create",data:{dataValues:v}}),[f,{error:m,loading:y,called:g}]=mM(h(s(i))),b=async()=>{await f()};return Ae.useEffect(()=>{b()},[]),Ae.useEffect(()=>{g&&(y||(m&&(n("Something went wrong when posting the prediction."),a("error")),m||(n(""),a("finish"))))},[y]),null},aJ="_selectWrapper_8vdsv_1",oJ="_select_8vdsv_1",DE={selectWrapper:aJ,select:oJ},jb=({value:i,onChange:e,label:t,dataElements:r})=>{const n=c=>{e({displayName:r==null?void 0:r.find(s=>s.id===c.selected).displayName,id:c.selected})},a=(r==null?void 0:r.length)===0&&r!=null;return z.jsx("div",{children:z.jsx("div",{children:z.jsx("div",{className:DE.select,children:z.jsxs("div",{className:DE.selectWrapper,children:[z.jsx("span",{children:t}),z.jsx(ls,{tabIndex:"1",placeholder:be.t("Select data element"),disabled:a,selected:i?i.id:"",warning:a,onChange:n,children:r==null?void 0:r.map(c=>z.jsx(Cs,{label:c.displayName,value:c.id},c.id))})]})})})})},lJ="_textWarning_3ldzr_1",cJ="_wrapper_3ldzr_6",uJ="_wrapperWarning_3ldzr_14",Ob={textWarning:lJ,wrapper:cJ,wrapperWarning:uJ},dJ="_dataTable_1koi3_1",hJ="_dataValueTables_1koi3_10",pJ="_warning_1koi3_17",gw={dataTable:dJ,dataValueTables:hJ,warning:pJ},fJ=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const r=Zm();return e&&z.jsx(ua,{large:!0,onClose:()=>i(!1),children:z.jsxs(so,{children:[z.jsx("h2",{children:be.t("Add required Data Elements")}),z.jsxs("p",{children:[be.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),z.jsx("a",{target:"_blank",href:`${r.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,rel:"noreferrer",children:"Maintenance"}),be.t("-app and create the Data Elements listed below.")]}),z.jsx("p",{className:gw.warning,children:be.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),z.jsx("p",{children:be.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),z.jsxs("div",{className:gw.dataValueTables,children:[z.jsx(Fb,{q:"Low",disease:t}),z.jsx(Fb,{q:"Median",disease:t}),z.jsx(Fb,{q:"High",disease:t})]})]})})},Fb=({q:i,disease:e})=>z.jsx("table",{className:gw.dataTable,children:z.jsxs("tbody",{children:[z.jsxs("tr",{children:[z.jsx("th",{children:be.t("Name")}),z.jsxs("td",{children:["CHAP",be.t(` ${e} Quantile ${i}`)]})]}),z.jsxs("tr",{children:[z.jsx("th",{children:be.t("Short name")}),z.jsxs("td",{children:["CHAP",be.t(` ${e} Quantile ${i}`)]})]}),z.jsxs("tr",{children:[z.jsx("th",{children:be.t("Code")}),z.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),z.jsxs("tr",{children:[z.jsx("th",{children:be.t("Domain type")}),z.jsx("td",{children:be.t("Aggregate")})]}),z.jsxs("tr",{children:[z.jsx("th",{children:be.t("Aggregation levels")}),z.jsx("td",{children:z.jsx("em",{children:be.t("Assign all org unit levels")})})]})]})}),mJ=({predictionTarget:i,warning:e})=>{const[t,r]=Ae.useState(!1);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:e?Ob.wrapperWarning:Ob.wrapper,children:[z.jsx("div",{className:Ob.textWarning,children:e&&z.jsx(z.Fragment,{children:z.jsx("p",{children:be.t("It seems like you missing Data Elements for CHAP prediction.")})})}),z.jsx("div",{children:z.jsx(Ci,{icon:z.jsx(Fw,{}),onClick:()=>r(!0),children:be.t("Add data elements")})})]}),z.jsx(fJ,{modalOpen:t,setModalOpen:r,predictionTarget:i})]})},gJ=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),Bb=i=>{const[e,t]=Ae.useState(),{loading:r,error:n}=qa(gJ(i),{onComplete:a=>t(a.dataElements.dataElements)});return{dataElements:e,error:n,loading:r}},yJ=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),vJ=i=>{const[e,t]=Ae.useState(),{loading:r,error:n,engine:a}=qa({});Ae.useEffect(()=>{i&&c()},[i]);const c=async()=>{const s=await a.query(yJ(i));s.dataItems.dataItems.length===0?t("?"):t(s.dataItems.dataItems[0].displayName)};return{displayName:e,error:n,loading:r}},xJ=({prediction_unprocessed:i})=>{var G;const e=Hl(),[t,r]=Ae.useState("chart"),[n,a]=Ae.useState(),[c,s]=Ae.useState(null),[h,f]=Ae.useState(null),[m,y]=Ae.useState(null),g=(V,$)=>{if(!$)return 0;const q=[...$].sort((le,Se)=>le-Se),W=q.length,se=V*(W-1),fe=Math.floor(se),re=Math.ceil(se);return Math.round(fe===re?q[fe]:q[fe]+(q[re]-q[fe])*(se-fe))},b=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],v=()=>{var V,$;return(($=(V=i==null?void 0:i.metaData)==null?void 0:V.dataItemMapper)==null?void 0:$.find(q=>q.featureName==="disease_cases").dataItemId)??""},_=()=>({diseaseId:E,dataValues:i.forecasts.flatMap(V=>b.map($=>({orgUnit:V.orgUnit,value:g($.q,V.values),displayName:V.orgUnit,dataElement:$.name,period:V.period})))}),{dataElements:T}=Bb("CHAP_LOW"),{dataElements:k}=Bb("CHAP_MEDIAN"),{dataElements:w}=Bb("CHAP_HIGH"),E=v(),{displayName:A}=vJ(E),{orgUnits:M,loading:S}=yP(),[N,Y]=Ae.useState("initial"),[Z,K]=Ae.useState("");Ae.useEffect(()=>{M&&F()},[(G=e==null?void 0:e.state)==null?void 0:G.data,M]);const B=()=>(T==null?void 0:T.length)===0||(k==null?void 0:k.length)===0||(w==null?void 0:w.length)===0,F=async()=>{Y("initial")};Ae.useEffect(()=>{A&&M&&i&&a(R(_()))},[A,M,i]),Ae.useEffect(()=>{if(T&&k&&w&&A){const V=T.find(W=>W.code===`CHAP_LOW_${A.toLocaleUpperCase().replaceAll(" ","_")}`);V&&s(V);const $=k.find(W=>W.code===`CHAP_MEDIAN_${A.toLocaleUpperCase().replaceAll(" ","_")}`);$&&f($);const q=w.find(W=>W.code===`CHAP_HIGH_${A.toLocaleUpperCase().replaceAll(" ","_")}`);q&&y(q)}},[T,k,w,A]);const O=()=>!c&&!h&&!m?!1:!!(c&&!(c!=null&&c.displayName.includes(A))||h&&!(h!=null&&h.displayName.includes(A))||m&&!(m!=null&&m.displayName.includes(A))),R=V=>({dataValues:V.dataValues.map($=>{var q;return{...$,displayName:(q=M==null?void 0:M.organisationUnits.find(W=>W.id===$.orgUnit))==null?void 0:q.displayName}}),diseaseId:V.diseaseId}),L=()=>!!(c&&h&&m);return z.jsx("div",{className:Kc.container,children:z.jsxs("div",{className:Kc.innerContainer,children:[S&&z.jsx("p",{children:"Loading metadata from DHIS2.. "}),z.jsxs("h1",{children:["Prediction: ",i.name]}),n&&z.jsxs(z.Fragment,{children:[z.jsxs(U_,{scrollable:!0,children:[z.jsx(fp,{selected:t==="chart",onClick:()=>r("chart"),children:"Chart"}),z.jsx(fp,{selected:t==="table",onClick:()=>r("table"),children:"Table"})]}),z.jsx("div",{className:Kc.prediction,children:{chart:z.jsx(tZ,{predictionTargetName:A,data:n}),table:z.jsx(hK,{data:n}),map:z.jsx(z.Fragment,{})}[t]}),z.jsx("h3",{children:be.t("Select which data element prediction should be imported to:")}),z.jsx(mJ,{warning:B(),predictionTarget:A}),z.jsx(jb,{label:be.t("Select data element for low quantile"),dataElements:T,onChange:s,value:c}),z.jsx(jb,{label:be.t("Select data element for median quantile"),dataElements:k,onChange:f,value:h}),z.jsx(jb,{label:be.t("Select data element for high quantile"),dataElements:w,onChange:y,value:m}),O()&&z.jsx("p",{className:Kc.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),z.jsx("div",{className:Kc.footer,children:z.jsx(Ci,{onClick:()=>Y("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!L(),icon:z.jsx(dv,{}),primary:!0,children:be.t("Import prediction")})}),N==="loading"&&z.jsx(sJ,{setPostHttpError:K,setPostStatus:Y,prediction:n,qLowDataElementId:c==null?void 0:c.id,qMedianDataElementId:h==null?void 0:h.id,qHighDataElementId:m==null?void 0:m.id}),z.jsxs("div",{className:Kc.post,children:[N==="finish"&&z.jsx("p",{className:Kc.greenText,children:be.t("Prediction has been imported.")}),z.jsx("p",{className:Kc.redText,children:be.t(Z)})]})]})]})})},bJ=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[r,n]=Ae.useState(),a=async c=>{await qs.getPredictionCrudPredictionsPredictionIdGet(c).then(s=>{n(s)})};return Ae.useEffect(()=>{t&&a(Number(t))},[]),z.jsx("div",{children:i&&z.jsx(z.Fragment,{children:z.jsx(ua,{className:ZQ.modal,onClose:()=>{e(!1)},children:z.jsx(z.Fragment,{children:r&&z.jsx(xJ,{prediction_unprocessed:r})})})})})},wJ="_jobResultPanelContainer_8nqrq_1",_J="_boxPanel_8nqrq_9",CJ="_flexMedium_8nqrq_17",TJ="_flexItemRight_8nqrq_21",SJ="_inProgress_8nqrq_29",EJ="_notStarted_8nqrq_34",kJ="_completed_8nqrq_39",MJ="_failed_8nqrq_44",AJ="_popupMenuDiv_8nqrq_66",Xo={jobResultPanelContainer:wJ,boxPanel:_J,flexMedium:CJ,flexItemRight:TJ,inProgress:SJ,notStarted:EJ,completed:kJ,failed:MJ,popupMenuDiv:AJ},IJ=(i,e)=>{Ae.useEffect(()=>{const t=r=>{const n=i.current;!n||n.contains(r.target)||e(r)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},PJ=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:r,onClickImport:n,onClickViewLogs:a,onClickRemove:c})=>{const[s,h]=Ae.useState(!1),f=Ae.useRef(null),m=Ae.useRef(null);IJ(m,b=>{var v;(v=f.current)!=null&&v.contains(b.target)||h(!1)});const y=b=>{switch(b){case"STARTED":return Xo.inProgress;case"PENDING":return Xo.notStarted;case"FAILURE":return Xo.failed;default:return Xo.completed}},g=b=>{switch(b){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return z.jsx("div",{className:Xo.boxPanel,children:z.jsxs("div",{className:Xo.jobResultPanelContainer,children:[z.jsx("div",{className:Xo.flexMedium,children:e.name}),z.jsx("div",{className:Xo.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),z.jsx("div",{className:Xo.flexMedium,children:z.jsx("span",{className:y(e.status),children:g(e.status)})}),z.jsxs("div",{className:Xo.flexItemRight,children:[{prediction:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ci,{icon:z.jsx(j3,{}),onClick:()=>n(e.result),small:!0,children:"Import"})}),dataset:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ci,{icon:z.jsx(O3,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ci,{icon:z.jsx(V3,{}),onClick:()=>r(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&z.jsx(Ci,{icon:z.jsx(T3,{}),onClick:()=>a(e.id),small:!0,children:"Logs"}),z.jsx("div",{ref:f,children:z.jsx(vZ,{enabled:e.status==="STARTED",content:be.t("Job is still running. Please wait until it is finished before doing any actions."),children:z.jsx(Ci,{small:!0,icon:z.jsx(Qm,{}),disabled:e.status==="STARTED",onClick:()=>h(b=>!b)})})}),s&&z.jsx(Bd,{reference:f,placement:"top-end",children:z.jsx("div",{ref:m,className:Xo.popupMenuDiv,children:z.jsx(zw,{children:["SUCCESS","FAILURE"].includes(e.status)&&z.jsx(es,{label:"Delete",icon:z.jsx(P3,{}),destructive:!0,onClick:()=>{h(!1),c(e)}})})})})]})]})},i)},DJ="_jobLogs_pzpzf_1",RJ="_logContent_pzpzf_7",$b={jobLogs:DJ,logContent:RJ},vP=(i,e)=>{const t=Ae.useRef(),r=Ae.useRef(null),n=()=>{r.current===null&&document.visibilityState==="visible"&&(r.current=setInterval(()=>{t.current&&t.current()},e))},a=()=>{r.current!==null&&(clearInterval(r.current),r.current=null)};Ae.useEffect(()=>{t.current=i},[i]),Ae.useEffect(()=>{const c=()=>{document.visibilityState==="visible"?n():a()};return document.addEventListener("visibilitychange",c),document.visibilityState==="visible"&&n(),()=>{a(),document.removeEventListener("visibilitychange",c)}},[e])},LJ=({jobId:i})=>{const[e,t]=Ae.useState(null),[r,n]=Ae.useState(null),[a,c]=Ae.useState(!1),s=Ae.useRef(null),h=async()=>{if(i){console.log("fetching logs");try{const f=await Tu.getLogsJobsJobIdLogsGet(i);t(f)}catch(f){n(f.body.detail)}finally{c(!1)}}};return Ae.useEffect(()=>{c(!0),n(null),h()},[i]),Ae.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[e]),vP(h,5e3),i?a?z.jsx("p",{children:"Loading logs..."}):r?z.jsxs("p",{className:$b.error,children:["Error: ",r]}):z.jsxs("div",{className:$b.jobLogs,children:[z.jsx("h2",{children:"Job Logs"}),z.jsx("pre",{className:$b.logContent,ref:s,children:e||"<No logs reported for this job>"})]}):z.jsx("p",{children:"No job ID provided."})},NJ="_drawerWrapper_l3raf_1",zJ={drawerWrapper:NJ},jJ="_formWrapper_13v73_1",OJ="_newEvaluationTitle_13v73_8",FJ="_buttons_13v73_15",Ub={formWrapper:jJ,newEvaluationTitle:OJ,buttons:FJ},Tm=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.includes("W")){const e=i.match(/(\d{4})W(\d{1,2})/);if(!e||e.length<3)return i;const[t,r]=e.slice(1,3);return`Week ${r.replace(/0/,"")} ${t}`}if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}return i},BJ="_datasetDetailsWrapper_dewdk_1",$J="_label_dewdk_13",pd={datasetDetailsWrapper:BJ,label:$J},UJ=({datasetId:i})=>{var h;const[e,t]=Ae.useState(null),[r,n]=Ae.useState(""),[a,c]=Ae.useState(!0),s=f=>{const m=f.observations.map(k=>k.period),y=Array.from(new Set(m)).sort(),g=y[0],b=y[y.length-1],_=Array.from(new Set(m)).length,T=Array.from(new Set(f.observations.map(k=>k.featureName).filter(k=>k!=="disease_cases")));return{name:f.name,created:f.created,startPeriod:g,endPeriod:b,orgUnitCount:_,covariates:T}};return Ae.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const m=await qs.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",m);const y=s(m);t(y)}catch(m){n(m)}finally{c(!1)}})()},[i]),a?z.jsxs("div",{className:pd.datasetLoader,children:[z.jsx(ka,{}),z.jsx("span",{children:"Loading dataset"})]}):r?z.jsxs("p",{children:["Error: ",r]}):z.jsxs(z.Fragment,{children:[z.jsx("h3",{children:"Evaluation Dataset"}),z.jsx(Ym,{children:z.jsxs("div",{className:pd.datasetDetailsWrapper,children:[z.jsxs("div",{children:[z.jsx("span",{className:pd.label,children:"Name: "}),z.jsx("span",{children:e.name})]}),z.jsxs("div",{children:[z.jsx("span",{className:pd.label,children:"Org Units: "}),z.jsx("span",{children:e.orgUnitCount})]}),z.jsxs("div",{children:[z.jsx("span",{className:pd.label,children:"Time period: "}),z.jsxs("span",{children:[Tm(e.startPeriod)," to ",Tm(e.endPeriod)]})]}),z.jsxs("div",{children:[z.jsx("span",{className:pd.label,children:"Covariates: "}),z.jsx("span",{children:((h=e==null?void 0:e.covariates)==null?void 0:h.join(", "))||"None"})]}),z.jsxs("div",{children:[z.jsx("span",{className:pd.label,children:"Created: "}),z.jsx("span",{children:e.created})]})]})})]})},VJ="_modelDetailsContainer_mnj31_1",HJ="_selectedModelDetails_mnj31_10",GJ="_modelAuthor_mnj31_17",qJ="_modelAuthorLogo_mnj31_25",WJ="_modelAuthorName_mnj31_32",YJ="_modelHumanName_mnj31_36",ZJ="_modelEmail_mnj31_42",XJ="_modelDescription_mnj31_47",KJ="_modelDescriptionText_mnj31_52",QJ="_modelCovariates_mnj31_57",JJ="_modelCovariatesList_mnj31_62",eee="_modelCovariateItem_mnj31_71",tee="_modelCitation_mnj31_75",iee="_modelCitationText_mnj31_80",ree="_modelLink_mnj31_86",ja={modelDetailsContainer:VJ,selectedModelDetails:HJ,modelAuthor:GJ,modelAuthorLogo:qJ,modelAuthorName:WJ,modelHumanName:YJ,modelEmail:ZJ,modelDescription:XJ,modelDescriptionText:KJ,modelCovariates:QJ,modelCovariatesList:JJ,modelCovariateItem:eee,modelCitation:tee,modelCitationText:iee,modelLink:ree},nee=({selectedModel:i,onChangeModel:e})=>z.jsx("div",{className:ja.modelDetailsContainer,children:z.jsxs("div",{className:ja.selectedModelDetails,children:[z.jsx("h3",{className:ja.modelHumanName,children:i.displayName}),z.jsxs("div",{className:ja.modelAuthor,children:[z.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:ja.modelAuthorLogo}),z.jsxs("span",{className:ja.modelAuthorName,children:[i.author," - ",i.organization]})]}),z.jsxs("p",{className:ja.modelDescription,children:[z.jsx("div",{children:"Description:"}),z.jsx("div",{className:ja.modelDescriptionText,children:i.description||"Coming soon..."})]}),z.jsxs("div",{className:ja.modelCovariates,children:[z.jsx("span",{children:"Model inputs:"}),z.jsx("ul",{className:ja.modelCovariatesList,children:i.covariates.map((t,r)=>z.jsxs("li",{className:ja.modelCovariateItem,children:[" ",t.name]},r))})]}),z.jsxs("div",{className:ja.modelCitation,children:[z.jsx("span",{children:"Attribution:"}),z.jsx("pre",{className:ja.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),z.jsxs("p",{className:ja.modelLink,children:["External link: ",z.jsx("a",{href:i.sourceUrl||"",target:"_blank",rel:"noreferrer",children:i.sourceUrl||"http://example.com"})]}),z.jsxs("p",{className:ja.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&z.jsx("div",{children:z.jsx(Ci,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),see="_modelSelectContainer_1u7s7_1",aee="_modelGrid_1u7s7_10",oee="_modelCard_1u7s7_17",lee="_selectedModelCard_1u7s7_31",cee="_modelAuthor_1u7s7_42",uee="_modelAuthorLogo_1u7s7_50",dee="_modelAuthorName_1u7s7_57",hee="_modelHumanName_1u7s7_61",pee="_modelCovariatesList_1u7s7_87",fee="_modelCovariateItem_1u7s7_96",yl={modelSelectContainer:see,modelGrid:aee,modelCard:oee,selectedModelCard:lee,modelAuthor:cee,modelAuthorLogo:uee,modelAuthorName:dee,modelHumanName:hee,modelCovariatesList:pee,modelCovariateItem:fee},RE={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},xP=({selectedModel:i,setSelectedModel:e})=>{const[t,r]=Ae.useState([]),[n,a]=Ae.useState(!0),[c,s]=Ae.useState(!0),h=async()=>{await qs.listModelsCrudModelsGet().then(m=>{const y=m.map(g=>(g.covariates=g.covariates.concat(g.target),g));a(!1),r(y)}).catch(()=>{r([RE]),e(RE),a(!1)})},f=m=>{e(m),s(!1)};return Ae.useEffect(()=>{h()},[]),z.jsx("div",{className:yl.modelSelectContainer,children:n?z.jsx("p",{children:"Loading models..."}):z.jsxs(z.Fragment,{children:[z.jsx("h3",{children:"Prediction Model"}),!c&&i&&z.jsx("div",{children:z.jsx(nee,{selectedModel:i,onChangeModel:()=>s(!0)})}),c&&z.jsx("div",{children:z.jsx("div",{className:yl.modelGrid,children:t.map(m=>z.jsxs("div",{className:`${yl.modelCard} ${(i==null?void 0:i.name)===m.name?yl.selectedModelCard:""}`,children:[z.jsx("h3",{className:yl.modelHumanName,children:m.displayName}),z.jsxs("div",{className:yl.modelAuthor,children:[z.jsx("img",{src:m.organizationLogoUrl||"/default-model-logo.png",alt:m.name+" logo",className:yl.modelAuthorLogo}),z.jsxs("span",{className:yl.modelAuthorName,children:[m.author," - ",m.organization]})]}),z.jsx("ul",{className:yl.modelCovariatesList,children:m.covariates.map((y,g)=>z.jsxs("li",{className:yl.modelCovariateItem,children:[" ",y.name]},g))}),z.jsx(Ci,{onClick:()=>f(m),primary:!0,children:(i==null?void 0:i.name)===m.name?"Selected":"Select Model"})]},m.name))})})]})})},mee=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const t=Ws(),[r,n]=Ae.useState(""),[a,c]=Ae.useState(void 0),s=r&&e&&a,h=()=>{if(console.log("should evaluate",r,e,a),s)try{const f=nl.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:r,datasetId:e,modelId:a.name});t.invalidateQueries({queryKey:["jobs"]}),console.log("evaluate response",f)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return z.jsx(z.Fragment,{children:z.jsxs("div",{className:Ub.formWrapper,children:[z.jsxs("div",{className:Ub.newEvaluationTitle,children:[z.jsx("h2",{children:"New model evaluation"}),z.jsx(Ci,{icon:z.jsx(jw,{}),onClick:i})]}),z.jsx(Rl,{autoComplete:"",label:"Evaluation name",value:r,onChange:f=>n(f.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),z.jsx(UJ,{datasetId:e}),z.jsx(xP,{selectedModel:a,setSelectedModel:c}),z.jsx("div",{className:Ub.buttons,children:z.jsx(Ci,{primary:!0,icon:z.jsx(dv,{}),onClick:h,disabled:!s,children:"Evaluate"})})]})})},gee=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(n2,{open:i,onClose:()=>e(!1),direction:"right",size:r,children:z.jsx("div",{className:zJ.drawerWrapper,children:z.jsx(mee,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},yee=({evaluationId:i})=>{const[e,t]=Ae.useState(""),[r,n]=Ae.useState([]),[a,c]=Ae.useState(),[s,h]=Ae.useState(),[f,m]=Ae.useState(""),[y,g]=Ae.useState(""),[b,v]=Ae.useState(!1),{orgUnits:_}=yP();Ae.useEffect(()=>{if(_&&s){const E=yZ(s.predictions,s.actualCases.data,"");E.forEach(A=>{A.evaluation.forEach(M=>{const S=_==null?void 0:_.organisationUnits.find(N=>N.id===M.orgUnitId);S&&(M.orgUnitName=S.displayName)})}),c(E),n(EI(s.predictions))}},[_,s]);const T=async E=>(await qs.getBacktestsCrudBacktestsGet()).find(M=>M.id===Number(E)),k=async E=>(await qs.listModelsCrudModelsGet()).find(M=>M.name===E),w=async()=>{v(!0);const E=[.1,.25,.5,.75,.9];try{const[A,M,S]=await Promise.all([T(i),nl.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,E),nl.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!A)throw new Error("Evaluation info not found");m(A.name??"");const N=await k(A.modelId);g((N==null?void 0:N.displayName)??""),h({predictions:M,actualCases:S})}catch(A){t(A.toString())}finally{v(!1)}};return Ae.useEffect(()=>{w()},[]),z.jsxs("div",{children:[e&&z.jsx("p",{children:"Not available"}),b&&z.jsx("p",{children:"Loading.."}),a&&z.jsx(aK,{evaluationName:f,modelName:y,evaluations:a,splitPeriods:r})]})},vee=({jobResults:i})=>{const[e,t]=Ae.useState(!1),[r,n]=Ae.useState(void 0),[a,c]=Ae.useState(!1),[s,h]=Ae.useState(!1),[f,m]=Ae.useState(void 0),[y,g]=Ae.useState(void 0),[b,v]=Ae.useState(!1),[_,T]=Ae.useState(void 0),k=S=>{t(!0),n(S)},w=S=>{h(!0),m(S)},E=S=>{v(!0),T(S)},A=S=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");const Y=S.result;if(Y)S.type=="dataset"?qs.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(Y)):S.type=="evaluation"?qs.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(Y)):S.type=="prediction"&&qs.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(Y));else{const Z=S.id;Tu.deleteJobJobsJobIdDelete(Z)}}},M=S=>{console.log("clicked evaluate dataset id",S),g(S),c(!0)};return z.jsxs(z.Fragment,{children:[i.map((S,N)=>z.jsx(PJ,{i:N,jobResult:S,onClickEvaluateDataset:M,onClickViewEvaluation:w,onClickImport:k,onClickRemove:A,onClickViewLogs:E},N)),e&&z.jsx(bJ,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:r}),z.jsx(gee,{isOpen:a,setIsOpen:c,datasetIdToEvaluate:y}),s&&f&&z.jsx(ua,{className:nu.evaluationModal,onClose:()=>{h(!1)},children:z.jsx(yee,{evaluationId:f})}),b&&z.jsx(ua,{className:nu.jobLogsModal,onClose:()=>{v(!1)},children:z.jsx(LJ,{jobId:_})})]})},xee=()=>z.jsx("div",{children:z.jsxs("div",{className:[nu.jobResultPanelContainer,nu.resultTextHeader].join(" "),children:[z.jsx("div",{className:nu.flexMedium,children:"Name:"}),z.jsx("div",{className:nu.flexMedium,children:"Created:"}),z.jsx("div",{className:nu.flexMedium,children:"Status:"}),z.jsx("div",{className:nu.flexItemRight})]})}),bee="_noticeBox_18bg1_1",wee="_details_18bg1_8",_ee="_button_18bg1_14",Vb={noticeBox:bee,details:wee,button:_ee},LE=({error:i,type:e})=>{const[t,r]=Ae.useState(!1);return i==null?z.jsx(z.Fragment,{}):z.jsx("div",{children:z.jsxs(da,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:Vb.noticeBox,children:[z.jsx("div",{className:Vb.button,children:z.jsx(Ci,{small:!0,onClick:()=>r(!t),children:t?"Hide details":"See details"})}),t&&z.jsx("div",{className:Vb.details,children:z.jsx("div",{children:i})})]})})},Cee="_loaderWrapper_iu471_1",Tee="_textLoad_iu471_8",See="_loader_iu471_1",Hb={loaderWrapper:Cee,textLoad:Tee,loader:See},Eee=({type:i})=>z.jsxs(z.Fragment,{children:[z.jsx("div",{className:Hb.loaderWrapper,children:z.jsx("div",{className:Hb.loader,children:z.jsx(ka,{})})}),z.jsx("p",{className:Hb.textLoad,children:z.jsxs("i",{children:["Loading ",i]})})]}),kee="_text_3x5i9_1",Mee={text:kee},Aee=({type:i})=>z.jsxs("div",{className:Mee.text,children:["No ",i," found"]}),yw=({type:i})=>{const[e,t]=Ae.useState([]),[r,n]=Ae.useState([]),[a,c]=Ae.useState([]),[s,h]=Ae.useState([]),[f,m]=Ae.useState([]),[y,g]=Ae.useState(),[b,v]=Ae.useState(),[_,T]=Ae.useState(!0),k=async S=>{for(let N=0;N<5;N++)try{const Y=await S;return v(void 0),Y}catch(Y){if(N===4)return v((Y==null?void 0:Y.message)??`Couldn't fetch ${i}`),[]}},w=()=>{switch(i){case"predictions":return k(qs.getPredictionsCrudPredictionsGet()).then(S=>n(S));case"datasets":return k(qs.getDatasetsCrudDatasetsGet()).then(S=>c(S));case"evaluations":return k(qs.getBacktestsCrudBacktestsGet()).then(S=>h(S))}},E=async()=>{let S=[];for(let N=0;N<6;N++)try{S=await Tu.listJobsJobsGet();break}catch(Y){if(N===2)return g((Y==null?void 0:Y.message)??"Couldn't fetch jobs"),[]}return g(void 0),S},A=()=>{const S=[];a.filter(Z=>Z.type=="evaluation").forEach(Z=>{S.push({id:"Unknown",name:Z.name,created:new Date(Z.created??""),type:"dataset",status:"SUCCESS",result:Z.id.toString()})}),s.forEach(Z=>{S.push({id:"Unknown",name:Z.name??"",created:new Date(Z.created??""),type:"evaluation",status:"SUCCESS",result:Z.id.toString()})}),r.forEach(Z=>{S.push({id:"Unknown",name:Z.name,created:new Date(Z.created),type:"prediction",status:"SUCCESS",result:Z.id.toString(),datasetId:Z.datasetId,estimatorId:Z.modelId,nPeriods:Z.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},Y={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Z=>Z.status!="SUCCESS"&&Z.type==N[i]).forEach(Z=>{S.push({id:Z.id,name:Z.name,created:new Date(Z.start_time),type:Y[i],status:Z.status})}),S.sort((Z,K)=>K.created.getTime()-Z.created.getTime()),S},M=async()=>{await w();const S=await E();t(S),T(!1)};return Ae.useEffect(()=>{M()},[]),vP(M,5e3),Ae.useEffect(()=>{m(A())},[e,r,s,a]),z.jsxs("div",{children:[z.jsx(LE,{error:y,type:"jobs"}),z.jsx(LE,{error:b,type:i}),_&&z.jsx(Eee,{type:i}),f.length>0&&z.jsx(xee,{}),f.length==0&&!_&&z.jsx(Aee,{type:i}),z.jsx(vee,{jobResults:f})]})},Iee=()=>{const[i,e]=Ae.useState(!1),t=()=>{e(!1)};return z.jsxs("div",{children:[z.jsx(Eu,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),z.jsx(yw,{type:"datasets"}),z.jsx(FQ,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),z.jsx(Eu,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),z.jsx(yw,{type:"evaluations"})]})},Pee=()=>z.jsx(Iee,{}),bP=({route:i})=>{const{data:e,error:t,isLoading:r}=Vo({queryKey:["modelTemplates",i==null?void 0:i.url],queryFn:()=>qs.listModelTemplatesCrudModelTemplatesGet(),enabled:!!i,retry:0,staleTime:3e5,cacheTime:3e5});return{modelTemplates:e,error:t,isLoading:r}},Dee={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},Ru=()=>{const{data:i,error:e,isLoading:t,isError:r}=Np({queryKey:["routes","chap"],query:Dee,select:n=>n.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:r}},Ree="_loadingContainer_1kfpp_1",Lee="_backButton_1kfpp_8",Nee="_errorContainer_1kfpp_12",zee="_emptyContainer_1kfpp_20",Vy={loadingContainer:Ree,backButton:Lee,errorContainer:Nee,emptyContainer:zee};var wg=i=>i.type==="checkbox",Cd=i=>i instanceof Date,Fa=i=>i==null;const wP=i=>typeof i=="object";var ps=i=>!Fa(i)&&!Array.isArray(i)&&wP(i)&&!Cd(i),_P=i=>ps(i)&&i.target?wg(i.target)?i.target.checked:i.target.value:i,jee=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,CP=(i,e)=>i.has(jee(e)),Oee=i=>{const e=i.constructor&&i.constructor.prototype;return ps(e)&&e.hasOwnProperty("isPrototypeOf")},P2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vn(i){let e;const t=Array.isArray(i),r=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(P2&&(i instanceof Blob||r))&&(t||ps(i)))if(e=t?[]:{},!t&&!Oee(i))e=i;else for(const n in i)i.hasOwnProperty(n)&&(e[n]=Vn(i[n]));else return i;return e}var _g=i=>Array.isArray(i)?i.filter(Boolean):[],In=i=>i===void 0,ai=(i,e,t)=>{if(!e||!ps(i))return t;const r=_g(e.split(/[,[\].]+?/)).reduce((n,a)=>Fa(n)?n:n[a],i);return In(r)||r===i?In(i[e])?t:i[e]:r},wo=i=>typeof i=="boolean",D2=i=>/^\w*$/.test(i),TP=i=>_g(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Xr=(i,e,t)=>{let r=-1;const n=D2(e)?[e]:TP(e),a=n.length,c=a-1;for(;++r<a;){const s=n[r];let h=t;if(r!==c){const f=i[s];h=ps(f)||Array.isArray(f)?f:isNaN(+n[r+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;i[s]=h,i=i[s]}};const q0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},jo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},uc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},SP=he.createContext(null),Ac=()=>he.useContext(SP),Fee=i=>{const{children:e,...t}=i;return he.createElement(SP.Provider,{value:t},e)};var EP=(i,e,t,r=!0)=>{const n={defaultValues:e._defaultValues};for(const a in i)Object.defineProperty(n,a,{get:()=>{const c=a;return e._proxyFormState[c]!==jo.all&&(e._proxyFormState[c]=!r||jo.all),t&&(t[c]=!0),i[c]}});return n};const R2=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function Bee(i){const e=Ac(),{control:t=e.control,disabled:r,name:n,exact:a}=i||{},[c,s]=he.useState(t._formState),h=he.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return R2(()=>t._subscribe({name:n,formState:h.current,exact:a,callback:f=>{!r&&s({...t._formState,...f})}}),[n,r,a]),he.useEffect(()=>{h.current.isValid&&t._setValid(!0)},[t]),he.useMemo(()=>EP(c,t,h.current,!1),[c,t])}var kl=i=>typeof i=="string",kP=(i,e,t,r,n)=>kl(i)?(r&&e.watch.add(i),ai(t,i,n)):Array.isArray(i)?i.map(a=>(r&&e.watch.add(a),ai(t,a))):(r&&(e.watchAll=!0),t);function Cc(i){const e=Ac(),{control:t=e.control,name:r,defaultValue:n,disabled:a,exact:c}=i||{},s=he.useRef(n),[h,f]=he.useState(t._getWatch(r,s.current));return R2(()=>t._subscribe({name:r,formState:{values:!0},exact:c,callback:m=>!a&&f(kP(r,t._names,m.values||t._formValues,!1,s.current))}),[r,t,a,c]),he.useEffect(()=>t._removeUnmounted()),h}function $ee(i){const e=Ac(),{name:t,disabled:r,control:n=e.control,shouldUnregister:a}=i,c=CP(n._names.array,t),s=Cc({control:n,name:t,defaultValue:ai(n._formValues,t,ai(n._defaultValues,t,i.defaultValue)),exact:!0}),h=Bee({control:n,name:t,exact:!0}),f=he.useRef(i),m=he.useRef(n.register(t,{...i.rules,value:s,...wo(i.disabled)?{disabled:i.disabled}:{}})),y=he.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ai(h.errors,t)},isDirty:{enumerable:!0,get:()=>!!ai(h.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!ai(h.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!ai(h.validatingFields,t)},error:{enumerable:!0,get:()=>ai(h.errors,t)}}),[h,t]),g=he.useCallback(T=>m.current.onChange({target:{value:_P(T),name:t},type:q0.CHANGE}),[t]),b=he.useCallback(()=>m.current.onBlur({target:{value:ai(n._formValues,t),name:t},type:q0.BLUR}),[t,n._formValues]),v=he.useCallback(T=>{const k=ai(n._fields,t);k&&T&&(k._f.ref={focus:()=>T.focus(),select:()=>T.select(),setCustomValidity:w=>T.setCustomValidity(w),reportValidity:()=>T.reportValidity()})},[n._fields,t]),_=he.useMemo(()=>({name:t,value:s,...wo(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:g,onBlur:b,ref:v}),[t,r,h.disabled,g,b,v,s]);return he.useEffect(()=>{const T=n._options.shouldUnregister||a;n.register(t,{...f.current.rules,...wo(f.current.disabled)?{disabled:f.current.disabled}:{}});const k=(w,E)=>{const A=ai(n._fields,w);A&&A._f&&(A._f.mount=E)};if(k(t,!0),T){const w=Vn(ai(n._options.defaultValues,t));Xr(n._defaultValues,t,w),In(ai(n._formValues,t))&&Xr(n._formValues,t,w)}return!c&&n.register(t),()=>{(c?T&&!n._state.action:T)?n.unregister(t):k(t,!1)}},[t,n,c,a]),he.useEffect(()=>{n._setDisabledField({disabled:r,name:t})},[r,t,n]),he.useMemo(()=>({field:_,formState:h,fieldState:y}),[_,h,y])}const Uo=i=>i.render($ee(i));var MP=(i,e,t,r,n)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[r]:n||!0}}:{},io=i=>Array.isArray(i)?i:[i],NE=()=>{let i=[];return{get observers(){return i},next:n=>{for(const a of i)a.next&&a.next(n)},subscribe:n=>(i.push(n),{unsubscribe:()=>{i=i.filter(a=>a!==n)}}),unsubscribe:()=>{i=[]}}},vw=i=>Fa(i)||!wP(i);function lu(i,e){if(vw(i)||vw(e))return i===e;if(Cd(i)&&Cd(e))return i.getTime()===e.getTime();const t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(const n of t){const a=i[n];if(!r.includes(n))return!1;if(n!=="ref"){const c=e[n];if(Cd(a)&&Cd(c)||ps(a)&&ps(c)||Array.isArray(a)&&Array.isArray(c)?!lu(a,c):a!==c)return!1}}return!0}var _a=i=>ps(i)&&!Object.keys(i).length,L2=i=>i.type==="file",Jo=i=>typeof i=="function",W0=i=>{if(!P2)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},AP=i=>i.type==="select-multiple",N2=i=>i.type==="radio",Uee=i=>N2(i)||wg(i),Gb=i=>W0(i)&&i.isConnected;function Vee(i,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)i=In(i)?r++:i[e[r++]];return i}function Hee(i){for(const e in i)if(i.hasOwnProperty(e)&&!In(i[e]))return!1;return!0}function ys(i,e){const t=Array.isArray(e)?e:D2(e)?[e]:TP(e),r=t.length===1?i:Vee(i,t),n=t.length-1,a=t[n];return r&&delete r[a],n!==0&&(ps(r)&&_a(r)||Array.isArray(r)&&Hee(r))&&ys(i,t.slice(0,-1)),i}var IP=i=>{for(const e in i)if(Jo(i[e]))return!0;return!1};function Y0(i,e={}){const t=Array.isArray(i);if(ps(i)||t)for(const r in i)Array.isArray(i[r])||ps(i[r])&&!IP(i[r])?(e[r]=Array.isArray(i[r])?[]:{},Y0(i[r],e[r])):Fa(i[r])||(e[r]=!0);return e}function PP(i,e,t){const r=Array.isArray(i);if(ps(i)||r)for(const n in i)Array.isArray(i[n])||ps(i[n])&&!IP(i[n])?In(e)||vw(t[n])?t[n]=Array.isArray(i[n])?Y0(i[n],[]):{...Y0(i[n])}:PP(i[n],Fa(e)?{}:e[n],t[n]):t[n]=!lu(i[n],e[n]);return t}var Wf=(i,e)=>PP(i,e,Y0(e));const zE={value:!1,isValid:!1},jE={value:!0,isValid:!0};var DP=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!In(i[0].attributes.value)?In(i[0].value)||i[0].value===""?jE:{value:i[0].value,isValid:!0}:jE:zE}return zE},RP=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>In(i)?i:e?i===""?NaN:i&&+i:t&&kl(i)?new Date(i):r?r(i):i;const OE={isValid:!1,value:null};var LP=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,OE):OE;function FE(i){const e=i.ref;return L2(e)?e.files:N2(e)?LP(i.refs).value:AP(e)?[...e.selectedOptions].map(({value:t})=>t):wg(e)?DP(i.refs).value:RP(In(e.value)?i.ref.value:e.value,i)}var Gee=(i,e,t,r)=>{const n={};for(const a of i){const c=ai(e,a);c&&Xr(n,a,c._f)}return{criteriaMode:t,names:[...i],fields:n,shouldUseNativeValidation:r}},Z0=i=>i instanceof RegExp,Yf=i=>In(i)?i:Z0(i)?i.source:ps(i)?Z0(i.value)?i.value.source:i.value:i,tp=i=>({isOnSubmit:!i||i===jo.onSubmit,isOnBlur:i===jo.onBlur,isOnChange:i===jo.onChange,isOnAll:i===jo.all,isOnTouch:i===jo.onTouched});const BE="AsyncFunction";var qee=i=>!!i&&!!i.validate&&!!(Jo(i.validate)&&i.validate.constructor.name===BE||ps(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===BE)),Wee=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),xw=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(r=>i.startsWith(r)&&/^\.\w+/.test(i.slice(r.length))));const lp=(i,e,t,r)=>{for(const n of t||Object.keys(i)){const a=ai(i,n);if(a){const{_f:c,...s}=a;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],n)&&!r)return!0;if(c.ref&&e(c.ref,c.name)&&!r)return!0;if(lp(s,e))break}else if(ps(s)&&lp(s,e))break}}};function $E(i,e,t){const r=ai(i,t);if(r||D2(t))return{error:r,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),c=ai(e,a),s=ai(i,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(s&&s.type)return{name:a,error:s};n.pop()}return{name:t}}var Yee=(i,e,t,r)=>{t(i);const{name:n,...a}=i;return _a(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(c=>e[c]===(!r||jo.all))},Zee=(i,e,t)=>!i||!e||i===e||io(i).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),Xee=(i,e,t,r,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(e||i):(t?r.isOnBlur:n.isOnBlur)?!i:(t?r.isOnChange:n.isOnChange)?i:!0,Kee=(i,e)=>!_g(ai(i,e)).length&&ys(i,e),NP=(i,e,t)=>{const r=io(ai(i,t));return Xr(r,"root",e[t]),Xr(i,t,r),i},g0=i=>kl(i);function UE(i,e,t="validate"){if(g0(i)||Array.isArray(i)&&i.every(g0)||wo(i)&&!i)return{type:t,message:g0(i)?i:"",ref:e}}var qh=i=>ps(i)&&!Z0(i)?i:{value:i,message:""},bw=async(i,e,t,r,n,a)=>{const{ref:c,refs:s,required:h,maxLength:f,minLength:m,min:y,max:g,pattern:b,validate:v,name:_,valueAsNumber:T,mount:k}=i._f,w=ai(t,_);if(!k||e.has(_))return{};const E=s?s[0]:c,A=F=>{n&&E.reportValidity&&(E.setCustomValidity(wo(F)?"":F||""),E.reportValidity())},M={},S=N2(c),N=wg(c),Y=S||N,Z=(T||L2(c))&&In(c.value)&&In(w)||W0(c)&&c.value===""||w===""||Array.isArray(w)&&!w.length,K=MP.bind(null,_,r,M),B=(F,O,R,L=uc.maxLength,G=uc.minLength)=>{const V=F?O:R;M[_]={type:F?L:G,message:V,ref:c,...K(F?L:G,V)}};if(a?!Array.isArray(w)||!w.length:h&&(!Y&&(Z||Fa(w))||wo(w)&&!w||N&&!DP(s).isValid||S&&!LP(s).isValid)){const{value:F,message:O}=g0(h)?{value:!!h,message:h}:qh(h);if(F&&(M[_]={type:uc.required,message:O,ref:E,...K(uc.required,O)},!r))return A(O),M}if(!Z&&(!Fa(y)||!Fa(g))){let F,O;const R=qh(g),L=qh(y);if(!Fa(w)&&!isNaN(w)){const G=c.valueAsNumber||w&&+w;Fa(R.value)||(F=G>R.value),Fa(L.value)||(O=G<L.value)}else{const G=c.valueAsDate||new Date(w),V=W=>new Date(new Date().toDateString()+" "+W),$=c.type=="time",q=c.type=="week";kl(R.value)&&w&&(F=$?V(w)>V(R.value):q?w>R.value:G>new Date(R.value)),kl(L.value)&&w&&(O=$?V(w)<V(L.value):q?w<L.value:G<new Date(L.value))}if((F||O)&&(B(!!F,R.message,L.message,uc.max,uc.min),!r))return A(M[_].message),M}if((f||m)&&!Z&&(kl(w)||a&&Array.isArray(w))){const F=qh(f),O=qh(m),R=!Fa(F.value)&&w.length>+F.value,L=!Fa(O.value)&&w.length<+O.value;if((R||L)&&(B(R,F.message,O.message),!r))return A(M[_].message),M}if(b&&!Z&&kl(w)){const{value:F,message:O}=qh(b);if(Z0(F)&&!w.match(F)&&(M[_]={type:uc.pattern,message:O,ref:c,...K(uc.pattern,O)},!r))return A(O),M}if(v){if(Jo(v)){const F=await v(w,t),O=UE(F,E);if(O&&(M[_]={...O,...K(uc.validate,O.message)},!r))return A(O.message),M}else if(ps(v)){let F={};for(const O in v){if(!_a(F)&&!r)break;const R=UE(await v[O](w,t),E,O);R&&(F={...R,...K(O,R.message)},A(R.message),r&&(M[_]=F))}if(!_a(F)&&(M[_]={ref:E,...F},!r))return M}}return A(!0),M};const Qee={mode:jo.onSubmit,reValidateMode:jo.onChange,shouldFocusError:!0};function Jee(i={}){let e={...Qee,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Jo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let n=ps(e.defaultValues)||ps(e.values)?Vn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Vn(n),c={action:!1,mount:!1,watch:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...m};const g={array:NE(),state:NE()},b=e.criteriaMode===jo.all,v=me=>De=>{clearTimeout(f),f=setTimeout(me,De)},_=async me=>{if(!e.disabled&&(m.isValid||y.isValid||me)){const De=e.resolver?_a((await N()).errors):await Z(r,!0);De!==t.isValid&&g.state.next({isValid:De})}},T=(me,De)=>{!e.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((me||Array.from(s.mount)).forEach(Ue=>{Ue&&(De?Xr(t.validatingFields,Ue,De):ys(t.validatingFields,Ue))}),g.state.next({validatingFields:t.validatingFields,isValidating:!_a(t.validatingFields)}))},k=(me,De=[],Ue,Pe,Te=!0,Ie=!0)=>{if(Pe&&Ue&&!e.disabled){if(c.action=!0,Ie&&Array.isArray(ai(r,me))){const Fe=Ue(ai(r,me),Pe.argA,Pe.argB);Te&&Xr(r,me,Fe)}if(Ie&&Array.isArray(ai(t.errors,me))){const Fe=Ue(ai(t.errors,me),Pe.argA,Pe.argB);Te&&Xr(t.errors,me,Fe),Kee(t.errors,me)}if((m.touchedFields||y.touchedFields)&&Ie&&Array.isArray(ai(t.touchedFields,me))){const Fe=Ue(ai(t.touchedFields,me),Pe.argA,Pe.argB);Te&&Xr(t.touchedFields,me,Fe)}(m.dirtyFields||y.dirtyFields)&&(t.dirtyFields=Wf(n,a)),g.state.next({name:me,isDirty:B(me,De),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Xr(a,me,De)},w=(me,De)=>{Xr(t.errors,me,De),g.state.next({errors:t.errors})},E=me=>{t.errors=me,g.state.next({errors:t.errors,isValid:!1})},A=(me,De,Ue,Pe)=>{const Te=ai(r,me);if(Te){const Ie=ai(a,me,In(Ue)?ai(n,me):Ue);In(Ie)||Pe&&Pe.defaultChecked||De?Xr(a,me,De?Ie:FE(Te._f)):R(me,Ie),c.mount&&_()}},M=(me,De,Ue,Pe,Te)=>{let Ie=!1,Fe=!1;const Oe={name:me};if(!e.disabled){if(!Ue||Pe){(m.isDirty||y.isDirty)&&(Fe=t.isDirty,t.isDirty=Oe.isDirty=B(),Ie=Fe!==Oe.isDirty);const Ge=lu(ai(n,me),De);Fe=!!ai(t.dirtyFields,me),Ge?ys(t.dirtyFields,me):Xr(t.dirtyFields,me,!0),Oe.dirtyFields=t.dirtyFields,Ie=Ie||(m.dirtyFields||y.dirtyFields)&&Fe!==!Ge}if(Ue){const Ge=ai(t.touchedFields,me);Ge||(Xr(t.touchedFields,me,Ue),Oe.touchedFields=t.touchedFields,Ie=Ie||(m.touchedFields||y.touchedFields)&&Ge!==Ue)}Ie&&Te&&g.state.next(Oe)}return Ie?Oe:{}},S=(me,De,Ue,Pe)=>{const Te=ai(t.errors,me),Ie=(m.isValid||y.isValid)&&wo(De)&&t.isValid!==De;if(e.delayError&&Ue?(h=v(()=>w(me,Ue)),h(e.delayError)):(clearTimeout(f),h=null,Ue?Xr(t.errors,me,Ue):ys(t.errors,me)),(Ue?!lu(Te,Ue):Te)||!_a(Pe)||Ie){const Fe={...Pe,...Ie&&wo(De)?{isValid:De}:{},errors:t.errors,name:me};t={...t,...Fe},g.state.next(Fe)}},N=async me=>{T(me,!0);const De=await e.resolver(a,e.context,Gee(me||s.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(me),De},Y=async me=>{const{errors:De}=await N(me);if(me)for(const Ue of me){const Pe=ai(De,Ue);Pe?Xr(t.errors,Ue,Pe):ys(t.errors,Ue)}else t.errors=De;return De},Z=async(me,De,Ue={valid:!0})=>{for(const Pe in me){const Te=me[Pe];if(Te){const{_f:Ie,...Fe}=Te;if(Ie){const Oe=s.array.has(Ie.name),Ge=Te._f&&qee(Te._f);Ge&&m.validatingFields&&T([Pe],!0);const Qe=await bw(Te,s.disabled,a,b,e.shouldUseNativeValidation&&!De,Oe);if(Ge&&m.validatingFields&&T([Pe]),Qe[Ie.name]&&(Ue.valid=!1,De))break;!De&&(ai(Qe,Ie.name)?Oe?NP(t.errors,Qe,Ie.name):Xr(t.errors,Ie.name,Qe[Ie.name]):ys(t.errors,Ie.name))}!_a(Fe)&&await Z(Fe,De,Ue)}}return Ue.valid},K=()=>{for(const me of s.unMount){const De=ai(r,me);De&&(De._f.refs?De._f.refs.every(Ue=>!Gb(Ue)):!Gb(De._f.ref))&&Ee(me)}s.unMount=new Set},B=(me,De)=>!e.disabled&&(me&&De&&Xr(a,me,De),!lu(W(),n)),F=(me,De,Ue)=>kP(me,s,{...c.mount?a:In(De)?n:kl(me)?{[me]:De}:De},Ue,De),O=me=>_g(ai(c.mount?a:n,me,e.shouldUnregister?ai(n,me,[]):[])),R=(me,De,Ue={})=>{const Pe=ai(r,me);let Te=De;if(Pe){const Ie=Pe._f;Ie&&(!Ie.disabled&&Xr(a,me,RP(De,Ie)),Te=W0(Ie.ref)&&Fa(De)?"":De,AP(Ie.ref)?[...Ie.ref.options].forEach(Fe=>Fe.selected=Te.includes(Fe.value)):Ie.refs?wg(Ie.ref)?Ie.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(Te)?Fe.checked=!!Te.find(Oe=>Oe===Fe.value):Fe.checked=Te===Fe.value||!!Te)}):Ie.refs.forEach(Fe=>Fe.checked=Fe.value===Te):L2(Ie.ref)?Ie.ref.value="":(Ie.ref.value=Te,Ie.ref.type||g.state.next({name:me,values:Vn(a)})))}(Ue.shouldDirty||Ue.shouldTouch)&&M(me,Te,Ue.shouldTouch,Ue.shouldDirty,!0),Ue.shouldValidate&&q(me)},L=(me,De,Ue)=>{for(const Pe in De){if(!De.hasOwnProperty(Pe))return;const Te=De[Pe],Ie=`${me}.${Pe}`,Fe=ai(r,Ie);(s.array.has(me)||ps(Te)||Fe&&!Fe._f)&&!Cd(Te)?L(Ie,Te,Ue):R(Ie,Te,Ue)}},G=(me,De,Ue={})=>{const Pe=ai(r,me),Te=s.array.has(me),Ie=Vn(De);Xr(a,me,Ie),Te?(g.array.next({name:me,values:Vn(a)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&Ue.shouldDirty&&g.state.next({name:me,dirtyFields:Wf(n,a),isDirty:B(me,Ie)})):Pe&&!Pe._f&&!Fa(Ie)?L(me,Ie,Ue):R(me,Ie,Ue),xw(me,s)&&g.state.next({...t}),g.state.next({name:c.mount?me:void 0,values:Vn(a)})},V=async me=>{c.mount=!0;const De=me.target;let Ue=De.name,Pe=!0;const Te=ai(r,Ue),Ie=Ge=>{Pe=Number.isNaN(Ge)||Cd(Ge)&&isNaN(Ge.getTime())||lu(Ge,ai(a,Ue,Ge))},Fe=tp(e.mode),Oe=tp(e.reValidateMode);if(Te){let Ge,Qe;const at=De.type?FE(Te._f):_P(me),rt=me.type===q0.BLUR||me.type===q0.FOCUS_OUT,dt=!Wee(Te._f)&&!e.resolver&&!ai(t.errors,Ue)&&!Te._f.deps||Xee(rt,ai(t.touchedFields,Ue),t.isSubmitted,Oe,Fe),gt=xw(Ue,s,rt);Xr(a,Ue,at),rt?(Te._f.onBlur&&Te._f.onBlur(me),h&&h(0)):Te._f.onChange&&Te._f.onChange(me);const Tt=M(Ue,at,rt),Nt=!_a(Tt)||gt;if(!rt&&g.state.next({name:Ue,type:me.type,values:Vn(a)}),dt)return(m.isValid||y.isValid)&&(e.mode==="onBlur"?rt&&_():rt||_()),Nt&&g.state.next({name:Ue,...gt?{}:Tt});if(!rt&&gt&&g.state.next({...t}),e.resolver){const{errors:mt}=await N([Ue]);if(Ie(at),Pe){const St=$E(t.errors,r,Ue),kt=$E(mt,r,St.name||Ue);Ge=kt.error,Ue=kt.name,Qe=_a(mt)}}else T([Ue],!0),Ge=(await bw(Te,s.disabled,a,b,e.shouldUseNativeValidation))[Ue],T([Ue]),Ie(at),Pe&&(Ge?Qe=!1:(m.isValid||y.isValid)&&(Qe=await Z(r,!0)));Pe&&(Te._f.deps&&q(Te._f.deps),S(Ue,Qe,Ge,Tt))}},$=(me,De)=>{if(ai(t.errors,De)&&me.focus)return me.focus(),1},q=async(me,De={})=>{let Ue,Pe;const Te=io(me);if(e.resolver){const Ie=await Y(In(me)?me:Te);Ue=_a(Ie),Pe=me?!Te.some(Fe=>ai(Ie,Fe)):Ue}else me?(Pe=(await Promise.all(Te.map(async Ie=>{const Fe=ai(r,Ie);return await Z(Fe&&Fe._f?{[Ie]:Fe}:Fe)}))).every(Boolean),!(!Pe&&!t.isValid)&&_()):Pe=Ue=await Z(r);return g.state.next({...!kl(me)||(m.isValid||y.isValid)&&Ue!==t.isValid?{}:{name:me},...e.resolver||!me?{isValid:Ue}:{},errors:t.errors}),De.shouldFocus&&!Pe&&lp(r,$,me?Te:s.mount),Pe},W=me=>{const De={...c.mount?a:n};return In(me)?De:kl(me)?ai(De,me):me.map(Ue=>ai(De,Ue))},se=(me,De)=>({invalid:!!ai((De||t).errors,me),isDirty:!!ai((De||t).dirtyFields,me),error:ai((De||t).errors,me),isValidating:!!ai(t.validatingFields,me),isTouched:!!ai((De||t).touchedFields,me)}),fe=me=>{me&&io(me).forEach(De=>ys(t.errors,De)),g.state.next({errors:me?t.errors:{}})},re=(me,De,Ue)=>{const Pe=(ai(r,me,{_f:{}})._f||{}).ref,Te=ai(t.errors,me)||{},{ref:Ie,message:Fe,type:Oe,...Ge}=Te;Xr(t.errors,me,{...Ge,...De,ref:Pe}),g.state.next({name:me,errors:t.errors,isValid:!1}),Ue&&Ue.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},le=(me,De)=>Jo(me)?g.state.subscribe({next:Ue=>me(F(void 0,De),Ue)}):F(me,De,!0),Se=me=>g.state.subscribe({next:De=>{Zee(me.name,De.name,me.exact)&&Yee(De,me.formState||m,je,me.reRenderRoot)&&me.callback({values:{...a},...t,...De})}}).unsubscribe,ye=me=>(c.mount=!0,y={...y,...me.formState},Se({...me,formState:y})),Ee=(me,De={})=>{for(const Ue of me?io(me):s.mount)s.mount.delete(Ue),s.array.delete(Ue),De.keepValue||(ys(r,Ue),ys(a,Ue)),!De.keepError&&ys(t.errors,Ue),!De.keepDirty&&ys(t.dirtyFields,Ue),!De.keepTouched&&ys(t.touchedFields,Ue),!De.keepIsValidating&&ys(t.validatingFields,Ue),!e.shouldUnregister&&!De.keepDefaultValue&&ys(n,Ue);g.state.next({values:Vn(a)}),g.state.next({...t,...De.keepDirty?{isDirty:B()}:{}}),!De.keepIsValid&&_()},J=({disabled:me,name:De})=>{(wo(me)&&c.mount||me||s.disabled.has(De))&&(me?s.disabled.add(De):s.disabled.delete(De))},ie=(me,De={})=>{let Ue=ai(r,me);const Pe=wo(De.disabled)||wo(e.disabled);return Xr(r,me,{...Ue||{},_f:{...Ue&&Ue._f?Ue._f:{ref:{name:me}},name:me,mount:!0,...De}}),s.mount.add(me),Ue?J({disabled:wo(De.disabled)?De.disabled:e.disabled,name:me}):A(me,!0,De.value),{...Pe?{disabled:De.disabled||e.disabled}:{},...e.progressive?{required:!!De.required,min:Yf(De.min),max:Yf(De.max),minLength:Yf(De.minLength),maxLength:Yf(De.maxLength),pattern:Yf(De.pattern)}:{},name:me,onChange:V,onBlur:V,ref:Te=>{if(Te){ie(me,De),Ue=ai(r,me);const Ie=In(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Fe=Uee(Ie),Oe=Ue._f.refs||[];if(Fe?Oe.find(Ge=>Ge===Ie):Ie===Ue._f.ref)return;Xr(r,me,{_f:{...Ue._f,...Fe?{refs:[...Oe.filter(Gb),Ie,...Array.isArray(ai(n,me))?[{}]:[]],ref:{type:Ie.type,name:me}}:{ref:Ie}}}),A(me,!1,void 0,Ie)}else Ue=ai(r,me,{}),Ue._f&&(Ue._f.mount=!1),(e.shouldUnregister||De.shouldUnregister)&&!(CP(s.array,me)&&c.action)&&s.unMount.add(me)}}},oe=()=>e.shouldFocusError&&lp(r,$,s.mount),we=me=>{wo(me)&&(g.state.next({disabled:me}),lp(r,(De,Ue)=>{const Pe=ai(r,Ue);Pe&&(De.disabled=Pe._f.disabled||me,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach(Te=>{Te.disabled=Pe._f.disabled||me}))},0,!1))},ee=(me,De)=>async Ue=>{let Pe;Ue&&(Ue.preventDefault&&Ue.preventDefault(),Ue.persist&&Ue.persist());let Te=Vn(a);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:Ie,values:Fe}=await N();t.errors=Ie,Te=Fe}else await Z(r);if(s.disabled.size)for(const Ie of s.disabled)Xr(Te,Ie,void 0);if(ys(t.errors,"root"),_a(t.errors)){g.state.next({errors:{}});try{await me(Te,Ue)}catch(Ie){Pe=Ie}}else De&&await De({...t.errors},Ue),oe(),setTimeout(oe);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_a(t.errors)&&!Pe,submitCount:t.submitCount+1,errors:t.errors}),Pe)throw Pe},ae=(me,De={})=>{ai(r,me)&&(In(De.defaultValue)?G(me,Vn(ai(n,me))):(G(me,De.defaultValue),Xr(n,me,Vn(De.defaultValue))),De.keepTouched||ys(t.touchedFields,me),De.keepDirty||(ys(t.dirtyFields,me),t.isDirty=De.defaultValue?B(me,Vn(ai(n,me))):B()),De.keepError||(ys(t.errors,me),m.isValid&&_()),g.state.next({...t}))},ue=(me,De={})=>{const Ue=me?Vn(me):n,Pe=Vn(Ue),Te=_a(me),Ie=Te?n:Pe;if(De.keepDefaultValues||(n=Ue),!De.keepValues){if(De.keepDirtyValues){const Fe=new Set([...s.mount,...Object.keys(Wf(n,a))]);for(const Oe of Array.from(Fe))ai(t.dirtyFields,Oe)?Xr(Ie,Oe,ai(a,Oe)):G(Oe,ai(Ie,Oe))}else{if(P2&&In(me))for(const Fe of s.mount){const Oe=ai(r,Fe);if(Oe&&Oe._f){const Ge=Array.isArray(Oe._f.refs)?Oe._f.refs[0]:Oe._f.ref;if(W0(Ge)){const Qe=Ge.closest("form");if(Qe){Qe.reset();break}}}}for(const Fe of s.mount)G(Fe,ai(Ie,Fe))}a=Vn(Ie),g.array.next({values:{...Ie}}),g.state.next({values:{...Ie}})}s={mount:De.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!m.isValid||!!De.keepIsValid||!!De.keepDirtyValues,c.watch=!!e.shouldUnregister,g.state.next({submitCount:De.keepSubmitCount?t.submitCount:0,isDirty:Te?!1:De.keepDirty?t.isDirty:!!(De.keepDefaultValues&&!lu(me,n)),isSubmitted:De.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Te?{}:De.keepDirtyValues?De.keepDefaultValues&&a?Wf(n,a):t.dirtyFields:De.keepDefaultValues&&me?Wf(n,me):De.keepDirty?t.dirtyFields:{},touchedFields:De.keepTouched?t.touchedFields:{},errors:De.keepErrors?t.errors:{},isSubmitSuccessful:De.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ve=(me,De)=>ue(Jo(me)?me(a):me,De),Ce=(me,De={})=>{const Ue=ai(r,me),Pe=Ue&&Ue._f;if(Pe){const Te=Pe.refs?Pe.refs[0]:Pe.ref;Te.focus&&(Te.focus(),De.shouldSelect&&Jo(Te.select)&&Te.select())}},je=me=>{t={...t,...me}},Re={control:{register:ie,unregister:Ee,getFieldState:se,handleSubmit:ee,setError:re,_subscribe:Se,_runSchema:N,_getWatch:F,_getDirty:B,_setValid:_,_setFieldArray:k,_setDisabledField:J,_setErrors:E,_getFieldArray:O,_reset:ue,_resetDefaultValues:()=>Jo(e.defaultValues)&&e.defaultValues().then(me=>{ve(me,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:we,_subjects:g,_proxyFormState:m,get _fields(){return r},get _formValues(){return a},get _state(){return c},set _state(me){c=me},get _defaultValues(){return n},get _names(){return s},set _names(me){s=me},get _formState(){return t},get _options(){return e},set _options(me){e={...e,...me}}},subscribe:ye,trigger:q,register:ie,handleSubmit:ee,watch:le,setValue:G,getValues:W,reset:ve,resetField:ae,clearErrors:fe,unregister:Ee,setError:re,setFocus:Ce,getFieldState:se};return{...Re,formControl:Re}}var Qc=()=>{const i=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+i)%16|0;return(e=="x"?t:t&3|8).toString(16)})},qb=(i,e,t={})=>t.shouldFocus||In(t.shouldFocus)?t.focusName||`${i}.${In(t.focusIndex)?e:t.focusIndex}.`:"",Wb=(i,e)=>[...i,...io(e)],Yb=i=>Array.isArray(i)?i.map(()=>{}):void 0;function Zb(i,e,t){return[...i.slice(0,e),...io(t),...i.slice(e)]}var Xb=(i,e,t)=>Array.isArray(i)?(In(i[t])&&(i[t]=void 0),i.splice(t,0,i.splice(e,1)[0]),i):[],Kb=(i,e)=>[...io(e),...io(i)];function ete(i,e){let t=0;const r=[...i];for(const n of e)r.splice(n-t,1),t++;return _g(r).length?r:[]}var Qb=(i,e)=>In(e)?[]:ete(i,io(e).sort((t,r)=>t-r)),Jb=(i,e,t)=>{[i[e],i[t]]=[i[t],i[e]]},VE=(i,e,t)=>(i[e]=t,i);function tte(i){const e=Ac(),{control:t=e.control,name:r,keyName:n="id",shouldUnregister:a,rules:c}=i,[s,h]=he.useState(t._getFieldArray(r)),f=he.useRef(t._getFieldArray(r).map(Qc)),m=he.useRef(s),y=he.useRef(r),g=he.useRef(!1);y.current=r,m.current=s,t._names.array.add(r),c&&t.register(r,c),he.useEffect(()=>t._subjects.array.subscribe({next:({values:S,name:N})=>{if(N===y.current||!N){const Y=ai(S,y.current);Array.isArray(Y)&&(h(Y),f.current=Y.map(Qc))}}}).unsubscribe,[t]);const b=he.useCallback(S=>{g.current=!0,t._setFieldArray(r,S)},[t,r]),v=(S,N)=>{const Y=io(Vn(S)),Z=Wb(t._getFieldArray(r),Y);t._names.focus=qb(r,Z.length-1,N),f.current=Wb(f.current,Y.map(Qc)),b(Z),h(Z),t._setFieldArray(r,Z,Wb,{argA:Yb(S)})},_=(S,N)=>{const Y=io(Vn(S)),Z=Kb(t._getFieldArray(r),Y);t._names.focus=qb(r,0,N),f.current=Kb(f.current,Y.map(Qc)),b(Z),h(Z),t._setFieldArray(r,Z,Kb,{argA:Yb(S)})},T=S=>{const N=Qb(t._getFieldArray(r),S);f.current=Qb(f.current,S),b(N),h(N),!Array.isArray(ai(t._fields,r))&&Xr(t._fields,r,void 0),t._setFieldArray(r,N,Qb,{argA:S})},k=(S,N,Y)=>{const Z=io(Vn(N)),K=Zb(t._getFieldArray(r),S,Z);t._names.focus=qb(r,S,Y),f.current=Zb(f.current,S,Z.map(Qc)),b(K),h(K),t._setFieldArray(r,K,Zb,{argA:S,argB:Yb(N)})},w=(S,N)=>{const Y=t._getFieldArray(r);Jb(Y,S,N),Jb(f.current,S,N),b(Y),h(Y),t._setFieldArray(r,Y,Jb,{argA:S,argB:N},!1)},E=(S,N)=>{const Y=t._getFieldArray(r);Xb(Y,S,N),Xb(f.current,S,N),b(Y),h(Y),t._setFieldArray(r,Y,Xb,{argA:S,argB:N},!1)},A=(S,N)=>{const Y=Vn(N),Z=VE(t._getFieldArray(r),S,Y);f.current=[...Z].map((K,B)=>!K||B===S?Qc():f.current[B]),b(Z),h([...Z]),t._setFieldArray(r,Z,VE,{argA:S,argB:Y},!0,!1)},M=S=>{const N=io(Vn(S));f.current=N.map(Qc),b([...N]),h([...N]),t._setFieldArray(r,[...N],Y=>Y,{},!0,!1)};return he.useEffect(()=>{if(t._state.action=!1,xw(r,t._names)&&t._subjects.state.next({...t._formState}),g.current&&(!tp(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!tp(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([r]).then(S=>{const N=ai(S.errors,r),Y=ai(t._formState.errors,r);(Y?!N&&Y.type||N&&(Y.type!==N.type||Y.message!==N.message):N&&N.type)&&(N?Xr(t._formState.errors,r,N):ys(t._formState.errors,r),t._subjects.state.next({errors:t._formState.errors}))});else{const S=ai(t._fields,r);S&&S._f&&!(tp(t._options.reValidateMode).isOnSubmit&&tp(t._options.mode).isOnSubmit)&&bw(S,t._names.disabled,t._formValues,t._options.criteriaMode===jo.all,t._options.shouldUseNativeValidation,!0).then(N=>!_a(N)&&t._subjects.state.next({errors:NP(t._formState.errors,N,r)}))}t._subjects.state.next({name:r,values:Vn(t._formValues)}),t._names.focus&&lp(t._fields,(S,N)=>{if(t._names.focus&&N.startsWith(t._names.focus)&&S.focus)return S.focus(),1}),t._names.focus="",t._setValid(),g.current=!1},[s,r,t]),he.useEffect(()=>(!ai(t._formValues,r)&&t._setFieldArray(r),()=>{const S=(N,Y)=>{const Z=ai(t._fields,N);Z&&Z._f&&(Z._f.mount=Y)};t._options.shouldUnregister||a?t.unregister(r):S(r,!1)}),[r,t,n,a]),{swap:he.useCallback(w,[b,r,t]),move:he.useCallback(E,[b,r,t]),prepend:he.useCallback(_,[b,r,t]),append:he.useCallback(v,[b,r,t]),remove:he.useCallback(T,[b,r,t]),insert:he.useCallback(k,[b,r,t]),update:he.useCallback(A,[b,r,t]),replace:he.useCallback(M,[b,r,t]),fields:he.useMemo(()=>s.map((S,N)=>({...S,[n]:f.current[N]||Qc()})),[s,n])}}function Kv(i={}){const e=he.useRef(void 0),t=he.useRef(void 0),[r,n]=he.useState({isDirty:!1,isValidating:!1,isLoading:Jo(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:Jo(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:Jee(i),formState:r},i.formControl&&i.defaultValues&&!Jo(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const a=e.current.control;return a._options=i,R2(()=>{const c=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(s=>({...s,isReady:!0})),a._formState.isReady=!0,c},[a]),he.useEffect(()=>a._disableForm(i.disabled),[a,i.disabled]),he.useEffect(()=>{i.mode&&(a._options.mode=i.mode),i.reValidateMode&&(a._options.reValidateMode=i.reValidateMode),i.errors&&!_a(i.errors)&&a._setErrors(i.errors)},[a,i.errors,i.mode,i.reValidateMode]),he.useEffect(()=>{i.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,i.shouldUnregister]),he.useEffect(()=>{if(a._proxyFormState.isDirty){const c=a._getDirty();c!==r.isDirty&&a._subjects.state.next({isDirty:c})}},[a,r.isDirty]),he.useEffect(()=>{i.values&&!lu(i.values,t.current)?(a._reset(i.values,a._options.resetOptions),t.current=i.values,n(c=>({...c}))):a._resetDefaultValues()},[a,i.values]),he.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=EP(r,a),e.current}const ite="_formField_4q43h_1",rte="_userOptionsContainer_4q43h_5",nte="_arrayField_4q43h_13",ste="_arrayInput_4q43h_17",ate="_arrayItems_4q43h_28",Ml={formField:ite,userOptionsContainer:rte,arrayField:nte,arrayInput:ste,arrayItems:ate},ote=({optionKey:i,optionConfig:e,setValue:t,disabled:r,watchedUserOptions:n,arrayInputs:a,setArrayInputs:c})=>{const s=(n==null?void 0:n[i])||[],h=a[i]||"",f=()=>{const g=h.trim();if(g&&!s.includes(g)){const b=[...s,g];t(`userOptions.${i}`,b),c(v=>({...v,[i]:""}))}},m=g=>{const b=s.filter((v,_)=>_!==g);t(`userOptions.${i}`,b)},y=g=>{c(b=>({...b,[i]:g}))};return z.jsxs("div",{className:Ml.formField,children:[z.jsx(Sa,{children:e.title||i}),z.jsxs("div",{className:Ml.arrayField,children:[z.jsxs("div",{className:Ml.arrayInput,children:[z.jsx(Rl,{value:h,placeholder:be.t("Enter item"),onChange:({value:g})=>y(g||""),disabled:r}),z.jsx(Ci,{onClick:f,disabled:!h.trim()||r,small:!0,children:be.t("Add")})]}),z.jsx("div",{className:Ml.arrayItems,children:s.map((g,b)=>z.jsx(i_,{onRemove:()=>m(b),children:g},b))})]})]},i)},lte=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const{title:n,enum:a}=e,c=n||i;return z.jsxs("div",{className:Ml.formField,children:[z.jsx(Sa,{children:c}),z.jsx(Uo,{name:`userOptions.${i}`,control:t,render:({field:s})=>{var h;return z.jsx(Ll,{selected:((h=s.value)==null?void 0:h.toString())||"",disabled:r,onChange:({selected:f})=>s.onChange(f),children:a.map(f=>z.jsx(Cs,{label:f,value:f},f))})}})]},i)},cte=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const n=e.title||i;return z.jsx("div",{className:Ml.formField,children:z.jsx(Uo,{name:`userOptions.${i}`,control:t,render:({field:a})=>z.jsx(el,{label:n,checked:a.value||!1,disabled:r,onChange:({checked:c})=>a.onChange(c)})})},i)},xa={INTEGER:"integer",NUMBER:"number",BOOLEAN:"boolean",STRING:"string",ARRAY:"array",NULL:"null"},z2={getDefault:i=>{if(i.default!==void 0)return i.default;const e=i.type;if(e===xa.INTEGER||e===xa.NUMBER)return 0;if(e===xa.BOOLEAN)return!1;if(e===xa.ARRAY)return[];if(e===xa.STRING)return"";if(i.anyOf){if(i.anyOf.some(n=>n.type===xa.NULL))return null;const r=i.anyOf.find(n=>n.type!==xa.NULL);if((r==null?void 0:r.type)===xa.INTEGER||(r==null?void 0:r.type)===xa.NUMBER)return 0;if((r==null?void 0:r.type)===xa.BOOLEAN)return!1;if((r==null?void 0:r.type)===xa.STRING)return""}return null},convertInput:(i,e)=>{const t=e.type;if(t===xa.INTEGER){const r=parseInt(i,10);return isNaN(r)?0:r}if(t===xa.NUMBER){const r=parseFloat(i);return isNaN(r)?0:r}if(t===xa.BOOLEAN)return i==="true";if(e.anyOf){if(i===""||i===null||i==="null")return null;const r=e.anyOf.find(a=>a.type===xa.INTEGER),n=e.anyOf.find(a=>a.type===xa.NUMBER);if(r){const a=parseInt(i,10);return isNaN(a)?null:a}if(n){const a=parseFloat(i);return isNaN(a)?null:a}}return i}},e1={BOOLEAN:"boolean",ARRAY:"array",NULL:"null"},Zf={ARRAY:"array",ENUM:"enum",BOOLEAN:"boolean",NULLABLE:"nullable",DEFAULT:"default"},ute=i=>{var e;return i.type===e1.ARRAY?Zf.ARRAY:i.enum&&i.enum.length>0?Zf.ENUM:i.type===e1.BOOLEAN?Zf.BOOLEAN:(e=i.anyOf)!=null&&e.some(t=>t.type===e1.NULL)?Zf.NULLABLE:Zf.DEFAULT},Xf={INTEGER:"integer",NUMBER:"number",NULL:"null"},dte=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const n=e.title||i,a=e.anyOf.find(h=>h.type!==Xf.NULL),c=(a==null?void 0:a.type)===Xf.INTEGER||(a==null?void 0:a.type)===Xf.NUMBER?"number":"text",s=(a==null?void 0:a.type)===Xf.NUMBER?"any":(a==null?void 0:a.type)===Xf.INTEGER?"1":void 0;return z.jsx("div",{className:Ml.formField,children:z.jsx(Uo,{name:`userOptions.${i}`,control:t,render:({field:h})=>{var f;return z.jsx(Rl,{label:n,type:c,step:s,value:h.value===null?"":((f=h.value)==null?void 0:f.toString())||"",disabled:r,placeholder:be.t("Leave empty for null"),onChange:({value:m})=>{const y=m===""?null:z2.convertInput(m||"",e);h.onChange(y)}})}})},i)},Hy={INTEGER:"integer",NUMBER:"number"},hte=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const{type:n,title:a}=e,c=a||i,s=n===Hy.INTEGER||n===Hy.NUMBER?"number":"text",h=n===Hy.NUMBER?"any":n===Hy.INTEGER?"1":void 0;return z.jsx("div",{className:Ml.formField,children:z.jsx(Uo,{name:`userOptions.${i}`,control:t,render:({field:f})=>{var m;return z.jsx(Rl,{label:c,type:s,step:h,value:((m=f.value)==null?void 0:m.toString())||"",disabled:r,onChange:({value:y})=>{const g=z2.convertInput(y||"",e);f.onChange(g)}})}})},i)},Kf={ARRAY:"array",ENUM:"enum",BOOLEAN:"boolean",NULLABLE:"nullable",DEFAULT:"default"},pte={[Kf.ARRAY]:i=>z.jsx(ote,{optionKey:i.optionKey,optionConfig:i.optionConfig,setValue:i.setValue,disabled:i.disabled,watchedUserOptions:i.watchedUserOptions,arrayInputs:i.arrayInputs,setArrayInputs:i.setArrayInputs}),[Kf.ENUM]:i=>z.jsx(lte,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[Kf.BOOLEAN]:i=>z.jsx(cte,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[Kf.NULLABLE]:i=>z.jsx(dte,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[Kf.DEFAULT]:i=>z.jsx(hte,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled})},fte=({control:i,setValue:e,currentTemplate:t,disabled:r=!1})=>{const[n,a]=Ae.useState({}),c=(t==null?void 0:t.userOptions)||{},s=Cc({control:i,name:"userOptions"});Ae.useEffect(()=>{if(t!=null&&t.userOptions){const f={};Object.entries(t.userOptions).filter(([m])=>m!=="additional_covariates").forEach(([m,y])=>{f[m]=z2.getDefault(y)}),e("userOptions",f)}else e("userOptions",{})},[t,e]);const h=(f,m)=>{const y=ute(m),g=pte[y];return g({optionKey:f,optionConfig:m,control:i,setValue:e,disabled:r,watchedUserOptions:s,arrayInputs:n,setArrayInputs:a})};return Object.keys(c).length===0?null:z.jsxs("div",{className:Ml.formField,children:[z.jsx(Sa,{children:be.t("Model Parameters")}),z.jsx("div",{className:Ml.userOptionsContainer,children:Object.entries(c).filter(([f])=>f!=="additional_covariates").map(([f,m])=>h(f,m))})]})},HE=(i,e,t)=>{if(i&&"reportValidity"in i){const r=ai(t,e);i.setCustomValidity(r&&r.message||""),i.reportValidity()}},zP=(i,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?HE(r.ref,t,i):r&&r.refs&&r.refs.forEach(n=>HE(n,t,i))}},mte=(i,e)=>{e.shouldUseNativeValidation&&zP(i,e);const t={};for(const r in i){const n=ai(e.fields,r),a=Object.assign(i[r]||{},{ref:n&&n.ref});if(gte(e.names||Object.keys(i),r)){const c=Object.assign({},ai(t,r));Xr(c,"root",a),Xr(t,r,c)}else Xr(t,r,a)}return t},gte=(i,e)=>{const t=GE(e);return i.some(r=>GE(r).match(`^${t}\\.\\d+`))};function GE(i){return i.replace(/\]|\[/g,"")}function yte(i,e){for(var t={};i.length;){var r=i[0],n=r.code,a=r.message,c=r.path.join(".");if(!t[c])if("unionErrors"in r){var s=r.unionErrors[0].errors[0];t[c]={message:s.message,type:s.code}}else t[c]={message:a,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(y){return i.push(y)})}),e){var h=t[c].types,f=h&&h[r.code];t[c]=MP(c,e,t,n,f?[].concat(f,r.message):r.message)}i.shift()}return t}function Qv(i,e,t){return t===void 0&&(t={}),function(r,n,a){try{return Promise.resolve(function(c,s){try{var h=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return a.shouldUseNativeValidation&&zP({},a),{errors:{},values:t.raw?Object.assign({},r):f}})}catch(f){return s(f)}return h&&h.then?h.then(void 0,s):h}(0,function(c){if(function(s){return Array.isArray(s==null?void 0:s.errors)}(c))return{values:{},errors:mte(yte(c.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw c}))}catch(c){return Promise.reject(c)}}}var Kr;(function(i){i.assertEqual=n=>{};function e(n){}i.assertIs=e;function t(n){throw new Error}i.assertNever=t,i.arrayToEnum=n=>{const a={};for(const c of n)a[c]=c;return a},i.getValidEnumValues=n=>{const a=i.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),c={};for(const s of a)c[s]=n[s];return i.objectValues(c)},i.objectValues=n=>i.objectKeys(n).map(function(a){return n[a]}),i.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const a=[];for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&a.push(c);return a},i.find=(n,a)=>{for(const c of n)if(a(c))return c},i.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function r(n,a=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}i.joinValues=r,i.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(Kr||(Kr={}));var qE;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(qE||(qE={}));const Ai=Kr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),su=i=>{switch(typeof i){case"undefined":return Ai.undefined;case"string":return Ai.string;case"number":return Number.isNaN(i)?Ai.nan:Ai.number;case"boolean":return Ai.boolean;case"function":return Ai.function;case"bigint":return Ai.bigint;case"symbol":return Ai.symbol;case"object":return Array.isArray(i)?Ai.array:i===null?Ai.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Ai.promise:typeof Map<"u"&&i instanceof Map?Ai.map:typeof Set<"u"&&i instanceof Set?Ai.set:typeof Date<"u"&&i instanceof Date?Ai.date:Ai.object;default:return Ai.unknown}},Xt=Kr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Sc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},n=a=>{for(const c of a.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)r._errors.push(t(c));else{let s=r,h=0;for(;h<c.path.length;){const f=c.path[h];h===c.path.length-1?(s[f]=s[f]||{_errors:[]},s[f]._errors.push(t(c))):s[f]=s[f]||{_errors:[]},s=s[f],h++}}};return n(this),r}static assert(e){if(!(e instanceof Sc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Sc.create=i=>new Sc(i);const ww=(i,e)=>{let t;switch(i.code){case Xt.invalid_type:i.received===Ai.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Xt.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,Kr.jsonStringifyReplacer)}`;break;case Xt.unrecognized_keys:t=`Unrecognized key(s) in object: ${Kr.joinValues(i.keys,", ")}`;break;case Xt.invalid_union:t="Invalid input";break;case Xt.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Kr.joinValues(i.options)}`;break;case Xt.invalid_enum_value:t=`Invalid enum value. Expected ${Kr.joinValues(i.options)}, received '${i.received}'`;break;case Xt.invalid_arguments:t="Invalid function arguments";break;case Xt.invalid_return_type:t="Invalid function return type";break;case Xt.invalid_date:t="Invalid date";break;case Xt.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:Kr.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Xt.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Xt.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Xt.custom:t="Invalid input";break;case Xt.invalid_intersection_types:t="Intersection results could not be merged";break;case Xt.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Xt.not_finite:t="Number must be finite";break;default:t=e.defaultError,Kr.assertNever(i)}return{message:t}};let vte=ww;function xte(){return vte}const bte=i=>{const{data:e,path:t,errorMaps:r,issueData:n}=i,a=[...t,...n.path||[]],c={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let s="";const h=r.filter(f=>!!f).slice().reverse();for(const f of h)s=f(c,{data:e,defaultError:s}).message;return{...n,path:a,message:s}};function xi(i,e){const t=xte(),r=bte({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===ww?void 0:ww].filter(n=>!!n)});i.common.issues.push(r)}class Ga{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if(n.status==="aborted")return fr;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const a=await n.key,c=await n.value;r.push({key:a,value:c})}return Ga.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:a,value:c}=n;if(a.status==="aborted"||c.status==="aborted")return fr;a.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(r[a.value]=c.value)}return{status:e.value,value:r}}}const fr=Object.freeze({status:"aborted"}),dm=i=>({status:"dirty",value:i}),Go=i=>({status:"valid",value:i}),WE=i=>i.status==="aborted",YE=i=>i.status==="dirty",vp=i=>i.status==="valid",X0=i=>typeof Promise<"u"&&i instanceof Promise;var Ni;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ni||(Ni={}));var K0=function(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)},jP=function(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t},hm,pm;class Fl{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ZE=(i,e)=>{if(vp(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Sc(i.common.issues);return this._error=t,this._error}}};function wr(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:n}=i;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,s)=>{const{message:h}=i;return c.code==="invalid_enum_value"?{message:h??s.defaultError}:typeof s.data>"u"?{message:h??r??s.defaultError}:c.code!=="invalid_type"?{message:s.defaultError}:{message:h??t??s.defaultError}},description:n}}class Br{get description(){return this._def.description}_getType(e){return su(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:su(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ga,ctx:{common:e.parent.common,data:e.data,parsedType:su(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(X0(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:su(e)},n=this._parseSync({data:e,path:r.path,parent:r});return ZE(r,n)}"~validate"(e){var r,n;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:su(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return vp(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(n=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>vp(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:su(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(X0(n)?n:Promise.resolve(n));return ZE(r,a)}refine(e,t){const r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{const c=e(n),s=()=>a.addIssue({code:Xt.custom,...r(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(h=>h?!0:(s(),!1)):c?!0:(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new wp({schema:this,typeName:lr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return mu.create(this,this._def)}nullable(){return _p.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Dl.create(this)}promise(){return iv.create(this,this._def)}or(e){return J0.create([this,e],this._def)}and(e){return ev.create(this,e,this._def)}transform(e){return new wp({...wr(this._def),schema:this,typeName:lr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Tw({...wr(this._def),innerType:this,defaultValue:t,typeName:lr.ZodDefault})}brand(){return new Vte({typeName:lr.ZodBranded,type:this,...wr(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Sw({...wr(this._def),innerType:this,catchValue:t,typeName:lr.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return j2.create(this,e)}readonly(){return Ew.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wte=/^c[^\s-]{8,}$/i,_te=/^[0-9a-z]+$/,Cte=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Tte=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ste=/^[a-z0-9_-]{21}$/i,Ete=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kte=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Mte=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ate="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let t1;const Ite=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Pte=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Dte=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Rte=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Lte=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nte=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zte=new RegExp(`^${OP}$`);function FP(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function jte(i){return new RegExp(`^${FP(i)}$`)}function Ote(i){let e=`${OP}T${FP(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Fte(i,e){return!!((e==="v4"||!e)&&Ite.test(i)||(e==="v6"||!e)&&Dte.test(i))}function Bte(i,e){if(!Ete.test(i))return!1;try{const[t]=i.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function $te(i,e){return!!((e==="v4"||!e)&&Pte.test(i)||(e==="v6"||!e)&&Rte.test(i))}class vc extends Br{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ai.string){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.string,received:a.parsedType}),fr}const r=new Ga;let n;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const c=e.data.length>a.value,s=e.data.length<a.value;(c||s)&&(n=this._getOrReturnCtx(e,n),c?xi(n,{code:Xt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&xi(n,{code:Xt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Mte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"email",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")t1||(t1=new RegExp(Ate,"u")),t1.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"emoji",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Tte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"uuid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Ste.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"nanoid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")wte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cuid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")_te.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cuid2",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Cte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"ulid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),xi(n,{validation:"url",code:Xt.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"regex",code:Xt.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Ote(a).test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?zte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?jte(a).test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?kte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"duration",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Fte(e.data,a.version)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"ip",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Bte(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"jwt",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?$te(e.data,a.version)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cidr",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Lte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"base64",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Nte.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"base64url",code:Xt.invalid_string,message:a.message}),r.dirty()):Kr.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(n=>e.test(n),{validation:t,code:Xt.invalid_string,...Ni.errToObj(r)})}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ni.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ni.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ni.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ni.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ni.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ni.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ni.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ni.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ni.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ni.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ni.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ni.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ni.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ni.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ni.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ni.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ni.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ni.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ni.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ni.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ni.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ni.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ni.errToObj(t)})}nonempty(e){return this.min(1,Ni.errToObj(e))}trim(){return new vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}vc.create=i=>new vc({checks:[],typeName:lr.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...wr(i)});function Ute(i,e){const t=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=t>r?t:r,a=Number.parseInt(i.toFixed(n).replace(".","")),c=Number.parseInt(e.toFixed(n).replace(".",""));return a%c/10**n}class xp extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ai.number){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.number,received:a.parsedType}),fr}let r;const n=new Ga;for(const a of this._def.checks)a.kind==="int"?Kr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Ute(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_finite,message:a.message}),n.dirty()):Kr.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ni.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ni.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ni.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ni.toString(t))}setLimit(e,t,r,n){return new xp({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ni.toString(n)}]})}_addCheck(e){return new xp({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ni.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ni.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ni.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ni.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ni.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ni.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ni.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ni.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ni.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Kr.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}xp.create=i=>new xp({checks:[],typeName:lr.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...wr(i)});class Gm extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ai.bigint)return this._getInvalidInput(e);let r;const n=new Ga;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Kr.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return xi(t,{code:Xt.invalid_type,expected:Ai.bigint,received:t.parsedType}),fr}gte(e,t){return this.setLimit("min",e,!0,Ni.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ni.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ni.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ni.toString(t))}setLimit(e,t,r,n){return new Gm({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ni.toString(n)}]})}_addCheck(e){return new Gm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ni.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ni.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ni.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ni.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ni.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Gm.create=i=>new Gm({checks:[],typeName:lr.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...wr(i)});class XE extends Br{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ai.boolean){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.boolean,received:r.parsedType}),fr}return Go(e.data)}}XE.create=i=>new XE({typeName:lr.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...wr(i)});class Q0 extends Br{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ai.date){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.date,received:a.parsedType}),fr}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_date}),fr}const r=new Ga;let n;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Kr.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Q0({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ni.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ni.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Q0.create=i=>new Q0({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:lr.ZodDate,...wr(i)});class KE extends Br{_parse(e){if(this._getType(e)!==Ai.symbol){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.symbol,received:r.parsedType}),fr}return Go(e.data)}}KE.create=i=>new KE({typeName:lr.ZodSymbol,...wr(i)});class QE extends Br{_parse(e){if(this._getType(e)!==Ai.undefined){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.undefined,received:r.parsedType}),fr}return Go(e.data)}}QE.create=i=>new QE({typeName:lr.ZodUndefined,...wr(i)});class JE extends Br{_parse(e){if(this._getType(e)!==Ai.null){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.null,received:r.parsedType}),fr}return Go(e.data)}}JE.create=i=>new JE({typeName:lr.ZodNull,...wr(i)});class _w extends Br{constructor(){super(...arguments),this._any=!0}_parse(e){return Go(e.data)}}_w.create=i=>new _w({typeName:lr.ZodAny,...wr(i)});class e3 extends Br{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Go(e.data)}}e3.create=i=>new e3({typeName:lr.ZodUnknown,...wr(i)});class ku extends Br{_parse(e){const t=this._getOrReturnCtx(e);return xi(t,{code:Xt.invalid_type,expected:Ai.never,received:t.parsedType}),fr}}ku.create=i=>new ku({typeName:lr.ZodNever,...wr(i)});class t3 extends Br{_parse(e){if(this._getType(e)!==Ai.undefined){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.void,received:r.parsedType}),fr}return Go(e.data)}}t3.create=i=>new t3({typeName:lr.ZodVoid,...wr(i)});class Dl extends Br{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==Ai.array)return xi(t,{code:Xt.invalid_type,expected:Ai.array,received:t.parsedType}),fr;if(n.exactLength!==null){const c=t.data.length>n.exactLength.value,s=t.data.length<n.exactLength.value;(c||s)&&(xi(t,{code:c?Xt.too_big:Xt.too_small,minimum:s?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(xi(t,{code:Xt.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(xi(t,{code:Xt.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((c,s)=>n.type._parseAsync(new Fl(t,c,t.path,s)))).then(c=>Ga.mergeArray(r,c));const a=[...t.data].map((c,s)=>n.type._parseSync(new Fl(t,c,t.path,s)));return Ga.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new Dl({...this._def,minLength:{value:e,message:Ni.toString(t)}})}max(e,t){return new Dl({...this._def,maxLength:{value:e,message:Ni.toString(t)}})}length(e,t){return new Dl({...this._def,exactLength:{value:e,message:Ni.toString(t)}})}nonempty(e){return this.min(1,e)}}Dl.create=(i,e)=>new Dl({type:i,minLength:null,maxLength:null,exactLength:null,typeName:lr.ZodArray,...wr(e)});function ep(i){if(i instanceof ws){const e={};for(const t in i.shape){const r=i.shape[t];e[t]=mu.create(ep(r))}return new ws({...i._def,shape:()=>e})}else return i instanceof Dl?new Dl({...i._def,type:ep(i.element)}):i instanceof mu?mu.create(ep(i.unwrap())):i instanceof _p?_p.create(ep(i.unwrap())):i instanceof Fd?Fd.create(i.items.map(e=>ep(e))):i}class ws extends Br{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Kr.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ai.object){const f=this._getOrReturnCtx(e);return xi(f,{code:Xt.invalid_type,expected:Ai.object,received:f.parsedType}),fr}const{status:r,ctx:n}=this._processInputParams(e),{shape:a,keys:c}=this._getCached(),s=[];if(!(this._def.catchall instanceof ku&&this._def.unknownKeys==="strip"))for(const f in n.data)c.includes(f)||s.push(f);const h=[];for(const f of c){const m=a[f],y=n.data[f];h.push({key:{status:"valid",value:f},value:m._parse(new Fl(n,y,n.path,f)),alwaysSet:f in n.data})}if(this._def.catchall instanceof ku){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of s)h.push({key:{status:"valid",value:m},value:{status:"valid",value:n.data[m]}});else if(f==="strict")s.length>0&&(xi(n,{code:Xt.unrecognized_keys,keys:s}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of s){const y=n.data[m];h.push({key:{status:"valid",value:m},value:f._parse(new Fl(n,y,n.path,m)),alwaysSet:m in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of h){const y=await m.key,g=await m.value;f.push({key:y,value:g,alwaysSet:m.alwaysSet})}return f}).then(f=>Ga.mergeObjectSync(r,f)):Ga.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return Ni.errToObj,new ws({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,c;const n=((c=(a=this._def).errorMap)==null?void 0:c.call(a,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:Ni.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ws({...this._def,unknownKeys:"strip"})}passthrough(){return new ws({...this._def,unknownKeys:"passthrough"})}extend(e){return new ws({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ws({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ws({...this._def,catchall:e})}pick(e){const t={};for(const r of Kr.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ws({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Kr.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ws({...this._def,shape:()=>t})}deepPartial(){return ep(this)}partial(e){const t={};for(const r of Kr.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new ws({...this._def,shape:()=>t})}required(e){const t={};for(const r of Kr.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof mu;)a=a._def.innerType;t[r]=a}return new ws({...this._def,shape:()=>t})}keyof(){return BP(Kr.objectKeys(this.shape))}}ws.create=(i,e)=>new ws({shape:()=>i,unknownKeys:"strip",catchall:ku.create(),typeName:lr.ZodObject,...wr(e)});ws.strictCreate=(i,e)=>new ws({shape:()=>i,unknownKeys:"strict",catchall:ku.create(),typeName:lr.ZodObject,...wr(e)});ws.lazycreate=(i,e)=>new ws({shape:i,unknownKeys:"strip",catchall:ku.create(),typeName:lr.ZodObject,...wr(e)});class J0 extends Br{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function n(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return t.common.issues.push(...s.ctx.common.issues),s.result;const c=a.map(s=>new Sc(s.ctx.common.issues));return xi(t,{code:Xt.invalid_union,unionErrors:c}),fr}if(t.common.async)return Promise.all(r.map(async a=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(n);{let a;const c=[];for(const h of r){const f={...t,common:{...t.common,issues:[]},parent:null},m=h._parseSync({data:t.data,path:t.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const s=c.map(h=>new Sc(h));return xi(t,{code:Xt.invalid_union,unionErrors:s}),fr}}get options(){return this._def.options}}J0.create=(i,e)=>new J0({options:i,typeName:lr.ZodUnion,...wr(e)});function Cw(i,e){const t=su(i),r=su(e);if(i===e)return{valid:!0,data:i};if(t===Ai.object&&r===Ai.object){const n=Kr.objectKeys(e),a=Kr.objectKeys(i).filter(s=>n.indexOf(s)!==-1),c={...i,...e};for(const s of a){const h=Cw(i[s],e[s]);if(!h.valid)return{valid:!1};c[s]=h.data}return{valid:!0,data:c}}else if(t===Ai.array&&r===Ai.array){if(i.length!==e.length)return{valid:!1};const n=[];for(let a=0;a<i.length;a++){const c=i[a],s=e[a],h=Cw(c,s);if(!h.valid)return{valid:!1};n.push(h.data)}return{valid:!0,data:n}}else return t===Ai.date&&r===Ai.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class ev extends Br{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(a,c)=>{if(WE(a)||WE(c))return fr;const s=Cw(a.value,c.value);return s.valid?((YE(a)||YE(c))&&t.dirty(),{status:t.value,value:s.data}):(xi(r,{code:Xt.invalid_intersection_types}),fr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,c])=>n(a,c)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ev.create=(i,e,t)=>new ev({left:i,right:e,typeName:lr.ZodIntersection,...wr(t)});class Fd extends Br{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.array)return xi(r,{code:Xt.invalid_type,expected:Ai.array,received:r.parsedType}),fr;if(r.data.length<this._def.items.length)return xi(r,{code:Xt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fr;!this._def.rest&&r.data.length>this._def.items.length&&(xi(r,{code:Xt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((c,s)=>{const h=this._def.items[s]||this._def.rest;return h?h._parse(new Fl(r,c,r.path,s)):null}).filter(c=>!!c);return r.common.async?Promise.all(a).then(c=>Ga.mergeArray(t,c)):Ga.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Fd({...this._def,rest:e})}}Fd.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fd({items:i,typeName:lr.ZodTuple,rest:null,...wr(e)})};class tv extends Br{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.object)return xi(r,{code:Xt.invalid_type,expected:Ai.object,received:r.parsedType}),fr;const n=[],a=this._def.keyType,c=this._def.valueType;for(const s in r.data)n.push({key:a._parse(new Fl(r,s,r.path,s)),value:c._parse(new Fl(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ga.mergeObjectAsync(t,n):Ga.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Br?new tv({keyType:e,valueType:t,typeName:lr.ZodRecord,...wr(r)}):new tv({keyType:vc.create(),valueType:e,typeName:lr.ZodRecord,...wr(t)})}}class i3 extends Br{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.map)return xi(r,{code:Xt.invalid_type,expected:Ai.map,received:r.parsedType}),fr;const n=this._def.keyType,a=this._def.valueType,c=[...r.data.entries()].map(([s,h],f)=>({key:n._parse(new Fl(r,s,r.path,[f,"key"])),value:a._parse(new Fl(r,h,r.path,[f,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const h of c){const f=await h.key,m=await h.value;if(f.status==="aborted"||m.status==="aborted")return fr;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),s.set(f.value,m.value)}return{status:t.value,value:s}})}else{const s=new Map;for(const h of c){const f=h.key,m=h.value;if(f.status==="aborted"||m.status==="aborted")return fr;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),s.set(f.value,m.value)}return{status:t.value,value:s}}}}i3.create=(i,e,t)=>new i3({valueType:e,keyType:i,typeName:lr.ZodMap,...wr(t)});class qm extends Br{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.set)return xi(r,{code:Xt.invalid_type,expected:Ai.set,received:r.parsedType}),fr;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(xi(r,{code:Xt.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(xi(r,{code:Xt.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function c(h){const f=new Set;for(const m of h){if(m.status==="aborted")return fr;m.status==="dirty"&&t.dirty(),f.add(m.value)}return{status:t.value,value:f}}const s=[...r.data.values()].map((h,f)=>a._parse(new Fl(r,h,r.path,f)));return r.common.async?Promise.all(s).then(h=>c(h)):c(s)}min(e,t){return new qm({...this._def,minSize:{value:e,message:Ni.toString(t)}})}max(e,t){return new qm({...this._def,maxSize:{value:e,message:Ni.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}qm.create=(i,e)=>new qm({valueType:i,minSize:null,maxSize:null,typeName:lr.ZodSet,...wr(e)});class r3 extends Br{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}r3.create=(i,e)=>new r3({getter:i,typeName:lr.ZodLazy,...wr(e)});class n3 extends Br{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return xi(t,{received:t.data,code:Xt.invalid_literal,expected:this._def.value}),fr}return{status:"valid",value:e.data}}get value(){return this._def.value}}n3.create=(i,e)=>new n3({value:i,typeName:lr.ZodLiteral,...wr(e)});function BP(i,e){return new bp({values:i,typeName:lr.ZodEnum,...wr(e)})}class bp extends Br{constructor(){super(...arguments),hm.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return xi(t,{expected:Kr.joinValues(r),received:t.parsedType,code:Xt.invalid_type}),fr}if(K0(this,hm,"f")||jP(this,hm,new Set(this._def.values),"f"),!K0(this,hm,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return xi(t,{received:t.data,code:Xt.invalid_enum_value,options:r}),fr}return Go(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return bp.create(e,{...this._def,...t})}exclude(e,t=this._def){return bp.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}hm=new WeakMap;bp.create=BP;class s3 extends Br{constructor(){super(...arguments),pm.set(this,void 0)}_parse(e){const t=Kr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ai.string&&r.parsedType!==Ai.number){const n=Kr.objectValues(t);return xi(r,{expected:Kr.joinValues(n),received:r.parsedType,code:Xt.invalid_type}),fr}if(K0(this,pm,"f")||jP(this,pm,new Set(Kr.getValidEnumValues(this._def.values)),"f"),!K0(this,pm,"f").has(e.data)){const n=Kr.objectValues(t);return xi(r,{received:r.data,code:Xt.invalid_enum_value,options:n}),fr}return Go(e.data)}get enum(){return this._def.values}}pm=new WeakMap;s3.create=(i,e)=>new s3({values:i,typeName:lr.ZodNativeEnum,...wr(e)});class iv extends Br{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ai.promise&&t.common.async===!1)return xi(t,{code:Xt.invalid_type,expected:Ai.promise,received:t.parsedType}),fr;const r=t.parsedType===Ai.promise?t.data:Promise.resolve(t.data);return Go(r.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}iv.create=(i,e)=>new iv({type:i,typeName:lr.ZodPromise,...wr(e)});class wp extends Br{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:c=>{xi(r,c),c.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){const c=n.transform(r.data,a);if(r.common.async)return Promise.resolve(c).then(async s=>{if(t.value==="aborted")return fr;const h=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return h.status==="aborted"?fr:h.status==="dirty"||t.value==="dirty"?dm(h.value):h});{if(t.value==="aborted")return fr;const s=this._def.schema._parseSync({data:c,path:r.path,parent:r});return s.status==="aborted"?fr:s.status==="dirty"||t.value==="dirty"?dm(s.value):s}}if(n.type==="refinement"){const c=s=>{const h=n.refinement(s,a);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?fr:(s.status==="dirty"&&t.dirty(),c(s.value),{status:t.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?fr:(s.status==="dirty"&&t.dirty(),c(s.value).then(()=>({status:t.value,value:s.value}))))}if(n.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!vp(c))return c;const s=n.transform(c.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>vp(c)?Promise.resolve(n.transform(c.value,a)).then(s=>({status:t.value,value:s})):c);Kr.assertNever(n)}}wp.create=(i,e,t)=>new wp({schema:i,typeName:lr.ZodEffects,effect:e,...wr(t)});wp.createWithPreprocess=(i,e,t)=>new wp({schema:e,effect:{type:"preprocess",transform:i},typeName:lr.ZodEffects,...wr(t)});class mu extends Br{_parse(e){return this._getType(e)===Ai.undefined?Go(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mu.create=(i,e)=>new mu({innerType:i,typeName:lr.ZodOptional,...wr(e)});class _p extends Br{_parse(e){return this._getType(e)===Ai.null?Go(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_p.create=(i,e)=>new _p({innerType:i,typeName:lr.ZodNullable,...wr(e)});class Tw extends Br{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ai.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Tw.create=(i,e)=>new Tw({innerType:i,typeName:lr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...wr(e)});class Sw extends Br{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return X0(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Sc(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Sc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Sw.create=(i,e)=>new Sw({innerType:i,typeName:lr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...wr(e)});class a3 extends Br{_parse(e){if(this._getType(e)!==Ai.nan){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.nan,received:r.parsedType}),fr}return{status:"valid",value:e.data}}}a3.create=i=>new a3({typeName:lr.ZodNaN,...wr(i)});class Vte extends Br{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class j2 extends Br{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?fr:a.status==="dirty"?(t.dirty(),dm(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?fr:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,t){return new j2({in:e,out:t,typeName:lr.ZodPipeline})}}class Ew extends Br{_parse(e){const t=this._def.innerType._parse(e),r=n=>(vp(n)&&(n.value=Object.freeze(n.value)),n);return X0(t)?t.then(n=>r(n)):r(t)}unwrap(){return this._def.innerType}}Ew.create=(i,e)=>new Ew({innerType:i,typeName:lr.ZodReadonly,...wr(e)});var lr;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(lr||(lr={}));const Vs=vc.create,Hte=xp.create,Gte=_w.create;ku.create;const rv=Dl.create,Ec=ws.create;J0.create;ev.create;Fd.create;const qte=tv.create,Wte=bp.create;iv.create;mu.create;_p.create;const Yte=Ec({name:Vs().min(1,{message:be.t("Name is required")}),templateId:Hte().min(1,{message:be.t("Template is required")}),covariates:rv(Ec({name:Vs().min(1,{message:be.t("Covariate name is required")}).regex(/^\S*$/,{message:be.t("Covariate name cannot contain spaces")})})),userOptions:qte(Gte())}),Zte=()=>{const{route:i}=Ru(),{modelTemplates:e,isLoading:t}=bP({route:i}),[r,n]=Ae.useState(""),[a,c]=Ae.useState(""),{control:s,handleSubmit:h,formState:{errors:f},watch:m,setValue:y}=Kv({resolver:Qv(Yte),defaultValues:{name:"",templateId:0,covariates:[],userOptions:{}}}),{fields:g,append:b,remove:v}=tte({control:s,name:"covariates"}),_=m("templateId"),T=Ae.useMemo(()=>e==null?void 0:e.find(E=>E.id===_),[e,_]),k=(T==null?void 0:T.requiredCovariates)||[];return{control:s,handleSubmit:h,errors:f,watch:m,setValue:y,fields:g,append:b,remove:v,newCovariate:r,setNewCovariate:n,covariateError:a,setCovariateError:c,handleAddCovariate:()=>{if(r.trim()){const E=r.trim();if(/\s/.test(E)){c(be.t("Covariate name cannot contain spaces"));return}const A=k.includes(E),M=g.some(S=>m(`covariates.${g.indexOf(S)}.name`)===E);if(!A&&!M)b({name:E}),n(""),c("");else{c(be.t("Covariate already exists"));return}}},currentTemplate:T,requiredCovariates:k,modelTemplates:e,isLoadingTemplates:t,watchedTemplateId:_}},Xte="_formContainer_efg0v_1",Kte="_formTitle_efg0v_9",Qte="_formField_efg0v_14",Jte="_errorText_efg0v_18",eie="_covariate_efg0v_24",tie="_covariateInput_efg0v_30",iie="_covariatesList_efg0v_35",rie="_covariateItem_efg0v_39",nie="_covariateItemText_efg0v_48",sie="_actionButtons_efg0v_52",aie="_requiredCovariateItem_efg0v_58",oie="_requiredLabel_efg0v_63",Ms={formContainer:Xte,formTitle:Kte,formField:Qte,errorText:Jte,covariate:eie,covariateInput:tie,covariatesList:iie,covariateItem:rie,covariateItemText:nie,actionButtons:sie,requiredCovariateItem:aie,requiredLabel:oie},lie=({onSubmit:i,isSubmitting:e})=>{const{control:t,handleSubmit:r,errors:n,watch:a,setValue:c,fields:s,remove:h,newCovariate:f,setNewCovariate:m,covariateError:y,setCovariateError:g,handleAddCovariate:b,currentTemplate:v,requiredCovariates:_,modelTemplates:T,isLoadingTemplates:k,watchedTemplateId:w}=Zte(),E=A=>{i(A)};return z.jsxs("div",{className:Ms.formContainer,children:[z.jsx("h2",{className:Ms.formTitle,children:be.t("Configure Model")}),z.jsxs("form",{onSubmit:r(E),children:[z.jsxs("div",{className:Ms.formField,children:[z.jsx(Sa,{children:be.t("Model Template")}),z.jsx(Uo,{name:"templateId",control:t,render:({field:A})=>z.jsx(Ll,{selected:A.value>0?A.value.toString():"",loading:k,error:!!n.templateId,placeholder:be.t("Select a model template"),disabled:k||!T,onChange:({selected:M})=>A.onChange(M?Number(M):0),children:T==null?void 0:T.map(M=>z.jsx(Cs,{label:M.displayName??M.name,value:M.id.toString()},M.id))})}),n.templateId&&z.jsx("p",{className:Ms.errorText,children:n.templateId.message})]}),z.jsxs("div",{className:Ms.formField,children:[z.jsx(Uo,{name:"name",control:t,render:({field:A})=>z.jsx(Rl,{label:be.t("Configured Model Name"),value:A.value,error:!!n.name,disabled:!w,placeholder:be.t('Enter something to identify your model, e.g. "Debug" or "Malaria"'),onChange:({value:M})=>A.onChange(M),helpText:A.value?be.t("Your model will be saved as {{modelName}} [{{configuredModelName}}]",{modelName:v==null?void 0:v.displayName,configuredModelName:A.value,escape:":"}):void 0})}),n.name&&z.jsx("p",{className:Ms.errorText,children:n.name.message})]}),z.jsx(fte,{control:t,setValue:c,currentTemplate:v,disabled:!w}),z.jsxs("div",{className:Ms.formField,children:[z.jsx(Sa,{children:be.t("Additional Covariates")}),z.jsxs("div",{className:Ms.covariate,children:[z.jsx("div",{className:Ms.covariateInput,children:z.jsx(Rl,{value:f,placeholder:be.t("Enter covariate name"),onChange:({value:A})=>{m(A||""),y&&g("")},disabled:!w,error:!!y})}),z.jsx(Ci,{onClick:b,disabled:!f.trim(),children:be.t("Add")})]}),z.jsxs("div",{className:Ms.covariatesList,children:[_.map((A,M)=>z.jsxs("div",{className:`${Ms.covariateItem} ${Ms.requiredCovariateItem}`,children:[z.jsx("span",{className:Ms.covariateItemText,children:A}),z.jsx("span",{className:Ms.requiredLabel,children:be.t("Required")})]},`required-${M}`)),s.map((A,M)=>z.jsxs("div",{className:Ms.covariateItem,children:[z.jsx("span",{className:Ms.covariateItemText,children:a(`covariates.${M}.name`)}),z.jsx(Ci,{onClick:()=>h(M),small:!0,children:be.t("Remove")})]},A.id))]}),y&&z.jsx("p",{className:Ms.errorText,children:y}),n.covariates&&z.jsx("p",{className:Ms.errorText,children:be.t("Please check covariates")})]}),z.jsx("div",{className:Ms.actionButtons,children:z.jsx(Wa,{children:z.jsx(Ci,{primary:!0,loading:e,type:"submit",children:be.t("Configure Model")})})})]})]})},cie=()=>{const i=Ws(),e=oo(),{show:t}=ha(be.t("Model configured"),{success:!0}),{show:r}=ha(be.t("Failed to configure model"),{error:!0});return Vl({mutationFn:n=>qs.addConfiguredModelCrudConfiguredModelsPost({modelTemplateId:n.templateId,name:n.name,additionalContinuousCovariates:n.covariates.map(a=>a.name),userOptionValues:n.userOptions}),onSuccess:()=>{i.invalidateQueries({queryKey:["models"]}),e("/settings"),t()},onError:n=>{console.error(n),r()}})},uie=()=>{const{route:i}=Ru(),{modelTemplates:e,error:t,isLoading:r}=bP({route:i}),{mutate:n,isLoading:a}=cie(),c=oo(),s=f=>{n(f)},h=()=>r?z.jsx("div",{className:Vy.loadingContainer,children:z.jsx(ka,{})}):t?z.jsxs("div",{className:Vy.errorContainer,children:[z.jsx("p",{children:be.t("Error loading model templates:")}),z.jsx("p",{children:t instanceof Error?t.message:be.t("Unknown error")})]}):!e||e.length===0?z.jsx("div",{className:Vy.emptyContainer,children:z.jsx("p",{children:be.t("No model templates found.")})}):z.jsx("div",{children:z.jsx(lie,{onSubmit:s,isSubmitting:a})});return z.jsxs("div",{children:[z.jsx(Eu,{pageTitle:be.t("Model Templates"),pageDescription:be.t("Configure new models based on generic model templates")}),z.jsx(Ci,{onClick:()=>c("/settings"),small:!0,icon:z.jsx(Xm,{}),className:Vy.backButton,children:be.t("Back to settings")}),h()]})},die=()=>z.jsx(uie,{}),hie="_drawerWrapper_g5ang_1",pie={drawerWrapper:hie},fie="_formWrapper_1wb8p_1",mie="_newPredictionForm_1wb8p_8",gie="_newPredictionTitle_1wb8p_12",i1={formWrapper:fie,newPredictionForm:mie,newPredictionTitle:gie},yie=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,r]=Ae.useState([]),[n,a]=Ae.useState([]),[c,s]=Ae.useState([]),[h,f]=Ae.useState(void 0),[m,y]=Ae.useState(""),[g,b]=Ae.useState(void 0);return Ae.useEffect(()=>{if(g==null)return;const v=g.covariates.map(_=>({feature:_.name,origin:"dataItem",dataSource:""}));r(v)},[g]),z.jsx(z.Fragment,{children:z.jsxs("div",{className:i1.newPredictionForm,children:[z.jsxs("div",{className:i1.newPredictionTitle,children:[z.jsx("h2",{children:"New prediction"}),z.jsx(Ci,{icon:z.jsx(jw,{}),onClick:i})]}),z.jsxs("div",{className:i1.formWrapper,children:[z.jsx(Rl,{autoComplete:"",label:"Name of prediction",value:m,onChange:v=>y(v.value),placeholder:be.t("Prediction for Northern Province")}),z.jsx(xP,{selectedModel:g,setSelectedModel:b}),z.jsx(gP,{setDataLayers:r,datasetLayers:t,predictMode:!0}),z.jsx(eI,{setTimePeriods:s}),z.jsx(tI,{orgUnits:n,setOrgUnits:a,orgUnitLevel:h,setOrgUnitLevel:f}),z.jsx(fP,{onDrawerSubmit:e,selectedModel:g,name:m,dataLayers:t,onSendAction:"predict",orgUnitLevel:h,selectedPeriodItems:c,selectedOrgUnits:n})]})]})})},vie=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(n2,{open:e,onClose:i,direction:"right",size:r,children:z.jsx("div",{className:pie.drawerWrapper,children:z.jsx(yie,{onDrawerClose:i,onDrawerSubmit:t})})})})},xie=()=>{const[i,e]=Ae.useState(!1),[t,r]=Ae.useState(!1),n=()=>{r(!1),e(!1)};return Ae.useEffect(()=>{r(!0)},[t]),z.jsxs("div",{children:[z.jsx(Eu,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),z.jsx(vie,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:n}),t&&z.jsx(yw,{type:"predictions"})]})},bie=({children:i})=>{const{baseUrl:e}=Zm(),[t,r]=Ae.useState(!1);return Ae.useEffect(()=>{Oi.WITH_CREDENTIALS=!0,Oi.BASE=e+"/api/routes/chap/run",r(!0)},[e]),t?z.jsx(z.Fragment,{children:i}):z.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:z.jsx(ka,{})})},wie="_settingsContainer_11gky_1",_ie={settingsContainer:wie},Cie="_container_1o19c_1",Tie="_header_1o19c_5",Sie="_settingsContainer_1o19c_16",Eie="_loaderContainer_1o19c_22",kie="_mutedText_1o19c_32",Mie="_routeInfo_1o19c_43",Aie="_routeInfoHeader_1o19c_50",Iie="_infoGrid_1o19c_64",Pie="_label_1o19c_71",Die="_value_1o19c_76",Rie="_authorities_1o19c_82",Lie="_authority_1o19c_88",on={container:Cie,header:Tie,settingsContainer:Sie,loaderContainer:Eie,mutedText:kie,routeInfo:Mie,routeInfoHeader:Aie,infoGrid:Iie,label:Pie,value:Die,authorities:Rie,authority:Lie},Nie="F_CHAP_MODELING_APP",$P=({onSuccess:i,onError:e}={})=>{const t=Ws(),r=Ud(),{show:n}=ha(be.t("Error saving route"),{critical:!0}),{show:a}=ha(be.t("Route saved successfully"),{success:!0}),c=Vl(async s=>{const{id:h,url:f}=s;if(h){const m=["routes","chap"],y=t.getQueryData(m);if(!y)throw new Error(`Route data not found in cache for key ${m}.`);const g=y.routes.find(v=>v.id===h);if(!g)throw new Error(`Route with id ${h} not found in cache for update.`);const b={resource:"routes",type:"update",id:h,data:{...g||{},url:f}};return r.mutate(b)}else{const m={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:f,authorities:[Nie],headers:{"Content-Type":"application/json"}}};return r.mutate(m)}},{onSuccess:()=>{a(),t.invalidateQueries(["routes"]),i==null||i()},onError:s=>{n(),console.error("Error saving route:",s),e==null||e(s)}});return{saveRoute:c.mutate,isSaving:c.isLoading,error:c.error}},zie=Ec({url:Vs().url({message:be.t("Invalid URL format")}).min(1,{message:be.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:be.t("URL must end with a double wildcard (/**)")})}),UP=({onClose:i,onSubmit:e,isLoading:t,initialUrl:r="",modalTitle:n,submitButtonText:a})=>{const{control:c,handleSubmit:s,formState:{errors:h}}=Kv({resolver:Qv(zie),shouldFocusError:!1,defaultValues:{url:r}}),f=m=>e(m);return z.jsx(ua,{onClose:i,dataTest:"route-form-modal",children:z.jsxs("form",{onSubmit:s(f),children:[z.jsx(Mo,{children:n}),z.jsxs(so,{children:[z.jsx(Sa,{htmlFor:"url",children:be.t("CHAP Core URL")}),z.jsx(Uo,{name:"url",control:c,render:({field:m})=>z.jsx($d,{...m,type:"text",error:!!h.url,onChange:y=>m.onChange(y.value),dataTest:"route-url-input"})}),h.url?z.jsx("p",{className:on.mutedText,children:h.url.message}):null]}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:be.t("Cancel")}),z.jsx(Ci,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:a})]})})]})})},jie=()=>{const[i,e]=Ae.useState(!1),{saveRoute:t,isSaving:r}=$P({onSuccess:()=>{e(!1)}}),n=s=>{t({url:s.url})},a=()=>{e(!0)},c=()=>{e(!1)};return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:on.settingsContainer,children:z.jsxs("div",{className:on.routeInfo,children:[z.jsx("div",{className:on.routeInfoHeader,children:z.jsx("h3",{children:be.t("Route configuration")})}),z.jsxs("div",{className:on.infoGrid,children:[z.jsx("span",{className:on.label,children:be.t("Status")}),z.jsx("span",{className:on.mutedText,children:be.t("No route found.")})]}),z.jsx("div",{style:{marginTop:"16px"},children:z.jsx(Ci,{onClick:a,icon:z.jsx(uv,{}),small:!0,loading:r,dataTest:"add-route-button",children:be.t("Add route")})})]})}),i&&z.jsx(UP,{onClose:c,onSubmit:n,isLoading:r,initialUrl:"",modalTitle:be.t("Add route"),submitButtonText:be.t("Add")})]})},Oie=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:r}=$P({onSuccess:()=>{e()}}),n=a=>{t({id:i.id,url:a.url})};return z.jsx(UP,{onClose:e,onSubmit:n,isLoading:r,initialUrl:i.url,modalTitle:be.t("Edit route"),submitButtonText:be.t("Save")})},Fie=({id:i,onSuccess:e,onError:t})=>{const r=Ud(),n=Ws(),{show:a}=ha(be.t("Error deleting route"),{critical:!0}),{show:c}=ha(be.t("Route deleted successfully"),{success:!0}),s={resource:"routes",id:i,type:"delete"},{mutate:h,isLoading:f}=Vl(()=>r.mutate(s),{onSuccess:()=>{c(),n.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:m=>{a(),console.error("Error deleting route:",m),t==null||t(m)}});return{deleteRoute:h,isDeleting:f}},Bie=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:r}=Fie({id:i,onSuccess:()=>{e()}});return z.jsxs(ua,{onClose:e,small:!0,children:[z.jsx(Mo,{children:be.t("Delete route")}),z.jsx(so,{children:z.jsx("p",{children:be.t("Are you sure you want to delete this route?")})}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:e,secondary:!0,children:be.t("Cancel")}),z.jsx(Ci,{onClick:()=>t(),destructive:!0,loading:r,children:be.t("Delete")})]})})]})},$ie="_routeActions_1etwp_2",Uie={routeActions:$ie},Vie=({route:i})=>{const e=Ws(),[t,r]=Ae.useState(!1),[n,a]=Ae.useState(!1),[c,s]=Ae.useState(!1),[h,f]=Ae.useState(!1),m=Ae.useRef(null);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:Uie.routeActions,children:[z.jsx(Ci,{icon:z.jsx(b1,{}),small:!0,onClick:()=>a(!0),children:be.t("Sharing")}),z.jsxs("div",{ref:m,children:[z.jsx(Ci,{small:!0,onClick:()=>r(!t),children:z.jsx(Qm,{})}),t&&z.jsx(Wm,{onBackdropClick:()=>r(!1),children:z.jsx(Bd,{placement:"bottom-end",reference:m,children:z.jsxs(Ow,{children:[z.jsx(es,{dense:!0,onClick:()=>{f(!0),r(!1)},label:be.t("Edit"),icon:z.jsx(Vw,{})}),z.jsx(es,{dense:!0,onClick:()=>{a(!0),r(!1)},label:be.t("Sharing"),icon:z.jsx(b1,{})}),z.jsx(es,{dense:!0,destructive:!0,onClick:()=>{s(!0),r(!1)},label:be.t("Delete"),icon:z.jsx(Km,{})})]})})})]})]}),n&&z.jsx(sA,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),a(!1)}}),c&&z.jsx(Bie,{routeId:i.id,onClose:()=>s(!1)}),h&&z.jsx(Oie,{route:i,onClose:()=>f(!1)})]})},Hie=({route:i})=>Ae.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?z.jsx(da,{warning:!0,title:be.t("Public access"),children:be.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,Gie=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:r}=Np({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:r}},qie=({authority:i})=>{const{user:e,isLoading:t,error:r}=Gie(),n=Ae.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:Ae.useMemo(()=>{if(e)return n?!0:Array.isArray(i)?i.some(c=>e.authorities.includes(c)):e.authorities.includes(i)},[e,i,n]),isSuperUser:n,isLoading:t,error:r}},Qf=({children:i})=>z.jsx(Ym,{children:z.jsxs("div",{className:on.container,children:[z.jsx("div",{className:on.header,children:z.jsx("h2",{children:be.t("Route settings")})}),i]})}),Wie="F_ROUTE_PRIVATE_ADD",Yie="F_ROUTE_PUBLIC_ADD",Zie=()=>{const{route:i,isLoading:e,error:t}=Ru(),{hasAuthority:r,isLoading:n}=qie({authority:[Wie,Yie]});return Ae.useEffect(()=>{t&&console.error(t)},[t]),e||n?z.jsx(Qf,{children:z.jsx("div",{className:on.loaderContainer,children:z.jsx(ka,{})})}):t?z.jsx(Qf,{children:z.jsxs("div",{className:on.loaderContainer,children:[z.jsx("p",{className:on.mutedText,children:be.t("There was an error loading the route settings. Please try to reload the page.")}),z.jsx("p",{className:on.mutedText,children:be.t("If the problem persists, please contact your system administrator.")})]})}):r?i?z.jsx(Qf,{children:z.jsxs("div",{className:on.settingsContainer,children:[z.jsx(Hie,{route:i}),z.jsxs("div",{className:on.routeInfo,children:[z.jsxs("div",{className:on.routeInfoHeader,children:[z.jsx("h3",{children:be.t("Route configuration")}),z.jsx(Vie,{route:i})]}),z.jsxs("div",{className:on.infoGrid,children:[z.jsx("span",{className:on.label,children:be.t("Name")}),z.jsx("span",{className:on.value,children:i.displayName}),z.jsx("span",{className:on.label,children:be.t("Code")}),z.jsx("span",{className:on.value,children:i.code}),z.jsx("span",{className:on.label,children:be.t("URL")}),z.jsx("span",{className:on.value,children:i.url}),i.authorities.length>0?z.jsxs(z.Fragment,{children:[z.jsx("span",{className:on.label,children:be.t("Authorities")}),z.jsx("div",{className:on.authorities,children:i.authorities.map((a,c)=>z.jsx("span",{className:on.authority,children:a},c))})]}):null]})]})]})}):z.jsx(Qf,{children:z.jsx(jie,{})}):z.jsx(Qf,{children:z.jsxs("div",{className:on.loaderContainer,children:[z.jsx("p",{className:on.mutedText,children:be.t("You do not have permission to add or modify routes.")}),z.jsx("p",{className:on.mutedText,children:be.t("If you think this is an error, please contact your system administrator.")})]})})},Xie="_container_18e5w_1",Kie="_header_18e5w_5",Qie="_loaderContainer_18e5w_16",Jie="_mutedText_18e5w_26",ere="_info_18e5w_31",tre="_infoHeader_18e5w_38",ire="_settingsContainer_18e5w_52",rre="_infoGrid_18e5w_58",nre="_label_18e5w_65",sre="_value_18e5w_70",$s={container:Xie,header:Kie,loaderContainer:Qie,mutedText:Jie,info:ere,infoHeader:tre,settingsContainer:ire,infoGrid:rre,label:nre,value:sre},O2=({route:i})=>{const{data:e,error:t,isLoading:r}=Vo({queryKey:["systemInfo",i==null?void 0:i.url],queryFn:()=>_I.systemInfoSystemInfoGet(),enabled:!!i,staleTime:3e5,cacheTime:3e5,retry:0});return{status:e,error:t,isLoading:r}},are=()=>{const{route:i}=Ru(),{data:e,isLoading:t,error:r}=Vo({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(n=>n.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:r||!e?z.jsx(da,{title:be.t("Your server might not be secure"),children:z.jsx("span",{className:$s.mutedText,children:be.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):z.jsx(z.Fragment,{children:z.jsx(da,{error:!0,title:be.t("Your server is not secure"),children:z.jsx("span",{className:$s.mutedText,children:be.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},r1=({children:i})=>z.jsx(Ym,{children:z.jsxs("div",{className:$s.container,children:[z.jsx("div",{className:$s.header,children:z.jsx("h2",{children:be.t("CHAP settings")})}),i]})}),ore=({route:i})=>{const{status:e,error:t,isLoading:r}=O2({route:i});return Ae.useEffect(()=>{t&&console.error(t)},[t]),r?z.jsx(r1,{children:z.jsx("div",{className:$s.loaderContainer,children:z.jsx(ka,{})})}):t||!e?z.jsx(r1,{children:z.jsx("div",{children:z.jsx(da,{error:!0,title:be.t("An error occurred while connecting to the CHAP server."),className:$s.mutedText,children:be.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):z.jsx(r1,{children:z.jsxs("div",{className:$s.settingsContainer,children:[z.jsx(are,{}),z.jsxs("div",{className:$s.info,children:[z.jsx("div",{className:$s.infoHeader,children:z.jsx("h3",{children:be.t("Server information")})}),z.jsxs("div",{className:$s.infoGrid,children:[e.chap_core_version&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:$s.label,children:be.t("CHAP Version")}),z.jsx("span",{className:$s.value,children:e.chap_core_version})]}),e.python_version&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:$s.label,children:be.t("Python Version")}),z.jsx("span",{className:$s.value,children:e.python_version})]}),e.os&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:$s.label,children:be.t("Operating System")}),z.jsx("span",{className:$s.value,children:e.os})]}),z.jsx("span",{className:$s.label,children:be.t("Status")}),z.jsx("span",{className:$s.value,style:{color:ze.green600},children:be.t("Connected")})]})]})]})})},lre="_container_15df0_1",cre="_header_15df0_5",ure="_loaderContainer_15df0_16",dre="_mutedText_15df0_26",hre="_info_15df0_31",pre="_infoHeader_15df0_38",fre="_settingsContainer_15df0_52",mre="_infoGrid_15df0_58",gre="_label_15df0_65",yre="_value_15df0_70",bl={container:lre,header:cre,loaderContainer:ure,mutedText:dre,info:hre,infoHeader:pre,settingsContainer:fre,infoGrid:mre,label:gre,value:yre},Jv=()=>{const{data:i,error:e,isLoading:t}=Vo({queryKey:["models"],queryFn:()=>qs.listModelsCrudModelsGet(),staleTime:1/0,cacheTime:1/0,retry:0});return{models:i,error:e,isLoading:t}},n1=({children:i})=>z.jsx(Ym,{children:z.jsxs("div",{className:bl.container,children:[z.jsx("div",{className:bl.header,children:z.jsx("h2",{children:be.t("Model settings")})}),i]})}),vre=()=>{const{models:i,error:e,isLoading:t}=Jv(),r=oo();if(Ae.useEffect(()=>{e&&console.error(e)},[e]),t)return z.jsx(n1,{children:z.jsx("div",{className:bl.loaderContainer,children:z.jsx(ka,{})})});if(e)return z.jsx(n1,{children:z.jsx("div",{children:z.jsx(da,{error:!0,title:be.t("An error occurred while loading models."),className:bl.mutedText,children:be.t("Please try to reload the page. If the problem persists, contact your system administrator.")})})});const n=()=>{r("/settings/models")};return z.jsx(n1,{children:z.jsxs("div",{className:bl.settingsContainer,children:[z.jsx(da,{title:be.t("Model templates"),children:be.t("Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.")}),z.jsxs("div",{className:bl.info,children:[z.jsxs("div",{className:bl.infoHeader,children:[z.jsx("h3",{children:be.t("Configured models")}),z.jsx(Ci,{small:!0,onClick:n,icon:z.jsx(Gw,{}),children:be.t("Configure")})]}),z.jsxs("div",{className:bl.infoGrid,children:[z.jsx("span",{className:bl.label,children:be.t("Models configured")}),z.jsx("span",{className:bl.value,children:(i==null?void 0:i.length)||0})]})]})]})})},xre=()=>{const{route:i}=Ru();return z.jsxs("div",{className:_ie.settingsContainer,children:[z.jsx(Zie,{}),i&&z.jsx(ore,{route:i}),i&&z.jsx(vre,{})]})},bre=function(){return null},wre="_asideWrapper_35hxr_11",_re="_collapsed_35hxr_18",Cre="_iconWrapper_35hxr_33",Tre="_collapseButton_35hxr_53",Jf={asideWrapper:wre,collapsed:_re,iconWrapper:Cre,collapseButton:Tre},Sre="_active_1ej51_129",Ja={"sidenav-wrap":"_sidenav-wrap_1ej51_22","sidenav-items":"_sidenav-items_1ej51_40","sidenav-parent":"_sidenav-parent_1ej51_48","sidenav-parent-chevron":"_sidenav-parent-chevron_1ej51_83","parent-is-open":"_parent-is-open_1ej51_89","sidenav-link":"_sidenav-link_1ej51_94","sidenav-link-disabled":"_sidenav-link-disabled_1ej51_120",active:Sre,"sidenav-item-icon":"_sidenav-item-icon_1ej51_144","sidenav-parent-has-icon":"_sidenav-parent-has-icon_1ej51_154"},Ere=({children:i,className:e})=>z.jsx("nav",{"data-test":"sidenav",className:ir(Ja["sidenav-wrap"],e),children:i}),kre=({children:i})=>z.jsx("ul",{className:Ja["sidenav-items"],children:i}),Mre=({label:i,icon:e,disabled:t,children:r,open:n,onClick:a})=>z.jsx(z.Fragment,{children:z.jsxs("li",{className:ir(Ja["sidenav-parent"],{[Ja["sidenav-parent-has-icon"]]:e,[Ja["parent-is-open"]]:n}),children:[z.jsxs("button",{onClick:a,disabled:t,children:[e&&z.jsx("span",{className:Ja["sidenav-item-icon"],children:e}),z.jsx("span",{className:Ja["sidenav-parent-label"],children:i}),z.jsx("span",{className:Ja["sidenav-parent-chevron"],children:z.jsx(hv,{})})]}),n&&z.jsx("ul",{className:Ja["sidenav-submenu"],children:r})]})}),Are=({children:i,disabled:e})=>z.jsx("li",{className:ir(Ja["sidenav-link"],{[Ja["sidenav-link-disabled"]]:e}),children:i}),Ire=({icon:i,active:e,disabled:t,children:r,to:n,LinkComponent:a,label:c,end:s})=>{const h=a?z.jsxs(a,{to:n,end:s,children:[i&&z.jsx("span",{className:Ja["sidenav-item-icon"],children:i}),c]}):z.jsxs("a",{href:n,className:ir({[Ja.active]:e}),children:[i&&z.jsx("span",{className:Ja["sidenav-item-icon"],children:i}),c]});return z.jsx(Are,{disabled:t,children:he.Children.count(r)>0?r:h})},Sm=({to:i,label:e,disabled:t,end:r})=>z.jsx(Ire,{to:i,disabled:t,LinkComponent:zA,label:e,end:r}),Pre=({label:i,links:e=[],initiallyOpen:t=!0})=>{const[r,n]=Ae.useState(t),a=()=>{n(!r)};return e.length===1?z.jsx(Sm,{to:e[0].to,label:e[0].label,end:!0}):z.jsx(Mre,{label:i,open:r,onClick:a,children:e.map(({to:c,label:s})=>z.jsx(Sm,{to:c,label:s,end:!0},s))})},Dre=({className:i,hideSidebar:e})=>{const[t,r]=Ae.useState(!1);return Ae.useEffect(()=>{e!==void 0&&r(e)},[e]),z.jsxs("aside",{className:ir(Jf.asideWrapper,i,{[Jf.collapsed]:t}),children:[z.jsx(Ere,{children:z.jsxs(kre,{children:[z.jsx(Pre,{label:be.t("Evaluate"),links:[{label:be.t("Overview"),to:"/evaluate"},{label:be.t("Compare"),to:"/evaluate/compare"}]}),z.jsx(Sm,{to:"/predict",label:be.t("Predict")}),z.jsx(Sm,{to:"/jobs",label:be.t("Jobs")}),z.jsx(Sm,{to:"/settings",label:be.t("Settings")})]})}),z.jsx("button",{className:Jf.collapseButton,type:"button",onClick:()=>r(!t),children:z.jsx("div",{className:ir(Jf.iconWrapper,{[Jf.collapsed]:t}),children:z.jsx(M3,{})})})]})},Rre="_wrapper_mpm4i_8",Lre="_main_mpm4i_18",Nre="_sidebar_mpm4i_26",zre="_hide_mpm4i_30",nv={wrapper:Rre,main:Lre,sidebar:Nre,hide:zre},jre=({children:i,sidebar:e})=>z.jsxs("div",{className:nv.wrapper,children:[e,z.jsx("div",{className:nv.main,children:i})]}),Ore=({children:i,hideSidebar:e})=>z.jsx(jre,{sidebar:z.jsx(Dre,{hideSidebar:e,className:ir(nv.sidebar,{[nv.hide]:e})}),children:i}),Fre=()=>z.jsx(Ore,{children:z.jsx(nw,{})}),Bre="_loadingContainer_111ob_1",$re="_noRouteContainer_111ob_8",Ure="_noRouteContent_111ob_15",Vre="_noRouteTitle_111ob_22",Hre="_noRouteText_111ob_31",Gre="_noRouteLink_111ob_38",Wh={loadingContainer:Bre,noRouteContainer:$re,noRouteContent:Ure,noRouteTitle:Vre,noRouteText:Hre,noRouteLink:Gre},qre=()=>z.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),z.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),z.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),z.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),z.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),z.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),z.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),z.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),z.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),z.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),Wre=({children:i})=>{const{route:e,isLoading:t}=Ru(),r=oo();return t?z.jsx("div",{className:Wh.loadingContainer,children:z.jsx(ka,{})}):e?i:z.jsx("div",{className:Wh.noRouteContainer,children:z.jsxs("div",{className:Wh.noRouteContent,children:[z.jsx(qre,{}),z.jsx("h1",{className:Wh.noRouteTitle,children:be.t("Get started with the Modeling app")}),z.jsxs("div",{className:Wh.noRouteText,children:[z.jsx("p",{children:be.t("To get started, create a route that points to a running CHAP server.")}),z.jsx("p",{children:be.t("Route and servers are configured on the settings page.")}),z.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:Wh.noRouteLink,children:be.t("Learn more about Modeling and CHAP")})]}),z.jsx(Ci,{onClick:()=>r("/settings"),children:be.t("Configure settings")})]})})},Yre="_infoAboutReportingBugs_7cpvy_1",Zre="_infoAboutReportingBugsInner_7cpvy_7",Xre="_icon_7cpvy_17",s1={infoAboutReportingBugs:Yre,infoAboutReportingBugsInner:Zre,icon:Xre},Kre=()=>{const[i,e]=Ae.useState(!0);return z.jsx("div",{className:s1.infoAboutReportingBugs,children:i&&z.jsxs("div",{className:s1.infoAboutReportingBugsInner,style:{maxWidth:"1400px"},children:[z.jsxs("div",{children:[z.jsx("span",{className:s1.icon,children:z.jsx(q3,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",z.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),z.jsx("div",{children:z.jsx(Ci,{small:!0,onClick:()=>e(!i),children:z.jsx(C3,{})})})]})})},Qre="_warningMargin_odnwa_1",Jre="_warningMarginInner_odnwa_6",ene="_resultDescription_odnwa_11",em={warningMargin:Qre,warningMarginInner:Jre,resultDescription:ene},tne="1.0.9",o3={minChapVersion:tne},ine=(i,e)=>{const t=i.split(".").map(Number),r=e.split(".").map(Number),n=Math.max(t.length,r.length);for(let a=0;a<n;a++){const c=t[a]||0,s=r[a]||0;if(c<s)return-1;if(c>s)return 1}return 0},rne=(i,e)=>ine(i,e)>=0,nne=()=>{const{appVersion:i}=Zm(),e=i==null?void 0:i.full,{route:t}=Ru(),{status:r}=O2({route:t}),n=r&&rne(r.chap_core_version,o3.minChapVersion),{data:a,isError:c}=Vo({queryKey:["is-compatible",t==null?void 0:t.url,e],queryFn:async()=>await _I.isCompatibleIsCompatibleGet(e),enabled:!!e,staleTime:1/0,cacheTime:1/0}),s=n===!1||(a==null?void 0:a.compatible)===!1||c;return z.jsx(z.Fragment,{children:s&&z.jsx("div",{className:em.warningMargin,style:{maxWidth:"1400px"},children:z.jsx("div",{className:em.warningMarginInner,children:z.jsxs(da,{error:!0,title:"Incompatible versions",children:[z.jsx("div",{children:be.t("The version of the Modeling App is not compatible with the backend (Chap core).")}),z.jsx("br",{}),!(a!=null&&a.compatible)&&z.jsx("p",{className:em.resultDescription,children:z.jsx("i",{children:a==null?void 0:a.description})}),c&&z.jsx("p",{className:em.resultDescription,children:z.jsx("i",{children:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})}),n===!1&&z.jsx("p",{className:em.resultDescription,children:z.jsx("i",{children:be.t("The Chap Core version {{chapVersion}} is too old. The Modeling App specifies minimum Chap core version: {{chapMinVersion}}",{chapVersion:r==null?void 0:r.chap_core_version,chapMinVersion:o3.minChapVersion})})})]})})})})},sne="_container_zakw0_1",ane="_loadingContainer_zakw0_5",one="_errorContainer_zakw0_12",a1={container:sne,loadingContainer:ane,errorContainer:one},VP=()=>{const{data:i,error:e,isLoading:t}=Vo({queryKey:["backtests"],queryFn:()=>qs.getBacktestsCrudBacktestsGet(),staleTime:3e5,cacheTime:3e5,retry:0});return{backtests:i,error:e,isLoading:t}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function F2(){return{accessor:(i,e)=>typeof i=="function"?{...e,accessorFn:i}:{...e,accessorKey:i},display:i=>i,group:i=>i}}function pu(i,e){return typeof i=="function"?i(e):i}function ko(i,e){return t=>{e.setState(r=>({...r,[i]:pu(t,r[i])}))}}function ex(i){return i instanceof Function}function lne(i){return Array.isArray(i)&&i.every(e=>typeof e=="number")}function cne(i,e){const t=[],r=n=>{n.forEach(a=>{t.push(a);const c=e(a);c!=null&&c.length&&r(c)})};return r(i),t}function Gi(i,e,t){let r=[],n;return a=>{let c;t.key&&t.debug&&(c=Date.now());const s=i(a);if(!(s.length!==r.length||s.some((m,y)=>r[y]!==m)))return n;r=s;let f;if(t.key&&t.debug&&(f=Date.now()),n=e(...s),t==null||t.onChange==null||t.onChange(n),t.key&&t.debug&&t!=null&&t.debug()){const m=Math.round((Date.now()-c)*100)/100,y=Math.round((Date.now()-f)*100)/100,g=y/16,b=(v,_)=>{for(v=String(v);v.length<_;)v=" "+v;return v};console.info(`%c ${b(y,5)} /${b(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return n}}function qi(i,e,t,r){return{debug:()=>{var n;return(n=i==null?void 0:i.debugAll)!=null?n:i[e]},key:!1,onChange:r}}function une(i,e,t,r){const n=()=>{var c;return(c=a.getValue())!=null?c:i.options.renderFallbackValue},a={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:n,getContext:Gi(()=>[i,t,e,a],(c,s,h,f)=>({table:c,column:s,row:h,cell:f,getValue:f.getValue,renderValue:f.renderValue}),qi(i.options,"debugCells"))};return i._features.forEach(c=>{c.createCell==null||c.createCell(a,t,e,i)},{}),a}function dne(i,e,t,r){var n,a;const s={...i._getDefaultColumnDef(),...e},h=s.accessorKey;let f=(n=(a=s.id)!=null?a:h?typeof String.prototype.replaceAll=="function"?h.replaceAll(".","_"):h.replace(/\./g,"_"):void 0)!=null?n:typeof s.header=="string"?s.header:void 0,m;if(s.accessorFn?m=s.accessorFn:h&&(h.includes(".")?m=g=>{let b=g;for(const _ of h.split(".")){var v;b=(v=b)==null?void 0:v[_]}return b}:m=g=>g[s.accessorKey]),!f)throw new Error;let y={id:`${String(f)}`,accessorFn:m,parent:r,depth:t,columnDef:s,columns:[],getFlatColumns:Gi(()=>[!0],()=>{var g;return[y,...(g=y.columns)==null?void 0:g.flatMap(b=>b.getFlatColumns())]},qi(i.options,"debugColumns")),getLeafColumns:Gi(()=>[i._getOrderColumnsFn()],g=>{var b;if((b=y.columns)!=null&&b.length){let v=y.columns.flatMap(_=>_.getLeafColumns());return g(v)}return[y]},qi(i.options,"debugColumns"))};for(const g of i._features)g.createColumn==null||g.createColumn(y,i);return y}const ba="debugHeaders";function l3(i,e,t){var r;let a={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const c=[],s=h=>{h.subHeaders&&h.subHeaders.length&&h.subHeaders.map(s),c.push(h)};return s(a),c},getContext:()=>({table:i,header:a,column:e})};return i._features.forEach(c=>{c.createHeader==null||c.createHeader(a,i)}),a}const hne={createTable:i=>{i.getHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,n)=>{var a,c;const s=(a=r==null?void 0:r.map(y=>t.find(g=>g.id===y)).filter(Boolean))!=null?a:[],h=(c=n==null?void 0:n.map(y=>t.find(g=>g.id===y)).filter(Boolean))!=null?c:[],f=t.filter(y=>!(r!=null&&r.includes(y.id))&&!(n!=null&&n.includes(y.id)));return Gy(e,[...s,...f,...h],i)},qi(i.options,ba)),i.getCenterHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,n)=>(t=t.filter(a=>!(r!=null&&r.includes(a.id))&&!(n!=null&&n.includes(a.id))),Gy(e,t,i,"center")),qi(i.options,ba)),i.getLeftHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(e,t,r)=>{var n;const a=(n=r==null?void 0:r.map(c=>t.find(s=>s.id===c)).filter(Boolean))!=null?n:[];return Gy(e,a,i,"left")},qi(i.options,ba)),i.getRightHeaderGroups=Gi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(e,t,r)=>{var n;const a=(n=r==null?void 0:r.map(c=>t.find(s=>s.id===c)).filter(Boolean))!=null?n:[];return Gy(e,a,i,"right")},qi(i.options,ba)),i.getFooterGroups=Gi(()=>[i.getHeaderGroups()],e=>[...e].reverse(),qi(i.options,ba)),i.getLeftFooterGroups=Gi(()=>[i.getLeftHeaderGroups()],e=>[...e].reverse(),qi(i.options,ba)),i.getCenterFooterGroups=Gi(()=>[i.getCenterHeaderGroups()],e=>[...e].reverse(),qi(i.options,ba)),i.getRightFooterGroups=Gi(()=>[i.getRightHeaderGroups()],e=>[...e].reverse(),qi(i.options,ba)),i.getFlatHeaders=Gi(()=>[i.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),qi(i.options,ba)),i.getLeftFlatHeaders=Gi(()=>[i.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),qi(i.options,ba)),i.getCenterFlatHeaders=Gi(()=>[i.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),qi(i.options,ba)),i.getRightFlatHeaders=Gi(()=>[i.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),qi(i.options,ba)),i.getCenterLeafHeaders=Gi(()=>[i.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),qi(i.options,ba)),i.getLeftLeafHeaders=Gi(()=>[i.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),qi(i.options,ba)),i.getRightLeafHeaders=Gi(()=>[i.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),qi(i.options,ba)),i.getLeafHeaders=Gi(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(e,t,r)=>{var n,a,c,s,h,f;return[...(n=(a=e[0])==null?void 0:a.headers)!=null?n:[],...(c=(s=t[0])==null?void 0:s.headers)!=null?c:[],...(h=(f=r[0])==null?void 0:f.headers)!=null?h:[]].map(m=>m.getLeafHeaders()).flat()},qi(i.options,ba))}};function Gy(i,e,t,r){var n,a;let c=0;const s=function(g,b){b===void 0&&(b=1),c=Math.max(c,b),g.filter(v=>v.getIsVisible()).forEach(v=>{var _;(_=v.columns)!=null&&_.length&&s(v.columns,b+1)},0)};s(i);let h=[];const f=(g,b)=>{const v={depth:b,id:[r,`${b}`].filter(Boolean).join("_"),headers:[]},_=[];g.forEach(T=>{const k=[..._].reverse()[0],w=T.column.depth===v.depth;let E,A=!1;if(w&&T.column.parent?E=T.column.parent:(E=T.column,A=!0),k&&(k==null?void 0:k.column)===E)k.subHeaders.push(T);else{const M=l3(t,E,{id:[r,b,E.id,T==null?void 0:T.id].filter(Boolean).join("_"),isPlaceholder:A,placeholderId:A?`${_.filter(S=>S.column===E).length}`:void 0,depth:b,index:_.length});M.subHeaders.push(T),_.push(M)}v.headers.push(T),T.headerGroup=v}),h.push(v),b>0&&f(_,b-1)},m=e.map((g,b)=>l3(t,g,{depth:c,index:b}));f(m,c-1),h.reverse();const y=g=>g.filter(v=>v.column.getIsVisible()).map(v=>{let _=0,T=0,k=[0];v.subHeaders&&v.subHeaders.length?(k=[],y(v.subHeaders).forEach(E=>{let{colSpan:A,rowSpan:M}=E;_+=A,k.push(M)})):_=1;const w=Math.min(...k);return T=T+w,v.colSpan=_,v.rowSpan=T,{colSpan:_,rowSpan:T}});return y((n=(a=h[0])==null?void 0:a.headers)!=null?n:[]),h}const B2=(i,e,t,r,n,a,c)=>{let s={id:e,index:r,original:t,depth:n,parentId:c,_valuesCache:{},_uniqueValuesCache:{},getValue:h=>{if(s._valuesCache.hasOwnProperty(h))return s._valuesCache[h];const f=i.getColumn(h);if(f!=null&&f.accessorFn)return s._valuesCache[h]=f.accessorFn(s.original,r),s._valuesCache[h]},getUniqueValues:h=>{if(s._uniqueValuesCache.hasOwnProperty(h))return s._uniqueValuesCache[h];const f=i.getColumn(h);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(s._uniqueValuesCache[h]=f.columnDef.getUniqueValues(s.original,r),s._uniqueValuesCache[h]):(s._uniqueValuesCache[h]=[s.getValue(h)],s._uniqueValuesCache[h])},renderValue:h=>{var f;return(f=s.getValue(h))!=null?f:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>cne(s.subRows,h=>h.subRows),getParentRow:()=>s.parentId?i.getRow(s.parentId,!0):void 0,getParentRows:()=>{let h=[],f=s;for(;;){const m=f.getParentRow();if(!m)break;h.push(m),f=m}return h.reverse()},getAllCells:Gi(()=>[i.getAllLeafColumns()],h=>h.map(f=>une(i,s,f,f.id)),qi(i.options,"debugRows")),_getAllCellsByColumnId:Gi(()=>[s.getAllCells()],h=>h.reduce((f,m)=>(f[m.column.id]=m,f),{}),qi(i.options,"debugRows"))};for(let h=0;h<i._features.length;h++){const f=i._features[h];f==null||f.createRow==null||f.createRow(s,i)}return s},pne={createColumn:(i,e)=>{i._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():e.getPreFilteredRowModel(),i._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},HP=(i,e,t)=>{var r,n;const a=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((n=i.getValue(e))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(a))};HP.autoRemove=i=>tl(i);const GP=(i,e,t)=>{var r;return!!(!((r=i.getValue(e))==null||(r=r.toString())==null)&&r.includes(t))};GP.autoRemove=i=>tl(i);const qP=(i,e,t)=>{var r;return((r=i.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};qP.autoRemove=i=>tl(i);const WP=(i,e,t)=>{var r;return(r=i.getValue(e))==null?void 0:r.includes(t)};WP.autoRemove=i=>tl(i);const YP=(i,e,t)=>!t.some(r=>{var n;return!((n=i.getValue(e))!=null&&n.includes(r))});YP.autoRemove=i=>tl(i)||!(i!=null&&i.length);const ZP=(i,e,t)=>t.some(r=>{var n;return(n=i.getValue(e))==null?void 0:n.includes(r)});ZP.autoRemove=i=>tl(i)||!(i!=null&&i.length);const XP=(i,e,t)=>i.getValue(e)===t;XP.autoRemove=i=>tl(i);const KP=(i,e,t)=>i.getValue(e)==t;KP.autoRemove=i=>tl(i);const $2=(i,e,t)=>{let[r,n]=t;const a=i.getValue(e);return a>=r&&a<=n};$2.resolveFilterValue=i=>{let[e,t]=i,r=typeof e!="number"?parseFloat(e):e,n=typeof t!="number"?parseFloat(t):t,a=e===null||Number.isNaN(r)?-1/0:r,c=t===null||Number.isNaN(n)?1/0:n;if(a>c){const s=a;a=c,c=s}return[a,c]};$2.autoRemove=i=>tl(i)||tl(i[0])&&tl(i[1]);const fc={includesString:HP,includesStringSensitive:GP,equalsString:qP,arrIncludes:WP,arrIncludesAll:YP,arrIncludesSome:ZP,equals:XP,weakEquals:KP,inNumberRange:$2};function tl(i){return i==null||i===""}const fne={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:ko("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,e)=>{i.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);return typeof r=="string"?fc.includesString:typeof r=="number"?fc.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?fc.equals:Array.isArray(r)?fc.arrIncludes:fc.weakEquals},i.getFilterFn=()=>{var t,r;return ex(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[i.columnDef.filterFn])!=null?t:fc[i.columnDef.filterFn]},i.getCanFilter=()=>{var t,r,n;return((t=i.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((n=e.options.enableFilters)!=null?n:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===i.id))==null?void 0:t.value},i.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(n=>n.id===i.id))!=null?t:-1},i.setFilterValue=t=>{e.setColumnFilters(r=>{const n=i.getFilterFn(),a=r==null?void 0:r.find(m=>m.id===i.id),c=pu(t,a?a.value:void 0);if(c3(n,c,i)){var s;return(s=r==null?void 0:r.filter(m=>m.id!==i.id))!=null?s:[]}const h={id:i.id,value:c};if(a){var f;return(f=r==null?void 0:r.map(m=>m.id===i.id?h:m))!=null?f:[]}return r!=null&&r.length?[...r,h]:[h]})}},createRow:(i,e)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=e=>{const t=i.getAllLeafColumns(),r=n=>{var a;return(a=pu(e,n))==null?void 0:a.filter(c=>{const s=t.find(h=>h.id===c.id);if(s){const h=s.getFilterFn();if(c3(h,c.value,s))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(r)},i.resetColumnFilters=e=>{var t,r;i.setColumnFilters(e?[]:(t=(r=i.initialState)==null?void 0:r.columnFilters)!=null?t:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function c3(i,e,t){return(i&&i.autoRemove?i.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const mne=(i,e,t)=>t.reduce((r,n)=>{const a=n.getValue(i);return r+(typeof a=="number"?a:0)},0),gne=(i,e,t)=>{let r;return t.forEach(n=>{const a=n.getValue(i);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},yne=(i,e,t)=>{let r;return t.forEach(n=>{const a=n.getValue(i);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},vne=(i,e,t)=>{let r,n;return t.forEach(a=>{const c=a.getValue(i);c!=null&&(r===void 0?c>=c&&(r=n=c):(r>c&&(r=c),n<c&&(n=c)))}),[r,n]},xne=(i,e)=>{let t=0,r=0;if(e.forEach(n=>{let a=n.getValue(i);a!=null&&(a=+a)>=a&&(++t,r+=a)}),t)return r/t},bne=(i,e)=>{if(!e.length)return;const t=e.map(a=>a.getValue(i));if(!lne(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),n=t.sort((a,c)=>a-c);return t.length%2!==0?n[r]:(n[r-1]+n[r])/2},wne=(i,e)=>Array.from(new Set(e.map(t=>t.getValue(i))).values()),_ne=(i,e)=>new Set(e.map(t=>t.getValue(i))).size,Cne=(i,e)=>e.length,o1={sum:mne,min:gne,max:yne,extent:vne,mean:xne,median:bne,unique:wne,uniqueCount:_ne,count:Cne},Tne={getDefaultColumnDef:()=>({aggregatedCell:i=>{var e,t;return(e=(t=i.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:ko("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,e)=>{i.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(i.id)?t.filter(r=>r!==i.id):[...t??[],i.id])},i.getCanGroup=()=>{var t,r;return((t=i.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(i.id)},i.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const t=i.getCanGroup();return()=>{t&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);if(typeof r=="number")return o1.sum;if(Object.prototype.toString.call(r)==="[object Date]")return o1.extent},i.getAggregationFn=()=>{var t,r;if(!i)throw new Error;return ex(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[i.columnDef.aggregationFn])!=null?t:o1[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=e=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(e),i.resetGrouping=e=>{var t,r;i.setGrouping(e?[]:(t=(r=i.initialState)==null?void 0:r.grouping)!=null?t:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,e)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=t=>{if(i._groupingValuesCache.hasOwnProperty(t))return i._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(i._groupingValuesCache[t]=r.columnDef.getGroupingValue(i.original),i._groupingValuesCache[t]):i.getValue(t)},i._groupingValuesCache={}},createCell:(i,e,t,r)=>{i.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&e.getIsGrouped(),i.getIsAggregated=()=>{var n;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((n=t.subRows)!=null&&n.length)}}};function Sne(i,e,t){if(!(e!=null&&e.length)||!t)return i;const r=i.filter(a=>!e.includes(a.id));return t==="remove"?r:[...e.map(a=>i.find(c=>c.id===a)).filter(Boolean),...r]}const Ene={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:ko("columnOrder",i)}),createColumn:(i,e)=>{i.getIndex=Gi(t=>[Em(e,t)],t=>t.findIndex(r=>r.id===i.id),qi(e.options,"debugColumns")),i.getIsFirstColumn=t=>{var r;return((r=Em(e,t)[0])==null?void 0:r.id)===i.id},i.getIsLastColumn=t=>{var r;const n=Em(e,t);return((r=n[n.length-1])==null?void 0:r.id)===i.id}},createTable:i=>{i.setColumnOrder=e=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(e),i.resetColumnOrder=e=>{var t;i.setColumnOrder(e?[]:(t=i.initialState.columnOrder)!=null?t:[])},i._getOrderColumnsFn=Gi(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(e,t,r)=>n=>{let a=[];if(!(e!=null&&e.length))a=n;else{const c=[...e],s=[...n];for(;s.length&&c.length;){const h=c.shift(),f=s.findIndex(m=>m.id===h);f>-1&&a.push(s.splice(f,1)[0])}a=[...a,...s]}return Sne(a,t,r)},qi(i.options,"debugTable"))}},l1=()=>({left:[],right:[]}),kne={getInitialState:i=>({columnPinning:l1(),...i}),getDefaultOptions:i=>({onColumnPinningChange:ko("columnPinning",i)}),createColumn:(i,e)=>{i.pin=t=>{const r=i.getLeafColumns().map(n=>n.id).filter(Boolean);e.setColumnPinning(n=>{var a,c;if(t==="right"){var s,h;return{left:((s=n==null?void 0:n.left)!=null?s:[]).filter(y=>!(r!=null&&r.includes(y))),right:[...((h=n==null?void 0:n.right)!=null?h:[]).filter(y=>!(r!=null&&r.includes(y))),...r]}}if(t==="left"){var f,m;return{left:[...((f=n==null?void 0:n.left)!=null?f:[]).filter(y=>!(r!=null&&r.includes(y))),...r],right:((m=n==null?void 0:n.right)!=null?m:[]).filter(y=>!(r!=null&&r.includes(y)))}}return{left:((a=n==null?void 0:n.left)!=null?a:[]).filter(y=>!(r!=null&&r.includes(y))),right:((c=n==null?void 0:n.right)!=null?c:[]).filter(y=>!(r!=null&&r.includes(y)))}})},i.getCanPin=()=>i.getLeafColumns().some(r=>{var n,a,c;return((n=r.columnDef.enablePinning)!=null?n:!0)&&((a=(c=e.options.enableColumnPinning)!=null?c:e.options.enablePinning)!=null?a:!0)}),i.getIsPinned=()=>{const t=i.getLeafColumns().map(s=>s.id),{left:r,right:n}=e.getState().columnPinning,a=t.some(s=>r==null?void 0:r.includes(s)),c=t.some(s=>n==null?void 0:n.includes(s));return a?"left":c?"right":!1},i.getPinnedIndex=()=>{var t,r;const n=i.getIsPinned();return n?(t=(r=e.getState().columnPinning)==null||(r=r[n])==null?void 0:r.indexOf(i.id))!=null?t:-1:0}},createRow:(i,e)=>{i.getCenterVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,n)=>{const a=[...r??[],...n??[]];return t.filter(c=>!a.includes(c.column.id))},qi(e.options,"debugRows")),i.getLeftVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(a=>t.find(c=>c.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),qi(e.options,"debugRows")),i.getRightVisibleCells=Gi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(a=>t.find(c=>c.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),qi(e.options,"debugRows"))},createTable:i=>{i.setColumnPinning=e=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(e),i.resetColumnPinning=e=>{var t,r;return i.setColumnPinning(e?l1():(t=(r=i.initialState)==null?void 0:r.columnPinning)!=null?t:l1())},i.getIsSomeColumnsPinned=e=>{var t;const r=i.getState().columnPinning;if(!e){var n,a;return!!((n=r.left)!=null&&n.length||(a=r.right)!=null&&a.length)}return!!((t=r[e])!=null&&t.length)},i.getLeftLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(n=>n.id===r)).filter(Boolean),qi(i.options,"debugColumns")),i.getRightLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(n=>n.id===r)).filter(Boolean),qi(i.options,"debugColumns")),i.getCenterLeafColumns=Gi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r)=>{const n=[...t??[],...r??[]];return e.filter(a=>!n.includes(a.id))},qi(i.options,"debugColumns"))}};function Mne(i){return i||(typeof document<"u"?document:null)}const qy={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},c1=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Ane={getDefaultColumnDef:()=>qy,getInitialState:i=>({columnSizing:{},columnSizingInfo:c1(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ko("columnSizing",i),onColumnSizingInfoChange:ko("columnSizingInfo",i)}),createColumn:(i,e)=>{i.getSize=()=>{var t,r,n;const a=e.getState().columnSizing[i.id];return Math.min(Math.max((t=i.columnDef.minSize)!=null?t:qy.minSize,(r=a??i.columnDef.size)!=null?r:qy.size),(n=i.columnDef.maxSize)!=null?n:qy.maxSize)},i.getStart=Gi(t=>[t,Em(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,i.getIndex(t)).reduce((n,a)=>n+a.getSize(),0),qi(e.options,"debugColumns")),i.getAfter=Gi(t=>[t,Em(e,t),e.getState().columnSizing],(t,r)=>r.slice(i.getIndex(t)+1).reduce((n,a)=>n+a.getSize(),0),qi(e.options,"debugColumns")),i.resetSize=()=>{e.setColumnSizing(t=>{let{[i.id]:r,...n}=t;return n})},i.getCanResize=()=>{var t,r;return((t=i.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},i.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,e)=>{i.getSize=()=>{let t=0;const r=n=>{if(n.subHeaders.length)n.subHeaders.forEach(r);else{var a;t+=(a=n.column.getSize())!=null?a:0}};return r(i),t},i.getStart=()=>{if(i.index>0){const t=i.headerGroup.headers[i.index-1];return t.getStart()+t.getSize()}return 0},i.getResizeHandler=t=>{const r=e.getColumn(i.column.id),n=r==null?void 0:r.getCanResize();return a=>{if(!r||!n||(a.persist==null||a.persist(),u1(a)&&a.touches&&a.touches.length>1))return;const c=i.getSize(),s=i?i.getLeafHeaders().map(k=>[k.column.id,k.column.getSize()]):[[r.id,r.getSize()]],h=u1(a)?Math.round(a.touches[0].clientX):a.clientX,f={},m=(k,w)=>{typeof w=="number"&&(e.setColumnSizingInfo(E=>{var A,M;const S=e.options.columnResizeDirection==="rtl"?-1:1,N=(w-((A=E==null?void 0:E.startOffset)!=null?A:0))*S,Y=Math.max(N/((M=E==null?void 0:E.startSize)!=null?M:0),-.999999);return E.columnSizingStart.forEach(Z=>{let[K,B]=Z;f[K]=Math.round(Math.max(B+B*Y,0)*100)/100}),{...E,deltaOffset:N,deltaPercentage:Y}}),(e.options.columnResizeMode==="onChange"||k==="end")&&e.setColumnSizing(E=>({...E,...f})))},y=k=>m("move",k),g=k=>{m("end",k),e.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},b=Mne(t),v={moveHandler:k=>y(k.clientX),upHandler:k=>{b==null||b.removeEventListener("mousemove",v.moveHandler),b==null||b.removeEventListener("mouseup",v.upHandler),g(k.clientX)}},_={moveHandler:k=>(k.cancelable&&(k.preventDefault(),k.stopPropagation()),y(k.touches[0].clientX),!1),upHandler:k=>{var w;b==null||b.removeEventListener("touchmove",_.moveHandler),b==null||b.removeEventListener("touchend",_.upHandler),k.cancelable&&(k.preventDefault(),k.stopPropagation()),g((w=k.touches[0])==null?void 0:w.clientX)}},T=Ine()?{passive:!1}:!1;u1(a)?(b==null||b.addEventListener("touchmove",_.moveHandler,T),b==null||b.addEventListener("touchend",_.upHandler,T)):(b==null||b.addEventListener("mousemove",v.moveHandler,T),b==null||b.addEventListener("mouseup",v.upHandler,T)),e.setColumnSizingInfo(k=>({...k,startOffset:h,startSize:c,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:r.id}))}}},createTable:i=>{i.setColumnSizing=e=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(e),i.setColumnSizingInfo=e=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(e),i.resetColumnSizing=e=>{var t;i.setColumnSizing(e?{}:(t=i.initialState.columnSizing)!=null?t:{})},i.resetHeaderSizeInfo=e=>{var t;i.setColumnSizingInfo(e?c1():(t=i.initialState.columnSizingInfo)!=null?t:c1())},i.getTotalSize=()=>{var e,t;return(e=(t=i.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getLeftTotalSize=()=>{var e,t;return(e=(t=i.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getCenterTotalSize=()=>{var e,t;return(e=(t=i.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getRightTotalSize=()=>{var e,t;return(e=(t=i.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0}}};let Wy=null;function Ine(){if(typeof Wy=="boolean")return Wy;let i=!1;try{const e={get passive(){return i=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{i=!1}return Wy=i,Wy}function u1(i){return i.type==="touchstart"}const Pne={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:ko("columnVisibility",i)}),createColumn:(i,e)=>{i.toggleVisibility=t=>{i.getCanHide()&&e.setColumnVisibility(r=>({...r,[i.id]:t??!i.getIsVisible()}))},i.getIsVisible=()=>{var t,r;const n=i.columns;return(t=n.length?n.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[i.id])!=null?t:!0},i.getCanHide=()=>{var t,r;return((t=i.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},i.getToggleVisibilityHandler=()=>t=>{i.toggleVisibility==null||i.toggleVisibility(t.target.checked)}},createRow:(i,e)=>{i._getAllVisibleCells=Gi(()=>[i.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),qi(e.options,"debugRows")),i.getVisibleCells=Gi(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(t,r,n)=>[...t,...r,...n],qi(e.options,"debugRows"))},createTable:i=>{const e=(t,r)=>Gi(()=>[r(),r().filter(n=>n.getIsVisible()).map(n=>n.id).join("_")],n=>n.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),qi(i.options,"debugColumns"));i.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=t=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(t),i.resetColumnVisibility=t=>{var r;i.setColumnVisibility(t?{}:(r=i.initialState.columnVisibility)!=null?r:{})},i.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((n,a)=>({...n,[a.id]:t||!(a.getCanHide!=null&&a.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;i.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function Em(i,e){return e?e==="center"?i.getCenterVisibleLeafColumns():e==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const Dne={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},Rne={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:ko("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=i.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(i,e)=>{i.getCanGlobalFilter=()=>{var t,r,n,a;return((t=i.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((n=e.options.enableFilters)!=null?n:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(i))!=null?a:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>fc.includesString,i.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=i.options;return ex(r)?r:r==="auto"?i.getGlobalAutoFilterFn():(e=(t=i.options.filterFns)==null?void 0:t[r])!=null?e:fc[r]},i.setGlobalFilter=e=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(e)},i.resetGlobalFilter=e=>{i.setGlobalFilter(e?void 0:i.initialState.globalFilter)}}},Lne={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:ko("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let e=!1,t=!1;i._autoResetExpanded=()=>{var r,n;if(!e){i._queue(()=>{e=!0});return}if((r=(n=i.options.autoResetAll)!=null?n:i.options.autoResetExpanded)!=null?r:!i.options.manualExpanding){if(t)return;t=!0,i._queue(()=>{i.resetExpanded(),t=!1})}},i.setExpanded=r=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(r),i.toggleAllRowsExpanded=r=>{r??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=r=>{var n,a;i.setExpanded(r?{}:(n=(a=i.initialState)==null?void 0:a.expanded)!=null?n:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const r=i.getState().expanded;return r===!0||Object.values(r).some(Boolean)},i.getIsAllRowsExpanded=()=>{const r=i.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||i.getRowModel().flatRows.some(n=>!n.getIsExpanded()))},i.getExpandedDepth=()=>{let r=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(a=>{const c=a.split(".");r=Math.max(r,c.length)}),r},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,e)=>{i.toggleExpanded=t=>{e.setExpanded(r=>{var n;const a=r===!0?!0:!!(r!=null&&r[i.id]);let c={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(s=>{c[s]=!0}):c=r,t=(n=t)!=null?n:!a,!a&&t)return{...c,[i.id]:!0};if(a&&!t){const{[i.id]:s,...h}=c;return h}return r})},i.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(i))!=null?t:r===!0||r!=null&&r[i.id])},i.getCanExpand=()=>{var t,r,n;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(i))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((n=i.subRows)!=null&&n.length)},i.getIsAllParentsExpanded=()=>{let t=!0,r=i;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},i.getToggleExpandedHandler=()=>{const t=i.getCanExpand();return()=>{t&&i.toggleExpanded()}}}},kw=0,Mw=10,d1=()=>({pageIndex:kw,pageSize:Mw}),Nne={getInitialState:i=>({...i,pagination:{...d1(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:ko("pagination",i)}),createTable:i=>{let e=!1,t=!1;i._autoResetPageIndex=()=>{var r,n;if(!e){i._queue(()=>{e=!0});return}if((r=(n=i.options.autoResetAll)!=null?n:i.options.autoResetPageIndex)!=null?r:!i.options.manualPagination){if(t)return;t=!0,i._queue(()=>{i.resetPageIndex(),t=!1})}},i.setPagination=r=>{const n=a=>pu(r,a);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(n)},i.resetPagination=r=>{var n;i.setPagination(r?d1():(n=i.initialState.pagination)!=null?n:d1())},i.setPageIndex=r=>{i.setPagination(n=>{let a=pu(r,n.pageIndex);const c=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return a=Math.max(0,Math.min(a,c)),{...n,pageIndex:a}})},i.resetPageIndex=r=>{var n,a;i.setPageIndex(r?kw:(n=(a=i.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?n:kw)},i.resetPageSize=r=>{var n,a;i.setPageSize(r?Mw:(n=(a=i.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?n:Mw)},i.setPageSize=r=>{i.setPagination(n=>{const a=Math.max(1,pu(r,n.pageSize)),c=n.pageSize*n.pageIndex,s=Math.floor(c/a);return{...n,pageIndex:s,pageSize:a}})},i.setPageCount=r=>i.setPagination(n=>{var a;let c=pu(r,(a=i.options.pageCount)!=null?a:-1);return typeof c=="number"&&(c=Math.max(-1,c)),{...n,pageCount:c}}),i.getPageOptions=Gi(()=>[i.getPageCount()],r=>{let n=[];return r&&r>0&&(n=[...new Array(r)].fill(null).map((a,c)=>c)),n},qi(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:r}=i.getState().pagination,n=i.getPageCount();return n===-1?!0:n===0?!1:r<n-1},i.previousPage=()=>i.setPageIndex(r=>r-1),i.nextPage=()=>i.setPageIndex(r=>r+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var r;return(r=i.options.pageCount)!=null?r:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var r;return(r=i.options.rowCount)!=null?r:i.getPrePaginationRowModel().rows.length}}},h1=()=>({top:[],bottom:[]}),zne={getInitialState:i=>({rowPinning:h1(),...i}),getDefaultOptions:i=>({onRowPinningChange:ko("rowPinning",i)}),createRow:(i,e)=>{i.pin=(t,r,n)=>{const a=r?i.getLeafRows().map(h=>{let{id:f}=h;return f}):[],c=n?i.getParentRows().map(h=>{let{id:f}=h;return f}):[],s=new Set([...c,i.id,...a]);e.setRowPinning(h=>{var f,m;if(t==="bottom"){var y,g;return{top:((y=h==null?void 0:h.top)!=null?y:[]).filter(_=>!(s!=null&&s.has(_))),bottom:[...((g=h==null?void 0:h.bottom)!=null?g:[]).filter(_=>!(s!=null&&s.has(_))),...Array.from(s)]}}if(t==="top"){var b,v;return{top:[...((b=h==null?void 0:h.top)!=null?b:[]).filter(_=>!(s!=null&&s.has(_))),...Array.from(s)],bottom:((v=h==null?void 0:h.bottom)!=null?v:[]).filter(_=>!(s!=null&&s.has(_)))}}return{top:((f=h==null?void 0:h.top)!=null?f:[]).filter(_=>!(s!=null&&s.has(_))),bottom:((m=h==null?void 0:h.bottom)!=null?m:[]).filter(_=>!(s!=null&&s.has(_)))}})},i.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:n}=e.options;return typeof r=="function"?r(i):(t=r??n)!=null?t:!0},i.getIsPinned=()=>{const t=[i.id],{top:r,bottom:n}=e.getState().rowPinning,a=t.some(s=>r==null?void 0:r.includes(s)),c=t.some(s=>n==null?void 0:n.includes(s));return a?"top":c?"bottom":!1},i.getPinnedIndex=()=>{var t,r;const n=i.getIsPinned();if(!n)return-1;const a=(t=n==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(c=>{let{id:s}=c;return s});return(r=a==null?void 0:a.indexOf(i.id))!=null?r:-1}},createTable:i=>{i.setRowPinning=e=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(e),i.resetRowPinning=e=>{var t,r;return i.setRowPinning(e?h1():(t=(r=i.initialState)==null?void 0:r.rowPinning)!=null?t:h1())},i.getIsSomeRowsPinned=e=>{var t;const r=i.getState().rowPinning;if(!e){var n,a;return!!((n=r.top)!=null&&n.length||(a=r.bottom)!=null&&a.length)}return!!((t=r[e])!=null&&t.length)},i._getPinnedRows=(e,t,r)=>{var n;return((n=i.options.keepPinnedRows)==null||n?(t??[]).map(c=>{const s=i.getRow(c,!0);return s.getIsAllParentsExpanded()?s:null}):(t??[]).map(c=>e.find(s=>s.id===c))).filter(Boolean).map(c=>({...c,position:r}))},i.getTopRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(e,t)=>i._getPinnedRows(e,t,"top"),qi(i.options,"debugRows")),i.getBottomRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(e,t)=>i._getPinnedRows(e,t,"bottom"),qi(i.options,"debugRows")),i.getCenterRows=Gi(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(e,t,r)=>{const n=new Set([...t??[],...r??[]]);return e.filter(a=>!n.has(a.id))},qi(i.options,"debugRows"))}},jne={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:ko("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=e=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(e),i.resetRowSelection=e=>{var t;return i.setRowSelection(e?{}:(t=i.initialState.rowSelection)!=null?t:{})},i.toggleAllRowsSelected=e=>{i.setRowSelection(t=>{e=typeof e<"u"?e:!i.getIsAllRowsSelected();const r={...t},n=i.getPreGroupedRowModel().flatRows;return e?n.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):n.forEach(a=>{delete r[a.id]}),r})},i.toggleAllPageRowsSelected=e=>i.setRowSelection(t=>{const r=typeof e<"u"?e:!i.getIsAllPageRowsSelected(),n={...t};return i.getRowModel().rows.forEach(a=>{Aw(n,a.id,r,!0,i)}),n}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getCoreRowModel()],(e,t)=>Object.keys(e).length?p1(i,t):{rows:[],flatRows:[],rowsById:{}},qi(i.options,"debugTable")),i.getFilteredSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(e,t)=>Object.keys(e).length?p1(i,t):{rows:[],flatRows:[],rowsById:{}},qi(i.options,"debugTable")),i.getGroupedSelectedRowModel=Gi(()=>[i.getState().rowSelection,i.getSortedRowModel()],(e,t)=>Object.keys(e).length?p1(i,t):{rows:[],flatRows:[],rowsById:{}},qi(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const e=i.getFilteredRowModel().flatRows,{rowSelection:t}=i.getState();let r=!!(e.length&&Object.keys(t).length);return r&&e.some(n=>n.getCanSelect()&&!t[n.id])&&(r=!1),r},i.getIsAllPageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows.filter(n=>n.getCanSelect()),{rowSelection:t}=i.getState();let r=!!e.length;return r&&e.some(n=>!t[n.id])&&(r=!1),r},i.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=i.getState().rowSelection)!=null?e:{}).length;return t>0&&t<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>e=>{i.toggleAllRowsSelected(e.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>e=>{i.toggleAllPageRowsSelected(e.target.checked)}},createRow:(i,e)=>{i.toggleSelected=(t,r)=>{const n=i.getIsSelected();e.setRowSelection(a=>{var c;if(t=typeof t<"u"?t:!n,i.getCanSelect()&&n===t)return a;const s={...a};return Aw(s,i.id,t,(c=r==null?void 0:r.selectChildren)!=null?c:!0,e),s})},i.getIsSelected=()=>{const{rowSelection:t}=e.getState();return U2(i,t)},i.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return Iw(i,t)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return Iw(i,t)==="all"},i.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(i):(t=e.options.enableRowSelection)!=null?t:!0},i.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(i):(t=e.options.enableSubRowSelection)!=null?t:!0},i.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(i):(t=e.options.enableMultiRowSelection)!=null?t:!0},i.getToggleSelectedHandler=()=>{const t=i.getCanSelect();return r=>{var n;t&&i.toggleSelected((n=r.target)==null?void 0:n.checked)}}}},Aw=(i,e,t,r,n)=>{var a;const c=n.getRow(e,!0);t?(c.getCanMultiSelect()||Object.keys(i).forEach(s=>delete i[s]),c.getCanSelect()&&(i[e]=!0)):delete i[e],r&&(a=c.subRows)!=null&&a.length&&c.getCanSelectSubRows()&&c.subRows.forEach(s=>Aw(i,s.id,t,r,n))};function p1(i,e){const t=i.getState().rowSelection,r=[],n={},a=function(c,s){return c.map(h=>{var f;const m=U2(h,t);if(m&&(r.push(h),n[h.id]=h),(f=h.subRows)!=null&&f.length&&(h={...h,subRows:a(h.subRows)}),m)return h}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:n}}function U2(i,e){var t;return(t=e[i.id])!=null?t:!1}function Iw(i,e,t){var r;if(!((r=i.subRows)!=null&&r.length))return!1;let n=!0,a=!1;return i.subRows.forEach(c=>{if(!(a&&!n)&&(c.getCanSelect()&&(U2(c,e)?a=!0:n=!1),c.subRows&&c.subRows.length)){const s=Iw(c,e);s==="all"?a=!0:(s==="some"&&(a=!0),n=!1)}}),n?"all":a?"some":!1}const Pw=/([0-9]+)/gm,One=(i,e,t)=>QP(Mu(i.getValue(t)).toLowerCase(),Mu(e.getValue(t)).toLowerCase()),Fne=(i,e,t)=>QP(Mu(i.getValue(t)),Mu(e.getValue(t))),Bne=(i,e,t)=>V2(Mu(i.getValue(t)).toLowerCase(),Mu(e.getValue(t)).toLowerCase()),$ne=(i,e,t)=>V2(Mu(i.getValue(t)),Mu(e.getValue(t))),Une=(i,e,t)=>{const r=i.getValue(t),n=e.getValue(t);return r>n?1:r<n?-1:0},Vne=(i,e,t)=>V2(i.getValue(t),e.getValue(t));function V2(i,e){return i===e?0:i>e?1:-1}function Mu(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function QP(i,e){const t=i.split(Pw).filter(Boolean),r=e.split(Pw).filter(Boolean);for(;t.length&&r.length;){const n=t.shift(),a=r.shift(),c=parseInt(n,10),s=parseInt(a,10),h=[c,s].sort();if(isNaN(h[0])){if(n>a)return 1;if(a>n)return-1;continue}if(isNaN(h[1]))return isNaN(c)?-1:1;if(c>s)return 1;if(s>c)return-1}return t.length-r.length}const tm={alphanumeric:One,alphanumericCaseSensitive:Fne,text:Bne,textCaseSensitive:$ne,datetime:Une,basic:Vne},Hne={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:ko("sorting",i),isMultiSortEvent:e=>e.shiftKey}),createColumn:(i,e)=>{i.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const n of t){const a=n==null?void 0:n.getValue(i.id);if(Object.prototype.toString.call(a)==="[object Date]")return tm.datetime;if(typeof a=="string"&&(r=!0,a.split(Pw).length>1))return tm.alphanumeric}return r?tm.text:tm.basic},i.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var t,r;if(!i)throw new Error;return ex(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[i.columnDef.sortingFn])!=null?t:tm[i.columnDef.sortingFn]},i.toggleSorting=(t,r)=>{const n=i.getNextSortingOrder(),a=typeof t<"u"&&t!==null;e.setSorting(c=>{const s=c==null?void 0:c.find(b=>b.id===i.id),h=c==null?void 0:c.findIndex(b=>b.id===i.id);let f=[],m,y=a?t:n==="desc";if(c!=null&&c.length&&i.getCanMultiSort()&&r?s?m="toggle":m="add":c!=null&&c.length&&h!==c.length-1?m="replace":s?m="toggle":m="replace",m==="toggle"&&(a||n||(m="remove")),m==="add"){var g;f=[...c,{id:i.id,desc:y}],f.splice(0,f.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?f=c.map(b=>b.id===i.id?{...b,desc:y}:b):m==="remove"?f=c.filter(b=>b.id!==i.id):f=[{id:i.id,desc:y}];return f})},i.getFirstSortDir=()=>{var t,r;return((t=(r=i.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=t=>{var r,n;const a=i.getFirstSortDir(),c=i.getIsSorted();return c?c!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(n=e.options.enableMultiRemove)!=null)||n)?!1:c==="desc"?"asc":"desc":a},i.getCanSort=()=>{var t,r;return((t=i.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var t,r;return(t=(r=i.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!i.accessorFn},i.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(n=>n.id===i.id);return r?r.desc?"desc":"asc":!1},i.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(n=>n.id===i.id))!=null?t:-1},i.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==i.id):[])},i.getToggleSortingHandler=()=>{const t=i.getCanSort();return r=>{t&&(r.persist==null||r.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:i=>{i.setSorting=e=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(e),i.resetSorting=e=>{var t,r;i.setSorting(e?[]:(t=(r=i.initialState)==null?void 0:r.sorting)!=null?t:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},Gne=[hne,Pne,Ene,kne,pne,fne,Dne,Rne,Hne,Tne,Lne,Nne,zne,jne,Ane];function qne(i){var e,t;const r=[...Gne,...(e=i._features)!=null?e:[]];let n={_features:r};const a=n._features.reduce((g,b)=>Object.assign(g,b.getDefaultOptions==null?void 0:b.getDefaultOptions(n)),{}),c=g=>n.options.mergeOptions?n.options.mergeOptions(a,g):{...a,...g};let h={...{},...(t=i.initialState)!=null?t:{}};n._features.forEach(g=>{var b;h=(b=g.getInitialState==null?void 0:g.getInitialState(h))!=null?b:h});const f=[];let m=!1;const y={_features:r,options:{...a,...i},initialState:h,_queue:g=>{f.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();m=!1}).catch(b=>setTimeout(()=>{throw b})))},reset:()=>{n.setState(n.initialState)},setOptions:g=>{const b=pu(g,n.options);n.options=c(b)},getState:()=>n.options.state,setState:g=>{n.options.onStateChange==null||n.options.onStateChange(g)},_getRowId:(g,b,v)=>{var _;return(_=n.options.getRowId==null?void 0:n.options.getRowId(g,b,v))!=null?_:`${v?[v.id,b].join("."):b}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(g,b)=>{let v=(b?n.getPrePaginationRowModel():n.getRowModel()).rowsById[g];if(!v&&(v=n.getCoreRowModel().rowsById[g],!v))throw new Error;return v},_getDefaultColumnDef:Gi(()=>[n.options.defaultColumn],g=>{var b;return g=(b=g)!=null?b:{},{header:v=>{const _=v.header.column.columnDef;return _.accessorKey?_.accessorKey:_.accessorFn?_.id:null},cell:v=>{var _,T;return(_=(T=v.renderValue())==null||T.toString==null?void 0:T.toString())!=null?_:null},...n._features.reduce((v,_)=>Object.assign(v,_.getDefaultColumnDef==null?void 0:_.getDefaultColumnDef()),{}),...g}},qi(i,"debugColumns")),_getColumnDefs:()=>n.options.columns,getAllColumns:Gi(()=>[n._getColumnDefs()],g=>{const b=function(v,_,T){return T===void 0&&(T=0),v.map(k=>{const w=dne(n,k,T,_),E=k;return w.columns=E.columns?b(E.columns,w,T+1):[],w})};return b(g)},qi(i,"debugColumns")),getAllFlatColumns:Gi(()=>[n.getAllColumns()],g=>g.flatMap(b=>b.getFlatColumns()),qi(i,"debugColumns")),_getAllFlatColumnsById:Gi(()=>[n.getAllFlatColumns()],g=>g.reduce((b,v)=>(b[v.id]=v,b),{}),qi(i,"debugColumns")),getAllLeafColumns:Gi(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(g,b)=>{let v=g.flatMap(_=>_.getLeafColumns());return b(v)},qi(i,"debugColumns")),getColumn:g=>n._getAllFlatColumnsById()[g]};Object.assign(n,y);for(let g=0;g<n._features.length;g++){const b=n._features[g];b==null||b.createTable==null||b.createTable(n)}return n}function H2(){return i=>Gi(()=>[i.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(n,a,c){a===void 0&&(a=0);const s=[];for(let f=0;f<n.length;f++){const m=B2(i,i._getRowId(n[f],f,c),n[f],f,a,void 0,c==null?void 0:c.id);if(t.flatRows.push(m),t.rowsById[m.id]=m,s.push(m),i.options.getSubRows){var h;m.originalSubRows=i.options.getSubRows(n[f],f),(h=m.originalSubRows)!=null&&h.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return s};return t.rows=r(e),t},qi(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}function Wne(i){const e=[],t=r=>{var n;e.push(r),(n=r.subRows)!=null&&n.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return i.rows.forEach(t),{rows:e,flatRows:i.flatRows,rowsById:i.rowsById}}function Yne(i,e,t){return t.options.filterFromLeafRows?Zne(i,e,t):Xne(i,e,t)}function Zne(i,e,t){var r;const n=[],a={},c=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,s=function(h,f){f===void 0&&(f=0);const m=[];for(let g=0;g<h.length;g++){var y;let b=h[g];const v=B2(t,b.id,b.original,b.index,b.depth,void 0,b.parentId);if(v.columnFilters=b.columnFilters,(y=b.subRows)!=null&&y.length&&f<c){if(v.subRows=s(b.subRows,f+1),b=v,e(b)&&!v.subRows.length){m.push(b),a[b.id]=b,n.push(b);continue}if(e(b)||v.subRows.length){m.push(b),a[b.id]=b,n.push(b);continue}}else b=v,e(b)&&(m.push(b),a[b.id]=b,n.push(b))}return m};return{rows:s(i),flatRows:n,rowsById:a}}function Xne(i,e,t){var r;const n=[],a={},c=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,s=function(h,f){f===void 0&&(f=0);const m=[];for(let g=0;g<h.length;g++){let b=h[g];if(e(b)){var y;if((y=b.subRows)!=null&&y.length&&f<c){const _=B2(t,b.id,b.original,b.index,b.depth,void 0,b.parentId);_.subRows=s(b.subRows,f+1),b=_}m.push(b),n.push(b),a[b.id]=b}}return m};return{rows:s(i),flatRows:n,rowsById:a}}function G2(){return i=>Gi(()=>[i.getPreFilteredRowModel(),i.getState().columnFilters,i.getState().globalFilter],(e,t,r)=>{if(!e.rows.length||!(t!=null&&t.length)&&!r){for(let g=0;g<e.flatRows.length;g++)e.flatRows[g].columnFilters={},e.flatRows[g].columnFiltersMeta={};return e}const n=[],a=[];(t??[]).forEach(g=>{var b;const v=i.getColumn(g.id);if(!v)return;const _=v.getFilterFn();_&&n.push({id:g.id,filterFn:_,resolvedValue:(b=_.resolveFilterValue==null?void 0:_.resolveFilterValue(g.value))!=null?b:g.value})});const c=(t??[]).map(g=>g.id),s=i.getGlobalFilterFn(),h=i.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());r&&s&&h.length&&(c.push("__global__"),h.forEach(g=>{var b;a.push({id:g.id,filterFn:s,resolvedValue:(b=s.resolveFilterValue==null?void 0:s.resolveFilterValue(r))!=null?b:r})}));let f,m;for(let g=0;g<e.flatRows.length;g++){const b=e.flatRows[g];if(b.columnFilters={},n.length)for(let v=0;v<n.length;v++){f=n[v];const _=f.id;b.columnFilters[_]=f.filterFn(b,_,f.resolvedValue,T=>{b.columnFiltersMeta[_]=T})}if(a.length){for(let v=0;v<a.length;v++){m=a[v];const _=m.id;if(m.filterFn(b,_,m.resolvedValue,T=>{b.columnFiltersMeta[_]=T})){b.columnFilters.__global__=!0;break}}b.columnFilters.__global__!==!0&&(b.columnFilters.__global__=!1)}}const y=g=>{for(let b=0;b<c.length;b++)if(g.columnFilters[c[b]]===!1)return!1;return!0};return Yne(e.rows,y,i)},qi(i.options,"debugTable","getFilteredRowModel",()=>i._autoResetPageIndex()))}function JP(i){return e=>Gi(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:n,pageIndex:a}=t;let{rows:c,flatRows:s,rowsById:h}=r;const f=n*a,m=f+n;c=c.slice(f,m);let y;e.options.paginateExpandedRows?y={rows:c,flatRows:s,rowsById:h}:y=Wne({rows:c,flatRows:s,rowsById:h}),y.flatRows=[];const g=b=>{y.flatRows.push(b),b.subRows.length&&b.subRows.forEach(g)};return y.rows.forEach(g),y},qi(e.options,"debugTable"))}function eD(){return i=>Gi(()=>[i.getState().sorting,i.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const r=i.getState().sorting,n=[],a=r.filter(h=>{var f;return(f=i.getColumn(h.id))==null?void 0:f.getCanSort()}),c={};a.forEach(h=>{const f=i.getColumn(h.id);f&&(c[h.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const s=h=>{const f=h.map(m=>({...m}));return f.sort((m,y)=>{for(let b=0;b<a.length;b+=1){var g;const v=a[b],_=c[v.id],T=_.sortUndefined,k=(g=v==null?void 0:v.desc)!=null?g:!1;let w=0;if(T){const E=m.getValue(v.id),A=y.getValue(v.id),M=E===void 0,S=A===void 0;if(M||S){if(T==="first")return M?-1:1;if(T==="last")return M?1:-1;w=M&&S?0:M?T:-T}}if(w===0&&(w=_.sortingFn(m,y,v.id)),w!==0)return k&&(w*=-1),_.invertSorting&&(w*=-1),w}return m.index-y.index}),f.forEach(m=>{var y;n.push(m),(y=m.subRows)!=null&&y.length&&(m.subRows=s(m.subRows))}),f};return{rows:s(t.rows),flatRows:n,rowsById:t.rowsById}},qi(i.options,"debugTable","getSortedRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function sv(i,e){return i?Kne(i)?Ae.createElement(i,e):i:null}function Kne(i){return Qne(i)||typeof i=="function"||Jne(i)}function Qne(i){return typeof i=="function"&&(()=>{const e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()}function Jne(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function q2(i){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[t]=Ae.useState(()=>({current:qne(e)})),[r,n]=Ae.useState(()=>t.current.initialState);return t.current.setOptions(a=>({...a,...i,state:{...r,...i.state},onStateChange:c=>{n(c),i.onStateChange==null||i.onStateChange(c)}})),t.current}const ese="_buttonContainer_1hxkr_1",tse="_leftSection_1hxkr_6",ise="_rightSection_1hxkr_13",rse="_headerWithTooltip_1hxkr_44",nse="_iconContainer_1hxkr_50",km={buttonContainer:ese,leftSection:tse,rightSection:ise,headerWithTooltip:rse,iconContainer:nse},sse="_mutedText_tjqo0_1",ase={mutedText:sse},ose=({onSuccess:i,onError:e}={})=>{const t=Ws(),{show:r}=ha(be.t("Error renaming evaluation"),{critical:!0}),{mutate:n,isLoading:a,error:c}=Vl(({id:s,name:h})=>qs.updateBacktestCrudBacktestsBacktestIdPatch(s,{name:h}),{onSuccess:(s,h)=>{t.setQueryData(["backtests"],f=>f==null?void 0:f.map(m=>m.id===h.id?{...m,name:h.name}:m)),i==null||i()},onError:s=>{r(),console.log("There was an error renaming the evaluation",s),e==null||e()}});return{renameEvaluation:n,isSubmitting:a,error:c}},lse=Ec({name:Vs().min(1,{message:be.t("Name is required")})}),cse=({id:i,onClose:e,initialName:t=""})=>{const{renameEvaluation:r,isSubmitting:n}=ose({onSuccess:()=>{e()}}),{control:a,handleSubmit:c,formState:{errors:s}}=Kv({resolver:Qv(lse),defaultValues:{name:t}}),h=f=>{r({id:i,name:f.name})};return z.jsx(ua,{onClose:e,dataTest:"edit-backtest-modal",children:z.jsxs("form",{onSubmit:c(h),children:[z.jsx(Mo,{children:be.t("Rename evaluation")}),z.jsxs(so,{children:[z.jsx(Sa,{htmlFor:"backtest-name",children:be.t("Name")}),z.jsx(Uo,{name:"name",control:a,render:({field:f})=>z.jsx($d,{...f,type:"text",error:!!s.name,onChange:m=>f.onChange(m.value),dataTest:"backtest-name-input"})}),s.name&&z.jsx("p",{className:ase.mutedText,children:s.name.message})]}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:e,secondary:!0,disabled:n,dataTest:"cancel-edit-backtest-button",children:be.t("Cancel")}),z.jsx(Ci,{type:"submit",primary:!0,loading:n,disabled:n,dataTest:"submit-edit-backtest-button",children:be.t("Save")})]})})]})})},use=({onSuccess:i,onError:e}={})=>{const t=Ws(),{show:r}=ha(be.t("Evaluation deleted"),{success:!0}),{show:n}=ha(be.t("Failed to delete evaluation"),{success:!1}),{mutate:a,isLoading:c,isError:s,error:h}=Vl({mutationFn:f=>qs.deleteBacktestCrudBacktestsBacktestIdDelete(f),onSuccess:f=>{t.invalidateQueries({queryKey:["backtests"]}),r(),i==null||i({id:f})},onError:f=>{console.error(f),n(),e==null||e()}});return{deleteBacktest:a,isLoading:c,isError:s,error:h}},dse=({id:i,onClose:e})=>{const{deleteBacktest:t,isLoading:r}=use({onSuccess:()=>{e()}});return z.jsxs(ua,{onClose:e,dataTest:"delete-backtest-modal",children:[z.jsx(Mo,{children:be.t("Delete evaluation")}),z.jsx(so,{children:z.jsx("p",{children:be.t("Are you sure you want to delete this evaluation? This action cannot be undone.")})}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:e,secondary:!0,disabled:r,dataTest:"cancel-delete-backtest-button",children:be.t("Cancel")}),z.jsx(Ci,{primary:!0,onClick:()=>t(i),destructive:!0,loading:r,disabled:r,dataTest:"submit-delete-backtest-button",children:be.t("Delete")})]})})]})},hse=({id:i,name:e})=>{const t=oo(),[r,n]=Ae.useState(!1),[a,c]=Ae.useState(!1),[s,h]=Ae.useState(!1),f=()=>{t(`/evaluate/compare?baseEvaluation=${i}`)};return z.jsxs(z.Fragment,{children:[z.jsx(dP,{small:!0,open:r,icon:z.jsx(Qm,{}),onClick:()=>{n(m=>!m)},component:z.jsxs(Ow,{dense:!0,children:[z.jsx(es,{label:be.t("View"),dataTest:"backtest-overflow-view",icon:z.jsx(qw,{}),onClick:()=>{f(),n(!1)}}),z.jsx(es,{label:be.t("Rename"),dataTest:"backtest-overflow-rename",icon:z.jsx(Vw,{}),onClick:()=>{h(!0),n(!1)}}),z.jsx(es,{label:be.t("Delete"),dataTest:"backtest-overflow-delete",destructive:!0,icon:z.jsx(Km,{}),onClick:()=>{c(!0),n(!1)}})]})}),s&&z.jsx(cse,{id:i,initialName:e??"",onClose:()=>h(!1)}),a&&z.jsx(dse,{id:i,onClose:()=>c(!1)})]})},pse="_inputContainer_1xqyj_1",fse="_singleSelectContainer_1xqyj_10",mse="_singleSelectMenuItem_1xqyj_19",f1={inputContainer:pse,singleSelectContainer:fse,singleSelectMenuItem:mse},gse=({table:i,models:e})=>{var t,r;return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:f1.inputContainer,children:z.jsx($d,{dense:!0,placeholder:be.t("Search"),value:((t=i.getColumn("name"))==null?void 0:t.getFilterValue())??"",onChange:n=>{var a;return(a=i.getColumn("name"))==null?void 0:a.setFilterValue(n.value)}})}),z.jsx("div",{className:f1.singleSelectContainer,children:z.jsx(Ll,{filterable:!0,noMatchText:be.t("No models found"),dense:!0,clearable:!0,clearText:be.t("Clear"),selected:(r=i.getColumn("modelId"))==null?void 0:r.getFilterValue(),placeholder:be.t("Model"),onChange:n=>{var a;return(a=i.getColumn("modelId"))==null?void 0:a.setFilterValue(n.selected)},children:e.map(n=>z.jsx(es,{className:f1.singleSelectMenuItem,label:n.displayName??n.name,value:n.name.toString()},n.id))})})]})},yse="_batchActionsContainer_1q9sy_1",vse="_leftSection_1q9sy_10",xse="_rightSection_1q9sy_16",m1={batchActionsContainer:yse,leftSection:vse,rightSection:xse},bse=({onSuccess:i,onError:e}={})=>{const t=Ws(),{show:r}=ha(be.t("Evaluations deleted"),{success:!0}),{show:n}=ha(be.t("Failed to delete evaluations"),{critical:!0}),{mutate:a,isLoading:c}=Vl({mutationFn:s=>qs.deleteBacktestBatchCrudBacktestsDelete(s.join(",")),onSuccess:()=>{t.invalidateQueries({queryKey:["backtests"]}),r(),i==null||i()},onError:s=>{n(),console.error("Failed to delete evaluations",s),e==null||e(s)}});return{deleteBacktests:a,isSubmitting:c}},wse=({table:i})=>{const{deleteBacktests:e,isSubmitting:t}=bse({onSuccess:()=>{i.resetRowSelection()}}),r=()=>{const n=i.getSelectedRowModel().rows.map(a=>a.original.id);e(n)};return z.jsxs("div",{className:m1.batchActionsContainer,children:[z.jsx("div",{className:m1.leftSection,children:be.t("{{count}} evaluations selected",{count:i.getSelectedRowModel().rows.length,defaultValue:"{{count}} evaluation selected",defaultValue_plural:"{{count}} evaluations selected"})}),z.jsxs("div",{className:m1.rightSection,children:[z.jsx(Ci,{icon:z.jsx(Km,{}),small:!0,onClick:r,loading:t,children:be.t("Delete")}),z.jsx(Ci,{small:!0,onClick:()=>i.resetRowSelection(),disabled:t,children:be.t("Cancel")})]})]})},Vr={SUCCESS:"SUCCESS",PENDING:"PENDING",STARTED:"STARTED",FAILED:"FAILURE",REVOKED:"REVOKED"},Al={BACKTEST:"create_backtest",CREATE_BACKTEST_WITH_DATA:"create_backtest_from_data",MAKE_PREDICTION:"create_prediction",CREATE_DATASET:"create_dataset"},tD=()=>{const i=Ws(),{data:e,error:t,isLoading:r}=Vo({queryKey:["jobs"],queryFn:()=>Tu.listJobsJobsGet(),staleTime:5*60*1e3,cacheTime:5*60*1e3,retry:0}),n=Ae.useMemo(()=>new Set((e==null?void 0:e.filter(c=>c.status===Vr.PENDING||c.status===Vr.STARTED).map(c=>c.id))??[]),[e]),{data:a}=Vo({queryKey:["jobs","active"],queryFn:()=>Tu.listJobsJobsGet(Array.from(n)),refetchInterval:()=>n.size>0?5e3:!1,enabled:n.size>0});return Ae.useEffect(()=>{if(!(a!=null&&a.length))return;let c=!1;i.setQueryData(["jobs"],s=>s==null?void 0:s.map(h=>{if(n.has(h.id)){const f=a.find(m=>m.id===h.id);if(f&&f.status!==h.status)return c=!0,f}return c&&(i.invalidateQueries({queryKey:["backtests"]}),i.invalidateQueries({queryKey:["predictions"]})),h}))},[a]),{jobs:e,error:t,isLoading:r}},_se=()=>{const{jobs:i}=tD();return((i==null?void 0:i.filter(t=>t.type===Al.CREATE_BACKTEST_WITH_DATA&&(t.status===Vr.PENDING||t.status===Vr.STARTED)))||[]).length===0?null:z.jsx(Vd,{content:be.t("There are running jobs in the background"),children:z.jsx(hP,{variant:"info",active:!0,label:be.t("Running jobs")})})},fd=F2(),Cse=[fd.display({id:"select",header:({table:i})=>z.jsx(el,{checked:i.getIsAllPageRowsSelected(),onChange:()=>i.toggleAllPageRowsSelected(),disabled:i.getRowModel().rows.length===0}),cell:({row:i})=>z.jsx(el,{checked:i.getIsSelected(),onChange:()=>i.toggleSelected()})}),fd.accessor("id",{header:be.t("ID"),filterFn:"equals"}),fd.accessor("name",{header:be.t("Name"),filterFn:"includesString",cell:i=>z.jsx(i2,{to:`/evaluate/compare?baseEvaluation=${i.row.original.id}`,children:i.getValue()})}),fd.accessor("created",{header:be.t("Created"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0}),fd.accessor("modelId",{header:be.t("Model"),filterFn:"equals",cell:i=>{var n;const e=i.getValue(),t=(n=i.table.options.meta)==null?void 0:n.models,r=t==null?void 0:t.find(a=>a.name===e);return(r==null?void 0:r.displayName)||e}}),fd.accessor("aggregateMetrics.crps_norm_mean",{header:()=>z.jsxs("div",{className:km.headerWithTooltip,children:[z.jsx("span",{children:be.t("CRPS (Norm)")}),z.jsx(Vd,{content:be.t("Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy"),children:z.jsx("div",{className:km.iconContainer,children:z.jsx(z3,{})})})]}),cell:i=>{const e=i.getValue();return e?e.toFixed(2):void 0}}),fd.display({id:"actions",header:be.t("Actions"),cell:i=>z.jsx(hse,{id:i.row.original.id,name:i.row.original.name})})],Tse=i=>i.getIsSorted()||"default",Sse=({backtests:i,models:e})=>{const t=oo(),r=q2({data:i||[],columns:Cse,initialState:{sorting:[{id:"created",desc:!0}]},meta:{models:e},getRowId:a=>a.id.toString(),enableRowSelection:!0,getSortedRowModel:eD(),getCoreRowModel:H2(),getFilteredRowModel:G2(),getPaginationRowModel:JP()}),n=r.getRowModel().rows.length>0;return z.jsxs("div",{children:[r.getIsSomeRowsSelected()||r.getIsAllRowsSelected()?z.jsx(wse,{table:r}):z.jsxs("div",{className:km.buttonContainer,children:[z.jsx("div",{className:km.leftSection,children:z.jsx(gse,{table:r,models:e})}),z.jsxs("div",{className:km.rightSection,children:[z.jsx(_se,{}),z.jsx(Ci,{primary:!0,icon:z.jsx(uv,{}),small:!0,onClick:()=>{t("/evaluate/new")},children:be.t("New evaluation")})]})]}),z.jsxs(jv,{children:[z.jsx(Nv,{children:r.getHeaderGroups().map(a=>z.jsx(Sl,{children:a.headers.map(c=>z.jsx(Ov,{fixed:!0,top:!0,...c.column.getCanSort()?{sortDirection:Tse(c.column),sortIconTitle:be.t("Sort by {{column}}",{column:c.column.id}),onSortIconClick:()=>c.column.toggleSorting()}:{},children:c.isPlaceholder?null:sv(c.column.columnDef.header,c.getContext())},c.id))},a.id))}),z.jsx(Pv,{children:n?r.getRowModel().rows.map(a=>z.jsx(Sl,{selected:a.getIsSelected(),children:a.getVisibleCells().map(c=>z.jsx(fu,{children:sv(c.column.columnDef.cell,c.getContext())},c.id))},a.id)):z.jsx(Sl,{children:z.jsx(fu,{colSpan:String(r.getAllColumns().length),align:"center",children:be.t("No evaluations available")})})}),z.jsx(Lv,{children:z.jsx(Sl,{children:z.jsx(fu,{colSpan:String(r.getAllColumns().length),children:z.jsx(B_,{page:r.getState().pagination.pageIndex+1,pageSize:r.getState().pagination.pageSize,onPageSizeChange:a=>r.setPageSize(a),pageCount:r.getPageCount(),total:r.getRowCount(),isLastPage:!r.getCanNextPage(),onPageChange:a=>r.setPageIndex(a-1)})})})})]})]})},Ese=()=>{const{backtests:i,error:e,isLoading:t}=VP(),{models:r,error:n,isLoading:a}=Jv();return t||a?z.jsx("div",{className:a1.loadingContainer,children:z.jsx(ka,{})}):e||n?z.jsx("div",{className:a1.errorContainer,children:z.jsx(da,{error:!0,title:be.t("Error loading evaluations"),children:(e==null?void 0:e.message)||(n==null?void 0:n.message)||be.t("An unknown error occurred")})}):z.jsxs(z.Fragment,{children:[z.jsx(Eu,{pageTitle:be.t("Evaluations"),pageDescription:be.t("Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.")}),z.jsx(I2,{className:a1.container,children:z.jsx(Sse,{backtests:i||[],models:r||[]})})]})},kse="_loadingContainer_1jc2q_1",Mse="_noChapContainer_1jc2q_8",Ase="_noChapIcon_1jc2q_15",Ise="_noChapContent_1jc2q_26",Pse="_noChapTitle_1jc2q_33",Dse="_noChapText_1jc2q_42",Rse="_noChapLink_1jc2q_49",md={loadingContainer:kse,noChapContainer:Mse,noChapIcon:Ase,noChapContent:Ise,noChapTitle:Pse,noChapText:Dse,noChapLink:Rse},Lse=({children:i})=>{const{route:e}=Ru(),{status:t,error:r,isLoading:n}=O2({route:e}),a=oo();return Ae.useEffect(()=>{r&&console.error("CHAP connection error:",r)},[r]),n?z.jsx("div",{className:md.loadingContainer,children:z.jsx(ka,{})}):r||!t?z.jsx("div",{className:md.noChapContainer,children:z.jsxs("div",{className:md.noChapContent,children:[z.jsx("div",{className:md.noChapIcon,children:z.jsx(Hw,{})}),z.jsx("h1",{className:md.noChapTitle,children:be.t("Could not connect to CHAP")}),z.jsxs("div",{className:md.noChapText,children:[z.jsx("p",{children:be.t("The app is not able to connect to the CHAP server.")}),z.jsx("p",{children:be.t("Please check your route configuration and make sure the CHAP server is running.")}),z.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:md.noChapLink,children:be.t("Learn more about Modeling and CHAP")})]}),z.jsx(Ci,{onClick:()=>a("/settings"),children:be.t("Configure settings")})]})}):i},Nse="_container_47x3d_1",zse="_backButton_47x3d_8",jse="_formWrapper_47x3d_12",Ose="_buttons_47x3d_26",Fse="_errorNotice_47x3d_32",fm={container:Nse,backButton:zse,formWrapper:jse,buttons:Ose,errorNotice:Fse},Bse="_formField_19y2a_1",$se="_datePickersContainer_19y2a_5",Use="_datePickerField_19y2a_11",Vse="_errorText_19y2a_15",Hse="_input_19y2a_21",dc={formField:Bse,datePickersContainer:$se,datePickerField:Use,errorText:Vse,input:Hse},$o={DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH"},u3=i=>{switch(i){case $o.DAY:return"date";case $o.WEEK:return"week";case $o.MONTH:return"month";default:return"text"}},Gse=({control:i,errors:e})=>{const t=Cc({control:i,name:"periodType"}),r=Ac(),n=a=>{a===$o.DAY||r.setValue("periodType",a,{shouldValidate:!0}),a!==t&&(r.resetField("fromDate"),r.resetField("toDate"))};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:dc.formField,children:[z.jsx(Sa,{children:be.t("Period type")}),z.jsx(Uo,{name:"periodType",control:i,render:({field:a})=>z.jsxs(ls,{selected:a.value,error:!!e.periodType,onChange:({selected:c})=>n(c),dataTest:"evaluation-period-type-select",children:[z.jsx(Cs,{disabled:!0,value:$o.DAY,label:be.t("Daily")}),z.jsx(Cs,{value:$o.WEEK,label:be.t("Weekly")}),z.jsx(Cs,{value:$o.MONTH,label:be.t("Monthly")})]})}),e.periodType&&z.jsx("p",{className:dc.errorText,children:e.periodType.message})]}),z.jsxs("div",{className:dc.datePickersContainer,children:[z.jsxs("div",{className:dc.datePickerField,children:[z.jsx(Sa,{children:be.t("From period")}),z.jsx(Uo,{name:"fromDate",control:i,render:({field:a})=>z.jsxs("div",{children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[z.jsx("input",{className:dc.input,type:t?u3(t):"text",disabled:!t,value:a.value,onChange:c=>a.onChange(c.target.value),"data-test":"evaluation-from-date-input",style:{opacity:t?1:.6}}),e.fromDate&&z.jsx(xT,{color:"#d32f2f"})]}),e.fromDate&&z.jsx("p",{className:dc.errorText,children:e.fromDate.message})]})})]}),z.jsxs("div",{className:dc.datePickerField,children:[z.jsx(Sa,{children:be.t("To period")}),z.jsx(Uo,{name:"toDate",control:i,render:({field:a})=>z.jsxs("div",{children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[z.jsx("input",{className:dc.input,type:t?u3(t):"text",disabled:!t,value:a.value,onChange:c=>a.onChange(c.target.value),"data-test":"evaluation-to-date-input",style:{opacity:t?1:.6}}),e.toDate&&z.jsx(xT,{color:"#d32f2f"})]}),e.toDate&&z.jsx("p",{className:dc.errorText,children:e.toDate.message})]})})]})]})]})},qse="_formField_10bcl_1",Wse="_errorText_10bcl_5",d3={formField:qse,errorText:Wse},Yse=({control:i,errors:e})=>z.jsxs("div",{className:d3.formField,children:[z.jsx(Sa,{htmlFor:"evaluation-name",children:be.t("Evaluation name")}),z.jsx(Uo,{name:"name",control:i,render:({field:t})=>z.jsx($d,{...t,type:"text",error:!!e.name,onChange:r=>t.onChange(r.value),dataTest:"evaluation-name-input",placeholder:be.t("EWARS Evaluation 22-24")})}),e.name&&z.jsx("p",{className:d3.errorText,children:e.name.message})]}),iD=i=>console.log("Error: ",i),Zse={resource:"organisationUnitLevels",params:({displayNameProp:i="displayName"}={})=>({fields:`id,level,${i}~rename(displayName),name`,paging:!1})},Xse={resource:"organisationUnitGroups",params:({displayNameProp:i="displayName"}={})=>({fields:`id,${i}~rename(displayName),name`,paging:!1})},Kse=async i=>(await i.query({orgUnitLevels:Zse},{onError:iD})).orgUnitLevels.organisationUnitLevels,Qse=async(i,e)=>(await i.query({orgUnitGroups:Xse},{variables:{displayNameProp:e},onError:iD})).orgUnitGroups.organisationUnitGroups,Dw=i=>{try{const e="en";return new Intl.ListFormat(e,{style:"long",type:"conjunction"}).format(i)}catch(e){return console.error(e),i.join(", ")}},av="LEVEL",ov="OU_GROUP",Rw="USER_ORGUNIT",Lw="USER_ORGUNIT_CHILDREN",Nw="USER_ORGUNIT_GRANDCHILDREN",rD=i=>i.substr(0,ov.length)===ov,nD=i=>i.substr(0,av.length)===av,Jse=i=>nD(i)?i.substr(av.length+1):i,eae=i=>rD(i)?i.substr(ov.length+1):i,g1=i=>eae(Jse(i)),vs=Object.freeze({addLevelPrefix:i=>`${av}-${g1(i)}`,addGroupPrefix:i=>`${ov}-${g1(i)}`,removePrefix:g1,hasGroupPrefix:rD,hasLevelPrefix:nD}),Yy="ou",tae="_container_m2uc3_1",iae="_orgUnitTreeWrapper_m2uc3_7",rae="_userOrgUnitsWrapper_m2uc3_26",nae="_selectsWrapper_m2uc3_37",sae="_hidden_m2uc3_44",aae="_summaryWrapper_m2uc3_52",oae="_warningWrapper_m2uc3_58",lae="_warningText_m2uc3_63",cae="_summaryText_m2uc3_70",uae="_deselectButton_m2uc3_76",vl={container:tae,orgUnitTreeWrapper:iae,userOrgUnitsWrapper:rae,selectsWrapper:nae,hidden:sae,summaryWrapper:aae,warningWrapper:oae,warningText:lae,summaryText:cae,deselectButton:uae},xd=[Rw,Lw,Nw],dae=({roots:i,selected:e,onSelect:t,hideGroupSelect:r=!1,hideLevelSelect:n=!1,hideUserOrgUnits:a=!1,warning:c,displayNameProp:s="displayName",i18n:h})=>{const[f,m]=Ae.useState([]),[y,g]=Ae.useState([]),b=Ud(),v=E=>{const{id:A,checked:M,displayName:S,path:N}=E;let Y=[...e];M&&xd.includes(A)?Y=[...Y,{id:A,displayName:S}]:M?Y.push({id:A,path:N,name:S}):Y=[...Y.filter(Z=>Z.id!==A)],t({dimensionId:Yy,items:Y})},_=()=>t({dimensionId:Yy,items:[]});Ae.useEffect(()=>{const E=async()=>{const M=await Kse(b);M.sort((S,N)=>S.level>N.level?1:-1),m(M)},A=async()=>{const M=await Qse(b,s);g(M)};n||E(),r||A()},[b,n,r,s]);const T=E=>{var S;const A=e.filter(N=>!vs.hasLevelPrefix(N.id)),M=E?[...A,{id:vs.addLevelPrefix(E),name:((S=f.find(N=>N.id===E))==null?void 0:S.displayName)||""}]:A;t({dimensionId:Yy,items:M})},k=E=>{const A=E.map(M=>{var S;return{id:vs.addGroupPrefix(M),name:((S=y.find(N=>N.id===M))==null?void 0:S.displayName)||""}});t({dimensionId:Yy,items:[...e.filter(M=>!vs.hasGroupPrefix(M.id)),...A]})},w=()=>{let E;if(e.length){const A=e.filter(Z=>!xd.includes(Z.id)&&!vs.hasLevelPrefix(Z.id)&&!vs.hasGroupPrefix(Z.id)).length,M=e.filter(Z=>vs.hasLevelPrefix(Z.id)).length,S=e.filter(Z=>vs.hasGroupPrefix(Z.id)).length,N=e.filter(Z=>xd.includes(Z.id)),Y=[];A&&Y.push(h!=null&&h.t?h.t("{{count}} org units",{count:A,defaultValue:"{{count}} org unit",defaultValue_plural:"{{count}} org units"}):`${A} org unit${A>1?"s":""}`),M&&Y.push(h!=null&&h.t?h.t("{{count}} levels",{count:M,defaultValue:"{{count}} level",defaultValue_plural:"{{count}} levels"}):`${M} level${M>1?"s":""}`),S&&Y.push(h!=null&&h.t?h.t("{{count}} groups",{count:S,defaultValue:"{{count}} group",defaultValue_plural:"{{count}} groups"}):`${S} group${S>1?"s":""}`),N.forEach(Z=>{Y.push(Z.name||Z.displayName||"")}),E=h!=null&&h.t?h.t("Selected: {{commaSeparatedListOfOrganisationUnits}}",{keySeparator:">",nsSeparator:"|",commaSeparatedListOfOrganisationUnits:Dw(Y)}):`Selected: ${Dw(Y)}`}else E=h!=null&&h.t?h.t("Nothing selected"):"Nothing selected";return E};return z.jsxs("div",{className:vl.container,children:[!a&&z.jsxs("div",{className:vl.userOrgUnitsWrapper,children:[z.jsx(el,{label:h!=null&&h.t?h.t("User organisation unit"):"User organisation unit",checked:e.some(E=>E.id===Rw),onChange:({checked:E})=>v({id:Rw,checked:E,displayName:h!=null&&h.t?h.t("User organisation unit"):"User organisation unit"}),dense:!0}),z.jsx(el,{label:h!=null&&h.t?h.t("User sub-units"):"User sub-units",checked:e.some(E=>E.id===Lw),onChange:({checked:E})=>v({id:Lw,checked:E,displayName:h!=null&&h.t?h.t("User sub-units"):"User sub-units"}),dense:!0}),z.jsx(el,{label:h!=null&&h.t?h.t("User sub-x2-units"):"User sub-x2-units",checked:e.some(E=>E.id===Nw),onChange:({checked:E})=>v({id:Nw,checked:E,displayName:h!=null&&h.t?h.t("User sub-x2-units"):"User sub-x2-units"}),dense:!0})]}),z.jsx("div",{className:vl.orgUnitTreeWrapper,children:z.jsx(F_,{roots:i,initiallyExpanded:[...i.length===1?[`/${i[0]}`]:[],...e.filter(E=>!xd.includes(E.id)&&!vs.hasLevelPrefix(E.id)&&!vs.hasGroupPrefix(E.id)).map(E=>{var A;return((A=E.path)==null?void 0:A.substring(0,E.path.lastIndexOf("/")))||""}).filter(E=>E)],selected:e.filter(E=>!xd.includes(E.id)&&!vs.hasLevelPrefix(E.id)&&!vs.hasGroupPrefix(E.id)).map(E=>E.path).filter(E=>!!E),onChange:v,dataTest:"org-unit-tree"})}),z.jsxs("div",{className:ir(vl.selectsWrapper,{[vl.hidden]:n&&r}),children:[!n&&z.jsx(ls,{selected:f.length&&e.filter(E=>vs.hasLevelPrefix(E.id)).map(E=>vs.removePrefix(E.id))[0]||"",onChange:({selected:E})=>T(E),placeholder:h!=null&&h.t?h.t("Select a level"):"Select a level",loading:!f.length,dense:!0,clearable:!0,clearText:h!=null&&h.t?h.t("Clear"):"Clear",dataTest:"org-unit-level-select",children:f.map(E=>z.jsx(Cs,{value:E.id,label:E.displayName,dataTest:`org-unit-level-select-option-${E.id}`},E.id))}),!r&&z.jsx(r_,{selected:y.length?e.filter(E=>vs.hasGroupPrefix(E.id)).map(E=>vs.removePrefix(E.id)):[],onChange:({selected:E})=>k(E),placeholder:h!=null&&h.t?h.t("Select a group"):"Select a group",loading:!y.length,dense:!0,dataTest:"org-unit-group-select",children:y.map(E=>z.jsx(n_,{value:E.id,label:E.displayName,dataTest:`org-unit-group-select-option-${E.id}`},E.id))})]}),z.jsxs("div",{className:vl.summaryWrapper,children:[c?z.jsxs("div",{className:vl.warningWrapper,children:[z.jsx(W3,{color:ze.red500}),z.jsx("span",{className:vl.warningText,children:c})]}):z.jsx("span",{className:vl.summaryText,children:w()}),z.jsx("div",{className:vl.deselectButton,children:z.jsx(Ci,{secondary:!0,small:!0,onClick:_,disabled:!e.length,children:h!=null&&h.t?h.t("Deselect all"):"Deselect all"})})]})]})},hae=i=>{if(!i.length)return be.t("Nothing selected");const e=i.filter(c=>!xd.includes(c.id)&&!vs.hasLevelPrefix(c.id)&&!vs.hasGroupPrefix(c.id)).length,t=i.filter(c=>vs.hasLevelPrefix(c.id)).length,r=i.filter(c=>vs.hasGroupPrefix(c.id)).length,n=i.filter(c=>xd.includes(c.id)),a=[];return e&&a.push(be.t("{{count}} org units",{count:e,defaultValue:"{{count}} org unit",defaultValue_plural:"{{count}} org units"})),t&&a.push(be.t("{{count}} levels",{count:t,defaultValue:"{{count}} level",defaultValue_plural:"{{count}} levels"})),r&&a.push(be.t("{{count}} groups",{count:r,defaultValue:"{{count}} group",defaultValue_plural:"{{count}} groups"})),n.forEach(c=>{a.push(c.name||c.displayName||"")}),be.t("Selected: {{commaSeparatedListOfOrganisationUnits}}",{keySeparator:">",nsSeparator:"|",commaSeparatedListOfOrganisationUnits:Dw(a)})},pae={resource:"organisationUnits",params:{userDataViewFallback:!0,fields:"id"}},fae=()=>{const{data:i,error:e,isLoading:t,isError:r}=Np({queryKey:["organisationUnits","dataViewRoot"],query:pae,select:n=>n.organisationUnits});return{orgUnits:i,error:e,isLoading:t,isError:r}},mae="_formField_1mwfn_1",gae="_noticeBox_1mwfn_19",yae="_mutedText_1mwfn_23",vae="_errorText_1mwfn_28",xae="_orgUnitSelector_1mwfn_34",mm={formField:mae,noticeBox:gae,mutedText:yae,errorText:vae,orgUnitSelector:xae},bae=({orgUnitRoots:i,selectedOrgUnits:e,onClose:t,onConfirm:r})=>{const[n,a]=Ae.useState(e),c=f=>{a(f.items)},s=()=>{r(n)},h=Ae.useMemo(()=>{if(n.length<=1)return!0;const f=n.filter(g=>g.path);if(f.length===0)return!0;const m=f.map(g=>g.path.split("/").filter(v=>v.length>0).length),y=m[0];return m.every(g=>g===y)},[n]);return z.jsxs(ua,{onClose:t,large:!0,children:[z.jsx(Mo,{children:be.t("Select Organisation Units")}),z.jsxs(so,{children:[z.jsx("div",{className:mm.noticeBox,children:z.jsx(da,{title:be.t("Organisation unit levels"),children:be.t("Some models require you to only select organisation units from the same level.")})}),z.jsx(dae,{roots:i,selected:n,onSelect:c,hideGroupSelect:!0,hideLevelSelect:!1,hideUserOrgUnits:!0,warning:h?void 0:be.t("All org units must be at the same level")})]}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:t,children:be.t("Cancel")}),z.jsx(Ci,{primary:!0,onClick:s,disabled:!h,children:be.t("Confirm Selection")})]})})]})},wae=({control:i,errors:e,onUpdateOrgUnits:t})=>{const r=Cc({control:i,name:"orgUnits"}),[n,a]=Ae.useState(!1),{orgUnits:c,isLoading:s}=fae(),h=()=>{a(!1)},f=m=>{t(m),a(!1)};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:ir(mm.formField,mm.orgUnitSelector),children:[z.jsx(Sa,{children:be.t("Organisation Units")}),z.jsx("p",{className:mm.mutedText,children:hae(r)}),z.jsx(Ci,{onClick:()=>a(!0),disabled:s,loading:s,icon:z.jsx(R3,{}),dataTest:"evaluation-org-unit-select-button",small:!0,children:be.t("Select organisation units")}),e.orgUnits&&z.jsx("p",{className:mm.errorText,children:e.orgUnits.message})]}),n&&z.jsx(bae,{orgUnitRoots:(c==null?void 0:c.map(m=>m.id))||[],selectedOrgUnits:r,onClose:h,onConfirm:f})]})},_ae="_modelCard_15s72_1",Cae="_selectedModelCard_15s72_15",Tae="_modelAuthor_15s72_19",Sae="_modelAuthorLogo_15s72_27",Eae="_modelAuthorName_15s72_34",kae="_modelHumanName_15s72_38",Mae="_modelCovariatesList_15s72_44",Aae="_modelCovariateItem_15s72_53",Jc={modelCard:_ae,selectedModelCard:Cae,modelAuthor:Tae,modelAuthorLogo:Sae,modelAuthorName:Eae,modelHumanName:kae,modelCovariatesList:Mae,modelCovariateItem:Aae},Iae=({model:i,isSelected:e,onSelect:t})=>{var r;return z.jsxs("div",{className:ir(Jc.modelCard,{[Jc.selectedModelCard]:e}),children:[z.jsx("h3",{className:Jc.modelHumanName,children:i.displayName||i.name}),z.jsxs("div",{className:Jc.modelAuthor,children:[z.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:Jc.modelAuthorLogo}),z.jsxs("span",{className:Jc.modelAuthorName,children:[i.author," - ",i.organization]})]}),z.jsx("ul",{className:Jc.modelCovariatesList,children:(r=i.covariates)==null?void 0:r.map((n,a)=>z.jsxs("li",{className:Jc.modelCovariateItem,children:["- ",n.name]},a))}),z.jsx(Ci,{onClick:()=>t(i),primary:!0,small:!0,children:e?be.t("Selected"):be.t("Select Model")})]})},Pae="_content_1kah1_1",Dae="_filterContainer_1kah1_6",Rae="_modelGrid_1kah1_13",Lae="_modelModal_1kah1_22",Nae="_noResults_1kah1_26",im={content:Pae,filterContainer:Dae,modelGrid:Rae,modelModal:Lae,noResults:Nae},zae=({models:i,selectedModel:e,onClose:t,onConfirm:r})=>{var b;const[n,a]=Ae.useState(e),c=()=>{a(void 0),t()},s=()=>{n&&r(n),c()},h=v=>{(n==null?void 0:n.id)===v.id?a(void 0):a(v)},f=F2(),m=Ae.useMemo(()=>[f.accessor("displayName",{id:"displayName",enableColumnFilter:!0,filterFn:"includesString"}),f.accessor("supportedPeriodType",{id:"supportedPeriodType",enableColumnFilter:!0,filterFn:"includesString"})],[]),y=q2({data:i||[],columns:m,getCoreRowModel:H2(),getFilteredRowModel:G2()}),g=y.getRowModel().rows;return z.jsxs(ua,{className:im.modelModal,onClose:c,children:[z.jsx(Mo,{children:be.t("Select Model")}),z.jsx(so,{children:z.jsxs("div",{className:im.content,children:[z.jsxs("div",{className:im.filterContainer,children:[z.jsx("h3",{children:be.t("Filter models")}),z.jsx($d,{placeholder:be.t("Search by name"),value:((b=y.getColumn("displayName"))==null?void 0:b.getFilterValue())||"",onChange:({value:v})=>y.setColumnFilters([{id:"displayName",value:v||""}])})]}),z.jsx("div",{className:im.modelGrid,children:g.length>0?g.map(v=>z.jsx(Iae,{model:v.original,isSelected:(n==null?void 0:n.id)===v.original.id,onSelect:h},v.original.id)):z.jsx("div",{className:im.noResults,children:be.t("No models found")})})]})}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:c,children:be.t("Cancel")}),z.jsx(Ci,{primary:!0,onClick:s,disabled:!n,children:be.t("Confirm Selection")})]})})]})},jae="_formField_e44e7_1",Oae="_errorText_e44e7_23",Fae="_modelSelector_e44e7_29",Bae="_mutedText_e44e7_37",rm={formField:jae,errorText:Oae,modelSelector:Fae,mutedText:Bae},$ae=({control:i})=>{const{models:e,isLoading:t}=Jv(),[r,n]=Ae.useState(!1),a=Ac(),c=Cc({control:i,name:"modelId"}),s=f=>{a.setValue("modelId",f.id.toString(),{shouldValidate:!0,shouldDirty:!0}),a.resetField("covariateMappings"),a.resetField("targetMapping"),n(!1)},h=e==null?void 0:e.find(f=>f.id.toString()===c);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:ir(rm.formField,rm.modelSelector),children:[z.jsx(Sa,{children:be.t("Model")}),h?z.jsx("p",{className:rm.mutedText,children:h.displayName||h.name}):z.jsx("p",{className:rm.mutedText,children:be.t("No model selected")}),z.jsx(Ci,{onClick:()=>n(!0),icon:z.jsx(Gw,{}),dataTest:"evaluation-model-select-button",small:!0,loading:t,children:be.t("Select model")}),a.formState.errors.modelId&&z.jsx("p",{className:rm.errorText,children:a.formState.errors.modelId.message})]}),r&&z.jsx(zae,{models:e,selectedModel:h,onClose:()=>n(!1),onConfirm:s})]})},Uae="_mappingItem_1i5xd_1",Vae="_featureDescription_1i5xd_9",h3={mappingItem:Uae,featureDescription:Vae},p3=({feature:i,onMapping:e})=>{const t=n=>({id:n.name||n.displayName,name:n.displayName,displayName:n.displayName,description:n.description}),r=n=>n.description&&n.description.toLowerCase()!==(n.displayName??n.name).toLowerCase();return z.jsxs("div",{className:h3.mappingItem,children:[z.jsx(mP,{feature:t(i),onChangeSearchSelectField:(n,a)=>{e(i.name||i.displayName,a)}}),r(i)&&z.jsx("p",{className:h3.featureDescription,children:i.description})]})},sD=()=>{const i=Ws(),e=Ac(),t=Cc({control:e.control,name:"modelId"}),r=Cc({control:e.control,name:"covariateMappings"}),n=Cc({control:e.control,name:"targetMapping"}),a=m=>{var y;if(m)return(y=i.getQueryData(["models"]))==null?void 0:y.find(g=>g.id===Number(m))},c=(m,y)=>{const g=a(m);return!g||!g.target?null:y?y.covariateName!==g.target.name||!y.dataItemId?be.t('Target "{{targetName}}" must be mapped to a data item',{targetName:g.target.displayName||g.target.name}):null:be.t('Target "{{targetName}}" must be mapped to a data item',{targetName:g.target.displayName||g.target.name})},s=(m,y)=>{const g=a(m),b={};return!g||!g.covariates||g.covariates.forEach(v=>{if(!v.name)return;const _=y==null?void 0:y.find(T=>T.covariateName===v.name);(!_||!_.dataItemId)&&(b[v.name]=be.t('Covariate "{{covariateName}}" must be mapped to a data item',{covariateName:v.displayName||v.name}))}),b},h=(m,y,g)=>{var T;const b=a(m);if(!b)return{missingCovariates:[],missingTarget:!1};const v=((T=b.covariates)==null?void 0:T.filter(k=>!(y!=null&&y.some(w=>w.covariateName===k.name&&w.dataItemId))))||[],_=!g||!b.target||g.covariateName!==b.target.name||!g.dataItemId;return{missingCovariates:v,missingTarget:_}};return{getSelectedModel:a,validateTargetMapping:c,validateCovariateMapping:s,getMissingMappings:h,getDetailedValidationSummary:()=>{var T;if(!t)return{isValid:!1,hasMissingMappings:!1,missingCovariates:[],missingTarget:!1,totalCovariates:0,mappedCovariates:0};const m=a(t);if(!m)return{isValid:!1,hasMissingMappings:!1,missingCovariates:[],missingTarget:!1,totalCovariates:0,mappedCovariates:0};const{missingCovariates:y,missingTarget:g}=h(t,r,n),b=((T=m.covariates)==null?void 0:T.length)||0,v=b-y.length,_=y.length>0||g;return{isValid:!_,hasMissingMappings:_,missingCovariates:y,missingTarget:g,totalCovariates:b,mappedCovariates:v}}}},Hae=i=>{const e=Ac(),{validateTargetMapping:t,validateCovariateMapping:r}=sD(),[n,a]=Ae.useState(()=>{const v=(e.getValues("covariateMappings")||[]).reduce((_,T)=>(_[T.covariateName]=T.dataItemId,_),{});return{targetMapping:e.getValues("targetMapping"),covariateMappings:v}}),c=(b,v)=>{a(_=>({..._,targetMapping:{covariateName:b,dataItemId:v}}))},s=(b,v)=>{a(_=>({..._,covariateMappings:{..._.covariateMappings,[b]:v}}))},h=()=>{const b=Object.entries(n.covariateMappings).map(([v,_])=>({covariateName:v,dataItemId:_}));return{targetMapping:n.targetMapping,covariateMappings:b}},f=()=>{const{targetMapping:b}=h();return t(i.id.toString(),b)===null},m=()=>{const{covariateMappings:b}=h(),v=r(i.id.toString(),b);return Object.keys(v).length===0},y=f()&&m();return{localState:n,handleTargetMapping:c,handleCovariateMapping:s,isTargetMapped:f,areAllCovariatesMapped:m,isFormValid:y,getMappingsForSubmission:()=>{if(!n.targetMapping)return null;const{targetMapping:b,covariateMappings:v}=h();return{targetMapping:b,covariateMappings:v}}}},Gae="_dataMappingModal_1415l_1",qae="_content_1415l_7",Wae="_modalDescription_1415l_13",Yae="_targetSection_1415l_19",Zae="_covariatesSection_1415l_20",Xae="_sectionTitle_1415l_28",Kae="_sectionDescription_1415l_34",hc={dataMappingModal:Gae,content:qae,modalDescription:Wae,targetSection:Yae,covariatesSection:Zae,sectionTitle:Xae,sectionDescription:Kae},Qae=({model:i,onClose:e,onConfirm:t})=>{const{handleTargetMapping:r,handleCovariateMapping:n,isFormValid:a,getMappingsForSubmission:c}=Hae(i),s=()=>{const h=c();h&&h.targetMapping&&t(h.targetMapping,h.covariateMappings)};return z.jsxs(ua,{className:hc.dataMappingModal,onClose:e,children:[z.jsx(Mo,{children:be.t("Map Data Items")}),z.jsx(so,{children:z.jsxs("div",{className:hc.content,children:[z.jsx("p",{className:hc.modalDescription,children:be.t("Map the model features to corresponding data items in DHIS2")}),i.target&&z.jsxs("div",{className:hc.targetSection,children:[z.jsx("h4",{className:hc.sectionTitle,children:be.t("Target")}),z.jsx("p",{className:hc.sectionDescription,children:be.t("Map the model target to the corresponding data item in DHIS2")}),z.jsx(p3,{feature:i.target,onMapping:r})]}),i.covariates&&i.covariates.length>0&&z.jsxs("div",{className:hc.covariatesSection,children:[z.jsx("h4",{className:hc.sectionTitle,children:"Covariates"}),z.jsx("p",{className:hc.sectionDescription,children:be.t("Map each model covariate to the corresponding data item in DHIS2")}),i.covariates.map((h,f)=>z.jsx(p3,{feature:h,onMapping:n},h.name||f))]})]})}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:e,children:be.t("Cancel")}),z.jsx(Ci,{primary:!0,onClick:s,disabled:!a,children:be.t("Save Mappings")})]})})]})},Jae="_formField_iyfss_1",eoe="_mutedText_iyfss_5",toe="_errorText_iyfss_11",ioe="_datasetConfiguration_iyfss_17",Zy={formField:Jae,mutedText:eoe,errorText:toe,datasetConfiguration:ioe},roe=i=>{let{missingEntryPoint:e,appShortName:t}=i;return he.createElement(he.Fragment,null,he.createElement("p",null,"Plugin unavailable"),e?he.createElement(he.Fragment,null,he.createElement("p",null,`You do not have access to the requested plugin ${t}, or it is not installed`)):null)},noe={apps:{resource:"apps"}},soe=i=>{var e;let{apps:t,appShortName:r}=i;return(e=t.find(n=>{let{short_name:a}=n;return a&&a===r}))===null||e===void 0?void 0:e.pluginLaunchUrl},aoe=i=>{let{pluginSource:e,pluginShortName:t,onLoad:r,height:n,width:a,className:c,clientWidth:s,...h}=i;const f=Ae.useRef(null),{add:m}=Ae.useContext(CR),{data:y}=qa(noe),g=e??soe({apps:(y==null?void 0:y.apps)||[],appShortName:t}),[b,v]=Ae.useState(!1),[_,T]=Ae.useState(150),[k,w]=Ae.useState(500),E=Ae.useMemo(()=>h,[...Object.keys(h).sort().map(Y=>h[Y])]),A=Ae.useRef(g),M=Ae.useRef(!1);Ae.useEffect(()=>{g!==A.current&&(M.current=!1,A.current=g)},[g]);const S=!n,N=!a&&s;return Ae.useEffect(()=>{if(!f.current)return;const Y={...E,alertsAdd:m,setPluginHeight:S?T:null,setPluginWidth:N?w:null,setInErrorState:v,clientWidth:s};if(!M.current&&!b){const Z=bT.on("getPropsFromParent",{window:f.current.contentWindow},()=>(M.current=!0,Y));return()=>Z.cancel()}M.current&&f.current.contentWindow&&!b&&bT.send(f.current.contentWindow,"updated",Y).catch(Z=>{console.error(Z)})},[E,b,m,S,N,s]),y&&!g?he.createElement(roe,{missingEntryPoint:!0,appShortName:t}):g?he.createElement("iframe",{ref:f,src:g,className:c,width:s?k:a??"100%",height:n??_,style:{border:"none"},onLoad:r}):he.createElement(he.Fragment,null)},ooe=i=>z.jsx(aoe,{pluginSource:"http://localhost:8080/dhis-web-data-visualizer/plugin.html",...i}),loe=({onClose:i,selectedOrgUnits:e,periodType:t,fromDate:r,toDate:n,covariateMappings:a,targetMapping:c})=>{const{baseUrl:s}=Zm(),h=()=>{const y=$o[t];return y?h2(r,n,y.toLowerCase()).map(b=>({id:b.id})):[]},f=()=>[{id:c.dataItemId},...a.map(g=>({id:g.dataItemId}))],m=()=>e.map(y=>({id:y.id}));return z.jsxs(ua,{large:!0,onClose:i,children:[z.jsx(Mo,{children:be.t("Inspect dataset")}),z.jsx(so,{children:z.jsx(ooe,{pluginSource:`${s}/dhis-web-data-visualizer/plugin.html`,height:"500px",forDashboard:!0,displayProperty:"name",visualization:{type:"PIVOT_TABLE",columns:[{dimension:"pe",items:h()}],rows:[{dimension:"ou",items:m()},{dimension:"dx",items:f()}],filters:[]}})}),z.jsx(Ao,{children:z.jsx(Wa,{children:z.jsx(Ci,{onClick:i,children:be.t("Close")})})})]})},coe=({enabled:i=!0,select:e}={})=>{const{data:t,isLoading:r,error:n}=Np({queryKey:["apps"],query:{resource:"apps",params:{fields:"key,displayName,version,pluginLaunchUrl"}},cacheTime:1/0,staleTime:1/0,enabled:i,select:e});return{apps:t,isLoading:r,error:n}},uoe=[101,0,0],doe=(i,e)=>{const[t,r,n]=i.split(".").map(f=>parseInt(f,10)),[a,c,s]=e;return t>a||t===a&&r>c||t===a&&r===c&&n>=s},hoe=i=>doe(i,uoe),poe="data-visualizer",foe=()=>{const{apps:i,isLoading:e,error:t}=coe({select:a=>a.filter(c=>c.key===poe)}),r=i==null?void 0:i[0],n=r?hoe(r.version):!1;return{version:r==null?void 0:r.version,isCompatible:n,isLoading:e,error:t}},moe=i=>{const{enabled:e,children:t,...r}=i;return e?z.jsx(Vd,{...r,children:({onMouseOver:n,onMouseOut:a,ref:c})=>z.jsx("span",{ref:c,onMouseEnter:n,onMouseLeave:a,children:t})}):t},goe=({control:i,errors:e})=>{const[t,r]=Ae.useState(!1),[n,a]=Ae.useState(!1),c=Ac(),s=Cc({control:i,name:"modelId"}),f=sD().getDetailedValidationSummary(),{models:m}=Jv(),{isCompatible:y,isLoading:g}=foe(),b=m==null?void 0:m.find(k=>k.id.toString()===s),v=()=>{r(!1)},_=(k,w)=>{c.setValue("targetMapping",k,{shouldValidate:!0,shouldDirty:!0}),c.setValue("covariateMappings",w,{shouldValidate:!0,shouldDirty:!0}),r(!1)},T=()=>b?f.isValid?be.t("All data items mapped"):be.t("{{mapped}}/{{total}} data items mapped",{mapped:f.mappedCovariates+(f.missingTarget?0:1),total:f.totalCovariates+1}):be.t("No model selected");return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:ir(Zy.formField,Zy.datasetConfiguration),children:[z.jsx(Sa,{children:be.t("Dataset Configuration")}),z.jsx("p",{className:Zy.mutedText,children:T()}),z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:()=>r(!0),icon:z.jsx(D3,{}),dataTest:"evaluation-data-mapping-button",disabled:!b,small:!0,children:be.t("Configure sources")}),z.jsx(moe,{enabled:!g&&!y,content:be.t("The Data Visualizer app is not compatible with this feature. Please update to a newer version."),children:z.jsx(Ci,{small:!0,disabled:!b||!f.isValid||!y,icon:z.jsx(U3,{}),onClick:()=>a(!0),children:be.t("Inspect dataset")})})]}),(e.targetMapping||e.covariateMappings)&&z.jsx("p",{className:Zy.errorText,children:be.t("Please map all model covariates to valid data items")})]}),t&&b&&z.jsx(Qae,{model:b,onClose:v,onConfirm:_}),n&&z.jsx(loe,{onClose:()=>a(!1),selectedOrgUnits:c.getValues("orgUnits"),periodType:c.getValues("periodType"),fromDate:c.getValues("fromDate"),toDate:c.getValues("toDate"),covariateMappings:c.getValues("covariateMappings"),targetMapping:c.getValues("targetMapping")})]})},yoe=({onSubmit:i,methods:e,onUpdateOrgUnits:t})=>{const r=s=>{i(s)},{control:n,handleSubmit:a,formState:{errors:c}}=e;return z.jsx(z.Fragment,{children:z.jsx("div",{className:fm.formWrapper,children:z.jsxs("form",{onSubmit:a(r),children:[z.jsx(Yse,{control:n,errors:c}),z.jsx(Gse,{control:n,errors:c}),z.jsx(wae,{control:n,errors:c,onUpdateOrgUnits:t}),z.jsx($ae,{control:n}),z.jsx(goe,{control:n,errors:c})]})})})},voe=10,xoe=1,boe={[$o.MONTH]:3,[$o.WEEK]:12},woe=(i,e,t)=>{const r=$o[i];return r?h2(e,t,r.toLowerCase()).map(a=>a.id):[]},_oe=(i,e,t)=>({response:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t.join(";")},pe:${e.join(";")}`}}}),Coe=i=>({geojson:{resource:"organisationUnits",params:{filter:`id:in:[${i.join(",")}]`,fields:"id,geometry,parent[id],level,displayName",paging:!1}}}),Toe=({onSuccess:i,onError:e}={})=>{const t=Ud(),r=Ws(),n=oo(),{mutate:a,isLoading:c,error:s}=Vl({mutationFn:async h=>{var A;const f=(A=r.getQueryData(["models"]))==null?void 0:A.find(M=>M.id===Number(h.modelId));if(!f)throw new Error("Model not found");const m=woe(h.periodType,h.fromDate,h.toDate),y=[...h.covariateMappings.map(M=>M.dataItemId),h.targetMapping.dataItemId],g=await t.query(_oe(y,m,h.orgUnits.map(M=>M.id))),b=g.response.metaData.dimensions.ou,v=await t.query(Coe(b)),_=v.geojson.organisationUnits.filter(M=>!M.geometry);if(_.length>0)throw new Error(`The following org units have no geometry: ${_.map(M=>M.displayName).join(", ")}`);const k=(M=>M.map(S=>{const N=S[0],Y=h.targetMapping.dataItemId===N?h.targetMapping:h.covariateMappings.find(Z=>Z.dataItemId===N);if(!Y)throw new Error(`Data layer not found for data item id: ${N}`);return{featureName:Y.covariateName,orgUnit:S[1],period:S[2],value:parseFloat(S[3])}}))(g.response.rows),w={type:"FeatureCollection",features:v.geojson.organisationUnits.map(M=>({id:M.id,type:"Feature",geometry:M.geometry,properties:{id:M.id,parent:M.parent.id,parentGraph:M.parent.id,level:M.level}}))},E={name:h.name,geojson:w,providedData:k,dataToBeFetched:[],modelId:f.name,nPeriods:boe[h.periodType],nSplits:voe,stride:xoe};return nl.createBacktestWithDataAnalyticsCreateBacktestWithDataPost(E)},onSuccess:()=>{r.invalidateQueries({queryKey:["jobs"]}),i==null||i(),n("/jobs")},onError:h=>{e==null||e(h)}});return{createNewBacktest:a,isSubmitting:c,error:s}},Soe=Ec({id:Vs().min(1,{message:be.t("Missing id for org unit")}),name:Vs().optional(),displayName:Vs().optional(),path:Vs().optional()}),Eoe=Ec({covariateName:Vs(),dataItemId:Vs()}),koe=Ec({name:Vs().min(1,{message:be.t("Name is required")}),periodType:Wte(["WEEK","MONTH"],{message:be.t("Period type is required")}),fromDate:Vs().min(1,{message:be.t("Start date is required")}),toDate:Vs().min(1,{message:be.t("End date is required")}),orgUnits:rv(Soe).min(1,{message:be.t("At least one org unit is required")}),modelId:Vs().min(1,{message:be.t("Please select a model")}),covariateMappings:rv(Eoe).min(1,{message:be.t("Please map the covariates to valid data items")}),targetMapping:Ec({covariateName:Vs(),dataItemId:Vs()},{message:be.t("Please map the target to a valid data item")})}).refine(i=>{const e=tE(i.fromDate),t=tE(i.toDate);return c2(t,e)||ZH(t,e)},{path:["toDate"],message:be.t("End period must be after start period")}),Moe=()=>{const i=Kv({resolver:Qv(koe),defaultValues:{name:"",periodType:$o.MONTH,fromDate:"",toDate:"",orgUnits:[],modelId:"",covariateMappings:[],targetMapping:void 0},shouldFocusError:!1}),{createNewBacktest:e,isSubmitting:t,error:r}=Toe({onSuccess:()=>{i.reset()}}),n=s=>{i.setValue("orgUnits",s,{shouldValidate:!0,shouldDirty:!0})},a=s=>e(s);return{methods:i,onUpdateOrgUnits:n,handleSubmit:a,handleStartJob:()=>{i.handleSubmit(a)()},isSubmitting:t,error:r}},Aoe=({shouldBlock:i})=>{const e=E$(({currentLocation:n,nextLocation:a})=>i&&n.pathname!==a.pathname),t=Ae.useCallback(()=>{e.state==="blocked"&&e.proceed()},[e]),r=Ae.useCallback(()=>{var n;e.state==="blocked"&&((n=e.reset)==null||n.call(e))},[e]);return{showConfirmModal:e.state==="blocked",handleConfirmNavigation:t,handleCancelNavigation:r}},Ioe=({onConfirm:i,onCancel:e})=>z.jsxs(ua,{onClose:e,small:!0,children:[z.jsx(Mo,{children:be.t("Unsaved changes")}),z.jsx(so,{children:z.jsx("p",{children:be.t("You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?")})}),z.jsx(Ao,{children:z.jsxs(Wa,{children:[z.jsx(Ci,{onClick:e,secondary:!0,children:be.t("Cancel")}),z.jsx(Ci,{onClick:i,destructive:!0,children:be.t("Leave page")})]})})]}),Poe=()=>{const i=oo(),{methods:e,onUpdateOrgUnits:t,handleSubmit:r,handleStartJob:n,isSubmitting:a,error:c}=Moe(),{showConfirmModal:s,handleConfirmNavigation:h,handleCancelNavigation:f}=Aoe({shouldBlock:!a&&e.formState.isDirty}),m=()=>{i("/evaluate")};return z.jsxs(z.Fragment,{children:[z.jsx(Ci,{className:fm.backButton,small:!0,icon:z.jsx(Xm,{}),onClick:m,children:be.t("Back to evaluations")}),z.jsx(Fee,{...e,children:z.jsx("div",{className:fm.container,children:z.jsxs(I2,{children:[z.jsx(yoe,{onSubmit:r,methods:e,onUpdateOrgUnits:t}),!!c&&z.jsx(da,{error:!0,title:be.t("Error starting evaluation job"),className:fm.errorNotice,children:c.message}),z.jsx("div",{className:fm.buttons,children:z.jsx(Wa,{end:!0,children:z.jsx(Ci,{primary:!0,loading:a,onClick:n,icon:z.jsx(S3,{}),children:be.t("Start job")})})})]})})}),s&&z.jsx(Ioe,{onConfirm:h,onCancel:f})]})},Doe=()=>z.jsxs("div",{children:[z.jsx(Eu,{pageTitle:be.t("New evaluation"),pageDescription:be.t("Create a new evaluation to assess the performance of a model")}),z.jsx(Poe,{})]}),Roe="_container_1a6i8_1",Loe="_loadingContainer_1a6i8_5",Noe="_errorContainer_1a6i8_12",y1={container:Roe,loadingContainer:Loe,errorContainer:Noe},zoe="_buttonContainer_urbmf_1",joe="_leftSection_urbmf_7",f3={buttonContainer:zoe,leftSection:joe},Ooe="_inputContainer_1ore4_1",Foe="_singleSelectContainer_1ore4_11",v1={inputContainer:Ooe,singleSelectContainer:Foe},Boe=({table:i})=>{var e,t,r;return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:v1.inputContainer,children:z.jsx($d,{dense:!0,placeholder:be.t("Search"),value:((e=i.getColumn("name"))==null?void 0:e.getFilterValue())??"",onChange:n=>{var a;return(a=i.getColumn("name"))==null?void 0:a.setFilterValue(n.value)}})}),z.jsx("div",{className:v1.singleSelectContainer,children:z.jsxs(Ll,{dense:!0,clearable:!0,clearText:be.t("Clear"),selected:(t=i.getColumn("status"))==null?void 0:t.getFilterValue(),placeholder:be.t("Status"),onChange:n=>{var a;return(a=i.getColumn("status"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(es,{label:be.t("Pending"),value:Vr.PENDING}),z.jsx(es,{label:be.t("Running"),value:Vr.STARTED}),z.jsx(es,{label:be.t("Success"),value:Vr.SUCCESS}),z.jsx(es,{label:be.t("Failed"),value:Vr.FAILED}),z.jsx(es,{label:be.t("Revoked"),value:Vr.REVOKED})]})}),z.jsx("div",{className:v1.singleSelectContainer,children:z.jsxs(Ll,{dense:!0,clearable:!0,clearText:be.t("Clear"),selected:(r=i.getColumn("type"))==null?void 0:r.getFilterValue(),placeholder:be.t("Type"),onChange:n=>{var a;return(a=i.getColumn("type"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(es,{label:be.t("Create evaluation"),value:Al.CREATE_BACKTEST_WITH_DATA}),z.jsx(es,{label:be.t("Make prediction"),value:Al.MAKE_PREDICTION})]})})]})},$oe={[Vr.SUCCESS]:be.t("Success"),[Vr.PENDING]:be.t("Pending"),[Vr.STARTED]:be.t("Running"),[Vr.FAILED]:be.t("Failed"),[Vr.REVOKED]:be.t("Cancelled")},Uoe={[Vr.SUCCESS]:"success",[Vr.PENDING]:"default",[Vr.STARTED]:"info",[Vr.FAILED]:"destructive",[Vr.REVOKED]:"default"},Voe={[Vr.SUCCESS]:!1,[Vr.PENDING]:!1,[Vr.STARTED]:!0,[Vr.FAILED]:!1,[Vr.REVOKED]:!1},aD=({status:i})=>{const e=i,t=$oe[e]||e,r=Uoe[e]||"default",n=Voe[e]||!1;return i?z.jsx(hP,{label:t,variant:r,active:n}):null},Hoe={[Al.BACKTEST]:be.t("Create evaluation (Legacy)"),[Al.CREATE_BACKTEST_WITH_DATA]:be.t("Create evaluation"),[Al.MAKE_PREDICTION]:be.t("Make prediction"),[Al.CREATE_DATASET]:be.t("Create dataset")},Goe=({jobType:i})=>{const e=i,t=Hoe[e]||e;return z.jsx(z.Fragment,{children:t})},qoe="_modal_1rrd7_1",Woe="_loading_1rrd7_9",Yoe="_logContent_1rrd7_19",Zoe="_error_1rrd7_30",Yh={modal:qoe,loading:Woe,logContent:Yoe,error:Zoe},Td={LOADING:"loading",ERROR:"error",SUCCESS:"success"},Xoe=({isLoading:i,error:e})=>i?Td.LOADING:e?Td.ERROR:Td.SUCCESS,Koe=({jobId:i,status:e,onClose:t})=>{const r=Ae.useRef(null),{data:n,error:a,isLoading:c}=Vo({queryKey:["jobLogs",i],queryFn:()=>Tu.getLogsJobsJobIdLogsGet(i),refetchInterval:()=>e===Vr.PENDING||e===Vr.STARTED?10*1e3:!1,enabled:!!i});Ae.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[n]);const s=Xoe({isLoading:c,error:a});return z.jsxs(ua,{onClose:t,fluid:s===Td.SUCCESS,children:[z.jsxs(Mo,{children:[be.t("Job Logs")," - ",i]}),z.jsxs(so,{className:Yh.modal,children:[s===Td.LOADING&&z.jsx("div",{className:Yh.loading,children:z.jsx(ka,{})}),s===Td.ERROR&&z.jsxs("div",{className:Yh.loading,children:[z.jsx("p",{className:Yh.error,children:be.t("An error occurred while loading the logs.")}),a&&z.jsx("p",{className:Yh.error,children:a.message})]}),s===Td.SUCCESS&&z.jsxs("div",{children:[z.jsx("pre",{className:Yh.logContent,ref:r,children:n||be.t("No logs reported for this job")}),z.jsx("div",{style:{marginTop:"1rem"},children:z.jsx(aD,{status:e})})]})]}),z.jsx(Ao,{children:z.jsx(Ci,{onClick:t,secondary:!0,children:be.t("Close")})})]})},Qoe=({onSuccess:i,onError:e}={})=>{const t=Ws(),{show:r}=ha(be.t("Job deleted"),{success:!0}),{show:n}=ha(be.t("Failed to delete job"),{success:!1}),{mutate:a,isLoading:c,isError:s,error:h}=Vl({mutationFn:f=>Tu.deleteJobJobsJobIdDelete(f),onSuccess:(f,m)=>{t.invalidateQueries({queryKey:["jobs"]}),r(),i==null||i({id:m})},onError:f=>{console.error(f),n(),e==null||e()}});return{deleteJob:a,isLoading:c,isError:s,error:h}},Joe=({id:i,onClose:e,onDelete:t})=>{const{deleteJob:r,isLoading:n}=Qoe({onSuccess:()=>{t==null||t(),e()}});return z.jsxs(ua,{onClose:e,small:!0,children:[z.jsx(Mo,{children:be.t("Delete job")}),z.jsx(so,{children:be.t("Are you sure you want to delete this job? This action cannot be undone.")}),z.jsx(Ao,{children:z.jsxs(Wa,{end:!0,children:[z.jsx(Ci,{onClick:e,secondary:!0,disabled:n,children:be.t("Cancel")}),z.jsx(Ci,{onClick:()=>r(i),destructive:!0,disabled:n,loading:n,children:be.t("Delete")})]})})]})},ele=({onSuccess:i,onError:e}={})=>{const t=Ws(),{show:r}=ha(be.t("Job cancelled"),{success:!0}),{show:n}=ha(be.t("Failed to cancel job"),{critical:!0}),{mutate:a,isLoading:c,error:s}=Vl({mutationFn:h=>Tu.cancelJobJobsJobIdCancelPost(h),onSuccess:(h,f)=>{t.setQueryData(["jobs"],m=>m==null?void 0:m.map(y=>y.id===f?{...y,status:Vr.REVOKED}:y)),r(),i==null||i({id:f})},onError:()=>{n(),e==null||e()}});return{cancelJob:a,isLoading:c,error:s}},tle=({id:i,onClose:e,onCancel:t})=>{const{cancelJob:r,isLoading:n}=ele({onSuccess:()=>{t==null||t(),e()}});return z.jsxs(ua,{onClose:e,small:!0,children:[z.jsx(Mo,{children:be.t("Cancel job")}),z.jsx(so,{children:be.t("Are you sure you want to cancel this job? This action cannot be undone.")}),z.jsx(Ao,{children:z.jsxs(Wa,{end:!0,children:[z.jsx(Ci,{onClick:e,secondary:!0,disabled:n,children:be.t("Close")}),z.jsx(Ci,{onClick:()=>r(i),destructive:!0,disabled:n,loading:n,children:be.t("Cancel job")})]})})]})},ile=async i=>{if(!(navigator!=null&&navigator.clipboard))throw new Error("Clipboard API not available");await navigator.clipboard.writeText(i)},rle=({onSuccess:i,onError:e}={})=>{const t=Vl({mutationFn:ile,onSuccess:()=>{setTimeout(()=>{t.reset()},1500),i==null||i()},onError:()=>{e==null||e()}});return{copy:t.mutate,isCopied:t.isSuccess,isLoading:t.isLoading,error:t.error,reset:t.reset}},nle=({jobId:i,status:e,result:t,type:r})=>{const n=oo(),[a,c]=Ae.useState(!1),[s,h]=Ae.useState(!1),[f,m]=Ae.useState(!1),[y,g]=Ae.useState(!1),{show:b}=ha(be.t("Failed to copy job ID"),{success:!1}),{copy:v,isCopied:_}=rle({onError:()=>b()}),T=()=>{c(!1),h(!0)},k=()=>{r===Al.CREATE_BACKTEST_WITH_DATA||r===Al.BACKTEST?n(`/evaluate/compare?baseEvaluation=${t}`):r===Al.MAKE_PREDICTION&&n("/predict"),c(!1)};return z.jsxs(z.Fragment,{children:[z.jsx(dP,{small:!0,open:a,icon:z.jsx(Qm,{}),onClick:()=>{c(w=>!w)},component:z.jsxs(Ow,{dense:!0,children:[e===Vr.SUCCESS&&z.jsx(es,{label:be.t("Go to result"),dataTest:"job-overflow-go-to-result",disabled:!t,icon:z.jsx(Bw,{}),onClick:k}),e!==Vr.PENDING&&z.jsx(es,{label:be.t("View Logs"),dataTest:"job-overflow-view-logs",icon:z.jsx(qw,{}),onClick:T}),z.jsx(es,{label:be.t("Copy Job ID"),dataTest:"job-overflow-copy-job-id",icon:_?z.jsx(E3,{}):z.jsx(I3,{}),onClick:()=>{v(i)}}),(e===Vr.PENDING||e===Vr.STARTED)&&z.jsx(es,{label:be.t("Cancel"),dataTest:"job-overflow-cancel",destructive:!0,icon:z.jsx(B3,{}),onClick:()=>{g(!0),c(!1)}}),(e===Vr.SUCCESS||e===Vr.FAILED||e===Vr.REVOKED)&&z.jsx(es,{label:be.t("Delete"),dataTest:"job-overflow-delete",destructive:!0,icon:z.jsx(Km,{}),onClick:()=>{m(!0),c(!1)}})]})}),s&&z.jsx(Koe,{jobId:i,status:e,onClose:()=>h(!1)}),f&&z.jsx(Joe,{id:i,onClose:()=>m(!1)}),y&&z.jsx(tle,{id:i,onClose:()=>g(!1)})]})},eu=F2(),sle=[eu.accessor("id",{header:be.t("ID"),enableSorting:!1}),eu.accessor("status",{header:be.t("Status"),filterFn:"equals",enableSorting:!1,cell:i=>z.jsx(aD,{status:i.getValue()})}),eu.accessor("name",{header:be.t("Name"),filterFn:"includesString"}),eu.accessor("type",{header:be.t("Type"),enableSorting:!1,cell:i=>z.jsx(Goe,{jobType:i.getValue()})}),eu.accessor("start_time",{header:be.t("Start date"),cell:i=>{const e=i.getValue();return e?Dd(new Date(e),"dd-MM-yyyy hh:mm"):void 0}}),eu.accessor("end_time",{header:be.t("End date"),cell:i=>{const e=i.getValue();return e?Dd(new Date(e),"dd-MM-yyyy hh:mm"):void 0}}),eu.display({id:"duration",header:be.t("Duration"),cell:i=>{const e=i.row.original.start_time,t=i.row.original.end_time;if(!e||!t)return;const r=YH({start:new Date(e),end:new Date(t)});return GH(r,{format:["hours","minutes","seconds"],delimiter:" "})}}),eu.display({id:"actions",header:be.t("Actions"),cell:i=>{const e=i.row.original.status;return z.jsx(nle,{jobId:i.row.original.id,result:i.row.original.result,status:e,type:i.row.original.type})}})],ale=i=>i.getIsSorted()||"default",ole=({jobs:i})=>{const e=q2({data:i||[],columns:sle,initialState:{sorting:[{id:"start_time",desc:!0}],columnVisibility:{id:!1}},getRowId:r=>r.id.toString(),enableRowSelection:!1,getSortedRowModel:eD(),getCoreRowModel:H2(),getFilteredRowModel:G2(),getPaginationRowModel:JP()}),t=e.getRowModel().rows.length>0;return z.jsxs("div",{children:[z.jsx("div",{className:f3.buttonContainer,children:z.jsx("div",{className:f3.leftSection,children:z.jsx(Boe,{table:e})})}),z.jsxs(jv,{children:[z.jsx(Nv,{children:e.getHeaderGroups().map(r=>z.jsx(Sl,{children:r.headers.map(n=>z.jsx(Ov,{fixed:!0,top:!0,...n.column.getCanSort()?{sortDirection:ale(n.column),sortIconTitle:be.t("Sort by {{column}}",{column:n.column.id}),onSortIconClick:()=>n.column.toggleSorting()}:{},children:n.isPlaceholder?null:sv(n.column.columnDef.header,n.getContext())},n.id))},r.id))}),z.jsx(Pv,{children:t?e.getRowModel().rows.map(r=>z.jsx(Sl,{children:r.getVisibleCells().map(n=>z.jsx(fu,{children:sv(n.column.columnDef.cell,n.getContext())},n.id))},r.id)):z.jsx(Sl,{children:z.jsx(fu,{colSpan:String(e.getAllColumns().length),align:"center",children:be.t("No jobs available")})})}),z.jsx(Lv,{children:z.jsx(Sl,{children:z.jsx(fu,{colSpan:String(e.getAllColumns().length),children:z.jsx(B_,{page:e.getState().pagination.pageIndex+1,pageSize:e.getState().pagination.pageSize,onPageSizeChange:r=>e.setPageSize(r),pageCount:e.getPageCount(),total:e.getRowCount(),isLastPage:!e.getCanNextPage(),onPageChange:r=>e.setPageIndex(r-1)})})})})]})]})},lle=()=>{const{jobs:i,error:e,isLoading:t}=tD();return t?z.jsx("div",{className:y1.loadingContainer,children:z.jsx(ka,{})}):e?z.jsx("div",{className:y1.errorContainer,children:z.jsx(da,{error:!0,title:be.t("Error loading jobs"),children:e.message||be.t("An unknown error occurred")})}):z.jsxs(z.Fragment,{children:[z.jsx(Eu,{pageTitle:be.t("Active jobs"),pageDescription:be.t("View and manage currently running jobs and their status.")}),z.jsx(I2,{className:y1.container,children:z.jsx(ole,{jobs:i||[]})})]})},cle="_selector_1powy_2",ule="_selectorWrapper_1powy_6",dle="_messageWrapper_1powy_10",y0={selector:cle,selectorWrapper:ule,messageWrapper:dle},hle=({onSelect:i,selected:e,compatibleEvaluationId:t,...r})=>{const{data:n,isLoading:a,isError:c,error:s,isSuccess:h}=Vo({queryKey:["backtests","compatible",t],queryFn:()=>t?nl.getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(t):Promise.resolve([]),enabled:t!=null,staleTime:3e5,cacheTime:3e5}),f=he.useRef(i);f.current=i,Ae.useEffect(()=>{e&&t!=null&&h&&!n.some(y=>y.id==(e==null?void 0:e.id))&&f.current(void 0)},[n,t,h]);const m=()=>h&&(n==null?void 0:n.length)===0?z.jsx(x1,{children:be.t("No compatible evaluations found")}):s?z.jsx(x1,{error:!0,children:s.message??s.toString()}):null;return z.jsx("div",{className:y0.selectorWrapper,children:z.jsx(oD,{available:n??[],selected:e,onSelect:i,disabled:t==null,error:c,loading:a,listMessage:m(),...r,placeholder:be.t("Select evaluation to compare with")})})},oD=({onSelect:i,selected:e,available:t,listMessage:r,...n})=>{const{availableMap:a,availableList:c}=Ae.useMemo(()=>{const s=new Map(t.map(h=>[h.id.toString(),h]));return e&&!s.has(e.id.toString())&&s.set(e==null?void 0:e.id.toString(),e),{availableMap:s,availableList:Array.from(s.values())}},[t,n.loading,e]);return z.jsx("div",{className:y0.selectorWrapper,children:z.jsxs(Ll,{className:y0.selector,onChange:({selected:s})=>i(a.get(s)),selected:(e==null?void 0:e.id.toString())||"",clearable:!0,filterable:!0,noMatchText:be.t("No evaluations found"),...n,prefix:e!=null?n.prefix||be.t("Evaluation"):void 0,children:[r&&z.jsx("div",{className:y0.messageWrapper,children:r}),c.map(s=>z.jsx(Cs,{value:s.id.toString(),label:s.name??s.id.toString()},s.id))]})})},ple="_wrapper_18j5m_2",fle="_compareSelectors_18j5m_9",mle="_loaderWrapper_18j5m_15",gle="_loader_18j5m_15",yle="_selectorRow_18j5m_27",vle="_selectionToolbar_18j5m_37",xle="_emptySelection_18j5m_47",ble="_iconGroup_18j5m_65",wle="_arrowIcons_18j5m_74",_le="_textGroup_18j5m_91",Cle="_footerSlider_18j5m_107",Qo={wrapper:ple,compareSelectors:fle,loaderWrapper:mle,loader:gle,selectorRow:yle,selectionToolbar:vle,emptySelection:xle,iconGroup:ble,arrowIcons:wle,textGroup:_le,footerSlider:Cle},Tle=[.1,.25,.5,.75,.9],Sle=i=>{const[e,t]=i.data,r=EI(e);return{evaluationEntries:e.map(n=>({...n,modelName:i.evaluation.name||void 0})),actualCases:t.data,splitPeriods:r,evaluation:i.evaluation}},Ele=i=>i&&i.evaluation&&Array.isArray(i.data)&&i.data.length===2,kle=i=>!!i.state.data&&Ele(i.state.data),Mle={splitPeriod:void 0,orgUnits:void 0},Ale=(i,{orgUnits:e,splitPeriod:t}=Mle)=>{var y;const r=Ws(),n=Ae.useMemo(()=>e?e.sort():[],[e]),a=(g,{includeOrgunits:b}={includeOrgunits:!0})=>["evaluation-entry",g,{splitPeriod:t,...b&&{orgUnits:n}}],c=Ae.useCallback(g=>{if(!e||e.length===0)return;const b=new Set(e),v=a(g,{includeOrgunits:!1}),_=r.getQueryCache().find(v,{exact:!1,predicate:T=>{var w;const k=(w=T.queryKey[2])==null?void 0:w.orgUnits;if(kle(T)&&k){const E=new Set(k);return e.every(M=>E.has(M))}return!1}});if(_){const T=_.state.data,k=T.data[0].filter(w=>b.has(w.orgUnit));return{...T,data:[k,T.data[1]]}}},[t,e,r]),s=g4({queries:i.map(g=>({queryKey:a(g.id),queryFn:async()=>{const b=nl.getEvaluationEntriesAnalyticsEvaluationEntryGet(g.id,Tle,t,e),v=nl.getActualCasesAnalyticsActualCasesBacktestIdGet(g.id,e);return{data:await Promise.all([b,v]),evaluation:g}},initialData:c(g.id),select:Sle,enabled:!!g&&(e?e.length>0:!0),staleTime:60*1e3}))}),h=Ae.useMemo(()=>{const g=s.flatMap(_=>_.data||[]),b=s.flatMap(_=>{var T;return((T=_.data)==null?void 0:T.splitPeriods)||[]});return{viewData:Ile(g),splitPeriods:b}},[s]),f=s.some(g=>g.isLoading&&g.isFetching),m=((y=s.find(g=>g.isError))==null?void 0:y.error)||void 0;return{queries:s,combined:h,isLoading:f,error:m}},Ile=i=>{const e=i.flatMap(a=>a.evaluationEntries),t=Array.from(new Set(e.map(a=>a.splitPeriod))),r=Array.from(new Set(e.map(a=>a.orgUnit))),n=a=>{const c=a[0],s=a[1],h=a[a.length-2],f=a[a.length-1];return m=>m.quantile===c?"quantile_low":m.quantile===f?"quantile_high":m.quantile===.5?"median":m.quantile===s?"quantile_mid_low":m.quantile===h?"quantile_mid_high":"unknown"};return t.map(a=>({splitPoint:a,evaluation:r.map(c=>({orgUnitName:c,orgUnitId:c,models:i.map(s=>{const h=s.evaluationEntries.filter(b=>b.orgUnit===c&&b.splitPeriod===a),f=s.actualCases.filter(b=>b.ou===c),m=h.map(b=>b.quantile),y=SI(h,n(m)),g=TI(y,f);return{modelName:s.evaluation.name||s.evaluation.modelId,data:g}})}))}))},Ple="_help_s6y39_2",Dle={help:Ple},Rle=10,Lle=({available:i,selected:e,onSelect:t,maxSelections:r=Rle,...n})=>{const[a,c]=Ae.useState(null),s=a!==null?a:e,{orgUnits:h}=Ae.useMemo(()=>{const f=new Map(i.map(m=>[m.id,m]));return s.forEach(m=>{f.get(m)||f.set(m,{id:m,displayName:m})}),{orgUnits:Array.from(f.values())}},[i,s]);return z.jsxs(r_,{prefix:be.t("Organisation Units"),selected:s,disabled:i.length<1,filterable:!0,filterPlaceholder:be.t("Search organisation units"),onChange:({selected:f},m)=>{m.type==="click"?t({selected:f}):c(f.slice(0,r))},onBlur:()=>{a!=null&&(t({selected:a??[]}),c(null))},inputMaxHeight:"26px",...n,children:[e.length>=r&&z.jsx(x1,{className:Dle.help,warning:!0,children:be.t("You cannot select more than {{max}} organisation units at a time",{max:r})}),h.map(f=>z.jsx(n_,{label:f.displayName,value:f.id},f.id))]})},Nle=Ec({baseEvaluation:Vs().optional(),comparisonEvaluation:rv(Vs()).optional().default([])}),il={baseEvaluation:"baseEvaluation",comparisonEvaluation:"comparisonEvaluation",splitPeriod:"splitPeriod",orgUnit:"orgUnit"},zle=i=>({baseEvaluation:i.get(il.baseEvaluation),comparisonEvaluation:i.getAll(il.comparisonEvaluation)});function jle(i,e){return typeof i=="function"?i(e):i}const lD=(i,e)=>t=>{const r=new URLSearchParams(t),n=jle(e,t.getAll(i));return r.delete(i),n==null||n.forEach(a=>{r.append(i,a)}),r},Ole=()=>{const[i,e]=r2(),t=Ae.useMemo(()=>{const s=zle(i),h=Nle.safeParse(s);return h.success?h.data:{baseEvalation:void 0,comparisonEvaluation:[]}},[i]),r=Ae.useCallback(s=>{e(h=>{const f=new URLSearchParams(h);return s?f.set(il.baseEvaluation,s):f.delete(il.baseEvaluation),f})},[e]),n=Ae.useCallback(s=>{e(lD(il.comparisonEvaluation,s))},[e]),a=Ae.useCallback(s=>n(s?[s]:[]),[n]),c=t.comparisonEvaluation[0];return{baseEvaluation:t.baseEvaluation,comparisonEvaluations:t.comparisonEvaluation,comparisonEvaluation:c,setBaseEvaluation:r,setComparisonEvaluations:n,setComparisonEvaluation:a}},Fle=()=>{const{backtests:i}=VP(),{baseEvaluation:e,comparisonEvaluation:t,setBaseEvaluation:r,setComparisonEvaluation:n}=Ole();return{...Ae.useMemo(()=>{if(!i||i.length===0)return{baseEvaluation:void 0,comparisonEvaluation:void 0,comparisonEvaluations:[]};const c=new Map(i.map(s=>[s.id.toString(),s]));return{baseEvaluation:e?c.get(e):void 0,comparisonEvaluation:t?c.get(t):void 0}},[i,e,t]),setBaseEvaluation:r,setComparisonEvaluation:n,evaluations:i}},Ble=()=>{const[i,e]=r2(),t=i.get(il.splitPeriod),r=Ae.useCallback(n=>{e(a=>{const c=new URLSearchParams(a);return n?c.set(il.splitPeriod,n):c.delete(il.splitPeriod),c})},[e]);return[t,r]},$le=({initialValue:i}={})=>{const[e,t]=r2(),[r,n]=Ae.useState(!1),a=e.has(il.orgUnit),c=!r&&i&&!a?i:e.getAll(il.orgUnit),s=Ae.useCallback(h=>(n(!0),t(lD(il.orgUnit,h))),[t,n]);return[c,s]},Ule=i=>{const{baseEvaluation:e,comparisonEvaluation:t}=i;return Vo({queryKey:["backtest-overlap",[e,t]],queryFn:()=>nl.getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t),staleTime:60*1e3*5,enabled:!!e&&!!t,select:Ae.useCallback(r=>({...r,splitPeriods:r.splitPeriods.sort()}),[])})},Vle=({maxSelectedOrgUnits:i=10}={})=>{const{evaluations:e,baseEvaluation:t,comparisonEvaluation:r,setBaseEvaluation:n,setComparisonEvaluation:a}=Fle(),c=Ae.useMemo(()=>[t,r].filter(w=>!!w),[t,r]),[s,h]=Ble(),f=Ule({baseEvaluation:t==null?void 0:t.id,comparisonEvaluation:r==null?void 0:r.id}),m=Ae.useMemo(()=>(f.isSuccess?f.data.splitPeriods:(t==null?void 0:t.splitPeriods)??[]).sort(),[f.data,t==null?void 0:t.splitPeriods]),y=s??m[0],{availableOrgUnitIds:g,availableOrgUnitSet:b}=Ae.useMemo(()=>{const w=f.data?f.data.orgUnits:(t==null?void 0:t.orgUnits)??[];return{availableOrgUnitIds:w,availableOrgUnitSet:new Set(w)}},[f.data,t==null?void 0:t.orgUnits]),[v,_]=$le({initialValue:g.slice(0,i)}),T=Ae.useMemo(()=>v.filter(w=>b.has(w)),[v,b]),k=f.isSuccess&&f.data.splitPeriods.length===0;return Ae.useEffect(()=>{y&&m.length>0&&!m.some(w=>w===s)&&h(void 0)},[m,s]),{selectedEvaluations:c,baseEvaluation:t,comparisonEvaluation:r,selectedSplitPeriod:y,selectedOrgUnits:T,availableOrgUnitIds:g,evaluations:e,splitPeriods:m,hasNoMatchingSplitPeriods:k,setBaseEvaluation:n,setComparisonEvaluation:a,setSelectedOrgUnits:_,setSelectedSplitPeriod:h}},Hle=i=>i&&Array.isArray(i.organisationUnits),Gle=i=>!!i.state.data&&Hle(i.state.data),qle=i=>{const e=Ws(),t=Ae.useMemo(()=>{const r=new Set(i),n=e.getQueryCache().findAll(["organisationUnits"],{exact:!1}).flatMap(s=>{var h;return Gle(s)?((h=s.state.data)==null?void 0:h.organisationUnits)??[]:[]}).filter(s=>r.has(s.id)),a=new Map(n.map(s=>[s.id,s]));return i.every(s=>a.has(s))?{organisationUnits:Array.from(a.values())}:void 0},[i,e]);return Np({queryKey:["organisationUnits",i],initialData:t,query:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"],filter:`id:in:[${i.join(",")}]`}},enabled:i.length>0,select:Ae.useCallback(r=>{if(r.organisationUnits.length!==i.length){const n=new Set(r.organisationUnits.map(c=>c.id)),a=i.filter(c=>!n.has(c)).map(c=>({id:c,displayName:c}));return{organisationUnits:r.organisationUnits.concat(a)}}return r},[i]),cacheTime:1/0,staleTime:1/0})},Wle="_wrapper_mo3m0_1",Yle="_sliderContainer_mo3m0_9",Zle="_labelsContainer_mo3m0_13",Xle="_label_mo3m0_13",Kle="_selectedLabelContainer_mo3m0_25",Qle="_selectedLabel_mo3m0_25",Jle="_track_mo3m0_38",ece="_thumb_mo3m0_44",tce="_mark_mo3m0_56",pc={wrapper:Wle,sliderContainer:Yle,labelsContainer:Zle,label:Xle,selectedLabelContainer:Kle,selectedLabel:Qle,track:Jle,thumb:ece,mark:tce};var cD={},W2={},Y2={},zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.Direction=void 0;var m3;(function(i){i.Right="to right",i.Left="to left",i.Down="to bottom",i.Up="to top"})(m3||(zp.Direction=m3={}));(function(i){var e=wn&&wn.__spreadArray||function(F,O,R){if(R||arguments.length===2)for(var L=0,G=O.length,V;L<G;L++)(V||!(L in O))&&(V||(V=Array.prototype.slice.call(O,0,L)),V[L]=O[L]);return F.concat(V||Array.prototype.slice.call(O))};Object.defineProperty(i,"__esModule",{value:!0}),i.isIOS=i.useThumbOverlap=i.assertUnreachable=i.voidFn=i.getTrackBackground=i.replaceAt=i.schd=i.translate=i.getClosestThumbIndex=i.translateThumbs=i.getPaddingAndBorder=i.getMargin=i.checkInitialOverlap=i.checkValuesAgainstBoundaries=i.checkBoundaries=i.isVertical=i.relativeValue=i.normalizeValue=i.isStepDivisible=i.isTouchEvent=i.getStepDecimals=void 0;var t=Ae,r=zp,n=function(F){var O=F.toString().split(".")[1];return O?O.length:0};i.getStepDecimals=n;function a(F){return F.touches&&F.touches.length||F.changedTouches&&F.changedTouches.length}i.isTouchEvent=a;function c(F,O,R){var L=(O-F)/R,G=8,V=Number(L.toFixed(G));return parseInt(V.toString(),10)===V}i.isStepDivisible=c;function s(F,O,R,L,G,V,$){var q=1e11;if(F=Math.round(F*q)/q,!V){var W=$[O-1],se=$[O+1];if(W&&W>F)return W;if(se&&se<F)return se}if(F>L)return L;if(F<R)return R;var fe=Math.floor(F*q-R*q)%Math.floor(G*q),re=Math.floor(F*q-Math.abs(fe)),le=fe===0?F:re/q,Se=Math.abs(fe/q)<G/2?le:le+G,ye=(0,i.getStepDecimals)(G);return parseFloat(Se.toFixed(ye))}i.normalizeValue=s;function h(F,O,R){return(F-O)/(R-O)}i.relativeValue=h;function f(F){return F===r.Direction.Up||F===r.Direction.Down}i.isVertical=f;function m(F,O,R){if(O>=R)throw new RangeError("min (".concat(O,") is equal/bigger than max (").concat(R,")"));if(F<O)throw new RangeError("value (".concat(F,") is smaller than min (").concat(O,")"));if(F>R)throw new RangeError("value (".concat(F,") is bigger than max (").concat(R,")"))}i.checkBoundaries=m;function y(F,O,R){return F<O?O:F>R?R:F}i.checkValuesAgainstBoundaries=y;function g(F){if(!(F.length<2)&&!F.slice(1).every(function(O,R){return F[R]<=O}))throw new RangeError("values={[".concat(F,"]} needs to be sorted when allowOverlap={false}"))}i.checkInitialOverlap=g;function b(F){var O=window.getComputedStyle(F);return{top:parseInt(O["margin-top"],10),bottom:parseInt(O["margin-bottom"],10),left:parseInt(O["margin-left"],10),right:parseInt(O["margin-right"],10)}}i.getMargin=b;function v(F){var O=window.getComputedStyle(F);return{top:parseInt(O["padding-top"],10)+parseInt(O["border-top-width"],10),bottom:parseInt(O["padding-bottom"],10)+parseInt(O["border-bottom-width"],10),left:parseInt(O["padding-left"],10)+parseInt(O["border-left-width"],10),right:parseInt(O["padding-right"],10)+parseInt(O["border-right-width"],10)}}i.getPaddingAndBorder=v;function _(F,O,R){var L=R?-1:1;F.forEach(function(G,V){return k(G,L*O[V].x,O[V].y)})}i.translateThumbs=_;function T(F,O,R,L){for(var G=0,V=K(F[0],O,R,L),$=1;$<F.length;$++){var q=K(F[$],O,R,L);q<V&&(V=q,G=$)}return G}i.getClosestThumbIndex=T;function k(F,O,R){F.style.transform="translate(".concat(O,"px, ").concat(R,"px)")}i.translate=k;var w=function(F){var O=[],R=null,L=function(){for(var G=[],V=0;V<arguments.length;V++)G[V]=arguments[V];O=G,!R&&(R=requestAnimationFrame(function(){R=null,F.apply(void 0,O)}))};return L};i.schd=w;function E(F,O,R){var L=F.slice(0);return L[O]=R,L}i.replaceAt=E;function A(F){var O=F.values,R=F.colors,L=F.min,G=F.max,V=F.direction,$=V===void 0?r.Direction.Right:V,q=F.rtl,W=q===void 0?!1:q;W&&$===r.Direction.Right?$=r.Direction.Left:W&&r.Direction.Left&&($=r.Direction.Right);var se=O.slice(0).sort(function(re,le){return re-le}).map(function(re){return(re-L)/(G-L)*100}),fe=se.reduce(function(re,le,Se){return"".concat(re,", ").concat(R[Se]," ").concat(le,"%, ").concat(R[Se+1]," ").concat(le,"%")},"");return"linear-gradient(".concat($,", ").concat(R[0]," 0%").concat(fe,", ").concat(R[R.length-1]," 100%)")}i.getTrackBackground=A;function M(){}i.voidFn=M;function S(F){throw new Error("Didn't expect to get here")}i.assertUnreachable=S;var N=function(F,O,R,L,G){G===void 0&&(G=function($){return $});var V=Math.ceil(e([F],Array.from(F.children),!0).reduce(function($,q){var W=Math.ceil(q.getBoundingClientRect().width);if(q.innerText&&q.innerText.includes(R)&&q.childElementCount===0){var se=q.cloneNode(!0);se.innerHTML=G(O.toFixed(L)),se.style.visibility="hidden",document.body.appendChild(se),W=Math.ceil(se.getBoundingClientRect().width),document.body.removeChild(se)}return W>$?W:$},F.getBoundingClientRect().width));return V},Y=function(F,O,R,L,G,V,$){$===void 0&&($=function(se){return se});var q=[],W=function(se){var fe=N(R[se],L[se],G,V,$),re=O[se].x;O.forEach(function(le,Se){var ye=le.x,Ee=N(R[Se],L[Se],G,V,$);se!==Se&&(re>=ye&&re<=ye+Ee||re+fe>=ye&&re+fe<=ye+Ee)&&(q.includes(Se)||(q.push(se),q.push(Se),q=e(e([],q,!0),[se,Se],!1),W(Se)))})};return W(F),Array.from(new Set(q.sort()))},Z=function(F,O,R,L,G,V){L===void 0&&(L=.1),G===void 0&&(G=" - "),V===void 0&&(V=function(Se){return Se});var $=(0,i.getStepDecimals)(L),q=(0,t.useState)({}),W=q[0],se=q[1],fe=(0,t.useState)(V(O[R].toFixed($))),re=fe[0],le=fe[1];return(0,t.useEffect)(function(){if(F){var Se=F.getThumbs();if(Se.length<1)return;var ye={},Ee=F.getOffsets(),J=Y(R,Ee,Se,O,G,$,V),ie=V(O[R].toFixed($));if(J.length){var oe=J.reduce(function(ve,Ce,je,Me){return ve.length?e(e([],ve,!0),[Ee[Me[je]].x],!1):[Ee[Me[je]].x]},[]);if(Math.min.apply(Math,oe)===Ee[R].x){var we=[];J.forEach(function(ve){we.push(O[ve].toFixed($))}),ie=Array.from(new Set(we.sort(function(ve,Ce){return parseFloat(ve)-parseFloat(Ce)}))).map(V).join(G);var ee=Math.min.apply(Math,oe),ae=Math.max.apply(Math,oe),ue=Se[J[oe.indexOf(ae)]].getBoundingClientRect().width;ye.left="".concat(Math.abs(ee-(ae+ue))/2,"px"),ye.transform="translate(-50%, 0)"}else ye.visibility="hidden"}le(ie),se(ye)}},[F,O]),[re,W]};i.useThumbOverlap=Z;function K(F,O,R,L){var G=F.getBoundingClientRect(),V=G.left,$=G.top,q=G.width,W=G.height;return f(L)?Math.abs(R-($+W/2)):Math.abs(O-(V+q/2))}var B=function(){var F,O=((F=navigator.userAgentData)===null||F===void 0?void 0:F.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(O)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};i.isIOS=B})(Y2);var ice=wn&&wn.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rce=wn&&wn.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),nce=wn&&wn.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),sce=wn&&wn.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&rce(e,i,t);return nce(e,i),e},g3=wn&&wn.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(W2,"__esModule",{value:!0});var Xy=sce(Ae),$r=Y2,As=zp,ace=["ArrowRight","ArrowUp","k","PageUp"],oce=["ArrowLeft","ArrowDown","j","PageDown"],lce=function(i){ice(e,i);function e(t){var r=i.call(this,t)||this;if(r.trackRef=Xy.createRef(),r.thumbRefs=[],r.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(r.props.values.length).fill(0).map(function(n,a){return a}),isChanged:!1,markOffsets:[]},r.getOffsets=function(){var n=r.props,a=n.direction,c=n.values,s=n.min,h=n.max,f=r.trackRef.current;if(!f)return console.warn("No track element found."),[];var m=f.getBoundingClientRect(),y=(0,$r.getPaddingAndBorder)(f);return r.getThumbs().map(function(g,b){var v={x:0,y:0},_=g.getBoundingClientRect(),T=(0,$r.getMargin)(g);switch(a){case As.Direction.Right:return v.x=(T.left+y.left)*-1,v.y=((_.height-m.height)/2+y.top)*-1,v.x+=m.width*(0,$r.relativeValue)(c[b],s,h)-_.width/2,v;case As.Direction.Left:return v.x=(T.right+y.right)*-1,v.y=((_.height-m.height)/2+y.top)*-1,v.x+=m.width-m.width*(0,$r.relativeValue)(c[b],s,h)-_.width/2,v;case As.Direction.Up:return v.x=((_.width-m.width)/2+T.left+y.left)*-1,v.y=-y.left,v.y+=m.height-m.height*(0,$r.relativeValue)(c[b],s,h)-_.height/2,v;case As.Direction.Down:return v.x=((_.width-m.width)/2+T.left+y.left)*-1,v.y=-y.left,v.y+=m.height*(0,$r.relativeValue)(c[b],s,h)-_.height/2,v;default:return(0,$r.assertUnreachable)(a)}})},r.getThumbs=function(){return r.trackRef&&r.trackRef.current?Array.from(r.trackRef.current.children).filter(function(n){return n.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},r.getTargetIndex=function(n){return r.getThumbs().findIndex(function(a){return a===n.target||a.contains(n.target)})},r.addTouchEvents=function(n){document.addEventListener("touchmove",r.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",r.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",r.schdOnEnd,{passive:!1})},r.addMouseEvents=function(n){document.addEventListener("mousemove",r.schdOnMouseMove),document.addEventListener("mouseup",r.schdOnEnd)},r.onMouseDownTrack=function(n){var a;if(!(n.button!==0||(0,$r.isIOS)()))if(n.persist(),n.preventDefault(),r.addMouseEvents(n.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(s){var h;return(h=s.current)===null||h===void 0?void 0:h.contains(n.target)}))return;r.setState({draggedTrackPos:[n.clientX,n.clientY]},function(){return r.onMove(n.clientX,n.clientY)})}else{var c=(0,$r.getClosestThumbIndex)(r.thumbRefs.map(function(s){return s.current}),n.clientX,n.clientY,r.props.direction);(a=r.thumbRefs[c].current)===null||a===void 0||a.focus(),r.setState({draggedThumbIndex:c},function(){return r.onMove(n.clientX,n.clientY)})}},r.onResize=function(){(0,$r.translateThumbs)(r.getThumbs(),r.getOffsets(),r.props.rtl),r.calculateMarkOffsets()},r.onTouchStartTrack=function(n){var a;if(n.persist(),r.addTouchEvents(n.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(s){var h;return(h=s.current)===null||h===void 0?void 0:h.contains(n.target)}))return;r.setState({draggedTrackPos:[n.touches[0].clientX,n.touches[0].clientY]},function(){return r.onMove(n.touches[0].clientX,n.touches[0].clientY)})}else{var c=(0,$r.getClosestThumbIndex)(r.thumbRefs.map(function(s){return s.current}),n.touches[0].clientX,n.touches[0].clientY,r.props.direction);(a=r.thumbRefs[c].current)===null||a===void 0||a.focus(),r.setState({draggedThumbIndex:c},function(){return r.onMove(n.touches[0].clientX,n.touches[0].clientY)})}},r.onMouseOrTouchStart=function(n){if(!r.props.disabled){var a=(0,$r.isTouchEvent)(n);if(!(!a&&n.button!==0)){var c=r.getTargetIndex(n);c!==-1&&(a?r.addTouchEvents(n):r.addMouseEvents(n),r.setState({draggedThumbIndex:c,thumbZIndexes:r.state.thumbZIndexes.map(function(s,h){return h===c?Math.max.apply(Math,r.state.thumbZIndexes):s<=r.state.thumbZIndexes[c]?s:s-1})}))}}},r.onMouseMove=function(n){n.preventDefault(),r.onMove(n.clientX,n.clientY)},r.onTouchMove=function(n){n.preventDefault(),r.onMove(n.touches[0].clientX,n.touches[0].clientY)},r.onKeyDown=function(n){var a=r.props,c=a.values,s=a.onChange,h=a.step,f=a.rtl,m=a.direction,y=r.state.isChanged,g=r.getTargetIndex(n.nativeEvent),b=f||m===As.Direction.Left||m===As.Direction.Down?-1:1;g!==-1&&(ace.includes(n.key)?(n.preventDefault(),r.setState({draggedThumbIndex:g,isChanged:!0}),s((0,$r.replaceAt)(c,g,r.normalizeValue(c[g]+b*(n.key==="PageUp"?h*10:h),g)))):oce.includes(n.key)?(n.preventDefault(),r.setState({draggedThumbIndex:g,isChanged:!0}),s((0,$r.replaceAt)(c,g,r.normalizeValue(c[g]-b*(n.key==="PageDown"?h*10:h),g)))):n.key==="Tab"?r.setState({draggedThumbIndex:-1},function(){y&&r.fireOnFinalChange()}):y&&r.fireOnFinalChange())},r.onKeyUp=function(n){var a=r.state.isChanged;r.setState({draggedThumbIndex:-1},function(){a&&r.fireOnFinalChange()})},r.onMove=function(n,a){var c=r.state,s=c.draggedThumbIndex,h=c.draggedTrackPos,f=r.props,m=f.direction,y=f.min,g=f.max,b=f.onChange,v=f.values,_=f.step,T=f.rtl;if(s===-1&&h[0]===-1&&h[1]===-1)return null;var k=r.trackRef.current;if(!k)return null;var w=k.getBoundingClientRect(),E=(0,$r.isVertical)(m)?w.height:w.width;if(h[0]!==-1&&h[1]!==-1){var A=n-h[0],M=a-h[1],S=0;switch(m){case As.Direction.Right:case As.Direction.Left:S=A/E*(g-y);break;case As.Direction.Down:case As.Direction.Up:S=M/E*(g-y);break;default:(0,$r.assertUnreachable)(m)}if(T&&(S*=-1),Math.abs(S)>=_/2){for(var N=0;N<r.thumbRefs.length;N++){if(v[N]===g&&Math.sign(S)===1||v[N]===y&&Math.sign(S)===-1)return;var Y=v[N]+S;Y>g?S=g-v[N]:Y<y&&(S=y-v[N])}for(var Z=v.slice(0),N=0;N<r.thumbRefs.length;N++)Z=(0,$r.replaceAt)(Z,N,r.normalizeValue(v[N]+S,N));r.setState({draggedTrackPos:[n,a]}),b(Z)}}else{var K=0;switch(m){case As.Direction.Right:K=(n-w.left)/E*(g-y)+y;break;case As.Direction.Left:K=(E-(n-w.left))/E*(g-y)+y;break;case As.Direction.Down:K=(a-w.top)/E*(g-y)+y;break;case As.Direction.Up:K=(E-(a-w.top))/E*(g-y)+y;break;default:(0,$r.assertUnreachable)(m)}T&&(K=g+y-K),Math.abs(v[s]-K)>=_/2&&b((0,$r.replaceAt)(v,s,r.normalizeValue(K,s)))}},r.normalizeValue=function(n,a){var c=r.props,s=c.min,h=c.max,f=c.step,m=c.allowOverlap,y=c.values;return(0,$r.normalizeValue)(n,a,s,h,f,m,y)},r.onEnd=function(n){if(n.preventDefault(),document.removeEventListener("mousemove",r.schdOnMouseMove),document.removeEventListener("touchmove",r.schdOnTouchMove),document.removeEventListener("mouseup",r.schdOnEnd),document.removeEventListener("touchend",r.schdOnEnd),document.removeEventListener("touchcancel",r.schdOnEnd),r.state.draggedThumbIndex===-1&&r.state.draggedTrackPos[0]===-1&&r.state.draggedTrackPos[1]===-1)return null;r.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){r.fireOnFinalChange()})},r.fireOnFinalChange=function(){r.setState({isChanged:!1});var n=r.props,a=n.onFinalChange,c=n.values;a&&a(c)},r.updateMarkRefs=function(n){if(!n.renderMark){r.numOfMarks=void 0,r.markRefs=void 0;return}r.numOfMarks=(n.max-n.min)/r.props.step,r.markRefs=[];for(var a=0;a<r.numOfMarks+1;a++)r.markRefs[a]=Xy.createRef()},r.calculateMarkOffsets=function(){if(!(!r.props.renderMark||!r.trackRef||!r.numOfMarks||!r.markRefs||r.trackRef.current===null)){for(var n=window.getComputedStyle(r.trackRef.current),a=parseInt(n.width,10),c=parseInt(n.height,10),s=parseInt(n.paddingLeft,10),h=parseInt(n.paddingTop,10),f=[],m=0;m<r.numOfMarks+1;m++){var y=9999,g=9999;if(r.markRefs[m].current){var b=r.markRefs[m].current.getBoundingClientRect();y=b.height,g=b.width}r.props.direction===As.Direction.Left||r.props.direction===As.Direction.Right?f.push([Math.round(a/r.numOfMarks*m+s-g/2),-Math.round((y-c)/2)]):f.push([Math.round(c/r.numOfMarks*m+h-y/2),-Math.round((g-a)/2)])}r.setState({markOffsets:f})}},t.step===0)throw new Error('"step" property should be a positive number');return r.schdOnMouseMove=(0,$r.schd)(r.onMouseMove),r.schdOnTouchMove=(0,$r.schd)(r.onTouchMove),r.schdOnEnd=(0,$r.schd)(r.onEnd),r.thumbRefs=t.values.map(function(){return Xy.createRef()}),r.updateMarkRefs(t),r}return e.prototype.componentDidMount=function(){var t=this,r=this.props,n=r.values,a=r.min,c=r.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,$r.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(s){return(0,$r.checkBoundaries)(s,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,$r.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(s){(0,$r.isStepDivisible)(a,s,c)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(t,r){var n=this.props,a=n.max,c=n.min,s=n.step,h=n.values,f=n.rtl;(t.max!==a||t.min!==c||t.step!==s)&&this.updateMarkRefs(this.props),(0,$r.translateThumbs)(this.getThumbs(),this.getOffsets(),f),(t.max!==a||t.min!==c||t.step!==s||r.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),h.forEach(function(m){(0,$r.isStepDivisible)(c,m,s)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var t={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,t),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var t=this,r=this.props,n=r.label,a=r.labelledBy,c=r.renderTrack,s=r.renderThumb,h=r.renderMark,f=h===void 0?function(){return null}:h,m=r.values,y=r.min,g=r.max,b=r.allowOverlap,v=r.disabled,_=this.state,T=_.draggedThumbIndex,k=_.thumbZIndexes,w=_.markOffsets;return c({props:{style:{transform:"scale(1)",cursor:T>-1?"grabbing":this.props.draggableTrack?(0,$r.isVertical)(this.props.direction)?"ns-resize":"ew-resize":m.length===1&&!v?"pointer":"inherit"},onMouseDown:v?$r.voidFn:this.onMouseDownTrack,onTouchStart:v?$r.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:v,children:g3(g3([],w.map(function(E,A,M){return f({props:{style:t.props.direction===As.Direction.Left||t.props.direction===As.Direction.Right?{position:"absolute",left:"".concat(E[0],"px"),marginTop:"".concat(E[1],"px")}:{position:"absolute",top:"".concat(E[0],"px"),marginLeft:"".concat(E[1],"px")},key:"mark".concat(A),ref:t.markRefs[A]},index:A})}),!0),m.map(function(E,A){var M=t.state.draggedThumbIndex===A;return s({index:A,value:E,isDragged:M,props:{style:{position:"absolute",zIndex:k[A],cursor:v?"inherit":M?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:A,tabIndex:v?void 0:0,"aria-valuemax":b?g:m[A+1]||g,"aria-valuemin":b?y:m[A-1]||y,"aria-valuenow":E,draggable:!1,ref:t.thumbRefs[A],"aria-label":n,"aria-labelledby":a,role:"slider",onKeyDown:v?$r.voidFn:t.onKeyDown,onKeyUp:v?$r.voidFn:t.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:As.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(Xy.Component);W2.default=lce;(function(i){var e=wn&&wn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.checkValuesAgainstBoundaries=i.relativeValue=i.useThumbOverlap=i.Direction=i.getTrackBackground=i.Range=void 0;var t=e(W2);i.Range=t.default;var r=Y2;Object.defineProperty(i,"getTrackBackground",{enumerable:!0,get:function(){return r.getTrackBackground}}),Object.defineProperty(i,"useThumbOverlap",{enumerable:!0,get:function(){return r.useThumbOverlap}}),Object.defineProperty(i,"relativeValue",{enumerable:!0,get:function(){return r.relativeValue}}),Object.defineProperty(i,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return r.checkValuesAgainstBoundaries}});var n=zp;Object.defineProperty(i,"Direction",{enumerable:!0,get:function(){return n.Direction}})})(cD);const cce=(i,e,t)=>Math.max(e,Math.min(i,t)),uce=({splitPeriods:i,selectedSplitPeriod:e,onChange:t,periods:r=[],splitPeriodLength:n=3})=>{const a=i[i.length-1],c=_=>{const T=cce(_[0],0,i.length-1),k=i[T]??a;return t(k)},s=r.findIndex(_=>_===a),h=s<0?r.length-n:s,f=i.concat(r.slice(h+1,h+n)).concat("LAST_PERIOD"),m=Math.floor(f.length/2),y=[f[0],f[m],f[f.length-2]].filter((_,T,k)=>k.indexOf(_)===T).map(_=>Tm(_)),g=f.indexOf(e),b=g+n-1,v=()=>{const _=f.length-1,T=g*(100/_),k=(g+n)*(100/_);return`linear-gradient(
            to right,
            var(--colors-grey300) ${T}%,
            var(--colors-blue300) ${T}%,
            var(--colors-blue300) ${k}%,
            var(--colors-grey300) ${k}%
            
        )`};return Ae.useEffect(()=>{const _=T=>{if(T.defaultPrevented)return;const k=g,w=new Set(["j","J"]),E=new Set(["k","K"]);w.has(T.key)?c([k-1]):E.has(T.key)&&c([k+1])};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[g,i,t]),z.jsxs("div",{className:pc.wrapper,children:[z.jsxs("div",{className:pc.selectedLabelContainer,children:[z.jsx(Sa,{htmlFor:"splitPeriodSlider",children:be.t("Split period")}),z.jsx("span",{className:pc.selectedLabel,children:`${Tm(e)} - ${Tm(f[b])}`})]}),z.jsx("div",{className:pc.sliderContainer,children:z.jsx(cD.Range,{labelledBy:"splitPeriodSlider",min:0,max:f.length-1,values:[g],renderThumb:({props:_})=>Ae.createElement("div",{..._,key:_.key,className:pc.thumb},z.jsx("svg",{width:"100%",height:"auto",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M7 10l5 5 5-5H7z"})})),renderTrack:({props:_,children:T})=>z.jsx("div",{..._,style:{..._.style,background:v()},className:pc.track,children:T}),onChange:c,renderMark:({props:_,index:T})=>T>=i.length?null:Ae.createElement("div",{..._,key:_.key,className:pc.mark})})}),z.jsx("div",{className:pc.labelsContainer,children:y.map(_=>z.jsx("span",{className:pc.label,children:_},_))})]})},y3=10,dce=()=>{const i=oo(),{selectedEvaluations:e,baseEvaluation:t,comparisonEvaluation:r,evaluations:n,selectedOrgUnits:a,selectedSplitPeriod:c,availableOrgUnitIds:s,splitPeriods:h,hasNoMatchingSplitPeriods:f,setSelectedOrgUnits:m,setBaseEvaluation:y,setComparisonEvaluation:g,setSelectedSplitPeriod:b}=Vle({maxSelectedOrgUnits:y3}),{combined:v,isLoading:_,error:T}=Ale(e,{orgUnits:a}),{data:k}=qle(s),{dataForSplitPeriod:w,periods:E}=Ae.useMemo(()=>{var S;const A=v.viewData.filter(N=>N.splitPoint===c).flatMap(N=>N.evaluation.map(Y=>{var Z,K;return{...Y,orgUnitName:((K=(Z=k==null?void 0:k.organisationUnits)==null?void 0:Z.find(B=>B.id===Y.orgUnitId))==null?void 0:K.displayName)??Y.orgUnitId}})),M=((S=A[0])==null?void 0:S.models[0].data.periods)??[];return{dataForSplitPeriod:A,periods:M}},[v.viewData,c,k]);return z.jsxs("div",{className:Qo.wrapper,children:[z.jsxs("div",{className:Qo.selectionToolbar,children:[z.jsx(Eu,{pageTitle:be.t("Compare evaluations"),pageDescription:be.t("Compare evaluations to assess model, co-variates and data performance.")}),z.jsx("div",{children:z.jsx(Ci,{small:!0,icon:z.jsx(Xm,{}),onClick:()=>{i("/evaluate")},children:be.t("Back to evaluations")})}),z.jsxs("div",{className:Qo.compareSelectors,children:[z.jsx(oD,{onSelect:A=>{y(A==null?void 0:A.id.toString())},selected:t,available:n??[],loading:n===void 0,placeholder:be.t("Select base evaluation")}),z.jsx(hle,{onSelect:A=>{g(A==null?void 0:A.id.toString())},selected:r,compatibleEvaluationId:t==null?void 0:t.id})]}),z.jsx("div",{className:Qo.selectorRow,children:z.jsx(Lle,{prefix:be.t("Organisation Units"),selected:a,disabled:!k,onSelect:({selected:A})=>m(A),available:(k==null?void 0:k.organisationUnits)??[],inputMaxHeight:"26px",maxSelections:y3})}),_&&z.jsx("div",{className:Qo.loaderWrapper,children:z.jsx(ka,{small:!0,className:Qo.loader})})]}),f&&z.jsx(da,{warning:!0,children:be.t("Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.")}),!!T&&z.jsx(da,{title:be.t("An error occurred while fetching chart data "),error:!0,children:T.message}),h.length>0&&z.jsx("div",{className:Qo.footerSlider,children:z.jsx(uce,{splitPeriods:h,selectedSplitPeriod:c,onChange:b,periods:E})}),z.jsx("div",{children:v.viewData.length>0&&z.jsx(aP,{useVirtuoso:!1,evaluationPerOrgUnits:w})}),e.length===0&&z.jsx(hce,{})]})},hce=()=>z.jsxs("div",{className:Qo.emptySelection,children:[z.jsxs("div",{className:Qo.iconGroup,children:[z.jsx(H3,{}),z.jsxs("div",{className:Qo.arrowIcons,children:[z.jsx(Bw,{}),z.jsx(Xm,{})]}),z.jsx(G3,{})]}),z.jsxs("div",{className:Qo.textGroup,children:[z.jsx("p",{children:be.t(`Select two evaluations to compare their results. The
                    selected evaluations must be compatible.`)}),z.jsx("p",{children:be.t("Compatible evaluations have overlapping organisation units and split periods.")})]})]}),pce=()=>z.jsx(dce,{}),fce=aU([{element:z.jsx(Fre,{}),errorElement:z.jsx(GS,{}),children:[{path:"/",element:z.jsx(L$,{to:"/evaluate",replace:!0})},{element:z.jsx(Wre,{children:z.jsxs(Lse,{children:[z.jsx(Kre,{}),z.jsx(nne,{}),z.jsx(qS,{children:z.jsx(nw,{})})]})}),errorElement:z.jsx(GS,{}),children:[{path:"/evaluate",children:[{index:!0,element:z.jsx(Ese,{})},{path:"compare",handle:{fullWidth:!0},element:z.jsx(pce,{})},{path:"new",element:z.jsx(Doe,{})}]},{path:"/evaluate-old",element:z.jsx(Pee,{})},{path:"/jobs",element:z.jsx(lle,{})},{path:"/predict",element:z.jsx(xie,{})}]},{path:"/settings",element:z.jsx(qS,{children:z.jsx(nw,{})}),children:[{path:"/settings",children:[{index:!0,element:z.jsx(xre,{})},{path:"models",element:z.jsx(die,{})}]}]}]}]),xce=()=>z.jsxs(z.Fragment,{children:[z.jsx(TR,{}),z.jsx(fM,{theme:!0,spacers:!0,colors:!0,elevations:!0}),z.jsx(bie,{children:z.jsx(yU,{router:fce})}),z.jsx(bre,{position:"bottom-right"})]});export{xce as default};
//# sourceMappingURL=App-D2Kb_s-v.js.map
